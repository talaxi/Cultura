var b$=Object.defineProperty,O2=Object.getOwnPropertySymbols,_$=Object.prototype.hasOwnProperty,y$=Object.prototype.propertyIsEnumerable,N2=(Ce,xe,q)=>xe in Ce?b$(Ce,xe,{enumerable:!0,configurable:!0,writable:!0,value:q}):Ce[xe]=q,zr=(Ce,xe)=>{for(var q in xe||(xe={}))_$.call(xe,q)&&N2(Ce,q,xe[q]);if(O2)for(var q of O2(xe))y$.call(xe,q)&&N2(Ce,q,xe[q]);return Ce};(self.webpackChunkCultura=self.webpackChunkCultura||[]).push([[179],{2179:(Ce,xe,q)=>{"use strict";function X(t){return"function"==typeof t}function H(t){const e=t(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const J=H(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function re(t,i){if(t){const e=t.indexOf(i);0<=e&&t.splice(e,1)}}class he{constructor(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let i;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(X(n))try{n()}catch(a){i=a instanceof J?a.errors:[a]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const a of r)try{I(a)}catch(o){i=null!=i?i:[],o instanceof J?i=[...i,...o.errors]:i.push(o)}}if(i)throw new J(i)}}add(i){var e;if(i&&i!==this)if(this.closed)I(i);else{if(i instanceof he){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(i)}}_hasParent(i){const{_parentage:e}=this;return e===i||Array.isArray(e)&&e.includes(i)}_addParent(i){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i}_removeParent(i){const{_parentage:e}=this;e===i?this._parentage=null:Array.isArray(e)&&re(e,i)}remove(i){const{_teardowns:e}=this;e&&re(e,i),i instanceof he&&i._removeParent(this)}}he.EMPTY=(()=>{const t=new he;return t.closed=!0,t})();const Z=he.EMPTY;function ne(t){return t instanceof he||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function I(t){X(t)?t():t.unsubscribe()}const M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},N={setTimeout(...t){const{delegate:i}=N;return((null==i?void 0:i.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:i}=N;return((null==i?void 0:i.clearTimeout)||clearTimeout)(t)},delegate:void 0};function E(t){N.setTimeout(()=>{const{onUnhandledError:i}=M;if(!i)throw t;i(t)})}function O(){}const A=ae("C",void 0,void 0);function ae(t,i,e){return{kind:t,value:i,error:e}}let ie=null;function U(t){if(M.useDeprecatedSynchronousErrorHandling){const i=!ie;if(i&&(ie={errorThrown:!1,error:null}),t(),i){const{errorThrown:e,error:n}=ie;if(ie=null,e)throw n}}else t()}class de extends he{constructor(i){super(),this.isStopped=!1,i?(this.destination=i,ne(i)&&i.add(this)):this.destination=ge}static create(i,e,n){return new Re(i,e,n)}next(i){this.isStopped?He(function G(t){return ae("N",t,void 0)}(i),this):this._next(i)}error(i){this.isStopped?He(function F(t){return ae("E",void 0,t)}(i),this):(this.isStopped=!0,this._error(i))}complete(){this.isStopped?He(A,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(i){this.destination.next(i)}_error(i){try{this.destination.error(i)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const te=Function.prototype.bind;function le(t,i){return te.call(t,i)}class ue{constructor(i){this.partialObserver=i}next(i){const{partialObserver:e}=this;if(e.next)try{e.next(i)}catch(n){we(n)}}error(i){const{partialObserver:e}=this;if(e.error)try{e.error(i)}catch(n){we(n)}else we(i)}complete(){const{partialObserver:i}=this;if(i.complete)try{i.complete()}catch(e){we(e)}}}class Re extends de{constructor(i,e,n){let r;if(super(),X(i)||!i)r={next:null!=i?i:void 0,error:null!=e?e:void 0,complete:null!=n?n:void 0};else{let a;this&&M.useDeprecatedNextContext?(a=Object.create(i),a.unsubscribe=()=>this.unsubscribe(),r={next:i.next&&le(i.next,a),error:i.error&&le(i.error,a),complete:i.complete&&le(i.complete,a)}):r=i}this.destination=new ue(r)}}function we(t){M.useDeprecatedSynchronousErrorHandling?function j(t){M.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=t)}(t):E(t)}function He(t,i){const{onStoppedNotification:e}=M;e&&N.setTimeout(()=>e(t,i))}const ge={closed:!0,next:O,error:function Ve(t){throw t},complete:O},Ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fe(t){return t}let Be=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(e,n,r){const a=function Se(t){return t&&t instanceof de||function Zt(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}(t)&&ne(t)}(e)?e:new Re(e,n,r);return U(()=>{const{operator:o,source:s}=this;a.add(o?o.call(a,s):s?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=Ut(n))((r,a)=>{const o=new Re({next:s=>{try{e(s)}catch(l){a(l),o.unsubscribe()}},error:a,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[Ae](){return this}pipe(...e){return function ut(t){return 0===t.length?Fe:1===t.length?t[0]:function(e){return t.reduce((n,r)=>r(n),e)}}(e)(this)}toPromise(e){return new(e=Ut(e))((n,r)=>{let a;this.subscribe(o=>a=o,o=>r(o),()=>n(a))})}}return t.create=i=>new t(i),t})();function Ut(t){var i;return null!==(i=null!=t?t:M.Promise)&&void 0!==i?i:Promise}const Ie=H(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let be=(()=>{class t extends Be{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new ke(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new Ie}next(e){U(()=>{if(this._throwIfClosed(),!this.isStopped){const n=this.observers.slice();for(const r of n)r.next(e)}})}error(e){U(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){U(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:a}=this;return n||r?Z:(a.push(e),new he(()=>re(a,e)))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:a}=this;n?e.error(r):a&&e.complete()}asObservable(){const e=new Be;return e.source=this,e}}return t.create=(i,e)=>new ke(i,e),t})();class ke extends be{constructor(i,e){super(),this.destination=i,this.source=e}next(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,i)}error(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,i)}complete(){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.complete)||void 0===e||e.call(i)}_subscribe(i){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(i))&&void 0!==n?n:Z}}function An(t){return X(null==t?void 0:t.lift)}function Ct(t){return i=>{if(An(i))return i.lift(function(e){try{return t(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function $t(t,i,e,n,r){return new Wt(t,i,e,n,r)}class Wt extends de{constructor(i,e,n,r,a,o){super(i),this.onFinalize=a,this.shouldUnsubscribe=o,this._next=e?function(s){try{e(s)}catch(l){i.error(l)}}:super._next,this._error=r?function(s){try{r(s)}catch(l){i.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(s){i.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}}}function Nt(t,i){return Ct((e,n)=>{let r=0;e.subscribe($t(n,a=>{n.next(t.call(i,a,r++))}))})}function ze(t,i,e,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,i,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(i,e,a):o(i,e))||a);return r>3&&a&&Object.defineProperty(i,e,a),a}function Ke(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)}function br(t){return this instanceof br?(this.v=t,this):new br(t)}function Xo(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(t,i||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(m){n[m]&&(r[m]=function(v){return new Promise(function(b,y){a.push([m,v,b,y])>1||s(m,v)})})}function s(m,v){try{!function l(m){m.value instanceof br?Promise.resolve(m.value.v).then(c,u):d(a[0][2],m)}(n[m](v))}catch(b){d(a[0][3],b)}}function c(m){s("next",m)}function u(m){s("throw",m)}function d(m,v){m(v),a.shift(),a.length&&s(a[0][0],a[0][1])}}function qu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=function mr(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(a){e[a]=t[a]&&function(o){return new Promise(function(s,l){!function r(a,o,s,l){Promise.resolve(l).then(function(c){a({value:c,done:s})},o)}(s,l,(o=t[a](o)).done,o.value)})}}}const ec=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Xu(t){return X(null==t?void 0:t.then)}function tc(t){return X(t[Ae])}function Yu(t){return Symbol.asyncIterator&&X(null==t?void 0:t[Symbol.asyncIterator])}function nc(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ic=function Hf(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Qu(t){return X(null==t?void 0:t[ic])}function Ku(t){return Xo(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:n,done:r}=yield br(e.read());if(r)return yield br(void 0);yield yield br(n)}}finally{e.releaseLock()}})}function Zu(t){return X(null==t?void 0:t.getReader)}function Mi(t){if(t instanceof Be)return t;if(null!=t){if(tc(t))return function Gf(t){return new Be(i=>{const e=t[Ae]();if(X(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ec(t))return function zf(t){return new Be(i=>{for(let e=0;e<t.length&&!i.closed;e++)i.next(t[e]);i.complete()})}(t);if(Xu(t))return function Ju(t){return new Be(i=>{t.then(e=>{i.closed||(i.next(e),i.complete())},e=>i.error(e)).then(null,E)})}(t);if(Yu(t))return rc(t);if(Qu(t))return function jf(t){return new Be(i=>{for(const e of t)if(i.next(e),i.closed)return;i.complete()})}(t);if(Zu(t))return function ir(t){return rc(Ku(t))}(t)}throw nc(t)}function rc(t){return new Be(i=>{(function ka(t,i){var e,n,r,a;return function Ds(t,i,e,n){return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):function r(a){return a instanceof e?a:new e(function(o){o(a)})}(u.value).then(s,l)}c((n=n.apply(t,i||[])).next())})}(this,void 0,void 0,function*(){try{for(e=qu(t);!(n=yield e.next()).done;)if(i.next(n.value),i.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}i.complete()})})(t,i).catch(e=>i.error(e))})}function $r(t,i,e,n=0,r=!1){const a=i.schedule(function(){e(),r?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(a),!r)return a}function gi(t,i,e=1/0){return X(i)?gi((n,r)=>Nt((a,o)=>i(n,a,r,o))(Mi(t(n,r))),e):("number"==typeof i&&(e=i),Ct((n,r)=>function $f(t,i,e,n,r,a,o,s){const l=[];let c=0,u=0,d=!1;const m=()=>{d&&!l.length&&!c&&i.complete()},v=y=>c<n?b(y):l.push(y),b=y=>{a&&i.next(y),c++;let T=!1;Mi(e(y,u++)).subscribe($t(i,k=>{null==r||r(k),a?v(k):i.next(k)},()=>{T=!0},void 0,()=>{if(T)try{for(c--;l.length&&c<n;){const k=l.shift();o?$r(i,o,()=>b(k)):b(k)}m()}catch(k){i.error(k)}}))};return t.subscribe($t(i,v,()=>{d=!0,m()})),()=>{null==s||s()}}(n,r,t,e)))}function ac(t=1/0){return gi(Fe,t)}const ca=new Be(t=>t.complete());function ab(t){return t&&X(t.schedule)}function Wf(t){return t[t.length-1]}function ed(t){return X(Wf(t))?t.pop():void 0}function oc(t){return ab(Wf(t))?t.pop():void 0}function ob(t,i=0){return Ct((e,n)=>{e.subscribe($t(n,r=>$r(n,t,()=>n.next(r),i),()=>$r(n,t,()=>n.complete(),i),r=>$r(n,t,()=>n.error(r),i)))})}function sb(t,i=0){return Ct((e,n)=>{n.add(t.schedule(()=>e.subscribe(n),i))})}function lb(t,i){if(!t)throw new Error("Iterable cannot be null");return new Be(e=>{$r(e,i,()=>{const n=t[Symbol.asyncIterator]();$r(e,i,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Fi(t,i){return i?function j2(t,i){if(null!=t){if(tc(t))return function L2(t,i){return Mi(t).pipe(sb(i),ob(i))}(t,i);if(ec(t))return function H2(t,i){return new Be(e=>{let n=0;return i.schedule(function(){n===t.length?e.complete():(e.next(t[n++]),e.closed||this.schedule())})})}(t,i);if(Xu(t))return function U2(t,i){return Mi(t).pipe(sb(i),ob(i))}(t,i);if(Yu(t))return lb(t,i);if(Qu(t))return function G2(t,i){return new Be(e=>{let n;return $r(e,i,()=>{n=t[ic](),$r(e,i,()=>{let r,a;try{({value:r,done:a}=n.next())}catch(o){return void e.error(o)}a?e.complete():e.next(r)},0,!0)}),()=>X(null==n?void 0:n.return)&&n.return()})}(t,i);if(Zu(t))return function z2(t,i){return lb(Ku(t),i)}(t,i)}throw nc(t)}(t,i):Mi(t)}function cb(...t){const i=oc(t),e=function B2(t,i){return"number"==typeof Wf(t)?t.pop():i}(t,1/0),n=t;return n.length?1===n.length?Mi(n[0]):ac(e)(Fi(n,i)):ca}function Bi(t){return t<=0?()=>ca:Ct((i,e)=>{let n=0;i.subscribe($t(e,r=>{++n<=t&&(e.next(r),t<=n&&e.complete())}))})}function ub(t={}){const{connector:i=(()=>new be),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=t;return a=>{let o=null,s=null,l=null,c=0,u=!1,d=!1;const m=()=>{null==s||s.unsubscribe(),s=null},v=()=>{m(),o=l=null,u=d=!1},b=()=>{const y=o;v(),null==y||y.unsubscribe()};return Ct((y,T)=>{c++,!d&&!u&&m();const k=l=null!=l?l:i();T.add(()=>{c--,0===c&&!d&&!u&&(s=qf(b,r))}),k.subscribe(T),o||(o=new Re({next:C=>k.next(C),error:C=>{d=!0,m(),s=qf(v,e,C),k.error(C)},complete:()=>{u=!0,m(),s=qf(v,n),k.complete()}}),Fi(y).subscribe(o))})(a)}}function qf(t,i,...e){return!0===i?(t(),null):!1===i?null:i(...e).pipe(Bi(1)).subscribe(()=>t())}function Pn(t){for(let i in t)if(t[i]===Pn)return i;throw Error("Could not find renamed property on target object.")}function Xf(t,i){for(const e in i)i.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=i[e])}function Dn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Dn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const i=t.toString();if(null==i)return""+i;const e=i.indexOf("\n");return-1===e?i:i.substring(0,e)}function Yf(t,i){return null==t||""===t?null===i?"":i:null==i||""===i?t:t+" "+i}const $2=Pn({__forward_ref__:Pn});function hn(t){return t.__forward_ref__=hn,t.toString=function(){return Dn(this())},t}function Ht(t){return db(t)?t():t}function db(t){return"function"==typeof t&&t.hasOwnProperty($2)&&t.__forward_ref__===hn}class un extends Error{constructor(i,e){super(function Qf(t,i){return`NG0${Math.abs(t)}${i?": "+i:""}`}(i,e)),this.code=i}}function Vt(t){return"string"==typeof t?t:null==t?"":String(t)}function rr(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Vt(t)}function td(t,i){const e=i?` in ${i}`:"";throw new un(-201,`No provider for ${rr(t)} found${e}`)}function jn(t,i,e,n){throw new Error(`ASSERTION ERROR: ${t}`+(null==n?"":` [Expected=> ${e} ${n} ${i} <=Actual]`))}function rt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Cn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Kf(t){return hb(t,nd)||hb(t,pb)}function hb(t,i){return t.hasOwnProperty(i)?t[i]:null}function fb(t){return t&&(t.hasOwnProperty(Zf)||t.hasOwnProperty(Z2))?t[Zf]:null}const nd=Pn({\u0275prov:Pn}),Zf=Pn({\u0275inj:Pn}),pb=Pn({ngInjectableDef:Pn}),Z2=Pn({ngInjectorDef:Pn});var Ft=(()=>((Ft=Ft||{})[Ft.Default=0]="Default",Ft[Ft.Host=1]="Host",Ft[Ft.Self=2]="Self",Ft[Ft.SkipSelf=4]="SkipSelf",Ft[Ft.Optional=8]="Optional",Ft))();let Jf;function To(t){const i=Jf;return Jf=t,i}function gb(t,i,e){const n=Kf(t);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&Ft.Optional?null:void 0!==i?i:void td(Dn(t),"Injector")}function Do(t){return{toString:t}.toString()}var ua=(()=>((ua=ua||{})[ua.OnPush=0]="OnPush",ua[ua.Default=1]="Default",ua))(),Aa=(()=>{return(t=Aa||(Aa={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Aa;var t})();const ex="undefined"!=typeof globalThis&&globalThis,tx="undefined"!=typeof window&&window,nx="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Mn=ex||"undefined"!=typeof global&&global||tx||nx,As={},En=[],id=Pn({\u0275cmp:Pn}),ep=Pn({\u0275dir:Pn}),tp=Pn({\u0275pipe:Pn}),mb=Pn({\u0275mod:Pn}),no=Pn({\u0275fac:Pn}),sc=Pn({__NG_ELEMENT_ID__:Pn});let ix=0;function ft(t){return Do(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ua.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||En,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Aa.Emulated,id:"c",styles:t.styles||En,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,a=t.features,o=t.pipes;return n.id+=ix++,n.inputs=yb(t.inputs,e),n.outputs=yb(t.outputs),a&&a.forEach(s=>s(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(vb):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(bb):null,n})}function vb(t){return qi(t)||function Ro(t){return t[ep]||null}(t)}function bb(t){return function Yo(t){return t[tp]||null}(t)}const _b={};function Rn(t){return Do(()=>{const i={type:t.type,bootstrap:t.bootstrap||En,declarations:t.declarations||En,imports:t.imports||En,exports:t.exports||En,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(_b[t.id]=t.type),i})}function yb(t,i){if(null==t)return As;const e={};for(const n in t)if(t.hasOwnProperty(n)){let r=t[n],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=n,i&&(i[r]=a)}return e}const je=ft;function _r(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function qi(t){return t[id]||null}function Wr(t,i){const e=t[mb]||null;if(!e&&!0===i)throw new Error(`Type ${Dn(t)} does not have '\u0275mod' property.`);return e}function Pa(t){return Array.isArray(t)&&"object"==typeof t[1]}function ha(t){return Array.isArray(t)&&!0===t[1]}function rp(t){return 0!=(8&t.flags)}function sd(t){return 2==(2&t.flags)}function ld(t){return 1==(1&t.flags)}function fa(t){return null!==t.template}function cx(t){return 0!=(512&t[2])}function Jo(t,i){return t.hasOwnProperty(no)?t[no]:null}class hx{constructor(i,e,n){this.previousValue=i,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ui(){return Cb}function Cb(t){return t.type.prototype.ngOnChanges&&(t.setInput=px),fx}function fx(){const t=Tb(this),i=null==t?void 0:t.current;if(i){const e=t.previous;if(e===As)t.previous=i;else for(let n in i)e[n]=i[n];t.current=null,this.ngOnChanges(i)}}function px(t,i,e,n){const r=Tb(t)||function gx(t,i){return t[Sb]=i}(t,{previous:As,current:null}),a=r.current||(r.current={}),o=r.previous,s=this.declaredInputs[e],l=o[s];a[s]=new hx(l&&l.currentValue,i,o===As),t[n]=i}Ui.ngInherit=!0;const Sb="__ngSimpleChanges__";function Tb(t){return t[Sb]||null}let cp;function up(){return void 0!==cp?cp:"undefined"!=typeof document?document:void 0}function ui(t){return!!t.listen}const Db={createRenderer:(t,i)=>up()};function Ci(t){for(;Array.isArray(t);)t=t[0];return t}function cd(t,i){return Ci(i[t])}function Yr(t,i){return Ci(i[t.index])}function dp(t,i){return t.data[i]}function Os(t,i){return t[i]}function Ar(t,i){const e=i[t];return Pa(e)?e:e[0]}function Rb(t){return 4==(4&t[2])}function hp(t){return 128==(128&t[2])}function xo(t,i){return null==i?null:t[i]}function xb(t){t[18]=0}function fp(t,i){t[5]+=i;let e=t,n=t[3];for(;null!==n&&(1===i&&1===e[5]||-1===i&&0===e[5]);)n[5]+=i,e=n,n=n[3]}const xt={lFrame:Ob(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Mb(){return xt.bindingsEnabled}function Me(){return xt.lFrame.lView}function dn(){return xt.lFrame.tView}function B(t){return xt.lFrame.contextLView=t,t[8]}function ki(){let t=kb();for(;null!==t&&64===t.type;)t=t.parent;return t}function kb(){return xt.lFrame.currentTNode}function dc(){const t=xt.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}function Ea(t,i){const e=xt.lFrame;e.currentTNode=t,e.isParent=i}function pp(){return xt.lFrame.isParent}function gp(){xt.lFrame.isParent=!1}function ud(){return xt.isInCheckNoChangesMode}function dd(t){xt.isInCheckNoChangesMode=t}function ar(){const t=xt.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}function io(){return xt.lFrame.bindingIndex}function Ns(){return xt.lFrame.bindingIndex++}function ro(t){const i=xt.lFrame,e=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,e}function Pb(t){xt.lFrame.inI18n=t}function Ex(t,i){const e=xt.lFrame;e.bindingIndex=e.bindingRootIndex=t,mp(i)}function mp(t){xt.lFrame.currentDirectiveIndex=t}function Eb(){return xt.lFrame.currentQueryIndex}function bp(t){xt.lFrame.currentQueryIndex=t}function Vx(t){const i=t[1];return 2===i.type?i.declTNode:1===i.type?t[6]:null}function Ib(t,i,e){if(e&Ft.SkipSelf){let r=i,a=t;for(;!(r=r.parent,null!==r||e&Ft.Host||(r=Vx(a),null===r||(a=a[15],10&r.type))););if(null===r)return!1;i=r,t=a}const n=xt.lFrame=Vb();return n.currentTNode=i,n.lView=t,!0}function hd(t){const i=Vb(),e=t[1];xt.lFrame=i,i.currentTNode=e.firstChild,i.lView=t,i.tView=e,i.contextLView=t,i.bindingIndex=e.bindingStartIndex,i.inI18n=!1}function Vb(){const t=xt.lFrame,i=null===t?null:t.child;return null===i?Ob(t):i}function Ob(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function Nb(){const t=xt.lFrame;return xt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Fb=Nb;function fd(){const t=Nb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function or(){return xt.lFrame.selectedIndex}function Mo(t){xt.lFrame.selectedIndex=t}function di(){const t=xt.lFrame;return dp(t.tView,t.selectedIndex)}function pd(t,i){for(let e=i.directiveStart,n=i.directiveEnd;e<n;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=a;o&&(t.contentHooks||(t.contentHooks=[])).push(-e,o),s&&((t.contentHooks||(t.contentHooks=[])).push(e,s),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,s)),l&&(t.viewHooks||(t.viewHooks=[])).push(-e,l),c&&((t.viewHooks||(t.viewHooks=[])).push(e,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,c)),null!=u&&(t.destroyHooks||(t.destroyHooks=[])).push(e,u)}}function gd(t,i,e){Bb(t,i,3,e)}function md(t,i,e,n){(3&t[2])===e&&Bb(t,i,e,n)}function _p(t,i){let e=t[2];(3&e)===i&&(e&=2047,e+=1,t[2]=e)}function Bb(t,i,e,n){const a=null!=n?n:-1,o=i.length-1;let s=0;for(let l=void 0!==n?65535&t[18]:0;l<o;l++)if("number"==typeof i[l+1]){if(s=i[l],null!=n&&s>=n)break}else i[l]<0&&(t[18]+=65536),(s<a||-1==a)&&(zx(t,e,i,l),t[18]=(4294901760&t[18])+l+2),l++}function zx(t,i,e,n){const r=e[n]<0,a=e[n+1],s=t[r?-e[n]:e[n]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===i){t[2]+=2048;try{a.call(s)}finally{}}}else try{a.call(s)}finally{}}class hc{constructor(i,e,n){this.factory=i,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function vd(t,i,e){const n=ui(t);let r=0;for(;r<e.length;){const a=e[r];if("number"==typeof a){if(0!==a)break;r++;const o=e[r++],s=e[r++],l=e[r++];n?t.setAttribute(i,s,l,o):i.setAttributeNS(o,s,l)}else{const o=a,s=e[++r];wp(o)?n&&t.setProperty(i,o,s):n?t.setAttribute(i,o,s):i.setAttribute(o,s),r++}}return r}function Lb(t){return 3===t||4===t||6===t}function wp(t){return 64===t.charCodeAt(0)}function bd(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let e=-1;for(let n=0;n<i.length;n++){const r=i[n];"number"==typeof r?e=r:0===e||Ub(t,e,r,null,-1===e||2===e?i[++n]:null)}}return t}function Ub(t,i,e,n,r){let a=0,o=t.length;if(-1===i)o=-1;else for(;a<t.length;){const s=t[a++];if("number"==typeof s){if(s===i){o=-1;break}if(s>i){o=a-1;break}}}for(;a<t.length;){const s=t[a];if("number"==typeof s)break;if(s===e){if(null===n)return void(null!==r&&(t[a+1]=r));if(n===t[a+1])return void(t[a+2]=r)}a++,null!==n&&a++,null!==r&&a++}-1!==o&&(t.splice(o,0,i),a=o+1),t.splice(a++,0,e),null!==n&&t.splice(a++,0,n),null!==r&&t.splice(a++,0,r)}function Hb(t){return-1!==t}function Fs(t){return 32767&t}function Bs(t,i){let e=function Xx(t){return t>>16}(t),n=i;for(;e>0;)n=n[15],e--;return n}let Cp=!0;function _d(t){const i=Cp;return Cp=t,i}let Yx=0;function pc(t,i){const e=Tp(t,i);if(-1!==e)return e;const n=i[1];n.firstCreatePass&&(t.injectorIndex=i.length,Sp(n.data,t),Sp(i,null),Sp(n.blueprint,null));const r=yd(t,i),a=t.injectorIndex;if(Hb(r)){const o=Fs(r),s=Bs(r,i),l=s[1].data;for(let c=0;c<8;c++)i[a+c]=s[o+c]|l[o+c]}return i[a+8]=r,a}function Sp(t,i){t.push(0,0,0,0,0,0,0,0,i)}function Tp(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function yd(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,n=null,r=i;for(;null!==r;){const a=r[1],o=a.type;if(n=2===o?a.declTNode:1===o?r[6]:null,null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function wd(t,i,e){!function Qx(t,i,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(sc)&&(n=e[sc]),null==n&&(n=e[sc]=Yx++);const r=255&n;i.data[t+(r>>5)]|=1<<r}(t,i,e)}function jb(t,i,e){if(e&Ft.Optional)return t;td(i,"NodeInjector")}function $b(t,i,e,n){if(e&Ft.Optional&&void 0===n&&(n=null),0==(e&(Ft.Self|Ft.Host))){const r=t[9],a=To(void 0);try{return r?r.get(i,n,e&Ft.Optional):gb(i,n,e&Ft.Optional)}finally{To(a)}}return jb(n,i,e)}function Wb(t,i,e,n=Ft.Default,r){if(null!==t){const a=function eM(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(sc)?t[sc]:void 0;return"number"==typeof i?i>=0?255&i:Zx:i}(e);if("function"==typeof a){if(!Ib(i,t,n))return n&Ft.Host?jb(r,e,n):$b(i,e,n,r);try{const o=a(n);if(null!=o||n&Ft.Optional)return o;td(e)}finally{Fb()}}else if("number"==typeof a){let o=null,s=Tp(t,i),l=-1,c=n&Ft.Host?i[16][6]:null;for((-1===s||n&Ft.SkipSelf)&&(l=-1===s?yd(t,i):i[s+8],-1!==l&&Yb(n,!1)?(o=i[1],s=Fs(l),i=Bs(l,i)):s=-1);-1!==s;){const u=i[1];if(Xb(a,s,u.data)){const d=Jx(s,i,e,o,n,c);if(d!==qb)return d}l=i[s+8],-1!==l&&Yb(n,i[1].data[s+8]===c)&&Xb(a,s,i)?(o=u,s=Fs(l),i=Bs(l,i)):s=-1}}}return $b(i,e,n,r)}const qb={};function Zx(){return new Ls(ki(),Me())}function Jx(t,i,e,n,r,a){const o=i[1],s=o.data[t+8],u=Cd(s,o,e,null==n?sd(s)&&Cp:n!=o&&0!=(3&s.type),r&Ft.Host&&a===s);return null!==u?gc(i,o,u,s):qb}function Cd(t,i,e,n,r){const a=t.providerIndexes,o=i.data,s=1048575&a,l=t.directiveStart,u=a>>20,m=r?s+u:t.directiveEnd;for(let v=n?s:s+u;v<m;v++){const b=o[v];if(v<l&&e===b||v>=l&&b.type===e)return v}if(r){const v=o[l];if(v&&fa(v)&&v.type===e)return l}return null}function gc(t,i,e,n){let r=t[e];const a=i.data;if(function jx(t){return t instanceof hc}(r)){const o=r;o.resolving&&function W2(t,i){const e=i?`. Dependency path: ${i.join(" > ")} > ${t}`:"";throw new un(-200,`Circular dependency in DI detected for ${t}${e}`)}(rr(a[e]));const s=_d(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?To(o.injectImpl):null;Ib(t,n,Ft.Default);try{r=t[e]=o.factory(void 0,a,t,n),i.firstCreatePass&&e>=n.directiveStart&&function Gx(t,i,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:a}=i.type.prototype;if(n){const o=Cb(i);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),a&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,a),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,a))}(e,a[e],i)}finally{null!==l&&To(l),_d(s),o.resolving=!1,Fb()}}return r}function Xb(t,i,e){return!!(e[i+(t>>5)]&1<<t)}function Yb(t,i){return!(t&Ft.Self||t&Ft.Host&&i)}class Ls{constructor(i,e){this._tNode=i,this._lView=e}get(i,e,n){return Wb(this._tNode,this._lView,i,n,e)}}function Yi(t){return Do(()=>{const i=t.prototype.constructor,e=i[no]||Dp(i),n=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==n;){const a=r[no]||Dp(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function Dp(t){return db(t)?()=>{const i=Dp(Ht(t));return i&&i()}:Jo(t)}const Hs="__parameters__";function zs(t,i,e){return Do(()=>{const n=function Rp(t){return function(...e){if(t){const n=t(...e);for(const r in n)this[r]=n[r]}}}(i);function r(...a){if(this instanceof r)return n.apply(this,a),this;const o=new r(...a);return s.annotation=o,s;function s(l,c,u){const d=l.hasOwnProperty(Hs)?l[Hs]:Object.defineProperty(l,Hs,{value:[]})[Hs];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class qt{constructor(i,e){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=rt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const nM=new qt("AnalyzeForEntryComponents");function Qr(t,i){void 0===i&&(i=t);for(let e=0;e<t.length;e++){let n=t[e];Array.isArray(n)?(i===t&&(i=t.slice(0,e)),Qr(n,i)):i!==t&&i.push(n)}return i}function Ia(t,i){t.forEach(e=>Array.isArray(e)?Ia(e,i):i(e))}function Kb(t,i,e){i>=t.length?t.push(e):t.splice(i,0,e)}function Sd(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function bc(t,i){const e=[];for(let n=0;n<t;n++)e.push(i);return e}function Pr(t,i,e){let n=js(t,i);return n>=0?t[1|n]=e:(n=~n,function aM(t,i,e,n){let r=t.length;if(r==i)t.push(e,n);else if(1===r)t.push(n,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>i;)t[r]=t[r-2],r--;t[i]=e,t[i+1]=n}}(t,n,i,e)),n}function Mp(t,i){const e=js(t,i);if(e>=0)return t[1|e]}function js(t,i){return function e1(t,i,e){let n=0,r=t.length>>e;for(;r!==n;){const a=n+(r-n>>1),o=t[a<<e];if(i===o)return a<<e;o>i?r=a:n=a+1}return~(r<<e)}(t,i,1)}const _c={},Ap="__NG_DI_FLAG__",Dd="ngTempTokenPath",hM=/\n/gm,n1="__source",pM=Pn({provide:String,useValue:Pn});let yc;function i1(t){const i=yc;return yc=t,i}function gM(t,i=Ft.Default){if(void 0===yc)throw new un(203,"");return null===yc?gb(t,void 0,i):yc.get(t,i&Ft.Optional?null:void 0,i)}function Le(t,i=Ft.Default){return(function J2(){return Jf}()||gM)(Ht(t),i)}function Pp(t){const i=[];for(let e=0;e<t.length;e++){const n=Ht(t[e]);if(Array.isArray(n)){if(0===n.length)throw new un(900,"");let r,a=Ft.Default;for(let o=0;o<n.length;o++){const s=n[o],l=mM(s);"number"==typeof l?-1===l?r=s.token:a|=l:r=s}i.push(Le(r,a))}else i.push(Le(n))}return i}function wc(t,i){return t[Ap]=i,t.prototype[Ap]=i,t}function mM(t){return t[Ap]}const Cc=wc(zs("Inject",t=>({token:t})),-1),Va=wc(zs("Optional"),8),$s=wc(zs("SkipSelf"),4);let xd,Md;function qs(t){var i;return(null===(i=function Ip(){if(void 0===xd&&(xd=null,Mn.trustedTypes))try{xd=Mn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return xd}())||void 0===i?void 0:i.createHTML(t))||t}function c1(t){var i;return(null===(i=function Vp(){if(void 0===Md&&(Md=null,Mn.trustedTypes))try{Md=Mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Md}())||void 0===i?void 0:i.createHTML(t))||t}class ts{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class kM extends ts{getTypeName(){return"HTML"}}class AM extends ts{getTypeName(){return"Style"}}class PM extends ts{getTypeName(){return"Script"}}class EM extends ts{getTypeName(){return"URL"}}class IM extends ts{getTypeName(){return"ResourceURL"}}function Er(t){return t instanceof ts?t.changingThisBreaksApplicationSecurity:t}function Oa(t,i){const e=h1(t);if(null!=e&&e!==i){if("ResourceURL"===e&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===i}function h1(t){return t instanceof ts&&t.getTypeName()||null}function f1(t){const i=new UM(t);return function HM(){try{return!!(new window.DOMParser).parseFromString(qs(""),"text/html")}catch(t){return!1}}()?new LM(i):i}class LM{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const e=(new window.DOMParser).parseFromString(qs(i),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(i):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class UM{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(i){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=qs(i),e;const n=this.inertDocument.createElement("body");return n.innerHTML=qs(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(i){const e=i.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&i.removeAttribute(o)}let n=i.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const GM=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,zM=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Tc(t){return(t=String(t)).match(GM)||t.match(zM)?t:"unsafe:"+t}function p1(t){return(t=String(t)).split(",").map(i=>Tc(i.trim())).join(", ")}function Na(t){const i={};for(const e of t.split(","))i[e]=!0;return i}function Dc(...t){const i={};for(const e of t)for(const n in e)e.hasOwnProperty(n)&&(i[n]=!0);return i}const g1=Na("area,br,col,hr,img,wbr"),m1=Na("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),v1=Na("rp,rt"),Op=Dc(g1,Dc(m1,Na("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Dc(v1,Na("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Dc(v1,m1)),Np=Na("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fp=Na("srcset"),b1=Dc(Np,Fp,Na("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Na("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jM=Na("script,style,template");class $M{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let e=i.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(i){const e=i.nodeName.toLowerCase();if(!Op.hasOwnProperty(e))return this.sanitizedSomething=!0,!jM.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=i.attributes;for(let r=0;r<n.length;r++){const a=n.item(r),o=a.name,s=o.toLowerCase();if(!b1.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let l=a.value;Np[s]&&(l=Tc(l)),Fp[s]&&(l=p1(l)),this.buf.push(" ",o,'="',_1(l),'"')}return this.buf.push(">"),!0}endElement(i){const e=i.nodeName.toLowerCase();Op.hasOwnProperty(e)&&!g1.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(i){this.buf.push(_1(i))}checkClobberedElement(i,e){if(e&&(i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return e}}const WM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qM=/([^\#-~ |!])/g;function _1(t){return t.replace(/&/g,"&amp;").replace(WM,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(qM,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let kd;function y1(t,i){let e=null;try{kd=kd||f1(t);let n=i?String(i):"";e=kd.getInertBodyElement(n);let r=5,a=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=a,a=e.innerHTML,e=kd.getInertBodyElement(n)}while(n!==a);return qs((new $M).sanitizeChildren(Bp(e)||e))}finally{if(e){const n=Bp(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Bp(t){return"content"in t&&function XM(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var en=(()=>((en=en||{})[en.NONE=0]="NONE",en[en.HTML=1]="HTML",en[en.STYLE=2]="STYLE",en[en.SCRIPT=3]="SCRIPT",en[en.URL=4]="URL",en[en.RESOURCE_URL=5]="RESOURCE_URL",en))();function Bt(t){const i=function Rc(){const t=Me();return t&&t[12]}();return i?c1(i.sanitize(en.HTML,t)||""):Oa(t,"HTML")?c1(Er(t)):y1(up(),Vt(t))}const S1="__ngContext__";function Qi(t,i){t[S1]=i}function Hp(t){const i=function xc(t){return t[S1]||null}(t);return i?Array.isArray(i)?i:i.lView:null}function zp(t){return t.ngOriginalError}function uk(t,...i){t.error(...i)}class Xs{constructor(){this._console=console}handleError(i){const e=this._findOriginalError(i),n=function ck(t){return t&&t.ngErrorLogger||uk}(i);n(this._console,"ERROR",i),e&&n(this._console,"ORIGINAL ERROR",e)}_findOriginalError(i){let e=i&&zp(i);for(;e&&zp(e);)e=zp(e);return e||null}}const fk=/^>|^->|<!--|-->|--!>|<!-$/g,pk=/(<|>)/;const M1=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Mn))();function ao(t){return t.ownerDocument.defaultView}function Fa(t){return t instanceof Function?t():t}var Ir=(()=>((Ir=Ir||{})[Ir.Important=1]="Important",Ir[Ir.DashCase=2]="DashCase",Ir))();let jp;function $p(t,i){return jp(t,i)}function Mc(t){const i=t[3];return ha(i)?i[3]:i}function Wp(t){return I1(t[13])}function qp(t){return I1(t[4])}function I1(t){for(;null!==t&&!ha(t);)t=t[4];return t}function Qs(t,i,e,n,r){if(null!=n){let a,o=!1;ha(n)?a=n:Pa(n)&&(o=!0,n=n[0]);const s=Ci(n);0===t&&null!==e?null==r?L1(i,e,s):ns(i,e,s,r||null,!0):1===t&&null!==e?ns(i,e,s,r||null,!0):2===t?W1(i,s,o):3===t&&i.destroyNode(s),null!=a&&function Ok(t,i,e,n,r){const a=e[7];a!==Ci(e)&&Qs(i,t,n,a,r);for(let s=10;s<e.length;s++){const l=e[s];kc(l[1],l,t,i,n,a)}}(i,t,a,e,r)}}function Xp(t,i){return ui(t)?t.createText(i):t.createTextNode(i)}function V1(t,i,e){ui(t)?t.setValue(i,e):i.textContent=e}function Sk(t,i){return t.createComment(function x1(t){return t.replace(fk,i=>i.replace(pk,"\u200b$1\u200b"))}(i))}function Yp(t,i,e){if(ui(t))return t.createElement(i,e);{const n=null!==e?function _x(t){const i=t.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(e):null;return null===n?t.createElement(i):t.createElementNS(n,i)}}function O1(t,i){const e=t[9],n=e.indexOf(i),r=i[3];1024&i[2]&&(i[2]&=-1025,fp(r,-1)),e.splice(n,1)}function Qp(t,i){if(t.length<=10)return;const e=10+i,n=t[e];if(n){const r=n[17];null!==r&&r!==t&&O1(r,n),i>0&&(t[e-1][4]=n[4]);const a=Sd(t,10+i);!function Tk(t,i){kc(t,i,i[11],2,null,null),i[0]=null,i[6]=null}(n[1],n);const o=a[19];null!==o&&o.detachView(a[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function N1(t,i){if(!(256&i[2])){const e=i[11];ui(e)&&e.destroyNode&&kc(t,i,e,3,null,null),function xk(t){let i=t[13];if(!i)return Kp(t[1],t);for(;i;){let e=null;if(Pa(i))e=i[13];else{const n=i[10];n&&(e=n)}if(!e){for(;i&&!i[4]&&i!==t;)Pa(i)&&Kp(i[1],i),i=i[3];null===i&&(i=t),Pa(i)&&Kp(i[1],i),e=i&&i[4]}i=e}}(i)}}function Kp(t,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function Pk(t,i){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let n=0;n<e.length;n+=2){const r=i[e[n]];if(!(r instanceof hc)){const a=e[n+1];if(Array.isArray(a))for(let o=0;o<a.length;o+=2){const s=r[a[o]],l=a[o+1];try{l.call(s)}finally{}}else try{a.call(r)}finally{}}}}(t,i),function Ak(t,i){const e=t.cleanup,n=i[7];let r=-1;if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const o=e[a+1],s="function"==typeof o?o(i):Ci(i[o]),l=n[r=e[a+2]],c=e[a+3];"boolean"==typeof c?s.removeEventListener(e[a],l,c):c>=0?n[r=c]():n[r=-c].unsubscribe(),a+=2}else{const o=n[r=e[a+1]];e[a].call(o)}if(null!==n){for(let a=r+1;a<n.length;a++)n[a]();i[7]=null}}(t,i),1===i[1].type&&ui(i[11])&&i[11].destroy();const e=i[17];if(null!==e&&ha(i[3])){e!==i[3]&&O1(e,i);const n=i[19];null!==n&&n.detachView(t)}}}function F1(t,i,e){return B1(t,i.parent,e)}function B1(t,i,e){let n=i;for(;null!==n&&40&n.type;)n=(i=n).parent;if(null===n)return e[0];if(2&n.flags){const r=t.data[n.directiveStart].encapsulation;if(r===Aa.None||r===Aa.Emulated)return null}return Yr(n,e)}function ns(t,i,e,n,r){ui(t)?t.insertBefore(i,e,n,r):i.insertBefore(e,n,r)}function L1(t,i,e){ui(t)?t.appendChild(i,e):i.appendChild(e)}function U1(t,i,e,n,r){null!==n?ns(t,i,e,n,r):L1(t,i,e)}function Ad(t,i){return ui(t)?t.parentNode(i):i.parentNode}function H1(t,i,e){return z1(t,i,e)}function G1(t,i,e){return 40&t.type?Yr(t,e):null}let Zp,z1=G1;function j1(t,i){z1=t,Zp=i}function Pd(t,i,e,n){const r=F1(t,n,i),a=i[11],s=H1(n.parent||i[6],n,i);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)U1(a,r,e[l],s,!1);else U1(a,r,e,s,!1);void 0!==Zp&&Zp(a,n,i,e,r)}function Ed(t,i){if(null!==i){const e=i.type;if(3&e)return Yr(i,t);if(4&e)return Jp(-1,t[i.index]);if(8&e){const n=i.child;if(null!==n)return Ed(t,n);{const r=t[i.index];return ha(r)?Jp(-1,r):Ci(r)}}if(32&e)return $p(i,t)()||Ci(t[i.index]);{const n=$1(t,i);return null!==n?Array.isArray(n)?n[0]:Ed(Mc(t[16]),n):Ed(t,i.next)}}return null}function $1(t,i){return null!==i?t[16][6].projection[i.projection]:null}function Jp(t,i){const e=10+t+1;if(e<i.length){const n=i[e],r=n[1].firstChild;if(null!==r)return Ed(n,r)}return i[7]}function W1(t,i,e){const n=Ad(t,i);n&&function Ek(t,i,e,n){ui(t)?t.removeChild(i,e,n):i.removeChild(e)}(t,n,i,e)}function eg(t,i,e,n,r,a,o){for(;null!=e;){const s=n[e.index],l=e.type;if(o&&0===i&&(s&&Qi(Ci(s),n),e.flags|=4),64!=(64&e.flags))if(8&l)eg(t,i,e.child,n,r,a,!1),Qs(i,t,r,s,a);else if(32&l){const c=$p(e,n);let u;for(;u=c();)Qs(i,t,r,u,a);Qs(i,t,r,s,a)}else 16&l?q1(t,i,n,e,r,a):Qs(i,t,r,s,a);e=o?e.projectionNext:e.next}}function kc(t,i,e,n,r,a){eg(e,n,t.firstChild,i,r,a,!1)}function q1(t,i,e,n,r,a){const o=e[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Qs(i,t,r,l[c],a);else eg(t,i,l,o[3],r,a,!0)}function X1(t,i,e){ui(t)?t.setAttribute(i,"style",e):i.style.cssText=e}function tg(t,i,e){ui(t)?""===e?t.removeAttribute(i,"class"):t.setAttribute(i,"class",e):i.className=e}function Y1(t,i,e){let n=t.length;for(;;){const r=t.indexOf(i,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=i.length;if(r+a===n||t.charCodeAt(r+a)<=32)return r}e=r+1}}const Q1="ng-template";function Fk(t,i,e){let n=0;for(;n<t.length;){let r=t[n++];if(e&&"class"===r){if(r=t[n],-1!==Y1(r.toLowerCase(),i,0))return!0}else if(1===r){for(;n<t.length&&"string"==typeof(r=t[n++]);)if(r.toLowerCase()===i)return!0;return!1}}return!1}function K1(t){return 4===t.type&&t.value!==Q1}function Bk(t,i,e){return i===(4!==t.type||e?t.value:Q1)}function Lk(t,i,e){let n=4;const r=t.attrs||[],a=function Gk(t){for(let i=0;i<t.length;i++)if(Lb(t[i]))return i;return t.length}(r);let o=!1;for(let s=0;s<i.length;s++){const l=i[s];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!Bk(t,l,e)||""===l&&1===i.length){if(pa(n))return!1;o=!0}}else{const c=8&n?l:i[++s];if(8&n&&null!==t.attrs){if(!Fk(t.attrs,c,e)){if(pa(n))return!1;o=!0}continue}const d=Uk(8&n?"class":l,r,K1(t),e);if(-1===d){if(pa(n))return!1;o=!0;continue}if(""!==c){let m;m=d>a?"":r[d+1].toLowerCase();const v=8&n?m:null;if(v&&-1!==Y1(v,c,0)||2&n&&c!==m){if(pa(n))return!1;o=!0}}}}else{if(!o&&!pa(n)&&!pa(l))return!1;if(o&&pa(l))continue;o=!1,n=l|1&n}}return pa(n)||o}function pa(t){return 0==(1&t)}function Uk(t,i,e,n){if(null===i)return-1;let r=0;if(n||!e){let a=!1;for(;r<i.length;){const o=i[r];if(o===t)return r;if(3===o||6===o)a=!0;else{if(1===o||2===o){let s=i[++r];for(;"string"==typeof s;)s=i[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=a?1:2}return-1}return function zk(t,i){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const n=t[e];if("number"==typeof n)return-1;if(n===i)return e;e++}return-1}(i,t)}function Z1(t,i,e=!1){for(let n=0;n<i.length;n++)if(Lk(t,i[n],e))return!0;return!1}function jk(t,i){e:for(let e=0;e<i.length;e++){const n=i[e];if(t.length===n.length){for(let r=0;r<t.length;r++)if(t[r]!==n[r])continue e;return!0}}return!1}function J1(t,i){return t?":not("+i.trim()+")":i}function $k(t){let i=t[0],e=1,n=2,r="",a=!1;for(;e<t.length;){let o=t[e];if("string"==typeof o)if(2&n){const s=t[++e];r+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!pa(o)&&(i+=J1(a,r),r=""),n=o,a=a||!pa(n);e++}return""!==r&&(i+=J1(a,r)),i}const Ot={};function p(t){e_(dn(),Me(),or()+t,ud())}function e_(t,i,e,n){if(!n)if(3==(3&i[2])){const a=t.preOrderCheckHooks;null!==a&&gd(i,a,e)}else{const a=t.preOrderHooks;null!==a&&md(i,a,0,e)}Mo(e)}function Id(t,i){return t<<17|i<<2}function ga(t){return t>>17&32767}function ng(t){return 2|t}function oo(t){return(131068&t)>>2}function ig(t,i){return-131069&t|i<<2}function rg(t){return 1|t}function d_(t,i){const e=t.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],a=e[n+1];if(-1!==a){const o=t.data[a];bp(r),o.contentQueries(2,i[a],a)}}}function Ac(t,i,e,n,r,a,o,s,l,c){const u=i.blueprint.slice();return u[0]=r,u[2]=140|n,xb(u),u[3]=u[15]=t,u[8]=e,u[10]=o||t&&t[10],u[11]=s||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=a,u[16]=2==i.type?t[16]:u,u}function Ks(t,i,e,n,r){let a=t.data[i];if(null===a)a=fg(t,i,e,n,r),function Px(){return xt.lFrame.inI18n}()&&(a.flags|=64);else if(64&a.type){a.type=e,a.value=n,a.attrs=r;const o=dc();a.injectorIndex=null===o?-1:o.injectorIndex}return Ea(a,!0),a}function fg(t,i,e,n,r){const a=kb(),o=pp(),l=t.data[i]=function cA(t,i,e,n,r,a){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,e,i,n,r);return null===t.firstChild&&(t.firstChild=l),null!==a&&(o?null==a.child&&null!==l.parent&&(a.child=l):null===a.next&&(a.next=l)),l}function Zs(t,i,e,n){if(0===e)return-1;const r=i.length;for(let a=0;a<e;a++)i.push(n),t.blueprint.push(n),t.data.push(null);return r}function Pc(t,i,e){hd(i);try{const n=t.viewQuery;null!==n&&Cg(1,n,e);const r=t.template;null!==r&&h_(t,i,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&d_(t,i),t.staticViewQueries&&Cg(2,t.viewQuery,e);const a=t.components;null!==a&&function oA(t,i){for(let e=0;e<i.length;e++)xA(t,i[e])}(i,a)}catch(n){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),n}finally{i[2]&=-5,fd()}}function Js(t,i,e,n){const r=i[2];if(256==(256&r))return;hd(i);const a=ud();try{xb(i),function Ab(t){return xt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&h_(t,i,e,2,n);const o=3==(3&r);if(!a)if(o){const c=t.preOrderCheckHooks;null!==c&&gd(i,c,null)}else{const c=t.preOrderHooks;null!==c&&md(i,c,0,null),_p(i,0)}if(function DA(t){for(let i=Wp(t);null!==i;i=qp(i)){if(!i[2])continue;const e=i[9];for(let n=0;n<e.length;n++){const r=e[n],a=r[3];0==(1024&r[2])&&fp(a,1),r[2]|=1024}}}(i),function TA(t){for(let i=Wp(t);null!==i;i=qp(i))for(let e=10;e<i.length;e++){const n=i[e],r=n[1];hp(n)&&Js(r,n,r.template,n[8])}}(i),null!==t.contentQueries&&d_(t,i),!a)if(o){const c=t.contentCheckHooks;null!==c&&gd(i,c)}else{const c=t.contentHooks;null!==c&&md(i,c,1),_p(i,1)}!function rA(t,i){const e=t.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)Mo(~r);else{const a=r,o=e[++n],s=e[++n];Ex(o,a),s(2,i[a])}}}finally{Mo(-1)}}(t,i);const s=t.components;null!==s&&function aA(t,i){for(let e=0;e<i.length;e++)RA(t,i[e])}(i,s);const l=t.viewQuery;if(null!==l&&Cg(2,l,n),!a)if(o){const c=t.viewCheckHooks;null!==c&&gd(i,c)}else{const c=t.viewHooks;null!==c&&md(i,c,2),_p(i,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,fp(i[3],-1))}finally{fd()}}function sA(t,i,e,n){const r=i[10],a=!ud(),o=Rb(i);try{a&&!o&&r.begin&&r.begin(),o&&Pc(t,i,n),Js(t,i,e,n)}finally{a&&!o&&r.end&&r.end()}}function h_(t,i,e,n,r){const a=or(),o=2&n;try{Mo(-1),o&&i.length>20&&e_(t,i,20,ud()),e(n,r)}finally{Mo(a)}}function pg(t,i,e){!Mb()||(function mA(t,i,e,n){const r=e.directiveStart,a=e.directiveEnd;t.firstCreatePass||pc(e,i),Qi(n,i);const o=e.initialInputs;for(let s=r;s<a;s++){const l=t.data[s],c=fa(l);c&&wA(i,e,l);const u=gc(i,t,s,e);Qi(u,i),null!==o&&CA(0,s-r,u,l,0,o),c&&(Ar(e.index,i)[8]=u)}}(t,i,e,Yr(e,i)),128==(128&e.flags)&&function vA(t,i,e){const n=e.directiveStart,r=e.directiveEnd,o=e.index,s=function Ix(){return xt.lFrame.currentDirectiveIndex}();try{Mo(o);for(let l=n;l<r;l++){const c=t.data[l],u=i[l];mp(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&w_(c,u)}}finally{Mo(-1),mp(s)}}(t,i,e))}function gg(t,i,e=Yr){const n=i.localNames;if(null!==n){let r=i.index+1;for(let a=0;a<n.length;a+=2){const o=n[a+1],s=-1===o?e(i,t):t[o];t[r++]=s}}}function p_(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=Nd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):i}function Nd(t,i,e,n,r,a,o,s,l,c){const u=20+n,d=u+r,m=function lA(t,i){const e=[];for(let n=0;n<i;n++)e.push(n<t?null:Ot);return e}(u,d),v="function"==typeof c?c():c;return m[1]={type:t,blueprint:m,template:e,queries:null,viewQuery:s,declTNode:i,data:m.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1}}function v_(t,i,e,n){const r=x_(i);null===e?r.push(n):(r.push(e),t.firstCreatePass&&M_(t).push(n,r.length-1))}function b_(t,i,e){for(let n in t)if(t.hasOwnProperty(n)){const r=t[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(i,r):e[n]=[i,r]}return e}function Vr(t,i,e,n,r,a,o,s){const l=Yr(i,e);let u,c=i.inputs;!s&&null!=c&&(u=c[n])?(P_(t,e,u,n,r),sd(i)&&function hA(t,i){const e=Ar(i,t);16&e[2]||(e[2]|=64)}(e,i.index)):3&i.type&&(n=function dA(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n),r=null!=o?o(r,i.value||"",n):r,ui(a)?a.setProperty(l,n,r):wp(n)||(l.setProperty?l.setProperty(n,r):l[n]=r))}function mg(t,i,e,n){let r=!1;if(Mb()){const a=function bA(t,i,e){const n=t.directiveRegistry;let r=null;if(n)for(let a=0;a<n.length;a++){const o=n[a];Z1(e,o.selectors,!1)&&(r||(r=[]),wd(pc(e,i),t,o.type),fa(o)?(C_(t,e),r.unshift(o)):r.push(o))}return r}(t,i,e),o=null===n?null:{"":-1};if(null!==a){r=!0,S_(e,t.data.length,a.length);for(let u=0;u<a.length;u++){const d=a[u];d.providersResolver&&d.providersResolver(d)}let s=!1,l=!1,c=Zs(t,i,a.length,null);for(let u=0;u<a.length;u++){const d=a[u];e.mergedAttrs=bd(e.mergedAttrs,d.hostAttrs),T_(t,e,i,c,d),yA(c,d,o),null!==d.contentQueries&&(e.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=128);const m=d.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),s=!0),!l&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function uA(t,i){const n=i.directiveEnd,r=t.data,a=i.attrs,o=[];let s=null,l=null;for(let c=i.directiveStart;c<n;c++){const u=r[c],d=u.inputs,m=null===a||K1(i)?null:SA(d,a);o.push(m),s=b_(d,c,s),l=b_(u.outputs,c,l)}null!==s&&(s.hasOwnProperty("class")&&(i.flags|=16),s.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=o,i.inputs=s,i.outputs=l}(t,e)}o&&function _A(t,i,e){if(i){const n=t.localNames=[];for(let r=0;r<i.length;r+=2){const a=e[i[r+1]];if(null==a)throw new un(-301,!1);n.push(i[r],a)}}}(e,n,o)}return e.mergedAttrs=bd(e.mergedAttrs,e.attrs),r}function y_(t,i,e,n,r,a){const o=a.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const l=~i.index;(function gA(t){let i=t.length;for(;i>0;){const e=t[--i];if("number"==typeof e&&e<0)return e}return 0})(s)!=l&&s.push(l),s.push(n,r,o)}}function w_(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function C_(t,i){i.flags|=2,(t.components||(t.components=[])).push(i.index)}function yA(t,i,e){if(e){if(i.exportAs)for(let n=0;n<i.exportAs.length;n++)e[i.exportAs[n]]=t;fa(i)&&(e[""]=t)}}function S_(t,i,e){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+e,t.providerIndexes=i}function T_(t,i,e,n,r){t.data[n]=r;const a=r.factory||(r.factory=Jo(r.type)),o=new hc(a,fa(r),null);t.blueprint[n]=o,e[n]=o,y_(t,i,0,n,Zs(t,e,r.hostVars,Ot),r)}function wA(t,i,e){const n=Yr(i,t),r=p_(e),a=t[10],o=Fd(t,Ac(t,r,null,e.onPush?64:16,n,i,a,a.createRenderer(n,e),null,null));t[i.index]=o}function vg(t,i,e,n,r,a,o){if(null==a)ui(t)?t.removeAttribute(i,r,e):i.removeAttribute(r);else{const s=null==o?Vt(a):o(a,n||"",r);ui(t)?t.setAttribute(i,r,s,e):e?i.setAttributeNS(e,r,s):i.setAttribute(r,s)}}function CA(t,i,e,n,r,a){const o=a[i];if(null!==o){const s=n.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==s?n.setInput(e,d,c,u):e[u]=d}}}function SA(t,i){let e=null,n=0;for(;n<i.length;){const r=i[n];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],i[n+1])),n+=2}else n+=2;else n+=4}return e}function D_(t,i,e,n){return new Array(t,!0,!1,i,null,0,n,e,null,null)}function RA(t,i){const e=Ar(i,t);if(hp(e)){const n=e[1];80&e[2]?Js(n,e,n.template,e[8]):e[5]>0&&bg(e)}}function bg(t){for(let n=Wp(t);null!==n;n=qp(n))for(let r=10;r<n.length;r++){const a=n[r];if(1024&a[2]){const o=a[1];Js(o,a,o.template,a[8])}else a[5]>0&&bg(a)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Ar(e[n],t);hp(r)&&r[5]>0&&bg(r)}}function xA(t,i){const e=Ar(i,t),n=e[1];(function MA(t,i){for(let e=i.length;e<t.blueprint.length;e++)i.push(t.blueprint[e])})(n,e),Pc(n,e,e[8])}function Fd(t,i){return t[13]?t[14][4]=i:t[13]=i,t[14]=i,i}function _g(t){for(;t;){t[2]|=64;const i=Mc(t);if(cx(t)&&!i)return t;t=i}return null}function wg(t,i,e){const n=i[10];n.begin&&n.begin();try{Js(t,i,t.template,e)}catch(r){throw A_(i,r),r}finally{n.end&&n.end()}}function R_(t){!function yg(t){for(let i=0;i<t.components.length;i++){const e=t.components[i],n=Hp(e),r=n[1];sA(r,n,r.template,e)}}(t[8])}function Cg(t,i,e){bp(0),i(t,e)}const EA=(()=>Promise.resolve(null))();function x_(t){return t[7]||(t[7]=[])}function M_(t){return t.cleanup||(t.cleanup=[])}function A_(t,i){const e=t[9],n=e?e.get(Xs,null):null;n&&n.handleError(i)}function P_(t,i,e,n,r){for(let a=0;a<e.length;){const o=e[a++],s=e[a++],l=i[o],c=t.data[o];null!==c.setInput?c.setInput(l,r,n,s):l[s]=r}}function so(t,i,e){const n=cd(i,t);V1(t[11],n,e)}function Bd(t,i,e){let n=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==i)for(let o=0;o<i.length;o++){const s=i[o];"number"==typeof s?a=s:1==a?r=Yf(r,s):2==a&&(n=Yf(n,s+": "+i[++o]+";"))}e?t.styles=n:t.stylesWithoutHost=n,e?t.classes=r:t.classesWithoutHost=r}const Sg=new qt("INJECTOR",-1);class E_{get(i,e=_c){if(e===_c){const n=new Error(`NullInjectorError: No provider for ${Dn(i)}!`);throw n.name="NullInjectorError",n}return e}}const Tg=new qt("Set Injector scope."),Ec={},OA={};let Dg;function I_(){return void 0===Dg&&(Dg=new E_),Dg}function V_(t,i=null,e=null,n){const r=O_(t,i,e,n);return r._resolveInjectorDefTypes(),r}function O_(t,i=null,e=null,n){return new NA(t,e,i||I_(),n)}class NA{constructor(i,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];e&&Ia(e,s=>this.processProvider(s,i,e)),Ia([i],s=>this.processInjectorType(s,[],a)),this.records.set(Sg,el(void 0,this));const o=this.records.get(Tg);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof i?null:Dn(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,e=_c,n=Ft.Default){this.assertNotDestroyed();const r=i1(this),a=To(void 0);try{if(!(n&Ft.SkipSelf)){let s=this.records.get(i);if(void 0===s){const l=function jA(t){return"function"==typeof t||"object"==typeof t&&t instanceof qt}(i)&&Kf(i);s=l&&this.injectableDefInScope(l)?el(Rg(i),Ec):null,this.records.set(i,s)}if(null!=s)return this.hydrate(i,s)}return(n&Ft.Self?I_():this.parent).get(i,e=n&Ft.Optional&&e===_c?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Dd]=o[Dd]||[]).unshift(Dn(i)),r)throw o;return function vM(t,i,e,n){const r=t[Dd];throw i[n1]&&r.unshift(i[n1]),t.message=function bM(t,i,e,n=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=Dn(i);if(Array.isArray(i))r=i.map(Dn).join(" -> ");else if("object"==typeof i){let a=[];for(let o in i)if(i.hasOwnProperty(o)){let s=i[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):Dn(s)))}r=`{${a.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${t.replace(hM,"\n  ")}`}("\n"+t.message,r,e,n),t.ngTokenPath=r,t[Dd]=null,t}(o,i,"R3InjectorError",this.source)}throw o}finally{To(a),i1(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((n,r)=>i.push(Dn(r))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new un(205,!1)}processInjectorType(i,e,n){if(!(i=Ht(i)))return!1;let r=fb(i);const a=null==r&&i.ngModule||void 0,o=void 0===a?i:a,s=-1!==n.indexOf(o);if(void 0!==a&&(r=fb(a)),null==r)return!1;if(null!=r.imports&&!s){let u;n.push(o);try{Ia(r.imports,d=>{this.processInjectorType(d,e,n)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:m,providers:v}=u[d];Ia(v,b=>this.processProvider(b,m,v||En))}}this.injectorDefTypes.add(o);const l=Jo(o)||(()=>new o);this.records.set(o,el(l,Ec));const c=r.providers;if(null!=c&&!s){const u=i;Ia(c,d=>this.processProvider(d,u,c))}return void 0!==a&&void 0!==i.providers}processProvider(i,e,n){let r=tl(i=Ht(i))?i:Ht(i&&i.provide);const a=function BA(t,i,e){return F_(t)?el(void 0,t.useValue):el(N_(t),Ec)}(i);if(tl(i)||!0!==i.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=el(void 0,Ec,!0),o.factory=()=>Pp(o.multi),this.records.set(r,o)),r=i,o.multi.push(i)}this.records.set(r,a)}hydrate(i,e){return e.value===Ec&&(e.value=OA,e.value=e.factory()),"object"==typeof e.value&&e.value&&function zA(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(i){if(!i.providedIn)return!1;const e=Ht(i.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Rg(t){const i=Kf(t),e=null!==i?i.factory:Jo(t);if(null!==e)return e;if(t instanceof qt)throw new un(204,!1);if(t instanceof Function)return function FA(t){const i=t.length;if(i>0)throw bc(i,"?"),new un(204,!1);const e=function Q2(t){const i=t&&(t[nd]||t[pb]);if(i){const e=function K2(t){if(t.hasOwnProperty("name"))return t.name;const i=(""+t).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),i}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new un(204,!1)}function N_(t,i,e){let n;if(tl(t)){const r=Ht(t);return Jo(r)||Rg(r)}if(F_(t))n=()=>Ht(t.useValue);else if(function UA(t){return!(!t||!t.useFactory)}(t))n=()=>t.useFactory(...Pp(t.deps||[]));else if(function LA(t){return!(!t||!t.useExisting)}(t))n=()=>Le(Ht(t.useExisting));else{const r=Ht(t&&(t.useClass||t.provide));if(!function GA(t){return!!t.deps}(t))return Jo(r)||Rg(r);n=()=>new r(...Pp(t.deps))}return n}function el(t,i,e=!1){return{factory:t,value:i,multi:e?[]:void 0}}function F_(t){return null!==t&&"object"==typeof t&&pM in t}function tl(t){return"function"==typeof t}let vi=(()=>{class t{static create(e,n){var r;if(Array.isArray(e))return V_({name:""},n,e,"");{const a=null!==(r=e.name)&&void 0!==r?r:"";return V_({name:a},e.parent,e.providers,a)}}}return t.THROW_IF_NOT_FOUND=_c,t.NULL=new E_,t.\u0275prov=rt({token:t,providedIn:"any",factory:()=>Le(Sg)}),t.__NG_ELEMENT_ID__=-1,t})();function ZA(t,i){pd(Hp(t)[1],ki())}function Sn(t){let i=function Y_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const n=[t];for(;i;){let r;if(fa(t))r=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new un(903,"");r=i.\u0275dir}if(r){if(e){n.push(r);const o=t;o.inputs=kg(t.inputs),o.declaredInputs=kg(t.declaredInputs),o.outputs=kg(t.outputs);const s=r.hostBindings;s&&nP(t,s);const l=r.viewQuery,c=r.contentQueries;if(l&&eP(t,l),c&&tP(t,c),Xf(t.inputs,r.inputs),Xf(t.declaredInputs,r.declaredInputs),Xf(t.outputs,r.outputs),fa(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let o=0;o<a.length;o++){const s=a[o];s&&s.ngInherit&&s(t),s===Sn&&(e=!1)}}i=Object.getPrototypeOf(i)}!function JA(t){let i=0,e=null;for(let n=t.length-1;n>=0;n--){const r=t[n];r.hostVars=i+=r.hostVars,r.hostAttrs=bd(r.hostAttrs,e=bd(e,r.hostAttrs))}}(n)}function kg(t){return t===As?{}:t===En?[]:t}function eP(t,i){const e=t.viewQuery;t.viewQuery=e?(n,r)=>{i(n,r),e(n,r)}:i}function tP(t,i){const e=t.contentQueries;t.contentQueries=e?(n,r,a)=>{i(n,r,a),e(n,r,a)}:i}function nP(t,i){const e=t.hostBindings;t.hostBindings=e?(n,r)=>{i(n,r),e(n,r)}:i}let Ld=null;function nl(){if(!Ld){const t=Mn.Symbol;if(t&&t.iterator)Ld=t.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<i.length;++e){const n=i[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ld=n)}}}return Ld}function Ic(t){return!!Ag(t)&&(Array.isArray(t)||!(t instanceof Map)&&nl()in t)}function Ag(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function La(t,i,e){return t[i]=e}function Vc(t,i){return t[i]}function Ki(t,i,e){return!Object.is(t[i],e)&&(t[i]=e,!0)}function is(t,i,e,n){const r=Ki(t,i,e);return Ki(t,i+1,n)||r}function Ud(t,i,e,n,r){const a=is(t,i,e,n);return Ki(t,i+2,r)||a}function Kr(t,i,e,n,r,a){const o=is(t,i,e,n);return is(t,i+2,r,a)||o}function xn(t,i,e,n){const r=Me();return Ki(r,Ns(),i)&&(dn(),function Ba(t,i,e,n,r,a){const o=Yr(t,i);vg(i[11],o,a,t.value,e,n,r)}(di(),r,t,i,e,n)),xn}function rl(t,i,e,n){return Ki(t,Ns(),e)?i+Vt(e)+n:Ot}function sl(t,i,e,n,r,a,o,s,l,c){const d=Kr(t,io(),e,r,o,l);return ro(4),d?i+Vt(e)+n+Vt(r)+a+Vt(o)+s+Vt(l)+c:Ot}function x(t,i,e,n,r,a,o,s){const l=Me(),c=dn(),u=t+20,d=c.firstCreatePass?function cP(t,i,e,n,r,a,o,s,l){const c=i.consts,u=Ks(i,t,4,o||null,xo(c,s));mg(i,e,u,xo(c,l)),pd(i,u);const d=u.tViews=Nd(2,u,n,r,a,i.directiveRegistry,i.pipeRegistry,null,i.schemas,c);return null!==i.queries&&(i.queries.template(i,u),d.queries=i.queries.embeddedTView(u)),u}(u,c,l,i,e,n,r,a,o):c.data[u];Ea(d,!1);const m=l[11].createComment("");Pd(c,l,m,d),Qi(m,l),Fd(l,l[u]=D_(m,l,m,d)),ld(d)&&pg(c,l,d),null!=o&&gg(l,d,s)}function st(t){return Os(function Ax(){return xt.lFrame.contextLView}(),20+t)}function P(t,i=Ft.Default){const e=Me();return null===e?Le(t,i):Wb(ki(),e,Ht(t),i)}function Og(){throw new Error("invalid")}function _(t,i,e){const n=Me();return Ki(n,Ns(),i)&&Vr(dn(),di(),n,t,i,n[11],e,!1),_}function Ng(t,i,e,n,r){const o=r?"class":"style";P_(t,e,i.inputs[o],o,n)}function f(t,i,e,n){const r=Me(),a=dn(),o=20+t,s=r[11],l=r[o]=Yp(s,i,function Hx(){return xt.lFrame.currentNamespace}()),c=a.firstCreatePass?function AP(t,i,e,n,r,a,o){const s=i.consts,c=Ks(i,t,2,r,xo(s,a));return mg(i,e,c,xo(s,o)),null!==c.attrs&&Bd(c,c.attrs,!1),null!==c.mergedAttrs&&Bd(c,c.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,c),c}(o,a,r,0,i,e,n):a.data[o];Ea(c,!0);const u=c.mergedAttrs;null!==u&&vd(s,l,u);const d=c.classes;null!==d&&tg(s,l,d);const m=c.styles;return null!==m&&X1(s,l,m),64!=(64&c.flags)&&Pd(a,r,l,c),0===function Dx(){return xt.lFrame.elementDepthCount}()&&Qi(l,r),function Rx(){xt.lFrame.elementDepthCount++}(),ld(c)&&(pg(a,r,c),function f_(t,i,e){if(rp(i)){const r=i.directiveEnd;for(let a=i.directiveStart;a<r;a++){const o=t.data[a];o.contentQueries&&o.contentQueries(1,e[a],a)}}}(a,c,r)),null!==n&&gg(r,c),f}function h(){let t=ki();pp()?gp():(t=t.parent,Ea(t,!1));const i=t;!function xx(){xt.lFrame.elementDepthCount--}();const e=dn();return e.firstCreatePass&&(pd(e,t),rp(t)&&e.queries.elementEnd(t)),null!=i.classesWithoutHost&&function Wx(t){return 0!=(16&t.flags)}(i)&&Ng(e,i,Me(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function qx(t){return 0!=(32&t.flags)}(i)&&Ng(e,i,Me(),i.stylesWithoutHost,!1),h}function D(t,i,e,n){return f(t,i,e,n),h(),D}function fe(){return Me()}function Oc(t){return!!t&&"function"==typeof t.then}const Lg=function my(t){return!!t&&"function"==typeof t.subscribe};function V(t,i,e,n){const r=Me(),a=dn(),o=ki();return function by(t,i,e,n,r,a,o,s){const l=ld(n),u=t.firstCreatePass&&M_(t),d=i[8],m=x_(i);let v=!0;if(3&n.type||s){const T=Yr(n,i),k=s?s(T):T,C=m.length,R=s?Y=>s(Ci(Y[n.index])):n.index;if(ui(e)){let Y=null;if(!s&&l&&(Y=function EP(t,i,e,n){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const o=r[a];if(o===e&&r[a+1]===n){const s=i[7],l=r[a+2];return s.length>l?s[l]:null}"string"==typeof o&&(a+=2)}return null}(t,i,r,n.index)),null!==Y)(Y.__ngLastListenerFn__||Y).__ngNextListenerFn__=a,Y.__ngLastListenerFn__=a,v=!1;else{a=Ug(n,i,d,a,!1);const Q=e.listen(k,r,a);m.push(a,Q),u&&u.push(r,R,C,C+1)}}else a=Ug(n,i,d,a,!0),k.addEventListener(r,a,o),m.push(a),u&&u.push(r,R,C,o)}else a=Ug(n,i,d,a,!1);const b=n.outputs;let y;if(v&&null!==b&&(y=b[r])){const T=y.length;if(T)for(let k=0;k<T;k+=2){const ee=i[y[k]][y[k+1]].subscribe(a),me=m.length;m.push(a,ee),u&&u.push(r,n.index,me,-(me+1))}}}(a,r,r[11],o,t,i,!!e,n),V}function _y(t,i,e,n){try{return!1!==e(n)}catch(r){return A_(t,r),!1}}function Ug(t,i,e,n,r){return function a(o){if(o===Function)return n;const s=2&t.flags?Ar(t.index,i):i;0==(32&i[2])&&_g(s);let l=_y(i,0,n,o),c=a.__ngNextListenerFn__;for(;c;)l=_y(i,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function w(t=1){return function Ox(t){return(xt.lFrame.contextLView=function Nx(t,i){for(;t>0;)i=i[15],t--;return i}(t,xt.lFrame.contextLView))[8]}(t)}function IP(t,i){let e=null;const n=function Hk(t){const i=t.attrs;if(null!=i){const e=i.indexOf(5);if(0==(1&e))return i[e+1]}return null}(t);for(let r=0;r<i.length;r++){const a=i[r];if("*"!==a){if(null===n?Z1(t,a,!0):jk(n,a))return r}else e=r}return e}function Gd(t){const i=Me()[16][6];if(!i.projection){const n=i.projection=bc(t?t.length:1,null),r=n.slice();let a=i.child;for(;null!==a;){const o=t?IP(a,t):0;null!==o&&(r[o]?r[o].projectionNext=a:n[o]=a,r[o]=a),a=a.next}}}function zd(t,i=0,e){const n=Me(),r=dn(),a=Ks(r,20+t,16,null,e||null);null===a.projection&&(a.projection=i),gp(),64!=(64&a.flags)&&function Vk(t,i,e){q1(i[11],0,i,e,F1(t,e,i),H1(e.parent||i[6],e,i))}(r,n,a)}function Zi(t,i,e){return jd(t,"",i,"",e),Zi}function jd(t,i,e,n,r){const a=Me(),o=rl(a,i,e,n);return o!==Ot&&Vr(dn(),di(),a,t,o,a[11],r,!1),jd}function My(t,i,e,n,r){const a=t[e+1],o=null===i;let s=n?ga(a):oo(a),l=!1;for(;0!==s&&(!1===l||o);){const u=t[s+1];NP(t[s],i)&&(l=!0,t[s+1]=n?rg(u):ng(u)),s=n?ga(u):oo(u)}l&&(t[e+1]=n?ng(a):rg(a))}function NP(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&js(t,i)>=0}const Pi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ky(t){return t.substring(Pi.key,Pi.keyEnd)}function Ay(t,i){const e=Pi.textEnd;return e===i?-1:(i=Pi.keyEnd=function UP(t,i,e){for(;i<e&&t.charCodeAt(i)>32;)i++;return i}(t,Pi.key=i,e),fl(t,i,e))}function fl(t,i,e){for(;i<e&&t.charCodeAt(i)<=32;)i++;return i}function Nc(t,i,e){return va(t,i,e,!1),Nc}function St(t,i){return va(t,i,null,!0),St}function Eo(t){ba(Pr,Ha,t,!0)}function Ha(t,i){for(let e=function BP(t){return function Ey(t){Pi.key=0,Pi.keyEnd=0,Pi.value=0,Pi.valueEnd=0,Pi.textEnd=t.length}(t),Ay(t,fl(t,0,Pi.textEnd))}(i);e>=0;e=Ay(i,e))Pr(t,ky(i),!0)}function va(t,i,e,n){const r=Me(),a=dn(),o=ro(2);a.firstUpdatePass&&Ny(a,t,o,n),i!==Ot&&Ki(r,o,i)&&By(a,a.data[or()],r,r[11],t,r[o+1]=function QP(t,i){return null==t||("string"==typeof i?t+=i:"object"==typeof t&&(t=Dn(Er(t)))),t}(i,e),n,o)}function ba(t,i,e,n){const r=dn(),a=ro(2);r.firstUpdatePass&&Ny(r,null,a,n);const o=Me();if(e!==Ot&&Ki(o,a,e)){const s=r.data[or()];if(Uy(s,n)&&!Oy(r,a)){let l=n?s.classesWithoutHost:s.stylesWithoutHost;null!==l&&(e=Yf(l,e||"")),Ng(r,s,o,e,n)}else!function YP(t,i,e,n,r,a,o,s){r===Ot&&(r=En);let l=0,c=0,u=0<r.length?r[0]:null,d=0<a.length?a[0]:null;for(;null!==u||null!==d;){const m=l<r.length?r[l+1]:void 0,v=c<a.length?a[c+1]:void 0;let y,b=null;u===d?(l+=2,c+=2,m!==v&&(b=d,y=v)):null===d||null!==u&&u<d?(l+=2,b=u):(c+=2,b=d,y=v),null!==b&&By(t,i,e,n,b,y,o,s),u=l<r.length?r[l]:null,d=c<a.length?a[c]:null}}(r,s,o,o[11],o[a+1],o[a+1]=function XP(t,i,e){if(null==e||""===e)return En;const n=[],r=Er(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(n,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(n,a,r[a]);else"string"==typeof r&&i(n,r);return n}(t,i,e),n,a)}}function Oy(t,i){return i>=t.expandoStartIndex}function Ny(t,i,e,n){const r=t.data;if(null===r[e+1]){const a=r[or()],o=Oy(t,e);Uy(a,n)&&null===i&&!o&&(i=!1),i=function jP(t,i,e,n){const r=function vp(t){const i=xt.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}(t);let a=n?i.residualClasses:i.residualStyles;if(null===r)0===(n?i.classBindings:i.styleBindings)&&(e=Fc(e=Hg(null,t,i,e,n),i.attrs,n),a=null);else{const o=i.directiveStylingLast;if(-1===o||t[o]!==r)if(e=Hg(r,t,i,e,n),null===a){let l=function $P(t,i,e){const n=e?i.classBindings:i.styleBindings;if(0!==oo(n))return t[ga(n)]}(t,i,n);void 0!==l&&Array.isArray(l)&&(l=Hg(null,t,i,l[1],n),l=Fc(l,i.attrs,n),function WP(t,i,e,n){t[ga(e?i.classBindings:i.styleBindings)]=n}(t,i,n,l))}else a=function qP(t,i,e){let n;const r=i.directiveEnd;for(let a=1+i.directiveStylingLast;a<r;a++)n=Fc(n,t[a].hostAttrs,e);return Fc(n,i.attrs,e)}(t,i,n)}return void 0!==a&&(n?i.residualClasses=a:i.residualStyles=a),e}(r,a,i,n),function VP(t,i,e,n,r,a){let o=a?i.classBindings:i.styleBindings,s=ga(o),l=oo(o);t[n]=e;let u,c=!1;if(Array.isArray(e)){const d=e;u=d[1],(null===u||js(d,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const m=ga(t[s+1]);t[n+1]=Id(m,s),0!==m&&(t[m+1]=ig(t[m+1],n)),t[s+1]=function Xk(t,i){return 131071&t|i<<17}(t[s+1],n)}else t[n+1]=Id(s,0),0!==s&&(t[s+1]=ig(t[s+1],n)),s=n;else t[n+1]=Id(l,0),0===s?s=n:t[l+1]=ig(t[l+1],n),l=n;c&&(t[n+1]=ng(t[n+1])),My(t,u,n,!0),My(t,u,n,!1),function OP(t,i,e,n,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof i&&js(a,i)>=0&&(e[n+1]=rg(e[n+1]))}(i,u,t,n,a),o=Id(s,l),a?i.classBindings=o:i.styleBindings=o}(r,a,i,e,o,n)}}function Hg(t,i,e,n,r){let a=null;const o=e.directiveEnd;let s=e.directiveStylingLast;for(-1===s?s=e.directiveStart:s++;s<o&&(a=i[s],n=Fc(n,a.hostAttrs,r),a!==t);)s++;return null!==t&&(e.directiveStylingLast=s),n}function Fc(t,i,e){const n=e?1:2;let r=-1;if(null!==i)for(let a=0;a<i.length;a++){const o=i[a];"number"==typeof o?r=o:r===n&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Pr(t,o,!!e||i[++a]))}return void 0===t?null:t}function By(t,i,e,n,r,a,o,s){if(!(3&i.type))return;const l=t.data,c=l[s+1];$d(function i_(t){return 1==(1&t)}(c)?Ly(l,i,e,r,oo(c),o):void 0)||($d(a)||function n_(t){return 2==(2&t)}(c)&&(a=Ly(l,null,e,r,s,o)),function Nk(t,i,e,n,r){const a=ui(t);if(i)r?a?t.addClass(e,n):e.classList.add(n):a?t.removeClass(e,n):e.classList.remove(n);else{let o=-1===n.indexOf("-")?void 0:Ir.DashCase;if(null==r)a?t.removeStyle(e,n,o):e.style.removeProperty(n);else{const s="string"==typeof r&&r.endsWith("!important");s&&(r=r.slice(0,-10),o|=Ir.Important),a?t.setStyle(e,n,r,o):e.style.setProperty(n,r,s?"important":"")}}}(n,o,cd(or(),e),r,a))}function Ly(t,i,e,n,r,a){const o=null===i;let s;for(;r>0;){const l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let m=e[r+1];m===Ot&&(m=d?En:void 0);let v=d?Mp(m,n):u===n?m:void 0;if(c&&!$d(v)&&(v=Mp(l,n)),$d(v)&&(s=v,o))return s;const b=t[r+1];r=o?ga(b):oo(b)}if(null!==i){let l=a?i.residualClasses:i.residualStyles;null!=l&&(s=Mp(l,n))}return s}function $d(t){return void 0!==t}function Uy(t,i){return 0!=(t.flags&(i?16:32))}function g(t,i=""){const e=Me(),n=dn(),r=t+20,a=n.firstCreatePass?Ks(n,r,1,i,null):n.data[r],o=e[r]=Xp(e[11],i);Pd(n,e,o,a),Ea(a,!1)}function at(t){return K("",t,""),at}function K(t,i,e){const n=Me(),r=rl(n,t,i,e);return r!==Ot&&so(n,or(),r),K}function ii(t,i,e,n,r){const a=Me(),o=function al(t,i,e,n,r,a){const s=is(t,io(),e,r);return ro(2),s?i+Vt(e)+n+Vt(r)+a:Ot}(a,t,i,e,n,r);return o!==Ot&&so(a,or(),o),ii}function Gg(t,i,e,n,r,a,o){const s=Me(),l=function ol(t,i,e,n,r,a,o,s){const c=Ud(t,io(),e,r,o);return ro(3),c?i+Vt(e)+n+Vt(r)+a+Vt(o)+s:Ot}(s,t,i,e,n,r,a,o);return l!==Ot&&so(s,or(),l),Gg}function zg(t,i,e,n,r,a,o,s,l){const c=Me(),u=sl(c,t,i,e,n,r,a,o,s,l);return u!==Ot&&so(c,or(),u),zg}function jg(t,i,e){ba(Pr,Ha,rl(Me(),t,i,e),!0)}function Io(t,i,e){const n=Me();return Ki(n,Ns(),i)&&Vr(dn(),di(),n,t,i,n[11],e,!0),Io}const rs=void 0;var pE=["en",[["a","p"],["AM","PM"],rs],[["AM","PM"],rs,rs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rs,"{1} 'at' {0}",rs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fE(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let pl={};function lr(t){const i=function gE(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=rw(i);if(e)return e;const n=i.split("-")[0];if(e=rw(n),e)return e;if("en"===n)return pE;throw new Error(`Missing locale data for the locale "${t}".`)}function iw(t){return lr(t)[Ye.PluralCase]}function rw(t){return t in pl||(pl[t]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[t]),pl[t]}var Ye=(()=>((Ye=Ye||{})[Ye.LocaleId=0]="LocaleId",Ye[Ye.DayPeriodsFormat=1]="DayPeriodsFormat",Ye[Ye.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ye[Ye.DaysFormat=3]="DaysFormat",Ye[Ye.DaysStandalone=4]="DaysStandalone",Ye[Ye.MonthsFormat=5]="MonthsFormat",Ye[Ye.MonthsStandalone=6]="MonthsStandalone",Ye[Ye.Eras=7]="Eras",Ye[Ye.FirstDayOfWeek=8]="FirstDayOfWeek",Ye[Ye.WeekendRange=9]="WeekendRange",Ye[Ye.DateFormat=10]="DateFormat",Ye[Ye.TimeFormat=11]="TimeFormat",Ye[Ye.DateTimeFormat=12]="DateTimeFormat",Ye[Ye.NumberSymbols=13]="NumberSymbols",Ye[Ye.NumberFormats=14]="NumberFormats",Ye[Ye.CurrencyCode=15]="CurrencyCode",Ye[Ye.CurrencySymbol=16]="CurrencySymbol",Ye[Ye.CurrencyName=17]="CurrencyName",Ye[Ye.Currencies=18]="Currencies",Ye[Ye.Directionality=19]="Directionality",Ye[Ye.PluralCase=20]="PluralCase",Ye[Ye.ExtraData=21]="ExtraData",Ye))();const mE=["zero","one","two","few","many"],Wd="en-US",qd={marker:"element"},Xd={marker:"ICU"};var hi=(()=>((hi=hi||{})[hi.SHIFT=2]="SHIFT",hi[hi.APPEND_EAGERLY=1]="APPEND_EAGERLY",hi[hi.COMMENT=2]="COMMENT",hi))();let aw=Wd;function ow(t,i,e){const n=i.insertBeforeIndex,r=Array.isArray(n)?n[0]:n;return null===r?G1(t,0,e):Ci(e[r])}function sw(t,i,e,n,r){const a=i.insertBeforeIndex;if(Array.isArray(a)){let o=n,s=null;if(3&i.type||(s=o,o=r),null!==o&&0==(2&i.flags))for(let l=1;l<a.length;l++)ns(t,o,e[a[l]],s,!1)}}function lw(t,i){if(t.push(i),t.length>1)for(let e=t.length-2;e>=0;e--){const n=t[e];cw(n)||wE(n,i)&&null===CE(n)&&SE(n,i.index)}}function cw(t){return!(64&t.type)}function wE(t,i){return cw(i)||t.index>i.index}function CE(t){const i=t.insertBeforeIndex;return Array.isArray(i)?i[0]:i}function SE(t,i){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=i:(j1(ow,sw),t.insertBeforeIndex=i)}function Bc(t,i){const e=t.data[i];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function RE(t,i,e){const n=fg(t,e,64,null,null);return lw(i,n),n}function Yd(t,i){const e=i[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function uw(t){return t>>>17}function dw(t){return(131070&t)>>>1}let Lc=0,Uc=0;function fw(t,i,e,n){const r=e[11];let o,a=null;for(let s=0;s<i.length;s++){const l=i[s];if("string"==typeof l){const c=i[++s];null===e[c]&&(e[c]=Xp(r,l))}else if("number"==typeof l)switch(1&l){case 0:const c=uw(l);let u,d;if(null===a&&(a=c,o=Ad(r,n)),c===a?(u=n,d=o):(u=null,d=Ci(e[c])),null!==d){const y=dw(l);ns(r,d,e[y],u,!1);const k=Bc(t,y);if(null!==k&&"object"==typeof k){const C=Yd(k,e);null!==C&&fw(t,k.create[C],e,e[k.anchorIdx])}}break;case 1:const v=i[++s],b=i[++s];vg(r,cd(l>>>1,e),null,null,v,b,null)}else switch(l){case Xd:const c=i[++s],u=i[++s];null===e[u]&&Qi(e[u]=Sk(r,c),e);break;case qd:const d=i[++s],m=i[++s];null===e[m]&&Qi(e[m]=Yp(r,d,null),e)}}}function pw(t,i,e,n,r){for(let a=0;a<e.length;a++){const o=e[a],s=e[++a];if(o&r){let l="";for(let c=a+1;c<=a+s;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=Vt(i[n-u]);else{const d=u>>>2;switch(3&u){case 1:const m=e[++c],v=e[++c],b=t.data[d];"string"==typeof b?vg(i[11],i[d],null,b,m,l,v):Vr(t,b,i,m,l,i[11],v,!1);break;case 0:const y=i[d];null!==y&&V1(i[11],y,l);break;case 2:PE(t,Bc(t,d),i,l);break;case 3:gw(t,Bc(t,d),n,i)}}}}else{const l=e[a+1];if(l>0&&3==(3&l)){const u=Bc(t,l>>>2);i[u.currentCaseLViewIndex]<0&&gw(t,u,n,i)}}a+=s}}function gw(t,i,e,n){let r=n[i.currentCaseLViewIndex];if(null!==r){let a=Lc;r<0&&(r=n[i.currentCaseLViewIndex]=~r,a=-1),pw(t,n,i.update[r],e,a)}}function PE(t,i,e,n){const r=function EE(t,i){let e=t.cases.indexOf(i);if(-1===e)switch(t.type){case 1:{const n=function vE(t,i){const e=iw(i)(parseInt(t,10)),n=mE[e];return void 0!==n?n:"other"}(i,function yE(){return aw}());e=t.cases.indexOf(n),-1===e&&"other"!==n&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(i,n);if(Yd(i,e)!==r&&(mw(t,i,e),e[i.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const o=e[i.anchorIdx];o&&fw(t,i.create[r],e,o)}}function mw(t,i,e){let n=Yd(i,e);if(null!==n){const r=i.remove[n];for(let a=0;a<r.length;a++){const o=r[a];if(o>0){const s=cd(o,e);null!==s&&W1(e[11],s)}else mw(t,Bc(t,~o),e)}}}function IE(){const t=[];let e,n,i=-1;function a(s,l){i=0;const c=Yd(s,l);n=null!==c?s.remove[c]:En}function o(){if(i<n.length){const s=n[i++];return s>0?e[s]:(t.push(i,n),a(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),i=t.pop(),o())}return function r(s,l){for(e=l;t.length;)t.pop();return a(s.value,l),o}}const Qd=/\ufffd(\d+):?\d*\ufffd/gi,OE=/\ufffd(\d+)\ufffd/,bw=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,NE=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,FE=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,BE=/\uE500/g;function _w(t,i,e,n,r,a,o){const s=Zs(t,n,1,null);let l=s<<hi.SHIFT,c=dc();i===c&&(c=null),null===c&&(l|=hi.APPEND_EAGERLY),o&&(l|=hi.COMMENT,function Ck(t){void 0===jp&&(jp=t())}(IE)),r.push(l,null===a?"":a);const u=fg(t,s,o?32:1,null===a?"":a,null);lw(e,u);const d=u.index;return Ea(u,!1),null!==c&&i!==c&&function DE(t,i){let e=t.insertBeforeIndex;null===e?(j1(ow,sw),e=t.insertBeforeIndex=[null,i]):(function to(t,i,e){t!=i&&jn(e,t,i,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(i))}(c,d),u}function HE(t,i,e,n,r,a,o){const s=o.match(Qd),l=_w(t,i,e,a,n,s?null:o,!1);s&&gl(r,o,l.index,null,0,null)}function gl(t,i,e,n,r,a){const o=t.length,s=o+1;t.push(null,null);const l=o+2,c=i.split(Qd);let u=0;for(let d=0;d<c.length;d++){const m=c[d];if(1&d){const v=r+parseInt(m,10);t.push(-1-v),u|=yw(v)}else""!==m&&t.push(m)}return t.push(e<<2|(n?1:0)),n&&t.push(n,a),t[o]=u,t[s]=t.length-l,u}function yw(t){return 1<<Math.min(t,31)}function ww(t){let i,a,e="",n=0,r=!1;for(;null!==(i=NE.exec(t));)r?i[0]===`\ufffd/*${a}\ufffd`&&(n=i.index,r=!1):(e+=t.substring(n,i.index+i[0].length),a=i[1],r=!0);return e+=t.substr(n),e}function Cw(t,i,e,n,r,a){let o=0;const s={type:r.type,currentCaseLViewIndex:Zs(t,i,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};(function YE(t,i,e){t.push(yw(i.mainBinding),2,-1-i.mainBinding,e<<2|2)})(e,r,a),function TE(t,i,e){const n=t.data[i];null===n?t.data[i]=e:n.value=e}(t,a,s);const l=r.values;for(let c=0;c<l.length;c++){const u=l[c],d=[];for(let m=0;m<u.length;m++){const v=u[m];if("string"!=typeof v){const b=d.push(v)-1;u[m]=`\x3c!--\ufffd${b}\ufffd--\x3e`}}o=qE(t,s,i,e,n,r.cases[c],u.join(""),d)|o}o&&function QE(t,i,e){t.push(i,1,e<<2|3)}(e,o,a)}function WE(t){const i=[],e=[];let n=1,r=0;const a=$g(t=t.replace(bw,function(o,s,l){return n="select"===l?0:1,r=parseInt(s.substr(1),10),""}));for(let o=0;o<a.length;){let s=a[o++].trim();1===n&&(s=s.replace(/\s*(?:=)?(\w+)\s*/,"$1")),s.length&&i.push(s);const l=$g(a[o++]);i.length>e.length&&e.push(l)}return{type:n,mainBinding:r,cases:i,values:e}}function $g(t){if(!t)return[];let i=0;const e=[],n=[],r=/[{}]/g;let a;for(r.lastIndex=0;a=r.exec(t);){const s=a.index;if("}"==a[0]){if(e.pop(),0==e.length){const l=t.substring(i,s);bw.test(l)?n.push(WE(l)):n.push(l),i=s+1}}else{if(0==e.length){const l=t.substring(i,s);n.push(l),i=s+1}e.push("{")}}const o=t.substring(i);return n.push(o),n}function qE(t,i,e,n,r,a,o,s){const l=[],c=[],u=[];i.cases.push(a),i.create.push(l),i.remove.push(c),i.update.push(u);const m=f1(up()).getInertBodyElement(o),v=Bp(m)||m;return v?Sw(t,i,e,n,l,c,u,v,r,s,0):0}function Sw(t,i,e,n,r,a,o,s,l,c,u){let d=0,m=s.firstChild;for(;m;){const v=Zs(t,e,1,null);switch(m.nodeType){case Node.ELEMENT_NODE:const b=m,y=b.tagName.toLowerCase();if(Op.hasOwnProperty(y)){Wg(r,qd,y,l,v),t.data[v]=y;const R=b.attributes;for(let Y=0;Y<R.length;Y++){const Q=R.item(Y),ee=Q.name.toLowerCase();Q.value.match(Qd)?b1.hasOwnProperty(ee)&&gl(o,Q.value,v,Q.name,0,Np[ee]?Tc:Fp[ee]?p1:null):KE(r,v,Q)}d=Sw(t,i,e,n,r,a,o,m,v,c,u+1)|d,Tw(a,v,u)}break;case Node.TEXT_NODE:const T=m.textContent||"",k=T.match(Qd);Wg(r,null,k?"":T,l,v),Tw(a,v,u),k&&(d=gl(o,T,v,null,0,null)|d);break;case Node.COMMENT_NODE:const C=OE.exec(m.textContent||"");if(C){const Y=c[parseInt(C[1],10)];Wg(r,Xd,"",l,v),Cw(t,e,n,l,Y,v),XE(a,v,u)}}m=m.nextSibling}return d}function Tw(t,i,e){0===e&&t.push(i)}function XE(t,i,e){0===e&&(t.push(~i),t.push(i))}function Wg(t,i,e,n,r){null!==i&&t.push(i),t.push(e,r,function xE(t,i,e){return t|i<<17|e<<1}(0,n,r))}function KE(t,i,e){t.push(i<<1|1,e.name,e.value)}function Rw(t,i,e=-1){const n=dn(),r=Me(),a=20+t,o=xo(n.consts,i),s=dc();n.firstCreatePass&&function UE(t,i,e,n,r,a){const o=dc(),s=[],l=[],c=[[]];r=function $E(t,i){if(function jE(t){return-1===t}(i))return ww(t);{const e=t.indexOf(`:${i}\ufffd`)+2+i.toString().length,n=t.search(new RegExp(`\ufffd\\/\\*\\d+:${i}\ufffd`));return ww(t.substring(e,n))}}(r,a);const u=function LE(t){return t.replace(BE," ")}(r).split(FE);for(let d=0;d<u.length;d++){let m=u[d];if(0==(1&d)){const v=$g(m);for(let b=0;b<v.length;b++){let y=v[b];if(0==(1&b)){const T=y;""!==T&&HE(t,o,c[0],s,l,e,T)}else{const T=y;if("object"!=typeof T)throw new Error(`Unable to parse ICU expression in "${r}" message.`);Cw(t,e,l,i,T,_w(t,o,c[0],e,s,"",!0).index)}}}else{const v=47===m.charCodeAt(0),y=(m.charCodeAt(v?1:0),20+Number.parseInt(m.substring(v?2:1)));if(v)c.shift(),Ea(dc(),!1);else{const T=RE(t,c[0],y);c.unshift([]),Ea(T,!0)}}}t.data[n]={create:s,update:l}}(n,null===s?0:s.index,r,a,o,e);const l=n.data[a],u=B1(n,s===r[6]?null:s,r);(function AE(t,i,e,n){const r=t[11];for(let a=0;a<i.length;a++){const o=i[a++],s=i[a],l=(o&hi.COMMENT)===hi.COMMENT,c=(o&hi.APPEND_EAGERLY)===hi.APPEND_EAGERLY,u=o>>>hi.SHIFT;let d=t[u];null===d&&(d=t[u]=l?r.createComment(s):Xp(r,s)),c&&null!==e&&ns(r,e,d,n,!1)}})(r,l.create,u,s&&8&s.type?r[s.index]:null),Pb(!0)}function lo(t,i,e){Rw(t,i,e),function xw(){Pb(!1)}()}function Kd(t){return function ME(t){t&&(Lc|=1<<Math.min(Uc,31)),Uc++}(Ki(Me(),Ns(),t)),Kd}function Xg(t,i,e,n,r){if(t=Ht(t),Array.isArray(t))for(let a=0;a<t.length;a++)Xg(t[a],i,e,n,r);else{const a=dn(),o=Me();let s=tl(t)?t:Ht(t.provide),l=N_(t);const c=ki(),u=1048575&c.providerIndexes,d=c.directiveStart,m=c.providerIndexes>>20;if(tl(t)||!t.multi){const v=new hc(l,r,P),b=Qg(s,i,r?u:u+m,d);-1===b?(wd(pc(c,o),a,s),Yg(a,t,i.length),i.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(v),o.push(v)):(e[b]=v,o[b]=v)}else{const v=Qg(s,i,u+m,d),b=Qg(s,i,u,u+m),y=v>=0&&e[v],T=b>=0&&e[b];if(r&&!T||!r&&!y){wd(pc(c,o),a,s);const k=function dI(t,i,e,n,r){const a=new hc(t,e,P);return a.multi=[],a.index=i,a.componentProviders=0,Mw(a,r,n&&!e),a}(r?uI:cI,e.length,r,n,l);!r&&T&&(e[b].providerFactory=k),Yg(a,t,i.length,0),i.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(k),o.push(k)}else Yg(a,t,v>-1?v:b,Mw(e[r?b:v],l,!r&&n));!r&&n&&T&&e[b].componentProviders++}}}function Yg(t,i,e,n){const r=tl(i),a=function HA(t){return!!t.useClass}(i);if(r||a){const l=(a?Ht(i.useClass):i).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&i.multi){const u=c.indexOf(e);-1===u?c.push(e,[n,l]):c[u+1].push(n,l)}else c.push(e,l)}}}function Mw(t,i,e){return e&&t.componentProviders++,t.multi.push(i)-1}function Qg(t,i,e,n){for(let r=e;r<n;r++)if(i[r]===t)return r;return-1}function cI(t,i,e,n){return Kg(this.multi,[])}function uI(t,i,e,n){const r=this.multi;let a;if(this.providerFactory){const o=this.providerFactory.componentProviders,s=gc(e,e[1],this.providerFactory.index,n);a=s.slice(0,o),Kg(r,a);for(let l=o;l<s.length;l++)a.push(s[l])}else a=[],Kg(r,a);return a}function Kg(t,i){for(let e=0;e<t.length;e++)i.push((0,t[e])());return i}function In(t,i=[]){return e=>{e.providersResolver=(n,r)=>function lI(t,i,e){const n=dn();if(n.firstCreatePass){const r=fa(t);Xg(e,n.data,n.blueprint,r,!0),Xg(i,n.data,n.blueprint,r,!1)}}(n,r?r(t):t,i)}}class kw{}class pI{resolveComponentFactory(i){throw function fI(t){const i=Error(`No component factory found for ${Dn(t)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=t,i}(i)}}let as=(()=>{class t{}return t.NULL=new pI,t})();function gI(){return ml(ki(),Me())}function ml(t,i){return new Tn(Yr(t,i))}let Tn=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=gI,t})();function mI(t){return t instanceof Tn?t.nativeElement:t}class Zg{}let Zr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function bI(){const t=Me(),e=Ar(ki().index,t);return function vI(t){return t[11]}(Pa(e)?e:t)}(),t})(),_I=(()=>{class t{}return t.\u0275prov=rt({token:t,providedIn:"root",factory:()=>null}),t})();class Gc{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const yI=new Gc("13.2.3"),Jg={};function Zd(t,i,e,n,r=!1){for(;null!==e;){const a=i[e.index];if(null!==a&&n.push(Ci(a)),ha(a))for(let s=10;s<a.length;s++){const l=a[s],c=l[1].firstChild;null!==c&&Zd(l[1],l,c,n)}const o=e.type;if(8&o)Zd(t,i,e.child,n);else if(32&o){const s=$p(e,i);let l;for(;l=s();)n.push(l)}else if(16&o){const s=$1(i,e);if(Array.isArray(s))n.push(...s);else{const l=Mc(i[16]);Zd(l[1],l,s,n,!0)}}e=r?e.projectionNext:e.next}return n}class zc{constructor(i,e){this._lView=i,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,e=i[1];return Zd(e,i,e.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(ha(i)){const e=i[8],n=e?e.indexOf(this):-1;n>-1&&(Qp(i,n),Sd(e,n))}this._attachedToViewContainer=!1}N1(this._lView[1],this._lView)}onDestroy(i){v_(this._lView[1],this._lView,null,i)}markForCheck(){_g(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){wg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function AA(t,i,e){dd(!0);try{wg(t,i,e)}finally{dd(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new un(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rk(t,i){kc(t,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new un(902,"");this._appRef=i}}class wI extends zc{constructor(i){super(i),this._view=i}detectChanges(){R_(this._view)}checkNoChanges(){!function PA(t){dd(!0);try{R_(t)}finally{dd(!1)}}(this._view)}get context(){return null}}class Pw extends as{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const e=qi(i);return new em(e,this.ngModule)}}function Ew(t){const i=[];for(let e in t)t.hasOwnProperty(e)&&i.push({propName:t[e],templateName:e});return i}const SI=new qt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>M1});class em extends kw{constructor(i,e){super(),this.componentDef=i,this.ngModule=e,this.componentType=i.type,this.selector=function Wk(t){return t.map($k).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ew(this.componentDef.inputs)}get outputs(){return Ew(this.componentDef.outputs)}create(i,e,n,r){const a=(r=r||this.ngModule)?function TI(t,i){return{get:(e,n,r)=>{const a=t.get(e,Jg,r);return a!==Jg||n===Jg?a:i.get(e,n,r)}}}(i,r.injector):i,o=a.get(Zg,Db),s=a.get(_I,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function m_(t,i,e){if(ui(t))return t.selectRootElement(i,e===Aa.ShadowDom);let n="string"==typeof i?t.querySelector(i):i;return n.textContent="",n}(l,n,this.componentDef.encapsulation):Yp(o.createRenderer(null,this.componentDef),c,function CI(t){const i=t.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(c)),d=this.componentDef.onPush?576:528,m=function X_(t,i){return{components:[],scheduler:t||M1,clean:EA,playerHandler:i||null,flags:0}}(),v=Nd(0,null,null,1,0,null,null,null,null,null),b=Ac(null,v,m,d,null,null,o,l,s,a);let y,T;hd(b);try{const k=function W_(t,i,e,n,r,a){const o=e[1];e[20]=t;const l=Ks(o,20,2,"#host",null),c=l.mergedAttrs=i.hostAttrs;null!==c&&(Bd(l,c,!0),null!==t&&(vd(r,t,c),null!==l.classes&&tg(r,t,l.classes),null!==l.styles&&X1(r,t,l.styles)));const u=n.createRenderer(t,i),d=Ac(e,p_(i),null,i.onPush?64:16,e[20],l,n,u,a||null,null);return o.firstCreatePass&&(wd(pc(l,e),o,i.type),C_(o,l),S_(l,e.length,1)),Fd(e,d),e[20]=d}(u,this.componentDef,b,o,l);if(u)if(n)vd(l,u,["ng-version",yI.full]);else{const{attrs:C,classes:R}=function qk(t){const i=[],e=[];let n=1,r=2;for(;n<t.length;){let a=t[n];if("string"==typeof a)2===r?""!==a&&i.push(a,t[++n]):8===r&&e.push(a);else{if(!pa(r))break;r=a}n++}return{attrs:i,classes:e}}(this.componentDef.selectors[0]);C&&vd(l,u,C),R&&R.length>0&&tg(l,u,R.join(" "))}if(T=dp(v,20),void 0!==e){const C=T.projection=[];for(let R=0;R<this.ngContentSelectors.length;R++){const Y=e[R];C.push(null!=Y?Array.from(Y):null)}}y=function q_(t,i,e,n,r){const a=e[1],o=function pA(t,i,e){const n=ki();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),T_(t,n,i,Zs(t,i,1,null),e));const r=gc(i,t,n.directiveStart,n);Qi(r,i);const a=Yr(n,i);return a&&Qi(a,i),r}(a,e,i);if(n.components.push(o),t[8]=o,r&&r.forEach(l=>l(o,i)),i.contentQueries){const l=ki();i.contentQueries(1,o,l.directiveStart)}const s=ki();return!a.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Mo(s.index),y_(e[1],s,0,s.directiveStart,s.directiveEnd,i),w_(i,o)),o}(k,this.componentDef,b,m,[ZA]),Pc(v,b,null)}finally{fd()}return new RI(this.componentType,y,ml(T,b),b,T)}}class RI extends class hI{}{constructor(i,e,n,r,a){super(),this.location=n,this._rootLView=r,this._tNode=a,this.instance=e,this.hostView=this.changeDetectorRef=new wI(r),this.componentType=i}get injector(){return new Ls(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class co{}class Iw{}const vl=new Map;class Nw extends co{constructor(i,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Pw(this);const n=Wr(i);this._bootstrapComponents=Fa(n.bootstrap),this._r3Injector=O_(i,e,[{provide:co,useValue:this},{provide:as,useValue:this.componentFactoryResolver}],Dn(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,e=vi.THROW_IF_NOT_FOUND,n=Ft.Default){return i===vi||i===co||i===Sg?this:this._r3Injector.get(i,e,n)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class tm extends Iw{constructor(i){super(),this.moduleType=i,null!==Wr(i)&&function MI(t){const i=new Set;!function e(n){const r=Wr(n,!0),a=r.id;null!==a&&(function Vw(t,i,e){if(i&&i!==e)throw new Error(`Duplicate module registered for ${t} - ${Dn(i)} vs ${Dn(i.name)}`)}(a,vl.get(a),n),vl.set(a,n));const o=Fa(r.imports);for(const s of o)i.has(s)||(i.add(s),e(s))}(t)}(i)}create(i){return new Nw(this.moduleType,i)}}function nm(t,i,e){const n=ar()+t,r=Me();return r[n]===Ot?La(r,n,e?i.call(e):i()):Vc(r,n)}function fi(t,i,e,n){return Bw(Me(),ar(),t,i,e,n)}function Vo(t,i,e,n,r){return Lw(Me(),ar(),t,i,e,n,r)}function jc(t,i){const e=t[i];return e===Ot?void 0:e}function Bw(t,i,e,n,r,a){const o=i+e;return Ki(t,o,r)?La(t,o+1,a?n.call(a,r):n(r)):jc(t,o+1)}function Lw(t,i,e,n,r,a,o){const s=i+e;return is(t,s,r,a)?La(t,s+2,o?n.call(o,r,a):n(r,a)):jc(t,s+2)}function Lt(t,i){const e=dn();let n;const r=t+20;e.firstCreatePass?(n=function VI(t,i){if(i)for(let e=i.length-1;e>=0;e--){const n=i[e];if(t===n.name)return n}}(i,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const a=n.factory||(n.factory=Jo(n.type)),o=To(P);try{const s=_d(!1),l=a();return _d(s),function uP(t,i,e,n){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),i[e]=n}(e,Me(),r,l),l}finally{To(o)}}function Jd(t,i,e){const n=t+20,r=Me(),a=Os(r,n);return Wc(r,n)?Bw(r,ar(),i,a.transform,e,a):a.transform(e)}function on(t,i,e,n){const r=t+20,a=Me(),o=Os(a,r);return Wc(a,r)?Lw(a,ar(),i,o.transform,e,n,o):o.transform(e,n)}function $c(t,i,e,n,r){const a=t+20,o=Me(),s=Os(o,a);return Wc(o,a)?function Uw(t,i,e,n,r,a,o,s){const l=i+e;return Ud(t,l,r,a,o)?La(t,l+3,s?n.call(s,r,a,o):n(r,a,o)):jc(t,l+3)}(o,ar(),i,s.transform,e,n,r,s):s.transform(e,n,r)}function Wc(t,i){return t[1].data[i].pure}function rm(t){return i=>{setTimeout(t,void 0,i)}}const ot=class FI extends be{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,e,n){var r,a,o;let s=i,l=e||(()=>null),c=n;if(i&&"object"==typeof i){const d=i;s=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(a=d.error)||void 0===a?void 0:a.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=rm(l),s&&(s=rm(s)),c&&(c=rm(c)));const u=super.subscribe({next:s,error:l,complete:c});return i instanceof he&&i.add(u),u}};function BI(){return this._results[nl()]()}class am{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=nl(),n=am.prototype;n[e]||(n[e]=BI)}get changes(){return this._changes||(this._changes=new ot)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,e){return this._results.reduce(i,e)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,e){const n=this;n.dirty=!1;const r=Qr(i);(this._changesDetected=!function iM(t,i,e){if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],a=i[n];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Kn=(()=>{class t{}return t.__NG_ELEMENT_ID__=HI,t})();const LI=Kn,UI=class extends LI{constructor(i,e,n){super(),this._declarationLView=i,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(i){const e=this._declarationTContainer.tViews,n=Ac(this._declarationLView,e,i,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(n[19]=a.createEmbeddedView(e)),Pc(e,n,i),new zc(n)}};function HI(){return eh(ki(),Me())}function eh(t,i){return 4&t.type?new UI(i,t,ml(t,i)):null}let Jr=(()=>{class t{}return t.__NG_ELEMENT_ID__=GI,t})();function GI(){return $w(ki(),Me())}const zI=Jr,zw=class extends zI{constructor(i,e,n){super(),this._lContainer=i,this._hostTNode=e,this._hostLView=n}get element(){return ml(this._hostTNode,this._hostLView)}get injector(){return new Ls(this._hostTNode,this._hostLView)}get parentInjector(){const i=yd(this._hostTNode,this._hostLView);if(Hb(i)){const e=Bs(i,this._hostLView),n=Fs(i);return new Ls(e[1].data[n+8],e)}return new Ls(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const e=jw(this._lContainer);return null!==e&&e[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,e,n){const r=i.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(i,e,n,r,a){const o=i&&!function vc(t){return"function"==typeof t}(i);let s;if(o)s=e;else{const d=e||{};s=d.index,n=d.injector,r=d.projectableNodes,a=d.ngModuleRef}const l=o?i:new em(qi(i)),c=n||this.parentInjector;if(!a&&null==l.ngModule){const m=(o?c:this.parentInjector).get(co,null);m&&(a=m)}const u=l.create(c,r,void 0,a);return this.insert(u.hostView,s),u}insert(i,e){const n=i._lView,r=n[1];if(function Tx(t){return ha(t[3])}(n)){const u=this.indexOf(i);if(-1!==u)this.detach(u);else{const d=n[3],m=new zw(d,d[6],d[3]);m.detach(m.indexOf(i))}}const a=this._adjustIndex(e),o=this._lContainer;!function Mk(t,i,e,n){const r=10+n,a=e.length;n>0&&(e[r-1][4]=i),n<a-10?(i[4]=e[r],Kb(e,10+n,i)):(e.push(i),i[4]=null),i[3]=e;const o=i[17];null!==o&&e!==o&&function kk(t,i){const e=t[9];i[16]!==i[3][3][16]&&(t[2]=!0),null===e?t[9]=[i]:e.push(i)}(o,i);const s=i[19];null!==s&&s.insertView(t),i[2]|=128}(r,n,o,a);const s=Jp(a,o),l=n[11],c=Ad(l,o[7]);return null!==c&&function Dk(t,i,e,n,r,a){n[0]=r,n[6]=i,kc(t,n,e,1,r,a)}(r,o[6],l,n,c,s),i.attachToViewContainerRef(),Kb(om(o),a,i),i}move(i,e){return this.insert(i,e)}indexOf(i){const e=jw(this._lContainer);return null!==e?e.indexOf(i):-1}remove(i){const e=this._adjustIndex(i,-1),n=Qp(this._lContainer,e);n&&(Sd(om(this._lContainer),e),N1(n[1],n))}detach(i){const e=this._adjustIndex(i,-1),n=Qp(this._lContainer,e);return n&&null!=Sd(om(this._lContainer),e)?new zc(n):null}_adjustIndex(i,e=0){return null==i?this.length+e:i}};function jw(t){return t[8]}function om(t){return t[8]||(t[8]=[])}function $w(t,i){let e;const n=i[t.index];if(ha(n))e=n;else{let r;if(8&t.type)r=Ci(n);else{const a=i[11];r=a.createComment("");const o=Yr(t,i);ns(a,Ad(a,o),r,function Ik(t,i){return ui(t)?t.nextSibling(i):i.nextSibling}(a,o),!1)}i[t.index]=e=D_(n,i,r,t),Fd(i,e)}return new zw(e,t,i)}class sm{constructor(i){this.queryList=i,this.matches=null}clone(){return new sm(this.queryList)}setDirty(){this.queryList.setDirty()}}class lm{constructor(i=[]){this.queries=i}createEmbeddedView(i){const e=i.queries;if(null!==e){const n=null!==i.contentQueries?i.contentQueries[0]:e.length,r=[];for(let a=0;a<n;a++){const o=e.getByIndex(a);r.push(this.queries[o.indexInDeclarationView].clone())}return new lm(r)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let e=0;e<this.queries.length;e++)null!==Qw(i,e).matches&&this.queries[e].setDirty()}}class Ww{constructor(i,e,n=null){this.predicate=i,this.flags=e,this.read=n}}class cm{constructor(i=[]){this.queries=i}elementStart(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(i,e)}elementEnd(i){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(i)}embeddedTView(i){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,a=this.getByIndex(n).embeddedTView(i,r);a&&(a.indexInDeclarationView=n,null!==e?e.push(a):e=[a])}return null!==e?new cm(e):null}template(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(i,e)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class um{constructor(i,e=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(i,e){this.isApplyingToNode(e)&&this.matchTNode(i,e)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,e){this.elementStart(i,e)}embeddedTView(i,e){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,e),new um(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=i.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(i,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const a=n[r];this.matchTNodeWithReadOption(i,e,WI(e,a)),this.matchTNodeWithReadOption(i,e,Cd(e,i,a,!1,!1))}else n===Kn?4&e.type&&this.matchTNodeWithReadOption(i,e,-1):this.matchTNodeWithReadOption(i,e,Cd(e,i,n,!1,!1))}matchTNodeWithReadOption(i,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Tn||r===Jr||r===Kn&&4&e.type)this.addMatch(e.index,-2);else{const a=Cd(e,i,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,n)}}addMatch(i,e){null===this.matches?this.matches=[i,e]:this.matches.push(i,e)}}function WI(t,i){const e=t.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===i)return e[n+1];return null}function XI(t,i,e,n){return-1===e?function qI(t,i){return 11&t.type?ml(t,i):4&t.type?eh(t,i):null}(i,t):-2===e?function YI(t,i,e){return e===Tn?ml(i,t):e===Kn?eh(i,t):e===Jr?$w(i,t):void 0}(t,i,n):gc(t,t[1],e,i)}function qw(t,i,e,n){const r=i[19].queries[n];if(null===r.matches){const a=t.data,o=e.matches,s=[];for(let l=0;l<o.length;l+=2){const c=o[l];s.push(c<0?null:XI(i,a[c],o[l+1],e.metadata.read))}r.matches=s}return r.matches}function dm(t,i,e,n){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const o=qw(t,i,r,e);for(let s=0;s<a.length;s+=2){const l=a[s];if(l>0)n.push(o[s/2]);else{const c=a[s+1],u=i[-l];for(let d=10;d<u.length;d++){const m=u[d];m[17]===m[3]&&dm(m[1],m,c,n)}if(null!==u[9]){const d=u[9];for(let m=0;m<d.length;m++){const v=d[m];dm(v[1],v,c,n)}}}}}return n}function yn(t){const i=Me(),e=dn(),n=Eb();bp(n+1);const r=Qw(e,n);if(t.dirty&&Rb(i)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?dm(e,i,n,[]):qw(e,i,r,n);t.reset(a,mI),t.notifyOnChanges()}return!0}return!1}function _a(t,i,e){const n=dn();n.firstCreatePass&&(Yw(n,new Ww(t,i,e),-1),2==(2&i)&&(n.staticViewQueries=!0)),Xw(n,Me(),i)}function bi(t,i,e,n){const r=dn();if(r.firstCreatePass){const a=ki();Yw(r,new Ww(i,e,n),a.index),function KI(t,i){const e=t.contentQueries||(t.contentQueries=[]);i!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,i)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}Xw(r,Me(),e)}function wn(){return function QI(t,i){return t[19].queries[i].queryList}(Me(),Eb())}function Xw(t,i,e){const n=new am(4==(4&e));v_(t,i,n,n.destroy),null===i[19]&&(i[19]=new lm),i[19].queries.push(new sm(n))}function Yw(t,i,e){null===t.queries&&(t.queries=new cm),t.queries.track(new um(i,e))}function Qw(t,i){return t.queries.getByIndex(i)}function ct(t,i){return eh(t,i)}function ih(...t){}const rh=new qt("Application Initializer");let _l=(()=>{class t{constructor(e){this.appInits=e,this.resolve=ih,this.reject=ih,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const a=this.appInits[r]();if(Oc(a))e.push(a);else if(Lg(a)){const o=new Promise((s,l)=>{a.subscribe({complete:s,error:l})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Le(rh,8))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();const Xc=new qt("AppId"),gV={provide:Xc,useFactory:function pV(){return`${vm()}${vm()}${vm()}`},deps:[]};function vm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fC=new qt("Platform Initializer"),ah=new qt("Platform ID"),pC=new qt("appBootstrapListener");let gC=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();const Oo=new qt("LocaleId"),mC=new qt("DefaultCurrencyCode");class mV{constructor(i,e){this.ngModuleFactory=i,this.componentFactories=e}}let oh=(()=>{class t{compileModuleSync(e){return new tm(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),a=Fa(Wr(e).declarations).reduce((o,s)=>{const l=qi(s);return l&&o.push(new em(l)),o},[]);return new mV(n,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();const bV=(()=>Promise.resolve(0))();function bm(t){"undefined"==typeof Zone?bV.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Vn{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function _V(){let t=Mn.requestAnimationFrame,i=Mn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&i){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const n=i[Zone.__symbol__("OriginalDelegate")];n&&(i=n)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function CV(t){const i=()=>{!function wV(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ym(t),t.isCheckStableRunning=!0,_m(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ym(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,a,o,s)=>{try{return vC(t),e.invokeTask(r,a,o,s)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&i(),bC(t)}},onInvoke:(e,n,r,a,o,s,l)=>{try{return vC(t),e.invoke(r,a,o,s,l)}finally{t.shouldCoalesceRunChangeDetection&&i(),bC(t)}},onHasTask:(e,n,r,a)=>{e.hasTask(r,a),n===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,ym(t),_m(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,n,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,e,n){return this._inner.run(i,e,n)}runTask(i,e,n,r){const a=this._inner,o=a.scheduleEventTask("NgZoneEvent: "+r,i,yV,ih,ih);try{return a.runTask(o,e,n)}finally{a.cancelTask(o)}}runGuarded(i,e,n){return this._inner.runGuarded(i,e,n)}runOutsideAngular(i){return this._outer.run(i)}}const yV={};function _m(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ym(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function vC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function bC(t){t._nesting--,_m(t)}class SV{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ot,this.onMicrotaskEmpty=new ot,this.onStable=new ot,this.onError=new ot}run(i,e,n){return i.apply(e,n)}runGuarded(i,e,n){return i.apply(e,n)}runOutsideAngular(i){return i()}runTask(i,e,n,r){return i.apply(e,n)}}let wm=(()=>{class t{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vn.assertNotInAngularZone(),bm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bm(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let a=-1;n&&n>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==a),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Le(Vn))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})(),_C=(()=>{class t{constructor(){this._applications=new Map,Cm.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return Cm.findTestabilityInTree(this,e,n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();class TV{addToWindow(i){}findTestabilityInTree(i,e,n){return null}}let ya,Cm=new TV;const yC=new qt("AllowMultipleToken");class wC{constructor(i,e){this.name=i,this.token=e}}function CC(t,i,e=[]){const n=`Platform: ${i}`,r=new qt(n);return(a=[])=>{let o=SC();if(!o||o.injector.get(yC,!1))if(t)t(e.concat(a).concat({provide:r,useValue:!0}));else{const s=e.concat(a).concat({provide:r,useValue:!0},{provide:Tg,useValue:"platform"});!function MV(t){if(ya&&!ya.destroyed&&!ya.injector.get(yC,!1))throw new un(400,"");ya=t.get(TC);const i=t.get(fC,null);i&&i.forEach(e=>e())}(vi.create({providers:s,name:n}))}return function kV(t){const i=SC();if(!i)throw new un(401,"");return i}()}}function SC(){return ya&&!ya.destroyed?ya:null}let TC=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const s=function AV(t,i){let e;return e="noop"===t?new SV:("zone.js"===t?void 0:t)||new Vn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),e}(n?n.ngZone:void 0,{ngZoneEventCoalescing:n&&n.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:n&&n.ngZoneRunCoalescing||!1}),l=[{provide:Vn,useValue:s}];return s.run(()=>{const c=vi.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),d=u.injector.get(Xs,null);if(!d)throw new un(402,"");return s.runOutsideAngular(()=>{const m=s.onError.subscribe({next:v=>{d.handleError(v)}});u.onDestroy(()=>{Sm(this._modules,u),m.unsubscribe()})}),function PV(t,i,e){try{const n=e();return Oc(n)?n.catch(r=>{throw i.runOutsideAngular(()=>t.handleError(r)),r}):n}catch(n){throw i.runOutsideAngular(()=>t.handleError(n)),n}}(d,s,()=>{const m=u.injector.get(_l);return m.runInitializers(),m.donePromise.then(()=>(function _E(t){(function Mr(t,i){null==t&&jn(i,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(aw=t.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Oo,Wd)||Wd),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,n=[]){const r=DC({},n);return function RV(t,i,e){const n=new tm(e);return Promise.resolve(n)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const n=e.injector.get(os);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new un(403,"");e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new un(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Le(vi))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();function DC(t,i){return Array.isArray(i)?i.reduce(DC,t):Object.assign(Object.assign({},t),i)}let os=(()=>{class t{constructor(e,n,r,a,o){this._zone=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Be(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Be(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Vn.assertNotInAngularZone(),bm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Vn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=cb(s,l.pipe(ub()))}bootstrap(e,n){if(!this._initStatus.done)throw new un(405,"");let r;r=e instanceof kw?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const a=function xV(t){return t.isBoundToModule}(r)?void 0:this._injector.get(co),s=r.create(vi.NULL,[],n||r.selector,a),l=s.location.nativeElement,c=s.injector.get(wm,null),u=c&&s.injector.get(_C);return c&&u&&u.registerApplication(l,c),s.onDestroy(()=>{this.detachView(s.hostView),Sm(this.components,s),u&&u.unregisterApplication(l)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new un(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;Sm(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(pC,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Le(Vn),Le(vi),Le(Xs),Le(as),Le(_l))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();function Sm(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}let xC=!0,Or=(()=>{class t{}return t.__NG_ELEMENT_ID__=VV,t})();function VV(t){return function OV(t,i,e){if(sd(t)&&!e){const n=Ar(t.index,i);return new zc(n,n)}return 47&t.type?new zc(i[16],i):null}(ki(),Me(),16==(16&t))}class EC{constructor(){}supports(i){return Ic(i)}create(i){return new HV(i)}}const UV=(t,i)=>i;class HV{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||UV}forEachItem(i){let e;for(e=this._itHead;null!==e;e=e._next)i(e)}forEachOperation(i){let e=this._itHead,n=this._removalsHead,r=0,a=null;for(;e||n;){const o=!n||e&&e.currentIndex<VC(n,r,a)?e:n,s=VC(o,r,a),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{a||(a=[]);const c=s-r,u=l-r;if(c!=u){for(let m=0;m<c;m++){const v=m<a.length?a[m]:a[m]=0,b=v+m;u<=b&&b<c&&(a[m]=v+1)}a[o.previousIndex]=u-c}}s!==l&&i(o,s,l)}}forEachPreviousItem(i){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)i(e)}forEachMovedItem(i){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)i(e)}forEachIdentityChange(i){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)i(e)}diff(i){if(null==i&&(i=[]),!Ic(i))throw new un(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let r,a,o,e=this._itHead,n=!1;if(Array.isArray(i)){this.length=i.length;for(let s=0;s<this.length;s++)a=i[s],o=this._trackByFn(s,a),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,s),n=!0),e=e._next}else r=0,function lP(t,i){if(Array.isArray(t))for(let e=0;e<t.length;e++)i(t[e]);else{const e=t[nl()]();let n;for(;!(n=e.next()).done;)i(n.value)}}(i,s=>{o=this._trackByFn(r,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,r)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,e,n,r){let a;return null===i?a=this._itTail:(a=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._reinsertAfter(i,a,r)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._moveAfter(i,a,r)):i=this._addAfter(new GV(e,n),a,r),i}_verifyReinsertion(i,e,n,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==a?i=this._reinsertAfter(a,i._prev,r):i.currentIndex!=r&&(i.currentIndex=r,this._addToMoves(i,r)),i}_truncate(i){for(;null!==i;){const e=i._next;this._addToRemovals(this._unlink(i)),i=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const r=i._prevRemoved,a=i._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(i,e,n),this._addToMoves(i,n),i}_moveAfter(i,e,n){return this._unlink(i),this._insertAfter(i,e,n),this._addToMoves(i,n),i}_addAfter(i,e,n){return this._insertAfter(i,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,e,n){const r=null===e?this._itHead:e._next;return i._next=r,i._prev=e,null===r?this._itTail=i:r._prev=i,null===e?this._itHead=i:e._next=i,null===this._linkedRecords&&(this._linkedRecords=new IC),this._linkedRecords.put(i),i.currentIndex=n,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const e=i._prev,n=i._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,i}_addToMoves(i,e){return i.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new IC),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,e){return i.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class GV{constructor(i,e){this.item=i,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zV{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,i))return n;return null}remove(i){const e=i._prevDup,n=i._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class IC{constructor(){this.map=new Map}put(i){const e=i.trackById;let n=this.map.get(e);n||(n=new zV,this.map.set(e,n)),n.add(i)}get(i,e){const r=this.map.get(i);return r?r.get(i,e):null}remove(i){const e=i.trackById;return this.map.get(e).remove(i)&&this.map.delete(e),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VC(t,i,e){const n=t.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+i+r}class OC{constructor(){}supports(i){return i instanceof Map||Ag(i)}create(){return new jV}}class jV{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let e;for(e=this._mapHead;null!==e;e=e._next)i(e)}forEachPreviousItem(i){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)i(e)}forEachChangedItem(i){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)i(e)}diff(i){if(i){if(!(i instanceof Map||Ag(i)))throw new un(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(i,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const a=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,a)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,e){if(i){const n=i._prev;return e._next=i,e._prev=n,i._prev=e,n&&(n._next=e),i===this._mapHead&&(this._mapHead=e),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(i,e){if(this._records.has(i)){const r=this._records.get(i);this._maybeAddToChanges(r,e);const a=r._prev,o=r._next;return a&&(a._next=o),o&&(o._prev=a),r._next=null,r._prev=null,r}const n=new $V(i);return this._records.set(i,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,e){Object.is(e,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=e,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,e){i instanceof Map?i.forEach(e):Object.keys(i).forEach(n=>e(i[n],n))}}class $V{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function NC(){return new Yc([new EC])}let Yc=(()=>{class t{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||NC()),deps:[[t,new $s,new Va]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new un(901,"")}}return t.\u0275prov=rt({token:t,providedIn:"root",factory:NC}),t})();function FC(){return new yl([new OC])}let yl=(()=>{class t{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||FC()),deps:[[t,new $s,new Va]]}}find(e){const n=this.factories.find(a=>a.supports(e));if(n)return n;throw new un(901,"")}}return t.\u0275prov=rt({token:t,providedIn:"root",factory:FC}),t})();const WV=[new OC],XV=new Yc([new EC]),YV=new yl(WV),QV=CC(null,"core",[{provide:ah,useValue:"unknown"},{provide:TC,deps:[vi]},{provide:_C,deps:[]},{provide:gC,deps:[]}]),tO=[{provide:os,useClass:os,deps:[Vn,vi,Xs,as,_l]},{provide:SI,deps:[Vn],useFactory:function nO(t){let i=[];return t.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(e){i.push(e)}}},{provide:_l,useClass:_l,deps:[[new Va,rh]]},{provide:oh,useClass:oh,deps:[]},gV,{provide:Yc,useFactory:function KV(){return XV},deps:[]},{provide:yl,useFactory:function ZV(){return YV},deps:[]},{provide:Oo,useFactory:function JV(t){return t||function eO(){return"undefined"!=typeof $localize&&$localize.locale||Wd}()},deps:[[new Cc(Oo),new Va,new $s]]},{provide:mC,useValue:"USD"}];let iO=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Le(os))},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({providers:tO}),t})(),ch=null;function Ga(){return ch}const Si=new qt("DocumentToken");let ls=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:function(){return function sO(){return Le(BC)}()},providedIn:"platform"}),t})();const lO=new qt("Location Initialized");let BC=(()=>{class t extends ls{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ga().getBaseHref(this._doc)}onPopState(e){const n=Ga().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Ga().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){LC()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){LC()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=rt({token:t,factory:function(){return function cO(){return new BC(Le(Si))}()},providedIn:"platform"}),t})();function LC(){return!!window.history.pushState}function Mm(t,i){if(0==t.length)return i;if(0==i.length)return t;let e=0;return t.endsWith("/")&&e++,i.startsWith("/")&&e++,2==e?t+i.substring(1):1==e?t+i:t+"/"+i}function UC(t){const i=t.match(/#|\?|$/),e=i&&i.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function uo(t){return t&&"?"!==t[0]?"?"+t:t}let wl=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:function(){return function uO(t){const i=Le(Si).location;return new HC(Le(ls),i&&i.origin||"")}()},providedIn:"root"}),t})();const km=new qt("appBaseHref");let HC=(()=>{class t extends wl{constructor(e,n){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Mm(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+uo(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,a){const o=this.prepareExternalUrl(r+uo(a));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,a){const o=this.prepareExternalUrl(r+uo(a));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return t.\u0275fac=function(e){return new(e||t)(Le(ls),Le(km,8))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})(),dO=(()=>{class t extends wl{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=Mm(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,a){let o=this.prepareExternalUrl(r+uo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,a){let o=this.prepareExternalUrl(r+uo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return t.\u0275fac=function(e){return new(e||t)(Le(ls),Le(km,8))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})(),Am=(()=>{class t{constructor(e,n){this._subject=new ot,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=UC(GC(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+uo(n))}normalize(e){return t.stripTrailingSlash(function fO(t,i){return t&&i.startsWith(t)?i.substring(t.length):i}(this._baseHref,GC(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+uo(n)),r)}replaceState(e,n="",r=null){this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+uo(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformStrategy).historyGo)||void 0===r||r.call(n,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}))}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return t.normalizeQueryParams=uo,t.joinWithSlash=Mm,t.stripTrailingSlash=UC,t.\u0275fac=function(e){return new(e||t)(Le(wl),Le(ls))},t.\u0275prov=rt({token:t,factory:function(){return function hO(){return new Am(Le(wl),Le(ls))}()},providedIn:"root"}),t})();function GC(t){return t.replace(/\/index.html$/,"")}var wr=(()=>((wr=wr||{})[wr.Decimal=0]="Decimal",wr[wr.Percent=1]="Percent",wr[wr.Currency=2]="Currency",wr[wr.Scientific=3]="Scientific",wr))(),Ti=(()=>((Ti=Ti||{})[Ti.Zero=0]="Zero",Ti[Ti.One=1]="One",Ti[Ti.Two=2]="Two",Ti[Ti.Few=3]="Few",Ti[Ti.Many=4]="Many",Ti[Ti.Other=5]="Other",Ti))(),mt=(()=>((mt=mt||{})[mt.Decimal=0]="Decimal",mt[mt.Group=1]="Group",mt[mt.List=2]="List",mt[mt.PercentSign=3]="PercentSign",mt[mt.PlusSign=4]="PlusSign",mt[mt.MinusSign=5]="MinusSign",mt[mt.Exponential=6]="Exponential",mt[mt.SuperscriptingExponent=7]="SuperscriptingExponent",mt[mt.PerMille=8]="PerMille",mt[mt.Infinity=9]="Infinity",mt[mt.NaN=10]="NaN",mt[mt.TimeSeparator=11]="TimeSeparator",mt[mt.CurrencyDecimal=12]="CurrencyDecimal",mt[mt.CurrencyGroup=13]="CurrencyGroup",mt))();function ea(t,i){const e=lr(t),n=e[Ye.NumberSymbols][i];if(void 0===n){if(i===mt.CurrencyDecimal)return e[Ye.NumberSymbols][mt.Decimal];if(i===mt.CurrencyGroup)return e[Ye.NumberSymbols][mt.Group]}return n}function Pm(t,i){return lr(t)[Ye.NumberFormats][i]}const yO=iw,LO=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Nm(t,i,e,n,r,a,o=!1){let s="",l=!1;if(isFinite(t)){let c=function qO(t){let n,r,a,o,s,i=Math.abs(t)+"",e=0;for((r=i.indexOf("."))>-1&&(i=i.replace(".","")),(a=i.search(/e/i))>0?(r<0&&(r=a),r+=+i.slice(a+1),i=i.substring(0,a)):r<0&&(r=i.length),a=0;"0"===i.charAt(a);a++);if(a===(s=i.length))n=[0],r=1;else{for(s--;"0"===i.charAt(s);)s--;for(r-=a,n=[],o=0;a<=s;a++,o++)n[o]=Number(i.charAt(a))}return r>22&&(n=n.splice(0,21),e=r-1,r=1),{digits:n,exponent:e,integerLen:r}}(t);o&&(c=function WO(t){if(0===t.digits[0])return t;const i=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===i?t.digits.push(0,0):1===i&&t.digits.push(0),t.integerLen+=2),t}(c));let u=i.minInt,d=i.minFrac,m=i.maxFrac;if(a){const C=a.match(LO);if(null===C)throw new Error(`${a} is not a valid digit info`);const R=C[1],Y=C[3],Q=C[5];null!=R&&(u=Bm(R)),null!=Y&&(d=Bm(Y)),null!=Q?m=Bm(Q):null!=Y&&d>m&&(m=d)}!function XO(t,i,e){if(i>e)throw new Error(`The minimum number of digits after fraction (${i}) is higher than the maximum (${e}).`);let n=t.digits,r=n.length-t.integerLen;const a=Math.min(Math.max(i,r),e);let o=a+t.integerLen,s=n[o];if(o>0){n.splice(Math.max(t.integerLen,o));for(let d=o;d<n.length;d++)n[d]=0}else{r=Math.max(0,r),t.integerLen=1,n.length=Math.max(1,o=a+1),n[0]=0;for(let d=1;d<o;d++)n[d]=0}if(s>=5)if(o-1<0){for(let d=0;d>o;d--)n.unshift(0),t.integerLen++;n.unshift(1),t.integerLen++}else n[o-1]++;for(;r<Math.max(0,a);r++)n.push(0);let l=0!==a;const c=i+t.integerLen,u=n.reduceRight(function(d,m,v,b){return b[v]=(m+=d)<10?m:m-10,l&&(0===b[v]&&v>=c?b.pop():l=!1),m>=10?1:0},0);u&&(n.unshift(u),t.integerLen++)}(c,d,m);let v=c.digits,b=c.integerLen;const y=c.exponent;let T=[];for(l=v.every(C=>!C);b<u;b++)v.unshift(0);for(;b<0;b++)v.unshift(0);b>0?T=v.splice(b,v.length):(T=v,v=[0]);const k=[];for(v.length>=i.lgSize&&k.unshift(v.splice(-i.lgSize,v.length).join(""));v.length>i.gSize;)k.unshift(v.splice(-i.gSize,v.length).join(""));v.length&&k.unshift(v.join("")),s=k.join(ea(e,n)),T.length&&(s+=ea(e,r)+T.join("")),y&&(s+=ea(e,mt.Exponential)+"+"+y)}else s=ea(e,mt.Infinity);return s=t<0&&!l?i.negPre+s+i.negSuf:i.posPre+s+i.posSuf,s}function Fm(t,i="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=t.split(";"),r=n[0],a=n[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],s=o[0],l=o[1]||"";e.posPre=s.substr(0,s.indexOf("#"));for(let u=0;u<l.length;u++){const d=l.charAt(u);"0"===d?e.minFrac=e.maxFrac=u+1:"#"===d?e.maxFrac=u+1:e.posSuf+=d}const c=s.split(",");if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,a){const u=r.length-e.posPre.length-e.posSuf.length,d=a.indexOf("#");e.negPre=a.substr(0,d).replace(/'/g,""),e.negSuf=a.substr(d+u).replace(/'/g,"")}else e.negPre=i+e.posPre,e.negSuf=e.posSuf;return e}function Bm(t){const i=parseInt(t);if(isNaN(i))throw new Error("Invalid integer literal when parsing "+t);return i}class _h{}let YO=(()=>{class t extends _h{constructor(e){super(),this.locale=e}getPluralCategory(e,n){switch(yO(n||this.locale)(e)){case Ti.Zero:return"zero";case Ti.One:return"one";case Ti.Two:return"two";case Ti.Few:return"few";case Ti.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Le(Oo))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})(),Zn=(()=>{class t{constructor(e,n,r,a){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Ic(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Dn(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(P(Yc),P(yl),P(Tn),P(Zr))},t.\u0275dir=je({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class ZO{constructor(i,e,n,r){this.$implicit=i,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ai=(()=>{class t{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,a,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new ZO(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===a?void 0:a);else if(null!==a){const s=n.get(a);n.move(s,o),KC(s,r)}});for(let r=0,a=n.length;r<a;r++){const s=n.get(r).context;s.index=r,s.count=a,s.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{KC(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return t.\u0275fac=function(e){return new(e||t)(P(Jr),P(Kn),P(Yc))},t.\u0275dir=je({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function KC(t,i){t.context.$implicit=i.item}let sn=(()=>{class t{constructor(e,n){this._viewContainer=e,this._context=new JO,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ZC("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ZC("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return t.\u0275fac=function(e){return new(e||t)(P(Jr),P(Kn))},t.\u0275dir=je({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class JO{constructor(){this.$implicit=null,this.ngIf=null}}function ZC(t,i){if(i&&!i.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Dn(i)}'.`)}let Cl=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const n=this._viewContainerRef;this._viewRef&&n.remove(n.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?n.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(P(Jr))},t.\u0275dir=je({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Ui]}),t})();function Ca(t,i){return new un(2100,"")}let fo=(()=>{class t{constructor(e){this._locale=e}transform(e,n,r){if(!Hm(e))return null;r=r||this._locale;try{return function $O(t,i,e){return Nm(t,Fm(Pm(i,wr.Decimal),ea(i,mt.MinusSign)),i,mt.Group,mt.Decimal,e)}(Gm(e),r,n)}catch(a){throw Ca()}}}return t.\u0275fac=function(e){return new(e||t)(P(Oo,16))},t.\u0275pipe=_r({name:"number",type:t,pure:!0}),t})(),tS=(()=>{class t{constructor(e){this._locale=e}transform(e,n,r){if(!Hm(e))return null;r=r||this._locale;try{return function jO(t,i,e){return Nm(t,Fm(Pm(i,wr.Percent),ea(i,mt.MinusSign)),i,mt.Group,mt.Decimal,e,!0).replace(new RegExp("%","g"),ea(i,mt.PercentSign))}(Gm(e),r,n)}catch(a){throw Ca()}}}return t.\u0275fac=function(e){return new(e||t)(P(Oo,16))},t.\u0275pipe=_r({name:"percent",type:t,pure:!0}),t})();function Hm(t){return!(null==t||""===t||t!=t)}function Gm(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let Cr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({providers:[{provide:_h,useClass:YO}]}),t})();let xN=(()=>{class t{}return t.\u0275prov=rt({token:t,providedIn:"root",factory:()=>new MN(Le(Si),window)}),t})();class MN{constructor(i,e){this.document=i,this.window=e,this.offset=()=>[0,0]}setOffset(i){this.offset=Array.isArray(i)?()=>i:i}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(i){this.supportsScrolling()&&this.window.scrollTo(i[0],i[1])}scrollToAnchor(i){if(!this.supportsScrolling())return;const e=function kN(t,i){const e=t.getElementById(i)||t.getElementsByName(i)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const a=r.shadowRoot;if(a){const o=a.getElementById(i)||a.querySelector(`[name="${i}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,i);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(i){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=i)}}scrollToElement(i){const e=i.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(n-a[0],r-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const i=iS(this.window.history)||iS(Object.getPrototypeOf(this.window.history));return!(!i||!i.writable&&!i.set)}catch(i){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(i){return!1}}}function iS(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class zm extends class PN extends class oO{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function aO(t){ch||(ch=t)}(new zm)}onAndCancel(i,e,n){return i.addEventListener(e,n,!1),()=>{i.removeEventListener(e,n,!1)}}dispatchEvent(i,e){i.dispatchEvent(e)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,e){return(e=e||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,e){return"window"===e?window:"document"===e?i:"body"===e?i.body:null}getBaseHref(i){const e=function EN(){return Zc=Zc||document.querySelector("base"),Zc?Zc.getAttribute("href"):null}();return null==e?null:function IN(t){yh=yh||document.createElement("a"),yh.setAttribute("href",t);const i=yh.pathname;return"/"===i.charAt(0)?i:`/${i}`}(e)}resetBaseElement(){Zc=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return function QO(t,i){i=encodeURIComponent(i);for(const e of t.split(";")){const n=e.indexOf("="),[r,a]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===i)return decodeURIComponent(a)}return null}(document.cookie,i)}}let yh,Zc=null;const rS=new qt("TRANSITION_ID"),ON=[{provide:rh,useFactory:function VN(t,i,e){return()=>{e.get(_l).donePromise.then(()=>{const n=Ga(),r=i.querySelectorAll(`style[ng-transition="${t}"]`);for(let a=0;a<r.length;a++)n.remove(r[a])})}},deps:[rS,Si,vi],multi:!0}];class jm{static init(){!function DV(t){Cm=t}(new jm)}addToWindow(i){Mn.getAngularTestability=(n,r=!0)=>{const a=i.findTestabilityInTree(n,r);if(null==a)throw new Error("Could not find testability for element.");return a},Mn.getAllAngularTestabilities=()=>i.getAllTestabilities(),Mn.getAllAngularRootElements=()=>i.getAllRootElements(),Mn.frameworkStabilizers||(Mn.frameworkStabilizers=[]),Mn.frameworkStabilizers.push(n=>{const r=Mn.getAllAngularTestabilities();let a=r.length,o=!1;const s=function(l){o=o||l,a--,0==a&&n(o)};r.forEach(function(l){l.whenStable(s)})})}findTestabilityInTree(i,e,n){if(null==e)return null;const r=i.getTestability(e);return null!=r?r:n?Ga().isShadowRoot(e)?this.findTestabilityInTree(i,e.host,!0):this.findTestabilityInTree(i,e.parentElement,!0):null}}let NN=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();const wh=new qt("EventManagerPlugins");let Ch=(()=>{class t{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let a=0;a<r.length;a++){const o=r[a];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Le(wh),Le(Vn))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();class aS{constructor(i){this._doc=i}addGlobalEventListener(i,e,n){const r=Ga().getGlobalEventTarget(this._doc,i);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let oS=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})(),Jc=(()=>{class t extends oS{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(a=>{const o=this._doc.createElement("style");o.textContent=a,r.push(n.appendChild(o))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(sS),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(sS))}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();function sS(t){Ga().remove(t)}const $m={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Wm=/%COMP%/g;function Sh(t,i,e){for(let n=0;n<i.length;n++){let r=i[n];Array.isArray(r)?Sh(t,r,e):(r=r.replace(Wm,t),e.push(r))}return e}function uS(t){return i=>{if("__ngUnwrap__"===i)return t;!1===t(i)&&(i.preventDefault(),i.returnValue=!1)}}let qm=(()=>{class t{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Xm(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case Aa.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new GN(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case Aa.ShadowDom:return new zN(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=Sh(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Le(Ch),Le(Jc),Le(Xc))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();class Xm{constructor(i){this.eventManager=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(i,e){return e?document.createElementNS($m[e]||e,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,e){i.appendChild(e)}insertBefore(i,e,n){i&&i.insertBefore(e,n)}removeChild(i,e){i&&i.removeChild(e)}selectRootElement(i,e){let n="string"==typeof i?document.querySelector(i):i;if(!n)throw new Error(`The selector "${i}" did not match any elements`);return e||(n.textContent=""),n}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,e,n,r){if(r){e=r+":"+e;const a=$m[r];a?i.setAttributeNS(a,e,n):i.setAttribute(e,n)}else i.setAttribute(e,n)}removeAttribute(i,e,n){if(n){const r=$m[n];r?i.removeAttributeNS(r,e):i.removeAttribute(`${n}:${e}`)}else i.removeAttribute(e)}addClass(i,e){i.classList.add(e)}removeClass(i,e){i.classList.remove(e)}setStyle(i,e,n,r){r&(Ir.DashCase|Ir.Important)?i.style.setProperty(e,n,r&Ir.Important?"important":""):i.style[e]=n}removeStyle(i,e,n){n&Ir.DashCase?i.style.removeProperty(e):i.style[e]=""}setProperty(i,e,n){i[e]=n}setValue(i,e){i.nodeValue=e}listen(i,e,n){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,e,uS(n)):this.eventManager.addEventListener(i,e,uS(n))}}class GN extends Xm{constructor(i,e,n,r){super(i),this.component=n;const a=Sh(r+"-"+n.id,n.styles,[]);e.addStyles(a),this.contentAttr=function LN(t){return"_ngcontent-%COMP%".replace(Wm,t)}(r+"-"+n.id),this.hostAttr=function UN(t){return"_nghost-%COMP%".replace(Wm,t)}(r+"-"+n.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,e){const n=super.createElement(i,e);return super.setAttribute(n,this.contentAttr,""),n}}class zN extends Xm{constructor(i,e,n,r){super(i),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Sh(r.id,r.styles,[]);for(let o=0;o<a.length;o++){const s=document.createElement("style");s.textContent=a[o],this.shadowRoot.appendChild(s)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,e){return super.appendChild(this.nodeOrShadowRoot(i),e)}insertBefore(i,e,n){return super.insertBefore(this.nodeOrShadowRoot(i),e,n)}removeChild(i,e){return super.removeChild(this.nodeOrShadowRoot(i),e)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let jN=(()=>{class t extends aS{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();const hS=["alt","control","meta","shift"],WN={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fS={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qN={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let XN=(()=>{class t extends aS{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const a=t.parseEventName(n),o=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ga().onAndCancel(e,a.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(n.pop());let o="";if(hS.forEach(l=>{const c=n.indexOf(l);c>-1&&(n.splice(c,1),o+=l+".")}),o+=a,0!=n.length||0===a.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let n="",r=function YN(t){let i=t.key;if(null==i){if(i=t.keyIdentifier,null==i)return"Unidentified";i.startsWith("U+")&&(i=String.fromCharCode(parseInt(i.substring(2),16)),3===t.location&&fS.hasOwnProperty(i)&&(i=fS[i]))}return WN[i]||i}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),hS.forEach(a=>{a!=r&&qN[a](e)&&(n+=a+".")}),n+=r,n}static eventCallback(e,n,r){return a=>{t.getEventFullKey(a)===e&&r.runGuarded(()=>n(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();const JN=CC(QV,"browser",[{provide:ah,useValue:"browser"},{provide:fC,useValue:function QN(){zm.makeCurrent(),jm.init()},multi:!0},{provide:Si,useFactory:function ZN(){return function yx(t){cp=t}(document),document},deps:[]}]),eF=[{provide:Tg,useValue:"root"},{provide:Xs,useFactory:function KN(){return new Xs},deps:[]},{provide:wh,useClass:jN,multi:!0,deps:[Si,Vn,ah]},{provide:wh,useClass:XN,multi:!0,deps:[Si]},{provide:qm,useClass:qm,deps:[Ch,Jc,Xc]},{provide:Zg,useExisting:qm},{provide:oS,useExisting:Jc},{provide:Jc,useClass:Jc,deps:[Si]},{provide:wm,useClass:wm,deps:[Vn]},{provide:Ch,useClass:Ch,deps:[wh,Vn]},{provide:class AN{},useClass:NN,deps:[]}];let tF=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Xc,useValue:e.appId},{provide:rS,useExisting:Xc},ON]}}}return t.\u0275fac=function(e){return new(e||t)(Le(t,12))},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({providers:eF,imports:[Cr,iO]}),t})();"undefined"!=typeof window&&window;let Fo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:function(e){let n=null;return n=e?new(e||t):Le(mS),n},providedIn:"root"}),t})(),mS=(()=>{class t extends Fo{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case en.NONE:return n;case en.HTML:return Oa(n,"HTML")?Er(n):y1(this._doc,String(n)).toString();case en.STYLE:return Oa(n,"Style")?Er(n):n;case en.SCRIPT:if(Oa(n,"Script"))return Er(n);throw new Error("unsafe value used in a script context");case en.URL:return h1(n),Oa(n,"URL")?Er(n):Tc(String(n));case en.RESOURCE_URL:if(Oa(n,"ResourceURL"))return Er(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function VM(t){return new kM(t)}(e)}bypassSecurityTrustStyle(e){return function OM(t){return new AM(t)}(e)}bypassSecurityTrustScript(e){return function NM(t){return new PM(t)}(e)}bypassSecurityTrustUrl(e){return function FM(t){return new EM(t)}(e)}bypassSecurityTrustResourceUrl(e){return function BM(t){return new IM(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=rt({token:t,factory:function(e){let n=null;return n=e?new e:function dF(t){return new mS(t.get(Si))}(Le(vi)),n},providedIn:"root"}),t})();const{isArray:hF}=Array,{getPrototypeOf:fF,prototype:pF,keys:gF}=Object;function vS(t){if(1===t.length){const i=t[0];if(hF(i))return{args:i,keys:null};if(function mF(t){return t&&"object"==typeof t&&fF(t)===pF}(i)){const e=gF(i);return{args:e.map(n=>i[n]),keys:e}}}return{args:t,keys:null}}const{isArray:vF}=Array;function Qm(t){return Nt(i=>function bF(t,i){return vF(i)?t(...i):t(i)}(t,i))}function bS(t,i){return t.reduce((e,n,r)=>(e[n]=i[r],e),{})}let _S=(()=>{class t{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(P(Zr),P(Tn))},t.\u0275dir=je({type:t}),t})(),cs=(()=>{class t extends _S{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yi(t)))(n||t)}}(),t.\u0275dir=je({type:t,features:[Sn]}),t})();const na=new qt("NgValueAccessor"),yF={provide:na,useExisting:hn(()=>Th),multi:!0};let Th=(()=>{class t extends cs{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,n){1&e&&V("change",function(a){return n.onChange(a.target.checked)})("blur",function(){return n.onTouched()})},features:[In([yF]),Sn]}),t})();const wF={provide:na,useExisting:hn(()=>us),multi:!0},SF=new qt("CompositionEventMode");let us=(()=>{class t extends _S{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CF(){const t=Ga()?Ga().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(P(Zr),P(Tn),P(SF,8))},t.\u0275dir=je({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&V("input",function(a){return n._handleInput(a.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(a){return n._compositionEnd(a.target.value)})},features:[In([wF]),Sn]}),t})();function yS(t){return null!=t&&"number"==typeof t.length}const Ji=new qt("NgValidators"),Lo=new qt("NgAsyncValidators");function Dh(t){return null}function kS(t){return null!=t}function AS(t){const i=Oc(t)?Fi(t):t;return Lg(i),i}function PS(t){let i={};return t.forEach(e=>{i=null!=e?Object.assign(Object.assign({},i),e):i}),0===Object.keys(i).length?null:i}function ES(t,i){return i.map(e=>e(t))}function IS(t){return t.map(i=>function DF(t){return!t.validate}(i)?i:e=>i.validate(e))}function Km(t){return null!=t?function VS(t){if(!t)return null;const i=t.filter(kS);return 0==i.length?null:function(e){return PS(ES(e,i))}}(IS(t)):null}function Zm(t){return null!=t?function OS(t){if(!t)return null;const i=t.filter(kS);return 0==i.length?null:function(e){return function _F(...t){const i=ed(t),{args:e,keys:n}=vS(t),r=new Be(a=>{const{length:o}=e;if(!o)return void a.complete();const s=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;Mi(e[u]).subscribe($t(a,m=>{d||(d=!0,c--),s[u]=m},()=>l--,void 0,()=>{(!l||!d)&&(c||a.next(n?bS(n,s):s),a.complete())}))}});return i?r.pipe(Qm(i)):r}(ES(e,i).map(AS)).pipe(Nt(PS))}}(IS(t)):null}function NS(t,i){return null===t?[i]:Array.isArray(t)?[...t,i]:[t,i]}function FS(t){return t._rawValidators}function BS(t){return t._rawAsyncValidators}function Jm(t){return t?Array.isArray(t)?t:[t]:[]}function Rh(t,i){return Array.isArray(t)?t.includes(i):t===i}function LS(t,i){const e=Jm(i);return Jm(t).forEach(r=>{Rh(e,r)||e.push(r)}),e}function US(t,i){return Jm(i).filter(e=>!Rh(t,e))}class HS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=Km(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=Zm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i){this.control&&this.control.reset(i)}hasError(i,e){return!!this.control&&this.control.hasError(i,e)}getError(i,e){return this.control?this.control.getError(i,e):null}}class Uo extends HS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ur extends HS{get formDirective(){return null}get path(){return null}}class GS{constructor(i){this._cd=i}is(i){var e,n,r;return"submitted"===i?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[i])}}let Sl=(()=>{class t extends GS{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(P(Uo,2))},t.\u0275dir=je({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&St("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[Sn]}),t})(),xh=(()=>{class t extends GS{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(P(ur,10))},t.\u0275dir=je({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&St("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))("ng-submitted",n.is("submitted"))},features:[Sn]}),t})();function kh(t,i){return[...i.path,t]}function eu(t,i){nv(t,i),i.valueAccessor.writeValue(t.value),function IF(t,i){i.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&jS(t,i)})}(t,i),function OF(t,i){const e=(n,r)=>{i.valueAccessor.writeValue(n),r&&i.viewToModelUpdate(n)};t.registerOnChange(e),i._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,i),function VF(t,i){i.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&jS(t,i),"submit"!==t.updateOn&&t.markAsTouched()})}(t,i),function EF(t,i){if(i.valueAccessor.setDisabledState){const e=n=>{i.valueAccessor.setDisabledState(n)};t.registerOnDisabledChange(e),i._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,i)}function Ah(t,i,e=!0){const n=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(n),i.valueAccessor.registerOnTouched(n)),Eh(t,i),t&&(i._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ph(t,i){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function nv(t,i){const e=FS(t);null!==i.validator?t.setValidators(NS(e,i.validator)):"function"==typeof e&&t.setValidators([e]);const n=BS(t);null!==i.asyncValidator?t.setAsyncValidators(NS(n,i.asyncValidator)):"function"==typeof n&&t.setAsyncValidators([n]);const r=()=>t.updateValueAndValidity();Ph(i._rawValidators,r),Ph(i._rawAsyncValidators,r)}function Eh(t,i){let e=!1;if(null!==t){if(null!==i.validator){const r=FS(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==i.validator);a.length!==r.length&&(e=!0,t.setValidators(a))}}if(null!==i.asyncValidator){const r=BS(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==i.asyncValidator);a.length!==r.length&&(e=!0,t.setAsyncValidators(a))}}}const n=()=>{};return Ph(i._rawValidators,n),Ph(i._rawAsyncValidators,n),e}function jS(t,i){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function $S(t,i){nv(t,i)}function iv(t,i){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(i,e.currentValue)}function WS(t,i){t._syncPendingControls(),i.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function rv(t,i){if(!i)return null;let e,n,r;return Array.isArray(i),i.forEach(a=>{a.constructor===us?e=a:function BF(t){return Object.getPrototypeOf(t.constructor)===cs}(a)?n=a:r=a}),r||n||e||null}function av(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}const tu="VALID",Ih="INVALID",Tl="PENDING",nu="DISABLED";function sv(t){return(Vh(t)?t.validators:t)||null}function qS(t){return Array.isArray(t)?Km(t):t||null}function lv(t,i){return(Vh(i)?i.asyncValidators:t)||null}function XS(t){return Array.isArray(t)?Zm(t):t||null}function Vh(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const YS=t=>t instanceof dv,cv=t=>t instanceof Oh;function QS(t){return YS(t)?t.value:t.getRawValue()}function KS(t,i){const e=cv(t),n=t.controls;if(!(e?Object.keys(n):n).length)throw new un(1e3,"");if(!n[i])throw new un(1001,"")}function ZS(t,i){cv(t),t._forEachChild((n,r)=>{if(void 0===i[r])throw new un(1002,"")})}class uv{constructor(i,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=i,this._rawAsyncValidators=e,this._composedValidatorFn=qS(this._rawValidators),this._composedAsyncValidatorFn=XS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get valid(){return this.status===tu}get invalid(){return this.status===Ih}get pending(){return this.status==Tl}get disabled(){return this.status===nu}get enabled(){return this.status!==nu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._rawValidators=i,this._composedValidatorFn=qS(i)}setAsyncValidators(i){this._rawAsyncValidators=i,this._composedAsyncValidatorFn=XS(i)}addValidators(i){this.setValidators(LS(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(LS(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(US(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(US(i,this._rawAsyncValidators))}hasValidator(i){return Rh(this._rawValidators,i)}hasAsyncValidator(i){return Rh(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){this.touched=!0,this._parent&&!i.onlySelf&&this._parent.markAsTouched(i)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(i=>i.markAllAsTouched())}markAsUntouched(i={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}markAsDirty(i={}){this.pristine=!1,this._parent&&!i.onlySelf&&this._parent.markAsDirty(i)}markAsPristine(i={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}markAsPending(i={}){this.status=Tl,!1!==i.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!i.onlySelf&&this._parent.markAsPending(i)}disable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=nu,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this._updateValue(),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=tu,this._forEachChild(n=>{n.enable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(i){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(i){this._parent=i}updateValueAndValidity(i={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tu||this.status===Tl)&&this._runAsyncValidator(i.emitEvent)),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(i)}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nu:tu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i){if(this.asyncValidator){this.status=Tl,this._hasOwnPendingAsyncValidator=!0;const e=AS(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:i})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(!1!==e.emitEvent)}get(i){return function LF(t,i,e){if(null==i||(Array.isArray(i)||(i=i.split(e)),Array.isArray(i)&&0===i.length))return null;let n=t;return i.forEach(r=>{n=cv(n)?n.controls.hasOwnProperty(r)?n.controls[r]:null:(t=>t instanceof HF)(n)&&n.at(r)||null}),n}(this,i,".")}getError(i,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(i)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?nu:this.errors?Ih:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tl)?Tl:this._anyControlsHaveStatus(Ih)?Ih:tu}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i={}){this.pristine=!this._anyControlsDirty(),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}_updateTouched(i={}){this.touched=this._anyControlsTouched(),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}_isBoxedValue(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){Vh(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class dv extends uv{constructor(i=null,e,n){super(sv(e),lv(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vh(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(i)?i.value:i)}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=this.defaultValue,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){av(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){av(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){this._isBoxedValue(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}}class Oh extends uv{constructor(i,e,n){super(sv(e),lv(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,n={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){ZS(this,i),Object.keys(i).forEach(n=>{KS(this,n),this.controls[n].setValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(Object.keys(i).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((n,r)=>{n.reset(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,n)=>(i[n]=QS(e),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&i(n,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&i(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(i,e,n)=>((e.enabled||this.disabled)&&(i[n]=e.value),i))}_reduceChildren(i,e){let n=i;return this._forEachChild((r,a)=>{n=e(n,r,a)}),n}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class HF extends uv{constructor(i,e,n){super(sv(e),lv(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[i]}push(i,e={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(i,e,n={}){this.controls.splice(i,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,e={}){ZS(this,i),i.forEach((n,r)=>{KS(this,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(i.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i=[],e={}){this._forEachChild((n,r)=>{n.reset(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(i=>QS(i))}clear(i={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_syncPendingControls(){let i=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){this.controls.forEach((e,n)=>{i(e,n)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(e=>e.enabled&&i(e))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_allControlsDisabled(){for(const i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}}const GF={provide:ur,useExisting:hn(()=>ru)},iu=(()=>Promise.resolve(null))();let ru=(()=>{class t extends ur{constructor(e,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new ot,this.form=new Oh({},Km(e),Zm(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){iu.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),eu(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){iu.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){iu.then(()=>{const n=this._findContainer(e.path),r=new Oh({});$S(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){iu.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){iu.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,WS(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(P(Ji,10),P(Lo,10))},t.\u0275dir=je({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&V("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[In([GF]),Sn]}),t})();const jF={provide:Uo,useExisting:hn(()=>Dl)},tT=(()=>Promise.resolve(null))();let Dl=(()=>{class t extends Uo{constructor(e,n,r,a,o){super(),this._changeDetectorRef=o,this.control=new dv,this._registered=!1,this.update=new ot,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=rv(0,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),iv(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){eu(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){tT.then(()=>{var n;this.control.setValue(e,{emitViewToModelChange:!1}),null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;tT.then(()=>{var a;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(e){return this._parent?kh(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(P(ur,9),P(Ji,10),P(Lo,10),P(na,10),P(Or,8))},t.\u0275dir=je({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[In([jF]),Sn,Ui]}),t})(),Nh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const $F={provide:na,useExisting:hn(()=>hv),multi:!0};let hv=(()=>{class t extends cs{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,n){1&e&&V("input",function(a){return n.onChange(a.target.value)})("blur",function(){return n.onTouched()})},features:[In([$F]),Sn]}),t})(),nT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({}),t})();const fv=new qt("NgModelWithFormControlWarning"),QF={provide:ur,useExisting:hn(()=>Fh)};let Fh=(()=>{class t extends ur{constructor(e,n){super(),this.validators=e,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ot,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Eh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return eu(n,e),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){Ah(e.control||null,e,!1),av(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,WS(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(Ah(n||null,e),YS(r)&&(eu(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);$S(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function NF(t,i){return Eh(t,i)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nv(this.form,this),this._oldForm&&Eh(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(P(Ji,10),P(Lo,10))},t.\u0275dir=je({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,n){1&e&&V("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[In([QF]),Sn,Ui]}),t})();const JF={provide:Uo,useExisting:hn(()=>mv)};let mv=(()=>{class t extends Uo{constructor(e,n,r,a,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new ot,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=rv(0,a)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),iv(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return kh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(P(ur,13),P(Ji,10),P(Lo,10),P(na,10),P(fv,8))},t.\u0275dir=je({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[In([JF]),Sn,Ui]}),t})();const e3={provide:na,useExisting:hn(()=>Bh),multi:!0};function sT(t,i){return null==t?`${i}`:(i&&"object"==typeof i&&(i="Object"),`${t}: ${i}`.slice(0,50))}let Bh=(()=>{class t extends cs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=sT(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){const n=function t3(t){return t.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,n){1&e&&V("change",function(a){return n.onChange(a.target.value)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[In([e3]),Sn]}),t})(),lT=(()=>{class t{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(sT(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(P(Tn),P(Zr),P(Bh,9))},t.\u0275dir=je({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const n3={provide:na,useExisting:hn(()=>vv),multi:!0};function cT(t,i){return null==t?`${i}`:("string"==typeof i&&(i=`'${i}'`),i&&"object"==typeof i&&(i="Object"),`${t}: ${i}`.slice(0,50))}let vv=(()=>{class t extends cs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let n;if(this.value=e,Array.isArray(e)){const r=e.map(a=>this._getOptionId(a));n=(a,o)=>{a._setSelected(r.indexOf(o.toString())>-1)}}else n=(r,a)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{const r=[],a=n.selectedOptions;if(void 0!==a){const o=a;for(let s=0;s<o.length;s++){const c=this._getOptionValue(o[s].value);r.push(c)}}else{const o=n.options;for(let s=0;s<o.length;s++){const l=o[s];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){const n=function r3(t){return t.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,n){1&e&&V("change",function(a){return n.onChange(a.target)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[In([n3]),Sn]}),t})(),uT=(()=>{class t{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(cT(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(cT(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(P(Tn),P(Zr),P(vv,9))},t.\u0275dir=je({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function dT(t){return"number"==typeof t?t:parseInt(t,10)}let ds=(()=>{class t{constructor(){this._validator=Dh}ngOnChanges(e){if(this.inputName in e){const n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Dh,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,features:[Ui]}),t})();const d3={provide:Ji,useExisting:hn(()=>_v),multi:!0};let _v=(()=>{class t extends ds{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>dT(e),this.createValidator=e=>function RS(t){return i=>function Bo(t){return null==t||0===t.length}(i.value)||!yS(i.value)?null:i.value.length<t?{minlength:{requiredLength:t,actualLength:i.value.length}}:null}(e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&xn("minlength",n._enabled?n.minlength:null)},inputs:{minlength:"minlength"},features:[In([d3]),Sn]}),t})();const h3={provide:Ji,useExisting:hn(()=>au),multi:!0};let au=(()=>{class t extends ds{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>dT(e),this.createValidator=e=>function xS(t){return i=>yS(i.value)&&i.value.length>t?{maxlength:{requiredLength:t,actualLength:i.value.length}}:null}(e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&xn("maxlength",n._enabled?n.maxlength:null)},inputs:{maxlength:"maxlength"},features:[In([h3]),Sn]}),t})(),bT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[nT]]}),t})(),_T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[bT]}),t})(),p3=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:fv,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[bT]}),t})();function Pt(...t){return Fi(t,oc(t))}class oi extends be{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const e=super._subscribe(i);return!e.closed&&i.next(this._value),e}getValue(){const{hasError:i,thrownError:e,_value:n}=this;if(i)throw e;return this._throwIfClosed(),n}next(i){super.next(this._value=i)}}function yT(t,i,e){t?$r(e,t,i):i()}const Lh=H(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ou(...t){return function m3(){return ac(1)}()(Fi(t,oc(t)))}function wT(t){return new Be(i=>{Mi(t()).subscribe(i)})}function CT(){return Ct((t,i)=>{let e=null;t._refCount++;const n=$t(i,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),i.unsubscribe()});t.subscribe(n),n.closed||(e=t.connect())})}class v3 extends Be{constructor(i,e){super(),this.source=i,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,An(i)&&(this.lift=i.lift)}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){const i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:i}=this;this._subject=this._connection=null,null==i||i.unsubscribe()}connect(){let i=this._connection;if(!i){i=this._connection=new he;const e=this.getSubject();i.add(this.source.subscribe($t(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),i.closed&&(this._connection=null,i=he.EMPTY)}return i}refCount(){return CT()(this)}}function po(t,i){return Ct((e,n)=>{let r=null,a=0,o=!1;const s=()=>o&&!r&&n.complete();e.subscribe($t(n,l=>{null==r||r.unsubscribe();let c=0;const u=a++;Mi(t(l,u)).subscribe(r=$t(n,d=>n.next(i?i(l,d,u,c++):d),()=>{r=null,s()}))},()=>{o=!0,s()}))})}function b3(t,i,e,n,r){return(a,o)=>{let s=e,l=i,c=0;a.subscribe($t(o,u=>{const d=c++;l=s?t(l,u,d):(s=!0,u),n&&o.next(l)},r&&(()=>{s&&o.next(l),o.complete()})))}}function ST(t,i){return Ct(b3(t,i,arguments.length>=2,!0))}function ji(t,i){return Ct((e,n)=>{let r=0;e.subscribe($t(n,a=>t.call(i,a,r++)&&n.next(a)))})}function Ho(t){return Ct((i,e)=>{let a,n=null,r=!1;n=i.subscribe($t(e,void 0,void 0,o=>{a=Mi(t(o,Ho(t)(i))),n?(n.unsubscribe(),n=null,a.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,a.subscribe(e))})}function su(t,i){return X(i)?gi(t,i,1):gi(t,1)}function wv(t){return t<=0?()=>ca:Ct((i,e)=>{let n=[];i.subscribe($t(e,r=>{n.push(r),t<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function TT(t=_3){return Ct((i,e)=>{let n=!1;i.subscribe($t(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(t())))})}function _3(){return new Lh}function DT(t){return Ct((i,e)=>{let n=!1;i.subscribe($t(e,r=>{n=!0,e.next(r)},()=>{n||e.next(t),e.complete()}))})}function Rl(t,i){const e=arguments.length>=2;return n=>n.pipe(t?ji((r,a)=>t(r,a,n)):Fe,Bi(1),e?DT(i):TT(()=>new Lh))}function er(t,i,e){const n=X(t)||i||e?{next:t,error:i,complete:e}:t;return n?Ct((r,a)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let s=!0;r.subscribe($t(a,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),a.next(l)},()=>{var l;s=!1,null===(l=n.complete)||void 0===l||l.call(n),a.complete()},l=>{var c;s=!1,null===(c=n.error)||void 0===c||c.call(n,l),a.error(l)},()=>{var l,c;s&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):Fe}class go{constructor(i,e){this.id=i,this.url=e}}class Cv extends go{constructor(i,e,n="imperative",r=null){super(i,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lu extends go{constructor(i,e,n){super(i,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class RT extends go{constructor(i,e,n){super(i,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class C3 extends go{constructor(i,e,n){super(i,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class S3 extends go{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class T3 extends go{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D3 extends go{constructor(i,e,n,r,a){super(i,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class R3 extends go{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class x3 extends go{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xT{constructor(i){this.route=i}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class MT{constructor(i){this.route=i}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class M3{constructor(i){this.snapshot=i}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class k3{constructor(i){this.snapshot=i}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class A3{constructor(i){this.snapshot=i}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P3{constructor(i){this.snapshot=i}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kT{constructor(i,e,n){this.routerEvent=i,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Qt="primary";class E3{constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e[0]:e}return null}getAll(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function xl(t){return new E3(t)}const AT="ngNavigationCancelingError";function Sv(t){const i=Error("NavigationCancelingError: "+t);return i[AT]=!0,i}function V3(t,i,e){const n=e.path.split("/");if(n.length>t.length||"full"===e.pathMatch&&(i.hasChildren()||n.length<t.length))return null;const r={};for(let a=0;a<n.length;a++){const o=n[a],s=t[a];if(o.startsWith(":"))r[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:t.slice(0,n.length),posParams:r}}function za(t,i){const e=t?Object.keys(t):void 0,n=i?Object.keys(i):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!PT(t[r],i[r]))return!1;return!0}function PT(t,i){if(Array.isArray(t)&&Array.isArray(i)){if(t.length!==i.length)return!1;const e=[...t].sort(),n=[...i].sort();return e.every((r,a)=>n[a]===r)}return t===i}function ET(t){return Array.prototype.concat.apply([],t)}function IT(t){return t.length>0?t[t.length-1]:null}function $i(t,i){for(const e in t)t.hasOwnProperty(e)&&i(t[e],e)}function ja(t){return Lg(t)?t:Oc(t)?Fi(Promise.resolve(t)):Pt(t)}const F3={exact:function NT(t,i,e){if(!fs(t.segments,i.segments)||!Hh(t.segments,i.segments,e)||t.numberOfChildren!==i.numberOfChildren)return!1;for(const n in i.children)if(!t.children[n]||!NT(t.children[n],i.children[n],e))return!1;return!0},subset:FT},VT={exact:function B3(t,i){return za(t,i)},subset:function L3(t,i){return Object.keys(i).length<=Object.keys(t).length&&Object.keys(i).every(e=>PT(t[e],i[e]))},ignored:()=>!0};function OT(t,i,e){return F3[e.paths](t.root,i.root,e.matrixParams)&&VT[e.queryParams](t.queryParams,i.queryParams)&&!("exact"===e.fragment&&t.fragment!==i.fragment)}function FT(t,i,e){return BT(t,i,i.segments,e)}function BT(t,i,e,n){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!fs(r,e)||i.hasChildren()||!Hh(r,e,n))}if(t.segments.length===e.length){if(!fs(t.segments,e)||!Hh(t.segments,e,n))return!1;for(const r in i.children)if(!t.children[r]||!FT(t.children[r],i.children[r],n))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(fs(t.segments,r)&&Hh(t.segments,r,n)&&t.children[Qt])&&BT(t.children[Qt],i,a,n)}}function Hh(t,i,e){return i.every((n,r)=>VT[e](t[r].parameters,n.parameters))}class hs{constructor(i,e,n){this.root=i,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xl(this.queryParams)),this._queryParamMap}toString(){return G3.serialize(this)}}class tn{constructor(i,e){this.segments=i,this.children=e,this.parent=null,$i(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gh(this)}}class cu{constructor(i,e){this.path=i,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=xl(this.parameters)),this._parameterMap}toString(){return zT(this)}}function fs(t,i){return t.length===i.length&&t.every((e,n)=>e.path===i[n].path)}class LT{}class UT{parse(i){const e=new K3(i);return new hs(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(i){const e=`/${uu(i.root,!0)}`,n=function $3(t){const i=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(r=>`${zh(e)}=${zh(r)}`).join("&"):`${zh(e)}=${zh(n)}`}).filter(e=>!!e);return i.length?`?${i.join("&")}`:""}(i.queryParams);return`${e}${n}${"string"==typeof i.fragment?`#${function z3(t){return encodeURI(t)}(i.fragment)}`:""}`}}const G3=new UT;function Gh(t){return t.segments.map(i=>zT(i)).join("/")}function uu(t,i){if(!t.hasChildren())return Gh(t);if(i){const e=t.children[Qt]?uu(t.children[Qt],!1):"",n=[];return $i(t.children,(r,a)=>{a!==Qt&&n.push(`${a}:${uu(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function H3(t,i){let e=[];return $i(t.children,(n,r)=>{r===Qt&&(e=e.concat(i(n,r)))}),$i(t.children,(n,r)=>{r!==Qt&&(e=e.concat(i(n,r)))}),e}(t,(n,r)=>r===Qt?[uu(t.children[Qt],!1)]:[`${r}:${uu(n,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Qt]?`${Gh(t)}/${e[0]}`:`${Gh(t)}/(${e.join("//")})`}}function HT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zh(t){return HT(t).replace(/%3B/gi,";")}function Tv(t){return HT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jh(t){return decodeURIComponent(t)}function GT(t){return jh(t.replace(/\+/g,"%20"))}function zT(t){return`${Tv(t.path)}${function j3(t){return Object.keys(t).map(i=>`;${Tv(i)}=${Tv(t[i])}`).join("")}(t.parameters)}`}const W3=/^[^\/()?;=#]+/;function $h(t){const i=t.match(W3);return i?i[0]:""}const q3=/^[^=?&#]+/,Y3=/^[^&#]+/;class K3{constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const i={};if(this.consumeOptional("?"))do{this.parseQueryParam(i)}while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(i.length>0||Object.keys(e).length>0)&&(n[Qt]=new tn(i,e)),n}parseSegment(){const i=$h(this.remaining);if(""===i&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(i),new cu(jh(i),this.parseMatrixParams())}parseMatrixParams(){const i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){const e=$h(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=$h(this.remaining);r&&(n=r,this.capture(n))}i[jh(e)]=jh(n)}parseQueryParam(i){const e=function X3(t){const i=t.match(q3);return i?i[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function Q3(t){const i=t.match(Y3);return i?i[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=GT(e),a=GT(n);if(i.hasOwnProperty(r)){let o=i[r];Array.isArray(o)||(o=[o],i[r]=o),o.push(a)}else i[r]=a}parseParens(i){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=$h(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a;n.indexOf(":")>-1?(a=n.substr(0,n.indexOf(":")),this.capture(a),this.capture(":")):i&&(a=Qt);const o=this.parseChildren();e[a]=1===Object.keys(o).length?o[Qt]:new tn([],o),this.consumeOptional("//")}return e}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return!!this.peekStartsWith(i)&&(this.remaining=this.remaining.substring(i.length),!0)}capture(i){if(!this.consumeOptional(i))throw new Error(`Expected "${i}".`)}}class jT{constructor(i){this._root=i}get root(){return this._root.value}parent(i){const e=this.pathFromRoot(i);return e.length>1?e[e.length-2]:null}children(i){const e=Dv(i,this._root);return e?e.children.map(n=>n.value):[]}firstChild(i){const e=Dv(i,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(i){const e=Rv(i,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==i)}pathFromRoot(i){return Rv(i,this._root).map(e=>e.value)}}function Dv(t,i){if(t===i.value)return i;for(const e of i.children){const n=Dv(t,e);if(n)return n}return null}function Rv(t,i){if(t===i.value)return[i];for(const e of i.children){const n=Rv(t,e);if(n.length)return n.unshift(i),n}return[]}class mo{constructor(i,e){this.value=i,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ml(t){const i={};return t&&t.children.forEach(e=>i[e.value.outlet]=e),i}class $T extends jT{constructor(i,e){super(i),this.snapshot=e,xv(this,i)}toString(){return this.snapshot.toString()}}function WT(t,i){const e=function Z3(t,i){const o=new Wh([],{},{},"",{},Qt,i,null,t.root,-1,{});return new XT("",new mo(o,[]))}(t,i),n=new oi([new cu("",{})]),r=new oi({}),a=new oi({}),o=new oi({}),s=new oi(""),l=new kl(n,r,o,s,a,Qt,i,e.root);return l.snapshot=e.root,new $T(new mo(l,[]),e)}class kl{constructor(i,e,n,r,a,o,s,l){this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Nt(i=>xl(i)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Nt(i=>xl(i)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qT(t,i="emptyOnly"){const e=t.pathFromRoot;let n=0;if("always"!==i)for(n=e.length-1;n>=1;){const r=e[n],a=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(a.component)break;n--}}return function J3(t){return t.reduce((i,e)=>({params:Object.assign(Object.assign({},i.params),e.params),data:Object.assign(Object.assign({},i.data),e.data),resolve:Object.assign(Object.assign({},i.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(n))}class Wh{constructor(i,e,n,r,a,o,s,l,c,u,d){this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class XT extends jT{constructor(i,e){super(e),this.url=i,xv(this,e)}toString(){return YT(this._root)}}function xv(t,i){i.value._routerState=t,i.children.forEach(e=>xv(t,e))}function YT(t){const i=t.children.length>0?` { ${t.children.map(YT).join(", ")} } `:"";return`${t.value}${i}`}function Mv(t){if(t.snapshot){const i=t.snapshot,e=t._futureSnapshot;t.snapshot=e,za(i.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),i.fragment!==e.fragment&&t.fragment.next(e.fragment),za(i.params,e.params)||t.params.next(e.params),function O3(t,i){if(t.length!==i.length)return!1;for(let e=0;e<t.length;++e)if(!za(t[e],i[e]))return!1;return!0}(i.url,e.url)||t.url.next(e.url),za(i.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function kv(t,i){const e=za(t.params,i.params)&&function U3(t,i){return fs(t,i)&&t.every((e,n)=>za(e.parameters,i[n].parameters))}(t.url,i.url);return e&&!(!t.parent!=!i.parent)&&(!t.parent||kv(t.parent,i.parent))}function du(t,i,e){if(e&&t.shouldReuseRoute(i.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=i.value;const r=function tB(t,i,e){return i.children.map(n=>{for(const r of e.children)if(t.shouldReuseRoute(n.value,r.value.snapshot))return du(t,n,r);return du(t,n)})}(t,i,e);return new mo(n,r)}{if(t.shouldAttach(i.value)){const a=t.retrieve(i.value);if(null!==a){const o=a.route;return o.value._futureSnapshot=i.value,o.children=i.children.map(s=>du(t,s)),o}}const n=function nB(t){return new kl(new oi(t.url),new oi(t.params),new oi(t.queryParams),new oi(t.fragment),new oi(t.data),t.outlet,t.component,t)}(i.value),r=i.children.map(a=>du(t,a));return new mo(n,r)}}function qh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function hu(t){return"object"==typeof t&&null!=t&&t.outlets}function Av(t,i,e,n,r){let a={};return n&&$i(n,(o,s)=>{a[s]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new hs(e.root===t?i:QT(e.root,t,i),a,r)}function QT(t,i,e){const n={};return $i(t.children,(r,a)=>{n[a]=r===i?e:QT(r,i,e)}),new tn(t.segments,n)}class KT{constructor(i,e,n){if(this.isAbsolute=i,this.numberOfDoubleDots=e,this.commands=n,i&&n.length>0&&qh(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(hu);if(r&&r!==IT(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pv{constructor(i,e,n){this.segmentGroup=i,this.processChildren=e,this.index=n}}function ZT(t,i,e){if(t||(t=new tn([],{})),0===t.segments.length&&t.hasChildren())return Xh(t,i,e);const n=function lB(t,i,e){let n=0,r=i;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(n>=e.length)return a;const o=t.segments[r],s=e[n];if(hu(s))break;const l=`${s}`,c=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!eD(l,c,o))return a;n+=2}else{if(!eD(l,{},o))return a;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(t,i,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){const a=new tn(t.segments.slice(0,n.pathIndex),{});return a.children[Qt]=new tn(t.segments.slice(n.pathIndex),t.children),Xh(a,0,r)}return n.match&&0===r.length?new tn(t.segments,{}):n.match&&!t.hasChildren()?Ev(t,i,e):n.match?Xh(t,0,r):Ev(t,i,e)}function Xh(t,i,e){if(0===e.length)return new tn(t.segments,{});{const n=function sB(t){return hu(t[0])?t[0].outlets:{[Qt]:t}}(e),r={};return $i(n,(a,o)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[o]=ZT(t.children[o],i,a))}),$i(t.children,(a,o)=>{void 0===n[o]&&(r[o]=a)}),new tn(t.segments,r)}}function Ev(t,i,e){const n=t.segments.slice(0,i);let r=0;for(;r<e.length;){const a=e[r];if(hu(a)){const l=cB(a.outlets);return new tn(n,l)}if(0===r&&qh(e[0])){n.push(new cu(t.segments[i].path,JT(e[0]))),r++;continue}const o=hu(a)?a.outlets[Qt]:`${a}`,s=r<e.length-1?e[r+1]:null;o&&s&&qh(s)?(n.push(new cu(o,JT(s))),r+=2):(n.push(new cu(o,{})),r++)}return new tn(n,{})}function cB(t){const i={};return $i(t,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(i[n]=Ev(new tn([],{}),0,e))}),i}function JT(t){const i={};return $i(t,(e,n)=>i[n]=`${e}`),i}function eD(t,i,e){return t==e.path&&za(i,e.parameters)}class dB{constructor(i,e,n,r){this.routeReuseStrategy=i,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(i){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,i),Mv(this.futureState.root),this.activateChildRoutes(e,n,i)}deactivateChildRoutes(i,e,n){const r=Ml(e);i.children.forEach(a=>{const o=a.value.outlet;this.deactivateRoutes(a,r[o],n),delete r[o]}),$i(r,(a,o)=>{this.deactivateRouteAndItsChildren(a,n)})}deactivateRoutes(i,e,n){const r=i.value,a=e?e.value:null;if(r===a)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(i,e,o.children)}else this.deactivateChildRoutes(i,e,n);else a&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(i,e){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,e):this.deactivateRouteAndOutlet(i,e)}detachAndStoreRouteSubtree(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,a=Ml(i);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);if(n&&n.outlet){const o=n.outlet.detach(),s=n.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:o,route:i,contexts:s})}}deactivateRouteAndOutlet(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,a=Ml(i);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(i,e,n){const r=Ml(e);i.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],n),this.forwardEvent(new P3(a.value.snapshot))}),i.children.length&&this.forwardEvent(new k3(i.value.snapshot))}activateRoutes(i,e,n){const r=i.value,a=e?e.value:null;if(Mv(r),r===a)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(i,e,o.children)}else this.activateChildRoutes(i,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),Mv(s.route.value),this.activateChildRoutes(i,null,o.children)}else{const s=function hB(t){for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(i,null,o.children)}}else this.activateChildRoutes(i,null,n)}}class Iv{constructor(i,e){this.routes=i,this.module=e}}function Go(t){return"function"==typeof t}function ps(t){return t instanceof hs}const fu=Symbol("INITIAL_VALUE");function pu(){return po(t=>function yv(...t){const i=oc(t),e=ed(t),{args:n,keys:r}=vS(t);if(0===n.length)return Fi([],i);const a=new Be(function g3(t,i,e=Fe){return n=>{yT(i,()=>{const{length:r}=t,a=new Array(r);let o=r,s=r;for(let l=0;l<r;l++)yT(i,()=>{const c=Fi(t[l],i);let u=!1;c.subscribe($t(n,d=>{a[l]=d,u||(u=!0,s--),s||n.next(e(a.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,i,r?o=>bS(r,o):Fe));return e?a.pipe(Qm(e)):a}(t.map(i=>i.pipe(Bi(1),function Uh(...t){const i=oc(t);return Ct((e,n)=>{(i?ou(t,e,i):ou(t,e)).subscribe(n)})}(fu)))).pipe(ST((i,e)=>{let n=!1;return e.reduce((r,a,o)=>r!==fu?r:(a===fu&&(n=!0),n||!1!==a&&o!==e.length-1&&!ps(a)?r:a),i)},fu),ji(i=>i!==fu),Nt(i=>ps(i)?i:!0===i),Bi(1)))}class bB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new gu,this.attachRef=null}}class gu{constructor(){this.contexts=new Map}onChildOutletCreated(i,e){const n=this.getOrCreateContext(i);n.outlet=e,this.contexts.set(i,n)}onChildOutletDestroyed(i){const e=this.getContext(i);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let e=this.getContext(i);return e||(e=new bB,this.contexts.set(i,e)),e}getContext(i){return this.contexts.get(i)||null}}let Vv=(()=>{class t{constructor(e,n,r,a,o){this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.name=a||Qt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),s=this.parentContexts.getOrCreateContext(this.name).children,l=new _B(e,s,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(P(gu),P(Jr),P(as),function es(t){return function Kx(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const e=t.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const a=e[r];if(Lb(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(a===i)return e[r+1];r+=2}}}return null}(ki(),t)}("name"),P(Or))},t.\u0275dir=je({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class _B{constructor(i,e,n){this.route=i,this.childContexts=e,this.parent=n}get(i,e){return i===kl?this.route:i===gu?this.childContexts:this.parent.get(i,e)}}let tD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ft({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&D(0,"router-outlet")},directives:[Vv],encapsulation:2}),t})();function nD(t,i=""){for(let e=0;e<t.length;e++){const n=t[e];yB(n,wB(i,n))}}function yB(t,i){t.children&&nD(t.children,i)}function wB(t,i){return i?t||i.path?t&&!i.path?`${t}/`:!t&&i.path?i.path:`${t}/${i.path}`:"":t}function Ov(t){const i=t.children&&t.children.map(Ov),e=i?Object.assign(Object.assign({},t),{children:i}):Object.assign({},t);return!e.component&&(i||e.loadChildren)&&e.outlet&&e.outlet!==Qt&&(e.component=tD),e}function ia(t){return t.outlet||Qt}function iD(t,i){const e=t.filter(n=>ia(n)===i);return e.push(...t.filter(n=>ia(n)!==i)),e}const rD={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Yh(t,i,e){var n;if(""===i.path)return"full"===i.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},rD):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(i.matcher||V3)(e,t,i);if(!a)return Object.assign({},rD);const o={};$i(a.posParams,(l,c)=>{o[c]=l.path});const s=a.consumed.length>0?Object.assign(Object.assign({},o),a.consumed[a.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:s,positionalParamSegments:null!==(n=a.posParams)&&void 0!==n?n:{}}}function Qh(t,i,e,n,r="corrected"){if(e.length>0&&function TB(t,i,e){return e.some(n=>Kh(t,i,n)&&ia(n)!==Qt)}(t,e,n)){const o=new tn(i,function SB(t,i,e,n){const r={};r[Qt]=n,n._sourceSegment=t,n._segmentIndexShift=i.length;for(const a of e)if(""===a.path&&ia(a)!==Qt){const o=new tn([],{});o._sourceSegment=t,o._segmentIndexShift=i.length,r[ia(a)]=o}return r}(t,i,n,new tn(e,t.children)));return o._sourceSegment=t,o._segmentIndexShift=i.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function DB(t,i,e){return e.some(n=>Kh(t,i,n))}(t,e,n)){const o=new tn(t.segments,function CB(t,i,e,n,r,a){const o={};for(const s of n)if(Kh(t,e,s)&&!r[ia(s)]){const l=new tn([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===a?t.segments.length:i.length,o[ia(s)]=l}return Object.assign(Object.assign({},r),o)}(t,i,e,n,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=i.length,{segmentGroup:o,slicedSegments:e}}const a=new tn(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=i.length,{segmentGroup:a,slicedSegments:e}}function Kh(t,i,e){return(!(t.hasChildren()||i.length>0)||"full"!==e.pathMatch)&&""===e.path}function aD(t,i,e,n){return!!(ia(t)===n||n!==Qt&&Kh(i,e,t))&&("**"===t.path||Yh(i,t,e).matched)}function oD(t,i,e){return 0===i.length&&!t.children[e]}class mu{constructor(i){this.segmentGroup=i||null}}class sD{constructor(i){this.urlTree=i}}function Zh(t){return new Be(i=>i.error(new mu(t)))}function lD(t){return new Be(i=>i.error(new sD(t)))}function RB(t){return new Be(i=>i.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class kB{constructor(i,e,n,r,a){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=i.get(co)}apply(){const i=Qh(this.urlTree.root,[],[],this.config).segmentGroup,e=new tn(i.segments,i.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Qt).pipe(Nt(a=>this.createUrlTree(Nv(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ho(a=>{if(a instanceof sD)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof mu?this.noMatchError(a):a}))}match(i){return this.expandSegmentGroup(this.ngModule,this.config,i.root,Qt).pipe(Nt(r=>this.createUrlTree(Nv(r),i.queryParams,i.fragment))).pipe(Ho(r=>{throw r instanceof mu?this.noMatchError(r):r}))}noMatchError(i){return new Error(`Cannot match any routes. URL Segment: '${i.segmentGroup}'`)}createUrlTree(i,e,n){const r=i.segments.length>0?new tn([],{[Qt]:i}):i;return new hs(r,e,n)}expandSegmentGroup(i,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(i,e,n).pipe(Nt(a=>new tn([],a))):this.expandSegment(i,n,e,n.segments,r,!0)}expandChildren(i,e,n){const r=[];for(const a of Object.keys(n.children))"primary"===a?r.unshift(a):r.push(a);return Fi(r).pipe(su(a=>{const o=n.children[a],s=iD(e,a);return this.expandSegmentGroup(i,s,o,a).pipe(Nt(l=>({segment:l,outlet:a})))}),ST((a,o)=>(a[o.outlet]=o.segment,a),{}),function y3(t,i){const e=arguments.length>=2;return n=>n.pipe(t?ji((r,a)=>t(r,a,n)):Fe,wv(1),e?DT(i):TT(()=>new Lh))}())}expandSegment(i,e,n,r,a,o){return Fi(n).pipe(su(s=>this.expandSegmentAgainstRoute(i,e,n,s,r,a,o).pipe(Ho(c=>{if(c instanceof mu)return Pt(null);throw c}))),Rl(s=>!!s),Ho((s,l)=>{if(s instanceof Lh||"EmptyError"===s.name){if(oD(e,r,a))return Pt(new tn([],{}));throw new mu(e)}throw s}))}expandSegmentAgainstRoute(i,e,n,r,a,o,s){return aD(r,e,a,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(i,e,r,a,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o):Zh(e):Zh(e)}expandSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(i,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(i,e,n,r){const a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?lD(a):this.lineralizeSegments(n,a).pipe(gi(o=>{const s=new tn(o,{});return this.expandSegment(i,s,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o){const{matched:s,consumedSegments:l,lastChild:c,positionalParamSegments:u}=Yh(e,r,a);if(!s)return Zh(e);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?lD(d):this.lineralizeSegments(r,d).pipe(gi(m=>this.expandSegment(i,e,n,m.concat(a.slice(c)),o,!1)))}matchSegmentAgainstRoute(i,e,n,r,a){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Pt(n._loadedConfig):this.configLoader.load(i.injector,n)).pipe(Nt(m=>(n._loadedConfig=m,new tn(r,{})))):Pt(new tn(r,{}));const{matched:o,consumedSegments:s,lastChild:l}=Yh(e,n,r);if(!o)return Zh(e);const c=r.slice(l);return this.getChildConfig(i,n,r).pipe(gi(d=>{const m=d.module,v=d.routes,{segmentGroup:b,slicedSegments:y}=Qh(e,s,c,v),T=new tn(b.segments,b.children);if(0===y.length&&T.hasChildren())return this.expandChildren(m,v,T).pipe(Nt(Y=>new tn(s,Y)));if(0===v.length&&0===y.length)return Pt(new tn(s,{}));const k=ia(n)===a;return this.expandSegment(m,T,v,y,k?Qt:a,!0).pipe(Nt(R=>new tn(s.concat(R.segments),R.children)))}))}getChildConfig(i,e,n){return e.children?Pt(new Iv(e.children,i)):e.loadChildren?void 0!==e._loadedConfig?Pt(e._loadedConfig):this.runCanLoadGuards(i.injector,e,n).pipe(gi(r=>r?this.configLoader.load(i.injector,e).pipe(Nt(a=>(e._loadedConfig=a,a))):function xB(t){return new Be(i=>i.error(Sv(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Pt(new Iv([],i))}runCanLoadGuards(i,e,n){const r=e.canLoad;return r&&0!==r.length?Pt(r.map(o=>{const s=i.get(o);let l;if(function pB(t){return t&&Go(t.canLoad)}(s))l=s.canLoad(e,n);else{if(!Go(s))throw new Error("Invalid CanLoad guard");l=s(e,n)}return ja(l)})).pipe(pu(),er(o=>{if(!ps(o))return;const s=Sv(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw s.url=o,s}),Nt(o=>!0===o)):Pt(!0)}lineralizeSegments(i,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Pt(n);if(r.numberOfChildren>1||!r.children[Qt])return RB(i.redirectTo);r=r.children[Qt]}}applyRedirectCommands(i,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),i,n)}applyRedirectCreatreUrlTree(i,e,n,r){const a=this.createSegmentGroup(i,e.root,n,r);return new hs(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(i,e){const n={};return $i(i,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const s=r.substring(1);n[a]=e[s]}else n[a]=r}),n}createSegmentGroup(i,e,n,r){const a=this.createSegments(i,e.segments,n,r);let o={};return $i(e.children,(s,l)=>{o[l]=this.createSegmentGroup(i,s,n,r)}),new tn(a,o)}createSegments(i,e,n,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(i,a,r):this.findOrReturn(a,n))}findPosParam(i,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${i}'. Cannot find '${e.path}'.`);return r}findOrReturn(i,e){let n=0;for(const r of e){if(r.path===i.path)return e.splice(n),r;n++}return i}}function Nv(t){const i={};for(const n of Object.keys(t.children)){const a=Nv(t.children[n]);(a.segments.length>0||a.hasChildren())&&(i[n]=a)}return function AB(t){if(1===t.numberOfChildren&&t.children[Qt]){const i=t.children[Qt];return new tn(t.segments.concat(i.segments),i.children)}return t}(new tn(t.segments,i))}class cD{constructor(i){this.path=i,this.route=this.path[this.path.length-1]}}class Jh{constructor(i,e){this.component=i,this.route=e}}function EB(t,i,e){const n=t._root;return vu(n,i?i._root:null,e,[n.value])}function ef(t,i,e){const n=function VB(t){if(!t)return null;for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(i);return(n?n.module.injector:e).get(t)}function vu(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=Ml(i);return t.children.forEach(o=>{(function OB(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,o=i?i.value:null,s=e?e.getContext(t.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){const l=function NB(t,i,e){if("function"==typeof e)return e(t,i);switch(e){case"pathParamsChange":return!fs(t.url,i.url);case"pathParamsOrQueryParamsChange":return!fs(t.url,i.url)||!za(t.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kv(t,i)||!za(t.queryParams,i.queryParams);default:return!kv(t,i)}}(o,a,a.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new cD(n)):(a.data=o.data,a._resolvedData=o._resolvedData),vu(t,i,a.component?s?s.children:null:e,n,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new Jh(s.outlet.component,o))}else o&&bu(i,s,r),r.canActivateChecks.push(new cD(n)),vu(t,null,a.component?s?s.children:null:e,n,r)})(o,a[o.value.outlet],e,n.concat([o.value]),r),delete a[o.value.outlet]}),$i(a,(o,s)=>bu(o,e.getContext(s),r)),r}function bu(t,i,e){const n=Ml(t),r=t.value;$i(n,(a,o)=>{bu(a,r.component?i?i.children.getContext(o):null:i,e)}),e.canDeactivateChecks.push(new Jh(r.component&&i&&i.outlet&&i.outlet.isActivated?i.outlet.component:null,r))}class $B{}function uD(t){return new Be(i=>i.error(t))}class qB{constructor(i,e,n,r,a,o){this.rootComponentType=i,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}recognize(){const i=Qh(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,i,Qt);if(null===e)return null;const n=new Wh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new mo(n,e),a=new XT(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(i){const e=i.value,n=qT(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),i.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(i,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(i,e):this.processSegment(i,e,e.segments,n)}processChildren(i,e){const n=[];for(const a of Object.keys(e.children)){const o=e.children[a],s=iD(i,a),l=this.processSegmentGroup(s,o,a);if(null===l)return null;n.push(...l)}const r=dD(n);return function XB(t){t.sort((i,e)=>i.value.outlet===Qt?-1:e.value.outlet===Qt?1:i.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(i,e,n,r){for(const a of i){const o=this.processSegmentAgainstRoute(a,e,n,r);if(null!==o)return o}return oD(e,n,r)?[]:null}processSegmentAgainstRoute(i,e,n,r){if(i.redirectTo||!aD(i,e,n,r))return null;let a,o=[],s=[];if("**"===i.path){const v=n.length>0?IT(n).parameters:{};a=new Wh(n,v,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pD(i),ia(i),i.component,i,hD(e),fD(e)+n.length,gD(i))}else{const v=Yh(e,i,n);if(!v.matched)return null;o=v.consumedSegments,s=n.slice(v.lastChild),a=new Wh(o,v.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,pD(i),ia(i),i.component,i,hD(e),fD(e)+o.length,gD(i))}const l=function YB(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(i),{segmentGroup:c,slicedSegments:u}=Qh(e,o,s,l.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const v=this.processChildren(l,c);return null===v?null:[new mo(a,v)]}if(0===l.length&&0===u.length)return[new mo(a,[])];const d=ia(i)===r,m=this.processSegment(l,c,u,d?Qt:r);return null===m?null:[new mo(a,m)]}}function QB(t){const i=t.value.routeConfig;return i&&""===i.path&&void 0===i.redirectTo}function dD(t){const i=[],e=new Set;for(const n of t){if(!QB(n)){i.push(n);continue}const r=i.find(a=>n.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):i.push(n)}for(const n of e){const r=dD(n.children);i.push(new mo(n.value,r))}return i.filter(n=>!e.has(n))}function hD(t){let i=t;for(;i._sourceSegment;)i=i._sourceSegment;return i}function fD(t){let i=t,e=i._segmentIndexShift?i._segmentIndexShift:0;for(;i._sourceSegment;)i=i._sourceSegment,e+=i._segmentIndexShift?i._segmentIndexShift:0;return e-1}function pD(t){return t.data||{}}function gD(t){return t.resolve||{}}function mD(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Fv(t){return po(i=>{const e=t(i);return e?Fi(e).pipe(Nt(()=>i)):Pt(i)})}class r5 extends class i5{shouldDetach(i){return!1}store(i,e){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,e){return i.routeConfig===e.routeConfig}}{}const Bv=new qt("ROUTES");class vD{constructor(i,e,n,r){this.injector=i,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(i,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(Nt(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=a.create(i);return new Iv(ET(o.injector.get(Bv,void 0,Ft.Self|Ft.Optional)).map(Ov),o)}),Ho(a=>{throw e._loader$=void 0,a}));return e._loader$=new v3(r,()=>new be).pipe(CT()),e._loader$}loadModuleFactory(i){return ja(i()).pipe(gi(e=>e instanceof Iw?Pt(e):Fi(this.compiler.compileModuleAsync(e))))}}class o5{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,e){return i}}function s5(t){throw t}function l5(t,i,e){return i.parse("/")}function bD(t,i){return Pt(null)}const c5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},u5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nr=(()=>{class t{constructor(e,n,r,a,o,s,l){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=a,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new be,this.errorHandler=s5,this.malformedUriErrorHandler=l5,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:bD,afterPreactivation:bD},this.urlHandlingStrategy=new o5,this.routeReuseStrategy=new r5,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(co),this.console=o.get(gC);const d=o.get(Vn);this.isNgZoneEnabled=d instanceof Vn&&Vn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function N3(){return new hs(new tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new vD(o,s,m=>this.triggerEvent(new xT(m)),m=>this.triggerEvent(new MT(m))),this.routerState=WT(this.currentUrlTree,this.rootComponentType),this.transitions=new oi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(ji(r=>0!==r.id),Nt(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),po(r=>{let a=!1,o=!1;return Pt(r).pipe(er(s=>{this.currentNavigation={id:s.id,initialUrl:s.currentRawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),po(s=>{const l=this.browserUrlTree.toString(),c=!this.navigated||s.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return tf(s.source)&&(this.browserUrlTree=s.extractedUrl),Pt(s).pipe(po(d=>{const m=this.transitions.getValue();return n.next(new Cv(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),m!==this.transitions.getValue()?ca:Promise.resolve(d)}),function PB(t,i,e,n){return po(r=>function MB(t,i,e,n,r){return new kB(t,i,e,n,r).apply()}(t,i,e,r.extractedUrl,n).pipe(Nt(a=>Object.assign(Object.assign({},r),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),er(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function KB(t,i,e,n,r){return gi(a=>function WB(t,i,e,n,r="emptyOnly",a="legacy"){try{const o=new qB(t,i,e,n,r,a).recognize();return null===o?uD(new $B):Pt(o)}catch(o){return uD(o)}}(t,i,a.urlAfterRedirects,e(a.urlAfterRedirects),n,r).pipe(Nt(o=>Object.assign(Object.assign({},a),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),er(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const v=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(v,d)}this.browserUrlTree=d.urlAfterRedirects}const m=new S3(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);n.next(m)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:m,extractedUrl:v,source:b,restoredState:y,extras:T}=s,k=new Cv(m,this.serializeUrl(v),b,y);n.next(k);const C=WT(v,this.rootComponentType).snapshot;return Pt(Object.assign(Object.assign({},s),{targetSnapshot:C,urlAfterRedirects:v,extras:Object.assign(Object.assign({},T),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=s.rawUrl,s.resolve(null),ca}),Fv(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:m,replaceUrl:v}}=s;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!m,replaceUrl:!!v})}),er(s=>{const l=new T3(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot);this.triggerEvent(l)}),Nt(s=>Object.assign(Object.assign({},s),{guards:EB(s.targetSnapshot,s.currentSnapshot,this.rootContexts)})),function FB(t,i){return gi(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:o}}=e;return 0===o.length&&0===a.length?Pt(Object.assign(Object.assign({},e),{guardsResult:!0})):function BB(t,i,e,n){return Fi(t).pipe(gi(r=>function jB(t,i,e,n,r){const a=i&&i.routeConfig?i.routeConfig.canDeactivate:null;return a&&0!==a.length?Pt(a.map(s=>{const l=ef(s,i,r);let c;if(function vB(t){return t&&Go(t.canDeactivate)}(l))c=ja(l.canDeactivate(t,i,e,n));else{if(!Go(l))throw new Error("Invalid CanDeactivate guard");c=ja(l(t,i,e,n))}return c.pipe(Rl())})).pipe(pu()):Pt(!0)}(r.component,r.route,e,i,n)),Rl(r=>!0!==r,!0))}(o,n,r,t).pipe(gi(s=>s&&function fB(t){return"boolean"==typeof t}(s)?function LB(t,i,e,n){return Fi(i).pipe(su(r=>ou(function HB(t,i){return null!==t&&i&&i(new M3(t)),Pt(!0)}(r.route.parent,n),function UB(t,i){return null!==t&&i&&i(new A3(t)),Pt(!0)}(r.route,n),function zB(t,i,e){const n=i[i.length-1],a=i.slice(0,i.length-1).reverse().map(o=>function IB(t){const i=t.routeConfig?t.routeConfig.canActivateChild:null;return i&&0!==i.length?{node:t,guards:i}:null}(o)).filter(o=>null!==o).map(o=>wT(()=>Pt(o.guards.map(l=>{const c=ef(l,o.node,e);let u;if(function mB(t){return t&&Go(t.canActivateChild)}(c))u=ja(c.canActivateChild(n,t));else{if(!Go(c))throw new Error("Invalid CanActivateChild guard");u=ja(c(n,t))}return u.pipe(Rl())})).pipe(pu())));return Pt(a).pipe(pu())}(t,r.path,e),function GB(t,i,e){const n=i.routeConfig?i.routeConfig.canActivate:null;if(!n||0===n.length)return Pt(!0);const r=n.map(a=>wT(()=>{const o=ef(a,i,e);let s;if(function gB(t){return t&&Go(t.canActivate)}(o))s=ja(o.canActivate(i,t));else{if(!Go(o))throw new Error("Invalid CanActivate guard");s=ja(o(i,t))}return s.pipe(Rl())}));return Pt(r).pipe(pu())}(t,r.route,e))),Rl(r=>!0!==r,!0))}(n,a,t,i):Pt(s)),Nt(s=>Object.assign(Object.assign({},e),{guardsResult:s})))})}(this.ngModule.injector,s=>this.triggerEvent(s)),er(s=>{if(ps(s.guardsResult)){const c=Sv(`Redirecting to "${this.serializeUrl(s.guardsResult)}"`);throw c.url=s.guardsResult,c}const l=new D3(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.triggerEvent(l)}),ji(s=>!!s.guardsResult||(this.restoreHistory(s),this.cancelNavigationTransition(s,""),!1)),Fv(s=>{if(s.guards.canActivateChecks.length)return Pt(s).pipe(er(l=>{const c=new R3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),po(l=>{let c=!1;return Pt(l).pipe(function ZB(t,i){return gi(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return Pt(e);let a=0;return Fi(r).pipe(su(o=>function JB(t,i,e,n){return function e5(t,i,e,n){const r=mD(t);if(0===r.length)return Pt({});const a={};return Fi(r).pipe(gi(o=>function t5(t,i,e,n){const r=ef(t,i,n);return ja(r.resolve?r.resolve(i,e):r(i,e))}(t[o],i,e,n).pipe(er(s=>{a[o]=s}))),wv(1),gi(()=>mD(a).length===r.length?Pt(a):ca))}(t._resolve,t,i,n).pipe(Nt(a=>(t._resolvedData=a,t.data=Object.assign(Object.assign({},t.data),qT(t,e).resolve),null)))}(o.route,n,t,i)),er(()=>a++),wv(1),gi(o=>a===r.length?Pt(e):ca))})}(this.paramsInheritanceStrategy,this.ngModule.injector),er({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),er(l=>{const c=new x3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),Fv(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:m,replaceUrl:v}}=s;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!m,replaceUrl:!!v})}),Nt(s=>{const l=function eB(t,i,e){const n=du(t,i._root,e?e._root:void 0);return new $T(n,i)}(this.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return Object.assign(Object.assign({},s),{targetRouterState:l})}),er(s=>{this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects)}),((t,i,e)=>Nt(n=>(new dB(i,n.targetRouterState,n.currentRouterState,e).activate(t),n)))(this.rootContexts,this.routeReuseStrategy,s=>this.triggerEvent(s)),er({next(){a=!0},complete(){a=!0}}),function w3(t){return Ct((i,e)=>{try{i.subscribe(e)}finally{e.add(t)}})}(()=>{var s;a||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(s=this.currentNavigation)||void 0===s?void 0:s.id)===r.id&&(this.currentNavigation=null)}),Ho(s=>{if(o=!0,function I3(t){return t&&t[AT]}(s)){const l=ps(s.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new RT(r.id,this.serializeUrl(r.extractedUrl),s.message);n.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(s.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||tf(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new C3(r.id,this.serializeUrl(r.extractedUrl),s);n.next(l);try{r.resolve(this.errorHandler(s))}catch(c){r.reject(c)}}return ca}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{var r;const a={replaceUrl:!0},o=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}const s=this.parseUrl(e.url);this.scheduleNavigation(s,n,o,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){nD(e),this.config=e.map(Ov),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:a,fragment:o,queryParamsHandling:s,preserveFragment:l}=n,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(s){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}return null!==d&&(d=this.removeEmptyProps(d)),function iB(t,i,e,n,r){if(0===e.length)return Av(i.root,i.root,i,n,r);const a=function rB(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new KT(!0,0,t);let i=0,e=!1;const n=t.reduce((r,a,o)=>{if("object"==typeof a&&null!=a){if(a.outlets){const s={};return $i(a.outlets,(l,c)=>{s[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:s}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===o?(a.split("/").forEach((s,l)=>{0==l&&"."===s||(0==l&&""===s?e=!0:".."===s?i++:""!=s&&r.push(s))}),r):[...r,a]},[]);return new KT(e,i,n)}(e);if(a.toRoot())return Av(i.root,new tn([],{}),i,n,r);const o=function aB(t,i,e){if(t.isAbsolute)return new Pv(i.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new Pv(a,a===i.root,0)}const n=qh(t.commands[0])?0:1;return function oB(t,i,e){let n=t,r=i,a=e;for(;a>r;){if(a-=r,n=n.parent,!n)throw new Error("Invalid number of '../'");r=n.segments.length}return new Pv(n,!1,r-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+n,t.numberOfDoubleDots)}(a,i,t),s=o.processChildren?Xh(o.segmentGroup,o.index,a.commands):ZT(o.segmentGroup,o.index,a.commands);return Av(o.segmentGroup,s,i,n,r)}(c,this.currentUrlTree,e,d,null!=u?u:null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=ps(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function d5(t){for(let i=0;i<t.length;i++){const e=t[i];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${i}`)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?Object.assign({},c5):!1===n?Object.assign({},u5):n,ps(e))return OT(this.currentUrlTree,e,r);const a=this.parseUrl(e);return OT(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const a=e[r];return null!=a&&(n[r]=a),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new lu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,a,o){var s,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=tf(n)&&u&&!tf(u.source),m=u.rawUrl.toString()===e.toString(),v=u.id===(null===(s=this.currentNavigation)||void 0===s?void 0:s.id);if(d&&m&&v)return Promise.resolve(!0);let y,T,k;o?(y=o.resolve,T=o.reject,k=o.promise):k=new Promise((Y,Q)=>{y=Y,T=Q});const C=++this.navigationId;let R;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),R=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):R=0,this.setTransition({id:C,targetPageId:R,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:y,reject:T,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(Y=>Promise.reject(Y))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},n.extras.state),this.generateNgRouterState(n.id,n.targetPageId));this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(e,n=!1){var r,a;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n){const r=new RT(e.id,this.serializeUrl(e.extractedUrl),n);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return t.\u0275fac=function(e){Og()},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();function tf(t){return"imperative"!==t}class _D{}class yD{preload(i,e){return Pt(null)}}let wD=(()=>{class t{constructor(e,n,r,a){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=new vD(r,n,l=>e.triggerEvent(new xT(l)),l=>e.triggerEvent(new MT(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(ji(e=>e instanceof lu),su(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(co);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const a of n)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children));return Fi(r).pipe(ac(),Nt(a=>{}))}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>(n._loadedConfig?Pt(n._loadedConfig):this.loader.load(e.injector,n)).pipe(gi(a=>(n._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Le(Nr),Le(oh),Le(vi),Le(_D))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})(),Hv=(()=>{class t{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Cv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof lu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof kT&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new kT(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){Og()},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();const gs=new qt("ROUTER_CONFIGURATION"),CD=new qt("ROUTER_FORROOT_GUARD"),g5=[Am,{provide:LT,useClass:UT},{provide:Nr,useFactory:function y5(t,i,e,n,r,a,o={},s,l){const c=new Nr(null,t,i,e,n,r,ET(a));return s&&(c.urlHandlingStrategy=s),l&&(c.routeReuseStrategy=l),function w5(t,i){t.errorHandler&&(i.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(i.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(i.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(i.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(i.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(i.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(i.canceledNavigationResolution=t.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,m;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(m=console.groupEnd)||void 0===m||m.call(console)}),c},deps:[LT,gu,Am,vi,oh,Bv,gs,[class a5{},new Va],[class n5{},new Va]]},gu,{provide:kl,useFactory:function C5(t){return t.routerState.root},deps:[Nr]},wD,yD,class p5{preload(i,e){return e().pipe(Ho(()=>Pt(null)))}},{provide:gs,useValue:{enableTracing:!1}}];function m5(){return new wC("Router",Nr)}let SD=(()=>{class t{constructor(e,n){}static forRoot(e,n){return{ngModule:t,providers:[g5,TD(e),{provide:CD,useFactory:_5,deps:[[Nr,new Va,new $s]]},{provide:gs,useValue:n||{}},{provide:wl,useFactory:b5,deps:[ls,[new Cc(km),new Va],gs]},{provide:Hv,useFactory:v5,deps:[Nr,xN,gs]},{provide:_D,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:yD},{provide:wC,multi:!0,useFactory:m5},[Gv,{provide:rh,multi:!0,useFactory:S5,deps:[Gv]},{provide:DD,useFactory:T5,deps:[Gv]},{provide:pC,multi:!0,useExisting:DD}]]}}static forChild(e){return{ngModule:t,providers:[TD(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Le(CD,8),Le(Nr,8))},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({}),t})();function v5(t,i,e){return e.scrollOffset&&i.setOffset(e.scrollOffset),new Hv(t,i,e)}function b5(t,i,e={}){return e.useHash?new dO(t,i):new HC(t,i)}function _5(t){return"guarded"}function TD(t){return[{provide:nM,multi:!0,useValue:t},{provide:Bv,multi:!0,useValue:t}]}let Gv=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new be}appInitializer(){return this.injector.get(lO,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let n=null;const r=new Promise(s=>n=s),a=this.injector.get(Nr),o=this.injector.get(gs);return"disabled"===o.initialNavigation?(a.setUpLocationChangeListener(),n(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Pt(null):(this.initNavigation=!0,n(!0),this.resultOfPreactivationDone),a.initialNavigation()):n(!0),r})}bootstrapListener(e){const n=this.injector.get(gs),r=this.injector.get(wD),a=this.injector.get(Hv),o=this.injector.get(Nr),s=this.injector.get(os);e===s.components[0]&&(("enabledNonBlocking"===n.initialNavigation||void 0===n.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),a.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(Le(vi))},t.\u0275prov=rt({token:t,factory:t.\u0275fac}),t})();function S5(t){return t.appInitializer.bind(t)}function T5(t){return t.bootstrapListener.bind(t)}const DD=new qt("Router Initializer"),R5=[];let x5=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[SD.forRoot(R5)],SD]}),t})();function RD(t,i,e,n,r,a,o){try{var s=t[a](o),l=s.value}catch(c){return void e(c)}s.done?i(l):Promise.resolve(l).then(n,r)}function Sr(t){return function(){var i=this,e=arguments;return new Promise(function(n,r){var a=t.apply(i,e);function o(l){RD(a,n,r,o,s,"next",l)}function s(l){RD(a,n,r,o,s,"throw",l)}o(void 0)})}}var Xt=(()=>{return(t=Xt||(Xt={}))[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",Xt;var t})();const dr=new class M5{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(i){this._typeMetadatas.has(i.target)||this._typeMetadatas.set(i.target,new Map),this._typeMetadatas.get(i.target).set(i.propertyName,i)}addTransformMetadata(i){this._transformMetadatas.has(i.target)||this._transformMetadatas.set(i.target,new Map),this._transformMetadatas.get(i.target).has(i.propertyName)||this._transformMetadatas.get(i.target).set(i.propertyName,[]),this._transformMetadatas.get(i.target).get(i.propertyName).push(i)}addExposeMetadata(i){this._exposeMetadatas.has(i.target)||this._exposeMetadatas.set(i.target,new Map),this._exposeMetadatas.get(i.target).set(i.propertyName,i)}addExcludeMetadata(i){this._excludeMetadatas.has(i.target)||this._excludeMetadatas.set(i.target,new Map),this._excludeMetadatas.get(i.target).set(i.propertyName,i)}findTransformMetadatas(i,e,n){return this.findMetadatas(this._transformMetadatas,i,e).filter(r=>!r.options||!0===r.options.toClassOnly&&!0===r.options.toPlainOnly||(!0===r.options.toClassOnly?n===Xt.CLASS_TO_CLASS||n===Xt.PLAIN_TO_CLASS:!0!==r.options.toPlainOnly||n===Xt.CLASS_TO_PLAIN))}findExcludeMetadata(i,e){return this.findMetadata(this._excludeMetadatas,i,e)}findExposeMetadata(i,e){return this.findMetadata(this._exposeMetadatas,i,e)}findExposeMetadataByCustomName(i,e){return this.getExposedMetadatas(i).find(n=>n.options&&n.options.name===e)}findTypeMetadata(i,e){return this.findMetadata(this._typeMetadatas,i,e)}getStrategy(i){const e=this._excludeMetadatas.get(i),n=e&&e.get(void 0),r=this._exposeMetadatas.get(i),a=r&&r.get(void 0);return n&&a||!n&&!a?"none":n?"excludeAll":"exposeAll"}getExposedMetadatas(i){return this.getMetadata(this._exposeMetadatas,i)}getExcludedMetadatas(i){return this.getMetadata(this._excludeMetadatas,i)}getExposedProperties(i,e){return this.getExposedMetadatas(i).filter(n=>!n.options||!0===n.options.toClassOnly&&!0===n.options.toPlainOnly||(!0===n.options.toClassOnly?e===Xt.CLASS_TO_CLASS||e===Xt.PLAIN_TO_CLASS:!0!==n.options.toPlainOnly||e===Xt.CLASS_TO_PLAIN)).map(n=>n.propertyName)}getExcludedProperties(i,e){return this.getExcludedMetadatas(i).filter(n=>!n.options||!0===n.options.toClassOnly&&!0===n.options.toPlainOnly||(!0===n.options.toClassOnly?e===Xt.CLASS_TO_CLASS||e===Xt.PLAIN_TO_CLASS:!0!==n.options.toPlainOnly||e===Xt.CLASS_TO_PLAIN)).map(n=>n.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(i,e){const n=i.get(e);let r;n&&(r=Array.from(n.values()).filter(o=>void 0!==o.propertyName));const a=[];for(const o of this.getAncestors(e)){const s=i.get(o);if(s){const l=Array.from(s.values()).filter(c=>void 0!==c.propertyName);a.push(...l)}}return a.concat(r||[])}findMetadata(i,e,n){const r=i.get(e);if(r){const a=r.get(n);if(a)return a}for(const a of this.getAncestors(e)){const o=i.get(a);if(o){const s=o.get(n);if(s)return s}}}findMetadatas(i,e,n){const r=i.get(e);let a;r&&(a=r.get(n));const o=[];for(const s of this.getAncestors(e)){const l=i.get(s);l&&l.has(n)&&o.push(...l.get(n))}return o.slice().reverse().concat((a||[]).slice().reverse())}getAncestors(i){if(!i)return[];if(!this._ancestorsMap.has(i)){const e=[];for(let n=Object.getPrototypeOf(i.prototype.constructor);void 0!==n.prototype;n=Object.getPrototypeOf(n.prototype.constructor))e.push(n);this._ancestorsMap.set(i,e)}return this._ancestorsMap.get(i)}};function it(t,i={}){return function(e,n){const r=Reflect.getMetadata("design:type",e,n);dr.addTypeMetadata({target:e.constructor,propertyName:n,reflectedType:r,typeFunction:t,options:i})}}var L=(()=>{return(t=L||(L={}))[t.Horse=0]="Horse",t[t.Cheetah=1]="Cheetah",t[t.Hare=2]="Hare",t[t.Monkey=3]="Monkey",t[t.Goat=4]="Goat",t[t.Gecko=5]="Gecko",t[t.Dolphin=6]="Dolphin",t[t.Shark=7]="Shark",t[t.Octopus=8]="Octopus",t[t.Penguin=9]="Penguin",t[t.Caribou=10]="Caribou",t[t.Salamander=11]="Salamander",t[t.Fox=12]="Fox",t[t.Warthog=13]="Warthog",t[t.Whale=14]="Whale",L;var t})(),z=(()=>{return(t=z||(z={}))[t.Flatland=0]="Flatland",t[t.Mountain=1]="Mountain",t[t.Ocean=2]="Ocean",t[t.Tundra=3]="Tundra",t[t.Volcanic=4]="Volcanic",z;var t})();class oe{constructor(i,e,n){this.name=i,this.amount=e,void 0!==n&&(this.itemType=n)}makeCopy(i){var e=new oe("",0);return e.name=JSON.parse(JSON.stringify(i.name)),e.amount=JSON.parse(JSON.stringify(i.amount)),e.itemType=JSON.parse(JSON.stringify(i.itemType)),e}}var $=(()=>{return(t=$||($={}))[t.Animal=0]="Animal",t[t.Food=1]="Food",t[t.Training=2]="Training",t[t.Ability=3]="Ability",t[t.Specialty=4]="Specialty",t[t.Equipment=5]="Equipment",t[t.Resources=6]="Resources",t[t.Progression=7]="Progression",t[t.Other=8]="Other",t[t.Consumable=9]="Consumable",$;var t})();class $a{constructor(){this.totalRewards=0,this.rewardsObtained=0,this.rewards=[]}}ze([it(()=>oe),Ke("design:type",Array)],$a.prototype,"rewards",void 0);class Pl{constructor(){this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.noviceTrack=new $a,this.noviceTrack.totalRewards=12;var i=50;this.noviceTrack.rewards.push(new oe("Coins",i,$.Resources)),this.noviceTrack.rewards.push(new oe("Bonus Breed XP Gain From Training",1,$.Other)),this.noviceTrack.rewards.push(new oe("Coins",i,$.Resources)),this.noviceTrack.rewards.push(new oe("Bonus Breed XP Gain From Free Races",1,$.Other)),this.noviceTrack.rewards.push(new oe("Coins",i,$.Resources)),this.noviceTrack.rewards.push(new oe("Bonus Breed XP Gain From Training",1,$.Other)),this.noviceTrack.rewards.push(new oe("Coins",i,$.Resources)),this.noviceTrack.rewards.push(new oe("Bonus Breed XP Gain From Free Races",1,$.Other)),this.noviceTrack.rewards.push(new oe("Coins",i,$.Resources)),this.noviceTrack.rewards.push(new oe("Bonus Breed XP Gain From Training",1,$.Other)),this.noviceTrack.rewards.push(new oe("Coins",i,$.Resources)),this.noviceTrack.rewards.push(new oe("Bonus Breed XP Gain From Free Races",1,$.Other)),this.intermediateTrack=new $a,this.intermediateTrack.totalRewards=12,this.intermediateTrack.rewards.push(new oe("Coins",200,$.Resources)),this.intermediateTrack.rewards.push(new oe("Bonus Breed XP Gain From Training",2,$.Other)),this.intermediateTrack.rewards.push(new oe("Medals",1,$.Resources)),this.intermediateTrack.rewards.push(new oe("Diminishing Returns per Facility Level",2,$.Other)),this.intermediateTrack.rewards.push(new oe("Training Time Reduction",1,$.Other)),this.intermediateTrack.rewards.push(new oe("Bonus Breed XP Gain From Circuit Races",5,$.Other)),this.intermediateTrack.rewards.push(new oe("Coins",200,$.Resources)),this.intermediateTrack.rewards.push(new oe("Bonus Breed XP Gain From Free Races",1,$.Other)),this.intermediateTrack.rewards.push(new oe("Medals",1,$.Resources)),this.intermediateTrack.rewards.push(new oe("Bonus Breed XP Gain From Training",2,$.Other)),this.intermediateTrack.rewards.push(new oe("Training Time Reduction",1,$.Other)),this.intermediateTrack.rewards.push(new oe("Diminishing Returns per Facility Level",3,$.Other)),this.masterTrack=new $a,this.masterTrack.totalRewards=12,this.masterTrack.rewards.push(new oe("Bonus Breed XP Gain From Free Races",5,$.Other)),this.masterTrack.rewards.push(new oe("Diminishing Returns per Facility Level",2,$.Other)),this.masterTrack.rewards.push(new oe("Training Time Reduction",1,$.Other)),this.masterTrack.rewards.push(new oe("Coins",1e3,$.Resources)),this.masterTrack.rewards.push(new oe("Bonus Breed XP Gain From Training",3,$.Other)),this.masterTrack.rewards.push(new oe("Bonus Talents",2,$.Other)),this.masterTrack.rewards.push(new oe("Training Time Reduction",1,$.Other)),this.masterTrack.rewards.push(new oe("Coins",1e3,$.Resources)),this.masterTrack.rewards.push(new oe("Orb Pendant",1,$.Other)),this.masterTrack.rewards.push(new oe("Diminishing Returns per Facility Level",3,$.Other)),this.masterTrack.rewards.push(new oe("Training Time Reduction",1,$.Other)),this.masterTrack.rewards.push(new oe("Bonus Talents",3,$.Other))}getTotalRewardCount(){return this.noviceTrack.totalRewards+this.intermediateTrack.totalRewards+this.masterTrack.totalRewards}getTotalRewardsObtained(){return this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalRewardsRemaining(){return this.getTotalRewardCount()-this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalTrainingTrackBonusBreedXpFromFreeRaces(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=4&&(i+=this.noviceTrack.rewards[3].amount),this.noviceTrack.rewardsObtained>=8&&(i+=this.noviceTrack.rewards[7].amount),this.noviceTrack.rewardsObtained>=12&&(i+=this.noviceTrack.rewards[11].amount),this.intermediateTrack.rewardsObtained>=8&&(i+=this.intermediateTrack.rewards[7].amount),this.masterTrack.rewardsObtained>=1&&(i+=this.masterTrack.rewards[0].amount),i)}getTotalTrainingTrackBonusBreedXpFromCircuitRaces(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=6&&(i+=this.intermediateTrack.rewards[5].amount),i)}getTotalTrainingTrackBonusBreedXpFromTraining(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=2&&(i+=this.noviceTrack.rewards[1].amount),this.noviceTrack.rewardsObtained>=6&&(i+=this.noviceTrack.rewards[5].amount),this.noviceTrack.rewardsObtained>=10&&(i+=this.noviceTrack.rewards[9].amount),this.intermediateTrack.rewardsObtained>=2&&(i+=this.intermediateTrack.rewards[1].amount),this.intermediateTrack.rewardsObtained>=10&&(i+=this.intermediateTrack.rewards[9].amount),this.masterTrack.rewardsObtained>=5&&(i+=this.masterTrack.rewards[4].amount),i)}getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=4&&(i+=this.intermediateTrack.rewards[3].amount),this.intermediateTrack.rewardsObtained>=12&&(i+=this.intermediateTrack.rewards[11].amount),this.masterTrack.rewardsObtained>=2&&(i+=this.masterTrack.rewards[1].amount),this.masterTrack.rewardsObtained>=10&&(i+=this.masterTrack.rewards[9].amount),i)}getTotalTrainingTrackBonusTrainingTimeReduction(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=5&&(i+=this.intermediateTrack.rewards[4].amount),this.intermediateTrack.rewardsObtained>=11&&(i+=this.intermediateTrack.rewards[10].amount),this.masterTrack.rewardsObtained>=3&&(i+=this.masterTrack.rewards[2].amount),this.masterTrack.rewardsObtained>=7&&(i+=this.masterTrack.rewards[6].amount),this.masterTrack.rewardsObtained>=11&&(i+=this.masterTrack.rewards[10].amount),i)}getTotalTrainingTrackBonusTalents(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.masterTrack.rewardsObtained>=6&&(i+=this.masterTrack.rewards[5].amount),this.masterTrack.rewardsObtained>=12&&(i+=this.masterTrack.rewards[11].amount),i)}}ze([it(()=>$a),Ke("design:type",$a)],Pl.prototype,"noviceTrack",void 0),ze([it(()=>$a),Ke("design:type",$a)],Pl.prototype,"intermediateTrack",void 0),ze([it(()=>$a),Ke("design:type",$a)],Pl.prototype,"masterTrack",void 0);class Ee{constructor(i,e,n,r,a,o){this.defaultStaminaModifier=5,this.defaultMaxSpeedModifier=.3,this.defaultAccelerationModifier=.1,this.defaultPowerModifier=1,this.defaultFocusModifier=5,this.defaultAdaptabilityModifier=5,this.defaultBurstDistanceModifier=1,this.diminishingReturnsDefaultStatThreshold=20,void 0!==i&&(this.topSpeed=i),void 0!==e&&(this.acceleration=e),void 0!==n&&(this.endurance=n),void 0!==r&&(this.power=r),void 0!==a&&(this.focus=a),void 0!==o&&(this.adaptability=o)}makeCopy(i){var e=new Ee;return e.topSpeed=i.topSpeed,e.acceleration=i.acceleration,e.endurance=i.endurance,e.power=i.power,e.focus=i.focus,e.adaptability=i.adaptability,e.stamina=i.stamina,e.maxSpeedMs=i.maxSpeedMs,e.accelerationMs=i.accelerationMs,e.powerMs=i.powerMs,e.focusMs=i.focusMs,e.adaptabilityMs=i.adaptabilityMs,e.burstChance=i.burstChance,e.burstDistance=i.burstDistance,e}calculateStamina(i,e,n){return null==i&&(i=this.defaultStaminaModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.endurance<=e?this.endurance*i*n:(e*i+(this.endurance-e)*(i*this.calculateDiminishingReturns(this.endurance-e)))*n}calculateMaxSpeed(i,e,n){return null==i&&(i=this.defaultMaxSpeedModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.topSpeed<=e?this.topSpeed*i*n:(e*i+(this.topSpeed-e)*(i*this.calculateDiminishingReturns(this.topSpeed-e)))*n}calculateTrueAcceleration(i,e,n){return null==i&&(i=this.defaultAccelerationModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.acceleration<=e?this.acceleration*i*n:(e*i+(this.acceleration-e)*(i*this.calculateDiminishingReturns(this.acceleration-e)))*n}calculateTruePower(i,e,n){return null==i&&(i=this.defaultPowerModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.power<=e?this.power*i*n:(e*i+(this.power-e)*(i*this.calculateDiminishingReturns(this.power-e)))*n}calculateTrueFocus(i,e,n){return null==i&&(i=this.defaultFocusModifier),null==n&&(n=1),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.focus<=e?this.focus*i*n:(e*i+(this.focus-e)*(i*this.calculateDiminishingReturns(this.focus-e)))*n}calculateTrueAdaptability(i,e,n){return null==i&&(i=this.defaultAdaptabilityModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.adaptability<=e?this.adaptability*i*n:(e*i+(this.adaptability-e)*(i*this.calculateDiminishingReturns(this.adaptability-e)))*n}calculateBurstChance(i,e,n){var r=this.focus,a=this.adaptability;return null!=e&&(r*=e/this.focusMs),null!=n&&(a*=n/this.adaptabilityMs),(a+r)*(1+i/4)/1e3*100}calculateBurstDistance(i,e,n){null==e&&(e=this.defaultBurstDistanceModifier);var r=this.power;return null!=n&&(r*=n/this.powerMs),r*(1+i/4)*e}topSpeedPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}accelerationPopover(i){return"Every stat point increases acceleration by "+i.toFixed(3)+"m/s up to diminishing returns."}endurancePopover(i){return"Every stat point increases stamina by "+i.toFixed(3)+" up to diminishing returns."}powerPopover(i){return"Every stat point increases ability efficiency by "+i.toFixed(3)+"% up to diminishing returns."}focusPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}adaptabilityPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}maxSpeedMsPopover(){return"This is the max speed this animal can go during a race."}accelerationMsPopover(){return"This is how quickly this animal will gain speed."}staminaPopover(){return"Your animal loses stamina while racing. If its stamina reaches 0, it will slow down for a period of time while its stamina recharges."}powerMsPopover(){return"This increases the efficiency of your animal's ability."}focusMsPopover(){return"This is the average distance your animal can go without losing focus, causing them to stop."}adaptabilityMsPopover(){return"This is the average distance your animal can go without stumbling, causing them to slow down."}burstChancePopover(){return"Every time you enter a path, you have the chance to enter burst mode. This is your chance per 1000 meters that you will burst. Increase by improving Focus and Adaptability."}burstDistancePopover(){return"This is how far you can go while bursting. Increase by improving Power."}calculateDiminishingReturns(i){return 1/i**.6}addCurrentRacingStats(i){this.maxSpeedMs+=i.topSpeed,this.accelerationMs+=i.acceleration,this.stamina+=i.endurance,this.powerMs+=i.power,this.focusMs+=i.focus,this.adaptabilityMs+=i.adaptability}subtractCurrentRacingStats(i){this.maxSpeedMs-=i.topSpeed,this.accelerationMs-=i.acceleration,this.stamina-=i.endurance,this.powerMs-=i.power,this.focusMs-=i.focus,this.adaptabilityMs-=i.adaptability}multiplyCurrentRacingStats(i){this.maxSpeedMs*=i.topSpeed,this.accelerationMs*=i.acceleration,this.stamina*=i.endurance,this.powerMs*=i.power,this.focusMs*=i.focus,this.adaptabilityMs*=i.adaptability}divideCurrentRacingStats(i){this.maxSpeedMs/=i.topSpeed,this.accelerationMs/=i.acceleration,this.stamina/=i.endurance,this.powerMs/=i.power,this.focusMs/=i.focus,this.adaptabilityMs/=i.adaptability}}var ht=(()=>{return(t=ht||(ht={}))[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large",ht;var t})();class zo{constructor(){this.trainingTimeRemaining=7200,this.timeTrained=0,this.isAvailable=!1,this.purchasePrice=50}makeCopy(i){var e=new zo;return e.affectedStatRatios=JSON.parse(JSON.stringify(i.affectedStatRatios)),e.facilitySize=JSON.parse(JSON.stringify(i.facilitySize)),e.isAvailable=JSON.parse(JSON.stringify(i.isAvailable)),e.purchasePrice=JSON.parse(JSON.stringify(i.purchasePrice)),e.statGain=JSON.parse(JSON.stringify(i.statGain)),e.timeToComplete=JSON.parse(JSON.stringify(i.timeToComplete)),e.timeTrained=JSON.parse(JSON.stringify(i.timeTrained)),e.trainingCourseType=JSON.parse(JSON.stringify(i.trainingCourseType)),e.trainingName=JSON.parse(JSON.stringify(i.trainingName)),e.trainingType=JSON.parse(JSON.stringify(i.trainingType)),e}getFacilitySize(){return ht[this.facilitySize]}getStatGainDescription(){var i="";return this.affectedStatRatios.topSpeed>0&&(i+="+"+this.statGain*this.affectedStatRatios.topSpeed+" Speed\n"),this.affectedStatRatios.acceleration>0&&(i+="+"+this.statGain*this.affectedStatRatios.acceleration+" Acceleration\n"),this.affectedStatRatios.endurance>0&&(i+="+"+this.statGain*this.affectedStatRatios.endurance+" Endurance\n"),this.affectedStatRatios.focus>0&&(i+="+"+this.statGain*this.affectedStatRatios.focus+" Focus\n"),this.affectedStatRatios.power>0&&(i+="+"+this.statGain*this.affectedStatRatios.power+" Power\n"),this.affectedStatRatios.adaptability>0&&(i+="+"+this.statGain*this.affectedStatRatios.adaptability+" Adaptability\n"),i}}ze([it(()=>Ee),Ke("design:type",Ee)],zo.prototype,"affectedStatRatios",void 0);class Tt{constructor(){this.abilityLevel=1,this.abilityXp=0,this.abilityMaxXp=50}}var _e=(()=>{return(t=_e||(_e={}))[t.topSpeed=0]="topSpeed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",_e;var t})();class fn{constructor(i,e,n,r,a){void 0!==i&&(this.traitName=i),void 0!==e&&(this.requiredLevel=e),void 0!==n&&(this.researchLevel=n),void 0!==r&&(this.positiveStatGain=r),void 0!==a&&(this.negativeStatGain=a)}getStatGainDescription(i){var e="",n="";return this.positiveStatGain===_e.acceleration&&(e="Acceleration"),this.positiveStatGain===_e.adaptability&&(e="Adaptability"),this.positiveStatGain===_e.endurance&&(e="Endurance"),this.positiveStatGain===_e.focus&&(e="Focus"),this.positiveStatGain===_e.power&&(e="Power"),this.positiveStatGain===_e.topSpeed&&(e="Speed"),this.negativeStatGain===_e.acceleration&&(n="Acceleration"),this.negativeStatGain===_e.adaptability&&(n="Adaptability"),this.negativeStatGain===_e.endurance&&(n="Endurance"),this.negativeStatGain===_e.focus&&(n="Focus"),this.negativeStatGain===_e.power&&(n="Power"),this.negativeStatGain===_e.topSpeed&&(n="Speed"),"+"+this.researchLevel+"% "+e+", -"+(this.researchLevel>i?i:this.researchLevel)+"% "+n}}class zv{constructor(){this.maxSpeedModifier=1,this.accelerationModifier=1,this.staminaModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1}}class jv{constructor(){this.bonusBreedXpGainFromLocalRaces=0,this.bonusBreedXpGainFromCircuitRaces=0,this.bonusBreedXpGainFromTraining=0,this.trainingTimeReduction=0,this.diminishingReturnsBonus=0,this.bonusTalents=0,this.bonusTrainingBreedXpCertificateCount=0,this.bonusCircuitBreedXpCertificateCount=0,this.bonusLocalBreedXpCertificateCount=0,this.bonusDiminishingReturnsCertificateCount=0,this.certificateUseCap=30}}class vo{constructor(){this.remainingBurstMeters=0,this.metersSinceLostFocus=0,this.recoveringStamina=!1,this.defaultRecoveringStaminaLength=150,this.currentRecoveringStaminaLength=this.defaultRecoveringStaminaLength,this.ranOutOfStamina=!1,this.lostFocus=!1,this.defaultLostFocusLength=60,this.currentLostFocusLength=this.defaultLostFocusLength,this.hasLostFocusDuringRace=!1,this.stumbled=!1,this.defaultStumbledLength=10,this.currentStumbledLength=this.defaultStumbledLength,this.relayEffects=[],this.burstCount=0,this.icyCurrentYAmount=0,this.icyCurrentDirectionUp=!0,this.headbandStumblePreventionCount=0,this.scaryMaskEffectOccurred=!1,this.firstAbilityUseEffectApplied=!1,this.velocityExceedsMaxSpeedDuringBurst=!1,this.velocityReachesMaxSpeedCount=0}makeCopy(){var i=new vo;return i.remainingBurstMeters=this.remainingBurstMeters,i.metersSinceLostFocus=this.metersSinceLostFocus,i.recoveringStamina=this.recoveringStamina,i.defaultRecoveringStaminaLength=this.defaultRecoveringStaminaLength,i.currentRecoveringStaminaLength=this.currentRecoveringStaminaLength,i.ranOutOfStamina=this.ranOutOfStamina,i.lostFocus=this.lostFocus,i.defaultLostFocusLength=this.defaultLostFocusLength,i.currentLostFocusLength=this.currentLostFocusLength,i.hasLostFocusDuringRace=this.hasLostFocusDuringRace,i.stumbled=this.stumbled,i.defaultStumbledLength=this.defaultStumbledLength,i.currentStumbledLength=this.currentStumbledLength,i.burstCount=this.burstCount,i.icyCurrentYAmount=this.icyCurrentYAmount,i.icyCurrentDirectionUp=this.icyCurrentDirectionUp,i.headbandStumblePreventionCount=this.headbandStumblePreventionCount,i.scaryMaskEffectOccurred=this.scaryMaskEffectOccurred,i.firstAbilityUseEffectApplied=this.firstAbilityUseEffectApplied,i.velocityExceedsMaxSpeedDuringBurst=this.velocityExceedsMaxSpeedDuringBurst,i.velocityReachesMaxSpeedCount=this.velocityReachesMaxSpeedCount,this.relayEffects=[],i}}var pt=(()=>{return(t=pt||(pt={}))[t.none=0]="none",t[t.sprint=1]="sprint",t[t.support=2]="support",t[t.longDistance=3]="longDistance",pt;var t})();class _u{constructor(){this.talentTreeType=pt.none,this.row2RequiredPoints=5,this.row3RequiredPoints=10,this.row4RequiredPoints=15,this.column1Row1Points=0,this.column1Row2Points=0,this.column1Row3Points=0,this.column1Row4Points=0,this.column2Row1Points=0,this.column2Row2Points=0,this.column2Row3Points=0,this.column2Row4Points=0,this.column3Row1Points=0,this.column3Row2Points=0,this.column3Row3Points=0,this.column3Row4Points=0}makeCopy(i){var e=new _u;return e.talentTreeType=i.talentTreeType,e.column1Row1Points=i.column1Row1Points,e.column1Row2Points=i.column1Row2Points,e.column1Row3Points=i.column1Row3Points,e.column1Row4Points=i.column1Row4Points,e.column2Row1Points=i.column2Row1Points,e.column2Row2Points=i.column2Row2Points,e.column2Row3Points=i.column2Row3Points,e.column2Row4Points=i.column2Row4Points,e.column3Row1Points=i.column3Row1Points,e.column3Row2Points=i.column3Row2Points,e.column3Row3Points=i.column3Row3Points,e.column3Row4Points=i.column3Row4Points,e}getTalentPointsByColumn(i){return 0===i?this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points:1===i?this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points:2===i?this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points:0}getTalentPointsByRowColumn(i,e){return 0===i&&0===e?this.column1Row1Points:1===i&&0===e?this.column1Row2Points:2===i&&0===e?this.column1Row3Points:3===i&&0===e?this.column1Row4Points:0===i&&1===e?this.column2Row1Points:1===i&&1===e?this.column2Row2Points:2===i&&1===e?this.column2Row3Points:3===i&&1===e?this.column2Row4Points:0===i&&2===e?this.column3Row1Points:1===i&&2===e?this.column3Row2Points:2===i&&2===e?this.column3Row3Points:3===i&&2===e?this.column3Row4Points:0}getTotalSpentPoints(){return this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points+this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points+this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points}spendTalentPoint(i,e){0===i&&0===e&&(this.column1Row1Points+=1),1===i&&0===e&&(this.column1Row2Points+=1),2===i&&0===e&&(this.column1Row3Points+=1),3===i&&0===e&&(this.column1Row4Points+=1),0===i&&1===e&&(this.column2Row1Points+=1),1===i&&1===e&&(this.column2Row2Points+=1),2===i&&1===e&&(this.column2Row3Points+=1),3===i&&1===e&&(this.column2Row4Points+=1),0===i&&2===e&&(this.column3Row1Points+=1),1===i&&2===e&&(this.column3Row2Points+=1),2===i&&2===e&&(this.column3Row3Points+=1),3===i&&2===e&&(this.column3Row4Points+=1)}}class $v{constructor(){this.successfulCoachingAttempts=0}}class Dt{constructor(){this.incubatorStatUpgrades=new zv,this.allTrainingTracks=new Pl,this.miscStats=new jv,this.trackedAnimalStats=new $v,this.talentTree=new _u,this.breedLevel=1,this.breedGaugeXp=0,this.breedGaugeMax=200,this.totalRacesRun=0,this.equippedOrb=null,this.canEquipOrb=!1,this.canTrain=!0,this.isAvailable=!1,this.availableAbilities=[]}makeCopy(i){var e=new Dt;return e.name=i.name,e.type=i.type,e.raceCourseType=i.raceCourseType,e.currentStats=i.currentStats.makeCopy(i.currentStats),e.baseStats=i.baseStats.makeCopy(i.baseStats),e.talentTree=i.talentTree.makeCopy(i.talentTree),e.isAvailable=i.isAvailable,e.ability=i.ability,e.raceVariables=new vo,e.equippedItem=i.equippedItem,e.equippedOrb=i.equippedOrb,e.incubatorStatUpgrades=i.incubatorStatUpgrades,e.breedLevel=i.breedLevel,e.trackedAnimalStats=i.trackedAnimalStats,e.trait=i.trait,e}viewAbility(){return this.ability.name}getAbilityUseUpdateText(i,e=""){return i+" uses "+this.ability.name+e+"."}useAbility(){}getAnimalType(){return L[this.type]}getRaceCourseType(){return z[this.raceCourseType]}getTraitName(){return null==this.trait||""===this.trait.traitName?"None":this.trait.traitName}getEquippedItemName(){if(null!=this.equippedItem)return this.equippedItem.name}getCourseTypeClass(){return this.raceCourseType===z.Flatland?"flatlandColor":this.raceCourseType===z.Mountain?"mountainColor":this.raceCourseType===z.Ocean?"waterColor":this.raceCourseType===z.Tundra?"tundraColor":this.raceCourseType===z.Volcanic?"volcanicColor":""}increaseStatsFromCurrentTraining(){null==this.currentTraining||null==this.currentStats||(this.currentStats.topSpeed+=this.currentTraining.affectedStatRatios.topSpeed*this.currentTraining.statGain,this.currentStats.acceleration+=this.currentTraining.affectedStatRatios.acceleration*this.currentTraining.statGain,this.currentStats.endurance+=this.currentTraining.affectedStatRatios.endurance*this.currentTraining.statGain,this.currentStats.power+=this.currentTraining.affectedStatRatios.power*this.currentTraining.statGain,this.currentStats.focus+=this.currentTraining.affectedStatRatios.focus*this.currentTraining.statGain,this.currentStats.adaptability+=this.currentTraining.affectedStatRatios.adaptability*this.currentTraining.statGain)}increaseStats(i){null==i||null==this.currentStats||(this.currentStats.topSpeed+=Number(i.topSpeed),this.currentStats.acceleration+=Number(i.acceleration),this.currentStats.stamina+=Number(i.stamina),this.currentStats.endurance+=Number(i.endurance),this.currentStats.power+=Number(i.power),this.currentStats.focus+=Number(i.focus),this.currentStats.adaptability+=Number(i.adaptability))}}ze([it(()=>Ee),Ke("design:type",Ee)],Dt.prototype,"currentStats",void 0),ze([it(()=>Ee),Ke("design:type",Ee)],Dt.prototype,"baseStats",void 0),ze([it(()=>zo),Ke("design:type",Object)],Dt.prototype,"currentTraining",void 0),ze([it(()=>zo),Ke("design:type",Object)],Dt.prototype,"queuedTraining",void 0),ze([it(()=>Tt),Ke("design:type",Tt)],Dt.prototype,"ability",void 0),ze([it(()=>vo),Ke("design:type",vo)],Dt.prototype,"raceVariables",void 0),ze([it(()=>oe),Ke("design:type",Object)],Dt.prototype,"equippedItem",void 0),ze([it(()=>oe),Ke("design:type",Object)],Dt.prototype,"equippedOrb",void 0),ze([it(()=>zv),Ke("design:type",zv)],Dt.prototype,"incubatorStatUpgrades",void 0),ze([it(()=>Pl),Ke("design:type",Pl)],Dt.prototype,"allTrainingTracks",void 0),ze([it(()=>jv),Ke("design:type",jv)],Dt.prototype,"miscStats",void 0),ze([it(()=>$v),Ke("design:type",$v)],Dt.prototype,"trackedAnimalStats",void 0),ze([it(()=>Tt),Ke("design:type",Array)],Dt.prototype,"availableAbilities",void 0),ze([it(()=>fn),Ke("design:type",fn)],Dt.prototype,"trait",void 0),ze([it(()=>_u),Ke("design:type",_u)],Dt.prototype,"talentTree",void 0);class k5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Horse,this.raceCourseType=z.Flatland,this.ability=new Tt,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Second Wind",this.ability.description="Second Wind",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=60,i.oneTimeEffect=!0,i.name="Inspiration",i.description="Inspiration",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.cooldown=5,e.efficiency=27,e.oneTimeEffect=!1,e.name="Pacemaker",e.description="Pacemaker",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class A5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Cheetah,this.raceCourseType=z.Flatland,this.ability=new Tt,this.ability.cooldown=6,this.ability.efficiency=35,this.ability.oneTimeEffect=!1,this.ability.name="Sprint",this.ability.description="Sprint",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=.5,i.oneTimeEffect=!1,i.name="Giving Chase",i.description="Giving Chase",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="On The Hunt",e.description="On The Hunt",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class P5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Hare,this.raceCourseType=z.Flatland,this.ability=new Tt,this.ability.efficiency=45,this.ability.oneTimeEffect=!0,this.ability.name="Prey Instinct",this.ability.description="Prey Instinct",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.cooldown=5,i.efficiency=40,i.oneTimeEffect=!1,i.name="Awareness",i.description="Awareness",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=130,e.oneTimeEffect=!0,e.name="Nap",e.description="Nap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class xD extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Warthog,this.raceCourseType=z.Flatland,this.ability=new Tt,this.ability.cooldown=5,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Graze",this.ability.description="Graze",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=80,i.oneTimeEffect=!1,i.name="Mud Pit",i.description="Mud Pit",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=30,e.oneTimeEffect=!0,e.name="Time To Tussle",e.description="Time To Tussle",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class E5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Monkey,this.raceCourseType=z.Mountain,this.ability=new Tt,this.ability.cooldown=11,this.ability.efficiency=6,this.ability.name="Landslide",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=60,i.oneTimeEffect=!0,i.name="Frenzy",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=70,e.cooldown=0,e.oneTimeEffect=!0,e.name="Leap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=30,this.availableAbilities.push(e)}}class I5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Goat,this.raceCourseType=z.Mountain,this.ability=new Tt,this.ability.efficiency=.5,this.ability.oneTimeEffect=!1,this.ability.name="Sure-footed",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=.25,i.oneTimeEffect=!1,i.name="Deep Breathing",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="In The Rhythm",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=15,this.availableAbilities.push(e)}}class V5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Gecko,this.raceCourseType=z.Mountain,this.ability=new Tt,this.ability.cooldown=5,this.ability.efficiency=55,this.ability.oneTimeEffect=!1,this.ability.name="Sticky",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=.2,i.oneTimeEffect=!1,i.name="Night Vision",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=38,e.oneTimeEffect=!0,e.name="Camouflage",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class O5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Dolphin,this.raceCourseType=z.Ocean,this.ability=new Tt,this.ability.cooldown=6,this.ability.efficiency=84,this.ability.oneTimeEffect=!1,this.ability.name="Echolocation",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=50,i.oneTimeEffect=!0,i.name="Navigator",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=70,e.oneTimeEffect=!0,e.name="Flowing Current",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class N5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Shark,this.raceCourseType=z.Ocean,this.ability=new Tt,this.ability.efficiency=60,this.ability.oneTimeEffect=!0,this.ability.name="Apex Predator",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=35,i.oneTimeEffect=!0,i.name="Feeding Frenzy",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=.1,e.oneTimeEffect=!0,e.name="Blood In The Water",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class F5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Octopus,this.raceCourseType=z.Ocean,this.ability=new Tt,this.ability.cooldown=5,this.ability.efficiency=17,this.ability.totalFrames=15,this.ability.oneTimeEffect=!1,this.ability.name="Propulsion",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=100,i.oneTimeEffect=!1,i.name="Buried Treasure",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=2,e.oneTimeEffect=!0,e.name="Big Brain",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class MD extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Whale,this.raceCourseType=z.Ocean,this.ability=new Tt,this.ability.cooldown=9,this.ability.efficiency=75,this.ability.oneTimeEffect=!1,this.ability.name="Storing Power",this.ability.description="Storing Power",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=80,i.oneTimeEffect=!1,i.name="Unparalleled Focus",i.description="Mud Pit",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=45,e.cooldown=8,e.oneTimeEffect=!1,e.name="Whalesong",e.description="Whalesong",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class B5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Penguin,this.raceCourseType=z.Tundra,this.ability=new Tt,this.ability.efficiency=65,this.ability.cooldown=8,this.ability.oneTimeEffect=!1,this.ability.name="Careful Toboggan",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=4,i.oneTimeEffect=!1,i.name="Wild Toboggan",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="Quick Toboggan",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class L5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Caribou,this.raceCourseType=z.Tundra,this.ability=new Tt,this.ability.efficiency=.5,this.ability.oneTimeEffect=!0,this.ability.name="Herd Mentality",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=50,i.cooldown=7,i.oneTimeEffect=!1,i.name="Great Migration",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=.05,e.oneTimeEffect=!0,e.name="Special Delivery",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class U5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Salamander,this.raceCourseType=z.Volcanic,this.ability=new Tt,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Cold Blooded",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.cooldown=6,i.efficiency=50,i.oneTimeEffect=!1,i.name="Burrow",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.cooldown=10,e.efficiency=25,e.oneTimeEffect=!1,e.name="Heat Up",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class H5 extends Dt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=L.Fox,this.raceCourseType=z.Volcanic,this.ability=new Tt,this.ability.cooldown=5,this.ability.efficiency=60,this.ability.oneTimeEffect=!1,this.ability.name="Trickster",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Tt;i.efficiency=1.5,i.oneTimeEffect=!1,i.name="Fleeting Speed",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Tt;e.efficiency=65,e.oneTimeEffect=!0,e.name="Nine Tails",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class nf{constructor(){this.selectedAnimals=[],this.courseTypeOrder=[],this.isCourseOrderActive=!1,this.autoRunFreeRace=!1,this.isEventDeck=!1}}ze([it(()=>Dt),Ke("design:type",Array)],nf.prototype,"selectedAnimals",void 0);class Wv{constructor(){this.maxSpeedIncrease=1.1,this.accelerationRateIncrease=1.1,this.staminaIncrease=1.1,this.powerEfficiencyIncrease=1.1,this.focusDistanceIncrease=1.1,this.adaptabilityDistanceIncrease=1.1}}class G5{constructor(){this.upgradePrice=[],this.upgradedStatGain=new Ee(1,1,1,1,1,1),this.barnLevel=0,this.specializationLevel=0,this.currentDeltaTime=0}}class qv{constructor(){this.barnUpgrades=new G5}getSize(){return ht[this.size]}}class yu{constructor(){this.timeTrained=0,this.timeToComplete=120}}ze([it(()=>Dt),Ke("design:type",Object)],yu.prototype,"assignedAnimal",void 0),ze([it(()=>fn),Ke("design:type",Object)],yu.prototype,"assignedTrait",void 0);class kD{constructor(i){this.exhaustionStatReduction=1,this.morale=1,this.associatedAnimalType=i,this.isCurrentlyRacing=!1,this.isSetToRelay=!1}}class Xv{constructor(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.deepBreathingUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.bigBrainUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.specialDeliveryUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0,this.onTheHuntUseCap=25,this.sureFootedUseCap=25,this.deepBreathingUseCap=25,this.nightVisionUseCap=25,this.bigBrainUseCap=5,this.quickTobogganUseCap=25,this.herdMentalityUseCap=1,this.specialDeliveryUseCap=25}resetUseCounts(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0}}class rf{constructor(){this.nineTailsBuffs=[],this.grazeBuffs=[],this.relayEffects=[],this.mountainEndingY=0,this.deepBreathingStaminaGain=0,this.longDistanceTalentIncreaseAccelerationWithLowVelocity=!1,this.maxSpeedFloor=0,this.whalePowerStored=0,this.pathsClearedWithoutLosingFocus=0,this.raceVariables=new vo}}ze([it(()=>vo),Ke("design:type",vo)],rf.prototype,"raceVariables",void 0);class W{constructor(i,e){void 0!==i&&(this.value=i),void 0!==e&&(this.text=e)}}class af{constructor(){this.raceUpdates=[],this.beatMoneyMark=!1,this.distanceCovered=0}addRaceUpdate(i,e){var n=new W;n.text=e,n.value=i,this.raceUpdates.push(n)}}class AD{constructor(i,e){void 0!==i&&(this.objectType=i),void 0!==e&&(this.xDistance=e)}}var $e=(()=>{return(t=$e||($e={}))[t.Sunny=0]="Sunny",t[t.Rainy=1]="Rainy",t[t.Stormy=2]="Stormy",t[t.Snowfall=3]="Snowfall",t[t.Maelstrom=4]="Maelstrom",t[t.Hailstorm=5]="Hailstorm",t[t.Ashfall=6]="Ashfall",t[t.Torrid=7]="Torrid",$e;var t})(),Qe=(()=>{return(t=Qe||(Qe={}))[t.Regular=0]="Regular",t[t.S=1]="S",t[t.Bumps=2]="Bumps",t[t.Crevasse=3]="Crevasse",t[t.Gaps=4]="Gaps",t[t.Waves=5]="Waves",t[t.Dive=6]="Dive",t[t.Cavern=7]="Cavern",t[t.Hills=8]="Hills",t[t.FirstRegular=9]="FirstRegular",t[t.LastRegular=10]="LastRegular",t[t.SteppingStones=11]="SteppingStones",Qe;var t})(),Fr=(()=>{return(t=Fr||(Fr={}))[t.None=0]="None",t[t.Low=.8]="Low",t[t.Medium=.6]="Medium",t[t.High=.4]="High",Fr;var t})();class sf{constructor(i){this.didAnimalStumble=!1,this.didAnimalLoseFocus=!1,this.checkedForBurst=!1,this.checkedForMiniBurst=!1,this.checkedForNineTails=!1,null!=i&&this.setStumbleFields(),this.driftAmount=0,this.isSpecialPath=!1}setStumbleFields(){this.currentStumbleOpportunity=0,this.routeDesign===Qe.Regular&&(this.stumbleSeverity=Fr.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Qe.S&&(this.isSpecialPath=!0,this.stumbleSeverity=Fr.Low,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Qe.Bumps&&(this.isSpecialPath=!0,this.stumbleSeverity=Fr.Medium,this.frequencyOfStumble=20,this.stumbleOpportunities=8),this.routeDesign===Qe.Crevasse&&(this.isSpecialPath=!0,this.stumbleSeverity=Fr.High,this.frequencyOfStumble=80,this.stumbleOpportunities=6),this.routeDesign===Qe.Gaps&&(this.isSpecialPath=!0,this.stumbleSeverity=Fr.Medium,this.frequencyOfStumble=175,this.stumbleOpportunities=4),this.routeDesign===Qe.Waves&&(this.isSpecialPath=!0,this.stumbleSeverity=Fr.Medium,this.frequencyOfStumble=50,this.stumbleOpportunities=6),this.routeDesign===Qe.Dive&&(this.isSpecialPath=!0,this.stumbleSeverity=Fr.High,this.frequencyOfStumble=200,this.stumbleOpportunities=2),this.routeDesign===Qe.Cavern&&(this.isSpecialPath=!0,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Qe.Hills&&(this.isSpecialPath=!0,this.stumbleSeverity=Fr.High,this.frequencyOfStumble=120,this.stumbleOpportunities=3,this.frequencyOfDrift=250),(this.routeDesign===Qe.FirstRegular||this.routeDesign===Qe.LastRegular)&&(this.isSpecialPath=!0,this.stumbleSeverity=Fr.Medium,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Qe.SteppingStones&&(this.isSpecialPath=!0,this.stumbleSeverity=Fr.High,this.frequencyOfStumble=60,this.stumbleOpportunities=10)}}class pi{constructor(i){var e=.8,r=1.2;this.maxSpeedModifier=1,this.accelerationModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1,null!==i&&(this.terrainType=i,i===$e.Sunny&&(this.staminaModifier=1.5,this.maxSpeedModifier=r),i===$e.Rainy&&(this.adaptabilityModifier=e,this.focusModifier=r),i===$e.Stormy&&(this.focusModifier=e,this.accelerationModifier=r),i===$e.Maelstrom&&(this.accelerationModifier=e,this.maxSpeedModifier=e,this.adaptabilityModifier=r),i===$e.Hailstorm&&(this.focusModifier=e,this.adaptabilityModifier=e,this.maxSpeedModifier=e),i===$e.Ashfall&&(this.staminaModifier=r,this.accelerationModifier=e,this.powerModifier=e),i===$e.Snowfall&&(this.staminaModifier=e,this.maxSpeedModifier=e,this.accelerationModifier=e),i===$e.Torrid&&(this.powerModifier=e,this.maxSpeedModifier=e,this.focusModifier=r))}getTerrainType(){return $e[this.terrainType]}}class Hn{constructor(i,e){this.legComplete=!1,null!=i&&(this.courseType=i),void 0!==e&&null!=e&&(this.distance=e),this.pathData=[]}getCourseTypeName(){return z[this.courseType]}getCourseTypeClass(){return this.courseType===z.Flatland?"flatlandColor":this.courseType===z.Mountain?"mountainColor":this.courseType===z.Ocean?"waterColor":this.courseType===z.Tundra?"tundraColor":this.courseType===z.Volcanic?"volcanicColor":""}getTerrainName(){return null==this.terrain?"":$e[this.terrain.terrainType]}}ze([it(()=>sf),Ke("design:type",Array)],Hn.prototype,"pathData",void 0),ze([it(()=>pi),Ke("design:type",pi)],Hn.prototype,"terrain",void 0);class lf{constructor(){this.distanceCoveredByFrame=[],this.velocityByFrame=[],this.timeToCompleteByFrame=[],this.maxSpeedByFrame=[],this.staminaPercentByFrame=[],this.racerEffectByFrame=[],this.yAdjustmentByFrame=[],this.lavaFallPercentByFrame=[],this.racePositionByFrame=[]}}class yi{constructor(i,e,n,r,a,o,s,l,c,u,d,m){this.raceLegs=i,this.requiredRank=e,this.isCircuitRace=n,this.raceId=r,this.length=a,this.timeToComplete=o,this.raceUI=new lf,this.circuitIncreaseReward=["",""],null!=s&&(this.rewards=s),null!=l&&(this.localRaceType=l),null!=c&&(this.trackRaceType=c),null!=u&&(this.raceType=u),null!=d&&(this.eventRaceType=d),null!=m&&(this.drawnObjects=m)}makeCopy(i){var e=new yi(i.raceLegs,i.requiredRank,i.isCircuitRace,i.raceId,i.length,i.timeToComplete,i.rewards,i.localRaceType,i.trackRaceType,i.raceType,i.eventRaceType,i.drawnObjects);return i.raceUI.velocityByFrame.length>0&&i.raceUI.velocityByFrame.forEach(n=>{e.raceUI.velocityByFrame.push(n)}),i.raceUI.staminaPercentByFrame.length>0&&i.raceUI.staminaPercentByFrame.forEach(n=>{e.raceUI.staminaPercentByFrame.push(n)}),e}reduceExportSize(){this.raceUI=new lf}}ze([it(()=>Hn),Ke("design:type",Array)],yi.prototype,"raceLegs",void 0),ze([it(()=>oe),Ke("design:type",Array)],yi.prototype,"rewards",void 0),ze([it(()=>lf),Ke("design:type",lf)],yi.prototype,"raceUI",void 0),ze([it(()=>AD),Ke("design:type",Array)],yi.prototype,"drawnObjects",void 0);class cf{constructor(){this.affectsAllRacers=!1}makeCopy(){var i=new cf;return i.isMultiplicative=this.isMultiplicative,i.remainingRelayMeters=this.remainingRelayMeters,i.relayAffectedStatRatios=new Ee(this.relayAffectedStatRatios.topSpeed,this.relayAffectedStatRatios.acceleration,this.relayAffectedStatRatios.endurance,this.relayAffectedStatRatios.power,this.relayAffectedStatRatios.focus,this.relayAffectedStatRatios.adaptability),i.effectType=this.effectType,i.additionalValue=this.additionalValue,i.affectsAllRacers=this.affectsAllRacers,i}}class Wi{constructor(){this.isRunning=!1,this.initialSetupComplete=!1,this.animalAlreadyPrepped=!1,this.mountainEndingY=0,this.mountainClimbPercent=0,this.exhaustionMoraleUpdateCounter=0,this.weatherClusterUpdateCounter=0,this.weekStartDay=2,this.weekStartHour=9,this.weekEndDay=4,this.weekEndHour=12,this.weekendStartDay=5,this.weekendStartHour=20,this.weekendEndDay=0,this.weekendEndHour=23,this.distanceCovered=0,this.grandPrixTimeLength=183600,this.segmentTime=180,this.segmentTimeCounter=0,this.overallTimeCounter=0,this.rank="Z",this.animalData=[],this.queuedRelayEffects=[],this.bonusTime=0,this.remainingRewards=0,this.totalRewards=0,this.coinRewardsObtained=0,this.renownRewardsObtained=0,this.tokenRewardsObtained=0,this.isGrandPrixCompleted=!1,this.remainingEventRaceTime=0,this.eventAbilityData=new Xv,this.isCatchingUp=!1,this.isLoading=!1}}ze([it(()=>Xv),Ke("design:type",Xv)],Wi.prototype,"eventAbilityData",void 0),ze([it(()=>pi),Ke("design:type",pi)],Wi.prototype,"raceTerrain",void 0),ze([it(()=>yi),Ke("design:type",yi)],Wi.prototype,"currentRaceSegment",void 0),ze([it(()=>af),Ke("design:type",af)],Wi.prototype,"currentRaceSegmentResult",void 0),ze([it(()=>yi),Ke("design:type",yi)],Wi.prototype,"nextRaceSegment",void 0),ze([it(()=>yi),Ke("design:type",yi)],Wi.prototype,"previousRaceSegment",void 0),ze([it(()=>rf),Ke("design:type",rf)],Wi.prototype,"previousRaceSegmentData",void 0),ze([it(()=>kD),Ke("design:type",Array)],Wi.prototype,"animalData",void 0),ze([it(()=>cf),Ke("design:type",Array)],Wi.prototype,"queuedRelayEffects",void 0);class PD{}class uf{constructor(){this.rewards=[]}}ze([it(()=>Date),Ke("design:type",Date)],uf.prototype,"expirationDate",void 0),ze([it(()=>zo),Ke("design:type",Array)],uf.prototype,"rewards",void 0);class Je{constructor(){this.isAvailable=!0,this.amountPurchased=0,this.totalShopQuantity=1,this.quantityMultiplier=1,this.numberPurchasing=1,this.purchasePrice=[],this.basePurchasePrice=[]}}class ra{}ze([it(()=>Je),Ke("design:type",Array)],ra.prototype,"itemList",void 0);class df{constructor(){this.tutorialCompleted=!1,this.currentTutorialId=1,this.showTutorial=!1,this.showTrainingTrackTutorial=!0,this.showCoachingTutorial=!0}}class hf{constructor(){this.isNewSpecialRaceAvailable=!1,this.isEventRaceNowActive=!1}}class Yv{constructor(){this.settings=[]}get(i){var e=this.settings.find(n=>n[0]===i);return null!=e?e[1]:""}set(i,e){var n=this.settings.find(r=>r[0]===i);null==n?this.settings.push([i,e]):n[1]=e}}class Qv{constructor(){this.totalRaces=0,this.totalBreeds=0,this.totalMetersRaced=0,this.mostUsedAnimal="",this.mostRacedCourseType="",this.highestMaxSpeed="",this.highestAccelerationRate="",this.highestStamina="",this.highestPowerEfficiency="",this.highestFocusDistance="",this.highestAdaptabilityDistance=""}}class Kv{constructor(){this.unlockables=[]}get(i){var e=this.unlockables.find(n=>n[0]===i);return null!=e&&e[1]}set(i,e){var n=this.unlockables.find(r=>r[0]===i);null==n?this.unlockables.push([i,e]):n[1]=e}}class $n{constructor(i){this.userIsRacing=!1,this.showBreedWarning=!0,null!=i&&(this.animals=i.animals,this.barns=i.barns,this.trainingOptions=i.trainingOptions,this.circuitRaces=i.circuitRaces,this.circuitRank=i.circuitRank,this.localRaces=i.localRaces,this.resources=i.resources,this.modifiers=i.modifiers,this.shop=i.shop,this.tokenShop=i.tokenShop,this.animalDecks=i.animalDecks,this.incubator=i.incubator,this.trackedStats=i.trackedStats,this.pinnacle=i.pinnacle,this.orbStats=i.orbStats,this.redeemedCodes=i.redeemedCodes,this.eventRaceData=i.eventRaceData,this.notifications=i.notifications,this.previousEventRewards=[],this.nationalRaceCountdown=0,this.autoFreeRaceCounter=0,this.freeRaceCounter=0,this.freeRaceTimePeriodCounter=0)}}ze([it(()=>Dt),Ke("design:type",Array)],$n.prototype,"animals",void 0),ze([it(()=>qv),Ke("design:type",Array)],$n.prototype,"barns",void 0),ze([it(()=>zo),Ke("design:type",Array)],$n.prototype,"trainingOptions",void 0),ze([it(()=>yi),Ke("design:type",Array)],$n.prototype,"circuitRaces",void 0),ze([it(()=>yi),Ke("design:type",Array)],$n.prototype,"localRaces",void 0),ze([it(()=>PD),Ke("design:type",PD)],$n.prototype,"pinnacle",void 0),ze([it(()=>oe),Ke("design:type",Array)],$n.prototype,"resources",void 0),ze([it(()=>W),Ke("design:type",Array)],$n.prototype,"modifiers",void 0),ze([it(()=>ra),Ke("design:type",Array)],$n.prototype,"shop",void 0),ze([it(()=>ra),Ke("design:type",Array)],$n.prototype,"tokenShop",void 0),ze([it(()=>nf),Ke("design:type",Array)],$n.prototype,"animalDecks",void 0),ze([it(()=>Yv),Ke("design:type",Yv)],$n.prototype,"settings",void 0),ze([it(()=>Kv),Ke("design:type",Kv)],$n.prototype,"unlockables",void 0),ze([it(()=>yu),Ke("design:type",yu)],$n.prototype,"incubator",void 0),ze([it(()=>Qv),Ke("design:type",Qv)],$n.prototype,"trackedStats",void 0),ze([it(()=>Wv),Ke("design:type",Wv)],$n.prototype,"orbStats",void 0),ze([it(()=>df),Ke("design:type",df)],$n.prototype,"tutorials",void 0),ze([it(()=>uf),Ke("design:type",Array)],$n.prototype,"redeemedCodes",void 0),ze([it(()=>Wi),Ke("design:type",Wi)],$n.prototype,"eventRaceData",void 0),ze([it(()=>oe),Ke("design:type",Array)],$n.prototype,"previousEventRewards",void 0),ze([it(()=>hf),Ke("design:type",hf)],$n.prototype,"notifications",void 0);var Ne=(()=>{return(t=Ne||(Ne={}))[t.ShortTrackRunning=0]="ShortTrackRunning",t[t.Sprints=1]="Sprints",t[t.TrailRunning=2]="TrailRunning",t[t.MoveLogs=3]="MoveLogs",t[t.Footwork=4]="Footwork",t[t.PracticeCommands=5]="PracticeCommands",t[t.ScentTraining=6]="ScentTraining",t[t.SmallWagonTow=7]="SmallWagonTow",t[t.Sidestep=8]="Sidestep",t[t.MediumTrackRunning=9]="MediumTrackRunning",t[t.UphillRun=10]="UphillRun",t[t.Puzzles=11]="Puzzles",t[t.MoveRocks=12]="MoveRocks",t[t.LateralVerticalDrill=13]="LateralVerticalDrill",t[t.DodgeBall=14]="DodgeBall",t[t.BurstPractice=15]="BurstPractice",t[t.Acrobatics=16]="Acrobatics",t[t.LongTrackRunning=17]="LongTrackRunning",t[t.VehicleTow=18]="VehicleTow",t[t.LogJump=19]="LogJump",t[t.Meditation=20]="Meditation",t[t.WindSprints=21]="WindSprints",t[t.GreenwayHike=22]="GreenwayHike",t[t.Marathon=23]="Marathon",t[t.AgilityCourse=24]="AgilityCourse",Ne;var t})(),ED=q(340);let Ri=(()=>{class t{constructor(e){this.sanitizer=e}getRandomSeededInteger(e,n,r="seeded"){var a=ED(r);return Math.round(a()*(n-e)+e)}getRandomInteger(e,n){return e-=.500000001,n+=.499999999,Math.round(Math.random()*(n-e)+e)}getRandomSeededNumber(e,n,r="seeded"){return ED(r)()*(n-e)+e}getRandomNumber(e,n){return Math.random()*(n-e)+e}getRandomNumberPercent(){return 99*Math.random()+1}getNumericValueOfCircuitRank(e){var n=0;return e.length>1&&(n=26*(e.length-1)),n+(91-e.charCodeAt(e.length-1))}getCircuitRankFromNumericValue(e){for(var n="";e>26;)n+="A",e-=26;return n+String.fromCharCode(91-e)}getHoursRemainingFromSeconds(e){return Math.floor(e/3600)}getMinutesLeftInHourRemainingFromSeconds(e){var n=Math.floor(e/3600);return Math.floor(e/60-60*n)}getSecondsLeftInMinuteRemainingFromSeconds(e){var n=Math.floor(e/3600);return e-60*n*60-60*Math.floor(e/60-60*n)}convertSecondsToHHMMSS(e){var n=Math.floor(e/3600),r=Math.floor(e/60-60*n),a=e-60*n*60-60*r,o=n.toString(),s=r.toString(),l=Math.floor(a).toString();return n<10&&(o=n<1||n>59?"00":String(o).padStart(2,"0")),r<10&&(s=r<1||r>59?"00":String(s).padStart(2,"0")),a<10&&(l=a<1||a>59?"00":String(l).padStart(2,"0")),o+":"+s+":"+l}getClosestWholeNumber(e,n){return n/Math.floor(n/e)}getDayOfWeekFromNumber(e){return e<=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].length-1?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]:""}getAmPmTimeFromHours(e){return 0===e?"12:00 AM":e<12?e+":00 AM":12===e?"12:00 PM":e-12+":00 PM"}get24HourFormat(e){return e<=9?"0"+e+":00":e+":00"}convertDegreesToRadians(e){return e*(Math.PI/180)}getSanitizedHtml(e){var n=this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(e));return null===n?"":n}shadeColor(e,n){return"#"+e.replace(/^#/,"").replace(/../g,a=>("0"+Math.min(255,Math.max(0,parseInt(a,16)+n)).toString(16)).substr(-2))}getProperNoun(e){return e.charAt(0).toUpperCase()+e.slice(1)}condenseList(e){var n=[];return e.forEach(r=>{if(n.some(o=>o.name===r.name))n.find(o=>o.name===r.name).amount+=r.amount;else{var a=r.makeCopy(r);n.push(a)}}),n}ordinalSuffixOf(e){var n=e%10,r=e%100;return 1==n&&11!=r?e+"st":2==n&&12!=r?e+"nd":3==n&&13!=r?e+"rd":e+"th"}}return t.\u0275fac=function(e){return new(e||t)(Le(Fo))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Zv=(()=>{class t{constructor(){}initializeShop(){}initializeResource(e,n,r){return new oe(e,n,r)}initializeTraining(e){var n=new zo;return e===Ne.ShortTrackRunning&&(n.trainingName="Short Track Running",n.isAvailable=!0,n.facilitySize=ht.Small,n.timeToComplete=30,n.trainingType=Ne.ShortTrackRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(1,0,0,0,0,0)),e===Ne.Sprints&&(n.trainingName="Sprints",n.isAvailable=!0,n.facilitySize=ht.Small,n.timeToComplete=20,n.trainingType=Ne.Sprints,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,1,0,0,0,0)),e===Ne.TrailRunning&&(n.trainingName="Trail Running",n.isAvailable=!0,n.facilitySize=ht.Small,n.timeToComplete=45,n.trainingType=Ne.TrailRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(.5,0,1,0,0,0)),e===Ne.MoveLogs&&(n.trainingName="Move Logs",n.isAvailable=!1,n.facilitySize=ht.Small,n.timeToComplete=30,n.trainingType=Ne.MoveLogs,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,1,0,0)),e===Ne.Footwork&&(n.trainingName="Footwork",n.isAvailable=!1,n.facilitySize=ht.Small,n.timeToComplete=45,n.trainingType=Ne.Footwork,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,.25,0,0,0,1)),e===Ne.PracticeCommands&&(n.trainingName="Practice Commands",n.isAvailable=!1,n.facilitySize=ht.Small,n.timeToComplete=40,n.trainingType=Ne.PracticeCommands,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,0,1,.25)),e===Ne.ScentTraining&&(n.trainingName="Scent Training",n.isAvailable=!1,n.facilitySize=ht.Small,n.timeToComplete=45,n.trainingType=Ne.ScentTraining,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,.5,0,1,0)),e===Ne.SmallWagonTow&&(n.trainingName="Small Wagon Tow",n.isAvailable=!1,n.facilitySize=ht.Small,n.timeToComplete=45,n.trainingType=Ne.SmallWagonTow,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(.25,0,0,1.5,0,0)),e===Ne.Sidestep&&(n.trainingName="Sidestep",n.isAvailable=!1,n.facilitySize=ht.Small,n.timeToComplete=35,n.trainingType=Ne.Sidestep,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,2,0,0,0,0)),e===Ne.MediumTrackRunning&&(n.trainingName="Medium Track Running",n.isAvailable=!1,n.facilitySize=ht.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Ne.MediumTrackRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(2,0,1,0,0,0)),e===Ne.UphillRun&&(n.trainingName="Uphill Run",n.isAvailable=!1,n.facilitySize=ht.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ne.UphillRun,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,1,2,0,0,0)),e===Ne.Puzzles&&(n.trainingName="Puzzles",n.isAvailable=!1,n.facilitySize=ht.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Ne.Puzzles,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,0,2,1)),e===Ne.MoveRocks&&(n.trainingName="Move Rocks",n.isAvailable=!1,n.facilitySize=ht.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Ne.MoveRocks,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,1,0,2,0,0)),e===Ne.DodgeBall&&(n.trainingName="Dodge Ball",n.isAvailable=!1,n.facilitySize=ht.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Ne.DodgeBall,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,2.5,0,0,0,1)),e===Ne.LateralVerticalDrill&&(n.trainingName="Lateral Vertical Drill",n.isAvailable=!1,n.facilitySize=ht.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ne.LateralVerticalDrill,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(1.5,0,0,0,2,0)),e===Ne.BurstPractice&&(n.trainingName="Burst Practice",n.isAvailable=!1,n.facilitySize=ht.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ne.BurstPractice,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,1.5,1.5,1.5)),e===Ne.Acrobatics&&(n.trainingName="Acrobatics",n.isAvailable=!1,n.facilitySize=ht.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ne.Acrobatics,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(.5,0,.5,3,0,0)),e===Ne.LongTrackRunning&&(n.trainingName="Long Track Running",n.isAvailable=!1,n.facilitySize=ht.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.LongTrackRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(5,0,0,0,2,0)),e===Ne.VehicleTow&&(n.trainingName="Vehicle Tow",n.isAvailable=!1,n.facilitySize=ht.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.VehicleTow,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,2,5,0,0)),e===Ne.LogJump&&(n.trainingName="Log Jump",n.isAvailable=!1,n.facilitySize=ht.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.LogJump,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(1,1,0,0,0,5)),e===Ne.Meditation&&(n.trainingName="Meditation",n.isAvailable=!1,n.facilitySize=ht.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.Meditation,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,2,5,0)),e===Ne.WindSprints&&(n.trainingName="Wind Sprints",n.isAvailable=!1,n.facilitySize=ht.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.WindSprints,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(2,5,0,0,0,0)),e===Ne.GreenwayHike&&(n.trainingName="Greenway Hike",n.isAvailable=!1,n.facilitySize=ht.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.GreenwayHike,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,5,0,0,2)),e===Ne.Marathon&&(n.trainingName="Marathon",n.isAvailable=!1,n.facilitySize=ht.Large,n.purchasePrice*=10,n.timeToComplete=120,n.trainingType=Ne.Marathon,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,2,3,0,3,0)),e===Ne.AgilityCourse&&(n.trainingName="Agility Course",n.isAvailable=!1,n.facilitySize=ht.Large,n.purchasePrice*=10,n.timeToComplete=120,n.trainingType=Ne.AgilityCourse,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(3,0,0,2,0,3)),n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Kt=(()=>{return(t=Kt||(Kt={}))[t.Track=0]="Track",t[t.Free=1]="Free",t[t.Mono=2]="Mono",t[t.Duo=3]="Duo",t[t.Rainbow=4]="Rainbow",Kt;var t})(),et=(()=>{return(t=et||(et={}))[t.none=0]="none",t[t.headband=1]="headband",t[t.redBaton=2]="redBaton",t[t.blueBaton=3]="blueBaton",t[t.violetBaton=4]="violetBaton",t[t.orangeBaton=5]="orangeBaton",t[t.greenBaton=6]="greenBaton",t[t.yellowBaton=7]="yellowBaton",t[t.quickSnack=8]="quickSnack",t[t.blinders=9]="blinders",t[t.pendant=10]="pendant",t[t.carrotOnAStick=11]="carrotOnAStick",t[t.scaryMask=12]="scaryMask",t[t.runningShoes=13]="runningShoes",t[t.incense=14]="incense",t[t.athleticTape=15]="athleticTape",et;var t})();const Jv={name:"white",properties:{"--foreground-default":"#000000","--foreground-secondary":"#1B1B1B","--foreground-tertiary":"#a6a49d","--foreground-quaternary":"#2F2F2F","--foreground-light":"#000000","--background-default":"#FCFCFC","--background-secondary":"#FFFFFF","--background-tertiary":"#C4C4C4","--background-quarternary":"#ACAFB4","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#8105fc","--specialityKeywordColor":"#050efc","--equipmentKeywordColor":"#1B7F02","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},e0={name:"light",properties:{"--foreground-default":"#08090A","--foreground-secondary":"#41474D","--foreground-tertiary":"#797C80","--foreground-quaternary":"#F4FAFF","--foreground-light":"#41474D","--background-default":"#F4FAFF","--background-secondary":"#A3B9CC","--background-tertiary":"#5C7D99","--background-quarternary":"#65799E","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#BF6200","--mountainColor":"#228D0F","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#266A80","--volcanicColor":"#C70604","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#064064","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},t0={name:"twilight",properties:{"--foreground-default":"#ED8B42","--foreground-secondary":"#C05100","--foreground-tertiary":"#6A2D00","--foreground-quaternary":"#FFAA20","--foreground-light":"#FF8F3D","--background-default":"#5D0274","--background-secondary":"#210129","--background-tertiary":"#14001A","--background-quarternary":"#4F223C","--background-light":"#72028D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#000000","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},wu={name:"night",properties:{"--foreground-default":"#A3B9CC","--foreground-secondary":"#5C7D99","--foreground-tertiary":"#49647A","--foreground-quaternary":"#E5E5E5","--foreground-light":"#FFFFFF","--background-default":"#797C80","--background-secondary":"#41474D","--background-tertiary":"#08090A","--background-quarternary":"##2A2C31","--background-light":"#41474D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#E18B07","--mountainColor":"#30b001","--waterColor":"#9289CF","--waterSubcolor":"#5044ab","--tundraColor":"#019DDE","--volcanicColor":"#E56C6E","--resourceKeywordColor":"#EAAD91","--progressionKeywordColor":"#ABB5DC","--specialityKeywordColor":"#5DBDF6","--equipmentKeywordColor":"#83C2A6","--background-tertiary-shadow":"0 1px 3px 0 rgba(8, 9, 10, 0.5)"}};let El=(()=>{class t{constructor(){this.active=wu,this.availableThemes=[Jv,e0,t0,wu]}getAvailableThemes(){return this.availableThemes}getActiveTheme(){return this.active}getActiveThemeName(){var e="";return e=this.active.name,this.active===wu&&(e="night"),this.active===e0&&(e="light"),this.active===Jv&&(e="white"),this.active===t0&&(e="twilight"),e}setNightTheme(){return this.setActiveTheme(wu)}setLightTheme(){return this.setActiveTheme(e0)}setTwilightTheme(){return this.setActiveTheme(t0)}setWhiteTheme(){return this.setActiveTheme(Jv)}setActiveTheme(e){return this.active=e,Object.keys(this.active.properties).forEach(n=>{document.documentElement.style.setProperty(n,this.active.properties[n])}),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var aa=(()=>{return(t=aa||(aa={}))[t.draw=0]="draw",t[t.text=1]="text",t[t.both=2]="both",aa;var t})(),si=(()=>{return(t=si||(si={}))[t.practice=0]="practice",t[t.novice=1]="novice",t[t.intermediate=2]="intermediate",t[t.master=3]="master",si;var t})(),Oe=(()=>{return(t=Oe||(Oe={}))[t.circuit=0]="circuit",t[t.special=1]="special",t[t.event=2]="event",t[t.trainingTrack=3]="trainingTrack",Oe;var t})(),Ge=(()=>{return(t=Ge||(Ge={}))[t.grandPrix=0]="grandPrix",Ge;var t})(),Hi=(()=>{return(t=Hi||(Hi={}))[t.clearSkies=0]="clearSkies",t[t.inclementWeather=1]="inclementWeather",t[t.coldSpell=2]="coldSpell",Hi;var t})(),ff=(()=>{return(t=ff||(ff={}))[t.brazier=0]="brazier",ff;var t})();let Mt=(()=>{class t{constructor(e,n,r){this.utilityService=e,this.initializeService=n,this.themeService=r,this.globalVar=new $n}initializeGlobalVariables(){this.globalVar.animals=[],this.globalVar.trainingOptions=[],this.globalVar.circuitRaces=[],this.globalVar.localRaces=[],this.globalVar.resources=[],this.globalVar.modifiers=[],this.globalVar.animalDecks=[],this.globalVar.barns=[],this.globalVar.redeemedCodes=[],this.globalVar.settings=new Yv,this.globalVar.unlockables=new Kv,this.globalVar.incubator=new yu,this.globalVar.trackedStats=new Qv,this.globalVar.orbStats=new Wv,this.globalVar.tutorials=new df,this.globalVar.previousEventRewards=[],this.globalVar.eventRaceData=new Wi,this.globalVar.userIsRacing=!1,this.globalVar.nationalRaceCountdown=0,this.globalVar.autoFreeRaceCounter=0,this.globalVar.freeRaceCounter=0,this.globalVar.freeRaceTimePeriodCounter=0,this.globalVar.lastTimeStamp=Date.now(),this.globalVar.currentVersion=1.1,this.globalVar.startingVersion=1.1,this.globalVar.startDate=new Date,this.globalVar.notifications=new hf,this.InitializeModifiers(),this.InitializeAnimals(),this.InitializeRelayTeams(),this.InitializeGlobalTrainingOptions(),this.InitializeShop(),this.InitializeTokenShop(),this.InitializeBarns(),this.globalVar.circuitRank="Z",this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),this.checkCircuitRankRewards(),this.globalVar.monoRank="Z",this.globalVar.duoRank="Z",this.globalVar.rainbowRank="Z",this.GenerateLocalRaces(),this.InitializeResources(),this.InitializeSettings(),this.InitializeUnlockables()}InitializeModifiers(){this.globalVar.modifiers.push(new W(.2,"staminaModifier")),this.globalVar.modifiers.push(new W(.9,"exhaustionStatLossModifier")),this.globalVar.modifiers.push(new W(.1,"exhaustionStatLossMinimumModifier")),this.globalVar.modifiers.push(new W(5,"trainingBreedGaugeIncrease")),this.globalVar.modifiers.push(new W(10,"circuitBreedGaugeIncrease")),this.globalVar.modifiers.push(new W(1,"localBreedGaugeIncrease")),this.globalVar.modifiers.push(new W(.5,"trainingTrackPaceModifier")),this.globalVar.modifiers.push(new W(.05,"breedLevelStatModifier")),this.globalVar.modifiers.push(new W(10,"breedGaugeMaxIncreaseModifier")),this.globalVar.modifiers.push(new W(.001,"incubatorUpgradeIncreaseModifier")),this.globalVar.modifiers.push(new W(5,"facilityLevelModifier")),this.globalVar.modifiers.push(new W(.02,"animalHandlerModifier")),this.globalVar.modifiers.push(new W(.01,"stopwatchModifier")),this.globalVar.modifiers.push(new W(.1,"racerMapsModifier")),this.globalVar.modifiers.push(new W(50,"freeRacesToMedalModifier")),this.globalVar.modifiers.push(new W(25,"nationalRacesToMedalModifier")),this.globalVar.modifiers.push(new W(10,"internationalRacesToMedalModifier")),this.globalVar.modifiers.push(new W(.75,"moneyMarkPaceModifier")),this.globalVar.modifiers.push(new W(1.25,"moneyMarkRewardModifier")),this.globalVar.modifiers.push(new W(5,"whistleModifier")),this.globalVar.modifiers.push(new W(10,"goldenWhistleModifier")),this.globalVar.modifiers.push(new W(.1,"breedingGroundsSpecializationModifier")),this.globalVar.modifiers.push(new W(300,"attractionTimeToCollectModifier")),this.globalVar.modifiers.push(new W(20,"attractionAmountModifier")),this.globalVar.modifiers.push(new W(.05,"researchCenterIncrementsModifier")),this.globalVar.modifiers.push(new W(.45,"researchCenterTrainingAnimalModifier")),this.globalVar.modifiers.push(new W(.25,"researchCenterStudyingAnimalModifier")),this.globalVar.modifiers.push(new W(.75,"researchCenterMaxStatGainModifier")),this.globalVar.modifiers.push(new W(3,"headbandEquipmentModifier")),this.globalVar.modifiers.push(new W(1,"quickSnackEquipmentModifier")),this.globalVar.modifiers.push(new W(.5,"blindersEquipmentModifier")),this.globalVar.modifiers.push(new W(.9,"pendantEquipmentModifier")),this.globalVar.modifiers.push(new W(1.1,"redBatonEquipmentModifier")),this.globalVar.modifiers.push(new W(1.1,"blueBatonEquipmentModifier")),this.globalVar.modifiers.push(new W(1.1,"orangeBatonEquipmentModifier")),this.globalVar.modifiers.push(new W(1.1,"greenBatonEquipmentModifier")),this.globalVar.modifiers.push(new W(1.1,"yellowBatonEquipmentModifier")),this.globalVar.modifiers.push(new W(1.1,"violetBatonEquipmentModifier")),this.globalVar.modifiers.push(new W(2,"scaryMaskEquipmentModifier")),this.globalVar.modifiers.push(new W(1.2,"runningShoesEquipmentModifier")),this.globalVar.modifiers.push(new W(.9,"incenseEquipmentModifier")),this.globalVar.modifiers.push(new W(.5,"athleticTapeEquipmentModifier")),this.globalVar.modifiers.push(new W(14400,"smallBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new W(28800,"mediumBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new W(43200,"largeBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new W(5,"freeRacesPerTimePeriodModifier")),this.globalVar.modifiers.push(new W(300,"freeRacesTimePeriodModifier")),this.globalVar.modifiers.push(new W(28800,"autoFreeRacesMaxIdleTimePeriodModifier")),this.globalVar.modifiers.push(new W(5e6,"metersPerCoinsGrandPrixModifier")),this.globalVar.modifiers.push(new W(2e7,"metersPerRenownGrandPrixModifier")),this.globalVar.modifiers.push(new W(100,"grandPrixCoinRewardModifier")),this.globalVar.modifiers.push(new W(3,"grandPrixRenownRewardModifier")),this.globalVar.modifiers.push(new W(5e7,"grandPrixToken1MeterModifier")),this.globalVar.modifiers.push(new W(1e8,"grandPrixToken2MeterModifier")),this.globalVar.modifiers.push(new W(25e7,"grandPrixToken3MeterModifier")),this.globalVar.modifiers.push(new W(5e8,"grandPrixToken4MeterModifier")),this.globalVar.modifiers.push(new W(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new W(.02,"exhaustionGainGrandPrixModifier")),this.globalVar.modifiers.push(new W(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new W(25,"grandPrixBreedLevelRequiredModifier")),this.globalVar.modifiers.push(new W(.2,"weatherMoraleBoostModifier")),this.globalVar.modifiers.push(new W(.03,"focusMoraleLossModifier")),this.globalVar.modifiers.push(new W(.02,"burstMoraleBoostModifier")),this.globalVar.modifiers.push(new W(.01,"stumbleMoraleLossModifier")),this.globalVar.modifiers.push(new W(.05,"segmentCompleteMoraleBoostModifier")),this.globalVar.modifiers.push(new W(25,"abilityLevelCapModifier")),this.globalVar.modifiers.push(new W(1.5,"feedingFrenzyPositiveModifier")),this.globalVar.modifiers.push(new W(.9,"feedingFrenzyNegativeModifier")),this.globalVar.modifiers.push(new W(20,"maxDriftAmountModifier")),this.globalVar.modifiers.push(new W(4,"relayAbilityXpGainModifier")),this.globalVar.modifiers.push(new W(25,"maximumTraitNegativePercentModifier"));var e=.3,n=.1,l=1.025,c=1.05,d=.975,m=.95;this.globalVar.modifiers.push(new W(e*l,"horseDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n,"horseDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5.5,"horseDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1,"horseDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5*m,"horseDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5,"horseDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e*c,"cheetahDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(1.1*n,"cheetahDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(4.5,"cheetahDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1,"cheetahDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5,"cheetahDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5*d,"cheetahDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5*m,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5*m,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e*l,"warthogDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n,"warthogDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5*c,"warthogDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1*l,"warthogDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5*d,"warthogDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5*m,"warthogDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e,"monkeyDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n*m,"monkeyDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5,"monkeyDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1.1,"monkeyDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5*c,"monkeyDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5,"monkeyDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e,"goatDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n*l,"goatDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5*l,"goatDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1*d,"goatDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5*d,"goatDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5.5,"goatDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e*m,"geckoDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n,"geckoDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5*c,"geckoDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1,"geckoDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5.5,"geckoDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5,"geckoDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e*d,"dolphinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n*l,"dolphinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5,"dolphinDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1.1,"dolphinDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5,"dolphinDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5*d,"dolphinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(.33,"sharkDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n,"sharkDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5*d,"sharkDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1*l,"sharkDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5*m,"sharkDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5*m,"sharkDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e*d,"octopusDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n*m,"octopusDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5,"octopusDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1.1,"octopusDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5*l,"octopusDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5,"octopusDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(.27,"whaleDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n,"whaleDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5*c,"whaleDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1*c,"whaleDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5.5,"whaleDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5*m,"whaleDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e*m,"penguinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n,"penguinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5,"penguinDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1*l,"penguinDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5,"penguinDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5*c,"penguinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e*d,"caribouDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n*m,"caribouDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5.5,"caribouDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1*l,"caribouDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5*c,"caribouDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5,"caribouDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e,"salamanderDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n*l,"salamanderDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5*m,"salamanderDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1,"salamanderDefaultPowerModifier")),this.globalVar.modifiers.push(new W(5*c,"salamanderDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5,"salamanderDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new W(e*c,"foxDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new W(n,"foxDefaultAccelerationModifier")),this.globalVar.modifiers.push(new W(5*d,"foxDefaultStaminaModifier")),this.globalVar.modifiers.push(new W(1*l,"foxDefaultPowerModifier")),this.globalVar.modifiers.push(new W(4.5,"foxDefaultFocusModifier")),this.globalVar.modifiers.push(new W(5*c,"foxDefaultAdaptabilityModifier"))}InitializeAnimals(){var e=new k5;e.name="Horse",e.isAvailable=!0,this.calculateAnimalRacingStats(e);var n=new E5;n.name="Monkey",this.calculateAnimalRacingStats(n);var r=new P5;r.name="Hare",this.calculateAnimalRacingStats(r);var a=new xD;a.name="Warthog",this.calculateAnimalRacingStats(a);var o=new A5;o.name="Cheetah",this.calculateAnimalRacingStats(o);var s=new I5;s.name="Goat",this.calculateAnimalRacingStats(s);var l=new V5;l.name="Gecko",this.calculateAnimalRacingStats(l);var c=new O5;c.name="Dolphin",this.calculateAnimalRacingStats(c);var u=new N5;u.name="Shark",this.calculateAnimalRacingStats(u);var d=new F5;d.name="Octopus",this.calculateAnimalRacingStats(d);var m=new MD;m.name="Whale",this.calculateAnimalRacingStats(m);var v=new B5;v.name="Penguin",this.calculateAnimalRacingStats(v);var b=new L5;b.name="Caribou",this.calculateAnimalRacingStats(b);var y=new U5;y.name="Salamander",this.calculateAnimalRacingStats(y);var T=new H5;T.name="Fox",this.calculateAnimalRacingStats(T),this.globalVar.animals.push(e),this.globalVar.animals.push(o),this.globalVar.animals.push(r),this.globalVar.animals.push(s),this.globalVar.animals.push(n),this.globalVar.animals.push(l),this.globalVar.animals.push(c),this.globalVar.animals.push(u),this.globalVar.animals.push(d),this.globalVar.animals.push(v),this.globalVar.animals.push(b),this.globalVar.animals.push(y),this.globalVar.animals.push(T),this.globalVar.animals.push(a),this.globalVar.animals.push(m)}InitializeRelayTeams(){var e=new nf;e.isPrimaryDeck=!0,e.isAvailable=!0,e.name="Relay Team 1",e.deckNumber=1;var n=this.globalVar.animals.find(o=>"Horse"===o.getAnimalType());void 0!==n&&e.selectedAnimals.push(n),this.globalVar.animalDecks.push(e);for(var r=0;r<3;r++){var a=new nf;a.isAvailable=!0,a.deckNumber=r+2,a.name="Relay Team "+a.deckNumber,this.globalVar.animalDecks.push(a)}}InitializeTokenShop(){this.globalVar.tokenShop=[];var e=new ra,n=[],r=10,a=new Je;a.name="Apples",a.purchasePrice.push(this.getTokenResourceValue(1)),a.basePurchasePrice.push(this.getTokenResourceValue(1)),a.shortDescription="+1 Acceleration to a single animal",a.numberPurchasing=r,a.canHaveMultiples=!0,a.type=$.Food,a.infiniteAmount=!0,n.push(a);var o=new Je;o.name="Bananas",o.shortDescription="+1 Speed to a single animal",o.purchasePrice.push(this.getTokenResourceValue(1)),o.basePurchasePrice.push(this.getTokenResourceValue(1)),o.canHaveMultiples=!0,o.numberPurchasing=r,o.type=$.Food,o.infiniteAmount=!0,n.push(o);var s=new Je;s.name="Strawberries",s.shortDescription="+1 Endurance to a single animal",s.purchasePrice.push(this.getTokenResourceValue(1)),s.basePurchasePrice.push(this.getTokenResourceValue(1)),s.canHaveMultiples=!0,s.numberPurchasing=r,s.type=$.Food,s.infiniteAmount=!0,n.push(s);var l=new Je;l.name="Carrots",l.shortDescription="+1 Power to a single animal",l.purchasePrice.push(this.getTokenResourceValue(1)),l.basePurchasePrice.push(this.getTokenResourceValue(1)),l.canHaveMultiples=!0,l.numberPurchasing=r,l.type=$.Food,l.infiniteAmount=!0,n.push(l);var c=new Je;c.name="Turnips",c.shortDescription="+1 Focus to a single animal",c.purchasePrice.push(this.getTokenResourceValue(1)),c.basePurchasePrice.push(this.getTokenResourceValue(1)),c.canHaveMultiples=!0,c.numberPurchasing=r,c.type=$.Food,c.infiniteAmount=!0,n.push(c);var u=new Je;u.name="Oranges",u.shortDescription="+1 Adaptability to a single animal",u.purchasePrice.push(this.getTokenResourceValue(1)),u.basePurchasePrice.push(this.getTokenResourceValue(1)),u.canHaveMultiples=!0,u.numberPurchasing=r,u.type=$.Food,u.infiniteAmount=!0,n.push(u);var d=new Je;d.name="Circuit Race Breed XP Gain Certificate",d.shortDescription=this.getItemDescription(d.name),d.purchasePrice.push(this.getTokenResourceValue(1)),d.basePurchasePrice.push(this.getTokenResourceValue(1)),d.canHaveMultiples=!0,d.type=$.Consumable,d.infiniteAmount=!0,n.push(d);var m=new Je;m.name="Free Race Breed XP Gain Certificate",m.shortDescription=this.getItemDescription(m.name),m.purchasePrice.push(this.getTokenResourceValue(1)),m.basePurchasePrice.push(this.getTokenResourceValue(1)),m.canHaveMultiples=!0,m.type=$.Consumable,m.infiniteAmount=!0,n.push(m),e.name="Tier 1",e.itemList=n,this.globalVar.tokenShop.push(e);var v=new ra,b=[],y=new Je;y.name="Mangoes",y.shortDescription="+1 Breed Level to a single animal",y.purchasePrice.push(this.getTokenResourceValue(1)),y.basePurchasePrice.push(this.getTokenResourceValue(1)),y.canHaveMultiples=!0,y.numberPurchasing=2,y.type=$.Food,y.infiniteAmount=!0,b.push(y);var T=new Je;T.name="Coins",T.shortDescription="",T.purchasePrice.push(this.getTokenResourceValue(3)),T.basePurchasePrice.push(this.getTokenResourceValue(3)),T.canHaveMultiples=!0,T.numberPurchasing=5e3,T.type=$.Resources,T.infiniteAmount=!0,b.push(T);var k=new Je;k.name="Diminishing Returns Increase Certificate",k.shortDescription=this.getItemDescription(k.name),k.purchasePrice.push(this.getTokenResourceValue(5)),k.basePurchasePrice.push(this.getTokenResourceValue(5)),k.canHaveMultiples=!0,k.type=$.Consumable,k.infiniteAmount=!0,b.push(k);var C=new Je;C.name="Training Breed XP Gain Certificate",C.shortDescription=this.getItemDescription(C.name),C.purchasePrice.push(this.getTokenResourceValue(1)),C.basePurchasePrice.push(this.getTokenResourceValue(1)),C.canHaveMultiples=!0,C.type=$.Consumable,C.infiniteAmount=!0,b.push(C),v.name="Tier 2",v.itemList=b,this.globalVar.tokenShop.push(v);var R=new ra,Y=[],Q=new Je;Q.name=this.getEquipmentName(et.scaryMask),Q.shortDescription=this.getEquipmentDescription(Q.name),Q.purchasePrice.push(this.getTokenResourceValue(7)),Q.canHaveMultiples=!0,Q.infiniteAmount=!0,Q.type=$.Equipment,Y.push(Q);var ee=new Je;ee.name=this.getEquipmentName(et.runningShoes),ee.shortDescription=this.getEquipmentDescription(ee.name),ee.purchasePrice.push(this.getTokenResourceValue(7)),ee.canHaveMultiples=!0,ee.infiniteAmount=!0,ee.type=$.Equipment,Y.push(ee);var me=new Je;me.name=this.getEquipmentName(et.incense),me.shortDescription=this.getEquipmentDescription(me.name),me.purchasePrice.push(this.getTokenResourceValue(7)),me.canHaveMultiples=!0,me.infiniteAmount=!0,me.type=$.Equipment,Y.push(me);var pe=new Je;pe.name=this.getEquipmentName(et.athleticTape),pe.shortDescription=this.getEquipmentDescription(pe.name),pe.purchasePrice.push(this.getTokenResourceValue(7)),pe.canHaveMultiples=!0,pe.infiniteAmount=!0,pe.type=$.Equipment,Y.push(pe),R.name="Tier 3",R.itemList=Y,this.globalVar.tokenShop.push(R)}InitializeShop(){this.globalVar.shop=[];var e=new ra,n=[],u=new Je;u.name="Cheetah",u.purchasePrice.push(new oe("Coins",1e3)),u.canHaveMultiples=!1,u.type=$.Animal,n.push(u);var d=new Je;d.name="Warthog",d.purchasePrice.push(new oe("Coins",1e3)),d.canHaveMultiples=!1,d.type=$.Animal,n.push(d);var m=new Je;m.name="Goat",m.purchasePrice.push(new oe("Coins",2500)),m.canHaveMultiples=!1,m.type=$.Animal,m.isAvailable=!1,n.push(m);var v=new Je;v.name="Gecko",v.purchasePrice.push(new oe("Coins",2500)),v.canHaveMultiples=!1,v.type=$.Animal,v.isAvailable=!1,n.push(v);var b=new Je;b.name="Shark",b.purchasePrice.push(new oe("Coins",5e3)),b.canHaveMultiples=!1,b.type=$.Animal,b.isAvailable=!1,n.push(b);var y=new Je;y.name="Octopus",y.purchasePrice.push(new oe("Coins",5e3)),y.canHaveMultiples=!1,y.type=$.Animal,y.isAvailable=!1,n.push(y);var T=new Je;T.name="Caribou",T.purchasePrice.push(new oe("Coins",1e4)),T.canHaveMultiples=!1,T.type=$.Animal,T.isAvailable=!1,n.push(T);var k=new Je;k.name="Fox",k.purchasePrice.push(new oe("Coins",1e4)),k.canHaveMultiples=!1,k.type=$.Animal,k.isAvailable=!1,n.push(k),e.name="Animals",e.itemList=n,this.globalVar.shop.push(e);var C=new ra,R=[],Y=10,Q=new Je;Q.name="Apples",Q.shortDescription="+1 Acceleration to a single animal",Q.purchasePrice.push(new oe("Coins",Y)),Q.canHaveMultiples=!0,Q.type=$.Food,Q.infiniteAmount=!0,R.push(Q);var ee=new Je;ee.name="Bananas",ee.shortDescription="+1 Speed to a single animal",ee.purchasePrice.push(new oe("Coins",Y)),ee.canHaveMultiples=!0,ee.type=$.Food,ee.infiniteAmount=!0,R.push(ee);var me=new Je;me.name="Strawberries",me.shortDescription="+1 Endurance to a single animal",me.purchasePrice.push(new oe("Coins",Y)),me.canHaveMultiples=!0,me.type=$.Food,me.infiniteAmount=!0,R.push(me);var pe=new Je;pe.name="Carrots",pe.shortDescription="+1 Power to a single animal",pe.purchasePrice.push(new oe("Coins",Y)),pe.canHaveMultiples=!0,pe.type=$.Food,pe.infiniteAmount=!0,R.push(pe);var ce=new Je;ce.name="Turnips",ce.shortDescription="+1 Focus to a single animal",ce.purchasePrice.push(new oe("Coins",Y)),ce.canHaveMultiples=!0,ce.type=$.Food,ce.infiniteAmount=!0,R.push(ce);var ve=new Je;ve.name="Oranges",ve.shortDescription="+1 Adaptability to a single animal",ve.purchasePrice.push(new oe("Coins",Y)),ve.canHaveMultiples=!0,ve.type=$.Food,ve.infiniteAmount=!0,R.push(ve);var ye=new Je;ye.name="Mangoes",ye.shortDescription="+1 Breed Level to a single animal",ye.purchasePrice.push(new oe("Coins",100)),ye.canHaveMultiples=!0,ye.type=$.Food,ye.infiniteAmount=!0,R.push(ye),C.name="Food",C.itemList=R,this.globalVar.shop.push(C);var Ue=new ra,yt=[];this.globalVar.trainingOptions.filter(zn=>!zn.isAvailable).forEach(zn=>{var gn=new Je;gn.name=zn.trainingName,gn.shortDescription=zn.getStatGainDescription(),gn.purchasePrice.push(new oe("Coins",zn.purchasePrice)),gn.canHaveMultiples=!1,gn.type=$.Training,(zn.facilitySize===ht.Medium||zn.facilitySize===ht.Large)&&(gn.isAvailable=!1,gn.additionalIdentifier=zn.facilitySize.toString()),yt.push(gn)}),Ue.name="Trainings",Ue.itemList=yt,this.globalVar.shop.push(Ue);var wt=new ra,Et=[];this.globalVar.animals.forEach(zn=>{zn.availableAbilities.forEach(gn=>{if(!gn.isAbilityPurchased){var kn=new Je;kn.name=zn.getAnimalType()+" Ability: "+gn.name,kn.purchasePrice.push(new oe("Coins",gn.purchasePrice)),kn.canHaveMultiples=!1,kn.type=$.Ability,kn.additionalIdentifier=gn.name,kn.isAvailable=zn.isAvailable,Et.push(kn)}})}),wt.name="Abilities",wt.itemList=Et,this.globalVar.shop.push(wt);var Rt=new ra,lt=[],On=new Je;On.name="Stopwatch",On.purchasePrice.push(this.getMedalResourceValue(10)),On.basePurchasePrice.push(this.getMedalResourceValue(10)),On.quantityMultiplier=2.5,On.totalShopQuantity=2,On.canHaveMultiples=!0,On.type=$.Specialty,lt.push(On);var se=new Je;se.name="Animal Handler",se.purchasePrice.push(this.getCoinsResourceValue(2e3)),se.basePurchasePrice.push(this.getCoinsResourceValue(2e3)),se.quantityAdditive=2e3,se.totalShopQuantity=20,se.canHaveMultiples=!0,se.type=$.Specialty,lt.push(se);var S=new Je;S.name="Course Maps",S.purchasePrice.push(this.getMedalResourceValue(2)),S.basePurchasePrice.push(this.getMedalResourceValue(2)),S.quantityMultiplier=2,S.totalShopQuantity=5,S.isAvailable=!1,S.canHaveMultiples=!0,S.type=$.Specialty,lt.push(S);var tt=new Je;tt.name="Stockbreeder",tt.purchasePrice.push(this.getCoinsResourceValue(500)),tt.basePurchasePrice.push(this.getCoinsResourceValue(500)),tt.canHaveMultiples=!1,tt.type=$.Specialty,lt.push(tt);var bn=new Je;bn.name="Team Manager",bn.purchasePrice.push(this.getMedalResourceValue(3)),bn.basePurchasePrice.push(this.getMedalResourceValue(3)),bn.canHaveMultiples=!0,bn.quantityMultiplier=2,bn.totalShopQuantity=19,bn.type=$.Specialty,lt.push(bn);var kt=new Je;kt.name="Scouts",kt.purchasePrice.push(this.getCoinsResourceValue(1e4)),kt.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),kt.canHaveMultiples=!1,kt.isAvailable=!1,kt.type=$.Specialty,lt.push(kt);var nn=new Je;nn.name="Money Mark",nn.purchasePrice.push(this.getCoinsResourceValue(500)),nn.basePurchasePrice.push(this.getCoinsResourceValue(500)),nn.canHaveMultiples=!1,nn.type=$.Specialty,lt.push(nn);var Ze=new Je;Ze.name="National Races",Ze.purchasePrice.push(this.getCoinsResourceValue(1e4)),Ze.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),Ze.canHaveMultiples=!1,Ze.isAvailable=!1,Ze.type=$.Specialty,lt.push(Ze);var dt,pn=new Je;pn.name="International Races",pn.purchasePrice.push(this.getCoinsResourceValue(5e4)),pn.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),pn.canHaveMultiples=!1,pn.isAvailable=!1,pn.type=$.Specialty,lt.push(pn),(dt=new Je).name="Incubator Upgrade Lv1",dt.purchasePrice.push(this.getCoinsResourceValue(5e3)),dt.basePurchasePrice.push(this.getCoinsResourceValue(5e3)),dt.canHaveMultiples=!1,dt.isAvailable=!1,dt.type=$.Specialty,lt.push(dt),(dt=new Je).name="Incubator Upgrade Lv2",dt.purchasePrice.push(this.getCoinsResourceValue(1e4)),dt.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),dt.canHaveMultiples=!1,dt.isAvailable=!1,dt.type=$.Specialty,lt.push(dt),(dt=new Je).name="Incubator Upgrade Lv3",dt.purchasePrice.push(this.getCoinsResourceValue(25e3)),dt.basePurchasePrice.push(this.getCoinsResourceValue(25e3)),dt.canHaveMultiples=!1,dt.isAvailable=!1,dt.type=$.Specialty,lt.push(dt),(dt=new Je).name="Incubator Upgrade Lv4",dt.purchasePrice.push(this.getCoinsResourceValue(5e4)),dt.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),dt.canHaveMultiples=!1,dt.isAvailable=!1,dt.type=$.Specialty,lt.push(dt);var _n=new Je;_n.name="Whistle",_n.purchasePrice.push(this.getCoinsResourceValue(2500)),_n.basePurchasePrice.push(this.getCoinsResourceValue(2500)),_n.totalShopQuantity=1,_n.canHaveMultiples=!1,_n.isAvailable=!1,_n.type=$.Specialty,lt.push(_n);var Wn=new Je;Wn.name="Golden Whistle",Wn.purchasePrice.push(this.getCoinsResourceValue(15e3)),Wn.basePurchasePrice.push(this.getCoinsResourceValue(15e3)),Wn.totalShopQuantity=1,Wn.canHaveMultiples=!1,Wn.isAvailable=!1,Wn.type=$.Specialty,lt.push(Wn);var qn=new Je;qn.name="Talent Point Voucher",qn.purchasePrice.push(this.getMedalResourceValue(25)),qn.basePurchasePrice.push(this.getMedalResourceValue(25)),qn.infiniteAmount=!0,qn.canHaveMultiples=!0,qn.quantityAdditive=25,qn.isAvailable=!1,qn.type=$.Specialty,lt.push(qn),Rt.name="Specialty",Rt.itemList=lt,this.globalVar.shop.push(Rt);var ei=new ra,Nn=[],ti=new Je;ti.name=this.getEquipmentName(et.headband),ti.shortDescription=this.getEquipmentDescription(ti.name),ti.purchasePrice.push(this.getCoinsResourceValue(1e3)),ti.canHaveMultiples=!0,ti.infiniteAmount=!0,ti.type=$.Equipment,Nn.push(ti);var Xn=new Je;Xn.name=this.getEquipmentName(et.pendant),Xn.shortDescription=this.getEquipmentDescription(Xn.name),Xn.purchasePrice.push(this.getCoinsResourceValue(1e3)),Xn.canHaveMultiples=!0,Xn.infiniteAmount=!0,Xn.type=$.Equipment,Nn.push(Xn);var Yn=new Je;Yn.name=this.getEquipmentName(et.blinders),Yn.shortDescription=this.getEquipmentDescription(Yn.name),Yn.purchasePrice.push(this.getCoinsResourceValue(1e3)),Yn.canHaveMultiples=!0,Yn.infiniteAmount=!0,Yn.type=$.Equipment,Nn.push(Yn);var Gn=new Je;Gn.name=this.getEquipmentName(et.quickSnack),Gn.shortDescription=this.getEquipmentDescription(Gn.name),Gn.purchasePrice.push(this.getCoinsResourceValue(1e3)),Gn.canHaveMultiples=!0,Gn.infiniteAmount=!0,Gn.type=$.Equipment,Nn.push(Gn);var Fn=new Je;Fn.name=this.getEquipmentName(et.redBaton),Fn.shortDescription=this.getEquipmentDescription(Fn.name),Fn.purchasePrice.push(this.getCoinsResourceValue(2500)),Fn.canHaveMultiples=!0,Fn.infiniteAmount=!0,Fn.isAvailable=!1,Fn.type=$.Equipment,Nn.push(Fn);var bt=new Je;bt.name=this.getEquipmentName(et.blueBaton),bt.shortDescription=this.getEquipmentDescription(bt.name),bt.purchasePrice.push(this.getCoinsResourceValue(2500)),bt.canHaveMultiples=!0,bt.infiniteAmount=!0,bt.isAvailable=!1,bt.type=$.Equipment,Nn.push(bt);var gt=new Je;gt.name=this.getEquipmentName(et.violetBaton),gt.shortDescription=this.getEquipmentDescription(gt.name),gt.purchasePrice.push(this.getCoinsResourceValue(2500)),gt.canHaveMultiples=!0,gt.infiniteAmount=!0,gt.isAvailable=!1,gt.type=$.Equipment,Nn.push(gt);var ln=new Je;ln.name=this.getEquipmentName(et.orangeBaton),ln.shortDescription=this.getEquipmentDescription(ln.name),ln.purchasePrice.push(this.getCoinsResourceValue(2500)),ln.canHaveMultiples=!0,ln.infiniteAmount=!0,ln.isAvailable=!1,ln.type=$.Equipment,Nn.push(ln);var rn=new Je;rn.name=this.getEquipmentName(et.greenBaton),rn.shortDescription=this.getEquipmentDescription(rn.name),rn.purchasePrice.push(this.getCoinsResourceValue(2500)),rn.canHaveMultiples=!0,rn.infiniteAmount=!0,rn.isAvailable=!1,rn.type=$.Equipment,Nn.push(rn);var Bn=new Je;Bn.name=this.getEquipmentName(et.yellowBaton),Bn.shortDescription=this.getEquipmentDescription(Bn.name),Bn.purchasePrice.push(this.getCoinsResourceValue(2500)),Bn.canHaveMultiples=!0,Bn.infiniteAmount=!0,Bn.isAvailable=!1,Bn.type=$.Equipment,Nn.push(Bn),ei.name="Equipment",ei.itemList=Nn,this.globalVar.shop.push(ei)}getEquipmentName(e){return e===et.headband?"Headband":e===et.pendant?"Pendant":e===et.blinders?"Blinders":e===et.quickSnack?"Quick Snack":e===et.carrotOnAStick?"Carrot on a Stick":e===et.redBaton?"Red Baton":e===et.blueBaton?"Blue Baton":e===et.violetBaton?"Violet Baton":e===et.yellowBaton?"Yellow Baton":e===et.greenBaton?"Green Baton":e===et.orangeBaton?"Orange Baton":e===et.scaryMask?"Scary Mask":e===et.runningShoes?"Running Shoes":e===et.incense?"Incense":e===et.athleticTape?"Athletic Tape":""}getEquipmentEnum(e){return"Headband"===e?et.headband:"Pendant"===e?et.pendant:"Blinders"===e?et.blinders:"Quick Snack"===e?et.quickSnack:"Carrot on a Stick"===e?et.carrotOnAStick:"Red Baton"===e?et.redBaton:"Blue Baton"===e?et.blueBaton:"Violet Baton"===e?et.violetBaton:"Yellow Baton"===e?et.yellowBaton:"Green Baton"===e?et.greenBaton:"Orange Baton"===e?et.orangeBaton:"Scary Mask"===e?et.scaryMask:"Running Shoes"===e?et.runningShoes:"Incense"===e?et.incense:"Athletic Tape"===e?et.athleticTape:et.none}InitializeBarns(){if(null==this.globalVar.barns||0===this.globalVar.barns.length){this.globalVar.barns=[];var n=new qv;if(n.barnNumber=1,n.isLocked=!1,n.size=ht.Small,n.purchasePrice=0,n.facilityUpgradePrice=500,n.upgradePrice=500,null!=this.globalVar.animals&&this.globalVar.animals.length>0){var r=this.globalVar.animals.find(s=>s.type===L.Horse);null!=r&&(r.associatedBarnNumber=n.barnNumber)}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.globalVar.barns.push(n);for(var a=2;a<=15;a++){var o=new qv;o.barnNumber=a,o.isLocked=!0,o.purchasePrice=500*(a-1),o.facilityUpgradePrice=500,o.size=ht.Small,this.globalVar.barns.push(o)}}}InitializeGlobalTrainingOptions(){this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.ShortTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Sprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.TrailRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.MoveLogs)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Footwork)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.PracticeCommands)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.ScentTraining)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.SmallWagonTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Sidestep)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.MediumTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.UphillRun)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Puzzles)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.MoveRocks)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.LateralVerticalDrill)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.DodgeBall)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.BurstPractice)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Acrobatics)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.LongTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.VehicleTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.LogJump)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Meditation)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.WindSprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.GreenwayHike)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Marathon)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.AgilityCourse))}IncreaseCircuitRank(){var e=this.globalVar.circuitRank,n=e.replace(/([A-Z])[^A-Z]*$/,function(c){var u=c.charCodeAt(0);return 65===u?String.fromCharCode(u)+"Z":String.fromCharCode(--u)}),r=!1;this.utilityService.getNumericValueOfCircuitRank(this.globalVar.monoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.duoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.rainbowRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),r&&(this.globalVar.notifications.isNewSpecialRaceAvailable=!0),this.globalVar.circuitRank=n;var l=this.checkCircuitRankRewards();return this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),l}IncreaseLocalRaceRank(e){var n="";e===Kt.Mono&&(n=this.globalVar.monoRank),e===Kt.Duo&&(n=this.globalVar.duoRank),e===Kt.Rainbow&&(n=this.globalVar.rainbowRank);var r=n.replace(/([A-Z])[^A-Z]*$/,function(a){var o=a.charCodeAt(0);return 65===o?String.fromCharCode(o)+"Z":String.fromCharCode(--o)});e===Kt.Mono&&(this.globalVar.monoRank=r,this.GenerateMonoRaces(this.globalVar.monoRank)),e===Kt.Duo&&(this.globalVar.duoRank=r,this.GenerateDuoRaces(this.globalVar.duoRank)),e===Kt.Rainbow&&(this.globalVar.rainbowRank=r,this.GenerateRainbowRaces(this.globalVar.rainbowRank))}increaseGrandPrixRaceRank(){if(null!=this.globalVar.eventRaceData){var n=this.globalVar.eventRaceData.rank.replace(/([A-Z])[^A-Z]*$/,function(r){var a=r.charCodeAt(0);return 65===a?String.fromCharCode(a)+"Z":String.fromCharCode(--a)});this.globalVar.eventRaceData.rank=n,this.initialGrandPrixSetup(this.globalVar.eventRaceData.rank),this.globalVar.eventRaceData.initialSetupComplete=!0,this.globalVar.notifications.isEventRaceNowActive=!0}}getRewardReceiveText(e){return this.globalVar.settings.get("useNumbersForCircuitRank")?"Reach circuit rank "+e+" to receive: \n":"Reach circuit rank "+this.utilityService.getCircuitRankFromNumericValue(e)+" to receive: \n"}checkCircuitRankRewards(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),n=["",""];if(1===e&&(this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(2)+"Mono Races"),2===e&&(this.globalVar.unlockables.set("monoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,n=["Mono Race",this.utilityService.getSanitizedHtml("A new race type has been unlocked! Take part in a Mono Race where you run an extended race as only one course type. Progressing through this race type generates new interest in your facility, which means it's time to make some upgrades. Gain Facility Level points from winning these races that increase your Diminishing Returns max value. <br/> <br/><em>Select this race and others like it by choosing the 'Special Race' option from the 'Races' menu.</em>")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(3)+"Monkey"),3===e){var r=this.globalVar.animals.find(ce=>ce.type===L.Monkey);if(null!=r&&(r.isAvailable=!0,this.unlockAnimalAbilities(r),this.unlockOtherRaceCourseTypeAnimals(r.raceCourseType),null!=(a=this.globalVar.animalDecks.find(ce=>ce.isPrimaryDeck)))){var o=!1;a.selectedAnimals.forEach(ce=>{ce.raceCourseType===(null==r?void 0:r.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(r)}n=["Monkey",this.getAnimalDescription("Monkey")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(4)+"Coaching"}else if(4===e){if(this.globalVar.unlockables.set("coaching",!0),null!=(s=this.globalVar.shop.find(ce=>"Specialty"===ce.name))){var l=s.itemList.find(ce=>"Whistle"===ce.name);null!=l&&(l.isAvailable=!0)}n=["Coaching","Take charge of your animal's training by giving them some coaching yourself. Visit a barn with an animal assigned and select 'Coach' to get started."];var c=500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+c+" Coins"}else if(5===e)c=500,null==(u=this.globalVar.resources.find(ve=>"Coins"===ve.name))?this.globalVar.resources.push(new oe("Coins",c)):u.amount+=c,n=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(6)+"1 Team Manager";else if(6===e){c=1,null==(u=this.globalVar.resources.find(ye=>"Team Manager"===ye.name))?(this.globalVar.resources.push(new oe("Team Manager",c,$.Specialty)),null!=(d=this.globalVar.animalDecks.find(ye=>ye.isPrimaryDeck))&&(d.autoRunFreeRace=!0)):u.amount+=c,n=[c+" Team Manager","As your popularity has grown, you've attracted some new faces to your racing facility. Each Team Manager you receive will automatically run 1 free race per reset period. Buy more from the Shop."];var m=1e3;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(7)+"Barn Specializations"}else if(7===e)this.globalVar.unlockables.set("barnSpecializations",!0),n=["Barn Specializations","As your training facility grows, so should your barns. At barn upgrade level 10, choose what direction you want your barn to progress in. Each option benefits your animals in different ways, so choose carefully."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(8)+"Headband";else if(8===e)c=1,null==(u=this.globalVar.resources.find(Ue=>"Headband"===Ue.name))?this.globalVar.resources.push(new oe("Headband",c,$.Equipment)):u.amount+=c,n=[c+" Headband","Equipment can be handled when viewing an animal from the Animals tab."],m=1e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(9)+m+" Coins";else if(9===e)c=1e3,null==(u=this.globalVar.resources.find(ye=>"Coins"===ye.name))?this.globalVar.resources.push(new oe("Coins",c)):u.amount+=c,n=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Hare";else if(10===e){var v=this.globalVar.animals.find(ve=>ve.type===L.Hare);null!=v&&(v.isAvailable=!0,this.unlockAnimalAbilities(v)),this.sortAnimalOrder(),n=["Hare",this.getAnimalDescription("Hare")],c=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(12)+c+" Stat Increasing Food"}else if(12===e)this.increaseAllFood(c=20),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(13)+"Barn Row 2";else if(13===e){this.globalVar.unlockables.set("barnRow2",!0),n=["Barn Row 2",""];var b=1;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(14)+"Attraction Specialization"}else if(14===e)this.globalVar.unlockables.set("attractionSpecialization",!0),n=["Attraction Specialization",this.getSpecializationDescription("Attraction")+"<br/><br/><em>Barn Specializations are available to select once you upgrade a barn to level 10.</em>"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(15)+"Dolphin";else if(15===e){var y=this.globalVar.animals.find(ce=>ce.type===L.Dolphin);null!=y&&(y.isAvailable=!0,this.unlockAnimalAbilities(y),this.unlockOtherRaceCourseTypeAnimals(y.raceCourseType),null!=(a=this.globalVar.animalDecks.find(ve=>ve.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(ye=>{ye.raceCourseType===(null==y?void 0:y.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(y))),this.sortAnimalOrder(),n=["Dolphin",this.getAnimalDescription("Dolphin")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(16)+"1 Pendant"}else if(16===e)c=1,null==(u=this.globalVar.resources.find(ye=>"Pendant"===ye.name))?this.globalVar.resources.push(new oe("Pendant",c,$.Equipment)):u.amount+=c,n=[c+" Pendant","Equipment can be handled when viewing an animal from the Animals tab."],c=5,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(18)+c+" Renown";else if(18===e)b=5,null==(T=this.globalVar.resources.find(ve=>"Renown"===ve.name))?this.globalVar.resources.push(new oe("Renown",b)):T.amount+=b,n=[b+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+"Grand Prix";else if(20===e){var d;this.globalVar.unlockables.set("grandPrix",!0),null!=(d=this.globalVar.animalDecks.find(ye=>ye.isPrimaryDeck))&&(d.isEventDeck=!0),n=["Grand Prix","Now that you've climbed the ranks and your racing team has turned some heads, you've received an invite to the Grand Prix invitational. Twice per week, a marathon style race runs over multiple days. Check the 'Event Races' tab to see more info."],c=50,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(22)+c+" Stat Increasing Food"}else 22===e?(this.increaseAllFood(c=50),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],m=1500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(23)+m+" Coins"):23===e&&(c=1500,null==(u=this.globalVar.resources.find(ye=>"Coins"===ye.name))?this.globalVar.resources.push(new oe("Coins",c)):u.amount+=c,n=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(25)+"Whale");if(25===e){var k=this.globalVar.animals.find(ce=>ce.type===L.Whale);null!=k&&(k.isAvailable=!0,this.unlockAnimalAbilities(k)),this.sortAnimalOrder(),n=["Whale",this.getAnimalDescription("Whale")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(27)+"Duo Races"}else if(27===e)this.globalVar.unlockables.set("duoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,this.unlockTier2ShopItems(),n=["Duo Races","A new race type has been unlocked! Race in pairs to complete this long distance race. Success here will generate more interest for your facility, this time drawing in curious researchers. Gain Research Levels that improve incubator results."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(29)+"Barn Row 3";else if(29===e){this.globalVar.unlockables.set("barnRow3",!0),n=["Barn Row 3",""];var C=2500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(30)+C+" Coins"}else if(30===e){var R=2500;null==(u=this.globalVar.resources.find(ye=>"Coins"===ye.name))?this.globalVar.resources.push(new oe("Coins",R)):u.amount+=R,n=[R+" Coins",""],c=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(32)+c+" Mangoes"}else if(32===e)c=1,null==(u=this.globalVar.resources.find(ye=>"Blue Baton"===ye.name))?this.globalVar.resources.push(new oe("Blue Baton",c,$.Equipment)):u.amount+=c,n=[c+" Blue Baton","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(33)+20+" Mangoes";else if(33===e)c=20,null==(u=this.globalVar.resources.find(ye=>"Mangoes"===ye.name))?this.globalVar.resources.push(new oe("Mangoes",c,$.Food)):u.amount+=c,n=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(35)+"Penguin";else if(35===e){var Q=this.globalVar.animals.find(ve=>ve.type===L.Penguin);null!=Q&&(Q.isAvailable=!0,this.unlockAnimalAbilities(Q),this.unlockOtherRaceCourseTypeAnimals(Q.raceCourseType),null!=(a=this.globalVar.animalDecks.find(ye=>ye.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(Ue=>{Ue.raceCourseType===(null==Q?void 0:Q.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(Q))),this.sortAnimalOrder(),n=["Penguin",this.getAnimalDescription("Penguin")+"<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getTundraDescription()+"</em>")],C=3500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(37)+C+" Coins"}else if(37===e)R=3500,null==(u=this.globalVar.resources.find(ye=>"Coins"===ye.name))?this.globalVar.resources.push(new oe("Coins",R)):u.amount+=R,n=[R+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(38)+"5 Medals";else if(38===e)null==(u=this.globalVar.resources.find(ve=>"Medals"===ve.name))?this.globalVar.resources.push(new oe("Medals",5)):u.amount+=5,n=["5 Medals",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(40)+"Barn Row 3";else if(40===e)this.globalVar.unlockables.set("barnRow4",!0),n=["Barn Row 4",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(41)+"Research Center Specialization";else if(41===e)this.globalVar.unlockables.set("researchCenterSpecialization",!0),n=["Research Center Specialization",this.getSpecializationDescription("Research Center")],c=250,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(43)+c+" Stat Increasing Food";else if(43===e)this.increaseAllFood(c=250),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(45)+"Salamander";else if(45===e){var a,me=this.globalVar.animals.find(ve=>ve.type===L.Salamander);null!=me&&(me.isAvailable=!0,this.unlockAnimalAbilities(me),this.unlockOtherRaceCourseTypeAnimals(me.raceCourseType),null!=(a=this.globalVar.animalDecks.find(ye=>ye.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(Ue=>{Ue.raceCourseType===(null==me?void 0:me.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(me))),this.sortAnimalOrder(),n=["Salamander",this.getAnimalDescription("Salamander")+"<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getVolcanicDescription()+"</em>")],b=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(47)+b+" Renown"}else if(47===e)b=10,null==(T=this.globalVar.resources.find(Ue=>"Renown"===Ue.name))?this.globalVar.resources.push(new oe("Renown",b)):T.amount+=b,n=[b+" Renown",""],R=15e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(50)+R+" Coins";else if(50===e)C=15e3,null==(u=this.globalVar.resources.find(ye=>"Coins"===ye.name))?this.globalVar.resources.push(new oe("Coins",C)):u.amount+=C,n=[C+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(53)+"Rainbow Races";else if(53===e){var s;if(this.globalVar.unlockables.set("rainbowRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(s=this.globalVar.shop.find(ve=>"Specialty"===ve.name))){var pe=s.itemList.find(ve=>"Talent Point Voucher"===ve.name);null!=pe&&(pe.isAvailable=!0)}n=["Rainbow Race","A new race type has been unlocked! This race requires a full team effort spanning all five course types. Your team of researchers are on hand for these races, coming up with more efficient ways to win. Gain Talent Tree Points that can be spent to improve various course types."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(55)+"Amethyst Orb"}else if(55===e)this.globalVar.resources.push(new oe("Amethyst Orb",1,$.Equipment)),this.globalVar.unlockables.set("orbs",!0),n=["Amethyst Orb","You receive a glowing violet orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(58)+"Barn Row 4";else if(58===e)this.globalVar.unlockables.set("barnRow5",!0),n=["Barn Row 5",""],b=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(60)+"Sapphire Orb";else if(60===e)this.globalVar.resources.push(new oe("Sapphire Orb",1,$.Equipment)),n=["Sapphire Orb","You receive a glowing blue orb. What it does is a mystery."],c=100,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(62)+c+" Mangoes";else if(62===e){var u;c=100,null==(u=this.globalVar.resources.find(ye=>"Mangoes"===ye.name))?this.globalVar.resources.push(new oe("Mangoes",c,$.Food)):u.amount+=c,n=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(65)+"Amber Orb"}else if(65===e)this.globalVar.resources.push(new oe("Amber Orb",1,$.Equipment)),n=["Amber Orb","You receive a glowing orange orb. What it does is a mystery."],c=25,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(67)+c+" Renown";else if(67===e){var T;b=25,null==(T=this.globalVar.resources.find(ye=>"Renown"===ye.name))?this.globalVar.resources.push(new oe("Renown",b)):T.amount+=b,n=[b+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(70)+"Topaz Orb"}else 70===e?(this.globalVar.resources.push(new oe("Topaz Orb",1,$.Equipment)),n=["Topaz Orb","You receive a glowing yellow orb. What it does is a mystery."],c=500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(73)+c+" Stat Increasing Food Items"):73===e?(this.increaseAllFood(c=500),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(75)+"Emerald Orb"):75===e?(this.globalVar.resources.push(new oe("Emerald Orb",1,$.Equipment)),n=["Emerald Orb","You receive a glowing green orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(78)+"Ruby Orb"):78===e&&(this.globalVar.resources.push(new oe("Ruby Orb",1,$.Equipment)),n=["Ruby Orb","You receive a glowing red orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription="More Coming Soon!");return n}increaseAllFood(e){var n=this.globalVar.resources.find(c=>"Apples"===c.name);null==n?this.globalVar.resources.push(new oe("Apples",e,$.Food)):n.amount+=e;var r=this.globalVar.resources.find(c=>"Bananas"===c.name);null==r?this.globalVar.resources.push(new oe("Bananas",e,$.Food)):r.amount+=e;var a=this.globalVar.resources.find(c=>"Oranges"===c.name);null==a?this.globalVar.resources.push(new oe("Oranges",e,$.Food)):a.amount+=e;var o=this.globalVar.resources.find(c=>"Strawberries"===c.name);null==o?this.globalVar.resources.push(new oe("Strawberries",e,$.Food)):o.amount+=e;var s=this.globalVar.resources.find(c=>"Carrots"===c.name);null==s?this.globalVar.resources.push(new oe("Carrots",e,$.Food)):s.amount+=e;var l=this.globalVar.resources.find(c=>"Turnips"===c.name);null==l?this.globalVar.resources.push(new oe("Turnips",e,$.Food)):l.amount+=e}GenerateCircuitRacesForRank(e){this.globalVar.circuitRaces=[];var n=this.utilityService.getNumericValueOfCircuitRank(e),r=1,a=60,o=15,s=100,l=1.125,c=80*n,u=1.1,d=.9,b=3;"Z"===e?b=1:"Y"==e&&(b=2);for(var y=0;y<b;y++){var T=[],k="C"+n+y;if(n<=2){c=-37;var C=new Hn;C.courseType=z.Flatland,2===n?0===y?C.terrain=new pi($e.Sunny):1===y&&(C.terrain=new pi($e.Rainy)):C.terrain=new pi($e.Sunny),C.distance=Math.round(s*l**n+c),T.push(C)}else if(n<=14){c=3===n?5*n:35*n,(R=[]).push(z.Flatland),R.push(z.Mountain);var Y=this.getCourseTypeInRandomOrderSeeded(R,k+"cl1"),Q=this.utilityService.getRandomSeededNumber(20,80,k+"l1d"),ve=(ee=this.utilityService.getRandomSeededNumber(20,80,k+"l2d"))*(pe=a/(Q+ee));(ce=Q*pe)<o?(ce=0,ve=a):ve<o&&(ve=0,ce=a),ce>0&&((ye=new Hn).courseType=Y[0],ye.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l1r")*(ce/a),ye.terrain=this.getRandomTerrain(ye.courseType,k+"lt1d"),T.push(ye)),ve>0&&((Ue=new Hn).courseType=Y[1],Ue.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l2r")*(ve/a),Ue.terrain=this.getRandomTerrain(Ue.courseType,k+"lt2d"),T.push(Ue))}else{o=10,15===n?c=50*n:16===n&&(c=60*n);var R=[];n<=43?(R.push(z.Flatland),R.push(z.Mountain),R.push(z.Ocean)):n<=51?(R.push(z.Flatland),R.push(z.Mountain),R.push(z.Ocean),R.push(z.Tundra)):(R.push(z.Flatland),R.push(z.Mountain),R.push(z.Ocean),R.push(z.Tundra),R.push(z.Volcanic)),Y=this.getCourseTypeInRandomOrderSeeded(R,k+"courses1"),Q=this.utilityService.getRandomSeededNumber(20,80,k+"l1d");var pe,ce,ye,Ue,ee=this.utilityService.getRandomSeededNumber(20,80,k+"l2d"),yt=this.utilityService.getRandomSeededNumber(20,80,k+"l3d"),wt=(ve=ee*(pe=a/(Q+ee+yt)),yt*pe);if((ce=Q*pe)<o?(ve+=ce/2,wt+=ce/2,ce=0):ve<o?(ce+=ve/2,wt+=ve/2,ve=0):wt<o&&(ce+=wt/2,ve+=wt/2,wt=0),ce>0&&((ye=new Hn).courseType=Y[0],ye.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l1r")*(ce/a),ye.terrain=this.getRandomTerrain(ye.courseType,k+"tl1d"),T.push(ye)),ve>0&&((Ue=new Hn).courseType=Y[1],Ue.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l2r")*(ve/a),Ue.terrain=this.getRandomTerrain(Ue.courseType,k+"tl2d"),T.push(Ue)),wt>0){var Et=new Hn;Et.courseType=Y[2],Et.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l3r")*(wt/a),Et.terrain=this.getRandomTerrain(Et.courseType,k+"tl3d"),T.push(Et)}}var Rt=0;T.forEach(lt=>{Rt+=lt.distance}),T.forEach(lt=>{lt.pathData=this.GenerateRaceLegPaths(lt,Rt)}),this.globalVar.circuitRaces.push(new yi(T,e,!0,r,Rt,a,this.GenerateCircuitRaceRewards(e),void 0,void 0,Oe.circuit)),r+=1}}reorganizeLegsByDeckOrder(e,n){return n.isCourseOrderActive?e.sort((r,a)=>n.courseTypeOrder.indexOf(r.courseType)-n.courseTypeOrder.indexOf(a.courseType)):e}reorganizeAnimalsByDeckOrder(e,n){return n.isCourseOrderActive?e.sort((r,a)=>n.courseTypeOrder.indexOf(r.raceCourseType)-n.courseTypeOrder.indexOf(a.raceCourseType)):e}getCourseTypeInRandomOrder(e){for(var n=[],r=e.length,a=0;a<r;a++){var o=this.utilityService.getRandomInteger(1,e.length);n.push(e[o-1]),e=e.filter(s=>s!==e[o-1])}return n}getCourseTypeInRandomOrderSeeded(e,n="seeded"){for(var r=[],a=e.length,o=0;o<a;o++){var s=this.utilityService.getRandomSeededInteger(1,e.length,n);r.push(e[s-1]),e=e.filter(l=>l!==e[s-1])}return r}getRandomTerrain(e,n){var r=[];e===z.Flatland||e===z.Mountain?(r.push($e.Sunny),r.push($e.Rainy),r.push($e.Stormy),r.push($e.Torrid),r.push($e.Snowfall)):e===z.Ocean?(r.push($e.Sunny),r.push($e.Maelstrom),r.push($e.Stormy),r.push($e.Snowfall)):e===z.Tundra?(r.push($e.Sunny),r.push($e.Hailstorm),r.push($e.Stormy),r.push($e.Snowfall)):e===z.Volcanic&&(r.push($e.Sunny),r.push($e.Ashfall),r.push($e.Stormy),r.push($e.Torrid));var a;return a=null!=n?this.utilityService.getRandomSeededInteger(1,r.length,n):this.utilityService.getRandomInteger(1,r.length),new pi(r[a-1])}getRandomGrandPrixWeatherCluster(e,n){var r=[];r.push(Hi.clearSkies),r.push(Hi.coldSpell),r.push(Hi.inclementWeather);var o=r[(null!=e?this.utilityService.getRandomSeededInteger(1,r.length,e):this.utilityService.getRandomInteger(1,r.length))-1];if(this.globalVar.eventRaceData.animalData.length>0){var s=.2,l=this.globalVar.modifiers.find(c=>"weatherMoraleBoostModifier"===c.text);void 0!==l&&(s=l.value),this.globalVar.eventRaceData.animalData.forEach(c=>{var u=this.globalVar.animals.find(d=>d.type===c.associatedAnimalType);void 0!==u&&(void 0!==n&&this.animalGainsMoraleBoostFromWeather(u.raceCourseType,n)&&(c.morale-=+s),this.animalGainsMoraleBoostFromWeather(u.raceCourseType,o)&&(c.morale+=+s))})}return o}animalGainsMoraleBoostFromWeather(e,n){var r=!1;return(n===Hi.clearSkies&&(e===z.Volcanic||e===z.Flatland)||n===Hi.inclementWeather&&e===z.Ocean||n===Hi.coldSpell&&(e===z.Tundra||e===z.Mountain))&&(r=!0),r}getRandomGrandPrixTerrainFromWeatherCluster(e,n,r){var a=[];e===Hi.clearSkies?(a.push($e.Sunny),a.push($e.Torrid),a.push($e.Ashfall)):e===Hi.coldSpell?(a.push($e.Snowfall),a.push($e.Hailstorm),a.push($e.Sunny)):e===Hi.inclementWeather&&(a.push($e.Rainy),a.push($e.Stormy),a.push($e.Maelstrom),a.push($e.Hailstorm)),n===z.Flatland&&(a=a.filter(s=>s!==$e.Ashfall&&s!==$e.Hailstorm&&s!==$e.Maelstrom)),n===z.Mountain&&(a=a.filter(s=>s!==$e.Ashfall&&s!==$e.Hailstorm&&s!==$e.Maelstrom)),n===z.Ocean&&(a=a.filter(s=>s!==$e.Ashfall&&s!==$e.Hailstorm&&s!==$e.Rainy&&s!==$e.Torrid)),n===z.Tundra&&(a=a.filter(s=>s!==$e.Ashfall&&s!==$e.Rainy&&s!==$e.Maelstrom&&s!==$e.Torrid)),n===z.Volcanic&&(a=a.filter(s=>s!==$e.Snowfall&&s!==$e.Hailstorm&&s!==$e.Maelstrom));var o;return o=null!=r?this.utilityService.getRandomSeededInteger(1,a.length,r):this.utilityService.getRandomInteger(1,a.length),new pi(a[o-1])}stopGrandPrixRace(){null!=this.globalVar.eventRaceData&&(this.globalVar.eventRaceData.animalData.forEach(e=>{e.isCurrentlyRacing=!1}),this.globalVar.eventRaceData.isLoading=!1,this.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalVar.eventRaceData.isRunning=!1,this.globalVar.eventRaceData.isCatchingUp=!1,this.globalVar.eventRaceData.overallTimeCounter-=this.globalVar.eventRaceData.segmentTimeCounter,this.globalVar.eventRaceData.segmentTimeCounter=0,void 0!==this.globalVar.eventRaceData.currentRaceSegment&&this.globalVar.eventRaceData.currentRaceSegment.reduceExportSize())}unlockTier2ShopItems(){var e=this.globalVar.shop.find(b=>"Specialty"===b.name);if(null!=e){var n=e.itemList.find(b=>"Incubator Upgrade Lv1"===b.name);null!=n&&(n.isAvailable=!0);var r=e.itemList.find(b=>"National Races"===b.name);null!=r&&(r.isAvailable=!0);var a=e.itemList.find(b=>"Scouts"===b.name);null!=a&&(a.isAvailable=!0);var o=e.itemList.find(b=>"Course Maps"===b.name);null!=o&&(o.isAvailable=!0)}var s=this.globalVar.shop.find(b=>"Equipment"===b.name);if(null!=s){var l=s.itemList.find(b=>"Red Baton"===b.name);null!=l&&(l.isAvailable=!0);var c=s.itemList.find(b=>"Orange Baton"===b.name);null!=c&&(c.isAvailable=!0);var u=s.itemList.find(b=>"Green Baton"===b.name);null!=u&&(u.isAvailable=!0);var d=s.itemList.find(b=>"Yellow Baton"===b.name);null!=d&&(d.isAvailable=!0);var m=s.itemList.find(b=>"Blue Baton"===b.name);null!=m&&(m.isAvailable=!0);var v=s.itemList.find(b=>"Violet Baton"===b.name);null!=v&&(v.isAvailable=!0)}}lockTier2ShopItems(){var e=this.globalVar.shop.find(b=>"Specialty"===b.name);if(null!=e){var n=e.itemList.find(b=>"Incubator Upgrade Lv1"===b.name);null!=n&&(n.isAvailable=!1);var r=e.itemList.find(b=>"National Races"===b.name);null!=r&&(r.isAvailable=!1);var a=e.itemList.find(b=>"Scouts"===b.name);null!=a&&(a.isAvailable=!1);var o=e.itemList.find(b=>"Course Maps"===b.name);null!=o&&(o.isAvailable=!1)}var s=this.globalVar.shop.find(b=>"Equipment"===b.name);if(null!=s){var l=s.itemList.find(b=>"Red Baton"===b.name);null!=l&&(l.isAvailable=!1);var c=s.itemList.find(b=>"Orange Baton"===b.name);null!=c&&(c.isAvailable=!1);var u=s.itemList.find(b=>"Green Baton"===b.name);null!=u&&(u.isAvailable=!1);var d=s.itemList.find(b=>"Yellow Baton"===b.name);null!=d&&(d.isAvailable=!1);var m=s.itemList.find(b=>"Blue Baton"===b.name);null!=m&&(m.isAvailable=!1);var v=s.itemList.find(b=>"Violet Baton"===b.name);null!=v&&(v.isAvailable=!1)}}GetCircuitRankValue(e){for(var n=1;e.length>1;){var r=e.length;n+=26,(e=e.substring(1)).length>=r&&(e="")}return n+(91-e.charCodeAt(0))}GenerateCircuitRaceRewards(e){var n=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new oe("Coins",Math.round(50*1.0135**n))),l.push(new oe("Renown",parseFloat((1.03*1.03**n/100).toFixed(3)))),l}GenerateLocalRaceRewards(e){var n=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new oe("Coins",Math.round(10*1.013**n))),l.push(new oe("Renown",parseFloat((1.01*1.015**n/100).toFixed(3)))),l}GenerateMonoRaceRewards(e){var n=[];n.push(new oe("Facility Level",1,$.Progression));var r=this.GetCircuitRankValue(e);return n.push(new oe("Coins",Math.round(60*1.0135**r))),n.push(new oe("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateDuoRaceRewards(e){var n=[];n.push(new oe("Research Level",1,$.Progression));var r=this.GetCircuitRankValue(e);return n.push(new oe("Coins",Math.round(125*1.0135**r))),n.push(new oe("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateRainbowRaceRewards(e){var n=[];n.push(new oe("Talent Points",1,$.Progression));var r=this.GetCircuitRankValue(e);return n.push(new oe("Coins",Math.round(250*1.012**r))),n.push(new oe("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateLocalRaces(){this.GenerateMonoRaces(this.globalVar.monoRank),this.GenerateDuoRaces(this.globalVar.duoRank),this.GenerateRainbowRaces(this.globalVar.rainbowRank)}GenerateMonoRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(T=>T.localRaceType!==Kt.Mono),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,l=100*n,d=[],m=new Hn;if(1===n)m.courseType=z.Flatland;else{var v=[];n<14?(v.push(z.Flatland),v.push(z.Mountain)):n<40?(v.push(z.Flatland),v.push(z.Mountain),v.push(z.Ocean)):n<50?(v.push(z.Flatland),v.push(z.Mountain),v.push(z.Ocean),v.push(z.Tundra)):(v.push(z.Flatland),v.push(z.Mountain),v.push(z.Ocean),v.push(z.Tundra),v.push(z.Volcanic)),null!=this.globalVar.lastMonoRaceCourseType&&n>2&&(v=v.filter(T=>T!==this.globalVar.lastMonoRaceCourseType));var b=this.getCourseTypeInRandomOrderSeeded(v,"monoseed"+e+n);m.courseType=b[0]}m.terrain=this.getRandomTerrain(m.courseType,"monoseed"+e+n),m.distance=Math.round((155*1.155**n+l)*this.utilityService.getRandomSeededNumber(.9,1.1)),d.push(m);var y=m.distance;d.forEach(T=>{T.pathData=this.GenerateRaceLegPaths(T,y)}),this.globalVar.localRaces.push(new yi(d,e,!1,r,y,90,this.GenerateMonoRaceRewards(e),Kt.Mono,void 0,Oe.special)),r+=1}}GenerateDuoRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(k=>k.localRaceType!==Kt.Duo),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,u=[],d=[];n<=10?(d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean)):n<=20?(d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean),d.push(z.Tundra)):(d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean),d.push(z.Tundra),d.push(z.Volcanic));var m=this.getCourseTypeInRandomOrderSeeded(d,"duooseed"+e+n),v=this.utilityService.getRandomSeededNumber(.8,1.2),b=new Hn;b.courseType=m[0],b.distance=Math.round(6500*1.1**n*v*.5),b.terrain=this.getRandomTerrain(b.courseType,"duoseedl1"+e+n),u.push(b);var y=new Hn;y.courseType=m[1],y.distance=Math.round(6500*1.1**n*v*.5),y.terrain=this.getRandomTerrain(y.courseType,"duoseedl2"+e+n),u.push(y);var T=b.distance+y.distance;u.forEach(k=>{k.pathData=this.GenerateRaceLegPaths(k,T)}),this.globalVar.localRaces.push(new yi(u,e,!1,r,T,80,this.GenerateDuoRaceRewards(e),Kt.Duo,void 0,Oe.special)),r+=1}}GenerateRainbowRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(Y=>Y.localRaceType!==Kt.Rainbow),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,o=1e5,s=1.135,u=[],d=[];d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean),d.push(z.Tundra),d.push(z.Volcanic);var m=this.getCourseTypeInRandomOrderSeeded(d,"rainbow"+e+n),v=this.utilityService.getRandomSeededNumber(.8,1.2),b=new Hn;b.courseType=m[0],b.distance=Math.round(o*s**n*v*.2),b.terrain=this.getRandomTerrain(b.courseType,"rainbowl1"+e+n),u.push(b);var y=new Hn;y.courseType=m[1],y.distance=Math.round(o*s**n*v*.2),y.terrain=this.getRandomTerrain(y.courseType,"rainbowl2"+e+n),u.push(y);var T=new Hn;T.courseType=m[2],T.distance=Math.round(o*s**n*v*.2),T.terrain=this.getRandomTerrain(T.courseType,"rainbowl3"+e+n),u.push(T);var k=new Hn;k.courseType=m[3],k.distance=Math.round(o*s**n*v*.2),k.terrain=this.getRandomTerrain(k.courseType,"rainbowl4"+e+n),u.push(k);var C=new Hn;C.courseType=m[4],C.distance=Math.round(o*s**n*v*.2),C.terrain=this.getRandomTerrain(C.courseType,"rainbowl5"+e+n),u.push(C);var R=b.distance+y.distance+T.distance+k.distance+C.distance;u.forEach(Y=>{Y.pathData=this.GenerateRaceLegPaths(Y,R)}),this.globalVar.localRaces.push(new yi(u,e,!1,r,R,120,this.GenerateRainbowRaceRewards(e),Kt.Rainbow,void 0,Oe.special)),r+=1}}generateFreeRace(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),n=60,r=15,a=90,o=1.125,s=12*e;e>=15&&(s=50*e);var l=1.05,c=.8,m=[];if(e<=2){var v=new Hn;v.courseType=z.Flatland,v.terrain=this.getRandomTerrain(v.courseType),v.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l)),m.push(v)}else if(e<=15){(b=[]).push(z.Flatland),b.push(z.Mountain);var y=this.getCourseTypeInRandomOrder(b),T=this.utilityService.getRandomNumber(10,90),Q=(k=this.utilityService.getRandomNumber(10,90))*(R=n/(T+k));(Y=T*R)<r?(Y=0,Q=n):Q<r&&(Q=0,Y=n),Y>0&&((ee=new Hn).courseType=y[0],ee.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(Y/n),ee.terrain=this.getRandomTerrain(ee.courseType),m.push(ee)),Q>0&&((me=new Hn).courseType=y[1],me.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(Q/n),me.terrain=this.getRandomTerrain(me.courseType),m.push(me))}else{r=10;var b=[];e<45?(b.push(z.Flatland),b.push(z.Mountain),b.push(z.Ocean)):e<53?(b.push(z.Flatland),b.push(z.Mountain),b.push(z.Ocean),b.push(z.Tundra)):(b.push(z.Flatland),b.push(z.Mountain),b.push(z.Ocean),b.push(z.Tundra),b.push(z.Volcanic)),y=this.getCourseTypeInRandomOrder(b),T=this.utilityService.getRandomNumber(10,90);var R,Y,ee,me,k=this.utilityService.getRandomNumber(10,90),pe=this.utilityService.getRandomNumber(10,90),ce=(Q=k*(R=n/(T+k+pe)),pe*R);if((Y=T*R)<r?(Q+=Y/2,ce+=Y/2,Y=0):Q<r?(Y+=Q/2,ce+=Q/2,Q=0):ce<r&&(Y+=ce/2,Q+=ce/2,ce=0),Y>0&&((ee=new Hn).courseType=y[0],ee.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(Y/n),ee.terrain=this.getRandomTerrain(ee.courseType),m.push(ee)),Q>0&&((me=new Hn).courseType=y[1],me.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(Q/n),me.terrain=this.getRandomTerrain(me.courseType),m.push(me)),ce>0){var ve=new Hn;ve.courseType=y[2],ve.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(ce/n),ve.terrain=this.getRandomTerrain(ve.courseType),m.push(ve)}}var ye=0,Ue=this.globalVar.animalDecks.find(Et=>Et.isPrimaryDeck);void 0!==Ue&&(m=this.reorganizeLegsByDeckOrder(m,Ue)),m.forEach(Et=>{ye+=Et.distance}),m.forEach(Et=>{Et.pathData=this.GenerateRaceLegPaths(Et,ye)});var yt=new AD(ff.brazier,.1*ye);return[].push(yt),new yi(m,this.globalVar.circuitRank,!1,1,ye,n,this.GenerateLocalRaceRewards(this.globalVar.circuitRank),Kt.Free,void 0,Oe.circuit,void 0,void 0)}getTotalSegments(e){return(null==this.globalVar.circuitRaces||0===this.globalVar.circuitRaces.length)&&this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),Math.ceil(this.globalVar.eventRaceData.grandPrixTimeLength/this.globalVar.eventRaceData.segmentTime),e/this.utilityService.getClosestWholeNumber(this.globalVar.circuitRaces[0].length*(this.globalVar.eventRaceData.segmentTime/this.globalVar.circuitRaces[0].timeToComplete),e)}initialGrandPrixSetup(e){this.globalVar.eventRaceData=new Wi,this.globalVar.eventRaceData.rank=e;var n=this.utilityService.getNumericValueOfCircuitRank(e);this.globalVar.eventRaceData.totalDistance=5e8*n,this.globalVar.eventRaceData.currentRaceSegmentCount=0,this.globalVar.eventRaceData.segmentTimeCounter=0,this.globalVar.eventRaceData.totalSegments=this.getTotalSegments(this.globalVar.eventRaceData.totalDistance),this.globalVar.eventRaceData.remainingRewards=this.globalVar.eventRaceData.totalRewards=this.getGrandPrixRewardCount(),this.globalVar.eventRaceData.animalData=[],this.globalVar.animals.forEach(r=>{this.globalVar.eventRaceData.animalData.push(new kD(r.type))}),this.globalVar.eventRaceData.weatherCluster=this.getRandomGrandPrixWeatherCluster(),this.globalVar.previousEventRewards=[]}animalCanRaceGrandPrix(e){var n=!0,r=this.getBreedLevelRequiredForGrandPrix();e.breedLevel<r&&(n=!1);var a=this.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);return null!=a&&a.exhaustionStatReduction<.5&&(n=!1),n}getGrandPrixRacingAnimal(){var e=new Dt,n=this.globalVar.animalDecks.find(l=>l.isEventDeck);if(void 0!==n){var r=[];if(n.isCourseOrderActive){for(var a=0;a<n.selectedAnimals.length;a++)if(n.courseTypeOrder.length>a){var o=n.courseTypeOrder[a],s=n.selectedAnimals.find(l=>l.raceCourseType===o);void 0!==s&&r.push(s)}}else n.selectedAnimals.forEach(l=>{r.push(l)});r=r.filter(l=>this.animalCanRaceGrandPrix(l)),this.globalVar.eventRaceData.isCatchingUp&&(r=r.filter(l=>!this.shouldShowSlowSegmentWarning(l))),r.length>0&&(e=r[0])}return this.globalVar.eventRaceData.animalData.forEach(l=>{if(l.isCurrentlyRacing){var c=this.globalVar.animals.find(u=>u.type===l.associatedAnimalType);void 0!==c&&(e=c.makeCopy(c))}}),e}getCurrentlyActiveGrandPrixRacingAnimal(){var e=new Dt;return this.globalVar.eventRaceData.isRunning&&this.globalVar.eventRaceData.animalData.forEach(n=>{if(n.isCurrentlyRacing){var r=this.globalVar.animals.find(a=>a.type===n.associatedAnimalType);void 0!==r&&(e=r.makeCopy(r))}}),e}getExhaustionOfAnimal(e){var n;return null===(n=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===n?void 0:n.exhaustionStatReduction}getMoraleOfAnimal(e){var n;return null===(n=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===n?void 0:n.morale}generateGrandPrixSegment(e){var n=this.globalVar.eventRaceData,r=this.getRemainingEventRaceTime(),a=n.totalDistance/n.totalSegments,o=[],s=new Hn;return s.courseType=e.raceCourseType,s.terrain=this.getRandomGrandPrixTerrainFromWeatherCluster(this.globalVar.eventRaceData.weatherCluster,s.courseType,this.getEventStartDateTime().toString()+this.getEventTimePer5Min().toString()),s.distance=a,o.push(s),o.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,a)}),new yi(o,this.globalVar.circuitRank,!1,1,a,r,void 0,void 0,void 0,Oe.event,Ge.grandPrix)}getGrandPrixRewardCount(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.eventRaceData.rank),n=5,r=this.globalVar.modifiers.find(u=>"metersPerCoinsGrandPrixModifier"===u.text);void 0!==r&&(n=r.value);var a=5,o=this.globalVar.modifiers.find(u=>"metersPerRenownGrandPrixModifier"===u.text);return void 0!==o&&(a=o.value),this.globalVar.eventRaceData.totalDistance/(n*e)+this.globalVar.eventRaceData.totalDistance/(a*e)+4}getEventStartDateTime(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?l:o}getTimeToEventRace(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?(l.getTime()-e.getTime())/1e3:(o.getTime()-e.getTime())/1e3}getRemainingEventRaceTime(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?e>l?(c.getTime()-e.getTime())/1e3:(s.getTime()-e.getTime())/1e3:0}getEventTimePer5Min(){var e=this.getRemainingEventRaceTime();return Math.floor(e/60/5)}generateTrackRace(e,n){var r=60,a=[],o=new Hn;o.courseType=e.raceCourseType,n===si.practice?(r=45,o.distance=100,o.terrain=new pi($e.Stormy)):n===si.novice?(r=60,o.distance=1e3,o.terrain=new pi($e.Stormy)):n===si.intermediate?(r=80,o.distance=1e4,o.terrain=new pi($e.Stormy)):n===si.master&&(r=100,o.distance=1e5,o.terrain=new pi($e.Stormy)),a.push(o);var s=0;return a.forEach(l=>{s+=l.distance}),a.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,s,n)}),new yi(a,this.globalVar.circuitRank,!1,1,s,r,void 0,Kt.Track,n,Oe.trainingTrack)}GenerateRaceLegPaths(e,n,r){for(var o=[],s=e.distance,c=Math.round(s/(n/20)),u=!1,d=Qe.Regular,m=s/c,v=0;v<c;v++){var b=new sf;0!==v?v!==c-1?(b.length=s>m?m:s,(s-=b.length)<0&&(s=0),u?b.routeDesign=Qe.Regular:(b.routeDesign=this.GetSpecialRoute(e.courseType,v+2<c,d),e.specialPathCount+=1,b.isSpecialPath=!0),u=b.routeDesign!==Qe.Regular,b.setStumbleFields(),o.push(b),d=b.routeDesign):(b.length=s,b.routeDesign=e.courseType===z.Volcanic?Qe.LastRegular:Qe.Regular,b.setStumbleFields(),o.push(b),d=b.routeDesign):(b.length=m,b.routeDesign=e.courseType===z.Volcanic?Qe.FirstRegular:Qe.Regular,b.setStumbleFields(),o.push(b),s-=b.length,d=b.routeDesign)}return o}GetSpecialRoute(e,n,r){var a=Qe.Regular,s=this.utilityService.getRandomInteger(1,3);return 1===s||(2===s?e===z.Flatland?a=Qe.S:e===z.Mountain?a=Qe.Crevasse:e===z.Ocean?a=Qe.Waves:e===z.Tundra?a=Qe.Cavern:e===z.Volcanic&&(a=Qe.Regular):3===s&&(e===z.Flatland?a=Qe.Bumps:e===z.Mountain?a=Qe.Gaps:e===z.Ocean?a=Qe.Dive:e===z.Tundra?a=Qe.Hills:e===z.Volcanic&&(a=Qe.SteppingStones))),a}calculateAnimalRacingStats(e){var n=e.currentStats.defaultMaxSpeedModifier,r=e.currentStats.defaultAccelerationModifier,a=e.currentStats.defaultStaminaModifier,o=e.currentStats.defaultPowerModifier,s=e.currentStats.defaultFocusModifier,l=e.currentStats.defaultAdaptabilityModifier,c=.02,u=e.getAnimalType().toLowerCase(),d=this.globalVar.modifiers.find(tt=>tt.text===u+"DefaultMaxSpeedModifier"),m=this.globalVar.modifiers.find(tt=>tt.text===u+"DefaultAccelerationModifier"),v=this.globalVar.modifiers.find(tt=>tt.text===u+"DefaultStaminaModifier"),b=this.globalVar.modifiers.find(tt=>tt.text===u+"DefaultPowerModifier"),y=this.globalVar.modifiers.find(tt=>tt.text===u+"DefaultFocusModifier"),T=this.globalVar.modifiers.find(tt=>tt.text===u+"DefaultAdaptabilityModifier");null!=d&&(n=d.value),null!=m&&(r=m.value),null!=v&&(a=v.value),null!=b&&(o=b.value),null!=y&&(s=y.value),null!=T&&(l=T.value);var k=this.getTraitModifier(e,_e.topSpeed),C=this.getTraitModifier(e,_e.acceleration),R=this.getTraitModifier(e,_e.endurance),Y=this.getTraitModifier(e,_e.power),Q=this.getTraitModifier(e,_e.focus),ee=this.getTraitModifier(e,_e.adaptability),me=null!==e.equippedOrb&&"Ruby Orb"===e.equippedOrb.name?this.globalVar.orbStats.maxSpeedIncrease:1,pe=null!==e.equippedOrb&&"Amber Orb"===e.equippedOrb.name?this.globalVar.orbStats.accelerationRateIncrease:1,ce=null!==e.equippedOrb&&"Topaz Orb"===e.equippedOrb.name?this.globalVar.orbStats.staminaIncrease:1,ve=null!==e.equippedOrb&&"Amethyst Orb"===e.equippedOrb.name?this.globalVar.orbStats.powerEfficiencyIncrease:1,ye=null!==e.equippedOrb&&"Sapphire Orb"===e.equippedOrb.name?this.globalVar.orbStats.focusDistanceIncrease:1,Ue=null!==e.equippedOrb&&"Emerald Orb"===e.equippedOrb.name?this.globalVar.orbStats.adaptabilityDistanceIncrease:1,yt=this.globalVar.modifiers.find(tt=>"breedLevelStatModifier"===tt.text);null!=yt&&(c=yt.value),c=1+c*(e.breedLevel-1);var wt=1,Et=1,Rt=1,lt=1,On=1,se=1;e.talentTree.talentTreeType===pt.sprint&&(se=1+e.talentTree.column1Row3Points/100,Et=1+e.talentTree.column2Row3Points/100,lt=1+e.talentTree.column3Row3Points/100),e.talentTree.talentTreeType===pt.longDistance&&(On=1+e.talentTree.column1Row3Points/100,wt=1+e.talentTree.column2Row3Points/100,Rt=1+e.talentTree.column3Row3Points/100);var S=this.GetAnimalDiminishingReturns(e);e.currentStats.maxSpeedMs=e.currentStats.calculateMaxSpeed(n*c*k*e.incubatorStatUpgrades.maxSpeedModifier*wt,S,me),e.currentStats.accelerationMs=e.currentStats.calculateTrueAcceleration(r*c*C*e.incubatorStatUpgrades.accelerationModifier*Et,S,pe),e.currentStats.stamina=e.currentStats.calculateStamina(a*c*R*e.incubatorStatUpgrades.staminaModifier*Rt,S,ce),e.currentStats.powerMs=e.currentStats.calculateTruePower(o*c*Y*e.incubatorStatUpgrades.powerModifier*lt,S,ve),e.currentStats.focusMs=e.currentStats.calculateTrueFocus(s*c*Q*e.incubatorStatUpgrades.focusModifier*On,S,ye),e.currentStats.adaptabilityMs=e.currentStats.calculateTrueAdaptability(l*c*ee*e.incubatorStatUpgrades.adaptabilityModifier*se,S,Ue),e.currentStats.burstChance=e.currentStats.calculateBurstChance(c),e.currentStats.burstDistance=e.currentStats.calculateBurstDistance(c),this.updateTrackedMaxStats(e)}getTraitModifier(e,n){var r=1;if(null!=e.trait){var a=e.trait.researchLevel,o=e.trait.researchLevel,s=this.globalVar.modifiers.find(l=>"maximumTraitNegativePercentModifier"===l.text);void 0!==s&&o>s.value&&(o=s.value),e.trait.positiveStatGain===n&&(r+=a/100),e.trait.negativeStatGain===n&&(r-=o/100)}return r}GetAnimalDiminishingReturns(e){var n=e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalVar.resources.find(s=>"Facility Level"===s.name);if(null==r)return n;var a=5,o=this.globalVar.modifiers.find(s=>"facilityLevelModifier"===s.text);return void 0!==o&&(a=o.value),n+r.amount*(a+e.miscStats.diminishingReturnsBonus)}IncreaseAnimalBreedGauge(e,n){e.breedGaugeXp+=n,e.breedGaugeXp>=e.breedGaugeMax&&(e.breedGaugeXp=e.breedGaugeMax,e.autoBreedActive&&this.BreedAnimal(e))}getBreedLevelRequiredForGrandPrix(){var e=50,n=this.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}BreedAnimal(e){if(!(e.breedGaugeXp<e.breedGaugeMax)){var n=5,r=this.globalVar.modifiers.find(ee=>"breedGaugeMaxIncreaseModifier"===ee.text);if(null!=r&&(n=r.value),e.breedLevel+=1,e.breedGaugeXp=0,e.breedGaugeMax+=n,null!=this.globalVar.resources.find(ee=>ee.name.includes("Incubator Upgrade"))&&null!=e.trait){var o=.001,s=this.globalVar.modifiers.find(ee=>"incubatorUpgradeIncreaseModifier"===ee.text);null!=s&&(o=s.value);var l=e.trait.researchLevel*o,c=this.globalVar.resources.find(ee=>"Incubator Upgrade Lv1"===ee.name),u=this.globalVar.resources.find(ee=>"Incubator Upgrade Lv2"===ee.name),d=this.globalVar.resources.find(ee=>"Incubator Upgrade Lv3"===ee.name);null!=this.globalVar.resources.find(ee=>"Incubator Upgrade Lv4"===ee.name)?l>.1&&(l=.1):null!=d?l>.05&&(l=.05):null!=u?l>.025&&(l=.025):null!=c&&l>.01&&(l=.01),e.trait.positiveStatGain===_e.topSpeed&&(e.incubatorStatUpgrades.maxSpeedModifier+=l),e.trait.positiveStatGain===_e.acceleration&&(e.incubatorStatUpgrades.accelerationModifier+=l),e.trait.positiveStatGain===_e.endurance&&(e.incubatorStatUpgrades.staminaModifier+=l),e.trait.positiveStatGain===_e.power&&(e.incubatorStatUpgrades.powerModifier+=l),e.trait.positiveStatGain===_e.focus&&(e.incubatorStatUpgrades.focusModifier+=l),e.trait.positiveStatGain===_e.adaptability&&(e.incubatorStatUpgrades.adaptabilityModifier+=l)}var v=this.globalVar.resources.find(ee=>"Animal Handler"===ee.name),b=this.globalVar.modifiers.find(ee=>"animalHandlerModifier"===ee.text);if(null!=v&&void 0!==b&&null!=b&&v.amount>0){var y=v.amount*b.value,T=Math.round((e.currentStats.topSpeed-e.baseStats.topSpeed)*y),k=Math.round((e.currentStats.acceleration-e.baseStats.acceleration)*y),C=Math.round((e.currentStats.endurance-e.baseStats.endurance)*y),R=Math.round((e.currentStats.power-e.baseStats.power)*y),Y=Math.round((e.currentStats.focus-e.baseStats.focus)*y),Q=Math.round((e.currentStats.adaptability-e.baseStats.adaptability)*y);e.currentStats=new Ee(e.baseStats.topSpeed+T,e.baseStats.acceleration+k,e.baseStats.endurance+C,e.baseStats.power+R,e.baseStats.focus+Y,e.baseStats.adaptability+Q)}else e.currentStats=new Ee(e.baseStats.topSpeed,e.baseStats.acceleration,e.baseStats.endurance,e.baseStats.power,e.baseStats.focus,e.baseStats.adaptability);this.calculateAnimalRacingStats(e),this.globalVar.trackedStats.totalBreeds+=1}}increaseAbilityXp(e,n){var r=25,a=this.globalVar.modifiers.find(l=>"abilityLevelCapModifier"===l.text);if(null!=a&&(r=a.value),!(e.ability.abilityLevel>e.breedLevel+r)){var o=1;null!=n&&n>1&&(o=n),e.ability.abilityXp+=o,e.ability.abilityXp>=e.ability.abilityMaxXp&&(e.ability.abilityXp=0,e.ability.abilityLevel+=1,e.ability.abilityLevel%10==0&&(e.ability.abilityMaxXp+=5));var s=e.availableAbilities.find(l=>l.name===e.ability.name);null!=s&&(s.abilityXp=e.ability.abilityXp,s.abilityLevel=e.ability.abilityLevel,s.abilityMaxXp=e.ability.abilityMaxXp)}}InitializeResources(){this.globalVar.resources.push(this.initializeService.initializeResource("Coins",500,$.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Renown",1,$.Progression))}InitializeSettings(){this.themeService.setLightTheme(),this.globalVar.settings.set("theme",this.themeService.getActiveTheme()),this.globalVar.settings.set("skipDrawRace",!1),this.globalVar.settings.set("finishTrainingBeforeSwitching",!0),this.globalVar.settings.set("hideTips",!1),this.globalVar.settings.set("useNumbersForCircuitRank",!1),this.globalVar.settings.set("raceDisplayInfo",aa.both),this.globalVar.settings.set("autoStartEventRace",!1)}InitializeUnlockables(){this.globalVar.unlockables.set("monoRace",!1),this.globalVar.unlockables.set("duoRace",!1),this.globalVar.unlockables.set("rainbowRace",!1),this.globalVar.unlockables.set("grandPrix",!1),this.globalVar.unlockables.set("orbs",!1),this.globalVar.unlockables.set("barnRow2",!1),this.globalVar.unlockables.set("barnRow3",!1),this.globalVar.unlockables.set("barnRow4",!1),this.globalVar.unlockables.set("barnRow5",!1),this.globalVar.unlockables.set("coaching",!1),this.globalVar.unlockables.set("barnSpecializations",!1),this.globalVar.unlockables.set("attractionSpecialization",!1),this.globalVar.unlockables.set("researchCenterSpecialization",!1)}getCoinsResourceValue(e){return new oe("Coins",e)}getMedalResourceValue(e){return new oe("Medals",e)}getTokenResourceValue(e){return new oe("Tokens",e)}unlockAnimalAbilities(e){var n=this.globalVar.shop.find(a=>"Abilities"===a.name);if(null!=n){var r=n.itemList.filter(a=>a.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}unlockOtherRaceCourseTypeAnimals(e){var n=this.globalVar.shop.find(a=>"Animals"===a.name);if(null!=n){var r=[];n.itemList.forEach(a=>{var o=this.globalVar.animals.find(s=>s.getAnimalType()===a.name);null!=o&&o.raceCourseType===e&&r.push(a)}),null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}getAnimalDescription(e){var n="";return"Horse"===e?n="The Horse is a Flatland racing animal capable of running without losing stamina and increasing the max speed of relay racers.":"Cheetah"===e?n="The Cheetah is a Flatland racing animal that prioritizes quickness over stamina.":"Hare"===e?n="The Hare is a Flatland racing animal that can instantly enter Burst and increase adaptability and focus.":"Warthog"===e?n="The Warthog is a Flatland racing animal that can increase stats at random and increase Burst Chance after losing focus.":"Monkey"===e?n="The Monkey is a Mountain climbing animal capable of slowing its competitors and leaping to victory.":"Goat"===e?n="The Goat is a Mountain climbing animal that can nimbly travel terrain and increase stamina.":"Gecko"===e?n="The Gecko is a Mountain climbing animal that can increase speed based on focus and can increase other racers' starting velocity.":"Dolphin"===e?n="The Dolphin is an Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay.":"Shark"===e?n="The Shark is an Ocean swimming animal that can slow competitors and increase its own stats at the cost of your other racers.":"Octopus"===e?n="The Octopus is an Ocean swimming animal that can increase your coin rewards from races and increase power of other racers.":"Whale"===e?n="The Whale is an Ocean swimming animal that can set a velocity floor and becomes increasingly faster as the race goes on.":"Penguin"===e?n="The Penguin is a Tundra racing animal that can slide carefully or recklessly.":"Caribou"===e?n="The Caribou is a Tundra racing animal that boosts other racers based on stamina.":"Salamander"===e?n="The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration.":"Fox"===e&&(n="The Fox is a Volcanic racing animal that can increase stats at random."),n}sortAnimalOrder(){this.globalVar.animals.sort((e,n)=>e.raceCourseType-n.raceCourseType)}getEquipmentDescription(e){var n="";return"Headband"===e&&(n="The first three stumbles you would have are ignored"),"Pendant"===e&&(n="Reduce your ability cooldown by 10%"),"Blinders"===e&&(n="Negative terrain effects are cut in half"),"Quick Snack"===e&&(n="Gain 100% of Stamina back after running out"),"Red Baton"===e&&(n="Increase next racer's Speed by 10% on Relay"),"Blue Baton"===e&&(n="Increase next racer's Focus by 10% on Relay"),"Violet Baton"===e&&(n="Increase next racer's Power by 10% on Relay"),"Green Baton"===e&&(n="Increase next racer's Adaptability by 10% on Relay"),"Orange Baton"===e&&(n="Increase next racer's Acceleration by 10% on Relay"),"Yellow Baton"===e&&(n="Increase next racer's Endurance by 10% on Relay"),"Amethyst Orb"===e&&(n="Increase your Power Efficiency by 10%."),"Sapphire Orb"===e&&(n="Increase your Focus Distance by 10%."),"Amber Orb"===e&&(n="Increase your Acceleration Rate by 10%."),"Topaz Orb"===e&&(n="Increase your Stamina by 10%."),"Emerald Orb"===e&&(n="Increase your Adaptability Distance by 10%."),"Ruby Orb"===e&&(n="Increase your Max Speed by 10%."),"Scary Mask"===e&&(n="Cause a distraction the first time you lose focus while ahead of competition, slowing competitors by 2 seconds."),"Running Shoes"===e&&(n="After each Burst during a race, increase subsequent Burst distance by 20%."),"Incense"===e&&(n="When your velocity is at least 90% of your Max Speed, immediately set velocity to 100% of your Max Speed."),"Athletic Tape"===e&&(n="While Bursting, decrease Acceleration Rate by 50% but increase Focus Distance and Adaptability Distance by 50%."),n}getItemDescription(e){var n="";return"Apples"===e&&(n="+1 Acceleration to a single animal"),"Bananas"===e&&(n="+1 Speed to a single animal"),"Strawberries"===e&&(n="+1 Endurance to a single animal"),"Carrots"===e&&(n="+1 Power to a single animal"),"Turnips"===e&&(n="+1 Focus to a single animal"),"Oranges"===e&&(n="+1 Adaptability to a single animal"),"Mangoes"===e&&(n="+1 Breed Level to a single animal"),"Circuit Race Breed XP Gain Certificate"===e&&(n="Give an animal +2 Bonus Breed XP Gain from Circuit Races. Can use up to 30 of these certificates on any individual animal."),"Free Race Breed XP Gain Certificate"===e&&(n="Give an animal +1 Bonus Breed XP Gain from Free Races. Can use up to 30 of these certificates on any individual animal."),"Training Breed XP Gain Certificate"===e&&(n="Give an animal +1 Bonus Breed XP Gain from Training. Can use up to 30 of these certificates on any individual animal."),"Diminishing Returns Increase Certificate"===e&&(n="Give an animal +1 Diminishing Returns per Facility Level. Can use up to 30 of these certificates on any individual animal."),n}getSpecializationDescription(e){var n="";return"Breeding Grounds"===e?n="Turn your barn into a habitat based around the optimal breeding environment for your animals. As you progress, your animals will gain more breeding XP from their training.":"Training Facility"===e?n="Pull out all the stops giving your animals the best environment to improve. As you progress, your animals will train faster and gain stats from training at a higher rate.":"Attraction"===e?n="Give the people what they want and turn your barn into a tourist attraction. As you progress, your barn will provide passive income at a steady rate while training.":"Research Center"===e&&(n="Bring in the top names in animal research to optimize your training process. As you progress, your animal will gain reduced stats from training but split its improvements with other animals."),n}getTundraDescription(){return"When racing in the Tundra, your racer will slide all over the race course as they move forward. The higher your Adaptability stat, the better control your racer will have and the less likely they will slide. You lose a percentage of max speed while sliding, and if you slide too much you may hit a wall and come to a complete stop!"}getVolcanicDescription(){return"Volcanic racers make their way while a Volcano ominously looms in the background. As you race, the Volcano will erupt making it impossible to proceed if you get stuck behind the lava flow. If you stay ahead of the average pace for the Volcanic leg of the race, you should have no problem speeding past the lava so make sure your Max Speed and Acceleration are up to the challenge."}updateTrackedMaxStats(e){if(e.isAvailable){if(""===this.globalVar.trackedStats.highestMaxSpeed)this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var n=parseFloat(this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").indexOf(" ")));e.currentStats.maxSpeedMs>n&&(this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAccelerationRate)this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var r=parseFloat(this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").indexOf(" ")));e.currentStats.accelerationMs>r&&(this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestStamina)this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")";else{var a=parseFloat(this.globalVar.trackedStats.highestStamina.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestStamina.replaceAll(",","").indexOf(" ")));e.currentStats.stamina>a&&(this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")")}if(""===this.globalVar.trackedStats.highestPowerEfficiency)this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")";else{var o=parseFloat(this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").indexOf(" ")));e.currentStats.powerMs>o&&(this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")")}if(""===this.globalVar.trackedStats.highestFocusDistance)this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")";else{var s=parseFloat(this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>s&&(this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAdaptabilityDistance)this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")";else{var l=parseFloat(this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>l&&(this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")")}}}shouldShowSlowSegmentWarning(e){var n=!1;if(void 0===e)return n;if((e.currentStats.acceleration<=10||e.currentStats.topSpeed<=10||e.currentStats.endurance<=10||e.currentStats.power<=10||e.currentStats.focus<=10||e.currentStats.adaptability<=10)&&(console.log("Stats too low: "+e.currentStats.acceleration+" "+e.currentStats.topSpeed+" "+e.currentStats.endurance+" "+e.currentStats.power+" "+e.currentStats.focus+" "+e.currentStats.adaptability),n=!0),null!=this.globalVar.eventRaceData){var a=this.globalVar.eventRaceData.totalDistance/this.globalVar.eventRaceData.totalSegments/this.globalVar.eventRaceData.segmentTime;a>3*e.currentStats.maxSpeedMs&&(console.log("Max Speed Too Low: "+a+" > "+3*e.currentStats.maxSpeedMs),n=!0),e.currentStats.focusMs<a/5&&(console.log("Not Focused Enough: "+e.currentStats.focusMs+" < "+a/30),n=!0)}return n}devModeInitialize(e,n){var r=this.globalVar.resources.find(v=>"Coins"===v.name);if(void 0!==r&&(r.amount=1e6),this.globalVar.resources.some(v=>"Medals"===v.name)){var a=this.globalVar.resources.find(v=>"Medals"===v.name);void 0!==a&&(a.amount+=e+1e7)}else this.globalVar.resources.push(this.initializeService.initializeResource("Medals",e+1e5,$.Resources));if(this.globalVar.resources.push(this.initializeService.initializeResource("Talent Points",1e3,$.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Tokens",1e3,$.Resources)),this.globalVar.resources.some(v=>"Renown"===v.name)){var o=this.globalVar.resources.find(v=>"Renown"===v.name);void 0!==o&&(o.amount+=5e4)}else this.globalVar.resources.push(this.initializeService.initializeResource("Renown",5e4,$.Resources));this.globalVar.resources.push(this.initializeService.initializeResource("Facility Level",1e3,$.Progression)),this.globalVar.resources.push(this.initializeService.initializeResource("Research Level",e,$.Progression));for(var s=1;s<=e;s++){var l=this.utilityService.getCircuitRankFromNumericValue(s);this.globalVar.circuitRank=l,this.checkCircuitRankRewards(),this.GenerateCircuitRacesForRank(this.globalVar.circuitRank)}var c=5,u=1,d=1;1===n?(c=50,u=50):2===n?(c=100,u=250,d=3):3===n?(c=500,u=500,d=7):4===n&&(c=1e3,u=1e3,d=12),this.globalVar.animals.forEach(v=>{v.currentStats.topSpeed=c,v.currentStats.acceleration=c,v.currentStats.endurance=c,v.currentStats.power=c,v.currentStats.focus=c,v.currentStats.adaptability=c,v.breedLevel=u,v.incubatorStatUpgrades.maxSpeedModifier=d,v.incubatorStatUpgrades.accelerationModifier=d,v.incubatorStatUpgrades.staminaModifier=d,v.incubatorStatUpgrades.powerModifier=d,v.incubatorStatUpgrades.focusModifier=d,v.incubatorStatUpgrades.adaptabilityModifier=d,v.ability.abilityLevel=v.breedLevel+25,v.availableAbilities.forEach(b=>{b.abilityLevel=v.breedLevel+25}),this.calculateAnimalRacingStats(v)})}}return t.\u0275fac=function(e){return new(e||t)(Le(Ri),Le(Zv),Le(El))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var jt=(()=>{return(t=jt||(jt={})).None="None",t.BreedingGrounds="Breeding Grounds",t.TrainingFacility="Training Facility",t.Attraction="Attraction",t.ResearchCenter="Research Center",jt;var t})(),qe=(()=>{return(t=qe||(qe={}))[t.inspiration=0]="inspiration",t[t.navigator=1]="navigator",t[t.flowingCurrent=2]="flowingCurrent",t[t.bigBrain=3]="bigBrain",t[t.camouflage=4]="camouflage",t[t.herdMentality=5]="herdMentality",t[t.specialDelivery=6]="specialDelivery",t[t.deepBreathing=7]="deepBreathing",t[t.redBaton=8]="redBaton",t[t.blueBaton=9]="blueBaton",t[t.violetBaton=10]="violetBaton",t[t.greenBaton=11]="greenBaton",t[t.orangeBaton=12]="orangeBaton",t[t.yellowBaton=13]="yellowBaton",t[t.supportMaxSpeedRelay=14]="supportMaxSpeedRelay",t[t.supportAccelerationRelay=15]="supportAccelerationRelay",t[t.supportStaminaRelay=16]="supportStaminaRelay",t[t.supportPowerRelay=17]="supportPowerRelay",t[t.supportFocusRelay=18]="supportFocusRelay",t[t.supportAdaptabilityRelay=19]="supportAdaptabilityRelay",t[t.supportBurstDistance=20]="supportBurstDistance",t[t.supportBurstChance=21]="supportBurstChance",t[t.supportAbilityCooldown=22]="supportAbilityCooldown",t[t.supportAbilityEfficiency=23]="supportAbilityEfficiency",qe;var t})();let vn=(()=>{class t{constructor(e,n,r){this.globalService=e,this.utilityService=n,this.sanitizer=r}recalculateAllAnimalStats(){this.globalService.globalVar.animals.forEach(e=>{this.globalService.calculateAnimalRacingStats(e)})}getAnimalsFromAnimalDeck(e){var n=[];return null==e||void 0===e.selectedAnimals||0===e.selectedAnimals.length||e.selectedAnimals.forEach(r=>{var a=this.globalService.globalVar.animals.find(o=>o.type===r.type);void 0!==a&&n.push(a)}),n}getPrimaryDeck(){return this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck)}getResourceByName(e){var n=this.globalService.globalVar.resources.find(r=>r.name===e);return void 0!==n?n.amount:0}spendResourceByName(e,n){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount-=n)}gainResourceByName(e,n,r){var a=this.globalService.globalVar.resources.find(o=>o.name===e);void 0!==a?a.amount+=n:this.globalService.globalVar.resources.push(new oe(e,n,r))}getFacilityLevel(){var e=this.globalService.globalVar.resources.find(n=>"Facility Level"===n.name);return void 0!==e?e.amount:0}getResearchLevel(){var e=this.globalService.globalVar.resources.find(n=>"Research Level"===n.name);return void 0!==e?e.amount:0}getCoins(){var e=this.globalService.globalVar.resources.find(n=>"Coins"===n.name);return void 0!==e?e.amount:0}spendCoins(e){var n=this.globalService.globalVar.resources.find(r=>"Coins"===r.name);void 0!==n&&(n.amount-=e)}getMedals(){var e=this.globalService.globalVar.resources.find(n=>"Medals"===n.name);return void 0!==e?e.amount:0}spendMedals(e){var n=this.globalService.globalVar.resources.find(r=>"Medals"===r.name);void 0!==n&&(n.amount-=e)}getTokens(){var e=this.globalService.globalVar.resources.find(n=>"Tokens"===n.name);return void 0!==e?e.amount:0}spendTokens(e){var n=this.globalService.globalVar.resources.find(r=>"Tokens"===r.name);void 0!==n&&(n.amount-=e)}getRenown(){var e=this.globalService.globalVar.resources.find(n=>"Renown"===n.name);return void 0!==e?e.amount:0}addResourceToResourceList(e,n){if(void 0!==n)if(n.some(a=>a.name===e.name)){var r=n.find(a=>a.name===e.name);void 0!==r&&(r.amount+=e.amount)}else n.push(e)}getRenownCoinModifier(e,n){var r=1;return r=e<=50?e:500*Math.log10(.0035*(e-50)+1)+50,n||(r/=100,r+=1),r}getStockbreeder(){var e=this.globalService.globalVar.resources.find(n=>"Stockbreeder"===n.name);return void 0!==e?e.amount:0}getAnimalByType(e){var n=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==n?n:null}getMaxSpeedModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultMaxSpeedModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,_e.topSpeed),u=1;o.talentTree.talentTreeType===pt.longDistance&&(u=1+o.talentTree.column2Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.maxSpeedModifier*u}return n}getAccelerationModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultAccelerationModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,_e.acceleration),u=1;o.talentTree.talentTreeType===pt.sprint&&(u=1+o.talentTree.column2Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.accelerationModifier*u}return n}getStaminaModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultStaminaModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,_e.endurance),u=1;o.talentTree.talentTreeType===pt.longDistance&&(u=1+o.talentTree.column3Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.staminaModifier*u}return n}getPowerModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultPowerModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,_e.power),u=1;o.talentTree.talentTreeType===pt.sprint&&(u=1+o.talentTree.column3Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.powerModifier*u}return n}getFocusModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultFocusModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,_e.focus),u=1;o.talentTree.talentTreeType===pt.longDistance&&(u=1+o.talentTree.column1Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.focusModifier*u}return n}getAdaptabilityModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultAdaptabilityModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,_e.adaptability),u=1;o.talentTree.talentTreeType===pt.sprint&&(u=1+o.talentTree.column1Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.adaptabilityModifier*u}return n}getTrainingBreedGaugeIncrease(e,n){var r=0,a=this.globalService.globalVar.modifiers.find(s=>"trainingBreedGaugeIncrease"===s.text);if(null!=a&&(r=a.value),void 0!==n&&null!=n.miscStats.bonusBreedXpGainFromTraining&&n.miscStats.bonusBreedXpGainFromTraining>0&&(r+=n.miscStats.bonusBreedXpGainFromTraining),e>0){var o=this.globalService.globalVar.modifiers.find(s=>"breedingGroundsSpecializationModifier"===s.text);null!=o&&(r*=1+e*o.value)}return r}getCircuitBreedGaugeIncrease(e){var n=0,r=this.globalService.globalVar.modifiers.find(a=>"circuitBreedGaugeIncrease"===a.text);return null!=r&&(n=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromCircuitRaces&&e.miscStats.bonusBreedXpGainFromCircuitRaces>0&&(n+=e.miscStats.bonusBreedXpGainFromCircuitRaces),n}getLocalBreedGaugeIncrease(e){var n=0,r=this.globalService.globalVar.modifiers.find(a=>"localBreedGaugeIncrease"===a.text);return null!=r&&(n=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromLocalRaces&&e.miscStats.bonusBreedXpGainFromLocalRaces>0&&(n+=e.miscStats.bonusBreedXpGainFromLocalRaces),n}getTotalRacersByRace(e){var n=2;return e.localRaceType===Kt.Track?n=13:this.getResourceByName("Money Mark")>0&&(n+=1),n}getDiminishingReturnsThreshold(e){var n=null==e?20:e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalService.globalVar.modifiers.find(a=>"facilityLevelModifier"===a.text);return void 0!==r&&(n+=this.getFacilityLevel()*r.value),n}getBreedLevelPopover(e){var n=.2,r=this.globalService.globalVar.modifiers.find(a=>"breedLevelStatModifier"===a.text);return null!=r&&(n=r.value),"Increase racing stat gain from base stats by "+(n*(e-1)*100).toFixed(0)+"%"}getResourcePopover(e,n){if("Coins"===e)return"Good ol classic Coins. Gain from most races and buy items from the shop with this.";if("Medals"===e)return"Rare currency gained from improving your circuit rank.";if("Renown"===e){var r=this.getRenown();return"Increases Coins gained from races by "+this.getRenownCoinModifier(r,!0).toFixed(2)+"%. Increase total number of free races available per reset period by 1 for every 100 renown for a total of "+this.getTotalFreeRacesPerPeriod()+". Complete circuit or free races to get your name out there and raise your renown."}return"Facility Level"===e?"Increase Diminishing Returns value by 5 for each level for a total of "+this.getDiminishingReturnsThreshold()+". You can increase a base stat up to your Diminishing Returns value before that base stat starts to increase your racing stats less and less.":"Tokens"===e?"Currency used to purchase items from the Event Shop.":"Talent Points"===e?"Use to improve any of your racers' talents. Each of these applies to all racers.":"Research Level"===e?"Increase incubator trait values by "+this.getResourceByName(e)+"% and unlock new available traits.":"Apples"===e||"Bananas"===e||"Oranges"===e||"Strawberries"===e||"Turnips"===e||"Carrots"===e||"Mangoes"===e?this.globalService.getItemDescription(e):"Bonus Breed XP Gain From Training"===e?"Increase Breed XP gained from training by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Free Races"===e?"Increase Breed XP gained from completing free races by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Circuit Races"===e?"Increase Breed XP gained from completing circuit races by this amount. Only applies to this animal.":"Diminishing Returns per Facility Level"===e?"Increase Diminishing Returns value by this amount for every Facility Level you have. Only applies to this animal.":"Orb Pendant"===e?"This looks like the perfect size to fit an orb inside.":"Training Time Reduction"===e?"Reduce training times by this percent. Only applies to this animal.":"Bonus Talents"===e?"Increase talent point amount for this animal.":n===$.Specialty?this.getSpecialtyItemDescription(e):n===$.Equipment?this.globalService.getEquipmentDescription(e):""}getAllRaceCourseTypes(){var e=[];for(let n in z)isNaN(Number(n))&&e.push(n);return e}getCourseTypeFromAnimalType(e){var n=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==n?n.raceCourseType:-1}getTalentTreeNameByEnum(e){var n="";return e===pt.sprint&&(n="Sprint"),e===pt.support&&(n="Support"),e===pt.longDistance&&(n="Long Distance"),n}getAllBarnSpecializations(){var e=[];return e.push("Breeding Grounds"),e.push("Training Facility"),this.isItemUnlocked("attractionSpecialization")&&e.push("Attraction"),this.isItemUnlocked("researchCenterSpecialization")&&e.push("Research Center"),e}getTrackRaceRewards(e){var n=[];return e===si.novice?(n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races")):e===si.intermediate?(n.push("- 200 Coins"),n.push("- +2 Bonus Breed XP Gain From Training"),n.push("- 1 Medal"),n.push("- +2 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- +5 Bonus Breed XP Gain From Circuit Races"),n.push("- 200 Coins"),n.push("- +2 Bonus Breed XP Gain From Training"),n.push("- 1 Medal"),n.push("- +2 Bonus Breed XP Gain From Free Races"),n.push("- +1% Training Time Reduction"),n.push("- +3 Diminishing Returns per Facility Level")):e===si.master&&(n.push("- +5 Bonus Breed XP Gain From Free Races"),n.push("- +2 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- 1000 Coins"),n.push("- +3 Bonus Breed XP Gain From Training"),n.push("- +2 Talents"),n.push("- +1% Training Time Reduction"),n.push("- 1000 Coins"),n.push("- Orb Pendant"),n.push("- +3 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- +3 Talents")),n}getGrandPrixTokenRewards(){var e=[],n=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),r=5e7,a=this.globalService.globalVar.modifiers.find(T=>"grandPrixToken1MeterModifier"===T.text);null!=a&&(r=a.value);var o=5e7,s=this.globalService.globalVar.modifiers.find(T=>"grandPrixToken2MeterModifier"===T.text);null!=s&&(o=s.value);var l=5e7,c=this.globalService.globalVar.modifiers.find(T=>"grandPrixToken3MeterModifier"===T.text);null!=c&&(l=c.value);var u=5e7,d=this.globalService.globalVar.modifiers.find(T=>"grandPrixToken4MeterModifier"===T.text);null!=d&&(u=d.value);var m=1*n,v=2*n,b=3*n,y=4*n;return e.push((r*n).toLocaleString()+" meters - +"+m+" Token"+(m>1?"s":"")),e.push((o*n).toLocaleString()+" meters - +"+v+" Tokens"),e.push((l*n).toLocaleString()+" meters - +"+b+" Tokens"),e.push((u*n).toLocaleString()+" meters - +"+y+" Tokens"),e}getRenownRequiredForEventShopTier(e){return 1===e?0:2===e?200:e>2?500*(e-2):-1}getHighestEventShopTierUnlocked(){var e=1,n=this.getRenown();return n>200&&(e=2),n>500&&(e=Math.floor(n/500)+2),e}isItemUnlocked(e){var n=!1,r=this.globalService.globalVar.unlockables.get(e);return null!=r&&(n=r),n}getAnimalsByRaceCourseType(e){var n=[];return"Flatland"===e?(n.push(L[L.Horse]),n.push(L[L.Cheetah]),n.push(L[L.Hare]),n.push(L[L.Warthog])):"Mountain"===e?(n.push(L[L.Monkey]),n.push(L[L.Goat]),n.push(L[L.Gecko])):"Ocean"===e?(n.push(L[L.Dolphin]),n.push(L[L.Shark]),n.push(L[L.Octopus]),n.push(L[L.Whale])):"Tundra"===e?(n.push(L[L.Penguin]),n.push(L[L.Caribou])):"Volcanic"===e&&(n.push(L[L.Salamander]),n.push(L[L.Fox])),n}GetAbilityEffectiveAmount(e,n,r,a,o){if(null==e.ability||null==e.ability.name)return-1;null==n&&(n=1),null==r&&(r=1);var s=1;e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.5),e.type===L.Warthog&&"Graze"===e.ability.name&&void 0!==o&&(s*=1+.1*o.filter(b=>"Power"===b[0]).length),e.talentTree.talentTreeType===pt.sprint&&(s*=1+.05*e.talentTree.column3Row2Points);var l=e.ability;null!=a&&(l=a);var c=1;null!=e.talentTree&&null!=e.raceVariables&&e.talentTree.talentTreeType===pt.sprint&&!e.raceVariables.firstAbilityUseEffectApplied&&(c*=1+.05*e.talentTree.column3Row4Points,e.raceVariables.firstAbilityUseEffectApplied=!0);var u=1;if(null!=e.raceVariables&&null!=e.raceVariables.relayEffects){var d=this.getRelayEffectFromListByType(e.raceVariables.relayEffects,qe.supportAbilityEfficiency);void 0!==d&&void 0!==d.additionalValue&&(u=d.additionalValue)}return(l.efficiency*u*c+l.efficiency*(.01*(l.abilityLevel-1)))*(1+e.currentStats.powerMs*s*n*r/100)}getAnimalAbilityDescription(e,n,r){if(e){if("Second Wind"===n)return"Stamina does not go down for a short period";if("Inspiration"===n)return"Increase next racer's max speed on relay";if("Pacemaker"===n)return"Increase acceleration for a short period";if("Sprint"===n)return"Increase max speed, acceleration, stamina cost for a short period";if("Giving Chase"===n)return"Increase acceleration when behind competitors";if("On The Hunt"===n)return"Gain max speed after each burst";if("Awareness"===n)return"Increase adaptability, focus for a short period";if("Prey Instinct"===n)return"Start in extended burst mode";if("Nap"===n)return"Delay leg start, increase max speed and focus";if("Graze"===n)return"Increase stats at random";if("Mud Pit"===n)return"Focus loss is longer, gain acceleration and lose less stamina";if("Time To Tussle"===n)return"Delay competitors when you complete your leg faster than the average pace";if("Landslide"===n)return"Delay competitors";if("Frenzy"===n)return"Increase burst distance, cannot stumble or lose focus during burst";if("Leap"===n)return"Jump to the end of the leg";if("Echolocation"===n)return"Increase adaptability, ignore negative terrain effects for a short period";if("Navigator"===n)return"Increase previous and next racer's adaptability";if("Flowing Current"===n)return"Increase next racer's acceleration on relay";if("Apex Predator"===n)return"Slow competitors if they pass you";if("Feeding Frenzy"===n)return"Slow next and previous racers, increase max speed and acceleration for a distance";if("Blood In The Water"===n)return"Increase max speed when ahead of competitors";if("Propulsion"===n)return"Dash a short distance";if("Buried Treasure"===n)return"Delay your start, increase coin gain for winning race";if("Big Brain"===n)return"Increase power of other racers after bursting a certain number of times";if("Storing Power"===n)return"Reduce max speed, gain increased max speed on burst";if("Unparalleled Focus"===n)return"Gain velocity floor after keeping focus for long enough";if("Whalesong"===n)return"Gain different stat boosts on use";if("Sure-footed"===n)return"Increase adaptability after not stumbling through path";if("Deep Breathing"===n)return"Regain stamina after burst, increase other racers' stamina";if("In The Rhythm"===n)return"Increase burst speed bonus";if("Sticky"===n)return"Cannot stumble for a short period";if("Night Vision"===n)return"Increase max speed by keeping focused";if("Camouflage"===n)return"Transfer velocity to next racer on relay";if("Herd Mentality"===n)return"Grant next racer portion of your stamina, they start in burst mode";if("Great Migration"===n)return"Sacrifice stamina for acceleration for a short period";if("Special Delivery"===n)return"Increase other racers' burst max speed bonus based on stamina";if("Careful Toboggan"===n)return"Increase adaptability for a short period";if("Wild Toboggan"===n)return"Increase max drift penalty, acceleration based on drift";if("Quick Toboggan"===n)return"Increase max speed if you do not drift";if("Cold Blooded"===n)return"Reduce stamina loss and increase focus distance for a short period based on distance in leg";if("Burrow"===n)return"Avoid lava fall, prevent stumbles for a short period";if("Heat Up"===n)return"Increase acceleration for a short period, gets stronger every use";if("Trickster"===n)return"Decrease one random stat, increase a different random stat for a short period";if("Fleeting Speed"===n)return"Increase max speed greatly, lose over time";if("Nine Tails"===n)return"Increase random stat for a short period, effect can stack"}else{var a="",o=void 0;if(null==r&&this.globalService.globalVar.animals.forEach(u=>{u.availableAbilities.forEach(d=>{d.name===n&&(r=u,o=d,null!=d.cooldown&&(a=d.cooldown.toString()))})}),null!=r){var s=this.GetAbilityEffectiveAmount(r,void 0,void 0,o).toLocaleString(void 0,{minimumFractionDigits:2});""===a&&null!=r.ability.cooldown&&(a=r.ability.cooldown.toString());var l="";return"Second Wind"===n?"Stamina does not decrease for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Inspiration"===n?"When the next racer starts, they gain 25% of your Max Speed for <span class='keyword'>"+s+"</span> meters. Passive.":"Pacemaker"===n?"Increase Acceleration Rate by 50% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Sprint"===n?" Gain 35% Max Speed and Acceleration Rate for <span class='keyword'>"+s+"</span> meters, but lose twice as much stamina as normal. "+a+" second cooldown.":"Giving Chase"===n?"While you are behind the average pace, increase Acceleration Rate by <span class='keyword'>"+s+"</span>%. Passive.":"On The Hunt"===n?"Every time you Burst, increase your Max Speed by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Awareness"===n?"Boosts Focus Distance and Adaptability Distance by 40% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Prey Instinct"===n?"Starts its leg in Burst mode that continues for an additional <span class='keyword'>"+s+"</span> meters. Passive.":"Nap"===n?"Sleep until the competition has traveled a distance equal to <span class='keyword'>"+s+"</span> meters from the end of your leg. Max Speed and Focus Distance are then doubled. Passive.":"Graze"===n?"Forage for food, gaining a 10% increase to a random stat for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Mud Pit"===n?"Right after losing focus, roll in a mud pit for 1 second. Afterwards, reduce Stamina loss by 25% and increase Burst Chance by 25% for <span class='keyword'>"+s+"</span> meters. Passive.":"Time To Tussle"===n?"If you finish your leg before the average competition, tangle with them as they pass the end of your leg. Slow them by <span class='keyword'>"+s+"</span> meters. Passive.":"Landslide"===n?"Drop rocks on competitors, delaying them <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Frenzy"===n?"Increase Burst distance by <span class='keyword'>"+s+"</span> meters. You do not stumble or lose focus while bursting. Passive.":"Leap"===n?"When you are <span class='keyword'>"+s+"</span> meters from the end of the leg, leap straight to the end over .5 seconds. Passive.":"Sure-footed"===n?"When you make it through a special path without stumbling, increase your Adaptability Distance by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Deep Breathing"===n?"Every time you Burst, regain <span class='keyword'>"+s+"</span>% of your stamina, up to 100%. If this amount exceeds 100% of your stamina, increase all other racers' stamina by the amount exceeded. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"In The Rhythm"===n?"Increase your max speed bonus while Bursting by <span class='keyword'>"+s+"</span>%. Passive.":"Sticky"===n?"Cannot stumble for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Night Vision"===n?"Increase Max Speed by <span class='keyword'>"+s+"</span>% for every path you complete without losing focus. If you lose focus, reset this bonus back to 0%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Camouflage"===n?"The velocity you finish your leg at is given to your following racer on Relay. Decrease this amount to 0 evenly over <span class='keyword'>"+s+"</span> meters. The following racer can break their max speed by up to 50% while this is active. Passive.":"Echolocation"===n?"Increase your Adaptability Distance by 75% for <span class='keyword'>"+s+"</span> meters and ignore any negative effects from the terrain. "+a+" second cooldown.":"Navigator"===n?"Assist the previous racer and next racer, boosting their Adaptability Distance by 25% of your max for the last and first <span class='keyword'>"+s+"</span> meters of their legs respectively. Passive.":"Flowing Current"===n?"When relaying, increase the Acceleration Rate of your next racer by 25% of your Acceleration Rate for <span class='keyword'>"+s+"</span> meters. Passive.":"Apex Predator"===n?"If the competitors moving at the average pace pass the shark during its leg, immediately bite them, slowing their pace by 50% for <span class='keyword'>"+s+"</span> meters. Can only occur once. Passive.":"Feeding Frenzy"===n?"Increase Max Speed and Acceleration Rate by 50% for the first and last <span class='keyword'>"+s+"</span> meters of your leg. Your next and previous racers have a 10% Max Speed reduction. Passive.":"Blood In The Water"===n?"While you are ahead of the average pace, increase Max Speed by <span class='keyword'>"+s+"</span>%. Passive.":"Propulsion"===n?"Dash <span class='keyword'>"+s+"</span> meters over .25 seconds. "+a+" second cooldown.":"Buried Treasure"===n?"Delay your start to search for treasure until the competition has traveled a distance equal to <span class='keyword'>"+s+"</span> meters from the end of your leg. If you still win the race, increase your Coin reward by 25%. Passive.":"Big Brain"===n?"After Bursting through one third of your race paths, increase Power Efficiency of all remaining racers by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 5 times. Effects remain for the duration of the race.":"Storing Power"===n?"On use, reduce Max Speed by 10% for <span class='keyword'>"+s+"</span> meters. If you burst while this is active, regain double the amount of Max Speed lost for the rest of the race. "+a+" second cooldown.":"Unparalleled Focus"===n?"Every time you complete 3 paths in a row without losing focus, gain a 20% velocity floor for <span class='keyword'>"+s+"</span> meters. While this is active, your velocity cannot drop below 20% of your Max Speed, and all calculations will consider that number to be 0% of your Max Speed. Passive.":"Whalesong"===n?"Gain 30% to a particular stat for <span class='keyword'>"+s+"</span> meters based on how many times you have used this ability, as follows:<br/>First Use - Gain 30% Adaptability Distance.<br/>Second Use - Gain 30% Burst Distance.<br/>Third Use - Gain 30% Acceleration Rate.<br/>Fourth Use - Gain 30% Focus Distance.<br/>Fifth Use - Gain 30% Max Speed.<br/>After 5 uses, every subsequent use will give 30% to all of these stats.<br/> Passive.":"Herd Mentality"===n?"After completing your leg, <span class='keyword'>"+s+"</span>% of your remaining Stamina is given to the next racer and they start their leg in Burst mode. This does not occur if you run out of Stamina during your leg. Passive.":"Great Migration"===n?"Reduce stamina by 10%. For <span class='keyword'>"+s+"</span> meters, Acceleration Rate is increased by 25% of the amount of stamina lost. "+a+" second cooldown.":"Special Delivery"===n?"Increase all remaining racers' Burst Max Speed Bonus by <span class='keyword'>"+s+"</span>% of your remaining Stamina percentage, up to 100%, after completing your leg. This does not occur if you run out of Stamina during your leg. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"Careful Toboggan"===n?"Increase Adaptability Distance by 60% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Wild Toboggan"===n?"Double the maximum amount of drift per path. Increase Acceleration Rate by up to <span class='keyword'>"+s+"</span>% based on how much you drift. Passive.":"Quick Toboggan"===n?"Every time you make it through a path without drifting, gain <span class='keyword'>"+s+"</span>% Max Speed. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Cold Blooded"===n?"Increase Focus Distance and reduce Stamina loss by up to 50% depending on how close to the center of the volcano you are. These bonuses last <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Burrow"===n?"Go underground for <span class='keyword'>"+s+"</span> meters, dodging lava fall and preventing stumbles. "+a+" second cooldown.":"Heat Up"===n?"Increase Acceleration Rate by 15% for <span class='keyword'>"+s+"</span> meters. This increase doubles every subsequent use this race. "+a+" second cooldown.":"Trickster"===n?"When active, sacrifice 25% of one random stat for 50% of another random stat. Lasts <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Fleeting Speed"===n?"Increase Max Speed by <span class='keyword'>"+s+"</span>%. Decrease this bonus by 2% for every percent of the leg you complete. Passive.":"Nine Tails"===n?"At the start of each path, increase either Acceleration Rate, Max Speed, Focus Distance, or Adaptability Distance by 15% for <span class='keyword'>"+s+"</span> meters. This effect can stack. Passive.":(null===(l=this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(l)))&&(l=""),l)}}return""}getBarnByBarnNumber(e){return this.globalService.globalVar.barns.find(n=>n.barnNumber===e)}getAvailableBarns(){var e=[];return e.push(this.getBarnByBarnNumber(1)),e.push(this.getBarnByBarnNumber(2)),e.push(this.getBarnByBarnNumber(3)),this.isItemUnlocked("barnRow2")&&(e.push(this.getBarnByBarnNumber(4)),e.push(this.getBarnByBarnNumber(5)),e.push(this.getBarnByBarnNumber(6))),this.isItemUnlocked("barnRow3")&&(e.push(this.getBarnByBarnNumber(7)),e.push(this.getBarnByBarnNumber(8)),e.push(this.getBarnByBarnNumber(9))),this.isItemUnlocked("barnRow4")&&(e.push(this.getBarnByBarnNumber(10)),e.push(this.getBarnByBarnNumber(11)),e.push(this.getBarnByBarnNumber(12))),this.isItemUnlocked("barnRow5")&&(e.push(this.getBarnByBarnNumber(13)),e.push(this.getBarnByBarnNumber(14)),e.push(this.getBarnByBarnNumber(15))),e}getResourcesForBarnUpgrade(e){var n=[],r=100;if(e<10)r=50;else if(r=100*(e-9),e>=100&&(r=9100+500*(e-99)),e>=200&&(r=59100+1e3*(e-199)),e>=300&&(r=159100+2500*(e-299)),e>=400){var l=Math.ceil((e-399)/100);r=409100;for(var u=1;u<=l;u++){var d=e-(400+100*(u-1)-1);d>100&&(d=100),r+=2500*(u+1)*d}}var m=new oe("Coins",r);if(n.push(m),e%10==9){var v;v=Math.ceil(e/100);var b=new oe("Medals",1*v);n.push(b)}return n}getBarnName(e){var n="",r=e.getSize();return(e.barnUpgrades.specialization===jt.None||null==e.barnUpgrades.specialization)&&(n=r+" Barn "+e.barnNumber),e.barnUpgrades.specialization===jt.Attraction&&(n=r+" Attraction "+e.barnNumber),e.barnUpgrades.specialization===jt.BreedingGrounds&&(n=r+" Breeding Grounds "+e.barnNumber),e.barnUpgrades.specialization===jt.TrainingFacility&&(n=r+" Training Facility "+e.barnNumber),e.barnUpgrades.specialization===jt.ResearchCenter&&(n=r+" Research Center "+e.barnNumber),n}getTerrainPopoverText(e,n){var r="";void 0!==n&&(r="The terrain for the "+n.getCourseTypeName()+" leg is "+e.getTerrainType()+": <br/>"),null!=e.staminaModifier&&1!==e.staminaModifier&&(r+=e.staminaModifier>1?"+"+(100*(e.staminaModifier-1)).toFixed(0)+"% stamina loss <br/>":"-"+(100*(1-e.staminaModifier)).toFixed(0)+"% stamina loss <br/>"),null!=e.maxSpeedModifier&&1!==e.maxSpeedModifier&&(r+=e.maxSpeedModifier>1?"+"+(100*(e.maxSpeedModifier-1)).toFixed(0)+"% max speed<br/>":"-"+(100*(1-e.maxSpeedModifier)).toFixed(0)+"% max speed<br/>"),null!=e.accelerationModifier&&1!==e.accelerationModifier&&(r+=e.accelerationModifier>1?"+"+(100*(e.accelerationModifier-1)).toFixed(0)+"% acceleration<br/>":"-"+(100*(1-e.accelerationModifier)).toFixed(0)+"% acceleration<br/>"),null!=e.powerModifier&&1!==e.powerModifier&&(r+=e.powerModifier>1?"+"+(100*(e.powerModifier-1)).toFixed(0)+"% power efficiency<br/>":"-"+(100*(1-e.powerModifier)).toFixed(0)+"% power efficiency<br/>"),null!=e.focusModifier&&1!==e.focusModifier&&(r+=e.focusModifier>1?"+"+(100*(e.focusModifier-1)).toFixed(0)+"% meters before losing focus<br/>":"-"+(100*(1-e.focusModifier)).toFixed(0)+"% meters before losing focus<br/>"),null!=e.adaptabilityModifier&&1!==e.adaptabilityModifier&&(r+=e.adaptabilityModifier>1?"+"+(100*(e.adaptabilityModifier-1)).toFixed(0)+"% meters before stumbling<br/>":"-"+(100*(1-e.adaptabilityModifier)).toFixed(0)+"% meters before stumbling<br/>");var a=this.utilityService.getSanitizedHtml(r);return null!=a&&(r=a),r}getInDepthSpecializationDescription(e){var n="";if("Breeding Grounds"===e){var r=0,a=this.globalService.globalVar.modifiers.find(C=>"breedingGroundsSpecializationModifier"===C.text);null!=a&&(r=a.value),n="For every 10 levels, gain "+100*r+"% additional breed XP when completing a training."}else if("Training Facility"===e)n="For every 10 levels up to level 200, gain 1% training time reduction. For every 10 levels after level 200, gain a .1 stat multiplier for every stat.";else if("Attraction"===e){var o=60,s=this.globalService.globalVar.modifiers.find(C=>"attractionTimeToCollectModifier"===C.text);null!=s&&(o=s.value);this.globalService.globalVar.modifiers.find(C=>"attractionAmountModifier"===C.text);n="Gain a certain amount of Coins every "+o+" seconds while an animal trains in this barn. At level 10, you gain 20 Coins and every subsequent 10 levels adds an additional 20 Coins * Specialization Level."}else if("Research Center"===e){var u=this.globalService.globalVar.modifiers.find(C=>"researchCenterIncrementsModifier"===C.text),d=this.globalService.globalVar.modifiers.find(C=>"researchCenterTrainingAnimalModifier"===C.text),m=this.globalService.globalVar.modifiers.find(C=>"researchCenterStudyingAnimalModifier"===C.text),v=this.globalService.globalVar.modifiers.find(C=>"researchCenterMaxStatGainModifier"===C.text),b=.05,y=.45,T=.25,k=.5;null!=u&&(b=u.value),null!=d&&(y=d.value),null!=m&&(T=m.value),null!=v&&(k=v.value),n="To start, the animal training at the Research Center only gains "+100*(y+b)+"% of the stat values from their training. Another animal at random will gain "+100*T+"% of the stat values from training, prioritizing animals of the same course type. For every 10 levels, "+100*b+"% additional stat gain will be distributed up to "+100*k+"% starting with the training animal and then the other animal. Additional animals will gain stats after maxing out the previous."}return n}convertSpecializationNameToEnum(e){return"Breeding Grounds"===e?jt.BreedingGrounds:"Training Facility"===e?jt.TrainingFacility:"Attraction"===e?jt.Attraction:"Research Center"===e?jt.ResearchCenter:jt.None}convertTalentTreeNameToEnum(e){return"Sprint"===e?pt.sprint:"Support"===e?pt.support:"Long Distance"===e?pt.longDistance:pt.none}convertSpecializationEnumToName(e){return e===jt.BreedingGrounds?"Breeding Grounds":e===jt.TrainingFacility?"Training Facility":e===jt.Attraction?"Attraction":e===jt.ResearchCenter?"Research Center":"None"}getTrainingTimeReductionFromTrainingFacility(e){return e.specialization===jt.TrainingFacility?.01*e.specializationLevel:0}getTrainingProgressionAnimationText(e){var n="";return e.affectedStatRatios.topSpeed>0&&(n+="+SPD\n"),e.affectedStatRatios.acceleration>0&&(n+="+ACC\n"),e.affectedStatRatios.endurance>0&&(n+="+END\n"),e.affectedStatRatios.power>0&&(n+="+PWR\n"),e.affectedStatRatios.focus>0&&(n+="+FCS\n"),e.affectedStatRatios.adaptability>0&&(n+="+ADP\n"),n}relayEffectTypeStacksEffectiveness(e){var n=!1;return(e===qe.bigBrain||e===qe.herdMentality||e===qe.deepBreathing||e===qe.specialDelivery)&&(n=!0),n}relayEffectPersistsEventSegments(e){var n=!1;return(e===qe.bigBrain||e===qe.redBaton||e===qe.blueBaton||e===qe.greenBaton||e===qe.orangeBaton||e===qe.violetBaton||e===qe.yellowBaton)&&(n=!0),n}getBreedLevelRequiredForGrandPrix(){var e=50,n=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}canAnimalTrain(e){var n=!0;this.globalService.globalVar.incubator.assignedAnimal===e&&(n=!1);var r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(n=!1),n}canAnimalRace(e){var n=!0,r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(n=!1),n}getTraitStatGainDescription(e){var n="",r="";return e.positiveStatGain===_e.acceleration&&(n="Acceleration"),e.positiveStatGain===_e.adaptability&&(n="Adaptability"),e.positiveStatGain===_e.endurance&&(n="Endurance"),e.positiveStatGain===_e.focus&&(n="Focus"),e.positiveStatGain===_e.power&&(n="Power"),e.positiveStatGain===_e.topSpeed&&(n="Speed"),e.negativeStatGain===_e.acceleration&&(r="Acceleration"),e.negativeStatGain===_e.adaptability&&(r="Adaptability"),e.negativeStatGain===_e.endurance&&(r="Endurance"),e.negativeStatGain===_e.focus&&(r="Focus"),e.negativeStatGain===_e.power&&(r="Power"),e.negativeStatGain===_e.topSpeed&&(r="Speed"),"+"+e.researchLevel+"% "+n+", -"+(e.researchLevel>25?25:e.researchLevel)+"% "+r}getSpecialtyItemDescription(e){var n="",r=5,a=this.globalService.globalVar.modifiers.find(v=>"internationalRacesToMedalModifier"===v.text);null!=a&&(r=a.value);var o=10,s=this.globalService.globalVar.modifiers.find(v=>"nationalRacesToMedalModifier"===v.text);null!=s&&(o=s.value);var l=5,c=this.globalService.globalVar.modifiers.find(v=>"whistleModifier"===v.text);null!=c&&(l=c.value);var u=5,d=this.globalService.globalVar.modifiers.find(v=>"goldenWhistleModifier"===v.text);null!=d&&(u=d.value),"Stopwatch"===e?n="Reduce training time by 5%":"Animal Handler"===e?n="Retain 2% of trained stats after breeding":"Course Maps"===e?n="Increase your chance to burst during special routes by 10%":"Stockbreeder"===e?n="Add option to auto breed when Breed XP is full":"Scouts"===e?n="You can choose the order of race legs for each relay team":"Money Mark"===e?n="Add new indicator to race, beat its time to gain increased coins":"National Races"===e?n="Gain 1 medal for every "+o+" free races you complete":"International Races"===e?n="Gain 1 medal for every "+r+" free races you complete":"Team Manager"===e?n="Automatically run 1 additional free race per reset period <em>(banks 8 hours worth of races when away from the game)</em>":"Incubator Upgrade Lv1"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .01 per Breed. <em>(10% trait value)</em>":"Incubator Upgrade Lv2"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .025 per Breed. <em>(25% trait value)</em>":"Incubator Upgrade Lv3"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .05 per Breed. <em>(50% trait value)</em>":"Incubator Upgrade Lv4"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .1 per Breed. <em>(100% trait value)</em>":"Whistle"===e?n="Gain +"+l+" to a stat instead of +1 after a successful coaching attempt":"Golden Whistle"===e?n="Gain +"+u+" to a stat instead of +"+l+" after a successful coaching attempt":"Talent Point Voucher"===e&&(n="Increase Talent Points by 1");var m=this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(n));return null!==m&&(n=m),n}getWeatherClusterFromEnum(e){var n="";return e===Hi.clearSkies?n="Clear Skies":e===Hi.inclementWeather?n="Inclement Weather":e===Hi.coldSpell&&(n="Cold Spell"),n}getWeatherClusterDescription(e){var n="";return e===Hi.clearSkies?n="Race terrain shifts between Sunny, Torrid, and Ashfall. \n Flatland and Volcanic Morale increased by 20%.":e===Hi.inclementWeather?n="Race terrain shifts between Rainy, Stormy, Maelstrom, and Hailstorm. \n Ocean Morale increased by 20%.":e===Hi.coldSpell&&(n="Race terrain shifts between Sunny, Snowfall, and Hailstorm. \n Tundra and Mountain Morale increased by 20%."),n}topSpeedPopover(e){var n=e.currentStats.defaultMaxSpeedModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultMaxSpeedModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,_e.topSpeed),c=1;e.talentTree.talentTreeType===pt.longDistance&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases max speed by "+this.getMaxSpeedModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.maxSpeedModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.maxSpeedModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}accelerationPopover(e){var n=e.currentStats.defaultAccelerationModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAccelerationModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,_e.acceleration),c=1;e.talentTree.talentTreeType===pt.sprint&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases acceleration by "+this.getAccelerationModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.accelerationModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.accelerationModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}endurancePopover(e){var n=e.currentStats.defaultStaminaModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultStaminaModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,_e.endurance),c=1;e.talentTree.talentTreeType===pt.longDistance&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases stamina by "+this.getStaminaModifierByAnimalType(e.type).toFixed(3)+" up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.staminaModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.staminaModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}powerPopover(e){var n=e.currentStats.defaultPowerModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultPowerModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,_e.power),c=1;e.talentTree.talentTreeType===pt.sprint&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases ability efficiency by "+this.getPowerModifierByAnimalType(e.type).toFixed(3)+"% up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.powerModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.powerModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}focusPopover(e){var n=e.currentStats.defaultFocusModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultFocusModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,_e.focus),c=1;e.talentTree.talentTreeType===pt.longDistance&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases focus distance by "+this.getFocusModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.focusModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.focusModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}adaptabilityPopover(e){var n=e.currentStats.defaultAdaptabilityModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAdaptabilityModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,_e.adaptability),c=1;e.talentTree.talentTreeType===pt.sprint&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases adaptability distance by "+this.getAdaptabilityModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.adaptabilityModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.adaptabilityModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}abilityPopover(){var e=25,n=this.globalService.globalVar.modifiers.find(a=>"abilityLevelCapModifier"===a.text);return null!=n&&(e=n.value),"Select from up to three different abilities by clicking on their names here. Using your ability during a race will award your ability XP which increases its effectiveness. Ability level cannot exceed your animal's breed level + "+e+"."}abilityLevelPopover(e){var n="Base Efficiency: "+e.ability.efficiency+"\n";return e.ability.abilityLevel>1&&(n+="Level Efficiency Multiplier: "+(1+.01*(e.ability.abilityLevel-1))),n}bonusFreeRaceXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusLocalBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusLocalBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusLocalBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusCircuitRaceXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusCircuitBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+2*e.miscStats.bonusCircuitBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusCircuitBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusTrainingXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusTrainingBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusTrainingBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusTrainingBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusDiminishingReturnsPerFacilityLevelPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusDiminishingReturnsCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusDiminishingReturnsCertificateCount+" (Certificates Used: "+e.miscStats.bonusDiminishingReturnsCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusTrainingTimeReductionPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction();return r>0&&(n+="Track Race Rewards: "+r+"%\n"),n}bonusTalentsPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();return r>0&&(n+="Track Race Rewards: "+r+"\n"),n}isAmountMoreThanCertificateCap(e,n,r){var a=!1;return e=+e,"Free Race Breed XP Gain Certificate"===r&&n.miscStats.bonusLocalBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Circuit Race Breed XP Gain Certificate"===r&&n.miscStats.bonusCircuitBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Training Breed XP Gain Certificate"===r&&n.miscStats.bonusTrainingBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Diminishing Returns Increase Certificate"===r&&n.miscStats.bonusDiminishingReturnsCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),a}getAnimalMorale(e){if(null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e);return null==n?0:n.morale}changeGrandPrixMorale(e,n){if(null!=this.globalService.globalVar.eventRaceData&&null!=this.globalService.globalVar.eventRaceData.animalData&&0!==this.globalService.globalVar.eventRaceData.animalData.length){var r=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e);null!=r&&(r.morale+=n,r.morale>=3&&(r.morale=3),r.morale<=.5&&(r.morale=.5))}}slowSegmentWarning(e){return!e||confirm("The animal you have selected has low racing stats for this race. You may experience some loading time as they race. Continue?")}getWeekDayGrandPrixTimeSpan(){var e=new Wi;return this.utilityService.getDayOfWeekFromNumber(e.weekStartDay)+" "+this.utilityService.get24HourFormat(e.weekStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekEndDay)+" "+this.utilityService.get24HourFormat(e.weekEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekEndHour)+")"}getWeekEndGrandPrixTimeSpan(){var e=new Wi;return this.utilityService.getDayOfWeekFromNumber(e.weekendStartDay)+" "+this.utilityService.get24HourFormat(e.weekendStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekendEndDay)+" "+this.utilityService.get24HourFormat(e.weekendEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendEndHour)+")"}getRandomTip(){var e="",n=[];return this.globalService.globalVar.settings.get("hideTips")||(n.push("After upgrading training options, reselect them to gain their benefits!"),n.push("Don't forget to export your save regularly!"),n.push("Have to recite the alphabet to figure out what your next circuit rank is? You're not alone, go to the settings to use numbers instead!"),n.push("Small barns allow training for 4 hours, medium for 8 hours, and large for 12 hours. Your animals will train even when the game is not active."),n.push("Each animal gains more or less racing stats from a base stat than other animals. Hover over each base stat in the Animals tab to see its modifier."),n.push("Can't quite finish a close race? Burst Chance and Distance are not affected by Diminishing Returns, so continue to increase those stats to get ahead!"),n.push("Want to take a more hands on approach? Go to any barn that has an animal assigned and start coaching to raise stats manually!"),e=n[this.utilityService.getRandomInteger(0,n.length-1)]),e}getRandomFunFact(){var e,n,r,a,o,s,l="",c=[];return this.globalService.globalVar.settings.get("hideTips")||(c.push("Horses are prey animals. Their best method of defense? Run!"),(null===(e=this.globalService.globalVar.animals.find(d=>d.type===L.Monkey))||void 0===e?void 0:e.isAvailable)&&c.push("There are over 300 species of Monkey in the world. Roughly half are considered Old World Monkeys in Asia and Africa, and the others are New World Monkeys in Central and South America."),(null===(n=this.globalService.globalVar.animals.find(d=>d.type===L.Goat))||void 0===n?void 0:n.isAvailable)&&c.push("Mountain goats' wide toes, rough hooves, and sharp dewclaws give them incredible traction and the ability to climb steep slopes sometimes over 60 degrees."),(null===(r=this.globalService.globalVar.animals.find(d=>d.type===L.Octopus))||void 0===r?void 0:r.isAvailable)&&c.push("Octopi have the largest brain of any invertebrate and have been known to use tools, such as using coconut husks to defend themselves."),(null===(a=this.globalService.globalVar.animals.find(d=>d.type===L.Hare))||void 0===a?void 0:a.isAvailable)&&c.push("Hares' teeth never stop growing. They continually chew on grasses and twigs to keep their teeth from getting too large."),(null===(o=this.globalService.globalVar.animals.find(d=>d.type===L.Penguin))||void 0===o?void 0:o.isAvailable)&&c.push("Penguins' bodies are tapered on both ends meaning they can swim with very little resistance. They are considered one of the most streamlined animals in the world."),(null===(s=this.globalService.globalVar.animals.find(d=>d.type===L.Salamander))||void 0===s?void 0:s.isAvailable)&&c.push("Salamanders are capable of regenerating some organs and limbs. Their impressive regeneration is used as a model for scientific studies."),l=c[this.utilityService.getRandomInteger(0,c.length-1)]),l}getSettingDescriptions(e){var n="";return"Auto Skip Race Info"===e&&(n="Turn on to immediately skip to the end of any race."),"Finish Training Before Switching"===e&&(n="Turn on to wait until finishing your current training before switching to the next training you select."),"Hide Tips"===e&&(n="Turn on to stop displaying tips in the footer. (Tips never display in Mobile version presently)"),"Use Numbers For Circuit Rank"===e&&(n="Turn on to use numbers instead of letters when displaying ranks."),"Auto Start Event Race"===e&&(n="When event race begins, automatically start running with your current event relay team."),"Race Display Info"===e&&(n="Choose how to view races. Draw only shows the visual aspect, text only shows the textual updates, and both shows both. Both is default."),n}getTotalFreeRacesPerPeriod(){var e=10,n=this.globalService.globalVar.modifiers.find(o=>"freeRacesPerTimePeriodModifier"===o.text);void 0!==n&&(e=n.value);var r=this.getRenown(),a=Math.floor(r/100);return a>15&&(a=15),e+a}getRemainingFreeRacesPerPeriod(){return this.getTotalFreeRacesPerPeriod()-this.globalService.globalVar.freeRaceCounter}getRelayEffectFromListByType(e,n){if(null!=e&&0!==e.length)return e.find(r=>r.effectType===n)}isEquipmentItemAnOrb(e){return"Amethyst Orb"===e||"Sapphire Orb"===e||"Amber Orb"===e||"Topaz Orb"===e||"Emerald Orb"===e||"Ruby Orb"===e}getRelayEffectNameByType(e){var n="";return e===qe.bigBrain?n="Big Brain":e===qe.blueBaton?n="Blue Baton":e===qe.camouflage?n="Camouflage":e===qe.deepBreathing?n="Deep Breathing":e===qe.flowingCurrent?n="Flowing Current":e===qe.greenBaton?n="Green Baton":e===qe.herdMentality?n="Herd Mentality":e===qe.inspiration?n="Inspiration":e===qe.navigator?n="Navigator":e===qe.orangeBaton?n="Orange Baton":e===qe.redBaton?n="Red Baton":e===qe.specialDelivery?n="Special Delivery":e===qe.supportAbilityCooldown?n="Cooldown Reduction Talent":e===qe.supportAbilityEfficiency?n="Ability Efficiency Talent":e===qe.supportAccelerationRelay?n="Acceleration Rate Talent":e===qe.supportAdaptabilityRelay?n="Adaptability Distance Talent":e===qe.supportBurstChance?n="Burst Chance Talent":e===qe.supportBurstDistance?n="Burst Distance Talent":e===qe.supportFocusRelay?n="Focus Distance Talent":e===qe.supportMaxSpeedRelay?n="Max Speed Talent":e===qe.supportPowerRelay?n="Power Efficiency Talent":e===qe.supportStaminaRelay?n="Stamina Talent":e===qe.violetBaton?n="Violet Baton":e===qe.yellowBaton&&(n="Yellow Baton"),n}getStatGainDescription(e,n){var r="";return e.topSpeed>0&&(r+="+"+n*e.topSpeed+" Speed\n"),e.acceleration>0&&(r+="+"+n*e.acceleration+" Acceleration\n"),e.endurance>0&&(r+="+"+n*e.endurance+" Endurance\n"),e.focus>0&&(r+="+"+n*e.focus+" Focus\n"),e.power>0&&(r+="+"+n*e.power+" Power\n"),e.adaptability>0&&(r+="+"+n*e.adaptability+" Adaptability\n"),r}getTalentTreeNames(){var e=[];return e.push("Sprint"),e.push("Support"),e.push("Long Distance"),e}getInDepthTalentTreeDescription(e){var n="";return"Sprint"===e?n="Sprinters excel at going short distances quickly. Whether it's through chaining together quick Bursts or powerful abilities, these racers will leave others in the dust at the starting line. Recommended for when you want to get the most out of Burst effects and high acceleration.":"Support"===e?n="Supporters excel when working alongside other animals. They have a special way of encouraging the racers after and sometimes before them to reach new limits. Recommended for when you want to get the most out of Relay effects.":"Long Distance"===e&&(n="Long Distance Racers excel when given time to ramp up and go the distance. These racers manage their stamina well and can reach incredible speeds over time. Recommended for racers with high max speed and that have abilities that improve over time."),n}getTalentDescription(e,n,r,a){var o="";return(null==a||a<=0)&&(a=1),r===pt.sprint&&(0===e&&0===n&&(o="Increase Adaptability stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(o="Increase Adaptability Distance by <span class='keyword'>"+5*a+"</span>% until you lose focus for the first time."),2===e&&0===n&&(o="Increase Adaptability Distance gain from Adaptability stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(o="Every time you make it through a special path without stumbling, enter a Burst that lasts <span class='keyword'>"+5*a+"</span>% as long as normal."),0===e&&1===n&&(o="Increase Acceleration stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(o="The first time velocity exceeds Max Speed while bursting, increase remaining burst distance by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===n&&(o="Increase Acceleration Rate gain from Acceleration stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(o="Each time your velocity reaches Max Speed, increase Max Speed by <span class='keyword'>"+.5*a+"</span>% and reduce Focus Distance by <span class='keyword'>"+.5*a+"</span>%. This effect can occur 10 times, up to <span class='keyword'>"+5*a+"</span>%."),0===e&&2===n&&(o="Increase Power stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(o="Increase Power Efficiency by <span class='keyword'>"+5*a+"</span>%, but consume stamina <span class='keyword'>"+5*a+"</span>% faster."),2===e&&2===n&&(o="Increase Power Efficiency gain from Power stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(o="The first time you use an ability every race, the efficiency is increased by <span class='keyword'>"+5*a+"</span>%.")),r===pt.support&&(0===e&&0===n&&(o="Increase Relay Animal's Adaptability Distance by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(o="Increase the effectiveness of your Relay effects by <span class='keyword'>"+2*a+"</span>%."),2===e&&0===n&&(o="Increase Relay Animal's Max Speed by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(o="The racer prior to you gains any relay effects you provide for <span class='keyword'>"+3*a+"</span>% of the normal length if possible."),0===e&&1===n&&(o="Increase Relay Animal's Acceleration Rate by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(o="Increase Burst Distance of next racer by <span class='keyword'>"+5*a+"</span>% of your Burst Distance on Relay."),2===e&&1===n&&(o="Increase Relay Animal's Stamina by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(o="Increase Burst Chance of next racer by <span class='keyword'>"+3*a+"</span>% of your Burst Chance on Relay."),0===e&&2===n&&(o="Increase Relay Animal's Power Efficiency by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(o="If Relay Animal ability has a cooldown, reduce it by <span class='keyword'>"+2*a+"</span>%."),2===e&&2===n&&(o="Increase Relay Animal's Focus Distance by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(o="Increase Relay Animal's Ability Efficiency by <span class='keyword'>"+2*a+"</span>%.")),r===pt.longDistance&&(0===e&&0===n&&(o="Increase Focus stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(o="Every burst increases Burst Velocity Bonus by <span class='keyword'>"+.5*a+"</span>%."),2===e&&0===n&&(o="Increase Focus Distance gain from Focus stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(o="Instead of reducing velocity to 10% when losing focus, reduce to <span class='keyword'>"+(10+2*a)+"</span>%."),0===e&&1===n&&(o="Increase Max Speed stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(o="While your velocity is 25% of your Max Speed or below, increase your Acceleration Rate by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===n&&(o="Increase Max Speed gain from Speed stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(o="After surpassing <span class='keyword'>"+.5*a+"</span>% of your Max Speed, your velocity can no longer drop below it. All calculations consider this to be 0% of your velocity."),0===e&&2===n&&(o="Increase Endurance stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(o="While stamina is below 35%, reduce stamina consumption by <span class='keyword'>"+5*a+"</span>%."),2===e&&2===n&&(o="Increase Stamina gain from Endurance stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(o="When running out of stamina, increase the percent regained by <span class='keyword'>"+2*a+"</span>%.")),o}getTalentUpgradeDescription(e,n,r,a){}getTotalPossiblePointsByRowColumn(e,n,r){var a=0;return r===pt.sprint&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),r===pt.support&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),r===pt.longDistance&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),a}getTalentPointsAvailableToAnimal(e){var n=0;return n=this.getResourceByName("Talent Points"),n+=e.miscStats.bonusTalents,(n-=e.talentTree.getTotalSpentPoints())<=0&&(n=0),n}gainMangoes(e){return new oe("Mangoes",e,$.Food)}gainApples(e){return new oe("Apples",e,$.Food)}gainBananas(e){return new oe("Bananas",e,$.Food)}gainOranges(e){return new oe("Oranges",e,$.Food)}gainStrawberries(e){return new oe("Strawberries",e,$.Food)}gainTurnips(e){return new oe("Turnips",e,$.Food)}gainCarrots(e){return new oe("Carrots",e,$.Food)}gainCoins(e){return new oe("Coins",e,$.Resources)}gainMedals(e){return new oe("Medals",e,$.Resources)}gainTokens(e){return new oe("Tokens",e,$.Resources)}}return t.\u0275fac=function(e){return new(e||t)(Le(Mt),Le(Ri),Le(Fo))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),xi=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n,this.totalTime=0,this.gameUpdateEvent=new ot}Update(){var e=Date.now();const n=(e-this.globalService.globalVar.lastTimeStamp)/1e3;this.deltaTime=n,this.totalTime+=n;var r=performance.now();this.globalService.globalVar.lastTimeStamp=e,this.gameUpdateEvent.emit(n),this.lastPerformanceNow=r,window.requestAnimationFrame(()=>this.Update())}}return t.\u0275fac=function(e){return new(e||t)(Le(Mt),Le(vn))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Il{constructor(i,e){this.transformationType=i,this.options=e,this.recursionStack=new Set}transform(i,e,n,r,a,o=0){if(Array.isArray(e)||e instanceof Set){const s=r&&this.transformationType===Xt.PLAIN_TO_CLASS?function $5(t){const i=new t;return i instanceof Set||"push"in i?i:[]}(r):[];return e.forEach((l,c)=>{const u=i?i[c]:void 0;if(this.options.enableCircularCheck&&this.isCircular(l))this.transformationType===Xt.CLASS_TO_CLASS&&(s instanceof Set?s.add(l):s.push(l));else{let d;if("function"!=typeof n&&n&&n.options&&n.options.discriminator&&n.options.discriminator.property&&n.options.discriminator.subTypes){if(this.transformationType===Xt.PLAIN_TO_CLASS){d=n.options.discriminator.subTypes.find(y=>y.name===l[n.options.discriminator.property]);const b=n.typeFunction({newObject:s,object:l,property:void 0});d=void 0===d?b:d.value,n.options.keepDiscriminatorProperty||delete l[n.options.discriminator.property]}this.transformationType===Xt.CLASS_TO_CLASS&&(d=l.constructor),this.transformationType===Xt.CLASS_TO_PLAIN&&(l[n.options.discriminator.property]=n.options.discriminator.subTypes.find(v=>v.value===l.constructor).name)}else d=n;const m=this.transform(u,l,d,void 0,l instanceof Map,o+1);s instanceof Set?s.add(m):s.push(m)}}),s}if(n===String&&!a)return null==e?e:String(e);if(n===Number&&!a)return null==e?e:Number(e);if(n===Boolean&&!a)return null==e?e:Boolean(e);if((n===Date||e instanceof Date)&&!a)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(function z5(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}().Buffer&&(n===Buffer||e instanceof Buffer)&&!a)return null==e?e:Buffer.from(e);if(function j5(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}(e)&&!a)return new Promise((s,l)=>{e.then(c=>s(this.transform(void 0,c,n,void 0,void 0,o+1)),l)});if(!a&&null!==e&&"object"==typeof e&&"function"==typeof e.then)return e;if("object"==typeof e&&null!==e){!n&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(n=e.constructor)),!n&&i&&(n=i.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);const s=this.getKeys(n,e,a);let l=i||{};!i&&(this.transformationType===Xt.PLAIN_TO_CLASS||this.transformationType===Xt.CLASS_TO_CLASS)&&(l=a?new Map:n?new n:{});for(const c of s){if("__proto__"===c||"constructor"===c)continue;const u=c;let v,d=c,m=c;if(!this.options.ignoreDecorators&&n)if(this.transformationType===Xt.PLAIN_TO_CLASS){const C=dr.findExposeMetadataByCustomName(n,c);C&&(m=C.propertyName,d=C.propertyName)}else if(this.transformationType===Xt.CLASS_TO_PLAIN||this.transformationType===Xt.CLASS_TO_CLASS){const C=dr.findExposeMetadata(n,c);C&&C.options&&C.options.name&&(d=C.options.name)}v=this.transformationType===Xt.PLAIN_TO_CLASS?e[u]:e instanceof Map?e.get(u):e[u]instanceof Function?e[u]():e[u];let b,y=v instanceof Map;if(n&&a)b=n;else if(n){const C=dr.findTypeMetadata(n,m);if(C){const R={newObject:l,object:e,property:m},Y=C.typeFunction?C.typeFunction(R):C.reflectedType;C.options&&C.options.discriminator&&C.options.discriminator.property&&C.options.discriminator.subTypes?e[u]instanceof Array?b=C:(this.transformationType===Xt.PLAIN_TO_CLASS&&(b=C.options.discriminator.subTypes.find(Q=>{if(v&&v instanceof Object&&C.options.discriminator.property in v)return Q.name===v[C.options.discriminator.property]}),b=void 0===b?Y:b.value,C.options.keepDiscriminatorProperty||v&&v instanceof Object&&C.options.discriminator.property in v&&delete v[C.options.discriminator.property]),this.transformationType===Xt.CLASS_TO_CLASS&&(b=v.constructor),this.transformationType===Xt.CLASS_TO_PLAIN&&v&&(v[C.options.discriminator.property]=C.options.discriminator.subTypes.find(Q=>Q.value===v.constructor).name)):b=Y,y=y||C.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(R=>R.target===n&&!!R.properties[m]).forEach(R=>b=R.properties[m]);else if(this.options.enableImplicitConversion&&this.transformationType===Xt.PLAIN_TO_CLASS){const R=Reflect.getMetadata("design:type",n.prototype,m);R&&(b=R)}}const T=Array.isArray(e[u])?this.getReflectedType(n,m):void 0,k=i?i[u]:void 0;if(l.constructor.prototype){const C=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if((this.transformationType===Xt.PLAIN_TO_CLASS||this.transformationType===Xt.CLASS_TO_CLASS)&&(C&&!C.set||l[d]instanceof Function))continue}if(this.options.enableCircularCheck&&this.isCircular(v)){if(this.transformationType===Xt.CLASS_TO_CLASS){let C=v;C=this.applyCustomTransformations(C,n,c,e,this.transformationType),(void 0!==C||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,C):l[d]=C)}}else{const C=this.transformationType===Xt.PLAIN_TO_CLASS?d:c;let R;this.transformationType===Xt.CLASS_TO_PLAIN?(R=e[C],R=this.applyCustomTransformations(R,n,C,e,this.transformationType),R=e[C]===R?v:R,R=this.transform(k,R,b,T,y,o+1)):void 0===v&&this.options.exposeDefaultValues?R=l[d]:(R=this.transform(k,v,b,T,y,o+1),R=this.applyCustomTransformations(R,n,C,e,this.transformationType)),(void 0!==R||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,R):l[d]=R)}}return this.options.enableCircularCheck&&this.recursionStack.delete(e),l}return e}applyCustomTransformations(i,e,n,r,a){let o=dr.findTransformMetadatas(e,n,this.transformationType);return void 0!==this.options.version&&(o=o.filter(s=>!s.options||this.checkVersion(s.options.since,s.options.until))),o=o.filter(this.options.groups&&this.options.groups.length?s=>!s.options||this.checkGroups(s.options.groups):s=>!s.options||!s.options.groups||!s.options.groups.length),o.forEach(s=>{i=s.transformFn({value:i,key:n,obj:r,type:a,options:this.options})}),i}isCircular(i){return this.recursionStack.has(i)}getReflectedType(i,e){if(!i)return;const n=dr.findTypeMetadata(i,e);return n?n.reflectedType:void 0}getKeys(i,e,n){let r=dr.getStrategy(i);"none"===r&&(r=this.options.strategy||"exposeAll");let a=[];if(("exposeAll"===r||n)&&(a=e instanceof Map?Array.from(e.keys()):Object.keys(e)),n)return a;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&i&&(a=[...dr.getExposedProperties(i,this.transformationType),...dr.getExcludedProperties(i,this.transformationType)]),!this.options.ignoreDecorators&&i){let o=dr.getExposedProperties(i,this.transformationType);this.transformationType===Xt.PLAIN_TO_CLASS&&(o=o.map(l=>{const c=dr.findExposeMetadata(i,l);return c&&c.options&&c.options.name?c.options.name:l})),a=this.options.excludeExtraneousValues?o:a.concat(o);const s=dr.getExcludedProperties(i,this.transformationType);s.length>0&&(a=a.filter(l=>!s.includes(l))),void 0!==this.options.version&&(a=a.filter(l=>{const c=dr.findExposeMetadata(i,l);return!c||!c.options||this.checkVersion(c.options.since,c.options.until)})),a=a.filter(this.options.groups&&this.options.groups.length?l=>{const c=dr.findExposeMetadata(i,l);return!c||!c.options||this.checkGroups(c.options.groups)}:l=>{const c=dr.findExposeMetadata(i,l);return!(c&&c.options&&c.options.groups&&c.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter(o=>this.options.excludePrefixes.every(s=>o.substr(0,s.length)!==s))),a=a.filter((o,s,l)=>l.indexOf(o)===s),a}checkVersion(i,e){let n=!0;return n&&i&&(n=this.options.version>=i),n&&e&&(n=this.options.version<e),n}checkGroups(i){return!i||this.options.groups.some(e=>i.includes(e))}}const Vl={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},Sa=new class W5{instanceToPlain(i,e){return new Il(Xt.CLASS_TO_PLAIN,zr(zr({},Vl),e)).transform(void 0,i,void 0,void 0,void 0,void 0)}classToPlainFromExist(i,e,n){return new Il(Xt.CLASS_TO_PLAIN,zr(zr({},Vl),n)).transform(e,i,void 0,void 0,void 0,void 0)}plainToInstance(i,e,n){return new Il(Xt.PLAIN_TO_CLASS,zr(zr({},Vl),n)).transform(void 0,e,i,void 0,void 0,void 0)}plainToClassFromExist(i,e,n){return new Il(Xt.PLAIN_TO_CLASS,zr(zr({},Vl),n)).transform(i,e,void 0,void 0,void 0,void 0)}instanceToInstance(i,e){return new Il(Xt.CLASS_TO_CLASS,zr(zr({},Vl),e)).transform(void 0,i,void 0,void 0,void 0,void 0)}classToClassFromExist(i,e,n){return new Il(Xt.CLASS_TO_CLASS,zr(zr({},Vl),n)).transform(e,i,void 0,void 0,void 0,void 0)}serialize(i,e){return JSON.stringify(this.instanceToPlain(i,e))}deserialize(i,e,n){const r=JSON.parse(e);return this.plainToInstance(i,r,n)}deserializeArray(i,e,n){const r=JSON.parse(e);return this.plainToInstance(i,r,n)}};function n0(t,i,e){return Sa.plainToInstance(t,i,e)}let r0=(()=>{class t{constructor(e,n,r){this.globalService=e,this.utilityService=n,this.lookupService=r}getSpecializationPopoverText(e,n){var r="";if(e===jt.TrainingFacility&&(r=n<=20?"Training Time Reduction: "+n+"%<br/>":"Training Time Reduction: 20%<br/> All Stat Multiplier: "+(n-20)/10+"<br/>"),e===jt.BreedingGrounds){var a=this.globalService.globalVar.modifiers.find(Q=>"breedingGroundsSpecializationModifier"===Q.text);null!=a&&(r="Training Breed XP Multipler: "+n*(100*a.value)+"%<br/>")}if(e===jt.Attraction){var o=60,s=this.globalService.globalVar.modifiers.find(Q=>"attractionTimeToCollectModifier"===Q.text);null!=s&&(o=s.value);var l=0;if(null!=this.globalService.globalVar.modifiers.find(Q=>"attractionAmountModifier"===Q.text))for(var u=1;u<=n;u++)l+=20*u;r="Amount Earned: "+l+" Coins / "+o+" seconds<br/>"}else if(e===jt.ResearchCenter){var d=this.globalService.globalVar.modifiers.find(Q=>"researchCenterIncrementsModifier"===Q.text),m=this.globalService.globalVar.modifiers.find(Q=>"researchCenterTrainingAnimalModifier"===Q.text),v=this.globalService.globalVar.modifiers.find(Q=>"researchCenterStudyingAnimalModifier"===Q.text),b=this.globalService.globalVar.modifiers.find(Q=>"researchCenterMaxStatGainModifier"===Q.text);if(null==d||null==m||null==v||null==b)return"";var y=n*d.value,k="Training Animal Stat Gain: "+(100*(m.value+y<b.value?m.value+y:b.value)).toFixed(0)+"%<br />",C=(y-(b.value-m.value))/(b.value-v.value);C>0?(Math.floor(C)>0&&(k+="Additional Studying Animal Stat Gain (x"+Math.floor(C)+"): "+(100*b.value).toFixed(0)+"%<br />"),C>Math.floor(C)&&(k+="Additional Studying Animal Stat Gain: "+(100*((C-Math.floor(C))*(b.value-v.value)+v.value)).toFixed(0)+"%<br />")):k+="Additional Studying Animal Stat Gain: "+(100*v.value).toFixed(0)+"%<br />",r=k}var Y=this.utilityService.getSanitizedHtml(r);return null!=Y&&(r=Y),r}handleResearchCenterStatIncrease(e,n){var r=this.globalService.globalVar.modifiers.find(Q=>"researchCenterIncrementsModifier"===Q.text),a=this.globalService.globalVar.modifiers.find(Q=>"researchCenterTrainingAnimalModifier"===Q.text),o=this.globalService.globalVar.modifiers.find(Q=>"researchCenterStudyingAnimalModifier"===Q.text),s=this.globalService.globalVar.modifiers.find(Q=>"researchCenterMaxStatGainModifier"===Q.text);if(null!=r&&null!=a&&null!=o&&null!=s&&null!=e.currentTraining){var T,c=n.barnUpgrades.specializationLevel*r.value,u=e.currentTraining.affectedStatRatios.topSpeed,d=e.currentTraining.affectedStatRatios.acceleration,m=e.currentTraining.affectedStatRatios.endurance,v=e.currentTraining.affectedStatRatios.power,b=e.currentTraining.affectedStatRatios.focus,y=e.currentTraining.affectedStatRatios.adaptability;e.increaseStats(new Ee((T=a.value+c<s.value?a.value+c:s.value)*u,T*d,T*m,T*v,T*b,T*y)),this.globalService.calculateAnimalRacingStats(e);var k=(c-(s.value-a.value))/(s.value-o.value),C=this.getAnimalsInRandomOrder(e.raceCourseType,e);if(k>0){C.length<k&&(k=C.length);for(var R=0;R<Math.floor(k);R++)C[R].increaseStats(new Ee(s.value*u,s.value*d,s.value*m,s.value*v,s.value*b,s.value*y)),this.globalService.calculateAnimalRacingStats(C[R]);if(k>Math.floor(k)&&C.length>R){var Y=o.value+(k-Math.floor(k))*(s.value-o.value);C[R].increaseStats(new Ee(Y*u,Y*d,Y*m,Y*v,Y*b,Y*y)),this.globalService.calculateAnimalRacingStats(C[R])}}else C.length>=1&&(C[0].increaseStats(new Ee((Y=o.value)*u,Y*d,Y*m,Y*v,Y*b,Y*y)),this.globalService.calculateAnimalRacingStats(C[0]))}}getAnimalsInRandomOrder(e,n){for(var r=[],a=this.globalService.globalVar.animals.filter(u=>u.raceCourseType===e&&u.isAvailable&&u.type!==n.type),o=this.globalService.globalVar.animals.filter(u=>u.raceCourseType!==e&&u.isAvailable),s=a.length,l=0;l<s;l++){var c=this.utilityService.getRandomInteger(1,a.length);r.push(a[c-1]),a=a.filter(u=>u!==a[c-1])}for(s=o.length,l=0;l<s;l++)c=this.utilityService.getRandomInteger(1,o.length),r.push(o[c-1]),o=o.filter(m=>m!==o[c-1]);return r}handleAttractionRevenue(e,n){var r=this.globalService.globalVar.barns.find(m=>m.barnNumber===n.associatedBarnNumber);if(null!=r&&r.barnUpgrades.specialization===jt.Attraction){var a=60,o=this.globalService.globalVar.modifiers.find(m=>"attractionTimeToCollectModifier"===m.text);null!=o&&(a=o.value);var s=0;if(null!=this.globalService.globalVar.modifiers.find(m=>"attractionAmountModifier"===m.text))for(var c=1;c<=r.barnUpgrades.specializationLevel;c++)s+=20*c;for(r.barnUpgrades.currentDeltaTime+=e,null!==n.currentTraining&&r.barnUpgrades.currentDeltaTime>=n.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.currentDeltaTime=n.currentTraining.trainingTimeRemaining);r.barnUpgrades.currentDeltaTime>=a;){r.barnUpgrades.currentDeltaTime-=a;var d=this.globalService.globalVar.resources.find(m=>"Coins"===m.name);void 0!==d&&(d.amount+=s)}}}}return t.\u0275fac=function(e){return new(e||t)(Le(Mt),Le(Ri),Le(vn))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Br=(()=>{return(t=Br||(Br={}))[t.None=0]="None",t[t.Stumble=1]="Stumble",t[t.LostFocus=2]="LostFocus",t[t.LostStamina=3]="LostStamina",t[t.Burst=4]="Burst",Br;var t})();let a0=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.utilityService=r,this.initializeService=a,this.frameModifier=60,this.timeToComplete=60,this.currentLostFocusOpportunity=0,this.currentBurstOpportunity=0,this.tundraPreviousYAmount=0}runRace(e,n){this.currentBurstOpportunity=0,this.currentLostFocusOpportunity=0,this.tundraPreviousYAmount=0,this.selectedRace=e;var r=new af,a=0,o=0,s=0,l=0,c=0;e.raceLegs.forEach(se=>a+=se.distance);var u=0;(0===e.timeToComplete||null==e.timeToComplete)&&(e.timeToComplete=60);var d=a/e.timeToComplete,m=this.globalService.globalVar.animalDecks.find(se=>se.isPrimaryDeck),v=0;this.timeToComplete=e.timeToComplete;var b=[],y=[],T=Br.None,k=0,C=0,R=0,Y=0,Q=0,ee=0,me=1,pe=0,ce=new Dt,ve=new Dt;if(void 0===m)return r.errorMessage="No relay team selected.",r;if(this.racingAnimals=this.lookupService.getAnimalsFromAnimalDeck(m),e.raceUI.distanceCoveredByFrame=[],e.raceUI.velocityByFrame=[],e.raceUI.timeToCompleteByFrame=[],e.raceUI.maxSpeedByFrame=[],e.raceUI.staminaPercentByFrame=[],e.raceUI.yAdjustmentByFrame=[],e.raceUI.racerEffectByFrame=[],e.raceUI.lavaFallPercentByFrame=[],e.raceUI.racePositionByFrame=[],e.timeToComplete<=180)r.addRaceUpdate(u,Math.round(e.timeToComplete)+" seconds are on the race clock.");else{var ye=this.globalService.getRemainingEventRaceTime()+this.globalService.globalVar.eventRaceData.bonusTime,Ue=this.utilityService.getHoursRemainingFromSeconds(ye),yt=this.utilityService.getMinutesLeftInHourRemainingFromSeconds(ye),wt=this.utilityService.getSecondsLeftInMinuteRemainingFromSeconds(ye),Et=Math.floor(wt).toString(),Rt=Ue.toString(),lt=yt.toString();Ue<10&&(Rt=Ue<1||Ue>59?"00":String(Rt).padStart(2,"0")),yt<10&&(lt=yt<1||yt>59?"00":String(lt).padStart(2,"0")),wt<10&&(Et=wt<1||wt>59?"00":String(Et).padStart(2,"0")),r.addRaceUpdate(u,Rt+":"+lt+":"+Et+" is left on the race clock.")}return e.raceLegs.forEach(se=>{var S=null;null!=(S=this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(tt=>tt.raceCourseType===se.courseType))?this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||(S.raceVariables=new vo,S.totalRacesRun+=1):alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),this.globalService.globalVar.trackedStats.totalRaces+=1,e.raceLegs.forEach(se=>{var S=void 0;if(null!=(S=this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(We=>We.raceCourseType===se.courseType))){this.increasePersistentAbilityXp(S);var tt=void 0;this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&(tt=this.globalService.globalVar.eventRaceData.previousRaceSegmentData);var bn=void 0,kt=new Hn,Ze="<span class='coloredText "+se.getCourseTypeClass()+"'>"+S.name+"</span>",dt="",Wn="";if(C>0){var qn=this.racingAnimals.find(We=>We.raceCourseType===e.raceLegs[C-1].courseType);null!=qn&&(ce=qn)}else ce=null;if(C<e.raceLegs.length-1){kt=e.raceLegs[C+1];var ei=this.racingAnimals.find(We=>We.raceCourseType===kt.courseType);null!=ei&&(ve=ei,Wn="<span class='coloredText "+kt.getCourseTypeClass()+"'>"+(null==ve?void 0:ve.name)+"</span>")}else ve=null;this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&r.addRaceUpdate(u,Ze+" clears "+Math.round(this.selectedRace.length).toLocaleString()+" meters of the Grand Prix and moves onto the next leg of the race.");var Nn=se.terrain.maxSpeedModifier,ti=se.terrain.accelerationModifier,Xn=se.terrain.staminaModifier,Yn=se.terrain.powerModifier,Gn=se.terrain.focusModifier,Fn=se.terrain.adaptabilityModifier;u<this.timeToComplete*this.frameModifier&&(y.length>0&&void 0!==(bn=y[y.length-1])&&(dt="<span class='coloredText "+bn.getCourseTypeClass()+"'>"+(null==ce?void 0:ce.name)+"</span>"),this.getPrelayEffects(S,ve,null==kt?void 0:kt.terrain,1,r,u,dt,kt,se),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.PrepareRacingAnimal(r,u,dt,S,b,se,bn,void 0,void 0,s,c,l),this.prepareRacingLeg(se,S),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix||r.addRaceUpdate(u,Ze+" starts their leg of the race."));var bt=S.currentStats.stamina,gt=0,ln=se.distance,rn=new sf,Bn=new sf,gn=!1,kn=1,tr={permanentAdaptabilityIncreaseMultiplier:1},Tr={permanentMaxSpeedIncreaseMultiplier:1},Te=1,De=1,cn={coldBloodedIncreaseMultiplier:1},pr=1,Oi=[],wi=[],At=1,nt=!1,It=0,Gr=[!1,!1,!1,!1,!1],Ka=!1,sa=0,Za=!1,Ja=0,yo=0,an=0,la=0,Wo=0,qo=0;if(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var jl=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime();Wo+=d*jl,qo=this.globalService.globalVar.eventRaceData.distanceCovered}o+qo>d*(u/this.frameModifier)+Wo?(nt||(ju=!0),nt=!0):(nt&&(ju=!0),nt=!1),null!=tt&&(gt=tt.velocity,S.currentStats.stamina=tt.stamina,Y=tt.deepBreathingStaminaGain,kn=tt.permanentMaxSpeedIncreaseMultiplier,tr.permanentAdaptabilityIncreaseMultiplier=tt.permanentAdaptabilityIncreaseMultiplier,Tr.permanentMaxSpeedIncreaseMultiplier=tt.permanentMaxSpeedIncreaseObjMultiplier,Te=tt.feedingFrenzyIncreaseMultiplier,De=tt.greatMigrationAccelerationIncreaseAdditive,cn.coldBloodedIncreaseMultiplier=tt.coldBloodedIncreaseMultiplier,pr=tt.fleetingSpeedIncreaseMultiplier,yo=tt.whalePowerStored,la=tt.pathsClearedWithoutLosingFocus,S.raceVariables=tt.raceVariables.makeCopy(),tt.nineTailsBuffs.length>0&&tt.nineTailsBuffs.forEach(We=>{Oi.push(We)}),tt.grazeBuffs.length>0&&tt.grazeBuffs.forEach(We=>{wi.push(We)}),tt.relayEffects.length>0&&tt.relayEffects.forEach(We=>{null!=S&&(S.raceVariables.relayEffects.push(We),null!=S.raceVariables.relayEffects&&S.raceVariables.relayEffects.length>0&&S.raceVariables.relayEffects.forEach(nb=>{nb.isMultiplicative?S.currentStats.multiplyCurrentRacingStats(nb.relayAffectedStatRatios):S.currentStats.addCurrentRacingStats(nb.relayAffectedStatRatios)}))}),Ka=tt.longDistanceTalentIncreaseAccelerationWithLowVelocity,sa=tt.maxSpeedFloor,At=tt.statLossFromExhaustion);var Wl=this.lookupService.getRelayEffectFromListByType(S.raceVariables.relayEffects,qe.camouflage);void 0!==Wl&&void 0!==Wl.additionalValue&&(Q=Wl.additionalValue);var ql=this.lookupService.getRelayEffectFromListByType(S.raceVariables.relayEffects,qe.herdMentality);void 0!==ql&&void 0!==ql.additionalValue&&(R=ql.additionalValue);var ni,Xl=this.lookupService.getRelayEffectFromListByType(S.raceVariables.relayEffects,qe.specialDelivery);void 0!==Xl&&void 0!==Xl.additionalValue&&(ee=Xl.additionalValue),"Nap"===S.ability.name&&S.type===L.Hare&&((ni=se.distance-this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At))<0&&(ni=0),S.ability.remainingLength=ni),"Buried Treasure"===S.ability.name&&S.type===L.Octopus&&((ni=se.distance-this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At))<0&&(ni=0),S.ability.remainingLength=ni);var Gi=this.lookupService.getRelayEffectFromListByType(S.raceVariables.relayEffects,qe.deepBreathing);if(void 0!==Gi&&void 0!==Gi.additionalValue){var zi=S.raceVariables.relayEffects.filter(We=>We.effectType===qe.deepBreathing);void 0!==zi&&zi.forEach(We=>{void 0!==We.additionalValue&&(Y=We.additionalValue),Y>0&&S.type!==L.Goat&&(S.currentStats.stamina+=Y)})}for(var wo=u;wo<=this.timeToComplete*this.frameModifier;wo++){It+=1,T=Br.None;var Cs=!1,Nu=0;if(v>0)for(var Yl=0;Yl<v;Yl++)Nu+=e.raceLegs[Yl].distance;d=this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime):a/this.timeToComplete;var Dr=o-Nu,Ql=0,N0=!1,Fu=0;if(se.pathData.forEach(We=>{!N0&&Dr>=Fu&&Dr<Fu+We.length&&(N0=!0,rn=We,Ql=Dr-Fu),We.legStartingDistance=Fu,Fu+=We.length,N0||(Bn=We)}),"Night Vision"===S.ability.name&&S.type===L.Gecko&&!S.ability.abilityInUse&&!Bn.didAnimalLoseFocus&&Bn.length>0&&(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCap||(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount+=1),kn+=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At)/100,this.globalService.increaseAbilityXp(S),S.ability.abilityInUse=!0)),"Feeding Frenzy"===S.ability.name&&S.type===L.Shark){var Af=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At);if(Dr<=Af||Dr>=se.distance-Af){Te=1.5;var h2=this.globalService.globalVar.modifiers.find(We=>"feedingFrenzyPositiveModifier"===We.text);void 0!==h2&&(Te=h2.value)}else Te=1}R>0&&(S.raceVariables.isBursting=!0,Cs=!0,S.currentStats.stamina+=R,R=0,null!=ce&&(ce.ability.abilityUsed=!0)),"Navigator"===S.ability.name&&S.type===L.Dolphin&&(S.ability.abilityInUse=!1),S.type===L.Fox&&"Fleeting Speed"===S.ability.name&&!S.ability.abilityUsed&&(pr+=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At)/100,S.ability.abilityUsed=!0),S.type===L.Dolphin&&"Echolocation"===S.ability.name&&(S.ability.abilityInUse?(se.terrain.maxSpeedModifier<1&&(se.terrain.maxSpeedModifier=1),se.terrain.accelerationModifier<1&&(se.terrain.accelerationModifier=1),se.terrain.staminaModifier<1&&(se.terrain.staminaModifier=1),se.terrain.powerModifier<1&&(se.terrain.powerModifier=1),se.terrain.focusModifier<1&&(se.terrain.focusModifier=1),se.terrain.adaptabilityModifier<1&&(se.terrain.adaptabilityModifier=1)):(se.terrain.maxSpeedModifier=Nn,se.terrain.accelerationModifier=ti,se.terrain.staminaModifier=Xn,se.terrain.powerModifier=Yn,se.terrain.focusModifier=Gn,se.terrain.adaptabilityModifier=Fn,this.checkForBlinders(se,S))),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?(gn=!1,rn===se.pathData[se.pathData.length-1]&&this.globalService.globalVar.eventRaceData.animalData.some(We=>We.isSetToRelay)&&(gn=!0)):gn=rn===se.pathData[se.pathData.length-1];var Bu=this.getModifiedAdaptability(S,tr,At,Oi,wi,se,Dr,ve,kt,r,u,Ze,Wn),Pf=this.getModifiedFocus(S,At,Oi,wi,cn),n$=this.didAnimalStumble(S,rn,Ql,se.terrain,tr,Bu,At,u,Ze,r),f2=this.didAnimalLoseFocus(S,this.timeToComplete,e.length,o,se.terrain,At,cn,rn,Pf);if(f2){if(S.raceVariables.lostFocus=!0,S.raceVariables.hasLostFocusDuringRace=!0,S.raceVariables.currentLostFocusLength=S.raceVariables.defaultLostFocusLength,S.raceVariables.metersSinceLostFocus=0,k=gt,this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var p2=.02,F0=this.globalService.globalVar.modifiers.find(We=>"focusMoraleLossModifier"===We.text);null!=F0&&(p2=F0.value),this.lookupService.changeGrandPrixMorale(S.type,-p2)}if("Night Vision"===S.ability.name&&S.type===L.Gecko&&(kn=1),S.getEquippedItemName()===this.globalService.getEquipmentName(et.scaryMask)&&nt&&!S.raceVariables.scaryMaskEffectOccurred){S.raceVariables.scaryMaskEffectOccurred=!0;var B0=2,g2=this.globalService.globalVar.modifiers.find(We=>"scaryMaskEquipmentModifier"===We.text);void 0!==g2&&(B0=g2.value),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=B0:this.timeToComplete+=B0}r.addRaceUpdate(u,Ze+" is distracted and lost focus!")}if(n$){if(S.raceVariables.stumbled=!0,S.raceVariables.currentStumbledLength=S.raceVariables.defaultStumbledLength,k=gt,this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var m2=.02,L0=this.globalService.globalVar.modifiers.find(We=>"stumbleMoraleLossModifier"===We.text);null!=L0&&(m2=L0.value),this.lookupService.changeGrandPrixMorale(S.type,-m2)}r.addRaceUpdate(u,Ze+" stumbles!")}if(0===S.currentStats.stamina){var Ef=.9,v2=this.globalService.globalVar.modifiers.find(We=>"exhaustionStatLossModifier"===We.text);if(void 0!==v2&&(Ef=v2.value),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var U0=1-Ef;Ef=1-(U0*=1/this.lookupService.getAnimalMorale(S.type))}At*=Ef;var H0=.1,b2=this.globalService.globalVar.modifiers.find(We=>"exhaustionStatLossMinimumModifier"===We.text);void 0!==b2&&(H0=b2.value),At<H0&&(At=H0),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.setStaminaLossForEventAnimal(At,S.type);var If=.5;if(S.talentTree.talentTreeType===pt.longDistance&&(If+=.02*S.talentTree.column3Row4Points),S.getEquippedItemName()===this.globalService.getEquipmentName(et.quickSnack)){If=1;var _2=this.globalService.globalVar.modifiers.find(We=>"quickSnackEquipmentModifier"===We.text);void 0!==_2&&(If=_2.value)}S.currentStats.stamina=bt*If,r.addRaceUpdate(u,Ze+" runs out of stamina and must slow down.")}if(S.raceVariables.lostFocus||S.raceVariables.stumbled||Za){if(S.raceVariables.lostFocus){T=Br.LostFocus;var y2=.9;S.talentTree.talentTreeType===pt.longDistance&&(y2-=.02*S.talentTree.column1Row4Points);var G0=k*y2;gt>sa&&(gt-=G0/S.raceVariables.defaultLostFocusLength),S.raceVariables.currentLostFocusLength-=1,0===S.raceVariables.currentLostFocusLength&&(S.raceVariables.lostFocus=!1,S.type===L.Warthog&&"Mud Pit"===S.ability.name&&(r.addRaceUpdate(u,Ze+" finds a mud pit and can't help but roll in it."),S.ability.abilityInUse=!0,Za=!0,k=gt,gt=0,S.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At),this.globalService.increaseAbilityXp(S)))}if(S.raceVariables.stumbled&&(T=Br.Stumble,G0=k-k*rn.stumbleSeverity,gt>sa&&(gt-=G0/S.raceVariables.defaultStumbledLength),S.raceVariables.currentStumbledLength-=1,0===S.raceVariables.currentStumbledLength&&(S.raceVariables.stumbled=!1)),Za){var w2=e.length/this.timeToComplete;Ja<this.frameModifier/4||Ja>=3*this.frameModifier/4?gt+=w2/this.frameModifier:gt-=w2/this.frameModifier,(Ja+=1)===this.frameModifier&&(Za=!1,Ja=0,gt=k)}}else{var Ni=S.currentStats.accelerationMs;if(Ni*=se.terrain.accelerationModifier,Ni*=At,S.type===L.Horse&&"Pacemaker"===S.ability.name&&S.ability.abilityInUse&&(Ni*=1.5),S.type===L.Cheetah&&"Sprint"===S.ability.name&&S.ability.abilityInUse&&(Ni*=1.35),S.type===L.Cheetah&&"Giving Chase"===S.ability.name&&!nt&&(Ni*=1+this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At)/100),"Feeding Frenzy"===S.ability.name&&S.type===L.Shark&&(Ni*=Te),S.type===L.Caribou&&"Great Migration"===S.ability.name&&(Ni+=De),"Wild Toboggan"===S.ability.name&&S.type===L.Penguin&&S.ability.abilityInUse){var r$=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At)/100,Ss=20,C2=this.globalService.globalVar.modifiers.find(We=>"maxDriftAmountModifier"===We.text);void 0!==C2&&(Ss=C2.value),(Kl=rn.driftAmount)>(Ss*=2)&&(Kl=Ss),Ni*=1+r$*(Math.abs(Kl)/Ss),S.ability.abilityInUse=!0}"Nap"===S.ability.name&&S.type===L.Hare&&(S.ability.remainingLength-=d*(1/this.frameModifier),S.ability.remainingLength<=0&&(S.ability.remainingLength=0),S.ability.remainingLength>0&&(Ni=0)),"Buried Treasure"===S.ability.name&&S.type===L.Octopus&&(S.ability.remainingLength-=d*(1/this.frameModifier),S.ability.remainingLength<=0&&(S.ability.remainingLength=0),S.ability.remainingLength>0&&(Ni=0)),S.type===L.Salamander&&"Heat Up"===S.ability.name&&S.ability.abilityInUse&&(Ni*=1+.15*S.ability.totalUseCount),S.type===L.Fox&&"Trickster"===S.ability.name&&"Acceleration"===S.ability.tricksterStatLoss&&S.ability.abilityInUse&&(Ni*=.75),S.type===L.Fox&&"Trickster"===S.ability.name&&"Acceleration"===S.ability.tricksterStatGain&&S.ability.abilityInUse&&(Ni*=1.5),S.type===L.Fox&&"Nine Tails"===S.ability.name&&(Ni*=1+.15*this.getNineTailsBuffCount("Acceleration",Oi)),S.type===L.Warthog&&"Graze"===S.ability.name&&(Ni*=1+.1*this.getGrazeBuffCount("Acceleration",wi)),S.type===L.Whale&&"Whalesong"===S.ability.name&&(3===S.ability.totalUseCount||S.ability.totalUseCount>5)&&S.ability.abilityInUse&&(Ni*=1.3),S.getEquippedItemName()===this.globalService.getEquipmentName(et.athleticTape)&&S.raceVariables.isBursting&&(Ni*=.5),Ka&&(Ni*=1+.05*S.talentTree.column2Row2Points),gt+=Ni/this.frameModifier}gt<0&&!Za&&(gt=0);var mn=S.currentStats.maxSpeedMs;if(mn*=se.terrain.maxSpeedModifier,mn*=At,S.type===L.Cheetah&&"Sprint"===S.ability.name&&S.ability.abilityInUse&&(mn*=1.35),S.type===L.Cheetah&&"On The Hunt"===S.ability.name&&(mn*=kn),"Nap"===S.ability.name&&S.type===L.Hare&&(mn*=2),nt&&S.type===L.Shark&&"Blood In The Water"===S.ability.name&&(mn*=1+this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At)/100),null!==ve&&ve.type===L.Shark&&"Feeding Frenzy"===ve.ability.name||null!==ce&&ce.type===L.Shark&&"Feeding Frenzy"===ce.ability.name){var S2=.9,T2=this.globalService.globalVar.modifiers.find(We=>"feedingFrenzyNegativeModifier"===We.text);void 0!==T2&&(S2=T2.value),mn*=S2}if("Feeding Frenzy"===S.ability.name&&S.type===L.Shark&&(mn*=Te),"Quick Toboggan"===S.ability.name&&S.type===L.Penguin&&(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCap||(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount+=1),mn*=Tr.permanentMaxSpeedIncreaseMultiplier)),S.type===L.Gecko&&"Night Vision"===S.ability.name&&(mn*=kn),S.type===L.Fox&&"Trickster"===S.ability.name&&"Max Speed"===S.ability.tricksterStatLoss&&S.ability.abilityInUse&&(mn*=.75),S.type===L.Fox&&"Trickster"===S.ability.name&&"Max Speed"===S.ability.tricksterStatGain&&S.ability.abilityInUse&&(mn*=1.5),S.type===L.Fox&&"Fleeting Speed"===S.ability.name){var Lu=pr;(Lu-=.02*Math.floor(Dr/se.distance*100)*(Lu-1))<1&&(Lu=1),mn*=Lu}if(S.type===L.Fox&&"Nine Tails"===S.ability.name&&(mn*=1+.15*this.getNineTailsBuffCount("Max Speed",Oi)),S.type===L.Warthog&&"Graze"===S.ability.name&&(mn*=1+.1*this.getGrazeBuffCount("Max Speed",wi)),S.type===L.Whale&&"Whalesong"===S.ability.name&&S.ability.totalUseCount>=5&&S.ability.abilityInUse&&(mn*=1.3),S.type===L.Whale&&"Storing Power"===S.ability.name&&(S.ability.abilityInUse&&(an=.1*mn,mn*=.9),mn+=yo),S.talentTree.talentTreeType===pt.sprint&&(mn*=1+.005*S.talentTree.column2Row4Points*S.raceVariables.velocityReachesMaxSpeedCount),sa=0,S.talentTree.talentTreeType===pt.longDistance&&gt>mn*(.005*S.talentTree.column2Row4Points)&&(sa+=mn*(.005*S.talentTree.column2Row4Points)),S.type===L.Whale&&"Unparalleled Focus"===S.ability.name&&S.ability.abilityInUse&&(sa+=.2*mn),S.getEquippedItemName()===this.globalService.getEquipmentName(et.incense)){var D2=.9,R2=this.globalService.globalVar.modifiers.find(We=>"incenseEquipmentModifier"===We.text);void 0!==R2&&(D2=R2.value),gt>=mn*D2&&(gt=mn)}Ka=S.talentTree.talentTreeType===pt.longDistance&&gt<=.25*mn,gt>mn&&(gt=mn,S.talentTree.talentTreeType===pt.sprint&&S.raceVariables.velocityReachesMaxSpeedCount<10&&(S.raceVariables.velocityReachesMaxSpeedCount+=1)),rn.checkedForBurst||(Bn.didAnimalLoseFocus?la=0:la+=1,la>=3&&S.type===L.Whale&&"Unparalleled Focus"===S.ability.name&&(S.ability.abilityInUse=!0,S.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At),this.globalService.increaseAbilityXp(S),r.addRaceUpdate(u,Ze+"'s immense focus prevents their velocity from dropping too low."),la=0));var j0=this.doesRacerMiniBurst(S,Bn),$0=this.doesRacerBurst(S,rn,this.timeToComplete,e.length,o,Bu,Pf);if($0||j0||Cs){if(S.raceVariables.isBursting=!0,($0||Cs)&&(S.raceVariables.remainingBurstMeters+=this.getBurstDistance(S,se.terrain.powerModifier,At,wi)),j0&&(S.raceVariables.remainingBurstMeters+=this.getBurstDistance(S,se.terrain.powerModifier,At,wi)*(.05*S.talentTree.column1Row4Points)),S.raceVariables.burstCount+=1,this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var x2=.02,W0=this.globalService.globalVar.modifiers.find(We=>"burstMoraleBoostModifier"===We.text);null!=W0&&(x2=W0.value),this.lookupService.changeGrandPrixMorale(S.type,x2)}if(S.type===L.Monkey&&"Frenzy"===S.ability.name&&(S.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At),this.globalService.increaseAbilityXp(S)),S.type===L.Hare&&"Prey Instinct"===S.ability.name&&!S.ability.abilityUsed&&(S.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At),S.ability.abilityUsed=!0),S.type===L.Whale&&"Storing Power"===S.ability.name&&(yo+=an),S.type===L.Octopus&&"Big Brain"===S.ability.name&&!(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCap)){var o$=Math.round(se.pathData.length/3);if(S.raceVariables.burstCount===o$){this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount+=1),r.addRaceUpdate(u,Ze+" uses "+(null==S?void 0:S.ability.name)+".");var s$=1+this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At)/100,l$=this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;this.AddRelayEffect(new Dt,S,l$,new Ee(1,1,1,s$,1,1),!0,qe.bigBrain,!0);var M2=4,k2=this.globalService.globalVar.modifiers.find(We=>"relayAbilityXpGainModifier"===We.text);void 0!==k2&&(M2=k2.value),this.globalService.increaseAbilityXp(S,M2)}}if(($0||Cs)&&r.addRaceUpdate(u,"<strong>BURST!</strong> "+Ze+" is breaking their limit!"),j0&&r.addRaceUpdate(u,"<strong>MINI BURST!</strong> "+Ze+" is breaking their limit!"),S.type!==L.Cheetah||"On The Hunt"!==S.ability.name||this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCap||(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount+=1),kn+=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At)/100,this.globalService.increaseAbilityXp(S)),S.type===L.Goat&&"Deep Breathing"===S.ability.name){var Vf=bt*(this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At)/100);S.currentStats.stamina+=Vf,r.addRaceUpdate(u,Ze+" uses "+S.ability.name+"."),S.currentStats.stamina>bt&&(Vf=S.currentStats.stamina-bt,Af=0,this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCap||(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(Vf*=.2,this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount+=1),this.AddRelayEffect(new Dt,S,Af,new Ee(0,0,0,0,0,0),!1,qe.deepBreathing,!0,Vf)),S.currentStats.stamina=bt),this.globalService.increaseAbilityXp(S)}}var gr=gt;if(Q>0){var q0=this.lookupService.getRelayEffectFromListByType(S.raceVariables.relayEffects,qe.camouflage);if(void 0!==q0&&void 0!==q0.additionalValue){var X0=Dr/q0.remainingRelayMeters;X0>1&&(X0=1),(gr+=(1-X0)*Q)>1.5*mn&&(gr=1.5*mn)}}if(S.raceVariables.isBursting){T=Br.Burst;var Uu=1.25;S.type===L.Goat&&"In The Rhythm"===S.ability.name&&(Uu+=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At)/100),Uu+=ee,S.talentTree.talentTreeType===pt.longDistance&&(Uu+=S.raceVariables.burstCount*(.005*S.talentTree.column1Row2Points)),S.raceVariables.remainingBurstMeters>=gr/this.frameModifier?(S.raceVariables.remainingBurstMeters-=(gr*=Uu)/this.frameModifier,S.raceVariables.remainingBurstMeters<0&&(gr+=S.raceVariables.remainingBurstMeters,S.raceVariables.remainingBurstMeters=0)):(gr-=S.raceVariables.remainingBurstMeters,gr+=S.raceVariables.remainingBurstMeters*Uu,S.raceVariables.remainingBurstMeters=0,S.raceVariables.isBursting=!1,r.addRaceUpdate(u,Ze+"'s burst ends.")),S.talentTree.talentTreeType===pt.sprint&&!S.raceVariables.velocityExceedsMaxSpeedDuringBurst&&gr>mn&&S.raceVariables.isBursting&&(S.raceVariables.remainingBurstMeters+=S.raceVariables.remainingBurstMeters*(.05*S.talentTree.column2Row2Points),S.raceVariables.velocityExceedsMaxSpeedDuringBurst=!0)}var nr=gr/this.frameModifier;if(S.ability.abilityInUse&&(S.type===L.Monkey&&"Leap"===S.ability.name||S.type===L.Octopus&&"Propulsion"===S.ability.name)){var u$=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At);nr+=u$/S.ability.totalFrames,S.ability.remainingFrames-=1,S.ability.remainingFrames<=0&&(S.ability.abilityInUse=!1)}if(se.courseType===z.Tundra){var Kl;if(this.handleTundraDrift(S,rn,Bn,gn,Bu,se.terrain,Ql,nr,At,Tr,r,Ze,u))nr=0,gt=0,r.addRaceUpdate(u,Ze+" slides into a wall and loses all momentum!");else if((Kl=Math.abs(rn.driftAmount))<=(Ss=20)&&!gn){var A2=1-Kl/100;nr*=A2,mn*=A2}this.tundraPreviousYAmount=S.raceVariables.icyCurrentYAmount}se.courseType===z.Volcanic?this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.selectedRace.raceUI.lavaFallPercentByFrame.push([0,0,0,0,0]):this.handleLavaFall(S,It,e.length/this.timeToComplete,Dr,se.distance,r,u,Gr)&&(this.timeToComplete=u/this.frameModifier):this.selectedRace.raceLegs.some(We=>We.courseType===z.Volcanic)&&this.selectedRace.raceUI.lavaFallPercentByFrame.push(this.selectedRace.raceUI.lavaFallPercentByFrame.length>0&&null!=this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]&&this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]>0?this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1]:[0,0,0,0,0]),o+=nr>ln?ln:nr,ln-=nr;var Ts=1e5;this.timeToComplete*this.frameModifier>2e4&&(Ts=1e4);var Y0=1e5;if(this.timeToComplete*this.frameModifier>2e4&&(Y0=1e3),e.raceUI.distanceCoveredByFrame.push(Math.round(o*Y0)/Y0),e.raceUI.velocityByFrame.push(Math.round(nr*Ts)/Ts),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix||e.raceUI.timeToCompleteByFrame.push(this.timeToComplete),e.raceUI.maxSpeedByFrame.push(Math.round(mn*Ts)/Ts),e.raceUI.staminaPercentByFrame.push(Math.round(S.currentStats.stamina/bt*Ts)/Ts),e.raceUI.racerEffectByFrame.push(T),this.handleRacePositionByFrame(e,d,u,this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+o:o),this.handleStamina(S,r,nr,u,se.terrain,bt,Dr,se,cn),f2||(S.raceVariables.metersSinceLostFocus+=nr),S.type===L.Fox&&"Nine Tails"===S.ability.name&&(this.checkForNineTailsBuff(rn,Oi,S,se,At,r,u,Ze),Oi.length>0&&(Oi.forEach(We=>{We[1]-=nr}),Oi=Oi.filter(We=>We[1]>0))),S.type===L.Warthog&&"Graze"===S.ability.name&&wi.length>0&&(wi.forEach(We=>{We[1]-=nr}),wi=wi.filter(We=>We[1]>0)),S.ability.abilityInUse&&S.ability.remainingLength>0&&(S.ability.remainingLength-=nr,S.type===L.Gecko&&"Camouflage"===S.ability.name&&(S.ability.remainingLength-=nr),S.ability.remainingLength<=0)){if(S.ability.abilityInUse=!1,S.ability.currentCooldown=S.ability.cooldown,S.getEquippedItemName()===this.globalService.getEquipmentName(et.pendant)){var Gu=.9;void 0!==(zu=this.globalService.globalVar.modifiers.find(We=>"pendantEquipmentModifier"===We.text))&&(Gu=zu.value),S.ability.currentCooldown*=Gu}if(null!=S.raceVariables&&null!=S.raceVariables.relayEffects&&S.raceVariables.relayEffects.length>0){var Q0=this.lookupService.getRelayEffectFromListByType(S.raceVariables.relayEffects,qe.supportAbilityCooldown);void 0!==Q0&&void 0!==Q0.additionalValue&&(S.ability.currentCooldown*=Q0.additionalValue)}}if(null!=S.ability.currentCooldown&&S.ability.currentCooldown<=0&&this.abilityRedundancyCheck(S,gt,rn,se,ln,At)){var zu;if(this.useAbility(S,e,se,At,bt,Dr,cn,wi,r,u,Ze),(Rr=new W).value=u,S.type===L.Fox&&"Trickster"===S.ability.name?Rr.text=S.getAbilityUseUpdateText(Ze,", gaining "+S.ability.tricksterStatGain+" but losing "+S.ability.tricksterStatLoss):S.type===L.Whale&&"Whalesong"===S.ability.name?1===S.ability.totalUseCount?Rr.text=S.getAbilityUseUpdateText(Ze," (Adaptability)"):2===S.ability.totalUseCount?Rr.text=S.getAbilityUseUpdateText(Ze," (Burst Distance)"):3===S.ability.totalUseCount?Rr.text=S.getAbilityUseUpdateText(Ze," (Acceleration)"):4===S.ability.totalUseCount?Rr.text=S.getAbilityUseUpdateText(Ze," (Focus)"):5===S.ability.totalUseCount?Rr.text=S.getAbilityUseUpdateText(Ze," (Max Speed)"):S.ability.totalUseCount>5&&(Rr.text=S.getAbilityUseUpdateText(Ze," (All)")):Rr.text=S.getAbilityUseUpdateText(Ze),S.type===L.Warthog&&"Graze"===S.ability.name||r.raceUpdates.push(Rr),S.ability.currentCooldown=S.ability.cooldown,S.getEquippedItemName()===this.globalService.getEquipmentName(et.pendant))Gu=.9,void 0!==(zu=this.globalService.globalVar.modifiers.find(v$=>"pendantEquipmentModifier"===v$.text))&&(Gu=zu.value),S.ability.currentCooldown*=Gu;if(S.type===L.Caribou&&"Great Migration"===S.ability.name){var K0=.1*bt;S.currentStats.stamina-=K0,De=K0>1?.25*K0:1}}null!=S.raceVariables.relayEffects&&S.raceVariables.relayEffects.length>0&&(S.raceVariables.relayEffects.forEach(We=>{We.remainingRelayMeters<=nr?(We.remainingRelayMeters=0,We.isMultiplicative?null==S||S.currentStats.divideCurrentRacingStats(We.relayAffectedStatRatios):null==S||S.currentStats.subtractCurrentRacingStats(We.relayAffectedStatRatios),We.effectType!==qe.deepBreathing&&We.effectType!==qe.bigBrain&&We.effectType!==qe.specialDelivery&&r.addRaceUpdate(u,Ze+"'s relay effect "+this.lookupService.getRelayEffectNameByType(We.effectType)+" ends.")):We.remainingRelayMeters-=nr}),S.raceVariables.relayEffects=S.raceVariables.relayEffects.filter(We=>We.remainingRelayMeters>0));var Rr,E2=10;this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(E2=20),0!==u&&u!==this.timeToComplete&&u%(E2*this.frameModifier)==0&&((Rr=new W).value=u,Rr.text=this.getUpdateMessageByRelativeDistance(d,u,this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+o:o,Ze),r.raceUpdates.push(Rr));var ju=!1,Of=0,Z0=0;if(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(jl=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime(),Of+=d*jl,Z0=this.globalService.globalVar.eventRaceData.distanceCovered),o+Z0>d*(u/this.frameModifier)+Of?(nt||(ju=!0),nt=!0):(nt&&(ju=!0),nt=!1),ju&&S.type===L.Shark&&"Apex Predator"===S.ability.name&&!S.ability.abilityUsed&&wo>1){r.addRaceUpdate(u,Ze+" bites the other racers as they pass, slowing them down."),S.ability.abilityUsed=!0;var Nf=this.lookupService.GetAbilityEffectiveAmount(S,se.terrain.powerModifier,At),J0=this.timeToComplete*(Nf/this.selectedRace.length),I2=1.5*J0;this.timeToComplete+=I2-J0,this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.bonusTime+=I2-J0),this.globalService.increaseAbilityXp(S)}if(pe>0&&d*(u/this.frameModifier)+Of>=pe&&d*((u-1)/this.frameModifier)+Of<pe){var $u=this.racingAnimals.find(We=>We.type===L.Warthog);if(void 0!==$u){Nf=this.lookupService.GetAbilityEffectiveAmount($u,se.terrain.powerModifier);var eb=e.length/this.timeToComplete;this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=Nf/(eb=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=Nf/eb,pe=0,r.addRaceUpdate(u,"<span class='coloredText flatlandColor'>"+(null==$u?void 0:$u.name)+"</span> tussles with the competition as they pass, slowing them down.")}}if(S.ability.currentCooldown-=1/this.frameModifier,u+=1,ln<=0){r.addRaceUpdate(u,Ze+" finishes their leg of the race."),se.legComplete=!0,C+=1,S.type===L.Warthog&&"Time To Tussle"===S.ability.name&&nt&&(pe=o+Z0,this.globalService.increaseAbilityXp(S)),this.preRacerResetRelayEffectCheck(S,ve,r,u,Ze,se,se,At,gr,bt),S.type===L.Octopus&&"Buried Treasure"===S.ability.name&&(me=1.25),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped?this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.endOfLegRelayEffectCheck(S,new Dt,r,u,dt,se,se,At,gr,Pf,Bu):this.PrepareRacingAnimal(r,u,dt,S,void 0,void 0,void 0,At,void 0,gr),se.terrain.accelerationModifier=ti,se.terrain.maxSpeedModifier=Nn,se.terrain.staminaModifier=Xn,se.terrain.powerModifier=Yn,se.terrain.focusModifier=Gn,se.terrain.adaptabilityModifier=Fn,b.push(S),y.push(se);break}u===this.timeToComplete*this.frameModifier&&(se.terrain.accelerationModifier=ti,se.terrain.maxSpeedModifier=Nn,se.terrain.staminaModifier=Xn,se.terrain.powerModifier=Yn,se.terrain.focusModifier=Gn,se.terrain.adaptabilityModifier=Fn),s=gr,l=Bu,c=Pf}if(v+=1,this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var V2=.05,tb=this.globalService.globalVar.modifiers.find(We=>"segmentCompleteMoraleBoostModifier"===We.text);null!=tb&&(V2=tb.value),this.lookupService.changeGrandPrixMorale(S.type,V2),this.globalService.globalVar.eventRaceData.previousRaceSegmentData=this.carryOverEventRaceSegmentData(S,gt,kn,tr.permanentAdaptabilityIncreaseMultiplier,Tr.permanentMaxSpeedIncreaseMultiplier,Te,De,cn.coldBloodedIncreaseMultiplier,pr,Oi,wi,Y,Ka,sa,yo,la)}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),e.raceLegs.some(se=>!se.legComplete)?(r.wasSuccessful=!1,r.totalFramesPassed=u,r.distanceCovered=e.raceUI.distanceCoveredByFrame[u-1],r.addRaceUpdate(u,"You lost the race...")):(e.isCompleted=!0,r.wasSuccessful=!0,r.totalFramesPassed=u,r.distanceCovered=e.raceUI.distanceCoveredByFrame[u-1],r.addRaceUpdate(u,"You won the race!")),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.racingAnimals.forEach(se=>{this.PrepareRacingAnimal(r,u,"",se,void 0,void 0,void 0,void 0,!0)}),this.globalService.globalVar.trackedStats.totalMetersRaced+=o,r.wasSuccessful&&this.raceWasSuccessfulUpdate(r,me),r}getStaminaModifier(e,n,r,a,o,s){var l,c=this.globalService.globalVar.modifiers.find(d=>"staminaModifier"===d.text);return l=void 0===c?.2:c.value,null!=e&&null!=e.staminaModifier&&(l*=e.staminaModifier),n.talentTree.talentTreeType===pt.sprint&&(l*=1+.05*n.talentTree.column3Row2Points),n.talentTree.talentTreeType===pt.longDistance&&n.currentStats.stamina/r<=.35&&(l*=1-.05*n.talentTree.column3Row2Points),n.type===L.Warthog&&"Mud Pit"===n.ability.name&&n.ability.abilityInUse&&(l*=.75),n.type===L.Salamander&&"Cold Blooded"===n.ability.name&&n.ability.abilityInUse&&(l*=1-s),l}handleStamina(e,n,r,a,o,s,l,c,u){var d=this.getStaminaModifier(o,e,s,l,c,u.coldBloodedIncreaseMultiplier);e.type===L.Horse&&"Second Wind"===e.ability.name&&e.ability.abilityInUse||(e.currentStats.stamina-=e.type===L.Cheetah&&"Sprint"===e.ability.name&&e.ability.abilityInUse?r*d*2:r*d),e.currentStats.stamina<0&&(e.currentStats.stamina=0,e.raceVariables.ranOutOfStamina=!0)}getBurstDistance(e,n,r,a){var o=0,s=this.globalService.globalVar.modifiers.find(T=>"breedLevelStatModifier"===T.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=1;e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(l*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(l*=1.5),e.type===L.Warthog&&"Graze"===e.ability.name&&void 0!==a&&(l*=1+.1*this.getGrazeBuffCount("Power",a));var c=e.currentStats.powerMs*l*n*r,u=1;if(e.getEquippedItemName()===this.globalService.getEquipmentName(et.runningShoes)){var d=1.2,m=this.globalService.globalVar.modifiers.find(T=>"runningShoesEquipmentModifier"===T.text);void 0!==m&&(d=m.value),u=1+e.raceVariables.burstCount*(d-1)}var v=0,b=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,qe.supportBurstDistance);void 0!==b&&void 0!==b.additionalValue&&(v=b.additionalValue);var y=1;return e.type===L.Whale&&"Whalesong"===e.ability.name&&(2===e.ability.totalUseCount||e.ability.totalUseCount>5)&&e.ability.abilityInUse&&(y*=1.3),e.currentStats.calculateBurstDistance(o,void 0,c)*u*y+v}doesRacerMiniBurst(e,n){var r=!1;return null!=n&&n.isSpecialPath&&(e.talentTree.talentTreeType===pt.sprint&&e.talentTree.column1Row4Points>0&&!n.didAnimalStumble&&!n.checkedForMiniBurst&&(r=!0),n.checkedForMiniBurst=!0),r}getBurstChance(e,n,r){var a=1e3/this.selectedRace.length,o=0,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value);var l=e.currentStats.calculateBurstChance(o=1+o*(e.breedLevel-1),n,r)*a;e.type===L.Warthog&&"Mud Pit"===e.ability.name&&e.ability.abilityInUse&&(l*=1.25);var c=0,u=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,qe.supportBurstChance);return void 0!==u&&void 0!==u.additionalValue&&(c=u.additionalValue),l+c}doesRacerBurst(e,n,r,a,o,s,l){var c=this.getBurstChance(e,l,s);if(n.checkedForBurst)return!1;if(n.checkedForBurst=!0,"Night Vision"===e.ability.name&&e.type===L.Gecko&&(e.ability.abilityInUse=!1),e.type===L.Hare&&"Prey Instinct"===e.ability.name&&!e.ability.abilityUsed)return!0;if(n.isSpecialPath){var u=this.lookupService.getResourceByName("Course Maps");if(null==u&&(u=0),u>0){var d=1,m=this.globalService.globalVar.modifiers.find(b=>"racerMapsModifier"===b.text);null!=m&&(d=1+u*m.value),c*=d}}return this.utilityService.getRandomNumber(1,100)<=c+1}raceWasSuccessfulUpdate(e,n){var s,r=this.globalService.globalVar.animals.find(R=>R.type===L.Octopus),a="<span class='coloredText waterColor'>"+(null==r?void 0:r.name)+"</span>",o=this.globalService.globalVar.circuitRank,l=0;if(this.selectedRace.isCircuitRace)s=this.globalService.globalVar.circuitRaces.find(R=>R.raceId===this.selectedRace.raceId),this.globalService.globalVar.circuitRaces.filter(R=>R.requiredRank===o).every(R=>R.isCompleted)&&(this.selectedRace.circuitIncreaseReward=this.globalService.IncreaseCircuitRank(),this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,$.Resources)));else if(s=this.globalService.globalVar.localRaces.find(R=>R.raceId===this.selectedRace.raceId&&R.localRaceType===this.selectedRace.localRaceType),this.selectedRace.localRaceType===Kt.Free){var u=this.globalService.globalVar.resources.find(R=>"International Races"===R.name),d=this.globalService.globalVar.resources.find(R=>"National Races"===R.name);if(null!=u&&u.amount>0){var m=5,v=this.globalService.globalVar.modifiers.find(R=>"internationalRacesToMedalModifier"===R.text);null!=v&&(m=v.value),this.globalService.globalVar.nationalRaceCountdown>=m&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,$.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else if(null!=d&&d.amount>0){var b=12,y=this.globalService.globalVar.modifiers.find(R=>"nationalRacesToMedalModifier"===R.text);null!=y&&(b=y.value),this.globalService.globalVar.nationalRaceCountdown>=b&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,$.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else{var T=50,k=this.globalService.globalVar.modifiers.find(R=>"freeRacesToMedalModifier"===R.text);null!=k&&(T=k.value),this.globalService.globalVar.nationalRaceCountdown>=T&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,$.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}}if(this.selectedRace.localRaceType!==Kt.Free&&this.selectedRace.localRaceType!==Kt.Track){if(void 0===s)return;this.selectedRace.localRaceType===Kt.Mono&&(this.globalService.globalVar.lastMonoRaceCourseType=this.selectedRace.raceLegs[0].courseType),this.globalService.IncreaseLocalRaceRank(this.selectedRace.localRaceType),s.isCompleted=!0}else this.selectedRace.localRaceType===Kt.Free&&(this.globalService.globalVar.nationalRaceCountdown+=1);this.racingAnimals.forEach(R=>{l=this.selectedRace.isCircuitRace?this.lookupService.getCircuitBreedGaugeIncrease(R):this.lookupService.getLocalBreedGaugeIncrease(R),this.globalService.IncreaseAnimalBreedGauge(R,l)}),this.selectedRace.localRaceType!==Kt.Track?e.beatMoneyMark=this.checkMoneyMark(e):this.handleTrackRaceRewards(e),null!=this.selectedRace.rewards&&this.selectedRace.rewards.forEach(R=>{if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(ve=>ve.name===R.name)){var Y=this.globalService.globalVar.resources.find(ve=>ve.name===R.name);if(null!=Y)if(this.selectedRace.localRaceType!==Kt.Track)if("Coins"===Y.name){if(e.beatMoneyMark){e.addRaceUpdate(e.totalFramesPassed,"You beat the money mark!");var Q=1.25,ee=this.globalService.globalVar.modifiers.find(ve=>"moneyMarkRewardModifier"===ve.text);null!=ee&&(Q=ee.value),R.amount=Math.round(R.amount*Q)}var me=this.lookupService.getRenown();R.amount=Math.round(R.amount*this.lookupService.getRenownCoinModifier(me,!1)),n>1&&e.addRaceUpdate(e.totalFramesPassed,a+" finds buried treasure at the bottom of the ocean!"),R.amount=Math.round(R.amount*n),Y.amount+=R.amount}else"Facility Level"===Y.name?(Y.amount+=R.amount,this.lookupService.recalculateAllAnimalStats()):"Renown"===Y.name?Y.amount=parseFloat((Y.amount+R.amount).toFixed(3)):Y.amount+=R.amount;else Y.amount+=R.amount}else if("Bonus Breed XP Gain From Training"===R.name&&R.itemType===$.Other){var pe=this.selectedRace.raceLegs[0].courseType;null!=(ce=this.racingAnimals.find(ve=>ve.raceCourseType===pe))&&(ce.miscStats.bonusBreedXpGainFromTraining+=R.amount)}else if("Bonus Breed XP Gain From Free Races"===R.name&&R.itemType===$.Other)pe=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ue=>Ue.raceCourseType===pe))&&(ce.miscStats.bonusBreedXpGainFromLocalRaces+=R.amount);else if("Bonus Breed XP Gain From Circuit Races"===R.name&&R.itemType===$.Other)pe=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ue=>Ue.raceCourseType===pe))&&(ce.miscStats.bonusBreedXpGainFromCircuitRaces+=R.amount);else if("Training Time Reduction"===R.name&&R.itemType===$.Other)pe=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ue=>Ue.raceCourseType===pe))&&(ce.miscStats.trainingTimeReduction+=R.amount);else if("Diminishing Returns per Facility Level"===R.name&&R.itemType===$.Other)pe=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ue=>Ue.raceCourseType===pe))&&(ce.miscStats.diminishingReturnsBonus+=R.amount);else if("Orb Pendant"===R.name&&R.itemType===$.Other)pe=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ue=>Ue.raceCourseType===pe))&&(ce.canEquipOrb=!0);else if("Bonus Talents"===R.name&&R.itemType===$.Other){var ce;pe=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ue=>Ue.raceCourseType===pe))&&(ce.miscStats.bonusTalents+=R.amount)}else this.globalService.globalVar.resources.push(new oe(R.name,R.amount,R.itemType))})}checkMoneyMark(e){var n=!1;if(0===this.lookupService.getResourceByName("Money Mark"))return n;var a=this.globalService.globalVar.modifiers.find(s=>"moneyMarkPaceModifier"===s.text);return null==a||e.totalFramesPassed<=this.timeToComplete*this.frameModifier*a.value&&(n=!0),n}handleTrackRaceRewards(e){if(1===this.selectedRace.raceLegs.length){var n=this.selectedRace.raceLegs[0].courseType,r=this.racingAnimals.find(d=>d.raceCourseType===n);if(void 0!==r){var a=null;if(this.selectedRace.trackRaceType===si.novice&&(a=r.allTrainingTracks.noviceTrack),this.selectedRace.trackRaceType===si.intermediate&&(a=r.allTrainingTracks.intermediateTrack),this.selectedRace.trackRaceType===si.master&&(a=r.allTrainingTracks.masterTrack),null!==a){var o=this.timeToComplete*this.frameModifier,s=.25,l=this.globalService.globalVar.modifiers.find(d=>"trainingTrackPaceModifier"===d.text);void 0!==l&&(s=l.value);for(var c=0;c<a.totalRewards;c++)c<a.rewardsObtained||e.totalFramesPassed<=o/(1+s*c)&&(a.rewardsObtained=c+1,a.rewardsObtained===a.totalRewards&&(this.selectedRace.trackRaceType===si.novice&&(r.allTrainingTracks.intermediateTrackAvailable=!0),this.selectedRace.trackRaceType===si.intermediate&&(r.allTrainingTracks.masterTrackAvailable=!0)),null==this.selectedRace.rewards&&(this.selectedRace.rewards=[]),this.selectedRace.rewards.push(a.rewards[c]));null!=this.selectedRace.rewards&&(this.selectedRace.rewards=this.utilityService.condenseList(this.selectedRace.rewards))}}}}getUpdateMessageByRelativeDistance(e,n,r,a){var o=a,s=e*(n/this.frameModifier);return this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(s+=e*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),r<.5*s?o="Is "+a+" <strong>even moving?!</strong>":r<.75*s?o=a+" is <strong>falling out of the race!</strong>":r<.9*s?o=a+" is <strong>just a step behind everyone else!</strong>":r>=.9*s&&r<=1.1*s?o=a+" is <strong>right on pace!</strong>":r>=1.5*s?o=a+" <strong>CANNOT be caught!!</strong>":r>=1.25*s?o=a+" is <strong>WAY ahead of the pack!</strong>":r>=1.1*s&&(o=a+" is <strong>barely leading the pack!</strong>"),o}PrepareRacingAnimal(e,n,r,a,o,s,l,c,u,d,m,v){if(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!0),a.ability.currentCooldown=a.ability.cooldown,a.ability.remainingLength=0,a.ability.totalUseCount=0,a.getEquippedItemName()===this.globalService.getEquipmentName(et.pendant)){var b=.9,y=this.globalService.globalVar.modifiers.find(R=>"pendantEquipmentModifier"===R.text);void 0!==y&&(b=y.value),a.ability.currentCooldown*=b}if(null!=a.raceVariables&&null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0){var k=this.lookupService.getRelayEffectFromListByType(a.raceVariables.relayEffects,qe.supportAbilityCooldown);void 0!==k&&void 0!==k.additionalValue&&(a.ability.currentCooldown*=k.additionalValue)}a.ability.abilityUsed=!1,a.ability.abilityInUse=!1,null!=a.raceVariables&&(a.raceVariables.ranOutOfStamina=!1,a.raceVariables.burstCount=0,a.raceVariables.metersSinceLostFocus=0,a.raceVariables.hasLostFocusDuringRace=!1,a.raceVariables.firstAbilityUseEffectApplied=!1,a.raceVariables.velocityExceedsMaxSpeedDuringBurst=!1,a.raceVariables.velocityReachesMaxSpeedCount=0),this.globalService.calculateAnimalRacingStats(a),!0!==u&&(null!=o&&o.length>0&&this.endOfLegRelayEffectCheck(o[o.length-1],a,e,n,r,s,l,c,d,m,v),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects.forEach(R=>{a.raceVariables.relayEffects.push(R.makeCopy())}),this.globalService.globalVar.eventRaceData.queuedRelayEffects.length>0&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects=this.globalService.globalVar.eventRaceData.queuedRelayEffects.filter(R=>R.affectsAllRacers))),null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0&&a.raceVariables.relayEffects.forEach(R=>{R.isMultiplicative?a.currentStats.multiplyCurrentRacingStats(R.relayAffectedStatRatios):a.currentStats.addCurrentRacingStats(R.relayAffectedStatRatios)}))}preRacerResetRelayEffectCheck(e,n,r,a,o,s,l,c,u,d){var m=4,v=this.globalService.globalVar.modifiers.find(C=>"relayAbilityXpGainModifier"===C.text);if(void 0!==v&&(m=v.value),null===n&&(n=new Dt),null!=l){if(e.type===L.Caribou&&"Herd Mentality"===e.ability.name&&!e.raceVariables.ranOutOfStamina){var b=e.currentStats.stamina*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100),y=0;this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCap||(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount+=1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.AddRelayEffect(n,e,y,new Ee(0,0,0,0,0,0),!1,qe.herdMentality,!1,b),this.globalService.increaseAbilityXp(e,m))}if(!(e.type!==L.Caribou||"Special Delivery"!==e.ability.name||e.raceVariables.ranOutOfStamina||(void 0===d&&(d=1),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCap))){this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount+=1),y=this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;var T=e.currentStats.stamina/d;T>1&&(T=1);var k=T*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100);this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(k*=.2),this.AddRelayEffect(e,e,y,new Ee(0,0,0,0,0,0),!1,qe.specialDelivery,!0,k),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,m)}}}endOfLegRelayEffectCheck(e,n,r,a,o,s,l,c,u,d,m,v=1){var b=4,y=this.globalService.globalVar.modifiers.find(Q=>"relayAbilityXpGainModifier"===Q.text);if(void 0!==y&&(b=y.value),"Inspiration"===e.ability.name&&e.type===L.Horse&&null!=l){var T=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c);this.AddRelayEffect(n,e,T*v,new Ee(.25*e.currentStats.maxSpeedMs,0,0,0,0,0),!1,qe.inspiration,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,b),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.inspirationUseCount+=1)}if("Flowing Current"===e.ability.name&&e.type===L.Dolphin&&null!=l&&(T=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,T*v,new Ee(0,.25*e.currentStats.accelerationMs,0,0,0,0),!1,qe.flowingCurrent,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,b),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.flowingCurrentUseCount+=1)),"Navigator"===e.ability.name&&e.type===L.Dolphin&&null!=l&&(T=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,T*v,new Ee(0,0,0,0,0,.25*e.currentStats.adaptabilityMs),!1,qe.navigator,!1),r.addRaceUpdate(a,o+" uses "+(null==e?void 0:e.ability.name)+"."),this.globalService.increaseAbilityXp(e,b),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.navigatorUseCount+=1)),e.type===L.Gecko&&"Camouflage"===e.ability.name&&null!=l){var C=u;T=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,T*v,new Ee(0,0,0,0,0,0),!1,qe.camouflage,!1,C),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,b),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.camouflageUseCount+=1)}if(void 0!==s){var R=new pi;void 0!==l&&(R=l.terrain),void 0===c&&(c=1),void 0===m&&(m=e.currentStats.adaptabilityMs),void 0===d&&(d=e.currentStats.focusMs),this.talentRelayCheck(e,n,s.distance*v,R,c,d,m),this.batonEquipmentCheck(e,n,s.distance*v)}}talentRelayCheck(e,n,r,a,o,s,l,c=1){if(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.talentTree.talentTreeType===pt.support){if(e.talentTree.column1Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,1,1,u=1+.01*e.talentTree.column1Row1Points),!0,qe.supportAdaptabilityRelay,!1),e.talentTree.column1Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(u=1+.01*e.talentTree.column1Row3Points,1,1,1,1,1),!0,qe.supportMaxSpeedRelay,!1),e.talentTree.column2Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,u=1+.01*e.talentTree.column2Row1Points,1,1,1,1),!0,qe.supportAccelerationRelay,!1),e.talentTree.column2Row2Points>0){var u=this.getBurstDistance(e,a.powerModifier,o)*(.05*e.talentTree.column2Row2Points);this.AddRelayEffect(n,e,r*c,new Ee(0,0,0,0,0,0),!1,qe.supportBurstDistance,!1,u)}if(e.talentTree.column2Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,u=1+.01*e.talentTree.column2Row3Points,1,1,1),!0,qe.supportStaminaRelay,!1),e.talentTree.column2Row4Points>0){u=this.getBurstChance(e,s,l)*(.03*e.talentTree.column2Row4Points);this.AddRelayEffect(n,e,r*c,new Ee(0,0,0,0,0,0),!1,qe.supportBurstChance,!1,u)}e.talentTree.column3Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,u=1+.01*e.talentTree.column3Row1Points,1,1),!0,qe.supportPowerRelay,!1),e.talentTree.column3Row2Points>0&&(u=1-.02*e.talentTree.column3Row2Points,this.AddRelayEffect(n,e,r*c,new Ee(0,0,0,0,0,0),!1,qe.supportAbilityCooldown,!1,u)),e.talentTree.column3Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,1,u=1+.01*e.talentTree.column3Row3Points,1),!0,qe.supportFocusRelay,!1),e.talentTree.column3Row4Points>0&&(u=1+.02*e.talentTree.column3Row4Points,this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,1,1,1),!0,qe.supportAbilityEfficiency,!1,u))}}batonEquipmentCheck(e,n,r,a=1){if(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.getEquippedItemName()===this.globalService.getEquipmentName(et.redBaton)){var o=1.1,s=this.globalService.globalVar.modifiers.find(C=>"redBatonEquipmentModifier"===C.text);void 0!==s&&(o=s.value),this.AddRelayEffect(n,e,r*a,new Ee(o,1,1,1,1,1),!0,qe.redBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(et.blueBaton)){var l=1.1,c=this.globalService.globalVar.modifiers.find(C=>"blueBatonEquipmentModifier"===C.text);void 0!==c&&(l=c.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,1,1,l,1),!0,qe.blueBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(et.violetBaton)){var u=1.1,d=this.globalService.globalVar.modifiers.find(C=>"violetBatonEquipmentModifier"===C.text);void 0!==d&&(u=d.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,1,u,1,1),!0,qe.violetBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(et.greenBaton)){var m=1.1,v=this.globalService.globalVar.modifiers.find(C=>"greenBatonEquipmentModifier"===C.text);void 0!==v&&(m=v.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,1,1,1,m),!0,qe.greenBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(et.orangeBaton)){var b=1.1,y=this.globalService.globalVar.modifiers.find(C=>"orangeBatonEquipmentModifier"===C.text);void 0!==y&&(b=y.value),this.AddRelayEffect(n,e,r*a,new Ee(1,b,1,1,1,1),!0,qe.orangeBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(et.yellowBaton)){var T=1.1,k=this.globalService.globalVar.modifiers.find(C=>"yellowBatonEquipmentModifier"===C.text);void 0!==k&&(T=k.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,T,1,1,1),!0,qe.yellowBaton,!1)}}prepareRacingLeg(e,n){e.pathData.forEach(r=>{r.currentStumbleOpportunity=0,r.checkedForBurst=!1,r.checkedForNineTails=!1,r.driftAmount=0,r.didAnimalStumble=!1,r.checkedForDrift=!1}),this.checkForBlinders(e,n)}checkForBlinders(e,n){if(n.getEquippedItemName()===this.globalService.getEquipmentName(et.blinders)){var r=.5;e.terrain.maxSpeedModifier<1&&(e.terrain.maxSpeedModifier=1-(1-e.terrain.maxSpeedModifier)*r),e.terrain.accelerationModifier<1&&(e.terrain.accelerationModifier=1-(1-e.terrain.accelerationModifier)*r),e.terrain.staminaModifier<1&&(e.terrain.staminaModifier=1-(1-e.terrain.staminaModifier)*r),e.terrain.powerModifier<1&&(e.terrain.powerModifier=1-(1-e.terrain.powerModifier)*r),e.terrain.focusModifier<1&&(e.terrain.focusModifier=1-(1-e.terrain.focusModifier)*r),e.terrain.adaptabilityModifier<1&&(e.terrain.adaptabilityModifier=1-(1-e.terrain.adaptabilityModifier)*r)}}getPrelayEffects(e,n,r,a,o,s,l,c,u){null!==n&&void 0!==c&&n.talentTree.talentTreeType===pt.support&&n.talentTree.column1Row4Points>0&&this.endOfLegRelayEffectCheck(n,e,o,s,l,c,u,a,void 0,void 0,void 0,.03*n.talentTree.column1Row4Points)}AddRelayEffect(e,n,r,a,o,s,l,c,u=!1){var d=new cf;if(d.remainingRelayMeters=r,d.relayAffectedStatRatios=a,d.isMultiplicative=o,d.effectType=s,d.additionalValue=c,d.affectsAllRacers=l,n.talentTree.talentTreeType===pt.support&&n.talentTree.column1Row2Points>0){var m=1+.02*n.talentTree.column1Row2Points;d.isMultiplicative?(d.relayAffectedStatRatios.topSpeed>1&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*m),d.relayAffectedStatRatios.acceleration>1&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*m),d.relayAffectedStatRatios.endurance>1&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*m),d.relayAffectedStatRatios.power>1&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*m),d.relayAffectedStatRatios.focus>1&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*m),d.relayAffectedStatRatios.adaptability>1&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*m),void 0!==d.additionalValue&&d.additionalValue>1&&(d.additionalValue*=m)):(d.relayAffectedStatRatios.topSpeed>0&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*m),d.relayAffectedStatRatios.acceleration>0&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*m),d.relayAffectedStatRatios.endurance>0&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*m),d.relayAffectedStatRatios.power>0&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*m),d.relayAffectedStatRatios.focus>0&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*m),d.relayAffectedStatRatios.adaptability>0&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*m),void 0!==d.additionalValue&&d.additionalValue>0&&(d.additionalValue*=m))}if(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix)if(this.globalService.globalVar.eventRaceData.queuedRelayEffects.some(y=>y.effectType===s))if(this.lookupService.relayEffectTypeStacksEffectiveness(s))null!=(v=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(y=>y.effectType===s))&&(v.relayAffectedStatRatios.addCurrentRacingStats(a),void 0!==v.additionalValue&&void 0!==d.additionalValue&&(v.additionalValue+=d.additionalValue));else{var v;null!=(v=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(T=>T.effectType===s))&&(v.remainingRelayMeters+=r)}else this.globalService.globalVar.eventRaceData.queuedRelayEffects.push(d);else if(l){var b=this.selectedRace.raceLegs.findIndex(y=>y.courseType===e.raceCourseType);this.selectedRace.raceLegs.length>b&&this.selectedRace.raceLegs.slice(b+1).forEach(y=>{var T=this.racingAnimals.find(k=>k.raceCourseType===y.courseType);null!=T&&null!=T.raceVariables&&null!=T.raceVariables.relayEffects&&T.raceVariables.relayEffects.push(d)})}else null!=e&&null!=e.raceVariables&&null!=e.raceVariables.relayEffects&&e.raceVariables.relayEffects.push(d)}didAnimalStumble(e,n,r,a,o,s,l,c,u,d){if(e.raceVariables.stumbled||0===n.frequencyOfStumble||e.type===L.Gecko&&"Sticky"===e.ability.name&&e.ability.abilityInUse||e.type===L.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||e.type===L.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;var m=n.length/n.stumbleOpportunities;if(n.currentStumbleOpportunity===n.stumbleOpportunities&&n.routeDesign!==Qe.Regular&&e.type===L.Goat&&"Sure-footed"===e.ability.name&&(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCap||(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount+=1),o.permanentAdaptabilityIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,a.powerModifier,l)/100,this.globalService.increaseAbilityXp(e),n.currentStumbleOpportunity+=1)),n.currentStumbleOpportunity*m<r){n.currentStumbleOpportunity+=1;var b=250;if(this.utilityService.getRandomNumber(1,100)<=n.frequencyOfStumble/(b+=s*a.adaptabilityModifier)*n.length){if(e.getEquippedItemName()===this.globalService.getEquipmentName(et.headband)){var k=3,C=this.globalService.globalVar.modifiers.find(R=>"headbandEquipmentModifier"===R.text);if(void 0!==C&&(k=C.value),e.raceVariables.headbandStumblePreventionCount<k)return e.raceVariables.headbandStumblePreventionCount+=1,d.addRaceUpdate(c,u+"'s headband prevents them from stumbling."),!1}return n.didAnimalStumble=!0,!0}}return!1}didAnimalLoseFocus(e,n,r,a,o,s,l,c,u){if(e.raceVariables.lostFocus||e.type===L.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(this.currentLostFocusOpportunity*(r/n)<a){this.currentLostFocusOpportunity+=1;var v=this.globalService.globalVar.modifiers.find(C=>"focusModifier"===C.text),b=u*o.focusModifier*(void 0===v?.75:v.value);if(e.raceVariables.metersSinceLostFocus<b)return!1;var T=(e.raceVariables.metersSinceLostFocus-b)/e.currentStats.focusMs*100;if(this.utilityService.getRandomNumber(1,100)<=T)return c.didAnimalLoseFocus=!0,!0}return!1}increasePersistentAbilityXp(e){(e.type===L.Cheetah&&"Giving Chase"===e.ability.name||e.type===L.Hare&&"Prey Instinct"===e.ability.name||e.type===L.Hare&&"Nap"===e.ability.name||e.type===L.Goat&&"In The Rhythm"===e.ability.name||e.type===L.Shark&&"Feeding Frenzy"===e.ability.name||e.type===L.Shark&&"Blood In The Water"===e.ability.name||e.type===L.Octopus&&"Buried Treasure"===e.ability.name||e.type===L.Penguin&&"Wild Toboggan"===e.ability.name||e.type===L.Fox&&"Fleeting Speed"===e.ability.name)&&this.globalService.increaseAbilityXp(e,3)}abilityRedundancyCheck(e,n,r,a,o,s){return!(e.ability.oneTimeEffect&&e.ability.abilityUsed||"Second Wind"===e.ability.name&&e.type===L.Horse&&e.raceVariables.recoveringStamina||"Pacemaker"===e.ability.name&&e.type===L.Horse&&n===e.currentStats.maxSpeedMs)&&(!("Leap"===e.ability.name&&e.type===L.Monkey&&this.lookupService.GetAbilityEffectiveAmount(e,a.terrain.powerModifier,s)<o)&&!("Sticky"===e.ability.name&&e.type===L.Gecko&&0===r.frequencyOfStumble))}useAbility(e,n,r,a,o,s,l,c,u,d,m){if(e.ability.abilityUsed=!0,e.type===L.Horse&&("Second Wind"===e.ability.name||"Pacemaker"===e.ability.name)&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Cheetah&&"Sprint"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Hare&&"Awareness"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Warthog&&"Graze"===e.ability.name&&(e.ability.abilityInUse=!0,this.checkForGrazeBuff(c,e,r,a,u,d,m),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Monkey){if("Landslide"===e.ability.name){var v=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),b=n.length/this.timeToComplete;this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=v/(b=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=v/b,this.globalService.increaseAbilityXp(e)}"Leap"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e))}if(e.type===L.Gecko&&"Sticky"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Dolphin&&"Echolocation"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Octopus&&"Propulsion"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e)),e.type===L.Whale&&("Storing Power"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),"Whalesong"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e))),e.type===L.Penguin&&"Careful Toboggan"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Caribou&&"Great Migration"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Salamander){if("Cold Blooded"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a);var y=s/r.distance;y>.5&&(y=.5-(y-.5)),l.coldBloodedIncreaseMultiplier=y}"Burrow"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),"Heat Up"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e))}if(e.type===L.Fox&&"Trickster"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e);var T=this.utilityService.getRandomInteger(1,6);1===T&&(e.ability.tricksterStatLoss="Acceleration"),2===T&&(e.ability.tricksterStatLoss="Max Speed"),3===T&&(e.ability.tricksterStatLoss="Adaptability"),4===T&&(e.ability.tricksterStatLoss="Focus"),5===T&&(e.ability.tricksterStatLoss="Stamina",e.currentStats.stamina-=.25*o,e.currentStats.stamina<0&&(e.currentStats.stamina=0)),6===T&&(e.ability.tricksterStatLoss="Power");var k=this.utilityService.getRandomInteger(1,6);k===T&&(k+=1)>6&&(k=1),1===k&&(e.ability.tricksterStatGain="Acceleration"),2===k&&(e.ability.tricksterStatGain="Max Speed"),3===k&&(e.ability.tricksterStatGain="Adaptability"),4===k&&(e.ability.tricksterStatGain="Focus"),5===k&&(e.ability.tricksterStatGain="Stamina",e.currentStats.stamina+=.5*o,e.currentStats.stamina>o&&(e.currentStats.stamina=o)),6===k&&(e.ability.tricksterStatGain="Power"),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a)}}checkForNineTailsBuff(e,n,r,a,o,s,l,c){if(!e.checkedForNineTails){e.checkedForNineTails=!0;var u=this.utilityService.getRandomInteger(1,4),d=new W;d.value=l,1===u?(n.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Acceleration)"),s.raceUpdates.push(d)):2===u?(n.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Max Speed)"),s.raceUpdates.push(d)):3===u?(n.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Adaptability)"),s.raceUpdates.push(d)):4===u&&(n.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Focus)"),s.raceUpdates.push(d)),this.globalService.increaseAbilityXp(r)}}checkForGrazeBuff(e,n,r,a,o,s,l){var c=this.utilityService.getRandomInteger(1,5),u=new W;u.value=s,1===c?(e.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(n,r.terrain.powerModifier,a)]),u.text=n.getAbilityUseUpdateText(l," (Acceleration)"),o.raceUpdates.push(u)):2===c?(e.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(n,r.terrain.powerModifier,a)]),u.text=n.getAbilityUseUpdateText(l," (Max Speed)"),o.raceUpdates.push(u)):3===c?(e.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(n,r.terrain.powerModifier,a)]),u.text=n.getAbilityUseUpdateText(l," (Adaptability)"),o.raceUpdates.push(u)):4===c?(e.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(n,r.terrain.powerModifier,a)]),u.text=n.getAbilityUseUpdateText(l," (Focus)"),o.raceUpdates.push(u)):4===c&&(e.push(["Power",this.lookupService.GetAbilityEffectiveAmount(n,r.terrain.powerModifier,a)]),u.text=n.getAbilityUseUpdateText(l," (Power)"),o.raceUpdates.push(u)),this.globalService.increaseAbilityXp(n)}getNineTailsBuffCount(e,n){return n.filter(r=>r[0]===e).length}getGrazeBuffCount(e,n){return n.filter(r=>r[0]===e).length}getModifiedAdaptability(e,n,r,a,o,s,l,c,u,d,m,v,b){var y=e.currentStats.adaptabilityMs*r;return e.type===L.Dolphin&&"Echolocation"===e.ability.name&&e.ability.abilityInUse&&(y*=1.75),e.type===L.Goat&&"Sure-footed"===e.ability.name&&(y*=n.permanentAdaptabilityIncreaseMultiplier),e.type===L.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(y*=1.4),e.type===L.Penguin&&"Careful Toboggan"===e.ability.name&&e.ability.abilityInUse&&(y*=1.6),e.type===L.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(y*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(y*=1.5),e.type===L.Fox&&"Nine Tails"===e.ability.name&&(y*=1+.15*this.getNineTailsBuffCount("Adaptability",a)),e.type===L.Warthog&&"Graze"===e.ability.name&&(y*=1+.1*this.getGrazeBuffCount("Adaptability",o)),null!==c&&void 0!==u&&"Navigator"===c.ability.name&&c.type===L.Dolphin&&s.distance-l<=this.lookupService.GetAbilityEffectiveAmount(c,u.terrain.powerModifier,r)&&(y+=.25*c.currentStats.adaptabilityMs,c.ability.abilityInUse||d.addRaceUpdate(m,v+" is shown the way by "+b+"'s "+(null==c?void 0:c.ability.name)+" ability."),c.ability.abilityInUse=!0),e.getEquippedItemName()===this.globalService.getEquipmentName(et.athleticTape)&&e.raceVariables.isBursting&&(y*=1.5),e.talentTree.talentTreeType===pt.sprint&&!e.raceVariables.hasLostFocusDuringRace&&(y*=1+5*e.talentTree.column1Row2Points/100),y}getModifiedFocus(e,n,r,a,o){var s=e.currentStats.focusMs*n;return e.type===L.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(s*=1.4),e.type===L.Hare&&"Nap"===e.ability.name&&(s*=2),e.type===L.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.5),e.type===L.Fox&&"Nine Tails"===e.ability.name&&(s*=1+.15*this.getNineTailsBuffCount("Focus",r)),e.type===L.Warthog&&"Graze"===e.ability.name&&(s*=1+.1*this.getGrazeBuffCount("Focus",a)),e.type===L.Salamander&&"Cold Blooded"===e.ability.name&&e.ability.abilityInUse&&(s*=1+o.coldBloodedIncreaseMultiplier),e.type===L.Whale&&"Whalesong"===e.ability.name&&(4===e.ability.totalUseCount||e.ability.totalUseCount>5)&&e.ability.abilityInUse&&(s*=1.3),e.getEquippedItemName()===this.globalService.getEquipmentName(et.athleticTape)&&e.raceVariables.isBursting&&(s*=1.5),e.talentTree.talentTreeType===pt.sprint&&(s*=1-.005*e.talentTree.column2Row4Points*e.raceVariables.velocityReachesMaxSpeedCount),s}handleTundraDrift(e,n,r,a,o,s,l,c,u,d,m,v,b){var y=!1;if(!n.checkedForDrift){n.checkedForDrift=!0;var T=80,k=-80;if((n.routeDesign===Qe.Cavern||r.routeDesign===Qe.Cavern)&&(T=60,k=-60),e.raceVariables.icyCurrentYAmount>=T||e.raceVariables.icyCurrentYAmount<=k||a)return(e.raceVariables.icyCurrentYAmount>=T||e.raceVariables.icyCurrentYAmount<=k)&&(y=!0),n.driftAmount=-e.raceVariables.icyCurrentYAmount,e.raceVariables.icyCurrentYAmount=0,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,y;var C=this.utilityService.getRandomNumber(1,100),R=1e3,Q=n.frequencyOfDrift/(R+=o*s.adaptabilityModifier)*n.length;if(C<Q){n.didAnimalStumble=!0,(Q-=C)<=0&&(Q=0);var ee=this.utilityService.getRandomInteger(1,2);e.raceVariables.icyCurrentDirectionUp=1===ee;var me=100,pe=20,ce=this.globalService.globalVar.modifiers.find(ye=>"maxDriftAmountModifier"===ye.text);void 0!==ce&&(pe=ce.value),"Wild Toboggan"===e.ability.name&&e.type===L.Penguin&&(pe*=2,me*=2,e.ability.abilityInUse=!0),"Quick Toboggan"===e.ability.name&&e.type===L.Penguin&&(e.ability.abilityInUse=!1);var ve=0;(ve=Q>me?pe:Q/me*pe)>pe&&(ve=pe),e.raceVariables.icyCurrentDirectionUp?e.raceVariables.icyCurrentYAmount-=ve:e.raceVariables.icyCurrentYAmount+=ve,e.raceVariables.icyCurrentYAmount>=T&&(e.raceVariables.icyCurrentYAmount=T),e.raceVariables.icyCurrentYAmount<=k&&(e.raceVariables.icyCurrentYAmount=k),m.addRaceUpdate(b,v+" drifts to the side, losing "+ve.toFixed(2)+"% max speed."),n.driftAmount=e.raceVariables.icyCurrentDirectionUp?-ve:ve,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount}else n.driftAmount=0,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,"Quick Toboggan"===e.ability.name&&e.type===L.Penguin&&(m.addRaceUpdate(b,v+" slides through without drifting, gaining speed."),this.globalService.increaseAbilityXp(e),d.permanentMaxSpeedIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,s.powerModifier,u)/100,e.ability.abilityInUse=!0);return y}}handleLavaFall(e,n,r,a,o,s,l,c){for(var u=!1,d=n/this.frameModifier,m=o/r,v=[.4,.45,.5,.55,.6],b=[],y=0;y<v.length;y++){var T=m*v[y],k=d/T;k>1&&(k=1),b.push(Math.round(1e5*k)/1e5);var C=a>v[y]*o,R=C!=c[y];c[y]=C,d>=T&&R&&(e.type===L.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||(s.addRaceUpdate(l,"Lava spills out onto the course, forcing you to evacuate."),u=!0))}return this.selectedRace.raceUI.lavaFallPercentByFrame.push(b),u}handleRacePositionByFrame(e,n,r,a){var o=this.lookupService.getTotalRacersByRace(e),s=o,l=.25,c=this.globalService.globalVar.modifiers.find(R=>"trainingTrackPaceModifier"===R.text);if(void 0!==c&&(l=c.value),e.localRaceType===Kt.Track)for(var u=0;u<o-1;u++)a>e.length/(this.timeToComplete/(1+l*u))*(r/this.frameModifier)&&(s=o-(u+1));else{var v=n*(r/this.frameModifier),b=0;if(this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(v+=b=n*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),2===o)a>v&&(s=1);else if(3===o){a>v&&(s=2);var T=.75,k=this.globalService.globalVar.modifiers.find(R=>"moneyMarkPaceModifier"===R.text);null!=k&&(T=k.value),a>e.length/(this.timeToComplete*T)*(r/this.frameModifier)+b&&(s=1)}}e.raceUI.racePositionByFrame.push(s)}carryOverEventRaceSegmentData(e,n,r,a,o,s,l,c,u,d,m,v,b,y,T,k){var C=new rf;return C.velocity=n,C.stamina=e.currentStats.stamina,C.permanentMaxSpeedIncreaseMultiplier=r,C.permanentAdaptabilityIncreaseMultiplier=a,C.permanentMaxSpeedIncreaseObjMultiplier=o,C.feedingFrenzyIncreaseMultiplier=s,C.greatMigrationAccelerationIncreaseAdditive=l,C.coldBloodedIncreaseMultiplier=c,C.fleetingSpeedIncreaseMultiplier=u,C.racingAnimalType=e.type,C.deepBreathingStaminaGain=v,C.longDistanceTalentIncreaseAccelerationWithLowVelocity=b,C.maxSpeedFloor=y,C.whalePowerStored=T,C.pathsClearedWithoutLosingFocus=k,d.length>0&&d.forEach(R=>{C.nineTailsBuffs.push(R)}),m.length>0&&m.forEach(R=>{C.grazeBuffs.push(R)}),e.raceVariables.relayEffects.length>0&&e.raceVariables.relayEffects.forEach(R=>{C.relayEffects.push(R)}),this.globalService.globalVar.eventRaceData.animalData.forEach(R=>{R.associatedAnimalType===e.type&&(C.statLossFromExhaustion=R.exhaustionStatReduction)}),C.raceVariables=e.raceVariables.makeCopy(),C}setStaminaLossForEventAnimal(e,n){this.globalService.globalVar.eventRaceData.animalData.forEach(r=>{r.associatedAnimalType===n&&(r.exhaustionStatReduction=e)})}}return t.\u0275fac=function(e){return new(e||t)(Le(Mt),Le(vn),Le(Ri),Le(Zv))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let o0=(()=>{class t{constructor(e,n,r){this.globalService=e,this.lookupService=n,this.utilityService=r,this.gameVersions=[1.1,1.09,1.08,1.07,1.06,1.05,1.04,1.03,1.02,1.01,1]}getListAscended(){var e=[];return this.gameVersions.forEach(n=>{e.unshift(n)}),e}getLatestChanges(){return this.getVersionChanges(this.gameVersions[0])}getAllChanges(){var e=[];return this.gameVersions.forEach(n=>{e.push(this.getVersionChanges(n))}),e}getVersionChanges(e){var n="";return 1===e&&(n="Initial Launch!"),1.01===e&&(n="Improved UI by adding better notifications and refactoring some clickable text.\n\nBreeding Grounds specialization now grants a 10% bonus to Breeding XP from Training, up from 5%.\n\nRefactored Breed Progression:\n<ul><li>Breed Levels now grant a 5% bonus to racing stats as opposed to 2%. Breed Levels now require twice as much XP.</li><li>Animals have had their breed levels reduced by half to balance this change. Despite this, you should notice a small increase in stats.</li></ul>"),1.02===e&&(n="Event Races now active!\n<ul><li>Select an event deck (now relay team) and run the marathon-style Grand Prix.</li><li>Run a single race over the course of multiple days to unlock new rewards.</li><li>Mix and match powerful Relay abilities with strong long distance racers and see how far you can go!</li></ul>\nMore UI improvements. (better contrast in colors, differentiation of text through various means, etc)\n\nBug fixes."),1.03===e&&(n="Talents are now active!\n<ul><li>Complete Rainbow Races to start earning Talent Points for your animals.</li><li>Each animal can select a unique talent tree and start racing in its own unique way.</li></ul>\nMore UI improvements. (specifically around items/equipment)\n\nBug fixes."),1.04===e&&(n="Ability rebalancing (view Discord Change Log for full info).\n\nChanges to Event Races<ul><li>Leg length adjusts based on your game progress so that the race always feels smooth.</li><li>Certain abilities have different effects during events, viewable when changing abilities.</li><li>Abilities that can trigger multiple times or have a cap are now displayed on the Event Race Info page.</li></ul>\nBug fixes (view Discord Change Log for full info)."),1.05===e&&(n="Changed all references of 'Decks' to 'Relay Teams' for ease of understanding and better theming.\n\nBug fixes and UI improvements (view Discord Change Log for full info)."),1.06===e&&(n="Barns can now reset their specialization. By clicking or tapping your Barn Upgrade level, you'll see an overview of your barn's benefits and the option to reset your specialization at the cost of losing 20% of your Barn Upgrade level.\n\nCost for Mangoes now scale. 1 Mango from the shop costs an extra 50 per purchase and 2 Mangoes from the event shop costs an extra 1 token per purchase.\n\nThe impact that Renown has on coin gain from race is now logarithmic. After reaching 50 renown, the coin gain will start to slightly fall off. \n\nAttractions now give slightly more Coins per specialization level.\n\nAdded setting to automatically start the event race when the time period begins. This will also catch up on any time you were away between the start of the race and when you first return to the game.\n\nGrand Prix now requires breed level 25 instead of 50.\n\nIncubator now takes 2 minutes instead of 5 minutes.\n\nUI Improvements and Bug Fixes (view Discord Change Log for full info)."),1.07===e&&(n="Sectioned out FAQs, added calculators to make planning easier.\n\nVarious minor bug fixes and UI improvements."),1.08===e&&(n="Increased coin gain from Mono and Duo races. \n\nAdjusted free races so that new course types do not show up until you've completed a circuit rank with that type. \n\nAdded circuit rank up reward for 1000 coins at rank 9 and 1500 coins at rank 23.<ul><li>Those who have already passed these ranks will immediately receive these coins.</li></ul>\nMade Acceleration coaching slightly easier. \n\nAdded warning before first Breed to better explain what will happen.\n\nMinor UI improvements for mobile."),1.09===e&&(n="<em>Just to preface, this is the first set of changes of several intended to make the early game flow better, coin gain and progression feel less punishing, and doing a better job of putting players in the intended gameplay loops. Look forward to more changes soon.</em>\n\nMade changes to verbiage in Tutorial and FAQ section for clarity and better guiding on how to play. \n\nReadjusted certain trainings so that there was clear progression going up from small to medium barns.<ul><li><b>Footwork</b> now gives .25 Acceleration as opposed to .5 Acceleration.</li><li><b>Dodge Ball</b> now gives 1 Adaptability as opposed to .5 Adaptability and takes 60 seconds to complete as opposed to 75 seconds.</li></ul>Some adjustments were made to passive game time while the game is not active.<ul><li>Small barns now allow for 4 hours worth of training, up from 2 hours.</li><li>Medium barns now allow for 8 hours worth of training, up from 4 hours.</li><li>Large barns now allow for 12 hours worth of training, up from 8 hours.</li><li>Team Managers will now cover 8 hours of inactive time worth of free races, up from 2 hours.</li></ul>The base price for food has been reduced.<ul><li>All stat increasing food has been reduced to 10 Coins. The goal for these items is to give you a quick boost after breeding to cut down on wait time. This new price should make that a more viable option.</li><li>The base price for Mangoes has been reduced to 100 Coins. For those who have already purchased Mangoes and the price has begun to increase, your total cost will be reduced by 400 Coins to match up with this change.</li></ul>Attractions now provide significantly more income. The new formula is 20 Coins * Specialization Level added on top of the previous amount. Check the calculator in the FAQ section to see exactly how much it provides at any given level.\n\nFor the first 10 barn upgrade levels, the cost is now 50 coins instead of 100.\n\nCertain RNG elements were not evenly distributed (Coaching for example) and that issue has been resolved. \n\nThere have been bugs, balance issues, and some concerns about reward scaling with the Grand Prix. I have taken the Grand Prix down for now while I work on these issues. Look forward to it coming back up in a better state in the next couple of weeks.\n\nAdditional minor bug fixes."),1.1===e&&(n="Two new animals have been added to the game!<ul><li>The <span class='flatlandColor'>Warthog</span> is a new Flatland racer that you can purchase from the Shop.</li><li>The <span class='waterColor'>Whale</span> is a new Ocean racer that is rewarded for reaching Circuit Rank B (25).</li></ul>The <span class='flatlandColor'>Hare</span> is now rewarded for reaching Circuit Rank Q (10). It is no longer listed in the Shop and anyone who has already purchased it will receive 1000 Coins immediately.\n\nBuried Treasure (<span class='waterColor'>Octopus</span>) and Cold Blooded (<span class='volcanicColor'>Salamander</span>) have both been reworked.\n\nMany Circuit Rank rewards were moved around to make the early game flow better. Of note, the Dolphin is now a reward at Circuit Rank L (15) so that you have more time with only two race course types.\n\nCertain items in the shop have been locked behind reaching Circuit Rank AZ (27) before they appear to better guide new players to aim for items better suited for early game.\n\nBy default, free races now give 1 medal per 50 free race victories.\n\nEarly game circuit races and free races in general are now easier.\n\nAfter the Attraction change last patch, upgrading barns became a bit too easy at higher levels. Coin cost per upgrade level for barns has been adjusted higher starting at level 100 to keep the time between upgrades balanced.\n\nAdded option to 'Export to File'/'Import from File' to make saving and loading easier.\n\nRemoved 'Stats' navigation page. It was really bare bones and just added more to the length of the navigation bar. I will eventually re-implement this in a better fashion.\n\nVarious bug fixes and UI improvements."),n}getDateForVersion(e){var n=new Date;return 1===e&&(n=new Date("2022-07-08 12:00:00")),1.01===e&&(n=new Date("2022-07-10 12:00:00")),1.02===e&&(n=new Date("2022-07-18 12:00:00")),1.03===e&&(n=new Date("2022-07-24 12:00:00")),1.04===e&&(n=new Date("2022-07-27 12:00:00")),1.05===e&&(n=new Date("2022-07-29 12:00:00")),1.06===e&&(n=new Date("2022-08-04 12:00:00")),1.07===e&&(n=new Date("2022-08-06 12:00:00")),1.08===e&&(n=new Date("2022-08-07 12:00:00")),1.09===e&&(n=new Date("2022-08-11 12:00:00")),1.1===e&&(n=new Date("2022-08-15 12:00:00")),n.toDateString().replace(/^\S+\s/,"")}updatePlayerVersion(){var c=1.05;this.getListAscended().forEach(b=>{var y;if(this.globalService.globalVar.currentVersion<b){if(1.01===b){this.globalService.globalVar.notifications=new hf;var T=this.globalService.globalVar.modifiers.find(Te=>"breedLevelStatModifier"===Te.text);void 0!==T&&(T.value=.05);var k=this.globalService.globalVar.modifiers.find(Te=>"breedGaugeMaxIncreaseModifier"===Te.text);void 0!==k&&(k.value=10);var C=this.globalService.globalVar.modifiers.find(Te=>"breedingGroundsSpecializationModifier"===Te.text);void 0!==C&&(C.value=.1),this.globalService.globalVar.animals.forEach(Te=>{Te.breedLevel=Math.round(Te.breedLevel/2),Te.breedGaugeXp=2*Te.breedGaugeXp});var R=this.globalService.globalVar.animalDecks.find(Te=>Te.isPrimaryDeck);null!=R&&(R.isEventDeck=!0)}else if(1.02===b){if(this.globalService.globalVar.eventRaceData=new Wi,this.globalService.globalVar.modifiers.push(new W(.1,"exhaustionStatLossMinimumModifier")),this.globalService.globalVar.modifiers.push(new W(5e6,"metersPerCoinsGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new W(2e7,"metersPerRenownGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new W(100,"grandPrixCoinRewardModifier")),this.globalService.globalVar.modifiers.push(new W(5,"grandPrixRenownRewardModifier")),this.globalService.globalVar.modifiers.push(new W(5e7,"grandPrixToken1MeterModifier")),this.globalService.globalVar.modifiers.push(new W(1e8,"grandPrixToken2MeterModifier")),this.globalService.globalVar.modifiers.push(new W(25e7,"grandPrixToken3MeterModifier")),this.globalService.globalVar.modifiers.push(new W(5e8,"grandPrixToken4MeterModifier")),this.globalService.globalVar.modifiers.push(new W(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new W(.02,"exhaustionGainGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new W(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new W(75,"grandPrixBreedLevelRequiredModifier")),this.globalService.globalVar.modifiers.push(new W(2,"scaryMaskEquipmentModifier")),this.globalService.globalVar.modifiers.push(new W(1.2,"runningShoesEquipmentModifier")),this.globalService.globalVar.modifiers.push(new W(.9,"incenseEquipmentModifier")),this.globalService.globalVar.modifiers.push(new W(.5,"athleticTapeEquipmentModifier")),this.globalService.globalVar.modifiers.push(new W(.2,"weatherMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new W(.03,"focusMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new W(.01,"stumbleMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new W(.05,"segmentCompleteMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new W(5,"whistleModifier")),this.globalService.globalVar.modifiers.push(new W(10,"goldenWhistleModifier")),this.globalService.InitializeTokenShop(),null!=(Y=this.globalService.globalVar.shop.find(Te=>"Specialty"===Te.name))){var Q=new Je;Q.name="Whistle",Q.purchasePrice.push(this.globalService.getCoinsResourceValue(2500)),Q.basePurchasePrice.push(this.globalService.getCoinsResourceValue(2500)),Q.totalShopQuantity=1,Q.canHaveMultiples=!1,Q.isAvailable=this.lookupService.isItemUnlocked("coaching"),Q.type=$.Specialty,Y.itemList.push(Q);var ee=new Je;ee.name="Golden Whistle",ee.purchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),ee.basePurchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),ee.totalShopQuantity=1,ee.canHaveMultiples=!1,ee.isAvailable=!1,ee.type=$.Specialty,Y.itemList.push(ee)}this.globalService.globalVar.animals.forEach(Te=>{Te.allTrainingTracks.noviceTrack.rewards.filter(De=>"Bonus Breed XP Gain From Local Races"===De.name).forEach(De=>{De.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(Te=>{Te.allTrainingTracks.intermediateTrack.rewards.filter(De=>"Bonus Breed XP Gain From Local Races"===De.name).forEach(De=>{De.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(Te=>{Te.allTrainingTracks.masterTrack.rewards.filter(De=>"Bonus Breed XP Gain From Local Races"===De.name).forEach(De=>{De.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(Te=>{Te.breedGaugeMax=200+10*(Te.breedLevel-1)})}else if(1.03===b)this.globalService.globalVar.animals.forEach(Te=>{(isNaN(Number(Te.breedLevel))||null==Te.breedLevel)&&(Te.breedLevel=1)});else if(1.04===b)this.fixTrackRewardsBug(),this.globalService.globalVar.notifications.isEventRaceNowActive=!1,this.globalService.globalVar.animals.forEach(Te=>{if(Te.type===L.Cheetah){var De=Te.availableAbilities.find(an=>"Giving Chase"===an.name);void 0!==De&&(De.efficiency=.5),"Giving Chase"===Te.ability.name&&(Te.ability.efficiency=.5);var cn=Te.availableAbilities.find(an=>"On The Hunt"===an.name);void 0!==cn&&(cn.efficiency=.1),"On The Hunt"===Te.ability.name&&(Te.ability.efficiency=.1)}if(Te.type===L.Goat){var pr=Te.availableAbilities.find(an=>"Deep Breathing"===an.name);void 0!==pr&&(pr.efficiency=.25),"Deep Breathing"===Te.ability.name&&(Te.ability.efficiency=.25);var Oi=Te.availableAbilities.find(an=>"In The Rhythm"===an.name);void 0!==Oi&&(Oi.efficiency=.1),"In The Rhythm"===Te.ability.name&&(Te.ability.efficiency=.1);var wi=Te.availableAbilities.find(an=>"Sure-footed"===an.name);void 0!==wi&&(wi.efficiency=.5),"Sure-footed"===Te.ability.name&&(Te.ability.efficiency=.5)}if(Te.type===L.Gecko){var At=Te.availableAbilities.find(an=>"Night Vision"===an.name);void 0!==At&&(At.efficiency=.2),"Night Vision"===Te.ability.name&&(Te.ability.efficiency=.2)}if(Te.type===L.Shark){var nt=Te.availableAbilities.find(an=>"Blood In The Water"===an.name);void 0!==nt&&(nt.efficiency=.1),"Blood In The Water"===Te.ability.name&&(Te.ability.efficiency=.1)}if(Te.type===L.Octopus){var It=Te.availableAbilities.find(an=>"Buried Treasure"===an.name);void 0!==It&&(It.efficiency=1),"Buried Treasure"===Te.ability.name&&(Te.ability.efficiency=1);var Gr=Te.availableAbilities.find(an=>"Big Brain"===an.name);void 0!==Gr&&(Gr.efficiency=2),"Big Brain"===Te.ability.name&&(Te.ability.efficiency=2)}if(Te.type===L.Penguin){var Ka=Te.availableAbilities.find(an=>"Wild Toboggan"===an.name);void 0!==Ka&&(Ka.efficiency=4),"Wild Toboggan"===Te.ability.name&&(Te.ability.efficiency=4);var sa=Te.availableAbilities.find(an=>"Quick Toboggan"===an.name);void 0!==sa&&(sa.efficiency=.1),"Quick Toboggan"===Te.ability.name&&(Te.ability.efficiency=.1)}if(Te.type===L.Caribou){var Za=Te.availableAbilities.find(an=>"Herd Mentality"===an.name);void 0!==Za&&(Za.efficiency=.5),"Herd Mentality"===Te.ability.name&&(Te.ability.efficiency=.5);var Ja=Te.availableAbilities.find(an=>"Special Delivery"===an.name);void 0!==Ja&&(Ja.efficiency=.05),"Special Delivery"===Te.ability.name&&(Te.ability.efficiency=.05)}if(Te.type===L.Fox){var yo=Te.availableAbilities.find(an=>"Fleeting Speed"===an.name);void 0!==yo&&(yo.efficiency=1.5),"Fleeting Speed"===Te.ability.name&&(Te.ability.efficiency=1.5)}}),void 0!==(me=this.globalService.globalVar.modifiers.find(Te=>"autoFreeRacesMaxIdleTimePeriodModifier"===Te.text))&&(me.value=7200);else if(1.05===b)null!=this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.isCatchingUp&&(this.globalService.globalVar.eventRaceData.isCatchingUp=!1),void 0!==(pe=this.globalService.globalVar.modifiers.find(Te=>"grandPrixBreedLevelRequiredModifier"===Te.text))&&(pe.value=50);else if(1.06===b){this.globalService.globalVar.previousEventRewards=[],this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(De=>"Bonus Breed XP Gain From Training"!==De.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(De=>"Bonus Breed XP Gain From Free Races"!==De.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(De=>"Diminishing Returns per Facility Level"!==De.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(De=>"Training Time Reduction"!==De.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(De=>"Bonus Breed XP Gain From Circuit Races"!==De.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(De=>"Bonus Talents"!==De.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(De=>"Orb Pendant"!==De.name),this.fixTrackRewardsBug(),this.globalService.globalVar.modifiers.push(new W(.02,"burstMoraleBoostModifier"));var pe,ce=this.globalService.globalVar.modifiers.find(De=>"grandPrixRenownRewardModifier"===De.text);void 0!==ce&&(ce.value=3),void 0!==(pe=this.globalService.globalVar.modifiers.find(De=>"grandPrixBreedLevelRequiredModifier"===De.text))&&(pe.value=25),void 0!==this.globalService.globalVar.incubator&&(this.globalService.globalVar.incubator.timeToComplete=120),this.globalService.globalVar.settings.set("autoStartEventRace",!1)}else if(1.07===b){var ve=0,ye=0;if(this.globalService.globalVar.resources.forEach(Te=>{"Headband"===Te.name&&(ve+=1,ye+=Te.amount)}),ve>1){var Ue=this.globalService.globalVar.resources.findIndex(Te=>"Headband"===Te.name);this.globalService.globalVar.resources.splice(Ue,1),void 0!==(yt=this.globalService.globalVar.resources.find(Te=>"Headband"===Te.name))&&(yt.amount=ye)}var yt,wt=0,Et=0;if(this.globalService.globalVar.resources.forEach(Te=>{"Blue Baton"===Te.name&&(wt+=1,Et+=Te.amount)}),wt>1)Ue=this.globalService.globalVar.resources.findIndex(cn=>"Blue Baton"===cn.name),this.globalService.globalVar.resources.splice(Ue,1),void 0!==(yt=this.globalService.globalVar.resources.find(cn=>"Blue Baton"===cn.name))&&(yt.amount=Et)}else if(1.08===b){if(this.globalService.globalVar.showBreedWarning=!1,void 0===this.globalService.globalVar.tutorials&&(this.globalService.globalVar.tutorials=new df),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>9){var Rt=1e3;null==(lt=this.globalService.globalVar.resources.find(Te=>"Coins"===Te.name))?this.globalService.globalVar.resources.push(new oe("Coins",Rt)):lt.amount+=Rt}this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>23&&(Rt=1500,null==(lt=this.globalService.globalVar.resources.find(cn=>"Coins"===cn.name))?this.globalService.globalVar.resources.push(new oe("Coins",Rt)):lt.amount+=Rt)}else if(1.09===b){var me;void 0!==(me=this.globalService.globalVar.modifiers.find(De=>"autoFreeRacesMaxIdleTimePeriodModifier"===De.text))&&(me.value=28800);var On=this.globalService.globalVar.modifiers.find(De=>"smallBarnTrainingTimeModifier"===De.text);void 0!==On&&(On.value=14400);var se=this.globalService.globalVar.modifiers.find(De=>"mediumBarnTrainingTimeModifier"===De.text);void 0!==se&&(se.value=28800);var S=this.globalService.globalVar.modifiers.find(De=>"largeBarnTrainingTimeModifier"===De.text);void 0!==S&&(S.value=43200);var tt=this.globalService.globalVar.trainingOptions.find(De=>De.trainingType===Ne.Footwork);void 0!==tt&&(tt.affectedStatRatios=new Ee(0,.25,0,0,0,1));var bn=this.globalService.globalVar.trainingOptions.find(De=>De.trainingType===Ne.DodgeBall);void 0!==bn&&(bn.affectedStatRatios=new Ee(0,2.5,0,0,0,1),bn.timeToComplete=60);var kt=this.globalService.globalVar.shop.find(De=>"Food"===De.name);if(void 0!==kt){var Ze=kt.itemList.find(De=>"Apples"===De.name);void 0!==Ze&&(Ze.purchasePrice=[],Ze.purchasePrice.push(new oe("Coins",10)));var pn=kt.itemList.find(De=>"Bananas"===De.name);void 0!==pn&&(pn.purchasePrice=[],pn.purchasePrice.push(new oe("Coins",10)));var dt=kt.itemList.find(De=>"Strawberries"===De.name);void 0!==dt&&(dt.purchasePrice=[],dt.purchasePrice.push(new oe("Coins",10)));var _n=kt.itemList.find(De=>"Carrots"===De.name);void 0!==_n&&(_n.purchasePrice=[],_n.purchasePrice.push(new oe("Coins",10)));var Wn=kt.itemList.find(De=>"Turnips"===De.name);void 0!==Wn&&(Wn.purchasePrice=[],Wn.purchasePrice.push(new oe("Coins",10)));var qn=kt.itemList.find(De=>"Oranges"===De.name);void 0!==qn&&(qn.purchasePrice=[],qn.purchasePrice.push(new oe("Coins",10)));var ei=kt.itemList.find(De=>"Mangoes"===De.name);if(void 0!==ei){var Nn=ei.purchasePrice.find(De=>"Coins"===De.name);void 0!==Nn&&(Nn.amount-=400)}var ti=this.globalService.globalVar.modifiers.find(De=>"attractionAmountModifier"===De.text);void 0!==ti&&(ti.value=20),this.globalService.stopGrandPrixRace()}}else if(1.1===b){this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)<26?this.globalService.lockTier2ShopItems():this.globalService.unlockTier2ShopItems(),this.globalService.globalVar.modifiers.push(new W(.3*1.025,"warthogDefaultMaxSpeedModifier")),this.globalService.globalVar.modifiers.push(new W(.1,"warthogDefaultAccelerationModifier")),this.globalService.globalVar.modifiers.push(new W(5*c,"warthogDefaultStaminaModifier")),this.globalService.globalVar.modifiers.push(new W(1.025,"warthogDefaultPowerModifier")),this.globalService.globalVar.modifiers.push(new W(4.875,"warthogDefaultFocusModifier")),this.globalService.globalVar.modifiers.push(new W(4.75,"warthogDefaultAdaptabilityModifier")),this.globalService.globalVar.modifiers.push(new W(.27,"whaleDefaultMaxSpeedModifier")),this.globalService.globalVar.modifiers.push(new W(.1,"whaleDefaultAccelerationModifier")),this.globalService.globalVar.modifiers.push(new W(5*c,"whaleDefaultStaminaModifier")),this.globalService.globalVar.modifiers.push(new W(1*c,"whaleDefaultPowerModifier")),this.globalService.globalVar.modifiers.push(new W(5.5,"whaleDefaultFocusModifier")),this.globalService.globalVar.modifiers.push(new W(4.75,"whaleDefaultAdaptabilityModifier"));var Xn=new xD;Xn.name="Warthog",this.globalService.calculateAnimalRacingStats(Xn);var Yn=new MD;Yn.name="Whale",this.globalService.calculateAnimalRacingStats(Yn),this.globalService.globalVar.animals.push(Xn),this.globalService.globalVar.animals.push(Yn),this.globalService.sortAnimalOrder();var Y,ln,lt,Gn=this.globalService.globalVar.shop.find(De=>"Abilities"===De.name);if(Xn.availableAbilities.forEach(De=>{if(!De.isAbilityPurchased){var cn=new Je;cn.name=Xn.getAnimalType()+" Ability: "+De.name,cn.purchasePrice.push(new oe("Coins",De.purchasePrice)),cn.canHaveMultiples=!1,cn.type=$.Ability,cn.additionalIdentifier=De.name,cn.isAvailable=Xn.isAvailable,null==Gn||Gn.itemList.push(cn)}}),Yn.availableAbilities.forEach(De=>{if(!De.isAbilityPurchased){var cn=new Je;cn.name=Yn.getAnimalType()+" Ability: "+De.name,cn.purchasePrice.push(new oe("Coins",De.purchasePrice)),cn.canHaveMultiples=!1,cn.type=$.Ability,cn.additionalIdentifier=De.name,cn.isAvailable=Yn.isAvailable,null==Gn||Gn.itemList.push(cn)}}),null!=(ln=this.globalService.globalVar.shop.find(De=>"Animals"===De.name))){var Fn=new Je;Fn.name="Warthog",Fn.purchasePrice.push(new oe("Coins",1e3)),Fn.canHaveMultiples=!1,Fn.type=$.Animal,ln.itemList.push(Fn)}if(this.globalService.globalVar.modifiers.push(new W(50,"freeRacesToMedalModifier")),null!=(Y=this.globalService.globalVar.shop.find(De=>"Specialty"===De.name))){var bt=Y.itemList.find(De=>"Team Manager"===De.name);null!=bt&&(bt.totalShopQuantity=19);var gt=new Je;gt.name="Talent Point Voucher",gt.purchasePrice.push(this.globalService.getMedalResourceValue(25)),gt.basePurchasePrice.push(this.globalService.getMedalResourceValue(25)),gt.infiniteAmount=!0,gt.canHaveMultiples=!0,gt.quantityAdditive=25,gt.isAvailable=!1,this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=53&&(gt.isAvailable=!0),gt.type=$.Specialty,Y.itemList.push(gt)}if(null===(y=this.globalService.globalVar.animals.find(De=>De.type===L.Hare))||void 0===y?void 0:y.isAvailable)Rt=1e3,null==(lt=this.globalService.globalVar.resources.find(pr=>"Coins"===pr.name))?this.globalService.globalVar.resources.push(new oe("Coins",Rt)):lt.amount+=Rt;if(null!=(ln=this.globalService.globalVar.shop.find(De=>"Animals"===De.name))){var rn=ln.itemList.find(De=>"Hare"===De.name);null!=rn&&(rn.isAvailable=!1)}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=10){var Bn=this.globalService.globalVar.animals.find(De=>De.type===L.Hare);void 0!==Bn&&(Bn.isAvailable=!0,this.globalService.unlockAnimalAbilities(Bn))}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=13&&this.globalService.globalVar.unlockables.set("barnRow2",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=14&&this.globalService.globalVar.unlockables.set("attractionSpecialization",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=25){var zn=this.globalService.globalVar.animals.find(De=>De.type===L.Whale);void 0!==zn&&(zn.isAvailable=!0,this.globalService.unlockAnimalAbilities(zn))}this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=29&&this.globalService.globalVar.unlockables.set("barnRow3",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=40&&this.globalService.globalVar.unlockables.set("barnRow4",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=58&&this.globalService.globalVar.unlockables.set("barnRow5",!0);var gn=this.globalService.globalVar.animals.find(De=>De.type===L.Octopus);if(void 0!==gn){var kn=gn.availableAbilities.find(De=>"Buried Treasure"===De.name);void 0!==kn&&(kn.efficiency=100),"Buried Treasure"===gn.ability.name&&(gn.ability.efficiency=100)}var tr=this.globalService.globalVar.animals.find(De=>De.type===L.Salamander);if(void 0!==tr){var Tr=tr.availableAbilities.find(De=>"Cold Blooded"===De.name);void 0!==Tr&&(Tr.efficiency=45),"Cold Blooded"===tr.ability.name&&(tr.ability.efficiency=45)}}this.globalService.globalVar.currentVersion=b}})}fixTrackRewardsBug(){this.globalService.globalVar.animals.filter(e=>e.isAvailable).forEach(e=>{var n=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces(),r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces(),a=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining(),o=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(),s=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction(),l=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();e.miscStats.bonusBreedXpGainFromLocalRaces=0===e.miscStats.bonusLocalBreedXpCertificateCount?n:n+e.miscStats.bonusLocalBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromCircuitRaces=0===e.miscStats.bonusCircuitBreedXpCertificateCount?r:r+2*e.miscStats.bonusCircuitBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromTraining=0===e.miscStats.bonusTrainingBreedXpCertificateCount?a:a+e.miscStats.bonusTrainingBreedXpCertificateCount,e.miscStats.diminishingReturnsBonus=0===e.miscStats.bonusDiminishingReturnsCertificateCount?o:o+e.miscStats.bonusDiminishingReturnsCertificateCount,e.miscStats.trainingTimeReduction=s,e.miscStats.bonusTalents=l})}}return t.\u0275fac=function(e){return new(e||t)(Le(Mt),Le(vn),Le(Ri))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ID=(()=>{class t{constructor(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setProductionMode(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setDevMode(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var vt=(()=>{return(t=vt||(vt={}))[t.barn=0]="barn",t[t.raceselection=1]="raceselection",t[t.animals=2]="animals",t[t.relayTeams=3]="relayTeams",t[t.shop=4]="shop",t[t.incubator=5]="incubator",t[t.trainingtrack=6]="trainingtrack",t[t.talents=7]="talents",t[t.resources=8]="resources",t[t.faqs=9]="faqs",t[t.stats=10]="stats",t[t.settings=11]="settings",vt;var t})(),Wa=(()=>{return(t=Wa||(Wa={}))[t.regular=0]="regular",t[t.token=1]="token",Wa;var t})();let li=(()=>{class t{constructor(){this.switchView=new oi(vt.barn),this.selectAnimalView=new oi(new Dt),this.selectBarnView=new oi(0),this.selectShopView=new oi(Wa.regular),this.selectRaceView=new oi(Oe.circuit)}setNewView(e){e!==this.switchView.value&&this.switchView.next(e)}getNewView(){return this.switchView.asObservable()}setAnimalView(e,n){n!==this.selectAnimalView.value&&this.selectAnimalView.next(n),e!==this.switchView.value&&this.switchView.next(e)}setAnimal(e){e!==this.selectAnimalView.value&&this.selectAnimalView.next(e)}getAnimalView(){return this.selectAnimalView.asObservable()}setBarnView(e,n){n!==this.selectBarnView.value&&this.selectBarnView.next(n),e!==this.switchView.value&&this.switchView.next(e)}setBarnNumber(e){e!==this.selectBarnView.value&&this.selectBarnView.next(e)}getBarnView(){return this.selectBarnView.asObservable()}setShopView(e,n){n!==this.selectShopView.value&&this.selectShopView.next(n),e!==this.switchView.value&&this.switchView.next(e)}getShopView(){return this.selectShopView.asObservable()}setRaceView(e,n){n!==this.selectRaceView.value&&this.selectRaceView.next(n),e!==this.switchView.value&&this.switchView.next(e)}getRaceView(){return this.selectRaceView.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class q5{}let VD=(()=>{class t{constructor(e){this.globalService=e}skipTutorial(){this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.globalVar.tutorials.currentTutorialId=10}getTutorialState(e){var n=new q5;return n.id=e,1===e&&(n.tutorialText="<b>Welcome to Cultura!</b> \n\n Cultura is the name of your soon to be state of the art animal racing facility. Train and nurture your animal companions and rise through the ranks by winning circuit competitions. Mix and match different racing teams and abilities to rise as far as you can!\n\nLet's take a tour. From this page, you can select a barn where you can assign and train animals. Currently, you have a fine racing horse already set up in your first barn. Select it and let's get to work. \n\n <b>Select 'Barn 1' outlined in red.</b>",n.associatedTab=vt.barn),2===e&&(n.tutorialText="You'll have to train your animals if you want them to win. There are only a few training options to choose from now, but as you grow you will find better and faster ways to improve. Each training will develop your animals in specific ways, improving the following base stats:\n\n<b>Speed</b>: Increase the max speed your animal can run in a race.\n<b>Acceleration</b>: Increase how quickly your animal gains speed.\n<b>Endurance</b>: Increase the distance your animal can run before tiring out and slowing down.\n<b>Power</b>: Increase the efficiency of your unique ability.\n<b>Focus</b>: Increase the distance your animal can run before losing focus and stopping abruptly.\n<b>Adaptability</b>: Increase the likelihood your animal won't stumble when racing through unique paths.\n\n<b>Select a training option out of the ones outlined in red.</b>",n.associatedTab=vt.barn),3===e&&(n.tutorialText="Here you can get a breakdown on the status of your animals. Here's your horse along with all of the stat information we just went over. If you need a refresher, hover over any of the stats to see what they do. There are a few other stats here to be mindful of:\n\n<b>Diminishing Returns</b>: After a base stat reaches the Diminishing Returns value, any additional training of that stat gets progressively weaker. Typically, you want to try and keep all of your base stats around your Diminishing Returns value for best results. You'll find multiple ways to increase your Diminishing Returns value as you progress.\n<b>Burst Chance</b>: As you race, your racer may enter Burst mode. This increases their overall velocity and allows them to exceed their Max Speed. This stat is based on a combination of Focus and Adaptability and is not affected by Diminishing Returns.\n<b>Burst Distance</b>: This controls how long you stay in Burst mode. This stat is based on your Power and is not affected by Diminishing Returns.\n\nCheck back here often as you proceed to assign new abilities and items to your animals, as well as breeding them to gain even faster offspring.\n\nNow that your horse has had time to take a few practice laps, let's see if they have what it takes to win a race!\n\n<b>Select the 'Race' option on the right (or in the menu if on mobile) bordered in red.</b>",n.associatedTab=vt.animals),4===e&&(n.tutorialText="You've got a few options here. Circuit races are all about deciding where you stand against the competition. If you win all of the circuit races for your rank, you'll move up into the next rank which may net you some nifty rewards and open up new opportunities for your facility. Improving your Circuit Rank should be your number one goal in becoming a top tier racing facility!\n\nYou can also run some free races against local competition. Only a few races are available at a time, but it can be a great way to get some practice in and make some quick money.\n\nFor now, let's see if you can make it up to the next circuit rank. It's a nice sunny day today and that might impact how your racer runs. If you hover over a race, you'll see how the terrain or weather might impact the conditions of the race. When in doubt, hovering over text usually gives you the information you need. Whenever you're ready, start the race. Your goal is to get to the finish line before your competition (represented as the little black dot). Good luck!\n\n<b>Click (or tap if you are on mobile) the race option outlined in red.</b>",n.associatedTab=vt.raceselection),5===e&&(n.tutorialText="Way to go! Exciting stuff there. Looks like you've got the gist of it for now. Keep racing, make some money, and build up your facility to be as great as it can be. I'll check in with you again a little later. I look forward to seeing how far you can go!\n\n<b>Continue training your animals and completing Circuit Races to raise your Circuit Rank. If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",n.associatedTab=vt.raceselection),6===e&&(n.tutorialText="Nice, you've unlocked another racer! If you jump straight into a race with your untrained monkey, things probably aren't going to go well. As you race, you'll start making enough money to build more barns and train your animals simultaneously. For now, let's go back to the barn you have.\n\n<b>Select 'Barn 1' outlined in red.</b>",n.associatedTab=vt.raceselection),7===e&&(n.tutorialText="Let's see if we can start training your new racing Monkey. From here you can unassign an animal from a barn and bring a new animal in. As you start to branch out and race in different course types, you'll want to try and keep your team well balanced. It's not going to help you if you have a prized thoroughbred torching the competition if your follow up racer can barely make it out the gate.\n\nLet's start training your Monkey now.\n\n<b>Select 'Unassign' at the top of the screen and choose 'Monkey' to train.</b>",n.associatedTab=vt.barn),8===e&&(n.tutorialText="Nicely done. Now you can set a training for your Monkey so it can start to get acclimated to racing. Once your Monkey has caught up to your Horse in stats, you'll be back to winning races in no time. Don't forget to train both your Horse and your Monkey, and to try to keep their stats balanced! I'll check back in with you after awhile.\n\n<b>Continue training your animals and completing Circuit Races to raise your Circuit Rank. If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",n.associatedTab=vt.barn),9===e&&(n.tutorialText="Looks like you've won a nice racing Hare. The Hare and Horse are both Flatland animals, meaning only one of them will be able to run the Flatland portion of a race at a time. Ideally, you'll want one getting faster while the other is winning races. Let's head over to your animals and talk about Breeding.\n\n<b>Click (or tap if you are on mobile) 'Animals' on the right bordered in red and select an animal.</b>",n.associatedTab=vt.raceselection),10===e&&(n.tutorialText="Breeding is where your speed really starts to grow. Firstly, to Breed you need a sufficient amount of Breed XP. Training and racing both contribute to this. Once you're ready, you can breed your animal to increase its Breed Level. This gives it a 5% increase to how much the base stats affect the racing stats. There's a strategic element to this. <b>After breeding, your animal will have its stats reset back to their starting points, but the amount that the base stats contribute to the racing stats will increase.</b>\n\n Because you only need 1 Flatland animal to race at any given time, you can choose one to start Breeding and another to keep racing. For best results, you should keep Breeding the same animal multiple times so that you don't need to spend too much time training. 5% may not make a huge difference at first, but 50% will. Once your racing animal can no longer keep up with the competition, swap them! The animal you were breeding will surely torch the competition and the animal you were racing can start to catch up in speed.\n\nThere's an ebb and flow to it. Race as far as your animals can go, breed them many times in quick succession to get a large percentage upgrade to stats, and then get back in the race. <b>This game is intended to be a slow burn and skews towards idle play. If you play very actively, you may find yourself needing to wait at certain points early on. Breeding once, training to max, breeding one time again, and so on is not recommended. Cycle between breeding in batches and then racing with your much higher stat modifiers.\n\nThat's all I have for you. Good luck and have fun!",n.associatedTab=vt.animals,this.globalService.globalVar.tutorials.tutorialCompleted=!0),n}openTutorialModal(){}}return t.\u0275fac=function(e){return new(e||t)(Le(Mt))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const X5=["addListener","removeListener"],Y5=["addEventListener","removeEventListener"],Q5=["on","off"];function hr(t,i,e,n){if(X(e)&&(n=e,e=void 0),n)return hr(t,i,e).pipe(Qm(n));const[r,a]=function J5(t){return X(t.addEventListener)&&X(t.removeEventListener)}(t)?Y5.map(o=>s=>t[o](i,s,e)):function K5(t){return X(t.addListener)&&X(t.removeListener)}(t)?X5.map(OD(t,i)):function Z5(t){return X(t.on)&&X(t.off)}(t)?Q5.map(OD(t,i)):[];if(!r&&ec(t))return gi(o=>hr(o,i,e))(Mi(t));if(!r)throw new TypeError("Invalid event target");return new Be(o=>{const s=(...l)=>o.next(1<l.length?l:l[0]);return r(s),()=>a(s)})}function OD(t,i){return e=>n=>t[e](i,n)}class e4 extends he{constructor(i,e){super()}schedule(i,e=0){return this}}const gf={setInterval(...t){const{delegate:i}=gf;return((null==i?void 0:i.setInterval)||setInterval)(...t)},clearInterval(t){const{delegate:i}=gf;return((null==i?void 0:i.clearInterval)||clearInterval)(t)},delegate:void 0},ND={now:()=>(ND.delegate||Date).now(),delegate:void 0};class Cu{constructor(i,e=Cu.now){this.schedulerActionCtor=i,this.now=e}schedule(i,e=0,n){return new this.schedulerActionCtor(this,i).schedule(n,e)}}Cu.now=ND.now;const FD=new class n4 extends Cu{constructor(i,e=Cu.now){super(i,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(i){const{actions:e}=this;if(this._active)return void e.push(i);let n;this._active=!0;do{if(n=i.execute(i.state,i.delay))break}while(i=e.shift());if(this._active=!1,n){for(;i=e.shift();)i.unsubscribe();throw n}}}(class t4 extends e4{constructor(i,e){super(i,e),this.scheduler=i,this.work=e,this.pending=!1}schedule(i,e=0){if(this.closed)return this;this.state=i;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(i,e,n=0){return gf.setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;gf.clearInterval(e)}execute(i,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(i,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,e){let r,n=!1;try{this.work(i)}catch(a){n=!0,r=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:i,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,re(n,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,super.unsubscribe()}}}),i4=FD;function s0(t=0,i,e=i4){let n=-1;return null!=i&&(ab(i)?e=i:n=i),new Be(r=>{let a=function r4(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},a)})}const{isArray:a4}=Array;function BD(t){return 1===t.length&&a4(t[0])?t[0]:t}function LD(...t){return 1===(t=BD(t)).length?Mi(t[0]):new Be(function o4(t){return i=>{let e=[];for(let n=0;e&&!i.closed&&n<t.length;n++)e.push(Mi(t[n]).subscribe($t(i,r=>{if(e){for(let a=0;a<e.length;a++)a!==n&&e[a].unsubscribe();e=null}i.next(r)})))}}(t))}function mf(...t){const i=ed(t),e=BD(t);return e.length?new Be(n=>{let r=e.map(()=>[]),a=e.map(()=>!1);n.add(()=>{r=a=null});for(let o=0;!n.closed&&o<e.length;o++)Mi(e[o]).subscribe($t(n,s=>{if(r[o].push(s),r.every(l=>l.length)){const l=r.map(c=>c.shift());n.next(i?i(...l):l),r.some((c,u)=>!c.length&&a[u])&&n.complete()}},()=>{a[o]=!0,!r[o].length&&n.complete()}));return()=>{r=a=null}}):ca}function Ii(t){return Ct((i,e)=>{Mi(t).subscribe($t(e,()=>e.complete(),O)),!e.closed&&i.subscribe(e)})}function c0(...t){const i=ed(t);return Ct((e,n)=>{const r=t.length,a=new Array(r);let o=t.map(()=>!1),s=!1;for(let l=0;l<r;l++)Mi(t[l]).subscribe($t(n,c=>{a[l]=c,!s&&!o[l]&&(o[l]=!0,(s=o.every(Fe))&&(o=null))},O));e.subscribe($t(n,l=>{if(s){const c=[l,...a];n.next(i?i(...c):c)}}))})}function HD(t,i){return i?e=>ou(i.pipe(Bi(1),function c4(){return Ct((t,i)=>{t.subscribe($t(i,O))})}()),e.pipe(HD(t))):gi((e,n)=>t(e,n).pipe(Bi(1),function u4(t){return Nt(()=>t)}(e)))}function GD(t,i=FD){const e=s0(t,i);return HD(()=>e)}new Be(O);var h4={left:"right",right:"left",bottom:"top",top:"bottom"};function vf(t){return t.replace(/left|right|bottom|top/g,function(i){return h4[i]})}function qa(t){return t.split("-")[0]}var f4={start:"end",end:"start"};function zD(t){return t.replace(/start|end/g,function(i){return f4[i]})}var Lr="top",Ta="bottom",Da="right",Ur="left",u0="auto",Su=[Lr,Ta,Da,Ur],Ol="start",Tu="end",jD="viewport",Du="popper",$D=Su.reduce(function(t,i){return t.concat([i+"-"+Ol,i+"-"+Tu])},[]),WD=[].concat(Su,[u0]).reduce(function(t,i){return t.concat([i,i+"-"+Ol,i+"-"+Tu])},[]),D4=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Ra(t){if(null==t)return window;if("[object Window]"!==t.toString()){var i=t.ownerDocument;return i&&i.defaultView||window}return t}function Nl(t){return t instanceof Ra(t).Element||t instanceof Element}function oa(t){return t instanceof Ra(t).HTMLElement||t instanceof HTMLElement}function qD(t){return"undefined"!=typeof ShadowRoot&&(t instanceof Ra(t).ShadowRoot||t instanceof ShadowRoot)}function jo(t){return((Nl(t)?t.ownerDocument:t.document)||window.document).documentElement}var ms=Math.max,bf=Math.min,Fl=Math.round;function Bl(t,i){void 0===i&&(i=!1);var e=t.getBoundingClientRect(),n=1,r=1;if(oa(t)&&i){var a=t.offsetHeight,o=t.offsetWidth;o>0&&(n=Fl(e.width)/o||1),a>0&&(r=Fl(e.height)/a||1)}return{width:e.width/n,height:e.height/r,top:e.top/r,right:e.right/n,bottom:e.bottom/r,left:e.left/n,x:e.left/n,y:e.top/r}}function d0(t){var i=Ra(t);return{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function h0(t){return Bl(jo(t)).left+d0(t).scrollLeft}function bo(t){return Ra(t).getComputedStyle(t)}function Xa(t){return t?(t.nodeName||"").toLowerCase():null}function _f(t){return"html"===Xa(t)?t:t.assignedSlot||t.parentNode||(qD(t)?t.host:null)||jo(t)}function f0(t){var i=bo(t);return/auto|scroll|overlay|hidden/.test(i.overflow+i.overflowY+i.overflowX)}function XD(t){return["html","body","#document"].indexOf(Xa(t))>=0?t.ownerDocument.body:oa(t)&&f0(t)?t:XD(_f(t))}function Ru(t,i){var e;void 0===i&&(i=[]);var n=XD(t),r=n===(null==(e=t.ownerDocument)?void 0:e.body),a=Ra(n),o=r?[a].concat(a.visualViewport||[],f0(n)?n:[]):n,s=i.concat(o);return r?s:s.concat(Ru(_f(o)))}function M4(t){return["table","td","th"].indexOf(Xa(t))>=0}function YD(t){return oa(t)&&"fixed"!==bo(t).position?t.offsetParent:null}function xu(t){for(var i=Ra(t),e=YD(t);e&&M4(e)&&"static"===bo(e).position;)e=YD(e);return e&&("html"===Xa(e)||"body"===Xa(e)&&"static"===bo(e).position)?i:e||function k4(t){var i=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&oa(t)&&"fixed"===bo(t).position)return null;for(var r=_f(t);oa(r)&&["html","body"].indexOf(Xa(r))<0;){var a=bo(r);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||i&&"filter"===a.willChange||i&&a.filter&&"none"!==a.filter)return r;r=r.parentNode}return null}(t)||i}function QD(t,i){var e=i.getRootNode&&i.getRootNode();if(t.contains(i))return!0;if(e&&qD(e)){var n=i;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function p0(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function KD(t,i){return i===jD?p0(function R4(t){var i=Ra(t),e=jo(t),n=i.visualViewport,r=e.clientWidth,a=e.clientHeight,o=0,s=0;return n&&(r=n.width,a=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,s=n.offsetTop)),{width:r,height:a,x:o+h0(t),y:s}}(t)):Nl(i)?function A4(t){var i=Bl(t);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(i):p0(function x4(t){var i,e=jo(t),n=d0(t),r=null==(i=t.ownerDocument)?void 0:i.body,a=ms(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=ms(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-n.scrollLeft+h0(t),l=-n.scrollTop;return"rtl"===bo(r||e).direction&&(s+=ms(e.clientWidth,r?r.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(jo(t)))}function Ll(t){return t.split("-")[1]}function g0(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ZD(t){var l,i=t.reference,e=t.element,n=t.placement,r=n?qa(n):null,a=n?Ll(n):null,o=i.x+i.width/2-e.width/2,s=i.y+i.height/2-e.height/2;switch(r){case Lr:l={x:o,y:i.y-e.height};break;case Ta:l={x:o,y:i.y+i.height};break;case Da:l={x:i.x+i.width,y:s};break;case Ur:l={x:i.x-e.width,y:s};break;default:l={x:i.x,y:i.y}}var c=r?g0(r):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case Ol:l[c]=l[c]-(i[u]/2-e[u]/2);break;case Tu:l[c]=l[c]+(i[u]/2-e[u]/2)}}return l}function eR(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function tR(t,i){return i.reduce(function(e,n){return e[n]=t,e},{})}function m0(t,i){void 0===i&&(i={});var n=i.placement,r=void 0===n?t.placement:n,a=i.boundary,o=void 0===a?"clippingParents":a,s=i.rootBoundary,l=void 0===s?jD:s,c=i.elementContext,u=void 0===c?Du:c,d=i.altBoundary,m=void 0!==d&&d,v=i.padding,b=void 0===v?0:v,y=eR("number"!=typeof b?b:tR(b,Su)),k=t.rects.popper,C=t.elements[m?u===Du?"reference":Du:u],R=function E4(t,i,e){var n="clippingParents"===i?function P4(t){var i=Ru(_f(t)),n=["absolute","fixed"].indexOf(bo(t).position)>=0&&oa(t)?xu(t):t;return Nl(n)?i.filter(function(r){return Nl(r)&&QD(r,n)&&"body"!==Xa(r)}):[]}(t):[].concat(i),r=[].concat(n,[e]),o=r.reduce(function(s,l){var c=KD(t,l);return s.top=ms(c.top,s.top),s.right=bf(c.right,s.right),s.bottom=bf(c.bottom,s.bottom),s.left=ms(c.left,s.left),s},KD(t,r[0]));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(Nl(C)?C:C.contextElement||jo(t.elements.popper),o,l),Y=Bl(t.elements.reference),Q=ZD({reference:Y,element:k,strategy:"absolute",placement:r}),ee=p0(Object.assign({},k,Q)),me=u===Du?ee:Y,pe={top:R.top-me.top+y.top,bottom:me.bottom-R.bottom+y.bottom,left:R.left-me.left+y.left,right:me.right-R.right+y.right},ce=t.modifiersData.offset;if(u===Du&&ce){var ve=ce[r];Object.keys(pe).forEach(function(ye){var Ue=[Da,Ta].indexOf(ye)>=0?1:-1,yt=[Lr,Ta].indexOf(ye)>=0?"y":"x";pe[ye]+=ve[yt]*Ue})}return pe}const N4={name:"flip",enabled:!0,phase:"main",fn:function O4(t){var i=t.state,e=t.options,n=t.name;if(!i.modifiersData[n]._skip){for(var r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0===o||o,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,m=e.altBoundary,v=e.flipVariations,b=void 0===v||v,y=e.allowedAutoPlacements,T=i.options.placement,k=qa(T),R=l||(k!==T&&b?function V4(t){if(qa(t)===u0)return[];var i=vf(t);return[zD(t),i,zD(i)]}(T):[vf(T)]),Y=[T].concat(R).reduce(function(nn,Ze){return nn.concat(qa(Ze)===u0?function I4(t,i){void 0===i&&(i={});var r=i.boundary,a=i.rootBoundary,o=i.padding,s=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?WD:l,u=Ll(i.placement),d=u?s?$D:$D.filter(function(b){return Ll(b)===u}):Su,m=d.filter(function(b){return c.indexOf(b)>=0});0===m.length&&(m=d);var v=m.reduce(function(b,y){return b[y]=m0(t,{placement:y,boundary:r,rootBoundary:a,padding:o})[qa(y)],b},{});return Object.keys(v).sort(function(b,y){return v[b]-v[y]})}(i,{placement:Ze,boundary:u,rootBoundary:d,padding:c,flipVariations:b,allowedAutoPlacements:y}):Ze)},[]),Q=i.rects.reference,ee=i.rects.popper,me=new Map,pe=!0,ce=Y[0],ve=0;ve<Y.length;ve++){var ye=Y[ve],Ue=qa(ye),yt=Ll(ye)===Ol,wt=[Lr,Ta].indexOf(Ue)>=0,Et=wt?"width":"height",Rt=m0(i,{placement:ye,boundary:u,rootBoundary:d,altBoundary:m,padding:c}),lt=wt?yt?Da:Ur:yt?Ta:Lr;Q[Et]>ee[Et]&&(lt=vf(lt));var On=vf(lt),se=[];if(a&&se.push(Rt[Ue]<=0),s&&se.push(Rt[lt]<=0,Rt[On]<=0),se.every(function(nn){return nn})){ce=ye,pe=!1;break}me.set(ye,se)}if(pe)for(var tt=function(Ze){var pn=Y.find(function(dt){var _n=me.get(dt);if(_n)return _n.slice(0,Ze).every(function(Wn){return Wn})});if(pn)return ce=pn,"break"},bn=b?3:1;bn>0&&"break"!==tt(bn);bn--);i.placement!==ce&&(i.modifiersData[n]._skip=!0,i.placement=ce,i.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Mu(t,i,e){return ms(t,bf(i,e))}function v0(t){var i=Bl(t),e=t.offsetWidth,n=t.offsetHeight;return Math.abs(i.width-e)<=1&&(e=i.width),Math.abs(i.height-n)<=1&&(n=i.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:n}}const U4={name:"preventOverflow",enabled:!0,phase:"main",fn:function L4(t){var i=t.state,e=t.options,n=t.name,r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0!==o&&o,m=e.tether,v=void 0===m||m,b=e.tetherOffset,y=void 0===b?0:b,T=m0(i,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),k=qa(i.placement),C=Ll(i.placement),R=!C,Y=g0(k),Q=function F4(t){return"x"===t?"y":"x"}(Y),ee=i.modifiersData.popperOffsets,me=i.rects.reference,pe=i.rects.popper,ce="function"==typeof y?y(Object.assign({},i.rects,{placement:i.placement})):y,ve="number"==typeof ce?{mainAxis:ce,altAxis:ce}:Object.assign({mainAxis:0,altAxis:0},ce),ye=i.modifiersData.offset?i.modifiersData.offset[i.placement]:null,Ue={x:0,y:0};if(ee){if(a){var yt,wt="y"===Y?Lr:Ur,Et="y"===Y?Ta:Da,Rt="y"===Y?"height":"width",lt=ee[Y],On=lt+T[wt],se=lt-T[Et],S=v?-pe[Rt]/2:0,tt=C===Ol?me[Rt]:pe[Rt],bn=C===Ol?-pe[Rt]:-me[Rt],kt=i.elements.arrow,nn=v&&kt?v0(kt):{width:0,height:0},Ze=i.modifiersData["arrow#persistent"]?i.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},pn=Ze[wt],dt=Ze[Et],_n=Mu(0,me[Rt],nn[Rt]),Wn=R?me[Rt]/2-S-_n-pn-ve.mainAxis:tt-_n-pn-ve.mainAxis,qn=R?-me[Rt]/2+S+_n+dt+ve.mainAxis:bn+_n+dt+ve.mainAxis,ei=i.elements.arrow&&xu(i.elements.arrow),ti=null!=(yt=null==ye?void 0:ye[Y])?yt:0,Yn=lt+qn-ti,Gn=Mu(v?bf(On,lt+Wn-ti-(ei?"y"===Y?ei.clientTop||0:ei.clientLeft||0:0)):On,lt,v?ms(se,Yn):se);ee[Y]=Gn,Ue[Y]=Gn-lt}if(s){var Fn,ln=ee[Q],rn="y"===Q?"height":"width",Bn=ln+T["x"===Y?Lr:Ur],zn=ln-T["x"===Y?Ta:Da],gn=-1!==[Lr,Ur].indexOf(k),kn=null!=(Fn=null==ye?void 0:ye[Q])?Fn:0,tr=gn?Bn:ln-me[rn]-pe[rn]-kn+ve.altAxis,Tr=gn?ln+me[rn]+pe[rn]-kn-ve.altAxis:zn,Te=v&&gn?function B4(t,i,e){var n=Mu(t,i,e);return n>e?e:n}(tr,ln,Tr):Mu(v?tr:Bn,ln,v?Tr:zn);ee[Q]=Te,Ue[Q]=Te-ln}i.modifiersData[n]=Ue}},requiresIfExists:["offset"]},j4={name:"arrow",enabled:!0,phase:"main",fn:function G4(t){var i,e=t.state,n=t.name,r=t.options,a=e.elements.arrow,o=e.modifiersData.popperOffsets,s=qa(e.placement),l=g0(s),u=[Ur,Da].indexOf(s)>=0?"height":"width";if(a&&o){var d=function(i,e){return eR("number"!=typeof(i="function"==typeof i?i(Object.assign({},e.rects,{placement:e.placement})):i)?i:tR(i,Su))}(r.padding,e),m=v0(a),v="y"===l?Lr:Ur,b="y"===l?Ta:Da,y=e.rects.reference[u]+e.rects.reference[l]-o[l]-e.rects.popper[u],T=o[l]-e.rects.reference[l],k=xu(a),C=k?"y"===l?k.clientHeight||0:k.clientWidth||0:0,ee=C/2-m[u]/2+(y/2-T/2),me=Mu(d[v],ee,C-m[u]-d[b]);e.modifiersData[n]=((i={})[l]=me,i.centerOffset=me-ee,i)}},effect:function z4(t){var i=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"==typeof r&&!(r=i.elements.popper.querySelector(r))||!QD(i.elements.popper,r)||(i.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function X4(t,i,e){void 0===e&&(e=!1);var n=oa(i),r=oa(i)&&function q4(t){var i=t.getBoundingClientRect(),e=Fl(i.width)/t.offsetWidth||1,n=Fl(i.height)/t.offsetHeight||1;return 1!==e||1!==n}(i),a=jo(i),o=Bl(t,r),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!e)&&(("body"!==Xa(i)||f0(a))&&(s=function W4(t){return t!==Ra(t)&&oa(t)?function $4(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):d0(t)}(i)),oa(i)?((l=Bl(i,!0)).x+=i.clientLeft,l.y+=i.clientTop):a&&(l.x=h0(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function Y4(t){var i=new Map,e=new Set,n=[];function r(a){e.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(s){if(!e.has(s)){var l=i.get(s);l&&r(l)}}),n.push(a)}return t.forEach(function(a){i.set(a.name,a)}),t.forEach(function(a){e.has(a.name)||r(a)}),n}function K4(t){var i;return function(){return i||(i=new Promise(function(e){Promise.resolve().then(function(){i=void 0,e(t())})})),i}}var nR={placement:"bottom",modifiers:[],strategy:"absolute"};function iR(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return!i.some(function(n){return!(n&&"function"==typeof n.getBoundingClientRect)})}function J4(t){void 0===t&&(t={});var e=t.defaultModifiers,n=void 0===e?[]:e,r=t.defaultOptions,a=void 0===r?nR:r;return function(s,l,c){void 0===c&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},nR,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],m=!1,v={state:u,setOptions:function(k){var C="function"==typeof k?k(u.options):k;y(),u.options=Object.assign({},a,u.options,C),u.scrollParents={reference:Nl(s)?Ru(s):s.contextElement?Ru(s.contextElement):[],popper:Ru(l)};var R=function Q4(t){var i=Y4(t);return D4.reduce(function(e,n){return e.concat(i.filter(function(r){return r.phase===n}))},[])}(function Z4(t){var i=t.reduce(function(e,n){var r=e[n.name];return e[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,e},{});return Object.keys(i).map(function(e){return i[e]})}([].concat(n,u.options.modifiers)));return u.orderedModifiers=R.filter(function(ye){return ye.enabled}),function b(){u.orderedModifiers.forEach(function(T){var C=T.options,Y=T.effect;if("function"==typeof Y){var Q=Y({state:u,name:T.name,instance:v,options:void 0===C?{}:C});d.push(Q||function(){})}})}(),v.update()},forceUpdate:function(){if(!m){var k=u.elements,C=k.reference,R=k.popper;if(iR(C,R)){u.rects={reference:X4(C,xu(R),"fixed"===u.options.strategy),popper:v0(R)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(ye){return u.modifiersData[ye.name]=Object.assign({},ye.data)});for(var Q=0;Q<u.orderedModifiers.length;Q++)if(!0!==u.reset){var ee=u.orderedModifiers[Q],me=ee.fn,pe=ee.options;"function"==typeof me&&(u=me({state:u,options:void 0===pe?{}:pe,name:ee.name,instance:v})||u)}else u.reset=!1,Q=-1}}},update:K4(function(){return new Promise(function(T){v.forceUpdate(),T(u)})}),destroy:function(){y(),m=!0}};if(!iR(s,l))return v;function y(){d.forEach(function(T){return T()}),d=[]}return v.setOptions(c).then(function(T){!m&&c.onFirstUpdate&&c.onFirstUpdate(T)}),v}}var yf={passive:!0},rL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function rR(t){var i,e=t.popper,n=t.popperRect,r=t.placement,a=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,m=o.x,v=void 0===m?0:m,b=o.y,y=void 0===b?0:b,T="function"==typeof u?u({x:v,y}):{x:v,y};v=T.x,y=T.y;var k=o.hasOwnProperty("x"),C=o.hasOwnProperty("y"),R=Ur,Y=Lr,Q=window;if(c){var ee=xu(e),me="clientHeight",pe="clientWidth";ee===Ra(e)&&"static"!==bo(ee=jo(e)).position&&"absolute"===s&&(me="scrollHeight",pe="scrollWidth"),ee=ee,(r===Lr||(r===Ur||r===Da)&&a===Tu)&&(Y=Ta,y-=(d&&Q.visualViewport?Q.visualViewport.height:ee[me])-n.height,y*=l?1:-1),r!==Ur&&(r!==Lr&&r!==Ta||a!==Tu)||(R=Da,v-=(d&&Q.visualViewport?Q.visualViewport.width:ee[pe])-n.width,v*=l?1:-1)}var yt,ye=Object.assign({position:s},c&&rL),Ue=!0===u?function aL(t){var e=t.y,r=window.devicePixelRatio||1;return{x:Fl(t.x*r)/r||0,y:Fl(e*r)/r||0}}({x:v,y}):{x:v,y};return v=Ue.x,y=Ue.y,Object.assign({},ye,l?((yt={})[Y]=C?"0":"",yt[R]=k?"0":"",yt.transform=(Q.devicePixelRatio||1)<=1?"translate("+v+"px, "+y+"px)":"translate3d("+v+"px, "+y+"px, 0)",yt):((i={})[Y]=C?y+"px":"",i[R]=k?v+"px":"",i.transform="",i))}var dL=J4({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function eL(t){var i=t.state,e=t.instance,n=t.options,r=n.scroll,a=void 0===r||r,o=n.resize,s=void 0===o||o,l=Ra(i.elements.popper),c=[].concat(i.scrollParents.reference,i.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",e.update,yf)}),s&&l.addEventListener("resize",e.update,yf),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",e.update,yf)}),s&&l.removeEventListener("resize",e.update,yf)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function nL(t){var i=t.state;i.modifiersData[t.name]=ZD({reference:i.rects.reference,element:i.rects.popper,strategy:"absolute",placement:i.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function oL(t){var i=t.state,e=t.options,n=e.gpuAcceleration,r=void 0===n||n,a=e.adaptive,o=void 0===a||a,s=e.roundOffsets,l=void 0===s||s,u={placement:qa(i.placement),variation:Ll(i.placement),popper:i.elements.popper,popperRect:i.rects.popper,gpuAcceleration:r,isFixed:"fixed"===i.options.strategy};null!=i.modifiersData.popperOffsets&&(i.styles.popper=Object.assign({},i.styles.popper,rR(Object.assign({},u,{offsets:i.modifiersData.popperOffsets,position:i.options.strategy,adaptive:o,roundOffsets:l})))),null!=i.modifiersData.arrow&&(i.styles.arrow=Object.assign({},i.styles.arrow,rR(Object.assign({},u,{offsets:i.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),i.attributes.popper=Object.assign({},i.attributes.popper,{"data-popper-placement":i.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function lL(t){var i=t.state;Object.keys(i.elements).forEach(function(e){var n=i.styles[e]||{},r=i.attributes[e]||{},a=i.elements[e];!oa(a)||!Xa(a)||(Object.assign(a.style,n),Object.keys(r).forEach(function(o){var s=r[o];!1===s?a.removeAttribute(o):a.setAttribute(o,!0===s?"":s)}))})},effect:function cL(t){var i=t.state,e={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(i.elements.popper.style,e.popper),i.styles=e,i.elements.arrow&&Object.assign(i.elements.arrow.style,e.arrow),function(){Object.keys(i.elements).forEach(function(n){var r=i.elements[n],a=i.attributes[n]||{},s=Object.keys(i.styles.hasOwnProperty(n)?i.styles[n]:e[n]).reduce(function(l,c){return l[c]="",l},{});!oa(r)||!Xa(r)||(Object.assign(r.style,s),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]}]});const pL={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function fL(t){var i=t.state,n=t.name,r=t.options.offset,a=void 0===r?[0,0]:r,o=WD.reduce(function(u,d){return u[d]=function hL(t,i,e){var n=qa(t),r=[Ur,Lr].indexOf(n)>=0?-1:1,a="function"==typeof e?e(Object.assign({},i,{placement:t})):e,o=a[0],s=a[1];return o=o||0,s=(s||0)*r,[Ur,Da].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}(d,i.rects,a),u},{}),s=o[i.placement],c=s.y;null!=i.modifiersData.popperOffsets&&(i.modifiersData.popperOffsets.x+=s.x,i.modifiersData.popperOffsets.y+=c),i.modifiersData[n]=o}},b0=["*"],LL=["dialog"];function v8(t,i){1&t&&g(0),2&t&&at(w(2).title)}function b8(t,i){}function _8(t,i){if(1&t&&(f(0,"h3",3),x(1,v8,1,1,"ng-template",null,4,ct),x(3,b8,0,0,"ng-template",5),h()),2&t){const e=st(2),n=w();p(3),_("ngTemplateOutlet",n.isTitleTemplate()?n.title:e)("ngTemplateOutletContext",n.context)}}function y8(t,i){if(1&t&&(f(0,"span"),lo(1,2),Lt(2,"percent"),h()),2&t){const e=w();p(2),Kd(Jd(2,1,e.getValue()/e.max)),function qg(t){!function kE(t,i,e){if(Uc>0){const n=t.data[e];pw(t,i,Array.isArray(n)?n:n.update,io()-Uc-1,Lc)}Lc=0,Uc=0}(dn(),Me(),t+20)}(1)}}function Ya(t){return!isNaN(function wf(t){return parseInt(`${t}`,10)}(t))}function vs(t){return null!=t}function Ul(t){return(t||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let i=this;if(!document.documentElement.contains(i))return null;do{if(i.matches(t))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null});const sR={animation:!0,transitionTimerDelayMs:5},O8=()=>{},{transitionTimerDelayMs:N8}=sR,ku=new Map,fr=(t,i,e,n)=>{let r=n.context||{};const a=ku.get(i);if(a)switch(n.runningTransition){case"continue":return ca;case"stop":t.run(()=>a.transition$.complete()),r=Object.assign(a.context,r),ku.delete(i)}const o=e(i,n.animation,r)||O8;if(!n.animation||"none"===window.getComputedStyle(i).transitionProperty)return t.run(()=>o()),Pt(void 0).pipe(function I8(t){return i=>new Be(e=>i.subscribe({next:o=>t.run(()=>e.next(o)),error:o=>t.run(()=>e.error(o)),complete:()=>t.run(()=>e.complete())}))}(t));const s=new be,l=new be,c=s.pipe(function s4(...t){return i=>ou(i,Pt(...t))}(!0));ku.set(i,{transition$:s,complete:()=>{l.next(),l.complete()},context:r});const u=function V8(t){const{transitionDelay:i,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(i)+parseFloat(e))}(i);return t.runOutsideAngular(()=>{const d=hr(i,"transitionend").pipe(Ii(c),ji(({target:v})=>v===i));LD(s0(u+N8).pipe(Ii(c)),d,l).pipe(Ii(c)).subscribe(()=>{ku.delete(i),t.run(()=>{o(),s.next(),s.complete()})})}),s.asObservable()};let Au=(()=>{class t{constructor(){this.animation=sR.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr]]}),t})(),pR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr]]}),t})(),mR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({}),t})(),_R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr]]}),t})(),yR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({}),t})();var Vi=(()=>{return(t=Vi||(Vi={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",Vi;var t})();const Sf=(t,i)=>!!i&&i.some(e=>e.contains(t)),wR=(t,i)=>!i||null!=function E8(t,i){return i&&void 0!==t.closest?t.closest(i):null}(t,i),e6="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function CR(t,i,e,n,r,a,o,s){e&&t.runOutsideAngular((t=>e6?()=>setTimeout(()=>t(),100):t)(()=>{const c=hr(i,"keydown").pipe(Ii(r),ji(m=>m.which===Vi.Escape),er(m=>m.preventDefault())),u=hr(i,"mousedown").pipe(Nt(m=>{const v=m.target;return 2!==m.button&&!Sf(v,o)&&("inside"===e?Sf(v,a)&&wR(v,s):"outside"===e?!Sf(v,a):wR(v,s)||!Sf(v,a))}),Ii(r)),d=hr(i,"mouseup").pipe(c0(u),ji(([m,v])=>v),GD(0),Ii(r));LD([c.pipe(Nt(m=>0)),d.pipe(Nt(m=>1))]).subscribe(m=>t.run(()=>n(m)))}))}const SR=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function TR(t){const i=Array.from(t.querySelectorAll(SR)).filter(e=>-1!==e.tabIndex);return[i[0],i[i.length-1]]}const i6=/\s+/,r6=/  +/gi,a6=/^start/,o6=/^end/,s6=/-(top|left)$/,l6=/-(bottom|right)$/,u6=/^left/,d6=/^right/,h6=/^start/,f6=/^end/;function DR({placement:t,baseClass:i}){let e=Array.isArray(t)?t:t.split(i6),r=e.findIndex(l=>"auto"===l);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(l){null==e.find(c=>-1!==c.search("^"+l))&&e.splice(r++,1,l)});const a=e.map(l=>function c6(t){return t.replace(a6,"left").replace(o6,"right").replace(s6,"-start").replace(l6,"-end")}(l));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!i,phase:"write",fn({state:l}){const c=new RegExp(i+"-[a-z]+","gi"),u=l.elements.popper,d=l.placement;let m=u.className;m=m.replace(c,""),m+=` ${function p6(t,i){let[e,n]=i.split("-");const r=e.replace(u6,"start").replace(d6,"end");let a=[r];if(n){let o=n;("left"===e||"right"===e)&&(o=o.replace(h6,"top").replace(f6,"bottom")),a.push(`${r}-${o}`)}return t&&(a=a.map(o=>`${t}-${o}`)),a.join(" ")}(i,d)}`,m=m.trim().replace(r6," "),u.className=m}},N4,U4,j4,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function RR(t){return t}function xR(){let t=null;return{createPopper(i){if(!t){let n=(i.updatePopperOptions||RR)(DR(i));t=dL(i.hostElement,i.targetElement,n)}},update(){t&&t.update()},setOptions(i){if(t){let n=(i.updatePopperOptions||RR)(DR(i));t.setOptions(n)}},destroy(){t&&(t.destroy(),t=null)}}}new Date(1882,10,12),new Date(2174,10,25);let IR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr,_T]]}),t})(),S6=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),VR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["",8,"navbar"]]}),t})(),x0=(()=>{class t{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(P(Tn))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,n){2&e&&St("disabled",n.disabled)},inputs:{disabled:"disabled"}}),t})(),xf=(()=>{class t{constructor(e,n){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=n.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(P(hn(()=>Gl)),P(Tn))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,n,r){if(1&e&&bi(r,x0,4),2&e){let a;yn(a=wn())&&(n.menuItems=a)}},hostVars:5,hostBindings:function(e,n){1&e&&V("keydown.ArrowUp",function(a){return n.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return n.dropdown.onKeyDown(a)})("keydown.Home",function(a){return n.dropdown.onKeyDown(a)})("keydown.End",function(a){return n.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return n.dropdown.onKeyDown(a)})("keydown.Space",function(a){return n.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return n.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return n.dropdown.onKeyDown(a)}),2&e&&(xn("data-popper",n.placement),St("dropdown-menu",!0)("show",n.dropdown.isOpen()))}}),t})(),Mf=(()=>{class t{constructor(e,n){this.dropdown=e,this.nativeElement=n.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(P(hn(()=>Gl)),P(Tn))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,n){2&e&&xn("aria-expanded",n.dropdown.isOpen())}}),t})(),M0=(()=>{class t extends Mf{constructor(e,n){super(e,n)}}return t.\u0275fac=function(e){return new(e||t)(P(hn(()=>Gl)),P(Tn))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,n){1&e&&V("click",function(){return n.dropdown.toggle()})("keydown.ArrowUp",function(a){return n.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return n.dropdown.onKeyDown(a)})("keydown.Home",function(a){return n.dropdown.onKeyDown(a)})("keydown.End",function(a){return n.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return n.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return n.dropdown.onKeyDown(a)}),2&e&&xn("aria-expanded",n.dropdown.isOpen())},features:[In([{provide:Mf,useExisting:hn(()=>t)}]),Sn]}),t})(),Gl=(()=>{class t{constructor(e,n,r,a,o,s,l){this._changeDetector=e,this._document=r,this._ngZone=a,this._elementRef=o,this._renderer=s,this._closed$=new be,this._bodyContainer=null,this._positioning=xR(),this._open=!1,this.openChange=new ot,this.placement=n.placement,this.container=n.container,this.autoClose=n.autoClose,this.display=l?"static":"dynamic",this._zoneSubscription=a.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(Bi(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:n,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(n,r)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.onStable.pipe(Bi(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()})))}_setCloseHandlers(){CR(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._positioning.destroy(),this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const n=e.which,r=this._getMenuElements();let a=-1,o=null;const s=this._isEventFromToggle(e);if(!s&&r.length&&r.forEach((l,c)=>{l.contains(e.target)&&(o=l),l===this._document.activeElement&&(a=c)}),n!==Vi.Space&&n!==Vi.Enter){if(n!==Vi.Tab){if(s||o){if(this.open(),r.length){switch(n){case Vi.ArrowDown:a=Math.min(a+1,r.length-1);break;case Vi.ArrowUp:if(this._isDropup()&&-1===a){a=r.length-1;break}a=Math.max(a-1,0);break;case Vi.Home:a=0;break;case Vi.End:a=r.length-1}r[a].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const l=this._menu.nativeElement.querySelectorAll(SR);e.shiftKey&&e.target===l[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===l[l.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else hr(e.target,"focusout").pipe(Bi(1)).subscribe(({relatedTarget:l})=>{this._elementRef.nativeElement.contains(l)||this.close()})}}else o&&(!0===this.autoClose||"inside"===this.autoClose)&&hr(o,"click").pipe(Bi(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(n=>!n.disabled).map(n=>n.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const n=this._renderer,r=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||n.createElement("div");n.setStyle(a,"position","absolute"),n.setStyle(r,"position","static"),n.setStyle(a,"z-index","1050"),n.appendChild(a,r),n.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,n){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(n&&this._renderer.removeClass(r,n),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const n=this._menu;if(n){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,a=this._elementRef.nativeElement;r.removeClass(a,"dropup"),r.removeClass(a,"dropdown");const{nativeElement:o}=n;"static"===this.display?(n.placement=null,r.setAttribute(o,"data-bs-popper","static")):(n.placement=e,r.removeAttribute(o,"data-bs-popper"));const s=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(a,s);const l=this._bodyContainer;l&&(r.removeClass(l,"dropup"),r.removeClass(l,"dropdown"),r.addClass(l,s))}}}return t.\u0275fac=function(e){return new(e||t)(P(Or),P(S6),P(Si),P(Vn),P(Tn),P(Zr),P(VR,8))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(e,n,r){if(1&e&&(bi(r,xf,5),bi(r,Mf,5)),2&e){let a;yn(a=wn())&&(n._menu=a.first),yn(a=wn())&&(n._anchor=a.first)}},hostVars:2,hostBindings:function(e,n){2&e&&St("show",n.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[Ui]}),t})(),OR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({}),t})();class ws{constructor(i,e,n){this.nodes=i,this.viewRef=e,this.componentRef=n}}class T6{constructor(i,e,n,r,a,o){this._type=i,this._injector=e,this._viewContainerRef=n,this._renderer=r,this._ngZone=a,this._applicationRef=o,this._windowRef=null,this._contentRef=null}open(i,e,n=!1){this._windowRef||(this._contentRef=this._getContentRef(i,e),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,a=this._ngZone.onStable.pipe(Bi(1),gi(()=>fr(this._ngZone,r,({classList:o})=>o.add("show"),{animation:n,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:a}}close(i=!1){return this._windowRef?fr(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:i,runningTransition:"stop"}).pipe(er(()=>{var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):Pt(void 0)}_getContentRef(i,e){if(i){if(i instanceof Kn){const n=i.createEmbeddedView(e);return this._applicationRef.attachView(n),new ws([n.rootNodes],n)}return new ws([[this._renderer.createText(`${i}`)]])}return new ws([])}}let D6=(()=>{class t{constructor(e,n){this._el=e,this._zone=n}ngOnInit(){this._zone.onStable.asObservable().pipe(Bi(1)).subscribe(()=>{fr(this._zone,this._el.nativeElement,(e,n)=>{n&&Ul(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return fr(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(P(Tn),P(Vn))},t.\u0275cmp=ft({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,n){2&e&&(Eo("modal-backdrop"+(n.backdropClass?" "+n.backdropClass:"")),St("show",!n.animation)("fade",n.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),t})();class NR{close(i){}dismiss(i){}}class R6{constructor(i,e,n,r){this._windowCmptRef=i,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new be,this._dismissed=new be,this._hidden=new be,i.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,o)=>{this._resolve=a,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Ii(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Ii(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(i){this._windowCmptRef&&(this._closed.next(i),this._resolve(i),this._removeModalElements())}_dismiss(i){this._dismissed.next(i),this._reject(i),this._removeModalElements()}dismiss(i){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function P8(t){return t&&t.then}(e)?!1!==e&&this._dismiss(i):e.then(n=>{!1!==n&&this._dismiss(i)},()=>{})}else this._dismiss(i)}_removeModalElements(){const i=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Pt(void 0);i.subscribe(()=>{const{nativeElement:n}=this._windowCmptRef.location;n.parentNode.removeChild(n),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:n}=this._backdropCmptRef.location;n.parentNode.removeChild(n),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),mf(i,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Vu=(()=>{return(t=Vu||(Vu={}))[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",Vu;var t})();let x6=(()=>{class t{constructor(e,n,r){this._document=e,this._elRef=n,this._zone=r,this._closed$=new be,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ot,this.shown=new be,this.hidden=new be}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Bi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,n={animation:this.animation,runningTransition:"stop"},o=mf(fr(this._zone,e,()=>e.classList.remove("show"),n),fr(this._zone,this._dialogEl.nativeElement,()=>{},n));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const e={animation:this.animation,runningTransition:"continue"};mf(fr(this._zone,this._elRef.nativeElement,(a,o)=>{o&&Ul(a),a.classList.add("show")},e),fr(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{hr(e,"keydown").pipe(Ii(this._closed$),ji(r=>r.which===Vi.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Vu.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let n=!1;hr(this._dialogEl.nativeElement,"mousedown").pipe(Ii(this._closed$),er(()=>n=!1),po(()=>hr(e,"mouseup").pipe(Ii(this._closed$),Bi(1))),ji(({target:r})=>e===r)).subscribe(()=>{n=!0}),hr(e,"click").pipe(Ii(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!n&&this._zone.run(()=>this.dismiss(Vu.BACKDROP_CLICK))),n=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const n=e.querySelector("[ngbAutofocus]"),r=TR(e)[0];(n||r||e).focus()}}_restoreFocus(){const e=this._document.body,n=this._elWithFocus;let r;r=n&&n.focus&&e.contains(n)?n:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&fr(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(P(Si),P(Tn),P(Vn))},t.\u0275cmp=ft({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,n){if(1&e&&_a(LL,7),2&e){let r;yn(r=wn())&&(n._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,n){2&e&&(xn("aria-modal",!0)("aria-labelledby",n.ariaLabelledBy)("aria-describedby",n.ariaDescribedBy),Eo("modal d-block"+(n.windowClass?" "+n.windowClass:"")),St("fade",n.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:b0,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,n){1&e&&(Gd(),f(0,"div",0,1)(2,"div",2),zd(3),h()()),2&e&&Eo("modal-dialog"+(n.size?" modal-"+n.size:"")+(n.centered?" modal-dialog-centered":"")+(n.scrollable?" modal-dialog-scrollable":"")+(n.modalDialogClass?" "+n.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),M6=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),n=this._document.body,r=n.style,{overflow:a,paddingRight:o}=r;if(e>0){const s=parseFloat(window.getComputedStyle(n).paddingRight);r.paddingRight=`${s+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=o),r.overflow=a}}}return t.\u0275fac=function(e){return new(e||t)(Le(Si))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),k6=(()=>{class t{constructor(e,n,r,a,o,s){this._applicationRef=e,this._injector=n,this._document=r,this._scrollBar=a,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new be,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new ot,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((t,i,e,n=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=hr(i,"focusin").pipe(Ii(e),Nt(a=>a.target));hr(i,"keydown").pipe(Ii(e),ji(a=>a.which===Vi.Tab),c0(r)).subscribe(([a,o])=>{const[s,l]=TR(i);(o===s||o===i)&&a.shiftKey&&(l.focus(),a.preventDefault()),o===l&&!a.shiftKey&&(s.focus(),a.preventDefault())}),n&&hr(i,"click").pipe(Ii(e),c0(r),Nt(a=>a[1])).subscribe(a=>a.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(e,n,r,a){const o=a.container instanceof HTMLElement?a.container:vs(a.container)?this._document.querySelector(a.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.hide(),c=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!o)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const u=new NR,d=this._getContentRef(e,a.injector||n,r,u,a);let m=!1!==a.backdrop?this._attachBackdrop(e,o):void 0,v=this._attachWindowComponent(e,o,d),b=new R6(v,d,m,a.beforeDismiss);return this._registerModalRef(b),this._registerWindowCmpt(v),b.result.then(l,l),b.result.then(c,c),u.close=y=>{b.close(y)},u.dismiss=y=>{b.dismiss(y)},this._applyWindowOptions(v.instance,a),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),m&&m.instance&&(this._applyBackdropOptions(m.instance,a),m.changeDetectorRef.detectChanges()),v.changeDetectorRef.detectChanges(),b}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(n=>n.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,n){let a=e.resolveComponentFactory(D6).create(this._injector);return this._applicationRef.attachView(a.hostView),n.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,n,r){let o=e.resolveComponentFactory(x6).create(this._injector,r.nodes);return this._applicationRef.attachView(o.hostView),n.appendChild(o.location.nativeElement),o}_applyWindowOptions(e,n){this._windowAttributes.forEach(r=>{vs(n[r])&&(e[r]=n[r])})}_applyBackdropOptions(e,n){this._backdropAttributes.forEach(r=>{vs(n[r])&&(e[r]=n[r])})}_getContentRef(e,n,r,a,o){return r?r instanceof Kn?this._createFromTemplateRef(r,a):function oR(t){return"string"==typeof t}(r)?this._createFromString(r):this._createFromComponent(e,n,r,a,o):new ws([])}_createFromTemplateRef(e,n){const a=e.createEmbeddedView({$implicit:n,close(o){n.close(o)},dismiss(o){n.dismiss(o)}});return this._applicationRef.attachView(a),new ws([a.rootNodes],a)}_createFromString(e){const n=this._document.createTextNode(`${e}`);return new ws([[n]])}_createFromComponent(e,n,r,a,o){const s=e.resolveComponentFactory(r),l=vi.create({providers:[{provide:NR,useValue:a}],parent:n}),c=s.create(l),u=c.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new ws([[u]],c.hostView,c)}_setAriaHidden(e){const n=e.parentElement;n&&e!==this._document.body&&(Array.from(n.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(n))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,n)=>{e?n.setAttribute("aria-hidden",e):n.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const n=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(n,n)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const n=this._windowCmpts.indexOf(e);n>-1&&(this._windowCmpts.splice(n,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(Le(os),Le(vi),Le(Si),Le(M6),Le(Zg),Le(Vn))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),A6=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Le(Au))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_o=(()=>{class t{constructor(e,n,r,a){this._moduleCFR=e,this._injector=n,this._modalStack=r,this._config=a}open(e,n={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),n);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(Le(as),Le(vi),Le(k6),Le(A6))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),FR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({providers:[_o]}),t})(),HR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr]]}),t})(),YR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr]]}),t})();class N6{constructor(i,e){this.open=i,this.close=e,e||(this.close=i)}isManual(){return"manual"===this.open||"manual"===this.close}}const F6={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},QR=t=>t>0?GD(t):i=>i;let G6=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Le(Au))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),z6=0;function j6(t){return t.modifiers.push(pL,{name:"offset",options:{offset:()=>[0,12]}}),t}let $6=(()=>{class t{isTitleTemplate(){return this.title instanceof Kn}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ft({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,n){2&e&&(Io("id",n.id),Eo("popover"+(n.popoverClass?" "+n.popoverClass:"")),St("fade",n.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:b0,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Gd(),D(0,"div",0),x(1,_8,4,2,"h3",1),f(2,"div",2),zd(3),h()),2&e&&(p(1),_("ngIf",n.title))},directives:[sn,Cl],encapsulation:2,changeDetection:0}),t})(),Hr=(()=>{class t{constructor(e,n,r,a,o,s,l,c,u){this._elementRef=e,this._renderer=n,this._ngZone=s,this._document=l,this._changeDetector=c,this.shown=new ot,this.hidden=new ot,this._ngbPopoverWindowId="ngb-popover-"+z6++,this._windowRef=null,this._positioning=xR(),this.animation=o.animation,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disablePopover=o.disablePopover,this.popoverClass=o.popoverClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new T6($6,r,a,n,this._ngZone,u),this._zoneSubscription=s.onStable.subscribe(()=>{this._positioning.update()})}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:n,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=n,this._windowRef.instance.animation=this.animation,this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(Bi(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:j6})}),CR(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function H6(t,i,e,n,r,a,o=0,s=0){const l=function B6(t,i=F6){const e=(t||"").trim();if(0===e.length)return[];const n=e.split(/\s+/).map(a=>a.split(":")).map(a=>{let o=i[a[0]]||a;return new N6(o[0],o[1])}),r=n.filter(a=>a.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return n}(e);if(1===l.length&&l[0].isManual())return()=>{};const c=function L6(t,i,e,n){return new Be(r=>{const a=[],o=()=>r.next(!0),s=()=>r.next(!1),l=()=>r.next(!n());return e.forEach(c=>{c.open===c.close?a.push(t.listen(i,c.open,l)):a.push(t.listen(i,c.open,o),t.listen(i,c.close,s))}),()=>{a.forEach(c=>c())}})}(t,i,l,n).pipe(function U6(t,i,e){return n=>{let r=null;const a=n.pipe(Nt(l=>({open:l})),ji(l=>{const c=e();return c===l.open||r&&r.open!==c?(r&&r.open!==l.open&&(r=null),!1):(r=l,!0)}),ub());return cb(a.pipe(ji(l=>l.open),QR(t)),a.pipe(ji(l=>!l.open),QR(i))).pipe(ji(l=>l===r&&(r=null,l.open!==e())),Nt(l=>l.open))}}(o,s,n)).subscribe(u=>u?r():a());return()=>c.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:n,disablePopover:r,popoverClass:a}){a&&this.isOpen()&&(this._windowRef.instance.popoverClass=a.currentValue),(e||n||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Tn),P(Zr),P(vi),P(Jr),P(G6),P(Vn),P(Si),P(Or),P(os))},t.\u0275dir=je({type:t,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[Ui]}),t})(),KR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr]]}),t})(),W6=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),E0=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!Ya(e)||e<=0?100:e}get max(){return this._max}getValue(){return function aR(t,i,e=0){return Math.max(Math.min(t,i),e)}(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(P(W6))},t.\u0275cmp=ft({type:t,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(e,n){2&e&&Nc("height",n.height)},inputs:{max:"max",animated:"animated",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},ngContentSelectors:b0,decls:3,vars:11,consts:function(){let i;return i=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],i]},template:function(e,n){1&e&&(Gd(),f(0,"div",0),x(1,y8,3,3,"span",1),zd(2),h()),2&e&&(function Wy(t,i,e,n,r,a,o,s,l){ba(Pr,Ha,sl(Me(),t,i,e,n,r,a,o,s,l),!0)}("progress-bar",n.type?" bg-"+n.type:"","",n.textType?" text-"+n.textType:"","\n    ",n.animated?" progress-bar-animated":"","",n.striped?" progress-bar-striped":"",""),Nc("width",n.getPercentValue(),"%"),xn("aria-valuenow",n.getValue())("aria-valuemax",n.max),p(1),_("ngIf",n.showValue))},directives:[sn],pipes:[tS],encapsulation:2,changeDetection:0}),t})(),ZR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr]]}),t})(),JR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr]]}),t})(),e2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr]]}),t})(),t2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr]]}),t})(),n2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({}),t})();new qt("live announcer delay",{providedIn:"root",factory:function Y6(){return 100}});let r2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[[Cr]]}),t})();const Q6=[fR,pR,mR,_R,yR,IR,OR,FR,HR,YR,KR,ZR,JR,e2,t2,n2,r2];let K6=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t}),t.\u0275inj=Cn({imports:[Q6,fR,pR,mR,_R,yR,IR,OR,FR,HR,YR,KR,ZR,JR,e2,t2,n2,r2]}),t})();function Z6(t,i){if(1&t){const e=fe();f(0,"div",1),V("click",function(){B(e);const r=w();return r.switchView(r.navigationEnum.incubator)}),f(1,"button",2),g(2,"Incubator"),h(),D(3,"hr"),h()}if(2&t){const e=w();p(1),_("ngClass",e.selectedNavigation===e.navigationEnum.incubator?"active":"")}}const I0=function(t,i){return{active:t,tutorialActive:i}};let a2=(()=>{class t{constructor(e,n,r,a){this.componentCommunicationService=e,this.lookupService=n,this.globalService=r,this.gameLoopService=a,this.viewChanged=new ot,this.navigationEnum=vt,this.selectedNavigation=0,this.tutorial3Active=!1,this.tutorial6Active=!1,this.tutorial9Active=!1}ngOnInit(){this.componentCommunicationService.getNewView().subscribe(e=>{this.viewChanged.emit(e),this.selectedNavigation=e}),this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack"),this.tutorialSubscription=this.gameLoopService.gameUpdateEvent.subscribe(e=>{var n,r;this.tutorial3Active=!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId,this.tutorial6Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||6!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(n=this.globalService.globalVar.animals.find(a=>a.type===L.Monkey))||void 0===n?void 0:n.isAvailable)),this.tutorial9Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||9!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(r=this.globalService.globalVar.animals.find(a=>a.type===L.Hare))||void 0===r?void 0:r.isAvailable)),this.globalService.globalVar.tutorials.tutorialCompleted&&this.tutorialSubscription.unsubscribe()})}switchView(e){this.selectedNavigation===vt.shop&&this.componentCommunicationService.setShopView(vt.shop,Wa.regular),this.selectedNavigation===vt.barn&&this.componentCommunicationService.setBarnView(vt.barn,0),this.selectedNavigation===vt.animals&&this.componentCommunicationService.setAnimalView(vt.animals,new Dt),this.viewChanged.emit(e),this.selectedNavigation=e,this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack")}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0)}}return t.\u0275fac=function(e){return new(e||t)(P(li),P(vn),P(Mt),P(xi))},t.\u0275cmp=ft({type:t,selectors:[["app-navigation"]],outputs:{viewChanged:"viewChanged"},decls:29,vars:17,consts:[[1,"navigation"],[1,"navSpace","clickableText",3,"click"],[1,"buttonAsText",3,"ngClass"],["class","navSpace clickableText",3,"click",4,"ngIf"],[1,"navSpace","clickableText"],[1,"buttonAsText",3,"ngClass","click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1),V("click",function(){return n.switchView(n.navigationEnum.barn)}),f(2,"button",2),g(3,"Barns"),h()(),D(4,"hr"),f(5,"div",1),V("click",function(){return n.switchView(n.navigationEnum.raceselection)}),f(6,"button",2),g(7,"Races"),h()(),D(8,"hr"),f(9,"div",1),V("click",function(){return n.switchView(n.navigationEnum.animals)}),f(10,"button",2),g(11,"Animals"),h()(),D(12,"hr"),f(13,"div",1),V("click",function(){return n.switchView(n.navigationEnum.relayTeams)}),f(14,"button",2),g(15,"Relay Teams"),h()(),D(16,"hr"),f(17,"div",1),V("click",function(){return n.switchView(n.navigationEnum.shop)}),f(18,"button",2),g(19,"Shop"),h()(),D(20,"hr"),x(21,Z6,4,1,"div",3),f(22,"div",4)(23,"button",5),V("click",function(){return n.switchView(n.navigationEnum.resources)}),g(24,"Resources"),h()(),D(25,"hr"),f(26,"div",1),V("click",function(){return n.switchView(n.navigationEnum.settings)}),f(27,"button",2),g(28,"Settings"),h()()()),2&e&&(p(2),_("ngClass",Vo(8,I0,n.selectedNavigation===n.navigationEnum.barn,n.tutorial6Active)),p(4),_("ngClass",Vo(11,I0,n.selectedNavigation===n.navigationEnum.raceselection,n.tutorial3Active)),p(4),_("ngClass",Vo(14,I0,n.selectedNavigation===n.navigationEnum.animals,n.tutorial9Active)),p(4),_("ngClass",n.selectedNavigation===n.navigationEnum.relayTeams?"active":""),p(4),_("ngClass",n.selectedNavigation===n.navigationEnum.shop?"active":""),p(3),_("ngIf",n.incubatorAvailable),p(2),_("ngClass",n.selectedNavigation===n.navigationEnum.resources?"active":""),p(4),_("ngClass",n.selectedNavigation===n.navigationEnum.settings?"active":""))},directives:[Zn,sn],styles:[".navigation[_ngcontent-%COMP%]{height:100%;border-left:1px solid rgba(0,0,0,.1);padding-left:1rem;padding-top:1rem;background-color:var(--background-secondary);color:var(--foreground-default)}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}"]}),t})();function J6(t,i){if(1&t&&D(0,"div",15),2&t){const e=w();_("innerHTML",e.getSanitizedHtml(e.latestVersionChanges),Bt)}}function eU(t,i){if(1&t&&(f(0,"div")(1,"div",24)(2,"span",25),g(3),Lt(4,"number"),h(),f(5,"span"),g(6),h()(),D(7,"br")(8,"div",26),f(9,"span"),D(10,"hr"),h()()),2&t){const e=i.$implicit,n=i.index,r=w(3);p(3),K("Version ",on(4,3,r.allVersions[n],"1.2-2"),""),p(3),K(" ",r.versionControlService.getDateForVersion(r.allVersions[n]),""),p(2),_("innerHTML",r.getSanitizedHtml(e),Bt)}}function tU(t,i){if(1&t&&(f(0,"div")(1,"div",21)(2,"div",22),x(3,eU,11,6,"div",23),h()()()),2&t){const e=w(2);p(3),_("ngForOf",e.changeLog)}}function nU(t,i){if(1&t){const e=fe();f(0,"div",16)(1,"div",17)(2,"h4",18),g(3,"Change Log"),h(),f(4,"button",19),V("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),x(6,tU,4,1,"div",20),h()}if(2&t){const e=w();p(6),_("ngIf",e.changeLog.length>0)}}let iU=(()=>{class t{constructor(e,n,r,a,o,s,l){this.lookupService=e,this.gameLoopService=n,this.globalService=r,this.componentCommunicationService=a,this.versionControlService=o,this.modalService=s,this.sanitizer=l}ngOnInit(){this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.latestVersionChanges=this.versionControlService.getLatestChanges(),this.changeLog=this.versionControlService.getAllChanges(),this.allVersions=this.versionControlService.gameVersions,this.gameLoopService.gameUpdateEvent.subscribe(e=>{this.globalService.globalVar.userIsRacing||(this.coinCount=this.lookupService.getCoins(),this.medalCount=this.lookupService.getMedals())})}getSanitizedHtml(e){return this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(e))}changeView(e){this.componentCommunicationService.setNewView(e)}openChangeLog(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}}return t.\u0275fac=function(e){return new(e||t)(P(vn),P(xi),P(Mt),P(li),P(o0),P(_o),P(Fo))},t.\u0275cmp=ft({type:t,selectors:[["app-header"]],decls:26,vars:8,consts:[[1,"headerView"],[1,"gridContainer"],[1,"nameArea","keyword"],[1,"name"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"version","versionMargin","clickableText",3,"ngbPopover","click"],[1,"coins","keyword"],[1,"medals","keyword"],[1,"menu","keyword"],["ngbDropdown","",1,"d-inline-block","customDropdown"],["menuDropdown","ngbDropdown"],["type","button","id","menuDropdown","ngbDropdownToggle","",1,"btn","dropdown"],["ngbDropdownMenu","","aria-labelledby","menuDropdown",1,"dropdownItems"],[3,"viewChanged","click"],["latestVersionChangesContent",""],["content",""],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[4,"ngIf"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],[1,"flexDiv"],[1,"s4Heading"],[3,"innerHTML"]],template:function(e,n){if(1&e){const r=fe();f(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),g(4," Cultura "),h(),f(5,"span",4),V("click",function(){B(r);const o=st(25);return n.openChangeLog(o)}),g(6),h()(),f(7,"div",5)(8,"span"),g(9),Lt(10,"number"),h()(),f(11,"div",6)(12,"span"),g(13),Lt(14,"number"),h()(),f(15,"div",7)(16,"div",8,9)(18,"button",10),g(19,"Menu"),h(),f(20,"div",11)(21,"app-navigation",12),V("viewChanged",function(o){return n.changeView(o)})("click",function(){return B(r),st(17).close()}),h()()()()(),x(22,J6,1,1,"ng-template",null,13,ct),x(24,nU,7,1,"ng-template",null,14,ct),h()}if(2&e){const r=st(23);p(5),_("ngbPopover",r),p(1),K(" v",n.version," "),p(3),K("Coins: ",Jd(10,4,n.coinCount),""),p(4),K("Medals: ",Jd(14,6,n.medalCount),"")}},directives:[Hr,Gl,M0,xf,a2,sn,ai],pipes:[fo],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name . coins ." ". name . medals ."}.nameArea[_ngcontent-%COMP%]{grid-area:name;justify-self:stretch}.name[_ngcontent-%COMP%]{font-size:2rem}.coins[_ngcontent-%COMP%]{grid-area:coins;justify-self:stretch}.medals[_ngcontent-%COMP%]{grid-area:medals;justify-self:stretch}.versionMargin[_ngcontent-%COMP%]{margin-left:.5rem}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}.dropdownItems[_ngcontent-%COMP%]{background-color:var(--background-secondary);color:var(--foreground-default)}.menu[_ngcontent-%COMP%]{display:none}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre-line}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.flexDiv[_ngcontent-%COMP%]{display:flex;justify-content:space-between}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 15% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name coins menu ." ". name medals menu ."}.menu[_ngcontent-%COMP%]{display:block;grid-area:menu;justify-self:stretch}.customDropdown[_ngcontent-%COMP%]{width:100%;text-align:center}}']}),t})();function rU(t,i){if(1&t&&(f(0,"h6",9)(1,"span"),g(2),h(),D(3,"br"),f(4,"span"),g(5),h()()),2&t){const e=w(2);_("ngClass",e.colorConditional),p(2),at(e.associatedAnimalName),p(3),at(e.associatedAnimalType)}}function aU(t,i){if(1&t&&(f(0,"h6",9)(1,"span"),g(2),h()()),2&t){const e=w(2);_("ngClass",e.colorConditional),p(2),at(e.associatedAnimalType)}}function oU(t,i){1&t&&(f(0,"div")(1,"em"),g(2,"Auto Breed "),f(3,"strong"),g(4,"ON"),h()()())}function sU(t,i){1&t&&(f(0,"div")(1,"em"),g(2,"Ready to Breed"),h()())}const lU=function(t){return{floatingProgressTextAnimation:t}};function cU(t,i){if(1&t&&(f(0,"div",4)(1,"span"),g(2),h(),x(3,rU,6,3,"h6",5),x(4,aU,3,2,"h6",5),D(5,"br"),f(6,"p"),D(7,"ngb-progressbar",6),h(),f(8,"div",7),g(9),h(),D(10,"br"),x(11,oU,5,0,"div",8),x(12,sU,3,0,"div",8),h()),2&t){const e=w();p(2),at(e.barnName),p(1),_("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),_("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(3),_("value",e.trainingProgressBarPercent),p(1),_("ngClass",fi(8,lU,e.showTrainingAnimation)),p(1),K(" ",e.trainingCompleteText," "),p(2),_("ngIf",e.autoBreedActive),p(1),_("ngIf",!e.autoBreedActive&&e.readyToBreed)}}function uU(t,i){1&t&&(f(0,"h6",10)(1,"span"),g(2,"Unassigned"),h(),D(3,"br"),f(4,"em"),g(5,"Click to assign animal"),h()())}function dU(t,i){1&t&&(f(0,"h6",11)(1,"span"),g(2,"Locked"),h(),D(3,"br"),f(4,"em"),g(5,"Click to view status"),h()())}let hU=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.utilityService=a,this.trainingCompleteText="",this.showTrainingAnimation=!1,this.selectedBarn=new ot}ngOnInit(){if(this.barnNumber>0&&this.barnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.barnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e);var n=this.globalService.globalVar.animals.find(r=>r.associatedBarnNumber==this.barnNumber);null!=n?(this.isOccupied=!0,this.associatedAnimalName=n.name,this.associatedAnimalType=L[n.type],this.associatedAnimal=n,this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()}):this.isOccupied=!1,this.isLocked=e.isLocked}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.isLocked||(this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.barnNumber);if(null!=a){if(null==a.currentTraining)return void(this.trainingProgressBarPercent=0);a.currentTraining.timeTrained<this.previousTrainedAmount&&(this.trainingCompleteText=this.lookupService.getTrainingProgressionAnimationText(a.currentTraining),this.showTrainingAnimation=!0,setTimeout(()=>{this.showTrainingAnimation=!1,this.trainingCompleteText=""},3e3)),this.readyToBreed=a.breedGaugeXp>=a.breedGaugeMax&&this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=10,this.autoBreedActive=a.autoBreedActive,this.previousTrainedAmount=a.currentTraining.timeTrained,this.trainingProgressBarPercent=a.currentTraining.timeTrained/a.currentTraining.timeToComplete*100}}))}ngOnDestroy(){this.previousTrainedAmount=0,null!=this.subscription&&this.subscription.unsubscribe()}onClick(){this.selectedBarn.emit(this.barnNumber)}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(xi),P(vn),P(Ri))},t.\u0275cmp=ft({type:t,selectors:[["app-barn"]],hostBindings:function(e,n){1&e&&V("click",function(){return n.onClick()})},inputs:{barnNumber:"barnNumber"},outputs:{selectedBarn:"selectedBarn"},decls:4,vars:3,consts:[[1,"barn","clickableText"],["class","unlocked",4,"ngIf"],["class","unassigned",4,"ngIf"],["class","locked",4,"ngIf"],[1,"unlocked"],["class","keyword",3,"ngClass",4,"ngIf"],["type","success",3,"value"],[1,"progressBar","floatingProgressText","progressBarColor","keyword",3,"ngClass"],[4,"ngIf"],[1,"keyword",3,"ngClass"],[1,"unassigned"],[1,"locked"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,cU,13,10,"div",1),x(2,uU,6,0,"h6",2),x(3,dU,6,0,"h6",3),h()),2&e&&(p(1),_("ngIf",n.isOccupied),p(1),_("ngIf",!n.isOccupied&&!n.isLocked),p(1),_("ngIf",n.isLocked))},directives:[sn,Zn,E0],styles:[".barn[_ngcontent-%COMP%]{text-align:center;width:45%;margin:auto;display:flex;justify-content:center;align-content:center;flex-direction:column;height:100%}.floatingProgressText[_ngcontent-%COMP%]{float:right;position:relative;text-align:right;top:-2em}.floatingProgressTextAnimation[_ngcontent-%COMP%]{animation-name:floatingProgressTextAnimation;animation-duration:3s;animation-iteration-count:1;animation-timing-function:ease-in-out}@keyframes floatingProgressTextAnimation{0%{transform:translate(0)}to{transform:translateY(-30px);opacity:0}}@media (max-width: 800px){.barn[_ngcontent-%COMP%]{width:75%}}"]}),t})(),fU=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ft({type:t,selectors:[["app-training-option"]],inputs:{trainingOption:"trainingOption"},decls:7,vars:4,consts:[[1,"training"],[1,"trainingName","keyword"],[1,"trainingStats"],[1,"trainingTimeToComplete"]],template:function(e,n){1&e&&(f(0,"h6",0)(1,"p",1),g(2),h(),f(3,"p",2),g(4),h(),f(5,"p",3),g(6),h()()),2&e&&(p(2),at(n.trainingOption.trainingName),p(2),at(n.trainingOption.getStatGainDescription()),p(2),ii("",n.trainingOption.getFacilitySize()," - ",n.trainingOption.timeToComplete," sec "))},styles:[".training[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const pU=function(t){return{activeTrainingOption:t}};function gU(t,i){if(1&t){const e=fe();f(0,"td",4)(1,"div",5),V("click",function(){const a=B(e).$implicit;return w(2).selectTrainingOption(a)}),D(2,"app-training-option",6),h()()}if(2&t){const e=i.$implicit;p(1),_("ngClass",fi(2,pU,e.isSelected)),p(1),_("trainingOption",e)}}function mU(t,i){if(1&t&&(f(0,"tr"),x(1,gU,3,4,"td",3),h()),2&t){const e=i.$implicit;p(1),_("ngForOf",e)}}let vU=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrainingOption=new ot}ngOnInit(){this.setupDisplayTrainings()}setupDisplayTrainings(){this.trainingsCells=[],this.trainingsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableTrainingOptions.length;n++)this.trainingsCells.push(this.availableTrainingOptions[n-1]),n%e==0&&(this.trainingsRows.push(this.trainingsCells),this.trainingsCells=[]);0!==this.trainingsCells.length&&this.trainingsRows.push(this.trainingsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrainingOption(e){this.availableTrainingOptions.forEach(n=>{n.isSelected=!1}),e.isSelected=!0,this.selectedTrainingOption.emit(e)}ngOnChanges(e){this.availableTrainingOptions=e.availableTrainingOptions.currentValue,this.setupDisplayTrainings()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt))},t.\u0275cmp=ft({type:t,selectors:[["app-training-list"]],hostBindings:function(e,n){1&e&&V("resize",function(a){return n.onResize(a)},!1,ao)},inputs:{availableTrainingOptions:"availableTrainingOptions"},outputs:{selectedTrainingOption:"selectedTrainingOption"},features:[Ui],decls:4,vars:1,consts:[[1,"trainingsView"],[1,"trainings"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trainingOption"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,mU,2,1,"tr",2),h()()()),2&e&&(p(3),_("ngForOf",n.trainingsRows))},directives:[ai,Zn,fU],styles:[".trainingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.trainings[_ngcontent-%COMP%]{margin:.5rem}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function bU(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),at(e.selectedAnimal.name)}}function _U(t,i){if(1&t&&(f(0,"h6",3),x(1,bU,2,1,"span",2),D(2,"br"),f(3,"span"),g(4),h()()),2&t){const e=w();p(1),_("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),at(e.selectedAnimal.getAnimalType())}}function yU(t,i){if(1&t&&(f(0,"h6",3)(1,"span"),g(2),h()()),2&t){const e=w();p(2),at(e.selectedAnimal.getAnimalType())}}function wU(t,i){if(1&t&&(f(0,"div"),D(1,"br")(2,"br"),f(3,"h6",3)(4,"em"),g(5),h()()()),2&t){const e=w();p(5),ii("",e.trainingTrackRewardsRemaining," / ",e.trainingTrackTotalRewards," rewards remaining")}}let CU=(()=>{class t{constructor(){this.isTrainingTrackView=!1,this.trainingTrackRewardsRemaining=0,this.trainingTrackTotalRewards=0}ngOnInit(){this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.isTrainingTrackView&&(this.trainingTrackRewardsRemaining=this.selectedAnimal.allTrainingTracks.getTotalRewardsRemaining(),this.trainingTrackTotalRewards=this.selectedAnimal.allTrainingTracks.getTotalRewardCount())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=ft({type:t,selectors:[["app-animal"]],inputs:{selectedAnimal:"selectedAnimal",isTrainingTrackView:"isTrainingTrackView"},decls:8,vars:5,consts:[[1,"keyword","animal",3,"ngClass"],["class","keyword",4,"ngIf"],[4,"ngIf"],[1,"keyword"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,_U,5,2,"h6",1),x(2,yU,3,1,"h6",1),D(3,"br")(4,"br"),f(5,"span"),g(6),h(),x(7,wU,6,2,"div",2),h()),2&e&&(_("ngClass",n.colorConditional),p(1),_("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),p(1),_("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),p(4),at(n.selectedAnimal.getRaceCourseType()),p(1),_("ngIf",n.isTrainingTrackView))},directives:[Zn,sn],styles:[".animal[_ngcontent-%COMP%]{margin:.5rem}"]}),t})();function SU(t,i){if(1&t){const e=fe();f(0,"td")(1,"div",3),V("click",function(){const a=B(e).$implicit;return w(2).selectAnimal(a)}),D(2,"app-animal",4),h()()}if(2&t){const e=i.$implicit,n=w(2);p(2),_("selectedAnimal",e)("isTrainingTrackView",n.isTrainingTrackView)}}function TU(t,i){if(1&t&&(f(0,"tr"),x(1,SU,3,2,"td",2),h()),2&t){const e=i.$implicit;p(1),_("ngForOf",e)}}let kf=(()=>{class t{constructor(e){this.globalService=e,this.isTrainingTrackView=!1,this.selectedAnimal=new ot}ngOnInit(){this.setupDisplayAnimals()}setupDisplayAnimals(){this.animalCells=[],this.animalRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableAnimals.length;n++)this.animalCells.push(this.availableAnimals[n-1]),n%e==0&&(this.animalRows.push(this.animalCells),this.animalCells=[]);0!==this.animalCells.length&&this.animalRows.push(this.animalCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectAnimal(e){this.selectedAnimal.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(P(Mt))},t.\u0275cmp=ft({type:t,selectors:[["app-animal-list"]],hostBindings:function(e,n){1&e&&V("resize",function(a){return n.onResize(a)},!1,ao)},inputs:{availableAnimals:"availableAnimals",isTrainingTrackView:"isTrainingTrackView"},outputs:{selectedAnimal:"selectedAnimal"},decls:4,vars:1,consts:[[1,"animalsView"],[1,"animals"],[4,"ngFor","ngForOf"],[1,"clickableText",3,"click"],[3,"selectedAnimal","isTrainingTrackView"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,TU,2,1,"tr",2),h()()()),2&e&&(p(3),_("ngForOf",n.animalRows))},directives:[ai,CU],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();const DU=["specializationModal"];function RU(t,i){if(1&t){const e=fe();f(0,"div")(1,"span",38),V("click",function(){B(e);const r=w(2),a=st(16);return r.openBarnUpgradeModal(a)}),g(2),h(),D(3,"br")(4,"br"),f(5,"span",39)(6,"button",40),V("click",function(){return B(e),w(2).upgradeBarn()}),g(7),h()()()}if(2&t){const e=w(2),n=st(4),r=st(6);p(1),_("ngbPopover",n),p(1),K("Barn Level ",e.barn.barnUpgrades.barnLevel,""),p(3),_("ngbPopover",r),p(1),_("disabled",!e.canUpgrade),p(1),at(e.upgradeText)}}function xU(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(3);p(1),at(e.associatedAnimal.name)}}function MU(t,i){if(1&t){const e=fe();f(0,"button",41),V("click",function(){return B(e),w(2).goToAnimal()}),x(1,xU,2,1,"span",13),D(2,"br"),f(3,"span"),g(4),h()()}if(2&t){const e=w(2);_("ngClass",e.colorConditional),p(1),_("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(3),at(e.associatedAnimal.getAnimalType())}}function kU(t,i){if(1&t){const e=fe();f(0,"button",42),V("click",function(){return B(e),w(2).goToAnimal()}),f(1,"span"),g(2),h()()}if(2&t){const e=w(2);_("ngClass",e.colorConditional),p(2),at(e.associatedAnimal.getAnimalType())}}function AU(t,i){if(1&t){const e=fe();f(0,"span",39)(1,"button",43),V("click",function(){return B(e),w(2).upgradeBarnSize()}),g(2,"Build"),h()()}if(2&t){const e=w(2);_("ngbPopover",st(8)),p(1),_("disabled",!e.canBuild)}}function PU(t,i){if(1&t&&(f(0,"div",39)(1,"span",44),g(2),h(),D(3,"br"),f(4,"span")(5,"em"),g(6),Lt(7,"number"),h()()()),2&t){const e=w(2);_("ngbPopover",st(10)),p(2),K("",e.existingTraining.trainingName," "),p(4),K("(",on(7,3,e.existingTraining.trainingTimeRemaining/60,"1.0-0")," min remaining)")}}function EU(t,i){1&t&&(f(0,"div",39)(1,"span"),g(2,"No Training Assigned"),h()()),2&t&&(w(2),_("ngbPopover",st(12)))}function IU(t,i){if(1&t){const e=fe();f(0,"div")(1,"span")(2,"button",12),V("click",function(){return B(e),w(2).goToCoaching()}),g(3,"Coach"),h()()()}}function VU(t,i){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"p",45),D(3,"ngb-progressbar",46),f(4,"span",47),g(5),Lt(6,"number"),h()(),D(7,"br"),h()),2&t){const e=w(2);p(3),_("value",e.trainingProgressBarPercent),p(2),K("",on(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}function OU(t,i){if(1&t){const e=fe();f(0,"app-training-list",48),V("selectedTrainingOption",function(r){return B(e),w(2).selectNewTraining(r)}),h()}2&t&&_("availableTrainingOptions",w(2).availableTrainings)}function NU(t,i){1&t&&(f(0,"div",49),g(1," This animal is currently busy and cannot train. "),h())}const FU=function(t){return{sizeSpacing:t}};function BU(t,i){if(1&t){const e=fe();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"button",12),V("click",function(){return B(e),w().unassignAnimal()}),g(5,"Unassign"),h(),D(6,"br")(7,"br"),x(8,RU,8,5,"div",13),h(),f(9,"div",14)(10,"span"),g(11),h(),D(12,"br"),x(13,MU,5,3,"button",15),x(14,kU,3,2,"button",16),f(15,"div")(16,"span",17),g(17),h(),x(18,AU,3,2,"span",18),h(),D(19,"hr"),x(20,PU,8,6,"div",18),x(21,EU,3,1,"div",18),h(),f(22,"div",19)(23,"button",12),V("click",function(){return B(e),w().returnToBarnView()}),g(24,"Back"),h(),D(25,"br")(26,"br")(27,"br")(28,"br"),x(29,IU,4,0,"div",13),h()(),D(30,"hr"),x(31,VU,8,5,"div",13),D(32,"br"),f(33,"div",20)(34,"span",21),V("click",function(){return B(e),w().resetFilters()}),g(35,"Change Training"),h(),D(36,"br"),f(37,"span",22)(38,"em"),g(39,"Click an option below to start training."),h()()(),D(40,"br"),f(41,"div",23)(42,"div",24)(43,"button",25),V("click",function(){return B(e),w().toggleFacilityFilter("Small")}),g(44,"Small "),h(),f(45,"button",26),V("click",function(){return B(e),w().toggleFacilityFilter("Medium")}),g(46,"Medium "),h(),f(47,"button",27),V("click",function(){return B(e),w().toggleFacilityFilter("Large")}),g(48,"Large "),h()(),f(49,"button",28)(50,"span",12),V("click",function(){return B(e),w().resetFilters()}),g(51,"Reset Filters"),h()(),f(52,"div",29)(53,"button",30),V("click",function(){return B(e),w().toggleStatFilter("Speed")}),g(54,"SPD "),h(),f(55,"button",31),V("click",function(){return B(e),w().toggleStatFilter("Acceleration")}),g(56,"ACC "),h(),f(57,"button",32),V("click",function(){return B(e),w().toggleStatFilter("Endurance")}),g(58,"END "),h(),f(59,"button",33),V("click",function(){return B(e),w().toggleStatFilter("Power")}),g(60,"PWR "),h(),f(61,"button",34),V("click",function(){return B(e),w().toggleStatFilter("Focus")}),g(62,"FCS "),h(),f(63,"button",35),V("click",function(){return B(e),w().toggleStatFilter("Adaptability")}),g(64,"ADP"),h()()(),D(65,"br"),f(66,"div",17),x(67,OU,1,1,"app-training-list",36),x(68,NU,2,0,"div",37),h()()()}if(2&t){const e=w();p(8),_("ngIf",e.barnSpecializationsUnlocked),p(3),K(" ",e.barnName,""),p(2),_("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),_("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(2),_("ngClass",fi(32,FU,"Large"!==e.sizeValue)),p(1),K("",e.sizeValue," "),p(1),_("ngIf","Large"!==e.sizeValue),p(2),_("ngIf",null!=e.existingTraining),p(1),_("ngIf",null==e.existingTraining),p(8),_("ngIf",e.coachingUnlocked),p(2),_("ngIf",null!=e.existingTraining),p(12),St("filterActive",e.filterSmall),p(2),St("filterActive",e.filterMedium),p(2),St("filterActive",e.filterLarge),p(6),St("filterActive",e.filterSpeed),p(2),St("filterActive",e.filterAcceleration),p(2),St("filterActive",e.filterEndurance),p(2),St("filterActive",e.filterPower),p(2),St("filterActive",e.filterFocus),p(2),St("filterActive",e.filterAdaptability),p(3),_("ngClass",e.tutorialActive?"tutorialActive":""),p(1),_("ngIf",e.associatedAnimal.canTrain),p(1),_("ngIf",!e.associatedAnimal.canTrain)}}function LU(t,i){if(1&t){const e=fe();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",14)(4,"span"),g(5),h(),D(6,"br"),f(7,"span"),g(8,"Unassigned"),h()(),f(9,"div",19)(10,"button",12),V("click",function(){return B(e),w().returnToBarnView()}),g(11,"Back"),h()()(),D(12,"hr")(13,"br"),f(14,"span"),g(15,"Assign Animal"),h(),D(16,"br")(17,"br"),f(18,"app-animal-list",50),V("selectedAnimal",function(r){return B(e),w().assignAnimal(r)}),h()()()}if(2&t){const e=w();p(5),K("Barn ",e.selectedBarnNumber,""),p(13),_("availableAnimals",e.availableAnimals)}}function UU(t,i){if(1&t){const e=fe();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",14)(4,"span"),g(5),h(),D(6,"br"),f(7,"span"),g(8,"Locked"),h()(),f(9,"div",19)(10,"button",12),V("click",function(){return B(e),w().returnToBarnView()}),g(11,"Back"),h()()(),D(12,"hr")(13,"br"),f(14,"div",51)(15,"span"),g(16,"Purchase Barn"),h(),D(17,"br")(18,"br"),f(19,"span",52),g(20),h(),D(21,"br"),f(22,"button",53),V("click",function(){return B(e),w().purchaseBarn()}),g(23,"Buy"),h()()()()}if(2&t){const e=w();p(5),K("Barn ",e.selectedBarnNumber,""),p(15),K("",e.barn.purchasePrice," Coins"),p(2),_("disabled",!e.canPurchaseBarn())}}function HU(t,i){if(1&t&&(f(0,"div",55),D(1,"div",56),h()),2&t){const e=w(2);p(1),_("innerHTML",e.totalBarnStatsPopover,Bt)}}function GU(t,i){1&t&&x(0,HU,2,1,"div",54),2&t&&_("ngIf",""!==w().totalBarnStatsPopover)}function zU(t,i){if(1&t&&(f(0,"div",55),g(1),h()),2&t){const e=w(2);p(1),K(" ",e.upgradeBarnPopover," ")}}function jU(t,i){1&t&&x(0,zU,2,1,"div",54),2&t&&_("ngIf",""!==w().upgradeBarnPopover)}function $U(t,i){if(1&t&&(f(0,"div",55),g(1),h()),2&t){const e=w(2);p(1),K(" ",e.buildBiggerBarnPopover," ")}}function WU(t,i){1&t&&x(0,$U,2,1,"div",54),2&t&&_("ngIf",""!==w().buildBiggerBarnPopover)}function qU(t,i){1&t&&D(0,"div",58),2&t&&_("innerHTML",w(2).currentTrainingPopover,Bt)}function XU(t,i){1&t&&x(0,qU,1,1,"div",57),2&t&&_("ngIf",""!==w().currentTrainingPopover)}function YU(t,i){1&t&&D(0,"div",58),2&t&&_("innerHTML",w(2).currentTrainingPopover,Bt)}function QU(t,i){1&t&&x(0,YU,1,1,"div",57),2&t&&_("ngIf",""!==w().currentTrainingPopover)}const o2=function(t){return{selectedSpecialization:t}};function KU(t,i){if(1&t){const e=fe();f(0,"span",69),V("click",function(){const a=B(e).$implicit;return w(3).filterSpecialization(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=w(3);_("ngClass",fi(2,o2,n.selectedSpecialization===e)),p(1),K(" ",e.trim()," ")}}function ZU(t,i){if(1&t&&(f(0,"div",67),x(1,KU,2,4,"span",68),h()),2&t){const e=w(2);p(1),_("ngForOf",e.specializationOptions)}}function JU(t,i){if(1&t&&(f(0,"div"),g(1),D(2,"br")(3,"br"),f(4,"strong"),g(5),h()()),2&t){const e=w(2);p(1),K(" ",e.specializationDescription," "),p(4),K(" ",e.inDepthSpecializationDescription," ")}}function eH(t,i){if(1&t){const e=fe();f(0,"div",59)(1,"form")(2,"div",60)(3,"h4",61),g(4,"Choose Barn Specialization"),h(),f(5,"button",62),V("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div",63),x(8,ZU,2,1,"div",64),D(9,"hr"),x(10,JU,6,2,"div",13),h(),f(11,"div",65)(12,"button",66),V("click",function(){return B(e),w().selectSpecialization()}),g(13,"Select"),h()()()()}if(2&t){const e=w();p(8),_("ngIf",e.specializationOptions.length>0),p(2),_("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription)}}function tH(t,i){if(1&t){const e=fe();f(0,"span",69),V("click",function(){const a=B(e).$implicit;return w(4).filterSpecialization(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=w(4);_("ngClass",fi(2,o2,n.selectedSpecialization===e)),p(1),K(" ",e.trim()," ")}}function nH(t,i){if(1&t&&(f(0,"div",67),x(1,tH,2,4,"span",68),h()),2&t){const e=w(3);p(1),_("ngForOf",e.specializationOptions)}}function iH(t,i){if(1&t&&(f(0,"div"),g(1),D(2,"br")(3,"br"),f(4,"strong"),g(5),h(),D(6,"br")(7,"br"),h()),2&t){const e=w(3);p(1),K(" ",e.specializationDescription," "),p(4),K(" ",e.inDepthSpecializationDescription," ")}}function rH(t,i){if(1&t){const e=fe();f(0,"div",72)(1,"div",73)(2,"span",74),g(3,"Reset Barn Specialization"),h(),D(4,"br"),f(5,"em"),g(6," Tear down your barn to build up something new. Each barn can be reset as many times as you want, but "),f(7,"strong"),g(8,"it only retains 80% of its current Barn Level after being reset."),h()()(),D(9,"br"),f(10,"div")(11,"div",75),x(12,nH,2,1,"div",64),D(13,"hr"),x(14,iH,8,2,"div",13),h(),f(15,"div",76)(16,"span"),g(17),h(),f(18,"button",66),V("click",function(){return B(e),w(2).resetSpecialization()}),g(19,"Reset Specialization"),h()()()()}if(2&t){const e=w(2);p(12),_("ngIf",e.specializationOptions.length>0),p(2),_("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription),p(3),K("New Barn Level will be ",e.postResetBarnUpgradeLevel,"")}}function aH(t,i){if(1&t){const e=fe();f(0,"div",59)(1,"div",60)(2,"h4",61),g(3,"Barn Upgrade Info"),h(),f(4,"button",62),V("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",63)(7,"div",70),D(8,"div",56)(9,"br"),g(10),D(11,"br")(12,"hr"),x(13,rH,20,3,"div",71),h()()()}if(2&t){const e=w();p(8),_("innerHTML",e.totalBarnStatsPopover,Bt),p(2),K(" ",e.upgradeBarnPopover," "),p(3),_("ngIf",e.barn.barnUpgrades.specializationLevel>0)}}let oH=(()=>{class t{constructor(e,n,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=n,this.modalService=r,this.lookupService=a,this.componentCommunicationService=o,this.specializationService=s,this.tutorialService=l,this.utilityService=c,this.returnToBarnEmitter=new ot,this.isCoachingEmitter=new ot,this.canUpgrade=!1,this.canBuild=!1,this.barnSpecializationsUnlocked=!1,this.coachingUnlocked=!1,this.tutorialActive=!1,this.postResetBarnUpgradeLevel=0,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1}keyEvent(e){var n=this.lookupService.getAvailableBarns().filter(s=>void 0!==s),r=n.findIndex(s=>this.selectedBarnNumber===s.barnNumber);if("ArrowLeft"===e.key)r>-1&&(null!=this.subscription&&this.subscription.unsubscribe(),(a=r-1)<0&&(a=n.length-1),this.componentCommunicationService.setBarnView(vt.barn,(o=n[a]).barnNumber),this.resetSelectedBarnInfo(o));else if("ArrowRight"===e.key&&r>-1){var a,o;null!=this.subscription&&this.subscription.unsubscribe(),(a=r+1)===n.length&&(a=0),this.componentCommunicationService.setBarnView(vt.barn,(o=n[a]).barnNumber),this.resetSelectedBarnInfo(o)}}ngOnInit(){if(this.handleTutorial(),this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(n=>n.barnNumber===this.selectedBarnNumber);null!=e&&this.resetSelectedBarnInfo(e)}}selectNewTraining(e){var n=this.globalService.globalVar.animals.find(s=>s.associatedBarnNumber===this.selectedBarnNumber);if(null!=n){var r=Object.assign({},e),a="smallBarnTrainingTimeModifier";this.barn.size===ht.Medium?a="mediumBarnTrainingTimeModifier":this.barn.size===ht.Large&&(a="largeBarnTrainingTimeModifier");var o=this.globalService.globalVar.modifiers.find(s=>s.text===a);if(null!=o&&(r.trainingTimeRemaining=o.value),null!=n.currentTraining){if(this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching"))return void(n.queuedTraining=r);n.currentTraining.timeTrained=0}n.currentTraining=r,this.existingTraining=r,!this.globalService.globalVar.tutorials.tutorialCompleted&&2===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.componentCommunicationService.setAnimalView(vt.animals,this.associatedAnimal)),!this.globalService.globalVar.tutorials.tutorialCompleted&&8===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1)}}GetAvailableTrainingOptions(e){var n=[];if(null==this.globalService.globalVar||null==this.globalService.globalVar.trainingOptions||0===this.globalService.globalVar.trainingOptions.length)return n;n=this.globalService.globalVar.trainingOptions.filter(o=>o.isAvailable&&(o.facilitySize===ht.Small||o.facilitySize===ht.Medium&&(this.barn.size===ht.Medium||this.barn.size===ht.Large)||o.facilitySize===ht.Large&&this.barn.size===ht.Large));var r=[];n.forEach(o=>{var s=o.makeCopy(o),l=this.lookupService.getTrainingTimeReductionFromTrainingFacility(this.barn.barnUpgrades),c=this.lookupService.getResourceByName("Stopwatch");null==c&&(c=0),s.timeToComplete*=1-(.05*c+l+e.miscStats.trainingTimeReduction/100),s.timeToComplete=Math.round(100*(s.timeToComplete+Number.EPSILON))/100,e.raceCourseType===z.Mountain&&(s.trainingType===Ne.ShortTrackRunning&&(s.trainingName="Short Track Climbing"),s.trainingType===Ne.TrailRunning&&(s.trainingName="Trail Climbing"),s.trainingType===Ne.LongTrackRunning&&(s.trainingName="Long Track Climbing")),e.raceCourseType===z.Ocean&&(s.trainingType===Ne.ShortTrackRunning&&(s.trainingName="Short Track Swimming"),s.trainingType===Ne.TrailRunning&&(s.trainingName="Lane Swimming"),s.trainingType===Ne.SmallWagonTow&&(s.trainingName="Small Canoe Tow"),s.trainingType===Ne.UphillRun&&(s.trainingName="Upstream Swim"),s.trainingType===Ne.LongTrackRunning&&(s.trainingName="Long Track Swimming"),s.trainingType===Ne.VehicleTow&&(s.trainingName="Boat Tow"),s.trainingType===Ne.GreenwayHike&&(s.trainingName="Canal Adventure")),s.affectedStatRatios.topSpeed*=this.barn.barnUpgrades.upgradedStatGain.topSpeed,s.affectedStatRatios.acceleration*=this.barn.barnUpgrades.upgradedStatGain.acceleration,s.affectedStatRatios.endurance*=this.barn.barnUpgrades.upgradedStatGain.endurance,s.affectedStatRatios.power*=this.barn.barnUpgrades.upgradedStatGain.power,s.affectedStatRatios.focus*=this.barn.barnUpgrades.upgradedStatGain.focus,s.affectedStatRatios.adaptability*=this.barn.barnUpgrades.upgradedStatGain.adaptability;var u=1,d=1,m=1,v=1,b=1,y=1;e.talentTree.talentTreeType===pt.sprint&&(y=1+e.talentTree.column1Row1Points/100,d=1+e.talentTree.column2Row1Points/100,v=1+e.talentTree.column3Row1Points/100),e.talentTree.talentTreeType===pt.longDistance&&(b=1+e.talentTree.column1Row1Points/100,u=1+e.talentTree.column2Row1Points/100,m=1+e.talentTree.column3Row1Points/100),s.affectedStatRatios.topSpeed*=u,s.affectedStatRatios.acceleration*=d,s.affectedStatRatios.endurance*=m,s.affectedStatRatios.power*=v,s.affectedStatRatios.focus*=b,s.affectedStatRatios.adaptability*=y,s.affectedStatRatios.topSpeed=Math.round(100*(s.affectedStatRatios.topSpeed+Number.EPSILON))/100,s.affectedStatRatios.acceleration=Math.round(100*(s.affectedStatRatios.acceleration+Number.EPSILON))/100,s.affectedStatRatios.endurance=Math.round(100*(s.affectedStatRatios.endurance+Number.EPSILON))/100,s.affectedStatRatios.power=Math.round(100*(s.affectedStatRatios.power+Number.EPSILON))/100,s.affectedStatRatios.focus=Math.round(100*(s.affectedStatRatios.focus+Number.EPSILON))/100,s.affectedStatRatios.adaptability=Math.round(100*(s.affectedStatRatios.adaptability+Number.EPSILON))/100,r.push(s)}),(this.filterAcceleration||this.filterAdaptability||this.filterEndurance||this.filterFocus||this.filterPower||this.filterSpeed||this.filterSmall||this.filterMedium||this.filterLarge)&&(r=r.filter(o=>(!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterAcceleration&&o.affectedStatRatios.acceleration>0||this.filterAdaptability&&o.affectedStatRatios.adaptability>0||this.filterEndurance&&o.affectedStatRatios.endurance>0||this.filterFocus&&o.affectedStatRatios.focus>0||this.filterPower&&o.affectedStatRatios.power>0||this.filterSpeed&&o.affectedStatRatios.topSpeed>0)&&(!this.filterSmall&&!this.filterMedium&&!this.filterLarge||this.filterSmall&&o.facilitySize===ht.Small||this.filterMedium&&o.facilitySize===ht.Medium||this.filterLarge&&o.facilitySize===ht.Large)));var a=r.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});return null!=a&&this.animalAssigned&&(a.isSelected=!0),r}GetAvailableAnimalOptions(){var e=[];return null==this.globalService.globalVar||null==this.globalService.globalVar.animals||0===this.globalService.globalVar.animals.length||(e=this.globalService.globalVar.animals.filter(n=>n.isAvailable&&(void 0===n.associatedBarnNumber||n.associatedBarnNumber<=0))),e}unassignAnimal(){var e=this.globalService.globalVar.animals.find(n=>n.associatedBarnNumber==this.selectedBarnNumber);null!=e&&(e.associatedBarnNumber=0,e.currentTraining=null),this.existingTraining=null,this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions()}assignAnimal(e){e.associatedBarnNumber=this.selectedBarnNumber,this.animalAssigned=!0,this.availableAnimals=this.GetAvailableAnimalOptions(),this.availableTrainings=this.GetAvailableTrainingOptions(e),this.associatedAnimalName=e.name,this.existingTraining=null;var n=this.lookupService.getAnimalByType(e.type);null!==n&&(n.associatedBarnNumber=this.selectedBarnNumber,this.associatedAnimal=n,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()}),!this.globalService.globalVar.tutorials.tutorialCompleted&&7===this.globalService.globalVar.tutorials.currentTutorialId&&this.associatedAnimal.type===L.Monkey&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.tutorialActive=!0)}returnToBarnView(){this.returnToBarnEmitter.emit(0)}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}toggleFacilityFilter(e){"Small"===e&&(this.filterSmall=!this.filterSmall),"Medium"===e&&(this.filterMedium=!this.filterMedium),"Large"===e&&(this.filterLarge=!this.filterLarge),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1,this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}purchaseBarn(){this.lookupService.getCoins()>=this.barn.purchasePrice&&(this.barn.isLocked=!1,this.lookupService.spendCoins(this.barn.purchasePrice))}canPurchaseBarn(){return this.lookupService.getCoins()>=this.barn.purchasePrice}getSizeValue(){this.sizeValue=this.barn.getSize()}upgradeBarnSize(){if(this.lookupService.getCoins()>=this.barn.facilityUpgradePrice){if(this.lookupService.spendCoins(this.barn.facilityUpgradePrice),this.barn.size===ht.Small)this.barn.size=ht.Medium,this.barn.facilityUpgradePrice=4e3,null!=(n=this.globalService.globalVar.shop.find(r=>"Trainings"===r.name))&&n.itemList.filter(r=>r.additionalIdentifier===ht.Medium.toString()).forEach(r=>{r.isAvailable=!0});else if(this.barn.size===ht.Medium){var n;this.barn.size=ht.Large,null!=(n=this.globalService.globalVar.shop.find(a=>"Trainings"===a.name))&&n.itemList.filter(a=>a.additionalIdentifier===ht.Large.toString()).forEach(a=>{a.isAvailable=!0})}this.getSizeValue(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover()}}upgradeBarn(){var e=this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel);if(this.canUpgradeBarn(e)){if(9===this.barn.barnUpgrades.barnLevel)this.modalService.open(this.specializationModal,{ariaLabelledBy:"modal-basic-title",size:"lg"});else{e.forEach(o=>{this.lookupService.spendResourceByName(o.name,o.amount)}),this.barn.barnUpgrades.barnLevel+=1;var r=.1;if(this.barn.barnUpgrades.barnLevel%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var a=this.barn.barnUpgrades.barnLevel-this.barn.barnUpgrades.specializationLevel;a%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=r:a%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=r:a%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=r:a%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=r:a%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=r:a%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=r)}this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover()}this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}else alert("You don't have the required resources to upgrade your barn.")}canUpgradeBarn(e){var n=!0;return e.forEach(r=>{this.lookupService.getResourceByName(r.name)<r.amount&&(n=!1)}),n}canBuildLargerBarn(){var e=!1;return this.lookupService.getCoins()>=this.barn.facilityUpgradePrice&&(e=!0),e}getTotalBarnStatsPopover(){var e="Upgrade to gain barn bonuses";return this.barn.barnUpgrades.barnLevel>=1&&(e="Barn Upgrades: <br/>"),this.barn.barnUpgrades.specialization===jt.TrainingFacility?e+=this.specializationService.getSpecializationPopoverText(jt.TrainingFacility,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===jt.BreedingGrounds?e+=this.specializationService.getSpecializationPopoverText(jt.BreedingGrounds,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===jt.Attraction?e+=this.specializationService.getSpecializationPopoverText(jt.Attraction,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===jt.ResearchCenter&&(e+=this.specializationService.getSpecializationPopoverText(jt.ResearchCenter,this.barn.barnUpgrades.specializationLevel)),this.barn.barnUpgrades.upgradedStatGain.adaptability>1&&(e+="Adaptability Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.adaptability.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.focus>1&&(e+="Focus Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.focus.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.power>1&&(e+="Power Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.power.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.endurance>1&&(e+="Endurance Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.endurance.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.acceleration>1&&(e+="Acceleration Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.acceleration.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.topSpeed>1&&(e+="Speed Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.topSpeed.toFixed(1)+"<br/>"),null!==this.utilityService.getSanitizedHtml(e)&&(e=this.utilityService.getSanitizedHtml(e)),e}getUpgradeBarnPopover(){var e="Cost for next upgrade: \n";return this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(r=>{var a=r.name;"Medals"===a&&1===r.amount&&(a="Medal"),e+=r.amount+" "+a+"\n"}),e}getBuildLargerBarnPopover(){var e="Cost to build larger barn: \n";return e+=this.barn.facilityUpgradePrice+" Coins \n\n",this.barn.size===ht.Small?e+="You will be able to do Medium trainings and increase idle training time to 4 hours.":this.barn.size===ht.Medium&&(e+="You will be able to do Large trainings and increase idle training time to 8 hours."),e}filterSpecialization(e){this.selectedSpecialization=e,this.specializationDescription=this.globalService.getSpecializationDescription(e),this.inDepthSpecializationDescription=this.lookupService.getInDepthSpecializationDescription(e)}selectSpecialization(){""!==this.selectedSpecialization&&null!=this.selectedSpecialization?(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(n=>{this.lookupService.spendResourceByName(n.name,n.amount)}),this.barn.barnUpgrades.specialization=this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel+=1,this.barn.barnUpgrades.barnLevel+=1,this.barn.barnUpgrades.specialization===jt.TrainingFacility&&(this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="",this.modalService.dismissAll()):alert("You must select a specialization.")}resetSpecialization(){if(""!==this.selectedSpecialization&&null!=this.selectedSpecialization){this.barn.barnUpgrades.barnLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel),this.barn.barnUpgrades.specialization=this.barn.barnUpgrades.barnLevel<10?jt.None:this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel=0,this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="";var e=.1;this.barn.barnUpgrades.upgradedStatGain=new Ee(1,1,1,1,1,1);for(var n=1;n<=this.barn.barnUpgrades.barnLevel;n++)if(n%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var r=n-this.barn.barnUpgrades.specializationLevel;r%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=e:r%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=e:r%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=e:r%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=e:r%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=e:r%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=e)}this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.modalService.dismissAll()}else alert("You must select a specialization.")}goToAnimal(){this.componentCommunicationService.setAnimalView(vt.animals,this.associatedAnimal)}handleTutorial(){var e=this.globalService.globalVar.animals.find(n=>n.type===L.Monkey);this.globalService.globalVar.tutorials.tutorialCompleted||1!==this.globalService.globalVar.tutorials.currentTutorialId?!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)?(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0):this.globalService.globalVar.tutorials.tutorialCompleted||(this.tutorialActive=!1):(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}resetSelectedBarnInfo(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.upgradeText="Upgrade",this.barnSpecializationsUnlocked=this.lookupService.isItemUnlocked("barnSpecializations"),this.coachingUnlocked=this.lookupService.isItemUnlocked("coaching"),this.selectedBarnNumber=e.barnNumber,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var n=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedBarnNumber);if(void 0!==n){this.barn=n,this.barnName=this.lookupService.getBarnName(n),this.getSizeValue(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize");var r=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.selectedBarnNumber);if(null!=r){if(this.animalAssigned=!0,this.associatedAnimal=r,this.associatedAnimalName=r.name,this.existingTraining=r.currentTraining,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()},this.availableTrainings=this.GetAvailableTrainingOptions(r),this.currentTrainingPopover=this.getCurrentTrainingPopover(r),null!=this.existingTraining){var a=this.availableTrainings.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});null!=a&&(a.isSelected=!0)}}else this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions();this.componentCommunicationService.setBarnView(vt.barn,this.selectedBarnNumber),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(o=>{if(!this.barn.isLocked){var s=this.globalService.globalVar.animals.find(c=>c.associatedBarnNumber==this.selectedBarnNumber);if(null!=s){if(null==s.currentTraining){if(null!==this.existingTraining){var l=this.availableTrainings.find(c=>{var u;return(null===(u=this.existingTraining)||void 0===u?void 0:u.trainingName)===c.trainingName});null!=l&&(l.isSelected=!1),this.existingTraining=null}return}s.currentTraining!==this.existingTraining&&(this.existingTraining=s.currentTraining),this.trainingProgressBarPercent>=100&&(this.trainingProgressBarPercent=100),this.trainingProgressBarPercent=s.currentTraining.timeTrained/s.currentTraining.timeToComplete*100,this.currentTrainingPopover=this.getCurrentTrainingPopover(s)}}})}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}getCurrentTrainingPopover(e){var n="";null!=e.currentTraining&&(n+=e.currentTraining.trainingName+"\n"+this.lookupService.getStatGainDescription(e.currentTraining.affectedStatRatios,e.currentTraining.statGain)+"\n"),n+=e.name+" Current Stats:\n",n+="Speed: "+Math.round(e.currentStats.topSpeed).toLocaleString()+"\n",n+="Acceleration: "+Math.round(e.currentStats.acceleration).toLocaleString()+"\n",n+="Endurance: "+Math.round(e.currentStats.endurance).toLocaleString()+"\n",n+="Power: "+Math.round(e.currentStats.power).toLocaleString()+"\n",n+="Focus: "+Math.round(e.currentStats.focus).toLocaleString()+"\n",n+="Adaptability: "+Math.round(e.currentStats.adaptability).toLocaleString()+"\n",n+="Diminishing Returns: "+this.globalService.GetAnimalDiminishingReturns(e);var r=this.utilityService.getSanitizedHtml(n);return null!==r&&(n=r),n}goToCoaching(){this.isCoachingEmitter.emit(!0)}openBarnUpgradeModal(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.barn.barnUpgrades.specialization!==jt.None){var n=this.lookupService.convertSpecializationEnumToName(this.barn.barnUpgrades.specialization);this.specializationOptions=this.specializationOptions.filter(r=>r!==n),this.postResetBarnUpgradeLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel)}this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.tutorialSubscription&&this.tutorialSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(xi),P(_o),P(vn),P(li),P(r0),P(VD),P(Ri))},t.\u0275cmp=ft({type:t,selectors:[["app-selected-barn"]],viewQuery:function(e,n){if(1&e&&_a(DU,7),2&e){let r;yn(r=wn())&&(n.specializationModal=r.first)}},hostBindings:function(e,n){1&e&&V("keyup",function(a){return n.keyEvent(a)},!1,ao)},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{returnToBarnEmitter:"returnToBarnEmitter",isCoachingEmitter:"isCoachingEmitter"},decls:17,vars:3,consts:[["class","selectedBarnModal",4,"ngIf"],["totalBarnStatsContent",""],["upgradeBarnContent",""],["costToBuildContent",""],["noTrainingContent",""],["currentTrainingContent",""],["specializationModal",""],["barnUpgradeContent",""],[1,"selectedBarnModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"unassign"],[3,"click"],[4,"ngIf"],[1,"info"],["class","keyword buttonAsTextKeepColor clickableText",3,"ngClass","click",4,"ngIf"],["class","clickableText keyword buttonAsTextKeepColor",3,"ngClass","click",4,"ngIf"],[3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"back"],[1,"changeTrainingHeader"],[1,"s4Heading",3,"click"],[1,"trainingDescription"],[1,"filterGridContainer"],[1,"facilitySizeFilter","clickableText","filterMargins"],["id","smallFilter",1,"buttonAsText",3,"click"],["id","mediumFilter",1,"buttonAsText",3,"click"],["id","largeFilter",1,"buttonAsText",3,"click"],[1,"resetFiltersHeader","buttonAsText","clickableText"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTrainingOptions","selectedTrainingOption",4,"ngIf"],["class","keyword",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[1,"keyword","buttonAsTextKeepColor","clickableText",3,"ngClass","click"],[1,"clickableText","keyword","buttonAsTextKeepColor",3,"ngClass","click"],[1,"sizeButtonSpacing",3,"disabled","click"],[1,"activeTrainingOption"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"],[3,"availableTrainingOptions","selectedTrainingOption"],[1,"keyword"],[3,"availableAnimals","selectedAnimal"],[1,"purchaseBarn"],[1,"price","resourceKeyword"],["id","purchaseButton",3,"disabled","click"],["class","popoverClass",4,"ngIf"],[1,"popoverClass"],[3,"innerHTML"],["class","popoverClass",3,"innerHTML",4,"ngIf"],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],["class","typeContainer",4,"ngIf"],[1,"modal-footer"],["type","button",3,"click"],[1,"typeContainer"],["class","specializationType subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"specializationType","subHeading",3,"ngClass","click"],[1,"upgradeBarnInfo"],["class","resetBarn",4,"ngIf"],[1,"resetBarn"],[1,"resetSpecializationInfo"],[1,"s4Heading"],[1,"resetSpecializationOptions"],[1,"modal-footer","spaceEvenly"]],template:function(e,n){1&e&&(x(0,BU,69,34,"div",0),x(1,LU,19,2,"div",0),x(2,UU,24,3,"div",0),x(3,GU,1,1,"ng-template",null,1,ct),x(5,jU,1,1,"ng-template",null,2,ct),x(7,WU,1,1,"ng-template",null,3,ct),x(9,XU,1,1,"ng-template",null,4,ct),x(11,QU,1,1,"ng-template",null,5,ct),x(13,eH,14,2,"ng-template",null,6,ct),x(15,aH,14,3,"ng-template",null,7,ct)),2&e&&(_("ngIf",n.animalAssigned&&!n.barn.isLocked),p(1),_("ngIf",!n.animalAssigned&&!n.barn.isLocked),p(1),_("ngIf",n.barn.isLocked))},directives:[sn,Hr,Zn,E0,vU,kf,Nh,xh,ru,ai],pipes:[fo],styles:['ngb-modal-backdrop{z-index:1050!important}.selectedBarnModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}.infoText[_ngcontent-%COMP%]{text-align:center}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"unassign info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.trainingDescription[_ngcontent-%COMP%]{text-align:center}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.facilitySizeFilter[_ngcontent-%COMP%]{grid-area:facilitySizeFilter}.resetFiltersHeader[_ngcontent-%COMP%]{grid-area:resetFiltersHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.changeTrainingHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.specializationType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedSpecialization[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.sizeButtonSpacing[_ngcontent-%COMP%]{width:4rem}.sizeSpacing[_ngcontent-%COMP%]{margin-left:4rem}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.spaceEvenly[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}.resetSpecializationInfo[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:2fr 1fr 2fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}}']}),t})();var ci=(()=>{return(t=ci||(ci={}))[t.speed=0]="speed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",t[t.special=6]="special",ci;var t})();const sH=["coachingCanvas"],lH=["drawCoaching"];let cH=(()=>{class t{constructor(e,n,r,a){this.gameLoopService=e,this.globalService=n,this.themeService=r,this.utilityService=a,this.isCoachingEmitter=new ot,this.isPointerDown=!1,this.activePoints=[],this.currentEndPoint=0,this.currentX=0,this.currentY=0,this.getNewPath=!1}ngOnInit(){if(this.successfulAttemptStreak=0,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var n=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=n){this.associatedAnimal=n;var r="coloredText "+this.associatedAnimal.getCourseTypeClass();this.animalDisplayName="<span class='"+r+"'>"+this.associatedAnimal.name+"</span>"}}this.incrementalCoachingUpdates="You bring "+this.animalDisplayName+" out into an open area for practice.\n"}ngAfterViewInit(){this.setupCanvas(),null!=this.drawCoaching&&(this.canvasOffsetX=this.drawCoaching.nativeElement.offsetLeft,this.canvasOffsetY=this.drawCoaching.nativeElement.offsetTop),this.context=this.coachingCanvas.nativeElement.getContext("2d"),this.context.lineWidth=6,this.currentPathType=this.getRandomPathType(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(n=>{this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=6,this.displayTrace(this.context,0)})}setupCanvas(){this.coachingCanvas.nativeElement.style.width="100%",this.coachingCanvas.nativeElement.style.height="100%",this.coachingCanvas.nativeElement.width=this.coachingCanvas.nativeElement.offsetWidth,this.coachingCanvas.nativeElement.height=this.coachingCanvas.nativeElement.offsetHeight,this.canvasHeight=this.coachingCanvas.nativeElement.height,this.canvasWidth=this.coachingCanvas.nativeElement.width}displayTrace(e,n){e.lineCap="round",e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.currentPathType===ci.speed&&(this.activePoints=this.drawSpeedTrace(e)),this.currentPathType===ci.acceleration&&(this.activePoints=this.drawAccelerationTrace(e)),this.currentPathType===ci.endurance&&(this.activePoints=this.drawEnduranceTrace(e)),this.currentPathType===ci.power&&(this.activePoints=this.drawPowerTrace(e)),this.currentPathType===ci.focus&&(this.activePoints=this.drawFocusTrace(e)),this.currentPathType===ci.adaptability&&(this.activePoints=this.drawAdaptabilityTrace(e)),this.currentPathType===ci.special&&(this.activePoints=this.drawSpecialTrace(e)),e.strokeStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.globalCompositeOperation="source-atop";for(var r=0;r<this.currentEndPoint;r++)if(r<this.currentEndPoint-1)this.currentPathType===ci.power&&0===r?(e.beginPath(),e.ellipse(this.activePoints[0][0],this.activePoints[0][1],this.activePoints[0][2],this.activePoints[0][3],this.activePoints[0][4],this.activePoints[0][5],this.activePoints[0][6],!0),e.stroke()):(e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.activePoints[r+1][0],this.activePoints[r+1][1]),e.stroke());else if(this.currentPathType!==ci.power||0!==r&&2!==r)e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.currentX,this.currentY),e.stroke(),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,this.currentY-5,10,10);else{var a=0;2===r&&(a=3),e.fillStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.fillRect(this.activePoints[a][0]-this.activePoints[a][2]-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],this.currentX-(this.activePoints[a][0]-this.activePoints[a][2]),2*this.activePoints[a][3]+2),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],10,2*this.activePoints[a][3])}}pointerMove(e){if(this.isPointerDown&&null!=this.activePoints&&0!==this.activePoints.length){e.preventDefault(),e.stopPropagation();var n=e.clientX-this.canvasOffsetX,r=e.clientY-this.canvasOffsetY,a=.1*this.canvasWidth,o=.1*this.canvasHeight;0===this.currentEndPoint&&(this.currentX=this.activePoints[0][0],this.currentY=this.activePoints[0][1],this.currentPathType===ci.power&&(this.currentX=this.activePoints[0][0]-this.activePoints[0][2],this.currentY=this.activePoints[0][1]),this.currentEndPoint=1),this.currentPathType===ci.power&&(o=.25*this.canvasHeight);var s=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint-1][0]:this.activePoints[this.currentEndPoint][0],l=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint][0]:this.activePoints[this.currentEndPoint-1][0],c=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint-1][1]:this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint][1]:this.activePoints[this.currentEndPoint-1][1],d=s-a,m=l+a,v=c-o,b=u+o,y=!1,T=!1,k=!1,C=!1;if(this.activePoints[this.currentEndPoint-1][0]>this.activePoints[this.currentEndPoint][0]&&(y=!0),this.activePoints[this.currentEndPoint-1][1]>this.activePoints[this.currentEndPoint][1]&&(T=!0),this.activePoints[this.currentEndPoint-1][0]===this.activePoints[this.currentEndPoint][0]&&(k=!0),this.activePoints[this.currentEndPoint-1][1]===this.activePoints[this.currentEndPoint][1]&&(C=!0),this.currentPathType!==ci.power||1!==this.currentEndPoint&&3!==this.currentEndPoint?this.currentPathType===ci.power&&2===this.currentEndPoint&&(d=(s=this.activePoints[2][0])-a,m=(l=this.activePoints[1][0])+a,v=(c=this.activePoints[1][1])-o,b=(u=this.activePoints[2][1])+o,y=!0,T=!1,k=!1,C=!1):(1===this.currentEndPoint?(s=this.activePoints[this.currentEndPoint-1][0]-this.activePoints[this.currentEndPoint-1][2],l=this.activePoints[this.currentEndPoint-1][0]+this.activePoints[this.currentEndPoint-1][2],c=this.activePoints[this.currentEndPoint-1][1],u=this.activePoints[this.currentEndPoint-1][1]):(s=this.activePoints[this.currentEndPoint][0]-this.activePoints[this.currentEndPoint][2],l=this.activePoints[this.currentEndPoint][0]+this.activePoints[this.currentEndPoint][2],c=this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint][1]),d=s-a,m=l+a,v=c-o,b=u+o,y=!1,T=!1,k=!1,C=!0),n>=d&&n<=m&&r>=v&&r<=b){if(k||C)(!T&&r>this.currentY||T&&r<this.currentY)&&!C&&(this.currentY=r),(!y&&n>this.currentX||y&&n<this.currentX)&&!k&&(this.currentX=n);else if(!y&&n>this.currentX||y&&n<this.currentX){var R=(n-s)/(l-s);y&&(R=1-R),T&&(R=1-R);var Y=(u-c)*R+c;this.currentX=n,this.currentY=Y}var Q=.005*this.canvasWidth,ee=.005*this.canvasHeight;(!y&&this.currentX>=l-Q||y&&this.currentX<=s+Q)&&(!T&&this.currentY>=u-ee||T&&this.currentY<=c+ee)&&(this.currentX=y?s:l,this.currentY=T?c:u,this.currentEndPoint+=1,this.currentEndPoint>this.activePoints.length-1&&this.completePath())}}}pointerUp(){this.isPointerDown=!1}pointerDown(){this.isPointerDown=!0}drawSpeedTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([n,r]),a.push([this.canvasWidth-n,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-n,this.canvasHeight-r]),a.push([n,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}drawAdaptabilityTrace(e){var n=.1*this.canvasWidth,o=(this.canvasWidth-2*n)/14,s=(this.canvasHeight-.1*this.canvasHeight*2)/7,l=[];l.push([n,this.canvasHeight/2]),l.push([n+o,this.canvasHeight/2-s]),l.push([n+2*o,this.canvasHeight/2+s]),l.push([n+3*o,this.canvasHeight/2-2*s]),l.push([n+4*o,this.canvasHeight/2+2*s]),l.push([n+5*o,this.canvasHeight/2-3*s]),l.push([n+6*o,this.canvasHeight/2+3*s]),l.push([n+7*o,this.canvasHeight/2-4*s]),l.push([n+8*o,this.canvasHeight/2+3*s]),l.push([n+9*o,this.canvasHeight/2-3*s]),l.push([n+10*o,this.canvasHeight/2+2*s]),l.push([n+11*o,this.canvasHeight/2-2*s]),l.push([n+12*o,this.canvasHeight/2+s]),l.push([n+13*o,this.canvasHeight/2-s]),l.push([n+14*o,this.canvasHeight/2]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawPowerTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([this.canvasWidth/2,this.canvasHeight/4,this.canvasWidth/2-n,this.canvasHeight/4-r,0,0,Math.PI]),a.push([this.canvasWidth/2+(this.canvasWidth/2-n),this.canvasHeight/4]),a.push([this.canvasWidth/2-(this.canvasWidth/2-n),3*this.canvasHeight/4]),a.push([this.canvasWidth/2,3*this.canvasHeight/4,this.canvasWidth/2-n,this.canvasHeight/4-r,0,0,Math.PI]),e.beginPath(),e.ellipse(a[0][0],a[0][1],a[0][2],a[0][3],a[0][4],a[0][5],a[0][6],!0),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.ellipse(a[3][0],a[3][1],a[3][2],a[3][3],a[3][4],a[3][5],a[3][6],!1),e.stroke(),a}drawEnduranceTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=.15*this.canvasWidth,o=.15*this.canvasHeight,s=[];s.push([n,r]),s.push([this.canvasWidth-n,r]),s.push([this.canvasWidth-n,this.canvasHeight-r]),s.push([n,this.canvasHeight-r]),s.push([n,r+o]),s.push([this.canvasWidth-(n+a),r+o]),s.push([this.canvasWidth-(n+a),this.canvasHeight-(r+o)]),s.push([n+a,this.canvasHeight-(r+o)]),s.push([n+a,r+2*o]),s.push([this.canvasWidth-(n+2*a),r+2*o]),s.push([this.canvasWidth-(n+2*a),this.canvasHeight-(r+2*o)]),s.push([n+2*a,this.canvasHeight-(r+2*o)]),s.push([n+2*a,this.canvasHeight/2]),s.push([this.canvasWidth/2,this.canvasHeight/2]);for(var l=1;l<s.length;l++)e.beginPath(),e.moveTo(s[l-1][0],s[l-1][1]),e.lineTo(s[l][0],s[l][1]),e.stroke();return s}drawFocusTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];a.push([this.canvasWidth/3,r]),a.push([this.canvasWidth/3,this.canvasHeight/6]),a.push([n,this.canvasHeight/6]),a.push([this.canvasWidth/2,this.canvasHeight-r]),a.push([this.canvasWidth-n,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,r]);for(var o=1;o<a.length;o++)e.beginPath(),e.moveTo(a[o-1][0],a[o-1][1]),e.lineTo(a[o][0],a[o][1]),e.stroke();return a}drawAccelerationTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,o=this.canvasWidth-2*n,s=this.canvasHeight-2*r,l=[];l.push([n,r]),l.push([o/9+n,r]),l.push([o/9+n,2*s/9+r]),l.push([2*o/9+n,2*s/9+r]),l.push([2*o/9+n,4*s/9+r]),l.push([3*o/9+n,4*s/9+r]),l.push([3*o/9+n,6*s/9+r]),l.push([4*o/9+n,6*s/9+r]),l.push([4*o/9+n,8*s/9+r]),l.push([5*o/9+n,8*s/9+r]),l.push([5*o/9+n,6*s/9+r]),l.push([6*o/9+n,6*s/9+r]),l.push([6*o/9+n,4*s/9+r]),l.push([7*o/9+n,4*s/9+r]),l.push([7*o/9+n,2*s/9+r]),l.push([8*o/9+n,2*s/9+r]),l.push([8*o/9+n,r]),l.push([9*o/9+n,r]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawSpecialTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([n,r]),a.push([this.canvasWidth-n,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-n,this.canvasHeight-r]),a.push([n,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}getAnimalDistanceColor(e){var n="";return e===z.Flatland&&(n="#7d3f00"),e===z.Mountain&&(n="#1b630d"),e===z.Ocean&&(n="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===z.Tundra&&(n="#28809c"),e===z.Volcanic&&(n="#8f1a1a"),n}getAnimalRacerColor(e){var n="";return e===z.Flatland&&("night"===this.themeService.getActiveThemeName()?n="#E18B07":(this.themeService.getActiveThemeName(),n="#c66900")),e===z.Mountain&&("night"===this.themeService.getActiveThemeName()?n="#30b001":(this.themeService.getActiveThemeName(),n="#279113")),e===z.Ocean&&("night"===this.themeService.getActiveThemeName()?n="#9289CF":(this.themeService.getActiveThemeName(),n="#0000FF")),e===z.Tundra&&("night"===this.themeService.getActiveThemeName()?n="#019DDE":(this.themeService.getActiveThemeName(),n="#1CA1C9")),e===z.Volcanic&&("night"===this.themeService.getActiveThemeName()?n="#E56C6E":(this.themeService.getActiveThemeName(),n="#D92525")),n}getRandomPathType(e){var n=Object.keys(ci),r=[];n.forEach((o,s)=>{!isNaN(Number(o))&&6!==Number(o)&&r.push(Number(o))});var a=this.utilityService.getRandomInteger(0,r.length-1);return r[a]}completePath(){this.getNewPath=!0,this.currentEndPoint=0,this.activePoints=[],this.currentX=0,this.currentY=0,this.isPointerDown=!1,this.successfulAttemptStreak+=1,this.getReward(this.currentPathType),this.associatedAnimal.trackedAnimalStats.successfulCoachingAttempts+=1,this.currentPathType=this.getRandomPathType(this.currentPathType)}getReward(e){var n=1,r=this.globalService.globalVar.resources.find(l=>"Whistle"===l.name);if(null!=r&&r.amount>0){var a=this.globalService.globalVar.modifiers.find(l=>"whistleModifier"===l.text);null!=a&&(n=a.value)}var o=this.globalService.globalVar.resources.find(l=>"Golden Whistle"===l.name);if(null!=o&&o.amount>0){var s=this.globalService.globalVar.modifiers.find(l=>"goldenWhistleModifier"===l.text);null!=s&&(n=s.value)}e===ci.speed&&(this.associatedAnimal.currentStats.topSpeed+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" speed. ("+this.associatedAnimal.currentStats.topSpeed.toFixed(2)+")\n"),e===ci.acceleration&&(this.associatedAnimal.currentStats.acceleration+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" acceleration. ("+this.associatedAnimal.currentStats.acceleration.toFixed(2)+")\n"),e===ci.endurance&&(this.associatedAnimal.currentStats.endurance+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" endurance. ("+this.associatedAnimal.currentStats.endurance.toFixed(2)+")\n"),e===ci.power&&(this.associatedAnimal.currentStats.power+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" power. ("+this.associatedAnimal.currentStats.power.toFixed(2)+")\n"),e===ci.focus&&(this.associatedAnimal.currentStats.focus+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" focus. ("+this.associatedAnimal.currentStats.focus.toFixed(2)+")\n"),e===ci.adaptability&&(this.associatedAnimal.currentStats.adaptability+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" adaptability. ("+this.associatedAnimal.currentStats.adaptability.toFixed(2)+")\n"),this.successfulAttemptStreak%5==0&&(this.globalService.increaseAbilityXp(this.associatedAnimal,n),this.incrementalCoachingUpdates+=this.animalDisplayName+" also gains "+n+" XP towards their ability "+this.associatedAnimal.ability.name+"!\n"),this.globalService.calculateAnimalRacingStats(this.associatedAnimal)}returnToSelectedBarnView(){this.isCoachingEmitter.emit(!1)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(xi),P(Mt),P(El),P(Ri))},t.\u0275cmp=ft({type:t,selectors:[["app-coaching"]],viewQuery:function(e,n){if(1&e&&(_a(sH,5,Tn),_a(lH,5,Tn)),2&e){let r;yn(r=wn())&&(n.coachingCanvas=r.first),yn(r=wn())&&(n.drawCoaching=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{isCoachingEmitter:"isCoachingEmitter"},decls:22,vars:2,consts:[[1,"coachingView"],[1,"marginDiv"],["id","coachingInfo"],[1,"infoGridContainer"],[1,"info"],[1,"description"],[1,"back"],[3,"click"],[1,"drawingDiv"],[1,"updates"],["id","drawCoaching",1,"drawCoaching"],["drawCoaching",""],[1,"drawCoachingDiv"],["id","coachingCanvas",1,"coachingCanvas",3,"pointermove","pointerdown","pointerup"],["coachingCanvas",""],[1,"coachingUpdates",3,"scrollTop","innerHTML"],["scrollMe",""]],template:function(e,n){if(1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),g(6,"Coaching"),h(),f(7,"div",5),g(8," Show your animals the way by tracing each path. Successfully making it through will reward your partner with a stat point. "),h()(),f(9,"div",6)(10,"button",7),V("click",function(){return n.returnToSelectedBarnView()}),g(11,"Back"),h()()(),D(12,"hr"),h(),f(13,"div",8)(14,"div",9)(15,"div",10,11)(17,"div",12)(18,"canvas",13,14),V("pointermove",function(a){return n.pointerMove(a)})("pointerdown",function(){return n.pointerDown()})("pointerup",function(){return n.pointerUp()}),h()()(),D(20,"div",15,16),h()()()()),2&e){const r=st(21);p(20),_("scrollTop",r.scrollHeight)("innerHTML",n.incrementalCoachingUpdates.trim(),Bt)}},styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:76.5%}']}),t})();function uH(t,i){if(1&t){const e=fe();f(0,"div",12)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",4))}function dH(t,i){if(1&t){const e=fe();f(0,"div",13)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",5))}function hH(t,i){if(1&t){const e=fe();f(0,"div",14)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",6))}function fH(t,i){if(1&t&&(f(0,"div",3),x(1,uH,2,1,"div",9),x(2,dH,2,1,"div",10),x(3,hH,2,1,"div",11),h()),2&t){const e=w(2);p(1),_("ngIf",e.barnRow2IsUnlocked),p(1),_("ngIf",e.barnRow2IsUnlocked),p(1),_("ngIf",e.barnRow2IsUnlocked)}}function pH(t,i){if(1&t){const e=fe();f(0,"div",18)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",7))}function gH(t,i){if(1&t){const e=fe();f(0,"div",19)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",8))}function mH(t,i){if(1&t){const e=fe();f(0,"div",20)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",9))}function vH(t,i){if(1&t&&(f(0,"div",3),x(1,pH,2,1,"div",15),x(2,gH,2,1,"div",16),x(3,mH,2,1,"div",17),h()),2&t){const e=w(2);p(1),_("ngIf",e.barnRow3IsUnlocked),p(1),_("ngIf",e.barnRow3IsUnlocked),p(1),_("ngIf",e.barnRow3IsUnlocked)}}function bH(t,i){if(1&t){const e=fe();f(0,"div",24)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",10))}function _H(t,i){if(1&t){const e=fe();f(0,"div",25)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",11))}function yH(t,i){if(1&t){const e=fe();f(0,"div",26)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",12))}function wH(t,i){if(1&t&&(f(0,"div",3),x(1,bH,2,1,"div",21),x(2,_H,2,1,"div",22),x(3,yH,2,1,"div",23),h()),2&t){const e=w(2);p(1),_("ngIf",e.barnRow4IsUnlocked),p(1),_("ngIf",e.barnRow4IsUnlocked),p(1),_("ngIf",e.barnRow4IsUnlocked)}}function CH(t,i){if(1&t){const e=fe();f(0,"div",30)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",13))}function SH(t,i){if(1&t){const e=fe();f(0,"div",31)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",14))}function TH(t,i){if(1&t){const e=fe();f(0,"div",32)(1,"app-barn",5),V("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",15))}function DH(t,i){if(1&t&&(f(0,"div",3),x(1,CH,2,1,"div",27),x(2,SH,2,1,"div",28),x(3,TH,2,1,"div",29),h()),2&t){const e=w(2);p(1),_("ngIf",e.barnRow5IsUnlocked),p(1),_("ngIf",e.barnRow5IsUnlocked),p(1),_("ngIf",e.barnRow5IsUnlocked)}}function RH(t,i){if(1&t){const e=fe();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"app-barn",5),V("selectedBarn",function(r){return B(e),w().goToBarn(r)}),h()(),f(4,"div",6)(5,"app-barn",5),V("selectedBarn",function(r){return B(e),w().goToBarn(r)}),h()(),f(6,"div",7)(7,"app-barn",5),V("selectedBarn",function(r){return B(e),w().goToBarn(r)}),h()()(),x(8,fH,4,3,"div",8),x(9,vH,4,3,"div",8),x(10,wH,4,3,"div",8),x(11,DH,4,3,"div",8),h()}if(2&t){const e=w();p(2),_("ngClass",e.tutorialActive?"tutorialActive":""),p(1),_("barnNumber",1),p(2),_("barnNumber",2),p(2),_("barnNumber",3),p(1),_("ngIf",e.barnRow2IsUnlocked),p(1),_("ngIf",e.barnRow3IsUnlocked),p(1),_("ngIf",e.barnRow4IsUnlocked),p(1),_("ngIf",e.barnRow5IsUnlocked)}}function xH(t,i){if(1&t){const e=fe();f(0,"app-selected-barn",36),V("returnToBarnEmitter",function(){return B(e),w(2).goToBarn(0)})("isCoachingEmitter",function(r){return B(e),w(2).goToCoaching(r)}),h()}2&t&&_("selectedBarnNumber",w(2).selectedBarn)}function MH(t,i){if(1&t){const e=fe();f(0,"app-coaching",37),V("isCoachingEmitter",function(r){return B(e),w(2).goToCoaching(r)}),h()}2&t&&_("selectedBarnNumber",w(2).selectedBarn)}function kH(t,i){if(1&t&&(f(0,"div",33),x(1,xH,1,1,"app-selected-barn",34),x(2,MH,1,1,"app-coaching",35),h()),2&t){const e=w();p(1),_("ngIf",!e.isCoaching),p(1),_("ngIf",e.isCoaching)}}let AH=(()=>{class t{constructor(e,n,r){this.lookupService=e,this.componentCommunicationService=n,this.globalService=r,this.selectedBarn=0,this.isCoaching=!1,this.tutorialActive=!1,this.barnRow2IsUnlocked=!1,this.barnRow3IsUnlocked=!1,this.barnRow4IsUnlocked=!1,this.barnRow5IsUnlocked=!1}ngOnInit(){var e;this.componentCommunicationService.setNewView(vt.barn),this.barnRow2IsUnlocked=this.lookupService.isItemUnlocked("barnRow2"),this.barnRow3IsUnlocked=this.lookupService.isItemUnlocked("barnRow3"),this.barnRow4IsUnlocked=this.lookupService.isItemUnlocked("barnRow4"),this.barnRow5IsUnlocked=this.lookupService.isItemUnlocked("barnRow5"),!this.globalService.globalVar.tutorials.tutorialCompleted&&1===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(n=>n.type===L.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.tutorialActive=!0),this.subscription=this.componentCommunicationService.getBarnView().subscribe(n=>{this.selectedBarn=n})}goToBarn(e){this.selectedBarn=e,this.componentCommunicationService.setBarnView(vt.barn,e)}goToCoaching(e){this.isCoaching=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setBarnNumber(0)}}return t.\u0275fac=function(e){return new(e||t)(P(vn),P(li),P(Mt))},t.\u0275cmp=ft({type:t,selectors:[["app-barn-view"]],decls:2,vars:2,consts:[["class","gridContainer","id","barnViewDiv",4,"ngIf"],["class","selectedBarnDiv",4,"ngIf"],["id","barnViewDiv",1,"gridContainer"],[1,"barnRow"],[1,"barn1","barnDefault",3,"ngClass"],[3,"barnNumber","selectedBarn"],[1,"barn2","barnDefault"],[1,"barn3","barnDefault"],["class","barnRow",4,"ngIf"],["class","barn4 barnDefault",4,"ngIf"],["class","barn5 barnDefault",4,"ngIf"],["class","barn6 barnDefault",4,"ngIf"],[1,"barn4","barnDefault"],[1,"barn5","barnDefault"],[1,"barn6","barnDefault"],["class","barn7 barnDefault",4,"ngIf"],["class","barn8 barnDefault",4,"ngIf"],["class","barn9 barnDefault",4,"ngIf"],[1,"barn7","barnDefault"],[1,"barn8","barnDefault"],[1,"barn9","barnDefault"],["class","barn10 barnDefault",4,"ngIf"],["class","barn11 barnDefault",4,"ngIf"],["class","barn12 barnDefault",4,"ngIf"],[1,"barn10","barnDefault"],[1,"barn11","barnDefault"],[1,"barn12","barnDefault"],["class","barn13 barnDefault",4,"ngIf"],["class","barn14 barnDefault",4,"ngIf"],["class","barn15 barnDefault",4,"ngIf"],[1,"barn13","barnDefault"],[1,"barn14","barnDefault"],[1,"barn15","barnDefault"],[1,"selectedBarnDiv"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter"],[3,"selectedBarnNumber","isCoachingEmitter"]],template:function(e,n){1&e&&(x(0,RH,12,8,"div",0),x(1,kH,3,2,"div",1)),2&e&&(_("ngIf",0===n.selectedBarn),p(1),_("ngIf",n.selectedBarn>0))},directives:[sn,Zn,hU,oH,cH],styles:["#barnViewDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.selectedBarnDiv[_ngcontent-%COMP%]{height:100%}.barnDefault[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none;border-top:none;width:33.3333%;display:inline-block;vertical-align:middle;height:100%}.barnRow[_ngcontent-%COMP%]{height:25%;width:100%;display:inline-block}.lockedBarnRow[_ngcontent-%COMP%]{border:none!important}.tutorialActive[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-color:red}"]}),t})();function PH(t,i){1&t&&(f(0,"span",5),g(1," Primary "),h())}function EH(t,i){1&t&&(f(0,"span",5),g(1," Auto Run Free Race "),h())}function IH(t,i){1&t&&(f(0,"span",5),g(1," Event "),h())}function VH(t,i){1&t&&D(0,"br")}function OH(t,i){1&t&&(f(0,"span",8),g(1," / "),h())}function NH(t,i){if(1&t&&(f(0,"span",6),g(1),x(2,OH,2,0,"span",7),h()),2&t){const e=i.$implicit,n=i.index,r=w();_("ngClass",r.getColorClass(e)),p(1),K(" ",e.name,""),p(1),_("ngIf",n<r.deck.selectedAnimals.length-1)}}let V0=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n}ngOnInit(){if(0===this.deckNumber||null==this.deckNumber){var e=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=e&&(this.deck=e)}else{var n=this.globalService.globalVar.animalDecks.find(r=>r.deckNumber===this.deckNumber);null!=n&&(this.deck=n)}}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}goToDeckView(){this.componentCommunicationService.setNewView(vt.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(li))},t.\u0275cmp=ft({type:t,selectors:[["app-animal-deck"]],inputs:{deckNumber:"deckNumber"},decls:11,vars:6,consts:[[1,"relayTeam"],["class","primaryText keyword rightSpaced",4,"ngIf"],[4,"ngIf"],[1,"clickableText",3,"click"],["class","coloredText",3,"ngClass",4,"ngFor","ngForOf"],[1,"primaryText","keyword","rightSpaced"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div"),x(2,PH,2,0,"span",1),x(3,EH,2,0,"span",1),x(4,IH,2,0,"span",1),x(5,VH,1,0,"br",2),h(),f(6,"div")(7,"strong",3),V("click",function(){return n.goToDeckView()}),g(8),h(),g(9," - "),x(10,NH,3,3,"span",4),h()()),2&e&&(p(2),_("ngIf",n.deck.isPrimaryDeck&&void 0!==n.deckNumber&&n.deckNumber>0),p(1),_("ngIf",n.deck.autoRunFreeRace&&void 0!==n.deckNumber&&n.deckNumber>0),p(1),_("ngIf",n.deck.isEventDeck&&void 0!==n.deckNumber&&n.deckNumber>0),p(1),_("ngIf",n.deckNumber>0),p(3),at(n.deck.name),p(2),_("ngForOf",n.deck.selectedAnimals))},directives:[sn,ai,Zn],styles:[".primaryText[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary);padding-left:.5rem;padding-right:.5rem}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.relayTeam[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:100%;margin-left:.5rem}"]}),t})();function FH(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w();p(1),K("Race ",e.index+1," ")}}function BH(t,i){if(1&t&&(f(0,"p",6),g(1),Lt(2,"number"),f(3,"span",7),g(4),h()()),2&t){const e=i.$implicit,n=w();_("ngClass",n.getNoRacerClass(e)),p(1),ii(" ",on(2,5,e.distance,"1.2-2")," Meters of ",e.getTerrainName()," "),p(2),_("ngClass",n.getColorClass(e)),p(1),at(e.getCourseTypeName())}}function LH(t,i){1&t&&(f(0,"h6")(1,"em"),g(2,"Completed!"),h()())}function UH(t,i){1&t&&(f(0,"h6")(1,"em"),g(2,"Cannot Run"),h()())}function HH(t,i){1&t&&(f(0,"h6",8),g(1,"Start"),h())}function GH(t,i){1&t&&D(0,"div",9),2&t&&_("innerHTML",w().popoverText,Bt)}const zH=function(t){return{raceNotAllowed:t}};let O0=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n,this.missingRacers=[],this.busyRacers=[]}ngOnInit(){this.cannotRace=!1;var e=this.lookupService.getPrimaryDeck();this.race.raceLegs.forEach(n=>{if(null==e||0===e.selectedAnimals.length&&this.race.raceType!==Oe.trainingTrack)this.cannotRace=!0,this.missingRacers.push(n.courseType);else if((null==e?void 0:e.selectedAnimals.some(a=>a.raceCourseType===n.courseType))||this.race.raceType===Oe.trainingTrack){var r=null==e?void 0:e.selectedAnimals.find(a=>a.raceCourseType===n.courseType);void 0!==r&&!this.lookupService.canAnimalRace(r)&&(this.cannotRace=!0,this.busyRacers.push(r))}else this.cannotRace=!0,this.missingRacers.push(n.courseType)}),!this.cannotRace&&this.race.isCompleted&&(this.cannotRace=!0),this.race.localRaceType===Kt.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(this.cannotRace=!0),this.popoverText=this.cannotRace?this.getErrorPopoverText():this.getSuccessfulPopoverText()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getCourseTypeName(),mountainColor:"Mountain"===e.getCourseTypeName(),waterColor:"Ocean"===e.getCourseTypeName(),tundraColor:"Tundra"===e.getCourseTypeName(),volcanicColor:"Volcanic"===e.getCourseTypeName()}:{}}getNoRacerClass(e){return{noRacer:!this.hasRacerForLeg(e)}}hasRacerForLeg(e){var n=!1,r=this.lookupService.getPrimaryDeck();return null==r||0===r.selectedAnimals.length||(r.selectedAnimals.some(a=>a.raceCourseType===e.courseType)&&(n=!0),this.busyRacers.some(a=>a.raceCourseType===e.courseType)&&(n=!1)),n}getErrorPopoverText(){var e="You cannot do this race for the following reasons: \n\n";return this.missingRacers.forEach(n=>{e+="-Missing "+z[n]+" racer\n"}),this.busyRacers.forEach(n=>{e+="-"+n.name+" is active in another race\n"}),this.race.isCompleted&&(e+="-You've already completed this race."),this.race.localRaceType===Kt.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(e+="-You've met your limit of free races. More will be available soon."),e}getSuccessfulPopoverText(){var e="",n=1;return this.race.raceLegs.forEach(r=>{null!=r.terrain&&(e+=this.lookupService.getTerrainPopoverText(r.terrain,r)),n<this.race.raceLegs.length&&(e+="\n"),n+=1}),e}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(vn))},t.\u0275cmp=ft({type:t,selectors:[["app-race-description"]],inputs:{index:"index",race:"race",showStartText:"showStartText"},decls:10,vars:10,consts:[[1,"raceDescription"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngClass","ngbPopover","disablePopover"],[3,"ngClass",4,"ngFor","ngForOf"],["class","keyword",4,"ngIf"],["popContent",""],[3,"ngClass"],[1,"coloredText",3,"ngClass"],[1,"keyword"],[1,"popoverClass",3,"innerHTML"]],template:function(e,n){if(1&e&&(f(0,"div",0),x(1,FH,2,1,"span",1),D(2,"br"),f(3,"div",2),x(4,BH,5,8,"p",3),x(5,LH,3,0,"h6",1),x(6,UH,3,0,"h6",1),x(7,HH,2,0,"h6",4),h()(),x(8,GH,1,1,"ng-template",null,5,ct)),2&e){const r=st(9);p(1),_("ngIf",null!=n.index&&n.index>-1),p(2),_("ngClass",fi(8,zH,n.cannotRace))("ngbPopover",r)("disablePopover",""===n.popoverText),p(1),_("ngForOf",n.race.raceLegs),p(1),_("ngIf",n.showStartText&&n.race.isCompleted),p(1),_("ngIf",n.showStartText&&!n.race.isCompleted&&n.cannotRace),p(1),_("ngIf",n.showStartText&&!n.race.isCompleted&&!n.cannotRace)}},directives:[sn,Zn,Hr,ai],pipes:[fo],styles:[".raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}"]}),t})();function jH(t,i){if(1&t){const e=fe();f(0,"div",10),V("click",function(){const a=B(e).$implicit;return w().selectCircuitRace(a)}),D(1,"app-race-description",11),h()}if(2&t){const e=i.$implicit,n=i.index,r=w();jg("circuitRace",n+1,""),_("ngClass",r.tutorialActive?"tutorialActive":""),p(1),_("index",n)("race",e)("showStartText",!0)}}function $H(t,i){if(1&t){const e=fe();f(0,"div",12),V("click",function(){const a=B(e).$implicit;return w().selectLocalRace(a)}),D(1,"app-race-description",11),h()}if(2&t){const e=i.$implicit,n=i.index;jg("localRace",n+1,""),p(1),_("index",n)("race",e)("showStartText",!0)}}function WH(t,i){if(1&t&&(f(0,"div",13),g(1),h()),2&t){const e=w();p(1),K(" ",e.circuitRankUpDescription," ")}}let qH=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.utilityService=n,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new ot,this.tutorialActive=!1,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){var e=this;this.handleTutorial(),this.availableLocalRaces=[],this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace());var n=this.globalService.globalVar.circuitRank;this.circuitRank=this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank).toString():this.globalService.globalVar.circuitRank,this.circuitRankUpDescription=this.globalService.globalVar.circuitRankUpRewardDescription,this.availableCircuitRaces=this.globalService.globalVar.circuitRaces.filter(s=>s.requiredRank===n);var r=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);this.availableCircuitRaces.forEach(s=>{void 0!==r&&(s.raceLegs=this.globalService.reorganizeLegsByDeckOrder(s.raceLegs,r))}),this.totalFreeRaces=this.lookupService.getTotalFreeRacesPerPeriod();var a=900,o=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==o&&(a=o.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=Sr(function*(l){var c=a-e.globalService.globalVar.freeRaceTimePeriodCounter,u=Math.floor(c/60),d=c-60*u,m=Math.floor(d).toString();d<10&&(m=d<1||d>59?"00":String(m).padStart(2,"0")),e.getRacesRequiredForMedal(),e.freeRaceTimer=u+":"+m,e.freeRacesRemaining=e.lookupService.getRemainingFreeRacesPerPeriod()});return function(l){return s.apply(this,arguments)}}())}selectCircuitRace(e){var n=!0,r=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck);null!=r&&0!==r.selectedAnimals.length?(e.raceLegs.forEach(a=>{(null==r?void 0:r.selectedAnimals.some(s=>s.raceCourseType===a.courseType))||(n=!1);var o=null==r?void 0:r.selectedAnimals.find(s=>s.raceCourseType===a.courseType);void 0!==o&&!this.lookupService.canAnimalRace(o)&&(n=!1)}),e.isCompleted&&(n=!1),!this.globalService.globalVar.tutorials.tutorialCompleted&&4===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1),n&&this.raceSelected.emit(e)):n=!1}selectLocalRace(e){var n=!0,r=e.localRaceType===Kt.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(s=>s.raceCourseType===o.courseType))||(n=!1)}),r&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(n=!1),n&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):n=!1}getRacesRequiredForMedal(){var e=this.globalService.globalVar.resources.find(u=>"International Races"===u.name),n=this.globalService.globalVar.resources.find(u=>"National Races"===u.name);if(null!=e&&e.amount>0){var r=5,a=this.globalService.globalVar.modifiers.find(u=>"internationalRacesToMedalModifier"===u.text);null!=a&&(r=a.value),this.winsNeededUntilNextMedal=r-this.globalService.globalVar.nationalRaceCountdown}else if(null!=n&&n.amount>0){var o=12,s=this.globalService.globalVar.modifiers.find(u=>"nationalRacesToMedalModifier"===u.text);null!=s&&(o=s.value),this.winsNeededUntilNextMedal=o-this.globalService.globalVar.nationalRaceCountdown}else{var l=50,c=this.globalService.globalVar.modifiers.find(u=>"freeRacesToMedalModifier"===u.text);null!=c&&(l=c.value),this.winsNeededUntilNextMedal=l-this.globalService.globalVar.nationalRaceCountdown}}handleTutorial(){var e,n;!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&5===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(r=>r.type===L.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&9===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(n=this.globalService.globalVar.animals.find(r=>r.type===L.Hare))||void 0===n?void 0:n.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(Ri),P(vn),P(xi))},t.\u0275cmp=ft({type:t,selectors:[["app-circuit-view"]],outputs:{raceSelected:"raceSelected"},decls:28,vars:8,consts:[[1,"circuitViewDiv"],[1,"circuitRaceHeader","s4Heading"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"circuitRaceGrid"],[3,"ngClass","class","click",4,"ngFor","ngForOf"],["id","localRaceSection"],[1,"s4Heading"],[1,"localRaceGrid"],[3,"class","click",4,"ngFor","ngForOf"],["circuitRewardContent",""],[3,"ngClass","click"],[3,"index","race","showStartText"],[3,"click"],[1,"popoverClass"]],template:function(e,n){if(1&e&&(f(0,"div",0),D(1,"app-animal-deck")(2,"hr"),f(3,"div",1)(4,"span",2),g(5,"Circuit Rank "),f(6,"strong"),g(7),h()(),D(8,"br")(9,"br"),h(),f(10,"div",3),x(11,jH,2,7,"div",4),h(),D(12,"hr"),f(13,"div",5)(14,"span",6),g(15,"Free Races"),h(),D(16,"br"),f(17,"em"),g(18),h(),D(19,"br"),f(20,"em"),g(21),h(),D(22,"br")(23,"br"),f(24,"div",7),x(25,$H,2,6,"div",8),h()()(),x(26,WH,2,1,"ng-template",null,9,ct)),2&e){const r=st(27);p(4),_("ngbPopover",r),p(3),at(n.circuitRank),p(4),_("ngForOf",n.availableCircuitRaces),p(7),Gg(" ",n.freeRacesRemaining," of ",n.totalFreeRaces," remaining -- resets in ",n.freeRaceTimer,""),p(3),K("Wins needed until next medal: ",n.winsNeededUntilNextMedal,""),p(4),_("ngForOf",n.availableLocalRaces)}},directives:[V0,Hr,ai,Zn,O0],styles:['.circuitRaceHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.circuitRaceGrid[_ngcontent-%COMP%]{height:100%;display:grid;text-align:center;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"circuitRace1 circuitRace2 circuitRace3"}.circuitRace1[_ngcontent-%COMP%]{grid-area:circuitRace1}.circuitRace2[_ngcontent-%COMP%]{grid-area:circuitRace2}.circuitRace3[_ngcontent-%COMP%]{grid-area:circuitRace3}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.localRaceGrid[_ngcontent-%COMP%]{text-align:center;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"localRace1 localRace2 localRace3"}.localRace1[_ngcontent-%COMP%]{grid-area:localRace1}.localRace2[_ngcontent-%COMP%]{grid-area:localRace2}.localRace3[_ngcontent-%COMP%]{grid-area:localRace3}#localRaceSection[_ngcontent-%COMP%]{text-align:center}']}),t})();function XH(t,i){if(1&t){const e=fe();f(0,"div",9),V("click",function(){B(e);const r=w(2);return r.selectLocalRace(r.availableMonoRace)}),f(1,"span",10),g(2,"Mono Race "),f(3,"strong"),g(4),h()(),D(5,"br")(6,"app-race-description",11),h()}if(2&t){const e=w(2);p(4),at(e.monoRaceRank),p(2),_("race",e.availableMonoRace)("showStartText",!0)}}function YH(t,i){1&t&&(f(0,"div",12),g(1," Next Mono Race Available After Circuit Rank Up "),h())}function QH(t,i){if(1&t&&(f(0,"div",6),x(1,XH,7,3,"div",7),x(2,YH,2,0,"div",8),D(3,"hr"),h()),2&t){const e=w();p(1),_("ngIf",null!=e.availableMonoRace),p(1),_("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function KH(t,i){if(1&t){const e=fe();f(0,"div",16),V("click",function(){B(e);const r=w(2);return r.selectLocalRace(r.availableDuoRace)}),f(1,"span",10),g(2,"Duo Race "),f(3,"strong"),g(4),h()(),D(5,"br")(6,"app-race-description",11),h()}if(2&t){const e=w(2);p(4),at(e.duoRaceRank),p(2),_("race",e.availableDuoRace)("showStartText",!0)}}function ZH(t,i){1&t&&(f(0,"div",17),g(1," Next Duo Race Available After Circuit Rank Up "),h())}function JH(t,i){if(1&t&&(f(0,"div",13),x(1,KH,7,3,"div",14),x(2,ZH,2,0,"div",15),D(3,"hr"),h()),2&t){const e=w();p(1),_("ngIf",null!=e.availableDuoRace),p(1),_("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function e7(t,i){if(1&t){const e=fe();f(0,"div",21),V("click",function(){B(e);const r=w(2);return r.selectLocalRace(r.availableRainbowRace)}),f(1,"span",10),g(2,"Rainbow Race "),f(3,"strong"),g(4),h()(),D(5,"br")(6,"app-race-description",11),h()}if(2&t){const e=w(2);p(4),at(e.rainbowRaceRank),p(2),_("race",e.availableRainbowRace)("showStartText",!0)}}function t7(t,i){1&t&&(f(0,"div",22),g(1," Next Rainbow Race Available After Circuit Rank Up "),h())}function n7(t,i){if(1&t&&(f(0,"div",18),x(1,e7,7,3,"div",19),x(2,t7,2,0,"div",20),D(3,"hr"),h()),2&t){const e=w();p(1),_("ngIf",null!=e.availableRainbowRace),p(1),_("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}let i7=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.utilityService=n,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new ot,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){this.availableLocalRaces=[];var e=this.getNextAvailableSpecialRace(Kt.Mono);void 0!==e&&(this.availableMonoRace=e);var n=this.getNextAvailableSpecialRace(Kt.Duo);void 0!==n&&(this.availableDuoRace=n);var r=this.getNextAvailableSpecialRace(Kt.Rainbow);void 0!==r&&(this.availableRainbowRace=r);var a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&(null!=this.availableDuoRace&&(this.availableDuoRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableDuoRace.raceLegs,a)),null!=this.availableRainbowRace&&(this.availableRainbowRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableRainbowRace.raceLegs,a))),this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?(null!=this.availableMonoRace&&(this.monoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableMonoRace.requiredRank).toString()),null!=this.availableDuoRace&&(this.duoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableDuoRace.requiredRank).toString()),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableRainbowRace.requiredRank).toString())):(null!=this.availableMonoRace&&(this.monoRaceRank=this.availableMonoRace.requiredRank),null!=this.availableDuoRace&&(this.duoRaceRank=this.availableDuoRace.requiredRank),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.availableRainbowRace.requiredRank)),this.areMonoRacesAvailable=this.lookupService.isItemUnlocked("monoRace"),this.areDuoRacesAvailable=this.lookupService.isItemUnlocked("duoRace"),this.areRainbowRacesAvailable=this.lookupService.isItemUnlocked("rainbowRace")}getNextAvailableSpecialRace(e){return e===Kt.Mono&&this.globalService.GenerateMonoRaces(this.globalService.globalVar.monoRank),e===Kt.Duo&&this.globalService.GenerateDuoRaces(this.globalService.globalVar.duoRank),e===Kt.Rainbow&&this.globalService.GenerateRainbowRaces(this.globalService.globalVar.rainbowRank),this.globalService.globalVar.localRaces.find(n=>n.localRaceType===e)}sortByRankRequired(e,n){return e.requiredRank>n.requiredRank?1:n.requiredRank>e.requiredRank?-1:0}selectLocalRace(e){var n=!0,r=e.localRaceType===Kt.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(l=>l.raceCourseType===o.courseType))||(n=!1);var s=null==a?void 0:a.selectedAnimals.find(l=>l.raceCourseType===o.courseType);void 0!==s&&!this.lookupService.canAnimalRace(s)&&(n=!1)}),n&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):n=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(Ri),P(vn),P(xi))},t.\u0275cmp=ft({type:t,selectors:[["app-local-view"]],outputs:{raceSelected:"raceSelected"},decls:8,vars:3,consts:[[1,"localViewDiv"],[1,"localRaceHeader"],[1,"allLocalRaces"],["id","monoRaceSection",4,"ngIf"],["id","duoRaceSection",4,"ngIf"],["id","rainbowRaceSection",4,"ngIf"],["id","monoRaceSection"],["class","monoRace",3,"click",4,"ngIf"],["class","monoRace",4,"ngIf"],[1,"monoRace",3,"click"],[1,"s4Heading"],[3,"race","showStartText"],[1,"monoRace"],["id","duoRaceSection"],["class","duoRace",3,"click",4,"ngIf"],["class","duoRace",4,"ngIf"],[1,"duoRace",3,"click"],[1,"duoRace"],["id","rainbowRaceSection"],["class","rainbowRace",3,"click",4,"ngIf"],["class","rainbowRace",4,"ngIf"],[1,"rainbowRace",3,"click"],[1,"rainbowRace"]],template:function(e,n){1&e&&(f(0,"div",0),D(1,"div",1)(2,"app-animal-deck")(3,"hr"),f(4,"div",2),x(5,QH,4,2,"div",3),x(6,JH,4,2,"div",4),x(7,n7,4,2,"div",5),h()()),2&e&&(p(5),_("ngIf",n.areMonoRacesAvailable),p(1),_("ngIf",n.areDuoRacesAvailable),p(1),_("ngIf",n.areRainbowRacesAvailable))},directives:[V0,sn,O0],styles:[".allLocalRaces[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}"]}),t})();function r7(t,i){1&t&&(f(0,"div"),D(1,"br"),h())}function a7(t,i){1&t&&(f(0,"span",8),g(1," Will Start Race "),h())}function o7(t,i){if(1&t){const e=fe();f(0,"button",12),V("click",function(){B(e);const r=w(5).$implicit;return w().chooseToStartRace(r)}),g(1,"Choose To Start Race"),h()}}function s7(t,i){if(1&t&&(f(0,"span")(1,"em",7),g(2,"Resting..."),h()()),2&t){const e=w(6);p(1),_("ngbPopover",e.getRestingPopover())}}function l7(t,i){if(1&t&&(f(0,"span"),x(1,o7,2,0,"button",11),x(2,s7,3,1,"span",6),h()),2&t){const e=w(4).$implicit,n=w();p(1),_("ngIf",!n.isSetToRelay(e)&&n.canRelay(e)),p(1),_("ngIf",!n.isSetToRelay(e)&&!n.canRelay(e))}}function c7(t,i){if(1&t&&(f(0,"div"),x(1,a7,2,0,"span",10),x(2,l7,3,2,"span",6),h()),2&t){const e=w(3).$implicit,n=w();p(1),_("ngIf",n.isCurrentlyRacing(e)),p(1),_("ngIf",!n.isCurrentlyRacing(e))}}function u7(t,i){1&t&&(f(0,"span",8),g(1," Currently Racing "),h())}function d7(t,i){if(1&t){const e=fe();f(0,"button",14),V("click",function(){B(e);const r=w(4).$implicit;return w().pullFromRace(r)}),g(1," Pull From Race "),h()}}function h7(t,i){if(1&t){const e=fe();f(0,"button",12),V("click",function(){B(e);const r=w(5).$implicit;return w().relayAnimal(r)}),g(1,"Relay"),h()}}function f7(t,i){if(1&t&&(f(0,"span")(1,"em",7),g(2,"Resting..."),h()()),2&t){const e=w(6);p(1),_("ngbPopover",e.getRestingPopover())}}function p7(t,i){1&t&&(f(0,"span"),g(1,"Set To Relay"),h())}function g7(t,i){if(1&t&&(f(0,"span"),x(1,h7,2,0,"button",11),x(2,f7,3,1,"span",6),x(3,p7,2,0,"span",6),h()),2&t){const e=w(4).$implicit,n=w();p(1),_("ngIf",!n.isSetToRelay(e)&&n.canRelay(e)),p(1),_("ngIf",!n.isSetToRelay(e)&&!n.canRelay(e)),p(1),_("ngIf",n.isSetToRelay(e))}}function m7(t,i){if(1&t&&(f(0,"div"),x(1,u7,2,0,"span",10),x(2,d7,2,0,"button",13),x(3,g7,4,3,"span",6),h()),2&t){const e=w(3).$implicit,n=w();p(1),_("ngIf",n.isCurrentlyRacing(e)),p(1),_("ngIf",n.isCurrentlyRacing(e)),p(1),_("ngIf",!n.isCurrentlyRacing(e))}}function v7(t,i){if(1&t&&(f(0,"div"),x(1,c7,3,2,"div",6),x(2,m7,4,3,"div",6),h()),2&t){const e=w(3);p(1),_("ngIf",!e.enteredEvent()),p(1),_("ngIf",e.enteredEvent())}}function b7(t,i){if(1&t&&(f(0,"div")(1,"em"),g(2),h()()),2&t){const e=w(3);p(2),K("Breed Level ",e.breedLevelRequired," Required")}}function _7(t,i){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"div")(3,"span",7)(4,"span",8),g(5,"Morale:"),h(),g(6),Lt(7,"number"),h(),D(8,"br"),f(9,"span",7)(10,"span",8),g(11,"Energy:"),h(),g(12),Lt(13,"number"),h(),D(14,"br"),x(15,r7,2,0,"div",6),D(16,"div",9),h(),D(17,"br")(18,"br"),x(19,v7,3,2,"div",6),x(20,b7,3,1,"div",6),h()),2&t){const e=w().$implicit,n=w();p(3),_("ngbPopover",n.getMoralePopover(e)),p(3),K(" ",on(7,8,n.getMorale(e),"1.2-2"),"%"),p(3),_("ngbPopover",n.getEnergyPopover(e)),p(3),K(" ",on(13,11,n.getExhaustion(e),"1.2-2"),"%"),p(3),_("ngIf",""===n.getUseCountInformation(e)),p(1),_("innerHTML",n.getUseCountInformation(e),Bt),p(3),_("ngIf",n.canEnterGrandPrix(e)),p(1),_("ngIf",!n.canEnterGrandPrix(e))}}function y7(t,i){if(1&t&&(f(0,"div",4)(1,"span",5),g(2),h(),x(3,_7,21,14,"div",6),h()),2&t){const e=i.$implicit,n=w();p(1),_("ngClass",n.getColorClass(e)),p(1),at(e.name),p(1),_("ngIf",n.hasEventStarted()&&!n.eventCompleted())}}let w7=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.componentCommunicationService=n,this.lookupService=r,this.utilityService=a,this.organizedAnimals=[]}ngOnInit(){var e=this.globalService.globalVar.animalDecks.find(o=>o.isEventDeck);if(void 0!==e&&(this.deck=e),null!=this.deck)if(this.deck.isCourseOrderActive){for(var n=0;n<this.deck.selectedAnimals.length;n++)if(this.deck.courseTypeOrder.length>n){var r=this.deck.courseTypeOrder[n],a=this.deck.selectedAnimals.find(o=>o.raceCourseType===r);void 0!==a&&this.organizedAnimals.push(a)}}else this.deck.selectedAnimals.forEach(o=>{this.organizedAnimals.push(o)});this.breedLevelRequired=this.getBreedLevelRequired()}getMorale(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==n?0:100*n.morale}getExhaustion(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==n?0:100*n.exhaustionStatReduction}eventCompleted(){return this.globalService.globalVar.eventRaceData.isGrandPrixCompleted}hasEventStarted(){return!(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime)}enteredEvent(){return this.globalService.globalVar.eventRaceData.isRunning}canEnterGrandPrix(e){var n=!1,r=this.getBreedLevelRequired(),a=this.globalService.globalVar.animals.find(o=>o.type===e.type);return void 0!==a&&a.breedLevel>=r&&(n=!0),n}getBreedLevelRequired(){var e=50,n=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}chooseToStartRace(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==n){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==n?void 0:n.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isCurrentlyRacing=!1}),n.isCurrentlyRacing=!0)}}}isCurrentlyRacing(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.isCurrentlyRacing}isSetToRelay(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.isSetToRelay}canRelay(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.exhaustionStatReduction>.5}relayAnimal(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==n){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==n?void 0:n.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isSetToRelay=!1}),n.isSetToRelay=!0)}}}pullFromRace(e){this.globalService.stopGrandPrixRace()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}getRestingPopover(){return"Racer must be above 50% energy to race"}getMoralePopover(e){var n="",r=this.getMorale(e);if(void 0!==r){var a=.9,o=this.globalService.globalVar.modifiers.find(l=>"exhaustionStatLossModifier"===l.text);void 0!==o&&(a=o.value);var s=1-a;a=1-(s*=1/(r/100)),n="Your current Morale is "+r.toFixed(2)+"%. Your energy will reduce by "+(100*(1-a)).toFixed(2)+"% every time you run out of stamina."}return n}getEnergyPopover(e){return""+"Your current Energy is "+this.getExhaustion(e).toFixed(2)+"%. Your stats are reduced to this amount while racing in the grand prix."}getUseCountInformation(e){var n="",r=this.globalService.globalVar.eventRaceData.eventAbilityData,a=this.globalService.globalVar.animals.find(o=>o.type===e.type);if(null!=a)return a.type===L.Horse&&"Inspiration"===a.ability.name&&(n+="Inspiration Relay Count: "+r.inspirationUseCount),a.type===L.Cheetah&&"On The Hunt"===a.ability.name&&(n+="On The Hunt Use Count: "+r.onTheHuntUseCount+" / "+r.onTheHuntUseCap),a.type===L.Goat&&("Sure-footed"===a.ability.name&&(n+="Sure-footed Use Count: "+r.sureFootedUseCount+" / "+r.sureFootedUseCap),"Deep Breathing"===a.ability.name&&(n+="Deep Breathing Relay Count: "+r.deepBreathingUseCount+" / "+r.deepBreathingUseCap)),a.type===L.Gecko&&"Night Vision"===a.ability.name&&(n+="Night Vision Use Count: "+r.nightVisionUseCount+" / "+r.nightVisionUseCap),a.type===L.Dolphin&&("Flowing Current"===a.ability.name&&(n+="Flowing Current Relay Count: "+r.flowingCurrentUseCount),"Navigator"===a.ability.name&&(n+="Navigator Relay Count: "+r.navigatorUseCount)),a.type===L.Octopus&&"Big Brain"===a.ability.name&&(n+="Big Brain Relay Count: "+r.bigBrainUseCount+" / "+r.bigBrainUseCap),a.type===L.Penguin&&"Quick Toboggan"===a.ability.name&&(n+="Quick Toboggan Use Count: "+r.quickTobogganUseCount+" / "+r.quickTobogganUseCap),a.type===L.Caribou&&("Herd Mentality"===a.ability.name&&(n+="Herd Mentality Relay Count: "+r.herdMentalityUseCount+" / "+r.herdMentalityUseCap),"Special Delivery"===a.ability.name&&(n+="Special Delivery Relay Count: "+r.specialDeliveryUseCount+" / "+r.specialDeliveryUseCap)),this.utilityService.getSanitizedHtml(n)}goToDeckView(){this.componentCommunicationService.setNewView(vt.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(li),P(vn),P(Ri))},t.\u0275cmp=ft({type:t,selectors:[["app-event-animal-deck"]],decls:7,vars:2,consts:[[1,"deckName"],[1,"clickableText",3,"click"],[1,"flex"],["class","eventAnimal",4,"ngFor","ngForOf"],[1,"eventAnimal"],[1,"coloredText",3,"ngClass"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"keyword"],[3,"innerHTML"],["class","keyword",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","keyword",3,"click",4,"ngIf"],[1,"keyword",3,"click"]],template:function(e,n){1&e&&(f(0,"div")(1,"div",0)(2,"strong",1),V("click",function(){return n.goToDeckView()}),g(3),h()(),D(4,"br"),f(5,"div",2),x(6,y7,4,3,"div",3),h()()),2&e&&(p(3),at(n.deck.name),p(3),_("ngForOf",n.organizedAnimals))},directives:[ai,Zn,sn,Hr],pipes:[fo],styles:[".flex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.deckName[_ngcontent-%COMP%]{text-align:center}.eventAnimal[_ngcontent-%COMP%]{flex:1}"]}),t})();const C7=["loadingModal"];function S7(t,i){1&t&&(f(0,"p",6),g(1,"The Grand Prix is currently under construction. "),D(2,"br")(3,"br"),f(4,"em"),g(5,"I'm fixing a few bugs and making some improvements related to the Grand Prix but it will reopen soon!"),h()())}function T7(t,i){if(1&t){const e=fe();f(0,"div",14),V("click",function(){B(e);const r=w(3),a=st(9);return r.selectEventRace(a)}),g(1),D(2,"br"),h()}if(2&t){const e=w(3);_("ngbPopover",st(7)),p(1),K("Bonus Time: ",e.bonusTime," ")}}function D7(t,i){1&t&&(f(0,"h6",20),g(1,"View Race"),h())}function R7(t,i){1&t&&(f(0,"h6",24)(1,"em"),g(2,"Please Wait -- Offline Time Is Calculating"),h()())}function x7(t,i){1&t&&(f(0,"h6",20),g(1,"Start"),h())}function M7(t,i){1&t&&(f(0,"h6")(1,"em"),g(2,"Completed!"),h()())}function k7(t,i){if(1&t&&(f(0,"div",25),g(1),h()),2&t){const e=w(4);p(1),K(" ",e.popoverText," ")}}const A7=function(t){return{raceNotAllowed:t}};function P7(t,i){if(1&t){const e=fe();f(0,"div",15)(1,"div")(2,"span",16),g(3,"Grand Prix "),f(4,"strong"),g(5),h()(),D(6,"br"),f(7,"span",17),V("click",function(){B(e);const r=w(3),a=st(3);return r.openRewardsModal(a)}),g(8),h(),D(9,"br")(10,"br"),f(11,"div",18)(12,"div",19),V("click",function(){B(e);const r=w(3),a=st(9);return r.selectEventRace(a)}),f(13,"span")(14,"span",20),g(15,"Forecast:"),h(),g(16),h(),D(17,"br"),g(18),Lt(19,"number"),D(20,"br"),x(21,D7,2,0,"h6",21),x(22,R7,3,0,"h6",22),x(23,x7,2,0,"h6",21),x(24,M7,3,0,"h6",9),h()(),x(25,k7,2,1,"ng-template",null,23,ct),h()()}if(2&t){const e=st(26),n=w(3);p(5),at(n.grandPrixData.rank),p(3),ii("",n.globalService.globalVar.eventRaceData.remainingRewards," / ",n.globalService.globalVar.eventRaceData.totalRewards," rewards remaining"),p(4),_("ngClass",fi(15,A7,n.grandPrixData.isCatchingUp))("ngbPopover",e)("disablePopover",""===n.popoverText),p(4),K(" ",void 0===n.grandPrixData.weatherCluster?"Unknown":n.lookupService.getWeatherClusterFromEnum(n.grandPrixData.weatherCluster),""),p(2),K(" ",on(19,12,n.remainingMeters,"1.")," Meters Remaining "),p(3),_("ngIf",n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted&&!n.grandPrixData.isCatchingUp),p(1),_("ngIf",n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted&&n.grandPrixData.isCatchingUp),p(1),_("ngIf",!n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted),p(1),_("ngIf",!n.grandPrixData.isRunning&&n.grandPrixData.isGrandPrixCompleted)}}function E7(t,i){1&t&&(f(0,"div",28),g(1," None "),h())}function I7(t,i){if(1&t&&(f(0,"td")(1,"span",20),g(2),h(),g(3),h()),2&t){const e=i.$implicit;p(2),at(e.name),p(1),K(": ",e.amount,"")}}function V7(t,i){if(1&t&&(f(0,"tr"),x(1,I7,4,2,"td",29),h()),2&t){const e=i.$implicit;p(1),_("ngForOf",e)}}function O7(t,i){if(1&t&&(f(0,"div",28)(1,"table"),x(2,V7,2,1,"tr",29),h()()),2&t){const e=w(4);p(2),_("ngForOf",e.rewardRows)}}function N7(t,i){if(1&t&&(f(0,"div"),D(1,"br")(2,"br"),f(3,"div",26)(4,"span",16),g(5,"Previous Grand Prix Rewards"),h(),x(6,E7,2,0,"div",27),x(7,O7,3,1,"div",27),h()()),2&t){const e=w(3);p(6),_("ngIf",0===e.previousRaceRewardList.length),p(1),_("ngIf",e.previousRaceRewardList.length>0)}}function F7(t,i){if(1&t){const e=fe();f(0,"div")(1,"div"),g(2),D(3,"br"),x(4,T7,3,2,"div",10),f(5,"button",11),V("click",function(){B(e);const r=w(2),a=st(5);return r.openInfoModal(a)}),g(6,"Grand Prix Info"),h(),f(7,"button",12),V("click",function(){return B(e),w(2).goToTokenShop()}),g(8,"Token Shop"),h(),D(9,"br")(10,"br"),h(),D(11,"br"),x(12,P7,27,17,"div",13),D(13,"br"),f(14,"div"),D(15,"app-event-animal-deck"),h(),x(16,N7,8,2,"div",9),h()}if(2&t){const e=w(2);p(2),ii(" ",e.eventRaceNotice," ",e.eventRaceTimer," "),p(2),_("ngIf",""!==e.bonusTime),p(8),_("ngIf",e.isEventRaceAvailable),p(4),_("ngIf",null!=e.previousRaceRewardList&&!e.isEventRaceAvailable)}}function B7(t,i){1&t&&(f(0,"div"),g(1," Nothing here yet, but maybe as you climb the circuit ranks you might be invited to a new type of race. "),h())}function L7(t,i){if(1&t&&(f(0,"div",7),D(1,"div",8),x(2,F7,17,5,"div",9),x(3,B7,2,0,"div",9),h()),2&t){const e=w();p(2),_("ngIf",e.grandPrixUnlocked),p(1),_("ngIf",!e.grandPrixUnlocked)}}function U7(t,i){if(1&t){const e=fe();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Grand Prix Rewards"),h(),f(4,"button",33),V("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",34)(7,"div"),g(8),Lt(9,"number"),Lt(10,"number"),D(11,"br")(12,"br"),g(13),Lt(14,"number"),Lt(15,"number"),D(16,"br")(17,"br")(18,"div",35)(19,"div",35)(20,"div",35),h()(),f(21,"div",36)(22,"button",37),V("click",function(){return B(e).$implicit.dismiss()}),g(23,"Close"),h()()()}if(2&t){const e=w();p(8),zg(" The further you go in the Grand Prix invitational, the more rewards you'll receive. Every ",on(9,9,e.coinRewardInterval,"1.")," meters, you'll receive ",e.coinRewardAmount," Coins. Every ",on(10,12,e.renownRewardInterval,"1.")," meters, you'll receive ",e.renownRewardAmount," Renown. Also, you'll be able to obtain rare tokens that can be spent on rare upgrades. "),p(5),ii(" Distance Covered: ",on(14,15,(e.grandPrixData.totalDistance-e.remainingMeters).toFixed(0),"1.")," / ",on(15,18,e.grandPrixData.totalDistance,"1.")," "),p(5),_("innerHTML",e.getGrandPrixCoinRewardsPopover(),Bt),p(1),_("innerHTML",e.getGrandPrixRenownRewardsPopover(),Bt),p(1),_("innerHTML",e.getGrandPrixTokenRewardsPopover(),Bt)}}function H7(t,i){if(1&t){const e=fe();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Grand Prix Info"),h(),f(4,"button",33),V("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",34)(7,"div"),g(8," You've been invited to the "),f(9,"span",20),g(10,"Grand Prix"),h(),g(11," invitational, which is a marathon style race that runs for 51 hours twice a week. You can start the race at any time during the start and stop point of the Grand Prix. "),f(12,"b"),g(13,"It will run on its own in the background -- you don't have to watch your animals race for it to run."),h(),g(14," You have the option to view the race as desired by clicking the race. The weekly start and end times are: "),D(15,"br")(16,"br"),f(17,"span",20),g(18,"Weekday Marathon"),h(),g(19),D(20,"br"),f(21,"span",20),g(22,"Weekend Marathon"),h(),g(23),D(24,"br")(25,"br"),g(26),D(27,"br")(28,"br"),f(29,"span",20),g(30,"Morale"),h(),g(31," - This affects how much your stats reduce when running out of stamina. By default, your stats will reduce by 10% while Morale is at 100%. Morale can range from 50% to 300%. "),D(32,"br"),f(33,"span",20),g(34,"Energy"),h(),g(35," - The percent your stats are currently at from their maximum. This is increased slightly over time while a racer is not racing. "),D(36,"br"),f(37,"span",20),g(38,"*Note that these values have no impact on any race other than the Grand Prix."),h(),D(39,"br")(40,"br"),g(41," Maintain your morale and energy to get the most out of your racing animals. You can Relay to another animal in your event deck at any point, although the Relay will only occur after the completion of the current race leg. "),D(42,"br")(43,"br"),g(44," Race as far as you can to gain "),f(45,"span",38),g(46,"Coins"),h(),g(47,", "),f(48,"span",39),g(49,"Renown"),h(),g(50,", and the unique resource "),f(51,"span",38),g(52,"Tokens"),h(),g(53,". Click '"),f(54,"em"),g(55,"Rewards"),h(),g(56,"' to track your progress on gaining rewards. "),h()(),f(57,"div",36)(58,"button",37),V("click",function(){return B(e).$implicit.dismiss()}),g(59,"Close"),h()()()}if(2&t){const e=w();p(19),K(" - ",e.weekDayGrandPrixTimeSpan," "),p(4),K(" - ",e.weekEndGrandPrixTimeSpan," "),p(3),K(" To run in the Grand Prix, animals must be at least Breed Level ",e.requiredBreedLevel,". The animals in your event deck will be shown below along with their current morale and energy. ")}}function G7(t,i){1&t&&(f(0,"div",25),g(1," Bonus Time is accrued from effects that delay competitors or extend the length of a race. Once the Grand Prix event time ends, any bonus time will continue to play out before your entry to the Grand Prix ends. "),h())}function z7(t,i){1&t&&(f(0,"div",25),g(1," Loading... "),h())}let j7=(()=>{class t{constructor(e,n,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.raceLogicService=a,this.sanitizer=o,this.modalService=s,this.componentCommunicationService=l,this.utilityService=c,this.raceSelected=new ot,this.popoverText="",this.cannotRace=!1,this.eventRaceReleased=!1,this.eventRaceNotice="",this.eventRaceTimer="",this.bonusTime="",this.grandPrixUnlocked=!1}ngOnInit(){var e=this;this.grandPrixData=this.globalService.globalVar.eventRaceData,this.previousRaceRewardList=this.globalService.globalVar.previousEventRewards,this.grandPrixUnlocked=this.lookupService.isItemUnlocked("grandPrix"),this.weekDayGrandPrixTimeSpan=this.lookupService.getWeekDayGrandPrixTimeSpan(),this.weekEndGrandPrixTimeSpan=this.lookupService.getWeekEndGrandPrixTimeSpan(),this.requiredBreedLevel=this.lookupService.getBreedLevelRequiredForGrandPrix(),this.popoverText=this.getForecastPopoverText();var n=this.globalService.getGrandPrixRacingAnimal();if(!this.globalService.globalVar.eventRaceData.animalData.some(c=>c.isCurrentlyRacing)){var r=this.globalService.globalVar.eventRaceData.animalData.find(c=>c.associatedAnimalType==n.type);void 0!==r&&(r.isCurrentlyRacing=!0)}var a=this.globalService.globalVar.modifiers.find(c=>"grandPrixCoinRewardModifier"===c.text);null!=a&&(this.coinRewardAmount=a.value);var o=this.globalService.globalVar.modifiers.find(c=>"grandPrixRenownRewardModifier"===c.text);null!=o&&(this.renownRewardAmount=o.value);var s=this.globalService.globalVar.modifiers.find(c=>"metersPerCoinsGrandPrixModifier"===c.text);null!=s&&(this.coinRewardInterval=s.value);var l=this.globalService.globalVar.modifiers.find(c=>"metersPerRenownGrandPrixModifier"===c.text);null!=l&&(this.renownRewardInterval=l.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var c=Sr(function*(u){e.setupEventTime(),e.grandPrixData=e.globalService.globalVar.eventRaceData,e.previousRaceRewardList=e.globalService.globalVar.previousEventRewards,e.previousRaceRewardList.length>0&&e.setupDisplayRewards(),e.remainingMeters=e.globalService.globalVar.eventRaceData.totalDistance-e.globalService.globalVar.eventRaceData.distanceCovered,null!=e.globalService.globalVar.eventRaceData&&null!=e.globalService.globalVar.eventRaceData.currentRaceSegment&&(e.grandPrixData.isCatchingUp=e.globalService.globalVar.eventRaceData.segmentTimeCounter>=e.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60*2)});return function(u){return c.apply(this,arguments)}}())}selectEventRace(e){if(!1===this.globalService.globalVar.eventRaceData.isRunning){var n=this.globalService.getGrandPrixRacingAnimal();if(null==n.type)return void alert("None of the animals in your event deck are capable of entering the Grand Prix. Swap to new animals or make adjustments to your existing animals to meet the criteria.");var r=this.globalService.shouldShowSlowSegmentWarning(n);if(!this.lookupService.slowSegmentWarning(r))return;this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(n),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(n),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}!this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&!this.globalService.globalVar.eventRaceData.isCatchingUp&&this.raceSelected.emit(this.globalService.globalVar.eventRaceData.currentRaceSegment)}setupEventTime(){var e=this.globalService.getTimeToEventRace();if(e>0){this.isEventRaceAvailable=this.globalService.globalVar.eventRaceData.bonusTime>0,this.eventRaceNotice="Next Grand Prix available in";var a=e-60*(n=Math.floor(e/3600))*60-60*(r=Math.floor(e/60-60*n)),o=Math.floor(a).toString(),s=n.toString(),l=r.toString();n<10&&(s=n<1||n>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}else{var n,r,c=this.globalService.getRemainingEventRaceTime();if(c>0)this.eventRaceNotice="Grand Prix ends in",this.isEventRaceAvailable=!0,a=c-60*(n=Math.floor(c/3600))*60-60*(r=Math.floor(c/60-60*n)),s=n.toString(),l=r.toString(),o=Math.floor(a).toString(),n<10&&(s=n<1||n>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}this.bonusTime=this.globalService.globalVar.eventRaceData.bonusTime>0?this.utilityService.convertSecondsToHHMMSS(this.globalService.globalVar.eventRaceData.bonusTime):""}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openInfoModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openLoadingModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}getGrandPrixRenownRewardsPopover(){var r,a=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return r=this.globalService.globalVar.eventRaceData.totalDistance/(this.renownRewardInterval*a),Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/(this.renownRewardInterval*a))*this.renownRewardAmount+"/"+r*this.renownRewardAmount+" Renown obtained"}getGrandPrixCoinRewardsPopover(){var r,a=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return r=this.globalService.globalVar.eventRaceData.totalDistance/(this.coinRewardInterval*a),Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/(this.coinRewardInterval*a))*this.coinRewardAmount+"/"+r*this.coinRewardAmount+" Coins obtained"}getGrandPrixTokenRewardsPopover(){var e="",n=this.lookupService.getGrandPrixTokenRewards(),r=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),a=5e7,o=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken1MeterModifier"===C.text);null!=o&&(a=o.value);var s=n[0],l=5e7,c=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken2MeterModifier"===C.text);null!=c&&(l=c.value);var u=n[1],d=5e7,m=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken3MeterModifier"===C.text);null!=m&&(d=m.value);var v=n[2],b=5e7,y=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken4MeterModifier"===C.text);null!=y&&(b=y.value);var T=n[3],k=this.globalService.globalVar.eventRaceData.distanceCovered;return e+=k>=a*r?"<span class='crossed'>"+s+"</span>\n":"<span>"+s+"</span>\n",e+=k>=l*r?"<span class='crossed'>"+u+"</span>\n":"<span>"+u+"</span>\n",e+=k>=d*r?"<span class='crossed'>"+v+"</span>\n":"<span>"+v+"</span>\n",this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(e+=k>=b*r?"<span class='crossed'>"+T+"</span>\n":"<span>"+T+"</span>\n"))}getForecastPopoverText(){return this.lookupService.getWeatherClusterDescription(this.grandPrixData.weatherCluster)}goToTokenShop(){this.componentCommunicationService.setShopView(vt.shop,Wa.token)}setupDisplayRewards(){if(this.rewardCells=[],this.rewardRows=[],null!=this.previousRaceRewardList){for(var n=1;n<=this.previousRaceRewardList.length;n++)this.rewardCells.push({name:this.previousRaceRewardList[n-1].name,amount:this.previousRaceRewardList[n-1].amount}),n%4==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(xi),P(vn),P(a0),P(Fo),P(_o),P(li),P(Ri))},t.\u0275cmp=ft({type:t,selectors:[["app-event-view"]],viewQuery:function(e,n){if(1&e&&_a(C7,7),2&e){let r;yn(r=wn())&&(n.loadingContent=r.first)}},outputs:{raceSelected:"raceSelected"},decls:10,vars:2,consts:[["class","centered",4,"ngIf"],["class","eventViewDiv centered",4,"ngIf"],["grandPrixRewardModal",""],["grandPrixInfoModal",""],["bonusTimeContent",""],["loadingModal",""],[1,"centered"],[1,"eventViewDiv","centered"],[1,"eventRaceHeader"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass","class","clickableText",3,"ngbPopover","click",4,"ngIf"],["type","button",1,"rightSpaced",3,"click"],[3,"click"],["id","grandPrix",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngbPopover","click"],["id","grandPrix"],[1,"s4Heading"],[1,"helpText",3,"click"],[1,"raceDescription"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText","eventRaceDescription",3,"ngClass","ngbPopover","disablePopover","click"],[1,"keyword"],["class","keyword",4,"ngIf"],["class","raceCatchingUp",4,"ngIf"],["popContent",""],[1,"raceCatchingUp"],[1,"popoverClass"],[1,"results"],["class","rewards",4,"ngIf"],[1,"rewards"],[4,"ngFor","ngForOf"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"],[1,"resourceKeyword"],[1,"progressionKeyword"]],template:function(e,n){1&e&&(x(0,S7,6,0,"p",0),x(1,L7,4,2,"div",1),x(2,U7,24,21,"ng-template",null,2,ct),x(4,H7,60,3,"ng-template",null,3,ct),x(6,G7,2,0,"ng-template",null,4,ct),x(8,z7,2,0,"ng-template",null,5,ct)),2&e&&(_("ngIf",!n.eventRaceReleased),p(1),_("ngIf",n.eventRaceReleased))},directives:[sn,Hr,Zn,w7,ai],pipes:[fo],styles:[".eventRace[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.centered[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.eventRaceDescription[_ngcontent-%COMP%]{width:40%;margin:auto}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.raceCatchingUp[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}table[_ngcontent-%COMP%]{table-layout:fixed;width:60%;height:100%;text-align:center;margin-left:auto;margin-right:auto}"]}),t})();function $7(t,i){if(1&t){const e=fe();f(0,"div",14)(1,"div",15)(2,"span",9),g(3,"Intermediate Track"),h(),D(4,"br"),f(5,"h6",10),V("click",function(){B(e);const r=w(2),a=st(9);return r.openRewardsModal(a)}),g(6),h(),D(7,"br"),f(8,"app-race-description",11),V("click",function(){B(e);const r=w(2);return r.selectTrackRace(r.intermediateTrackRace)}),h()(),D(9,"hr"),h()}if(2&t){const e=w(2);p(6),ii("",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),p(2),_("race",e.intermediateTrackRace)("showStartText",!0)}}function W7(t,i){if(1&t){const e=fe();f(0,"div",16)(1,"div",17)(2,"span",9),g(3,"Master Track"),h(),D(4,"br"),f(5,"h6",10),V("click",function(){B(e);const r=w(2),a=st(11);return r.openRewardsModal(a)}),g(6),h(),D(7,"br"),f(8,"app-race-description",11),V("click",function(){B(e);const r=w(2);return r.selectTrackRace(r.masterTrackRace)}),h()(),D(9,"hr"),h()}if(2&t){const e=w(2);p(6),ii("",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),p(2),_("race",e.masterTrackRace)("showStartText",!0)}}function q7(t,i){if(1&t){const e=fe();f(0,"div",6)(1,"div",7)(2,"div",8)(3,"span",9),g(4,"Novice Track"),h(),D(5,"br"),f(6,"h6",10),V("click",function(){B(e);const r=w(),a=st(7);return r.openRewardsModal(a)}),g(7),h(),D(8,"br"),f(9,"app-race-description",11),V("click",function(){B(e);const r=w();return r.selectTrackRace(r.noviceTrackRace)}),h()(),D(10,"hr"),h(),x(11,$7,10,4,"div",12),x(12,W7,10,4,"div",13),h()}if(2&t){const e=w();p(7),ii("",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),p(2),_("race",e.noviceTrackRace)("showStartText",!0),p(2),_("ngIf",e.intermediateTrackAvailable),p(1),_("ngIf",e.masterTrackAvailable)}}function X7(t,i){if(1&t){const e=fe();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Novice Rewards"),h(),f(4,"button",21),V("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),V("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=w();p(11),_("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.novice),Bt)}}function Y7(t,i){if(1&t){const e=fe();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Intermediate Rewards"),h(),f(4,"button",21),V("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),V("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=w();p(11),_("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.intermediate),Bt)}}function Q7(t,i){if(1&t){const e=fe();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Master Rewards"),h(),f(4,"button",21),V("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),V("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=w();p(11),_("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.master),Bt)}}let K7=(()=>{class t{constructor(e,n,r,a,o){this.globalService=e,this.lookupService=n,this.sanitizer=r,this.modalService=a,this.componentCommunicationService=o,this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.raceSelected=new ot,this.showRace=!1,this.trackRaceTypeEnum=si}ngOnInit(){this.practiceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,si.practice),this.noviceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,si.novice),this.intermediateTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,si.intermediate),this.masterTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,si.master),this.intermediateTrackAvailable=this.selectedAnimal.allTrainingTracks.intermediateTrackAvailable,this.masterTrackAvailable=this.selectedAnimal.allTrainingTracks.masterTrackAvailable,this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()}}selectTrackRace(e){if(this.lookupService.canAnimalRace(this.selectedAnimal)){var n=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=n&&(n.selectedAnimals=n.selectedAnimals.filter(r=>r.raceCourseType!==this.selectedAnimal.raceCourseType),n.selectedAnimals.push(this.selectedAnimal)),this.raceSelected.emit(e)}}getTrackRewardsPopover(e){var n="",r=this.lookupService.getTrackRaceRewards(e),a=.25,o=this.globalService.globalVar.modifiers.find(u=>"trainingTrackPaceModifier"===u.text);void 0!==o&&(a=o.value);for(var s=0;s<r.length;s++){var l=r[s],c=0;e===si.novice?c=this.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained:e===si.intermediate?c=this.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained:e===si.master&&(c=this.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained),n+=s<c?"<span class='crossed'>("+s*a*100+"% average pace) "+l+"</span>\n":"<span>("+s*a*100+"% average pace) "+l+"</span>\n"}return this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(n))}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}goToAnimal(){this.componentCommunicationService.setAnimalView(vt.animals,this.selectedAnimal)}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(vn),P(Fo),P(_o),P(li))},t.\u0275cmp=ft({type:t,selectors:[["app-training-track-race-view"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{raceSelected:"raceSelected"},decls:12,vars:3,consts:[[1,"trainingTrackView"],[1,"keyword","clickableText",3,"ngClass","click"],["class","trainingTracks",4,"ngIf"],["noviceRewardModal",""],["intermediateRewardModal",""],["masterRewardModal",""],[1,"trainingTracks"],["id","trainingTrack1"],[1,"noviceTrackRace"],[1,"s4Heading"],[1,"clickableText","keyword",3,"click"],[3,"race","showStartText","click"],["id","trainingTrack2",4,"ngIf"],["id","trainingTrack3",4,"ngIf"],["id","trainingTrack2"],[1,"intermediateTrackRace"],["id","trainingTrack3"],[1,"masterTrackRace"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0),g(1," Selected Animal: "),f(2,"span",1),V("click",function(){return n.goToAnimal()}),g(3),h(),D(4,"hr"),x(5,q7,13,6,"div",2),h(),x(6,X7,15,1,"ng-template",null,3,ct),x(8,Y7,15,1,"ng-template",null,4,ct),x(10,Q7,15,1,"ng-template",null,5,ct)),2&e&&(p(2),_("ngClass",n.colorConditional),p(1),at(n.selectedAnimal.name),p(2),_("ngIf",!n.showRace))},directives:[Zn,sn,O0],styles:[".trainingTrackView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}"]}),t})();const Z7=["raceCanvas"];let J7=(()=>{class t{constructor(e,n,r,a,o){this.globalService=e,this.gameLoopService=n,this.utilityService=r,this.lookupService=a,this.themeService=o,this.skipRace=!1,this.pauseRace=!1,this.lengthCompleted=0,this.frameModifier=60,this.mountainEndingY=0,this.icyPatchBackgroundLines=[],this.volcanoYOffset=0,this.volcanoRadiusXModifier=6,this.backgroundVolcanoYStart=0,this.currentRaceFrame=0,this.lastPathEndingX=0,this.lastPathEndingY=0,this.lastPreviousSeconds=0,this.totalRaceModeXDistance=0,this.totalRaceModeYDistance=0,this.deltaY=0,this.yOffscreen=0,this.overviewYOffsetModifier=1,this.visibleDistanceXLeft=0,this.visibleDistanceYTop=0,this.visibleDistanceXRight=0,this.visibleDistanceYBottom=0,this.mountainClimbPercent=.5,this.eventViewStartFrame=0,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,this.newSegment=!1}ngOnInit(){this.globalService.globalVar.userIsRacing=!0,this.skipSubscription=this.skip.subscribe(()=>{this.skipRace=!0,this.isRaceFinished=!0}),this.pauseSubscription=this.pause.subscribe(()=>{this.pauseRace=!this.pauseRace}),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.skipRace=!0,this.isRaceFinished=!0)}ngAfterViewInit(){this.race.raceType===Oe.event&&this.race.eventRaceType===Ge.grandPrix&&(this.eventViewStartFrame=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier)),this.totalLegs=this.race.raceLegs.length,this.setupCanvas(),this.canvasXDistanceScale=this.canvasWidth/this.race.length;var e=this.raceCanvas.nativeElement.getContext("2d");e.lineWidth=6;var n=0;this.mountainClimbPercent=this.utilityService.getRandomNumber(.3,.7),this.race.raceType===Oe.event&&this.race.eventRaceType===Ge.grandPrix&&(0===this.globalService.globalVar.eventRaceData.mountainClimbPercent?this.globalService.globalVar.eventRaceData.mountainClimbPercent=this.mountainClimbPercent:this.mountainClimbPercent=this.globalService.globalVar.eventRaceData.mountainClimbPercent);var r=this.race.raceUI.timeToCompleteByFrame[this.race.raceUI.timeToCompleteByFrame.length-1];this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{performance.now(),e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.lineWidth=6,this.pauseRace||(n+=a,this.race.raceType===Oe.event&&this.race.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount>this.lastEventSegment?(this.eventViewStartFrame=0,this.currentRaceFrame=0,this.race=this.globalService.globalVar.eventRaceData.currentRaceSegment,this.newSegment=!0):this.newSegment=!1,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount),this.currentRaceFrame+=1);var s=!1;this.race.raceType===Oe.event&&this.race.eventRaceType===Ge.grandPrix&&this.globalService.getRemainingEventRaceTime()>0&&(s=!0),(this.currentRaceFrame>=r*this.frameModifier||this.isRaceFinished||this.skipRace)&&!s?this.displayOverview(e,!0):this.displayRace(e,n),performance.now()})}setupCanvas(){this.raceCanvas.nativeElement.style.width="100%",this.raceCanvas.nativeElement.style.height="100%",this.raceCanvas.nativeElement.width=this.raceCanvas.nativeElement.offsetWidth,this.raceCanvas.nativeElement.height=this.raceCanvas.nativeElement.offsetHeight,this.canvasHeight=this.raceCanvas.nativeElement.height,this.canvasWidth=this.raceCanvas.nativeElement.width}displayOverview(e,n){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.lengthCompleted=0,this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=0,a=!0,l=0;if(this.race.raceLegs.forEach(C=>{void 0!==C.pathData&&0!==C.pathData.length&&(l=0,C.pathData.forEach(R=>{if(C.courseType===z.Flatland)e.lineCap="round",R.routeDesign===Qe.Regular&&this.drawRegularFlatlandOverview(e,R,1,1),R.routeDesign===Qe.S&&this.drawSFlatlandOverview(e,R,1,1),R.routeDesign===Qe.Bumps&&this.drawBumpsFlatlandOverview(e,R,1,1);else if(C.courseType===z.Mountain){e.lineCap="round";var Y=this.getCurrentAnimalRacingCourse(this.lengthCompleted)!==z.Mountain||r<C.distance*this.mountainClimbPercent;R.routeDesign===Qe.Regular&&this.drawRegularMountainOverview(e,R,1,this.overviewYOffsetModifier,Y),R.routeDesign===Qe.Crevasse&&this.drawCrevasseMountainOverview(e,R,1,this.overviewYOffsetModifier,Y),R.routeDesign===Qe.Gaps&&this.drawGapsMountainOverview(e,R,1,this.overviewYOffsetModifier,Y),r+=R.length}else C.courseType===z.Ocean&&(e.lineCap="round",R.routeDesign===Qe.Regular&&this.drawRegularWaterOverview(e,R,1,1,a),R.routeDesign===Qe.Waves&&this.drawWavesWaterOverview(e,R,1,1,a),R.routeDesign===Qe.Dive&&this.drawDiveWaterOverview(e,R,1,1,a),a=!a);C.courseType===z.Tundra&&(e.lineCap="round",R.routeDesign===Qe.Regular&&this.drawRegularTundraOverview(e,R,1,1),R.routeDesign===Qe.Cavern&&this.drawCavernTundraOverview(e,R,1,1),R.routeDesign===Qe.Hills&&this.drawHillsTundraOverview(e,R,1,1)),C.courseType===z.Volcanic&&(e.lineCap="round",this.backgroundVolcanoYStart=this.lastPathEndingY,(R.routeDesign===Qe.Regular||R.routeDesign===Qe.FirstRegular||R.routeDesign===Qe.LastRegular)&&this.drawRegularVolcanoOverview(e,0,l,R,C.pathData.length,1,1),R.routeDesign===Qe.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,l,R,C.pathData.length,1,1)),this.lengthCompleted+=R.length,l+=1,this.lastPathEndingY<0&&(this.yOffscreen=this.lastPathEndingY)}))}),this.yOffscreen<0&&(this.overviewYOffsetModifier=this.overviewYOffsetModifier/1.25,this.yOffscreen=0),n){this.globalService.globalVar.userIsRacing=!1,e.globalCompositeOperation="source-atop";var u=this.race.raceUI.distanceCoveredByFrame[this.race.raceUI.distanceCoveredByFrame.length-1]/this.race.length,d=0,m=0,v=!1;this.race.raceLegs.forEach(C=>{if(!v){var R=(d+=C.distance)/this.race.length;R>u&&(R=u,v=!0);var Y=(R-m)*this.canvasWidth;e.fillStyle=this.getAnimalDistanceColorByType(C.courseType),e.fillRect(m*this.canvasWidth,0,Y,this.canvasHeight),m=R}})}if(this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(C=>{"Hills"===C[0]?this.drawHillsBackgroundTundraOverview(e,C):this.drawIcyPatchBackgroundTundraOverview(e,C)}),this.race.raceLegs.some(C=>C.courseType===z.Volcanic)){var T,b=0,y=!1;this.race.raceLegs.forEach(C=>{this.race.raceLegs.some(R=>R.courseType===z.Volcanic)&&(C.courseType!==z.Volcanic&&!y&&(b+=C.distance),C.courseType===z.Volcanic&&(y=!0))}),T=this.race.raceLegs.find(C=>C.courseType===z.Volcanic).distance;var k=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,0,b,b+T,1,1),e.globalCompositeOperation=k}}}displayRace(e,n){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.lineCap="round",e.strokeStyle="gray",this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=10,a=10;this.totalRaceModeXDistance=this.race.length*r;var o=0,s=[];this.race.raceLegs.forEach(nt=>{s.push(nt)});var l=!1;this.race.raceType===Oe.event&&this.race.eventRaceType===Ge.grandPrix?(l=!0,o=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier),s.push(this.globalService.globalVar.eventRaceData.nextRaceSegment.raceLegs[0])):o=this.currentRaceFrame;var c=this.race.raceUI.distanceCoveredByFrame[o],u=0;l&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment&&(s.unshift(this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0]),c+=s[0].distance),this.averageDistancePerSecond=this.race.raceType===Oe.event&&this.race.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/this.globalService.globalVar.eventRaceData.grandPrixTimeLength:this.race.length/this.race.raceUI.timeToCompleteByFrame[o];var d=0,m=0,v=!1,b=0;s.forEach(nt=>{v||(c>=d&&c<d+nt.distance&&(v=!0,this.currentLeg=nt),v||(m+=nt.distance,b+=1)),d+=nt.distance});var y=c-m,T=0;if(this.currentLeg.courseType===z.Mountain){var k=this.currentLeg.distance*this.mountainClimbPercent,C=0,R=!1,Y=0;this.currentLeg.pathData.forEach(nt=>{R||(k>=Y&&k<Y+nt.length&&(R=!0,C=Y+nt.length-k),Y+=nt.length)}),R=!1;var Q=0,ee=0;this.currentLeg.pathData.forEach(nt=>{if(!R){if(y>=Q&&y<Q+nt.length&&(R=!0,ee=y-Q,nt.routeDesign===Qe.Crevasse)){var It=nt.length/2*3,Gr=3*ee;T-=ee<nt.length/2?Gr:It-(Gr-It)}Q+=nt.length}});var me=k+C;this.mountainEndingY=u=y<me?y+T:me-(y-me)+T,this.race.raceType===Oe.event&&this.race.eventRaceType===Ge.grandPrix&&o===this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed-2&&(this.globalService.globalVar.eventRaceData.mountainEndingY=u)}if(this.race.raceLegs.some(nt=>nt.courseType===z.Mountain)||(this.mountainEndingY=0),u=this.mountainEndingY,this.race.raceType===Oe.event&&this.race.eventRaceType===Ge.grandPrix&&(u+=this.globalService.globalVar.eventRaceData.mountainEndingY,null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&this.currentLeg.courseType!==z.Mountain&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType!==z.Mountain&&(u=0)),this.currentLeg.courseType===z.Volcanic&&!this.pauseRace){var pe=this.currentLeg.pathData[0].length/r;if(y>pe){var ce=this.currentLeg.distance/this.volcanoRadiusXModifier,ve=pe/this.currentLeg.distance,ye=y/this.currentLeg.distance,Ue=(this.currentLeg.distance-2*pe)/this.currentLeg.distance/2;if(ye>ve&&ye<1-ve){var yt=100/(100-2*ve),lt=-ce,On=ce*Math.pow(1.05,-100*(ye>.5?2*(Ue-((ye-ve)*yt-Ue)):(ye-ve)*yt*2))+lt;this.volcanoYOffset=On}}}var se=c*this.canvasXDistanceScale*r-this.canvasWidth/2,S=(u+=this.volcanoYOffset)*this.canvasXDistanceScale*a;if(this.visibleDistanceXLeft=se,this.visibleDistanceXRight=se+this.canvasWidth,e.globalCompositeOperation="source-over",(c>=this.race.length||o>this.race.raceUI.distanceCoveredByFrame.length)&&!l)return void(this.isRaceFinished=!0);var tt=0,bn=!0,nn=0;s.forEach(nt=>{void 0!==nt.pathData&&0!==nt.pathData.length&&(nn=0,this.race.raceType===Oe.event&&this.race.eventRaceType===Ge.grandPrix&&(tt=0),nt.pathData.forEach(It=>{if(nt.courseType===z.Flatland)It.routeDesign===Qe.Regular&&this.drawRegularFlatlandOverview(e,It,r,a,se,S),It.routeDesign===Qe.S&&this.drawSFlatlandOverview(e,It,r,a,se,S),It.routeDesign===Qe.Bumps&&this.drawBumpsFlatlandOverview(e,It,r,a,se,S);else if(nt.courseType===z.Mountain){var Gr=tt<nt.distance*this.mountainClimbPercent;It.routeDesign===Qe.Regular&&this.drawRegularMountainOverview(e,It,r,a,Gr,se,S),It.routeDesign===Qe.Crevasse&&this.drawCrevasseMountainOverview(e,It,r,a,Gr,se,S),It.routeDesign===Qe.Gaps&&this.drawGapsMountainOverview(e,It,r,a,Gr,se,S),tt+=It.length,this.grandPrixMountainYReset(b)}else nt.courseType===z.Ocean&&(It.routeDesign===Qe.Regular&&this.drawRegularWaterOverview(e,It,r,a,bn,se,S),It.routeDesign===Qe.Waves&&this.drawWavesWaterOverview(e,It,r,a,bn,se,S),It.routeDesign===Qe.Dive&&this.drawDiveWaterOverview(e,It,r,a,bn,se,S),bn=!bn);nt.courseType===z.Tundra&&(It.routeDesign===Qe.Regular&&this.drawRegularTundraOverview(e,It,r,a,se,S),It.routeDesign===Qe.Cavern&&this.drawCavernTundraOverview(e,It,r,a,se,S),It.routeDesign===Qe.Hills&&this.drawHillsTundraOverview(e,It,r,a,se,S)),nt.courseType===z.Volcanic&&(this.backgroundVolcanoYStart=this.lastPathEndingY,(It.routeDesign===Qe.Regular||It.routeDesign===Qe.FirstRegular||It.routeDesign===Qe.LastRegular)&&this.drawRegularVolcanoOverview(e,0,nn,It,nt.pathData.length,r,a,se,S),It.routeDesign===Qe.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,nn,It,nt.pathData.length,r,a,se,S)),nn+=1,this.lengthCompleted+=It.length})),b+=1}),e.globalCompositeOperation="source-atop";var Ze=0,pn=m*this.canvasXDistanceScale*r,dt=s.indexOf(this.currentLeg),_n=null;dt>0&&(_n=s[dt-1]),null!=_n&&pn>=this.visibleDistanceXLeft&&pn<=this.visibleDistanceXRight?(Ze=(pn-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=this.getAnimalDistanceColorByType(_n.courseType),e.fillRect(0,0,this.canvasWidth*Ze,this.canvasHeight),e.fillStyle=this.getAnimalDistanceColorByType(this.currentLeg.courseType),e.fillRect(this.canvasWidth*Ze,0,this.canvasWidth/2-this.canvasWidth*Ze,this.canvasHeight)):(e.fillStyle=this.getAnimalDistanceColor(c,s),e.fillRect(0,0,this.canvasWidth/2,this.canvasHeight));var ei=this.getAnimalRacerColor(c,s);(this.race.raceUI.racerEffectByFrame[o]===Br.LostFocus||this.race.raceUI.racerEffectByFrame[o]===Br.LostStamina||this.race.raceUI.racerEffectByFrame[o]===Br.Stumble)&&(ei=this.utilityService.shadeColor(ei,-90)),this.race.raceUI.racerEffectByFrame[o]===Br.Burst&&(ei=this.utilityService.shadeColor(ei,90)),e.fillStyle=ei,e.fillRect(this.canvasWidth/2-5,0,5,this.canvasHeight),this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(nt=>{"Hills"===nt[0]?this.drawHillsBackgroundTundraOverview(e,nt):this.drawIcyPatchBackgroundTundraOverview(e,nt)}),e.globalCompositeOperation="source-atop";var Nn=this.averageDistancePerSecond/this.frameModifier*o;if(this.race.raceType===Oe.event&&this.race.eventRaceType===Ge.grandPrix){var ti=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();Nn+=this.averageDistancePerSecond*ti}if(this.drawRacer(e,Nn*this.canvasXDistanceScale*r,"black"),this.race.localRaceType!==Kt.Track){if(this.lookupService.getResourceByName("Money Mark")>0){var Fn=.75,bt=this.globalService.globalVar.modifiers.find(nt=>"moneyMarkPaceModifier"===nt.text);null!=bt&&(Fn=bt.value),this.drawRacer(e,this.race.length/(this.race.raceUI.timeToCompleteByFrame[o]*Fn)/this.frameModifier*o*this.canvasXDistanceScale*r,"gold")}}else{var zn=.25,gn=this.globalService.globalVar.modifiers.find(nt=>"trainingTrackPaceModifier"===nt.text);void 0!==gn&&(zn=gn.value);for(var kn=0;kn<11;kn++){var De=this.race.length/(this.race.raceUI.timeToCompleteByFrame[o]/(1+zn*(kn+1)))/this.frameModifier*o*this.canvasXDistanceScale*r,cn=this.getTrackRacerColor(kn);this.drawRacer(e,De,cn)}}if(this.drawBreakpoints(e,r,s),s.some(nt=>nt.courseType===z.Volcanic)){var wi,pr=0,Oi=!1;s.forEach(nt=>{s.some(It=>It.courseType===z.Volcanic)&&(nt.courseType!==z.Volcanic&&!Oi&&(pr+=nt.distance),nt.courseType===z.Volcanic&&(Oi=!0))}),wi=s.find(nt=>nt.courseType===z.Volcanic).distance;var At=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,o,pr,pr+wi,r,a,se,S),e.globalCompositeOperation=At}}}getAnimalDistanceColor(e,n){var r="",a=0;return null==n&&(n=this.race.raceLegs),n.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===z.Flatland&&(r="#7d3f00"),o.courseType===z.Mountain&&(r="#1b630d"),o.courseType===z.Ocean&&(r="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),o.courseType===z.Tundra&&(r="#28809c"),o.courseType===z.Volcanic&&(r="#8f1a1a")),a+=o.distance}),r}getAnimalDistanceColorByType(e){var n="";return e===z.Flatland&&(n="#7d3f00"),e===z.Mountain&&(n="#1b630d"),e===z.Ocean&&(n="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===z.Tundra&&(n="#28809c"),e===z.Volcanic&&(n="#8f1a1a"),n}getAnimalRacerColor(e,n){var r="",a=0;return null==n&&(n=this.race.raceLegs),n.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===z.Flatland&&("night"===this.themeService.getActiveThemeName()?r="#E18B07":(this.themeService.getActiveThemeName(),r="#c66900")),o.courseType===z.Mountain&&("night"===this.themeService.getActiveThemeName()?r="#30b001":(this.themeService.getActiveThemeName(),r="#279113")),o.courseType===z.Ocean&&("night"===this.themeService.getActiveThemeName()?r="#9289CF":(this.themeService.getActiveThemeName(),r="#0000FF")),o.courseType===z.Tundra&&("night"===this.themeService.getActiveThemeName()?r="#019DDE":(this.themeService.getActiveThemeName(),r="#1CA1C9")),o.courseType===z.Volcanic&&("night"===this.themeService.getActiveThemeName()?r="#E56C6E":(this.themeService.getActiveThemeName(),r="#D92525"))),a+=o.distance}),r}getTrackRacerColor(e){var n="";return 0===e&&(n="#cfc800"),1===e&&(n="#00cf68"),2===e&&(n="#cf00c5"),3===e&&(n="#cfb8e6"),4===e&&(n="#4a1d1d"),5===e&&(n="#1b5054"),6===e&&(n="#541b3c"),7===e&&(n="#aeb85a"),8===e&&(n="#ffffff"),9===e&&(n="#01253b"),10===e&&(n="#790dde"),n}getCurrentAnimalRacingCourse(e){var n;n=z.Flatland;var r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(n=a.courseType),r+=a.distance}),n}getNextAnimalRacingCourse(e){var n;n=z.Flatland;var r=this.race.raceLegs.indexOf(e);return this.race.raceLegs.length>r&&(n=this.race.raceLegs[r+1].courseType),n}drawRacer(e,n,r){var a=0;n>=this.visibleDistanceXLeft&&n<=this.visibleDistanceXRight&&(a=(n-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=r,e.fillRect(this.canvasWidth*a-5,0,5,this.canvasHeight))}drawBreakpoints(e,n,r){var a=0;null==r&&(r=this.race.raceLegs);for(var o=0;o<r.length;o++){var s=r[o],l=null;o<r.length-1&&(l=r[o+1]);var c=0,u=(a+s.distance)*this.canvasXDistanceScale*n;u>=this.visibleDistanceXLeft&&u<=this.visibleDistanceXRight&&(c=(u-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=null!==l?this.getAnimalDistanceColorByType(l.courseType):"pink",e.fillRect(this.canvasWidth*c-5,0,5,this.canvasHeight)),a+=s.distance}}drawRegularFlatlandOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0),e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+s),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawSFlatlandOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,m=.23*l,v=1.2173*m,b=.04*l,y=v,T=b+m,k=v,C=T+m,R=v,Y=C,ee=C,me=v,pe=ee+m,ce=v,ve=pe+m,ye=v,Ue=ve;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.bezierCurveTo(c+d,u,c+b,u+y,c+T,u+k),e.bezierCurveTo(c+T,u+k,c+C,u+R,c+Y,u),e.stroke(),e.beginPath(),e.moveTo(c+Y,u),e.bezierCurveTo(c+Y,u,c+ee,u-me,c+pe,u-ce),e.bezierCurveTo(c+pe,u-ce,c+ve,u-ye,c+ve,u),e.stroke(),e.beginPath(),e.moveTo(c+ve,u),e.lineTo(c+Ue+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+Ue+d}drawBumpsFlatlandOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,m=.115*l,v=m/3;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.lineTo(c+d+m/2,u-v),e.lineTo(c+d+m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+m,u),e.lineTo(c+d+m+m/2,u-v),e.lineTo(c+d+2*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+2*m,u),e.lineTo(c+d+2*m+m/2,u-v),e.lineTo(c+d+3*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+3*m,u),e.lineTo(c+d+3*m+m/2,u-v),e.lineTo(c+d+4*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+4*m,u),e.lineTo(c+d+4*m+m/2,u-v),e.lineTo(c+d+5*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+5*m,u),e.lineTo(c+d+5*m+m/2,u-v),e.lineTo(c+d+6*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+6*m,u),e.lineTo(c+d+6*m+m/2,u-v),e.lineTo(c+d+7*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+7*m,u),e.lineTo(c+d+7*m+m/2,u-v),e.lineTo(c+d+8*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+8*m,u),e.lineTo(c+d+8*m+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawRegularMountainOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0),e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),e.lineTo(this.lastPathEndingX+c-s,o?this.lastPathEndingY-u+l:this.lastPathEndingY+u+l),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawCrevasseMountainOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,m=this.lastPathEndingY+l,b=c,y=u,T=2*y;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),o?(T=2*y-(y-0),e.lineTo(d+0,m-0),e.lineTo(d+0+b/2,m+T-0),e.lineTo(d+0+b,m-y-0),e.lineTo(d+0+b,m-y-0)):(e.lineTo(d+0,m+0),e.lineTo(d+0+b/2,m+T+0),e.lineTo(d+0+b,m+y+0),e.lineTo(d+0+b,m+y+0)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawGapsMountainOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,m=this.lastPathEndingY+l,v=.04*c,b=.115*c,y=.115*u,T=.04*u;e.beginPath(),e.moveTo(d,m),o?(e.lineTo(d+v,m-T),e.moveTo(d+b+v,m-y-T),e.lineTo(d+2*b+v,m-2*y-T),e.moveTo(d+3*b+v,m-3*y-T),e.lineTo(d+4*b+v,m-4*y-T),e.moveTo(d+5*b+v,m-5*y-T),e.lineTo(d+6*b+v,m-6*y-T),e.moveTo(d+7*b+v,m-7*y-T),e.lineTo(d+8*b+v,m-8*y-T),e.lineTo(d+8*b+2*v,m-8*y-2*T)):(e.lineTo(d+v,m+T),e.moveTo(d+b+v,m+y+T),e.lineTo(d+2*b+v,m+2*y+T),e.moveTo(d+3*b+v,m+3*y+T),e.lineTo(d+4*b+v,m+4*y+T),e.moveTo(d+5*b+v,m+5*y+T),e.lineTo(d+6*b+v,m+6*y+T),e.moveTo(d+7*b+v,m+7*y+T),e.lineTo(d+8*b+v,m+8*y+T),e.lineTo(d+8*b+2*v,m+8*y+2*T)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawRegularWaterOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,m=c/3,v=c/6,b=u+m,y=o?d+v:d-v,T=u+2*m,k=o?d+v:d-v,C=u+3*m,R=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(b,y,T,k,C,R),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawWavesWaterOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,m=c/3,v=c/3,b=u+m/3,y=d,T=u+m/3,k=d-v,C=u+m,R=d-.6*v;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(b,y,T,k,C,R),e.stroke();var Y=C-m/3,Q=R-v/10,ee=C-m/3,me=R+.6*v,pe=C,ce=d;e.beginPath(),e.moveTo(C,R),e.bezierCurveTo(Y,Q,ee,me,pe,ce),e.stroke();var ve=pe+m/3,ye=ce,Ue=pe+m/3,yt=ce-v,wt=pe+m,Et=ce-.6*v;e.beginPath(),e.moveTo(pe,ce),e.bezierCurveTo(ve,ye,Ue,yt,wt,Et),e.stroke();var Rt=wt-m/3,lt=Et-v/10,On=wt-m/3,se=Et+.6*v,S=wt,tt=d;e.beginPath(),e.moveTo(wt,Et),e.bezierCurveTo(Rt,lt,On,se,S,tt),e.stroke();var bn=S+m/3,kt=tt,nn=S+m/3,Ze=tt-v,pn=S+m,dt=tt-.6*v;e.beginPath(),e.moveTo(S,tt),e.bezierCurveTo(bn,kt,nn,Ze,pn,dt),e.stroke();var _n=pn-m/3,Wn=dt-v/10,qn=pn-m/3,ei=dt+.6*v,Nn=pn,ti=d;e.beginPath(),e.moveTo(pn,dt),e.bezierCurveTo(_n,Wn,qn,ei,Nn,ti),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawDiveWaterOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,m=c/3,v=c/2,b=u,y=o?d+2*v:d-2*v,T=u+2*m,k=o?d+v/4:d-v/4,C=u+3*m,R=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(b,y,T,k,C,R),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawRegularTundraOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=n.driftAmount/80*u,m=(n.totalTundraYAmount-n.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+m+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+m+d+s),e.stroke();var v=[];v.push("Regular"),v.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]),this.icyPatchBackgroundLines.push(v),this.lastPathEndingX=this.lastPathEndingX+l}drawCavernTundraOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var m=l/4*.97,v=n.driftAmount/80*m,b=(n.totalTundraYAmount-n.driftAmount)/80*m;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+b+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+b+v+s),e.stroke();var T=l/4*.75,k=[];k.push("Cavern"),k.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),k.push([this.lastPathEndingX-o,this.lastPathEndingY+T+s]),k.push([this.lastPathEndingX+l-o,this.lastPathEndingY+T+s]),k.push([this.lastPathEndingX+l-o,this.lastPathEndingY-T+s]),k.push([this.lastPathEndingX-o,this.lastPathEndingY-T+s]),this.icyPatchBackgroundLines.push(k),this.lastPathEndingX=this.lastPathEndingX+l}drawHillsTundraOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=n.driftAmount/80*u,m=(n.totalTundraYAmount-n.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+m+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+m+d+s),e.stroke();var v=[];v.push("Hills"),v.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]);var b=l/12,y=l/4,T=c/2,k=c*(3/4),C=c/4;v.push([this.lastPathEndingX+y-b/2-o,this.lastPathEndingY-T+C/2+s]),v.push([this.lastPathEndingX+y-b/2-o,this.lastPathEndingY-T-C+s,this.lastPathEndingX+y+b/2-o,this.lastPathEndingY-T-C+s,this.lastPathEndingX+y+b/2-o,this.lastPathEndingY-T+C/2+s]),v.push([this.lastPathEndingX+y-b/2-o,this.lastPathEndingY+T+C/2+s]),v.push([this.lastPathEndingX+y-b/2-o,this.lastPathEndingY+T-C+s,this.lastPathEndingX+y+b/2-o,this.lastPathEndingY+T-C+s,this.lastPathEndingX+y+b/2-o,this.lastPathEndingY+T+C/2+s]),v.push([this.lastPathEndingX+2*y-b/2-o,this.lastPathEndingY-k+C/2+s]),v.push([this.lastPathEndingX+2*y-b/2-o,this.lastPathEndingY-k-C+s,this.lastPathEndingX+2*y+b/2-o,this.lastPathEndingY-k-C+s,this.lastPathEndingX+2*y+b/2-o,this.lastPathEndingY-k+C/2+s]),v.push([this.lastPathEndingX+2*y-b/2-o,this.lastPathEndingY+k+C/2+s]),v.push([this.lastPathEndingX+2*y-b/2-o,this.lastPathEndingY+k-C+s,this.lastPathEndingX+2*y+b/2-o,this.lastPathEndingY+k-C+s,this.lastPathEndingX+2*y+b/2-o,this.lastPathEndingY+k+C/2+s]),v.push([this.lastPathEndingX+3*y-b/2-o,this.lastPathEndingY-T+C/2+s]),v.push([this.lastPathEndingX+3*y-b/2-o,this.lastPathEndingY-T-C+s,this.lastPathEndingX+3*y+b/2-o,this.lastPathEndingY-T-C+s,this.lastPathEndingX+3*y+b/2-o,this.lastPathEndingY-T+C/2+s]),v.push([this.lastPathEndingX+3*y-b/2-o,this.lastPathEndingY+T+C/2+s]),v.push([this.lastPathEndingX+3*y-b/2-o,this.lastPathEndingY+T-C+s,this.lastPathEndingX+3*y+b/2-o,this.lastPathEndingY+T-C+s,this.lastPathEndingX+3*y+b/2-o,this.lastPathEndingY+T+C/2+s]),this.icyPatchBackgroundLines.push(v),this.lastPathEndingX=this.lastPathEndingX+l}drawIcyPatchBackgroundTundraOverview(e,n){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.beginPath(),e.moveTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.lineTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r}drawHillsBackgroundTundraOverview(e,n){var r=e.globalCompositeOperation;e.strokeStyle="dimgray",e.globalCompositeOperation="source-atop",n.length>=17&&(e.beginPath(),e.moveTo(n[6][0],n[6][1]),e.bezierCurveTo(n[7][0],n[7][1],n[7][2],n[7][3],n[7][4],n[7][5]),e.stroke(),e.beginPath(),e.moveTo(n[8][0],n[8][1]),e.bezierCurveTo(n[9][0],n[9][1],n[9][2],n[9][3],n[9][4],n[9][5]),e.stroke(),e.beginPath(),e.moveTo(n[10][0],n[10][1]),e.bezierCurveTo(n[11][0],n[11][1],n[11][2],n[11][3],n[11][4],n[11][5]),e.stroke(),e.beginPath(),e.moveTo(n[12][0],n[12][1]),e.bezierCurveTo(n[13][0],n[13][1],n[13][2],n[13][3],n[13][4],n[13][5]),e.stroke(),e.beginPath(),e.moveTo(n[14][0],n[14][1]),e.bezierCurveTo(n[15][0],n[15][1],n[15][2],n[15][3],n[15][4],n[15][5]),e.stroke(),e.beginPath(),e.moveTo(n[16][0],n[16][1]),e.bezierCurveTo(n[17][0],n[17][1],n[17][2],n[17][3],n[17][4],n[17][5]),e.stroke()),e.globalCompositeOperation="destination-over",n.length>=17&&(e.beginPath(),e.moveTo(n[6][0],n[6][1]),e.bezierCurveTo(n[7][0],n[7][1],n[7][2],n[7][3],n[7][4],n[7][5]),e.stroke(),e.beginPath(),e.moveTo(n[8][0],n[8][1]),e.bezierCurveTo(n[9][0],n[9][1],n[9][2],n[9][3],n[9][4],n[9][5]),e.stroke(),e.beginPath(),e.moveTo(n[10][0],n[10][1]),e.bezierCurveTo(n[11][0],n[11][1],n[11][2],n[11][3],n[11][4],n[11][5]),e.stroke(),e.beginPath(),e.moveTo(n[12][0],n[12][1]),e.bezierCurveTo(n[13][0],n[13][1],n[13][2],n[13][3],n[13][4],n[13][5]),e.stroke(),e.beginPath(),e.moveTo(n[14][0],n[14][1]),e.bezierCurveTo(n[15][0],n[15][1],n[15][2],n[15][3],n[15][4],n[15][5]),e.stroke(),e.beginPath(),e.moveTo(n[16][0],n[16][1]),e.bezierCurveTo(n[17][0],n[17][1],n[17][2],n[17][3],n[17][4],n[17][5]),e.stroke()),e.beginPath(),e.moveTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.lineTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r,e.strokeStyle="gray"}drawRegularVolcanoOverview(e,n,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);var k=this.lastPathEndingX-c-d*r+d*o/2,C=this.lastPathEndingY+0+u,R=d*o/this.volcanoRadiusXModifier,Y=d*o/2-d/s,Q=Math.PI/2,pe=180/o,ce=0;a.routeDesign===Qe.FirstRegular?(this.volcanoStartingAngle=ce=90,e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d/s-c,this.lastPathEndingY+0+u),e.stroke()):a.routeDesign===Qe.LastRegular&&(e.beginPath(),e.moveTo(this.lastPathEndingX+(d-d/s)-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d-c,this.lastPathEndingY+0+u),e.stroke()),(ce=this.volcanoStartingAngle-pe)<0&&(ce=360-Math.abs(ce)),e.beginPath(),e.ellipse(k,C,R,Y,Q,this.volcanoStartingAngle*(Math.PI/180),ce*(Math.PI/180),!0),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=ce}drawSteppingStonesVolcanoOverview(e,n,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);for(var k=this.lastPathEndingX-c-d*r+d*o/2,C=this.lastPathEndingY+0+u,R=d*o/this.volcanoRadiusXModifier,Y=d*o/2-d/s,Q=Math.PI/2,pe=180/o,Ue=0,ce=pe/20,ve=0;ve<10;ve++){var ye=this.volcanoStartingAngle-ce*(2*ve);ye<0&&(ye=360-Math.abs(ye)),(Ue=ye-ce)<0&&(Ue=360-Math.abs(Ue)),e.beginPath(),e.ellipse(k,C,R,Y,Q,ye*(Math.PI/180),Ue*(Math.PI/180),!0),e.stroke()}(Ue=this.volcanoStartingAngle-pe)<0&&(Ue=360-Math.abs(Ue)),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=Ue}drawBackgroundVolcano(e,n,r,a,o,s,l,c){null==l&&(l=0),null==c&&(c=0);var u=.1*(a-r),d=(r+u)*this.canvasXDistanceScale*o-l,m=(a-u)*this.canvasXDistanceScale*o-l,v=m-d,b=(a-r)*this.canvasXDistanceScale*o/this.volcanoRadiusXModifier,y=this.canvasHeight*o,T=this.backgroundVolcanoYStart-.75*b+c,k=d+.15*v,C=y-10*s,R=d+.35*v,Y=T+20*s,Q=d+.4*v,ee=T,me=m-.15*v,pe=y-10*s,ce=m-.35*v,ve=T+20*s,ye=m-.4*v,Ue=T,yt=e.fillStyle,wt=e.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);wt.addColorStop(0,"red"),wt.addColorStop(1,"orange"),e.fillStyle=wt;var Et=Q+(ye-Q)/3,Rt=T+b/4,lt=Q+2*(ye-Q)/3,On=T+b/4,kt=Q-.075*v,nn=ee+b/2,Ze=ye+.075*v,pn=Ue+b/2,dt=kt+1.7*(Ze-kt)/5,_n=nn+.5*b,Wn=kt+1.4*(Ze-kt)/5,qn=nn+b/2,ei=kt+2.5*(Ze-kt)/5,Nn=nn,ti=kt+3.6*(Ze-kt)/5,Xn=nn+b,Yn=kt+3.3*(Ze-kt)/5,Gn=nn-.25*b;e.beginPath(),e.moveTo(Q,ee),e.bezierCurveTo(Et,Rt,lt,On,ye,Ue),e.lineTo(Ze,pn),e.moveTo(Ze,pn),e.bezierCurveTo(ti,Xn,Yn,Gn,ei,Nn),e.bezierCurveTo(dt,_n,Wn,qn,kt,nn),e.lineTo(Q,ee),e.fill(),e.beginPath(),e.moveTo(d,y),e.bezierCurveTo(k,C,R,Y,Q,ee),e.stroke(),e.beginPath(),e.moveTo(m,y),e.bezierCurveTo(me,pe,ce,ve,ye,Ue),e.stroke();var Fn=e.lineWidth;e.lineWidth=2;var bt=.175,gt=d+v*(bt+.025),ln=y-b/4,rn=d+v*(bt+.2),Bn=T+b/3,zn=d+v*(bt+.25),gn=T+b/4;e.beginPath(),e.moveTo(d+v*bt,.95*y),e.bezierCurveTo(gt,ln,rn,Bn,zn,gn),e.stroke();var kn=d+v*(.025+(bt=.35)),tr=y-b/4,Tr=d+v*(bt+.075),Te=T+b/2,De=d+v*(bt+.1),cn=T+b/3;e.beginPath(),e.moveTo(d+v*bt,.95*y),e.bezierCurveTo(kn,tr,Tr,Te,De,cn),e.stroke();var pr=m-v*(.025+(bt=.35)),Oi=y-b/4,wi=m-v*(bt+.075),At=T+b/2,nt=m-v*(bt+.1),It=T+b/3;e.beginPath(),e.moveTo(m-v*bt,.95*y),e.bezierCurveTo(pr,Oi,wi,At,nt,It),e.stroke();var Gr=m-v*(.025+(bt=.175)),Ka=y-b/4,sa=m-v*(bt+.2),Za=T+b/3,Ja=m-v*(bt+.25),yo=T+b/4;if(e.beginPath(),e.moveTo(m-v*bt,.95*y),e.bezierCurveTo(Gr,Ka,sa,Za,Ja,yo),e.stroke(),e.lineWidth=Fn,void 0!==this.race.raceUI.lavaFallPercentByFrame[n]&&0!==this.race.raceUI.lavaFallPercentByFrame[n].length&&void 0!==this.race.raceUI.lavaFallPercentByFrame[n][0]){1===o&&(n=this.race.raceUI.lavaFallPercentByFrame.length-1);var la=this.race.raceUI.lavaFallPercentByFrame[n],Wo=(a-r)*this.canvasXDistanceScale*o,qo=r*this.canvasXDistanceScale*o,jl=qo+.4*Wo-l+0,$l=qo+.45*Wo-l+0,Wl=qo+.5*Wo-l+0,ql=qo+.55*Wo-l+0,Xl=qo+.6*Wo-l+0,ni=.01*(a-r)*this.canvasXDistanceScale*o,Gi=ni/2,zi=T+b/4,wo=this.backgroundVolcanoYStart+b+c,Cs=(wo-zi)*la[0];e.beginPath(),e.ellipse(jl,zi+Cs-Gi,ni,Gi,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(jl-ni,zi,2*ni,Cs-(Gi-1));var Nu=(wo-zi)*la[1];e.beginPath(),e.ellipse($l,zi+Nu-Gi,ni,Gi,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect($l-ni,zi,2*ni,Nu-(Gi-1));var Yl=(wo-zi)*la[2];e.beginPath(),e.ellipse(Wl,zi+Yl-Gi,ni,Gi,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Wl-ni,zi,2*ni,Yl-(Gi-1));var Dr=(wo-zi)*la[3];e.beginPath(),e.ellipse(ql,zi+Dr-Gi,ni,Gi,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(ql-ni,zi,2*ni,Dr-(Gi-1));var Ql=(wo-zi)*la[4];e.beginPath(),e.ellipse(Xl,zi+Ql-Gi,ni,Gi,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Xl-ni,zi,2*ni,Ql-(Gi-1)),e.fillStyle=yt}else e.fillStyle=yt}drawBrazier(e,n,r,a,o,s,l){var c=.01*this.race.length*this.canvasXDistanceScale*a;null==s&&(s=0),null==l&&(l=0);var u=e*this.canvasXDistanceScale*a-s,d=this.canvasHeight/2,m=.166667*c,v=.333333*c,b=.8*c;console.log("Starting X: "+u),n.strokeStyle="black",n.lineWidth="6",n.fillStyle="gray",n.beginPath(),n.moveTo(u,d),n.lineTo(u+m,d),n.lineTo(u+m,d-b),n.lineTo(u,d-b),n.lineTo(u,d),n.stroke(),n.fill(),n.beginPath(),n.moveTo(u+m,d),n.lineTo(u+m+v,d),n.lineTo(u+m+v,d-b),n.lineTo(u+m,d-b),n.lineTo(u+m,d),n.stroke(),n.fill(),n.beginPath(),n.moveTo(u+m+v,d),n.lineTo(u+m+2*v,d),n.lineTo(u+m+2*v,d-b),n.lineTo(u+m+v,d-b),n.lineTo(u+m+v,d),n.stroke(),n.fill(),n.beginPath(),n.moveTo(u+m+2*v,d),n.lineTo(u+2*m+2*v,d),n.lineTo(u+2*m+2*v,d-b),n.lineTo(u+m+2*v,d-b),n.lineTo(u+m+2*v,d),n.stroke(),n.fill(),n.fillStyle="brown",n.strokeStyle="black";var y=c/6-n.lineWidth/2,T=224,k=c/6+1,C=b/6,R=d+b-C;this.drawRoundedRectangle(n,T,R,y,C,3),this.drawRoundedRectangle(n,T+k,R,y,C,3),this.drawRoundedRectangle(n,T+2*k,R,y,C,3),this.drawRoundedRectangle(n,T+3*k,R,y,C,3),this.drawRoundedRectangle(n,T+4*k,R,y,C,3),this.drawRoundedRectangle(n,T+5*k,R,y,C,3),this.lastPathEndingX=this.lastPathEndingX+c}grandPrixMountainYReset(e){this.race.raceType===Oe.event&&this.race.eventRaceType===Ge.grandPrix&&0===this.globalService.globalVar.eventRaceData.mountainEndingY&&null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType===z.Mountain&&1===e&&(this.lastPathEndingY=this.canvasHeight/2)}drawRoundedRectangle(e,n,r,a,o,s){var l=n+a,c=r+o;e.beginPath(),e.moveTo(n+s,r),e.lineTo(l-s,r),e.quadraticCurveTo(l,r,l,r+s),e.lineTo(l,r+o-s),e.quadraticCurveTo(l,c,l-s,c),e.lineTo(n+s,c),e.quadraticCurveTo(n,c,n,c-s),e.lineTo(n,r+s),e.quadraticCurveTo(n,r,n+s,r),e.stroke(),e.fill()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.skipSubscription.unsubscribe(),this.pauseSubscription.unsubscribe(),this.globalService.globalVar.userIsRacing=!1,this.race.raceType!==Oe.event&&(this.race.raceUI.staminaPercentByFrame=[],this.race.raceUI.timeToCompleteByFrame=[],this.race.raceUI.yAdjustmentByFrame=[],this.race.raceUI.velocityByFrame=[],this.race.raceUI.distanceCoveredByFrame=[],this.race.raceUI.lavaFallPercentByFrame=[],this.race.raceUI.maxSpeedByFrame=[],this.race.raceUI.racerEffectByFrame=[])}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(xi),P(Ri),P(vn),P(El))},t.\u0275cmp=ft({type:t,selectors:[["app-draw-race"]],viewQuery:function(e,n){if(1&e&&_a(Z7,5,Tn),2&e){let r;yn(r=wn())&&(n.raceCanvas=r.first)}},inputs:{race:"race",skip:"skip",pause:"pause"},decls:3,vars:0,consts:[[1,"drawRaceDiv"],["id","raceCanvas",1,"raceCanvas"],["raceCanvas",""]],template:function(e,n){1&e&&(f(0,"div",0),D(1,"canvas",1,2),h())},styles:[".drawRaceDiv[_ngcontent-%COMP%]{height:100%}.raceCanvas[_ngcontent-%COMP%]{border:1px solid black}"]}),t})();const e9=["circuitRewardModal"];function t9(t,i){if(1&t){const e=fe();f(0,"button",6),V("click",function(){return B(e),w(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function n9(t,i){1&t&&(f(0,"span"),g(1,"BURST!"),h())}function i9(t,i){if(1&t){const e=fe();f(0,"button",6),V("click",function(){return B(e),w(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function r9(t,i){if(1&t&&(f(0,"div",8)(1,"div",9)(2,"div"),x(3,t9,2,0,"button",10),h(),f(4,"div")(5,"span",11),g(6,"Vel:"),h(),f(7,"span",12),g(8,"Velocity:"),h(),g(9),x(10,n9,2,0,"span",3),h(),f(11,"div")(12,"span",11),g(13,"Stam:"),h(),f(14,"span",12),g(15,"Stamina:"),h(),g(16),h(),f(17,"div")(18,"span",11),g(19,"Pos:"),h(),f(20,"span",12),g(21,"Position:"),h(),g(22),h(),f(23,"div"),x(24,i9,2,0,"button",10),h()(),f(25,"div",13)(26,"div",14),D(27,"app-draw-race",15),h(),D(28,"div",16,17),h()()),2&t){const e=st(29),n=w();p(3),_("ngIf",!n.grandPrixRace),p(6),ii(" ",n.velocityAtCurrentFrame," / ",n.maxSpeedAtCurrentFrame,"m/s "),p(1),_("ngIf",n.racerEffectAtCurrentFrame===n.burstEffect),p(6),K(" ",n.staminaAtCurrentFrame,"%"),p(6),ii(" ",n.positionAtCurrentFrame," / ",n.totalRacers,""),p(2),_("ngIf",!n.grandPrixRace),p(3),_("race",n.selectedRace)("skip",n.skipRace.asObservable())("pause",n.pauseRace.asObservable()),p(1),_("scrollTop",e.scrollHeight)("innerHTML",n.incrementalRaceUpdates.trim(),Bt)}}function a9(t,i){if(1&t){const e=fe();f(0,"button",6),V("click",function(){return B(e),w(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function o9(t,i){if(1&t){const e=fe();f(0,"button",6),V("click",function(){return B(e),w(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function s9(t,i){if(1&t&&(f(0,"div",18)(1,"div",19)(2,"div"),x(3,a9,2,0,"button",10),h(),f(4,"div"),x(5,o9,2,0,"button",10),h()(),D(6,"div",20,17),h()),2&t){const e=st(7),n=w();p(3),_("ngIf",!n.grandPrixRace),p(2),_("ngIf",!n.grandPrixRace),p(1),_("scrollTop",e.scrollHeight)("innerHTML",n.incrementalRaceUpdates.trim(),Bt)}}function l9(t,i){if(1&t){const e=fe();f(0,"button",6),V("click",function(){return B(e),w(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function c9(t,i){1&t&&(f(0,"span"),g(1,"BURST!"),h())}function u9(t,i){if(1&t){const e=fe();f(0,"button",6),V("click",function(){return B(e),w(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function d9(t,i){if(1&t&&(f(0,"div",18)(1,"div",19)(2,"div"),x(3,l9,2,0,"button",10),h(),f(4,"div")(5,"span",11),g(6,"Vel:"),h(),f(7,"span",12),g(8,"Velocity:"),h(),g(9),x(10,c9,2,0,"span",3),h(),f(11,"div")(12,"span",11),g(13,"Stam:"),h(),f(14,"span",12),g(15,"Stamina:"),h(),g(16),h(),f(17,"div")(18,"span",11),g(19,"Pos:"),h(),f(20,"span",12),g(21,"Position:"),h(),g(22),h(),f(23,"div"),x(24,u9,2,0,"button",10),h()(),f(25,"div",21),D(26,"app-draw-race",15)(27,"br"),h()()),2&t){const e=w();p(3),_("ngIf",!e.grandPrixRace),p(6),ii(" ",e.velocityAtCurrentFrame," / ",e.maxSpeedAtCurrentFrame,"m/s "),p(1),_("ngIf",e.racerEffectAtCurrentFrame===e.burstEffect),p(6),K(" ",e.staminaAtCurrentFrame,"%"),p(6),ii(" ",e.positionAtCurrentFrame," / ",e.totalRacers,""),p(2),_("ngIf",!e.grandPrixRace),p(2),_("race",e.selectedRace)("skip",e.skipRace.asObservable())("pause",e.pauseRace.asObservable())}}function h9(t,i){1&t&&D(0,"br")}function f9(t,i){if(1&t&&(f(0,"div",28),g(1),h()),2&t){const e=w().$implicit,n=w(3);p(1),K(" ",n.lookupService.getResourcePopover(e.name,e.shopItemTypeEnum)," ")}}function p9(t,i){if(1&t&&(f(0,"td")(1,"span",26),g(2),h(),g(3),x(4,f9,2,1,"ng-template",null,27,ct),h()),2&t){const e=i.$implicit,n=st(5);p(1),_("ngbPopover",n),p(1),at(e.name),p(1),K(": ",e.amount," ")}}function g9(t,i){if(1&t&&(f(0,"tr"),x(1,p9,6,3,"td",25),h()),2&t){const e=i.$implicit;p(1),_("ngForOf",e)}}function m9(t,i){if(1&t&&(f(0,"div",22)(1,"span",23),g(2,"Rewards"),h(),f(3,"div",24)(4,"table"),x(5,g9,2,1,"tr",25),h()()()),2&t){const e=w();p(5),_("ngForOf",e.rewardRows)}}function v9(t,i){if(1&t){const e=fe();f(0,"div",29)(1,"div",30)(2,"h4",31),g(3,"Circuit Rank Reward!"),h(),f(4,"button",32),V("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",33)(7,"div",34),g(8," After ranking up, you receive: "),D(9,"br"),f(10,"div",23),g(11),h()(),D(12,"br")(13,"br")(14,"div",35),h(),f(15,"div",36)(16,"button",37),V("click",function(){return B(e).$implicit.dismiss()}),g(17,"Continue"),h()()()}if(2&t){const e=w();p(11),at(e.selectedRace.circuitIncreaseReward[0]),p(3),_("innerHTML",e.selectedRace.circuitIncreaseReward[1],Bt)}}let s2=(()=>{class t{constructor(e,n,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=n,this.utilityService=r,this.lookupService=a,this.initializeService=o,this.modalService=s,this.sanitizer=l,this.raceLogicService=c,this.incrementalRaceUpdates="",this.raceFinished=new ot,this.skipRace=new be,this.pauseRace=new be,this.raceSkipped=!1,this.racePaused=!1,this.frameModifier=60,this.displayVisualRace=!0,this.displayTextUpdates=!0,this.burstEffect=Br.Burst,this.grandPrixRace=!1}ngOnInit(){var e=this,n=this.globalService.globalVar.settings.get("raceDisplayInfo");n===aa.draw?(this.displayVisualRace=!0,this.displayTextUpdates=!1):n===aa.text?(this.displayVisualRace=!1,this.displayTextUpdates=!0):n===aa.both&&(this.displayVisualRace=!0,this.displayTextUpdates=!0),this.selectedRace.raceType===Oe.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.grandPrixRace=!0);var r=new af;r=this.grandPrixRace?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult:this.raceLogicService.runRace(this.selectedRace),this.setupDisplayRewards(this.selectedRace),this.displayRaceUpdates(r),this.getFrameByFrameStats(),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.raceSkipped=!0),this.grandPrixRace&&(this.eventRaceSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Sr(function*(){e.globalService.getTimeToEventRace()>0&&0===e.globalService.globalVar.eventRaceData.bonusTime&&e.raceFinished.emit(!0),e.globalService.globalVar.eventRaceData.isRunning||e.raceFinished.emit(!0)})))}ngOnDestroy(){null!=this.frameByFrameSubscription&&this.frameByFrameSubscription.unsubscribe(),null!=this.updateSubscription&&this.updateSubscription.unsubscribe(),null!=this.eventRaceSubscription&&this.eventRaceSubscription.unsubscribe(),this.raceFinished.emit(!0)}displayRaceUpdates(e){var n=this,r=e.raceUpdates;this.incrementalRaceUpdates="";var o=0,l=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,c=this.updateSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=Sr(function*(d){if(n.racePaused||(n.selectedRace.raceType===Oe.event&&n.selectedRace.eventRaceType===Ge.grandPrix&&(n.globalService.globalVar.eventRaceData.currentRaceSegmentCount>l&&(o=0,n.selectedRace=n.globalService.globalVar.eventRaceData.currentRaceSegment,r=n.globalService.globalVar.eventRaceData.currentRaceSegmentResult.raceUpdates),l=n.globalService.globalVar.eventRaceData.currentRaceSegmentCount),o+=1),(n.selectedRace.raceType!==Oe.event||n.selectedRace.eventRaceType!==Ge.grandPrix)&&(0===r.length||n.raceSkipped))return n.raceSkipped&&r.forEach(m=>{n.incrementalRaceUpdates+=n.sanitizer.sanitize(en.HTML,n.sanitizer.bypassSecurityTrustHtml(m.text+"\n"))}),e.wasSuccessful&&(n.displayResults=!0,null!=n.selectedRace.circuitIncreaseReward&&""!==n.selectedRace.circuitIncreaseReward[0]&&n.modalService.open(n.circuitRewardModal,{ariaLabelledBy:"modal-basic-title",size:"lg"})),void c.unsubscribe();n.selectedRace.raceType===Oe.event&&n.selectedRace.eventRaceType===Ge.grandPrix?n.globalService.globalVar.eventRaceData.segmentTimeCounter*n.frameModifier>=r[0].value&&(n.incrementalRaceUpdates+=n.sanitizer.sanitize(en.HTML,n.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift()):o>=r[0].value&&(n.incrementalRaceUpdates+=n.sanitizer.sanitize(en.HTML,n.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift())});return function(d){return u.apply(this,arguments)}}())}setupDisplayRewards(e){this.rewardCells=[],this.rewardRows=[];var n=4;if(window.matchMedia("only screen and (max-width: 760px)").matches&&(n=2),null!=e.rewards){for(var r=1;r<=e.rewards.length;r++)this.rewardCells.push({name:e.rewards[r-1].name,amount:e.rewards[r-1].amount}),r%n==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}goToRaceSelection(){this.raceFinished.emit(!0)}skipRaceAnimation(){this.raceSkipped=!0,this.skipRace.next(!0)}pauseRaceAnimation(){this.racePaused=!this.racePaused,this.pauseRace.next(!0)}getFrameByFrameStats(){var e=this;this.totalRacers=this.lookupService.getTotalRacersByRace(this.selectedRace);var r=0,o=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount;this.frameByFrameSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=Sr(function*(l){e.racePaused||(e.selectedRace.raceType===Oe.event&&e.selectedRace.eventRaceType===Ge.grandPrix&&(e.globalService.globalVar.eventRaceData.currentRaceSegmentCount>o&&(e.selectedRace=e.globalService.globalVar.eventRaceData.currentRaceSegment),o=e.globalService.globalVar.eventRaceData.currentRaceSegmentCount),r+=1);var c;c=e.selectedRace.raceType===Oe.event&&e.selectedRace.eventRaceType===Ge.grandPrix?Math.round(e.globalService.globalVar.eventRaceData.segmentTimeCounter*e.frameModifier):r;try{if(e.selectedRace.raceUI.velocityByFrame.length<=c||(e.selectedRace.raceType!==Oe.event||e.selectedRace.eventRaceType!==Ge.grandPrix)&&e.raceSkipped){var u=e.selectedRace.raceUI.velocityByFrame.length-1;e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[u]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[u]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[u].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[u],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[u])}else e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[c]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[c]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[c].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[c],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[c])}catch(d){console.log("error")}});return function(l){return s.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(xi),P(Ri),P(vn),P(Zv),P(_o),P(Fo),P(a0))},t.\u0275cmp=ft({type:t,selectors:[["app-race"]],viewQuery:function(e,n){if(1&e&&_a(e9,7),2&e){let r;yn(r=wn())&&(n.circuitRewardModal=r.first)}},inputs:{selectedRace:"selectedRace"},outputs:{raceFinished:"raceFinished"},decls:11,vars:5,consts:[["id","raceInfo"],["class","bothDisplayValues",4,"ngIf"],["class","oneDisplayValue",4,"ngIf"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"back"],[3,"click"],["circuitRewardModal",""],[1,"bothDisplayValues"],[1,"headerInfo"],[3,"click",4,"ngIf"],[1,"mobileVersion"],[1,"webVersion"],[1,"updates"],[1,"drawRaces"],[3,"race","skip","pause"],[1,"raceUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],[1,"oneDisplayValue"],[1,"individualItemHeaderInfo"],[1,"raceUpdates","onlyText",3,"scrollTop","innerHTML"],[1,"drawRace","onlyDraw"],[1,"results"],[1,"s4Heading"],[1,"rewards"],[4,"ngFor","ngForOf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],["popContent",""],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,r9,30,13,"div",1),x(2,s9,8,4,"div",2),x(3,d9,28,11,"div",2),x(4,h9,1,0,"br",3),x(5,m9,6,1,"div",4),f(6,"div",5)(7,"button",6),V("click",function(){return n.goToRaceSelection()}),g(8,"Back"),h()()(),x(9,v9,18,2,"ng-template",null,7,ct)),2&e&&(p(1),_("ngIf",n.displayVisualRace&&n.displayTextUpdates),p(1),_("ngIf",!n.displayVisualRace&&n.displayTextUpdates),p(1),_("ngIf",n.displayVisualRace&&!n.displayTextUpdates),p(1),_("ngIf",n.displayVisualRace&&!n.displayTextUpdates),p(1),_("ngIf",n.displayResults))},directives:[sn,J7,ai,Hr],styles:['#raceInfo[_ngcontent-%COMP%]{height:100%;margin-left:.5rem;margin-right:.5rem;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre;overflow-x:hidden}.headerInfo[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between}.individualItemHeaderInfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bothDisplayValues[_ngcontent-%COMP%], .oneDisplayValue[_ngcontent-%COMP%]{height:76.5%}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawRace raceUpdates"}.raceUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:raceUpdates}.drawRaces[_ngcontent-%COMP%]{grid-area:drawRace}.onlyText[_ngcontent-%COMP%], .onlyDraw[_ngcontent-%COMP%]{text-align:center;height:100%}.rightAlign[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:left}td[_ngcontent-%COMP%]{width:16.666%}.mobileVersion[_ngcontent-%COMP%]{display:none}.webVersion[_ngcontent-%COMP%]{display:inline-block}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;padding:1rem}.results[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawRace" "raceUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.raceUpdates[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:inline-block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();function b9(t,i){if(1&t){const e=fe();f(0,"div",9)(1,"button",10),V("click",function(){return B(e),w(2).returnToAnimalView()}),g(2,"Back"),h()()}}function _9(t,i){if(1&t){const e=fe();f(0,"div",11)(1,"div")(2,"app-animal-list",12),V("selectedAnimal",function(r){return B(e),w(2).selectedAnimal(r)}),h()()()}if(2&t){const e=w(2);p(2),_("availableAnimals",e.availableAnimals)("isTrainingTrackView",!0)}}function y9(t,i){if(1&t){const e=fe();f(0,"div",13)(1,"app-training-track-race-view",14),V("raceSelected",function(r){return B(e),w(2).raceSelected(r)})("returnEmitter",function(){return B(e),w(2).returnToAnimalView()}),h()()}if(2&t){const e=w(2);p(1),_("selectedAnimal",e.animal)}}function w9(t,i){if(1&t&&(f(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),g(4,"Training Track"),h(),f(5,"div",5),g(6," Each animal can run their own training track to gain rewards and unique bonuses. To get each reward, you will have to beat each track at a progressively faster pace. "),h()(),x(7,b9,3,0,"div",6),h(),D(8,"hr"),x(9,_9,3,2,"div",7),x(10,y9,2,1,"div",8),h()),2&t){const e=w();p(7),_("ngIf",e.animalSelected),p(2),_("ngIf",!e.animalSelected),p(1),_("ngIf",e.animalSelected)}}function C9(t,i){if(1&t){const e=fe();f(0,"div",15)(1,"app-race",16),V("raceFinished",function(){return B(e),w().raceFinished()}),h()()}if(2&t){const e=w();p(1),_("selectedRace",e.selectedRace)}}const S9=function(t){return{fullHeight:t}};let l2=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.animalSelected=!1,this.raceSelectedEmitter=new ot}ngOnInit(){this.availableAnimals=this.globalService.globalVar.animals.filter(n=>n.isAvailable);var e=this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck);null!=e&&(this.existingPrimaryDeckAnimals=[],e.selectedAnimals.forEach(n=>{this.existingPrimaryDeckAnimals.push(n)}))}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(){this.animalSelected=!1}raceSelected(e){this.selectedRace=e,this.showRace=!0,this.raceSelectedEmitter.emit(!0)}ngOnDestroy(){this.raceSelectedEmitter.emit(!1)}raceFinished(){this.showRace=!1,this.raceSelectedEmitter.emit(!1);var e=this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck);null!=e&&(e.selectedAnimals=this.existingPrimaryDeckAnimals)}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(li))},t.\u0275cmp=ft({type:t,selectors:[["app-training-track-view"]],outputs:{raceSelectedEmitter:"raceSelectedEmitter"},decls:3,vars:5,consts:[[1,"trainingTrackView",3,"ngClass"],[4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"infoGridContainer"],[1,"info"],[1,"description"],["class","back",4,"ngIf"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"back"],[3,"click"],[1,"selectAnimalView"],[3,"availableAnimals","isTrainingTrackView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","raceSelected","returnEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,w9,11,3,"div",1),x(2,C9,2,1,"div",2),h()),2&e&&(_("ngClass",fi(3,S9,n.showRace)),p(1),_("ngIf",!n.showRace),p(1),_("ngIf",n.showRace))},directives:[Zn,sn,kf,K7,s2],styles:['.trainingTrackView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.fullHeight[_ngcontent-%COMP%]{height:100%}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}']}),t})();function T9(t,i){1&t&&(f(0,"span",13),g(1,"!"),h())}function D9(t,i){1&t&&(f(0,"span",13),g(1,"!"),h())}function R9(t,i){if(1&t){const e=fe();f(0,"div",6)(1,"div",7)(2,"button",8),V("click",function(){B(e);const r=w(2);return r.changeDisplayRaceView(r.raceTypeEnum.circuit)}),g(3,"Circuit Races"),h(),f(4,"button",9),V("click",function(){B(e);const r=w(2);return r.changeDisplayRaceView(r.raceTypeEnum.special)}),x(5,T9,2,0,"span",10),g(6,"Special Races"),h(),f(7,"button",11),V("click",function(){B(e);const r=w(2);return r.changeDisplayRaceView(r.raceTypeEnum.event)}),x(8,D9,2,0,"span",10),g(9,"Event Races"),h(),f(10,"button",12),V("click",function(){B(e);const r=w(2);return r.changeDisplayRaceView(r.raceTypeEnum.trainingTrack)}),g(11,"Training Track"),h()(),D(12,"hr"),h()}if(2&t){const e=w(2);p(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.circuit?"filterActive":""),p(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.special?"filterActive":""),p(1),_("ngIf",e.newSpecialRaceAvailable),p(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.event?"filterActive":""),p(1),_("ngIf",e.eventRaceNowAvailable),p(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.trainingTrack?"filterActive":"")}}function x9(t,i){if(1&t){const e=fe();f(0,"app-circuit-view",14),V("raceSelected",function(r){return B(e),w(2).raceSelected(r)}),h()}}function M9(t,i){if(1&t){const e=fe();f(0,"app-local-view",14),V("raceSelected",function(r){return B(e),w(2).raceSelected(r)}),h()}}function k9(t,i){if(1&t){const e=fe();f(0,"app-event-view",14),V("raceSelected",function(r){return B(e),w(2).raceSelected(r)}),h()}}function A9(t,i){if(1&t){const e=fe();f(0,"app-training-track-view",15),V("raceSelectedEmitter",function(r){return B(e),w(2).trainingTrackRaceSelected(r)}),h()}}function P9(t,i){if(1&t&&(f(0,"div",2),x(1,R9,13,6,"div",3),x(2,x9,1,0,"app-circuit-view",4),x(3,M9,1,0,"app-local-view",4),x(4,k9,1,0,"app-event-view",4),x(5,A9,1,0,"app-training-track-view",5),h()),2&t){const e=w();p(1),_("ngIf",!e.trainingTrackRace),p(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.circuit),p(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.special),p(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.event),p(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.trainingTrack)}}function E9(t,i){if(1&t){const e=fe();f(0,"div",16)(1,"app-race",17),V("raceFinished",function(){return B(e),w().raceFinished()}),h()()}if(2&t){const e=w();p(1),_("selectedRace",e.selectedRace)}}let I9=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.componentCommunicationService=n,this.gameLoopService=r,this.lookupService=a,this.displayRaceView=Oe.circuit,this.showRace=!1,this.trainingTrackRace=!1,this.raceTypeEnum=Oe,this.newSpecialRaceAvailable=!1,this.eventRaceNowAvailable=!1}ngOnInit(){var e=this;this.componentCommunicationService.setNewView(vt.raceselection),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var n=Sr(function*(r){e.newSpecialRaceAvailable=e.globalService.globalVar.notifications.isNewSpecialRaceAvailable&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>9),e.eventRaceNowAvailable=e.globalService.globalVar.notifications.isEventRaceNowActive&&e.lookupService.isItemUnlocked("grandPrix")&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>9)});return function(r){return n.apply(this,arguments)}}()),this.communicationSubscription=this.componentCommunicationService.getRaceView().subscribe(n=>{this.displayRaceView=n})}changeDisplayRaceView(e){this.displayRaceView=e,e===Oe.special&&(this.newSpecialRaceAvailable=this.globalService.globalVar.notifications.isNewSpecialRaceAvailable=!1),e===Oe.event&&(this.eventRaceNowAvailable=this.globalService.globalVar.notifications.isEventRaceNowActive=!1)}raceSelected(e){this.selectedRace=e,this.showRace=!0}raceFinished(){this.showRace=!1}trainingTrackRaceSelected(e){this.trainingTrackRace=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.communicationSubscription&&this.communicationSubscription.unsubscribe(),this.globalService.globalVar.localRaces=[]}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(li),P(xi),P(vn))},t.\u0275cmp=ft({type:t,selectors:[["app-race-selection-view"]],decls:2,vars:2,consts:[["class","raceSelectionDiv",4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"raceSelectionDiv"],["class","info",4,"ngIf"],[3,"raceSelected",4,"ngIf"],[3,"raceSelectedEmitter",4,"ngIf"],[1,"info"],[1,"raceGridContainer"],[1,"buttonAsText","circuit","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","local","s5Heading","clickableText",3,"ngClass","click"],["class","availableIcon",4,"ngIf"],[1,"buttonAsText","event","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","trainingTrack","s5Heading","clickableText",3,"ngClass","click"],[1,"availableIcon"],[3,"raceSelected"],[3,"raceSelectedEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,n){1&e&&(x(0,P9,6,5,"div",0),x(1,E9,2,1,"div",1)),2&e&&(_("ngIf",!n.showRace),p(1),_("ngIf",n.showRace))},directives:[sn,Zn,qH,i7,j7,l2,s2],styles:['.raceGridContainer[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"circuit local event trainingTrack"}.raceSelectionDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.circuit[_ngcontent-%COMP%]{grid-area:circuit;text-align:center}.local[_ngcontent-%COMP%]{grid-area:local;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.trainingTrack[_ngcontent-%COMP%]{grid-area:trainingTrack;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary);-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.availableIcon[_ngcontent-%COMP%]{color:var(--foreground-quaternary);border-radius:25px;background:var(--background-five);padding:0 .5rem;margin-right:.25rem}@media (max-width: 800px){.raceGridContainer[_ngcontent-%COMP%]{grid-template-columns:.9fr 1.1fr 1fr 1fr}}']}),t})(),V9=(()=>{class t{constructor(e){this.utilityService=e}ngOnInit(){}toggle(){null!=this.callbackFunction&&this.callbackFunction()}getId(){return"cbxInput"+this.id}}return t.\u0275fac=function(e){return new(e||t)(P(Ri))},t.\u0275cmp=ft({type:t,selectors:[["app-toggle"]],inputs:{model:"model",label:"label",id:"id",popoverText:"popoverText",callbackFunction:"callbackFunction"},decls:5,vars:5,consts:[[1,"custom-control","custom-switch"],["triggers","mouseenter:mouseleave",3,"ngbPopover"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange","input"],[1,"custom-control-label",3,"for"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"span",1)(2,"input",2),V("ngModelChange",function(a){return n.model=a})("input",function(){return n.toggle()}),h(),f(3,"label",3),g(4),h()()()),2&e&&(p(1),_("ngbPopover",n.popoverText),p(1),_("id",n.getId())("ngModel",n.model),p(1),_("for",n.getId()),p(1),at(n.label))},directives:[Hr,Th,Sl,Dl],styles:[""]}),t})();function O9(t,i){if(1&t&&(f(0,"div",8)(1,"em"),g(2),h(),D(3,"br")(4,"br"),h()),2&t){const e=w();p(2),K("",e.pointsNeededInColumn," points needed in this column to unlock")}}function N9(t,i){1&t&&(f(0,"div",8)(1,"em"),g(2," Click Upgrade to unlock this talent. "),D(3,"br")(4,"br"),h()())}function F9(t,i){1&t&&(f(0,"div"),D(1,"br")(2,"br"),h())}function B9(t,i){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"em")(3,"div",8),g(4,"Next Upgrade: "),h()(),D(5,"div",9),h()),2&t){const e=w();p(5),_("innerHTML",e.upgradedTalentDescription,Bt)}}const L9=function(t){return{talentInactive:t}};let U9=(()=>{class t{constructor(e,n,r){this.lookupService=e,this.gameLoopService=n,this.globalService=r,this.spentTalent=new ot}ngOnInit(){this.talentTreeType=this.selectedAnimal.talentTree.talentTreeType,this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.totalPossiblePoints=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.talentTreeType),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0;var e=0;1===this.row&&(e=this.selectedAnimal.talentTree.row2RequiredPoints),2===this.row&&(e=this.selectedAnimal.talentTree.row3RequiredPoints),3===this.row&&(e=this.selectedAnimal.talentTree.row4RequiredPoints),this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0,this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(n=>{this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0})}isTalentMaxed(){var e=!1;return this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column)>=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.selectedAnimal.talentTree.talentTreeType)&&(e=!0),e}spendTalentPoint(){this.isTalentMaxed()||(this.selectedAnimal.talentTree.spendTalentPoint(this.row,this.column),this.spentTalent.emit(!0),this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.globalService.calculateAnimalRacingStats(this.selectedAnimal))}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(vn),P(xi),P(Mt))},t.\u0275cmp=ft({type:t,selectors:[["app-talent"]],inputs:{selectedAnimal:"selectedAnimal",row:"row",column:"column"},outputs:{spentTalent:"spentTalent"},decls:15,vars:13,consts:[[1,"talent"],[1,"header","keyword"],[1,"content"],["class","centeredText",4,"ngIf"],[4,"ngIf"],[1,"description",3,"ngClass","innerHTML"],[1,"footer"],[3,"disabled","click"],[1,"centeredText"],[1,"talentInactive",3,"innerHTML"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"span"),g(3),h()(),f(4,"div",2),x(5,O9,5,1,"div",3),x(6,N9,5,0,"div",3),x(7,F9,3,0,"div",4),D(8,"div",5),x(9,B9,6,1,"div",4),D(10,"br"),f(11,"div",6),g(12),f(13,"button",7),V("click",function(){return n.spendTalentPoint()}),g(14,"Upgrade"),h()()()()),2&e&&(p(3),ii("Sprint Column ",n.column+1," Row ",n.row+1,""),p(2),_("ngIf",n.pointsNeededInColumn>0),p(1),_("ngIf",n.pointsNeededInColumn<=0&&0===n.pointsInTalent),p(1),_("ngIf",n.pointsInTalent===n.totalPossiblePoints),p(1),_("ngClass",fi(11,L9,0===n.pointsInTalent))("innerHTML",n.talentDescription,Bt),p(1),_("ngIf",n.pointsInTalent>0&&n.pointsInTalent<n.totalPossiblePoints),p(3),ii(" ",n.pointsInTalent," / ",n.totalPossiblePoints," Points "),p(1),_("disabled",!n.hasTalentPoint||!n.hasEnoughPointsInColumn||n.isTalentMaxed()))},directives:[sn,Zn],styles:['.talent[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr;justify-content:stretch;grid-template-areas:"header" "content"}.header[_ngcontent-%COMP%]{grid-area:header;background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary)}.content[_ngcontent-%COMP%]{grid-area:content;margin:1rem;display:flex;flex-direction:column;justify-content:space-between}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.talentInactive[_ngcontent-%COMP%]{color:#00000080}']}),t})();function H9(t,i){if(1&t&&(f(0,"div",14),g(1,"Equipped: "),f(2,"span",52),g(3),h(),D(4,"br")(5,"br"),g(6),h()),2&t){const e=w();_("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)),p(3),at(e.selectedAnimal.equippedItem.name),p(3),K(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)," ")}}function G9(t,i){1&t&&(f(0,"div"),g(1," Equipped: None "),h())}function z9(t,i){if(1&t){const e=fe();f(0,"button",8),V("click",function(){return B(e),w().unequipItem()}),g(1,"Unequip Item"),h()}}function j9(t,i){if(1&t&&(f(0,"span",12),g(1),h()),2&t){const e=w(2);p(1),K(" ",e.getTalentTreeName(),"")}}function $9(t,i){if(1&t){const e=fe();f(0,"div",53)(1,"div"),x(2,j9,2,1,"span",54),h(),f(3,"button",8),V("click",function(){B(e);const r=w(),a=st(217);return r.openTalentsModal(a)}),g(4,"View Talents"),h()()}if(2&t){const e=w();p(2),_("ngIf",e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none)}}function W9(t,i){if(1&t){const e=fe();f(0,"div")(1,"span",56),g(2),h(),f(3,"span")(4,"button",57),V("click",function(){B(e);const r=w(2);return r.editingName=!r.editingName}),g(5,"Edit"),h()()()}if(2&t){const e=w(2);p(2),K("",e.selectedAnimal.name," ")}}function q9(t,i){if(1&t){const e=fe();f(0,"div")(1,"span")(2,"input",58),V("ngModelChange",function(r){return B(e),w(2).newName=r}),h()(),f(3,"span")(4,"button",8),V("click",function(){return B(e),w(2).editName()}),g(5,"Save"),h()(),f(6,"span")(7,"button",8),V("click",function(){B(e);const r=w(2);return r.editingName=!r.editingName}),g(8,"Cancel"),h()()()}if(2&t){const e=w(2);p(2),_("ngModel",e.newName)}}function X9(t,i){if(1&t&&(f(0,"span",59),g(1),h()),2&t){const e=w(2);Zi("ngbPopover",e.traitStatGainDescription),p(1),K(" ",e.selectedAnimal.trait.traitName," ")}}function Y9(t,i){if(1&t&&(f(0,"div"),x(1,W9,6,1,"div",6),x(2,q9,9,1,"div",6),f(3,"span",12),x(4,X9,2,2,"span",55),g(5),h()()),2&t){const e=w();p(1),_("ngIf",!e.editingName),p(1),_("ngIf",e.editingName),p(2),_("ngIf",null!=e.selectedAnimal.trait),p(1),K(" ",e.selectedAnimal.getAnimalType()," ")}}function Q9(t,i){if(1&t){const e=fe();f(0,"div")(1,"span")(2,"button",8),V("click",function(){B(e);const r=w(2);return r.editingName=!r.editingName}),g(3,"Edit Name"),h()()()}}function K9(t,i){if(1&t){const e=fe();f(0,"div")(1,"span")(2,"input",60),V("ngModelChange",function(r){return B(e),w(2).newName=r}),h()(),f(3,"span")(4,"button",8),V("click",function(){return B(e),w(2).editName()}),g(5,"Save"),h()(),f(6,"span")(7,"button",8),V("click",function(){B(e);const r=w(2);return r.editingName=!r.editingName}),g(8,"Cancel"),h()()()}if(2&t){const e=w(2);p(2),_("ngModel",e.newName)}}function Z9(t,i){if(1&t&&(f(0,"span",59),g(1),h()),2&t){const e=w(2);Zi("ngbPopover",e.traitStatGainDescription),p(1),K(" ",e.selectedAnimal.trait.traitName," ")}}function J9(t,i){if(1&t&&(f(0,"div"),x(1,Q9,4,0,"div",6),x(2,K9,9,1,"div",6),f(3,"span",12),x(4,Z9,2,2,"span",55),g(5),h()()),2&t){const e=w();p(1),_("ngIf",!e.editingName),p(1),_("ngIf",e.editingName),p(2),_("ngIf",null!=e.selectedAnimal.trait),p(1),K(" ",e.selectedAnimal.getAnimalType()," ")}}function eG(t,i){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=w();p(1),K("(",e.selectedAnimal.currentTraining.trainingName,")")}}function tG(t,i){if(1&t&&D(0,"app-toggle",61),2&t){const e=w();_("callbackFunction",e.toggleAutoBreed)("label","Auto Breed")("model",e.autoBreedActive)}}function nG(t,i){if(1&t&&(f(0,"div",14),g(1),D(2,"br")(3,"br"),g(4),h()),2&t){const e=w(2);_("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)),p(1),K("Orb: ",e.selectedAnimal.equippedOrb.name," "),p(3),K(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)," ")}}function iG(t,i){1&t&&(f(0,"div"),g(1," Orb: None "),h())}function rG(t,i){if(1&t){const e=fe();f(0,"button",8),V("click",function(){return B(e),w(2).unequipOrb()}),g(1,"Unequip Orb"),h()}}function aG(t,i){if(1&t){const e=fe();f(0,"div",62),x(1,nG,5,3,"div",5),x(2,iG,2,0,"div",6),D(3,"br"),x(4,rG,2,0,"button",7),f(5,"button",8),V("click",function(){B(e);const r=w(),a=st(215);return r.openOrbModal(a)}),g(6,"Equip New Orb"),h()()}if(2&t){const e=w();p(1),_("ngIf",null!=e.selectedAnimal.equippedOrb),p(1),_("ngIf",null==e.selectedAnimal.equippedOrb),p(2),_("ngIf",null!=e.selectedAnimal.equippedOrb)}}function oG(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Training:"),h(),g(4),Lt(5,"number"),h(),D(6,"br"),h()),2&t){const e=w(),n=st(203);p(2),_("ngbPopover",n),p(2),K(" ",on(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromTraining,"1.0-0")," ")}}function sG(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Free Races:"),h(),g(4),Lt(5,"number"),h()()),2&t){const e=w(),n=st(199);p(2),_("ngbPopover",n),p(2),K(" ",on(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces,"1.0-0")," ")}}function lG(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Circuit Races:"),h(),g(4),Lt(5,"number"),h()()),2&t){const e=w(),n=st(201);p(2),_("ngbPopover",n),p(2),K(" ",on(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces,"1.0-0")," ")}}function cG(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Training Time Reduction:"),h(),g(4),Lt(5,"number"),h()()),2&t){const e=w(),n=st(207);p(2),_("ngbPopover",n),p(2),K(" ",on(5,2,e.selectedAnimal.miscStats.trainingTimeReduction,"1.0-0"),"% ")}}function uG(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Diminishing Returns per Facility Level:"),h(),g(4),Lt(5,"number"),h()()),2&t){const e=w(),n=st(205);p(2),_("ngbPopover",n),p(2),K(" ",on(5,2,e.selectedAnimal.miscStats.diminishingReturnsBonus,"1.0-0")," ")}}function dG(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Talents:"),h(),g(4),Lt(5,"number"),h()()),2&t){const e=w(),n=st(209);p(2),_("ngbPopover",n),p(2),K(" ",on(5,2,e.selectedAnimal.miscStats.bonusTalents,"1.0-0")," ")}}function hG(t,i){if(1&t){const e=fe();f(0,"button",64),V("click",function(){B(e);const r=w();return r.selectAbility(r.ability2)}),g(1),h()}if(2&t){const e=w();St("filterActive",e.selectedAnimal.ability.name===e.ability2.name),p(1),K("",e.ability2.name," ")}}function fG(t,i){if(1&t){const e=fe();f(0,"button",65),V("click",function(){B(e);const r=w();return r.selectAbility(r.ability3)}),g(1),h()}if(2&t){const e=w();St("filterActive",e.selectedAnimal.ability.name===e.ability3.name),p(1),K("",e.ability3.name," ")}}function pG(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w();p(1),ii("",e.selectedAbility.abilityXp," / ",e.selectedAbility.abilityMaxXp," XP")}}function gG(t,i){1&t&&(f(0,"span"),g(1,"MAX"),h())}function mG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getTopSpeedPopover()," ")}}function vG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getAccelerationPopover()," ")}}function bG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getEndurancePopover()," ")}}function _G(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getPowerPopover()," ")}}function yG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getFocusPopover()," ")}}function wG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getAdaptabilityPopover()," ")}}function CG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getAbilityLevelPopover()," ")}}function SG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getBonusFreeRaceXpPopover()," ")}}function TG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getBonusCircuitRaceXpPopover()," ")}}function DG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getBonusTrainingXpPopover()," ")}}function RG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," ")}}function xG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getBonusTrainingTimeReductionPopover()," ")}}function MG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),K(" ",e.getBonusTalentsPopover()," ")}}function kG(t,i){if(1&t&&(f(0,"div"),D(1,"span",31),h()),2&t){const e=w().$implicit,n=w(4);p(1),_("innerHTML",n.getItemAdditionalText(e),Bt)}}const AG=function(t){return{activeSelectedItem:t}};function PG(t,i){if(1&t){const e=fe();f(0,"td",76)(1,"div",77),V("click",function(){const a=B(e).$implicit;return w(4).selectItem(a)}),f(2,"h6",78),g(3),h(),x(4,kG,2,1,"div",6),D(5,"br")(6,"br"),g(7),D(8,"br")(9,"br"),h()()}if(2&t){const e=i.$implicit,n=w(4);p(1),_("ngClass",fi(5,AG,e.isSelected)),p(2),ii("",e.name," (",e.amount,")"),p(1),_("ngIf",n.itemHasAdditionalText(e)),p(3),K(" ",n.getItemShortDescription(e.name)," ")}}function EG(t,i){if(1&t&&(f(0,"tr"),x(1,PG,10,7,"td",75),h()),2&t){const e=i.$implicit;p(1),_("ngForOf",e)}}function IG(t,i){if(1&t){const e=fe();f(0,"div",79)(1,"span",80)(2,"span")(3,"span",78),g(4),h(),g(5),h(),f(6,"span",81)(7,"label",82),g(8,"Amount: "),h(),f(9,"input",83),V("ngModelChange",function(r){return B(e),w(3).selectedItemQuantity=r}),h(),f(10,"button",84),V("click",function(){return B(e),w(3).useItem()}),g(11,"Use"),h()()()()}if(2&t){const e=w(3);p(4),at(e.selectedItem.name),p(1),K(" - ",e.getItemShortDescription(e.selectedItem.name)," "),p(4),_("ngModel",e.selectedItemQuantity)}}function VG(t,i){if(1&t&&(f(0,"div")(1,"div",71)(2,"div",72)(3,"table"),x(4,EG,2,1,"tr",73),h()()(),x(5,IG,12,3,"div",74),h()),2&t){const e=w(2);p(4),_("ngForOf",e.itemsRows),p(1),_("ngIf",null!=e.selectedItem)}}function OG(t,i){1&t&&(f(0,"div"),g(1," No items available. "),h())}function NG(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Use Item"),h(),f(5,"button",70),V("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),x(7,VG,6,2,"div",6),x(8,OG,2,0,"div",6),h()()}if(2&t){const e=w();p(7),_("ngIf",e.usableItemsList.length>0),p(1),_("ngIf",0==e.usableItemsList.length)}}const FG=function(t){return{activeSelectedEquipment:t}};function BG(t,i){if(1&t){const e=fe();f(0,"td",76)(1,"div",86),V("click",function(){const a=B(e).$implicit;return w(3).selectEquipment(a)}),f(2,"h6",52),g(3),h(),D(4,"br")(5,"br"),g(6),D(7,"br"),h()()}if(2&t){const e=i.$implicit,n=w(3);p(1),_("ngClass",fi(4,FG,e.isSelected)),p(2),ii("",e.name," (",e.amount,")"),p(3),K(" ",n.getEquipmentShortDescription(e.name)," ")}}function LG(t,i){if(1&t&&(f(0,"tr"),x(1,BG,8,6,"td",75),h()),2&t){const e=i.$implicit;p(1),_("ngForOf",e)}}function UG(t,i){if(1&t){const e=fe();f(0,"div",79)(1,"span",87)(2,"span")(3,"span",52),g(4),h(),g(5),h(),f(6,"span",81)(7,"button",84),V("click",function(){return B(e),w(2).equipItem()}),g(8,"Equip"),h()()()()}if(2&t){const e=w(2);p(4),at(e.selectedEquipment.name),p(1),K(" - ",e.getEquipmentShortDescription(e.selectedEquipment.name)," ")}}function HG(t,i){1&t&&(f(0,"div"),g(1," No equipment available. "),h())}function GG(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Change Equipment"),h(),f(5,"button",70),V("click",function(){const a=B(e).$implicit;return w().clearSelectedItems(),a.dismiss()}),g(6,"X"),h()(),f(7,"div")(8,"div",71)(9,"div",85)(10,"table"),x(11,LG,2,1,"tr",73),h()()(),x(12,UG,9,2,"div",74),h(),x(13,HG,2,0,"div",6),h()()}if(2&t){const e=w();p(11),_("ngForOf",e.equipmentRows),p(1),_("ngIf",null!=e.selectedEquipment),p(1),_("ngIf",0==e.equipmentList.length)}}const zG=function(t){return{activeSelectedOrb:t}};function jG(t,i){if(1&t){const e=fe();f(0,"td",76)(1,"div",89),V("click",function(){const a=B(e).$implicit;return w(3).selectOrb(a)}),f(2,"h6",90),g(3),h(),D(4,"br"),g(5),D(6,"br"),h()()}if(2&t){const e=i.$implicit,n=w(3);p(1),_("ngClass",fi(3,zG,e.isSelected)),p(2),at(e.name),p(2),K(" ",n.getEquipmentShortDescription(e.name)," ")}}function $G(t,i){if(1&t&&(f(0,"tr"),x(1,jG,7,5,"td",75),h()),2&t){const e=i.$implicit;p(1),_("ngForOf",e)}}function WG(t,i){if(1&t){const e=fe();f(0,"div",79)(1,"span",91)(2,"span")(3,"span",90),g(4),h(),g(5),h(),f(6,"span",81)(7,"button",84),V("click",function(){return B(e),w(2).equipOrb()}),g(8,"Equip"),h()()()()}if(2&t){const e=w(2);p(4),at(e.selectedOrb.name),p(1),K(" - ",e.getEquipmentShortDescription(e.selectedOrb.name)," ")}}function qG(t,i){1&t&&(f(0,"div"),g(1," No equipment available. "),h())}function XG(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Change Orb"),h(),f(5,"button",70),V("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div")(8,"div",71)(9,"div",88)(10,"table"),x(11,$G,2,1,"tr",73),h()()(),x(12,WG,9,2,"div",74),h(),x(13,qG,2,0,"div",6),h()()}if(2&t){const e=w();p(11),_("ngForOf",e.orbRows),p(1),_("ngIf",null!=e.selectedOrb),p(1),_("ngIf",0==e.equipmentList.length)}}const YG=function(t){return{selectedTalentTree:t}};function QG(t,i){if(1&t){const e=fe();f(0,"span",96),V("click",function(){const a=B(e).$implicit;return w(4).filterTalentTree(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=w(4);_("ngClass",fi(2,YG,n.selectedTalentTree===e)),p(1),K(" ",e.trim()," ")}}function KG(t,i){if(1&t&&(f(0,"div")(1,"strong"),g(2),h()()),2&t){const e=w(4);p(2),K(" ",e.inDepthTalentTreeDescription," ")}}function ZG(t,i){if(1&t&&(f(0,"div")(1,"div",94),x(2,QG,2,4,"span",95),h(),D(3,"hr"),x(4,KG,3,1,"div",6),h()),2&t){const e=w(3);p(2),_("ngForOf",e.talentTreeOptions),p(2),_("ngIf",""!==e.inDepthTalentTreeDescription&&void 0!==e.inDepthTalentTreeDescription)}}function JG(t,i){if(1&t){const e=fe();f(0,"div")(1,"div",71),x(2,ZG,5,2,"div",6),h(),f(3,"div",79)(4,"button",93),V("click",function(){return B(e),w(2).selectTalentTree()}),g(5,"Select"),h()()()}if(2&t){const e=w(2);p(2),_("ngIf",e.talentTreeOptions.length>0)}}function ez(t,i){1&t&&D(0,"div",107)}function tz(t,i){if(1&t&&D(0,"div",11),2&t){const e=w().index,n=w().index;_("ngClass",w(3).getBorderConditional(n,e))}}function nz(t,i){if(1&t){const e=fe();f(0,"div",102)(1,"div",11)(2,"app-talent",103),V("spentTalent",function(r){return B(e),w(4).spentTalent(r)}),h()(),f(3,"div",104),x(4,ez,1,0,"div",105),x(5,tz,1,1,"div",106),h()()}if(2&t){const e=i.index,n=w().index,r=w(3);p(1),_("ngClass",n<r.talentRows-1?"talentContent":"lastTalentContent"),p(1),_("row",n)("column",e)("selectedAnimal",r.selectedAnimal),p(2),_("ngIf",n!==r.talentRows-1),p(1),_("ngIf",n!==r.talentRows-1)}}const c2=function(){return[]};function iz(t,i){if(1&t&&(f(0,"div",99)(1,"div",100),x(2,nz,6,6,"div",101),h()()),2&t){const e=w(3);p(2),_("ngForOf",nm(1,c2).constructor(e.talentColumns))}}function rz(t,i){if(1&t&&(f(0,"div",71)(1,"div",97),g(2),h(),D(3,"br"),f(4,"p")(5,"em"),g(6," Note that this functionality is new and subject to change. I have plans to add more talents and certain talents will likely still need rebalancing/redesigning. Bear with me as I work that out. Once I feel like talents are in a final state, everyone will have the option to reset their talent choices if they choose to. Feel free to experiment with the options as they are now and let me know if you have any feedback. Thanks! "),h()(),D(7,"br"),x(8,iz,3,2,"div",98),h()),2&t){const e=w(2);p(2),K("Available Talent Points: ",e.availableTalentPoints,""),p(6),_("ngForOf",nm(2,c2).constructor(e.talentRows))}}function az(t,i){1&t&&(f(0,"div"),g(1," Coming Soon! "),h())}function oz(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Talents"),h(),f(5,"button",70),V("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),x(7,JG,6,1,"div",6),x(8,rz,9,3,"div",92),x(9,az,2,0,"div",6),h()()}if(2&t){const e=w();p(7),_("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType===e.talentTreeTypeEnum.none),p(1),_("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none),p(1),_("ngIf",!e.talentsReleased)}}function sz(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Base Stats Info"),h(),f(4,"button",70),V("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",108)(8,"div",66)(9,"span",12),g(10,"Speed - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Acceleration - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Endurance - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Power - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Focus - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Adaptability - "),h(),g(36),h(),D(37,"hr"),f(38,"div",66)(39,"span",12),g(40,"Diminishing Returns - "),h(),g(41),h()()()()}if(2&t){const e=w();p(11),K(" ",e.getTopSpeedPopover()," "),p(5),K(" ",e.getAccelerationPopover()," "),p(5),K(" ",e.getEndurancePopover()," "),p(5),K(" ",e.getPowerPopover()," "),p(5),K(" ",e.getFocusPopover()," "),p(5),K(" ",e.getAdaptabilityPopover()," "),p(5),K(" ",e.getDiminishingReturnsPopover()," ")}}function lz(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Racing Stats Info"),h(),f(4,"button",70),V("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",23)(8,"div",66)(9,"span",12),g(10,"Max Speed - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Acceleration Rate - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Stamina - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Power Efficiency - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Focus Distance - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Adaptability Distance - "),h(),g(36),h(),D(37,"hr"),f(38,"div",66)(39,"span",12),g(40,"Burst Chance - "),h(),g(41),h(),D(42,"hr"),f(43,"div",66)(44,"span",12),g(45,"Burst Distance - "),h(),g(46),h()()()()}if(2&t){const e=w();p(11),K(" ",e.selectedAnimal.currentStats.maxSpeedMsPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.accelerationMsPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.staminaPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.powerMsPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.focusMsPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.adaptabilityMsPopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.burstChancePopover()," "),p(5),K(" ",e.selectedAnimal.currentStats.burstDistancePopover()," ")}}function cz(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Miscellaneous Stats Info"),h(),f(4,"button",70),V("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",108)(8,"div",66)(9,"span",12),g(10,"Bonus Breed XP From Training - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Bonus Breed XP From Free Races - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Bonus Breed XP From Circuit Races - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Training Time Reduction - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Bonus Diminishing Returns per Facility Level - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Bonus Talents - "),h(),g(36),h()()()()}if(2&t){const e=w();p(11),K(" ",e.getBonusTrainingXpPopover()," "),p(5),K(" ",e.getBonusFreeRaceXpPopover()," "),p(5),K(" ",e.getBonusCircuitRaceXpPopover()," "),p(5),K(" ",e.getBonusTrainingTimeReductionPopover()," "),p(5),K(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," "),p(5),K(" ",e.getBonusTalentsPopover()," ")}}let uz=(()=>{class t{constructor(e,n,r,a,o,s){this.lookupService=e,this.modalService=n,this.globalService=r,this.componentCommunicationService=a,this.utilityService=o,this.gameLoopService=s,this.returnEmitter=new ot,this.canAutoBreed=!1,this.areTalentsAvailable=!1,this.orbIsUnlocked=!1,this.talentTreeTypeEnum=pt,this.canBreed=!0,this.orbFunctionalityReleased=!1,this.talentsReleased=!0,this.talentColumns=3,this.talentRows=4,this.toggleAutoBreed=()=>{this.autoBreedActive=!this.autoBreedActive,this.selectedAnimal.autoBreedActive=this.autoBreedActive}}keyEvent(e){if(!this.modalService.hasOpenModals()){var n=this.globalService.globalVar.animals.filter(s=>s.isAvailable),r=n.findIndex(s=>this.selectedAnimal===s);if(r>-1)if("ArrowLeft"===e.key)(a=r-1)<0&&(a=n.length-1),this.componentCommunicationService.setAnimalView(vt.animals,o=n[a]),this.resetSelectedAnimalInfo(o);else if("ArrowRight"===e.key){var a,o;(a=r+1)===n.length&&(a=0),this.componentCommunicationService.setAnimalView(vt.animals,o=n[a]),this.resetSelectedAnimalInfo(o)}}}ngOnInit(){this.handleIntroTutorial(),this.resetSelectedAnimalInfo(this.selectedAnimal),this.breedDescriptionPopover="When your Breed XP reaches the max, you can Breed your animal. This will reset your base stats, but it will also increase the amount that your base stats contribute to your racing stats."}returnToAnimalView(){this.returnEmitter.emit(!1)}isAbilityLevelMaxedOut(){var e=25,n=this.globalService.globalVar.modifiers.find(r=>"abilityLevelCapModifier"===r.text);return null!=n&&(e=n.value),null!=this.selectedAbility&&this.selectedAbility.abilityLevel>this.selectedAnimal.breedLevel+e}canAnimalBreed(){var e=!0;return this.selectedAnimal.breedGaugeXp<this.selectedAnimal.breedGaugeMax&&(e=!1),e}breed(){(!this.globalService.globalVar.showBreedWarning||confirm("Breeding will increase your base stat modifiers at the cost of resetting your base stats to their default values. You should do this when you have raced as far as you can without breeding or you have the time to spend to train your stats back. Continue?"))&&(this.globalService.globalVar.showBreedWarning=!1,this.globalService.BreedAnimal(this.selectedAnimal),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel),this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut())}editName(){this.newName.length<=50&&this.newName.length>=1?(this.selectedAnimal.name=this.newName,this.editingName=!1):alert("Name must be between 1 and 50 characters long.")}selectAbility(e){this.selectedAnimal.ability=e,this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal)}updateItemsList(){this.usableItemsList=[],this.globalService.globalVar.resources.filter(e=>(e.itemType===$.Food||e.itemType===$.Consumable)&&e.amount>0).forEach(e=>{void 0!==e&&this.usableItemsList.push(e)}),this.setupDisplayItems()}updateEquipmentList(){this.equipmentList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===$.Equipment&&!this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var n=e.makeCopy(e);this.equipmentList.push(n)}}),this.setupDisplayEquipment(),this.globalService.globalVar.animals.filter(e=>null!=e.equippedItem).forEach(e=>{var n=this.equipmentList.find(r=>{var a;return r.name===(null===(a=e.equippedItem)||void 0===a?void 0:a.name)});null!=n&&(n.amount>0&&(n.amount-=1),n.amount<=0&&(this.equipmentList=this.equipmentList.filter(r=>r.name!==(null==n?void 0:n.name))))})}updateOrbList(){this.orbList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===$.Equipment&&this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var n=e.makeCopy(e);this.orbList.push(n)}}),this.setupDisplayEquipment()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];for(var n=1;n<=this.usableItemsList.length;n++)this.itemsCells.push(this.usableItemsList[n-1]),n%4==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}setupDisplayEquipment(){this.equipmentCells=[],this.equipmentRows=[];for(var n=1;n<=this.equipmentList.length;n++)this.equipmentCells.push(this.equipmentList[n-1]),n%4==0&&(this.equipmentRows.push(this.equipmentCells),this.equipmentCells=[]);0!==this.equipmentCells.length&&this.equipmentRows.push(this.equipmentCells)}setupDisplayOrbs(){this.orbCells=[],this.orbRows=[];for(var n=1;n<=this.orbList.length;n++)this.orbCells.push(this.orbList[n-1]),n%4==0&&(this.orbRows.push(this.orbCells),this.orbCells=[]);0!==this.orbCells.length&&this.orbRows.push(this.orbCells)}openTalentsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openBaseStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openRacingStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openMiscStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openItemModal(e){this.setupDisplayItems(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()},r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()})}openEquipmentModal(e){this.setupDisplayEquipment(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()},r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()})}openOrbModal(e){this.setupDisplayOrbs(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()},r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()})}useItem(){if(void 0!==this.selectedItem){var e=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name&&r.itemType===this.selectedItem.itemType);if(void 0===e)return void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");if(null==this.selectedItemQuantity||isNaN(Number(this.selectedItemQuantity)))return void alert("You must enter a numerical amount to use.");if(e.amount<this.selectedItemQuantity)return void alert("You don't have that many "+e.name+"!");if(this.selectedItem.itemType===$.Consumable&&this.selectedItem.name.includes("Certificate")&&this.lookupService.isAmountMoreThanCertificateCap(this.selectedItemQuantity,this.selectedAnimal,this.selectedItem.name))return void alert("This amount will exceed the amount of these certificates you can give your animal.");if(e.amount-=this.selectedItemQuantity,this.selectedItem.itemType===$.Food)if("Mangoes"===this.selectedItem.name)this.selectedAnimal.breedLevel+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal);else{var n=new Ee(0,0,0,0,0,0);"Apples"===this.selectedItem.name&&(n.acceleration=this.selectedItemQuantity),"Bananas"===this.selectedItem.name&&(n.topSpeed=this.selectedItemQuantity),"Strawberries"===this.selectedItem.name&&(n.endurance=this.selectedItemQuantity),"Carrots"===this.selectedItem.name&&(n.power=this.selectedItemQuantity),"Turnips"===this.selectedItem.name&&(n.focus=this.selectedItemQuantity),"Oranges"===this.selectedItem.name&&(n.adaptability=this.selectedItemQuantity),this.selectedAnimal.increaseStats(n),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}else this.selectedItem.itemType===$.Consumable&&(this.selectedItemQuantity=+this.selectedItemQuantity,"Free Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+=+this.selectedItemQuantity),"Circuit Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces+=2*this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+=+this.selectedItemQuantity),"Training Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromTraining+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+=+this.selectedItemQuantity),"Diminishing Returns Increase Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.diminishingReturnsBonus+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal)));this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()}}selectItem(e){this.selectedItem=e,this.usableItemsList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}clearSelectedItems(){this.usableItemsList.forEach(e=>{e.isSelected=!1})}clearSelectedEquipment(){this.equipmentList.forEach(e=>{e.isSelected=!1})}clearSelectedOrb(){this.orbList.forEach(e=>{e.isSelected=!1})}equipItem(){void 0!==this.selectedEquipment&&(this.selectedAnimal.equippedItem=this.selectedEquipment,this.updateEquipmentList(),this.clearSelectedEquipment(),this.modalService.dismissAll(),this.selectedEquipment=void 0)}selectEquipment(e){this.selectedEquipment=e,this.equipmentList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}unequipItem(){this.selectedAnimal.equippedItem=null,this.clearSelectedEquipment(),this.updateEquipmentList()}equipOrb(){void 0!==this.selectedOrb&&(this.selectedAnimal.equippedOrb=this.selectedOrb,this.updateOrbList(),this.clearSelectedOrb(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal),this.modalService.dismissAll(),this.selectedOrb=void 0)}selectOrb(e){this.selectedOrb=e,this.orbList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}unequipOrb(){this.selectedAnimal.equippedOrb=null,this.clearSelectedOrb(),this.updateOrbList(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}getTopSpeedPopover(){return this.lookupService.topSpeedPopover(this.selectedAnimal)}getAccelerationPopover(){return this.lookupService.accelerationPopover(this.selectedAnimal)}getEndurancePopover(){return this.lookupService.endurancePopover(this.selectedAnimal)}getPowerPopover(){return this.lookupService.powerPopover(this.selectedAnimal)}getFocusPopover(){return this.lookupService.focusPopover(this.selectedAnimal)}getAdaptabilityPopover(){return this.lookupService.adaptabilityPopover(this.selectedAnimal)}getAbilityLevelPopover(){return this.lookupService.abilityLevelPopover(this.selectedAnimal)}getBonusFreeRaceXpPopover(){return this.lookupService.bonusFreeRaceXpPopover(this.selectedAnimal)}getBonusCircuitRaceXpPopover(){return this.lookupService.bonusCircuitRaceXpPopover(this.selectedAnimal)}getBonusTrainingXpPopover(){return this.lookupService.bonusTrainingXpPopover(this.selectedAnimal)}getBonusDiminishingReturnsPerFacilityLevelPopover(){return this.lookupService.bonusDiminishingReturnsPerFacilityLevelPopover(this.selectedAnimal)}getBonusTrainingTimeReductionPopover(){return this.lookupService.bonusTrainingTimeReductionPopover(this.selectedAnimal)}getBonusTalentsPopover(){return this.lookupService.bonusTalentsPopover(this.selectedAnimal)}getAbilityPopover(){return this.lookupService.abilityPopover()}getDiminishingReturnsPopover(){return"Once a trainable stat is over this number, additional gains in this stat will be reduced. Increase with Facility Level."}getEquipmentShortDescription(e){return this.globalService.getEquipmentDescription(e)}getItemShortDescription(e){return this.globalService.getItemDescription(e)}itemHasAdditionalText(e){return!(e.itemType!==$.Consumable||!e.name.includes("Certificate"))}getItemAdditionalText(e){var n="";return e.itemType===$.Consumable&&e.name.includes("Certificate")&&("Free Race Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Circuit Race Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Training Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Diminishing Returns Increase Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>")),this.utilityService.getSanitizedHtml(n)}handleIntroTutorial(){var e=this.globalService.globalVar.animals.find(n=>n.type===L.Hare);!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&9===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}goToAssignedBarn(){var e=this.globalService.globalVar.barns.find(n=>n.barnNumber===this.selectedAnimal.associatedBarnNumber);null!=e&&this.componentCommunicationService.setBarnView(vt.barn,e.barnNumber)}filterTalentTree(e){this.selectedTalentTree=e,this.inDepthTalentTreeDescription=this.lookupService.getInDepthTalentTreeDescription(e)}selectTalentTree(){""!==this.selectedTalentTree&&null!=this.selectedTalentTree?this.selectedAnimal.talentTree.talentTreeType=this.lookupService.convertTalentTreeNameToEnum(this.selectedTalentTree):alert("You must select a talent tree.")}resetSelectedAnimalInfo(e){var n=this;this.selectedAnimal=e,this.areTalentsAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.orbIsUnlocked=this.lookupService.isItemUnlocked("orbs"),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel);var r=this.lookupService.getStockbreeder();null!=r&&r>0&&(this.canAutoBreed=!0),this.canAutoBreed&&(this.autoBreedActive=this.selectedAnimal.autoBreedActive),this.ability1=this.selectedAnimal.availableAbilities[0],this.selectedAnimal.availableAbilities.length>1&&(this.ability2=this.selectedAnimal.availableAbilities[1]),this.selectedAnimal.availableAbilities.length>2&&(this.ability3=this.selectedAnimal.availableAbilities[2]),this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal),null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.updateItemsList(),this.updateEquipmentList(),this.updateOrbList(),this.selectedTalentTree="",this.inDepthTalentTreeDescription="",this.componentCommunicationService.setAnimalView(vt.animals,e);var a=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedAnimal.associatedBarnNumber);this.assignedBarnName=null==a?"Unassigned":"Assigned to: "+this.lookupService.getBarnName(a),this.areTalentsAvailable&&(this.talentTreeOptions=this.lookupService.getTalentTreeNames(),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var o=Sr(function*(s){n.canBreed=n.canAnimalBreed()});return function(s){return o.apply(this,arguments)}}())}getTalentTreeName(){var e=this.selectedAnimal.talentTree.getTotalSpentPoints();return this.lookupService.getTalentTreeNameByEnum(this.selectedAnimal.talentTree.talentTreeType)+" Level "+e}getBorderConditional(e,n){var r,a=e+1,o=0;1===a&&(o=this.selectedAnimal.talentTree.row2RequiredPoints),2===a&&(o=this.selectedAnimal.talentTree.row3RequiredPoints),3===a&&(o=this.selectedAnimal.talentTree.row4RequiredPoints);var s=o-this.selectedAnimal.talentTree.getTalentPointsByColumn(n);return"Flatland"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedFlatlandTalentSpacer height0":!0}:4===s?r={"completedFlatlandTalentSpacer height1":!0}:3===s?r={"completedFlatlandTalentSpacer height2":!0}:2===s?r={"completedFlatlandTalentSpacer height3":!0}:1===s?r={"completedFlatlandTalentSpacer height4":!0}:s<=0&&(r={"completedFlatlandTalentSpacer height5":!0})),"Mountain"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedMountainTalentSpacer height0":!0}:4===s?r={"completedMountainTalentSpacer height1":!0}:3===s?r={"completedMountainTalentSpacer height2":!0}:2===s?r={"completedMountainTalentSpacer height3":!0}:1===s?r={"completedMountainTalentSpacer height4":!0}:s<=0&&(r={"completedMountainTalentSpacer height5":!0})),"Ocean"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedOceanTalentSpacer height0":!0}:4===s?r={"completedOceanTalentSpacer height1":!0}:3===s?r={"completedOceanTalentSpacer height2":!0}:2===s?r={"completedOceanTalentSpacer height3":!0}:1===s?r={"completedOceanTalentSpacer height4":!0}:s<=0&&(r={"completedOceanTalentSpacer height5":!0})),"Tundra"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedTundraTalentSpacer height0":!0}:4===s?r={"completedTundraTalentSpacer height1":!0}:3===s?r={"completedTundraTalentSpacer height2":!0}:2===s?r={"completedTundraTalentSpacer height3":!0}:1===s?r={"completedTundraTalentSpacer height4":!0}:s<=0&&(r={"completedTundraTalentSpacer height5":!0})),"Volcanic"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedVolcanicTalentSpacer height0":!0}:4===s?r={"completedVolcanicTalentSpacer height1":!0}:3===s?r={"completedVolcanicTalentSpacer height2":!0}:2===s?r={"completedVolcanicTalentSpacer height3":!0}:1===s?r={"completedVolcanicTalentSpacer height4":!0}:s<=0&&(r={"completedVolcanicTalentSpacer height5":!0})),r}spentTalent(e){this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setAnimal(new Dt)}}return t.\u0275fac=function(e){return new(e||t)(P(vn),P(_o),P(Mt),P(li),P(Ri),P(xi))},t.\u0275cmp=ft({type:t,selectors:[["app-selected-animal"]],hostBindings:function(e,n){1&e&&V("keyup",function(a){return n.keyEvent(a)},!1,ao)},inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:224,vars:113,consts:[[1,"selectedAnimalView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"equippable"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","talents",4,"ngIf"],[1,"animalInfo"],[3,"ngClass"],[1,"keyword"],[1,"clickableText","buttonAsText",3,"click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[3,"callbackFunction","label","model",4,"ngIf"],[1,"back"],["class","orb",4,"ngIf"],[1,"gridContainer"],[1,"trainableStats"],[1,"s4Heading"],[1,"tooltipIcon",3,"click"],[1,"racingStats"],[1,"miscStats"],[1,"abilities"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"s4Heading",3,"ngbPopover"],[1,"ability1","s5Heading","clickableText","buttonAsText",3,"click"],["class","ability2 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],["class","ability3 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],[1,"abilityXp"],[3,"innerHTML"],["topSpeedPopoverContent",""],["accelerationPopoverContent",""],["endurancePopoverContent",""],["powerPopoverContent",""],["focusPopoverContent",""],["adaptabilityPopoverContent",""],["abilityLevelPopoverContent",""],["bonusFreeRaceXpPopoverContent",""],["bonusCircuitRaceXpPopoverContent",""],["bonusTrainingXpPopoverContent",""],["bonusDiminishingReturnsPerFacilityLevelPopoverContent",""],["bonusTrainingTimeReductionPopoverContent",""],["bonusTalentsPopoverContent",""],["content",""],["equipment",""],["orb",""],["talentsContent",""],["baseStatsContent",""],["racingStatsContent",""],["miscStatsContent",""],[1,"equipmentKeyword"],[1,"talents"],["class","keyword",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"name","keyword"],[1,"editName",3,"click"],["id","newName","name","newName","maxlength","50",3,"ngModel","ngModelChange"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],["id","newName","name","newName","minlength","1","maxlength","50",3,"ngModel","ngModelChange"],[3,"callbackFunction","label","model"],[1,"orb"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],[1,"ability2","s5Heading","clickableText","buttonAsText",3,"click"],[1,"ability3","s5Heading","clickableText","buttonAsText",3,"click"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"selectableItem",3,"ngClass","click"],[1,"resourceKeyword"],[1,"modal-footer"],[1,"selectedItemSpan"],[1,"rightAlign"],["for","deck-name"],["id","deck-name","type","text",1,"spaced",3,"ngModel","ngModelChange"],["type","button",1,"spaced",3,"click"],[1,"equipmentContainer"],[1,"selectableEquipment",3,"ngClass","click"],[1,"selectedEquipmentSpan"],[1,"orbContainer"],[1,"selectableOrb",3,"ngClass","click"],[1,"progressionKeyword"],[1,"selectedOrbSpan"],["class","modal-body",4,"ngIf"],["type","button",3,"click"],[1,"typeContainer"],["class","talents subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"talents","subHeading",3,"ngClass","click"],[1,"talentInfo"],["class","talentRow",4,"ngFor","ngForOf"],[1,"talentRow"],[1,"rowFlex"],["class","talentColumn",4,"ngFor","ngForOf"],[1,"talentColumn"],[3,"row","column","selectedAnimal","spentTalent"],[1,"talentSpacer"],["class","defaultTalentSpacer",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"defaultTalentSpacer"],[1,"baseStats"]],template:function(e,n){if(1&e){const r=fe();f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),x(6,H9,7,3,"div",5),x(7,G9,2,0,"div",6),D(8,"br"),x(9,z9,2,0,"button",7),f(10,"button",8),V("click",function(){B(r);const o=st(213);return n.openEquipmentModal(o)}),g(11,"Equip New Item"),h()(),D(12,"br"),x(13,$9,5,1,"div",9),h(),f(14,"div",10)(15,"div",11),x(16,Y9,6,4,"div",6),x(17,J9,6,4,"div",6),f(18,"span",12),g(19),h(),D(20,"br"),h(),f(21,"button",13),V("click",function(){return n.goToAssignedBarn()}),g(22),x(23,eG,2,1,"em",6),h(),D(24,"br"),f(25,"span",14),g(26),h(),D(27,"br"),f(28,"span",14),g(29),Lt(30,"number"),f(31,"button",15),V("click",function(){return n.breed()}),g(32,"Breed"),h()(),D(33,"br"),f(34,"button",8),V("click",function(){B(r);const o=st(211);return n.openItemModal(o)}),g(35,"Use Item"),h(),D(36,"br"),x(37,tG,1,3,"app-toggle",16),h(),f(38,"div",17)(39,"div")(40,"button",8),V("click",function(){return n.returnToAnimalView()}),g(41,"Back"),h()(),D(42,"br"),x(43,aG,7,3,"div",18),h()(),D(44,"hr"),f(45,"div",19)(46,"div",20)(47,"span",21),g(48,"Base Stats "),f(49,"span",22),V("click",function(){B(r);const o=st(219);return n.openBaseStatsModal(o)}),g(50,"?"),h()(),D(51,"br")(52,"br"),f(53,"span",14)(54,"span",12),g(55,"Speed:"),h(),g(56),Lt(57,"number"),h(),D(58,"br"),f(59,"span",14)(60,"span",12),g(61,"Acceleration:"),h(),g(62),Lt(63,"number"),h(),D(64,"br"),f(65,"span",14)(66,"span",12),g(67,"Endurance:"),h(),g(68),Lt(69,"number"),h(),D(70,"br"),f(71,"span",14)(72,"span",12),g(73,"Power:"),h(),g(74),Lt(75,"number"),h(),D(76,"br"),f(77,"span",14)(78,"span",12),g(79,"Focus:"),h(),g(80),Lt(81,"number"),h(),D(82,"br"),f(83,"span",14)(84,"span",12),g(85,"Adaptability:"),h(),g(86),Lt(87,"number"),h(),D(88,"br"),f(89,"span",14)(90,"span",12),g(91,"Diminishing Returns:"),h(),g(92),Lt(93,"number"),h()(),f(94,"div",23)(95,"span",21),g(96,"Racing Stats "),f(97,"span",22),V("click",function(){B(r);const o=st(221);return n.openRacingStatsModal(o)}),g(98,"?"),h()(),D(99,"br")(100,"br"),f(101,"span",14)(102,"span",12),g(103,"Max Speed:"),h(),g(104),Lt(105,"number"),h(),D(106,"br"),f(107,"span",14)(108,"span",12),g(109,"Acceleration Rate:"),h(),g(110),Lt(111,"number"),h(),D(112,"br"),f(113,"span",14)(114,"span",12),g(115,"Stamina:"),h(),g(116),Lt(117,"number"),h(),D(118,"br"),f(119,"span",14)(120,"span",12),g(121,"Power Efficiency:"),h(),g(122),Lt(123,"number"),h(),D(124,"br"),f(125,"span",14)(126,"span",12),g(127,"Focus Distance:"),h(),g(128),Lt(129,"number"),h(),D(130,"br"),f(131,"span",14)(132,"span",12),g(133,"Adaptability Distance:"),h(),g(134),Lt(135,"number"),h(),D(136,"br"),f(137,"span",14)(138,"span",12),g(139,"Burst Chance:"),h(),g(140),Lt(141,"number"),h(),D(142,"br"),f(143,"span",14)(144,"span",12),g(145,"Burst Distance:"),h(),g(146),Lt(147,"number"),h()(),f(148,"div",24)(149,"span",21),g(150,"Miscellaneous Stats "),f(151,"span",22),V("click",function(){B(r);const o=st(223);return n.openMiscStatsModal(o)}),g(152,"?"),h()(),D(153,"br")(154,"br"),x(155,oG,7,5,"div",6),x(156,sG,6,5,"div",6),x(157,lG,6,5,"div",6),x(158,cG,6,5,"div",6),x(159,uG,6,5,"div",6),x(160,dG,6,5,"div",6),h()(),f(161,"div",25)(162,"p")(163,"span",26),g(164,"Abilities"),h(),D(165,"br"),f(166,"span")(167,"em"),g(168,"Your animal will use the ability you select below."),h()()(),f(169,"div")(170,"div")(171,"button",27),V("click",function(){return n.selectAbility(n.ability1)}),g(172),h(),x(173,hG,2,3,"button",28),x(174,fG,2,3,"button",29),h(),D(175,"br"),f(176,"p")(177,"span",14),g(178),f(179,"span",30),x(180,pG,2,2,"span",6),x(181,gG,2,0,"span",6),h()(),D(182,"br")(183,"span",31),h()()()()()(),x(184,mG,2,1,"ng-template",null,32,ct),x(186,vG,2,1,"ng-template",null,33,ct),x(188,bG,2,1,"ng-template",null,34,ct),x(190,_G,2,1,"ng-template",null,35,ct),x(192,yG,2,1,"ng-template",null,36,ct),x(194,wG,2,1,"ng-template",null,37,ct),x(196,CG,2,1,"ng-template",null,38,ct),x(198,SG,2,1,"ng-template",null,39,ct),x(200,TG,2,1,"ng-template",null,40,ct),x(202,DG,2,1,"ng-template",null,41,ct),x(204,RG,2,1,"ng-template",null,42,ct),x(206,xG,2,1,"ng-template",null,43,ct),x(208,MG,2,1,"ng-template",null,44,ct),x(210,NG,9,2,"ng-template",null,45,ct),x(212,GG,14,3,"ng-template",null,46,ct),x(214,XG,14,3,"ng-template",null,47,ct),x(216,oz,10,3,"ng-template",null,48,ct),x(218,sz,42,7,"ng-template",null,49,ct),x(220,lz,47,8,"ng-template",null,50,ct),x(222,cz,37,6,"ng-template",null,51,ct)}if(2&e){const r=st(185),a=st(187),o=st(189),s=st(191),l=st(193),c=st(195),u=st(197);p(6),_("ngIf",null!=n.selectedAnimal.equippedItem),p(1),_("ngIf",null==n.selectedAnimal.equippedItem),p(2),_("ngIf",null!=n.selectedAnimal.equippedItem),p(4),_("ngIf",n.areTalentsAvailable),p(2),_("ngClass",n.colorConditional),p(1),_("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),p(1),_("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),p(2),at(n.selectedAnimal.getRaceCourseType()),p(3),K("",n.assignedBarnName," "),p(1),_("ngIf",null!=n.selectedAnimal.currentTraining),p(2),Zi("ngbPopover",n.breedLevelPopover),p(1),K("Breed Level ",n.selectedAnimal.breedLevel,""),p(2),_("ngbPopover",n.breedDescriptionPopover),p(1),ii("Breed XP: ",on(30,65,n.selectedAnimal.breedGaugeXp,"1.2-2"),"/",n.selectedAnimal.breedGaugeMax," "),p(2),_("disabled",!n.canBreed),p(6),_("ngIf",n.canAutoBreed),p(6),_("ngIf",n.orbIsUnlocked&&n.orbFunctionalityReleased),p(10),_("ngbPopover",r),p(3),K(" ",on(57,68,n.selectedAnimal.currentStats.topSpeed,"1.2-2")," "),p(3),_("ngbPopover",a),p(3),K(" ",on(63,71,n.selectedAnimal.currentStats.acceleration,"1.2-2")," "),p(3),_("ngbPopover",o),p(3),K(" ",on(69,74,n.selectedAnimal.currentStats.endurance,"1.2-2")," "),p(3),_("ngbPopover",s),p(3),K(" ",on(75,77,n.selectedAnimal.currentStats.power,"1.2-2")," "),p(3),_("ngbPopover",l),p(3),K(" ",on(81,80,n.selectedAnimal.currentStats.focus,"1.2-2")," "),p(3),_("ngbPopover",c),p(3),K(" ",on(87,83,n.selectedAnimal.currentStats.adaptability,"1.2-2")," "),p(3),Zi("ngbPopover",n.getDiminishingReturnsPopover()),p(3),K(" ",on(93,86,n.diminishingReturnsAmount,"1.0-0")," "),p(9),Zi("ngbPopover",n.selectedAnimal.currentStats.maxSpeedMsPopover()),p(3),K(" ",on(105,89,n.selectedAnimal.currentStats.maxSpeedMs,"1.2-2")," m/s "),p(3),Zi("ngbPopover",n.selectedAnimal.currentStats.accelerationMsPopover()),p(3),K(" ",on(111,92,n.selectedAnimal.currentStats.accelerationMs,"1.2-2")," m/s "),p(3),Zi("ngbPopover",n.selectedAnimal.currentStats.staminaPopover()),p(3),K(" ",on(117,95,n.selectedAnimal.currentStats.stamina,"1.2-2")," "),p(3),Zi("ngbPopover",n.selectedAnimal.currentStats.powerMsPopover()),p(3),K(" ",on(123,98,n.selectedAnimal.currentStats.powerMs,"1.2-2"),"% "),p(3),Zi("ngbPopover",n.selectedAnimal.currentStats.focusMsPopover()),p(3),K(" ~",on(129,101,n.selectedAnimal.currentStats.focusMs,"1.2-2")," m "),p(3),Zi("ngbPopover",n.selectedAnimal.currentStats.adaptabilityMsPopover()),p(3),K(" ~",on(135,104,n.selectedAnimal.currentStats.adaptabilityMs,"1.2-2")," m "),p(3),Zi("ngbPopover",n.selectedAnimal.currentStats.burstChancePopover()),p(3),K(" ",on(141,107,n.selectedAnimal.currentStats.burstChance,"1.2-2"),"% "),p(3),Zi("ngbPopover",n.selectedAnimal.currentStats.burstDistancePopover()),p(3),K(" ",on(147,110,n.selectedAnimal.currentStats.burstDistance,"1.2-2")," m "),p(9),_("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromTraining>0),p(1),_("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces>0),p(1),_("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces>0),p(1),_("ngIf",n.selectedAnimal.miscStats.trainingTimeReduction>0),p(1),_("ngIf",n.selectedAnimal.miscStats.diminishingReturnsBonus>0),p(1),_("ngIf",n.selectedAnimal.miscStats.bonusTalents>0),p(3),_("ngbPopover",n.getAbilityPopover()),p(8),St("filterActive",n.selectedAnimal.ability.name===n.ability1.name),p(1),K("",n.ability1.name," "),p(1),_("ngIf",n.ability2.isAbilityPurchased),p(1),_("ngIf",n.ability3.isAbilityPurchased),p(3),_("ngbPopover",u),p(1),K("Level ",n.selectedAbility.abilityLevel," "),p(2),_("ngIf",!n.abilityLevelMaxedOut),p(1),_("ngIf",n.abilityLevelMaxedOut),p(2),_("innerHTML",n.longDescription,Bt)}},directives:[sn,Hr,Zn,us,au,Sl,Dl,_v,V9,Nh,xh,ru,ai,U9],pipes:[fo],styles:['.selectedAnimalView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.animalInfo[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:animalInfo}.back[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:back;justify-content:space-between;flex-direction:column;display:flex}.equippable[_ngcontent-%COMP%]{justify-content:space-between;flex-direction:column;display:flex;grid-area:equippable}.marginGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.filterActive[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor;color:var(--foreground-secondary)}.info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"equippable animalInfo back"}.gridContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-items:center;justify-content:stretch;grid-template-areas:"trainingStats racingStats miscStats"}.trainableStats[_ngcontent-%COMP%]{justify-self:left;grid-area:trainingStats}.racingStats[_ngcontent-%COMP%]{grid-area:racingStats}.miscStats[_ngcontent-%COMP%]{grid-area:miscStats}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.editName[_ngcontent-%COMP%]{width:4rem}.name[_ngcontent-%COMP%]{margin-left:4rem}.selectedEquipmentSpan[_ngcontent-%COMP%], .selectedOrbSpan[_ngcontent-%COMP%], .selectedItemSpan[_ngcontent-%COMP%]{width:100%}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.rightAlign[_ngcontent-%COMP%]{float:right}.ability1[_ngcontent-%COMP%], .ability2[_ngcontent-%COMP%], .ability3[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.typeContainer[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-evenly}.talentTreeType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedTalentTree[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid;text-decoration:underline solid}.rowFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.abilityXp[_ngcontent-%COMP%]{margin-left:2.5rem}.talentColumn[_ngcontent-%COMP%]{width:31.75%}.talentContent[_ngcontent-%COMP%]{height:calc(100% - 5rem);height:-o-calc(100% - 5rem);border:1px solid rgba(0,0,0,.1)}.lastTalentContent[_ngcontent-%COMP%]{height:100%;border:1px solid rgba(0,0,0,.1)}.talentInfo[_ngcontent-%COMP%]{text-align:center}.talentSpacer[_ngcontent-%COMP%]{display:grid;grid-template:1fr / 1fr;place-items:center}.defaultTalentSpacer[_ngcontent-%COMP%]{height:5rem;border-right:solid thick rgba(0,0,0,.1);grid-column:1 / 1;grid-row:1 / 1;z-index:1}.completedFlatlandTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--flatlandColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedMountainTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--mountainColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedOceanTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--waterColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedTundraTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--tundraColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedVolcanicTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--volcanicColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.height0[_ngcontent-%COMP%]{height:0}.height1[_ngcontent-%COMP%]{height:1rem}.height2[_ngcontent-%COMP%]{height:2rem}.height3[_ngcontent-%COMP%]{height:3rem}.height4[_ngcontent-%COMP%]{height:4rem}.height5[_ngcontent-%COMP%]{height:5rem}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}.activeSelectedItem[_ngcontent-%COMP%], .activeSelectedEquipment[_ngcontent-%COMP%], .activeSelectedOrb[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.selectableItem[_ngcontent-%COMP%], .selectableOrb[_ngcontent-%COMP%], .selectableEquipment[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem;margin-top:.25rem}.tooltipIcon[_ngcontent-%COMP%]{display:none}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}@media (max-width: 800px){.info[_ngcontent-%COMP%], .gridContainer[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr 1fr}.tooltipIcon[_ngcontent-%COMP%]{display:inline-block}}']}),t})();function dz(t,i){1&t&&(f(0,"div",4)(1,"h2"),g(2,"Animals"),h(),f(3,"div",5),g(4," Select an animal to view its stats, change abilities, and more. "),h(),D(5,"hr"),h())}function hz(t,i){if(1&t){const e=fe();f(0,"div",6)(1,"app-animal-list",7),V("selectedAnimal",function(r){return B(e),w().selectedAnimal(r)}),h()()}if(2&t){const e=w();p(1),_("availableAnimals",e.availableAnimals)}}function fz(t,i){if(1&t){const e=fe();f(0,"div",8)(1,"app-selected-animal",9),V("returnEmitter",function(r){return B(e),w().returnToAnimalView(r)}),h()()}if(2&t){const e=w();p(1),_("selectedAnimal",e.animal)}}let pz=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(vt.animals),this.availableAnimals=this.globalService.globalVar.animals.filter(e=>e.isAvailable),this.subscription=this.componentCommunicationService.getAnimalView().subscribe(e=>{null!=e.type?(this.animalSelected=!0,this.animal=e):this.animalSelected=!1})}selectedAnimal(e){this.animalSelected=!0,this.animal=e,this.componentCommunicationService.setAnimalView(vt.animals,this.animal)}returnToAnimalView(e){this.animalSelected=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(li))},t.\u0275cmp=ft({type:t,selectors:[["app-animals-view"]],decls:4,vars:3,consts:[[1,"animalsView"],["class","info",4,"ngIf"],["class","listView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"info"],[1,"description"],[1,"listView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,dz,6,0,"div",1),x(2,hz,2,1,"div",2),x(3,fz,2,1,"div",3),h()),2&e&&(p(1),_("ngIf",!n.animalSelected),p(1),_("ngIf",!n.animalSelected),p(1),_("ngIf",n.animalSelected))},directives:[sn,kf,uz],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;overflow:hidden;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{width:100%;height:100%}.info[_ngcontent-%COMP%]{text-align:center}.selectedView[_ngcontent-%COMP%]{height:100%;overflow:auto}"]}),t})();function gz(t,i){if(1&t){const e=fe();f(0,"button",17),V("click",function(){B(e);const r=w().$implicit;return w().setAsAutoRunFreeRace(r)}),g(1,"Auto Run Free Race"),h()}}function mz(t,i){if(1&t){const e=fe();f(0,"button",18),V("click",function(){B(e);const r=w().$implicit;return w().setAsEventDeck(r)}),g(1,"Set as Event Team"),h()}}function vz(t,i){if(1&t){const e=fe();f(0,"div")(1,"div",7),D(2,"app-animal-deck",8),f(3,"div",9)(4,"button",10),V("click",function(){const a=B(e).$implicit,o=w(),s=st(11);return o.editDeck(s,a)}),g(5,"Edit"),h()(),f(6,"div",11)(7,"button",12),V("click",function(){const a=B(e).$implicit;return w().setAsPrimary(a)}),g(8,"Set as Primary Team"),h()(),f(9,"div",13),x(10,gz,2,0,"button",14),h(),f(11,"div",15),x(12,mz,2,0,"button",16),h()(),D(13,"hr"),h()}if(2&t){const e=i.index,n=w();p(2),_("deckNumber",e+1),p(8),_("ngIf",n.showAutoRaceButton),p(2),_("ngIf",n.showEventButton)}}function bz(t,i){if(1&t){const e=fe();f(0,"div",35)(1,"input",36),V("input",function(){return B(e),w(2).toggleRaceOrder()}),h(),f(2,"label",37),V("click",function(){return B(e),w(2).toggleRaceOrder()}),g(3,"Race Order: "),h(),f(4,"span")(5,"span",38),V("dragstart",function(r){return B(e),w(2).dragStart(r)})("dragover",function(r){return B(e),w(2).allowDrop(r)})("drop",function(r){return B(e),w(2).dropCourseType(r)}),g(6),h(),g(7," / "),f(8,"span",39),V("dragstart",function(r){return B(e),w(2).dragStart(r)})("dragover",function(r){return B(e),w(2).allowDrop(r)})("drop",function(r){return B(e),w(2).dropCourseType(r)}),g(9),h(),g(10," / "),f(11,"span",40),V("dragstart",function(r){return B(e),w(2).dragStart(r)})("dragover",function(r){return B(e),w(2).allowDrop(r)})("drop",function(r){return B(e),w(2).dropCourseType(r)}),g(12),h(),g(13," / "),f(14,"span",41),V("dragstart",function(r){return B(e),w(2).dragStart(r)})("dragover",function(r){return B(e),w(2).allowDrop(r)})("drop",function(r){return B(e),w(2).dropCourseType(r)}),g(15),h(),g(16," / "),f(17,"span",42),V("dragstart",function(r){return B(e),w(2).dragStart(r)})("dragover",function(r){return B(e),w(2).allowDrop(r)})("drop",function(r){return B(e),w(2).dropCourseType(r)}),g(18),h()()()}if(2&t){const e=w(2);p(1),_("checked",e.isRaceOrderOn),p(4),_("ngClass",e.getColorClass(e.selectedDeckOrder[0])),p(1),at(e.selectedDeckOrder[0]),p(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[1])),p(1),at(e.selectedDeckOrder[1]),p(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[2])),p(1),at(e.selectedDeckOrder[2]),p(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[3])),p(1),at(e.selectedDeckOrder[3]),p(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[4])),p(1),at(e.selectedDeckOrder[4])}}const _z=function(t,i,e,n,r,a){return{selectedCourseType:t,flatlandColor:i,mountainColor:e,waterColor:n,tundraColor:r,volcanicColor:a}};function yz(t,i){if(1&t){const e=fe();f(0,"button",43),V("click",function(){const a=B(e).$implicit;return w(2).filterType(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=w(2);_("ngClass",function Fw(t,i,e,n,r,a,o,s,l){const c=ar()+t,u=Me(),d=Kr(u,c,e,n,r,a);return is(u,c+4,o,s)||d?La(u,c+6,l?i.call(l,e,n,r,a,o,s):i(e,n,r,a,o,s)):Vc(u,c+6)}(2,_z,n.selectedCourseType===e,"Flatland"===e,"Mountain"===e,"Ocean"===e,"Tundra"===e,"Volcanic"===e)),p(1),K(" ",e.trim()," ")}}const wz=function(t){return{selectedAnimal:t}};function Cz(t,i){if(1&t){const e=fe();f(0,"button",44),V("click",function(){const a=B(e).$implicit;return w(2).selectAnimal(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=w(2);_("ngClass",fi(2,wz,n.selectedAnimalName===e)),p(1),K(" ",e.trim()," ")}}function Sz(t,i){if(1&t){const e=fe();f(0,"div",19)(1,"form",20)(2,"div",21)(3,"h4",22),g(4),h(),f(5,"button",23),V("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div",24)(8,"div",25)(9,"label",26),g(10,"Relay Team Name: "),h(),D(11,"input",27),h(),x(12,bz,19,11,"div",28),D(13,"br"),f(14,"div",29),x(15,yz,2,9,"button",30),h(),D(16,"br"),f(17,"div",31),x(18,Cz,2,4,"button",32),h()(),f(19,"div",33)(20,"button",34),V("click",function(){return B(e),w().saveDeck()}),g(21,"Save"),h()()()()}if(2&t){const e=w();p(1),_("formGroup",e.editDeckForm),p(3),K("Edit ",e.selectedDeck.name,""),p(8),_("ngIf",e.displayRaceOrder),p(3),_("ngForOf",e.raceCourseTypeList),p(3),_("ngForOf",e.possibleAnimalsList)}}let Tz=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.modalService=n,this.lookupService=r,this.componentCommunicationService=a,this.raceCourseTypeList=[],this.displayRaceOrder=!1,this.editDeckForm=new Oh({deckName:new dv("")}),this.toggleRaceOrder=()=>{this.isRaceOrderOn=!this.isRaceOrderOn,this.selectedDeck.isCourseOrderActive=this.isRaceOrderOn}}ngOnInit(){this.componentCommunicationService.setNewView(vt.relayTeams),this.isRaceOrderOn=!1,this.newAnimalList=[],this.animalDecks=this.globalService.globalVar.animalDecks,this.globalService.globalVar.animals.filter(r=>r.isAvailable).forEach(r=>{this.raceCourseTypeList.some(a=>a===r.getRaceCourseType())||this.raceCourseTypeList.push(r.getRaceCourseType())});var e=this.lookupService.getResourceByName("Scouts");null!=e&&e>0&&(this.displayRaceOrder=!0),this.selectedDeckOrder=[],this.selectedDeckOrder.push("Flatland"),this.selectedDeckOrder.push("Mountain"),this.selectedDeckOrder.push("Ocean"),this.selectedDeckOrder.push("Tundra"),this.selectedDeckOrder.push("Volcanic");var n=this.lookupService.getResourceByName("Team Manager");null==n&&(n=0),this.showAutoRaceButton=n>0,this.showEventButton=!!this.lookupService.isItemUnlocked("grandPrix")}editDeck(e,n){this.selectedDeck=n,this.newAnimalList=[],this.selectedAnimalName="",this.selectedCourseType="Flatland",this.isRaceOrderOn=n.isCourseOrderActive,null!=n.courseTypeOrder&&n.courseTypeOrder.length>0&&(this.selectedDeckOrder=[],n.courseTypeOrder.forEach(r=>{r===z.Flatland&&this.selectedDeckOrder.push("Flatland"),r===z.Mountain&&this.selectedDeckOrder.push("Mountain"),r===z.Ocean&&this.selectedDeckOrder.push("Ocean"),r===z.Tundra&&this.selectedDeckOrder.push("Tundra"),r===z.Volcanic&&this.selectedDeckOrder.push("Volcanic")})),this.filterType(this.selectedCourseType),n.selectedAnimals.length>0&&n.selectedAnimals.forEach(r=>{this.newAnimalList.push(r)}),this.editDeckForm.patchValue({deckName:n.name}),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}saveDeck(){var e,n,r,a,o,s,l,c,u=this.globalService.globalVar.animalDecks.find(k=>k.deckNumber===this.selectedDeck.deckNumber);if(null!=u&&((null===(e=this.editDeckForm.get("deckName"))||void 0===e?void 0:e.value.length)<=50&&(null===(n=this.editDeckForm.get("deckName"))||void 0===n?void 0:n.value.length)>=1&&(u.name=null===(r=this.editDeckForm.get("deckName"))||void 0===r?void 0:r.value),u.selectedAnimals=[],this.newAnimalList.forEach(k=>{null==u||u.selectedAnimals.push(k)}),null==u||u.selectedAnimals.sort(this.compare),this.displayRaceOrder&&this.isRaceOrderOn)){var d=[],m=null===(a=document.getElementById("raceOrder1"))||void 0===a?void 0:a.innerHTML,v=null===(o=document.getElementById("raceOrder2"))||void 0===o?void 0:o.innerHTML,b=null===(s=document.getElementById("raceOrder3"))||void 0===s?void 0:s.innerHTML,y=null===(l=document.getElementById("raceOrder4"))||void 0===l?void 0:l.innerHTML,T=null===(c=document.getElementById("raceOrder5"))||void 0===c?void 0:c.innerHTML;d.push(m),d.push(v),d.push(b),d.push(y),d.push(T),null!=u&&(u.courseTypeOrder=[]),d.forEach(k=>{"Flatland"===k&&(null==u||u.courseTypeOrder.push(z.Flatland)),"Mountain"===k&&(null==u||u.courseTypeOrder.push(z.Mountain)),"Ocean"===k&&(null==u||u.courseTypeOrder.push(z.Ocean)),"Tundra"===k&&(null==u||u.courseTypeOrder.push(z.Tundra)),"Volcanic"===k&&(null==u||u.courseTypeOrder.push(z.Volcanic))})}this.modalService.dismissAll()}compare(e,n){return e.raceCourseType>n.raceCourseType?1:n.raceCourseType>e.raceCourseType?-1:0}filterType(e){var n=this.lookupService.getAnimalsByRaceCourseType(e),r=[];n.length>0&&n.forEach(o=>{var s=this.globalService.globalVar.animals.find(l=>l.getAnimalType()===o);(null==s?void 0:s.isAvailable)&&r.push(s.getAnimalType())}),this.possibleAnimalsList=r,this.selectedCourseType=e;var a=this.selectedDeck.selectedAnimals.find(o=>o.getRaceCourseType()===e);null!=a&&(this.selectedAnimalName=a.getAnimalType())}selectAnimal(e){var n=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(null!=n){var r=-1,a=n.getRaceCourseType();this.newAnimalList.forEach(o=>{o.getRaceCourseType()===a&&(r=this.newAnimalList.indexOf(o))}),r>=0&&this.newAnimalList.splice(r,1),this.selectedAnimalName===n.getAnimalType()?this.selectedAnimalName="":(this.newAnimalList.push(n),this.selectedAnimalName=n.getAnimalType())}}setAsPrimary(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.isPrimaryDeck=!1),r.isPrimaryDeck=!0)}setAsAutoRunFreeRace(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.autoRunFreeRace),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.autoRunFreeRace=!1),r.autoRunFreeRace=!0)}setAsEventDeck(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.isEventDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.isEventDeck=!1),r.isEventDeck=!0)}dragStart(e){this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id)}allowDrop(e){e.preventDefault()}dropCourseType(e){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.getData("text"),r=document.getElementById(n),a=e.target.innerHTML;if(null!==r&&null!==a){var l=this.selectedDeckOrder.indexOf(a),c=this.selectedDeckOrder.indexOf(null==r?void 0:r.innerHTML);this.selectedDeckOrder[l]=r.innerHTML,this.selectedDeckOrder[c]=a,e.target.innerHTML="",e.target.className="",e.target.append(r.innerHTML),r.innerHTML="",r.className="",r.append(a)}}getColorClass(e){return{flatlandColor:"Flatland"===e,mountainColor:"Mountain"===e,waterColor:"Ocean"===e,tundraColor:"Tundra"===e,volcanicColor:"Volcanic"===e}}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(_o),P(vn),P(li))},t.\u0275cmp=ft({type:t,selectors:[["app-decks-view"]],decls:12,vars:1,consts:[[1,"decksView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"description"],[4,"ngFor","ngForOf"],["content",""],[1,"gridContainer"],[1,"deck",3,"deckNumber"],[1,"edit"],[1,"editButton",3,"click"],[1,"primary"],[1,"primaryButton",3,"click"],[1,"autoRunFreeRace"],["class","autoRunFreeRaceButton",3,"click",4,"ngIf"],[1,"event"],["class","eventButton",3,"click",4,"ngIf"],[1,"autoRunFreeRaceButton",3,"click"],[1,"eventButton",3,"click"],[1,"modalClass"],[3,"formGroup"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","deck-name"],["id","deck-name","type","text","maxlength","50","formControlName","deckName",1,"spaced"],["class","raceOrder",4,"ngIf"],[1,"typeContainer"],["class","raceType subHeading clickableText buttonAsTextKeepColor",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"animalContainer"],["class","animalOption clickableText buttonAsText",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",3,"click"],[1,"raceOrder"],["type","checkbox","id","finishTraining",1,"spaced",3,"checked","input"],[1,"spaced",3,"click"],["id","raceOrder1","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder2","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder3","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder4","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder5","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],[1,"raceType","subHeading","clickableText","buttonAsTextKeepColor",3,"ngClass","click"],[1,"animalOption","clickableText","buttonAsText",3,"ngClass","click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Relay Teams"),h(),f(6,"div",4),g(7," Relay Teams are groups of animals that run together in a race. As you rise through the ranks, races will have multiple legs of varying terrain that require you to use different animals to succeed. Each Relay Team consists of one animal from each course type. Your primary Relay Team is the one that will run the races you select. "),h(),D(8,"hr"),h(),x(9,vz,14,3,"div",5),h()()(),x(10,Sz,22,5,"ng-template",null,6,ct)),2&e&&(p(9),_("ngForOf",n.animalDecks))},directives:[ai,V0,sn,Nh,xh,Fh,us,au,Sl,mv,Zn],styles:['.decksView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.animalContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.animalOption[_ngcontent-%COMP%]{display:inline-block}.selectedAnimal[_ngcontent-%COMP%]{font-weight:700}.selectedCourseType[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:60% 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"deck . freeRace ." "deck edit primary event"}.deck[_ngcontent-%COMP%]{grid-area:deck}.edit[_ngcontent-%COMP%]{grid-area:edit;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.eventButton[_ngcontent-%COMP%], .editButton[_ngcontent-%COMP%]{width:80%}.primary[_ngcontent-%COMP%]{grid-area:primary;text-align:center}.primaryButton[_ngcontent-%COMP%]{width:80%}.autoRunFreeRace[_ngcontent-%COMP%]{grid-area:freeRace;text-align:center}.autoRunFreeRaceButton[_ngcontent-%COMP%]{width:80%;margin-bottom:.5rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.draggable[_ngcontent-%COMP%]{cursor:move;margin:1em}.raceOrder[_ngcontent-%COMP%]{display:inline-block}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{grid-template-columns:50% 1fr 1fr 1fr}}']}),t})();function Dz(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),K("",e.selectedItem.numberPurchasing," ")}}function Rz(t,i){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=w(2);p(1),K(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function xz(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),K(" x ",e.buyMultiplierAmount,"")}}function Mz(t,i){if(1&t){const e=fe();f(0,"div",3)(1,"span",4),x(2,Dz,2,1,"span",5),g(3),h(),x(4,Rz,2,1,"em",5),D(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),f(10,"div",7),g(11),h(),D(12,"br"),f(13,"button",8),V("click",function(){return B(e),w().BuyItem()}),g(14,"Buy "),x(15,xz,2,1,"span",5),h()()}if(2&t){const e=w();_("ngbPopover",st(3)),p(1),_("ngClass",e.colorConditional),p(1),_("ngIf",e.displayNumberPurchasing),p(1),K(" ",e.displayName,""),p(1),_("ngIf",e.selectedItem.totalShopQuantity>1),p(3),_("innerHTML",e.shortDescription,Bt),p(4),K(" ",e.purchaseResourcesRequired," "),p(2),_("disabled",!e.canAffordItem),p(2),_("ngIf",e.buyMultiplierAmount>1)}}function kz(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),K("",e.selectedItem.numberPurchasing," ")}}function Az(t,i){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=w(2);p(1),K(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function Pz(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),K(" x ",e.buyMultiplierAmount,"")}}function Ez(t,i){if(1&t){const e=fe();f(0,"div",9)(1,"span",4),x(2,kz,2,1,"span",5),g(3),h(),x(4,Az,2,1,"em",5),D(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),f(10,"div",7),g(11),h(),D(12,"br"),f(13,"button",8),V("click",function(){return B(e),w().BuyItem()}),g(14,"Buy "),x(15,Pz,2,1,"span",5),h()()}if(2&t){const e=w();p(1),_("ngClass",e.colorConditional),p(1),_("ngIf",e.displayNumberPurchasing),p(1),at(e.displayName),p(1),_("ngIf",e.selectedItem.totalShopQuantity>1),p(3),_("innerHTML",e.shortDescription,Bt),p(4),K(" ",e.purchaseResourcesRequired," "),p(2),_("disabled",!e.canAffordItem),p(2),_("ngIf",e.buyMultiplierAmount>1)}}function Iz(t,i){if(1&t&&(f(0,"div",10),D(1,"span",6),h()),2&t){const e=w();p(1),_("innerHTML",e.longDescription,Bt)}}let Vz=(()=>{class t{constructor(e,n,r){this.globalService=e,this.lookupService=n,this.gameLoopService=r,this.itemPurchased=new ot,this.canAffordItem=!0,this.displayNumberPurchasing=!1,this.displayName="",this.buyMultiplierAmount=1}keyEventDown(e){(this.selectedItem.type===$.Consumable||this.selectedItem.type===$.Food||this.selectedItem.type===$.Equipment||this.selectedItem.type===$.Resources)&&"Mangoes"!==this.selectedItem.name&&("Shift"===e.key&&(e.preventDefault(),this.shiftPressed||(this.buyMultiplierAmount*=25,this.shiftPressed=!0)),"Control"===e.key&&(e.preventDefault(),this.ctrlPressed||(this.buyMultiplierAmount*=10,this.ctrlPressed=!0)),"Alt"===e.key&&(e.preventDefault(),this.altPressed||(this.buyMultiplierAmount*=100,this.altPressed=!0)))}keyEventUp(e){e.preventDefault(),(this.selectedItem.type===$.Consumable||this.selectedItem.type===$.Food||this.selectedItem.type===$.Equipment||this.selectedItem.type===$.Resources)&&"Mangoes"!==this.selectedItem.name&&("Shift"===e.key&&this.shiftPressed&&(this.buyMultiplierAmount/=25,this.shiftPressed=!1),"Control"===e.key&&this.ctrlPressed&&(this.buyMultiplierAmount/=10,this.ctrlPressed=!1),"Alt"===e.key&&this.altPressed&&(this.buyMultiplierAmount/=100,this.altPressed=!1))}ngOnInit(){var e=this;if(this.buyMultiplierAmount=1,this.selectedItem.type===$.Ability?(this.shortDescription=this.lookupService.getAnimalAbilityDescription(!0,this.selectedItem.additionalIdentifier),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedItem.additionalIdentifier)):this.selectedItem.type===$.Specialty?(this.shortDescription=this.lookupService.getSpecialtyItemDescription(this.selectedItem.name),""===this.shortDescription&&(this.shortDescription=this.selectedItem.shortDescription)):this.selectedItem.type===$.Animal?this.shortDescription=this.globalService.getAnimalDescription(this.selectedItem.name):(this.shortDescription=this.selectedItem.shortDescription,this.longDescription=this.selectedItem.longDescription),this.displayName=this.selectedItem.name,this.selectedItem.type===$.Animal&&void 0!==(n=this.globalService.globalVar.animals.find(a=>a.name===this.selectedItem.name))&&(this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()}),this.selectedItem.type===$.Ability){var n,r=this.selectedItem.name.split(" ")[0].trim();""!==r&&void 0!==(n=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===r))&&(this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()})}this.selectedItem.type===$.Food&&1===this.selectedItem.numberPurchasing&&("Apples"===this.displayName&&(this.displayName="Apple"),"Oranges"===this.displayName&&(this.displayName="Orange"),"Bananas"===this.displayName&&(this.displayName="Banana"),"Strawberries"===this.displayName&&(this.displayName="Strawberry"),"Carrots"===this.displayName&&(this.displayName="Carrot"),"Turnips"===this.displayName&&(this.displayName="Turnip"),"Mangoes"===this.displayName&&(this.displayName="Mango")),(this.selectedItem.type===$.Food||this.selectedItem.type===$.Resources)&&(this.displayNumberPurchasing=!0),this.amountSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Sr(function*(){e.selectedItem.purchasePrice.forEach(a=>{var o=a.name;1===a.amount&&("Tokens"===o&&(o="Token"),"Medals"===o&&(o="Medal")),e.purchaseResourcesRequired=a.amount.toLocaleString()+" "+o+", ";var s=e.lookupService.getResourceByName(a.name);e.canAffordItem=!(s<a.amount*e.buyMultiplierAmount)}),e.purchaseResourcesRequired.length>0&&(e.purchaseResourcesRequired=e.purchaseResourcesRequired.substring(0,e.purchaseResourcesRequired.length-2))}))}BuyItem(){this.canBuyItem()&&(this.spendResourcesOnItem(),this.selectedItem.type===$.Animal&&this.buyAnimal(),this.selectedItem.type===$.Food?this.buyFood():this.selectedItem.type===$.Training&&this.buyTraining(),this.selectedItem.type===$.Specialty?this.buySpecialty():this.selectedItem.type===$.Ability&&this.buyAbility(),this.selectedItem.type===$.Equipment&&this.buyEquipment(),this.selectedItem.type===$.Consumable&&this.buyConsumable(),this.selectedItem.type===$.Resources&&this.buyResources(),this.itemPurchased.emit(this.selectedItem))}canBuyItem(){var e=!0;return this.selectedItem.purchasePrice.forEach(n=>{this.lookupService.getResourceByName(n.name)<n.amount*this.buyMultiplierAmount&&(e=!1)}),e}spendResourcesOnItem(){this.selectedItem.purchasePrice.forEach(e=>{this.lookupService.spendResourceByName(e.name,e.amount*this.buyMultiplierAmount)})}buyAnimal(){this.globalService.sortAnimalOrder();var e=this.globalService.globalVar.animals.find(s=>s.name===this.selectedItem.name);if(null!=e){e.isAvailable=!0,this.selectedItem.amountPurchased=1;var n=this.globalService.globalVar.shop.find(s=>"Abilities"===s.name);if(null!=n){var r=n.itemList.filter(s=>s.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(s=>{s.isAvailable=!0})}var a=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);if(null!=a){var o=!1;a.selectedAnimals.forEach(s=>{s.raceCourseType===(null==e?void 0:e.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(e)}}}buyTraining(){this.selectedItem.amountPurchased=1;var e=this.globalService.globalVar.trainingOptions.find(n=>n.trainingName===this.selectedItem.name);void 0!==e&&(e.isAvailable=!0)}buyFood(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new oe(this.selectedItem.name,e,$.Food));"Mangoes"===this.selectedItem.name&&this.selectedItem.purchasePrice.forEach(r=>{"Coins"===r.name&&(r.amount+=50),"Tokens"===r.name&&(r.amount+=1)})}buySpecialty(){var e,a;if(this.selectedItem.amountPurchased+=1,"Whistle"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))){var n=e.itemList.find(c=>"Golden Whistle"===c.name);null!=n&&(n.isAvailable=!0)}if("National Races"===this.selectedItem.name&&(this.globalService.globalVar.nationalRaceCountdown=0,null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name)))){var r=e.itemList.find(u=>"International Races"===u.name);null!=r&&(r.isAvailable=!0)}"Incubator Upgrade Lv1"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(u=>"Incubator Upgrade Lv2"===u.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv2"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(d=>"Incubator Upgrade Lv3"===d.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv3"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(d=>"Incubator Upgrade Lv4"===d.name))&&(a.isAvailable=!0);var o=this.lookupService.getResourceByName("Team Manager");if("Team Manager"===this.selectedItem.name&&1===this.selectedItem.amountPurchased&&(null==o||0===o)&&!this.globalService.globalVar.animalDecks.some(c=>c.autoRunFreeRace)){var s=this.globalService.globalVar.animalDecks.find(c=>c.isPrimaryDeck);null!=s&&(s.autoRunFreeRace=!0)}if(null!=this.globalService.globalVar.resources&&(this.globalService.globalVar.resources.some(c=>c.name===this.selectedItem.name)?null!=(l=this.globalService.globalVar.resources.find(c=>c.name===this.selectedItem.name))&&(l.amount+=1):this.globalService.globalVar.resources.push(new oe(this.selectedItem.name,1,$.Specialty))),"Talent Point Voucher"===this.selectedItem.name)if(this.globalService.globalVar.resources.some(c=>"Talent Points"===c.name)){var l;null!=(l=this.globalService.globalVar.resources.find(u=>"Talent Points"===u.name))&&(l.amount+=1)}else this.globalService.globalVar.resources.push(new oe("Talent Points",1,$.Resources));null!=this.selectedItem.quantityMultiplier&&this.selectedItem.quantityMultiplier>0&&this.selectedItem.purchasePrice.forEach(c=>{null!=this.selectedItem.quantityAdditive&&this.selectedItem.quantityAdditive>0?c.amount+=this.selectedItem.quantityAdditive:c.amount*=this.selectedItem.quantityMultiplier,"Team Manager"===this.selectedItem.name&&c.amount>5e3&&(c.amount=5e3)})}buyAbility(){var e=this.selectedItem.name.split(" ")[0].trim(),n=this.selectedItem.name.split(":")[1].trim();if(""!==e&&""!==n){var r=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(void 0!==r){var a=r.availableAbilities.find(o=>o.name===n);void 0!==a&&(a.isAbilityPurchased=!0,this.selectedItem.amountPurchased=1)}}}buyEquipment(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new oe(this.selectedItem.name,e,$.Equipment))}buyConsumable(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new oe(this.selectedItem.name,e,$.Consumable))}buyResources(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new oe(this.selectedItem.name,e,$.Resources))}ngOnDestroy(){null!=this.amountSubscription&&this.amountSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(vn),P(xi))},t.\u0275cmp=ft({type:t,selectors:[["app-shopping-item"]],hostBindings:function(e,n){1&e&&V("keydown",function(a){return n.keyEventDown(a)},!1,ao)("keyup",function(a){return n.keyEventUp(a)},!1,ao)},inputs:{selectedItem:"selectedItem"},outputs:{itemPurchased:"itemPurchased"},decls:4,vars:2,consts:[["class","item","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","item",4,"ngIf"],["longDescriptionContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"item",3,"ngbPopover"],[1,"keyword",3,"ngClass"],[4,"ngIf"],[3,"innerHTML"],[1,"resourceKeyword"],[3,"disabled","click"],[1,"item"],[1,"popoverClass"]],template:function(e,n){1&e&&(x(0,Mz,16,9,"div",0),x(1,Ez,16,8,"div",1),x(2,Iz,2,1,"ng-template",null,2,ct)),2&e&&(_("ngIf",""!==n.longDescription&&null!=n.longDescription),p(1),_("ngIf",""===n.longDescription||null==n.longDescription))},directives:[sn,Hr,Zn],styles:[".item[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();function Oz(t,i){if(1&t){const e=fe();f(0,"td",8)(1,"div")(2,"app-shopping-item",9),V("itemPurchased",function(r){return B(e),w(3).itemPurchased(r)}),h()()()}if(2&t){const e=i.$implicit;p(2),_("selectedItem",e)}}function Nz(t,i){if(1&t&&(f(0,"tr"),x(1,Oz,3,1,"td",7),h()),2&t){const e=i.$implicit;p(1),_("ngForOf",e)}}function Fz(t,i){if(1&t&&(f(0,"table"),x(1,Nz,2,1,"tr",6),h()),2&t){const e=w();p(1),_("ngForOf",e.itemsRows)}}function Bz(t,i){1&t&&(f(0,"div",10),D(1,"br"),f(2,"span"),g(3,"Fresh out! Check back again in the future to see if more items are added!"),h(),D(4,"br"),h())}const Lz=function(t){return{tokenShopColor:t}};let u2=(()=>{class t{constructor(e){this.globalService=e,this.shopsEnum=Wa,this.itemPurchasedEmitter=new ot}ngOnInit(){null==this.shopType&&(this.shopType=Wa.regular),this.resetShopSubscription=this.resetShop.subscribe(()=>this.setupDisplayItems()),this.setupDisplayItems()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];var e=4;this.screenHeight<=650&&(e=2);var n=[];this.section.itemList.forEach(a=>{a.isAvailable&&(a.canHaveMultiples&&(a.infiniteAmount||a.amountPurchased<a.totalShopQuantity)||0===a.amountPurchased)&&n.push(a)});for(var r=1;r<=n.length;r++)this.itemsCells.push(n[r-1]),r%e==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}itemPurchased(e){this.setupDisplayItems(),this.itemPurchasedEmitter.emit(!0)}ngOnDestroy(){void 0!==this.resetShopSubscription&&this.resetShopSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt))},t.\u0275cmp=ft({type:t,selectors:[["app-shopping-list"]],hostBindings:function(e,n){1&e&&V("resize",function(a){return n.onResize(a)},!1,ao)},inputs:{section:"section",shopType:"shopType",resetShop:"resetShop"},outputs:{itemPurchasedEmitter:"itemPurchasedEmitter"},decls:8,vars:6,consts:[[1,"shoppingListView"],[1,"sectionHeaderBackgroundColor",3,"ngClass"],[1,"s4Heading","keyword","sectionHeaderText"],[1,"items"],[4,"ngIf"],["class","centered","c","",4,"ngIf"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[3,"selectedItem","itemPurchased"],["c","",1,"centered"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"span",2),g(3),h()(),f(4,"div",3),x(5,Fz,2,1,"table",4),x(6,Bz,5,0,"div",5),D(7,"br"),h()()),2&e&&(p(1),_("ngClass",fi(4,Lz,n.shopType===n.shopsEnum.token)),p(2),at(n.section.name),p(2),_("ngIf",n.itemsRows.length>0),p(1),_("ngIf",0===n.itemsRows.length))},directives:[Zn,sn,ai,Vz],styles:[".shoppingListView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.sectionHeaderBackgroundColor[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center}.tokenShopColor[_ngcontent-%COMP%]{background-color:var(--tokenShopColor)!important}.sectionHeaderText[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.centered[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function Uz(t,i){if(1&t&&(f(0,"div",8),D(1,"app-shopping-list",9),h()),2&t){const e=i.$implicit,n=w();p(1),_("section",e)("shopType",n.shopType)}}function Hz(t,i){if(1&t&&(f(0,"div",10),D(1,"hr"),f(2,"em"),g(3),f(4,"span",11),g(5,"Renown"),h()()()),2&t){const e=w();p(3),K("Next tier unlocked at ",e.lookupService.getRenownRequiredForEventShopTier(e.highestTierUnlocked+1)," ")}}let Gz=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.gameLoopService=r,this.componentCommunicationService=a,this.highestTierUnlocked=0,this.maxTiers=3,this.shopType=Wa.token,this.currentTokens=0}ngOnInit(){var e=this;this.highestTierUnlocked=this.lookupService.getHighestEventShopTierUnlocked(),this.getShopOptions(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(Sr(function*(){e.currentTokens=e.lookupService.getTokens()}))}getShopOptions(){this.sections=[];var e=this.globalService.globalVar.tokenShop.find(a=>"Tier 1"===a.name);void 0!==e&&this.highestTierUnlocked>=1&&this.sections.push(e);var n=this.globalService.globalVar.tokenShop.find(a=>"Tier 2"===a.name);void 0!==n&&this.highestTierUnlocked>=2&&this.sections.push(n);var r=this.globalService.globalVar.tokenShop.find(a=>"Tier 3"===a.name);void 0!==r&&this.highestTierUnlocked>=3&&this.sections.push(r)}returnToEventRaceView(){this.componentCommunicationService.setRaceView(vt.raceselection,Oe.event)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(vn),P(xi),P(li))},t.\u0275cmp=ft({type:t,selectors:[["app-token-shop-view"]],decls:15,vars:3,consts:[[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"back"],[3,"click"],["class","shopSection",4,"ngFor","ngForOf"],["class","centered",4,"ngIf"],[1,"shopSection"],[3,"section","shopType"],[1,"centered"],[1,"progressionKeyword"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Token Shop"),h(),f(6,"span"),g(7),h()(),f(8,"div",4)(9,"button",5),V("click",function(){return n.returnToEventRaceView()}),g(10,"Back To Event"),h()()()(),D(11,"br"),x(12,Uz,2,2,"div",6),D(13,"br"),x(14,Hz,6,1,"div",7),h()),2&e&&(p(7),K("Tokens: ",n.currentTokens,""),p(5),_("ngForOf",n.sections),p(2),_("ngIf",n.highestTierUnlocked<n.maxTiers))},directives:[ai,u2,sn],styles:['.shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}']}),t})();function zz(t,i){if(1&t){const e=fe();f(0,"div",16)(1,"app-shopping-list",17),V("itemPurchasedEmitter",function(r){return B(e),w(2).itemPurchased(r)}),h()()}if(2&t){const e=i.$implicit,n=w(2);p(1),_("section",e)("resetShop",n.resetShopSubject.asObservable())}}function jz(t,i){if(1&t){const e=fe();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2"),g(5,"Shop"),h()()(),f(6,"div",6)(7,"span",7),g(8,"Filters:"),h(),f(9,"button",8),V("click",function(){return B(e),w().toggleShopFilter("Animals")}),g(10,"Animals"),h(),f(11,"button",9),V("click",function(){return B(e),w().toggleShopFilter("Trainings")}),g(12," Trainings"),h(),f(13,"button",10),V("click",function(){return B(e),w().toggleShopFilter("Equipment")}),g(14,"Equipment "),h(),f(15,"button",11),V("click",function(){return B(e),w().toggleShopFilter("Food")}),g(16,"Food"),h(),f(17,"button",12),V("click",function(){return B(e),w().toggleShopFilter("Specialty")}),g(18," Specialty"),h(),f(19,"button",13),V("click",function(){return B(e),w().toggleShopFilter("Abilities")}),g(20," Abilities"),h()(),f(21,"button",14),V("click",function(){return B(e),w().ResetShopFilters()}),g(22," Reset Filters "),h(),D(23,"br")(24,"br"),f(25,"em"),g(26,"Certain items can be bought in bulk. Use the Alt, Shift, and Ctrl keys to modify the amount you are buying."),h()(),D(27,"br"),x(28,zz,2,2,"div",15),h()}if(2&t){const e=w();p(9),St("filterActive",e.filterAnimals),p(2),St("filterActive",e.filterTrainings),p(2),St("filterActive",e.filterEquipment),p(2),St("filterActive",e.filterFood),p(2),St("filterActive",e.filterSpecialty),p(2),St("filterActive",e.filterAbilities),p(9),_("ngForOf",e.sections)}}function $z(t,i){1&t&&(f(0,"div"),D(1,"app-token-shop-view"),h())}let Wz=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.filterAnimals=!1,this.filterTrainings=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterAbilities=!1,this.ShopsEnum=Wa,this.resetShopSubject=new be}ngOnInit(){this.componentCommunicationService.setNewView(vt.shop),this.getShopOptions(),this.subscription=this.componentCommunicationService.getShopView().subscribe(e=>{this.activeShopView=e})}getShopOptions(){this.sections=[];var e=this.filtersActive(),n=this.globalService.globalVar.shop.find(c=>"Animals"===c.name&&(!e||e&&this.filterAnimals));void 0!==n&&this.sections.push(n);var r=this.globalService.globalVar.shop.find(c=>"Trainings"===c.name&&(!e||e&&this.filterTrainings));void 0!==r&&this.sections.push(r);var a=this.globalService.globalVar.shop.find(c=>"Equipment"===c.name&&(!e||e&&this.filterEquipment));void 0!==a&&this.sections.push(a);var o=this.globalService.globalVar.shop.find(c=>"Food"===c.name&&(!e||e&&this.filterFood));void 0!==o&&this.sections.push(o);var s=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name&&(!e||e&&this.filterSpecialty));void 0!==s&&this.sections.push(s);var l=this.globalService.globalVar.shop.find(c=>"Abilities"===c.name&&(!e||e&&this.filterAbilities));void 0!==l&&this.sections.push(l)}toggleShopFilter(e){"Animals"===e&&(this.filterAnimals=!this.filterAnimals),"Trainings"===e&&(this.filterTrainings=!this.filterTrainings),"Equipment"===e&&(this.filterEquipment=!this.filterEquipment),"Food"===e&&(this.filterFood=!this.filterFood),"Specialty"===e&&(this.filterSpecialty=!this.filterSpecialty),"Abilities"===e&&(this.filterAbilities=!this.filterAbilities),this.getShopOptions()}filtersActive(){return!!(this.filterAnimals||this.filterAbilities||this.filterEquipment||this.filterFood||this.filterSpecialty||this.filterTrainings)}ResetShopFilters(){this.filterAnimals=!1,this.filterAbilities=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterTrainings=!1,this.getShopOptions()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}itemPurchased(e){this.getShopOptions(),this.resetShopSubject.next()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(li))},t.\u0275cmp=ft({type:t,selectors:[["app-shop-view"]],decls:2,vars:2,consts:[["class","shopView",4,"ngIf"],[4,"ngIf"],[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"filters"],["id","title"],["id","animalsFilter",1,"clickableText","buttonAsText",3,"click"],["id","trainingsFilter",1,"clickableText","buttonAsText",3,"click"],["id","equipmentFilter",1,"clickableText","buttonAsText",3,"click"],["id","foodFilter",1,"clickableText","buttonAsText",3,"click"],["id","specialtyFilter",1,"clickableText","buttonAsText",3,"click"],["id","abilitiesFilter",1,"clickableText","buttonAsText",3,"click"],[1,"centered","clickableText","buttonAsText",3,"click"],["class","shopSection",4,"ngFor","ngForOf"],[1,"shopSection"],[3,"section","resetShop","itemPurchasedEmitter"]],template:function(e,n){1&e&&(x(0,jz,29,13,"div",0),x(1,$z,2,0,"div",1)),2&e&&(_("ngIf",n.activeShopView===n.ShopsEnum.regular),p(1),_("ngIf",n.activeShopView===n.ShopsEnum.token))},directives:[sn,ai,u2,Gz],styles:[".shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.filters[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4%}#title[_ngcontent-%COMP%]{grid-area:title}#animalsFilter[_ngcontent-%COMP%]{grid-area:animalsFilter}#trainingsFilter[_ngcontent-%COMP%]{grid-area:trainingsFilter}#facilityFilter[_ngcontent-%COMP%]{grid-area:facilityFilter}#foodFilter[_ngcontent-%COMP%]{grid-area:foodFilter}#specialtyFilter[_ngcontent-%COMP%]{grid-area:specialtyFilter}#enhancerFilter[_ngcontent-%COMP%]{grid-area:enhancerFilter}"]}),t})(),qz=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n}ngOnInit(){this.traitLevel=this.lookupService.getResearchLevel(),this.maxNegativePercent=25;var e=this.globalService.globalVar.modifiers.find(n=>"maximumTraitNegativePercentModifier"===n.text);void 0!==e&&(this.maxNegativePercent=e.value)}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(vn))},t.\u0275cmp=ft({type:t,selectors:[["app-trait-option"]],inputs:{trait:"trait"},decls:5,vars:2,consts:[[1,"trait"],[1,"traitName","keyword"],[1,"traitStats"]],template:function(e,n){1&e&&(f(0,"h6",0)(1,"p",1),g(2),h(),f(3,"p",2),g(4),h()()),2&e&&(p(2),at(n.trait.traitName),p(2),at(n.trait.getStatGainDescription(n.maxNegativePercent)))},styles:[".trait[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const Xz=function(t){return{activeTrait:t}};function Yz(t,i){if(1&t){const e=fe();f(0,"td",4)(1,"div",5),V("click",function(){const a=B(e).$implicit;return w(2).selectTrait(a)}),D(2,"app-trait-option",6),h()()}if(2&t){const e=i.$implicit;p(1),_("ngClass",fi(2,Xz,e.isSelected)),p(1),_("trait",e)}}function Qz(t,i){if(1&t&&(f(0,"tr"),x(1,Yz,3,4,"td",3),h()),2&t){const e=i.$implicit;p(1),_("ngForOf",e)}}let Kz=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrait=new ot}ngOnInit(){this.setupDisplayTraits()}setupDisplayTraits(){this.traitsCells=[],this.traitsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableTraits.length;n++)this.traitsCells.push(this.availableTraits[n-1]),n%e==0&&(this.traitsRows.push(this.traitsCells),this.traitsCells=[]);0!==this.traitsCells.length&&this.traitsRows.push(this.traitsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrait(e){this.availableTraits.forEach(n=>{n.isSelected=!1}),e.isSelected=!0,this.selectedTrait.emit(e)}ngOnChanges(e){this.availableTraits=e.availableTraits.currentValue,this.setupDisplayTraits()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt))},t.\u0275cmp=ft({type:t,selectors:[["app-trait-list"]],hostBindings:function(e,n){1&e&&V("resize",function(a){return n.onResize(a)},!1,ao)},inputs:{availableTraits:"availableTraits"},outputs:{selectedTrait:"selectedTrait"},features:[Ui],decls:4,vars:1,consts:[[1,"traitsView"],[1,"traits"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trait"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,Qz,2,1,"tr",2),h()()()),2&e&&(p(3),_("ngForOf",n.traitsRows))},directives:[ai,Zn,qz],styles:[".traitsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function Zz(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),at(e.selectedAnimal.name)}}function Jz(t,i){if(1&t){const e=fe();f(0,"div",21),V("click",function(){return B(e),w().goToAnimal()}),x(1,Zz,2,1,"span",7),D(2,"br"),f(3,"span"),g(4),h()()}if(2&t){const e=w();_("ngClass",e.colorConditional),p(1),_("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),at(e.selectedAnimal.getAnimalType())}}function ej(t,i){if(1&t){const e=fe();f(0,"div",21),V("click",function(){return B(e),w().goToAnimal()}),f(1,"span"),g(2),h()()}if(2&t){const e=w();_("ngClass",e.colorConditional),p(2),at(e.selectedAnimal.getAnimalType())}}function tj(t,i){if(1&t&&(f(0,"span",22),g(1,"Current Trait: "),f(2,"span",23),g(3),h()()),2&t){const e=w();Zi("ngbPopover",e.traitStatGainDescription),p(3),at(e.selectedAnimal.getTraitName())}}function nj(t,i){if(1&t&&(f(0,"span",24),g(1),h()),2&t){const e=w();p(1),K("",e.existingTrait.traitName," ")}}function ij(t,i){1&t&&(f(0,"span"),g(1,"No Trait Assigned"),h())}function rj(t,i){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"p",25),D(3,"ngb-progressbar",26),f(4,"span",27),g(5),Lt(6,"number"),h()(),D(7,"br"),h()),2&t){const e=w();p(3),_("value",e.trainingProgressBarPercent),p(2),K("",on(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}let aj=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.componentCommunicationService=a,this.returnEmitter=new ot,this.traitStatGainDescription="",this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1}ngOnInit(){this.availableTraits=this.GetAvailableTraits();var e=this.globalService.globalVar.incubator;if(null!=e.assignedAnimal&&null!=e.assignedTrait&&(this.existingTrait=e.assignedTrait),null!=this.existingTrait){var n=this.availableTraits.find(r=>{var a;return(null===(a=this.existingTrait)||void 0===a?void 0:a.traitName)===r.traitName});null!=n&&(n.isSelected=!0)}this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.incubator;if(null==a.assignedAnimal||null==a.assignedTrait)return this.existingTrait=null,void this.availableTraits.forEach(o=>{o.isSelected=!1});this.trainingProgressBarPercent=a.timeTrained/a.timeToComplete*100})}selectNewTrait(e){var n=Object.assign({},e),r=this.globalService.globalVar.incubator;r.timeTrained=0,r.assignedAnimal=this.selectedAnimal,r.assignedTrait=n,this.existingTrait=n,this.selectedAnimal.currentTraining=null,this.selectedAnimal.canTrain=!1}GetAvailableTraits(){var e=[],n=this.lookupService.getResearchLevel();return e.push(new fn("Alert",1,n,_e.focus,_e.endurance)),e.push(new fn("Sharp",1,n,_e.adaptability,_e.power)),e.push(new fn("Bulky",1,n,_e.power,_e.topSpeed)),e.push(new fn("Curious",3,n,_e.acceleration,_e.focus)),e.push(new fn("Adamant",3,n,_e.topSpeed,_e.acceleration)),e.push(new fn("Stoic",5,n,_e.endurance,_e.adaptability)),e.push(new fn("Smart",5,n,_e.focus,_e.power)),e.push(new fn("Careful",7,n,_e.adaptability,_e.acceleration)),e.push(new fn("Attentive",7,n,_e.power,_e.endurance)),e.push(new fn("Keen",9,n,_e.acceleration,_e.topSpeed)),e.push(new fn("Quick",9,n,_e.topSpeed,_e.adaptability)),e.push(new fn("Tough",11,n,_e.endurance,_e.focus)),e.push(new fn("Solitary",11,n,_e.focus,_e.acceleration)),e.push(new fn("Cautious",13,n,_e.adaptability,_e.topSpeed)),e.push(new fn("Wild",13,n,_e.power,_e.focus)),e.push(new fn("Clumsy",15,n,_e.acceleration,_e.adaptability)),e.push(new fn("Natural",15,n,_e.topSpeed,_e.endurance)),e.push(new fn("Resilient",17,n,_e.endurance,_e.power)),e.push(new fn("Anxious",17,n,_e.focus,_e.topSpeed)),e.push(new fn("Lucky",19,n,_e.adaptability,_e.focus)),e.push(new fn("Rugged",19,n,_e.power,_e.adaptability)),e.push(new fn("Naive",21,n,_e.acceleration,_e.endurance)),e.push(new fn("Sprightly",21,n,_e.topSpeed,_e.power)),e.push(new fn("Stout",23,n,_e.endurance,_e.acceleration)),e.push(new fn("Pensive",23,n,_e.focus,_e.adaptability)),e.push(new fn("Languid",25,n,_e.adaptability,_e.endurance)),e.push(new fn("Mighty",25,n,_e.power,_e.acceleration)),e.push(new fn("Nimble",27,n,_e.acceleration,_e.power)),e.push(new fn("Small",27,n,_e.topSpeed,_e.focus)),e.push(new fn("Resolute",29,n,_e.endurance,_e.topSpeed)),(e=e.filter(r=>n>=r.requiredLevel)).filter(r=>!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterSpeed&&r.positiveStatGain===_e.topSpeed||this.filterAcceleration&&r.positiveStatGain===_e.acceleration||this.filterEndurance&&r.positiveStatGain===_e.endurance||this.filterPower&&r.positiveStatGain===_e.power||this.filterFocus&&r.positiveStatGain===_e.focus||this.filterAdaptability&&r.positiveStatGain===_e.adaptability)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.availableTraits=this.GetAvailableTraits()}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTraits=this.GetAvailableTraits()}returnToAnimalView(){this.returnEmitter.emit(!1)}goToAnimal(){this.componentCommunicationService.setAnimalView(vt.animals,this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(xi),P(vn),P(li))},t.\u0275cmp=ft({type:t,selectors:[["app-incubator-traits"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:39,vars:19,consts:[[1,"incubatorTraitsModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],["class","clickableText keyword",3,"ngClass","click",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","activeTrait",4,"ngIf"],[4,"ngIf"],[1,"back"],[3,"click"],[1,"filterGridContainer"],[1,"resetFiltersHeader","clickableText"],[1,"changeTrainingHeader"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTraits","selectedTrait"],[1,"clickableText","keyword",3,"ngClass","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],[1,"keyword"],[1,"activeTrait"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),x(4,Jz,5,3,"div",4),x(5,ej,3,2,"div",4),x(6,tj,4,2,"span",5),D(7,"hr"),x(8,nj,2,1,"span",6),x(9,ij,2,0,"span",7),h(),f(10,"div",8)(11,"button",9),V("click",function(){return n.returnToAnimalView()}),g(12,"Back"),h()()(),D(13,"hr"),x(14,rj,8,5,"div",7),D(15,"br")(16,"br"),f(17,"div",10)(18,"div",11)(19,"span",9),V("click",function(){return n.resetFilters()}),g(20,"Reset Filters"),h()(),f(21,"div",12)(22,"span"),g(23,"Choose New Trait"),h()(),f(24,"div",13)(25,"button",14),V("click",function(){return n.toggleStatFilter("Speed")}),g(26,"SPD "),h(),f(27,"button",15),V("click",function(){return n.toggleStatFilter("Acceleration")}),g(28,"ACC "),h(),f(29,"button",16),V("click",function(){return n.toggleStatFilter("Endurance")}),g(30,"END "),h(),f(31,"button",17),V("click",function(){return n.toggleStatFilter("Power")}),g(32,"PWR "),h(),f(33,"button",18),V("click",function(){return n.toggleStatFilter("Focus")}),g(34,"FCS "),h(),f(35,"button",19),V("click",function(){return n.toggleStatFilter("Adaptability")}),g(36,"ADP"),h()()(),D(37,"br"),f(38,"app-trait-list",20),V("selectedTrait",function(a){return n.selectNewTrait(a)}),h()()()),2&e&&(p(4),_("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),p(1),_("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),p(1),_("ngIf",null!=n.selectedAnimal.trait),p(2),_("ngIf",null!=n.existingTrait),p(1),_("ngIf",null==n.existingTrait),p(5),_("ngIf",null!=n.existingTrait),p(11),St("filterActive",n.filterSpeed),p(2),St("filterActive",n.filterAcceleration),p(2),St("filterActive",n.filterEndurance),p(2),St("filterActive",n.filterPower),p(2),St("filterActive",n.filterFocus),p(2),St("filterActive",n.filterAdaptability),p(3),_("availableTraits",n.availableTraits))},directives:[sn,Zn,Hr,E0,Kz],pipes:[fo],styles:['.incubatorTraitsModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"ResetFiler changeTraitHeader statFilter"}.changeTraitHeader[_ngcontent-%COMP%]{grid-area:changeTraitHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.resetFilter[_ngcontent-%COMP%]{grid-area:resetFilter}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}']}),t})();function oj(t,i){1&t&&(f(0,"div",3)(1,"h2"),g(2,"Incubator"),h(),f(3,"div",4),g(4," Select an animal and the desired trait to begin the incubation process. While incubating, you will not be able to train the selected animal. The chosen trait will remain on the animal until a new trait is selected or the trait is removed. "),h(),D(5,"hr"),h())}function sj(t,i){if(1&t){const e=fe();f(0,"div",7)(1,"div")(2,"app-animal-list",8),V("selectedAnimal",function(r){return B(e),w(2).selectedAnimal(r)}),h()()()}if(2&t){const e=w(2);p(2),_("availableAnimals",e.availableAnimals)}}function lj(t,i){if(1&t){const e=fe();f(0,"div",9)(1,"app-incubator-traits",10),V("returnEmitter",function(r){return B(e),w(2).returnToAnimalView(r)}),h()()}if(2&t){const e=w(2);p(1),_("selectedAnimal",e.animal)}}function cj(t,i){if(1&t&&(f(0,"div"),x(1,sj,3,1,"div",5),x(2,lj,2,1,"div",6),h()),2&t){const e=w();p(1),_("ngIf",!e.animalSelected),p(1),_("ngIf",e.animalSelected)}}function uj(t,i){1&t&&(f(0,"div"),g(1," To access the incubator, you need to improve your research level. Try participating in Duo Races. "),h())}let dj=(()=>{class t{constructor(e,n,r){this.globalService=e,this.lookupService=n,this.componentCommunicationService=r,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(vt.incubator),this.availableAnimals=this.globalService.globalVar.animals.filter(n=>n.isAvailable),this.researchLevel=this.lookupService.getResearchLevel();var e=this.globalService.globalVar.incubator;null!=e.assignedAnimal&&(this.animalSelected=!0,this.animal=e.assignedAnimal)}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(vn),P(li))},t.\u0275cmp=ft({type:t,selectors:[["app-incubator-view"]],decls:4,vars:3,consts:[[1,"incubatorView"],["class","info",4,"ngIf"],[4,"ngIf"],[1,"info"],[1,"description"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"selectAnimalView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,oj,6,0,"div",1),x(2,cj,3,2,"div",2),x(3,uj,2,0,"div",2),h()),2&e&&(p(1),_("ngIf",!n.animalSelected),p(1),_("ngIf",n.researchLevel>0),p(1),_("ngIf",0===n.researchLevel))},directives:[sn,kf,aj],styles:[".incubatorView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:1rem}"]}),t})();var Ou=(()=>{return(t=Ou||(Ou={}))[t.basics=0]="basics",t[t.progression=1]="progression",t[t.calculators=2]="calculators",Ou;var t})();function hj(t,i){if(1&t){const e=fe();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswerBreedGuide")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"What does Breeding do? How do I gain Breed XP?"),h()()(),f(9,"div",10),D(10,"div",7),f(11,"p"),g(12," Breeding is one of the best way to increase your animals' racing capabilities. It is a reset mechanic, meaning all of the base stats your animal has gained will be reset back to their default levels, and in return gain a permanent multiplier to your racing stats. Note that the stats your animal has prior to breeding have no impact on Breeding. "),D(13,"br")(14,"br"),g(15," Every time you Breed, you gain a 5% increase to the amount your base stats contribute to your racing stats. If you hover over your base stats (or tap if you are on mobile) when selecting an animal on the Animal page, you will see a breakdown of all multipliers you have obtained. With the Stockbreeder, you can set your animal to breed automatically without input so you can quickly raise your Breed Level in quick succession without having to spend time training in between each level. "),D(16,"br")(17,"br"),g(18," There are a few ways to increase Breed XP: "),D(19,"br"),f(20,"em"),g(21,"Completing any training:"),h(),g(22),D(23,"br"),f(24,"em"),g(25,"Successfully completing a free race:"),h(),g(26),D(27,"br"),f(28,"em"),g(29,"Successfully completing a circuit race:"),h(),g(30),D(31,"br")(32,"br"),g(33," As you progress, you'll find ways to increase the amount of XP gained. "),h()()(),D(34,"hr"),f(35,"div")(36,"div")(37,"div",7)(38,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswerBreedBarnRows")}),g(39,"+"),h()(),f(40,"div",9)(41,"p"),g(42,"I've got too many animals -- how do I unlock more barns?"),h()()(),f(43,"div",11),D(44,"div",7),f(45,"p"),g(46," Raise your circuit rank! As you progress, you'll unlock more rows of 3 barns. "),h()()(),D(47,"hr"),f(48,"div")(49,"div")(50,"div",7)(51,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswerAllAnimals")}),g(52,"+"),h()(),f(53,"div",9)(54,"p"),g(55,"What are all of the animals and course types?"),h()()(),f(56,"div",12),D(57,"div",7),f(58,"div")(59,"span",13),g(60,"Flatland"),h(),D(61,"br"),f(62,"span",14),g(63,"Horse"),h(),g(64),D(65,"br"),f(66,"span",14),g(67,"Cheetah"),h(),g(68),D(69,"br"),f(70,"span",14),g(71,"Hare"),h(),g(72),D(73,"br"),f(74,"span",14),g(75,"Warthog"),h(),g(76),D(77,"br")(78,"br"),f(79,"span",15),g(80,"Mountain"),h(),D(81,"br"),f(82,"span",14),g(83,"Monkey"),h(),g(84),D(85,"br"),f(86,"span",14),g(87,"Goat"),h(),g(88),D(89,"br"),f(90,"span",14),g(91,"Gecko"),h(),g(92),D(93,"br")(94,"br"),f(95,"div")(96,"span",16),V("click",function(){return B(e),w().viewSpoiler("Ocean Course Type")}),f(97,"span",17),g(98,"View Spoiler"),h(),f(99,"span",18),g(100,"Ocean"),h()(),D(101,"br"),f(102,"span",16),V("click",function(){return B(e),w().viewSpoiler("Ocean Course Type")}),f(103,"span",17),g(104,"View Spoiler"),h(),f(105,"span",14),g(106,"Dolphin"),h(),g(107),h(),D(108,"br"),f(109,"span",16),V("click",function(){return B(e),w().viewSpoiler("Ocean Course Type")}),f(110,"span",17),g(111,"View Spoiler"),h(),f(112,"span",14),g(113,"Shark"),h(),g(114),h(),D(115,"br"),f(116,"span",16),V("click",function(){return B(e),w().viewSpoiler("Ocean Course Type")}),f(117,"span",17),g(118,"View Spoiler"),h(),f(119,"span",14),g(120,"Octopus"),h(),g(121),h(),D(122,"br"),f(123,"span",16),V("click",function(){return B(e),w().viewSpoiler("Ocean Course Type")}),f(124,"span",17),g(125,"View Spoiler"),h(),f(126,"span",14),g(127,"Whale"),h(),g(128),h(),D(129,"br")(130,"br"),h(),f(131,"div")(132,"span",16),V("click",function(){return B(e),w().viewSpoiler("Tundra Course Type")}),f(133,"span",17),g(134,"View Spoiler"),h(),f(135,"span",18),g(136,"Tundra"),h()(),D(137,"br"),f(138,"span",16),V("click",function(){return B(e),w().viewSpoiler("Tundra Course Type")}),f(139,"span",17),g(140,"View Spoiler"),h(),D(141,"em",19),h(),D(142,"br"),f(143,"span",16),V("click",function(){return B(e),w().viewSpoiler("Tundra Course Type")}),f(144,"span",17),g(145,"View Spoiler"),h(),f(146,"span",14),g(147,"Penguin"),h(),g(148),h(),D(149,"br"),f(150,"span",16),V("click",function(){return B(e),w().viewSpoiler("Tundra Course Type")}),f(151,"span",17),g(152,"View Spoiler"),h(),f(153,"span",14),g(154,"Caribou"),h(),g(155),h(),D(156,"br")(157,"br"),h(),f(158,"div")(159,"span",16),V("click",function(){return B(e),w().viewSpoiler("Volcanic Course Type")}),f(160,"span",17),g(161,"View Spoiler"),h(),f(162,"span",18),g(163,"Volcanic"),h()(),D(164,"br"),f(165,"span",16),V("click",function(){return B(e),w().viewSpoiler("Volcanic Course Type")}),f(166,"span",17),g(167,"View Spoiler"),h(),D(168,"em",19),h(),D(169,"br"),f(170,"span",16),V("click",function(){return B(e),w().viewSpoiler("Volcanic Course Type")}),f(171,"span",17),g(172,"View Spoiler"),h(),f(173,"span",14),g(174,"Salamander"),h(),g(175),h(),D(176,"br"),f(177,"span",16),V("click",function(){return B(e),w().viewSpoiler("Volcanic Course Type")}),f(178,"span",17),g(179,"View Spoiler"),h(),f(180,"span",14),g(181,"Fox"),h(),g(182),h()()()()(),D(183,"hr"),f(184,"div")(185,"div")(186,"div",7)(187,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswerTerrain")}),g(188,"+"),h()(),f(189,"div",9)(190,"p"),g(191,"What are the different terrain options when racing?"),h()()(),f(192,"div",20),D(193,"div",7),f(194,"p"),g(195," Every race leg will have a random terrain. Each terrain may have a positive or negative effect for your racer and should be considered when thinking about which animal is going to race a particular leg. The terrain options are below: "),D(196,"br")(197,"br"),f(198,"strong"),g(199,"Sunny"),h(),D(200,"br")(201,"span",19)(202,"br"),f(203,"strong"),g(204,"Rainy"),h(),D(205,"br")(206,"span",19)(207,"br"),f(208,"strong"),g(209,"Stormy"),h(),D(210,"br")(211,"span",19)(212,"br"),f(213,"strong"),g(214,"Torrid"),h(),D(215,"br")(216,"span",19)(217,"br"),f(218,"strong"),g(219,"Maelstrom"),h(),D(220,"br")(221,"span",19)(222,"br"),f(223,"strong"),g(224,"Snowfall"),h(),D(225,"br")(226,"span",19)(227,"br"),f(228,"strong"),g(229,"Hailstorm"),h(),D(230,"br")(231,"span",19)(232,"br"),f(233,"strong"),g(234,"Ashfall"),h(),D(235,"br")(236,"span",19),h()()(),D(237,"hr"),f(238,"div")(239,"div")(240,"div",7)(241,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswerBreedKeybinds")}),g(242,"+"),h()(),f(243,"div",9)(244,"p"),g(245,"What keybinds or similar shortcuts are there?"),h()()(),f(246,"div",21),D(247,"div",7),f(248,"p"),g(249," Use the left and right arrow keys to quickly jump between barns under the 'Barns' page and between animals under the 'Animals' page. "),D(250,"br"),g(251," Use the ctrl, shift, and alt keys to add multipliers to certain items in the shop to buy them in bulk. "),h()()(),D(252,"hr"),f(253,"div")(254,"div")(255,"div",7)(256,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswerSettings")}),g(257,"+"),h()(),f(258,"div",9)(259,"p"),g(260,"What does each setting do?"),h()()(),f(261,"div",22),D(262,"div",7),f(263,"p")(264,"strong"),g(265,"Auto Skip Race Info"),h(),g(266),D(267,"br")(268,"br"),f(269,"strong"),g(270,"Finish Training Before Switching"),h(),g(271),D(272,"br")(273,"br"),f(274,"strong"),g(275,"Hide Tips"),h(),g(276),D(277,"br")(278,"br"),f(279,"strong"),g(280,"Use Numbers For Circuit Rank"),h(),g(281),D(282,"br")(283,"br"),f(284,"strong"),g(285,"Auto Start Event Race"),h(),g(286),D(287,"br")(288,"br"),f(289,"strong"),g(290,"Race Display Info"),h(),g(291),h()()(),D(292,"hr"),f(293,"div")(294,"div")(295,"div",7)(296,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswerFeedback")}),g(297,"+"),h()(),f(298,"div",9)(299,"p"),g(300,"I'm having an issue with my game or have some feedback, how can I contact you?"),h()()(),f(301,"div",23),D(302,"div",7),f(303,"p"),g(304,"Feel free to use the links at the bottom right or email me at CulturaIdle@gmail.com to get in touch. "),h()()(),D(305,"hr"),h()}if(2&t){const e=w();p(22),K(" ",e.lookupService.getTrainingBreedGaugeIncrease(0)," XP"),p(4),K(" ",e.lookupService.getLocalBreedGaugeIncrease()," XP"),p(4),K(" ",e.lookupService.getCircuitBreedGaugeIncrease()," XP"),p(34),K(" - ",e.globalService.getAnimalDescription("Horse")," "),p(4),K(" - ",e.globalService.getAnimalDescription("Cheetah")," "),p(4),K(" - ",e.globalService.getAnimalDescription("Hare")," "),p(4),K(" - ",e.globalService.getAnimalDescription("Warthog")," "),p(8),K(" - ",e.globalService.getAnimalDescription("Monkey")," "),p(4),K(" - ",e.globalService.getAnimalDescription("Goat")," "),p(4),K(" - ",e.globalService.getAnimalDescription("Gecko")," "),p(4),_("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),_("ngClass",e.seeOceanCourseTypeSpoiler?"waterColor":""),p(3),_("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Dolphin"),""),p(2),_("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Shark"),""),p(2),_("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Octopus"),""),p(2),_("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Whale"),""),p(4),_("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),_("ngClass",e.seeTundraCourseTypeSpoiler?"tundraColor":""),p(3),_("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),_("innerHTML",e.globalService.getTundraDescription(),Bt),p(2),_("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Penguin"),""),p(2),_("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Caribou"),""),p(4),_("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),_("ngClass",e.seeVolcanicCourseTypeSpoiler?"volcanicColor":""),p(3),_("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),_("innerHTML",e.globalService.getVolcanicDescription(),Bt),p(2),_("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Salamander"),""),p(2),_("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),K(" - ",e.globalService.getAnimalDescription("Fox"),""),p(19),_("innerHTML",e.sunnyTerrainInfo,Bt),p(5),_("innerHTML",e.rainyTerrainInfo,Bt),p(5),_("innerHTML",e.stormyTerrainInfo,Bt),p(5),_("innerHTML",e.torridTerrainInfo,Bt),p(5),_("innerHTML",e.maelstromTerrainInfo,Bt),p(5),_("innerHTML",e.snowfallTerrainInfo,Bt),p(5),_("innerHTML",e.hailstormTerrainInfo,Bt),p(5),_("innerHTML",e.ashfallTerrainInfo,Bt),p(30),K(" - ",e.lookupService.getSettingDescriptions("Auto Skip Race Info")," "),p(5),K(" - ",e.lookupService.getSettingDescriptions("Finish Training Before Switching")," "),p(5),K(" - ",e.lookupService.getSettingDescriptions("Hide Tips")," "),p(5),K(" - ",e.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank")," "),p(5),K(" - ",e.lookupService.getSettingDescriptions("Auto Start Event Race")," "),p(5),K(" - ",e.lookupService.getSettingDescriptions("Race Display Info")," ")}}function fj(t,i){if(1&t){const e=fe();f(0,"div")(1,"div")(2,"div",7)(3,"button",8),V("click",function(){return B(e),w(2).expandAnswer("faqAnswer4")}),g(4,"+"),h()(),f(5,"div",9)(6,"p"),g(7,"What is the Incubator? How does the Incubator Upgrade item work?"),h()()(),f(8,"div",28),D(9,"div",7),f(10,"p"),g(11,"Once you've successfully completed a Duo Race, you will have access to the Incubator. The Incubator lets you select a trait for an individual animal that lets your customize your stats further. A trait increases one stat and decreases another. As you increase your Research Level by completing Duo Races, you will unlock new traits and increase the amount the traits increase/decrease your stats. Note that traits will only decrease the chosen stat by a maximum of 25%. "),D(12,"br")(13,"br"),g(14," The Incubator Upgrade item gives you even further control over how you build your animals and allows newer animals to quickly catch up to ones of higher breed level. After purchasing this item, every time you breed you will gain a permanent increase to the stat your trait currently is providing you. The increase amount depends on your current Research Level. For example: "),D(15,"br")(16,"br"),g(17," If you have a Research Level of 15 and apply the "),f(18,"span",14),g(19,"Alert"),h(),g(20," trait to your Horse, it will gain 15% "),f(21,"span",14),g(22,"Focus"),h(),g(23," and lose 15% "),f(24,"span",14),g(25,"Endurance"),h(),g(26," through the trait itself. "),D(27,"br"),f(28,"em"),g(29,"If you have Incubator Upgrade Level 1:"),h(),g(30," each time you Breed your Horse, it will gain an additional modifier of .01 to its "),f(31,"span",14),g(32,"Focus"),h(),g(33," stat. 10% of the positive trait value of 15% would come out to .015. Incubator Upgrade Level 1 only allows for the first 10% of your trait value to contribute to the modifier, so you would gain .01. "),D(34,"br"),f(35,"em"),g(36,"If you have Incubator Upgrade Level 2:"),h(),g(37," each time you Breed your Horse, it will gain an additional modifier of .015 to its "),f(38,"span",14),g(39,"Focus"),h(),g(40," stat. 10% of the positive trait value of 15% would come to .015. Incubator Upgrade Level 2 allows for the first 25% of your trait value to contribute to the modifier. Because your trait value is only 15%, it will contribute in its entirety. "),h()(),D(41,"hr"),h()}}function pj(t,i){if(1&t){const e=fe();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswerOverwhelmed")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"I'm overwhelmed -- what am I supposed to be doing? What are all of the different races? "),h()()(),f(9,"div",24),D(10,"div",7),f(11,"p"),g(12,"That's okay! There is a lot of information that comes at you at first. The first thing to understand is that this game has two basic loops at its core: Training/Racing cycles and Breeding cycles. At the beginning, you simply want to make sure your animals are training in a balanced way. Make sure to pay attention to what each animal's diminishing returns value is (20 by default), because after you train a base stat to that point then any further training of that stat becomes progressively weaker. You can keep up with your animal's stats and Diminishing Returns value by viewing any particular animal after clicking 'Animals' in the navigation menu. With that in mind, once you've got at least one animal of each available course type with stats close to their Diminishing Returns value, you're ready to race. When you click on the 'Races' section of the navigation menu, there are a few subsections at the top. Here is what they mean: "),D(13,"br")(14,"br"),f(15,"strong"),g(16,"Circuit Races:"),h(),g(17," Raising your circuit rank as high as possible is your ultimate aim, and completing Circuit Races is the only way to do so. You'll unlock new animals, races, items, and upgrades by doing this. On this page, you also have access to free races which are easier races that provide a smaller amount of coin. Free race difficulty scales with your circuit rank, so if you plan to play a more active playstyle then you may benefit from not speeding through circuit ranks too quickly as you may have trouble completing free races. If you are okay with a more idle play style though, then you can simply complete Circuit Races as you are able to. "),D(18,"br"),f(19,"strong"),g(20,"Special Races:"),h(),g(21," These races types are unlocked as you increase your circuit rank. They work just like Circuit Races in that you have to complete each rank's races before you increase your rank, but they each reward something unique. For example, the Mono Races you unlock at circuit rank 2 increase your animal's Diminishing Returns value. Your rank at any particular Special Race cannot exceed your circuit rank, so as you increase your circuit rank make sure to check back and complete your Special Races as you are able to. "),D(22,"br"),f(23,"strong"),g(24,"Event Races:"),h(),g(25," After reaching circuit rank 13, you have access to the Grand Prix. The Grand Prix is a multi day race that runs in the background where you can easily swap in and out different racers. This race may be difficult for those who are just starting and you are safe to ignore it until you have a handle on everything else. "),D(26,"br"),f(27,"strong"),g(28,"Training Track"),h(),g(29,": At the training track, each animal has the opportunity to race against a number of competitors to gain some Coins and some unique rewards. You'll likely need to raise your breed levels a bit before seeing success here, but do check in after you've played a little while and give it a shot. "),D(30,"br")(31,"br"),g(32," Once you've trained your animals up to their Diminishing Returns value, you've completed Special Races to increase your Diminishing Returns value, and you've pushed your Circuit Rank as high as you can go, that's when you will want to start breeding your animals. There are other FAQ sections dedicated to Breeding so check those out for more information. After Breeding for awhile, you'll go back to training and racing. Cycling between these two flows is key to success in Cultura. Once you start unlocking multiple animals per course type, you can have one set breeding while the others train and race to cut down on wait time. "),h()()(),D(33,"hr"),f(34,"div")(35,"div")(36,"div",7)(37,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswer1")}),g(38,"+"),h()(),f(39,"div",9)(40,"p"),g(41,"I'm stuck early on, how should I progress?"),h()()(),f(42,"div",25),D(43,"div",7),f(44,"p"),g(45,"In the early game, your biggest obstacles will be coins and breed level. Using the Stockbreeder to Auto Breed your animals can give them a big boost in stats. "),f(46,"em"),g(47,"Note that you should typically wait to Breed until you've gotten as far as you can in circuit races as Breeding will reset your base stats to their defaults and require you to train them back up again. "),h(),D(48,"br")(49,"br"),g(50," If you are having a hard time collecting coins, look into buying the Money Mark and Team Managers from the Shop and upgrading your barns to Attractions to build passive income. The Money Mark will add a new competitor to your races (gold colored as opposed to black) that will run 25% faster than the average speed. If you finish the race first, your coin gain will increase by 25%."),D(51,"br"),g(52," Team Managers will automatically run free races for you every reset period, making sure you're getting as much value as possible from free races. "),D(53,"br"),g(54," Attractions require reaching barn level 10 and will take a little longer than buying the Money Mark and Team Manager, but it will provide passive income as long as there is an animal training in the barn. "),D(55,"br")(56,"br"),g(57," Some early game goals to set for yourself are to complete the Novice level training track, buy enough barns to train at least 1 animal of each course type available to you, raise your circuit rank, and make sure you raise your mono rank to match your circuit rank. "),h()()(),D(58,"hr"),f(59,"div")(60,"div")(61,"div",7)(62,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswer2")}),g(63,"+"),h()(),f(64,"div",9)(65,"p"),g(66,"What do team managers do and how do I set auto race?"),h()()(),f(67,"div",26),D(68,"div",7),f(69,"p"),g(70,'After buying a Team Manager from the shop, you\'ll have the ability to set a deck as your "Auto Run Free Race" deck. Once selected, this deck will immediately run free races as soon as the time period resets creating a steady stream of income (assuming you win, of course!). '),D(71,"br")(72,"br"),g(73,' To set a deck as your "Auto Run Free Race" deck, select \'Decks\' on the right and then select the button that says "Auto Run Free Race" by the deck you want to select. Note that this option will not be available until you buy a Team Manager. '),h()()(),D(74,"hr"),f(75,"div")(76,"div")(77,"div",7)(78,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswer3")}),g(79,"+"),h()(),f(80,"div",9)(81,"p"),g(82,"What does upgrading a barn do and how do I specialize my barn?"),h()()(),f(83,"div",27),D(84,"div",7),f(85,"p"),g(86,"After reaching a certain circuit rank, you will gain the ability to upgrade your barns. Every level you upgrade, you gain a multiplier for a particular stat when training. Hovering over your barn level when selecting a barn will show you your current multipliers. Increasing your barn level can be a great way to get you back in the race after breeding. "),D(87,"br")(88,"br"),g(89," At barn level 10, you will instead have the option to specialize. Subsequently, every 10 levels will improve your specialization instead of giving a stat multiplier. The current specialization options are below."),D(90,"br")(91,"br"),f(92,"strong"),g(93),h(),D(94,"br"),f(95,"strong"),g(96),h(),D(97,"br"),f(98,"strong",16),V("click",function(){return B(e),w().viewSpoiler("Attraction Specialization")}),f(99,"span",17),g(100,"View Spoiler"),h(),g(101),h(),D(102,"br"),f(103,"strong",16),V("click",function(){return B(e),w().viewSpoiler("Research Center Specialization")}),f(104,"span",17),g(105,"View Spoiler"),h(),g(106),h()()()(),D(107,"hr"),x(108,fj,42,0,"div",6),h()}if(2&t){const e=w();p(93),K("Training Facility - ",e.lookupService.getInDepthSpecializationDescription("Training Facility"),""),p(3),K("Breeding Grounds - ",e.lookupService.getInDepthSpecializationDescription("Breeding Grounds"),""),p(2),_("ngClass",e.seeAttractionSpoiler?"viewSpoiler":"spoilerText"),p(3),K(" Attraction - ",e.lookupService.getInDepthSpecializationDescription("Attraction"),""),p(2),_("ngClass",e.seeResearchCenterSpoiler?"viewSpoiler":"spoilerText"),p(3),K("Research Center - ",e.lookupService.getInDepthSpecializationDescription("Research Center"),""),p(2),_("ngIf",e.lookupService.isItemUnlocked("duoRace"))}}function gj(t,i){if(1&t&&(f(0,"span",14),g(1),h()),2&t){const e=w(2);p(1),K("",e.renownCoinGain,"% Additional Coins")}}function mj(t,i){if(1&t&&(f(0,"span",14),g(1),h()),2&t){const e=w(2);p(1),K("",e.renownCoinGain.toFixed(2),"% Additional Coins")}}function vj(t,i){if(1&t&&(f(0,"option",52),g(1),h()),2&t){const e=i.$implicit;_("value",e.type),p(1),K(" ",e.name,"")}}function bj(t,i){1&t&&(f(0,"option",52),g(1,"Attraction"),h()),2&t&&_("value",3)}function _j(t,i){1&t&&(f(0,"option",52),g(1,"Research Center"),h()),2&t&&_("value",4)}function yj(t,i){if(1&t){const e=fe();f(0,"div")(1,"div")(2,"div",7)(3,"button",8),V("click",function(){return B(e),w(2).expandAnswer("faqAnswerIncubatorGrowthCalculator")}),g(4,"+"),h()(),f(5,"div",9)(6,"p"),g(7,"Modifier gain from Incubator Upgrade"),h()()(),f(8,"div",58),D(9,"div",7),f(10,"div",48)(11,"div")(12,"em"),g(13,"Enter a Facility Level and an Incubator Upgrade Level between 1 and 4 to see what the modifier would be on the stat corresponding to the positive trait. This pulls from your current resources by default."),h()(),D(14,"br")(15,"br"),f(16,"div",30)(17,"div",49)(18,"label",59),g(19,"Incubator Upgrade Level:"),h(),f(20,"input",60),V("ngModelChange",function(r){return B(e),w(2).incubatorUpgradeLevel=r}),h(),D(21,"br"),f(22,"label",61),g(23,"Facility Level:"),h(),f(24,"input",62),V("ngModelChange",function(r){return B(e),w(2).facilityLevel=r}),h()(),f(25,"div",34)(26,"span"),g(27,"Result:"),h(),D(28,"br"),f(29,"em")(30,"span",36),g(31),h(),g(32," * .001 with Incubator Upgrade Level "),f(33,"span",63),g(34),h()(),g(35," = "),f(36,"span",14),g(37),h()()()()(),D(38,"hr"),h()}if(2&t){const e=w(2);p(20),_("ngModel",e.incubatorUpgradeLevel),p(4),_("ngModel",e.facilityLevel),p(7),at(e.facilityLevel),p(3),at(e.incubatorUpgradeLevel),p(3),K("*",e.incubatorModifierAmount," to Positive Trait Stat per Breed Level")}}const d2=function(t){return{inactiveCalculation:t}};function wj(t,i){if(1&t){const e=fe();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswerRenownCalculator")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"Coin gain from Renown"),h()()(),f(9,"div",29),D(10,"div",7),f(11,"div")(12,"em"),g(13,"Enter a Renown amount to see what the modifier would be on Coins won from races."),h()(),D(14,"br")(15,"br"),f(16,"div",30)(17,"div",31)(18,"label",32),g(19,"Renown:"),h(),f(20,"input",33),V("ngModelChange",function(r){return B(e),w().coinGainRenownAmount=r}),h()(),f(21,"div",34)(22,"span"),g(23,"Result:"),h(),f(24,"div",35)(25,"em"),g(26,"If Renown <= 50: "),f(27,"span",36),g(28),h()(),g(29," = "),x(30,gj,2,1,"span",37),h(),D(31,"br"),f(32,"div",35)(33,"em"),g(34,"If Renown > 50: 500 * log(.0035 * - ("),f(35,"span",36),g(36),h(),g(37," - 50) + 1) + 50 "),h(),g(38," = "),x(39,mj,2,1,"span",37),h()()()()(),D(40,"hr"),f(41,"div")(42,"div")(43,"div",7)(44,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswerTrainingBreedXpCalculator")}),g(45,"+"),h()(),f(46,"div",9)(47,"p"),g(48,"Breed XP gain from Training"),h()()(),f(49,"div",38),D(50,"div",7),f(51,"div")(52,"em"),g(53,"Select an animal or enter your own values to see how much Breed XP you would gain from completing a single training. Selecting an animal pulls from their current bonuses."),h()(),D(54,"br")(55,"br"),f(56,"div",30)(57,"div",31)(58,"div",39)(59,"label",40),g(60,"Animal:"),h(),f(61,"select",41),V("ngModelChange",function(r){return B(e),w().selectedAnimalType=r})("change",function(){return B(e),w().newAnimalSelected()}),x(62,vj,2,2,"option",42),h()(),f(63,"em"),g(64,"or"),h(),f(65,"div")(66,"label",43),g(67,"Bonus Training Breed XP:"),h(),f(68,"input",44),V("change",function(){return B(e),w().animalNotSelected()})("ngModelChange",function(r){return B(e),w().bonusBreedXp=r}),h(),D(69,"br"),f(70,"label",45),g(71,"Breeding Grounds Specialization Level:"),h(),f(72,"input",46),V("ngModelChange",function(r){return B(e),w().breedingGroundsSpecializationLevel=r}),h()()(),f(73,"div",34)(74,"span"),g(75,"Result:"),h(),D(76,"br"),f(77,"em"),g(78,"(5 + "),f(79,"span",14),g(80),h(),g(81,") * (1 + "),f(82,"span",14),g(83),h(),g(84," * .1) "),h(),g(85," = "),f(86,"span",14),g(87),h()()()()(),D(88,"hr"),f(89,"div")(90,"div")(91,"div",7)(92,"button",8),V("click",function(){return B(e),w().expandAnswer("faqAnswerBarnSpecializationGainCalculator")}),g(93,"+"),h()(),f(94,"div",9)(95,"p"),g(96,"Barn Specialization Calculator"),h()()(),f(97,"div",47),D(98,"div",7),f(99,"div",48)(100,"div")(101,"em"),g(102,"Select a Specialization Type and enter the Barn Upgrade Level or Specialization Level to see what impact that specialization would have. Specialization Level corresponds Barn Upgrade Level * 10 because your specialization improves every 10 barn upgrade levels."),h()(),D(103,"br")(104,"br"),f(105,"div",30)(106,"div",49)(107,"label",50),g(108,"Specialization:"),h(),f(109,"select",51),V("ngModelChange",function(r){return B(e),w().selectedSpecialization=r}),f(110,"option",52),g(111,"Breeding Grounds"),h(),f(112,"option",52),g(113,"Training Facility"),h(),x(114,bj,2,1,"option",53),x(115,_j,2,1,"option",53),h(),D(116,"br")(117,"br"),f(118,"div")(119,"label",54),g(120,"Barn Upgrade Level:"),h(),f(121,"input",55),V("change",function(){return B(e),w().changeBarnUpgradeLevel()})("ngModelChange",function(r){return B(e),w().barnUpgradeLevel=r}),h(),D(122,"br"),f(123,"em"),g(124,"or"),h(),D(125,"br"),f(126,"label",56),g(127,"Barn Specialization Level:"),h(),f(128,"input",57),V("change",function(){return B(e),w().changeBarnSpecializationLevel()})("ngModelChange",function(r){return B(e),w().barnSpecializationLevel=r}),h()()(),f(129,"div",34)(130,"span"),g(131,"Result:"),h(),D(132,"br")(133,"span",19),h()()()()(),D(134,"hr"),x(135,yj,39,5,"div",6),h()}if(2&t){const e=w();p(20),_("ngModel",e.coinGainRenownAmount),p(4),_("ngClass",fi(23,d2,e.coinGainRenownAmount>50)),p(4),at(e.coinGainRenownAmount),p(2),_("ngIf",e.coinGainRenownAmount<=50),p(2),_("ngClass",fi(25,d2,e.coinGainRenownAmount<=50)),p(4),at(e.coinGainRenownAmount),p(3),_("ngIf",e.coinGainRenownAmount>50),p(22),_("ngModel",e.selectedAnimalType),p(1),_("ngForOf",e.availableAnimals),p(6),_("ngModel",e.bonusBreedXp),p(4),_("ngModel",e.breedingGroundsSpecializationLevel),p(8),at(e.bonusBreedXp),p(3),at(e.breedingGroundsSpecializationLevel),p(4),K("",e.trainingBreedXpGain," XP gained after completing any Training"),p(22),_("ngModel",e.selectedSpecialization),p(1),_("value",1),p(2),_("value",2),p(2),_("ngIf",e.seeAttractionSpoiler),p(1),_("ngIf",e.seeResearchCenterSpoiler),p(6),_("ngModel",e.barnUpgradeLevel),p(7),_("ngModel",e.barnSpecializationLevel),p(5),_("innerHTML",e.barnSpecializationLevelAmount,Bt),p(2),_("ngIf",e.lookupService.isItemUnlocked("duoRace"))}}let Cj=(()=>{class t{constructor(e,n,r,a,o){this.componentCommunicationService=e,this.lookupService=n,this.gameLoopService=r,this.globalService=a,this.specializationService=o,this.seeAttractionSpoiler=!1,this.seeResearchCenterSpoiler=!1,this.seeOceanCourseTypeSpoiler=!1,this.seeTundraCourseTypeSpoiler=!1,this.seeVolcanicCourseTypeSpoiler=!1,this.currentSection=Ou.basics,this.faqSectionsEnum=Ou,this.sunnyTerrainInfo="",this.stormyTerrainInfo="",this.rainyTerrainInfo="",this.snowfallTerrainInfo="",this.ashfallTerrainInfo="",this.maelstromTerrainInfo="",this.hailstormTerrainInfo="",this.torridTerrainInfo="",this.coinGainRenownAmount=0,this.facilityLevel=0,this.incubatorUpgradeLevel=0,this.selectedAnimalType=0,this.animalSelected=!0,this.availableAnimals=[],this.bonusBreedXp=0,this.breedingGroundsSpecializationLevel=0,this.selectedSpecialization=1,this.barnUpgradeLevel=0,this.barnSpecializationLevel=0,this.renownCoinGain=0,this.incubatorModifierAmount=0,this.trainingBreedXpGain=0,this.barnSpecializationLevelAmount=""}ngOnInit(){var n,r,a,e=this;this.componentCommunicationService.setNewView(vt.faqs),this.lookupService.isItemUnlocked("attractionSpecialization")&&(this.seeAttractionSpoiler=!0),this.lookupService.isItemUnlocked("researchCenterSpecialization")&&(this.seeResearchCenterSpoiler=!0),(null===(n=this.globalService.globalVar.animals.find(u=>u.type===L.Dolphin))||void 0===n?void 0:n.isAvailable)&&(this.seeOceanCourseTypeSpoiler=!0),(null===(r=this.globalService.globalVar.animals.find(u=>u.type===L.Penguin))||void 0===r?void 0:r.isAvailable)&&(this.seeTundraCourseTypeSpoiler=!0),(null===(a=this.globalService.globalVar.animals.find(u=>u.type===L.Salamander))||void 0===a?void 0:a.isAvailable)&&(this.seeVolcanicCourseTypeSpoiler=!0),this.sunnyTerrainInfo=this.lookupService.getTerrainPopoverText(new pi($e.Sunny)),this.stormyTerrainInfo=this.lookupService.getTerrainPopoverText(new pi($e.Stormy)),this.rainyTerrainInfo=this.lookupService.getTerrainPopoverText(new pi($e.Rainy)),this.torridTerrainInfo=this.lookupService.getTerrainPopoverText(new pi($e.Torrid)),this.maelstromTerrainInfo=this.lookupService.getTerrainPopoverText(new pi($e.Maelstrom)),this.hailstormTerrainInfo=this.lookupService.getTerrainPopoverText(new pi($e.Hailstorm)),this.ashfallTerrainInfo=this.lookupService.getTerrainPopoverText(new pi($e.Ashfall)),this.snowfallTerrainInfo=this.lookupService.getTerrainPopoverText(new pi($e.Snowfall)),this.availableAnimals=this.globalService.globalVar.animals.filter(u=>u.isAvailable),this.coinGainRenownAmount=this.lookupService.getRenown(),this.facilityLevel=this.lookupService.getFacilityLevel();var o=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv1"===u.name),s=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv2"===u.name),l=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv3"===u.name),c=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv4"===u.name);null!=o&&(this.incubatorUpgradeLevel=1),null!=s&&(this.incubatorUpgradeLevel=2),null!=l&&(this.incubatorUpgradeLevel=3),null!=c&&(this.incubatorUpgradeLevel=4),this.newAnimalSelected(),this.calculatorSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Sr(function*(){e.handleRenownModifierCalculation(),e.handleIncubatorModifierCalculation(),e.handleTrainingBreedXpGainCalculation(),e.handleBarnSpecializationLevelAmountCalculation()}))}handleRenownModifierCalculation(){null!=this.coinGainRenownAmount&&(this.renownCoinGain=this.lookupService.getRenownCoinModifier(this.coinGainRenownAmount,!0))}handleIncubatorModifierCalculation(){if(null!=this.incubatorUpgradeLevel&&null!=this.facilityLevel){var r=0,e=.001,n=this.globalService.globalVar.modifiers.find(a=>"incubatorUpgradeIncreaseModifier"===a.text);null!=n&&(e=n.value),r=this.facilityLevel*e,isNaN(this.incubatorUpgradeLevel)||(this.incubatorUpgradeLevel=+this.incubatorUpgradeLevel),this.incubatorUpgradeLevel>=4?(r>.1&&(r=.1),this.incubatorUpgradeLevel=4):3===this.incubatorUpgradeLevel?r>.05&&(r=.05):2===this.incubatorUpgradeLevel?r>.025&&(r=.025):1===this.incubatorUpgradeLevel?r>.01&&(r=.01):this.incubatorUpgradeLevel<=0&&(r=0),this.incubatorModifierAmount=Math.round(1e3*r)/1e3}}handleTrainingBreedXpGainCalculation(){var e=new Dt;e.miscStats.bonusBreedXpGainFromTraining=this.bonusBreedXp,this.trainingBreedXpGain=this.lookupService.getTrainingBreedGaugeIncrease(this.breedingGroundsSpecializationLevel,e)}newAnimalSelected(){this.animalSelected=!0;var e=void 0;if(null!=this.selectedAnimalType&&void 0!==(e=this.globalService.globalVar.animals.find(r=>r.getAnimalType()===L[this.selectedAnimalType]))){if(this.bonusBreedXp=e.miscStats.bonusBreedXpGainFromTraining,e.associatedBarnNumber>=0)var n=this.globalService.globalVar.barns.find(r=>r.barnNumber===(null==e?void 0:e.associatedBarnNumber));void 0!==n&&n.barnUpgrades.specialization===jt.BreedingGrounds&&(this.breedingGroundsSpecializationLevel=n.barnUpgrades.specializationLevel)}}animalNotSelected(){this.animalSelected=!1}handleBarnSpecializationLevelAmountCalculation(){1==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(jt.BreedingGrounds,this.barnSpecializationLevel):2==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(jt.TrainingFacility,this.barnSpecializationLevel):3==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(jt.Attraction,this.barnSpecializationLevel):4==+this.selectedSpecialization&&(this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(jt.ResearchCenter,this.barnSpecializationLevel))}changeBarnUpgradeLevel(){this.barnSpecializationLevel=Math.floor(this.barnUpgradeLevel/10)}changeBarnSpecializationLevel(){this.barnUpgradeLevel=10*this.barnSpecializationLevel}viewSpoiler(e){"Attraction Specialization"===e&&(this.seeAttractionSpoiler=!0),"Research Center Specialization"===e&&(this.seeResearchCenterSpoiler=!0),"Ocean Course Type"===e&&(this.seeOceanCourseTypeSpoiler=!0),"Tundra Course Type"===e&&(this.seeTundraCourseTypeSpoiler=!0),"Volcanic Course Type"===e&&(this.seeVolcanicCourseTypeSpoiler=!0)}expandAnswer(e){var n=document.getElementById(e);null!=n&&n.classList.toggle("hide")}changeSection(e){this.currentSection=e}ngOnDestroy(){null!=this.calculatorSubscription&&this.calculatorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(li),P(vn),P(xi),P(Mt),P(r0))},t.\u0275cmp=ft({type:t,selectors:[["app-faq-view"]],decls:21,vars:6,consts:[[1,"faqView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"subsections","s4Heading"],[1,"subsectionOption","buttonAsText",3,"ngClass","click"],[4,"ngIf"],[1,"expanderMargin"],["type","button","aria-label","Expand",3,"click"],[1,"faqQuestion"],["id","faqAnswerBreedGuide",1,"faqAnswer","hide"],["id","faqAnswerBreedBarnRows",1,"faqAnswer","hide"],["id","faqAnswerAllAnimals",1,"faqAnswer","hide"],[1,"flatlandColor","keyword"],[1,"keyword"],[1,"mountainColor","keyword"],[3,"ngClass","click"],[1,"hidden"],[1,"keyword",3,"ngClass"],[3,"innerHTML"],["id","faqAnswerTerrain",1,"faqAnswer","hide"],["id","faqAnswerBreedKeybinds",1,"faqAnswer","hide"],["id","faqAnswerSettings",1,"faqAnswer","hide"],["id","faqAnswerFeedback",1,"faqAnswer","hide"],["id","faqAnswerOverwhelmed",1,"faqAnswer","hide"],["id","faqAnswer1",1,"faqAnswer","hide"],["id","faqAnswer2",1,"faqAnswer","hide"],["id","faqAnswer3",1,"faqAnswer","hide"],["id","faqAnswer4",1,"faqAnswer","hide"],["id","faqAnswerRenownCalculator",1,"faqAnswer","hide"],[1,"inputsAndResult"],[1,"mb-3","inputs"],["for","renown-amount",1,"shortLabelMargin","progressionKeyword"],["id","renown-amount","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"result"],[3,"ngClass"],[1,"progressionKeyword"],["class","keyword",4,"ngIf"],["id","faqAnswerTrainingBreedXpCalculator",1,"faqAnswer","hide"],[1,"dropdownSelection"],["for","breed-xp-animal",1,"keyword"],["name","breed-xp-animal","id","breed-xp-animal",1,"spaced",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","bonus-breed-xp",1,"longLabelMargin","keyword"],["id","bonus-breed-xp","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","breeding-grounds-spec-level",1,"longLabelMargin","keyword"],["id","breeding-grounds-spec-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["id","faqAnswerBarnSpecializationGainCalculator",1,"faqAnswer","hide"],[1,"mb-3"],[1,"inputs"],["for","specialization-options",1,"keyword"],["name","specialization-options","id","specialization-options",1,"spaced",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngIf"],["for","barn-upgrade-level",1,"labelMargin","keyword"],["id","barn-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","barn-specialization-level",1,"labelMargin","keyword"],["id","barn-specialization-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["id","faqAnswerIncubatorGrowthCalculator",1,"faqAnswer","hide"],["for","incubator-upgrade-level",1,"labelMargin","specialtyKeyword"],["id","incubator-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["for","facility-level",1,"labelMargin","progressionKeyword"],["id","facility-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"specialtyKeyword"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Frequently Asked Questions"),h(),f(6,"em"),g(7,"This FAQ and game is still a work in progress! Bear with me if certain features aren't fully fleshed out and developed yet. If you have any feedback at all, please let me know using one of the links on the bottom right. Thank you so much for playing and hope you're enjoying it!"),h()(),D(8,"br"),f(9,"div",4)(10,"button",5),V("click",function(){return n.changeSection(n.faqSectionsEnum.basics)}),g(11,"Basics"),h(),f(12,"button",5),V("click",function(){return n.changeSection(n.faqSectionsEnum.progression)}),g(13,"Progression"),h(),f(14,"button",5),V("click",function(){return n.changeSection(n.faqSectionsEnum.calculators)}),g(15,"Calculators"),h()(),D(16,"hr")(17,"br"),x(18,hj,306,50,"div",6),x(19,pj,109,7,"div",6),x(20,wj,136,27,"div",6),h()()()),2&e&&(p(10),_("ngClass",n.currentSection===n.faqSectionsEnum.basics?"active":""),p(2),_("ngClass",n.currentSection===n.faqSectionsEnum.progression?"active":""),p(2),_("ngClass",n.currentSection===n.faqSectionsEnum.calculators?"active":""),p(4),_("ngIf",n.currentSection===n.faqSectionsEnum.basics),p(1),_("ngIf",n.currentSection===n.faqSectionsEnum.progression),p(1),_("ngIf",n.currentSection===n.faqSectionsEnum.calculators))},directives:[Zn,sn,hv,us,au,Sl,Dl,Bh,ai,lT,uT],styles:['.faqView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}.faqQuestion[_ngcontent-%COMP%]{display:inline-block;width:95%;font-weight:700}.hide[_ngcontent-%COMP%]{display:none}.expanderMargin[_ngcontent-%COMP%]{display:inline-block;width:5%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.inputsAndResult[_ngcontent-%COMP%]{display:flex}.inactiveCalculation[_ngcontent-%COMP%]{opacity:.5}.inputs[_ngcontent-%COMP%], .results[_ngcontent-%COMP%]{width:50%}.spoilerText[_ngcontent-%COMP%]{background-color:gray;color:transparent;-webkit-user-select:none;user-select:none;position:relative;display:inline-block;min-width:8rem}.spoilerText[_ngcontent-%COMP%]:hover > .hidden[_ngcontent-%COMP%]{display:block;color:#fff}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.shortLabelMargin[_ngcontent-%COMP%]{min-width:15%}.labelMargin[_ngcontent-%COMP%]{min-width:25%}.longLabelMargin[_ngcontent-%COMP%]{min-width:40%}.hidden[_ngcontent-%COMP%]{display:none;position:absolute}.subsections[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.viewSpoiler[_ngcontent-%COMP%]{background-color:inherit;color:inherit}@media (max-width: 800px){.expanderMargin[_ngcontent-%COMP%]{width:auto;margin-right:1rem}.faqQuestion[_ngcontent-%COMP%]{width:auto}}']}),t})(),Sj=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n}ngOnInit(){this.componentCommunicationService.setNewView(vt.stats),this.trackedStats=this.globalService.globalVar.trackedStats;var e=0;this.globalService.globalVar.animals.forEach(n=>{n.totalRacesRun>e&&(e=n.totalRacesRun,this.mostUsedAnimal=n.name,this.mostUsedAnimalCount=e)})}getColorClass(e){if(null!=e&&e.length>0){var n=this.globalService.globalVar.animals.filter(o=>o.isAvailable),r=new Dt;return n.forEach(o=>{e.includes(o.name)&&(r=o)}),{flatlandColor:"Flatland"===r.getRaceCourseType(),mountainColor:"Mountain"===r.getRaceCourseType(),waterColor:"Ocean"===r.getRaceCourseType(),tundraColor:"Tundra"===r.getRaceCourseType(),volcanicColor:"Volcanic"===r.getRaceCourseType()}}return{}}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(li))},t.\u0275cmp=ft({type:t,selectors:[["app-stats-view"]],decls:37,vars:34,consts:[[1,"statsView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"coloredText",3,"ngClass"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"Stats"),h(),D(5,"br")(6,"br"),g(7),Lt(8,"number"),D(9,"br"),g(10),Lt(11,"number"),D(12,"br"),g(13),Lt(14,"number"),D(15,"br"),f(16,"span",4),g(17),Lt(18,"number"),h(),D(19,"br"),f(20,"span",4),g(21),h(),D(22,"br"),f(23,"span",4),g(24),h(),D(25,"br"),f(26,"span",4),g(27),h(),D(28,"br"),f(29,"span",4),g(30),h(),D(31,"br"),f(32,"span",4),g(33),h(),D(34,"br"),f(35,"span",4),g(36),h()()()()),2&e&&(p(7),K(" Total Races: ",$c(8,18,n.trackedStats.totalRaces,"1.0","en-US")," "),p(3),K(" Total Meters Covered: ",$c(11,22,n.trackedStats.totalMetersRaced.toFixed(0),"1.0","en-US")," "),p(3),K(" Total Breeds: ",$c(14,26,n.trackedStats.totalBreeds,"1.0","en-US")," "),p(3),_("ngClass",n.getColorClass(n.mostUsedAnimal)),p(1),ii("Most Used Animal: ",n.mostUsedAnimal," (",$c(18,30,n.mostUsedAnimalCount,"1.0","en-US"),")"),p(3),_("ngClass",n.getColorClass(n.trackedStats.highestMaxSpeed)),p(1),K("Highest Max Speed: ",n.trackedStats.highestMaxSpeed,""),p(2),_("ngClass",n.getColorClass(n.trackedStats.highestAccelerationRate)),p(1),K("Highest Acceleration Rate: ",n.trackedStats.highestAccelerationRate,""),p(2),_("ngClass",n.getColorClass(n.trackedStats.highestStamina)),p(1),K("Highest Stamina: ",n.trackedStats.highestStamina,""),p(2),_("ngClass",n.getColorClass(n.trackedStats.highestPowerEfficiency)),p(1),K("Highest Power Efficiency: ",n.trackedStats.highestPowerEfficiency,""),p(2),_("ngClass",n.getColorClass(n.trackedStats.highestFocusDistance)),p(1),K("Highest Focus Distance: ",n.trackedStats.highestFocusDistance,""),p(2),_("ngClass",n.getColorClass(n.trackedStats.highestAdaptabilityDistance)),p(1),K("Highest Adaptability Distance: ",n.trackedStats.highestAdaptabilityDistance,""))},directives:[Zn],pipes:[fo],styles:['.statsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}']}),t})();function Tj(t,i){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=w().$implicit,n=w();p(1),_("innerHTML",n.getPopover(e.name,e.itemType),Bt)}}function Dj(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",8),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,Tj,2,1,"ng-template",null,11,ct),h()),2&t){const e=i.$implicit,n=st(8);p(1),_("ngbPopover",n),p(2),at(e.name),p(2),K(" x ",e.amount,"")}}function Rj(t,i){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=w().$implicit,n=w();p(1),_("innerHTML",n.getPopover(e.name,e.itemType),Bt)}}function xj(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",14),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,Rj,2,1,"ng-template",null,15,ct),h()),2&t){const e=i.$implicit,n=st(8);p(1),_("ngbPopover",n),p(2),at(e.name),p(2),K(" x ",e.amount,"")}}function Mj(t,i){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=w().$implicit,n=w();p(1),_("innerHTML",n.getPopover(e.name,e.itemType),Bt)}}function kj(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",16),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,Mj,2,1,"ng-template",null,17,ct),h()),2&t){const e=i.$implicit,n=st(8);p(1),_("ngbPopover",n),p(2),at(e.name),p(2),K(" x ",e.amount,"")}}function Aj(t,i){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=w().$implicit,n=w();p(1),_("innerHTML",n.getPopover(e.name,e.itemType),Bt)}}function Pj(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",18),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,Aj,2,1,"ng-template",null,19,ct),h()),2&t){const e=i.$implicit,n=st(8);p(1),_("ngbPopover",n),p(2),at(e.name),p(2),K(" x ",e.amount,"")}}let Ej=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.componentCommunicationService=r,this.utilityService=a,this.resources=[],this.equipment=[],this.specialtyItems=[],this.progressionResources=[]}ngOnInit(){this.componentCommunicationService.setNewView(vt.resources),this.resources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===$.Food||e.itemType===$.Resources).sort(),this.equipment=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===$.Equipment).sort(),this.specialtyItems=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===$.Specialty).sort(),this.progressionResources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===$.Progression).sort()}getPopover(e,n){return this.utilityService.getSanitizedHtml(this.lookupService.getResourcePopover(e,n))}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(vn),P(li),P(Ri))},t.\u0275cmp=ft({type:t,selectors:[["app-resources-view"]],decls:21,vars:4,consts:[[1,"resourcesView","gridContainer"],[1,"resources"],[1,"s4Heading","centered"],[4,"ngFor","ngForOf"],[1,"progression"],[1,"specialty"],[1,"equipment"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"screenMarginLeft",3,"ngbPopover"],[1,"resourceKeyword"],[1,"rightAligned"],[1,"miniHr"],["resourceContent",""],[1,"popoverClass"],[3,"innerHTML"],[1,"progressionKeyword"],["progressionContent",""],[1,"specialtyKeyword"],["specialityContent",""],[1,"equipmentKeyword"],["equipmentContent",""]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2),g(3,"Resources"),h(),D(4,"br"),x(5,Dj,9,3,"p",3),h(),f(6,"div",4)(7,"div",2),g(8,"Progression"),h(),D(9,"br"),x(10,xj,9,3,"p",3),h(),f(11,"div",5)(12,"div",2),g(13,"Specialty"),h(),D(14,"br"),x(15,kj,9,3,"p",3),h(),f(16,"div",6)(17,"div",2),g(18,"Equipment"),h(),D(19,"br"),x(20,Pj,9,3,"p",3),h()()),2&e&&(p(5),_("ngForOf",n.resources),p(5),_("ngForOf",n.progressionResources),p(5),_("ngForOf",n.specialtyItems),p(5),_("ngForOf",n.equipment))},directives:[ai,Hr],styles:['.resources[_ngcontent-%COMP%]{white-space:pre}.resourcesView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:25%;grid-template-rows:100%;justify-content:stretch;grid-template-areas:"resources progression specialty equipment"}.resources[_ngcontent-%COMP%]{grid-area:resources;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.progression[_ngcontent-%COMP%]{grid-area:progression;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.specialty[_ngcontent-%COMP%]{grid-area:specialty;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.equipment[_ngcontent-%COMP%]{grid-area:equipment;background-color:var(--background-secondary)}.rightAligned[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto auto;justify-content:stretch;grid-template-areas:"resources" "progression" "specialty" "equipment"}}']}),t})();var zl=q(7206);let Ij=(()=>{class t{constructor(e){this.globalService=e}redeemCode(e){var r=zl.AES.decrypt(e,"LaunchSecret!CLTRA71");0===r.toString(zl.enc.Utf8).length&&alert("Invalid code entered.");try{var a=JSON.parse(r.toString(zl.enc.Utf8));null!=a&&a.rewards.length>0&&((new Date).getTime()>new Date(a.expirationDate).getTime()?alert("This code has expired."):this.globalService.globalVar.redeemedCodes.some(o=>o.codeValue===r.toString(zl.enc.Utf8))?alert("This code has already been redeemed."):(a.rewards.forEach(o=>{var s=this.globalService.globalVar.resources.find(l=>l.name===o.name);null!=s?s.amount+=o.amount:this.globalService.globalVar.resources.push(o)}),a.codeValue=r.toString(zl.enc.Utf8),this.globalService.globalVar.redeemedCodes.push(a)))}catch(o){alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}}}return t.\u0275fac=function(e){return new(e||t)(Le(Mt))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Vj=(()=>{class t{constructor(e){this.lookupService=e}setupRewards(){this.redeemableCode=new uf,this.redeemableCode.expirationDate=new Date("2022-09-01"),this.redeemableCode.rewards.push(this.lookupService.gainCoins(1e8)),this.redeemableCode.rewards.push(this.lookupService.gainMedals(1e3))}createCode(){this.setupRewards();var n=JSON.stringify(this.redeemableCode);return zl.AES.encrypt(n,"LaunchSecret!CLTRA71").toString()}}return t.\u0275fac=function(e){return new(e||t)(Le(vn))},t.\u0275prov=rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Oj=(()=>{class t{constructor(e,n,r,a,o,s,l,c,u){this.globalService=e,this.themeService=n,this.lookupService=r,this.codeRedemptionService=a,this.codeCreationService=o,this.deploymentService=s,this.componentCommunicationService=l,this.versionControlService=c,this.utilityService=u,this.raceDisplayInfoEnum=aa,this.skipDrawRaceToggle=()=>{this.skipDrawRace=!this.skipDrawRace,this.globalService.globalVar.settings.set("skipDrawRace",this.skipDrawRace)},this.finishTrainingBeforeSwitchingToggle=()=>{this.finishTrainingBeforeSwitching=!this.finishTrainingBeforeSwitching,this.globalService.globalVar.settings.set("finishTrainingBeforeSwitching",this.finishTrainingBeforeSwitching)},this.hideTipsToggle=()=>{this.hideTips=!this.hideTips,this.globalService.globalVar.settings.set("hideTips",this.hideTips)},this.useNumbersForCircuitRankToggle=()=>{this.useNumbersForCircuitRank=!this.useNumbersForCircuitRank,this.globalService.globalVar.settings.set("useNumbersForCircuitRank",this.useNumbersForCircuitRank)},this.autoStartEventRaceToggle=()=>{this.autoStartEventRace=!this.autoStartEventRace,this.globalService.globalVar.settings.set("autoStartEventRace",this.autoStartEventRace)}}ngOnInit(){this.componentCommunicationService.setNewView(vt.settings),this.deploymentService.codeCreationMode&&console.log(this.codeCreationService.createCode()),this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1);var e=this.globalService.globalVar.settings.get("skipDrawRace");this.skipDrawRace=void 0!==e&&e,this.skipDrawRacePopoverText=this.lookupService.getSettingDescriptions("Auto Skip Race Info");var n=this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching");this.finishTrainingBeforeSwitching=void 0!==n&&n,this.finishTrainingBeforeSwitchingPopoverText=this.lookupService.getSettingDescriptions("Finish Training Before Switching");var r=this.globalService.globalVar.settings.get("raceDisplayInfo");this.raceDisplayInfo=this.getRaceDisplayInfoName(void 0===r?aa.both:r),this.raceDisplayInfoPopoverText=this.lookupService.getSettingDescriptions("Race Display Info");var a=this.globalService.globalVar.settings.get("hideTips");this.hideTips=void 0!==a&&a,this.hideTipsPopoverText=this.lookupService.getSettingDescriptions("Hide Tips");var o=this.globalService.globalVar.settings.get("useNumbersForCircuitRank");this.useNumbersForCircuitRank=void 0!==o&&o,this.useNumbersForCircuitRankPopoverText=this.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank");var s=this.globalService.globalVar.settings.get("autoStartEventRace");this.autoStartEventRace=void 0!==s&&s,this.autoStartEventRacePopoverText=this.lookupService.getSettingDescriptions("Auto Start Event Race")}SaveGame(){var e=JSON.stringify(this.globalService.globalVar),n=LZString.compressToBase64(e);this.importExportValue=n}fileChanged(e){this.file=e.target.files[0]}LoadGame(){if(confirm("This will overwrite your existing game data. Continue?")){var e=LZString.decompressFromBase64(this.importExportValue),n=JSON.parse(e);null!=n&&(this.globalService.globalVar=n0($n,n),this.versionControlService.updatePlayerVersion())}}SaveGameToFile(){var e=JSON.stringify(this.globalService.globalVar),n=LZString.compressToBase64(e);let r=new Blob([n],{type:".txt"}),a=document.createElement("a"),o=URL.createObjectURL(r);a.href=o,a.download="Cultura-v"+this.globalService.globalVar.currentVersion.toString().replace(".","_")+"-"+(new Date).toLocaleDateString(),document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(o)},0)}LoadGameFromFile(){if((null==this.file||0===this.file.length)&&alert("First select a file to import."),confirm("This will overwrite your existing game data. Continue?")){let e=new FileReader;e.onload=n=>{var r=LZString.decompressFromBase64(e.result),a=JSON.parse(r);null!=a&&(this.globalService.globalVar=n0($n,a),this.versionControlService.updatePlayerVersion())},e.readAsText(this.file)}}saveRaceDisplayInfo(){this.globalService.globalVar.settings.set("raceDisplayInfo",this.raceDisplayInfo)}changeRaceDisplayInfo(e){this.globalService.globalVar.settings.set("raceDisplayInfo",e),this.raceDisplayInfo=this.getRaceDisplayInfoName(e)}changeTheme(e){var n=wu;"White"===e&&(n=this.themeService.setWhiteTheme()),"Light"===e&&(n=this.themeService.setLightTheme()),"Twilight"===e&&(n=this.themeService.setTwilightTheme()),"Night"===e&&(n=this.themeService.setNightTheme()),this.globalService.globalVar.settings.set("theme",n),this.getThemeName()}getThemeName(){this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1)}getRaceDisplayInfoName(e){return e===aa.both?"Both":e===aa.text?"Text":e===aa.draw?"Draw":""}enterRedemptionCode(){this.codeRedemptionService.redeemCode(this.enteredRedemptionCode)}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(El),P(vn),P(Ij),P(Vj),P(ID),P(li),P(o0),P(Ri))},t.\u0275cmp=ft({type:t,selectors:[["app-settings-view"]],decls:99,vars:15,consts:[[1,"settingsView"],[1,"info"],[1,"settingsGrid"],[1,"options"],[1,"s4Heading"],[1,"toggles"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","finishTraining",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","hideTips",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","useNumbersForCircuitRank",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","autoStartEventRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave","ngbDropdown","",1,"d-inline-block",3,"ngbPopover"],[1,"bottomAligned"],["type","button","id","raceDisplayInfoDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","raceDisplayInfoDropdown"],["ngbDropdownItem","",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","themeDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","themeDropdown"],[1,"saveLoad"],[1,"importExportDiv"],["id","importExport","name","importExport","rows","10",3,"ngModel","ngModelChange"],[1,"importExportButtons"],[3,"click"],["type","file","id","fileUpload",1,"spaced",3,"change"],[1,"codeRedemption"],["for","codeRedemptionText"],["id","codeRedemptionText","type","text",1,"spaced","codeRedemptionInput",3,"ngModel","ngModelChange"],[1,"screenMarginLeft",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"h2"),g(3,"Settings"),h()(),f(4,"div",2)(5,"div",3)(6,"span",4),g(7,"Options"),h(),D(8,"br"),f(9,"div",5)(10,"span",6)(11,"label")(12,"input",7),V("ngModelChange",function(a){return n.skipDrawRace=a})("input",function(){return n.skipDrawRaceToggle()}),h(),f(13,"span"),g(14,"Auto Skip Race Info"),h()()(),D(15,"br"),f(16,"span",6)(17,"label")(18,"input",8),V("ngModelChange",function(a){return n.finishTrainingBeforeSwitching=a})("input",function(){return n.finishTrainingBeforeSwitchingToggle()}),h(),f(19,"span"),g(20,"Finish Training Before Switching "),h()()(),D(21,"br"),f(22,"span",6)(23,"label")(24,"input",9),V("ngModelChange",function(a){return n.hideTips=a})("input",function(){return n.hideTipsToggle()}),h(),f(25,"span"),g(26,"Hide Tips"),h()()(),D(27,"br"),f(28,"span",6)(29,"label")(30,"input",10),V("ngModelChange",function(a){return n.useNumbersForCircuitRank=a})("input",function(){return n.useNumbersForCircuitRankToggle()}),h(),f(31,"span"),g(32,"Use Numbers For Circuit Rank"),h()()(),D(33,"br"),f(34,"span",6)(35,"label")(36,"input",11),V("ngModelChange",function(a){return n.autoStartEventRace=a})("input",function(){return n.autoStartEventRaceToggle()}),h(),f(37,"span"),g(38,"Auto Start Event Race"),h()()(),D(39,"br"),h(),f(40,"div",12)(41,"label",13),g(42,"Race Display Info:"),h(),f(43,"button",14),g(44),h(),f(45,"div",15)(46,"button",16),V("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.draw)}),g(47,"Draw"),h(),f(48,"button",16),V("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.text)}),g(49,"Text"),h(),f(50,"button",16),V("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.both)}),g(51,"Both"),h()()(),D(52,"br"),f(53,"div",17)(54,"label",13),g(55,"Theme:"),h(),f(56,"button",18),g(57),h(),f(58,"div",19)(59,"button",16),V("click",function(){return n.changeTheme("White")}),g(60,"White"),h(),f(61,"button",16),V("click",function(){return n.changeTheme("Light")}),g(62,"Light"),h(),f(63,"button",16),V("click",function(){return n.changeTheme("Twilight")}),g(64,"Twilight"),h(),f(65,"button",16),V("click",function(){return n.changeTheme("Night")}),g(66,"Night"),h()()()(),f(67,"div",20)(68,"span",4),g(69,"Save/Load"),h(),D(70,"br"),f(71,"div",21)(72,"textarea",22),V("ngModelChange",function(a){return n.importExportValue=a}),h(),f(73,"div",23)(74,"button",24),V("click",function(){return n.LoadGame()}),g(75," Import "),h(),f(76,"button",24),V("click",function(){return n.SaveGame()}),g(77," Export "),h()(),D(78,"br"),f(79,"div",23)(80,"div")(81,"button",24),V("click",function(){return n.LoadGameFromFile()}),g(82," Import from File "),h(),f(83,"input",25),V("change",function(a){return n.fileChanged(a)}),h()(),f(84,"button",24),V("click",function(){return n.SaveGameToFile()}),g(85," Export to File "),h()()(),D(86,"br")(87,"br"),f(88,"div")(89,"span",4),g(90,"Code Redemption"),h(),D(91,"br")(92,"br"),f(93,"div",26)(94,"label",27),g(95,"Code: "),h(),f(96,"input",28),V("ngModelChange",function(a){return n.enteredRedemptionCode=a}),h(),f(97,"button",29),V("click",function(){return n.enterRedemptionCode()}),g(98," Enter "),h()()()()()()),2&e&&(p(10),_("ngbPopover",n.skipDrawRacePopoverText),p(2),_("ngModel",n.skipDrawRace),p(4),_("ngbPopover",n.finishTrainingBeforeSwitchingPopoverText),p(2),_("ngModel",n.finishTrainingBeforeSwitching),p(4),_("ngbPopover",n.hideTipsPopoverText),p(2),_("ngModel",n.hideTips),p(4),_("ngbPopover",n.useNumbersForCircuitRankPopoverText),p(2),_("ngModel",n.useNumbersForCircuitRank),p(4),_("ngbPopover",n.autoStartEventRacePopoverText),p(2),_("ngModel",n.autoStartEventRace),p(4),_("ngbPopover",n.raceDisplayInfoPopoverText),p(4),at(n.raceDisplayInfo),p(13),at(n.currentTheme),p(15),_("ngModel",n.importExportValue),p(24),_("ngModel",n.enteredRedemptionCode))},directives:[Hr,Th,Sl,Dl,Gl,M0,xf,x0,us],styles:['.settingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}#raceDisplayInfoDropdown[_ngcontent-%COMP%], #themeDropdown[_ngcontent-%COMP%]{border:1px solid;border-color:var(--background-tertiary)}.bottomAligned[_ngcontent-%COMP%]{vertical-align:bottom}.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". options saveLoad ."}.options[_ngcontent-%COMP%]{grid-area:options}.saveLoad[_ngcontent-%COMP%]{grid-area:saveLoad}#importExport[_ngcontent-%COMP%]{width:100%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.importExportButtons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.codeRedemption[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.codeRedemptionInput[_ngcontent-%COMP%]{flex:1}@media (max-width: 800px){.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". options ." ". saveLoad ."}}']}),t})();function Nj(t,i){if(1&t){const e=fe();f(0,"div",12),V("click",function(){return B(e),w().getNewTip()}),f(1,"span"),g(2),h()()}if(2&t){const e=w();p(2),ii("",e.displayingFunFact?"Fun Fact: ":"Tip: ","",e.randomTip,"")}}let Fj=(()=>{class t{constructor(e,n,r,a,o){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.componentCommunicationService=a,this.utilityService=o,this.displayingFunFact=!1,this.lastDisplayedFunFact=!1}ngOnInit(){var e=this;this.displayTip=!this.globalService.globalVar.settings.get("hideTips"),this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.randomTip=this.lookupService.getRandomTip(),this.totalTime=0,this.maxTipTime=60,this.gameLoopService.gameUpdateEvent.subscribe(function(){var n=Sr(function*(r){if(e.displayTip=!e.globalService.globalVar.settings.get("hideTips"),e.totalTime+=r,e.totalTime>=e.maxTipTime&&e.displayTip){e.totalTime=0;var a=e.utilityService.getRandomInteger(1,4);a<=3||e.lastDisplayedFunFact?(e.displayingFunFact=!1,e.lastDisplayedFunFact=!1,e.randomTip=e.lookupService.getRandomTip()):4===a&&(e.displayingFunFact=!0,e.lastDisplayedFunFact=!0,e.randomTip=e.lookupService.getRandomFunFact())}});return function(r){return n.apply(this,arguments)}}())}getNewTip(){this.totalTime=0;var e=this.utilityService.getRandomInteger(1,4);e<=3||this.lastDisplayedFunFact?(this.displayingFunFact=!1,this.lastDisplayedFunFact=!1,this.randomTip=this.lookupService.getRandomTip()):4===e&&(this.displayingFunFact=!0,this.lastDisplayedFunFact=!0,this.randomTip=this.lookupService.getRandomFunFact())}openFAQs(){this.componentCommunicationService.setNewView(vt.faqs)}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(xi),P(vn),P(li),P(Ri))},t.\u0275cmp=ft({type:t,selectors:[["app-footer"]],decls:25,vars:1,consts:[[1,"footerView"],[1,"gridContainer"],[1,"area1"],["class","area2 keyword tips",3,"click",4,"ngIf"],[1,"area3","keyword","rightAlign"],[1,"faqs",3,"click"],["href","https://discord.gg/TgbRXsXQF3","rel","noopener noreferrer","target","_blank"],["href","https://www.reddit.com/message/compose/?to=Jaghancement","rel","noopener noreferrer","target","_blank"],["href","mailto:CulturaIdle@gmail.com"],[1,"area4","keyword","rightAlign"],["href","https://www.buymeacoffee.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],["href","https://www.patreon.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],[1,"area2","keyword","tips",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2),D(3,"span"),h(),x(4,Nj,3,2,"div",3),f(5,"div",4)(6,"span")(7,"span",5),V("click",function(){return n.openFAQs()}),g(8,"FAQs"),h(),g(9," | "),f(10,"a",6),g(11,"Discord"),h(),g(12," | "),f(13,"a",7),g(14,"Reddit"),h(),g(15," | "),f(16,"a",8),g(17,"Email"),h()()(),f(18,"div",9)(19,"span")(20,"a",10),g(21,"Donate"),h(),g(22," | "),f(23,"a",11),g(24,"Patreon"),h()()()()()),2&e&&(p(4),_("ngIf",n.displayTip))},directives:[sn],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 1fr 20% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". area1 area2 area3 ." ". area1 area2 area4 ."}a[_ngcontent-%COMP%], .faqs[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.faqs[_ngcontent-%COMP%]{cursor:pointer}.faqs[_ngcontent-%COMP%]:hover{text-decoration:underline}.area1[_ngcontent-%COMP%]{grid-area:area1;justify-self:stretch}.area2[_ngcontent-%COMP%]{grid-area:area2;justify-self:stretch}.area3[_ngcontent-%COMP%]{grid-area:area3;justify-self:stretch}.area4[_ngcontent-%COMP%]{grid-area:area4;justify-self:stretch}.rightAlign[_ngcontent-%COMP%]{text-align:right}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 0% 1fr 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". . . area3 ." ". . . area4 ."}.tips[_ngcontent-%COMP%]{display:none}}']}),t})();const Bj=["tutorialContent"],Lj=["eventLoadingContent"];function Uj(t,i){1&t&&(f(0,"div",19),D(1,"app-barn-view"),h())}function Hj(t,i){1&t&&(f(0,"div",20),D(1,"app-race-selection-view"),h())}function Gj(t,i){1&t&&(f(0,"div",21),D(1,"app-animals-view"),h())}function zj(t,i){1&t&&(f(0,"div",22),D(1,"app-decks-view"),h())}function jj(t,i){1&t&&(f(0,"div",23),D(1,"app-shop-view"),h())}function $j(t,i){1&t&&(f(0,"div",24),D(1,"app-incubator-view"),h())}function Wj(t,i){1&t&&(f(0,"div",25),D(1,"app-training-track-view"),h())}function qj(t,i){1&t&&(f(0,"div",26),D(1,"app-faq-view"),h())}function Xj(t,i){1&t&&(f(0,"div",27),D(1,"app-stats-view"),h())}function Yj(t,i){1&t&&(f(0,"div",28),D(1,"app-resources-view"),h())}function Qj(t,i){1&t&&(f(0,"div",29),D(1,"app-settings-view"),h())}function Kj(t,i){if(1&t){const e=fe();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Tutorial"),h(),f(4,"button",33),V("click",function(){return B(e),w().closeTutorialModal()}),g(5,"X"),h()(),D(6,"div",34),f(7,"div",35)(8,"span")(9,"button",36),V("click",function(){return B(e),w().skipTutorial()}),g(10,"Skip Tutorial"),h()(),f(11,"span")(12,"button",36),V("click",function(){return B(e),w().continueTutorial()}),g(13,"Continue"),h()()()()}if(2&t){const e=w();p(6),_("innerHTML",e.tutorialText,Bt)}}function Zj(t,i){if(1&t){const e=fe();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Loading..."),h(),f(4,"button",33),V("click",function(){return B(e),w().closeModals()}),g(5,"X"),h()(),f(6,"div",37),g(7," Grand Prix is calculating offline time. Load times may be long while this finishes. "),h(),f(8,"div",35)(9,"span")(10,"button",36),V("click",function(){return B(e),w().closeModals()}),g(11,"Continue"),h()()()()}}let Jj=(()=>{class t{constructor(e,n,r,a,o,s,l){this.ref=e,this.globalService=n,this.modalService=r,this.tutorialService=a,this.componentCommunicationService=o,this.sanitizer=s,this.gameLoopService=l,this.navigationEnum=vt,this.activeView=vt.barn,this.loadingScreenDisplayed=!1}ngOnInit(){var e=this;this.openTutorialModal(),this.eventPrixSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=Sr(function*(a){null!=e.globalService.globalVar.eventRaceData&&e.globalService.globalVar.eventRaceData.isCatchingUp&&!e.loadingScreenDisplayed?(e.loadingScreenDisplayed=!0,e.openLoadingModal()):null!=e.globalService.globalVar.eventRaceData&&!e.globalService.globalVar.eventRaceData.isCatchingUp&&e.loadingScreenDisplayed&&(e.loadingScreenDisplayed=!1,e.closeModals())});return function(a){return r.apply(this,arguments)}}());var n=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=Sr(function*(a){e.globalService.globalVar.tutorials.showTutorial&&e.openTutorialModal(),e.globalService.globalVar.tutorials.tutorialCompleted&&n.unsubscribe()});return function(a){return r.apply(this,arguments)}}())}changeView(e){this.activeView=e}openTutorialModal(){if(!this.globalService.globalVar.tutorials.tutorialCompleted){var e=this.tutorialService.getTutorialState(this.globalService.globalVar.tutorials.currentTutorialId);this.activeView===e.associatedTab&&(this.tutorialText=this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(e.tutorialText+"\n")),this.globalService.globalVar.tutorials.showTutorial=!1,5===e.id&&(this.globalService.globalVar.tutorials.currentTutorialId+=1),this.modalService.open(this.tutorialContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(n=>{this.closeTutorialModal()},n=>{this.closeTutorialModal()}))}}openLoadingModal(){this.modalService.open(this.eventLoadingContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(e=>{this.closeModals()},e=>{this.closeModals()})}closeModals(){this.modalService.dismissAll()}closeTutorialModal(){this.modalService.dismissAll()}skipTutorial(){this.tutorialService.skipTutorial(),this.closeTutorialModal()}continueTutorial(){this.closeTutorialModal()}}return t.\u0275fac=function(e){return new(e||t)(P(Or),P(Mt),P(_o),P(VD),P(li),P(Fo),P(xi))},t.\u0275cmp=ft({type:t,selectors:[["app-main"]],viewQuery:function(e,n){if(1&e&&(_a(Bj,7),_a(Lj,7)),2&e){let r;yn(r=wn())&&(n.tutorialContent=r.first),yn(r=wn())&&(n.eventLoadingContent=r.first)}},decls:23,vars:11,consts:[[1,"gridContainer"],[1,"headerArea"],[1,"mainArea"],["id","BarnView","class","mainView",4,"ngIf"],["id","RaceSelectionView","class","mainView",4,"ngIf"],["id","AnimalsView","class","mainView",4,"ngIf"],["id","DecksView","class","mainView",4,"ngIf"],["id","ShopView","class","mainView",4,"ngIf"],["id","IncubatorView","class","mainView",4,"ngIf"],["id","TrainingTrackView","class","mainView",4,"ngIf"],["id","FaqsView","class","mainView",4,"ngIf"],["id","StatsView","class","mainView",4,"ngIf"],["id","ResourcesView","class","mainView",4,"ngIf"],["id","SettingsView","class","mainView",4,"ngIf"],[1,"navArea"],[3,"viewChanged"],[1,"footerArea"],["tutorialContent",""],["eventLoadingContent",""],["id","BarnView",1,"mainView"],["id","RaceSelectionView",1,"mainView"],["id","AnimalsView",1,"mainView"],["id","DecksView",1,"mainView"],["id","ShopView",1,"mainView"],["id","IncubatorView",1,"mainView"],["id","TrainingTrackView",1,"mainView"],["id","FaqsView",1,"mainView"],["id","StatsView",1,"mainView"],["id","ResourcesView",1,"mainView"],["id","SettingsView",1,"mainView"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"],[1,"modal-body"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1),D(2,"app-header"),h(),f(3,"div",2),x(4,Uj,2,0,"div",3),x(5,Hj,2,0,"div",4),x(6,Gj,2,0,"div",5),x(7,zj,2,0,"div",6),x(8,jj,2,0,"div",7),x(9,$j,2,0,"div",8),x(10,Wj,2,0,"div",9),x(11,qj,2,0,"div",10),x(12,Xj,2,0,"div",11),x(13,Yj,2,0,"div",12),x(14,Qj,2,0,"div",13),h(),f(15,"div",14)(16,"app-navigation",15),V("viewChanged",function(a){return n.changeView(a)}),h()(),f(17,"div",16),D(18,"app-footer"),h()(),x(19,Kj,14,1,"ng-template",null,17,ct),x(21,Zj,12,0,"ng-template",null,18,ct)),2&e&&(p(4),_("ngIf",n.activeView===n.navigationEnum.barn),p(1),_("ngIf",n.activeView===n.navigationEnum.raceselection),p(1),_("ngIf",n.activeView===n.navigationEnum.animals),p(1),_("ngIf",n.activeView===n.navigationEnum.relayTeams),p(1),_("ngIf",n.activeView===n.navigationEnum.shop),p(1),_("ngIf",n.activeView===n.navigationEnum.incubator),p(1),_("ngIf",n.activeView===n.navigationEnum.trainingtrack),p(1),_("ngIf",n.activeView===n.navigationEnum.faqs),p(1),_("ngIf",n.activeView===n.navigationEnum.stats),p(1),_("ngIf",n.activeView===n.navigationEnum.resources),p(1),_("ngIf",n.activeView===n.navigationEnum.settings))},directives:[iU,sn,AH,I9,pz,Tz,Wz,dj,l2,Cj,Sj,Ej,Oj,a2,Fj],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100vh;grid-template-columns:88% 12%;grid-template-rows:6% 88% 6%;justify-content:stretch;grid-template-areas:"header header" "main  nav" "footer footer"}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100%;position:fixed;top:0;left:0;bottom:0;right:0;grid-template-columns:88% 12%;grid-template-rows:auto 1fr auto;justify-content:stretch;grid-template-areas:"header header" "main  main" "footer footer"}.navArea[_ngcontent-%COMP%]{display:none}}.mainArea[_ngcontent-%COMP%]{grid-area:main;justify-self:stretch;background-color:var(--background-default);color:var(--foreground-default);overflow:auto}.navArea[_ngcontent-%COMP%]{grid-area:nav;justify-self:stretch;background-color:var(--background-secondary);color:var(--foreground-default)}.footerArea[_ngcontent-%COMP%]{grid-area:footer;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.headerArea[_ngcontent-%COMP%]{grid-area:header;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.mainView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.rightAlign[_ngcontent-%COMP%]{float:right}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.spaceBetween[_ngcontent-%COMP%]{justify-content:space-between!important}']}),t})(),e$=(()=>{class t{constructor(e,n,r,a,o,s,l,c,u){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.specializationService=a,this.themeService=o,this.raceLogicService=s,this.deploymentService=l,this.versionControlService=c,this.utilityService=u,this.title="Cultura",this.newGame=!0,this.saveTime=0,this.saveFrequency=20,this.racingSaveFrequency=60}ngOnInit(){var e=this,n=localStorage.getItem("culturaIdleGameData");if((null==n||0===n.length)&&(n=localStorage.getItem("gameData")),null!=n){var r=LZString.decompressFromBase64(n),a=JSON.parse(r);null!=a&&(this.newGame=!1,this.globalService.globalVar=n0($n,a),this.loadStartup())}this.deploymentService.setDevMode();var s=this.deploymentService.devModeActive;(this.newGame||this.deploymentService.forceStartNewGame)&&this.globalService.initializeGlobalVariables(),s&&(this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.devModeInitialize(74,2)),this.versionControlService.updatePlayerVersion(),this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=Sr(function*(d){e.gameCheckup(d),e.saveTime+=d;var m=e.saveFrequency;e.globalService.globalVar.userIsRacing&&(m=e.racingSaveFrequency),e.saveTime>=m&&(e.saveTime=0,e.saveGame());performance.now()});return function(d){return u.apply(this,arguments)}}()),this.gameLoopService.Update()}gameCheckup(e){if(null!=this.globalService.globalVar.animals){this.globalService.globalVar.animals.filter(a=>a.isAvailable).forEach(a=>{a.canTrain=this.lookupService.canAnimalTrain(a)});var n=this.globalService.globalVar.animals.filter(a=>a.isAvailable&&null!=a.currentTraining);n.length>0&&n.forEach(a=>{var o;if(null!=a.currentTraining&&a.canTrain)for(a.currentTraining.timeTrained+=e,this.specializationService.handleAttractionRevenue(e,a);null!==a.currentTraining&&a.currentTraining.timeTrained>=a.currentTraining.timeToComplete;){var s=this.globalService.globalVar.barns.find(u=>u.barnNumber===a.associatedBarnNumber),l=0;null!=s&&s.barnUpgrades.specialization===jt.BreedingGrounds&&(l=s.barnUpgrades.specializationLevel),null!=s&&s.barnUpgrades.specialization===jt.ResearchCenter?this.specializationService.handleResearchCenterStatIncrease(a,s):a.increaseStatsFromCurrentTraining(),this.globalService.calculateAnimalRacingStats(a);var c=this.lookupService.getTrainingBreedGaugeIncrease(l,a);this.globalService.IncreaseAnimalBreedGauge(a,c),a.currentTraining.timeTrained-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining<=0&&(a.currentTraining=null),null!=a.queuedTraining&&(null!==a.currentTraining&&a.currentTraining.trainingTimeRemaining>0&&(a.queuedTraining.timeTrained+=null===(o=a.currentTraining)||void 0===o?void 0:o.timeTrained),a.currentTraining=a.queuedTraining,a.queuedTraining=null)}});var r=this.globalService.globalVar.incubator;null!=r&&null!=r.assignedAnimal&&null!=r.assignedTrait&&(r.timeTrained+=e,r.timeTrained>=r.timeToComplete&&(r.assignedAnimal.trait=r.assignedTrait,this.globalService.calculateAnimalRacingStats(r.assignedAnimal),r.assignedAnimal.canTrain=!0,r.timeTrained=0,r.assignedAnimal=null,r.assignedTrait=null)),this.handleFreeRaceTimer(e),this.handleGrandPrix(e)}}handleGrandPrix(e){var n=!1;if(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime&&(n=!0,this.globalService.globalVar.eventRaceData.initialSetupComplete&&(this.globalService.globalVar.eventRaceData.remainingEventRaceTime>0?(this.globalService.globalVar.eventRaceData.segmentTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime,this.globalService.globalVar.eventRaceData.overallTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime):this.globalService.globalVar.eventRaceData.isCatchingUp||(this.globalService.globalVar.eventRaceData=new Wi)),!this.globalService.globalVar.eventRaceData.isCatchingUp&&0===this.globalService.globalVar.eventRaceData.remainingEventRaceTime))this.globalService.globalVar.eventRaceData.initialSetupComplete=!1;else{if(this.globalService.globalVar.eventRaceData.initialSetupComplete||(this.globalService.initialGrandPrixSetup("Z"),this.globalService.globalVar.eventRaceData.initialSetupComplete=!0,this.globalService.globalVar.notifications.isEventRaceNowActive=!0),this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&this.globalService.increaseGrandPrixRaceRank(),this.globalService.globalVar.eventRaceData.isRunning){if(null==this.globalService.globalVar.animalDecks.find(l=>l.isEventDeck))return;n||(this.globalService.globalVar.eventRaceData.segmentTimeCounter+=e,this.globalService.globalVar.eventRaceData.overallTimeCounter+=e),this.globalService.globalVar.eventRaceData.remainingEventRaceTime=this.globalService.getRemainingEventRaceTime(),this.globalService.getTimeToEventRace()>0&&this.globalService.globalVar.eventRaceData.bonusTime>0&&(this.globalService.globalVar.eventRaceData.bonusTime-=e,this.globalService.globalVar.eventRaceData.bonusTime<=0&&(this.globalService.globalVar.eventRaceData.bonusTime=0));var a=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60;if(this.globalService.globalVar.eventRaceData.isCatchingUp=this.globalService.globalVar.eventRaceData.segmentTimeCounter>=2*a,this.globalService.globalVar.eventRaceData.segmentTimeCounter>=a)if(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1,this.globalService.globalVar.eventRaceData.segmentTimeCounter-=a,this.globalService.globalVar.eventRaceData.distanceCovered+=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.distanceCovered,this.globalService.globalVar.eventRaceData.previousRaceSegment=this.globalService.globalVar.eventRaceData.currentRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.previousRaceSegment.reduceExportSize(),this.globalService.globalVar.eventRaceData.distanceCovered>=this.globalService.globalVar.eventRaceData.totalDistance)this.globalService.globalVar.eventRaceData.distanceCovered=this.globalService.globalVar.eventRaceData.totalDistance,this.grandPrixRaceCompleted();else{this.checkForEventRelayAnimal()&&this.resetEventAbilityUseCounts();var s=this.globalService.getGrandPrixRacingAnimal();void 0!==s.type&&void 0!==s.name&&(this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.globalVar.eventRaceData.nextRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.nextRaceSegment),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s))}this.checkForGrandPrixRewards()}else this.globalService.globalVar.eventRaceData.isCatchingUp=!1;this.updateExhaustionAndMorale(e),this.updateWeatherCluster(e)}}grandPrixRaceCompleted(){this.globalService.globalVar.eventRaceData.isGrandPrixCompleted=!0,this.globalService.stopGrandPrixRace()}updateExhaustionAndMorale(e){this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter+=e;var n=300,r=this.globalService.globalVar.modifiers.find(s=>"exhaustionGainTimerCapGrandPrixModifier"===s.text);null!=r&&(n=r.value);var a=.02,o=this.globalService.globalVar.modifiers.find(s=>"exhaustionGainGrandPrixModifier"===s.text);null!=o&&(a=o.value),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter>n&&(this.globalService.globalVar.eventRaceData.animalData.forEach(s=>{s.exhaustionStatReduction+=a,s.exhaustionStatReduction>=1&&(s.exhaustionStatReduction=1),s.morale<1&&(s.morale+=a)}),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter-=n)}updateWeatherCluster(e){this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter+=e;var n=7200,r=this.globalService.globalVar.modifiers.find(a=>"weatherClusterTimerCapGrandPrixModifier"===a.text);null!=r&&(n=r.value),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter>n&&(this.globalService.globalVar.eventRaceData.weatherCluster=this.globalService.getRandomGrandPrixWeatherCluster(void 0,this.globalService.globalVar.eventRaceData.weatherCluster),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter-=n)}checkForEventRelayAnimal(){var e=!1;if(this.globalService.globalVar.eventRaceData.animalData.some(d=>d.isSetToRelay))this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1,d.isSetToRelay&&(d.isCurrentlyRacing=!0,d.isSetToRelay=!1,this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===z.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0))});else{var n=this.globalService.getGrandPrixRacingAnimal(),r=this.globalService.getExhaustionOfAnimal(n.type),a=this.lookupService.getBreedLevelRequiredForGrandPrix();if(void 0!==r&&r<.5){var o=this.globalService.globalVar.animalDecks.find(d=>d.isEventDeck);if(null!=o){var s=null==o?void 0:o.selectedAnimals.filter(d=>d.breedLevel>=a);if((s=s.filter(d=>{var m=this.globalService.globalVar.eventRaceData.animalData.find(b=>b.associatedAnimalType===d.type);if(null!=m){var v=this.globalService.globalVar.animals.find(b=>b.type===d.type);return m.exhaustionStatReduction>=.5&&!this.globalService.shouldShowSlowSegmentWarning(v)||m.associatedAnimalType===n.type}return!1})).length>1){var l=0,c=!1;if(s.forEach(d=>{d.type===n.type&&(c=!0),c||(l+=1)}),c||(l=-1),this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1}),l>-1){var u=l+1;u===s.length&&(u=0),this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.associatedAnimalType===s[u].type&&(d.isCurrentlyRacing=!0,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===z.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s[u]))})}else this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.associatedAnimalType===s[0].type&&(d.isCurrentlyRacing=!0,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===z.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s[0]))});this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1}else this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1}),this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalService.globalVar.eventRaceData.isRunning=!1,this.globalService.globalVar.eventRaceData.overallTimeCounter-=this.globalService.globalVar.eventRaceData.segmentTimeCounter,this.globalService.globalVar.eventRaceData.segmentTimeCounter=0,this.globalService.globalVar.eventRaceData.currentRaceSegment.reduceExportSize()}}}return e}resetEventAbilityUseCounts(){null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.eventAbilityData||this.globalService.globalVar.eventRaceData.eventAbilityData.resetUseCounts()}checkForGrandPrixRewards(){var e=this.globalService.globalVar.eventRaceData.distanceCovered,n=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),r=100,a=this.globalService.globalVar.modifiers.find(me=>"grandPrixCoinRewardModifier"===me.text);null!=a&&(r=a.value);var o=5,s=this.globalService.globalVar.modifiers.find(me=>"grandPrixRenownRewardModifier"===me.text);null!=s&&(o=s.value);var l=5e6,c=this.globalService.globalVar.modifiers.find(me=>"metersPerCoinsGrandPrixModifier"===me.text);null!=c&&(l=c.value);var u=2e7,d=this.globalService.globalVar.modifiers.find(me=>"metersPerRenownGrandPrixModifier"===me.text);null!=d&&(u=d.value);var m=5e7,v=this.globalService.globalVar.modifiers.find(me=>"grandPrixToken1MeterModifier"===me.text);null!=v&&(m=v.value);var b=5e7,y=this.globalService.globalVar.modifiers.find(me=>"grandPrixToken2MeterModifier"===me.text);null!=y&&(b=y.value);var T=5e7,k=this.globalService.globalVar.modifiers.find(me=>"grandPrixToken3MeterModifier"===me.text);null!=k&&(T=k.value);var C=5e7,R=this.globalService.globalVar.modifiers.find(me=>"grandPrixToken4MeterModifier"===me.text);null!=R&&(C=R.value);var ee,Q=this.globalService.globalVar.eventRaceData.totalDistance/(u*n);e>=l*n*(this.globalService.globalVar.eventRaceData.coinRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.coinRewardsObtained<this.globalService.globalVar.eventRaceData.totalDistance/(l*n)&&(this.globalService.globalVar.eventRaceData.coinRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(me=>"Coins"===me.name))&&(ee.amount+=r),this.lookupService.addResourceToResourceList(new oe("Coins",r,$.Resources),this.globalService.globalVar.previousEventRewards)),e>=u*n*(this.globalService.globalVar.eventRaceData.renownRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.renownRewardsObtained<Q&&(this.globalService.globalVar.eventRaceData.renownRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(pe=>"Renown"===pe.name))&&(ee.amount+=o),this.lookupService.addResourceToResourceList(new oe("Renown",o,$.Progression),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=0&&e>=m*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(pe=>"Tokens"===pe.name))?ee.amount+=1*n:this.globalService.globalVar.resources.push(new oe("Tokens",1*n,$.Resources)),this.lookupService.addResourceToResourceList(new oe("Tokens",1*n,$.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=1&&e>=b*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(pe=>"Tokens"===pe.name))?ee.amount+=2*n:this.globalService.globalVar.resources.push(new oe("Tokens",2*n,$.Resources)),this.lookupService.addResourceToResourceList(new oe("Tokens",2*n,$.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=2&&e>=T*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(pe=>"Tokens"===pe.name))?ee.amount+=3*n:this.globalService.globalVar.resources.push(new oe("Tokens",3*n,$.Resources)),this.lookupService.addResourceToResourceList(new oe("Tokens",3*n,$.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=3&&e>=C*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(pe=>"Tokens"===pe.name))?ee.amount+=4*n:this.globalService.globalVar.resources.push(new oe("Tokens",4*n,$.Resources)),this.lookupService.addResourceToResourceList(new oe("Tokens",4*n,$.Resources),this.globalService.globalVar.previousEventRewards))}handleFreeRaceTimer(e){if(this.globalService.globalVar.freeRaceTimePeriodCounter+=e,!this.globalService.globalVar.userIsRacing){var n=300,r=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==r&&(n=r.value);var a=3600,o=this.globalService.globalVar.modifiers.find(s=>"autoFreeRacesMaxIdleTimePeriodModifier"===s.text);for(void 0!==o&&(a=o.value);this.globalService.globalVar.freeRaceTimePeriodCounter>=n&&a>0;)this.globalService.globalVar.freeRaceTimePeriodCounter>a&&(this.globalService.globalVar.freeRaceTimePeriodCounter=a),this.globalService.globalVar.freeRaceTimePeriodCounter-=n,a-=n,this.globalService.globalVar.freeRaceCounter=0,this.globalService.globalVar.autoFreeRaceCounter=0,this.handleAutoFreeRace(e)}}handleAutoFreeRace(e){var n=this.lookupService.getResourceByName("Team Manager");if(null==n&&(n=0),0!==n&&this.globalService.globalVar.animalDecks.some(d=>d.autoRunFreeRace)){var r=this.globalService.globalVar.animalDecks.find(d=>d.autoRunFreeRace);if(null!=r)for(var a=n-this.globalService.globalVar.autoFreeRaceCounter,o=this.lookupService.getTotalFreeRacesPerPeriod(),s=0;s<a;s++){if(this.globalService.globalVar.freeRaceCounter>=o)return;this.globalService.globalVar.autoFreeRaceCounter+=1,this.globalService.globalVar.freeRaceCounter+=1;var l=this.globalService.generateFreeRace(),c=!0;l.raceLegs.forEach(d=>{(null==r?void 0:r.selectedAnimals.some(m=>m.raceCourseType===d.courseType))||(c=!1)}),c&&this.raceLogicService.runRace(l)}}}saveGame(){if("undefined"!=typeof Worker){const r=new Worker(q.tu(new URL(q.p+q.u(151),q.b)));r.onmessage=({data:a})=>{localStorage.setItem("culturaIdleGameData",a),r.terminate()},r.postMessage(this.globalService.globalVar)}else{var e=JSON.stringify(this.globalService.globalVar),n=LZString.compressToBase64(e);localStorage.setItem("culturaIdleGameData",n)}}loadStartup(){var e=this.globalService.globalVar.settings.get("theme");null!=e&&this.themeService.setActiveTheme(e)}}return t.\u0275fac=function(e){return new(e||t)(P(Mt),P(xi),P(vn),P(r0),P(El),P(a0),P(ID),P(o0),P(Ri))},t.\u0275cmp=ft({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"grayTheme"]],template:function(e,n){1&e&&(f(0,"div",0),D(1,"app-main"),h(),D(2,"router-outlet"))},directives:[Jj,Vv],styles:[""]}),t})(),t$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Rn({type:t,bootstrap:[e$]}),t.\u0275inj=Cn({providers:[Mt,El],imports:[[tF,x5,K6,Cr,_T,p3]]}),t})();(function IV(){xC=!1})(),JN().bootstrapModule(t$).catch(t=>console.error(t))},7466:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var H=X,re=H.lib.BlockCipher,he=H.algo,Z=[],ne=[],I=[],M=[],N=[],E=[],O=[],A=[],F=[],G=[];!function(){for(var U=[],j=0;j<256;j++)U[j]=j<128?j<<1:j<<1^283;var de=0,te=0;for(j=0;j<256;j++){var le=te^te<<1^te<<2^te<<3^te<<4;Z[de]=le=le>>>8^255&le^99,ne[le]=de;var Ve,ue=U[de],Re=U[ue],we=U[Re];I[de]=(Ve=257*U[le]^16843008*le)<<24|Ve>>>8,M[de]=Ve<<16|Ve>>>16,N[de]=Ve<<8|Ve>>>24,E[de]=Ve,O[le]=(Ve=16843009*we^65537*Re^257*ue^16843008*de)<<24|Ve>>>8,A[le]=Ve<<16|Ve>>>16,F[le]=Ve<<8|Ve>>>24,G[le]=Ve,de?(de=ue^U[U[U[we^ue]]],te^=U[U[te]]):de=te=1}}();var ae=[0,1,2,4,8,16,32,64,128,27,54],ie=he.AES=re.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var j=this._keyPriorReset=this._key,de=j.words,te=j.sigBytes/4,ue=4*((this._nRounds=te+6)+1),Re=this._keySchedule=[],we=0;we<ue;we++)we<te?Re[we]=de[we]:(U=Re[we-1],we%te?te>6&&we%te==4&&(U=Z[U>>>24]<<24|Z[U>>>16&255]<<16|Z[U>>>8&255]<<8|Z[255&U]):(U=Z[(U=U<<8|U>>>24)>>>24]<<24|Z[U>>>16&255]<<16|Z[U>>>8&255]<<8|Z[255&U],U^=ae[we/te|0]<<24),Re[we]=Re[we-te]^U);for(var Ve=this._invKeySchedule=[],He=0;He<ue;He++){if(we=ue-He,He%4)var U=Re[we];else U=Re[we-4];Ve[He]=He<4||we<=4?U:O[Z[U>>>24]]^A[Z[U>>>16&255]]^F[Z[U>>>8&255]]^G[Z[255&U]]}}},encryptBlock:function(U,j){this._doCryptBlock(U,j,this._keySchedule,I,M,N,E,Z)},decryptBlock:function(U,j){var de=U[j+1];U[j+1]=U[j+3],U[j+3]=de,this._doCryptBlock(U,j,this._invKeySchedule,O,A,F,G,ne),de=U[j+1],U[j+1]=U[j+3],U[j+3]=de},_doCryptBlock:function(U,j,de,te,le,ue,Re,we){for(var Ve=this._nRounds,He=U[j]^de[0],ge=U[j+1]^de[1],Ae=U[j+2]^de[2],Fe=U[j+3]^de[3],Pe=4,ut=1;ut<Ve;ut++){var Be=te[He>>>24]^le[ge>>>16&255]^ue[Ae>>>8&255]^Re[255&Fe]^de[Pe++],Ut=te[ge>>>24]^le[Ae>>>16&255]^ue[Fe>>>8&255]^Re[255&He]^de[Pe++],Zt=te[Ae>>>24]^le[Fe>>>16&255]^ue[He>>>8&255]^Re[255&ge]^de[Pe++],Se=te[Fe>>>24]^le[He>>>16&255]^ue[ge>>>8&255]^Re[255&Ae]^de[Pe++];He=Be,ge=Ut,Ae=Zt,Fe=Se}Be=(we[He>>>24]<<24|we[ge>>>16&255]<<16|we[Ae>>>8&255]<<8|we[255&Fe])^de[Pe++],Ut=(we[ge>>>24]<<24|we[Ae>>>16&255]<<16|we[Fe>>>8&255]<<8|we[255&He])^de[Pe++],Zt=(we[Ae>>>24]<<24|we[Fe>>>16&255]<<16|we[He>>>8&255]<<8|we[255&ge])^de[Pe++],Se=(we[Fe>>>24]<<24|we[He>>>16&255]<<16|we[ge>>>8&255]<<8|we[255&Ae])^de[Pe++],U[j]=Be,U[j+1]=Ut,U[j+2]=Zt,U[j+3]=Se},keySize:8});H.AES=re._createHelper(ie)}(),X.AES)},3057:function(Ce,xe,q){var J,re,he,Z,ne,I,N,O,A,G,ae,ie,j,te,ue,Re,Ve,He,X;Ce.exports=(X=q(7585),q(7865),void(X.lib.Cipher||(J=X,re=J.lib,he=re.Base,Z=re.WordArray,ne=re.BufferedBlockAlgorithm,I=J.enc,N=I.Base64,O=J.algo.EvpKDF,A=re.Cipher=ne.extend({cfg:he.extend(),createEncryptor:function(ge,Ae){return this.create(this._ENC_XFORM_MODE,ge,Ae)},createDecryptor:function(ge,Ae){return this.create(this._DEC_XFORM_MODE,ge,Ae)},init:function(ge,Ae,Fe){this.cfg=this.cfg.extend(Fe),this._xformMode=ge,this._key=Ae,this.reset()},reset:function(){ne.reset.call(this),this._doReset()},process:function(ge){return this._append(ge),this._process()},finalize:function(ge){return ge&&this._append(ge),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ge(Ae){return"string"==typeof Ae?He:Re}return function(Ae){return{encrypt:function(Fe,Pe,ut){return ge(Pe).encrypt(Ae,Fe,Pe,ut)},decrypt:function(Fe,Pe,ut){return ge(Pe).decrypt(Ae,Fe,Pe,ut)}}}}()}),re.StreamCipher=A.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),G=J.mode={},ae=re.BlockCipherMode=he.extend({createEncryptor:function(ge,Ae){return this.Encryptor.create(ge,Ae)},createDecryptor:function(ge,Ae){return this.Decryptor.create(ge,Ae)},init:function(ge,Ae){this._cipher=ge,this._iv=Ae}}),ie=G.CBC=function(){var ge=ae.extend();function Ae(Fe,Pe,ut){var Be,Ut=this._iv;Ut?(Be=Ut,this._iv=undefined):Be=this._prevBlock;for(var Zt=0;Zt<ut;Zt++)Fe[Pe+Zt]^=Be[Zt]}return ge.Encryptor=ge.extend({processBlock:function(Fe,Pe){var ut=this._cipher,Be=ut.blockSize;Ae.call(this,Fe,Pe,Be),ut.encryptBlock(Fe,Pe),this._prevBlock=Fe.slice(Pe,Pe+Be)}}),ge.Decryptor=ge.extend({processBlock:function(Fe,Pe){var ut=this._cipher,Be=ut.blockSize,Ut=Fe.slice(Pe,Pe+Be);ut.decryptBlock(Fe,Pe),Ae.call(this,Fe,Pe,Be),this._prevBlock=Ut}}),ge}(),j=(J.pad={}).Pkcs7={pad:function(ge,Ae){for(var Fe=4*Ae,Pe=Fe-ge.sigBytes%Fe,ut=Pe<<24|Pe<<16|Pe<<8|Pe,Be=[],Ut=0;Ut<Pe;Ut+=4)Be.push(ut);var Zt=Z.create(Be,Pe);ge.concat(Zt)},unpad:function(ge){ge.sigBytes-=255&ge.words[ge.sigBytes-1>>>2]}},re.BlockCipher=A.extend({cfg:A.cfg.extend({mode:ie,padding:j}),reset:function(){var ge;A.reset.call(this);var Ae=this.cfg,Fe=Ae.iv,Pe=Ae.mode;this._xformMode==this._ENC_XFORM_MODE?ge=Pe.createEncryptor:(ge=Pe.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==ge?this._mode.init(this,Fe&&Fe.words):(this._mode=ge.call(Pe,this,Fe&&Fe.words),this._mode.__creator=ge)},_doProcessBlock:function(ge,Ae){this._mode.processBlock(ge,Ae)},_doFinalize:function(){var ge,Ae=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Ae.pad(this._data,this.blockSize),ge=this._process(!0)):(ge=this._process(!0),Ae.unpad(ge)),ge},blockSize:4}),te=re.CipherParams=he.extend({init:function(ge){this.mixIn(ge)},toString:function(ge){return(ge||this.formatter).stringify(this)}}),ue=(J.format={}).OpenSSL={stringify:function(ge){var Fe=ge.ciphertext,Pe=ge.salt;return(Pe?Z.create([1398893684,1701076831]).concat(Pe).concat(Fe):Fe).toString(N)},parse:function(ge){var Ae,Fe=N.parse(ge),Pe=Fe.words;return 1398893684==Pe[0]&&1701076831==Pe[1]&&(Ae=Z.create(Pe.slice(2,4)),Pe.splice(0,4),Fe.sigBytes-=16),te.create({ciphertext:Fe,salt:Ae})}},Re=re.SerializableCipher=he.extend({cfg:he.extend({format:ue}),encrypt:function(ge,Ae,Fe,Pe){Pe=this.cfg.extend(Pe);var ut=ge.createEncryptor(Fe,Pe),Be=ut.finalize(Ae),Ut=ut.cfg;return te.create({ciphertext:Be,key:Fe,iv:Ut.iv,algorithm:ge,mode:Ut.mode,padding:Ut.padding,blockSize:ge.blockSize,formatter:Pe.format})},decrypt:function(ge,Ae,Fe,Pe){return Pe=this.cfg.extend(Pe),Ae=this._parse(Ae,Pe.format),ge.createDecryptor(Fe,Pe).finalize(Ae.ciphertext)},_parse:function(ge,Ae){return"string"==typeof ge?Ae.parse(ge,this):ge}}),Ve=(J.kdf={}).OpenSSL={execute:function(ge,Ae,Fe,Pe){Pe||(Pe=Z.random(8));var ut=O.create({keySize:Ae+Fe}).compute(ge,Pe),Be=Z.create(ut.words.slice(Ae),4*Fe);return ut.sigBytes=4*Ae,te.create({key:ut,iv:Be,salt:Pe})}},He=re.PasswordBasedCipher=Re.extend({cfg:Re.cfg.extend({kdf:Ve}),encrypt:function(ge,Ae,Fe,Pe){var ut=(Pe=this.cfg.extend(Pe)).kdf.execute(Fe,ge.keySize,ge.ivSize);Pe.iv=ut.iv;var Be=Re.encrypt.call(this,ge,Ae,ut.key,Pe);return Be.mixIn(ut),Be},decrypt:function(ge,Ae,Fe,Pe){Pe=this.cfg.extend(Pe),Ae=this._parse(Ae,Pe.format);var ut=Pe.kdf.execute(Fe,ge.keySize,ge.ivSize,Ae.salt);return Pe.iv=ut.iv,Re.decrypt.call(this,ge,Ae,ut.key,Pe)}}))))},7585:function(Ce,xe,q){var X;Ce.exports=(X=X||function(H,J){var re;if("undefined"!=typeof window&&window.crypto&&(re=window.crypto),"undefined"!=typeof self&&self.crypto&&(re=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(re=globalThis.crypto),!re&&"undefined"!=typeof window&&window.msCrypto&&(re=window.msCrypto),!re&&"undefined"!=typeof global&&global.crypto&&(re=global.crypto),!re)try{re=q(2480)}catch(U){}var he=function(){if(re){if("function"==typeof re.getRandomValues)try{return re.getRandomValues(new Uint32Array(1))[0]}catch(U){}if("function"==typeof re.randomBytes)try{return re.randomBytes(4).readInt32LE()}catch(U){}}throw new Error("Native crypto module could not be used to get secure random number.")},Z=Object.create||function(){function U(){}return function(j){var de;return U.prototype=j,de=new U,U.prototype=null,de}}(),ne={},I=ne.lib={},M=I.Base={extend:function(U){var j=Z(this);return U&&j.mixIn(U),(!j.hasOwnProperty("init")||this.init===j.init)&&(j.init=function(){j.$super.init.apply(this,arguments)}),j.init.prototype=j,j.$super=this,j},create:function(){var U=this.extend();return U.init.apply(U,arguments),U},init:function(){},mixIn:function(U){for(var j in U)U.hasOwnProperty(j)&&(this[j]=U[j]);U.hasOwnProperty("toString")&&(this.toString=U.toString)},clone:function(){return this.init.prototype.extend(this)}},N=I.WordArray=M.extend({init:function(U,j){U=this.words=U||[],this.sigBytes=null!=j?j:4*U.length},toString:function(U){return(U||O).stringify(this)},concat:function(U){var j=this.words,de=U.words,te=this.sigBytes,le=U.sigBytes;if(this.clamp(),te%4)for(var ue=0;ue<le;ue++)j[te+ue>>>2]|=(de[ue>>>2]>>>24-ue%4*8&255)<<24-(te+ue)%4*8;else for(var we=0;we<le;we+=4)j[te+we>>>2]=de[we>>>2];return this.sigBytes+=le,this},clamp:function(){var U=this.words,j=this.sigBytes;U[j>>>2]&=4294967295<<32-j%4*8,U.length=H.ceil(j/4)},clone:function(){var U=M.clone.call(this);return U.words=this.words.slice(0),U},random:function(U){for(var j=[],de=0;de<U;de+=4)j.push(he());return new N.init(j,U)}}),E=ne.enc={},O=E.Hex={stringify:function(U){for(var j=U.words,de=U.sigBytes,te=[],le=0;le<de;le++){var ue=j[le>>>2]>>>24-le%4*8&255;te.push((ue>>>4).toString(16)),te.push((15&ue).toString(16))}return te.join("")},parse:function(U){for(var j=U.length,de=[],te=0;te<j;te+=2)de[te>>>3]|=parseInt(U.substr(te,2),16)<<24-te%8*4;return new N.init(de,j/2)}},A=E.Latin1={stringify:function(U){for(var j=U.words,de=U.sigBytes,te=[],le=0;le<de;le++)te.push(String.fromCharCode(j[le>>>2]>>>24-le%4*8&255));return te.join("")},parse:function(U){for(var j=U.length,de=[],te=0;te<j;te++)de[te>>>2]|=(255&U.charCodeAt(te))<<24-te%4*8;return new N.init(de,j)}},F=E.Utf8={stringify:function(U){try{return decodeURIComponent(escape(A.stringify(U)))}catch(j){throw new Error("Malformed UTF-8 data")}},parse:function(U){return A.parse(unescape(encodeURIComponent(U)))}},G=I.BufferedBlockAlgorithm=M.extend({reset:function(){this._data=new N.init,this._nDataBytes=0},_append:function(U){"string"==typeof U&&(U=F.parse(U)),this._data.concat(U),this._nDataBytes+=U.sigBytes},_process:function(U){var j,de=this._data,te=de.words,le=de.sigBytes,ue=this.blockSize,we=le/(4*ue),Ve=(we=U?H.ceil(we):H.max((0|we)-this._minBufferSize,0))*ue,He=H.min(4*Ve,le);if(Ve){for(var ge=0;ge<Ve;ge+=ue)this._doProcessBlock(te,ge);j=te.splice(0,Ve),de.sigBytes-=He}return new N.init(j,He)},clone:function(){var U=M.clone.call(this);return U._data=this._data.clone(),U},_minBufferSize:0}),ie=(I.Hasher=G.extend({cfg:M.extend(),init:function(U){this.cfg=this.cfg.extend(U),this.reset()},reset:function(){G.reset.call(this),this._doReset()},update:function(U){return this._append(U),this._process(),this},finalize:function(U){return U&&this._append(U),this._doFinalize()},blockSize:16,_createHelper:function(U){return function(j,de){return new U.init(de).finalize(j)}},_createHmacHelper:function(U){return function(j,de){return new ie.HMAC.init(U,de).finalize(j)}}}),ne.algo={});return ne}(Math),X)},8319:function(Ce,xe,q){var X,re;Ce.exports=(X=q(7585),re=X.lib.WordArray,X.enc.Base64={stringify:function(I){var M=I.words,N=I.sigBytes,E=this._map;I.clamp();for(var O=[],A=0;A<N;A+=3)for(var ie=(M[A>>>2]>>>24-A%4*8&255)<<16|(M[A+1>>>2]>>>24-(A+1)%4*8&255)<<8|M[A+2>>>2]>>>24-(A+2)%4*8&255,U=0;U<4&&A+.75*U<N;U++)O.push(E.charAt(ie>>>6*(3-U)&63));var j=E.charAt(64);if(j)for(;O.length%4;)O.push(j);return O.join("")},parse:function(I){var M=I.length,N=this._map,E=this._reverseMap;if(!E){E=this._reverseMap=[];for(var O=0;O<N.length;O++)E[N.charCodeAt(O)]=O}var A=N.charAt(64);if(A){var F=I.indexOf(A);-1!==F&&(M=F)}return function ne(I,M,N){for(var E=[],O=0,A=0;A<M;A++)if(A%4){var F=N[I.charCodeAt(A-1)]<<A%4*2,G=N[I.charCodeAt(A)]>>>6-A%4*2;E[O>>>2]|=(F|G)<<24-O%4*8,O++}return re.create(E,O)}(I,M,E)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},X.enc.Base64)},4410:function(Ce,xe,q){var X,re;Ce.exports=(X=q(7585),re=X.lib.WordArray,X.enc.Base64url={stringify:function(I,M=!0){var N=I.words,E=I.sigBytes,O=M?this._safe_map:this._map;I.clamp();for(var A=[],F=0;F<E;F+=3)for(var U=(N[F>>>2]>>>24-F%4*8&255)<<16|(N[F+1>>>2]>>>24-(F+1)%4*8&255)<<8|N[F+2>>>2]>>>24-(F+2)%4*8&255,j=0;j<4&&F+.75*j<E;j++)A.push(O.charAt(U>>>6*(3-j)&63));var de=O.charAt(64);if(de)for(;A.length%4;)A.push(de);return A.join("")},parse:function(I,M=!0){var N=I.length,E=M?this._safe_map:this._map,O=this._reverseMap;if(!O){O=this._reverseMap=[];for(var A=0;A<E.length;A++)O[E.charCodeAt(A)]=A}var F=E.charAt(64);if(F){var G=I.indexOf(F);-1!==G&&(N=G)}return function ne(I,M,N){for(var E=[],O=0,A=0;A<M;A++)if(A%4){var F=N[I.charCodeAt(A-1)]<<A%4*2,G=N[I.charCodeAt(A)]>>>6-A%4*2;E[O>>>2]|=(F|G)<<24-O%4*8,O++}return re.create(E,O)}(I,N,O)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},X.enc.Base64url)},9012:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),function(){var re=X.lib.WordArray,he=X.enc;function ne(I){return I<<8&4278255360|I>>>8&16711935}he.Utf16=he.Utf16BE={stringify:function(I){for(var M=I.words,N=I.sigBytes,E=[],O=0;O<N;O+=2)E.push(String.fromCharCode(M[O>>>2]>>>16-O%4*8&65535));return E.join("")},parse:function(I){for(var M=I.length,N=[],E=0;E<M;E++)N[E>>>1]|=I.charCodeAt(E)<<16-E%2*16;return re.create(N,2*M)}},he.Utf16LE={stringify:function(I){for(var M=I.words,N=I.sigBytes,E=[],O=0;O<N;O+=2){var A=ne(M[O>>>2]>>>16-O%4*8&65535);E.push(String.fromCharCode(A))}return E.join("")},parse:function(I){for(var M=I.length,N=[],E=0;E<M;E++)N[E>>>1]|=ne(I.charCodeAt(E)<<16-E%2*16);return re.create(N,2*M)}}}(),X.enc.Utf16)},7865:function(Ce,xe,q){var H,J,re,he,Z,I,X;Ce.exports=(X=q(7585),q(5162),q(3764),he=(J=(H=X).lib).WordArray,I=(Z=H.algo).EvpKDF=(re=J.Base).extend({cfg:re.extend({keySize:4,hasher:Z.MD5,iterations:1}),init:function(M){this.cfg=this.cfg.extend(M)},compute:function(M,N){for(var E,O=this.cfg,A=O.hasher.create(),F=he.create(),G=F.words,ae=O.keySize,ie=O.iterations;G.length<ae;){E&&A.update(E),E=A.update(M).finalize(N),A.reset();for(var U=1;U<ie;U++)E=A.finalize(E),A.reset();F.concat(E)}return F.sigBytes=4*ae,F}}),H.EvpKDF=function(M,N,E){return I.create(E).compute(M,N)},X.EvpKDF)},1847:function(Ce,xe,q){var X,he,ne;Ce.exports=(X=q(7585),q(3057),he=X.lib.CipherParams,ne=X.enc.Hex,X.format.Hex={stringify:function(N){return N.ciphertext.toString(ne)},parse:function(N){var E=ne.parse(N);return he.create({ciphertext:E})}},X.format.Hex)},3764:function(Ce,xe,q){var X,Z;Ce.exports=(X=q(7585),Z=X.enc.Utf8,void(X.algo.HMAC=X.lib.Base.extend({init:function(M,N){M=this._hasher=new M.init,"string"==typeof N&&(N=Z.parse(N));var E=M.blockSize,O=4*E;N.sigBytes>O&&(N=M.finalize(N)),N.clamp();for(var A=this._oKey=N.clone(),F=this._iKey=N.clone(),G=A.words,ae=F.words,ie=0;ie<E;ie++)G[ie]^=1549556828,ae[ie]^=909522486;A.sigBytes=F.sigBytes=O,this.reset()},reset:function(){var M=this._hasher;M.reset(),M.update(this._iKey)},update:function(M){return this._hasher.update(M),this},finalize:function(M){var N=this._hasher,E=N.finalize(M);return N.reset(),N.finalize(this._oKey.clone().concat(E))}})))},7206:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(401),q(7412),q(9012),q(8319),q(4410),q(9493),q(5162),q(1817),q(8769),q(3351),q(6787),q(1971),q(4973),q(3764),q(8812),q(7865),q(3057),q(4424),q(6635),q(3592),q(9354),q(7934),q(4413),q(4630),q(187),q(1691),q(3237),q(1847),q(7466),q(7243),q(486),q(8182),q(3544),X)},7412:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),function(){if("function"==typeof ArrayBuffer){var re=X.lib.WordArray,he=re.init,Z=re.init=function(ne){if(ne instanceof ArrayBuffer&&(ne=new Uint8Array(ne)),(ne instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&ne instanceof Uint8ClampedArray||ne instanceof Int16Array||ne instanceof Uint16Array||ne instanceof Int32Array||ne instanceof Uint32Array||ne instanceof Float32Array||ne instanceof Float64Array)&&(ne=new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength)),ne instanceof Uint8Array){for(var I=ne.byteLength,M=[],N=0;N<I;N++)M[N>>>2]|=ne[N]<<24-N%4*8;he.call(this,M,I)}else he.apply(this,arguments)};Z.prototype=re}}(),X.lib.WordArray)},9493:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),function(H){var J=X,re=J.lib,he=re.WordArray,Z=re.Hasher,ne=J.algo,I=[];!function(){for(var F=0;F<64;F++)I[F]=4294967296*H.abs(H.sin(F+1))|0}();var M=ne.MD5=Z.extend({_doReset:function(){this._hash=new he.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(F,G){for(var ae=0;ae<16;ae++){var ie=G+ae,U=F[ie];F[ie]=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8)}var j=this._hash.words,de=F[G+0],te=F[G+1],le=F[G+2],ue=F[G+3],Re=F[G+4],we=F[G+5],Ve=F[G+6],He=F[G+7],ge=F[G+8],Ae=F[G+9],Fe=F[G+10],Pe=F[G+11],ut=F[G+12],Be=F[G+13],Ut=F[G+14],Zt=F[G+15],Se=j[0],Ie=j[1],be=j[2],ke=j[3];Se=N(Se,Ie,be,ke,de,7,I[0]),ke=N(ke,Se,Ie,be,te,12,I[1]),be=N(be,ke,Se,Ie,le,17,I[2]),Ie=N(Ie,be,ke,Se,ue,22,I[3]),Se=N(Se,Ie,be,ke,Re,7,I[4]),ke=N(ke,Se,Ie,be,we,12,I[5]),be=N(be,ke,Se,Ie,Ve,17,I[6]),Ie=N(Ie,be,ke,Se,He,22,I[7]),Se=N(Se,Ie,be,ke,ge,7,I[8]),ke=N(ke,Se,Ie,be,Ae,12,I[9]),be=N(be,ke,Se,Ie,Fe,17,I[10]),Ie=N(Ie,be,ke,Se,Pe,22,I[11]),Se=N(Se,Ie,be,ke,ut,7,I[12]),ke=N(ke,Se,Ie,be,Be,12,I[13]),be=N(be,ke,Se,Ie,Ut,17,I[14]),Se=E(Se,Ie=N(Ie,be,ke,Se,Zt,22,I[15]),be,ke,te,5,I[16]),ke=E(ke,Se,Ie,be,Ve,9,I[17]),be=E(be,ke,Se,Ie,Pe,14,I[18]),Ie=E(Ie,be,ke,Se,de,20,I[19]),Se=E(Se,Ie,be,ke,we,5,I[20]),ke=E(ke,Se,Ie,be,Fe,9,I[21]),be=E(be,ke,Se,Ie,Zt,14,I[22]),Ie=E(Ie,be,ke,Se,Re,20,I[23]),Se=E(Se,Ie,be,ke,Ae,5,I[24]),ke=E(ke,Se,Ie,be,Ut,9,I[25]),be=E(be,ke,Se,Ie,ue,14,I[26]),Ie=E(Ie,be,ke,Se,ge,20,I[27]),Se=E(Se,Ie,be,ke,Be,5,I[28]),ke=E(ke,Se,Ie,be,le,9,I[29]),be=E(be,ke,Se,Ie,He,14,I[30]),Se=O(Se,Ie=E(Ie,be,ke,Se,ut,20,I[31]),be,ke,we,4,I[32]),ke=O(ke,Se,Ie,be,ge,11,I[33]),be=O(be,ke,Se,Ie,Pe,16,I[34]),Ie=O(Ie,be,ke,Se,Ut,23,I[35]),Se=O(Se,Ie,be,ke,te,4,I[36]),ke=O(ke,Se,Ie,be,Re,11,I[37]),be=O(be,ke,Se,Ie,He,16,I[38]),Ie=O(Ie,be,ke,Se,Fe,23,I[39]),Se=O(Se,Ie,be,ke,Be,4,I[40]),ke=O(ke,Se,Ie,be,de,11,I[41]),be=O(be,ke,Se,Ie,ue,16,I[42]),Ie=O(Ie,be,ke,Se,Ve,23,I[43]),Se=O(Se,Ie,be,ke,Ae,4,I[44]),ke=O(ke,Se,Ie,be,ut,11,I[45]),be=O(be,ke,Se,Ie,Zt,16,I[46]),Se=A(Se,Ie=O(Ie,be,ke,Se,le,23,I[47]),be,ke,de,6,I[48]),ke=A(ke,Se,Ie,be,He,10,I[49]),be=A(be,ke,Se,Ie,Ut,15,I[50]),Ie=A(Ie,be,ke,Se,we,21,I[51]),Se=A(Se,Ie,be,ke,ut,6,I[52]),ke=A(ke,Se,Ie,be,ue,10,I[53]),be=A(be,ke,Se,Ie,Fe,15,I[54]),Ie=A(Ie,be,ke,Se,te,21,I[55]),Se=A(Se,Ie,be,ke,ge,6,I[56]),ke=A(ke,Se,Ie,be,Zt,10,I[57]),be=A(be,ke,Se,Ie,Ve,15,I[58]),Ie=A(Ie,be,ke,Se,Be,21,I[59]),Se=A(Se,Ie,be,ke,Re,6,I[60]),ke=A(ke,Se,Ie,be,Pe,10,I[61]),be=A(be,ke,Se,Ie,le,15,I[62]),Ie=A(Ie,be,ke,Se,Ae,21,I[63]),j[0]=j[0]+Se|0,j[1]=j[1]+Ie|0,j[2]=j[2]+be|0,j[3]=j[3]+ke|0},_doFinalize:function(){var F=this._data,G=F.words,ae=8*this._nDataBytes,ie=8*F.sigBytes;G[ie>>>5]|=128<<24-ie%32;var U=H.floor(ae/4294967296),j=ae;G[15+(ie+64>>>9<<4)]=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),G[14+(ie+64>>>9<<4)]=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8),F.sigBytes=4*(G.length+1),this._process();for(var de=this._hash,te=de.words,le=0;le<4;le++){var ue=te[le];te[le]=16711935&(ue<<8|ue>>>24)|4278255360&(ue<<24|ue>>>8)}return de},clone:function(){var F=Z.clone.call(this);return F._hash=this._hash.clone(),F}});function N(F,G,ae,ie,U,j,de){var te=F+(G&ae|~G&ie)+U+de;return(te<<j|te>>>32-j)+G}function E(F,G,ae,ie,U,j,de){var te=F+(G&ie|ae&~ie)+U+de;return(te<<j|te>>>32-j)+G}function O(F,G,ae,ie,U,j,de){var te=F+(G^ae^ie)+U+de;return(te<<j|te>>>32-j)+G}function A(F,G,ae,ie,U,j,de){var te=F+(ae^(G|~ie))+U+de;return(te<<j|te>>>32-j)+G}J.MD5=Z._createHelper(M),J.HmacMD5=Z._createHmacHelper(M)}(Math),X.MD5)},4424:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(3057),X.mode.CFB=function(){var H=X.lib.BlockCipherMode.extend();function J(re,he,Z,ne){var I,M=this._iv;M?(I=M.slice(0),this._iv=void 0):I=this._prevBlock,ne.encryptBlock(I,0);for(var N=0;N<Z;N++)re[he+N]^=I[N]}return H.Encryptor=H.extend({processBlock:function(re,he){var Z=this._cipher,ne=Z.blockSize;J.call(this,re,he,ne,Z),this._prevBlock=re.slice(he,he+ne)}}),H.Decryptor=H.extend({processBlock:function(re,he){var Z=this._cipher,ne=Z.blockSize,I=re.slice(he,he+ne);J.call(this,re,he,ne,Z),this._prevBlock=I}}),H}(),X.mode.CFB)},3592:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(3057),X.mode.CTRGladman=function(){var H=X.lib.BlockCipherMode.extend();function J(Z){if(255==(Z>>24&255)){var ne=Z>>16&255,I=Z>>8&255,M=255&Z;255===ne?(ne=0,255===I?(I=0,255===M?M=0:++M):++I):++ne,Z=0,Z+=ne<<16,Z+=I<<8,Z+=M}else Z+=1<<24;return Z}var he=H.Encryptor=H.extend({processBlock:function(Z,ne){var I=this._cipher,M=I.blockSize,N=this._iv,E=this._counter;N&&(E=this._counter=N.slice(0),this._iv=void 0),function re(Z){return 0===(Z[0]=J(Z[0]))&&(Z[1]=J(Z[1])),Z}(E);var O=E.slice(0);I.encryptBlock(O,0);for(var A=0;A<M;A++)Z[ne+A]^=O[A]}});return H.Decryptor=he,H}(),X.mode.CTRGladman)},6635:function(Ce,xe,q){var H,J,X;Ce.exports=(X=q(7585),q(3057),X.mode.CTR=(J=(H=X.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(re,he){var Z=this._cipher,ne=Z.blockSize,I=this._iv,M=this._counter;I&&(M=this._counter=I.slice(0),this._iv=void 0);var N=M.slice(0);Z.encryptBlock(N,0),M[ne-1]=M[ne-1]+1|0;for(var E=0;E<ne;E++)re[he+E]^=N[E]}}),H.Decryptor=J,H),X.mode.CTR)},7934:function(Ce,xe,q){var H,X;Ce.exports=(X=q(7585),q(3057),X.mode.ECB=((H=X.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(J,re){this._cipher.encryptBlock(J,re)}}),H.Decryptor=H.extend({processBlock:function(J,re){this._cipher.decryptBlock(J,re)}}),H),X.mode.ECB)},9354:function(Ce,xe,q){var H,J,X;Ce.exports=(X=q(7585),q(3057),X.mode.OFB=(J=(H=X.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(re,he){var Z=this._cipher,ne=Z.blockSize,I=this._iv,M=this._keystream;I&&(M=this._keystream=I.slice(0),this._iv=void 0),Z.encryptBlock(M,0);for(var N=0;N<ne;N++)re[he+N]^=M[N]}}),H.Decryptor=J,H),X.mode.OFB)},4413:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(3057),X.pad.AnsiX923={pad:function(H,J){var re=H.sigBytes,he=4*J,Z=he-re%he,ne=re+Z-1;H.clamp(),H.words[ne>>>2]|=Z<<24-ne%4*8,H.sigBytes+=Z},unpad:function(H){H.sigBytes-=255&H.words[H.sigBytes-1>>>2]}},X.pad.Ansix923)},4630:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(3057),X.pad.Iso10126={pad:function(H,J){var re=4*J,he=re-H.sigBytes%re;H.concat(X.lib.WordArray.random(he-1)).concat(X.lib.WordArray.create([he<<24],1))},unpad:function(H){H.sigBytes-=255&H.words[H.sigBytes-1>>>2]}},X.pad.Iso10126)},187:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(3057),X.pad.Iso97971={pad:function(H,J){H.concat(X.lib.WordArray.create([2147483648],1)),X.pad.ZeroPadding.pad(H,J)},unpad:function(H){X.pad.ZeroPadding.unpad(H),H.sigBytes--}},X.pad.Iso97971)},3237:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(3057),X.pad.NoPadding={pad:function(){},unpad:function(){}},X.pad.NoPadding)},1691:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(3057),X.pad.ZeroPadding={pad:function(H,J){var re=4*J;H.clamp(),H.sigBytes+=re-(H.sigBytes%re||re)},unpad:function(H){var J=H.words,re=H.sigBytes-1;for(re=H.sigBytes-1;re>=0;re--)if(J[re>>>2]>>>24-re%4*8&255){H.sigBytes=re+1;break}}},X.pad.ZeroPadding)},8812:function(Ce,xe,q){var H,J,re,he,Z,I,M,X;Ce.exports=(X=q(7585),q(5162),q(3764),he=(J=(H=X).lib).WordArray,I=(Z=H.algo).HMAC,M=Z.PBKDF2=(re=J.Base).extend({cfg:re.extend({keySize:4,hasher:Z.SHA1,iterations:1}),init:function(N){this.cfg=this.cfg.extend(N)},compute:function(N,E){for(var O=this.cfg,A=I.create(O.hasher,N),F=he.create(),G=he.create([1]),ae=F.words,ie=G.words,U=O.keySize,j=O.iterations;ae.length<U;){var de=A.update(E).finalize(G);A.reset();for(var te=de.words,le=te.length,ue=de,Re=1;Re<j;Re++){ue=A.finalize(ue),A.reset();for(var we=ue.words,Ve=0;Ve<le;Ve++)te[Ve]^=we[Ve]}F.concat(de),ie[0]++}return F.sigBytes=4*U,F}}),H.PBKDF2=function(N,E,O){return M.create(O).compute(N,E)},X.PBKDF2)},3544:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var H=X,re=H.lib.StreamCipher,Z=[],ne=[],I=[],M=H.algo.RabbitLegacy=re.extend({_doReset:function(){var E=this._key.words,O=this.cfg.iv,A=this._X=[E[0],E[3]<<16|E[2]>>>16,E[1],E[0]<<16|E[3]>>>16,E[2],E[1]<<16|E[0]>>>16,E[3],E[2]<<16|E[1]>>>16],F=this._C=[E[2]<<16|E[2]>>>16,4294901760&E[0]|65535&E[1],E[3]<<16|E[3]>>>16,4294901760&E[1]|65535&E[2],E[0]<<16|E[0]>>>16,4294901760&E[2]|65535&E[3],E[1]<<16|E[1]>>>16,4294901760&E[3]|65535&E[0]];this._b=0;for(var G=0;G<4;G++)N.call(this);for(G=0;G<8;G++)F[G]^=A[G+4&7];if(O){var ae=O.words,ie=ae[0],U=ae[1],j=16711935&(ie<<8|ie>>>24)|4278255360&(ie<<24|ie>>>8),de=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),te=j>>>16|4294901760&de,le=de<<16|65535&j;for(F[0]^=j,F[1]^=te,F[2]^=de,F[3]^=le,F[4]^=j,F[5]^=te,F[6]^=de,F[7]^=le,G=0;G<4;G++)N.call(this)}},_doProcessBlock:function(E,O){var A=this._X;N.call(this),Z[0]=A[0]^A[5]>>>16^A[3]<<16,Z[1]=A[2]^A[7]>>>16^A[5]<<16,Z[2]=A[4]^A[1]>>>16^A[7]<<16,Z[3]=A[6]^A[3]>>>16^A[1]<<16;for(var F=0;F<4;F++)Z[F]=16711935&(Z[F]<<8|Z[F]>>>24)|4278255360&(Z[F]<<24|Z[F]>>>8),E[O+F]^=Z[F]},blockSize:4,ivSize:2});function N(){for(var E=this._X,O=this._C,A=0;A<8;A++)ne[A]=O[A];for(O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<ne[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<ne[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<ne[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<ne[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<ne[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<ne[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<ne[6]>>>0?1:0)|0,this._b=O[7]>>>0<ne[7]>>>0?1:0,A=0;A<8;A++){var F=E[A]+O[A],G=65535&F,ae=F>>>16;I[A]=((G*G>>>17)+G*ae>>>15)+ae*ae^((4294901760&F)*F|0)+((65535&F)*F|0)}E[0]=I[0]+(I[7]<<16|I[7]>>>16)+(I[6]<<16|I[6]>>>16)|0,E[1]=I[1]+(I[0]<<8|I[0]>>>24)+I[7]|0,E[2]=I[2]+(I[1]<<16|I[1]>>>16)+(I[0]<<16|I[0]>>>16)|0,E[3]=I[3]+(I[2]<<8|I[2]>>>24)+I[1]|0,E[4]=I[4]+(I[3]<<16|I[3]>>>16)+(I[2]<<16|I[2]>>>16)|0,E[5]=I[5]+(I[4]<<8|I[4]>>>24)+I[3]|0,E[6]=I[6]+(I[5]<<16|I[5]>>>16)+(I[4]<<16|I[4]>>>16)|0,E[7]=I[7]+(I[6]<<8|I[6]>>>24)+I[5]|0}H.RabbitLegacy=re._createHelper(M)}(),X.RabbitLegacy)},8182:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var H=X,re=H.lib.StreamCipher,Z=[],ne=[],I=[],M=H.algo.Rabbit=re.extend({_doReset:function(){for(var E=this._key.words,O=this.cfg.iv,A=0;A<4;A++)E[A]=16711935&(E[A]<<8|E[A]>>>24)|4278255360&(E[A]<<24|E[A]>>>8);var F=this._X=[E[0],E[3]<<16|E[2]>>>16,E[1],E[0]<<16|E[3]>>>16,E[2],E[1]<<16|E[0]>>>16,E[3],E[2]<<16|E[1]>>>16],G=this._C=[E[2]<<16|E[2]>>>16,4294901760&E[0]|65535&E[1],E[3]<<16|E[3]>>>16,4294901760&E[1]|65535&E[2],E[0]<<16|E[0]>>>16,4294901760&E[2]|65535&E[3],E[1]<<16|E[1]>>>16,4294901760&E[3]|65535&E[0]];for(this._b=0,A=0;A<4;A++)N.call(this);for(A=0;A<8;A++)G[A]^=F[A+4&7];if(O){var ae=O.words,ie=ae[0],U=ae[1],j=16711935&(ie<<8|ie>>>24)|4278255360&(ie<<24|ie>>>8),de=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),te=j>>>16|4294901760&de,le=de<<16|65535&j;for(G[0]^=j,G[1]^=te,G[2]^=de,G[3]^=le,G[4]^=j,G[5]^=te,G[6]^=de,G[7]^=le,A=0;A<4;A++)N.call(this)}},_doProcessBlock:function(E,O){var A=this._X;N.call(this),Z[0]=A[0]^A[5]>>>16^A[3]<<16,Z[1]=A[2]^A[7]>>>16^A[5]<<16,Z[2]=A[4]^A[1]>>>16^A[7]<<16,Z[3]=A[6]^A[3]>>>16^A[1]<<16;for(var F=0;F<4;F++)Z[F]=16711935&(Z[F]<<8|Z[F]>>>24)|4278255360&(Z[F]<<24|Z[F]>>>8),E[O+F]^=Z[F]},blockSize:4,ivSize:2});function N(){for(var E=this._X,O=this._C,A=0;A<8;A++)ne[A]=O[A];for(O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<ne[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<ne[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<ne[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<ne[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<ne[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<ne[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<ne[6]>>>0?1:0)|0,this._b=O[7]>>>0<ne[7]>>>0?1:0,A=0;A<8;A++){var F=E[A]+O[A],G=65535&F,ae=F>>>16;I[A]=((G*G>>>17)+G*ae>>>15)+ae*ae^((4294901760&F)*F|0)+((65535&F)*F|0)}E[0]=I[0]+(I[7]<<16|I[7]>>>16)+(I[6]<<16|I[6]>>>16)|0,E[1]=I[1]+(I[0]<<8|I[0]>>>24)+I[7]|0,E[2]=I[2]+(I[1]<<16|I[1]>>>16)+(I[0]<<16|I[0]>>>16)|0,E[3]=I[3]+(I[2]<<8|I[2]>>>24)+I[1]|0,E[4]=I[4]+(I[3]<<16|I[3]>>>16)+(I[2]<<16|I[2]>>>16)|0,E[5]=I[5]+(I[4]<<8|I[4]>>>24)+I[3]|0,E[6]=I[6]+(I[5]<<16|I[5]>>>16)+(I[4]<<16|I[4]>>>16)|0,E[7]=I[7]+(I[6]<<8|I[6]>>>24)+I[5]|0}H.Rabbit=re._createHelper(M)}(),X.Rabbit)},486:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var H=X,re=H.lib.StreamCipher,he=H.algo,Z=he.RC4=re.extend({_doReset:function(){for(var M=this._key,N=M.words,E=M.sigBytes,O=this._S=[],A=0;A<256;A++)O[A]=A;A=0;for(var F=0;A<256;A++){var G=A%E,ie=O[A];O[A]=O[F=(F+O[A]+(N[G>>>2]>>>24-G%4*8&255))%256],O[F]=ie}this._i=this._j=0},_doProcessBlock:function(M,N){M[N]^=ne.call(this)},keySize:8,ivSize:0});function ne(){for(var M=this._S,N=this._i,E=this._j,O=0,A=0;A<4;A++){var F=M[N=(N+1)%256];M[N]=M[E=(E+M[N])%256],M[E]=F,O|=M[(M[N]+M[E])%256]<<24-8*A}return this._i=N,this._j=E,O}H.RC4=re._createHelper(Z);var I=he.RC4Drop=Z.extend({cfg:Z.cfg.extend({drop:192}),_doReset:function(){Z._doReset.call(this);for(var M=this.cfg.drop;M>0;M--)ne.call(this)}});H.RC4Drop=re._createHelper(I)}(),X.RC4)},4973:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),function(H){var J=X,re=J.lib,he=re.WordArray,Z=re.Hasher,ne=J.algo,I=he.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),M=he.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),N=he.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),E=he.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),O=he.create([0,1518500249,1859775393,2400959708,2840853838]),A=he.create([1352829926,1548603684,1836072691,2053994217,0]),F=ne.RIPEMD160=Z.extend({_doReset:function(){this._hash=he.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(te,le){for(var ue=0;ue<16;ue++){var Re=le+ue,we=te[Re];te[Re]=16711935&(we<<8|we>>>24)|4278255360&(we<<24|we>>>8)}var Be,Ut,Zt,Se,Ie,be,ke,An,Ct,$t,Wt,Ve=this._hash.words,He=O.words,ge=A.words,Ae=I.words,Fe=M.words,Pe=N.words,ut=E.words;for(be=Be=Ve[0],ke=Ut=Ve[1],An=Zt=Ve[2],Ct=Se=Ve[3],$t=Ie=Ve[4],ue=0;ue<80;ue+=1)Wt=Be+te[le+Ae[ue]]|0,Wt+=ue<16?G(Ut,Zt,Se)+He[0]:ue<32?ae(Ut,Zt,Se)+He[1]:ue<48?ie(Ut,Zt,Se)+He[2]:ue<64?U(Ut,Zt,Se)+He[3]:j(Ut,Zt,Se)+He[4],Wt=(Wt=de(Wt|=0,Pe[ue]))+Ie|0,Be=Ie,Ie=Se,Se=de(Zt,10),Zt=Ut,Ut=Wt,Wt=be+te[le+Fe[ue]]|0,Wt+=ue<16?j(ke,An,Ct)+ge[0]:ue<32?U(ke,An,Ct)+ge[1]:ue<48?ie(ke,An,Ct)+ge[2]:ue<64?ae(ke,An,Ct)+ge[3]:G(ke,An,Ct)+ge[4],Wt=(Wt=de(Wt|=0,ut[ue]))+$t|0,be=$t,$t=Ct,Ct=de(An,10),An=ke,ke=Wt;Wt=Ve[1]+Zt+Ct|0,Ve[1]=Ve[2]+Se+$t|0,Ve[2]=Ve[3]+Ie+be|0,Ve[3]=Ve[4]+Be+ke|0,Ve[4]=Ve[0]+Ut+An|0,Ve[0]=Wt},_doFinalize:function(){var te=this._data,le=te.words,ue=8*this._nDataBytes,Re=8*te.sigBytes;le[Re>>>5]|=128<<24-Re%32,le[14+(Re+64>>>9<<4)]=16711935&(ue<<8|ue>>>24)|4278255360&(ue<<24|ue>>>8),te.sigBytes=4*(le.length+1),this._process();for(var we=this._hash,Ve=we.words,He=0;He<5;He++){var ge=Ve[He];Ve[He]=16711935&(ge<<8|ge>>>24)|4278255360&(ge<<24|ge>>>8)}return we},clone:function(){var te=Z.clone.call(this);return te._hash=this._hash.clone(),te}});function G(te,le,ue){return te^le^ue}function ae(te,le,ue){return te&le|~te&ue}function ie(te,le,ue){return(te|~le)^ue}function U(te,le,ue){return te&ue|le&~ue}function j(te,le,ue){return te^(le|~ue)}function de(te,le){return te<<le|te>>>32-le}J.RIPEMD160=Z._createHelper(F),J.HmacRIPEMD160=Z._createHmacHelper(F)}(Math),X.RIPEMD160)},5162:function(Ce,xe,q){var H,J,re,he,ne,I,X;Ce.exports=(X=q(7585),re=(J=(H=X).lib).WordArray,ne=[],I=H.algo.SHA1=(he=J.Hasher).extend({_doReset:function(){this._hash=new re.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(M,N){for(var E=this._hash.words,O=E[0],A=E[1],F=E[2],G=E[3],ae=E[4],ie=0;ie<80;ie++){if(ie<16)ne[ie]=0|M[N+ie];else{var U=ne[ie-3]^ne[ie-8]^ne[ie-14]^ne[ie-16];ne[ie]=U<<1|U>>>31}var j=(O<<5|O>>>27)+ae+ne[ie];j+=ie<20?1518500249+(A&F|~A&G):ie<40?1859775393+(A^F^G):ie<60?(A&F|A&G|F&G)-1894007588:(A^F^G)-899497514,ae=G,G=F,F=A<<30|A>>>2,A=O,O=j}E[0]=E[0]+O|0,E[1]=E[1]+A|0,E[2]=E[2]+F|0,E[3]=E[3]+G|0,E[4]=E[4]+ae|0},_doFinalize:function(){var M=this._data,N=M.words,E=8*this._nDataBytes,O=8*M.sigBytes;return N[O>>>5]|=128<<24-O%32,N[14+(O+64>>>9<<4)]=Math.floor(E/4294967296),N[15+(O+64>>>9<<4)]=E,M.sigBytes=4*N.length,this._process(),this._hash},clone:function(){var M=he.clone.call(this);return M._hash=this._hash.clone(),M}}),H.SHA1=he._createHelper(I),H.HmacSHA1=he._createHmacHelper(I),X.SHA1)},8769:function(Ce,xe,q){var H,re,he,Z,ne,X;Ce.exports=(X=q(7585),q(1817),re=(H=X).lib.WordArray,ne=(he=H.algo).SHA224=(Z=he.SHA256).extend({_doReset:function(){this._hash=new re.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var I=Z._doFinalize.call(this);return I.sigBytes-=4,I}}),H.SHA224=Z._createHelper(ne),H.HmacSHA224=Z._createHmacHelper(ne),X.SHA224)},1817:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),function(H){var J=X,re=J.lib,he=re.WordArray,Z=re.Hasher,ne=J.algo,I=[],M=[];!function(){function O(ae){for(var ie=H.sqrt(ae),U=2;U<=ie;U++)if(!(ae%U))return!1;return!0}function A(ae){return 4294967296*(ae-(0|ae))|0}for(var F=2,G=0;G<64;)O(F)&&(G<8&&(I[G]=A(H.pow(F,.5))),M[G]=A(H.pow(F,1/3)),G++),F++}();var N=[],E=ne.SHA256=Z.extend({_doReset:function(){this._hash=new he.init(I.slice(0))},_doProcessBlock:function(O,A){for(var F=this._hash.words,G=F[0],ae=F[1],ie=F[2],U=F[3],j=F[4],de=F[5],te=F[6],le=F[7],ue=0;ue<64;ue++){if(ue<16)N[ue]=0|O[A+ue];else{var Re=N[ue-15],Ve=N[ue-2];N[ue]=((Re<<25|Re>>>7)^(Re<<14|Re>>>18)^Re>>>3)+N[ue-7]+((Ve<<15|Ve>>>17)^(Ve<<13|Ve>>>19)^Ve>>>10)+N[ue-16]}var Ae=G&ae^G&ie^ae&ie,ut=le+((j<<26|j>>>6)^(j<<21|j>>>11)^(j<<7|j>>>25))+(j&de^~j&te)+M[ue]+N[ue];le=te,te=de,de=j,j=U+ut|0,U=ie,ie=ae,ae=G,G=ut+(((G<<30|G>>>2)^(G<<19|G>>>13)^(G<<10|G>>>22))+Ae)|0}F[0]=F[0]+G|0,F[1]=F[1]+ae|0,F[2]=F[2]+ie|0,F[3]=F[3]+U|0,F[4]=F[4]+j|0,F[5]=F[5]+de|0,F[6]=F[6]+te|0,F[7]=F[7]+le|0},_doFinalize:function(){var O=this._data,A=O.words,F=8*this._nDataBytes,G=8*O.sigBytes;return A[G>>>5]|=128<<24-G%32,A[14+(G+64>>>9<<4)]=H.floor(F/4294967296),A[15+(G+64>>>9<<4)]=F,O.sigBytes=4*A.length,this._process(),this._hash},clone:function(){var O=Z.clone.call(this);return O._hash=this._hash.clone(),O}});J.SHA256=Z._createHelper(E),J.HmacSHA256=Z._createHmacHelper(E)}(Math),X.SHA256)},1971:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(401),function(H){var J=X,re=J.lib,he=re.WordArray,Z=re.Hasher,I=J.x64.Word,M=J.algo,N=[],E=[],O=[];!function(){for(var G=1,ae=0,ie=0;ie<24;ie++){N[G+5*ae]=(ie+1)*(ie+2)/2%64;var j=(2*G+3*ae)%5;G=ae%5,ae=j}for(G=0;G<5;G++)for(ae=0;ae<5;ae++)E[G+5*ae]=ae+(2*G+3*ae)%5*5;for(var de=1,te=0;te<24;te++){for(var le=0,ue=0,Re=0;Re<7;Re++){if(1&de){var we=(1<<Re)-1;we<32?ue^=1<<we:le^=1<<we-32}128&de?de=de<<1^113:de<<=1}O[te]=I.create(le,ue)}}();var A=[];!function(){for(var G=0;G<25;G++)A[G]=I.create()}();var F=M.SHA3=Z.extend({cfg:Z.cfg.extend({outputLength:512}),_doReset:function(){for(var G=this._state=[],ae=0;ae<25;ae++)G[ae]=new I.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(G,ae){for(var ie=this._state,U=this.blockSize/2,j=0;j<U;j++){var de=G[ae+2*j],te=G[ae+2*j+1];de=16711935&(de<<8|de>>>24)|4278255360&(de<<24|de>>>8),(le=ie[j]).high^=te=16711935&(te<<8|te>>>24)|4278255360&(te<<24|te>>>8),le.low^=de}for(var ue=0;ue<24;ue++){for(var Re=0;Re<5;Re++){for(var we=0,Ve=0,He=0;He<5;He++)we^=(le=ie[Re+5*He]).high,Ve^=le.low;var ge=A[Re];ge.high=we,ge.low=Ve}for(Re=0;Re<5;Re++){var Ae=A[(Re+4)%5],Fe=A[(Re+1)%5],Pe=Fe.high,ut=Fe.low;for(we=Ae.high^(Pe<<1|ut>>>31),Ve=Ae.low^(ut<<1|Pe>>>31),He=0;He<5;He++)(le=ie[Re+5*He]).high^=we,le.low^=Ve}for(var Be=1;Be<25;Be++){var Ut=(le=ie[Be]).high,Zt=le.low,Se=N[Be];Se<32?(we=Ut<<Se|Zt>>>32-Se,Ve=Zt<<Se|Ut>>>32-Se):(we=Zt<<Se-32|Ut>>>64-Se,Ve=Ut<<Se-32|Zt>>>64-Se);var Ie=A[E[Be]];Ie.high=we,Ie.low=Ve}var be=A[0],ke=ie[0];for(be.high=ke.high,be.low=ke.low,Re=0;Re<5;Re++)for(He=0;He<5;He++){var An=A[Be=Re+5*He],Ct=A[(Re+1)%5+5*He],$t=A[(Re+2)%5+5*He];(le=ie[Be]).high=An.high^~Ct.high&$t.high,le.low=An.low^~Ct.low&$t.low}var le,Wt=O[ue];(le=ie[0]).high^=Wt.high,le.low^=Wt.low}},_doFinalize:function(){var G=this._data,ae=G.words,U=8*G.sigBytes,j=32*this.blockSize;ae[U>>>5]|=1<<24-U%32,ae[(H.ceil((U+1)/j)*j>>>5)-1]|=128,G.sigBytes=4*ae.length,this._process();for(var de=this._state,te=this.cfg.outputLength/8,le=te/8,ue=[],Re=0;Re<le;Re++){var we=de[Re],Ve=we.high,He=we.low;Ve=16711935&(Ve<<8|Ve>>>24)|4278255360&(Ve<<24|Ve>>>8),ue.push(He=16711935&(He<<8|He>>>24)|4278255360&(He<<24|He>>>8)),ue.push(Ve)}return new he.init(ue,te)},clone:function(){for(var G=Z.clone.call(this),ae=G._state=this._state.slice(0),ie=0;ie<25;ie++)ae[ie]=ae[ie].clone();return G}});J.SHA3=Z._createHelper(F),J.HmacSHA3=Z._createHmacHelper(F)}(Math),X.SHA3)},6787:function(Ce,xe,q){var H,J,re,he,Z,ne,I,X;Ce.exports=(X=q(7585),q(401),q(3351),re=(J=(H=X).x64).Word,he=J.WordArray,I=(Z=H.algo).SHA384=(ne=Z.SHA512).extend({_doReset:function(){this._hash=new he.init([new re.init(3418070365,3238371032),new re.init(1654270250,914150663),new re.init(2438529370,812702999),new re.init(355462360,4144912697),new re.init(1731405415,4290775857),new re.init(2394180231,1750603025),new re.init(3675008525,1694076839),new re.init(1203062813,3204075428)])},_doFinalize:function(){var M=ne._doFinalize.call(this);return M.sigBytes-=16,M}}),H.SHA384=ne._createHelper(I),H.HmacSHA384=ne._createHmacHelper(I),X.SHA384)},3351:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(401),function(){var H=X,re=H.lib.Hasher,he=H.x64,Z=he.Word,ne=he.WordArray,I=H.algo;function M(){return Z.create.apply(Z,arguments)}var N=[M(1116352408,3609767458),M(1899447441,602891725),M(3049323471,3964484399),M(3921009573,2173295548),M(961987163,4081628472),M(1508970993,3053834265),M(2453635748,2937671579),M(2870763221,3664609560),M(3624381080,2734883394),M(310598401,1164996542),M(607225278,1323610764),M(1426881987,3590304994),M(1925078388,4068182383),M(2162078206,991336113),M(2614888103,633803317),M(3248222580,3479774868),M(3835390401,2666613458),M(4022224774,944711139),M(264347078,2341262773),M(604807628,2007800933),M(770255983,1495990901),M(1249150122,1856431235),M(1555081692,3175218132),M(1996064986,2198950837),M(2554220882,3999719339),M(2821834349,766784016),M(2952996808,2566594879),M(3210313671,3203337956),M(3336571891,1034457026),M(3584528711,2466948901),M(113926993,3758326383),M(338241895,168717936),M(666307205,1188179964),M(773529912,1546045734),M(1294757372,1522805485),M(1396182291,2643833823),M(1695183700,2343527390),M(1986661051,1014477480),M(2177026350,1206759142),M(2456956037,344077627),M(2730485921,1290863460),M(2820302411,3158454273),M(3259730800,3505952657),M(3345764771,106217008),M(3516065817,3606008344),M(3600352804,1432725776),M(4094571909,1467031594),M(275423344,851169720),M(430227734,3100823752),M(506948616,1363258195),M(659060556,3750685593),M(883997877,3785050280),M(958139571,3318307427),M(1322822218,3812723403),M(1537002063,2003034995),M(1747873779,3602036899),M(1955562222,1575990012),M(2024104815,1125592928),M(2227730452,2716904306),M(2361852424,442776044),M(2428436474,593698344),M(2756734187,3733110249),M(3204031479,2999351573),M(3329325298,3815920427),M(3391569614,3928383900),M(3515267271,566280711),M(3940187606,3454069534),M(4118630271,4000239992),M(116418474,1914138554),M(174292421,2731055270),M(289380356,3203993006),M(460393269,320620315),M(685471733,587496836),M(852142971,1086792851),M(1017036298,365543100),M(1126000580,2618297676),M(1288033470,3409855158),M(1501505948,4234509866),M(1607167915,987167468),M(1816402316,1246189591)],E=[];!function(){for(var A=0;A<80;A++)E[A]=M()}();var O=I.SHA512=re.extend({_doReset:function(){this._hash=new ne.init([new Z.init(1779033703,4089235720),new Z.init(3144134277,2227873595),new Z.init(1013904242,4271175723),new Z.init(2773480762,1595750129),new Z.init(1359893119,2917565137),new Z.init(2600822924,725511199),new Z.init(528734635,4215389547),new Z.init(1541459225,327033209)])},_doProcessBlock:function(A,F){for(var G=this._hash.words,ae=G[0],ie=G[1],U=G[2],j=G[3],de=G[4],te=G[5],le=G[6],ue=G[7],Re=ae.high,we=ae.low,Ve=ie.high,He=ie.low,ge=U.high,Ae=U.low,Fe=j.high,Pe=j.low,ut=de.high,Be=de.low,Ut=te.high,Zt=te.low,Se=le.high,Ie=le.low,be=ue.high,ke=ue.low,An=Re,Ct=we,$t=Ve,Wt=He,Nt=ge,Ma=Ae,Wu=Fe,Co=Pe,jr=ut,ze=Be,Zl=Ut,Ke=Zt,Ds=Se,Rs=Ie,xs=be,Ms=ke,mr=0;mr<80;mr++){var vr,eo,Jl=E[mr];if(mr<16)eo=Jl.high=0|A[F+2*mr],vr=Jl.low=0|A[F+2*mr+1];else{var Ff=E[mr-15],br=Ff.high,Xo=Ff.low,qu=(Xo>>>1|br<<31)^(Xo>>>8|br<<24)^(Xo>>>7|br<<25),Bf=E[mr-2],So=Bf.high,ks=Bf.low,Lf=(ks>>>19|So<<13)^(ks<<3|So>>>29)^(ks>>>6|So<<26),Uf=E[mr-7],tc=E[mr-16],nc=tc.low;Jl.high=eo=(eo=(eo=((br>>>1|Xo<<31)^(br>>>8|Xo<<24)^br>>>7)+Uf.high+((vr=qu+Uf.low)>>>0<qu>>>0?1:0))+((So>>>19|ks<<13)^(So<<3|ks>>>29)^So>>>6)+((vr+=Lf)>>>0<Lf>>>0?1:0))+tc.high+((vr+=nc)>>>0<nc>>>0?1:0),Jl.low=vr}var ir,Hf=jr&Zl^~jr&Ds,ic=ze&Ke^~ze&Rs,Qu=An&$t^An&Nt^$t&Nt,Mi=(Ct>>>28|An<<4)^(Ct<<30|An>>>2)^(Ct<<25|An>>>7),Ju=N[mr],rc=Ju.low,ka=xs+((jr>>>14|ze<<18)^(jr>>>18|ze<<14)^(jr<<23|ze>>>9))+((ir=Ms+((ze>>>14|jr<<18)^(ze>>>18|jr<<14)^(ze<<23|jr>>>9)))>>>0<Ms>>>0?1:0),$r=Mi+(Ct&Wt^Ct&Ma^Wt&Ma);xs=Ds,Ms=Rs,Ds=Zl,Rs=Ke,Zl=jr,Ke=ze,jr=Wu+(ka=(ka=(ka=ka+Hf+((ir+=ic)>>>0<ic>>>0?1:0))+Ju.high+((ir+=rc)>>>0<rc>>>0?1:0))+eo+((ir+=vr)>>>0<vr>>>0?1:0))+((ze=Co+ir|0)>>>0<Co>>>0?1:0)|0,Wu=Nt,Co=Ma,Nt=$t,Ma=Wt,$t=An,Wt=Ct,An=ka+(((An>>>28|Ct<<4)^(An<<30|Ct>>>2)^(An<<25|Ct>>>7))+Qu+($r>>>0<Mi>>>0?1:0))+((Ct=ir+$r|0)>>>0<ir>>>0?1:0)|0}we=ae.low=we+Ct,ae.high=Re+An+(we>>>0<Ct>>>0?1:0),He=ie.low=He+Wt,ie.high=Ve+$t+(He>>>0<Wt>>>0?1:0),Ae=U.low=Ae+Ma,U.high=ge+Nt+(Ae>>>0<Ma>>>0?1:0),Pe=j.low=Pe+Co,j.high=Fe+Wu+(Pe>>>0<Co>>>0?1:0),Be=de.low=Be+ze,de.high=ut+jr+(Be>>>0<ze>>>0?1:0),Zt=te.low=Zt+Ke,te.high=Ut+Zl+(Zt>>>0<Ke>>>0?1:0),Ie=le.low=Ie+Rs,le.high=Se+Ds+(Ie>>>0<Rs>>>0?1:0),ke=ue.low=ke+Ms,ue.high=be+xs+(ke>>>0<Ms>>>0?1:0)},_doFinalize:function(){var A=this._data,F=A.words,G=8*this._nDataBytes,ae=8*A.sigBytes;return F[ae>>>5]|=128<<24-ae%32,F[30+(ae+128>>>10<<5)]=Math.floor(G/4294967296),F[31+(ae+128>>>10<<5)]=G,A.sigBytes=4*F.length,this._process(),this._hash.toX32()},clone:function(){var A=re.clone.call(this);return A._hash=this._hash.clone(),A},blockSize:32});H.SHA512=re._createHelper(O),H.HmacSHA512=re._createHmacHelper(O)}(),X.SHA512)},7243:function(Ce,xe,q){var X;Ce.exports=(X=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var H=X,J=H.lib,re=J.WordArray,he=J.BlockCipher,Z=H.algo,ne=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],I=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],M=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],N=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],E=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],O=Z.DES=he.extend({_doReset:function(){for(var ie=this._key.words,U=[],j=0;j<56;j++){var de=ne[j]-1;U[j]=ie[de>>>5]>>>31-de%32&1}for(var te=this._subKeys=[],le=0;le<16;le++){var ue=te[le]=[],Re=M[le];for(j=0;j<24;j++)ue[j/6|0]|=U[(I[j]-1+Re)%28]<<31-j%6,ue[4+(j/6|0)]|=U[28+(I[j+24]-1+Re)%28]<<31-j%6;for(ue[0]=ue[0]<<1|ue[0]>>>31,j=1;j<7;j++)ue[j]=ue[j]>>>4*(j-1)+3;ue[7]=ue[7]<<5|ue[7]>>>27}var we=this._invSubKeys=[];for(j=0;j<16;j++)we[j]=te[15-j]},encryptBlock:function(ae,ie){this._doCryptBlock(ae,ie,this._subKeys)},decryptBlock:function(ae,ie){this._doCryptBlock(ae,ie,this._invSubKeys)},_doCryptBlock:function(ae,ie,U){this._lBlock=ae[ie],this._rBlock=ae[ie+1],A.call(this,4,252645135),A.call(this,16,65535),F.call(this,2,858993459),F.call(this,8,16711935),A.call(this,1,1431655765);for(var j=0;j<16;j++){for(var de=U[j],te=this._lBlock,le=this._rBlock,ue=0,Re=0;Re<8;Re++)ue|=N[Re][((le^de[Re])&E[Re])>>>0];this._lBlock=le,this._rBlock=te^ue}var we=this._lBlock;this._lBlock=this._rBlock,this._rBlock=we,A.call(this,1,1431655765),F.call(this,8,16711935),F.call(this,2,858993459),A.call(this,16,65535),A.call(this,4,252645135),ae[ie]=this._lBlock,ae[ie+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function A(ae,ie){var U=(this._lBlock>>>ae^this._rBlock)&ie;this._rBlock^=U,this._lBlock^=U<<ae}function F(ae,ie){var U=(this._rBlock>>>ae^this._lBlock)&ie;this._lBlock^=U,this._rBlock^=U<<ae}H.DES=he._createHelper(O);var G=Z.TripleDES=he.extend({_doReset:function(){var ie=this._key.words;if(2!==ie.length&&4!==ie.length&&ie.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var U=ie.slice(0,2),j=ie.length<4?ie.slice(0,2):ie.slice(2,4),de=ie.length<6?ie.slice(0,2):ie.slice(4,6);this._des1=O.createEncryptor(re.create(U)),this._des2=O.createEncryptor(re.create(j)),this._des3=O.createEncryptor(re.create(de))},encryptBlock:function(ae,ie){this._des1.encryptBlock(ae,ie),this._des2.decryptBlock(ae,ie),this._des3.encryptBlock(ae,ie)},decryptBlock:function(ae,ie){this._des3.decryptBlock(ae,ie),this._des2.encryptBlock(ae,ie),this._des1.decryptBlock(ae,ie)},keySize:6,ivSize:2,blockSize:2});H.TripleDES=he._createHelper(G)}(),X.TripleDES)},401:function(Ce,xe,q){var re,he,Z,ne,X;Ce.exports=(X=q(7585),he=(re=X.lib).Base,Z=re.WordArray,(ne=X.x64={}).Word=he.extend({init:function(N,E){this.high=N,this.low=E}}),ne.WordArray=he.extend({init:function(N,E){N=this.words=N||[],this.sigBytes=null!=E?E:8*N.length},toX32:function(){for(var N=this.words,E=N.length,O=[],A=0;A<E;A++){var F=N[A];O.push(F.high),O.push(F.low)}return Z.create(O,this.sigBytes)},clone:function(){for(var N=he.clone.call(this),E=N.words=this.words.slice(0),O=E.length,A=0;A<O;A++)E[A]=E[A].clone();return N}}),X)},340:(Ce,xe,q)=>{var X=q(9471),H=q(2992),J=q(7657),re=q(5583),he=q(1929),Z=q(8083),ne=q(3818);ne.alea=X,ne.xor128=H,ne.xorwow=J,ne.xorshift7=re,ne.xor4096=he,ne.tychei=Z,Ce.exports=ne},9471:function(Ce,xe,q){var X;!function(H,J,re){function he(M){var N=this,E=function I(){var M=4022871197;return function(E){E=String(E);for(var O=0;O<E.length;O++){var A=.02519603282416938*(M+=E.charCodeAt(O));A-=M=A>>>0,M=(A*=M)>>>0,M+=4294967296*(A-=M)}return 2.3283064365386963e-10*(M>>>0)}}();N.next=function(){var O=2091639*N.s0+2.3283064365386963e-10*N.c;return N.s0=N.s1,N.s1=N.s2,N.s2=O-(N.c=0|O)},N.c=1,N.s0=E(" "),N.s1=E(" "),N.s2=E(" "),N.s0-=E(M),N.s0<0&&(N.s0+=1),N.s1-=E(M),N.s1<0&&(N.s1+=1),N.s2-=E(M),N.s2<0&&(N.s2+=1),E=null}function Z(M,N){return N.c=M.c,N.s0=M.s0,N.s1=M.s1,N.s2=M.s2,N}function ne(M,N){var E=new he(M),O=N&&N.state,A=E.next;return A.int32=function(){return 4294967296*E.next()|0},A.double=function(){return A()+11102230246251565e-32*(2097152*A()|0)},A.quick=A,O&&("object"==typeof O&&Z(O,E),A.state=function(){return Z(E,{})}),A}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(X=function(){return ne}.call(xe,q,xe,J))&&(J.exports=X):this.alea=ne}(0,Ce=q.nmd(Ce))},8083:function(Ce,xe,q){var X;!function(H,J,re){function he(I){var M=this,N="";M.next=function(){var O=M.b,A=M.c,F=M.d,G=M.a;return O=O<<25^O>>>7^A,A=A-F|0,F=F<<24^F>>>8^G,G=G-O|0,M.b=O=O<<20^O>>>12^A,M.c=A=A-F|0,M.d=F<<16^A>>>16^G,M.a=G-O|0},M.a=0,M.b=0,M.c=-1640531527,M.d=1367130551,I===Math.floor(I)?(M.a=I/4294967296|0,M.b=0|I):N+=I;for(var E=0;E<N.length+20;E++)M.b^=0|N.charCodeAt(E),M.next()}function Z(I,M){return M.a=I.a,M.b=I.b,M.c=I.c,M.d=I.d,M}function ne(I,M){var N=new he(I),E=M&&M.state,O=function(){return(N.next()>>>0)/4294967296};return O.double=function(){do{var G=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===G);return G},O.int32=N.next,O.quick=O,E&&("object"==typeof E&&Z(E,N),O.state=function(){return Z(N,{})}),O}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(X=function(){return ne}.call(xe,q,xe,J))&&(J.exports=X):this.tychei=ne}(0,Ce=q.nmd(Ce))},2992:function(Ce,xe,q){var X;!function(H,J,re){function he(I){var M=this,N="";M.x=0,M.y=0,M.z=0,M.w=0,M.next=function(){var O=M.x^M.x<<11;return M.x=M.y,M.y=M.z,M.z=M.w,M.w^=M.w>>>19^O^O>>>8},I===(0|I)?M.x=I:N+=I;for(var E=0;E<N.length+64;E++)M.x^=0|N.charCodeAt(E),M.next()}function Z(I,M){return M.x=I.x,M.y=I.y,M.z=I.z,M.w=I.w,M}function ne(I,M){var N=new he(I),E=M&&M.state,O=function(){return(N.next()>>>0)/4294967296};return O.double=function(){do{var G=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===G);return G},O.int32=N.next,O.quick=O,E&&("object"==typeof E&&Z(E,N),O.state=function(){return Z(N,{})}),O}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(X=function(){return ne}.call(xe,q,xe,J))&&(J.exports=X):this.xor128=ne}(0,Ce=q.nmd(Ce))},1929:function(Ce,xe,q){var X;!function(H,J,re){function he(I){var M=this;M.next=function(){var F,G,E=M.w,O=M.X,A=M.i;return M.w=E=E+1640531527|0,G=O[A+34&127],F=O[A=A+1&127],G^=G<<13,F^=F<<17,G=O[A]=(G^=G>>>15)^(F^=F>>>12),M.i=A,G+(E^E>>>16)|0},function N(E,O){var A,F,G,ae,ie,U=[],j=128;for(O===(0|O)?(F=O,O=null):(O+="\0",F=0,j=Math.max(j,O.length)),G=0,ae=-32;ae<j;++ae)O&&(F^=O.charCodeAt((ae+32)%O.length)),0===ae&&(ie=F),F^=F<<10,F^=F>>>15,F^=F<<4,F^=F>>>13,ae>=0&&(G=0==(A=U[127&ae]^=F+(ie=ie+1640531527|0))?G+1:0);for(G>=128&&(U[127&(O&&O.length||0)]=-1),G=127,ae=512;ae>0;--ae)F=U[G+34&127],A=U[G=G+1&127],F^=F<<13,A^=A<<17,U[G]=(F^=F>>>15)^(A^=A>>>12);E.w=ie,E.X=U,E.i=G}(M,I)}function Z(I,M){return M.i=I.i,M.w=I.w,M.X=I.X.slice(),M}function ne(I,M){null==I&&(I=+new Date);var N=new he(I),E=M&&M.state,O=function(){return(N.next()>>>0)/4294967296};return O.double=function(){do{var G=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===G);return G},O.int32=N.next,O.quick=O,E&&(E.X&&Z(E,N),O.state=function(){return Z(N,{})}),O}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(X=function(){return ne}.call(xe,q,xe,J))&&(J.exports=X):this.xor4096=ne}(0,Ce=q.nmd(Ce))},5583:function(Ce,xe,q){var X;!function(H,J,re){function he(I){var M=this;M.next=function(){var A,F,E=M.x,O=M.i;return A=E[O],F=(A^=A>>>7)^A<<24,F^=(A=E[O+1&7])^A>>>10,F^=(A=E[O+3&7])^A>>>3,F^=(A=E[O+4&7])^A<<7,A=E[O+7&7],E[O]=F^=(A^=A<<13)^A<<9,M.i=O+1&7,F},function N(E,O){var A,G=[];if(O===(0|O))G[0]=O;else for(O=""+O,A=0;A<O.length;++A)G[7&A]=G[7&A]<<15^O.charCodeAt(A)+G[A+1&7]<<13;for(;G.length<8;)G.push(0);for(A=0;A<8&&0===G[A];++A);for(8==A&&(G[7]=-1),E.x=G,E.i=0,A=256;A>0;--A)E.next()}(M,I)}function Z(I,M){return M.x=I.x.slice(),M.i=I.i,M}function ne(I,M){null==I&&(I=+new Date);var N=new he(I),E=M&&M.state,O=function(){return(N.next()>>>0)/4294967296};return O.double=function(){do{var G=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===G);return G},O.int32=N.next,O.quick=O,E&&(E.x&&Z(E,N),O.state=function(){return Z(N,{})}),O}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(X=function(){return ne}.call(xe,q,xe,J))&&(J.exports=X):this.xorshift7=ne}(0,Ce=q.nmd(Ce))},7657:function(Ce,xe,q){var X;!function(H,J,re){function he(I){var M=this,N="";M.next=function(){var O=M.x^M.x>>>2;return M.x=M.y,M.y=M.z,M.z=M.w,M.w=M.v,(M.d=M.d+362437|0)+(M.v=M.v^M.v<<4^O^O<<1)|0},M.x=0,M.y=0,M.z=0,M.w=0,M.v=0,I===(0|I)?M.x=I:N+=I;for(var E=0;E<N.length+64;E++)M.x^=0|N.charCodeAt(E),E==N.length&&(M.d=M.x<<10^M.x>>>4),M.next()}function Z(I,M){return M.x=I.x,M.y=I.y,M.z=I.z,M.w=I.w,M.v=I.v,M.d=I.d,M}function ne(I,M){var N=new he(I),E=M&&M.state,O=function(){return(N.next()>>>0)/4294967296};return O.double=function(){do{var G=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===G);return G},O.int32=N.next,O.quick=O,E&&("object"==typeof E&&Z(E,N),O.state=function(){return Z(N,{})}),O}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(X=function(){return ne}.call(xe,q,xe,J))&&(J.exports=X):this.xorwow=ne}(0,Ce=q.nmd(Ce))},3818:function(Ce,xe,q){var X;!function(H,J,re){var A,he=256,M=re.pow(he,6),N=re.pow(2,52),E=2*N,O=255;function F(te,le,ue){var Re=[],we=U(ie((le=1==le?{entropy:!0}:le||{}).entropy?[te,de(J)]:null==te?function j(){try{var te;return A&&(te=A.randomBytes)?te=te(he):(te=new Uint8Array(he),(H.crypto||H.msCrypto).getRandomValues(te)),de(te)}catch(Re){var le=H.navigator,ue=le&&le.plugins;return[+new Date,H,ue,H.screen,de(J)]}}():te,3),Re),Ve=new G(Re),He=function(){for(var ge=Ve.g(6),Ae=M,Fe=0;ge<N;)ge=(ge+Fe)*he,Ae*=he,Fe=Ve.g(1);for(;ge>=E;)ge/=2,Ae/=2,Fe>>>=1;return(ge+Fe)/Ae};return He.int32=function(){return 0|Ve.g(4)},He.quick=function(){return Ve.g(4)/4294967296},He.double=He,U(de(Ve.S),J),(le.pass||ue||function(ge,Ae,Fe,Pe){return Pe&&(Pe.S&&ae(Pe,Ve),ge.state=function(){return ae(Ve,{})}),Fe?(re.random=ge,Ae):ge})(He,we,"global"in le?le.global:this==re,le.state)}function G(te){var le,ue=te.length,Re=this,we=0,Ve=Re.i=Re.j=0,He=Re.S=[];for(ue||(te=[ue++]);we<he;)He[we]=we++;for(we=0;we<he;we++)He[we]=He[Ve=O&Ve+te[we%ue]+(le=He[we])],He[Ve]=le;(Re.g=function(ge){for(var Ae,Fe=0,Pe=Re.i,ut=Re.j,Be=Re.S;ge--;)Ae=Be[Pe=O&Pe+1],Fe=Fe*he+Be[O&(Be[Pe]=Be[ut=O&ut+Ae])+(Be[ut]=Ae)];return Re.i=Pe,Re.j=ut,Fe})(he)}function ae(te,le){return le.i=te.i,le.j=te.j,le.S=te.S.slice(),le}function ie(te,le){var we,ue=[],Re=typeof te;if(le&&"object"==Re)for(we in te)try{ue.push(ie(te[we],le-1))}catch(Ve){}return ue.length?ue:"string"==Re?te:te+"\0"}function U(te,le){for(var Re,ue=te+"",we=0;we<ue.length;)le[O&we]=O&(Re^=19*le[O&we])+ue.charCodeAt(we++);return de(le)}function de(te){return String.fromCharCode.apply(0,te)}if(U(re.random(),J),Ce.exports){Ce.exports=F;try{A=q(5042)}catch(te){}}else void 0!==(X=function(){return F}.call(xe,q,xe,Ce))&&(Ce.exports=X)}("undefined"!=typeof self?self:this,[],Math)},2480:()=>{},5042:()=>{}},Ce=>{Ce(Ce.s=2179)}]);