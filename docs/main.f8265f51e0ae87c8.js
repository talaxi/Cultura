var $W=Object.defineProperty,KD=Object.getOwnPropertySymbols,qW=Object.prototype.hasOwnProperty,WW=Object.prototype.propertyIsEnumerable,ZD=(De,Ae,Q)=>Ae in De?$W(De,Ae,{enumerable:!0,configurable:!0,writable:!0,value:Q}):De[Ae]=Q,pa=(De,Ae)=>{for(var Q in Ae||(Ae={}))qW.call(Ae,Q)&&ZD(De,Q,Ae[Q]);if(KD)for(var Q of KD(Ae))WW.call(Ae,Q)&&ZD(De,Q,Ae[Q]);return De};(self.webpackChunkCultura=self.webpackChunkCultura||[]).push([[179],{9711:(De,Ae,Q)=>{"use strict";function K(t){return"function"==typeof t}function $(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const ae=$(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function he(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class _e{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(K(i))try{i()}catch(a){n=a instanceof ae?a.errors:[a]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const a of r)try{E(a)}catch(o){n=null!=n?n:[],o instanceof ae?n=[...n,...o.errors]:n.push(o)}}if(n)throw new ae(n)}}add(n){var e;if(n&&n!==this)if(this.closed)E(n);else{if(n instanceof _e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&he(e,n)}remove(n){const{_teardowns:e}=this;e&&he(e,n),n instanceof _e&&n._removeParent(this)}}_e.EMPTY=(()=>{const t=new _e;return t.closed=!0,t})();const re=_e.EMPTY;function le(t){return t instanceof _e||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function E(t){K(t)?t():t.unsubscribe()}const P={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},U={setTimeout(...t){const{delegate:n}=U;return((null==n?void 0:n.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:n}=U;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function O(t){U.setTimeout(()=>{const{onUnhandledError:n}=P;if(!n)throw t;n(t)})}function N(){}const I=fe("C",void 0,void 0);function fe(t,n,e){return{kind:t,value:n,error:e}}let ce=null;function z(t){if(P.useDeprecatedSynchronousErrorHandling){const n=!ce;if(n&&(ce={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=ce;if(ce=null,e)throw i}}else t()}class be extends _e{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,le(n)&&n.add(this)):this.destination=we}static create(n,e,i){return new Me(n,e,i)}next(n){this.isStopped?Ye(function W(t){return fe("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Ye(function H(t){return fe("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Ye(I,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const oe=Function.prototype.bind;function pe(t,n){return oe.call(t,n)}class me{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){Re(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){Re(i)}else Re(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Re(e)}}}class Me extends be{constructor(n,e,i){let r;if(super(),K(n)||!n)r={next:null!=n?n:void 0,error:null!=e?e:void 0,complete:null!=i?i:void 0};else{let a;this&&P.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&pe(n.next,a),error:n.error&&pe(n.error,a),complete:n.complete&&pe(n.complete,a)}):r=n}this.destination=new me(r)}}function Re(t){P.useDeprecatedSynchronousErrorHandling?function Y(t){P.useDeprecatedSynchronousErrorHandling&&ce&&(ce.errorThrown=!0,ce.error=t)}(t):O(t)}function Ye(t,n){const{onStoppedNotification:e}=P;e&&U.setTimeout(()=>e(t,n))}const we={closed:!0,next:N,error:function Le(t){throw t},complete:N},Ee="function"==typeof Symbol&&Symbol.observable||"@@observable";function je(t){return t}let $e=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const a=function xe(t){return t&&t instanceof be||function pi(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}(t)&&le(t)}(e)?e:new Me(e,i,r);return z(()=>{const{operator:o,source:s}=this;a.add(o?o.call(a,s):s?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=Zt(i))((r,a)=>{const o=new Me({next:s=>{try{e(s)}catch(l){a(l),o.unsubscribe()}},error:a,complete:r});this.subscribe(o)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Ee](){return this}pipe(...e){return function Ct(t){return 0===t.length?je:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}(e)(this)}toPromise(e){return new(e=Zt(e))((i,r)=>{let a;this.subscribe(o=>a=o,o=>r(o),()=>i(a))})}}return t.create=n=>new t(n),t})();function Zt(t){var n;return null!==(n=null!=t?t:P.Promise)&&void 0!==n?n:Promise}const Fe=$(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Te=(()=>{class t extends $e{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new Ie(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new Fe}next(e){z(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const r of i)r.next(e)}})}error(e){z(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){z(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:a}=this;return i||r?re:(a.push(e),new _e(()=>he(a,e)))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:a}=this;i?e.error(r):a&&e.complete()}asObservable(){const e=new $e;return e.source=this,e}}return t.create=(n,e)=>new Ie(n,e),t})();class Ie extends Te{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:re}}function rn(t){return K(null==t?void 0:t.lift)}function Nt(t){return n=>{if(rn(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ni(t,n,e,i,r){return new ri(t,n,e,i,r)}class ri extends be{constructor(n,e,i,r,a,o){super(n),this.onFinalize=a,this.shouldUnsubscribe=o,this._next=e?function(s){try{e(s)}catch(l){n.error(l)}}:super._next,this._error=r?function(s){try{r(s)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(s){n.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Xt(t,n){return Nt((e,i)=>{let r=0;e.subscribe(ni(i,a=>{i.next(t.call(n,a,r++))}))})}function We(t,n,e,i){var o,r=arguments.length,a=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(n,e,a):o(n,e))||a);return r>3&&a&&Object.defineProperty(n,e,a),a}function it(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)}function $r(t){return this instanceof $r?(this.v=t,this):new $r(t)}function Ss(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(t,n||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(v){i[v]&&(r[v]=function(b){return new Promise(function(y,C){a.push([v,b,y,C])>1||s(v,b)})})}function s(v,b){try{!function l(v){v.value instanceof $r?Promise.resolve(v.value.v).then(c,u):f(a[0][2],v)}(i[v](b))}catch(y){f(a[0][3],y)}}function c(v){s("next",v)}function u(v){s("throw",v)}function f(v,b){v(b),a.shift(),a.length&&s(a[0][0],a[0][1])}}function Cd(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function zr(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=t[a]&&function(o){return new Promise(function(s,l){!function r(a,o,s,l){Promise.resolve(l).then(function(c){a({value:c,done:s})},o)}(s,l,(o=t[a](o)).done,o.value)})}}}const xc=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Sd(t){return K(null==t?void 0:t.then)}function kc(t){return K(t[Ee])}function Td(t){return Symbol.asyncIterator&&K(null==t?void 0:t[Symbol.asyncIterator])}function Mc(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ac=function vp(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Rd(t){return K(null==t?void 0:t[Ac])}function Dd(t){return Ss(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield $r(e.read());if(r)return yield $r(void 0);yield yield $r(i)}}finally{e.releaseLock()}})}function xd(t){return K(null==t?void 0:t.getReader)}function Yn(t){if(t instanceof $e)return t;if(null!=t){if(kc(t))return function mp(t){return new $e(n=>{const e=t[Ee]();if(K(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(xc(t))return function bp(t){return new $e(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(Sd(t))return function kd(t){return new $e(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,O)})}(t);if(Td(t))return Pc(t);if(Rd(t))return function _p(t){return new $e(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(xd(t))return function Mr(t){return Pc(Dd(t))}(t)}throw Mc(t)}function Pc(t){return new $e(n=>{(function ao(t,n){var e,i,r,a;return function ol(t,n,e,i){return new(e||(e=Promise))(function(a,o){function s(u){try{c(i.next(u))}catch(f){o(f)}}function l(u){try{c(i.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):function r(a){return a instanceof e?a:new e(function(o){o(a)})}(u.value).then(s,l)}c((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Cd(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function va(t,n,e,i=0,r=!1){const a=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!r)return a}function Bn(t,n,e=1/0){return K(n)?Bn((i,r)=>Xt((a,o)=>n(i,a,r,o))(Yn(t(i,r))),e):("number"==typeof n&&(e=n),Nt((i,r)=>function yp(t,n,e,i,r,a,o,s){const l=[];let c=0,u=0,f=!1;const v=()=>{f&&!l.length&&!c&&n.complete()},b=C=>c<i?y(C):l.push(C),y=C=>{a&&n.next(C),c++;let T=!1;Yn(e(C,u++)).subscribe(ni(n,M=>{null==r||r(M),a?b(M):n.next(M)},()=>{T=!0},void 0,()=>{if(T)try{for(c--;l.length&&c<i;){const M=l.shift();o?va(n,o,()=>y(M)):y(M)}v()}catch(M){n.error(M)}}))};return t.subscribe(ni(n,b,()=>{f=!0,v()})),()=>{null==s||s()}}(i,r,t,e)))}function Vc(t=1/0){return Bn(je,t)}const Ba=new $e(t=>t.complete());function Cb(t){return t&&K(t.schedule)}function wp(t){return t[t.length-1]}function Md(t){return K(wp(t))?t.pop():void 0}function Ic(t){return Cb(wp(t))?t.pop():void 0}function Sb(t,n=0){return Nt((e,i)=>{e.subscribe(ni(i,r=>va(i,t,()=>i.next(r),n),()=>va(i,t,()=>i.complete(),n),r=>va(i,t,()=>i.error(r),n)))})}function Tb(t,n=0){return Nt((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function Rb(t,n){if(!t)throw new Error("Iterable cannot be null");return new $e(e=>{va(e,n,()=>{const i=t[Symbol.asyncIterator]();va(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function rr(t,n){return n?function ox(t,n){if(null!=t){if(kc(t))return function tx(t,n){return Yn(t).pipe(Tb(n),Sb(n))}(t,n);if(xc(t))return function nx(t,n){return new $e(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(Sd(t))return function ix(t,n){return Yn(t).pipe(Tb(n),Sb(n))}(t,n);if(Td(t))return Rb(t,n);if(Rd(t))return function rx(t,n){return new $e(e=>{let i;return va(e,n,()=>{i=t[Ac](),va(e,n,()=>{let r,a;try{({value:r,done:a}=i.next())}catch(o){return void e.error(o)}a?e.complete():e.next(r)},0,!0)}),()=>K(null==i?void 0:i.return)&&i.return()})}(t,n);if(xd(t))return function ax(t,n){return Rb(Dd(t),n)}(t,n)}throw Mc(t)}(t,n):Yn(t)}function Db(...t){const n=Ic(t),e=function ex(t,n){return"number"==typeof wp(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?Yn(i[0]):Vc(e)(rr(i,n)):Ba}function ar(t){return t<=0?()=>Ba:Nt((n,e)=>{let i=0;n.subscribe(ni(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function xb(t={}){const{connector:n=(()=>new Te),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return a=>{let o=null,s=null,l=null,c=0,u=!1,f=!1;const v=()=>{null==s||s.unsubscribe(),s=null},b=()=>{v(),o=l=null,u=f=!1},y=()=>{const C=o;b(),null==C||C.unsubscribe()};return Nt((C,T)=>{c++,!f&&!u&&v();const M=l=null!=l?l:n();T.add(()=>{c--,0===c&&!f&&!u&&(s=Cp(y,r))}),M.subscribe(T),o||(o=new Me({next:S=>M.next(S),error:S=>{f=!0,v(),s=Cp(b,e,S),M.error(S)},complete:()=>{u=!0,v(),s=Cp(b,i),M.complete()}}),rr(C).subscribe(o))})(a)}}function Cp(t,n,...e){return!0===n?(t(),null):!1===n?null:n(...e).pipe(ar(1)).subscribe(()=>t())}function an(t){for(let n in t)if(t[n]===an)return n;throw Error("Could not find renamed property on target object.")}function Sp(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Wi(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Wi).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function Tp(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const sx=an({__forward_ref__:an});function Ii(t){return t.__forward_ref__=Ii,t.toString=function(){return Wi(this())},t}function Jt(t){return kb(t)?t():t}function kb(t){return"function"==typeof t&&t.hasOwnProperty(sx)&&t.__forward_ref__===Ii}class Di extends Error{constructor(n,e){super(function Rp(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function qt(t){return"string"==typeof t?t:null==t?"":String(t)}function Ar(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():qt(t)}function Ad(t,n){const e=n?` in ${n}`:"";throw new Di(-201,`No provider for ${Ar(t)} found${e}`)}function vn(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}function gt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Hi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Dp(t){return Mb(t,Pd)||Mb(t,Pb)}function Mb(t,n){return t.hasOwnProperty(n)?t[n]:null}function Ab(t){return t&&(t.hasOwnProperty(xp)||t.hasOwnProperty(px))?t[xp]:null}const Pd=an({\u0275prov:an}),xp=an({\u0275inj:an}),Pb=an({ngInjectableDef:an}),px=an({ngInjectorDef:an});var Yt=(()=>((Yt=Yt||{})[Yt.Default=0]="Default",Yt[Yt.Host=1]="Host",Yt[Yt.Self=2]="Self",Yt[Yt.SkipSelf=4]="SkipSelf",Yt[Yt.Optional=8]="Optional",Yt))();let kp;function Jo(t){const n=kp;return kp=t,n}function Vb(t,n,e){const i=Dp(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Yt.Optional?null:void 0!==n?n:void Ad(Wi(t),"Injector")}function es(t){return{toString:t}.toString()}var Fa=(()=>((Fa=Fa||{})[Fa.OnPush=0]="OnPush",Fa[Fa.Default=1]="Default",Fa))(),oo=(()=>{return(t=oo||(oo={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",oo;var t})();const vx="undefined"!=typeof globalThis&&globalThis,mx="undefined"!=typeof window&&window,bx="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Zi=vx||"undefined"!=typeof global&&global||mx||bx,dl={},on=[],Vd=an({\u0275cmp:an}),Mp=an({\u0275dir:an}),Ap=an({\u0275pipe:an}),Ib=an({\u0275mod:an}),Ao=an({\u0275fac:an}),Oc=an({__NG_ELEMENT_ID__:an});let _x=0;function Tt(t){return es(()=>{const e={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Fa.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||on,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||oo.Emulated,id:"c",styles:t.styles||on,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,a=t.features,o=t.pipes;return i.id+=_x++,i.inputs=Bb(t.inputs,e),i.outputs=Bb(t.outputs),a&&a.forEach(s=>s(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(Ob):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Eb):null,i})}function Ob(t){return mr(t)||function ts(t){return t[Mp]||null}(t)}function Eb(t){return function Ts(t){return t[Ap]||null}(t)}const Nb={};function Xi(t){return es(()=>{const n={type:t.type,bootstrap:t.bootstrap||on,declarations:t.declarations||on,imports:t.imports||on,exports:t.exports||on,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Nb[t.id]=t.type),n})}function Bb(t,n){if(null==t)return dl;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=i,n&&(n[r]=a)}return e}const nt=Tt;function qr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function mr(t){return t[Vd]||null}function ma(t,n){const e=t[Ib]||null;if(!e&&!0===n)throw new Error(`Type ${Wi(t)} does not have '\u0275mod' property.`);return e}function so(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ua(t){return Array.isArray(t)&&!0===t[1]}function Ip(t){return 0!=(8&t.flags)}function Nd(t){return 2==(2&t.flags)}function Bd(t){return 1==(1&t.flags)}function Ha(t){return null!==t.template}function Rx(t){return 0!=(512&t[2])}function ks(t,n){return t.hasOwnProperty(Ao)?t[Ao]:null}class kx{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function jn(){return Lb}function Lb(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ax),Mx}function Mx(){const t=Hb(this),n=null==t?void 0:t.current;if(n){const e=t.previous;if(e===dl)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function Ax(t,n,e,i){const r=Hb(t)||function Px(t,n){return t[Ub]=n}(t,{previous:dl,current:null}),a=r.current||(r.current={}),o=r.previous,s=this.declaredInputs[e],l=o[s];a[s]=new kx(l&&l.currentValue,n,o===dl),t[i]=n}jn.ngInherit=!0;const Ub="__ngSimpleChanges__";function Hb(t){return t[Ub]||null}let Fp;function Lp(){return void 0!==Fp?Fp:"undefined"!=typeof document?document:void 0}function Vn(t){return!!t.listen}const Gb={createRenderer:(t,n)=>Lp()};function $n(t){for(;Array.isArray(t);)t=t[0];return t}function Fd(t,n){return $n(n[t])}function ya(t,n){return $n(n[t.index])}function Up(t,n){return t.data[n]}function vl(t,n){return t[n]}function ia(t,n){const e=n[t];return so(e)?e:e[0]}function zb(t){return 4==(4&t[2])}function Hp(t){return 128==(128&t[2])}function is(t,n){return null==n?null:t[n]}function jb(t){t[18]=0}function Gp(t,n){t[5]+=n;let e=t,i=t[3];for(;null!==i&&(1===n&&1===e[5]||-1===n&&0===e[5]);)i[5]+=n,e=i,i=i[3]}const Lt={lFrame:Zb(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $b(){return Lt.bindingsEnabled}function Pe(){return Lt.lFrame.lView}function xi(){return Lt.lFrame.tView}function k(t){return Lt.lFrame.contextLView=t,t[8]}function Qn(){let t=qb();for(;null!==t&&64===t.type;)t=t.parent;return t}function qb(){return Lt.lFrame.currentTNode}function Fc(){const t=Lt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function lo(t,n){const e=Lt.lFrame;e.currentTNode=t,e.isParent=n}function zp(){return Lt.lFrame.isParent}function jp(){Lt.lFrame.isParent=!1}function Ld(){return Lt.isInCheckNoChangesMode}function Ud(t){Lt.isInCheckNoChangesMode=t}function Pr(){const t=Lt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Po(){return Lt.lFrame.bindingIndex}function ml(){return Lt.lFrame.bindingIndex++}function Vo(t){const n=Lt.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Xb(t){Lt.lFrame.inI18n=t}function Xx(t,n){const e=Lt.lFrame;e.bindingIndex=e.bindingRootIndex=t,$p(n)}function $p(t){Lt.lFrame.currentDirectiveIndex=t}function Yb(){return Lt.lFrame.currentQueryIndex}function Wp(t){Lt.lFrame.currentQueryIndex=t}function Qx(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Qb(t,n,e){if(e&Yt.SkipSelf){let r=n,a=t;for(;!(r=r.parent,null!==r||e&Yt.Host||(r=Qx(a),null===r||(a=a[15],10&r.type))););if(null===r)return!1;n=r,t=a}const i=Lt.lFrame=Kb();return i.currentTNode=n,i.lView=t,!0}function Hd(t){const n=Kb(),e=t[1];Lt.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Kb(){const t=Lt.lFrame,n=null===t?null:t.child;return null===n?Zb(t):n}function Zb(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Jb(){const t=Lt.lFrame;return Lt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const e_=Jb;function Gd(){const t=Jb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Vr(){return Lt.lFrame.selectedIndex}function ns(t){Lt.lFrame.selectedIndex=t}function In(){const t=Lt.lFrame;return Up(t.tView,t.selectedIndex)}function zd(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=a;o&&(t.contentHooks||(t.contentHooks=[])).push(-e,o),s&&((t.contentHooks||(t.contentHooks=[])).push(e,s),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,s)),l&&(t.viewHooks||(t.viewHooks=[])).push(-e,l),c&&((t.viewHooks||(t.viewHooks=[])).push(e,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,c)),null!=u&&(t.destroyHooks||(t.destroyHooks=[])).push(e,u)}}function jd(t,n,e){t_(t,n,3,e)}function $d(t,n,e,i){(3&t[2])===e&&t_(t,n,e,i)}function Xp(t,n){let e=t[2];(3&e)===n&&(e&=2047,e+=1,t[2]=e)}function t_(t,n,e,i){const a=null!=i?i:-1,o=n.length-1;let s=0;for(let l=void 0!==i?65535&t[18]:0;l<o;l++)if("number"==typeof n[l+1]){if(s=n[l],null!=i&&s>=i)break}else n[l]<0&&(t[18]+=65536),(s<a||-1==a)&&(ak(t,e,n,l),t[18]=(4294901760&t[18])+l+2),l++}function ak(t,n,e,i){const r=e[i]<0,a=e[i+1],s=t[r?-e[i]:e[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{a.call(s)}finally{}}}else try{a.call(s)}finally{}}class Lc{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function qd(t,n,e){const i=Vn(t);let r=0;for(;r<e.length;){const a=e[r];if("number"==typeof a){if(0!==a)break;r++;const o=e[r++],s=e[r++],l=e[r++];i?t.setAttribute(n,s,l,o):n.setAttributeNS(o,s,l)}else{const o=a,s=e[++r];Qp(o)?i&&t.setProperty(n,o,s):i?t.setAttribute(n,o,s):n.setAttribute(o,s),r++}}return r}function i_(t){return 3===t||4===t||6===t}function Qp(t){return 64===t.charCodeAt(0)}function Wd(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||n_(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function n_(t,n,e,i,r){let a=0,o=t.length;if(-1===n)o=-1;else for(;a<t.length;){const s=t[a++];if("number"==typeof s){if(s===n){o=-1;break}if(s>n){o=a-1;break}}}for(;a<t.length;){const s=t[a];if("number"==typeof s)break;if(s===e){if(null===i)return void(null!==r&&(t[a+1]=r));if(i===t[a+1])return void(t[a+2]=r)}a++,null!==i&&a++,null!==r&&a++}-1!==o&&(t.splice(o,0,n),a=o+1),t.splice(a++,0,e),null!==i&&t.splice(a++,0,i),null!==r&&t.splice(a++,0,r)}function r_(t){return-1!==t}function bl(t){return 32767&t}function _l(t,n){let e=function uk(t){return t>>16}(t),i=n;for(;e>0;)i=i[15],e--;return i}let Kp=!0;function Xd(t){const n=Kp;return Kp=t,n}let dk=0;function Hc(t,n){const e=Jp(t,n);if(-1!==e)return e;const i=n[1];i.firstCreatePass&&(t.injectorIndex=n.length,Zp(i.data,t),Zp(n,null),Zp(i.blueprint,null));const r=Yd(t,n),a=t.injectorIndex;if(r_(r)){const o=bl(r),s=_l(r,n),l=s[1].data;for(let c=0;c<8;c++)n[a+c]=s[o+c]|l[o+c]}return n[a+8]=r,a}function Zp(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Jp(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Yd(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){const a=r[1],o=a.type;if(i=2===o?a.declTNode:1===o?r[6]:null,null===i)return-1;if(e++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return-1}function Qd(t,n,e){!function hk(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(Oc)&&(i=e[Oc]),null==i&&(i=e[Oc]=dk++);const r=255&i;n.data[t+(r>>5)]|=1<<r}(t,n,e)}function s_(t,n,e){if(e&Yt.Optional)return t;Ad(n,"NodeInjector")}function l_(t,n,e,i){if(e&Yt.Optional&&void 0===i&&(i=null),0==(e&(Yt.Self|Yt.Host))){const r=t[9],a=Jo(void 0);try{return r?r.get(n,i,e&Yt.Optional):Vb(n,i,e&Yt.Optional)}finally{Jo(a)}}return s_(i,n,e)}function c_(t,n,e,i=Yt.Default,r){if(null!==t){const a=function vk(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Oc)?t[Oc]:void 0;return"number"==typeof n?n>=0?255&n:pk:n}(e);if("function"==typeof a){if(!Qb(n,t,i))return i&Yt.Host?s_(r,e,i):l_(n,e,i,r);try{const o=a(i);if(null!=o||i&Yt.Optional)return o;Ad(e)}finally{e_()}}else if("number"==typeof a){let o=null,s=Jp(t,n),l=-1,c=i&Yt.Host?n[16][6]:null;for((-1===s||i&Yt.SkipSelf)&&(l=-1===s?Yd(t,n):n[s+8],-1!==l&&h_(i,!1)?(o=n[1],s=bl(l),n=_l(l,n)):s=-1);-1!==s;){const u=n[1];if(d_(a,s,u.data)){const f=gk(s,n,e,o,i,c);if(f!==u_)return f}l=n[s+8],-1!==l&&h_(i,n[1].data[s+8]===c)&&d_(a,s,n)?(o=u,s=bl(l),n=_l(l,n)):s=-1}}}return l_(n,e,i,r)}const u_={};function pk(){return new yl(Qn(),Pe())}function gk(t,n,e,i,r,a){const o=n[1],s=o.data[t+8],u=Kd(s,o,e,null==i?Nd(s)&&Kp:i!=o&&0!=(3&s.type),r&Yt.Host&&a===s);return null!==u?Gc(n,o,u,s):u_}function Kd(t,n,e,i,r){const a=t.providerIndexes,o=n.data,s=1048575&a,l=t.directiveStart,u=a>>20,v=r?s+u:t.directiveEnd;for(let b=i?s:s+u;b<v;b++){const y=o[b];if(b<l&&e===y||b>=l&&y.type===e)return b}if(r){const b=o[l];if(b&&Ha(b)&&b.type===e)return l}return null}function Gc(t,n,e,i){let r=t[e];const a=n.data;if(function ok(t){return t instanceof Lc}(r)){const o=r;o.resolving&&function lx(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new Di(-200,`Circular dependency in DI detected for ${t}${e}`)}(Ar(a[e]));const s=Xd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Jo(o.injectImpl):null;Qb(t,i,Yt.Default);try{r=t[e]=o.factory(void 0,a,t,i),n.firstCreatePass&&e>=i.directiveStart&&function rk(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:a}=n.type.prototype;if(i){const o=Lb(n);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),a&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,a),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,a))}(e,a[e],n)}finally{null!==l&&Jo(l),Xd(s),o.resolving=!1,e_()}}return r}function d_(t,n,e){return!!(e[n+(t>>5)]&1<<t)}function h_(t,n){return!(t&Yt.Self||t&Yt.Host&&n)}class yl{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return c_(this._tNode,this._lView,n,i,e)}}function _r(t){return es(()=>{const n=t.prototype.constructor,e=n[Ao]||eg(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const a=r[Ao]||eg(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function eg(t){return kb(t)?()=>{const n=eg(Jt(t));return n&&n()}:ks(t)}const Cl="__parameters__";function Tl(t,n,e){return es(()=>{const i=function tg(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...a){if(this instanceof r)return i.apply(this,a),this;const o=new r(...a);return s.annotation=o,s;function s(l,c,u){const f=l.hasOwnProperty(Cl)?l[Cl]:Object.defineProperty(l,Cl,{value:[]})[Cl];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class si{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=gt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const bk=new si("AnalyzeForEntryComponents");function wa(t,n){void 0===n&&(n=t);for(let e=0;e<t.length;e++){let i=t[e];Array.isArray(i)?(n===t&&(n=t.slice(0,e)),wa(i,n)):n!==t&&n.push(i)}return n}function co(t,n){t.forEach(e=>Array.isArray(e)?co(e,n):n(e))}function p_(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Zd(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function $c(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function na(t,n,e){let i=Rl(t,n);return i>=0?t[1|i]=e:(i=~i,function wk(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function ng(t,n){const e=Rl(t,n);if(e>=0)return t[1|e]}function Rl(t,n){return function m_(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const a=i+(r-i>>1),o=t[a<<e];if(n===o)return a<<e;o>n?r=a:i=a+1}return~(r<<e)}(t,n,1)}const qc={},ag="__NG_DI_FLAG__",eh="ngTempTokenPath",kk=/\n/gm,__="__source",Ak=an({provide:String,useValue:an});let Wc;function y_(t){const n=Wc;return Wc=t,n}function Pk(t,n=Yt.Default){if(void 0===Wc)throw new Di(203,"");return null===Wc?Vb(t,void 0,n):Wc.get(t,n&Yt.Optional?null:void 0,n)}function He(t,n=Yt.Default){return(function gx(){return kp}()||Pk)(Jt(t),n)}function og(t){const n=[];for(let e=0;e<t.length;e++){const i=Jt(t[e]);if(Array.isArray(i)){if(0===i.length)throw new Di(900,"");let r,a=Yt.Default;for(let o=0;o<i.length;o++){const s=i[o],l=Vk(s);"number"==typeof l?-1===l?r=s.token:a|=l:r=s}n.push(He(r,a))}else n.push(He(i))}return n}function Xc(t,n){return t[ag]=n,t.prototype[ag]=n,t}function Vk(t){return t[ag]}const Yc=Xc(Tl("Inject",t=>({token:t})),-1),uo=Xc(Tl("Optional"),8),Dl=Xc(Tl("SkipSelf"),4);let ih,nh;function kl(t){var n;return(null===(n=function lg(){if(void 0===ih&&(ih=null,Zi.trustedTypes))try{ih=Zi.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return ih}())||void 0===n?void 0:n.createHTML(t))||t}function D_(t){var n;return(null===(n=function cg(){if(void 0===nh&&(nh=null,Zi.trustedTypes))try{nh=Zi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return nh}())||void 0===n?void 0:n.createHTML(t))||t}class As{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class $k extends As{getTypeName(){return"HTML"}}class qk extends As{getTypeName(){return"Style"}}class Wk extends As{getTypeName(){return"Script"}}class Xk extends As{getTypeName(){return"URL"}}class Yk extends As{getTypeName(){return"ResourceURL"}}function ra(t){return t instanceof As?t.changingThisBreaksApplicationSecurity:t}function ho(t,n){const e=M_(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===n}function M_(t){return t instanceof As&&t.getTypeName()||null}function A_(t){const n=new iM(t);return function nM(){try{return!!(new window.DOMParser).parseFromString(kl(""),"text/html")}catch(t){return!1}}()?new tM(n):n}class tM{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(kl(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class iM{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const i=this.inertDocument.createElement("body");e.appendChild(i)}}getInertBodyElement(n){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=kl(n),e;const i=this.inertDocument.createElement("body");return i.innerHTML=kl(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(n){const e=n.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&n.removeAttribute(o)}let i=n.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const rM=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,aM=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Kc(t){return(t=String(t)).match(rM)||t.match(aM)?t:"unsafe:"+t}function P_(t){return(t=String(t)).split(",").map(n=>Kc(n.trim())).join(", ")}function fo(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function Zc(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const V_=fo("area,br,col,hr,img,wbr"),I_=fo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),O_=fo("rp,rt"),ug=Zc(V_,Zc(I_,fo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zc(O_,fo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zc(O_,I_)),dg=fo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hg=fo("srcset"),E_=Zc(dg,hg,fo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),oM=fo("script,style,template");class sM{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!ug.hasOwnProperty(e))return this.sanitizedSomething=!0,!oM.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const a=i.item(r),o=a.name,s=o.toLowerCase();if(!E_.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let l=a.value;dg[s]&&(l=Kc(l)),hg[s]&&(l=P_(l)),this.buf.push(" ",o,'="',N_(l),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();ug.hasOwnProperty(e)&&!V_.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(N_(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const lM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cM=/([^\#-~ |!])/g;function N_(t){return t.replace(/&/g,"&amp;").replace(lM,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(cM,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rh;function B_(t,n){let e=null;try{rh=rh||A_(t);let i=n?String(n):"";e=rh.getInertBodyElement(i);let r=5,a=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=a,a=e.innerHTML,e=rh.getInertBodyElement(i)}while(i!==a);return kl((new sM).sanitizeChildren(fg(e)||e))}finally{if(e){const i=fg(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function fg(t){return"content"in t&&function uM(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var _i=(()=>((_i=_i||{})[_i.NONE=0]="NONE",_i[_i.HTML=1]="HTML",_i[_i.STYLE=2]="STYLE",_i[_i.SCRIPT=3]="SCRIPT",_i[_i.URL=4]="URL",_i[_i.RESOURCE_URL=5]="RESOURCE_URL",_i))();function kt(t){const n=function Jc(){const t=Pe();return t&&t[12]}();return n?D_(n.sanitize(_i.HTML,t)||""):ho(t,"HTML")?D_(ra(t)):B_(Lp(),qt(t))}const U_="__ngContext__";function yr(t,n){t[U_]=n}function vg(t){const n=function eu(t){return t[U_]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function bg(t){return t.ngOriginalError}function DM(t,...n){t.error(...n)}class Ml{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n),i=function RM(t){return t&&t.ngErrorLogger||DM}(n);i(this._console,"ERROR",n),e&&i(this._console,"ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&bg(n);for(;e&&bg(e);)e=bg(e);return e||null}}const MM=/^>|^->|<!--|-->|--!>|<!-$/g,AM=/(<|>)/;const $_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Zi))();function Ca(t){return t.ownerDocument.defaultView}function po(t){return t instanceof Function?t():t}var aa=(()=>((aa=aa||{})[aa.Important=1]="Important",aa[aa.DashCase=2]="DashCase",aa))();let _g;function yg(t,n){return _g(t,n)}function tu(t){const n=t[3];return Ua(n)?n[3]:n}function wg(t){return Q_(t[13])}function Cg(t){return Q_(t[4])}function Q_(t){for(;null!==t&&!Ua(t);)t=t[4];return t}function Pl(t,n,e,i,r){if(null!=i){let a,o=!1;Ua(i)?a=i:so(i)&&(o=!0,i=i[0]);const s=$n(i);0===t&&null!==e?null==r?i1(n,e,s):Ps(n,e,s,r||null,!0):1===t&&null!==e?Ps(n,e,s,r||null,!0):2===t?c1(n,s,o):3===t&&n.destroyNode(s),null!=a&&function KM(t,n,e,i,r){const a=e[7];a!==$n(e)&&Pl(n,t,i,a,r);for(let s=10;s<e.length;s++){const l=e[s];iu(l[1],l,t,n,i,a)}}(n,t,a,e,r)}}function Sg(t,n){return Vn(t)?t.createText(n):t.createTextNode(n)}function K_(t,n,e){Vn(t)?t.setValue(n,e):n.textContent=e}function LM(t,n){return t.createComment(function j_(t){return t.replace(MM,n=>n.replace(AM,"\u200b$1\u200b"))}(n))}function Tg(t,n,e){if(Vn(t))return t.createElement(n,e);{const i=null!==e?function Ex(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(e):null;return null===i?t.createElement(n):t.createElementNS(i,n)}}function Z_(t,n){const e=t[9],i=e.indexOf(n),r=n[3];1024&n[2]&&(n[2]&=-1025,Gp(r,-1)),e.splice(i,1)}function Rg(t,n){if(t.length<=10)return;const e=10+n,i=t[e];if(i){const r=i[17];null!==r&&r!==t&&Z_(r,i),n>0&&(t[e-1][4]=i[4]);const a=Zd(t,10+n);!function UM(t,n){iu(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(i[1],i);const o=a[19];null!==o&&o.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function J_(t,n){if(!(256&n[2])){const e=n[11];Vn(e)&&e.destroyNode&&iu(t,n,e,3,null,null),function zM(t){let n=t[13];if(!n)return Dg(t[1],t);for(;n;){let e=null;if(so(n))e=n[13];else{const i=n[10];i&&(e=i)}if(!e){for(;n&&!n[4]&&n!==t;)so(n)&&Dg(n[1],n),n=n[3];null===n&&(n=t),so(n)&&Dg(n[1],n),e=n&&n[4]}n=e}}(n)}}function Dg(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function WM(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof Lc)){const a=e[i+1];if(Array.isArray(a))for(let o=0;o<a.length;o+=2){const s=r[a[o]],l=a[o+1];try{l.call(s)}finally{}}else try{a.call(r)}finally{}}}}(t,n),function qM(t,n){const e=t.cleanup,i=n[7];let r=-1;if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const o=e[a+1],s="function"==typeof o?o(n):$n(n[o]),l=i[r=e[a+2]],c=e[a+3];"boolean"==typeof c?s.removeEventListener(e[a],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),a+=2}else{const o=i[r=e[a+1]];e[a].call(o)}if(null!==i){for(let a=r+1;a<i.length;a++)i[a]();n[7]=null}}(t,n),1===n[1].type&&Vn(n[11])&&n[11].destroy();const e=n[17];if(null!==e&&Ua(n[3])){e!==n[3]&&Z_(e,n);const i=n[19];null!==i&&i.detachView(t)}}}function e1(t,n,e){return t1(t,n.parent,e)}function t1(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[0];if(2&i.flags){const r=t.data[i.directiveStart].encapsulation;if(r===oo.None||r===oo.Emulated)return null}return ya(i,e)}function Ps(t,n,e,i,r){Vn(t)?t.insertBefore(n,e,i,r):n.insertBefore(e,i,r)}function i1(t,n,e){Vn(t)?t.appendChild(n,e):n.appendChild(e)}function n1(t,n,e,i,r){null!==i?Ps(t,n,e,i,r):i1(t,n,e)}function ah(t,n){return Vn(t)?t.parentNode(n):n.parentNode}function r1(t,n,e){return o1(t,n,e)}function a1(t,n,e){return 40&t.type?ya(t,e):null}let xg,o1=a1;function s1(t,n){o1=t,xg=n}function oh(t,n,e,i){const r=e1(t,i,n),a=n[11],s=r1(i.parent||n[6],i,n);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)n1(a,r,e[l],s,!1);else n1(a,r,e,s,!1);void 0!==xg&&xg(a,i,n,e,r)}function sh(t,n){if(null!==n){const e=n.type;if(3&e)return ya(n,t);if(4&e)return kg(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return sh(t,i);{const r=t[n.index];return Ua(r)?kg(-1,r):$n(r)}}if(32&e)return yg(n,t)()||$n(t[n.index]);{const i=l1(t,n);return null!==i?Array.isArray(i)?i[0]:sh(tu(t[16]),i):sh(t,n.next)}}return null}function l1(t,n){return null!==n?t[16][6].projection[n.projection]:null}function kg(t,n){const e=10+t+1;if(e<n.length){const i=n[e],r=i[1].firstChild;if(null!==r)return sh(i,r)}return n[7]}function c1(t,n,e){const i=ah(t,n);i&&function XM(t,n,e,i){Vn(t)?t.removeChild(n,e,i):n.removeChild(e)}(t,i,n,e)}function Mg(t,n,e,i,r,a,o){for(;null!=e;){const s=i[e.index],l=e.type;if(o&&0===n&&(s&&yr($n(s),i),e.flags|=4),64!=(64&e.flags))if(8&l)Mg(t,n,e.child,i,r,a,!1),Pl(n,t,r,s,a);else if(32&l){const c=yg(e,i);let u;for(;u=c();)Pl(n,t,r,u,a);Pl(n,t,r,s,a)}else 16&l?u1(t,n,i,e,r,a):Pl(n,t,r,s,a);e=o?e.projectionNext:e.next}}function iu(t,n,e,i,r,a){Mg(e,i,t.firstChild,n,r,a,!1)}function u1(t,n,e,i,r,a){const o=e[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Pl(n,t,r,l[c],a);else Mg(t,n,l,o[3],r,a,!0)}function d1(t,n,e){Vn(t)?t.setAttribute(n,"style",e):n.style.cssText=e}function Ag(t,n,e){Vn(t)?""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e):n.className=e}function h1(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=n.length;if(r+a===i||t.charCodeAt(r+a)<=32)return r}e=r+1}}const f1="ng-template";function JM(t,n,e){let i=0;for(;i<t.length;){let r=t[i++];if(e&&"class"===r){if(r=t[i],-1!==h1(r.toLowerCase(),n,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===n)return!0;return!1}}return!1}function p1(t){return 4===t.type&&t.value!==f1}function eA(t,n,e){return n===(4!==t.type||e?t.value:f1)}function tA(t,n,e){let i=4;const r=t.attrs||[],a=function rA(t){for(let n=0;n<t.length;n++)if(i_(t[n]))return n;return t.length}(r);let o=!1;for(let s=0;s<n.length;s++){const l=n[s];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!eA(t,l,e)||""===l&&1===n.length){if(Ga(i))return!1;o=!0}}else{const c=8&i?l:n[++s];if(8&i&&null!==t.attrs){if(!JM(t.attrs,c,e)){if(Ga(i))return!1;o=!0}continue}const f=iA(8&i?"class":l,r,p1(t),e);if(-1===f){if(Ga(i))return!1;o=!0;continue}if(""!==c){let v;v=f>a?"":r[f+1].toLowerCase();const b=8&i?v:null;if(b&&-1!==h1(b,c,0)||2&i&&c!==v){if(Ga(i))return!1;o=!0}}}}else{if(!o&&!Ga(i)&&!Ga(l))return!1;if(o&&Ga(l))continue;o=!1,i=l|1&i}}return Ga(i)||o}function Ga(t){return 0==(1&t)}function iA(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let a=!1;for(;r<n.length;){const o=n[r];if(o===t)return r;if(3===o||6===o)a=!0;else{if(1===o||2===o){let s=n[++r];for(;"string"==typeof s;)s=n[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=a?1:2}return-1}return function aA(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function g1(t,n,e=!1){for(let i=0;i<n.length;i++)if(tA(t,n[i],e))return!0;return!1}function oA(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function v1(t,n){return t?":not("+n.trim()+")":n}function sA(t){let n=t[0],e=1,i=2,r="",a=!1;for(;e<t.length;){let o=t[e];if("string"==typeof o)if(2&i){const s=t[++e];r+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Ga(o)&&(n+=v1(a,r),r=""),i=o,a=a||!Ga(i);e++}return""!==r&&(n+=v1(a,r)),n}const Wt={};function p(t){m1(xi(),Pe(),Vr()+t,Ld())}function m1(t,n,e,i){if(!i)if(3==(3&n[2])){const a=t.preOrderCheckHooks;null!==a&&jd(n,a,e)}else{const a=t.preOrderHooks;null!==a&&$d(n,a,0,e)}ns(e)}function lh(t,n){return t<<17|n<<2}function za(t){return t>>17&32767}function Pg(t){return 2|t}function Io(t){return(131068&t)>>2}function Vg(t,n){return-131069&t|n<<2}function Ig(t){return 1|t}function k1(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const r=e[i],a=e[i+1];if(-1!==a){const o=t.data[a];Wp(r),o.contentQueries(2,n[a],a)}}}function nu(t,n,e,i,r,a,o,s,l,c){const u=n.blueprint.slice();return u[0]=r,u[2]=140|i,jb(u),u[3]=u[15]=t,u[8]=e,u[10]=o||t&&t[10],u[11]=s||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=a,u[16]=2==n.type?t[16]:u,u}function Vl(t,n,e,i,r){let a=t.data[n];if(null===a)a=Gg(t,n,e,i,r),function Wx(){return Lt.lFrame.inI18n}()&&(a.flags|=64);else if(64&a.type){a.type=e,a.value=i,a.attrs=r;const o=Fc();a.injectorIndex=null===o?-1:o.injectorIndex}return lo(a,!0),a}function Gg(t,n,e,i,r){const a=qb(),o=zp(),l=t.data[n]=function RA(t,n,e,i,r,a){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=l),null!==a&&(o?null==a.child&&null!==l.parent&&(a.child=l):null===a.next&&(a.next=l)),l}function Il(t,n,e,i){if(0===e)return-1;const r=n.length;for(let a=0;a<e;a++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function ru(t,n,e){Hd(n);try{const i=t.viewQuery;null!==i&&Kg(1,i,e);const r=t.template;null!==r&&M1(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&k1(t,n),t.staticViewQueries&&Kg(2,t.viewQuery,e);const a=t.components;null!==a&&function CA(t,n){for(let e=0;e<n.length;e++)zA(t,n[e])}(n,a)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[2]&=-5,Gd()}}function Ol(t,n,e,i){const r=n[2];if(256==(256&r))return;Hd(n);const a=Ld();try{jb(n),function Wb(t){return Lt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&M1(t,n,e,2,i);const o=3==(3&r);if(!a)if(o){const c=t.preOrderCheckHooks;null!==c&&jd(n,c,null)}else{const c=t.preOrderHooks;null!==c&&$d(n,c,0,null),Xp(n,0)}if(function HA(t){for(let n=wg(t);null!==n;n=Cg(n)){if(!n[2])continue;const e=n[9];for(let i=0;i<e.length;i++){const r=e[i],a=r[3];0==(1024&r[2])&&Gp(a,1),r[2]|=1024}}}(n),function UA(t){for(let n=wg(t);null!==n;n=Cg(n))for(let e=10;e<n.length;e++){const i=n[e],r=i[1];Hp(i)&&Ol(r,i,r.template,i[8])}}(n),null!==t.contentQueries&&k1(t,n),!a)if(o){const c=t.contentCheckHooks;null!==c&&jd(n,c)}else{const c=t.contentHooks;null!==c&&$d(n,c,1),Xp(n,1)}!function yA(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)ns(~r);else{const a=r,o=e[++i],s=e[++i];Xx(o,a),s(2,n[a])}}}finally{ns(-1)}}(t,n);const s=t.components;null!==s&&function wA(t,n){for(let e=0;e<n.length;e++)GA(t,n[e])}(n,s);const l=t.viewQuery;if(null!==l&&Kg(2,l,i),!a)if(o){const c=t.viewCheckHooks;null!==c&&jd(n,c)}else{const c=t.viewHooks;null!==c&&$d(n,c,2),Xp(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Gp(n[3],-1))}finally{Gd()}}function SA(t,n,e,i){const r=n[10],a=!Ld(),o=zb(n);try{a&&!o&&r.begin&&r.begin(),o&&ru(t,n,i),Ol(t,n,e,i)}finally{a&&!o&&r.end&&r.end()}}function M1(t,n,e,i,r){const a=Vr(),o=2&i;try{ns(-1),o&&n.length>20&&m1(t,n,20,Ld()),e(i,r)}finally{ns(a)}}function zg(t,n,e){!$b()||(function VA(t,n,e,i){const r=e.directiveStart,a=e.directiveEnd;t.firstCreatePass||Hc(e,n),yr(i,n);const o=e.initialInputs;for(let s=r;s<a;s++){const l=t.data[s],c=Ha(l);c&&BA(n,e,l);const u=Gc(n,t,s,e);yr(u,n),null!==o&&FA(0,s-r,u,l,0,o),c&&(ia(e.index,n)[8]=u)}}(t,n,e,ya(e,n)),128==(128&e.flags)&&function IA(t,n,e){const i=e.directiveStart,r=e.directiveEnd,o=e.index,s=function Yx(){return Lt.lFrame.currentDirectiveIndex}();try{ns(o);for(let l=i;l<r;l++){const c=t.data[l],u=n[l];$p(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&F1(c,u)}}finally{ns(-1),$p(s)}}(t,n,e))}function jg(t,n,e=ya){const i=n.localNames;if(null!==i){let r=n.index+1;for(let a=0;a<i.length;a+=2){const o=i[a+1],s=-1===o?e(n,t):t[o];t[r++]=s}}}function P1(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=dh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function dh(t,n,e,i,r,a,o,s,l,c){const u=20+i,f=u+r,v=function TA(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:Wt);return e}(u,f),b="function"==typeof c?c():c;return v[1]={type:t,blueprint:v,template:e,queries:null,viewQuery:s,declTNode:n,data:v.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1}}function O1(t,n,e,i){const r=j1(n);null===e?r.push(i):(r.push(e),t.firstCreatePass&&$1(t).push(i,r.length-1))}function E1(t,n,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(e=null===e?{}:e).hasOwnProperty(i)?e[i].push(n,r):e[i]=[n,r]}return e}function oa(t,n,e,i,r,a,o,s){const l=ya(n,e);let u,c=n.inputs;!s&&null!=c&&(u=c[i])?(X1(t,e,u,i,r),Nd(n)&&function kA(t,n){const e=ia(n,t);16&e[2]||(e[2]|=64)}(e,n.index)):3&n.type&&(i=function xA(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,n.value||"",i):r,Vn(a)?a.setProperty(l,i,r):Qp(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function $g(t,n,e,i){let r=!1;if($b()){const a=function OA(t,n,e){const i=t.directiveRegistry;let r=null;if(i)for(let a=0;a<i.length;a++){const o=i[a];g1(e,o.selectors,!1)&&(r||(r=[]),Qd(Hc(e,n),t,o.type),Ha(o)?(L1(t,e),r.unshift(o)):r.push(o))}return r}(t,n,e),o=null===i?null:{"":-1};if(null!==a){r=!0,U1(e,t.data.length,a.length);for(let u=0;u<a.length;u++){const f=a[u];f.providersResolver&&f.providersResolver(f)}let s=!1,l=!1,c=Il(t,n,a.length,null);for(let u=0;u<a.length;u++){const f=a[u];e.mergedAttrs=Wd(e.mergedAttrs,f.hostAttrs),H1(t,e,n,c,f),NA(c,f,o),null!==f.contentQueries&&(e.flags|=8),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(e.flags|=128);const v=f.type.prototype;!s&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),s=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function DA(t,n){const i=n.directiveEnd,r=t.data,a=n.attrs,o=[];let s=null,l=null;for(let c=n.directiveStart;c<i;c++){const u=r[c],f=u.inputs,v=null===a||p1(n)?null:LA(f,a);o.push(v),s=E1(f,c,s),l=E1(u.outputs,c,l)}null!==s&&(s.hasOwnProperty("class")&&(n.flags|=16),s.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=o,n.inputs=s,n.outputs=l}(t,e)}o&&function EA(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const a=e[n[r+1]];if(null==a)throw new Di(-301,!1);i.push(n[r],a)}}}(e,i,o)}return e.mergedAttrs=Wd(e.mergedAttrs,e.attrs),r}function B1(t,n,e,i,r,a){const o=a.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const l=~n.index;(function PA(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(s)!=l&&s.push(l),s.push(i,r,o)}}function F1(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function L1(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function NA(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;Ha(n)&&(e[""]=t)}}function U1(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function H1(t,n,e,i,r){t.data[i]=r;const a=r.factory||(r.factory=ks(r.type)),o=new Lc(a,Ha(r),null);t.blueprint[i]=o,e[i]=o,B1(t,n,0,i,Il(t,e,r.hostVars,Wt),r)}function BA(t,n,e){const i=ya(n,t),r=P1(e),a=t[10],o=hh(t,nu(t,r,null,e.onPush?64:16,i,n,a,a.createRenderer(i,e),null,null));t[n.index]=o}function qg(t,n,e,i,r,a,o){if(null==a)Vn(t)?t.removeAttribute(n,r,e):n.removeAttribute(r);else{const s=null==o?qt(a):o(a,i||"",r);Vn(t)?t.setAttribute(n,r,s,e):e?n.setAttributeNS(e,r,s):n.setAttribute(r,s)}}function FA(t,n,e,i,r,a){const o=a[n];if(null!==o){const s=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],f=o[l++];null!==s?i.setInput(e,f,c,u):e[u]=f}}}function LA(t,n){let e=null,i=0;for(;i<n.length;){const r=n[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],n[i+1])),i+=2}else i+=2;else i+=4}return e}function G1(t,n,e,i){return new Array(t,!0,!1,n,null,0,i,e,null,null)}function GA(t,n){const e=ia(n,t);if(Hp(e)){const i=e[1];80&e[2]?Ol(i,e,i.template,e[8]):e[5]>0&&Wg(e)}}function Wg(t){for(let i=wg(t);null!==i;i=Cg(i))for(let r=10;r<i.length;r++){const a=i[r];if(1024&a[2]){const o=a[1];Ol(o,a,o.template,a[8])}else a[5]>0&&Wg(a)}const e=t[1].components;if(null!==e)for(let i=0;i<e.length;i++){const r=ia(e[i],t);Hp(r)&&r[5]>0&&Wg(r)}}function zA(t,n){const e=ia(n,t),i=e[1];(function jA(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(i,e),ru(i,e,e[8])}function hh(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Xg(t){for(;t;){t[2]|=64;const n=tu(t);if(Rx(t)&&!n)return t;t=n}return null}function Qg(t,n,e){const i=n[10];i.begin&&i.begin();try{Ol(t,n,t.template,e)}catch(r){throw W1(n,r),r}finally{i.end&&i.end()}}function z1(t){!function Yg(t){for(let n=0;n<t.components.length;n++){const e=t.components[n],i=vg(e),r=i[1];SA(r,i,r.template,e)}}(t[8])}function Kg(t,n,e){Wp(0),n(t,e)}const XA=(()=>Promise.resolve(null))();function j1(t){return t[7]||(t[7]=[])}function $1(t){return t.cleanup||(t.cleanup=[])}function W1(t,n){const e=t[9],i=e?e.get(Ml,null):null;i&&i.handleError(n)}function X1(t,n,e,i,r){for(let a=0;a<e.length;){const o=e[a++],s=e[a++],l=n[o],c=t.data[o];null!==c.setInput?c.setInput(l,r,i,s):l[s]=r}}function Oo(t,n,e){const i=Fd(n,t);K_(t[11],i,e)}function fh(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==n)for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?a=s:1==a?r=Tp(r,s):2==a&&(i=Tp(i,s+": "+n[++o]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}const Zg=new si("INJECTOR",-1);class Y1{get(n,e=qc){if(e===qc){const i=new Error(`NullInjectorError: No provider for ${Wi(n)}!`);throw i.name="NullInjectorError",i}return e}}const Jg=new si("Set Injector scope."),au={},KA={};let ev;function Q1(){return void 0===ev&&(ev=new Y1),ev}function K1(t,n=null,e=null,i){const r=Z1(t,n,e,i);return r._resolveInjectorDefTypes(),r}function Z1(t,n=null,e=null,i){return new ZA(t,e,n||Q1(),i)}class ZA{constructor(n,e,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];e&&co(e,s=>this.processProvider(s,n,e)),co([n],s=>this.processInjectorType(s,[],a)),this.records.set(Zg,El(void 0,this));const o=this.records.get(Jg);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof n?null:Wi(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,e=qc,i=Yt.Default){this.assertNotDestroyed();const r=y_(this),a=Jo(void 0);try{if(!(i&Yt.SkipSelf)){let s=this.records.get(n);if(void 0===s){const l=function oP(t){return"function"==typeof t||"object"==typeof t&&t instanceof si}(n)&&Dp(n);s=l&&this.injectableDefInScope(l)?El(tv(n),au):null,this.records.set(n,s)}if(null!=s)return this.hydrate(n,s)}return(i&Yt.Self?Q1():this.parent).get(n,e=i&Yt.Optional&&e===qc?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[eh]=o[eh]||[]).unshift(Wi(n)),r)throw o;return function Ik(t,n,e,i){const r=t[eh];throw n[__]&&r.unshift(n[__]),t.message=function Ok(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=Wi(n);if(Array.isArray(n))r=n.map(Wi).join(" -> ");else if("object"==typeof n){let a=[];for(let o in n)if(n.hasOwnProperty(o)){let s=n[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):Wi(s)))}r=`{${a.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(kk,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[eh]=null,t}(o,n,"R3InjectorError",this.source)}throw o}finally{Jo(a),y_(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((i,r)=>n.push(Wi(r))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Di(205,!1)}processInjectorType(n,e,i){if(!(n=Jt(n)))return!1;let r=Ab(n);const a=null==r&&n.ngModule||void 0,o=void 0===a?n:a,s=-1!==i.indexOf(o);if(void 0!==a&&(r=Ab(a)),null==r)return!1;if(null!=r.imports&&!s){let u;i.push(o);try{co(r.imports,f=>{this.processInjectorType(f,e,i)&&(void 0===u&&(u=[]),u.push(f))})}finally{}if(void 0!==u)for(let f=0;f<u.length;f++){const{ngModule:v,providers:b}=u[f];co(b,y=>this.processProvider(y,v,b||on))}}this.injectorDefTypes.add(o);const l=ks(o)||(()=>new o);this.records.set(o,El(l,au));const c=r.providers;if(null!=c&&!s){const u=n;co(c,f=>this.processProvider(f,u,c))}return void 0!==a&&void 0!==n.providers}processProvider(n,e,i){let r=Nl(n=Jt(n))?n:Jt(n&&n.provide);const a=function eP(t,n,e){return ey(t)?El(void 0,t.useValue):El(J1(t),au)}(n);if(Nl(n)||!0!==n.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=El(void 0,au,!0),o.factory=()=>og(o.multi),this.records.set(r,o)),r=n,o.multi.push(n)}this.records.set(r,a)}hydrate(n,e){return e.value===au&&(e.value=KA,e.value=e.factory()),"object"==typeof e.value&&e.value&&function aP(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Jt(n.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function tv(t){const n=Dp(t),e=null!==n?n.factory:ks(t);if(null!==e)return e;if(t instanceof si)throw new Di(204,!1);if(t instanceof Function)return function JA(t){const n=t.length;if(n>0)throw $c(n,"?"),new Di(204,!1);const e=function hx(t){const n=t&&(t[Pd]||t[Pb]);if(n){const e=function fx(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),n}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new Di(204,!1)}function J1(t,n,e){let i;if(Nl(t)){const r=Jt(t);return ks(r)||tv(r)}if(ey(t))i=()=>Jt(t.useValue);else if(function iP(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...og(t.deps||[]));else if(function tP(t){return!(!t||!t.useExisting)}(t))i=()=>He(Jt(t.useExisting));else{const r=Jt(t&&(t.useClass||t.provide));if(!function rP(t){return!!t.deps}(t))return ks(r)||tv(r);i=()=>new r(...og(t.deps))}return i}function El(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function ey(t){return null!==t&&"object"==typeof t&&Ak in t}function Nl(t){return"function"==typeof t}let Ln=(()=>{class t{static create(e,i){var r;if(Array.isArray(e))return K1({name:""},i,e,"");{const a=null!==(r=e.name)&&void 0!==r?r:"";return K1({name:a},e.parent,e.providers,a)}}}return t.THROW_IF_NOT_FOUND=qc,t.NULL=new Y1,t.\u0275prov=gt({token:t,providedIn:"any",factory:()=>He(Zg)}),t.__NG_ELEMENT_ID__=-1,t})();function pP(t,n){zd(vg(t)[1],Qn())}function Gi(t){let n=function hy(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if(Ha(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Di(903,"");r=n.\u0275dir}if(r){if(e){i.push(r);const o=t;o.inputs=rv(t.inputs),o.declaredInputs=rv(t.declaredInputs),o.outputs=rv(t.outputs);const s=r.hostBindings;s&&bP(t,s);const l=r.viewQuery,c=r.contentQueries;if(l&&vP(t,l),c&&mP(t,c),Sp(t.inputs,r.inputs),Sp(t.declaredInputs,r.declaredInputs),Sp(t.outputs,r.outputs),Ha(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let o=0;o<a.length;o++){const s=a[o];s&&s.ngInherit&&s(t),s===Gi&&(e=!1)}}n=Object.getPrototypeOf(n)}!function gP(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=Wd(r.hostAttrs,e=Wd(e,r.hostAttrs))}}(i)}function rv(t){return t===dl?{}:t===on?[]:t}function vP(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function mP(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,a)=>{n(i,r,a),e(i,r,a)}:n}function bP(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}let ph=null;function Bl(){if(!ph){const t=Zi.Symbol;if(t&&t.iterator)ph=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<n.length;++e){const i=n[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(ph=i)}}}return ph}function ou(t){return!!av(t)&&(Array.isArray(t)||!(t instanceof Map)&&Bl()in t)}function av(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function vo(t,n,e){return t[n]=e}function su(t,n){return t[n]}function wr(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function Vs(t,n,e,i){const r=wr(t,n,e);return wr(t,n+1,i)||r}function gh(t,n,e,i,r){const a=Vs(t,n,e,i);return wr(t,n+2,r)||a}function Sa(t,n,e,i,r,a){const o=Vs(t,n,e,i);return Vs(t,n+2,r,a)||o}function Yi(t,n,e,i){const r=Pe();return wr(r,ml(),n)&&(xi(),function go(t,n,e,i,r,a){const o=ya(t,n);qg(n[11],o,a,t.value,e,i,r)}(In(),r,t,n,e,i)),Yi}function Ll(t,n,e,i){return wr(t,ml(),e)?n+qt(e)+i:Wt}function Gl(t,n,e,i,r,a,o,s,l,c){const f=Sa(t,Po(),e,r,o,l);return Vo(4),f?n+qt(e)+i+qt(r)+a+qt(o)+s+qt(l)+c:Wt}function x(t,n,e,i,r,a,o,s){const l=Pe(),c=xi(),u=t+20,f=c.firstCreatePass?function RP(t,n,e,i,r,a,o,s,l){const c=n.consts,u=Vl(n,t,4,o||null,is(c,s));$g(n,e,u,is(c,l)),zd(n,u);const f=u.tViews=dh(2,u,i,r,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c);return null!==n.queries&&(n.queries.template(n,u),f.queries=n.queries.embeddedTView(u)),u}(u,c,l,n,e,i,r,a,o):c.data[u];lo(f,!1);const v=l[11].createComment("");oh(c,l,v,f),yr(v,l),hh(l,l[u]=G1(v,l,v,f)),Bd(f)&&zg(c,l,f),null!=o&&jg(l,f,s)}function ot(t){return vl(function qx(){return Lt.lFrame.contextLView}(),20+t)}function V(t,n=Yt.Default){const e=Pe();return null===e?He(t,n):c_(Qn(),e,Jt(t),n)}function uv(){throw new Error("invalid")}function m(t,n,e){const i=Pe();return wr(i,ml(),n)&&oa(xi(),In(),i,t,n,i[11],e,!1),m}function dv(t,n,e,i,r){const o=r?"class":"style";X1(t,e,n.inputs[o],o,i)}function h(t,n,e,i){const r=Pe(),a=xi(),o=20+t,s=r[11],l=r[o]=Tg(s,n,function nk(){return Lt.lFrame.currentNamespace}()),c=a.firstCreatePass?function qP(t,n,e,i,r,a,o){const s=n.consts,c=Vl(n,t,2,r,is(s,a));return $g(n,e,c,is(s,o)),null!==c.attrs&&fh(c,c.attrs,!1),null!==c.mergedAttrs&&fh(c,c.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,c),c}(o,a,r,0,n,e,i):a.data[o];lo(c,!0);const u=c.mergedAttrs;null!==u&&qd(s,l,u);const f=c.classes;null!==f&&Ag(s,l,f);const v=c.styles;return null!==v&&d1(s,l,v),64!=(64&c.flags)&&oh(a,r,l,c),0===function Hx(){return Lt.lFrame.elementDepthCount}()&&yr(l,r),function Gx(){Lt.lFrame.elementDepthCount++}(),Bd(c)&&(zg(a,r,c),function A1(t,n,e){if(Ip(n)){const r=n.directiveEnd;for(let a=n.directiveStart;a<r;a++){const o=t.data[a];o.contentQueries&&o.contentQueries(1,e[a],a)}}}(a,c,r)),null!==i&&jg(r,c),h}function d(){let t=Qn();zp()?jp():(t=t.parent,lo(t,!1));const n=t;!function zx(){Lt.lFrame.elementDepthCount--}();const e=xi();return e.firstCreatePass&&(zd(e,t),Ip(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function lk(t){return 0!=(16&t.flags)}(n)&&dv(e,n,Pe(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function ck(t){return 0!=(32&t.flags)}(n)&&dv(e,n,Pe(),n.stylesWithoutHost,!1),d}function D(t,n,e,i){return h(t,n,e,i),d(),D}function ie(){return Pe()}function lu(t){return!!t&&"function"==typeof t.then}const pv=function Iy(t){return!!t&&"function"==typeof t.subscribe};function A(t,n,e,i){const r=Pe(),a=xi(),o=Qn();return function Ey(t,n,e,i,r,a,o,s){const l=Bd(i),u=t.firstCreatePass&&$1(t),f=n[8],v=j1(n);let b=!0;if(3&i.type||s){const T=ya(i,n),M=s?s(T):T,S=v.length,w=s?B=>s($n(B[i.index])):i.index;if(Vn(e)){let B=null;if(!s&&l&&(B=function XP(t,n,e,i){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const o=r[a];if(o===e&&r[a+1]===i){const s=n[7],l=r[a+2];return s.length>l?s[l]:null}"string"==typeof o&&(a+=2)}return null}(t,n,r,i.index)),null!==B)(B.__ngLastListenerFn__||B).__ngNextListenerFn__=a,B.__ngLastListenerFn__=a,b=!1;else{a=gv(i,n,f,a,!1);const j=e.listen(M,r,a);v.push(a,j),u&&u.push(r,w,S,S+1)}}else a=gv(i,n,f,a,!0),M.addEventListener(r,a,o),v.push(a),u&&u.push(r,w,S,o)}else a=gv(i,n,f,a,!1);const y=i.outputs;let C;if(b&&null!==y&&(C=y[r])){const T=C.length;if(T)for(let M=0;M<T;M+=2){const de=n[C[M]][C[M+1]].subscribe(a),ne=v.length;v.push(a,de),u&&u.push(r,i.index,ne,-(ne+1))}}}(a,r,r[11],o,t,n,!!e,i),A}function Ny(t,n,e,i){try{return!1!==e(i)}catch(r){return W1(t,r),!1}}function gv(t,n,e,i,r){return function a(o){if(o===Function)return i;const s=2&t.flags?ia(t.index,n):n;0==(32&n[2])&&Xg(s);let l=Ny(n,0,i,o),c=a.__ngNextListenerFn__;for(;c;)l=Ny(n,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function _(t=1){return function Kx(t){return(Lt.lFrame.contextLView=function Zx(t,n){for(;t>0;)n=n[15],t--;return n}(t,Lt.lFrame.contextLView))[8]}(t)}function YP(t,n){let e=null;const i=function nA(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(0==(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const a=n[r];if("*"!==a){if(null===i?g1(t,a,!0):oA(i,a))return r}else e=r}return e}function mh(t){const n=Pe()[16][6];if(!n.projection){const i=n.projection=$c(t?t.length:1,null),r=i.slice();let a=n.child;for(;null!==a;){const o=t?YP(a,t):0;null!==o&&(r[o]?r[o].projectionNext=a:i[o]=a,r[o]=a),a=a.next}}}function bh(t,n=0,e){const i=Pe(),r=xi(),a=Vl(r,20+t,16,null,e||null);null===a.projection&&(a.projection=n),jp(),64!=(64&a.flags)&&function QM(t,n,e){u1(n[11],0,n,e,e1(t,e,n),r1(e.parent||n[6],e,n))}(r,i,a)}function Cr(t,n,e){return _h(t,"",n,"",e),Cr}function _h(t,n,e,i,r){const a=Pe(),o=Ll(a,n,e,i);return o!==Wt&&oa(xi(),In(),a,t,o,a[11],r,!1),_h}function $y(t,n,e,i,r){const a=t[e+1],o=null===n;let s=i?za(a):Io(a),l=!1;for(;0!==s&&(!1===l||o);){const u=t[s+1];ZP(t[s],n)&&(l=!0,t[s+1]=i?Ig(u):Pg(u)),s=i?za(u):Io(u)}l&&(t[e+1]=i?Pg(a):Ig(a))}function ZP(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Rl(t,n)>=0}const Zn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qy(t){return t.substring(Zn.key,Zn.keyEnd)}function Wy(t,n){const e=Zn.textEnd;return e===n?-1:(n=Zn.keyEnd=function iV(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,Zn.key=n,e),Xl(t,n,e))}function Xl(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function cu(t,n,e){return $a(t,n,e,!1),cu}function Bt(t,n){return $a(t,n,null,!0),Bt}function ss(t){qa(na,bo,t,!0)}function bo(t,n){for(let e=function eV(t){return function Yy(t){Zn.key=0,Zn.keyEnd=0,Zn.value=0,Zn.valueEnd=0,Zn.textEnd=t.length}(t),Wy(t,Xl(t,0,Zn.textEnd))}(n);e>=0;e=Wy(n,e))na(t,qy(n),!0)}function $a(t,n,e,i){const r=Pe(),a=xi(),o=Vo(2);a.firstUpdatePass&&Jy(a,t,o,i),n!==Wt&&wr(r,o,n)&&tw(a,a.data[Vr()],r,r[11],t,r[o+1]=function hV(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Wi(ra(t)))),t}(n,e),i,o)}function qa(t,n,e,i){const r=xi(),a=Vo(2);r.firstUpdatePass&&Jy(r,null,a,i);const o=Pe();if(e!==Wt&&wr(o,a,e)){const s=r.data[Vr()];if(nw(s,i)&&!Zy(r,a)){let l=i?s.classesWithoutHost:s.stylesWithoutHost;null!==l&&(e=Tp(l,e||"")),dv(r,s,o,e,i)}else!function dV(t,n,e,i,r,a,o,s){r===Wt&&(r=on);let l=0,c=0,u=0<r.length?r[0]:null,f=0<a.length?a[0]:null;for(;null!==u||null!==f;){const v=l<r.length?r[l+1]:void 0,b=c<a.length?a[c+1]:void 0;let C,y=null;u===f?(l+=2,c+=2,v!==b&&(y=f,C=b)):null===f||null!==u&&u<f?(l+=2,y=u):(c+=2,y=f,C=b),null!==y&&tw(t,n,e,i,y,C,o,s),u=l<r.length?r[l]:null,f=c<a.length?a[c]:null}}(r,s,o,o[11],o[a+1],o[a+1]=function uV(t,n,e){if(null==e||""===e)return on;const i=[],r=ra(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(i,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(i,a,r[a]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,a)}}function Zy(t,n){return n>=t.expandoStartIndex}function Jy(t,n,e,i){const r=t.data;if(null===r[e+1]){const a=r[Vr()],o=Zy(t,e);nw(a,i)&&null===n&&!o&&(n=!1),n=function oV(t,n,e,i){const r=function qp(t){const n=Lt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let a=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=uu(e=vv(null,t,n,e,i),n.attrs,i),a=null);else{const o=n.directiveStylingLast;if(-1===o||t[o]!==r)if(e=vv(r,t,n,e,i),null===a){let l=function sV(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==Io(i))return t[za(i)]}(t,n,i);void 0!==l&&Array.isArray(l)&&(l=vv(null,t,n,l[1],i),l=uu(l,n.attrs,i),function lV(t,n,e,i){t[za(e?n.classBindings:n.styleBindings)]=i}(t,n,i,l))}else a=function cV(t,n,e){let i;const r=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<r;a++)i=uu(i,t[a].hostAttrs,e);return uu(i,n.attrs,e)}(t,n,i)}return void 0!==a&&(i?n.residualClasses=a:n.residualStyles=a),e}(r,a,n,i),function QP(t,n,e,i,r,a){let o=a?n.classBindings:n.styleBindings,s=za(o),l=Io(o);t[i]=e;let u,c=!1;if(Array.isArray(e)){const f=e;u=f[1],(null===u||Rl(f,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const v=za(t[s+1]);t[i+1]=lh(v,s),0!==v&&(t[v+1]=Vg(t[v+1],i)),t[s+1]=function uA(t,n){return 131071&t|n<<17}(t[s+1],i)}else t[i+1]=lh(s,0),0!==s&&(t[s+1]=Vg(t[s+1],i)),s=i;else t[i+1]=lh(l,0),0===s?s=i:t[l+1]=Vg(t[l+1],i),l=i;c&&(t[i+1]=Pg(t[i+1])),$y(t,u,i,!0),$y(t,u,i,!1),function KP(t,n,e,i,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof n&&Rl(a,n)>=0&&(e[i+1]=Ig(e[i+1]))}(n,u,t,i,a),o=lh(s,l),a?n.classBindings=o:n.styleBindings=o}(r,a,n,e,o,i)}}function vv(t,n,e,i,r){let a=null;const o=e.directiveEnd;let s=e.directiveStylingLast;for(-1===s?s=e.directiveStart:s++;s<o&&(a=n[s],i=uu(i,a.hostAttrs,r),a!==t);)s++;return null!==t&&(e.directiveStylingLast=s),i}function uu(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let a=0;a<n.length;a++){const o=n[a];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),na(t,o,!!e||n[++a]))}return void 0===t?null:t}function tw(t,n,e,i,r,a,o,s){if(!(3&n.type))return;const l=t.data,c=l[s+1];yh(function y1(t){return 1==(1&t)}(c)?iw(l,n,e,r,Io(c),o):void 0)||(yh(a)||function _1(t){return 2==(2&t)}(c)&&(a=iw(l,null,e,r,s,o)),function ZM(t,n,e,i,r){const a=Vn(t);if(n)r?a?t.addClass(e,i):e.classList.add(i):a?t.removeClass(e,i):e.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:aa.DashCase;if(null==r)a?t.removeStyle(e,i,o):e.style.removeProperty(i);else{const s="string"==typeof r&&r.endsWith("!important");s&&(r=r.slice(0,-10),o|=aa.Important),a?t.setStyle(e,i,r,o):e.style.setProperty(i,r,s?"important":"")}}}(i,o,Fd(Vr(),e),r,a))}function iw(t,n,e,i,r,a){const o=null===n;let s;for(;r>0;){const l=t[r],c=Array.isArray(l),u=c?l[1]:l,f=null===u;let v=e[r+1];v===Wt&&(v=f?on:void 0);let b=f?ng(v,i):u===i?v:void 0;if(c&&!yh(b)&&(b=ng(l,i)),yh(b)&&(s=b,o))return s;const y=t[r+1];r=o?za(y):Io(y)}if(null!==n){let l=a?n.residualClasses:n.residualStyles;null!=l&&(s=ng(l,i))}return s}function yh(t){return void 0!==t}function nw(t,n){return 0!=(t.flags&(n?16:32))}function g(t,n=""){const e=Pe(),i=xi(),r=t+20,a=i.firstCreatePass?Vl(i,r,1,n,null):i.data[r],o=e[r]=Sg(e[11],n);oh(i,e,o,a),lo(a,!1)}function rt(t){return q("",t,""),rt}function q(t,n,e){const i=Pe(),r=Ll(i,t,n,e);return r!==Wt&&Oo(i,Vr(),r),q}function ki(t,n,e,i,r){const a=Pe(),o=function Ul(t,n,e,i,r,a){const s=Vs(t,Po(),e,r);return Vo(2),s?n+qt(e)+i+qt(r)+a:Wt}(a,t,n,e,i,r);return o!==Wt&&Oo(a,Vr(),o),ki}function wh(t,n,e,i,r,a,o){const s=Pe(),l=function Hl(t,n,e,i,r,a,o,s){const c=gh(t,Po(),e,r,o);return Vo(3),c?n+qt(e)+i+qt(r)+a+qt(o)+s:Wt}(s,t,n,e,i,r,a,o);return l!==Wt&&Oo(s,Vr(),l),wh}function mv(t,n,e,i,r,a,o,s,l){const c=Pe(),u=Gl(c,t,n,e,i,r,a,o,s,l);return u!==Wt&&Oo(c,Vr(),u),mv}function bv(t,n,e){qa(na,bo,Ll(Pe(),t,n,e),!0)}function ls(t,n,e){const i=Pe();return wr(i,ml(),n)&&oa(xi(),In(),i,t,n,i[11],e,!0),ls}const Is=void 0;var AV=["en",[["a","p"],["AM","PM"],Is],[["AM","PM"],Is,Is],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Is,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Is,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Is,"{1} 'at' {0}",Is],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function MV(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let Yl={};function Or(t){const n=function PV(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=ww(n);if(e)return e;const i=n.split("-")[0];if(e=ww(i),e)return e;if("en"===i)return AV;throw new Error(`Missing locale data for the locale "${t}".`)}function yw(t){return Or(t)[st.PluralCase]}function ww(t){return t in Yl||(Yl[t]=Zi.ng&&Zi.ng.common&&Zi.ng.common.locales&&Zi.ng.common.locales[t]),Yl[t]}var st=(()=>((st=st||{})[st.LocaleId=0]="LocaleId",st[st.DayPeriodsFormat=1]="DayPeriodsFormat",st[st.DayPeriodsStandalone=2]="DayPeriodsStandalone",st[st.DaysFormat=3]="DaysFormat",st[st.DaysStandalone=4]="DaysStandalone",st[st.MonthsFormat=5]="MonthsFormat",st[st.MonthsStandalone=6]="MonthsStandalone",st[st.Eras=7]="Eras",st[st.FirstDayOfWeek=8]="FirstDayOfWeek",st[st.WeekendRange=9]="WeekendRange",st[st.DateFormat=10]="DateFormat",st[st.TimeFormat=11]="TimeFormat",st[st.DateTimeFormat=12]="DateTimeFormat",st[st.NumberSymbols=13]="NumberSymbols",st[st.NumberFormats=14]="NumberFormats",st[st.CurrencyCode=15]="CurrencyCode",st[st.CurrencySymbol=16]="CurrencySymbol",st[st.CurrencyName=17]="CurrencyName",st[st.Currencies=18]="Currencies",st[st.Directionality=19]="Directionality",st[st.PluralCase=20]="PluralCase",st[st.ExtraData=21]="ExtraData",st))();const VV=["zero","one","two","few","many"],Ch="en-US",Sh={marker:"element"},Th={marker:"ICU"};var On=(()=>((On=On||{})[On.SHIFT=2]="SHIFT",On[On.APPEND_EAGERLY=1]="APPEND_EAGERLY",On[On.COMMENT=2]="COMMENT",On))();let Cw=Ch;function Sw(t,n,e){const i=n.insertBeforeIndex,r=Array.isArray(i)?i[0]:i;return null===r?a1(t,0,e):$n(e[r])}function Tw(t,n,e,i,r){const a=n.insertBeforeIndex;if(Array.isArray(a)){let o=i,s=null;if(3&n.type||(s=o,o=r),null!==o&&0==(2&n.flags))for(let l=1;l<a.length;l++)Ps(t,o,e[a[l]],s,!1)}}function Rw(t,n){if(t.push(n),t.length>1)for(let e=t.length-2;e>=0;e--){const i=t[e];Dw(i)||BV(i,n)&&null===FV(i)&&LV(i,n.index)}}function Dw(t){return!(64&t.type)}function BV(t,n){return Dw(n)||t.index>n.index}function FV(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function LV(t,n){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=n:(s1(Sw,Tw),t.insertBeforeIndex=n)}function du(t,n){const e=t.data[n];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function GV(t,n,e){const i=Gg(t,e,64,null,null);return Rw(n,i),i}function Rh(t,n){const e=n[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function xw(t){return t>>>17}function kw(t){return(131070&t)>>>1}let hu=0,fu=0;function Aw(t,n,e,i){const r=e[11];let o,a=null;for(let s=0;s<n.length;s++){const l=n[s];if("string"==typeof l){const c=n[++s];null===e[c]&&(e[c]=Sg(r,l))}else if("number"==typeof l)switch(1&l){case 0:const c=xw(l);let u,f;if(null===a&&(a=c,o=ah(r,i)),c===a?(u=i,f=o):(u=null,f=$n(e[c])),null!==f){const C=kw(l);Ps(r,f,e[C],u,!1);const M=du(t,C);if(null!==M&&"object"==typeof M){const S=Rh(M,e);null!==S&&Aw(t,M.create[S],e,e[M.anchorIdx])}}break;case 1:const b=n[++s],y=n[++s];qg(r,Fd(l>>>1,e),null,null,b,y,null)}else switch(l){case Th:const c=n[++s],u=n[++s];null===e[u]&&yr(e[u]=LM(r,c),e);break;case Sh:const f=n[++s],v=n[++s];null===e[v]&&yr(e[v]=Tg(r,f,null),e)}}}function Pw(t,n,e,i,r){for(let a=0;a<e.length;a++){const o=e[a],s=e[++a];if(o&r){let l="";for(let c=a+1;c<=a+s;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=qt(n[i-u]);else{const f=u>>>2;switch(3&u){case 1:const v=e[++c],b=e[++c],y=t.data[f];"string"==typeof y?qg(n[11],n[f],null,y,v,l,b):oa(t,y,n,v,l,n[11],b,!1);break;case 0:const C=n[f];null!==C&&K_(n[11],C,l);break;case 2:WV(t,du(t,f),n,l);break;case 3:Vw(t,du(t,f),i,n)}}}}else{const l=e[a+1];if(l>0&&3==(3&l)){const u=du(t,l>>>2);n[u.currentCaseLViewIndex]<0&&Vw(t,u,i,n)}}a+=s}}function Vw(t,n,e,i){let r=i[n.currentCaseLViewIndex];if(null!==r){let a=hu;r<0&&(r=i[n.currentCaseLViewIndex]=~r,a=-1),Pw(t,i,n.update[r],e,a)}}function WV(t,n,e,i){const r=function XV(t,n){let e=t.cases.indexOf(n);if(-1===e)switch(t.type){case 1:{const i=function IV(t,n){const e=yw(n)(parseInt(t,10)),i=VV[e];return void 0!==i?i:"other"}(n,function NV(){return Cw}());e=t.cases.indexOf(i),-1===e&&"other"!==i&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(n,i);if(Rh(n,e)!==r&&(Iw(t,n,e),e[n.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const o=e[n.anchorIdx];o&&Aw(t,n.create[r],e,o)}}function Iw(t,n,e){let i=Rh(n,e);if(null!==i){const r=n.remove[i];for(let a=0;a<r.length;a++){const o=r[a];if(o>0){const s=Fd(o,e);null!==s&&c1(e[11],s)}else Iw(t,du(t,~o),e)}}}function YV(){const t=[];let e,i,n=-1;function a(s,l){n=0;const c=Rh(s,l);i=null!==c?s.remove[c]:on}function o(){if(n<i.length){const s=i[n++];return s>0?e[s]:(t.push(n,i),a(e[1].data[~s],e),o())}return 0===t.length?null:(i=t.pop(),n=t.pop(),o())}return function r(s,l){for(e=l;t.length;)t.pop();return a(s.value,l),o}}const Dh=/\ufffd(\d+):?\d*\ufffd/gi,KV=/\ufffd(\d+)\ufffd/,Ew=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,ZV=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,JV=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,eI=/\uE500/g;function Nw(t,n,e,i,r,a,o){const s=Il(t,i,1,null);let l=s<<On.SHIFT,c=Fc();n===c&&(c=null),null===c&&(l|=On.APPEND_EAGERLY),o&&(l|=On.COMMENT,function FM(t){void 0===_g&&(_g=t())}(YV)),r.push(l,null===a?"":a);const u=Gg(t,s,o?32:1,null===a?"":a,null);Rw(e,u);const f=u.index;return lo(u,!1),null!==c&&n!==c&&function HV(t,n){let e=t.insertBeforeIndex;null===e?(s1(Sw,Tw),e=t.insertBeforeIndex=[null,n]):(function Mo(t,n,e){t!=n&&vn(e,t,n,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(n))}(c,f),u}function nI(t,n,e,i,r,a,o){const s=o.match(Dh),l=Nw(t,n,e,a,i,s?null:o,!1);s&&Ql(r,o,l.index,null,0,null)}function Ql(t,n,e,i,r,a){const o=t.length,s=o+1;t.push(null,null);const l=o+2,c=n.split(Dh);let u=0;for(let f=0;f<c.length;f++){const v=c[f];if(1&f){const b=r+parseInt(v,10);t.push(-1-b),u|=Bw(b)}else""!==v&&t.push(v)}return t.push(e<<2|(i?1:0)),i&&t.push(i,a),t[o]=u,t[s]=t.length-l,u}function Bw(t){return 1<<Math.min(t,31)}function Fw(t){let n,a,e="",i=0,r=!1;for(;null!==(n=ZV.exec(t));)r?n[0]===`\ufffd/*${a}\ufffd`&&(i=n.index,r=!1):(e+=t.substring(i,n.index+n[0].length),a=n[1],r=!0);return e+=t.substr(i),e}function Lw(t,n,e,i,r,a){let o=0;const s={type:r.type,currentCaseLViewIndex:Il(t,n,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};(function dI(t,n,e){t.push(Bw(n.mainBinding),2,-1-n.mainBinding,e<<2|2)})(e,r,a),function UV(t,n,e){const i=t.data[n];null===i?t.data[n]=e:i.value=e}(t,a,s);const l=r.values;for(let c=0;c<l.length;c++){const u=l[c],f=[];for(let v=0;v<u.length;v++){const b=u[v];if("string"!=typeof b){const y=f.push(b)-1;u[v]=`\x3c!--\ufffd${y}\ufffd--\x3e`}}o=cI(t,s,n,e,i,r.cases[c],u.join(""),f)|o}o&&function hI(t,n,e){t.push(n,1,e<<2|3)}(e,o,a)}function lI(t){const n=[],e=[];let i=1,r=0;const a=_v(t=t.replace(Ew,function(o,s,l){return i="select"===l?0:1,r=parseInt(s.substr(1),10),""}));for(let o=0;o<a.length;){let s=a[o++].trim();1===i&&(s=s.replace(/\s*(?:=)?(\w+)\s*/,"$1")),s.length&&n.push(s);const l=_v(a[o++]);n.length>e.length&&e.push(l)}return{type:i,mainBinding:r,cases:n,values:e}}function _v(t){if(!t)return[];let n=0;const e=[],i=[],r=/[{}]/g;let a;for(r.lastIndex=0;a=r.exec(t);){const s=a.index;if("}"==a[0]){if(e.pop(),0==e.length){const l=t.substring(n,s);Ew.test(l)?i.push(lI(l)):i.push(l),n=s+1}}else{if(0==e.length){const l=t.substring(n,s);i.push(l),n=s+1}e.push("{")}}const o=t.substring(n);return i.push(o),i}function cI(t,n,e,i,r,a,o,s){const l=[],c=[],u=[];n.cases.push(a),n.create.push(l),n.remove.push(c),n.update.push(u);const v=A_(Lp()).getInertBodyElement(o),b=fg(v)||v;return b?Uw(t,n,e,i,l,c,u,b,r,s,0):0}function Uw(t,n,e,i,r,a,o,s,l,c,u){let f=0,v=s.firstChild;for(;v;){const b=Il(t,e,1,null);switch(v.nodeType){case Node.ELEMENT_NODE:const y=v,C=y.tagName.toLowerCase();if(ug.hasOwnProperty(C)){yv(r,Sh,C,l,b),t.data[b]=C;const w=y.attributes;for(let B=0;B<w.length;B++){const j=w.item(B),de=j.name.toLowerCase();j.value.match(Dh)?E_.hasOwnProperty(de)&&Ql(o,j.value,b,j.name,0,dg[de]?Kc:hg[de]?P_:null):fI(r,b,j)}f=Uw(t,n,e,i,r,a,o,v,b,c,u+1)|f,Hw(a,b,u)}break;case Node.TEXT_NODE:const T=v.textContent||"",M=T.match(Dh);yv(r,null,M?"":T,l,b),Hw(a,b,u),M&&(f=Ql(o,T,b,null,0,null)|f);break;case Node.COMMENT_NODE:const S=KV.exec(v.textContent||"");if(S){const B=c[parseInt(S[1],10)];yv(r,Th,"",l,b),Lw(t,e,i,l,B,b),uI(a,b,u)}}v=v.nextSibling}return f}function Hw(t,n,e){0===e&&t.push(n)}function uI(t,n,e){0===e&&(t.push(~n),t.push(n))}function yv(t,n,e,i,r){null!==n&&t.push(n),t.push(e,r,function zV(t,n,e){return t|n<<17|e<<1}(0,i,r))}function fI(t,n,e){t.push(n<<1|1,e.name,e.value)}function zw(t,n,e=-1){const i=xi(),r=Pe(),a=20+t,o=is(i.consts,n),s=Fc();i.firstCreatePass&&function iI(t,n,e,i,r,a){const o=Fc(),s=[],l=[],c=[[]];r=function sI(t,n){if(function oI(t){return-1===t}(n))return Fw(t);{const e=t.indexOf(`:${n}\ufffd`)+2+n.toString().length,i=t.search(new RegExp(`\ufffd\\/\\*\\d+:${n}\ufffd`));return Fw(t.substring(e,i))}}(r,a);const u=function tI(t){return t.replace(eI," ")}(r).split(JV);for(let f=0;f<u.length;f++){let v=u[f];if(0==(1&f)){const b=_v(v);for(let y=0;y<b.length;y++){let C=b[y];if(0==(1&y)){const T=C;""!==T&&nI(t,o,c[0],s,l,e,T)}else{const T=C;if("object"!=typeof T)throw new Error(`Unable to parse ICU expression in "${r}" message.`);Lw(t,e,l,n,T,Nw(t,o,c[0],e,s,"",!0).index)}}}else{const b=47===v.charCodeAt(0),C=(v.charCodeAt(b?1:0),20+Number.parseInt(v.substring(b?2:1)));if(b)c.shift(),lo(Fc(),!1);else{const T=GV(t,c[0],C);c.unshift([]),lo(T,!0)}}}t.data[i]={create:s,update:l}}(i,null===s?0:s.index,r,a,o,e);const l=i.data[a],u=t1(i,s===r[6]?null:s,r);(function qV(t,n,e,i){const r=t[11];for(let a=0;a<n.length;a++){const o=n[a++],s=n[a],l=(o&On.COMMENT)===On.COMMENT,c=(o&On.APPEND_EAGERLY)===On.APPEND_EAGERLY,u=o>>>On.SHIFT;let f=t[u];null===f&&(f=t[u]=l?r.createComment(s):Sg(r,s)),c&&null!==e&&Ps(r,e,f,i,!1)}})(r,l.create,u,s&&8&s.type?r[s.index]:null),Xb(!0)}function Eo(t,n,e){zw(t,n,e),function jw(){Xb(!1)}()}function xh(t){return function jV(t){t&&(hu|=1<<Math.min(fu,31)),fu++}(wr(Pe(),ml(),t)),xh}function Cv(t,n,e,i,r){if(t=Jt(t),Array.isArray(t))for(let a=0;a<t.length;a++)Cv(t[a],n,e,i,r);else{const a=xi(),o=Pe();let s=Nl(t)?t:Jt(t.provide),l=J1(t);const c=Qn(),u=1048575&c.providerIndexes,f=c.directiveStart,v=c.providerIndexes>>20;if(Nl(t)||!t.multi){const b=new Lc(l,r,V),y=Tv(s,n,r?u:u+v,f);-1===y?(Qd(Hc(c,o),a,s),Sv(a,t,n.length),n.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(b),o.push(b)):(e[y]=b,o[y]=b)}else{const b=Tv(s,n,u+v,f),y=Tv(s,n,u,u+v),C=b>=0&&e[b],T=y>=0&&e[y];if(r&&!T||!r&&!C){Qd(Hc(c,o),a,s);const M=function xI(t,n,e,i,r){const a=new Lc(t,e,V);return a.multi=[],a.index=n,a.componentProviders=0,$w(a,r,i&&!e),a}(r?DI:RI,e.length,r,i,l);!r&&T&&(e[y].providerFactory=M),Sv(a,t,n.length,0),n.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(M),o.push(M)}else Sv(a,t,b>-1?b:y,$w(e[r?y:b],l,!r&&i));!r&&i&&T&&e[y].componentProviders++}}}function Sv(t,n,e,i){const r=Nl(n),a=function nP(t){return!!t.useClass}(n);if(r||a){const l=(a?Jt(n.useClass):n).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function $w(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function Tv(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function RI(t,n,e,i){return Rv(this.multi,[])}function DI(t,n,e,i){const r=this.multi;let a;if(this.providerFactory){const o=this.providerFactory.componentProviders,s=Gc(e,e[1],this.providerFactory.index,i);a=s.slice(0,o),Rv(r,a);for(let l=o;l<s.length;l++)a.push(s[l])}else a=[],Rv(r,a);return a}function Rv(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function sn(t,n=[]){return e=>{e.providersResolver=(i,r)=>function TI(t,n,e){const i=xi();if(i.firstCreatePass){const r=Ha(t);Cv(e,i.data,i.blueprint,r,!0),Cv(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class qw{}class AI{resolveComponentFactory(n){throw function MI(t){const n=Error(`No component factory found for ${Wi(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Os=(()=>{class t{}return t.NULL=new AI,t})();function PI(){return Kl(Qn(),Pe())}function Kl(t,n){return new Mi(ya(t,n))}let Mi=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=PI,t})();function VI(t){return t instanceof Mi?t.nativeElement:t}class Dv{}let Ta=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function OI(){const t=Pe(),e=ia(Qn().index,t);return function II(t){return t[11]}(so(e)?e:t)}(),t})(),EI=(()=>{class t{}return t.\u0275prov=gt({token:t,providedIn:"root",factory:()=>null}),t})();class gu{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const NI=new gu("13.2.3"),xv={};function kh(t,n,e,i,r=!1){for(;null!==e;){const a=n[e.index];if(null!==a&&i.push($n(a)),Ua(a))for(let s=10;s<a.length;s++){const l=a[s],c=l[1].firstChild;null!==c&&kh(l[1],l,c,i)}const o=e.type;if(8&o)kh(t,n,e.child,i);else if(32&o){const s=yg(e,n);let l;for(;l=s();)i.push(l)}else if(16&o){const s=l1(n,e);if(Array.isArray(s))i.push(...s);else{const l=tu(n[16]);kh(l[1],l,s,i,!0)}}e=r?e.projectionNext:e.next}return i}class vu{constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,e=n[1];return kh(e,n,e.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Ua(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(Rg(n,i),Zd(e,i))}this._attachedToViewContainer=!1}J_(this._lView[1],this._lView)}onDestroy(n){O1(this._lView[1],this._lView,null,n)}markForCheck(){Xg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Qg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function qA(t,n,e){Ud(!0);try{Qg(t,n,e)}finally{Ud(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Di(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function GM(t,n){iu(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Di(902,"");this._appRef=n}}class BI extends vu{constructor(n){super(n),this._view=n}detectChanges(){z1(this._view)}checkNoChanges(){!function WA(t){Ud(!0);try{z1(t)}finally{Ud(!1)}}(this._view)}get context(){return null}}class Xw extends Os{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=mr(n);return new kv(e,this.ngModule)}}function Yw(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}const LI=new si("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>$_});class kv extends qw{constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function lA(t){return t.map(sA).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Yw(this.componentDef.inputs)}get outputs(){return Yw(this.componentDef.outputs)}create(n,e,i,r){const a=(r=r||this.ngModule)?function UI(t,n){return{get:(e,i,r)=>{const a=t.get(e,xv,r);return a!==xv||i===xv?a:n.get(e,i,r)}}}(n,r.injector):n,o=a.get(Dv,Gb),s=a.get(EI,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function I1(t,n,e){if(Vn(t))return t.selectRootElement(n,e===oo.ShadowDom);let i="string"==typeof n?t.querySelector(n):n;return i.textContent="",i}(l,i,this.componentDef.encapsulation):Tg(o.createRenderer(null,this.componentDef),c,function FI(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(c)),f=this.componentDef.onPush?576:528,v=function dy(t,n){return{components:[],scheduler:t||$_,clean:XA,playerHandler:n||null,flags:0}}(),b=dh(0,null,null,1,0,null,null,null,null,null),y=nu(null,b,v,f,null,null,o,l,s,a);let C,T;Hd(y);try{const M=function cy(t,n,e,i,r,a){const o=e[1];e[20]=t;const l=Vl(o,20,2,"#host",null),c=l.mergedAttrs=n.hostAttrs;null!==c&&(fh(l,c,!0),null!==t&&(qd(r,t,c),null!==l.classes&&Ag(r,t,l.classes),null!==l.styles&&d1(r,t,l.styles)));const u=i.createRenderer(t,n),f=nu(e,P1(n),null,n.onPush?64:16,e[20],l,i,u,a||null,null);return o.firstCreatePass&&(Qd(Hc(l,e),o,n.type),L1(o,l),U1(l,e.length,1)),hh(e,f),e[20]=f}(u,this.componentDef,y,o,l);if(u)if(i)qd(l,u,["ng-version",NI.full]);else{const{attrs:S,classes:w}=function cA(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let a=t[i];if("string"==typeof a)2===r?""!==a&&n.push(a,t[++i]):8===r&&e.push(a);else{if(!Ga(r))break;r=a}i++}return{attrs:n,classes:e}}(this.componentDef.selectors[0]);S&&qd(l,u,S),w&&w.length>0&&Ag(l,u,w.join(" "))}if(T=Up(b,20),void 0!==e){const S=T.projection=[];for(let w=0;w<this.ngContentSelectors.length;w++){const B=e[w];S.push(null!=B?Array.from(B):null)}}C=function uy(t,n,e,i,r){const a=e[1],o=function AA(t,n,e){const i=Qn();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),H1(t,i,n,Il(t,n,1,null),e));const r=Gc(n,t,i.directiveStart,i);yr(r,n);const a=ya(i,n);return a&&yr(a,n),r}(a,e,n);if(i.components.push(o),t[8]=o,r&&r.forEach(l=>l(o,n)),n.contentQueries){const l=Qn();n.contentQueries(1,o,l.directiveStart)}const s=Qn();return!a.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(ns(s.index),B1(e[1],s,0,s.directiveStart,s.directiveEnd,n),F1(n,o)),o}(M,this.componentDef,y,v,[pP]),ru(b,y,null)}finally{Gd()}return new GI(this.componentType,C,Kl(T,y),y,T)}}class GI extends class kI{}{constructor(n,e,i,r,a){super(),this.location=i,this._rootLView=r,this._tNode=a,this.instance=e,this.hostView=this.changeDetectorRef=new BI(r),this.componentType=n}get injector(){return new yl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class No{}class Qw{}const Zl=new Map;class Jw extends No{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Xw(this);const i=ma(n);this._bootstrapComponents=po(i.bootstrap),this._r3Injector=Z1(n,e,[{provide:No,useValue:this},{provide:Os,useValue:this.componentFactoryResolver}],Wi(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,e=Ln.THROW_IF_NOT_FOUND,i=Yt.Default){return n===Ln||n===No||n===Zg?this:this._r3Injector.get(n,e,i)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Mv extends Qw{constructor(n){super(),this.moduleType=n,null!==ma(n)&&function jI(t){const n=new Set;!function e(i){const r=ma(i,!0),a=r.id;null!==a&&(function Kw(t,n,e){if(n&&n!==e)throw new Error(`Duplicate module registered for ${t} - ${Wi(n)} vs ${Wi(n.name)}`)}(a,Zl.get(a),i),Zl.set(a,i));const o=po(r.imports);for(const s of o)n.has(s)||(n.add(s),e(s))}(t)}(n)}create(n){return new Jw(this.moduleType,n)}}function mu(t,n,e){const i=Pr()+t,r=Pe();return r[i]===Wt?vo(r,i,e?n.call(e):n()):su(r,i)}function yt(t,n,e,i){return tC(Pe(),Pr(),t,n,e,i)}function cs(t,n,e,i,r){return iC(Pe(),Pr(),t,n,e,i,r)}function bu(t,n){const e=t[n];return e===Wt?void 0:e}function tC(t,n,e,i,r,a){const o=n+e;return wr(t,o,r)?vo(t,o+1,a?i.call(a,r):i(r)):bu(t,o+1)}function iC(t,n,e,i,r,a,o){const s=n+e;return Vs(t,s,r,a)?vo(t,s+2,o?i.call(o,r,a):i(r,a)):bu(t,s+2)}function nC(t,n,e,i,r,a,o,s){const l=n+e;return gh(t,l,r,a,o)?vo(t,l+3,s?i.call(s,r,a,o):i(r,a,o)):bu(t,l+3)}function Vt(t,n){const e=xi();let i;const r=t+20;e.firstCreatePass?(i=function QI(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const a=i.factory||(i.factory=ks(i.type)),o=Jo(V);try{const s=Xd(!1),l=a();return Xd(s),function DP(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,Pe(),r,l),l}finally{Jo(o)}}function Ah(t,n,e){const i=t+20,r=Pe(),a=vl(r,i);return yu(r,i)?tC(r,Pr(),n,a.transform,e,a):a.transform(e)}function Qt(t,n,e,i){const r=t+20,a=Pe(),o=vl(a,r);return yu(a,r)?iC(a,Pr(),n,o.transform,e,i,o):o.transform(e,i)}function _u(t,n,e,i,r){const a=t+20,o=Pe(),s=vl(o,a);return yu(o,a)?nC(o,Pr(),n,s.transform,e,i,r,s):s.transform(e,i,r)}function yu(t,n){return t[1].data[n].pure}function Av(t){return n=>{setTimeout(t,void 0,n)}}const bt=class JI extends Te{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){var r,a,o;let s=n,l=e||(()=>null),c=i;if(n&&"object"==typeof n){const f=n;s=null===(r=f.next)||void 0===r?void 0:r.bind(f),l=null===(a=f.error)||void 0===a?void 0:a.bind(f),c=null===(o=f.complete)||void 0===o?void 0:o.bind(f)}this.__isAsync&&(l=Av(l),s&&(s=Av(s)),c&&(c=Av(c)));const u=super.subscribe({next:s,error:l,complete:c});return n instanceof _e&&n.add(u),u}};function eO(){return this._results[Bl()]()}class Pv{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Bl(),i=Pv.prototype;i[e]||(i[e]=eO)}get changes(){return this._changes||(this._changes=new bt)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=wa(n);(this._changesDetected=!function _k(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],a=n[i];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let wn=(()=>{class t{}return t.__NG_ELEMENT_ID__=nO,t})();const tO=wn,iO=class extends tO{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(n){const e=this._declarationTContainer.tViews,i=nu(this._declarationLView,e,n,16,null,e.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(e)),ru(e,i,n),new vu(i)}};function nO(){return Ph(Qn(),Pe())}function Ph(t,n){return 4&t.type?new iO(n,t,Kl(t,n)):null}let Ra=(()=>{class t{}return t.__NG_ELEMENT_ID__=rO,t})();function rO(){return lC(Qn(),Pe())}const aO=Ra,oC=class extends aO{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return Kl(this._hostTNode,this._hostLView)}get injector(){return new yl(this._hostTNode,this._hostLView)}get parentInjector(){const n=Yd(this._hostTNode,this._hostLView);if(r_(n)){const e=_l(n,this._hostLView),i=bl(n);return new yl(e[1].data[i+8],e)}return new yl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=sC(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,e,i){const r=n.createEmbeddedView(e||{});return this.insert(r,i),r}createComponent(n,e,i,r,a){const o=n&&!function jc(t){return"function"==typeof t}(n);let s;if(o)s=e;else{const f=e||{};s=f.index,i=f.injector,r=f.projectableNodes,a=f.ngModuleRef}const l=o?n:new kv(mr(n)),c=i||this.parentInjector;if(!a&&null==l.ngModule){const v=(o?c:this.parentInjector).get(No,null);v&&(a=v)}const u=l.create(c,r,void 0,a);return this.insert(u.hostView,s),u}insert(n,e){const i=n._lView,r=i[1];if(function Ux(t){return Ua(t[3])}(i)){const u=this.indexOf(n);if(-1!==u)this.detach(u);else{const f=i[3],v=new oC(f,f[6],f[3]);v.detach(v.indexOf(n))}}const a=this._adjustIndex(e),o=this._lContainer;!function jM(t,n,e,i){const r=10+i,a=e.length;i>0&&(e[r-1][4]=n),i<a-10?(n[4]=e[r],p_(e,10+i,n)):(e.push(n),n[4]=null),n[3]=e;const o=n[17];null!==o&&e!==o&&function $M(t,n){const e=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===e?t[9]=[n]:e.push(n)}(o,n);const s=n[19];null!==s&&s.insertView(t),n[2]|=128}(r,i,o,a);const s=kg(a,o),l=i[11],c=ah(l,o[7]);return null!==c&&function HM(t,n,e,i,r,a){i[0]=r,i[6]=n,iu(t,i,e,1,r,a)}(r,o[6],l,i,c,s),n.attachToViewContainerRef(),p_(Vv(o),a,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=sC(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=Rg(this._lContainer,e);i&&(Zd(Vv(this._lContainer),e),J_(i[1],i))}detach(n){const e=this._adjustIndex(n,-1),i=Rg(this._lContainer,e);return i&&null!=Zd(Vv(this._lContainer),e)?new vu(i):null}_adjustIndex(n,e=0){return null==n?this.length+e:n}};function sC(t){return t[8]}function Vv(t){return t[8]||(t[8]=[])}function lC(t,n){let e;const i=n[t.index];if(Ua(i))e=i;else{let r;if(8&t.type)r=$n(i);else{const a=n[11];r=a.createComment("");const o=ya(t,n);Ps(a,ah(a,o),r,function YM(t,n){return Vn(t)?t.nextSibling(n):n.nextSibling}(a,o),!1)}n[t.index]=e=G1(i,n,r,t),hh(n,e)}return new oC(e,t,n)}class Iv{constructor(n){this.queryList=n,this.matches=null}clone(){return new Iv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ov{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let a=0;a<i;a++){const o=e.getByIndex(a);r.push(this.queries[o.indexInDeclarationView].clone())}return new Ov(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==fC(n,e).matches&&this.queries[e].setDirty()}}class cC{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class Ev{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,a=this.getByIndex(i).embeddedTView(n,r);a&&(a.indexInDeclarationView=i,null!==e?e.push(a):e=[a])}return null!==e?new Ev(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Nv{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new Nv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=i[r];this.matchTNodeWithReadOption(n,e,lO(e,a)),this.matchTNodeWithReadOption(n,e,Kd(e,n,a,!1,!1))}else i===wn?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Kd(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Mi||r===Ra||r===wn&&4&e.type)this.addMatch(e.index,-2);else{const a=Kd(e,n,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function lO(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function uO(t,n,e,i){return-1===e?function cO(t,n){return 11&t.type?Kl(t,n):4&t.type?Ph(t,n):null}(n,t):-2===e?function dO(t,n,e){return e===Mi?Kl(n,t):e===wn?Ph(n,t):e===Ra?lC(n,t):void 0}(t,n,i):Gc(t,t[1],e,n)}function uC(t,n,e,i){const r=n[19].queries[i];if(null===r.matches){const a=t.data,o=e.matches,s=[];for(let l=0;l<o.length;l+=2){const c=o[l];s.push(c<0?null:uO(n,a[c],o[l+1],e.metadata.read))}r.matches=s}return r.matches}function Bv(t,n,e,i){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const o=uC(t,n,r,e);for(let s=0;s<a.length;s+=2){const l=a[s];if(l>0)i.push(o[s/2]);else{const c=a[s+1],u=n[-l];for(let f=10;f<u.length;f++){const v=u[f];v[17]===v[3]&&Bv(v[1],v,c,i)}if(null!==u[9]){const f=u[9];for(let v=0;v<f.length;v++){const b=f[v];Bv(b[1],b,c,i)}}}}}return i}function yi(t){const n=Pe(),e=xi(),i=Yb();Wp(i+1);const r=fC(e,i);if(t.dirty&&zb(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?Bv(e,n,i,[]):uC(e,n,r,i);t.reset(a,VI),t.notifyOnChanges()}return!0}return!1}function Sr(t,n,e){const i=xi();i.firstCreatePass&&(hC(i,new cC(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),dC(i,Pe(),n)}function Un(t,n,e,i){const r=xi();if(r.firstCreatePass){const a=Qn();hC(r,new cC(n,e,i),a.index),function fO(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}dC(r,Pe(),e)}function wi(){return function hO(t,n){return t[19].queries[n].queryList}(Pe(),Yb())}function dC(t,n,e){const i=new Pv(4==(4&e));O1(t,n,i,i.destroy),null===n[19]&&(n[19]=new Ov),n[19].queries.push(new Iv(i))}function hC(t,n,e){null===t.queries&&(t.queries=new Ev),t.queries.track(new Nv(n,e))}function fC(t,n){return t.queries.getByIndex(n)}function dt(t,n){return Ph(t,n)}function Oh(...t){}const Eh=new si("Application Initializer");let ec=(()=>{class t{constructor(e){this.appInits=e,this.resolve=Oh,this.reject=Oh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const a=this.appInits[r]();if(lu(a))e.push(a);else if(pv(a)){const o=new Promise((s,l)=>{a.subscribe({complete:s,error:l})});e.push(o)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(He(Eh,8))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();const Cu=new si("AppId"),PO={provide:Cu,useFactory:function AO(){return`${zv()}${zv()}${zv()}`},deps:[]};function zv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const AC=new si("Platform Initializer"),Nh=new si("Platform ID"),PC=new si("appBootstrapListener");let VC=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();const us=new si("LocaleId"),IC=new si("DefaultCurrencyCode");class VO{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let Bh=(()=>{class t{compileModuleSync(e){return new Mv(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),a=po(ma(e).declarations).reduce((o,s)=>{const l=mr(s);return l&&o.push(new kv(l)),o},[]);return new VO(i,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();const OO=(()=>Promise.resolve(0))();function jv(t){"undefined"==typeof Zone?OO.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ln{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bt(!1),this.onMicrotaskEmpty=new bt(!1),this.onStable=new bt(!1),this.onError=new bt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function EO(){let t=Zi.requestAnimationFrame,n=Zi.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function FO(t){const n=()=>{!function BO(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Zi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,qv(t),t.isCheckStableRunning=!0,$v(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),qv(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,a,o,s)=>{try{return OC(t),e.invokeTask(r,a,o,s)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&n(),EC(t)}},onInvoke:(e,i,r,a,o,s,l)=>{try{return OC(t),e.invoke(r,a,o,s,l)}finally{t.shouldCoalesceRunChangeDetection&&n(),EC(t)}},onHasTask:(e,i,r,a)=>{e.hasTask(r,a),i===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,qv(t),$v(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,i,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ln.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ln.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const a=this._inner,o=a.scheduleEventTask("NgZoneEvent: "+r,n,NO,Oh,Oh);try{return a.runTask(o,e,i)}finally{a.cancelTask(o)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const NO={};function $v(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function qv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function OC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function EC(t){t._nesting--,$v(t)}class LO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bt,this.onMicrotaskEmpty=new bt,this.onStable=new bt,this.onError=new bt}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}let Wv=(()=>{class t{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ln.assertNotInAngularZone(),jv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())jv(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==a),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,i,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(He(ln))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})(),NC=(()=>{class t{constructor(){this._applications=new Map,Xv.addToWindow(this)}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Xv.findTestabilityInTree(this,e,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();class UO{addToWindow(n){}findTestabilityInTree(n,e,i){return null}}let Wa,Xv=new UO;const BC=new si("AllowMultipleToken");class FC{constructor(n,e){this.name=n,this.token=e}}function LC(t,n,e=[]){const i=`Platform: ${n}`,r=new si(i);return(a=[])=>{let o=UC();if(!o||o.injector.get(BC,!1))if(t)t(e.concat(a).concat({provide:r,useValue:!0}));else{const s=e.concat(a).concat({provide:r,useValue:!0},{provide:Jg,useValue:"platform"});!function jO(t){if(Wa&&!Wa.destroyed&&!Wa.injector.get(BC,!1))throw new Di(400,"");Wa=t.get(HC);const n=t.get(AC,null);n&&n.forEach(e=>e())}(Ln.create({providers:s,name:i}))}return function $O(t){const n=UC();if(!n)throw new Di(401,"");return n}()}}function UC(){return Wa&&!Wa.destroyed?Wa:null}let HC=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const s=function qO(t,n){let e;return e="noop"===t?new LO:("zone.js"===t?void 0:t)||new ln({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),e}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:ln,useValue:s}];return s.run(()=>{const c=Ln.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),f=u.injector.get(Ml,null);if(!f)throw new Di(402,"");return s.runOutsideAngular(()=>{const v=s.onError.subscribe({next:b=>{f.handleError(b)}});u.onDestroy(()=>{Yv(this._modules,u),v.unsubscribe()})}),function WO(t,n,e){try{const i=e();return lu(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(f,s,()=>{const v=u.injector.get(ec);return v.runInitializers(),v.donePromise.then(()=>(function EV(t){(function ea(t,n){null==t&&vn(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(Cw=t.toLowerCase().replace(/_/g,"-"))}(u.injector.get(us,Ch)||Ch),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,i=[]){const r=GC({},i);return function GO(t,n,e){const i=new Mv(e);return Promise.resolve(i)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const i=e.injector.get(Es);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new Di(403,"");e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Di(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(He(Ln))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();function GC(t,n){return Array.isArray(n)?n.reduce(GC,t):Object.assign(Object.assign({},t),n)}let Es=(()=>{class t{constructor(e,i,r,a,o){this._zone=e,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new $e(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new $e(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{ln.assertNotInAngularZone(),jv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const f=this._zone.onUnstable.subscribe(()=>{ln.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),f.unsubscribe()}});this.isStable=Db(s,l.pipe(xb()))}bootstrap(e,i){if(!this._initStatus.done)throw new Di(405,"");let r;r=e instanceof qw?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const a=function zO(t){return t.isBoundToModule}(r)?void 0:this._injector.get(No),s=r.create(Ln.NULL,[],i||r.selector,a),l=s.location.nativeElement,c=s.injector.get(Wv,null),u=c&&s.injector.get(NC);return c&&u&&u.registerApplication(l,c),s.onDestroy(()=>{this.detachView(s.hostView),Yv(this.components,s),u&&u.unregisterApplication(l)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new Di(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Yv(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(PC,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(He(ln),He(Ln),He(Ml),He(Os),He(ec))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();function Yv(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let jC=!0,sa=(()=>{class t{}return t.__NG_ELEMENT_ID__=QO,t})();function QO(t){return function KO(t,n,e){if(Nd(t)&&!e){const i=ia(t.index,n);return new vu(i,i)}return 47&t.type?new vu(n[16],n):null}(Qn(),Pe(),16==(16&t))}class YC{constructor(){}supports(n){return ou(n)}create(n){return new nE(n)}}const iE=(t,n)=>n;class nE{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||iE}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,a=null;for(;e||i;){const o=!i||e&&e.currentIndex<KC(i,r,a)?e:i,s=KC(o,r,a),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{a||(a=[]);const c=s-r,u=l-r;if(c!=u){for(let v=0;v<c;v++){const b=v<a.length?a[v]:a[v]=0,y=b+v;u<=y&&y<c&&(a[v]=b+1)}a[o.previousIndex]=u-c}}s!==l&&n(o,s,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!ou(n))throw new Di(900,"");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,a,o,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let s=0;s<this.length;s++)a=n[s],o=this._trackByFn(s,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,s),i=!0),e=e._next}else r=0,function TP(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Bl()]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,s=>{o=this._trackByFn(r,s),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,s,o,r)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,a,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,a,r)):n=this._addAfter(new rE(e,i),a,r),n}_verifyReinsertion(n,e,i,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==a?n=this._reinsertAfter(a,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,a=n._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new QC),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new QC),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class rE{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class aE{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class QC{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new aE,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function KC(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}class ZC{constructor(){}supports(n){return n instanceof Map||av(n)}create(){return new oE}}class oE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||av(n)))throw new Di(900,"")}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const a=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,a)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,e);const a=r._prev,o=r._next;return a&&(a._next=o),o&&(o._prev=a),r._next=null,r._prev=null,r}const i=new sE(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}}class sE{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function JC(){return new Su([new YC])}let Su=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||JC()),deps:[[t,new Dl,new uo]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new Di(901,"")}}return t.\u0275prov=gt({token:t,providedIn:"root",factory:JC}),t})();function eS(){return new tc([new ZC])}let tc=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||eS()),deps:[[t,new Dl,new uo]]}}find(e){const i=this.factories.find(a=>a.supports(e));if(i)return i;throw new Di(901,"")}}return t.\u0275prov=gt({token:t,providedIn:"root",factory:eS}),t})();const lE=[new ZC],uE=new Su([new YC]),dE=new tc(lE),hE=LC(null,"core",[{provide:Nh,useValue:"unknown"},{provide:HC,deps:[Ln]},{provide:NC,deps:[]},{provide:VC,deps:[]}]),mE=[{provide:Es,useClass:Es,deps:[ln,Ln,Ml,Os,ec]},{provide:LI,deps:[ln],useFactory:function bE(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(e){n.push(e)}}},{provide:ec,useClass:ec,deps:[[new uo,Eh]]},{provide:Bh,useClass:Bh,deps:[]},PO,{provide:Su,useFactory:function fE(){return uE},deps:[]},{provide:tc,useFactory:function pE(){return dE},deps:[]},{provide:us,useFactory:function gE(t){return t||function vE(){return"undefined"!=typeof $localize&&$localize.locale||Ch}()},deps:[[new Yc(us),new uo,new Dl]]},{provide:IC,useValue:"USD"}];let _E=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(He(Es))},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({providers:mE}),t})(),Uh=null;function _o(){return Uh}const qn=new si("DocumentToken");let Bs=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:function(){return function SE(){return He(tS)}()},providedIn:"platform"}),t})();const TE=new si("Location Initialized");let tS=(()=>{class t extends Bs{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _o().getBaseHref(this._doc)}onPopState(e){const i=_o().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=_o().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){iS()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){iS()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(He(qn))},t.\u0275prov=gt({token:t,factory:function(){return function RE(){return new tS(He(qn))}()},providedIn:"platform"}),t})();function iS(){return!!window.history.pushState}function em(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function nS(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Bo(t){return t&&"?"!==t[0]?"?"+t:t}let ic=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:function(){return function DE(t){const n=He(qn).location;return new rS(He(Bs),n&&n.origin||"")}()},providedIn:"root"}),t})();const tm=new si("appBaseHref");let rS=(()=>{class t extends ic{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return em(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Bo(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,a){const o=this.prepareExternalUrl(r+Bo(a));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,a){const o=this.prepareExternalUrl(r+Bo(a));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(He(Bs),He(tm,8))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})(),xE=(()=>{class t extends ic{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=em(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,a){let o=this.prepareExternalUrl(r+Bo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,a){let o=this.prepareExternalUrl(r+Bo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(He(Bs),He(tm,8))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})(),im=(()=>{class t{constructor(e,i){this._subject=new bt,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=nS(aS(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Bo(i))}normalize(e){return t.stripTrailingSlash(function ME(t,n){return t&&n.startsWith(t)?n.substring(t.length):n}(this._baseHref,aS(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Bo(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Bo(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return t.normalizeQueryParams=Bo,t.joinWithSlash=em,t.stripTrailingSlash=nS,t.\u0275fac=function(e){return new(e||t)(He(ic),He(Bs))},t.\u0275prov=gt({token:t,factory:function(){return function kE(){return new im(He(ic),He(Bs))}()},providedIn:"root"}),t})();function aS(t){return t.replace(/\/index.html$/,"")}var Xr=(()=>((Xr=Xr||{})[Xr.Decimal=0]="Decimal",Xr[Xr.Percent=1]="Percent",Xr[Xr.Currency=2]="Currency",Xr[Xr.Scientific=3]="Scientific",Xr))(),Wn=(()=>((Wn=Wn||{})[Wn.Zero=0]="Zero",Wn[Wn.One=1]="One",Wn[Wn.Two=2]="Two",Wn[Wn.Few=3]="Few",Wn[Wn.Many=4]="Many",Wn[Wn.Other=5]="Other",Wn))(),Mt=(()=>((Mt=Mt||{})[Mt.Decimal=0]="Decimal",Mt[Mt.Group=1]="Group",Mt[Mt.List=2]="List",Mt[Mt.PercentSign=3]="PercentSign",Mt[Mt.PlusSign=4]="PlusSign",Mt[Mt.MinusSign=5]="MinusSign",Mt[Mt.Exponential=6]="Exponential",Mt[Mt.SuperscriptingExponent=7]="SuperscriptingExponent",Mt[Mt.PerMille=8]="PerMille",Mt[Mt.Infinity=9]="Infinity",Mt[Mt.NaN=10]="NaN",Mt[Mt.TimeSeparator=11]="TimeSeparator",Mt[Mt.CurrencyDecimal=12]="CurrencyDecimal",Mt[Mt.CurrencyGroup=13]="CurrencyGroup",Mt))();function Da(t,n){const e=Or(t),i=e[st.NumberSymbols][n];if(void 0===i){if(n===Mt.CurrencyDecimal)return e[st.NumberSymbols][Mt.Decimal];if(n===Mt.CurrencyGroup)return e[st.NumberSymbols][Mt.Group]}return i}function nm(t,n){return Or(t)[st.NumberFormats][n]}const NE=yw,t3=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function lm(t,n,e,i,r,a,o=!1){let s="",l=!1;if(isFinite(t)){let c=function u3(t){let i,r,a,o,s,n=Math.abs(t)+"",e=0;for((r=n.indexOf("."))>-1&&(n=n.replace(".","")),(a=n.search(/e/i))>0?(r<0&&(r=a),r+=+n.slice(a+1),n=n.substring(0,a)):r<0&&(r=n.length),a=0;"0"===n.charAt(a);a++);if(a===(s=n.length))i=[0],r=1;else{for(s--;"0"===n.charAt(s);)s--;for(r-=a,i=[],o=0;a<=s;a++,o++)i[o]=Number(n.charAt(a))}return r>22&&(i=i.splice(0,21),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}(t);o&&(c=function c3(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(c));let u=n.minInt,f=n.minFrac,v=n.maxFrac;if(a){const S=a.match(t3);if(null===S)throw new Error(`${a} is not a valid digit info`);const w=S[1],B=S[3],j=S[5];null!=w&&(u=um(w)),null!=B&&(f=um(B)),null!=j?v=um(j):null!=B&&f>v&&(v=f)}!function d3(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,r=i.length-t.integerLen;const a=Math.min(Math.max(n,r),e);let o=a+t.integerLen,s=i[o];if(o>0){i.splice(Math.max(t.integerLen,o));for(let f=o;f<i.length;f++)i[f]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,o=a+1),i[0]=0;for(let f=1;f<o;f++)i[f]=0}if(s>=5)if(o-1<0){for(let f=0;f>o;f--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[o-1]++;for(;r<Math.max(0,a);r++)i.push(0);let l=0!==a;const c=n+t.integerLen,u=i.reduceRight(function(f,v,b,y){return y[b]=(v+=f)<10?v:v-10,l&&(0===y[b]&&b>=c?y.pop():l=!1),v>=10?1:0},0);u&&(i.unshift(u),t.integerLen++)}(c,f,v);let b=c.digits,y=c.integerLen;const C=c.exponent;let T=[];for(l=b.every(S=>!S);y<u;y++)b.unshift(0);for(;y<0;y++)b.unshift(0);y>0?T=b.splice(y,b.length):(T=b,b=[0]);const M=[];for(b.length>=n.lgSize&&M.unshift(b.splice(-n.lgSize,b.length).join(""));b.length>n.gSize;)M.unshift(b.splice(-n.gSize,b.length).join(""));b.length&&M.unshift(b.join("")),s=M.join(Da(e,i)),T.length&&(s+=Da(e,r)+T.join("")),C&&(s+=Da(e,Mt.Exponential)+"+"+C)}else s=Da(e,Mt.Infinity);return s=t<0&&!l?n.negPre+s+n.negSuf:n.posPre+s+n.posSuf,s}function cm(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(";"),r=i[0],a=i[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],s=o[0],l=o[1]||"";e.posPre=s.substr(0,s.indexOf("#"));for(let u=0;u<l.length;u++){const f=l.charAt(u);"0"===f?e.minFrac=e.maxFrac=u+1:"#"===f?e.maxFrac=u+1:e.posSuf+=f}const c=s.split(",");if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,a){const u=r.length-e.posPre.length-e.posSuf.length,f=a.indexOf("#");e.negPre=a.substr(0,f).replace(/'/g,""),e.negSuf=a.substr(f+u).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}function um(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}class Qh{}let h3=(()=>{class t extends Qh{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(NE(i||this.locale)(e)){case Wn.Zero:return"zero";case Wn.One:return"one";case Wn.Two:return"two";case Wn.Few:return"few";case Wn.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(He(us))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})(),cn=(()=>{class t{constructor(e,i,r,a){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(ou(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Wi(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(V(Su),V(tc),V(Mi),V(Ta))},t.\u0275dir=nt({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class g3{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cn=(()=>{class t{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,a,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new g3(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===a?void 0:a);else if(null!==a){const s=i.get(a);i.move(s,o),pS(s,r)}});for(let r=0,a=i.length;r<a;r++){const s=i.get(r).context;s.index=r,s.count=a,s.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{pS(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(V(Ra),V(wn),V(Su))},t.\u0275dir=nt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function pS(t,n){t.context.$implicit=n.item}let li=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new v3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){gS("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){gS("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(V(Ra),V(wn))},t.\u0275dir=nt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class v3{constructor(){this.$implicit=null,this.ngIf=null}}function gS(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Wi(n)}'.`)}let nc=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(V(Ra))},t.\u0275dir=nt({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[jn]}),t})();function Ya(t,n){return new Di(2100,"")}let Qa=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!fm(e))return null;r=r||this._locale;try{return function l3(t,n,e){return lm(t,cm(nm(n,Xr.Decimal),Da(n,Mt.MinusSign)),n,Mt.Group,Mt.Decimal,e)}(pm(e),r,i)}catch(a){throw Ya()}}}return t.\u0275fac=function(e){return new(e||t)(V(us,16))},t.\u0275pipe=qr({name:"number",type:t,pure:!0}),t})(),bS=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!fm(e))return null;r=r||this._locale;try{return function s3(t,n,e){return lm(t,cm(nm(n,Xr.Percent),Da(n,Mt.MinusSign)),n,Mt.Group,Mt.Decimal,e,!0).replace(new RegExp("%","g"),Da(n,Mt.PercentSign))}(pm(e),r,i)}catch(a){throw Ya()}}}return t.\u0275fac=function(e){return new(e||t)(V(us,16))},t.\u0275pipe=qr({name:"percent",type:t,pure:!0}),t})();function fm(t){return!(null==t||""===t||t!=t)}function pm(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let Yr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({providers:[{provide:Qh,useClass:h3}]}),t})();let j3=(()=>{class t{}return t.\u0275prov=gt({token:t,providedIn:"root",factory:()=>new $3(He(qn),window)}),t})();class $3{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function q3(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const a=r.shadowRoot;if(a){const o=a.getElementById(n)||a.querySelector(`[name="${n}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],r-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=yS(this.window.history)||yS(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function yS(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class gm extends class X3 extends class CE{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function wE(t){Uh||(Uh=t)}(new gm)}onAndCancel(n,e,i){return n.addEventListener(e,i,!1),()=>{n.removeEventListener(e,i,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function Y3(){return Du=Du||document.querySelector("base"),Du?Du.getAttribute("href"):null}();return null==e?null:function Q3(t){Kh=Kh||document.createElement("a"),Kh.setAttribute("href",t);const n=Kh.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){Du=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function f3(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,a]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(a)}return null}(document.cookie,n)}}let Kh,Du=null;const wS=new si("TRANSITION_ID"),Z3=[{provide:Eh,useFactory:function K3(t,n,e){return()=>{e.get(ec).donePromise.then(()=>{const i=_o(),r=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let a=0;a<r.length;a++)i.remove(r[a])})}},deps:[wS,qn,Ln],multi:!0}];class vm{static init(){!function HO(t){Xv=t}(new vm)}addToWindow(n){Zi.getAngularTestability=(i,r=!0)=>{const a=n.findTestabilityInTree(i,r);if(null==a)throw new Error("Could not find testability for element.");return a},Zi.getAllAngularTestabilities=()=>n.getAllTestabilities(),Zi.getAllAngularRootElements=()=>n.getAllRootElements(),Zi.frameworkStabilizers||(Zi.frameworkStabilizers=[]),Zi.frameworkStabilizers.push(i=>{const r=Zi.getAllAngularTestabilities();let a=r.length,o=!1;const s=function(l){o=o||l,a--,0==a&&i(o)};r.forEach(function(l){l.whenStable(s)})})}findTestabilityInTree(n,e,i){if(null==e)return null;const r=n.getTestability(e);return null!=r?r:i?_o().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null}}let J3=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();const Zh=new si("EventManagerPlugins");let Jh=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let a=0;a<r.length;a++){const o=r[a];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(He(Zh),He(ln))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();class CS{constructor(n){this._doc=n}addGlobalEventListener(n,e,i){const r=_o().getGlobalEventTarget(this._doc,n);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let SS=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})(),xu=(()=>{class t extends SS{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(a=>{const o=this._doc.createElement("style");o.textContent=a,r.push(i.appendChild(o))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(TS),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(TS))}}return t.\u0275fac=function(e){return new(e||t)(He(qn))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();function TS(t){_o().remove(t)}const mm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bm=/%COMP%/g;function ef(t,n,e){for(let i=0;i<n.length;i++){let r=n[i];Array.isArray(r)?ef(t,r,e):(r=r.replace(bm,t),e.push(r))}return e}function xS(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let _m=(()=>{class t{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ym(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case oo.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new aN(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case oo.ShadowDom:return new oN(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=ef(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(He(Jh),He(xu),He(Cu))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();class ym{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(mm[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){n.appendChild(e)}insertBefore(n,e,i){n&&n.insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const a=mm[r];a?n.setAttributeNS(a,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=mm[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(aa.DashCase|aa.Important)?n.style.setProperty(e,i,r&aa.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&aa.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,xS(i)):this.eventManager.addEventListener(n,e,xS(i))}}class aN extends ym{constructor(n,e,i,r){super(n),this.component=i;const a=ef(r+"-"+i.id,i.styles,[]);e.addStyles(a),this.contentAttr=function iN(t){return"_ngcontent-%COMP%".replace(bm,t)}(r+"-"+i.id),this.hostAttr=function nN(t){return"_nghost-%COMP%".replace(bm,t)}(r+"-"+i.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}class oN extends ym{constructor(n,e,i,r){super(n),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=ef(r.id,r.styles,[]);for(let o=0;o<a.length;o++){const s=document.createElement("style");s.textContent=a[o],this.shadowRoot.appendChild(s)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let sN=(()=>{class t extends CS{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return t.\u0275fac=function(e){return new(e||t)(He(qn))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();const MS=["alt","control","meta","shift"],cN={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AS={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},uN={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let dN=(()=>{class t extends CS{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const a=t.parseEventName(i),o=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_o().onAndCancel(e,a.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(i.pop());let o="";if(MS.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=a,0!=i.length||0===a.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let i="",r=function hN(t){let n=t.key;if(null==n){if(n=t.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===t.location&&AS.hasOwnProperty(n)&&(n=AS[n]))}return cN[n]||n}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),MS.forEach(a=>{a!=r&&uN[a](e)&&(i+=a+".")}),i+=r,i}static eventCallback(e,i,r){return a=>{t.getEventFullKey(a)===e&&r.runGuarded(()=>i(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(He(qn))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();const vN=LC(hE,"browser",[{provide:Nh,useValue:"browser"},{provide:AC,useValue:function fN(){gm.makeCurrent(),vm.init()},multi:!0},{provide:qn,useFactory:function gN(){return function Nx(t){Fp=t}(document),document},deps:[]}]),mN=[{provide:Jg,useValue:"root"},{provide:Ml,useFactory:function pN(){return new Ml},deps:[]},{provide:Zh,useClass:sN,multi:!0,deps:[qn,ln,Nh]},{provide:Zh,useClass:dN,multi:!0,deps:[qn]},{provide:_m,useClass:_m,deps:[Jh,xu,Cu]},{provide:Dv,useExisting:_m},{provide:SS,useExisting:xu},{provide:xu,useClass:xu,deps:[qn]},{provide:Wv,useClass:Wv,deps:[ln]},{provide:Jh,useClass:Jh,deps:[Zh,ln]},{provide:class W3{},useClass:J3,deps:[]}];let bN=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Cu,useValue:e.appId},{provide:wS,useExisting:Cu},Z3]}}}return t.\u0275fac=function(e){return new(e||t)(He(t,12))},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({providers:mN,imports:[Yr,_E]}),t})();"undefined"!=typeof window&&window;let hs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:function(e){let i=null;return i=e?new(e||t):He(IS),i},providedIn:"root"}),t})(),IS=(()=>{class t extends hs{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case _i.NONE:return i;case _i.HTML:return ho(i,"HTML")?ra(i):B_(this._doc,String(i)).toString();case _i.STYLE:return ho(i,"Style")?ra(i):i;case _i.SCRIPT:if(ho(i,"Script"))return ra(i);throw new Error("unsafe value used in a script context");case _i.URL:return M_(i),ho(i,"URL")?ra(i):Kc(String(i));case _i.RESOURCE_URL:if(ho(i,"ResourceURL"))return ra(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function Qk(t){return new $k(t)}(e)}bypassSecurityTrustStyle(e){return function Kk(t){return new qk(t)}(e)}bypassSecurityTrustScript(e){return function Zk(t){return new Wk(t)}(e)}bypassSecurityTrustUrl(e){return function Jk(t){return new Xk(t)}(e)}bypassSecurityTrustResourceUrl(e){return function eM(t){return new Yk(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(He(qn))},t.\u0275prov=gt({token:t,factory:function(e){let i=null;return i=e?new e:function kN(t){return new IS(t.get(qn))}(He(Ln)),i},providedIn:"root"}),t})();const{isArray:MN}=Array,{getPrototypeOf:AN,prototype:PN,keys:VN}=Object;function OS(t){if(1===t.length){const n=t[0];if(MN(n))return{args:n,keys:null};if(function IN(t){return t&&"object"==typeof t&&AN(t)===PN}(n)){const e=VN(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:ON}=Array;function Cm(t){return Xt(n=>function EN(t,n){return ON(n)?t(...n):t(n)}(t,n))}function ES(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}let NS=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(V(Ta),V(Mi))},t.\u0275dir=nt({type:t}),t})(),Fs=(()=>{class t extends NS{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_r(t)))(i||t)}}(),t.\u0275dir=nt({type:t,features:[Gi]}),t})();const ka=new si("NgValueAccessor"),BN={provide:ka,useExisting:Ii(()=>rc),multi:!0};let rc=(()=>{class t extends Fs{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_r(t)))(i||t)}}(),t.\u0275dir=nt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,i){1&e&&A("change",function(a){return i.onChange(a.target.checked)})("blur",function(){return i.onTouched()})},features:[sn([BN]),Gi]}),t})();const FN={provide:ka,useExisting:Ii(()=>Lo),multi:!0},UN=new si("CompositionEventMode");let Lo=(()=>{class t extends NS{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function LN(){const t=_o()?_o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(V(Ta),V(Mi),V(UN,8))},t.\u0275dir=nt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&A("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[sn([FN]),Gi]}),t})();function BS(t){return null!=t&&"number"==typeof t.length}const Tr=new si("NgValidators"),ps=new si("NgAsyncValidators");function tf(t){return null}function qS(t){return null!=t}function WS(t){const n=lu(t)?rr(t):t;return pv(n),n}function XS(t){let n={};return t.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function YS(t,n){return n.map(e=>e(t))}function QS(t){return t.map(n=>function GN(t){return!t.validate}(n)?n:e=>n.validate(e))}function Sm(t){return null!=t?function KS(t){if(!t)return null;const n=t.filter(qS);return 0==n.length?null:function(e){return XS(YS(e,n))}}(QS(t)):null}function Tm(t){return null!=t?function ZS(t){if(!t)return null;const n=t.filter(qS);return 0==n.length?null:function(e){return function NN(...t){const n=Md(t),{args:e,keys:i}=OS(t),r=new $e(a=>{const{length:o}=e;if(!o)return void a.complete();const s=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let f=!1;Yn(e[u]).subscribe(ni(a,v=>{f||(f=!0,c--),s[u]=v},()=>l--,void 0,()=>{(!l||!f)&&(c||a.next(i?ES(i,s):s),a.complete())}))}});return n?r.pipe(Cm(n)):r}(YS(e,n).map(WS)).pipe(Xt(XS))}}(QS(t)):null}function JS(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function eT(t){return t._rawValidators}function tT(t){return t._rawAsyncValidators}function Rm(t){return t?Array.isArray(t)?t:[t]:[]}function nf(t,n){return Array.isArray(t)?t.includes(n):t===n}function iT(t,n){const e=Rm(n);return Rm(t).forEach(r=>{nf(e,r)||e.push(r)}),e}function nT(t,n){return Rm(n).filter(e=>!nf(t,e))}class rT{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Sm(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Tm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class gs extends rT{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nr extends rT{get formDirective(){return null}get path(){return null}}class aT{constructor(n){this._cd=n}is(n){var e,i,r;return"submitted"===n?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[n])}}let Uo=(()=>{class t extends aT{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(V(gs,2))},t.\u0275dir=nt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&Bt("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[Gi]}),t})(),rf=(()=>{class t extends aT{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(V(Nr,10))},t.\u0275dir=nt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&Bt("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[Gi]}),t})();function sf(t,n){return[...n.path,t]}function ku(t,n){km(t,n),n.valueAccessor.writeValue(t.value),function QN(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&sT(t,n)})}(t,n),function ZN(t,n){const e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function KN(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&sT(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function YN(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function lf(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),uf(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function cf(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function km(t,n){const e=eT(t);null!==n.validator?t.setValidators(JS(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=tT(t);null!==n.asyncValidator?t.setAsyncValidators(JS(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();cf(n._rawValidators,r),cf(n._rawAsyncValidators,r)}function uf(t,n){let e=!1;if(null!==t){if(null!==n.validator){const r=eT(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==n.validator);a.length!==r.length&&(e=!0,t.setValidators(a))}}if(null!==n.asyncValidator){const r=tT(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==n.asyncValidator);a.length!==r.length&&(e=!0,t.setAsyncValidators(a))}}}const i=()=>{};return cf(n._rawValidators,i),cf(n._rawAsyncValidators,i),e}function sT(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function lT(t,n){km(t,n)}function Mm(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function cT(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Am(t,n){if(!n)return null;let e,i,r;return Array.isArray(n),n.forEach(a=>{a.constructor===Lo?e=a:function tB(t){return Object.getPrototypeOf(t.constructor)===Fs}(a)?i=a:r=a}),r||i||e||null}function Pm(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const Mu="VALID",df="INVALID",ac="PENDING",Au="DISABLED";function Im(t){return(hf(t)?t.validators:t)||null}function uT(t){return Array.isArray(t)?Sm(t):t||null}function Om(t,n){return(hf(n)?n.asyncValidators:t)||null}function dT(t){return Array.isArray(t)?Tm(t):t||null}function hf(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const hT=t=>t instanceof Bm,Em=t=>t instanceof ff;function fT(t){return hT(t)?t.value:t.getRawValue()}function pT(t,n){const e=Em(t),i=t.controls;if(!(e?Object.keys(i):i).length)throw new Di(1e3,"");if(!i[n])throw new Di(1001,"")}function gT(t,n){Em(t),t._forEachChild((i,r)=>{if(void 0===n[r])throw new Di(1002,"")})}class Nm{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=uT(this._rawValidators),this._composedAsyncValidatorFn=dT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Mu}get invalid(){return this.status===df}get pending(){return this.status==ac}get disabled(){return this.status===Au}get enabled(){return this.status!==Au}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=uT(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=dT(n)}addValidators(n){this.setValidators(iT(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(iT(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(nT(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(nT(n,this._rawAsyncValidators))}hasValidator(n){return nf(this._rawValidators,n)}hasAsyncValidator(n){return nf(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=ac,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Au,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Mu,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mu||this.status===ac)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Au:Mu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=ac,this._hasOwnPendingAsyncValidator=!0;const e=WS(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){return function iB(t,n,e){if(null==n||(Array.isArray(n)||(n=n.split(e)),Array.isArray(n)&&0===n.length))return null;let i=t;return n.forEach(r=>{i=Em(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(t=>t instanceof rB)(i)&&i.at(r)||null}),i}(this,n,".")}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new bt,this.statusChanges=new bt}_calculateStatus(){return this._allControlsDisabled()?Au:this.errors?df:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ac)?ac:this._anyControlsHaveStatus(df)?df:Mu}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){hf(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Bm extends Nm{constructor(n=null,e,i){super(Im(e),Om(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hf(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Pm(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Pm(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class ff extends Nm{constructor(n,e,i){super(Im(e),Om(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){gT(this,n),Object.keys(n).forEach(i=>{pT(this,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=fT(e),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&n(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,e,i)=>((e.enabled||this.disabled)&&(n[i]=e.value),n))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,a)=>{i=e(i,r,a)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class rB extends Nm{constructor(n,e,i){super(Im(e),Om(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){gT(this,n),n.forEach((i,r)=>{pT(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>fT(n))}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const aB={provide:Nr,useExisting:Ii(()=>Vu)},Pu=(()=>Promise.resolve(null))();let Vu=(()=>{class t extends Nr{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new bt,this.form=new ff({},Sm(e),Tm(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Pu.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),ku(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Pu.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Pu.then(()=>{const i=this._findContainer(e.path),r=new ff({});lT(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Pu.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Pu.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,cT(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(V(Tr,10),V(ps,10))},t.\u0275dir=nt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&A("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sn([aB]),Gi]}),t})();const sB={provide:gs,useExisting:Ii(()=>Ho)},bT=(()=>Promise.resolve(null))();let Ho=(()=>{class t extends gs{constructor(e,i,r,a,o){super(),this._changeDetectorRef=o,this.control=new Bm,this._registered=!1,this.update=new bt,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Am(0,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Mm(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ku(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){bT.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;bT.then(()=>{var a;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(e){return this._parent?sf(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(V(Nr,9),V(Tr,10),V(ps,10),V(ka,10),V(sa,8))},t.\u0275dir=nt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sn([sB]),Gi,jn]}),t})(),pf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=nt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const lB={provide:ka,useExisting:Ii(()=>Fm),multi:!0};let Fm=(()=>{class t extends Fs{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_r(t)))(i||t)}}(),t.\u0275dir=nt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&A("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[sn([lB]),Gi]}),t})(),_T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({}),t})();const Lm=new si("NgModelWithFormControlWarning"),fB={provide:Nr,useExisting:Ii(()=>gf)};let gf=(()=>{class t extends Nr{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new bt,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(uf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return ku(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){lf(e.control||null,e,!1),Pm(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,cT(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(lf(i||null,e),hT(r)&&(ku(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);lT(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function JN(t,n){return uf(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){km(this.form,this),this._oldForm&&uf(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(V(Tr,10),V(ps,10))},t.\u0275dir=nt({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&A("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sn([fB]),Gi,jn]}),t})();const vB={provide:gs,useExisting:Ii(()=>Gm)};let Gm=(()=>{class t extends gs{constructor(e,i,r,a,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new bt,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Am(0,a)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),Mm(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return sf(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(V(Nr,13),V(Tr,10),V(ps,10),V(ka,10),V(Lm,8))},t.\u0275dir=nt({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[sn([vB]),Gi,jn]}),t})();const mB={provide:ka,useExisting:Ii(()=>vf),multi:!0};function TT(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let vf=(()=>{class t extends Fs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=TT(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function bB(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_r(t)))(i||t)}}(),t.\u0275dir=nt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&A("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[sn([mB]),Gi]}),t})(),RT=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(TT(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(V(Mi),V(Ta),V(vf,9))},t.\u0275dir=nt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const _B={provide:ka,useExisting:Ii(()=>zm),multi:!0};function DT(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let zm=(()=>{class t extends Fs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(a=>this._getOptionId(a));i=(a,o)=>{a._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,a)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],a=i.selectedOptions;if(void 0!==a){const o=a;for(let s=0;s<o.length;s++){const c=this._getOptionValue(o[s].value);r.push(c)}}else{const o=i.options;for(let s=0;s<o.length;s++){const l=o[s];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function yB(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_r(t)))(i||t)}}(),t.\u0275dir=nt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&A("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[sn([_B]),Gi]}),t})(),xT=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(DT(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(DT(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(V(Mi),V(Ta),V(zm,9))},t.\u0275dir=nt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function kT(t){return"number"==typeof t?t:parseInt(t,10)}let Ls=(()=>{class t{constructor(){this._validator=tf}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):tf,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=nt({type:t,features:[jn]}),t})();const xB={provide:Tr,useExisting:Ii(()=>mf),multi:!0};let mf=(()=>{class t extends Ls{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>kT(e),this.createValidator=e=>function zS(t){return n=>function fs(t){return null==t||0===t.length}(n.value)||!BS(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_r(t)))(i||t)}}(),t.\u0275dir=nt({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&Yi("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[sn([xB]),Gi]}),t})();const kB={provide:Tr,useExisting:Ii(()=>Us),multi:!0};let Us=(()=>{class t extends Ls{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>kT(e),this.createValidator=e=>function jS(t){return n=>BS(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=_r(t)))(i||t)}}(),t.\u0275dir=nt({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&Yi("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[sn([kB]),Gi]}),t})(),ET=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[_T]]}),t})(),NT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[ET]}),t})(),AB=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Lm,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[ET]}),t})();function zt(...t){return rr(t,Ic(t))}class Mn extends Te{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function BT(t,n,e){t?va(e,t,n):n()}const bf=$(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Iu(...t){return function VB(){return Vc(1)}()(rr(t,Ic(t)))}function FT(t){return new $e(n=>{Yn(t()).subscribe(n)})}function LT(){return Nt((t,n)=>{let e=null;t._refCount++;const i=ni(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class IB extends $e{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,rn(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,null==n||n.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new _e;const e=this.getSubject();n.add(this.source.subscribe(ni(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=_e.EMPTY)}return n}refCount(){return LT()(this)}}function Go(t,n){return Nt((e,i)=>{let r=null,a=0,o=!1;const s=()=>o&&!r&&i.complete();e.subscribe(ni(i,l=>{null==r||r.unsubscribe();let c=0;const u=a++;Yn(t(l,u)).subscribe(r=ni(i,f=>i.next(n?n(l,f,u,c++):f),()=>{r=null,s()}))},()=>{o=!0,s()}))})}function OB(t,n,e,i,r){return(a,o)=>{let s=e,l=n,c=0;a.subscribe(ni(o,u=>{const f=c++;l=s?t(l,u,f):(s=!0,u),i&&o.next(l)},r&&(()=>{s&&o.next(l),o.complete()})))}}function UT(t,n){return Nt(OB(t,n,arguments.length>=2,!0))}function hr(t,n){return Nt((e,i)=>{let r=0;e.subscribe(ni(i,a=>t.call(n,a,r++)&&i.next(a)))})}function vs(t){return Nt((n,e)=>{let a,i=null,r=!1;i=n.subscribe(ni(e,void 0,void 0,o=>{a=Yn(t(o,vs(t)(n))),i?(i.unsubscribe(),i=null,a.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,a.subscribe(e))})}function Ou(t,n){return K(n)?Bn(t,n,1):Bn(t,1)}function qm(t){return t<=0?()=>Ba:Nt((n,e)=>{let i=[];n.subscribe(ni(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function HT(t=EB){return Nt((n,e)=>{let i=!1;n.subscribe(ni(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function EB(){return new bf}function GT(t){return Nt((n,e)=>{let i=!1;n.subscribe(ni(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function oc(t,n){const e=arguments.length>=2;return i=>i.pipe(t?hr((r,a)=>t(r,a,i)):je,ar(1),e?GT(n):HT(()=>new bf))}function Rr(t,n,e){const i=K(t)||n||e?{next:t,error:n,complete:e}:t;return i?Nt((r,a)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let s=!0;r.subscribe(ni(a,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),a.next(l)},()=>{var l;s=!1,null===(l=i.complete)||void 0===l||l.call(i),a.complete()},l=>{var c;s=!1,null===(c=i.error)||void 0===c||c.call(i,l),a.error(l)},()=>{var l,c;s&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):je}class zo{constructor(n,e){this.id=n,this.url=e}}class Wm extends zo{constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Eu extends zo{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zT extends zo{constructor(n,e,i){super(n,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class FB extends zo{constructor(n,e,i){super(n,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class LB extends zo{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UB extends zo{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HB extends zo{constructor(n,e,i,r,a){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class GB extends zo{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zB extends zo{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jT{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $T{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jB{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $B{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qB{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WB{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qT{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const di="primary";class XB{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function sc(t){return new XB(t)}const WT="ngNavigationCancelingError";function Xm(t){const n=Error("NavigationCancelingError: "+t);return n[WT]=!0,n}function QB(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let a=0;a<i.length;a++){const o=i[a],s=t[a];if(o.startsWith(":"))r[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function yo(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!XT(t[r],n[r]))return!1;return!0}function XT(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,a)=>i[a]===r)}return t===n}function YT(t){return Array.prototype.concat.apply([],t)}function QT(t){return t.length>0?t[t.length-1]:null}function fr(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function wo(t){return pv(t)?t:lu(t)?rr(Promise.resolve(t)):zt(t)}const JB={exact:function JT(t,n,e){if(!Gs(t.segments,n.segments)||!yf(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!JT(t.children[i],n.children[i],e))return!1;return!0},subset:eR},KT={exact:function eF(t,n){return yo(t,n)},subset:function tF(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>XT(t[e],n[e]))},ignored:()=>!0};function ZT(t,n,e){return JB[e.paths](t.root,n.root,e.matrixParams)&&KT[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function eR(t,n,e){return tR(t,n,n.segments,e)}function tR(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!Gs(r,e)||n.hasChildren()||!yf(r,e,i))}if(t.segments.length===e.length){if(!Gs(t.segments,e)||!yf(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!eR(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(Gs(t.segments,r)&&yf(t.segments,r,i)&&t.children[di])&&tR(t.children[di],n,a,i)}}function yf(t,n,e){return n.every((i,r)=>KT[e](t[r].parameters,i.parameters))}class Hs{constructor(n,e,i){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sc(this.queryParams)),this._queryParamMap}toString(){return rF.serialize(this)}}class Ci{constructor(n,e){this.segments=n,this.children=e,this.parent=null,fr(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wf(this)}}class Nu{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=sc(this.parameters)),this._parameterMap}toString(){return oR(this)}}function Gs(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}class iR{}class nR{parse(n){const e=new fF(n);return new Hs(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Bu(n.root,!0)}`,i=function sF(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${Cf(e)}=${Cf(r)}`).join("&"):`${Cf(e)}=${Cf(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function aF(t){return encodeURI(t)}(n.fragment)}`:""}`}}const rF=new nR;function wf(t){return t.segments.map(n=>oR(n)).join("/")}function Bu(t,n){if(!t.hasChildren())return wf(t);if(n){const e=t.children[di]?Bu(t.children[di],!1):"",i=[];return fr(t.children,(r,a)=>{a!==di&&i.push(`${a}:${Bu(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function nF(t,n){let e=[];return fr(t.children,(i,r)=>{r===di&&(e=e.concat(n(i,r)))}),fr(t.children,(i,r)=>{r!==di&&(e=e.concat(n(i,r)))}),e}(t,(i,r)=>r===di?[Bu(t.children[di],!1)]:[`${r}:${Bu(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[di]?`${wf(t)}/${e[0]}`:`${wf(t)}/(${e.join("//")})`}}function rR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cf(t){return rR(t).replace(/%3B/gi,";")}function Ym(t){return rR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sf(t){return decodeURIComponent(t)}function aR(t){return Sf(t.replace(/\+/g,"%20"))}function oR(t){return`${Ym(t.path)}${function oF(t){return Object.keys(t).map(n=>`;${Ym(n)}=${Ym(t[n])}`).join("")}(t.parameters)}`}const lF=/^[^\/()?;=#]+/;function Tf(t){const n=t.match(lF);return n?n[0]:""}const cF=/^[^=?&#]+/,dF=/^[^&#]+/;class fF{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ci([],{}):new Ci([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[di]=new Ci(n,e)),i}parseSegment(){const n=Tf(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new Nu(Sf(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=Tf(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Tf(this.remaining);r&&(i=r,this.capture(i))}n[Sf(e)]=Sf(i)}parseQueryParam(n){const e=function uF(t){const n=t.match(cF);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function hF(t){const n=t.match(dF);return n?n[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=aR(e),a=aR(i);if(n.hasOwnProperty(r)){let o=n[r];Array.isArray(o)||(o=[o],n[r]=o),o.push(a)}else n[r]=a}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Tf(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a;i.indexOf(":")>-1?(a=i.substr(0,i.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=di);const o=this.parseChildren();e[a]=1===Object.keys(o).length?o[di]:new Ci([],o),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class sR{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=Qm(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=Qm(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Km(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return Km(n,this._root).map(e=>e.value)}}function Qm(t,n){if(t===n.value)return n;for(const e of n.children){const i=Qm(t,e);if(i)return i}return null}function Km(t,n){if(t===n.value)return[n];for(const e of n.children){const i=Km(t,e);if(i.length)return i.unshift(n),i}return[]}class jo{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function lc(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class lR extends sR{constructor(n,e){super(n),this.snapshot=e,Zm(this,n)}toString(){return this.snapshot.toString()}}function cR(t,n){const e=function pF(t,n){const o=new Rf([],{},{},"",{},di,n,null,t.root,-1,{});return new dR("",new jo(o,[]))}(t,n),i=new Mn([new Nu("",{})]),r=new Mn({}),a=new Mn({}),o=new Mn({}),s=new Mn(""),l=new cc(i,r,o,s,a,di,n,e.root);return l.snapshot=e.root,new lR(new jo(l,[]),e)}class cc{constructor(n,e,i,r,a,o,s,l){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Xt(n=>sc(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Xt(n=>sc(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function uR(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],a=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function gF(t){return t.reduce((n,e)=>({params:Object.assign(Object.assign({},n.params),e.params),data:Object.assign(Object.assign({},n.data),e.data),resolve:Object.assign(Object.assign({},n.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Rf{constructor(n,e,i,r,a,o,s,l,c,u,f){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class dR extends sR{constructor(n,e){super(e),this.url=n,Zm(this,e)}toString(){return hR(this._root)}}function Zm(t,n){n.value._routerState=t,n.children.forEach(e=>Zm(t,e))}function hR(t){const n=t.children.length>0?` { ${t.children.map(hR).join(", ")} } `:"";return`${t.value}${n}`}function Jm(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,yo(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),yo(n.params,e.params)||t.params.next(e.params),function KB(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!yo(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),yo(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function e0(t,n){const e=yo(t.params,n.params)&&function iF(t,n){return Gs(t,n)&&t.every((e,i)=>yo(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||e0(t.parent,n.parent))}function Fu(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function mF(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Fu(t,i,r);return Fu(t,i)})}(t,n,e);return new jo(i,r)}{if(t.shouldAttach(n.value)){const a=t.retrieve(n.value);if(null!==a){const o=a.route;return o.value._futureSnapshot=n.value,o.children=n.children.map(s=>Fu(t,s)),o}}const i=function bF(t){return new cc(new Mn(t.url),new Mn(t.params),new Mn(t.queryParams),new Mn(t.fragment),new Mn(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(a=>Fu(t,a));return new jo(i,r)}}function Df(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Lu(t){return"object"==typeof t&&null!=t&&t.outlets}function t0(t,n,e,i,r){let a={};return i&&fr(i,(o,s)=>{a[s]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new Hs(e.root===t?n:fR(e.root,t,n),a,r)}function fR(t,n,e){const i={};return fr(t.children,(r,a)=>{i[a]=r===n?e:fR(r,n,e)}),new Ci(t.segments,i)}class pR{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&Df(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Lu);if(r&&r!==QT(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class n0{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function gR(t,n,e){if(t||(t=new Ci([],{})),0===t.segments.length&&t.hasChildren())return xf(t,n,e);const i=function TF(t,n,e){let i=0,r=n;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return a;const o=t.segments[r],s=e[i];if(Lu(s))break;const l=`${s}`,c=i<e.length-1?e[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!mR(l,c,o))return a;i+=2}else{if(!mR(l,{},o))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const a=new Ci(t.segments.slice(0,i.pathIndex),{});return a.children[di]=new Ci(t.segments.slice(i.pathIndex),t.children),xf(a,0,r)}return i.match&&0===r.length?new Ci(t.segments,{}):i.match&&!t.hasChildren()?r0(t,n,e):i.match?xf(t,0,r):r0(t,n,e)}function xf(t,n,e){if(0===e.length)return new Ci(t.segments,{});{const i=function SF(t){return Lu(t[0])?t[0].outlets:{[di]:t}}(e),r={};return fr(i,(a,o)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[o]=gR(t.children[o],n,a))}),fr(t.children,(a,o)=>{void 0===i[o]&&(r[o]=a)}),new Ci(t.segments,r)}}function r0(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const a=e[r];if(Lu(a)){const l=RF(a.outlets);return new Ci(i,l)}if(0===r&&Df(e[0])){i.push(new Nu(t.segments[n].path,vR(e[0]))),r++;continue}const o=Lu(a)?a.outlets[di]:`${a}`,s=r<e.length-1?e[r+1]:null;o&&s&&Df(s)?(i.push(new Nu(o,vR(s))),r+=2):(i.push(new Nu(o,{})),r++)}return new Ci(i,{})}function RF(t){const n={};return fr(t,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[i]=r0(new Ci([],{}),0,e))}),n}function vR(t){const n={};return fr(t,(e,i)=>n[i]=`${e}`),n}function mR(t,n,e){return t==e.path&&yo(n,e.parameters)}class xF{constructor(n,e,i,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),Jm(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=lc(e);n.children.forEach(a=>{const o=a.value.outlet;this.deactivateRoutes(a,r[o],i),delete r[o]}),fr(r,(a,o)=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(r===a)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(n,e,o.children)}else this.deactivateChildRoutes(n,e,i);else a&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=lc(n);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);if(i&&i.outlet){const o=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:s})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=lc(n);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,e,i){const r=lc(e);n.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],i),this.forwardEvent(new WB(a.value.snapshot))}),n.children.length&&this.forwardEvent(new $B(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(Jm(r),r===a)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,o.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),Jm(s.route.value),this.activateChildRoutes(n,null,o.children)}else{const s=function kF(t){for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(n,null,o.children)}}else this.activateChildRoutes(n,null,i)}}class a0{constructor(n,e){this.routes=n,this.module=e}}function ms(t){return"function"==typeof t}function zs(t){return t instanceof Hs}const Uu=Symbol("INITIAL_VALUE");function Hu(){return Go(t=>function $m(...t){const n=Ic(t),e=Md(t),{args:i,keys:r}=OS(t);if(0===i.length)return rr([],n);const a=new $e(function PB(t,n,e=je){return i=>{BT(n,()=>{const{length:r}=t,a=new Array(r);let o=r,s=r;for(let l=0;l<r;l++)BT(n,()=>{const c=rr(t[l],n);let u=!1;c.subscribe(ni(i,f=>{a[l]=f,u||(u=!0,s--),s||i.next(e(a.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,n,r?o=>ES(r,o):je));return e?a.pipe(Cm(e)):a}(t.map(n=>n.pipe(ar(1),function _f(...t){const n=Ic(t);return Nt((e,i)=>{(n?Iu(t,e,n):Iu(t,e)).subscribe(i)})}(Uu)))).pipe(UT((n,e)=>{let i=!1;return e.reduce((r,a,o)=>r!==Uu?r:(a===Uu&&(i=!0),i||!1!==a&&o!==e.length-1&&!zs(a)?r:a),n)},Uu),hr(n=>n!==Uu),Xt(n=>zs(n)?n:!0===n),ar(1)))}class OF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gu,this.attachRef=null}}class Gu{constructor(){this.contexts=new Map}onChildOutletCreated(n,e){const i=this.getOrCreateContext(n);i.outlet=e,this.contexts.set(n,i)}onChildOutletDestroyed(n){const e=this.getContext(n);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let e=this.getContext(n);return e||(e=new OF,this.contexts.set(n,e)),e}getContext(n){return this.contexts.get(n)||null}}let o0=(()=>{class t{constructor(e,i,r,a,o){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new bt,this.deactivateEvents=new bt,this.attachEvents=new bt,this.detachEvents=new bt,this.name=a||di,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),s=this.parentContexts.getOrCreateContext(this.name).children,l=new EF(e,s,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(V(Gu),V(Ra),V(Os),function Ms(t){return function fk(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const a=e[r];if(i_(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(a===n)return e[r+1];r+=2}}}return null}(Qn(),t)}("name"),V(sa))},t.\u0275dir=nt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class EF{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===cc?this.route:n===Gu?this.childContexts:this.parent.get(n,e)}}let bR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Tt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&D(0,"router-outlet")},directives:[o0],encapsulation:2}),t})();function _R(t,n=""){for(let e=0;e<t.length;e++){const i=t[e];NF(i,BF(n,i))}}function NF(t,n){t.children&&_R(t.children,n)}function BF(t,n){return n?t||n.path?t&&!n.path?`${t}/`:!t&&n.path?n.path:`${t}/${n.path}`:"":t}function s0(t){const n=t.children&&t.children.map(s0),e=n?Object.assign(Object.assign({},t),{children:n}):Object.assign({},t);return!e.component&&(n||e.loadChildren)&&e.outlet&&e.outlet!==di&&(e.component=bR),e}function Ma(t){return t.outlet||di}function yR(t,n){const e=t.filter(i=>Ma(i)===n);return e.push(...t.filter(i=>Ma(i)!==n)),e}const wR={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function kf(t,n,e){var i;if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},wR):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(n.matcher||QB)(e,t,n);if(!a)return Object.assign({},wR);const o={};fr(a.posParams,(l,c)=>{o[c]=l.path});const s=a.consumed.length>0?Object.assign(Object.assign({},o),a.consumed[a.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:s,positionalParamSegments:null!==(i=a.posParams)&&void 0!==i?i:{}}}function Mf(t,n,e,i,r="corrected"){if(e.length>0&&function UF(t,n,e){return e.some(i=>Af(t,n,i)&&Ma(i)!==di)}(t,e,i)){const o=new Ci(n,function LF(t,n,e,i){const r={};r[di]=i,i._sourceSegment=t,i._segmentIndexShift=n.length;for(const a of e)if(""===a.path&&Ma(a)!==di){const o=new Ci([],{});o._sourceSegment=t,o._segmentIndexShift=n.length,r[Ma(a)]=o}return r}(t,n,i,new Ci(e,t.children)));return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function HF(t,n,e){return e.some(i=>Af(t,n,i))}(t,e,i)){const o=new Ci(t.segments,function FF(t,n,e,i,r,a){const o={};for(const s of i)if(Af(t,e,s)&&!r[Ma(s)]){const l=new Ci([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===a?t.segments.length:n.length,o[Ma(s)]=l}return Object.assign(Object.assign({},r),o)}(t,n,e,i,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:e}}const a=new Ci(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:e}}function Af(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function CR(t,n,e,i){return!!(Ma(t)===i||i!==di&&Af(n,e,t))&&("**"===t.path||kf(n,t,e).matched)}function SR(t,n,e){return 0===n.length&&!t.children[e]}class zu{constructor(n){this.segmentGroup=n||null}}class TR{constructor(n){this.urlTree=n}}function Pf(t){return new $e(n=>n.error(new zu(t)))}function RR(t){return new $e(n=>n.error(new TR(t)))}function GF(t){return new $e(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class $F{constructor(n,e,i,r,a){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=n.get(No)}apply(){const n=Mf(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ci(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,e,di).pipe(Xt(a=>this.createUrlTree(l0(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vs(a=>{if(a instanceof TR)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof zu?this.noMatchError(a):a}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,di).pipe(Xt(r=>this.createUrlTree(l0(r),n.queryParams,n.fragment))).pipe(vs(r=>{throw r instanceof zu?this.noMatchError(r):r}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,e,i){const r=n.segments.length>0?new Ci([],{[di]:n}):n;return new Hs(r,e,i)}expandSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,e,i).pipe(Xt(a=>new Ci([],a))):this.expandSegment(n,i,e,i.segments,r,!0)}expandChildren(n,e,i){const r=[];for(const a of Object.keys(i.children))"primary"===a?r.unshift(a):r.push(a);return rr(r).pipe(Ou(a=>{const o=i.children[a],s=yR(e,a);return this.expandSegmentGroup(n,s,o,a).pipe(Xt(l=>({segment:l,outlet:a})))}),UT((a,o)=>(a[o.outlet]=o.segment,a),{}),function NB(t,n){const e=arguments.length>=2;return i=>i.pipe(t?hr((r,a)=>t(r,a,i)):je,qm(1),e?GT(n):HT(()=>new bf))}())}expandSegment(n,e,i,r,a,o){return rr(i).pipe(Ou(s=>this.expandSegmentAgainstRoute(n,e,i,s,r,a,o).pipe(vs(c=>{if(c instanceof zu)return zt(null);throw c}))),oc(s=>!!s),vs((s,l)=>{if(s instanceof bf||"EmptyError"===s.name){if(SR(e,r,a))return zt(new Ci([],{}));throw new zu(e)}throw s}))}expandSegmentAgainstRoute(n,e,i,r,a,o,s){return CR(r,e,a,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,e,r,a,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o):Pf(e):Pf(e)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const a=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?RR(a):this.lineralizeSegments(i,a).pipe(Bn(o=>{const s=new Ci(o,{});return this.expandSegment(n,s,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o){const{matched:s,consumedSegments:l,lastChild:c,positionalParamSegments:u}=kf(e,r,a);if(!s)return Pf(e);const f=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?RR(f):this.lineralizeSegments(r,f).pipe(Bn(v=>this.expandSegment(n,e,i,v.concat(a.slice(c)),o,!1)))}matchSegmentAgainstRoute(n,e,i,r,a){if("**"===i.path)return i.loadChildren?(i._loadedConfig?zt(i._loadedConfig):this.configLoader.load(n.injector,i)).pipe(Xt(v=>(i._loadedConfig=v,new Ci(r,{})))):zt(new Ci(r,{}));const{matched:o,consumedSegments:s,lastChild:l}=kf(e,i,r);if(!o)return Pf(e);const c=r.slice(l);return this.getChildConfig(n,i,r).pipe(Bn(f=>{const v=f.module,b=f.routes,{segmentGroup:y,slicedSegments:C}=Mf(e,s,c,b),T=new Ci(y.segments,y.children);if(0===C.length&&T.hasChildren())return this.expandChildren(v,b,T).pipe(Xt(B=>new Ci(s,B)));if(0===b.length&&0===C.length)return zt(new Ci(s,{}));const M=Ma(i)===a;return this.expandSegment(v,T,b,C,M?di:a,!0).pipe(Xt(w=>new Ci(s.concat(w.segments),w.children)))}))}getChildConfig(n,e,i){return e.children?zt(new a0(e.children,n)):e.loadChildren?void 0!==e._loadedConfig?zt(e._loadedConfig):this.runCanLoadGuards(n.injector,e,i).pipe(Bn(r=>r?this.configLoader.load(n.injector,e).pipe(Xt(a=>(e._loadedConfig=a,a))):function zF(t){return new $e(n=>n.error(Xm(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):zt(new a0([],n))}runCanLoadGuards(n,e,i){const r=e.canLoad;return r&&0!==r.length?zt(r.map(o=>{const s=n.get(o);let l;if(function AF(t){return t&&ms(t.canLoad)}(s))l=s.canLoad(e,i);else{if(!ms(s))throw new Error("Invalid CanLoad guard");l=s(e,i)}return wo(l)})).pipe(Hu(),Rr(o=>{if(!zs(o))return;const s=Xm(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw s.url=o,s}),Xt(o=>!0===o)):zt(!0)}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return zt(i);if(r.numberOfChildren>1||!r.children[di])return GF(n.redirectTo);r=r.children[di]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreatreUrlTree(n,e,i,r){const a=this.createSegmentGroup(n,e.root,i,r);return new Hs(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return fr(n,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const s=r.substring(1);i[a]=e[s]}else i[a]=r}),i}createSegmentGroup(n,e,i,r){const a=this.createSegments(n,e.segments,i,r);let o={};return fr(e.children,(s,l)=>{o[l]=this.createSegmentGroup(n,s,i,r)}),new Ci(a,o)}createSegments(n,e,i,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(n,a,r):this.findOrReturn(a,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${n}'. Cannot find '${e.path}'.`);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}function l0(t){const n={};for(const i of Object.keys(t.children)){const a=l0(t.children[i]);(a.segments.length>0||a.hasChildren())&&(n[i]=a)}return function qF(t){if(1===t.numberOfChildren&&t.children[di]){const n=t.children[di];return new Ci(t.segments.concat(n.segments),n.children)}return t}(new Ci(t.segments,n))}class DR{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Vf{constructor(n,e){this.component=n,this.route=e}}function XF(t,n,e){const i=t._root;return ju(i,n?n._root:null,e,[i.value])}function If(t,n,e){const i=function QF(t){if(!t)return null;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(n);return(i?i.module.injector:e).get(t)}function ju(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=lc(n);return t.children.forEach(o=>{(function KF(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,o=n?n.value:null,s=e?e.getContext(t.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){const l=function ZF(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Gs(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Gs(t.url,n.url)||!yo(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!e0(t,n)||!yo(t.queryParams,n.queryParams);default:return!e0(t,n)}}(o,a,a.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new DR(i)):(a.data=o.data,a._resolvedData=o._resolvedData),ju(t,n,a.component?s?s.children:null:e,i,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new Vf(s.outlet.component,o))}else o&&$u(n,s,r),r.canActivateChecks.push(new DR(i)),ju(t,null,a.component?s?s.children:null:e,i,r)})(o,a[o.value.outlet],e,i.concat([o.value]),r),delete a[o.value.outlet]}),fr(a,(o,s)=>$u(o,e.getContext(s),r)),r}function $u(t,n,e){const i=lc(t),r=t.value;fr(i,(a,o)=>{$u(a,r.component?n?n.children.getContext(o):null:n,e)}),e.canDeactivateChecks.push(new Vf(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}class s5{}function xR(t){return new $e(n=>n.error(t))}class c5{constructor(n,e,i,r,a,o){this.rootComponentType=n,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}recognize(){const n=Mf(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,n,di);if(null===e)return null;const i=new Rf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},di,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new jo(i,e),a=new dR(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(n){const e=n.value,i=uR(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(n,e):this.processSegment(n,e,e.segments,i)}processChildren(n,e){const i=[];for(const a of Object.keys(e.children)){const o=e.children[a],s=yR(n,a),l=this.processSegmentGroup(s,o,a);if(null===l)return null;i.push(...l)}const r=kR(i);return function u5(t){t.sort((n,e)=>n.value.outlet===di?-1:e.value.outlet===di?1:n.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(n,e,i,r){for(const a of n){const o=this.processSegmentAgainstRoute(a,e,i,r);if(null!==o)return o}return SR(e,i,r)?[]:null}processSegmentAgainstRoute(n,e,i,r){if(n.redirectTo||!CR(n,e,i,r))return null;let a,o=[],s=[];if("**"===n.path){const b=i.length>0?QT(i).parameters:{};a=new Rf(i,b,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,PR(n),Ma(n),n.component,n,MR(e),AR(e)+i.length,VR(n))}else{const b=kf(e,n,i);if(!b.matched)return null;o=b.consumedSegments,s=i.slice(b.lastChild),a=new Rf(o,b.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,PR(n),Ma(n),n.component,n,MR(e),AR(e)+o.length,VR(n))}const l=function d5(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(n),{segmentGroup:c,slicedSegments:u}=Mf(e,o,s,l.filter(b=>void 0===b.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const b=this.processChildren(l,c);return null===b?null:[new jo(a,b)]}if(0===l.length&&0===u.length)return[new jo(a,[])];const f=Ma(n)===r,v=this.processSegment(l,c,u,f?di:r);return null===v?null:[new jo(a,v)]}}function h5(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function kR(t){const n=[],e=new Set;for(const i of t){if(!h5(i)){n.push(i);continue}const r=n.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=kR(i.children);n.push(new jo(i.value,r))}return n.filter(i=>!e.has(i))}function MR(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function AR(t){let n=t,e=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift?n._segmentIndexShift:0;return e-1}function PR(t){return t.data||{}}function VR(t){return t.resolve||{}}function IR(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function c0(t){return Go(n=>{const e=t(n);return e?rr(e).pipe(Xt(()=>n)):zt(n)})}class y5 extends class _5{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}{}const u0=new si("ROUTES");class OR{constructor(n,e,i,r){this.injector=n,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(n,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(Xt(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=a.create(n);return new a0(YT(o.injector.get(u0,void 0,Yt.Self|Yt.Optional)).map(s0),o)}),vs(a=>{throw e._loader$=void 0,a}));return e._loader$=new IB(r,()=>new Te).pipe(LT()),e._loader$}loadModuleFactory(n){return wo(n()).pipe(Bn(e=>e instanceof Qw?zt(e):rr(this.compiler.compileModuleAsync(e))))}}class C5{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,e){return n}}function S5(t){throw t}function T5(t,n,e){return n.parse("/")}function ER(t,n){return zt(null)}const R5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},D5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let la=(()=>{class t{constructor(e,i,r,a,o,s,l){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=a,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Te,this.errorHandler=S5,this.malformedUriErrorHandler=T5,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ER,afterPreactivation:ER},this.urlHandlingStrategy=new C5,this.routeReuseStrategy=new y5,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(No),this.console=o.get(VC);const f=o.get(ln);this.isNgZoneEnabled=f instanceof ln&&ln.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function ZB(){return new Hs(new Ci([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new OR(o,s,v=>this.triggerEvent(new jT(v)),v=>this.triggerEvent(new $T(v))),this.routerState=cR(this.currentUrlTree,this.rootComponentType),this.transitions=new Mn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(hr(r=>0!==r.id),Xt(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Go(r=>{let a=!1,o=!1;return zt(r).pipe(Rr(s=>{this.currentNavigation={id:s.id,initialUrl:s.currentRawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Go(s=>{const l=this.browserUrlTree.toString(),c=!this.navigated||s.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Of(s.source)&&(this.browserUrlTree=s.extractedUrl),zt(s).pipe(Go(f=>{const v=this.transitions.getValue();return i.next(new Wm(f.id,this.serializeUrl(f.extractedUrl),f.source,f.restoredState)),v!==this.transitions.getValue()?Ba:Promise.resolve(f)}),function WF(t,n,e,i){return Go(r=>function jF(t,n,e,i,r){return new $F(t,n,e,i,r).apply()}(t,n,e,r.extractedUrl,i).pipe(Xt(a=>Object.assign(Object.assign({},r),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Rr(f=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:f.urlAfterRedirects})}),function f5(t,n,e,i,r){return Bn(a=>function l5(t,n,e,i,r="emptyOnly",a="legacy"){try{const o=new c5(t,n,e,i,r,a).recognize();return null===o?xR(new s5):zt(o)}catch(o){return xR(o)}}(t,n,a.urlAfterRedirects,e(a.urlAfterRedirects),i,r).pipe(Xt(o=>Object.assign(Object.assign({},a),{targetSnapshot:o}))))}(this.rootComponentType,this.config,f=>this.serializeUrl(f),this.paramsInheritanceStrategy,this.relativeLinkResolution),Rr(f=>{if("eager"===this.urlUpdateStrategy){if(!f.extras.skipLocationChange){const b=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);this.setBrowserUrl(b,f)}this.browserUrlTree=f.urlAfterRedirects}const v=new LB(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);i.next(v)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:v,extractedUrl:b,source:y,restoredState:C,extras:T}=s,M=new Wm(v,this.serializeUrl(b),y,C);i.next(M);const S=cR(b,this.rootComponentType).snapshot;return zt(Object.assign(Object.assign({},s),{targetSnapshot:S,urlAfterRedirects:b,extras:Object.assign(Object.assign({},T),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=s.rawUrl,s.resolve(null),Ba}),c0(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:f,extras:{skipLocationChange:v,replaceUrl:b}}=s;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:f,skipLocationChange:!!v,replaceUrl:!!b})}),Rr(s=>{const l=new UB(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot);this.triggerEvent(l)}),Xt(s=>Object.assign(Object.assign({},s),{guards:XF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)})),function JF(t,n){return Bn(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:o}}=e;return 0===o.length&&0===a.length?zt(Object.assign(Object.assign({},e),{guardsResult:!0})):function e5(t,n,e,i){return rr(t).pipe(Bn(r=>function o5(t,n,e,i,r){const a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return a&&0!==a.length?zt(a.map(s=>{const l=If(s,n,r);let c;if(function IF(t){return t&&ms(t.canDeactivate)}(l))c=wo(l.canDeactivate(t,n,e,i));else{if(!ms(l))throw new Error("Invalid CanDeactivate guard");c=wo(l(t,n,e,i))}return c.pipe(oc())})).pipe(Hu()):zt(!0)}(r.component,r.route,e,n,i)),oc(r=>!0!==r,!0))}(o,i,r,t).pipe(Bn(s=>s&&function MF(t){return"boolean"==typeof t}(s)?function t5(t,n,e,i){return rr(n).pipe(Ou(r=>Iu(function n5(t,n){return null!==t&&n&&n(new jB(t)),zt(!0)}(r.route.parent,i),function i5(t,n){return null!==t&&n&&n(new qB(t)),zt(!0)}(r.route,i),function a5(t,n,e){const i=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(o=>function YF(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(o)).filter(o=>null!==o).map(o=>FT(()=>zt(o.guards.map(l=>{const c=If(l,o.node,e);let u;if(function VF(t){return t&&ms(t.canActivateChild)}(c))u=wo(c.canActivateChild(i,t));else{if(!ms(c))throw new Error("Invalid CanActivateChild guard");u=wo(c(i,t))}return u.pipe(oc())})).pipe(Hu())));return zt(a).pipe(Hu())}(t,r.path,e),function r5(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return zt(!0);const r=i.map(a=>FT(()=>{const o=If(a,n,e);let s;if(function PF(t){return t&&ms(t.canActivate)}(o))s=wo(o.canActivate(n,t));else{if(!ms(o))throw new Error("Invalid CanActivate guard");s=wo(o(n,t))}return s.pipe(oc())}));return zt(r).pipe(Hu())}(t,r.route,e))),oc(r=>!0!==r,!0))}(i,a,t,n):zt(s)),Xt(s=>Object.assign(Object.assign({},e),{guardsResult:s})))})}(this.ngModule.injector,s=>this.triggerEvent(s)),Rr(s=>{if(zs(s.guardsResult)){const c=Xm(`Redirecting to "${this.serializeUrl(s.guardsResult)}"`);throw c.url=s.guardsResult,c}const l=new HB(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.triggerEvent(l)}),hr(s=>!!s.guardsResult||(this.restoreHistory(s),this.cancelNavigationTransition(s,""),!1)),c0(s=>{if(s.guards.canActivateChecks.length)return zt(s).pipe(Rr(l=>{const c=new GB(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Go(l=>{let c=!1;return zt(l).pipe(function p5(t,n){return Bn(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return zt(e);let a=0;return rr(r).pipe(Ou(o=>function g5(t,n,e,i){return function v5(t,n,e,i){const r=IR(t);if(0===r.length)return zt({});const a={};return rr(r).pipe(Bn(o=>function m5(t,n,e,i){const r=If(t,n,i);return wo(r.resolve?r.resolve(n,e):r(n,e))}(t[o],n,e,i).pipe(Rr(s=>{a[o]=s}))),qm(1),Bn(()=>IR(a).length===r.length?zt(a):Ba))}(t._resolve,t,n,i).pipe(Xt(a=>(t._resolvedData=a,t.data=Object.assign(Object.assign({},t.data),uR(t,e).resolve),null)))}(o.route,i,t,n)),Rr(()=>a++),qm(1),Bn(o=>a===r.length?zt(e):Ba))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Rr({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Rr(l=>{const c=new zB(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),c0(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:f,extras:{skipLocationChange:v,replaceUrl:b}}=s;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:f,skipLocationChange:!!v,replaceUrl:!!b})}),Xt(s=>{const l=function vF(t,n,e){const i=Fu(t,n._root,e?e._root:void 0);return new lR(i,n)}(this.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return Object.assign(Object.assign({},s),{targetRouterState:l})}),Rr(s=>{this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects)}),((t,n,e)=>Xt(i=>(new xF(n,i.targetRouterState,i.currentRouterState,e).activate(t),i)))(this.rootContexts,this.routeReuseStrategy,s=>this.triggerEvent(s)),Rr({next(){a=!0},complete(){a=!0}}),function BB(t){return Nt((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}(()=>{var s;a||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(s=this.currentNavigation)||void 0===s?void 0:s.id)===r.id&&(this.currentNavigation=null)}),vs(s=>{if(o=!0,function YB(t){return t&&t[WT]}(s)){const l=zs(s.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new zT(r.id,this.serializeUrl(r.extractedUrl),s.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(s.url,this.rawUrlTree),f={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Of(r.source)};this.scheduleNavigation(u,"imperative",null,f,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new FB(r.id,this.serializeUrl(r.extractedUrl),s);i.next(l);try{r.resolve(this.errorHandler(s))}catch(c){r.reject(c)}}return Ba}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const a={replaceUrl:!0},o=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}const s=this.parseUrl(e.url);this.scheduleNavigation(s,i,o,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){_R(e),this.config=e.map(s0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:a,fragment:o,queryParamsHandling:s,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let f=null;switch(s){case"merge":f=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=a||null}return null!==f&&(f=this.removeEmptyProps(f)),function _F(t,n,e,i,r){if(0===e.length)return t0(n.root,n.root,n,i,r);const a=function yF(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new pR(!0,0,t);let n=0,e=!1;const i=t.reduce((r,a,o)=>{if("object"==typeof a&&null!=a){if(a.outlets){const s={};return fr(a.outlets,(l,c)=>{s[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:s}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===o?(a.split("/").forEach((s,l)=>{0==l&&"."===s||(0==l&&""===s?e=!0:".."===s?n++:""!=s&&r.push(s))}),r):[...r,a]},[]);return new pR(e,n,i)}(e);if(a.toRoot())return t0(n.root,new Ci([],{}),n,i,r);const o=function wF(t,n,e){if(t.isAbsolute)return new n0(n.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new n0(a,a===n.root,0)}const i=Df(t.commands[0])?0:1;return function CF(t,n,e){let i=t,r=n,a=e;for(;a>r;){if(a-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new n0(i,!1,r-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,n,t),s=o.processChildren?xf(o.segmentGroup,o.index,a.commands):gR(o.segmentGroup,o.index,a.commands);return t0(o.segmentGroup,s,n,i,r)}(c,this.currentUrlTree,e,f,null!=u?u:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=zs(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function x5(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${n}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},R5):!1===i?Object.assign({},D5):i,zs(e))return ZT(this.currentUrlTree,e,r);const a=this.parseUrl(e);return ZT(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const a=e[r];return null!=a&&(i[r]=a),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Eu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,a,o){var s,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,f=Of(i)&&u&&!Of(u.source),v=u.rawUrl.toString()===e.toString(),b=u.id===(null===(s=this.currentNavigation)||void 0===s?void 0:s.id);if(f&&v&&b)return Promise.resolve(!0);let C,T,M;o?(C=o.resolve,T=o.reject,M=o.promise):M=new Promise((B,j)=>{C=B,T=j});const S=++this.navigationId;let w;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),w=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):w=0,this.setTransition({id:S,targetPageId:w,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:C,reject:T,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(B=>Promise.reject(B))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(e,i=!1){var r,a;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new zT(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return t.\u0275fac=function(e){uv()},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();function Of(t){return"imperative"!==t}class NR{}class BR{preload(n,e){return zt(null)}}let FR=(()=>{class t{constructor(e,i,r,a){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=new OR(r,i,l=>e.triggerEvent(new jT(l)),l=>e.triggerEvent(new $T(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(hr(e=>e instanceof Eu),Ou(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(No);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const a of i)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children));return rr(r).pipe(Vc(),Xt(a=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?zt(i._loadedConfig):this.loader.load(e.injector,i)).pipe(Bn(a=>(i._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(He(la),He(Bh),He(Ln),He(NR))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})(),f0=(()=>{class t{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Wm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Eu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof qT&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new qT(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){uv()},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();const js=new si("ROUTER_CONFIGURATION"),LR=new si("ROUTER_FORROOT_GUARD"),P5=[im,{provide:iR,useClass:nR},{provide:la,useFactory:function N5(t,n,e,i,r,a,o={},s,l){const c=new la(null,t,n,e,i,r,YT(a));return s&&(c.urlHandlingStrategy=s),l&&(c.routeReuseStrategy=l),function B5(t,n){t.errorHandler&&(n.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(n.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(n.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(n.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(n.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(n.canceledNavigationResolution=t.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var f,v;null===(f=console.group)||void 0===f||f.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(v=console.groupEnd)||void 0===v||v.call(console)}),c},deps:[iR,Gu,im,Ln,Bh,u0,js,[class w5{},new uo],[class b5{},new uo]]},Gu,{provide:cc,useFactory:function F5(t){return t.routerState.root},deps:[la]},FR,BR,class A5{preload(n,e){return e().pipe(vs(()=>zt(null)))}},{provide:js,useValue:{enableTracing:!1}}];function V5(){return new FC("Router",la)}let UR=(()=>{class t{constructor(e,i){}static forRoot(e,i){return{ngModule:t,providers:[P5,HR(e),{provide:LR,useFactory:E5,deps:[[la,new uo,new Dl]]},{provide:js,useValue:i||{}},{provide:ic,useFactory:O5,deps:[Bs,[new Yc(tm),new uo],js]},{provide:f0,useFactory:I5,deps:[la,j3,js]},{provide:NR,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:BR},{provide:FC,multi:!0,useFactory:V5},[p0,{provide:Eh,multi:!0,useFactory:L5,deps:[p0]},{provide:GR,useFactory:U5,deps:[p0]},{provide:PC,multi:!0,useExisting:GR}]]}}static forChild(e){return{ngModule:t,providers:[HR(e)]}}}return t.\u0275fac=function(e){return new(e||t)(He(LR,8),He(la,8))},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({}),t})();function I5(t,n,e){return e.scrollOffset&&n.setOffset(e.scrollOffset),new f0(t,n,e)}function O5(t,n,e={}){return e.useHash?new xE(t,n):new rS(t,n)}function E5(t){return"guarded"}function HR(t){return[{provide:bk,multi:!0,useValue:t},{provide:u0,multi:!0,useValue:t}]}let p0=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Te}appInitializer(){return this.injector.get(TE,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(s=>i=s),a=this.injector.get(la),o=this.injector.get(js);return"disabled"===o.initialNavigation?(a.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?zt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),a.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(js),r=this.injector.get(FR),a=this.injector.get(f0),o=this.injector.get(la),s=this.injector.get(Es);e===s.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),a.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(He(Ln))},t.\u0275prov=gt({token:t,factory:t.\u0275fac}),t})();function L5(t){return t.appInitializer.bind(t)}function U5(t){return t.bootstrapListener.bind(t)}const GR=new si("Router Initializer"),G5=[];let z5=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[UR.forRoot(G5)],UR]}),t})();function zR(t,n,e,i,r,a,o){try{var s=t[a](o),l=s.value}catch(c){return void e(c)}s.done?n(l):Promise.resolve(l).then(i,r)}function Br(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var a=t.apply(n,e);function o(l){zR(a,i,r,o,s,"next",l)}function s(l){zR(a,i,r,o,s,"throw",l)}o(void 0)})}}var ci=(()=>{return(t=ci||(ci={}))[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",ci;var t})();const Fr=new class j5{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(n){this._typeMetadatas.has(n.target)||this._typeMetadatas.set(n.target,new Map),this._typeMetadatas.get(n.target).set(n.propertyName,n)}addTransformMetadata(n){this._transformMetadatas.has(n.target)||this._transformMetadatas.set(n.target,new Map),this._transformMetadatas.get(n.target).has(n.propertyName)||this._transformMetadatas.get(n.target).set(n.propertyName,[]),this._transformMetadatas.get(n.target).get(n.propertyName).push(n)}addExposeMetadata(n){this._exposeMetadatas.has(n.target)||this._exposeMetadatas.set(n.target,new Map),this._exposeMetadatas.get(n.target).set(n.propertyName,n)}addExcludeMetadata(n){this._excludeMetadatas.has(n.target)||this._excludeMetadatas.set(n.target,new Map),this._excludeMetadatas.get(n.target).set(n.propertyName,n)}findTransformMetadatas(n,e,i){return this.findMetadatas(this._transformMetadatas,n,e).filter(r=>!r.options||!0===r.options.toClassOnly&&!0===r.options.toPlainOnly||(!0===r.options.toClassOnly?i===ci.CLASS_TO_CLASS||i===ci.PLAIN_TO_CLASS:!0!==r.options.toPlainOnly||i===ci.CLASS_TO_PLAIN))}findExcludeMetadata(n,e){return this.findMetadata(this._excludeMetadatas,n,e)}findExposeMetadata(n,e){return this.findMetadata(this._exposeMetadatas,n,e)}findExposeMetadataByCustomName(n,e){return this.getExposedMetadatas(n).find(i=>i.options&&i.options.name===e)}findTypeMetadata(n,e){return this.findMetadata(this._typeMetadatas,n,e)}getStrategy(n){const e=this._excludeMetadatas.get(n),i=e&&e.get(void 0),r=this._exposeMetadatas.get(n),a=r&&r.get(void 0);return i&&a||!i&&!a?"none":i?"excludeAll":"exposeAll"}getExposedMetadatas(n){return this.getMetadata(this._exposeMetadatas,n)}getExcludedMetadatas(n){return this.getMetadata(this._excludeMetadatas,n)}getExposedProperties(n,e){return this.getExposedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===ci.CLASS_TO_CLASS||e===ci.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===ci.CLASS_TO_PLAIN)).map(i=>i.propertyName)}getExcludedProperties(n,e){return this.getExcludedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===ci.CLASS_TO_CLASS||e===ci.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===ci.CLASS_TO_PLAIN)).map(i=>i.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(n,e){const i=n.get(e);let r;i&&(r=Array.from(i.values()).filter(o=>void 0!==o.propertyName));const a=[];for(const o of this.getAncestors(e)){const s=n.get(o);if(s){const l=Array.from(s.values()).filter(c=>void 0!==c.propertyName);a.push(...l)}}return a.concat(r||[])}findMetadata(n,e,i){const r=n.get(e);if(r){const a=r.get(i);if(a)return a}for(const a of this.getAncestors(e)){const o=n.get(a);if(o){const s=o.get(i);if(s)return s}}}findMetadatas(n,e,i){const r=n.get(e);let a;r&&(a=r.get(i));const o=[];for(const s of this.getAncestors(e)){const l=n.get(s);l&&l.has(i)&&o.push(...l.get(i))}return o.slice().reverse().concat((a||[]).slice().reverse())}getAncestors(n){if(!n)return[];if(!this._ancestorsMap.has(n)){const e=[];for(let i=Object.getPrototypeOf(n.prototype.constructor);void 0!==i.prototype;i=Object.getPrototypeOf(i.prototype.constructor))e.push(i);this._ancestorsMap.set(n,e)}return this._ancestorsMap.get(n)}};function lt(t,n={}){return function(e,i){const r=Reflect.getMetadata("design:type",e,i);Fr.addTypeMetadata({target:e.constructor,propertyName:i,reflectedType:r,typeFunction:t,options:n})}}var L=(()=>{return(t=L||(L={}))[t.Horse=0]="Horse",t[t.Cheetah=1]="Cheetah",t[t.Hare=2]="Hare",t[t.Monkey=3]="Monkey",t[t.Goat=4]="Goat",t[t.Gecko=5]="Gecko",t[t.Dolphin=6]="Dolphin",t[t.Shark=7]="Shark",t[t.Octopus=8]="Octopus",t[t.Penguin=9]="Penguin",t[t.Caribou=10]="Caribou",t[t.Salamander=11]="Salamander",t[t.Fox=12]="Fox",t[t.Warthog=13]="Warthog",t[t.Whale=14]="Whale",L;var t})(),F=(()=>{return(t=F||(F={}))[t.Flatland=0]="Flatland",t[t.Mountain=1]="Mountain",t[t.Ocean=2]="Ocean",t[t.Tundra=3]="Tundra",t[t.Volcanic=4]="Volcanic",F;var t})();class te{constructor(n,e,i){this.name=n,this.amount=e,void 0!==i&&(this.itemType=i)}makeCopy(n){var e=new te("",0);return e.name=JSON.parse(JSON.stringify(n.name)),e.amount=JSON.parse(JSON.stringify(n.amount)),e.itemType=JSON.parse(JSON.stringify(n.itemType)),e}}var G=(()=>{return(t=G||(G={}))[t.Animal=0]="Animal",t[t.Food=1]="Food",t[t.Training=2]="Training",t[t.Ability=3]="Ability",t[t.Specialty=4]="Specialty",t[t.Equipment=5]="Equipment",t[t.Resources=6]="Resources",t[t.Progression=7]="Progression",t[t.Other=8]="Other",t[t.Consumable=9]="Consumable",G;var t})();class ca{constructor(){this.totalRewards=0,this.rewardsObtained=0,this.rewards=[]}}We([lt(()=>te),it("design:type",Array)],ca.prototype,"rewards",void 0);class $s{constructor(){this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.legacyTrackAvailable=!1,this.noviceTrack=new ca,this.noviceTrack.totalRewards=12;var n=50;this.noviceTrack.rewards.push(new te("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new te("Bonus Breed XP Gain From Training",1,G.Other)),this.noviceTrack.rewards.push(new te("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new te("Bonus Breed XP Gain From Free Races",1,G.Other)),this.noviceTrack.rewards.push(new te("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new te("Bonus Breed XP Gain From Training",1,G.Other)),this.noviceTrack.rewards.push(new te("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new te("Bonus Breed XP Gain From Free Races",1,G.Other)),this.noviceTrack.rewards.push(new te("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new te("Bonus Breed XP Gain From Training",1,G.Other)),this.noviceTrack.rewards.push(new te("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new te("Bonus Breed XP Gain From Free Races",1,G.Other)),this.intermediateTrack=new ca,this.intermediateTrack.totalRewards=12,this.intermediateTrack.rewards.push(new te("Coins",200,G.Resources)),this.intermediateTrack.rewards.push(new te("Bonus Breed XP Gain From Training",2,G.Other)),this.intermediateTrack.rewards.push(new te("Medals",1,G.Resources)),this.intermediateTrack.rewards.push(new te("Diminishing Returns per Facility Level",2,G.Other)),this.intermediateTrack.rewards.push(new te("Training Time Reduction",1,G.Other)),this.intermediateTrack.rewards.push(new te("Bonus Breed XP Gain From Circuit Races",5,G.Other)),this.intermediateTrack.rewards.push(new te("Coins",200,G.Resources)),this.intermediateTrack.rewards.push(new te("Bonus Breed XP Gain From Free Races",1,G.Other)),this.intermediateTrack.rewards.push(new te("Medals",1,G.Resources)),this.intermediateTrack.rewards.push(new te("Bonus Breed XP Gain From Training",2,G.Other)),this.intermediateTrack.rewards.push(new te("Training Time Reduction",1,G.Other)),this.intermediateTrack.rewards.push(new te("Diminishing Returns per Facility Level",3,G.Other)),this.masterTrack=new ca,this.masterTrack.totalRewards=12,this.masterTrack.rewards.push(new te("Bonus Breed XP Gain From Free Races",5,G.Other)),this.masterTrack.rewards.push(new te("Diminishing Returns per Facility Level",2,G.Other)),this.masterTrack.rewards.push(new te("Training Time Reduction",1,G.Other)),this.masterTrack.rewards.push(new te("Coins",1e3,G.Resources)),this.masterTrack.rewards.push(new te("Bonus Breed XP Gain From Training",3,G.Other)),this.masterTrack.rewards.push(new te("Bonus Talents",2,G.Other)),this.masterTrack.rewards.push(new te("Training Time Reduction",1,G.Other)),this.masterTrack.rewards.push(new te("Coins",1e3,G.Resources)),this.masterTrack.rewards.push(new te("Orb Pendant",1,G.Other)),this.masterTrack.rewards.push(new te("Diminishing Returns per Facility Level",3,G.Other)),this.masterTrack.rewards.push(new te("Training Time Reduction",1,G.Other)),this.masterTrack.rewards.push(new te("Bonus Talents",3,G.Other)),this.legacyTrack=new ca,this.legacyTrack.totalRewards=4,this.legacyTrack.rewards.push(new te("Bonus Breed XP Gain From Training",5,G.Other)),this.legacyTrack.rewards.push(new te("Bonus Base Ability Efficiency",.05,G.Other)),this.legacyTrack.rewards.push(new te("Bonus Orb XP Gain",.1,G.Other)),this.legacyTrack.rewards.push(new te("Nectar of the Gods",1,G.Other))}getTotalRewardCount(){return this.noviceTrack.totalRewards+this.intermediateTrack.totalRewards+this.masterTrack.totalRewards+this.legacyTrack.totalRewards}getTotalRewardsObtained(){return this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained-this.legacyTrack.rewardsObtained}getTotalRewardsRemaining(){return this.getTotalRewardCount()-this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained-this.legacyTrack.rewardsObtained}getTotalTrainingTrackBonusBreedXpFromFreeRaces(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=4&&(n+=this.noviceTrack.rewards[3].amount),this.noviceTrack.rewardsObtained>=8&&(n+=this.noviceTrack.rewards[7].amount),this.noviceTrack.rewardsObtained>=12&&(n+=this.noviceTrack.rewards[11].amount),this.intermediateTrack.rewardsObtained>=8&&(n+=this.intermediateTrack.rewards[7].amount),this.masterTrack.rewardsObtained>=1&&(n+=this.masterTrack.rewards[0].amount),n)}getTotalTrainingTrackBonusBreedXpFromCircuitRaces(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=6&&(n+=this.intermediateTrack.rewards[5].amount),n)}getTotalTrainingTrackBonusBreedXpFromTraining(n){var e=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=2&&(e+=this.noviceTrack.rewards[1].amount),this.noviceTrack.rewardsObtained>=6&&(e+=this.noviceTrack.rewards[5].amount),this.noviceTrack.rewardsObtained>=10&&(e+=this.noviceTrack.rewards[9].amount),this.intermediateTrack.rewardsObtained>=2&&(e+=this.intermediateTrack.rewards[1].amount),this.intermediateTrack.rewardsObtained>=10&&(e+=this.intermediateTrack.rewards[9].amount),this.masterTrack.rewardsObtained>=5&&(e+=this.masterTrack.rewards[4].amount),e+=5*n.legacyRaceCount,this.legacyTrack.rewardsObtained>=1&&(e+=5),e)}getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=4&&(n+=this.intermediateTrack.rewards[3].amount),this.intermediateTrack.rewardsObtained>=12&&(n+=this.intermediateTrack.rewards[11].amount),this.masterTrack.rewardsObtained>=2&&(n+=this.masterTrack.rewards[1].amount),this.masterTrack.rewardsObtained>=10&&(n+=this.masterTrack.rewards[9].amount),n)}getTotalTrainingTrackBonusTrainingTimeReduction(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=5&&(n+=this.intermediateTrack.rewards[4].amount),this.intermediateTrack.rewardsObtained>=11&&(n+=this.intermediateTrack.rewards[10].amount),this.masterTrack.rewardsObtained>=3&&(n+=this.masterTrack.rewards[2].amount),this.masterTrack.rewardsObtained>=7&&(n+=this.masterTrack.rewards[6].amount),this.masterTrack.rewardsObtained>=11&&(n+=this.masterTrack.rewards[10].amount),n)}getTotalTrainingTrackBonusTalents(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.masterTrack.rewardsObtained>=6&&(n+=this.masterTrack.rewards[5].amount),this.masterTrack.rewardsObtained>=12&&(n+=this.masterTrack.rewards[11].amount),n)}getTotalTrainingTrackBonusAbilityEfficiency(n){var e=0;return e=.05*n.legacyRaceCount,this.legacyTrack.rewardsObtained>=2&&(e+=.05),e}getTotalTrainingTrackBonusOrbXp(n){var e=0;return e=.1*n.legacyRaceCount,this.legacyTrack.rewardsObtained>=3&&(e+=.1),e}}We([lt(()=>ca),it("design:type",ca)],$s.prototype,"noviceTrack",void 0),We([lt(()=>ca),it("design:type",ca)],$s.prototype,"intermediateTrack",void 0),We([lt(()=>ca),it("design:type",ca)],$s.prototype,"masterTrack",void 0),We([lt(()=>ca),it("design:type",ca)],$s.prototype,"legacyTrack",void 0);class Ve{constructor(n,e,i,r,a,o){this.defaultStaminaModifier=5,this.defaultMaxSpeedModifier=.3,this.defaultAccelerationModifier=.1,this.defaultPowerModifier=1,this.defaultFocusModifier=5,this.defaultAdaptabilityModifier=5,this.defaultBurstDistanceModifier=1,this.diminishingReturnsDefaultStatThreshold=20,void 0!==n&&(this.topSpeed=n),void 0!==e&&(this.acceleration=e),void 0!==i&&(this.endurance=i),void 0!==r&&(this.power=r),void 0!==a&&(this.focus=a),void 0!==o&&(this.adaptability=o)}makeCopy(n){var e=new Ve;return e.topSpeed=n.topSpeed,e.acceleration=n.acceleration,e.endurance=n.endurance,e.power=n.power,e.focus=n.focus,e.adaptability=n.adaptability,e.stamina=n.stamina,e.maxSpeedMs=n.maxSpeedMs,e.accelerationMs=n.accelerationMs,e.powerMs=n.powerMs,e.focusMs=n.focusMs,e.adaptabilityMs=n.adaptabilityMs,e.burstChance=n.burstChance,e.burstDistance=n.burstDistance,e}calculateStamina(n,e,i){return null==n&&(n=this.defaultStaminaModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.endurance<=e?this.endurance*n*i:(e*n+(this.endurance-e)*(n*this.calculateDiminishingReturns(this.endurance-e)))*i}calculateMaxSpeed(n,e,i){return null==n&&(n=this.defaultMaxSpeedModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.topSpeed<=e?this.topSpeed*n*i:(e*n+(this.topSpeed-e)*(n*this.calculateDiminishingReturns(this.topSpeed-e)))*i}calculateTrueAcceleration(n,e,i){return null==n&&(n=this.defaultAccelerationModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.acceleration<=e?this.acceleration*n*i:(e*n+(this.acceleration-e)*(n*this.calculateDiminishingReturns(this.acceleration-e)))*i}calculateTruePower(n,e,i){return null==n&&(n=this.defaultPowerModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.power<=e?this.power*n*i:(e*n+(this.power-e)*(n*this.calculateDiminishingReturns(this.power-e)))*i}calculateTrueFocus(n,e,i){return null==n&&(n=this.defaultFocusModifier),null==i&&(i=1),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.focus<=e?this.focus*n*i:(e*n+(this.focus-e)*(n*this.calculateDiminishingReturns(this.focus-e)))*i}calculateTrueAdaptability(n,e,i){return null==n&&(n=this.defaultAdaptabilityModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.adaptability<=e?this.adaptability*n*i:(e*n+(this.adaptability-e)*(n*this.calculateDiminishingReturns(this.adaptability-e)))*i}calculateBurstChance(n,e,i){var r=this.focus,a=this.adaptability;return null!=e&&(r*=e/this.focusMs),null!=i&&(a*=i/this.adaptabilityMs),(a+r)*(1+n/4)/1e3*100}calculateBurstDistance(n,e,i){null==e&&(e=this.defaultBurstDistanceModifier);var r=this.power;return null!=i&&(r*=i/this.powerMs),r*(1+n/4)*e}maxSpeedMsPopover(){return"This is the max speed this animal can go during a race."}accelerationMsPopover(){return"This is how quickly this animal will gain speed."}staminaPopover(){return"Your animal loses stamina while racing. If its stamina reaches 0, it will slow down for a period of time while its stamina recharges."}powerMsPopover(){return"This increases the efficiency of your animal's ability."}focusMsPopover(){return"This is the average distance your animal can go without losing focus, causing them to stop."}adaptabilityMsPopover(){return"This is the average distance your animal can go without stumbling, causing them to slow down."}burstChancePopover(){return"Every time you enter a path, you have the chance to enter burst mode. This is your chance per 1000 meters that you will burst. Increase by improving Focus and Adaptability."}burstDistancePopover(){return"This is how far you can go while bursting. Increase by improving Power."}calculateDiminishingReturns(n){return 1/n**.6}addCurrentRacingStats(n){this.maxSpeedMs+=n.topSpeed,this.accelerationMs+=n.acceleration,this.stamina+=n.endurance,this.powerMs+=n.power,this.focusMs+=n.focus,this.adaptabilityMs+=n.adaptability}subtractCurrentRacingStats(n){this.maxSpeedMs-=n.topSpeed,this.accelerationMs-=n.acceleration,this.stamina-=n.endurance,this.powerMs-=n.power,this.focusMs-=n.focus,this.adaptabilityMs-=n.adaptability}multiplyCurrentRacingStats(n){this.maxSpeedMs*=n.topSpeed,this.accelerationMs*=n.acceleration,this.stamina*=n.endurance,this.powerMs*=n.power,this.focusMs*=n.focus,this.adaptabilityMs*=n.adaptability}divideCurrentRacingStats(n){this.maxSpeedMs/=n.topSpeed,this.accelerationMs/=n.acceleration,this.stamina/=n.endurance,this.powerMs/=n.power,this.focusMs/=n.focus,this.adaptabilityMs/=n.adaptability}}var Rt=(()=>{return(t=Rt||(Rt={}))[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large",Rt;var t})();class $o{constructor(){this.trainingTimeRemaining=7200,this.timeTrained=0,this.isAvailable=!1,this.purchasePrice=50}makeCopy(n){var e=new $o;return e.affectedStatRatios=JSON.parse(JSON.stringify(n.affectedStatRatios)),e.facilitySize=JSON.parse(JSON.stringify(n.facilitySize)),e.isAvailable=JSON.parse(JSON.stringify(n.isAvailable)),e.purchasePrice=JSON.parse(JSON.stringify(n.purchasePrice)),e.statGain=JSON.parse(JSON.stringify(n.statGain)),e.timeToComplete=JSON.parse(JSON.stringify(n.timeToComplete)),e.timeTrained=JSON.parse(JSON.stringify(n.timeTrained)),e.trainingCourseType=JSON.parse(JSON.stringify(n.trainingCourseType)),e.trainingName=JSON.parse(JSON.stringify(n.trainingName)),e.trainingType=JSON.parse(JSON.stringify(n.trainingType)),e}getFacilitySize(){return Rt[this.facilitySize]}getStatGainDescription(){var n="";return this.affectedStatRatios.topSpeed>0&&(n+="+"+this.statGain*this.affectedStatRatios.topSpeed+" Speed\n"),this.affectedStatRatios.acceleration>0&&(n+="+"+this.statGain*this.affectedStatRatios.acceleration+" Acceleration\n"),this.affectedStatRatios.endurance>0&&(n+="+"+this.statGain*this.affectedStatRatios.endurance+" Endurance\n"),this.affectedStatRatios.focus>0&&(n+="+"+this.statGain*this.affectedStatRatios.focus+" Focus\n"),this.affectedStatRatios.power>0&&(n+="+"+this.statGain*this.affectedStatRatios.power+" Power\n"),this.affectedStatRatios.adaptability>0&&(n+="+"+this.statGain*this.affectedStatRatios.adaptability+" Adaptability\n"),n}}We([lt(()=>Ve),it("design:type",Ve)],$o.prototype,"affectedStatRatios",void 0);class Ft{constructor(){this.abilityLevel=1,this.abilityXp=0,this.abilityMaxXp=50}}var ye=(()=>{return(t=ye||(ye={}))[t.topSpeed=0]="topSpeed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",ye;var t})();class Oi{constructor(n,e,i,r,a){void 0!==n&&(this.traitName=n),void 0!==e&&(this.requiredLevel=e),void 0!==i&&(this.researchLevel=i),void 0!==r&&(this.positiveStatGain=r),void 0!==a&&(this.negativeStatGain=a)}getStatGainDescription(n){var e="",i="";return this.positiveStatGain===ye.acceleration&&(e="Acceleration"),this.positiveStatGain===ye.adaptability&&(e="Adaptability"),this.positiveStatGain===ye.endurance&&(e="Endurance"),this.positiveStatGain===ye.focus&&(e="Focus"),this.positiveStatGain===ye.power&&(e="Power"),this.positiveStatGain===ye.topSpeed&&(e="Speed"),this.negativeStatGain===ye.acceleration&&(i="Acceleration"),this.negativeStatGain===ye.adaptability&&(i="Adaptability"),this.negativeStatGain===ye.endurance&&(i="Endurance"),this.negativeStatGain===ye.focus&&(i="Focus"),this.negativeStatGain===ye.power&&(i="Power"),this.negativeStatGain===ye.topSpeed&&(i="Speed"),"+"+this.researchLevel+"% "+e+", -"+(this.researchLevel>n?n:this.researchLevel)+"% "+i}}class qu{constructor(){this.maxSpeedModifier=1,this.accelerationModifier=1,this.staminaModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1}}class Wu{constructor(){this.bonusBreedXpGainFromLocalRaces=0,this.bonusBreedXpGainFromCircuitRaces=0,this.bonusBreedXpGainFromTraining=0,this.trainingTimeReduction=0,this.diminishingReturnsBonus=0,this.bonusTalents=0,this.bonusAbilityEfficiency=0,this.bonusOrbXp=0,this.bonusBreedModifierAmount=0,this.bonusTrainingBreedXpCertificateCount=0,this.bonusCircuitBreedXpCertificateCount=0,this.bonusLocalBreedXpCertificateCount=0,this.bonusDiminishingReturnsCertificateCount=0,this.certificateUseCap=30}makeCopy(n){var e=new Wu;return e.bonusBreedXpGainFromCircuitRaces=n.bonusBreedXpGainFromCircuitRaces,e.bonusBreedXpGainFromLocalRaces=n.bonusBreedXpGainFromLocalRaces,e.bonusBreedXpGainFromTraining=n.bonusBreedXpGainFromTraining,e.bonusCircuitBreedXpCertificateCount=n.bonusCircuitBreedXpCertificateCount,e.bonusDiminishingReturnsCertificateCount=n.bonusDiminishingReturnsCertificateCount,e.bonusLocalBreedXpCertificateCount=n.bonusLocalBreedXpCertificateCount,e.bonusTalents=n.bonusTalents,e.bonusTrainingBreedXpCertificateCount=n.bonusTrainingBreedXpCertificateCount,e.certificateUseCap=n.certificateUseCap,e.diminishingReturnsBonus=n.diminishingReturnsBonus,e.trainingTimeReduction=n.trainingTimeReduction,e.bonusAbilityEfficiency=n.bonusAbilityEfficiency,e.bonusOrbXp=n.bonusOrbXp,e.bonusBreedModifierAmount=n.bonusBreedModifierAmount,e}}class qo{constructor(){this.remainingBurstMeters=0,this.metersSinceLostFocus=0,this.recoveringStamina=!1,this.defaultRecoveringStaminaLength=150,this.currentRecoveringStaminaLength=this.defaultRecoveringStaminaLength,this.ranOutOfStamina=!1,this.lostFocus=!1,this.defaultLostFocusLength=60,this.currentLostFocusLength=this.defaultLostFocusLength,this.hasLostFocusDuringRace=!1,this.stumbled=!1,this.defaultStumbledLength=10,this.currentStumbledLength=this.defaultStumbledLength,this.relayEffects=[],this.burstCount=0,this.icyCurrentYAmount=0,this.icyCurrentDirectionUp=!0,this.headbandStumblePreventionCount=0,this.scaryMaskEffectOccurred=!1,this.firstAbilityUseEffectApplied=!1,this.velocityExceedsMaxSpeedDuringBurst=!1,this.velocityReachesMaxSpeedCount=0,this.velocityExceedsMaxSpeedFloorRequirement=!1,this.forceRelay=!1}makeCopy(){var n=new qo;return n.remainingBurstMeters=this.remainingBurstMeters,n.metersSinceLostFocus=this.metersSinceLostFocus,n.recoveringStamina=this.recoveringStamina,n.defaultRecoveringStaminaLength=this.defaultRecoveringStaminaLength,n.currentRecoveringStaminaLength=this.currentRecoveringStaminaLength,n.ranOutOfStamina=this.ranOutOfStamina,n.lostFocus=this.lostFocus,n.defaultLostFocusLength=this.defaultLostFocusLength,n.currentLostFocusLength=this.currentLostFocusLength,n.hasLostFocusDuringRace=this.hasLostFocusDuringRace,n.stumbled=this.stumbled,n.defaultStumbledLength=this.defaultStumbledLength,n.currentStumbledLength=this.currentStumbledLength,n.burstCount=this.burstCount,n.icyCurrentYAmount=this.icyCurrentYAmount,n.icyCurrentDirectionUp=this.icyCurrentDirectionUp,n.headbandStumblePreventionCount=this.headbandStumblePreventionCount,n.scaryMaskEffectOccurred=this.scaryMaskEffectOccurred,n.firstAbilityUseEffectApplied=this.firstAbilityUseEffectApplied,n.velocityExceedsMaxSpeedDuringBurst=this.velocityExceedsMaxSpeedDuringBurst,n.velocityReachesMaxSpeedCount=this.velocityReachesMaxSpeedCount,n.velocityExceedsMaxSpeedFloorRequirement=this.velocityExceedsMaxSpeedFloorRequirement,n.forceRelay=this.forceRelay,this.relayEffects=[],n}}var vt=(()=>{return(t=vt||(vt={}))[t.none=0]="none",t[t.sprint=1]="sprint",t[t.support=2]="support",t[t.longDistance=3]="longDistance",vt;var t})();class Xu{constructor(){this.talentTreeType=vt.none,this.row2RequiredPoints=5,this.row3RequiredPoints=10,this.row4RequiredPoints=15,this.column1Row1Points=0,this.column1Row2Points=0,this.column1Row3Points=0,this.column1Row4Points=0,this.column2Row1Points=0,this.column2Row2Points=0,this.column2Row3Points=0,this.column2Row4Points=0,this.column3Row1Points=0,this.column3Row2Points=0,this.column3Row3Points=0,this.column3Row4Points=0}makeCopy(n){var e=new Xu;return e.talentTreeType=n.talentTreeType,e.column1Row1Points=n.column1Row1Points,e.column1Row2Points=n.column1Row2Points,e.column1Row3Points=n.column1Row3Points,e.column1Row4Points=n.column1Row4Points,e.column2Row1Points=n.column2Row1Points,e.column2Row2Points=n.column2Row2Points,e.column2Row3Points=n.column2Row3Points,e.column2Row4Points=n.column2Row4Points,e.column3Row1Points=n.column3Row1Points,e.column3Row2Points=n.column3Row2Points,e.column3Row3Points=n.column3Row3Points,e.column3Row4Points=n.column3Row4Points,e}getTalentPointsByColumn(n){return 0===n?this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points:1===n?this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points:2===n?this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points:0}getTalentPointsByRowColumn(n,e){return 0===n&&0===e?this.column1Row1Points:1===n&&0===e?this.column1Row2Points:2===n&&0===e?this.column1Row3Points:3===n&&0===e?this.column1Row4Points:0===n&&1===e?this.column2Row1Points:1===n&&1===e?this.column2Row2Points:2===n&&1===e?this.column2Row3Points:3===n&&1===e?this.column2Row4Points:0===n&&2===e?this.column3Row1Points:1===n&&2===e?this.column3Row2Points:2===n&&2===e?this.column3Row3Points:3===n&&2===e?this.column3Row4Points:0}getTotalSpentPoints(){return this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points+this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points+this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points}spendTalentPoint(n,e){0===n&&0===e&&(this.column1Row1Points+=1),1===n&&0===e&&(this.column1Row2Points+=1),2===n&&0===e&&(this.column1Row3Points+=1),3===n&&0===e&&(this.column1Row4Points+=1),0===n&&1===e&&(this.column2Row1Points+=1),1===n&&1===e&&(this.column2Row2Points+=1),2===n&&1===e&&(this.column2Row3Points+=1),3===n&&1===e&&(this.column2Row4Points+=1),0===n&&2===e&&(this.column3Row1Points+=1),1===n&&2===e&&(this.column3Row2Points+=1),2===n&&2===e&&(this.column3Row3Points+=1),3===n&&2===e&&(this.column3Row4Points+=1)}reset(){this.talentTreeType=vt.none,this.column1Row1Points=0,this.column1Row2Points=0,this.column1Row3Points=0,this.column1Row4Points=0,this.column2Row1Points=0,this.column2Row2Points=0,this.column2Row3Points=0,this.column2Row4Points=0,this.column3Row1Points=0,this.column3Row2Points=0,this.column3Row3Points=0,this.column3Row4Points=0}}class g0{constructor(){this.successfulCoachingAttempts=0}}class At{constructor(){this.mangoesUsed=0,this.talentResetCount=0,this.freeTalentResetCount=0,this.scrimmageEnergyTimer=0,this.legacyRaceCount=0,this.nectarAvailable=!1,this.incubatorStatUpgrades=new qu,this.allTrainingTracks=new $s,this.increasedDefaultStats=new Ve(0,0,0,0,0,0),this.miscStats=new Wu,this.trackedAnimalStats=new g0,this.talentTree=new Xu,this.breedLevel=1,this.breedGaugeXp=0,this.breedGaugeMax=200,this.previousBreedLevel=1,this.totalRacesRun=0,this.equippedOrb=null,this.canEquipOrb=!1,this.canTrain=!0,this.isAvailable=!1,this.availableAbilities=[]}makeCopy(n){var e=new At;return e.name=n.name,e.type=n.type,e.raceCourseType=n.raceCourseType,e.currentStats=n.currentStats.makeCopy(n.currentStats),e.baseStats=n.baseStats.makeCopy(n.baseStats),e.talentTree=n.talentTree.makeCopy(n.talentTree),e.isAvailable=n.isAvailable,e.ability=n.ability,e.raceVariables=new qo,e.equippedItem=n.equippedItem,e.equippedOrb=n.equippedOrb,e.incubatorStatUpgrades=n.incubatorStatUpgrades,e.breedLevel=n.breedLevel,e.trackedAnimalStats=n.trackedAnimalStats,e.trait=n.trait,e.miscStats=n.miscStats.makeCopy(n.miscStats),e.legacyRaceCount=n.legacyRaceCount,e.nectarAvailable=n.nectarAvailable,e}viewAbility(){return this.ability.name}getAbilityUseUpdateText(n,e=""){return n+" uses "+this.ability.name+e+"."}useAbility(){}getAnimalType(){return L[this.type]}getRaceCourseType(){return F[this.raceCourseType]}getTraitName(){return null==this.trait||""===this.trait.traitName?"None":this.trait.traitName}getEquippedItemName(){if(null!=this.equippedItem)return this.equippedItem.name}getCourseTypeClass(){return this.raceCourseType===F.Flatland?"flatlandColor":this.raceCourseType===F.Mountain?"mountainColor":this.raceCourseType===F.Ocean?"waterColor":this.raceCourseType===F.Tundra?"tundraColor":this.raceCourseType===F.Volcanic?"volcanicColor":""}increaseStatsFromCurrentTraining(){null==this.currentTraining||null==this.currentStats||(this.currentStats.topSpeed+=this.currentTraining.affectedStatRatios.topSpeed*this.currentTraining.statGain,this.currentStats.acceleration+=this.currentTraining.affectedStatRatios.acceleration*this.currentTraining.statGain,this.currentStats.endurance+=this.currentTraining.affectedStatRatios.endurance*this.currentTraining.statGain,this.currentStats.power+=this.currentTraining.affectedStatRatios.power*this.currentTraining.statGain,this.currentStats.focus+=this.currentTraining.affectedStatRatios.focus*this.currentTraining.statGain,this.currentStats.adaptability+=this.currentTraining.affectedStatRatios.adaptability*this.currentTraining.statGain)}increaseStats(n){null==n||null==this.currentStats||(this.currentStats.topSpeed+=Number(n.topSpeed),this.currentStats.acceleration+=Number(n.acceleration),this.currentStats.stamina+=Number(n.stamina),this.currentStats.endurance+=Number(n.endurance),this.currentStats.power+=Number(n.power),this.currentStats.focus+=Number(n.focus),this.currentStats.adaptability+=Number(n.adaptability))}}We([lt(()=>Ve),it("design:type",Ve)],At.prototype,"currentStats",void 0),We([lt(()=>Ve),it("design:type",Ve)],At.prototype,"baseStats",void 0),We([lt(()=>Ve),it("design:type",Ve)],At.prototype,"increasedDefaultStats",void 0),We([lt(()=>$o),it("design:type",Object)],At.prototype,"currentTraining",void 0),We([lt(()=>$o),it("design:type",Object)],At.prototype,"queuedTraining",void 0),We([lt(()=>$o),it("design:type",Object)],At.prototype,"previousTraining",void 0),We([lt(()=>Ft),it("design:type",Ft)],At.prototype,"ability",void 0),We([lt(()=>qo),it("design:type",qo)],At.prototype,"raceVariables",void 0),We([lt(()=>te),it("design:type",Object)],At.prototype,"equippedItem",void 0),We([lt(()=>te),it("design:type",Object)],At.prototype,"equippedOrb",void 0),We([lt(()=>qu),it("design:type",qu)],At.prototype,"incubatorStatUpgrades",void 0),We([lt(()=>$s),it("design:type",$s)],At.prototype,"allTrainingTracks",void 0),We([lt(()=>Wu),it("design:type",Wu)],At.prototype,"miscStats",void 0),We([lt(()=>g0),it("design:type",g0)],At.prototype,"trackedAnimalStats",void 0),We([lt(()=>Ft),it("design:type",Array)],At.prototype,"availableAbilities",void 0),We([lt(()=>Oi),it("design:type",Oi)],At.prototype,"trait",void 0),We([lt(()=>Xu),it("design:type",Xu)],At.prototype,"talentTree",void 0);class $5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Horse,this.raceCourseType=F.Flatland,this.ability=new Ft,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Second Wind",this.ability.description="Second Wind",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=60,n.oneTimeEffect=!0,n.name="Inspiration",n.description="Inspiration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.cooldown=5,e.efficiency=27,e.oneTimeEffect=!1,e.name="Pacemaker",e.description="Pacemaker",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class q5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Cheetah,this.raceCourseType=F.Flatland,this.ability=new Ft,this.ability.cooldown=6,this.ability.efficiency=35,this.ability.oneTimeEffect=!1,this.ability.name="Sprint",this.ability.description="Sprint",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=1,n.oneTimeEffect=!1,n.name="Giving Chase",n.description="Giving Chase",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=.5,e.oneTimeEffect=!1,e.name="On The Hunt",e.description="On The Hunt",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class W5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Hare,this.raceCourseType=F.Flatland,this.ability=new Ft,this.ability.efficiency=45,this.ability.oneTimeEffect=!0,this.ability.name="Prey Instinct",this.ability.description="Prey Instinct",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.cooldown=5,n.efficiency=40,n.oneTimeEffect=!1,n.name="Awareness",n.description="Awareness",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=130,e.oneTimeEffect=!0,e.name="Nap",e.description="Nap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class jR extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Warthog,this.raceCourseType=F.Flatland,this.ability=new Ft,this.ability.cooldown=5,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Graze",this.ability.description="Graze",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=80,n.oneTimeEffect=!1,n.name="Mud Pit",n.description="Mud Pit",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=30,e.oneTimeEffect=!0,e.name="Time To Tussle",e.description="Time To Tussle",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class X5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Monkey,this.raceCourseType=F.Mountain,this.ability=new Ft,this.ability.cooldown=11,this.ability.efficiency=6,this.ability.name="Landslide",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=60,n.oneTimeEffect=!0,n.name="Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=70,e.cooldown=0,e.oneTimeEffect=!0,e.name="Leap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=30,this.availableAbilities.push(e)}}class Y5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Goat,this.raceCourseType=F.Mountain,this.ability=new Ft,this.ability.efficiency=50,this.ability.oneTimeEffect=!1,this.ability.name="Sure-footed",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=8,n.oneTimeEffect=!1,n.name="Deep Breathing",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=.2,e.oneTimeEffect=!1,e.name="In The Rhythm",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=15,this.availableAbilities.push(e)}}class Q5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Gecko,this.raceCourseType=F.Mountain,this.ability=new Ft,this.ability.cooldown=5,this.ability.efficiency=55,this.ability.oneTimeEffect=!1,this.ability.name="Sticky",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=.75,n.oneTimeEffect=!1,n.name="Night Vision",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=38,e.oneTimeEffect=!0,e.name="Camouflage",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class K5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Dolphin,this.raceCourseType=F.Ocean,this.ability=new Ft,this.ability.cooldown=6,this.ability.efficiency=84,this.ability.oneTimeEffect=!1,this.ability.name="Echolocation",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=50,n.oneTimeEffect=!0,n.name="Navigator",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=70,e.oneTimeEffect=!0,e.name="Flowing Current",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class Z5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Shark,this.raceCourseType=F.Ocean,this.ability=new Ft,this.ability.efficiency=60,this.ability.oneTimeEffect=!0,this.ability.name="Apex Predator",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=35,n.oneTimeEffect=!0,n.name="Feeding Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=2,e.oneTimeEffect=!0,e.name="Blood In The Water",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class J5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Octopus,this.raceCourseType=F.Ocean,this.ability=new Ft,this.ability.cooldown=5,this.ability.efficiency=17,this.ability.totalFrames=15,this.ability.oneTimeEffect=!1,this.ability.name="Propulsion",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=100,n.oneTimeEffect=!1,n.name="Buried Treasure",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=4,e.oneTimeEffect=!0,e.name="Big Brain",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class $R extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Whale,this.raceCourseType=F.Ocean,this.ability=new Ft,this.ability.cooldown=9,this.ability.efficiency=75,this.ability.oneTimeEffect=!1,this.ability.name="Storing Power",this.ability.description="Storing Power",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=80,n.oneTimeEffect=!1,n.name="Unparalleled Focus",n.description="Mud Pit",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=45,e.cooldown=8,e.oneTimeEffect=!1,e.name="Whalesong",e.description="Whalesong",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class e4 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Penguin,this.raceCourseType=F.Tundra,this.ability=new Ft,this.ability.efficiency=65,this.ability.cooldown=8,this.ability.oneTimeEffect=!1,this.ability.name="Careful Toboggan",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=1.5,n.oneTimeEffect=!1,n.name="Wild Toboggan",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=.5,e.oneTimeEffect=!1,e.name="Quick Toboggan",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class t4 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Caribou,this.raceCourseType=F.Tundra,this.ability=new Ft,this.ability.efficiency=3,this.ability.oneTimeEffect=!0,this.ability.name="Herd Mentality",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=50,n.cooldown=7,n.oneTimeEffect=!1,n.name="Great Migration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=5,e.oneTimeEffect=!0,e.name="Special Delivery",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class i4 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Salamander,this.raceCourseType=F.Volcanic,this.ability=new Ft,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Cold Blooded",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.cooldown=6,n.efficiency=50,n.oneTimeEffect=!1,n.name="Burrow",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.cooldown=10,e.efficiency=25,e.oneTimeEffect=!1,e.name="Heat Up",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class n4 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Fox,this.raceCourseType=F.Volcanic,this.ability=new Ft,this.ability.cooldown=5,this.ability.efficiency=60,this.ability.oneTimeEffect=!1,this.ability.name="Trickster",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ft;n.efficiency=4,n.oneTimeEffect=!1,n.name="Fleeting Speed",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ft;e.efficiency=65,e.oneTimeEffect=!0,e.name="Nine Tails",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class Ef{constructor(){this.selectedAnimals=[],this.courseTypeOrder=[],this.isCourseOrderActive=!1,this.autoRunFreeRace=!1,this.isEventDeck=!1}}We([lt(()=>At),it("design:type",Array)],Ef.prototype,"selectedAnimals",void 0);var Be=(()=>{return(t=Be||(Be={}))[t.ruby=0]="ruby",t[t.amber=1]="amber",t[t.topaz=2]="topaz",t[t.amethyst=3]="amethyst",t[t.sapphire=4]="sapphire",t[t.emerald=5]="emerald",t[t.none=6]="none",Be;var t})();class Wo{constructor(n){this.type=n,this.defaultIncrease=1.2,this.increasePerLevel=.2,this.level=1,this.maxLevel=1,this.xp=0,this.xpNeededForLevel=1e4}makeCopy(){var n=new Wo(this.type);return n.level=this.level,n.maxLevel=this.maxLevel,n.xp=this.xp,n.xpNeededForLevel=this.xpNeededForLevel,n.defaultIncrease=this.defaultIncrease,n.increasePerLevel=this.increasePerLevel,n}}class qs{constructor(){this.allOrbs=[];var n=new Wo(Be.amber);this.allOrbs.push(n);var e=new Wo(Be.amethyst);this.allOrbs.push(e);var i=new Wo(Be.ruby);this.allOrbs.push(i);var r=new Wo(Be.sapphire);this.allOrbs.push(r);var a=new Wo(Be.topaz);this.allOrbs.push(a);var o=new Wo(Be.emerald);this.allOrbs.push(o)}getMaxSpeedIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var i=this.allOrbs.find(r=>r.type===Be.ruby);void 0!==i&&(e=i.defaultIncrease+(i.level-1)*i.increasePerLevel)}return(e-1)/n+1}getAccelerationIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var i=this.allOrbs.find(r=>r.type===Be.amber);void 0!==i&&(e=i.defaultIncrease+(i.level-1)*i.increasePerLevel)}return(e-1)/n+1}getEnduranceIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var r=this.allOrbs.find(a=>a.type===Be.topaz);void 0!==r&&(e=r.defaultIncrease+(r.level-1)*r.increasePerLevel)}return(e-1)/n+1}getPowerIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var r=this.allOrbs.find(a=>a.type===Be.amethyst);void 0!==r&&(e=r.defaultIncrease+(r.level-1)*r.increasePerLevel)}return(e-1)/n+1}getAdaptabilityIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var r=this.allOrbs.find(a=>a.type===Be.emerald);void 0!==r&&(e=r.defaultIncrease+(r.level-1)*r.increasePerLevel)}return(e-1)/n+1}getFocusIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var r=this.allOrbs.find(a=>a.type===Be.sapphire);void 0!==r&&(e=r.defaultIncrease+(r.level-1)*r.increasePerLevel)}return(e-1)/n+1}makeCopy(){var n=new qs;return n.allOrbs=[],this.allOrbs.forEach(e=>{n.allOrbs.push(e.makeCopy())}),n}}We([lt(()=>Wo),it("design:type",Array)],qs.prototype,"allOrbs",void 0);class r4{constructor(){this.upgradePrice=[],this.upgradedStatGain=new Ve(1,1,1,1,1,1),this.barnLevel=0,this.specializationLevel=0,this.currentDeltaTime=0,this.trainingFacilityDeltaTime=0}}class v0{constructor(){this.barnUpgrades=new r4}getSize(){return Rt[this.size]}}class Yu{constructor(){this.timeTrained=0,this.timeToComplete=120}}We([lt(()=>At),it("design:type",Object)],Yu.prototype,"assignedAnimal",void 0),We([lt(()=>Oi),it("design:type",Object)],Yu.prototype,"assignedTrait",void 0);class qR{constructor(n){this.exhaustionStatReduction=1,this.morale=1,this.associatedAnimalType=n,this.isCurrentlyRacing=!1,this.isSetToRelay=!1}}class m0{constructor(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.deepBreathingUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.bigBrainUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.specialDeliveryUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0,this.storingPowerUseCount=0,this.onTheHuntUseCap=25,this.sureFootedUseCap=25,this.deepBreathingUseCap=25,this.nightVisionUseCap=25,this.bigBrainUseCap=5,this.quickTobogganUseCap=25,this.herdMentalityUseCap=1,this.specialDeliveryUseCap=25,this.storingPowerUseCap=25}resetUseCounts(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0,this.storingPowerUseCount=0}}class Nf{constructor(){this.nineTailsBuffs=[],this.grazeBuffs=[],this.relayEffects=[],this.mountainEndingY=0,this.deepBreathingStaminaGain=0,this.longDistanceTalentIncreaseAccelerationWithLowVelocity=!1,this.maxSpeedFloor=0,this.whalePowerStored=0,this.pathsClearedWithoutLosingFocus=0,this.raceVariables=new qo}}We([lt(()=>qo),it("design:type",qo)],Nf.prototype,"raceVariables",void 0);class X{constructor(n,e){void 0!==n&&(this.value=n),void 0!==e&&(this.text=e)}}class Bf{constructor(){this.raceUpdates=[],this.beatMoneyMark=!1,this.distanceCovered=0}addRaceUpdate(n,e){var i=new X;i.text=e,i.value=n,this.raceUpdates.push(i)}}class WR{constructor(n,e){void 0!==n&&(this.objectType=n),void 0!==e&&(this.xDistance=e),this.isGoingUp=!1}}var Je=(()=>{return(t=Je||(Je={}))[t.threeHundredSecondRace=0]="threeHundredSecondRace",t[t.twoRacersOnly=1]="twoRacersOnly",t[t.threeRacersOnly=2]="threeRacersOnly",t[t.noRelayEffects=3]="noRelayEffects",t[t.steamy=4]="steamy",t[t.burstIncreaseStaminaLoss=5]="burstIncreaseStaminaLoss",t[t.slick=6]="slick",t[t.strongWinds=7]="strongWinds",t[t.hot=8]="hot",t[t.cold=9]="cold",Je;var t})(),St=(()=>{return(t=St||(St={}))[t.thirtySecondRace=0]="thirtySecondRace",t[t.fourRacersOnly=1]="fourRacersOnly",t[t.brokenFloorboards=2]="brokenFloorboards",t[t.sticky=3]="sticky",t[t.longCooldowns=4]="longCooldowns",t[t.unfocused=5]="unfocused",t[t.harshTerrain=6]="harshTerrain",t[t.highSpeedLowAcceleration=7]="highSpeedLowAcceleration",St;var t})(),Qi=(()=>{return(t=Qi||(Qi={}))[t.noBurst=0]="noBurst",t[t.lowStaminaRelay=1]="lowStaminaRelay",t[t.exhaustionPenaltyIncreased=2]="exhaustionPenaltyIncreased",t[t.reduceSpeedOnRelay=3]="reduceSpeedOnRelay",t[t.reduceAbilityEfficiency=4]="reduceAbilityEfficiency",Qi;var t})();class bs{constructor(){this.easyConditions=[],this.mediumConditions=[],this.hardConditions=[]}containsCondition(n){var e=!1;return this.easyConditions.length>0&&this.easyConditions.some(i=>Je[i]===n)&&(e=!0),this.mediumConditions.length>0&&this.mediumConditions.some(i=>St[i]===n)&&(e=!0),this.hardConditions.length>0&&this.hardConditions.some(i=>Qi[i]===n)&&(e=!0),e}}var Qe=(()=>{return(t=Qe||(Qe={}))[t.Sunny=0]="Sunny",t[t.Rainy=1]="Rainy",t[t.Stormy=2]="Stormy",t[t.Snowfall=3]="Snowfall",t[t.Maelstrom=4]="Maelstrom",t[t.Hailstorm=5]="Hailstorm",t[t.Ashfall=6]="Ashfall",t[t.Torrid=7]="Torrid",Qe;var t})(),Ge=(()=>{return(t=Ge||(Ge={}))[t.Regular=0]="Regular",t[t.S=1]="S",t[t.Bumps=2]="Bumps",t[t.Crevasse=3]="Crevasse",t[t.Gaps=4]="Gaps",t[t.Waves=5]="Waves",t[t.Dive=6]="Dive",t[t.Cavern=7]="Cavern",t[t.Hills=8]="Hills",t[t.FirstRegular=9]="FirstRegular",t[t.LastRegular=10]="LastRegular",t[t.SteppingStones=11]="SteppingStones",Ge;var t})(),Lr=(()=>{return(t=Lr||(Lr={}))[t.None=0]="None",t[t.Low=.8]="Low",t[t.Medium=.6]="Medium",t[t.High=.4]="High",Lr;var t})();class Sn{constructor(n){this.didAnimalStumble=!1,this.didAnimalLoseFocus=!1,this.checkedForBurst=!1,this.checkedForMiniBurst=!1,this.checkedForNineTails=!1,null!=n&&(this.routeDesign=n,this.setStumbleFields()),this.driftAmount=0,this.isSpecialPath=!1}setStumbleFields(){return this.currentStumbleOpportunity=0,this.routeDesign===Ge.Regular&&(this.stumbleSeverity=Lr.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Ge.S&&(this.isSpecialPath=!0,this.stumbleSeverity=Lr.Low,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Ge.Bumps&&(this.isSpecialPath=!0,this.stumbleSeverity=Lr.Medium,this.frequencyOfStumble=20,this.stumbleOpportunities=8),this.routeDesign===Ge.Crevasse&&(this.isSpecialPath=!0,this.stumbleSeverity=Lr.High,this.frequencyOfStumble=80,this.stumbleOpportunities=6),this.routeDesign===Ge.Gaps&&(this.isSpecialPath=!0,this.stumbleSeverity=Lr.Medium,this.frequencyOfStumble=175,this.stumbleOpportunities=4),this.routeDesign===Ge.Waves&&(this.isSpecialPath=!0,this.stumbleSeverity=Lr.Medium,this.frequencyOfStumble=50,this.stumbleOpportunities=6),this.routeDesign===Ge.Dive&&(this.isSpecialPath=!0,this.stumbleSeverity=Lr.High,this.frequencyOfStumble=200,this.stumbleOpportunities=2),this.routeDesign===Ge.Cavern&&(this.isSpecialPath=!0,this.stumbleSeverity=Lr.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Ge.Hills&&(this.isSpecialPath=!0,this.stumbleSeverity=Lr.High,this.frequencyOfStumble=120,this.stumbleOpportunities=3,this.frequencyOfDrift=250),(this.routeDesign===Ge.FirstRegular||this.routeDesign===Ge.LastRegular)&&(this.isSpecialPath=!0,this.stumbleSeverity=Lr.Medium,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Ge.SteppingStones&&(this.isSpecialPath=!0,this.stumbleSeverity=Lr.High,this.frequencyOfStumble=60,this.stumbleOpportunities=10),this}}class un{constructor(n){var e=.8,r=1.2;this.maxSpeedModifier=1,this.accelerationModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1,null!==n&&(this.terrainType=n,n===Qe.Sunny&&(this.staminaModifier=1.5,this.maxSpeedModifier=r),n===Qe.Rainy&&(this.adaptabilityModifier=e,this.focusModifier=r),n===Qe.Stormy&&(this.focusModifier=e,this.accelerationModifier=r),n===Qe.Maelstrom&&(this.accelerationModifier=e,this.maxSpeedModifier=e,this.adaptabilityModifier=r),n===Qe.Hailstorm&&(this.focusModifier=e,this.adaptabilityModifier=e,this.maxSpeedModifier=e),n===Qe.Ashfall&&(this.staminaModifier=r,this.accelerationModifier=e,this.powerModifier=e),n===Qe.Snowfall&&(this.staminaModifier=e,this.maxSpeedModifier=e,this.accelerationModifier=e),n===Qe.Torrid&&(this.powerModifier=e,this.maxSpeedModifier=e,this.focusModifier=r))}getTerrainType(){return Qe[this.terrainType]}}class Ji{constructor(n,e){this.legComplete=!1,null!=n&&(this.courseType=n),void 0!==e&&null!=e&&(this.distance=e),this.pathData=[]}getCourseTypeName(){return F[this.courseType]}getCourseTypeClass(){return this.courseType===F.Flatland?"flatlandColor":this.courseType===F.Mountain?"mountainColor":this.courseType===F.Ocean?"waterColor":this.courseType===F.Tundra?"tundraColor":this.courseType===F.Volcanic?"volcanicColor":""}getTerrainName(){return null==this.terrain?"":Qe[this.terrain.terrainType]}}We([lt(()=>Sn),it("design:type",Array)],Ji.prototype,"pathData",void 0),We([lt(()=>un),it("design:type",un)],Ji.prototype,"terrain",void 0);class Ff{constructor(){this.distanceCoveredByFrame=[],this.velocityByFrame=[],this.timeToCompleteByFrame=[],this.maxSpeedByFrame=[],this.staminaPercentByFrame=[],this.racerEffectByFrame=[],this.yAdjustmentByFrame=[],this.lavaFallPercentByFrame=[],this.racePositionByFrame=[]}}class Tn{constructor(n,e,i,r,a,o,s,l,c,u,f,v){this.raceLegs=n,this.requiredRank=e,this.isCircuitRace=i,this.raceId=r,this.length=a,this.timeToComplete=o,this.raceUI=new Ff,this.circuitIncreaseReward=["",""],null!=s&&(this.rewards=s),null!=l&&(this.localRaceType=l),null!=c&&(this.trackRaceType=c),null!=u&&(this.raceType=u),null!=f&&(this.eventRaceType=f),null!=v&&(this.drawnObjects=v)}makeCopy(n){var e=new Tn(n.raceLegs,n.requiredRank,n.isCircuitRace,n.raceId,n.length,n.timeToComplete,n.rewards,n.localRaceType,n.trackRaceType,n.raceType,n.eventRaceType,n.drawnObjects);return n.raceUI.velocityByFrame.length>0&&n.raceUI.velocityByFrame.forEach(i=>{e.raceUI.velocityByFrame.push(i)}),n.raceUI.staminaPercentByFrame.length>0&&n.raceUI.staminaPercentByFrame.forEach(i=>{e.raceUI.staminaPercentByFrame.push(i)}),e}reduceExportSize(){this.raceUI=new Ff}}We([lt(()=>Ji),it("design:type",Array)],Tn.prototype,"raceLegs",void 0),We([lt(()=>te),it("design:type",Array)],Tn.prototype,"rewards",void 0),We([lt(()=>Ff),it("design:type",Ff)],Tn.prototype,"raceUI",void 0),We([lt(()=>WR),it("design:type",Array)],Tn.prototype,"drawnObjects",void 0),We([lt(()=>bs),it("design:type",bs)],Tn.prototype,"pinnacleConditions",void 0);class Lf{constructor(){this.affectsAllRacers=!1}makeCopy(){var n=new Lf;return n.isMultiplicative=this.isMultiplicative,n.remainingRelayMeters=this.remainingRelayMeters,n.relayAffectedStatRatios=new Ve(this.relayAffectedStatRatios.topSpeed,this.relayAffectedStatRatios.acceleration,this.relayAffectedStatRatios.endurance,this.relayAffectedStatRatios.power,this.relayAffectedStatRatios.focus,this.relayAffectedStatRatios.adaptability),n.effectType=this.effectType,n.additionalValue=this.additionalValue,n.affectsAllRacers=this.affectsAllRacers,n}}class er{constructor(){this.rankDistanceMultiplier=1,this.isRunning=!1,this.initialSetupComplete=!1,this.animalAlreadyPrepped=!1,this.mountainEndingY=0,this.mountainClimbPercent=0,this.exhaustionMoraleUpdateCounter=0,this.weatherClusterUpdateCounter=0,this.triggerEnergyFloorRelay=!1,this.weekStartDay=2,this.weekStartHour=9,this.weekEndDay=4,this.weekEndHour=12,this.weekendStartDay=5,this.weekendStartHour=20,this.weekendEndDay=0,this.weekendEndHour=23,this.distanceCovered=0,this.grandPrixTimeLength=183600,this.segmentTime=120,this.segmentTimeCounter=0,this.overallTimeCounter=0,this.delayCatchingUpTimeCounter=0,this.rank="Z",this.animalData=[],this.queuedRelayEffects=[],this.bonusTime=0,this.remainingRewards=0,this.totalRewards=0,this.foodRewardsObtained=0,this.coinRewardsObtained=0,this.renownRewardsObtained=0,this.tokenRewardsObtained=0,this.isGrandPrixCompleted=!1,this.remainingEventRaceTime=0,this.eventAbilityData=new m0,this.isCatchingUp=!1,this.isLoading=!1}}We([lt(()=>m0),it("design:type",m0)],er.prototype,"eventAbilityData",void 0),We([lt(()=>un),it("design:type",un)],er.prototype,"raceTerrain",void 0),We([lt(()=>Tn),it("design:type",Tn)],er.prototype,"currentRaceSegment",void 0),We([lt(()=>Bf),it("design:type",Bf)],er.prototype,"currentRaceSegmentResult",void 0),We([lt(()=>Tn),it("design:type",Tn)],er.prototype,"nextRaceSegment",void 0),We([lt(()=>Tn),it("design:type",Tn)],er.prototype,"previousRaceSegment",void 0),We([lt(()=>Nf),it("design:type",Nf)],er.prototype,"previousRaceSegmentData",void 0),We([lt(()=>qR),it("design:type",Array)],er.prototype,"animalData",void 0),We([lt(()=>Lf),it("design:type",Array)],er.prototype,"queuedRelayEffects",void 0);class XR{}class Uf{constructor(){this.rewards=[]}}We([lt(()=>Date),it("design:type",Date)],Uf.prototype,"expirationDate",void 0),We([lt(()=>$o),it("design:type",Array)],Uf.prototype,"rewards",void 0);class et{constructor(){this.isAvailable=!0,this.amountPurchased=0,this.totalShopQuantity=1,this.quantityMultiplier=1,this.numberPurchasing=1,this.purchasePrice=[],this.basePurchasePrice=[]}}class Aa{}We([lt(()=>et),it("design:type",Array)],Aa.prototype,"itemList",void 0);class Hf{constructor(){this.tutorialCompleted=!1,this.currentTutorialId=1,this.showTutorial=!1,this.showTrainingTrackTutorial=!0,this.showCoachingTutorial=!0,this.showScrimmageTutorial=!0}}class Gf{constructor(){this.isNewSpecialRaceAvailable=!1,this.isEventRaceNowActive=!1}}class Ws{constructor(){this.settings=[]}get(n){var e=this.settings.find(i=>i[0]===n);return null!=e?e[1]:""}set(n,e){var i=this.settings.find(r=>r[0]===n);null==i?this.settings.push([n,e]):i[1]=e}}class b0{constructor(){this.totalRaces=0,this.totalBreeds=0,this.totalMetersRaced=0,this.mostUsedAnimal="",this.mostRacedCourseType="",this.highestMaxSpeed="",this.highestAccelerationRate="",this.highestStamina="",this.highestPowerEfficiency="",this.highestFocusDistance="",this.highestAdaptabilityDistance=""}}class _0{constructor(){this.unlockables=[]}get(n){var e=this.unlockables.find(i=>i[0]===n);return null!=e&&e[1]}set(n,e){var i=this.unlockables.find(r=>r[0]===n);null==i?this.unlockables.push([n,e]):i[1]=e}}class en{constructor(n){this.userIsRacing=!1,this.showBreedWarning=!0,null!=n&&(this.animals=n.animals,this.barns=n.barns,this.trainingOptions=n.trainingOptions,this.circuitRaces=n.circuitRaces,this.circuitRank=n.circuitRank,this.localRaces=n.localRaces,this.resources=n.resources,this.modifiers=n.modifiers,this.shop=n.shop,this.tokenShop=n.tokenShop,this.animalDecks=n.animalDecks,this.incubator=n.incubator,this.trackedStats=n.trackedStats,this.pinnacle=n.pinnacle,this.orbStats=n.orbStats,this.redeemedCodes=n.redeemedCodes,this.eventRaceData=n.eventRaceData,this.notifications=n.notifications,this.previousEventRewards=[],this.barnOrder=n.barnOrder,this.monthlyMangoesPurchased=n.monthlyMangoesPurchased,this.nationalRaceCountdown=0,this.autoFreeRaceCounter=0,this.freeRaceCounter=0,this.freeRaceTimePeriodCounter=0)}}We([lt(()=>At),it("design:type",Array)],en.prototype,"animals",void 0),We([lt(()=>v0),it("design:type",Array)],en.prototype,"barns",void 0),We([lt(()=>$o),it("design:type",Array)],en.prototype,"trainingOptions",void 0),We([lt(()=>Tn),it("design:type",Array)],en.prototype,"circuitRaces",void 0),We([lt(()=>Tn),it("design:type",Array)],en.prototype,"localRaces",void 0),We([lt(()=>XR),it("design:type",XR)],en.prototype,"pinnacle",void 0),We([lt(()=>te),it("design:type",Array)],en.prototype,"resources",void 0),We([lt(()=>X),it("design:type",Array)],en.prototype,"modifiers",void 0),We([lt(()=>Aa),it("design:type",Array)],en.prototype,"shop",void 0),We([lt(()=>Aa),it("design:type",Array)],en.prototype,"tokenShop",void 0),We([lt(()=>Ef),it("design:type",Array)],en.prototype,"animalDecks",void 0),We([lt(()=>Ws),it("design:type",Ws)],en.prototype,"keybinds",void 0),We([lt(()=>Ws),it("design:type",Ws)],en.prototype,"settings",void 0),We([lt(()=>_0),it("design:type",_0)],en.prototype,"unlockables",void 0),We([lt(()=>Yu),it("design:type",Yu)],en.prototype,"incubator",void 0),We([lt(()=>b0),it("design:type",b0)],en.prototype,"trackedStats",void 0),We([lt(()=>qs),it("design:type",qs)],en.prototype,"orbStats",void 0),We([lt(()=>Hf),it("design:type",Hf)],en.prototype,"tutorials",void 0),We([lt(()=>Uf),it("design:type",Array)],en.prototype,"redeemedCodes",void 0),We([lt(()=>er),it("design:type",er)],en.prototype,"eventRaceData",void 0),We([lt(()=>te),it("design:type",Array)],en.prototype,"previousEventRewards",void 0),We([lt(()=>Gf),it("design:type",Gf)],en.prototype,"notifications",void 0),We([lt(()=>bs),it("design:type",bs)],en.prototype,"pinnacleHistory",void 0),We([lt(()=>bs),it("design:type",Object)],en.prototype,"currentPinnacleConditions",void 0);var ze=(()=>{return(t=ze||(ze={}))[t.ShortTrackRunning=0]="ShortTrackRunning",t[t.Sprints=1]="Sprints",t[t.TrailRunning=2]="TrailRunning",t[t.MoveLogs=3]="MoveLogs",t[t.Footwork=4]="Footwork",t[t.PracticeCommands=5]="PracticeCommands",t[t.ScentTraining=6]="ScentTraining",t[t.SmallWagonTow=7]="SmallWagonTow",t[t.Sidestep=8]="Sidestep",t[t.MediumTrackRunning=9]="MediumTrackRunning",t[t.UphillRun=10]="UphillRun",t[t.Puzzles=11]="Puzzles",t[t.MoveRocks=12]="MoveRocks",t[t.LateralVerticalDrill=13]="LateralVerticalDrill",t[t.DodgeBall=14]="DodgeBall",t[t.BurstPractice=15]="BurstPractice",t[t.Acrobatics=16]="Acrobatics",t[t.LongTrackRunning=17]="LongTrackRunning",t[t.VehicleTow=18]="VehicleTow",t[t.LogJump=19]="LogJump",t[t.Meditation=20]="Meditation",t[t.WindSprints=21]="WindSprints",t[t.GreenwayHike=22]="GreenwayHike",t[t.Marathon=23]="Marathon",t[t.AgilityCourse=24]="AgilityCourse",ze;var t})(),YR=Q(340);let Rn=(()=>{class t{constructor(e){this.sanitizer=e}getRandomSeededInteger(e,i,r="seeded"){var a=YR(r);return Math.round(a()*(i-e)+e)}getRandomInteger(e,i){return e-=.500000001,i+=.499999999,Math.round(Math.random()*(i-e)+e)}getRandomSeededNumber(e,i,r="seeded"){return YR(r)()*(i-e)+e}getRandomNumber(e,i){return Math.random()*(i-e)+e}getRandomNumberPercent(){return 99*Math.random()+1}getNumericValueOfCircuitRank(e){var i=0;return e.length>1&&(i=26*(e.length-1)),i+(91-e.charCodeAt(e.length-1))}getCircuitRankFromNumericValue(e){for(var i="";e>26;)i+="A",e-=26;return i+String.fromCharCode(91-e)}getHoursRemainingFromSeconds(e){return Math.floor(e/3600)}getMinutesLeftInHourRemainingFromSeconds(e){var i=Math.floor(e/3600);return Math.floor(e/60-60*i)}getSecondsLeftInMinuteRemainingFromSeconds(e){var i=Math.floor(e/3600);return e-60*i*60-60*Math.floor(e/60-60*i)}convertSecondsToHHMMSS(e){var i=Math.floor(e/3600),r=Math.floor(e/60-60*i),a=e-60*i*60-60*r,o=i.toString(),s=r.toString(),l=Math.floor(a).toString();return i<10&&(o=i<1||i>59?"00":String(o).padStart(2,"0")),r<10&&(s=r<1||r>59?"00":String(s).padStart(2,"0")),a<10&&(l=a<1||a>59?"00":String(l).padStart(2,"0")),o+":"+s+":"+l}convertSecondsToMMSS(e){var i=Math.floor(e/3600),r=Math.floor(e/60-60*i),a=e-60*i*60-60*r,o=i.toString(),s=r.toString(),l=Math.floor(a).toString();return i<10&&(o=i<1||i>59?"00":String(o).padStart(2,"0")),r<10&&(s=r<1||r>59?"00":String(s).padStart(2,"0")),a<10&&(l=a<1||a>59?"00":String(l).padStart(2,"0")),s+":"+l}getClosestWholeNumber(e,i){return i/Math.floor(i/e)}getDayOfWeekFromNumber(e){return e<=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].length-1?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]:""}getAmPmTimeFromHours(e){return 0===e?"12:00 AM":e<12?e+":00 AM":12===e?"12:00 PM":e-12+":00 PM"}get24HourFormat(e){return e<=9?"0"+e+":00":e+":00"}convertDegreesToRadians(e){return e*(Math.PI/180)}reduceToProperUnits(e){for(var i="",r=0;e.toString().length>3&&r<8;)e/=1e3,e=Math.round(e),r+=1;return i=e.toString(),0===r&&(i+=" m"),1===r&&(i+=" km"),2===r&&(i+=" Mm"),3===r&&(i+=" Gm"),4===r&&(i+=" Tm"),5===r&&(i+=" Pm"),6===r&&(i+=" Em"),7===r&&(i+=" Zm"),8===r&&(i+=" Ym"),i}getSanitizedHtml(e){var i=this.sanitizer.sanitize(_i.HTML,this.sanitizer.bypassSecurityTrustHtml(e));return null===i?"":i}addDaysToDate(e,i){var r=new Date(e);return r.setDate(r.getDate()+i),r}shadeColor(e,i){return"#"+e.replace(/^#/,"").replace(/../g,a=>("0"+Math.min(255,Math.max(0,parseInt(a,16)+i)).toString(16)).substr(-2))}getProperNoun(e){return e.charAt(0).toUpperCase()+e.slice(1)}condenseList(e){var i=[];return e.forEach(r=>{if(i.some(o=>o.name===r.name))i.find(o=>o.name===r.name).amount+=r.amount;else{var a=r.makeCopy(r);i.push(a)}}),i}ordinalSuffixOf(e){var i=e%10,r=e%100;return 1==i&&11!=r?e+"st":2==i&&12!=r?e+"nd":3==i&&13!=r?e+"rd":e+"th"}}return t.\u0275fac=function(e){return new(e||t)(He(hs))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),y0=(()=>{class t{constructor(){}initializeShop(){}initializeResource(e,i,r){return new te(e,i,r)}initializeTraining(e){var i=new $o;return e===ze.ShortTrackRunning&&(i.trainingName="Short Track Running",i.isAvailable=!0,i.facilitySize=Rt.Small,i.timeToComplete=30,i.trainingType=ze.ShortTrackRunning,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(1,0,0,0,0,0)),e===ze.Sprints&&(i.trainingName="Sprints",i.isAvailable=!0,i.facilitySize=Rt.Small,i.timeToComplete=20,i.trainingType=ze.Sprints,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,1,0,0,0,0)),e===ze.TrailRunning&&(i.trainingName="Trail Running",i.isAvailable=!0,i.facilitySize=Rt.Small,i.timeToComplete=45,i.trainingType=ze.TrailRunning,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(.5,0,1,0,0,0)),e===ze.MoveLogs&&(i.trainingName="Move Logs",i.isAvailable=!1,i.facilitySize=Rt.Small,i.timeToComplete=30,i.trainingType=ze.MoveLogs,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,1,0,0)),e===ze.Footwork&&(i.trainingName="Footwork",i.isAvailable=!1,i.facilitySize=Rt.Small,i.timeToComplete=45,i.trainingType=ze.Footwork,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,.25,0,0,0,1)),e===ze.PracticeCommands&&(i.trainingName="Practice Commands",i.isAvailable=!1,i.facilitySize=Rt.Small,i.timeToComplete=40,i.trainingType=ze.PracticeCommands,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,0,1,.25)),e===ze.ScentTraining&&(i.trainingName="Scent Training",i.isAvailable=!1,i.facilitySize=Rt.Small,i.timeToComplete=45,i.trainingType=ze.ScentTraining,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,.5,0,1,0)),e===ze.SmallWagonTow&&(i.trainingName="Small Wagon Tow",i.isAvailable=!1,i.facilitySize=Rt.Small,i.timeToComplete=45,i.trainingType=ze.SmallWagonTow,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(.25,0,0,1.5,0,0)),e===ze.Sidestep&&(i.trainingName="Sidestep",i.isAvailable=!1,i.facilitySize=Rt.Small,i.timeToComplete=35,i.trainingType=ze.Sidestep,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,2,0,0,0,0)),e===ze.MediumTrackRunning&&(i.trainingName="Medium Track Running",i.isAvailable=!1,i.facilitySize=Rt.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=ze.MediumTrackRunning,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(2,0,1,0,0,0)),e===ze.UphillRun&&(i.trainingName="Uphill Run",i.isAvailable=!1,i.facilitySize=Rt.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=ze.UphillRun,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,1,2,0,0,0)),e===ze.Puzzles&&(i.trainingName="Puzzles",i.isAvailable=!1,i.facilitySize=Rt.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=ze.Puzzles,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,0,2,1)),e===ze.MoveRocks&&(i.trainingName="Move Rocks",i.isAvailable=!1,i.facilitySize=Rt.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=ze.MoveRocks,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,1,0,2,0,0)),e===ze.DodgeBall&&(i.trainingName="Dodge Ball",i.isAvailable=!1,i.facilitySize=Rt.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=ze.DodgeBall,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,2.5,0,0,0,1)),e===ze.LateralVerticalDrill&&(i.trainingName="Lateral Vertical Drill",i.isAvailable=!1,i.facilitySize=Rt.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=ze.LateralVerticalDrill,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(1.5,0,0,0,2,0)),e===ze.BurstPractice&&(i.trainingName="Burst Practice",i.isAvailable=!1,i.facilitySize=Rt.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=ze.BurstPractice,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,1.5,1.5,1.5)),e===ze.Acrobatics&&(i.trainingName="Acrobatics",i.isAvailable=!1,i.facilitySize=Rt.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=ze.Acrobatics,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(.5,0,.5,3,0,0)),e===ze.LongTrackRunning&&(i.trainingName="Long Track Running",i.isAvailable=!1,i.facilitySize=Rt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=ze.LongTrackRunning,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(5,0,0,0,2,0)),e===ze.VehicleTow&&(i.trainingName="Vehicle Tow",i.isAvailable=!1,i.facilitySize=Rt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=ze.VehicleTow,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,2,5,0,0)),e===ze.LogJump&&(i.trainingName="Log Jump",i.isAvailable=!1,i.facilitySize=Rt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=ze.LogJump,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(1,1,0,0,0,5)),e===ze.Meditation&&(i.trainingName="Meditation",i.isAvailable=!1,i.facilitySize=Rt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=ze.Meditation,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,2,5,0)),e===ze.WindSprints&&(i.trainingName="Wind Sprints",i.isAvailable=!1,i.facilitySize=Rt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=ze.WindSprints,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(2,5,0,0,0,0)),e===ze.GreenwayHike&&(i.trainingName="Greenway Hike",i.isAvailable=!1,i.facilitySize=Rt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=ze.GreenwayHike,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,5,0,0,2)),e===ze.Marathon&&(i.trainingName="Marathon",i.isAvailable=!1,i.facilitySize=Rt.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=ze.Marathon,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,2,3,0,3,0)),e===ze.AgilityCourse&&(i.trainingName="Agility Course",i.isAvailable=!1,i.facilitySize=Rt.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=ze.AgilityCourse,i.trainingCourseType=F.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(3,0,0,2,0,3)),i}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ut=(()=>{return(t=Ut||(Ut={}))[t.Track=0]="Track",t[t.Free=1]="Free",t[t.Mono=2]="Mono",t[t.Duo=3]="Duo",t[t.Rainbow=4]="Rainbow",t[t.Pinnacle=5]="Pinnacle",Ut;var t})(),ht=(()=>{return(t=ht||(ht={}))[t.none=0]="none",t[t.headband=1]="headband",t[t.redBaton=2]="redBaton",t[t.blueBaton=3]="blueBaton",t[t.violetBaton=4]="violetBaton",t[t.orangeBaton=5]="orangeBaton",t[t.greenBaton=6]="greenBaton",t[t.yellowBaton=7]="yellowBaton",t[t.quickSnack=8]="quickSnack",t[t.blinders=9]="blinders",t[t.pendant=10]="pendant",t[t.carrotOnAStick=11]="carrotOnAStick",t[t.scaryMask=12]="scaryMask",t[t.runningShoes=13]="runningShoes",t[t.incense=14]="incense",t[t.athleticTape=15]="athleticTape",ht;var t})();const w0={name:"white",properties:{"--foreground-default":"#000000","--foreground-secondary":"#1B1B1B","--foreground-tertiary":"#a6a49d","--foreground-quaternary":"#2F2F2F","--foreground-light":"#000000","--background-default":"#FCFCFC","--background-secondary":"#FFFFFF","--background-tertiary":"#C4C4C4","--background-quarternary":"#ACAFB4","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#8105fc","--specialityKeywordColor":"#050efc","--equipmentKeywordColor":"#1B7F02","--amberColor":"#C25E0E","--amethystColor":"#7b2bcc","--emeraldColor":"#28643C","--rubyColor":"#9b111e","--sapphireColor":"#2554C7","--topazColor":"#ffe600","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},C0={name:"light",properties:{"--foreground-default":"#08090A","--foreground-secondary":"#41474D","--foreground-tertiary":"#797C80","--foreground-quaternary":"#F4FAFF","--foreground-light":"#41474D","--background-default":"#F4FAFF","--background-secondary":"#A3B9CC","--background-tertiary":"#5C7D99","--background-quarternary":"#65799E","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#BF6200","--mountainColor":"#228D0F","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#266A80","--volcanicColor":"#C70604","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#064064","--equipmentKeywordColor":"#2C6854","--amberColor":"#C25E0E","--amethystColor":"#7b2bcc","--emeraldColor":"#28643C","--rubyColor":"#9b111e","--sapphireColor":"#2554C7","--topazColor":"#ffe600","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},S0={name:"twilight",properties:{"--foreground-default":"#ED8B42","--foreground-secondary":"#C05100","--foreground-tertiary":"#6A2D00","--foreground-quaternary":"#FFAA20","--foreground-light":"#FF8F3D","--background-default":"#5D0274","--background-secondary":"#210129","--background-tertiary":"#14001A","--background-quarternary":"#4F223C","--background-light":"#72028D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#000000","--equipmentKeywordColor":"#2C6854","--amberColor":"#C25E0E","--amethystColor":"#7b2bcc","--emeraldColor":"#28643C","--rubyColor":"#9b111e","--sapphireColor":"#2554C7","--topazColor":"#ffe600","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},Qu={name:"night",properties:{"--foreground-default":"#A3B9CC","--foreground-secondary":"#5C7D99","--foreground-tertiary":"#49647A","--foreground-quaternary":"#E5E5E5","--foreground-light":"#FFFFFF","--background-default":"#797C80","--background-secondary":"#41474D","--background-tertiary":"#08090A","--background-quarternary":"##2A2C31","--background-light":"#41474D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#E18B07","--mountainColor":"#30b001","--waterColor":"#9289CF","--waterSubcolor":"#5044ab","--tundraColor":"#019DDE","--volcanicColor":"#E56C6E","--resourceKeywordColor":"#EAAD91","--progressionKeywordColor":"#ABB5DC","--specialityKeywordColor":"#5DBDF6","--equipmentKeywordColor":"#83C2A6","--amberColor":"#F67612","--amethystColor":"#E65DD8","--emeraldColor":"#50C878","--rubyColor":"#f2021a","--sapphireColor":"#799EFB","--topazColor":"#ffe600","--background-tertiary-shadow":"0 1px 3px 0 rgba(8, 9, 10, 0.5)"}};let Xs=(()=>{class t{constructor(){this.active=Qu,this.availableThemes=[w0,C0,S0,Qu]}getAvailableThemes(){return this.availableThemes}getActiveTheme(){return this.active}getActiveThemeName(){var e="";return e=this.active.name,this.active===Qu&&(e="night"),this.active===C0&&(e="light"),this.active===w0&&(e="white"),this.active===S0&&(e="twilight"),e}setNightTheme(){return this.setActiveTheme(Qu)}setLightTheme(){return this.setActiveTheme(C0)}setTwilightTheme(){return this.setActiveTheme(S0)}setWhiteTheme(){return this.setActiveTheme(w0)}setActiveTheme(e){return this.active=e,Object.keys(this.active.properties).forEach(i=>{document.documentElement.style.setProperty(i,this.active.properties[i])}),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Pa=(()=>{return(t=Pa||(Pa={}))[t.draw=0]="draw",t[t.text=1]="text",t[t.both=2]="both",Pa;var t})(),Li=(()=>{return(t=Li||(Li={}))[t.practice=0]="practice",t[t.novice=1]="novice",t[t.intermediate=2]="intermediate",t[t.master=3]="master",t[t.legacy=4]="legacy",Li;var t})(),ge=(()=>{return(t=ge||(ge={}))[t.circuit=0]="circuit",t[t.special=1]="special",t[t.event=2]="event",t[t.trainingTrack=3]="trainingTrack",ge;var t})(),Xe=(()=>{return(t=Xe||(Xe={}))[t.grandPrix=0]="grandPrix",Xe;var t})(),sr=(()=>{return(t=sr||(sr={}))[t.clearSkies=0]="clearSkies",t[t.inclementWeather=1]="inclementWeather",t[t.coldSpell=2]="coldSpell",sr;var t})(),jt=(()=>{return(t=jt||(jt={}))[t.rubyBrazier=0]="rubyBrazier",t[t.amberBrazier=1]="amberBrazier",t[t.topazBrazier=2]="topazBrazier",t[t.amethystBrazier=3]="amethystBrazier",t[t.sapphireBrazier=4]="sapphireBrazier",t[t.emeraldBrazier=5]="emeraldBrazier",jt;var t})();let It=(()=>{class t{constructor(e,i,r){this.utilityService=e,this.initializeService=i,this.themeService=r,this.globalVar=new en}initializeGlobalVariables(){this.globalVar.animals=[],this.globalVar.trainingOptions=[],this.globalVar.circuitRaces=[],this.globalVar.localRaces=[],this.globalVar.resources=[],this.globalVar.modifiers=[],this.globalVar.animalDecks=[],this.globalVar.barns=[],this.globalVar.redeemedCodes=[],this.globalVar.keybinds=new Ws,this.globalVar.settings=new Ws,this.globalVar.unlockables=new _0,this.globalVar.incubator=new Yu,this.globalVar.trackedStats=new b0,this.globalVar.orbStats=new qs,this.globalVar.tutorials=new Hf,this.globalVar.previousEventRewards=[],this.globalVar.eventRaceData=new er,this.globalVar.pinnacleHistory=new bs,this.globalVar.currentPinnacleConditions=void 0,this.globalVar.userIsRacing=!1,this.globalVar.nationalRaceCountdown=0,this.globalVar.autoFreeRaceCounter=0,this.globalVar.freeRaceCounter=0,this.globalVar.freeRaceTimePeriodCounter=0,this.globalVar.lastTimeStamp=Date.now(),this.globalVar.currentVersion=1.23,this.globalVar.startingVersion=1.23,this.globalVar.startDate=new Date,this.globalVar.notifications=new Gf,this.globalVar.relayEnergyFloor=50,this.globalVar.doNotRelayBelowEnergyFloor=!1,this.globalVar.barnOrder=[],this.globalVar.monthlyMangoesPurchased=0,this.InitializeModifiers(),this.InitializeAnimals(),this.InitializeRelayTeams(),this.InitializeGlobalTrainingOptions(),this.InitializeShop(),this.InitializeTokenShop(),this.InitializeBarns(),this.globalVar.circuitRank="Z",this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),this.checkCircuitRankRewards(),this.globalVar.monoRank="Z",this.globalVar.duoRank="Z",this.globalVar.rainbowRank="Z",this.globalVar.pinnacleFloor="Z",this.GenerateLocalRaces(),this.InitializeResources(),this.InitializeSettings(),this.InitializeUnlockables(),this.InitializeKeybinds()}InitializeModifiers(){this.globalVar.modifiers.push(new X(250,"monthlyMangoDefaultLimit")),this.globalVar.modifiers.push(new X(.2,"staminaModifier")),this.globalVar.modifiers.push(new X(.9,"exhaustionStatLossModifier")),this.globalVar.modifiers.push(new X(.3,"exhaustionStatLossMinimumModifier")),this.globalVar.modifiers.push(new X(5,"trainingBreedGaugeIncrease")),this.globalVar.modifiers.push(new X(10,"circuitBreedGaugeIncrease")),this.globalVar.modifiers.push(new X(1,"localBreedGaugeIncrease")),this.globalVar.modifiers.push(new X(.5,"trainingTrackPaceModifier")),this.globalVar.modifiers.push(new X(.05,"breedLevelStatModifier")),this.globalVar.modifiers.push(new X(10,"breedGaugeMaxIncreaseModifier")),this.globalVar.modifiers.push(new X(.001,"incubatorUpgradeIncreaseModifier")),this.globalVar.modifiers.push(new X(5,"facilityLevelModifier")),this.globalVar.modifiers.push(new X(.02,"animalHandlerModifier")),this.globalVar.modifiers.push(new X(.01,"stopwatchModifier")),this.globalVar.modifiers.push(new X(.1,"racerMapsModifier")),this.globalVar.modifiers.push(new X(50,"freeRacesToMedalModifier")),this.globalVar.modifiers.push(new X(25,"nationalRacesToMedalModifier")),this.globalVar.modifiers.push(new X(10,"internationalRacesToMedalModifier")),this.globalVar.modifiers.push(new X(.75,"moneyMarkPaceModifier")),this.globalVar.modifiers.push(new X(1.25,"moneyMarkRewardModifier")),this.globalVar.modifiers.push(new X(5,"whistleModifier")),this.globalVar.modifiers.push(new X(10,"goldenWhistleModifier")),this.globalVar.modifiers.push(new X(.1,"breedingGroundsSpecializationModifier")),this.globalVar.modifiers.push(new X(300,"attractionTimeToCollectModifier")),this.globalVar.modifiers.push(new X(20,"attractionAmountModifier")),this.globalVar.modifiers.push(new X(.05,"researchCenterIncrementsModifier")),this.globalVar.modifiers.push(new X(.7,"researchCenterTrainingAnimalModifier")),this.globalVar.modifiers.push(new X(.25,"researchCenterStudyingAnimalModifier")),this.globalVar.modifiers.push(new X(.75,"researchCenterMaxStatGainModifier")),this.globalVar.modifiers.push(new X(.001,"attractionRenownAmountModifier")),this.globalVar.modifiers.push(new X(1,"trainingFacilityAbilityXpAmountModifier")),this.globalVar.modifiers.push(new X(.1,"researchCenterRewardBonusAmountModifier")),this.globalVar.modifiers.push(new X(.05,"breedingGroundsAdditionalAmountModifier")),this.globalVar.modifiers.push(new X(3,"headbandEquipmentModifier")),this.globalVar.modifiers.push(new X(1,"quickSnackEquipmentModifier")),this.globalVar.modifiers.push(new X(.5,"blindersEquipmentModifier")),this.globalVar.modifiers.push(new X(.9,"pendantEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"redBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"blueBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"orangeBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"greenBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"yellowBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(1.1,"violetBatonEquipmentModifier")),this.globalVar.modifiers.push(new X(2,"scaryMaskEquipmentModifier")),this.globalVar.modifiers.push(new X(1.2,"runningShoesEquipmentModifier")),this.globalVar.modifiers.push(new X(.9,"incenseEquipmentModifier")),this.globalVar.modifiers.push(new X(.5,"athleticTapeEquipmentModifier")),this.globalVar.modifiers.push(new X(14400,"smallBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new X(28800,"mediumBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new X(43200,"largeBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new X(5,"freeRacesPerTimePeriodModifier")),this.globalVar.modifiers.push(new X(300,"freeRacesTimePeriodModifier")),this.globalVar.modifiers.push(new X(28800,"autoFreeRacesMaxIdleTimePeriodModifier")),this.globalVar.modifiers.push(new X(25e5,"metersPerCoinsGrandPrixModifier")),this.globalVar.modifiers.push(new X(2e7,"metersPerRenownGrandPrixModifier")),this.globalVar.modifiers.push(new X(250,"grandPrixCoinRewardModifier")),this.globalVar.modifiers.push(new X(3,"grandPrixRenownRewardModifier")),this.globalVar.modifiers.push(new X(5e7,"grandPrixToken1MeterModifier")),this.globalVar.modifiers.push(new X(1e8,"grandPrixToken2MeterModifier")),this.globalVar.modifiers.push(new X(25e7,"grandPrixToken3MeterModifier")),this.globalVar.modifiers.push(new X(5e8,"grandPrixToken4MeterModifier")),this.globalVar.modifiers.push(new X(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new X(.02,"exhaustionGainGrandPrixModifier")),this.globalVar.modifiers.push(new X(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new X(25,"grandPrixBreedLevelRequiredModifier")),this.globalVar.modifiers.push(new X(.5,"weatherMoraleBoostModifier")),this.globalVar.modifiers.push(new X(.03,"focusMoraleLossModifier")),this.globalVar.modifiers.push(new X(.02,"burstMoraleBoostModifier")),this.globalVar.modifiers.push(new X(.01,"stumbleMoraleLossModifier")),this.globalVar.modifiers.push(new X(.1,"segmentCompleteMoraleBoostModifier")),this.globalVar.modifiers.push(new X(25,"abilityLevelCapModifier")),this.globalVar.modifiers.push(new X(1.5,"feedingFrenzyPositiveModifier")),this.globalVar.modifiers.push(new X(.9,"feedingFrenzyNegativeModifier")),this.globalVar.modifiers.push(new X(20,"maxDriftAmountModifier")),this.globalVar.modifiers.push(new X(4,"relayAbilityXpGainModifier")),this.globalVar.modifiers.push(new X(25,"maximumTraitNegativePercentModifier"));var e=.3,i=.1,l=1.025,c=1.05,f=.975,v=.95;this.globalVar.modifiers.push(new X(e*l,"horseDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"horseDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5.5,"horseDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1,"horseDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*v,"horseDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"horseDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*c,"cheetahDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(1.1*i,"cheetahDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(4.5,"cheetahDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1,"cheetahDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5,"cheetahDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*f,"cheetahDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*v,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*v,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*l,"warthogDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"warthogDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*c,"warthogDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"warthogDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*f,"warthogDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*v,"warthogDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e,"monkeyDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*v,"monkeyDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"monkeyDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1.1,"monkeyDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*c,"monkeyDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"monkeyDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e,"goatDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*l,"goatDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*l,"goatDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*f,"goatDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*f,"goatDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5.5,"goatDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*v,"geckoDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"geckoDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*c,"geckoDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1,"geckoDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5.5,"geckoDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"geckoDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*f,"dolphinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*l,"dolphinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"dolphinDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1.1,"dolphinDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5,"dolphinDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*f,"dolphinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(.33,"sharkDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"sharkDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*f,"sharkDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"sharkDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*v,"sharkDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*v,"sharkDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*f,"octopusDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*v,"octopusDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"octopusDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1.1,"octopusDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*l,"octopusDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"octopusDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(.27,"whaleDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"whaleDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*c,"whaleDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*c,"whaleDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5.5,"whaleDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*v,"whaleDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*v,"penguinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"penguinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5,"penguinDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"penguinDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5,"penguinDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*c,"penguinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*f,"caribouDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*v,"caribouDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5.5,"caribouDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"caribouDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*c,"caribouDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"caribouDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e,"salamanderDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i*l,"salamanderDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*v,"salamanderDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1,"salamanderDefaultPowerModifier")),this.globalVar.modifiers.push(new X(5*c,"salamanderDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5,"salamanderDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new X(e*c,"foxDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new X(i,"foxDefaultAccelerationModifier")),this.globalVar.modifiers.push(new X(5*f,"foxDefaultStaminaModifier")),this.globalVar.modifiers.push(new X(1*l,"foxDefaultPowerModifier")),this.globalVar.modifiers.push(new X(4.5,"foxDefaultFocusModifier")),this.globalVar.modifiers.push(new X(5*c,"foxDefaultAdaptabilityModifier"))}InitializeAnimals(){var e=new $5;e.name="Horse",e.isAvailable=!0,this.calculateAnimalRacingStats(e);var i=new X5;i.name="Monkey",this.calculateAnimalRacingStats(i);var r=new W5;r.name="Hare",this.calculateAnimalRacingStats(r);var a=new jR;a.name="Warthog",this.calculateAnimalRacingStats(a);var o=new q5;o.name="Cheetah",this.calculateAnimalRacingStats(o);var s=new Y5;s.name="Goat",this.calculateAnimalRacingStats(s);var l=new Q5;l.name="Gecko",this.calculateAnimalRacingStats(l);var c=new K5;c.name="Dolphin",this.calculateAnimalRacingStats(c);var u=new Z5;u.name="Shark",this.calculateAnimalRacingStats(u);var f=new J5;f.name="Octopus",this.calculateAnimalRacingStats(f);var v=new $R;v.name="Whale",this.calculateAnimalRacingStats(v);var b=new e4;b.name="Penguin",this.calculateAnimalRacingStats(b);var y=new t4;y.name="Caribou",this.calculateAnimalRacingStats(y);var C=new i4;C.name="Salamander",this.calculateAnimalRacingStats(C);var T=new n4;T.name="Fox",this.calculateAnimalRacingStats(T),this.globalVar.animals.push(e),this.globalVar.animals.push(o),this.globalVar.animals.push(r),this.globalVar.animals.push(s),this.globalVar.animals.push(i),this.globalVar.animals.push(l),this.globalVar.animals.push(c),this.globalVar.animals.push(u),this.globalVar.animals.push(f),this.globalVar.animals.push(b),this.globalVar.animals.push(y),this.globalVar.animals.push(C),this.globalVar.animals.push(T),this.globalVar.animals.push(a),this.globalVar.animals.push(v)}InitializeRelayTeams(){var e=new Ef;e.isPrimaryDeck=!0,e.isAvailable=!0,e.name="Relay Team 1",e.deckNumber=1;var i=this.globalVar.animals.find(o=>"Horse"===o.getAnimalType());void 0!==i&&e.selectedAnimals.push(i),this.globalVar.animalDecks.push(e);for(var r=0;r<3;r++){var a=new Ef;a.isAvailable=!0,a.deckNumber=r+2,a.name="Relay Team "+a.deckNumber,this.globalVar.animalDecks.push(a)}}InitializeTokenShop(){this.globalVar.tokenShop=[];var e=new Aa,i=[],r=10,a=new et;a.name="Apples",a.purchasePrice.push(this.getTokenResourceValue(1)),a.basePurchasePrice.push(this.getTokenResourceValue(1)),a.shortDescription="+1 Acceleration to a single animal",a.numberPurchasing=r,a.canHaveMultiples=!0,a.type=G.Food,a.infiniteAmount=!0,i.push(a);var o=new et;o.name="Bananas",o.shortDescription="+1 Speed to a single animal",o.purchasePrice.push(this.getTokenResourceValue(1)),o.basePurchasePrice.push(this.getTokenResourceValue(1)),o.canHaveMultiples=!0,o.numberPurchasing=r,o.type=G.Food,o.infiniteAmount=!0,i.push(o);var s=new et;s.name="Strawberries",s.shortDescription="+1 Endurance to a single animal",s.purchasePrice.push(this.getTokenResourceValue(1)),s.basePurchasePrice.push(this.getTokenResourceValue(1)),s.canHaveMultiples=!0,s.numberPurchasing=r,s.type=G.Food,s.infiniteAmount=!0,i.push(s);var l=new et;l.name="Carrots",l.shortDescription="+1 Power to a single animal",l.purchasePrice.push(this.getTokenResourceValue(1)),l.basePurchasePrice.push(this.getTokenResourceValue(1)),l.canHaveMultiples=!0,l.numberPurchasing=r,l.type=G.Food,l.infiniteAmount=!0,i.push(l);var c=new et;c.name="Turnips",c.shortDescription="+1 Focus to a single animal",c.purchasePrice.push(this.getTokenResourceValue(1)),c.basePurchasePrice.push(this.getTokenResourceValue(1)),c.canHaveMultiples=!0,c.numberPurchasing=r,c.type=G.Food,c.infiniteAmount=!0,i.push(c);var u=new et;u.name="Oranges",u.shortDescription="+1 Adaptability to a single animal",u.purchasePrice.push(this.getTokenResourceValue(1)),u.basePurchasePrice.push(this.getTokenResourceValue(1)),u.canHaveMultiples=!0,u.numberPurchasing=r,u.type=G.Food,u.infiniteAmount=!0,i.push(u);var f=new et;f.name="Circuit Race Breed XP Gain Certificate",f.shortDescription=this.getItemDescription(f.name),f.purchasePrice.push(this.getTokenResourceValue(1)),f.basePurchasePrice.push(this.getTokenResourceValue(1)),f.canHaveMultiples=!0,f.type=G.Consumable,f.infiniteAmount=!0,i.push(f);var v=new et;v.name="Free Race Breed XP Gain Certificate",v.shortDescription=this.getItemDescription(v.name),v.purchasePrice.push(this.getTokenResourceValue(1)),v.basePurchasePrice.push(this.getTokenResourceValue(1)),v.canHaveMultiples=!0,v.type=G.Consumable,v.infiniteAmount=!0,i.push(v),e.name="Tier 1",e.itemList=i,this.globalVar.tokenShop.push(e);var b=new Aa,y=[],C=new et;C.name="Mangoes",C.shortDescription="+1 Breed Level to a single animal",C.purchasePrice.push(this.getTokenResourceValue(1)),C.basePurchasePrice.push(this.getTokenResourceValue(1)),C.canHaveMultiples=!0,C.numberPurchasing=2,C.type=G.Food,C.infiniteAmount=!0,y.push(C);var T=new et;T.name="Coins",T.shortDescription="",T.purchasePrice.push(this.getTokenResourceValue(1)),T.basePurchasePrice.push(this.getTokenResourceValue(1)),T.canHaveMultiples=!0,T.numberPurchasing=5e3,T.type=G.Resources,T.infiniteAmount=!0,y.push(T);var M=new et;M.name="Diminishing Returns Increase Certificate",M.shortDescription=this.getItemDescription(M.name),M.purchasePrice.push(this.getTokenResourceValue(4)),M.basePurchasePrice.push(this.getTokenResourceValue(4)),M.canHaveMultiples=!0,M.type=G.Consumable,M.infiniteAmount=!0,y.push(M);var S=new et;S.name="Training Breed XP Gain Certificate",S.shortDescription=this.getItemDescription(S.name),S.purchasePrice.push(this.getTokenResourceValue(2)),S.basePurchasePrice.push(this.getTokenResourceValue(2)),S.canHaveMultiples=!0,S.type=G.Consumable,S.infiniteAmount=!0,y.push(S),b.name="Tier 2",b.itemList=y,this.globalVar.tokenShop.push(b);var w=new Aa,B=[],j=new et;j.name=this.getEquipmentName(ht.scaryMask),j.shortDescription=this.getEquipmentDescription(j.name),j.purchasePrice.push(this.getTokenResourceValue(7)),j.canHaveMultiples=!0,j.infiniteAmount=!0,j.type=G.Equipment,B.push(j);var de=new et;de.name=this.getEquipmentName(ht.runningShoes),de.shortDescription=this.getEquipmentDescription(de.name),de.purchasePrice.push(this.getTokenResourceValue(7)),de.canHaveMultiples=!0,de.infiniteAmount=!0,de.type=G.Equipment,B.push(de);var ne=new et;ne.name=this.getEquipmentName(ht.incense),ne.shortDescription=this.getEquipmentDescription(ne.name),ne.purchasePrice.push(this.getTokenResourceValue(7)),ne.canHaveMultiples=!0,ne.infiniteAmount=!0,ne.type=G.Equipment,B.push(ne);var ue=new et;ue.name=this.getEquipmentName(ht.athleticTape),ue.shortDescription=this.getEquipmentDescription(ue.name),ue.purchasePrice.push(this.getTokenResourceValue(7)),ue.canHaveMultiples=!0,ue.infiniteAmount=!0,ue.type=G.Equipment,B.push(ue),w.name="Tier 3",w.itemList=B,this.globalVar.tokenShop.push(w)}InitializeShop(){this.globalVar.shop=[];var e=new Aa,i=[],u=new et;u.name="Cheetah",u.purchasePrice.push(new te("Coins",1e3)),u.canHaveMultiples=!1,u.type=G.Animal,i.push(u);var f=new et;f.name="Warthog",f.purchasePrice.push(new te("Coins",1e3)),f.canHaveMultiples=!1,f.type=G.Animal,i.push(f);var v=new et;v.name="Goat",v.purchasePrice.push(new te("Coins",2500)),v.canHaveMultiples=!1,v.type=G.Animal,v.isAvailable=!1,i.push(v);var b=new et;b.name="Gecko",b.purchasePrice.push(new te("Coins",2500)),b.canHaveMultiples=!1,b.type=G.Animal,b.isAvailable=!1,i.push(b);var y=new et;y.name="Shark",y.purchasePrice.push(new te("Coins",5e3)),y.canHaveMultiples=!1,y.type=G.Animal,y.isAvailable=!1,i.push(y);var C=new et;C.name="Octopus",C.purchasePrice.push(new te("Coins",5e3)),C.canHaveMultiples=!1,C.type=G.Animal,C.isAvailable=!1,i.push(C);var T=new et;T.name="Caribou",T.purchasePrice.push(new te("Coins",1e4)),T.canHaveMultiples=!1,T.type=G.Animal,T.isAvailable=!1,i.push(T);var M=new et;M.name="Fox",M.purchasePrice.push(new te("Coins",1e4)),M.canHaveMultiples=!1,M.type=G.Animal,M.isAvailable=!1,i.push(M),e.name="Animals",e.itemList=i,this.globalVar.shop.push(e);var S=new Aa,w=[],B=10,j=new et;j.name="Apples",j.purchasePrice.push(new te("Coins",B)),j.canHaveMultiples=!0,j.type=G.Food,j.infiniteAmount=!0,w.push(j);var de=new et;de.name="Bananas",de.purchasePrice.push(new te("Coins",B)),de.canHaveMultiples=!0,de.type=G.Food,de.infiniteAmount=!0,w.push(de);var ne=new et;ne.name="Strawberries",ne.purchasePrice.push(new te("Coins",B)),ne.canHaveMultiples=!0,ne.type=G.Food,ne.infiniteAmount=!0,w.push(ne);var ue=new et;ue.name="Carrots",ue.purchasePrice.push(new te("Coins",B)),ue.canHaveMultiples=!0,ue.type=G.Food,ue.infiniteAmount=!0,w.push(ue);var se=new et;se.name="Turnips",se.purchasePrice.push(new te("Coins",B)),se.canHaveMultiples=!0,se.type=G.Food,se.infiniteAmount=!0,w.push(se);var Ce=new et;Ce.name="Oranges",Ce.purchasePrice.push(new te("Coins",B)),Ce.canHaveMultiples=!0,Ce.type=G.Food,Ce.infiniteAmount=!0,w.push(Ce);var Se=new et;Se.name="Mangoes",Se.purchasePrice.push(new te("Coins",100)),Se.canHaveMultiples=!0,Se.type=G.Food,Se.infiniteAmount=!0,w.push(Se);var ve=new et;ve.name="Gingko Leaves",ve.purchasePrice.push(new te("Coins",3500)),ve.canHaveMultiples=!0,ve.type=G.Food,ve.infiniteAmount=!0,ve.isAvailable=!1,w.push(ve),S.name="Food",S.itemList=w,this.globalVar.shop.push(S);var Oe=new Aa,Ke=[];this.globalVar.trainingOptions.filter(gn=>!gn.isAvailable).forEach(gn=>{var $i=new et;$i.name=gn.trainingName,$i.shortDescription=gn.getStatGainDescription(),$i.purchasePrice.push(new te("Coins",gn.purchasePrice)),$i.canHaveMultiples=!1,$i.type=G.Training,(gn.facilitySize===Rt.Medium||gn.facilitySize===Rt.Large)&&($i.isAvailable=!1,$i.additionalIdentifier=gn.facilitySize.toString()),Ke.push($i)}),Oe.name="Trainings",Oe.itemList=Ke,this.globalVar.shop.push(Oe);var Ht=new Aa,qe=[];this.globalVar.animals.forEach(gn=>{gn.availableAbilities.forEach($i=>{if(!$i.isAbilityPurchased){var Gn=new et;Gn.name=gn.getAnimalType()+" Ability: "+$i.name,Gn.purchasePrice.push(new te("Coins",$i.purchasePrice)),Gn.canHaveMultiples=!1,Gn.type=G.Ability,Gn.additionalIdentifier=$i.name,Gn.isAvailable=gn.isAvailable,qe.push(Gn)}})}),Ht.name="Abilities",Ht.itemList=qe,this.globalVar.shop.push(Ht);var ft=new Aa,xt=[],Dt=new et;Dt.name="Stopwatch",Dt.purchasePrice.push(this.getMedalResourceValue(10)),Dt.basePurchasePrice.push(this.getMedalResourceValue(10)),Dt.quantityMultiplier=2.5,Dt.totalShopQuantity=2,Dt.canHaveMultiples=!0,Dt.type=G.Specialty,xt.push(Dt);var ee=new et;ee.name="Animal Handler",ee.purchasePrice.push(this.getCoinsResourceValue(2e3)),ee.basePurchasePrice.push(this.getCoinsResourceValue(2e3)),ee.quantityAdditive=2e3,ee.totalShopQuantity=20,ee.canHaveMultiples=!0,ee.type=G.Specialty,xt.push(ee);var R=new et;R.name="Course Maps",R.purchasePrice.push(this.getMedalResourceValue(2)),R.basePurchasePrice.push(this.getMedalResourceValue(2)),R.quantityMultiplier=2,R.totalShopQuantity=5,R.isAvailable=!1,R.canHaveMultiples=!0,R.type=G.Specialty,xt.push(R);var pt=new et;pt.name="Stockbreeder",pt.purchasePrice.push(this.getCoinsResourceValue(500)),pt.basePurchasePrice.push(this.getCoinsResourceValue(500)),pt.canHaveMultiples=!1,pt.type=G.Specialty,xt.push(pt);var _t=new et;_t.name="Team Manager",_t.purchasePrice.push(this.getMedalResourceValue(3)),_t.basePurchasePrice.push(this.getMedalResourceValue(3)),_t.canHaveMultiples=!0,_t.quantityMultiplier=2,_t.totalShopQuantity=19,_t.type=G.Specialty,xt.push(_t);var Ot=new et;Ot.name="Scouts",Ot.purchasePrice.push(this.getCoinsResourceValue(1e4)),Ot.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),Ot.canHaveMultiples=!1,Ot.isAvailable=!1,Ot.type=G.Specialty,xt.push(Ot);var Kt=new et;Kt.name="Money Mark",Kt.purchasePrice.push(this.getCoinsResourceValue(500)),Kt.basePurchasePrice.push(this.getCoinsResourceValue(500)),Kt.canHaveMultiples=!1,Kt.type=G.Specialty,xt.push(Kt);var ct=new et;ct.name="National Races",ct.purchasePrice.push(this.getCoinsResourceValue(1e4)),ct.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),ct.canHaveMultiples=!1,ct.isAvailable=!1,ct.type=G.Specialty,xt.push(ct);var Ue,ii=new et;ii.name="International Races",ii.purchasePrice.push(this.getCoinsResourceValue(5e4)),ii.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),ii.canHaveMultiples=!1,ii.isAvailable=!1,ii.type=G.Specialty,xt.push(ii),(Ue=new et).name="Incubator Upgrade Lv1",Ue.purchasePrice.push(this.getCoinsResourceValue(5e3)),Ue.basePurchasePrice.push(this.getCoinsResourceValue(5e3)),Ue.canHaveMultiples=!1,Ue.isAvailable=!1,Ue.type=G.Specialty,xt.push(Ue),(Ue=new et).name="Incubator Upgrade Lv2",Ue.purchasePrice.push(this.getCoinsResourceValue(25e3)),Ue.basePurchasePrice.push(this.getCoinsResourceValue(25e3)),Ue.canHaveMultiples=!1,Ue.isAvailable=!1,Ue.type=G.Specialty,xt.push(Ue),(Ue=new et).name="Incubator Upgrade Lv3",Ue.purchasePrice.push(this.getCoinsResourceValue(1e5)),Ue.basePurchasePrice.push(this.getCoinsResourceValue(1e5)),Ue.canHaveMultiples=!1,Ue.isAvailable=!1,Ue.type=G.Specialty,xt.push(Ue),(Ue=new et).name="Incubator Upgrade Lv4",Ue.purchasePrice.push(this.getCoinsResourceValue(1e6)),Ue.basePurchasePrice.push(this.getCoinsResourceValue(1e6)),Ue.canHaveMultiples=!1,Ue.isAvailable=!1,Ue.type=G.Specialty,xt.push(Ue);var Ri=new et;Ri.name="Whistle",Ri.purchasePrice.push(this.getCoinsResourceValue(2500)),Ri.basePurchasePrice.push(this.getCoinsResourceValue(2500)),Ri.totalShopQuantity=1,Ri.canHaveMultiples=!1,Ri.isAvailable=!1,Ri.type=G.Specialty,xt.push(Ri);var tn=new et;tn.name="Golden Whistle",tn.purchasePrice.push(this.getCoinsResourceValue(15e3)),tn.basePurchasePrice.push(this.getCoinsResourceValue(15e3)),tn.totalShopQuantity=1,tn.canHaveMultiples=!1,tn.isAvailable=!1,tn.type=G.Specialty,xt.push(tn);var Ei=new et;Ei.name="Talent Point Voucher",Ei.purchasePrice.push(this.getMedalResourceValue(25)),Ei.basePurchasePrice.push(this.getMedalResourceValue(25)),Ei.infiniteAmount=!0,Ei.canHaveMultiples=!0,Ei.quantityAdditive=25,Ei.isAvailable=!1,Ei.type=G.Specialty,xt.push(Ei);var Ai=new et;Ai.name="Training Facility Improvements",Ai.purchasePrice.push(this.getCoinsResourceValue(25e4)),Ai.basePurchasePrice.push(this.getCoinsResourceValue(25e4)),Ai.totalShopQuantity=1,Ai.canHaveMultiples=!1,Ai.isAvailable=!1,Ai.type=G.Specialty,xt.push(Ai);var hi=new et;hi.name="Breeding Grounds Improvements",hi.purchasePrice.push(this.getCoinsResourceValue(25e4)),hi.basePurchasePrice.push(this.getCoinsResourceValue(25e4)),hi.totalShopQuantity=1,hi.canHaveMultiples=!1,hi.isAvailable=!1,hi.type=G.Specialty,xt.push(hi);var Pi=new et;Pi.name="Attraction Improvements",Pi.purchasePrice.push(this.getCoinsResourceValue(25e4)),Pi.basePurchasePrice.push(this.getCoinsResourceValue(25e4)),Pi.totalShopQuantity=1,Pi.canHaveMultiples=!1,Pi.isAvailable=!1,Pi.type=G.Specialty,xt.push(Pi);var vi=new et;vi.name="Research Center Improvements",vi.purchasePrice.push(this.getCoinsResourceValue(25e4)),vi.basePurchasePrice.push(this.getCoinsResourceValue(25e4)),vi.totalShopQuantity=1,vi.canHaveMultiples=!1,vi.isAvailable=!1,vi.type=G.Specialty,xt.push(vi);var fi=new et;fi.name="Orb Infuser",fi.purchasePrice.push(this.getCoinsResourceValue(5e6)),fi.basePurchasePrice.push(this.getCoinsResourceValue(5e6)),fi.canHaveMultiples=!1,fi.isAvailable=!1,fi.type=G.Specialty,xt.push(fi),ft.name="Specialty",ft.itemList=xt,this.globalVar.shop.push(ft);var mn=new Aa,mt=[],mi=new et;mi.name=this.getEquipmentName(ht.headband),mi.shortDescription=this.getEquipmentDescription(mi.name),mi.purchasePrice.push(this.getCoinsResourceValue(1e3)),mi.canHaveMultiples=!0,mi.infiniteAmount=!0,mi.type=G.Equipment,mt.push(mi);var Gt=new et;Gt.name=this.getEquipmentName(ht.pendant),Gt.shortDescription=this.getEquipmentDescription(Gt.name),Gt.purchasePrice.push(this.getCoinsResourceValue(1e3)),Gt.canHaveMultiples=!0,Gt.infiniteAmount=!0,Gt.type=G.Equipment,mt.push(Gt);var wt=new et;wt.name=this.getEquipmentName(ht.blinders),wt.shortDescription=this.getEquipmentDescription(wt.name),wt.purchasePrice.push(this.getCoinsResourceValue(1e3)),wt.canHaveMultiples=!0,wt.infiniteAmount=!0,wt.type=G.Equipment,mt.push(wt);var Ui=new et;Ui.name=this.getEquipmentName(ht.quickSnack),Ui.shortDescription=this.getEquipmentDescription(Ui.name),Ui.purchasePrice.push(this.getCoinsResourceValue(1e3)),Ui.canHaveMultiples=!0,Ui.infiniteAmount=!0,Ui.type=G.Equipment,mt.push(Ui);var ai=new et;ai.name=this.getEquipmentName(ht.redBaton),ai.shortDescription=this.getEquipmentDescription(ai.name),ai.purchasePrice.push(this.getCoinsResourceValue(2500)),ai.canHaveMultiples=!0,ai.infiniteAmount=!0,ai.isAvailable=!1,ai.type=G.Equipment,mt.push(ai);var oi=new et;oi.name=this.getEquipmentName(ht.blueBaton),oi.shortDescription=this.getEquipmentDescription(oi.name),oi.purchasePrice.push(this.getCoinsResourceValue(2500)),oi.canHaveMultiples=!0,oi.infiniteAmount=!0,oi.isAvailable=!1,oi.type=G.Equipment,mt.push(oi);var nn=new et;nn.name=this.getEquipmentName(ht.violetBaton),nn.shortDescription=this.getEquipmentDescription(nn.name),nn.purchasePrice.push(this.getCoinsResourceValue(2500)),nn.canHaveMultiples=!0,nn.infiniteAmount=!0,nn.isAvailable=!1,nn.type=G.Equipment,mt.push(nn);var ji=new et;ji.name=this.getEquipmentName(ht.orangeBaton),ji.shortDescription=this.getEquipmentDescription(ji.name),ji.purchasePrice.push(this.getCoinsResourceValue(2500)),ji.canHaveMultiples=!0,ji.infiniteAmount=!0,ji.isAvailable=!1,ji.type=G.Equipment,mt.push(ji);var Bi=new et;Bi.name=this.getEquipmentName(ht.greenBaton),Bi.shortDescription=this.getEquipmentDescription(Bi.name),Bi.purchasePrice.push(this.getCoinsResourceValue(2500)),Bi.canHaveMultiples=!0,Bi.infiniteAmount=!0,Bi.isAvailable=!1,Bi.type=G.Equipment,mt.push(Bi);var Ni=new et;Ni.name=this.getEquipmentName(ht.yellowBaton),Ni.shortDescription=this.getEquipmentDescription(Ni.name),Ni.purchasePrice.push(this.getCoinsResourceValue(2500)),Ni.canHaveMultiples=!0,Ni.infiniteAmount=!0,Ni.isAvailable=!1,Ni.type=G.Equipment,mt.push(Ni),mn.name="Equipment",mn.itemList=mt,this.globalVar.shop.push(mn)}getEquipmentName(e){return e===ht.headband?"Headband":e===ht.pendant?"Pendant":e===ht.blinders?"Blinders":e===ht.quickSnack?"Quick Snack":e===ht.carrotOnAStick?"Carrot on a Stick":e===ht.redBaton?"Red Baton":e===ht.blueBaton?"Blue Baton":e===ht.violetBaton?"Violet Baton":e===ht.yellowBaton?"Yellow Baton":e===ht.greenBaton?"Green Baton":e===ht.orangeBaton?"Orange Baton":e===ht.scaryMask?"Scary Mask":e===ht.runningShoes?"Running Shoes":e===ht.incense?"Incense":e===ht.athleticTape?"Athletic Tape":""}getEquipmentEnum(e){return"Headband"===e?ht.headband:"Pendant"===e?ht.pendant:"Blinders"===e?ht.blinders:"Quick Snack"===e?ht.quickSnack:"Carrot on a Stick"===e?ht.carrotOnAStick:"Red Baton"===e?ht.redBaton:"Blue Baton"===e?ht.blueBaton:"Violet Baton"===e?ht.violetBaton:"Yellow Baton"===e?ht.yellowBaton:"Green Baton"===e?ht.greenBaton:"Orange Baton"===e?ht.orangeBaton:"Scary Mask"===e?ht.scaryMask:"Running Shoes"===e?ht.runningShoes:"Incense"===e?ht.incense:"Athletic Tape"===e?ht.athleticTape:ht.none}InitializeBarns(){if(null==this.globalVar.barns||0===this.globalVar.barns.length){this.globalVar.barns=[];var i=new v0;if(i.barnNumber=1,i.isLocked=!1,i.size=Rt.Small,i.purchasePrice=0,i.facilityUpgradePrice=500,i.upgradePrice=500,null!=this.globalVar.animals&&this.globalVar.animals.length>0){var r=this.globalVar.animals.find(s=>s.type===L.Horse);null!=r&&(r.associatedBarnNumber=i.barnNumber)}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.globalVar.barns.push(i);for(var a=2;a<=15;a++){var o=new v0;o.barnNumber=a,o.isLocked=!0,o.purchasePrice=500*(a-1),o.facilityUpgradePrice=500,o.size=Rt.Small,this.globalVar.barns.push(o)}this.globalVar.barns.forEach(s=>{this.globalVar.barnOrder.push(s.barnNumber)})}}InitializeGlobalTrainingOptions(){this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.ShortTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.Sprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.TrailRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.MoveLogs)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.Footwork)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.PracticeCommands)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.ScentTraining)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.SmallWagonTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.Sidestep)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.MediumTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.UphillRun)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.Puzzles)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.MoveRocks)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.LateralVerticalDrill)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.DodgeBall)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.BurstPractice)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.Acrobatics)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.LongTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.VehicleTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.LogJump)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.Meditation)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.WindSprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.GreenwayHike)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.Marathon)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(ze.AgilityCourse))}IncreaseCircuitRank(){var e=this.globalVar.circuitRank,i=e.replace(/([A-Z])[^A-Z]*$/,function(c){var u=c.charCodeAt(0);return 65===u?String.fromCharCode(u)+"Z":String.fromCharCode(--u)}),r=!1;this.utilityService.getNumericValueOfCircuitRank(this.globalVar.monoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.duoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.rainbowRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),r&&(this.globalVar.notifications.isNewSpecialRaceAvailable=!0),this.globalVar.circuitRank=i;var l=this.checkCircuitRankRewards();return this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),l}IncreaseLocalRaceRank(e){var i="";e===Ut.Mono&&(i=this.globalVar.monoRank),e===Ut.Duo&&(i=this.globalVar.duoRank),e===Ut.Rainbow&&(i=this.globalVar.rainbowRank),e===Ut.Pinnacle&&(i=this.globalVar.pinnacleFloor);var r=i.replace(/([A-Z])[^A-Z]*$/,function(a){var o=a.charCodeAt(0);return 65===o?String.fromCharCode(o)+"Z":String.fromCharCode(--o)});e===Ut.Mono&&(this.globalVar.monoRank=r,this.GenerateMonoRaces(this.globalVar.monoRank)),e===Ut.Duo&&(this.globalVar.duoRank=r,this.GenerateDuoRaces(this.globalVar.duoRank)),e===Ut.Rainbow&&(this.globalVar.rainbowRank=r,this.GenerateRainbowRaces(this.globalVar.rainbowRank)),e===Ut.Pinnacle&&(this.globalVar.pinnacleFloor=r,this.GeneratePinnacleRaces(this.globalVar.pinnacleFloor))}increaseGrandPrixRaceRank(){if(null!=this.globalVar.eventRaceData){var i=this.globalVar.eventRaceData.rank.replace(/([A-Z])[^A-Z]*$/,function(a){var o=a.charCodeAt(0);return 65===o?String.fromCharCode(o)+"Z":String.fromCharCode(--o)});if(this.globalVar.eventRaceData.rank=i,this.utilityService.getNumericValueOfCircuitRank(this.globalVar.eventRaceData.rank)%5==0)this.globalVar.eventRaceData.rankDistanceMultiplier*=2;else{var r=Math.ceil(this.utilityService.getNumericValueOfCircuitRank(this.globalVar.eventRaceData.rank)/5);this.globalVar.eventRaceData.rankDistanceMultiplier+=r}this.initialGrandPrixSetup(this.globalVar.eventRaceData.rank,this.globalVar.eventRaceData.rankDistanceMultiplier),this.globalVar.eventRaceData.initialSetupComplete=!0,this.globalVar.notifications.isEventRaceNowActive=!0}}getRewardReceiveText(e){return this.globalVar.settings.get("useNumbersForCircuitRank")?"Reach circuit rank "+e+" to receive: \n":"Reach circuit rank "+this.utilityService.getCircuitRankFromNumericValue(e)+" to receive: \n"}checkCircuitRankRewards(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=["",""];if(1===e&&(this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(2)+"Mono Races"),2===e&&(this.globalVar.unlockables.set("monoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,i=["Mono Race",this.utilityService.getSanitizedHtml("A new race type has been unlocked! Take part in a Mono Race where you run an extended race as only one course type. Progressing through this race type generates new interest in your facility, which means it's time to make some upgrades. Gain Facility Level points from winning these races that increase your Diminishing Returns max value. <br/> <br/><em>Select this race and others like it by choosing the 'Special Race' option from the 'Races' menu.</em>")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(3)+"Monkey"),3===e){var r=this.globalVar.animals.find(Se=>Se.type===L.Monkey);if(null!=r&&(r.isAvailable=!0,this.unlockAnimalAbilities(r),this.unlockOtherRaceCourseTypeAnimals(r.raceCourseType),null!=(a=this.globalVar.animalDecks.find(Se=>Se.isPrimaryDeck)))){var o=!1;a.selectedAnimals.forEach(Se=>{Se.raceCourseType===(null==r?void 0:r.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(r)}i=["Monkey",this.getAnimalDescription("Monkey")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(4)+"Coaching"}else if(4===e){if(this.globalVar.unlockables.set("coaching",!0),null!=(s=this.globalVar.shop.find(Se=>"Specialty"===Se.name))){var l=s.itemList.find(Se=>"Whistle"===Se.name);null!=l&&(l.isAvailable=!0)}i=["Coaching","Take charge of your animal's training by giving them some coaching yourself. Visit a barn with an animal assigned and select 'Coach' to get started."];var c=500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+c+" Coins"}else if(5===e)c=500,null==(u=this.globalVar.resources.find(ve=>"Coins"===ve.name))?this.globalVar.resources.push(new te("Coins",c)):u.amount+=c,i=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(6)+"1 Team Manager";else if(6===e){c=1,null==(u=this.globalVar.resources.find(Oe=>"Team Manager"===Oe.name))?(this.globalVar.resources.push(new te("Team Manager",c,G.Specialty)),null!=(f=this.globalVar.animalDecks.find(Oe=>Oe.isPrimaryDeck))&&(f.autoRunFreeRace=!0)):u.amount+=c,i=[c+" Team Manager","As your popularity has grown, you've attracted some new faces to your racing facility. Each Team Manager you receive will automatically run 1 free race per reset period. Buy more from the Shop."];var v=1e3;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(7)+"Barn Specializations"}else if(7===e)this.globalVar.unlockables.set("barnSpecializations",!0),i=["Barn Specializations","As your training facility grows, so should your barns. At barn upgrade level 10, choose what direction you want your barn to progress in. Each option benefits your animals in different ways, so choose carefully."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(8)+"Headband";else if(8===e)c=1,null==(u=this.globalVar.resources.find(Ke=>"Headband"===Ke.name))?this.globalVar.resources.push(new te("Headband",c,G.Equipment)):u.amount+=c,i=[c+" Headband","Equipment can be handled when viewing an animal from the Animals tab."],v=1e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(9)+v+" Coins";else if(9===e)c=1e3,null==(u=this.globalVar.resources.find(Oe=>"Coins"===Oe.name))?this.globalVar.resources.push(new te("Coins",c)):u.amount+=c,i=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Hare";else if(10===e){var b=this.globalVar.animals.find(ve=>ve.type===L.Hare);null!=b&&(b.isAvailable=!0,this.unlockAnimalAbilities(b)),this.sortAnimalOrder(),i=["Hare",this.getAnimalDescription("Hare")],c=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(12)+c+" Stat Increasing Food"}else if(12===e)this.increaseAllFood(c=20),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(13)+"Barn Row 2";else if(13===e){this.globalVar.unlockables.set("barnRow2",!0),i=["Barn Row 2",""];var y=1;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(14)+"Attraction Specialization"}else if(14===e)this.globalVar.unlockables.set("attractionSpecialization",!0),i=["Attraction Specialization",this.getSpecializationDescription("Attraction")+"<br/><br/><em>Barn Specializations are available to select once you upgrade a barn to level 10.</em>"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(15)+"Dolphin";else if(15===e){var C=this.globalVar.animals.find(Se=>Se.type===L.Dolphin);null!=C&&(C.isAvailable=!0,this.unlockAnimalAbilities(C),this.unlockOtherRaceCourseTypeAnimals(C.raceCourseType),null!=(a=this.globalVar.animalDecks.find(ve=>ve.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(Oe=>{Oe.raceCourseType===(null==C?void 0:C.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(C))),this.sortAnimalOrder(),i=["Dolphin",this.getAnimalDescription("Dolphin")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(16)+"1 Pendant"}else if(16===e)c=1,null==(u=this.globalVar.resources.find(Oe=>"Pendant"===Oe.name))?this.globalVar.resources.push(new te("Pendant",c,G.Equipment)):u.amount+=c,i=[c+" Pendant","Equipment can be handled when viewing an animal from the Animals tab."],c=5,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(18)+c+" Renown";else if(18===e)y=5,null==(T=this.globalVar.resources.find(ve=>"Renown"===ve.name))?this.globalVar.resources.push(new te("Renown",y)):T.amount+=y,i=[y+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+"Grand Prix";else if(20===e){var f;this.globalVar.unlockables.set("grandPrix",!0),null!=(f=this.globalVar.animalDecks.find(Oe=>Oe.isPrimaryDeck))&&(f.isEventDeck=!0),i=["Grand Prix","Now that you've climbed the ranks and your racing team has turned some heads, you've received an invite to the Grand Prix invitational. Twice per week, a marathon style race runs over multiple days. Check the 'Event Races' tab to see more info."],c=50,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(22)+c+" Stat Increasing Food"}else 22===e?(this.increaseAllFood(c=50),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],v=1500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(23)+v+" Coins"):23===e&&(c=1500,null==(u=this.globalVar.resources.find(Oe=>"Coins"===Oe.name))?this.globalVar.resources.push(new te("Coins",c)):u.amount+=c,i=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(25)+"Whale");if(25===e){var M=this.globalVar.animals.find(Se=>Se.type===L.Whale);null!=M&&(M.isAvailable=!0,this.unlockAnimalAbilities(M)),this.sortAnimalOrder(),i=["Whale",this.getAnimalDescription("Whale")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(27)+"Duo Races"}else if(27===e)this.globalVar.unlockables.set("duoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,this.unlockTier2ShopItems(),i=["Duo Races","A new race type has been unlocked! Race in pairs to complete this long distance race. Success here will generate more interest for your facility, this time drawing in curious researchers. Gain Research Levels that improve incubator results."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(29)+"Barn Row 3";else if(29===e){this.globalVar.unlockables.set("barnRow3",!0),i=["Barn Row 3",""];var S=2500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(30)+S+" Coins"}else if(30===e){var w=2500;null==(u=this.globalVar.resources.find(Oe=>"Coins"===Oe.name))?this.globalVar.resources.push(new te("Coins",w)):u.amount+=w,i=[w+" Coins",""],c=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(32)+"1 Blue Baton"}else if(32===e)c=1,null==(u=this.globalVar.resources.find(Oe=>"Blue Baton"===Oe.name))?this.globalVar.resources.push(new te("Blue Baton",c,G.Equipment)):u.amount+=c,i=[c+" Blue Baton","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(33)+20+" Mangoes";else if(33===e)c=20,null==(u=this.globalVar.resources.find(Oe=>"Mangoes"===Oe.name))?this.globalVar.resources.push(new te("Mangoes",c,G.Food)):u.amount+=c,i=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(35)+"Penguin";else if(35===e){var j=this.globalVar.animals.find(ve=>ve.type===L.Penguin);null!=j&&(j.isAvailable=!0,this.unlockAnimalAbilities(j),this.unlockOtherRaceCourseTypeAnimals(j.raceCourseType),null!=(a=this.globalVar.animalDecks.find(Oe=>Oe.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(Ke=>{Ke.raceCourseType===(null==j?void 0:j.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(j))),this.sortAnimalOrder(),i=["Penguin",this.getAnimalDescription("Penguin")+"<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getTundraDescription()+"</em>")],S=3500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(37)+S+" Coins"}else if(37===e)w=3500,null==(u=this.globalVar.resources.find(Oe=>"Coins"===Oe.name))?this.globalVar.resources.push(new te("Coins",w)):u.amount+=w,i=[w+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(38)+"5 Medals";else if(38===e)null==(u=this.globalVar.resources.find(ve=>"Medals"===ve.name))?this.globalVar.resources.push(new te("Medals",5)):u.amount+=5,i=["5 Medals",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(40)+"Barn Row 4";else if(40===e)this.globalVar.unlockables.set("barnRow4",!0),i=["Barn Row 4",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(41)+"Research Center Specialization";else if(41===e){if(this.globalVar.unlockables.set("researchCenterSpecialization",!0),null!=(s=this.globalVar.shop.find(Oe=>"Specialty"===Oe.name))){var ne=s.itemList.find(Oe=>"Research Center Improvements"===Oe.name);null!=ne&&(ne.isAvailable=!0)}i=["Research Center Specialization",this.getSpecializationDescription("Research Center")],c=250,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(43)+c+" Stat Increasing Food"}else if(43===e)this.increaseAllFood(c=250),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(45)+"Salamander";else if(45===e){var a,ue=this.globalVar.animals.find(ve=>ve.type===L.Salamander);null!=ue&&(ue.isAvailable=!0,this.unlockAnimalAbilities(ue),this.unlockOtherRaceCourseTypeAnimals(ue.raceCourseType),null!=(a=this.globalVar.animalDecks.find(Oe=>Oe.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(Ke=>{Ke.raceCourseType===(null==ue?void 0:ue.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(ue))),this.sortAnimalOrder(),i=["Salamander",this.getAnimalDescription("Salamander")+"<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getVolcanicDescription()+"</em>")],y=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(47)+y+" Renown"}else if(47===e)y=10,null==(T=this.globalVar.resources.find(Ke=>"Renown"===Ke.name))?this.globalVar.resources.push(new te("Renown",y)):T.amount+=y,i=[y+" Renown",""],w=15e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(50)+w+" Coins";else if(50===e)S=15e3,null==(u=this.globalVar.resources.find(Oe=>"Coins"===Oe.name))?this.globalVar.resources.push(new te("Coins",S)):u.amount+=S,i=[S+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(53)+"Rainbow Races";else if(53===e){if(this.globalVar.unlockables.set("rainbowRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(s=this.globalVar.shop.find(ve=>"Specialty"===ve.name))){var se=s.itemList.find(ve=>"Talent Point Voucher"===ve.name);null!=se&&(se.isAvailable=!0)}i=["Rainbow Race","A new race type has been unlocked! This race requires a full team effort spanning all five course types. Your team of researchers are on hand for these races, coming up with more efficient ways to win. Gain Talent Tree Points that can be spent to improve various course types."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(55)+"Amethyst Orb"}else if(55===e)this.globalVar.resources.push(new te("Amethyst Orb",1,G.Equipment)),this.globalVar.unlockables.set("orbs",!0),i=["Amethyst Orb","You receive a glowing violet orb. What it is for is a mystery, but you feel faster while you hold it."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(58)+"Barn Row 5";else if(58===e)this.globalVar.unlockables.set("barnRow5",!0),i=["Barn Row 5",""],y=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(60)+"Sapphire Orb";else if(60===e)this.globalVar.resources.push(new te("Sapphire Orb",1,G.Equipment)),i=["Sapphire Orb","You receive a glowing blue orb. What it is for is a mystery, but you feel faster while you hold it.."],c=100,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(62)+c+" Mangoes";else if(62===e){var u;c=100,null==(u=this.globalVar.resources.find(Oe=>"Mangoes"===Oe.name))?this.globalVar.resources.push(new te("Mangoes",c,G.Food)):u.amount+=c,i=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(65)+"Amber Orb"}else if(65===e)this.globalVar.resources.push(new te("Amber Orb",1,G.Equipment)),i=["Amber Orb","You receive a glowing orange orb. What it is for is a mystery, but you feel faster while you hold it.."],c=25,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(67)+c+" Renown";else if(67===e){var T;y=25,null==(T=this.globalVar.resources.find(Oe=>"Renown"===Oe.name))?this.globalVar.resources.push(new te("Renown",y)):T.amount+=y,i=[y+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(70)+"Topaz Orb"}else if(70===e)this.globalVar.resources.push(new te("Topaz Orb",1,G.Equipment)),i=["Topaz Orb","You receive a glowing yellow orb. What it is for is a mystery, but you feel faster while you hold it.."],c=500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(73)+c+" Stat Increasing Food Items";else if(73===e)this.increaseAllFood(c=500),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(75)+"Emerald Orb";else if(75===e)this.globalVar.resources.push(new te("Emerald Orb",1,G.Equipment)),i=["Emerald Orb","You receive a glowing green orb. What it is for is a mystery, but you feel faster while you hold it.."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(78)+"Ruby Orb";else if(78===e)this.globalVar.resources.push(new te("Ruby Orb",1,G.Equipment)),i=["Ruby Orb","You receive a glowing red orb. What it is for is a mystery, but you feel faster while you hold it.."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(79)+"The Pinnacle";else if(79===e){var s;if(this.globalVar.unlockables.set("thePinnacle",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(s=this.globalVar.shop.find(ve=>"Specialty"===ve.name))){var Ce=s.itemList.find(ve=>"Orb Infuser"===ve.name);null!=Ce&&(Ce.isAvailable=!0)}i=["The Pinnacle",this.utilityService.getSanitizedHtml("A new race type has been unlocked! The Pinnacle is an old and mysterious fortress. Researchers have struggled to map out its interior due to the ever changing terrain and constantly shifting weather. Your team has been contracted out to help map the area out. <br/> As you race through each floor, you notice that you can insert the Orbs you have received into braziers to activate them. This increases your Orb level, allowing you to further power them up. <br/> <br/><em>Select this race and others like it by choosing the 'Special Race' option from the 'Races' menu. </em>")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(80)+"More Coming Soon!"}return i}increaseAllFood(e){var i=this.globalVar.resources.find(c=>"Apples"===c.name);null==i?this.globalVar.resources.push(new te("Apples",e,G.Food)):i.amount+=e;var r=this.globalVar.resources.find(c=>"Bananas"===c.name);null==r?this.globalVar.resources.push(new te("Bananas",e,G.Food)):r.amount+=e;var a=this.globalVar.resources.find(c=>"Oranges"===c.name);null==a?this.globalVar.resources.push(new te("Oranges",e,G.Food)):a.amount+=e;var o=this.globalVar.resources.find(c=>"Strawberries"===c.name);null==o?this.globalVar.resources.push(new te("Strawberries",e,G.Food)):o.amount+=e;var s=this.globalVar.resources.find(c=>"Carrots"===c.name);null==s?this.globalVar.resources.push(new te("Carrots",e,G.Food)):s.amount+=e;var l=this.globalVar.resources.find(c=>"Turnips"===c.name);null==l?this.globalVar.resources.push(new te("Turnips",e,G.Food)):l.amount+=e}GenerateCircuitRacesForRank(e){this.globalVar.circuitRaces=[];var i=this.utilityService.getNumericValueOfCircuitRank(e),r=1,a=60,o=15,s=100,l=1.125,c=80*i,u=1.1,f=.9;this.utilityService.getNumericValueOfCircuitRank(e)>=53&&(s=110),this.utilityService.getNumericValueOfCircuitRank(e)>=53&&(s=125),this.utilityService.getNumericValueOfCircuitRank(e)>=79&&(s=150);var y=3;"Z"===e?y=1:"Y"==e&&(y=2);for(var C=0;C<y;C++){var T=[],M="C"+i+C;if(i<=2){c=-37;var S=new Ji;S.courseType=F.Flatland,2===i?0===C?S.terrain=new un(Qe.Sunny):1===C&&(S.terrain=new un(Qe.Rainy)):S.terrain=new un(Qe.Sunny),S.distance=Math.round(s*l**i+c),T.push(S)}else if(i<=14){c=3===i?5*i:35*i,(w=[]).push(F.Flatland),w.push(F.Mountain);var B=this.getCourseTypeInRandomOrderSeeded(w,M+"cl1"),j=this.utilityService.getRandomSeededNumber(20,80,M+"l1d"),Ce=(de=this.utilityService.getRandomSeededNumber(20,80,M+"l2d"))*(ue=a/(j+de));(se=j*ue)<o?(se=0,Ce=a):Ce<o&&(Ce=0,se=a),se>0&&((Se=new Ji).courseType=B[0],Se.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(f,u,M+"l1r")*(se/a),Se.terrain=this.getRandomTerrain(Se.courseType,M+"lt1d"),T.push(Se)),Ce>0&&((ve=new Ji).courseType=B[1],ve.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(f,u,M+"l2r")*(Ce/a),ve.terrain=this.getRandomTerrain(ve.courseType,M+"lt2d"),T.push(ve))}else{o=10,15===i?c=50*i:16===i&&(c=60*i);var w=[];i<=43?(w.push(F.Flatland),w.push(F.Mountain),w.push(F.Ocean)):i<=51?(w.push(F.Flatland),w.push(F.Mountain),w.push(F.Ocean),w.push(F.Tundra)):(w.push(F.Flatland),w.push(F.Mountain),w.push(F.Ocean),w.push(F.Tundra),w.push(F.Volcanic)),B=this.getCourseTypeInRandomOrderSeeded(w,M+"courses1"),j=this.utilityService.getRandomSeededNumber(20,80,M+"l1d");var ue,se,Se,ve,de=this.utilityService.getRandomSeededNumber(20,80,M+"l2d"),Oe=this.utilityService.getRandomSeededNumber(20,80,M+"l3d"),Ke=(Ce=de*(ue=a/(j+de+Oe)),Oe*ue);if((se=j*ue)<o?(Ce+=se/2,Ke+=se/2,se=0):Ce<o?(se+=Ce/2,Ke+=Ce/2,Ce=0):Ke<o&&(se+=Ke/2,Ce+=Ke/2,Ke=0),se>0&&((Se=new Ji).courseType=B[0],Se.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(f,u,M+"l1r")*(se/a),Se.terrain=this.getRandomTerrain(Se.courseType,M+"tl1d"),T.push(Se)),Ce>0&&((ve=new Ji).courseType=B[1],ve.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(f,u,M+"l2r")*(Ce/a),ve.terrain=this.getRandomTerrain(ve.courseType,M+"tl2d"),T.push(ve)),Ke>0){var Ht=new Ji;Ht.courseType=B[2],Ht.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(f,u,M+"l3r")*(Ke/a),Ht.terrain=this.getRandomTerrain(Ht.courseType,M+"tl3d"),T.push(Ht)}}var qe=0;T.forEach(ft=>{qe+=ft.distance}),T.forEach(ft=>{ft.pathData=this.GenerateRaceLegPaths(ft,qe)}),this.globalVar.circuitRaces.push(new Tn(T,e,!0,r,qe,a,this.GenerateCircuitRaceRewards(e),void 0,void 0,ge.circuit)),r+=1}}reorganizeLegsByDeckOrder(e,i){return i.isCourseOrderActive?e.sort((r,a)=>i.courseTypeOrder.indexOf(r.courseType)-i.courseTypeOrder.indexOf(a.courseType)):e}reorganizeAnimalsByDeckOrder(e,i){return i.isCourseOrderActive?e.sort((r,a)=>i.courseTypeOrder.indexOf(r.raceCourseType)-i.courseTypeOrder.indexOf(a.raceCourseType)):e}getCourseTypeInRandomOrder(e){for(var i=[],r=e.length,a=0;a<r;a++){var o=this.utilityService.getRandomInteger(1,e.length);i.push(e[o-1]),e=e.filter(s=>s!==e[o-1])}return i}getCourseTypeInRandomOrderSeeded(e,i="seeded"){for(var r=[],a=e.length,o=0;o<a;o++){var s=this.utilityService.getRandomSeededInteger(1,e.length,i);r.push(e[s-1]),e=e.filter(l=>l!==e[s-1])}return r}getRandomTerrain(e,i,r){var a=[];if(void 0!==r&&r.containsCondition(St[St.harshTerrain])){if(e===F.Flatland||e===F.Mountain)return new un(Qe.Snowfall);if(e===F.Volcanic)return new un(Qe.Ashfall);if(e===F.Tundra)return new un(Qe.Hailstorm);if(e===F.Ocean)return new un(Qe.Maelstrom)}e===F.Flatland||e===F.Mountain?(a.push(Qe.Sunny),a.push(Qe.Rainy),a.push(Qe.Stormy),a.push(Qe.Torrid),a.push(Qe.Snowfall)):e===F.Ocean?(a.push(Qe.Sunny),a.push(Qe.Maelstrom),a.push(Qe.Stormy),a.push(Qe.Snowfall)):e===F.Tundra?(a.push(Qe.Sunny),a.push(Qe.Hailstorm),a.push(Qe.Stormy),a.push(Qe.Snowfall)):e===F.Volcanic&&(a.push(Qe.Sunny),a.push(Qe.Ashfall),a.push(Qe.Stormy),a.push(Qe.Torrid));var o;return o=null!=i?this.utilityService.getRandomSeededInteger(1,a.length,i):this.utilityService.getRandomInteger(1,a.length),new un(a[o-1])}getRandomOrbListOrder(e,i="seeded"){for(var r=[],a=e.length,o=0;o<a;o++){var s=this.utilityService.getRandomSeededInteger(1,e.length,i);r.push(e[s-1]),e=e.filter(l=>l!==e[s-1])}return r}getAnimalStatLossFromExhaustionEventRace(e){if(null==this.globalVar.eventRaceData.animalData||0===this.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:i.exhaustionStatReduction}getRandomGrandPrixWeatherCluster(e,i){var r=[];r.push(sr.clearSkies),r.push(sr.coldSpell),r.push(sr.inclementWeather);var o=r[(null!=e?this.utilityService.getRandomSeededInteger(1,r.length,e):this.utilityService.getRandomInteger(1,r.length))-1];if(this.globalVar.eventRaceData.animalData.length>0){var s=.2,l=this.globalVar.modifiers.find(c=>"weatherMoraleBoostModifier"===c.text);void 0!==l&&(s=l.value),this.globalVar.eventRaceData.animalData.forEach(c=>{var u=this.globalVar.animals.find(f=>f.type===c.associatedAnimalType);void 0!==u&&(void 0!==i&&this.animalGainsMoraleBoostFromWeather(u.raceCourseType,i)&&this.changeGrandPrixMorale(u.type,-s),this.animalGainsMoraleBoostFromWeather(u.raceCourseType,o)&&this.changeGrandPrixMorale(u.type,s))})}return o}changeGrandPrixMorale(e,i){if(null!=this.globalVar.eventRaceData&&null!=this.globalVar.eventRaceData.animalData&&0!==this.globalVar.eventRaceData.animalData.length){var r=this.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e);null!=r&&(r.morale+=i,r.morale>=3&&(r.morale=3),r.morale<=.5&&(r.morale=.5))}}animalGainsMoraleBoostFromWeather(e,i){var r=!1;return(i===sr.clearSkies&&(e===F.Volcanic||e===F.Flatland)||i===sr.inclementWeather&&e===F.Ocean||i===sr.coldSpell&&(e===F.Tundra||e===F.Mountain))&&(r=!0),r}getRandomGrandPrixTerrainFromWeatherCluster(e,i,r){var a=[];e===sr.clearSkies?(a.push(Qe.Sunny),a.push(Qe.Torrid),a.push(Qe.Ashfall)):e===sr.coldSpell?(a.push(Qe.Snowfall),a.push(Qe.Hailstorm),a.push(Qe.Sunny)):e===sr.inclementWeather&&(a.push(Qe.Rainy),a.push(Qe.Stormy),a.push(Qe.Maelstrom),a.push(Qe.Hailstorm)),i===F.Flatland&&(a=a.filter(s=>s!==Qe.Ashfall&&s!==Qe.Hailstorm&&s!==Qe.Maelstrom)),i===F.Mountain&&(a=a.filter(s=>s!==Qe.Ashfall&&s!==Qe.Hailstorm&&s!==Qe.Maelstrom)),i===F.Ocean&&(a=a.filter(s=>s!==Qe.Ashfall&&s!==Qe.Hailstorm&&s!==Qe.Rainy&&s!==Qe.Torrid)),i===F.Tundra&&(a=a.filter(s=>s!==Qe.Ashfall&&s!==Qe.Rainy&&s!==Qe.Maelstrom&&s!==Qe.Torrid)),i===F.Volcanic&&(a=a.filter(s=>s!==Qe.Snowfall&&s!==Qe.Hailstorm&&s!==Qe.Maelstrom));var o;return o=null!=r?this.utilityService.getRandomSeededInteger(1,a.length,r):this.utilityService.getRandomInteger(1,a.length),new un(a[o-1])}stopGrandPrixRace(){null!=this.globalVar.eventRaceData&&(this.globalVar.eventRaceData.animalData.forEach(e=>{e.isCurrentlyRacing=!1,e.isSetToRelay=!1}),this.globalVar.eventRaceData.isLoading=!1,this.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalVar.eventRaceData.isRunning=!1,this.globalVar.eventRaceData.isCatchingUp=!1,this.globalVar.eventRaceData.overallTimeCounter-=this.globalVar.eventRaceData.segmentTimeCounter,this.globalVar.eventRaceData.segmentTimeCounter=0,void 0!==this.globalVar.eventRaceData.currentRaceSegment&&this.globalVar.eventRaceData.currentRaceSegment.reduceExportSize())}unlockTier2ShopItems(){var e=this.globalVar.shop.find(w=>"Specialty"===w.name);if(null!=e){var i=e.itemList.find(w=>"Incubator Upgrade Lv1"===w.name);null!=i&&(i.isAvailable=!0);var r=e.itemList.find(w=>"National Races"===w.name);null!=r&&(r.isAvailable=!0);var a=e.itemList.find(w=>"Scouts"===w.name);null!=a&&(a.isAvailable=!0);var o=e.itemList.find(w=>"Course Maps"===w.name);null!=o&&(o.isAvailable=!0);var s=e.itemList.find(w=>"Training Facility Improvements"===w.name);null!=s&&(s.isAvailable=!0);var l=e.itemList.find(w=>"Breeding Grounds Improvements"===w.name);null!=l&&(l.isAvailable=!0);var c=e.itemList.find(w=>"Attraction Improvements"===w.name);null!=c&&(c.isAvailable=!0)}var u=this.globalVar.shop.find(w=>"Equipment"===w.name);if(null!=u){var f=u.itemList.find(w=>"Red Baton"===w.name);null!=f&&(f.isAvailable=!0);var v=u.itemList.find(w=>"Orange Baton"===w.name);null!=v&&(v.isAvailable=!0);var b=u.itemList.find(w=>"Green Baton"===w.name);null!=b&&(b.isAvailable=!0);var y=u.itemList.find(w=>"Yellow Baton"===w.name);null!=y&&(y.isAvailable=!0);var C=u.itemList.find(w=>"Blue Baton"===w.name);null!=C&&(C.isAvailable=!0);var T=u.itemList.find(w=>"Violet Baton"===w.name);null!=T&&(T.isAvailable=!0)}var M=this.globalVar.shop.find(w=>"Food"===w.name);if(null!=M){var S=M.itemList.find(w=>"Gingko Leaves"===w.name);null!=S&&(S.isAvailable=!0)}}lockTier2ShopItems(){var e=this.globalVar.shop.find(y=>"Specialty"===y.name);if(null!=e){var i=e.itemList.find(y=>"Incubator Upgrade Lv1"===y.name);null!=i&&(i.isAvailable=!1);var r=e.itemList.find(y=>"National Races"===y.name);null!=r&&(r.isAvailable=!1);var a=e.itemList.find(y=>"Scouts"===y.name);null!=a&&(a.isAvailable=!1);var o=e.itemList.find(y=>"Course Maps"===y.name);null!=o&&(o.isAvailable=!1)}var s=this.globalVar.shop.find(y=>"Equipment"===y.name);if(null!=s){var l=s.itemList.find(y=>"Red Baton"===y.name);null!=l&&(l.isAvailable=!1);var c=s.itemList.find(y=>"Orange Baton"===y.name);null!=c&&(c.isAvailable=!1);var u=s.itemList.find(y=>"Green Baton"===y.name);null!=u&&(u.isAvailable=!1);var f=s.itemList.find(y=>"Yellow Baton"===y.name);null!=f&&(f.isAvailable=!1);var v=s.itemList.find(y=>"Blue Baton"===y.name);null!=v&&(v.isAvailable=!1);var b=s.itemList.find(y=>"Violet Baton"===y.name);null!=b&&(b.isAvailable=!1)}}GetCircuitRankValue(e){for(var i=1;e.length>1;){var r=e.length;i+=26,(e=e.substring(1)).length>=r&&(e="")}return i+(91-e.charCodeAt(0))}GenerateCircuitRaceRewards(e){var i=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(f=>"Renown"===f.name);return l.push(new te("Coins",Math.round(50*1.0135**i))),l.push(new te("Renown",parseFloat((1.03*1.03**i/100).toFixed(3)))),l}GenerateLocalRaceRewards(e){var i=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(f=>"Renown"===f.name);return l.push(new te("Coins",Math.round(10*1.013**i))),l.push(new te("Renown",parseFloat((1.01*1.015**i/100).toFixed(3)))),l}GenerateMonoRaceRewards(e){var i=[];i.push(new te("Facility Level",1,G.Progression));var r=this.GetCircuitRankValue(e);return i.push(new te("Coins",Math.round(60*1.0135**r))),i.push(new te("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateDuoRaceRewards(e){var i=[];i.push(new te("Research Level",1,G.Progression));var r=this.GetCircuitRankValue(e);return i.push(new te("Coins",Math.round(125*1.0135**r))),i.push(new te("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateRainbowRaceRewards(e){var i=[];i.push(new te("Talent Points",1,G.Progression));var r=this.GetCircuitRankValue(e);return i.push(new te("Coins",Math.round(250*1.012**r))),i.push(new te("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateLocalRaces(){this.GenerateMonoRaces(this.globalVar.monoRank),this.GenerateDuoRaces(this.globalVar.duoRank),this.GenerateRainbowRaces(this.globalVar.rainbowRank),this.GeneratePinnacleRaces(this.globalVar.pinnacleFloor)}GenerateMonoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(T=>T.localRaceType!==Ut.Mono),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,l=100*i,f=[],v=new Ji;if(1===i)v.courseType=F.Flatland;else{var b=[];i<14?(b.push(F.Flatland),b.push(F.Mountain)):i<40?(b.push(F.Flatland),b.push(F.Mountain),b.push(F.Ocean)):i<50?(b.push(F.Flatland),b.push(F.Mountain),b.push(F.Ocean),b.push(F.Tundra)):(b.push(F.Flatland),b.push(F.Mountain),b.push(F.Ocean),b.push(F.Tundra),b.push(F.Volcanic)),null!=this.globalVar.lastMonoRaceCourseType&&i>2&&(b=b.filter(T=>T!==this.globalVar.lastMonoRaceCourseType));var y=this.getCourseTypeInRandomOrderSeeded(b,"monoseed"+e+i);v.courseType=y[0]}v.terrain=this.getRandomTerrain(v.courseType,"monoseed"+e+i),v.distance=Math.round((155*1.145**i+l)*this.utilityService.getRandomSeededNumber(.9,1.1)),f.push(v);var C=v.distance;f.forEach(T=>{T.pathData=this.GenerateRaceLegPaths(T,C)}),this.globalVar.localRaces.push(new Tn(f,e,!1,r,C,90,this.GenerateMonoRaceRewards(e),Ut.Mono,void 0,ge.special)),r+=1}}GenerateDuoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(M=>M.localRaceType!==Ut.Duo),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,u=[],f=[];i<=10?(f.push(F.Flatland),f.push(F.Mountain),f.push(F.Ocean)):i<=20?(f.push(F.Flatland),f.push(F.Mountain),f.push(F.Ocean),f.push(F.Tundra)):(f.push(F.Flatland),f.push(F.Mountain),f.push(F.Ocean),f.push(F.Tundra),f.push(F.Volcanic));var v=this.getCourseTypeInRandomOrderSeeded(f,"duooseed"+e+i),b=this.utilityService.getRandomSeededNumber(.8,1.2),y=new Ji;y.courseType=v[0],y.distance=Math.round(6500*1.14**i*b*.5),y.terrain=this.getRandomTerrain(y.courseType,"duoseedl1"+e+i),u.push(y);var C=new Ji;C.courseType=v[1],C.distance=Math.round(6500*1.14**i*b*.5),C.terrain=this.getRandomTerrain(C.courseType,"duoseedl2"+e+i),u.push(C);var T=y.distance+C.distance;u.forEach(M=>{M.pathData=this.GenerateRaceLegPaths(M,T)}),this.globalVar.localRaces.push(new Tn(u,e,!1,r,T,80,this.GenerateDuoRaceRewards(e),Ut.Duo,void 0,ge.special)),r+=1}}GenerateRainbowRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(B=>B.localRaceType!==Ut.Rainbow),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,o=125e3,s=1.17,u=[],f=[];f.push(F.Flatland),f.push(F.Mountain),f.push(F.Ocean),f.push(F.Tundra),f.push(F.Volcanic);var v=this.getCourseTypeInRandomOrderSeeded(f,"rainbow"+e+i),b=this.utilityService.getRandomSeededNumber(.8,1.2),y=new Ji;y.courseType=v[0],y.distance=Math.round(o*s**i*b*.2),y.terrain=this.getRandomTerrain(y.courseType,"rainbowl1"+e+i),u.push(y);var C=new Ji;C.courseType=v[1],C.distance=Math.round(o*s**i*b*.2),C.terrain=this.getRandomTerrain(C.courseType,"rainbowl2"+e+i),u.push(C);var T=new Ji;T.courseType=v[2],T.distance=Math.round(o*s**i*b*.2),T.terrain=this.getRandomTerrain(T.courseType,"rainbowl3"+e+i),u.push(T);var M=new Ji;M.courseType=v[3],M.distance=Math.round(o*s**i*b*.2),M.terrain=this.getRandomTerrain(M.courseType,"rainbowl4"+e+i),u.push(M);var S=new Ji;S.courseType=v[4],S.distance=Math.round(o*s**i*b*.2),S.terrain=this.getRandomTerrain(S.courseType,"rainbowl5"+e+i),u.push(S);var w=y.distance+C.distance+T.distance+M.distance+S.distance;u.forEach(B=>{B.pathData=this.GenerateRaceLegPaths(B,w)}),this.globalVar.localRaces.push(new Tn(u,e,!1,r,w,120,this.GenerateRainbowRaceRewards(e),Ut.Rainbow,void 0,ge.special)),r+=1}}GeneratePinnacleRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(se=>se.localRaceType!==Ut.Pinnacle),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,l=1,c=this.getRandomPinnacleCondition(i,"pinnaclel1"+e+i);c.containsCondition(Je[Je.threeHundredSecondRace])&&(l=1.75),c.containsCondition(St[St.thirtySecondRace])&&(l=.25);var v=[],b=this.utilityService.getRandomSeededNumber(.8,1.2),y=this.globalVar.animalDecks.find(se=>se.isPrimaryDeck);if(void 0!==y){var C=y.selectedAnimals.slice(0,4);c.containsCondition(Je[Je.twoRacersOnly])&&(C=y.selectedAnimals.slice(0,2)),c.containsCondition(Je[Je.threeRacersOnly])&&(C=y.selectedAnimals.slice(0,3));for(var T=Math.round(275e4*1.17**i*b*l),M=0;M<C.length;M++){var S=1/C.length,w=new Ji;w.courseType=C[M].raceCourseType,w.distance=S*T,w.terrain=this.getRandomTerrain(w.courseType,"pinnaclel"+e+i+M,c),v.push(w)}v.forEach(se=>{se.pathData=this.GenerateRaceLegPaths(se,T)});var B=[];B.push(Be.amber),B.push(Be.amethyst),B.push(Be.ruby),B.push(Be.emerald),B.push(Be.sapphire),B.push(Be.topaz);var j=this.getRandomOrbListOrder(B,"pinnaclel1"+e+i),de=0,ne=[];j.forEach(se=>{de+=1;var Ce=new WR(this.getBrazierFromOrbType(se),T*(de/(j.length+1)));ne.push(Ce)});var ue=new Tn(v,e,!1,r,T,180,[],Ut.Pinnacle,void 0,ge.special,void 0,ne);ue.pinnacleConditions=c,c.containsCondition(Je[Je.threeHundredSecondRace])&&(ue.timeToComplete=300),c.containsCondition(St[St.thirtySecondRace])&&(ue.timeToComplete=30),this.globalVar.localRaces.push(ue),r+=1}}}addToPinnacleHistory(e){e.easyConditions.length>0&&e.easyConditions.forEach(i=>{this.globalVar.pinnacleHistory.easyConditions.push(i),this.globalVar.pinnacleHistory.easyConditions.length>3&&(this.globalVar.pinnacleHistory.easyConditions=this.globalVar.pinnacleHistory.easyConditions.filter(r=>r!==this.globalVar.pinnacleHistory.easyConditions[0]))}),e.mediumConditions.length>0&&e.mediumConditions.forEach(i=>{this.globalVar.pinnacleHistory.mediumConditions.push(i),this.globalVar.pinnacleHistory.mediumConditions.length>3&&(this.globalVar.pinnacleHistory.mediumConditions=this.globalVar.pinnacleHistory.mediumConditions.filter(r=>r!==this.globalVar.pinnacleHistory.mediumConditions[0]))}),e.hardConditions.length>0&&e.hardConditions.forEach(i=>{this.globalVar.pinnacleHistory.hardConditions.push(i),this.globalVar.pinnacleHistory.hardConditions.length>3&&(this.globalVar.pinnacleHistory.hardConditions=this.globalVar.pinnacleHistory.hardConditions.filter(r=>r!==this.globalVar.pinnacleHistory.hardConditions[0]))})}getRandomPinnacleCondition(e,i="seeded"){var r=new bs;if(void 0!==this.globalVar.currentPinnacleConditions)return this.globalVar.currentPinnacleConditions;if(e<=10)return 1===e&&r.easyConditions.push(Je.threeRacersOnly),2===e&&r.easyConditions.push(Je.threeHundredSecondRace),3===e&&r.mediumConditions.push(St.brokenFloorboards),4===e&&r.mediumConditions.push(St.longCooldowns),5===e&&r.hardConditions.push(Qi.noBurst),6===e&&r.easyConditions.push(Je.noRelayEffects),7===e&&r.easyConditions.push(Je.twoRacersOnly),8===e&&r.mediumConditions.push(St.thirtySecondRace),9===e&&r.mediumConditions.push(St.sticky),10===e&&r.hardConditions.push(Qi.exhaustionPenaltyIncreased),this.globalVar.currentPinnacleConditions=r,this.addToPinnacleHistory(r),r;var a=e%5;if(1===a||2===a){var o=this.getAllEasyPinnacleConditions(),s=this.utilityService.getRandomSeededInteger(1,o.length-1,i);r.easyConditions.push(o[s])}else if(3===a||4===a){var l=this.getAllMediumPinnacleConditions();s=this.utilityService.getRandomSeededInteger(1,l.length-1,i),r.mediumConditions.push(l[s])}else if(0===a){var c=this.getAllHardPinnacleConditions();s=this.utilityService.getRandomSeededInteger(1,c.length-1,i),r.hardConditions.push(c[s])}return e>=15&&(1===a||2===a)&&(o=this.getAllEasyPinnacleConditions(r),s=this.utilityService.getRandomSeededInteger(1,o.length-1,i),r.easyConditions.push(o[s])),e>=20&&(3===a||4===a)&&(o=this.getAllEasyPinnacleConditions(r),s=this.utilityService.getRandomSeededInteger(1,o.length-1,i),r.easyConditions.push(o[s])),e>=24&&0===a&&(o=this.getAllEasyPinnacleConditions(r),s=this.utilityService.getRandomSeededInteger(1,o.length-1,i),r.easyConditions.push(o[s])),e>=53&&0===a&&(l=this.getAllMediumPinnacleConditions(r),s=this.utilityService.getRandomSeededInteger(1,l.length-1,i),r.mediumConditions.push(l[s])),this.globalVar.currentPinnacleConditions=r,this.addToPinnacleHistory(r),r}getAllEasyPinnacleConditions(e){var i=[];return i.push(Je.noRelayEffects),i.push(Je.steamy),i.push(Je.threeHundredSecondRace),i.push(Je.threeRacersOnly),i.push(Je.twoRacersOnly),i.push(Je.burstIncreaseStaminaLoss),i.push(Je.cold),i.push(Je.hot),i.push(Je.slick),i.push(Je.strongWinds),this.globalVar.pinnacleHistory.easyConditions.forEach(r=>{i=i.filter(a=>a!==r)}),void 0!==e&&(e.easyConditions.forEach(r=>{i=i.filter(a=>a!==r)}),e.easyConditions.some(r=>r===Je.twoRacersOnly)&&(i=i.filter(r=>r!==Je.threeRacersOnly)),e.easyConditions.some(r=>r===Je.threeRacersOnly)&&(i=i.filter(r=>r!==Je.twoRacersOnly)),e.mediumConditions.some(r=>r===St.fourRacersOnly)&&(i=i.filter(r=>r!==Je.threeRacersOnly&&r!==Je.twoRacersOnly)),e.mediumConditions.some(r=>r===St.thirtySecondRace)&&(i=i.filter(r=>r!==Je.threeHundredSecondRace)),e.hardConditions.some(r=>r===Qi.noBurst)&&(i=i.filter(r=>r!==Je.burstIncreaseStaminaLoss))),i}getAllMediumPinnacleConditions(e){var i=[];return i.push(St.brokenFloorboards),i.push(St.fourRacersOnly),i.push(St.longCooldowns),i.push(St.sticky),i.push(St.thirtySecondRace),i.push(St.harshTerrain),i.push(St.highSpeedLowAcceleration),i.push(St.unfocused),this.globalVar.pinnacleHistory.mediumConditions.forEach(r=>{i=i.filter(a=>a!==r)}),void 0!==e&&(e.mediumConditions.forEach(r=>{i=i.filter(a=>a!==r)}),e.easyConditions.some(r=>r===Je.twoRacersOnly||r===Je.threeRacersOnly)&&(i=i.filter(r=>r!==St.fourRacersOnly)),e.easyConditions.some(r=>r===Je.threeHundredSecondRace)&&(i=i.filter(r=>r!==St.thirtySecondRace))),i}getAllHardPinnacleConditions(e){var i=[];return i.push(Qi.exhaustionPenaltyIncreased),i.push(Qi.lowStaminaRelay),i.push(Qi.noBurst),i.push(Qi.reduceSpeedOnRelay),i.push(Qi.reduceAbilityEfficiency),this.globalVar.pinnacleHistory.hardConditions.forEach(r=>{i=i.filter(a=>a!==r)}),void 0!==e&&e.hardConditions.forEach(r=>{i=i.filter(a=>a!==r)}),i}getPinnacleFloorConditionDescription(e){var i="";return e.easyConditions.length>0&&e.easyConditions.forEach(r=>{r===Je.noRelayEffects&&(i+="<strong>Dark</strong> - No relay effects <br/>"),r===Je.steamy&&(i+="<strong>Steamy</strong> - Stamina Loss increased by 100%<br/>"),r===Je.threeHundredSecondRace&&(i+="<strong>Maze</strong> - Race timer increased to 300 seconds<br/>"),r===Je.threeRacersOnly&&(i+="<strong>Trios</strong> - 3 racers only<br/>"),r===Je.twoRacersOnly&&(i+="<strong>Duos</strong> - 2 racers only<br/>"),r===Je.slick&&(i+="<strong>Slick</strong> - Flatland, Mountain, and Volcanic Adaptability Distance reduced by 50%<br/>"),r===Je.strongWinds&&(i+="<strong>Strong Winds</strong> - Ocean and Tundra Acceleration Rate reduced by 50%<br/>"),r===Je.cold&&(i+="<strong>Cold</strong> - Volcanic lava falls 25% slower, Tundra max drift is 30%<br/>"),r===Je.hot&&(i+="<strong>Hot</strong> - Volcanic lava falls 25% faster, Tundra max drift is 10%<br/>"),r===Je.burstIncreaseStaminaLoss&&(i+="<strong>Humid</strong> - Lose three times as much stamina while bursting<br/>")}),e.mediumConditions.length>0&&e.mediumConditions.forEach(r=>{r===St.fourRacersOnly&&(i+="<strong>Quartet</strong> - 4 racers only"),r===St.brokenFloorboards&&(i+="<strong>Broken Floorboards</strong> - Every path has an adaptability check"),r===St.longCooldowns&&(i+="<strong>Unusual Aroma</strong> - Ability cooldowns are twice as long"),r===St.sticky&&(i+="<strong>Sticky</strong> - Acceleration reduces as you go further in the race"),r===St.thirtySecondRace&&(i+="<strong>Lockdown</strong> - Race timer reduced to 30 seconds"),r===St.harshTerrain&&(i+="<strong>Harsh Terrain</strong> - Terrain is always Maelstrom, Snowfall, Hailstorm, or Ashfall"),r===St.highSpeedLowAcceleration&&(i+="<strong>Straight Shot</strong> - Acceleration Rate reduced to 10%, Max Speed increased to 500%"),r===St.unfocused&&(i+="<strong>Distracting</strong> - After losing focus, reduce Focus Distance by 25% for the rest of the race")}),e.hardConditions.length>0&&e.hardConditions.forEach(r=>{r===Qi.exhaustionPenaltyIncreased&&(i+="<strong>Low Energy</strong> - Stamina starts at 50%, stat loss from running out of stamina doubled"),r===Qi.lowStaminaRelay&&(i+="<strong>Trudging</strong> - When your racer reaches 50% stamina, immediately relay or end the race if there are no animals remaining"),r===Qi.noBurst&&(i+="<strong>Shifting Corridors</strong> - No bursts"),r===Qi.reduceSpeedOnRelay&&(i+="<strong>Quicksand</strong> - On Relay, reduce your next racer's max speed by 20%. Every subsequent Relay reduces by an additional 20%."),r===Qi.reduceAbilityEfficiency&&(i+="<strong>Tight Quarters</strong> - Ability efficiency reduced by 99%")}),i}getBrazierFromOrbType(e){return e===Be.amber?jt.amberBrazier:e===Be.amethyst?jt.amethystBrazier:e===Be.ruby?jt.rubyBrazier:e===Be.topaz?jt.topazBrazier:e===Be.emerald?jt.emeraldBrazier:e===Be.sapphire?jt.sapphireBrazier:void 0}getOrbTypeFromBrazier(e){return e===jt.amberBrazier?Be.amber:e===jt.amethystBrazier?Be.amethyst:e===jt.rubyBrazier?Be.ruby:e===jt.topazBrazier?Be.topaz:e===jt.emeraldBrazier?Be.emerald:e===jt.sapphireBrazier?Be.sapphire:void 0}getOrbTypeFromResource(e){var i=Be.none;return"Amber Orb"===e.name&&(i=Be.amber),"Amethyst Orb"===e.name&&(i=Be.amethyst),"Emerald Orb"===e.name&&(i=Be.emerald),"Ruby Orb"===e.name&&(i=Be.ruby),"Sapphire Orb"===e.name&&(i=Be.sapphire),"Topaz Orb"===e.name&&(i=Be.topaz),i}getOrbDetailsFromType(e){return this.globalVar.orbStats.allOrbs.find(r=>r.type===e)}getOrbDescription(e){var i="";return e===Be.amber&&(i="Increase the Acceleration Rate of the user by "+(100*(this.globalVar.orbStats.getAccelerationIncrease(1)-1)).toFixed(2)+"%. Gain orb experience for every meter covered while below your max speed."),e===Be.amethyst&&(i="Increase the Power Efficiency of the user by "+(100*(this.globalVar.orbStats.getPowerIncrease(1)-1)).toFixed(2)+"%. Gain orb experience for every ability use."),e===Be.emerald&&(i="Increase the Adaptability Distance of the user by "+(100*(this.globalVar.orbStats.getAdaptabilityIncrease(1)-1)).toFixed(2)+"%. Gain orb experience for every meter covered during a special path without stumbling."),e===Be.ruby&&(i="Increase the Max Speed of the user by "+(100*(this.globalVar.orbStats.getMaxSpeedIncrease(1)-1)).toFixed(2)+"%.  Gain orb experience for every meter covered while at or above your max speed."),e===Be.sapphire&&(i="Increase the Focus Distance of the user by "+(100*(this.globalVar.orbStats.getFocusIncrease(1)-1)).toFixed(2)+"%.  Gain orb experience for every meter covered prior to losing focus."),e===Be.topaz&&(i="Increase the Stamina of the user by "+(100*(this.globalVar.orbStats.getEnduranceIncrease(1)-1)).toFixed(2)+"%.  Gain orb experience for every meter covered prior to running out of stamina."),i}getOrbNameFromType(e){return e===Be.amber?"Amber Orb":e===Be.amethyst?"Amethyst Orb":e===Be.ruby?"Ruby Orb":e===Be.topaz?"Topaz Orb":e===Be.emerald?"Emerald Orb":e===Be.sapphire?"Sapphire Orb":""}increaseOrbLevel(e){e.level+=1,e.xp-=e.xpNeededForLevel,e.xpNeededForLevel=1e4*1.09**e.level+1500*(e.level-1)}increaseAmberOrbXp(e,i){var a=5e-5*e,o=this.getOrbDetailsFromType(Be.amber);void 0!==o&&(o.level<o.maxLevel?(o.xp+=a+a*i.miscStats.bonusOrbXp,o.xp>=o.xpNeededForLevel&&o.level<o.maxLevel&&this.increaseOrbLevel(o)):o.level===o.maxLevel&&(o.xp=0))}increaseAmethystOrbXp(e){var a=this.getOrbDetailsFromType(Be.amethyst);void 0!==a&&(a.level<a.maxLevel?(a.xp+=2+2*e.miscStats.bonusOrbXp,a.xp>=a.xpNeededForLevel&&a.level<a.maxLevel&&this.increaseOrbLevel(a)):a.level===a.maxLevel&&(a.xp=0))}increaseEmeraldOrbXp(e,i){var a=8e-5*e,o=this.getOrbDetailsFromType(Be.emerald);void 0!==o&&(o.level<o.maxLevel?(o.xp+=a+a*i.miscStats.bonusOrbXp,o.xp>=o.xpNeededForLevel&&o.level<o.maxLevel&&this.increaseOrbLevel(o)):o.level===o.maxLevel&&(o.xp=0))}increaseRubyOrbXp(e,i){var a=3e-4*e,o=this.getOrbDetailsFromType(Be.ruby);void 0!==o&&(o.level<o.maxLevel?(o.xp+=a+a*i.miscStats.bonusOrbXp,o.xp>=o.xpNeededForLevel&&o.level<o.maxLevel&&this.increaseOrbLevel(o)):o.level===o.maxLevel&&(o.xp=0))}increaseSapphireOrbXp(e,i){var a=25e-6*e,o=this.getOrbDetailsFromType(Be.sapphire);void 0!==o&&(o.level<o.maxLevel?(o.xp+=a+a*i.miscStats.bonusOrbXp,o.xp>=o.xpNeededForLevel&&o.level<o.maxLevel&&this.increaseOrbLevel(o)):o.level===o.maxLevel&&(o.xp=0))}increaseTopazOrbXp(e,i){var a=25e-6*e,o=this.getOrbDetailsFromType(Be.topaz);void 0!==o&&(o.level<o.maxLevel?(o.xp+=a+a*i.miscStats.bonusOrbXp,o.xp>=o.xpNeededForLevel&&o.level<o.maxLevel&&this.increaseOrbLevel(o)):o.level===o.maxLevel&&(o.xp=0))}getAverageStumbleFrequencyForCourseType(e){var i=0;return e===F.Flatland&&(i=(new Sn(Ge.Bumps).frequencyOfStumble+new Sn(Ge.S).frequencyOfStumble)/2),e===F.Mountain&&(i=(new Sn(Ge.Gaps).frequencyOfStumble+new Sn(Ge.Crevasse).frequencyOfStumble)/2),e===F.Ocean&&(i=(new Sn(Ge.Dive).frequencyOfStumble+new Sn(Ge.Waves).frequencyOfStumble)/2),e===F.Tundra&&(i=(new Sn(Ge.Cavern).frequencyOfStumble+new Sn(Ge.Hills).frequencyOfStumble)/2),e===F.Volcanic&&(i=(new Sn(Ge.FirstRegular).frequencyOfStumble+new Sn(Ge.SteppingStones).frequencyOfStumble)/2),i}getAverageStumbleOpportunitiesForCourseType(e){var i=0;return e===F.Flatland&&(i=(new Sn(Ge.Bumps).stumbleOpportunities+new Sn(Ge.S).stumbleOpportunities)/2),e===F.Mountain&&(i=(new Sn(Ge.Gaps).stumbleOpportunities+new Sn(Ge.Crevasse).stumbleOpportunities)/2),e===F.Ocean&&(i=(new Sn(Ge.Dive).stumbleOpportunities+new Sn(Ge.Waves).stumbleOpportunities)/2),e===F.Tundra&&(i=(new Sn(Ge.Cavern).stumbleOpportunities+new Sn(Ge.Hills).stumbleOpportunities)/2),e===F.Volcanic&&(i=(new Sn(Ge.FirstRegular).stumbleOpportunities+new Sn(Ge.SteppingStones).stumbleOpportunities)/2),i}generateFreeRace(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=60,r=15,a=90,o=1.125,s=12*e;e>=15&&(s=50*e);var l=1.05,c=.8,v=[];if(e<=2){var b=new Ji;b.courseType=F.Flatland,b.terrain=this.getRandomTerrain(b.courseType),b.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l)),v.push(b)}else if(e<=15){(y=[]).push(F.Flatland),y.push(F.Mountain);var C=this.getCourseTypeInRandomOrder(y),T=this.utilityService.getRandomNumber(10,90),j=(M=this.utilityService.getRandomNumber(10,90))*(w=i/(T+M));(B=T*w)<r?(B=0,j=i):j<r&&(j=0,B=i),B>0&&((de=new Ji).courseType=C[0],de.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(B/i),de.terrain=this.getRandomTerrain(de.courseType),v.push(de)),j>0&&((ne=new Ji).courseType=C[1],ne.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(j/i),ne.terrain=this.getRandomTerrain(ne.courseType),v.push(ne))}else{r=10;var y=[];e<45?(y.push(F.Flatland),y.push(F.Mountain),y.push(F.Ocean)):e<53?(y.push(F.Flatland),y.push(F.Mountain),y.push(F.Ocean),y.push(F.Tundra)):(y.push(F.Flatland),y.push(F.Mountain),y.push(F.Ocean),y.push(F.Tundra),y.push(F.Volcanic)),C=this.getCourseTypeInRandomOrder(y),T=this.utilityService.getRandomNumber(10,90);var w,B,de,ne,M=this.utilityService.getRandomNumber(10,90),ue=this.utilityService.getRandomNumber(10,90),se=(j=M*(w=i/(T+M+ue)),ue*w);if((B=T*w)<r?(j+=B/2,se+=B/2,B=0):j<r?(B+=j/2,se+=j/2,j=0):se<r&&(B+=se/2,j+=se/2,se=0),B>0&&((de=new Ji).courseType=C[0],de.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(B/i),de.terrain=this.getRandomTerrain(de.courseType),v.push(de)),j>0&&((ne=new Ji).courseType=C[1],ne.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(j/i),ne.terrain=this.getRandomTerrain(ne.courseType),v.push(ne)),se>0){var Ce=new Ji;Ce.courseType=C[2],Ce.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(se/i),Ce.terrain=this.getRandomTerrain(Ce.courseType),v.push(Ce)}}var Se=0,ve=this.globalVar.animalDecks.find(Oe=>Oe.isPrimaryDeck);return void 0!==ve&&(v=this.reorganizeLegsByDeckOrder(v,ve)),v.forEach(Oe=>{Se+=Oe.distance}),v.forEach(Oe=>{Oe.pathData=this.GenerateRaceLegPaths(Oe,Se)}),new Tn(v,this.globalVar.circuitRank,!1,1,Se,i,this.GenerateLocalRaceRewards(this.globalVar.circuitRank),Ut.Free,void 0,ge.circuit,void 0)}getTotalSegments(e){return(null==this.globalVar.circuitRaces||0===this.globalVar.circuitRaces.length)&&this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),Math.ceil(this.globalVar.eventRaceData.grandPrixTimeLength/this.globalVar.eventRaceData.segmentTime),e/this.utilityService.getClosestWholeNumber(this.globalVar.circuitRaces[0].length*(this.globalVar.eventRaceData.segmentTime/this.globalVar.circuitRaces[0].timeToComplete),e)}initialGrandPrixSetup(e,i){this.globalVar.eventRaceData=new er,this.globalVar.eventRaceData.rank=e,this.utilityService.getNumericValueOfCircuitRank(e),this.globalVar.eventRaceData.rankDistanceMultiplier=i,this.globalVar.eventRaceData.totalDistance=5e8*this.globalVar.eventRaceData.rankDistanceMultiplier,this.globalVar.eventRaceData.currentRaceSegmentCount=0,this.globalVar.eventRaceData.segmentTimeCounter=0,this.globalVar.eventRaceData.totalSegments=this.getTotalSegments(this.globalVar.eventRaceData.totalDistance),this.globalVar.eventRaceData.remainingRewards=this.globalVar.eventRaceData.totalRewards=this.getGrandPrixRewardCount(),this.globalVar.eventRaceData.animalData=[],this.globalVar.animals.forEach(s=>{this.globalVar.eventRaceData.animalData.push(new qR(s.type))});var a=this.getCurrentEventStartEndDateTime(!1);a instanceof Date&&(this.globalVar.eventRaceData.currentEventStartDate=a);var o=this.getCurrentEventStartEndDateTime(!0);o instanceof Date&&(this.globalVar.eventRaceData.currentEventEndDate=o),this.globalVar.eventRaceData.weatherCluster=this.getRandomGrandPrixWeatherCluster()}animalCanRaceGrandPrix(e){var i=!0,r=this.getBreedLevelRequiredForGrandPrix();e.breedLevel<r&&(i=!1);var a=this.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);return null!=a&&a.exhaustionStatReduction<.5&&(i=!1),i}getGrandPrixRacingAnimal(){var e=new At,i=this.globalVar.animalDecks.find(u=>u.isEventDeck);if(void 0!==i){var r=[];if(i.isCourseOrderActive){for(var a=0;a<i.selectedAnimals.length;a++)if(i.courseTypeOrder.length>a){var o=i.courseTypeOrder[a],s=i.selectedAnimals.find(u=>u.raceCourseType===o);if(void 0!==s){var l=this.globalVar.animals.find(u=>u.type===s.type);if(void 0!==l){var c=l.makeCopy(l);r.push(c)}}}}else i.selectedAnimals.forEach(u=>{var f=this.globalVar.animals.find(b=>b.type===u.type);if(void 0!==f){var v=f.makeCopy(f);r.push(v)}});(r=(r=r.filter(u=>this.animalCanRaceGrandPrix(u))).filter(u=>!this.shouldShowSlowSegmentWarning(u))).length>0&&(e=r[0])}return this.globalVar.eventRaceData.animalData.forEach(u=>{if(u.isCurrentlyRacing){var f=this.globalVar.animals.find(v=>v.type===u.associatedAnimalType);void 0!==f&&(e=f.makeCopy(f))}}),e}getCurrentlyActiveGrandPrixRacingAnimal(){var e=new At;return this.globalVar.eventRaceData.isRunning&&this.globalVar.eventRaceData.animalData.forEach(i=>{if(i.isCurrentlyRacing){var r=this.globalVar.animals.find(a=>a.type===i.associatedAnimalType);void 0!==r&&(e=r.makeCopy(r))}}),e}getExhaustionOfAnimal(e){var i;return null===(i=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===i?void 0:i.exhaustionStatReduction}getMoraleOfAnimal(e){var i;return null===(i=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===i?void 0:i.morale}generateGrandPrixSegment(e,i){var r=this.globalVar.eventRaceData,a=this.getRemainingEventRaceTime();void 0!==i&&(0===a||null==a)&&(a=i);var o=r.totalDistance/r.totalSegments,s=[],l=new Ji;return l.courseType=e.raceCourseType,l.terrain=this.getRandomGrandPrixTerrainFromWeatherCluster(this.globalVar.eventRaceData.weatherCluster,l.courseType,this.getEventStartDateTime().toString()+this.getEventTimePer5Min().toString()),l.distance=o,s.push(l),s.forEach(c=>{c.pathData=this.GenerateRaceLegPaths(c,o)}),new Tn(s,this.globalVar.circuitRank,!1,1,o,a,void 0,void 0,void 0,ge.event,Xe.grandPrix)}getGrandPrixRewardCount(){var e=this.globalVar.eventRaceData.rankDistanceMultiplier,i=5,r=this.globalVar.modifiers.find(f=>"metersPerCoinsGrandPrixModifier"===f.text);void 0!==r&&(i=r.value);var a=5,o=this.globalVar.modifiers.find(f=>"metersPerRenownGrandPrixModifier"===f.text);void 0!==o&&(a=o.value);var u=8;return e>1&&(u=0),this.globalVar.eventRaceData.totalDistance/(i*e)+this.globalVar.eventRaceData.totalDistance/(a*e)+4+u}getEventStartDateTime(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?l:o}getCurrentEventStartEndDateTime(e){var i=new Date,r=i.getDay(),a=i.getHours(),o=this.globalVar.eventRaceData,s=new Date,l=new Date,c=new Date,u=new Date;return(s=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+o.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-r+o.weekStartDay))).setHours(s.getHours()-a+o.weekStartHour),s.setMinutes(0,0,0),(l=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+o.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-r+o.weekEndDay))).setHours(l.getHours()-a+o.weekEndHour),l.setMinutes(0,0,0),(c=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+o.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-r+o.weekendStartDay))).setHours(c.getHours()-a+o.weekendStartHour),c.setMinutes(0,0,0),(u=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-r+o.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-r+o.weekendEndDay))).setHours(u.getHours()-a+o.weekendEndHour),u.setMinutes(0,0,0),i>=s&&i<=l?e?l:s:i>=c&&i<=u?e?u:c:0}getTimeToEventRace(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?(l.getTime()-e.getTime())/1e3:(o.getTime()-e.getTime())/1e3}getRemainingEventRaceTime(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?e>l?(c.getTime()-e.getTime())/1e3:(s.getTime()-e.getTime())/1e3:0}getEventTimePer5Min(){var e=this.getRemainingEventRaceTime();return Math.floor(e/60/5)}generateTrackRace(e,i){var r=60,a=[],o=new Ji;o.courseType=e.raceCourseType,i===Li.practice?(r=45,o.distance=100,o.terrain=new un(Qe.Stormy)):i===Li.novice?(r=60,o.distance=1e3,o.terrain=new un(Qe.Stormy)):i===Li.intermediate?(r=80,o.distance=1e4,o.terrain=new un(Qe.Stormy)):i===Li.master&&(r=100,o.distance=1e5,o.terrain=new un(Qe.Stormy)),a.push(o);var s=0;return a.forEach(l=>{s+=l.distance}),a.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,s,i)}),new Tn(a,this.globalVar.circuitRank,!1,1,s,r,void 0,Ut.Track,i,ge.trainingTrack)}generateLegacyTrackRace(e,i){var a=[],o=new Ji;o.courseType=e.raceCourseType,o.distance=1e6*Math.pow(2,e.legacyRaceCount),o.terrain=new un(Qe.Stormy),a.push(o);var s=0;return a.forEach(l=>{s+=l.distance}),a.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,s,i)}),new Tn(a,this.globalVar.circuitRank,!1,1,s,100,void 0,Ut.Track,i,ge.trainingTrack)}GenerateRaceLegPaths(e,i,r){for(var o=[],s=e.distance,c=Math.round(s/(i/20)),u=!1,f=Ge.Regular,v=s/c,b=0;b<c;b++){var y=new Sn;0!==b?b!==c-1?(y.length=s>v?v:s,(s-=y.length)<0&&(s=0),u?y.routeDesign=Ge.Regular:(y.routeDesign=this.GetSpecialRoute(e.courseType,b+2<c,f),e.specialPathCount+=1,y.isSpecialPath=!0),u=y.routeDesign!==Ge.Regular,y.setStumbleFields(),o.push(y),f=y.routeDesign):(y.length=s,y.routeDesign=e.courseType===F.Volcanic?Ge.LastRegular:Ge.Regular,y.setStumbleFields(),o.push(y),f=y.routeDesign):(y.length=v,y.routeDesign=e.courseType===F.Volcanic?Ge.FirstRegular:Ge.Regular,y.setStumbleFields(),o.push(y),s-=y.length,f=y.routeDesign)}return o}GetSpecialRoute(e,i,r){var a=Ge.Regular,s=this.utilityService.getRandomInteger(1,3);return 1===s||(2===s?e===F.Flatland?a=Ge.S:e===F.Mountain?a=Ge.Crevasse:e===F.Ocean?a=Ge.Waves:e===F.Tundra?a=Ge.Cavern:e===F.Volcanic&&(a=Ge.Regular):3===s&&(e===F.Flatland?a=Ge.Bumps:e===F.Mountain?a=Ge.Gaps:e===F.Ocean?a=Ge.Dive:e===F.Tundra?a=Ge.Hills:e===F.Volcanic&&(a=Ge.SteppingStones))),a}calculateAnimalRacingStats(e,i){var r=e.currentStats.defaultMaxSpeedModifier,a=e.currentStats.defaultAccelerationModifier,o=e.currentStats.defaultStaminaModifier,s=e.currentStats.defaultPowerModifier,l=e.currentStats.defaultFocusModifier,c=e.currentStats.defaultAdaptabilityModifier,u=.02,f=e.getAnimalType().toLowerCase(),v=this.globalVar.modifiers.find(Ue=>Ue.text===f+"DefaultMaxSpeedModifier"),b=this.globalVar.modifiers.find(Ue=>Ue.text===f+"DefaultAccelerationModifier"),y=this.globalVar.modifiers.find(Ue=>Ue.text===f+"DefaultStaminaModifier"),C=this.globalVar.modifiers.find(Ue=>Ue.text===f+"DefaultPowerModifier"),T=this.globalVar.modifiers.find(Ue=>Ue.text===f+"DefaultFocusModifier"),M=this.globalVar.modifiers.find(Ue=>Ue.text===f+"DefaultAdaptabilityModifier");null!=v&&(r=v.value),null!=b&&(a=b.value),null!=y&&(o=y.value),null!=C&&(s=C.value),null!=T&&(l=T.value),null!=M&&(c=M.value);var S=this.getTraitModifier(e,ye.topSpeed),w=this.getTraitModifier(e,ye.acceleration),B=this.getTraitModifier(e,ye.endurance),j=this.getTraitModifier(e,ye.power),de=this.getTraitModifier(e,ye.focus),ne=this.getTraitModifier(e,ye.adaptability),ue=void 0===i?1:null==i?void 0:i.filter(Ue=>null!==Ue.equippedOrb&&this.getOrbTypeFromResource(Ue.equippedOrb)===Be.ruby).length,se=void 0===i?1:null==i?void 0:i.filter(Ue=>null!==Ue.equippedOrb&&this.getOrbTypeFromResource(Ue.equippedOrb)===Be.amber).length,Ce=void 0===i?1:null==i?void 0:i.filter(Ue=>null!==Ue.equippedOrb&&this.getOrbTypeFromResource(Ue.equippedOrb)===Be.topaz).length,Se=void 0===i?1:null==i?void 0:i.filter(Ue=>null!==Ue.equippedOrb&&this.getOrbTypeFromResource(Ue.equippedOrb)===Be.amethyst).length,ve=void 0===i?1:null==i?void 0:i.filter(Ue=>null!==Ue.equippedOrb&&this.getOrbTypeFromResource(Ue.equippedOrb)===Be.sapphire).length,Oe=void 0===i?1:null==i?void 0:i.filter(Ue=>null!==Ue.equippedOrb&&this.getOrbTypeFromResource(Ue.equippedOrb)===Be.emerald).length,Ke=null!==e.equippedOrb&&"Ruby Orb"===e.equippedOrb.name?this.globalVar.orbStats.getMaxSpeedIncrease(ue):1,Ht=null!==e.equippedOrb&&"Amber Orb"===e.equippedOrb.name?this.globalVar.orbStats.getAccelerationIncrease(se):1,qe=null!==e.equippedOrb&&"Topaz Orb"===e.equippedOrb.name?this.globalVar.orbStats.getEnduranceIncrease(Ce):1,ft=null!==e.equippedOrb&&"Amethyst Orb"===e.equippedOrb.name?this.globalVar.orbStats.getPowerIncrease(Se):1,xt=null!==e.equippedOrb&&"Sapphire Orb"===e.equippedOrb.name?this.globalVar.orbStats.getFocusIncrease(ve):1,Dt=null!==e.equippedOrb&&"Emerald Orb"===e.equippedOrb.name?this.globalVar.orbStats.getAdaptabilityIncrease(Oe):1,ee=this.globalVar.modifiers.find(Ue=>"breedLevelStatModifier"===Ue.text);null!=ee&&(u=ee.value),u=1+(u+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var R=1,pt=1,_t=1,Ot=1,Kt=1,ct=1;e.talentTree.talentTreeType===vt.sprint&&(ct=1+e.talentTree.column1Row3Points/100,pt=1+e.talentTree.column2Row3Points/100,Ot=1+e.talentTree.column3Row3Points/100),e.talentTree.talentTreeType===vt.longDistance&&(Kt=1+e.talentTree.column1Row3Points/100,R=1+e.talentTree.column2Row3Points/100,_t=1+e.talentTree.column3Row3Points/100);var ii=this.GetAnimalDiminishingReturns(e);e.currentStats.maxSpeedMs=e.currentStats.calculateMaxSpeed(r*u*S*e.incubatorStatUpgrades.maxSpeedModifier*R,ii,Ke),e.currentStats.accelerationMs=e.currentStats.calculateTrueAcceleration(a*u*w*e.incubatorStatUpgrades.accelerationModifier*pt,ii,Ht),e.currentStats.stamina=e.currentStats.calculateStamina(o*u*B*e.incubatorStatUpgrades.staminaModifier*_t,ii,qe),e.currentStats.powerMs=e.currentStats.calculateTruePower(s*u*j*e.incubatorStatUpgrades.powerModifier*Ot,ii,ft),e.currentStats.focusMs=e.currentStats.calculateTrueFocus(l*u*de*e.incubatorStatUpgrades.focusModifier*Kt,ii,xt),e.currentStats.adaptabilityMs=e.currentStats.calculateTrueAdaptability(c*u*ne*e.incubatorStatUpgrades.adaptabilityModifier*ct,ii,Dt),e.currentStats.burstChance=e.currentStats.calculateBurstChance(u),e.currentStats.burstDistance=e.currentStats.calculateBurstDistance(u),this.updateTrackedMaxStats(e)}getTraitModifier(e,i){var r=1;if(null!=e.trait){var a=e.trait.researchLevel,o=e.trait.researchLevel,s=this.globalVar.modifiers.find(l=>"maximumTraitNegativePercentModifier"===l.text);void 0!==s&&o>s.value&&(o=s.value),e.trait.positiveStatGain===i&&(r+=a/100),e.trait.negativeStatGain===i&&(r-=o/100)}return r}GetAnimalDiminishingReturns(e){var i=e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalVar.resources.find(s=>"Facility Level"===s.name);if(null==r)return i;var a=5,o=this.globalVar.modifiers.find(s=>"facilityLevelModifier"===s.text);return void 0!==o&&(a=o.value),i+r.amount*(a+e.miscStats.diminishingReturnsBonus)}IncreaseAnimalBreedGauge(e,i){e.breedGaugeXp+=i,e.breedGaugeXp>=e.breedGaugeMax&&(e.breedGaugeXp=e.breedGaugeMax,e.autoBreedActive&&this.BreedAnimal(e))}getBreedLevelRequiredForGrandPrix(){var e=50,i=this.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}BreedAnimal(e){if(!(e.breedGaugeXp<e.breedGaugeMax)){var i=5,r=this.globalVar.modifiers.find(ve=>"breedGaugeMaxIncreaseModifier"===ve.text);if(null!=r&&(i=r.value),e.breedLevel+=1,e.breedGaugeXp=0,e.breedGaugeMax+=i,null!=this.globalVar.resources.find(ve=>ve.name.includes("Incubator Upgrade"))&&null!=e.trait){var o=.001,s=this.globalVar.modifiers.find(ve=>"incubatorUpgradeIncreaseModifier"===ve.text);null!=s&&(o=s.value);var l=e.trait.researchLevel*o,c=this.globalVar.resources.find(ve=>"Incubator Upgrade Lv1"===ve.name),u=this.globalVar.resources.find(ve=>"Incubator Upgrade Lv2"===ve.name),f=this.globalVar.resources.find(ve=>"Incubator Upgrade Lv3"===ve.name);null!=this.globalVar.resources.find(ve=>"Incubator Upgrade Lv4"===ve.name)?l>.1&&(l=.1):null!=f?l>.05&&(l=.05):null!=u?l>.025&&(l=.025):null!=c&&l>.01&&(l=.01),e.trait.positiveStatGain===ye.topSpeed&&(e.incubatorStatUpgrades.maxSpeedModifier+=l),e.trait.positiveStatGain===ye.acceleration&&(e.incubatorStatUpgrades.accelerationModifier+=l),e.trait.positiveStatGain===ye.endurance&&(e.incubatorStatUpgrades.staminaModifier+=l),e.trait.positiveStatGain===ye.power&&(e.incubatorStatUpgrades.powerModifier+=l),e.trait.positiveStatGain===ye.focus&&(e.incubatorStatUpgrades.focusModifier+=l),e.trait.positiveStatGain===ye.adaptability&&(e.incubatorStatUpgrades.adaptabilityModifier+=l)}var b=e.baseStats.topSpeed+e.increasedDefaultStats.topSpeed,y=e.baseStats.acceleration+e.increasedDefaultStats.acceleration,C=e.baseStats.endurance+e.increasedDefaultStats.endurance,T=e.baseStats.power+e.increasedDefaultStats.power,M=e.baseStats.focus+e.increasedDefaultStats.focus,S=e.baseStats.adaptability+e.increasedDefaultStats.adaptability,w=this.globalVar.resources.find(ve=>"Animal Handler"===ve.name),B=this.globalVar.modifiers.find(ve=>"animalHandlerModifier"===ve.text);if(null!=w&&void 0!==B&&null!=B&&w.amount>0){var j=w.amount*B.value,de=Math.round((e.currentStats.topSpeed-b)*j),ne=Math.round((e.currentStats.acceleration-y)*j),ue=Math.round((e.currentStats.endurance-C)*j),se=Math.round((e.currentStats.power-T)*j),Ce=Math.round((e.currentStats.focus-M)*j),Se=Math.round((e.currentStats.adaptability-S)*j);e.currentStats=new Ve(b+de,y+ne,C+ue,T+se,M+Ce,S+Se)}else e.currentStats=new Ve(b,y,C,T,M,S);this.calculateAnimalRacingStats(e),this.globalVar.trackedStats.totalBreeds+=1}}increaseAbilityXp(e,i,r){null!=e.equippedOrb&&!r&&this.getOrbTypeFromResource(e.equippedOrb)===Be.amethyst&&this.increaseAmethystOrbXp(e);var a=25,o=this.globalVar.modifiers.find(c=>"abilityLevelCapModifier"===c.text);if(null!=o&&(a=o.value),!(e.ability.abilityLevel>e.breedLevel+a)){var s=1;null!=i&&i>1&&(s=i),e.ability.abilityXp+=s,e.ability.abilityXp>=e.ability.abilityMaxXp&&(e.ability.abilityXp=0,e.ability.abilityLevel+=1,e.ability.abilityLevel%10==0&&(e.ability.abilityMaxXp+=5));var l=e.availableAbilities.find(c=>c.name===e.ability.name);null!=l&&(l.abilityXp=e.ability.abilityXp,l.abilityLevel=e.ability.abilityLevel,l.abilityMaxXp=e.ability.abilityMaxXp)}}getBarnListInOrder(){var e=[];return this.globalVar.barnOrder.forEach(i=>{var r=this.globalVar.barns.find(a=>a.barnNumber===i);void 0!==r&&e.push(r)}),e}InitializeResources(){this.globalVar.resources.push(this.initializeService.initializeResource("Coins",500,G.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Renown",1,G.Progression))}InitializeKeybinds(){this.globalVar.keybinds.set("Back","B"),this.globalVar.settings.set("Show Food","F"),this.globalVar.settings.set("Shout Encouragement","E"),this.globalVar.settings.set("Blow Whistle","W")}InitializeSettings(){this.themeService.setLightTheme(),this.globalVar.settings.set("theme",this.themeService.getActiveTheme()),this.globalVar.settings.set("skipDrawRace",!1),this.globalVar.settings.set("finishTrainingBeforeSwitching",!0),this.globalVar.settings.set("hideTips",!1),this.globalVar.settings.set("useNumbersForCircuitRank",!1),this.globalVar.settings.set("raceDisplayInfo",Pa.both),this.globalVar.settings.set("autoStartEventRace",!1),this.globalVar.settings.set("quickViewBarnMode",!1),this.globalVar.settings.set("displayAverageDistancePace",!0),this.globalVar.settings.set("showBarnOptions",!1),this.globalVar.settings.set("monoRaceToggled",!1),this.globalVar.settings.set("duoRaceToggled",!1),this.globalVar.settings.set("rainbowRaceToggled",!1),this.globalVar.settings.set("pinnacleRaceToggled",!1),this.globalVar.settings.set("noviceTrainingTrackToggled",!1),this.globalVar.settings.set("intermediateTrainingTrackToggled",!1),this.globalVar.settings.set("masterTrainingTrackToggled",!1),this.globalVar.settings.set("amberOrbToggled",!1),this.globalVar.settings.set("amethystOrbToggled",!1),this.globalVar.settings.set("emeraldOrbToggled",!1),this.globalVar.settings.set("rubyOrbToggled",!1),this.globalVar.settings.set("sapphireOrbToggled",!1),this.globalVar.settings.set("topazOrbToggled",!1)}InitializeUnlockables(){this.globalVar.unlockables.set("monoRace",!1),this.globalVar.unlockables.set("duoRace",!1),this.globalVar.unlockables.set("rainbowRace",!1),this.globalVar.unlockables.set("thePinnacle",!1),this.globalVar.unlockables.set("grandPrix",!1),this.globalVar.unlockables.set("orbs",!1),this.globalVar.unlockables.set("barnRow2",!1),this.globalVar.unlockables.set("barnRow3",!1),this.globalVar.unlockables.set("barnRow4",!1),this.globalVar.unlockables.set("barnRow5",!1),this.globalVar.unlockables.set("coaching",!1),this.globalVar.unlockables.set("barnSpecializations",!1),this.globalVar.unlockables.set("attractionSpecialization",!1),this.globalVar.unlockables.set("researchCenterSpecialization",!1)}getCoinsResourceValue(e){return new te("Coins",e)}getMedalResourceValue(e){return new te("Medals",e)}getTokenResourceValue(e){return new te("Tokens",e)}unlockAnimalAbilities(e){var i=this.globalVar.shop.find(a=>"Abilities"===a.name);if(null!=i){var r=i.itemList.filter(a=>a.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}unlockOtherRaceCourseTypeAnimals(e){var i=this.globalVar.shop.find(a=>"Animals"===a.name);if(null!=i){var r=[];i.itemList.forEach(a=>{var o=this.globalVar.animals.find(s=>s.getAnimalType()===a.name);null!=o&&o.raceCourseType===e&&r.push(a)}),null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}getAnimalDescription(e){var i="";return"Horse"===e?i="The Horse is a Flatland racing animal capable of running without losing stamina and increasing the max speed of relay racers.":"Cheetah"===e?i="The Cheetah is a Flatland racing animal that prioritizes quickness over stamina.":"Hare"===e?i="The Hare is a Flatland racing animal that can instantly enter Burst and increase adaptability and focus.":"Warthog"===e?i="The Warthog is a Flatland racing animal that can increase stats at random and increase Burst Chance after losing focus.":"Monkey"===e?i="The Monkey is a Mountain climbing animal capable of slowing its competitors and leaping to victory.":"Goat"===e?i="The Goat is a Mountain climbing animal that can nimbly travel terrain and increase stamina.":"Gecko"===e?i="The Gecko is a Mountain climbing animal that can increase speed based on focus and can increase other racers' starting velocity.":"Dolphin"===e?i="The Dolphin is an Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay.":"Shark"===e?i="The Shark is an Ocean swimming animal that can slow competitors and increase its own stats at the cost of your other racers.":"Octopus"===e?i="The Octopus is an Ocean swimming animal that can increase your coin rewards from races and increase power of other racers.":"Whale"===e?i="The Whale is an Ocean swimming animal that can set a velocity floor and becomes increasingly faster as the race goes on.":"Penguin"===e?i="The Penguin is a Tundra racing animal that can slide carefully or recklessly.":"Caribou"===e?i="The Caribou is a Tundra racing animal that boosts other racers based on stamina.":"Salamander"===e?i="The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration.":"Fox"===e&&(i="The Fox is a Volcanic racing animal that can increase stats at random."),i}getNumberOfCircuitRankRotations(){return 1+Math.floor((this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank)-1)/26)}sortAnimalOrder(){this.globalVar.animals.sort((e,i)=>e.raceCourseType-i.raceCourseType)}getEquipmentDescription(e){var i="";return"Headband"===e&&(i="The first three stumbles you would have are ignored"),"Pendant"===e&&(i="Reduce your ability cooldown by 10%"),"Blinders"===e&&(i="Negative terrain effects are cut in half"),"Quick Snack"===e&&(i="Gain 100% of Stamina back after running out"),"Red Baton"===e&&(i="Increase next racer's Speed by 10% on Relay"),"Blue Baton"===e&&(i="Increase next racer's Focus by 10% on Relay"),"Violet Baton"===e&&(i="Increase next racer's Power by 10% on Relay"),"Green Baton"===e&&(i="Increase next racer's Adaptability by 10% on Relay"),"Orange Baton"===e&&(i="Increase next racer's Acceleration by 10% on Relay"),"Yellow Baton"===e&&(i="Increase next racer's Endurance by 10% on Relay"),"Amethyst Orb"===e&&(i="Increase your Power Efficiency by "+(100*(this.globalVar.orbStats.getPowerIncrease(1)-1)).toFixed(2)+"%."),"Sapphire Orb"===e&&(i="Increase your Focus Distance by "+(100*(this.globalVar.orbStats.getFocusIncrease(1)-1)).toFixed(2)+"%."),"Amber Orb"===e&&(i="Increase your Acceleration Rate by "+(100*(this.globalVar.orbStats.getAccelerationIncrease(1)-1)).toFixed(2)+"%."),"Topaz Orb"===e&&(i="Increase your Stamina by "+(100*(this.globalVar.orbStats.getEnduranceIncrease(1)-1)).toFixed(2)+"%."),"Emerald Orb"===e&&(i="Increase your Adaptability Distance by "+(100*(this.globalVar.orbStats.getAdaptabilityIncrease(1)-1)).toFixed(2)+"%."),"Ruby Orb"===e&&(i="Increase your Max Speed by "+(100*(this.globalVar.orbStats.getMaxSpeedIncrease(1)-1)).toFixed(2)+"%."),"Scary Mask"===e&&(i="Cause a distraction the first time you lose focus while ahead of competition, slowing competitors by 2 seconds."),"Running Shoes"===e&&(i="After each Burst during a race, increase subsequent Burst distance by 20%."),"Incense"===e&&(i="When your velocity is at least 90% of your Max Speed, immediately set velocity to 100% of your Max Speed."),"Athletic Tape"===e&&(i="While Bursting, decrease Acceleration Rate by 50% but increase Focus Distance and Adaptability Distance by 50%."),i}getItemDescription(e,i){var r="",a=0,o="";return void 0!==i&&(a=100*this.getNectarOfTheGodsIncrease(i),this.globalVar.resources.some(s=>"Orb Infuser"===s.name)&&(o="and your selected Orb's stat gain per level by  "+this.getNectarOfTheGodsOrbInfusionIncrease(i).toFixed(2)+"% ")),"Apples"===e&&(r="+1 Acceleration to a single animal"),"Bananas"===e&&(r="+1 Speed to a single animal"),"Strawberries"===e&&(r="+1 Endurance to a single animal"),"Carrots"===e&&(r="+1 Power to a single animal"),"Turnips"===e&&(r="+1 Focus to a single animal"),"Oranges"===e&&(r="+1 Adaptability to a single animal"),"Mangoes"===e&&(r="+1 Breed Level to a single animal"),"Gingko Leaves"===e&&(r="Reset Breed Level for a single animal back to 1 and remove all incubator upgrade gains. Increase Breed XP Gain by 900% until Breed Level returns to what it was."),"Circuit Race Breed XP Gain Certificate"===e&&(r="Give an animal +2 Bonus Breed XP Gain from Circuit Races. Can use up to 30 of these certificates on any individual animal."),"Free Race Breed XP Gain Certificate"===e&&(r="Give an animal +1 Bonus Breed XP Gain from Free Races. Can use up to 30 of these certificates on any individual animal."),"Training Breed XP Gain Certificate"===e&&(r="Give an animal +1 Bonus Breed XP Gain from Training. Can use up to 30 of these certificates on any individual animal."),"Diminishing Returns Increase Certificate"===e&&(r="Give an animal +1 Diminishing Returns per Facility Level. Can use up to 30 of these certificates on any individual animal."),"Nectar of the Gods"===e&&(r="Drink this to reset Breed Level, Incubator Upgrades, and Ability Levels back to 1. Increase Breed Modifier per Breed Level by "+a.toFixed(2)+"% "+o+"when using this."),r}getSpecializationDescription(e){var i="";return"Breeding Grounds"===e?i="Turn your barn into a habitat based around the optimal breeding environment for your animals. As you progress, your animals will gain more breeding XP from their training.":"Training Facility"===e?i="Pull out all the stops giving your animals the best environment to improve. As you progress, your animals will train faster and gain stats from training at a higher rate.":"Attraction"===e?i="Give the people what they want and turn your barn into a tourist attraction. As you progress, your barn will provide passive income at a steady rate while training.":"Research Center"===e&&(i="Bring in the top names in animal research to optimize your training process. As you progress, your animal will gain reduced stats from training but split its improvements with other animals."),i}getTundraDescription(){return"When racing in the Tundra, your racer will slide all over the race course as they move forward. The higher your Adaptability stat, the better control your racer will have and the less likely they will slide. You lose a percentage of max speed while sliding, and if you slide too much you may hit a wall and come to a complete stop!"}getVolcanicDescription(){return"Volcanic racers make their way while a Volcano ominously looms in the background. As you race, the Volcano will erupt making it impossible to proceed if you get stuck behind the lava flow. If you stay ahead of the average pace for the Volcanic leg of the race, you should have no problem speeding past the lava so make sure your Max Speed and Acceleration are up to the challenge."}handleNectarOfTheGodsReset(e){if(e.miscStats.bonusBreedModifierAmount+=this.getNectarOfTheGodsIncrease(e),this.globalVar.resources.some(a=>"Orb Infuser"===a.name)){var i=this.getNectarOfTheGodsOrbInfusionIncrease(e);if(null!=e.equippedOrb){var r=this.getOrbDetailsFromType(this.getOrbTypeFromResource(e.equippedOrb));void 0!==r&&(r.defaultIncrease+=i/100,r.increasePerLevel+=i/100)}}e.previousBreedLevel=1,e.breedLevel=1,e.breedGaugeMax=200,e.breedGaugeXp=0,e.incubatorStatUpgrades=new qu,e.ability.abilityLevel=1,e.ability.abilityMaxXp=50,e.ability.abilityXp=0,e.nectarAvailable=!1,e.allTrainingTracks.legacyTrack.rewardsObtained=0,e.legacyRaceCount+=1,e.availableAbilities.forEach(a=>{a.abilityLevel=1,a.abilityMaxXp=50,a.abilityXp=0}),this.calculateAnimalRacingStats(e)}getNectarOfTheGodsIncrease(e,i){var r=e.breedLevel;void 0!==i&&i>0&&(r=i);return(r<=1500?r/100:5*Math.log10(.005*(r-1500)+1)+15)/100}getNectarOfTheGodsOrbInfusionIncrease(e,i){var a=e.breedLevel;return void 0!==i&&i>0&&(a=i),a/1500}updateTrackedMaxStats(e){if(e.isAvailable){if(""===this.globalVar.trackedStats.highestMaxSpeed)this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var i=parseFloat(this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").indexOf(" ")));e.currentStats.maxSpeedMs>i&&(this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAccelerationRate)this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var r=parseFloat(this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").indexOf(" ")));e.currentStats.accelerationMs>r&&(this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestStamina)this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")";else{var a=parseFloat(this.globalVar.trackedStats.highestStamina.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestStamina.replaceAll(",","").indexOf(" ")));e.currentStats.stamina>a&&(this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")")}if(""===this.globalVar.trackedStats.highestPowerEfficiency)this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")";else{var o=parseFloat(this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").indexOf(" ")));e.currentStats.powerMs>o&&(this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")")}if(""===this.globalVar.trackedStats.highestFocusDistance)this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")";else{var s=parseFloat(this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>s&&(this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAdaptabilityDistance)this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")";else{var l=parseFloat(this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>l&&(this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")")}}}shouldShowSlowSegmentWarning(e){var i=!1;if(void 0===e)return i;if((e.currentStats.acceleration<=10||e.currentStats.topSpeed<=10||e.currentStats.endurance<=10||e.currentStats.power<=10||e.currentStats.focus<=10||e.currentStats.adaptability<=10)&&(console.log("Stats too low for "+e.name+": "+e.currentStats.acceleration+" "+e.currentStats.topSpeed+" "+e.currentStats.endurance+" "+e.currentStats.power+" "+e.currentStats.focus+" "+e.currentStats.adaptability),i=!0),null!=this.globalVar.eventRaceData){var a=this.globalVar.eventRaceData.totalDistance/this.globalVar.eventRaceData.totalSegments/this.globalVar.eventRaceData.segmentTime;a>3*e.currentStats.maxSpeedMs&&(console.log("Max Speed Too Low for "+e.name+": "+a+" > "+3*e.currentStats.maxSpeedMs),i=!0),e.currentStats.focusMs<a/5&&(console.log("Not Focused Enough for "+e.name+": "+e.currentStats.focusMs+" < "+a/30),i=!0)}return i}devModeInitialize(e,i){var r,a,o,s,l,c=this.globalVar.resources.find(w=>"Coins"===w.name);if(void 0!==c&&(c.amount=1e11),this.globalVar.resources.some(w=>"Medals"===w.name)){var u=this.globalVar.resources.find(w=>"Medals"===w.name);void 0!==u&&(u.amount+=e+1e7)}else this.globalVar.resources.push(this.initializeService.initializeResource("Medals",e+1e5,G.Resources));if(this.globalVar.resources.push(this.initializeService.initializeResource("Talent Points",1e3,G.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Tokens",1e3,G.Resources)),this.globalVar.resources.some(w=>"Renown"===w.name)){var f=this.globalVar.resources.find(w=>"Renown"===w.name);void 0!==f&&(f.amount+=5e4)}else this.globalVar.resources.push(this.initializeService.initializeResource("Renown",5e4,G.Resources));this.globalVar.resources.push(this.initializeService.initializeResource("Facility Level",1e3,G.Progression)),this.globalVar.resources.push(this.initializeService.initializeResource("Research Level",e,G.Progression)),this.globalVar.monoRank="AAAZ",this.globalVar.duoRank="AAZ",this.globalVar.rainbowRank="AZ";for(var v=1;v<=e;v++){var b=this.utilityService.getCircuitRankFromNumericValue(v);this.globalVar.circuitRank=b,this.checkCircuitRankRewards(),this.GenerateCircuitRacesForRank(this.globalVar.circuitRank)}null===(r=this.globalVar.animalDecks.find(w=>2===w.deckNumber))||void 0===r||r.selectedAnimals.push(this.globalVar.animals.find(w=>w.type===L.Horse)),null===(a=this.globalVar.animalDecks.find(w=>2===w.deckNumber))||void 0===a||a.selectedAnimals.push(this.globalVar.animals.find(w=>w.type===L.Goat)),null===(o=this.globalVar.animalDecks.find(w=>2===w.deckNumber))||void 0===o||o.selectedAnimals.push(this.globalVar.animals.find(w=>w.type===L.Whale)),null===(s=this.globalVar.animalDecks.find(w=>2===w.deckNumber))||void 0===s||s.selectedAnimals.push(this.globalVar.animals.find(w=>w.type===L.Caribou)),null===(l=this.globalVar.animalDecks.find(w=>2===w.deckNumber))||void 0===l||l.selectedAnimals.push(this.globalVar.animals.find(w=>w.type===L.Salamander)),this.globalVar.animalDecks.find(w=>2===w.deckNumber).isPrimaryDeck=!0,this.globalVar.animalDecks.find(w=>2===w.deckNumber).isEventDeck=!0,this.globalVar.animalDecks.find(w=>1===w.deckNumber).isPrimaryDeck=!1,this.globalVar.animalDecks.find(w=>1===w.deckNumber).isEventDeck=!1;var y=5,C=1,T=1;1===i?(y=50,C=50):2===i?(y=100,C=250,T=3):3===i?(y=750,C=750,T=7):4===i&&(y=5e3,C=1e3,T=12.5),this.globalVar.animals.forEach(w=>{if((w.type===L.Goat||w.type===L.Caribou||w.type===L.Octopus)&&(w.isAvailable=!0,w.availableAbilities.forEach(j=>{j.isAbilityPurchased=!0,("Deep Breathing"===j.name||"Special Delivery"===j.name||"Big Brain"===j.name)&&(w.ability=j)})),w.currentStats.topSpeed=y,w.currentStats.acceleration=y,w.currentStats.endurance=y,w.currentStats.power=y,w.currentStats.focus=y,w.currentStats.adaptability=y,w.breedLevel=C,w.incubatorStatUpgrades.maxSpeedModifier=T,w.incubatorStatUpgrades.accelerationModifier=T,w.incubatorStatUpgrades.staminaModifier=T,w.incubatorStatUpgrades.powerModifier=T,w.incubatorStatUpgrades.focusModifier=T,w.incubatorStatUpgrades.adaptabilityModifier=T,w.ability.abilityLevel=w.breedLevel+25,w.availableAbilities.forEach(j=>{j.abilityLevel=w.breedLevel}),i>=4){var B=this.utilityService.getRandomInteger(1,3);1===B&&(w.talentTree.talentTreeType=vt.sprint),2===B&&(w.talentTree.talentTreeType=vt.support),3===B&&(w.talentTree.talentTreeType=vt.longDistance),w.talentTree.column1Row1Points=10,w.talentTree.column1Row2Points=10,w.talentTree.column1Row3Points=10,w.talentTree.column1Row4Points=10,w.talentTree.column2Row1Points=10,w.talentTree.column2Row2Points=10,w.talentTree.column2Row3Points=10,w.talentTree.column2Row4Points=10,w.talentTree.column3Row1Points=10,w.talentTree.column3Row2Points=10,w.talentTree.column3Row3Points=10,w.talentTree.column3Row4Points=10}i>=3&&e>=79&&(w.canEquipOrb=!0,w.type===L.Horse&&(w.equippedOrb=this.globalVar.resources.find(j=>"Sapphire Orb"===j.name)),w.type===L.Monkey&&(w.equippedOrb=this.globalVar.resources.find(j=>"Ruby Orb"===j.name)),w.type===L.Dolphin&&(w.equippedOrb=this.globalVar.resources.find(j=>"Topaz Orb"===j.name)),w.type===L.Penguin&&(w.equippedOrb=this.globalVar.resources.find(j=>"Emerald Orb"===j.name)),w.type===L.Salamander&&(w.equippedOrb=this.globalVar.resources.find(j=>"Amber Orb"===j.name))),this.calculateAnimalRacingStats(w)})}}return t.\u0275fac=function(e){return new(e||t)(He(Rn),He(y0),He(Xs))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var $t=(()=>{return(t=$t||($t={})).None="None",t.BreedingGrounds="Breeding Grounds",t.TrainingFacility="Training Facility",t.Attraction="Attraction",t.ResearchCenter="Research Center",$t;var t})(),tt=(()=>{return(t=tt||(tt={}))[t.inspiration=0]="inspiration",t[t.navigator=1]="navigator",t[t.flowingCurrent=2]="flowingCurrent",t[t.bigBrain=3]="bigBrain",t[t.camouflage=4]="camouflage",t[t.herdMentality=5]="herdMentality",t[t.specialDelivery=6]="specialDelivery",t[t.deepBreathing=7]="deepBreathing",t[t.redBaton=8]="redBaton",t[t.blueBaton=9]="blueBaton",t[t.violetBaton=10]="violetBaton",t[t.greenBaton=11]="greenBaton",t[t.orangeBaton=12]="orangeBaton",t[t.yellowBaton=13]="yellowBaton",t[t.supportMaxSpeedRelay=14]="supportMaxSpeedRelay",t[t.supportAccelerationRelay=15]="supportAccelerationRelay",t[t.supportStaminaRelay=16]="supportStaminaRelay",t[t.supportPowerRelay=17]="supportPowerRelay",t[t.supportFocusRelay=18]="supportFocusRelay",t[t.supportAdaptabilityRelay=19]="supportAdaptabilityRelay",t[t.supportBurstDistance=20]="supportBurstDistance",t[t.supportBurstChance=21]="supportBurstChance",t[t.supportAbilityCooldown=22]="supportAbilityCooldown",t[t.supportAbilityEfficiency=23]="supportAbilityEfficiency",tt;var t})();let Ti=(()=>{class t{constructor(e,i,r){this.globalService=e,this.utilityService=i,this.sanitizer=r}recalculateAllAnimalStats(){this.globalService.globalVar.animals.forEach(e=>{this.globalService.calculateAnimalRacingStats(e)})}getAnimalsFromAnimalDeck(e){var i=[];return null==e||void 0===e.selectedAnimals||0===e.selectedAnimals.length||e.selectedAnimals.forEach(r=>{var a=this.globalService.globalVar.animals.find(o=>o.type===r.type);void 0!==a&&i.push(a)}),i}getPrimaryDeck(){return this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck)}getResourceByName(e){var i=this.globalService.globalVar.resources.find(r=>r.name===e);return void 0!==i?i.amount:0}spendResourceByName(e,i){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount-=i)}gainResourceByName(e,i,r){var a=this.globalService.globalVar.resources.find(o=>o.name===e);void 0!==a?a.amount+=i:this.globalService.globalVar.resources.push(new te(e,i,r))}getFacilityLevel(){var e=this.globalService.globalVar.resources.find(i=>"Facility Level"===i.name);return void 0!==e?e.amount:0}getResearchLevel(){var e=this.globalService.globalVar.resources.find(i=>"Research Level"===i.name);return void 0!==e?e.amount:0}getCoins(){var e=this.globalService.globalVar.resources.find(i=>"Coins"===i.name);return void 0!==e?e.amount:0}spendCoins(e){var i=this.globalService.globalVar.resources.find(r=>"Coins"===r.name);void 0!==i&&(i.amount-=e)}getMedals(){var e=this.globalService.globalVar.resources.find(i=>"Medals"===i.name);return void 0!==e?e.amount:0}spendMedals(e){var i=this.globalService.globalVar.resources.find(r=>"Medals"===r.name);void 0!==i&&(i.amount-=e)}getTokens(){var e=this.globalService.globalVar.resources.find(i=>"Tokens"===i.name);return void 0!==e?e.amount:0}spendTokens(e){var i=this.globalService.globalVar.resources.find(r=>"Tokens"===r.name);void 0!==i&&(i.amount-=e)}getRenown(){var e=this.globalService.globalVar.resources.find(i=>"Renown"===i.name);return void 0!==e?e.amount:0}addResourceToResourceList(e,i){if(void 0!==i)if(i.some(a=>a.name===e.name)){var r=i.find(a=>a.name===e.name);void 0!==r&&(r.amount+=e.amount)}else i.push(e)}getMonthlyMangoLimit(){var e=0,i=this.globalService.globalVar.modifiers.find(r=>"monthlyMangoDefaultLimit"===r.text);return null!=i&&(e=i.value),e*this.globalService.getNumberOfCircuitRankRotations()}getRenownCoinModifier(e,i){var r=1;return r=e<=50?e:500*Math.log10(.0035*(e-50)+1)+50,i||(r/=100,r+=1),r}getStockbreeder(){var e=this.globalService.globalVar.resources.find(i=>"Stockbreeder"===i.name);return void 0!==e?e.amount:0}getAnimalByType(e){var i=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==i?i:null}getMaxSpeedModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(f=>f.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(r=s.value),r=1+(r+o.miscStats.bonusBreedModifierAmount)*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(f=>f.text===L[e].toLowerCase()+"DefaultMaxSpeedModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.topSpeed),u=1;o.talentTree.talentTreeType===vt.longDistance&&(u=1+o.talentTree.column2Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.maxSpeedModifier*u}return i}getAccelerationModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(f=>f.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(r=s.value),r=1+(r+o.miscStats.bonusBreedModifierAmount)*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(f=>f.text===L[e].toLowerCase()+"DefaultAccelerationModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.acceleration),u=1;o.talentTree.talentTreeType===vt.sprint&&(u=1+o.talentTree.column2Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.accelerationModifier*u}return i}getStaminaModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(f=>f.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(r=s.value),r=1+(r+o.miscStats.bonusBreedModifierAmount)*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(f=>f.text===L[e].toLowerCase()+"DefaultStaminaModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.endurance),u=1;o.talentTree.talentTreeType===vt.longDistance&&(u=1+o.talentTree.column3Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.staminaModifier*u}return i}getPowerModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(f=>f.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(r=s.value),r=1+(r+o.miscStats.bonusBreedModifierAmount)*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(f=>f.text===L[e].toLowerCase()+"DefaultPowerModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.power),u=1;o.talentTree.talentTreeType===vt.sprint&&(u=1+o.talentTree.column3Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.powerModifier*u}return i}getFocusModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(f=>f.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(r=s.value),r=1+(r+o.miscStats.bonusBreedModifierAmount)*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(f=>f.text===L[e].toLowerCase()+"DefaultFocusModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.focus),u=1;o.talentTree.talentTreeType===vt.longDistance&&(u=1+o.talentTree.column1Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.focusModifier*u}return i}getAdaptabilityModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(f=>f.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(r=s.value),r=1+(r+o.miscStats.bonusBreedModifierAmount)*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(f=>f.text===L[e].toLowerCase()+"DefaultAdaptabilityModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.adaptability),u=1;o.talentTree.talentTreeType===vt.sprint&&(u=1+o.talentTree.column1Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.adaptabilityModifier*u}return i}getTrainingBreedGaugeIncrease(e,i){var r=0,a=this.globalService.globalVar.modifiers.find(c=>"trainingBreedGaugeIncrease"===c.text);if(null!=a&&(r=a.value),void 0!==i&&null!=i.miscStats.bonusBreedXpGainFromTraining&&i.miscStats.bonusBreedXpGainFromTraining>0&&(r+=i.miscStats.bonusBreedXpGainFromTraining),e>0){var o=0;if(this.globalService.globalVar.resources.find(c=>"Breeding Grounds Improvements"===c.name)){var s=this.globalService.globalVar.modifiers.find(c=>"breedingGroundsAdditionalAmountModifier"===c.text);void 0!==s&&(o=s.value)}var l=this.globalService.globalVar.modifiers.find(c=>"breedingGroundsSpecializationModifier"===c.text);null!=l&&(r*=1+e*(l.value+o))}return void 0!==i&&i.previousBreedLevel>i.breedLevel&&(r*=10),r}getCircuitBreedGaugeIncrease(e){var i=0,r=this.globalService.globalVar.modifiers.find(a=>"circuitBreedGaugeIncrease"===a.text);return null!=r&&(i=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromCircuitRaces&&e.miscStats.bonusBreedXpGainFromCircuitRaces>0&&(i+=e.miscStats.bonusBreedXpGainFromCircuitRaces),void 0!==e&&e.previousBreedLevel>e.breedLevel&&(i*=10),i}getLocalBreedGaugeIncrease(e){var i=0,r=this.globalService.globalVar.modifiers.find(a=>"localBreedGaugeIncrease"===a.text);return null!=r&&(i=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromLocalRaces&&e.miscStats.bonusBreedXpGainFromLocalRaces>0&&(i+=e.miscStats.bonusBreedXpGainFromLocalRaces),void 0!==e&&e.previousBreedLevel>e.breedLevel&&(i*=10),i}getTotalRacersByRace(e){var i=2;return e.localRaceType===Ut.Track?(i=13,e.trackRaceType===Li.legacy&&(i=5)):this.getResourceByName("Money Mark")>0&&(i+=1),i}getDiminishingReturnsThreshold(e){var i=null==e?20:e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalService.globalVar.modifiers.find(a=>"facilityLevelModifier"===a.text);return void 0!==r&&(i+=this.getFacilityLevel()*r.value),i}getBreedLevelPopover(e){var i=.2,r=this.globalService.globalVar.modifiers.find(a=>"breedLevelStatModifier"===a.text);return null!=r&&(i=r.value),"Increase racing stat gain from base stats by "+((i+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1)*100).toFixed(0)+"%"}getResourcePopover(e,i){if("Coins"===e)return"Good ol classic Coins. Gain from most races and buy items from the shop with this.";if("Medals"===e)return"Rare currency gained from improving your circuit rank.";if("Renown"===e){var r=this.getRenown();return"Increases Coins gained from races by "+this.getRenownCoinModifier(r,!0).toFixed(2)+"%. Increase total number of free races available per reset period by 1 for every 100 renown for a total of "+this.getTotalFreeRacesPerPeriod()+". Complete circuit or free races to get your name out there and raise your renown."}return"Facility Level"===e?"Increase Diminishing Returns value by 5 for each level for a total of "+this.getDiminishingReturnsThreshold()+". You can increase a base stat up to your Diminishing Returns value before that base stat starts to increase your racing stats less and less.":"Tokens"===e?"Currency used to purchase items from the Event Shop.":"Talent Points"===e?"Use to improve any of your racers' talents. Each of these applies to all racers.":"Research Level"===e?"Increase incubator trait values by "+this.getResourceByName(e)+"% and unlock new available traits.":"Apples"===e||"Bananas"===e||"Oranges"===e||"Strawberries"===e||"Turnips"===e||"Carrots"===e||"Mangoes"===e?this.globalService.getItemDescription(e):"Bonus Breed XP Gain From Training"===e?"Increase Breed XP gained from training by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Free Races"===e?"Increase Breed XP gained from completing free races by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Circuit Races"===e?"Increase Breed XP gained from completing circuit races by this amount. Only applies to this animal.":"Diminishing Returns per Facility Level"===e?"Increase Diminishing Returns value by this amount for every Facility Level you have. Only applies to this animal.":"Orb Pendant"===e?"This looks like the perfect size to fit an orb inside.":"Bonus Base Ability Efficiency"===e?"Increase Ability Efficiency by this amount. Only applies to this animal.":"Bonus Orb XP Gain"===e?"Increase the amount of XP gained for orbs by this amount. Only applies to this animal.":"Nectar of the Gods"===e?"Drink this to reset Breed Level, Incubator Upgrades, and Ability Levels back to 1. Increase Breed Modifier per Breed Level based on your Breed Level when using this.":"Training Time Reduction"===e?"Reduce training times by this percent. Only applies to this animal.":"Bonus Talents"===e?"Increase talent point amount for this animal.":"Amethyst Orb Level Up"===e?"Increase the max level of your Amethyst Orb.":"Amber Orb Level Up"===e?"Increase the max level of your Amber Orb.":"Emerald Orb Level Up"===e?"Increase the max level of your Emerald Orb.":"Ruby Orb Level Up"===e?"Increase the max level of your Ruby Orb.":"Sapphire Orb Level Up"===e?"Increase the max level of your Sapphire Orb.":"Topaz Orb Level Up"===e?"Increase the max level of your Topaz Orb.":i===G.Specialty?this.getSpecialtyItemDescription(e):i===G.Equipment?this.globalService.getEquipmentDescription(e):""}getAllRaceCourseTypes(){var e=[];for(let i in F)isNaN(Number(i))&&e.push(i);return e}getCourseTypeFromAnimalType(e){var i=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==i?i.raceCourseType:-1}getTalentTreeNameByEnum(e){var i="";return e===vt.sprint&&(i="Sprint"),e===vt.support&&(i="Support"),e===vt.longDistance&&(i="Long Distance"),i}getAllBarnSpecializations(){var e=[];return e.push("Breeding Grounds"),e.push("Training Facility"),this.isItemUnlocked("attractionSpecialization")&&e.push("Attraction"),this.isItemUnlocked("researchCenterSpecialization")&&e.push("Research Center"),e}getTrackRaceRewards(e){var i=[];return e===Li.novice?(i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races")):e===Li.intermediate?(i.push("- 200 Coins"),i.push("- +2 Bonus Breed XP Gain From Training"),i.push("- 1 Medal"),i.push("- +2 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- +5 Bonus Breed XP Gain From Circuit Races"),i.push("- 200 Coins"),i.push("- +2 Bonus Breed XP Gain From Training"),i.push("- 1 Medal"),i.push("- +2 Bonus Breed XP Gain From Free Races"),i.push("- +1% Training Time Reduction"),i.push("- +3 Diminishing Returns per Facility Level")):e===Li.master?(i.push("- +5 Bonus Breed XP Gain From Free Races"),i.push("- +2 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- 1000 Coins"),i.push("- +3 Bonus Breed XP Gain From Training"),i.push("- +2 Talents"),i.push("- +1% Training Time Reduction"),i.push("- 1000 Coins"),i.push("- Orb Pendant"),i.push("- +3 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- +3 Talents")):e===Li.legacy&&(i.push("- +5 Bonus Breed XP Gain From Training"),i.push("- +5% Base Ability Efficiency Increase"),i.push("- +10% Orb XP Gain Increase"),i.push("- Nectar of the Gods")),i}getGrandPrixTokenRewards(){var e=[],i=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,r=5e7,a=this.globalService.globalVar.modifiers.find(M=>"grandPrixToken1MeterModifier"===M.text);null!=a&&(r=a.value);var o=5e7,s=this.globalService.globalVar.modifiers.find(M=>"grandPrixToken2MeterModifier"===M.text);null!=s&&(o=s.value);var l=5e7,c=this.globalService.globalVar.modifiers.find(M=>"grandPrixToken3MeterModifier"===M.text);null!=c&&(l=c.value);var u=5e7,f=this.globalService.globalVar.modifiers.find(M=>"grandPrixToken4MeterModifier"===M.text);null!=f&&(u=f.value);var v=this.getTokenModifier(),b=1*v,y=2*v,C=3*v,T=4*v;return e.push((r*i).toLocaleString()+" meters - +"+b+" Token"+(b>1?"s":"")),e.push((o*i).toLocaleString()+" meters - +"+y+" Tokens"),e.push((l*i).toLocaleString()+" meters - +"+C+" Tokens"),e.push((u*i).toLocaleString()+" meters - +"+T+" Tokens"),e}getRenownRequiredForEventShopTier(e){return 1===e?0:2===e?200:e>2?500*(e-2):-1}getHighestEventShopTierUnlocked(){var e=1,i=this.getRenown();return i>200&&(e=2),i>500&&(e=Math.floor(i/500)+2),e}isItemUnlocked(e){var i=!1,r=this.globalService.globalVar.unlockables.get(e);return null!=r&&(i=r),i}getAnimalsByRaceCourseType(e){var i=[];return"Flatland"===e?(i.push(L[L.Horse]),i.push(L[L.Cheetah]),i.push(L[L.Hare]),i.push(L[L.Warthog])):"Mountain"===e?(i.push(L[L.Monkey]),i.push(L[L.Goat]),i.push(L[L.Gecko])):"Ocean"===e?(i.push(L[L.Dolphin]),i.push(L[L.Shark]),i.push(L[L.Octopus]),i.push(L[L.Whale])):"Tundra"===e?(i.push(L[L.Penguin]),i.push(L[L.Caribou])):"Volcanic"===e&&(i.push(L[L.Salamander]),i.push(L[L.Fox])),i}GetAbilityEffectiveAmount(e,i,r,a,o,s){if(null==e.ability||null==e.ability.name)return-1;null==r&&(r=1),null==a&&(a=1);var l=1;e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(l*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(l*=1.5),e.type===L.Warthog&&"Graze"===e.ability.name&&void 0!==s&&(l*=1+.1*s.filter(M=>"Power"===M[0]).length),e.talentTree.talentTreeType===vt.sprint&&(l*=1+.05*e.talentTree.column3Row2Points);var c=e.ability;null!=o&&(c=o);var u=1;null!=e.talentTree&&null!=e.raceVariables&&e.talentTree.talentTreeType===vt.sprint&&!e.raceVariables.firstAbilityUseEffectApplied&&(u*=1+.05*e.talentTree.column3Row4Points,"Leap"!==e.ability.name&&(e.raceVariables.firstAbilityUseEffectApplied=!0));var f=1;if(null!=e.raceVariables&&null!=e.raceVariables.relayEffects){var v=this.getRelayEffectFromListByType(e.raceVariables.relayEffects,tt.supportAbilityEfficiency);void 0!==v&&void 0!==v.additionalValue&&(f=v.additionalValue)}var b=1;void 0!==i&&i.containsCondition(Qi[Qi.reduceAbilityEfficiency])&&(b=.01);var T=c.efficiency*(1+e.miscStats.bonusAbilityEfficiency)*f*u+c.efficiency*(.01*(c.abilityLevel-1));return(T*=b)*(1+e.currentStats.powerMs*l*r*a/100)}getAnimalAbilityDescription(e,i,r){if(e){if("Second Wind"===i)return"Reduce stamina loss for a short period";if("Inspiration"===i)return"Increase next racer's max speed on relay";if("Pacemaker"===i)return"Increase acceleration for a short period";if("Sprint"===i)return"Increase max speed, acceleration, stamina cost for a short period";if("Giving Chase"===i)return"Increase acceleration when behind competitors";if("On The Hunt"===i)return"Gain max speed after each burst";if("Awareness"===i)return"Increase adaptability, focus for a short period";if("Prey Instinct"===i)return"Start in extended burst mode";if("Nap"===i)return"Delay leg start, increase max speed and focus";if("Graze"===i)return"Increase stats at random";if("Mud Pit"===i)return"Focus loss is longer, gain acceleration and lose less stamina";if("Time To Tussle"===i)return"Delay competitors when you complete your leg faster than the average pace";if("Landslide"===i)return"Delay competitors";if("Frenzy"===i)return"Increase burst distance, cannot stumble or lose focus during burst";if("Leap"===i)return"Jump to the end of the leg";if("Echolocation"===i)return"Increase adaptability, ignore negative terrain effects for a short period";if("Navigator"===i)return"Increase previous and next racer's adaptability";if("Flowing Current"===i)return"Increase next racer's acceleration on relay";if("Apex Predator"===i)return"Slow competitors if they pass you";if("Feeding Frenzy"===i)return"Slow next and previous racers, increase max speed and acceleration for a distance";if("Blood In The Water"===i)return"Increase max speed when ahead of competitors";if("Propulsion"===i)return"Dash a short distance";if("Buried Treasure"===i)return"Delay your start, increase coin gain for winning race";if("Big Brain"===i)return"Increase power of other racers after bursting a certain number of times";if("Storing Power"===i)return"Reduce max speed, gain increased max speed on burst";if("Unparalleled Focus"===i)return"Gain velocity floor after keeping focus for long enough";if("Whalesong"===i)return"Gain different stat boosts on use";if("Sure-footed"===i)return"Increase adaptability after not stumbling through path";if("Deep Breathing"===i)return"Regain stamina after burst, increase other racers' stamina";if("In The Rhythm"===i)return"Increase burst speed bonus";if("Sticky"===i)return"Cannot stumble for a short period";if("Night Vision"===i)return"Increase max speed by keeping focused";if("Camouflage"===i)return"Transfer velocity to next racer on relay";if("Herd Mentality"===i)return"Grant next racer portion of your stamina, they start in burst mode";if("Great Migration"===i)return"Sacrifice stamina for acceleration for a short period";if("Special Delivery"===i)return"Increase other racers' burst velocity bonus based on stamina";if("Careful Toboggan"===i)return"Increase adaptability for a short period";if("Wild Toboggan"===i)return"Increase max drift penalty, acceleration based on drift";if("Quick Toboggan"===i)return"Increase max speed if you do not drift";if("Cold Blooded"===i)return"Reduce stamina loss and increase focus distance for a short period based on distance in leg";if("Burrow"===i)return"Avoid lava fall, prevent stumbles for a short period";if("Heat Up"===i)return"Increase acceleration for a short period, gets stronger every use";if("Trickster"===i)return"Decrease one random stat, increase a different random stat for a short period";if("Fleeting Speed"===i)return"Increase max speed greatly, lose over time";if("Nine Tails"===i)return"Increase random stat for a short period, effect can stack"}else{var a="",o=void 0;if(null==r&&this.globalService.globalVar.animals.forEach(u=>{u.availableAbilities.forEach(f=>{f.name===i&&(r=u,o=f,null!=f.cooldown&&(a=f.cooldown.toString()))})}),null!=r){var s=this.GetAbilityEffectiveAmount(r,void 0,void 0,void 0,o).toLocaleString(void 0,{minimumFractionDigits:2});""===a&&null!=r.ability.cooldown&&(a=r.ability.cooldown.toString());var l="";return"Second Wind"===i?"Reduce stamina loss by 90% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Inspiration"===i?"When the next racer starts, they gain 25% of your Max Speed for <span class='keyword'>"+s+"</span> meters. Passive.":"Pacemaker"===i?"Increase Acceleration Rate by 50% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Sprint"===i?" Gain 35% Max Speed and Acceleration Rate for <span class='keyword'>"+s+"</span> meters, but lose twice as much stamina as normal. "+a+" second cooldown.":"Giving Chase"===i?"While you are behind the average pace, increase Acceleration Rate by <span class='keyword'>"+s+"</span> m/s\xb2. Passive.":"On The Hunt"===i?"Every time you Burst, increase your Max Speed by <span class='keyword'>"+s+"</span> m/s for the rest of the race. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Awareness"===i?"Boosts Focus Distance and Adaptability Distance by 40% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Prey Instinct"===i?"Starts its leg in Burst mode that continues for an additional <span class='keyword'>"+s+"</span> meters. Passive.":"Nap"===i?"Sleep until the competition has traveled a distance equal to <span class='keyword'>"+s+"</span> meters from the end of your leg. Max Speed and Focus Distance are then doubled. Passive.":"Graze"===i?"Forage for food, gaining a 10% increase to a random stat for <span class='keyword'>"+s+"</span> meters. This effect can stack. "+a+" second cooldown.":"Mud Pit"===i?"Right after losing focus, roll in a mud pit for 1 second. Afterwards, reduce Stamina loss by 25% and increase Burst Chance by 25% for <span class='keyword'>"+s+"</span> meters. Passive.":"Time To Tussle"===i?"If you finish your leg before the average competition, tangle with them as they pass the end of your leg. Slow them by <span class='keyword'>"+s+"</span> meters. Passive.":"Landslide"===i?"Drop rocks on competitors, delaying them <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Frenzy"===i?"Increase Burst distance by <span class='keyword'>"+s+"</span> meters. You do not stumble or lose focus while bursting. Passive.":"Leap"===i?"When you are <span class='keyword'>"+s+"</span> meters from the end of the leg, leap straight to the end over .5 seconds. Passive.":"Sure-footed"===i?"When you make it through a special path without stumbling, increase your Adaptability Distance by <span class='keyword'>"+s+"</span> m. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Deep Breathing"===i?"Every time you Burst, regain <span class='keyword'>"+s+"</span> stamina, up to 100% of your total stamina. If this amount exceeds 100% of your stamina, increase all other racers' stamina by the amount exceeded up to 200% of your total stamina. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"In The Rhythm"===i?"Increase your Burst Velocity Bonus by 50% for the first <span class='keyword'>"+s+"</span> meters of every Burst. Passive.":"Sticky"===i?"Cannot stumble for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Night Vision"===i?"Every time you clear a path without losing focus, increase your Max Speed by <span class='keyword'>"+s+"</span> m/s for the rest of the race. Reset this bonus back to 0 whenever you lose focus. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Camouflage"===i?"The velocity you finish your leg at is given to your following racer on Relay. Decrease this amount to 0 evenly over <span class='keyword'>"+s+"</span> meters. The following racer can break their max speed by up to 50% while this is active. Passive.":"Echolocation"===i?"Increase your Adaptability Distance by 75% for <span class='keyword'>"+s+"</span> meters and ignore any negative effects from the terrain. "+a+" second cooldown.":"Navigator"===i?"Assist the previous racer and next racer, boosting their Adaptability Distance by 25% of your max for the last and first <span class='keyword'>"+s+"</span> meters of their legs respectively. Passive.":"Flowing Current"===i?"When relaying, increase the Acceleration Rate of your next racer by 25% of your Acceleration Rate for <span class='keyword'>"+s+"</span> meters. Passive.":"Apex Predator"===i?"If the competitors moving at the average pace pass the shark during its leg, immediately bite them, slowing their pace by 50% for <span class='keyword'>"+s+"</span> meters. Can only occur once. Passive.":"Feeding Frenzy"===i?"Increase Max Speed and Acceleration Rate by 50% for the first and last <span class='keyword'>"+s+"</span> meters of your leg. Your next and previous racers have a 10% Max Speed reduction. Passive.":"Blood In The Water"===i?"While you are ahead of the average pace, increase Max Speed by <span class='keyword'>"+s+"</span> m/s. Passive.":"Propulsion"===i?"Dash <span class='keyword'>"+s+"</span> meters over .25 seconds. "+a+" second cooldown.":"Buried Treasure"===i?"Delay your start to search for treasure until the competition has traveled a distance equal to <span class='keyword'>"+s+"</span> meters from the end of your leg. If you still win the race, increase your Coin reward by 25%. Passive.":"Big Brain"===i?"After Bursting through one third of your race paths, add <span class='keyword'>"+s+"</span>% to the Power Efficiency of all remaining racers. Passive.<br/><em>During Event Races:</em> Can trigger up to 5 times. Effects remain for the duration of the race.":"Storing Power"===i?"On use, reduce Max Speed by 10% for <span class='keyword'>"+s+"</span> meters. If you burst while this is active, regain double the amount of Max Speed lost for the rest of the race. "+a+" second cooldown.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Unparalleled Focus"===i?"Every time you complete 3 paths in a row without losing focus, gain a 20% velocity floor for <span class='keyword'>"+s+"</span> meters. While this is active, your velocity cannot drop below 20% of your Max Speed, and all calculations will consider that number to be 0% of your Max Speed. Passive.":"Whalesong"===i?"Gain 30% to a particular stat for <span class='keyword'>"+s+"</span> meters based on how many times you have used this ability, as follows:<br/>First Use - Gain 30% Adaptability Distance.<br/>Second Use - Gain 30% Burst Distance.<br/>Third Use - Gain 30% Acceleration Rate.<br/>Fourth Use - Gain 30% Focus Distance.<br/>Fifth Use - Gain 30% Max Speed.<br/>After 5 uses, every subsequent use will give 30% to all of these stats. "+ +a+" second cooldown.":"Herd Mentality"===i?"After completing your leg, <span class='keyword'>"+s+"</span> Stamina plus 10% of your remaining Stamina is given to the next racer and they start their leg in Burst mode. This does not occur if you run out of Stamina during your leg. Passive.":"Great Migration"===i?"Reduce stamina by 10%. For <span class='keyword'>"+s+"</span> meters, Acceleration Rate is increased by 25% of the amount of stamina lost. "+a+" second cooldown.":"Special Delivery"===i?"After completing your leg, increase Stamina by <span class='keyword'>"+s+"</span>, up to 125% of your total stamina. Increase all remaining racers' Burst Velocity Bonus by your remaining stamina percentage. This does not occur if you run out of Stamina during your leg. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 10%. Can trigger up to 25 times. This does not occur if your energy is below 100% at the end of the segment. Effects remain for the duration of the race.":"Careful Toboggan"===i?"Increase Adaptability Distance by 60% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Wild Toboggan"===i?"Double the maximum amount of drift per path. Increase Acceleration Rate by up to <span class='keyword'>"+s+"</span> m/s\xb2 based on how much you drift. Passive.":"Quick Toboggan"===i?"Every time you clear a path without drifting, increase your Max Speed by <span class='keyword'>"+s+"</span> m/s for the rest of the race. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Cold Blooded"===i?"Increase Focus Distance and reduce Stamina loss by up to 50% depending on how close to the center of the volcano you are. These bonuses last <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Burrow"===i?"Go underground for <span class='keyword'>"+s+"</span> meters, dodging lava fall and preventing stumbles. "+a+" second cooldown.":"Heat Up"===i?"Increase Acceleration Rate by 15% for <span class='keyword'>"+s+"</span> meters. This increase doubles every subsequent use this race. "+a+" second cooldown.":"Trickster"===i?"When active, sacrifice 25% of one random stat for 50% of another random stat. Lasts <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Fleeting Speed"===i?"Increase Max Speed by <span class='keyword'>"+s+"</span> m/s. Decrease this bonus by 2% for every percent of the leg you complete, down to 0 after you reach the half way point. Passive.":"Nine Tails"===i?"At the start of each path, increase either Acceleration Rate, Max Speed, Focus Distance, or Adaptability Distance by 15% for <span class='keyword'>"+s+"</span> meters. This effect can stack. Passive.":(null===(l=this.sanitizer.sanitize(_i.HTML,this.sanitizer.bypassSecurityTrustHtml(l)))&&(l=""),l)}}return""}getBarnByBarnNumber(e){return this.globalService.globalVar.barns.find(i=>i.barnNumber===e)}getAvailableBarns(){var e=[];return e.push(this.getBarnByBarnNumber(1)),e.push(this.getBarnByBarnNumber(2)),e.push(this.getBarnByBarnNumber(3)),this.isItemUnlocked("barnRow2")&&(e.push(this.getBarnByBarnNumber(4)),e.push(this.getBarnByBarnNumber(5)),e.push(this.getBarnByBarnNumber(6))),this.isItemUnlocked("barnRow3")&&(e.push(this.getBarnByBarnNumber(7)),e.push(this.getBarnByBarnNumber(8)),e.push(this.getBarnByBarnNumber(9))),this.isItemUnlocked("barnRow4")&&(e.push(this.getBarnByBarnNumber(10)),e.push(this.getBarnByBarnNumber(11)),e.push(this.getBarnByBarnNumber(12))),this.isItemUnlocked("barnRow5")&&(e.push(this.getBarnByBarnNumber(13)),e.push(this.getBarnByBarnNumber(14)),e.push(this.getBarnByBarnNumber(15))),e}getResourcesForBarnUpgrade(e){var i=[],r=100;if(e<10)r=50;else if(r=100*(e-9),e>=100&&(r=9100+500*(e-99)),e>=200&&(r=59100+1e3*(e-199)),e>=300&&(r=159100+2500*(e-299)),e>=400){var l=Math.ceil((e-399)/100);r=409100;for(var u=1;u<=l;u++){var f=e-(400+100*(u-1)-1);f>100&&(f=100),r+=2500*(u+1)*f}}var v=new te("Coins",r);if(i.push(v),e%10==9){var b;b=Math.ceil(e/100);var y=new te("Medals",1*b);i.push(y)}return i}getTalentResetCost(e){var i=25e4,r=this.globalService.globalVar.animals.find(a=>a.type===e);return void 0===r?i:r.freeTalentResetCount>0?i=0:(0===r.talentResetCount||(i*=r.talentResetCount+1),i)}getBarnName(e){var i="",r=e.getSize();return(e.barnUpgrades.specialization===$t.None||null==e.barnUpgrades.specialization)&&(i=r+" Barn "+e.barnNumber),e.barnUpgrades.specialization===$t.Attraction&&(i=r+" Attraction "+e.barnNumber),e.barnUpgrades.specialization===$t.BreedingGrounds&&(i=r+" Breeding Grounds "+e.barnNumber),e.barnUpgrades.specialization===$t.TrainingFacility&&(i=r+" Training Facility "+e.barnNumber),e.barnUpgrades.specialization===$t.ResearchCenter&&(i=r+" Research Center "+e.barnNumber),i}getAnimalNameFromBarn(e){var i="Empty Barn",r=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber===e.barnNumber);return void 0!==r&&(i=r.name),i}getTerrainPopoverText(e,i){var r="";void 0!==i&&(r="Terrain for the "+i.getCourseTypeName()+" leg is "+e.getTerrainType()+": <br/>"),null!=e.staminaModifier&&1!==e.staminaModifier&&(r+=e.staminaModifier>1?"+"+(100*(e.staminaModifier-1)).toFixed(0)+"% stamina loss <br/>":"-"+(100*(1-e.staminaModifier)).toFixed(0)+"% stamina loss <br/>"),null!=e.maxSpeedModifier&&1!==e.maxSpeedModifier&&(r+=e.maxSpeedModifier>1?"+"+(100*(e.maxSpeedModifier-1)).toFixed(0)+"% max speed<br/>":"-"+(100*(1-e.maxSpeedModifier)).toFixed(0)+"% max speed<br/>"),null!=e.accelerationModifier&&1!==e.accelerationModifier&&(r+=e.accelerationModifier>1?"+"+(100*(e.accelerationModifier-1)).toFixed(0)+"% acceleration<br/>":"-"+(100*(1-e.accelerationModifier)).toFixed(0)+"% acceleration<br/>"),null!=e.powerModifier&&1!==e.powerModifier&&(r+=e.powerModifier>1?"+"+(100*(e.powerModifier-1)).toFixed(0)+"% power efficiency<br/>":"-"+(100*(1-e.powerModifier)).toFixed(0)+"% power efficiency<br/>"),null!=e.focusModifier&&1!==e.focusModifier&&(r+=e.focusModifier>1?"+"+(100*(e.focusModifier-1)).toFixed(0)+"% meters before losing focus<br/>":"-"+(100*(1-e.focusModifier)).toFixed(0)+"% meters before losing focus<br/>"),null!=e.adaptabilityModifier&&1!==e.adaptabilityModifier&&(r+=e.adaptabilityModifier>1?"+"+(100*(e.adaptabilityModifier-1)).toFixed(0)+"% meters before stumbling<br/>":"-"+(100*(1-e.adaptabilityModifier)).toFixed(0)+"% meters before stumbling<br/>");var a=this.utilityService.getSanitizedHtml(r);return null!=a&&(r=a),r}getInDepthSpecializationDescription(e){var i="";if("Breeding Grounds"===e){var r=0,a=this.globalService.globalVar.modifiers.find(S=>"breedingGroundsSpecializationModifier"===S.text);null!=a&&(r=a.value),i="For every 10 levels, gain "+100*r+"% additional breed XP when completing a training."}else if("Training Facility"===e)i="For every 10 levels up to level 100, gain 2% training time reduction. For every 10 levels after level 100, gain a .1 stat multiplier for every stat.";else if("Attraction"===e){var o=60,s=this.globalService.globalVar.modifiers.find(S=>"attractionTimeToCollectModifier"===S.text);null!=s&&(o=s.value);this.globalService.globalVar.modifiers.find(S=>"attractionAmountModifier"===S.text);i="Gain a certain amount of Coins every "+o+" seconds while an animal trains in this barn. At level 10, you gain 20 Coins and every subsequent 10 levels adds an additional 20 Coins * Specialization Level."}else if("Research Center"===e){var u=this.globalService.globalVar.modifiers.find(S=>"researchCenterIncrementsModifier"===S.text),f=this.globalService.globalVar.modifiers.find(S=>"researchCenterTrainingAnimalModifier"===S.text),v=this.globalService.globalVar.modifiers.find(S=>"researchCenterStudyingAnimalModifier"===S.text),b=this.globalService.globalVar.modifiers.find(S=>"researchCenterMaxStatGainModifier"===S.text),y=.05,C=.45,T=.25,M=.5;null!=u&&(y=u.value),null!=f&&(C=f.value),null!=v&&(T=v.value),null!=b&&(M=b.value),i="To start, the animal training at the Research Center only gains "+100*(C+y)+"% of the stat values from their training. Another animal at random will gain "+100*T+"% of the stat values from training, prioritizing animals of the same course type. For every 10 levels, "+100*y+"% additional stat gain will be distributed up to "+100*M+"% to the other animal. Additional animals will gain stats after maxing out the previous."}return i}convertSpecializationNameToEnum(e){return"Breeding Grounds"===e?$t.BreedingGrounds:"Training Facility"===e?$t.TrainingFacility:"Attraction"===e?$t.Attraction:"Research Center"===e?$t.ResearchCenter:$t.None}convertTalentTreeNameToEnum(e){return"Sprint"===e?vt.sprint:"Support"===e?vt.support:"Long Distance"===e?vt.longDistance:vt.none}convertSpecializationEnumToName(e){return e===$t.BreedingGrounds?"Breeding Grounds":e===$t.TrainingFacility?"Training Facility":e===$t.Attraction?"Attraction":e===$t.ResearchCenter?"Research Center":"None"}getTrainingTimeReductionFromTrainingFacility(e){if(e.specialization===$t.TrainingFacility){var i=e.specializationLevel;return i>10&&(i=10),.02*i}return 0}getTrainingProgressionAnimationText(e){var i="";return e.affectedStatRatios.topSpeed>0&&(i+="+SPD\n"),e.affectedStatRatios.acceleration>0&&(i+="+ACC\n"),e.affectedStatRatios.endurance>0&&(i+="+END\n"),e.affectedStatRatios.power>0&&(i+="+PWR\n"),e.affectedStatRatios.focus>0&&(i+="+FCS\n"),e.affectedStatRatios.adaptability>0&&(i+="+ADP\n"),i}relayEffectTypeStacksEffectiveness(e){var i=!1;return(e===tt.bigBrain||e===tt.herdMentality||e===tt.deepBreathing||e===tt.specialDelivery)&&(i=!0),i}relayEffectPersistsEventSegments(e){var i=!1;return(e===tt.bigBrain||e===tt.redBaton||e===tt.blueBaton||e===tt.greenBaton||e===tt.orangeBaton||e===tt.violetBaton||e===tt.yellowBaton)&&(i=!0),i}getBreedLevelRequiredForGrandPrix(){var e=50,i=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}canAnimalTrain(e){var i=!0;this.globalService.globalVar.incubator.assignedAnimal===e&&(i=!1);var r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(i=!1),i}canAnimalRace(e){var i=!0,r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(i=!1),i}getTraitStatGainDescription(e){var i="",r="";return e.positiveStatGain===ye.acceleration&&(i="Acceleration"),e.positiveStatGain===ye.adaptability&&(i="Adaptability"),e.positiveStatGain===ye.endurance&&(i="Endurance"),e.positiveStatGain===ye.focus&&(i="Focus"),e.positiveStatGain===ye.power&&(i="Power"),e.positiveStatGain===ye.topSpeed&&(i="Speed"),e.negativeStatGain===ye.acceleration&&(r="Acceleration"),e.negativeStatGain===ye.adaptability&&(r="Adaptability"),e.negativeStatGain===ye.endurance&&(r="Endurance"),e.negativeStatGain===ye.focus&&(r="Focus"),e.negativeStatGain===ye.power&&(r="Power"),e.negativeStatGain===ye.topSpeed&&(r="Speed"),"+"+e.researchLevel+"% "+i+", -"+(e.researchLevel>25?25:e.researchLevel)+"% "+r}getSpecialtyItemDescription(e){var i="",r=5,a=this.globalService.globalVar.modifiers.find(w=>"internationalRacesToMedalModifier"===w.text);null!=a&&(r=a.value);var o=10,s=this.globalService.globalVar.modifiers.find(w=>"nationalRacesToMedalModifier"===w.text);null!=s&&(o=s.value);var l=5,c=this.globalService.globalVar.modifiers.find(w=>"whistleModifier"===w.text);null!=c&&(l=c.value);var u=5,f=this.globalService.globalVar.modifiers.find(w=>"goldenWhistleModifier"===w.text);null!=f&&(u=f.value);var v=60,b=this.globalService.globalVar.modifiers.find(w=>"attractionTimeToCollectModifier"===w.text);null!=b&&(v=b.value);var y=0,C=this.globalService.globalVar.modifiers.find(w=>"attractionRenownAmountModifier"===w.text);null!=C&&(y=C.value);var T=0,M=this.globalService.globalVar.modifiers.find(w=>"researchCenterRewardBonusAmountModifier"===w.text);null!=M&&(T=M.value),"Stopwatch"===e?i="Reduce training time by 5%":"Animal Handler"===e?i="Retain 2% of trained stats after breeding":"Course Maps"===e?i="Increase your chance to burst during special routes by 10%":"Stockbreeder"===e?i="Add option to auto breed when Breed XP is full":"Scouts"===e?i="You can choose the order of race legs for each relay team":"Money Mark"===e?i="Add new indicator to race, beat its time to gain increased coins":"National Races"===e?i="Gain 1 medal for every "+o+" free races you complete":"International Races"===e?i="Gain 1 medal for every "+r+" free races you complete":"Team Manager"===e?i="Automatically run 1 additional free race per reset period <em>(banks 8 hours worth of races when away from the game)</em>":"Incubator Upgrade Lv1"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .01 per Breed. <em>(10% trait value)</em>":"Incubator Upgrade Lv2"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .025 per Breed. <em>(25% trait value)</em>":"Incubator Upgrade Lv3"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .05 per Breed. <em>(50% trait value)</em>":"Incubator Upgrade Lv4"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .1 per Breed. <em>(100% trait value)</em>":"Whistle"===e?i="Gain +"+l+" to a stat instead of +1 after a successful coaching attempt":"Golden Whistle"===e?i="Gain +"+u+" to a stat instead of +"+l+" after a successful coaching attempt":"Talent Point Voucher"===e?i="Increase Talent Points by 1":"Training Facility Improvements"===e?i="Increase ability XP by 1 for every 10 barn levels every "+v+" seconds while an animal trains at a Training Facility.":"Breeding Grounds Improvements"===e?i="Further increase Breed XP gain from Breeding Grounds by 5% for every 10 barn levels.":"Attraction Improvements"===e?i="Increase Renown by "+y+" for every 10 barn levels every "+v+" seconds while an animal trains at an Attraction.":"Research Center Improvements"===e?i="Increase stat gain from Coaching and Scrimmages by "+100*T+"% for every 10 barn levels of a Research Center.":"Orb Infuser"===e&&(i="When using Nectar of the Gods, permanently increase the equipped Orb's stat increase amount per orb level.");var S=this.sanitizer.sanitize(_i.HTML,this.sanitizer.bypassSecurityTrustHtml(i));return null!==S&&(i=S),i}getWeatherClusterFromEnum(e){var i="";return e===sr.clearSkies?i="Clear Skies":e===sr.inclementWeather?i="Inclement Weather":e===sr.coldSpell&&(i="Cold Spell"),i}getWeatherClusterDescription(e){var i="";return e===sr.clearSkies?i="Race terrain shifts between Sunny, Torrid, and Ashfall. \n Flatland and Volcanic Morale increased by 50%.":e===sr.inclementWeather?i="Race terrain shifts between Rainy, Stormy, Maelstrom, and Hailstorm. \n Ocean Morale increased by 50%.":e===sr.coldSpell&&(i="Race terrain shifts between Sunny, Snowfall, and Hailstorm. \n Tundra and Mountain Morale increased by 50%."),i}getStatNameFromEnum(e){var i="";return e===ye.topSpeed&&(i="Speed"),e===ye.acceleration&&(i="Acceleration"),e===ye.endurance&&(i="Endurance"),e===ye.power&&(i="Power"),e===ye.focus&&(i="Focus"),e===ye.adaptability&&(i="Adaptability"),i}topSpeedPopover(e){var i=e.currentStats.defaultMaxSpeedModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(f=>f.text===r+"DefaultMaxSpeedModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(o=s.value),o=1+(o+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.topSpeed),c=1;e.talentTree.talentTreeType===vt.longDistance&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases max speed by "+this.getMaxSpeedModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.maxSpeedModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.maxSpeedModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Be.ruby&&this.globalService.globalVar.orbStats.getMaxSpeedIncrease(1)>1&&(u+="Ruby Orb: *"+this.globalService.globalVar.orbStats.getMaxSpeedIncrease(1).toFixed(3)+"\n"),u+"\n Default Speed value after Breed is "+(e.increasedDefaultStats.topSpeed+e.baseStats.topSpeed).toFixed(3)+"."}accelerationPopover(e){var i=e.currentStats.defaultAccelerationModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(f=>f.text===r+"DefaultAccelerationModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(o=s.value),o=1+(o+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.acceleration),c=1;e.talentTree.talentTreeType===vt.sprint&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases acceleration by "+this.getAccelerationModifierByAnimalType(e.type).toFixed(3)+"m/s\xb2 up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.accelerationModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.accelerationModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Be.amber&&this.globalService.globalVar.orbStats.getAccelerationIncrease(1)>1&&(u+="Amber Orb: *"+this.globalService.globalVar.orbStats.getAccelerationIncrease(1).toFixed(3)+"\n"),u+"\n Default Acceleration value after Breed is "+(e.increasedDefaultStats.acceleration+e.baseStats.acceleration).toFixed(3)+"."}endurancePopover(e){var i=e.currentStats.defaultStaminaModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(f=>f.text===r+"DefaultStaminaModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(o=s.value),o=1+(o+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.endurance),c=1;e.talentTree.talentTreeType===vt.longDistance&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases stamina by "+this.getStaminaModifierByAnimalType(e.type).toFixed(3)+" up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.staminaModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.staminaModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Be.topaz&&this.globalService.globalVar.orbStats.getEnduranceIncrease(1)>1&&(u+="Topaz Orb: *"+this.globalService.globalVar.orbStats.getEnduranceIncrease(1).toFixed(3)+"\n"),u+"\n Default Endurance value after Breed is "+(e.increasedDefaultStats.endurance+e.baseStats.endurance).toFixed(3)+"."}powerPopover(e){var i=e.currentStats.defaultPowerModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(f=>f.text===r+"DefaultPowerModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(o=s.value),o=1+(o+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.power),c=1;e.talentTree.talentTreeType===vt.sprint&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases ability efficiency by "+this.getPowerModifierByAnimalType(e.type).toFixed(3)+"% up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.powerModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.powerModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Be.amethyst&&this.globalService.globalVar.orbStats.getPowerIncrease(1)>1&&(u+="Amethyst Orb: *"+this.globalService.globalVar.orbStats.getPowerIncrease(1).toFixed(3)+"\n"),u+"\n Default Power value after Breed is "+(e.increasedDefaultStats.power+e.baseStats.power).toFixed(3)+"."}focusPopover(e){var i=e.currentStats.defaultFocusModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(f=>f.text===r+"DefaultFocusModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(o=s.value),o=1+(o+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.focus),c=1;e.talentTree.talentTreeType===vt.longDistance&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases focus distance by "+this.getFocusModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.focusModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.focusModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Be.sapphire&&this.globalService.globalVar.orbStats.getFocusIncrease(1)>1&&(u+="Sapphire Orb: *"+this.globalService.globalVar.orbStats.getFocusIncrease(1).toFixed(3)+"\n"),u+"\n Default Focus value after Breed is "+(e.increasedDefaultStats.focus+e.baseStats.focus).toFixed(3)+"."}adaptabilityPopover(e){var i=e.currentStats.defaultAdaptabilityModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(f=>f.text===r+"DefaultAdaptabilityModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(o=s.value),o=1+(o+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.adaptability),c=1;e.talentTree.talentTreeType===vt.sprint&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases adaptability distance by "+this.getAdaptabilityModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.adaptabilityModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.adaptabilityModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Be.emerald&&this.globalService.globalVar.orbStats.getAdaptabilityIncrease(1)>1&&(u+="Emerald Orb: *"+this.globalService.globalVar.orbStats.getAdaptabilityIncrease(1).toFixed(3)+"\n"),u+"\n Default Adaptability value after Breed is "+(e.increasedDefaultStats.adaptability+e.baseStats.adaptability).toFixed(3)+"."}abilityPopover(){var e=25,i=this.globalService.globalVar.modifiers.find(a=>"abilityLevelCapModifier"===a.text);return null!=i&&(e=i.value),"Select from up to three different abilities by clicking on their names here. Using your ability during a race will award your ability XP which increases its effectiveness. Ability level cannot exceed your animal's breed level + "+e+"."}abilityLevelPopover(e){var i="Base Efficiency: "+e.ability.efficiency+"\n";return e.ability.abilityLevel>1&&(i+="Level Efficiency Multiplier: *"+(1+.01*(e.ability.abilityLevel-1))),e.miscStats.bonusAbilityEfficiency>0&&(i+="Bonus Ability Efficiency: *"+(1+e.miscStats.bonusAbilityEfficiency)),i}bonusFreeRaceXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusLocalBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusLocalBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusLocalBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusCircuitRaceXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusCircuitBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+2*e.miscStats.bonusCircuitBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusCircuitBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusTrainingXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining(e);return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusTrainingBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusTrainingBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusTrainingBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusDiminishingReturnsPerFacilityLevelPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusDiminishingReturnsCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusDiminishingReturnsCertificateCount+" (Certificates Used: "+e.miscStats.bonusDiminishingReturnsCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusTrainingTimeReductionPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction();return r>0&&(i+="Track Race Rewards: "+r+"%\n"),i}bonusTalentsPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();return r>0&&(i+="Track Race Rewards: "+r+"\n"),i}bonusAbilityEfficiencyPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusAbilityEfficiency(e);return r>0&&(i+="Track Race Rewards: "+100*r+"%\n"),i}bonusOrbXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusOrbXp(e);return r>0&&(i+="Track Race Rewards: "+100*r+"%\n"),i}isAmountMoreThanCertificateCap(e,i,r){var a=!1;return e=+e,"Free Race Breed XP Gain Certificate"===r&&i.miscStats.bonusLocalBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Circuit Race Breed XP Gain Certificate"===r&&i.miscStats.bonusCircuitBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Training Breed XP Gain Certificate"===r&&i.miscStats.bonusTrainingBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Diminishing Returns Increase Certificate"===r&&i.miscStats.bonusDiminishingReturnsCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),a}getAnimalMorale(e){if(null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e);return null==i?0:i.morale}slowSegmentWarning(e){return!e||confirm("The animal you have selected has low racing stats for this race. You may experience some loading time as they race. Continue?")}getWeekDayGrandPrixTimeSpan(){var e=new er;return this.utilityService.getDayOfWeekFromNumber(e.weekStartDay)+" "+this.utilityService.get24HourFormat(e.weekStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekEndDay)+" "+this.utilityService.get24HourFormat(e.weekEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekEndHour)+")"}getWeekEndGrandPrixTimeSpan(){var e=new er;return this.utilityService.getDayOfWeekFromNumber(e.weekendStartDay)+" "+this.utilityService.get24HourFormat(e.weekendStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekendEndDay)+" "+this.utilityService.get24HourFormat(e.weekendEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendEndHour)+")"}getRandomTip(){var e="",i=[];return this.globalService.globalVar.settings.get("hideTips")||(i.push("After upgrading training options, reselect them to gain their benefits!"),i.push("Don't forget to export your save regularly!"),i.push("Use the arrow keys to quickly navigate between barns or animals."),i.push("Have to recite the alphabet to figure out what your next circuit rank is? You're not alone, go to the settings to use numbers instead!"),i.push("Small barns allow training for 4 hours, medium for 8 hours, and large for 12 hours. Your animals will train even when the game is not active."),i.push("Each animal gains more or less racing stats from a base stat than other animals. Hover over each base stat in the Animals tab to see its modifier."),i.push("Can't quite finish a close race? Burst Chance and Distance are not affected by Diminishing Returns, so continue to increase those stats to get ahead!"),i.push("Want to take a more hands on approach? Go to any barn that has an animal assigned and start coaching to raise stats manually!"),e=i[this.utilityService.getRandomInteger(0,i.length-1)]),e}getRandomFunFact(){var e,i,r,a,o,s,l="",c=[];return this.globalService.globalVar.settings.get("hideTips")||(c.push("Horses are prey animals. Their best method of defense? Run!"),(null===(e=this.globalService.globalVar.animals.find(f=>f.type===L.Monkey))||void 0===e?void 0:e.isAvailable)&&c.push("There are over 300 species of Monkey in the world. Roughly half are considered Old World Monkeys in Asia and Africa, and the others are New World Monkeys in Central and South America."),(null===(i=this.globalService.globalVar.animals.find(f=>f.type===L.Goat))||void 0===i?void 0:i.isAvailable)&&c.push("Mountain goats' wide toes, rough hooves, and sharp dewclaws give them incredible traction and the ability to climb steep slopes sometimes over 60 degrees."),(null===(r=this.globalService.globalVar.animals.find(f=>f.type===L.Octopus))||void 0===r?void 0:r.isAvailable)&&c.push("Octopi have the largest brain of any invertebrate and have been known to use tools, such as using coconut husks to defend themselves."),(null===(a=this.globalService.globalVar.animals.find(f=>f.type===L.Hare))||void 0===a?void 0:a.isAvailable)&&c.push("Hares' teeth never stop growing. They continually chew on grasses and twigs to keep their teeth from getting too large."),(null===(o=this.globalService.globalVar.animals.find(f=>f.type===L.Penguin))||void 0===o?void 0:o.isAvailable)&&c.push("Penguins' bodies are tapered on both ends meaning they can swim with very little resistance. They are considered one of the most streamlined animals in the world."),(null===(s=this.globalService.globalVar.animals.find(f=>f.type===L.Salamander))||void 0===s?void 0:s.isAvailable)&&c.push("Salamanders are capable of regenerating some organs and limbs. Their impressive regeneration is used as a model for scientific studies."),l=c[this.utilityService.getRandomInteger(0,c.length-1)]),l}getSettingDescriptions(e){var i="";return"Auto Skip Race Info"===e&&(i="Turn on to immediately skip to the end of any race."),"Finish Training Before Switching"===e&&(i="Turn on to wait until finishing your current training before switching to the next training you select."),"Hide Tips"===e&&(i="Turn on to stop displaying tips in the footer. (Tips never display in Mobile version presently)"),"Use Numbers For Ranks"===e&&(i="Turn on to use numbers instead of letters when displaying ranks."),"Auto Start Event Race"===e&&(i="When event race begins, automatically start running with your current event relay team."),"Race Display Info"===e&&(i="Choose how to view races. Draw only shows the visual aspect, text only shows the textual updates, and both shows both. Both is default."),"Quick View Barn"===e&&(i="Condense the barn screen so that each barn is easier to see."),"Display Average Distance Pace"===e&&(i="When the average distance pace is outside of your field of view during a race, display it in a bubble on the side of the screen."),"Swap Barn Mode"===e&&(i="Enable this to swap your barns around by dragging and dropping them. While this is active, you won't be able to click into your barns."),"Show Barn Options"===e&&(i="Enable this to show a bar above your barns with different UI options."),i}getTokenModifier(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return Math.ceil((e+1)/5)}getTotalFreeRacesPerPeriod(){var e=10,i=this.globalService.globalVar.modifiers.find(o=>"freeRacesPerTimePeriodModifier"===o.text);void 0!==i&&(e=i.value);var r=this.getRenown(),a=Math.floor(r/100);return a>15&&(a=15),e+a}getRemainingFreeRacesPerPeriod(){return this.getTotalFreeRacesPerPeriod()-this.globalService.globalVar.freeRaceCounter}getRelayEffectFromListByType(e,i){if(null!=e&&0!==e.length)return e.find(r=>r.effectType===i)}isEquipmentItemAnOrb(e){return"Amethyst Orb"===e||"Sapphire Orb"===e||"Amber Orb"===e||"Topaz Orb"===e||"Emerald Orb"===e||"Ruby Orb"===e}getRelayEffectNameByType(e){var i="";return e===tt.bigBrain?i="Big Brain":e===tt.blueBaton?i="Blue Baton":e===tt.camouflage?i="Camouflage":e===tt.deepBreathing?i="Deep Breathing":e===tt.flowingCurrent?i="Flowing Current":e===tt.greenBaton?i="Green Baton":e===tt.herdMentality?i="Herd Mentality":e===tt.inspiration?i="Inspiration":e===tt.navigator?i="Navigator":e===tt.orangeBaton?i="Orange Baton":e===tt.redBaton?i="Red Baton":e===tt.specialDelivery?i="Special Delivery":e===tt.supportAbilityCooldown?i="Cooldown Reduction Talent":e===tt.supportAbilityEfficiency?i="Ability Efficiency Talent":e===tt.supportAccelerationRelay?i="Acceleration Rate Talent":e===tt.supportAdaptabilityRelay?i="Adaptability Distance Talent":e===tt.supportBurstChance?i="Burst Chance Talent":e===tt.supportBurstDistance?i="Burst Distance Talent":e===tt.supportFocusRelay?i="Focus Distance Talent":e===tt.supportMaxSpeedRelay?i="Max Speed Talent":e===tt.supportPowerRelay?i="Power Efficiency Talent":e===tt.supportStaminaRelay?i="Stamina Talent":e===tt.violetBaton?i="Violet Baton":e===tt.yellowBaton&&(i="Yellow Baton"),i}getStatGainDescription(e,i){var r="";return e.topSpeed>0&&(r+="+"+i*e.topSpeed+" Speed\n"),e.acceleration>0&&(r+="+"+i*e.acceleration+" Acceleration\n"),e.endurance>0&&(r+="+"+i*e.endurance+" Endurance\n"),e.focus>0&&(r+="+"+i*e.focus+" Focus\n"),e.power>0&&(r+="+"+i*e.power+" Power\n"),e.adaptability>0&&(r+="+"+i*e.adaptability+" Adaptability\n"),r}getTalentTreeNames(){var e=[];return e.push("Sprint"),e.push("Support"),e.push("Long Distance"),e}getTalentTreeByStringName(e){return"Sprint"===e?vt.sprint:"Support"===e?vt.support:"Long Distance"===e?vt.longDistance:vt.none}getNameByTalentTree(e){var i="";return e===vt.sprint&&(i="Sprint"),e===vt.support&&(i="Support"),e===vt.longDistance&&(i="Long Distance"),i}getInDepthTalentTreeDescription(e){var i="";return"Sprint"===e?i="Sprinters excel at going short distances quickly. Whether it's through chaining together quick Bursts or powerful abilities, these racers will leave others in the dust at the starting line. Recommended for when you want to get the most out of Burst effects and high acceleration.":"Support"===e?i="Supporters excel when working alongside other animals. They have a special way of encouraging the racers after and sometimes before them to reach new limits. Recommended for when you want to get the most out of Relay effects.":"Long Distance"===e&&(i="Long Distance Racers excel when given time to ramp up and go the distance. These racers manage their stamina well and can reach incredible speeds over time. Recommended for racers with high max speed and that have abilities that improve over time."),i}getTalentDescription(e,i,r,a){var o="";return(null==a||a<=0)&&(a=1),r===vt.sprint&&(0===e&&0===i&&(o="Increase Adaptability stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(o="Increase Adaptability Distance by <span class='keyword'>"+5*a+"</span>% until you lose focus for the first time."),2===e&&0===i&&(o="Increase Adaptability Distance gain from Adaptability stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(o="Every time you make it through a special path without stumbling, enter a Burst that lasts <span class='keyword'>"+5*a+"</span>% as long as normal."),0===e&&1===i&&(o="Increase Acceleration stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(o="The first time velocity exceeds Max Speed while bursting, increase remaining burst distance by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===i&&(o="Increase Acceleration Rate gain from Acceleration stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(o="Each time your velocity reaches Max Speed, increase Max Speed by <span class='keyword'>"+.5*a+"</span>% and reduce Focus Distance by <span class='keyword'>"+.5*a+"</span>%. This effect can occur 10 times, up to <span class='keyword'>"+5*a+"</span>%."),0===e&&2===i&&(o="Increase Power stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(o="Increase Power Efficiency by <span class='keyword'>"+5*a+"</span>%, but consume stamina <span class='keyword'>"+5*a+"</span>% faster."),2===e&&2===i&&(o="Increase Power Efficiency gain from Power stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(o="The first time you use an ability every race, the efficiency is increased by <span class='keyword'>"+5*a+"</span>%.")),r===vt.support&&(0===e&&0===i&&(o="Increase Relay Animal's Adaptability Distance by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(o="Increase the effectiveness of your Relay effects by <span class='keyword'>"+2*a+"</span>%."),2===e&&0===i&&(o="Increase Relay Animal's Max Speed by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(o="The racer prior to you gains any relay effects you provide for <span class='keyword'>"+3*a+"</span>% of the normal length if possible."),0===e&&1===i&&(o="Increase Relay Animal's Acceleration Rate by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(o="Increase Burst Distance of next racer by <span class='keyword'>"+5*a+"</span>% of your Burst Distance on Relay."),2===e&&1===i&&(o="Increase Relay Animal's Stamina by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(o="Increase Burst Chance of next racer by <span class='keyword'>"+3*a+"</span>% of your Burst Chance on Relay."),0===e&&2===i&&(o="Increase Relay Animal's Power Efficiency by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(o="If Relay Animal ability has a cooldown, reduce it by <span class='keyword'>"+2*a+"</span>%."),2===e&&2===i&&(o="Increase Relay Animal's Focus Distance by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(o="Increase Relay Animal's Ability Efficiency by <span class='keyword'>"+2*a+"</span>%.")),r===vt.longDistance&&(0===e&&0===i&&(o="Increase Focus stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(o="Every burst increases Burst Velocity Bonus by <span class='keyword'>"+.5*a+"</span>% up to <span class='keyword'>"+10*a+"</span>%."),2===e&&0===i&&(o="Increase Focus Distance gain from Focus stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(o="Instead of reducing velocity to 10% when losing focus, reduce to <span class='keyword'>"+(10+2*a)+"</span>%."),0===e&&1===i&&(o="Increase Speed stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(o="While your velocity is 25% of your Max Speed or below, increase your Acceleration Rate by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===i&&(o="Increase Max Speed gain from Speed stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(o="After surpassing <span class='keyword'>"+.5*a+"</span>% of your Max Speed, your velocity can no longer drop below it. All calculations consider this to be 0% of your velocity."),0===e&&2===i&&(o="Increase Endurance stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(o="While stamina is below 35%, reduce stamina consumption by <span class='keyword'>"+5*a+"</span>%."),2===e&&2===i&&(o="Increase Stamina gain from Endurance stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(o="When running out of stamina, increase the percent regained by <span class='keyword'>"+2*a+"</span>%.")),o}getTalentUpgradeDescription(e,i,r,a){}getTotalPossiblePointsByRowColumn(e,i,r){var a=0;return r===vt.sprint&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),r===vt.support&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),r===vt.longDistance&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),a}getTalentPointsAvailableToAnimal(e){var i=0;return i=this.getResourceByName("Talent Points"),i+=e.miscStats.bonusTalents,(i-=e.talentTree.getTotalSpentPoints())<=0&&(i=0),i}gainMangoes(e){return new te("Mangoes",e,G.Food)}gainApples(e){return new te("Apples",e,G.Food)}gainBananas(e){return new te("Bananas",e,G.Food)}gainOranges(e){return new te("Oranges",e,G.Food)}gainStrawberries(e){return new te("Strawberries",e,G.Food)}gainTurnips(e){return new te("Turnips",e,G.Food)}gainCarrots(e){return new te("Carrots",e,G.Food)}gainCoins(e){return new te("Coins",e,G.Resources)}gainMedals(e){return new te("Medals",e,G.Resources)}gainTokens(e){return new te("Tokens",e,G.Resources)}}return t.\u0275fac=function(e){return new(e||t)(He(It),He(Rn),He(hs))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),An=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.totalTime=0,this.gameUpdateEvent=new bt}Update(){var e=Date.now();const i=(e-this.globalService.globalVar.lastTimeStamp)/1e3;this.deltaTime=i,this.totalTime+=i;var r=performance.now();this.globalService.globalVar.lastTimeStamp=e,this.gameUpdateEvent.emit(i),this.lastPerformanceNow=r,window.requestAnimationFrame(()=>this.Update())}}return t.\u0275fac=function(e){return new(e||t)(He(It),He(Ti))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class dc{constructor(n,e){this.transformationType=n,this.options=e,this.recursionStack=new Set}transform(n,e,i,r,a,o=0){if(Array.isArray(e)||e instanceof Set){const s=r&&this.transformationType===ci.PLAIN_TO_CLASS?function s4(t){const n=new t;return n instanceof Set||"push"in n?n:[]}(r):[];return e.forEach((l,c)=>{const u=n?n[c]:void 0;if(this.options.enableCircularCheck&&this.isCircular(l))this.transformationType===ci.CLASS_TO_CLASS&&(s instanceof Set?s.add(l):s.push(l));else{let f;if("function"!=typeof i&&i&&i.options&&i.options.discriminator&&i.options.discriminator.property&&i.options.discriminator.subTypes){if(this.transformationType===ci.PLAIN_TO_CLASS){f=i.options.discriminator.subTypes.find(C=>C.name===l[i.options.discriminator.property]);const y=i.typeFunction({newObject:s,object:l,property:void 0});f=void 0===f?y:f.value,i.options.keepDiscriminatorProperty||delete l[i.options.discriminator.property]}this.transformationType===ci.CLASS_TO_CLASS&&(f=l.constructor),this.transformationType===ci.CLASS_TO_PLAIN&&(l[i.options.discriminator.property]=i.options.discriminator.subTypes.find(b=>b.value===l.constructor).name)}else f=i;const v=this.transform(u,l,f,void 0,l instanceof Map,o+1);s instanceof Set?s.add(v):s.push(v)}}),s}if(i===String&&!a)return null==e?e:String(e);if(i===Number&&!a)return null==e?e:Number(e);if(i===Boolean&&!a)return null==e?e:Boolean(e);if((i===Date||e instanceof Date)&&!a)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(function a4(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}().Buffer&&(i===Buffer||e instanceof Buffer)&&!a)return null==e?e:Buffer.from(e);if(function o4(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}(e)&&!a)return new Promise((s,l)=>{e.then(c=>s(this.transform(void 0,c,i,void 0,void 0,o+1)),l)});if(!a&&null!==e&&"object"==typeof e&&"function"==typeof e.then)return e;if("object"==typeof e&&null!==e){!i&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(i=e.constructor)),!i&&n&&(i=n.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);const s=this.getKeys(i,e,a);let l=n||{};!n&&(this.transformationType===ci.PLAIN_TO_CLASS||this.transformationType===ci.CLASS_TO_CLASS)&&(l=a?new Map:i?new i:{});for(const c of s){if("__proto__"===c||"constructor"===c)continue;const u=c;let b,f=c,v=c;if(!this.options.ignoreDecorators&&i)if(this.transformationType===ci.PLAIN_TO_CLASS){const S=Fr.findExposeMetadataByCustomName(i,c);S&&(v=S.propertyName,f=S.propertyName)}else if(this.transformationType===ci.CLASS_TO_PLAIN||this.transformationType===ci.CLASS_TO_CLASS){const S=Fr.findExposeMetadata(i,c);S&&S.options&&S.options.name&&(f=S.options.name)}b=this.transformationType===ci.PLAIN_TO_CLASS?e[u]:e instanceof Map?e.get(u):e[u]instanceof Function?e[u]():e[u];let y,C=b instanceof Map;if(i&&a)y=i;else if(i){const S=Fr.findTypeMetadata(i,v);if(S){const w={newObject:l,object:e,property:v},B=S.typeFunction?S.typeFunction(w):S.reflectedType;S.options&&S.options.discriminator&&S.options.discriminator.property&&S.options.discriminator.subTypes?e[u]instanceof Array?y=S:(this.transformationType===ci.PLAIN_TO_CLASS&&(y=S.options.discriminator.subTypes.find(j=>{if(b&&b instanceof Object&&S.options.discriminator.property in b)return j.name===b[S.options.discriminator.property]}),y=void 0===y?B:y.value,S.options.keepDiscriminatorProperty||b&&b instanceof Object&&S.options.discriminator.property in b&&delete b[S.options.discriminator.property]),this.transformationType===ci.CLASS_TO_CLASS&&(y=b.constructor),this.transformationType===ci.CLASS_TO_PLAIN&&b&&(b[S.options.discriminator.property]=S.options.discriminator.subTypes.find(j=>j.value===b.constructor).name)):y=B,C=C||S.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(w=>w.target===i&&!!w.properties[v]).forEach(w=>y=w.properties[v]);else if(this.options.enableImplicitConversion&&this.transformationType===ci.PLAIN_TO_CLASS){const w=Reflect.getMetadata("design:type",i.prototype,v);w&&(y=w)}}const T=Array.isArray(e[u])?this.getReflectedType(i,v):void 0,M=n?n[u]:void 0;if(l.constructor.prototype){const S=Object.getOwnPropertyDescriptor(l.constructor.prototype,f);if((this.transformationType===ci.PLAIN_TO_CLASS||this.transformationType===ci.CLASS_TO_CLASS)&&(S&&!S.set||l[f]instanceof Function))continue}if(this.options.enableCircularCheck&&this.isCircular(b)){if(this.transformationType===ci.CLASS_TO_CLASS){let S=b;S=this.applyCustomTransformations(S,i,c,e,this.transformationType),(void 0!==S||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(f,S):l[f]=S)}}else{const S=this.transformationType===ci.PLAIN_TO_CLASS?f:c;let w;this.transformationType===ci.CLASS_TO_PLAIN?(w=e[S],w=this.applyCustomTransformations(w,i,S,e,this.transformationType),w=e[S]===w?b:w,w=this.transform(M,w,y,T,C,o+1)):void 0===b&&this.options.exposeDefaultValues?w=l[f]:(w=this.transform(M,b,y,T,C,o+1),w=this.applyCustomTransformations(w,i,S,e,this.transformationType)),(void 0!==w||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(f,w):l[f]=w)}}return this.options.enableCircularCheck&&this.recursionStack.delete(e),l}return e}applyCustomTransformations(n,e,i,r,a){let o=Fr.findTransformMetadatas(e,i,this.transformationType);return void 0!==this.options.version&&(o=o.filter(s=>!s.options||this.checkVersion(s.options.since,s.options.until))),o=o.filter(this.options.groups&&this.options.groups.length?s=>!s.options||this.checkGroups(s.options.groups):s=>!s.options||!s.options.groups||!s.options.groups.length),o.forEach(s=>{n=s.transformFn({value:n,key:i,obj:r,type:a,options:this.options})}),n}isCircular(n){return this.recursionStack.has(n)}getReflectedType(n,e){if(!n)return;const i=Fr.findTypeMetadata(n,e);return i?i.reflectedType:void 0}getKeys(n,e,i){let r=Fr.getStrategy(n);"none"===r&&(r=this.options.strategy||"exposeAll");let a=[];if(("exposeAll"===r||i)&&(a=e instanceof Map?Array.from(e.keys()):Object.keys(e)),i)return a;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&n&&(a=[...Fr.getExposedProperties(n,this.transformationType),...Fr.getExcludedProperties(n,this.transformationType)]),!this.options.ignoreDecorators&&n){let o=Fr.getExposedProperties(n,this.transformationType);this.transformationType===ci.PLAIN_TO_CLASS&&(o=o.map(l=>{const c=Fr.findExposeMetadata(n,l);return c&&c.options&&c.options.name?c.options.name:l})),a=this.options.excludeExtraneousValues?o:a.concat(o);const s=Fr.getExcludedProperties(n,this.transformationType);s.length>0&&(a=a.filter(l=>!s.includes(l))),void 0!==this.options.version&&(a=a.filter(l=>{const c=Fr.findExposeMetadata(n,l);return!c||!c.options||this.checkVersion(c.options.since,c.options.until)})),a=a.filter(this.options.groups&&this.options.groups.length?l=>{const c=Fr.findExposeMetadata(n,l);return!c||!c.options||this.checkGroups(c.options.groups)}:l=>{const c=Fr.findExposeMetadata(n,l);return!(c&&c.options&&c.options.groups&&c.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter(o=>this.options.excludePrefixes.every(s=>o.substr(0,s.length)!==s))),a=a.filter((o,s,l)=>l.indexOf(o)===s),a}checkVersion(n,e){let i=!0;return i&&n&&(i=this.options.version>=n),i&&e&&(i=this.options.version<e),i}checkGroups(n){return!n||this.options.groups.some(e=>n.includes(e))}}const hc={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},Ka=new class l4{instanceToPlain(n,e){return new dc(ci.CLASS_TO_PLAIN,pa(pa({},hc),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToPlainFromExist(n,e,i){return new dc(ci.CLASS_TO_PLAIN,pa(pa({},hc),i)).transform(e,n,void 0,void 0,void 0,void 0)}plainToInstance(n,e,i){return new dc(ci.PLAIN_TO_CLASS,pa(pa({},hc),i)).transform(void 0,e,n,void 0,void 0,void 0)}plainToClassFromExist(n,e,i){return new dc(ci.PLAIN_TO_CLASS,pa(pa({},hc),i)).transform(n,e,void 0,void 0,void 0,void 0)}instanceToInstance(n,e){return new dc(ci.CLASS_TO_CLASS,pa(pa({},hc),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToClassFromExist(n,e,i){return new dc(ci.CLASS_TO_CLASS,pa(pa({},hc),i)).transform(e,n,void 0,void 0,void 0,void 0)}serialize(n,e){return JSON.stringify(this.instanceToPlain(n,e))}deserialize(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}deserializeArray(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}};function T0(t,n,e){return Ka.plainToInstance(t,n,e)}let R0=(()=>{class t{constructor(e,i,r){this.globalService=e,this.utilityService=i,this.lookupService=r}getSpecializationPopoverText(e,i,r=!1){var a="";if(e===$t.TrainingFacility){a=i<=10?"Training Time Reduction: "+2*i+"%<br/>":"Training Time Reduction: 20%<br/> All Stat Multiplier: "+(i-10)/10+"<br/>";var o=0;if(this.globalService.globalVar.resources.find(Ke=>"Training Facility Improvements"===Ke.name)||r){var s=this.globalService.globalVar.modifiers.find(Ke=>"trainingFacilityAbilityXpAmountModifier"===Ke.text);if(void 0!==s){o=s.value;var l=60;null!=(c=this.globalService.globalVar.modifiers.find(Ke=>"attractionTimeToCollectModifier"===Ke.text))&&(l=c.value),a+="Ability XP: "+o*i+" / "+l+" seconds <br/>"}}}if(e===$t.BreedingGrounds){var u=0;if(this.globalService.globalVar.resources.find(Ke=>"Breeding Grounds Improvements"===Ke.name)||r){var f=this.globalService.globalVar.modifiers.find(Ke=>"breedingGroundsAdditionalAmountModifier"===Ke.text);void 0!==f&&(u=f.value)}var v=this.globalService.globalVar.modifiers.find(Ke=>"breedingGroundsSpecializationModifier"===Ke.text);null!=v&&(a="Training Breed XP Multipler: "+(i*(100*(v.value+u))).toFixed(0)+"%<br/>")}if(e===$t.Attraction){var c;l=60,null!=(c=this.globalService.globalVar.modifiers.find(qe=>"attractionTimeToCollectModifier"===qe.text))&&(l=c.value);var b=0;if(null!=this.globalService.globalVar.modifiers.find(qe=>"attractionAmountModifier"===qe.text))for(var C=1;C<=i;C++)b+=20*C;if(a="Amount Earned: "+b.toFixed(0)+" Coins / "+l+" seconds<br/>",this.globalService.globalVar.resources.find(qe=>"Attraction Improvements"===qe.name)||r){var M=this.globalService.globalVar.modifiers.find(qe=>"attractionRenownAmountModifier"===qe.text);null!=M&&(a+="Amount Earned: "+(M.value*i).toFixed(3)+" Renown / "+l+" seconds<br/>")}}else if(e===$t.ResearchCenter){var S=this.globalService.globalVar.modifiers.find(Ke=>"researchCenterIncrementsModifier"===Ke.text),w=this.globalService.globalVar.modifiers.find(Ke=>"researchCenterTrainingAnimalModifier"===Ke.text),B=this.globalService.globalVar.modifiers.find(Ke=>"researchCenterStudyingAnimalModifier"===Ke.text),j=this.globalService.globalVar.modifiers.find(Ke=>"researchCenterMaxStatGainModifier"===Ke.text);if(null==S||null==w||null==B||null==j)return"";var de=i*S.value,ue="Training Animal Stat Gain: "+(100*(w.value+de<j.value?w.value+de:j.value)).toFixed(0)+"%<br />",se=(de-(j.value-w.value))/(j.value-B.value);if(se>0?(Math.floor(se)>0&&(ue+="Additional Studying Animal Stat Gain (x"+Math.floor(se)+"): "+(100*j.value).toFixed(0)+"%<br />"),se>Math.floor(se)&&(ue+="Additional Studying Animal Stat Gain: "+(100*((se-Math.floor(se))*(j.value-B.value)+B.value)).toFixed(0)+"%<br />")):ue+="Additional Studying Animal Stat Gain: "+(100*B.value).toFixed(0)+"%<br />",this.globalService.globalVar.resources.find(Ke=>"Research Center Improvements"===Ke.name)||r){var ve=this.globalService.globalVar.modifiers.find(Ke=>"researchCenterRewardBonusAmountModifier"===Ke.text);null!=ve&&(ue+="Scrimmage & Coaching Reward Increase: "+(ve.value*i*100).toFixed(0)+"%<br />")}a=ue}var Oe=this.utilityService.getSanitizedHtml(a);return null!=Oe&&(a=Oe),a}handleResearchCenterStatIncrease(e,i){var r=this.globalService.globalVar.modifiers.find(j=>"researchCenterIncrementsModifier"===j.text),a=this.globalService.globalVar.modifiers.find(j=>"researchCenterTrainingAnimalModifier"===j.text),o=this.globalService.globalVar.modifiers.find(j=>"researchCenterStudyingAnimalModifier"===j.text),s=this.globalService.globalVar.modifiers.find(j=>"researchCenterMaxStatGainModifier"===j.text);if(null!=r&&null!=a&&null!=o&&null!=s&&null!=e.currentTraining){var T,c=i.barnUpgrades.specializationLevel*r.value,u=e.currentTraining.affectedStatRatios.topSpeed,f=e.currentTraining.affectedStatRatios.acceleration,v=e.currentTraining.affectedStatRatios.endurance,b=e.currentTraining.affectedStatRatios.power,y=e.currentTraining.affectedStatRatios.focus,C=e.currentTraining.affectedStatRatios.adaptability;e.increaseStats(new Ve((T=a.value+c<s.value?a.value+c:s.value)*u,T*f,T*v,T*b,T*y,T*C)),this.globalService.calculateAnimalRacingStats(e);var M=(c-(s.value-a.value))/(s.value-o.value),S=this.getAnimalsInRandomOrder(e.raceCourseType,e);if(M>0){S.length<M&&(M=S.length);for(var w=0;w<Math.floor(M);w++)S[w].increaseStats(new Ve(s.value*u,s.value*f,s.value*v,s.value*b,s.value*y,s.value*C)),this.globalService.calculateAnimalRacingStats(S[w]);if(M>Math.floor(M)&&S.length>w){var B=o.value+(M-Math.floor(M))*(s.value-o.value);S[w].increaseStats(new Ve(B*u,B*f,B*v,B*b,B*y,B*C)),this.globalService.calculateAnimalRacingStats(S[w])}}else S.length>=1&&(S[0].increaseStats(new Ve((B=o.value)*u,B*f,B*v,B*b,B*y,B*C)),this.globalService.calculateAnimalRacingStats(S[0]))}}getAnimalsInRandomOrder(e,i){for(var r=[],a=this.globalService.globalVar.animals.filter(u=>u.raceCourseType===e&&u.isAvailable&&u.type!==i.type),o=this.globalService.globalVar.animals.filter(u=>u.raceCourseType!==e&&u.isAvailable),s=a.length,l=0;l<s;l++){var c=this.utilityService.getRandomInteger(1,a.length);r.push(a[c-1]),a=a.filter(u=>u!==a[c-1])}for(s=o.length,l=0;l<s;l++)c=this.utilityService.getRandomInteger(1,o.length),r.push(o[c-1]),o=o.filter(v=>v!==o[c-1]);return r}handleTrainingFacilityImprovementsIncreases(e,i){var r=this.globalService.globalVar.barns.find(u=>u.barnNumber===i.associatedBarnNumber),a=this.globalService.globalVar.resources.find(u=>"Training Facility Improvements"===u.name);if(!(null==r||r.barnUpgrades.specialization!==$t.TrainingFacility||void 0===a||a.amount<=0)){var o=60,s=this.globalService.globalVar.modifiers.find(u=>"attractionTimeToCollectModifier"===u.text);null!=s&&(o=s.value);var l=0,c=this.globalService.globalVar.modifiers.find(u=>"trainingFacilityAbilityXpAmountModifier"===u.text);for(null!=c&&(l=c.value*r.barnUpgrades.specializationLevel),r.barnUpgrades.trainingFacilityDeltaTime+=e,null!==i.currentTraining&&r.barnUpgrades.trainingFacilityDeltaTime>=i.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.trainingFacilityDeltaTime=i.currentTraining.trainingTimeRemaining);r.barnUpgrades.trainingFacilityDeltaTime>=o;)r.barnUpgrades.trainingFacilityDeltaTime-=o,this.globalService.increaseAbilityXp(i,l,!1)}}handleAttractionRevenue(e,i){var r=this.globalService.globalVar.barns.find(y=>y.barnNumber===i.associatedBarnNumber);if(null!=r&&r.barnUpgrades.specialization===$t.Attraction){var a=60,o=this.globalService.globalVar.modifiers.find(y=>"attractionTimeToCollectModifier"===y.text);null!=o&&(a=o.value);var s=0;if(null!=this.globalService.globalVar.modifiers.find(y=>"attractionAmountModifier"===y.text))for(var c=1;c<=r.barnUpgrades.specializationLevel;c++)s+=20*c;var u=0;if(this.globalService.globalVar.resources.find(y=>"Attraction Improvements"===y.name)){var f=this.globalService.globalVar.modifiers.find(y=>"attractionRenownAmountModifier"===y.text);null!=f&&(u=f.value*r.barnUpgrades.specializationLevel)}for(r.barnUpgrades.currentDeltaTime+=e,null!==i.currentTraining&&r.barnUpgrades.currentDeltaTime>=i.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.currentDeltaTime=i.currentTraining.trainingTimeRemaining);r.barnUpgrades.currentDeltaTime>=a;){var b;r.barnUpgrades.currentDeltaTime-=a,void 0!==(b=this.globalService.globalVar.resources.find(y=>"Coins"===y.name))&&(b.amount+=s),u>0&&void 0!==(b=this.globalService.globalVar.resources.find(C=>"Renown"===C.name))&&(b.amount+=u)}}}}return t.\u0275fac=function(e){return new(e||t)(He(It),He(Rn),He(Ti))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ua=(()=>{return(t=ua||(ua={}))[t.None=0]="None",t[t.Stumble=1]="Stumble",t[t.LostFocus=2]="LostFocus",t[t.LostStamina=3]="LostStamina",t[t.Burst=4]="Burst",ua;var t})();let zf=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.lookupService=i,this.utilityService=r,this.initializeService=a,this.frameModifier=60,this.timeToComplete=60,this.currentLostFocusOpportunity=0,this.currentBurstOpportunity=0,this.tundraPreviousYAmount=0}runRace(e,i,r){this.existingOrbStats=this.globalService.globalVar.orbStats.makeCopy(),this.currentBurstOpportunity=0,this.currentLostFocusOpportunity=0,this.tundraPreviousYAmount=0,this.selectedRace=e;var a=new Bf,o=0,s=0,l=0,c=0,u=0;e.raceLegs.forEach(ee=>o+=ee.distance);var f=0;(0===e.timeToComplete||null==e.timeToComplete)&&(e.timeToComplete=60);var v=o/e.timeToComplete,b=this.globalService.globalVar.animalDecks.find(ee=>ee.isPrimaryDeck);void 0!==i&&i&&(b=this.globalService.globalVar.animalDecks.find(ee=>ee.autoRunFreeRace));var y=0;this.timeToComplete=e.timeToComplete;var C=[],T=[],M=ua.None,S=0,w=0,B=0,j=0,de=0,ne=0,ue=1,se=0,Ce=new At,Se=new At;if(void 0===b)return a.errorMessage="No relay team selected.",a;if(this.racingAnimals=this.lookupService.getAnimalsFromAnimalDeck(b),this.setupBraziers(),e.raceUI.distanceCoveredByFrame=[],e.raceUI.velocityByFrame=[],e.raceUI.timeToCompleteByFrame=[],e.raceUI.maxSpeedByFrame=[],e.raceUI.staminaPercentByFrame=[],e.raceUI.yAdjustmentByFrame=[],e.raceUI.racerEffectByFrame=[],e.raceUI.lavaFallPercentByFrame=[],e.raceUI.racePositionByFrame=[],e.timeToComplete<=300)a.addRaceUpdate(f,Math.round(e.timeToComplete)+" seconds are on the race clock.");else{var ve=this.globalService.getRemainingEventRaceTime()+this.globalService.globalVar.eventRaceData.bonusTime,Oe=this.utilityService.getHoursRemainingFromSeconds(ve),Ke=this.utilityService.getMinutesLeftInHourRemainingFromSeconds(ve),Ht=this.utilityService.getSecondsLeftInMinuteRemainingFromSeconds(ve),qe=Math.floor(Ht).toString(),ft=Oe.toString(),xt=Ke.toString();Oe<10&&(ft=Oe<1||Oe>59?"00":String(ft).padStart(2,"0")),Ke<10&&(xt=Ke<1||Ke>59?"00":String(xt).padStart(2,"0")),Ht<10&&(qe=Ht<1||Ht>59?"00":String(qe).padStart(2,"0")),a.addRaceUpdate(f,ft+":"+xt+":"+qe+" is left on the race clock.")}return e.raceLegs.forEach(ee=>{var R=null;if(null==(R=this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(pt=>pt.raceCourseType===ee.courseType)))return console.log(this.selectedRace),void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||(R.raceVariables=new qo,R.totalRacesRun+=1)}),this.globalService.globalVar.trackedStats.totalRaces+=1,e.raceLegs.forEach(ee=>{var R=void 0;if(null==(R=this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(Ze=>Ze.raceCourseType===ee.courseType)))return console.log(this.selectedRace),void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.increasePersistentAbilityXp(R);var pt=void 0;this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&this.globalService.globalVar.eventRaceData.previousRaceSegmentData.racingAnimalType===R.type&&(pt=this.globalService.globalVar.eventRaceData.previousRaceSegmentData);var _t=void 0,Ot=new Ji,ct="<span class='coloredText "+ee.getCourseTypeClass()+"'>"+R.name+"</span>",Ue="",tn="";if(w>0){var Ei=this.racingAnimals.find(Ze=>Ze.raceCourseType===e.raceLegs[w-1].courseType);null!=Ei&&(Ce=Ei)}else Ce=null;if(w<e.raceLegs.length-1){Ot=e.raceLegs[w+1];var Ai=this.racingAnimals.find(Ze=>Ze.raceCourseType===Ot.courseType);null!=Ai&&(Se=Ai,tn="<span class='coloredText "+Ot.getCourseTypeClass()+"'>"+(null==Se?void 0:Se.name)+"</span>")}else Se=null;this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&a.addRaceUpdate(f,ct+" clears "+Math.round(this.selectedRace.length).toLocaleString()+" meters of the Grand Prix and moves onto the next leg of the race.");var hi=ee.terrain.maxSpeedModifier,Pi=ee.terrain.accelerationModifier,vi=ee.terrain.staminaModifier,fi=ee.terrain.powerModifier,mn=ee.terrain.focusModifier,mt=ee.terrain.adaptabilityModifier;if(f<this.timeToComplete*this.frameModifier){if(T.length>0&&void 0!==(_t=T[T.length-1])&&(Ue="<span class='coloredText "+_t.getCourseTypeClass()+"'>"+(null==Ce?void 0:Ce.name)+"</span>"),this.getPrelayEffects(R,Se,null==Ot?void 0:Ot.terrain,1,a,f,Ue,Ot,ee),this.selectedRace.raceType!==ge.event||this.selectedRace.eventRaceType!==Xe.grandPrix||!this.globalService.globalVar.eventRaceData.animalAlreadyPrepped){var mi=[];this.racingAnimals.forEach(Ze=>{this.selectedRace.raceLegs.some(al=>al.courseType===Ze.raceCourseType)&&mi.push(Ze)}),this.PrepareRacingAnimal(a,f,Ue,R,C,ee,_t,void 0,void 0,l,u,c,mi)}this.prepareRacingLeg(ee,R),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix||a.addRaceUpdate(f,ct+" starts their leg of the race.")}var Gt=R.currentStats.stamina,wt=0,Ui=ee.distance,ai=new Sn,oi=new Sn,ji=!1,Bi=0,Ni={permanentAdaptabilityIncreaseMultiplier:0},gn={permanentMaxSpeedIncreaseMultiplier:0},$i=1,Gn=1,zn={coldBloodedIncreaseMultiplier:1},Dr=1,bn=[],dn=[],ke=1,ut=!1,nr=0,ws=[!1,!1,!1,!1,!1],fa=!1,xr=0,Ea=!1,lr=0,kr=0,Kr=0,cr=0,Do=0,pr=0;if(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix){var _n=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime();Do+=v*_n,pr=this.globalService.globalVar.eventRaceData.distanceCovered}s+pr>v*(f/this.frameModifier)+Do?(ut||(_d=!0),ut=!0):(ut&&(_d=!0),ut=!1),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(ke=this.globalService.getAnimalStatLossFromExhaustionEventRace(R))<1&&(R.raceVariables.ranOutOfStamina=!0),null!=pt&&(wt=pt.velocity,R.currentStats.stamina=pt.stamina,j=pt.deepBreathingStaminaGain,Bi=pt.permanentMaxSpeedIncreaseMultiplier,Ni.permanentAdaptabilityIncreaseMultiplier=pt.permanentAdaptabilityIncreaseMultiplier,gn.permanentMaxSpeedIncreaseMultiplier=pt.permanentMaxSpeedIncreaseObjMultiplier,$i=pt.feedingFrenzyIncreaseMultiplier,Gn=pt.greatMigrationAccelerationIncreaseAdditive,zn.coldBloodedIncreaseMultiplier=pt.coldBloodedIncreaseMultiplier,Dr=pt.fleetingSpeedIncreaseMultiplier,kr=pt.whalePowerStored,cr=pt.pathsClearedWithoutLosingFocus,R.raceVariables=pt.raceVariables.makeCopy(),pt.nineTailsBuffs.length>0&&pt.nineTailsBuffs.forEach(Ze=>{bn.push(Ze)}),pt.grazeBuffs.length>0&&pt.grazeBuffs.forEach(Ze=>{dn.push(Ze)}),pt.relayEffects.length>0&&pt.relayEffects.forEach(Ze=>{null!=R&&(R.raceVariables.relayEffects.push(Ze),null!=R.raceVariables.relayEffects&&R.raceVariables.relayEffects.length>0&&R.raceVariables.relayEffects.forEach(al=>{al.effectType!==tt.supportStaminaRelay&&al.effectType!==tt.yellowBaton&&(al.isMultiplicative?R.currentStats.multiplyCurrentRacingStats(al.relayAffectedStatRatios):R.currentStats.addCurrentRacingStats(al.relayAffectedStatRatios))}))}),fa=pt.longDistanceTalentIncreaseAccelerationWithLowVelocity,xr=pt.maxSpeedFloor,ke=pt.statLossFromExhaustion);var dr=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,tt.camouflage);void 0!==dr&&void 0!==dr.additionalValue&&(de=dr.additionalValue);var Fi=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,tt.herdMentality);void 0!==Fi&&void 0!==Fi.additionalValue&&(B=Fi.additionalValue);var J,qi=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,tt.specialDelivery);void 0!==qi&&void 0!==qi.additionalValue&&(ne=qi.additionalValue),"Nap"===R.ability.name&&R.type===L.Hare&&((J=ee.distance-this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke))<0&&(J=0),R.ability.remainingLength=J),"Buried Treasure"===R.ability.name&&R.type===L.Octopus&&((J=ee.distance-this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke))<0&&(J=0),R.ability.remainingLength=J);var Z=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,tt.deepBreathing);if(void 0!==Z&&void 0!==Z.additionalValue){var bi=R.raceVariables.relayEffects.filter(Ze=>Ze.effectType===tt.deepBreathing);void 0!==bi&&bi.forEach(Ze=>{void 0!==Ze.additionalValue&&(j=Ze.additionalValue),j>0&&R.type!==L.Goat&&(R.currentStats.stamina+=j)})}void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Qi[Qi.exhaustionPenaltyIncreased])&&(R.currentStats.stamina/=2);for(var Vi=f;Vi<=this.timeToComplete*this.frameModifier;Vi++){nr+=1,M=ua.None;var hn=!1,xo=0;if(y>0)for(var Na=0;Na<y;Na++)xo+=e.raceLegs[Na].distance;v=this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime):o/this.timeToComplete;var gr=s-xo,xn=0,Qo=!1,no=0;if(ee.pathData.forEach(Ze=>{!Qo&&gr>=no&&gr<no+Ze.length&&(Qo=!0,ai=Ze,xn=gr-no),Ze.legStartingDistance=no,no+=Ze.length,Qo||(oi=Ze)}),"Feeding Frenzy"===R.ability.name&&R.type===L.Shark){var tl=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke);if(gr<=tl||gr>=ee.distance-tl){$i=1.5;var fd=this.globalService.globalVar.modifiers.find(Ze=>"feedingFrenzyPositiveModifier"===Ze.text);void 0!==fd&&($i=fd.value)}else $i=1}B>0&&(R.raceVariables.isBursting=!0,hn=!0,R.currentStats.stamina+=B,B=0,null!=Ce&&(Ce.ability.abilityUsed=!0)),"Navigator"===R.ability.name&&R.type===L.Dolphin&&(R.ability.abilityInUse=!1),R.type===L.Fox&&"Fleeting Speed"===R.ability.name&&!R.ability.abilityUsed&&(Dr+=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke),R.ability.abilityUsed=!0),R.type===L.Dolphin&&"Echolocation"===R.ability.name&&(R.ability.abilityInUse?(ee.terrain.maxSpeedModifier<1&&(ee.terrain.maxSpeedModifier=1),ee.terrain.accelerationModifier<1&&(ee.terrain.accelerationModifier=1),ee.terrain.staminaModifier<1&&(ee.terrain.staminaModifier=1),ee.terrain.powerModifier<1&&(ee.terrain.powerModifier=1),ee.terrain.focusModifier<1&&(ee.terrain.focusModifier=1),ee.terrain.adaptabilityModifier<1&&(ee.terrain.adaptabilityModifier=1)):(ee.terrain.maxSpeedModifier=hi,ee.terrain.accelerationModifier=Pi,ee.terrain.staminaModifier=vi,ee.terrain.powerModifier=fi,ee.terrain.focusModifier=mn,ee.terrain.adaptabilityModifier=mt,this.checkForBlinders(ee,R))),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?(ji=!1,ai===ee.pathData[ee.pathData.length-1]&&this.globalService.globalVar.eventRaceData.animalData.some(Ze=>Ze.isSetToRelay)&&(ji=!0)):ji=ai===ee.pathData[ee.pathData.length-1];var Cs=this.getModifiedAdaptability(R,Ni,ke,bn,dn,ee,gr,Se,Ot,a,f,ct,tn),il=this.getModifiedFocus(R,ke,bn,dn,zn),Ki=this.didAnimalStumble(R,ai,xn,ee.terrain,Ni,Cs,ke,f,ct,a),MD=this.didAnimalLoseFocus(R,this.timeToComplete,e.length,s,ee.terrain,ke,zn,ai,il);if(MD){if(R.raceVariables.lostFocus=!0,R.raceVariables.hasLostFocusDuringRace=!0,R.raceVariables.currentLostFocusLength=R.raceVariables.defaultLostFocusLength,R.raceVariables.metersSinceLostFocus=0,S=wt,this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix){var AD=.02,tb=this.globalService.globalVar.modifiers.find(Ze=>"focusMoraleLossModifier"===Ze.text);null!=tb&&(AD=tb.value),this.globalService.changeGrandPrixMorale(R.type,-AD)}if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(St[St.unfocused])&&(R.currentStats.focusMs*=.75),"Night Vision"===R.ability.name&&R.type===L.Gecko&&(Bi=0),R.getEquippedItemName()===this.globalService.getEquipmentName(ht.scaryMask)&&ut&&!R.raceVariables.scaryMaskEffectOccurred){R.raceVariables.scaryMaskEffectOccurred=!0;var ib=2,PD=this.globalService.globalVar.modifiers.find(Ze=>"scaryMaskEquipmentModifier"===Ze.text);void 0!==PD&&(ib=PD.value),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=ib:this.timeToComplete+=ib}a.addRaceUpdate(f,ct+" is distracted and lost focus!")}if(Ki){if(R.raceVariables.stumbled=!0,R.raceVariables.currentStumbledLength=R.raceVariables.defaultStumbledLength,S=wt,this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix){var VD=.02,nb=this.globalService.globalVar.modifiers.find(Ze=>"stumbleMoraleLossModifier"===Ze.text);null!=nb&&(VD=nb.value),this.globalService.changeGrandPrixMorale(R.type,-VD)}a.addRaceUpdate(f,ct+" stumbles!")}if(0===R.currentStats.stamina){var Cc=.9,ID=this.globalService.globalVar.modifiers.find(Ze=>"exhaustionStatLossModifier"===Ze.text);if(void 0!==ID&&(Cc=ID.value),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix){var rb=1-Cc;Cc=1-(rb*=1/this.lookupService.getAnimalMorale(R.type))}void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Qi[Qi.exhaustionPenaltyIncreased])&&(Cc=1-2*(1-Cc)),ke*=Cc;var ab=.3,OD=this.globalService.globalVar.modifiers.find(Ze=>"exhaustionStatLossMinimumModifier"===Ze.text);void 0!==OD&&(ab=OD.value),ke<ab&&(ke=ab),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.setStaminaLossForEventAnimal(ke,R.type);var sp=.5;if(R.talentTree.talentTreeType===vt.longDistance&&(sp+=.02*R.talentTree.column3Row4Points),R.getEquippedItemName()===this.globalService.getEquipmentName(ht.quickSnack)){sp=1;var ED=this.globalService.globalVar.modifiers.find(Ze=>"quickSnackEquipmentModifier"===Ze.text);void 0!==ED&&(sp=ED.value)}R.currentStats.stamina=Gt*sp,a.addRaceUpdate(f,ct+" runs out of stamina and must slow down.")}if(R.raceVariables.lostFocus||R.raceVariables.stumbled||Ea){if(R.raceVariables.lostFocus){M=ua.LostFocus;var ND=.9;R.talentTree.talentTreeType===vt.longDistance&&(ND-=.02*R.talentTree.column1Row4Points);var ob=S*ND,sb=1-xr/R.currentStats.maxSpeedMs;wt>xr&&(wt-=ob*sb/R.raceVariables.defaultLostFocusLength),R.raceVariables.currentLostFocusLength-=1,0===R.raceVariables.currentLostFocusLength&&(R.raceVariables.lostFocus=!1,R.type===L.Warthog&&"Mud Pit"===R.ability.name&&(a.addRaceUpdate(f,ct+" finds a mud pit and can't help but roll in it."),R.ability.abilityInUse=!0,Ea=!0,S=wt,wt=0,R.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke),this.globalService.increaseAbilityXp(R,void 0,this.selectedRace.raceType===ge.trainingTrack)))}if(R.raceVariables.stumbled&&(M=ua.Stumble,ob=S-S*ai.stumbleSeverity,sb=1-xr/R.currentStats.maxSpeedMs,wt>xr&&(wt-=ob*sb/R.raceVariables.defaultStumbledLength),R.raceVariables.currentStumbledLength-=1,0===R.raceVariables.currentStumbledLength&&(R.raceVariables.stumbled=!1)),Ea){var BD=e.length/this.timeToComplete;lr<this.frameModifier/4||lr>=3*this.frameModifier/4?wt+=BD/this.frameModifier:wt-=BD/this.frameModifier,(lr+=1)===this.frameModifier&&(Ea=!1,lr=0,wt=S)}}else{var Nn=R.currentStats.accelerationMs;if(Nn*=ee.terrain.accelerationModifier,Nn*=ke,void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(St[St.sticky])&&(Nn*=1-s/this.selectedRace.length*.8),R.type===L.Horse&&"Pacemaker"===R.ability.name&&R.ability.abilityInUse&&(Nn*=1.5),R.type===L.Cheetah&&"Sprint"===R.ability.name&&R.ability.abilityInUse&&(Nn*=1.35),R.type===L.Cheetah&&"Giving Chase"===R.ability.name&&!ut&&(Nn+=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke)),"Feeding Frenzy"===R.ability.name&&R.type===L.Shark&&(Nn*=$i),R.type===L.Caribou&&"Great Migration"===R.ability.name&&(Nn+=Gn),"Wild Toboggan"===R.ability.name&&R.type===L.Penguin&&R.ability.abilityInUse){var AW=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke),nl=20,FD=this.globalService.globalVar.modifiers.find(Ze=>"maxDriftAmountModifier"===Ze.text);void 0!==FD&&(nl=FD.value),(Sc=ai.driftAmount)>(nl*=2)&&(Sc=nl),Nn+=AW*(Math.abs(Sc)/nl),R.ability.abilityInUse=!0}"Nap"===R.ability.name&&R.type===L.Hare&&(R.ability.remainingLength-=v*(1/this.frameModifier),R.ability.remainingLength<=0&&(R.ability.remainingLength=0),R.ability.remainingLength>0&&(Nn=0)),"Buried Treasure"===R.ability.name&&R.type===L.Octopus&&(R.ability.remainingLength-=v*(1/this.frameModifier),R.ability.remainingLength<=0&&(R.ability.remainingLength=0),R.ability.remainingLength>0&&(Nn=0)),R.type===L.Salamander&&"Heat Up"===R.ability.name&&R.ability.abilityInUse&&(Nn*=1+.15*R.ability.totalUseCount),R.type===L.Fox&&"Trickster"===R.ability.name&&"Acceleration"===R.ability.tricksterStatLoss&&R.ability.abilityInUse&&(Nn*=.75),R.type===L.Fox&&"Trickster"===R.ability.name&&"Acceleration"===R.ability.tricksterStatGain&&R.ability.abilityInUse&&(Nn*=1.5),R.type===L.Fox&&"Nine Tails"===R.ability.name&&(Nn*=1+.15*this.getNineTailsBuffCount("Acceleration",bn)),R.type===L.Warthog&&"Graze"===R.ability.name&&(Nn*=1+.1*this.getGrazeBuffCount("Acceleration",dn)),R.type===L.Whale&&"Whalesong"===R.ability.name&&(3===R.ability.totalUseCount||R.ability.totalUseCount>5)&&R.ability.abilityInUse&&(Nn*=1.3),R.getEquippedItemName()===this.globalService.getEquipmentName(ht.athleticTape)&&R.raceVariables.isBursting&&(Nn*=.5),fa&&(Nn*=1+.05*R.talentTree.column2Row2Points),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Je[Je.strongWinds])&&(R.raceCourseType===F.Tundra||R.raceCourseType===F.Ocean)&&(Nn*=.5),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(St[St.highSpeedLowAcceleration])&&(Nn*=.1),wt+=Nn/this.frameModifier}wt<0&&!Ea&&(wt=0);var Si=R.currentStats.maxSpeedMs;if(Si*=ee.terrain.maxSpeedModifier,Si*=ke,void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Qi[Qi.reduceSpeedOnRelay])&&(Si*=1-.2*this.racingAnimals.indexOf(R)),R.type===L.Cheetah&&"Sprint"===R.ability.name&&R.ability.abilityInUse&&(Si*=1.35),R.type===L.Cheetah&&"On The Hunt"===R.ability.name&&R.ability.abilityInUse&&(Si+=Bi),"Nap"===R.ability.name&&R.type===L.Hare&&(Si*=2),ut&&R.type===L.Shark&&"Blood In The Water"===R.ability.name&&(Si+=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke)),null!==Se&&Se.type===L.Shark&&"Feeding Frenzy"===Se.ability.name||null!==Ce&&Ce.type===L.Shark&&"Feeding Frenzy"===Ce.ability.name){var LD=.9,UD=this.globalService.globalVar.modifiers.find(Ze=>"feedingFrenzyNegativeModifier"===Ze.text);void 0!==UD&&(LD=UD.value),Si*=LD}if("Feeding Frenzy"===R.ability.name&&R.type===L.Shark&&(Si*=$i),"Quick Toboggan"===R.ability.name&&R.type===L.Penguin&&(Si+=gn.permanentMaxSpeedIncreaseMultiplier),R.type===L.Gecko&&"Night Vision"===R.ability.name&&(Si+=Bi),R.type===L.Fox&&"Trickster"===R.ability.name&&"Max Speed"===R.ability.tricksterStatLoss&&R.ability.abilityInUse&&(Si*=.75),R.type===L.Fox&&"Trickster"===R.ability.name&&"Max Speed"===R.ability.tricksterStatGain&&R.ability.abilityInUse&&(Si*=1.5),R.type===L.Fox&&"Fleeting Speed"===R.ability.name){var pd=Dr;(pd-=.02*Math.floor(gr/ee.distance*100)*(pd-1))<1&&(pd=1),Si+=pd}if(R.type===L.Fox&&"Nine Tails"===R.ability.name&&(Si*=1+.15*this.getNineTailsBuffCount("Max Speed",bn)),R.type===L.Warthog&&"Graze"===R.ability.name&&(Si*=1+.1*this.getGrazeBuffCount("Max Speed",dn)),R.type===L.Whale&&"Whalesong"===R.ability.name&&R.ability.totalUseCount>=5&&R.ability.abilityInUse&&(Si*=1.3),R.type===L.Whale&&"Storing Power"===R.ability.name&&(R.ability.abilityInUse&&(Kr=.1*Si,Si*=.9),Si+=kr),R.talentTree.talentTreeType===vt.sprint&&(Si*=1+.005*R.talentTree.column2Row4Points*R.raceVariables.velocityReachesMaxSpeedCount),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(St[St.highSpeedLowAcceleration])&&(Si*=5),xr=0,R.talentTree.talentTreeType===vt.longDistance&&(wt>Si*(.005*R.talentTree.column2Row4Points)&&(R.raceVariables.velocityExceedsMaxSpeedFloorRequirement=!0),R.raceVariables.velocityExceedsMaxSpeedFloorRequirement&&(xr+=Si*(.005*R.talentTree.column2Row4Points))),R.type===L.Whale&&"Unparalleled Focus"===R.ability.name&&R.ability.abilityInUse&&(xr+=.2*Si),R.getEquippedItemName()===this.globalService.getEquipmentName(ht.incense)){var HD=.9,GD=this.globalService.globalVar.modifiers.find(Ze=>"incenseEquipmentModifier"===Ze.text);void 0!==GD&&(HD=GD.value),wt>=Si*HD&&(wt=Si)}fa=R.talentTree.talentTreeType===vt.longDistance&&wt<=.25*Si,wt>Si&&(wt=Si,R.talentTree.talentTreeType===vt.sprint&&R.raceVariables.velocityReachesMaxSpeedCount<10&&(R.raceVariables.velocityReachesMaxSpeedCount+=1)),ai.checkedForBurst||("Night Vision"===R.ability.name&&R.type===L.Gecko&&!oi.didAnimalLoseFocus&&oi.length>0&&(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCap||(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount+=1),Bi+=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke),this.globalService.increaseAbilityXp(R,void 0,this.selectedRace.raceType===ge.trainingTrack),R.ability.abilityInUse=!0)),oi.didAnimalLoseFocus?cr=0:cr+=1,cr>=3&&R.type===L.Whale&&"Unparalleled Focus"===R.ability.name&&(R.ability.abilityInUse=!0,R.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke),this.globalService.increaseAbilityXp(R,void 0,this.selectedRace.raceType===ge.trainingTrack),a.addRaceUpdate(f,ct+"'s immense focus prevents their velocity from dropping too low."),cr=0),void 0!==oi&&void 0!==oi.routeDesign&&oi.routeDesign!==Ge.Regular&&!oi.didAnimalStumble&&(null!=R.equippedOrb&&this.selectedRace.raceType!==ge.trainingTrack&&this.globalService.getOrbTypeFromResource(R.equippedOrb)===Be.emerald&&this.globalService.increaseEmeraldOrbXp(oi.length,R),R.type===L.Goat&&"Sure-footed"===R.ability.name&&(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCap||(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount+=1),Ni.permanentAdaptabilityIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke),this.globalService.increaseAbilityXp(R,void 0,this.selectedRace.raceType===ge.trainingTrack)))));var lp=this.doesRacerMiniBurst(R,oi),cp=this.doesRacerBurst(R,ai,this.timeToComplete,e.length,s,Cs,il);if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Qi[Qi.noBurst])&&(lp=!1,cp=!1,hn=!1),cp||lp||hn){if(R.raceVariables.isBursting=!0,(cp||hn)&&(R.raceVariables.remainingBurstMeters+=this.getBurstDistance(R,ee.terrain.powerModifier,ke,dn)),lp&&(R.raceVariables.remainingBurstMeters+=this.getBurstDistance(R,ee.terrain.powerModifier,ke,dn)*(.05*R.talentTree.column1Row4Points)),R.raceVariables.burstCount+=1,this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix){var zD=.02,cb=this.globalService.globalVar.modifiers.find(Ze=>"burstMoraleBoostModifier"===Ze.text);null!=cb&&(zD=cb.value),this.globalService.changeGrandPrixMorale(R.type,zD)}if(R.type===L.Monkey&&"Frenzy"===R.ability.name&&(R.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke),this.globalService.increaseAbilityXp(R,void 0,this.selectedRace.raceType===ge.trainingTrack)),R.type===L.Goat&&"In The Rhythm"===R.ability.name&&(R.ability.abilityInUse=!0,R.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke)),R.type===L.Hare&&"Prey Instinct"===R.ability.name&&!R.ability.abilityUsed&&(R.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke),R.ability.abilityUsed=!0),R.type===L.Whale&&"Storing Power"===R.ability.name&&R.ability.abilityInUse&&(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.storingPowerUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.storingPowerUseCap||(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.storingPowerUseCount+=1),kr+=Kr)),R.type===L.Octopus&&"Big Brain"===R.ability.name&&!(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCap)){var IW=Math.round(ee.pathData.length/3);if(R.raceVariables.burstCount===IW){this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount+=1),a.addRaceUpdate(f,ct+" uses "+(null==R?void 0:R.ability.name)+".");var OW=1+this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke)/100,EW=this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;this.AddRelayEffect(new At,R,EW,new Ve(1,1,1,OW,1,1),!1,tt.bigBrain,!0);var jD=4,$D=this.globalService.globalVar.modifiers.find(Ze=>"relayAbilityXpGainModifier"===Ze.text);void 0!==$D&&(jD=$D.value),this.globalService.increaseAbilityXp(R,jD,this.selectedRace.raceType===ge.trainingTrack)}}if((cp||hn)&&a.addRaceUpdate(f,"<strong>BURST!</strong> "+ct+" is breaking their limit!"),lp&&a.addRaceUpdate(f,"<strong>MINI BURST!</strong> "+ct+" is breaking their limit!"),R.type!==L.Cheetah||"On The Hunt"!==R.ability.name||this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCap||(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount+=1),Bi+=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke),this.globalService.increaseAbilityXp(R,void 0,this.selectedRace.raceType===ge.trainingTrack),R.ability.abilityInUse=!0),R.type===L.Goat&&"Deep Breathing"===R.ability.name){var Tc=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke);R.currentStats.stamina+=Tc,a.addRaceUpdate(f,ct+" uses "+R.ability.name+"."),R.currentStats.stamina>Gt&&(tl=0,(Tc=R.currentStats.stamina-Gt)>Gt&&(Tc=Gt),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCap||(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(Tc*=.2,this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount+=1),this.AddRelayEffect(new At,R,tl,new Ve(0,0,0,0,0,0),!1,tt.deepBreathing,!0,Tc)),R.currentStats.stamina=Gt),this.globalService.increaseAbilityXp(R,void 0,this.selectedRace.raceType===ge.trainingTrack)}}var Gr=wt;if(de>0){var ub=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,tt.camouflage);if(void 0!==ub&&void 0!==ub.additionalValue){var db=gr/ub.remainingRelayMeters;db>1&&(db=1),(Gr+=(1-db)*de)>1.5*Si&&(Gr=1.5*Si)}}if(R.raceVariables.isBursting){M=ua.Burst;var gd=1.25;if(R.type===L.Goat&&"In The Rhythm"===R.ability.name&&R.ability.abilityInUse&&(gd+=.5),gd+=ne,R.talentTree.talentTreeType===vt.longDistance){var hb=R.raceVariables.burstCount*(.005*R.talentTree.column1Row2Points);hb>1&&(hb=1),gd+=hb}R.raceVariables.remainingBurstMeters>=Gr/this.frameModifier?(R.raceVariables.remainingBurstMeters-=(Gr*=gd)/this.frameModifier,R.raceVariables.remainingBurstMeters<0&&(Gr+=R.raceVariables.remainingBurstMeters,R.raceVariables.remainingBurstMeters=0)):(Gr-=R.raceVariables.remainingBurstMeters,Gr+=R.raceVariables.remainingBurstMeters*gd,R.raceVariables.remainingBurstMeters=0,R.raceVariables.isBursting=!1,a.addRaceUpdate(f,ct+"'s burst ends.")),R.talentTree.talentTreeType===vt.sprint&&!R.raceVariables.velocityExceedsMaxSpeedDuringBurst&&Gr>Si&&R.raceVariables.isBursting&&(R.raceVariables.remainingBurstMeters+=R.raceVariables.remainingBurstMeters*(.05*R.talentTree.column2Row2Points),R.raceVariables.velocityExceedsMaxSpeedDuringBurst=!0)}var vr=Gr/this.frameModifier;if(R.ability.abilityInUse&&(R.type===L.Monkey&&"Leap"===R.ability.name||R.type===L.Octopus&&"Propulsion"===R.ability.name)){var BW=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke);vr+=BW/R.ability.totalFrames,R.ability.remainingFrames-=1,R.ability.remainingFrames<=0&&(R.ability.abilityInUse=!1)}if(ee.courseType===F.Tundra){var Sc;if(this.handleTundraDrift(R,ai,oi,ji,Cs,ee.terrain,xn,vr,ke,gn,a,ct,f))vr=0,wt=0,a.addRaceUpdate(f,ct+" slides into a wall and loses all momentum!");else if((Sc=Math.abs(ai.driftAmount))<=(nl=20)&&!ji){var qD=1-Sc/100;vr*=qD,Si*=qD}this.tundraPreviousYAmount=R.raceVariables.icyCurrentYAmount}ee.courseType===F.Volcanic?this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?this.selectedRace.raceUI.lavaFallPercentByFrame.push([0,0,0,0,0]):this.handleLavaFall(R,nr,e.length/this.timeToComplete,gr,ee.distance,a,f,ws)&&(this.timeToComplete=f/this.frameModifier):this.selectedRace.raceLegs.some(Ze=>Ze.courseType===F.Volcanic)&&this.selectedRace.raceUI.lavaFallPercentByFrame.push(this.selectedRace.raceUI.lavaFallPercentByFrame.length>0&&null!=this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]&&this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]>0?this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1]:[0,0,0,0,0]),s+=vr>Ui?Ui:vr,Ui-=vr,this.giveOrbXpBasedOnMeters(vr,R,wt,Si);var rl=1e5;this.timeToComplete*this.frameModifier>2e4&&(rl=1e4);var fb=1e5;if(this.timeToComplete*this.frameModifier>2e4&&(fb=1e3),e.raceUI.distanceCoveredByFrame.push(Math.round(s*fb)/fb),e.raceUI.velocityByFrame.push(Math.round(vr*rl)/rl),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix||e.raceUI.timeToCompleteByFrame.push(this.timeToComplete),e.raceUI.maxSpeedByFrame.push(Math.round(Si*rl)/rl),e.raceUI.staminaPercentByFrame.push(Math.round(R.currentStats.stamina/Gt*rl)/rl),e.raceUI.racerEffectByFrame.push(M),this.handleRacePositionByFrame(e,v,f,this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+s:s),this.handleStamina(R,a,vr,f,ee.terrain,Gt,gr,ee,zn,this.selectedRace.raceLegs[this.selectedRace.raceLegs.length-1].courseType,ai,xn),R.raceVariables.forceRelay&&(Ui=0),null!=this.selectedRace.drawnObjects&&this.selectedRace.drawnObjects.length>0&&this.handleBrazierLighting(Vi,s),MD||(R.raceVariables.metersSinceLostFocus+=vr),R.type===L.Fox&&"Nine Tails"===R.ability.name&&(this.checkForNineTailsBuff(ai,bn,R,ee,ke,a,f,ct),bn.length>0&&(bn.forEach(Ze=>{Ze[1]-=vr}),bn=bn.filter(Ze=>Ze[1]>0))),R.type===L.Warthog&&"Graze"===R.ability.name&&dn.length>0&&(dn.forEach(Ze=>{Ze[1]-=vr}),dn=dn.filter(Ze=>Ze[1]>0)),R.ability.abilityInUse&&R.ability.remainingLength>0&&(R.ability.remainingLength-=vr,R.type===L.Gecko&&"Camouflage"===R.ability.name&&(R.ability.remainingLength-=vr),R.ability.remainingLength<=0)){if(R.ability.abilityInUse=!1,R.ability.currentCooldown=R.ability.cooldown,R.getEquippedItemName()===this.globalService.getEquipmentName(ht.pendant)){var md=.9;void 0!==(bd=this.globalService.globalVar.modifiers.find(Ze=>"pendantEquipmentModifier"===Ze.text))&&(md=bd.value),R.ability.currentCooldown*=md}if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(St[St.longCooldowns])&&(R.ability.currentCooldown*=2),null!=R.raceVariables&&null!=R.raceVariables.relayEffects&&R.raceVariables.relayEffects.length>0){var pb=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,tt.supportAbilityCooldown);void 0!==pb&&void 0!==pb.additionalValue&&(R.ability.currentCooldown*=pb.additionalValue)}}if(null!=R.ability.currentCooldown&&R.ability.currentCooldown<=0&&this.abilityRedundancyCheck(R,wt,ai,ee,Ui,ke)){var bd;if(this.useAbility(R,e,ee,ke,Gt,gr,zn,dn,a,f,ct),(Zr=new X).value=f,R.type===L.Fox&&"Trickster"===R.ability.name?Zr.text=R.getAbilityUseUpdateText(ct,", gaining "+R.ability.tricksterStatGain+" but losing "+R.ability.tricksterStatLoss):R.type===L.Whale&&"Whalesong"===R.ability.name?1===R.ability.totalUseCount?Zr.text=R.getAbilityUseUpdateText(ct," (Adaptability)"):2===R.ability.totalUseCount?Zr.text=R.getAbilityUseUpdateText(ct," (Burst Distance)"):3===R.ability.totalUseCount?Zr.text=R.getAbilityUseUpdateText(ct," (Acceleration)"):4===R.ability.totalUseCount?Zr.text=R.getAbilityUseUpdateText(ct," (Focus)"):5===R.ability.totalUseCount?Zr.text=R.getAbilityUseUpdateText(ct," (Max Speed)"):R.ability.totalUseCount>5&&(Zr.text=R.getAbilityUseUpdateText(ct," (All)")):Zr.text=R.getAbilityUseUpdateText(ct),R.type===L.Warthog&&"Graze"===R.ability.name||a.raceUpdates.push(Zr),R.ability.currentCooldown=R.ability.cooldown,R.getEquippedItemName()===this.globalService.getEquipmentName(ht.pendant))md=.9,void 0!==(bd=this.globalService.globalVar.modifiers.find(jW=>"pendantEquipmentModifier"===jW.text))&&(md=bd.value),R.ability.currentCooldown*=md;if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(St[St.longCooldowns])&&(R.ability.currentCooldown*=2),R.type===L.Caribou&&"Great Migration"===R.ability.name){var gb=.1*Gt;R.currentStats.stamina-=gb,Gn=gb>1?.25*gb:1}}null!=R.raceVariables.relayEffects&&R.raceVariables.relayEffects.length>0&&(R.raceVariables.relayEffects.forEach(Ze=>{Ze.remainingRelayMeters<=vr?(Ze.remainingRelayMeters=0,Ze.isMultiplicative?null==R||R.currentStats.divideCurrentRacingStats(Ze.relayAffectedStatRatios):null==R||R.currentStats.subtractCurrentRacingStats(Ze.relayAffectedStatRatios),Ze.effectType!==tt.deepBreathing&&Ze.effectType!==tt.bigBrain&&Ze.effectType!==tt.specialDelivery&&a.addRaceUpdate(f,ct+"'s relay effect "+this.lookupService.getRelayEffectNameByType(Ze.effectType)+" ends.")):Ze.remainingRelayMeters-=vr}),R.raceVariables.relayEffects=R.raceVariables.relayEffects.filter(Ze=>Ze.remainingRelayMeters>0));var Zr,XD=10;this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(XD=20),0!==f&&f!==this.timeToComplete&&f%(XD*this.frameModifier)==0&&((Zr=new X).value=f,Zr.text=this.getUpdateMessageByRelativeDistance(v,f,this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+s:s,ct),a.raceUpdates.push(Zr));var _d=!1,up=0,vb=0;if(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(_n=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime(),up+=v*_n,vb=this.globalService.globalVar.eventRaceData.distanceCovered),s+vb>v*(f/this.frameModifier)+up?(ut||(_d=!0),ut=!0):(ut&&(_d=!0),ut=!1),_d&&R.type===L.Shark&&"Apex Predator"===R.ability.name&&!R.ability.abilityUsed&&Vi>1){a.addRaceUpdate(f,ct+" bites the other racers as they pass, slowing them down."),R.ability.abilityUsed=!0;var dp=this.lookupService.GetAbilityEffectiveAmount(R,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier,ke),mb=this.timeToComplete*(dp/this.selectedRace.length),YD=1.5*mb;this.timeToComplete+=YD-mb,this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.bonusTime+=YD-mb),this.globalService.increaseAbilityXp(R,void 0,this.selectedRace.raceType===ge.trainingTrack)}if(se>0&&v*(f/this.frameModifier)+up>=se&&v*((f-1)/this.frameModifier)+up<se){var yd=this.racingAnimals.find(Ze=>Ze.type===L.Warthog);if(void 0!==yd){dp=this.lookupService.GetAbilityEffectiveAmount(yd,this.selectedRace.pinnacleConditions,ee.terrain.powerModifier);var bb=e.length/this.timeToComplete;this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=dp/(bb=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=dp/bb,se=0,a.addRaceUpdate(f,"<span class='coloredText flatlandColor'>"+(null==yd?void 0:yd.name)+"</span> tussles with the competition as they pass, slowing them down.")}}if(R.ability.currentCooldown-=1/this.frameModifier,f+=1,Ui<=0){a.addRaceUpdate(f,ct+" finishes their leg of the race."),ee.legComplete=!0,w+=1,R.type===L.Warthog&&"Time To Tussle"===R.ability.name&&ut&&(se=s+vb,this.globalService.increaseAbilityXp(R,void 0,this.selectedRace.raceType===ge.trainingTrack)),this.preRacerResetRelayEffectCheck(R,Se,a,f,ct,ee,ee,ke,Gr,Gt),R.type===L.Octopus&&"Buried Treasure"===R.ability.name&&(ue=1.25),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped?this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.endOfLegRelayEffectCheck(R,new At,a,f,Ue,ee,ee,ke,Gr,il,Cs):this.PrepareRacingAnimal(a,f,Ue,R,void 0,void 0,void 0,ke,void 0,Gr),ee.terrain.accelerationModifier=Pi,ee.terrain.maxSpeedModifier=hi,ee.terrain.staminaModifier=vi,ee.terrain.powerModifier=fi,ee.terrain.focusModifier=mn,ee.terrain.adaptabilityModifier=mt,C.push(R),T.push(ee);break}f===this.timeToComplete*this.frameModifier&&(ee.terrain.accelerationModifier=Pi,ee.terrain.maxSpeedModifier=hi,ee.terrain.staminaModifier=vi,ee.terrain.powerModifier=fi,ee.terrain.focusModifier=mn,ee.terrain.adaptabilityModifier=mt),l=Gr,c=Cs,u=il}if(y+=1,this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix){var QD=.05,_b=this.globalService.globalVar.modifiers.find(Ze=>"segmentCompleteMoraleBoostModifier"===Ze.text);null!=_b&&(QD=_b.value),this.globalService.changeGrandPrixMorale(R.type,QD),this.globalService.globalVar.eventRaceData.previousRaceSegmentData=this.carryOverEventRaceSegmentData(R,wt,Bi,Ni.permanentAdaptabilityIncreaseMultiplier,gn.permanentMaxSpeedIncreaseMultiplier,$i,Gn,zn.coldBloodedIncreaseMultiplier,Dr,bn,dn,j,fa,xr,kr,cr)}}),e.raceLegs.some(ee=>!ee.legComplete)?(a.wasSuccessful=!1,a.totalFramesPassed=f,a.distanceCovered=e.raceUI.distanceCoveredByFrame[f-1],a.addRaceUpdate(f,"You lost the race..."),this.globalService.globalVar.orbStats.allOrbs=this.existingOrbStats.allOrbs):(e.isCompleted=!0,a.wasSuccessful=!0,a.totalFramesPassed=f,a.distanceCovered=e.raceUI.distanceCoveredByFrame[f-1],a.addRaceUpdate(f,"You won the race!")),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.racingAnimals.forEach(ee=>{this.PrepareRacingAnimal(a,f,"",ee,void 0,void 0,void 0,void 0,!0)}),this.globalService.globalVar.trackedStats.totalMetersRaced+=s,a.wasSuccessful&&this.raceWasSuccessfulUpdate(a,ue),a}getStaminaModifier(e,i,r,a,o,s){var l,c=this.globalService.globalVar.modifiers.find(f=>"staminaModifier"===f.text);return l=void 0===c?.2:c.value,null!=e&&null!=e.staminaModifier&&(l*=e.staminaModifier),i.talentTree.talentTreeType===vt.sprint&&(l*=1+.05*i.talentTree.column3Row2Points),i.talentTree.talentTreeType===vt.longDistance&&i.currentStats.stamina/r<=.35&&(l*=1-.05*i.talentTree.column3Row2Points),i.type===L.Warthog&&"Mud Pit"===i.ability.name&&i.ability.abilityInUse&&(l*=.75),i.type===L.Salamander&&"Cold Blooded"===i.ability.name&&i.ability.abilityInUse&&(l*=1-s),i.type===L.Horse&&"Second Wind"===i.ability.name&&i.ability.abilityInUse&&(l*=1-.9),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Je[Je.steamy])&&(l*=2),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Je[Je.burstIncreaseStaminaLoss])&&i.raceVariables.isBursting&&(l*=3),l}handleStamina(e,i,r,a,o,s,l,c,u,f,v,b){var y=this.getStaminaModifier(o,e,s,l,c,u.coldBloodedIncreaseMultiplier);if(e.currentStats.stamina-=e.type===L.Cheetah&&"Sprint"===e.ability.name&&e.ability.abilityInUse?r*y*2:r*y,void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Qi[Qi.lowStaminaRelay])&&e.currentStats.stamina/s<.5)if(e.raceCourseType===f)this.timeToComplete=1;else{var T=this.selectedRace.raceLegs.findIndex(B=>B===c);if(T<this.selectedRace.raceLegs.length-1){var M=c.distance-l;this.selectedRace.raceLegs[T].distance-=M,this.selectedRace.raceLegs[T+1].distance+=M;var S=this.selectedRace.raceLegs[T].pathData.findIndex(B=>B===v);this.selectedRace.raceLegs[T].pathData=this.selectedRace.raceLegs[T].pathData.slice(0,S+1);var w=this.selectedRace.raceLegs[T].pathData[S].length-b;this.selectedRace.raceLegs[T].pathData[S].length-=w,this.selectedRace.raceLegs[T+1].pathData[0].length+=w,e.raceVariables.forceRelay=!0}}e.currentStats.stamina<0&&(e.currentStats.stamina=0,e.raceVariables.ranOutOfStamina=!0)}getBurstDistance(e,i,r,a){var o=0,s=this.globalService.globalVar.modifiers.find(T=>"breedLevelStatModifier"===T.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=1;e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(l*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(l*=1.5),e.type===L.Warthog&&"Graze"===e.ability.name&&void 0!==a&&(l*=1+.1*this.getGrazeBuffCount("Power",a));var c=e.currentStats.powerMs*l*i*r,u=1;if(e.getEquippedItemName()===this.globalService.getEquipmentName(ht.runningShoes)){var f=1.2,v=this.globalService.globalVar.modifiers.find(T=>"runningShoesEquipmentModifier"===T.text);void 0!==v&&(f=v.value),u=1+e.raceVariables.burstCount*(f-1)}var b=0,y=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,tt.supportBurstDistance);void 0!==y&&void 0!==y.additionalValue&&(b=y.additionalValue);var C=1;return e.type===L.Whale&&"Whalesong"===e.ability.name&&(2===e.ability.totalUseCount||e.ability.totalUseCount>5)&&e.ability.abilityInUse&&(C*=1.3),e.currentStats.calculateBurstDistance(o,void 0,c)*u*C+b}doesRacerMiniBurst(e,i){var r=!1;return null!=i&&i.isSpecialPath&&(e.talentTree.talentTreeType===vt.sprint&&e.talentTree.column1Row4Points>0&&!i.didAnimalStumble&&!i.checkedForMiniBurst&&(r=!0),i.checkedForMiniBurst=!0),r}getBurstChance(e,i,r){var a=1e3/this.selectedRace.length,o=0,s=this.globalService.globalVar.modifiers.find(f=>"breedLevelStatModifier"===f.text);null!=s&&(o=s.value);var l=e.currentStats.calculateBurstChance(o=1+o*(e.breedLevel-1),i,r)*a;e.type===L.Warthog&&"Mud Pit"===e.ability.name&&e.ability.abilityInUse&&(l*=1.25);var c=0,u=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,tt.supportBurstChance);return void 0!==u&&void 0!==u.additionalValue&&(c=u.additionalValue),l+c}doesRacerBurst(e,i,r,a,o,s,l){var c=this.getBurstChance(e,l,s);if(i.checkedForBurst)return!1;if(i.checkedForBurst=!0,"Night Vision"===e.ability.name&&e.type===L.Gecko&&(e.ability.abilityInUse=!1),e.type===L.Hare&&"Prey Instinct"===e.ability.name&&!e.ability.abilityUsed)return!0;if(i.isSpecialPath){var u=this.lookupService.getResourceByName("Course Maps");if(null==u&&(u=0),u>0){var f=1,v=this.globalService.globalVar.modifiers.find(y=>"racerMapsModifier"===y.text);null!=v&&(f=1+u*v.value),c*=f}}return this.utilityService.getRandomNumber(1,100)<=c+1}raceWasSuccessfulUpdate(e,i){var s,r=this.globalService.globalVar.animals.find(w=>w.type===L.Octopus),a="<span class='coloredText waterColor'>"+(null==r?void 0:r.name)+"</span>",o=this.globalService.globalVar.circuitRank,l=0;if(this.selectedRace.isCircuitRace)s=this.globalService.globalVar.circuitRaces.find(w=>w.raceId===this.selectedRace.raceId),this.globalService.globalVar.circuitRaces.filter(w=>w.requiredRank===o).every(w=>w.isCompleted)&&(this.selectedRace.circuitIncreaseReward=this.globalService.IncreaseCircuitRank(),this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,G.Resources)));else if(s=this.globalService.globalVar.localRaces.find(w=>w.raceId===this.selectedRace.raceId&&w.localRaceType===this.selectedRace.localRaceType),this.selectedRace.raceType===ge.special&&this.selectedRace.localRaceType===Ut.Pinnacle&&(this.globalService.globalVar.currentPinnacleConditions=void 0),this.selectedRace.localRaceType===Ut.Free){var u=this.globalService.globalVar.resources.find(w=>"International Races"===w.name),f=this.globalService.globalVar.resources.find(w=>"National Races"===w.name);if(null!=u&&u.amount>0){var v=5,b=this.globalService.globalVar.modifiers.find(w=>"internationalRacesToMedalModifier"===w.text);null!=b&&(v=b.value),this.globalService.globalVar.nationalRaceCountdown>=v&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,G.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else if(null!=f&&f.amount>0){var y=12,C=this.globalService.globalVar.modifiers.find(w=>"nationalRacesToMedalModifier"===w.text);null!=C&&(y=C.value),this.globalService.globalVar.nationalRaceCountdown>=y&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,G.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else{var T=50,M=this.globalService.globalVar.modifiers.find(w=>"freeRacesToMedalModifier"===w.text);null!=M&&(T=M.value),this.globalService.globalVar.nationalRaceCountdown>=T&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,G.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}}if(this.selectedRace.localRaceType!==Ut.Free&&this.selectedRace.localRaceType!==Ut.Track){if(void 0===s)return;this.selectedRace.localRaceType===Ut.Mono&&(this.globalService.globalVar.lastMonoRaceCourseType=this.selectedRace.raceLegs[0].courseType),this.globalService.IncreaseLocalRaceRank(this.selectedRace.localRaceType),s.isCompleted=!0}else this.selectedRace.localRaceType===Ut.Free&&(this.globalService.globalVar.nationalRaceCountdown+=1);this.racingAnimals.forEach(w=>{this.selectedRace.isCircuitRace?l=this.lookupService.getCircuitBreedGaugeIncrease(w):this.selectedRace.raceType!==ge.trainingTrack&&(l=this.lookupService.getLocalBreedGaugeIncrease(w)),this.globalService.IncreaseAnimalBreedGauge(w,l)}),this.selectedRace.localRaceType!==Ut.Track?e.beatMoneyMark=this.checkMoneyMark(e):this.handleTrackRaceRewards(e),null!=this.selectedRace.rewards&&this.selectedRace.rewards.forEach(w=>{if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(Ce=>Ce.name===w.name)){var B=this.globalService.globalVar.resources.find(Ce=>Ce.name===w.name);if(null!=B)if(this.selectedRace.localRaceType!==Ut.Track)if("Coins"===B.name){if(e.beatMoneyMark){e.addRaceUpdate(e.totalFramesPassed,"You beat the money mark!");var j=1.25,de=this.globalService.globalVar.modifiers.find(Ce=>"moneyMarkRewardModifier"===Ce.text);null!=de&&(j=de.value),w.amount=Math.round(w.amount*j)}var ne=this.lookupService.getRenown();w.amount=Math.round(w.amount*this.lookupService.getRenownCoinModifier(ne,!1)),i>1&&e.addRaceUpdate(e.totalFramesPassed,a+" finds buried treasure at the bottom of the ocean!"),w.amount=Math.round(w.amount*i),B.amount+=w.amount}else"Facility Level"===B.name?(B.amount+=w.amount,this.lookupService.recalculateAllAnimalStats()):"Renown"===B.name?B.amount=parseFloat((B.amount+w.amount).toFixed(3)):B.amount+=w.amount;else B.amount+=w.amount}else if("Bonus Breed XP Gain From Training"===w.name&&w.itemType===G.Other){var ue=this.selectedRace.raceLegs[0].courseType;null!=(se=this.racingAnimals.find(Ce=>Ce.raceCourseType===ue))&&(se.miscStats.bonusBreedXpGainFromTraining+=w.amount)}else if("Bonus Breed XP Gain From Free Races"===w.name&&w.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(ve=>ve.raceCourseType===ue))&&(se.miscStats.bonusBreedXpGainFromLocalRaces+=w.amount);else if("Bonus Breed XP Gain From Circuit Races"===w.name&&w.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(ve=>ve.raceCourseType===ue))&&(se.miscStats.bonusBreedXpGainFromCircuitRaces+=w.amount);else if("Training Time Reduction"===w.name&&w.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(ve=>ve.raceCourseType===ue))&&(se.miscStats.trainingTimeReduction+=w.amount);else if("Diminishing Returns per Facility Level"===w.name&&w.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(ve=>ve.raceCourseType===ue))&&(se.miscStats.diminishingReturnsBonus+=w.amount);else if("Orb Pendant"===w.name&&w.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(ve=>ve.raceCourseType===ue))&&(se.canEquipOrb=!0);else if("Bonus Talents"===w.name&&w.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(ve=>ve.raceCourseType===ue))&&(se.miscStats.bonusTalents+=w.amount);else if("Bonus Base Ability Efficiency"===w.name&&w.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(ve=>ve.raceCourseType===ue))&&(se.miscStats.bonusAbilityEfficiency+=w.amount);else if("Bonus Orb XP Gain"===w.name&&w.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(ve=>ve.raceCourseType===ue))&&(se.miscStats.bonusOrbXp+=w.amount);else if("Nectar of the Gods"===w.name&&w.itemType===G.Other){var se;ue=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(ve=>ve.raceCourseType===ue))&&(se.nectarAvailable=!0)}else this.globalService.globalVar.resources.push(new te(w.name,w.amount,w.itemType))})}checkMoneyMark(e){var i=!1;if(0===this.lookupService.getResourceByName("Money Mark"))return i;var a=this.globalService.globalVar.modifiers.find(s=>"moneyMarkPaceModifier"===s.text);return null==a||e.totalFramesPassed<=this.timeToComplete*this.frameModifier*a.value&&(i=!0),i}handleTrackRaceRewards(e){if(1===this.selectedRace.raceLegs.length){var i=this.selectedRace.raceLegs[0].courseType,r=this.racingAnimals.find(f=>f.raceCourseType===i);if(void 0!==r){var a=null;if(this.selectedRace.trackRaceType===Li.novice&&(a=r.allTrainingTracks.noviceTrack),this.selectedRace.trackRaceType===Li.intermediate&&(a=r.allTrainingTracks.intermediateTrack),this.selectedRace.trackRaceType===Li.master&&(a=r.allTrainingTracks.masterTrack),this.selectedRace.trackRaceType===Li.legacy&&(a=r.allTrainingTracks.legacyTrack),null!==a){var o=this.timeToComplete*this.frameModifier,s=.25,l=this.globalService.globalVar.modifiers.find(f=>"trainingTrackPaceModifier"===f.text);void 0!==l&&(s=l.value),this.selectedRace.trackRaceType===Li.legacy&&(s=1);for(var c=0;c<a.totalRewards;c++)c<a.rewardsObtained||e.totalFramesPassed<=o/(1+s*c)&&(a.rewardsObtained=c+1,a.rewardsObtained===a.totalRewards&&(this.selectedRace.trackRaceType===Li.novice&&(r.allTrainingTracks.intermediateTrackAvailable=!0),this.selectedRace.trackRaceType===Li.intermediate&&(r.allTrainingTracks.masterTrackAvailable=!0),this.selectedRace.trackRaceType===Li.master&&(r.allTrainingTracks.legacyTrackAvailable=!0)),null==this.selectedRace.rewards&&(this.selectedRace.rewards=[]),this.selectedRace.rewards.push(a.rewards[c]));null!=this.selectedRace.rewards&&(this.selectedRace.rewards=this.utilityService.condenseList(this.selectedRace.rewards))}}}}getUpdateMessageByRelativeDistance(e,i,r,a){var o=a,s=e*(i/this.frameModifier);return this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(s+=e*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),r<.5*s?o="Is "+a+" <strong>even moving?!</strong>":r<.75*s?o=a+" is <strong>falling out of the race!</strong>":r<.9*s?o=a+" is <strong>just a step behind everyone else!</strong>":r>=.9*s&&r<=1.1*s?o=a+" is <strong>right on pace!</strong>":r>=1.5*s?o=a+" <strong>CANNOT be caught!!</strong>":r>=1.25*s?o=a+" is <strong>WAY ahead of the pack!</strong>":r>=1.1*s&&(o=a+" is <strong>barely leading the pack!</strong>"),o}PrepareRacingAnimal(e,i,r,a,o,s,l,c,u,f,v,b,y){if(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!0),a.ability.currentCooldown=a.ability.cooldown,a.ability.remainingLength=0,a.ability.totalUseCount=0,a.getEquippedItemName()===this.globalService.getEquipmentName(ht.pendant)){var C=.9,T=this.globalService.globalVar.modifiers.find(B=>"pendantEquipmentModifier"===B.text);void 0!==T&&(C=T.value),a.ability.currentCooldown*=C}if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(St[St.longCooldowns])&&(a.ability.currentCooldown*=2),null!=a.raceVariables&&null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0){var S=this.lookupService.getRelayEffectFromListByType(a.raceVariables.relayEffects,tt.supportAbilityCooldown);void 0!==S&&void 0!==S.additionalValue&&(a.ability.currentCooldown*=S.additionalValue)}a.ability.abilityUsed=!1,a.ability.abilityInUse=!1,null!=a.raceVariables&&(a.raceVariables.ranOutOfStamina=!1,a.raceVariables.burstCount=0,a.raceVariables.metersSinceLostFocus=0,a.raceVariables.hasLostFocusDuringRace=!1,a.raceVariables.firstAbilityUseEffectApplied=!1,a.raceVariables.velocityExceedsMaxSpeedDuringBurst=!1,a.raceVariables.velocityExceedsMaxSpeedFloorRequirement=!1,a.raceVariables.velocityReachesMaxSpeedCount=0),this.globalService.calculateAnimalRacingStats(a,y),!0!==u&&(null!=o&&o.length>0&&this.endOfLegRelayEffectCheck(o[o.length-1],a,e,i,r,s,l,c,f,v,b),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects.forEach(B=>{a.raceVariables.relayEffects.push(B.makeCopy())}),this.globalService.globalVar.eventRaceData.queuedRelayEffects.length>0&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects=this.globalService.globalVar.eventRaceData.queuedRelayEffects.filter(B=>B.affectsAllRacers))),null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0&&a.raceVariables.relayEffects.forEach(B=>{B.isMultiplicative?a.currentStats.multiplyCurrentRacingStats(B.relayAffectedStatRatios):a.currentStats.addCurrentRacingStats(B.relayAffectedStatRatios)}))}preRacerResetRelayEffectCheck(e,i,r,a,o,s,l,c,u,f){var v=4,b=this.globalService.globalVar.modifiers.find(w=>"relayAbilityXpGainModifier"===w.text);if(void 0!==b&&(v=b.value),null===i&&(i=new At),null!=l){if(e.type===L.Caribou&&"Herd Mentality"===e.ability.name&&!e.raceVariables.ranOutOfStamina){var y=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,l.terrain.powerModifier,c)+.1*e.currentStats.stamina,C=0;this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCap||(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount+=1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.AddRelayEffect(i,e,C,new Ve(0,0,0,0,0,0),!1,tt.herdMentality,!1,y),this.globalService.increaseAbilityXp(e,v,this.selectedRace.raceType===ge.trainingTrack))}if(!(e.type!==L.Caribou||"Special Delivery"!==e.ability.name||e.raceVariables.ranOutOfStamina||(void 0===f&&(f=1),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCap))){this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount+=1),C=this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;var T=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,l.terrain.powerModifier,c);e.currentStats.stamina+=T;var M=e.currentStats.stamina/f;M>1.25&&(M=1.25);var S=M;this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(S*=.1),this.AddRelayEffect(e,e,C,new Ve(0,0,0,0,0,0),!1,tt.specialDelivery,!0,S),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,v,this.selectedRace.raceType===ge.trainingTrack)}}}endOfLegRelayEffectCheck(e,i,r,a,o,s,l,c,u,f,v,b=1){var y=4,C=this.globalService.globalVar.modifiers.find(j=>"relayAbilityXpGainModifier"===j.text);if(void 0!==C&&(y=C.value),"Inspiration"===e.ability.name&&e.type===L.Horse&&null!=l){var T=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,l.terrain.powerModifier,c);this.AddRelayEffect(i,e,T*b,new Ve(.25*e.currentStats.maxSpeedMs,0,0,0,0,0),!1,tt.inspiration,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,y,this.selectedRace.raceType===ge.trainingTrack),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.inspirationUseCount+=1)}if("Flowing Current"===e.ability.name&&e.type===L.Dolphin&&null!=l&&(T=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,l.terrain.powerModifier,c),this.AddRelayEffect(i,e,T*b,new Ve(0,.25*e.currentStats.accelerationMs,0,0,0,0),!1,tt.flowingCurrent,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,y,this.selectedRace.raceType===ge.trainingTrack),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.flowingCurrentUseCount+=1)),"Navigator"===e.ability.name&&e.type===L.Dolphin&&null!=l&&(T=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,l.terrain.powerModifier,c),this.AddRelayEffect(i,e,T*b,new Ve(0,0,0,0,0,.25*e.currentStats.adaptabilityMs),!1,tt.navigator,!1),r.addRaceUpdate(a,o+" uses "+(null==e?void 0:e.ability.name)+"."),this.globalService.increaseAbilityXp(e,y,this.selectedRace.raceType===ge.trainingTrack),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.navigatorUseCount+=1)),e.type===L.Gecko&&"Camouflage"===e.ability.name&&null!=l){var S=u;T=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,l.terrain.powerModifier,c),this.AddRelayEffect(i,e,T*b,new Ve(0,0,0,0,0,0),!1,tt.camouflage,!1,S),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,y,this.selectedRace.raceType===ge.trainingTrack),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.camouflageUseCount+=1)}if(void 0!==s){var w=new un;void 0!==l&&(w=l.terrain),void 0===c&&(c=1),void 0===v&&(v=e.currentStats.adaptabilityMs),void 0===f&&(f=e.currentStats.focusMs),this.talentRelayCheck(e,i,s.distance*b,w,c,f,v),this.batonEquipmentCheck(e,i,s.distance*b)}}talentRelayCheck(e,i,r,a,o,s,l,c=1){if(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.talentTree.talentTreeType===vt.support){if(e.talentTree.column1Row1Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,1,1,u=1+.01*e.talentTree.column1Row1Points),!0,tt.supportAdaptabilityRelay,!1),e.talentTree.column1Row3Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(u=1+.01*e.talentTree.column1Row3Points,1,1,1,1,1),!0,tt.supportMaxSpeedRelay,!1),e.talentTree.column2Row1Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,u=1+.01*e.talentTree.column2Row1Points,1,1,1,1),!0,tt.supportAccelerationRelay,!1),e.talentTree.column2Row2Points>0){var u=this.getBurstDistance(e,a.powerModifier,o)*(.05*e.talentTree.column2Row2Points);this.AddRelayEffect(i,e,r*c,new Ve(0,0,0,0,0,0),!1,tt.supportBurstDistance,!1,u)}if(e.talentTree.column2Row3Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,u=1+.01*e.talentTree.column2Row3Points,1,1,1),!0,tt.supportStaminaRelay,!1),e.talentTree.column2Row4Points>0){u=this.getBurstChance(e,s,l)*(.03*e.talentTree.column2Row4Points);this.AddRelayEffect(i,e,r*c,new Ve(0,0,0,0,0,0),!1,tt.supportBurstChance,!1,u)}e.talentTree.column3Row1Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,u=1+.01*e.talentTree.column3Row1Points,1,1),!0,tt.supportPowerRelay,!1),e.talentTree.column3Row2Points>0&&(u=1-.02*e.talentTree.column3Row2Points,this.AddRelayEffect(i,e,r*c,new Ve(0,0,0,0,0,0),!1,tt.supportAbilityCooldown,!1,u)),e.talentTree.column3Row3Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,1,u=1+.01*e.talentTree.column3Row3Points,1),!0,tt.supportFocusRelay,!1),e.talentTree.column3Row4Points>0&&(u=1+.02*e.talentTree.column3Row4Points,this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,1,1,1),!0,tt.supportAbilityEfficiency,!1,u))}}batonEquipmentCheck(e,i,r,a=1){if(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.getEquippedItemName()===this.globalService.getEquipmentName(ht.redBaton)){var o=1.1,s=this.globalService.globalVar.modifiers.find(S=>"redBatonEquipmentModifier"===S.text);void 0!==s&&(o=s.value),this.AddRelayEffect(i,e,r*a,new Ve(o,1,1,1,1,1),!0,tt.redBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(ht.blueBaton)){var l=1.1,c=this.globalService.globalVar.modifiers.find(S=>"blueBatonEquipmentModifier"===S.text);void 0!==c&&(l=c.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,1,1,l,1),!0,tt.blueBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(ht.violetBaton)){var u=1.1,f=this.globalService.globalVar.modifiers.find(S=>"violetBatonEquipmentModifier"===S.text);void 0!==f&&(u=f.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,1,u,1,1),!0,tt.violetBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(ht.greenBaton)){var v=1.1,b=this.globalService.globalVar.modifiers.find(S=>"greenBatonEquipmentModifier"===S.text);void 0!==b&&(v=b.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,1,1,1,v),!0,tt.greenBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(ht.orangeBaton)){var y=1.1,C=this.globalService.globalVar.modifiers.find(S=>"orangeBatonEquipmentModifier"===S.text);void 0!==C&&(y=C.value),this.AddRelayEffect(i,e,r*a,new Ve(1,y,1,1,1,1),!0,tt.orangeBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(ht.yellowBaton)){var T=1.1,M=this.globalService.globalVar.modifiers.find(S=>"yellowBatonEquipmentModifier"===S.text);void 0!==M&&(T=M.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,T,1,1,1),!0,tt.yellowBaton,!1)}}prepareRacingLeg(e,i){e.pathData.forEach(r=>{r.currentStumbleOpportunity=0,r.checkedForBurst=!1,r.checkedForNineTails=!1,r.driftAmount=0,r.didAnimalStumble=!1,r.checkedForDrift=!1}),this.checkForBlinders(e,i)}checkForBlinders(e,i){if(i.getEquippedItemName()===this.globalService.getEquipmentName(ht.blinders)){var r=.5;e.terrain.maxSpeedModifier<1&&(e.terrain.maxSpeedModifier=1-(1-e.terrain.maxSpeedModifier)*r),e.terrain.accelerationModifier<1&&(e.terrain.accelerationModifier=1-(1-e.terrain.accelerationModifier)*r),e.terrain.staminaModifier<1&&(e.terrain.staminaModifier=1-(1-e.terrain.staminaModifier)*r),e.terrain.powerModifier<1&&(e.terrain.powerModifier=1-(1-e.terrain.powerModifier)*r),e.terrain.focusModifier<1&&(e.terrain.focusModifier=1-(1-e.terrain.focusModifier)*r),e.terrain.adaptabilityModifier<1&&(e.terrain.adaptabilityModifier=1-(1-e.terrain.adaptabilityModifier)*r)}}getPrelayEffects(e,i,r,a,o,s,l,c,u){null!==i&&void 0!==c&&(void 0===this.selectedRace.pinnacleConditions||!this.selectedRace.pinnacleConditions.containsCondition(Je[Je.noRelayEffects]))&&i.talentTree.talentTreeType===vt.support&&i.talentTree.column1Row4Points>0&&this.endOfLegRelayEffectCheck(i,e,o,s,l,c,u,a,void 0,void 0,void 0,.03*i.talentTree.column1Row4Points)}AddRelayEffect(e,i,r,a,o,s,l,c,u=!1){if(void 0===this.selectedRace.pinnacleConditions||!this.selectedRace.pinnacleConditions.containsCondition(Je[Je.noRelayEffects])){var f=new Lf;if(f.remainingRelayMeters=r,f.relayAffectedStatRatios=a,f.isMultiplicative=o,f.effectType=s,f.additionalValue=c,f.affectsAllRacers=l,i.talentTree.talentTreeType===vt.support&&i.talentTree.column1Row2Points>0){var v=1+.02*i.talentTree.column1Row2Points;f.isMultiplicative?(f.relayAffectedStatRatios.topSpeed>1&&(f.relayAffectedStatRatios.topSpeed=1+(f.relayAffectedStatRatios.topSpeed-1)*v),f.relayAffectedStatRatios.acceleration>1&&(f.relayAffectedStatRatios.acceleration=1+(f.relayAffectedStatRatios.acceleration-1)*v),f.relayAffectedStatRatios.endurance>1&&(f.relayAffectedStatRatios.endurance=1+(f.relayAffectedStatRatios.endurance-1)*v),f.relayAffectedStatRatios.power>1&&(f.relayAffectedStatRatios.power=1+(f.relayAffectedStatRatios.power-1)*v),f.relayAffectedStatRatios.focus>1&&(f.relayAffectedStatRatios.focus=1+(f.relayAffectedStatRatios.focus-1)*v),f.relayAffectedStatRatios.adaptability>1&&(f.relayAffectedStatRatios.adaptability=1+(f.relayAffectedStatRatios.adaptability-1)*v),void 0!==f.additionalValue&&f.additionalValue>1&&(f.additionalValue*=v)):(f.relayAffectedStatRatios.topSpeed>0&&(f.relayAffectedStatRatios.topSpeed=1+(f.relayAffectedStatRatios.topSpeed-1)*v),f.relayAffectedStatRatios.acceleration>0&&(f.relayAffectedStatRatios.acceleration=1+(f.relayAffectedStatRatios.acceleration-1)*v),f.relayAffectedStatRatios.endurance>0&&(f.relayAffectedStatRatios.endurance=1+(f.relayAffectedStatRatios.endurance-1)*v),f.relayAffectedStatRatios.power>0&&(f.relayAffectedStatRatios.power=1+(f.relayAffectedStatRatios.power-1)*v),f.relayAffectedStatRatios.focus>0&&(f.relayAffectedStatRatios.focus=1+(f.relayAffectedStatRatios.focus-1)*v),f.relayAffectedStatRatios.adaptability>0&&(f.relayAffectedStatRatios.adaptability=1+(f.relayAffectedStatRatios.adaptability-1)*v),void 0!==f.additionalValue&&f.additionalValue>0&&(f.additionalValue*=v))}if(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix)if(this.globalService.globalVar.eventRaceData.queuedRelayEffects.some(C=>C.effectType===s))if(this.lookupService.relayEffectTypeStacksEffectiveness(s))null!=(b=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(C=>C.effectType===s))&&(b.relayAffectedStatRatios.addCurrentRacingStats(a),void 0!==b.additionalValue&&void 0!==f.additionalValue&&(b.additionalValue+=f.additionalValue));else{var b;null!=(b=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(T=>T.effectType===s))&&(b.remainingRelayMeters+=r)}else this.globalService.globalVar.eventRaceData.queuedRelayEffects.push(f);else if(l){var y=this.selectedRace.raceLegs.findIndex(C=>C.courseType===e.raceCourseType);this.selectedRace.raceLegs.length>y&&this.selectedRace.raceLegs.slice(y+1).forEach(C=>{var T=this.racingAnimals.find(M=>M.raceCourseType===C.courseType);null!=T&&null!=T.raceVariables&&null!=T.raceVariables.relayEffects&&T.raceVariables.relayEffects.push(f)})}else null!=e&&null!=e.raceVariables&&null!=e.raceVariables.relayEffects&&e.raceVariables.relayEffects.push(f)}}didAnimalStumble(e,i,r,a,o,s,l,c,u,f){if(e.raceVariables.stumbled)return!1;if(0===i.frequencyOfStumble){if(void 0===this.selectedRace.pinnacleConditions||!this.selectedRace.pinnacleConditions.containsCondition(St[St.brokenFloorboards]))return!1;i.frequencyOfStumble=this.globalService.getAverageStumbleFrequencyForCourseType(e.raceCourseType),i.stumbleOpportunities=this.globalService.getAverageStumbleOpportunitiesForCourseType(e.raceCourseType),i.stumbleSeverity=Lr.Medium}if(e.type===L.Gecko&&"Sticky"===e.ability.name&&e.ability.abilityInUse||e.type===L.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||e.type===L.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(i.currentStumbleOpportunity*(i.length/i.stumbleOpportunities)<r){i.currentStumbleOpportunity+=1;var y=250;if(this.utilityService.getRandomNumber(1,100)<=i.frequencyOfStumble/(y+=s*a.adaptabilityModifier)*i.length){if(e.getEquippedItemName()===this.globalService.getEquipmentName(ht.headband)){var M=3,S=this.globalService.globalVar.modifiers.find(w=>"headbandEquipmentModifier"===w.text);if(void 0!==S&&(M=S.value),e.raceVariables.headbandStumblePreventionCount<M)return e.raceVariables.headbandStumblePreventionCount+=1,f.addRaceUpdate(c,u+"'s headband prevents them from stumbling."),!1}return i.didAnimalStumble=!0,!0}}return!1}didAnimalLoseFocus(e,i,r,a,o,s,l,c,u){if(e.raceVariables.lostFocus||e.type===L.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(this.currentLostFocusOpportunity*(r/i)<a){this.currentLostFocusOpportunity+=1;var b=this.globalService.globalVar.modifiers.find(S=>"focusModifier"===S.text),y=u*o.focusModifier*(void 0===b?.75:b.value);if(e.raceVariables.metersSinceLostFocus<y)return!1;var T=(e.raceVariables.metersSinceLostFocus-y)/e.currentStats.focusMs*100;if(this.utilityService.getRandomNumber(1,100)<=T)return c.didAnimalLoseFocus=!0,!0}return!1}increasePersistentAbilityXp(e){(e.type===L.Cheetah&&"Giving Chase"===e.ability.name||e.type===L.Hare&&"Prey Instinct"===e.ability.name||e.type===L.Hare&&"Nap"===e.ability.name||e.type===L.Goat&&"In The Rhythm"===e.ability.name||e.type===L.Shark&&"Feeding Frenzy"===e.ability.name||e.type===L.Shark&&"Blood In The Water"===e.ability.name||e.type===L.Octopus&&"Buried Treasure"===e.ability.name||e.type===L.Penguin&&"Wild Toboggan"===e.ability.name||e.type===L.Fox&&"Fleeting Speed"===e.ability.name)&&this.globalService.increaseAbilityXp(e,3,this.selectedRace.raceType===ge.trainingTrack)}giveOrbXpBasedOnMeters(e,i,r,a){null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===Be.ruby&&this.selectedRace.raceType!==ge.trainingTrack&&r>=a&&this.globalService.increaseRubyOrbXp(e,i),null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===Be.amber&&this.selectedRace.raceType!==ge.trainingTrack&&r<a&&this.globalService.increaseAmberOrbXp(e,i),null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===Be.topaz&&this.selectedRace.raceType!==ge.trainingTrack&&!i.raceVariables.ranOutOfStamina&&this.globalService.increaseTopazOrbXp(e,i),null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===Be.sapphire&&this.selectedRace.raceType!==ge.trainingTrack&&!i.raceVariables.hasLostFocusDuringRace&&this.globalService.increaseSapphireOrbXp(e,i)}abilityRedundancyCheck(e,i,r,a,o,s){return!(e.ability.oneTimeEffect&&e.ability.abilityUsed||"Second Wind"===e.ability.name&&e.type===L.Horse&&e.raceVariables.recoveringStamina||"Pacemaker"===e.ability.name&&e.type===L.Horse&&i===e.currentStats.maxSpeedMs)&&(!("Leap"===e.ability.name&&e.type===L.Monkey&&this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,a.terrain.powerModifier,s)<o)&&!("Sticky"===e.ability.name&&e.type===L.Gecko&&0===r.frequencyOfStumble))}useAbility(e,i,r,a,o,s,l,c,u,f,v){if(e.ability.abilityUsed=!0,e.type===L.Horse&&("Second Wind"===e.ability.name||"Pacemaker"===e.ability.name)&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)),e.type===L.Cheetah&&"Sprint"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)),e.type===L.Hare&&"Awareness"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)),e.type===L.Warthog&&"Graze"===e.ability.name&&(e.ability.abilityInUse=!0,this.checkForGrazeBuff(c,e,r,a,u,f,v),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)),e.type===L.Monkey){if("Landslide"===e.ability.name){var b=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),y=i.length/this.timeToComplete;this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=b/(y=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=b/y,this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)}"Leap"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack))}if(e.type===L.Gecko&&"Sticky"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)),e.type===L.Dolphin&&"Echolocation"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)),e.type===L.Octopus&&"Propulsion"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)),e.type===L.Whale&&("Storing Power"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)),"Whalesong"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack))),e.type===L.Penguin&&"Careful Toboggan"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)),e.type===L.Caribou&&"Great Migration"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)),e.type===L.Salamander){if("Cold Blooded"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a);var C=s/r.distance;C>.5&&(C=.5-(C-.5)),l.coldBloodedIncreaseMultiplier=C}"Burrow"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack)),"Heat Up"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack))}if(e.type===L.Fox&&"Trickster"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack);var T=this.utilityService.getRandomInteger(1,6);1===T&&(e.ability.tricksterStatLoss="Acceleration"),2===T&&(e.ability.tricksterStatLoss="Max Speed"),3===T&&(e.ability.tricksterStatLoss="Adaptability"),4===T&&(e.ability.tricksterStatLoss="Focus"),5===T&&(e.ability.tricksterStatLoss="Stamina",e.currentStats.stamina-=.25*o,e.currentStats.stamina<0&&(e.currentStats.stamina=0)),6===T&&(e.ability.tricksterStatLoss="Power");var M=this.utilityService.getRandomInteger(1,6);M===T&&(M+=1)>6&&(M=1),1===M&&(e.ability.tricksterStatGain="Acceleration"),2===M&&(e.ability.tricksterStatGain="Max Speed"),3===M&&(e.ability.tricksterStatGain="Adaptability"),4===M&&(e.ability.tricksterStatGain="Focus"),5===M&&(e.ability.tricksterStatGain="Stamina",e.currentStats.stamina+=.5*o,e.currentStats.stamina>o&&(e.currentStats.stamina=o)),6===M&&(e.ability.tricksterStatGain="Power"),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)}}checkForNineTailsBuff(e,i,r,a,o,s,l,c){if(!e.checkedForNineTails){e.checkedForNineTails=!0;var u=this.utilityService.getRandomInteger(1,4),f=new X;f.value=l,1===u?(i.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(r,this.selectedRace.pinnacleConditions,a.terrain.powerModifier,o)]),f.text=r.getAbilityUseUpdateText(c," (Acceleration)"),s.raceUpdates.push(f)):2===u?(i.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(r,this.selectedRace.pinnacleConditions,a.terrain.powerModifier,o)]),f.text=r.getAbilityUseUpdateText(c," (Max Speed)"),s.raceUpdates.push(f)):3===u?(i.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(r,this.selectedRace.pinnacleConditions,a.terrain.powerModifier,o)]),f.text=r.getAbilityUseUpdateText(c," (Adaptability)"),s.raceUpdates.push(f)):4===u&&(i.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(r,this.selectedRace.pinnacleConditions,a.terrain.powerModifier,o)]),f.text=r.getAbilityUseUpdateText(c," (Focus)"),s.raceUpdates.push(f)),this.globalService.increaseAbilityXp(r,void 0,this.selectedRace.raceType===ge.trainingTrack)}}checkForGrazeBuff(e,i,r,a,o,s,l){var c=this.utilityService.getRandomInteger(1,5),u=new X;u.value=s,1===c?(e.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(i,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Acceleration)"),o.raceUpdates.push(u)):2===c?(e.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(i,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Max Speed)"),o.raceUpdates.push(u)):3===c?(e.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(i,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Adaptability)"),o.raceUpdates.push(u)):4===c?(e.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(i,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Focus)"),o.raceUpdates.push(u)):4===c&&(e.push(["Power",this.lookupService.GetAbilityEffectiveAmount(i,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Power)"),o.raceUpdates.push(u)),this.globalService.increaseAbilityXp(i,void 0,this.selectedRace.raceType===ge.trainingTrack)}getNineTailsBuffCount(e,i){return i.filter(r=>r[0]===e).length}getGrazeBuffCount(e,i){return i.filter(r=>r[0]===e).length}getModifiedAdaptability(e,i,r,a,o,s,l,c,u,f,v,b,y){var C=e.currentStats.adaptabilityMs*r;return e.type===L.Dolphin&&"Echolocation"===e.ability.name&&e.ability.abilityInUse&&(C*=1.75),e.type===L.Goat&&"Sure-footed"===e.ability.name&&(C+=i.permanentAdaptabilityIncreaseMultiplier),e.type===L.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(C*=1.4),e.type===L.Penguin&&"Careful Toboggan"===e.ability.name&&e.ability.abilityInUse&&(C*=1.6),e.type===L.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(C*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(C*=1.5),e.type===L.Fox&&"Nine Tails"===e.ability.name&&(C*=1+.15*this.getNineTailsBuffCount("Adaptability",a)),e.type===L.Warthog&&"Graze"===e.ability.name&&(C*=1+.1*this.getGrazeBuffCount("Adaptability",o)),null!==c&&void 0!==u&&"Navigator"===c.ability.name&&c.type===L.Dolphin&&s.distance-l<=this.lookupService.GetAbilityEffectiveAmount(c,this.selectedRace.pinnacleConditions,u.terrain.powerModifier,r)&&(C+=.25*c.currentStats.adaptabilityMs,c.ability.abilityInUse||f.addRaceUpdate(v,b+" is shown the way by "+y+"'s "+(null==c?void 0:c.ability.name)+" ability."),c.ability.abilityInUse=!0),e.getEquippedItemName()===this.globalService.getEquipmentName(ht.athleticTape)&&e.raceVariables.isBursting&&(C*=1.5),e.talentTree.talentTreeType===vt.sprint&&!e.raceVariables.hasLostFocusDuringRace&&(C*=1+5*e.talentTree.column1Row2Points/100),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Je[Je.slick])&&(e.raceCourseType===F.Flatland||e.raceCourseType===F.Mountain||e.raceCourseType===F.Volcanic)&&(C*=.5),C}getModifiedFocus(e,i,r,a,o){var s=e.currentStats.focusMs*i;return e.type===L.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(s*=1.4),e.type===L.Hare&&"Nap"===e.ability.name&&(s*=2),e.type===L.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.5),e.type===L.Fox&&"Nine Tails"===e.ability.name&&(s*=1+.15*this.getNineTailsBuffCount("Focus",r)),e.type===L.Warthog&&"Graze"===e.ability.name&&(s*=1+.1*this.getGrazeBuffCount("Focus",a)),e.type===L.Salamander&&"Cold Blooded"===e.ability.name&&e.ability.abilityInUse&&(s*=1+o.coldBloodedIncreaseMultiplier),e.type===L.Whale&&"Whalesong"===e.ability.name&&(4===e.ability.totalUseCount||e.ability.totalUseCount>5)&&e.ability.abilityInUse&&(s*=1.3),e.getEquippedItemName()===this.globalService.getEquipmentName(ht.athleticTape)&&e.raceVariables.isBursting&&(s*=1.5),e.talentTree.talentTreeType===vt.sprint&&(s*=1-.005*e.talentTree.column2Row4Points*e.raceVariables.velocityReachesMaxSpeedCount),s}handleTundraDrift(e,i,r,a,o,s,l,c,u,f,v,b,y){var C=!1;if(!i.checkedForDrift){i.checkedForDrift=!0;var T=80,M=-80;if((i.routeDesign===Ge.Cavern||r.routeDesign===Ge.Cavern)&&(T=60,M=-60),e.raceVariables.icyCurrentYAmount>=T||e.raceVariables.icyCurrentYAmount<=M||a)return(e.raceVariables.icyCurrentYAmount>=T||e.raceVariables.icyCurrentYAmount<=M)&&(C=!0),i.driftAmount=-e.raceVariables.icyCurrentYAmount,e.raceVariables.icyCurrentYAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,C;var S=this.utilityService.getRandomNumber(1,100),w=1e3,j=i.frequencyOfDrift/(w+=o*s.adaptabilityModifier)*i.length;if(S<j){i.didAnimalStumble=!0,(j-=S)<=0&&(j=0);var de=this.utilityService.getRandomInteger(1,2);e.raceVariables.icyCurrentDirectionUp=1===de;var ne=100,ue=20,se=this.globalService.globalVar.modifiers.find(Se=>"maxDriftAmountModifier"===Se.text);void 0!==se&&(ue=se.value),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Je[Je.hot])&&(ue=10),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Je[Je.cold])&&(ue=30),"Wild Toboggan"===e.ability.name&&e.type===L.Penguin&&(ue*=2,ne*=2,e.ability.abilityInUse=!0),"Quick Toboggan"===e.ability.name&&e.type===L.Penguin&&(e.ability.abilityInUse=!1);var Ce=0;(Ce=j>ne?ue:j/ne*ue)>ue&&(Ce=ue),e.raceVariables.icyCurrentDirectionUp?e.raceVariables.icyCurrentYAmount-=Ce:e.raceVariables.icyCurrentYAmount+=Ce,e.raceVariables.icyCurrentYAmount>=T&&(e.raceVariables.icyCurrentYAmount=T),e.raceVariables.icyCurrentYAmount<=M&&(e.raceVariables.icyCurrentYAmount=M),v.addRaceUpdate(y,b+" drifts to the side, losing "+Ce.toFixed(2)+"% max speed."),i.driftAmount=e.raceVariables.icyCurrentDirectionUp?-Ce:Ce,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount}else i.driftAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,"Quick Toboggan"===e.ability.name&&e.type===L.Penguin&&(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCap||(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount+=1),v.addRaceUpdate(y,b+" slides through without drifting, gaining speed."),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===ge.trainingTrack),f.permanentMaxSpeedIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,s.powerModifier,u),e.ability.abilityInUse=!0));return C}}handleLavaFall(e,i,r,a,o,s,l,c){for(var u=!1,f=i/this.frameModifier,v=o/r,b=[.4,.45,.5,.55,.6],y=[],C=0;C<b.length;C++){var T=1;void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Je[Je.hot])&&(T=.75),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(Je[Je.cold])&&(T=1.25);var M=v*(b[C]*T),S=f/M;S>1&&(S=1),y.push(Math.round(1e5*S)/1e5);var w=a>b[C]*o,B=w!=c[C];c[C]=w,f>=M&&B&&(e.type===L.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||(s.addRaceUpdate(l,"Lava spills out onto the course, forcing you to evacuate."),u=!0))}return this.selectedRace.raceUI.lavaFallPercentByFrame.push(y),u}handleBrazierLighting(e,i){this.selectedRace.drawnObjects.forEach(r=>{if((void 0===r.changeOnFrame||0===r.changeOnFrame)&&i>r.xDistance){r.changeOnFrame=e;var o,a=this.globalService.getOrbTypeFromBrazier(r.objectType);void 0!==a&&(o=this.globalService.getOrbDetailsFromType(a)),void 0!==a&&void 0!==o&&(this.selectedRace.rewards.push(this.initializeService.initializeResource(this.globalService.getOrbNameFromType(a)+" Level Up",1,G.Other)),o.maxLevel+=1)}})}setupBraziers(){if(void 0!==this.selectedRace.drawnObjects&&this.selectedRace.drawnObjects.length>0){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.pinnacleFloor);this.selectedRace.drawnObjects.forEach(i=>{if(i.objectType===jt.amberBrazier||i.objectType===jt.rubyBrazier||i.objectType===jt.topazBrazier||i.objectType===jt.sapphireBrazier||i.objectType===jt.amethystBrazier||i.objectType===jt.emeraldBrazier){var a,r=this.globalService.getOrbTypeFromBrazier(i.objectType);void 0!==r&&(a=this.globalService.getOrbDetailsFromType(r)),void 0!==r&&void 0!==a&&a.maxLevel>e&&(i.changeOnFrame=1)}})}}handleRacePositionByFrame(e,i,r,a){var o=this.lookupService.getTotalRacersByRace(e),s=o,l=.25,c=this.globalService.globalVar.modifiers.find(w=>"trainingTrackPaceModifier"===w.text);if(void 0!==c&&(l=c.value),e.trackRaceType===Li.legacy&&(l=1),e.localRaceType===Ut.Track)for(var u=0;u<o-1;u++)a>e.length/(this.timeToComplete/(1+l*u))*(r/this.frameModifier)&&(s=o-(u+1));else{var b=i*(r/this.frameModifier),y=0;if(this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(b+=y=i*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),2===o)a>b&&(s=1);else if(3===o){a>b&&(s=2);var T=.75,M=this.globalService.globalVar.modifiers.find(w=>"moneyMarkPaceModifier"===w.text);null!=M&&(T=M.value),a>e.length/(this.timeToComplete*T)*(r/this.frameModifier)+y&&(s=1)}}e.raceUI.racePositionByFrame.push(s)}carryOverEventRaceSegmentData(e,i,r,a,o,s,l,c,u,f,v,b,y,C,T,M){var S=new Nf;return S.velocity=i,S.stamina=e.currentStats.stamina,S.permanentMaxSpeedIncreaseMultiplier=r,S.permanentAdaptabilityIncreaseMultiplier=a,S.permanentMaxSpeedIncreaseObjMultiplier=o,S.feedingFrenzyIncreaseMultiplier=s,S.greatMigrationAccelerationIncreaseAdditive=l,S.coldBloodedIncreaseMultiplier=c,S.fleetingSpeedIncreaseMultiplier=u,S.racingAnimalType=e.type,S.deepBreathingStaminaGain=b,S.longDistanceTalentIncreaseAccelerationWithLowVelocity=y,S.maxSpeedFloor=C,S.whalePowerStored=T,S.pathsClearedWithoutLosingFocus=M,f.length>0&&f.forEach(w=>{S.nineTailsBuffs.push(w)}),v.length>0&&v.forEach(w=>{S.grazeBuffs.push(w)}),e.raceVariables.relayEffects.length>0&&e.raceVariables.relayEffects.forEach(w=>{S.relayEffects.push(w)}),this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.associatedAnimalType===e.type&&(S.statLossFromExhaustion=w.exhaustionStatReduction)}),S.raceVariables=e.raceVariables.makeCopy(),S}setStaminaLossForEventAnimal(e,i){this.globalService.globalVar.eventRaceData.animalData.forEach(r=>{r.associatedAnimalType===i&&(r.exhaustionStatReduction=e,e<this.globalService.globalVar.relayEnergyFloor/100&&(this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay=!0))})}}return t.\u0275fac=function(e){return new(e||t)(He(It),He(Ti),He(Rn),He(y0))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let D0=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.utilityService=r,this.gameVersions=[1.24,1.23,1.22,1.21,1.2,1.19,1.18,1.17,1.16,1.15,1.14,1.13,1.12,1.11,1.1,1.09,1.08,1.07,1.06,1.05,1.04,1.03,1.02,1.01,1]}getListAscended(){var e=[];return this.gameVersions.forEach(i=>{e.unshift(i)}),e}getLatestChanges(){return this.getVersionChanges(this.gameVersions[0])}getAllChanges(){var e=[];return this.gameVersions.forEach(i=>{e.push(this.getVersionChanges(i))}),e}getVersionChanges(e){var i="";return 1===e&&(i="Initial Launch!"),1.01===e&&(i="Improved UI by adding better notifications and refactoring some clickable text.\n\nBreeding Grounds specialization now grants a 10% bonus to Breeding XP from Training, up from 5%.\n\nRefactored Breed Progression:\n<ul><li>Breed Levels now grant a 5% bonus to racing stats as opposed to 2%. Breed Levels now require twice as much XP.</li><li>Animals have had their breed levels reduced by half to balance this change. Despite this, you should notice a small increase in stats.</li></ul>"),1.02===e&&(i="Event Races now active!\n<ul><li>Select an event deck (now relay team) and run the marathon-style Grand Prix.</li><li>Run a single race over the course of multiple days to unlock new rewards.</li><li>Mix and match powerful Relay abilities with strong long distance racers and see how far you can go!</li></ul>\nMore UI improvements. (better contrast in colors, differentiation of text through various means, etc)\n\nBug fixes."),1.03===e&&(i="Talents are now active!\n<ul><li>Complete Rainbow Races to start earning Talent Points for your animals.</li><li>Each animal can select a unique talent tree and start racing in its own unique way.</li></ul>\nMore UI improvements. (specifically around items/equipment)\n\nBug fixes."),1.04===e&&(i="Ability rebalancing (view Discord Change Log for full info).\n\nChanges to Event Races<ul><li>Leg length adjusts based on your game progress so that the race always feels smooth.</li><li>Certain abilities have different effects during events, viewable when changing abilities.</li><li>Abilities that can trigger multiple times or have a cap are now displayed on the Event Race Info page.</li></ul>\nBug fixes (view Discord Change Log for full info)."),1.05===e&&(i="Changed all references of 'Decks' to 'Relay Teams' for ease of understanding and better theming.\n\nBug fixes and UI improvements (view Discord Change Log for full info)."),1.06===e&&(i="Barns can now reset their specialization. By clicking or tapping your Barn Upgrade level, you'll see an overview of your barn's benefits and the option to reset your specialization at the cost of losing 20% of your Barn Upgrade level.\n\nCost for Mangoes now scale. 1 Mango from the shop costs an extra 50 per purchase and 2 Mangoes from the event shop costs an extra 1 token per purchase.\n\nThe impact that Renown has on coin gain from race is now logarithmic. After reaching 50 renown, the coin gain will start to slightly fall off. \n\nAttractions now give slightly more Coins per specialization level.\n\nAdded setting to automatically start the event race when the time period begins. This will also catch up on any time you were away between the start of the race and when you first return to the game.\n\nGrand Prix now requires breed level 25 instead of 50.\n\nIncubator now takes 2 minutes instead of 5 minutes.\n\nUI Improvements and Bug Fixes (view Discord Change Log for full info)."),1.07===e&&(i="Sectioned out FAQs, added calculators to make planning easier.\n\nVarious minor bug fixes and UI improvements."),1.08===e&&(i="Increased coin gain from Mono and Duo races. \n\nAdjusted free races so that new course types do not show up until you've completed a circuit rank with that type. \n\nAdded circuit rank up reward for 1000 coins at rank 9 and 1500 coins at rank 23.<ul><li>Those who have already passed these ranks will immediately receive these coins.</li></ul>\nMade Acceleration coaching slightly easier. \n\nAdded warning before first Breed to better explain what will happen.\n\nMinor UI improvements for mobile."),1.09===e&&(i="<em>Just to preface, this is the first set of changes of several intended to make the early game flow better, coin gain and progression feel less punishing, and doing a better job of putting players in the intended gameplay loops. Look forward to more changes soon.</em>\n\nMade changes to verbiage in Tutorial and FAQ section for clarity and better guiding on how to play. \n\nReadjusted certain trainings so that there was clear progression going up from small to medium barns.<ul><li><b>Footwork</b> now gives .25 Acceleration as opposed to .5 Acceleration.</li><li><b>Dodge Ball</b> now gives 1 Adaptability as opposed to .5 Adaptability and takes 60 seconds to complete as opposed to 75 seconds.</li></ul>Some adjustments were made to passive game time while the game is not active.<ul><li>Small barns now allow for 4 hours worth of training, up from 2 hours.</li><li>Medium barns now allow for 8 hours worth of training, up from 4 hours.</li><li>Large barns now allow for 12 hours worth of training, up from 8 hours.</li><li>Team Managers will now cover 8 hours of inactive time worth of free races, up from 2 hours.</li></ul>The base price for food has been reduced.<ul><li>All stat increasing food has been reduced to 10 Coins. The goal for these items is to give you a quick boost after breeding to cut down on wait time. This new price should make that a more viable option.</li><li>The base price for Mangoes has been reduced to 100 Coins. For those who have already purchased Mangoes and the price has begun to increase, your total cost will be reduced by 400 Coins to match up with this change.</li></ul>Attractions now provide significantly more income. The new formula is 20 Coins * Specialization Level added on top of the previous amount. Check the calculator in the FAQ section to see exactly how much it provides at any given level.\n\nFor the first 10 barn upgrade levels, the cost is now 50 coins instead of 100.\n\nCertain RNG elements were not evenly distributed (Coaching for example) and that issue has been resolved. \n\nThere have been bugs, balance issues, and some concerns about reward scaling with the Grand Prix. I have taken the Grand Prix down for now while I work on these issues. Look forward to it coming back up in a better state in the next couple of weeks.\n\nAdditional minor bug fixes."),1.1===e&&(i="Two new animals have been added to the game!<ul><li>The <span class='flatlandColor'>Warthog</span> is a new Flatland racer that you can purchase from the Shop.</li><li>The <span class='waterColor'>Whale</span> is a new Ocean racer that is rewarded for reaching Circuit Rank B (25).</li></ul>The <span class='flatlandColor'>Hare</span> is now rewarded for reaching Circuit Rank Q (10). It is no longer listed in the Shop and anyone who has already purchased it will receive 1000 Coins immediately.\n\nBuried Treasure (<span class='waterColor'>Octopus</span>) and Cold Blooded (<span class='volcanicColor'>Salamander</span>) have both been reworked.\n\nMany Circuit Rank rewards were moved around to make the early game flow better. Of note, the Dolphin is now a reward at Circuit Rank L (15) so that you have more time with only two race course types.\n\nCertain items in the shop have been locked behind reaching Circuit Rank AZ (27) before they appear to better guide new players to aim for items better suited for early game.\n\nBy default, free races now give 1 medal per 50 free race victories.\n\nEarly game circuit races and free races in general are now easier.\n\nAfter the Attraction change last patch, upgrading barns became a bit too easy at higher levels. Coin cost per upgrade level for barns has been adjusted higher starting at level 100 to keep the time between upgrades balanced.\n\nAdded option to 'Export to File'/'Import from File' to make saving and loading easier.\n\nRemoved 'Stats' navigation page. It was really bare bones and just added more to the length of the navigation bar. I will eventually re-implement this in a better fashion.\n\nVarious bug fixes and UI improvements."),1.11===e&&(i="The Grand Prix has returned!<ul><li>New items have been added as rewards up to the 1 million meter mark for the first rank of the Grand Prix.</li><li>There were some minor adjustments to Token cost of items from the Token shop.</li><li>You can now set the desired energy level of your animals before they relay.</li><li>Bug fixes related to Grand Prix.</li></ul>A new item has been added to the shop (Gingko Leaves) that allow you to reset your Breed level and incubator upgrades back to their default levels. In return, you gain 1000% Breed XP until you get back to the Breed Level you were originally at. This will allow those who felt like they want to redo their incubator upgrades to be able to do so quickly.\n\nPutting an animal in the incubator now pauses their current training instead of cancelling it.\n\nVarious bug fixes and UI improvements."),1.12===e&&(i="Added option to not relay to animals below entered energy amount during Grand Prix.\n\nBug fixes related to Grand Prix."),1.13===e&&(i="Changed energy floor from 10% to 30%.\n\nRefunded a team manager and tokens to those who started on earlier versions and did not correctly receive or had bugs related to them.\n\nMore bug fixes."),1.14===e&&(i="Added option to minimize special races/training tracks for better visibility.\n\nAdded trait % value under the animals when looking at the Incubator to easily see an animal's current status.\n\nYou can now preview a talent tree before selecting.\n\nMore bug fixes. (view Discord Change Log for full info)"),1.15===e&&(i="The Pinnacle has been added to the game!<ul><li>After reaching Circuit Rank AAAZ (79), you will have access to a new Special Race called The Pinnacle.</li><li>Each floor of the Pinnacle has its own special rules. Pay attention to the conditions and plan your team out to maximize your success!</li><li>As you race, you will pass ritualistic braziers where you place the orbs you received as you ranked up to increase their max level.</li></ul>Balance adjustments have been made for Circuit and Special races mostly around the time of being Circuit Rank AA (52) and higher.\n\nIncubator upgrade prices have been increased to be more in line with the coin gain increases that were made.\n\nMinor bug fixes."),1.16===e&&(i="Adjustments have been made to the following abilities to be additive instead of multiplicative: On The Hunt (Cheetah), Deep Breathing (Goat), Night Vision (Gecko), Big Brain (Octopus), Quick Toboggan (Penguin), Special Delivery (Caribou)\n\nSecond Wind (Horse) was nerfed slightly so that you cannot prevent stamina reduction from happening at all. \n\nMinor bug fixes."),1.17===e&&(i="Adjustments have been made to the following abilities: Giving Chase (Cheetah), Sure-footed (Goat), In The Rhythm (Goat), Blood In The Water (Shark), Wild Toboggan (Penguin), Herd Mentality (Caribou), and Fleeting Speed (Fox). Same as the previous round of changes, the intention is to make sure abilities can't become game breaking with scaling multiplicative percents.\n\nEndurance and Acceleration coaching are now easier and should take roughly the same amount of time as the others. \n\nNew setting added so that you can condense your barn view. \n\nCode redemption now gives an alert with what your code has given you.\n\nMinor bug fixes."),1.18===e&&(i="You can now reset your talents for a fee when viewing a talent tree. All existing players will be given 1 free talent reset per animal to be used whenever they want.\n\nMinor bug fixes, mostly around grand prix."),1.19===e&&(i="Scrimmages have been added to the game!<ul><li>Scrimmages are a new option under Coaching. As opposed to gaining racing stats, Scrimmages allow you to permanently increase the base stats your animals revert to after Breeding.</li><li>Help your animal race through two paths. The faster they go, the better the rewards.</li></ul>Minor UI improvements."),1.2===e&&(i="Added Barn Improvements to the Shop after reaching rank AZ (27), giving each barn specialization a unique upgrade.\n\nTraining Facilities have been adjusted so that they give 20% Training Time Reduction by level 100 instead of 200.\n\nResearch Centers have been adjusted so that the training animal receives 75% of stat gain at level 10 instead of 50%.\n\nScrimmage total energy has been reduced to 30 instead of 100, but the stat gain amount should roughly remain the same. This should cut down on how long it takes to complete a Scrimmage session.\n\nGrand Prix reward amounts have been altered.<ul><li>Token rewards increase every five Grand Prixes during an event period instead of after every Grand Prix during an event period. This should smooth out token gain a bit more instead of hitting a point where you go from getting barely any tokens to a massive amount all at once.</li><li>Base coin rewards per interval have been increased from 250 to 100. This amount increases after every successful Grand Prix during an event period.</li></ul>Bug fixes."),1.21===e&&(i="A new reset has been added!<ul><li>A new training trace race, the Legacy Track, has been added. Complete for new bonuses as well as the unique item Nectar of the Gods.</li><li>Using Nectar of the Gods resets your Breed Level, Ability Levels, and Incubator Upgrades back to 1 for the animal using it. Your Breed Modifier is increased by an amount based on your Breed Level when using the Nectar.</li><li>A new item, Orb Infuser, has been added to the shop. After purchasing, any time you use Nectar of the Gods, you will also permanently increase the stat gain per orb level of the orb that animal has equipped.</li><li>After using Nectar of the Gods, the Legacy Track is reset so that you can regain the bonuses from that track race. The track gets progressively harder the more times you complete it.</li></ul>UI improvements."),1.22===e&&(i="Bug fixes for Legacy Track."),1.23===e&&(i="Added calculators for Nectar of the Gods reset to FAQ section.\n\nAdded a new distance indicator that shows up during races when the average pace is offscreen. You can toggle this on or off on the Settings page.\n\nRemoved the Alt/Ctrl/Shift multiplier keys from the shop and instead just added a text box to enter a quantity. This allows you to be more precise and gives mobile users the ability to buy in bulk.\n\nAdded ability to move barns around so that you can order them however you please. You can toggle the new barn options bar on or off on the Settings page.\n\nAdded ability to quick swap animals from one barn to another when viewing an animal in its barn.\n\nScrimmages have been adjusted to give slightly more rewards and to no longer be tied to the animal's breed level. Instead, each animal will have 15 scrimmage energy by default and 30 once you reach Circuit Rank AZ.\n\nThe back button on every page has been bound to the key 'b' for ease of navigation. I soon plan to give you the ability to choose your own keybinds."),1.24===e&&(i="Added a new limit to how many Mangoes you can buy from the Shop every month. This limit is increased each time your circuit rank makes it through the alphabet (so AZ, AAZ, etc.). The amount will reset at the beginning of each month. Trying this out as a solution to Mangoes becoming very strong the longer you play, but it is subject to change.\n\nMade changes to idle free race timers so that there is less load time.\n\nAdded 'Refresh Training' button that will restart all animal's trainings or restart their previous one if no training is currently active.\n\nYou can now select a training while an animal is in the Incubator or Grand Prix, but the training will not begin until they are no longer busy with those tasks.\n\nAdded button to cancel incubation.\n\nBug fixes and UI improvements."),i}getDateForVersion(e){var i=new Date;return 1===e&&(i=new Date("2022-07-08 12:00:00")),1.01===e&&(i=new Date("2022-07-10 12:00:00")),1.02===e&&(i=new Date("2022-07-18 12:00:00")),1.03===e&&(i=new Date("2022-07-24 12:00:00")),1.04===e&&(i=new Date("2022-07-27 12:00:00")),1.05===e&&(i=new Date("2022-07-29 12:00:00")),1.06===e&&(i=new Date("2022-08-04 12:00:00")),1.07===e&&(i=new Date("2022-08-06 12:00:00")),1.08===e&&(i=new Date("2022-08-07 12:00:00")),1.09===e&&(i=new Date("2022-08-11 12:00:00")),1.1===e&&(i=new Date("2022-08-16 12:00:00")),1.11===e&&(i=new Date("2022-08-21 12:00:00")),1.12===e&&(i=new Date("2022-08-22 12:00:00")),1.13===e&&(i=new Date("2022-08-25 12:00:00")),1.14===e&&(i=new Date("2022-08-28 12:00:00")),1.15===e&&(i=new Date("2022-09-03 12:00:00")),1.16===e&&(i=new Date("2022-09-05 12:00:00")),1.17===e&&(i=new Date("2022-09-07 12:00:00")),1.18===e&&(i=new Date("2022-09-11 12:00:00")),1.19===e&&(i=new Date("2022-09-13 12:00:00")),1.2===e&&(i=new Date("2022-09-15 12:00:00")),1.21===e&&(i=new Date("2022-09-21 12:00:00")),1.22===e&&(i=new Date("2022-09-21 12:00:00")),1.23===e&&(i=new Date("2022-09-26 12:00:00")),1.24===e&&(i=new Date("2022-09-29 12:00:00")),i.toDateString().replace(/^\S+\s/,"")}updatePlayerVersion(){var c=1.05;this.getListAscended().forEach(y=>{var C;if(this.globalService.globalVar.currentVersion<y){if(1.01===y){this.globalService.globalVar.notifications=new Gf;var T=this.globalService.globalVar.modifiers.find(J=>"breedLevelStatModifier"===J.text);void 0!==T&&(T.value=.05);var M=this.globalService.globalVar.modifiers.find(J=>"breedGaugeMaxIncreaseModifier"===J.text);void 0!==M&&(M.value=10);var S=this.globalService.globalVar.modifiers.find(J=>"breedingGroundsSpecializationModifier"===J.text);void 0!==S&&(S.value=.1),this.globalService.globalVar.animals.forEach(J=>{J.breedLevel=Math.round(J.breedLevel/2),J.breedGaugeXp=2*J.breedGaugeXp}),null!=(w=this.globalService.globalVar.animalDecks.find(J=>J.isPrimaryDeck))&&(w.isEventDeck=!0)}else if(1.02===y){if(this.globalService.globalVar.eventRaceData=new er,this.globalService.globalVar.modifiers.push(new X(.1,"exhaustionStatLossMinimumModifier")),this.globalService.globalVar.modifiers.push(new X(5e6,"metersPerCoinsGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new X(2e7,"metersPerRenownGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new X(100,"grandPrixCoinRewardModifier")),this.globalService.globalVar.modifiers.push(new X(5,"grandPrixRenownRewardModifier")),this.globalService.globalVar.modifiers.push(new X(5e7,"grandPrixToken1MeterModifier")),this.globalService.globalVar.modifiers.push(new X(1e8,"grandPrixToken2MeterModifier")),this.globalService.globalVar.modifiers.push(new X(25e7,"grandPrixToken3MeterModifier")),this.globalService.globalVar.modifiers.push(new X(5e8,"grandPrixToken4MeterModifier")),this.globalService.globalVar.modifiers.push(new X(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new X(.02,"exhaustionGainGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new X(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new X(75,"grandPrixBreedLevelRequiredModifier")),this.globalService.globalVar.modifiers.push(new X(2,"scaryMaskEquipmentModifier")),this.globalService.globalVar.modifiers.push(new X(1.2,"runningShoesEquipmentModifier")),this.globalService.globalVar.modifiers.push(new X(.9,"incenseEquipmentModifier")),this.globalService.globalVar.modifiers.push(new X(.5,"athleticTapeEquipmentModifier")),this.globalService.globalVar.modifiers.push(new X(.2,"weatherMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new X(.03,"focusMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new X(.01,"stumbleMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new X(.05,"segmentCompleteMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new X(5,"whistleModifier")),this.globalService.globalVar.modifiers.push(new X(10,"goldenWhistleModifier")),this.globalService.InitializeTokenShop(),null!=(B=this.globalService.globalVar.shop.find(J=>"Specialty"===J.name))){var j=new et;j.name="Whistle",j.purchasePrice.push(this.globalService.getCoinsResourceValue(2500)),j.basePurchasePrice.push(this.globalService.getCoinsResourceValue(2500)),j.totalShopQuantity=1,j.canHaveMultiples=!1,j.isAvailable=this.lookupService.isItemUnlocked("coaching"),j.type=G.Specialty,B.itemList.push(j);var de=new et;de.name="Golden Whistle",de.purchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),de.basePurchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),de.totalShopQuantity=1,de.canHaveMultiples=!1,de.isAvailable=!1,de.type=G.Specialty,B.itemList.push(de)}this.globalService.globalVar.animals.forEach(J=>{J.allTrainingTracks.noviceTrack.rewards.filter(Z=>"Bonus Breed XP Gain From Local Races"===Z.name).forEach(Z=>{Z.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(J=>{J.allTrainingTracks.intermediateTrack.rewards.filter(Z=>"Bonus Breed XP Gain From Local Races"===Z.name).forEach(Z=>{Z.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(J=>{J.allTrainingTracks.masterTrack.rewards.filter(Z=>"Bonus Breed XP Gain From Local Races"===Z.name).forEach(Z=>{Z.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(J=>{J.breedGaugeMax=200+10*(J.breedLevel-1)})}else if(1.03===y)this.globalService.globalVar.animals.forEach(J=>{(isNaN(Number(J.breedLevel))||null==J.breedLevel)&&(J.breedLevel=1)});else if(1.04===y)this.fixTrackRewardsBug(),this.globalService.globalVar.notifications.isEventRaceNowActive=!1,this.globalService.globalVar.animals.forEach(J=>{if(J.type===L.Cheetah){var Z=J.availableAbilities.find(Ki=>"Giving Chase"===Ki.name);void 0!==Z&&(Z.efficiency=.5),"Giving Chase"===J.ability.name&&(J.ability.efficiency=.5);var bi=J.availableAbilities.find(Ki=>"On The Hunt"===Ki.name);void 0!==bi&&(bi.efficiency=.1),"On The Hunt"===J.ability.name&&(J.ability.efficiency=.1)}if(J.type===L.Goat){var Vi=J.availableAbilities.find(Ki=>"Deep Breathing"===Ki.name);void 0!==Vi&&(Vi.efficiency=.25),"Deep Breathing"===J.ability.name&&(J.ability.efficiency=.25);var hn=J.availableAbilities.find(Ki=>"In The Rhythm"===Ki.name);void 0!==hn&&(hn.efficiency=.1),"In The Rhythm"===J.ability.name&&(J.ability.efficiency=.1);var xo=J.availableAbilities.find(Ki=>"Sure-footed"===Ki.name);void 0!==xo&&(xo.efficiency=.5),"Sure-footed"===J.ability.name&&(J.ability.efficiency=.5)}if(J.type===L.Gecko){var Na=J.availableAbilities.find(Ki=>"Night Vision"===Ki.name);void 0!==Na&&(Na.efficiency=.2),"Night Vision"===J.ability.name&&(J.ability.efficiency=.2)}if(J.type===L.Shark){var gr=J.availableAbilities.find(Ki=>"Blood In The Water"===Ki.name);void 0!==gr&&(gr.efficiency=.1),"Blood In The Water"===J.ability.name&&(J.ability.efficiency=.1)}if(J.type===L.Octopus){var xn=J.availableAbilities.find(Ki=>"Buried Treasure"===Ki.name);void 0!==xn&&(xn.efficiency=1),"Buried Treasure"===J.ability.name&&(J.ability.efficiency=1);var Qo=J.availableAbilities.find(Ki=>"Big Brain"===Ki.name);void 0!==Qo&&(Qo.efficiency=2),"Big Brain"===J.ability.name&&(J.ability.efficiency=2)}if(J.type===L.Penguin){var no=J.availableAbilities.find(Ki=>"Wild Toboggan"===Ki.name);void 0!==no&&(no.efficiency=4),"Wild Toboggan"===J.ability.name&&(J.ability.efficiency=4);var tl=J.availableAbilities.find(Ki=>"Quick Toboggan"===Ki.name);void 0!==tl&&(tl.efficiency=.1),"Quick Toboggan"===J.ability.name&&(J.ability.efficiency=.1)}if(J.type===L.Caribou){var fd=J.availableAbilities.find(Ki=>"Herd Mentality"===Ki.name);void 0!==fd&&(fd.efficiency=.5),"Herd Mentality"===J.ability.name&&(J.ability.efficiency=.5);var Cs=J.availableAbilities.find(Ki=>"Special Delivery"===Ki.name);void 0!==Cs&&(Cs.efficiency=.05),"Special Delivery"===J.ability.name&&(J.ability.efficiency=.05)}if(J.type===L.Fox){var il=J.availableAbilities.find(Ki=>"Fleeting Speed"===Ki.name);void 0!==il&&(il.efficiency=1.5),"Fleeting Speed"===J.ability.name&&(J.ability.efficiency=1.5)}}),void 0!==(ne=this.globalService.globalVar.modifiers.find(J=>"autoFreeRacesMaxIdleTimePeriodModifier"===J.text))&&(ne.value=7200);else if(1.05===y)null!=this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.isCatchingUp&&(this.globalService.globalVar.eventRaceData.isCatchingUp=!1),void 0!==(ue=this.globalService.globalVar.modifiers.find(J=>"grandPrixBreedLevelRequiredModifier"===J.text))&&(ue.value=50);else if(1.06===y){this.globalService.globalVar.previousEventRewards=[],this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Z=>"Bonus Breed XP Gain From Training"!==Z.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Z=>"Bonus Breed XP Gain From Free Races"!==Z.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Z=>"Diminishing Returns per Facility Level"!==Z.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Z=>"Training Time Reduction"!==Z.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Z=>"Bonus Breed XP Gain From Circuit Races"!==Z.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Z=>"Bonus Talents"!==Z.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Z=>"Orb Pendant"!==Z.name),this.fixTrackRewardsBug(),this.globalService.globalVar.modifiers.push(new X(.02,"burstMoraleBoostModifier"));var ue,se=this.globalService.globalVar.modifiers.find(Z=>"grandPrixRenownRewardModifier"===Z.text);void 0!==se&&(se.value=3),void 0!==(ue=this.globalService.globalVar.modifiers.find(Z=>"grandPrixBreedLevelRequiredModifier"===Z.text))&&(ue.value=25),void 0!==this.globalService.globalVar.incubator&&(this.globalService.globalVar.incubator.timeToComplete=120),this.globalService.globalVar.settings.set("autoStartEventRace",!1)}else if(1.07===y){var Ce=0,Se=0;if(this.globalService.globalVar.resources.forEach(J=>{"Headband"===J.name&&(Ce+=1,Se+=J.amount)}),Ce>1){var ve=this.globalService.globalVar.resources.findIndex(J=>"Headband"===J.name);this.globalService.globalVar.resources.splice(ve,1),void 0!==(Oe=this.globalService.globalVar.resources.find(J=>"Headband"===J.name))&&(Oe.amount=Se)}var Oe,Ke=0,Ht=0;if(this.globalService.globalVar.resources.forEach(J=>{"Blue Baton"===J.name&&(Ke+=1,Ht+=J.amount)}),Ke>1)ve=this.globalService.globalVar.resources.findIndex(bi=>"Blue Baton"===bi.name),this.globalService.globalVar.resources.splice(ve,1),void 0!==(Oe=this.globalService.globalVar.resources.find(bi=>"Blue Baton"===bi.name))&&(Oe.amount=Ht)}else if(1.08===y){if(this.globalService.globalVar.showBreedWarning=!1,void 0===this.globalService.globalVar.tutorials&&(this.globalService.globalVar.tutorials=new Hf),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>9){var qe=1e3;null==(ft=this.globalService.globalVar.resources.find(J=>"Coins"===J.name))?this.globalService.globalVar.resources.push(new te("Coins",qe)):ft.amount+=qe}this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>23&&(qe=1500,null==(ft=this.globalService.globalVar.resources.find(bi=>"Coins"===bi.name))?this.globalService.globalVar.resources.push(new te("Coins",qe)):ft.amount+=qe)}else if(1.09===y){var ne;void 0!==(ne=this.globalService.globalVar.modifiers.find(Z=>"autoFreeRacesMaxIdleTimePeriodModifier"===Z.text))&&(ne.value=28800);var xt=this.globalService.globalVar.modifiers.find(Z=>"smallBarnTrainingTimeModifier"===Z.text);void 0!==xt&&(xt.value=14400);var Dt=this.globalService.globalVar.modifiers.find(Z=>"mediumBarnTrainingTimeModifier"===Z.text);void 0!==Dt&&(Dt.value=28800);var ee=this.globalService.globalVar.modifiers.find(Z=>"largeBarnTrainingTimeModifier"===Z.text);void 0!==ee&&(ee.value=43200);var R=this.globalService.globalVar.trainingOptions.find(Z=>Z.trainingType===ze.Footwork);void 0!==R&&(R.affectedStatRatios=new Ve(0,.25,0,0,0,1));var pt=this.globalService.globalVar.trainingOptions.find(Z=>Z.trainingType===ze.DodgeBall);void 0!==pt&&(pt.affectedStatRatios=new Ve(0,2.5,0,0,0,1),pt.timeToComplete=60);var _t=this.globalService.globalVar.shop.find(Z=>"Food"===Z.name);if(void 0!==_t){var Kt=_t.itemList.find(Z=>"Apples"===Z.name);void 0!==Kt&&(Kt.purchasePrice=[],Kt.purchasePrice.push(new te("Coins",10)));var ct=_t.itemList.find(Z=>"Bananas"===Z.name);void 0!==ct&&(ct.purchasePrice=[],ct.purchasePrice.push(new te("Coins",10)));var ii=_t.itemList.find(Z=>"Strawberries"===Z.name);void 0!==ii&&(ii.purchasePrice=[],ii.purchasePrice.push(new te("Coins",10)));var Ue=_t.itemList.find(Z=>"Carrots"===Z.name);void 0!==Ue&&(Ue.purchasePrice=[],Ue.purchasePrice.push(new te("Coins",10)));var Ri=_t.itemList.find(Z=>"Turnips"===Z.name);void 0!==Ri&&(Ri.purchasePrice=[],Ri.purchasePrice.push(new te("Coins",10)));var tn=_t.itemList.find(Z=>"Oranges"===Z.name);void 0!==tn&&(tn.purchasePrice=[],tn.purchasePrice.push(new te("Coins",10)));var Ei=_t.itemList.find(Z=>"Mangoes"===Z.name);if(void 0!==Ei){var Ai=Ei.purchasePrice.find(Z=>"Coins"===Z.name);void 0!==Ai&&(Ai.amount-=400)}var hi=this.globalService.globalVar.modifiers.find(Z=>"attractionAmountModifier"===Z.text);void 0!==hi&&(hi.value=20),this.globalService.stopGrandPrixRace()}}else if(1.1===y){this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)<26?this.globalService.lockTier2ShopItems():this.globalService.unlockTier2ShopItems(),this.globalService.globalVar.modifiers.push(new X(.3*1.025,"warthogDefaultMaxSpeedModifier")),this.globalService.globalVar.modifiers.push(new X(.1,"warthogDefaultAccelerationModifier")),this.globalService.globalVar.modifiers.push(new X(5*c,"warthogDefaultStaminaModifier")),this.globalService.globalVar.modifiers.push(new X(1.025,"warthogDefaultPowerModifier")),this.globalService.globalVar.modifiers.push(new X(4.875,"warthogDefaultFocusModifier")),this.globalService.globalVar.modifiers.push(new X(4.75,"warthogDefaultAdaptabilityModifier")),this.globalService.globalVar.modifiers.push(new X(.27,"whaleDefaultMaxSpeedModifier")),this.globalService.globalVar.modifiers.push(new X(.1,"whaleDefaultAccelerationModifier")),this.globalService.globalVar.modifiers.push(new X(5*c,"whaleDefaultStaminaModifier")),this.globalService.globalVar.modifiers.push(new X(1*c,"whaleDefaultPowerModifier")),this.globalService.globalVar.modifiers.push(new X(5.5,"whaleDefaultFocusModifier")),this.globalService.globalVar.modifiers.push(new X(4.75,"whaleDefaultAdaptabilityModifier"));var Pi=new jR;Pi.name="Warthog",this.globalService.calculateAnimalRacingStats(Pi);var vi=new $R;vi.name="Whale",this.globalService.calculateAnimalRacingStats(vi),this.globalService.globalVar.animals.push(Pi),this.globalService.globalVar.animals.push(vi),this.globalService.sortAnimalOrder();var Gt,fi=this.globalService.globalVar.shop.find(Z=>"Abilities"===Z.name);if(Pi.availableAbilities.forEach(Z=>{if(!Z.isAbilityPurchased){var bi=new et;bi.name=Pi.getAnimalType()+" Ability: "+Z.name,bi.purchasePrice.push(new te("Coins",Z.purchasePrice)),bi.canHaveMultiples=!1,bi.type=G.Ability,bi.additionalIdentifier=Z.name,bi.isAvailable=Pi.isAvailable,null==fi||fi.itemList.push(bi)}}),vi.availableAbilities.forEach(Z=>{if(!Z.isAbilityPurchased){var bi=new et;bi.name=vi.getAnimalType()+" Ability: "+Z.name,bi.purchasePrice.push(new te("Coins",Z.purchasePrice)),bi.canHaveMultiples=!1,bi.type=G.Ability,bi.additionalIdentifier=Z.name,bi.isAvailable=vi.isAvailable,null==fi||fi.itemList.push(bi)}}),null!=(Gt=this.globalService.globalVar.shop.find(Z=>"Animals"===Z.name))){var mn=new et;mn.name="Warthog",mn.purchasePrice.push(new te("Coins",1e3)),mn.canHaveMultiples=!1,mn.type=G.Animal,Gt.itemList.push(mn)}if(this.globalService.globalVar.modifiers.push(new X(50,"freeRacesToMedalModifier")),null!=(B=this.globalService.globalVar.shop.find(Z=>"Specialty"===Z.name))){var mt=B.itemList.find(Z=>"Team Manager"===Z.name);null!=mt&&(mt.totalShopQuantity=19);var mi=new et;mi.name="Talent Point Voucher",mi.purchasePrice.push(this.globalService.getMedalResourceValue(25)),mi.basePurchasePrice.push(this.globalService.getMedalResourceValue(25)),mi.infiniteAmount=!0,mi.canHaveMultiples=!0,mi.quantityAdditive=25,mi.isAvailable=!1,this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=53&&(mi.isAvailable=!0),mi.type=G.Specialty,B.itemList.push(mi)}if((null===(C=this.globalService.globalVar.animals.find(Z=>Z.type===L.Hare))||void 0===C?void 0:C.isAvailable)&&(qe=1e3,null==(ft=this.globalService.globalVar.resources.find(Vi=>"Coins"===Vi.name))?this.globalService.globalVar.resources.push(new te("Coins",qe)):ft.amount+=qe),null!=(Gt=this.globalService.globalVar.shop.find(Z=>"Animals"===Z.name))){var wt=Gt.itemList.find(Z=>"Hare"===Z.name);null!=wt&&(wt.isAvailable=!1)}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=10){var Ui=this.globalService.globalVar.animals.find(Z=>Z.type===L.Hare);void 0!==Ui&&(Ui.isAvailable=!0,this.globalService.unlockAnimalAbilities(Ui))}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=13&&this.globalService.globalVar.unlockables.set("barnRow2",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=14&&this.globalService.globalVar.unlockables.set("attractionSpecialization",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=25){var ai=this.globalService.globalVar.animals.find(Z=>Z.type===L.Whale);void 0!==ai&&(ai.isAvailable=!0,this.globalService.unlockAnimalAbilities(ai))}this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=29&&this.globalService.globalVar.unlockables.set("barnRow3",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=40&&this.globalService.globalVar.unlockables.set("barnRow4",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=58&&this.globalService.globalVar.unlockables.set("barnRow5",!0);var oi=this.globalService.globalVar.animals.find(Z=>Z.type===L.Octopus);if(void 0!==oi){var nn=oi.availableAbilities.find(Z=>"Buried Treasure"===Z.name);void 0!==nn&&(nn.efficiency=100),"Buried Treasure"===oi.ability.name&&(oi.ability.efficiency=100)}var ji=this.globalService.globalVar.animals.find(Z=>Z.type===L.Salamander);if(void 0!==ji){var Bi=ji.availableAbilities.find(Z=>"Cold Blooded"===Z.name);void 0!==Bi&&(Bi.efficiency=45),"Cold Blooded"===ji.ability.name&&(ji.ability.efficiency=45)}}else if(1.11===y){if(void 0!==this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.currentEventEndDate&&(this.globalService.globalVar.eventRaceData=new er,this.globalService.globalVar.eventRaceData.initialSetupComplete=!1),null!=(B=this.globalService.globalVar.shop.find(Z=>"Food"===Z.name))){var Ni=new et;Ni.name="Gingko Leaves",Ni.shortDescription="Reset Breed Level for a single animal back to 1 and remove all incubator upgrade gains. Increase Breed XP Gain by 900% until Breed Level returns to what it was.",Ni.purchasePrice.push(new te("Coins",3500)),Ni.canHaveMultiples=!0,Ni.type=G.Food,Ni.infiniteAmount=!0,Ni.isAvailable=!0,B.itemList.push(Ni)}var gn=this.globalService.globalVar.modifiers.find(Z=>"metersPerCoinsGrandPrixModifier"===Z.text);void 0!==gn&&(gn.value=25e5);var $i=this.globalService.globalVar.modifiers.find(Z=>"segmentCompleteMoraleBoostModifier"===Z.text);void 0!==$i&&($i.value=.1);var Gn=this.globalService.globalVar.modifiers.find(Z=>"weatherMoraleBoostModifier"===Z.text);if(void 0!==Gn&&(Gn.value=.5),this.globalService.globalVar.relayEnergyFloor=50,this.globalService.globalVar.pinnacleFloor="Z",this.globalService.globalVar.unlockables.set("thePinnacle",!1),void 0!==(zn=this.globalService.globalVar.tokenShop.find(Z=>"Tier 2"===Z.name))){var Dr=zn.itemList.find(Z=>"Coins"===Z.name),bn=zn.itemList.find(Z=>"Training Breed XP Gain Certificate"===Z.name),dn=zn.itemList.find(Z=>"Diminishing Returns Increase Certificate"===Z.name);void 0!==Dr&&(Dr.purchasePrice=[],Dr.purchasePrice.push(new te("Tokens",1))),void 0!==bn&&(bn.purchasePrice=[],bn.purchasePrice.push(new te("Tokens",2))),void 0!==dn&&(dn.purchasePrice=[],dn.purchasePrice.push(new te("Tokens",4)))}}else if(1.12===y)this.globalService.globalVar.doNotRelayBelowEnergyFloor=!1;else if(1.13===y){if(this.globalService.globalVar.startingVersion<=1.02){var ke=this.globalService.globalVar.resources.find(Z=>"Tokens"===Z.name);null!=ke&&(ke.amount+=5)}var ft,w,ut=this.globalService.globalVar.resources.find(Z=>"Mangoes"===Z.name&&Z.itemType===G.Resources);if(void 0!==ut){var nr=this.globalService.globalVar.resources.find(Z=>"Mangoes"===Z.name&&Z.itemType===G.Food);null!=nr?nr.amount+=ut.amount:this.globalService.globalVar.resources.push(new te("Mangoes",ut.amount,G.Food)),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Z=>!("Mangoes"===Z.name&&Z.itemType===G.Resources))}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=6&&this.globalService.globalVar.startingVersion<=1.09)qe=1,null==(ft=this.globalService.globalVar.resources.find(Vi=>"Team Manager"===Vi.name))?(this.globalService.globalVar.resources.push(new te("Team Manager",qe,G.Specialty)),this.globalService.globalVar.animalDecks.some(Vi=>Vi.autoRunFreeRace)||null!=(w=this.globalService.globalVar.animalDecks.find(hn=>hn.isPrimaryDeck))&&(w.autoRunFreeRace=!0)):ft.amount+=qe;this.globalService.globalVar.orbStats=new qs;var ws=this.globalService.globalVar.modifiers.find(Z=>"exhaustionStatLossMinimumModifier"===Z.text);void 0!==ws&&(ws.value=.3);var fa=this.globalService.globalVar.tokenShop.find(Z=>"Tier 1"===Z.name),zn=this.globalService.globalVar.tokenShop.find(Z=>"Tier 2"===Z.name);if(void 0!==fa){var xr=fa.itemList.find(Z=>"Free Race Breed XP Gain Certificate"===Z.name),Ea=fa.itemList.find(Z=>"Circuit Race Breed XP Gain Certificate"===Z.name);void 0!==xr&&(xr.type=G.Consumable),void 0!==Ea&&(Ea.type=G.Consumable)}void 0!==zn&&(bn=zn.itemList.find(Vi=>"Training Breed XP Gain Certificate"===Vi.name),dn=zn.itemList.find(Vi=>"Diminishing Returns Increase Certificate"===Vi.name),void 0!==bn&&(bn.type=G.Consumable),void 0!==dn&&(dn.type=G.Consumable))}else if(1.14===y)null!=this.globalService.globalVar.eventRaceData&&(this.globalService.globalVar.eventRaceData.rankDistanceMultiplier=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank)),this.globalService.globalVar.settings.set("monoRaceToggled",!1),this.globalService.globalVar.settings.set("duoRaceToggled",!1),this.globalService.globalVar.settings.set("rainbowRaceToggled",!1),this.globalService.globalVar.settings.set("pinnacleRaceToggled",!1),this.globalService.globalVar.settings.set("noviceTrainingTrackToggled",!1),this.globalService.globalVar.settings.set("intermediateTrainingTrackToggled",!1),this.globalService.globalVar.settings.set("masterTrainingTrackToggled",!1);else if(1.15===y){this.globalService.globalVar.pinnacleHistory=new bs,this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=79&&(this.globalService.globalVar.unlockables.set("thePinnacle",!0),this.globalService.globalVar.notifications.isNewSpecialRaceAvailable=!0),this.globalService.globalVar.settings.set("amberOrbToggled",!1),this.globalService.globalVar.settings.set("amethystOrbToggled",!1),this.globalService.globalVar.settings.set("emeraldOrbToggled",!1),this.globalService.globalVar.settings.set("rubyOrbToggled",!1),this.globalService.globalVar.settings.set("sapphireOrbToggled",!1),this.globalService.globalVar.settings.set("topazOrbToggled",!1);var lr=this.globalService.globalVar.shop.find(J=>"Specialty"===J.name);if(void 0!==lr){var kr=lr.itemList.find(J=>"Incubator Upgrade Lv2"===J.name);void 0!==kr&&(kr.purchasePrice=[],kr.purchasePrice.push(new te("Coins",25e3)));var Kr=lr.itemList.find(J=>"Incubator Upgrade Lv3"===J.name);void 0!==Kr&&(Kr.purchasePrice=[],Kr.purchasePrice.push(new te("Coins",1e5)));var cr=lr.itemList.find(J=>"Incubator Upgrade Lv4"===J.name);void 0!==cr&&(cr.purchasePrice=[],cr.purchasePrice.push(new te("Coins",1e6)))}}else if(1.16===y)this.globalService.globalVar.animals.forEach(J=>{var Z;J.type===L.Octopus&&(void 0!==(Z=J.availableAbilities.find(bi=>"Big Brain"===bi.name))&&(Z.efficiency=4),"Big Brain"===J.ability.name&&(J.ability.efficiency=4)),J.type===L.Cheetah&&(void 0!==(Z=J.availableAbilities.find(Vi=>"On The Hunt"===Vi.name))&&(Z.efficiency=.5),"On The Hunt"===J.ability.name&&(J.ability.efficiency=.5)),J.type===L.Gecko&&(void 0!==(Z=J.availableAbilities.find(Vi=>"Night Vision"===Vi.name))&&(Z.efficiency=.75),"Night Vision"===J.ability.name&&(J.ability.efficiency=.75)),J.type===L.Penguin&&(void 0!==(Z=J.availableAbilities.find(Vi=>"Quick Toboggan"===Vi.name))&&(Z.efficiency=.5),"Quick Toboggan"===J.ability.name&&(J.ability.efficiency=.5)),J.type===L.Goat&&(void 0!==(Z=J.availableAbilities.find(Vi=>"Deep Breathing"===Vi.name))&&(Z.efficiency=8),"Deep Breathing"===J.ability.name&&(J.ability.efficiency=8)),J.type===L.Caribou&&(void 0!==(Z=J.availableAbilities.find(Vi=>"Special Delivery"===Vi.name))&&(Z.efficiency=5),"Special Delivery"===J.ability.name&&(J.ability.efficiency=5))});else if(1.17===y)this.globalService.globalVar.settings.set("quickViewBarnMode",!1),null!=this.globalService.globalVar.eventRaceData&&(this.globalService.globalVar.eventRaceData.eventAbilityData.storingPowerUseCap=25,this.globalService.globalVar.eventRaceData.eventAbilityData.storingPowerUseCount=0),this.globalService.globalVar.animals.forEach(J=>{if(J.type===L.Cheetah&&(void 0!==(Z=J.availableAbilities.find(Vi=>"Giving Chase"===Vi.name))&&(Z.efficiency=1),"Giving Chase"===J.ability.name&&(J.ability.efficiency=1)),J.type===L.Goat){var Z;void 0!==(Z=J.availableAbilities.find(hn=>"Sure-footed"===hn.name))&&(Z.efficiency=50),"Sure-footed"===J.ability.name&&(J.ability.efficiency=50);var bi=J.availableAbilities.find(hn=>"In The Rhythm"===hn.name);void 0!==bi&&(bi.efficiency=.2),"In The Rhythm"===J.ability.name&&(J.ability.efficiency=.2)}J.type===L.Shark&&(void 0!==(Z=J.availableAbilities.find(hn=>"Blood In The Water"===hn.name))&&(Z.efficiency=2),"Blood In The Water"===J.ability.name&&(J.ability.efficiency=2)),J.type===L.Penguin&&(void 0!==(Z=J.availableAbilities.find(hn=>"Wild Toboggan"===hn.name))&&(Z.efficiency=1.5),"Wild Toboggan"===J.ability.name&&(J.ability.efficiency=1.5)),J.type===L.Fox&&(void 0!==(Z=J.availableAbilities.find(hn=>"Fleeting Speed"===hn.name))&&(Z.efficiency=4),"Fleeting Speed"===J.ability.name&&(J.ability.efficiency=4)),J.type===L.Caribou&&(void 0!==(Z=J.availableAbilities.find(hn=>"Herd Mentality"===hn.name))&&(Z.efficiency=3),"Herd Mentality"===J.ability.name&&(J.ability.efficiency=3))});else if(1.18===y)this.globalService.globalVar.animals.forEach(J=>{J.talentResetCount=0,J.freeTalentResetCount=1});else if(1.19===y)this.globalService.globalVar.animals.forEach(J=>{J.increasedDefaultStats=new Ve(0,0,0,0,0,0),J.scrimmageEnergyTimer=0}),this.globalService.globalVar.tutorials.showScrimmageTutorial=!0;else if(1.2===y){var Do=this.globalService.globalVar.modifiers.find(Z=>"grandPrixCoinRewardModifier"===Z.text);void 0!==Do&&(Do.value=250);var pr=this.globalService.globalVar.modifiers.find(Z=>"researchCenterTrainingAnimalModifier"===Z.text);if(void 0!==pr&&(pr.value=.7),this.globalService.globalVar.modifiers.push(new X(.001,"attractionRenownAmountModifier")),this.globalService.globalVar.modifiers.push(new X(1,"trainingFacilityAbilityXpAmountModifier")),this.globalService.globalVar.modifiers.push(new X(.1,"researchCenterRewardBonusAmountModifier")),this.globalService.globalVar.modifiers.push(new X(.05,"breedingGroundsAdditionalAmountModifier")),this.globalService.globalVar.barns.forEach(Z=>{Z.barnUpgrades.trainingFacilityDeltaTime=0}),null!=(B=this.globalService.globalVar.shop.find(Z=>"Specialty"===Z.name))){var _n=new et;_n.name="Training Facility Improvements",_n.purchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),_n.basePurchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),_n.totalShopQuantity=1,_n.canHaveMultiples=!1,_n.isAvailable=!1,_n.type=G.Specialty,B.itemList.push(_n),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=26&&(_n.isAvailable=!0);var ur=new et;ur.name="Breeding Grounds Improvements",ur.purchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),ur.basePurchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),ur.totalShopQuantity=1,ur.canHaveMultiples=!1,ur.isAvailable=!1,ur.type=G.Specialty,B.itemList.push(ur),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=26&&(ur.isAvailable=!0);var dr=new et;dr.name="Attraction Improvements",dr.purchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),dr.basePurchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),dr.totalShopQuantity=1,dr.canHaveMultiples=!1,dr.isAvailable=!1,dr.type=G.Specialty,B.itemList.push(dr),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=26&&(dr.isAvailable=!0);var Fi=new et;Fi.name="Research Center Improvements",Fi.purchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),Fi.basePurchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),Fi.totalShopQuantity=1,Fi.canHaveMultiples=!1,Fi.isAvailable=!1,Fi.type=G.Specialty,B.itemList.push(Fi),this.globalService.globalVar.unlockables.get("researchCenterSpecialization")&&(Fi.isAvailable=!0)}}else if(1.21===y){var B;if(this.globalService.globalVar.animals.forEach(Z=>{Z.legacyRaceCount=0,Z.miscStats.bonusAbilityEfficiency=0,Z.miscStats.bonusOrbXp=0}),null!=(B=this.globalService.globalVar.shop.find(Z=>"Specialty"===Z.name))){var qi=new et;qi.name="Orb Infuser",qi.purchasePrice.push(this.globalService.getCoinsResourceValue(5e6)),qi.basePurchasePrice.push(this.globalService.getCoinsResourceValue(5e6)),qi.canHaveMultiples=!1,qi.isAvailable=!1,qi.type=G.Specialty,B.itemList.push(qi),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=79&&(qi.isAvailable=!0)}}else 1.22===y?this.globalService.globalVar.animals.forEach(J=>{J.allTrainingTracks.masterTrack.rewardsObtained===J.allTrainingTracks.masterTrack.totalRewards&&(J.allTrainingTracks.legacyTrackAvailable=!0)}):1.23===y?(this.globalService.globalVar.settings.set("displayAverageDistancePace",!0),this.globalService.globalVar.settings.set("showBarnOptions",!0),this.globalService.globalVar.barnOrder=[],this.globalService.globalVar.barns.forEach(J=>{this.globalService.globalVar.barnOrder.push(J.barnNumber)}),this.globalService.globalVar.keybinds=new Ws,this.globalService.InitializeKeybinds()):1.24===y&&(this.globalService.globalVar.monthlyMangoesPurchased=0,this.globalService.globalVar.modifiers.push(new X(250,"monthlyMangoDefaultLimit")));this.globalService.globalVar.currentVersion=y}})}fixTrackRewardsBug(){this.globalService.globalVar.animals.filter(e=>e.isAvailable).forEach(e=>{var i=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces(),r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces(),a=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining(e),o=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(),s=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction(),l=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();e.miscStats.bonusBreedXpGainFromLocalRaces=0===e.miscStats.bonusLocalBreedXpCertificateCount?i:i+e.miscStats.bonusLocalBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromCircuitRaces=0===e.miscStats.bonusCircuitBreedXpCertificateCount?r:r+2*e.miscStats.bonusCircuitBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromTraining=0===e.miscStats.bonusTrainingBreedXpCertificateCount?a:a+e.miscStats.bonusTrainingBreedXpCertificateCount,e.miscStats.diminishingReturnsBonus=0===e.miscStats.bonusDiminishingReturnsCertificateCount?o:o+e.miscStats.bonusDiminishingReturnsCertificateCount,e.miscStats.trainingTimeReduction=s,e.miscStats.bonusTalents=l})}}return t.\u0275fac=function(e){return new(e||t)(He(It),He(Ti),He(Rn))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),c4=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.raceLogicService=r,this.lookupService=a}handleGrandPrix(e){var i=!1;if(null!=this.globalService.globalVar.eventRaceData.currentEventEndDate&&new Date>this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1))return i=!0,this.globalService.globalVar.eventRaceData=new er,void(this.globalService.globalVar.eventRaceData.initialSetupComplete=!1);if(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime&&(i=!0,this.globalService.globalVar.eventRaceData.isCatchingUp&&(i=!1),this.globalService.globalVar.eventRaceData.initialSetupComplete&&(this.globalService.globalVar.eventRaceData.remainingEventRaceTime>0&&new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1)?(this.globalService.globalVar.eventRaceData.segmentTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime,this.globalService.globalVar.eventRaceData.overallTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime):this.globalService.globalVar.eventRaceData.isCatchingUp||(this.globalService.globalVar.eventRaceData=new er)),!this.globalService.globalVar.eventRaceData.isCatchingUp&&0===this.globalService.globalVar.eventRaceData.remainingEventRaceTime))this.globalService.globalVar.eventRaceData.initialSetupComplete=!1;else{if(!this.globalService.globalVar.eventRaceData.initialSetupComplete){this.globalService.globalVar.previousEventRewards=[],this.globalService.initialGrandPrixSetup("Z",1),this.globalService.globalVar.eventRaceData.initialSetupComplete=!0,this.globalService.globalVar.notifications.isEventRaceNowActive=!0;var r=this.globalService.getCurrentEventStartEndDateTime(!1);r instanceof Date&&(this.globalService.globalVar.eventRaceData.currentEventStartDate=r);var a=this.globalService.getCurrentEventStartEndDateTime(!0);if(a instanceof Date&&(this.globalService.globalVar.eventRaceData.currentEventEndDate=a),this.globalService.globalVar.settings.get("autoStartEventRace")&&!1===this.globalService.globalVar.eventRaceData.isRunning){var o=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();if(this.globalService.globalVar.eventRaceData.segmentTimeCounter=o,this.globalService.globalVar.eventRaceData.overallTimeCounter=o,null!=(s=this.globalService.getGrandPrixRacingAnimal()).type){if(!this.globalService.globalVar.eventRaceData.animalData.some(v=>v.isCurrentlyRacing)){var l=this.globalService.globalVar.eventRaceData.animalData.find(v=>v.associatedAnimalType==s.type);void 0!==l&&(l.isCurrentlyRacing=!0)}this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(s),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}}}if(this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&this.globalService.increaseGrandPrixRaceRank(),this.globalService.getTimeToEventRace()>0&&this.globalService.globalVar.eventRaceData.bonusTime>0&&(this.globalService.globalVar.eventRaceData.bonusTime-=e,this.globalService.globalVar.eventRaceData.bonusTime<=0&&(this.globalService.globalVar.eventRaceData.bonusTime=0)),this.globalService.globalVar.eventRaceData.isRunning){if(null==this.globalService.globalVar.animalDecks.find(v=>v.isEventDeck))return;i||(this.globalService.globalVar.eventRaceData.segmentTimeCounter+=e,this.globalService.globalVar.eventRaceData.overallTimeCounter+=e),this.globalService.globalVar.eventRaceData.remainingEventRaceTime=new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1)?0:this.globalService.getRemainingEventRaceTime();var u=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60;if(this.globalService.globalVar.eventRaceData.segmentTimeCounter>=2*u&&new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1)?(this.globalService.globalVar.eventRaceData.isCatchingUp=!0,this.globalService.globalVar.eventRaceData.delayCatchingUpTimeCounter+=e):(this.globalService.globalVar.eventRaceData.isCatchingUp=!1,this.globalService.globalVar.eventRaceData.delayCatchingUpTimeCounter=0),this.globalService.globalVar.eventRaceData.segmentTimeCounter>=u)if(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1,this.globalService.globalVar.eventRaceData.segmentTimeCounter-=u,this.globalService.globalVar.eventRaceData.distanceCovered+=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.distanceCovered,this.globalService.globalVar.eventRaceData.previousRaceSegment=this.globalService.globalVar.eventRaceData.currentRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.previousRaceSegment.reduceExportSize(),this.globalService.globalVar.eventRaceData.distanceCovered>=this.globalService.globalVar.eventRaceData.totalDistance)this.globalService.globalVar.eventRaceData.distanceCovered=this.globalService.globalVar.eventRaceData.totalDistance,this.grandPrixRaceCompleted();else{var s;this.checkForEventRelayAnimal(this.globalService.globalVar.eventRaceData.isCatchingUp,this.globalService.globalVar.eventRaceData.segmentTimeCounter)&&this.resetEventAbilityUseCounts(),void 0!==(s=this.globalService.getGrandPrixRacingAnimal()).type&&void 0!==s.name&&(this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.globalVar.eventRaceData.nextRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.nextRaceSegment),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s,this.globalService.globalVar.eventRaceData.isCatchingUp?this.globalService.globalVar.eventRaceData.segmentTimeCounter:void 0),this.globalService.globalVar.eventRaceData.delayCatchingUpTimeCounter=0)}this.checkForGrandPrixRewards()}else this.globalService.globalVar.eventRaceData.isCatchingUp=!1;this.updateExhaustionAndMorale(e),this.updateWeatherCluster(e)}}grandPrixRaceCompleted(){this.globalService.globalVar.eventRaceData.isGrandPrixCompleted=!0,this.globalService.stopGrandPrixRace()}updateExhaustionAndMorale(e){this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter+=this.globalService.globalVar.eventRaceData.isCatchingUp?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60:e;var i=300,r=this.globalService.globalVar.modifiers.find(l=>"exhaustionGainTimerCapGrandPrixModifier"===l.text);null!=r&&(i=r.value);var a=.02,o=this.globalService.globalVar.modifiers.find(l=>"exhaustionGainGrandPrixModifier"===l.text);null!=o&&(a=o.value);var s=this.globalService.globalVar.eventRaceData.animalData.find(l=>l.isCurrentlyRacing);this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter>i&&(this.globalService.globalVar.eventRaceData.animalData.forEach(l=>{(!this.globalService.globalVar.eventRaceData.isRunning||void 0===s||l.associatedAnimalType!==(null==s?void 0:s.associatedAnimalType))&&(l.exhaustionStatReduction+=a,l.exhaustionStatReduction>=1&&(l.exhaustionStatReduction=1)),l.morale<1&&(l.morale+=a)}),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter-=i)}updateWeatherCluster(e){this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter+=e;var i=7200,r=this.globalService.globalVar.modifiers.find(a=>"weatherClusterTimerCapGrandPrixModifier"===a.text);null!=r&&(i=r.value),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter>i&&(this.globalService.globalVar.eventRaceData.weatherCluster=this.globalService.getRandomGrandPrixWeatherCluster(void 0,this.globalService.globalVar.eventRaceData.weatherCluster),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter-=i)}checkForEventRelayAnimal(e,i){var r=!1;if(this.globalService.globalVar.eventRaceData.animalData.some(w=>w.isSetToRelay))this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.isCurrentlyRacing=!1,w.isSetToRelay&&(w.isCurrentlyRacing=!0,w.isSetToRelay=!1,this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,r=!0,this.lookupService.getCourseTypeFromAnimalType(w.associatedAnimalType)===F.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0))});else{var a=this.globalService.getGrandPrixRacingAnimal(),o=this.globalService.getExhaustionOfAnimal(a.type),s=this.lookupService.getBreedLevelRequiredForGrandPrix();if(void 0!==o&&(o<.5||this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay)){this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay=!1;var l=this.globalService.globalVar.animalDecks.find(w=>w.isEventDeck);if(null!=l){var c=[];l.selectedAnimals.forEach(w=>{var B=this.globalService.globalVar.animals.find(j=>j.type===w.type);void 0!==B&&c.push(B)});var u=c.filter(w=>w.breedLevel>=s),f=[];if(l.isCourseOrderActive){for(var v=0;v<u.length;v++)if(l.courseTypeOrder.length>v){var b=l.courseTypeOrder[v],y=u.find(w=>w.raceCourseType===b);void 0!==y&&f.push(y)}}else u.forEach(w=>{f.push(w)});var C=.5;if(this.globalService.globalVar.doNotRelayBelowEnergyFloor&&(C=this.globalService.globalVar.relayEnergyFloor/100),(f=f.filter(w=>{var B=this.globalService.globalVar.eventRaceData.animalData.find(de=>de.associatedAnimalType===w.type);if(null!=B){var j=this.globalService.globalVar.animals.find(de=>de.type===w.type);return B.exhaustionStatReduction>=C&&!this.globalService.shouldShowSlowSegmentWarning(j)||B.associatedAnimalType===a.type}return!1})).length>1){var T=0,M=!1;if(f.forEach(w=>{w.type===a.type&&(M=!0),M||(T+=1)}),M||(T=-1),this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.isCurrentlyRacing=!1}),T>-1){var S=T+1;S===f.length&&(S=0),this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.associatedAnimalType===f[S].type&&(w.isCurrentlyRacing=!0,r=!0,this.lookupService.getCourseTypeFromAnimalType(w.associatedAnimalType)===F.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(f[S],e?i:void 0))})}else this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.associatedAnimalType===f[0].type&&(w.isCurrentlyRacing=!0,r=!0,this.lookupService.getCourseTypeFromAnimalType(w.associatedAnimalType)===F.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(f[0],e?i:void 0))});this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1}else this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.isCurrentlyRacing=!1}),this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalService.globalVar.eventRaceData.isRunning=!1,this.globalService.globalVar.eventRaceData.overallTimeCounter-=this.globalService.globalVar.eventRaceData.segmentTimeCounter,this.globalService.globalVar.eventRaceData.segmentTimeCounter=0,this.globalService.globalVar.eventRaceData.currentRaceSegment.reduceExportSize()}}}return r}resetEventAbilityUseCounts(){null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.eventAbilityData||this.globalService.globalVar.eventRaceData.eventAbilityData.resetUseCounts()}checkForGrandPrixRewards(){var e=this.globalService.globalVar.eventRaceData.distanceCovered,i=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,r=100,a=this.globalService.globalVar.modifiers.find(Dt=>"grandPrixCoinRewardModifier"===Dt.text);null!=a&&(r=a.value*i);var o=5,s=this.globalService.globalVar.modifiers.find(Dt=>"grandPrixRenownRewardModifier"===Dt.text);null!=s&&(o=s.value);var l=5e6,c=this.globalService.globalVar.modifiers.find(Dt=>"metersPerCoinsGrandPrixModifier"===Dt.text);null!=c&&(l=c.value);var u=2e7,f=this.globalService.globalVar.modifiers.find(Dt=>"metersPerRenownGrandPrixModifier"===Dt.text);null!=f&&(u=f.value);var v=5e7,b=this.globalService.globalVar.modifiers.find(Dt=>"grandPrixToken1MeterModifier"===Dt.text);null!=b&&(v=b.value);var y=5e7,C=this.globalService.globalVar.modifiers.find(Dt=>"grandPrixToken2MeterModifier"===Dt.text);null!=C&&(y=C.value);var T=5e7,M=this.globalService.globalVar.modifiers.find(Dt=>"grandPrixToken3MeterModifier"===Dt.text);null!=M&&(T=M.value);var S=5e7,w=this.globalService.globalVar.modifiers.find(Dt=>"grandPrixToken4MeterModifier"===Dt.text);null!=w&&(S=w.value);var B=this.lookupService.getTokenModifier(),de=this.globalService.globalVar.eventRaceData.totalDistance/(u*i);if(e>=l*i*(this.globalService.globalVar.eventRaceData.coinRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.coinRewardsObtained<this.globalService.globalVar.eventRaceData.totalDistance/(l*i)&&(this.globalService.globalVar.eventRaceData.coinRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ne=this.globalService.globalVar.resources.find(Dt=>"Coins"===Dt.name))&&(ne.amount+=r),this.lookupService.addResourceToResourceList(new te("Coins",r,G.Resources),this.globalService.globalVar.previousEventRewards)),e>=u*i*(this.globalService.globalVar.eventRaceData.renownRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.renownRewardsObtained<de&&(this.globalService.globalVar.eventRaceData.renownRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Renown"===ee.name))&&(ne.amount+=o),this.lookupService.addResourceToResourceList(new te("Renown",o,G.Progression),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=0&&e>=v*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Tokens"===ee.name))?ne.amount+=1*B:this.globalService.globalVar.resources.push(new te("Tokens",1*B,G.Resources)),this.lookupService.addResourceToResourceList(new te("Tokens",1*B,G.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=1&&e>=y*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Tokens"===ee.name))?ne.amount+=2*B:this.globalService.globalVar.resources.push(new te("Tokens",2*B,G.Resources)),this.lookupService.addResourceToResourceList(new te("Tokens",2*B,G.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=2&&e>=T*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Tokens"===ee.name))?ne.amount+=3*B:this.globalService.globalVar.resources.push(new te("Tokens",3*B,G.Resources)),this.lookupService.addResourceToResourceList(new te("Tokens",3*B,G.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=3&&e>=S*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Tokens"===ee.name))?ne.amount+=4*B:this.globalService.globalVar.resources.push(new te("Tokens",4*B,G.Resources)),this.lookupService.addResourceToResourceList(new te("Tokens",4*B,G.Resources),this.globalService.globalVar.previousEventRewards)),1===i){var ne,qe=100;e>=25e3*i&&0===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Strawberries"===ee.name))?ne.amount+=qe*i:this.globalService.globalVar.resources.push(new te("Strawberries",qe*i,G.Food)),this.lookupService.addResourceToResourceList(new te("Strawberries",qe*i,G.Food),this.globalService.globalVar.previousEventRewards)),e>=5e4*i&&1===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Apples"===ee.name))?ne.amount+=qe*i:this.globalService.globalVar.resources.push(new te("Apples",qe*i,G.Food)),this.lookupService.addResourceToResourceList(new te("Apples",qe*i,G.Food),this.globalService.globalVar.previousEventRewards)),e>=75e3*i&&2===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Oranges"===ee.name))?ne.amount+=qe*i:this.globalService.globalVar.resources.push(new te("Oranges",qe*i,G.Food)),this.lookupService.addResourceToResourceList(new te("Oranges",qe*i,G.Food),this.globalService.globalVar.previousEventRewards)),e>=1e5*i&&3===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Mangoes"===ee.name))?ne.amount+=5*i:this.globalService.globalVar.resources.push(new te("Mangoes",5*i,G.Food)),this.lookupService.addResourceToResourceList(new te("Mangoes",5*i,G.Food),this.globalService.globalVar.previousEventRewards)),e>=25e4*i&&4===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Turnips"===ee.name))?ne.amount+=qe*i:this.globalService.globalVar.resources.push(new te("Turnips",qe*i,G.Food)),this.lookupService.addResourceToResourceList(new te("Turnips",qe*i,G.Food),this.globalService.globalVar.previousEventRewards)),e>=5e5*i&&5===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Bananas"===ee.name))?ne.amount+=qe*i:this.globalService.globalVar.resources.push(new te("Bananas",qe*i,G.Food)),this.lookupService.addResourceToResourceList(new te("Bananas",qe*i,G.Food),this.globalService.globalVar.previousEventRewards)),e>=75e4*i&&6===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Carrots"===ee.name))?ne.amount+=qe*i:this.globalService.globalVar.resources.push(new te("Carrots",qe*i,G.Food)),this.lookupService.addResourceToResourceList(new te("Carrots",qe*i,G.Food),this.globalService.globalVar.previousEventRewards)),e>=1e6*i&&7===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(ne=this.globalService.globalVar.resources.find(ee=>"Mangoes"===ee.name))?ne.amount+=10*i:this.globalService.globalVar.resources.push(new te("Mangoes",10*i,G.Food)),this.lookupService.addResourceToResourceList(new te("Mangoes",10*i,G.Food),this.globalService.globalVar.previousEventRewards))}}}return t.\u0275fac=function(e){return new(e||t)(He(It),He(Rn),He(zf),He(Ti))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),QR=(()=>{class t{constructor(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setProductionMode(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setDevMode(){this.devModeActive=!0,this.forceStartNewGame=!0,this.codeCreationMode=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Pt=(()=>{return(t=Pt||(Pt={}))[t.barn=0]="barn",t[t.raceselection=1]="raceselection",t[t.animals=2]="animals",t[t.relayTeams=3]="relayTeams",t[t.shop=4]="shop",t[t.incubator=5]="incubator",t[t.trainingtrack=6]="trainingtrack",t[t.talents=7]="talents",t[t.resources=8]="resources",t[t.faqs=9]="faqs",t[t.stats=10]="stats",t[t.settings=11]="settings",Pt;var t})(),Va=(()=>{return(t=Va||(Va={}))[t.regular=0]="regular",t[t.token=1]="token",Va;var t})();let Pn=(()=>{class t{constructor(){this.switchView=new Mn(Pt.barn),this.selectAnimalView=new Mn(new At),this.selectBarnView=new Mn(0),this.selectShopView=new Mn(Va.regular),this.selectRaceView=new Mn(ge.circuit)}setNewView(e){e!==this.switchView.value&&this.switchView.next(e)}getNewView(){return this.switchView.asObservable()}setAnimalView(e,i){i!==this.selectAnimalView.value&&this.selectAnimalView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setAnimal(e){e!==this.selectAnimalView.value&&this.selectAnimalView.next(e)}getAnimalView(){return this.selectAnimalView.asObservable()}setBarnView(e,i){i!==this.selectBarnView.value&&this.selectBarnView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setBarnNumber(e){e!==this.selectBarnView.value&&this.selectBarnView.next(e)}getBarnView(){return this.selectBarnView.asObservable()}setShopView(e,i){i!==this.selectShopView.value&&this.selectShopView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setShopType(e){e!==this.selectShopView.value&&this.selectShopView.next(e)}getShopView(){return this.selectShopView.asObservable()}setRaceView(e,i){i!==this.selectRaceView.value&&this.selectRaceView.next(i),e!==this.switchView.value&&this.switchView.next(e)}getRaceView(){return this.selectRaceView.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class u4{}let KR=(()=>{class t{constructor(e){this.globalService=e}skipTutorial(){this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.globalVar.tutorials.currentTutorialId=10}getTutorialState(e){var i=new u4;return i.id=e,1===e&&(i.tutorialText="<b>Welcome to Cultura!</b> \n\n Cultura is the name of your soon to be state of the art animal racing facility. Train and nurture your animal companions and rise through the ranks by winning circuit competitions. Mix and match different racing teams and abilities to rise as far as you can!\n\nLet's take a tour. From this page, you can select a barn where you can assign and train animals. Currently, you have a fine racing horse already set up in your first barn. Select it and let's get to work. \n\n <b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=Pt.barn),2===e&&(i.tutorialText="You'll have to train your animals if you want them to win. There are only a few training options to choose from now, but as you grow you will find better and faster ways to improve. Each training will develop your animals in specific ways, improving the following base stats:\n\n<b>Speed</b>: Increase the max speed your animal can run in a race.\n<b>Acceleration</b>: Increase how quickly your animal gains speed.\n<b>Endurance</b>: Increase the distance your animal can run before tiring out and slowing down.\n<b>Power</b>: Increase the efficiency of your unique ability.\n<b>Focus</b>: Increase the distance your animal can run before losing focus and stopping abruptly.\n<b>Adaptability</b>: Increase the likelihood your animal won't stumble when racing through unique paths.\n\n<b>Select a training option out of the ones outlined in red.</b>",i.associatedTab=Pt.barn),3===e&&(i.tutorialText="Here you can get a breakdown on the status of your animals. Here's your horse along with all of the stat information we just went over. If you need a refresher, hover over any of the stats to see what they do. There are a few other stats here to be mindful of:\n\n<b>Diminishing Returns</b>: After a base stat reaches the Diminishing Returns value, any additional training of that stat gets progressively weaker. Typically, you want to try and keep all of your base stats around your Diminishing Returns value for best results. You'll find multiple ways to increase your Diminishing Returns value as you progress.\n<b>Burst Chance</b>: As you race, your racer may enter Burst mode. This increases their overall velocity and allows them to exceed their Max Speed. This stat is based on a combination of Focus and Adaptability and is not affected by Diminishing Returns.\n<b>Burst Distance</b>: This controls how long you stay in Burst mode. This stat is based on your Power and is not affected by Diminishing Returns.\n\nCheck back here often as you proceed to assign new abilities and items to your animals, as well as breeding them to gain even faster offspring.\n\nNow that your horse has had time to take a few practice laps, let's see if they have what it takes to win a race!\n\n<b>Select the 'Race' option on the right (or in the menu if on mobile) bordered in red.</b>",i.associatedTab=Pt.animals),4===e&&(i.tutorialText="You've got a few options here. Circuit races are all about deciding where you stand against the competition. If you win all of the circuit races for your rank, you'll move up into the next rank which may net you some nifty rewards and open up new opportunities for your facility. Improving your Circuit Rank should be your number one goal in becoming a top tier racing facility!\n\nYou can also run some free races against local competition. Only a few races are available at a time, but it can be a great way to get some practice in and make some quick money.\n\nFor now, let's see if you can make it up to the next circuit rank. It's a nice sunny day today and that might impact how your racer runs. If you hover over a race, you'll see how the terrain or weather might impact the conditions of the race. When in doubt, hovering over text usually gives you the information you need. Whenever you're ready, start the race. Your goal is to get to the finish line before your competition (represented as the little black dot). Good luck!\n\n<b>Click (or tap if you are on mobile) the race option outlined in red.</b>",i.associatedTab=Pt.raceselection),5===e&&(i.tutorialText="Way to go! Exciting stuff there. Looks like you've got the gist of it for now. Keep racing, make some money, and build up your facility to be as great as it can be. I'll check in with you again a little later. I look forward to seeing how far you can go!\n\n<b>Continue training your animals and completing Circuit Races to raise your Circuit Rank. If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",i.associatedTab=Pt.raceselection),6===e&&(i.tutorialText="Nice, you've unlocked another racer! If you jump straight into a race with your untrained monkey, things probably aren't going to go well. As you race, you'll start making enough money to build more barns and train your animals simultaneously. For now, let's go back to the barn you have.\n\n<b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=Pt.raceselection),7===e&&(i.tutorialText="Let's see if we can start training your new racing Monkey. From here you can unassign an animal from a barn and bring a new animal in. As you start to branch out and race in different course types, you'll want to try and keep your team well balanced. It's not going to help you if you have a prized thoroughbred torching the competition if your follow up racer can barely make it out the gate.\n\nLet's start training your Monkey now.\n\n<b>Select 'Unassign' at the top of the screen and choose 'Monkey' to train.</b>",i.associatedTab=Pt.barn),8===e&&(i.tutorialText="Nicely done. Now you can set a training for your Monkey so it can start to get acclimated to racing. Once your Monkey has caught up to your Horse in stats, you'll be back to winning races in no time. Don't forget to train both your Horse and your Monkey, and to try to keep their stats balanced! I'll check back in with you after awhile.\n\n<b>Continue training your animals and completing Circuit Races to raise your Circuit Rank. If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",i.associatedTab=Pt.barn),9===e&&(i.tutorialText="Looks like you've won a nice racing Hare. The Hare and Horse are both Flatland animals, meaning only one of them will be able to run the Flatland portion of a race at a time. Ideally, you'll want one getting faster while the other is winning races. Let's head over to your animals and talk about Breeding.\n\n<b>Click (or tap if you are on mobile) 'Animals' on the right bordered in red and select an animal.</b>",i.associatedTab=Pt.raceselection),10===e&&(i.tutorialText="Breeding is where your speed really starts to grow. Firstly, to Breed you need a sufficient amount of Breed XP. Training and racing both contribute to this. Once you're ready, you can breed your animal to increase its Breed Level. This gives it a 5% increase to how much the base stats affect the racing stats. There's a strategic element to this. <b>After breeding, your animal will have its stats reset back to their starting points, but the amount that the base stats contribute to the racing stats will increase.</b>\n\n Because you only need 1 Flatland animal to race at any given time, you can choose one to start Breeding and another to keep racing. For best results, you should keep Breeding the same animal multiple times so that you don't need to spend too much time training. 5% may not make a huge difference at first, but 50% will. Once your racing animal can no longer keep up with the competition, swap them! The animal you were breeding will surely torch the competition and the animal you were racing can start to catch up in speed.\n\nThere's an ebb and flow to it. Race as far as your animals can go, breed them many times in quick succession to get a large percentage upgrade to stats, and then get back in the race. <b>This game is intended to be a slow burn and skews towards idle play. If you play very actively, you may find yourself needing to wait at certain points early on. Breeding once, training to max, breeding one time again, and so on is not recommended. Cycle between breeding in batches and then racing with your much higher stat modifiers.\n\nThat's all I have for you. Good luck and have fun!",i.associatedTab=Pt.animals,this.globalService.globalVar.tutorials.tutorialCompleted=!0),i}openTutorialModal(){}}return t.\u0275fac=function(e){return new(e||t)(He(It))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const d4=["addListener","removeListener"],h4=["addEventListener","removeEventListener"],f4=["on","off"];function Ur(t,n,e,i){if(K(e)&&(i=e,e=void 0),i)return Ur(t,n,e).pipe(Cm(i));const[r,a]=function v4(t){return K(t.addEventListener)&&K(t.removeEventListener)}(t)?h4.map(o=>s=>t[o](n,s,e)):function p4(t){return K(t.addListener)&&K(t.removeListener)}(t)?d4.map(ZR(t,n)):function g4(t){return K(t.on)&&K(t.off)}(t)?f4.map(ZR(t,n)):[];if(!r&&xc(t))return Bn(o=>Ur(o,n,e))(Yn(t));if(!r)throw new TypeError("Invalid event target");return new $e(o=>{const s=(...l)=>o.next(1<l.length?l:l[0]);return r(s),()=>a(s)})}function ZR(t,n){return e=>i=>t[e](n,i)}class m4 extends _e{constructor(n,e){super()}schedule(n,e=0){return this}}const jf={setInterval(...t){const{delegate:n}=jf;return((null==n?void 0:n.setInterval)||setInterval)(...t)},clearInterval(t){const{delegate:n}=jf;return((null==n?void 0:n.clearInterval)||clearInterval)(t)},delegate:void 0},JR={now:()=>(JR.delegate||Date).now(),delegate:void 0};class Zu{constructor(n,e=Zu.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}Zu.now=JR.now;const e2=new class _4 extends Zu{constructor(n,e=Zu.now){super(n,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}(class b4 extends m4{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(n,e,i=0){return jf.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;jf.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(a){i=!0,r=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,he(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),y4=e2;function x0(t=0,n,e=y4){let i=-1;return null!=n&&(Cb(n)?e=n:i=n),new $e(r=>{let a=function w4(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},a)})}const{isArray:C4}=Array;function t2(t){return 1===t.length&&C4(t[0])?t[0]:t}function n2(...t){return 1===(t=t2(t)).length?Yn(t[0]):new $e(function S4(t){return n=>{let e=[];for(let i=0;e&&!n.closed&&i<t.length;i++)e.push(Yn(t[i]).subscribe(ni(n,r=>{if(e){for(let a=0;a<e.length;a++)a!==i&&e[a].unsubscribe();e=null}n.next(r)})))}}(t))}function $f(...t){const n=Md(t),e=t2(t);return e.length?new $e(i=>{let r=e.map(()=>[]),a=e.map(()=>!1);i.add(()=>{r=a=null});for(let o=0;!i.closed&&o<e.length;o++)Yn(e[o]).subscribe(ni(i,s=>{if(r[o].push(s),r.every(l=>l.length)){const l=r.map(c=>c.shift());i.next(n?n(...l):l),r.some((c,u)=>!c.length&&a[u])&&i.complete()}},()=>{a[o]=!0,!r[o].length&&i.complete()}));return()=>{r=a=null}}):Ba}function tr(t){return Nt((n,e)=>{Yn(t).subscribe(ni(e,()=>e.complete(),N)),!e.closed&&n.subscribe(e)})}function M0(...t){const n=Md(t);return Nt((e,i)=>{const r=t.length,a=new Array(r);let o=t.map(()=>!1),s=!1;for(let l=0;l<r;l++)Yn(t[l]).subscribe(ni(i,c=>{a[l]=c,!s&&!o[l]&&(o[l]=!0,(s=o.every(je))&&(o=null))},N));e.subscribe(ni(i,l=>{if(s){const c=[l,...a];i.next(n?n(...c):c)}}))})}function a2(t,n){return n?e=>Iu(n.pipe(ar(1),function D4(){return Nt((t,n)=>{t.subscribe(ni(n,N))})}()),e.pipe(a2(t))):Bn((e,i)=>t(e,i).pipe(ar(1),function x4(t){return Xt(()=>t)}(e)))}function o2(t,n=e2){const e=x0(t,n);return a2(()=>e)}new $e(N);var M4={left:"right",right:"left",bottom:"top",top:"bottom"};function qf(t){return t.replace(/left|right|bottom|top/g,function(n){return M4[n]})}function Co(t){return t.split("-")[0]}var A4={start:"end",end:"start"};function s2(t){return t.replace(/start|end/g,function(n){return A4[n]})}var da="top",Za="bottom",Ja="right",ha="left",A0="auto",Ju=[da,Za,Ja,ha],fc="start",ed="end",l2="viewport",td="popper",c2=Ju.reduce(function(t,n){return t.concat([n+"-"+fc,n+"-"+ed])},[]),u2=[].concat(Ju,[A0]).reduce(function(t,n){return t.concat([n,n+"-"+fc,n+"-"+ed])},[]),G4=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function eo(t){if(null==t)return window;if("[object Window]"!==t.toString()){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function pc(t){return t instanceof eo(t).Element||t instanceof Element}function Ia(t){return t instanceof eo(t).HTMLElement||t instanceof HTMLElement}function d2(t){return"undefined"!=typeof ShadowRoot&&(t instanceof eo(t).ShadowRoot||t instanceof ShadowRoot)}function _s(t){return((pc(t)?t.ownerDocument:t.document)||window.document).documentElement}var Ys=Math.max,Wf=Math.min,gc=Math.round;function vc(t,n){void 0===n&&(n=!1);var e=t.getBoundingClientRect(),i=1,r=1;if(Ia(t)&&n){var a=t.offsetHeight,o=t.offsetWidth;o>0&&(i=gc(e.width)/o||1),a>0&&(r=gc(e.height)/a||1)}return{width:e.width/i,height:e.height/r,top:e.top/r,right:e.right/i,bottom:e.bottom/r,left:e.left/i,x:e.left/i,y:e.top/r}}function P0(t){var n=eo(t);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function V0(t){return vc(_s(t)).left+P0(t).scrollLeft}function Xo(t){return eo(t).getComputedStyle(t)}function So(t){return t?(t.nodeName||"").toLowerCase():null}function Xf(t){return"html"===So(t)?t:t.assignedSlot||t.parentNode||(d2(t)?t.host:null)||_s(t)}function I0(t){var n=Xo(t);return/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX)}function h2(t){return["html","body","#document"].indexOf(So(t))>=0?t.ownerDocument.body:Ia(t)&&I0(t)?t:h2(Xf(t))}function id(t,n){var e;void 0===n&&(n=[]);var i=h2(t),r=i===(null==(e=t.ownerDocument)?void 0:e.body),a=eo(i),o=r?[a].concat(a.visualViewport||[],I0(i)?i:[]):i,s=n.concat(o);return r?s:s.concat(id(Xf(o)))}function $4(t){return["table","td","th"].indexOf(So(t))>=0}function f2(t){return Ia(t)&&"fixed"!==Xo(t).position?t.offsetParent:null}function nd(t){for(var n=eo(t),e=f2(t);e&&$4(e)&&"static"===Xo(e).position;)e=f2(e);return e&&("html"===So(e)||"body"===So(e)&&"static"===Xo(e).position)?n:e||function q4(t){var n=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Ia(t)&&"fixed"===Xo(t).position)return null;for(var r=Xf(t);Ia(r)&&["html","body"].indexOf(So(r))<0;){var a=Xo(r);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||n&&"filter"===a.willChange||n&&a.filter&&"none"!==a.filter)return r;r=r.parentNode}return null}(t)||n}function p2(t,n){var e=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(e&&d2(e)){var i=n;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function O0(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function g2(t,n){return n===l2?O0(function z4(t){var n=eo(t),e=_s(t),i=n.visualViewport,r=e.clientWidth,a=e.clientHeight,o=0,s=0;return i&&(r=i.width,a=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,s=i.offsetTop)),{width:r,height:a,x:o+V0(t),y:s}}(t)):pc(n)?function W4(t){var n=vc(t);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(n):O0(function j4(t){var n,e=_s(t),i=P0(t),r=null==(n=t.ownerDocument)?void 0:n.body,a=Ys(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Ys(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+V0(t),l=-i.scrollTop;return"rtl"===Xo(r||e).direction&&(s+=Ys(e.clientWidth,r?r.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(_s(t)))}function mc(t){return t.split("-")[1]}function E0(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function v2(t){var l,n=t.reference,e=t.element,i=t.placement,r=i?Co(i):null,a=i?mc(i):null,o=n.x+n.width/2-e.width/2,s=n.y+n.height/2-e.height/2;switch(r){case da:l={x:o,y:n.y-e.height};break;case Za:l={x:o,y:n.y+n.height};break;case Ja:l={x:n.x+n.width,y:s};break;case ha:l={x:n.x-e.width,y:s};break;default:l={x:n.x,y:n.y}}var c=r?E0(r):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case fc:l[c]=l[c]-(n[u]/2-e[u]/2);break;case ed:l[c]=l[c]+(n[u]/2-e[u]/2)}}return l}function b2(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function _2(t,n){return n.reduce(function(e,i){return e[i]=t,e},{})}function N0(t,n){void 0===n&&(n={});var i=n.placement,r=void 0===i?t.placement:i,a=n.boundary,o=void 0===a?"clippingParents":a,s=n.rootBoundary,l=void 0===s?l2:s,c=n.elementContext,u=void 0===c?td:c,f=n.altBoundary,v=void 0!==f&&f,b=n.padding,y=void 0===b?0:b,C=b2("number"!=typeof y?y:_2(y,Ju)),M=t.rects.popper,S=t.elements[v?u===td?"reference":td:u],w=function Y4(t,n,e){var i="clippingParents"===n?function X4(t){var n=id(Xf(t)),i=["absolute","fixed"].indexOf(Xo(t).position)>=0&&Ia(t)?nd(t):t;return pc(i)?n.filter(function(r){return pc(r)&&p2(r,i)&&"body"!==So(r)}):[]}(t):[].concat(n),r=[].concat(i,[e]),o=r.reduce(function(s,l){var c=g2(t,l);return s.top=Ys(c.top,s.top),s.right=Wf(c.right,s.right),s.bottom=Wf(c.bottom,s.bottom),s.left=Ys(c.left,s.left),s},g2(t,r[0]));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(pc(S)?S:S.contextElement||_s(t.elements.popper),o,l),B=vc(t.elements.reference),j=v2({reference:B,element:M,strategy:"absolute",placement:r}),de=O0(Object.assign({},M,j)),ne=u===td?de:B,ue={top:w.top-ne.top+C.top,bottom:ne.bottom-w.bottom+C.bottom,left:w.left-ne.left+C.left,right:ne.right-w.right+C.right},se=t.modifiersData.offset;if(u===td&&se){var Ce=se[r];Object.keys(ue).forEach(function(Se){var ve=[Ja,Za].indexOf(Se)>=0?1:-1,Oe=[da,Za].indexOf(Se)>=0?"y":"x";ue[Se]+=Ce[Oe]*ve})}return ue}const J4={name:"flip",enabled:!0,phase:"main",fn:function Z4(t){var n=t.state,e=t.options,i=t.name;if(!n.modifiersData[i]._skip){for(var r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0===o||o,l=e.fallbackPlacements,c=e.padding,u=e.boundary,f=e.rootBoundary,v=e.altBoundary,b=e.flipVariations,y=void 0===b||b,C=e.allowedAutoPlacements,T=n.options.placement,M=Co(T),w=l||(M!==T&&y?function K4(t){if(Co(t)===A0)return[];var n=qf(t);return[s2(t),n,s2(n)]}(T):[qf(T)]),B=[T].concat(w).reduce(function(Ot,Kt){return Ot.concat(Co(Kt)===A0?function Q4(t,n){void 0===n&&(n={});var r=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?u2:l,u=mc(n.placement),f=u?s?c2:c2.filter(function(y){return mc(y)===u}):Ju,v=f.filter(function(y){return c.indexOf(y)>=0});0===v.length&&(v=f);var b=v.reduce(function(y,C){return y[C]=N0(t,{placement:C,boundary:r,rootBoundary:a,padding:o})[Co(C)],y},{});return Object.keys(b).sort(function(y,C){return b[y]-b[C]})}(n,{placement:Kt,boundary:u,rootBoundary:f,padding:c,flipVariations:y,allowedAutoPlacements:C}):Kt)},[]),j=n.rects.reference,de=n.rects.popper,ne=new Map,ue=!0,se=B[0],Ce=0;Ce<B.length;Ce++){var Se=B[Ce],ve=Co(Se),Oe=mc(Se)===fc,Ke=[da,Za].indexOf(ve)>=0,Ht=Ke?"width":"height",qe=N0(n,{placement:Se,boundary:u,rootBoundary:f,altBoundary:v,padding:c}),ft=Ke?Oe?Ja:ha:Oe?Za:da;j[Ht]>de[Ht]&&(ft=qf(ft));var xt=qf(ft),Dt=[];if(a&&Dt.push(qe[ve]<=0),s&&Dt.push(qe[ft]<=0,qe[xt]<=0),Dt.every(function(Ot){return Ot})){se=Se,ue=!1;break}ne.set(Se,Dt)}if(ue)for(var R=function(Kt){var ct=B.find(function(ii){var Ue=ne.get(ii);if(Ue)return Ue.slice(0,Kt).every(function(Ri){return Ri})});if(ct)return se=ct,"break"},pt=y?3:1;pt>0&&"break"!==R(pt);pt--);n.placement!==se&&(n.modifiersData[i]._skip=!0,n.placement=se,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function rd(t,n,e){return Ys(t,Wf(n,e))}function B0(t){var n=vc(t),e=t.offsetWidth,i=t.offsetHeight;return Math.abs(n.width-e)<=1&&(e=n.width),Math.abs(n.height-i)<=1&&(i=n.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:i}}const nL={name:"preventOverflow",enabled:!0,phase:"main",fn:function iL(t){var n=t.state,e=t.options,i=t.name,r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0!==o&&o,v=e.tether,b=void 0===v||v,y=e.tetherOffset,C=void 0===y?0:y,T=N0(n,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),M=Co(n.placement),S=mc(n.placement),w=!S,B=E0(M),j=function eL(t){return"x"===t?"y":"x"}(B),de=n.modifiersData.popperOffsets,ne=n.rects.reference,ue=n.rects.popper,se="function"==typeof C?C(Object.assign({},n.rects,{placement:n.placement})):C,Ce="number"==typeof se?{mainAxis:se,altAxis:se}:Object.assign({mainAxis:0,altAxis:0},se),Se=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,ve={x:0,y:0};if(de){if(a){var Oe,Ke="y"===B?da:ha,Ht="y"===B?Za:Ja,qe="y"===B?"height":"width",ft=de[B],xt=ft+T[Ke],Dt=ft-T[Ht],ee=b?-ue[qe]/2:0,R=S===fc?ne[qe]:ue[qe],pt=S===fc?-ue[qe]:-ne[qe],_t=n.elements.arrow,Ot=b&&_t?B0(_t):{width:0,height:0},Kt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ct=Kt[Ke],ii=Kt[Ht],Ue=rd(0,ne[qe],Ot[qe]),Ri=w?ne[qe]/2-ee-Ue-ct-Ce.mainAxis:R-Ue-ct-Ce.mainAxis,tn=w?-ne[qe]/2+ee+Ue+ii+Ce.mainAxis:pt+Ue+ii+Ce.mainAxis,Ei=n.elements.arrow&&nd(n.elements.arrow),hi=null!=(Oe=null==Se?void 0:Se[B])?Oe:0,vi=ft+tn-hi,fi=rd(b?Wf(xt,ft+Ri-hi-(Ei?"y"===B?Ei.clientTop||0:Ei.clientLeft||0:0)):xt,ft,b?Ys(Dt,vi):Dt);de[B]=fi,ve[B]=fi-ft}if(s){var mn,Gt=de[j],wt="y"===j?"height":"width",Ui=Gt+T["x"===B?da:ha],ai=Gt-T["x"===B?Za:Ja],oi=-1!==[da,ha].indexOf(M),nn=null!=(mn=null==Se?void 0:Se[j])?mn:0,ji=oi?Ui:Gt-ne[wt]-ue[wt]-nn+Ce.altAxis,Bi=oi?Gt+ne[wt]+ue[wt]-nn-Ce.altAxis:ai,Ni=b&&oi?function tL(t,n,e){var i=rd(t,n,e);return i>e?e:i}(ji,Gt,Bi):rd(b?ji:Ui,Gt,b?Bi:ai);de[j]=Ni,ve[j]=Ni-Gt}n.modifiersData[i]=ve}},requiresIfExists:["offset"]},sL={name:"arrow",enabled:!0,phase:"main",fn:function aL(t){var n,e=t.state,i=t.name,r=t.options,a=e.elements.arrow,o=e.modifiersData.popperOffsets,s=Co(e.placement),l=E0(s),u=[ha,Ja].indexOf(s)>=0?"height":"width";if(a&&o){var f=function(n,e){return b2("number"!=typeof(n="function"==typeof n?n(Object.assign({},e.rects,{placement:e.placement})):n)?n:_2(n,Ju))}(r.padding,e),v=B0(a),b="y"===l?da:ha,y="y"===l?Za:Ja,C=e.rects.reference[u]+e.rects.reference[l]-o[l]-e.rects.popper[u],T=o[l]-e.rects.reference[l],M=nd(a),S=M?"y"===l?M.clientHeight||0:M.clientWidth||0:0,de=S/2-v[u]/2+(C/2-T/2),ne=rd(f[b],de,S-v[u]-f[y]);e.modifiersData[i]=((n={})[l]=ne,n.centerOffset=ne-de,n)}},effect:function oL(t){var n=t.state,i=t.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=n.elements.popper.querySelector(r))||!p2(n.elements.popper,r)||(n.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function dL(t,n,e){void 0===e&&(e=!1);var i=Ia(n),r=Ia(n)&&function uL(t){var n=t.getBoundingClientRect(),e=gc(n.width)/t.offsetWidth||1,i=gc(n.height)/t.offsetHeight||1;return 1!==e||1!==i}(n),a=_s(n),o=vc(t,r),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&(("body"!==So(n)||I0(a))&&(s=function cL(t){return t!==eo(t)&&Ia(t)?function lL(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):P0(t)}(n)),Ia(n)?((l=vc(n,!0)).x+=n.clientLeft,l.y+=n.clientTop):a&&(l.x=V0(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function hL(t){var n=new Map,e=new Set,i=[];function r(a){e.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(s){if(!e.has(s)){var l=n.get(s);l&&r(l)}}),i.push(a)}return t.forEach(function(a){n.set(a.name,a)}),t.forEach(function(a){e.has(a.name)||r(a)}),i}function pL(t){var n;return function(){return n||(n=new Promise(function(e){Promise.resolve().then(function(){n=void 0,e(t())})})),n}}var y2={placement:"bottom",modifiers:[],strategy:"absolute"};function w2(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return!n.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function vL(t){void 0===t&&(t={});var e=t.defaultModifiers,i=void 0===e?[]:e,r=t.defaultOptions,a=void 0===r?y2:r;return function(s,l,c){void 0===c&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},y2,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},f=[],v=!1,b={state:u,setOptions:function(M){var S="function"==typeof M?M(u.options):M;C(),u.options=Object.assign({},a,u.options,S),u.scrollParents={reference:pc(s)?id(s):s.contextElement?id(s.contextElement):[],popper:id(l)};var w=function fL(t){var n=hL(t);return G4.reduce(function(e,i){return e.concat(n.filter(function(r){return r.phase===i}))},[])}(function gL(t){var n=t.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(n).map(function(e){return n[e]})}([].concat(i,u.options.modifiers)));return u.orderedModifiers=w.filter(function(Se){return Se.enabled}),function y(){u.orderedModifiers.forEach(function(T){var S=T.options,B=T.effect;if("function"==typeof B){var j=B({state:u,name:T.name,instance:b,options:void 0===S?{}:S});f.push(j||function(){})}})}(),b.update()},forceUpdate:function(){if(!v){var M=u.elements,S=M.reference,w=M.popper;if(w2(S,w)){u.rects={reference:dL(S,nd(w),"fixed"===u.options.strategy),popper:B0(w)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(Se){return u.modifiersData[Se.name]=Object.assign({},Se.data)});for(var j=0;j<u.orderedModifiers.length;j++)if(!0!==u.reset){var de=u.orderedModifiers[j],ne=de.fn,ue=de.options;"function"==typeof ne&&(u=ne({state:u,options:void 0===ue?{}:ue,name:de.name,instance:b})||u)}else u.reset=!1,j=-1}}},update:pL(function(){return new Promise(function(T){b.forceUpdate(),T(u)})}),destroy:function(){C(),v=!0}};if(!w2(s,l))return b;function C(){f.forEach(function(T){return T()}),f=[]}return b.setOptions(c).then(function(T){!v&&c.onFirstUpdate&&c.onFirstUpdate(T)}),b}}var Yf={passive:!0},wL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function C2(t){var n,e=t.popper,i=t.popperRect,r=t.placement,a=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,f=t.isFixed,v=o.x,b=void 0===v?0:v,y=o.y,C=void 0===y?0:y,T="function"==typeof u?u({x:b,y:C}):{x:b,y:C};b=T.x,C=T.y;var M=o.hasOwnProperty("x"),S=o.hasOwnProperty("y"),w=ha,B=da,j=window;if(c){var de=nd(e),ne="clientHeight",ue="clientWidth";de===eo(e)&&"static"!==Xo(de=_s(e)).position&&"absolute"===s&&(ne="scrollHeight",ue="scrollWidth"),(r===da||(r===ha||r===Ja)&&a===ed)&&(B=Za,C-=(f&&j.visualViewport?j.visualViewport.height:de[ne])-i.height,C*=l?1:-1),r!==ha&&(r!==da&&r!==Za||a!==ed)||(w=Ja,b-=(f&&j.visualViewport?j.visualViewport.width:de[ue])-i.width,b*=l?1:-1)}var Oe,Se=Object.assign({position:s},c&&wL),ve=!0===u?function CL(t){var e=t.y,r=window.devicePixelRatio||1;return{x:gc(t.x*r)/r||0,y:gc(e*r)/r||0}}({x:b,y:C}):{x:b,y:C};return b=ve.x,C=ve.y,Object.assign({},Se,l?((Oe={})[B]=S?"0":"",Oe[w]=M?"0":"",Oe.transform=(j.devicePixelRatio||1)<=1?"translate("+b+"px, "+C+"px)":"translate3d("+b+"px, "+C+"px, 0)",Oe):((n={})[B]=S?C+"px":"",n[w]=M?b+"px":"",n.transform="",n))}var kL=vL({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function mL(t){var n=t.state,e=t.instance,i=t.options,r=i.scroll,a=void 0===r||r,o=i.resize,s=void 0===o||o,l=eo(n.elements.popper),c=[].concat(n.scrollParents.reference,n.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",e.update,Yf)}),s&&l.addEventListener("resize",e.update,Yf),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",e.update,Yf)}),s&&l.removeEventListener("resize",e.update,Yf)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function _L(t){var n=t.state;n.modifiersData[t.name]=v2({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function SL(t){var n=t.state,e=t.options,i=e.gpuAcceleration,r=void 0===i||i,a=e.adaptive,o=void 0===a||a,s=e.roundOffsets,l=void 0===s||s,u={placement:Co(n.placement),variation:mc(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:r,isFixed:"fixed"===n.options.strategy};null!=n.modifiersData.popperOffsets&&(n.styles.popper=Object.assign({},n.styles.popper,C2(Object.assign({},u,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:o,roundOffsets:l})))),null!=n.modifiersData.arrow&&(n.styles.arrow=Object.assign({},n.styles.arrow,C2(Object.assign({},u,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function RL(t){var n=t.state;Object.keys(n.elements).forEach(function(e){var i=n.styles[e]||{},r=n.attributes[e]||{},a=n.elements[e];!Ia(a)||!So(a)||(Object.assign(a.style,i),Object.keys(r).forEach(function(o){var s=r[o];!1===s?a.removeAttribute(o):a.setAttribute(o,!0===s?"":s)}))})},effect:function DL(t){var n=t.state,e={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,e.popper),n.styles=e,n.elements.arrow&&Object.assign(n.elements.arrow.style,e.arrow),function(){Object.keys(n.elements).forEach(function(i){var r=n.elements[i],a=n.attributes[i]||{},s=Object.keys(n.styles.hasOwnProperty(i)?n.styles[i]:e[i]).reduce(function(l,c){return l[c]="",l},{});!Ia(r)||!So(r)||(Object.assign(r.style,s),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]}]});const PL={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function AL(t){var n=t.state,i=t.name,r=t.options.offset,a=void 0===r?[0,0]:r,o=u2.reduce(function(u,f){return u[f]=function ML(t,n,e){var i=Co(t),r=[ha,da].indexOf(i)>=0?-1:1,a="function"==typeof e?e(Object.assign({},n,{placement:t})):e,o=a[0],s=a[1];return o=o||0,s=(s||0)*r,[ha,Ja].indexOf(i)>=0?{x:s,y:o}:{x:o,y:s}}(f,n.rects,a),u},{}),s=o[n.placement],c=s.y;null!=n.modifiersData.popperOffsets&&(n.modifiersData.popperOffsets.x+=s.x,n.modifiersData.popperOffsets.y+=c),n.modifiersData[i]=o}},F0=["*"],i8=["dialog"];function O8(t,n){1&t&&g(0),2&t&&rt(_(2).title)}function E8(t,n){}function N8(t,n){if(1&t&&(h(0,"h3",3),x(1,O8,1,1,"ng-template",null,4,dt),x(3,E8,0,0,"ng-template",5),d()),2&t){const e=ot(2),i=_();p(3),m("ngTemplateOutlet",i.isTitleTemplate()?i.title:e)("ngTemplateOutletContext",i.context)}}function B8(t,n){if(1&t&&(h(0,"span"),Eo(1,2),Vt(2,"percent"),d()),2&t){const e=_();p(2),xh(Ah(2,1,e.getValue()/e.max)),function wv(t){!function $V(t,n,e){if(fu>0){const i=t.data[e];Pw(t,n,Array.isArray(i)?i:i.update,Po()-fu-1,hu)}hu=0,fu=0}(xi(),Pe(),t+20)}(1)}}function To(t){return!isNaN(function Qf(t){return parseInt(`${t}`,10)}(t))}function Qs(t){return null!=t}function bc(t){return(t||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let n=this;if(!document.documentElement.contains(n))return null;do{if(n.matches(t))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null});const R2={animation:!0,transitionTimerDelayMs:5},Z8=()=>{},{transitionTimerDelayMs:J8}=R2,ad=new Map,Hr=(t,n,e,i)=>{let r=i.context||{};const a=ad.get(n);if(a)switch(i.runningTransition){case"continue":return Ba;case"stop":t.run(()=>a.transition$.complete()),r=Object.assign(a.context,r),ad.delete(n)}const o=e(n,i.animation,r)||Z8;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return t.run(()=>o()),zt(void 0).pipe(function Q8(t){return n=>new $e(e=>n.subscribe({next:o=>t.run(()=>e.next(o)),error:o=>t.run(()=>e.error(o)),complete:()=>t.run(()=>e.complete())}))}(t));const s=new Te,l=new Te,c=s.pipe(function T4(...t){return n=>Iu(n,zt(...t))}(!0));ad.set(n,{transition$:s,complete:()=>{l.next(),l.complete()},context:r});const u=function K8(t){const{transitionDelay:n,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(n)+parseFloat(e))}(n);return t.runOutsideAngular(()=>{const f=Ur(n,"transitionend").pipe(tr(c),hr(({target:b})=>b===n));n2(x0(u+J8).pipe(tr(c)),f,l).pipe(tr(c)).subscribe(()=>{ad.delete(n),t.run(()=>{o(),s.next(),s.complete()})})}),s.asObservable()};let od=(()=>{class t{constructor(){this.animation=R2.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),P2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr]]}),t})(),V2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr]]}),t})(),O2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({}),t})(),B2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr]]}),t})(),F2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({}),t})();var ir=(()=>{return(t=ir||(ir={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",ir;var t})();const Zf=(t,n)=>!!n&&n.some(e=>e.contains(t)),L2=(t,n)=>!n||null!=function Y8(t,n){return n&&void 0!==t.closest?t.closest(n):null}(t,n),m6="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function U2(t,n,e,i,r,a,o,s){e&&t.runOutsideAngular((t=>m6?()=>setTimeout(()=>t(),100):t)(()=>{const c=Ur(n,"keydown").pipe(tr(r),hr(v=>v.which===ir.Escape),Rr(v=>v.preventDefault())),u=Ur(n,"mousedown").pipe(Xt(v=>{const b=v.target;return 2!==v.button&&!Zf(b,o)&&("inside"===e?Zf(b,a)&&L2(b,s):"outside"===e?!Zf(b,a):L2(b,s)||!Zf(b,a))}),tr(r)),f=Ur(n,"mouseup").pipe(M0(u),hr(([v,b])=>b),o2(0),tr(r));n2([c.pipe(Xt(v=>0)),f.pipe(Xt(v=>1))]).subscribe(v=>t.run(()=>i(v)))}))}const H2=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function G2(t){const n=Array.from(t.querySelectorAll(H2)).filter(e=>-1!==e.tabIndex);return[n[0],n[n.length-1]]}const y6=/\s+/,w6=/  +/gi,C6=/^start/,S6=/^end/,T6=/-(top|left)$/,R6=/-(bottom|right)$/,x6=/^left/,k6=/^right/,M6=/^start/,A6=/^end/;function z2({placement:t,baseClass:n}){let e=Array.isArray(t)?t:t.split(y6),r=e.findIndex(l=>"auto"===l);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(l){null==e.find(c=>-1!==c.search("^"+l))&&e.splice(r++,1,l)});const a=e.map(l=>function D6(t){return t.replace(C6,"left").replace(S6,"right").replace(T6,"-start").replace(R6,"-end")}(l));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!n,phase:"write",fn({state:l}){const c=new RegExp(n+"-[a-z]+","gi"),u=l.elements.popper,f=l.placement;let v=u.className;v=v.replace(c,""),v+=` ${function P6(t,n){let[e,i]=n.split("-");const r=e.replace(x6,"start").replace(k6,"end");let a=[r];if(i){let o=i;("left"===e||"right"===e)&&(o=o.replace(M6,"top").replace(A6,"bottom")),a.push(`${r}-${o}`)}return t&&(a=a.map(o=>`${t}-${o}`)),a.join(" ")}(n,f)}`,v=v.trim().replace(w6," "),u.className=v}},J4,nL,sL,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function j2(t){return t}function $2(){let t=null;return{createPopper(n){if(!t){let i=(n.updatePopperOptions||j2)(z2(n));t=kL(n.hostElement,n.targetElement,i)}},update(){t&&t.update()},setOptions(n){if(t){let i=(n.updatePopperOptions||j2)(z2(n));t.setOptions(i)}},destroy(){t&&(t.destroy(),t=null)}}}new Date(1882,10,12),new Date(2174,10,25);let K2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr,NT]]}),t})(),U6=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Z2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=nt({type:t,selectors:[["",8,"navbar"]]}),t})(),W0=(()=>{class t{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(V(Mi))},t.\u0275dir=nt({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,i){2&e&&Bt("disabled",i.disabled)},inputs:{disabled:"disabled"}}),t})(),ip=(()=>{class t{constructor(e,i){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(V(Ii(()=>yc)),V(Mi))},t.\u0275dir=nt({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,i,r){if(1&e&&Un(r,W0,4),2&e){let a;yi(a=wi())&&(i.menuItems=a)}},hostVars:5,hostBindings:function(e,i){1&e&&A("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return i.dropdown.onKeyDown(a)})("keydown.Space",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&(Yi("data-popper",i.placement),Bt("dropdown-menu",!0)("show",i.dropdown.isOpen()))}}),t})(),np=(()=>{class t{constructor(e,i){this.dropdown=e,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(V(Ii(()=>yc)),V(Mi))},t.\u0275dir=nt({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){2&e&&Yi("aria-expanded",i.dropdown.isOpen())}}),t})(),X0=(()=>{class t extends np{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(V(Ii(()=>yc)),V(Mi))},t.\u0275dir=nt({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){1&e&&A("click",function(){return i.dropdown.toggle()})("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&Yi("aria-expanded",i.dropdown.isOpen())},features:[sn([{provide:np,useExisting:Ii(()=>t)}]),Gi]}),t})(),yc=(()=>{class t{constructor(e,i,r,a,o,s,l){this._changeDetector=e,this._document=r,this._ngZone=a,this._elementRef=o,this._renderer=s,this._closed$=new Te,this._bodyContainer=null,this._positioning=$2(),this._open=!1,this.openChange=new bt,this.placement=i.placement,this.container=i.container,this.autoClose=i.autoClose,this.display=l?"static":"dynamic",this._zoneSubscription=a.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(ar(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:i,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(i,r)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.onStable.pipe(ar(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()})))}_setCloseHandlers(){U2(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._positioning.destroy(),this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const i=e.which,r=this._getMenuElements();let a=-1,o=null;const s=this._isEventFromToggle(e);if(!s&&r.length&&r.forEach((l,c)=>{l.contains(e.target)&&(o=l),l===this._document.activeElement&&(a=c)}),i!==ir.Space&&i!==ir.Enter){if(i!==ir.Tab){if(s||o){if(this.open(),r.length){switch(i){case ir.ArrowDown:a=Math.min(a+1,r.length-1);break;case ir.ArrowUp:if(this._isDropup()&&-1===a){a=r.length-1;break}a=Math.max(a-1,0);break;case ir.Home:a=0;break;case ir.End:a=r.length-1}r[a].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const l=this._menu.nativeElement.querySelectorAll(H2);e.shiftKey&&e.target===l[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===l[l.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else Ur(e.target,"focusout").pipe(ar(1)).subscribe(({relatedTarget:l})=>{this._elementRef.nativeElement.contains(l)||this.close()})}}else o&&(!0===this.autoClose||"inside"===this.autoClose)&&Ur(o,"click").pipe(ar(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(i=>!i.disabled).map(i=>i.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const i=this._renderer,r=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||i.createElement("div");i.setStyle(a,"position","absolute"),i.setStyle(r,"position","static"),i.setStyle(a,"z-index","1050"),i.appendChild(a,r),i.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,i){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(i&&this._renderer.removeClass(r,i),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const i=this._menu;if(i){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,a=this._elementRef.nativeElement;r.removeClass(a,"dropup"),r.removeClass(a,"dropdown");const{nativeElement:o}=i;"static"===this.display?(i.placement=null,r.setAttribute(o,"data-bs-popper","static")):(i.placement=e,r.removeAttribute(o,"data-bs-popper"));const s=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(a,s);const l=this._bodyContainer;l&&(r.removeClass(l,"dropup"),r.removeClass(l,"dropdown"),r.addClass(l,s))}}}return t.\u0275fac=function(e){return new(e||t)(V(sa),V(U6),V(qn),V(ln),V(Mi),V(Ta),V(Z2,8))},t.\u0275dir=nt({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(e,i,r){if(1&e&&(Un(r,ip,5),Un(r,np,5)),2&e){let a;yi(a=wi())&&(i._menu=a.first),yi(a=wi())&&(i._anchor=a.first)}},hostVars:2,hostBindings:function(e,i){2&e&&Bt("show",i.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[jn]}),t})(),J2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({}),t})();class el{constructor(n,e,i){this.nodes=n,this.viewRef=e,this.componentRef=i}}class H6{constructor(n,e,i,r,a,o){this._type=n,this._injector=e,this._viewContainerRef=i,this._renderer=r,this._ngZone=a,this._applicationRef=o,this._windowRef=null,this._contentRef=null}open(n,e,i=!1){this._windowRef||(this._contentRef=this._getContentRef(n,e),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,a=this._ngZone.onStable.pipe(ar(1),Bn(()=>Hr(this._ngZone,r,({classList:o})=>o.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:a}}close(n=!1){return this._windowRef?Hr(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:n,runningTransition:"stop"}).pipe(Rr(()=>{var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):zt(void 0)}_getContentRef(n,e){if(n){if(n instanceof wn){const i=n.createEmbeddedView(e);return this._applicationRef.attachView(i),new el([i.rootNodes],i)}return new el([[this._renderer.createText(`${n}`)]])}return new el([])}}let G6=(()=>{class t{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(ar(1)).subscribe(()=>{Hr(this._zone,this._el.nativeElement,(e,i)=>{i&&bc(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Hr(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(V(Mi),V(ln))},t.\u0275cmp=Tt({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(ss("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Bt("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),t})();class eD{close(n){}dismiss(n){}}class z6{constructor(n,e,i,r){this._windowCmptRef=n,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Te,this._dismissed=new Te,this._hidden=new Te,n.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,o)=>{this._resolve=a,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(tr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(tr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function X8(t){return t&&t.then}(e)?!1!==e&&this._dismiss(n):e.then(i=>{!1!==i&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():zt(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),$f(n,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var ud=(()=>{return(t=ud||(ud={}))[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",ud;var t})();let j6=(()=>{class t{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new Te,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new bt,this.shown=new Te,this.hidden=new Te}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ar(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=$f(Hr(this._zone,e,()=>e.classList.remove("show"),i),Hr(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const e={animation:this.animation,runningTransition:"continue"};$f(Hr(this._zone,this._elRef.nativeElement,(a,o)=>{o&&bc(a),a.classList.add("show")},e),Hr(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Ur(e,"keydown").pipe(tr(this._closed$),hr(r=>r.which===ir.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(ud.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Ur(this._dialogEl.nativeElement,"mousedown").pipe(tr(this._closed$),Rr(()=>i=!1),Go(()=>Ur(e,"mouseup").pipe(tr(this._closed$),ar(1))),hr(({target:r})=>e===r)).subscribe(()=>{i=!0}),Ur(e,"click").pipe(tr(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(ud.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=G2(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Hr(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(V(qn),V(Mi),V(ln))},t.\u0275cmp=Tt({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&Sr(i8,7),2&e){let r;yi(r=wi())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(Yi("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),ss("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Bt("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:F0,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(mh(),h(0,"div",0,1)(2,"div",2),bh(3),d()()),2&e&&ss("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),$6=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:a,paddingRight:o}=r;if(e>0){const s=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${s+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=o),r.overflow=a}}}return t.\u0275fac=function(e){return new(e||t)(He(qn))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),q6=(()=>{class t{constructor(e,i,r,a,o,s){this._applicationRef=e,this._injector=i,this._document=r,this._scrollBar=a,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new Te,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new bt,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((t,n,e,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=Ur(n,"focusin").pipe(tr(e),Xt(a=>a.target));Ur(n,"keydown").pipe(tr(e),hr(a=>a.which===ir.Tab),M0(r)).subscribe(([a,o])=>{const[s,l]=G2(n);(o===s||o===n)&&a.shiftKey&&(l.focus(),a.preventDefault()),o===l&&!a.shiftKey&&(s.focus(),a.preventDefault())}),i&&Ur(n,"click").pipe(tr(e),M0(r),Xt(a=>a[1])).subscribe(a=>a.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(e,i,r,a){const o=a.container instanceof HTMLElement?a.container:Qs(a.container)?this._document.querySelector(a.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.hide(),c=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!o)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const u=new eD,f=this._getContentRef(e,a.injector||i,r,u,a);let v=!1!==a.backdrop?this._attachBackdrop(e,o):void 0,b=this._attachWindowComponent(e,o,f),y=new z6(b,f,v,a.beforeDismiss);return this._registerModalRef(y),this._registerWindowCmpt(b),y.result.then(l,l),y.result.then(c,c),u.close=C=>{y.close(C)},u.dismiss=C=>{y.dismiss(C)},this._applyWindowOptions(b.instance,a),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),v&&v.instance&&(this._applyBackdropOptions(v.instance,a),v.changeDetectorRef.detectChanges()),b.changeDetectorRef.detectChanges(),y}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,i){let a=e.resolveComponentFactory(G6).create(this._injector);return this._applicationRef.attachView(a.hostView),i.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,i,r){let o=e.resolveComponentFactory(j6).create(this._injector,r.nodes);return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{Qs(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{Qs(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,a,o){return r?r instanceof wn?this._createFromTemplateRef(r,a):function T2(t){return"string"==typeof t}(r)?this._createFromString(r):this._createFromComponent(e,i,r,a,o):new el([])}_createFromTemplateRef(e,i){const a=e.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(a),new el([a.rootNodes],a)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new el([[i]])}_createFromComponent(e,i,r,a,o){const s=e.resolveComponentFactory(r),l=Ln.create({providers:[{provide:eD,useValue:a}],parent:i}),c=s.create(l),u=c.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new el([[u]],c.hostView,c)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(He(Es),He(Ln),He(qn),He($6),He(Dv),He(ln))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),W6=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(He(od))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),io=(()=>{class t{constructor(e,i,r,a){this._moduleCFR=e,this._injector=i,this._modalStack=r,this._config=a}open(e,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(He(Os),He(Ln),He(q6),He(W6))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),tD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({providers:[io]}),t})(),aD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr]]}),t})(),fD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr]]}),t})();class J6{constructor(n,e){this.open=n,this.close=e,e||(this.close=n)}isManual(){return"manual"===this.open||"manual"===this.close}}const eU={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},pD=t=>t>0?o2(t):n=>n;let aU=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(He(od))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),oU=0;function sU(t){return t.modifiers.push(PL,{name:"offset",options:{offset:()=>[0,12]}}),t}let lU=(()=>{class t{isTitleTemplate(){return this.title instanceof wn}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Tt({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,i){2&e&&(ls("id",i.id),ss("popover"+(i.popoverClass?" "+i.popoverClass:"")),Bt("fade",i.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:F0,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(mh(),D(0,"div",0),x(1,N8,4,2,"h3",1),h(2,"div",2),bh(3),d()),2&e&&(p(1),m("ngIf",i.title))},directives:[li,nc],encapsulation:2,changeDetection:0}),t})(),Qr=(()=>{class t{constructor(e,i,r,a,o,s,l,c,u){this._elementRef=e,this._renderer=i,this._ngZone=s,this._document=l,this._changeDetector=c,this.shown=new bt,this.hidden=new bt,this._ngbPopoverWindowId="ngb-popover-"+oU++,this._windowRef=null,this._positioning=$2(),this.animation=o.animation,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disablePopover=o.disablePopover,this.popoverClass=o.popoverClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new H6(lU,r,a,i,this._ngZone,u),this._zoneSubscription=s.onStable.subscribe(()=>{this._positioning.update()})}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:i,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=i,this._windowRef.instance.animation=this.animation,this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(ar(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:sU})}),U2(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function rU(t,n,e,i,r,a,o=0,s=0){const l=function tU(t,n=eU){const e=(t||"").trim();if(0===e.length)return[];const i=e.split(/\s+/).map(a=>a.split(":")).map(a=>{let o=n[a[0]]||a;return new J6(o[0],o[1])}),r=i.filter(a=>a.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(e);if(1===l.length&&l[0].isManual())return()=>{};const c=function iU(t,n,e,i){return new $e(r=>{const a=[],o=()=>r.next(!0),s=()=>r.next(!1),l=()=>r.next(!i());return e.forEach(c=>{c.open===c.close?a.push(t.listen(n,c.open,l)):a.push(t.listen(n,c.open,o),t.listen(n,c.close,s))}),()=>{a.forEach(c=>c())}})}(t,n,l,i).pipe(function nU(t,n,e){return i=>{let r=null;const a=i.pipe(Xt(l=>({open:l})),hr(l=>{const c=e();return c===l.open||r&&r.open!==c?(r&&r.open!==l.open&&(r=null),!1):(r=l,!0)}),xb());return Db(a.pipe(hr(l=>l.open),pD(t)),a.pipe(hr(l=>!l.open),pD(n))).pipe(hr(l=>l===r&&(r=null,l.open!==e())),Xt(l=>l.open))}}(o,s,i)).subscribe(u=>u?r():a());return()=>c.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:i,disablePopover:r,popoverClass:a}){a&&this.isOpen()&&(this._windowRef.instance.popoverClass=a.currentValue),(e||i||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(Mi),V(Ta),V(Ln),V(Ra),V(aU),V(ln),V(qn),V(sa),V(Es))},t.\u0275dir=nt({type:t,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[jn]}),t})(),gD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr]]}),t})(),cU=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),dd=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!To(e)||e<=0?100:e}get max(){return this._max}getValue(){return function S2(t,n,e=0){return Math.max(Math.min(t,n),e)}(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(V(cU))},t.\u0275cmp=Tt({type:t,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(e,i){2&e&&cu("height",i.height)},inputs:{max:"max",animated:"animated",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},ngContentSelectors:F0,decls:3,vars:11,consts:function(){let n;return n=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],n]},template:function(e,i){1&e&&(mh(),h(0,"div",0),x(1,B8,3,3,"span",1),bh(2),d()),2&e&&(function cw(t,n,e,i,r,a,o,s,l){qa(na,bo,Gl(Pe(),t,n,e,i,r,a,o,s,l),!0)}("progress-bar",i.type?" bg-"+i.type:"","",i.textType?" text-"+i.textType:"","\n    ",i.animated?" progress-bar-animated":"","",i.striped?" progress-bar-striped":"",""),cu("width",i.getPercentValue(),"%"),Yi("aria-valuenow",i.getValue())("aria-valuemax",i.max),p(1),m("ngIf",i.showValue))},directives:[li],pipes:[bS],encapsulation:2,changeDetection:0}),t})(),vD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr]]}),t})(),mD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr]]}),t})(),bD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr]]}),t})(),_D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr]]}),t})(),yD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({}),t})();new si("live announcer delay",{providedIn:"root",factory:function hU(){return 100}});let wD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[[Yr]]}),t})();const fU=[P2,V2,O2,B2,F2,K2,J2,tD,aD,fD,gD,vD,mD,bD,_D,yD,wD];let pU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t}),t.\u0275inj=Hi({imports:[fU,P2,V2,O2,B2,F2,K2,J2,tD,aD,fD,gD,vD,mD,bD,_D,yD,wD]}),t})();function gU(t,n){if(1&t){const e=ie();h(0,"div",1),A("click",function(){k(e);const r=_();return r.switchView(r.navigationEnum.incubator)}),h(1,"button",2),g(2,"Incubator"),d(),D(3,"hr"),d()}if(2&t){const e=_();p(1),m("ngClass",e.selectedNavigation===e.navigationEnum.incubator?"active":"")}}const Z0=function(t,n){return{active:t,tutorialActive:n}};let CD=(()=>{class t{constructor(e,i,r,a){this.componentCommunicationService=e,this.lookupService=i,this.globalService=r,this.gameLoopService=a,this.viewChanged=new bt,this.navigationEnum=Pt,this.selectedNavigation=0,this.tutorial3Active=!1,this.tutorial6Active=!1,this.tutorial9Active=!1}ngOnInit(){this.componentCommunicationService.getNewView().subscribe(e=>{this.viewChanged.emit(e),this.selectedNavigation=e}),this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack"),this.tutorialSubscription=this.gameLoopService.gameUpdateEvent.subscribe(e=>{var i,r;this.tutorial3Active=!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId,this.tutorial6Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||6!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(i=this.globalService.globalVar.animals.find(a=>a.type===L.Monkey))||void 0===i?void 0:i.isAvailable)),this.tutorial9Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||9!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(r=this.globalService.globalVar.animals.find(a=>a.type===L.Hare))||void 0===r?void 0:r.isAvailable)),this.globalService.globalVar.tutorials.tutorialCompleted&&this.tutorialSubscription.unsubscribe()})}switchView(e){this.selectedNavigation===Pt.shop&&this.componentCommunicationService.setShopView(Pt.shop,Va.regular),this.selectedNavigation===Pt.barn&&this.componentCommunicationService.setBarnView(Pt.barn,0),this.selectedNavigation===Pt.animals&&this.componentCommunicationService.setAnimalView(Pt.animals,new At),this.viewChanged.emit(e),this.selectedNavigation=e,this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack")}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0)}}return t.\u0275fac=function(e){return new(e||t)(V(Pn),V(Ti),V(It),V(An))},t.\u0275cmp=Tt({type:t,selectors:[["app-navigation"]],outputs:{viewChanged:"viewChanged"},decls:29,vars:17,consts:[[1,"navigation"],[1,"navSpace","clickableText",3,"click"],[1,"buttonAsText",3,"ngClass"],["class","navSpace clickableText",3,"click",4,"ngIf"],[1,"navSpace","clickableText"],[1,"buttonAsText",3,"ngClass","click"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1),A("click",function(){return i.switchView(i.navigationEnum.barn)}),h(2,"button",2),g(3,"Barns"),d()(),D(4,"hr"),h(5,"div",1),A("click",function(){return i.switchView(i.navigationEnum.raceselection)}),h(6,"button",2),g(7,"Races"),d()(),D(8,"hr"),h(9,"div",1),A("click",function(){return i.switchView(i.navigationEnum.animals)}),h(10,"button",2),g(11,"Animals"),d()(),D(12,"hr"),h(13,"div",1),A("click",function(){return i.switchView(i.navigationEnum.relayTeams)}),h(14,"button",2),g(15,"Relay Teams"),d()(),D(16,"hr"),h(17,"div",1),A("click",function(){return i.switchView(i.navigationEnum.shop)}),h(18,"button",2),g(19,"Shop"),d()(),D(20,"hr"),x(21,gU,4,1,"div",3),h(22,"div",4)(23,"button",5),A("click",function(){return i.switchView(i.navigationEnum.resources)}),g(24,"Resources"),d()(),D(25,"hr"),h(26,"div",1),A("click",function(){return i.switchView(i.navigationEnum.settings)}),h(27,"button",2),g(28,"Settings"),d()()()),2&e&&(p(2),m("ngClass",cs(8,Z0,i.selectedNavigation===i.navigationEnum.barn,i.tutorial6Active)),p(4),m("ngClass",cs(11,Z0,i.selectedNavigation===i.navigationEnum.raceselection,i.tutorial3Active)),p(4),m("ngClass",cs(14,Z0,i.selectedNavigation===i.navigationEnum.animals,i.tutorial9Active)),p(4),m("ngClass",i.selectedNavigation===i.navigationEnum.relayTeams?"active":""),p(4),m("ngClass",i.selectedNavigation===i.navigationEnum.shop?"active":""),p(3),m("ngIf",i.incubatorAvailable),p(2),m("ngClass",i.selectedNavigation===i.navigationEnum.resources?"active":""),p(4),m("ngClass",i.selectedNavigation===i.navigationEnum.settings?"active":""))},directives:[cn,li],styles:[".navigation[_ngcontent-%COMP%]{height:100%;border-left:1px solid rgba(0,0,0,.1);padding-left:1rem;padding-top:1rem;background-color:var(--background-secondary);color:var(--foreground-default)}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}"]}),t})();function vU(t,n){if(1&t&&D(0,"div",15),2&t){const e=_();m("innerHTML",e.getSanitizedHtml(e.latestVersionChanges),kt)}}function mU(t,n){if(1&t&&(h(0,"div")(1,"div",24)(2,"span",25),g(3),Vt(4,"number"),d(),h(5,"span"),g(6),d()(),D(7,"br")(8,"div",26),h(9,"span"),D(10,"hr"),d()()),2&t){const e=n.$implicit,i=n.index,r=_(3);p(3),q("Version ",Qt(4,3,r.allVersions[i],"1.2-2"),""),p(3),q(" ",r.versionControlService.getDateForVersion(r.allVersions[i]),""),p(2),m("innerHTML",r.getSanitizedHtml(e),kt)}}function bU(t,n){if(1&t&&(h(0,"div")(1,"div",21)(2,"div",22),x(3,mU,11,6,"div",23),d()()()),2&t){const e=_(2);p(3),m("ngForOf",e.changeLog)}}function _U(t,n){if(1&t){const e=ie();h(0,"div",16)(1,"div",17)(2,"h4",18),g(3,"Change Log"),d(),h(4,"button",19),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),x(6,bU,4,1,"div",20),d()}if(2&t){const e=_();p(6),m("ngIf",e.changeLog.length>0)}}let yU=(()=>{class t{constructor(e,i,r,a,o,s,l){this.lookupService=e,this.gameLoopService=i,this.globalService=r,this.componentCommunicationService=a,this.versionControlService=o,this.modalService=s,this.sanitizer=l}ngOnInit(){this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.latestVersionChanges=this.versionControlService.getLatestChanges(),this.changeLog=this.versionControlService.getAllChanges(),this.allVersions=this.versionControlService.gameVersions,this.gameLoopService.gameUpdateEvent.subscribe(e=>{this.globalService.globalVar.userIsRacing||(this.coinCount=this.lookupService.getCoins(),this.medalCount=this.lookupService.getMedals())})}getSanitizedHtml(e){return this.sanitizer.sanitize(_i.HTML,this.sanitizer.bypassSecurityTrustHtml(e))}changeView(e){this.componentCommunicationService.setNewView(e)}openChangeLog(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}}return t.\u0275fac=function(e){return new(e||t)(V(Ti),V(An),V(It),V(Pn),V(D0),V(io),V(hs))},t.\u0275cmp=Tt({type:t,selectors:[["app-header"]],decls:26,vars:8,consts:[[1,"headerView"],[1,"gridContainer"],[1,"nameArea","keyword"],[1,"name"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"version","versionMargin","clickableText",3,"ngbPopover","click"],[1,"coins","keyword"],[1,"medals","keyword"],[1,"menu","keyword"],["ngbDropdown","",1,"d-inline-block","customDropdown"],["menuDropdown","ngbDropdown"],["type","button","id","menuDropdown","ngbDropdownToggle","",1,"btn","dropdown"],["ngbDropdownMenu","","aria-labelledby","menuDropdown",1,"dropdownItems"],[3,"viewChanged","click"],["latestVersionChangesContent",""],["content",""],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[4,"ngIf"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],[1,"flexDiv"],[1,"s4Heading"],[3,"innerHTML"]],template:function(e,i){if(1&e){const r=ie();h(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),g(4," Cultura "),d(),h(5,"span",4),A("click",function(){k(r);const o=ot(25);return i.openChangeLog(o)}),g(6),d()(),h(7,"div",5)(8,"span"),g(9),Vt(10,"number"),d()(),h(11,"div",6)(12,"span"),g(13),Vt(14,"number"),d()(),h(15,"div",7)(16,"div",8,9)(18,"button",10),g(19,"Menu"),d(),h(20,"div",11)(21,"app-navigation",12),A("viewChanged",function(o){return i.changeView(o)})("click",function(){return k(r),ot(17).close()}),d()()()()(),x(22,vU,1,1,"ng-template",null,13,dt),x(24,_U,7,1,"ng-template",null,14,dt),d()}if(2&e){const r=ot(23);p(5),m("ngbPopover",r),p(1),q(" v",i.version," "),p(3),q("Coins: ",Ah(10,4,i.coinCount),""),p(4),q("Medals: ",Ah(14,6,i.medalCount),"")}},directives:[Qr,yc,X0,ip,CD,li,Cn],pipes:[Qa],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name . coins ." ". name . medals ."}.nameArea[_ngcontent-%COMP%]{grid-area:name;justify-self:stretch}.name[_ngcontent-%COMP%]{font-size:2rem}.coins[_ngcontent-%COMP%]{grid-area:coins;justify-self:stretch}.medals[_ngcontent-%COMP%]{grid-area:medals;justify-self:stretch}.versionMargin[_ngcontent-%COMP%]{margin-left:.5rem}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}.dropdownItems[_ngcontent-%COMP%]{background-color:var(--background-secondary);color:var(--foreground-default)}.menu[_ngcontent-%COMP%]{display:none}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre-line}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.flexDiv[_ngcontent-%COMP%]{display:flex;justify-content:space-between}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 15% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name coins menu ." ". name medals menu ."}.menu[_ngcontent-%COMP%]{display:block;grid-area:menu;justify-self:stretch}.customDropdown[_ngcontent-%COMP%]{width:100%;text-align:center}}']}),t})();function wU(t,n){if(1&t&&(h(0,"strong"),g(1),d()),2&t){const e=_(3);p(1),q("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function CU(t,n){if(1&t&&(h(0,"h6",11)(1,"span"),g(2),d(),D(3,"br"),h(4,"span"),g(5),d()()),2&t){const e=_(3);m("ngClass",e.colorConditional),p(2),rt(e.associatedAnimalName),p(3),rt(e.associatedAnimalType)}}function SU(t,n){if(1&t&&(h(0,"h6",11)(1,"span"),g(2),d()()),2&t){const e=_(3);m("ngClass",e.colorConditional),p(2),rt(e.associatedAnimalType)}}function TU(t,n){1&t&&(h(0,"div")(1,"em"),g(2,"Auto Breed "),h(3,"strong"),g(4,"ON"),d()()())}function RU(t,n){1&t&&(h(0,"div")(1,"em"),g(2,"At Max Breed XP"),d()())}const DU=function(t){return{floatingProgressTextAnimation:t}};function xU(t,n){if(1&t&&(h(0,"div",6)(1,"span"),g(2),x(3,wU,2,1,"strong",7),d(),x(4,CU,6,3,"h6",8),x(5,SU,3,2,"h6",8),D(6,"br"),h(7,"p"),D(8,"ngb-progressbar",9),d(),h(9,"div",10),g(10),d(),D(11,"br"),x(12,TU,5,0,"div",7),x(13,RU,3,0,"div",7),d()),2&t){const e=_(2);p(2),q("",e.barnName," "),p(1),m("ngIf",e.barn.barnUpgrades.barnLevel>0),p(1),m("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),m("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(3),m("value",e.trainingProgressBarPercent),p(1),m("ngClass",yt(9,DU,e.showTrainingAnimation)),p(1),q(" ",e.trainingCompleteText," "),p(2),m("ngIf",e.autoBreedActive),p(1),m("ngIf",!e.autoBreedActive&&e.readyToBreed)}}function kU(t,n){if(1&t&&(h(0,"strong"),g(1),d()),2&t){const e=_(3);p(1),q("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function MU(t,n){if(1&t&&(h(0,"h6",12)(1,"span"),g(2),x(3,kU,2,1,"strong",7),d(),D(4,"br")(5,"br")(6,"br"),h(7,"span"),g(8,"Unassigned"),d(),D(9,"br"),h(10,"em"),g(11,"Click to assign animal"),d()()),2&t){const e=_(2);p(2),q("",e.barnName," "),p(1),m("ngIf",e.barn.barnUpgrades.barnLevel>0)}}function AU(t,n){if(1&t&&(h(0,"strong"),g(1),d()),2&t){const e=_(3);p(1),q("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function PU(t,n){if(1&t&&(h(0,"h6",13)(1,"span"),g(2),x(3,AU,2,1,"strong",7),d(),D(4,"br")(5,"br")(6,"br"),h(7,"span"),g(8,"Locked"),d(),D(9,"br"),h(10,"em"),g(11,"Click to view status"),d()()),2&t){const e=_(2);p(2),q("",e.barnName," "),p(1),m("ngIf",e.barn.barnUpgrades.barnLevel>0)}}function VU(t,n){if(1&t&&(h(0,"div",2),x(1,xU,14,11,"div",3),x(2,MU,12,2,"h6",4),x(3,PU,12,2,"h6",5),d()),2&t){const e=_();m("ngClass",e.swapBarnActive()),p(1),m("ngIf",e.isOccupied),p(1),m("ngIf",!e.isOccupied&&!e.isLocked),p(1),m("ngIf",e.isLocked)}}function IU(t,n){if(1&t&&(h(0,"strong"),g(1),d()),2&t){const e=_(3);p(1),q("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function OU(t,n){if(1&t&&(h(0,"h6",23)(1,"span"),g(2),d(),h(3,"span"),g(4),d()()),2&t){const e=_(3);m("ngClass",e.colorConditional),p(2),q("",e.associatedAnimalName," "),p(2),q("(",e.associatedAnimalType,")")}}function EU(t,n){if(1&t&&(h(0,"h6",23)(1,"span"),g(2),d()()),2&t){const e=_(3);m("ngClass",e.colorConditional),p(2),rt(e.associatedAnimalType)}}function NU(t,n){1&t&&(h(0,"div",24)(1,"em"),g(2,"Auto Breed "),h(3,"strong"),g(4,"ON"),d()()())}function BU(t,n){1&t&&(h(0,"div",24)(1,"em"),g(2,"At Max Breed XP"),d()())}function FU(t,n){1&t&&(h(0,"div",24),D(1,"em"),d())}function LU(t,n){if(1&t&&(h(0,"div",18)(1,"span",19),g(2),x(3,IU,2,1,"strong",7),d(),x(4,OU,5,3,"h6",20),x(5,EU,3,2,"h6",20),D(6,"ngb-progressbar",21),x(7,NU,5,0,"div",22),x(8,BU,3,0,"div",22),x(9,FU,2,0,"div",22),d()),2&t){const e=_(2);p(2),q("",e.barnName," "),p(1),m("ngIf",e.barn.barnUpgrades.barnLevel>0),p(1),m("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),m("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(1),m("value",e.trainingProgressBarPercent),p(1),m("ngIf",e.autoBreedActive),p(1),m("ngIf",!e.autoBreedActive&&e.readyToBreed),p(1),m("ngIf",!e.autoBreedActive&&!e.readyToBreed)}}function UU(t,n){if(1&t&&(h(0,"strong"),g(1),d()),2&t){const e=_(3);p(1),q("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function HU(t,n){if(1&t&&(h(0,"h6",25)(1,"span",19),g(2),x(3,UU,2,1,"strong",7),d(),h(4,"span",26),g(5,"Unassigned"),d(),h(6,"em",27),g(7,"Click to assign animal"),d(),D(8,"span",28),d()),2&t){const e=_(2);p(2),q(" ",e.barnName," "),p(1),m("ngIf",e.barn.barnUpgrades.barnLevel>0)}}function GU(t,n){if(1&t&&(h(0,"strong"),g(1),d()),2&t){const e=_(3);p(1),q("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function zU(t,n){if(1&t&&(h(0,"h6",29)(1,"span",19),g(2),x(3,GU,2,1,"strong",7),d(),h(4,"span",26),g(5,"Locked"),d(),h(6,"em",27),g(7,"Click to view status"),d(),D(8,"span",28),d()),2&t){const e=_(2);p(2),q("",e.barnName," "),p(1),m("ngIf",e.barn.barnUpgrades.barnLevel>0)}}const jU=function(t){return{turnOffPointer:t}};function $U(t,n){if(1&t&&(h(0,"div",14),x(1,LU,10,8,"div",15),x(2,HU,9,2,"h6",16),x(3,zU,9,2,"h6",17),d()),2&t){const e=_();m("ngClass",yt(4,jU,e.swapBarnMode)),p(1),m("ngIf",e.isOccupied),p(1),m("ngIf",!e.isOccupied&&!e.isLocked),p(1),m("ngIf",e.isLocked)}}let qU=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.utilityService=a,this.condensedView=!1,this.trainingCompleteText="",this.showTrainingAnimation=!1,this.swapBarnMode=!1,this.selectedBarn=new bt}ngOnInit(){this.resetBarn()}ngOnChanges(){this.resetBarn()}ngOnDestroy(){this.previousTrainedAmount=0,null!=this.subscription&&this.subscription.unsubscribe()}resetBarn(){if(this.barnNumber>0&&this.barnNumber<=this.globalService.globalVar.barns.length+1){this.globalService.globalVar.settings.get("quickViewBarnMode")&&(this.condensedView=!0);var e=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.barnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e);var i=this.globalService.globalVar.animals.find(r=>r.associatedBarnNumber==this.barnNumber);null!=i?(this.isOccupied=!0,this.associatedAnimalName=i.name,this.associatedAnimalType=L[i.type],this.associatedAnimal=i,this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()}):this.isOccupied=!1,this.isLocked=e.isLocked}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");void 0!==this.subscription&&this.subscription.unsubscribe(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{if(this.globalService.globalVar.settings.get("swapBarnMode")&&(this.swapBarnMode=!0),!this.isLocked){var a=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.barnNumber);if(null!=a){if(this.readyToBreed=a.breedGaugeXp>=a.breedGaugeMax&&this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=10,this.autoBreedActive=a.autoBreedActive,null==a.currentTraining)return void(this.trainingProgressBarPercent=0);a.currentTraining.timeTrained<this.previousTrainedAmount&&(this.trainingCompleteText=this.lookupService.getTrainingProgressionAnimationText(a.currentTraining),this.showTrainingAnimation=!0,setTimeout(()=>{this.showTrainingAnimation=!1,this.trainingCompleteText=""},3e3)),this.previousTrainedAmount=a.currentTraining.timeTrained,this.trainingProgressBarPercent=a.currentTraining.timeTrained/a.currentTraining.timeToComplete*100}}})}swapBarnActive(){return{turnOffPointer:this.swapBarnMode}}onClick(){this.selectedBarn.emit(this.barnNumber)}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(An),V(Ti),V(Rn))},t.\u0275cmp=Tt({type:t,selectors:[["app-barn"]],hostBindings:function(e,i){1&e&&A("click",function(){return i.onClick()})},inputs:{barnNumber:"barnNumber",condensedView:"condensedView"},outputs:{selectedBarn:"selectedBarn"},features:[jn],decls:2,vars:2,consts:[["class","barn clickableText",3,"ngClass",4,"ngIf"],["class","condensedBarn clickableText",3,"ngClass",4,"ngIf"],[1,"barn","clickableText",3,"ngClass"],["class","unlocked",4,"ngIf"],["class","unassigned",4,"ngIf"],["class","locked",4,"ngIf"],[1,"unlocked"],[4,"ngIf"],["class","keyword",3,"ngClass",4,"ngIf"],["type","success",3,"value"],[1,"progressBar","floatingProgressText","progressBarColor","keyword",3,"ngClass"],[1,"keyword",3,"ngClass"],[1,"unassigned"],[1,"locked"],[1,"condensedBarn","clickableText",3,"ngClass"],["class","condensedFlex unlocked",4,"ngIf"],["class","condensedFlex unassigned",4,"ngIf"],["class","condensedFlex locked",4,"ngIf"],[1,"condensedFlex","unlocked"],[1,"barnNameWidth"],["class","keyword inlineBlock condensedMargin nameWidth",3,"ngClass",4,"ngIf"],["type","success",1,"condensedProgressBar","condensedMargin",3,"value"],["class","condensedMargin breedWidth",4,"ngIf"],[1,"keyword","inlineBlock","condensedMargin","nameWidth",3,"ngClass"],[1,"condensedMargin","breedWidth"],[1,"condensedFlex","unassigned"],[1,"nameWidth"],[1,"condensedProgressBar"],[1,"breedWidth"],[1,"condensedFlex","locked"]],template:function(e,i){1&e&&(x(0,VU,4,4,"div",0),x(1,$U,4,6,"div",1)),2&e&&(m("ngIf",!i.condensedView),p(1),m("ngIf",i.condensedView))},directives:[li,cn,dd],styles:[".barn[_ngcontent-%COMP%]{text-align:center;width:52.5%;margin:auto;display:flex;justify-content:center;align-content:center;flex-direction:column;height:100%}.turnOffPointer[_ngcontent-%COMP%]{pointer-events:none}.floatingProgressText[_ngcontent-%COMP%]{float:right;position:relative;text-align:right;top:-2em}.inlineBlock[_ngcontent-%COMP%]{display:inline-block}.condensedFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%}.condensedBarn[_ngcontent-%COMP%]{text-align:center;margin:.5rem auto;display:flex;justify-content:center;align-content:center;flex-direction:column;height:100%}.condensedMargin[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.nameWidth[_ngcontent-%COMP%]{width:32.5%}.barnNameWidth[_ngcontent-%COMP%]{width:28.5%}.condensedProgressBar[_ngcontent-%COMP%]{width:20%}.breedWidth[_ngcontent-%COMP%]{width:15%}.floatingProgressTextAnimation[_ngcontent-%COMP%]{animation-name:floatingProgressTextAnimation;animation-duration:3s;animation-iteration-count:1;animation-timing-function:ease-in-out}@keyframes floatingProgressTextAnimation{0%{transform:translate(0)}to{transform:translateY(-30px);opacity:0}}@media (max-width: 800px){.barn[_ngcontent-%COMP%]{width:75%}}"]}),t})(),WU=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Tt({type:t,selectors:[["app-training-option"]],inputs:{trainingOption:"trainingOption"},decls:7,vars:4,consts:[[1,"training"],[1,"trainingName","keyword"],[1,"trainingStats"],[1,"trainingTimeToComplete"]],template:function(e,i){1&e&&(h(0,"h6",0)(1,"p",1),g(2),d(),h(3,"p",2),g(4),d(),h(5,"p",3),g(6),d()()),2&e&&(p(2),rt(i.trainingOption.trainingName),p(2),rt(i.trainingOption.getStatGainDescription()),p(2),ki("",i.trainingOption.getFacilitySize()," - ",i.trainingOption.timeToComplete," sec "))},styles:[".training[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const XU=function(t){return{activeTrainingOption:t}};function YU(t,n){if(1&t){const e=ie();h(0,"td",4)(1,"div",5),A("click",function(){const a=k(e).$implicit;return _(2).selectTrainingOption(a)}),D(2,"app-training-option",6),d()()}if(2&t){const e=n.$implicit;p(1),m("ngClass",yt(2,XU,e.isSelected)),p(1),m("trainingOption",e)}}function QU(t,n){if(1&t&&(h(0,"tr"),x(1,YU,3,4,"td",3),d()),2&t){const e=n.$implicit;p(1),m("ngForOf",e)}}let KU=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrainingOption=new bt}ngOnInit(){this.setupDisplayTrainings()}setupDisplayTrainings(){this.trainingsCells=[],this.trainingsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTrainingOptions.length;i++)this.trainingsCells.push(this.availableTrainingOptions[i-1]),i%e==0&&(this.trainingsRows.push(this.trainingsCells),this.trainingsCells=[]);0!==this.trainingsCells.length&&this.trainingsRows.push(this.trainingsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrainingOption(e){this.availableTrainingOptions.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrainingOption.emit(e)}ngOnChanges(e){this.availableTrainingOptions=e.availableTrainingOptions.currentValue,this.setupDisplayTrainings()}}return t.\u0275fac=function(e){return new(e||t)(V(It))},t.\u0275cmp=Tt({type:t,selectors:[["app-training-list"]],hostBindings:function(e,i){1&e&&A("resize",function(a){return i.onResize(a)},!1,Ca)},inputs:{availableTrainingOptions:"availableTrainingOptions"},outputs:{selectedTrainingOption:"selectedTrainingOption"},features:[jn],decls:4,vars:1,consts:[[1,"trainingsView"],[1,"trainings"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trainingOption"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"table"),x(3,QU,2,1,"tr",2),d()()()),2&e&&(p(3),m("ngForOf",i.trainingsRows))},directives:[Cn,cn,WU],styles:[".trainingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.trainings[_ngcontent-%COMP%]{margin:.5rem}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function ZU(t,n){if(1&t&&(h(0,"span"),g(1),d()),2&t){const e=_(2);p(1),rt(e.selectedAnimal.name)}}function JU(t,n){if(1&t&&(h(0,"div"),g(1),d()),2&t){const e=_(2);p(1),q(" Breed Level ",e.breedLevel," ")}}function e7(t,n){if(1&t&&(h(0,"div"),g(1),d()),2&t){const e=_(2);p(1),q(" ",e.getTraitDetails()," ")}}function t7(t,n){if(1&t&&(h(0,"h6",3),x(1,ZU,2,1,"span",2),D(2,"br"),h(3,"span"),g(4),d(),x(5,JU,2,1,"div",2),x(6,e7,2,1,"div",2),d()),2&t){const e=_();p(1),m("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),rt(e.selectedAnimal.getAnimalType()),p(1),m("ngIf",e.isAnimalDetailView),p(1),m("ngIf",e.isIncubatorDetailView&&void 0!==e.trait)}}function i7(t,n){if(1&t&&(h(0,"div"),g(1),d()),2&t){const e=_(2);p(1),q(" Breed Level ",e.breedLevel," ")}}function n7(t,n){if(1&t&&(h(0,"div"),g(1),d()),2&t){const e=_(2);p(1),q(" ",e.getTraitDetails()," ")}}function r7(t,n){if(1&t&&(h(0,"h6",3)(1,"span"),g(2),d(),x(3,i7,2,1,"div",2),x(4,n7,2,1,"div",2),d()),2&t){const e=_();p(2),rt(e.selectedAnimal.getAnimalType()),p(1),m("ngIf",e.isAnimalDetailView),p(1),m("ngIf",e.isIncubatorDetailView&&void 0!==e.trait)}}function a7(t,n){if(1&t&&(h(0,"div"),D(1,"br")(2,"br"),h(3,"h6",3)(4,"em"),g(5),d()()()),2&t){const e=_();p(5),ki("",e.trainingTrackRewardsRemaining," / ",e.trainingTrackTotalRewards," rewards remaining")}}let o7=(()=>{class t{constructor(){this.isTrainingTrackView=!1,this.isAnimalDetailView=!1,this.isIncubatorDetailView=!1,this.trainingTrackRewardsRemaining=0,this.trainingTrackTotalRewards=0,this.breedLevel=0}ngOnInit(){this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.isTrainingTrackView&&(this.trainingTrackRewardsRemaining=this.selectedAnimal.allTrainingTracks.getTotalRewardsRemaining(),this.trainingTrackTotalRewards=this.selectedAnimal.allTrainingTracks.getTotalRewardCount()),this.breedLevel=this.selectedAnimal.breedLevel,this.trait=this.selectedAnimal.trait}getTraitDetails(){return void 0!==this.trait?this.trait.traitName+" ("+this.trait.researchLevel+"%)":""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Tt({type:t,selectors:[["app-animal"]],inputs:{selectedAnimal:"selectedAnimal",isTrainingTrackView:"isTrainingTrackView",isAnimalDetailView:"isAnimalDetailView",isIncubatorDetailView:"isIncubatorDetailView"},decls:8,vars:5,consts:[[1,"keyword","animal",3,"ngClass"],["class","keyword",4,"ngIf"],[4,"ngIf"],[1,"keyword"]],template:function(e,i){1&e&&(h(0,"div",0),x(1,t7,7,4,"h6",1),x(2,r7,5,3,"h6",1),D(3,"br")(4,"br"),h(5,"span"),g(6),d(),x(7,a7,6,2,"div",2),d()),2&e&&(m("ngClass",i.colorConditional),p(1),m("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),m("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(4),rt(i.selectedAnimal.getRaceCourseType()),p(1),m("ngIf",i.isTrainingTrackView))},directives:[cn,li],styles:[".animal[_ngcontent-%COMP%]{margin:.5rem}"]}),t})();function s7(t,n){if(1&t){const e=ie();h(0,"td")(1,"div",3),A("click",function(){const a=k(e).$implicit;return _(2).selectAnimal(a)}),D(2,"app-animal",4),d()()}if(2&t){const e=n.$implicit,i=_(2);p(2),m("selectedAnimal",e)("isTrainingTrackView",i.isTrainingTrackView)("isIncubatorDetailView",i.isIncubatorDetailView)("isAnimalDetailView",i.isAnimalDetailView)}}function l7(t,n){if(1&t&&(h(0,"tr"),x(1,s7,3,4,"td",2),d()),2&t){const e=n.$implicit;p(1),m("ngForOf",e)}}let rp=(()=>{class t{constructor(e){this.globalService=e,this.isTrainingTrackView=!1,this.isAnimalDetailView=!1,this.isIncubatorDetailView=!1,this.selectedAnimal=new bt}ngOnInit(){this.setupDisplayAnimals()}setupDisplayAnimals(){this.animalCells=[],this.animalRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableAnimals.length;i++)this.animalCells.push(this.availableAnimals[i-1]),i%e==0&&(this.animalRows.push(this.animalCells),this.animalCells=[]);0!==this.animalCells.length&&this.animalRows.push(this.animalCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectAnimal(e){this.selectedAnimal.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(V(It))},t.\u0275cmp=Tt({type:t,selectors:[["app-animal-list"]],hostBindings:function(e,i){1&e&&A("resize",function(a){return i.onResize(a)},!1,Ca)},inputs:{availableAnimals:"availableAnimals",isTrainingTrackView:"isTrainingTrackView",isAnimalDetailView:"isAnimalDetailView",isIncubatorDetailView:"isIncubatorDetailView"},outputs:{selectedAnimal:"selectedAnimal"},decls:4,vars:1,consts:[[1,"animalsView"],[1,"animals"],[4,"ngFor","ngForOf"],[1,"clickableText",3,"click"],[3,"selectedAnimal","isTrainingTrackView","isIncubatorDetailView","isAnimalDetailView"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"table"),x(3,l7,2,1,"tr",2),d()()()),2&e&&(p(3),m("ngForOf",i.animalRows))},directives:[Cn,o7],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();const c7=["specializationModal"];function u7(t,n){if(1&t){const e=ie();h(0,"div")(1,"span",41),A("click",function(){k(e);const r=_(2),a=ot(18);return r.openBarnUpgradeModal(a)}),g(2),d(),D(3,"br")(4,"br"),h(5,"span",42)(6,"button",43),A("click",function(){return k(e),_(2).upgradeBarn()}),g(7),d()()()}if(2&t){const e=_(2),i=ot(4),r=ot(6);p(1),m("ngbPopover",i),p(1),q("Barn Level ",e.barn.barnUpgrades.barnLevel,""),p(3),m("ngbPopover",r),p(1),m("disabled",!e.canUpgrade),p(1),rt(e.upgradeText)}}function d7(t,n){if(1&t&&(h(0,"span"),g(1),d()),2&t){const e=_(3);p(1),rt(e.associatedAnimal.name)}}function h7(t,n){if(1&t){const e=ie();h(0,"button",44),A("click",function(){return k(e),_(2).goToAnimal()}),x(1,d7,2,1,"span",16),D(2,"br"),h(3,"span"),g(4),d()()}if(2&t){const e=_(2);m("ngClass",e.colorConditional),p(1),m("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(3),rt(e.associatedAnimal.getAnimalType())}}function f7(t,n){if(1&t){const e=ie();h(0,"button",45),A("click",function(){return k(e),_(2).goToAnimal()}),h(1,"span"),g(2),d()()}if(2&t){const e=_(2);m("ngClass",e.colorConditional),p(2),rt(e.associatedAnimal.getAnimalType())}}function p7(t,n){if(1&t){const e=ie();h(0,"span",42),D(1,"br",46),h(2,"button",47),A("click",function(){return k(e),_(2).upgradeBarnSize()}),g(3,"Build"),d()()}if(2&t){const e=_(2);m("ngbPopover",ot(8)),p(2),m("disabled",!e.canBuild)}}function g7(t,n){if(1&t&&(h(0,"div",42)(1,"span",48),g(2),d(),D(3,"br"),h(4,"span")(5,"em"),g(6),Vt(7,"number"),d()()()),2&t){const e=_(2);m("ngbPopover",ot(10)),p(2),q("",e.existingTraining.trainingName," "),p(4),q("(",Qt(7,3,e.existingTraining.trainingTimeRemaining/60,"1.0-0")," min remaining)")}}function v7(t,n){1&t&&(h(0,"div",42)(1,"span"),g(2,"No Training Assigned"),d()()),2&t&&(_(2),m("ngbPopover",ot(12)))}function m7(t,n){if(1&t){const e=ie();h(0,"div")(1,"span")(2,"button",15),A("click",function(){return k(e),_(2).goToCoaching()}),g(3,"Coach"),d()()()}}function b7(t,n){if(1&t&&(h(0,"div"),D(1,"br"),h(2,"p",49),D(3,"ngb-progressbar",50),h(4,"span",51),g(5),Vt(6,"number"),d()(),D(7,"br"),d()),2&t){const e=_(2);p(3),m("value",e.trainingProgressBarPercent),p(2),q("",Qt(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}function _7(t,n){1&t&&(h(0,"div",52)(1,"em"),g(2,"This animal is currently busy and will not progress in their training."),d()())}const y7=function(t){return{sizeSpacing:t}};function w7(t,n){if(1&t){const e=ie();h(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"button",14),A("click",function(){return k(e),_().unassignAnimal()}),g(6,"Unassign"),d(),h(7,"button",15),A("click",function(){k(e);const r=_(),a=ot(14);return r.openSwapModal(a)}),g(8,"Swap"),d()(),D(9,"br")(10,"br"),x(11,u7,8,5,"div",16),d(),h(12,"div",17)(13,"span"),g(14),d(),D(15,"br"),x(16,h7,5,3,"button",18),x(17,f7,3,2,"button",19),h(18,"div")(19,"span",20),g(20),d(),x(21,p7,4,2,"span",21),d(),D(22,"hr"),x(23,g7,8,6,"div",21),x(24,v7,3,1,"div",21),d(),h(25,"div",22)(26,"button",15),A("click",function(){return k(e),_().returnToBarnView()}),g(27,"Back"),d(),D(28,"br")(29,"br")(30,"br")(31,"br")(32,"br"),x(33,m7,4,0,"div",16),d()(),D(34,"hr"),x(35,b7,8,5,"div",16),D(36,"br"),h(37,"div",23)(38,"span",24),A("click",function(){return k(e),_().resetFilters()}),g(39,"Change Training"),d(),D(40,"br"),h(41,"span",25)(42,"em"),g(43,"Click an option below to start training."),d()()(),D(44,"br"),h(45,"div",26)(46,"div",27)(47,"button",28),A("click",function(){return k(e),_().toggleFacilityFilter("Small")}),g(48,"Small "),d(),h(49,"button",29),A("click",function(){return k(e),_().toggleFacilityFilter("Medium")}),g(50,"Medium "),d(),h(51,"button",30),A("click",function(){return k(e),_().toggleFacilityFilter("Large")}),g(52,"Large "),d()(),h(53,"button",31)(54,"span",15),A("click",function(){return k(e),_().resetFilters()}),g(55,"Reset Filters"),d()(),h(56,"div",32)(57,"button",33),A("click",function(){return k(e),_().toggleStatFilter("Speed")}),g(58,"SPD "),d(),h(59,"button",34),A("click",function(){return k(e),_().toggleStatFilter("Acceleration")}),g(60,"ACC "),d(),h(61,"button",35),A("click",function(){return k(e),_().toggleStatFilter("Endurance")}),g(62,"END "),d(),h(63,"button",36),A("click",function(){return k(e),_().toggleStatFilter("Power")}),g(64,"PWR "),d(),h(65,"button",37),A("click",function(){return k(e),_().toggleStatFilter("Focus")}),g(66,"FCS "),d(),h(67,"button",38),A("click",function(){return k(e),_().toggleStatFilter("Adaptability")}),g(68,"ADP"),d()()(),D(69,"br"),h(70,"div",20),x(71,_7,3,0,"div",39),h(72,"app-training-list",40),A("selectedTrainingOption",function(r){return k(e),_().selectNewTraining(r)}),d()()()()}if(2&t){const e=_();p(11),m("ngIf",e.barnSpecializationsUnlocked),p(3),q(" ",e.barnName,""),p(2),m("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),m("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(2),m("ngClass",yt(32,y7,"Large"!==e.sizeValue)),p(1),q("",e.sizeValue," "),p(1),m("ngIf","Large"!==e.sizeValue),p(2),m("ngIf",null!=e.existingTraining),p(1),m("ngIf",null==e.existingTraining),p(9),m("ngIf",e.coachingUnlocked),p(2),m("ngIf",null!=e.existingTraining),p(12),Bt("filterActive",e.filterSmall),p(2),Bt("filterActive",e.filterMedium),p(2),Bt("filterActive",e.filterLarge),p(6),Bt("filterActive",e.filterSpeed),p(2),Bt("filterActive",e.filterAcceleration),p(2),Bt("filterActive",e.filterEndurance),p(2),Bt("filterActive",e.filterPower),p(2),Bt("filterActive",e.filterFocus),p(2),Bt("filterActive",e.filterAdaptability),p(3),m("ngClass",e.tutorialActive?"tutorialActive":""),p(1),m("ngIf",!e.associatedAnimal.canTrain),p(1),m("availableTrainingOptions",e.availableTrainings)}}function C7(t,n){if(1&t){const e=ie();h(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",17)(4,"span"),g(5),d(),D(6,"br"),h(7,"span"),g(8,"Unassigned"),d()(),h(9,"div",22)(10,"button",15),A("click",function(){return k(e),_().returnToBarnView()}),g(11,"Back"),d()()(),D(12,"hr")(13,"br"),h(14,"span"),g(15,"Assign Animal"),d(),D(16,"br")(17,"br"),h(18,"app-animal-list",53),A("selectedAnimal",function(r){return k(e),_().assignAnimal(r)}),d()()()}if(2&t){const e=_();p(5),q("Barn ",e.selectedBarnNumber,""),p(13),m("availableAnimals",e.availableAnimals)}}function S7(t,n){if(1&t){const e=ie();h(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",17)(4,"span"),g(5),d(),D(6,"br"),h(7,"span"),g(8,"Locked"),d()(),h(9,"div",22)(10,"button",15),A("click",function(){return k(e),_().returnToBarnView()}),g(11,"Back"),d()()(),D(12,"hr")(13,"br"),h(14,"div",54)(15,"span"),g(16,"Purchase Barn"),d(),D(17,"br")(18,"br"),h(19,"span",55),g(20),d(),D(21,"br"),h(22,"button",56),A("click",function(){return k(e),_().purchaseBarn()}),g(23,"Buy"),d()()()()}if(2&t){const e=_();p(5),q("Barn ",e.selectedBarnNumber,""),p(15),q("",e.barn.purchasePrice," Coins"),p(2),m("disabled",!e.canPurchaseBarn())}}function T7(t,n){if(1&t&&(h(0,"div",58),D(1,"div",59),d()),2&t){const e=_(2);p(1),m("innerHTML",e.totalBarnStatsPopover,kt)}}function R7(t,n){1&t&&x(0,T7,2,1,"div",57),2&t&&m("ngIf",""!==_().totalBarnStatsPopover)}function D7(t,n){if(1&t&&(h(0,"div",58),g(1),d()),2&t){const e=_(2);p(1),q(" ",e.upgradeBarnPopover," ")}}function x7(t,n){1&t&&x(0,D7,2,1,"div",57),2&t&&m("ngIf",""!==_().upgradeBarnPopover)}function k7(t,n){if(1&t&&(h(0,"div",58),g(1),d()),2&t){const e=_(2);p(1),q(" ",e.buildBiggerBarnPopover," ")}}function M7(t,n){1&t&&x(0,k7,2,1,"div",57),2&t&&m("ngIf",""!==_().buildBiggerBarnPopover)}function A7(t,n){1&t&&D(0,"div",61),2&t&&m("innerHTML",_(2).currentTrainingPopover,kt)}function P7(t,n){1&t&&x(0,A7,1,1,"div",60),2&t&&m("ngIf",""!==_().currentTrainingPopover)}function V7(t,n){1&t&&D(0,"div",61),2&t&&m("innerHTML",_(2).currentTrainingPopover,kt)}function I7(t,n){1&t&&x(0,V7,1,1,"div",60),2&t&&m("ngIf",""!==_().currentTrainingPopover)}function O7(t,n){1&t&&(h(0,"div")(1,"span"),g(2,"No Barns Available"),d()())}function E7(t,n){if(1&t){const e=ie();h(0,"div")(1,"div",69)(2,"span")(3,"strong"),g(4),d(),g(5," - "),D(6,"span",59),d(),h(7,"button",70),A("click",function(){const a=k(e).$implicit;return _(3).swapAnimals(a.barnNumber)}),g(8,"Swap"),d()()()}if(2&t){const e=n.$implicit,i=_(3);p(4),rt(i.lookupService.getBarnName(e)),p(2),m("innerHTML",i.animalNameWithClass(e),kt)}}function N7(t,n){if(1&t&&(h(0,"div"),x(1,E7,9,2,"div",68),d()),2&t){const e=_(2);p(1),m("ngForOf",e.otherBarns)}}function B7(t,n){if(1&t){const e=ie();h(0,"div",62)(1,"div",63)(2,"h4",64),g(3,"Swap Animals"),d(),h(4,"button",65),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",66)(7,"span"),g(8,"Swap"),d(),D(9,"br"),h(10,"div",67)(11,"strong"),g(12),d(),g(13," - "),D(14,"span",59),d(),h(15,"span"),g(16,"With"),d(),D(17,"br"),x(18,O7,3,0,"div",16),x(19,N7,2,1,"div",16),d()()}if(2&t){const e=_();p(12),rt(e.lookupService.getBarnName(e.barn)),p(2),m("innerHTML",e.animalNameWithClass(e.barn),kt),p(4),m("ngIf",0===e.otherBarns.length),p(1),m("ngIf",e.otherBarns.length>0)}}const SD=function(t){return{selectedSpecialization:t}};function F7(t,n){if(1&t){const e=ie();h(0,"span",77),A("click",function(){const a=k(e).$implicit;return _(3).filterSpecialization(a)}),g(1),d()}if(2&t){const e=n.$implicit,i=_(3);m("ngClass",yt(2,SD,i.selectedSpecialization===e)),p(1),q(" ",e.trim()," ")}}function L7(t,n){if(1&t&&(h(0,"div",75),x(1,F7,2,4,"span",76),d()),2&t){const e=_(2);p(1),m("ngForOf",e.specializationOptions)}}function U7(t,n){if(1&t&&(h(0,"div"),g(1),D(2,"br")(3,"br"),h(4,"strong"),g(5),d()()),2&t){const e=_(2);p(1),q(" ",e.specializationDescription," "),p(4),q(" ",e.inDepthSpecializationDescription," ")}}function H7(t,n){if(1&t){const e=ie();h(0,"div",62)(1,"form")(2,"div",63)(3,"h4",64),g(4,"Choose Barn Specialization"),d(),h(5,"button",65),A("click",function(){return k(e).$implicit.dismiss()}),g(6,"X"),d()(),h(7,"div",71),x(8,L7,2,1,"div",72),D(9,"hr"),x(10,U7,6,2,"div",16),d(),h(11,"div",73)(12,"button",74),A("click",function(){return k(e),_().selectSpecialization()}),g(13,"Select"),d()()()()}if(2&t){const e=_();p(8),m("ngIf",e.specializationOptions.length>0),p(2),m("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription)}}function G7(t,n){if(1&t){const e=ie();h(0,"span",77),A("click",function(){const a=k(e).$implicit;return _(4).filterSpecialization(a)}),g(1),d()}if(2&t){const e=n.$implicit,i=_(4);m("ngClass",yt(2,SD,i.selectedSpecialization===e)),p(1),q(" ",e.trim()," ")}}function z7(t,n){if(1&t&&(h(0,"div",75),x(1,G7,2,4,"span",76),d()),2&t){const e=_(3);p(1),m("ngForOf",e.specializationOptions)}}function j7(t,n){if(1&t&&(h(0,"div"),g(1),D(2,"br")(3,"br"),h(4,"strong"),g(5),d(),D(6,"br")(7,"br"),d()),2&t){const e=_(3);p(1),q(" ",e.specializationDescription," "),p(4),q(" ",e.inDepthSpecializationDescription," ")}}function $7(t,n){if(1&t){const e=ie();h(0,"div",80)(1,"div",81)(2,"span",82),g(3,"Reset Barn Specialization"),d(),D(4,"br"),h(5,"em"),g(6," Tear down your barn to build up something new. Each barn can be reset as many times as you want, but "),h(7,"strong"),g(8,"it only retains 80% of its current Barn Level after being reset."),d()()(),D(9,"br"),h(10,"div")(11,"div",83),x(12,z7,2,1,"div",72),D(13,"hr"),x(14,j7,8,2,"div",16),d(),h(15,"div",84)(16,"span"),g(17),d(),h(18,"button",74),A("click",function(){return k(e),_(2).resetSpecialization()}),g(19,"Reset Specialization"),d()()()()}if(2&t){const e=_(2);p(12),m("ngIf",e.specializationOptions.length>0),p(2),m("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription),p(3),q("New Barn Level will be ",e.postResetBarnUpgradeLevel,"")}}function q7(t,n){if(1&t){const e=ie();h(0,"div",62)(1,"div",63)(2,"h4",64),g(3,"Barn Upgrade Info"),d(),h(4,"button",65),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",71)(7,"div",78),D(8,"div",59)(9,"br"),g(10),D(11,"br")(12,"hr"),x(13,$7,20,3,"div",79),d()()()}if(2&t){const e=_();p(8),m("innerHTML",e.totalBarnStatsPopover,kt),p(2),q(" ",e.upgradeBarnPopover," "),p(3),m("ngIf",e.barn.barnUpgrades.specializationLevel>0)}}let W7=(()=>{class t{constructor(e,i,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=i,this.modalService=r,this.lookupService=a,this.componentCommunicationService=o,this.specializationService=s,this.tutorialService=l,this.utilityService=c,this.returnToBarnEmitter=new bt,this.isCoachingEmitter=new bt,this.canUpgrade=!1,this.canBuild=!1,this.barnSpecializationsUnlocked=!1,this.coachingUnlocked=!1,this.tutorialActive=!1,this.postResetBarnUpgradeLevel=0,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1}keyEvent(e){var i=this.lookupService.getAvailableBarns().filter(s=>void 0!==s),r=i.findIndex(s=>this.selectedBarnNumber===s.barnNumber);if("ArrowLeft"===e.key)r>-1&&(null!=this.subscription&&this.subscription.unsubscribe(),(a=r-1)<0&&(a=i.length-1),this.componentCommunicationService.setBarnView(Pt.barn,(o=i[a]).barnNumber),this.resetSelectedBarnInfo(o));else if("ArrowRight"===e.key){var a,o;r>-1&&(null!=this.subscription&&this.subscription.unsubscribe(),(a=r+1)===i.length&&(a=0),this.componentCommunicationService.setBarnView(Pt.barn,(o=i[a]).barnNumber),this.resetSelectedBarnInfo(o))}else(e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.returnToBarnView()}ngOnInit(){if(this.handleTutorial(),this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(i=>i.barnNumber===this.selectedBarnNumber);null!=e&&this.resetSelectedBarnInfo(e)}}selectNewTraining(e){var i=this.globalService.globalVar.animals.find(s=>s.associatedBarnNumber===this.selectedBarnNumber);if(null!=i){var r=Object.assign({},e),a="smallBarnTrainingTimeModifier";this.barn.size===Rt.Medium?a="mediumBarnTrainingTimeModifier":this.barn.size===Rt.Large&&(a="largeBarnTrainingTimeModifier");var o=this.globalService.globalVar.modifiers.find(s=>s.text===a);if(null!=o&&(r.trainingTimeRemaining=o.value),null!=i.currentTraining){if(this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching"))return i.queuedTraining=r,void(i.previousTraining=Object.assign({},r));i.currentTraining.timeTrained=0}i.currentTraining=r,i.previousTraining=Object.assign({},r),this.existingTraining=r,!this.globalService.globalVar.tutorials.tutorialCompleted&&2===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.componentCommunicationService.setAnimalView(Pt.animals,this.associatedAnimal)),!this.globalService.globalVar.tutorials.tutorialCompleted&&8===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1)}}GetAvailableTrainingOptions(e){var i=[];if(null==this.globalService.globalVar||null==this.globalService.globalVar.trainingOptions||0===this.globalService.globalVar.trainingOptions.length)return i;i=this.globalService.globalVar.trainingOptions.filter(o=>o.isAvailable&&(o.facilitySize===Rt.Small||o.facilitySize===Rt.Medium&&(this.barn.size===Rt.Medium||this.barn.size===Rt.Large)||o.facilitySize===Rt.Large&&this.barn.size===Rt.Large));var r=[];i.forEach(o=>{var s=o.makeCopy(o),l=this.lookupService.getTrainingTimeReductionFromTrainingFacility(this.barn.barnUpgrades),c=this.lookupService.getResourceByName("Stopwatch");null==c&&(c=0),s.timeToComplete*=1-(.05*c+l+e.miscStats.trainingTimeReduction/100),s.timeToComplete=Math.round(100*(s.timeToComplete+Number.EPSILON))/100,e.raceCourseType===F.Mountain&&(s.trainingType===ze.ShortTrackRunning&&(s.trainingName="Short Track Climbing"),s.trainingType===ze.TrailRunning&&(s.trainingName="Trail Climbing"),s.trainingType===ze.LongTrackRunning&&(s.trainingName="Long Track Climbing")),e.raceCourseType===F.Ocean&&(s.trainingType===ze.ShortTrackRunning&&(s.trainingName="Short Track Swimming"),s.trainingType===ze.TrailRunning&&(s.trainingName="Lane Swimming"),s.trainingType===ze.SmallWagonTow&&(s.trainingName="Small Canoe Tow"),s.trainingType===ze.UphillRun&&(s.trainingName="Upstream Swim"),s.trainingType===ze.LongTrackRunning&&(s.trainingName="Long Track Swimming"),s.trainingType===ze.VehicleTow&&(s.trainingName="Boat Tow"),s.trainingType===ze.GreenwayHike&&(s.trainingName="Canal Adventure"));var u=0;this.barn.barnUpgrades.specialization===$t.TrainingFacility&&this.barn.barnUpgrades.specializationLevel>10&&(u=(this.barn.barnUpgrades.specializationLevel-10)/10),s.affectedStatRatios.topSpeed*=this.barn.barnUpgrades.upgradedStatGain.topSpeed+u,s.affectedStatRatios.acceleration*=this.barn.barnUpgrades.upgradedStatGain.acceleration+u,s.affectedStatRatios.endurance*=this.barn.barnUpgrades.upgradedStatGain.endurance+u,s.affectedStatRatios.power*=this.barn.barnUpgrades.upgradedStatGain.power+u,s.affectedStatRatios.focus*=this.barn.barnUpgrades.upgradedStatGain.focus+u,s.affectedStatRatios.adaptability*=this.barn.barnUpgrades.upgradedStatGain.adaptability+u;var f=1,v=1,b=1,y=1,C=1,T=1;e.talentTree.talentTreeType===vt.sprint&&(T=1+e.talentTree.column1Row1Points/100,v=1+e.talentTree.column2Row1Points/100,y=1+e.talentTree.column3Row1Points/100),e.talentTree.talentTreeType===vt.longDistance&&(C=1+e.talentTree.column1Row1Points/100,f=1+e.talentTree.column2Row1Points/100,b=1+e.talentTree.column3Row1Points/100),s.affectedStatRatios.topSpeed*=f,s.affectedStatRatios.acceleration*=v,s.affectedStatRatios.endurance*=b,s.affectedStatRatios.power*=y,s.affectedStatRatios.focus*=C,s.affectedStatRatios.adaptability*=T,s.affectedStatRatios.topSpeed=Math.round(100*(s.affectedStatRatios.topSpeed+Number.EPSILON))/100,s.affectedStatRatios.acceleration=Math.round(100*(s.affectedStatRatios.acceleration+Number.EPSILON))/100,s.affectedStatRatios.endurance=Math.round(100*(s.affectedStatRatios.endurance+Number.EPSILON))/100,s.affectedStatRatios.power=Math.round(100*(s.affectedStatRatios.power+Number.EPSILON))/100,s.affectedStatRatios.focus=Math.round(100*(s.affectedStatRatios.focus+Number.EPSILON))/100,s.affectedStatRatios.adaptability=Math.round(100*(s.affectedStatRatios.adaptability+Number.EPSILON))/100,r.push(s)}),(this.filterAcceleration||this.filterAdaptability||this.filterEndurance||this.filterFocus||this.filterPower||this.filterSpeed||this.filterSmall||this.filterMedium||this.filterLarge)&&(r=r.filter(o=>(!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterAcceleration&&o.affectedStatRatios.acceleration>0||this.filterAdaptability&&o.affectedStatRatios.adaptability>0||this.filterEndurance&&o.affectedStatRatios.endurance>0||this.filterFocus&&o.affectedStatRatios.focus>0||this.filterPower&&o.affectedStatRatios.power>0||this.filterSpeed&&o.affectedStatRatios.topSpeed>0)&&(!this.filterSmall&&!this.filterMedium&&!this.filterLarge||this.filterSmall&&o.facilitySize===Rt.Small||this.filterMedium&&o.facilitySize===Rt.Medium||this.filterLarge&&o.facilitySize===Rt.Large)));var a=r.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});return null!=a&&this.animalAssigned&&(a.isSelected=!0),r}GetAvailableAnimalOptions(){var e=[];return null==this.globalService.globalVar||null==this.globalService.globalVar.animals||0===this.globalService.globalVar.animals.length||(e=this.globalService.globalVar.animals.filter(i=>i.isAvailable&&(void 0===i.associatedBarnNumber||i.associatedBarnNumber<=0))),e}unassignAnimal(){var e=this.globalService.globalVar.animals.find(i=>i.associatedBarnNumber==this.selectedBarnNumber);null!=e&&(e.associatedBarnNumber=0,e.currentTraining=null),this.existingTraining=null,this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions()}assignAnimal(e){e.associatedBarnNumber=this.selectedBarnNumber,this.animalAssigned=!0,this.availableAnimals=this.GetAvailableAnimalOptions(),this.availableTrainings=this.GetAvailableTrainingOptions(e),this.associatedAnimalName=e.name,this.existingTraining=null;var i=this.lookupService.getAnimalByType(e.type);null!==i&&(i.associatedBarnNumber=this.selectedBarnNumber,this.associatedAnimal=i,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()}),!this.globalService.globalVar.tutorials.tutorialCompleted&&7===this.globalService.globalVar.tutorials.currentTutorialId&&this.associatedAnimal.type===L.Monkey&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.tutorialActive=!0)}returnToBarnView(){this.returnToBarnEmitter.emit(0)}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}toggleFacilityFilter(e){"Small"===e&&(this.filterSmall=!this.filterSmall),"Medium"===e&&(this.filterMedium=!this.filterMedium),"Large"===e&&(this.filterLarge=!this.filterLarge),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1,this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}purchaseBarn(){this.lookupService.getCoins()>=this.barn.purchasePrice&&(this.barn.isLocked=!1,this.lookupService.spendCoins(this.barn.purchasePrice))}canPurchaseBarn(){return this.lookupService.getCoins()>=this.barn.purchasePrice}getSizeValue(){this.sizeValue=this.barn.getSize()}upgradeBarnSize(){if(this.lookupService.getCoins()>=this.barn.facilityUpgradePrice){if(this.lookupService.spendCoins(this.barn.facilityUpgradePrice),this.barn.size===Rt.Small)this.barn.size=Rt.Medium,this.barn.facilityUpgradePrice=4e3,null!=(i=this.globalService.globalVar.shop.find(r=>"Trainings"===r.name))&&i.itemList.filter(r=>r.additionalIdentifier===Rt.Medium.toString()).forEach(r=>{r.isAvailable=!0});else if(this.barn.size===Rt.Medium){var i;this.barn.size=Rt.Large,null!=(i=this.globalService.globalVar.shop.find(a=>"Trainings"===a.name))&&i.itemList.filter(a=>a.additionalIdentifier===Rt.Large.toString()).forEach(a=>{a.isAvailable=!0})}this.getSizeValue(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover()}}upgradeBarn(){var e=this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel);if(this.canUpgradeBarn(e)){if(9===this.barn.barnUpgrades.barnLevel)this.modalService.open(this.specializationModal,{ariaLabelledBy:"modal-basic-title",size:"lg"});else{e.forEach(o=>{this.lookupService.spendResourceByName(o.name,o.amount)}),this.barn.barnUpgrades.barnLevel+=1;var r=.1;if(this.barn.barnUpgrades.barnLevel%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var a=this.barn.barnUpgrades.barnLevel-this.barn.barnUpgrades.specializationLevel;a%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=r:a%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=r:a%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=r:a%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=r:a%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=r:a%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=r)}this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover()}this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}else alert("You don't have the required resources to upgrade your barn.")}canUpgradeBarn(e){var i=!0;return e.forEach(r=>{this.lookupService.getResourceByName(r.name)<r.amount&&(i=!1)}),i}canBuildLargerBarn(){var e=!1;return this.lookupService.getCoins()>=this.barn.facilityUpgradePrice&&(e=!0),e}getTotalBarnStatsPopover(e){var i="Upgrade to gain barn bonuses. ";return this.barn.barnUpgrades.barnLevel>=1&&(i=e?"<em>Click to view full information and to change Barn specialization.</em><br/><br/>":""),i+="Barn Upgrades: <br/>",this.barn.barnUpgrades.specialization===$t.TrainingFacility?i+=this.specializationService.getSpecializationPopoverText($t.TrainingFacility,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===$t.BreedingGrounds?i+=this.specializationService.getSpecializationPopoverText($t.BreedingGrounds,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===$t.Attraction?i+=this.specializationService.getSpecializationPopoverText($t.Attraction,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===$t.ResearchCenter&&(i+=this.specializationService.getSpecializationPopoverText($t.ResearchCenter,this.barn.barnUpgrades.specializationLevel)),this.barn.barnUpgrades.upgradedStatGain.adaptability>1&&(i+="Adaptability Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.adaptability.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.focus>1&&(i+="Focus Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.focus.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.power>1&&(i+="Power Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.power.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.endurance>1&&(i+="Endurance Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.endurance.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.acceleration>1&&(i+="Acceleration Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.acceleration.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.topSpeed>1&&(i+="Speed Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.topSpeed.toFixed(1)+"<br/>"),null!==this.utilityService.getSanitizedHtml(i)&&(i=this.utilityService.getSanitizedHtml(i)),i}getUpgradeBarnPopover(){var e="Cost for next upgrade: \n";return this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(r=>{var a=r.name;"Medals"===a&&1===r.amount&&(a="Medal"),e+=r.amount+" "+a+"\n"}),e}getBuildLargerBarnPopover(){var e="Cost to build larger barn: \n";return e+=this.barn.facilityUpgradePrice+" Coins \n\n",this.barn.size===Rt.Small?e+="You will be able to do Medium trainings and increase idle training time to 8 hours.":this.barn.size===Rt.Medium&&(e+="You will be able to do Large trainings and increase idle training time to 12 hours."),e}filterSpecialization(e){this.selectedSpecialization=e,this.specializationDescription=this.globalService.getSpecializationDescription(e),this.inDepthSpecializationDescription=this.lookupService.getInDepthSpecializationDescription(e)}selectSpecialization(){""!==this.selectedSpecialization&&null!=this.selectedSpecialization?(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(i=>{this.lookupService.spendResourceByName(i.name,i.amount)}),this.barn.barnUpgrades.specialization=this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel+=1,this.barn.barnUpgrades.barnLevel+=1,this.barn.barnUpgrades.specialization===$t.TrainingFacility&&(this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="",this.modalService.dismissAll()):alert("You must select a specialization.")}resetSpecialization(){if(""!==this.selectedSpecialization&&null!=this.selectedSpecialization){this.barn.barnUpgrades.barnLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel),this.barn.barnUpgrades.specialization=this.barn.barnUpgrades.barnLevel<10?$t.None:this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel=0,this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="";var e=.1;this.barn.barnUpgrades.upgradedStatGain=new Ve(1,1,1,1,1,1);for(var i=1;i<=this.barn.barnUpgrades.barnLevel;i++)if(i%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var r=i-this.barn.barnUpgrades.specializationLevel;r%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=e:r%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=e:r%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=e:r%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=e:r%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=e:r%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=e)}this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.modalService.dismissAll()}else alert("You must select a specialization.")}goToAnimal(){this.componentCommunicationService.setAnimalView(Pt.animals,this.associatedAnimal)}handleTutorial(){var e=this.globalService.globalVar.animals.find(i=>i.type===L.Monkey);this.globalService.globalVar.tutorials.tutorialCompleted||1!==this.globalService.globalVar.tutorials.currentTutorialId?!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)?(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0):this.globalService.globalVar.tutorials.tutorialCompleted||(this.tutorialActive=!1):(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}resetSelectedBarnInfo(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.upgradeText="Upgrade",this.barnSpecializationsUnlocked=this.lookupService.isItemUnlocked("barnSpecializations"),this.coachingUnlocked=this.lookupService.isItemUnlocked("coaching"),this.selectedBarnNumber=e.barnNumber,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var i=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedBarnNumber);if(void 0!==i){this.barn=i,this.otherBarns=this.globalService.getBarnListInOrder(),this.otherBarns=this.otherBarns.filter(o=>o.barnNumber!==this.selectedBarnNumber&&!o.isLocked),this.barnName=this.lookupService.getBarnName(i),this.getSizeValue(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize");var r=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.selectedBarnNumber);if(null!=r){if(this.animalAssigned=!0,this.associatedAnimal=r,this.associatedAnimalName=r.name,this.existingTraining=r.currentTraining,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()},this.availableTrainings=this.GetAvailableTrainingOptions(r),this.currentTrainingPopover=this.getCurrentTrainingPopover(r),null!=this.existingTraining){var a=this.availableTrainings.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});null!=a&&(a.isSelected=!0)}}else this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions();this.componentCommunicationService.setBarnView(Pt.barn,this.selectedBarnNumber),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(o=>{if(!this.barn.isLocked){var s=this.globalService.globalVar.animals.find(c=>c.associatedBarnNumber==this.selectedBarnNumber);if(null!=s){if(null==s.currentTraining){if(null!==this.existingTraining){var l=this.availableTrainings.find(c=>{var u;return(null===(u=this.existingTraining)||void 0===u?void 0:u.trainingName)===c.trainingName});null!=l&&(l.isSelected=!1),this.existingTraining=null}return}s.currentTraining!==this.existingTraining&&(this.existingTraining=s.currentTraining),this.trainingProgressBarPercent>=100&&(this.trainingProgressBarPercent=100),this.trainingProgressBarPercent=s.currentTraining.timeTrained/s.currentTraining.timeToComplete*100,this.currentTrainingPopover=this.getCurrentTrainingPopover(s)}}})}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}getCurrentTrainingPopover(e){var i="";null!=e.currentTraining&&(i+=e.currentTraining.trainingName+"\n"+this.lookupService.getStatGainDescription(e.currentTraining.affectedStatRatios,e.currentTraining.statGain)+"\n"),i+=e.name+" Current Stats:\n",i+="Speed: "+Math.round(e.currentStats.topSpeed).toLocaleString()+"\n",i+="Acceleration: "+Math.round(e.currentStats.acceleration).toLocaleString()+"\n",i+="Endurance: "+Math.round(e.currentStats.endurance).toLocaleString()+"\n",i+="Power: "+Math.round(e.currentStats.power).toLocaleString()+"\n",i+="Focus: "+Math.round(e.currentStats.focus).toLocaleString()+"\n",i+="Adaptability: "+Math.round(e.currentStats.adaptability).toLocaleString()+"\n",i+="Diminishing Returns: "+this.globalService.GetAnimalDiminishingReturns(e);var r=this.utilityService.getSanitizedHtml(i);return null!==r&&(i=r),i}animalNameWithClass(e){var i="Empty Barn",r=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber===e.barnNumber);return void 0!==r&&(i=r.name),"Empty Barn"===i?"<span class='keyword'>"+i+"</span>":"<span class='keyword "+this.getCourseTypeClass(r.raceCourseType)+"'>"+i+"</span>"}swapAnimals(e){var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber===e);void 0!==i&&(i.associatedBarnNumber=this.selectedBarnNumber),this.associatedAnimal.associatedBarnNumber=e;var r=this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber);null!=r&&this.resetSelectedBarnInfo(r)}getCourseTypeClass(e){return e===F.Flatland?"flatlandColor":e===F.Mountain?"mountainColor":e===F.Ocean?"waterColor":e===F.Tundra?"tundraColor":e===F.Volcanic?"volcanicColor":""}goToCoaching(){this.isCoachingEmitter.emit(!0)}openSwapModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openBarnUpgradeModal(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!1),this.barn.barnUpgrades.specialization!==$t.None){var i=this.lookupService.convertSpecializationEnumToName(this.barn.barnUpgrades.specialization);this.specializationOptions=this.specializationOptions.filter(r=>r!==i),this.postResetBarnUpgradeLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel)}this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.tutorialSubscription&&this.tutorialSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(An),V(io),V(Ti),V(Pn),V(R0),V(KR),V(Rn))},t.\u0275cmp=Tt({type:t,selectors:[["app-selected-barn"]],viewQuery:function(e,i){if(1&e&&Sr(c7,7),2&e){let r;yi(r=wi())&&(i.specializationModal=r.first)}},hostBindings:function(e,i){1&e&&A("keyup",function(a){return i.keyEvent(a)},!1,Ca)},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{returnToBarnEmitter:"returnToBarnEmitter",isCoachingEmitter:"isCoachingEmitter"},decls:19,vars:3,consts:[["class","selectedBarnModal",4,"ngIf"],["totalBarnStatsContent",""],["upgradeBarnContent",""],["costToBuildContent",""],["noTrainingContent",""],["currentTrainingContent",""],["swapModal",""],["specializationModal",""],["barnUpgradeContent",""],[1,"selectedBarnModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"unassign"],[1,"unassignButtons"],[1,"rightSpaced",3,"click"],[3,"click"],[4,"ngIf"],[1,"info"],["class","keyword buttonAsTextKeepColor clickableText",3,"ngClass","click",4,"ngIf"],["class","clickableText keyword buttonAsTextKeepColor",3,"ngClass","click",4,"ngIf"],[3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"back"],[1,"changeTrainingHeader"],[1,"s4Heading",3,"click"],[1,"trainingDescription"],[1,"filterGridContainer"],[1,"facilitySizeFilter","clickableText","filterMargins"],["id","smallFilter",1,"buttonAsText",3,"click"],["id","mediumFilter",1,"buttonAsText",3,"click"],["id","largeFilter",1,"buttonAsText",3,"click"],[1,"resetFiltersHeader","buttonAsText","clickableText"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],["class","keyword",4,"ngIf"],[3,"availableTrainingOptions","selectedTrainingOption"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[1,"keyword","buttonAsTextKeepColor","clickableText",3,"ngClass","click"],[1,"clickableText","keyword","buttonAsTextKeepColor",3,"ngClass","click"],[1,"mobileVersion"],[1,"sizeButtonSpacing",3,"disabled","click"],[1,"activeTrainingOption"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"],[1,"keyword"],[3,"availableAnimals","selectedAnimal"],[1,"purchaseBarn"],[1,"price","resourceKeyword"],["id","purchaseButton",3,"disabled","click"],["class","popoverClass",4,"ngIf"],[1,"popoverClass"],[3,"innerHTML"],["class","popoverClass",3,"innerHTML",4,"ngIf"],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body","centered"],[1,"barnRow"],[4,"ngFor","ngForOf"],[1,"barnRow","flex"],[1,"rightAligned",3,"click"],[1,"modal-body"],["class","typeContainer",4,"ngIf"],[1,"modal-footer"],["type","button",3,"click"],[1,"typeContainer"],["class","specializationType subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"specializationType","subHeading",3,"ngClass","click"],[1,"upgradeBarnInfo"],["class","resetBarn",4,"ngIf"],[1,"resetBarn"],[1,"resetSpecializationInfo"],[1,"s4Heading"],[1,"resetSpecializationOptions"],[1,"modal-footer","spaceEvenly"]],template:function(e,i){1&e&&(x(0,w7,73,34,"div",0),x(1,C7,19,2,"div",0),x(2,S7,24,3,"div",0),x(3,R7,1,1,"ng-template",null,1,dt),x(5,x7,1,1,"ng-template",null,2,dt),x(7,M7,1,1,"ng-template",null,3,dt),x(9,P7,1,1,"ng-template",null,4,dt),x(11,I7,1,1,"ng-template",null,5,dt),x(13,B7,20,4,"ng-template",null,6,dt),x(15,H7,14,2,"ng-template",null,7,dt),x(17,q7,14,3,"ng-template",null,8,dt)),2&e&&(m("ngIf",i.animalAssigned&&!i.barn.isLocked),p(1),m("ngIf",!i.animalAssigned&&!i.barn.isLocked),p(1),m("ngIf",i.barn.isLocked))},directives:[li,Qr,cn,dd,KU,rp,Cn,pf,rf,Vu],pipes:[Qa],styles:['ngb-modal-backdrop{z-index:1050!important}.selectedBarnModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.rightAligned[_ngcontent-%COMP%]{text-align:right}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.barnRow[_ngcontent-%COMP%]{width:35%;margin:auto;padding:.5rem}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5rem}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"unassign info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.trainingGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"refreshTraining trainingTimer trainingSpacer"}.refreshTraining[_ngcontent-%COMP%]{grid-area:refreshTraining}.trainingTimer[_ngcontent-%COMP%]{grid-area:trainingTimer}.trainingSpacer[_ngcontent-%COMP%]{grid-area:trainingSpacer}.trainingDescription[_ngcontent-%COMP%]{text-align:center}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.facilitySizeFilter[_ngcontent-%COMP%]{grid-area:facilitySizeFilter}.resetFiltersHeader[_ngcontent-%COMP%]{grid-area:resetFiltersHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.changeTrainingHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.specializationType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedSpecialization[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.sizeButtonSpacing[_ngcontent-%COMP%]{width:4rem}.sizeSpacing[_ngcontent-%COMP%]{margin-left:4rem}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.spaceEvenly[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}.resetSpecializationInfo[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:none}@media (max-width: 800px){.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:2fr 1fr 2fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.barnRow[_ngcontent-%COMP%]{width:100%}.desktopVersion[_ngcontent-%COMP%]{display:none}.mobileVersion[_ngcontent-%COMP%]{display:block}.sizeSpacing[_ngcontent-%COMP%]{margin-left:0}}']}),t})();var wc=(()=>{return(t=wc||(wc={}))[t.coaching=0]="coaching",t[t.scrimmage=1]="scrimmage",wc;var t})(),En=(()=>{return(t=En||(En={}))[t.speed=0]="speed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",t[t.special=6]="special",En;var t})();const X7=["coachingCanvas"],Y7=["drawCoaching"];let Q7=(()=>{class t{constructor(e,i,r,a){this.gameLoopService=e,this.globalService=i,this.themeService=r,this.utilityService=a,this.isPointerDown=!1,this.activePoints=[],this.currentEndPoint=0,this.currentX=0,this.currentY=0,this.getNewPath=!1,this.coachingTypeEnum=wc}ngOnInit(){if(this.successfulAttemptStreak=0,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=i){this.associatedAnimal=i;var r="coloredText "+this.associatedAnimal.getCourseTypeClass();this.animalDisplayName="<span class='"+r+"'>"+this.associatedAnimal.name+"</span>"}}this.incrementalCoachingUpdates="You bring "+this.animalDisplayName+" out into an open area for practice.\n"}ngAfterViewInit(){this.setupCanvas(),null!=this.drawCoaching&&(this.canvasOffsetX=this.drawCoaching.nativeElement.offsetLeft,this.canvasOffsetY=this.drawCoaching.nativeElement.offsetTop),this.context=this.coachingCanvas.nativeElement.getContext("2d"),this.context.lineWidth=6,this.currentPathType=this.getRandomPathType(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=6,this.displayTrace(this.context,0)})}setupCanvas(){void 0!==this.coachingCanvas&&(this.coachingCanvas.nativeElement.style.width="100%",this.coachingCanvas.nativeElement.style.height="100%",this.coachingCanvas.nativeElement.width=this.coachingCanvas.nativeElement.offsetWidth,this.coachingCanvas.nativeElement.height=this.coachingCanvas.nativeElement.offsetHeight,this.canvasHeight=this.coachingCanvas.nativeElement.height,this.canvasWidth=this.coachingCanvas.nativeElement.width)}displayTrace(e,i){e.lineCap="round",e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.currentPathType===En.speed&&(this.activePoints=this.drawSpeedTrace(e)),this.currentPathType===En.acceleration&&(this.activePoints=this.drawAccelerationTrace(e)),this.currentPathType===En.endurance&&(this.activePoints=this.drawEnduranceTrace(e)),this.currentPathType===En.power&&(this.activePoints=this.drawPowerTrace(e)),this.currentPathType===En.focus&&(this.activePoints=this.drawFocusTrace(e)),this.currentPathType===En.adaptability&&(this.activePoints=this.drawAdaptabilityTrace(e)),e.strokeStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.globalCompositeOperation="source-atop";for(var r=0;r<this.currentEndPoint;r++)if(r<this.currentEndPoint-1)this.currentPathType===En.power&&0===r?(e.beginPath(),e.ellipse(this.activePoints[0][0],this.activePoints[0][1],this.activePoints[0][2],this.activePoints[0][3],this.activePoints[0][4],this.activePoints[0][5],this.activePoints[0][6],!0),e.stroke()):(e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.activePoints[r+1][0],this.activePoints[r+1][1]),e.stroke());else if(this.currentPathType!==En.power||0!==r&&2!==r)e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.currentX,this.currentY),e.stroke(),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,this.currentY-5,10,10);else{var a=0;2===r&&(a=3),e.fillStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.fillRect(this.activePoints[a][0]-this.activePoints[a][2]-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],this.currentX-(this.activePoints[a][0]-this.activePoints[a][2]),2*this.activePoints[a][3]+2),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],10,2*this.activePoints[a][3])}}pointerMove(e){if(this.isPointerDown&&null!=this.activePoints&&0!==this.activePoints.length){e.preventDefault(),e.stopPropagation();var i=e.clientX-this.canvasOffsetX,r=e.clientY-this.canvasOffsetY,a=.1*this.canvasWidth,o=.1*this.canvasHeight;0===this.currentEndPoint&&(this.currentX=this.activePoints[0][0],this.currentY=this.activePoints[0][1],this.currentPathType===En.power&&(this.currentX=this.activePoints[0][0]-this.activePoints[0][2],this.currentY=this.activePoints[0][1]),this.currentEndPoint=1),this.currentPathType===En.power&&(o=.25*this.canvasHeight);var s=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint-1][0]:this.activePoints[this.currentEndPoint][0],l=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint][0]:this.activePoints[this.currentEndPoint-1][0],c=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint-1][1]:this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint][1]:this.activePoints[this.currentEndPoint-1][1],f=s-a,v=l+a,b=c-o,y=u+o,C=!1,T=!1,M=!1,S=!1;if(this.activePoints[this.currentEndPoint-1][0]>this.activePoints[this.currentEndPoint][0]&&(C=!0),this.activePoints[this.currentEndPoint-1][1]>this.activePoints[this.currentEndPoint][1]&&(T=!0),this.activePoints[this.currentEndPoint-1][0]===this.activePoints[this.currentEndPoint][0]&&(M=!0),this.activePoints[this.currentEndPoint-1][1]===this.activePoints[this.currentEndPoint][1]&&(S=!0),this.currentPathType!==En.power||1!==this.currentEndPoint&&3!==this.currentEndPoint?this.currentPathType===En.power&&2===this.currentEndPoint&&(f=(s=this.activePoints[2][0])-a,v=(l=this.activePoints[1][0])+a,b=(c=this.activePoints[1][1])-o,y=(u=this.activePoints[2][1])+o,C=!0,T=!1,M=!1,S=!1):(1===this.currentEndPoint?(s=this.activePoints[this.currentEndPoint-1][0]-this.activePoints[this.currentEndPoint-1][2],l=this.activePoints[this.currentEndPoint-1][0]+this.activePoints[this.currentEndPoint-1][2],c=this.activePoints[this.currentEndPoint-1][1],u=this.activePoints[this.currentEndPoint-1][1]):(s=this.activePoints[this.currentEndPoint][0]-this.activePoints[this.currentEndPoint][2],l=this.activePoints[this.currentEndPoint][0]+this.activePoints[this.currentEndPoint][2],c=this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint][1]),f=s-a,v=l+a,b=c-o,y=u+o,C=!1,T=!1,M=!1,S=!0),i>=f&&i<=v&&r>=b&&r<=y){if(M||S)(!T&&r>this.currentY||T&&r<this.currentY)&&!S&&(this.currentY=r),(!C&&i>this.currentX||C&&i<this.currentX)&&!M&&(this.currentX=i);else if(!C&&i>this.currentX||C&&i<this.currentX){var w=(i-s)/(l-s);C&&(w=1-w),T&&(w=1-w);var B=(u-c)*w+c;this.currentX=i,this.currentY=B}var j=.005*this.canvasWidth,de=.005*this.canvasHeight;(!C&&this.currentX>=l-j||C&&this.currentX<=s+j)&&(!T&&this.currentY>=u-de||T&&this.currentY<=c+de)&&(this.currentX=C?s:l,this.currentY=T?c:u,this.currentEndPoint+=1,this.currentEndPoint>this.activePoints.length-1&&this.completePath())}}}pointerUp(){this.isPointerDown=!1}pointerDown(){this.isPointerDown=!0}drawSpeedTrace(e){var i=.15*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([i,r]),a.push([this.canvasWidth-i,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-i,this.canvasHeight-r]),a.push([i,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}drawAdaptabilityTrace(e){var i=.15*this.canvasWidth,o=(this.canvasWidth-2*i)/14,s=(this.canvasHeight-.1*this.canvasHeight*2)/7,l=[];l.push([i,this.canvasHeight/2]),l.push([i+o,this.canvasHeight/2-s]),l.push([i+2*o,this.canvasHeight/2+s]),l.push([i+3*o,this.canvasHeight/2-2*s]),l.push([i+4*o,this.canvasHeight/2+2*s]),l.push([i+5*o,this.canvasHeight/2-3*s]),l.push([i+6*o,this.canvasHeight/2+3*s]),l.push([i+7*o,this.canvasHeight/2-4*s]),l.push([i+8*o,this.canvasHeight/2+3*s]),l.push([i+9*o,this.canvasHeight/2-3*s]),l.push([i+10*o,this.canvasHeight/2+2*s]),l.push([i+11*o,this.canvasHeight/2-2*s]),l.push([i+12*o,this.canvasHeight/2+s]),l.push([i+13*o,this.canvasHeight/2-s]),l.push([i+14*o,this.canvasHeight/2]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawPowerTrace(e){var i=.15*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([this.canvasWidth/2,this.canvasHeight/4,this.canvasWidth/2-i,this.canvasHeight/4-r,0,0,Math.PI]),a.push([this.canvasWidth/2+(this.canvasWidth/2-i),this.canvasHeight/4]),a.push([this.canvasWidth/2-(this.canvasWidth/2-i),3*this.canvasHeight/4]),a.push([this.canvasWidth/2,3*this.canvasHeight/4,this.canvasWidth/2-i,this.canvasHeight/4-r,0,0,Math.PI]),e.beginPath(),e.ellipse(a[0][0],a[0][1],a[0][2],a[0][3],a[0][4],a[0][5],a[0][6],!0),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.ellipse(a[3][0],a[3][1],a[3][2],a[3][3],a[3][4],a[3][5],a[3][6],!1),e.stroke(),a}drawEnduranceTrace(e){var i=.15*this.canvasWidth,r=.1*this.canvasHeight,s=[];s.push([i,r]),s.push([this.canvasWidth-i,r]),s.push([this.canvasWidth-i,this.canvasHeight-r]),s.push([i,this.canvasHeight-r]),s.push([i,this.canvasHeight/2]),s.push([this.canvasWidth/2,this.canvasHeight/2]);for(var l=1;l<s.length;l++)e.beginPath(),e.moveTo(s[l-1][0],s[l-1][1]),e.lineTo(s[l][0],s[l][1]),e.stroke();return s}drawFocusTrace(e){var i=.15*this.canvasWidth,r=.1*this.canvasHeight,a=[];a.push([this.canvasWidth/3,r]),a.push([this.canvasWidth/3,this.canvasHeight/6]),a.push([i,this.canvasHeight/6]),a.push([this.canvasWidth/2,this.canvasHeight-r]),a.push([this.canvasWidth-i,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,r]);for(var o=1;o<a.length;o++)e.beginPath(),e.moveTo(a[o-1][0],a[o-1][1]),e.lineTo(a[o][0],a[o][1]),e.stroke();return a}drawAccelerationTrace(e){var i=.15*this.canvasWidth,r=.1*this.canvasHeight,o=this.canvasWidth-2*i,s=this.canvasHeight-2*r,l=[];l.push([i,r]),l.push([o/5+i,r]),l.push([o/5+i,2*s/5+r]),l.push([2*o/5+i,2*s/5+r]),l.push([2*o/5+i,4*s/5+r]),l.push([3*o/5+i,4*s/5+r]),l.push([3*o/5+i,2*s/5+r]),l.push([4*o/5+i,2*s/5+r]),l.push([4*o/5+i,r]),l.push([5*o/5+i,r]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}getAnimalDistanceColor(e){var i="";return e===F.Flatland&&(i="#7d3f00"),e===F.Mountain&&(i="#1b630d"),e===F.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===F.Tundra&&(i="#28809c"),e===F.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e){var i="";return e===F.Flatland&&("night"===this.themeService.getActiveThemeName()?i="#E18B07":(this.themeService.getActiveThemeName(),i="#c66900")),e===F.Mountain&&("night"===this.themeService.getActiveThemeName()?i="#30b001":(this.themeService.getActiveThemeName(),i="#279113")),e===F.Ocean&&("night"===this.themeService.getActiveThemeName()?i="#9289CF":(this.themeService.getActiveThemeName(),i="#0000FF")),e===F.Tundra&&("night"===this.themeService.getActiveThemeName()?i="#019DDE":(this.themeService.getActiveThemeName(),i="#1CA1C9")),e===F.Volcanic&&("night"===this.themeService.getActiveThemeName()?i="#E56C6E":(this.themeService.getActiveThemeName(),i="#D92525")),i}getRandomPathType(e){var i=Object.keys(En),r=[];i.forEach((o,s)=>{!isNaN(Number(o))&&6!==Number(o)&&r.push(Number(o))});var a=this.utilityService.getRandomInteger(0,r.length-1);return r[a]}completePath(){this.getNewPath=!0,this.currentEndPoint=0,this.activePoints=[],this.currentX=0,this.currentY=0,this.isPointerDown=!1,this.successfulAttemptStreak+=1,this.getReward(this.currentPathType),this.associatedAnimal.trackedAnimalStats.successfulCoachingAttempts+=1,this.currentPathType=this.getRandomPathType(this.currentPathType)}getReward(e){var i=1,r=this.globalService.globalVar.resources.find(f=>"Whistle"===f.name);if(null!=r&&r.amount>0){var a=this.globalService.globalVar.modifiers.find(f=>"whistleModifier"===f.text);null!=a&&(i=a.value)}var o=this.globalService.globalVar.resources.find(f=>"Golden Whistle"===f.name);if(null!=o&&o.amount>0){var s=this.globalService.globalVar.modifiers.find(f=>"goldenWhistleModifier"===f.text);null!=s&&(i=s.value)}var l=1;if(this.globalService.globalVar.resources.find(f=>"Research Center Improvements"===f.name)){var c=this.globalService.globalVar.modifiers.find(f=>"researchCenterRewardBonusAmountModifier"===f.text);if(null!=c){var u=this.globalService.globalVar.barns.find(f=>f.barnNumber===this.selectedBarnNumber);void 0!==u&&u.barnUpgrades.specialization===$t.ResearchCenter&&(l=1+c.value*u.barnUpgrades.specializationLevel)}}i*=l,e===En.speed&&(this.associatedAnimal.currentStats.topSpeed+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" speed. ("+this.associatedAnimal.currentStats.topSpeed.toFixed(2)+")\n"),e===En.acceleration&&(this.associatedAnimal.currentStats.acceleration+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" acceleration. ("+this.associatedAnimal.currentStats.acceleration.toFixed(2)+")\n"),e===En.endurance&&(this.associatedAnimal.currentStats.endurance+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" endurance. ("+this.associatedAnimal.currentStats.endurance.toFixed(2)+")\n"),e===En.power&&(this.associatedAnimal.currentStats.power+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" power. ("+this.associatedAnimal.currentStats.power.toFixed(2)+")\n"),e===En.focus&&(this.associatedAnimal.currentStats.focus+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" focus. ("+this.associatedAnimal.currentStats.focus.toFixed(2)+")\n"),e===En.adaptability&&(this.associatedAnimal.currentStats.adaptability+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" adaptability. ("+this.associatedAnimal.currentStats.adaptability.toFixed(2)+")\n"),this.successfulAttemptStreak%5==0&&(this.globalService.increaseAbilityXp(this.associatedAnimal,i),this.incrementalCoachingUpdates+=this.animalDisplayName+" also gains "+i+" XP towards their ability "+this.associatedAnimal.ability.name+"!\n"),this.globalService.calculateAnimalRacingStats(this.associatedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(An),V(It),V(Xs),V(Rn))},t.\u0275cmp=Tt({type:t,selectors:[["app-run-coaching"]],viewQuery:function(e,i){if(1&e&&(Sr(X7,5,Mi),Sr(Y7,5,Mi)),2&e){let r;yi(r=wi())&&(i.coachingCanvas=r.first),yi(r=wi())&&(i.drawCoaching=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},decls:15,vars:2,consts:[["id","coachingInfo"],[1,"infoGridContainer"],[1,"info"],[1,"description"],[1,"drawingDiv"],[1,"updates"],["id","drawCoaching",1,"drawCoaching"],["drawCoaching",""],[1,"drawCoachingDiv"],["id","coachingCanvas",1,"coachingCanvas",3,"pointermove","pointerdown","pointerup"],["coachingCanvas",""],[1,"coachingUpdates",3,"scrollTop","innerHTML"],["scrollMe",""]],template:function(e,i){if(1&e&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"em",3),g(4," Show your animals the way by tracing each path. Successfully making it through will reward your partner with a stat point. "),d()()()(),D(5,"br"),h(6,"div",4)(7,"div",5)(8,"div",6,7)(10,"div",8)(11,"canvas",9,10),A("pointermove",function(a){return i.pointerMove(a)})("pointerdown",function(){return i.pointerDown()})("pointerup",function(){return i.pointerUp()}),d()()(),D(13,"div",11,12),d()()),2&e){const r=ot(14);p(13),m("scrollTop",r.scrollHeight)("innerHTML",i.incrementalCoachingUpdates.trim(),kt)}},styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:76.5%}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawCoaching" "coachingUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.coachingUpdates[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:inline-block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();var Oa=(()=>{return(t=Oa||(Oa={}))[t.lostFocus=0]="lostFocus",t[t.lowDrive=1]="lowDrive",t[t.outOfControl=2]="outOfControl",Oa;var t})();const K7=["coachingCanvas"],Z7=["drawCoaching"],J7=["scrimmageContent"];function eH(t,n){1&t&&D(0,"div",22)}function tH(t,n){if(1&t&&D(0,"ngb-progressbar",23),2&t){const e=_();m("value",e.currentButtonCooldown/e.buttonCooldown*100)}}function iH(t,n){if(1&t){const e=ie();h(0,"div",24)(1,"div",25)(2,"h4",26),g(3,"Scrimmage Info"),d(),h(4,"button",27),A("click",function(){return k(e),_().closeModals()}),g(5,"X"),d()(),h(6,"div",28),g(7," During a scrimmage, your racer will race against the clock to complete paths in a certain amount of time. The faster they go, the better the rewards. At the end of each scrimmage run, your racer will be rewarded with "),h(8,"strong"),g(9,"permanent stat boosts that increase the base value of a stat after Breeding"),d(),g(10,". Complete scrimmages so that your animal can get back in the race faster after Breeding! "),D(11,"br")(12,"br"),g(13," As your racer runs, they will need the extra motivation only a coach can provide to succeed. Select the right option under the race drawing to help your animal stay on track. "),h(14,"strong"),g(15,"Choosing the right option fast enough may trigger your animal to Burst."),d(),D(16,"br")(17,"br"),h(18,"strong"),g(19),d(),g(20,", your stat boost will be increased significantly and you will increase your Chain Modifier by an amount proportional to how fast you completed the scrimmage. Your Chain Modifier is a multiplier for each subsequent stat gain during this set of scrimmages. Increasing your Chain Modifier quickly is key to getting big stat boosts! "),D(21,"br")(22,"br"),g(23),d(),h(24,"div",29)(25,"span")(26,"button",30),A("click",function(){return k(e),_().closeModals()}),g(27,"Continue"),d()()()()}if(2&t){const e=_();p(19),q("If you complete your scrimmage in ",e.timeToBeat," seconds or less"),p(4),q(" Each animal can only scrimmage a certain amount at a time. By default, you have 15 energy. After completing Circuit Rank A, you gain 15 more for a total of 30. After starting a round of scrimmage races, a ",e.energyResetMinutes," minute timer starts. Until that timer ends, a new round of scrimmages cannot be started for that animal. ")}}const nH=function(t,n,e){return{emphasizeWhistleText:t,emphasizeFoodText:n,emphasizeEncouragementText:e}},rH=function(t){return{emphasizeFood:t}},aH=function(t){return{emphasizeEncouragement:t}},oH=function(t){return{emphasizeWhistle:t}};let sH=(()=>{class t{constructor(e,i,r,a,o,s){this.gameLoopService=e,this.globalService=i,this.themeService=r,this.utilityService=a,this.lookupService=o,this.modalService=s,this.xRaceModeModifier=10,this.timeToBeat=4,this.frameModifier=60,this.buttonCooldown=.95,this.currentButtonCooldown=0,this.chainModifier=1,this.currentStatus="",this.energyResetMinutes=15,this.pauseRace=!1,this.emphasizeWhistle=!1,this.emphasizeFood=!1,this.emphasizeEncouragement=!1,this.reachedExhaustion=!1,this.triggerBurstTimer=!1,this.burstTimer=0,this.burstThreshold=.42}keyEvent(e){("F"===e.key||"f"===e.key)&&this.showFood(),("E"===e.key||"e"===e.key)&&this.shoutEncouragement(),("W"===e.key||"w"===e.key)&&this.blowWhistle()}ngOnInit(){if(this.globalService.globalVar.tutorials.showScrimmageTutorial&&(this.pauseRace=!0,this.openScrimmageInfoModal(),this.globalService.globalVar.tutorials.showScrimmageTutorial=!1),this.timeToBeat=4,this.timeToFinishScrimmage=0,this.currentDistance=0,this.checkedForEvent=!1,this.correctOptionSelected=!1,this.currentStatus="OK",this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=i){this.associatedAnimal=i,this.maxEnergy=15,this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>26&&(this.maxEnergy=30),this.remainingEnergy=this.maxEnergy-1,this.associatedAnimal.scrimmageEnergyTimer=60*this.energyResetMinutes;var r="coloredText "+this.associatedAnimal.getCourseTypeClass();this.animalDisplayName="<span class='"+r+"'>"+this.associatedAnimal.name+"</span>"}}this.incrementalCoachingUpdates="You bring "+this.animalDisplayName+" out for some scrimmage races.\n"}ngAfterViewInit(){this.setupCanvas(),null!=this.drawCoaching&&(this.canvasOffsetX=this.drawCoaching.nativeElement.offsetLeft,this.canvasOffsetY=this.drawCoaching.nativeElement.offsetTop),this.context=this.coachingCanvas.nativeElement.getContext("2d"),this.context.lineWidth=6,this.setDefaultMaxSpeedAndVelocity(),this.event=this.getRandomScrimmageType(),this.event===Oa.lowDrive&&(this.checkedForEvent=!0,this.maxSpeed/=3,this.velocity/=3,this.incrementalCoachingUpdates=this.animalDisplayName+" is off to a slow start, not caring about how well they do.\n",this.currentStatus="Low Drive",this.emphasizeFood=!0,this.triggerBurstTimer=!0),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{!this.pauseRace&&!this.reachedExhaustion&&(this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=6,this.displayScrimmage(this.context,i))})}setupCanvas(){void 0!==this.coachingCanvas&&(this.coachingCanvas.nativeElement.style.width="100%",this.coachingCanvas.nativeElement.style.height="100%",this.coachingCanvas.nativeElement.width=this.coachingCanvas.nativeElement.offsetWidth,this.coachingCanvas.nativeElement.height=this.coachingCanvas.nativeElement.offsetHeight,this.canvasHeight=this.coachingCanvas.nativeElement.height,this.canvasWidth=this.coachingCanvas.nativeElement.width)}displayScrimmage(e,i){e.lineCap="round",e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.timeToFinishScrimmage+=i,this.currentButtonCooldown-=i,this.currentButtonCooldown<=0&&(this.currentButtonCooldown=0),this.triggerBurstTimer&&(this.burstTimer+=i),this.currentDistance+=this.velocity,this.currentDistance>=this.canvasWidth/2&&this.event===Oa.lostFocus&&!this.checkedForEvent&&(this.checkedForEvent=!0,this.velocity=.35*this.velocity,this.incrementalCoachingUpdates+=this.animalDisplayName+" loses focus!\n",this.currentStatus="Lost Focus",this.emphasizeWhistle=!0,this.triggerBurstTimer=!0),this.currentDistance>=this.canvasWidth/4&&this.event===Oa.outOfControl&&!this.checkedForEvent&&(this.checkedForEvent=!0,this.incrementalCoachingUpdates+=this.animalDisplayName+" looks like they are losing control and may stumble!\n",this.currentStatus="Stumbling",this.emphasizeEncouragement=!0,this.triggerBurstTimer=!0),this.currentDistance>=3*this.canvasWidth/4&&this.event===Oa.outOfControl&&this.checkedForEvent&&!this.correctOptionSelected&&"Stumbled"!==this.currentStatus&&(this.velocity/=5,this.incrementalCoachingUpdates+=this.animalDisplayName+" stumbled!\n",this.currentStatus="Stumbled",this.emphasizeEncouragement=!1),this.currentDistance>=this.canvasWidth&&this.scrimmageComplete(),this.drawPath(),this.drawRacer(),this.associatedAnimal.raceCourseType===F.Tundra&&this.drawIcyBackground()}blowWhistle(){this.currentButtonCooldown>0||(this.currentButtonCooldown=this.buttonCooldown,this.event===Oa.lostFocus&&this.checkedForEvent&&(this.setDefaultMaxSpeedAndVelocity(),this.correctOptionSelected=!0,this.incrementalCoachingUpdates+="You blow your whistle, jolting "+this.animalDisplayName+" back to focus.\n",this.currentStatus="OK",this.emphasizeWhistle=!1,console.log(this.burstTimer+" vs "+this.burstThreshold),this.burstTimer<=this.burstThreshold&&(this.incrementalCoachingUpdates+=this.animalDisplayName+" BURSTS!\n",this.velocity*=1.25,this.currentStatus="BURST!")))}showFood(){this.currentButtonCooldown>0||(this.currentButtonCooldown=this.buttonCooldown,this.event===Oa.lowDrive&&this.checkedForEvent&&(this.setDefaultMaxSpeedAndVelocity(),this.correctOptionSelected=!0,this.incrementalCoachingUpdates+="You hold a treat at the end of the finish line, giving "+this.animalDisplayName+" the inspiration to continue.\n",this.currentStatus="OK",this.emphasizeFood=!1,console.log(this.burstTimer+" vs "+this.burstThreshold),this.burstTimer<=this.burstThreshold&&(this.incrementalCoachingUpdates+=this.animalDisplayName+" BURSTS!\n",this.velocity*=1.25,this.currentStatus="BURST!")))}shoutEncouragement(){this.currentButtonCooldown>0||(this.currentButtonCooldown=this.buttonCooldown,this.event===Oa.outOfControl&&this.checkedForEvent&&"Stumbled"!==this.currentStatus&&(this.setDefaultMaxSpeedAndVelocity(),this.correctOptionSelected=!0,this.incrementalCoachingUpdates+="You shout encouragement at "+this.animalDisplayName+" and they regain their composure.\n",this.currentStatus="OK",this.emphasizeEncouragement=!1,console.log(this.burstTimer+" vs "+this.burstThreshold),this.burstTimer<=this.burstThreshold&&(this.incrementalCoachingUpdates+=this.animalDisplayName+" BURSTS!\n",this.velocity*=1.25,this.currentStatus="BURST!")))}drawRacer(){this.context.fillStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),this.context.globalCompositeOperation="source-atop",this.context.fillRect(0,0,this.currentDistance-5,this.canvasHeight);var e=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType);"BURST!"===this.currentStatus?e=this.utilityService.shadeColor(e,90):("Lost Focus"===this.currentStatus||"Stumbling"===this.currentStatus||"Low Drive"===this.currentStatus)&&(e=this.utilityService.shadeColor(e,-90)),this.context.fillStyle=e,this.context.fillRect(this.currentDistance-5,0,5,this.canvasHeight)}getAnimalDistanceColor(e){var i="";return e===F.Flatland&&(i="#7d3f00"),e===F.Mountain&&(i="#1b630d"),e===F.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===F.Tundra&&(i="#28809c"),e===F.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e){var i="";return e===F.Flatland&&("night"===this.themeService.getActiveThemeName()?i="#E18B07":(this.themeService.getActiveThemeName(),i="#c66900")),e===F.Mountain&&("night"===this.themeService.getActiveThemeName()?i="#30b001":(this.themeService.getActiveThemeName(),i="#279113")),e===F.Ocean&&("night"===this.themeService.getActiveThemeName()?i="#9289CF":(this.themeService.getActiveThemeName(),i="#0000FF")),e===F.Tundra&&("night"===this.themeService.getActiveThemeName()?i="#019DDE":(this.themeService.getActiveThemeName(),i="#1CA1C9")),e===F.Volcanic&&("night"===this.themeService.getActiveThemeName()?i="#E56C6E":(this.themeService.getActiveThemeName(),i="#D92525")),i}scrimmageComplete(){var e=this.getRandomStatType(),i=(8-this.timeToFinishScrimmage)/100;i<.01&&(i=.01),i*=this.chainModifier,this.timeToFinishScrimmage<=this.timeToBeat&&(i*=4,this.chainModifier+=(this.timeToBeat-this.timeToFinishScrimmage)/5,this.chainModifier=Math.round(1e4*(this.chainModifier+Number.EPSILON))/1e4);var r=1;if(this.globalService.globalVar.resources.find(s=>"Research Center Improvements"===s.name)){var a=this.globalService.globalVar.modifiers.find(s=>"researchCenterRewardBonusAmountModifier"===s.text);if(null!=a){var o=this.globalService.globalVar.barns.find(s=>s.barnNumber===this.selectedBarnNumber);void 0!==o&&o.barnUpgrades.specialization===$t.ResearchCenter&&(r=1+a.value*o.barnUpgrades.specializationLevel)}}if(i*=r,e===ye.topSpeed&&(this.associatedAnimal.increasedDefaultStats.topSpeed+=i),e===ye.acceleration&&(this.associatedAnimal.increasedDefaultStats.acceleration+=i),e===ye.endurance&&(this.associatedAnimal.increasedDefaultStats.endurance+=i),e===ye.power&&(this.associatedAnimal.increasedDefaultStats.power+=i),e===ye.focus&&(this.associatedAnimal.increasedDefaultStats.focus+=i),e===ye.adaptability&&(this.associatedAnimal.increasedDefaultStats.adaptability+=i),this.incrementalCoachingUpdates+="Finished the scrimmage in "+this.timeToFinishScrimmage.toFixed(2)+" seconds and raised the default value of its base "+this.lookupService.getStatNameFromEnum(e)+" by "+i.toFixed(3)+".\n",this.currentDistance=0,this.timeToFinishScrimmage=0,this.remainingEnergy<=0)return this.remainingEnergy=0,this.currentButtonCooldown=0,this.currentStatus="Tired",this.reachedExhaustion=!0,void(this.incrementalCoachingUpdates+=this.animalDisplayName+" needs to stop and take a breather before they can continue. Revisit this page to continue another time. Final chain modifier: <b>"+this.chainModifier+"</b>\n");this.event=this.getRandomScrimmageType(),this.maxSpeed=this.canvasWidth/(this.timeToBeat*this.frameModifier),this.velocity=this.maxSpeed,this.checkedForEvent=!1,this.correctOptionSelected=!1,this.currentStatus="OK",this.emphasizeWhistle=!1,this.emphasizeFood=!1,this.emphasizeEncouragement=!1,this.triggerBurstTimer=!1,this.burstTimer=0,this.remainingEnergy-=1,this.event===Oa.lowDrive&&(this.checkedForEvent=!0,this.maxSpeed/=3,this.velocity/=3,this.incrementalCoachingUpdates+=this.animalDisplayName+" is off to a slow start, not really caring how well they do.\n",this.currentStatus="Low Drive",this.emphasizeFood=!0,this.triggerBurstTimer=!0)}drawPath(){this.context.globalCompositeOperation="source-over",this.associatedAnimal.raceCourseType===F.Flatland&&this.drawFlatlandScrimmage(),this.associatedAnimal.raceCourseType===F.Mountain&&this.drawMountainScrimmage(),this.associatedAnimal.raceCourseType===F.Ocean&&this.drawOceanScrimmage(),this.associatedAnimal.raceCourseType===F.Tundra&&this.drawTundraScrimmage(),this.associatedAnimal.raceCourseType===F.Volcanic&&this.drawVolcanicScrimmage()}drawFlatlandScrimmage(){var e=.05*this.canvasWidth*this.xRaceModeModifier;null==this.xDistanceOffset&&(this.xDistanceOffset=0),null==this.yDistanceOffset&&(this.yDistanceOffset=0),this.context.beginPath(),this.context.moveTo(this.xDistanceOffset,this.canvasHeight/2),this.context.lineTo(e-this.xDistanceOffset,this.canvasHeight/2),this.context.stroke();var i=e-this.xDistanceOffset,r=this.canvasHeight/2,a=.04*e,o=.23*e,s=1.2173*o,l=.04*e,c=s,u=l+o,f=s,v=u+o,b=s,y=v,T=v,M=s,S=T+o,w=s,B=S+o,j=s,de=B;this.context.beginPath(),this.context.moveTo(i,r),this.context.lineTo(i+a,r),this.context.stroke(),this.context.beginPath(),this.context.moveTo(i+a,r),this.context.bezierCurveTo(i+a,r,i+l,r+c,i+u,r+f),this.context.bezierCurveTo(i+u,r+f,i+v,r+b,i+y,r),this.context.stroke(),this.context.beginPath(),this.context.moveTo(i+y,r),this.context.bezierCurveTo(i+y,r,i+T,r-M,i+S,r-w),this.context.bezierCurveTo(i+S,r-w,i+B,r-j,i+B,r),this.context.stroke(),this.context.beginPath(),this.context.moveTo(i+B,r),this.context.lineTo(i+de+a,r),this.context.stroke()}drawMountainScrimmage(){this.context.beginPath(),this.context.moveTo(0,4*this.canvasHeight/5),this.context.lineTo(this.canvasWidth/2,this.canvasHeight/5),this.context.stroke(),this.context.beginPath(),this.context.moveTo(this.canvasWidth/2,this.canvasHeight/5),this.context.lineTo(this.canvasWidth,4*this.canvasHeight/5),this.context.stroke()}drawOceanScrimmage(){var e=.05*this.canvasWidth*this.xRaceModeModifier;null==this.xDistanceOffset&&(this.xDistanceOffset=0),null==this.yDistanceOffset&&(this.yDistanceOffset=0);var b=this.canvasHeight/2,i=e/3,r=e/6,a=!1,o=(v=this.xDistanceOffset)+i,s=a?b+r:b-r,l=v+2*i,c=a?b+r:b-r,u=v+3*i,f=b;this.context.beginPath(),this.context.moveTo(v,b),this.context.bezierCurveTo(o,s,l,c,u,f),this.context.stroke();var v,y=e/3,C=e/3;a=!0;var T=(v=e)+y/3,M=b=this.canvasHeight/2,S=v+y/3,w=b-C,B=v+y,j=b-.6*C;this.context.beginPath(),this.context.moveTo(v,b),this.context.bezierCurveTo(T,M,S,w,B,j),this.context.stroke();var de=B-y/3,ne=j-C/10,ue=B-y/3,se=j+.6*C,Ce=B,Se=b;this.context.beginPath(),this.context.moveTo(B,j),this.context.bezierCurveTo(de,ne,ue,se,Ce,Se),this.context.stroke();var ve=Ce+y/3,Oe=Se,Ke=Ce+y/3,Ht=Se-C,qe=Ce+y,ft=Se-.6*C;this.context.beginPath(),this.context.moveTo(Ce,Se),this.context.bezierCurveTo(ve,Oe,Ke,Ht,qe,ft),this.context.stroke();var xt=qe-y/3,Dt=ft-C/10,ee=qe-y/3,R=ft+.6*C,pt=qe,_t=b;this.context.beginPath(),this.context.moveTo(qe,ft),this.context.bezierCurveTo(xt,Dt,ee,R,pt,_t),this.context.stroke();var Ot=pt+y/3,Kt=_t,ct=pt+y/3,ii=_t-C,Ue=pt+y,Ri=_t-.6*C;this.context.beginPath(),this.context.moveTo(pt,_t),this.context.bezierCurveTo(Ot,Kt,ct,ii,Ue,Ri),this.context.stroke();var tn=Ue-y/3,Ei=Ri-C/10,Ai=Ue-y/3,hi=Ri+.6*C,Pi=Ue,vi=b;this.context.beginPath(),this.context.moveTo(Ue,Ri),this.context.bezierCurveTo(tn,Ei,Ai,hi,Pi,vi),this.context.stroke()}drawTundraScrimmage(){var e=.05*this.canvasWidth*this.xRaceModeModifier;this.context.beginPath(),this.context.moveTo(0,this.canvasHeight/2),this.context.lineTo(2*e,this.canvasHeight/2),this.context.stroke()}drawIcyBackground(){var e=.05*this.canvasWidth*this.xRaceModeModifier,i=e/4,r=this.context.globalCompositeOperation;this.context.globalCompositeOperation="destination-over",this.context.fillStyle="gray",this.context.beginPath(),this.context.moveTo(0,this.canvasHeight/2),this.context.lineTo(0,this.canvasHeight/2+i),this.context.lineTo(e,this.canvasHeight/2+i),this.context.lineTo(e,this.canvasHeight/2-i),this.context.lineTo(0,this.canvasHeight/2-i),this.context.fill(),i=e/6,this.context.beginPath(),this.context.moveTo(e,this.canvasHeight/2),this.context.lineTo(e,this.canvasHeight/2+i),this.context.lineTo(2*e,this.canvasHeight/2+i),this.context.lineTo(2*e,this.canvasHeight/2-i),this.context.lineTo(e,this.canvasHeight/2-i),this.context.fill(),this.context.globalCompositeOperation=r}drawVolcanicScrimmage(){var e=.05*this.canvasWidth*this.xRaceModeModifier,r=.05*e,l=e,c=this.canvasHeight/2,u=this.canvasHeight/3,f=e-r,v=Math.PI/2;this.context.beginPath(),this.context.moveTo(0,this.canvasHeight/2),this.context.lineTo(r,this.canvasHeight/2),this.context.stroke(),this.context.beginPath(),this.context.moveTo(this.canvasWidth-r,this.canvasHeight/2),this.context.lineTo(this.canvasWidth,this.canvasHeight/2),this.context.stroke(),this.context.beginPath(),this.context.ellipse(l,c,u,f,v,Math.PI/180*90,Math.PI/180*270,!0),this.context.stroke()}getRandomScrimmageType(){var e=Object.keys(Oa),i=[];e.forEach((a,o)=>{!isNaN(Number(a))&&6!==Number(a)&&i.push(Number(a))});var r=this.utilityService.getRandomInteger(0,i.length-1);return i[r]}setDefaultMaxSpeedAndVelocity(){this.maxSpeed=this.canvasWidth/((this.timeToBeat-1.75)*this.frameModifier),this.velocity=this.maxSpeed}pauseRaceAnimation(){this.pauseRace=!this.pauseRace}getRandomStatType(){var e=Object.keys(ye),i=[];e.forEach((a,o)=>{!isNaN(Number(a))&&6!==Number(a)&&i.push(Number(a))});var r=this.utilityService.getRandomInteger(0,i.length-1);return i[r]}openScrimmageInfoModal(){this.modalService.open(this.scrimmageContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(e=>{this.closeModals()},e=>{this.closeModals()})}closeModals(){this.pauseRace=!1,this.modalService.dismissAll()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(An),V(It),V(Xs),V(Rn),V(Ti),V(io))},t.\u0275cmp=Tt({type:t,selectors:[["app-scrimmage"]],viewQuery:function(e,i){if(1&e&&(Sr(K7,5,Mi),Sr(Z7,5,Mi),Sr(J7,7)),2&e){let r;yi(r=wi())&&(i.coachingCanvas=r.first),yi(r=wi())&&(i.drawCoaching=r.first),yi(r=wi())&&(i.scrimmageContent=r.first)}},hostBindings:function(e,i){1&e&&A("keyup",function(a){return i.keyEvent(a)},!1,Ca)},inputs:{selectedBarnNumber:"selectedBarnNumber"},decls:51,vars:28,consts:[["id","coachingInfo"],[1,"info"],[1,"description"],[1,"drawingDiv"],[1,"updates"],["id","drawCoaching",1,"drawCoaching"],["drawCoaching",""],[1,"drawCoachingDiv"],[1,"scrimmageHeaderInfo"],[3,"click"],["id","coachingCanvas",1,"coachingCanvas"],["coachingCanvas",""],[1,"buttonSpread"],[1,"keyword",3,"innerHTML"],[1,"keyword",3,"ngClass","innerHTML"],[3,"disabled","ngClass","click"],[1,"underline"],["class","progressBarHeight",4,"ngIf"],["height",".5rem",3,"value",4,"ngIf"],[1,"coachingUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],["scrimmageContent",""],[1,"progressBarHeight"],["height",".5rem",3,"value"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"]],template:function(e,i){if(1&e&&(h(0,"div",0)(1,"div")(2,"div",1)(3,"em",2),g(4," Help your partner race as fast as possible. Successfully making it through will reward your partner with a permanent boost to their default base stat value after Breeding. "),d()()()(),D(5,"br"),h(6,"div",3)(7,"div",4)(8,"div",5,6)(10,"div",7)(11,"div",8)(12,"div")(13,"span"),g(14,"Scrimmage Energy:"),d(),g(15),Vt(16,"number"),d(),h(17,"div")(18,"button",9),A("click",function(){return i.pauseRaceAnimation()}),g(19,"Pause"),d()()(),D(20,"canvas",10,11),h(22,"div",12)(23,"span"),g(24,"Chain Modifier: "),D(25,"span",13),d(),h(26,"span"),g(27,"Current Status: "),D(28,"span",14),d()(),h(29,"div",12)(30,"button",15),A("click",function(){return i.showFood()}),g(31,"Show "),h(32,"span",16),g(33,"F"),d(),g(34,"ood"),d(),h(35,"button",15),A("click",function(){return i.shoutEncouragement()}),g(36,"Shout "),h(37,"span",16),g(38,"E"),d(),g(39,"ncouragement"),d(),h(40,"button",15),A("click",function(){return i.blowWhistle()}),g(41,"Blow "),h(42,"span",16),g(43,"W"),d(),g(44,"histle"),d()(),x(45,eH,1,0,"div",17),x(46,tH,1,1,"ngb-progressbar",18),d()(),D(47,"div",19,20),d()(),x(49,iH,28,2,"ng-template",null,21,dt)),2&e){const r=ot(48);p(15),ki(" ",Qt(16,15,i.remainingEnergy,"1.0-0")," / ",i.maxEnergy,""),p(10),m("innerHTML",i.chainModifier,kt),p(3),m("ngClass",function Mh(t,n,e,i,r,a){return nC(Pe(),Pr(),t,n,e,i,r,a)}(18,nH,i.emphasizeWhistle,i.emphasizeFood,i.emphasizeEncouragement))("innerHTML",i.currentStatus,kt),p(2),m("disabled",i.currentButtonCooldown>0)("ngClass",yt(22,rH,i.emphasizeFood)),p(5),m("disabled",i.currentButtonCooldown>0)("ngClass",yt(24,aH,i.emphasizeEncouragement)),p(5),m("disabled",i.currentButtonCooldown>0)("ngClass",yt(26,oH,i.emphasizeWhistle)),p(5),m("ngIf",0===i.currentButtonCooldown),p(1),m("ngIf",i.currentButtonCooldown>0),p(1),m("scrollTop",r.scrollHeight)("innerHTML",i.incrementalCoachingUpdates.trim(),kt)}},directives:[cn,li,dd],pipes:[Qa],styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.updates[_ngcontent-%COMP%]{white-space:pre;height:80%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:60%}.underline[_ngcontent-%COMP%]{text-decoration:underline}.progressBarHeight[_ngcontent-%COMP%]{height:.5rem}.buttonSpread[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.emphasizeFood[_ngcontent-%COMP%]{border:2px solid green;color:green;font-weight:700}.emphasizeWhistle[_ngcontent-%COMP%]{border:2px solid blue;color:#00f;font-weight:700}.emphasizeEncouragement[_ngcontent-%COMP%]{border:2px solid red;color:red;font-weight:700}.emphasizeFoodText[_ngcontent-%COMP%]{color:green}.emphasizeWhistleText[_ngcontent-%COMP%]{color:#00f}.emphasizeEncouragementText[_ngcontent-%COMP%]{color:red}.scrimmageHeaderInfo[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.mobileVersion[_ngcontent-%COMP%]{display:none}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{white-space:initial;height:initial;width:initial;display:initial;grid-template-columns:initial;grid-template-rows:initial;justify-content:initial;gap:initial;grid-template-areas:initial}.headerInfo[_ngcontent-%COMP%]{width:100%}.coachingUpdates[_ngcontent-%COMP%]{height:50%;text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();const lH=["coachingCanvas"],cH=["drawCoaching"];function uH(t,n){1&t&&(h(0,"span",12),g(1,"!"),d())}function dH(t,n){if(1&t&&(h(0,"em",13),g(1),d()),2&t){const e=_();p(1),q("(Retry in ",e.scrimmageRestingTimeRemaining,")")}}function hH(t,n){1&t&&D(0,"app-run-coaching",14),2&t&&m("selectedBarnNumber",_().selectedBarnNumber)}function fH(t,n){1&t&&D(0,"app-scrimmage",14),2&t&&m("selectedBarnNumber",_().selectedBarnNumber)}let pH=(()=>{class t{constructor(e,i,r){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.isCoachingEmitter=new bt,this.isPointerDown=!1,this.activePoints=[],this.currentEndPoint=0,this.currentX=0,this.currentY=0,this.getNewPath=!1,this.coachingTypeEnum=wc,this.showScrimmageIcon=!1}ngOnInit(){var e=this;if(this.displayCoachingView=wc.coaching,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var r=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);null!=r&&(this.associatedAnimal=r)}this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var a=Br(function*(o){e.showScrimmageIcon=e.globalService.globalVar.tutorials.showScrimmageTutorial,e.restingForScrimmage=e.associatedAnimal.scrimmageEnergyTimer>0,e.scrimmageRestingTimeRemaining=e.utilityService.convertSecondsToMMSS(e.associatedAnimal.scrimmageEnergyTimer)});return function(o){return a.apply(this,arguments)}}())}returnToSelectedBarnView(){this.isCoachingEmitter.emit(!1)}changeDisplayCoachingView(e){this.displayCoachingView=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.isCoachingEmitter.emit(!1)}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(An),V(Rn))},t.\u0275cmp=Tt({type:t,selectors:[["app-coaching"]],viewQuery:function(e,i){if(1&e&&(Sr(lH,5,Mi),Sr(cH,5,Mi)),2&e){let r;yi(r=wi())&&(i.coachingCanvas=r.first),yi(r=wi())&&(i.drawCoaching=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{isCoachingEmitter:"isCoachingEmitter"},decls:19,vars:7,consts:[[1,"coachingView"],[1,"marginDiv"],[1,"info"],[1,"flex"],[1,"coachingGridContainer"],[1,"buttonAsText","coaching","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","scrimmage","s5Heading","clickableText",3,"disabled","ngClass","click"],["class","availableIcon",4,"ngIf"],["class","smallText rightSpaced",4,"ngIf"],[1,"back"],[3,"click"],[3,"selectedBarnNumber",4,"ngIf"],[1,"availableIcon"],[1,"smallText","rightSpaced"],[3,"selectedBarnNumber"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),D(4,"div"),h(5,"div",4)(6,"button",5),A("click",function(){return i.changeDisplayCoachingView(i.coachingTypeEnum.coaching)}),g(7,"Coaching"),d(),h(8,"div")(9,"button",6),A("click",function(){return i.changeDisplayCoachingView(i.coachingTypeEnum.scrimmage)}),x(10,uH,2,0,"span",7),g(11,"Scrimmage"),d(),x(12,dH,2,1,"em",8),d()(),h(13,"div",9)(14,"button",10),A("click",function(){return i.returnToSelectedBarnView()}),g(15,"Back"),d()()(),D(16,"hr"),d(),x(17,hH,1,1,"app-run-coaching",11),x(18,fH,1,1,"app-scrimmage",11),d()()),2&e&&(p(6),m("ngClass",i.displayCoachingView===i.coachingTypeEnum.coaching?"filterActive":""),p(3),m("disabled",i.restingForScrimmage)("ngClass",i.displayCoachingView===i.coachingTypeEnum.scrimmage?"filterActive":""),p(1),m("ngIf",i.showScrimmageIcon),p(2),m("ngIf",i.restingForScrimmage),p(5),m("ngIf",i.displayCoachingView===i.coachingTypeEnum.coaching),p(1),m("ngIf",i.displayCoachingView===i.coachingTypeEnum.scrimmage))},directives:[cn,li,Q7,sH],styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.availableIcon[_ngcontent-%COMP%]{color:var(--foreground-quaternary);border-radius:25px;background:var(--background-five);padding:0 .5rem;margin-right:.25rem}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.coachingGridContainer[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:space-around}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary);-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.rightSpaced[_ngcontent-%COMP%]{margin-left:.5rem}.smallText[_ngcontent-%COMP%]{font-size:1rem}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:76.5%}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawCoaching" "coachingUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.coachingUpdates[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:inline-block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();function gH(t,n){if(1&t){const e=ie();h(0,"div",4)(1,"span",5)(2,"label")(3,"input",6),A("ngModelChange",function(r){return k(e),_().swapBarnMode=r})("input",function(){return k(e),_().swapBarnModeToggle()}),d(),h(4,"span"),g(5,"Swap Barn Mode"),d()()(),h(6,"span",5)(7,"label")(8,"input",7),A("ngModelChange",function(r){return k(e),_().isCondensedView=r})("input",function(){return k(e),_().quickViewBarnToggle()}),d(),h(9,"span"),g(10,"Minimized Barn View"),d()()(),h(11,"span")(12,"button",8),A("click",function(){return k(e),_().refreshTraining()}),g(13,"\u21bb Refresh Training"),d()()()}if(2&t){const e=_();p(1),m("ngbPopover",e.swapBarnModePopoverText),p(2),m("ngModel",e.swapBarnMode),p(3),m("ngbPopover",e.quickViewBarnModePopoverText),p(2),m("ngModel",e.isCondensedView),p(4),m("ngbPopover",e.refreshTrainingPopoverText)}}const zi=function(t){return{pointerCursor:t}};function vH(t,n){if(1&t){const e=ie();h(0,"div",21)(1,"app-barn",22),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[3].barnNumber)("draggable",e.swapBarnMode)}}function mH(t,n){if(1&t){const e=ie();h(0,"div",23)(1,"app-barn",24),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[4].barnNumber)("draggable",e.swapBarnMode)}}function bH(t,n){if(1&t){const e=ie();h(0,"div",25)(1,"app-barn",26),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[5].barnNumber)("draggable",e.swapBarnMode)}}function _H(t,n){if(1&t&&(h(0,"div",10),x(1,vH,2,5,"div",18),x(2,mH,2,5,"div",19),x(3,bH,2,5,"div",20),d()),2&t){const e=_(2);p(1),m("ngIf",e.barnRow2IsUnlocked),p(1),m("ngIf",e.barnRow2IsUnlocked),p(1),m("ngIf",e.barnRow2IsUnlocked)}}function yH(t,n){if(1&t){const e=ie();h(0,"div",30)(1,"app-barn",31),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[6].barnNumber)("draggable",e.swapBarnMode)}}function wH(t,n){if(1&t){const e=ie();h(0,"div",32)(1,"app-barn",33),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[7].barnNumber)("draggable",e.swapBarnMode)}}function CH(t,n){if(1&t){const e=ie();h(0,"div",34)(1,"app-barn",35),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[8].barnNumber)("draggable",e.swapBarnMode)}}function SH(t,n){if(1&t&&(h(0,"div",10),x(1,yH,2,5,"div",27),x(2,wH,2,5,"div",28),x(3,CH,2,5,"div",29),d()),2&t){const e=_(2);p(1),m("ngIf",e.barnRow3IsUnlocked),p(1),m("ngIf",e.barnRow3IsUnlocked),p(1),m("ngIf",e.barnRow3IsUnlocked)}}function TH(t,n){if(1&t){const e=ie();h(0,"div",39)(1,"app-barn",40),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[9].barnNumber)("draggable",e.swapBarnMode)}}function RH(t,n){if(1&t){const e=ie();h(0,"div",41)(1,"app-barn",42),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[10].barnNumber)("draggable",e.swapBarnMode)}}function DH(t,n){if(1&t){const e=ie();h(0,"div",43)(1,"app-barn",44),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[11].barnNumber)("draggable",e.swapBarnMode)}}function xH(t,n){if(1&t&&(h(0,"div",10),x(1,TH,2,5,"div",36),x(2,RH,2,5,"div",37),x(3,DH,2,5,"div",38),d()),2&t){const e=_(2);p(1),m("ngIf",e.barnRow4IsUnlocked),p(1),m("ngIf",e.barnRow4IsUnlocked),p(1),m("ngIf",e.barnRow4IsUnlocked)}}function kH(t,n){if(1&t){const e=ie();h(0,"div",48)(1,"app-barn",49),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[12].barnNumber)("draggable",e.swapBarnMode)}}function MH(t,n){if(1&t){const e=ie();h(0,"div",50)(1,"app-barn",51),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[13].barnNumber)("draggable",e.swapBarnMode)}}function AH(t,n){if(1&t){const e=ie();h(0,"div",52)(1,"app-barn",53),A("selectedBarn",function(r){return k(e),_(3).goToBarn(r)})("dragstart",function(r){return k(e),_(3).dragStart(r)})("dragover",function(r){return k(e),_(3).allowDrop(r)})("drop",function(r){return k(e),_(3).dropBarn(r)}),d()()}if(2&t){const e=_(3);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[14].barnNumber)("draggable",e.swapBarnMode)}}function PH(t,n){if(1&t&&(h(0,"div",10),x(1,kH,2,5,"div",45),x(2,MH,2,5,"div",46),x(3,AH,2,5,"div",47),d()),2&t){const e=_(2);p(1),m("ngIf",e.barnRow5IsUnlocked),p(1),m("ngIf",e.barnRow5IsUnlocked),p(1),m("ngIf",e.barnRow5IsUnlocked)}}function VH(t,n){if(1&t){const e=ie();h(0,"div",9)(1,"div",10)(2,"div",11)(3,"app-barn",12),A("selectedBarn",function(r){return k(e),_().goToBarn(r)})("dragstart",function(r){return k(e),_().dragStart(r)})("dragover",function(r){return k(e),_().allowDrop(r)})("drop",function(r){return k(e),_().dropBarn(r)}),d()(),h(4,"div",13)(5,"app-barn",14),A("selectedBarn",function(r){return k(e),_().goToBarn(r)})("dragstart",function(r){return k(e),_().dragStart(r)})("dragover",function(r){return k(e),_().allowDrop(r)})("drop",function(r){return k(e),_().dropBarn(r)}),d()(),h(6,"div",15)(7,"app-barn",16),A("selectedBarn",function(r){return k(e),_().goToBarn(r)})("dragstart",function(r){return k(e),_().dragStart(r)})("dragover",function(r){return k(e),_().allowDrop(r)})("drop",function(r){return k(e),_().dropBarn(r)}),d()()(),x(8,_H,4,3,"div",17),x(9,SH,4,3,"div",17),x(10,xH,4,3,"div",17),x(11,PH,4,3,"div",17),d()}if(2&t){const e=_();p(2),m("ngClass",e.tutorialActive?"tutorialActive":""),p(1),m("ngClass",yt(14,zi,e.swapBarnMode))("barnNumber",e.allBarns[0].barnNumber)("draggable",e.swapBarnMode),p(2),m("ngClass",yt(16,zi,e.swapBarnMode))("barnNumber",e.allBarns[1].barnNumber)("draggable",e.swapBarnMode),p(2),m("ngClass",yt(18,zi,e.swapBarnMode))("barnNumber",e.allBarns[2].barnNumber)("draggable",e.swapBarnMode),p(1),m("ngIf",e.barnRow2IsUnlocked),p(1),m("ngIf",e.barnRow3IsUnlocked),p(1),m("ngIf",e.barnRow4IsUnlocked),p(1),m("ngIf",e.barnRow5IsUnlocked)}}function IH(t,n){if(1&t){const e=ie();h(0,"div",71)(1,"app-barn",22),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[3].barnNumber)("draggable",e.swapBarnMode)}}function OH(t,n){if(1&t){const e=ie();h(0,"div",72)(1,"app-barn",24),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[4].barnNumber)("draggable",e.swapBarnMode)}}function EH(t,n){if(1&t){const e=ie();h(0,"div",73)(1,"app-barn",26),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[5].barnNumber)("draggable",e.swapBarnMode)}}function NH(t,n){if(1&t){const e=ie();h(0,"div",74)(1,"app-barn",31),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[6].barnNumber)("draggable",e.swapBarnMode)}}function BH(t,n){if(1&t){const e=ie();h(0,"div",75)(1,"app-barn",33),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[7].barnNumber)("draggable",e.swapBarnMode)}}function FH(t,n){if(1&t){const e=ie();h(0,"div",76)(1,"app-barn",35),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[8].barnNumber)("draggable",e.swapBarnMode)}}function LH(t,n){if(1&t){const e=ie();h(0,"div",77)(1,"app-barn",40),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[9].barnNumber)("draggable",e.swapBarnMode)}}function UH(t,n){if(1&t){const e=ie();h(0,"div",78)(1,"app-barn",42),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[10].barnNumber)("draggable",e.swapBarnMode)}}function HH(t,n){if(1&t){const e=ie();h(0,"div",79)(1,"app-barn",44),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[11].barnNumber)("draggable",e.swapBarnMode)}}function GH(t,n){if(1&t){const e=ie();h(0,"div",80)(1,"app-barn",49),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[12].barnNumber)("draggable",e.swapBarnMode)}}function zH(t,n){if(1&t){const e=ie();h(0,"div",81)(1,"app-barn",51),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[13].barnNumber)("draggable",e.swapBarnMode)}}function jH(t,n){if(1&t){const e=ie();h(0,"div",82)(1,"app-barn",53),A("selectedBarn",function(r){return k(e),_(2).goToBarn(r)})("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropBarn(r)}),d()()}if(2&t){const e=_(2);p(1),m("ngClass",yt(3,zi,e.swapBarnMode))("barnNumber",e.allBarns[14].barnNumber)("draggable",e.swapBarnMode)}}function $H(t,n){if(1&t){const e=ie();h(0,"div",54)(1,"div",55)(2,"div",56)(3,"app-barn",12),A("selectedBarn",function(r){return k(e),_().goToBarn(r)})("dragstart",function(r){return k(e),_().dragStart(r)})("dragover",function(r){return k(e),_().allowDrop(r)})("drop",function(r){return k(e),_().dropBarn(r)}),d()(),D(4,"br"),h(5,"div",57)(6,"app-barn",14),A("selectedBarn",function(r){return k(e),_().goToBarn(r)})("dragstart",function(r){return k(e),_().dragStart(r)})("dragover",function(r){return k(e),_().allowDrop(r)})("drop",function(r){return k(e),_().dropBarn(r)}),d()(),D(7,"br"),h(8,"div",58)(9,"app-barn",16),A("selectedBarn",function(r){return k(e),_().goToBarn(r)})("dragstart",function(r){return k(e),_().dragStart(r)})("dragover",function(r){return k(e),_().allowDrop(r)})("drop",function(r){return k(e),_().dropBarn(r)}),d()(),D(10,"br"),x(11,IH,2,5,"div",59),D(12,"br"),x(13,OH,2,5,"div",60),D(14,"br"),x(15,EH,2,5,"div",61),D(16,"br"),x(17,NH,2,5,"div",62),D(18,"br"),x(19,BH,2,5,"div",63),D(20,"br"),x(21,FH,2,5,"div",64),D(22,"br"),x(23,LH,2,5,"div",65),D(24,"br"),x(25,UH,2,5,"div",66),D(26,"br"),x(27,HH,2,5,"div",67),D(28,"br"),x(29,GH,2,5,"div",68),D(30,"br"),x(31,zH,2,5,"div",69),D(32,"br"),x(33,jH,2,5,"div",70),d()()}if(2&t){const e=_();p(2),m("ngClass",e.tutorialActive?"tutorialActive":""),p(1),m("ngClass",yt(22,zi,e.swapBarnMode))("barnNumber",e.allBarns[0].barnNumber)("draggable",e.swapBarnMode),p(3),m("ngClass",yt(24,zi,e.swapBarnMode))("barnNumber",e.allBarns[1].barnNumber)("draggable",e.swapBarnMode),p(3),m("ngClass",yt(26,zi,e.swapBarnMode))("barnNumber",e.allBarns[2].barnNumber)("draggable",e.swapBarnMode),p(2),m("ngIf",e.barnRow2IsUnlocked),p(2),m("ngIf",e.barnRow2IsUnlocked),p(2),m("ngIf",e.barnRow2IsUnlocked),p(2),m("ngIf",e.barnRow3IsUnlocked),p(2),m("ngIf",e.barnRow3IsUnlocked),p(2),m("ngIf",e.barnRow3IsUnlocked),p(2),m("ngIf",e.barnRow4IsUnlocked),p(2),m("ngIf",e.barnRow4IsUnlocked),p(2),m("ngIf",e.barnRow4IsUnlocked),p(2),m("ngIf",e.barnRow5IsUnlocked),p(2),m("ngIf",e.barnRow5IsUnlocked),p(2),m("ngIf",e.barnRow5IsUnlocked)}}function qH(t,n){if(1&t){const e=ie();h(0,"app-selected-barn",86),A("returnToBarnEmitter",function(){return k(e),_(2).goToBarn(0)})("isCoachingEmitter",function(r){return k(e),_(2).goToCoaching(r)}),d()}2&t&&m("selectedBarnNumber",_(2).selectedBarn)}function WH(t,n){if(1&t){const e=ie();h(0,"app-coaching",87),A("isCoachingEmitter",function(r){return k(e),_(2).goToCoaching(r)}),d()}2&t&&m("selectedBarnNumber",_(2).selectedBarn)}function XH(t,n){if(1&t&&(h(0,"div",83),x(1,qH,1,1,"app-selected-barn",84),x(2,WH,1,1,"app-coaching",85),d()),2&t){const e=_();p(1),m("ngIf",!e.isCoaching),p(1),m("ngIf",e.isCoaching)}}let YH=(()=>{class t{constructor(e,i,r,a){this.lookupService=e,this.componentCommunicationService=i,this.globalService=r,this.gameLoopService=a,this.selectedBarn=0,this.isCoaching=!1,this.tutorialActive=!1,this.barnRow2IsUnlocked=!1,this.barnRow3IsUnlocked=!1,this.barnRow4IsUnlocked=!1,this.barnRow5IsUnlocked=!1,this.isCondensedView=!1,this.refreshTrainingPopoverText="",this.showBarnOptions=!0,this.swapBarnMode=!1,this.quickViewBarnToggle=()=>{this.isCondensedView=!this.isCondensedView,this.globalService.globalVar.settings.set("quickViewBarnMode",this.isCondensedView)},this.swapBarnModeToggle=()=>{this.swapBarnMode=!this.swapBarnMode,this.globalService.globalVar.settings.set("swapBarnMode",this.swapBarnMode)}}ngOnInit(){var e;this.allBarns=this.globalService.getBarnListInOrder(),this.componentCommunicationService.setNewView(Pt.barn),this.refreshTrainingPopoverText="Click here to restart your current training for all barns or, if no training is selected, restart your previous training.",this.globalService.globalVar.settings.get("quickViewBarnMode")&&(this.isCondensedView=!0),this.globalService.globalVar.settings.get("swapBarnMode")&&(this.swapBarnMode=!0),this.showBarnOptions=!!this.globalService.globalVar.settings.get("showBarnOptions"),this.barnRow2IsUnlocked=this.lookupService.isItemUnlocked("barnRow2"),this.barnRow3IsUnlocked=this.lookupService.isItemUnlocked("barnRow3"),this.barnRow4IsUnlocked=this.lookupService.isItemUnlocked("barnRow4"),this.barnRow5IsUnlocked=this.lookupService.isItemUnlocked("barnRow5"),this.swapBarnModePopoverText=this.lookupService.getSettingDescriptions("Swap Barn Mode"),this.quickViewBarnModePopoverText=this.lookupService.getSettingDescriptions("Quick View Barn"),!this.globalService.globalVar.tutorials.tutorialCompleted&&1===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(i=>i.type===L.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.tutorialActive=!0),this.subscription=this.componentCommunicationService.getBarnView().subscribe(i=>{this.selectedBarn=i})}refreshTraining(){this.globalService.globalVar.barns.forEach(e=>{var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber===e.barnNumber);if(null!=i&&null!=i.previousTraining){var r=Object.assign({},i.previousTraining);r.timeTrained=0,null!=i.currentTraining&&i.currentTraining.trainingTimeRemaining>0&&this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching")?i.queuedTraining=r:i.currentTraining=r}})}dragStart(e){this.swapBarnMode&&(this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id))}allowDrop(e){this.swapBarnMode&&e.preventDefault()}dropBarn(e){if(this.swapBarnMode){e.preventDefault(),e.stopPropagation();var i=e.dataTransfer.getData("text"),r=document.getElementById(i),a=e.target;if(null===r||null===a)return;var o=r.id.substring(4),s=a.id.substring(4);if(void 0===o||void 0===s||NaN===Number(o)||NaN===Number(s))return;var l=this.globalService.globalVar.barnOrder[Number(o)-1],c=this.globalService.globalVar.barnOrder[Number(s)-1],u=this.globalService.globalVar.barnOrder.findIndex(y=>y===l),f=this.globalService.globalVar.barnOrder.findIndex(y=>y===c);if(u<0||f<0)return;var v=this.globalService.globalVar.barnOrder[u];this.globalService.globalVar.barnOrder[u]=this.globalService.globalVar.barnOrder[f],this.globalService.globalVar.barnOrder[f]=v,this.allBarns=this.globalService.getBarnListInOrder()}}goToBarn(e){this.swapBarnMode||(this.selectedBarn=e,this.componentCommunicationService.setBarnView(Pt.barn,e))}goToCoaching(e){this.isCoaching=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setBarnNumber(0)}}return t.\u0275fac=function(e){return new(e||t)(V(Ti),V(Pn),V(It),V(An))},t.\u0275cmp=Tt({type:t,selectors:[["app-barn-view"]],decls:4,vars:4,consts:[["class","flexed barnOptions",4,"ngIf"],["class","gridContainer","id","barnViewDiv",4,"ngIf"],["id","barnViewDiv",4,"ngIf"],["class","selectedBarnDiv",4,"ngIf"],[1,"flexed","barnOptions"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","quickViewBarn",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave",1,"refreshTraining",3,"ngbPopover","click"],["id","barnViewDiv",1,"gridContainer"],[1,"barnRow"],[1,"barn1","barnDefault",3,"ngClass"],["id","Barn1",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn2","barnDefault"],["id","Barn2",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn3","barnDefault"],["id","Barn3",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],["class","barnRow",4,"ngIf"],["class","barn4 barnDefault",4,"ngIf"],["class","barn5 barnDefault",4,"ngIf"],["class","barn6 barnDefault",4,"ngIf"],[1,"barn4","barnDefault"],["id","Barn4",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn5","barnDefault"],["id","Barn5",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn6","barnDefault"],["id","Barn6",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],["class","barn7 barnDefault",4,"ngIf"],["class","barn8 barnDefault",4,"ngIf"],["class","barn9 barnDefault",4,"ngIf"],[1,"barn7","barnDefault"],["id","Barn7",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn8","barnDefault"],["id","Barn8",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn9","barnDefault"],["id","Barn9",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],["class","barn10 barnDefault",4,"ngIf"],["class","barn11 barnDefault",4,"ngIf"],["class","barn12 barnDefault",4,"ngIf"],[1,"barn10","barnDefault"],["id","Barn10",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn11","barnDefault"],["id","Barn11",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn12","barnDefault"],["id","Barn12",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],["class","barn13 barnDefault",4,"ngIf"],["class","barn14 barnDefault",4,"ngIf"],["class","barn15 barnDefault",4,"ngIf"],[1,"barn13","barnDefault"],["id","Barn13",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn14","barnDefault"],["id","Barn14",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn15","barnDefault"],["id","Barn15",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],["id","barnViewDiv"],[1,"column"],[1,"barn1","condensedBarnDefault",3,"ngClass"],[1,"barn2","condensedBarnDefault"],[1,"barn3","condensedBarnDefault"],["class","barn4 condensedBarnDefault",4,"ngIf"],["class","barn5 condensedBarnDefault",4,"ngIf"],["class","barn6 condensedBarnDefault",4,"ngIf"],["class","barn7 condensedBarnDefault",4,"ngIf"],["class","barn8 condensedBarnDefault",4,"ngIf"],["class","barn9 condensedBarnDefault",4,"ngIf"],["class","barn10 condensedBarnDefault",4,"ngIf"],["class","barn11 condensedBarnDefault",4,"ngIf"],["class","barn12 condensedBarnDefault",4,"ngIf"],["class","barn13 condensedBarnDefault",4,"ngIf"],["class","barn14 condensedBarnDefault",4,"ngIf"],["class","barn15 condensedBarnDefault",4,"ngIf"],[1,"barn4","condensedBarnDefault"],[1,"barn5","condensedBarnDefault"],[1,"barn6","condensedBarnDefault"],[1,"barn7","condensedBarnDefault"],[1,"barn8","condensedBarnDefault"],[1,"barn9","condensedBarnDefault"],[1,"barn10","condensedBarnDefault"],[1,"barn11","condensedBarnDefault"],[1,"barn12","condensedBarnDefault"],[1,"barn13","condensedBarnDefault"],[1,"barn14","condensedBarnDefault"],[1,"barn15","condensedBarnDefault"],[1,"selectedBarnDiv"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter"],[3,"selectedBarnNumber","isCoachingEmitter"]],template:function(e,i){1&e&&(x(0,gH,14,5,"div",0),x(1,VH,12,20,"div",1),x(2,$H,34,28,"div",2),x(3,XH,3,2,"div",3)),2&e&&(m("ngIf",0===i.selectedBarn&&i.showBarnOptions),p(1),m("ngIf",0===i.selectedBarn&&!i.isCondensedView),p(1),m("ngIf",0===i.selectedBarn&&i.isCondensedView),p(1),m("ngIf",i.selectedBarn>0))},directives:[li,Qr,rc,Uo,Ho,cn,qU,W7,pH],styles:["#barnViewDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.selectedBarnDiv[_ngcontent-%COMP%]{height:100%}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.barnOptions[_ngcontent-%COMP%]{position:sticky;right:0;width:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);padding:.1rem;border-bottom:1px solid rgba(0,0,0,.8)}.flexed[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.barnDefault[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none;border-top:none;width:33.3333%;display:inline-block;vertical-align:middle;height:100%}.pointerCursor[_ngcontent-%COMP%]{cursor:pointer}.condensedBarnDefault[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none;border-top:none;display:inline-block;vertical-align:middle;width:100%}.column[_ngcontent-%COMP%]{width:100%}.barnRow[_ngcontent-%COMP%]{height:25%;width:100%;display:inline-block}.lockedBarnRow[_ngcontent-%COMP%]{border:none!important}.tutorialActive[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-color:red}"]}),t})();function QH(t,n){1&t&&(h(0,"span",6),g(1," Primary "),d())}function KH(t,n){1&t&&(h(0,"span",6),g(1," Auto Run Free Race "),d())}function ZH(t,n){1&t&&(h(0,"span",6),g(1," Event "),d())}function JH(t,n){1&t&&D(0,"br")}function e9(t,n){1&t&&(h(0,"span",9),g(1," / "),d())}function t9(t,n){if(1&t&&(h(0,"span",7),g(1),x(2,e9,2,0,"span",8),d()),2&t){const e=n.$implicit,i=n.index,r=_();m("ngClass",r.getColorClass(e)),p(1),q(" ",e.name,""),p(1),m("ngIf",i<r.deck.selectedAnimals.length-1)}}let J0=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i}ngOnInit(){if(0===this.deckNumber||null==this.deckNumber){var e=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=e&&(this.deck=e)}else{var i=this.globalService.globalVar.animalDecks.find(r=>r.deckNumber===this.deckNumber);null!=i&&(this.deck=i)}}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}goToDeckView(){this.componentCommunicationService.setNewView(Pt.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Pn))},t.\u0275cmp=Tt({type:t,selectors:[["app-animal-deck"]],inputs:{deckNumber:"deckNumber"},decls:11,vars:6,consts:[[1,"relayTeam"],[1,"headers"],["class","primaryText keyword rightSpaced",4,"ngIf"],[4,"ngIf"],[1,"clickableText",3,"click"],["class","coloredText",3,"ngClass",4,"ngFor","ngForOf"],[1,"primaryText","keyword","rightSpaced"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1),x(2,QH,2,0,"span",2),x(3,KH,2,0,"span",2),x(4,ZH,2,0,"span",2),x(5,JH,1,0,"br",3),d(),h(6,"div")(7,"strong",4),A("click",function(){return i.goToDeckView()}),g(8),d(),g(9," - "),x(10,t9,3,3,"span",5),d()()),2&e&&(p(2),m("ngIf",i.deck.isPrimaryDeck&&void 0!==i.deckNumber&&i.deckNumber>0),p(1),m("ngIf",i.deck.autoRunFreeRace&&void 0!==i.deckNumber&&i.deckNumber>0),p(1),m("ngIf",i.deck.isEventDeck&&void 0!==i.deckNumber&&i.deckNumber>0),p(1),m("ngIf",i.deckNumber>0),p(3),rt(i.deck.name),p(2),m("ngForOf",i.deck.selectedAnimals))},directives:[li,Cn,cn],styles:[".primaryText[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary);padding-left:.5rem;padding-right:.5rem}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.relayTeam[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:100%;margin-left:.5rem}@media (max-width: 800px){.headers[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;width:50%}.rightSpaced[_ngcontent-%COMP%]{margin-top:.5rem}}"]}),t})();function i9(t,n){if(1&t&&(h(0,"span"),g(1),d()),2&t){const e=_(2);p(1),q("Race ",e.index+1," ")}}function n9(t,n){1&t&&(h(0,"span",12),g(1," / "),d())}function r9(t,n){if(1&t&&(h(0,"span",9)(1,"span",10),g(2),x(3,n9,2,0,"span",11),d()()),2&t){const e=n.$implicit,i=n.index,r=_(2);m("ngClass",r.getNoRacerClass(e)),p(1),m("ngClass",r.getColorClass(e)),p(1),q(" ",e.getCourseTypeName()," "),p(1),m("ngIf",i<r.race.raceLegs.length-1)}}function a9(t,n){1&t&&(h(0,"h6",13)(1,"em"),g(2,"Completed!"),d()())}function o9(t,n){1&t&&(h(0,"h6",13)(1,"em"),g(2,"Cannot Run"),d()())}function s9(t,n){1&t&&(h(0,"h6",14),g(1,"Start"),d())}const TD=function(t){return{raceNotAllowed:t}};function l9(t,n){if(1&t&&(h(0,"div",2),x(1,i9,2,1,"span",3),h(2,"div",4)(3,"div",5)(4,"div")(5,"span"),g(6),Vt(7,"number"),d(),x(8,r9,4,4,"span",6),d(),x(9,a9,3,0,"h6",7),x(10,o9,3,0,"h6",7),x(11,s9,2,0,"h6",8),d()()()),2&t){const e=_(),i=ot(3);p(1),m("ngIf",null!=e.index&&e.index>-1),p(1),m("ngClass",yt(12,TD,e.cannotRace))("ngbPopover",i)("disablePopover",""===e.popoverText),p(4),q(" ",Qt(7,9,e.race.length,"1.2-2")," Total Meters "),p(2),m("ngForOf",e.race.raceLegs),p(1),m("ngIf",e.showStartText&&e.race.isCompleted),p(1),m("ngIf",e.showStartText&&!e.race.isCompleted&&e.cannotRace),p(1),m("ngIf",e.showStartText&&!e.race.isCompleted&&!e.cannotRace)}}function c9(t,n){if(1&t&&(h(0,"span"),g(1),d()),2&t){const e=_(2);p(1),q("Race ",e.index+1," ")}}function u9(t,n){if(1&t&&(h(0,"p",9),g(1),Vt(2,"number"),h(3,"span",10),g(4),d()()),2&t){const e=n.$implicit,i=_(2);m("ngClass",i.getNoRacerClass(e)),p(1),ki(" ",Qt(2,5,e.distance,"1.2-2")," Meters of ",e.getTerrainName()," "),p(2),m("ngClass",i.getColorClass(e)),p(1),rt(e.getCourseTypeName())}}function d9(t,n){1&t&&(h(0,"h6")(1,"em"),g(2,"Completed!"),d()())}function h9(t,n){1&t&&(h(0,"h6")(1,"em"),g(2,"Cannot Run"),d()())}function f9(t,n){1&t&&(h(0,"h6",16),g(1,"Start"),d())}function p9(t,n){if(1&t&&(h(0,"div",2),x(1,c9,2,1,"span",3),D(2,"br"),h(3,"div",4),x(4,u9,5,8,"p",6),x(5,d9,3,0,"h6",3),x(6,h9,3,0,"h6",3),x(7,f9,2,0,"h6",15),d()()),2&t){const e=_(),i=ot(3);p(1),m("ngIf",null!=e.index&&e.index>-1),p(2),m("ngClass",yt(8,TD,e.cannotRace))("ngbPopover",i)("disablePopover",""===e.popoverText),p(1),m("ngForOf",e.race.raceLegs),p(1),m("ngIf",e.showStartText&&e.race.isCompleted),p(1),m("ngIf",e.showStartText&&!e.race.isCompleted&&e.cannotRace),p(1),m("ngIf",e.showStartText&&!e.race.isCompleted&&!e.cannotRace)}}function g9(t,n){1&t&&D(0,"div",17),2&t&&m("innerHTML",_().popoverText,kt)}let eb=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.condensedVersion=!1,this.missingRacers=[],this.busyRacers=[]}ngOnInit(){this.cannotRace=!1;var e=this.lookupService.getPrimaryDeck();this.race.raceLegs.forEach(i=>{if(null==e||0===e.selectedAnimals.length&&this.race.raceType!==ge.trainingTrack)this.cannotRace=!0,this.missingRacers.push(i.courseType);else if((null==e?void 0:e.selectedAnimals.some(a=>a.raceCourseType===i.courseType))||this.race.raceType===ge.trainingTrack){var r=null==e?void 0:e.selectedAnimals.find(a=>a.raceCourseType===i.courseType);this.race.raceType===ge.trainingTrack&&(r=this.selectedAnimal),void 0!==r&&!this.lookupService.canAnimalRace(r)&&(this.cannotRace=!0,this.busyRacers.push(r))}else this.cannotRace=!0,this.missingRacers.push(i.courseType)}),void 0!==this.race.pinnacleConditions&&void 0!==e&&(this.race.pinnacleConditions.containsCondition(Je[Je.twoRacersOnly])&&e.selectedAnimals.length<2&&(this.cannotRace=!0),this.race.pinnacleConditions.containsCondition(Je[Je.threeRacersOnly])&&e.selectedAnimals.length<3&&(this.cannotRace=!0),this.race.pinnacleConditions.containsCondition(St[St.fourRacersOnly])&&e.selectedAnimals.length<4&&(this.cannotRace=!0)),!this.cannotRace&&this.race.isCompleted&&(this.cannotRace=!0),this.race.localRaceType===Ut.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(this.cannotRace=!0),this.popoverText=this.cannotRace?this.getErrorPopoverText():this.getSuccessfulPopoverText()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getCourseTypeName(),mountainColor:"Mountain"===e.getCourseTypeName(),waterColor:"Ocean"===e.getCourseTypeName(),tundraColor:"Tundra"===e.getCourseTypeName(),volcanicColor:"Volcanic"===e.getCourseTypeName()}:{}}getNoRacerClass(e){return{noRacer:!this.hasRacerForLeg(e)}}hasRacerForLeg(e){var i=!1,r=this.lookupService.getPrimaryDeck();return null==r||0===r.selectedAnimals.length||(r.selectedAnimals.some(a=>a.raceCourseType===e.courseType)&&(i=!0),this.busyRacers.some(a=>a.raceCourseType===e.courseType)&&(i=!1)),i}getErrorPopoverText(){var e="You cannot do this race for the following reasons: \n\n";this.missingRacers.forEach(r=>{e+="-Missing "+F[r]+" racer\n"}),this.busyRacers.forEach(r=>{e+="-"+r.name+" is active in another race\n"}),this.race.isCompleted&&(e+="-You've already completed this race."),this.race.localRaceType===Ut.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(e+="-You've met your limit of free races. More will be available soon.");var i=this.lookupService.getPrimaryDeck();return void 0!==this.race.pinnacleConditions&&void 0!==i&&(this.race.pinnacleConditions.containsCondition(Je[Je.twoRacersOnly])&&i.selectedAnimals.length<2&&(e+="-You do not meet the Pinnacle conditions.\n"),this.race.pinnacleConditions.containsCondition(Je[Je.threeRacersOnly])&&i.selectedAnimals.length<3&&(e+="-You do not meet the Pinnacle conditions.\n"),this.race.pinnacleConditions.containsCondition(St[St.fourRacersOnly])&&i.selectedAnimals.length<4&&(e+="-You do not meet the Pinnacle conditions.\n")),e}getSuccessfulPopoverText(){var e="",i=1;return this.race.raceLegs.forEach(r=>{null!=r.terrain&&(e+=this.lookupService.getTerrainPopoverText(r.terrain,r)),i<this.race.raceLegs.length&&(e+="\n"),i+=1}),e}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Ti))},t.\u0275cmp=Tt({type:t,selectors:[["app-race-description"]],inputs:{index:"index",race:"race",showStartText:"showStartText",selectedAnimal:"selectedAnimal",condensedVersion:"condensedVersion"},decls:4,vars:2,consts:[["class","raceDescription",4,"ngIf"],["popContent",""],[1,"raceDescription"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngClass","ngbPopover","disablePopover"],[1,"flex"],[3,"ngClass",4,"ngFor","ngForOf"],["class","inline",4,"ngIf"],["class","keyword inline",4,"ngIf"],[3,"ngClass"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"],[1,"inline"],[1,"keyword","inline"],["class","keyword",4,"ngIf"],[1,"keyword"],[1,"popoverClass",3,"innerHTML"]],template:function(e,i){1&e&&(x(0,l9,12,14,"div",0),x(1,p9,8,10,"div",0),x(2,g9,1,1,"ng-template",null,1,dt)),2&e&&(m("ngIf",i.condensedVersion),p(1),m("ngIf",!i.condensedVersion))},directives:[li,cn,Qr,Cn],pipes:[Qa],styles:[".raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.inline[_ngcontent-%COMP%]{display:inline-block}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}"]}),t})();function v9(t,n){if(1&t){const e=ie();h(0,"div",10),A("click",function(){const a=k(e).$implicit;return _().selectCircuitRace(a)}),D(1,"app-race-description",11),d()}if(2&t){const e=n.$implicit,i=n.index,r=_();bv("circuitRace",i+1,""),m("ngClass",r.tutorialActive?"tutorialActive":""),p(1),m("index",i)("race",e)("showStartText",!0)}}function m9(t,n){if(1&t){const e=ie();h(0,"div",12),A("click",function(){const a=k(e).$implicit;return _().selectLocalRace(a)}),D(1,"app-race-description",11),d()}if(2&t){const e=n.$implicit,i=n.index;bv("localRace",i+1,""),p(1),m("index",i)("race",e)("showStartText",!0)}}function b9(t,n){if(1&t&&(h(0,"div",13),g(1),d()),2&t){const e=_();p(1),q(" ",e.circuitRankUpDescription," ")}}let _9=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new bt,this.tutorialActive=!1,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){var e=this;this.handleTutorial(),this.availableLocalRaces=[],this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace());var i=this.globalService.globalVar.circuitRank;this.circuitRank=this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank).toString():this.globalService.globalVar.circuitRank,this.circuitRankUpDescription=this.globalService.globalVar.circuitRankUpRewardDescription,this.availableCircuitRaces=this.globalService.globalVar.circuitRaces.filter(s=>s.requiredRank===i);var r=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);this.availableCircuitRaces.forEach(s=>{void 0!==r&&(s.raceLegs=this.globalService.reorganizeLegsByDeckOrder(s.raceLegs,r))}),this.totalFreeRaces=this.lookupService.getTotalFreeRacesPerPeriod();var a=900,o=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==o&&(a=o.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=Br(function*(l){var c=a-e.globalService.globalVar.freeRaceTimePeriodCounter,u=Math.floor(c/60),f=c-60*u,v=Math.floor(f).toString();f<10&&(v=f<1||f>59?"00":String(v).padStart(2,"0")),e.getRacesRequiredForMedal(),e.freeRaceTimer=u+":"+v,e.freeRacesRemaining=e.lookupService.getRemainingFreeRacesPerPeriod()});return function(l){return s.apply(this,arguments)}}())}selectCircuitRace(e){var i=!0,r=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck);null!=r&&0!==r.selectedAnimals.length?(e.raceLegs.forEach(a=>{(null==r?void 0:r.selectedAnimals.some(s=>s.raceCourseType===a.courseType))||(i=!1);var o=null==r?void 0:r.selectedAnimals.find(s=>s.raceCourseType===a.courseType);void 0!==o&&!this.lookupService.canAnimalRace(o)&&(i=!1)}),e.isCompleted&&(i=!1),!this.globalService.globalVar.tutorials.tutorialCompleted&&4===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1),i&&this.raceSelected.emit(e)):i=!1}selectLocalRace(e){var i=!0,r=e.localRaceType===Ut.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(s=>s.raceCourseType===o.courseType))||(i=!1)}),r&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(i=!1),i&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):i=!1}getRacesRequiredForMedal(){var e=this.globalService.globalVar.resources.find(u=>"International Races"===u.name),i=this.globalService.globalVar.resources.find(u=>"National Races"===u.name);if(null!=e&&e.amount>0){var r=5,a=this.globalService.globalVar.modifiers.find(u=>"internationalRacesToMedalModifier"===u.text);null!=a&&(r=a.value),this.winsNeededUntilNextMedal=r-this.globalService.globalVar.nationalRaceCountdown}else if(null!=i&&i.amount>0){var o=12,s=this.globalService.globalVar.modifiers.find(u=>"nationalRacesToMedalModifier"===u.text);null!=s&&(o=s.value),this.winsNeededUntilNextMedal=o-this.globalService.globalVar.nationalRaceCountdown}else{var l=50,c=this.globalService.globalVar.modifiers.find(u=>"freeRacesToMedalModifier"===u.text);null!=c&&(l=c.value),this.winsNeededUntilNextMedal=l-this.globalService.globalVar.nationalRaceCountdown}}handleTutorial(){var e,i;!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&5===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(r=>r.type===L.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&9===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(i=this.globalService.globalVar.animals.find(r=>r.type===L.Hare))||void 0===i?void 0:i.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Rn),V(Ti),V(An))},t.\u0275cmp=Tt({type:t,selectors:[["app-circuit-view"]],outputs:{raceSelected:"raceSelected"},decls:28,vars:8,consts:[[1,"circuitViewDiv"],[1,"circuitRaceHeader","s4Heading"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"circuitRaceGrid"],[3,"ngClass","class","click",4,"ngFor","ngForOf"],["id","localRaceSection"],[1,"s4Heading"],[1,"localRaceGrid"],[3,"class","click",4,"ngFor","ngForOf"],["circuitRewardContent",""],[3,"ngClass","click"],[3,"index","race","showStartText"],[3,"click"],[1,"popoverClass"]],template:function(e,i){if(1&e&&(h(0,"div",0),D(1,"app-animal-deck")(2,"hr"),h(3,"div",1)(4,"span",2),g(5,"Circuit Rank "),h(6,"strong"),g(7),d()(),D(8,"br")(9,"br"),d(),h(10,"div",3),x(11,v9,2,7,"div",4),d(),D(12,"hr"),h(13,"div",5)(14,"span",6),g(15,"Free Races"),d(),D(16,"br"),h(17,"em"),g(18),d(),D(19,"br"),h(20,"em"),g(21),d(),D(22,"br")(23,"br"),h(24,"div",7),x(25,m9,2,6,"div",8),d()()(),x(26,b9,2,1,"ng-template",null,9,dt)),2&e){const r=ot(27);p(4),m("ngbPopover",r),p(3),rt(i.circuitRank),p(4),m("ngForOf",i.availableCircuitRaces),p(7),wh(" ",i.freeRacesRemaining," of ",i.totalFreeRaces," remaining -- resets in ",i.freeRaceTimer,""),p(3),q("Wins needed until next medal: ",i.winsNeededUntilNextMedal,""),p(4),m("ngForOf",i.availableLocalRaces)}},directives:[J0,Qr,Cn,cn,eb],styles:['.circuitRaceHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.circuitRaceGrid[_ngcontent-%COMP%]{height:100%;display:grid;text-align:center;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"circuitRace1 circuitRace2 circuitRace3"}.circuitRace1[_ngcontent-%COMP%]{grid-area:circuitRace1}.circuitRace2[_ngcontent-%COMP%]{grid-area:circuitRace2}.circuitRace3[_ngcontent-%COMP%]{grid-area:circuitRace3}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.localRaceGrid[_ngcontent-%COMP%]{text-align:center;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"localRace1 localRace2 localRace3"}.localRace1[_ngcontent-%COMP%]{grid-area:localRace1}.localRace2[_ngcontent-%COMP%]{grid-area:localRace2}.localRace3[_ngcontent-%COMP%]{grid-area:localRace3}#localRaceSection[_ngcontent-%COMP%]{text-align:center}']}),t})();function y9(t,n){if(1&t){const e=ie();h(0,"div",9)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return k(e),_(2).toggleRace("monoRaceToggled")}),g(4,"-"),d()(),h(5,"span",13),g(6,"Mono Race "),h(7,"strong"),g(8),d()(),D(9,"span",11),d(),h(10,"app-race-description",14),A("click",function(){k(e);const r=_(2);return r.selectLocalRace(r.availableMonoRace)}),d()()}if(2&t){const e=_(2);p(8),rt(e.monoRaceRank),p(2),m("race",e.availableMonoRace)("showStartText",!0)}}function w9(t,n){1&t&&(h(0,"div",9),g(1," Next Mono Race Available After Circuit Rank Up "),d())}function C9(t,n){if(1&t&&(h(0,"div",7),x(1,y9,11,3,"div",8),x(2,w9,2,0,"div",8),D(3,"hr"),d()),2&t){const e=_();p(1),m("ngIf",null!=e.availableMonoRace),p(1),m("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function S9(t,n){if(1&t){const e=ie();h(0,"div",16),A("click",function(){k(e);const r=_(2);return r.selectLocalRace(r.availableMonoRace)}),h(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return k(e),_(2).toggleRace("monoRaceToggled")}),g(4,"+"),d()(),h(5,"span",17),g(6,"Mono Race "),h(7,"strong"),g(8),d()(),h(9,"div",18)(10,"app-race-description",19),A("click",function(){k(e);const r=_(2);return r.selectLocalRace(r.availableMonoRace)}),d()()()()}if(2&t){const e=_(2);p(8),rt(e.monoRaceRank),p(2),m("race",e.availableMonoRace)("showStartText",!0)("condensedVersion",!0)}}function T9(t,n){1&t&&(h(0,"div",9),g(1," Next Mono Race Available After Circuit Rank Up "),d())}function R9(t,n){if(1&t&&(h(0,"div",7),x(1,S9,11,4,"div",15),x(2,T9,2,0,"div",8),D(3,"hr"),d()),2&t){const e=_();p(1),m("ngIf",null!=e.availableMonoRace),p(1),m("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function D9(t,n){if(1&t){const e=ie();h(0,"div",22)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return k(e),_(2).toggleRace("duoRaceToggled")}),g(4,"-"),d()(),h(5,"span",13),g(6,"Duo Race "),h(7,"strong"),g(8),d()(),D(9,"span",11),d(),h(10,"app-race-description",14),A("click",function(){k(e);const r=_(2);return r.selectLocalRace(r.availableDuoRace)}),d()()}if(2&t){const e=_(2);p(8),rt(e.duoRaceRank),p(2),m("race",e.availableDuoRace)("showStartText",!0)}}function x9(t,n){1&t&&(h(0,"div",22),g(1," Next Duo Race Available After Circuit Rank Up "),d())}function k9(t,n){if(1&t&&(h(0,"div",20),x(1,D9,11,3,"div",21),x(2,x9,2,0,"div",21),D(3,"hr"),d()),2&t){const e=_();p(1),m("ngIf",null!=e.availableDuoRace),p(1),m("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function M9(t,n){if(1&t){const e=ie();h(0,"div",22)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return k(e),_(2).toggleRace("duoRaceToggled")}),g(4,"+"),d()(),h(5,"span",17),g(6,"Duo Race "),h(7,"strong"),g(8),d()(),h(9,"div",18)(10,"app-race-description",19),A("click",function(){k(e);const r=_(2);return r.selectLocalRace(r.availableDuoRace)}),d()()()()}if(2&t){const e=_(2);p(8),rt(e.duoRaceRank),p(2),m("race",e.availableDuoRace)("showStartText",!0)("condensedVersion",!0)}}function A9(t,n){1&t&&(h(0,"div",22),g(1," Next Duo Race Available After Circuit Rank Up "),d())}function P9(t,n){if(1&t&&(h(0,"div",20),x(1,M9,11,4,"div",21),x(2,A9,2,0,"div",21),D(3,"hr"),d()),2&t){const e=_();p(1),m("ngIf",null!=e.availableDuoRace),p(1),m("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function V9(t,n){if(1&t){const e=ie();h(0,"div",25)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return k(e),_(2).toggleRace("rainbowRaceToggled")}),g(4,"-"),d()(),h(5,"span",13),g(6,"Rainbow Race "),h(7,"strong"),g(8),d()(),D(9,"span",11),d(),h(10,"app-race-description",14),A("click",function(){k(e);const r=_(2);return r.selectLocalRace(r.availableRainbowRace)}),d()()}if(2&t){const e=_(2);p(8),rt(e.rainbowRaceRank),p(2),m("race",e.availableRainbowRace)("showStartText",!0)}}function I9(t,n){1&t&&(h(0,"div",25),g(1," Next Rainbow Race Available After Circuit Rank Up "),d())}function O9(t,n){if(1&t&&(h(0,"div",23),x(1,V9,11,3,"div",24),x(2,I9,2,0,"div",24),D(3,"hr"),d()),2&t){const e=_();p(1),m("ngIf",null!=e.availableRainbowRace),p(1),m("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}function E9(t,n){if(1&t){const e=ie();h(0,"div",25)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return k(e),_(2).toggleRace("rainbowRaceToggled")}),g(4,"+"),d()(),h(5,"span",17),g(6,"Rainbow Race "),h(7,"strong"),g(8),d()(),h(9,"div",18)(10,"app-race-description",19),A("click",function(){k(e);const r=_(2);return r.selectLocalRace(r.availableRainbowRace)}),d()()()()}if(2&t){const e=_(2);p(8),rt(e.rainbowRaceRank),p(2),m("race",e.availableRainbowRace)("showStartText",!0)("condensedVersion",!0)}}function N9(t,n){1&t&&(h(0,"div",25),g(1," Next Rainbow Race Available After Circuit Rank Up "),d())}function B9(t,n){if(1&t&&(h(0,"div",23),x(1,E9,11,4,"div",24),x(2,N9,2,0,"div",24),D(3,"hr"),d()),2&t){const e=_();p(1),m("ngIf",null!=e.availableRainbowRace),p(1),m("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}function F9(t,n){if(1&t){const e=ie();h(0,"div",28)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return k(e),_(2).toggleRace("pinnacleRaceToggled")}),g(4,"-"),d()(),h(5,"span",13),g(6,"Pinnacle Floor "),h(7,"strong"),g(8),d()(),D(9,"span",11),d(),h(10,"span"),D(11,"span",29),d(),h(12,"app-race-description",14),A("click",function(){k(e);const r=_(2);return r.selectLocalRace(r.availablePinnacleRace)}),d()()}if(2&t){const e=_(2);p(8),rt(e.pinnacleRaceFloor),p(3),m("innerHTML",e.globalService.getPinnacleFloorConditionDescription(e.availablePinnacleRace.pinnacleConditions),kt),p(1),m("race",e.availablePinnacleRace)("showStartText",!0)}}function L9(t,n){1&t&&(h(0,"div",28),g(1," Next Pinnacle Floor Available After Circuit Rank Up "),d())}function U9(t,n){if(1&t&&(h(0,"div",26),x(1,F9,13,4,"div",27),x(2,L9,2,0,"div",27),D(3,"hr"),d()),2&t){const e=_();p(1),m("ngIf",null!=e.availablePinnacleRace),p(1),m("ngIf",void 0===e.availablePinnacleRace||null==e.availablePinnacleRace)}}function H9(t,n){if(1&t){const e=ie();h(0,"div",28)(1,"div",10)(2,"span",11)(3,"button",12),A("click",function(){return k(e),_(2).toggleRace("pinnacleRaceToggled")}),g(4,"+"),d()(),h(5,"span",17),g(6,"Pinnacle Floor "),h(7,"strong"),g(8),d()(),h(9,"div",18)(10,"app-race-description",19),A("click",function(){k(e);const r=_(2);return r.selectLocalRace(r.availablePinnacleRace)}),d()()(),h(11,"span"),D(12,"span",29),d()()}if(2&t){const e=_(2);p(8),rt(e.pinnacleRaceFloor),p(2),m("race",e.availablePinnacleRace)("showStartText",!0)("condensedVersion",!0),p(2),m("innerHTML",e.globalService.getPinnacleFloorConditionDescription(e.availablePinnacleRace.pinnacleConditions),kt)}}function G9(t,n){1&t&&(h(0,"div",28),g(1," Next Pinnacle Floor Available After Circuit Rank Up "),d())}function z9(t,n){if(1&t&&(h(0,"div",26),x(1,H9,13,5,"div",27),x(2,G9,2,0,"div",27),D(3,"hr"),d()),2&t){const e=_();p(1),m("ngIf",null!=e.availablePinnacleRace),p(1),m("ngIf",void 0===e.availablePinnacleRace||null==e.availablePinnacleRace)}}let j9=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new bt,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10,this.isMonoRaceToggled=!1,this.isDuoRaceToggled=!1,this.isRainbowRaceToggled=!1,this.isPinnacleRaceToggled=!1}ngOnInit(){this.availableLocalRaces=[],this.isMonoRaceToggled=this.globalService.globalVar.settings.get("monoRaceToggled"),this.isDuoRaceToggled=this.globalService.globalVar.settings.get("duoRaceToggled"),this.isRainbowRaceToggled=this.globalService.globalVar.settings.get("rainbowRaceToggled"),this.isPinnacleRaceToggled=this.globalService.globalVar.settings.get("pinnacleRaceToggled");var e=this.getNextAvailableSpecialRace(Ut.Mono);void 0!==e&&(this.availableMonoRace=e);var i=this.getNextAvailableSpecialRace(Ut.Duo);void 0!==i&&(this.availableDuoRace=i);var r=this.getNextAvailableSpecialRace(Ut.Rainbow);void 0!==r&&(this.availableRainbowRace=r);var a=this.getNextAvailableSpecialRace(Ut.Pinnacle);void 0!==a&&(this.availablePinnacleRace=a);var o=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);null!=o&&(null!=this.availableDuoRace&&(this.availableDuoRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableDuoRace.raceLegs,o)),null!=this.availableRainbowRace&&(this.availableRainbowRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableRainbowRace.raceLegs,o))),this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?(null!=this.availableMonoRace&&(this.monoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableMonoRace.requiredRank).toString()),null!=this.availableDuoRace&&(this.duoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableDuoRace.requiredRank).toString()),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableRainbowRace.requiredRank).toString()),null!=this.availablePinnacleRace&&(this.pinnacleRaceFloor=this.utilityService.getNumericValueOfCircuitRank(this.availablePinnacleRace.requiredRank).toString())):(null!=this.availableMonoRace&&(this.monoRaceRank=this.availableMonoRace.requiredRank),null!=this.availableDuoRace&&(this.duoRaceRank=this.availableDuoRace.requiredRank),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.availableRainbowRace.requiredRank),null!=this.availablePinnacleRace&&(this.pinnacleRaceFloor=this.availablePinnacleRace.requiredRank)),this.areMonoRacesAvailable=this.lookupService.isItemUnlocked("monoRace"),this.areDuoRacesAvailable=this.lookupService.isItemUnlocked("duoRace"),this.areRainbowRacesAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.arePinnacleRacesAvailable=this.lookupService.isItemUnlocked("thePinnacle")}getNextAvailableSpecialRace(e){return e===Ut.Mono&&this.globalService.GenerateMonoRaces(this.globalService.globalVar.monoRank),e===Ut.Duo&&this.globalService.GenerateDuoRaces(this.globalService.globalVar.duoRank),e===Ut.Rainbow&&this.globalService.GenerateRainbowRaces(this.globalService.globalVar.rainbowRank),e===Ut.Pinnacle&&this.globalService.GeneratePinnacleRaces(this.globalService.globalVar.pinnacleFloor),this.globalService.globalVar.localRaces.find(i=>i.localRaceType===e)}sortByRankRequired(e,i){return e.requiredRank>i.requiredRank?1:i.requiredRank>e.requiredRank?-1:0}selectLocalRace(e){var i=!0,r=e.localRaceType===Ut.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(l=>l.raceCourseType===o.courseType))||(i=!1);var s=null==a?void 0:a.selectedAnimals.find(l=>l.raceCourseType===o.courseType);void 0!==s&&!this.lookupService.canAnimalRace(s)&&(i=!1)}),void 0!==e.pinnacleConditions&&(e.pinnacleConditions.containsCondition(Je[Je.twoRacersOnly])&&a.selectedAnimals.length<2&&(i=!1),e.pinnacleConditions.containsCondition(Je[Je.threeRacersOnly])&&a.selectedAnimals.length<3&&(i=!1),e.pinnacleConditions.containsCondition(St[St.fourRacersOnly])&&a.selectedAnimals.length<4&&(i=!1)),i&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):i=!1}toggleRace(e){var i=this.globalService.globalVar.settings.get(e);this.globalService.globalVar.settings.set(e,!i),"monoRaceToggled"===e&&(this.isMonoRaceToggled=!this.isMonoRaceToggled),"duoRaceToggled"===e&&(this.isDuoRaceToggled=!this.isDuoRaceToggled),"rainbowRaceToggled"===e&&(this.isRainbowRaceToggled=!this.isRainbowRaceToggled),"pinnacleRaceToggled"===e&&(this.isPinnacleRaceToggled=!this.isPinnacleRaceToggled)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Rn),V(Ti),V(An))},t.\u0275cmp=Tt({type:t,selectors:[["app-local-view"]],outputs:{raceSelected:"raceSelected"},decls:13,vars:8,consts:[[1,"localViewDiv"],[1,"localRaceHeader"],[1,"allLocalRaces"],["id","monoRaceSection",4,"ngIf"],["id","duoRaceSection",4,"ngIf"],["id","rainbowRaceSection",4,"ngIf"],["id","pinnacleRaceSection",4,"ngIf"],["id","monoRaceSection"],["class","monoRace",4,"ngIf"],[1,"monoRace"],[1,"minimizer"],[1,"minimizerSideSpacing"],[3,"click"],[1,"s4Heading"],[3,"race","showStartText","click"],["class","monoRace",3,"click",4,"ngIf"],[1,"monoRace",3,"click"],[1,"s4Heading","raceNameSpacing"],[1,"inlineDescription"],[3,"race","showStartText","condensedVersion","click"],["id","duoRaceSection"],["class","duoRace",4,"ngIf"],[1,"duoRace"],["id","rainbowRaceSection"],["class","rainbowRace",4,"ngIf"],[1,"rainbowRace"],["id","pinnacleRaceSection"],["class","pinnacleRace",4,"ngIf"],[1,"pinnacleRace"],[3,"innerHTML"]],template:function(e,i){1&e&&(h(0,"div",0),D(1,"div",1)(2,"app-animal-deck")(3,"hr"),h(4,"div",2),x(5,C9,4,2,"div",3),x(6,R9,4,2,"div",3),x(7,k9,4,2,"div",4),x(8,P9,4,2,"div",4),x(9,O9,4,2,"div",5),x(10,B9,4,2,"div",5),x(11,U9,4,2,"div",6),x(12,z9,4,2,"div",6),d()()),2&e&&(p(5),m("ngIf",i.areMonoRacesAvailable&&!i.isMonoRaceToggled),p(1),m("ngIf",i.areMonoRacesAvailable&&i.isMonoRaceToggled),p(1),m("ngIf",i.areDuoRacesAvailable&&!i.isDuoRaceToggled),p(1),m("ngIf",i.areDuoRacesAvailable&&i.isDuoRaceToggled),p(1),m("ngIf",i.areRainbowRacesAvailable&&!i.isRainbowRaceToggled),p(1),m("ngIf",i.areRainbowRacesAvailable&&i.isRainbowRaceToggled),p(1),m("ngIf",i.arePinnacleRacesAvailable&&!i.isPinnacleRaceToggled),p(1),m("ngIf",i.arePinnacleRacesAvailable&&i.isPinnacleRaceToggled))},directives:[J0,li,eb],styles:[".allLocalRaces[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.minimizer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.minimizerSideSpacing[_ngcontent-%COMP%]{width:3rem}.inlineDescription[_ngcontent-%COMP%]{width:40%;margin-top:auto;margin-bottom:auto}.raceNameSpacing[_ngcontent-%COMP%]{width:20%}"]}),t})();function $9(t,n){1&t&&(h(0,"span",8),g(1," Will Start Race "),d())}function q9(t,n){if(1&t){const e=ie();h(0,"button",12),A("click",function(){k(e);const r=_(5).$implicit;return _().chooseToStartRace(r)}),g(1,"Choose To Start Race"),d()}}function W9(t,n){if(1&t&&(h(0,"span")(1,"em",7),g(2,"Resting..."),d()()),2&t){const e=_(6);p(1),m("ngbPopover",e.getRestingPopover())}}function X9(t,n){if(1&t&&(h(0,"span"),x(1,q9,2,0,"button",11),x(2,W9,3,1,"span",6),d()),2&t){const e=_(4).$implicit,i=_();p(1),m("ngIf",!i.isSetToRelay(e)&&i.canRelay(e)),p(1),m("ngIf",!i.isSetToRelay(e)&&!i.canRelay(e))}}function Y9(t,n){if(1&t&&(h(0,"div"),x(1,$9,2,0,"span",10),x(2,X9,3,2,"span",6),d()),2&t){const e=_(3).$implicit,i=_();p(1),m("ngIf",i.isCurrentlyRacing(e)),p(1),m("ngIf",!i.isCurrentlyRacing(e))}}function Q9(t,n){1&t&&(h(0,"span",8),g(1," Currently Racing "),d())}function K9(t,n){if(1&t){const e=ie();h(0,"button",14),A("click",function(){k(e);const r=_(4).$implicit;return _().pullFromRace(r)}),g(1," Pull From Race "),d()}}function Z9(t,n){if(1&t){const e=ie();h(0,"button",12),A("click",function(){k(e);const r=_(5).$implicit;return _().relayAnimal(r)}),g(1,"Relay"),d()}}function J9(t,n){if(1&t&&(h(0,"span")(1,"em",7),g(2,"Resting..."),d()()),2&t){const e=_(6);p(1),m("ngbPopover",e.getRestingPopover())}}function eG(t,n){1&t&&(h(0,"span"),g(1,"Set To Relay"),d())}function tG(t,n){if(1&t&&(h(0,"span"),x(1,Z9,2,0,"button",11),x(2,J9,3,1,"span",6),x(3,eG,2,0,"span",6),d()),2&t){const e=_(4).$implicit,i=_();p(1),m("ngIf",!i.isSetToRelay(e)&&i.canRelay(e)),p(1),m("ngIf",!i.isSetToRelay(e)&&!i.canRelay(e)),p(1),m("ngIf",i.isSetToRelay(e))}}function iG(t,n){if(1&t&&(h(0,"div"),x(1,Q9,2,0,"span",10),x(2,K9,2,0,"button",13),x(3,tG,4,3,"span",6),d()),2&t){const e=_(3).$implicit,i=_();p(1),m("ngIf",i.isCurrentlyRacing(e)),p(1),m("ngIf",i.isCurrentlyRacing(e)),p(1),m("ngIf",!i.isCurrentlyRacing(e))}}function nG(t,n){if(1&t&&(h(0,"div"),x(1,Y9,3,2,"div",6),x(2,iG,4,3,"div",6),d()),2&t){const e=_(3);p(1),m("ngIf",!e.enteredEvent()),p(1),m("ngIf",e.enteredEvent())}}function rG(t,n){if(1&t&&(h(0,"div")(1,"em"),g(2),d()()),2&t){const e=_(3);p(2),q("Breed Level ",e.breedLevelRequired," Required")}}function aG(t,n){if(1&t&&(h(0,"div"),D(1,"br"),h(2,"div")(3,"span",7)(4,"span",8),g(5,"Morale:"),d(),g(6),Vt(7,"number"),d(),D(8,"br"),h(9,"span",7)(10,"span",8),g(11,"Energy:"),d(),g(12),Vt(13,"number"),d(),D(14,"br")(15,"div",9),d(),D(16,"br"),x(17,nG,3,2,"div",6),x(18,rG,3,1,"div",6),d()),2&t){const e=_().$implicit,i=_();p(3),m("ngbPopover",i.getMoralePopover(e)),p(3),q(" ",Qt(7,7,i.getMorale(e),"1.2-2"),"%"),p(3),m("ngbPopover",i.getEnergyPopover(e)),p(3),q(" ",Qt(13,10,i.getExhaustion(e),"1.2-2"),"%"),p(3),m("innerHTML",i.getUseCountInformation(e),kt),p(2),m("ngIf",i.canEnterGrandPrix(e)),p(1),m("ngIf",!i.canEnterGrandPrix(e))}}function oG(t,n){if(1&t&&(h(0,"div",4)(1,"span",5),g(2),d(),x(3,aG,19,13,"div",6),d()),2&t){const e=n.$implicit,i=_();p(1),m("ngClass",i.getColorClass(e)),p(1),rt(e.name),p(1),m("ngIf",i.hasEventStarted()&&!i.eventCompleted())}}let sG=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.componentCommunicationService=i,this.lookupService=r,this.utilityService=a,this.organizedAnimals=[]}ngOnInit(){var e=this.globalService.globalVar.animalDecks.find(o=>o.isEventDeck);if(void 0!==e&&(this.deck=e),null!=this.deck)if(this.deck.isCourseOrderActive){for(var i=0;i<this.deck.selectedAnimals.length;i++)if(this.deck.courseTypeOrder.length>i){var r=this.deck.courseTypeOrder[i],a=this.deck.selectedAnimals.find(o=>o.raceCourseType===r);void 0!==a&&this.organizedAnimals.push(a)}}else this.deck.selectedAnimals.forEach(o=>{this.organizedAnimals.push(o)});this.breedLevelRequired=this.getBreedLevelRequired()}getMorale(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:100*i.morale}getExhaustion(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:100*i.exhaustionStatReduction}eventCompleted(){return this.globalService.globalVar.eventRaceData.isGrandPrixCompleted}hasEventStarted(){return!(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime)}enteredEvent(){return this.globalService.globalVar.eventRaceData.isRunning}canEnterGrandPrix(e){var i=!1,r=this.getBreedLevelRequired(),a=this.globalService.globalVar.animals.find(o=>o.type===e.type);return void 0!==a&&a.breedLevel>=r&&(i=!0),i}getBreedLevelRequired(){var e=50,i=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}chooseToStartRace(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==i){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==i?void 0:i.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isCurrentlyRacing=!1}),i.isCurrentlyRacing=!0)}}}isCurrentlyRacing(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.isCurrentlyRacing}isSetToRelay(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.isSetToRelay}canRelay(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.exhaustionStatReduction>.5}relayAnimal(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==i){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==i?void 0:i.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isSetToRelay=!1}),i.isSetToRelay=!0)}}}pullFromRace(e){this.globalService.stopGrandPrixRace()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}getRestingPopover(){return"Racer must be above 50% energy to race"}getMoralePopover(e){var i="",r=this.getMorale(e);if(void 0!==r){var a=.9,o=this.globalService.globalVar.modifiers.find(l=>"exhaustionStatLossModifier"===l.text);void 0!==o&&(a=o.value);var s=1-a;a=1-(s*=1/(r/100)),i="Your current Morale is "+r.toFixed(2)+"%. Your energy will reduce by "+(100*(1-a)).toFixed(2)+"% every time you run out of stamina."}return i}getEnergyPopover(e){return""+"Your current Energy is "+this.getExhaustion(e).toFixed(2)+"%. Your stats are reduced to this amount while racing in the grand prix."}getUseCountInformation(e){var i="<br/><br/>",r=this.globalService.globalVar.eventRaceData.eventAbilityData,a=this.globalService.globalVar.animals.find(o=>o.type===e.type);if(null!=a)return a.type===L.Horse&&"Inspiration"===a.ability.name&&(i="Inspiration Relay Count: "+r.inspirationUseCount+"<br/><br/>"),a.type===L.Cheetah&&"On The Hunt"===a.ability.name&&(i="On The Hunt Use Count: "+r.onTheHuntUseCount+" / "+r.onTheHuntUseCap+"<br/><br/>"),a.type===L.Goat&&(i="Deep Breathing Relay Count: "+r.deepBreathingUseCount+" / "+r.deepBreathingUseCap+"<br/>",i+="Sure-footed"===a.ability.name?"Sure-footed Use Count: "+r.sureFootedUseCount+" / "+r.sureFootedUseCap+"<br/>":"<br/>"),a.type===L.Gecko&&"Night Vision"===a.ability.name&&(i="Night Vision Use Count: "+r.nightVisionUseCount+" / "+r.nightVisionUseCap+"<br/><br/>"),a.type===L.Dolphin&&("Flowing Current"===a.ability.name&&(i="Flowing Current Relay Count: "+r.flowingCurrentUseCount+"<br/><br/>"),"Navigator"===a.ability.name&&(i="Navigator Relay Count: "+r.navigatorUseCount+"<br/><br/>")),a.type===L.Octopus&&(i="Big Brain Relay Count: "+r.bigBrainUseCount+" / "+r.bigBrainUseCap+"<br/><br/>"),a.type===L.Whale&&"Storing Power"===a.ability.name&&(i="Storing Power Use Count: "+r.storingPowerUseCount+" / "+r.storingPowerUseCap+"<br/><br/>"),a.type===L.Penguin&&"Quick Toboggan"===a.ability.name&&(i="Quick Toboggan Use Count: "+r.quickTobogganUseCount+" / "+r.quickTobogganUseCap+"<br/><br/>"),a.type===L.Caribou&&(i="Herd Mentality Relay Count: "+r.herdMentalityUseCount+" / "+r.herdMentalityUseCap+"<br/>",i+="Special Delivery Relay Count: "+r.specialDeliveryUseCount+" / "+r.specialDeliveryUseCap),this.utilityService.getSanitizedHtml(i)}goToDeckView(){this.componentCommunicationService.setNewView(Pt.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Pn),V(Ti),V(Rn))},t.\u0275cmp=Tt({type:t,selectors:[["app-event-animal-deck"]],decls:7,vars:2,consts:[[1,"deckName"],[1,"clickableText",3,"click"],[1,"flex"],["class","eventAnimal",4,"ngFor","ngForOf"],[1,"eventAnimal"],[1,"coloredText",3,"ngClass"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"keyword"],[3,"innerHTML"],["class","keyword",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","keyword",3,"click",4,"ngIf"],[1,"keyword",3,"click"]],template:function(e,i){1&e&&(h(0,"div")(1,"div",0)(2,"strong",1),A("click",function(){return i.goToDeckView()}),g(3),d()(),D(4,"br"),h(5,"div",2),x(6,oG,4,3,"div",3),d()()),2&e&&(p(3),rt(i.deck.name),p(3),m("ngForOf",i.organizedAnimals))},directives:[Cn,cn,li,Qr],pipes:[Qa],styles:[".flex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.deckName[_ngcontent-%COMP%]{text-align:center}.eventAnimal[_ngcontent-%COMP%]{flex:1}"]}),t})();const lG=["loadingModal"];function cG(t,n){1&t&&(h(0,"p",6),g(1,"The Grand Prix is currently under construction. "),D(2,"br")(3,"br"),h(4,"em"),g(5,"I'm fixing a few bugs and making some improvements related to the Grand Prix but it will reopen soon!"),d()())}function uG(t,n){if(1&t){const e=ie();h(0,"div",14),A("click",function(){k(e);const r=_(3),a=ot(9);return r.selectEventRace(a)}),g(1),D(2,"br"),d()}if(2&t){const e=_(3);m("ngbPopover",ot(7)),p(1),q("Bonus Time: ",e.bonusTime," ")}}function dG(t,n){1&t&&(h(0,"h6",20),g(1,"View Race"),d())}function hG(t,n){1&t&&(h(0,"h6",24)(1,"em"),g(2,"Please Wait -- Offline Time Is Calculating"),d()())}function fG(t,n){1&t&&(h(0,"h6",20),g(1,"Start"),d())}function pG(t,n){1&t&&(h(0,"h6")(1,"em"),g(2,"Completed!"),d()())}function gG(t,n){if(1&t&&(h(0,"div",25),g(1),d()),2&t){const e=_(4);p(1),q(" ",e.popoverText," ")}}const vG=function(t){return{raceNotAllowed:t}};function mG(t,n){if(1&t){const e=ie();h(0,"div",15)(1,"div")(2,"span",16),g(3,"Grand Prix "),h(4,"strong"),g(5),d()(),D(6,"br"),h(7,"span",17),A("click",function(){k(e);const r=_(3),a=ot(3);return r.openRewardsModal(a)}),g(8),d(),D(9,"br")(10,"br"),h(11,"div",18)(12,"div",19),A("click",function(){k(e);const r=_(3),a=ot(9);return r.selectEventRace(a)}),h(13,"span")(14,"span",20),g(15,"Forecast:"),d(),g(16),d(),D(17,"br"),g(18),Vt(19,"number"),D(20,"br"),x(21,dG,2,0,"h6",21),x(22,hG,3,0,"h6",22),x(23,fG,2,0,"h6",21),x(24,pG,3,0,"h6",9),d()(),x(25,gG,2,1,"ng-template",null,23,dt),d()()}if(2&t){const e=ot(26),i=_(3);p(5),rt(i.raceRank),p(3),ki("",i.globalService.globalVar.eventRaceData.remainingRewards," / ",i.globalService.globalVar.eventRaceData.totalRewards," rewards remaining"),p(4),m("ngClass",yt(15,vG,i.grandPrixData.isCatchingUp))("ngbPopover",e)("disablePopover",""===i.popoverText),p(4),q(" ",void 0===i.grandPrixData.weatherCluster?"Unknown":i.lookupService.getWeatherClusterFromEnum(i.grandPrixData.weatherCluster),""),p(2),q(" ",Qt(19,12,i.remainingMeters,"1.")," Meters Remaining "),p(3),m("ngIf",i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted&&!i.grandPrixData.isCatchingUp),p(1),m("ngIf",i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted&&i.grandPrixData.isCatchingUp),p(1),m("ngIf",!i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted),p(1),m("ngIf",!i.grandPrixData.isRunning&&i.grandPrixData.isGrandPrixCompleted)}}function bG(t,n){if(1&t){const e=ie();h(0,"div")(1,"label",26),g(2,"Your animals will automatically relay the segment after they lose energy and it is below "),d(),h(3,"input",27),A("ngModelChange",function(r){return k(e),_(3).relayEnergy=r})("change",function(){return k(e),_(3).updateRelayEnergy()}),d(),g(4," %. "),h(5,"em"),g(6,"Must be between 50% and 99%."),d(),D(7,"br"),h(8,"span",28)(9,"label")(10,"input",29),A("ngModelChange",function(r){return k(e),_(3).doNotAutoRelayBelowEnergyFloor=r})("input",function(){return k(e),_(3).doNotAutoRelayBelowEnergyFloorToggle()}),d(),h(11,"span"),g(12,"Do not relay to animals below "),h(13,"strong"),g(14),d(),g(15,"% energy."),d()()()()}if(2&t){const e=_(3);p(3),m("ngModel",e.relayEnergy),p(7),m("ngModel",e.doNotAutoRelayBelowEnergyFloor),p(4),rt(e.relayEnergy)}}function _G(t,n){1&t&&(h(0,"div",32),g(1," None "),d())}function yG(t,n){if(1&t&&(h(0,"td")(1,"span",20),g(2),d(),g(3),d()),2&t){const e=n.$implicit;p(2),rt(e.name),p(1),q(": ",e.amount,"")}}function wG(t,n){if(1&t&&(h(0,"tr"),x(1,yG,4,2,"td",33),d()),2&t){const e=n.$implicit;p(1),m("ngForOf",e)}}function CG(t,n){if(1&t&&(h(0,"div",32)(1,"table"),x(2,wG,2,1,"tr",33),d()()),2&t){const e=_(4);p(2),m("ngForOf",e.rewardRows)}}function SG(t,n){if(1&t&&(h(0,"div"),D(1,"br")(2,"br"),h(3,"div",30)(4,"span",16),g(5,"Previous Grand Prix Rewards"),d(),x(6,_G,2,0,"div",31),x(7,CG,3,1,"div",31),d()()),2&t){const e=_(3);p(6),m("ngIf",0===e.previousRaceRewardList.length),p(1),m("ngIf",e.previousRaceRewardList.length>0)}}function TG(t,n){if(1&t){const e=ie();h(0,"div")(1,"div"),g(2),D(3,"br"),x(4,uG,3,2,"div",10),h(5,"button",11),A("click",function(){k(e);const r=_(2),a=ot(5);return r.openInfoModal(a)}),g(6,"Grand Prix Info"),d(),h(7,"button",12),A("click",function(){return k(e),_(2).goToTokenShop()}),g(8,"Token Shop"),d(),D(9,"br")(10,"br"),d(),D(11,"br"),x(12,mG,27,17,"div",13),D(13,"br"),h(14,"div"),D(15,"app-event-animal-deck"),d(),D(16,"br"),x(17,bG,16,3,"div",9),x(18,SG,8,2,"div",9),d()}if(2&t){const e=_(2);p(2),ki(" ",e.eventRaceNotice," ",e.eventRaceTimer," "),p(2),m("ngIf",""!==e.bonusTime),p(8),m("ngIf",e.isEventRaceAvailable),p(5),m("ngIf",e.isEventRaceAvailable),p(1),m("ngIf",null!=e.previousRaceRewardList&&!e.isEventRaceAvailable)}}function RG(t,n){1&t&&(h(0,"div"),g(1," Nothing here yet, but maybe as you climb the circuit ranks you might be invited to a new type of race. "),d())}function DG(t,n){if(1&t&&(h(0,"div",7),D(1,"div",8),x(2,TG,19,6,"div",9),x(3,RG,2,0,"div",9),d()),2&t){const e=_();p(2),m("ngIf",e.grandPrixUnlocked),p(1),m("ngIf",!e.grandPrixUnlocked)}}function xG(t,n){if(1&t){const e=ie();h(0,"div",34)(1,"div",35)(2,"h4",36),g(3,"Grand Prix Rewards"),d(),h(4,"button",37),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",38)(7,"div"),g(8),Vt(9,"number"),Vt(10,"number"),D(11,"br")(12,"br"),g(13),Vt(14,"number"),Vt(15,"number"),D(16,"br")(17,"br")(18,"div",39)(19,"div",39)(20,"br")(21,"div",39)(22,"div",39),d()(),h(23,"div",40)(24,"button",41),A("click",function(){return k(e).$implicit.dismiss()}),g(25,"Close"),d()()()}if(2&t){const e=_();p(8),mv(" The further you go in the Grand Prix invitational, the more rewards you'll receive. Every ",Qt(9,10,e.coinRewardInterval,"1.")," meters, you'll receive ",e.coinRewardAmount," Coins. Every ",Qt(10,13,e.renownRewardInterval,"1.")," meters, you'll receive ",e.renownRewardAmount," Renown. Also, you'll be able to obtain rare tokens that can be spent on unique upgrades. "),p(5),ki(" Distance Covered: ",Qt(14,16,(e.grandPrixData.totalDistance-e.remainingMeters).toFixed(0),"1.")," / ",Qt(15,19,e.grandPrixData.totalDistance,"1.")," "),p(5),m("innerHTML",e.getGrandPrixCoinRewardsPopover(),kt),p(1),m("innerHTML",e.getGrandPrixRenownRewardsPopover(),kt),p(2),m("innerHTML",e.getGrandPrixFoodRewardsPopover(),kt),p(1),m("innerHTML",e.getGrandPrixTokenRewardsPopover(),kt)}}function kG(t,n){if(1&t){const e=ie();h(0,"div",34)(1,"div",35)(2,"h4",36),g(3,"Grand Prix Info"),d(),h(4,"button",37),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",38)(7,"div"),g(8," You've been invited to the "),h(9,"span",20),g(10,"Grand Prix"),d(),g(11," invitational, which is a marathon style race that runs for 51 hours twice a week. You can start the race at any time during the start and stop point of the Grand Prix. "),h(12,"b"),g(13,"It will run on its own in the background -- you don't have to watch your animals race for it to run."),d(),g(14," You have the option to view the race as desired by clicking the race. The weekly start and end times are: "),D(15,"br")(16,"br"),h(17,"span",20),g(18,"Weekday Marathon"),d(),g(19),D(20,"br"),h(21,"span",20),g(22,"Weekend Marathon"),d(),g(23),D(24,"br")(25,"br"),g(26),D(27,"br")(28,"br"),h(29,"span",20),g(30,"Morale"),d(),g(31," - This affects how much your stats reduce when running out of stamina. By default, your stats will reduce by 10% while Morale is at 100%. Morale can range from 50% to 300%. Gain Morale by completing segments and Bursting. Lose Morale when you stumble or lose focus. "),D(32,"br"),h(33,"span",20),g(34,"Energy"),d(),g(35," - The percent your stats are currently at from their maximum. This is increased slightly over time while a racer is not racing. "),D(36,"br"),h(37,"span",20),g(38,"*Note that these values have no impact on any race other than the Grand Prix."),d(),D(39,"br")(40,"br"),g(41," Maintain your morale and energy to get the most out of your racing animals. You can Relay to another animal in your event deck at any point, although the Relay will only occur after the completion of the current race leg. "),D(42,"br")(43,"br"),g(44," Race as far as you can to gain "),h(45,"span",42),g(46,"Coins"),d(),g(47,", "),h(48,"span",43),g(49,"Renown"),d(),g(50,", and the unique resource "),h(51,"span",42),g(52,"Tokens"),d(),g(53,". Click '"),h(54,"em"),g(55,"Rewards"),d(),g(56,"' to track your progress on gaining rewards. "),d()(),h(57,"div",40)(58,"button",41),A("click",function(){return k(e).$implicit.dismiss()}),g(59,"Close"),d()()()}if(2&t){const e=_();p(19),q(" - ",e.weekDayGrandPrixTimeSpan," "),p(4),q(" - ",e.weekEndGrandPrixTimeSpan," "),p(3),q(" To run in the Grand Prix, animals must be at least Breed Level ",e.requiredBreedLevel,". The animals in your event deck will be shown below along with their current morale and energy. ")}}function MG(t,n){1&t&&(h(0,"div",25),g(1," Bonus Time is accrued from effects that delay competitors or extend the length of a race. Once the Grand Prix event time ends, any bonus time will continue to play out before your entry to the Grand Prix ends. "),d())}function AG(t,n){1&t&&(h(0,"div",25),g(1," Loading... "),d())}let PG=(()=>{class t{constructor(e,i,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.raceLogicService=a,this.sanitizer=o,this.modalService=s,this.componentCommunicationService=l,this.utilityService=c,this.raceSelected=new bt,this.popoverText="",this.cannotRace=!1,this.eventRaceReleased=!0,this.raceRank="",this.eventRaceNotice="",this.eventRaceTimer="",this.bonusTime="",this.grandPrixUnlocked=!1,this.relayEnergy=50,this.doNotAutoRelayBelowEnergyFloor=!1,this.doNotAutoRelayBelowEnergyFloorToggle=()=>{this.doNotAutoRelayBelowEnergyFloor=!this.doNotAutoRelayBelowEnergyFloor,this.globalService.globalVar.doNotRelayBelowEnergyFloor=this.doNotAutoRelayBelowEnergyFloor}}ngOnInit(){var e=this;this.grandPrixData=this.globalService.globalVar.eventRaceData,this.previousRaceRewardList=this.globalService.globalVar.previousEventRewards,this.relayEnergy=this.globalService.globalVar.relayEnergyFloor,this.doNotAutoRelayBelowEnergyFloor=this.globalService.globalVar.doNotRelayBelowEnergyFloor,this.grandPrixUnlocked=this.lookupService.isItemUnlocked("grandPrix"),this.weekDayGrandPrixTimeSpan=this.lookupService.getWeekDayGrandPrixTimeSpan(),this.weekEndGrandPrixTimeSpan=this.lookupService.getWeekEndGrandPrixTimeSpan(),this.requiredBreedLevel=this.lookupService.getBreedLevelRequiredForGrandPrix(),this.popoverText=this.getForecastPopoverText(),this.raceRank=this.grandPrixData.rank,this.globalService.globalVar.settings.get("useNumbersForCircuitRank")&&(this.raceRank=this.utilityService.getNumericValueOfCircuitRank(this.raceRank).toString());var i=this.globalService.getGrandPrixRacingAnimal();if(!this.globalService.globalVar.eventRaceData.animalData.some(u=>u.isCurrentlyRacing)){var r=this.globalService.globalVar.eventRaceData.animalData.find(u=>u.associatedAnimalType==i.type);void 0!==r&&(r.isCurrentlyRacing=!0)}var a=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,o=this.globalService.globalVar.modifiers.find(u=>"grandPrixCoinRewardModifier"===u.text);null!=o&&(this.coinRewardAmount=o.value*a);var s=this.globalService.globalVar.modifiers.find(u=>"grandPrixRenownRewardModifier"===u.text);null!=s&&(this.renownRewardAmount=s.value);var l=this.globalService.globalVar.modifiers.find(u=>"metersPerCoinsGrandPrixModifier"===u.text);null!=l&&(this.coinRewardInterval=l.value*a);var c=this.globalService.globalVar.modifiers.find(u=>"metersPerRenownGrandPrixModifier"===u.text);null!=c&&(this.renownRewardInterval=c.value*a),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=Br(function*(f){e.setupEventTime(),e.grandPrixData=e.globalService.globalVar.eventRaceData,e.previousRaceRewardList=e.globalService.globalVar.previousEventRewards,null!=l&&(e.coinRewardInterval=l.value*e.globalService.globalVar.eventRaceData.rankDistanceMultiplier),null!=c&&(e.renownRewardInterval=c.value*e.globalService.globalVar.eventRaceData.rankDistanceMultiplier),void 0!==e.grandPrixData&&(e.raceRank=e.grandPrixData.rank,e.globalService.globalVar.settings.get("useNumbersForCircuitRank")&&(e.raceRank=e.utilityService.getNumericValueOfCircuitRank(e.raceRank).toString())),e.previousRaceRewardList.length>0&&e.setupDisplayRewards(),e.remainingMeters=e.globalService.globalVar.eventRaceData.totalDistance-e.globalService.globalVar.eventRaceData.distanceCovered,null!=e.globalService.globalVar.eventRaceData&&null!=e.globalService.globalVar.eventRaceData.currentRaceSegment&&(e.grandPrixData.isCatchingUp=e.globalService.globalVar.eventRaceData.segmentTimeCounter>=e.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60*2)});return function(f){return u.apply(this,arguments)}}())}selectEventRace(e){if(!1===this.globalService.globalVar.eventRaceData.isRunning){var i=this.globalService.getGrandPrixRacingAnimal();if(null==i.type)return void alert("None of the animals in your event deck are capable of entering the Grand Prix. Swap to new animals or make adjustments to your existing animals to meet the criteria.");var r=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===i.type);void 0!==r&&(r.isCurrentlyRacing=!0);var a=this.globalService.shouldShowSlowSegmentWarning(i);if(!this.lookupService.slowSegmentWarning(a))return;this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(i),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(i),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}!this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&!this.globalService.globalVar.eventRaceData.isCatchingUp&&this.raceSelected.emit(this.globalService.globalVar.eventRaceData.currentRaceSegment)}setupEventTime(){var e=this.globalService.getTimeToEventRace();if(e>0){this.isEventRaceAvailable=this.globalService.globalVar.eventRaceData.bonusTime>0,this.eventRaceNotice="Next Grand Prix available in";var a=e-60*(i=Math.floor(e/3600))*60-60*(r=Math.floor(e/60-60*i)),o=Math.floor(a).toString(),s=i.toString(),l=r.toString();i<10&&(s=i<1||i>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}else{var i,r,c=this.globalService.getRemainingEventRaceTime();if(c>0)this.eventRaceNotice="Grand Prix ends in",this.isEventRaceAvailable=!0,a=c-60*(i=Math.floor(c/3600))*60-60*(r=Math.floor(c/60-60*i)),s=i.toString(),l=r.toString(),o=Math.floor(a).toString(),i<10&&(s=i<1||i>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}this.bonusTime=this.globalService.globalVar.eventRaceData.bonusTime>0?this.utilityService.convertSecondsToHHMMSS(this.globalService.globalVar.eventRaceData.bonusTime):""}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openInfoModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openLoadingModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}getGrandPrixFoodRewardsPopover(){var e="";if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank)>1)return e;var o=25e3,s=5e4,l=75e3,c=1e5,u=25e4,f=5e5,v=75e4,b=1e6,y=100;return e+=this.globalService.globalVar.eventRaceData.distanceCovered>=o?"<span class='crossed'>"+o.toLocaleString()+" meters - +"+y+" Strawberries</span><br/>":o.toLocaleString()+" meters - +"+y+" Strawberries<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=s?"<span class='crossed'>"+s.toLocaleString()+" meters - +"+y+" Apples</span><br/>":s.toLocaleString()+" meters - +"+y+" Apples<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=l?"<span class='crossed'>"+l.toLocaleString()+" meters - +"+y+" Oranges</span><br/>":l.toLocaleString()+" meters - +"+y+" Oranges<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=c?"<span class='crossed'>"+c.toLocaleString()+" meters - +5 Mangoes</span><br/>":c.toLocaleString()+" meters - +"+y+" Mangoes<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=u?"<span class='crossed'>"+u.toLocaleString()+" meters - +"+y+" Turnips</span><br/>":u.toLocaleString()+" meters - +"+y+" Turnips<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=f?"<span class='crossed'>"+f.toLocaleString()+" meters - +"+y+" Bananas</span><br/>":f.toLocaleString()+" meters - +"+y+" Bananas<br/>",(e+=this.globalService.globalVar.eventRaceData.distanceCovered>=v?"<span class='crossed'>"+v.toLocaleString()+" meters - +"+y+" Carrots</span><br/>":v.toLocaleString()+" meters - +"+y+" Carrots<br/>")+(this.globalService.globalVar.eventRaceData.distanceCovered>=b?"<span class='crossed'>"+b.toLocaleString()+" meters - +10 Mangoes</span><br/>":b.toLocaleString()+" meters - +10 Mangoes<br/>")}getGrandPrixRenownRewardsPopover(){var r;return r=this.globalService.globalVar.eventRaceData.totalDistance/this.renownRewardInterval,Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/this.renownRewardInterval)*this.renownRewardAmount+"/"+r*this.renownRewardAmount+" Renown obtained"}getGrandPrixCoinRewardsPopover(){var r;return r=this.globalService.globalVar.eventRaceData.totalDistance/this.coinRewardInterval,(Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/this.coinRewardInterval)*this.coinRewardAmount).toLocaleString()+"/"+(r*this.coinRewardAmount).toLocaleString()+" Coins obtained"}getGrandPrixTokenRewardsPopover(){var e="",i=this.lookupService.getGrandPrixTokenRewards(),r=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,a=5e7,o=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken1MeterModifier"===S.text);null!=o&&(a=o.value);var s=i[0],l=5e7,c=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken2MeterModifier"===S.text);null!=c&&(l=c.value);var u=i[1],f=5e7,v=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken3MeterModifier"===S.text);null!=v&&(f=v.value);var b=i[2],y=5e7,C=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken4MeterModifier"===S.text);null!=C&&(y=C.value);var T=i[3],M=this.globalService.globalVar.eventRaceData.distanceCovered;return e+=M>=a*r?"<span class='crossed'>"+s+"</span>\n":"<span>"+s+"</span>\n",e+=M>=l*r?"<span class='crossed'>"+u+"</span>\n":"<span>"+u+"</span>\n",e+=M>=f*r?"<span class='crossed'>"+b+"</span>\n":"<span>"+b+"</span>\n",this.sanitizer.sanitize(_i.HTML,this.sanitizer.bypassSecurityTrustHtml(e+=M>=y*r?"<span class='crossed'>"+T+"</span>\n":"<span>"+T+"</span>\n"))}getForecastPopoverText(){return this.lookupService.getWeatherClusterDescription(this.grandPrixData.weatherCluster)}goToTokenShop(){this.componentCommunicationService.setShopView(Pt.shop,Va.token)}setupDisplayRewards(){if(this.rewardCells=[],this.rewardRows=[],null!=this.previousRaceRewardList){for(var i=1;i<=this.previousRaceRewardList.length;i++)this.rewardCells.push({name:this.previousRaceRewardList[i-1].name,amount:this.previousRaceRewardList[i-1].amount}),i%4==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}updateRelayEnergy(){this.relayEnergy<50&&(this.relayEnergy=50),this.relayEnergy>99&&(this.relayEnergy=99),null!=this.globalService.globalVar.eventRaceData&&(this.globalService.globalVar.relayEnergyFloor=this.relayEnergy)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(An),V(Ti),V(zf),V(hs),V(io),V(Pn),V(Rn))},t.\u0275cmp=Tt({type:t,selectors:[["app-event-view"]],viewQuery:function(e,i){if(1&e&&Sr(lG,7),2&e){let r;yi(r=wi())&&(i.loadingContent=r.first)}},outputs:{raceSelected:"raceSelected"},decls:10,vars:2,consts:[["class","centered",4,"ngIf"],["class","eventViewDiv centered",4,"ngIf"],["grandPrixRewardModal",""],["grandPrixInfoModal",""],["bonusTimeContent",""],["loadingModal",""],[1,"centered"],[1,"eventViewDiv","centered"],[1,"eventRaceHeader"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass","class","clickableText",3,"ngbPopover","click",4,"ngIf"],["type","button",1,"rightSpaced",3,"click"],[3,"click"],["id","grandPrix",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngbPopover","click"],["id","grandPrix"],[1,"s4Heading"],[1,"helpText",3,"click"],[1,"raceDescription"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText","eventRaceDescription",3,"ngClass","ngbPopover","disablePopover","click"],[1,"keyword"],["class","keyword",4,"ngIf"],["class","raceCatchingUp",4,"ngIf"],["popContent",""],[1,"raceCatchingUp"],[1,"popoverClass"],["for","relay-energy"],["id","relay-energy","name","relay-energy","type","text","minlength","2","maxlength","2",1,"spaced","energyInput",3,"ngModel","ngModelChange","change"],["triggers","mouseenter:mouseleave",1,"checkboxOption"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],[1,"results"],["class","rewards",4,"ngIf"],[1,"rewards"],[4,"ngFor","ngForOf"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"],[1,"resourceKeyword"],[1,"progressionKeyword"]],template:function(e,i){1&e&&(x(0,cG,6,0,"p",0),x(1,DG,4,2,"div",1),x(2,xG,26,22,"ng-template",null,2,dt),x(4,kG,60,3,"ng-template",null,3,dt),x(6,MG,2,0,"ng-template",null,4,dt),x(8,AG,2,0,"ng-template",null,5,dt)),2&e&&(m("ngIf",!i.eventRaceReleased),p(1),m("ngIf",i.eventRaceReleased))},directives:[li,Qr,cn,sG,Lo,mf,Us,Uo,Ho,rc,Cn],pipes:[Qa],styles:[".eventRace[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.centered[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.energyInput[_ngcontent-%COMP%]{width:2rem}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.eventRaceDescription[_ngcontent-%COMP%]{width:40%;margin:auto}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.raceCatchingUp[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}table[_ngcontent-%COMP%]{table-layout:fixed;width:60%;height:100%;text-align:center;margin-left:auto;margin-right:auto}"]}),t})();function VG(t,n){if(1&t){const e=ie();h(0,"div",12)(1,"div",13)(2,"div",14)(3,"span",15)(4,"button",16),A("click",function(){return k(e),_(2).toggleRace("noviceRaceToggled")}),g(5,"-"),d()(),h(6,"span",17),g(7,"Novice Track"),d(),D(8,"span",15),d(),D(9,"br"),h(10,"h6",18),A("click",function(){k(e);const r=_(2),a=ot(7);return r.openRewardsModal(a)}),g(11),d(),h(12,"app-race-description",19),A("click",function(){k(e);const r=_(2);return r.selectTrackRace(r.noviceTrackRace)}),d()(),D(13,"hr"),d()}if(2&t){const e=_(2);p(11),ki(" ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),p(1),m("race",e.noviceTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function IG(t,n){if(1&t){const e=ie();h(0,"div",12)(1,"div",13)(2,"div",14)(3,"span",15)(4,"button",16),A("click",function(){return k(e),_(2).toggleRace("noviceRaceToggled")}),g(5,"+"),d()(),h(6,"span",20),g(7,"Novice Track"),d(),h(8,"h6",18),A("click",function(){k(e);const r=_(2),a=ot(7);return r.openRewardsModal(a)}),g(9),d(),h(10,"div",21)(11,"app-race-description",22),A("click",function(){k(e);const r=_(2);return r.selectTrackRace(r.noviceTrackRace)}),d()()()(),D(12,"hr"),d()}if(2&t){const e=_(2);p(9),ki(" ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),p(2),m("race",e.noviceTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)("condensedVersion",!0)}}function OG(t,n){if(1&t){const e=ie();h(0,"div",23)(1,"div",24)(2,"div",14)(3,"span",15)(4,"button",16),A("click",function(){return k(e),_(2).toggleRace("intermediateRaceToggled")}),g(5,"-"),d()(),h(6,"span",17),g(7,"Intermediate Track"),d(),D(8,"span",15),d(),D(9,"br"),h(10,"h6",18),A("click",function(){k(e);const r=_(2),a=ot(9);return r.openRewardsModal(a)}),g(11),d(),h(12,"app-race-description",19),A("click",function(){k(e);const r=_(2);return r.selectTrackRace(r.intermediateTrackRace)}),d()(),D(13,"hr"),d()}if(2&t){const e=_(2);p(11),ki(" ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),p(1),m("race",e.intermediateTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function EG(t,n){if(1&t){const e=ie();h(0,"div",23)(1,"div",24)(2,"div",14)(3,"span",15)(4,"button",16),A("click",function(){return k(e),_(2).toggleRace("intermediateRaceToggled")}),g(5,"+"),d()(),h(6,"span",20),g(7,"Intermediate Track"),d(),h(8,"h6",18),A("click",function(){k(e);const r=_(2),a=ot(9);return r.openRewardsModal(a)}),g(9),d(),h(10,"div",21)(11,"app-race-description",22),A("click",function(){k(e);const r=_(2);return r.selectTrackRace(r.intermediateTrackRace)}),d()()()(),D(12,"hr"),d()}if(2&t){const e=_(2);p(9),ki(" ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),p(2),m("race",e.intermediateTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)("condensedVersion",!0)}}function NG(t,n){if(1&t){const e=ie();h(0,"div",25)(1,"div",26)(2,"div",14)(3,"span",15)(4,"button",16),A("click",function(){return k(e),_(2).toggleRace("masterRaceToggled")}),g(5,"-"),d()(),h(6,"span",17),g(7,"Master Track"),d(),D(8,"span",15),d(),D(9,"br"),h(10,"h6",18),A("click",function(){k(e);const r=_(2),a=ot(11);return r.openRewardsModal(a)}),g(11),d(),h(12,"app-race-description",19),A("click",function(){k(e);const r=_(2);return r.selectTrackRace(r.masterTrackRace)}),d()(),D(13,"hr"),d()}if(2&t){const e=_(2);p(11),ki(" ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),p(1),m("race",e.masterTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function BG(t,n){if(1&t){const e=ie();h(0,"div",25)(1,"div",26)(2,"div",14)(3,"span",15)(4,"button",16),A("click",function(){return k(e),_(2).toggleRace("masterRaceToggled")}),g(5,"+"),d()(),h(6,"span",20),g(7,"Master Track"),d(),h(8,"h6",18),A("click",function(){k(e);const r=_(2),a=ot(11);return r.openRewardsModal(a)}),g(9),d(),h(10,"div",21)(11,"app-race-description",22),A("click",function(){k(e);const r=_(2);return r.selectTrackRace(r.masterTrackRace)}),d()()()(),D(12,"hr"),d()}if(2&t){const e=_(2);p(9),ki(" ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),p(2),m("race",e.masterTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)("condensedVersion",!0)}}function FG(t,n){if(1&t){const e=ie();h(0,"div",27)(1,"div",28)(2,"div",14)(3,"span",15)(4,"button",16),A("click",function(){return k(e),_(2).toggleRace("legacyRaceToggled")}),g(5,"-"),d()(),h(6,"span",17),g(7,"Legacy Track"),d(),D(8,"span",15),d(),D(9,"br"),h(10,"h6",18),A("click",function(){k(e);const r=_(2),a=ot(13);return r.openRewardsModal(a)}),g(11),d(),h(12,"app-race-description",19),A("click",function(){k(e);const r=_(2);return r.selectTrackRace(r.legacyTrackRace)}),d()(),D(13,"hr"),d()}if(2&t){const e=_(2);p(11),ki(" ",e.selectedAnimal.allTrainingTracks.legacyTrack.totalRewards-e.selectedAnimal.allTrainingTracks.legacyTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.legacyTrack.totalRewards," rewards remaining"),p(1),m("race",e.legacyTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function LG(t,n){if(1&t){const e=ie();h(0,"div",27)(1,"div",28)(2,"div",14)(3,"span",15)(4,"button",16),A("click",function(){return k(e),_(2).toggleRace("legacyRaceToggled")}),g(5,"+"),d()(),h(6,"span",20),g(7,"Legacy Track"),d(),h(8,"h6",18),A("click",function(){k(e);const r=_(2),a=ot(13);return r.openRewardsModal(a)}),g(9),d(),h(10,"div",21)(11,"app-race-description",22),A("click",function(){k(e);const r=_(2);return r.selectTrackRace(r.legacyTrackRace)}),d()()()(),D(12,"hr"),d()}if(2&t){const e=_(2);p(9),ki(" ",e.selectedAnimal.allTrainingTracks.legacyTrack.totalRewards-e.selectedAnimal.allTrainingTracks.legacyTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.legacyTrack.totalRewards," rewards remaining"),p(2),m("race",e.legacyTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)("condensedVersion",!0)}}function UG(t,n){if(1&t&&(h(0,"div",7),x(1,VG,14,5,"div",8),x(2,IG,13,6,"div",8),x(3,OG,14,5,"div",9),x(4,EG,13,6,"div",9),x(5,NG,14,5,"div",10),x(6,BG,13,6,"div",10),x(7,FG,14,5,"div",11),x(8,LG,13,6,"div",11),d()),2&t){const e=_();p(1),m("ngIf",!e.isNoviceRaceToggled),p(1),m("ngIf",e.isNoviceRaceToggled),p(1),m("ngIf",e.intermediateTrackAvailable&&!e.isIntermediateRaceToggled),p(1),m("ngIf",e.intermediateTrackAvailable&&e.isIntermediateRaceToggled),p(1),m("ngIf",e.masterTrackAvailable&&!e.isMasterRaceToggled),p(1),m("ngIf",e.masterTrackAvailable&&e.isMasterRaceToggled),p(1),m("ngIf",e.legacyTrackAvailable&&!e.isLegacyRaceToggled),p(1),m("ngIf",e.legacyTrackAvailable&&e.isLegacyRaceToggled)}}function HG(t,n){if(1&t){const e=ie();h(0,"div",29)(1,"div",30)(2,"h4",31),g(3,"Novice Rewards"),d(),h(4,"button",32),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",33)(7,"div",34),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",35),d()(),h(12,"div",36)(13,"button",37),A("click",function(){return k(e).$implicit.dismiss()}),g(14,"Close"),d()()()}if(2&t){const e=_();p(11),m("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.novice),kt)}}function GG(t,n){if(1&t){const e=ie();h(0,"div",29)(1,"div",30)(2,"h4",31),g(3,"Intermediate Rewards"),d(),h(4,"button",32),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",33)(7,"div",34),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",35),d()(),h(12,"div",36)(13,"button",37),A("click",function(){return k(e).$implicit.dismiss()}),g(14,"Close"),d()()()}if(2&t){const e=_();p(11),m("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.intermediate),kt)}}function zG(t,n){if(1&t){const e=ie();h(0,"div",29)(1,"div",30)(2,"h4",31),g(3,"Master Rewards"),d(),h(4,"button",32),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",33)(7,"div",34),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",35),d()(),h(12,"div",36)(13,"button",37),A("click",function(){return k(e).$implicit.dismiss()}),g(14,"Close"),d()()()}if(2&t){const e=_();p(11),m("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.master),kt)}}function jG(t,n){if(1&t){const e=ie();h(0,"div",29)(1,"div",30)(2,"h4",31),g(3,"Legacy Rewards"),d(),h(4,"button",32),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",33)(7,"div",34),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",35),d()(),h(12,"div",36)(13,"button",37),A("click",function(){return k(e).$implicit.dismiss()}),g(14,"Close"),d()()()}if(2&t){const e=_();p(11),m("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.legacy),kt)}}let $G=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.lookupService=i,this.sanitizer=r,this.modalService=a,this.componentCommunicationService=o,this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.legacyTrackAvailable=!1,this.raceSelected=new bt,this.showRace=!1,this.isNoviceRaceToggled=!1,this.isIntermediateRaceToggled=!1,this.isMasterRaceToggled=!1,this.isLegacyRaceToggled=!1,this.trackRaceTypeEnum=Li}ngOnInit(){this.noviceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Li.novice),this.intermediateTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Li.intermediate),this.masterTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Li.master),this.legacyTrackRace=this.globalService.generateLegacyTrackRace(this.selectedAnimal,Li.legacy),this.intermediateTrackAvailable=this.selectedAnimal.allTrainingTracks.intermediateTrackAvailable,this.masterTrackAvailable=this.selectedAnimal.allTrainingTracks.masterTrackAvailable,this.legacyTrackAvailable=this.selectedAnimal.allTrainingTracks.legacyTrackAvailable,this.isNoviceRaceToggled=this.globalService.globalVar.settings.get("noviceRaceToggled"),this.isIntermediateRaceToggled=this.globalService.globalVar.settings.get("intermediateRaceToggled"),this.isMasterRaceToggled=this.globalService.globalVar.settings.get("masterRaceToggled"),this.isLegacyRaceToggled=this.globalService.globalVar.settings.get("legacyRaceToggled"),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()}}selectTrackRace(e){if(this.lookupService.canAnimalRace(this.selectedAnimal)){var i=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=i&&(i.selectedAnimals=i.selectedAnimals.filter(r=>r.raceCourseType!==this.selectedAnimal.raceCourseType),i.selectedAnimals.push(this.selectedAnimal)),this.raceSelected.emit(e)}}getTrackRewardsPopover(e){var i="",r=this.lookupService.getTrackRaceRewards(e),a=.25,o=this.globalService.globalVar.modifiers.find(u=>"trainingTrackPaceModifier"===u.text);void 0!==o&&(a=o.value);for(var s=0;s<r.length;s++){var l=r[s],c=0;e===Li.novice?c=this.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained:e===Li.intermediate?c=this.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained:e===Li.master?c=this.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained:e===Li.legacy&&(c=this.selectedAnimal.allTrainingTracks.legacyTrack.rewardsObtained,a=1),i+=s<c?"<span class='crossed'>("+s*a*100+"% faster than average pace) "+l+"</span>\n":"<span>("+s*a*100+"% faster than average pace) "+l+"</span>\n"}return this.sanitizer.sanitize(_i.HTML,this.sanitizer.bypassSecurityTrustHtml(i))}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}toggleRace(e){var i=this.globalService.globalVar.settings.get(e);this.globalService.globalVar.settings.set(e,!i),"noviceRaceToggled"===e&&(this.isNoviceRaceToggled=!this.isNoviceRaceToggled),"intermediateRaceToggled"===e&&(this.isIntermediateRaceToggled=!this.isIntermediateRaceToggled),"masterRaceToggled"===e&&(this.isMasterRaceToggled=!this.isMasterRaceToggled),"legacyRaceToggled"===e&&(this.isLegacyRaceToggled=!this.isLegacyRaceToggled)}goToAnimal(){this.componentCommunicationService.setAnimalView(Pt.animals,this.selectedAnimal)}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Ti),V(hs),V(io),V(Pn))},t.\u0275cmp=Tt({type:t,selectors:[["app-training-track-race-view"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{raceSelected:"raceSelected"},decls:14,vars:3,consts:[[1,"trainingTrackView"],[1,"keyword","clickableText",3,"ngClass","click"],["class","trainingTracks",4,"ngIf"],["noviceRewardModal",""],["intermediateRewardModal",""],["masterRewardModal",""],["legacyRewardModal",""],[1,"trainingTracks"],["id","trainingTrack1",4,"ngIf"],["id","trainingTrack2",4,"ngIf"],["id","trainingTrack3",4,"ngIf"],["id","trainingTrack4",4,"ngIf"],["id","trainingTrack1"],[1,"noviceTrackRace"],[1,"minimizer"],[1,"minimizerSideSpacing"],[3,"click"],[1,"s4Heading"],[1,"clickableText","keyword",3,"click"],[3,"race","selectedAnimal","showStartText","click"],[1,"s4Heading","raceNameSpacing"],[1,"inlineDescription"],[3,"race","selectedAnimal","showStartText","condensedVersion","click"],["id","trainingTrack2"],[1,"intermediateTrackRace"],["id","trainingTrack3"],[1,"masterTrackRace"],["id","trainingTrack4"],[1,"legacyTrackRace"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,i){1&e&&(h(0,"div",0),g(1," Selected Animal: "),h(2,"span",1),A("click",function(){return i.goToAnimal()}),g(3),d(),D(4,"hr"),x(5,UG,9,8,"div",2),d(),x(6,HG,15,1,"ng-template",null,3,dt),x(8,GG,15,1,"ng-template",null,4,dt),x(10,zG,15,1,"ng-template",null,5,dt),x(12,jG,15,1,"ng-template",null,6,dt)),2&e&&(p(2),m("ngClass",i.colorConditional),p(1),rt(i.selectedAnimal.name),p(2),m("ngIf",!i.showRace))},directives:[cn,li,eb],styles:[".trainingTrackView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}.minimizer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.minimizerSideSpacing[_ngcontent-%COMP%]{width:3rem}.inlineDescription[_ngcontent-%COMP%]{width:40%;margin-top:auto;margin-bottom:auto}.raceNameSpacing[_ngcontent-%COMP%]{width:20%}"]}),t})();const qG=["raceCanvas"];let WG=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.themeService=o,this.skipRace=!1,this.pauseRace=!1,this.lengthCompleted=0,this.frameModifier=60,this.mountainEndingY=0,this.icyPatchBackgroundLines=[],this.volcanoYOffset=0,this.volcanoRadiusXModifier=6,this.backgroundVolcanoYStart=0,this.currentRaceFrame=0,this.lastPathEndingX=0,this.lastPathEndingY=0,this.lastPreviousSeconds=0,this.totalRaceModeXDistance=0,this.totalRaceModeYDistance=0,this.deltaY=0,this.yOffscreen=0,this.overviewYOffsetModifier=1,this.visibleDistanceXLeft=0,this.visibleDistanceYTop=0,this.visibleDistanceXRight=0,this.visibleDistanceYBottom=0,this.mountainClimbPercent=.5,this.eventViewStartFrame=0,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,this.newSegment=!1}ngOnInit(){this.globalService.globalVar.userIsRacing=!0,this.skipSubscription=this.skip.subscribe(()=>{this.skipRace=!0,this.isRaceFinished=!0}),this.pauseSubscription=this.pause.subscribe(()=>{this.pauseRace=!this.pauseRace}),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.skipRace=!0,this.isRaceFinished=!0)}ngAfterViewInit(){this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix&&(this.eventViewStartFrame=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier)),this.totalLegs=this.race.raceLegs.length,this.setupCanvas(),this.canvasXDistanceScale=this.canvasWidth/this.race.length;var e=this.raceCanvas.nativeElement.getContext("2d");e.lineWidth=6;var i=0;this.mountainClimbPercent=this.utilityService.getRandomNumber(.3,.7),this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix&&(0===this.globalService.globalVar.eventRaceData.mountainClimbPercent?this.globalService.globalVar.eventRaceData.mountainClimbPercent=this.mountainClimbPercent:this.mountainClimbPercent=this.globalService.globalVar.eventRaceData.mountainClimbPercent);var r=this.race.raceUI.timeToCompleteByFrame[this.race.raceUI.timeToCompleteByFrame.length-1];this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{performance.now(),e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.lineWidth=6,this.pauseRace||(i+=a,this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount>this.lastEventSegment?(this.eventViewStartFrame=0,this.currentRaceFrame=0,this.race=this.globalService.globalVar.eventRaceData.currentRaceSegment,this.newSegment=!0):this.newSegment=!1,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount),this.currentRaceFrame+=1);var s=!1;this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix&&this.globalService.getRemainingEventRaceTime()>0&&(s=!0),(this.currentRaceFrame>=r*this.frameModifier||this.isRaceFinished||this.skipRace)&&!s?this.displayOverview(e,!0):this.displayRace(e,i),performance.now()})}setupCanvas(){this.raceCanvas.nativeElement.style.width="100%",this.raceCanvas.nativeElement.style.height="100%",this.raceCanvas.nativeElement.width=this.raceCanvas.nativeElement.offsetWidth,this.raceCanvas.nativeElement.height=this.raceCanvas.nativeElement.offsetHeight,this.canvasHeight=this.raceCanvas.nativeElement.height,this.canvasWidth=this.raceCanvas.nativeElement.width}displayOverview(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.lengthCompleted=0,this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=0,a=!0,l=0;if(this.race.raceLegs.forEach(S=>{void 0!==S.pathData&&0!==S.pathData.length&&(l=0,S.pathData.forEach(w=>{if(S.courseType===F.Flatland)e.lineCap="round",w.routeDesign===Ge.Regular&&this.drawRegularFlatlandOverview(e,w,1,1),w.routeDesign===Ge.S&&this.drawSFlatlandOverview(e,w,1,1),w.routeDesign===Ge.Bumps&&this.drawBumpsFlatlandOverview(e,w,1,1);else if(S.courseType===F.Mountain){e.lineCap="round";var B=this.getCurrentAnimalRacingCourse(this.lengthCompleted)!==F.Mountain||r<S.distance*this.mountainClimbPercent;w.routeDesign===Ge.Regular&&this.drawRegularMountainOverview(e,w,1,this.overviewYOffsetModifier,B),w.routeDesign===Ge.Crevasse&&this.drawCrevasseMountainOverview(e,w,1,this.overviewYOffsetModifier,B),w.routeDesign===Ge.Gaps&&this.drawGapsMountainOverview(e,w,1,this.overviewYOffsetModifier,B),r+=w.length}else S.courseType===F.Ocean&&(e.lineCap="round",w.routeDesign===Ge.Regular&&this.drawRegularWaterOverview(e,w,1,1,a),w.routeDesign===Ge.Waves&&this.drawWavesWaterOverview(e,w,1,1,a),w.routeDesign===Ge.Dive&&this.drawDiveWaterOverview(e,w,1,1,a),a=!a);S.courseType===F.Tundra&&(e.lineCap="round",w.routeDesign===Ge.Regular&&this.drawRegularTundraOverview(e,w,1,1),w.routeDesign===Ge.Cavern&&this.drawCavernTundraOverview(e,w,1,1),w.routeDesign===Ge.Hills&&this.drawHillsTundraOverview(e,w,1,1)),S.courseType===F.Volcanic&&(e.lineCap="round",this.backgroundVolcanoYStart=this.lastPathEndingY,(w.routeDesign===Ge.Regular||w.routeDesign===Ge.FirstRegular||w.routeDesign===Ge.LastRegular)&&this.drawRegularVolcanoOverview(e,0,l,w,S.pathData.length,1,1),w.routeDesign===Ge.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,l,w,S.pathData.length,1,1)),this.lengthCompleted+=w.length,l+=1,this.lastPathEndingY<0&&(this.yOffscreen=this.lastPathEndingY)}))}),this.yOffscreen<0&&(this.overviewYOffsetModifier=this.overviewYOffsetModifier/1.25,this.yOffscreen=0),i){this.globalService.globalVar.userIsRacing=!1,e.globalCompositeOperation="source-atop";var u=this.race.raceUI.distanceCoveredByFrame[this.race.raceUI.distanceCoveredByFrame.length-1]/this.race.length,f=0,v=0,b=!1;this.race.raceLegs.forEach(S=>{if(!b){var w=(f+=S.distance)/this.race.length;w>u&&(w=u,b=!0);var B=(w-v)*this.canvasWidth;e.fillStyle=this.getAnimalDistanceColorByType(S.courseType),e.fillRect(v*this.canvasWidth,0,B,this.canvasHeight),v=w}})}if(null!=this.race.drawnObjects&&this.race.drawnObjects.length>0){var y=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",this.race.drawnObjects.forEach(S=>{(S.objectType===jt.amberBrazier||S.objectType===jt.rubyBrazier||S.objectType===jt.topazBrazier||S.objectType===jt.sapphireBrazier||S.objectType===jt.amethystBrazier||S.objectType===jt.emeraldBrazier)&&this.drawBrazier(!0,S,F.Flatland,0,S.xDistance,e,5,1,1,this.race.raceUI.distanceCoveredByFrame.length)}),e.globalCompositeOperation=y}if(this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(S=>{"Hills"===S[0]?this.drawHillsBackgroundTundraOverview(e,S):this.drawIcyPatchBackgroundTundraOverview(e,S)}),this.race.raceLegs.some(S=>S.courseType===F.Volcanic)){var M,C=0,T=!1;this.race.raceLegs.forEach(w=>{this.race.raceLegs.some(B=>B.courseType===F.Volcanic)&&(w.courseType!==F.Volcanic&&!T&&(C+=w.distance),w.courseType===F.Volcanic&&(T=!0))}),M=this.race.raceLegs.find(w=>w.courseType===F.Volcanic).distance,y=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,0,C,C+M,1,1),e.globalCompositeOperation=y}}}displayRace(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.lineCap="round",e.strokeStyle="gray",this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=10,a=10;this.totalRaceModeXDistance=this.race.length*r;var o=!1,s=0,l=[];this.race.raceLegs.forEach(ke=>{l.push(ke)});var c=!1;this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix?(c=!0,s=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier),l.push(this.globalService.globalVar.eventRaceData.nextRaceSegment.raceLegs[0])):s=this.currentRaceFrame;var u=this.race.raceUI.distanceCoveredByFrame[s],f=0;c&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment&&(l.unshift(this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0]),u+=l[0].distance),this.averageDistancePerSecond=this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/this.globalService.globalVar.eventRaceData.grandPrixTimeLength:this.race.length/this.race.raceUI.timeToCompleteByFrame[s];var v=0,b=0,y=!1,C=0;l.forEach(ke=>{y||(u>=v&&u<v+ke.distance&&(y=!0,this.currentLeg=ke),y||(b+=ke.distance,C+=1)),v+=ke.distance});var T=u-b,M=0;if(this.currentLeg.courseType===F.Mountain){var S=this.currentLeg.distance*this.mountainClimbPercent,w=0,B=!1,j=0;this.currentLeg.pathData.forEach(ke=>{B||(S>=j&&S<j+ke.length&&(B=!0,w=j+ke.length-S),j+=ke.length)}),B=!1;var de=0,ne=0;this.currentLeg.pathData.forEach(ke=>{if(!B){if(T>=de&&T<de+ke.length&&(B=!0,ne=T-de,ke.routeDesign===Ge.Crevasse)){var ut=ke.length/2*3,nr=3*ne;M-=ne<ke.length/2?nr:ut-(nr-ut)}de+=ke.length}});var ue=S+w;T<ue?(f=T+M,o=!0):(f=ue-(T-ue)+M,o=!1),this.mountainEndingY=f,this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix&&s===this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed-2&&(this.globalService.globalVar.eventRaceData.mountainEndingY=f)}if(this.race.raceLegs.some(ke=>ke.courseType===F.Mountain)||(this.mountainEndingY=0),f=this.mountainEndingY,this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix&&(f+=this.globalService.globalVar.eventRaceData.mountainEndingY,null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&this.currentLeg.courseType!==F.Mountain&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType!==F.Mountain&&(f=0)),this.currentLeg.courseType===F.Volcanic&&!this.pauseRace){var se=this.currentLeg.pathData[0].length/r;if(T>se){var Ce=this.currentLeg.distance/this.volcanoRadiusXModifier,Se=se/this.currentLeg.distance,ve=T/this.currentLeg.distance,Oe=(this.currentLeg.distance-2*se)/this.currentLeg.distance/2;if(ve>Se&&ve<1-Se){var Ke=100/(100-2*Se),xt=-Ce,Dt=Ce*Math.pow(1.05,-100*(ve>.5?2*(Oe-((ve-Se)*Ke-Oe)):(ve-Se)*Ke*2))+xt;this.volcanoYOffset=Dt}}}var ee=u*this.canvasXDistanceScale*r-this.canvasWidth/2,R=(f+=this.volcanoYOffset)*this.canvasXDistanceScale*a;if(this.visibleDistanceXLeft=ee,this.visibleDistanceXRight=ee+this.canvasWidth,this.setDrawnObjectGoingUpStatus(),e.globalCompositeOperation="source-over",(u>=this.race.length||s>this.race.raceUI.distanceCoveredByFrame.length)&&!c)return void(this.isRaceFinished=!0);var pt=0,_t=!0,Kt=0;l.forEach(ke=>{void 0!==ke.pathData&&0!==ke.pathData.length&&(Kt=0,this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix&&(pt=0),ke.pathData.forEach(ut=>{if(ke.courseType===F.Flatland)ut.routeDesign===Ge.Regular&&this.drawRegularFlatlandOverview(e,ut,r,a,ee,R),ut.routeDesign===Ge.S&&this.drawSFlatlandOverview(e,ut,r,a,ee,R),ut.routeDesign===Ge.Bumps&&this.drawBumpsFlatlandOverview(e,ut,r,a,ee,R);else if(ke.courseType===F.Mountain){var nr=pt<ke.distance*this.mountainClimbPercent;ut.routeDesign===Ge.Regular&&this.drawRegularMountainOverview(e,ut,r,a,nr,ee,R),ut.routeDesign===Ge.Crevasse&&this.drawCrevasseMountainOverview(e,ut,r,a,nr,ee,R),ut.routeDesign===Ge.Gaps&&this.drawGapsMountainOverview(e,ut,r,a,nr,ee,R),pt+=ut.length,this.grandPrixMountainYReset(C)}else ke.courseType===F.Ocean&&(ut.routeDesign===Ge.Regular&&this.drawRegularWaterOverview(e,ut,r,a,_t,ee,R),ut.routeDesign===Ge.Waves&&this.drawWavesWaterOverview(e,ut,r,a,_t,ee,R),ut.routeDesign===Ge.Dive&&this.drawDiveWaterOverview(e,ut,r,a,_t,ee,R),_t=!_t);ke.courseType===F.Tundra&&(ut.routeDesign===Ge.Regular&&this.drawRegularTundraOverview(e,ut,r,a,ee,R),ut.routeDesign===Ge.Cavern&&this.drawCavernTundraOverview(e,ut,r,a,ee,R),ut.routeDesign===Ge.Hills&&this.drawHillsTundraOverview(e,ut,r,a,ee,R)),ke.courseType===F.Volcanic&&(this.backgroundVolcanoYStart=this.lastPathEndingY,(ut.routeDesign===Ge.Regular||ut.routeDesign===Ge.FirstRegular||ut.routeDesign===Ge.LastRegular)&&this.drawRegularVolcanoOverview(e,0,Kt,ut,ke.pathData.length,r,a,ee,R),ut.routeDesign===Ge.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,Kt,ut,ke.pathData.length,r,a,ee,R)),Kt+=1,this.lengthCompleted+=ut.length})),C+=1}),e.globalCompositeOperation="source-atop";var ct=0,ii=b*this.canvasXDistanceScale*r,Ue=l.indexOf(this.currentLeg),Ri=null;Ue>0&&(Ri=l[Ue-1]),null!=Ri&&ii>=this.visibleDistanceXLeft&&ii<=this.visibleDistanceXRight?(ct=(ii-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=this.getAnimalDistanceColorByType(Ri.courseType),e.fillRect(0,0,this.canvasWidth*ct,this.canvasHeight),e.fillStyle=this.getAnimalDistanceColorByType(this.currentLeg.courseType),e.fillRect(this.canvasWidth*ct,0,this.canvasWidth/2-this.canvasWidth*ct,this.canvasHeight)):(e.fillStyle=this.getAnimalDistanceColor(u,l),e.fillRect(0,0,this.canvasWidth/2,this.canvasHeight));var Ai=this.getAnimalRacerColor(u,l);if((this.race.raceUI.racerEffectByFrame[s]===ua.LostFocus||this.race.raceUI.racerEffectByFrame[s]===ua.LostStamina||this.race.raceUI.racerEffectByFrame[s]===ua.Stumble)&&(Ai=this.utilityService.shadeColor(Ai,-90)),this.race.raceUI.racerEffectByFrame[s]===ua.Burst&&(Ai=this.utilityService.shadeColor(Ai,90)),e.fillStyle=Ai,e.fillRect(this.canvasWidth/2-5,0,5,this.canvasHeight),null!=this.race.drawnObjects&&this.race.drawnObjects.length>0){var hi=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",this.race.drawnObjects.forEach(ke=>{(ke.objectType===jt.amberBrazier||ke.objectType===jt.rubyBrazier||ke.objectType===jt.topazBrazier||ke.objectType===jt.sapphireBrazier||ke.objectType===jt.amethystBrazier||ke.objectType===jt.emeraldBrazier)&&this.drawBrazier(!1,ke,this.currentLeg.courseType,u,ke.xDistance,e,r,r,a,s,ee,R,o)}),e.globalCompositeOperation=hi}this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(ke=>{"Hills"===ke[0]?this.drawHillsBackgroundTundraOverview(e,ke):this.drawIcyPatchBackgroundTundraOverview(e,ke)}),e.globalCompositeOperation="source-atop";var Pi=this.averageDistancePerSecond/this.frameModifier*s;if(this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix){var vi=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();Pi+=this.averageDistancePerSecond*vi}if(this.drawRacer(e,Pi*this.canvasXDistanceScale*r,"black"),this.race.localRaceType!==Ut.Track){if(this.lookupService.getResourceByName("Money Mark")>0){var mi=.75,Gt=this.globalService.globalVar.modifiers.find(ke=>"moneyMarkPaceModifier"===ke.text);null!=Gt&&(mi=Gt.value),this.drawRacer(e,this.race.length/(this.race.raceUI.timeToCompleteByFrame[s]*mi)/this.frameModifier*s*this.canvasXDistanceScale*r,"gold")}}else{var oi=11,nn=.25,ji=this.globalService.globalVar.modifiers.find(ke=>"trainingTrackPaceModifier"===ke.text);void 0!==ji&&(nn=ji.value),this.race.trackRaceType===Li.legacy&&(oi=3,nn=1);for(var Bi=0;Bi<oi;Bi++){var Gn=this.race.length/(this.race.raceUI.timeToCompleteByFrame[s]/(1+nn*(Bi+1)))/this.frameModifier*s*this.canvasXDistanceScale*r,zn=this.getTrackRacerColor(Bi);this.drawRacer(e,Gn,zn)}}if(this.drawBreakpoints(e,r,l),this.globalService.globalVar.settings.get("displayAverageDistancePace")&&this.drawCompetitorDistanceMarker(e,r,u,Pi),l.some(ke=>ke.courseType===F.Volcanic)){var dn,Dr=0,bn=!1;l.forEach(ut=>{l.some(nr=>nr.courseType===F.Volcanic)&&(ut.courseType!==F.Volcanic&&!bn&&(Dr+=ut.distance),ut.courseType===F.Volcanic&&(bn=!0))}),dn=l.find(ut=>ut.courseType===F.Volcanic).distance,hi=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,s,Dr,Dr+dn,r,a,ee,R),e.globalCompositeOperation=hi}}}getAnimalDistanceColor(e,i){var r="",a=0;return null==i&&(i=this.race.raceLegs),i.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===F.Flatland&&(r="#7d3f00"),o.courseType===F.Mountain&&(r="#1b630d"),o.courseType===F.Ocean&&(r="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),o.courseType===F.Tundra&&(r="#28809c"),o.courseType===F.Volcanic&&(r="#8f1a1a")),a+=o.distance}),r}getAnimalDistanceColorByType(e){var i="";return e===F.Flatland&&(i="#7d3f00"),e===F.Mountain&&(i="#1b630d"),e===F.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===F.Tundra&&(i="#28809c"),e===F.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e,i){var r="",a=0;return null==i&&(i=this.race.raceLegs),i.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===F.Flatland&&("night"===this.themeService.getActiveThemeName()?r="#E18B07":(this.themeService.getActiveThemeName(),r="#c66900")),o.courseType===F.Mountain&&("night"===this.themeService.getActiveThemeName()?r="#30b001":(this.themeService.getActiveThemeName(),r="#279113")),o.courseType===F.Ocean&&("night"===this.themeService.getActiveThemeName()?r="#9289CF":(this.themeService.getActiveThemeName(),r="#0000FF")),o.courseType===F.Tundra&&("night"===this.themeService.getActiveThemeName()?r="#019DDE":(this.themeService.getActiveThemeName(),r="#1CA1C9")),o.courseType===F.Volcanic&&("night"===this.themeService.getActiveThemeName()?r="#E56C6E":(this.themeService.getActiveThemeName(),r="#D92525"))),a+=o.distance}),r}getTrackRacerColor(e){var i="";return 0===e&&(i="#cfc800"),1===e&&(i="#00cf68"),2===e&&(i="#cf00c5"),3===e&&(i="#cfb8e6"),4===e&&(i="#4a1d1d"),5===e&&(i="#1b5054"),6===e&&(i="#541b3c"),7===e&&(i="#aeb85a"),8===e&&(i="#ffffff"),9===e&&(i="#01253b"),10===e&&(i="#790dde"),i}getCurrentAnimalRacingCourse(e){var i;i=F.Flatland;var r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(i=a.courseType),r+=a.distance}),i}getNextAnimalRacingCourse(e){var i;i=F.Flatland;var r=this.race.raceLegs.indexOf(e);return this.race.raceLegs.length>r&&(i=this.race.raceLegs[r+1].courseType),i}drawRacer(e,i,r){var a=0;i>=this.visibleDistanceXLeft&&i<=this.visibleDistanceXRight&&(a=(i-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=r,e.fillRect(this.canvasWidth*a-5,0,5,this.canvasHeight))}drawBreakpoints(e,i,r){var a=0;null==r&&(r=this.race.raceLegs);for(var o=0;o<r.length;o++){var s=r[o],l=null;o<r.length-1&&(l=r[o+1]);var c=0,u=(a+s.distance)*this.canvasXDistanceScale*i;u>=this.visibleDistanceXLeft&&u<=this.visibleDistanceXRight&&(c=(u-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=null!==l?this.getAnimalDistanceColorByType(l.courseType):"pink",e.fillRect(this.canvasWidth*c-5,0,5,this.canvasHeight)),a+=s.distance}}drawCompetitorDistanceMarker(e,i,r,a){var o=a*this.canvasXDistanceScale*i;this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix&&(r+=this.globalService.globalVar.eventRaceData.distanceCovered),e.font="16px bold";var l=e.fillStyle,c=e.strokeStyle,u=e.globalCompositeOperation;e.fillStyle="#BAC2C2",e.strokeStyle="black",e.globalCompositeOperation="source-over",e.textAlign="center";var f=this.canvasWidth/10,v=this.canvasHeight/5,b=this.canvasWidth/32;this.canvasWidth<600&&(e.font="12px bold",b*=2),o<this.visibleDistanceXLeft?(e.beginPath(),e.arc(f,v,b,3.3,3),e.moveTo(f-.9*b,v+b/4),e.lineTo(f-1.3*b,v),e.lineTo(f-.9*b,v-b/4),e.stroke(),e.fill(),e.fillStyle="black",e.beginPath(),e.fillRect(f-2.5,v-17.5,5,5),e.fillText(this.utilityService.reduceToProperUnits(Math.round(r-a)),f,v+15)):o>this.visibleDistanceXRight&&(f=9*this.canvasWidth/10,e.beginPath(),e.arc(f,v,b,.15,2*Math.PI-.15),e.moveTo(f+.9*b,v-b/4),e.lineTo(f+1.3*b,v),e.lineTo(f+.9*b,v+b/4),e.stroke(),e.fill(),e.fillStyle="black",e.beginPath(),e.fillRect(f-2.5,v-17.5,5,5),e.fillText(this.utilityService.reduceToProperUnits(Math.round(a-r)),f,v+15)),e.fillStyle=l,e.globalCompositeOperation=u,e.strokeSTyle=c}drawRegularFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0),e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+s),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawSFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,f=.04*l,v=.23*l,b=1.2173*v,y=.04*l,C=b,T=y+v,M=b,S=T+v,w=b,B=S,de=S,ne=b,ue=de+v,se=b,Ce=ue+v,Se=b,ve=Ce;e.beginPath(),e.moveTo(c,u),e.lineTo(c+f,u),e.stroke(),e.beginPath(),e.moveTo(c+f,u),e.bezierCurveTo(c+f,u,c+y,u+C,c+T,u+M),e.bezierCurveTo(c+T,u+M,c+S,u+w,c+B,u),e.stroke(),e.beginPath(),e.moveTo(c+B,u),e.bezierCurveTo(c+B,u,c+de,u-ne,c+ue,u-se),e.bezierCurveTo(c+ue,u-se,c+Ce,u-Se,c+Ce,u),e.stroke(),e.beginPath(),e.moveTo(c+Ce,u),e.lineTo(c+ve+f,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+ve+f}drawBumpsFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,f=.04*l,v=.115*l,b=v/3;e.beginPath(),e.moveTo(c,u),e.lineTo(c+f,u),e.stroke(),e.beginPath(),e.moveTo(c+f,u),e.lineTo(c+f+v/2,u-b),e.lineTo(c+f+v,u),e.stroke(),e.beginPath(),e.moveTo(c+f+v,u),e.lineTo(c+f+v+v/2,u-b),e.lineTo(c+f+2*v,u),e.stroke(),e.beginPath(),e.moveTo(c+f+2*v,u),e.lineTo(c+f+2*v+v/2,u-b),e.lineTo(c+f+3*v,u),e.stroke(),e.beginPath(),e.moveTo(c+f+3*v,u),e.lineTo(c+f+3*v+v/2,u-b),e.lineTo(c+f+4*v,u),e.stroke(),e.beginPath(),e.moveTo(c+f+4*v,u),e.lineTo(c+f+4*v+v/2,u-b),e.lineTo(c+f+5*v,u),e.stroke(),e.beginPath(),e.moveTo(c+f+5*v,u),e.lineTo(c+f+5*v+v/2,u-b),e.lineTo(c+f+6*v,u),e.stroke(),e.beginPath(),e.moveTo(c+f+6*v,u),e.lineTo(c+f+6*v+v/2,u-b),e.lineTo(c+f+7*v,u),e.stroke(),e.beginPath(),e.moveTo(c+f+7*v,u),e.lineTo(c+f+7*v+v/2,u-b),e.lineTo(c+f+8*v,u),e.stroke(),e.beginPath(),e.moveTo(c+f+8*v,u),e.lineTo(c+f+8*v+f,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawRegularMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0),e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),e.lineTo(this.lastPathEndingX+c-s,o?this.lastPathEndingY-u+l:this.lastPathEndingY+u+l),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawCrevasseMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var f=this.lastPathEndingX-s,v=this.lastPathEndingY+l,y=c,C=u,T=2*C;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),o?(T=2*C-(C-0),e.lineTo(f+0,v-0),e.lineTo(f+0+y/2,v+T-0),e.lineTo(f+0+y,v-C-0),e.lineTo(f+0+y,v-C-0)):(e.lineTo(f+0,v+0),e.lineTo(f+0+y/2,v+T+0),e.lineTo(f+0+y,v+C+0),e.lineTo(f+0+y,v+C+0)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawGapsMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var f=this.lastPathEndingX-s,v=this.lastPathEndingY+l,b=.04*c,y=.115*c,C=.115*u,T=.04*u;e.beginPath(),e.moveTo(f,v),o?(e.lineTo(f+b,v-T),e.moveTo(f+y+b,v-C-T),e.lineTo(f+2*y+b,v-2*C-T),e.moveTo(f+3*y+b,v-3*C-T),e.lineTo(f+4*y+b,v-4*C-T),e.moveTo(f+5*y+b,v-5*C-T),e.lineTo(f+6*y+b,v-6*C-T),e.moveTo(f+7*y+b,v-7*C-T),e.lineTo(f+8*y+b,v-8*C-T),e.lineTo(f+8*y+2*b,v-8*C-2*T)):(e.lineTo(f+b,v+T),e.moveTo(f+y+b,v+C+T),e.lineTo(f+2*y+b,v+2*C+T),e.moveTo(f+3*y+b,v+3*C+T),e.lineTo(f+4*y+b,v+4*C+T),e.moveTo(f+5*y+b,v+5*C+T),e.lineTo(f+6*y+b,v+6*C+T),e.moveTo(f+7*y+b,v+7*C+T),e.lineTo(f+8*y+b,v+8*C+T),e.lineTo(f+8*y+2*b,v+8*C+2*T)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawRegularWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,f=this.lastPathEndingY+l,v=c/3,b=c/6,y=u+v,C=o?f+b:f-b,T=u+2*v,M=o?f+b:f-b,S=u+3*v,w=f;e.beginPath(),e.moveTo(u,f),e.bezierCurveTo(y,C,T,M,S,w),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawWavesWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,f=this.lastPathEndingY+l,v=c/3,b=c/3,y=u+v/3,C=f,T=u+v/3,M=f-b,S=u+v,w=f-.6*b;e.beginPath(),e.moveTo(u,f),e.bezierCurveTo(y,C,T,M,S,w),e.stroke();var B=S-v/3,j=w-b/10,de=S-v/3,ne=w+.6*b,ue=S,se=f;e.beginPath(),e.moveTo(S,w),e.bezierCurveTo(B,j,de,ne,ue,se),e.stroke();var Ce=ue+v/3,Se=se,ve=ue+v/3,Oe=se-b,Ke=ue+v,Ht=se-.6*b;e.beginPath(),e.moveTo(ue,se),e.bezierCurveTo(Ce,Se,ve,Oe,Ke,Ht),e.stroke();var qe=Ke-v/3,ft=Ht-b/10,xt=Ke-v/3,Dt=Ht+.6*b,ee=Ke,R=f;e.beginPath(),e.moveTo(Ke,Ht),e.bezierCurveTo(qe,ft,xt,Dt,ee,R),e.stroke();var pt=ee+v/3,_t=R,Ot=ee+v/3,Kt=R-b,ct=ee+v,ii=R-.6*b;e.beginPath(),e.moveTo(ee,R),e.bezierCurveTo(pt,_t,Ot,Kt,ct,ii),e.stroke();var Ue=ct-v/3,Ri=ii-b/10,tn=ct-v/3,Ei=ii+.6*b,Ai=ct,hi=f;e.beginPath(),e.moveTo(ct,ii),e.bezierCurveTo(Ue,Ri,tn,Ei,Ai,hi),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawDiveWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,f=this.lastPathEndingY+l,v=c/3,b=c/2,y=u,C=o?f+2*b:f-2*b,T=u+2*v,M=o?f+b/4:f-b/4,S=u+3*v,w=f;e.beginPath(),e.moveTo(u,f),e.bezierCurveTo(y,C,T,M,S,w),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawRegularTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,f=i.driftAmount/80*u,v=(i.totalTundraYAmount-i.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+v+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+v+f+s),e.stroke();var b=[];b.push("Regular"),b.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),b.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),b.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),b.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),b.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]),this.icyPatchBackgroundLines.push(b),this.lastPathEndingX=this.lastPathEndingX+l}drawCavernTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var v=l/4*.97,b=i.driftAmount/80*v,y=(i.totalTundraYAmount-i.driftAmount)/80*v;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+y+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+y+b+s),e.stroke();var T=l/4*.75,M=[];M.push("Cavern"),M.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),M.push([this.lastPathEndingX-o,this.lastPathEndingY+T+s]),M.push([this.lastPathEndingX+l-o,this.lastPathEndingY+T+s]),M.push([this.lastPathEndingX+l-o,this.lastPathEndingY-T+s]),M.push([this.lastPathEndingX-o,this.lastPathEndingY-T+s]),this.icyPatchBackgroundLines.push(M),this.lastPathEndingX=this.lastPathEndingX+l}drawHillsTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,f=i.driftAmount/80*u,v=(i.totalTundraYAmount-i.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+v+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+v+f+s),e.stroke();var b=[];b.push("Hills"),b.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),b.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),b.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),b.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),b.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]);var y=l/12,C=l/4,T=c/2,M=c*(3/4),S=c/4;b.push([this.lastPathEndingX+C-y/2-o,this.lastPathEndingY-T+S/2+s]),b.push([this.lastPathEndingX+C-y/2-o,this.lastPathEndingY-T-S+s,this.lastPathEndingX+C+y/2-o,this.lastPathEndingY-T-S+s,this.lastPathEndingX+C+y/2-o,this.lastPathEndingY-T+S/2+s]),b.push([this.lastPathEndingX+C-y/2-o,this.lastPathEndingY+T+S/2+s]),b.push([this.lastPathEndingX+C-y/2-o,this.lastPathEndingY+T-S+s,this.lastPathEndingX+C+y/2-o,this.lastPathEndingY+T-S+s,this.lastPathEndingX+C+y/2-o,this.lastPathEndingY+T+S/2+s]),b.push([this.lastPathEndingX+2*C-y/2-o,this.lastPathEndingY-M+S/2+s]),b.push([this.lastPathEndingX+2*C-y/2-o,this.lastPathEndingY-M-S+s,this.lastPathEndingX+2*C+y/2-o,this.lastPathEndingY-M-S+s,this.lastPathEndingX+2*C+y/2-o,this.lastPathEndingY-M+S/2+s]),b.push([this.lastPathEndingX+2*C-y/2-o,this.lastPathEndingY+M+S/2+s]),b.push([this.lastPathEndingX+2*C-y/2-o,this.lastPathEndingY+M-S+s,this.lastPathEndingX+2*C+y/2-o,this.lastPathEndingY+M-S+s,this.lastPathEndingX+2*C+y/2-o,this.lastPathEndingY+M+S/2+s]),b.push([this.lastPathEndingX+3*C-y/2-o,this.lastPathEndingY-T+S/2+s]),b.push([this.lastPathEndingX+3*C-y/2-o,this.lastPathEndingY-T-S+s,this.lastPathEndingX+3*C+y/2-o,this.lastPathEndingY-T-S+s,this.lastPathEndingX+3*C+y/2-o,this.lastPathEndingY-T+S/2+s]),b.push([this.lastPathEndingX+3*C-y/2-o,this.lastPathEndingY+T+S/2+s]),b.push([this.lastPathEndingX+3*C-y/2-o,this.lastPathEndingY+T-S+s,this.lastPathEndingX+3*C+y/2-o,this.lastPathEndingY+T-S+s,this.lastPathEndingX+3*C+y/2-o,this.lastPathEndingY+T+S/2+s]),this.icyPatchBackgroundLines.push(b),this.lastPathEndingX=this.lastPathEndingX+l}drawIcyPatchBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r}drawHillsBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.strokeStyle="dimgray",e.globalCompositeOperation="source-atop",i.length>=17&&(e.beginPath(),e.moveTo(i[6][0],i[6][1]),e.bezierCurveTo(i[7][0],i[7][1],i[7][2],i[7][3],i[7][4],i[7][5]),e.stroke(),e.beginPath(),e.moveTo(i[8][0],i[8][1]),e.bezierCurveTo(i[9][0],i[9][1],i[9][2],i[9][3],i[9][4],i[9][5]),e.stroke(),e.beginPath(),e.moveTo(i[10][0],i[10][1]),e.bezierCurveTo(i[11][0],i[11][1],i[11][2],i[11][3],i[11][4],i[11][5]),e.stroke(),e.beginPath(),e.moveTo(i[12][0],i[12][1]),e.bezierCurveTo(i[13][0],i[13][1],i[13][2],i[13][3],i[13][4],i[13][5]),e.stroke(),e.beginPath(),e.moveTo(i[14][0],i[14][1]),e.bezierCurveTo(i[15][0],i[15][1],i[15][2],i[15][3],i[15][4],i[15][5]),e.stroke(),e.beginPath(),e.moveTo(i[16][0],i[16][1]),e.bezierCurveTo(i[17][0],i[17][1],i[17][2],i[17][3],i[17][4],i[17][5]),e.stroke()),e.globalCompositeOperation="destination-over",i.length>=17&&(e.beginPath(),e.moveTo(i[6][0],i[6][1]),e.bezierCurveTo(i[7][0],i[7][1],i[7][2],i[7][3],i[7][4],i[7][5]),e.stroke(),e.beginPath(),e.moveTo(i[8][0],i[8][1]),e.bezierCurveTo(i[9][0],i[9][1],i[9][2],i[9][3],i[9][4],i[9][5]),e.stroke(),e.beginPath(),e.moveTo(i[10][0],i[10][1]),e.bezierCurveTo(i[11][0],i[11][1],i[11][2],i[11][3],i[11][4],i[11][5]),e.stroke(),e.beginPath(),e.moveTo(i[12][0],i[12][1]),e.bezierCurveTo(i[13][0],i[13][1],i[13][2],i[13][3],i[13][4],i[13][5]),e.stroke(),e.beginPath(),e.moveTo(i[14][0],i[14][1]),e.bezierCurveTo(i[15][0],i[15][1],i[15][2],i[15][3],i[15][4],i[15][5]),e.stroke(),e.beginPath(),e.moveTo(i[16][0],i[16][1]),e.bezierCurveTo(i[17][0],i[17][1],i[17][2],i[17][3],i[17][4],i[17][5]),e.stroke()),e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r,e.strokeStyle="gray"}drawRegularVolcanoOverview(e,i,r,a,o,s,l,c,u){var f=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);var M=this.lastPathEndingX-c-f*r+f*o/2,S=this.lastPathEndingY+0+u,w=f*o/this.volcanoRadiusXModifier,B=f*o/2-f/s,j=Math.PI/2,ue=180/o,se=0;a.routeDesign===Ge.FirstRegular?(this.volcanoStartingAngle=se=90,e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+f/s-c,this.lastPathEndingY+0+u),e.stroke()):a.routeDesign===Ge.LastRegular&&(e.beginPath(),e.moveTo(this.lastPathEndingX+(f-f/s)-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+f-c,this.lastPathEndingY+0+u),e.stroke()),(se=this.volcanoStartingAngle-ue)<0&&(se=360-Math.abs(se)),e.beginPath(),e.ellipse(M,S,w,B,j,this.volcanoStartingAngle*(Math.PI/180),se*(Math.PI/180),!0),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+f,this.volcanoStartingAngle=se}drawSteppingStonesVolcanoOverview(e,i,r,a,o,s,l,c,u){var f=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);for(var M=this.lastPathEndingX-c-f*r+f*o/2,S=this.lastPathEndingY+0+u,w=f*o/this.volcanoRadiusXModifier,B=f*o/2-f/s,j=Math.PI/2,ue=180/o,ve=0,se=ue/20,Ce=0;Ce<10;Ce++){var Se=this.volcanoStartingAngle-se*(2*Ce);Se<0&&(Se=360-Math.abs(Se)),(ve=Se-se)<0&&(ve=360-Math.abs(ve)),e.beginPath(),e.ellipse(M,S,w,B,j,Se*(Math.PI/180),ve*(Math.PI/180),!0),e.stroke()}(ve=this.volcanoStartingAngle-ue)<0&&(ve=360-Math.abs(ve)),this.lastPathEndingX=this.lastPathEndingX+f,this.volcanoStartingAngle=ve}drawBackgroundVolcano(e,i,r,a,o,s,l,c){null==l&&(l=0),null==c&&(c=0);var u=.1*(a-r),f=(r+u)*this.canvasXDistanceScale*o-l,v=(a-u)*this.canvasXDistanceScale*o-l,b=v-f,y=(a-r)*this.canvasXDistanceScale*o/this.volcanoRadiusXModifier,C=this.canvasHeight*o,T=this.backgroundVolcanoYStart-.75*y+c,M=f+.15*b,S=C-10*s,w=f+.35*b,B=T+20*s,j=f+.4*b,de=T,ne=v-.15*b,ue=C-10*s,se=v-.35*b,Ce=T+20*s,Se=v-.4*b,ve=T,Oe=e.fillStyle,Ke=e.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);Ke.addColorStop(0,"red"),Ke.addColorStop(1,"orange"),e.fillStyle=Ke;var Ht=j+(Se-j)/3,qe=T+y/4,ft=j+2*(Se-j)/3,xt=T+y/4,_t=j-.075*b,Ot=de+y/2,Kt=Se+.075*b,ct=ve+y/2,ii=_t+1.7*(Kt-_t)/5,Ue=Ot+.5*y,Ri=_t+1.4*(Kt-_t)/5,tn=Ot+y/2,Ei=_t+2.5*(Kt-_t)/5,Ai=Ot,hi=_t+3.6*(Kt-_t)/5,Pi=Ot+y,vi=_t+3.3*(Kt-_t)/5,fi=Ot-.25*y;e.beginPath(),e.moveTo(j,de),e.bezierCurveTo(Ht,qe,ft,xt,Se,ve),e.lineTo(Kt,ct),e.moveTo(Kt,ct),e.bezierCurveTo(hi,Pi,vi,fi,Ei,Ai),e.bezierCurveTo(ii,Ue,Ri,tn,_t,Ot),e.lineTo(j,de),e.fill(),e.beginPath(),e.moveTo(f,C),e.bezierCurveTo(M,S,w,B,j,de),e.stroke(),e.beginPath(),e.moveTo(v,C),e.bezierCurveTo(ne,ue,se,Ce,Se,ve),e.stroke();var mn=e.lineWidth;e.lineWidth=2;var mt=.175,mi=f+b*(mt+.025),Gt=C-y/4,wt=f+b*(mt+.2),Ui=T+y/3,ai=f+b*(mt+.25),oi=T+y/4;e.beginPath(),e.moveTo(f+b*mt,.95*C),e.bezierCurveTo(mi,Gt,wt,Ui,ai,oi),e.stroke();var nn=f+b*(.025+(mt=.35)),ji=C-y/4,Bi=f+b*(mt+.075),Ni=T+y/2,gn=f+b*(mt+.1),$i=T+y/3;e.beginPath(),e.moveTo(f+b*mt,.95*C),e.bezierCurveTo(nn,ji,Bi,Ni,gn,$i),e.stroke();var Gn=v-b*(.025+(mt=.35)),zn=C-y/4,Dr=v-b*(mt+.075),bn=T+y/2,dn=v-b*(mt+.1),ke=T+y/3;e.beginPath(),e.moveTo(v-b*mt,.95*C),e.bezierCurveTo(Gn,zn,Dr,bn,dn,ke),e.stroke();var ut=v-b*(.025+(mt=.175)),nr=C-y/4,ws=v-b*(mt+.2),fa=T+y/3,xr=v-b*(mt+.25),Ea=T+y/4;if(e.beginPath(),e.moveTo(v-b*mt,.95*C),e.bezierCurveTo(ut,nr,ws,fa,xr,Ea),e.stroke(),e.lineWidth=mn,void 0!==this.race.raceUI.lavaFallPercentByFrame[i]&&0!==this.race.raceUI.lavaFallPercentByFrame[i].length&&void 0!==this.race.raceUI.lavaFallPercentByFrame[i][0]){1===o&&(i=this.race.raceUI.lavaFallPercentByFrame.length-1);var kr=this.race.raceUI.lavaFallPercentByFrame[i],Kr=(a-r)*this.canvasXDistanceScale*o,cr=r*this.canvasXDistanceScale*o,Do=cr+.4*Kr-l+0,pr=cr+.45*Kr-l+0,_n=cr+.5*Kr-l+0,ur=cr+.55*Kr-l+0,dr=cr+.6*Kr-l+0,Fi=.01*(a-r)*this.canvasXDistanceScale*o,qi=Fi/2,J=T+y/4,Z=this.backgroundVolcanoYStart+y+c,bi=(Z-J)*kr[0];e.beginPath(),e.ellipse(Do,J+bi-qi,Fi,qi,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Do-Fi,J,2*Fi,bi-(qi-1));var Vi=(Z-J)*kr[1];e.beginPath(),e.ellipse(pr,J+Vi-qi,Fi,qi,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(pr-Fi,J,2*Fi,Vi-(qi-1));var hn=(Z-J)*kr[2];e.beginPath(),e.ellipse(_n,J+hn-qi,Fi,qi,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(_n-Fi,J,2*Fi,hn-(qi-1));var xo=(Z-J)*kr[3];e.beginPath(),e.ellipse(ur,J+xo-qi,Fi,qi,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(ur-Fi,J,2*Fi,xo-(qi-1));var Na=(Z-J)*kr[4];e.beginPath(),e.ellipse(dr,J+Na-qi,Fi,qi,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(dr-Fi,J,2*Fi,Na-(qi-1)),e.fillStyle=Oe}else e.fillStyle=Oe}drawBrazier(e,i,r,a,o,s,l,c,u,f,v,b,y){var C=.01*this.race.length*this.canvasXDistanceScale*l;null==v&&(v=0),null==b&&(b=0),null==y&&(y=!1);var T=o*this.canvasXDistanceScale*c-v,M=this.canvasHeight/2,S=.166667*C,w=.333333*C,B=.666667*C;if(e)M=this.canvasHeight;else{var j,de=!1,ne=0,ue=0,se=0;if(this.race.raceLegs.forEach(xn=>{de||(i.xDistance>=ne&&i.xDistance<ne+xn.distance&&(de=!0,j=xn),de||(ue+=xn.distance)),ne+=xn.distance}),void 0===j)return;if(i.courseType===F.Flatland)M-=B;else if(i.courseType===F.Ocean)i.isGoingUp?M-=B:M+=2*B;else if(i.courseType===F.Tundra)M-=this.canvasHeight/15;else if(i.courseType===F.Mountain){i.isGoingUp?T-=this.canvasWidth/4:T+=this.canvasWidth/4;var Ce=j.distance*this.mountainClimbPercent,ve=!1,Oe=ue,qe=0,ft=0;se=0;var xt=!1,Dt=0;this.currentLeg.pathData.forEach(xn=>{xt||(Ce>=Dt&&Ce<Dt+xn.length&&(xt=!0,se=Dt+xn.length-Ce),Dt+=xn.length)}),j.pathData.forEach(xn=>{if(!ve&&i.xDistance>=Oe&&i.xDistance<Oe+xn.length&&(ve=!0,ft=i.xDistance-ue,xn.routeDesign===Ge.Crevasse)){var Qo=xn.length/2*3,no=3*ft;qe-=ft<xn.length/2?no:Qo-(no-Qo)}Oe+=xn.length});var ee=Ce+se;M=i.isGoingUp?this.canvasHeight-(M=(M=ft+qe)*this.canvasXDistanceScale*u-b)-this.canvasHeight/2:this.canvasHeight-(M=(M=ee-(ft-ee)+qe)*this.canvasXDistanceScale*u-b)-this.canvasHeight/2}else if(r===F.Volcanic){var pt=this.race.length/20/this.race.length*this.canvasWidth,_t=this.race.length/20/this.race.length*this.canvasWidth*c*20/2-pt,Ot=this.race.length/20/this.race.length*this.canvasWidth*c*20/this.volcanoRadiusXModifier,ct=a*this.canvasXDistanceScale*c-2*pt,ii=this.canvasHeight/Ot,Ue=-Ot*Math.sqrt(1-Math.pow(i.xDistance*this.canvasXDistanceScale*c-2*pt-_t,2)/Math.pow(_t,2)),Ri=-Ot*Math.sqrt(1-Math.pow(ct-_t,2)/Math.pow(_t,2));M=this.canvasHeight-(Ue-Ri)*ii}}s.fillStyle="brown",s.strokeStyle="black",s.lineWidth="2";var Ei=T,Ai=M-(fi=B/6);this.drawRoundedRectangle(s,Ei+(vi=C/6+s.lineWidth/8),Ai,hi=C/6-s.lineWidth/2,fi,3),this.drawRoundedRectangle(s,Ei+2*vi,Ai,hi,fi,3),this.drawRoundedRectangle(s,Ei+3*vi,Ai,hi,fi,3),this.drawRoundedRectangle(s,Ei+4*vi,Ai,hi,fi,3);var hi,vi,fi,Pi=T,mn=M-B-(fi=B/6);if(this.drawRoundedRectangle(s,Pi+(vi=C/6+s.lineWidth/8),mn,hi=C/6-s.lineWidth/2,fi,3),this.drawRoundedRectangle(s,Pi+2*vi,mn,hi,fi,3),this.drawRoundedRectangle(s,Pi+3*vi,mn,hi,fi,3),this.drawRoundedRectangle(s,Pi+4*vi,mn,hi,fi,3),s.strokeStyle="black",s.fillStyle="gray",s.beginPath(),s.moveTo(T+S,M),s.lineTo(T+S+w,M),s.lineTo(T+S+w,M-B),s.lineTo(T+S,M-B),s.lineTo(T+S,M),s.stroke(),s.fill(),s.beginPath(),s.moveTo(T+S+w,M),s.lineTo(T+S+2*w,M),s.lineTo(T+S+2*w,M-B),s.lineTo(T+S+w,M-B),s.lineTo(T+S+w,M),s.stroke(),s.fill(),f>=i.changeOnFrame){var mt=.66667*C/3,mi=T+.166*C,Gt=1.5*B,wt=M-B-1.15*fi,Ui=mt/3;"night"===this.themeService.getActiveThemeName()&&(i.objectType===jt.amberBrazier&&(s.fillStyle="#F67612"),i.objectType===jt.sapphireBrazier&&(s.fillStyle="#799EFB"),i.objectType===jt.topazBrazier&&(s.fillStyle="#ffe600"),i.objectType===jt.amethystBrazier&&(s.fillStyle="#E65DD8"),i.objectType===jt.emeraldBrazier&&(s.fillStyle="#50C878"),i.objectType===jt.rubyBrazier&&(s.fillStyle="#f2021a")),"light"===this.themeService.getActiveThemeName()&&(i.objectType===jt.amberBrazier&&(s.fillStyle="#C25E0E"),i.objectType===jt.sapphireBrazier&&(s.fillStyle="#2554C7"),i.objectType===jt.topazBrazier&&(s.fillStyle="#ffe600"),i.objectType===jt.amethystBrazier&&(s.fillStyle="#7b2bcc"),i.objectType===jt.emeraldBrazier&&(s.fillStyle="#28643C"),i.objectType===jt.rubyBrazier&&(s.fillStyle="#9b111e"));var ai=.5*Gt,oi=Gt,nn=.5*Gt,ji=mi+mt/2,Bi=wt-ai/8,Ni=mi+mt/2,gn=wt-ai/2,$i=mi+mt/1.75,Gn=wt-ai/2;s.beginPath(),s.moveTo(mi,wt),s.bezierCurveTo(ji,Bi,Ni,gn,$i,Gn);var ke=mi+mt,ut=wt;s.bezierCurveTo(mi+mt/1.75,wt-ai/8,mi+mt,wt,ke+Ui,ut);var nr=ke+mt/2,ws=ut-oi/8,fa=ke+mt/2,xr=ut-oi/2,Ea=ke+mt/1.75,lr=ut-oi/2;s.moveTo(ke-Ui,ut),s.bezierCurveTo(nr,ws,fa,xr,Ea,lr);var pr=ke+mt,_n=ut;s.bezierCurveTo(ke+mt/1.75,ut-oi/8,ke+mt,ut,pr+Ui,_n);var ur=pr+mt/2,dr=_n-nn/8,Fi=pr+mt/2,qi=_n-nn/2,J=pr+mt/1.75,Z=_n-nn/2;s.moveTo(pr-Ui,_n),s.bezierCurveTo(ur,dr,Fi,qi,J,Z);var Na=pr+mt,gr=_n;s.bezierCurveTo(pr+mt/1.75,_n-nn/8,pr+mt,_n,Na,gr),s.moveTo(Na,gr),s.lineTo(T,wt),s.fill()}}grandPrixMountainYReset(e){this.race.raceType===ge.event&&this.race.eventRaceType===Xe.grandPrix&&0===this.globalService.globalVar.eventRaceData.mountainEndingY&&null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType===F.Mountain&&1===e&&(this.lastPathEndingY=this.canvasHeight/2)}drawRoundedRectangle(e,i,r,a,o,s){var l=i+a,c=r+o;e.beginPath(),e.moveTo(i+s,r),e.lineTo(l-s,r),e.quadraticCurveTo(l,r,l,r+s),e.lineTo(l,r+o-s),e.quadraticCurveTo(l,c,l-s,c),e.lineTo(i+s,c),e.quadraticCurveTo(i,c,i,c-s),e.lineTo(i,r+s),e.quadraticCurveTo(i,r,i+s,r),e.stroke(),e.fill()}setDrawnObjectGoingUpStatus(){null==this.race.drawnObjects||0===this.race.drawnObjects.length||this.race.drawnObjects.forEach(e=>{var i,r=!1,a=0,o=0;if(this.race.raceLegs.forEach(b=>{r||(e.xDistance>=a&&e.xDistance<a+b.distance&&(r=!0,i=b),r||(o+=b.distance)),a+=b.distance}),void 0!==i){var c=!1,u=o,v=0;i.pathData.forEach(b=>{c||(e.xDistance>=u&&e.xDistance<u+b.length&&(c=!0),c||(v+=1)),u+=b.length}),e.courseType=i.courseType,i.courseType===F.Mountain&&(e.isGoingUp=(e.xDistance-o)/i.distance<this.mountainClimbPercent),i.courseType===F.Ocean&&(e.isGoingUp=v%2==0)}})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.skipSubscription.unsubscribe(),this.pauseSubscription.unsubscribe(),this.globalService.globalVar.userIsRacing=!1,this.race.raceType!==ge.event&&(this.race.raceUI.staminaPercentByFrame=[],this.race.raceUI.timeToCompleteByFrame=[],this.race.raceUI.yAdjustmentByFrame=[],this.race.raceUI.velocityByFrame=[],this.race.raceUI.distanceCoveredByFrame=[],this.race.raceUI.lavaFallPercentByFrame=[],this.race.raceUI.maxSpeedByFrame=[],this.race.raceUI.racerEffectByFrame=[])}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(An),V(Rn),V(Ti),V(Xs))},t.\u0275cmp=Tt({type:t,selectors:[["app-draw-race"]],viewQuery:function(e,i){if(1&e&&Sr(qG,5,Mi),2&e){let r;yi(r=wi())&&(i.raceCanvas=r.first)}},inputs:{race:"race",skip:"skip",pause:"pause"},decls:3,vars:0,consts:[[1,"drawRaceDiv"],["id","raceCanvas",1,"raceCanvas"],["raceCanvas",""]],template:function(e,i){1&e&&(h(0,"div",0),D(1,"canvas",1,2),d())},styles:[".drawRaceDiv[_ngcontent-%COMP%]{height:100%}.raceCanvas[_ngcontent-%COMP%]{border:1px solid black}"]}),t})();const XG=["circuitRewardModal"];function YG(t,n){if(1&t){const e=ie();h(0,"button",6),A("click",function(){return k(e),_(2).skipRaceAnimation()}),g(1,"Skip"),d()}}function QG(t,n){1&t&&(h(0,"span"),g(1,"BURST!"),d())}function KG(t,n){if(1&t){const e=ie();h(0,"button",6),A("click",function(){return k(e),_(2).pauseRaceAnimation()}),g(1,"Pause"),d()}}function ZG(t,n){if(1&t&&(h(0,"div",8)(1,"div",9)(2,"div"),x(3,YG,2,0,"button",10),d(),h(4,"div")(5,"span",11),g(6,"Vel:"),d(),h(7,"span",12),g(8,"Velocity:"),d(),g(9),x(10,QG,2,0,"span",3),d(),h(11,"div")(12,"span",11),g(13,"Stam:"),d(),h(14,"span",12),g(15,"Stamina:"),d(),g(16),d(),h(17,"div")(18,"span",11),g(19,"Pos:"),d(),h(20,"span",12),g(21,"Position:"),d(),g(22),d(),h(23,"div"),x(24,KG,2,0,"button",10),d()(),h(25,"div",13)(26,"div",14),D(27,"app-draw-race",15),d(),D(28,"div",16,17),d()()),2&t){const e=ot(29),i=_();p(3),m("ngIf",!i.grandPrixRace),p(6),ki(" ",i.velocityAtCurrentFrame," / ",i.maxSpeedAtCurrentFrame,"m/s "),p(1),m("ngIf",i.racerEffectAtCurrentFrame===i.burstEffect),p(6),q(" ",i.staminaAtCurrentFrame,"%"),p(6),ki(" ",i.positionAtCurrentFrame," / ",i.totalRacers,""),p(2),m("ngIf",!i.grandPrixRace),p(3),m("race",i.selectedRace)("skip",i.skipRace.asObservable())("pause",i.pauseRace.asObservable()),p(1),m("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),kt)}}function JG(t,n){if(1&t){const e=ie();h(0,"button",6),A("click",function(){return k(e),_(2).skipRaceAnimation()}),g(1,"Skip"),d()}}function ez(t,n){if(1&t){const e=ie();h(0,"button",6),A("click",function(){return k(e),_(2).pauseRaceAnimation()}),g(1,"Pause"),d()}}function tz(t,n){if(1&t&&(h(0,"div",18)(1,"div",19)(2,"div"),x(3,JG,2,0,"button",10),d(),h(4,"div"),x(5,ez,2,0,"button",10),d()(),D(6,"div",20,17),d()),2&t){const e=ot(7),i=_();p(3),m("ngIf",!i.grandPrixRace),p(2),m("ngIf",!i.grandPrixRace),p(1),m("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),kt)}}function iz(t,n){if(1&t){const e=ie();h(0,"button",6),A("click",function(){return k(e),_(2).skipRaceAnimation()}),g(1,"Skip"),d()}}function nz(t,n){1&t&&(h(0,"span"),g(1,"BURST!"),d())}function rz(t,n){if(1&t){const e=ie();h(0,"button",6),A("click",function(){return k(e),_(2).pauseRaceAnimation()}),g(1,"Pause"),d()}}function az(t,n){if(1&t&&(h(0,"div",18)(1,"div",19)(2,"div"),x(3,iz,2,0,"button",10),d(),h(4,"div")(5,"span",11),g(6,"Vel:"),d(),h(7,"span",12),g(8,"Velocity:"),d(),g(9),x(10,nz,2,0,"span",3),d(),h(11,"div")(12,"span",11),g(13,"Stam:"),d(),h(14,"span",12),g(15,"Stamina:"),d(),g(16),d(),h(17,"div")(18,"span",11),g(19,"Pos:"),d(),h(20,"span",12),g(21,"Position:"),d(),g(22),d(),h(23,"div"),x(24,rz,2,0,"button",10),d()(),h(25,"div",21),D(26,"app-draw-race",15)(27,"br"),d()()),2&t){const e=_();p(3),m("ngIf",!e.grandPrixRace),p(6),ki(" ",e.velocityAtCurrentFrame," / ",e.maxSpeedAtCurrentFrame,"m/s "),p(1),m("ngIf",e.racerEffectAtCurrentFrame===e.burstEffect),p(6),q(" ",e.staminaAtCurrentFrame,"%"),p(6),ki(" ",e.positionAtCurrentFrame," / ",e.totalRacers,""),p(2),m("ngIf",!e.grandPrixRace),p(2),m("race",e.selectedRace)("skip",e.skipRace.asObservable())("pause",e.pauseRace.asObservable())}}function oz(t,n){1&t&&D(0,"br")}function sz(t,n){if(1&t&&(h(0,"div",28),g(1),d()),2&t){const e=_().$implicit,i=_(3);p(1),q(" ",i.lookupService.getResourcePopover(e.name,e.shopItemTypeEnum)," ")}}function lz(t,n){if(1&t&&(h(0,"td")(1,"span",26),g(2),d(),g(3),x(4,sz,2,1,"ng-template",null,27,dt),d()),2&t){const e=n.$implicit,i=ot(5);p(1),m("ngbPopover",i),p(1),rt(e.name),p(1),q(": ",e.amount," ")}}function cz(t,n){if(1&t&&(h(0,"tr"),x(1,lz,6,3,"td",25),d()),2&t){const e=n.$implicit;p(1),m("ngForOf",e)}}function uz(t,n){if(1&t&&(h(0,"div",22)(1,"span",23),g(2,"Rewards"),d(),h(3,"div",24)(4,"table"),x(5,cz,2,1,"tr",25),d()()()),2&t){const e=_();p(5),m("ngForOf",e.rewardRows)}}function dz(t,n){if(1&t){const e=ie();h(0,"div",29)(1,"div",30)(2,"h4",31),g(3,"Circuit Rank Reward!"),d(),h(4,"button",32),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",33)(7,"div",34),g(8," After ranking up, you receive: "),D(9,"br"),h(10,"div",23),g(11),d()(),D(12,"br")(13,"br")(14,"div",35),d(),h(15,"div",36)(16,"button",37),A("click",function(){return k(e).$implicit.dismiss()}),g(17,"Continue"),d()()()}if(2&t){const e=_();p(11),rt(e.selectedRace.circuitIncreaseReward[0]),p(3),m("innerHTML",e.selectedRace.circuitIncreaseReward[1],kt)}}let RD=(()=>{class t{constructor(e,i,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.initializeService=o,this.modalService=s,this.sanitizer=l,this.raceLogicService=c,this.incrementalRaceUpdates="",this.raceFinished=new bt,this.skipRace=new Te,this.pauseRace=new Te,this.raceSkipped=!1,this.racePaused=!1,this.frameModifier=60,this.displayVisualRace=!0,this.displayTextUpdates=!0,this.burstEffect=ua.Burst,this.grandPrixRace=!1}keyEvent(e){(e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.goToRaceSelection()}ngOnInit(){var e=this,i=this.globalService.globalVar.settings.get("raceDisplayInfo");i===Pa.draw?(this.displayVisualRace=!0,this.displayTextUpdates=!1):i===Pa.text?(this.displayVisualRace=!1,this.displayTextUpdates=!0):i===Pa.both&&(this.displayVisualRace=!0,this.displayTextUpdates=!0),this.selectedRace.raceType===ge.event&&this.selectedRace.eventRaceType===Xe.grandPrix&&(this.grandPrixRace=!0);var r=new Bf;r=this.grandPrixRace?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult:this.raceLogicService.runRace(this.selectedRace),this.setupDisplayRewards(this.selectedRace),this.displayRaceUpdates(r),this.getFrameByFrameStats(),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.raceSkipped=!0),this.grandPrixRace&&(this.eventRaceSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Br(function*(){e.globalService.getTimeToEventRace()>0&&0===e.globalService.globalVar.eventRaceData.bonusTime&&e.raceFinished.emit(!0),e.globalService.globalVar.eventRaceData.isRunning||e.raceFinished.emit(!0)})))}ngOnDestroy(){null!=this.frameByFrameSubscription&&this.frameByFrameSubscription.unsubscribe(),null!=this.updateSubscription&&this.updateSubscription.unsubscribe(),null!=this.eventRaceSubscription&&this.eventRaceSubscription.unsubscribe(),this.raceFinished.emit(!0)}displayRaceUpdates(e){var i=this,r=e.raceUpdates;this.incrementalRaceUpdates="";var o=0,l=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,c=this.updateSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=Br(function*(f){if(i.racePaused||(i.selectedRace.raceType===ge.event&&i.selectedRace.eventRaceType===Xe.grandPrix&&(i.globalService.globalVar.eventRaceData.currentRaceSegmentCount>l&&(o=0,i.selectedRace=i.globalService.globalVar.eventRaceData.currentRaceSegment,r=i.globalService.globalVar.eventRaceData.currentRaceSegmentResult.raceUpdates),l=i.globalService.globalVar.eventRaceData.currentRaceSegmentCount),o+=1),(i.selectedRace.raceType!==ge.event||i.selectedRace.eventRaceType!==Xe.grandPrix)&&(0===r.length||i.raceSkipped))return i.raceSkipped&&r.forEach(v=>{i.incrementalRaceUpdates+=i.sanitizer.sanitize(_i.HTML,i.sanitizer.bypassSecurityTrustHtml(v.text+"\n"))}),e.wasSuccessful&&(i.displayResults=!0,null!=i.selectedRace.circuitIncreaseReward&&""!==i.selectedRace.circuitIncreaseReward[0]&&i.modalService.open(i.circuitRewardModal,{ariaLabelledBy:"modal-basic-title",size:"lg"})),void c.unsubscribe();i.selectedRace.raceType===ge.event&&i.selectedRace.eventRaceType===Xe.grandPrix?i.globalService.globalVar.eventRaceData.segmentTimeCounter*i.frameModifier>=r[0].value&&(i.incrementalRaceUpdates+=i.sanitizer.sanitize(_i.HTML,i.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift()):o>=r[0].value&&(i.incrementalRaceUpdates+=i.sanitizer.sanitize(_i.HTML,i.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift())});return function(f){return u.apply(this,arguments)}}())}setupDisplayRewards(e){this.rewardCells=[],this.rewardRows=[];var i=4;if(window.matchMedia("only screen and (max-width: 760px)").matches&&(i=2),null!=e.rewards){for(var r=1;r<=e.rewards.length;r++)this.rewardCells.push({name:e.rewards[r-1].name,amount:e.rewards[r-1].amount}),r%i==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}goToRaceSelection(){this.raceFinished.emit(!0)}skipRaceAnimation(){this.raceSkipped=!0,this.skipRace.next(!0)}pauseRaceAnimation(){this.racePaused=!this.racePaused,this.pauseRace.next(!0)}getFrameByFrameStats(){var e=this;this.totalRacers=this.lookupService.getTotalRacersByRace(this.selectedRace);var r=0,o=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount;this.frameByFrameSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=Br(function*(l){e.racePaused||(e.selectedRace.raceType===ge.event&&e.selectedRace.eventRaceType===Xe.grandPrix&&(e.globalService.globalVar.eventRaceData.currentRaceSegmentCount>o&&(e.selectedRace=e.globalService.globalVar.eventRaceData.currentRaceSegment),o=e.globalService.globalVar.eventRaceData.currentRaceSegmentCount),r+=1);var c;c=e.selectedRace.raceType===ge.event&&e.selectedRace.eventRaceType===Xe.grandPrix?Math.round(e.globalService.globalVar.eventRaceData.segmentTimeCounter*e.frameModifier):r;try{if(e.selectedRace.raceUI.velocityByFrame.length<=c||(e.selectedRace.raceType!==ge.event||e.selectedRace.eventRaceType!==Xe.grandPrix)&&e.raceSkipped){var u=e.selectedRace.raceUI.velocityByFrame.length-1;e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[u]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[u]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[u].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[u],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[u])}else e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[c]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[c]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[c].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[c],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[c])}catch(f){console.log("error")}});return function(l){return s.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(An),V(Rn),V(Ti),V(y0),V(io),V(hs),V(zf))},t.\u0275cmp=Tt({type:t,selectors:[["app-race"]],viewQuery:function(e,i){if(1&e&&Sr(XG,7),2&e){let r;yi(r=wi())&&(i.circuitRewardModal=r.first)}},hostBindings:function(e,i){1&e&&A("keyup",function(a){return i.keyEvent(a)},!1,Ca)},inputs:{selectedRace:"selectedRace"},outputs:{raceFinished:"raceFinished"},decls:11,vars:5,consts:[["id","raceInfo"],["class","bothDisplayValues",4,"ngIf"],["class","oneDisplayValue",4,"ngIf"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"back"],[3,"click"],["circuitRewardModal",""],[1,"bothDisplayValues"],[1,"headerInfo"],[3,"click",4,"ngIf"],[1,"mobileVersion"],[1,"webVersion"],[1,"updates"],[1,"drawRaces"],[3,"race","skip","pause"],[1,"raceUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],[1,"oneDisplayValue"],[1,"individualItemHeaderInfo"],[1,"raceUpdates","onlyText",3,"scrollTop","innerHTML"],[1,"drawRace","onlyDraw"],[1,"results"],[1,"s4Heading"],[1,"rewards"],[4,"ngFor","ngForOf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],["popContent",""],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,i){1&e&&(h(0,"div",0),x(1,ZG,30,13,"div",1),x(2,tz,8,4,"div",2),x(3,az,28,11,"div",2),x(4,oz,1,0,"br",3),x(5,uz,6,1,"div",4),h(6,"div",5)(7,"button",6),A("click",function(){return i.goToRaceSelection()}),g(8,"Back"),d()()(),x(9,dz,18,2,"ng-template",null,7,dt)),2&e&&(p(1),m("ngIf",i.displayVisualRace&&i.displayTextUpdates),p(1),m("ngIf",!i.displayVisualRace&&i.displayTextUpdates),p(1),m("ngIf",i.displayVisualRace&&!i.displayTextUpdates),p(1),m("ngIf",i.displayVisualRace&&!i.displayTextUpdates),p(1),m("ngIf",i.displayResults))},directives:[li,WG,Cn,Qr],styles:['#raceInfo[_ngcontent-%COMP%]{height:100%;margin-left:.5rem;margin-right:.5rem;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre;overflow-x:hidden}.headerInfo[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between}.individualItemHeaderInfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bothDisplayValues[_ngcontent-%COMP%], .oneDisplayValue[_ngcontent-%COMP%]{height:76.5%}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawRace raceUpdates"}.raceUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:raceUpdates}.drawRaces[_ngcontent-%COMP%]{grid-area:drawRace}.onlyText[_ngcontent-%COMP%], .onlyDraw[_ngcontent-%COMP%]{text-align:center;height:100%}.rightAlign[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:left}td[_ngcontent-%COMP%]{width:16.666%}.mobileVersion[_ngcontent-%COMP%]{display:none}.webVersion[_ngcontent-%COMP%]{display:inline-block}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;padding:1rem}.results[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawRace" "raceUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.raceUpdates[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:inline-block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();function hz(t,n){if(1&t){const e=ie();h(0,"div",9)(1,"button",10),A("click",function(){return k(e),_(2).returnToAnimalView()}),g(2,"Back"),d()()}}function fz(t,n){if(1&t){const e=ie();h(0,"div",11)(1,"div")(2,"app-animal-list",12),A("selectedAnimal",function(r){return k(e),_(2).selectedAnimal(r)}),d()()()}if(2&t){const e=_(2);p(2),m("availableAnimals",e.availableAnimals)("isTrainingTrackView",!0)}}function pz(t,n){if(1&t){const e=ie();h(0,"div",13)(1,"app-training-track-race-view",14),A("raceSelected",function(r){return k(e),_(2).raceSelected(r)})("returnEmitter",function(){return k(e),_(2).returnToAnimalView()}),d()()}if(2&t){const e=_(2);p(1),m("selectedAnimal",e.animal)}}function gz(t,n){if(1&t&&(h(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),g(4,"Training Track"),d(),h(5,"div",5),g(6," Each animal can run their own training track to gain rewards and unique bonuses. To get each reward, you will have to beat each track at a progressively faster pace. "),d()(),x(7,hz,3,0,"div",6),d(),D(8,"hr"),x(9,fz,3,2,"div",7),x(10,pz,2,1,"div",8),d()),2&t){const e=_();p(7),m("ngIf",e.animalSelected),p(2),m("ngIf",!e.animalSelected),p(1),m("ngIf",e.animalSelected)}}function vz(t,n){if(1&t){const e=ie();h(0,"div",15)(1,"app-race",16),A("raceFinished",function(){return k(e),_().raceFinished()}),d()()}if(2&t){const e=_();p(1),m("selectedRace",e.selectedRace)}}const mz=function(t){return{fullHeight:t}};let DD=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.animalSelected=!1,this.raceSelectedEmitter=new bt}keyEvent(e){this.animalSelected&&!this.showRace&&(e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.returnToAnimalView()}ngOnInit(){this.availableAnimals=this.globalService.globalVar.animals.filter(i=>i.isAvailable);var e=this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck);null!=e&&(this.existingPrimaryDeckAnimals=[],e.selectedAnimals.forEach(i=>{this.existingPrimaryDeckAnimals.push(i)}))}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(){this.animalSelected=!1}raceSelected(e){this.selectedRace=e,this.showRace=!0,this.raceSelectedEmitter.emit(!0)}ngOnDestroy(){this.raceSelectedEmitter.emit(!1)}raceFinished(){this.showRace=!1,this.raceSelectedEmitter.emit(!1);var e=this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck);null!=e&&(e.selectedAnimals=this.existingPrimaryDeckAnimals)}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Pn))},t.\u0275cmp=Tt({type:t,selectors:[["app-training-track-view"]],hostBindings:function(e,i){1&e&&A("keyup",function(a){return i.keyEvent(a)},!1,Ca)},outputs:{raceSelectedEmitter:"raceSelectedEmitter"},decls:3,vars:5,consts:[[1,"trainingTrackView",3,"ngClass"],[4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"infoGridContainer"],[1,"info"],[1,"description"],["class","back",4,"ngIf"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"back"],[3,"click"],[1,"selectAnimalView"],[3,"availableAnimals","isTrainingTrackView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","raceSelected","returnEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,i){1&e&&(h(0,"div",0),x(1,gz,11,3,"div",1),x(2,vz,2,1,"div",2),d()),2&e&&(m("ngClass",yt(3,mz,i.showRace)),p(1),m("ngIf",!i.showRace),p(1),m("ngIf",i.showRace))},directives:[cn,li,rp,$G,RD],styles:['.trainingTrackView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.fullHeight[_ngcontent-%COMP%]{height:100%}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}']}),t})();function bz(t,n){1&t&&(h(0,"span",13),g(1,"!"),d())}function _z(t,n){1&t&&(h(0,"span",13),g(1,"!"),d())}function yz(t,n){if(1&t){const e=ie();h(0,"div",6)(1,"div",7)(2,"button",8),A("click",function(){k(e);const r=_(2);return r.changeDisplayRaceView(r.raceTypeEnum.circuit)}),g(3,"Circuit Races"),d(),h(4,"button",9),A("click",function(){k(e);const r=_(2);return r.changeDisplayRaceView(r.raceTypeEnum.special)}),x(5,bz,2,0,"span",10),g(6,"Special Races"),d(),h(7,"button",11),A("click",function(){k(e);const r=_(2);return r.changeDisplayRaceView(r.raceTypeEnum.event)}),x(8,_z,2,0,"span",10),g(9,"Event Races"),d(),h(10,"button",12),A("click",function(){k(e);const r=_(2);return r.changeDisplayRaceView(r.raceTypeEnum.trainingTrack)}),g(11,"Training Track"),d()(),D(12,"hr"),d()}if(2&t){const e=_(2);p(2),m("ngClass",e.displayRaceView===e.raceTypeEnum.circuit?"filterActive":""),p(2),m("ngClass",e.displayRaceView===e.raceTypeEnum.special?"filterActive":""),p(1),m("ngIf",e.newSpecialRaceAvailable),p(2),m("ngClass",e.displayRaceView===e.raceTypeEnum.event?"filterActive":""),p(1),m("ngIf",e.eventRaceNowAvailable),p(2),m("ngClass",e.displayRaceView===e.raceTypeEnum.trainingTrack?"filterActive":"")}}function wz(t,n){if(1&t){const e=ie();h(0,"app-circuit-view",14),A("raceSelected",function(r){return k(e),_(2).raceSelected(r)}),d()}}function Cz(t,n){if(1&t){const e=ie();h(0,"app-local-view",14),A("raceSelected",function(r){return k(e),_(2).raceSelected(r)}),d()}}function Sz(t,n){if(1&t){const e=ie();h(0,"app-event-view",14),A("raceSelected",function(r){return k(e),_(2).raceSelected(r)}),d()}}function Tz(t,n){if(1&t){const e=ie();h(0,"app-training-track-view",15),A("raceSelectedEmitter",function(r){return k(e),_(2).trainingTrackRaceSelected(r)}),d()}}function Rz(t,n){if(1&t&&(h(0,"div",2),x(1,yz,13,6,"div",3),x(2,wz,1,0,"app-circuit-view",4),x(3,Cz,1,0,"app-local-view",4),x(4,Sz,1,0,"app-event-view",4),x(5,Tz,1,0,"app-training-track-view",5),d()),2&t){const e=_();p(1),m("ngIf",!e.trainingTrackRace),p(1),m("ngIf",e.displayRaceView===e.raceTypeEnum.circuit),p(1),m("ngIf",e.displayRaceView===e.raceTypeEnum.special),p(1),m("ngIf",e.displayRaceView===e.raceTypeEnum.event),p(1),m("ngIf",e.displayRaceView===e.raceTypeEnum.trainingTrack)}}function Dz(t,n){if(1&t){const e=ie();h(0,"div",16)(1,"app-race",17),A("raceFinished",function(){return k(e),_().raceFinished()}),d()()}if(2&t){const e=_();p(1),m("selectedRace",e.selectedRace)}}let xz=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.componentCommunicationService=i,this.gameLoopService=r,this.lookupService=a,this.displayRaceView=ge.circuit,this.showRace=!1,this.trainingTrackRace=!1,this.raceTypeEnum=ge,this.newSpecialRaceAvailable=!1,this.eventRaceNowAvailable=!1}ngOnInit(){var e=this;this.componentCommunicationService.setNewView(Pt.raceselection),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var i=Br(function*(r){e.newSpecialRaceAvailable=e.globalService.globalVar.notifications.isNewSpecialRaceAvailable&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>9),e.eventRaceNowAvailable=e.globalService.globalVar.notifications.isEventRaceNowActive&&e.lookupService.isItemUnlocked("grandPrix")&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>9)});return function(r){return i.apply(this,arguments)}}()),this.communicationSubscription=this.componentCommunicationService.getRaceView().subscribe(i=>{this.displayRaceView=i})}changeDisplayRaceView(e){this.displayRaceView=e,e===ge.special&&(this.newSpecialRaceAvailable=this.globalService.globalVar.notifications.isNewSpecialRaceAvailable=!1),e===ge.event&&(this.eventRaceNowAvailable=this.globalService.globalVar.notifications.isEventRaceNowActive=!1)}raceSelected(e){this.selectedRace=e,this.showRace=!0}raceFinished(){this.showRace=!1}trainingTrackRaceSelected(e){this.trainingTrackRace=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.communicationSubscription&&this.communicationSubscription.unsubscribe(),this.globalService.globalVar.localRaces=[]}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Pn),V(An),V(Ti))},t.\u0275cmp=Tt({type:t,selectors:[["app-race-selection-view"]],decls:2,vars:2,consts:[["class","raceSelectionDiv",4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"raceSelectionDiv"],["class","info",4,"ngIf"],[3,"raceSelected",4,"ngIf"],[3,"raceSelectedEmitter",4,"ngIf"],[1,"info"],[1,"raceGridContainer"],[1,"buttonAsText","circuit","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","local","s5Heading","clickableText",3,"ngClass","click"],["class","availableIcon",4,"ngIf"],[1,"buttonAsText","event","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","trainingTrack","s5Heading","clickableText",3,"ngClass","click"],[1,"availableIcon"],[3,"raceSelected"],[3,"raceSelectedEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,i){1&e&&(x(0,Rz,6,5,"div",0),x(1,Dz,2,1,"div",1)),2&e&&(m("ngIf",!i.showRace),p(1),m("ngIf",i.showRace))},directives:[li,cn,_9,j9,PG,DD,RD],styles:['.raceGridContainer[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"circuit local event trainingTrack"}.raceSelectionDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.circuit[_ngcontent-%COMP%]{grid-area:circuit;text-align:center}.local[_ngcontent-%COMP%]{grid-area:local;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.trainingTrack[_ngcontent-%COMP%]{grid-area:trainingTrack;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary);-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.availableIcon[_ngcontent-%COMP%]{color:var(--foreground-quaternary);border-radius:25px;background:var(--background-five);padding:0 .5rem;margin-right:.25rem}@media (max-width: 800px){.raceGridContainer[_ngcontent-%COMP%]{grid-template-columns:.9fr 1.1fr 1fr 1fr}}']}),t})(),kz=(()=>{class t{constructor(e){this.utilityService=e}ngOnInit(){}toggle(){null!=this.callbackFunction&&this.callbackFunction()}getId(){return"cbxInput"+this.id}}return t.\u0275fac=function(e){return new(e||t)(V(Rn))},t.\u0275cmp=Tt({type:t,selectors:[["app-toggle"]],inputs:{model:"model",label:"label",id:"id",popoverText:"popoverText",callbackFunction:"callbackFunction"},decls:5,vars:5,consts:[[1,"custom-control","custom-switch"],["triggers","mouseenter:mouseleave",3,"ngbPopover"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange","input"],[1,"custom-control-label",3,"for"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"span",1)(2,"input",2),A("ngModelChange",function(a){return i.model=a})("input",function(){return i.toggle()}),d(),h(3,"label",3),g(4),d()()()),2&e&&(p(1),m("ngbPopover",i.popoverText),p(1),m("id",i.getId())("ngModel",i.model),p(1),m("for",i.getId()),p(1),rt(i.label))},directives:[Qr,rc,Uo,Ho],styles:[""]}),t})();function Mz(t,n){if(1&t&&(h(0,"div",7)(1,"em"),g(2),d(),D(3,"br")(4,"br"),d()),2&t){const e=_();p(2),q("",e.pointsNeededInColumn," points needed in this column to unlock")}}function Az(t,n){1&t&&(h(0,"div",7)(1,"em"),g(2," Click Upgrade to unlock this talent. "),D(3,"br")(4,"br"),d()())}function Pz(t,n){1&t&&(h(0,"div"),D(1,"br")(2,"br"),d())}function Vz(t,n){if(1&t&&(h(0,"div"),D(1,"br"),h(2,"em")(3,"div",7),g(4,"Next Upgrade: "),d()(),D(5,"div",8),d()),2&t){const e=_();p(5),m("innerHTML",e.upgradedTalentDescription,kt)}}function Iz(t,n){if(1&t){const e=ie();h(0,"div",9),g(1),h(2,"button",10),A("click",function(){return k(e),_().spendTalentPoint()}),g(3,"Upgrade"),d()()}if(2&t){const e=_();p(1),ki(" ",e.pointsInTalent," / ",e.totalPossiblePoints," Points "),p(1),m("disabled",!e.hasTalentPoint||!e.hasEnoughPointsInColumn||e.isTalentMaxed())}}const Oz=function(t){return{talentInactive:t}};let Ez=(()=>{class t{constructor(e,i,r){this.lookupService=e,this.gameLoopService=i,this.globalService=r,this.isPreview=!1,this.previewType="",this.spentTalent=new bt}ngOnInit(){this.talentTreeType=this.selectedAnimal.talentTree.talentTreeType,this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.totalPossiblePoints=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.talentTreeType),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0;var e=0;1===this.row&&(e=this.selectedAnimal.talentTree.row2RequiredPoints),2===this.row&&(e=this.selectedAnimal.talentTree.row3RequiredPoints),3===this.row&&(e=this.selectedAnimal.talentTree.row4RequiredPoints),this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0,this.isPreview&&""!==this.previewType&&(this.talentTreeType=this.lookupService.getTalentTreeByStringName(this.previewType)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0})}isTalentMaxed(){var e=!1;return this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column)>=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.selectedAnimal.talentTree.talentTreeType)&&(e=!0),e}spendTalentPoint(){this.isTalentMaxed()||(this.selectedAnimal.talentTree.spendTalentPoint(this.row,this.column),this.spentTalent.emit(!0),this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.globalService.calculateAnimalRacingStats(this.selectedAnimal))}ngOnChanges(e){void 0!==e.previewType&&this.isPreview&&(this.previewType=e.previewType.currentValue,this.talentTreeType=this.lookupService.getTalentTreeByStringName(this.previewType))}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(Ti),V(An),V(It))},t.\u0275cmp=Tt({type:t,selectors:[["app-talent"]],inputs:{selectedAnimal:"selectedAnimal",row:"row",column:"column",isPreview:"isPreview",previewType:"previewType"},outputs:{spentTalent:"spentTalent"},features:[jn],decls:12,vars:12,consts:[[1,"talent"],[1,"header","keyword"],[1,"content"],["class","centeredText",4,"ngIf"],[4,"ngIf"],[1,"description",3,"ngClass","innerHTML"],["class","footer",4,"ngIf"],[1,"centeredText"],[1,"talentInactive",3,"innerHTML"],[1,"footer"],[3,"disabled","click"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"span"),g(3),d()(),h(4,"div",2),x(5,Mz,5,1,"div",3),x(6,Az,5,0,"div",3),x(7,Pz,3,0,"div",4),D(8,"div",5),x(9,Vz,6,1,"div",4),D(10,"br"),x(11,Iz,4,3,"div",6),d()()),2&e&&(p(3),wh("",i.lookupService.getNameByTalentTree(i.talentTreeType)," Column ",i.column+1," Row ",i.row+1,""),p(2),m("ngIf",i.pointsNeededInColumn>0),p(1),m("ngIf",i.pointsNeededInColumn<=0&&0===i.pointsInTalent&&!i.isPreview),p(1),m("ngIf",i.pointsInTalent===i.totalPossiblePoints),p(1),m("ngClass",yt(10,Oz,0===i.pointsInTalent))("innerHTML",i.talentDescription,kt),p(1),m("ngIf",i.pointsInTalent>0&&i.pointsInTalent<i.totalPossiblePoints&&!i.isPreview),p(2),m("ngIf",!i.isPreview))},directives:[li,cn],styles:['.talent[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr;justify-content:stretch;grid-template-areas:"header" "content"}.header[_ngcontent-%COMP%]{grid-area:header;background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary)}.content[_ngcontent-%COMP%]{grid-area:content;margin:1rem;display:flex;flex-direction:column;justify-content:space-between}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.talentInactive[_ngcontent-%COMP%]{opacity:.6}']}),t})();function Nz(t,n){if(1&t&&(h(0,"span"),g(1),d()),2&t){const e=_(2).$implicit;p(1),q("Level ",e.level+1,"")}}function Bz(t,n){1&t&&(h(0,"span"),g(1,"MAX"),d())}function Fz(t,n){if(1&t&&(h(0,"span"),g(1),Vt(2,"number"),Vt(3,"number"),h(4,"span",12),g(5),Vt(6,"number"),d(),g(7,")"),d()),2&t){const e=_(2).$implicit,i=_();p(1),ki("XP needed for next level: ",Qt(2,3,e.xp,"1.2-2")," / ",Qt(3,6,e.xpNeededForLevel,"1.0-0")," ("),p(4),q("",Qt(6,9,i.getProgressBarPercent(e.type),"1.2-2"),"%")}}function Lz(t,n){1&t&&(h(0,"span"),g(1,"MAX"),d())}function Uz(t,n){if(1&t){const e=ie();h(0,"div",1)(1,"div",5)(2,"span",6)(3,"button",7),A("click",function(){k(e);const r=_().$implicit;return _().toggleOrb(r.type)}),g(4,"-"),d()(),h(5,"span",8),g(6),d(),D(7,"span",6),d(),h(8,"p"),g(9),d(),h(10,"div")(11,"span",9)(12,"span"),g(13),d(),D(14,"ngb-progressbar",10),x(15,Nz,2,1,"span",11),x(16,Bz,2,0,"span",11),d(),x(17,Fz,8,12,"span",11),x(18,Lz,2,0,"span",11),D(19,"br")(20,"br"),g(21),d()()}if(2&t){const e=_().$implicit,i=_();p(5),m("ngClass",i.colorConditional(e.type)),p(1),rt(i.globalService.getOrbNameFromType(e.type)),p(3),ki("Level ",e.level," / ",e.maxLevel,""),p(4),q("Level ",e.level,""),p(1),m("value",i.getProgressBarPercent(e.type)),p(1),m("ngIf",e.level<e.maxLevel),p(1),m("ngIf",e.level>=e.maxLevel),p(1),m("ngIf",e.level<e.maxLevel),p(1),m("ngIf",e.level>=e.maxLevel),p(3),q(" ",i.globalService.getOrbDescription(e.type)," ")}}function Hz(t,n){if(1&t&&(h(0,"span",18),g(1),Vt(2,"number"),d()),2&t){const e=_(2).$implicit;p(1),ki("XP needed for Level ",e.level+1,": ",Qt(2,2,e.xpNeededForLevel-e.xp,"1.0-0")," ")}}function Gz(t,n){1&t&&(h(0,"span",18),g(1,"MAX"),d())}function zz(t,n){if(1&t){const e=ie();h(0,"div",13)(1,"span",6)(2,"button",7),A("click",function(){k(e);const r=_().$implicit;return _().toggleOrb(r.type)}),g(3,"+"),d()(),h(4,"span",14),g(5),d(),h(6,"span",15),g(7),d(),D(8,"ngb-progressbar",16),x(9,Hz,3,5,"span",17),x(10,Gz,2,0,"span",17),d()}if(2&t){const e=_().$implicit,i=_();p(4),m("ngClass",i.colorConditional(e.type)),p(1),rt(i.globalService.getOrbNameFromType(e.type)),p(2),ki("Level ",e.level," / ",e.maxLevel,""),p(1),m("value",i.getProgressBarPercent(e.type)),p(1),m("ngIf",e.level<e.maxLevel),p(1),m("ngIf",e.level>=e.maxLevel)}}function jz(t,n){if(1&t&&(h(0,"div"),x(1,Uz,22,11,"div",3),x(2,zz,11,7,"div",4),D(3,"hr"),d()),2&t){const e=n.$implicit,i=_();p(1),m("ngIf",!i.isOrbMinimized(e.type)),p(1),m("ngIf",i.isOrbMinimized(e.type))}}let xD=(()=>{class t{constructor(e){this.globalService=e}ngOnInit(){this.allOrbs=this.globalService.globalVar.orbStats.allOrbs.filter(e=>this.globalService.globalVar.resources.some(i=>this.globalService.getOrbTypeFromResource(i)===e.type))}getProgressBarPercent(e){var i=this.globalService.getOrbDetailsFromType(e);return void 0!==i?i.xp/i.xpNeededForLevel*100:0}toggleOrb(e){if(e===Be.amber){var i=this.globalService.globalVar.settings.get("amberOrbToggled");this.globalService.globalVar.settings.set("amberOrbToggled",!i)}e===Be.amethyst&&(i=this.globalService.globalVar.settings.get("amethystOrbToggled"),this.globalService.globalVar.settings.set("amethystOrbToggled",!i)),e===Be.emerald&&(i=this.globalService.globalVar.settings.get("emeraldOrbToggled"),this.globalService.globalVar.settings.set("emeraldOrbToggled",!i)),e===Be.ruby&&(i=this.globalService.globalVar.settings.get("rubyOrbToggled"),this.globalService.globalVar.settings.set("rubyOrbToggled",!i)),e===Be.sapphire&&(i=this.globalService.globalVar.settings.get("sapphireOrbToggled"),this.globalService.globalVar.settings.set("sapphireOrbToggled",!i)),e===Be.topaz&&(i=this.globalService.globalVar.settings.get("topazOrbToggled"),this.globalService.globalVar.settings.set("topazOrbToggled",!i))}isOrbMinimized(e){var i=!1;return e===Be.amber&&(i=this.globalService.globalVar.settings.get("amberOrbToggled")),e===Be.amethyst&&(i=this.globalService.globalVar.settings.get("amethystOrbToggled")),e===Be.emerald&&(i=this.globalService.globalVar.settings.get("emeraldOrbToggled")),e===Be.ruby&&(i=this.globalService.globalVar.settings.get("rubyOrbToggled")),e===Be.sapphire&&(i=this.globalService.globalVar.settings.get("sapphireOrbToggled")),e===Be.topaz&&(i=this.globalService.globalVar.settings.get("topazOrbToggled")),i}colorConditional(e){return{amberColor:e===Be.amber,amethystColor:e===Be.amethyst,rubyColor:e===Be.ruby,sapphireColor:e===Be.sapphire,topazColor:e===Be.topaz,emeraldColor:e===Be.emerald}}}return t.\u0275fac=function(e){return new(e||t)(V(It))},t.\u0275cmp=Tt({type:t,selectors:[["app-orbs-view"]],decls:5,vars:1,consts:[[1,"orbView"],[1,"centered"],[4,"ngFor","ngForOf"],["class","centered",4,"ngIf"],["class","minimizedDisplay",4,"ngIf"],[1,"minimizer"],[1,"minimizerSideSpacing"],[3,"click"],[1,"s4Heading","keyword",3,"ngClass"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[4,"ngIf"],[1,"customLabel"],[1,"minimizedDisplay"],[1,"s4Heading","keyword","orbNameWidth",3,"ngClass"],[1,"setVerticalAlign"],["type","success",1,"progressBar","progressBarMinimized","setVerticalAlign",3,"value"],["class","setVerticalAlign xpWidth",4,"ngIf"],[1,"setVerticalAlign","xpWidth"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1),g(2," Each orb is attuned to a specific stat, increasing it by 20% per level. This increase is reduced proportionally for however many racers use the same orb during a single race. Orb XP is only gained from races you win and does not include Training Tracks. To equip an Orb, you must first get the 'Orb Pendant' from the Master Training Track. After collecting all of the orbs, you will find a way to increase their max level. "),d(),D(3,"hr"),x(4,jz,4,2,"div",2),d()),2&e&&(p(4),m("ngForOf",i.allOrbs))},directives:[Cn,li,cn,dd],pipes:[Qa],styles:[".orbView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.progressBar[_ngcontent-%COMP%]{width:50%}.progressBarMinimized[_ngcontent-%COMP%]{width:30%!important}.progressBarContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.xpWidth[_ngcontent-%COMP%]{width:20%;text-align:center}.minimizer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.minimizerSideSpacing[_ngcontent-%COMP%]{width:3rem}.minimizedDisplay[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.setVerticalAlign[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.orbNameWidth[_ngcontent-%COMP%]{width:8rem}"]}),t})();function $z(t,n){if(1&t&&(h(0,"div",14),g(1,"Equipped: "),h(2,"span",56),g(3),d(),D(4,"br")(5,"br"),g(6),d()),2&t){const e=_();m("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)),p(3),rt(e.selectedAnimal.equippedItem.name),p(3),q(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)," ")}}function qz(t,n){1&t&&(h(0,"div"),g(1," Equipped: None "),d())}function Wz(t,n){if(1&t){const e=ie();h(0,"button",16),A("click",function(){return k(e),_().unequipItem()}),g(1,"Unequip Item"),d()}}function Xz(t,n){if(1&t&&(h(0,"span",12),g(1),d()),2&t){const e=_(2);p(1),q(" ",e.getTalentTreeName(),"")}}function Yz(t,n){if(1&t){const e=ie();h(0,"div",57)(1,"div"),x(2,Xz,2,1,"span",58),d(),h(3,"button",16),A("click",function(){k(e);const r=_(),a=ot(223);return r.openTalentsModal(a)}),g(4,"View Talents"),d()()}if(2&t){const e=_();p(2),m("ngIf",e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none)}}function Qz(t,n){if(1&t){const e=ie();h(0,"div")(1,"span",60),g(2),d(),h(3,"span")(4,"button",61),A("click",function(){k(e);const r=_(2);return r.editingName=!r.editingName}),g(5,"Edit"),d()()()}if(2&t){const e=_(2);p(2),q("",e.selectedAnimal.name," ")}}function Kz(t,n){if(1&t){const e=ie();h(0,"div")(1,"span")(2,"input",62),A("ngModelChange",function(r){return k(e),_(2).newName=r}),d()(),h(3,"span")(4,"button",16),A("click",function(){return k(e),_(2).editName()}),g(5,"Save"),d()(),h(6,"span")(7,"button",16),A("click",function(){k(e);const r=_(2);return r.editingName=!r.editingName}),g(8,"Cancel"),d()()()}if(2&t){const e=_(2);p(2),m("ngModel",e.newName)}}function Zz(t,n){if(1&t&&(h(0,"span",63),g(1),d()),2&t){const e=_(2);Cr("ngbPopover",e.traitStatGainDescription),p(1),q(" ",e.selectedAnimal.trait.traitName," ")}}function Jz(t,n){if(1&t&&(h(0,"div"),x(1,Qz,6,1,"div",6),x(2,Kz,9,1,"div",6),h(3,"span",12),x(4,Zz,2,2,"span",59),g(5),d()()),2&t){const e=_();p(1),m("ngIf",!e.editingName),p(1),m("ngIf",e.editingName),p(2),m("ngIf",null!=e.selectedAnimal.trait),p(1),q(" ",e.selectedAnimal.getAnimalType()," ")}}function ej(t,n){if(1&t){const e=ie();h(0,"div")(1,"span")(2,"button",16),A("click",function(){k(e);const r=_(2);return r.editingName=!r.editingName}),g(3,"Edit Name"),d()()()}}function tj(t,n){if(1&t){const e=ie();h(0,"div")(1,"span")(2,"input",64),A("ngModelChange",function(r){return k(e),_(2).newName=r}),d()(),h(3,"span")(4,"button",16),A("click",function(){return k(e),_(2).editName()}),g(5,"Save"),d()(),h(6,"span")(7,"button",16),A("click",function(){k(e);const r=_(2);return r.editingName=!r.editingName}),g(8,"Cancel"),d()()()}if(2&t){const e=_(2);p(2),m("ngModel",e.newName)}}function ij(t,n){if(1&t&&(h(0,"span",63),g(1),d()),2&t){const e=_(2);Cr("ngbPopover",e.traitStatGainDescription),p(1),q(" ",e.selectedAnimal.trait.traitName," ")}}function nj(t,n){if(1&t&&(h(0,"div"),x(1,ej,4,0,"div",6),x(2,tj,9,1,"div",6),h(3,"span",12),x(4,ij,2,2,"span",59),g(5),d()()),2&t){const e=_();p(1),m("ngIf",!e.editingName),p(1),m("ngIf",e.editingName),p(2),m("ngIf",null!=e.selectedAnimal.trait),p(1),q(" ",e.selectedAnimal.getAnimalType()," ")}}function rj(t,n){if(1&t&&(h(0,"em"),g(1),d()),2&t){const e=_();p(1),q("(",e.selectedAnimal.currentTraining.trainingName,")")}}function aj(t,n){if(1&t&&D(0,"app-toggle",65),2&t){const e=_();m("callbackFunction",e.toggleAutoBreed)("label","Auto Breed")("model",e.autoBreedActive)}}function oj(t,n){if(1&t&&(h(0,"div",14)(1,"span",67),g(2),d(),D(3,"br")(4,"br"),g(5),d()),2&t){const e=_(2);m("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)),p(1),m("ngClass",e.orbColorConditional(e.selectedAnimal.equippedOrb)),p(1),rt(e.selectedAnimal.equippedOrb.name),p(3),q(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)," ")}}function sj(t,n){1&t&&(h(0,"div"),g(1," No orb selected "),d())}function lj(t,n){if(1&t){const e=ie();h(0,"button",16),A("click",function(){return k(e),_(2).unequipOrb()}),g(1,"Unequip Orb"),d()}}function cj(t,n){if(1&t){const e=ie();h(0,"div",66),x(1,oj,6,4,"div",5),x(2,sj,2,0,"div",6),D(3,"br"),x(4,lj,2,0,"button",7),h(5,"button",8),A("click",function(){k(e);const r=_(),a=ot(221);return r.openOrbModal(a)}),g(6,"Equip New Orb"),d()()}if(2&t){const e=_();p(1),m("ngIf",null!=e.selectedAnimal.equippedOrb),p(1),m("ngIf",null==e.selectedAnimal.equippedOrb),p(2),m("ngIf",null!=e.selectedAnimal.equippedOrb)}}function uj(t,n){if(1&t&&(h(0,"div")(1,"span")(2,"span",68),g(3,"Bonus Breed XP From Training:"),d(),g(4),Vt(5,"number"),d(),D(6,"br"),d()),2&t){const e=_(),i=ot(205);p(2),m("ngbPopover",i),p(2),q(" ",Qt(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromTraining,"1.0-0")," ")}}function dj(t,n){if(1&t&&(h(0,"div")(1,"span")(2,"span",68),g(3,"Bonus Breed XP From Free Races:"),d(),g(4),Vt(5,"number"),d()()),2&t){const e=_(),i=ot(201);p(2),m("ngbPopover",i),p(2),q(" ",Qt(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces,"1.0-0")," ")}}function hj(t,n){if(1&t&&(h(0,"div")(1,"span")(2,"span",68),g(3,"Bonus Breed XP From Circuit Races:"),d(),g(4),Vt(5,"number"),d()()),2&t){const e=_(),i=ot(203);p(2),m("ngbPopover",i),p(2),q(" ",Qt(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces,"1.0-0")," ")}}function fj(t,n){if(1&t&&(h(0,"div")(1,"span")(2,"span",68),g(3,"Training Time Reduction:"),d(),g(4),Vt(5,"number"),d()()),2&t){const e=_(),i=ot(209);p(2),m("ngbPopover",i),p(2),q(" ",Qt(5,2,e.selectedAnimal.miscStats.trainingTimeReduction,"1.0-0"),"% ")}}function pj(t,n){if(1&t&&(h(0,"div")(1,"span")(2,"span",68),g(3,"Bonus Diminishing Returns per Facility Level:"),d(),g(4),Vt(5,"number"),d()()),2&t){const e=_(),i=ot(207);p(2),m("ngbPopover",i),p(2),q(" ",Qt(5,2,e.selectedAnimal.miscStats.diminishingReturnsBonus,"1.0-0")," ")}}function gj(t,n){if(1&t&&(h(0,"div")(1,"span")(2,"span",68),g(3,"Bonus Talents:"),d(),g(4),Vt(5,"number"),d()()),2&t){const e=_(),i=ot(211);p(2),m("ngbPopover",i),p(2),q(" ",Qt(5,2,e.selectedAnimal.miscStats.bonusTalents,"1.0-0")," ")}}function vj(t,n){if(1&t&&(h(0,"div")(1,"span")(2,"span",68),g(3,"Bonus Ability Efficiency:"),d(),g(4),Vt(5,"number"),d()()),2&t){const e=_(),i=ot(213);p(2),m("ngbPopover",i),p(2),q(" ",Qt(5,2,100*e.selectedAnimal.miscStats.bonusAbilityEfficiency,"1.0-0"),"% ")}}function mj(t,n){if(1&t&&(h(0,"div")(1,"span")(2,"span",68),g(3,"Bonus Orb XP Gain:"),d(),g(4),Vt(5,"number"),d()()),2&t){const e=_(),i=ot(215);p(2),m("ngbPopover",i),p(2),q(" ",Qt(5,2,100*e.selectedAnimal.miscStats.bonusOrbXp,"1.0-0"),"% ")}}function bj(t,n){if(1&t){const e=ie();h(0,"button",69),A("click",function(){k(e);const r=_();return r.selectAbility(r.ability2)}),g(1),d()}if(2&t){const e=_();Bt("filterActive",e.selectedAnimal.ability.name===e.ability2.name),p(1),q("",e.ability2.name," ")}}function _j(t,n){if(1&t){const e=ie();h(0,"button",70),A("click",function(){k(e);const r=_();return r.selectAbility(r.ability3)}),g(1),d()}if(2&t){const e=_();Bt("filterActive",e.selectedAnimal.ability.name===e.ability3.name),p(1),q("",e.ability3.name," ")}}function yj(t,n){if(1&t&&(h(0,"span"),g(1),d()),2&t){const e=_();p(1),ki("",e.selectedAbility.abilityXp," / ",e.selectedAbility.abilityMaxXp," XP")}}function wj(t,n){1&t&&(h(0,"span"),g(1,"MAX"),d())}function Cj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getTopSpeedPopover()," ")}}function Sj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getAccelerationPopover()," ")}}function Tj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getEndurancePopover()," ")}}function Rj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getPowerPopover()," ")}}function Dj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getFocusPopover()," ")}}function xj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getAdaptabilityPopover()," ")}}function kj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getAbilityLevelPopover()," ")}}function Mj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getBonusFreeRaceXpPopover()," ")}}function Aj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getBonusCircuitRaceXpPopover()," ")}}function Pj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getBonusTrainingXpPopover()," ")}}function Vj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," ")}}function Ij(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getBonusTrainingTimeReductionPopover()," ")}}function Oj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getBonusTalentsPopover()," ")}}function Ej(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getBonusAbilityEfficiencyPopover()," ")}}function Nj(t,n){if(1&t&&(h(0,"div",71),g(1),d()),2&t){const e=_();p(1),q(" ",e.getBonusOrbXpPopover()," ")}}function Bj(t,n){if(1&t&&(h(0,"div"),D(1,"span",32),d()),2&t){const e=_().$implicit,i=_(4);p(1),m("innerHTML",i.getItemAdditionalText(e),kt)}}const Fj=function(t){return{activeSelectedItem:t}};function Lj(t,n){if(1&t){const e=ie();h(0,"td",81)(1,"div",82),A("click",function(){const a=k(e).$implicit;return _(4).selectItem(a)}),h(2,"h6",83),g(3),d(),x(4,Bj,2,1,"div",6),D(5,"br")(6,"br"),g(7),D(8,"br")(9,"br"),d()()}if(2&t){const e=n.$implicit,i=_(4);p(1),m("ngClass",yt(5,Fj,e.isSelected)),p(2),ki("",e.name," (",e.amount,")"),p(1),m("ngIf",i.itemHasAdditionalText(e)),p(3),q(" ",i.getItemShortDescription(e.name)," ")}}function Uj(t,n){if(1&t&&(h(0,"tr"),x(1,Lj,10,7,"td",80),d()),2&t){const e=n.$implicit;p(1),m("ngForOf",e)}}function Hj(t,n){if(1&t){const e=ie();h(0,"div",84)(1,"span",85)(2,"span")(3,"span",83),g(4),d(),g(5),d(),h(6,"span",86)(7,"label",87),g(8,"Amount: "),d(),h(9,"input",88),A("ngModelChange",function(r){return k(e),_(3).selectedItemQuantity=r}),d(),h(10,"button",89),A("click",function(){return k(e),_(3).useItem()}),g(11,"Use"),d()()()()}if(2&t){const e=_(3);p(4),rt(e.selectedItem.name),p(1),q(" - ",e.getItemShortDescription(e.selectedItem.name)," "),p(4),m("ngModel",e.selectedItemQuantity)}}function Gj(t,n){if(1&t&&(h(0,"div")(1,"div",76)(2,"div",77)(3,"table"),x(4,Uj,2,1,"tr",78),d()()(),x(5,Hj,12,3,"div",79),d()),2&t){const e=_(2);p(4),m("ngForOf",e.itemsRows),p(1),m("ngIf",null!=e.selectedItem)}}function zj(t,n){1&t&&(h(0,"div"),g(1," No items available. "),d())}function jj(t,n){if(1&t){const e=ie();h(0,"div",72)(1,"form")(2,"div",73)(3,"h4",74),g(4,"Use Item"),d(),h(5,"button",75),A("click",function(){return k(e).$implicit.dismiss()}),g(6,"X"),d()(),x(7,Gj,6,2,"div",6),x(8,zj,2,0,"div",6),d()()}if(2&t){const e=_();p(7),m("ngIf",e.usableItemsList.length>0),p(1),m("ngIf",0==e.usableItemsList.length)}}const $j=function(t){return{activeSelectedEquipment:t}};function qj(t,n){if(1&t){const e=ie();h(0,"td",81)(1,"div",91),A("click",function(){const a=k(e).$implicit;return _(3).selectEquipment(a)}),h(2,"h6",56),g(3),d(),D(4,"br")(5,"br"),g(6),D(7,"br"),d()()}if(2&t){const e=n.$implicit,i=_(3);p(1),m("ngClass",yt(4,$j,e.isSelected)),p(2),ki("",e.name," (",e.amount,")"),p(3),q(" ",i.getEquipmentShortDescription(e.name)," ")}}function Wj(t,n){if(1&t&&(h(0,"tr"),x(1,qj,8,6,"td",80),d()),2&t){const e=n.$implicit;p(1),m("ngForOf",e)}}function Xj(t,n){if(1&t){const e=ie();h(0,"div",84)(1,"span",92)(2,"span")(3,"span",56),g(4),d(),g(5),d(),h(6,"span",86)(7,"button",89),A("click",function(){return k(e),_(2).equipItem()}),g(8,"Equip"),d()()()()}if(2&t){const e=_(2);p(4),rt(e.selectedEquipment.name),p(1),q(" - ",e.getEquipmentShortDescription(e.selectedEquipment.name)," ")}}function Yj(t,n){1&t&&(h(0,"div"),g(1," No equipment available. "),d())}function Qj(t,n){if(1&t){const e=ie();h(0,"div",72)(1,"form")(2,"div",73)(3,"h4",74),g(4,"Change Equipment"),d(),h(5,"button",75),A("click",function(){const a=k(e).$implicit;return _().clearSelectedItems(),a.dismiss()}),g(6,"X"),d()(),h(7,"div")(8,"div",76)(9,"div",90)(10,"table"),x(11,Wj,2,1,"tr",78),d()()(),x(12,Xj,9,2,"div",79),d(),x(13,Yj,2,0,"div",6),d()()}if(2&t){const e=_();p(11),m("ngForOf",e.equipmentRows),p(1),m("ngIf",null!=e.selectedEquipment),p(1),m("ngIf",0==e.equipmentList.length)}}const Kj=function(t){return{activeSelectedOrb:t}};function Zj(t,n){if(1&t){const e=ie();h(0,"td",81)(1,"div",96),A("click",function(){const a=k(e).$implicit;return _(3).selectOrb(a)}),h(2,"h6",11),g(3),d(),D(4,"br"),g(5),D(6,"br"),d()()}if(2&t){const e=n.$implicit,i=_(3);p(1),m("ngClass",yt(4,Kj,e.isSelected)),p(1),m("ngClass",i.orbColorConditional(e)),p(1),rt(e.name),p(2),q(" ",i.getEquipmentShortDescription(e.name)," ")}}function Jj(t,n){if(1&t&&(h(0,"tr"),x(1,Zj,7,6,"td",80),d()),2&t){const e=n.$implicit;p(1),m("ngForOf",e)}}function e$(t,n){if(1&t){const e=ie();h(0,"div",84)(1,"span",97)(2,"span")(3,"span",11),g(4),d(),g(5),d(),h(6,"span",86)(7,"button",89),A("click",function(){return k(e),_(2).equipOrb()}),g(8,"Equip"),d()()()()}if(2&t){const e=_(2);p(3),m("ngClass",e.orbColorConditional(e.selectedOrb)),p(1),rt(e.selectedOrb.name),p(1),q(" - ",e.getEquipmentShortDescription(e.selectedOrb.name)," ")}}function t$(t,n){1&t&&(h(0,"div"),g(1," No equipment available. "),d())}function i$(t,n){if(1&t){const e=ie();h(0,"div",72)(1,"form")(2,"div",73)(3,"h4",74),g(4,"Change Orb"),d(),h(5,"div",93)(6,"button",94),A("click",function(){k(e);const r=_(),a=ot(225);return r.viewOrbDetails(a)}),g(7,"View Orb Details"),d(),h(8,"button",75),A("click",function(){return k(e).$implicit.dismiss()}),g(9,"X"),d()()(),h(10,"div")(11,"div",76)(12,"div",95)(13,"table"),x(14,Jj,2,1,"tr",78),d()()(),x(15,e$,9,3,"div",79),d(),x(16,t$,2,0,"div",6),d()()}if(2&t){const e=_();p(14),m("ngForOf",e.orbRows),p(1),m("ngIf",null!=e.selectedOrb),p(1),m("ngIf",0==e.equipmentList.length)}}const n$=function(t){return{selectedTalentTree:t}};function r$(t,n){if(1&t){const e=ie();h(0,"span",102),A("click",function(){const a=k(e).$implicit;return _(4).filterTalentTree(a)}),g(1),d()}if(2&t){const e=n.$implicit,i=_(4);m("ngClass",yt(2,n$,i.selectedTalentTree===e)),p(1),q(" ",e.trim()," ")}}function a$(t,n){1&t&&D(0,"div",115)}function o$(t,n){if(1&t&&D(0,"div",11),2&t){const e=_().index,i=_().index;m("ngClass",_(5).getBorderConditional(i,e))}}function s$(t,n){if(1&t){const e=ie();h(0,"div",110)(1,"div",11)(2,"app-talent",111),A("spentTalent",function(r){return k(e),_(6).spentTalent(r)}),d()(),h(3,"div",112),x(4,a$,1,0,"div",113),x(5,o$,1,1,"div",114),d()()}if(2&t){const e=n.index,i=_().index,r=_(5);p(1),m("ngClass",i<r.talentRows-1?"talentContent":"lastTalentContent"),p(1),m("row",i)("column",e)("selectedAnimal",r.selectedAnimal)("isPreview",!0)("previewType",r.selectedTalentTree),p(2),m("ngIf",i!==r.talentRows-1),p(1),m("ngIf",i!==r.talentRows-1)}}const ap=function(){return[]};function l$(t,n){if(1&t&&(h(0,"div",107)(1,"div",108),x(2,s$,6,8,"div",109),d()()),2&t){const e=_(5);p(2),m("ngForOf",mu(1,ap).constructor(e.talentColumns))}}function c$(t,n){if(1&t){const e=ie();h(0,"div")(1,"strong"),g(2),d(),D(3,"br"),h(4,"div",103)(5,"button",99),A("click",function(){return k(e),_(4).selectTalentTree()}),g(6,"Select"),d()(),D(7,"hr"),h(8,"div",104)(9,"em"),g(10,"Preview"),d()(),h(11,"div",105),x(12,l$,3,2,"div",106),d()()}if(2&t){const e=_(4);p(2),q(" ",e.inDepthTalentTreeDescription," "),p(10),m("ngForOf",mu(2,ap).constructor(e.talentRows))}}function u$(t,n){if(1&t&&(h(0,"div")(1,"div",100),x(2,r$,2,4,"span",101),d(),D(3,"hr"),x(4,c$,13,3,"div",6),d()),2&t){const e=_(3);p(2),m("ngForOf",e.talentTreeOptions),p(2),m("ngIf",""!==e.inDepthTalentTreeDescription&&void 0!==e.inDepthTalentTreeDescription)}}function d$(t,n){if(1&t){const e=ie();h(0,"div")(1,"div",76),x(2,u$,5,2,"div",6),d(),h(3,"div",84)(4,"button",99),A("click",function(){return k(e),_(2).selectTalentTree()}),g(5,"Select"),d()()()}if(2&t){const e=_(2);p(2),m("ngIf",e.talentTreeOptions.length>0)}}function h$(t,n){if(1&t&&(h(0,"em"),g(1),d()),2&t){const e=_(3);p(1),q("Free talent resets for this animal remaining: ",e.freeTalentResets,"")}}function f$(t,n){1&t&&D(0,"div",115)}function p$(t,n){if(1&t&&D(0,"div",11),2&t){const e=_().index,i=_().index;m("ngClass",_(3).getBorderConditional(i,e))}}function g$(t,n){if(1&t){const e=ie();h(0,"div",110)(1,"div",11)(2,"app-talent",118),A("spentTalent",function(r){return k(e),_(4).spentTalent(r)}),d()(),h(3,"div",112),x(4,f$,1,0,"div",113),x(5,p$,1,1,"div",114),d()()}if(2&t){const e=n.index,i=_().index,r=_(3);p(1),m("ngClass",i<r.talentRows-1?"talentContent":"lastTalentContent"),p(1),m("row",i)("column",e)("selectedAnimal",r.selectedAnimal),p(2),m("ngIf",i!==r.talentRows-1),p(1),m("ngIf",i!==r.talentRows-1)}}function v$(t,n){if(1&t&&(h(0,"div",107)(1,"div",108),x(2,g$,6,6,"div",109),d()()),2&t){const e=_(3);p(2),m("ngForOf",mu(1,ap).constructor(e.talentColumns))}}function m$(t,n){if(1&t){const e=ie();h(0,"div",76)(1,"div",116),g(2),d(),D(3,"br"),h(4,"p",116)(5,"span"),g(6),d(),h(7,"button",117),A("click",function(){return k(e),_(2).resetTalents()}),g(8,"Reset Talents"),d(),D(9,"br"),x(10,h$,2,1,"em",6),d(),D(11,"br"),x(12,v$,3,2,"div",106),d()}if(2&t){const e=_(2);p(2),q("Available Talent Points: ",e.availableTalentPoints,""),p(4),q("Cost to reset talent specialization: ",e.talentResetCost,""),p(1),m("disabled",e.lookupService.getCoins()<e.lookupService.getTalentResetCost(e.selectedAnimal.type)),p(3),m("ngIf",e.freeTalentResets>0),p(2),m("ngForOf",mu(5,ap).constructor(e.talentRows))}}function b$(t,n){if(1&t){const e=ie();h(0,"div",72)(1,"form")(2,"div",73)(3,"h4",74),g(4,"Talents"),d(),h(5,"button",75),A("click",function(){return k(e).$implicit.dismiss()}),g(6,"X"),d()(),x(7,d$,6,1,"div",6),x(8,m$,13,6,"div",98),d()()}if(2&t){const e=_();p(7),m("ngIf",e.selectedAnimal.talentTree.talentTreeType===e.talentTreeTypeEnum.none),p(1),m("ngIf",e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none)}}function _$(t,n){if(1&t){const e=ie();h(0,"div",119)(1,"div",73)(2,"h4",74),g(3,"Orb Stats Info"),d(),h(4,"button",75),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",76),D(7,"app-orbs-view"),d()()}}function y$(t,n){if(1&t){const e=ie();h(0,"div",72)(1,"div",73)(2,"h4",74),g(3,"Base Stats Info"),d(),h(4,"button",75),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",76)(7,"div",120)(8,"div",71)(9,"span",12),g(10,"Speed - "),d(),g(11),d(),D(12,"hr"),h(13,"div",71)(14,"span",12),g(15,"Acceleration - "),d(),g(16),d(),D(17,"hr"),h(18,"div",71)(19,"span",12),g(20,"Endurance - "),d(),g(21),d(),D(22,"hr"),h(23,"div",71)(24,"span",12),g(25,"Power - "),d(),g(26),d(),D(27,"hr"),h(28,"div",71)(29,"span",12),g(30,"Focus - "),d(),g(31),d(),D(32,"hr"),h(33,"div",71)(34,"span",12),g(35,"Adaptability - "),d(),g(36),d(),D(37,"hr"),h(38,"div",71)(39,"span",12),g(40,"Diminishing Returns - "),d(),g(41),d()()()()}if(2&t){const e=_();p(11),q(" ",e.getTopSpeedPopover()," "),p(5),q(" ",e.getAccelerationPopover()," "),p(5),q(" ",e.getEndurancePopover()," "),p(5),q(" ",e.getPowerPopover()," "),p(5),q(" ",e.getFocusPopover()," "),p(5),q(" ",e.getAdaptabilityPopover()," "),p(5),q(" ",e.getDiminishingReturnsPopover()," ")}}function w$(t,n){if(1&t){const e=ie();h(0,"div",72)(1,"div",73)(2,"h4",74),g(3,"Racing Stats Info"),d(),h(4,"button",75),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",76)(7,"div",24)(8,"div",71)(9,"span",12),g(10,"Max Speed - "),d(),g(11),d(),D(12,"hr"),h(13,"div",71)(14,"span",12),g(15,"Acceleration Rate - "),d(),g(16),d(),D(17,"hr"),h(18,"div",71)(19,"span",12),g(20,"Stamina - "),d(),g(21),d(),D(22,"hr"),h(23,"div",71)(24,"span",12),g(25,"Power Efficiency - "),d(),g(26),d(),D(27,"hr"),h(28,"div",71)(29,"span",12),g(30,"Focus Distance - "),d(),g(31),d(),D(32,"hr"),h(33,"div",71)(34,"span",12),g(35,"Adaptability Distance - "),d(),g(36),d(),D(37,"hr"),h(38,"div",71)(39,"span",12),g(40,"Burst Chance - "),d(),g(41),d(),D(42,"hr"),h(43,"div",71)(44,"span",12),g(45,"Burst Distance - "),d(),g(46),d()()()()}if(2&t){const e=_();p(11),q(" ",e.selectedAnimal.currentStats.maxSpeedMsPopover()," "),p(5),q(" ",e.selectedAnimal.currentStats.accelerationMsPopover()," "),p(5),q(" ",e.selectedAnimal.currentStats.staminaPopover()," "),p(5),q(" ",e.selectedAnimal.currentStats.powerMsPopover()," "),p(5),q(" ",e.selectedAnimal.currentStats.focusMsPopover()," "),p(5),q(" ",e.selectedAnimal.currentStats.adaptabilityMsPopover()," "),p(5),q(" ",e.selectedAnimal.currentStats.burstChancePopover()," "),p(5),q(" ",e.selectedAnimal.currentStats.burstDistancePopover()," ")}}function C$(t,n){if(1&t){const e=ie();h(0,"div",72)(1,"div",73)(2,"h4",74),g(3,"Miscellaneous Stats Info"),d(),h(4,"button",75),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",76)(7,"div",120)(8,"div",71)(9,"span",12),g(10,"Bonus Breed XP From Training - "),d(),g(11),d(),D(12,"hr"),h(13,"div",71)(14,"span",12),g(15,"Bonus Breed XP From Free Races - "),d(),g(16),d(),D(17,"hr"),h(18,"div",71)(19,"span",12),g(20,"Bonus Breed XP From Circuit Races - "),d(),g(21),d(),D(22,"hr"),h(23,"div",71)(24,"span",12),g(25,"Training Time Reduction - "),d(),g(26),d(),D(27,"hr"),h(28,"div",71)(29,"span",12),g(30,"Bonus Diminishing Returns per Facility Level - "),d(),g(31),d(),D(32,"hr"),h(33,"div",71)(34,"span",12),g(35,"Bonus Talents - "),d(),g(36),d()()()()}if(2&t){const e=_();p(11),q(" ",e.getBonusTrainingXpPopover()," "),p(5),q(" ",e.getBonusFreeRaceXpPopover()," "),p(5),q(" ",e.getBonusCircuitRaceXpPopover()," "),p(5),q(" ",e.getBonusTrainingTimeReductionPopover()," "),p(5),q(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," "),p(5),q(" ",e.getBonusTalentsPopover()," ")}}let S$=(()=>{class t{constructor(e,i,r,a,o,s){this.lookupService=e,this.modalService=i,this.globalService=r,this.componentCommunicationService=a,this.utilityService=o,this.gameLoopService=s,this.returnEmitter=new bt,this.canAutoBreed=!1,this.areTalentsAvailable=!1,this.orbIsUnlocked=!1,this.talentTreeTypeEnum=vt,this.canBreed=!0,this.orbFunctionalityReleased=!0,this.talentColumns=3,this.talentRows=4,this.toggleAutoBreed=()=>{this.autoBreedActive=!this.autoBreedActive,this.selectedAnimal.autoBreedActive=this.autoBreedActive}}keyEvent(e){if((e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.returnToAnimalView(),!this.modalService.hasOpenModals()){var i=this.globalService.globalVar.animals.filter(s=>s.isAvailable),r=i.findIndex(s=>this.selectedAnimal===s);if(r>-1)if("ArrowLeft"===e.key)(a=r-1)<0&&(a=i.length-1),this.componentCommunicationService.setAnimalView(Pt.animals,o=i[a]),this.resetSelectedAnimalInfo(o);else if("ArrowRight"===e.key){var a,o;(a=r+1)===i.length&&(a=0),this.componentCommunicationService.setAnimalView(Pt.animals,o=i[a]),this.resetSelectedAnimalInfo(o)}}}ngOnInit(){this.handleIntroTutorial(),this.resetSelectedAnimalInfo(this.selectedAnimal),this.breedDescriptionPopover="When your Breed XP reaches the max, you can Breed your animal. This will reset your base stats, but it will also increase the amount that your base stats contribute to your racing stats."}returnToAnimalView(){this.returnEmitter.emit(!1)}isAbilityLevelMaxedOut(){var e=25,i=this.globalService.globalVar.modifiers.find(r=>"abilityLevelCapModifier"===r.text);return null!=i&&(e=i.value),null!=this.selectedAbility&&this.selectedAbility.abilityLevel>this.selectedAnimal.breedLevel+e}canAnimalBreed(){var e=!0;return this.selectedAnimal.breedGaugeXp<this.selectedAnimal.breedGaugeMax&&(e=!1),e}breed(){(!this.globalService.globalVar.showBreedWarning||confirm("Breeding will increase your base stat modifiers at the cost of resetting your base stats to their default values. You should do this when you have raced as far as you can without breeding or you have the time to spend to train your stats back. Continue?"))&&(this.globalService.globalVar.showBreedWarning=!1,this.globalService.BreedAnimal(this.selectedAnimal),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal),this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut())}editName(){this.newName.length<=50&&this.newName.length>=1?(this.selectedAnimal.name=this.newName,this.editingName=!1):alert("Name must be between 1 and 50 characters long.")}selectAbility(e){this.selectedAnimal.ability=e,this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal)}updateItemsList(){this.usableItemsList=[],this.globalService.globalVar.resources.filter(e=>(e.itemType===G.Food||e.itemType===G.Consumable)&&e.amount>0).forEach(e=>{void 0!==e&&this.usableItemsList.push(e)}),this.selectedAnimal.nectarAvailable&&this.usableItemsList.push(new te("Nectar of the Gods",1,G.Consumable)),this.setupDisplayItems()}updateEquipmentList(){this.equipmentList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===G.Equipment&&!this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var i=e.makeCopy(e);this.equipmentList.push(i)}}),this.setupDisplayEquipment(),this.globalService.globalVar.animals.filter(e=>null!=e.equippedItem).forEach(e=>{var i=this.equipmentList.find(r=>{var a;return r.name===(null===(a=e.equippedItem)||void 0===a?void 0:a.name)});null!=i&&(i.amount>0&&(i.amount-=1),i.amount<=0&&(this.equipmentList=this.equipmentList.filter(r=>r.name!==(null==i?void 0:i.name))))})}updateOrbList(){this.orbList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===G.Equipment&&this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var i=e.makeCopy(e);this.orbList.push(i)}}),this.setupDisplayEquipment()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];for(var i=1;i<=this.usableItemsList.length;i++)this.itemsCells.push(this.usableItemsList[i-1]),i%4==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}setupDisplayEquipment(){this.equipmentCells=[],this.equipmentRows=[];for(var i=1;i<=this.equipmentList.length;i++)this.equipmentCells.push(this.equipmentList[i-1]),i%4==0&&(this.equipmentRows.push(this.equipmentCells),this.equipmentCells=[]);0!==this.equipmentCells.length&&this.equipmentRows.push(this.equipmentCells)}setupDisplayOrbs(){this.orbCells=[],this.orbRows=[];for(var i=1;i<=this.orbList.length;i++)this.orbCells.push(this.orbList[i-1]),i%4==0&&(this.orbRows.push(this.orbCells),this.orbCells=[]);0!==this.orbCells.length&&this.orbRows.push(this.orbCells)}openTalentsModal(e){this.freeTalentResets=this.selectedAnimal.freeTalentResetCount;var i=this.lookupService.getTalentResetCost(this.selectedAnimal.type);this.talentResetCost=i.toLocaleString()+" Coins",this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openBaseStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openRacingStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openMiscStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openItemModal(e){this.setupDisplayItems(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()},r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()})}openEquipmentModal(e){this.setupDisplayEquipment(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()},r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()})}openOrbModal(e){this.setupDisplayOrbs(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()},r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()})}useItem(){if(void 0!==this.selectedItem){var e="Nectar of the Gods"===this.selectedItem.name,i=this.globalService.globalVar.resources.find(s=>s.name===this.selectedItem.name&&s.itemType===this.selectedItem.itemType);if(void 0===i&&!e)return void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");if(null==this.selectedItemQuantity||isNaN(Number(this.selectedItemQuantity)))return void alert("You must enter a numerical amount to use.");if(!e&&i.amount<this.selectedItemQuantity)return void alert("You don't have that many "+i.name+"!");if(this.selectedItem.itemType===G.Consumable&&this.selectedItem.name.includes("Certificate")&&this.lookupService.isAmountMoreThanCertificateCap(this.selectedItemQuantity,this.selectedAnimal,this.selectedItem.name))return void alert("This amount will exceed the amount of these certificates you can give your animal.");if(e||(i.amount-=this.selectedItemQuantity),this.selectedItem.itemType===G.Food)if("Mangoes"===this.selectedItem.name)this.selectedAnimal.breedLevel+=+this.selectedItemQuantity,null==this.selectedAnimal.mangoesUsed&&(this.selectedAnimal.mangoesUsed=0),this.selectedAnimal.mangoesUsed+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal);else if("Gingko Leaves"===this.selectedItem.name)this.selectedAnimal.previousBreedLevel=this.selectedAnimal.breedLevel,this.selectedAnimal.breedLevel=1,this.selectedAnimal.breedGaugeMax=200,this.selectedAnimal.breedGaugeXp=0,this.selectedAnimal.incubatorStatUpgrades=new qu;else{var r=new Ve(0,0,0,0,0,0);"Apples"===this.selectedItem.name&&(r.acceleration=this.selectedItemQuantity),"Bananas"===this.selectedItem.name&&(r.topSpeed=this.selectedItemQuantity),"Strawberries"===this.selectedItem.name&&(r.endurance=this.selectedItemQuantity),"Carrots"===this.selectedItem.name&&(r.power=this.selectedItemQuantity),"Turnips"===this.selectedItem.name&&(r.focus=this.selectedItemQuantity),"Oranges"===this.selectedItem.name&&(r.adaptability=this.selectedItemQuantity),this.selectedAnimal.increaseStats(r),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}else if(this.selectedItem.itemType===G.Consumable&&(this.selectedItemQuantity=+this.selectedItemQuantity,"Free Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+=+this.selectedItemQuantity),"Circuit Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces+=2*this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+=+this.selectedItemQuantity),"Training Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromTraining+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+=+this.selectedItemQuantity),"Diminishing Returns Increase Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.diminishingReturnsBonus+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal)),"Nectar of the Gods"===this.selectedItem.name)){var o,a=this.globalService.globalVar.resources.some(s=>"Orb Infuser"===s.name);o=null==this.selectedAnimal.equippedOrb?"You have not selected an orb and so no orb will improve when using this. If you did not intentionally do this, cancel this and select an orb for this animal. Continue?":"Your selected orb is the "+this.selectedAnimal.equippedOrb.name+". It will receive a "+this.globalService.getNectarOfTheGodsOrbInfusionIncrease(this.selectedAnimal).toFixed(2)+"% increase per level. Continue?",(!a||a&&confirm(o))&&this.globalService.handleNectarOfTheGodsReset(this.selectedAnimal)}this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()}}selectItem(e){this.selectedItem=e,this.usableItemsList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}clearSelectedItems(){this.usableItemsList.forEach(e=>{e.isSelected=!1})}clearSelectedEquipment(){this.equipmentList.forEach(e=>{e.isSelected=!1})}clearSelectedOrb(){this.orbList.forEach(e=>{e.isSelected=!1})}equipItem(){void 0!==this.selectedEquipment&&(this.selectedAnimal.equippedItem=this.selectedEquipment,this.updateEquipmentList(),this.clearSelectedEquipment(),this.modalService.dismissAll(),this.selectedEquipment=void 0)}selectEquipment(e){this.selectedEquipment=e,this.equipmentList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}unequipItem(){this.selectedAnimal.equippedItem=null,this.clearSelectedEquipment(),this.updateEquipmentList()}equipOrb(){void 0!==this.selectedOrb&&(this.selectedAnimal.equippedOrb=this.selectedOrb,this.updateOrbList(),this.clearSelectedOrb(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal),this.modalService.dismissAll(),this.selectedOrb=void 0)}selectOrb(e){this.selectedOrb=e,this.orbList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}unequipOrb(){this.selectedAnimal.equippedOrb=null,this.clearSelectedOrb(),this.updateOrbList(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}getTopSpeedPopover(){return this.lookupService.topSpeedPopover(this.selectedAnimal)}getAccelerationPopover(){return this.lookupService.accelerationPopover(this.selectedAnimal)}getEndurancePopover(){return this.lookupService.endurancePopover(this.selectedAnimal)}getPowerPopover(){return this.lookupService.powerPopover(this.selectedAnimal)}getFocusPopover(){return this.lookupService.focusPopover(this.selectedAnimal)}getAdaptabilityPopover(){return this.lookupService.adaptabilityPopover(this.selectedAnimal)}getAbilityLevelPopover(){return this.lookupService.abilityLevelPopover(this.selectedAnimal)}getBonusFreeRaceXpPopover(){return this.lookupService.bonusFreeRaceXpPopover(this.selectedAnimal)}getBonusCircuitRaceXpPopover(){return this.lookupService.bonusCircuitRaceXpPopover(this.selectedAnimal)}getBonusTrainingXpPopover(){return this.lookupService.bonusTrainingXpPopover(this.selectedAnimal)}getBonusDiminishingReturnsPerFacilityLevelPopover(){return this.lookupService.bonusDiminishingReturnsPerFacilityLevelPopover(this.selectedAnimal)}getBonusTrainingTimeReductionPopover(){return this.lookupService.bonusTrainingTimeReductionPopover(this.selectedAnimal)}getBonusTalentsPopover(){return this.lookupService.bonusTalentsPopover(this.selectedAnimal)}getBonusAbilityEfficiencyPopover(){return this.lookupService.bonusAbilityEfficiencyPopover(this.selectedAnimal)}getBonusOrbXpPopover(){return this.lookupService.bonusOrbXpPopover(this.selectedAnimal)}getAbilityPopover(){return this.lookupService.abilityPopover()}getDiminishingReturnsPopover(){return"Once a trainable stat is over this number, additional gains in this stat will be reduced. Increase with Facility Level."}getEquipmentShortDescription(e){return this.globalService.getEquipmentDescription(e)}getItemShortDescription(e){return this.globalService.getItemDescription(e,this.selectedAnimal)}itemHasAdditionalText(e){return!(e.itemType!==G.Consumable||!e.name.includes("Certificate"))}getItemAdditionalText(e){var i="";return e.itemType===G.Consumable&&e.name.includes("Certificate")&&("Free Race Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Circuit Race Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Training Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Diminishing Returns Increase Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>")),this.utilityService.getSanitizedHtml(i)}handleIntroTutorial(){var e=this.globalService.globalVar.animals.find(i=>i.type===L.Hare);!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&9===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}goToAssignedBarn(){var e=this.globalService.globalVar.barns.find(i=>i.barnNumber===this.selectedAnimal.associatedBarnNumber);null!=e&&this.componentCommunicationService.setBarnView(Pt.barn,e.barnNumber)}filterTalentTree(e){this.selectedTalentTree=e,this.inDepthTalentTreeDescription=this.lookupService.getInDepthTalentTreeDescription(e)}selectTalentTree(){""!==this.selectedTalentTree&&null!=this.selectedTalentTree?this.selectedAnimal.talentTree.talentTreeType=this.lookupService.convertTalentTreeNameToEnum(this.selectedTalentTree):alert("You must select a talent tree.")}resetSelectedAnimalInfo(e){var i=this;this.selectedAnimal=e,this.areTalentsAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.orbIsUnlocked=this.lookupService.isItemUnlocked("orbs")&&this.selectedAnimal.canEquipOrb,this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal);var r=this.lookupService.getStockbreeder();null!=r&&r>0&&(this.canAutoBreed=!0),this.canAutoBreed&&(this.autoBreedActive=this.selectedAnimal.autoBreedActive),this.ability1=this.selectedAnimal.availableAbilities[0],this.selectedAnimal.availableAbilities.length>1&&(this.ability2=this.selectedAnimal.availableAbilities[1]),this.selectedAnimal.availableAbilities.length>2&&(this.ability3=this.selectedAnimal.availableAbilities[2]),this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal),null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.updateItemsList(),this.updateEquipmentList(),this.updateOrbList(),this.selectedTalentTree="",this.inDepthTalentTreeDescription="",this.componentCommunicationService.setAnimalView(Pt.animals,e);var a=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedAnimal.associatedBarnNumber);this.assignedBarnName=null==a?"Unassigned":"Assigned to: "+this.lookupService.getBarnName(a),this.areTalentsAvailable&&(this.talentTreeOptions=this.lookupService.getTalentTreeNames(),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var o=Br(function*(s){i.canBreed=i.canAnimalBreed()});return function(s){return o.apply(this,arguments)}}())}getTalentTreeName(){var e=this.selectedAnimal.talentTree.getTotalSpentPoints();return this.lookupService.getTalentTreeNameByEnum(this.selectedAnimal.talentTree.talentTreeType)+" Level "+e}resetTalents(){var i="Future resets for this animal will be more expensive.";if(0===(e=this.lookupService.getTalentResetCost(this.selectedAnimal.type))&&(i=""),this.lookupService.getCoins()>=e&&confirm("This will refund all talent points and allow you to reselect your specialization. "+i+"  Continue?")){this.lookupService.spendCoins(this.lookupService.getTalentResetCost(this.selectedAnimal.type)),this.selectedAnimal.talentTree.reset(),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.selectedAnimal.freeTalentResetCount>0?(this.selectedAnimal.freeTalentResetCount-=1,this.selectedAnimal.freeTalentResetCount<0&&(this.selectedAnimal.freeTalentResetCount=0)):this.selectedAnimal.talentResetCount+=1,this.freeTalentResets=this.selectedAnimal.freeTalentResetCount;var e=this.lookupService.getTalentResetCost(this.selectedAnimal.type);this.talentResetCost=e.toLocaleString()+" Coins"}}getBorderConditional(e,i){var r,a=e+1,o=0;1===a&&(o=this.selectedAnimal.talentTree.row2RequiredPoints),2===a&&(o=this.selectedAnimal.talentTree.row3RequiredPoints),3===a&&(o=this.selectedAnimal.talentTree.row4RequiredPoints);var s=o-this.selectedAnimal.talentTree.getTalentPointsByColumn(i);return"Flatland"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedFlatlandTalentSpacer height0":!0}:4===s?r={"completedFlatlandTalentSpacer height1":!0}:3===s?r={"completedFlatlandTalentSpacer height2":!0}:2===s?r={"completedFlatlandTalentSpacer height3":!0}:1===s?r={"completedFlatlandTalentSpacer height4":!0}:s<=0&&(r={"completedFlatlandTalentSpacer height5":!0})),"Mountain"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedMountainTalentSpacer height0":!0}:4===s?r={"completedMountainTalentSpacer height1":!0}:3===s?r={"completedMountainTalentSpacer height2":!0}:2===s?r={"completedMountainTalentSpacer height3":!0}:1===s?r={"completedMountainTalentSpacer height4":!0}:s<=0&&(r={"completedMountainTalentSpacer height5":!0})),"Ocean"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedOceanTalentSpacer height0":!0}:4===s?r={"completedOceanTalentSpacer height1":!0}:3===s?r={"completedOceanTalentSpacer height2":!0}:2===s?r={"completedOceanTalentSpacer height3":!0}:1===s?r={"completedOceanTalentSpacer height4":!0}:s<=0&&(r={"completedOceanTalentSpacer height5":!0})),"Tundra"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedTundraTalentSpacer height0":!0}:4===s?r={"completedTundraTalentSpacer height1":!0}:3===s?r={"completedTundraTalentSpacer height2":!0}:2===s?r={"completedTundraTalentSpacer height3":!0}:1===s?r={"completedTundraTalentSpacer height4":!0}:s<=0&&(r={"completedTundraTalentSpacer height5":!0})),"Volcanic"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedVolcanicTalentSpacer height0":!0}:4===s?r={"completedVolcanicTalentSpacer height1":!0}:3===s?r={"completedVolcanicTalentSpacer height2":!0}:2===s?r={"completedVolcanicTalentSpacer height3":!0}:1===s?r={"completedVolcanicTalentSpacer height4":!0}:s<=0&&(r={"completedVolcanicTalentSpacer height5":!0})),r}spentTalent(e){this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)}orbColorConditional(e){var i=this.globalService.getOrbTypeFromResource(e);return{amberColor:i===Be.amber,amethystColor:i===Be.amethyst,rubyColor:i===Be.ruby,sapphireColor:i===Be.sapphire,topazColor:i===Be.topaz,emeraldColor:i===Be.emerald}}viewOrbDetails(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setAnimal(new At)}}return t.\u0275fac=function(e){return new(e||t)(V(Ti),V(io),V(It),V(Pn),V(Rn),V(An))},t.\u0275cmp=Tt({type:t,selectors:[["app-selected-animal"]],hostBindings:function(e,i){1&e&&A("keyup",function(a){return i.keyEvent(a)},!1,Ca)},inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:232,vars:115,consts:[[1,"selectedAnimalView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"equippable"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"spaced",3,"click"],["class","talents",4,"ngIf"],[1,"animalInfo"],[3,"ngClass"],[1,"keyword"],[1,"clickableText","buttonAsText",3,"click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[3,"click"],[3,"callbackFunction","label","model",4,"ngIf"],[1,"back"],["class","orb",4,"ngIf"],[1,"gridContainer"],[1,"trainableStats"],[1,"s4Heading"],[1,"tooltipIcon",3,"click"],[1,"racingStats"],[1,"miscStats"],[1,"abilities"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"s4Heading",3,"ngbPopover"],[1,"ability1","s5Heading","clickableText","buttonAsText",3,"click"],["class","ability2 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],["class","ability3 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],[1,"abilityXp"],[3,"innerHTML"],["topSpeedPopoverContent",""],["accelerationPopoverContent",""],["endurancePopoverContent",""],["powerPopoverContent",""],["focusPopoverContent",""],["adaptabilityPopoverContent",""],["abilityLevelPopoverContent",""],["bonusFreeRaceXpPopoverContent",""],["bonusCircuitRaceXpPopoverContent",""],["bonusTrainingXpPopoverContent",""],["bonusDiminishingReturnsPerFacilityLevelPopoverContent",""],["bonusTrainingTimeReductionPopoverContent",""],["bonusTalentsPopoverContent",""],["bonusAbilityEfficiencyPopoverContent",""],["bonusOrbXpPopoverContent",""],["content",""],["equipment",""],["orb",""],["talentsContent",""],["orbDetailsContent",""],["baseStatsContent",""],["racingStatsContent",""],["miscStatsContent",""],[1,"equipmentKeyword"],[1,"talents"],["class","keyword",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"name","keyword"],[1,"editName",3,"click"],["id","newName","name","newName","maxlength","50",3,"ngModel","ngModelChange"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],["id","newName","name","newName","minlength","1","maxlength","50",3,"ngModel","ngModelChange"],[3,"callbackFunction","label","model"],[1,"orb"],[1,"keyword",3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],[1,"ability2","s5Heading","clickableText","buttonAsText",3,"click"],[1,"ability3","s5Heading","clickableText","buttonAsText",3,"click"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"selectableItem",3,"ngClass","click"],[1,"resourceKeyword"],[1,"modal-footer"],[1,"selectedItemSpan"],[1,"rightAlign"],["for","deck-name"],["id","deck-name","type","text",1,"spaced",3,"ngModel","ngModelChange"],["type","button",1,"spaced",3,"click"],[1,"equipmentContainer"],[1,"selectableEquipment",3,"ngClass","click"],[1,"selectedEquipmentSpan"],[1,"orbDetails"],["type","button","aria-label","View Orb Details",3,"click"],[1,"orbContainer"],[1,"selectableOrb",3,"ngClass","click"],[1,"selectedOrbSpan"],["class","modal-body",4,"ngIf"],["type","button",3,"click"],[1,"typeContainer"],["class","talents subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"talents","subHeading",3,"ngClass","click"],[1,"rightTextAlign"],[1,"centered"],[1,"modal-body","talentPreview"],["class","talentRow",4,"ngFor","ngForOf"],[1,"talentRow"],[1,"rowFlex"],["class","talentColumn",4,"ngFor","ngForOf"],[1,"talentColumn"],[3,"row","column","selectedAnimal","isPreview","previewType","spentTalent"],[1,"talentSpacer"],["class","defaultTalentSpacer",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"defaultTalentSpacer"],[1,"talentInfo"],[1,"spaced",3,"disabled","click"],[3,"row","column","selectedAnimal","spentTalent"],[1,"modalClass","orbContent"],[1,"baseStats"]],template:function(e,i){if(1&e){const r=ie();h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),x(6,$z,7,3,"div",5),x(7,qz,2,0,"div",6),D(8,"br"),x(9,Wz,2,0,"button",7),h(10,"button",8),A("click",function(){k(r);const o=ot(219);return i.openEquipmentModal(o)}),g(11,"Equip New Item"),d()(),D(12,"br"),x(13,Yz,5,1,"div",9),d(),h(14,"div",10)(15,"div",11),x(16,Jz,6,4,"div",6),x(17,nj,6,4,"div",6),h(18,"span",12),g(19),d(),D(20,"br"),d(),h(21,"button",13),A("click",function(){return i.goToAssignedBarn()}),g(22),x(23,rj,2,1,"em",6),d(),D(24,"br"),h(25,"span",14),g(26),d(),D(27,"br"),h(28,"span",14),g(29),Vt(30,"number"),h(31,"button",15),A("click",function(){return i.breed()}),g(32,"Breed"),d()(),D(33,"br"),h(34,"button",16),A("click",function(){k(r);const o=ot(217);return i.openItemModal(o)}),g(35,"Use Item"),d(),D(36,"br"),x(37,aj,1,3,"app-toggle",17),d(),h(38,"div",18)(39,"div")(40,"button",16),A("click",function(){return i.returnToAnimalView()}),g(41,"Back"),d()(),D(42,"br"),x(43,cj,7,3,"div",19),d()(),D(44,"hr"),h(45,"div",20)(46,"div",21)(47,"span",22),g(48,"Base Stats "),h(49,"span",23),A("click",function(){k(r);const o=ot(227);return i.openBaseStatsModal(o)}),g(50,"?"),d()(),D(51,"br")(52,"br"),h(53,"span",14)(54,"span",12),g(55,"Speed:"),d(),g(56),Vt(57,"number"),d(),D(58,"br"),h(59,"span",14)(60,"span",12),g(61,"Acceleration:"),d(),g(62),Vt(63,"number"),d(),D(64,"br"),h(65,"span",14)(66,"span",12),g(67,"Endurance:"),d(),g(68),Vt(69,"number"),d(),D(70,"br"),h(71,"span",14)(72,"span",12),g(73,"Power:"),d(),g(74),Vt(75,"number"),d(),D(76,"br"),h(77,"span",14)(78,"span",12),g(79,"Focus:"),d(),g(80),Vt(81,"number"),d(),D(82,"br"),h(83,"span",14)(84,"span",12),g(85,"Adaptability:"),d(),g(86),Vt(87,"number"),d(),D(88,"br"),h(89,"span",14)(90,"span",12),g(91,"Diminishing Returns:"),d(),g(92),Vt(93,"number"),d()(),h(94,"div",24)(95,"span",22),g(96,"Racing Stats "),h(97,"span",23),A("click",function(){k(r);const o=ot(229);return i.openRacingStatsModal(o)}),g(98,"?"),d()(),D(99,"br")(100,"br"),h(101,"span",14)(102,"span",12),g(103,"Max Speed:"),d(),g(104),Vt(105,"number"),d(),D(106,"br"),h(107,"span",14)(108,"span",12),g(109,"Acceleration Rate:"),d(),g(110),Vt(111,"number"),d(),D(112,"br"),h(113,"span",14)(114,"span",12),g(115,"Stamina:"),d(),g(116),Vt(117,"number"),d(),D(118,"br"),h(119,"span",14)(120,"span",12),g(121,"Power Efficiency:"),d(),g(122),Vt(123,"number"),d(),D(124,"br"),h(125,"span",14)(126,"span",12),g(127,"Focus Distance:"),d(),g(128),Vt(129,"number"),d(),D(130,"br"),h(131,"span",14)(132,"span",12),g(133,"Adaptability Distance:"),d(),g(134),Vt(135,"number"),d(),D(136,"br"),h(137,"span",14)(138,"span",12),g(139,"Burst Chance:"),d(),g(140),Vt(141,"number"),d(),D(142,"br"),h(143,"span",14)(144,"span",12),g(145,"Burst Distance:"),d(),g(146),Vt(147,"number"),d()(),h(148,"div",25)(149,"span",22),g(150,"Miscellaneous Stats "),h(151,"span",23),A("click",function(){k(r);const o=ot(231);return i.openMiscStatsModal(o)}),g(152,"?"),d()(),D(153,"br")(154,"br"),x(155,uj,7,5,"div",6),x(156,dj,6,5,"div",6),x(157,hj,6,5,"div",6),x(158,fj,6,5,"div",6),x(159,pj,6,5,"div",6),x(160,gj,6,5,"div",6),x(161,vj,6,5,"div",6),x(162,mj,6,5,"div",6),d()(),h(163,"div",26)(164,"p")(165,"span",27),g(166,"Abilities"),d(),D(167,"br"),h(168,"span")(169,"em"),g(170,"Your animal will use the ability you select below."),d()()(),h(171,"div")(172,"div")(173,"button",28),A("click",function(){return i.selectAbility(i.ability1)}),g(174),d(),x(175,bj,2,3,"button",29),x(176,_j,2,3,"button",30),d(),D(177,"br"),h(178,"p")(179,"span",14),g(180),h(181,"span",31),x(182,yj,2,2,"span",6),x(183,wj,2,0,"span",6),d()(),D(184,"br")(185,"span",32),d()()()()()(),x(186,Cj,2,1,"ng-template",null,33,dt),x(188,Sj,2,1,"ng-template",null,34,dt),x(190,Tj,2,1,"ng-template",null,35,dt),x(192,Rj,2,1,"ng-template",null,36,dt),x(194,Dj,2,1,"ng-template",null,37,dt),x(196,xj,2,1,"ng-template",null,38,dt),x(198,kj,2,1,"ng-template",null,39,dt),x(200,Mj,2,1,"ng-template",null,40,dt),x(202,Aj,2,1,"ng-template",null,41,dt),x(204,Pj,2,1,"ng-template",null,42,dt),x(206,Vj,2,1,"ng-template",null,43,dt),x(208,Ij,2,1,"ng-template",null,44,dt),x(210,Oj,2,1,"ng-template",null,45,dt),x(212,Ej,2,1,"ng-template",null,46,dt),x(214,Nj,2,1,"ng-template",null,47,dt),x(216,jj,9,2,"ng-template",null,48,dt),x(218,Qj,14,3,"ng-template",null,49,dt),x(220,i$,17,3,"ng-template",null,50,dt),x(222,b$,9,2,"ng-template",null,51,dt),x(224,_$,8,0,"ng-template",null,52,dt),x(226,y$,42,7,"ng-template",null,53,dt),x(228,w$,47,8,"ng-template",null,54,dt),x(230,C$,37,6,"ng-template",null,55,dt)}if(2&e){const r=ot(187),a=ot(189),o=ot(191),s=ot(193),l=ot(195),c=ot(197),u=ot(199);p(6),m("ngIf",null!=i.selectedAnimal.equippedItem),p(1),m("ngIf",null==i.selectedAnimal.equippedItem),p(2),m("ngIf",null!=i.selectedAnimal.equippedItem),p(4),m("ngIf",i.areTalentsAvailable),p(2),m("ngClass",i.colorConditional),p(1),m("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),m("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(2),rt(i.selectedAnimal.getRaceCourseType()),p(3),q("",i.assignedBarnName," "),p(1),m("ngIf",null!=i.selectedAnimal.currentTraining),p(2),Cr("ngbPopover",i.breedLevelPopover),p(1),q("Breed Level ",i.selectedAnimal.breedLevel,""),p(2),m("ngbPopover",i.breedDescriptionPopover),p(1),ki("Breed XP: ",Qt(30,67,i.selectedAnimal.breedGaugeXp,"1.2-2"),"/",i.selectedAnimal.breedGaugeMax," "),p(2),m("disabled",!i.canBreed),p(6),m("ngIf",i.canAutoBreed),p(6),m("ngIf",i.orbIsUnlocked&&i.orbFunctionalityReleased),p(10),m("ngbPopover",r),p(3),q(" ",Qt(57,70,i.selectedAnimal.currentStats.topSpeed,"1.2-2")," "),p(3),m("ngbPopover",a),p(3),q(" ",Qt(63,73,i.selectedAnimal.currentStats.acceleration,"1.2-2")," "),p(3),m("ngbPopover",o),p(3),q(" ",Qt(69,76,i.selectedAnimal.currentStats.endurance,"1.2-2")," "),p(3),m("ngbPopover",s),p(3),q(" ",Qt(75,79,i.selectedAnimal.currentStats.power,"1.2-2")," "),p(3),m("ngbPopover",l),p(3),q(" ",Qt(81,82,i.selectedAnimal.currentStats.focus,"1.2-2")," "),p(3),m("ngbPopover",c),p(3),q(" ",Qt(87,85,i.selectedAnimal.currentStats.adaptability,"1.2-2")," "),p(3),Cr("ngbPopover",i.getDiminishingReturnsPopover()),p(3),q(" ",Qt(93,88,i.diminishingReturnsAmount,"1.0-0")," "),p(9),Cr("ngbPopover",i.selectedAnimal.currentStats.maxSpeedMsPopover()),p(3),q(" ",Qt(105,91,i.selectedAnimal.currentStats.maxSpeedMs,"1.2-2")," m/s "),p(3),Cr("ngbPopover",i.selectedAnimal.currentStats.accelerationMsPopover()),p(3),q(" ",Qt(111,94,i.selectedAnimal.currentStats.accelerationMs,"1.2-2")," m/s\xb2 "),p(3),Cr("ngbPopover",i.selectedAnimal.currentStats.staminaPopover()),p(3),q(" ",Qt(117,97,i.selectedAnimal.currentStats.stamina,"1.2-2")," "),p(3),Cr("ngbPopover",i.selectedAnimal.currentStats.powerMsPopover()),p(3),q(" ",Qt(123,100,i.selectedAnimal.currentStats.powerMs,"1.2-2"),"% "),p(3),Cr("ngbPopover",i.selectedAnimal.currentStats.focusMsPopover()),p(3),q(" ~",Qt(129,103,i.selectedAnimal.currentStats.focusMs,"1.2-2")," m "),p(3),Cr("ngbPopover",i.selectedAnimal.currentStats.adaptabilityMsPopover()),p(3),q(" ~",Qt(135,106,i.selectedAnimal.currentStats.adaptabilityMs,"1.2-2")," m "),p(3),Cr("ngbPopover",i.selectedAnimal.currentStats.burstChancePopover()),p(3),q(" ",Qt(141,109,i.selectedAnimal.currentStats.burstChance,"1.2-2"),"% "),p(3),Cr("ngbPopover",i.selectedAnimal.currentStats.burstDistancePopover()),p(3),q(" ",Qt(147,112,i.selectedAnimal.currentStats.burstDistance,"1.2-2")," m "),p(9),m("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromTraining>0),p(1),m("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces>0),p(1),m("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces>0),p(1),m("ngIf",i.selectedAnimal.miscStats.trainingTimeReduction>0),p(1),m("ngIf",i.selectedAnimal.miscStats.diminishingReturnsBonus>0),p(1),m("ngIf",i.selectedAnimal.miscStats.bonusTalents>0),p(1),m("ngIf",i.selectedAnimal.miscStats.bonusAbilityEfficiency>0),p(1),m("ngIf",i.selectedAnimal.miscStats.bonusOrbXp>0),p(3),m("ngbPopover",i.getAbilityPopover()),p(8),Bt("filterActive",i.selectedAnimal.ability.name===i.ability1.name),p(1),q("",i.ability1.name," "),p(1),m("ngIf",i.ability2.isAbilityPurchased),p(1),m("ngIf",i.ability3.isAbilityPurchased),p(3),m("ngbPopover",u),p(1),q("Level ",i.selectedAbility.abilityLevel," "),p(2),m("ngIf",!i.abilityLevelMaxedOut),p(1),m("ngIf",i.abilityLevelMaxedOut),p(2),m("innerHTML",i.longDescription,kt)}},directives:[li,Qr,cn,Lo,Us,Uo,Ho,mf,kz,pf,rf,Vu,Cn,Ez,xD],pipes:[Qa],styles:['.selectedAnimalView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.animalInfo[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:animalInfo}.back[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:back;justify-content:space-between;flex-direction:column;display:flex}.equippable[_ngcontent-%COMP%]{justify-content:space-between;flex-direction:column;display:flex;grid-area:equippable}.marginGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.filterActive[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor;color:var(--foreground-secondary)}.info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"equippable animalInfo back"}.gridContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-items:center;justify-content:stretch;grid-template-areas:"trainingStats racingStats miscStats"}.trainableStats[_ngcontent-%COMP%]{justify-self:left;grid-area:trainingStats}.racingStats[_ngcontent-%COMP%]{grid-area:racingStats}.miscStats[_ngcontent-%COMP%]{grid-area:miscStats}.centered[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.editName[_ngcontent-%COMP%]{width:4rem}.name[_ngcontent-%COMP%]{margin-left:4rem}.selectedEquipmentSpan[_ngcontent-%COMP%], .selectedOrbSpan[_ngcontent-%COMP%], .selectedItemSpan[_ngcontent-%COMP%]{width:100%}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.rightTextAlign[_ngcontent-%COMP%]{text-align:right}.rightAlign[_ngcontent-%COMP%]{float:right}.orbDetails[_ngcontent-%COMP%]{width:20%;display:flex;justify-content:space-between}.ability1[_ngcontent-%COMP%], .ability2[_ngcontent-%COMP%], .ability3[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.typeContainer[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-evenly}.talentTreeType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedTalentTree[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid;text-decoration:underline solid}.rowFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.abilityXp[_ngcontent-%COMP%]{margin-left:2.5rem}.talentColumn[_ngcontent-%COMP%]{width:31.75%}.talentContent[_ngcontent-%COMP%]{height:calc(100% - 5rem);height:-o-calc(100% - 5rem);border:1px solid rgba(0,0,0,.1)}.lastTalentContent[_ngcontent-%COMP%]{height:100%;border:1px solid rgba(0,0,0,.1)}.talentInfo[_ngcontent-%COMP%]{text-align:center}.talentSpacer[_ngcontent-%COMP%]{display:grid;grid-template:1fr / 1fr;place-items:center}.defaultTalentSpacer[_ngcontent-%COMP%]{height:5rem;border-right:solid thick rgba(0,0,0,.1);grid-column:1 / 1;grid-row:1 / 1;z-index:1}.completedFlatlandTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--flatlandColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedMountainTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--mountainColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedOceanTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--waterColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedTundraTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--tundraColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedVolcanicTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--volcanicColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.height0[_ngcontent-%COMP%]{height:0}.height1[_ngcontent-%COMP%]{height:1rem}.height2[_ngcontent-%COMP%]{height:2rem}.height3[_ngcontent-%COMP%]{height:3rem}.height4[_ngcontent-%COMP%]{height:4rem}.height5[_ngcontent-%COMP%]{height:5rem}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}.activeSelectedItem[_ngcontent-%COMP%], .activeSelectedEquipment[_ngcontent-%COMP%], .activeSelectedOrb[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.selectableItem[_ngcontent-%COMP%], .selectableOrb[_ngcontent-%COMP%], .selectableEquipment[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem;margin-top:.25rem}.tooltipIcon[_ngcontent-%COMP%]{display:none}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}@media (max-width: 800px){.info[_ngcontent-%COMP%], .gridContainer[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr 1fr}.tooltipIcon[_ngcontent-%COMP%]{display:inline-block}}']}),t})();function T$(t,n){1&t&&(h(0,"div",4)(1,"h2"),g(2,"Animals"),d(),h(3,"div",5),g(4," Select an animal to view its stats, change abilities, and more. "),d(),D(5,"hr"),d())}function R$(t,n){if(1&t){const e=ie();h(0,"div",6)(1,"app-animal-list",7),A("selectedAnimal",function(r){return k(e),_().selectedAnimal(r)}),d()()}if(2&t){const e=_();p(1),m("availableAnimals",e.availableAnimals)("isAnimalDetailView",!0)}}function D$(t,n){if(1&t){const e=ie();h(0,"div",8)(1,"app-selected-animal",9),A("returnEmitter",function(r){return k(e),_().returnToAnimalView(r)}),d()()}if(2&t){const e=_();p(1),m("selectedAnimal",e.animal)}}let x$=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(Pt.animals),this.availableAnimals=this.globalService.globalVar.animals.filter(e=>e.isAvailable),this.subscription=this.componentCommunicationService.getAnimalView().subscribe(e=>{null!=e.type?(this.animalSelected=!0,this.animal=e):this.animalSelected=!1})}selectedAnimal(e){this.animalSelected=!0,this.animal=e,this.componentCommunicationService.setAnimalView(Pt.animals,this.animal)}returnToAnimalView(e){this.animalSelected=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Pn))},t.\u0275cmp=Tt({type:t,selectors:[["app-animals-view"]],decls:4,vars:3,consts:[[1,"animalsView"],["class","info",4,"ngIf"],["class","listView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"info"],[1,"description"],[1,"listView"],[3,"availableAnimals","isAnimalDetailView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(h(0,"div",0),x(1,T$,6,0,"div",1),x(2,R$,2,2,"div",2),x(3,D$,2,1,"div",3),d()),2&e&&(p(1),m("ngIf",!i.animalSelected),p(1),m("ngIf",!i.animalSelected),p(1),m("ngIf",i.animalSelected))},directives:[li,rp,S$],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;overflow:hidden;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{width:100%;height:100%}.info[_ngcontent-%COMP%]{text-align:center}.selectedView[_ngcontent-%COMP%]{height:100%;overflow:auto}"]}),t})();function k$(t,n){if(1&t){const e=ie();h(0,"button",17),A("click",function(){k(e);const r=_().$implicit;return _().setAsAutoRunFreeRace(r)}),g(1,"Auto Run Free Race"),d()}}function M$(t,n){if(1&t){const e=ie();h(0,"button",18),A("click",function(){k(e);const r=_().$implicit;return _().setAsEventDeck(r)}),g(1,"Set as Event Team"),d()}}function A$(t,n){if(1&t){const e=ie();h(0,"div")(1,"div",7),D(2,"app-animal-deck",8),h(3,"div",9)(4,"button",10),A("click",function(){const a=k(e).$implicit,o=_(),s=ot(11);return o.editDeck(s,a)}),g(5,"Edit"),d()(),h(6,"div",11)(7,"button",12),A("click",function(){const a=k(e).$implicit;return _().setAsPrimary(a)}),g(8,"Set as Primary Team"),d()(),h(9,"div",13),x(10,k$,2,0,"button",14),d(),h(11,"div",15),x(12,M$,2,0,"button",16),d()(),D(13,"hr"),d()}if(2&t){const e=n.index,i=_();p(2),m("deckNumber",e+1),p(8),m("ngIf",i.showAutoRaceButton),p(2),m("ngIf",i.showEventButton)}}function P$(t,n){if(1&t){const e=ie();h(0,"div",35)(1,"em"),g(2,"When this box is checked, this order will be enforced. Drag a course type on top of another to swap their position."),d(),D(3,"br"),h(4,"input",36),A("input",function(){return k(e),_(2).toggleRaceOrder()}),d(),h(5,"label",37),A("click",function(){return k(e),_(2).toggleRaceOrder()}),g(6,"Race Order: "),d(),h(7,"span")(8,"span",38),A("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropCourseType(r)}),g(9),d(),g(10," / "),h(11,"span",39),A("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropCourseType(r)}),g(12),d(),g(13," / "),h(14,"span",40),A("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropCourseType(r)}),g(15),d(),g(16," / "),h(17,"span",41),A("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropCourseType(r)}),g(18),d(),g(19," / "),h(20,"span",42),A("dragstart",function(r){return k(e),_(2).dragStart(r)})("dragover",function(r){return k(e),_(2).allowDrop(r)})("drop",function(r){return k(e),_(2).dropCourseType(r)}),g(21),d()()()}if(2&t){const e=_(2);p(4),m("checked",e.isRaceOrderOn),p(4),m("ngClass",e.getColorClass(e.selectedDeckOrder[0])),p(1),rt(e.selectedDeckOrder[0]),p(2),m("ngClass",e.getColorClass(e.selectedDeckOrder[1])),p(1),rt(e.selectedDeckOrder[1]),p(2),m("ngClass",e.getColorClass(e.selectedDeckOrder[2])),p(1),rt(e.selectedDeckOrder[2]),p(2),m("ngClass",e.getColorClass(e.selectedDeckOrder[3])),p(1),rt(e.selectedDeckOrder[3]),p(2),m("ngClass",e.getColorClass(e.selectedDeckOrder[4])),p(1),rt(e.selectedDeckOrder[4])}}const V$=function(t,n,e,i,r,a){return{selectedCourseType:t,flatlandColor:n,mountainColor:e,waterColor:i,tundraColor:r,volcanicColor:a}};function I$(t,n){if(1&t){const e=ie();h(0,"button",43),A("click",function(){const a=k(e).$implicit;return _(2).filterType(a)}),g(1),d()}if(2&t){const e=n.$implicit,i=_(2);m("ngClass",function eC(t,n,e,i,r,a,o,s,l){const c=Pr()+t,u=Pe(),f=Sa(u,c,e,i,r,a);return Vs(u,c+4,o,s)||f?vo(u,c+6,l?n.call(l,e,i,r,a,o,s):n(e,i,r,a,o,s)):su(u,c+6)}(2,V$,i.selectedCourseType===e,"Flatland"===e,"Mountain"===e,"Ocean"===e,"Tundra"===e,"Volcanic"===e)),p(1),q(" ",e.trim()," ")}}const O$=function(t){return{selectedAnimal:t}};function E$(t,n){if(1&t){const e=ie();h(0,"button",44),A("click",function(){const a=k(e).$implicit;return _(2).selectAnimal(a)}),g(1),d()}if(2&t){const e=n.$implicit,i=_(2);m("ngClass",yt(2,O$,i.selectedAnimalName===e)),p(1),q(" ",e.trim()," ")}}function N$(t,n){if(1&t){const e=ie();h(0,"div",19)(1,"form",20)(2,"div",21)(3,"h4",22),g(4),d(),h(5,"button",23),A("click",function(){return k(e).$implicit.dismiss()}),g(6,"X"),d()(),h(7,"div",24)(8,"div",25)(9,"label",26),g(10,"Relay Team Name: "),d(),D(11,"input",27),d(),x(12,P$,22,11,"div",28),D(13,"br")(14,"br"),h(15,"div",29),x(16,I$,2,9,"button",30),d(),D(17,"br"),h(18,"div",31),x(19,E$,2,4,"button",32),d()(),h(20,"div",33)(21,"button",34),A("click",function(){return k(e),_().saveDeck()}),g(22,"Save"),d()()()()}if(2&t){const e=_();p(1),m("formGroup",e.editDeckForm),p(3),q("Edit ",e.selectedDeck.name,""),p(8),m("ngIf",e.displayRaceOrder),p(4),m("ngForOf",e.raceCourseTypeList),p(3),m("ngForOf",e.possibleAnimalsList)}}let B$=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.modalService=i,this.lookupService=r,this.componentCommunicationService=a,this.raceCourseTypeList=[],this.displayRaceOrder=!1,this.editDeckForm=new ff({deckName:new Bm("")}),this.toggleRaceOrder=()=>{this.isRaceOrderOn=!this.isRaceOrderOn,this.selectedDeck.isCourseOrderActive=this.isRaceOrderOn}}ngOnInit(){this.componentCommunicationService.setNewView(Pt.relayTeams),this.isRaceOrderOn=!1,this.newAnimalList=[],this.animalDecks=this.globalService.globalVar.animalDecks,this.globalService.globalVar.animals.filter(r=>r.isAvailable).forEach(r=>{this.raceCourseTypeList.some(a=>a===r.getRaceCourseType())||this.raceCourseTypeList.push(r.getRaceCourseType())});var e=this.lookupService.getResourceByName("Scouts");null!=e&&e>0&&(this.displayRaceOrder=!0),this.selectedDeckOrder=[],this.selectedDeckOrder.push("Flatland"),this.selectedDeckOrder.push("Mountain"),this.selectedDeckOrder.push("Ocean"),this.selectedDeckOrder.push("Tundra"),this.selectedDeckOrder.push("Volcanic");var i=this.lookupService.getResourceByName("Team Manager");null==i&&(i=0),this.showAutoRaceButton=i>0,this.showEventButton=!!this.lookupService.isItemUnlocked("grandPrix")}editDeck(e,i){this.selectedDeck=i,this.newAnimalList=[],this.selectedAnimalName="",this.selectedCourseType="Flatland",this.isRaceOrderOn=i.isCourseOrderActive,null!=i.courseTypeOrder&&i.courseTypeOrder.length>0&&(this.selectedDeckOrder=[],i.courseTypeOrder.forEach(r=>{r===F.Flatland&&this.selectedDeckOrder.push("Flatland"),r===F.Mountain&&this.selectedDeckOrder.push("Mountain"),r===F.Ocean&&this.selectedDeckOrder.push("Ocean"),r===F.Tundra&&this.selectedDeckOrder.push("Tundra"),r===F.Volcanic&&this.selectedDeckOrder.push("Volcanic")})),this.filterType(this.selectedCourseType),i.selectedAnimals.length>0&&i.selectedAnimals.forEach(r=>{this.newAnimalList.push(r)}),this.editDeckForm.patchValue({deckName:i.name}),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}saveDeck(){var e,i,r,a,o,s,l,c,u=this.globalService.globalVar.animalDecks.find(M=>M.deckNumber===this.selectedDeck.deckNumber);if(null!=u&&((null===(e=this.editDeckForm.get("deckName"))||void 0===e?void 0:e.value.length)<=50&&(null===(i=this.editDeckForm.get("deckName"))||void 0===i?void 0:i.value.length)>=1&&(u.name=null===(r=this.editDeckForm.get("deckName"))||void 0===r?void 0:r.value),u.selectedAnimals=[],this.newAnimalList.forEach(M=>{null==u||u.selectedAnimals.push(M)}),null==u||u.selectedAnimals.sort(this.compare),this.displayRaceOrder&&this.isRaceOrderOn)){var f=[],v=null===(a=document.getElementById("raceOrder1"))||void 0===a?void 0:a.innerHTML,b=null===(o=document.getElementById("raceOrder2"))||void 0===o?void 0:o.innerHTML,y=null===(s=document.getElementById("raceOrder3"))||void 0===s?void 0:s.innerHTML,C=null===(l=document.getElementById("raceOrder4"))||void 0===l?void 0:l.innerHTML,T=null===(c=document.getElementById("raceOrder5"))||void 0===c?void 0:c.innerHTML;f.push(v),f.push(b),f.push(y),f.push(C),f.push(T),null!=u&&(u.courseTypeOrder=[]),f.forEach(M=>{"Flatland"===M&&(null==u||u.courseTypeOrder.push(F.Flatland)),"Mountain"===M&&(null==u||u.courseTypeOrder.push(F.Mountain)),"Ocean"===M&&(null==u||u.courseTypeOrder.push(F.Ocean)),"Tundra"===M&&(null==u||u.courseTypeOrder.push(F.Tundra)),"Volcanic"===M&&(null==u||u.courseTypeOrder.push(F.Volcanic))})}this.modalService.dismissAll()}compare(e,i){return e.raceCourseType>i.raceCourseType?1:i.raceCourseType>e.raceCourseType?-1:0}filterType(e){var i=this.lookupService.getAnimalsByRaceCourseType(e),r=[];i.length>0&&i.forEach(o=>{var s=this.globalService.globalVar.animals.find(l=>l.getAnimalType()===o);(null==s?void 0:s.isAvailable)&&r.push(s.getAnimalType())}),this.possibleAnimalsList=r,this.selectedCourseType=e;var a=this.selectedDeck.selectedAnimals.find(o=>o.getRaceCourseType()===e);null!=a&&(this.selectedAnimalName=a.getAnimalType())}selectAnimal(e){var i=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(null!=i){var r=-1,a=i.getRaceCourseType();this.newAnimalList.forEach(o=>{o.getRaceCourseType()===a&&(r=this.newAnimalList.indexOf(o))}),r>=0&&this.newAnimalList.splice(r,1),this.selectedAnimalName===i.getAnimalType()?this.selectedAnimalName="":(this.newAnimalList.push(i),this.selectedAnimalName=i.getAnimalType())}}setAsPrimary(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.isPrimaryDeck=!1),r.isPrimaryDeck=!0)}setAsAutoRunFreeRace(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.autoRunFreeRace),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.autoRunFreeRace=!1),r.autoRunFreeRace=!0)}setAsEventDeck(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.isEventDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.isEventDeck=!1),r.isEventDeck=!0)}dragStart(e){this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id)}allowDrop(e){e.preventDefault()}dropCourseType(e){e.preventDefault(),e.stopPropagation();var i=e.dataTransfer.getData("text"),r=document.getElementById(i),a=e.target.innerHTML;if(null!==r&&null!==a){var l=this.selectedDeckOrder.indexOf(a),c=this.selectedDeckOrder.indexOf(null==r?void 0:r.innerHTML);this.selectedDeckOrder[l]=r.innerHTML,this.selectedDeckOrder[c]=a,e.target.innerHTML="",e.target.className="",e.target.append(r.innerHTML),r.innerHTML="",r.className="",r.append(a)}}getColorClass(e){return{flatlandColor:"Flatland"===e,mountainColor:"Mountain"===e,waterColor:"Ocean"===e,tundraColor:"Tundra"===e,volcanicColor:"Volcanic"===e}}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(io),V(Ti),V(Pn))},t.\u0275cmp=Tt({type:t,selectors:[["app-decks-view"]],decls:12,vars:1,consts:[[1,"decksView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"description"],[4,"ngFor","ngForOf"],["content",""],[1,"gridContainer"],[1,"deck",3,"deckNumber"],[1,"edit"],[1,"editButton",3,"click"],[1,"primary"],[1,"primaryButton",3,"click"],[1,"autoRunFreeRace"],["class","autoRunFreeRaceButton",3,"click",4,"ngIf"],[1,"event"],["class","eventButton",3,"click",4,"ngIf"],[1,"autoRunFreeRaceButton",3,"click"],[1,"eventButton",3,"click"],[1,"modalClass"],[3,"formGroup"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","deck-name"],["id","deck-name","type","text","maxlength","50","formControlName","deckName",1,"spaced"],["class","raceOrder",4,"ngIf"],[1,"typeContainer"],["class","raceType subHeading clickableText buttonAsTextKeepColor",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"animalContainer"],["class","animalOption clickableText buttonAsText",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",3,"click"],[1,"raceOrder"],["type","checkbox","id","finishTraining",1,"spaced",3,"checked","input"],[1,"spaced",3,"click"],["id","raceOrder1","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder2","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder3","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder4","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder5","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],[1,"raceType","subHeading","clickableText","buttonAsTextKeepColor",3,"ngClass","click"],[1,"animalOption","clickableText","buttonAsText",3,"ngClass","click"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Relay Teams"),d(),h(6,"div",4),g(7," Relay Teams are groups of animals that run together in a race. As you rise through the ranks, races will have multiple legs of varying terrain that require you to use different animals to succeed. Each Relay Team consists of one animal from each course type. Your primary Relay Team is the one that will run the races you select. "),d(),D(8,"hr"),d(),x(9,A$,14,3,"div",5),d()()(),x(10,N$,23,5,"ng-template",null,6,dt)),2&e&&(p(9),m("ngForOf",i.animalDecks))},directives:[Cn,J0,li,pf,rf,gf,Lo,Us,Uo,Gm,cn],styles:['.decksView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view .";background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.view[_ngcontent-%COMP%]{grid-area:view;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.animalContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.animalOption[_ngcontent-%COMP%]{display:inline-block}.selectedAnimal[_ngcontent-%COMP%]{font-weight:700}.selectedCourseType[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:60% 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"deck . freeRace ." "deck edit primary event"}.deck[_ngcontent-%COMP%]{grid-area:deck}.edit[_ngcontent-%COMP%]{grid-area:edit;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.eventButton[_ngcontent-%COMP%], .editButton[_ngcontent-%COMP%]{width:80%}.primary[_ngcontent-%COMP%]{grid-area:primary;text-align:center}.primaryButton[_ngcontent-%COMP%]{width:80%}.autoRunFreeRace[_ngcontent-%COMP%]{grid-area:freeRace;text-align:center}.autoRunFreeRaceButton[_ngcontent-%COMP%]{width:80%;margin-bottom:.5rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.draggable[_ngcontent-%COMP%]{cursor:move;margin:1em}.raceOrder[_ngcontent-%COMP%]{display:inline-block}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{grid-template-columns:50% 1fr 1fr 1fr}}']}),t})();function F$(t,n){if(1&t&&(h(0,"span"),g(1),d()),2&t){const e=_(2);p(1),q("",e.selectedItem.numberPurchasing," ")}}function L$(t,n){if(1&t&&(h(0,"em"),g(1),d()),2&t){const e=_(2);p(1),ki(" (",e.selectedItem.totalShopQuantity-e.amountPurchased," left",e.mangoTextLimit,")")}}function U$(t,n){if(1&t){const e=ie();h(0,"span",9)(1,"span")(2,"label"),g(3,"Quantity: "),h(4,"input",10),A("ngModelChange",function(r){return k(e),_(2).purchasingQuantity=r})("change",function(){return k(e),_(2).updatePrice()}),d()()(),h(5,"button",11),A("click",function(){return k(e),_(2).BuyItem()}),g(6,"Buy"),d()()}if(2&t){const e=_(2);p(4),m("ngModel",e.purchasingQuantity),p(1),m("disabled",!e.canAffordItem)}}function H$(t,n){if(1&t){const e=ie();h(0,"span")(1,"button",11),A("click",function(){return k(e),_(2).BuyItem()}),g(2,"Buy"),d()()}if(2&t){const e=_(2);p(1),m("disabled",!e.canAffordItem)}}function G$(t,n){if(1&t&&(h(0,"div",3)(1,"span",4),x(2,F$,2,1,"span",5),g(3),d(),x(4,L$,2,2,"em",5),D(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),h(10,"div",7),g(11),d(),D(12,"br"),x(13,U$,7,2,"span",8),x(14,H$,3,1,"span",5),d()),2&t){const e=_();m("ngbPopover",ot(3)),p(1),m("ngClass",e.colorConditional),p(1),m("ngIf",e.displayNumberPurchasing),p(1),q(" ",e.displayName,""),p(1),m("ngIf",e.selectedItem.totalShopQuantity>1),p(3),m("innerHTML",e.shortDescription,kt),p(4),q(" ",e.purchaseResourcesRequired," "),p(2),m("ngIf",e.displayPurchasingQuantity),p(1),m("ngIf",!e.displayPurchasingQuantity)}}function z$(t,n){if(1&t&&(h(0,"span"),g(1),d()),2&t){const e=_(2);p(1),q("",e.selectedItem.numberPurchasing," ")}}function j$(t,n){if(1&t&&(h(0,"em"),g(1),d()),2&t){const e=_(2);p(1),ki(" (",e.selectedItem.totalShopQuantity-e.amountPurchased," left",e.mangoTextLimit,")")}}function $$(t,n){if(1&t){const e=ie();h(0,"span",9)(1,"span")(2,"label"),g(3,"Quantity: "),h(4,"input",10),A("ngModelChange",function(r){return k(e),_(2).purchasingQuantity=r})("change",function(){return k(e),_(2).updatePrice()}),d()()(),h(5,"button",11),A("click",function(){return k(e),_(2).BuyItem()}),g(6,"Buy"),d()()}if(2&t){const e=_(2);p(4),m("ngModel",e.purchasingQuantity),p(1),m("disabled",!e.canAffordItem)}}function q$(t,n){if(1&t){const e=ie();h(0,"span")(1,"button",11),A("click",function(){return k(e),_(2).BuyItem()}),g(2,"Buy"),d()()}if(2&t){const e=_(2);p(1),m("disabled",!e.canAffordItem)}}function W$(t,n){if(1&t&&(h(0,"div",12)(1,"span",4),x(2,z$,2,1,"span",5),g(3),d(),x(4,j$,2,2,"em",5),D(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),h(10,"div",7),g(11),d(),D(12,"br"),x(13,$$,7,2,"span",8),x(14,q$,3,1,"span",5),d()),2&t){const e=_();p(1),m("ngClass",e.colorConditional),p(1),m("ngIf",e.displayNumberPurchasing),p(1),rt(e.displayName),p(1),m("ngIf",e.selectedItem.totalShopQuantity>1),p(3),m("innerHTML",e.shortDescription,kt),p(4),q(" ",e.purchaseResourcesRequired," "),p(2),m("ngIf",e.displayPurchasingQuantity),p(1),m("ngIf",!e.displayPurchasingQuantity)}}function X$(t,n){if(1&t&&(h(0,"div",13),D(1,"span",6),d()),2&t){const e=_();p(1),m("innerHTML",e.longDescription,kt)}}let Y$=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.gameLoopService=r,this.itemPurchased=new bt,this.canAffordItem=!0,this.displayNumberPurchasing=!1,this.displayName="",this.buyMultiplierAmount=1,this.purchasingQuantity=1,this.displayPurchasingQuantity=!1,this.mangoTextLimit=""}ngOnInit(){var e=this;if(this.buyMultiplierAmount=1,this.amountPurchased=this.selectedItem.amountPurchased,this.selectedItem.canHaveMultiples&&"Mangoes"!==this.selectedItem.name&&(void 0===this.selectedItem.quantityAdditive||0===this.selectedItem.quantityAdditive)&&(void 0===this.selectedItem.quantityMultiplier||1===this.selectedItem.quantityMultiplier)&&(this.displayPurchasingQuantity=!0),this.selectedItem.type===G.Ability?(this.shortDescription=this.lookupService.getAnimalAbilityDescription(!0,this.selectedItem.additionalIdentifier),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedItem.additionalIdentifier)):this.selectedItem.type===G.Specialty?(this.shortDescription=this.lookupService.getSpecialtyItemDescription(this.selectedItem.name),""===this.shortDescription&&(this.shortDescription=this.selectedItem.shortDescription)):this.selectedItem.type===G.Animal?this.shortDescription=this.globalService.getAnimalDescription(this.selectedItem.name):this.selectedItem.type===G.Food?this.shortDescription=this.globalService.getItemDescription(this.selectedItem.name):(this.shortDescription=this.selectedItem.shortDescription,this.longDescription=this.selectedItem.longDescription),this.displayName=this.selectedItem.name,this.selectedItem.type===G.Animal&&void 0!==(i=this.globalService.globalVar.animals.find(a=>a.name===this.selectedItem.name))&&(this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()}),this.selectedItem.type===G.Ability){var i,r=this.selectedItem.name.split(" ")[0].trim();""!==r&&void 0!==(i=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===r))&&(this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()})}this.selectedItem.type===G.Food&&1===this.selectedItem.numberPurchasing&&("Apples"===this.displayName&&(this.displayName="Apple"),"Oranges"===this.displayName&&(this.displayName="Orange"),"Bananas"===this.displayName&&(this.displayName="Banana"),"Strawberries"===this.displayName&&(this.displayName="Strawberry"),"Carrots"===this.displayName&&(this.displayName="Carrot"),"Turnips"===this.displayName&&(this.displayName="Turnip"),"Mangoes"===this.displayName&&(this.displayName="Mango"),"Gingko Leaves"===this.displayName&&(this.displayName="Gingko Leaf")),(this.selectedItem.type===G.Food||this.selectedItem.type===G.Resources)&&(this.displayNumberPurchasing=!0),this.amountSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Br(function*(){e.selectedItem.purchasePrice.forEach(a=>{var o=a.name;1===a.amount&&("Tokens"===o&&(o="Token"),"Medals"===o&&(o="Medal")),e.purchaseResourcesRequired=(a.amount*e.buyMultiplierAmount).toLocaleString()+" "+o+", ";var s=e.lookupService.getResourceByName(a.name);e.canAffordItem=!(s<a.amount*e.buyMultiplierAmount)}),"Mangoes"===e.selectedItem.name&&(e.mangoTextLimit=" this month",e.amountPurchased=e.globalService.globalVar.monthlyMangoesPurchased,e.lookupService.getMonthlyMangoLimit()-e.amountPurchased<=0&&(e.canAffordItem=!1)),e.purchaseResourcesRequired.length>0&&(e.purchaseResourcesRequired=e.purchaseResourcesRequired.substring(0,e.purchaseResourcesRequired.length-2))}))}BuyItem(){this.buyMultiplierAmount=this.purchasingQuantity,this.canBuyItem()&&(this.spendResourcesOnItem(),this.selectedItem.type===G.Animal&&this.buyAnimal(),this.selectedItem.type===G.Food?this.buyFood():this.selectedItem.type===G.Training&&this.buyTraining(),this.selectedItem.type===G.Specialty?this.buySpecialty():this.selectedItem.type===G.Ability&&this.buyAbility(),this.selectedItem.type===G.Equipment&&this.buyEquipment(),this.selectedItem.type===G.Consumable&&this.buyConsumable(),this.selectedItem.type===G.Resources&&this.buyResources(),this.itemPurchased.emit(this.selectedItem))}canBuyItem(){this.buyMultiplierAmount=this.purchasingQuantity;var e=!0;return this.selectedItem.purchasePrice.forEach(i=>{this.lookupService.getResourceByName(i.name)<i.amount*this.buyMultiplierAmount&&(e=!1)}),e}updatePrice(){this.canBuyItem()}spendResourcesOnItem(){this.selectedItem.purchasePrice.forEach(e=>{this.lookupService.spendResourceByName(e.name,e.amount*this.buyMultiplierAmount)})}buyAnimal(){this.globalService.sortAnimalOrder();var e=this.globalService.globalVar.animals.find(s=>s.name===this.selectedItem.name);if(null!=e){e.isAvailable=!0,this.selectedItem.amountPurchased=1;var i=this.globalService.globalVar.shop.find(s=>"Abilities"===s.name);if(null!=i){var r=i.itemList.filter(s=>s.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(s=>{s.isAvailable=!0})}var a=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);if(null!=a){var o=!1;a.selectedAnimals.forEach(s=>{s.raceCourseType===(null==e?void 0:e.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(e)}}}buyTraining(){this.selectedItem.amountPurchased=1;var e=this.globalService.globalVar.trainingOptions.find(i=>i.trainingName===this.selectedItem.name);void 0!==e&&(e.isAvailable=!0)}buyFood(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new te(this.selectedItem.name,e,G.Food));"Mangoes"===this.selectedItem.name&&this.selectedItem.purchasePrice.forEach(r=>{"Coins"===r.name&&(r.amount+=50,this.globalService.globalVar.monthlyMangoesPurchased+=1),"Tokens"===r.name&&(r.amount+=1)})}buySpecialty(){var e,a;if(this.selectedItem.amountPurchased+=1,"Whistle"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))){var i=e.itemList.find(c=>"Golden Whistle"===c.name);null!=i&&(i.isAvailable=!0)}if("National Races"===this.selectedItem.name&&(this.globalService.globalVar.nationalRaceCountdown=0,null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name)))){var r=e.itemList.find(u=>"International Races"===u.name);null!=r&&(r.isAvailable=!0)}"International Races"===this.selectedItem.name&&(this.globalService.globalVar.nationalRaceCountdown=0),"Incubator Upgrade Lv1"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(u=>"Incubator Upgrade Lv2"===u.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv2"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(f=>"Incubator Upgrade Lv3"===f.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv3"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(f=>"Incubator Upgrade Lv4"===f.name))&&(a.isAvailable=!0);var o=this.lookupService.getResourceByName("Team Manager");if("Team Manager"===this.selectedItem.name&&1===this.selectedItem.amountPurchased&&(null==o||0===o)&&!this.globalService.globalVar.animalDecks.some(c=>c.autoRunFreeRace)){var s=this.globalService.globalVar.animalDecks.find(c=>c.isPrimaryDeck);null!=s&&(s.autoRunFreeRace=!0)}if(null!=this.globalService.globalVar.resources&&(this.globalService.globalVar.resources.some(c=>c.name===this.selectedItem.name)?null!=(l=this.globalService.globalVar.resources.find(c=>c.name===this.selectedItem.name))&&(l.amount+=1):this.globalService.globalVar.resources.push(new te(this.selectedItem.name,1,G.Specialty))),"Talent Point Voucher"===this.selectedItem.name)if(this.globalService.globalVar.resources.some(c=>"Talent Points"===c.name)){var l;null!=(l=this.globalService.globalVar.resources.find(u=>"Talent Points"===u.name))&&(l.amount+=1)}else this.globalService.globalVar.resources.push(new te("Talent Points",1,G.Resources));null!=this.selectedItem.quantityMultiplier&&this.selectedItem.quantityMultiplier>0&&this.selectedItem.purchasePrice.forEach(c=>{null!=this.selectedItem.quantityAdditive&&this.selectedItem.quantityAdditive>0?c.amount+=this.selectedItem.quantityAdditive:c.amount*=this.selectedItem.quantityMultiplier,"Team Manager"===this.selectedItem.name&&c.amount>5e3&&(c.amount=5e3)})}buyAbility(){var e=this.selectedItem.name.split(" ")[0].trim(),i=this.selectedItem.name.split(":")[1].trim();if(""!==e&&""!==i){var r=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(void 0!==r){var a=r.availableAbilities.find(o=>o.name===i);void 0!==a&&(a.isAbilityPurchased=!0,this.selectedItem.amountPurchased=1)}}}buyEquipment(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new te(this.selectedItem.name,e,G.Equipment))}buyConsumable(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new te(this.selectedItem.name,e,G.Consumable))}buyResources(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new te(this.selectedItem.name,e,G.Resources))}ngOnDestroy(){null!=this.amountSubscription&&this.amountSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Ti),V(An))},t.\u0275cmp=Tt({type:t,selectors:[["app-shopping-item"]],inputs:{selectedItem:"selectedItem"},outputs:{itemPurchased:"itemPurchased"},decls:4,vars:2,consts:[["class","item","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","item",4,"ngIf"],["longDescriptionContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"item",3,"ngbPopover"],[1,"keyword",3,"ngClass"],[4,"ngIf"],[3,"innerHTML"],[1,"resourceKeyword"],["class","flex",4,"ngIf"],[1,"flex"],["maxlength","20",1,"quantity",3,"ngModel","ngModelChange","change"],[3,"disabled","click"],[1,"item"],[1,"popoverClass"]],template:function(e,i){1&e&&(x(0,G$,15,9,"div",0),x(1,W$,15,8,"div",1),x(2,X$,2,1,"ng-template",null,2,dt)),2&e&&(m("ngIf",""!==i.longDescription&&null!=i.longDescription),p(1),m("ngIf",""===i.longDescription||null==i.longDescription))},directives:[li,Qr,cn,Lo,Us,Uo,Ho],styles:[".item[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}.quantity[_ngcontent-%COMP%]{width:5rem;margin-right:.5rem}"]}),t})();function Q$(t,n){if(1&t){const e=ie();h(0,"td",8)(1,"div")(2,"app-shopping-item",9),A("itemPurchased",function(r){return k(e),_(3).itemPurchased(r)}),d()()()}if(2&t){const e=n.$implicit;p(2),m("selectedItem",e)}}function K$(t,n){if(1&t&&(h(0,"tr"),x(1,Q$,3,1,"td",7),d()),2&t){const e=n.$implicit;p(1),m("ngForOf",e)}}function Z$(t,n){if(1&t&&(h(0,"table"),x(1,K$,2,1,"tr",6),d()),2&t){const e=_();p(1),m("ngForOf",e.itemsRows)}}function J$(t,n){1&t&&(h(0,"div",10),D(1,"br"),h(2,"span"),g(3,"Fresh out! Check back again in the future to see if more items are added!"),d(),D(4,"br"),d())}const eq=function(t){return{tokenShopColor:t}};let kD=(()=>{class t{constructor(e){this.globalService=e,this.shopsEnum=Va,this.itemPurchasedEmitter=new bt}ngOnInit(){null==this.shopType&&(this.shopType=Va.regular),this.shopType===Va.regular&&(this.resetShopSubscription=this.resetShop.subscribe(()=>this.setupDisplayItems())),this.setupDisplayItems()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];var e=4;this.screenHeight<=650&&(e=2);var i=[];this.section.itemList.forEach(a=>{a.isAvailable&&(a.canHaveMultiples&&(a.infiniteAmount||a.amountPurchased<a.totalShopQuantity)||0===a.amountPurchased)&&i.push(a)});for(var r=1;r<=i.length;r++)this.itemsCells.push(i[r-1]),r%e==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}itemPurchased(e){this.setupDisplayItems(),this.itemPurchasedEmitter.emit(!0)}ngOnDestroy(){void 0!==this.resetShopSubscription&&this.resetShopSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(It))},t.\u0275cmp=Tt({type:t,selectors:[["app-shopping-list"]],hostBindings:function(e,i){1&e&&A("resize",function(a){return i.onResize(a)},!1,Ca)},inputs:{section:"section",shopType:"shopType",resetShop:"resetShop"},outputs:{itemPurchasedEmitter:"itemPurchasedEmitter"},decls:8,vars:6,consts:[[1,"shoppingListView"],[1,"sectionHeaderBackgroundColor",3,"ngClass"],[1,"s4Heading","keyword","sectionHeaderText"],[1,"items"],[4,"ngIf"],["class","centered","c","",4,"ngIf"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[3,"selectedItem","itemPurchased"],["c","",1,"centered"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"span",2),g(3),d()(),h(4,"div",3),x(5,Z$,2,1,"table",4),x(6,J$,5,0,"div",5),D(7,"br"),d()()),2&e&&(p(1),m("ngClass",yt(4,eq,i.shopType===i.shopsEnum.token)),p(2),rt(i.section.name),p(2),m("ngIf",i.itemsRows.length>0),p(1),m("ngIf",0===i.itemsRows.length))},directives:[cn,li,Cn,Y$],styles:[".shoppingListView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.sectionHeaderBackgroundColor[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center}.tokenShopColor[_ngcontent-%COMP%]{background-color:var(--tokenShopColor)!important}.sectionHeaderText[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.centered[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function tq(t,n){if(1&t&&(h(0,"div",8),D(1,"app-shopping-list",9),d()),2&t){const e=n.$implicit,i=_();p(1),m("section",e)("shopType",i.shopType)}}function iq(t,n){if(1&t&&(h(0,"div",10),D(1,"hr"),h(2,"em"),g(3),h(4,"span",11),g(5,"Renown"),d()()()),2&t){const e=_();p(3),q("Next tier unlocked at ",e.lookupService.getRenownRequiredForEventShopTier(e.highestTierUnlocked+1)," ")}}let nq=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.lookupService=i,this.gameLoopService=r,this.componentCommunicationService=a,this.highestTierUnlocked=0,this.maxTiers=3,this.shopType=Va.token,this.currentTokens=0}keyEvent(e){(e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.returnToEventRaceView()}ngOnInit(){var e=this;this.highestTierUnlocked=this.lookupService.getHighestEventShopTierUnlocked(),this.getShopOptions(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(Br(function*(){e.currentTokens=e.lookupService.getTokens()}))}getShopOptions(){this.sections=[];var e=this.globalService.globalVar.tokenShop.find(a=>"Tier 1"===a.name);void 0!==e&&this.highestTierUnlocked>=1&&this.sections.push(e);var i=this.globalService.globalVar.tokenShop.find(a=>"Tier 2"===a.name);void 0!==i&&this.highestTierUnlocked>=2&&this.sections.push(i);var r=this.globalService.globalVar.tokenShop.find(a=>"Tier 3"===a.name);void 0!==r&&this.highestTierUnlocked>=3&&this.sections.push(r)}returnToEventRaceView(){this.componentCommunicationService.setShopType(Va.regular),this.componentCommunicationService.setRaceView(Pt.raceselection,ge.event)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Ti),V(An),V(Pn))},t.\u0275cmp=Tt({type:t,selectors:[["app-token-shop-view"]],hostBindings:function(e,i){1&e&&A("keyup",function(a){return i.keyEvent(a)},!1,Ca)},decls:15,vars:3,consts:[[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"back"],[3,"click"],["class","shopSection",4,"ngFor","ngForOf"],["class","centered",4,"ngIf"],[1,"shopSection"],[3,"section","shopType"],[1,"centered"],[1,"progressionKeyword"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Token Shop"),d(),h(6,"span"),g(7),d()(),h(8,"div",4)(9,"button",5),A("click",function(){return i.returnToEventRaceView()}),g(10,"Back To Event"),d()()()(),D(11,"br"),x(12,tq,2,2,"div",6),D(13,"br"),x(14,iq,6,1,"div",7),d()),2&e&&(p(7),q("Tokens: ",i.currentTokens,""),p(5),m("ngForOf",i.sections),p(2),m("ngIf",i.highestTierUnlocked<i.maxTiers))},directives:[Cn,kD,li],styles:['.shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}']}),t})();function rq(t,n){if(1&t){const e=ie();h(0,"div",16)(1,"app-shopping-list",17),A("itemPurchasedEmitter",function(r){return k(e),_(2).itemPurchased(r)}),d()()}if(2&t){const e=n.$implicit,i=_(2);p(1),m("section",e)("resetShop",i.resetShopSubject.asObservable())}}function aq(t,n){if(1&t){const e=ie();h(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2"),g(5,"Shop"),d()()(),h(6,"div",6)(7,"span",7),g(8,"Filters:"),d(),h(9,"button",8),A("click",function(){return k(e),_().toggleShopFilter("Animals")}),g(10,"Animals"),d(),h(11,"button",9),A("click",function(){return k(e),_().toggleShopFilter("Trainings")}),g(12," Trainings"),d(),h(13,"button",10),A("click",function(){return k(e),_().toggleShopFilter("Equipment")}),g(14,"Equipment "),d(),h(15,"button",11),A("click",function(){return k(e),_().toggleShopFilter("Food")}),g(16,"Food"),d(),h(17,"button",12),A("click",function(){return k(e),_().toggleShopFilter("Specialty")}),g(18," Specialty"),d(),h(19,"button",13),A("click",function(){return k(e),_().toggleShopFilter("Abilities")}),g(20," Abilities"),d()(),h(21,"button",14),A("click",function(){return k(e),_().ResetShopFilters()}),g(22," Reset Filters "),d(),D(23,"br")(24,"br"),h(25,"em"),g(26,"Certain items can be bought in bulk. Use the Alt, Shift, and Ctrl keys to modify the amount you are buying."),d()(),D(27,"br"),x(28,rq,2,2,"div",15),d()}if(2&t){const e=_();p(9),Bt("filterActive",e.filterAnimals),p(2),Bt("filterActive",e.filterTrainings),p(2),Bt("filterActive",e.filterEquipment),p(2),Bt("filterActive",e.filterFood),p(2),Bt("filterActive",e.filterSpecialty),p(2),Bt("filterActive",e.filterAbilities),p(9),m("ngForOf",e.sections)}}function oq(t,n){1&t&&(h(0,"div"),D(1,"app-token-shop-view"),d())}let sq=(()=>{class t{constructor(e,i,r){this.globalService=e,this.componentCommunicationService=i,this.lookupService=r,this.filterAnimals=!1,this.filterTrainings=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterAbilities=!1,this.ShopsEnum=Va,this.resetShopSubject=new Te}ngOnInit(){this.componentCommunicationService.setNewView(Pt.shop),this.getShopOptions(),this.subscription=this.componentCommunicationService.getShopView().subscribe(e=>{this.activeShopView=e})}getShopOptions(){this.sections=[];var e=this.filtersActive(),i=this.globalService.globalVar.shop.find(f=>"Animals"===f.name&&(!e||e&&this.filterAnimals));void 0!==i&&this.sections.push(i);var r=this.globalService.globalVar.shop.find(f=>"Trainings"===f.name&&(!e||e&&this.filterTrainings));void 0!==r&&this.sections.push(r);var a=this.globalService.globalVar.shop.find(f=>"Equipment"===f.name&&(!e||e&&this.filterEquipment));void 0!==a&&this.sections.push(a);var o=this.globalService.globalVar.shop.find(f=>"Food"===f.name&&(!e||e&&this.filterFood));if(void 0!==o){var s=o.itemList.find(f=>"Mangoes"===f.name),l=this.lookupService.getMonthlyMangoLimit();l<0&&(l=0),void 0!==s&&(s.totalShopQuantity=l),this.sections.push(o)}var c=this.globalService.globalVar.shop.find(f=>"Specialty"===f.name&&(!e||e&&this.filterSpecialty));void 0!==c&&this.sections.push(c);var u=this.globalService.globalVar.shop.find(f=>"Abilities"===f.name&&(!e||e&&this.filterAbilities));void 0!==u&&this.sections.push(u)}toggleShopFilter(e){"Animals"===e&&(this.filterAnimals=!this.filterAnimals),"Trainings"===e&&(this.filterTrainings=!this.filterTrainings),"Equipment"===e&&(this.filterEquipment=!this.filterEquipment),"Food"===e&&(this.filterFood=!this.filterFood),"Specialty"===e&&(this.filterSpecialty=!this.filterSpecialty),"Abilities"===e&&(this.filterAbilities=!this.filterAbilities),this.getShopOptions()}filtersActive(){return!!(this.filterAnimals||this.filterAbilities||this.filterEquipment||this.filterFood||this.filterSpecialty||this.filterTrainings)}ResetShopFilters(){this.filterAnimals=!1,this.filterAbilities=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterTrainings=!1,this.getShopOptions()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}itemPurchased(e){this.getShopOptions(),this.resetShopSubject.next()}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Pn),V(Ti))},t.\u0275cmp=Tt({type:t,selectors:[["app-shop-view"]],decls:2,vars:2,consts:[["class","shopView",4,"ngIf"],[4,"ngIf"],[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"filters"],["id","title"],["id","animalsFilter",1,"clickableText","buttonAsText",3,"click"],["id","trainingsFilter",1,"clickableText","buttonAsText",3,"click"],["id","equipmentFilter",1,"clickableText","buttonAsText",3,"click"],["id","foodFilter",1,"clickableText","buttonAsText",3,"click"],["id","specialtyFilter",1,"clickableText","buttonAsText",3,"click"],["id","abilitiesFilter",1,"clickableText","buttonAsText",3,"click"],[1,"centered","clickableText","buttonAsText",3,"click"],["class","shopSection",4,"ngFor","ngForOf"],[1,"shopSection"],[3,"section","resetShop","itemPurchasedEmitter"]],template:function(e,i){1&e&&(x(0,aq,29,13,"div",0),x(1,oq,2,0,"div",1)),2&e&&(m("ngIf",i.activeShopView===i.ShopsEnum.regular),p(1),m("ngIf",i.activeShopView===i.ShopsEnum.token))},directives:[li,Cn,kD,nq],styles:[".shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.filters[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4%}#title[_ngcontent-%COMP%]{grid-area:title}#animalsFilter[_ngcontent-%COMP%]{grid-area:animalsFilter}#trainingsFilter[_ngcontent-%COMP%]{grid-area:trainingsFilter}#facilityFilter[_ngcontent-%COMP%]{grid-area:facilityFilter}#foodFilter[_ngcontent-%COMP%]{grid-area:foodFilter}#specialtyFilter[_ngcontent-%COMP%]{grid-area:specialtyFilter}#enhancerFilter[_ngcontent-%COMP%]{grid-area:enhancerFilter}"]}),t})(),lq=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i}ngOnInit(){this.traitLevel=this.lookupService.getResearchLevel(),this.maxNegativePercent=25;var e=this.globalService.globalVar.modifiers.find(i=>"maximumTraitNegativePercentModifier"===i.text);void 0!==e&&(this.maxNegativePercent=e.value)}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Ti))},t.\u0275cmp=Tt({type:t,selectors:[["app-trait-option"]],inputs:{trait:"trait"},decls:5,vars:2,consts:[[1,"trait"],[1,"traitName","keyword"],[1,"traitStats"]],template:function(e,i){1&e&&(h(0,"h6",0)(1,"p",1),g(2),d(),h(3,"p",2),g(4),d()()),2&e&&(p(2),rt(i.trait.traitName),p(2),rt(i.trait.getStatGainDescription(i.maxNegativePercent)))},styles:[".trait[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const cq=function(t){return{activeTrait:t}};function uq(t,n){if(1&t){const e=ie();h(0,"td",4)(1,"div",5),A("click",function(){const a=k(e).$implicit;return _(2).selectTrait(a)}),D(2,"app-trait-option",6),d()()}if(2&t){const e=n.$implicit;p(1),m("ngClass",yt(2,cq,e.isSelected)),p(1),m("trait",e)}}function dq(t,n){if(1&t&&(h(0,"tr"),x(1,uq,3,4,"td",3),d()),2&t){const e=n.$implicit;p(1),m("ngForOf",e)}}let hq=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrait=new bt}ngOnInit(){this.setupDisplayTraits()}setupDisplayTraits(){this.traitsCells=[],this.traitsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTraits.length;i++)this.traitsCells.push(this.availableTraits[i-1]),i%e==0&&(this.traitsRows.push(this.traitsCells),this.traitsCells=[]);0!==this.traitsCells.length&&this.traitsRows.push(this.traitsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrait(e){this.availableTraits.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrait.emit(e)}ngOnChanges(e){this.availableTraits=e.availableTraits.currentValue,this.setupDisplayTraits()}}return t.\u0275fac=function(e){return new(e||t)(V(It))},t.\u0275cmp=Tt({type:t,selectors:[["app-trait-list"]],hostBindings:function(e,i){1&e&&A("resize",function(a){return i.onResize(a)},!1,Ca)},inputs:{availableTraits:"availableTraits"},outputs:{selectedTrait:"selectedTrait"},features:[jn],decls:4,vars:1,consts:[[1,"traitsView"],[1,"traits"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trait"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"table"),x(3,dq,2,1,"tr",2),d()()()),2&e&&(p(3),m("ngForOf",i.traitsRows))},directives:[Cn,cn,lq],styles:[".traitsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function fq(t,n){if(1&t&&(h(0,"span"),g(1),d()),2&t){const e=_(2);p(1),rt(e.selectedAnimal.name)}}function pq(t,n){if(1&t){const e=ie();h(0,"div",21),A("click",function(){return k(e),_().goToAnimal()}),x(1,fq,2,1,"span",7),D(2,"br"),h(3,"span"),g(4),d()()}if(2&t){const e=_();m("ngClass",e.colorConditional),p(1),m("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),rt(e.selectedAnimal.getAnimalType())}}function gq(t,n){if(1&t){const e=ie();h(0,"div",21),A("click",function(){return k(e),_().goToAnimal()}),h(1,"span"),g(2),d()()}if(2&t){const e=_();m("ngClass",e.colorConditional),p(2),rt(e.selectedAnimal.getAnimalType())}}function vq(t,n){if(1&t&&(h(0,"span",22),g(1,"Current Trait: "),h(2,"span",23),g(3),d()()),2&t){const e=_();Cr("ngbPopover",e.traitStatGainDescription),p(3),rt(e.selectedAnimal.getTraitName())}}function mq(t,n){if(1&t&&(h(0,"span",24),g(1),d()),2&t){const e=_();p(1),q("",e.existingTrait.traitName," ")}}function bq(t,n){1&t&&(h(0,"span"),g(1,"No Trait Assigned"),d())}function _q(t,n){if(1&t){const e=ie();h(0,"div"),D(1,"br"),h(2,"p",25),D(3,"ngb-progressbar",26),h(4,"span",27),g(5),Vt(6,"number"),d()(),D(7,"br"),h(8,"button",9),A("click",function(){return k(e),_().cancelIncubation()}),g(9,"Cancel Incubation"),d()()}if(2&t){const e=_();p(3),m("value",e.trainingProgressBarPercent),p(2),q("",Qt(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}let yq=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.componentCommunicationService=a,this.returnEmitter=new bt,this.traitStatGainDescription="",this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1}keyEvent(e){(e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.returnToAnimalView()}ngOnInit(){this.availableTraits=this.GetAvailableTraits();var e=this.globalService.globalVar.incubator;if(null!=e.assignedAnimal&&null!=e.assignedTrait&&(this.existingTrait=e.assignedTrait),null!=this.existingTrait){var i=this.availableTraits.find(r=>{var a;return(null===(a=this.existingTrait)||void 0===a?void 0:a.traitName)===r.traitName});null!=i&&(i.isSelected=!0)}this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.incubator;if(null==a.assignedAnimal||null==a.assignedTrait)return this.existingTrait=null,void this.availableTraits.forEach(o=>{o.isSelected=!1});this.trainingProgressBarPercent=a.timeTrained/a.timeToComplete*100})}cancelIncubation(){var e=this.globalService.globalVar.incubator;e.timeTrained=0,e.assignedAnimal=null,e.assignedTrait=null,this.selectedAnimal.canTrain=!0}selectNewTrait(e){var i=Object.assign({},e),r=this.globalService.globalVar.incubator;r.timeTrained=0,r.assignedAnimal=this.selectedAnimal,r.assignedTrait=i,this.existingTrait=i,this.selectedAnimal.canTrain=!1}GetAvailableTraits(){var e=[],i=this.lookupService.getResearchLevel();return e.push(new Oi("Alert",1,i,ye.focus,ye.endurance)),e.push(new Oi("Sharp",1,i,ye.adaptability,ye.power)),e.push(new Oi("Bulky",1,i,ye.power,ye.topSpeed)),e.push(new Oi("Curious",3,i,ye.acceleration,ye.focus)),e.push(new Oi("Adamant",3,i,ye.topSpeed,ye.acceleration)),e.push(new Oi("Stoic",5,i,ye.endurance,ye.adaptability)),e.push(new Oi("Smart",5,i,ye.focus,ye.power)),e.push(new Oi("Careful",7,i,ye.adaptability,ye.acceleration)),e.push(new Oi("Attentive",7,i,ye.power,ye.endurance)),e.push(new Oi("Keen",9,i,ye.acceleration,ye.topSpeed)),e.push(new Oi("Quick",9,i,ye.topSpeed,ye.adaptability)),e.push(new Oi("Tough",11,i,ye.endurance,ye.focus)),e.push(new Oi("Solitary",11,i,ye.focus,ye.acceleration)),e.push(new Oi("Cautious",13,i,ye.adaptability,ye.topSpeed)),e.push(new Oi("Wild",13,i,ye.power,ye.focus)),e.push(new Oi("Clumsy",15,i,ye.acceleration,ye.adaptability)),e.push(new Oi("Natural",15,i,ye.topSpeed,ye.endurance)),e.push(new Oi("Resilient",17,i,ye.endurance,ye.power)),e.push(new Oi("Anxious",17,i,ye.focus,ye.topSpeed)),e.push(new Oi("Lucky",19,i,ye.adaptability,ye.focus)),e.push(new Oi("Rugged",19,i,ye.power,ye.adaptability)),e.push(new Oi("Naive",21,i,ye.acceleration,ye.endurance)),e.push(new Oi("Sprightly",21,i,ye.topSpeed,ye.power)),e.push(new Oi("Stout",23,i,ye.endurance,ye.acceleration)),e.push(new Oi("Pensive",23,i,ye.focus,ye.adaptability)),e.push(new Oi("Languid",25,i,ye.adaptability,ye.endurance)),e.push(new Oi("Mighty",25,i,ye.power,ye.acceleration)),e.push(new Oi("Nimble",27,i,ye.acceleration,ye.power)),e.push(new Oi("Small",27,i,ye.topSpeed,ye.focus)),e.push(new Oi("Resolute",29,i,ye.endurance,ye.topSpeed)),(e=e.filter(r=>i>=r.requiredLevel)).filter(r=>!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterSpeed&&r.positiveStatGain===ye.topSpeed||this.filterAcceleration&&r.positiveStatGain===ye.acceleration||this.filterEndurance&&r.positiveStatGain===ye.endurance||this.filterPower&&r.positiveStatGain===ye.power||this.filterFocus&&r.positiveStatGain===ye.focus||this.filterAdaptability&&r.positiveStatGain===ye.adaptability)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.availableTraits=this.GetAvailableTraits()}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTraits=this.GetAvailableTraits()}returnToAnimalView(){this.returnEmitter.emit(!1)}goToAnimal(){this.componentCommunicationService.setAnimalView(Pt.animals,this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(An),V(Ti),V(Pn))},t.\u0275cmp=Tt({type:t,selectors:[["app-incubator-traits"]],hostBindings:function(e,i){1&e&&A("keyup",function(a){return i.keyEvent(a)},!1,Ca)},inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:39,vars:19,consts:[[1,"incubatorTraitsModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],["class","clickableText keyword",3,"ngClass","click",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","activeTrait",4,"ngIf"],[4,"ngIf"],[1,"back"],[3,"click"],[1,"filterGridContainer"],[1,"resetFiltersHeader","clickableText"],[1,"changeTrainingHeader"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTraits","selectedTrait"],[1,"clickableText","keyword",3,"ngClass","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],[1,"keyword"],[1,"activeTrait"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),x(4,pq,5,3,"div",4),x(5,gq,3,2,"div",4),x(6,vq,4,2,"span",5),D(7,"hr"),x(8,mq,2,1,"span",6),x(9,bq,2,0,"span",7),d(),h(10,"div",8)(11,"button",9),A("click",function(){return i.returnToAnimalView()}),g(12,"Back"),d()()(),D(13,"hr"),x(14,_q,10,5,"div",7),D(15,"br")(16,"br"),h(17,"div",10)(18,"div",11)(19,"span",9),A("click",function(){return i.resetFilters()}),g(20,"Reset Filters"),d()(),h(21,"div",12)(22,"span"),g(23,"Choose New Trait"),d()(),h(24,"div",13)(25,"button",14),A("click",function(){return i.toggleStatFilter("Speed")}),g(26,"SPD "),d(),h(27,"button",15),A("click",function(){return i.toggleStatFilter("Acceleration")}),g(28,"ACC "),d(),h(29,"button",16),A("click",function(){return i.toggleStatFilter("Endurance")}),g(30,"END "),d(),h(31,"button",17),A("click",function(){return i.toggleStatFilter("Power")}),g(32,"PWR "),d(),h(33,"button",18),A("click",function(){return i.toggleStatFilter("Focus")}),g(34,"FCS "),d(),h(35,"button",19),A("click",function(){return i.toggleStatFilter("Adaptability")}),g(36,"ADP"),d()()(),D(37,"br"),h(38,"app-trait-list",20),A("selectedTrait",function(a){return i.selectNewTrait(a)}),d()()()),2&e&&(p(4),m("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),m("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(1),m("ngIf",null!=i.selectedAnimal.trait),p(2),m("ngIf",null!=i.existingTrait),p(1),m("ngIf",null==i.existingTrait),p(5),m("ngIf",null!=i.existingTrait),p(11),Bt("filterActive",i.filterSpeed),p(2),Bt("filterActive",i.filterAcceleration),p(2),Bt("filterActive",i.filterEndurance),p(2),Bt("filterActive",i.filterPower),p(2),Bt("filterActive",i.filterFocus),p(2),Bt("filterActive",i.filterAdaptability),p(3),m("availableTraits",i.availableTraits))},directives:[li,cn,Qr,dd,hq],pipes:[Qa],styles:['.incubatorTraitsModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"ResetFiler changeTraitHeader statFilter"}.changeTraitHeader[_ngcontent-%COMP%]{grid-area:changeTraitHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.resetFilter[_ngcontent-%COMP%]{grid-area:resetFilter}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}']}),t})();function wq(t,n){1&t&&(h(0,"div",3)(1,"h2"),g(2,"Incubator"),d(),h(3,"div",4),g(4," Select an animal and the desired trait to begin the incubation process. While incubating, you will not be able to train the selected animal. The chosen trait will remain on the animal until a new trait is selected or the trait is removed. "),d(),D(5,"hr"),d())}function Cq(t,n){if(1&t){const e=ie();h(0,"div",7)(1,"div")(2,"app-animal-list",8),A("selectedAnimal",function(r){return k(e),_(2).selectedAnimal(r)}),d()()()}if(2&t){const e=_(2);p(2),m("availableAnimals",e.availableAnimals)("isIncubatorDetailView",!0)}}function Sq(t,n){if(1&t){const e=ie();h(0,"div",9)(1,"app-incubator-traits",10),A("returnEmitter",function(r){return k(e),_(2).returnToAnimalView(r)}),d()()}if(2&t){const e=_(2);p(1),m("selectedAnimal",e.animal)}}function Tq(t,n){if(1&t&&(h(0,"div"),x(1,Cq,3,2,"div",5),x(2,Sq,2,1,"div",6),d()),2&t){const e=_();p(1),m("ngIf",!e.animalSelected),p(1),m("ngIf",e.animalSelected)}}function Rq(t,n){1&t&&(h(0,"div"),g(1," To access the incubator, you need to improve your research level. Try participating in Duo Races. "),d())}let Dq=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.componentCommunicationService=r,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(Pt.incubator),this.availableAnimals=this.globalService.globalVar.animals.filter(i=>i.isAvailable),this.researchLevel=this.lookupService.getResearchLevel();var e=this.globalService.globalVar.incubator;null!=e.assignedAnimal&&(this.animalSelected=!0,this.animal=e.assignedAnimal)}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Ti),V(Pn))},t.\u0275cmp=Tt({type:t,selectors:[["app-incubator-view"]],decls:4,vars:3,consts:[[1,"incubatorView"],["class","info",4,"ngIf"],[4,"ngIf"],[1,"info"],[1,"description"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"selectAnimalView"],[3,"availableAnimals","isIncubatorDetailView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(h(0,"div",0),x(1,wq,6,0,"div",1),x(2,Tq,3,2,"div",2),x(3,Rq,2,0,"div",2),d()),2&e&&(p(1),m("ngIf",!i.animalSelected),p(1),m("ngIf",i.researchLevel>0),p(1),m("ngIf",0===i.researchLevel))},directives:[li,rp,yq],styles:[".incubatorView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:1rem}"]}),t})();var hd=(()=>{return(t=hd||(hd={}))[t.basics=0]="basics",t[t.progression=1]="progression",t[t.calculators=2]="calculators",hd;var t})();function xq(t,n){if(1&t){const e=ie();h(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswerBreedGuide")}),g(5,"+"),d()(),h(6,"div",9)(7,"p"),g(8,"What does Breeding do? How do I gain Breed XP?"),d()()(),h(9,"div",10),D(10,"div",7),h(11,"p"),g(12," Breeding is one of the best way to increase your animals' racing capabilities. It is a reset mechanic, meaning all of the base stats your animal has gained will be reset back to their default levels, and in return gain a permanent multiplier to your racing stats. Note that the stats your animal has prior to breeding have no impact on Breeding. "),D(13,"br")(14,"br"),g(15," Every time you Breed, you gain a 5% increase to the amount your base stats contribute to your racing stats. If you hover over your base stats (or tap if you are on mobile) when selecting an animal on the Animal page, you will see a breakdown of all multipliers you have obtained. With the Stockbreeder, you can set your animal to breed automatically without input so you can quickly raise your Breed Level in quick succession without having to spend time training in between each level. "),D(16,"br")(17,"br"),g(18," There are a few ways to increase Breed XP: "),D(19,"br"),h(20,"em"),g(21,"Completing any training:"),d(),g(22),D(23,"br"),h(24,"em"),g(25,"Successfully completing a free race:"),d(),g(26),D(27,"br"),h(28,"em"),g(29,"Successfully completing a circuit race:"),d(),g(30),D(31,"br")(32,"br"),g(33," As you progress, you'll find ways to increase the amount of XP gained. "),d()()(),D(34,"hr"),h(35,"div")(36,"div")(37,"div",7)(38,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswerBreedBarnRows")}),g(39,"+"),d()(),h(40,"div",9)(41,"p"),g(42,"I've got too many animals -- how do I unlock more barns?"),d()()(),h(43,"div",11),D(44,"div",7),h(45,"p"),g(46," Raise your circuit rank! As you progress, you'll unlock more rows of 3 barns. "),d()()(),D(47,"hr"),h(48,"div")(49,"div")(50,"div",7)(51,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswerAllAnimals")}),g(52,"+"),d()(),h(53,"div",9)(54,"p"),g(55,"What are all of the animals and course types?"),d()()(),h(56,"div",12),D(57,"div",7),h(58,"div")(59,"span",13),g(60,"Flatland"),d(),D(61,"br"),h(62,"span",14),g(63,"Horse"),d(),g(64),D(65,"br"),h(66,"span",14),g(67,"Cheetah"),d(),g(68),D(69,"br"),h(70,"span",14),g(71,"Hare"),d(),g(72),D(73,"br"),h(74,"span",14),g(75,"Warthog"),d(),g(76),D(77,"br")(78,"br"),h(79,"span",15),g(80,"Mountain"),d(),D(81,"br"),h(82,"span",14),g(83,"Monkey"),d(),g(84),D(85,"br"),h(86,"span",14),g(87,"Goat"),d(),g(88),D(89,"br"),h(90,"span",14),g(91,"Gecko"),d(),g(92),D(93,"br")(94,"br"),h(95,"div")(96,"span",16),A("click",function(){return k(e),_().viewSpoiler("Ocean Course Type")}),h(97,"span",17),g(98,"View Spoiler"),d(),h(99,"span",18),g(100,"Ocean"),d()(),D(101,"br"),h(102,"span",16),A("click",function(){return k(e),_().viewSpoiler("Ocean Course Type")}),h(103,"span",17),g(104,"View Spoiler"),d(),h(105,"span",14),g(106,"Dolphin"),d(),g(107),d(),D(108,"br"),h(109,"span",16),A("click",function(){return k(e),_().viewSpoiler("Ocean Course Type")}),h(110,"span",17),g(111,"View Spoiler"),d(),h(112,"span",14),g(113,"Shark"),d(),g(114),d(),D(115,"br"),h(116,"span",16),A("click",function(){return k(e),_().viewSpoiler("Ocean Course Type")}),h(117,"span",17),g(118,"View Spoiler"),d(),h(119,"span",14),g(120,"Octopus"),d(),g(121),d(),D(122,"br"),h(123,"span",16),A("click",function(){return k(e),_().viewSpoiler("Ocean Course Type")}),h(124,"span",17),g(125,"View Spoiler"),d(),h(126,"span",14),g(127,"Whale"),d(),g(128),d(),D(129,"br")(130,"br"),d(),h(131,"div")(132,"span",16),A("click",function(){return k(e),_().viewSpoiler("Tundra Course Type")}),h(133,"span",17),g(134,"View Spoiler"),d(),h(135,"span",18),g(136,"Tundra"),d()(),D(137,"br"),h(138,"span",16),A("click",function(){return k(e),_().viewSpoiler("Tundra Course Type")}),h(139,"span",17),g(140,"View Spoiler"),d(),D(141,"em",19),d(),D(142,"br"),h(143,"span",16),A("click",function(){return k(e),_().viewSpoiler("Tundra Course Type")}),h(144,"span",17),g(145,"View Spoiler"),d(),h(146,"span",14),g(147,"Penguin"),d(),g(148),d(),D(149,"br"),h(150,"span",16),A("click",function(){return k(e),_().viewSpoiler("Tundra Course Type")}),h(151,"span",17),g(152,"View Spoiler"),d(),h(153,"span",14),g(154,"Caribou"),d(),g(155),d(),D(156,"br")(157,"br"),d(),h(158,"div")(159,"span",16),A("click",function(){return k(e),_().viewSpoiler("Volcanic Course Type")}),h(160,"span",17),g(161,"View Spoiler"),d(),h(162,"span",18),g(163,"Volcanic"),d()(),D(164,"br"),h(165,"span",16),A("click",function(){return k(e),_().viewSpoiler("Volcanic Course Type")}),h(166,"span",17),g(167,"View Spoiler"),d(),D(168,"em",19),d(),D(169,"br"),h(170,"span",16),A("click",function(){return k(e),_().viewSpoiler("Volcanic Course Type")}),h(171,"span",17),g(172,"View Spoiler"),d(),h(173,"span",14),g(174,"Salamander"),d(),g(175),d(),D(176,"br"),h(177,"span",16),A("click",function(){return k(e),_().viewSpoiler("Volcanic Course Type")}),h(178,"span",17),g(179,"View Spoiler"),d(),h(180,"span",14),g(181,"Fox"),d(),g(182),d()()()()(),D(183,"hr"),h(184,"div")(185,"div")(186,"div",7)(187,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswerTerrain")}),g(188,"+"),d()(),h(189,"div",9)(190,"p"),g(191,"What are the different terrain options when racing?"),d()()(),h(192,"div",20),D(193,"div",7),h(194,"p"),g(195," Every race leg will have a random terrain. Each terrain may have a positive or negative effect for your racer and should be considered when thinking about which animal is going to race a particular leg. The terrain options are below: "),D(196,"br")(197,"br"),h(198,"strong"),g(199,"Sunny"),d(),D(200,"br")(201,"span",19)(202,"br"),h(203,"strong"),g(204,"Rainy"),d(),D(205,"br")(206,"span",19)(207,"br"),h(208,"strong"),g(209,"Stormy"),d(),D(210,"br")(211,"span",19)(212,"br"),h(213,"strong"),g(214,"Torrid"),d(),D(215,"br")(216,"span",19)(217,"br"),h(218,"strong"),g(219,"Maelstrom"),d(),D(220,"br")(221,"span",19)(222,"br"),h(223,"strong"),g(224,"Snowfall"),d(),D(225,"br")(226,"span",19)(227,"br"),h(228,"strong"),g(229,"Hailstorm"),d(),D(230,"br")(231,"span",19)(232,"br"),h(233,"strong"),g(234,"Ashfall"),d(),D(235,"br")(236,"span",19),d()()(),D(237,"hr"),h(238,"div")(239,"div")(240,"div",7)(241,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswerBreedKeybinds")}),g(242,"+"),d()(),h(243,"div",9)(244,"p"),g(245,"What keybinds or similar shortcuts are there?"),d()()(),h(246,"div",21),D(247,"div",7),h(248,"p"),g(249," Use the left and right arrow keys to quickly jump between barns under the 'Barns' page and between animals under the 'Animals' page. "),D(250,"br"),g(251," Use the ctrl, shift, and alt keys to add multipliers to certain items in the shop to buy them in bulk. "),d()()(),D(252,"hr"),h(253,"div")(254,"div")(255,"div",7)(256,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswerSettings")}),g(257,"+"),d()(),h(258,"div",9)(259,"p"),g(260,"What does each setting do?"),d()()(),h(261,"div",22),D(262,"div",7),h(263,"p")(264,"strong"),g(265,"Auto Skip Race Info"),d(),g(266),D(267,"br")(268,"br"),h(269,"strong"),g(270,"Finish Training Before Switching"),d(),g(271),D(272,"br")(273,"br"),h(274,"strong"),g(275,"Hide Tips"),d(),g(276),D(277,"br")(278,"br"),h(279,"strong"),g(280,"Use Numbers For Ranks"),d(),g(281),D(282,"br")(283,"br"),h(284,"strong"),g(285,"Auto Start Event Race"),d(),g(286),D(287,"br")(288,"br"),h(289,"strong"),g(290,"Race Display Info"),d(),g(291),D(292,"br")(293,"br"),h(294,"strong"),g(295,"Quick View Barn"),d(),g(296),d()()(),D(297,"hr"),h(298,"div")(299,"div")(300,"div",7)(301,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswerFeedback")}),g(302,"+"),d()(),h(303,"div",9)(304,"p"),g(305,"I'm having an issue with my game or have some feedback, how can I contact you?"),d()()(),h(306,"div",23),D(307,"div",7),h(308,"p"),g(309,"Feel free to use the links at the bottom right or email me at CulturaIdle@gmail.com to get in touch. "),d()()(),D(310,"hr"),d()}if(2&t){const e=_();p(22),q(" ",e.lookupService.getTrainingBreedGaugeIncrease(0)," XP"),p(4),q(" ",e.lookupService.getLocalBreedGaugeIncrease()," XP"),p(4),q(" ",e.lookupService.getCircuitBreedGaugeIncrease()," XP"),p(34),q(" - ",e.globalService.getAnimalDescription("Horse")," "),p(4),q(" - ",e.globalService.getAnimalDescription("Cheetah")," "),p(4),q(" - ",e.globalService.getAnimalDescription("Hare")," "),p(4),q(" - ",e.globalService.getAnimalDescription("Warthog")," "),p(8),q(" - ",e.globalService.getAnimalDescription("Monkey")," "),p(4),q(" - ",e.globalService.getAnimalDescription("Goat")," "),p(4),q(" - ",e.globalService.getAnimalDescription("Gecko")," "),p(4),m("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),m("ngClass",e.seeOceanCourseTypeSpoiler?"waterColor":""),p(3),m("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),q(" - ",e.globalService.getAnimalDescription("Dolphin"),""),p(2),m("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),q(" - ",e.globalService.getAnimalDescription("Shark"),""),p(2),m("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),q(" - ",e.globalService.getAnimalDescription("Octopus"),""),p(2),m("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),q(" - ",e.globalService.getAnimalDescription("Whale"),""),p(4),m("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),m("ngClass",e.seeTundraCourseTypeSpoiler?"tundraColor":""),p(3),m("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),m("innerHTML",e.globalService.getTundraDescription(),kt),p(2),m("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),q(" - ",e.globalService.getAnimalDescription("Penguin"),""),p(2),m("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),q(" - ",e.globalService.getAnimalDescription("Caribou"),""),p(4),m("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),m("ngClass",e.seeVolcanicCourseTypeSpoiler?"volcanicColor":""),p(3),m("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),m("innerHTML",e.globalService.getVolcanicDescription(),kt),p(2),m("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),q(" - ",e.globalService.getAnimalDescription("Salamander"),""),p(2),m("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),q(" - ",e.globalService.getAnimalDescription("Fox"),""),p(19),m("innerHTML",e.sunnyTerrainInfo,kt),p(5),m("innerHTML",e.rainyTerrainInfo,kt),p(5),m("innerHTML",e.stormyTerrainInfo,kt),p(5),m("innerHTML",e.torridTerrainInfo,kt),p(5),m("innerHTML",e.maelstromTerrainInfo,kt),p(5),m("innerHTML",e.snowfallTerrainInfo,kt),p(5),m("innerHTML",e.hailstormTerrainInfo,kt),p(5),m("innerHTML",e.ashfallTerrainInfo,kt),p(30),q(" - ",e.lookupService.getSettingDescriptions("Auto Skip Race Info")," "),p(5),q(" - ",e.lookupService.getSettingDescriptions("Finish Training Before Switching")," "),p(5),q(" - ",e.lookupService.getSettingDescriptions("Hide Tips")," "),p(5),q(" - ",e.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank")," "),p(5),q(" - ",e.lookupService.getSettingDescriptions("Auto Start Event Race")," "),p(5),q(" - ",e.lookupService.getSettingDescriptions("Race Display Info")," "),p(5),q(" - ",e.lookupService.getSettingDescriptions("Quick View Barn")," ")}}function kq(t,n){if(1&t){const e=ie();h(0,"div")(1,"div")(2,"div",7)(3,"button",8),A("click",function(){return k(e),_(2).expandAnswer("faqAnswer4")}),g(4,"+"),d()(),h(5,"div",9)(6,"p"),g(7,"What is the Incubator? How does the Incubator Upgrade item work?"),d()()(),h(8,"div",28),D(9,"div",7),h(10,"p"),g(11,"Once you've successfully completed a Duo Race, you will have access to the Incubator. The Incubator lets you select a trait for an individual animal that lets your customize your stats further. A trait increases one stat and decreases another. As you increase your Research Level by completing Duo Races, you will unlock new traits and increase the amount the traits increase/decrease your stats. Note that traits will only decrease the chosen stat by a maximum of 25%. "),D(12,"br")(13,"br"),g(14," The Incubator Upgrade item gives you even further control over how you build your animals and allows newer animals to quickly catch up to ones of higher breed level. After purchasing this item, every time you breed you will gain a permanent increase to the stat your trait currently is providing you. The increase amount depends on your current Research Level. For example: "),D(15,"br")(16,"br"),g(17," If you have a Research Level of 15 and apply the "),h(18,"span",14),g(19,"Alert"),d(),g(20," trait to your Horse, it will gain 15% "),h(21,"span",14),g(22,"Focus"),d(),g(23," and lose 15% "),h(24,"span",14),g(25,"Endurance"),d(),g(26," through the trait itself. "),D(27,"br"),h(28,"em"),g(29,"If you have Incubator Upgrade Level 1:"),d(),g(30," each time you Breed your Horse, it will gain an additional modifier of .01 to its "),h(31,"span",14),g(32,"Focus"),d(),g(33," stat. 10% of the positive trait value of 15% would come out to .015. Incubator Upgrade Level 1 only allows for the first 10% of your trait value to contribute to the modifier, so you would gain .01. "),D(34,"br"),h(35,"em"),g(36,"If you have Incubator Upgrade Level 2:"),d(),g(37," each time you Breed your Horse, it will gain an additional modifier of .015 to its "),h(38,"span",14),g(39,"Focus"),d(),g(40," stat. 10% of the positive trait value of 15% would come to .015. Incubator Upgrade Level 2 allows for the first 25% of your trait value to contribute to the modifier. Because your trait value is only 15%, it will contribute in its entirety. "),d()(),D(41,"hr"),d()}}function Mq(t,n){if(1&t){const e=ie();h(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswerOverwhelmed")}),g(5,"+"),d()(),h(6,"div",9)(7,"p"),g(8,"I'm overwhelmed -- what am I supposed to be doing? What are all of the different races? "),d()()(),h(9,"div",24),D(10,"div",7),h(11,"p"),g(12,"That's okay! There is a lot of information that comes at you at first. The first thing to understand is that this game has two basic loops at its core: Training/Racing cycles and Breeding cycles. At the beginning, you simply want to make sure your animals are training in a balanced way. Make sure to pay attention to what each animal's diminishing returns value is (20 by default), because after you train a base stat to that point then any further training of that stat becomes progressively weaker. You can keep up with your animal's stats and Diminishing Returns value by viewing any particular animal after clicking 'Animals' in the navigation menu. With that in mind, once you've got at least one animal of each available course type with stats close to their Diminishing Returns value, you're ready to race. When you click on the 'Races' section of the navigation menu, there are a few subsections at the top. Here is what they mean: "),D(13,"br")(14,"br"),h(15,"strong"),g(16,"Circuit Races:"),d(),g(17," Raising your circuit rank as high as possible is your ultimate aim, and completing Circuit Races is the only way to do so. You'll unlock new animals, races, items, and upgrades by doing this. On this page, you also have access to free races which are easier races that provide a smaller amount of coin. Free race difficulty scales with your circuit rank, so if you plan to play a more active playstyle then you may benefit from not speeding through circuit ranks too quickly as you may have trouble completing free races. If you are okay with a more idle play style though, then you can simply complete Circuit Races as you are able to. "),D(18,"br"),h(19,"strong"),g(20,"Special Races:"),d(),g(21," These races types are unlocked as you increase your circuit rank. They work just like Circuit Races in that you have to complete each rank's races before you increase your rank, but they each reward something unique. For example, the Mono Races you unlock at circuit rank 2 increase your animal's Diminishing Returns value. Your rank at any particular Special Race cannot exceed your circuit rank, so as you increase your circuit rank make sure to check back and complete your Special Races as you are able to. "),D(22,"br"),h(23,"strong"),g(24,"Event Races:"),d(),g(25," After reaching circuit rank 13, you have access to the Grand Prix. The Grand Prix is a multi day race that runs in the background where you can easily swap in and out different racers. This race may be difficult for those who are just starting and you are safe to ignore it until you have a handle on everything else. "),D(26,"br"),h(27,"strong"),g(28,"Training Track"),d(),g(29,": At the training track, each animal has the opportunity to race against a number of competitors to gain some Coins and some unique rewards. You'll likely need to raise your breed levels a bit before seeing success here, but do check in after you've played a little while and give it a shot. "),D(30,"br")(31,"br"),g(32," Once you've trained your animals up to their Diminishing Returns value, you've completed Special Races to increase your Diminishing Returns value, and you've pushed your Circuit Rank as high as you can go, that's when you will want to start breeding your animals. There are other FAQ sections dedicated to Breeding so check those out for more information. After Breeding for awhile, you'll go back to training and racing. Cycling between these two flows is key to success in Cultura. Once you start unlocking multiple animals per course type, you can have one set breeding while the others train and race to cut down on wait time. "),d()()(),D(33,"hr"),h(34,"div")(35,"div")(36,"div",7)(37,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswer1")}),g(38,"+"),d()(),h(39,"div",9)(40,"p"),g(41,"I'm stuck early on, how should I progress?"),d()()(),h(42,"div",25),D(43,"div",7),h(44,"p"),g(45,"In the early game, your biggest obstacles will be coins and breed level. Using the Stockbreeder to Auto Breed your animals can give them a big boost in stats. "),h(46,"em"),g(47,"Note that you should typically wait to Breed until you've gotten as far as you can in circuit races as Breeding will reset your base stats to their defaults and require you to train them back up again. "),d(),D(48,"br")(49,"br"),g(50," If you are having a hard time collecting coins, look into buying the Money Mark and Team Managers from the Shop and upgrading your barns to Attractions to build passive income. The Money Mark will add a new competitor to your races (gold colored as opposed to black) that will run 25% faster than the average speed. If you finish the race first, your coin gain will increase by 25%."),D(51,"br"),g(52," Team Managers will automatically run free races for you every reset period, making sure you're getting as much value as possible from free races. "),D(53,"br"),g(54," Attractions require reaching barn level 10 and will take a little longer than buying the Money Mark and Team Manager, but it will provide passive income as long as there is an animal training in the barn. "),D(55,"br")(56,"br"),g(57," Some early game goals to set for yourself are to complete the Novice level training track, buy enough barns to train at least 1 animal of each course type available to you, raise your circuit rank, and make sure you raise your mono rank to match your circuit rank. "),d()()(),D(58,"hr"),h(59,"div")(60,"div")(61,"div",7)(62,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswer2")}),g(63,"+"),d()(),h(64,"div",9)(65,"p"),g(66,"What do team managers do and how do I set auto race?"),d()()(),h(67,"div",26),D(68,"div",7),h(69,"p"),g(70,'After buying a Team Manager from the shop, you\'ll have the ability to set a deck as your "Auto Run Free Race" deck. Once selected, this deck will immediately run free races as soon as the time period resets creating a steady stream of income (assuming you win, of course!). '),D(71,"br")(72,"br"),g(73,' To set a deck as your "Auto Run Free Race" deck, select \'Decks\' on the right and then select the button that says "Auto Run Free Race" by the deck you want to select. Note that this option will not be available until you buy a Team Manager. '),d()()(),D(74,"hr"),h(75,"div")(76,"div")(77,"div",7)(78,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswer3")}),g(79,"+"),d()(),h(80,"div",9)(81,"p"),g(82,"What does upgrading a barn do and how do I specialize my barn?"),d()()(),h(83,"div",27),D(84,"div",7),h(85,"p"),g(86,"After reaching a certain circuit rank, you will gain the ability to upgrade your barns. Every level you upgrade, you gain a multiplier for a particular stat when training. Hovering over your barn level when selecting a barn will show you your current multipliers. Increasing your barn level can be a great way to get you back in the race after breeding. "),D(87,"br")(88,"br"),g(89," At barn level 10, you will instead have the option to specialize. Subsequently, every 10 levels will improve your specialization instead of giving a stat multiplier. The current specialization options are below."),D(90,"br")(91,"br"),h(92,"strong"),g(93),d(),D(94,"br"),h(95,"strong",16),A("click",function(){return k(e),_().viewSpoiler("Item Set 2")}),h(96,"span",17),g(97,"View Spoiler"),d(),g(98),d(),D(99,"br")(100,"br"),h(101,"strong"),g(102),d(),D(103,"br"),h(104,"strong",16),A("click",function(){return k(e),_().viewSpoiler("Item Set 2")}),h(105,"span",17),g(106,"View Spoiler"),d(),g(107),d(),D(108,"br")(109,"br"),h(110,"strong",16),A("click",function(){return k(e),_().viewSpoiler("Attraction Specialization")}),h(111,"span",17),g(112,"View Spoiler"),d(),g(113),d(),D(114,"br"),h(115,"strong",16),A("click",function(){return k(e),_().viewSpoiler("Item Set 2")}),h(116,"span",17),g(117,"View Spoiler"),d(),g(118),d(),D(119,"br")(120,"br"),h(121,"strong",16),A("click",function(){return k(e),_().viewSpoiler("Research Center Specialization")}),h(122,"span",17),g(123,"View Spoiler"),d(),g(124),d(),D(125,"br"),h(126,"strong",16),A("click",function(){return k(e),_().viewSpoiler("Research Center Specialization")}),h(127,"span",17),g(128,"View Spoiler"),d(),g(129),d()()()(),D(130,"hr"),x(131,kq,42,0,"div",6),d()}if(2&t){const e=_();p(93),q("Training Facility - ",e.lookupService.getInDepthSpecializationDescription("Training Facility"),""),p(2),m("ngClass",e.seeItemSet2Spoiler?"viewSpoiler":"spoilerText"),p(3),q(" Training Facility Improvements - ",e.lookupService.getSpecialtyItemDescription("Training Facility Improvements"),""),p(4),q("Breeding Grounds - ",e.lookupService.getInDepthSpecializationDescription("Breeding Grounds"),""),p(2),m("ngClass",e.seeItemSet2Spoiler?"viewSpoiler":"spoilerText"),p(3),q(" Breeding Grounds Improvements - ",e.lookupService.getSpecialtyItemDescription("Breeding Grounds Improvements"),""),p(3),m("ngClass",e.seeAttractionSpoiler?"viewSpoiler":"spoilerText"),p(3),q(" Attraction - ",e.lookupService.getInDepthSpecializationDescription("Attraction"),""),p(2),m("ngClass",e.seeItemSet2Spoiler?"viewSpoiler":"spoilerText"),p(3),q(" Attraction Improvements - ",e.lookupService.getSpecialtyItemDescription("Attraction Improvements"),""),p(3),m("ngClass",e.seeResearchCenterSpoiler?"viewSpoiler":"spoilerText"),p(3),q("Research Center - ",e.lookupService.getInDepthSpecializationDescription("Research Center"),""),p(2),m("ngClass",e.seeResearchCenterSpoiler?"viewSpoiler":"spoilerText"),p(3),q(" Research Center Improvements - ",e.lookupService.getSpecialtyItemDescription("Research Center Improvements"),""),p(2),m("ngIf",e.lookupService.isItemUnlocked("duoRace"))}}function Aq(t,n){if(1&t&&(h(0,"span",14),g(1),d()),2&t){const e=_(2);p(1),q("",e.renownCoinGain,"% Additional Coins")}}function Pq(t,n){if(1&t&&(h(0,"span",14),g(1),d()),2&t){const e=_(2);p(1),q("",e.renownCoinGain.toFixed(2),"% Additional Coins")}}function Vq(t,n){if(1&t&&(h(0,"option",52),g(1),d()),2&t){const e=n.$implicit;m("value",e.type),p(1),q(" ",e.name,"")}}function Iq(t,n){1&t&&(h(0,"option",52),g(1,"Attraction"),d()),2&t&&m("value",3)}function Oq(t,n){1&t&&(h(0,"option",52),g(1,"Research Center"),d()),2&t&&m("value",4)}function Eq(t,n){if(1&t){const e=ie();h(0,"div"),D(1,"br"),h(2,"label",58),g(3,"Barn improvements unlocked?"),d(),h(4,"input",59),A("input",function(){return k(e),_(2).toggleHasImprovements()}),d()()}if(2&t){const e=_(2);p(4),m("checked",e.hasBarnImprovements)}}function Nq(t,n){if(1&t){const e=ie();h(0,"div")(1,"div")(2,"div",7)(3,"button",8),A("click",function(){return k(e),_(2).expandAnswer("faqAnswerIncubatorGrowthCalculator")}),g(4,"+"),d()(),h(5,"div",9)(6,"p"),g(7,"Modifier gain from Incubator Upgrade"),d()()(),h(8,"div",60),D(9,"div",7),h(10,"div",48)(11,"div")(12,"em"),g(13,"Enter a Facility Level and an Incubator Upgrade Level between 1 and 4 to see what the modifier would be on the stat corresponding to the positive trait. This pulls from your current resources by default."),d()(),D(14,"br")(15,"br"),h(16,"div",30)(17,"div",49)(18,"label",61),g(19,"Incubator Upgrade Level:"),d(),h(20,"input",62),A("ngModelChange",function(r){return k(e),_(2).incubatorUpgradeLevel=r}),d(),D(21,"br"),h(22,"label",63),g(23,"Facility Level:"),d(),h(24,"input",64),A("ngModelChange",function(r){return k(e),_(2).facilityLevel=r}),d()(),h(25,"div",34)(26,"span"),g(27,"Result:"),d(),D(28,"br"),h(29,"em")(30,"span",36),g(31),d(),g(32," * .001 with Incubator Upgrade Level "),h(33,"span",65),g(34),d()(),g(35," = "),h(36,"span",14),g(37),d()()()()(),D(38,"hr"),d()}if(2&t){const e=_(2);p(20),m("ngModel",e.incubatorUpgradeLevel),p(4),m("ngModel",e.facilityLevel),p(7),rt(e.facilityLevel),p(3),rt(e.incubatorUpgradeLevel),p(3),q("*",e.incubatorModifierAmount," to Positive Trait Stat per Breed Level")}}function Bq(t,n){if(1&t&&(h(0,"option",52),g(1),d()),2&t){const e=n.$implicit;m("value",e.type),p(1),q(" ",e.name,"")}}function Fq(t,n){if(1&t){const e=ie();h(0,"div"),D(1,"br"),h(2,"label",69),g(3,"Orb Infuser purchased?"),d(),h(4,"input",59),A("input",function(){return k(e),_(3).toggleHasOrbInfuser()}),d()()}if(2&t){const e=_(3);p(4),m("checked",e.hasOrbInfuser)}}function Lq(t,n){if(1&t&&(h(0,"div")(1,"em")(2,"span",14),g(3),d(),g(4," / 1500"),d(),g(5," = "),h(6,"span",14),g(7),d()()),2&t){const e=_(3);p(3),rt(e.notgBreedLevel),p(4),q("",e.notgOrbInfuserGain,"% added to Orb Stat Bonus % per Orb Level")}}const op=function(t){return{inactiveCalculation:t}};function Uq(t,n){if(1&t){const e=ie();h(0,"div")(1,"div")(2,"div",7)(3,"button",8),A("click",function(){return k(e),_(2).expandAnswer("faqAnswerNectarOfTheGodsCalculator")}),g(4,"+"),d()(),h(5,"div",9)(6,"p"),g(7,"Nectar of the Gods Reset Gain"),d()()(),h(8,"div",66),D(9,"div",7),h(10,"div")(11,"em"),g(12,"Select an animal or enter your own values to see how much your Breed Modifier will increase. Selecting an animal pulls from their current breed level."),d()(),D(13,"br")(14,"br"),h(15,"div",30)(16,"div",31)(17,"div",39)(18,"label",40),g(19,"Animal:"),d(),h(20,"select",41),A("ngModelChange",function(r){return k(e),_(2).notgSelectedAnimalType=r})("change",function(){return k(e),_(2).newNotgAnimalSelected()}),x(21,Bq,2,2,"option",42),d()(),h(22,"em"),g(23,"or"),d(),h(24,"div")(25,"label",67),g(26,"Breed Level:"),d(),h(27,"input",68),A("change",function(){return k(e),_(2).notgAnimalNotSelected()})("ngModelChange",function(r){return k(e),_(2).notgBreedLevel=r}),d()(),x(28,Fq,5,1,"div",6),d(),h(29,"div",34)(30,"span"),g(31,"Result:"),d(),D(32,"br"),h(33,"div",35)(34,"em"),g(35,"If Breed Level <= 1500: "),d(),h(36,"em")(37,"span",14),g(38),d(),g(39," / 100"),d(),g(40," = "),h(41,"span",14),g(42),d()(),h(43,"div",35)(44,"em"),g(45,"If Breed Level > 1500: "),d(),h(46,"em"),g(47,"5 * (log(.005 * "),h(48,"span",14),g(49),d(),g(50," + 1)) + 15"),d(),g(51," = "),h(52,"span",14),g(53),d()(),D(54,"br"),x(55,Lq,8,2,"div",6),d()()(),D(56,"hr"),d()}if(2&t){const e=_(2);p(20),m("ngModel",e.notgSelectedAnimalType),p(1),m("ngForOf",e.availableAnimals),p(6),m("ngModel",e.notgBreedLevel),p(1),m("ngIf",e.seePinnacleSpoiler),p(5),m("ngClass",yt(11,op,e.notgBreedLevel>1500)),p(5),rt(e.notgBreedLevel),p(4),q("",e.notgBreedModifierGain,"% added to Breed Modifier per Breed Level multiplier"),p(1),m("ngClass",yt(13,op,e.notgBreedLevel<=1500)),p(6),rt(e.notgBreedLevel),p(4),q("",e.notgBreedModifierGain,"% added to Breed Modifier per Breed Level multiplier"),p(2),m("ngIf",e.hasOrbInfuser)}}function Hq(t,n){if(1&t){const e=ie();h(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswerRenownCalculator")}),g(5,"+"),d()(),h(6,"div",9)(7,"p"),g(8,"Coin gain from Renown"),d()()(),h(9,"div",29),D(10,"div",7),h(11,"div")(12,"em"),g(13,"Enter a Renown amount to see what the modifier would be on Coins won from races."),d()(),D(14,"br")(15,"br"),h(16,"div",30)(17,"div",31)(18,"label",32),g(19,"Renown:"),d(),h(20,"input",33),A("ngModelChange",function(r){return k(e),_().coinGainRenownAmount=r}),d()(),h(21,"div",34)(22,"span"),g(23,"Result:"),d(),h(24,"div",35)(25,"em"),g(26,"If Renown <= 50: "),h(27,"span",36),g(28),d()(),g(29," = "),x(30,Aq,2,1,"span",37),d(),D(31,"br"),h(32,"div",35)(33,"em"),g(34,"If Renown > 50: 500 * log(.0035 * - ("),h(35,"span",36),g(36),d(),g(37," - 50) + 1) + 50 "),d(),g(38," = "),x(39,Pq,2,1,"span",37),d()()()()(),D(40,"hr"),h(41,"div")(42,"div")(43,"div",7)(44,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswerTrainingBreedXpCalculator")}),g(45,"+"),d()(),h(46,"div",9)(47,"p"),g(48,"Breed XP gain from Training"),d()()(),h(49,"div",38),D(50,"div",7),h(51,"div")(52,"em"),g(53,"Select an animal or enter your own values to see how much Breed XP you would gain from completing a single training. Selecting an animal pulls from their current bonuses."),d()(),D(54,"br")(55,"br"),h(56,"div",30)(57,"div",31)(58,"div",39)(59,"label",40),g(60,"Animal:"),d(),h(61,"select",41),A("ngModelChange",function(r){return k(e),_().selectedAnimalType=r})("change",function(){return k(e),_().newAnimalSelected()}),x(62,Vq,2,2,"option",42),d()(),h(63,"em"),g(64,"or"),d(),h(65,"div")(66,"label",43),g(67,"Bonus Training Breed XP:"),d(),h(68,"input",44),A("change",function(){return k(e),_().animalNotSelected()})("ngModelChange",function(r){return k(e),_().bonusBreedXp=r}),d(),D(69,"br"),h(70,"label",45),g(71,"Breeding Grounds Specialization Level:"),d(),h(72,"input",46),A("ngModelChange",function(r){return k(e),_().breedingGroundsSpecializationLevel=r}),d()()(),h(73,"div",34)(74,"span"),g(75,"Result:"),d(),D(76,"br"),h(77,"em"),g(78,"(5 + "),h(79,"span",14),g(80),d(),g(81,") * (1 + "),h(82,"span",14),g(83),d(),g(84," * .1) "),d(),g(85," = "),h(86,"span",14),g(87),d()()()()(),D(88,"hr"),h(89,"div")(90,"div")(91,"div",7)(92,"button",8),A("click",function(){return k(e),_().expandAnswer("faqAnswerBarnSpecializationGainCalculator")}),g(93,"+"),d()(),h(94,"div",9)(95,"p"),g(96,"Barn Specialization Calculator"),d()()(),h(97,"div",47),D(98,"div",7),h(99,"div",48)(100,"div")(101,"em"),g(102,"Select a Specialization Type and enter the Barn Upgrade Level or Specialization Level to see what impact that specialization would have. Specialization Level corresponds Barn Upgrade Level * 10 because your specialization improves every 10 barn upgrade levels."),d()(),D(103,"br")(104,"br"),h(105,"div",30)(106,"div",49)(107,"label",50),g(108,"Specialization:"),d(),h(109,"select",51),A("ngModelChange",function(r){return k(e),_().selectedSpecialization=r})("change",function(){return k(e),_().checkForImprovements()}),h(110,"option",52),g(111,"Breeding Grounds"),d(),h(112,"option",52),g(113,"Training Facility"),d(),x(114,Iq,2,1,"option",53),x(115,Oq,2,1,"option",53),d(),x(116,Eq,5,1,"div",6),D(117,"br")(118,"br"),h(119,"div")(120,"label",54),g(121,"Barn Upgrade Level:"),d(),h(122,"input",55),A("change",function(){return k(e),_().changeBarnUpgradeLevel()})("ngModelChange",function(r){return k(e),_().barnUpgradeLevel=r}),d(),D(123,"br"),h(124,"em"),g(125,"or"),d(),D(126,"br"),h(127,"label",56),g(128,"Barn Specialization Level:"),d(),h(129,"input",57),A("change",function(){return k(e),_().changeBarnSpecializationLevel()})("ngModelChange",function(r){return k(e),_().barnSpecializationLevel=r}),d()()(),h(130,"div",34)(131,"span"),g(132,"Result:"),d(),D(133,"br")(134,"span",19),d()()()()(),D(135,"hr"),x(136,Nq,39,5,"div",6),x(137,Uq,57,15,"div",6),d()}if(2&t){const e=_();p(20),m("ngModel",e.coinGainRenownAmount),p(4),m("ngClass",yt(25,op,e.coinGainRenownAmount>50)),p(4),rt(e.coinGainRenownAmount),p(2),m("ngIf",e.coinGainRenownAmount<=50),p(2),m("ngClass",yt(27,op,e.coinGainRenownAmount<=50)),p(4),rt(e.coinGainRenownAmount),p(3),m("ngIf",e.coinGainRenownAmount>50),p(22),m("ngModel",e.selectedAnimalType),p(1),m("ngForOf",e.availableAnimals),p(6),m("ngModel",e.bonusBreedXp),p(4),m("ngModel",e.breedingGroundsSpecializationLevel),p(8),rt(e.bonusBreedXp),p(3),rt(e.breedingGroundsSpecializationLevel),p(4),q("",e.trainingBreedXpGain," XP gained after completing any Training"),p(22),m("ngModel",e.selectedSpecialization),p(1),m("value",1),p(2),m("value",2),p(2),m("ngIf",e.seeAttractionSpoiler),p(1),m("ngIf",e.seeResearchCenterSpoiler),p(1),m("ngIf",e.seeItemSet2Spoiler),p(6),m("ngModel",e.barnUpgradeLevel),p(7),m("ngModel",e.barnSpecializationLevel),p(5),m("innerHTML",e.barnSpecializationLevelAmount,kt),p(2),m("ngIf",e.lookupService.isItemUnlocked("duoRace")),p(1),m("ngIf",e.legacyTrackAvailable)}}let Gq=(()=>{class t{constructor(e,i,r,a,o,s){this.componentCommunicationService=e,this.lookupService=i,this.gameLoopService=r,this.globalService=a,this.specializationService=o,this.utilityService=s,this.seeAttractionSpoiler=!1,this.seeResearchCenterSpoiler=!1,this.seeOceanCourseTypeSpoiler=!1,this.seeTundraCourseTypeSpoiler=!1,this.seeVolcanicCourseTypeSpoiler=!1,this.seeItemSet2Spoiler=!1,this.seePinnacleSpoiler=!1,this.currentSection=hd.basics,this.faqSectionsEnum=hd,this.sunnyTerrainInfo="",this.stormyTerrainInfo="",this.rainyTerrainInfo="",this.snowfallTerrainInfo="",this.ashfallTerrainInfo="",this.maelstromTerrainInfo="",this.hailstormTerrainInfo="",this.torridTerrainInfo="",this.legacyTrackAvailable=!1,this.coinGainRenownAmount=0,this.facilityLevel=0,this.incubatorUpgradeLevel=0,this.selectedAnimalType=0,this.animalSelected=!0,this.availableAnimals=[],this.bonusBreedXp=0,this.breedingGroundsSpecializationLevel=0,this.selectedSpecialization=1,this.barnUpgradeLevel=0,this.barnSpecializationLevel=0,this.hasBarnImprovements=!1,this.renownCoinGain=0,this.incubatorModifierAmount=0,this.trainingBreedXpGain=0,this.barnSpecializationLevelAmount="",this.notgSelectedAnimalType=0,this.notgAnimalSelected=!0,this.hasOrbInfuser=!1}ngOnInit(){var i,r,a,e=this;this.componentCommunicationService.setNewView(Pt.faqs),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=27&&(this.seeItemSet2Spoiler=!0),this.lookupService.isItemUnlocked("attractionSpecialization")&&(this.seeAttractionSpoiler=!0),this.lookupService.isItemUnlocked("researchCenterSpecialization")&&(this.seeResearchCenterSpoiler=!0),(null===(i=this.globalService.globalVar.animals.find(u=>u.type===L.Dolphin))||void 0===i?void 0:i.isAvailable)&&(this.seeOceanCourseTypeSpoiler=!0),(null===(r=this.globalService.globalVar.animals.find(u=>u.type===L.Penguin))||void 0===r?void 0:r.isAvailable)&&(this.seeTundraCourseTypeSpoiler=!0),(null===(a=this.globalService.globalVar.animals.find(u=>u.type===L.Salamander))||void 0===a?void 0:a.isAvailable)&&(this.seeVolcanicCourseTypeSpoiler=!0),this.lookupService.isItemUnlocked("thePinnacle")&&(this.seePinnacleSpoiler=!0),this.sunnyTerrainInfo=this.lookupService.getTerrainPopoverText(new un(Qe.Sunny)),this.stormyTerrainInfo=this.lookupService.getTerrainPopoverText(new un(Qe.Stormy)),this.rainyTerrainInfo=this.lookupService.getTerrainPopoverText(new un(Qe.Rainy)),this.torridTerrainInfo=this.lookupService.getTerrainPopoverText(new un(Qe.Torrid)),this.maelstromTerrainInfo=this.lookupService.getTerrainPopoverText(new un(Qe.Maelstrom)),this.hailstormTerrainInfo=this.lookupService.getTerrainPopoverText(new un(Qe.Hailstorm)),this.ashfallTerrainInfo=this.lookupService.getTerrainPopoverText(new un(Qe.Ashfall)),this.snowfallTerrainInfo=this.lookupService.getTerrainPopoverText(new un(Qe.Snowfall)),this.availableAnimals=this.globalService.globalVar.animals.filter(u=>u.isAvailable),this.coinGainRenownAmount=this.lookupService.getRenown(),this.facilityLevel=this.lookupService.getFacilityLevel();var o=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv1"===u.name),s=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv2"===u.name),l=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv3"===u.name),c=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv4"===u.name);null!=o&&(this.incubatorUpgradeLevel=1),null!=s&&(this.incubatorUpgradeLevel=2),null!=l&&(this.incubatorUpgradeLevel=3),null!=c&&(this.incubatorUpgradeLevel=4),this.globalService.globalVar.animals.forEach(u=>{u.allTrainingTracks.legacyTrackAvailable&&(this.legacyTrackAvailable=!0)}),this.newAnimalSelected(),this.newNotgAnimalSelected(),this.calculatorSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Br(function*(){e.handleRenownModifierCalculation(),e.handleIncubatorModifierCalculation(),e.handleTrainingBreedXpGainCalculation(),e.handleBarnSpecializationLevelAmountCalculation(),e.handleNectarOfTheGodsCalculation()}))}handleRenownModifierCalculation(){null!=this.coinGainRenownAmount&&(this.renownCoinGain=this.lookupService.getRenownCoinModifier(this.coinGainRenownAmount,!0))}handleIncubatorModifierCalculation(){if(null!=this.incubatorUpgradeLevel&&null!=this.facilityLevel){var r=0,e=.001,i=this.globalService.globalVar.modifiers.find(a=>"incubatorUpgradeIncreaseModifier"===a.text);null!=i&&(e=i.value),r=this.facilityLevel*e,isNaN(this.incubatorUpgradeLevel)||(this.incubatorUpgradeLevel=+this.incubatorUpgradeLevel),this.incubatorUpgradeLevel>=4?(r>.1&&(r=.1),this.incubatorUpgradeLevel=4):3===this.incubatorUpgradeLevel?r>.05&&(r=.05):2===this.incubatorUpgradeLevel?r>.025&&(r=.025):1===this.incubatorUpgradeLevel?r>.01&&(r=.01):this.incubatorUpgradeLevel<=0&&(r=0),this.incubatorModifierAmount=Math.round(1e3*r)/1e3}}handleTrainingBreedXpGainCalculation(){var e=new At;e.miscStats.bonusBreedXpGainFromTraining=this.bonusBreedXp,this.trainingBreedXpGain=this.lookupService.getTrainingBreedGaugeIncrease(this.breedingGroundsSpecializationLevel,e)}handleNectarOfTheGodsCalculation(){var e=100;if(this.notgAnimalSelected){var i=void 0;null!=this.notgSelectedAnimalType&&void 0!==(i=this.globalService.globalVar.animals.find(a=>a.getAnimalType()===L[this.notgSelectedAnimalType]))&&(this.notgBreedModifierGain=Math.round(100*this.globalService.getNectarOfTheGodsIncrease(i)*e)/e,this.notgOrbInfuserGain=this.globalService.getNectarOfTheGodsOrbInfusionIncrease(i))}else{var r=new At;this.notgBreedModifierGain=Math.round(100*this.globalService.getNectarOfTheGodsIncrease(r,this.notgBreedLevel)*e)/e,this.notgOrbInfuserGain=this.globalService.getNectarOfTheGodsOrbInfusionIncrease(r,this.notgBreedLevel)}}newAnimalSelected(){this.animalSelected=!0;var e=void 0;if(null!=this.selectedAnimalType&&void 0!==(e=this.globalService.globalVar.animals.find(r=>r.getAnimalType()===L[this.selectedAnimalType]))){if(this.bonusBreedXp=e.miscStats.bonusBreedXpGainFromTraining,e.associatedBarnNumber>=0)var i=this.globalService.globalVar.barns.find(r=>r.barnNumber===(null==e?void 0:e.associatedBarnNumber));void 0!==i&&i.barnUpgrades.specialization===$t.BreedingGrounds&&(this.breedingGroundsSpecializationLevel=i.barnUpgrades.specializationLevel)}}newNotgAnimalSelected(){console.log("Animal selected"),this.notgAnimalSelected=!0;var e=void 0;null!=this.notgSelectedAnimalType&&void 0!==(e=this.globalService.globalVar.animals.find(i=>i.getAnimalType()===L[this.notgSelectedAnimalType]))&&(this.notgBreedLevel=e.breedLevel)}animalNotSelected(){this.animalSelected=!1}notgAnimalNotSelected(){this.notgAnimalSelected=!1}handleBarnSpecializationLevelAmountCalculation(){1==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText($t.BreedingGrounds,this.barnSpecializationLevel,this.hasBarnImprovements):2==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText($t.TrainingFacility,this.barnSpecializationLevel,this.hasBarnImprovements):3==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText($t.Attraction,this.barnSpecializationLevel,this.hasBarnImprovements):4==+this.selectedSpecialization&&(this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText($t.ResearchCenter,this.barnSpecializationLevel,this.hasBarnImprovements))}checkForImprovements(){var e=!1;1==+this.selectedSpecialization?e=this.globalService.globalVar.resources.some(i=>"Breeding Grounds Improvements"===i.name):2==+this.selectedSpecialization?e=this.globalService.globalVar.resources.some(i=>"Training Facility Improvements"===i.name):3==+this.selectedSpecialization?e=this.globalService.globalVar.resources.some(i=>"Attraction Improvements"===i.name):4==+this.selectedSpecialization&&(e=this.globalService.globalVar.resources.some(i=>"Research Center Improvements"===i.name)),this.hasBarnImprovements=e}changeBarnUpgradeLevel(){this.barnSpecializationLevel=Math.floor(this.barnUpgradeLevel/10)}changeBarnSpecializationLevel(){this.barnUpgradeLevel=10*this.barnSpecializationLevel}viewSpoiler(e){"Attraction Specialization"===e&&(this.seeAttractionSpoiler=!0),"Research Center Specialization"===e&&(this.seeResearchCenterSpoiler=!0),"Ocean Course Type"===e&&(this.seeOceanCourseTypeSpoiler=!0),"Tundra Course Type"===e&&(this.seeTundraCourseTypeSpoiler=!0),"Volcanic Course Type"===e&&(this.seeVolcanicCourseTypeSpoiler=!0),"Item Set 2"===e&&(this.seeItemSet2Spoiler=!0)}expandAnswer(e){var i=document.getElementById(e);null!=i&&i.classList.toggle("hide")}toggleHasImprovements(){this.hasBarnImprovements=!this.hasBarnImprovements}toggleHasOrbInfuser(){this.hasOrbInfuser=!this.hasOrbInfuser}changeSection(e){this.currentSection=e}ngOnDestroy(){null!=this.calculatorSubscription&&this.calculatorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(V(Pn),V(Ti),V(An),V(It),V(R0),V(Rn))},t.\u0275cmp=Tt({type:t,selectors:[["app-faq-view"]],decls:21,vars:6,consts:[[1,"faqView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"subsections","s4Heading"],[1,"subsectionOption","buttonAsText",3,"ngClass","click"],[4,"ngIf"],[1,"expanderMargin"],["type","button","aria-label","Expand",3,"click"],[1,"faqQuestion"],["id","faqAnswerBreedGuide",1,"faqAnswer","hide"],["id","faqAnswerBreedBarnRows",1,"faqAnswer","hide"],["id","faqAnswerAllAnimals",1,"faqAnswer","hide"],[1,"flatlandColor","keyword"],[1,"keyword"],[1,"mountainColor","keyword"],[3,"ngClass","click"],[1,"hidden"],[1,"keyword",3,"ngClass"],[3,"innerHTML"],["id","faqAnswerTerrain",1,"faqAnswer","hide"],["id","faqAnswerBreedKeybinds",1,"faqAnswer","hide"],["id","faqAnswerSettings",1,"faqAnswer","hide"],["id","faqAnswerFeedback",1,"faqAnswer","hide"],["id","faqAnswerOverwhelmed",1,"faqAnswer","hide"],["id","faqAnswer1",1,"faqAnswer","hide"],["id","faqAnswer2",1,"faqAnswer","hide"],["id","faqAnswer3",1,"faqAnswer","hide"],["id","faqAnswer4",1,"faqAnswer","hide"],["id","faqAnswerRenownCalculator",1,"faqAnswer","hide"],[1,"inputsAndResult"],[1,"mb-3","inputs"],["for","renown-amount",1,"shortLabelMargin","progressionKeyword"],["id","renown-amount","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"result"],[3,"ngClass"],[1,"progressionKeyword"],["class","keyword",4,"ngIf"],["id","faqAnswerTrainingBreedXpCalculator",1,"faqAnswer","hide"],[1,"dropdownSelection"],["for","breed-xp-animal",1,"keyword"],["name","breed-xp-animal","id","breed-xp-animal",1,"spaced",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","bonus-breed-xp",1,"longLabelMargin","keyword"],["id","bonus-breed-xp","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","breeding-grounds-spec-level",1,"longLabelMargin","keyword"],["id","breeding-grounds-spec-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["id","faqAnswerBarnSpecializationGainCalculator",1,"faqAnswer","hide"],[1,"mb-3"],[1,"inputs"],["for","specialization-options",1,"keyword"],["name","specialization-options","id","specialization-options",1,"spaced",3,"ngModel","ngModelChange","change"],[3,"value"],[3,"value",4,"ngIf"],["for","barn-upgrade-level",1,"labelMargin","keyword"],["id","barn-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","barn-specialization-level",1,"labelMargin","keyword"],["id","barn-specialization-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","hasImprovements",1,"labelMargin","keyword"],["type","checkbox","id","hasImprovements",1,"spaced",3,"checked","input"],["id","faqAnswerIncubatorGrowthCalculator",1,"faqAnswer","hide"],["for","incubator-upgrade-level",1,"labelMargin","specialtyKeyword"],["id","incubator-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["for","facility-level",1,"labelMargin","progressionKeyword"],["id","facility-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"specialtyKeyword"],["id","faqAnswerNectarOfTheGodsCalculator",1,"faqAnswer","hide"],["for","notg-breed-level",1,"shortLabelMargin","keyword"],["id","notg-breed-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","hasOrbInfuser",1,"labelMargin","keyword"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Frequently Asked Questions"),d(),h(6,"em"),g(7,"This FAQ and game is still a work in progress! Bear with me if certain features aren't fully fleshed out and developed yet. If you have any feedback at all, please let me know using one of the links on the bottom right. Thank you so much for playing and hope you're enjoying it!"),d()(),D(8,"br"),h(9,"div",4)(10,"button",5),A("click",function(){return i.changeSection(i.faqSectionsEnum.basics)}),g(11,"Basics"),d(),h(12,"button",5),A("click",function(){return i.changeSection(i.faqSectionsEnum.progression)}),g(13,"Progression"),d(),h(14,"button",5),A("click",function(){return i.changeSection(i.faqSectionsEnum.calculators)}),g(15,"Calculators"),d()(),D(16,"hr")(17,"br"),x(18,xq,311,51,"div",6),x(19,Mq,132,15,"div",6),x(20,Hq,138,29,"div",6),d()()()),2&e&&(p(10),m("ngClass",i.currentSection===i.faqSectionsEnum.basics?"active":""),p(2),m("ngClass",i.currentSection===i.faqSectionsEnum.progression?"active":""),p(2),m("ngClass",i.currentSection===i.faqSectionsEnum.calculators?"active":""),p(4),m("ngIf",i.currentSection===i.faqSectionsEnum.basics),p(1),m("ngIf",i.currentSection===i.faqSectionsEnum.progression),p(1),m("ngIf",i.currentSection===i.faqSectionsEnum.calculators))},directives:[cn,li,Fm,Lo,Us,Uo,Ho,vf,Cn,RT,xT],styles:['.faqView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}.faqQuestion[_ngcontent-%COMP%]{display:inline-block;width:95%;font-weight:700}.hide[_ngcontent-%COMP%]{display:none}.expanderMargin[_ngcontent-%COMP%]{display:inline-block;width:5%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.inputsAndResult[_ngcontent-%COMP%]{display:flex}.inactiveCalculation[_ngcontent-%COMP%]{opacity:.5}.inputs[_ngcontent-%COMP%], .results[_ngcontent-%COMP%]{width:50%}.spoilerText[_ngcontent-%COMP%]{background-color:gray;color:transparent;-webkit-user-select:none;user-select:none;position:relative;display:inline-block;min-width:8rem}.spoilerText[_ngcontent-%COMP%]:hover > .hidden[_ngcontent-%COMP%]{display:block;color:#fff}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.shortLabelMargin[_ngcontent-%COMP%]{min-width:15%}.labelMargin[_ngcontent-%COMP%]{min-width:25%}.longLabelMargin[_ngcontent-%COMP%]{min-width:40%}.hidden[_ngcontent-%COMP%]{display:none;position:absolute}.subsections[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.viewSpoiler[_ngcontent-%COMP%]{background-color:inherit;color:inherit}@media (max-width: 800px){.expanderMargin[_ngcontent-%COMP%]{width:auto;margin-right:1rem}.faqQuestion[_ngcontent-%COMP%]{width:auto}}']}),t})(),zq=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i}ngOnInit(){this.componentCommunicationService.setNewView(Pt.stats),this.trackedStats=this.globalService.globalVar.trackedStats;var e=0;this.globalService.globalVar.animals.forEach(i=>{i.totalRacesRun>e&&(e=i.totalRacesRun,this.mostUsedAnimal=i.name,this.mostUsedAnimalCount=e)})}getColorClass(e){if(null!=e&&e.length>0){var i=this.globalService.globalVar.animals.filter(o=>o.isAvailable),r=new At;return i.forEach(o=>{e.includes(o.name)&&(r=o)}),{flatlandColor:"Flatland"===r.getRaceCourseType(),mountainColor:"Mountain"===r.getRaceCourseType(),waterColor:"Ocean"===r.getRaceCourseType(),tundraColor:"Tundra"===r.getRaceCourseType(),volcanicColor:"Volcanic"===r.getRaceCourseType()}}return{}}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Pn))},t.\u0275cmp=Tt({type:t,selectors:[["app-stats-view"]],decls:37,vars:34,consts:[[1,"statsView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"coloredText",3,"ngClass"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"Stats"),d(),D(5,"br")(6,"br"),g(7),Vt(8,"number"),D(9,"br"),g(10),Vt(11,"number"),D(12,"br"),g(13),Vt(14,"number"),D(15,"br"),h(16,"span",4),g(17),Vt(18,"number"),d(),D(19,"br"),h(20,"span",4),g(21),d(),D(22,"br"),h(23,"span",4),g(24),d(),D(25,"br"),h(26,"span",4),g(27),d(),D(28,"br"),h(29,"span",4),g(30),d(),D(31,"br"),h(32,"span",4),g(33),d(),D(34,"br"),h(35,"span",4),g(36),d()()()()),2&e&&(p(7),q(" Total Races: ",_u(8,18,i.trackedStats.totalRaces,"1.0","en-US")," "),p(3),q(" Total Meters Covered: ",_u(11,22,i.trackedStats.totalMetersRaced.toFixed(0),"1.0","en-US")," "),p(3),q(" Total Breeds: ",_u(14,26,i.trackedStats.totalBreeds,"1.0","en-US")," "),p(3),m("ngClass",i.getColorClass(i.mostUsedAnimal)),p(1),ki("Most Used Animal: ",i.mostUsedAnimal," (",_u(18,30,i.mostUsedAnimalCount,"1.0","en-US"),")"),p(3),m("ngClass",i.getColorClass(i.trackedStats.highestMaxSpeed)),p(1),q("Highest Max Speed: ",i.trackedStats.highestMaxSpeed,""),p(2),m("ngClass",i.getColorClass(i.trackedStats.highestAccelerationRate)),p(1),q("Highest Acceleration Rate: ",i.trackedStats.highestAccelerationRate,""),p(2),m("ngClass",i.getColorClass(i.trackedStats.highestStamina)),p(1),q("Highest Stamina: ",i.trackedStats.highestStamina,""),p(2),m("ngClass",i.getColorClass(i.trackedStats.highestPowerEfficiency)),p(1),q("Highest Power Efficiency: ",i.trackedStats.highestPowerEfficiency,""),p(2),m("ngClass",i.getColorClass(i.trackedStats.highestFocusDistance)),p(1),q("Highest Focus Distance: ",i.trackedStats.highestFocusDistance,""),p(2),m("ngClass",i.getColorClass(i.trackedStats.highestAdaptabilityDistance)),p(1),q("Highest Adaptability Distance: ",i.trackedStats.highestAdaptabilityDistance,""))},directives:[cn],pipes:[Qa],styles:['.statsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}']}),t})();function jq(t,n){if(1&t&&(h(0,"div",13),D(1,"span",14),d()),2&t){const e=_().$implicit,i=_();p(1),m("innerHTML",i.getPopover(e.name,e.itemType),kt)}}function $q(t,n){if(1&t&&(h(0,"p")(1,"span",8)(2,"span",9),g(3),d(),h(4,"span",10),g(5),d(),D(6,"hr",11),d(),x(7,jq,2,1,"ng-template",null,12,dt),d()),2&t){const e=n.$implicit,i=ot(8);p(1),m("ngbPopover",i),p(2),rt(e.name),p(2),q(" x ",e.amount,"")}}function qq(t,n){if(1&t&&(h(0,"div",13),D(1,"span",14),d()),2&t){const e=_().$implicit,i=_();p(1),m("innerHTML",i.getPopover(e.name,e.itemType),kt)}}function Wq(t,n){if(1&t&&(h(0,"p")(1,"span",8)(2,"span",15),g(3),d(),h(4,"span",10),g(5),d(),D(6,"hr",11),d(),x(7,qq,2,1,"ng-template",null,16,dt),d()),2&t){const e=n.$implicit,i=ot(8);p(1),m("ngbPopover",i),p(2),rt(e.name),p(2),q(" x ",e.amount,"")}}function Xq(t,n){if(1&t&&(h(0,"div",13),D(1,"span",14),d()),2&t){const e=_().$implicit,i=_();p(1),m("innerHTML",i.getPopover(e.name,e.itemType),kt)}}function Yq(t,n){if(1&t&&(h(0,"p")(1,"span",8)(2,"span",17),g(3),d(),h(4,"span",10),g(5),d(),D(6,"hr",11),d(),x(7,Xq,2,1,"ng-template",null,18,dt),d()),2&t){const e=n.$implicit,i=ot(8);p(1),m("ngbPopover",i),p(2),rt(e.name),p(2),q(" x ",e.amount,"")}}function Qq(t,n){if(1&t){const e=ie();h(0,"span")(1,"button",21),A("click",function(){k(e);const r=_().$implicit,a=_(),o=ot(22);return a.openOrbModal(o,r.name)}),h(2,"span",22),g(3),d(),h(4,"span",10),g(5),d()()()}if(2&t){const e=_().$implicit;p(3),rt(e.name),p(2),q(" x ",e.amount,"")}}function Kq(t,n){if(1&t&&(h(0,"span")(1,"span",22),g(2),d(),h(3,"span",10),g(4),d()()),2&t){const e=_().$implicit;p(2),rt(e.name),p(2),q(" x ",e.amount,"")}}function Zq(t,n){if(1&t&&(h(0,"div",13),D(1,"span",14),d()),2&t){const e=_().$implicit,i=_();p(1),m("innerHTML",i.getPopover(e.name,e.itemType),kt)}}function Jq(t,n){if(1&t&&(h(0,"p")(1,"span",8),x(2,Qq,6,2,"span",19),x(3,Kq,5,2,"span",19),D(4,"hr",11),d(),x(5,Zq,2,1,"ng-template",null,20,dt),d()),2&t){const e=n.$implicit,i=ot(6),r=_();p(1),m("ngbPopover",i),p(1),m("ngIf",r.isResourceAnOrb(e)),p(1),m("ngIf",!r.isResourceAnOrb(e))}}function eW(t,n){if(1&t){const e=ie();h(0,"div",23)(1,"div",24)(2,"h4",25),g(3,"Orb Stats Info"),d(),h(4,"button",26),A("click",function(){return k(e).$implicit.dismiss()}),g(5,"X"),d()(),h(6,"div",27),D(7,"app-orbs-view"),d()()}}let tW=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.lookupService=i,this.componentCommunicationService=r,this.utilityService=a,this.modalService=o,this.resources=[],this.equipment=[],this.specialtyItems=[],this.progressionResources=[]}ngOnInit(){this.componentCommunicationService.setNewView(Pt.resources),this.resources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===G.Food||e.itemType===G.Resources).sort(),this.equipment=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===G.Equipment).sort(),this.specialtyItems=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===G.Specialty).sort(),this.progressionResources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===G.Progression).sort(),this.specialtyItems.find(e=>"Incubator Upgrade Lv2"===e.name)&&(this.specialtyItems=this.specialtyItems.filter(e=>"Incubator Upgrade Lv1"!==e.name)),this.specialtyItems.find(e=>"Incubator Upgrade Lv3"===e.name)&&(this.specialtyItems=this.specialtyItems.filter(e=>"Incubator Upgrade Lv2"!==e.name)),this.specialtyItems.find(e=>"Incubator Upgrade Lv4"===e.name)&&(this.specialtyItems=this.specialtyItems.filter(e=>"Incubator Upgrade Lv3"!==e.name)),this.specialtyItems.find(e=>"International Races"===e.name)&&(this.specialtyItems=this.specialtyItems.filter(e=>"National Races"!==e.name)),this.specialtyItems.find(e=>"Golden Whistle"===e.name)&&(this.specialtyItems=this.specialtyItems.filter(e=>"Whistle"!==e.name))}getPopover(e,i){return this.utilityService.getSanitizedHtml(this.lookupService.getResourcePopover(e,i))}isResourceAnOrb(e){return e.itemType===G.Equipment&&("Sapphire Orb"===e.name||"Amethyst Orb"===e.name||"Topaz Orb"===e.name||"Amber Orb"===e.name||"Emerald Orb"===e.name||"Ruby Orb"===e.name)}openOrbModal(e,i){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Ti),V(Pn),V(Rn),V(io))},t.\u0275cmp=Tt({type:t,selectors:[["app-resources-view"]],decls:23,vars:4,consts:[[1,"resourcesView","gridContainer"],[1,"resources"],[1,"s4Heading","centered"],[4,"ngFor","ngForOf"],[1,"progression"],[1,"specialty"],[1,"equipment"],["orbContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"screenMarginLeft",3,"ngbPopover"],[1,"resourceKeyword"],[1,"rightAligned"],[1,"miniHr"],["resourceContent",""],[1,"popoverClass"],[3,"innerHTML"],[1,"progressionKeyword"],["progressionContent",""],[1,"specialtyKeyword"],["specialityContent",""],[4,"ngIf"],["equipmentContent",""],[1,"buttonAsText",3,"click"],[1,"equipmentKeyword"],[1,"modalClass","orbContent"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"div",2),g(3,"Resources"),d(),D(4,"br"),x(5,$q,9,3,"p",3),d(),h(6,"div",4)(7,"div",2),g(8,"Progression"),d(),D(9,"br"),x(10,Wq,9,3,"p",3),d(),h(11,"div",5)(12,"div",2),g(13,"Specialty"),d(),D(14,"br"),x(15,Yq,9,3,"p",3),d(),h(16,"div",6)(17,"div",2),g(18,"Equipment"),d(),D(19,"br"),x(20,Jq,7,3,"p",3),d()(),x(21,eW,8,0,"ng-template",null,7,dt)),2&e&&(p(5),m("ngForOf",i.resources),p(5),m("ngForOf",i.progressionResources),p(5),m("ngForOf",i.specialtyItems),p(5),m("ngForOf",i.equipment))},directives:[Cn,Qr,li,xD],styles:['.resources[_ngcontent-%COMP%]{white-space:pre}.resourcesView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.orbContent[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:25%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:"resources progression specialty equipment"}.resources[_ngcontent-%COMP%]{grid-area:resources;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.progression[_ngcontent-%COMP%]{grid-area:progression;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.specialty[_ngcontent-%COMP%]{grid-area:specialty;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.equipment[_ngcontent-%COMP%]{grid-area:equipment;background-color:var(--background-secondary)}.rightAligned[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto auto;justify-content:stretch;grid-template-areas:"resources" "progression" "specialty" "equipment"}}']}),t})();var Yo=Q(7206);let iW=(()=>{class t{constructor(e){this.globalService=e}getCodeItems(e){var r=Yo.AES.decrypt(e,"LaunchSecret!CLTRA71");if(0!==r.toString(Yo.enc.Utf8).length){var a=[],o=JSON.parse(r.toString(Yo.enc.Utf8));return null!=o&&o.rewards.length>0&&o.rewards.forEach(s=>{a.push(new te(s.name,s.amount))}),a}}redeemCode(e){var r=Yo.AES.decrypt(e,"LaunchSecret!CLTRA71");if(0===r.toString(Yo.enc.Utf8).length)return alert("Invalid code entered."),!1;try{var a=JSON.parse(r.toString(Yo.enc.Utf8));if(null!=a&&a.rewards.length>0){if((new Date).getTime()>new Date(a.expirationDate).getTime())return alert("This code has expired."),!1;if(this.globalService.globalVar.redeemedCodes.some(o=>o.codeValue===r.toString(Yo.enc.Utf8)))return alert("This code has already been redeemed."),!1;a.rewards.forEach(o=>{var s=this.globalService.globalVar.resources.find(l=>l.name===o.name);null!=s?s.amount+=o.amount:this.globalService.globalVar.resources.push(o)}),a.codeValue=r.toString(Yo.enc.Utf8),this.globalService.globalVar.redeemedCodes.push(a)}}catch(o){return alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!"),!1}return!0}}return t.\u0275fac=function(e){return new(e||t)(He(It))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),nW=(()=>{class t{constructor(e){this.lookupService=e}setupRewards(){this.redeemableCode=new Uf,this.redeemableCode.expirationDate=new Date("2022-10-01"),this.redeemableCode.rewards.push(this.lookupService.gainCoins(5e4))}createCode(){this.setupRewards();var i=JSON.stringify(this.redeemableCode);return Yo.AES.encrypt(i,"LaunchSecret!CLTRA71").toString()}}return t.\u0275fac=function(e){return new(e||t)(He(Ti))},t.\u0275prov=gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),rW=(()=>{class t{constructor(e,i,r,a,o,s,l,c,u){this.globalService=e,this.themeService=i,this.lookupService=r,this.codeRedemptionService=a,this.codeCreationService=o,this.deploymentService=s,this.componentCommunicationService=l,this.versionControlService=c,this.utilityService=u,this.raceDisplayInfoEnum=Pa,this.skipDrawRaceToggle=()=>{this.skipDrawRace=!this.skipDrawRace,this.globalService.globalVar.settings.set("skipDrawRace",this.skipDrawRace)},this.finishTrainingBeforeSwitchingToggle=()=>{this.finishTrainingBeforeSwitching=!this.finishTrainingBeforeSwitching,this.globalService.globalVar.settings.set("finishTrainingBeforeSwitching",this.finishTrainingBeforeSwitching)},this.hideTipsToggle=()=>{this.hideTips=!this.hideTips,this.globalService.globalVar.settings.set("hideTips",this.hideTips)},this.useNumbersForCircuitRankToggle=()=>{this.useNumbersForCircuitRank=!this.useNumbersForCircuitRank,this.globalService.globalVar.settings.set("useNumbersForCircuitRank",this.useNumbersForCircuitRank)},this.autoStartEventRaceToggle=()=>{this.autoStartEventRace=!this.autoStartEventRace,this.globalService.globalVar.settings.set("autoStartEventRace",this.autoStartEventRace)},this.quickViewBarnToggle=()=>{this.quickViewBarnMode=!this.quickViewBarnMode,this.globalService.globalVar.settings.set("quickViewBarnMode",this.quickViewBarnMode)},this.displayAverageDistancePaceToggle=()=>{this.displayAverageDistancePace=!this.displayAverageDistancePace,this.globalService.globalVar.settings.set("displayAverageDistancePace",this.displayAverageDistancePace)},this.showBarnOptionsToggle=()=>{this.showBarnOptions=!this.showBarnOptions,this.globalService.globalVar.settings.set("showBarnOptions",this.showBarnOptions)}}ngOnInit(){this.componentCommunicationService.setNewView(Pt.settings),this.deploymentService.codeCreationMode&&console.log(this.codeCreationService.createCode()),this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1);var e=this.globalService.globalVar.settings.get("skipDrawRace");this.skipDrawRace=void 0!==e&&e,this.skipDrawRacePopoverText=this.lookupService.getSettingDescriptions("Auto Skip Race Info");var i=this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching");this.finishTrainingBeforeSwitching=void 0!==i&&i,this.finishTrainingBeforeSwitchingPopoverText=this.lookupService.getSettingDescriptions("Finish Training Before Switching");var r=this.globalService.globalVar.settings.get("raceDisplayInfo");this.raceDisplayInfo=this.getRaceDisplayInfoName(void 0===r?Pa.both:r),this.raceDisplayInfoPopoverText=this.lookupService.getSettingDescriptions("Race Display Info");var a=this.globalService.globalVar.settings.get("hideTips");this.hideTips=void 0!==a&&a,this.hideTipsPopoverText=this.lookupService.getSettingDescriptions("Hide Tips");var o=this.globalService.globalVar.settings.get("useNumbersForCircuitRank");this.useNumbersForCircuitRank=void 0!==o&&o,this.useNumbersForCircuitRankPopoverText=this.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank");var s=this.globalService.globalVar.settings.get("autoStartEventRace");this.autoStartEventRace=void 0!==s&&s,this.autoStartEventRacePopoverText=this.lookupService.getSettingDescriptions("Auto Start Event Race");var l=this.globalService.globalVar.settings.get("quickViewBarnMode");this.quickViewBarnMode=void 0!==l&&l,this.quickViewBarnModePopoverText=this.lookupService.getSettingDescriptions("Quick View Barn");var c=this.globalService.globalVar.settings.get("displayAverageDistancePace");this.displayAverageDistancePace=void 0!==c&&c,this.displayAverageDistancePacePopoverText=this.lookupService.getSettingDescriptions("Display Average Distance Pace");var u=this.globalService.globalVar.settings.get("showBarnOptions");this.showBarnOptions=void 0!==u&&u,this.showBarnOptionsPopoverText=this.lookupService.getSettingDescriptions("Show Barn Options")}SaveGame(){var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);this.importExportValue=i}fileChanged(e){this.file=e.target.files[0]}LoadGame(){if(confirm("This will overwrite your existing game data. Continue?")){var e=LZString.decompressFromBase64(this.importExportValue),i=JSON.parse(e);null!=i&&(this.globalService.globalVar=T0(en,i),this.versionControlService.updatePlayerVersion())}}SaveGameToFile(){var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);let r=new Blob([i],{type:".txt"}),a=document.createElement("a"),o=URL.createObjectURL(r);a.href=o,a.download="Cultura-v"+this.globalService.globalVar.currentVersion.toString().replace(".","_")+"-"+(new Date).toLocaleDateString(),document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(o)},0)}LoadGameFromFile(){if((null==this.file||0===this.file.length)&&alert("First select a file to import."),confirm("This will overwrite your existing game data. Continue?")){let e=new FileReader;e.onload=i=>{var r=LZString.decompressFromBase64(e.result),a=JSON.parse(r);null!=a&&(this.globalService.globalVar=T0(en,a),this.versionControlService.updatePlayerVersion())},e.readAsText(this.file)}}saveRaceDisplayInfo(){this.globalService.globalVar.settings.set("raceDisplayInfo",this.raceDisplayInfo)}changeRaceDisplayInfo(e){this.globalService.globalVar.settings.set("raceDisplayInfo",e),this.raceDisplayInfo=this.getRaceDisplayInfoName(e)}changeTheme(e){var i=Qu;"White"===e&&(i=this.themeService.setWhiteTheme()),"Light"===e&&(i=this.themeService.setLightTheme()),"Twilight"===e&&(i=this.themeService.setTwilightTheme()),"Night"===e&&(i=this.themeService.setNightTheme()),this.globalService.globalVar.settings.set("theme",i),this.getThemeName()}getThemeName(){this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1)}getRaceDisplayInfoName(e){return e===Pa.both?"Both":e===Pa.text?"Text":e===Pa.draw?"Draw":""}enterRedemptionCode(){if(this.codeRedemptionService.redeemCode(this.enteredRedemptionCode)){var i=this.codeRedemptionService.getCodeItems(this.enteredRedemptionCode);if(void 0!==i){var r="";i.forEach(a=>r+=a.amount+" "+a.name+", "),r=r.replace(/,\s*$/,""),alert("You received: "+r)}}}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(Xs),V(Ti),V(iW),V(nW),V(QR),V(Pn),V(D0),V(Rn))},t.\u0275cmp=Tt({type:t,selectors:[["app-settings-view"]],decls:118,vars:21,consts:[[1,"settingsView"],[1,"info"],[1,"settingsGrid"],[1,"options"],[1,"s4Heading"],[1,"toggles"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","finishTraining",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","hideTips",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","useNumbersForCircuitRank",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","autoStartEventRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","quickViewBarn",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","displayAverageDistancePace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","showBarnOptions",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave","ngbDropdown","",1,"d-inline-block",3,"ngbPopover"],[1,"bottomAligned"],["type","button","id","raceDisplayInfoDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","raceDisplayInfoDropdown"],["ngbDropdownItem","",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","themeDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","themeDropdown"],[1,"saveLoad"],[1,"importExportDiv"],["id","importExport","name","importExport","rows","10",3,"ngModel","ngModelChange"],[1,"importExportButtons"],[3,"click"],["type","file","id","fileUpload",1,"spaced",3,"change"],[1,"codeRedemption"],["for","codeRedemptionText"],["id","codeRedemptionText","type","text",1,"spaced","codeRedemptionInput",3,"ngModel","ngModelChange"],[1,"screenMarginLeft",3,"click"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"h2"),g(3,"Settings"),d()(),h(4,"div",2)(5,"div",3)(6,"span",4),g(7,"Options"),d(),D(8,"br"),h(9,"div",5)(10,"span",6)(11,"label")(12,"input",7),A("ngModelChange",function(a){return i.skipDrawRace=a})("input",function(){return i.skipDrawRaceToggle()}),d(),h(13,"span"),g(14,"Auto Skip Race Info"),d()()(),D(15,"br"),h(16,"span",6)(17,"label")(18,"input",8),A("ngModelChange",function(a){return i.finishTrainingBeforeSwitching=a})("input",function(){return i.finishTrainingBeforeSwitchingToggle()}),d(),h(19,"span"),g(20,"Finish Training Before Switching "),d()()(),D(21,"br"),h(22,"span",6)(23,"label")(24,"input",9),A("ngModelChange",function(a){return i.hideTips=a})("input",function(){return i.hideTipsToggle()}),d(),h(25,"span"),g(26,"Hide Tips"),d()()(),D(27,"br"),h(28,"span",6)(29,"label")(30,"input",10),A("ngModelChange",function(a){return i.useNumbersForCircuitRank=a})("input",function(){return i.useNumbersForCircuitRankToggle()}),d(),h(31,"span"),g(32,"Use Numbers For Ranks"),d()()(),D(33,"br"),h(34,"span",6)(35,"label")(36,"input",11),A("ngModelChange",function(a){return i.autoStartEventRace=a})("input",function(){return i.autoStartEventRaceToggle()}),d(),h(37,"span"),g(38,"Auto Start Event Race"),d()()(),D(39,"br"),h(40,"span",6)(41,"label")(42,"input",12),A("ngModelChange",function(a){return i.quickViewBarnMode=a})("input",function(){return i.quickViewBarnToggle()}),d(),h(43,"span"),g(44,"Quick View Barn"),d()()(),D(45,"br"),h(46,"span",6)(47,"label")(48,"input",13),A("ngModelChange",function(a){return i.displayAverageDistancePace=a})("input",function(){return i.displayAverageDistancePaceToggle()}),d(),h(49,"span"),g(50,"Display Distance From Average Pace During Race"),d()()(),D(51,"br"),h(52,"span",6)(53,"label")(54,"input",14),A("ngModelChange",function(a){return i.showBarnOptions=a})("input",function(){return i.showBarnOptionsToggle()}),d(),h(55,"span"),g(56,"Show Barn Options"),d()()(),D(57,"br"),d(),h(58,"div",15)(59,"label",16),g(60,"Race Display Info:"),d(),h(61,"button",17),g(62),d(),h(63,"div",18)(64,"button",19),A("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.draw)}),g(65,"Draw"),d(),h(66,"button",19),A("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.text)}),g(67,"Text"),d(),h(68,"button",19),A("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.both)}),g(69,"Both"),d()()(),D(70,"br"),h(71,"div",20)(72,"label",16),g(73,"Theme:"),d(),h(74,"button",21),g(75),d(),h(76,"div",22)(77,"button",19),A("click",function(){return i.changeTheme("White")}),g(78,"White"),d(),h(79,"button",19),A("click",function(){return i.changeTheme("Light")}),g(80,"Light"),d(),h(81,"button",19),A("click",function(){return i.changeTheme("Twilight")}),g(82,"Twilight"),d(),h(83,"button",19),A("click",function(){return i.changeTheme("Night")}),g(84,"Night"),d()()()(),h(85,"div",23)(86,"span",4),g(87,"Save/Load"),d(),D(88,"br"),h(89,"div",24)(90,"textarea",25),A("ngModelChange",function(a){return i.importExportValue=a}),d(),h(91,"div",26)(92,"button",27),A("click",function(){return i.LoadGame()}),g(93," Import "),d(),h(94,"button",27),A("click",function(){return i.SaveGame()}),g(95," Export "),d()(),D(96,"br"),h(97,"div",26)(98,"div")(99,"button",27),A("click",function(){return i.LoadGameFromFile()}),g(100," Import from File "),d(),h(101,"input",28),A("change",function(a){return i.fileChanged(a)}),d()(),h(102,"button",27),A("click",function(){return i.SaveGameToFile()}),g(103," Export to File "),d()()(),D(104,"br")(105,"br"),h(106,"div")(107,"span",4),g(108,"Code Redemption"),d(),D(109,"br")(110,"br"),h(111,"div",29)(112,"label",30),g(113,"Code: "),d(),h(114,"input",31),A("ngModelChange",function(a){return i.enteredRedemptionCode=a}),d(),h(115,"button",32),A("click",function(){return i.enterRedemptionCode()}),g(116," Enter "),d()(),D(117,"br"),d()()()()),2&e&&(p(10),m("ngbPopover",i.skipDrawRacePopoverText),p(2),m("ngModel",i.skipDrawRace),p(4),m("ngbPopover",i.finishTrainingBeforeSwitchingPopoverText),p(2),m("ngModel",i.finishTrainingBeforeSwitching),p(4),m("ngbPopover",i.hideTipsPopoverText),p(2),m("ngModel",i.hideTips),p(4),m("ngbPopover",i.useNumbersForCircuitRankPopoverText),p(2),m("ngModel",i.useNumbersForCircuitRank),p(4),m("ngbPopover",i.autoStartEventRacePopoverText),p(2),m("ngModel",i.autoStartEventRace),p(4),m("ngbPopover",i.quickViewBarnModePopoverText),p(2),m("ngModel",i.quickViewBarnMode),p(4),m("ngbPopover",i.displayAverageDistancePacePopoverText),p(2),m("ngModel",i.displayAverageDistancePace),p(4),m("ngbPopover",i.showBarnOptionsPopoverText),p(2),m("ngModel",i.showBarnOptions),p(4),m("ngbPopover",i.raceDisplayInfoPopoverText),p(4),rt(i.raceDisplayInfo),p(13),rt(i.currentTheme),p(15),m("ngModel",i.importExportValue),p(24),m("ngModel",i.enteredRedemptionCode))},directives:[Qr,rc,Uo,Ho,yc,X0,ip,W0,Lo],styles:['.settingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}#raceDisplayInfoDropdown[_ngcontent-%COMP%], #themeDropdown[_ngcontent-%COMP%]{border:1px solid;border-color:var(--background-tertiary)}.bottomAligned[_ngcontent-%COMP%]{vertical-align:bottom}.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1fr 1%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:". options saveLoad .";background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.options[_ngcontent-%COMP%]{grid-area:options}.saveLoad[_ngcontent-%COMP%]{grid-area:saveLoad}#importExport[_ngcontent-%COMP%]{width:100%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.importExportButtons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.codeRedemption[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.codeRedemptionInput[_ngcontent-%COMP%]{flex:1}@media (max-width: 800px){.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:". options ." ". saveLoad ."}}']}),t})();function aW(t,n){if(1&t){const e=ie();h(0,"div",12),A("click",function(){return k(e),_().getNewTip()}),h(1,"span"),g(2),d()()}if(2&t){const e=_();p(2),ki("",e.displayingFunFact?"Fun Fact: ":"Tip: ","",e.randomTip,"")}}let oW=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.componentCommunicationService=a,this.utilityService=o,this.displayingFunFact=!1,this.lastDisplayedFunFact=!1}ngOnInit(){var e=this;this.displayTip=!this.globalService.globalVar.settings.get("hideTips"),this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.randomTip=this.lookupService.getRandomTip(),this.totalTime=0,this.maxTipTime=60,this.gameLoopService.gameUpdateEvent.subscribe(function(){var i=Br(function*(r){if(e.displayTip=!e.globalService.globalVar.settings.get("hideTips"),e.totalTime+=r,e.totalTime>=e.maxTipTime&&e.displayTip){e.totalTime=0;var a=e.utilityService.getRandomInteger(1,4);a<=3||e.lastDisplayedFunFact?(e.displayingFunFact=!1,e.lastDisplayedFunFact=!1,e.randomTip=e.lookupService.getRandomTip()):4===a&&(e.displayingFunFact=!0,e.lastDisplayedFunFact=!0,e.randomTip=e.lookupService.getRandomFunFact())}});return function(r){return i.apply(this,arguments)}}())}getNewTip(){this.totalTime=0;var e=this.utilityService.getRandomInteger(1,4);e<=3||this.lastDisplayedFunFact?(this.displayingFunFact=!1,this.lastDisplayedFunFact=!1,this.randomTip=this.lookupService.getRandomTip()):4===e&&(this.displayingFunFact=!0,this.lastDisplayedFunFact=!0,this.randomTip=this.lookupService.getRandomFunFact())}openFAQs(){this.componentCommunicationService.setNewView(Pt.faqs)}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(An),V(Ti),V(Pn),V(Rn))},t.\u0275cmp=Tt({type:t,selectors:[["app-footer"]],decls:25,vars:1,consts:[[1,"footerView"],[1,"gridContainer"],[1,"area1"],["class","area2 keyword tips",3,"click",4,"ngIf"],[1,"area3","keyword","rightAlign"],[1,"faqs",3,"click"],["href","https://discord.gg/TgbRXsXQF3","rel","noopener noreferrer","target","_blank"],["href","https://www.reddit.com/message/compose/?to=Jaghancement","rel","noopener noreferrer","target","_blank"],["href","mailto:CulturaIdle@gmail.com"],[1,"area4","keyword","rightAlign"],["href","https://www.buymeacoffee.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],["href","https://www.patreon.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],[1,"area2","keyword","tips",3,"click"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1)(2,"div",2),D(3,"span"),d(),x(4,aW,3,2,"div",3),h(5,"div",4)(6,"span")(7,"span",5),A("click",function(){return i.openFAQs()}),g(8,"FAQs"),d(),g(9," | "),h(10,"a",6),g(11,"Discord"),d(),g(12," | "),h(13,"a",7),g(14,"Reddit"),d(),g(15," | "),h(16,"a",8),g(17,"Email"),d()()(),h(18,"div",9)(19,"span")(20,"a",10),g(21,"Donate"),d(),g(22," | "),h(23,"a",11),g(24,"Patreon"),d()()()()()),2&e&&(p(4),m("ngIf",i.displayTip))},directives:[li],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 1fr 20% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". area1 area2 area3 ." ". area1 area2 area4 ."}a[_ngcontent-%COMP%], .faqs[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.faqs[_ngcontent-%COMP%]{cursor:pointer}.faqs[_ngcontent-%COMP%]:hover{text-decoration:underline}.area1[_ngcontent-%COMP%]{grid-area:area1;justify-self:stretch}.area2[_ngcontent-%COMP%]{grid-area:area2;justify-self:stretch}.area3[_ngcontent-%COMP%]{grid-area:area3;justify-self:stretch}.area4[_ngcontent-%COMP%]{grid-area:area4;justify-self:stretch}.rightAlign[_ngcontent-%COMP%]{text-align:right}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 0% 1fr 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". . . area3 ." ". . . area4 ."}.tips[_ngcontent-%COMP%]{display:none}}']}),t})();const sW=["tutorialContent"],lW=["eventLoadingContent"];function cW(t,n){1&t&&(h(0,"div",19),D(1,"app-barn-view"),d())}function uW(t,n){1&t&&(h(0,"div",20),D(1,"app-race-selection-view"),d())}function dW(t,n){1&t&&(h(0,"div",21),D(1,"app-animals-view"),d())}function hW(t,n){1&t&&(h(0,"div",22),D(1,"app-decks-view"),d())}function fW(t,n){1&t&&(h(0,"div",23),D(1,"app-shop-view"),d())}function pW(t,n){1&t&&(h(0,"div",24),D(1,"app-incubator-view"),d())}function gW(t,n){1&t&&(h(0,"div",25),D(1,"app-training-track-view"),d())}function vW(t,n){1&t&&(h(0,"div",26),D(1,"app-faq-view"),d())}function mW(t,n){1&t&&(h(0,"div",27),D(1,"app-stats-view"),d())}function bW(t,n){1&t&&(h(0,"div",28),D(1,"app-resources-view"),d())}function _W(t,n){1&t&&(h(0,"div",29),D(1,"app-settings-view"),d())}function yW(t,n){if(1&t){const e=ie();h(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Tutorial"),d(),h(4,"button",33),A("click",function(){return k(e),_().closeTutorialModal()}),g(5,"X"),d()(),D(6,"div",34),h(7,"div",35)(8,"span")(9,"button",36),A("click",function(){return k(e),_().skipTutorial()}),g(10,"Skip Tutorial"),d()(),h(11,"span")(12,"button",36),A("click",function(){return k(e),_().continueTutorial()}),g(13,"Continue"),d()()()()}if(2&t){const e=_();p(6),m("innerHTML",e.tutorialText,kt)}}function wW(t,n){if(1&t){const e=ie();h(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Loading..."),d(),h(4,"button",33),A("click",function(){return k(e),_().closeModals()}),g(5,"X"),d()(),h(6,"div",37),g(7," Grand Prix is calculating offline time. Load times may be long while this finishes. "),d(),h(8,"div",35)(9,"span")(10,"button",36),A("click",function(){return k(e),_().closeModals()}),g(11,"Continue"),d()()()()}}let CW=(()=>{class t{constructor(e,i,r,a,o,s,l){this.ref=e,this.globalService=i,this.modalService=r,this.tutorialService=a,this.componentCommunicationService=o,this.sanitizer=s,this.gameLoopService=l,this.navigationEnum=Pt,this.activeView=Pt.barn,this.loadingScreenDisplayed=!1}ngOnInit(){var e=this;this.openTutorialModal(),this.eventPrixSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=Br(function*(a){null!=e.globalService.globalVar.eventRaceData&&e.globalService.globalVar.eventRaceData.isCatchingUp&&!e.loadingScreenDisplayed?(e.loadingScreenDisplayed=!0,e.openLoadingModal()):null!=e.globalService.globalVar.eventRaceData&&!e.globalService.globalVar.eventRaceData.isCatchingUp&&e.loadingScreenDisplayed&&(e.loadingScreenDisplayed=!1,e.closeModals())});return function(a){return r.apply(this,arguments)}}());var i=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=Br(function*(a){e.globalService.globalVar.tutorials.showTutorial&&e.openTutorialModal(),e.globalService.globalVar.tutorials.tutorialCompleted&&i.unsubscribe()});return function(a){return r.apply(this,arguments)}}())}changeView(e){this.activeView=e}openTutorialModal(){if(!this.globalService.globalVar.tutorials.tutorialCompleted){var e=this.tutorialService.getTutorialState(this.globalService.globalVar.tutorials.currentTutorialId);this.activeView===e.associatedTab&&(this.tutorialText=this.sanitizer.sanitize(_i.HTML,this.sanitizer.bypassSecurityTrustHtml(e.tutorialText+"\n")),this.globalService.globalVar.tutorials.showTutorial=!1,5===e.id&&(this.globalService.globalVar.tutorials.currentTutorialId+=1),this.modalService.open(this.tutorialContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(i=>{this.closeTutorialModal()},i=>{this.closeTutorialModal()}))}}openLoadingModal(){this.modalService.open(this.eventLoadingContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(e=>{this.closeModals()},e=>{this.closeModals()})}closeModals(){this.modalService.dismissAll()}closeTutorialModal(){this.modalService.dismissAll()}skipTutorial(){this.tutorialService.skipTutorial(),this.closeTutorialModal()}continueTutorial(){this.closeTutorialModal()}}return t.\u0275fac=function(e){return new(e||t)(V(sa),V(It),V(io),V(KR),V(Pn),V(hs),V(An))},t.\u0275cmp=Tt({type:t,selectors:[["app-main"]],viewQuery:function(e,i){if(1&e&&(Sr(sW,7),Sr(lW,7)),2&e){let r;yi(r=wi())&&(i.tutorialContent=r.first),yi(r=wi())&&(i.eventLoadingContent=r.first)}},decls:23,vars:11,consts:[[1,"gridContainer"],[1,"headerArea"],[1,"mainArea"],["id","BarnView","class","mainView",4,"ngIf"],["id","RaceSelectionView","class","mainView",4,"ngIf"],["id","AnimalsView","class","mainView",4,"ngIf"],["id","DecksView","class","mainView",4,"ngIf"],["id","ShopView","class","mainView",4,"ngIf"],["id","IncubatorView","class","mainView",4,"ngIf"],["id","TrainingTrackView","class","mainView",4,"ngIf"],["id","FaqsView","class","mainView",4,"ngIf"],["id","StatsView","class","mainView",4,"ngIf"],["id","ResourcesView","class","mainView",4,"ngIf"],["id","SettingsView","class","mainView",4,"ngIf"],[1,"navArea"],[3,"viewChanged"],[1,"footerArea"],["tutorialContent",""],["eventLoadingContent",""],["id","BarnView",1,"mainView"],["id","RaceSelectionView",1,"mainView"],["id","AnimalsView",1,"mainView"],["id","DecksView",1,"mainView"],["id","ShopView",1,"mainView"],["id","IncubatorView",1,"mainView"],["id","TrainingTrackView",1,"mainView"],["id","FaqsView",1,"mainView"],["id","StatsView",1,"mainView"],["id","ResourcesView",1,"mainView"],["id","SettingsView",1,"mainView"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"],[1,"modal-body"]],template:function(e,i){1&e&&(h(0,"div",0)(1,"div",1),D(2,"app-header"),d(),h(3,"div",2),x(4,cW,2,0,"div",3),x(5,uW,2,0,"div",4),x(6,dW,2,0,"div",5),x(7,hW,2,0,"div",6),x(8,fW,2,0,"div",7),x(9,pW,2,0,"div",8),x(10,gW,2,0,"div",9),x(11,vW,2,0,"div",10),x(12,mW,2,0,"div",11),x(13,bW,2,0,"div",12),x(14,_W,2,0,"div",13),d(),h(15,"div",14)(16,"app-navigation",15),A("viewChanged",function(a){return i.changeView(a)}),d()(),h(17,"div",16),D(18,"app-footer"),d()(),x(19,yW,14,1,"ng-template",null,17,dt),x(21,wW,12,0,"ng-template",null,18,dt)),2&e&&(p(4),m("ngIf",i.activeView===i.navigationEnum.barn),p(1),m("ngIf",i.activeView===i.navigationEnum.raceselection),p(1),m("ngIf",i.activeView===i.navigationEnum.animals),p(1),m("ngIf",i.activeView===i.navigationEnum.relayTeams),p(1),m("ngIf",i.activeView===i.navigationEnum.shop),p(1),m("ngIf",i.activeView===i.navigationEnum.incubator),p(1),m("ngIf",i.activeView===i.navigationEnum.trainingtrack),p(1),m("ngIf",i.activeView===i.navigationEnum.faqs),p(1),m("ngIf",i.activeView===i.navigationEnum.stats),p(1),m("ngIf",i.activeView===i.navigationEnum.resources),p(1),m("ngIf",i.activeView===i.navigationEnum.settings))},directives:[yU,li,YH,xz,x$,B$,sq,Dq,DD,Gq,zq,tW,rW,CD,oW],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100vh;grid-template-columns:88% 12%;grid-template-rows:6% 88% 6%;justify-content:stretch;grid-template-areas:"header header" "main  nav" "footer footer"}.barnOptions[_ngcontent-%COMP%]{position:sticky;bottom:0;right:0;width:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.8)}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100%;position:fixed;top:0;left:0;bottom:0;right:0;grid-template-columns:88% 12%;grid-template-rows:auto 1fr auto;justify-content:stretch;grid-template-areas:"header header" "main  main" "footer footer"}.navArea[_ngcontent-%COMP%]{display:none}}.mainArea[_ngcontent-%COMP%]{grid-area:main;justify-self:stretch;background-color:var(--background-default);color:var(--foreground-default);overflow:auto}.navArea[_ngcontent-%COMP%]{grid-area:nav;justify-self:stretch;background-color:var(--background-secondary);color:var(--foreground-default)}.footerArea[_ngcontent-%COMP%]{grid-area:footer;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.headerArea[_ngcontent-%COMP%]{grid-area:header;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.mainView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.rightAlign[_ngcontent-%COMP%]{float:right}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.spaceBetween[_ngcontent-%COMP%]{justify-content:space-between!important}']}),t})(),SW=(()=>{class t{constructor(e,i,r,a,o,s,l,c,u,f){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.specializationService=a,this.themeService=o,this.raceLogicService=s,this.deploymentService=l,this.versionControlService=c,this.utilityService=u,this.grandPrixLogicService=f,this.title="Cultura",this.newGame=!0,this.saveTime=0,this.saveFrequency=10,this.racingSaveFrequency=20}ngOnInit(){var e=this,i=localStorage.getItem("culturaIdleGameData");if((null==i||0===i.length)&&(i=localStorage.getItem("gameData")),null!=i){var r=LZString.decompressFromBase64(i),a=JSON.parse(r);null!=a&&(this.newGame=!1,this.globalService.globalVar=T0(en,a),this.loadStartup())}this.deploymentService.setDevMode();var s=this.deploymentService.devModeActive;(this.newGame||this.deploymentService.forceStartNewGame)&&this.globalService.initializeGlobalVariables(),s&&(this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.devModeInitialize(70,4)),this.versionControlService.updatePlayerVersion(),this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=Br(function*(f){e.gameCheckup(f),e.saveTime+=f;var v=e.saveFrequency;e.globalService.globalVar.userIsRacing&&(v=e.racingSaveFrequency),e.saveTime>=v&&(e.saveTime=0,e.saveGame());performance.now()});return function(f){return u.apply(this,arguments)}}()),this.gameLoopService.Update()}gameCheckup(e){if(this.handleMonthlyMangoTimer(),null!=this.globalService.globalVar.animals){this.globalService.globalVar.animals.filter(a=>a.isAvailable).forEach(a=>{a.canTrain=this.lookupService.canAnimalTrain(a)});var i=this.globalService.globalVar.animals.filter(a=>a.isAvailable&&null!=a.currentTraining&&a.canTrain);i.length>0&&i.forEach(a=>{var o;if(null!=a.currentTraining&&a.canTrain)for(a.currentTraining.timeTrained+=e,this.specializationService.handleAttractionRevenue(e,a),this.specializationService.handleTrainingFacilityImprovementsIncreases(e,a);null!==a.currentTraining&&a.currentTraining.timeTrained>=a.currentTraining.timeToComplete;){var s=this.globalService.globalVar.barns.find(u=>u.barnNumber===a.associatedBarnNumber),l=0;null!=s&&s.barnUpgrades.specialization===$t.BreedingGrounds&&(l=s.barnUpgrades.specializationLevel),null!=s&&s.barnUpgrades.specialization===$t.ResearchCenter?this.specializationService.handleResearchCenterStatIncrease(a,s):a.increaseStatsFromCurrentTraining(),this.globalService.calculateAnimalRacingStats(a);var c=this.lookupService.getTrainingBreedGaugeIncrease(l,a);this.globalService.IncreaseAnimalBreedGauge(a,c),a.currentTraining.timeTrained-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining<=0&&(a.currentTraining=null),null!=a.queuedTraining&&(null!==a.currentTraining&&a.currentTraining.trainingTimeRemaining>0&&(a.queuedTraining.timeTrained+=null===(o=a.currentTraining)||void 0===o?void 0:o.timeTrained),a.currentTraining=a.queuedTraining,a.queuedTraining=null)}});var r=this.globalService.globalVar.incubator;null!=r&&null!=r.assignedAnimal&&null!=r.assignedTrait&&(r.timeTrained+=e,r.timeTrained>=r.timeToComplete&&(r.assignedAnimal.trait=r.assignedTrait,this.globalService.calculateAnimalRacingStats(r.assignedAnimal),r.assignedAnimal.canTrain=!0,r.timeTrained=0,r.assignedAnimal=null,r.assignedTrait=null)),this.handleScrimmageTimer(e),this.handleFreeRaceTimer(e),this.grandPrixLogicService.handleGrandPrix(e)}}handleMonthlyMangoTimer(){var e=new Date(this.globalService.globalVar.lastTimeStamp).getMonth();(new Date).getMonth()!==e&&(this.globalService.globalVar.monthlyMangoesPurchased=0)}handleScrimmageTimer(e){this.globalService.globalVar.animals.forEach(i=>{i.scrimmageEnergyTimer>0&&(i.scrimmageEnergyTimer-=e)})}handleFreeRaceTimer(e){if(this.globalService.globalVar.freeRaceTimePeriodCounter+=e,!this.globalService.globalVar.userIsRacing){var i=300,r=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==r&&(i=r.value);var a=3600,o=this.globalService.globalVar.modifiers.find(s=>"autoFreeRacesMaxIdleTimePeriodModifier"===s.text);void 0!==o&&(a=o.value),this.globalService.globalVar.freeRaceTimePeriodCounter>=i&&a>0&&(this.globalService.globalVar.freeRaceTimePeriodCounter>a&&(this.globalService.globalVar.freeRaceTimePeriodCounter=a),this.globalService.globalVar.freeRaceTimePeriodCounter-=i,a-=i,this.globalService.globalVar.freeRaceCounter=0,this.globalService.globalVar.autoFreeRaceCounter=0,this.handleAutoFreeRace(e))}}handleAutoFreeRace(e){var i=this.lookupService.getResourceByName("Team Manager");if(null==i&&(i=0),0!==i&&this.globalService.globalVar.animalDecks.some(f=>f.autoRunFreeRace)){var r=this.globalService.globalVar.animalDecks.find(f=>f.autoRunFreeRace);if(null!=r)for(var a=i-this.globalService.globalVar.autoFreeRaceCounter,o=this.lookupService.getTotalFreeRacesPerPeriod(),s=0;s<a;s++){if(this.globalService.globalVar.freeRaceCounter>=o)return;this.globalService.globalVar.autoFreeRaceCounter+=1,this.globalService.globalVar.freeRaceCounter+=1;var l=this.globalService.generateFreeRace(),c=!0;l.raceLegs.forEach(f=>{(null==r?void 0:r.selectedAnimals.some(v=>v.raceCourseType===f.courseType))||(c=!1)}),c&&this.raceLogicService.runRace(l,!0)}}}saveGame(){if("undefined"!=typeof Worker){const r=new Worker(Q.tu(new URL(Q.p+Q.u(151),Q.b)));r.onmessage=({data:a})=>{localStorage.setItem("culturaIdleGameData",a),r.terminate()},r.postMessage(this.globalService.globalVar)}else{var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);localStorage.setItem("culturaIdleGameData",i)}}loadStartup(){var e=this.globalService.globalVar.settings.get("theme");null!=e&&this.themeService.setActiveTheme(e)}}return t.\u0275fac=function(e){return new(e||t)(V(It),V(An),V(Ti),V(R0),V(Xs),V(zf),V(QR),V(D0),V(Rn),V(c4))},t.\u0275cmp=Tt({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"grayTheme"]],template:function(e,i){1&e&&(h(0,"div",0),D(1,"app-main"),d(),D(2,"router-outlet"))},directives:[CW,o0],styles:[""]}),t})(),TW=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Xi({type:t,bootstrap:[SW]}),t.\u0275inj=Hi({providers:[It,Xs],imports:[[bN,z5,pU,Yr,NT,AB]]}),t})();(function YO(){jC=!1})(),vN().bootstrapModule(TW).catch(t=>console.error(t))},7466:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(8319),Q(9493),Q(7865),Q(3057),function(){var $=K,he=$.lib.BlockCipher,_e=$.algo,re=[],le=[],E=[],P=[],U=[],O=[],N=[],I=[],H=[],W=[];!function(){for(var z=[],Y=0;Y<256;Y++)z[Y]=Y<128?Y<<1:Y<<1^283;var be=0,oe=0;for(Y=0;Y<256;Y++){var pe=oe^oe<<1^oe<<2^oe<<3^oe<<4;re[be]=pe=pe>>>8^255&pe^99,le[pe]=be;var Le,me=z[be],Me=z[me],Re=z[Me];E[be]=(Le=257*z[pe]^16843008*pe)<<24|Le>>>8,P[be]=Le<<16|Le>>>16,U[be]=Le<<8|Le>>>24,O[be]=Le,N[pe]=(Le=16843009*Re^65537*Me^257*me^16843008*be)<<24|Le>>>8,I[pe]=Le<<16|Le>>>16,H[pe]=Le<<8|Le>>>24,W[pe]=Le,be?(be=me^z[z[z[Re^me]]],oe^=z[z[oe]]):be=oe=1}}();var fe=[0,1,2,4,8,16,32,64,128,27,54],ce=_e.AES=he.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var Y=this._keyPriorReset=this._key,be=Y.words,oe=Y.sigBytes/4,me=4*((this._nRounds=oe+6)+1),Me=this._keySchedule=[],Re=0;Re<me;Re++)Re<oe?Me[Re]=be[Re]:(z=Me[Re-1],Re%oe?oe>6&&Re%oe==4&&(z=re[z>>>24]<<24|re[z>>>16&255]<<16|re[z>>>8&255]<<8|re[255&z]):(z=re[(z=z<<8|z>>>24)>>>24]<<24|re[z>>>16&255]<<16|re[z>>>8&255]<<8|re[255&z],z^=fe[Re/oe|0]<<24),Me[Re]=Me[Re-oe]^z);for(var Le=this._invKeySchedule=[],Ye=0;Ye<me;Ye++){if(Re=me-Ye,Ye%4)var z=Me[Re];else z=Me[Re-4];Le[Ye]=Ye<4||Re<=4?z:N[re[z>>>24]]^I[re[z>>>16&255]]^H[re[z>>>8&255]]^W[re[255&z]]}}},encryptBlock:function(z,Y){this._doCryptBlock(z,Y,this._keySchedule,E,P,U,O,re)},decryptBlock:function(z,Y){var be=z[Y+1];z[Y+1]=z[Y+3],z[Y+3]=be,this._doCryptBlock(z,Y,this._invKeySchedule,N,I,H,W,le),be=z[Y+1],z[Y+1]=z[Y+3],z[Y+3]=be},_doCryptBlock:function(z,Y,be,oe,pe,me,Me,Re){for(var Le=this._nRounds,Ye=z[Y]^be[0],we=z[Y+1]^be[1],Ee=z[Y+2]^be[2],je=z[Y+3]^be[3],Ne=4,Ct=1;Ct<Le;Ct++){var $e=oe[Ye>>>24]^pe[we>>>16&255]^me[Ee>>>8&255]^Me[255&je]^be[Ne++],Zt=oe[we>>>24]^pe[Ee>>>16&255]^me[je>>>8&255]^Me[255&Ye]^be[Ne++],pi=oe[Ee>>>24]^pe[je>>>16&255]^me[Ye>>>8&255]^Me[255&we]^be[Ne++],xe=oe[je>>>24]^pe[Ye>>>16&255]^me[we>>>8&255]^Me[255&Ee]^be[Ne++];Ye=$e,we=Zt,Ee=pi,je=xe}$e=(Re[Ye>>>24]<<24|Re[we>>>16&255]<<16|Re[Ee>>>8&255]<<8|Re[255&je])^be[Ne++],Zt=(Re[we>>>24]<<24|Re[Ee>>>16&255]<<16|Re[je>>>8&255]<<8|Re[255&Ye])^be[Ne++],pi=(Re[Ee>>>24]<<24|Re[je>>>16&255]<<16|Re[Ye>>>8&255]<<8|Re[255&we])^be[Ne++],xe=(Re[je>>>24]<<24|Re[Ye>>>16&255]<<16|Re[we>>>8&255]<<8|Re[255&Ee])^be[Ne++],z[Y]=$e,z[Y+1]=Zt,z[Y+2]=pi,z[Y+3]=xe},keySize:8});$.AES=he._createHelper(ce)}(),K.AES)},3057:function(De,Ae,Q){var ae,he,_e,re,le,E,U,N,I,W,fe,ce,Y,oe,me,Me,Le,Ye,K;De.exports=(K=Q(7585),Q(7865),void(K.lib.Cipher||(ae=K,he=ae.lib,_e=he.Base,re=he.WordArray,le=he.BufferedBlockAlgorithm,E=ae.enc,U=E.Base64,N=ae.algo.EvpKDF,I=he.Cipher=le.extend({cfg:_e.extend(),createEncryptor:function(we,Ee){return this.create(this._ENC_XFORM_MODE,we,Ee)},createDecryptor:function(we,Ee){return this.create(this._DEC_XFORM_MODE,we,Ee)},init:function(we,Ee,je){this.cfg=this.cfg.extend(je),this._xformMode=we,this._key=Ee,this.reset()},reset:function(){le.reset.call(this),this._doReset()},process:function(we){return this._append(we),this._process()},finalize:function(we){return we&&this._append(we),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function we(Ee){return"string"==typeof Ee?Ye:Me}return function(Ee){return{encrypt:function(je,Ne,Ct){return we(Ne).encrypt(Ee,je,Ne,Ct)},decrypt:function(je,Ne,Ct){return we(Ne).decrypt(Ee,je,Ne,Ct)}}}}()}),he.StreamCipher=I.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),W=ae.mode={},fe=he.BlockCipherMode=_e.extend({createEncryptor:function(we,Ee){return this.Encryptor.create(we,Ee)},createDecryptor:function(we,Ee){return this.Decryptor.create(we,Ee)},init:function(we,Ee){this._cipher=we,this._iv=Ee}}),ce=W.CBC=function(){var we=fe.extend();function Ee(je,Ne,Ct){var $e,Zt=this._iv;Zt?($e=Zt,this._iv=undefined):$e=this._prevBlock;for(var pi=0;pi<Ct;pi++)je[Ne+pi]^=$e[pi]}return we.Encryptor=we.extend({processBlock:function(je,Ne){var Ct=this._cipher,$e=Ct.blockSize;Ee.call(this,je,Ne,$e),Ct.encryptBlock(je,Ne),this._prevBlock=je.slice(Ne,Ne+$e)}}),we.Decryptor=we.extend({processBlock:function(je,Ne){var Ct=this._cipher,$e=Ct.blockSize,Zt=je.slice(Ne,Ne+$e);Ct.decryptBlock(je,Ne),Ee.call(this,je,Ne,$e),this._prevBlock=Zt}}),we}(),Y=(ae.pad={}).Pkcs7={pad:function(we,Ee){for(var je=4*Ee,Ne=je-we.sigBytes%je,Ct=Ne<<24|Ne<<16|Ne<<8|Ne,$e=[],Zt=0;Zt<Ne;Zt+=4)$e.push(Ct);var pi=re.create($e,Ne);we.concat(pi)},unpad:function(we){we.sigBytes-=255&we.words[we.sigBytes-1>>>2]}},he.BlockCipher=I.extend({cfg:I.cfg.extend({mode:ce,padding:Y}),reset:function(){var we;I.reset.call(this);var Ee=this.cfg,je=Ee.iv,Ne=Ee.mode;this._xformMode==this._ENC_XFORM_MODE?we=Ne.createEncryptor:(we=Ne.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==we?this._mode.init(this,je&&je.words):(this._mode=we.call(Ne,this,je&&je.words),this._mode.__creator=we)},_doProcessBlock:function(we,Ee){this._mode.processBlock(we,Ee)},_doFinalize:function(){var we,Ee=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Ee.pad(this._data,this.blockSize),we=this._process(!0)):(we=this._process(!0),Ee.unpad(we)),we},blockSize:4}),oe=he.CipherParams=_e.extend({init:function(we){this.mixIn(we)},toString:function(we){return(we||this.formatter).stringify(this)}}),me=(ae.format={}).OpenSSL={stringify:function(we){var je=we.ciphertext,Ne=we.salt;return(Ne?re.create([1398893684,1701076831]).concat(Ne).concat(je):je).toString(U)},parse:function(we){var Ee,je=U.parse(we),Ne=je.words;return 1398893684==Ne[0]&&1701076831==Ne[1]&&(Ee=re.create(Ne.slice(2,4)),Ne.splice(0,4),je.sigBytes-=16),oe.create({ciphertext:je,salt:Ee})}},Me=he.SerializableCipher=_e.extend({cfg:_e.extend({format:me}),encrypt:function(we,Ee,je,Ne){Ne=this.cfg.extend(Ne);var Ct=we.createEncryptor(je,Ne),$e=Ct.finalize(Ee),Zt=Ct.cfg;return oe.create({ciphertext:$e,key:je,iv:Zt.iv,algorithm:we,mode:Zt.mode,padding:Zt.padding,blockSize:we.blockSize,formatter:Ne.format})},decrypt:function(we,Ee,je,Ne){return Ne=this.cfg.extend(Ne),Ee=this._parse(Ee,Ne.format),we.createDecryptor(je,Ne).finalize(Ee.ciphertext)},_parse:function(we,Ee){return"string"==typeof we?Ee.parse(we,this):we}}),Le=(ae.kdf={}).OpenSSL={execute:function(we,Ee,je,Ne){Ne||(Ne=re.random(8));var Ct=N.create({keySize:Ee+je}).compute(we,Ne),$e=re.create(Ct.words.slice(Ee),4*je);return Ct.sigBytes=4*Ee,oe.create({key:Ct,iv:$e,salt:Ne})}},Ye=he.PasswordBasedCipher=Me.extend({cfg:Me.cfg.extend({kdf:Le}),encrypt:function(we,Ee,je,Ne){var Ct=(Ne=this.cfg.extend(Ne)).kdf.execute(je,we.keySize,we.ivSize);Ne.iv=Ct.iv;var $e=Me.encrypt.call(this,we,Ee,Ct.key,Ne);return $e.mixIn(Ct),$e},decrypt:function(we,Ee,je,Ne){Ne=this.cfg.extend(Ne),Ee=this._parse(Ee,Ne.format);var Ct=Ne.kdf.execute(je,we.keySize,we.ivSize,Ee.salt);return Ne.iv=Ct.iv,Me.decrypt.call(this,we,Ee,Ct.key,Ne)}}))))},7585:function(De,Ae,Q){var K;De.exports=(K=K||function($,ae){var he;if("undefined"!=typeof window&&window.crypto&&(he=window.crypto),"undefined"!=typeof self&&self.crypto&&(he=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(he=globalThis.crypto),!he&&"undefined"!=typeof window&&window.msCrypto&&(he=window.msCrypto),!he&&"undefined"!=typeof global&&global.crypto&&(he=global.crypto),!he)try{he=Q(2480)}catch(z){}var _e=function(){if(he){if("function"==typeof he.getRandomValues)try{return he.getRandomValues(new Uint32Array(1))[0]}catch(z){}if("function"==typeof he.randomBytes)try{return he.randomBytes(4).readInt32LE()}catch(z){}}throw new Error("Native crypto module could not be used to get secure random number.")},re=Object.create||function(){function z(){}return function(Y){var be;return z.prototype=Y,be=new z,z.prototype=null,be}}(),le={},E=le.lib={},P=E.Base={extend:function(z){var Y=re(this);return z&&Y.mixIn(z),(!Y.hasOwnProperty("init")||this.init===Y.init)&&(Y.init=function(){Y.$super.init.apply(this,arguments)}),Y.init.prototype=Y,Y.$super=this,Y},create:function(){var z=this.extend();return z.init.apply(z,arguments),z},init:function(){},mixIn:function(z){for(var Y in z)z.hasOwnProperty(Y)&&(this[Y]=z[Y]);z.hasOwnProperty("toString")&&(this.toString=z.toString)},clone:function(){return this.init.prototype.extend(this)}},U=E.WordArray=P.extend({init:function(z,Y){z=this.words=z||[],this.sigBytes=null!=Y?Y:4*z.length},toString:function(z){return(z||N).stringify(this)},concat:function(z){var Y=this.words,be=z.words,oe=this.sigBytes,pe=z.sigBytes;if(this.clamp(),oe%4)for(var me=0;me<pe;me++)Y[oe+me>>>2]|=(be[me>>>2]>>>24-me%4*8&255)<<24-(oe+me)%4*8;else for(var Re=0;Re<pe;Re+=4)Y[oe+Re>>>2]=be[Re>>>2];return this.sigBytes+=pe,this},clamp:function(){var z=this.words,Y=this.sigBytes;z[Y>>>2]&=4294967295<<32-Y%4*8,z.length=$.ceil(Y/4)},clone:function(){var z=P.clone.call(this);return z.words=this.words.slice(0),z},random:function(z){for(var Y=[],be=0;be<z;be+=4)Y.push(_e());return new U.init(Y,z)}}),O=le.enc={},N=O.Hex={stringify:function(z){for(var Y=z.words,be=z.sigBytes,oe=[],pe=0;pe<be;pe++){var me=Y[pe>>>2]>>>24-pe%4*8&255;oe.push((me>>>4).toString(16)),oe.push((15&me).toString(16))}return oe.join("")},parse:function(z){for(var Y=z.length,be=[],oe=0;oe<Y;oe+=2)be[oe>>>3]|=parseInt(z.substr(oe,2),16)<<24-oe%8*4;return new U.init(be,Y/2)}},I=O.Latin1={stringify:function(z){for(var Y=z.words,be=z.sigBytes,oe=[],pe=0;pe<be;pe++)oe.push(String.fromCharCode(Y[pe>>>2]>>>24-pe%4*8&255));return oe.join("")},parse:function(z){for(var Y=z.length,be=[],oe=0;oe<Y;oe++)be[oe>>>2]|=(255&z.charCodeAt(oe))<<24-oe%4*8;return new U.init(be,Y)}},H=O.Utf8={stringify:function(z){try{return decodeURIComponent(escape(I.stringify(z)))}catch(Y){throw new Error("Malformed UTF-8 data")}},parse:function(z){return I.parse(unescape(encodeURIComponent(z)))}},W=E.BufferedBlockAlgorithm=P.extend({reset:function(){this._data=new U.init,this._nDataBytes=0},_append:function(z){"string"==typeof z&&(z=H.parse(z)),this._data.concat(z),this._nDataBytes+=z.sigBytes},_process:function(z){var Y,be=this._data,oe=be.words,pe=be.sigBytes,me=this.blockSize,Re=pe/(4*me),Le=(Re=z?$.ceil(Re):$.max((0|Re)-this._minBufferSize,0))*me,Ye=$.min(4*Le,pe);if(Le){for(var we=0;we<Le;we+=me)this._doProcessBlock(oe,we);Y=oe.splice(0,Le),be.sigBytes-=Ye}return new U.init(Y,Ye)},clone:function(){var z=P.clone.call(this);return z._data=this._data.clone(),z},_minBufferSize:0}),ce=(E.Hasher=W.extend({cfg:P.extend(),init:function(z){this.cfg=this.cfg.extend(z),this.reset()},reset:function(){W.reset.call(this),this._doReset()},update:function(z){return this._append(z),this._process(),this},finalize:function(z){return z&&this._append(z),this._doFinalize()},blockSize:16,_createHelper:function(z){return function(Y,be){return new z.init(be).finalize(Y)}},_createHmacHelper:function(z){return function(Y,be){return new ce.HMAC.init(z,be).finalize(Y)}}}),le.algo={});return le}(Math),K)},8319:function(De,Ae,Q){var K,he;De.exports=(K=Q(7585),he=K.lib.WordArray,K.enc.Base64={stringify:function(E){var P=E.words,U=E.sigBytes,O=this._map;E.clamp();for(var N=[],I=0;I<U;I+=3)for(var ce=(P[I>>>2]>>>24-I%4*8&255)<<16|(P[I+1>>>2]>>>24-(I+1)%4*8&255)<<8|P[I+2>>>2]>>>24-(I+2)%4*8&255,z=0;z<4&&I+.75*z<U;z++)N.push(O.charAt(ce>>>6*(3-z)&63));var Y=O.charAt(64);if(Y)for(;N.length%4;)N.push(Y);return N.join("")},parse:function(E){var P=E.length,U=this._map,O=this._reverseMap;if(!O){O=this._reverseMap=[];for(var N=0;N<U.length;N++)O[U.charCodeAt(N)]=N}var I=U.charAt(64);if(I){var H=E.indexOf(I);-1!==H&&(P=H)}return function le(E,P,U){for(var O=[],N=0,I=0;I<P;I++)if(I%4){var H=U[E.charCodeAt(I-1)]<<I%4*2,W=U[E.charCodeAt(I)]>>>6-I%4*2;O[N>>>2]|=(H|W)<<24-N%4*8,N++}return he.create(O,N)}(E,P,O)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},K.enc.Base64)},4410:function(De,Ae,Q){var K,he;De.exports=(K=Q(7585),he=K.lib.WordArray,K.enc.Base64url={stringify:function(E,P=!0){var U=E.words,O=E.sigBytes,N=P?this._safe_map:this._map;E.clamp();for(var I=[],H=0;H<O;H+=3)for(var z=(U[H>>>2]>>>24-H%4*8&255)<<16|(U[H+1>>>2]>>>24-(H+1)%4*8&255)<<8|U[H+2>>>2]>>>24-(H+2)%4*8&255,Y=0;Y<4&&H+.75*Y<O;Y++)I.push(N.charAt(z>>>6*(3-Y)&63));var be=N.charAt(64);if(be)for(;I.length%4;)I.push(be);return I.join("")},parse:function(E,P=!0){var U=E.length,O=P?this._safe_map:this._map,N=this._reverseMap;if(!N){N=this._reverseMap=[];for(var I=0;I<O.length;I++)N[O.charCodeAt(I)]=I}var H=O.charAt(64);if(H){var W=E.indexOf(H);-1!==W&&(U=W)}return function le(E,P,U){for(var O=[],N=0,I=0;I<P;I++)if(I%4){var H=U[E.charCodeAt(I-1)]<<I%4*2,W=U[E.charCodeAt(I)]>>>6-I%4*2;O[N>>>2]|=(H|W)<<24-N%4*8,N++}return he.create(O,N)}(E,U,N)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},K.enc.Base64url)},9012:function(De,Ae,Q){var K;De.exports=(K=Q(7585),function(){var he=K.lib.WordArray,_e=K.enc;function le(E){return E<<8&4278255360|E>>>8&16711935}_e.Utf16=_e.Utf16BE={stringify:function(E){for(var P=E.words,U=E.sigBytes,O=[],N=0;N<U;N+=2)O.push(String.fromCharCode(P[N>>>2]>>>16-N%4*8&65535));return O.join("")},parse:function(E){for(var P=E.length,U=[],O=0;O<P;O++)U[O>>>1]|=E.charCodeAt(O)<<16-O%2*16;return he.create(U,2*P)}},_e.Utf16LE={stringify:function(E){for(var P=E.words,U=E.sigBytes,O=[],N=0;N<U;N+=2){var I=le(P[N>>>2]>>>16-N%4*8&65535);O.push(String.fromCharCode(I))}return O.join("")},parse:function(E){for(var P=E.length,U=[],O=0;O<P;O++)U[O>>>1]|=le(E.charCodeAt(O)<<16-O%2*16);return he.create(U,2*P)}}}(),K.enc.Utf16)},7865:function(De,Ae,Q){var $,ae,he,_e,re,E,K;De.exports=(K=Q(7585),Q(5162),Q(3764),_e=(ae=($=K).lib).WordArray,E=(re=$.algo).EvpKDF=(he=ae.Base).extend({cfg:he.extend({keySize:4,hasher:re.MD5,iterations:1}),init:function(P){this.cfg=this.cfg.extend(P)},compute:function(P,U){for(var O,N=this.cfg,I=N.hasher.create(),H=_e.create(),W=H.words,fe=N.keySize,ce=N.iterations;W.length<fe;){O&&I.update(O),O=I.update(P).finalize(U),I.reset();for(var z=1;z<ce;z++)O=I.finalize(O),I.reset();H.concat(O)}return H.sigBytes=4*fe,H}}),$.EvpKDF=function(P,U,O){return E.create(O).compute(P,U)},K.EvpKDF)},1847:function(De,Ae,Q){var K,_e,le;De.exports=(K=Q(7585),Q(3057),_e=K.lib.CipherParams,le=K.enc.Hex,K.format.Hex={stringify:function(U){return U.ciphertext.toString(le)},parse:function(U){var O=le.parse(U);return _e.create({ciphertext:O})}},K.format.Hex)},3764:function(De,Ae,Q){var K,re;De.exports=(K=Q(7585),re=K.enc.Utf8,void(K.algo.HMAC=K.lib.Base.extend({init:function(P,U){P=this._hasher=new P.init,"string"==typeof U&&(U=re.parse(U));var O=P.blockSize,N=4*O;U.sigBytes>N&&(U=P.finalize(U)),U.clamp();for(var I=this._oKey=U.clone(),H=this._iKey=U.clone(),W=I.words,fe=H.words,ce=0;ce<O;ce++)W[ce]^=1549556828,fe[ce]^=909522486;I.sigBytes=H.sigBytes=N,this.reset()},reset:function(){var P=this._hasher;P.reset(),P.update(this._iKey)},update:function(P){return this._hasher.update(P),this},finalize:function(P){var U=this._hasher,O=U.finalize(P);return U.reset(),U.finalize(this._oKey.clone().concat(O))}})))},7206:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(401),Q(7412),Q(9012),Q(8319),Q(4410),Q(9493),Q(5162),Q(1817),Q(8769),Q(3351),Q(6787),Q(1971),Q(4973),Q(3764),Q(8812),Q(7865),Q(3057),Q(4424),Q(6635),Q(3592),Q(9354),Q(7934),Q(4413),Q(4630),Q(187),Q(1691),Q(3237),Q(1847),Q(7466),Q(7243),Q(486),Q(8182),Q(3544),K)},7412:function(De,Ae,Q){var K;De.exports=(K=Q(7585),function(){if("function"==typeof ArrayBuffer){var he=K.lib.WordArray,_e=he.init,re=he.init=function(le){if(le instanceof ArrayBuffer&&(le=new Uint8Array(le)),(le instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&le instanceof Uint8ClampedArray||le instanceof Int16Array||le instanceof Uint16Array||le instanceof Int32Array||le instanceof Uint32Array||le instanceof Float32Array||le instanceof Float64Array)&&(le=new Uint8Array(le.buffer,le.byteOffset,le.byteLength)),le instanceof Uint8Array){for(var E=le.byteLength,P=[],U=0;U<E;U++)P[U>>>2]|=le[U]<<24-U%4*8;_e.call(this,P,E)}else _e.apply(this,arguments)};re.prototype=he}}(),K.lib.WordArray)},9493:function(De,Ae,Q){var K;De.exports=(K=Q(7585),function($){var ae=K,he=ae.lib,_e=he.WordArray,re=he.Hasher,le=ae.algo,E=[];!function(){for(var H=0;H<64;H++)E[H]=4294967296*$.abs($.sin(H+1))|0}();var P=le.MD5=re.extend({_doReset:function(){this._hash=new _e.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(H,W){for(var fe=0;fe<16;fe++){var ce=W+fe,z=H[ce];H[ce]=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8)}var Y=this._hash.words,be=H[W+0],oe=H[W+1],pe=H[W+2],me=H[W+3],Me=H[W+4],Re=H[W+5],Le=H[W+6],Ye=H[W+7],we=H[W+8],Ee=H[W+9],je=H[W+10],Ne=H[W+11],Ct=H[W+12],$e=H[W+13],Zt=H[W+14],pi=H[W+15],xe=Y[0],Fe=Y[1],Te=Y[2],Ie=Y[3];xe=U(xe,Fe,Te,Ie,be,7,E[0]),Ie=U(Ie,xe,Fe,Te,oe,12,E[1]),Te=U(Te,Ie,xe,Fe,pe,17,E[2]),Fe=U(Fe,Te,Ie,xe,me,22,E[3]),xe=U(xe,Fe,Te,Ie,Me,7,E[4]),Ie=U(Ie,xe,Fe,Te,Re,12,E[5]),Te=U(Te,Ie,xe,Fe,Le,17,E[6]),Fe=U(Fe,Te,Ie,xe,Ye,22,E[7]),xe=U(xe,Fe,Te,Ie,we,7,E[8]),Ie=U(Ie,xe,Fe,Te,Ee,12,E[9]),Te=U(Te,Ie,xe,Fe,je,17,E[10]),Fe=U(Fe,Te,Ie,xe,Ne,22,E[11]),xe=U(xe,Fe,Te,Ie,Ct,7,E[12]),Ie=U(Ie,xe,Fe,Te,$e,12,E[13]),Te=U(Te,Ie,xe,Fe,Zt,17,E[14]),xe=O(xe,Fe=U(Fe,Te,Ie,xe,pi,22,E[15]),Te,Ie,oe,5,E[16]),Ie=O(Ie,xe,Fe,Te,Le,9,E[17]),Te=O(Te,Ie,xe,Fe,Ne,14,E[18]),Fe=O(Fe,Te,Ie,xe,be,20,E[19]),xe=O(xe,Fe,Te,Ie,Re,5,E[20]),Ie=O(Ie,xe,Fe,Te,je,9,E[21]),Te=O(Te,Ie,xe,Fe,pi,14,E[22]),Fe=O(Fe,Te,Ie,xe,Me,20,E[23]),xe=O(xe,Fe,Te,Ie,Ee,5,E[24]),Ie=O(Ie,xe,Fe,Te,Zt,9,E[25]),Te=O(Te,Ie,xe,Fe,me,14,E[26]),Fe=O(Fe,Te,Ie,xe,we,20,E[27]),xe=O(xe,Fe,Te,Ie,$e,5,E[28]),Ie=O(Ie,xe,Fe,Te,pe,9,E[29]),Te=O(Te,Ie,xe,Fe,Ye,14,E[30]),xe=N(xe,Fe=O(Fe,Te,Ie,xe,Ct,20,E[31]),Te,Ie,Re,4,E[32]),Ie=N(Ie,xe,Fe,Te,we,11,E[33]),Te=N(Te,Ie,xe,Fe,Ne,16,E[34]),Fe=N(Fe,Te,Ie,xe,Zt,23,E[35]),xe=N(xe,Fe,Te,Ie,oe,4,E[36]),Ie=N(Ie,xe,Fe,Te,Me,11,E[37]),Te=N(Te,Ie,xe,Fe,Ye,16,E[38]),Fe=N(Fe,Te,Ie,xe,je,23,E[39]),xe=N(xe,Fe,Te,Ie,$e,4,E[40]),Ie=N(Ie,xe,Fe,Te,be,11,E[41]),Te=N(Te,Ie,xe,Fe,me,16,E[42]),Fe=N(Fe,Te,Ie,xe,Le,23,E[43]),xe=N(xe,Fe,Te,Ie,Ee,4,E[44]),Ie=N(Ie,xe,Fe,Te,Ct,11,E[45]),Te=N(Te,Ie,xe,Fe,pi,16,E[46]),xe=I(xe,Fe=N(Fe,Te,Ie,xe,pe,23,E[47]),Te,Ie,be,6,E[48]),Ie=I(Ie,xe,Fe,Te,Ye,10,E[49]),Te=I(Te,Ie,xe,Fe,Zt,15,E[50]),Fe=I(Fe,Te,Ie,xe,Re,21,E[51]),xe=I(xe,Fe,Te,Ie,Ct,6,E[52]),Ie=I(Ie,xe,Fe,Te,me,10,E[53]),Te=I(Te,Ie,xe,Fe,je,15,E[54]),Fe=I(Fe,Te,Ie,xe,oe,21,E[55]),xe=I(xe,Fe,Te,Ie,we,6,E[56]),Ie=I(Ie,xe,Fe,Te,pi,10,E[57]),Te=I(Te,Ie,xe,Fe,Le,15,E[58]),Fe=I(Fe,Te,Ie,xe,$e,21,E[59]),xe=I(xe,Fe,Te,Ie,Me,6,E[60]),Ie=I(Ie,xe,Fe,Te,Ne,10,E[61]),Te=I(Te,Ie,xe,Fe,pe,15,E[62]),Fe=I(Fe,Te,Ie,xe,Ee,21,E[63]),Y[0]=Y[0]+xe|0,Y[1]=Y[1]+Fe|0,Y[2]=Y[2]+Te|0,Y[3]=Y[3]+Ie|0},_doFinalize:function(){var H=this._data,W=H.words,fe=8*this._nDataBytes,ce=8*H.sigBytes;W[ce>>>5]|=128<<24-ce%32;var z=$.floor(fe/4294967296),Y=fe;W[15+(ce+64>>>9<<4)]=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8),W[14+(ce+64>>>9<<4)]=16711935&(Y<<8|Y>>>24)|4278255360&(Y<<24|Y>>>8),H.sigBytes=4*(W.length+1),this._process();for(var be=this._hash,oe=be.words,pe=0;pe<4;pe++){var me=oe[pe];oe[pe]=16711935&(me<<8|me>>>24)|4278255360&(me<<24|me>>>8)}return be},clone:function(){var H=re.clone.call(this);return H._hash=this._hash.clone(),H}});function U(H,W,fe,ce,z,Y,be){var oe=H+(W&fe|~W&ce)+z+be;return(oe<<Y|oe>>>32-Y)+W}function O(H,W,fe,ce,z,Y,be){var oe=H+(W&ce|fe&~ce)+z+be;return(oe<<Y|oe>>>32-Y)+W}function N(H,W,fe,ce,z,Y,be){var oe=H+(W^fe^ce)+z+be;return(oe<<Y|oe>>>32-Y)+W}function I(H,W,fe,ce,z,Y,be){var oe=H+(fe^(W|~ce))+z+be;return(oe<<Y|oe>>>32-Y)+W}ae.MD5=re._createHelper(P),ae.HmacMD5=re._createHmacHelper(P)}(Math),K.MD5)},4424:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(3057),K.mode.CFB=function(){var $=K.lib.BlockCipherMode.extend();function ae(he,_e,re,le){var E,P=this._iv;P?(E=P.slice(0),this._iv=void 0):E=this._prevBlock,le.encryptBlock(E,0);for(var U=0;U<re;U++)he[_e+U]^=E[U]}return $.Encryptor=$.extend({processBlock:function(he,_e){var re=this._cipher,le=re.blockSize;ae.call(this,he,_e,le,re),this._prevBlock=he.slice(_e,_e+le)}}),$.Decryptor=$.extend({processBlock:function(he,_e){var re=this._cipher,le=re.blockSize,E=he.slice(_e,_e+le);ae.call(this,he,_e,le,re),this._prevBlock=E}}),$}(),K.mode.CFB)},3592:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(3057),K.mode.CTRGladman=function(){var $=K.lib.BlockCipherMode.extend();function ae(re){if(255==(re>>24&255)){var le=re>>16&255,E=re>>8&255,P=255&re;255===le?(le=0,255===E?(E=0,255===P?P=0:++P):++E):++le,re=0,re+=le<<16,re+=E<<8,re+=P}else re+=1<<24;return re}var _e=$.Encryptor=$.extend({processBlock:function(re,le){var E=this._cipher,P=E.blockSize,U=this._iv,O=this._counter;U&&(O=this._counter=U.slice(0),this._iv=void 0),function he(re){return 0===(re[0]=ae(re[0]))&&(re[1]=ae(re[1])),re}(O);var N=O.slice(0);E.encryptBlock(N,0);for(var I=0;I<P;I++)re[le+I]^=N[I]}});return $.Decryptor=_e,$}(),K.mode.CTRGladman)},6635:function(De,Ae,Q){var $,ae,K;De.exports=(K=Q(7585),Q(3057),K.mode.CTR=(ae=($=K.lib.BlockCipherMode.extend()).Encryptor=$.extend({processBlock:function(he,_e){var re=this._cipher,le=re.blockSize,E=this._iv,P=this._counter;E&&(P=this._counter=E.slice(0),this._iv=void 0);var U=P.slice(0);re.encryptBlock(U,0),P[le-1]=P[le-1]+1|0;for(var O=0;O<le;O++)he[_e+O]^=U[O]}}),$.Decryptor=ae,$),K.mode.CTR)},7934:function(De,Ae,Q){var $,K;De.exports=(K=Q(7585),Q(3057),K.mode.ECB=(($=K.lib.BlockCipherMode.extend()).Encryptor=$.extend({processBlock:function(ae,he){this._cipher.encryptBlock(ae,he)}}),$.Decryptor=$.extend({processBlock:function(ae,he){this._cipher.decryptBlock(ae,he)}}),$),K.mode.ECB)},9354:function(De,Ae,Q){var $,ae,K;De.exports=(K=Q(7585),Q(3057),K.mode.OFB=(ae=($=K.lib.BlockCipherMode.extend()).Encryptor=$.extend({processBlock:function(he,_e){var re=this._cipher,le=re.blockSize,E=this._iv,P=this._keystream;E&&(P=this._keystream=E.slice(0),this._iv=void 0),re.encryptBlock(P,0);for(var U=0;U<le;U++)he[_e+U]^=P[U]}}),$.Decryptor=ae,$),K.mode.OFB)},4413:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(3057),K.pad.AnsiX923={pad:function($,ae){var he=$.sigBytes,_e=4*ae,re=_e-he%_e,le=he+re-1;$.clamp(),$.words[le>>>2]|=re<<24-le%4*8,$.sigBytes+=re},unpad:function($){$.sigBytes-=255&$.words[$.sigBytes-1>>>2]}},K.pad.Ansix923)},4630:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(3057),K.pad.Iso10126={pad:function($,ae){var he=4*ae,_e=he-$.sigBytes%he;$.concat(K.lib.WordArray.random(_e-1)).concat(K.lib.WordArray.create([_e<<24],1))},unpad:function($){$.sigBytes-=255&$.words[$.sigBytes-1>>>2]}},K.pad.Iso10126)},187:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(3057),K.pad.Iso97971={pad:function($,ae){$.concat(K.lib.WordArray.create([2147483648],1)),K.pad.ZeroPadding.pad($,ae)},unpad:function($){K.pad.ZeroPadding.unpad($),$.sigBytes--}},K.pad.Iso97971)},3237:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(3057),K.pad.NoPadding={pad:function(){},unpad:function(){}},K.pad.NoPadding)},1691:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(3057),K.pad.ZeroPadding={pad:function($,ae){var he=4*ae;$.clamp(),$.sigBytes+=he-($.sigBytes%he||he)},unpad:function($){var ae=$.words,he=$.sigBytes-1;for(he=$.sigBytes-1;he>=0;he--)if(ae[he>>>2]>>>24-he%4*8&255){$.sigBytes=he+1;break}}},K.pad.ZeroPadding)},8812:function(De,Ae,Q){var $,ae,he,_e,re,E,P,K;De.exports=(K=Q(7585),Q(5162),Q(3764),_e=(ae=($=K).lib).WordArray,E=(re=$.algo).HMAC,P=re.PBKDF2=(he=ae.Base).extend({cfg:he.extend({keySize:4,hasher:re.SHA1,iterations:1}),init:function(U){this.cfg=this.cfg.extend(U)},compute:function(U,O){for(var N=this.cfg,I=E.create(N.hasher,U),H=_e.create(),W=_e.create([1]),fe=H.words,ce=W.words,z=N.keySize,Y=N.iterations;fe.length<z;){var be=I.update(O).finalize(W);I.reset();for(var oe=be.words,pe=oe.length,me=be,Me=1;Me<Y;Me++){me=I.finalize(me),I.reset();for(var Re=me.words,Le=0;Le<pe;Le++)oe[Le]^=Re[Le]}H.concat(be),ce[0]++}return H.sigBytes=4*z,H}}),$.PBKDF2=function(U,O,N){return P.create(N).compute(U,O)},K.PBKDF2)},3544:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(8319),Q(9493),Q(7865),Q(3057),function(){var $=K,he=$.lib.StreamCipher,re=[],le=[],E=[],P=$.algo.RabbitLegacy=he.extend({_doReset:function(){var O=this._key.words,N=this.cfg.iv,I=this._X=[O[0],O[3]<<16|O[2]>>>16,O[1],O[0]<<16|O[3]>>>16,O[2],O[1]<<16|O[0]>>>16,O[3],O[2]<<16|O[1]>>>16],H=this._C=[O[2]<<16|O[2]>>>16,4294901760&O[0]|65535&O[1],O[3]<<16|O[3]>>>16,4294901760&O[1]|65535&O[2],O[0]<<16|O[0]>>>16,4294901760&O[2]|65535&O[3],O[1]<<16|O[1]>>>16,4294901760&O[3]|65535&O[0]];this._b=0;for(var W=0;W<4;W++)U.call(this);for(W=0;W<8;W++)H[W]^=I[W+4&7];if(N){var fe=N.words,ce=fe[0],z=fe[1],Y=16711935&(ce<<8|ce>>>24)|4278255360&(ce<<24|ce>>>8),be=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8),oe=Y>>>16|4294901760&be,pe=be<<16|65535&Y;for(H[0]^=Y,H[1]^=oe,H[2]^=be,H[3]^=pe,H[4]^=Y,H[5]^=oe,H[6]^=be,H[7]^=pe,W=0;W<4;W++)U.call(this)}},_doProcessBlock:function(O,N){var I=this._X;U.call(this),re[0]=I[0]^I[5]>>>16^I[3]<<16,re[1]=I[2]^I[7]>>>16^I[5]<<16,re[2]=I[4]^I[1]>>>16^I[7]<<16,re[3]=I[6]^I[3]>>>16^I[1]<<16;for(var H=0;H<4;H++)re[H]=16711935&(re[H]<<8|re[H]>>>24)|4278255360&(re[H]<<24|re[H]>>>8),O[N+H]^=re[H]},blockSize:4,ivSize:2});function U(){for(var O=this._X,N=this._C,I=0;I<8;I++)le[I]=N[I];for(N[0]=N[0]+1295307597+this._b|0,N[1]=N[1]+3545052371+(N[0]>>>0<le[0]>>>0?1:0)|0,N[2]=N[2]+886263092+(N[1]>>>0<le[1]>>>0?1:0)|0,N[3]=N[3]+1295307597+(N[2]>>>0<le[2]>>>0?1:0)|0,N[4]=N[4]+3545052371+(N[3]>>>0<le[3]>>>0?1:0)|0,N[5]=N[5]+886263092+(N[4]>>>0<le[4]>>>0?1:0)|0,N[6]=N[6]+1295307597+(N[5]>>>0<le[5]>>>0?1:0)|0,N[7]=N[7]+3545052371+(N[6]>>>0<le[6]>>>0?1:0)|0,this._b=N[7]>>>0<le[7]>>>0?1:0,I=0;I<8;I++){var H=O[I]+N[I],W=65535&H,fe=H>>>16;E[I]=((W*W>>>17)+W*fe>>>15)+fe*fe^((4294901760&H)*H|0)+((65535&H)*H|0)}O[0]=E[0]+(E[7]<<16|E[7]>>>16)+(E[6]<<16|E[6]>>>16)|0,O[1]=E[1]+(E[0]<<8|E[0]>>>24)+E[7]|0,O[2]=E[2]+(E[1]<<16|E[1]>>>16)+(E[0]<<16|E[0]>>>16)|0,O[3]=E[3]+(E[2]<<8|E[2]>>>24)+E[1]|0,O[4]=E[4]+(E[3]<<16|E[3]>>>16)+(E[2]<<16|E[2]>>>16)|0,O[5]=E[5]+(E[4]<<8|E[4]>>>24)+E[3]|0,O[6]=E[6]+(E[5]<<16|E[5]>>>16)+(E[4]<<16|E[4]>>>16)|0,O[7]=E[7]+(E[6]<<8|E[6]>>>24)+E[5]|0}$.RabbitLegacy=he._createHelper(P)}(),K.RabbitLegacy)},8182:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(8319),Q(9493),Q(7865),Q(3057),function(){var $=K,he=$.lib.StreamCipher,re=[],le=[],E=[],P=$.algo.Rabbit=he.extend({_doReset:function(){for(var O=this._key.words,N=this.cfg.iv,I=0;I<4;I++)O[I]=16711935&(O[I]<<8|O[I]>>>24)|4278255360&(O[I]<<24|O[I]>>>8);var H=this._X=[O[0],O[3]<<16|O[2]>>>16,O[1],O[0]<<16|O[3]>>>16,O[2],O[1]<<16|O[0]>>>16,O[3],O[2]<<16|O[1]>>>16],W=this._C=[O[2]<<16|O[2]>>>16,4294901760&O[0]|65535&O[1],O[3]<<16|O[3]>>>16,4294901760&O[1]|65535&O[2],O[0]<<16|O[0]>>>16,4294901760&O[2]|65535&O[3],O[1]<<16|O[1]>>>16,4294901760&O[3]|65535&O[0]];for(this._b=0,I=0;I<4;I++)U.call(this);for(I=0;I<8;I++)W[I]^=H[I+4&7];if(N){var fe=N.words,ce=fe[0],z=fe[1],Y=16711935&(ce<<8|ce>>>24)|4278255360&(ce<<24|ce>>>8),be=16711935&(z<<8|z>>>24)|4278255360&(z<<24|z>>>8),oe=Y>>>16|4294901760&be,pe=be<<16|65535&Y;for(W[0]^=Y,W[1]^=oe,W[2]^=be,W[3]^=pe,W[4]^=Y,W[5]^=oe,W[6]^=be,W[7]^=pe,I=0;I<4;I++)U.call(this)}},_doProcessBlock:function(O,N){var I=this._X;U.call(this),re[0]=I[0]^I[5]>>>16^I[3]<<16,re[1]=I[2]^I[7]>>>16^I[5]<<16,re[2]=I[4]^I[1]>>>16^I[7]<<16,re[3]=I[6]^I[3]>>>16^I[1]<<16;for(var H=0;H<4;H++)re[H]=16711935&(re[H]<<8|re[H]>>>24)|4278255360&(re[H]<<24|re[H]>>>8),O[N+H]^=re[H]},blockSize:4,ivSize:2});function U(){for(var O=this._X,N=this._C,I=0;I<8;I++)le[I]=N[I];for(N[0]=N[0]+1295307597+this._b|0,N[1]=N[1]+3545052371+(N[0]>>>0<le[0]>>>0?1:0)|0,N[2]=N[2]+886263092+(N[1]>>>0<le[1]>>>0?1:0)|0,N[3]=N[3]+1295307597+(N[2]>>>0<le[2]>>>0?1:0)|0,N[4]=N[4]+3545052371+(N[3]>>>0<le[3]>>>0?1:0)|0,N[5]=N[5]+886263092+(N[4]>>>0<le[4]>>>0?1:0)|0,N[6]=N[6]+1295307597+(N[5]>>>0<le[5]>>>0?1:0)|0,N[7]=N[7]+3545052371+(N[6]>>>0<le[6]>>>0?1:0)|0,this._b=N[7]>>>0<le[7]>>>0?1:0,I=0;I<8;I++){var H=O[I]+N[I],W=65535&H,fe=H>>>16;E[I]=((W*W>>>17)+W*fe>>>15)+fe*fe^((4294901760&H)*H|0)+((65535&H)*H|0)}O[0]=E[0]+(E[7]<<16|E[7]>>>16)+(E[6]<<16|E[6]>>>16)|0,O[1]=E[1]+(E[0]<<8|E[0]>>>24)+E[7]|0,O[2]=E[2]+(E[1]<<16|E[1]>>>16)+(E[0]<<16|E[0]>>>16)|0,O[3]=E[3]+(E[2]<<8|E[2]>>>24)+E[1]|0,O[4]=E[4]+(E[3]<<16|E[3]>>>16)+(E[2]<<16|E[2]>>>16)|0,O[5]=E[5]+(E[4]<<8|E[4]>>>24)+E[3]|0,O[6]=E[6]+(E[5]<<16|E[5]>>>16)+(E[4]<<16|E[4]>>>16)|0,O[7]=E[7]+(E[6]<<8|E[6]>>>24)+E[5]|0}$.Rabbit=he._createHelper(P)}(),K.Rabbit)},486:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(8319),Q(9493),Q(7865),Q(3057),function(){var $=K,he=$.lib.StreamCipher,_e=$.algo,re=_e.RC4=he.extend({_doReset:function(){for(var P=this._key,U=P.words,O=P.sigBytes,N=this._S=[],I=0;I<256;I++)N[I]=I;I=0;for(var H=0;I<256;I++){var W=I%O,ce=N[I];N[I]=N[H=(H+N[I]+(U[W>>>2]>>>24-W%4*8&255))%256],N[H]=ce}this._i=this._j=0},_doProcessBlock:function(P,U){P[U]^=le.call(this)},keySize:8,ivSize:0});function le(){for(var P=this._S,U=this._i,O=this._j,N=0,I=0;I<4;I++){var H=P[U=(U+1)%256];P[U]=P[O=(O+P[U])%256],P[O]=H,N|=P[(P[U]+P[O])%256]<<24-8*I}return this._i=U,this._j=O,N}$.RC4=he._createHelper(re);var E=_e.RC4Drop=re.extend({cfg:re.cfg.extend({drop:192}),_doReset:function(){re._doReset.call(this);for(var P=this.cfg.drop;P>0;P--)le.call(this)}});$.RC4Drop=he._createHelper(E)}(),K.RC4)},4973:function(De,Ae,Q){var K;De.exports=(K=Q(7585),function($){var ae=K,he=ae.lib,_e=he.WordArray,re=he.Hasher,le=ae.algo,E=_e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),P=_e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),U=_e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),O=_e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),N=_e.create([0,1518500249,1859775393,2400959708,2840853838]),I=_e.create([1352829926,1548603684,1836072691,2053994217,0]),H=le.RIPEMD160=re.extend({_doReset:function(){this._hash=_e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(oe,pe){for(var me=0;me<16;me++){var Me=pe+me,Re=oe[Me];oe[Me]=16711935&(Re<<8|Re>>>24)|4278255360&(Re<<24|Re>>>8)}var $e,Zt,pi,xe,Fe,Te,Ie,rn,Nt,ni,ri,Le=this._hash.words,Ye=N.words,we=I.words,Ee=E.words,je=P.words,Ne=U.words,Ct=O.words;for(Te=$e=Le[0],Ie=Zt=Le[1],rn=pi=Le[2],Nt=xe=Le[3],ni=Fe=Le[4],me=0;me<80;me+=1)ri=$e+oe[pe+Ee[me]]|0,ri+=me<16?W(Zt,pi,xe)+Ye[0]:me<32?fe(Zt,pi,xe)+Ye[1]:me<48?ce(Zt,pi,xe)+Ye[2]:me<64?z(Zt,pi,xe)+Ye[3]:Y(Zt,pi,xe)+Ye[4],ri=(ri=be(ri|=0,Ne[me]))+Fe|0,$e=Fe,Fe=xe,xe=be(pi,10),pi=Zt,Zt=ri,ri=Te+oe[pe+je[me]]|0,ri+=me<16?Y(Ie,rn,Nt)+we[0]:me<32?z(Ie,rn,Nt)+we[1]:me<48?ce(Ie,rn,Nt)+we[2]:me<64?fe(Ie,rn,Nt)+we[3]:W(Ie,rn,Nt)+we[4],ri=(ri=be(ri|=0,Ct[me]))+ni|0,Te=ni,ni=Nt,Nt=be(rn,10),rn=Ie,Ie=ri;ri=Le[1]+pi+Nt|0,Le[1]=Le[2]+xe+ni|0,Le[2]=Le[3]+Fe+Te|0,Le[3]=Le[4]+$e+Ie|0,Le[4]=Le[0]+Zt+rn|0,Le[0]=ri},_doFinalize:function(){var oe=this._data,pe=oe.words,me=8*this._nDataBytes,Me=8*oe.sigBytes;pe[Me>>>5]|=128<<24-Me%32,pe[14+(Me+64>>>9<<4)]=16711935&(me<<8|me>>>24)|4278255360&(me<<24|me>>>8),oe.sigBytes=4*(pe.length+1),this._process();for(var Re=this._hash,Le=Re.words,Ye=0;Ye<5;Ye++){var we=Le[Ye];Le[Ye]=16711935&(we<<8|we>>>24)|4278255360&(we<<24|we>>>8)}return Re},clone:function(){var oe=re.clone.call(this);return oe._hash=this._hash.clone(),oe}});function W(oe,pe,me){return oe^pe^me}function fe(oe,pe,me){return oe&pe|~oe&me}function ce(oe,pe,me){return(oe|~pe)^me}function z(oe,pe,me){return oe&me|pe&~me}function Y(oe,pe,me){return oe^(pe|~me)}function be(oe,pe){return oe<<pe|oe>>>32-pe}ae.RIPEMD160=re._createHelper(H),ae.HmacRIPEMD160=re._createHmacHelper(H)}(Math),K.RIPEMD160)},5162:function(De,Ae,Q){var $,ae,he,_e,le,E,K;De.exports=(K=Q(7585),he=(ae=($=K).lib).WordArray,le=[],E=$.algo.SHA1=(_e=ae.Hasher).extend({_doReset:function(){this._hash=new he.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(P,U){for(var O=this._hash.words,N=O[0],I=O[1],H=O[2],W=O[3],fe=O[4],ce=0;ce<80;ce++){if(ce<16)le[ce]=0|P[U+ce];else{var z=le[ce-3]^le[ce-8]^le[ce-14]^le[ce-16];le[ce]=z<<1|z>>>31}var Y=(N<<5|N>>>27)+fe+le[ce];Y+=ce<20?1518500249+(I&H|~I&W):ce<40?1859775393+(I^H^W):ce<60?(I&H|I&W|H&W)-1894007588:(I^H^W)-899497514,fe=W,W=H,H=I<<30|I>>>2,I=N,N=Y}O[0]=O[0]+N|0,O[1]=O[1]+I|0,O[2]=O[2]+H|0,O[3]=O[3]+W|0,O[4]=O[4]+fe|0},_doFinalize:function(){var P=this._data,U=P.words,O=8*this._nDataBytes,N=8*P.sigBytes;return U[N>>>5]|=128<<24-N%32,U[14+(N+64>>>9<<4)]=Math.floor(O/4294967296),U[15+(N+64>>>9<<4)]=O,P.sigBytes=4*U.length,this._process(),this._hash},clone:function(){var P=_e.clone.call(this);return P._hash=this._hash.clone(),P}}),$.SHA1=_e._createHelper(E),$.HmacSHA1=_e._createHmacHelper(E),K.SHA1)},8769:function(De,Ae,Q){var $,he,_e,re,le,K;De.exports=(K=Q(7585),Q(1817),he=($=K).lib.WordArray,le=(_e=$.algo).SHA224=(re=_e.SHA256).extend({_doReset:function(){this._hash=new he.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var E=re._doFinalize.call(this);return E.sigBytes-=4,E}}),$.SHA224=re._createHelper(le),$.HmacSHA224=re._createHmacHelper(le),K.SHA224)},1817:function(De,Ae,Q){var K;De.exports=(K=Q(7585),function($){var ae=K,he=ae.lib,_e=he.WordArray,re=he.Hasher,le=ae.algo,E=[],P=[];!function(){function N(fe){for(var ce=$.sqrt(fe),z=2;z<=ce;z++)if(!(fe%z))return!1;return!0}function I(fe){return 4294967296*(fe-(0|fe))|0}for(var H=2,W=0;W<64;)N(H)&&(W<8&&(E[W]=I($.pow(H,.5))),P[W]=I($.pow(H,1/3)),W++),H++}();var U=[],O=le.SHA256=re.extend({_doReset:function(){this._hash=new _e.init(E.slice(0))},_doProcessBlock:function(N,I){for(var H=this._hash.words,W=H[0],fe=H[1],ce=H[2],z=H[3],Y=H[4],be=H[5],oe=H[6],pe=H[7],me=0;me<64;me++){if(me<16)U[me]=0|N[I+me];else{var Me=U[me-15],Le=U[me-2];U[me]=((Me<<25|Me>>>7)^(Me<<14|Me>>>18)^Me>>>3)+U[me-7]+((Le<<15|Le>>>17)^(Le<<13|Le>>>19)^Le>>>10)+U[me-16]}var Ee=W&fe^W&ce^fe&ce,Ct=pe+((Y<<26|Y>>>6)^(Y<<21|Y>>>11)^(Y<<7|Y>>>25))+(Y&be^~Y&oe)+P[me]+U[me];pe=oe,oe=be,be=Y,Y=z+Ct|0,z=ce,ce=fe,fe=W,W=Ct+(((W<<30|W>>>2)^(W<<19|W>>>13)^(W<<10|W>>>22))+Ee)|0}H[0]=H[0]+W|0,H[1]=H[1]+fe|0,H[2]=H[2]+ce|0,H[3]=H[3]+z|0,H[4]=H[4]+Y|0,H[5]=H[5]+be|0,H[6]=H[6]+oe|0,H[7]=H[7]+pe|0},_doFinalize:function(){var N=this._data,I=N.words,H=8*this._nDataBytes,W=8*N.sigBytes;return I[W>>>5]|=128<<24-W%32,I[14+(W+64>>>9<<4)]=$.floor(H/4294967296),I[15+(W+64>>>9<<4)]=H,N.sigBytes=4*I.length,this._process(),this._hash},clone:function(){var N=re.clone.call(this);return N._hash=this._hash.clone(),N}});ae.SHA256=re._createHelper(O),ae.HmacSHA256=re._createHmacHelper(O)}(Math),K.SHA256)},1971:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(401),function($){var ae=K,he=ae.lib,_e=he.WordArray,re=he.Hasher,E=ae.x64.Word,P=ae.algo,U=[],O=[],N=[];!function(){for(var W=1,fe=0,ce=0;ce<24;ce++){U[W+5*fe]=(ce+1)*(ce+2)/2%64;var Y=(2*W+3*fe)%5;W=fe%5,fe=Y}for(W=0;W<5;W++)for(fe=0;fe<5;fe++)O[W+5*fe]=fe+(2*W+3*fe)%5*5;for(var be=1,oe=0;oe<24;oe++){for(var pe=0,me=0,Me=0;Me<7;Me++){if(1&be){var Re=(1<<Me)-1;Re<32?me^=1<<Re:pe^=1<<Re-32}128&be?be=be<<1^113:be<<=1}N[oe]=E.create(pe,me)}}();var I=[];!function(){for(var W=0;W<25;W++)I[W]=E.create()}();var H=P.SHA3=re.extend({cfg:re.cfg.extend({outputLength:512}),_doReset:function(){for(var W=this._state=[],fe=0;fe<25;fe++)W[fe]=new E.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(W,fe){for(var ce=this._state,z=this.blockSize/2,Y=0;Y<z;Y++){var be=W[fe+2*Y],oe=W[fe+2*Y+1];be=16711935&(be<<8|be>>>24)|4278255360&(be<<24|be>>>8),(pe=ce[Y]).high^=oe=16711935&(oe<<8|oe>>>24)|4278255360&(oe<<24|oe>>>8),pe.low^=be}for(var me=0;me<24;me++){for(var Me=0;Me<5;Me++){for(var Re=0,Le=0,Ye=0;Ye<5;Ye++)Re^=(pe=ce[Me+5*Ye]).high,Le^=pe.low;var we=I[Me];we.high=Re,we.low=Le}for(Me=0;Me<5;Me++){var Ee=I[(Me+4)%5],je=I[(Me+1)%5],Ne=je.high,Ct=je.low;for(Re=Ee.high^(Ne<<1|Ct>>>31),Le=Ee.low^(Ct<<1|Ne>>>31),Ye=0;Ye<5;Ye++)(pe=ce[Me+5*Ye]).high^=Re,pe.low^=Le}for(var $e=1;$e<25;$e++){var Zt=(pe=ce[$e]).high,pi=pe.low,xe=U[$e];xe<32?(Re=Zt<<xe|pi>>>32-xe,Le=pi<<xe|Zt>>>32-xe):(Re=pi<<xe-32|Zt>>>64-xe,Le=Zt<<xe-32|pi>>>64-xe);var Fe=I[O[$e]];Fe.high=Re,Fe.low=Le}var Te=I[0],Ie=ce[0];for(Te.high=Ie.high,Te.low=Ie.low,Me=0;Me<5;Me++)for(Ye=0;Ye<5;Ye++){var rn=I[$e=Me+5*Ye],Nt=I[(Me+1)%5+5*Ye],ni=I[(Me+2)%5+5*Ye];(pe=ce[$e]).high=rn.high^~Nt.high&ni.high,pe.low=rn.low^~Nt.low&ni.low}var pe,ri=N[me];(pe=ce[0]).high^=ri.high,pe.low^=ri.low}},_doFinalize:function(){var W=this._data,fe=W.words,z=8*W.sigBytes,Y=32*this.blockSize;fe[z>>>5]|=1<<24-z%32,fe[($.ceil((z+1)/Y)*Y>>>5)-1]|=128,W.sigBytes=4*fe.length,this._process();for(var be=this._state,oe=this.cfg.outputLength/8,pe=oe/8,me=[],Me=0;Me<pe;Me++){var Re=be[Me],Le=Re.high,Ye=Re.low;Le=16711935&(Le<<8|Le>>>24)|4278255360&(Le<<24|Le>>>8),me.push(Ye=16711935&(Ye<<8|Ye>>>24)|4278255360&(Ye<<24|Ye>>>8)),me.push(Le)}return new _e.init(me,oe)},clone:function(){for(var W=re.clone.call(this),fe=W._state=this._state.slice(0),ce=0;ce<25;ce++)fe[ce]=fe[ce].clone();return W}});ae.SHA3=re._createHelper(H),ae.HmacSHA3=re._createHmacHelper(H)}(Math),K.SHA3)},6787:function(De,Ae,Q){var $,ae,he,_e,re,le,E,K;De.exports=(K=Q(7585),Q(401),Q(3351),he=(ae=($=K).x64).Word,_e=ae.WordArray,E=(re=$.algo).SHA384=(le=re.SHA512).extend({_doReset:function(){this._hash=new _e.init([new he.init(3418070365,3238371032),new he.init(1654270250,914150663),new he.init(2438529370,812702999),new he.init(355462360,4144912697),new he.init(1731405415,4290775857),new he.init(2394180231,1750603025),new he.init(3675008525,1694076839),new he.init(1203062813,3204075428)])},_doFinalize:function(){var P=le._doFinalize.call(this);return P.sigBytes-=16,P}}),$.SHA384=le._createHelper(E),$.HmacSHA384=le._createHmacHelper(E),K.SHA384)},3351:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(401),function(){var $=K,he=$.lib.Hasher,_e=$.x64,re=_e.Word,le=_e.WordArray,E=$.algo;function P(){return re.create.apply(re,arguments)}var U=[P(1116352408,3609767458),P(1899447441,602891725),P(3049323471,3964484399),P(3921009573,2173295548),P(961987163,4081628472),P(1508970993,3053834265),P(2453635748,2937671579),P(2870763221,3664609560),P(3624381080,2734883394),P(310598401,1164996542),P(607225278,1323610764),P(1426881987,3590304994),P(1925078388,4068182383),P(2162078206,991336113),P(2614888103,633803317),P(3248222580,3479774868),P(3835390401,2666613458),P(4022224774,944711139),P(264347078,2341262773),P(604807628,2007800933),P(770255983,1495990901),P(1249150122,1856431235),P(1555081692,3175218132),P(1996064986,2198950837),P(2554220882,3999719339),P(2821834349,766784016),P(2952996808,2566594879),P(3210313671,3203337956),P(3336571891,1034457026),P(3584528711,2466948901),P(113926993,3758326383),P(338241895,168717936),P(666307205,1188179964),P(773529912,1546045734),P(1294757372,1522805485),P(1396182291,2643833823),P(1695183700,2343527390),P(1986661051,1014477480),P(2177026350,1206759142),P(2456956037,344077627),P(2730485921,1290863460),P(2820302411,3158454273),P(3259730800,3505952657),P(3345764771,106217008),P(3516065817,3606008344),P(3600352804,1432725776),P(4094571909,1467031594),P(275423344,851169720),P(430227734,3100823752),P(506948616,1363258195),P(659060556,3750685593),P(883997877,3785050280),P(958139571,3318307427),P(1322822218,3812723403),P(1537002063,2003034995),P(1747873779,3602036899),P(1955562222,1575990012),P(2024104815,1125592928),P(2227730452,2716904306),P(2361852424,442776044),P(2428436474,593698344),P(2756734187,3733110249),P(3204031479,2999351573),P(3329325298,3815920427),P(3391569614,3928383900),P(3515267271,566280711),P(3940187606,3454069534),P(4118630271,4000239992),P(116418474,1914138554),P(174292421,2731055270),P(289380356,3203993006),P(460393269,320620315),P(685471733,587496836),P(852142971,1086792851),P(1017036298,365543100),P(1126000580,2618297676),P(1288033470,3409855158),P(1501505948,4234509866),P(1607167915,987167468),P(1816402316,1246189591)],O=[];!function(){for(var I=0;I<80;I++)O[I]=P()}();var N=E.SHA512=he.extend({_doReset:function(){this._hash=new le.init([new re.init(1779033703,4089235720),new re.init(3144134277,2227873595),new re.init(1013904242,4271175723),new re.init(2773480762,1595750129),new re.init(1359893119,2917565137),new re.init(2600822924,725511199),new re.init(528734635,4215389547),new re.init(1541459225,327033209)])},_doProcessBlock:function(I,H){for(var W=this._hash.words,fe=W[0],ce=W[1],z=W[2],Y=W[3],be=W[4],oe=W[5],pe=W[6],me=W[7],Me=fe.high,Re=fe.low,Le=ce.high,Ye=ce.low,we=z.high,Ee=z.low,je=Y.high,Ne=Y.low,Ct=be.high,$e=be.low,Zt=oe.high,pi=oe.low,xe=pe.high,Fe=pe.low,Te=me.high,Ie=me.low,rn=Me,Nt=Re,ni=Le,ri=Ye,Xt=we,ro=Ee,wd=je,Ko=Ne,ga=Ct,We=$e,Rc=Zt,it=pi,ol=xe,sl=Fe,ll=Te,cl=Ie,zr=0;zr<80;zr++){var jr,ko,Dc=O[zr];if(zr<16)ko=Dc.high=0|I[H+2*zr],jr=Dc.low=0|I[H+2*zr+1];else{var hp=O[zr-15],$r=hp.high,Ss=hp.low,Cd=(Ss>>>1|$r<<31)^(Ss>>>8|$r<<24)^(Ss>>>7|$r<<25),fp=O[zr-2],Zo=fp.high,ul=fp.low,pp=(ul>>>19|Zo<<13)^(ul<<3|Zo>>>29)^(ul>>>6|Zo<<26),gp=O[zr-7],kc=O[zr-16],Mc=kc.low;Dc.high=ko=(ko=(ko=(($r>>>1|Ss<<31)^($r>>>8|Ss<<24)^$r>>>7)+gp.high+((jr=Cd+gp.low)>>>0<Cd>>>0?1:0))+((Zo>>>19|ul<<13)^(Zo<<3|ul>>>29)^Zo>>>6)+((jr+=pp)>>>0<pp>>>0?1:0))+kc.high+((jr+=Mc)>>>0<Mc>>>0?1:0),Dc.low=jr}var Mr,vp=ga&Rc^~ga&ol,Ac=We&it^~We&sl,Rd=rn&ni^rn&Xt^ni&Xt,Yn=(Nt>>>28|rn<<4)^(Nt<<30|rn>>>2)^(Nt<<25|rn>>>7),kd=U[zr],Pc=kd.low,ao=ll+((ga>>>14|We<<18)^(ga>>>18|We<<14)^(ga<<23|We>>>9))+((Mr=cl+((We>>>14|ga<<18)^(We>>>18|ga<<14)^(We<<23|ga>>>9)))>>>0<cl>>>0?1:0),va=Yn+(Nt&ri^Nt&ro^ri&ro);ll=ol,cl=sl,ol=Rc,sl=it,Rc=ga,it=We,ga=wd+(ao=(ao=(ao=ao+vp+((Mr+=Ac)>>>0<Ac>>>0?1:0))+kd.high+((Mr+=Pc)>>>0<Pc>>>0?1:0))+ko+((Mr+=jr)>>>0<jr>>>0?1:0))+((We=Ko+Mr|0)>>>0<Ko>>>0?1:0)|0,wd=Xt,Ko=ro,Xt=ni,ro=ri,ni=rn,ri=Nt,rn=ao+(((rn>>>28|Nt<<4)^(rn<<30|Nt>>>2)^(rn<<25|Nt>>>7))+Rd+(va>>>0<Yn>>>0?1:0))+((Nt=Mr+va|0)>>>0<Mr>>>0?1:0)|0}Re=fe.low=Re+Nt,fe.high=Me+rn+(Re>>>0<Nt>>>0?1:0),Ye=ce.low=Ye+ri,ce.high=Le+ni+(Ye>>>0<ri>>>0?1:0),Ee=z.low=Ee+ro,z.high=we+Xt+(Ee>>>0<ro>>>0?1:0),Ne=Y.low=Ne+Ko,Y.high=je+wd+(Ne>>>0<Ko>>>0?1:0),$e=be.low=$e+We,be.high=Ct+ga+($e>>>0<We>>>0?1:0),pi=oe.low=pi+it,oe.high=Zt+Rc+(pi>>>0<it>>>0?1:0),Fe=pe.low=Fe+sl,pe.high=xe+ol+(Fe>>>0<sl>>>0?1:0),Ie=me.low=Ie+cl,me.high=Te+ll+(Ie>>>0<cl>>>0?1:0)},_doFinalize:function(){var I=this._data,H=I.words,W=8*this._nDataBytes,fe=8*I.sigBytes;return H[fe>>>5]|=128<<24-fe%32,H[30+(fe+128>>>10<<5)]=Math.floor(W/4294967296),H[31+(fe+128>>>10<<5)]=W,I.sigBytes=4*H.length,this._process(),this._hash.toX32()},clone:function(){var I=he.clone.call(this);return I._hash=this._hash.clone(),I},blockSize:32});$.SHA512=he._createHelper(N),$.HmacSHA512=he._createHmacHelper(N)}(),K.SHA512)},7243:function(De,Ae,Q){var K;De.exports=(K=Q(7585),Q(8319),Q(9493),Q(7865),Q(3057),function(){var $=K,ae=$.lib,he=ae.WordArray,_e=ae.BlockCipher,re=$.algo,le=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],E=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],P=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],U=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],O=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],N=re.DES=_e.extend({_doReset:function(){for(var ce=this._key.words,z=[],Y=0;Y<56;Y++){var be=le[Y]-1;z[Y]=ce[be>>>5]>>>31-be%32&1}for(var oe=this._subKeys=[],pe=0;pe<16;pe++){var me=oe[pe]=[],Me=P[pe];for(Y=0;Y<24;Y++)me[Y/6|0]|=z[(E[Y]-1+Me)%28]<<31-Y%6,me[4+(Y/6|0)]|=z[28+(E[Y+24]-1+Me)%28]<<31-Y%6;for(me[0]=me[0]<<1|me[0]>>>31,Y=1;Y<7;Y++)me[Y]=me[Y]>>>4*(Y-1)+3;me[7]=me[7]<<5|me[7]>>>27}var Re=this._invSubKeys=[];for(Y=0;Y<16;Y++)Re[Y]=oe[15-Y]},encryptBlock:function(fe,ce){this._doCryptBlock(fe,ce,this._subKeys)},decryptBlock:function(fe,ce){this._doCryptBlock(fe,ce,this._invSubKeys)},_doCryptBlock:function(fe,ce,z){this._lBlock=fe[ce],this._rBlock=fe[ce+1],I.call(this,4,252645135),I.call(this,16,65535),H.call(this,2,858993459),H.call(this,8,16711935),I.call(this,1,1431655765);for(var Y=0;Y<16;Y++){for(var be=z[Y],oe=this._lBlock,pe=this._rBlock,me=0,Me=0;Me<8;Me++)me|=U[Me][((pe^be[Me])&O[Me])>>>0];this._lBlock=pe,this._rBlock=oe^me}var Re=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Re,I.call(this,1,1431655765),H.call(this,8,16711935),H.call(this,2,858993459),I.call(this,16,65535),I.call(this,4,252645135),fe[ce]=this._lBlock,fe[ce+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function I(fe,ce){var z=(this._lBlock>>>fe^this._rBlock)&ce;this._rBlock^=z,this._lBlock^=z<<fe}function H(fe,ce){var z=(this._rBlock>>>fe^this._lBlock)&ce;this._lBlock^=z,this._rBlock^=z<<fe}$.DES=_e._createHelper(N);var W=re.TripleDES=_e.extend({_doReset:function(){var ce=this._key.words;if(2!==ce.length&&4!==ce.length&&ce.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var z=ce.slice(0,2),Y=ce.length<4?ce.slice(0,2):ce.slice(2,4),be=ce.length<6?ce.slice(0,2):ce.slice(4,6);this._des1=N.createEncryptor(he.create(z)),this._des2=N.createEncryptor(he.create(Y)),this._des3=N.createEncryptor(he.create(be))},encryptBlock:function(fe,ce){this._des1.encryptBlock(fe,ce),this._des2.decryptBlock(fe,ce),this._des3.encryptBlock(fe,ce)},decryptBlock:function(fe,ce){this._des3.decryptBlock(fe,ce),this._des2.encryptBlock(fe,ce),this._des1.decryptBlock(fe,ce)},keySize:6,ivSize:2,blockSize:2});$.TripleDES=_e._createHelper(W)}(),K.TripleDES)},401:function(De,Ae,Q){var he,_e,re,le,K;De.exports=(K=Q(7585),_e=(he=K.lib).Base,re=he.WordArray,(le=K.x64={}).Word=_e.extend({init:function(U,O){this.high=U,this.low=O}}),le.WordArray=_e.extend({init:function(U,O){U=this.words=U||[],this.sigBytes=null!=O?O:8*U.length},toX32:function(){for(var U=this.words,O=U.length,N=[],I=0;I<O;I++){var H=U[I];N.push(H.high),N.push(H.low)}return re.create(N,this.sigBytes)},clone:function(){for(var U=_e.clone.call(this),O=U.words=this.words.slice(0),N=O.length,I=0;I<N;I++)O[I]=O[I].clone();return U}}),K)},340:(De,Ae,Q)=>{var K=Q(9471),$=Q(2992),ae=Q(7657),he=Q(5583),_e=Q(1929),re=Q(8083),le=Q(3818);le.alea=K,le.xor128=$,le.xorwow=ae,le.xorshift7=he,le.xor4096=_e,le.tychei=re,De.exports=le},9471:function(De,Ae,Q){var K;!function($,ae,he){function _e(P){var U=this,O=function E(){var P=4022871197;return function(O){O=String(O);for(var N=0;N<O.length;N++){var I=.02519603282416938*(P+=O.charCodeAt(N));I-=P=I>>>0,P=(I*=P)>>>0,P+=4294967296*(I-=P)}return 2.3283064365386963e-10*(P>>>0)}}();U.next=function(){var N=2091639*U.s0+2.3283064365386963e-10*U.c;return U.s0=U.s1,U.s1=U.s2,U.s2=N-(U.c=0|N)},U.c=1,U.s0=O(" "),U.s1=O(" "),U.s2=O(" "),U.s0-=O(P),U.s0<0&&(U.s0+=1),U.s1-=O(P),U.s1<0&&(U.s1+=1),U.s2-=O(P),U.s2<0&&(U.s2+=1),O=null}function re(P,U){return U.c=P.c,U.s0=P.s0,U.s1=P.s1,U.s2=P.s2,U}function le(P,U){var O=new _e(P),N=U&&U.state,I=O.next;return I.int32=function(){return 4294967296*O.next()|0},I.double=function(){return I()+11102230246251565e-32*(2097152*I()|0)},I.quick=I,N&&("object"==typeof N&&re(N,O),I.state=function(){return re(O,{})}),I}ae&&ae.exports?ae.exports=le:Q.amdD&&Q.amdO?void 0!==(K=function(){return le}.call(Ae,Q,Ae,ae))&&(ae.exports=K):this.alea=le}(0,De=Q.nmd(De))},8083:function(De,Ae,Q){var K;!function($,ae,he){function _e(E){var P=this,U="";P.next=function(){var N=P.b,I=P.c,H=P.d,W=P.a;return N=N<<25^N>>>7^I,I=I-H|0,H=H<<24^H>>>8^W,W=W-N|0,P.b=N=N<<20^N>>>12^I,P.c=I=I-H|0,P.d=H<<16^I>>>16^W,P.a=W-N|0},P.a=0,P.b=0,P.c=-1640531527,P.d=1367130551,E===Math.floor(E)?(P.a=E/4294967296|0,P.b=0|E):U+=E;for(var O=0;O<U.length+20;O++)P.b^=0|U.charCodeAt(O),P.next()}function re(E,P){return P.a=E.a,P.b=E.b,P.c=E.c,P.d=E.d,P}function le(E,P){var U=new _e(E),O=P&&P.state,N=function(){return(U.next()>>>0)/4294967296};return N.double=function(){do{var W=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===W);return W},N.int32=U.next,N.quick=N,O&&("object"==typeof O&&re(O,U),N.state=function(){return re(U,{})}),N}ae&&ae.exports?ae.exports=le:Q.amdD&&Q.amdO?void 0!==(K=function(){return le}.call(Ae,Q,Ae,ae))&&(ae.exports=K):this.tychei=le}(0,De=Q.nmd(De))},2992:function(De,Ae,Q){var K;!function($,ae,he){function _e(E){var P=this,U="";P.x=0,P.y=0,P.z=0,P.w=0,P.next=function(){var N=P.x^P.x<<11;return P.x=P.y,P.y=P.z,P.z=P.w,P.w^=P.w>>>19^N^N>>>8},E===(0|E)?P.x=E:U+=E;for(var O=0;O<U.length+64;O++)P.x^=0|U.charCodeAt(O),P.next()}function re(E,P){return P.x=E.x,P.y=E.y,P.z=E.z,P.w=E.w,P}function le(E,P){var U=new _e(E),O=P&&P.state,N=function(){return(U.next()>>>0)/4294967296};return N.double=function(){do{var W=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===W);return W},N.int32=U.next,N.quick=N,O&&("object"==typeof O&&re(O,U),N.state=function(){return re(U,{})}),N}ae&&ae.exports?ae.exports=le:Q.amdD&&Q.amdO?void 0!==(K=function(){return le}.call(Ae,Q,Ae,ae))&&(ae.exports=K):this.xor128=le}(0,De=Q.nmd(De))},1929:function(De,Ae,Q){var K;!function($,ae,he){function _e(E){var P=this;P.next=function(){var H,W,O=P.w,N=P.X,I=P.i;return P.w=O=O+1640531527|0,W=N[I+34&127],H=N[I=I+1&127],W^=W<<13,H^=H<<17,W=N[I]=(W^=W>>>15)^(H^=H>>>12),P.i=I,W+(O^O>>>16)|0},function U(O,N){var I,H,W,fe,ce,z=[],Y=128;for(N===(0|N)?(H=N,N=null):(N+="\0",H=0,Y=Math.max(Y,N.length)),W=0,fe=-32;fe<Y;++fe)N&&(H^=N.charCodeAt((fe+32)%N.length)),0===fe&&(ce=H),H^=H<<10,H^=H>>>15,H^=H<<4,H^=H>>>13,fe>=0&&(W=0==(I=z[127&fe]^=H+(ce=ce+1640531527|0))?W+1:0);for(W>=128&&(z[127&(N&&N.length||0)]=-1),W=127,fe=512;fe>0;--fe)H=z[W+34&127],I=z[W=W+1&127],H^=H<<13,I^=I<<17,z[W]=(H^=H>>>15)^(I^=I>>>12);O.w=ce,O.X=z,O.i=W}(P,E)}function re(E,P){return P.i=E.i,P.w=E.w,P.X=E.X.slice(),P}function le(E,P){null==E&&(E=+new Date);var U=new _e(E),O=P&&P.state,N=function(){return(U.next()>>>0)/4294967296};return N.double=function(){do{var W=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===W);return W},N.int32=U.next,N.quick=N,O&&(O.X&&re(O,U),N.state=function(){return re(U,{})}),N}ae&&ae.exports?ae.exports=le:Q.amdD&&Q.amdO?void 0!==(K=function(){return le}.call(Ae,Q,Ae,ae))&&(ae.exports=K):this.xor4096=le}(0,De=Q.nmd(De))},5583:function(De,Ae,Q){var K;!function($,ae,he){function _e(E){var P=this;P.next=function(){var I,H,O=P.x,N=P.i;return I=O[N],H=(I^=I>>>7)^I<<24,H^=(I=O[N+1&7])^I>>>10,H^=(I=O[N+3&7])^I>>>3,H^=(I=O[N+4&7])^I<<7,I=O[N+7&7],O[N]=H^=(I^=I<<13)^I<<9,P.i=N+1&7,H},function U(O,N){var I,W=[];if(N===(0|N))W[0]=N;else for(N=""+N,I=0;I<N.length;++I)W[7&I]=W[7&I]<<15^N.charCodeAt(I)+W[I+1&7]<<13;for(;W.length<8;)W.push(0);for(I=0;I<8&&0===W[I];++I);for(8==I&&(W[7]=-1),O.x=W,O.i=0,I=256;I>0;--I)O.next()}(P,E)}function re(E,P){return P.x=E.x.slice(),P.i=E.i,P}function le(E,P){null==E&&(E=+new Date);var U=new _e(E),O=P&&P.state,N=function(){return(U.next()>>>0)/4294967296};return N.double=function(){do{var W=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===W);return W},N.int32=U.next,N.quick=N,O&&(O.x&&re(O,U),N.state=function(){return re(U,{})}),N}ae&&ae.exports?ae.exports=le:Q.amdD&&Q.amdO?void 0!==(K=function(){return le}.call(Ae,Q,Ae,ae))&&(ae.exports=K):this.xorshift7=le}(0,De=Q.nmd(De))},7657:function(De,Ae,Q){var K;!function($,ae,he){function _e(E){var P=this,U="";P.next=function(){var N=P.x^P.x>>>2;return P.x=P.y,P.y=P.z,P.z=P.w,P.w=P.v,(P.d=P.d+362437|0)+(P.v=P.v^P.v<<4^N^N<<1)|0},P.x=0,P.y=0,P.z=0,P.w=0,P.v=0,E===(0|E)?P.x=E:U+=E;for(var O=0;O<U.length+64;O++)P.x^=0|U.charCodeAt(O),O==U.length&&(P.d=P.x<<10^P.x>>>4),P.next()}function re(E,P){return P.x=E.x,P.y=E.y,P.z=E.z,P.w=E.w,P.v=E.v,P.d=E.d,P}function le(E,P){var U=new _e(E),O=P&&P.state,N=function(){return(U.next()>>>0)/4294967296};return N.double=function(){do{var W=((U.next()>>>11)+(U.next()>>>0)/4294967296)/(1<<21)}while(0===W);return W},N.int32=U.next,N.quick=N,O&&("object"==typeof O&&re(O,U),N.state=function(){return re(U,{})}),N}ae&&ae.exports?ae.exports=le:Q.amdD&&Q.amdO?void 0!==(K=function(){return le}.call(Ae,Q,Ae,ae))&&(ae.exports=K):this.xorwow=le}(0,De=Q.nmd(De))},3818:function(De,Ae,Q){var K;!function($,ae,he){var I,_e=256,P=he.pow(_e,6),U=he.pow(2,52),O=2*U,N=255;function H(oe,pe,me){var Me=[],Re=z(ce((pe=1==pe?{entropy:!0}:pe||{}).entropy?[oe,be(ae)]:null==oe?function Y(){try{var oe;return I&&(oe=I.randomBytes)?oe=oe(_e):(oe=new Uint8Array(_e),($.crypto||$.msCrypto).getRandomValues(oe)),be(oe)}catch(Me){var pe=$.navigator,me=pe&&pe.plugins;return[+new Date,$,me,$.screen,be(ae)]}}():oe,3),Me),Le=new W(Me),Ye=function(){for(var we=Le.g(6),Ee=P,je=0;we<U;)we=(we+je)*_e,Ee*=_e,je=Le.g(1);for(;we>=O;)we/=2,Ee/=2,je>>>=1;return(we+je)/Ee};return Ye.int32=function(){return 0|Le.g(4)},Ye.quick=function(){return Le.g(4)/4294967296},Ye.double=Ye,z(be(Le.S),ae),(pe.pass||me||function(we,Ee,je,Ne){return Ne&&(Ne.S&&fe(Ne,Le),we.state=function(){return fe(Le,{})}),je?(he.random=we,Ee):we})(Ye,Re,"global"in pe?pe.global:this==he,pe.state)}function W(oe){var pe,me=oe.length,Me=this,Re=0,Le=Me.i=Me.j=0,Ye=Me.S=[];for(me||(oe=[me++]);Re<_e;)Ye[Re]=Re++;for(Re=0;Re<_e;Re++)Ye[Re]=Ye[Le=N&Le+oe[Re%me]+(pe=Ye[Re])],Ye[Le]=pe;(Me.g=function(we){for(var Ee,je=0,Ne=Me.i,Ct=Me.j,$e=Me.S;we--;)Ee=$e[Ne=N&Ne+1],je=je*_e+$e[N&($e[Ne]=$e[Ct=N&Ct+Ee])+($e[Ct]=Ee)];return Me.i=Ne,Me.j=Ct,je})(_e)}function fe(oe,pe){return pe.i=oe.i,pe.j=oe.j,pe.S=oe.S.slice(),pe}function ce(oe,pe){var Re,me=[],Me=typeof oe;if(pe&&"object"==Me)for(Re in oe)try{me.push(ce(oe[Re],pe-1))}catch(Le){}return me.length?me:"string"==Me?oe:oe+"\0"}function z(oe,pe){for(var Me,me=oe+"",Re=0;Re<me.length;)pe[N&Re]=N&(Me^=19*pe[N&Re])+me.charCodeAt(Re++);return be(pe)}function be(oe){return String.fromCharCode.apply(0,oe)}if(z(he.random(),ae),De.exports){De.exports=H;try{I=Q(5042)}catch(oe){}}else void 0!==(K=function(){return H}.call(Ae,Q,Ae,De))&&(De.exports=K)}("undefined"!=typeof self?self:this,[],Math)},2480:()=>{},5042:()=>{}},De=>{De(De.s=9711)}]);