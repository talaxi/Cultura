var QG=Object.defineProperty,fD=Object.getOwnPropertySymbols,ZG=Object.prototype.hasOwnProperty,JG=Object.prototype.propertyIsEnumerable,hD=(Pe,et,le)=>et in Pe?QG(Pe,et,{enumerable:!0,configurable:!0,writable:!0,value:le}):Pe[et]=le,Yi=(Pe,et)=>{for(var le in et||(et={}))ZG.call(et,le)&&hD(Pe,le,et[le]);if(fD)for(var le of fD(et))JG.call(et,le)&&hD(Pe,le,et[le]);return Pe};(self.webpackChunkCultura=self.webpackChunkCultura||[]).push([[179],{487:(Pe,et,le)=>{"use strict";function ue(t){return"function"==typeof t}function Yn(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Te=Yn(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Un(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class He{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(ue(i))try{i()}catch(a){n=a instanceof Te?a.errors:[a]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const a of r)try{ce(a)}catch(o){n=null!=n?n:[],o instanceof Te?n=[...n,...o.errors]:n.push(o)}}if(n)throw new Te(n)}}add(n){var e;if(n&&n!==this)if(this.closed)ce(n);else{if(n instanceof He){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&Un(e,n)}remove(n){const{_teardowns:e}=this;e&&Un(e,n),n instanceof He&&n._removeParent(this)}}He.EMPTY=(()=>{const t=new He;return t.closed=!0,t})();const Gt=He.EMPTY;function Ye(t){return t instanceof He||t&&"closed"in t&&ue(t.remove)&&ue(t.add)&&ue(t.unsubscribe)}function ce(t){ue(t)?t():t.unsubscribe()}const x={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},j={setTimeout(...t){const{delegate:n}=j;return((null==n?void 0:n.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:n}=j;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function K(t){j.setTimeout(()=>{const{onUnhandledError:n}=x;if(!n)throw t;n(t)})}function B(){}const $=Xn("C",void 0,void 0);function Xn(t,n,e){return{kind:t,value:n,error:e}}let ei=null;function fi(t){if(x.useDeprecatedSynchronousErrorHandling){const n=!ei;if(n&&(ei={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=ei;if(ei=null,e)throw i}}else t()}class Kr extends He{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Ye(n)&&n.add(this)):this.destination=Mi}static create(n,e,i){return new Kt(n,e,i)}next(n){this.isStopped?hi(function pe(t){return Xn("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?hi(function de(t){return Xn("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?hi($,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const lt=Function.prototype.bind;function ft(t,n){return lt.call(t,n)}class ti{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){qt(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){qt(i)}else qt(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){qt(e)}}}class Kt extends Kr{constructor(n,e,i){let r;if(super(),ue(n)||!n)r={next:null!=n?n:void 0,error:null!=e?e:void 0,complete:null!=i?i:void 0};else{let a;this&&x.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&ft(n.next,a),error:n.error&&ft(n.error,a),complete:n.complete&&ft(n.complete,a)}):r=n}this.destination=new ti(r)}}function qt(t){x.useDeprecatedSynchronousErrorHandling?function Ha(t){x.useDeprecatedSynchronousErrorHandling&&ei&&(ei.errorThrown=!0,ei.error=t)}(t):K(t)}function hi(t,n){const{onStoppedNotification:e}=x;e&&j.setTimeout(()=>e(t,n))}const Mi={closed:!0,next:B,error:function Di(t){throw t},complete:B},Ii="function"==typeof Symbol&&Symbol.observable||"@@observable";function Dn(t){return t}let Xe=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const a=function gD(t){return t&&t instanceof Kr||function pD(t){return t&&ue(t.next)&&ue(t.error)&&ue(t.complete)}(t)&&Ye(t)}(e)?e:new Kt(e,i,r);return fi(()=>{const{operator:o,source:s}=this;a.add(o?o.call(a,s):s?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=$m(i))((r,a)=>{const o=new Kt({next:s=>{try{e(s)}catch(l){a(l),o.unsubscribe()}},error:a,complete:r});this.subscribe(o)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Ii](){return this}pipe(...e){return function Ga(t){return 0===t.length?Dn:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}(e)(this)}toPromise(e){return new(e=$m(e))((i,r)=>{let a;this.subscribe(o=>a=o,o=>r(o),()=>i(a))})}}return t.create=n=>new t(n),t})();function $m(t){var n;return null!==(n=null!=t?t:x.Promise)&&void 0!==n?n:Promise}const mD=Yn(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Yt=(()=>{class t extends Xe{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new zm(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new mD}next(e){fi(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const r of i)r.next(e)}})}error(e){fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:a}=this;return i||r?Gt:(a.push(e),new He(()=>Un(a,e)))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:a}=this;i?e.error(r):a&&e.complete()}asObservable(){const e=new Xe;return e.source=this,e}}return t.create=(n,e)=>new zm(n,e),t})();class zm extends Yt{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:Gt}}function Wm(t){return ue(null==t?void 0:t.lift)}function hn(t){return n=>{if(Wm(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function jt(t,n,e,i,r){return new vD(t,n,e,i,r)}class vD extends Kr{constructor(n,e,i,r,a,o){super(n),this.onFinalize=a,this.shouldUnsubscribe=o,this._next=e?function(s){try{e(s)}catch(l){n.error(l)}}:super._next,this._error=r?function(s){try{r(s)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(s){n.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function We(t,n){return hn((e,i)=>{let r=0;e.subscribe(jt(i,a=>{i.next(t.call(n,a,r++))}))})}function Tt(t,n,e,i){var o,r=arguments.length,a=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(n,e,a):o(n,e))||a);return r>3&&a&&Object.defineProperty(n,e,a),a}function Dt(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)}function ja(t){return this instanceof ja?(this.v=t,this):new ja(t)}function yD(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(t,n||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(f){i[f]&&(r[f]=function(h){return new Promise(function(v,b){a.push([f,h,v,b])>1||s(f,h)})})}function s(f,h){try{!function l(f){f.value instanceof ja?Promise.resolve(f.value.v).then(c,u):d(a[0][2],f)}(i[f](h))}catch(v){d(a[0][3],v)}}function c(f){s("next",f)}function u(f){s("throw",f)}function d(f,h){f(h),a.shift(),a.length&&s(a[0][0],a[0][1])}}function CD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function Xm(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=t[a]&&function(o){return new Promise(function(s,l){!function r(a,o,s,l){Promise.resolve(l).then(function(c){a({value:c,done:s})},o)}(s,l,(o=t[a](o)).done,o.value)})}}}const qd=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Qm(t){return ue(null==t?void 0:t.then)}function Zm(t){return ue(t[Ii])}function Jm(t){return Symbol.asyncIterator&&ue(null==t?void 0:t[Symbol.asyncIterator])}function Km(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ev=function SD(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function tv(t){return ue(null==t?void 0:t[ev])}function nv(t){return yD(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield ja(e.read());if(r)return yield ja(void 0);yield yield ja(i)}}finally{e.releaseLock()}})}function iv(t){return ue(null==t?void 0:t.getReader)}function ni(t){if(t instanceof Xe)return t;if(null!=t){if(Zm(t))return function TD(t){return new Xe(n=>{const e=t[Ii]();if(ue(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(qd(t))return function DD(t){return new Xe(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(Qm(t))return function MD(t){return new Xe(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,K)})}(t);if(Jm(t))return rv(t);if(tv(t))return function AD(t){return new Xe(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(iv(t))return function RD(t){return rv(nv(t))}(t)}throw Km(t)}function rv(t){return new Xe(n=>{(function ED(t,n){var e,i,r,a;return function _D(t,n,e,i){return new(e||(e=Promise))(function(a,o){function s(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):function r(a){return a instanceof e?a:new e(function(o){o(a)})}(u.value).then(s,l)}c((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=CD(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function ta(t,n,e,i=0,r=!1){const a=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!r)return a}function pn(t,n,e=1/0){return ue(n)?pn((i,r)=>We((a,o)=>n(i,a,r,o))(ni(t(i,r))),e):("number"==typeof n&&(e=n),hn((i,r)=>function kD(t,n,e,i,r,a,o,s){const l=[];let c=0,u=0,d=!1;const f=()=>{d&&!l.length&&!c&&n.complete()},h=b=>c<i?v(b):l.push(b),v=b=>{a&&n.next(b),c++;let C=!1;ni(e(b,u++)).subscribe(jt(n,S=>{null==r||r(S),a?h(S):n.next(S)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<i;){const S=l.shift();o?ta(n,o,()=>v(S)):v(S)}f()}catch(S){n.error(S)}}))};return t.subscribe(jt(n,h,()=>{d=!0,f()})),()=>{null==s||s()}}(i,r,t,e)))}function Ps(t=1/0){return pn(Dn,t)}const ur=new Xe(t=>t.complete());function av(t){return t&&ue(t.schedule)}function Yd(t){return t[t.length-1]}function mc(t){return ue(Yd(t))?t.pop():void 0}function Os(t){return av(Yd(t))?t.pop():void 0}function ov(t,n=0){return hn((e,i)=>{e.subscribe(jt(i,r=>ta(i,t,()=>i.next(r),n),()=>ta(i,t,()=>i.complete(),n),r=>ta(i,t,()=>i.error(r),n)))})}function sv(t,n=0){return hn((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function lv(t,n){if(!t)throw new Error("Iterable cannot be null");return new Xe(e=>{ta(e,n,()=>{const i=t[Symbol.asyncIterator]();ta(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Hn(t,n){return n?function LD(t,n){if(null!=t){if(Zm(t))return function PD(t,n){return ni(t).pipe(sv(n),ov(n))}(t,n);if(qd(t))return function xD(t,n){return new Xe(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(Qm(t))return function OD(t,n){return ni(t).pipe(sv(n),ov(n))}(t,n);if(Jm(t))return lv(t,n);if(tv(t))return function FD(t,n){return new Xe(e=>{let i;return ta(e,n,()=>{i=t[ev](),ta(e,n,()=>{let r,a;try{({value:r,done:a}=i.next())}catch(o){return void e.error(o)}a?e.complete():e.next(r)},0,!0)}),()=>ue(null==i?void 0:i.return)&&i.return()})}(t,n);if(iv(t))return function VD(t,n){return lv(nv(t),n)}(t,n)}throw Km(t)}(t,n):ni(t)}function cv(...t){const n=Os(t),e=function ID(t,n){return"number"==typeof Yd(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?ni(i[0]):Ps(e)(Hn(i,n)):ur}function Gn(t){return t<=0?()=>ur:hn((n,e)=>{let i=0;n.subscribe(jt(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function uv(t={}){const{connector:n=(()=>new Yt),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return a=>{let o=null,s=null,l=null,c=0,u=!1,d=!1;const f=()=>{null==s||s.unsubscribe(),s=null},h=()=>{f(),o=l=null,u=d=!1},v=()=>{const b=o;h(),null==b||b.unsubscribe()};return hn((b,C)=>{c++,!d&&!u&&f();const S=l=null!=l?l:n();C.add(()=>{c--,0===c&&!d&&!u&&(s=Xd(v,r))}),S.subscribe(C),o||(o=new Kt({next:_=>S.next(_),error:_=>{d=!0,f(),s=Xd(h,e,_),S.error(_)},complete:()=>{u=!0,f(),s=Xd(h,i),S.complete()}}),Hn(b).subscribe(o))})(a)}}function Xd(t,n,...e){return!0===n?(t(),null):!1===n?null:n(...e).pipe(Gn(1)).subscribe(()=>t())}function kt(t){for(let n in t)if(t[n]===kt)return n;throw Error("Could not find renamed property on target object.")}function Qd(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function _t(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(_t).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function Zd(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const BD=kt({__forward_ref__:kt});function rt(t){return t.__forward_ref__=rt,t.toString=function(){return _t(this())},t}function Oe(t){return dv(t)?t():t}function dv(t){return"function"==typeof t&&t.hasOwnProperty(BD)&&t.__forward_ref__===rt}class tt extends Error{constructor(n,e){super(function Jd(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function Re(t){return"string"==typeof t?t:null==t?"":String(t)}function pi(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Re(t)}function vc(t,n){const e=n?` in ${n}`:"";throw new tt(-201,`No provider for ${pi(t)} found${e}`)}function $t(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}function fe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ht(t){return{providers:t.providers||[],imports:t.imports||[]}}function Kd(t){return fv(t,_c)||fv(t,pv)}function fv(t,n){return t.hasOwnProperty(n)?t[n]:null}function hv(t){return t&&(t.hasOwnProperty(ef)||t.hasOwnProperty(WD))?t[ef]:null}const _c=kt({\u0275prov:kt}),ef=kt({\u0275inj:kt}),pv=kt({ngInjectableDef:kt}),WD=kt({ngInjectorDef:kt});var Ne=(()=>((Ne=Ne||{})[Ne.Default=0]="Default",Ne[Ne.Host=1]="Host",Ne[Ne.Self=2]="Self",Ne[Ne.SkipSelf=4]="SkipSelf",Ne[Ne.Optional=8]="Optional",Ne))();let tf;function va(t){const n=tf;return tf=t,n}function gv(t,n,e){const i=Kd(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Ne.Optional?null:void 0!==n?n:void vc(_t(t),"Injector")}function _a(t){return{toString:t}.toString()}var dr=(()=>((dr=dr||{})[dr.OnPush=0]="OnPush",dr[dr.Default=1]="Default",dr))(),Nr=(()=>{return(t=Nr||(Nr={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Nr;var t})();const YD="undefined"!=typeof globalThis&&globalThis,XD="undefined"!=typeof window&&window,QD="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Mt=YD||"undefined"!=typeof global&&global||XD||QD,yo={},Nt=[],bc=kt({\u0275cmp:kt}),nf=kt({\u0275dir:kt}),rf=kt({\u0275pipe:kt}),mv=kt({\u0275mod:kt}),ia=kt({\u0275fac:kt}),xs=kt({__NG_ELEMENT_ID__:kt});let ZD=0;function De(t){return _a(()=>{const e={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===dr.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Nt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Nr.Emulated,id:"c",styles:t.styles||Nt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,a=t.features,o=t.pipes;return i.id+=ZD++,i.inputs=yv(t.inputs,e),i.outputs=yv(t.outputs),a&&a.forEach(s=>s(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(vv):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(_v):null,i})}function vv(t){return ii(t)||function ba(t){return t[nf]||null}(t)}function _v(t){return function $a(t){return t[rf]||null}(t)}const bv={};function bt(t){return _a(()=>{const n={type:t.type,bootstrap:t.bootstrap||Nt,declarations:t.declarations||Nt,imports:t.imports||Nt,exports:t.exports||Nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(bv[t.id]=t.type),n})}function yv(t,n){if(null==t)return yo;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=i,n&&(n[r]=a)}return e}const J=De;function Ai(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ii(t){return t[bc]||null}function Xi(t,n){const e=t[mv]||null;if(!e&&!0===n)throw new Error(`Type ${_t(t)} does not have '\u0275mod' property.`);return e}function Ir(t){return Array.isArray(t)&&"object"==typeof t[1]}function hr(t){return Array.isArray(t)&&!0===t[1]}function lf(t){return 0!=(8&t.flags)}function Sc(t){return 2==(2&t.flags)}function Tc(t){return 1==(1&t.flags)}function pr(t){return null!==t.template}function iM(t){return 0!=(512&t[2])}function Ya(t,n){return t.hasOwnProperty(ia)?t[ia]:null}class oM{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function $n(){return wv}function wv(t){return t.type.prototype.ngOnChanges&&(t.setInput=lM),sM}function sM(){const t=Tv(this),n=null==t?void 0:t.current;if(n){const e=t.previous;if(e===yo)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function lM(t,n,e,i){const r=Tv(t)||function cM(t,n){return t[Sv]=n}(t,{previous:yo,current:null}),a=r.current||(r.current={}),o=r.previous,s=this.declaredInputs[e],l=o[s];a[s]=new oM(l&&l.currentValue,n,o===yo),t[i]=n}$n.ngInherit=!0;const Sv="__ngSimpleChanges__";function Tv(t){return t[Sv]||null}let hf;function pf(){return void 0!==hf?hf:"undefined"!=typeof document?document:void 0}function rn(t){return!!t.listen}const Dv={createRenderer:(t,n)=>pf()};function Mn(t){for(;Array.isArray(t);)t=t[0];return t}function Dc(t,n){return Mn(n[t])}function Ji(t,n){return Mn(n[t.index])}function gf(t,n){return t.data[n]}function Do(t,n){return t[n]}function Fi(t,n){const e=n[t];return Ir(e)?e:e[0]}function Mv(t){return 4==(4&t[2])}function mf(t){return 128==(128&t[2])}function ya(t,n){return null==n?null:t[n]}function Av(t){t[18]=0}function vf(t,n){t[5]+=n;let e=t,i=t[3];for(;null!==i&&(1===n&&1===e[5]||-1===n&&0===e[5]);)i[5]+=n,e=i,i=i[3]}const Me={lFrame:xv(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Rv(){return Me.bindingsEnabled}function U(){return Me.lFrame.lView}function nt(){return Me.lFrame.tView}function V(t){return Me.lFrame.contextLView=t,t[8]}function In(){let t=Ev();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ev(){return Me.lFrame.currentTNode}function Bs(){const t=Me.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function Pr(t,n){const e=Me.lFrame;e.currentTNode=t,e.isParent=n}function _f(){return Me.lFrame.isParent}function bf(){Me.lFrame.isParent=!1}function Mc(){return Me.isInCheckNoChangesMode}function Ac(t){Me.isInCheckNoChangesMode=t}function gi(){const t=Me.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function ra(){return Me.lFrame.bindingIndex}function Mo(){return Me.lFrame.bindingIndex++}function aa(t){const n=Me.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Nv(t){Me.lFrame.inI18n=t}function MM(t,n){const e=Me.lFrame;e.bindingIndex=e.bindingRootIndex=t,yf(n)}function yf(t){Me.lFrame.currentDirectiveIndex=t}function Iv(){return Me.lFrame.currentQueryIndex}function wf(t){Me.lFrame.currentQueryIndex=t}function RM(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Pv(t,n,e){if(e&Ne.SkipSelf){let r=n,a=t;for(;!(r=r.parent,null!==r||e&Ne.Host||(r=RM(a),null===r||(a=a[15],10&r.type))););if(null===r)return!1;n=r,t=a}const i=Me.lFrame=Ov();return i.currentTNode=n,i.lView=t,!0}function Rc(t){const n=Ov(),e=t[1];Me.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Ov(){const t=Me.lFrame,n=null===t?null:t.child;return null===n?xv(t):n}function xv(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Fv(){const t=Me.lFrame;return Me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Vv=Fv;function Ec(){const t=Fv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function mi(){return Me.lFrame.selectedIndex}function Ca(t){Me.lFrame.selectedIndex=t}function an(){const t=Me.lFrame;return gf(t.tView,t.selectedIndex)}function kc(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=a;o&&(t.contentHooks||(t.contentHooks=[])).push(-e,o),s&&((t.contentHooks||(t.contentHooks=[])).push(e,s),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,s)),l&&(t.viewHooks||(t.viewHooks=[])).push(-e,l),c&&((t.viewHooks||(t.viewHooks=[])).push(e,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,c)),null!=u&&(t.destroyHooks||(t.destroyHooks=[])).push(e,u)}}function Nc(t,n,e){Lv(t,n,3,e)}function Ic(t,n,e,i){(3&t[2])===e&&Lv(t,n,e,i)}function Sf(t,n){let e=t[2];(3&e)===n&&(e&=2047,e+=1,t[2]=e)}function Lv(t,n,e,i){const a=null!=i?i:-1,o=n.length-1;let s=0;for(let l=void 0!==i?65535&t[18]:0;l<o;l++)if("number"==typeof n[l+1]){if(s=n[l],null!=i&&s>=i)break}else n[l]<0&&(t[18]+=65536),(s<a||-1==a)&&(VM(t,e,n,l),t[18]=(4294901760&t[18])+l+2),l++}function VM(t,n,e,i){const r=e[i]<0,a=e[i+1],s=t[r?-e[i]:e[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{a.call(s)}finally{}}}else try{a.call(s)}finally{}}class Us{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Pc(t,n,e){const i=rn(t);let r=0;for(;r<e.length;){const a=e[r];if("number"==typeof a){if(0!==a)break;r++;const o=e[r++],s=e[r++],l=e[r++];i?t.setAttribute(n,s,l,o):n.setAttributeNS(o,s,l)}else{const o=a,s=e[++r];Df(o)?i&&t.setProperty(n,o,s):i?t.setAttribute(n,o,s):n.setAttribute(o,s),r++}}return r}function Bv(t){return 3===t||4===t||6===t}function Df(t){return 64===t.charCodeAt(0)}function Oc(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||Uv(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function Uv(t,n,e,i,r){let a=0,o=t.length;if(-1===n)o=-1;else for(;a<t.length;){const s=t[a++];if("number"==typeof s){if(s===n){o=-1;break}if(s>n){o=a-1;break}}}for(;a<t.length;){const s=t[a];if("number"==typeof s)break;if(s===e){if(null===i)return void(null!==r&&(t[a+1]=r));if(i===t[a+1])return void(t[a+2]=r)}a++,null!==i&&a++,null!==r&&a++}-1!==o&&(t.splice(o,0,n),a=o+1),t.splice(a++,0,e),null!==i&&t.splice(a++,0,i),null!==r&&t.splice(a++,0,r)}function Hv(t){return-1!==t}function Ao(t){return 32767&t}function Ro(t,n){let e=function GM(t){return t>>16}(t),i=n;for(;e>0;)i=i[15],e--;return i}let Mf=!0;function xc(t){const n=Mf;return Mf=t,n}let jM=0;function Gs(t,n){const e=Rf(t,n);if(-1!==e)return e;const i=n[1];i.firstCreatePass&&(t.injectorIndex=n.length,Af(i.data,t),Af(n,null),Af(i.blueprint,null));const r=Fc(t,n),a=t.injectorIndex;if(Hv(r)){const o=Ao(r),s=Ro(r,n),l=s[1].data;for(let c=0;c<8;c++)n[a+c]=s[o+c]|l[o+c]}return n[a+8]=r,a}function Af(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Rf(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Fc(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){const a=r[1],o=a.type;if(i=2===o?a.declTNode:1===o?r[6]:null,null===i)return-1;if(e++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return-1}function Vc(t,n,e){!function $M(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(xs)&&(i=e[xs]),null==i&&(i=e[xs]=jM++);const r=255&i;n.data[t+(r>>5)]|=1<<r}(t,n,e)}function $v(t,n,e){if(e&Ne.Optional)return t;vc(n,"NodeInjector")}function zv(t,n,e,i){if(e&Ne.Optional&&void 0===i&&(i=null),0==(e&(Ne.Self|Ne.Host))){const r=t[9],a=va(void 0);try{return r?r.get(n,i,e&Ne.Optional):gv(n,i,e&Ne.Optional)}finally{va(a)}}return $v(i,n,e)}function Wv(t,n,e,i=Ne.Default,r){if(null!==t){const a=function YM(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(xs)?t[xs]:void 0;return"number"==typeof n?n>=0?255&n:WM:n}(e);if("function"==typeof a){if(!Pv(n,t,i))return i&Ne.Host?$v(r,e,i):zv(n,e,i,r);try{const o=a(i);if(null!=o||i&Ne.Optional)return o;vc(e)}finally{Vv()}}else if("number"==typeof a){let o=null,s=Rf(t,n),l=-1,c=i&Ne.Host?n[16][6]:null;for((-1===s||i&Ne.SkipSelf)&&(l=-1===s?Fc(t,n):n[s+8],-1!==l&&Xv(i,!1)?(o=n[1],s=Ao(l),n=Ro(l,n)):s=-1);-1!==s;){const u=n[1];if(Yv(a,s,u.data)){const d=qM(s,n,e,o,i,c);if(d!==qv)return d}l=n[s+8],-1!==l&&Xv(i,n[1].data[s+8]===c)&&Yv(a,s,n)?(o=u,s=Ao(l),n=Ro(l,n)):s=-1}}}return zv(n,e,i,r)}const qv={};function WM(){return new Eo(In(),U())}function qM(t,n,e,i,r,a){const o=n[1],s=o.data[t+8],u=Lc(s,o,e,null==i?Sc(s)&&Mf:i!=o&&0!=(3&s.type),r&Ne.Host&&a===s);return null!==u?js(n,o,u,s):qv}function Lc(t,n,e,i,r){const a=t.providerIndexes,o=n.data,s=1048575&a,l=t.directiveStart,u=a>>20,f=r?s+u:t.directiveEnd;for(let h=i?s:s+u;h<f;h++){const v=o[h];if(h<l&&e===v||h>=l&&v.type===e)return h}if(r){const h=o[l];if(h&&pr(h)&&h.type===e)return l}return null}function js(t,n,e,i){let r=t[e];const a=n.data;if(function LM(t){return t instanceof Us}(r)){const o=r;o.resolving&&function UD(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new tt(-200,`Circular dependency in DI detected for ${t}${e}`)}(pi(a[e]));const s=xc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?va(o.injectImpl):null;Pv(t,i,Ne.Default);try{r=t[e]=o.factory(void 0,a,t,i),n.firstCreatePass&&e>=i.directiveStart&&function FM(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:a}=n.type.prototype;if(i){const o=wv(n);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),a&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,a),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,a))}(e,a[e],n)}finally{null!==l&&va(l),xc(s),o.resolving=!1,Vv()}}return r}function Yv(t,n,e){return!!(e[n+(t>>5)]&1<<t)}function Xv(t,n){return!(t&Ne.Self||t&Ne.Host&&n)}class Eo{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return Wv(this._tNode,this._lView,n,i,e)}}function ai(t){return _a(()=>{const n=t.prototype.constructor,e=n[ia]||Ef(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const a=r[ia]||Ef(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function Ef(t){return dv(t)?()=>{const n=Ef(Oe(t));return n&&n()}:Ya(t)}const No="__parameters__";function Po(t,n,e){return _a(()=>{const i=function kf(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...a){if(this instanceof r)return i.apply(this,a),this;const o=new r(...a);return s.annotation=o,s;function s(l,c,u){const d=l.hasOwnProperty(No)?l[No]:Object.defineProperty(l,No,{value:[]})[No];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class Be{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=fe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const QM=new Be("AnalyzeForEntryComponents");function Ki(t,n){void 0===n&&(n=t);for(let e=0;e<t.length;e++){let i=t[e];Array.isArray(i)?(n===t&&(n=t.slice(0,e)),Ki(i,n)):n!==t&&n.push(i)}return n}function Or(t,n){t.forEach(e=>Array.isArray(e)?Or(e,n):n(e))}function Zv(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Bc(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Ws(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function Vi(t,n,e){let i=Oo(t,n);return i>=0?t[1|i]=e:(i=~i,function KM(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function If(t,n){const e=Oo(t,n);if(e>=0)return t[1|e]}function Oo(t,n){return function e_(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const a=i+(r-i>>1),o=t[a<<e];if(n===o)return a<<e;o>n?r=a:i=a+1}return~(r<<e)}(t,n,1)}const qs={},Of="__NG_DI_FLAG__",Hc="ngTempTokenPath",oA=/\n/gm,n_="__source",lA=kt({provide:String,useValue:kt});let Ys;function i_(t){const n=Ys;return Ys=t,n}function cA(t,n=Ne.Default){if(void 0===Ys)throw new tt(203,"");return null===Ys?gv(t,void 0,n):Ys.get(t,n&Ne.Optional?null:void 0,n)}function Q(t,n=Ne.Default){return(function qD(){return tf}()||cA)(Oe(t),n)}function xf(t){const n=[];for(let e=0;e<t.length;e++){const i=Oe(t[e]);if(Array.isArray(i)){if(0===i.length)throw new tt(900,"");let r,a=Ne.Default;for(let o=0;o<i.length;o++){const s=i[o],l=uA(s);"number"==typeof l?-1===l?r=s.token:a|=l:r=s}n.push(Q(r,a))}else n.push(Q(i))}return n}function Xs(t,n){return t[Of]=n,t.prototype[Of]=n,t}function uA(t){return t[Of]}const Qs=Xs(Po("Inject",t=>({token:t})),-1),xr=Xs(Po("Optional"),8),xo=Xs(Po("SkipSelf"),4);let jc,$c;function Vo(t){var n;return(null===(n=function Vf(){if(void 0===jc&&(jc=null,Mt.trustedTypes))try{jc=Mt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return jc}())||void 0===n?void 0:n.createHTML(t))||t}function c_(t){var n;return(null===(n=function Lf(){if(void 0===$c&&($c=null,Mt.trustedTypes))try{$c=Mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return $c}())||void 0===n?void 0:n.createHTML(t))||t}class Qa{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class SA extends Qa{getTypeName(){return"HTML"}}class TA extends Qa{getTypeName(){return"Style"}}class DA extends Qa{getTypeName(){return"Script"}}class MA extends Qa{getTypeName(){return"URL"}}class AA extends Qa{getTypeName(){return"ResourceURL"}}function Li(t){return t instanceof Qa?t.changingThisBreaksApplicationSecurity:t}function Fr(t,n){const e=f_(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===n}function f_(t){return t instanceof Qa&&t.getTypeName()||null}function h_(t){const n=new OA(t);return function xA(){try{return!!(new window.DOMParser).parseFromString(Vo(""),"text/html")}catch(t){return!1}}()?new PA(n):n}class PA{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(Vo(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class OA{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const i=this.inertDocument.createElement("body");e.appendChild(i)}}getInertBodyElement(n){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Vo(n),e;const i=this.inertDocument.createElement("body");return i.innerHTML=Vo(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(n){const e=n.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&n.removeAttribute(o)}let i=n.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const FA=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,VA=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Js(t){return(t=String(t)).match(FA)||t.match(VA)?t:"unsafe:"+t}function p_(t){return(t=String(t)).split(",").map(n=>Js(n.trim())).join(", ")}function Vr(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function Ks(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const g_=Vr("area,br,col,hr,img,wbr"),m_=Vr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),v_=Vr("rp,rt"),Bf=Ks(g_,Ks(m_,Vr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ks(v_,Vr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ks(v_,m_)),Uf=Vr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Hf=Vr("srcset"),__=Ks(Uf,Hf,Vr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),LA=Vr("script,style,template");class BA{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!Bf.hasOwnProperty(e))return this.sanitizedSomething=!0,!LA.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const a=i.item(r),o=a.name,s=o.toLowerCase();if(!__.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let l=a.value;Uf[s]&&(l=Js(l)),Hf[s]&&(l=p_(l)),this.buf.push(" ",o,'="',b_(l),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();Bf.hasOwnProperty(e)&&!g_.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(b_(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const UA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,HA=/([^\#-~ |!])/g;function b_(t){return t.replace(/&/g,"&amp;").replace(UA,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(HA,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zc;function y_(t,n){let e=null;try{zc=zc||h_(t);let i=n?String(n):"";e=zc.getInertBodyElement(i);let r=5,a=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=a,a=e.innerHTML,e=zc.getInertBodyElement(i)}while(i!==a);return Vo((new BA).sanitizeChildren(Gf(e)||e))}finally{if(e){const i=Gf(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Gf(t){return"content"in t&&function GA(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var yt=(()=>((yt=yt||{})[yt.NONE=0]="NONE",yt[yt.HTML=1]="HTML",yt[yt.STYLE=2]="STYLE",yt[yt.SCRIPT=3]="SCRIPT",yt[yt.URL=4]="URL",yt[yt.RESOURCE_URL=5]="RESOURCE_URL",yt))();function Wc(t){const n=function el(){const t=U();return t&&t[12]}();return n?c_(n.sanitize(yt.HTML,t)||""):Fr(t,"HTML")?c_(Li(t)):y_(pf(),Re(t))}const S_="__ngContext__";function oi(t,n){t[S_]=n}function zf(t){const n=function tl(t){return t[S_]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function qf(t){return t.ngOriginalError}function rR(t,...n){t.error(...n)}class Lo{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n),i=function iR(t){return t&&t.ngErrorLogger||rR}(n);i(this._console,"ERROR",n),e&&i(this._console,"ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&qf(n);for(;e&&qf(e);)e=qf(e);return e||null}}const sR=/^>|^->|<!--|-->|--!>|<!-$/g,lR=/(<|>)/;const R_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Mt))();function nl(t){return t.ownerDocument.defaultView}function Lr(t){return t instanceof Function?t():t}var Bi=(()=>((Bi=Bi||{})[Bi.Important=1]="Important",Bi[Bi.DashCase=2]="DashCase",Bi))();let Yf;function Xf(t,n){return Yf(t,n)}function il(t){const n=t[3];return hr(n)?n[3]:n}function Qf(t){return P_(t[13])}function Zf(t){return P_(t[4])}function P_(t){for(;null!==t&&!hr(t);)t=t[4];return t}function Uo(t,n,e,i,r){if(null!=i){let a,o=!1;hr(i)?a=i:Ir(i)&&(o=!0,i=i[0]);const s=Mn(i);0===t&&null!==e?null==r?B_(n,e,s):Za(n,e,s,r||null,!0):1===t&&null!==e?Za(n,e,s,r||null,!0):2===t?W_(n,s,o):3===t&&n.destroyNode(s),null!=a&&function ER(t,n,e,i,r){const a=e[7];a!==Mn(e)&&Uo(n,t,i,a,r);for(let s=10;s<e.length;s++){const l=e[s];rl(l[1],l,t,n,i,a)}}(n,t,a,e,r)}}function Jf(t,n){return rn(t)?t.createText(n):t.createTextNode(n)}function O_(t,n,e){rn(t)?t.setValue(n,e):n.textContent=e}function vR(t,n){return t.createComment(function A_(t){return t.replace(sR,n=>n.replace(lR,"\u200b$1\u200b"))}(n))}function Kf(t,n,e){if(rn(t))return t.createElement(n,e);{const i=null!==e?function hM(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(e):null;return null===i?t.createElement(n):t.createElementNS(i,n)}}function x_(t,n){const e=t[9],i=e.indexOf(n),r=n[3];1024&n[2]&&(n[2]&=-1025,vf(r,-1)),e.splice(i,1)}function eh(t,n){if(t.length<=10)return;const e=10+n,i=t[e];if(i){const r=i[17];null!==r&&r!==t&&x_(r,i),n>0&&(t[e-1][4]=i[4]);const a=Bc(t,10+n);!function _R(t,n){rl(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(i[1],i);const o=a[19];null!==o&&o.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function F_(t,n){if(!(256&n[2])){const e=n[11];rn(e)&&e.destroyNode&&rl(t,n,e,3,null,null),function CR(t){let n=t[13];if(!n)return th(t[1],t);for(;n;){let e=null;if(Ir(n))e=n[13];else{const i=n[10];i&&(e=i)}if(!e){for(;n&&!n[4]&&n!==t;)Ir(n)&&th(n[1],n),n=n[3];null===n&&(n=t),Ir(n)&&th(n[1],n),e=n&&n[4]}n=e}}(n)}}function th(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function DR(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof Us)){const a=e[i+1];if(Array.isArray(a))for(let o=0;o<a.length;o+=2){const s=r[a[o]],l=a[o+1];try{l.call(s)}finally{}}else try{a.call(r)}finally{}}}}(t,n),function TR(t,n){const e=t.cleanup,i=n[7];let r=-1;if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const o=e[a+1],s="function"==typeof o?o(n):Mn(n[o]),l=i[r=e[a+2]],c=e[a+3];"boolean"==typeof c?s.removeEventListener(e[a],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),a+=2}else{const o=i[r=e[a+1]];e[a].call(o)}if(null!==i){for(let a=r+1;a<i.length;a++)i[a]();n[7]=null}}(t,n),1===n[1].type&&rn(n[11])&&n[11].destroy();const e=n[17];if(null!==e&&hr(n[3])){e!==n[3]&&x_(e,n);const i=n[19];null!==i&&i.detachView(t)}}}function V_(t,n,e){return L_(t,n.parent,e)}function L_(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[0];if(2&i.flags){const r=t.data[i.directiveStart].encapsulation;if(r===Nr.None||r===Nr.Emulated)return null}return Ji(i,e)}function Za(t,n,e,i,r){rn(t)?t.insertBefore(n,e,i,r):n.insertBefore(e,i,r)}function B_(t,n,e){rn(t)?t.appendChild(n,e):n.appendChild(e)}function U_(t,n,e,i,r){null!==i?Za(t,n,e,i,r):B_(t,n,e)}function qc(t,n){return rn(t)?t.parentNode(n):n.parentNode}function H_(t,n,e){return j_(t,n,e)}function G_(t,n,e){return 40&t.type?Ji(t,e):null}let nh,j_=G_;function $_(t,n){j_=t,nh=n}function Yc(t,n,e,i){const r=V_(t,i,n),a=n[11],s=H_(i.parent||n[6],i,n);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)U_(a,r,e[l],s,!1);else U_(a,r,e,s,!1);void 0!==nh&&nh(a,i,n,e,r)}function Xc(t,n){if(null!==n){const e=n.type;if(3&e)return Ji(n,t);if(4&e)return ih(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return Xc(t,i);{const r=t[n.index];return hr(r)?ih(-1,r):Mn(r)}}if(32&e)return Xf(n,t)()||Mn(t[n.index]);{const i=z_(t,n);return null!==i?Array.isArray(i)?i[0]:Xc(il(t[16]),i):Xc(t,n.next)}}return null}function z_(t,n){return null!==n?t[16][6].projection[n.projection]:null}function ih(t,n){const e=10+t+1;if(e<n.length){const i=n[e],r=i[1].firstChild;if(null!==r)return Xc(i,r)}return n[7]}function W_(t,n,e){const i=qc(t,n);i&&function MR(t,n,e,i){rn(t)?t.removeChild(n,e,i):n.removeChild(e)}(t,i,n,e)}function rh(t,n,e,i,r,a,o){for(;null!=e;){const s=i[e.index],l=e.type;if(o&&0===n&&(s&&oi(Mn(s),i),e.flags|=4),64!=(64&e.flags))if(8&l)rh(t,n,e.child,i,r,a,!1),Uo(n,t,r,s,a);else if(32&l){const c=Xf(e,i);let u;for(;u=c();)Uo(n,t,r,u,a);Uo(n,t,r,s,a)}else 16&l?q_(t,n,i,e,r,a):Uo(n,t,r,s,a);e=o?e.projectionNext:e.next}}function rl(t,n,e,i,r,a){rh(e,i,t.firstChild,n,r,a,!1)}function q_(t,n,e,i,r,a){const o=e[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Uo(n,t,r,l[c],a);else rh(t,n,l,o[3],r,a,!0)}function Y_(t,n,e){rn(t)?t.setAttribute(n,"style",e):n.style.cssText=e}function ah(t,n,e){rn(t)?""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e):n.className=e}function X_(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=n.length;if(r+a===i||t.charCodeAt(r+a)<=32)return r}e=r+1}}const Q_="ng-template";function NR(t,n,e){let i=0;for(;i<t.length;){let r=t[i++];if(e&&"class"===r){if(r=t[i],-1!==X_(r.toLowerCase(),n,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===n)return!0;return!1}}return!1}function Z_(t){return 4===t.type&&t.value!==Q_}function IR(t,n,e){return n===(4!==t.type||e?t.value:Q_)}function PR(t,n,e){let i=4;const r=t.attrs||[],a=function FR(t){for(let n=0;n<t.length;n++)if(Bv(t[n]))return n;return t.length}(r);let o=!1;for(let s=0;s<n.length;s++){const l=n[s];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!IR(t,l,e)||""===l&&1===n.length){if(gr(i))return!1;o=!0}}else{const c=8&i?l:n[++s];if(8&i&&null!==t.attrs){if(!NR(t.attrs,c,e)){if(gr(i))return!1;o=!0}continue}const d=OR(8&i?"class":l,r,Z_(t),e);if(-1===d){if(gr(i))return!1;o=!0;continue}if(""!==c){let f;f=d>a?"":r[d+1].toLowerCase();const h=8&i?f:null;if(h&&-1!==X_(h,c,0)||2&i&&c!==f){if(gr(i))return!1;o=!0}}}}else{if(!o&&!gr(i)&&!gr(l))return!1;if(o&&gr(l))continue;o=!1,i=l|1&i}}return gr(i)||o}function gr(t){return 0==(1&t)}function OR(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let a=!1;for(;r<n.length;){const o=n[r];if(o===t)return r;if(3===o||6===o)a=!0;else{if(1===o||2===o){let s=n[++r];for(;"string"==typeof s;)s=n[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=a?1:2}return-1}return function VR(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function J_(t,n,e=!1){for(let i=0;i<n.length;i++)if(PR(t,n[i],e))return!0;return!1}function LR(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function K_(t,n){return t?":not("+n.trim()+")":n}function BR(t){let n=t[0],e=1,i=2,r="",a=!1;for(;e<t.length;){let o=t[e];if("string"==typeof o)if(2&i){const s=t[++e];r+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!gr(o)&&(n+=K_(a,r),r=""),i=o,a=a||!gr(i);e++}return""!==r&&(n+=K_(a,r)),n}const Ee={};function p(t){eb(nt(),U(),mi()+t,Mc())}function eb(t,n,e,i){if(!i)if(3==(3&n[2])){const a=t.preOrderCheckHooks;null!==a&&Nc(n,a,e)}else{const a=t.preOrderHooks;null!==a&&Ic(n,a,0,e)}Ca(e)}function Qc(t,n){return t<<17|n<<2}function mr(t){return t>>17&32767}function oh(t){return 2|t}function oa(t){return(131068&t)>>2}function sh(t,n){return-131069&t|n<<2}function lh(t){return 1|t}function db(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const r=e[i],a=e[i+1];if(-1!==a){const o=t.data[a];wf(r),o.contentQueries(2,n[a],a)}}}function al(t,n,e,i,r,a,o,s,l,c){const u=n.blueprint.slice();return u[0]=r,u[2]=140|i,Av(u),u[3]=u[15]=t,u[8]=e,u[10]=o||t&&t[10],u[11]=s||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=a,u[16]=2==n.type?t[16]:u,u}function Ho(t,n,e,i,r){let a=t.data[n];if(null===a)a=vh(t,n,e,i,r),function DM(){return Me.lFrame.inI18n}()&&(a.flags|=64);else if(64&a.type){a.type=e,a.value=i,a.attrs=r;const o=Bs();a.injectorIndex=null===o?-1:o.injectorIndex}return Pr(a,!0),a}function vh(t,n,e,i,r){const a=Ev(),o=_f(),l=t.data[n]=function iE(t,n,e,i,r,a){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=l),null!==a&&(o?null==a.child&&null!==l.parent&&(a.child=l):null===a.next&&(a.next=l)),l}function Go(t,n,e,i){if(0===e)return-1;const r=n.length;for(let a=0;a<e;a++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function ol(t,n,e){Rc(n);try{const i=t.viewQuery;null!==i&&Mh(1,i,e);const r=t.template;null!==r&&fb(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&db(t,n),t.staticViewQueries&&Mh(2,t.viewQuery,e);const a=t.components;null!==a&&function eE(t,n){for(let e=0;e<n.length;e++)CE(t,n[e])}(n,a)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[2]&=-5,Ec()}}function jo(t,n,e,i){const r=n[2];if(256==(256&r))return;Rc(n);const a=Mc();try{Av(n),function kv(t){return Me.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&fb(t,n,e,2,i);const o=3==(3&r);if(!a)if(o){const c=t.preOrderCheckHooks;null!==c&&Nc(n,c,null)}else{const c=t.preOrderHooks;null!==c&&Ic(n,c,0,null),Sf(n,0)}if(function bE(t){for(let n=Qf(t);null!==n;n=Zf(n)){if(!n[2])continue;const e=n[9];for(let i=0;i<e.length;i++){const r=e[i],a=r[3];0==(1024&r[2])&&vf(a,1),r[2]|=1024}}}(n),function _E(t){for(let n=Qf(t);null!==n;n=Zf(n))for(let e=10;e<n.length;e++){const i=n[e],r=i[1];mf(i)&&jo(r,i,r.template,i[8])}}(n),null!==t.contentQueries&&db(t,n),!a)if(o){const c=t.contentCheckHooks;null!==c&&Nc(n,c)}else{const c=t.contentHooks;null!==c&&Ic(n,c,1),Sf(n,1)}!function JR(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)Ca(~r);else{const a=r,o=e[++i],s=e[++i];MM(o,a),s(2,n[a])}}}finally{Ca(-1)}}(t,n);const s=t.components;null!==s&&function KR(t,n){for(let e=0;e<n.length;e++)yE(t,n[e])}(n,s);const l=t.viewQuery;if(null!==l&&Mh(2,l,i),!a)if(o){const c=t.viewCheckHooks;null!==c&&Nc(n,c)}else{const c=t.viewHooks;null!==c&&Ic(n,c,2),Sf(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,vf(n[3],-1))}finally{Ec()}}function tE(t,n,e,i){const r=n[10],a=!Mc(),o=Mv(n);try{a&&!o&&r.begin&&r.begin(),o&&ol(t,n,i),jo(t,n,e,i)}finally{a&&!o&&r.end&&r.end()}}function fb(t,n,e,i,r){const a=mi(),o=2&i;try{Ca(-1),o&&n.length>20&&eb(t,n,20,Mc()),e(i,r)}finally{Ca(a)}}function _h(t,n,e){!Rv()||(function uE(t,n,e,i){const r=e.directiveStart,a=e.directiveEnd;t.firstCreatePass||Gs(e,n),oi(i,n);const o=e.initialInputs;for(let s=r;s<a;s++){const l=t.data[s],c=pr(l);c&&gE(n,e,l);const u=js(n,t,s,e);oi(u,n),null!==o&&mE(0,s-r,u,l,0,o),c&&(Fi(e.index,n)[8]=u)}}(t,n,e,Ji(e,n)),128==(128&e.flags)&&function dE(t,n,e){const i=e.directiveStart,r=e.directiveEnd,o=e.index,s=function AM(){return Me.lFrame.currentDirectiveIndex}();try{Ca(o);for(let l=i;l<r;l++){const c=t.data[l],u=n[l];yf(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Cb(c,u)}}finally{Ca(-1),yf(s)}}(t,n,e))}function bh(t,n,e=Ji){const i=n.localNames;if(null!==i){let r=n.index+1;for(let a=0;a<i.length;a+=2){const o=i[a+1],s=-1===o?e(n,t):t[o];t[r++]=s}}}function pb(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Kc(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Kc(t,n,e,i,r,a,o,s,l,c){const u=20+i,d=u+r,f=function nE(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:Ee);return e}(u,d),h="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:e,queries:null,viewQuery:s,declTNode:n,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1}}function vb(t,n,e,i){const r=Ab(n);null===e?r.push(i):(r.push(e),t.firstCreatePass&&Rb(t).push(i,r.length-1))}function _b(t,n,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(e=null===e?{}:e).hasOwnProperty(i)?e[i].push(n,r):e[i]=[n,r]}return e}function Ui(t,n,e,i,r,a,o,s){const l=Ji(n,e);let u,c=n.inputs;!s&&null!=c&&(u=c[i])?(Nb(t,e,u,i,r),Sc(n)&&function oE(t,n){const e=Fi(n,t);16&e[2]||(e[2]|=64)}(e,n.index)):3&n.type&&(i=function aE(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,n.value||"",i):r,rn(a)?a.setProperty(l,i,r):Df(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function yh(t,n,e,i){let r=!1;if(Rv()){const a=function fE(t,n,e){const i=t.directiveRegistry;let r=null;if(i)for(let a=0;a<i.length;a++){const o=i[a];J_(e,o.selectors,!1)&&(r||(r=[]),Vc(Gs(e,n),t,o.type),pr(o)?(wb(t,e),r.unshift(o)):r.push(o))}return r}(t,n,e),o=null===i?null:{"":-1};if(null!==a){r=!0,Sb(e,t.data.length,a.length);for(let u=0;u<a.length;u++){const d=a[u];d.providersResolver&&d.providersResolver(d)}let s=!1,l=!1,c=Go(t,n,a.length,null);for(let u=0;u<a.length;u++){const d=a[u];e.mergedAttrs=Oc(e.mergedAttrs,d.hostAttrs),Tb(t,e,n,c,d),pE(c,d,o),null!==d.contentQueries&&(e.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=128);const f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),s=!0),!l&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function rE(t,n){const i=n.directiveEnd,r=t.data,a=n.attrs,o=[];let s=null,l=null;for(let c=n.directiveStart;c<i;c++){const u=r[c],d=u.inputs,f=null===a||Z_(n)?null:vE(d,a);o.push(f),s=_b(d,c,s),l=_b(u.outputs,c,l)}null!==s&&(s.hasOwnProperty("class")&&(n.flags|=16),s.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=o,n.inputs=s,n.outputs=l}(t,e)}o&&function hE(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const a=e[n[r+1]];if(null==a)throw new tt(-301,!1);i.push(n[r],a)}}}(e,i,o)}return e.mergedAttrs=Oc(e.mergedAttrs,e.attrs),r}function yb(t,n,e,i,r,a){const o=a.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const l=~n.index;(function cE(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(s)!=l&&s.push(l),s.push(i,r,o)}}function Cb(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function wb(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function pE(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;pr(n)&&(e[""]=t)}}function Sb(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function Tb(t,n,e,i,r){t.data[i]=r;const a=r.factory||(r.factory=Ya(r.type)),o=new Us(a,pr(r),null);t.blueprint[i]=o,e[i]=o,yb(t,n,0,i,Go(t,e,r.hostVars,Ee),r)}function gE(t,n,e){const i=Ji(n,t),r=pb(e),a=t[10],o=eu(t,al(t,r,null,e.onPush?64:16,i,n,a,a.createRenderer(i,e),null,null));t[n.index]=o}function Ch(t,n,e,i,r,a,o){if(null==a)rn(t)?t.removeAttribute(n,r,e):n.removeAttribute(r);else{const s=null==o?Re(a):o(a,i||"",r);rn(t)?t.setAttribute(n,r,s,e):e?n.setAttributeNS(e,r,s):n.setAttribute(r,s)}}function mE(t,n,e,i,r,a){const o=a[n];if(null!==o){const s=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==s?i.setInput(e,d,c,u):e[u]=d}}}function vE(t,n){let e=null,i=0;for(;i<n.length;){const r=n[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],n[i+1])),i+=2}else i+=2;else i+=4}return e}function Db(t,n,e,i){return new Array(t,!0,!1,n,null,0,i,e,null,null)}function yE(t,n){const e=Fi(n,t);if(mf(e)){const i=e[1];80&e[2]?jo(i,e,i.template,e[8]):e[5]>0&&wh(e)}}function wh(t){for(let i=Qf(t);null!==i;i=Zf(i))for(let r=10;r<i.length;r++){const a=i[r];if(1024&a[2]){const o=a[1];jo(o,a,o.template,a[8])}else a[5]>0&&wh(a)}const e=t[1].components;if(null!==e)for(let i=0;i<e.length;i++){const r=Fi(e[i],t);mf(r)&&r[5]>0&&wh(r)}}function CE(t,n){const e=Fi(n,t),i=e[1];(function wE(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(i,e),ol(i,e,e[8])}function eu(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Sh(t){for(;t;){t[2]|=64;const n=il(t);if(iM(t)&&!n)return t;t=n}return null}function Dh(t,n,e){const i=n[10];i.begin&&i.begin();try{jo(t,n,t.template,e)}catch(r){throw kb(n,r),r}finally{i.end&&i.end()}}function Mb(t){!function Th(t){for(let n=0;n<t.components.length;n++){const e=t.components[n],i=zf(e),r=i[1];tE(r,i,r.template,e)}}(t[8])}function Mh(t,n,e){wf(0),n(t,e)}const ME=(()=>Promise.resolve(null))();function Ab(t){return t[7]||(t[7]=[])}function Rb(t){return t.cleanup||(t.cleanup=[])}function kb(t,n){const e=t[9],i=e?e.get(Lo,null):null;i&&i.handleError(n)}function Nb(t,n,e,i,r){for(let a=0;a<e.length;){const o=e[a++],s=e[a++],l=n[o],c=t.data[o];null!==c.setInput?c.setInput(l,r,i,s):l[s]=r}}function sa(t,n,e){const i=Dc(n,t);O_(t[11],i,e)}function tu(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==n)for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?a=s:1==a?r=Zd(r,s):2==a&&(i=Zd(i,s+": "+n[++o]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}const Ah=new Be("INJECTOR",-1);class Ib{get(n,e=qs){if(e===qs){const i=new Error(`NullInjectorError: No provider for ${_t(n)}!`);throw i.name="NullInjectorError",i}return e}}const Rh=new Be("Set Injector scope."),sl={},EE={};let Eh;function Pb(){return void 0===Eh&&(Eh=new Ib),Eh}function Ob(t,n=null,e=null,i){const r=xb(t,n,e,i);return r._resolveInjectorDefTypes(),r}function xb(t,n=null,e=null,i){return new kE(t,e,n||Pb(),i)}class kE{constructor(n,e,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];e&&Or(e,s=>this.processProvider(s,n,e)),Or([n],s=>this.processInjectorType(s,[],a)),this.records.set(Ah,$o(void 0,this));const o=this.records.get(Rh);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof n?null:_t(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,e=qs,i=Ne.Default){this.assertNotDestroyed();const r=i_(this),a=va(void 0);try{if(!(i&Ne.SkipSelf)){let s=this.records.get(n);if(void 0===s){const l=function LE(t){return"function"==typeof t||"object"==typeof t&&t instanceof Be}(n)&&Kd(n);s=l&&this.injectableDefInScope(l)?$o(kh(n),sl):null,this.records.set(n,s)}if(null!=s)return this.hydrate(n,s)}return(i&Ne.Self?Pb():this.parent).get(n,e=i&Ne.Optional&&e===qs?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Hc]=o[Hc]||[]).unshift(_t(n)),r)throw o;return function dA(t,n,e,i){const r=t[Hc];throw n[n_]&&r.unshift(n[n_]),t.message=function fA(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=_t(n);if(Array.isArray(n))r=n.map(_t).join(" -> ");else if("object"==typeof n){let a=[];for(let o in n)if(n.hasOwnProperty(o)){let s=n[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):_t(s)))}r=`{${a.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(oA,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[Hc]=null,t}(o,n,"R3InjectorError",this.source)}throw o}finally{va(a),i_(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((i,r)=>n.push(_t(r))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new tt(205,!1)}processInjectorType(n,e,i){if(!(n=Oe(n)))return!1;let r=hv(n);const a=null==r&&n.ngModule||void 0,o=void 0===a?n:a,s=-1!==i.indexOf(o);if(void 0!==a&&(r=hv(a)),null==r)return!1;if(null!=r.imports&&!s){let u;i.push(o);try{Or(r.imports,d=>{this.processInjectorType(d,e,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:f,providers:h}=u[d];Or(h,v=>this.processProvider(v,f,h||Nt))}}this.injectorDefTypes.add(o);const l=Ya(o)||(()=>new o);this.records.set(o,$o(l,sl));const c=r.providers;if(null!=c&&!s){const u=n;Or(c,d=>this.processProvider(d,u,c))}return void 0!==a&&void 0!==n.providers}processProvider(n,e,i){let r=zo(n=Oe(n))?n:Oe(n&&n.provide);const a=function IE(t,n,e){return Vb(t)?$o(void 0,t.useValue):$o(Fb(t),sl)}(n);if(zo(n)||!0!==n.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=$o(void 0,sl,!0),o.factory=()=>xf(o.multi),this.records.set(r,o)),r=n,o.multi.push(n)}this.records.set(r,a)}hydrate(n,e){return e.value===sl&&(e.value=EE,e.value=e.factory()),"object"==typeof e.value&&e.value&&function VE(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Oe(n.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function kh(t){const n=Kd(t),e=null!==n?n.factory:Ya(t);if(null!==e)return e;if(t instanceof Be)throw new tt(204,!1);if(t instanceof Function)return function NE(t){const n=t.length;if(n>0)throw Ws(n,"?"),new tt(204,!1);const e=function $D(t){const n=t&&(t[_c]||t[pv]);if(n){const e=function zD(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),n}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new tt(204,!1)}function Fb(t,n,e){let i;if(zo(t)){const r=Oe(t);return Ya(r)||kh(r)}if(Vb(t))i=()=>Oe(t.useValue);else if(function OE(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...xf(t.deps||[]));else if(function PE(t){return!(!t||!t.useExisting)}(t))i=()=>Q(Oe(t.useExisting));else{const r=Oe(t&&(t.useClass||t.provide));if(!function FE(t){return!!t.deps}(t))return Ya(r)||kh(r);i=()=>new r(...xf(t.deps))}return i}function $o(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Vb(t){return null!==t&&"object"==typeof t&&lA in t}function zo(t){return"function"==typeof t}let mn=(()=>{class t{static create(e,i){var r;if(Array.isArray(e))return Ob({name:""},i,e,"");{const a=null!==(r=e.name)&&void 0!==r?r:"";return Ob({name:a},e.parent,e.providers,a)}}}return t.THROW_IF_NOT_FOUND=qs,t.NULL=new Ib,t.\u0275prov=fe({token:t,providedIn:"any",factory:()=>Q(Ah)}),t.__NG_ELEMENT_ID__=-1,t})();function WE(t,n){kc(zf(t)[1],In())}function pt(t){let n=function Xb(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if(pr(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new tt(903,"");r=n.\u0275dir}if(r){if(e){i.push(r);const o=t;o.inputs=Ph(t.inputs),o.declaredInputs=Ph(t.declaredInputs),o.outputs=Ph(t.outputs);const s=r.hostBindings;s&&QE(t,s);const l=r.viewQuery,c=r.contentQueries;if(l&&YE(t,l),c&&XE(t,c),Qd(t.inputs,r.inputs),Qd(t.declaredInputs,r.declaredInputs),Qd(t.outputs,r.outputs),pr(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let o=0;o<a.length;o++){const s=a[o];s&&s.ngInherit&&s(t),s===pt&&(e=!1)}}n=Object.getPrototypeOf(n)}!function qE(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=Oc(r.hostAttrs,e=Oc(e,r.hostAttrs))}}(i)}function Ph(t){return t===yo?{}:t===Nt?[]:t}function YE(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function XE(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,a)=>{n(i,r,a),e(i,r,a)}:n}function QE(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}let nu=null;function Wo(){if(!nu){const t=Mt.Symbol;if(t&&t.iterator)nu=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<n.length;++e){const i=n[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(nu=i)}}}return nu}function ll(t){return!!Oh(t)&&(Array.isArray(t)||!(t instanceof Map)&&Wo()in t)}function Oh(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ur(t,n,e){return t[n]=e}function si(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function Ja(t,n,e,i){const r=si(t,n,e);return si(t,n+1,i)||r}function er(t,n,e,i,r,a){const o=Ja(t,n,e,i);return Ja(t,n+2,r,a)||o}function Ct(t,n,e,i){const r=U();return si(r,Mo(),n)&&(nt(),function Br(t,n,e,i,r,a){const o=Ji(t,n);Ch(n[11],o,a,t.value,e,i,r)}(an(),r,t,n,e,i)),Ct}function Yo(t,n,e,i){return si(t,Mo(),e)?n+Re(e)+i:Ee}function Qo(t,n,e,i,r,a,o,s){const c=function iu(t,n,e,i,r){const a=Ja(t,n,e,i);return si(t,n+2,r)||a}(t,ra(),e,r,o);return aa(3),c?n+Re(e)+i+Re(r)+a+Re(o)+s:Ee}function k(t,n,e,i,r,a,o,s){const l=U(),c=nt(),u=t+20,d=c.firstCreatePass?function ik(t,n,e,i,r,a,o,s,l){const c=n.consts,u=Ho(n,t,4,o||null,ya(c,s));yh(n,e,u,ya(c,l)),kc(n,u);const d=u.tViews=Kc(2,u,i,r,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c);return null!==n.queries&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}(u,c,l,n,e,i,r,a,o):c.data[u];Pr(d,!1);const f=l[11].createComment("");Yc(c,l,f,d),oi(f,l),eu(l,l[u]=Db(f,l,f,d)),Tc(d)&&_h(c,l,d),null!=o&&bh(l,d,s)}function It(t){return Do(function TM(){return Me.lFrame.contextLView}(),20+t)}function M(t,n=Ne.Default){const e=U();return null===e?Q(t,n):Wv(In(),e,Oe(t),n)}function Bh(){throw new Error("invalid")}function T(t,n,e){const i=U();return si(i,Mo(),n)&&Ui(nt(),an(),i,t,n,i[11],e,!1),T}function Uh(t,n,e,i,r){const o=r?"class":"style";Nb(t,e,n.inputs[o],o,i)}function m(t,n,e,i){const r=U(),a=nt(),o=20+t,s=r[11],l=r[o]=Kf(s,n,function xM(){return Me.lFrame.currentNamespace}()),c=a.firstCreatePass?function Tk(t,n,e,i,r,a,o){const s=n.consts,c=Ho(n,t,2,r,ya(s,a));return yh(n,e,c,ya(s,o)),null!==c.attrs&&tu(c,c.attrs,!1),null!==c.mergedAttrs&&tu(c,c.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,c),c}(o,a,r,0,n,e,i):a.data[o];Pr(c,!0);const u=c.mergedAttrs;null!==u&&Pc(s,l,u);const d=c.classes;null!==d&&ah(s,l,d);const f=c.styles;return null!==f&&Y_(s,l,f),64!=(64&c.flags)&&Yc(a,r,l,c),0===function bM(){return Me.lFrame.elementDepthCount}()&&oi(l,r),function yM(){Me.lFrame.elementDepthCount++}(),Tc(c)&&(_h(a,r,c),function hb(t,n,e){if(lf(n)){const r=n.directiveEnd;for(let a=n.directiveStart;a<r;a++){const o=t.data[a];o.contentQueries&&o.contentQueries(1,e[a],a)}}}(a,c,r)),null!==i&&bh(r,c),m}function g(){let t=In();_f()?bf():(t=t.parent,Pr(t,!1));const n=t;!function CM(){Me.lFrame.elementDepthCount--}();const e=nt();return e.firstCreatePass&&(kc(e,t),lf(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function UM(t){return 0!=(16&t.flags)}(n)&&Uh(e,n,U(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function HM(t){return 0!=(32&t.flags)}(n)&&Uh(e,n,U(),n.stylesWithoutHost,!1),g}function O(t,n,e,i){return m(t,n,e,i),g(),O}function re(){return U()}function ul(t){return!!t&&"function"==typeof t.then}const jh=function my(t){return!!t&&"function"==typeof t.subscribe};function N(t,n,e,i){const r=U(),a=nt(),o=In();return function _y(t,n,e,i,r,a,o,s){const l=Tc(i),u=t.firstCreatePass&&Rb(t),d=n[8],f=Ab(n);let h=!0;if(3&i.type||s){const C=Ji(i,n),S=s?s(C):C,_=f.length,D=s?E=>s(Mn(E[i.index])):i.index;if(rn(e)){let E=null;if(!s&&l&&(E=function Mk(t,n,e,i){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const o=r[a];if(o===e&&r[a+1]===i){const s=n[7],l=r[a+2];return s.length>l?s[l]:null}"string"==typeof o&&(a+=2)}return null}(t,n,r,i.index)),null!==E)(E.__ngLastListenerFn__||E).__ngNextListenerFn__=a,E.__ngLastListenerFn__=a,h=!1;else{a=$h(i,n,d,a,!1);const A=e.listen(S,r,a);f.push(a,A),u&&u.push(r,D,_,_+1)}}else a=$h(i,n,d,a,!0),S.addEventListener(r,a,o),f.push(a),u&&u.push(r,D,_,o)}else a=$h(i,n,d,a,!1);const v=i.outputs;let b;if(h&&null!==v&&(b=v[r])){const C=b.length;if(C)for(let S=0;S<C;S+=2){const y=n[b[S]][b[S+1]].subscribe(a),Y=f.length;f.push(a,y),u&&u.push(r,i.index,Y,-(Y+1))}}}(a,r,r[11],o,t,n,!!e,i),N}function by(t,n,e,i){try{return!1!==e(i)}catch(r){return kb(t,r),!1}}function $h(t,n,e,i,r){return function a(o){if(o===Function)return i;const s=2&t.flags?Fi(t.index,n):n;0==(32&n[2])&&Sh(s);let l=by(n,0,i,o),c=a.__ngNextListenerFn__;for(;c;)l=by(n,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function R(t=1){return function EM(t){return(Me.lFrame.contextLView=function kM(t,n){for(;t>0;)n=n[15],t--;return n}(t,Me.lFrame.contextLView))[8]}(t)}function Ak(t,n){let e=null;const i=function xR(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(0==(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const a=n[r];if("*"!==a){if(null===i?J_(t,a,!0):LR(i,a))return r}else e=r}return e}function au(t){const n=U()[16][6];if(!n.projection){const i=n.projection=Ws(t?t.length:1,null),r=i.slice();let a=n.child;for(;null!==a;){const o=t?Ak(a,t):0;null!==o&&(r[o]?r[o].projectionNext=a:i[o]=a,r[o]=a),a=a.next}}}function ou(t,n=0,e){const i=U(),r=nt(),a=Ho(r,20+t,16,null,e||null);null===a.projection&&(a.projection=n),bf(),64!=(64&a.flags)&&function RR(t,n,e){q_(n[11],0,n,e,V_(t,e,n),H_(e.parent||n[6],e,n))}(r,i,a)}function An(t,n,e){return su(t,"",n,"",e),An}function su(t,n,e,i,r){const a=U(),o=Yo(a,n,e,i);return o!==Ee&&Ui(nt(),an(),a,t,o,a[11],r,!1),su}function Ry(t,n,e,i,r){const a=t[e+1],o=null===n;let s=i?mr(a):oa(a),l=!1;for(;0!==s&&(!1===l||o);){const u=t[s+1];kk(t[s],n)&&(l=!0,t[s+1]=i?lh(u):oh(u)),s=i?mr(u):oa(u)}l&&(t[e+1]=i?oh(a):lh(a))}function kk(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Oo(t,n)>=0}const On={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ey(t){return t.substring(On.key,On.keyEnd)}function ky(t,n){const e=On.textEnd;return e===n?-1:(n=On.keyEnd=function Ok(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,On.key=n,e),is(t,n,e))}function is(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function dl(t,n,e){return _r(t,n,e,!1),dl}function we(t,n){return _r(t,n,null,!0),we}function Da(t){br(Vi,Gr,t,!0)}function Gr(t,n){for(let e=function Ik(t){return function Iy(t){On.key=0,On.keyEnd=0,On.value=0,On.valueEnd=0,On.textEnd=t.length}(t),ky(t,is(t,0,On.textEnd))}(n);e>=0;e=ky(n,e))Vi(t,Ey(n),!0)}function _r(t,n,e,i){const r=U(),a=nt(),o=aa(2);a.firstUpdatePass&&Fy(a,t,o,i),n!==Ee&&si(r,o,n)&&Ly(a,a.data[mi()],r,r[11],t,r[o+1]=function $k(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=_t(Li(t)))),t}(n,e),i,o)}function br(t,n,e,i){const r=nt(),a=aa(2);r.firstUpdatePass&&Fy(r,null,a,i);const o=U();if(e!==Ee&&si(o,a,e)){const s=r.data[mi()];if(Uy(s,i)&&!xy(r,a)){let l=i?s.classesWithoutHost:s.stylesWithoutHost;null!==l&&(e=Zd(l,e||"")),Uh(r,s,o,e,i)}else!function jk(t,n,e,i,r,a,o,s){r===Ee&&(r=Nt);let l=0,c=0,u=0<r.length?r[0]:null,d=0<a.length?a[0]:null;for(;null!==u||null!==d;){const f=l<r.length?r[l+1]:void 0,h=c<a.length?a[c+1]:void 0;let b,v=null;u===d?(l+=2,c+=2,f!==h&&(v=d,b=h)):null===d||null!==u&&u<d?(l+=2,v=u):(c+=2,v=d,b=h),null!==v&&Ly(t,n,e,i,v,b,o,s),u=l<r.length?r[l]:null,d=c<a.length?a[c]:null}}(r,s,o,o[11],o[a+1],o[a+1]=function Gk(t,n,e){if(null==e||""===e)return Nt;const i=[],r=Li(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(i,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(i,a,r[a]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,a)}}function xy(t,n){return n>=t.expandoStartIndex}function Fy(t,n,e,i){const r=t.data;if(null===r[e+1]){const a=r[mi()],o=xy(t,e);Uy(a,i)&&null===n&&!o&&(n=!1),n=function Lk(t,n,e,i){const r=function Cf(t){const n=Me.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let a=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=fl(e=zh(null,t,n,e,i),n.attrs,i),a=null);else{const o=n.directiveStylingLast;if(-1===o||t[o]!==r)if(e=zh(r,t,n,e,i),null===a){let l=function Bk(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==oa(i))return t[mr(i)]}(t,n,i);void 0!==l&&Array.isArray(l)&&(l=zh(null,t,n,l[1],i),l=fl(l,n.attrs,i),function Uk(t,n,e,i){t[mr(e?n.classBindings:n.styleBindings)]=i}(t,n,i,l))}else a=function Hk(t,n,e){let i;const r=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<r;a++)i=fl(i,t[a].hostAttrs,e);return fl(i,n.attrs,e)}(t,n,i)}return void 0!==a&&(i?n.residualClasses=a:n.residualStyles=a),e}(r,a,n,i),function Rk(t,n,e,i,r,a){let o=a?n.classBindings:n.styleBindings,s=mr(o),l=oa(o);t[i]=e;let u,c=!1;if(Array.isArray(e)){const d=e;u=d[1],(null===u||Oo(d,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const f=mr(t[s+1]);t[i+1]=Qc(f,s),0!==f&&(t[f+1]=sh(t[f+1],i)),t[s+1]=function GR(t,n){return 131071&t|n<<17}(t[s+1],i)}else t[i+1]=Qc(s,0),0!==s&&(t[s+1]=sh(t[s+1],i)),s=i;else t[i+1]=Qc(l,0),0===s?s=i:t[l+1]=sh(t[l+1],i),l=i;c&&(t[i+1]=oh(t[i+1])),Ry(t,u,i,!0),Ry(t,u,i,!1),function Ek(t,n,e,i,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof n&&Oo(a,n)>=0&&(e[i+1]=lh(e[i+1]))}(n,u,t,i,a),o=Qc(s,l),a?n.classBindings=o:n.styleBindings=o}(r,a,n,e,o,i)}}function zh(t,n,e,i,r){let a=null;const o=e.directiveEnd;let s=e.directiveStylingLast;for(-1===s?s=e.directiveStart:s++;s<o&&(a=n[s],i=fl(i,a.hostAttrs,r),a!==t);)s++;return null!==t&&(e.directiveStylingLast=s),i}function fl(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let a=0;a<n.length;a++){const o=n[a];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Vi(t,o,!!e||n[++a]))}return void 0===t?null:t}function Ly(t,n,e,i,r,a,o,s){if(!(3&n.type))return;const l=t.data,c=l[s+1];lu(function ib(t){return 1==(1&t)}(c)?By(l,n,e,r,oa(c),o):void 0)||(lu(a)||function nb(t){return 2==(2&t)}(c)&&(a=By(l,null,e,r,s,o)),function kR(t,n,e,i,r){const a=rn(t);if(n)r?a?t.addClass(e,i):e.classList.add(i):a?t.removeClass(e,i):e.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Bi.DashCase;if(null==r)a?t.removeStyle(e,i,o):e.style.removeProperty(i);else{const s="string"==typeof r&&r.endsWith("!important");s&&(r=r.slice(0,-10),o|=Bi.Important),a?t.setStyle(e,i,r,o):e.style.setProperty(i,r,s?"important":"")}}}(i,o,Dc(mi(),e),r,a))}function By(t,n,e,i,r,a){const o=null===n;let s;for(;r>0;){const l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let f=e[r+1];f===Ee&&(f=d?Nt:void 0);let h=d?If(f,i):u===i?f:void 0;if(c&&!lu(h)&&(h=If(l,i)),lu(h)&&(s=h,o))return s;const v=t[r+1];r=o?mr(v):oa(v)}if(null!==n){let l=a?n.residualClasses:n.residualStyles;null!=l&&(s=If(l,i))}return s}function lu(t){return void 0!==t}function Uy(t,n){return 0!=(t.flags&(n?16:32))}function w(t,n=""){const e=U(),i=nt(),r=t+20,a=i.firstCreatePass?Ho(i,r,1,n,null):i.data[r],o=e[r]=Jf(e[11],n);Yc(i,e,o,a),Pr(a,!1)}function Ie(t){return z("",t,""),Ie}function z(t,n,e){const i=U(),r=Yo(i,t,n,e);return r!==Ee&&sa(i,mi(),r),z}function Hi(t,n,e,i,r){const a=U(),o=function Xo(t,n,e,i,r,a){const s=Ja(t,ra(),e,r);return aa(2),s?n+Re(e)+i+Re(r)+a:Ee}(a,t,n,e,i,r);return o!==Ee&&sa(a,mi(),o),Hi}function Wh(t,n,e,i,r,a,o){const s=U(),l=Qo(s,t,n,e,i,r,a,o);return l!==Ee&&sa(s,mi(),l),Wh}function qh(t,n,e){br(Vi,Gr,Yo(U(),t,n,e),!0)}function qy(t,n,e,i,r,a,o,s,l){br(Vi,Gr,function Zo(t,n,e,i,r,a,o,s,l,c){const d=er(t,ra(),e,r,o,l);return aa(4),d?n+Re(e)+i+Re(r)+a+Re(o)+s+Re(l)+c:Ee}(U(),t,n,e,i,r,a,o,s,l),!0)}function Ma(t,n,e){const i=U();return si(i,Mo(),n)&&Ui(nt(),an(),i,t,n,i[11],e,!0),Ma}const Ka=void 0;var lN=["en",[["a","p"],["AM","PM"],Ka],[["AM","PM"],Ka,Ka],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ka,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ka,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ka,"{1} 'at' {0}",Ka],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function sN(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let rs={};function _i(t){const n=function cN(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=o0(n);if(e)return e;const i=n.split("-")[0];if(e=o0(i),e)return e;if("en"===i)return lN;throw new Error(`Missing locale data for the locale "${t}".`)}function a0(t){return _i(t)[ie.PluralCase]}function o0(t){return t in rs||(rs[t]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[t]),rs[t]}var ie=(()=>((ie=ie||{})[ie.LocaleId=0]="LocaleId",ie[ie.DayPeriodsFormat=1]="DayPeriodsFormat",ie[ie.DayPeriodsStandalone=2]="DayPeriodsStandalone",ie[ie.DaysFormat=3]="DaysFormat",ie[ie.DaysStandalone=4]="DaysStandalone",ie[ie.MonthsFormat=5]="MonthsFormat",ie[ie.MonthsStandalone=6]="MonthsStandalone",ie[ie.Eras=7]="Eras",ie[ie.FirstDayOfWeek=8]="FirstDayOfWeek",ie[ie.WeekendRange=9]="WeekendRange",ie[ie.DateFormat=10]="DateFormat",ie[ie.TimeFormat=11]="TimeFormat",ie[ie.DateTimeFormat=12]="DateTimeFormat",ie[ie.NumberSymbols=13]="NumberSymbols",ie[ie.NumberFormats=14]="NumberFormats",ie[ie.CurrencyCode=15]="CurrencyCode",ie[ie.CurrencySymbol=16]="CurrencySymbol",ie[ie.CurrencyName=17]="CurrencyName",ie[ie.Currencies=18]="Currencies",ie[ie.Directionality=19]="Directionality",ie[ie.PluralCase=20]="PluralCase",ie[ie.ExtraData=21]="ExtraData",ie))();const uN=["zero","one","two","few","many"],cu="en-US",uu={marker:"element"},du={marker:"ICU"};var on=(()=>((on=on||{})[on.SHIFT=2]="SHIFT",on[on.APPEND_EAGERLY=1]="APPEND_EAGERLY",on[on.COMMENT=2]="COMMENT",on))();let s0=cu;function l0(t,n,e){const i=n.insertBeforeIndex,r=Array.isArray(i)?i[0]:i;return null===r?G_(t,0,e):Mn(e[r])}function c0(t,n,e,i,r){const a=n.insertBeforeIndex;if(Array.isArray(a)){let o=i,s=null;if(3&n.type||(s=o,o=r),null!==o&&0==(2&n.flags))for(let l=1;l<a.length;l++)Za(t,o,e[a[l]],s,!1)}}function u0(t,n){if(t.push(n),t.length>1)for(let e=t.length-2;e>=0;e--){const i=t[e];d0(i)||gN(i,n)&&null===mN(i)&&vN(i,n.index)}}function d0(t){return!(64&t.type)}function gN(t,n){return d0(n)||t.index>n.index}function mN(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function vN(t,n){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=n:($_(l0,c0),t.insertBeforeIndex=n)}function hl(t,n){const e=t.data[n];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function yN(t,n,e){const i=vh(t,e,64,null,null);return u0(n,i),i}function fu(t,n){const e=n[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function f0(t){return t>>>17}function h0(t){return(131070&t)>>>1}let pl=0,gl=0;function g0(t,n,e,i){const r=e[11];let o,a=null;for(let s=0;s<n.length;s++){const l=n[s];if("string"==typeof l){const c=n[++s];null===e[c]&&(e[c]=Jf(r,l))}else if("number"==typeof l)switch(1&l){case 0:const c=f0(l);let u,d;if(null===a&&(a=c,o=qc(r,i)),c===a?(u=i,d=o):(u=null,d=Mn(e[c])),null!==d){const b=h0(l);Za(r,d,e[b],u,!1);const S=hl(t,b);if(null!==S&&"object"==typeof S){const _=fu(S,e);null!==_&&g0(t,S.create[_],e,e[S.anchorIdx])}}break;case 1:const h=n[++s],v=n[++s];Ch(r,Dc(l>>>1,e),null,null,h,v,null)}else switch(l){case du:const c=n[++s],u=n[++s];null===e[u]&&oi(e[u]=vR(r,c),e);break;case uu:const d=n[++s],f=n[++s];null===e[f]&&oi(e[f]=Kf(r,d,null),e)}}}function m0(t,n,e,i,r){for(let a=0;a<e.length;a++){const o=e[a],s=e[++a];if(o&r){let l="";for(let c=a+1;c<=a+s;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=Re(n[i-u]);else{const d=u>>>2;switch(3&u){case 1:const f=e[++c],h=e[++c],v=t.data[d];"string"==typeof v?Ch(n[11],n[d],null,v,f,l,h):Ui(t,v,n,f,l,n[11],h,!1);break;case 0:const b=n[d];null!==b&&O_(n[11],b,l);break;case 2:DN(t,hl(t,d),n,l);break;case 3:v0(t,hl(t,d),i,n)}}}}else{const l=e[a+1];if(l>0&&3==(3&l)){const u=hl(t,l>>>2);n[u.currentCaseLViewIndex]<0&&v0(t,u,i,n)}}a+=s}}function v0(t,n,e,i){let r=i[n.currentCaseLViewIndex];if(null!==r){let a=pl;r<0&&(r=i[n.currentCaseLViewIndex]=~r,a=-1),m0(t,i,n.update[r],e,a)}}function DN(t,n,e,i){const r=function MN(t,n){let e=t.cases.indexOf(n);if(-1===e)switch(t.type){case 1:{const i=function dN(t,n){const e=a0(n)(parseInt(t,10)),i=uN[e];return void 0!==i?i:"other"}(n,function pN(){return s0}());e=t.cases.indexOf(i),-1===e&&"other"!==i&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(n,i);if(fu(n,e)!==r&&(_0(t,n,e),e[n.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const o=e[n.anchorIdx];o&&g0(t,n.create[r],e,o)}}function _0(t,n,e){let i=fu(n,e);if(null!==i){const r=n.remove[i];for(let a=0;a<r.length;a++){const o=r[a];if(o>0){const s=Dc(o,e);null!==s&&W_(e[11],s)}else _0(t,hl(t,~o),e)}}}function AN(){const t=[];let e,i,n=-1;function a(s,l){n=0;const c=fu(s,l);i=null!==c?s.remove[c]:Nt}function o(){if(n<i.length){const s=i[n++];return s>0?e[s]:(t.push(n,i),a(e[1].data[~s],e),o())}return 0===t.length?null:(i=t.pop(),n=t.pop(),o())}return function r(s,l){for(e=l;t.length;)t.pop();return a(s.value,l),o}}const hu=/\ufffd(\d+):?\d*\ufffd/gi,EN=/\ufffd(\d+)\ufffd/,y0=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,kN=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,NN=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,IN=/\uE500/g;function C0(t,n,e,i,r,a,o){const s=Go(t,i,1,null);let l=s<<on.SHIFT,c=Bs();n===c&&(c=null),null===c&&(l|=on.APPEND_EAGERLY),o&&(l|=on.COMMENT,function mR(t){void 0===Yf&&(Yf=t())}(AN)),r.push(l,null===a?"":a);const u=vh(t,s,o?32:1,null===a?"":a,null);u0(e,u);const d=u.index;return Pr(u,!1),null!==c&&n!==c&&function bN(t,n){let e=t.insertBeforeIndex;null===e?($_(l0,c0),e=t.insertBeforeIndex=[null,n]):(function na(t,n,e){t!=n&&$t(e,t,n,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(n))}(c,d),u}function xN(t,n,e,i,r,a,o){const s=o.match(hu),l=C0(t,n,e,a,i,s?null:o,!1);s&&as(r,o,l.index,null,0,null)}function as(t,n,e,i,r,a){const o=t.length,s=o+1;t.push(null,null);const l=o+2,c=n.split(hu);let u=0;for(let d=0;d<c.length;d++){const f=c[d];if(1&d){const h=r+parseInt(f,10);t.push(-1-h),u|=w0(h)}else""!==f&&t.push(f)}return t.push(e<<2|(i?1:0)),i&&t.push(i,a),t[o]=u,t[s]=t.length-l,u}function w0(t){return 1<<Math.min(t,31)}function S0(t){let n,a,e="",i=0,r=!1;for(;null!==(n=kN.exec(t));)r?n[0]===`\ufffd/*${a}\ufffd`&&(i=n.index,r=!1):(e+=t.substring(i,n.index+n[0].length),a=n[1],r=!0);return e+=t.substr(i),e}function T0(t,n,e,i,r,a){let o=0;const s={type:r.type,currentCaseLViewIndex:Go(t,n,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};(function jN(t,n,e){t.push(w0(n.mainBinding),2,-1-n.mainBinding,e<<2|2)})(e,r,a),function _N(t,n,e){const i=t.data[n];null===i?t.data[n]=e:i.value=e}(t,a,s);const l=r.values;for(let c=0;c<l.length;c++){const u=l[c],d=[];for(let f=0;f<u.length;f++){const h=u[f];if("string"!=typeof h){const v=d.push(h)-1;u[f]=`\x3c!--\ufffd${v}\ufffd--\x3e`}}o=HN(t,s,n,e,i,r.cases[c],u.join(""),d)|o}o&&function $N(t,n,e){t.push(n,1,e<<2|3)}(e,o,a)}function UN(t){const n=[],e=[];let i=1,r=0;const a=Yh(t=t.replace(y0,function(o,s,l){return i="select"===l?0:1,r=parseInt(s.substr(1),10),""}));for(let o=0;o<a.length;){let s=a[o++].trim();1===i&&(s=s.replace(/\s*(?:=)?(\w+)\s*/,"$1")),s.length&&n.push(s);const l=Yh(a[o++]);n.length>e.length&&e.push(l)}return{type:i,mainBinding:r,cases:n,values:e}}function Yh(t){if(!t)return[];let n=0;const e=[],i=[],r=/[{}]/g;let a;for(r.lastIndex=0;a=r.exec(t);){const s=a.index;if("}"==a[0]){if(e.pop(),0==e.length){const l=t.substring(n,s);y0.test(l)?i.push(UN(l)):i.push(l),n=s+1}}else{if(0==e.length){const l=t.substring(n,s);i.push(l),n=s+1}e.push("{")}}const o=t.substring(n);return i.push(o),i}function HN(t,n,e,i,r,a,o,s){const l=[],c=[],u=[];n.cases.push(a),n.create.push(l),n.remove.push(c),n.update.push(u);const f=h_(pf()).getInertBodyElement(o),h=Gf(f)||f;return h?D0(t,n,e,i,l,c,u,h,r,s,0):0}function D0(t,n,e,i,r,a,o,s,l,c,u){let d=0,f=s.firstChild;for(;f;){const h=Go(t,e,1,null);switch(f.nodeType){case Node.ELEMENT_NODE:const v=f,b=v.tagName.toLowerCase();if(Bf.hasOwnProperty(b)){Xh(r,uu,b,l,h),t.data[h]=b;const D=v.attributes;for(let E=0;E<D.length;E++){const A=D.item(E),y=A.name.toLowerCase();A.value.match(hu)?__.hasOwnProperty(y)&&as(o,A.value,h,A.name,0,Uf[y]?Js:Hf[y]?p_:null):zN(r,h,A)}d=D0(t,n,e,i,r,a,o,f,h,c,u+1)|d,M0(a,h,u)}break;case Node.TEXT_NODE:const C=f.textContent||"",S=C.match(hu);Xh(r,null,S?"":C,l,h),M0(a,h,u),S&&(d=as(o,C,h,null,0,null)|d);break;case Node.COMMENT_NODE:const _=EN.exec(f.textContent||"");if(_){const E=c[parseInt(_[1],10)];Xh(r,du,"",l,h),T0(t,e,i,l,E,h),GN(a,h,u)}}f=f.nextSibling}return d}function M0(t,n,e){0===e&&t.push(n)}function GN(t,n,e){0===e&&(t.push(~n),t.push(n))}function Xh(t,n,e,i,r){null!==n&&t.push(n),t.push(e,r,function CN(t,n,e){return t|n<<17|e<<1}(0,i,r))}function zN(t,n,e){t.push(n<<1|1,e.name,e.value)}function R0(t,n,e=-1){const i=nt(),r=U(),a=20+t,o=ya(i.consts,n),s=Bs();i.firstCreatePass&&function ON(t,n,e,i,r,a){const o=Bs(),s=[],l=[],c=[[]];r=function BN(t,n){if(function LN(t){return-1===t}(n))return S0(t);{const e=t.indexOf(`:${n}\ufffd`)+2+n.toString().length,i=t.search(new RegExp(`\ufffd\\/\\*\\d+:${n}\ufffd`));return S0(t.substring(e,i))}}(r,a);const u=function PN(t){return t.replace(IN," ")}(r).split(NN);for(let d=0;d<u.length;d++){let f=u[d];if(0==(1&d)){const h=Yh(f);for(let v=0;v<h.length;v++){let b=h[v];if(0==(1&v)){const C=b;""!==C&&xN(t,o,c[0],s,l,e,C)}else{const C=b;if("object"!=typeof C)throw new Error(`Unable to parse ICU expression in "${r}" message.`);T0(t,e,l,n,C,C0(t,o,c[0],e,s,"",!0).index)}}}else{const h=47===f.charCodeAt(0),b=(f.charCodeAt(h?1:0),20+Number.parseInt(f.substring(h?2:1)));if(h)c.shift(),Pr(Bs(),!1);else{const C=yN(t,c[0],b);c.unshift([]),Pr(C,!0)}}}t.data[i]={create:s,update:l}}(i,null===s?0:s.index,r,a,o,e);const l=i.data[a],u=L_(i,s===r[6]?null:s,r);(function TN(t,n,e,i){const r=t[11];for(let a=0;a<n.length;a++){const o=n[a++],s=n[a],l=(o&on.COMMENT)===on.COMMENT,c=(o&on.APPEND_EAGERLY)===on.APPEND_EAGERLY,u=o>>>on.SHIFT;let d=t[u];null===d&&(d=t[u]=l?r.createComment(s):Jf(r,s)),c&&null!==e&&Za(r,e,d,i,!1)}})(r,l.create,u,s&&8&s.type?r[s.index]:null),Nv(!0)}function la(t,n,e){R0(t,n,e),function E0(){Nv(!1)}()}function pu(t){return function wN(t){t&&(pl|=1<<Math.min(gl,31)),gl++}(si(U(),Mo(),t)),pu}function Zh(t,n,e,i,r){if(t=Oe(t),Array.isArray(t))for(let a=0;a<t.length;a++)Zh(t[a],n,e,i,r);else{const a=nt(),o=U();let s=zo(t)?t:Oe(t.provide),l=Fb(t);const c=In(),u=1048575&c.providerIndexes,d=c.directiveStart,f=c.providerIndexes>>20;if(zo(t)||!t.multi){const h=new Us(l,r,M),v=Kh(s,n,r?u:u+f,d);-1===v?(Vc(Gs(c,o),a,s),Jh(a,t,n.length),n.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(h),o.push(h)):(e[v]=h,o[v]=h)}else{const h=Kh(s,n,u+f,d),v=Kh(s,n,u,u+f),b=h>=0&&e[h],C=v>=0&&e[v];if(r&&!C||!r&&!b){Vc(Gs(c,o),a,s);const S=function aI(t,n,e,i,r){const a=new Us(t,e,M);return a.multi=[],a.index=n,a.componentProviders=0,k0(a,r,i&&!e),a}(r?rI:iI,e.length,r,i,l);!r&&C&&(e[v].providerFactory=S),Jh(a,t,n.length,0),n.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(S),o.push(S)}else Jh(a,t,h>-1?h:v,k0(e[r?v:h],l,!r&&i));!r&&i&&C&&e[v].componentProviders++}}}function Jh(t,n,e,i){const r=zo(n),a=function xE(t){return!!t.useClass}(n);if(r||a){const l=(a?Oe(n.useClass):n).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function k0(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function Kh(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function iI(t,n,e,i){return ep(this.multi,[])}function rI(t,n,e,i){const r=this.multi;let a;if(this.providerFactory){const o=this.providerFactory.componentProviders,s=js(e,e[1],this.providerFactory.index,i);a=s.slice(0,o),ep(r,a);for(let l=o;l<s.length;l++)a.push(s[l])}else a=[],ep(r,a);return a}function ep(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function Pt(t,n=[]){return e=>{e.providersResolver=(i,r)=>function nI(t,n,e){const i=nt();if(i.firstCreatePass){const r=pr(t);Zh(e,i.data,i.blueprint,r,!0),Zh(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class N0{}class lI{resolveComponentFactory(n){throw function sI(t){const n=Error(`No component factory found for ${_t(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let eo=(()=>{class t{}return t.NULL=new lI,t})();function cI(){return os(In(),U())}function os(t,n){return new At(Ji(t,n))}let At=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=cI,t})();function uI(t){return t instanceof At?t.nativeElement:t}class tp{}let tr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function fI(){const t=U(),e=Fi(In().index,t);return function dI(t){return t[11]}(Ir(e)?e:t)}(),t})(),hI=(()=>{class t{}return t.\u0275prov=fe({token:t,providedIn:"root",factory:()=>null}),t})();class vl{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const pI=new vl("13.2.3"),np={};function gu(t,n,e,i,r=!1){for(;null!==e;){const a=n[e.index];if(null!==a&&i.push(Mn(a)),hr(a))for(let s=10;s<a.length;s++){const l=a[s],c=l[1].firstChild;null!==c&&gu(l[1],l,c,i)}const o=e.type;if(8&o)gu(t,n,e.child,i);else if(32&o){const s=Xf(e,n);let l;for(;l=s();)i.push(l)}else if(16&o){const s=z_(n,e);if(Array.isArray(s))i.push(...s);else{const l=il(n[16]);gu(l[1],l,s,i,!0)}}e=r?e.projectionNext:e.next}return i}class _l{constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,e=n[1];return gu(e,n,e.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(hr(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(eh(n,i),Bc(e,i))}this._attachedToViewContainer=!1}F_(this._lView[1],this._lView)}onDestroy(n){vb(this._lView[1],this._lView,null,n)}markForCheck(){Sh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Dh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function TE(t,n,e){Ac(!0);try{Dh(t,n,e)}finally{Ac(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new tt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function yR(t,n){rl(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new tt(902,"");this._appRef=n}}class gI extends _l{constructor(n){super(n),this._view=n}detectChanges(){Mb(this._view)}checkNoChanges(){!function DE(t){Ac(!0);try{Mb(t)}finally{Ac(!1)}}(this._view)}get context(){return null}}class P0 extends eo{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=ii(n);return new ip(e,this.ngModule)}}function O0(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}const vI=new Be("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>R_});class ip extends N0{constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function UR(t){return t.map(BR).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return O0(this.componentDef.inputs)}get outputs(){return O0(this.componentDef.outputs)}create(n,e,i,r){const a=(r=r||this.ngModule)?function _I(t,n){return{get:(e,i,r)=>{const a=t.get(e,np,r);return a!==np||i===np?a:n.get(e,i,r)}}}(n,r.injector):n,o=a.get(tp,Dv),s=a.get(hI,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function mb(t,n,e){if(rn(t))return t.selectRootElement(n,e===Nr.ShadowDom);let i="string"==typeof n?t.querySelector(n):n;return i.textContent="",i}(l,i,this.componentDef.encapsulation):Kf(o.createRenderer(null,this.componentDef),c,function mI(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(c)),d=this.componentDef.onPush?576:528,f=function Yb(t,n){return{components:[],scheduler:t||R_,clean:ME,playerHandler:n||null,flags:0}}(),h=Kc(0,null,null,1,0,null,null,null,null,null),v=al(null,h,f,d,null,null,o,l,s,a);let b,C;Rc(v);try{const S=function Wb(t,n,e,i,r,a){const o=e[1];e[20]=t;const l=Ho(o,20,2,"#host",null),c=l.mergedAttrs=n.hostAttrs;null!==c&&(tu(l,c,!0),null!==t&&(Pc(r,t,c),null!==l.classes&&ah(r,t,l.classes),null!==l.styles&&Y_(r,t,l.styles)));const u=i.createRenderer(t,n),d=al(e,pb(n),null,n.onPush?64:16,e[20],l,i,u,a||null,null);return o.firstCreatePass&&(Vc(Gs(l,e),o,n.type),wb(o,l),Sb(l,e.length,1)),eu(e,d),e[20]=d}(u,this.componentDef,v,o,l);if(u)if(i)Pc(l,u,["ng-version",pI.full]);else{const{attrs:_,classes:D}=function HR(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let a=t[i];if("string"==typeof a)2===r?""!==a&&n.push(a,t[++i]):8===r&&e.push(a);else{if(!gr(r))break;r=a}i++}return{attrs:n,classes:e}}(this.componentDef.selectors[0]);_&&Pc(l,u,_),D&&D.length>0&&ah(l,u,D.join(" "))}if(C=gf(h,20),void 0!==e){const _=C.projection=[];for(let D=0;D<this.ngContentSelectors.length;D++){const E=e[D];_.push(null!=E?Array.from(E):null)}}b=function qb(t,n,e,i,r){const a=e[1],o=function lE(t,n,e){const i=In();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),Tb(t,i,n,Go(t,n,1,null),e));const r=js(n,t,i.directiveStart,i);oi(r,n);const a=Ji(i,n);return a&&oi(a,n),r}(a,e,n);if(i.components.push(o),t[8]=o,r&&r.forEach(l=>l(o,n)),n.contentQueries){const l=In();n.contentQueries(1,o,l.directiveStart)}const s=In();return!a.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Ca(s.index),yb(e[1],s,0,s.directiveStart,s.directiveEnd,n),Cb(n,o)),o}(S,this.componentDef,v,f,[WE]),ol(h,v,null)}finally{Ec()}return new yI(this.componentType,b,os(C,v),v,C)}}class yI extends class oI{}{constructor(n,e,i,r,a){super(),this.location=i,this._rootLView=r,this._tNode=a,this.instance=e,this.hostView=this.changeDetectorRef=new gI(r),this.componentType=n}get injector(){return new Eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class ca{}class x0{}const ss=new Map;class L0 extends ca{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new P0(this);const i=Xi(n);this._bootstrapComponents=Lr(i.bootstrap),this._r3Injector=xb(n,e,[{provide:ca,useValue:this},{provide:eo,useValue:this.componentFactoryResolver}],_t(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,e=mn.THROW_IF_NOT_FOUND,i=Ne.Default){return n===mn||n===ca||n===Ah?this:this._r3Injector.get(n,e,i)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class rp extends x0{constructor(n){super(),this.moduleType=n,null!==Xi(n)&&function wI(t){const n=new Set;!function e(i){const r=Xi(i,!0),a=r.id;null!==a&&(function F0(t,n,e){if(n&&n!==e)throw new Error(`Duplicate module registered for ${t} - ${_t(n)} vs ${_t(n.name)}`)}(a,ss.get(a),i),ss.set(a,i));const o=Lr(r.imports);for(const s of o)n.has(s)||(n.add(s),e(s))}(t)}(n)}create(n){return new L0(this.moduleType,n)}}function yr(t,n,e,i){return U0(U(),gi(),t,n,e,i)}function to(t,n,e,i,r){return H0(U(),gi(),t,n,e,i,r)}function bl(t,n){const e=t[n];return e===Ee?void 0:e}function U0(t,n,e,i,r,a){const o=n+e;return si(t,o,r)?Ur(t,o+1,a?i.call(a,r):i(r)):bl(t,o+1)}function H0(t,n,e,i,r,a,o){const s=n+e;return Ja(t,s,r,a)?Ur(t,s+2,o?i.call(o,r,a):i(r,a)):bl(t,s+2)}function sn(t,n){const e=nt();let i;const r=t+20;e.firstCreatePass?(i=function EI(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const a=i.factory||(i.factory=Ya(i.type)),o=va(M);try{const s=xc(!1),l=a();return xc(s),function rk(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,U(),r,l),l}finally{va(o)}}function vn(t,n,e,i){const r=t+20,a=U(),o=Do(a,r);return yl(a,r)?H0(a,gi(),n,o.transform,e,i,o):o.transform(e,i)}function yl(t,n){return t[1].data[n].pure}function op(t){return n=>{setTimeout(t,void 0,n)}}const ge=class PI extends Yt{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){var r,a,o;let s=n,l=e||(()=>null),c=i;if(n&&"object"==typeof n){const d=n;s=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(a=d.error)||void 0===a?void 0:a.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=op(l),s&&(s=op(s)),c&&(c=op(c)));const u=super.subscribe({next:s,error:l,complete:c});return n instanceof He&&n.add(u),u}};function OI(){return this._results[Wo()]()}class sp{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Wo(),i=sp.prototype;i[e]||(i[e]=OI)}get changes(){return this._changes||(this._changes=new ge)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=Ki(n);(this._changesDetected=!function ZM(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],a=n[i];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Qt=(()=>{class t{}return t.__NG_ELEMENT_ID__=VI,t})();const xI=Qt,FI=class extends xI{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(n){const e=this._declarationTContainer.tViews,i=al(this._declarationLView,e,n,16,null,e.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(e)),ol(e,i,n),new _l(i)}};function VI(){return mu(In(),U())}function mu(t,n){return 4&t.type?new FI(n,t,os(t,n)):null}let nr=(()=>{class t{}return t.__NG_ELEMENT_ID__=LI,t})();function LI(){return Y0(In(),U())}const BI=nr,W0=class extends BI{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return os(this._hostTNode,this._hostLView)}get injector(){return new Eo(this._hostTNode,this._hostLView)}get parentInjector(){const n=Fc(this._hostTNode,this._hostLView);if(Hv(n)){const e=Ro(n,this._hostLView),i=Ao(n);return new Eo(e[1].data[i+8],e)}return new Eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=q0(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,e,i){const r=n.createEmbeddedView(e||{});return this.insert(r,i),r}createComponent(n,e,i,r,a){const o=n&&!function zs(t){return"function"==typeof t}(n);let s;if(o)s=e;else{const d=e||{};s=d.index,i=d.injector,r=d.projectableNodes,a=d.ngModuleRef}const l=o?n:new ip(ii(n)),c=i||this.parentInjector;if(!a&&null==l.ngModule){const f=(o?c:this.parentInjector).get(ca,null);f&&(a=f)}const u=l.create(c,r,void 0,a);return this.insert(u.hostView,s),u}insert(n,e){const i=n._lView,r=i[1];if(function _M(t){return hr(t[3])}(i)){const u=this.indexOf(n);if(-1!==u)this.detach(u);else{const d=i[3],f=new W0(d,d[6],d[3]);f.detach(f.indexOf(n))}}const a=this._adjustIndex(e),o=this._lContainer;!function wR(t,n,e,i){const r=10+i,a=e.length;i>0&&(e[r-1][4]=n),i<a-10?(n[4]=e[r],Zv(e,10+i,n)):(e.push(n),n[4]=null),n[3]=e;const o=n[17];null!==o&&e!==o&&function SR(t,n){const e=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===e?t[9]=[n]:e.push(n)}(o,n);const s=n[19];null!==s&&s.insertView(t),n[2]|=128}(r,i,o,a);const s=ih(a,o),l=i[11],c=qc(l,o[7]);return null!==c&&function bR(t,n,e,i,r,a){i[0]=r,i[6]=n,rl(t,i,e,1,r,a)}(r,o[6],l,i,c,s),n.attachToViewContainerRef(),Zv(lp(o),a,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=q0(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=eh(this._lContainer,e);i&&(Bc(lp(this._lContainer),e),F_(i[1],i))}detach(n){const e=this._adjustIndex(n,-1),i=eh(this._lContainer,e);return i&&null!=Bc(lp(this._lContainer),e)?new _l(i):null}_adjustIndex(n,e=0){return null==n?this.length+e:n}};function q0(t){return t[8]}function lp(t){return t[8]||(t[8]=[])}function Y0(t,n){let e;const i=n[t.index];if(hr(i))e=i;else{let r;if(8&t.type)r=Mn(i);else{const a=n[11];r=a.createComment("");const o=Ji(t,n);Za(a,qc(a,o),r,function AR(t,n){return rn(t)?t.nextSibling(n):n.nextSibling}(a,o),!1)}n[t.index]=e=Db(i,n,r,t),eu(n,e)}return new W0(e,t,n)}class cp{constructor(n){this.queryList=n,this.matches=null}clone(){return new cp(this.queryList)}setDirty(){this.queryList.setDirty()}}class up{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let a=0;a<i;a++){const o=e.getByIndex(a);r.push(this.queries[o.indexInDeclarationView].clone())}return new up(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==K0(n,e).matches&&this.queries[e].setDirty()}}class X0{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class dp{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,a=this.getByIndex(i).embeddedTView(n,r);a&&(a.indexInDeclarationView=i,null!==e?e.push(a):e=[a])}return null!==e?new dp(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class fp{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new fp(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=i[r];this.matchTNodeWithReadOption(n,e,GI(e,a)),this.matchTNodeWithReadOption(n,e,Lc(e,n,a,!1,!1))}else i===Qt?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Lc(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===At||r===nr||r===Qt&&4&e.type)this.addMatch(e.index,-2);else{const a=Lc(e,n,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function GI(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function $I(t,n,e,i){return-1===e?function jI(t,n){return 11&t.type?os(t,n):4&t.type?mu(t,n):null}(n,t):-2===e?function zI(t,n,e){return e===At?os(n,t):e===Qt?mu(n,t):e===nr?Y0(n,t):void 0}(t,n,i):js(t,t[1],e,n)}function Q0(t,n,e,i){const r=n[19].queries[i];if(null===r.matches){const a=t.data,o=e.matches,s=[];for(let l=0;l<o.length;l+=2){const c=o[l];s.push(c<0?null:$I(n,a[c],o[l+1],e.metadata.read))}r.matches=s}return r.matches}function hp(t,n,e,i){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const o=Q0(t,n,r,e);for(let s=0;s<a.length;s+=2){const l=a[s];if(l>0)i.push(o[s/2]);else{const c=a[s+1],u=n[-l];for(let d=10;d<u.length;d++){const f=u[d];f[17]===f[3]&&hp(f[1],f,c,i)}if(null!==u[9]){const d=u[9];for(let f=0;f<d.length;f++){const h=d[f];hp(h[1],h,c,i)}}}}}return i}function Ot(t){const n=U(),e=nt(),i=Iv();wf(i+1);const r=K0(e,i);if(t.dirty&&Mv(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?hp(e,n,i,[]):Q0(e,n,r,i);t.reset(a,uI),t.notifyOnChanges()}return!0}return!1}function no(t,n,e){const i=nt();i.firstCreatePass&&(J0(i,new X0(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),Z0(i,U(),n)}function _n(t,n,e,i){const r=nt();if(r.firstCreatePass){const a=In();J0(r,new X0(n,e,i),a.index),function qI(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}Z0(r,U(),e)}function xt(){return function WI(t,n){return t[19].queries[n].queryList}(U(),Iv())}function Z0(t,n,e){const i=new sp(4==(4&e));vb(t,n,i,i.destroy),null===n[19]&&(n[19]=new up),n[19].queries.push(new cp(i))}function J0(t,n,e){null===t.queries&&(t.queries=new dp),t.queries.track(new fp(n,e))}function K0(t,n){return t.queries.getByIndex(n)}function Rt(t,n){return mu(t,n)}function bu(...t){}const yu=new Be("Application Initializer");let cs=(()=>{class t{constructor(e){this.appInits=e,this.resolve=bu,this.reject=bu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const a=this.appInits[r]();if(ul(a))e.push(a);else if(jh(a)){const o=new Promise((s,l)=>{a.subscribe({complete:s,error:l})});e.push(o)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Q(yu,8))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();const wl=new Be("AppId"),dP={provide:wl,useFactory:function uP(){return`${bp()}${bp()}${bp()}`},deps:[]};function bp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const m1=new Be("Platform Initializer"),Cu=new Be("Platform ID"),v1=new Be("appBootstrapListener");let _1=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();const Aa=new Be("LocaleId"),b1=new Be("DefaultCurrencyCode");class fP{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let wu=(()=>{class t{compileModuleSync(e){return new rp(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),a=Lr(Xi(e).declarations).reduce((o,s)=>{const l=ii(s);return l&&o.push(new ip(l)),o},[]);return new fP(i,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();const pP=(()=>Promise.resolve(0))();function yp(t){"undefined"==typeof Zone?pP.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ft{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ge(!1),this.onMicrotaskEmpty=new ge(!1),this.onStable=new ge(!1),this.onError=new ge(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function gP(){let t=Mt.requestAnimationFrame,n=Mt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function _P(t){const n=()=>{!function vP(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,wp(t),t.isCheckStableRunning=!0,Cp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),wp(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,a,o,s)=>{try{return y1(t),e.invokeTask(r,a,o,s)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&n(),C1(t)}},onInvoke:(e,i,r,a,o,s,l)=>{try{return y1(t),e.invoke(r,a,o,s,l)}finally{t.shouldCoalesceRunChangeDetection&&n(),C1(t)}},onHasTask:(e,i,r,a)=>{e.hasTask(r,a),i===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,wp(t),Cp(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,i,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ft.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ft.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const a=this._inner,o=a.scheduleEventTask("NgZoneEvent: "+r,n,mP,bu,bu);try{return a.runTask(o,e,i)}finally{a.cancelTask(o)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const mP={};function Cp(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function wp(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function y1(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function C1(t){t._nesting--,Cp(t)}class bP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ge,this.onMicrotaskEmpty=new ge,this.onStable=new ge,this.onError=new ge}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}let Sp=(()=>{class t{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ft.assertNotInAngularZone(),yp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yp(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==a),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,i,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Q(Ft))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})(),w1=(()=>{class t{constructor(){this._applications=new Map,Tp.addToWindow(this)}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Tp.findTestabilityInTree(this,e,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();class yP{addToWindow(n){}findTestabilityInTree(n,e,i){return null}}let Cr,Tp=new yP;const S1=new Be("AllowMultipleToken");class T1{constructor(n,e){this.name=n,this.token=e}}function D1(t,n,e=[]){const i=`Platform: ${n}`,r=new Be(i);return(a=[])=>{let o=M1();if(!o||o.injector.get(S1,!1))if(t)t(e.concat(a).concat({provide:r,useValue:!0}));else{const s=e.concat(a).concat({provide:r,useValue:!0},{provide:Rh,useValue:"platform"});!function TP(t){if(Cr&&!Cr.destroyed&&!Cr.injector.get(S1,!1))throw new tt(400,"");Cr=t.get(A1);const n=t.get(m1,null);n&&n.forEach(e=>e())}(mn.create({providers:s,name:i}))}return function DP(t){const n=M1();if(!n)throw new tt(401,"");return n}()}}function M1(){return Cr&&!Cr.destroyed?Cr:null}let A1=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const s=function MP(t,n){let e;return e="noop"===t?new bP:("zone.js"===t?void 0:t)||new Ft({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),e}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:Ft,useValue:s}];return s.run(()=>{const c=mn.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),d=u.injector.get(Lo,null);if(!d)throw new tt(402,"");return s.runOutsideAngular(()=>{const f=s.onError.subscribe({next:h=>{d.handleError(h)}});u.onDestroy(()=>{Dp(this._modules,u),f.unsubscribe()})}),function AP(t,n,e){try{const i=e();return ul(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(d,s,()=>{const f=u.injector.get(cs);return f.runInitializers(),f.donePromise.then(()=>(function hN(t){(function Oi(t,n){null==t&&$t(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(s0=t.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Aa,cu)||cu),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,i=[]){const r=R1({},i);return function wP(t,n,e){const i=new rp(e);return Promise.resolve(i)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const i=e.injector.get(io);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new tt(403,"");e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new tt(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Q(mn))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();function R1(t,n){return Array.isArray(n)?n.reduce(R1,t):Object.assign(Object.assign({},t),n)}let io=(()=>{class t{constructor(e,i,r,a,o){this._zone=e,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Xe(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Xe(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Ft.assertNotInAngularZone(),yp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Ft.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=cv(s,l.pipe(uv()))}bootstrap(e,i){if(!this._initStatus.done)throw new tt(405,"");let r;r=e instanceof N0?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const a=function SP(t){return t.isBoundToModule}(r)?void 0:this._injector.get(ca),s=r.create(mn.NULL,[],i||r.selector,a),l=s.location.nativeElement,c=s.injector.get(Sp,null),u=c&&s.injector.get(w1);return c&&u&&u.registerApplication(l,c),s.onDestroy(()=>{this.detachView(s.hostView),Dp(this.components,s),u&&u.unregisterApplication(l)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new tt(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Dp(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(v1,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Q(Ft),Q(mn),Q(Lo),Q(eo),Q(cs))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();function Dp(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let k1=!0,Gi=(()=>{class t{}return t.__NG_ELEMENT_ID__=kP,t})();function kP(t){return function NP(t,n,e){if(Sc(t)&&!e){const i=Fi(t.index,n);return new _l(i,i)}return 47&t.type?new _l(n[16],n):null}(In(),U(),16==(16&t))}class x1{constructor(){}supports(n){return ll(n)}create(n){return new VP(n)}}const FP=(t,n)=>n;class VP{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||FP}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,a=null;for(;e||i;){const o=!i||e&&e.currentIndex<V1(i,r,a)?e:i,s=V1(o,r,a),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{a||(a=[]);const c=s-r,u=l-r;if(c!=u){for(let f=0;f<c;f++){const h=f<a.length?a[f]:a[f]=0,v=h+f;u<=v&&v<c&&(a[f]=h+1)}a[o.previousIndex]=u-c}}s!==l&&n(o,s,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!ll(n))throw new tt(900,"");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,a,o,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let s=0;s<this.length;s++)a=n[s],o=this._trackByFn(s,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,s),i=!0),e=e._next}else r=0,function nk(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Wo()]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,s=>{o=this._trackByFn(r,s),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,s,o,r)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,a,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,a,r)):n=this._addAfter(new LP(e,i),a,r),n}_verifyReinsertion(n,e,i,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==a?n=this._reinsertAfter(a,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,a=n._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new F1),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new F1),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class LP{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class BP{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class F1{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new BP,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function V1(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}class L1{constructor(){}supports(n){return n instanceof Map||Oh(n)}create(){return new UP}}class UP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||Oh(n)))throw new tt(900,"")}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const a=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,a)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,e);const a=r._prev,o=r._next;return a&&(a._next=o),o&&(o._prev=a),r._next=null,r._prev=null,r}const i=new HP(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}}class HP{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function B1(){return new Sl([new x1])}let Sl=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||B1()),deps:[[t,new xo,new xr]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new tt(901,"")}}return t.\u0275prov=fe({token:t,providedIn:"root",factory:B1}),t})();function U1(){return new us([new L1])}let us=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||U1()),deps:[[t,new xo,new xr]]}}find(e){const i=this.factories.find(a=>a.supports(e));if(i)return i;throw new tt(901,"")}}return t.\u0275prov=fe({token:t,providedIn:"root",factory:U1}),t})();const GP=[new L1],$P=new Sl([new x1]),zP=new us(GP),WP=D1(null,"core",[{provide:Cu,useValue:"unknown"},{provide:A1,deps:[mn]},{provide:w1,deps:[]},{provide:_1,deps:[]}]),ZP=[{provide:io,useClass:io,deps:[Ft,mn,Lo,eo,cs]},{provide:vI,deps:[Ft],useFactory:function JP(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(e){n.push(e)}}},{provide:cs,useClass:cs,deps:[[new xr,yu]]},{provide:wu,useClass:wu,deps:[]},dP,{provide:Sl,useFactory:function qP(){return $P},deps:[]},{provide:us,useFactory:function YP(){return zP},deps:[]},{provide:Aa,useFactory:function XP(t){return t||function QP(){return"undefined"!=typeof $localize&&$localize.locale||cu}()},deps:[[new Qs(Aa),new xr,new xo]]},{provide:b1,useValue:"USD"}];let KP=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Q(io))},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({providers:ZP}),t})(),Du=null;function jr(){return Du}const Rn=new Be("DocumentToken");let ao=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:function(){return function iO(){return Q(H1)}()},providedIn:"platform"}),t})();const rO=new Be("Location Initialized");let H1=(()=>{class t extends ao{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jr().getBaseHref(this._doc)}onPopState(e){const i=jr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=jr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){G1()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){G1()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Q(Rn))},t.\u0275prov=fe({token:t,factory:function(){return function aO(){return new H1(Q(Rn))}()},providedIn:"platform"}),t})();function G1(){return!!window.history.pushState}function kp(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function j1(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function ua(t){return t&&"?"!==t[0]?"?"+t:t}let ds=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:function(){return function oO(t){const n=Q(Rn).location;return new $1(Q(ao),n&&n.origin||"")}()},providedIn:"root"}),t})();const Np=new Be("appBaseHref");let $1=(()=>{class t extends ds{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return kp(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+ua(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,a){const o=this.prepareExternalUrl(r+ua(a));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,a){const o=this.prepareExternalUrl(r+ua(a));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(Q(ao),Q(Np,8))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})(),sO=(()=>{class t extends ds{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=kp(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,a){let o=this.prepareExternalUrl(r+ua(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,a){let o=this.prepareExternalUrl(r+ua(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(Q(ao),Q(Np,8))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})(),Ip=(()=>{class t{constructor(e,i){this._subject=new ge,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=j1(z1(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+ua(i))}normalize(e){return t.stripTrailingSlash(function cO(t,n){return t&&n.startsWith(t)?n.substring(t.length):n}(this._baseHref,z1(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ua(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ua(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return t.normalizeQueryParams=ua,t.joinWithSlash=kp,t.stripTrailingSlash=j1,t.\u0275fac=function(e){return new(e||t)(Q(ds),Q(ao))},t.\u0275prov=fe({token:t,factory:function(){return function lO(){return new Ip(Q(ds),Q(ao))}()},providedIn:"root"}),t})();function z1(t){return t.replace(/\/index.html$/,"")}var Ei=(()=>((Ei=Ei||{})[Ei.Decimal=0]="Decimal",Ei[Ei.Percent=1]="Percent",Ei[Ei.Currency=2]="Currency",Ei[Ei.Scientific=3]="Scientific",Ei))(),En=(()=>((En=En||{})[En.Zero=0]="Zero",En[En.One=1]="One",En[En.Two=2]="Two",En[En.Few=3]="Few",En[En.Many=4]="Many",En[En.Other=5]="Other",En))(),be=(()=>((be=be||{})[be.Decimal=0]="Decimal",be[be.Group=1]="Group",be[be.List=2]="List",be[be.PercentSign=3]="PercentSign",be[be.PlusSign=4]="PlusSign",be[be.MinusSign=5]="MinusSign",be[be.Exponential=6]="Exponential",be[be.SuperscriptingExponent=7]="SuperscriptingExponent",be[be.PerMille=8]="PerMille",be[be.Infinity=9]="Infinity",be[be.NaN=10]="NaN",be[be.TimeSeparator=11]="TimeSeparator",be[be.CurrencyDecimal=12]="CurrencyDecimal",be[be.CurrencyGroup=13]="CurrencyGroup",be))();function ir(t,n){const e=_i(t),i=e[ie.NumberSymbols][n];if(void 0===i){if(n===be.CurrencyDecimal)return e[ie.NumberSymbols][be.Decimal];if(n===be.CurrencyGroup)return e[ie.NumberSymbols][be.Group]}return i}function Pp(t,n){return _i(t)[ie.NumberFormats][n]}const mO=a0,xO=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Lp(t,n,e,i,r,a,o=!1){let s="",l=!1;if(isFinite(t)){let c=function jO(t){let i,r,a,o,s,n=Math.abs(t)+"",e=0;for((r=n.indexOf("."))>-1&&(n=n.replace(".","")),(a=n.search(/e/i))>0?(r<0&&(r=a),r+=+n.slice(a+1),n=n.substring(0,a)):r<0&&(r=n.length),a=0;"0"===n.charAt(a);a++);if(a===(s=n.length))i=[0],r=1;else{for(s--;"0"===n.charAt(s);)s--;for(r-=a,i=[],o=0;a<=s;a++,o++)i[o]=Number(n.charAt(a))}return r>22&&(i=i.splice(0,21),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}(t);o&&(c=function GO(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(c));let u=n.minInt,d=n.minFrac,f=n.maxFrac;if(a){const _=a.match(xO);if(null===_)throw new Error(`${a} is not a valid digit info`);const D=_[1],E=_[3],A=_[5];null!=D&&(u=Up(D)),null!=E&&(d=Up(E)),null!=A?f=Up(A):null!=E&&d>f&&(f=d)}!function $O(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,r=i.length-t.integerLen;const a=Math.min(Math.max(n,r),e);let o=a+t.integerLen,s=i[o];if(o>0){i.splice(Math.max(t.integerLen,o));for(let d=o;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,o=a+1),i[0]=0;for(let d=1;d<o;d++)i[d]=0}if(s>=5)if(o-1<0){for(let d=0;d>o;d--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[o-1]++;for(;r<Math.max(0,a);r++)i.push(0);let l=0!==a;const c=n+t.integerLen,u=i.reduceRight(function(d,f,h,v){return v[h]=(f+=d)<10?f:f-10,l&&(0===v[h]&&h>=c?v.pop():l=!1),f>=10?1:0},0);u&&(i.unshift(u),t.integerLen++)}(c,d,f);let h=c.digits,v=c.integerLen;const b=c.exponent;let C=[];for(l=h.every(_=>!_);v<u;v++)h.unshift(0);for(;v<0;v++)h.unshift(0);v>0?C=h.splice(v,h.length):(C=h,h=[0]);const S=[];for(h.length>=n.lgSize&&S.unshift(h.splice(-n.lgSize,h.length).join(""));h.length>n.gSize;)S.unshift(h.splice(-n.gSize,h.length).join(""));h.length&&S.unshift(h.join("")),s=S.join(ir(e,i)),C.length&&(s+=ir(e,r)+C.join("")),b&&(s+=ir(e,be.Exponential)+"+"+b)}else s=ir(e,be.Infinity);return s=t<0&&!l?n.negPre+s+n.negSuf:n.posPre+s+n.posSuf,s}function Bp(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(";"),r=i[0],a=i[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],s=o[0],l=o[1]||"";e.posPre=s.substr(0,s.indexOf("#"));for(let u=0;u<l.length;u++){const d=l.charAt(u);"0"===d?e.minFrac=e.maxFrac=u+1:"#"===d?e.maxFrac=u+1:e.posSuf+=d}const c=s.split(",");if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,a){const u=r.length-e.posPre.length-e.posSuf.length,d=a.indexOf("#");e.negPre=a.substr(0,d).replace(/'/g,""),e.negSuf=a.substr(d+u).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}function Up(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}class xu{}let zO=(()=>{class t extends xu{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(mO(i||this.locale)(e)){case En.Zero:return"zero";case En.One:return"one";case En.Two:return"two";case En.Few:return"few";case En.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Q(Aa))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})(),ki=(()=>{class t{constructor(e,i,r,a){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(ll(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${_t(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(M(Sl),M(us),M(At),M(tr))},t.\u0275dir=J({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class YO{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fn=(()=>{class t{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,a,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new YO(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===a?void 0:a);else if(null!==a){const s=i.get(a);i.move(s,o),eC(s,r)}});for(let r=0,a=i.length;r<a;r++){const s=i.get(r).context;s.index=r,s.count=a,s.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{eC(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(M(nr),M(Qt),M(Sl))},t.\u0275dir=J({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function eC(t,n){t.context.$implicit=n.item}let zt=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new XO,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){tC("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){tC("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(M(nr),M(Qt))},t.\u0275dir=J({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class XO{constructor(){this.$implicit=null,this.ngIf=null}}function tC(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${_t(n)}'.`)}let fs=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(M(nr))},t.\u0275dir=J({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[$n]}),t})();function Sr(t,n){return new tt(2100,"")}let Ml=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!jp(e))return null;r=r||this._locale;try{return function HO(t,n,e){return Lp(t,Bp(Pp(n,Ei.Decimal),ir(n,be.MinusSign)),n,be.Group,be.Decimal,e)}($p(e),r,i)}catch(a){throw Sr()}}}return t.\u0275fac=function(e){return new(e||t)(M(Aa,16))},t.\u0275pipe=Ai({name:"number",type:t,pure:!0}),t})(),rC=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!jp(e))return null;r=r||this._locale;try{return function UO(t,n,e){return Lp(t,Bp(Pp(n,Ei.Percent),ir(n,be.MinusSign)),n,be.Group,be.Decimal,e,!0).replace(new RegExp("%","g"),ir(n,be.PercentSign))}($p(e),r,i)}catch(a){throw Sr()}}}return t.\u0275fac=function(e){return new(e||t)(M(Aa,16))},t.\u0275pipe=Ai({name:"percent",type:t,pure:!0}),t})();function jp(t){return!(null==t||""===t||t!=t)}function $p(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let Ni=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({providers:[{provide:xu,useClass:zO}]}),t})();let Sx=(()=>{class t{}return t.\u0275prov=fe({token:t,providedIn:"root",factory:()=>new Tx(Q(Rn),window)}),t})();class Tx{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function Dx(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const a=r.shadowRoot;if(a){const o=a.getElementById(n)||a.querySelector(`[name="${n}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],r-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=oC(this.window.history)||oC(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function oC(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class zp extends class Ax extends class nO{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function tO(t){Du||(Du=t)}(new zp)}onAndCancel(n,e,i){return n.addEventListener(e,i,!1),()=>{n.removeEventListener(e,i,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function Rx(){return Al=Al||document.querySelector("base"),Al?Al.getAttribute("href"):null}();return null==e?null:function Ex(t){Fu=Fu||document.createElement("a"),Fu.setAttribute("href",t);const n=Fu.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){Al=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function WO(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,a]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(a)}return null}(document.cookie,n)}}let Fu,Al=null;const sC=new Be("TRANSITION_ID"),Nx=[{provide:yu,useFactory:function kx(t,n,e){return()=>{e.get(cs).donePromise.then(()=>{const i=jr(),r=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let a=0;a<r.length;a++)i.remove(r[a])})}},deps:[sC,Rn,mn],multi:!0}];class Wp{static init(){!function CP(t){Tp=t}(new Wp)}addToWindow(n){Mt.getAngularTestability=(i,r=!0)=>{const a=n.findTestabilityInTree(i,r);if(null==a)throw new Error("Could not find testability for element.");return a},Mt.getAllAngularTestabilities=()=>n.getAllTestabilities(),Mt.getAllAngularRootElements=()=>n.getAllRootElements(),Mt.frameworkStabilizers||(Mt.frameworkStabilizers=[]),Mt.frameworkStabilizers.push(i=>{const r=Mt.getAllAngularTestabilities();let a=r.length,o=!1;const s=function(l){o=o||l,a--,0==a&&i(o)};r.forEach(function(l){l.whenStable(s)})})}findTestabilityInTree(n,e,i){if(null==e)return null;const r=n.getTestability(e);return null!=r?r:i?jr().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null}}let Ix=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();const Vu=new Be("EventManagerPlugins");let Lu=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let a=0;a<r.length;a++){const o=r[a];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Q(Vu),Q(Ft))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();class lC{constructor(n){this._doc=n}addGlobalEventListener(n,e,i){const r=jr().getGlobalEventTarget(this._doc,n);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let cC=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})(),Rl=(()=>{class t extends cC{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(a=>{const o=this._doc.createElement("style");o.textContent=a,r.push(i.appendChild(o))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(uC),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(uC))}}return t.\u0275fac=function(e){return new(e||t)(Q(Rn))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();function uC(t){jr().remove(t)}const qp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Yp=/%COMP%/g;function Bu(t,n,e){for(let i=0;i<n.length;i++){let r=n[i];Array.isArray(r)?Bu(t,r,e):(r=r.replace(Yp,t),e.push(r))}return e}function hC(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let Xp=(()=>{class t{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Qp(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case Nr.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Lx(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case Nr.ShadowDom:return new Bx(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Bu(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Q(Lu),Q(Rl),Q(wl))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();class Qp{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(qp[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){n.appendChild(e)}insertBefore(n,e,i){n&&n.insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const a=qp[r];a?n.setAttributeNS(a,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=qp[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(Bi.DashCase|Bi.Important)?n.style.setProperty(e,i,r&Bi.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&Bi.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,hC(i)):this.eventManager.addEventListener(n,e,hC(i))}}class Lx extends Qp{constructor(n,e,i,r){super(n),this.component=i;const a=Bu(r+"-"+i.id,i.styles,[]);e.addStyles(a),this.contentAttr=function xx(t){return"_ngcontent-%COMP%".replace(Yp,t)}(r+"-"+i.id),this.hostAttr=function Fx(t){return"_nghost-%COMP%".replace(Yp,t)}(r+"-"+i.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}class Bx extends Qp{constructor(n,e,i,r){super(n),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Bu(r.id,r.styles,[]);for(let o=0;o<a.length;o++){const s=document.createElement("style");s.textContent=a[o],this.shadowRoot.appendChild(s)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let Ux=(()=>{class t extends lC{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return t.\u0275fac=function(e){return new(e||t)(Q(Rn))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();const gC=["alt","control","meta","shift"],Gx={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mC={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jx={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let $x=(()=>{class t extends lC{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const a=t.parseEventName(i),o=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jr().onAndCancel(e,a.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(i.pop());let o="";if(gC.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=a,0!=i.length||0===a.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let i="",r=function zx(t){let n=t.key;if(null==n){if(n=t.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===t.location&&mC.hasOwnProperty(n)&&(n=mC[n]))}return Gx[n]||n}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),gC.forEach(a=>{a!=r&&jx[a](e)&&(i+=a+".")}),i+=r,i}static eventCallback(e,i,r){return a=>{t.getEventFullKey(a)===e&&r.runGuarded(()=>i(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Q(Rn))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();const Xx=D1(WP,"browser",[{provide:Cu,useValue:"browser"},{provide:m1,useValue:function Wx(){zp.makeCurrent(),Wp.init()},multi:!0},{provide:Rn,useFactory:function Yx(){return function pM(t){hf=t}(document),document},deps:[]}]),Qx=[{provide:Rh,useValue:"root"},{provide:Lo,useFactory:function qx(){return new Lo},deps:[]},{provide:Vu,useClass:Ux,multi:!0,deps:[Rn,Ft,Cu]},{provide:Vu,useClass:$x,multi:!0,deps:[Rn]},{provide:Xp,useClass:Xp,deps:[Lu,Rl,wl]},{provide:tp,useExisting:Xp},{provide:cC,useExisting:Rl},{provide:Rl,useClass:Rl,deps:[Rn]},{provide:Sp,useClass:Sp,deps:[Ft]},{provide:Lu,useClass:Lu,deps:[Vu,Ft]},{provide:class Mx{},useClass:Ix,deps:[]}];let Zx=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:wl,useValue:e.appId},{provide:sC,useExisting:wl},Nx]}}}return t.\u0275fac=function(e){return new(e||t)(Q(t,12))},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({providers:Qx,imports:[Ni,KP]}),t})();"undefined"!=typeof window&&window;let Jp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:function(e){let i=null;return i=e?new(e||t):Q(bC),i},providedIn:"root"}),t})(),bC=(()=>{class t extends Jp{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case yt.NONE:return i;case yt.HTML:return Fr(i,"HTML")?Li(i):y_(this._doc,String(i)).toString();case yt.STYLE:return Fr(i,"Style")?Li(i):i;case yt.SCRIPT:if(Fr(i,"Script"))return Li(i);throw new Error("unsafe value used in a script context");case yt.URL:return f_(i),Fr(i,"URL")?Li(i):Js(String(i));case yt.RESOURCE_URL:if(Fr(i,"ResourceURL"))return Li(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function RA(t){return new SA(t)}(e)}bypassSecurityTrustStyle(e){return function EA(t){return new TA(t)}(e)}bypassSecurityTrustScript(e){return function kA(t){return new DA(t)}(e)}bypassSecurityTrustUrl(e){return function NA(t){return new MA(t)}(e)}bypassSecurityTrustResourceUrl(e){return function IA(t){return new AA(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(Q(Rn))},t.\u0275prov=fe({token:t,factory:function(e){let i=null;return i=e?new e:function l2(t){return new bC(t.get(Rn))}(Q(mn)),i},providedIn:"root"}),t})();const{isArray:c2}=Array,{getPrototypeOf:u2,prototype:d2,keys:f2}=Object;function yC(t){if(1===t.length){const n=t[0];if(c2(n))return{args:n,keys:null};if(function h2(t){return t&&"object"==typeof t&&u2(t)===d2}(n)){const e=f2(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:p2}=Array;function Kp(t){return We(n=>function g2(t,n){return p2(n)?t(...n):t(n)}(t,n))}function CC(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}let wC=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(M(tr),M(At))},t.\u0275dir=J({type:t}),t})(),oo=(()=>{class t extends wC{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=ai(t)))(i||t)}}(),t.\u0275dir=J({type:t,features:[pt]}),t})();const ar=new Be("NgValueAccessor"),v2={provide:ar,useExisting:rt(()=>Uu),multi:!0};let Uu=(()=>{class t extends oo{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=ai(t)))(i||t)}}(),t.\u0275dir=J({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,i){1&e&&N("change",function(a){return i.onChange(a.target.checked)})("blur",function(){return i.onTouched()})},features:[Pt([v2]),pt]}),t})();const _2={provide:ar,useExisting:rt(()=>hs),multi:!0},y2=new Be("CompositionEventMode");let hs=(()=>{class t extends wC{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function b2(){const t=jr()?jr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(M(tr),M(At),M(y2,8))},t.\u0275dir=J({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&N("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[Pt([_2]),pt]}),t})();function SC(t){return null!=t&&"number"==typeof t.length}const li=new Be("NgValidators"),ka=new Be("NgAsyncValidators");function Hu(t){return null}function IC(t){return null!=t}function PC(t){const n=ul(t)?Hn(t):t;return jh(n),n}function OC(t){let n={};return t.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function xC(t,n){return n.map(e=>e(t))}function FC(t){return t.map(n=>function w2(t){return!t.validate}(n)?n:e=>n.validate(e))}function eg(t){return null!=t?function VC(t){if(!t)return null;const n=t.filter(IC);return 0==n.length?null:function(e){return OC(xC(e,n))}}(FC(t)):null}function tg(t){return null!=t?function LC(t){if(!t)return null;const n=t.filter(IC);return 0==n.length?null:function(e){return function m2(...t){const n=mc(t),{args:e,keys:i}=yC(t),r=new Xe(a=>{const{length:o}=e;if(!o)return void a.complete();const s=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;ni(e[u]).subscribe(jt(a,f=>{d||(d=!0,c--),s[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||a.next(i?CC(i,s):s),a.complete())}))}});return n?r.pipe(Kp(n)):r}(xC(e,n).map(PC)).pipe(We(OC))}}(FC(t)):null}function BC(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function UC(t){return t._rawValidators}function HC(t){return t._rawAsyncValidators}function ng(t){return t?Array.isArray(t)?t:[t]:[]}function Gu(t,n){return Array.isArray(t)?t.includes(n):t===n}function GC(t,n){const e=ng(n);return ng(t).forEach(r=>{Gu(e,r)||e.push(r)}),e}function jC(t,n){return ng(n).filter(e=>!Gu(t,e))}class $C{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=eg(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=tg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class Na extends $C{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yi extends $C{get formDirective(){return null}get path(){return null}}class zC{constructor(n){this._cd=n}is(n){var e,i,r;return"submitted"===n?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[n])}}let El=(()=>{class t extends zC{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(M(Na,2))},t.\u0275dir=J({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&we("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[pt]}),t})(),ju=(()=>{class t extends zC{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(M(yi,10))},t.\u0275dir=J({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&we("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[pt]}),t})();function zu(t,n){return[...n.path,t]}function kl(t,n){ag(t,n),n.valueAccessor.writeValue(t.value),function k2(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&qC(t,n)})}(t,n),function I2(t,n){const e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function N2(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&qC(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function E2(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function Wu(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),Yu(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function qu(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function ag(t,n){const e=UC(t);null!==n.validator?t.setValidators(BC(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=HC(t);null!==n.asyncValidator?t.setAsyncValidators(BC(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();qu(n._rawValidators,r),qu(n._rawAsyncValidators,r)}function Yu(t,n){let e=!1;if(null!==t){if(null!==n.validator){const r=UC(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==n.validator);a.length!==r.length&&(e=!0,t.setValidators(a))}}if(null!==n.asyncValidator){const r=HC(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==n.asyncValidator);a.length!==r.length&&(e=!0,t.setAsyncValidators(a))}}}const i=()=>{};return qu(n._rawValidators,i),qu(n._rawAsyncValidators,i),e}function qC(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function YC(t,n){ag(t,n)}function og(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function XC(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function sg(t,n){if(!n)return null;let e,i,r;return Array.isArray(n),n.forEach(a=>{a.constructor===hs?e=a:function x2(t){return Object.getPrototypeOf(t.constructor)===oo}(a)?i=a:r=a}),r||i||e||null}function lg(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const Nl="VALID",Xu="INVALID",ps="PENDING",Il="DISABLED";function ug(t){return(Qu(t)?t.validators:t)||null}function QC(t){return Array.isArray(t)?eg(t):t||null}function dg(t,n){return(Qu(n)?n.asyncValidators:t)||null}function ZC(t){return Array.isArray(t)?tg(t):t||null}function Qu(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const JC=t=>t instanceof pg,fg=t=>t instanceof Zu;function KC(t){return JC(t)?t.value:t.getRawValue()}function ew(t,n){const e=fg(t),i=t.controls;if(!(e?Object.keys(i):i).length)throw new tt(1e3,"");if(!i[n])throw new tt(1001,"")}function tw(t,n){fg(t),t._forEachChild((i,r)=>{if(void 0===n[r])throw new tt(1002,"")})}class hg{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=QC(this._rawValidators),this._composedAsyncValidatorFn=ZC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Nl}get invalid(){return this.status===Xu}get pending(){return this.status==ps}get disabled(){return this.status===Il}get enabled(){return this.status!==Il}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=QC(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=ZC(n)}addValidators(n){this.setValidators(GC(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(GC(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(jC(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(jC(n,this._rawAsyncValidators))}hasValidator(n){return Gu(this._rawValidators,n)}hasAsyncValidator(n){return Gu(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=ps,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Il,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Nl,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nl||this.status===ps)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Il:Nl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=ps,this._hasOwnPendingAsyncValidator=!0;const e=PC(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){return function F2(t,n,e){if(null==n||(Array.isArray(n)||(n=n.split(e)),Array.isArray(n)&&0===n.length))return null;let i=t;return n.forEach(r=>{i=fg(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(t=>t instanceof L2)(i)&&i.at(r)||null}),i}(this,n,".")}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new ge,this.statusChanges=new ge}_calculateStatus(){return this._allControlsDisabled()?Il:this.errors?Xu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ps)?ps:this._anyControlsHaveStatus(Xu)?Xu:Nl}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Qu(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class pg extends hg{constructor(n=null,e,i){super(ug(e),dg(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qu(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){lg(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){lg(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class Zu extends hg{constructor(n,e,i){super(ug(e),dg(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){tw(this,n),Object.keys(n).forEach(i=>{ew(this,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=KC(e),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&n(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,e,i)=>((e.enabled||this.disabled)&&(n[i]=e.value),n))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,a)=>{i=e(i,r,a)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class L2 extends hg{constructor(n,e,i){super(ug(e),dg(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){tw(this,n),n.forEach((i,r)=>{ew(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>KC(n))}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const B2={provide:yi,useExisting:rt(()=>Ol)},Pl=(()=>Promise.resolve(null))();let Ol=(()=>{class t extends yi{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new ge,this.form=new Zu({},eg(e),tg(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Pl.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),kl(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Pl.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Pl.then(()=>{const i=this._findContainer(e.path),r=new Zu({});YC(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Pl.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Pl.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,XC(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(M(li,10),M(ka,10))},t.\u0275dir=J({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&N("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Pt([B2]),pt]}),t})();const H2={provide:Na,useExisting:rt(()=>xl)},rw=(()=>Promise.resolve(null))();let xl=(()=>{class t extends Na{constructor(e,i,r,a,o){super(),this._changeDetectorRef=o,this.control=new pg,this._registered=!1,this.update=new ge,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=sg(0,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),og(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kl(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){rw.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;rw.then(()=>{var a;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(e){return this._parent?zu(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(M(yi,9),M(li,10),M(ka,10),M(ar,10),M(Gi,8))},t.\u0275dir=J({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Pt([H2]),pt,$n]}),t})(),Ju=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=J({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),ow=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({}),t})();const gg=new Be("NgModelWithFormControlWarning"),q2={provide:yi,useExisting:rt(()=>Ku)};let Ku=(()=>{class t extends yi{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ge,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return kl(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Wu(e.control||null,e,!1),lg(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,XC(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(Wu(i||null,e),JC(r)&&(kl(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);YC(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function P2(t,n){return Yu(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ag(this.form,this),this._oldForm&&Yu(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(M(li,10),M(ka,10))},t.\u0275dir=J({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&N("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Pt([q2]),pt,$n]}),t})();const Q2={provide:Na,useExisting:rt(()=>_g)};let _g=(()=>{class t extends Na{constructor(e,i,r,a,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new ge,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=sg(0,a)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),og(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return zu(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(M(yi,13),M(li,10),M(ka,10),M(ar,10),M(gg,8))},t.\u0275dir=J({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Pt([Q2]),pt,$n]}),t})();function hw(t){return"number"==typeof t?t:parseInt(t,10)}let so=(()=>{class t{constructor(){this._validator=Hu}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Hu,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=J({type:t,features:[$n]}),t})();const cF={provide:li,useExisting:rt(()=>wg),multi:!0};let wg=(()=>{class t extends so{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>hw(e),this.createValidator=e=>function EC(t){return n=>function Ea(t){return null==t||0===t.length}(n.value)||!SC(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=ai(t)))(i||t)}}(),t.\u0275dir=J({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&Ct("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[Pt([cF]),pt]}),t})();const uF={provide:li,useExisting:rt(()=>ed),multi:!0};let ed=(()=>{class t extends so{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>hw(e),this.createValidator=e=>function kC(t){return n=>SC(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=ai(t)))(i||t)}}(),t.\u0275dir=J({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&Ct("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Pt([uF]),pt]}),t})(),yw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[ow]]}),t})(),Cw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[yw]}),t})(),fF=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:gg,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[yw]}),t})();function Ae(...t){return Hn(t,Os(t))}class yn extends Yt{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function ww(t,n,e){t?ta(e,t,n):n()}const td=Yn(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Fl(...t){return function pF(){return Ps(1)}()(Hn(t,Os(t)))}function Sw(t){return new Xe(n=>{ni(t()).subscribe(n)})}function Tw(){return hn((t,n)=>{let e=null;t._refCount++;const i=jt(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class gF extends Xe{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Wm(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,null==n||n.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new He;const e=this.getSubject();n.add(this.source.subscribe(jt(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=He.EMPTY)}return n}refCount(){return Tw()(this)}}function fa(t,n){return hn((e,i)=>{let r=null,a=0,o=!1;const s=()=>o&&!r&&i.complete();e.subscribe(jt(i,l=>{null==r||r.unsubscribe();let c=0;const u=a++;ni(t(l,u)).subscribe(r=jt(i,d=>i.next(n?n(l,d,u,c++):d),()=>{r=null,s()}))},()=>{o=!0,s()}))})}function mF(t,n,e,i,r){return(a,o)=>{let s=e,l=n,c=0;a.subscribe(jt(o,u=>{const d=c++;l=s?t(l,u,d):(s=!0,u),i&&o.next(l)},r&&(()=>{s&&o.next(l),o.complete()})))}}function Dw(t,n){return hn(mF(t,n,arguments.length>=2,!0))}function Qn(t,n){return hn((e,i)=>{let r=0;e.subscribe(jt(i,a=>t.call(n,a,r++)&&i.next(a)))})}function Ia(t){return hn((n,e)=>{let a,i=null,r=!1;i=n.subscribe(jt(e,void 0,void 0,o=>{a=ni(t(o,Ia(t)(n))),i?(i.unsubscribe(),i=null,a.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,a.subscribe(e))})}function Vl(t,n){return ue(n)?pn(t,n,1):pn(t,1)}function Tg(t){return t<=0?()=>ur:hn((n,e)=>{let i=[];n.subscribe(jt(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Mw(t=vF){return hn((n,e)=>{let i=!1;n.subscribe(jt(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function vF(){return new td}function Aw(t){return hn((n,e)=>{let i=!1;n.subscribe(jt(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function gs(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Qn((r,a)=>t(r,a,i)):Dn,Gn(1),e?Aw(n):Mw(()=>new td))}function ci(t,n,e){const i=ue(t)||n||e?{next:t,error:n,complete:e}:t;return i?hn((r,a)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let s=!0;r.subscribe(jt(a,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),a.next(l)},()=>{var l;s=!1,null===(l=i.complete)||void 0===l||l.call(i),a.complete()},l=>{var c;s=!1,null===(c=i.error)||void 0===c||c.call(i,l),a.error(l)},()=>{var l,c;s&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Dn}class ha{constructor(n,e){this.id=n,this.url=e}}class Dg extends ha{constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ll extends ha{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rw extends ha{constructor(n,e,i){super(n,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yF extends ha{constructor(n,e,i){super(n,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class CF extends ha{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wF extends ha{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SF extends ha{constructor(n,e,i,r,a){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class TF extends ha{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DF extends ha{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ew{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kw{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class MF{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AF{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RF{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EF{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nw{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const je="primary";class kF{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ms(t){return new kF(t)}const Iw="ngNavigationCancelingError";function Mg(t){const n=Error("NavigationCancelingError: "+t);return n[Iw]=!0,n}function IF(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let a=0;a<i.length;a++){const o=i[a],s=t[a];if(o.startsWith(":"))r[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function $r(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!Pw(t[r],n[r]))return!1;return!0}function Pw(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,a)=>i[a]===r)}return t===n}function Ow(t){return Array.prototype.concat.apply([],t)}function xw(t){return t.length>0?t[t.length-1]:null}function Zn(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function zr(t){return jh(t)?t:ul(t)?Hn(Promise.resolve(t)):Ae(t)}const xF={exact:function Lw(t,n,e){if(!co(t.segments,n.segments)||!id(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!Lw(t.children[i],n.children[i],e))return!1;return!0},subset:Bw},Fw={exact:function FF(t,n){return $r(t,n)},subset:function VF(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>Pw(t[e],n[e]))},ignored:()=>!0};function Vw(t,n,e){return xF[e.paths](t.root,n.root,e.matrixParams)&&Fw[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function Bw(t,n,e){return Uw(t,n,n.segments,e)}function Uw(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!co(r,e)||n.hasChildren()||!id(r,e,i))}if(t.segments.length===e.length){if(!co(t.segments,e)||!id(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!Bw(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(co(t.segments,r)&&id(t.segments,r,i)&&t.children[je])&&Uw(t.children[je],n,a,i)}}function id(t,n,e){return n.every((i,r)=>Fw[e](t[r].parameters,i.parameters))}class lo{constructor(n,e,i){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ms(this.queryParams)),this._queryParamMap}toString(){return UF.serialize(this)}}class Qe{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Zn(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rd(this)}}class Bl{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ms(this.parameters)),this._parameterMap}toString(){return zw(this)}}function co(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}class Hw{}class Gw{parse(n){const e=new XF(n);return new lo(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Ul(n.root,!0)}`,i=function jF(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${ad(e)}=${ad(r)}`).join("&"):`${ad(e)}=${ad(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function HF(t){return encodeURI(t)}(n.fragment)}`:""}`}}const UF=new Gw;function rd(t){return t.segments.map(n=>zw(n)).join("/")}function Ul(t,n){if(!t.hasChildren())return rd(t);if(n){const e=t.children[je]?Ul(t.children[je],!1):"",i=[];return Zn(t.children,(r,a)=>{a!==je&&i.push(`${a}:${Ul(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function BF(t,n){let e=[];return Zn(t.children,(i,r)=>{r===je&&(e=e.concat(n(i,r)))}),Zn(t.children,(i,r)=>{r!==je&&(e=e.concat(n(i,r)))}),e}(t,(i,r)=>r===je?[Ul(t.children[je],!1)]:[`${r}:${Ul(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[je]?`${rd(t)}/${e[0]}`:`${rd(t)}/(${e.join("//")})`}}function jw(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ad(t){return jw(t).replace(/%3B/gi,";")}function Ag(t){return jw(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function od(t){return decodeURIComponent(t)}function $w(t){return od(t.replace(/\+/g,"%20"))}function zw(t){return`${Ag(t.path)}${function GF(t){return Object.keys(t).map(n=>`;${Ag(n)}=${Ag(t[n])}`).join("")}(t.parameters)}`}const $F=/^[^\/()?;=#]+/;function sd(t){const n=t.match($F);return n?n[0]:""}const zF=/^[^=?&#]+/,qF=/^[^&#]+/;class XF{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qe([],{}):new Qe([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[je]=new Qe(n,e)),i}parseSegment(){const n=sd(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new Bl(od(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=sd(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=sd(this.remaining);r&&(i=r,this.capture(i))}n[od(e)]=od(i)}parseQueryParam(n){const e=function WF(t){const n=t.match(zF);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function YF(t){const n=t.match(qF);return n?n[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=$w(e),a=$w(i);if(n.hasOwnProperty(r)){let o=n[r];Array.isArray(o)||(o=[o],n[r]=o),o.push(a)}else n[r]=a}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=sd(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a;i.indexOf(":")>-1?(a=i.substr(0,i.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=je);const o=this.parseChildren();e[a]=1===Object.keys(o).length?o[je]:new Qe([],o),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class Ww{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=Rg(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=Rg(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Eg(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return Eg(n,this._root).map(e=>e.value)}}function Rg(t,n){if(t===n.value)return n;for(const e of n.children){const i=Rg(t,e);if(i)return i}return null}function Eg(t,n){if(t===n.value)return[n];for(const e of n.children){const i=Eg(t,e);if(i.length)return i.unshift(n),i}return[]}class pa{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function vs(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class qw extends Ww{constructor(n,e){super(n),this.snapshot=e,kg(this,n)}toString(){return this.snapshot.toString()}}function Yw(t,n){const e=function QF(t,n){const o=new ld([],{},{},"",{},je,n,null,t.root,-1,{});return new Qw("",new pa(o,[]))}(t,n),i=new yn([new Bl("",{})]),r=new yn({}),a=new yn({}),o=new yn({}),s=new yn(""),l=new _s(i,r,o,s,a,je,n,e.root);return l.snapshot=e.root,new qw(new pa(l,[]),e)}class _s{constructor(n,e,i,r,a,o,s,l){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(We(n=>ms(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(We(n=>ms(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xw(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],a=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function ZF(t){return t.reduce((n,e)=>({params:Object.assign(Object.assign({},n.params),e.params),data:Object.assign(Object.assign({},n.data),e.data),resolve:Object.assign(Object.assign({},n.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class ld{constructor(n,e,i,r,a,o,s,l,c,u,d){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ms(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ms(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qw extends Ww{constructor(n,e){super(e),this.url=n,kg(this,e)}toString(){return Zw(this._root)}}function kg(t,n){n.value._routerState=t,n.children.forEach(e=>kg(t,e))}function Zw(t){const n=t.children.length>0?` { ${t.children.map(Zw).join(", ")} } `:"";return`${t.value}${n}`}function Ng(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,$r(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),$r(n.params,e.params)||t.params.next(e.params),function PF(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!$r(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),$r(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Ig(t,n){const e=$r(t.params,n.params)&&function LF(t,n){return co(t,n)&&t.every((e,i)=>$r(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||Ig(t.parent,n.parent))}function Hl(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function KF(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Hl(t,i,r);return Hl(t,i)})}(t,n,e);return new pa(i,r)}{if(t.shouldAttach(n.value)){const a=t.retrieve(n.value);if(null!==a){const o=a.route;return o.value._futureSnapshot=n.value,o.children=n.children.map(s=>Hl(t,s)),o}}const i=function eV(t){return new _s(new yn(t.url),new yn(t.params),new yn(t.queryParams),new yn(t.fragment),new yn(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(a=>Hl(t,a));return new pa(i,r)}}function cd(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Gl(t){return"object"==typeof t&&null!=t&&t.outlets}function Pg(t,n,e,i,r){let a={};return i&&Zn(i,(o,s)=>{a[s]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new lo(e.root===t?n:Jw(e.root,t,n),a,r)}function Jw(t,n,e){const i={};return Zn(t.children,(r,a)=>{i[a]=r===n?e:Jw(r,n,e)}),new Qe(t.segments,i)}class Kw{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&cd(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Gl);if(r&&r!==xw(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Og{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function eS(t,n,e){if(t||(t=new Qe([],{})),0===t.segments.length&&t.hasChildren())return ud(t,n,e);const i=function oV(t,n,e){let i=0,r=n;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return a;const o=t.segments[r],s=e[i];if(Gl(s))break;const l=`${s}`,c=i<e.length-1?e[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!nS(l,c,o))return a;i+=2}else{if(!nS(l,{},o))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const a=new Qe(t.segments.slice(0,i.pathIndex),{});return a.children[je]=new Qe(t.segments.slice(i.pathIndex),t.children),ud(a,0,r)}return i.match&&0===r.length?new Qe(t.segments,{}):i.match&&!t.hasChildren()?xg(t,n,e):i.match?ud(t,0,r):xg(t,n,e)}function ud(t,n,e){if(0===e.length)return new Qe(t.segments,{});{const i=function aV(t){return Gl(t[0])?t[0].outlets:{[je]:t}}(e),r={};return Zn(i,(a,o)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[o]=eS(t.children[o],n,a))}),Zn(t.children,(a,o)=>{void 0===i[o]&&(r[o]=a)}),new Qe(t.segments,r)}}function xg(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const a=e[r];if(Gl(a)){const l=sV(a.outlets);return new Qe(i,l)}if(0===r&&cd(e[0])){i.push(new Bl(t.segments[n].path,tS(e[0]))),r++;continue}const o=Gl(a)?a.outlets[je]:`${a}`,s=r<e.length-1?e[r+1]:null;o&&s&&cd(s)?(i.push(new Bl(o,tS(s))),r+=2):(i.push(new Bl(o,{})),r++)}return new Qe(i,{})}function sV(t){const n={};return Zn(t,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[i]=xg(new Qe([],{}),0,e))}),n}function tS(t){const n={};return Zn(t,(e,i)=>n[i]=`${e}`),n}function nS(t,n,e){return t==e.path&&$r(n,e.parameters)}class cV{constructor(n,e,i,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),Ng(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=vs(e);n.children.forEach(a=>{const o=a.value.outlet;this.deactivateRoutes(a,r[o],i),delete r[o]}),Zn(r,(a,o)=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(r===a)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(n,e,o.children)}else this.deactivateChildRoutes(n,e,i);else a&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=vs(n);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);if(i&&i.outlet){const o=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:s})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=vs(n);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,e,i){const r=vs(e);n.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],i),this.forwardEvent(new EF(a.value.snapshot))}),n.children.length&&this.forwardEvent(new AF(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(Ng(r),r===a)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,o.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),Ng(s.route.value),this.activateChildRoutes(n,null,o.children)}else{const s=function uV(t){for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(n,null,o.children)}}else this.activateChildRoutes(n,null,i)}}class Fg{constructor(n,e){this.routes=n,this.module=e}}function Pa(t){return"function"==typeof t}function uo(t){return t instanceof lo}const jl=Symbol("INITIAL_VALUE");function $l(){return fa(t=>function Sg(...t){const n=Os(t),e=mc(t),{args:i,keys:r}=yC(t);if(0===i.length)return Hn([],n);const a=new Xe(function hF(t,n,e=Dn){return i=>{ww(n,()=>{const{length:r}=t,a=new Array(r);let o=r,s=r;for(let l=0;l<r;l++)ww(n,()=>{const c=Hn(t[l],n);let u=!1;c.subscribe(jt(i,d=>{a[l]=d,u||(u=!0,s--),s||i.next(e(a.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,n,r?o=>CC(r,o):Dn));return e?a.pipe(Kp(e)):a}(t.map(n=>n.pipe(Gn(1),function nd(...t){const n=Os(t);return hn((e,i)=>{(n?Fl(t,e,n):Fl(t,e)).subscribe(i)})}(jl)))).pipe(Dw((n,e)=>{let i=!1;return e.reduce((r,a,o)=>r!==jl?r:(a===jl&&(i=!0),i||!1!==a&&o!==e.length-1&&!uo(a)?r:a),n)},jl),Qn(n=>n!==jl),We(n=>uo(n)?n:!0===n),Gn(1)))}class mV{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new zl,this.attachRef=null}}class zl{constructor(){this.contexts=new Map}onChildOutletCreated(n,e){const i=this.getOrCreateContext(n);i.outlet=e,this.contexts.set(n,i)}onChildOutletDestroyed(n){const e=this.getContext(n);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let e=this.getContext(n);return e||(e=new mV,this.contexts.set(n,e)),e}getContext(n){return this.contexts.get(n)||null}}let Vg=(()=>{class t{constructor(e,i,r,a,o){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ge,this.deactivateEvents=new ge,this.attachEvents=new ge,this.detachEvents=new ge,this.name=a||je,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),s=this.parentContexts.getOrCreateContext(this.name).children,l=new vV(e,s,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(M(zl),M(nr),M(eo),function Xa(t){return function zM(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const a=e[r];if(Bv(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(a===n)return e[r+1];r+=2}}}return null}(In(),t)}("name"),M(Gi))},t.\u0275dir=J({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class vV{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===_s?this.route:n===zl?this.childContexts:this.parent.get(n,e)}}let iS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=De({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&O(0,"router-outlet")},directives:[Vg],encapsulation:2}),t})();function rS(t,n=""){for(let e=0;e<t.length;e++){const i=t[e];_V(i,bV(n,i))}}function _V(t,n){t.children&&rS(t.children,n)}function bV(t,n){return n?t||n.path?t&&!n.path?`${t}/`:!t&&n.path?n.path:`${t}/${n.path}`:"":t}function Lg(t){const n=t.children&&t.children.map(Lg),e=n?Object.assign(Object.assign({},t),{children:n}):Object.assign({},t);return!e.component&&(n||e.loadChildren)&&e.outlet&&e.outlet!==je&&(e.component=iS),e}function or(t){return t.outlet||je}function aS(t,n){const e=t.filter(i=>or(i)===n);return e.push(...t.filter(i=>or(i)!==n)),e}const oS={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function dd(t,n,e){var i;if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},oS):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(n.matcher||IF)(e,t,n);if(!a)return Object.assign({},oS);const o={};Zn(a.posParams,(l,c)=>{o[c]=l.path});const s=a.consumed.length>0?Object.assign(Object.assign({},o),a.consumed[a.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:s,positionalParamSegments:null!==(i=a.posParams)&&void 0!==i?i:{}}}function fd(t,n,e,i,r="corrected"){if(e.length>0&&function wV(t,n,e){return e.some(i=>hd(t,n,i)&&or(i)!==je)}(t,e,i)){const o=new Qe(n,function CV(t,n,e,i){const r={};r[je]=i,i._sourceSegment=t,i._segmentIndexShift=n.length;for(const a of e)if(""===a.path&&or(a)!==je){const o=new Qe([],{});o._sourceSegment=t,o._segmentIndexShift=n.length,r[or(a)]=o}return r}(t,n,i,new Qe(e,t.children)));return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function SV(t,n,e){return e.some(i=>hd(t,n,i))}(t,e,i)){const o=new Qe(t.segments,function yV(t,n,e,i,r,a){const o={};for(const s of i)if(hd(t,e,s)&&!r[or(s)]){const l=new Qe([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===a?t.segments.length:n.length,o[or(s)]=l}return Object.assign(Object.assign({},r),o)}(t,n,e,i,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:e}}const a=new Qe(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:e}}function hd(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function sS(t,n,e,i){return!!(or(t)===i||i!==je&&hd(n,e,t))&&("**"===t.path||dd(n,t,e).matched)}function lS(t,n,e){return 0===n.length&&!t.children[e]}class Wl{constructor(n){this.segmentGroup=n||null}}class cS{constructor(n){this.urlTree=n}}function pd(t){return new Xe(n=>n.error(new Wl(t)))}function uS(t){return new Xe(n=>n.error(new cS(t)))}function TV(t){return new Xe(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class AV{constructor(n,e,i,r,a){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=n.get(ca)}apply(){const n=fd(this.urlTree.root,[],[],this.config).segmentGroup,e=new Qe(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,e,je).pipe(We(a=>this.createUrlTree(Bg(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ia(a=>{if(a instanceof cS)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Wl?this.noMatchError(a):a}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,je).pipe(We(r=>this.createUrlTree(Bg(r),n.queryParams,n.fragment))).pipe(Ia(r=>{throw r instanceof Wl?this.noMatchError(r):r}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,e,i){const r=n.segments.length>0?new Qe([],{[je]:n}):n;return new lo(r,e,i)}expandSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,e,i).pipe(We(a=>new Qe([],a))):this.expandSegment(n,i,e,i.segments,r,!0)}expandChildren(n,e,i){const r=[];for(const a of Object.keys(i.children))"primary"===a?r.unshift(a):r.push(a);return Hn(r).pipe(Vl(a=>{const o=i.children[a],s=aS(e,a);return this.expandSegmentGroup(n,s,o,a).pipe(We(l=>({segment:l,outlet:a})))}),Dw((a,o)=>(a[o.outlet]=o.segment,a),{}),function _F(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Qn((r,a)=>t(r,a,i)):Dn,Tg(1),e?Aw(n):Mw(()=>new td))}())}expandSegment(n,e,i,r,a,o){return Hn(i).pipe(Vl(s=>this.expandSegmentAgainstRoute(n,e,i,s,r,a,o).pipe(Ia(c=>{if(c instanceof Wl)return Ae(null);throw c}))),gs(s=>!!s),Ia((s,l)=>{if(s instanceof td||"EmptyError"===s.name){if(lS(e,r,a))return Ae(new Qe([],{}));throw new Wl(e)}throw s}))}expandSegmentAgainstRoute(n,e,i,r,a,o,s){return sS(r,e,a,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,e,r,a,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o):pd(e):pd(e)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const a=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?uS(a):this.lineralizeSegments(i,a).pipe(pn(o=>{const s=new Qe(o,{});return this.expandSegment(n,s,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o){const{matched:s,consumedSegments:l,lastChild:c,positionalParamSegments:u}=dd(e,r,a);if(!s)return pd(e);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?uS(d):this.lineralizeSegments(r,d).pipe(pn(f=>this.expandSegment(n,e,i,f.concat(a.slice(c)),o,!1)))}matchSegmentAgainstRoute(n,e,i,r,a){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Ae(i._loadedConfig):this.configLoader.load(n.injector,i)).pipe(We(f=>(i._loadedConfig=f,new Qe(r,{})))):Ae(new Qe(r,{}));const{matched:o,consumedSegments:s,lastChild:l}=dd(e,i,r);if(!o)return pd(e);const c=r.slice(l);return this.getChildConfig(n,i,r).pipe(pn(d=>{const f=d.module,h=d.routes,{segmentGroup:v,slicedSegments:b}=fd(e,s,c,h),C=new Qe(v.segments,v.children);if(0===b.length&&C.hasChildren())return this.expandChildren(f,h,C).pipe(We(E=>new Qe(s,E)));if(0===h.length&&0===b.length)return Ae(new Qe(s,{}));const S=or(i)===a;return this.expandSegment(f,C,h,b,S?je:a,!0).pipe(We(D=>new Qe(s.concat(D.segments),D.children)))}))}getChildConfig(n,e,i){return e.children?Ae(new Fg(e.children,n)):e.loadChildren?void 0!==e._loadedConfig?Ae(e._loadedConfig):this.runCanLoadGuards(n.injector,e,i).pipe(pn(r=>r?this.configLoader.load(n.injector,e).pipe(We(a=>(e._loadedConfig=a,a))):function DV(t){return new Xe(n=>n.error(Mg(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Ae(new Fg([],n))}runCanLoadGuards(n,e,i){const r=e.canLoad;return r&&0!==r.length?Ae(r.map(o=>{const s=n.get(o);let l;if(function fV(t){return t&&Pa(t.canLoad)}(s))l=s.canLoad(e,i);else{if(!Pa(s))throw new Error("Invalid CanLoad guard");l=s(e,i)}return zr(l)})).pipe($l(),ci(o=>{if(!uo(o))return;const s=Mg(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw s.url=o,s}),We(o=>!0===o)):Ae(!0)}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ae(i);if(r.numberOfChildren>1||!r.children[je])return TV(n.redirectTo);r=r.children[je]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreatreUrlTree(n,e,i,r){const a=this.createSegmentGroup(n,e.root,i,r);return new lo(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Zn(n,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const s=r.substring(1);i[a]=e[s]}else i[a]=r}),i}createSegmentGroup(n,e,i,r){const a=this.createSegments(n,e.segments,i,r);let o={};return Zn(e.children,(s,l)=>{o[l]=this.createSegmentGroup(n,s,i,r)}),new Qe(a,o)}createSegments(n,e,i,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(n,a,r):this.findOrReturn(a,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${n}'. Cannot find '${e.path}'.`);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}function Bg(t){const n={};for(const i of Object.keys(t.children)){const a=Bg(t.children[i]);(a.segments.length>0||a.hasChildren())&&(n[i]=a)}return function RV(t){if(1===t.numberOfChildren&&t.children[je]){const n=t.children[je];return new Qe(t.segments.concat(n.segments),n.children)}return t}(new Qe(t.segments,n))}class dS{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class gd{constructor(n,e){this.component=n,this.route=e}}function kV(t,n,e){const i=t._root;return ql(i,n?n._root:null,e,[i.value])}function md(t,n,e){const i=function IV(t){if(!t)return null;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(n);return(i?i.module.injector:e).get(t)}function ql(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=vs(n);return t.children.forEach(o=>{(function PV(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,o=n?n.value:null,s=e?e.getContext(t.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){const l=function OV(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!co(t.url,n.url);case"pathParamsOrQueryParamsChange":return!co(t.url,n.url)||!$r(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ig(t,n)||!$r(t.queryParams,n.queryParams);default:return!Ig(t,n)}}(o,a,a.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new dS(i)):(a.data=o.data,a._resolvedData=o._resolvedData),ql(t,n,a.component?s?s.children:null:e,i,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new gd(s.outlet.component,o))}else o&&Yl(n,s,r),r.canActivateChecks.push(new dS(i)),ql(t,null,a.component?s?s.children:null:e,i,r)})(o,a[o.value.outlet],e,i.concat([o.value]),r),delete a[o.value.outlet]}),Zn(a,(o,s)=>Yl(o,e.getContext(s),r)),r}function Yl(t,n,e){const i=vs(t),r=t.value;Zn(i,(a,o)=>{Yl(a,r.component?n?n.children.getContext(o):null:n,e)}),e.canDeactivateChecks.push(new gd(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}class jV{}function fS(t){return new Xe(n=>n.error(t))}class zV{constructor(n,e,i,r,a,o){this.rootComponentType=n,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}recognize(){const n=fd(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,n,je);if(null===e)return null;const i=new ld([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},je,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new pa(i,e),a=new Qw(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(n){const e=n.value,i=Xw(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(n,e):this.processSegment(n,e,e.segments,i)}processChildren(n,e){const i=[];for(const a of Object.keys(e.children)){const o=e.children[a],s=aS(n,a),l=this.processSegmentGroup(s,o,a);if(null===l)return null;i.push(...l)}const r=hS(i);return function WV(t){t.sort((n,e)=>n.value.outlet===je?-1:e.value.outlet===je?1:n.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(n,e,i,r){for(const a of n){const o=this.processSegmentAgainstRoute(a,e,i,r);if(null!==o)return o}return lS(e,i,r)?[]:null}processSegmentAgainstRoute(n,e,i,r){if(n.redirectTo||!sS(n,e,i,r))return null;let a,o=[],s=[];if("**"===n.path){const h=i.length>0?xw(i).parameters:{};a=new ld(i,h,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mS(n),or(n),n.component,n,pS(e),gS(e)+i.length,vS(n))}else{const h=dd(e,n,i);if(!h.matched)return null;o=h.consumedSegments,s=i.slice(h.lastChild),a=new ld(o,h.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mS(n),or(n),n.component,n,pS(e),gS(e)+o.length,vS(n))}const l=function qV(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(n),{segmentGroup:c,slicedSegments:u}=fd(e,o,s,l.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const h=this.processChildren(l,c);return null===h?null:[new pa(a,h)]}if(0===l.length&&0===u.length)return[new pa(a,[])];const d=or(n)===r,f=this.processSegment(l,c,u,d?je:r);return null===f?null:[new pa(a,f)]}}function YV(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function hS(t){const n=[],e=new Set;for(const i of t){if(!YV(i)){n.push(i);continue}const r=n.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=hS(i.children);n.push(new pa(i.value,r))}return n.filter(i=>!e.has(i))}function pS(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function gS(t){let n=t,e=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift?n._segmentIndexShift:0;return e-1}function mS(t){return t.data||{}}function vS(t){return t.resolve||{}}function _S(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Ug(t){return fa(n=>{const e=t(n);return e?Hn(e).pipe(We(()=>n)):Ae(n)})}class nL extends class tL{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}{}const Hg=new Be("ROUTES");class bS{constructor(n,e,i,r){this.injector=n,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(n,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(We(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=a.create(n);return new Fg(Ow(o.injector.get(Hg,void 0,Ne.Self|Ne.Optional)).map(Lg),o)}),Ia(a=>{throw e._loader$=void 0,a}));return e._loader$=new gF(r,()=>new Yt).pipe(Tw()),e._loader$}loadModuleFactory(n){return zr(n()).pipe(pn(e=>e instanceof x0?Ae(e):Hn(this.compiler.compileModuleAsync(e))))}}class rL{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,e){return n}}function aL(t){throw t}function oL(t,n,e){return n.parse("/")}function yS(t,n){return Ae(null)}const sL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ji=(()=>{class t{constructor(e,i,r,a,o,s,l){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=a,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Yt,this.errorHandler=aL,this.malformedUriErrorHandler=oL,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:yS,afterPreactivation:yS},this.urlHandlingStrategy=new rL,this.routeReuseStrategy=new nL,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(ca),this.console=o.get(_1);const d=o.get(Ft);this.isNgZoneEnabled=d instanceof Ft&&Ft.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function OF(){return new lo(new Qe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bS(o,s,f=>this.triggerEvent(new Ew(f)),f=>this.triggerEvent(new kw(f))),this.routerState=Yw(this.currentUrlTree,this.rootComponentType),this.transitions=new yn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Qn(r=>0!==r.id),We(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),fa(r=>{let a=!1,o=!1;return Ae(r).pipe(ci(s=>{this.currentNavigation={id:s.id,initialUrl:s.currentRawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),fa(s=>{const l=this.browserUrlTree.toString(),c=!this.navigated||s.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return vd(s.source)&&(this.browserUrlTree=s.extractedUrl),Ae(s).pipe(fa(d=>{const f=this.transitions.getValue();return i.next(new Dg(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions.getValue()?ur:Promise.resolve(d)}),function EV(t,n,e,i){return fa(r=>function MV(t,n,e,i,r){return new AV(t,n,e,i,r).apply()}(t,n,e,r.extractedUrl,i).pipe(We(a=>Object.assign(Object.assign({},r),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ci(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function XV(t,n,e,i,r){return pn(a=>function $V(t,n,e,i,r="emptyOnly",a="legacy"){try{const o=new zV(t,n,e,i,r,a).recognize();return null===o?fS(new jV):Ae(o)}catch(o){return fS(o)}}(t,n,a.urlAfterRedirects,e(a.urlAfterRedirects),i,r).pipe(We(o=>Object.assign(Object.assign({},a),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),ci(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const h=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(h,d)}this.browserUrlTree=d.urlAfterRedirects}const f=new CF(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(f)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:f,extractedUrl:h,source:v,restoredState:b,extras:C}=s,S=new Dg(f,this.serializeUrl(h),v,b);i.next(S);const _=Yw(h,this.rootComponentType).snapshot;return Ae(Object.assign(Object.assign({},s),{targetSnapshot:_,urlAfterRedirects:h,extras:Object.assign(Object.assign({},C),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=s.rawUrl,s.resolve(null),ur}),Ug(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:f,replaceUrl:h}}=s;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!f,replaceUrl:!!h})}),ci(s=>{const l=new wF(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot);this.triggerEvent(l)}),We(s=>Object.assign(Object.assign({},s),{guards:kV(s.targetSnapshot,s.currentSnapshot,this.rootContexts)})),function xV(t,n){return pn(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:o}}=e;return 0===o.length&&0===a.length?Ae(Object.assign(Object.assign({},e),{guardsResult:!0})):function FV(t,n,e,i){return Hn(t).pipe(pn(r=>function GV(t,n,e,i,r){const a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return a&&0!==a.length?Ae(a.map(s=>{const l=md(s,n,r);let c;if(function gV(t){return t&&Pa(t.canDeactivate)}(l))c=zr(l.canDeactivate(t,n,e,i));else{if(!Pa(l))throw new Error("Invalid CanDeactivate guard");c=zr(l(t,n,e,i))}return c.pipe(gs())})).pipe($l()):Ae(!0)}(r.component,r.route,e,n,i)),gs(r=>!0!==r,!0))}(o,i,r,t).pipe(pn(s=>s&&function dV(t){return"boolean"==typeof t}(s)?function VV(t,n,e,i){return Hn(n).pipe(Vl(r=>Fl(function BV(t,n){return null!==t&&n&&n(new MF(t)),Ae(!0)}(r.route.parent,i),function LV(t,n){return null!==t&&n&&n(new RF(t)),Ae(!0)}(r.route,i),function HV(t,n,e){const i=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(o=>function NV(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(o)).filter(o=>null!==o).map(o=>Sw(()=>Ae(o.guards.map(l=>{const c=md(l,o.node,e);let u;if(function pV(t){return t&&Pa(t.canActivateChild)}(c))u=zr(c.canActivateChild(i,t));else{if(!Pa(c))throw new Error("Invalid CanActivateChild guard");u=zr(c(i,t))}return u.pipe(gs())})).pipe($l())));return Ae(a).pipe($l())}(t,r.path,e),function UV(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return Ae(!0);const r=i.map(a=>Sw(()=>{const o=md(a,n,e);let s;if(function hV(t){return t&&Pa(t.canActivate)}(o))s=zr(o.canActivate(n,t));else{if(!Pa(o))throw new Error("Invalid CanActivate guard");s=zr(o(n,t))}return s.pipe(gs())}));return Ae(r).pipe($l())}(t,r.route,e))),gs(r=>!0!==r,!0))}(i,a,t,n):Ae(s)),We(s=>Object.assign(Object.assign({},e),{guardsResult:s})))})}(this.ngModule.injector,s=>this.triggerEvent(s)),ci(s=>{if(uo(s.guardsResult)){const c=Mg(`Redirecting to "${this.serializeUrl(s.guardsResult)}"`);throw c.url=s.guardsResult,c}const l=new SF(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.triggerEvent(l)}),Qn(s=>!!s.guardsResult||(this.restoreHistory(s),this.cancelNavigationTransition(s,""),!1)),Ug(s=>{if(s.guards.canActivateChecks.length)return Ae(s).pipe(ci(l=>{const c=new TF(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),fa(l=>{let c=!1;return Ae(l).pipe(function QV(t,n){return pn(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Ae(e);let a=0;return Hn(r).pipe(Vl(o=>function ZV(t,n,e,i){return function JV(t,n,e,i){const r=_S(t);if(0===r.length)return Ae({});const a={};return Hn(r).pipe(pn(o=>function KV(t,n,e,i){const r=md(t,n,i);return zr(r.resolve?r.resolve(n,e):r(n,e))}(t[o],n,e,i).pipe(ci(s=>{a[o]=s}))),Tg(1),pn(()=>_S(a).length===r.length?Ae(a):ur))}(t._resolve,t,n,i).pipe(We(a=>(t._resolvedData=a,t.data=Object.assign(Object.assign({},t.data),Xw(t,e).resolve),null)))}(o.route,i,t,n)),ci(()=>a++),Tg(1),pn(o=>a===r.length?Ae(e):ur))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ci({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),ci(l=>{const c=new DF(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),Ug(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:f,replaceUrl:h}}=s;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!f,replaceUrl:!!h})}),We(s=>{const l=function JF(t,n,e){const i=Hl(t,n._root,e?e._root:void 0);return new qw(i,n)}(this.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return Object.assign(Object.assign({},s),{targetRouterState:l})}),ci(s=>{this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects)}),((t,n,e)=>We(i=>(new cV(n,i.targetRouterState,i.currentRouterState,e).activate(t),i)))(this.rootContexts,this.routeReuseStrategy,s=>this.triggerEvent(s)),ci({next(){a=!0},complete(){a=!0}}),function bF(t){return hn((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}(()=>{var s;a||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(s=this.currentNavigation)||void 0===s?void 0:s.id)===r.id&&(this.currentNavigation=null)}),Ia(s=>{if(o=!0,function NF(t){return t&&t[Iw]}(s)){const l=uo(s.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new Rw(r.id,this.serializeUrl(r.extractedUrl),s.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(s.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vd(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new yF(r.id,this.serializeUrl(r.extractedUrl),s);i.next(l);try{r.resolve(this.errorHandler(s))}catch(c){r.reject(c)}}return ur}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const a={replaceUrl:!0},o=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}const s=this.parseUrl(e.url);this.scheduleNavigation(s,i,o,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){rS(e),this.config=e.map(Lg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:a,fragment:o,queryParamsHandling:s,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(s){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}return null!==d&&(d=this.removeEmptyProps(d)),function tV(t,n,e,i,r){if(0===e.length)return Pg(n.root,n.root,n,i,r);const a=function nV(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Kw(!0,0,t);let n=0,e=!1;const i=t.reduce((r,a,o)=>{if("object"==typeof a&&null!=a){if(a.outlets){const s={};return Zn(a.outlets,(l,c)=>{s[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:s}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===o?(a.split("/").forEach((s,l)=>{0==l&&"."===s||(0==l&&""===s?e=!0:".."===s?n++:""!=s&&r.push(s))}),r):[...r,a]},[]);return new Kw(e,n,i)}(e);if(a.toRoot())return Pg(n.root,new Qe([],{}),n,i,r);const o=function iV(t,n,e){if(t.isAbsolute)return new Og(n.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new Og(a,a===n.root,0)}const i=cd(t.commands[0])?0:1;return function rV(t,n,e){let i=t,r=n,a=e;for(;a>r;){if(a-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new Og(i,!1,r-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,n,t),s=o.processChildren?ud(o.segmentGroup,o.index,a.commands):eS(o.segmentGroup,o.index,a.commands);return Pg(o.segmentGroup,s,n,i,r)}(c,this.currentUrlTree,e,d,null!=u?u:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=uo(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function cL(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${n}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},sL):!1===i?Object.assign({},lL):i,uo(e))return Vw(this.currentUrlTree,e,r);const a=this.parseUrl(e);return Vw(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const a=e[r];return null!=a&&(i[r]=a),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Ll(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,a,o){var s,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=vd(i)&&u&&!vd(u.source),f=u.rawUrl.toString()===e.toString(),h=u.id===(null===(s=this.currentNavigation)||void 0===s?void 0:s.id);if(d&&f&&h)return Promise.resolve(!0);let b,C,S;o?(b=o.resolve,C=o.reject,S=o.promise):S=new Promise((E,A)=>{b=E,C=A});const _=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),D=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):D=0,this.setTransition({id:_,targetPageId:D,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:b,reject:C,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(E=>Promise.reject(E))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(e,i=!1){var r,a;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new Rw(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return t.\u0275fac=function(e){Bh()},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();function vd(t){return"imperative"!==t}class CS{}class wS{preload(n,e){return Ae(null)}}let SS=(()=>{class t{constructor(e,i,r,a){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=new bS(r,i,l=>e.triggerEvent(new Ew(l)),l=>e.triggerEvent(new kw(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qn(e=>e instanceof Ll),Vl(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(ca);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const a of i)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children));return Hn(r).pipe(Ps(),We(a=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Ae(i._loadedConfig):this.loader.load(e.injector,i)).pipe(pn(a=>(i._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Q(ji),Q(wu),Q(mn),Q(CS))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})(),$g=(()=>{class t{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Dg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ll&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Nw&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new Nw(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){Bh()},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();const fo=new Be("ROUTER_CONFIGURATION"),TS=new Be("ROUTER_FORROOT_GUARD"),hL=[Ip,{provide:Hw,useClass:Gw},{provide:ji,useFactory:function _L(t,n,e,i,r,a,o={},s,l){const c=new ji(null,t,n,e,i,r,Ow(a));return s&&(c.urlHandlingStrategy=s),l&&(c.routeReuseStrategy=l),function bL(t,n){t.errorHandler&&(n.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(n.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(n.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(n.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(n.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(n.canceledNavigationResolution=t.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,f;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(f=console.groupEnd)||void 0===f||f.call(console)}),c},deps:[Hw,zl,Ip,mn,wu,Hg,fo,[class iL{},new xr],[class eL{},new xr]]},zl,{provide:_s,useFactory:function yL(t){return t.routerState.root},deps:[ji]},SS,wS,class fL{preload(n,e){return e().pipe(Ia(()=>Ae(null)))}},{provide:fo,useValue:{enableTracing:!1}}];function pL(){return new T1("Router",ji)}let DS=(()=>{class t{constructor(e,i){}static forRoot(e,i){return{ngModule:t,providers:[hL,MS(e),{provide:TS,useFactory:vL,deps:[[ji,new xr,new xo]]},{provide:fo,useValue:i||{}},{provide:ds,useFactory:mL,deps:[ao,[new Qs(Np),new xr],fo]},{provide:$g,useFactory:gL,deps:[ji,Sx,fo]},{provide:CS,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:wS},{provide:T1,multi:!0,useFactory:pL},[zg,{provide:yu,multi:!0,useFactory:CL,deps:[zg]},{provide:AS,useFactory:wL,deps:[zg]},{provide:v1,multi:!0,useExisting:AS}]]}}static forChild(e){return{ngModule:t,providers:[MS(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Q(TS,8),Q(ji,8))},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({}),t})();function gL(t,n,e){return e.scrollOffset&&n.setOffset(e.scrollOffset),new $g(t,n,e)}function mL(t,n,e={}){return e.useHash?new sO(t,n):new $1(t,n)}function vL(t){return"guarded"}function MS(t){return[{provide:QM,multi:!0,useValue:t},{provide:Hg,multi:!0,useValue:t}]}let zg=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Yt}appInitializer(){return this.injector.get(rO,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(s=>i=s),a=this.injector.get(ji),o=this.injector.get(fo);return"disabled"===o.initialNavigation?(a.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Ae(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),a.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(fo),r=this.injector.get(SS),a=this.injector.get($g),o=this.injector.get(ji),s=this.injector.get(io);e===s.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),a.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(Q(mn))},t.\u0275prov=fe({token:t,factory:t.\u0275fac}),t})();function CL(t){return t.appInitializer.bind(t)}function wL(t){return t.bootstrapListener.bind(t)}const AS=new Be("Router Initializer"),TL=[];let DL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[DS.forRoot(TL)],DS]}),t})();function RS(t,n,e,i,r,a,o){try{var s=t[a](o),l=s.value}catch(c){return void e(c)}s.done?n(l):Promise.resolve(l).then(i,r)}function _d(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var a=t.apply(n,e);function o(l){RS(a,i,r,o,s,"next",l)}function s(l){RS(a,i,r,o,s,"throw",l)}o(void 0)})}}var Ue=(()=>{return(t=Ue||(Ue={}))[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",Ue;var t})();const Ci=new class ML{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(n){this._typeMetadatas.has(n.target)||this._typeMetadatas.set(n.target,new Map),this._typeMetadatas.get(n.target).set(n.propertyName,n)}addTransformMetadata(n){this._transformMetadatas.has(n.target)||this._transformMetadatas.set(n.target,new Map),this._transformMetadatas.get(n.target).has(n.propertyName)||this._transformMetadatas.get(n.target).set(n.propertyName,[]),this._transformMetadatas.get(n.target).get(n.propertyName).push(n)}addExposeMetadata(n){this._exposeMetadatas.has(n.target)||this._exposeMetadatas.set(n.target,new Map),this._exposeMetadatas.get(n.target).set(n.propertyName,n)}addExcludeMetadata(n){this._excludeMetadatas.has(n.target)||this._excludeMetadatas.set(n.target,new Map),this._excludeMetadatas.get(n.target).set(n.propertyName,n)}findTransformMetadatas(n,e,i){return this.findMetadatas(this._transformMetadatas,n,e).filter(r=>!r.options||!0===r.options.toClassOnly&&!0===r.options.toPlainOnly||(!0===r.options.toClassOnly?i===Ue.CLASS_TO_CLASS||i===Ue.PLAIN_TO_CLASS:!0!==r.options.toPlainOnly||i===Ue.CLASS_TO_PLAIN))}findExcludeMetadata(n,e){return this.findMetadata(this._excludeMetadatas,n,e)}findExposeMetadata(n,e){return this.findMetadata(this._exposeMetadatas,n,e)}findExposeMetadataByCustomName(n,e){return this.getExposedMetadatas(n).find(i=>i.options&&i.options.name===e)}findTypeMetadata(n,e){return this.findMetadata(this._typeMetadatas,n,e)}getStrategy(n){const e=this._excludeMetadatas.get(n),i=e&&e.get(void 0),r=this._exposeMetadatas.get(n),a=r&&r.get(void 0);return i&&a||!i&&!a?"none":i?"excludeAll":"exposeAll"}getExposedMetadatas(n){return this.getMetadata(this._exposeMetadatas,n)}getExcludedMetadatas(n){return this.getMetadata(this._excludeMetadatas,n)}getExposedProperties(n,e){return this.getExposedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===Ue.CLASS_TO_CLASS||e===Ue.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===Ue.CLASS_TO_PLAIN)).map(i=>i.propertyName)}getExcludedProperties(n,e){return this.getExcludedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===Ue.CLASS_TO_CLASS||e===Ue.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===Ue.CLASS_TO_PLAIN)).map(i=>i.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(n,e){const i=n.get(e);let r;i&&(r=Array.from(i.values()).filter(o=>void 0!==o.propertyName));const a=[];for(const o of this.getAncestors(e)){const s=n.get(o);if(s){const l=Array.from(s.values()).filter(c=>void 0!==c.propertyName);a.push(...l)}}return a.concat(r||[])}findMetadata(n,e,i){const r=n.get(e);if(r){const a=r.get(i);if(a)return a}for(const a of this.getAncestors(e)){const o=n.get(a);if(o){const s=o.get(i);if(s)return s}}}findMetadatas(n,e,i){const r=n.get(e);let a;r&&(a=r.get(i));const o=[];for(const s of this.getAncestors(e)){const l=n.get(s);l&&l.has(i)&&o.push(...l.get(i))}return o.slice().reverse().concat((a||[]).slice().reverse())}getAncestors(n){if(!n)return[];if(!this._ancestorsMap.has(n)){const e=[];for(let i=Object.getPrototypeOf(n.prototype.constructor);void 0!==i.prototype;i=Object.getPrototypeOf(i.prototype.constructor))e.push(i);this._ancestorsMap.set(n,e)}return this._ancestorsMap.get(n)}};function Et(t,n={}){return function(e,i){const r=Reflect.getMetadata("design:type",e,i);Ci.addTypeMetadata({target:e.constructor,propertyName:i,reflectedType:r,typeFunction:t,options:n})}}var I=(()=>{return(t=I||(I={}))[t.Horse=0]="Horse",t[t.Cheetah=1]="Cheetah",t[t.Hare=2]="Hare",t[t.Monkey=3]="Monkey",t[t.Goat=4]="Goat",t[t.Gecko=5]="Gecko",t[t.Dolphin=6]="Dolphin",t[t.Shark=7]="Shark",t[t.Octopus=8]="Octopus",t[t.Penguin=9]="Penguin",t[t.Caribou=10]="Caribou",t[t.Salamander=11]="Salamander",t[t.Fox=12]="Fox",I;var t})(),P=(()=>{return(t=P||(P={}))[t.Flatland=0]="Flatland",t[t.Mountain=1]="Mountain",t[t.Ocean=2]="Ocean",t[t.Tundra=3]="Tundra",t[t.Volcanic=4]="Volcanic",P;var t})();class oe{constructor(n,e,i){this.name=n,this.amount=e,void 0!==i&&(this.itemType=i)}makeCopy(n){var e=new oe("",0);return e.name=JSON.parse(JSON.stringify(n.name)),e.amount=JSON.parse(JSON.stringify(n.amount)),e.itemType=JSON.parse(JSON.stringify(n.itemType)),e}}class ee{constructor(n,e,i,r,a,o){this.defaultStaminaModifier=5,this.defaultMaxSpeedModifier=.3,this.defaultAccelerationModifier=.1,this.defaultPowerModifier=1,this.defaultFocusModifier=5,this.defaultAdaptabilityModifier=5,this.defaultBurstDistanceModifier=3,this.diminishingReturnsDefaultStatThreshold=20,void 0!==n&&(this.topSpeed=n),void 0!==e&&(this.acceleration=e),void 0!==i&&(this.endurance=i),void 0!==r&&(this.power=r),void 0!==a&&(this.focus=a),void 0!==o&&(this.adaptability=o)}calculateStamina(n,e){return null==n&&(n=this.defaultStaminaModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.endurance<=e?this.endurance*n:e*n+(this.endurance-e)*(n*this.calculateDiminishingReturns(this.endurance-e))}calculateMaxSpeed(n,e){return null==n&&(n=this.defaultMaxSpeedModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.topSpeed<=e?this.topSpeed*n:e*n+(this.topSpeed-e)*(n*this.calculateDiminishingReturns(this.topSpeed-e))}calculateTrueAcceleration(n,e){return null==n&&(n=this.defaultAccelerationModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.acceleration<=e?this.acceleration*n:e*n+(this.acceleration-e)*(n*this.calculateDiminishingReturns(this.acceleration-e))}calculateTruePower(n,e){return null==n&&(n=this.defaultPowerModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.power<=e?this.power*n:e*n+(this.power-e)*(n*this.calculateDiminishingReturns(this.power-e))}calculateTrueFocus(n,e){return null==n&&(n=this.defaultFocusModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.focus<=e?this.focus*n:e*n+(this.focus-e)*(n*this.calculateDiminishingReturns(this.focus-e))}calculateTrueAdaptability(n,e){return null==n&&(n=this.defaultAdaptabilityModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.adaptability<=e?this.adaptability*n:e*n+(this.adaptability-e)*(n*this.calculateDiminishingReturns(this.adaptability-e))}calculateBurstChance(n,e){return(this.adaptability+this.focus)/1e3*100}calculateBurstDistance(n){return null==n&&(n=this.defaultBurstDistanceModifier),this.power*n}topSpeedPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}accelerationPopover(n){return"Every stat point increases acceleration by "+n.toFixed(3)+"m/s up to diminishing returns."}endurancePopover(n){return"Every stat point increases stamina by "+n.toFixed(3)+" up to diminishing returns."}powerPopover(n){return"Every stat point increases ability efficiency by "+n.toFixed(3)+"% up to diminishing returns."}focusPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}adaptabilityPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}maxSpeedMsPopover(){return"This is the max speed this animal can go during a race."}accelerationMsPopover(){return"This is how quickly this animal will gain speed."}staminaPopover(){return"Your animal loses stamina while racing. If its stamina reaches 0, it will slow down for a period of time while its stamina recharges."}powerMsPopover(){return"This increases the efficiency of your animal's ability."}focusMsPopover(){return"This is the average distance your animal can go without losing focus, causing them to stop."}adaptabilityMsPopover(){return"This is the average distance your animal can go without stumbling, causing them to slow down."}burstChancePopover(){return"Every time you enter a path, you have the chance to enter burst mode. This is your chance per 1000 meters that you will burst. Increase by improving Focus and Adaptability."}burstDistancePopover(){return"This is how far you can go while bursting. Increase by improving Power."}calculateDiminishingReturns(n){return 1/n**.6}addCurrentRacingStats(n){this.maxSpeedMs+=n.topSpeed,this.accelerationMs+=n.acceleration,this.stamina+=n.endurance,this.powerMs+=n.power,this.focusMs+=n.focus,this.adaptabilityMs+=n.adaptability}subtractCurrentRacingStats(n){this.maxSpeedMs-=n.topSpeed,this.accelerationMs-=n.acceleration,this.stamina-=n.endurance,this.powerMs-=n.power,this.focusMs-=n.focus,this.adaptabilityMs-=n.adaptability}multiplyCurrentRacingStats(n){this.maxSpeedMs*=n.topSpeed,this.accelerationMs*=n.acceleration,this.stamina*=n.endurance,this.powerMs*=n.power,this.focusMs*=n.focus,this.adaptabilityMs*=n.adaptability}divideCurrentRacingStats(n){this.maxSpeedMs/=n.topSpeed,this.accelerationMs/=n.acceleration,this.stamina/=n.endurance,this.powerMs/=n.power,this.focusMs/=n.focus,this.adaptabilityMs/=n.adaptability}}var ve=(()=>{return(t=ve||(ve={}))[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large",ve;var t})();class ys{constructor(){this.trainingTimeRemaining=7200,this.timeTrained=0,this.isAvailable=!1,this.purchasePrice=50}makeCopy(n){var e=new ys;return e.affectedStatRatios=JSON.parse(JSON.stringify(n.affectedStatRatios)),e.facilitySize=JSON.parse(JSON.stringify(n.facilitySize)),e.isAvailable=JSON.parse(JSON.stringify(n.isAvailable)),e.purchasePrice=JSON.parse(JSON.stringify(n.purchasePrice)),e.statGain=JSON.parse(JSON.stringify(n.statGain)),e.timeToComplete=JSON.parse(JSON.stringify(n.timeToComplete)),e.timeTrained=JSON.parse(JSON.stringify(n.timeTrained)),e.trainingCourseType=JSON.parse(JSON.stringify(n.trainingCourseType)),e.trainingName=JSON.parse(JSON.stringify(n.trainingName)),e.trainingType=JSON.parse(JSON.stringify(n.trainingType)),e}getFacilitySize(){return ve[this.facilitySize]}getStatGainDescription(){var n="";return this.affectedStatRatios.topSpeed>0&&(n+="+"+this.statGain*this.affectedStatRatios.topSpeed+" Top Speed\n"),this.affectedStatRatios.acceleration>0&&(n+="+"+this.statGain*this.affectedStatRatios.acceleration+" Acceleration\n"),this.affectedStatRatios.endurance>0&&(n+="+"+this.statGain*this.affectedStatRatios.endurance+" Endurance\n"),this.affectedStatRatios.focus>0&&(n+="+"+this.statGain*this.affectedStatRatios.focus+" Focus\n"),this.affectedStatRatios.power>0&&(n+="+"+this.statGain*this.affectedStatRatios.power+" Power\n"),this.affectedStatRatios.adaptability>0&&(n+="+"+this.statGain*this.affectedStatRatios.adaptability+" Adaptability\n"),n}}Tt([Et(()=>ee),Dt("design:type",ee)],ys.prototype,"affectedStatRatios",void 0);class Ve{constructor(){this.abilityLevel=1,this.abilityXp=0,this.abilityMaxXp=50}increaseAbilityXp(){this.abilityXp+=1,this.abilityXp>=this.abilityMaxXp&&(this.abilityXp=0,this.abilityLevel+=1,this.abilityMaxXp+=5)}}class AL{constructor(){this.maxSpeedModifier=1,this.accelerationModifier=1,this.staminaModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1}}class Wg{constructor(){this.metersSinceLostFocus=0,this.recoveringStamina=!1,this.defaultRecoveringStaminaLength=150,this.currentRecoveringStaminaLength=this.defaultRecoveringStaminaLength,this.ranOutOfStamina=!1,this.lostFocus=!1,this.defaultLostFocusLength=60,this.currentLostFocusLength=this.defaultLostFocusLength,this.stumbled=!1,this.defaultStumbledLength=10,this.currentStumbledLength=this.defaultStumbledLength,this.relayEffects=[],this.burstCount=0,this.icyCurrentYAmount=0,this.icyCurrentDirectionUp=!0,this.headbandStumblePreventionCount=0}}class Wt{constructor(){this.incubatorStatUpgrades=new AL,this.breedLevel=1,this.breedGaugeXp=0,this.breedGaugeMax=100,this.totalRacesRun=0,this.canTrain=!0,this.isAvailable=!1,this.availableAbilities=[]}viewAbility(){return this.ability.name}getAbilityUseUpdateText(n,e=""){return n+" uses "+this.ability.name+e+"."}useAbility(){}getAnimalType(){return I[this.type]}getRaceCourseType(){return P[this.raceCourseType]}getTraitName(){return null==this.trait||""===this.trait.traitName?"None":this.trait.traitName}getEquippedItemName(){if(null!=this.equippedItem)return this.equippedItem.name}increaseStatsFromCurrentTraining(){null==this.currentTraining||null==this.currentStats||(this.currentStats.topSpeed+=this.currentTraining.affectedStatRatios.topSpeed*this.currentTraining.statGain,this.currentStats.acceleration+=this.currentTraining.affectedStatRatios.acceleration*this.currentTraining.statGain,this.currentStats.endurance+=this.currentTraining.affectedStatRatios.endurance*this.currentTraining.statGain,this.currentStats.power+=this.currentTraining.affectedStatRatios.power*this.currentTraining.statGain,this.currentStats.focus+=this.currentTraining.affectedStatRatios.focus*this.currentTraining.statGain,this.currentStats.adaptability+=this.currentTraining.affectedStatRatios.adaptability*this.currentTraining.statGain)}increaseStats(n){null==n||null==this.currentStats||(this.currentStats.topSpeed+=Number(n.topSpeed),this.currentStats.acceleration+=Number(n.acceleration),this.currentStats.stamina+=Number(n.stamina),this.currentStats.endurance+=Number(n.endurance),this.currentStats.power+=Number(n.power),this.currentStats.focus+=Number(n.focus),this.currentStats.adaptability+=Number(n.adaptability))}}Tt([Et(()=>ee),Dt("design:type",ee)],Wt.prototype,"currentStats",void 0),Tt([Et(()=>ee),Dt("design:type",ee)],Wt.prototype,"baseStats",void 0),Tt([Et(()=>ys),Dt("design:type",Object)],Wt.prototype,"currentTraining",void 0),Tt([Et(()=>Ve),Dt("design:type",Ve)],Wt.prototype,"ability",void 0),Tt([Et(()=>Wg),Dt("design:type",Wg)],Wt.prototype,"raceVariables",void 0),Tt([Et(()=>oe),Dt("design:type",Object)],Wt.prototype,"equippedItem",void 0);class RL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Horse,this.raceCourseType=P.Flatland,this.ability=new Ve,this.ability.cooldown=10,this.ability.efficiency=60,this.ability.oneTimeEffect=!1,this.ability.name="Second Wind",this.ability.description="Second Wind",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.efficiency=50,n.oneTimeEffect=!0,n.name="Inspiration",n.description="Inspiration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.cooldown=12,e.efficiency=65,e.oneTimeEffect=!1,e.name="Pacemaker",e.description="Pacemaker",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class EL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Cheetah,this.raceCourseType=P.Flatland,this.ability=new Ve,this.ability.cooldown=10,this.ability.efficiency=50,this.ability.oneTimeEffect=!1,this.ability.name="Sprint",this.ability.description="Sprint",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.efficiency=4,n.oneTimeEffect=!1,n.name="Giving Chase",n.description="Giving Chase",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=2,e.oneTimeEffect=!1,e.name="On The Hunt",e.description="On The Hunt",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class kL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Hare,this.raceCourseType=P.Flatland,this.ability=new Ve,this.ability.efficiency=45,this.ability.oneTimeEffect=!0,this.ability.name="Prey Instinct",this.ability.description="Prey Instinct",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.cooldown=8,n.efficiency=60,n.oneTimeEffect=!1,n.name="Awareness",n.description="Awareness",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=130,e.oneTimeEffect=!0,e.name="Nap",e.description="Nap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class NL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Monkey,this.raceCourseType=P.Mountain,this.ability=new Ve,this.ability.cooldown=16,this.ability.efficiency=17,this.ability.name="Landslide",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.efficiency=60,n.oneTimeEffect=!0,n.name="Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=70,e.cooldown=0,e.oneTimeEffect=!0,e.name="Leap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=30,this.availableAbilities.push(e)}}class IL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Goat,this.raceCourseType=P.Mountain,this.ability=new Ve,this.ability.efficiency=2,this.ability.oneTimeEffect=!1,this.ability.name="Sure-footed",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.efficiency=5,n.oneTimeEffect=!1,n.name="Deep Breathing",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=1,e.oneTimeEffect=!1,e.name="In The Rhythm",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=15,this.availableAbilities.push(e)}}class PL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Gecko,this.raceCourseType=P.Mountain,this.ability=new Ve,this.ability.cooldown=5,this.ability.efficiency=55,this.ability.oneTimeEffect=!1,this.ability.name="Sticky",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.efficiency=2,n.oneTimeEffect=!1,n.name="Night Vision",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=40,e.oneTimeEffect=!0,e.name="Camouflage",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class OL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Dolphin,this.raceCourseType=P.Ocean,this.ability=new Ve,this.ability.cooldown=9,this.ability.efficiency=75,this.ability.oneTimeEffect=!1,this.ability.name="Echolocation",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.efficiency=50,n.oneTimeEffect=!0,n.name="Navigator",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=70,e.oneTimeEffect=!0,e.name="Flowing Current",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class xL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Shark,this.raceCourseType=P.Ocean,this.ability=new Ve,this.ability.efficiency=60,this.ability.oneTimeEffect=!0,this.ability.name="Apex Predator",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.efficiency=35,n.oneTimeEffect=!0,n.name="Feeding Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=2,e.oneTimeEffect=!0,e.name="Blood In The Water",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class FL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Octopus,this.raceCourseType=P.Ocean,this.ability=new Ve,this.ability.cooldown=5,this.ability.efficiency=17,this.ability.totalFrames=15,this.ability.oneTimeEffect=!1,this.ability.name="Propulsion",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.efficiency=4,n.oneTimeEffect=!1,n.name="Buried Treasure",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=3,e.oneTimeEffect=!0,e.name="Big Brain",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class VL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Penguin,this.raceCourseType=P.Tundra,this.ability=new Ve,this.ability.efficiency=70,this.ability.cooldown=10,this.ability.oneTimeEffect=!1,this.ability.name="Careful Toboggan",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.efficiency=7,n.oneTimeEffect=!1,n.name="Wild Toboggan",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=1,e.oneTimeEffect=!1,e.name="Quick Toboggan",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class LL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Caribou,this.raceCourseType=P.Tundra,this.ability=new Ve,this.ability.efficiency=4,this.ability.oneTimeEffect=!0,this.ability.name="Herd Mentality",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.efficiency=50,n.cooldown=7,n.oneTimeEffect=!1,n.name="Great Migration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=2,e.oneTimeEffect=!0,e.name="Special Delivery",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class BL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Salamander,this.raceCourseType=P.Volcanic,this.ability=new Ve,this.ability.cooldown=7,this.ability.efficiency=70,this.ability.oneTimeEffect=!1,this.ability.name="Cold Blooded",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.cooldown=6,n.efficiency=50,n.oneTimeEffect=!1,n.name="Burrow",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=30,e.cooldown=12,e.oneTimeEffect=!1,e.name="Heat Up",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class UL extends Wt{constructor(){super(),this.baseStats=new ee(5,5,5,5,5,5),this.currentStats=new ee(5,5,5,5,5,5),this.type=I.Fox,this.raceCourseType=P.Volcanic,this.ability=new Ve,this.ability.cooldown=5,this.ability.efficiency=60,this.ability.oneTimeEffect=!1,this.ability.name="Trickster",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Ve;n.efficiency=6,n.oneTimeEffect=!1,n.name="Fleeting Speed",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Ve;e.efficiency=65,e.oneTimeEffect=!0,e.name="Nine Tails",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class bd{constructor(){this.selectedAnimals=[],this.courseTypeOrder=[],this.isCourseOrderActive=!1,this.autoRunFreeRace=!1}}Tt([Et(()=>Wt),Dt("design:type",Array)],bd.prototype,"selectedAnimals",void 0);class HL{constructor(){this.upgradePrice=[],this.upgradedStatGain=new ee(1,1,1,1,1,1),this.barnLevel=0,this.specializationLevel=0,this.currentDeltaTime=0}}class qg{constructor(){this.barnUpgrades=new HL}getSize(){return ve[this.size]}}class Yg{constructor(){this.timeTrained=0,this.timeToComplete=300}}class ES{}var $e=(()=>{return(t=$e||($e={}))[t.Sunny=0]="Sunny",t[t.Rainy=1]="Rainy",t[t.Stormy=2]="Stormy",t[t.Snowfall=3]="Snowfall",t[t.Maelstrom=4]="Maelstrom",t[t.Hailstorm=5]="Hailstorm",t[t.Ashfall=6]="Ashfall",t[t.Torrid=7]="Torrid",$e;var t})(),ae=(()=>{return(t=ae||(ae={}))[t.Regular=0]="Regular",t[t.S=1]="S",t[t.Bumps=2]="Bumps",t[t.Crevasse=3]="Crevasse",t[t.Gaps=4]="Gaps",t[t.Waves=5]="Waves",t[t.Dive=6]="Dive",t[t.Cavern=7]="Cavern",t[t.Hills=8]="Hills",t[t.FirstRegular=9]="FirstRegular",t[t.LastRegular=10]="LastRegular",t[t.SteppingStones=11]="SteppingStones",ae;var t})(),$i=(()=>{return(t=$i||($i={}))[t.None=0]="None",t[t.Low=.8]="Low",t[t.Medium=.6]="Medium",t[t.High=.4]="High",$i;var t})();class yd{constructor(n){this.didAnimalStumble=!1,this.didAnimalLoseFocus=!1,this.checkedForBurst=!1,this.checkedForNineTails=!1,null!=n&&this.setStumbleFields(),this.driftAmount=0,this.isSpecialPath=!1}setStumbleFields(){this.currentStumbleOpportunity=0,this.routeDesign===ae.Regular&&(this.stumbleSeverity=$i.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=500),this.routeDesign===ae.S&&(this.isSpecialPath=!0,this.stumbleSeverity=$i.Low,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===ae.Bumps&&(this.isSpecialPath=!0,this.stumbleSeverity=$i.Medium,this.frequencyOfStumble=20,this.stumbleOpportunities=8),this.routeDesign===ae.Crevasse&&(this.isSpecialPath=!0,this.stumbleSeverity=$i.High,this.frequencyOfStumble=80,this.stumbleOpportunities=6),this.routeDesign===ae.Gaps&&(this.isSpecialPath=!0,this.stumbleSeverity=$i.Medium,this.frequencyOfStumble=175,this.stumbleOpportunities=4),this.routeDesign===ae.Waves&&(this.isSpecialPath=!0,this.stumbleSeverity=$i.Medium,this.frequencyOfStumble=50,this.stumbleOpportunities=6),this.routeDesign===ae.Dive&&(this.isSpecialPath=!0,this.stumbleSeverity=$i.High,this.frequencyOfStumble=200,this.stumbleOpportunities=2),this.routeDesign===ae.Cavern&&(this.isSpecialPath=!0,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=500),this.routeDesign===ae.Hills&&(this.isSpecialPath=!0,this.stumbleSeverity=$i.High,this.frequencyOfStumble=120,this.stumbleOpportunities=3,this.frequencyOfDrift=250),(this.routeDesign===ae.FirstRegular||this.routeDesign===ae.LastRegular)&&(this.isSpecialPath=!0,this.stumbleSeverity=$i.Medium,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===ae.SteppingStones&&(this.isSpecialPath=!0,this.stumbleSeverity=$i.High,this.frequencyOfStumble=60,this.stumbleOpportunities=10)}}class Cs{constructor(n){var e=.8,r=1.2;this.maxSpeedModifier=1,this.accelerationModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1,null!==n&&(this.terrainType=n,n===$e.Sunny&&(this.staminaModifier=1.5,this.maxSpeedModifier=r),n===$e.Rainy&&(this.adaptabilityModifier=e,this.focusModifier=r),n===$e.Stormy&&(this.focusModifier=e,this.accelerationModifier=r),n===$e.Maelstrom&&(this.accelerationModifier=e,this.maxSpeedModifier=e,this.adaptabilityModifier=r),n===$e.Hailstorm&&(this.focusModifier=e,this.adaptabilityModifier=e,this.maxSpeedModifier=e),n===$e.Ashfall&&(this.staminaModifier=r,this.accelerationModifier=e,this.powerModifier=e),n===$e.Snowfall&&(this.staminaModifier=e,this.maxSpeedModifier=e,this.accelerationModifier=e),n===$e.Torrid&&(this.powerModifier=e,this.maxSpeedModifier=e,this.focusModifier=r))}getTerrainType(){return $e[this.terrainType]}}class Zt{constructor(n,e){this.legComplete=!1,null!=n&&(this.courseType=n),void 0!==e&&null!=e&&(this.distance=e),this.pathData=[]}getCourseTypeName(){return P[this.courseType]}getCourseTypeClass(){return this.courseType===P.Flatland?"flatlandColor":this.courseType===P.Mountain?"mountainColor":this.courseType===P.Ocean?"waterColor":this.courseType===P.Tundra?"tundraColor":this.courseType===P.Volcanic?"volcanicColor":""}getTerrainName(){return null==this.terrain?"":$e[this.terrain.terrainType]}}Tt([Et(()=>yd),Dt("design:type",Array)],Zt.prototype,"pathData",void 0),Tt([Et(()=>Cs),Dt("design:type",Cs)],Zt.prototype,"terrain",void 0);class Xg{constructor(){this.distanceCoveredByFrame=[],this.velocityByFrame=[],this.timeToCompleteByFrame=[],this.maxSpeedByFrame=[],this.staminaPercentByFrame=[],this.racerEffectByFrame=[],this.yAdjustmentByFrame=[],this.lavaFallPercentByFrame=[]}}class Wr{constructor(n,e,i,r,a,o,s,l){this.raceLegs=n,this.requiredRank=e,this.isCircuitRace=i,this.raceId=r,this.length=a,this.timeToComplete=o,this.raceUI=new Xg,this.circuitIncreaseReward=["",""],null!=s&&(this.rewards=s),null!=l&&(this.localRaceType=l)}}Tt([Et(()=>Zt),Dt("design:type",Array)],Wr.prototype,"raceLegs",void 0),Tt([Et(()=>oe),Dt("design:type",Array)],Wr.prototype,"rewards",void 0),Tt([Et(()=>Xg),Dt("design:type",Xg)],Wr.prototype,"raceUI",void 0);class ze{constructor(){this.isAvailable=!0,this.amountPurchased=0,this.totalShopQuantity=1,this.quantityMultiplier=1,this.purchasePrice=[],this.basePurchasePrice=[]}}class Oa{}Tt([Et(()=>ze),Dt("design:type",Array)],Oa.prototype,"itemList",void 0);class Qg{constructor(){this.settings=[]}get(n){var e=this.settings.find(i=>i[0]===n);return null!=e?e[1]:""}set(n,e){var i=this.settings.find(r=>r[0]===n);null==i?this.settings.push([n,e]):i[1]=e}}class F{constructor(n,e){void 0!==n&&(this.value=n),void 0!==e&&(this.text=e)}}class Zg{constructor(){this.totalRaces=0,this.totalBreeds=0,this.totalMetersRaced=0,this.mostUsedAnimal="",this.mostRacedCourseType=""}}class Jg{constructor(){this.unlockables=[]}get(n){var e=this.unlockables.find(i=>i[0]===n);return null!=e&&e[1]}set(n,e){var i=this.unlockables.find(r=>r[0]===n);null==i?this.unlockables.push([n,e]):i[1]=e}}class Jn{constructor(n){this.userIsRacing=!1,null!=n&&(this.animals=n.animals,this.barns=n.barns,this.trainingOptions=n.trainingOptions,this.circuitRaces=n.circuitRaces,this.circuitRank=n.circuitRank,this.localRaces=n.localRaces,this.resources=n.resources,this.modifiers=n.modifiers,this.shop=n.shop,this.animalDecks=n.animalDecks,this.incubator=n.incubator,this.trackedStats=n.trackedStats,this.pinnacle=n.pinnacle,this.nationalRaceCountdown=0,this.autoFreeRaceCounter=0,this.freeRaceCounter=0,this.freeRaceTimePeriodCounter=0)}}Tt([Et(()=>Wt),Dt("design:type",Array)],Jn.prototype,"animals",void 0),Tt([Et(()=>qg),Dt("design:type",Array)],Jn.prototype,"barns",void 0),Tt([Et(()=>ys),Dt("design:type",Array)],Jn.prototype,"trainingOptions",void 0),Tt([Et(()=>Wr),Dt("design:type",Array)],Jn.prototype,"circuitRaces",void 0),Tt([Et(()=>Wr),Dt("design:type",Array)],Jn.prototype,"localRaces",void 0),Tt([Et(()=>ES),Dt("design:type",ES)],Jn.prototype,"pinnacle",void 0),Tt([Et(()=>oe),Dt("design:type",Array)],Jn.prototype,"resources",void 0),Tt([Et(()=>F),Dt("design:type",Array)],Jn.prototype,"modifiers",void 0),Tt([Et(()=>Oa),Dt("design:type",Array)],Jn.prototype,"shop",void 0),Tt([Et(()=>bd),Dt("design:type",Array)],Jn.prototype,"animalDecks",void 0),Tt([Et(()=>Qg),Dt("design:type",Qg)],Jn.prototype,"settings",void 0),Tt([Et(()=>Jg),Dt("design:type",Jg)],Jn.prototype,"unlockables",void 0),Tt([Et(()=>Yg),Dt("design:type",Yg)],Jn.prototype,"incubator",void 0),Tt([Et(()=>Zg),Dt("design:type",Zg)],Jn.prototype,"trackedStats",void 0);var W=(()=>{return(t=W||(W={}))[t.ShortTrackRunning=0]="ShortTrackRunning",t[t.Sprints=1]="Sprints",t[t.TrailRunning=2]="TrailRunning",t[t.MoveLogs=3]="MoveLogs",t[t.Footwork=4]="Footwork",t[t.PracticeCommands=5]="PracticeCommands",t[t.ScentTraining=6]="ScentTraining",t[t.SmallWagonTow=7]="SmallWagonTow",t[t.Sidestep=8]="Sidestep",t[t.MediumTrackRunning=9]="MediumTrackRunning",t[t.UphillRun=10]="UphillRun",t[t.Puzzles=11]="Puzzles",t[t.MoveRocks=12]="MoveRocks",t[t.LateralVerticalDrill=13]="LateralVerticalDrill",t[t.DodgeBall=14]="DodgeBall",t[t.BurstPractice=15]="BurstPractice",t[t.Acrobatics=16]="Acrobatics",t[t.LongTrackRunning=17]="LongTrackRunning",t[t.VehicleTow=18]="VehicleTow",t[t.LogJump=19]="LogJump",t[t.Meditation=20]="Meditation",t[t.WindSprints=21]="WindSprints",t[t.GreenwayHike=22]="GreenwayHike",t[t.Marathon=23]="Marathon",t[t.AgilityCourse=24]="AgilityCourse",W;var t})(),kS=le(340);let qr=(()=>{class t{constructor(){}getRandomSeededInteger(e,i,r="seeded"){var a=kS(r);return Math.round(a()*(i-e)+e)}getRandomInteger(e,i){return Math.round(Math.random()*(i-e)+e)}getRandomSeededNumber(e,i,r="seeded"){return kS(r)()*(i-e)+e}getRandomNumber(e,i){return Math.random()*(i-e)+e}getRandomNumberPercent(){return 99*Math.random()+1}getNumericValueOfCircuitRank(e){var i=0;return e.length>1&&(i=26*(e.length-1)),i+(91-e.charCodeAt(e.length-1))}getCircuitRankFromNumericValue(e){for(var i="";e>26;)i+="A",e-=26;return i+String.fromCharCode(91-e)}convertDegreesToRadians(e){return e*(Math.PI/180)}shadeColor(e,i){return"#"+e.replace(/^#/,"").replace(/../g,a=>("0"+Math.min(255,Math.max(0,parseInt(a,16)+i)).toString(16)).substr(-2))}getProperNoun(e){return e.charAt(0).toUpperCase()+e.slice(1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Kg=(()=>{class t{constructor(){}initializeShop(){}initializeResource(e,i,r){return new oe(e,i,r)}initializeTraining(e){var i=new ys;return e===W.ShortTrackRunning&&(i.trainingName="Short Track Running",i.isAvailable=!0,i.facilitySize=ve.Small,i.timeToComplete=30,i.trainingType=W.ShortTrackRunning,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(1,0,0,0,0,0)),e===W.Sprints&&(i.trainingName="Sprints",i.isAvailable=!0,i.facilitySize=ve.Small,i.timeToComplete=20,i.trainingType=W.Sprints,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,1,0,0,0,0)),e===W.TrailRunning&&(i.trainingName="Trail Running",i.isAvailable=!0,i.facilitySize=ve.Small,i.timeToComplete=45,i.trainingType=W.TrailRunning,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(.5,0,1,0,0,0)),e===W.MoveLogs&&(i.trainingName="Move Logs",i.isAvailable=!1,i.facilitySize=ve.Small,i.timeToComplete=30,i.trainingType=W.MoveLogs,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,0,0,1,0,0)),e===W.Footwork&&(i.trainingName="Footwork",i.isAvailable=!1,i.facilitySize=ve.Small,i.timeToComplete=45,i.trainingType=W.Footwork,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,.5,0,0,0,1)),e===W.PracticeCommands&&(i.trainingName="Practice Commands",i.isAvailable=!1,i.facilitySize=ve.Small,i.timeToComplete=40,i.trainingType=W.PracticeCommands,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,0,0,0,1,.25)),e===W.ScentTraining&&(i.trainingName="Scent Training",i.isAvailable=!1,i.facilitySize=ve.Small,i.timeToComplete=45,i.trainingType=W.ScentTraining,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,0,.5,0,1,0)),e===W.SmallWagonTow&&(i.trainingName="Small Wagon Tow",i.isAvailable=!1,i.facilitySize=ve.Small,i.timeToComplete=45,i.trainingType=W.SmallWagonTow,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(.25,0,0,1.5,0,0)),e===W.Sidestep&&(i.trainingName="Sidestep",i.isAvailable=!1,i.facilitySize=ve.Small,i.timeToComplete=35,i.trainingType=W.Sidestep,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,2,0,0,0,0)),e===W.MediumTrackRunning&&(i.trainingName="Medium Track Running",i.isAvailable=!1,i.facilitySize=ve.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=W.MediumTrackRunning,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(2,0,1,0,0,0)),e===W.UphillRun&&(i.trainingName="Uphill Run",i.isAvailable=!1,i.facilitySize=ve.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=W.UphillRun,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,1,2,0,0,0)),e===W.Puzzles&&(i.trainingName="Puzzles",i.isAvailable=!1,i.facilitySize=ve.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=W.Puzzles,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,0,0,0,2,1)),e===W.MoveRocks&&(i.trainingName="Move Rocks",i.isAvailable=!1,i.facilitySize=ve.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=W.MoveRocks,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,1,0,2,0,0)),e===W.DodgeBall&&(i.trainingName="Dodge Ball",i.isAvailable=!1,i.facilitySize=ve.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=W.DodgeBall,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,2.5,0,0,0,.5)),e===W.LateralVerticalDrill&&(i.trainingName="Lateral Vertical Drill",i.isAvailable=!1,i.facilitySize=ve.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=W.LateralVerticalDrill,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(1.5,0,0,0,2,0)),e===W.BurstPractice&&(i.trainingName="Burst Practice",i.isAvailable=!1,i.facilitySize=ve.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=W.BurstPractice,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,0,0,1.5,1.5,1.5)),e===W.Acrobatics&&(i.trainingName="Acrobatics",i.isAvailable=!1,i.facilitySize=ve.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=W.Acrobatics,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(.5,0,.5,3,0,0)),e===W.LongTrackRunning&&(i.trainingName="Long Track Running",i.isAvailable=!1,i.facilitySize=ve.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=W.LongTrackRunning,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(5,0,0,0,2,0)),e===W.VehicleTow&&(i.trainingName="Vehicle Tow",i.isAvailable=!1,i.facilitySize=ve.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=W.VehicleTow,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,0,2,5,0,0)),e===W.LogJump&&(i.trainingName="Log Jump",i.isAvailable=!1,i.facilitySize=ve.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=W.LogJump,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(1,1,0,0,0,5)),e===W.Meditation&&(i.trainingName="Meditation",i.isAvailable=!1,i.facilitySize=ve.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=W.Meditation,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,0,0,2,5,0)),e===W.WindSprints&&(i.trainingName="Wind Sprints",i.isAvailable=!1,i.facilitySize=ve.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=W.WindSprints,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(2,5,0,0,0,0)),e===W.GreenwayHike&&(i.trainingName="Greenway Hike",i.isAvailable=!1,i.facilitySize=ve.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=W.GreenwayHike,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,0,5,0,0,2)),e===W.Marathon&&(i.trainingName="Marathon",i.isAvailable=!1,i.facilitySize=ve.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=W.Marathon,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(2,0,3,0,3,0)),e===W.AgilityCourse&&(i.trainingName="Agility Course",i.isAvailable=!1,i.facilitySize=ve.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=W.AgilityCourse,i.trainingCourseType=P.Flatland,i.statGain=1,i.affectedStatRatios=new ee(0,3,0,2,0,3)),i}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var q=(()=>{return(t=q||(q={}))[t.Animal=0]="Animal",t[t.Food=1]="Food",t[t.Training=2]="Training",t[t.Ability=3]="Ability",t[t.Specialty=4]="Specialty",t[t.Equipment=5]="Equipment",t[t.Resources=6]="Resources",t[t.Progression=7]="Progression",q;var t})(),Vt=(()=>{return(t=Vt||(Vt={}))[t.Free=0]="Free",t[t.Mono=1]="Mono",t[t.Duo=2]="Duo",t[t.Rainbow=3]="Rainbow",Vt;var t})(),Se=(()=>{return(t=Se||(Se={}))[t.none=0]="none",t[t.headband=1]="headband",t[t.redBaton=2]="redBaton",t[t.blueBaton=3]="blueBaton",t[t.violetBaton=4]="violetBaton",t[t.orangeBaton=5]="orangeBaton",t[t.greenBaton=6]="greenBaton",t[t.yellowBaton=7]="yellowBaton",t[t.quickSnack=8]="quickSnack",t[t.blinders=9]="blinders",t[t.pendant=10]="pendant",t[t.carrotOnAStick=11]="carrotOnAStick",Se;var t})();const em={name:"white",properties:{"--foreground-default":"#000000","--foreground-secondary":"#1B1B1B","--foreground-tertiary":"#262626","--foreground-quaternary":"#2F2F2F","--foreground-light":"#000000","--background-default":"#FCFCFC","--background-secondary":"#FFFFFF","--background-tertiary":"#C4C4C4","--background-quarternary":"#ACAFB4","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},tm={name:"light",properties:{"--foreground-default":"#08090A","--foreground-secondary":"#41474D","--foreground-tertiary":"#797C80","--foreground-quaternary":"#F4FAFF","--foreground-light":"#41474D","--background-default":"#F4FAFF","--background-secondary":"#A3B9CC","--background-tertiary":"#5C7D99","--background-quarternary":"#65799E","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1a83b0","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},nm={name:"twilight",properties:{"--foreground-default":"#ED8B42","--foreground-secondary":"#D65A00","--foreground-tertiary":"#FF8023","--foreground-quaternary":"#FFAA20","--foreground-light":"#FF8F3D","--background-default":"#5D0274","--background-secondary":"#210129","--background-tertiary":"#14001A","--background-quarternary":"#4F223C","--background-light":"#72028D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},Xl={name:"night",properties:{"--foreground-default":"#A3B9CC","--foreground-secondary":"#5C7D99","--foreground-tertiary":"#F4FAFF","--foreground-quaternary":"#E5E5E5","--foreground-light":"#FFFFFF","--background-default":"#797C80","--background-secondary":"#41474D","--background-tertiary":"#08090A","--background-quarternary":"##2A2C31","--background-light":"#41474D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--waterColor":"#7463f7","--waterSubcolor":"#5044ab","--tundraColor":"#1ca1c9","--background-tertiary-shadow":"0 1px 3px 0 rgba(8, 9, 10, 0.5)"}};let Ql=(()=>{class t{constructor(){this.active=Xl,this.availableThemes=[em,tm,nm,Xl]}getAvailableThemes(){return this.availableThemes}getActiveTheme(){return this.active}getActiveThemeName(){return this.active===Xl?"night":this.active===tm?"light":this.active===em?"white":this.active===nm?"twilight":""}setNightTheme(){return this.setActiveTheme(Xl)}setLightTheme(){return this.setActiveTheme(tm)}setTwilightTheme(){return this.setActiveTheme(nm)}setWhiteTheme(){return this.setActiveTheme(em)}setActiveTheme(e){return this.active=e,Object.keys(this.active.properties).forEach(i=>{document.documentElement.style.setProperty(i,this.active.properties[i])}),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var L=(()=>{return(t=L||(L={}))[t.topSpeed=0]="topSpeed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",L;var t})(),sr=(()=>{return(t=sr||(sr={}))[t.draw=0]="draw",t[t.text=1]="text",t[t.both=2]="both",sr;var t})();let Ze=(()=>{class t{constructor(e,i,r){this.utilityService=e,this.initializeService=i,this.themeService=r,this.globalVar=new Jn}initializeGlobalVariables(){this.globalVar.animals=[],this.globalVar.trainingOptions=[],this.globalVar.circuitRaces=[],this.globalVar.localRaces=[],this.globalVar.resources=[],this.globalVar.modifiers=[],this.globalVar.animalDecks=[],this.globalVar.barns=[],this.globalVar.settings=new Qg,this.globalVar.unlockables=new Jg,this.globalVar.incubator=new Yg,this.globalVar.trackedStats=new Zg,this.globalVar.userIsRacing=!1,this.globalVar.tutorialCompleted=!1,this.globalVar.currentTutorialId=1,this.globalVar.showTutorial=!1,this.globalVar.nationalRaceCountdown=0,this.globalVar.autoFreeRaceCounter=0,this.globalVar.freeRaceCounter=0,this.globalVar.freeRaceTimePeriodCounter=0,this.globalVar.lastTimeStamp=Date.now(),this.globalVar.currentVersion=1,this.globalVar.startingVersion=1,this.InitializeModifiers(),this.InitializeAnimals(),this.InitializeAnimalDecks(),this.InitializeGlobalTrainingOptions(),this.InitializeShop(),this.InitializeBarns(),this.globalVar.circuitRank="Z",this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),this.checkCircuitRankRewards(),this.globalVar.monoRank="Z",this.globalVar.duoRank="Z",this.globalVar.rainbowRank="Z",this.GenerateLocalRaces(),this.InitializeResources(),this.InitializeSettings(),this.InitializeUnlockables()}InitializeModifiers(){this.globalVar.modifiers.push(new F(.2,"staminaModifier")),this.globalVar.modifiers.push(new F(.9,"exhaustionStatLossModifier")),this.globalVar.modifiers.push(new F(5,"trainingBreedGaugeIncrease")),this.globalVar.modifiers.push(new F(10,"circuitBreedGaugeIncrease")),this.globalVar.modifiers.push(new F(1,"localBreedGaugeIncrease")),this.globalVar.modifiers.push(new F(.02,"breedLevelStatModifier")),this.globalVar.modifiers.push(new F(5,"breedGaugeMaxIncreaseModifier")),this.globalVar.modifiers.push(new F(.001,"incubatorUpgradeIncreaseModifier")),this.globalVar.modifiers.push(new F(5,"facilityLevelModifier")),this.globalVar.modifiers.push(new F(.02,"animalHandlerModifier")),this.globalVar.modifiers.push(new F(.01,"stopwatchModifier")),this.globalVar.modifiers.push(new F(.1,"racerMapsModifier")),this.globalVar.modifiers.push(new F(10,"nationalRacesToMedalModifier")),this.globalVar.modifiers.push(new F(5,"internationalRacesToMedalModifier")),this.globalVar.modifiers.push(new F(.75,"moneyMarkPaceModifier")),this.globalVar.modifiers.push(new F(1.25,"moneyMarkRewardModifier")),this.globalVar.modifiers.push(new F(.05,"breedingGroundsSpecializationModifier")),this.globalVar.modifiers.push(new F(300,"attractionTimeToCollectModifier")),this.globalVar.modifiers.push(new F(10,"attractionAmountModifier")),this.globalVar.modifiers.push(new F(.05,"researchCenterIncrementsModifier")),this.globalVar.modifiers.push(new F(.45,"researchCenterTrainingAnimalModifier")),this.globalVar.modifiers.push(new F(.25,"researchCenterStudyingAnimalModifier")),this.globalVar.modifiers.push(new F(.75,"researchCenterMaxStatGainModifier")),this.globalVar.modifiers.push(new F(3,"headbandEquipmentModifier")),this.globalVar.modifiers.push(new F(1,"quickSnackEquipmentModifier")),this.globalVar.modifiers.push(new F(.5,"blindersEquipmentModifier")),this.globalVar.modifiers.push(new F(.9,"pendantEquipmentModifier")),this.globalVar.modifiers.push(new F(1.1,"redBatonEquipmentModifier")),this.globalVar.modifiers.push(new F(1.1,"blueBatonEquipmentModifier")),this.globalVar.modifiers.push(new F(1.1,"orangeBatonEquipmentModifier")),this.globalVar.modifiers.push(new F(1.1,"greenBatonEquipmentModifier")),this.globalVar.modifiers.push(new F(1.1,"yellowBatonEquipmentModifier")),this.globalVar.modifiers.push(new F(1.1,"violetBatonEquipmentModifier")),this.globalVar.modifiers.push(new F(7200,"smallBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new F(14400,"mediumBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new F(28800,"largeBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new F(5,"freeRacesPerTimePeriodModifier")),this.globalVar.modifiers.push(new F(300,"freeRacesTimePeriodModifier")),this.globalVar.modifiers.push(new F(3600,"autoFreeRacesMaxIdleTimePeriodModifier")),this.globalVar.modifiers.push(new F(25,"abilityLevelCapModifier")),this.globalVar.modifiers.push(new F(1.5,"feedingFrenzyPositiveModifier")),this.globalVar.modifiers.push(new F(.9,"feedingFrenzyNegativeModifier")),this.globalVar.modifiers.push(new F(20,"maxDriftAmountModifier"));var e=.3,i=.1,l=1.025,c=1.05,d=.975,f=.95;this.globalVar.modifiers.push(new F(e*l,"horseDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i,"horseDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5.5,"horseDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1,"horseDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5*f,"horseDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5,"horseDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(e*c,"cheetahDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(1.1*i,"cheetahDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(4.5,"cheetahDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1,"cheetahDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5,"cheetahDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5*d,"cheetahDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5*f,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(e,"monkeyDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i*f,"monkeyDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5,"monkeyDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1.1,"monkeyDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5*c,"monkeyDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5,"monkeyDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(e,"goatDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i*l,"goatDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5*l,"goatDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1*d,"goatDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5*d,"goatDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5.5,"goatDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(e*f,"geckoDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i,"geckoDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5*c,"geckoDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1,"geckoDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5.5,"geckoDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5,"geckoDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(e*d,"dolphinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i*l,"dolphinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5,"dolphinDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1.1,"dolphinDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5,"dolphinDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5*d,"dolphinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(.33,"sharkDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i,"sharkDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5*d,"sharkDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1*l,"sharkDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5*f,"sharkDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5*f,"sharkDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(e*d,"octopusDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i*f,"octopusDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5,"octopusDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1.1,"octopusDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5*l,"octopusDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5,"octopusDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(e*f,"penguinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i,"penguinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5,"penguinDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1*l,"penguinDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5,"penguinDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5*c,"penguinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(e*d,"caribouDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i*f,"caribouDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5.5,"caribouDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1*l,"caribouDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5*c,"caribouDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5,"caribouDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(e,"salamanderDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i*l,"salamanderDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5*f,"salamanderDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1,"salamanderDefaultPowerModifier")),this.globalVar.modifiers.push(new F(5*c,"salamanderDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5,"salamanderDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new F(e*c,"foxDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new F(i,"foxDefaultAccelerationModifier")),this.globalVar.modifiers.push(new F(5*d,"foxDefaultStaminaModifier")),this.globalVar.modifiers.push(new F(1*l,"foxDefaultPowerModifier")),this.globalVar.modifiers.push(new F(4.5,"foxDefaultFocusModifier")),this.globalVar.modifiers.push(new F(5*c,"foxDefaultAdaptabilityModifier"))}InitializeAnimals(){var e=new RL;e.name="Horse",e.isAvailable=!0,this.calculateAnimalRacingStats(e);var i=new NL;i.name="Monkey",this.calculateAnimalRacingStats(i);var r=new kL;r.name="Hare",this.calculateAnimalRacingStats(r);var a=new EL;a.name="Cheetah",this.calculateAnimalRacingStats(a);var o=new IL;o.name="Goat",this.calculateAnimalRacingStats(o);var s=new PL;s.name="Gecko",this.calculateAnimalRacingStats(s);var l=new OL;l.name="Dolphin",this.calculateAnimalRacingStats(l);var c=new xL;c.name="Shark",this.calculateAnimalRacingStats(c);var u=new FL;u.name="Octopus",this.calculateAnimalRacingStats(u);var d=new VL;d.name="Penguin",this.calculateAnimalRacingStats(d);var f=new LL;f.name="Caribou",this.calculateAnimalRacingStats(f);var h=new BL;h.name="Salamander",this.calculateAnimalRacingStats(h);var v=new UL;v.name="Fox",this.calculateAnimalRacingStats(v),this.globalVar.animals.push(e),this.globalVar.animals.push(a),this.globalVar.animals.push(r),this.globalVar.animals.push(o),this.globalVar.animals.push(i),this.globalVar.animals.push(s),this.globalVar.animals.push(l),this.globalVar.animals.push(c),this.globalVar.animals.push(u),this.globalVar.animals.push(d),this.globalVar.animals.push(f),this.globalVar.animals.push(h),this.globalVar.animals.push(v)}InitializeAnimalDecks(){var e=new bd;e.isPrimaryDeck=!0,e.isAvailable=!0,e.name="Animal Deck 1",e.deckNumber=1;var i=this.globalVar.animals.find(o=>"Horse"===o.getAnimalType());void 0!==i&&e.selectedAnimals.push(i),this.globalVar.animalDecks.push(e);for(var r=0;r<3;r++){var a=new bd;a.isAvailable=!0,a.deckNumber=r+2,a.name="Animal Deck "+a.deckNumber,this.globalVar.animalDecks.push(a)}}InitializeShop(){this.globalVar.shop=[];var e=new Oa,i=[],u=new ze;u.name="Cheetah",u.shortDescription="The Cheetah is a Flatland racing animal that prioritizes quickness over stamina.",u.purchasePrice.push(new oe("Coins",1e3)),u.canHaveMultiples=!1,u.type=q.Animal,i.push(u);var d=new ze;d.name="Hare",d.shortDescription="The Hare is a Flatland racing animal with various ways to increase acceleration and focus.",d.purchasePrice.push(new oe("Coins",1e3)),d.canHaveMultiples=!1,d.type=q.Animal,i.push(d);var f=new ze;f.name="Goat",f.shortDescription="The Goat is a Mountain climbing animal that can nimbly travel terrain and increase stamina.",f.purchasePrice.push(new oe("Coins",2500)),f.canHaveMultiples=!1,f.type=q.Animal,f.isAvailable=!1,i.push(f);var h=new ze;h.name="Gecko",h.shortDescription="The Gecko is a Mountain climbing animal that can increase speed based on focus and can increase other racers' adaptability.",h.purchasePrice.push(new oe("Coins",2500)),h.canHaveMultiples=!1,h.type=q.Animal,h.isAvailable=!1,i.push(h);var v=new ze;v.name="Shark",v.shortDescription="The Shark is an Ocean swimming animal that can slow competitors and increase its own stats at the cost of your other racers.",v.purchasePrice.push(new oe("Coins",5e3)),v.canHaveMultiples=!1,v.type=q.Animal,v.isAvailable=!1,i.push(v);var b=new ze;b.name="Octopus",b.shortDescription="The Octopus is an Ocean swimming animal that can increase your coin rewards from races and increase power of other racers.",b.purchasePrice.push(new oe("Coins",5e3)),b.canHaveMultiples=!1,b.type=q.Animal,b.isAvailable=!1,i.push(b);var C=new ze;C.name="Caribou",C.shortDescription="The Caribou is a Tundra racing animal that boosts other racers based on stamina.",C.purchasePrice.push(new oe("Coins",1e4)),C.canHaveMultiples=!1,C.type=q.Animal,C.isAvailable=!1,i.push(C);var S=new ze;S.name="Fox",S.shortDescription="The Fox is a Volcanic racing animal that can increase stats at random.",S.purchasePrice.push(new oe("Coins",1e4)),S.canHaveMultiples=!1,S.type=q.Animal,S.isAvailable=!1,i.push(S),e.name="Animals",e.itemList=i,this.globalVar.shop.push(e);var _=new Oa,D=[],E=50,A=new ze;A.name="Apples",A.shortDescription="+1 Acceleration to a single animal",A.purchasePrice.push(new oe("Coins",E)),A.canHaveMultiples=!0,A.type=q.Food,A.infiniteAmount=!0,D.push(A);var y=new ze;y.name="Bananas",y.shortDescription="+1 Top Speed to a single animal",y.purchasePrice.push(new oe("Coins",E)),y.canHaveMultiples=!0,y.type=q.Food,y.infiniteAmount=!0,D.push(y);var Y=new ze;Y.name="Strawberries",Y.shortDescription="+1 Endurance to a single animal",Y.purchasePrice.push(new oe("Coins",E)),Y.canHaveMultiples=!0,Y.type=q.Food,Y.infiniteAmount=!0,D.push(Y);var G=new ze;G.name="Carrots",G.shortDescription="+1 Power to a single animal",G.purchasePrice.push(new oe("Coins",E)),G.canHaveMultiples=!0,G.type=q.Food,G.infiniteAmount=!0,D.push(G);var H=new ze;H.name="Turnips",H.shortDescription="+1 Focus to a single animal",H.purchasePrice.push(new oe("Coins",E)),H.canHaveMultiples=!0,H.type=q.Food,H.infiniteAmount=!0,D.push(H);var X=new ze;X.name="Oranges",X.shortDescription="+1 Adaptability to a single animal",X.purchasePrice.push(new oe("Coins",E)),X.canHaveMultiples=!0,X.type=q.Food,X.infiniteAmount=!0,D.push(X);var Z=new ze;Z.name="Mangoes",Z.shortDescription="+1 Breed Level to a single animal",Z.purchasePrice.push(new oe("Coins",500)),Z.canHaveMultiples=!0,Z.type=q.Food,Z.infiniteAmount=!0,D.push(Z),_.name="Food",_.itemList=D,this.globalVar.shop.push(_);var te=new Oa,Je=[];this.globalVar.trainingOptions.filter(St=>!St.isAvailable).forEach(St=>{var se=new ze;se.name=St.trainingName,se.shortDescription=St.getStatGainDescription(),se.purchasePrice.push(new oe("Coins",St.purchasePrice)),se.canHaveMultiples=!1,se.type=q.Training,(St.facilitySize===ve.Medium||St.facilitySize===ve.Large)&&(se.isAvailable=!1,se.additionalIdentifier=St.facilitySize.toString()),Je.push(se)}),te.name="Trainings",te.itemList=Je,this.globalVar.shop.push(te);var ke=new Oa,at=[];this.globalVar.animals.forEach(St=>{St.availableAbilities.forEach(se=>{if(!se.isAbilityPurchased){var me=new ze;me.name=St.getAnimalType()+" Ability: "+se.name,me.purchasePrice.push(new oe("Coins",se.purchasePrice)),me.canHaveMultiples=!1,me.type=q.Ability,me.additionalIdentifier=se.name,me.isAvailable=St.isAvailable,at.push(me)}})}),ke.name="Abilities",ke.itemList=at,this.globalVar.shop.push(ke);var _e=new Oa,he=[],it=new ze;it.name="Stopwatch",it.purchasePrice.push(this.getMedalResourceValue(10)),it.basePurchasePrice.push(this.getMedalResourceValue(10)),it.quantityMultiplier=2.5,it.totalShopQuantity=2,it.canHaveMultiples=!0,it.type=q.Specialty,he.push(it);var Ht=new ze;Ht.name="Animal Handler",Ht.purchasePrice.push(this.getCoinsResourceValue(2e3)),Ht.basePurchasePrice.push(this.getCoinsResourceValue(2e3)),Ht.quantityAdditive=2e3,Ht.totalShopQuantity=20,Ht.canHaveMultiples=!0,Ht.type=q.Specialty,he.push(Ht);var ot=new ze;ot.name="Course Maps",ot.purchasePrice.push(this.getMedalResourceValue(2)),ot.basePurchasePrice.push(this.getMedalResourceValue(2)),ot.quantityMultiplier=2,ot.totalShopQuantity=5,ot.canHaveMultiples=!0,ot.type=q.Specialty,he.push(ot);var ln=new ze;ln.name="Stockbreeder",ln.purchasePrice.push(this.getCoinsResourceValue(500)),ln.basePurchasePrice.push(this.getCoinsResourceValue(500)),ln.canHaveMultiples=!1,ln.type=q.Specialty,he.push(ln);var Ke=new ze;Ke.name="Team Manager",Ke.purchasePrice.push(this.getMedalResourceValue(3)),Ke.basePurchasePrice.push(this.getMedalResourceValue(3)),Ke.canHaveMultiples=!0,Ke.quantityMultiplier=2,Ke.totalShopQuantity=5,Ke.type=q.Specialty,he.push(Ke);var ct=new ze;ct.name="Scouts",ct.purchasePrice.push(this.getCoinsResourceValue(1e4)),ct.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),ct.canHaveMultiples=!1,ct.type=q.Specialty,he.push(ct);var vt=new ze;vt.name="Money Mark",vt.purchasePrice.push(this.getCoinsResourceValue(500)),vt.basePurchasePrice.push(this.getCoinsResourceValue(500)),vt.canHaveMultiples=!1,vt.type=q.Specialty,he.push(vt);var Lt=new ze;Lt.name="National Races",Lt.purchasePrice.push(this.getCoinsResourceValue(1e4)),Lt.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),Lt.canHaveMultiples=!1,Lt.type=q.Specialty,he.push(Lt);var wt=new ze;wt.name="International Races",wt.purchasePrice.push(this.getCoinsResourceValue(5e4)),wt.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),wt.canHaveMultiples=!1,wt.isAvailable=!1,wt.type=q.Specialty,he.push(wt);var st=new ze;st.name="Incubator Upgrade",st.purchasePrice.push(this.getCoinsResourceValue(1e4)),st.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),st.canHaveMultiples=!1,st.isAvailable=!1,st.type=q.Specialty,he.push(st),_e.name="Specialty",_e.itemList=he,this.globalVar.shop.push(_e);var ye=new Oa,ut=[],zn=new ze;zn.name=this.getEquipmentName(Se.headband),zn.shortDescription=this.getEquipmentDescription(zn.name),zn.purchasePrice.push(this.getCoinsResourceValue(1e3)),zn.canHaveMultiples=!0,zn.infiniteAmount=!0,zn.type=q.Equipment,ut.push(zn);var cn=new ze;cn.name=this.getEquipmentName(Se.pendant),cn.shortDescription=this.getEquipmentDescription(cn.name),cn.purchasePrice.push(this.getCoinsResourceValue(1e3)),cn.canHaveMultiples=!0,cn.infiniteAmount=!0,cn.type=q.Equipment,ut.push(cn);var Wn=new ze;Wn.name=this.getEquipmentName(Se.blinders),Wn.shortDescription=this.getEquipmentDescription(Wn.name),Wn.purchasePrice.push(this.getCoinsResourceValue(1e3)),Wn.canHaveMultiples=!0,Wn.infiniteAmount=!0,Wn.type=q.Equipment,ut.push(Wn);var Nn=new ze;Nn.name=this.getEquipmentName(Se.quickSnack),Nn.shortDescription=this.getEquipmentDescription(Nn.name),Nn.purchasePrice.push(this.getCoinsResourceValue(1e3)),Nn.canHaveMultiples=!0,Nn.infiniteAmount=!0,Nn.type=q.Equipment,ut.push(Nn);var qn=new ze;qn.name=this.getEquipmentName(Se.redBaton),qn.shortDescription=this.getEquipmentDescription(qn.name),qn.purchasePrice.push(this.getCoinsResourceValue(2500)),qn.canHaveMultiples=!0,qn.infiniteAmount=!0,qn.type=q.Equipment,ut.push(qn);var ui=new ze;ui.name=this.getEquipmentName(Se.blueBaton),ui.shortDescription=this.getEquipmentDescription(ui.name),ui.purchasePrice.push(this.getCoinsResourceValue(2500)),ui.canHaveMultiples=!0,ui.infiniteAmount=!0,ui.type=q.Equipment,ut.push(ui);var Sn=new ze;Sn.name=this.getEquipmentName(Se.violetBaton),Sn.shortDescription=this.getEquipmentDescription(Sn.name),Sn.purchasePrice.push(this.getCoinsResourceValue(2500)),Sn.canHaveMultiples=!0,Sn.infiniteAmount=!0,Sn.type=q.Equipment,ut.push(Sn);var tn=new ze;tn.name=this.getEquipmentName(Se.orangeBaton),tn.shortDescription=this.getEquipmentDescription(tn.name),tn.purchasePrice.push(this.getCoinsResourceValue(2500)),tn.canHaveMultiples=!0,tn.infiniteAmount=!0,tn.type=q.Equipment,ut.push(tn);var Tn=new ze;Tn.name=this.getEquipmentName(Se.greenBaton),Tn.shortDescription=this.getEquipmentDescription(Tn.name),Tn.purchasePrice.push(this.getCoinsResourceValue(2500)),Tn.canHaveMultiples=!0,Tn.infiniteAmount=!0,Tn.type=q.Equipment,ut.push(Tn);var nn=new ze;nn.name=this.getEquipmentName(Se.yellowBaton),nn.shortDescription=this.getEquipmentDescription(nn.name),nn.purchasePrice.push(this.getCoinsResourceValue(2500)),nn.canHaveMultiples=!0,nn.infiniteAmount=!0,nn.type=q.Equipment,ut.push(nn),ye.name="Equipment",ye.itemList=ut,this.globalVar.shop.push(ye)}getEquipmentName(e){return e===Se.headband?"Headband":e===Se.pendant?"Pendant":e===Se.blinders?"Blinders":e===Se.quickSnack?"Quick Snack":e===Se.carrotOnAStick?"Carrot on a Stick":e===Se.redBaton?"Red Baton":e===Se.blueBaton?"Blue Baton":e===Se.violetBaton?"Violet Baton":e===Se.yellowBaton?"Yellow Baton":e===Se.greenBaton?"Green Baton":e===Se.orangeBaton?"Orange Baton":""}getEquipmentEnum(e){return"Headband"===e?Se.headband:"Pendant"===e?Se.pendant:"Blinders"===e?Se.blinders:"Quick Snack"===e?Se.quickSnack:"Carrot on a Stick"===e?Se.carrotOnAStick:"Red Baton"===e?Se.redBaton:"Blue Baton"===e?Se.blueBaton:"Violet Baton"===e?Se.violetBaton:"Yellow Baton"===e?Se.yellowBaton:"Green Baton"===e?Se.greenBaton:"Orange Baton"===e?Se.orangeBaton:Se.none}InitializeBarns(){if(null==this.globalVar.barns||0===this.globalVar.barns.length){this.globalVar.barns=[];var i=new qg;if(i.barnNumber=1,i.isLocked=!1,i.size=ve.Small,i.purchasePrice=0,i.facilityUpgradePrice=500,i.upgradePrice=500,null!=this.globalVar.animals&&this.globalVar.animals.length>0){var r=this.globalVar.animals.find(s=>s.type===I.Horse);null!=r&&(r.associatedBarnNumber=i.barnNumber)}else console.log("Can't find horse");this.globalVar.barns.push(i);for(var a=2;a<=9;a++){var o=new qg;o.barnNumber=a,o.isLocked=!0,o.purchasePrice=500*a,o.facilityUpgradePrice=500,o.size=ve.Small,this.globalVar.barns.push(o)}}}InitializeGlobalTrainingOptions(){this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.ShortTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.Sprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.TrailRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.MoveLogs)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.Footwork)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.PracticeCommands)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.ScentTraining)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.SmallWagonTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.Sidestep)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.MediumTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.UphillRun)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.Puzzles)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.MoveRocks)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.LateralVerticalDrill)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.DodgeBall)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.BurstPractice)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.Acrobatics)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.LongTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.VehicleTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.LogJump)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.Meditation)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.WindSprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.GreenwayHike)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.Marathon)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(W.AgilityCourse))}IncreaseCircuitRank(){var i=this.globalVar.circuitRank.replace(/([A-Z])[^A-Z]*$/,function(a){var o=a.charCodeAt(0);return 65===o?String.fromCharCode(o)+"Z":String.fromCharCode(--o)});this.globalVar.circuitRank=i;var r=this.checkCircuitRankRewards();return this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),r}IncreaseLocalRaceRank(e){var i="";e===Vt.Mono&&(i=this.globalVar.monoRank),e===Vt.Duo&&(i=this.globalVar.duoRank),e===Vt.Rainbow&&(i=this.globalVar.rainbowRank);var r=i.replace(/([A-Z])[^A-Z]*$/,function(a){var o=a.charCodeAt(0);return 65===o?String.fromCharCode(o)+"Z":String.fromCharCode(--o)});e===Vt.Mono&&(this.globalVar.monoRank=r,this.GenerateMonoRaces(this.globalVar.monoRank)),e===Vt.Duo&&(this.globalVar.duoRank=r,this.GenerateDuoRaces(this.globalVar.duoRank)),e===Vt.Rainbow&&(this.globalVar.rainbowRank=r,this.GenerateRainbowRaces(this.globalVar.rainbowRank))}getRewardReceiveText(e){return this.globalVar.settings.get("useNumbersForCircuitRank")?"Reach circuit rank "+e+" to receive: \n":"Reach circuit rank "+this.utilityService.getCircuitRankFromNumericValue(e)+" to receive: \n"}checkCircuitRankRewards(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=["",""];if(1===e&&(this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(2)+"Mono Races"),2===e&&(this.globalVar.unlockables.set("monoRace",!0),i=["Mono Race","A new race type has been unlocked! Take part in a Mono Race where you run an extended race as only one course type. Progressing through this race type generates new interest in your facility, giving you a good reason to make upgrades. Gain Facility Level points that increase your diminishing returns max value."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(3)+"Monkey"),3===e){var r=this.globalVar.animals.find(D=>D.type===I.Monkey);if(null!=r&&(r.isAvailable=!0,this.unlockAnimalAbilities(r),this.unlockOtherRaceCourseTypeAnimals(r.raceCourseType),null!=(a=this.globalVar.animalDecks.find(D=>D.isPrimaryDeck)))){var o=!1;a.selectedAnimals.forEach(D=>{D.raceCourseType===(null==r?void 0:r.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(r)}i=["Monkey","The Monkey is a powerful Mountain climbing animal capable of slowing its competitors and leaping to victory."];var s=500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+s+" Coins"}else if(5===e)s=500,null==(l=this.globalVar.resources.find(E=>"Coins"===E.name))?this.globalVar.resources.push(new oe("Coins",s)):l.amount+=s,i=[s+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(7)+"Barn Specializations";else if(7===e)this.globalVar.unlockables.set("barnSpecializations",!0),i=["Barn Specializations","As your training facility grows, so should your barns. At barn level 10, choose what direction you want your barn to progress in. Each option benefits your animals in different ways, so choose carefully."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(8)+"Headband";else if(8===e)s=1,null==(l=this.globalVar.resources.find(A=>"1 Headband"===A.name))?this.globalVar.resources.push(new oe("Headband",s,q.Equipment)):l.amount+=s,i=[s+" Headband","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Dolphin";else if(10===e){var c=this.globalVar.animals.find(E=>E.type===I.Dolphin);null!=c&&(c.isAvailable=!0,this.unlockAnimalAbilities(c),this.unlockOtherRaceCourseTypeAnimals(c.raceCourseType),null!=(a=this.globalVar.animalDecks.find(A=>A.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(y=>{y.raceCourseType===(null==c?void 0:c.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(c))),i=["Dolphin","The Dolphin is a graceful Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay."],s=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(12)+s+" Stat Increasing Food"}else if(12===e)this.increaseAllFood(s=10),i=[s+" Stat Increasing Food",s+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(15)+"Attraction Specialization";else if(15===e)this.globalVar.unlockables.set("attractionSpecialization",!0),i=["Attraction Specialization",this.getSpecializationDescription("Attraction")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(16)+" 1 Pendant";else if(16===e)s=1,null==(l=this.globalVar.resources.find(A=>"Pendant"===A.name))?this.globalVar.resources.push(new oe("Pendant",s,q.Equipment)):l.amount+=s,i=[s+" Pendant","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(18)+"Barn Row 2";else if(18===e){this.globalVar.unlockables.set("barnRow2",!0),i=["Barn Row 2",""];var u=1;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+u+" Renown"}else if(20===e)u=1,null==(d=this.globalVar.resources.find(A=>"Renown"===A.name))?this.globalVar.resources.push(new oe("Renown",u)):d.amount+=u,i=[u+" Renown",""],s=50,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(22)+s+" Stat Increasing Food";else if(22===e)this.increaseAllFood(s=50),i=[s+" Stat Increasing Food",s+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(25)+"Research Center Specialization";else if(25===e)this.globalVar.unlockables.set("researchCenterSpecialization",!0),i=["Research Center Specialization",this.getSpecializationDescription("Research Center")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(27)+"Duo Races";else if(27===e){this.globalVar.unlockables.set("duoRace",!0);var f=this.globalVar.shop.find(D=>"Specialty"===D.name);if(null!=f){var h=f.itemList.find(D=>"Incubator Upgrade"===D.name);null!=h&&(h.isAvailable=!0)}i=["Duo Races","A new race type has been unlocked! Race in pairs to complete this long distance race. Success here will generate more interest for your facility, this time drawing in curious researchers. Gain Research Levels that improve incubator results."];var v=5e3;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(30)+v+" Coins"}else if(30===e){var b=5e3;null==(l=this.globalVar.resources.find(A=>"Coins"===A.name))?this.globalVar.resources.push(new oe("Coins",b)):l.amount+=b,i=[b+" Coins",""],s=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(33)+s+" Mangoes"}else if(33===e)s=20,null==(l=this.globalVar.resources.find(A=>"Mangoes"===A.name))?this.globalVar.resources.push(new oe("Mangoes",s)):l.amount+=s,i=[s+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(35)+"Penguin";else if(35===e){var C=this.globalVar.animals.find(D=>D.type===I.Penguin);null!=C&&(C.isAvailable=!0,this.unlockAnimalAbilities(C),this.unlockOtherRaceCourseTypeAnimals(C.raceCourseType),null!=(a=this.globalVar.animalDecks.find(E=>E.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(A=>{A.raceCourseType===(null==C?void 0:C.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(C))),i=["Penguin","The Penguin is a Tundra racing animal that can slide carefully or recklessly."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(38)+"5 Medals"}else if(38===e)null==(l=this.globalVar.resources.find(E=>"Medals"===E.name))?this.globalVar.resources.push(new oe("Medals",5)):l.amount+=5,i=["5 Medals",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(40)+"Barn Row 3";else if(40===e)this.globalVar.unlockables.set("barnRow3",!0),i=["Barn Row 3",""],s=250,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(43)+s+" Stat Increasing Food";else if(43===e)this.increaseAllFood(s=250),i=[s+" Stat Increasing Food",s+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(45)+"Salamander";else if(45===e){var a,_=this.globalVar.animals.find(E=>E.type===I.Salamander);null!=_&&(_.isAvailable=!0,this.unlockAnimalAbilities(_),this.unlockOtherRaceCourseTypeAnimals(_.raceCourseType),null!=(a=this.globalVar.animalDecks.find(A=>A.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(y=>{y.raceCourseType===(null==_?void 0:_.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(_))),i=["Salamander","The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration."],u=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(47)+u+" Renown"}else if(47===e)u=10,null==(d=this.globalVar.resources.find(y=>"Renown"===y.name))?this.globalVar.resources.push(new oe("Renown",u)):d.amount+=u,i=[u+" Renown",""],b=15e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(50)+b+" Coins";else if(50===e)v=15e3,null==(l=this.globalVar.resources.find(A=>"Coins"===A.name))?this.globalVar.resources.push(new oe("Coins",v)):l.amount+=v,i=[v+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(53)+"Rainbow Races";else if(53===e)this.globalVar.unlockables.set("rainbowRace",!0),i=["Rainbow Race","A new race type has been unlocked! This race requires a full team effort spanning all five course types. Your team of researchers are on hand for these races, coming up with more efficient ways to win. Gain Talent Tree Points that can be spent to improve various course types."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(55)+"Power Orb";else if(55===e)this.globalVar.resources.push(new oe("Power Orb",1,q.Equipment)),i=["Power Orb","You receive a glowing violet orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(58)+"Barn Row 4";else if(58===e)this.globalVar.unlockables.set("barnRow4",!0),i=["Barn Row 4",""],u=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+"Focus Orb";else if(60===e)this.globalVar.resources.push(new oe("Power Orb",1,q.Equipment)),i=["Focus Orb","You receive a glowing blue orb. What it does is a mystery."],s=100,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(62)+s+" Mangoes";else if(62===e){var l;s=100,null==(l=this.globalVar.resources.find(A=>"Mangoes"===A.name))?this.globalVar.resources.push(new oe("Mangoes",s)):l.amount+=s,i=[s+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(65)+"Acceleration Orb"}else if(65===e)this.globalVar.resources.push(new oe("Acceleration Orb",1,q.Equipment)),i=["Acceleration Orb","You receive a glowing orange orb. What it does is a mystery."],s=25,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(67)+s+" Renown";else if(67===e){var d;u=25,null==(d=this.globalVar.resources.find(A=>"Renown"===A.name))?this.globalVar.resources.push(new oe("Renown",u)):d.amount+=u,i=[u+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(70)+"Endurance Orb"}else 70===e?(this.globalVar.resources.push(new oe("Endurance Orb",1,q.Equipment)),i=["Endurance Orb","You receive a glowing yellow orb. What it does is a mystery."],s=500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(73)+s+" Stat Increasing Food Items"):73===e?(this.increaseAllFood(s=500),i=[s+" Stat Increasing Food",s+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(75)+"Adaptability Orb"):75===e?(this.globalVar.resources.push(new oe("Adaptability Orb",1,q.Equipment)),i=["Adaptability Orb","You receive a glowing green orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(78)+"Max Speed Orb"):78===e&&(this.globalVar.resources.push(new oe("Max Speed Orb",1,q.Equipment)),i=["Max Speed Orb","You receive a glowing red orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription="More Coming Soon!");return i}increaseAllFood(e){var i=this.globalVar.resources.find(c=>"Apples"===c.name);null==i?this.globalVar.resources.push(new oe("Apples",e,q.Food)):i.amount+=e;var r=this.globalVar.resources.find(c=>"Bananas"===c.name);null==r?this.globalVar.resources.push(new oe("Bananas",e,q.Food)):r.amount+=e;var a=this.globalVar.resources.find(c=>"Oranges"===c.name);null==a?this.globalVar.resources.push(new oe("Oranges",e,q.Food)):a.amount+=e;var o=this.globalVar.resources.find(c=>"Strawberries"===c.name);null==o?this.globalVar.resources.push(new oe("Strawberries",e,q.Food)):o.amount+=e;var s=this.globalVar.resources.find(c=>"Carrots"===c.name);null==s?this.globalVar.resources.push(new oe("Carrots",e,q.Food)):s.amount+=e;var l=this.globalVar.resources.find(c=>"Turnips"===c.name);null==l?this.globalVar.resources.push(new oe("Turnips",e,q.Food)):l.amount+=e}GenerateCircuitRacesForRank(e){this.globalVar.circuitRaces=[];var i=this.utilityService.getNumericValueOfCircuitRank(e),r=1,a=60,o=15,s=100,l=1.125,c=80*i,u=1.1,d=.9,v=3;"Z"===e?v=1:"Y"==e&&(v=2);for(var b=0;b<v;b++){var C=[],S="C"+i+b;if(i<=2){c=-17;var _=new Zt;_.courseType=P.Flatland,2===i?0===b?_.terrain=new Cs($e.Sunny):1===b&&(_.terrain=new Cs($e.Rainy)):_.terrain=new Cs($e.Sunny),_.distance=Math.round(s*l**i+c),C.push(_)}else if(i<=9){c=40*i,(D=[]).push(P.Flatland),D.push(P.Mountain);var E=this.getCourseTypeInRandomOrderSeeded(D,S+"cl1"),A=this.utilityService.getRandomSeededNumber(20,80,S+"l1d"),X=(y=this.utilityService.getRandomSeededNumber(20,80,S+"l2d"))*(G=a/(A+y));(H=A*G)<o?(H=0,X=a):X<o&&(X=0,H=a),H>0&&((Z=new Zt).courseType=E[0],Z.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,S+"l1r")*(H/a),Z.terrain=this.getRandomTerrain(Z.courseType,S+"lt1d"),C.push(Z)),X>0&&((te=new Zt).courseType=E[1],te.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,S+"l2r")*(X/a),te.terrain=this.getRandomTerrain(te.courseType,S+"lt2d"),C.push(te))}else{o=10,10===i?c=50*i:11===i&&(c=60*i);var D=[];i<=53?(D.push(P.Flatland),D.push(P.Mountain),D.push(P.Ocean)):(D.push(P.Flatland),D.push(P.Mountain),D.push(P.Ocean),D.push(P.Tundra),D.push(P.Volcanic)),E=this.getCourseTypeInRandomOrderSeeded(D,S+"courses1"),A=this.utilityService.getRandomSeededNumber(20,80,S+"l1d");var G,H,Z,te,y=this.utilityService.getRandomSeededNumber(20,80,S+"l2d"),Je=this.utilityService.getRandomSeededNumber(20,80,S+"l3d"),ke=(X=y*(G=a/(A+y+Je)),Je*G);if((H=A*G)<o?(X+=H/2,ke+=H/2,H=0):X<o?(H+=X/2,ke+=X/2,X=0):ke<o&&(H+=ke/2,X+=ke/2,ke=0),H>0&&((Z=new Zt).courseType=E[0],Z.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,S+"l1r")*(H/a),Z.terrain=this.getRandomTerrain(Z.courseType,S+"tl1d"),C.push(Z)),X>0&&((te=new Zt).courseType=E[1],te.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,S+"l2r")*(X/a),te.terrain=this.getRandomTerrain(te.courseType,S+"tl2d"),C.push(te)),ke>0){var at=new Zt;at.courseType=E[2],at.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,S+"l3r")*(ke/a),at.terrain=this.getRandomTerrain(at.courseType,S+"tl3d"),C.push(at)}}var _e=0;C.forEach(he=>{_e+=he.distance}),C.forEach(he=>{he.pathData=this.GenerateRaceLegPaths(he,_e)}),this.globalVar.circuitRaces.push(new Wr(C,e,!0,r,_e,a,this.GenerateCircuitRaceRewards(e))),r+=1}}reorganizeLegsByDeckOrder(e,i){return i.isCourseOrderActive?e.sort((r,a)=>i.courseTypeOrder.indexOf(r.courseType)-i.courseTypeOrder.indexOf(a.courseType)):e}getCourseTypeInRandomOrder(e){for(var i=[],r=e.length,a=0;a<r;a++){var o=this.utilityService.getRandomInteger(1,e.length);i.push(e[o-1]),e=e.filter(s=>s!==e[o-1])}return i}getCourseTypeInRandomOrderSeeded(e,i="seeded"){for(var r=[],a=e.length,o=0;o<a;o++){var s=this.utilityService.getRandomSeededInteger(1,e.length,i);r.push(e[s-1]),e=e.filter(l=>l!==e[s-1])}return r}getRandomTerrain(e,i){var r=[];e===P.Flatland||e===P.Mountain?(r.push($e.Sunny),r.push($e.Rainy),r.push($e.Stormy),r.push($e.Torrid),r.push($e.Snowfall)):e===P.Ocean?(r.push($e.Sunny),r.push($e.Maelstrom),r.push($e.Stormy),r.push($e.Snowfall)):e===P.Tundra?(r.push($e.Sunny),r.push($e.Hailstorm),r.push($e.Stormy),r.push($e.Snowfall)):e===P.Volcanic&&(r.push($e.Sunny),r.push($e.Ashfall),r.push($e.Stormy),r.push($e.Torrid));var a;return a=null!=i?this.utilityService.getRandomSeededInteger(1,r.length,i):this.utilityService.getRandomInteger(1,r.length),new Cs(r[a-1])}GetCircuitRankValue(e){for(var i=1;e.length>1;){var r=e.length;i+=26,(e=e.substring(1)).length>=r&&(e="")}return i+(91-e.charCodeAt(0))}GenerateCircuitRaceRewards(e){var i=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new oe("Coins",Math.round(50*1.01**i))),l.push(new oe("Renown",parseFloat((1.03*1.03**i/100).toFixed(3)))),l}GenerateLocalRaceRewards(e){var i=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(S=>"Renown"===S.name);l.push(new oe("Coins",Math.round(10*1.005**i))),l.push(new oe("Renown",parseFloat((1.01*1.03**i/100).toFixed(3))));var d=this.globalVar.resources.find(S=>"International Races"===S.name),f=this.globalVar.resources.find(S=>"National Races"===S.name);if(null!=d&&d.amount>0){var h=5,v=this.globalVar.modifiers.find(S=>"internationalRacesToMedalModifier"===S.text);null!=v&&(h=v.value),this.globalVar.nationalRaceCountdown>=h&&(l.push(new oe("Medals",1)),this.globalVar.nationalRaceCountdown=0)}else if(null!=f&&f.amount>0){var b=10,C=this.globalVar.modifiers.find(S=>"nationalRacesToMedalModifier"===S.text);null!=C&&(b=C.value),this.globalVar.nationalRaceCountdown>=b&&(l.push(new oe("Medals",1)),this.globalVar.nationalRaceCountdown=0)}return l}GenerateMonoRaceRewards(e){var i=[];i.push(new oe("Facility Level",1,q.Progression));var r=this.GetCircuitRankValue(e);this.globalVar.resources.find(d=>"Renown"===d.name);return i.push(new oe("Coins",Math.round(30*1.01**r))),i.push(new oe("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateDuoRaceRewards(e){var i=[];i.push(new oe("Research Level",1,q.Progression));var r=this.GetCircuitRankValue(e);this.globalVar.resources.find(d=>"Renown"===d.name);return i.push(new oe("Coins",Math.round(100*1.01**r))),i.push(new oe("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateRainbowRaceRewards(e){var i=[];i.push(new oe("Talent Points",1,q.Progression));var r=this.GetCircuitRankValue(e);this.globalVar.resources.find(d=>"Renown"===d.name);return i.push(new oe("Coins",Math.round(250*1.01**r))),i.push(new oe("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateLocalRaces(){this.GenerateMonoRaces(this.globalVar.monoRank),this.GenerateDuoRaces(this.globalVar.duoRank),this.GenerateRainbowRaces(this.globalVar.rainbowRank)}GenerateMonoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(C=>C.localRaceType!==Vt.Mono),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,l=100*i,d=[],f=new Zt;if(1===i)f.courseType=P.Flatland;else{var h=[];i<9?(h.push(P.Flatland),h.push(P.Mountain)):(h.push(P.Flatland),h.push(P.Mountain),h.push(P.Ocean)),null!=this.globalVar.lastMonoRaceCourseType&&i>2&&(h=h.filter(C=>C!==this.globalVar.lastMonoRaceCourseType));var v=this.getCourseTypeInRandomOrderSeeded(h,"monoseed"+e+i);f.courseType=v[0]}f.terrain=this.getRandomTerrain(f.courseType,"monoseed"+e+i),f.distance=Math.round((155*1.155**i+l)*this.utilityService.getRandomSeededNumber(.9,1.1)),d.push(f);var b=f.distance;d.forEach(C=>{C.pathData=this.GenerateRaceLegPaths(C,b)}),this.globalVar.localRaces.push(new Wr(d,e,!1,r,b,90,this.GenerateMonoRaceRewards(e),Vt.Mono)),r+=1}}GenerateDuoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(S=>S.localRaceType!==Vt.Duo),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,u=[],d=[];1==i?(d.push(P.Flatland),d.push(P.Tundra)):i<15?(d.push(P.Flatland),d.push(P.Mountain),d.push(P.Ocean)):i<20?(d.push(P.Flatland),d.push(P.Mountain),d.push(P.Ocean),d.push(P.Tundra)):(d.push(P.Flatland),d.push(P.Mountain),d.push(P.Ocean),d.push(P.Tundra),d.push(P.Volcanic));var f=this.getCourseTypeInRandomOrderSeeded(d,"duoseed"+e+i),h=this.utilityService.getRandomSeededNumber(.8,1.2),v=new Zt;v.courseType=f[0],v.distance=Math.round(6500*1.1**i*h*.5),v.terrain=this.getRandomTerrain(v.courseType,"duoseedl1"+e+i),u.push(v);var b=new Zt;b.courseType=f[1],b.distance=Math.round(6500*1.1**i*h*.5),b.terrain=this.getRandomTerrain(b.courseType,"duoseedl2"+e+i),u.push(b);var C=v.distance+b.distance;u.forEach(S=>{S.pathData=this.GenerateRaceLegPaths(S,C)}),this.globalVar.localRaces.push(new Wr(u,e,!1,r,C,80,this.GenerateDuoRaceRewards(e),Vt.Duo)),r+=1}}GenerateRainbowRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(E=>E.localRaceType!==Vt.Rainbow),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,o=1500,s=1.135,u=[],d=[];d.push(P.Flatland),d.push(P.Mountain),d.push(P.Ocean),d.push(P.Tundra),d.push(P.Volcanic);var f=this.getCourseTypeInRandomOrderSeeded(d,"rainbowseed"+e+i),h=this.utilityService.getRandomSeededNumber(.8,1.2),v=new Zt;v.courseType=f[0],v.distance=Math.round(o*s**i*h*.2),v.terrain=this.getRandomTerrain(v.courseType,"rainbowseedl1"+e+i),u.push(v);var b=new Zt;b.courseType=f[1],b.distance=Math.round(o*s**i*h*.2),b.terrain=this.getRandomTerrain(b.courseType,"rainbowseedl2"+e+i),u.push(b);var C=new Zt;C.courseType=f[2],C.distance=Math.round(o*s**i*h*.2),C.terrain=this.getRandomTerrain(C.courseType,"rainbowseedl3"+e+i),u.push(C);var S=new Zt;S.courseType=f[3],S.distance=Math.round(o*s**i*h*.2),S.terrain=this.getRandomTerrain(S.courseType,"rainbowseedl4"+e+i),u.push(S);var _=new Zt;_.courseType=f[4],_.distance=Math.round(o*s**i*h*.2),_.terrain=this.getRandomTerrain(_.courseType,"rainbowseedl5"+e+i),u.push(_);var D=v.distance+b.distance+C.distance+S.distance+_.distance;u.forEach(E=>{E.pathData=this.GenerateRaceLegPaths(E,D)}),this.globalVar.localRaces.push(new Wr(u,e,!1,r,D,120,this.GenerateRainbowRaceRewards(e),Vt.Rainbow)),r+=1}}generateFreeRace(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=60,r=15,a=90,o=1.1225,s=1.05,l=.8,d=[];if(e<=2){var f=new Zt;f.courseType=P.Flatland,f.terrain=this.getRandomTerrain(f.courseType),f.distance=Math.round(a*o**e*this.utilityService.getRandomNumber(l,s)),d.push(f)}else if(e<=10){(h=[]).push(P.Flatland),h.push(P.Mountain);var v=this.getCourseTypeInRandomOrder(h),b=this.utilityService.getRandomNumber(10,90),E=(C=this.utilityService.getRandomNumber(10,90))*(_=i/(b+C));(D=b*_)<r?(D=0,E=i):E<r&&(E=0,D=i),D>0&&((A=new Zt).courseType=v[0],A.distance=Math.round(a*o**e*this.utilityService.getRandomNumber(l,s))*(D/i),A.terrain=this.getRandomTerrain(A.courseType),d.push(A)),E>0&&((y=new Zt).courseType=v[1],y.distance=Math.round(a*o**e*this.utilityService.getRandomNumber(l,s))*(E/i),y.terrain=this.getRandomTerrain(y.courseType),d.push(y))}else{r=10;var h=[];e<35?(h.push(P.Flatland),h.push(P.Mountain),h.push(P.Ocean)):(h.push(P.Flatland),h.push(P.Mountain),h.push(P.Ocean),h.push(P.Tundra),h.push(P.Volcanic)),v=this.getCourseTypeInRandomOrder(h),b=this.utilityService.getRandomNumber(10,90);var _,D,A,y,C=this.utilityService.getRandomNumber(10,90),Y=this.utilityService.getRandomNumber(10,90),G=(E=C*(_=i/(b+C+Y)),Y*_);if((D=b*_)<r?(E+=D/2,G+=D/2,D=0):E<r?(D+=E/2,G+=E/2,E=0):G<r&&(D+=G/2,E+=G/2,G=0),D>0&&((A=new Zt).courseType=v[0],A.distance=Math.round(a*o**e*this.utilityService.getRandomNumber(l,s))*(D/i),A.terrain=this.getRandomTerrain(A.courseType),d.push(A)),E>0&&((y=new Zt).courseType=v[1],y.distance=Math.round(a*o**e*this.utilityService.getRandomNumber(l,s))*(E/i),y.terrain=this.getRandomTerrain(y.courseType),d.push(y)),G>0){var H=new Zt;H.courseType=v[2],H.distance=Math.round(a*o**e*this.utilityService.getRandomNumber(l,s))*(G/i),H.terrain=this.getRandomTerrain(H.courseType),d.push(H)}}var X=0,Z=this.globalVar.animalDecks.find(te=>te.isPrimaryDeck);return void 0!==Z&&(d=this.reorganizeLegsByDeckOrder(d,Z)),d.forEach(te=>{X+=te.distance}),d.forEach(te=>{te.pathData=this.GenerateRaceLegPaths(te,X)}),new Wr(d,this.globalVar.circuitRank,!1,1,X,i,this.GenerateLocalRaceRewards(this.globalVar.circuitRank),Vt.Free)}GenerateRaceLegPaths(e,i){for(var r=[],a=e.distance,o=i/20,s=Math.round(a/o),l=!1,c=ae.Regular,u=0;u<s;u++){var d=new yd;0!==u?u!==s-1?(d.length=a>o?o:a,(a-=d.length)<0&&(a=0),l?d.routeDesign=ae.Regular:(d.routeDesign=this.GetSpecialRoute(e.courseType,u+2<s,c),e.specialPathCount+=1,d.isSpecialPath=!0),l=d.routeDesign!==ae.Regular,d.setStumbleFields(),r.push(d),c=d.routeDesign):(d.length=a,d.routeDesign=e.courseType===P.Volcanic?ae.LastRegular:ae.Regular,d.setStumbleFields(),r.push(d),c=d.routeDesign):(d.length=o,d.routeDesign=e.courseType===P.Volcanic?ae.FirstRegular:ae.Regular,d.setStumbleFields(),r.push(d),a-=d.length,c=d.routeDesign)}return r}GetSpecialRoute(e,i,r){var a=ae.Regular,s=this.utilityService.getRandomInteger(1,3);return 1===s||(2===s?e===P.Flatland?a=ae.S:e===P.Mountain?a=ae.Crevasse:e===P.Ocean?a=ae.Waves:e===P.Tundra?a=ae.Cavern:e===P.Volcanic&&(a=ae.Regular):3===s&&(e===P.Flatland?a=ae.Bumps:e===P.Mountain?a=ae.Gaps:e===P.Ocean?a=ae.Dive:e===P.Tundra?a=ae.Hills:e===P.Volcanic&&(a=ae.SteppingStones))),a}calculateAnimalRacingStats(e){var i=e.currentStats.defaultMaxSpeedModifier,r=e.currentStats.defaultAccelerationModifier,a=e.currentStats.defaultStaminaModifier,o=e.currentStats.defaultPowerModifier,s=e.currentStats.defaultFocusModifier,l=e.currentStats.defaultAdaptabilityModifier,c=.02,u=e.getAnimalType().toLowerCase(),d=this.globalVar.modifiers.find(H=>H.text===u+"DefaultMaxSpeedModifier"),f=this.globalVar.modifiers.find(H=>H.text===u+"DefaultAccelerationModifier"),h=this.globalVar.modifiers.find(H=>H.text===u+"DefaultStaminaModifier"),v=this.globalVar.modifiers.find(H=>H.text===u+"DefaultPowerModifier"),b=this.globalVar.modifiers.find(H=>H.text===u+"DefaultFocusModifier"),C=this.globalVar.modifiers.find(H=>H.text===u+"DefaultAdaptabilityModifier");null!=d&&(i=d.value),null!=f&&(r=f.value),null!=h&&(a=h.value),null!=v&&(o=v.value),null!=b&&(s=b.value),null!=C&&(l=C.value);var S=this.getTraitModifier(e,L.topSpeed),_=this.getTraitModifier(e,L.acceleration),D=this.getTraitModifier(e,L.endurance),E=this.getTraitModifier(e,L.power),A=this.getTraitModifier(e,L.focus),y=this.getTraitModifier(e,L.adaptability),Y=this.globalVar.modifiers.find(H=>"breedLevelStatModifier"===H.text);null!=Y&&(c=Y.value),c=1+c*(e.breedLevel-1);var G=this.GetAnimalDiminishingReturns(e);e.currentStats.maxSpeedMs=e.currentStats.calculateMaxSpeed(i*c*S*e.incubatorStatUpgrades.maxSpeedModifier,G),e.currentStats.accelerationMs=e.currentStats.calculateTrueAcceleration(r*c*_*e.incubatorStatUpgrades.accelerationModifier,G),e.currentStats.stamina=e.currentStats.calculateStamina(a*c*D*e.incubatorStatUpgrades.staminaModifier,G),e.currentStats.powerMs=e.currentStats.calculateTruePower(o*c*E*e.incubatorStatUpgrades.powerModifier,G),e.currentStats.focusMs=e.currentStats.calculateTrueFocus(s*c*A*e.incubatorStatUpgrades.focusModifier,G),e.currentStats.adaptabilityMs=e.currentStats.calculateTrueAdaptability(l*c*y*e.incubatorStatUpgrades.adaptabilityModifier,G),e.currentStats.burstChance=e.currentStats.calculateBurstChance(),e.currentStats.burstDistance=e.currentStats.calculateBurstDistance()}getTraitModifier(e,i){var r=1;return null!=e.trait&&(e.trait.positiveStatGain===i&&(r+=e.trait.researchLevel/100),e.trait.negativeStatGain===i&&(r-=e.trait.researchLevel/100)),r}GetAnimalDiminishingReturns(e){var i=e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalVar.modifiers.find(o=>"facilityLevelModifier"===o.text),a=this.globalVar.resources.find(o=>"Facility Level"===o.name);return void 0!==r&&void 0!==a&&(i+=a.amount*r.value),i}IncreaseAnimalBreedGauge(e,i){e.breedGaugeXp+=i,e.breedGaugeXp>=e.breedGaugeMax&&(e.breedGaugeXp=e.breedGaugeMax,e.autoBreedActive&&this.BreedAnimal(e))}BreedAnimal(e){if(!(e.breedGaugeXp<e.breedGaugeMax)){var i=5,r=this.globalVar.modifiers.find(_=>"breedGaugeMaxIncreaseModifier"===_.text);if(null!=r&&(i=r.value),e.breedLevel+=1,e.breedGaugeXp=0,e.breedGaugeMax+=i,null!=this.globalVar.resources.find(_=>"Incubator Upgrade"===_.name)&&null!=e.trait){var o=.001,s=this.globalVar.modifiers.find(_=>"incubatorUpgradeIncreaseModifier"===_.text);null!=s&&(o=s.value),e.trait.positiveStatGain===L.topSpeed&&(e.incubatorStatUpgrades.maxSpeedModifier+=e.trait.researchLevel*o)}var c=this.globalVar.resources.find(_=>"Animal Handler"===_.name),u=this.globalVar.modifiers.find(_=>"animalHandlerModifier"===_.text);if(null!=c&&void 0!==u&&null!=u&&c.amount>0){var d=c.amount*u.value,f=Math.round((e.currentStats.topSpeed-e.baseStats.topSpeed)*d),h=Math.round((e.currentStats.acceleration-e.baseStats.acceleration)*d),v=Math.round((e.currentStats.endurance-e.baseStats.endurance)*d),b=Math.round((e.currentStats.power-e.baseStats.power)*d),C=Math.round((e.currentStats.focus-e.baseStats.focus)*d),S=Math.round((e.currentStats.adaptability-e.baseStats.adaptability)*d);e.currentStats=new ee(e.baseStats.topSpeed+f,e.baseStats.acceleration+h,e.baseStats.endurance+v,e.baseStats.power+b,e.baseStats.focus+C,e.baseStats.adaptability+S)}else e.currentStats=new ee(e.baseStats.topSpeed,e.baseStats.acceleration,e.baseStats.endurance,e.baseStats.power,e.baseStats.focus,e.baseStats.adaptability);this.calculateAnimalRacingStats(e),this.globalVar.trackedStats.totalBreeds+=1}}increaseAbilityXp(e,i){var r=25,a=this.globalVar.modifiers.find(s=>"abilityLevelCapModifier"===s.text);if(null!=a&&(r=a.value),!(e.ability.abilityLevel>e.breedLevel+r)){var o=1;null!=i&&i>1&&(o=i),e.ability.abilityXp+=o,e.ability.abilityXp>=e.ability.abilityMaxXp&&(e.ability.abilityXp=0,e.ability.abilityLevel+=1,e.ability.abilityLevel%10==0&&(e.ability.abilityMaxXp+=5))}}InitializeResources(){this.globalVar.resources.push(this.initializeService.initializeResource("Coins",500,q.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Renown",1,q.Progression))}InitializeSettings(){this.globalVar.settings.set("theme",this.themeService.getActiveTheme()),this.globalVar.settings.set("skipDrawRace",!1),this.globalVar.settings.set("finishTrainingBeforeSwitching",!0),this.globalVar.settings.set("hideTips",!1),this.globalVar.settings.set("useNumbersForCircuitRank",!1),this.globalVar.settings.set("raceDisplayInfo",sr.both)}InitializeUnlockables(){this.globalVar.unlockables.set("monoRace",!1),this.globalVar.unlockables.set("duoRace",!1),this.globalVar.unlockables.set("rainbowRace",!1),this.globalVar.unlockables.set("barnRow2",!1),this.globalVar.unlockables.set("barnRow3",!1),this.globalVar.unlockables.set("barnSpecializations",!1),this.globalVar.unlockables.set("attractionSpecialization",!1),this.globalVar.unlockables.set("researchCenterSpecialization",!1)}getCoinsResourceValue(e){return new oe("Coins",e)}getMedalResourceValue(e){return new oe("Medals",e)}unlockAnimalAbilities(e){var i=this.globalVar.shop.find(a=>"Abilities"===a.name);if(null!=i){var r=i.itemList.filter(a=>a.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}unlockOtherRaceCourseTypeAnimals(e){var i=this.globalVar.shop.find(a=>"Animals"===a.name);if(null!=i){var r=[];i.itemList.forEach(a=>{var o=this.globalVar.animals.find(s=>s.getAnimalType()===a.name);null!=o&&o.raceCourseType===e&&r.push(a)}),null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}getEquipmentDescription(e){var i="";return"Headband"===e&&(i="The first three stumbles you would have are ignored"),"Pendant"===e&&(i="Reduce your ability cooldown by 10%"),"Blinders"===e&&(i="Negative terrain effects are cut in half"),"Quick Snack"===e&&(i="Gain 100% of Stamina back after running out"),"Red Baton"===e&&(i="Increase next racer's Top Speed by 10% on Relay"),"Blue Baton"===e&&(i="Increase next racer's Focus by 10% on Relay"),"Violet Baton"===e&&(i="Increase next racer's Power by 10% on Relay"),"Green Baton"===e&&(i="Increase next racer's Adaptability by 10% on Relay"),"Orange Baton"===e&&(i="Increase next racer's Acceleration by 10% on Relay"),"Yellow Baton"===e&&(i="Increase next racer's Endurance by 10% on Relay"),i}getItemDescription(e){return"Apples"===e?"+1 Acceleration to a single animal":"Bananas"===e?"+1 Top Speed to a single animal":"Strawberries"===e?"+1 Endurance to a single animal":"Carrots"===e?"+1 Power to a single animal":"Turnips"===e?"+1 Focus to a single animal":"Oranges"===e?"+1 Adaptability to a single animal":"Mangoes"===e?"+1 Breed Level to a single animal":""}getSpecializationDescription(e){var i="";return"Breeding Grounds"===e?i="Turn your barn into a habitat based around the optimal breeding environment for your animals. As you progress, your animals will gain more breeding XP from their training.":"Training Facility"===e?i="Pull out all the stops giving your animals the best environment to improve. As you progress, your animals will train faster and gain stats from training at a higher rate.":"Attraction"===e?i="Give the people what they want and turn your barn into a tourist attraction. As you progress, your barn will provide passive income at a steady rate while training.":"Research Center"===e&&(i="Bring in the top names in animal research to optimize your training process. As you progress, your animal will gain reduced stats from training but split its improvements with other animals."),i}devModeInitialize(e){var i=this.globalVar.resources.find(E=>"Coins"===E.name);if(void 0!==i&&(i.amount=1e4),this.globalVar.resources.some(E=>"Medals"===E.name)){var r=this.globalVar.resources.find(E=>"Medals"===E.name);void 0!==r&&(r.amount+=e)}else this.globalVar.resources.push(this.initializeService.initializeResource("Medals",e,q.Resources));if(this.globalVar.resources.some(E=>"Renown"===E.name)){var a=this.globalVar.resources.find(E=>"Renown"===E.name);void 0!==a&&(a.amount+=200)}else this.globalVar.resources.push(this.initializeService.initializeResource("Renown",200,q.Resources));this.globalVar.resources.push(this.initializeService.initializeResource("Facility Level",e,q.Progression));for(var o=1;o<=e;o++){var s=this.utilityService.getCircuitRankFromNumericValue(o);this.globalVar.circuitRank=s,this.checkCircuitRankRewards(),this.GenerateCircuitRacesForRank(this.globalVar.circuitRank)}var l=this.globalVar.animals.find(E=>E.type===I.Horse);void 0!==l&&(l.currentStats.topSpeed=200,l.currentStats.acceleration=200,l.currentStats.endurance=200,l.currentStats.power=200,l.currentStats.focus=200,l.currentStats.adaptability=200,l.breedLevel=70,this.calculateAnimalRacingStats(l));var c=this.globalVar.animals.find(E=>E.type===I.Cheetah);void 0!==c&&(c.currentStats.topSpeed=200,c.currentStats.acceleration=200,c.currentStats.endurance=200,c.currentStats.power=200,c.currentStats.focus=200,c.currentStats.adaptability=200,c.breedLevel=70,this.calculateAnimalRacingStats(c));var u=this.globalVar.animals.find(E=>E.type===I.Hare);void 0!==u&&(u.currentStats.topSpeed=200,u.currentStats.acceleration=200,u.currentStats.endurance=200,u.currentStats.power=200,u.currentStats.focus=200,u.currentStats.adaptability=200,u.breedLevel=70,this.calculateAnimalRacingStats(u));var d=this.globalVar.animals.find(E=>E.type===I.Monkey);void 0!==d&&(d.currentStats.topSpeed=200,d.currentStats.acceleration=200,d.currentStats.endurance=2e4,d.currentStats.power=200,d.currentStats.focus=200,d.currentStats.adaptability=200,d.breedLevel=60,this.calculateAnimalRacingStats(d));var f=this.globalVar.animals.find(E=>E.type===I.Goat);void 0!==f&&(f.currentStats.topSpeed=200,f.currentStats.acceleration=200,f.currentStats.endurance=200,f.currentStats.power=200,f.currentStats.focus=200,f.currentStats.adaptability=200,f.breedLevel=70,this.calculateAnimalRacingStats(f));var h=this.globalVar.animals.find(E=>E.type===I.Gecko);void 0!==h&&(h.currentStats.topSpeed=200,h.currentStats.acceleration=200,h.currentStats.endurance=200,h.currentStats.power=200,h.currentStats.focus=200,h.currentStats.adaptability=200,h.breedLevel=70,this.calculateAnimalRacingStats(h));var v=this.globalVar.animals.find(E=>E.type===I.Dolphin);void 0!==v&&(v.currentStats.topSpeed=200,v.currentStats.acceleration=200,v.currentStats.endurance=200,v.currentStats.power=200,v.currentStats.focus=200,v.currentStats.adaptability=200,v.breedLevel=60,this.calculateAnimalRacingStats(v));var b=this.globalVar.animals.find(E=>E.type===I.Octopus);void 0!==b&&(b.currentStats.topSpeed=200,b.currentStats.acceleration=200,b.currentStats.endurance=200,b.currentStats.power=200,b.currentStats.focus=200,b.currentStats.adaptability=200,b.breedLevel=70,this.calculateAnimalRacingStats(b));var C=this.globalVar.animals.find(E=>E.type===I.Penguin);void 0!==C&&(C.currentStats.topSpeed=200,C.currentStats.acceleration=200,C.currentStats.endurance=200,C.currentStats.power=200,C.currentStats.focus=200,C.currentStats.adaptability=200,C.breedLevel=200,this.calculateAnimalRacingStats(C));var S=this.globalVar.animals.find(E=>E.type===I.Caribou);void 0!==S&&(S.currentStats.topSpeed=200,S.currentStats.acceleration=200,S.currentStats.endurance=200,S.currentStats.power=200,S.currentStats.focus=200,S.currentStats.adaptability=200,S.breedLevel=200,this.calculateAnimalRacingStats(S));var _=this.globalVar.animals.find(E=>E.type===I.Salamander);void 0!==_&&(_.currentStats.topSpeed=200,_.currentStats.acceleration=200,_.currentStats.endurance=200,_.currentStats.power=200,_.currentStats.focus=200,_.currentStats.adaptability=200,_.breedLevel=200,this.calculateAnimalRacingStats(_));var D=this.globalVar.animals.find(E=>E.type===I.Fox);void 0!==D&&(D.currentStats.topSpeed=200,D.currentStats.acceleration=200,D.currentStats.endurance=200,D.currentStats.power=200,D.currentStats.focus=200,D.currentStats.adaptability=200,D.breedLevel=200,this.calculateAnimalRacingStats(D))}}return t.\u0275fac=function(e){return new(e||t)(Q(qr),Q(Kg),Q(Ql))},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var gt=(()=>{return(t=gt||(gt={})).None="None",t.BreedingGrounds="Breeding Grounds",t.TrainingFacility="Training Facility",t.Attraction="Attraction",t.ResearchCenter="Research Center",gt;var t})();let Cn=(()=>{class t{constructor(e,i){this.globalService=e,this.utilityService=i}recalculateAllAnimalStats(){this.globalService.globalVar.animals.forEach(e=>{this.globalService.calculateAnimalRacingStats(e)})}getAnimalsFromAnimalDeck(e){var i=[];return null==e||void 0===e.selectedAnimals||0===e.selectedAnimals.length||e.selectedAnimals.forEach(r=>{var a=this.globalService.globalVar.animals.find(o=>o.type===r.type);void 0!==a&&i.push(a)}),i}getPrimaryDeck(){return this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck)}getResourceByName(e){var i=this.globalService.globalVar.resources.find(r=>r.name===e);return void 0!==i?i.amount:0}spendResourceByName(e,i){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount-=i)}gainResourceByName(e,i){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount+=i)}getFacilityLevel(){var e=this.globalService.globalVar.resources.find(i=>"Facility Level"===i.name);return void 0!==e?e.amount:0}getResearchLevel(){var e=this.globalService.globalVar.resources.find(i=>"Research Level"===i.name);return void 0!==e?e.amount:0}getCoins(){var e=this.globalService.globalVar.resources.find(i=>"Coins"===i.name);return void 0!==e?e.amount:0}spendCoins(e){var i=this.globalService.globalVar.resources.find(r=>"Coins"===r.name);void 0!==i&&(i.amount-=e)}getMedals(){var e=this.globalService.globalVar.resources.find(i=>"Medals"===i.name);return void 0!==e?e.amount:0}spendMedals(e){var i=this.globalService.globalVar.resources.find(r=>"Medals"===r.name);void 0!==i&&(i.amount-=e)}getRenown(){var e=this.globalService.globalVar.resources.find(i=>"Renown"===i.name);return void 0!==e?e.amount:0}getStockbreeder(){var e=this.globalService.globalVar.resources.find(i=>"Stockbreeder"===i.name);return void 0!==e?e.amount:0}getAnimalByType(e){var i=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==i?i:null}getMaxSpeedModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===I[e].toLowerCase()+"DefaultMaxSpeedModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(o,L.topSpeed)*o.incubatorStatUpgrades.maxSpeedModifier}return i}getAccelerationModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===I[e].toLowerCase()+"DefaultAccelerationModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(o,L.acceleration)*o.incubatorStatUpgrades.accelerationModifier}return i}getStaminaModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===I[e].toLowerCase()+"DefaultStaminaModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(o,L.endurance)*o.incubatorStatUpgrades.staminaModifier}return i}getPowerModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===I[e].toLowerCase()+"DefaultPowerModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(o,L.power)*o.incubatorStatUpgrades.powerModifier}return i}getFocusModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===I[e].toLowerCase()+"DefaultFocusModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(o,L.focus)*o.incubatorStatUpgrades.focusModifier}return i}getAdaptabilityModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===I[e].toLowerCase()+"DefaultAdaptabilityModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(o,L.adaptability)*o.incubatorStatUpgrades.adaptabilityModifier}return i}getTrainingBreedGaugeIncrease(e){var i=0,r=this.globalService.globalVar.modifiers.find(o=>"trainingBreedGaugeIncrease"===o.text);if(null!=r&&(i=r.value),e>0){var a=this.globalService.globalVar.modifiers.find(o=>"breedingGroundsSpecializationModifier"===o.text);null!=a&&(i*=1+e*a.value)}return i}getCircuitBreedGaugeIncrease(){var e=this.globalService.globalVar.modifiers.find(i=>"circuitBreedGaugeIncrease"===i.text);return null!=e?e.value:0}getLocalBreedGaugeIncrease(){var e=this.globalService.globalVar.modifiers.find(i=>"localBreedGaugeIncrease"===i.text);return null!=e?e.value:0}getDiminishingReturnsThreshold(e){var i=null==e?20:e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalService.globalVar.modifiers.find(a=>"facilityLevelModifier"===a.text);return void 0!==r&&(i+=this.getFacilityLevel()*r.value),i}getBreedLevelPopover(e){var i=.2,r=this.globalService.globalVar.modifiers.find(a=>"breedLevelStatModifier"===a.text);return null!=r&&(i=r.value),"Increase racing stat gain from base stats by "+(i*(e-1)*100).toFixed(0)+"%"}getResourcePopover(e,i){return"Coins"===e?"Good ol classic Coins. Gain from most actions and buy most things with this.":"Medals"===e?"Rare currency gained from improving your circuit rank and winning certain special races.":"Renown"===e?"Increases Coins gained from races by "+this.getRenown()+"%. Increase total number of local races available per reset period by 1 for every 100 renown for a total of "+this.getTotalFreeRacesPerPeriod()+". Complete circuit or local races to get your name out there and raise your renown.":"Facility Level"===e?"Increase Diminishing Returns value by 5 for each level for a total of "+this.getDiminishingReturnsThreshold()+". You can increase a base stat up to your Diminishing Returns value before that base stat starts to increase your racing stats less and less.":"Research Level"===e?"Increase incubator trait values by "+this.getResourceByName(e)+"% and unlock new available traits.":"Apples"===e||"Bananas"===e||"Oranges"===e||"Strawberries"===e||"Turnips"===e||"Carrots"===e||"Mangoes"===e?this.globalService.getItemDescription(e):i===q.Specialty?this.getSpecialtyItemDescription(e):i===q.Equipment?this.globalService.getEquipmentDescription(e):""}getAllRaceCourseTypes(){var e=[];for(let i in P)isNaN(Number(i))&&e.push(i);return e}getAllBarnSpecializations(){var e=[];return e.push("Breeding Grounds"),e.push("Training Facility"),this.isItemUnlocked("attractionSpecialization")&&e.push("Attraction"),this.isItemUnlocked("researchCenterSpecialization")&&e.push("Research Center"),e}isItemUnlocked(e){var i=!1,r=this.globalService.globalVar.unlockables.get(e);return null!=r&&(i=r),i}getAnimalsByRaceCourseType(e){var i=[];return"Flatland"===e?(i.push(I[I.Horse]),i.push(I[I.Cheetah]),i.push(I[I.Hare])):"Mountain"===e?(i.push(I[I.Monkey]),i.push(I[I.Goat]),i.push(I[I.Gecko])):"Ocean"===e?(i.push(I[I.Dolphin]),i.push(I[I.Shark]),i.push(I[I.Octopus])):"Tundra"===e?(i.push(I[I.Penguin]),i.push(I[I.Caribou])):"Volcanic"===e&&(i.push(I[I.Salamander]),i.push(I[I.Fox])),i}GetAbilityEffectiveAmount(e,i,r,a){if(null==e.ability||null==e.ability.name)return-1;null==i&&(i=1),null==r&&(r=1);var o=1;e.type===I.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(o*=.8),e.type===I.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(o*=1.4);var s=e.ability;return null!=a&&(s=a),(s.efficiency+s.efficiency*(.01*(s.abilityLevel-1)))*(1+e.currentStats.powerMs*o*i*r/100)}getAnimalAbilityDescription(e,i,r){if(e){if("Second Wind"===i)return"Stamina does not go down for a short period";if("Inspiration"===i)return"Increase next racer's max speed on relay";if("Pacemaker"===i)return"Increase acceleration for a short period";if("Sprint"===i)return"Increase max speed, acceleration, stamina cost for a short period";if("Giving Chase"===i)return"Increase acceleration the further behind you are";if("On The Hunt"===i)return"Gain max speed after each burst";if("Awareness"===i)return"Increase adaptability, focus for a short period";if("Prey Instinct"===i)return"Start in extended burst mode";if("Nap"===i)return"Delay leg start, increase max speed and focus";if("Landslide"===i)return"Delay competitors";if("Frenzy"===i)return"Increase burst distance, cannot stumble or lose focus during burst";if("Leap"===i)return"Jump to the finish line";if("Echolocation"===i)return"Increase adaptability, ignore negative terrain effects for a short period";if("Navigator"===i)return"Increase previous and next racer's adaptability";if("Flowing Current"===i)return"Increase next racer's acceleration on relay";if("Apex Predator"===i)return"Slow competitors if they pass you";if("Feeding Frenzy"===i)return"Slow next and previous racers, increase max speed and acceleration for a distance";if("Blood In The Water"===i)return"Increase max speed when ahead of competitors";if("Propulsion"===i)return"Dash a short distance";if("Buried Treasure"===i)return"Delay your start, increase coin gain for winning race";if("Big Brain"===i)return"Increase power of other racers after bursting a certain number of times";if("Sure-footed"===i)return"Increase adaptability after not stumbling through path";if("Deep Breathing"===i)return"Regain stamina after burst, increase other racers' stamina";if("In The Rhythm"===i)return"Increase burst speed bonus";if("Sticky"===i)return"Cannot stumble for a short period";if("Night Vision"===i)return"Increase max speed by keeping focused";if("Camouflage"===i)return"Transfer velocity to next racer on relay";if("Herd Mentality"===i)return"Grant next racer portion of your stamina, they start in burst mode";if("Great Migration"===i)return"Sacrifice stamina for acceleration for a short period";if("Special Delivery"===i)return"Increase other racers' burst max speed bonus based on stamina";if("Careful Toboggan"===i)return"Increase adaptability for a short period";if("Wild Toboggan"===i)return"Increase max drift penalty, acceleration based on drift";if("Quick Toboggan"===i)return"Increase max speed if you do not drift";if("Cold Blooded"===i)return"Increase stamina and focus for a short period based on distance in leg";if("Burrow"===i)return"Avoid lava fall, prevent stumbles for a short period";if("Heat Up"===i)return"Increase acceleration for a short period, gets stronger every use";if("Trickster"===i)return"Decrease one random stat, increase a different random stat for a short period";if("Fleeting Speed"===i)return"Increase max speed greatly, lose over time";if("Nine Tails"===i)return"Increase random stat for a short period, effect can stack"}else{var a="",o=void 0;if(null==r&&this.globalService.globalVar.animals.forEach(l=>{l.availableAbilities.forEach(c=>{c.name===i&&(r=l,o=c,null!=c.cooldown&&(a=c.cooldown.toString()))})}),null!=r){var s=this.GetAbilityEffectiveAmount(r,void 0,void 0,o).toFixed(2);if(""===a&&null!=r.ability.cooldown&&(a=r.ability.cooldown.toString()),"Second Wind"===i)return"Stamina does not go down for "+s+" meters. "+a+" second cooldown.";if("Inspiration"===i)return"When the next racer starts, they gain 25% of your Max Speed for "+s+" meters. Passive.";if("Pacemaker"===i)return"Increase acceleration by 25% for "+s+" meters. "+a+" second cooldown.";if("Sprint"===i)return" Gain 25% Max Speed and 10% Acceleration for "+s+" meters, but lose twice as much stamina as normal. "+a+" second cooldown.";if("Giving Chase"===i)return"Acceleration increases by "+s+"% for every second behind the average pace per second. Passive.";if("On The Hunt"===i)return"Every time you Burst, increase your max speed by "+s+"%. Passive.";if("Awareness"===i)return"Boosts focus and adaptability by 25% for "+s+" meters. "+a+" second cooldown.";if("Prey Instinct"===i)return"Starts its leg in burst mode that continues for an additional "+s+" meters. Passive.";if("Nap"===i)return"Sleep until the competition has traveled a distance equal to "+s+" meters from the end of your leg. Acceleration and focus are then doubled. Passive.";if("Landslide"===i)return"Drop rocks on competitors, delaying them "+s+" meters. "+a+" second cooldown.";if("Frenzy"===i)return"Increase burst distance by "+s+" meters. You do not stumble or lose focus while bursting. Passive.";if("Leap"===i)return"When you are "+s+" meters from the finish line, leap straight to the end over .5 seconds. Passive.";if("Sure-footed"===i)return"When you make it through a special path without stumbling, increase your adaptability by "+s+"%. Passive.";if("Deep Breathing"===i)return"Every time you burst, regain "+s+"% of your stamina, up to 100%. If this amount exceeds 100% of your stamina, increase all other racers' stamina by the amount exceeded. Passive.";if("In The Rhythm"===i)return"Increase your max speed bonus while bursting by "+s+"%. Passive.";if("Sticky"===i)return"Cannot stumble for "+s+" meters. "+a+" second cooldown.";if("Night Vision"===i)return"Increase Max Speed by "+s+"% for every path you complete without losing focus. If you lose focus, reset this bonus back to 0%. Passive.";if("Camouflage"===i)return"The speed you finish your leg at is given to your following racer on Relay. Decrease this amount to 0 evenly over "+s+" meters. The following racer can break their max speed by up to 50% while this is active. Passive.";if("Echolocation"===i)return"Increase your adaptability by 50% for "+s+" meters and ignore any negative effects from the terrain. "+a+" second cooldown.";if("Navigator"===i)return"Assist the previous racer and next racer, boosting their adaptability by 25% of your max for the last and first "+s+" meters of their legs respectively. Passive.";if("Flowing Current"===i)return"When relaying, increase the acceleration of your next racer by 25% of your acceleration for "+s+" meters. Passive.";if("Apex Predator"===i)return"If the competitors moving at the average pace pass the shark during its leg, immediately bite them, slowing their pace by 50% for "+s+" meters. Can only occur once. Passive.";if("Feeding Frenzy"===i)return"Increase Max Speed and Acceleration by 50% for the first and last "+s+" meters of your leg. Your next and previous racers have a 10% Max Speed reduction. Passive.";if("Blood In The Water"===i)return"While you are ahead of the average pace, increase max speed by "+s+"%. Passive.";if("Propulsion"===i)return"Dash "+s+" meters over .25 seconds. "+a+" second cooldown.";if("Buried Treasure"===i)return"Delay your start by 8 seconds. If you still win the race, increase your Coin reward by "+s+"%. Passive.";if("Big Brain"===i)return"After Bursting through one third of your race paths, increase Power of all remaining racers by "+s+"%. Passive.";if("Herd Mentality"===i)return"After completing your leg, "+s+"% of your remaining stamina is given to the next racer and they start their leg in burst mode. This does not occur if you run out of stamina during your leg. Passive.";if("Great Migration"===i)return"Reduce stamina by 10%. For "+s+" meters, acceleration is increased by 25% of the amount of stamina lost. "+a+" second cooldown.";if("Special Delivery"===i)return"Increase all remaining racers\u2019 burst max speed bonus by "+s+"% of your remaining stamina percentage after completing your leg. This does not occur if you run out of stamina during your leg. Passive.";if("Careful Toboggan"===i)return"Increase adaptability by 40% for "+s+" meters. "+a+" second cooldown.";if("Wild Toboggan"===i)return"Double the maximum amount of drift per path. Increase acceleration by up to "+s+"% based on how much you drift. Passive.";if("Quick Toboggan"===i)return"Every time you make it through a path without drifting, gain "+s+"% max speed. Passive.";if("Cold Blooded"===i)return"Increase stamina and focus by 0-50% depending on how close to the center of the volcano you are. Focus boost lasts "+s+"%. "+a+" second cooldown.";if("Burrow"===i)return"Go underground for "+s+" meters, dodging lava fall and preventing stumbles. "+a+" second cooldown.";if("Heat Up"===i)return"Increase Acceleration by 15% for "+s+" meters. This increase doubles every subsequent use this race. "+a+" second cooldown.";if("Trickster"===i)return"When active, sacrifice 20% of one random stat for 40% of another random stat. Lasts "+s+" meters. "+a+" second cooldown.";if("Fleeting Speed"===i)return"Increase Max Speed by "+s+"%. Decrease this bonus by 2% for every percent of the leg you complete. Passive.";if("Nine Tails"===i)return"At the start of each path, increase either Acceleration, Max Speed, Focus, or Adaptability by 10% for "+s+" meters. This effect can stack. Passive."}}return""}getResourcesForBarnUpgrade(e){var i=[],r=new oe("Coins",100);if(r.amount*=e+1,i.push(r),e%10==9){var a=new oe("Medals",1);i.push(a)}return i}getBarnName(e){var i="",r=e.getSize();return(e.barnUpgrades.specialization===gt.None||null==e.barnUpgrades.specialization)&&(i=r+" Barn "+e.barnNumber),e.barnUpgrades.specialization===gt.Attraction&&(i=r+" Attraction "+e.barnNumber),e.barnUpgrades.specialization===gt.BreedingGrounds&&(i=r+" Breeding Grounds "+e.barnNumber),e.barnUpgrades.specialization===gt.TrainingFacility&&(i=r+" Training Facility "+e.barnNumber),e.barnUpgrades.specialization===gt.ResearchCenter&&(i=r+" Research Center "+e.barnNumber),i}getTerrainPopoverText(e,i){var r="The terrain for the "+i.getCourseTypeName()+" leg is "+e.getTerrainType()+":\n";return null!=e.staminaModifier&&1!==e.staminaModifier&&(r+=e.staminaModifier>1?"+"+(100*(e.staminaModifier-1)).toFixed(0)+"% stamina loss\n":"-"+(100*(1-e.staminaModifier)).toFixed(0)+"% stamina loss\n"),null!=e.maxSpeedModifier&&1!==e.maxSpeedModifier&&(r+=e.maxSpeedModifier>1?"+"+(100*(e.maxSpeedModifier-1)).toFixed(0)+"% max speed\n":"-"+(100*(1-e.maxSpeedModifier)).toFixed(0)+"% max speed\n"),null!=e.accelerationModifier&&1!==e.accelerationModifier&&(r+=e.accelerationModifier>1?"+"+(100*(e.accelerationModifier-1)).toFixed(0)+"% acceleration\n":"-"+(100*(1-e.accelerationModifier)).toFixed(0)+"% acceleration\n"),null!=e.powerModifier&&1!==e.powerModifier&&(r+=e.powerModifier>1?"+"+(100*(e.powerModifier-1)).toFixed(0)+"% power efficiency\n":"-"+(100*(1-e.powerModifier)).toFixed(0)+"% power efficiency\n"),null!=e.focusModifier&&1!==e.focusModifier&&(r+=e.focusModifier>1?"+"+(100*(e.focusModifier-1)).toFixed(0)+"% meters before losing focus\n":"-"+(100*(1-e.focusModifier)).toFixed(0)+"% meters before losing focus\n"),null!=e.adaptabilityModifier&&1!==e.adaptabilityModifier&&(r+=e.adaptabilityModifier>1?"+"+(100*(e.adaptabilityModifier-1)).toFixed(0)+"% meters before stumbling\n":"-"+(100*(1-e.adaptabilityModifier)).toFixed(0)+"% meters before stumbling\n"),r}getInDepthSpecializationDescription(e){var i="";if("Breeding Grounds"===e){var r=0,a=this.globalService.globalVar.modifiers.find(_=>"trainingBreedGaugeIncrease"===_.text);null!=a&&(r=a.value),i="For every 10 levels, gain "+r+"% additional breed XP when completing a training."}else if("Training Facility"===e)i="For every 10 levels up to level 200, gain 1% training time reduction. For every 10 levels after level 200, gain a .1 stat multiplier for every stat.";else if("Attraction"===e){var o=60,s=this.globalService.globalVar.modifiers.find(_=>"attractionTimeToCollectModifier"===_.text);null!=s&&(o=s.value);var l=0,c=this.globalService.globalVar.modifiers.find(_=>"attractionAmountModifier"===_.text);null!=c&&(l=c.value),i="For every 10 levels, gain "+l+" Coins every "+o+" seconds while an animal trains in this barn."}else if("Research Center"===e){var u=this.globalService.globalVar.modifiers.find(_=>"researchCenterIncrementsModifier"===_.text),d=this.globalService.globalVar.modifiers.find(_=>"researchCenterTrainingAnimalModifier"===_.text),f=this.globalService.globalVar.modifiers.find(_=>"researchCenterStudyingAnimalModifier"===_.text),h=this.globalService.globalVar.modifiers.find(_=>"researchCenterMaxStatGainModifier"===_.text),v=.05,b=.45,C=.25,S=.5;null!=u&&(v=u.value),null!=d&&(b=d.value),null!=f&&(C=f.value),null!=h&&(S=h.value),i="To start, the animal training only gains "+100*(b+v)+"% of the stats from their training. An animal at random will gain "+100*C+"% of the stats from training, prioritizing animals of the same course type. For every 10 levels, "+100*v+"% additional stat gain will be distributed up to "+100*S+"% starting with the training animal. Additional animals will gain stats after maxing out the previous."}return i}convertSpecializationNameToEnum(e){return"Breeding Grounds"===e?gt.BreedingGrounds:"Training Facility"===e?gt.TrainingFacility:"Attraction"===e?gt.Attraction:"Research Center"===e?gt.ResearchCenter:gt.None}convertSpecializationEnumToName(e){return e===gt.BreedingGrounds?"Breeding Grounds":e===gt.TrainingFacility?"Training Facility":e===gt.Attraction?"Attraction":e===gt.ResearchCenter?"Research Center":"None"}getTrainingTimeReductionFromTrainingFacility(e){return e.specialization===gt.TrainingFacility?.01*e.specializationLevel:0}getTrainingProgressionAnimationText(e){var i="";return e.affectedStatRatios.topSpeed>0&&(i+="+SPD\n"),e.affectedStatRatios.acceleration>0&&(i+="+ACC\n"),e.affectedStatRatios.endurance>0&&(i+="+END\n"),e.affectedStatRatios.power>0&&(i+="+PWR\n"),e.affectedStatRatios.focus>0&&(i+="+FCS\n"),e.affectedStatRatios.adaptability>0&&(i+="+ADP\n"),i}getTraitStatGainDescription(e){var i="",r="";return e.positiveStatGain===L.acceleration&&(i="Acceleration"),e.positiveStatGain===L.adaptability&&(i="Adaptability"),e.positiveStatGain===L.endurance&&(i="Endurance"),e.positiveStatGain===L.focus&&(i="Focus"),e.positiveStatGain===L.power&&(i="Power"),e.positiveStatGain===L.topSpeed&&(i="Top Speed"),e.negativeStatGain===L.acceleration&&(r="Acceleration"),e.negativeStatGain===L.adaptability&&(r="Adaptability"),e.negativeStatGain===L.endurance&&(r="Endurance"),e.negativeStatGain===L.focus&&(r="Focus"),e.negativeStatGain===L.power&&(r="Power"),e.negativeStatGain===L.topSpeed&&(r="Top Speed"),"+"+e.researchLevel+"% "+i+", -"+e.researchLevel+"% "+r}getSpecialtyItemDescription(e){var i="";return"Stopwatch"===e?i="Reduce training time by 5%":"Animal Handler"===e?i="Retain 2% of trained stats after breeding":"Course Maps"===e?i="Increase your chance to burst during special routes by 10%":"Stockbreeder"===e?i="Add option to auto breed when Breed XP is full":"Scouts"===e?i="You can choose the order of race legs for each animal deck":"Money Mark"===e?i="Add new indicator to race, beat its time to gain increased coins":"National Races"===e?i="Gain 1 medal for every 10 free races you complete":"International Races"===e?i="Gain 1 medal for every 5 free races you complete":"Team Manager"===e?i="Add option to automatically run 1 free race per reset period":"Incubator Upgrade"===e&&(i="When breeding, permanently increase racing stat gain from base stat by 5% of positive trait value"),i}topSpeedPopover(e){var i=e.currentStats.defaultMaxSpeedModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultMaxSpeedModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,L.topSpeed),c="Every stat point increases top speed by "+this.getMaxSpeedModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(c+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(1)+"\n"),e.incubatorStatUpgrades.maxSpeedModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.maxSpeedModifier.toFixed(3)+"\n"),c}accelerationPopover(e){var i=e.currentStats.defaultAccelerationModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultAccelerationModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,L.acceleration),c="Every stat point increases acceleration by "+this.getAccelerationModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(c+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(1)+"\n"),e.incubatorStatUpgrades.accelerationModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.accelerationModifier.toFixed(3)+"\n"),c}endurancePopover(e){var i=e.currentStats.defaultStaminaModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultStaminaModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,L.endurance),c="Every stat point increases stamina by "+this.getStaminaModifierByAnimalType(e.type).toFixed(3)+" up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(c+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(1)+"\n"),e.incubatorStatUpgrades.staminaModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.staminaModifier.toFixed(3)+"\n"),c}powerPopover(e){var i=e.currentStats.defaultPowerModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultPowerModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,L.power),c="Every stat point increases ability efficiency by "+this.getPowerModifierByAnimalType(e.type).toFixed(3)+"% up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(c+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(1)+"\n"),e.incubatorStatUpgrades.powerModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.powerModifier.toFixed(3)+"\n"),c}focusPopover(e){var i=e.currentStats.defaultFocusModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultFocusModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,L.focus),c="Every stat point increases focus distance by "+this.getFocusModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(c+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(1)+"\n"),e.incubatorStatUpgrades.focusModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.focusModifier.toFixed(3)+"\n"),c}adaptabilityPopover(e){var i=e.currentStats.defaultAdaptabilityModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultAdaptabilityModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,L.adaptability),c="Every stat point increases adaptability distance by "+this.getAdaptabilityModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(c+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(1)+"\n"),e.incubatorStatUpgrades.adaptabilityModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.adaptabilityModifier.toFixed(3)+"\n"),c}abilityPopover(){var e=25,i=this.globalService.globalVar.modifiers.find(a=>"abilityLevelCapModifier"===a.text);return null!=i&&(e=i.value),"Select from up to three different abilities by clicking on their names here. Using your ability during a race will award your ability XP which increases its effectiveness. Ability level cannot exceed your animal's breed level + "+e+"."}abilityLevelPopover(e){var i="Base Efficiency: "+e.ability.efficiency+"\n";return e.ability.abilityLevel>1&&(i+="Level Efficiency Multiplier: "+(1+.01*(e.ability.abilityLevel-1))),i}getRandomTip(){var e="",i=[];return this.globalService.globalVar.settings.get("hideTips")||(i.push("After upgrading training options, reselect them to gain their benefits!"),i.push("Don't forget to export your save regularly!"),i.push("Have to recite the alphabet to figure out what your next circuit rank is? You're not alone, go to the settings to use numbers instead!"),i.push("Small barns allow training for 2 hours, medium for 4 hours, and large for 8 hours. Your animals will train even when the game is not active."),e=i[this.utilityService.getRandomInteger(0,i.length-1)]),e}getTotalFreeRacesPerPeriod(){var e=10,i=this.globalService.globalVar.modifiers.find(o=>"freeRacesPerTimePeriodModifier"===o.text);void 0!==i&&(e=i.value);var r=this.getRenown();return e+Math.floor(r/100)}getRemainingFreeRacesPerPeriod(){return this.getTotalFreeRacesPerPeriod()-this.globalService.globalVar.freeRaceCounter}}return t.\u0275fac=function(e){return new(e||t)(Q(Ze),Q(qr))},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Tr=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.gameUpdateEvent=new ge}Update(){var e=Date.now();const i=(e-this.globalService.globalVar.lastTimeStamp)/1e3;this.deltaTime=i;var r=performance.now();this.gameUpdateEvent.emit(i),this.globalService.globalVar.lastTimeStamp=e,this.lastPerformanceNow=r,window.requestAnimationFrame(()=>this.Update())}}return t.\u0275fac=function(e){return new(e||t)(Q(Ze),Q(Cn))},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class ws{constructor(n,e){this.transformationType=n,this.options=e,this.recursionStack=new Set}transform(n,e,i,r,a,o=0){if(Array.isArray(e)||e instanceof Set){const s=r&&this.transformationType===Ue.PLAIN_TO_CLASS?function $L(t){const n=new t;return n instanceof Set||"push"in n?n:[]}(r):[];return e.forEach((l,c)=>{const u=n?n[c]:void 0;if(this.options.enableCircularCheck&&this.isCircular(l))this.transformationType===Ue.CLASS_TO_CLASS&&(s instanceof Set?s.add(l):s.push(l));else{let d;if("function"!=typeof i&&i&&i.options&&i.options.discriminator&&i.options.discriminator.property&&i.options.discriminator.subTypes){if(this.transformationType===Ue.PLAIN_TO_CLASS){d=i.options.discriminator.subTypes.find(b=>b.name===l[i.options.discriminator.property]);const v=i.typeFunction({newObject:s,object:l,property:void 0});d=void 0===d?v:d.value,i.options.keepDiscriminatorProperty||delete l[i.options.discriminator.property]}this.transformationType===Ue.CLASS_TO_CLASS&&(d=l.constructor),this.transformationType===Ue.CLASS_TO_PLAIN&&(l[i.options.discriminator.property]=i.options.discriminator.subTypes.find(h=>h.value===l.constructor).name)}else d=i;const f=this.transform(u,l,d,void 0,l instanceof Map,o+1);s instanceof Set?s.add(f):s.push(f)}}),s}if(i===String&&!a)return null==e?e:String(e);if(i===Number&&!a)return null==e?e:Number(e);if(i===Boolean&&!a)return null==e?e:Boolean(e);if((i===Date||e instanceof Date)&&!a)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(function GL(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}().Buffer&&(i===Buffer||e instanceof Buffer)&&!a)return null==e?e:Buffer.from(e);if(function jL(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}(e)&&!a)return new Promise((s,l)=>{e.then(c=>s(this.transform(void 0,c,i,void 0,void 0,o+1)),l)});if(!a&&null!==e&&"object"==typeof e&&"function"==typeof e.then)return e;if("object"==typeof e&&null!==e){!i&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(i=e.constructor)),!i&&n&&(i=n.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);const s=this.getKeys(i,e,a);let l=n||{};!n&&(this.transformationType===Ue.PLAIN_TO_CLASS||this.transformationType===Ue.CLASS_TO_CLASS)&&(l=a?new Map:i?new i:{});for(const c of s){if("__proto__"===c||"constructor"===c)continue;const u=c;let h,d=c,f=c;if(!this.options.ignoreDecorators&&i)if(this.transformationType===Ue.PLAIN_TO_CLASS){const _=Ci.findExposeMetadataByCustomName(i,c);_&&(f=_.propertyName,d=_.propertyName)}else if(this.transformationType===Ue.CLASS_TO_PLAIN||this.transformationType===Ue.CLASS_TO_CLASS){const _=Ci.findExposeMetadata(i,c);_&&_.options&&_.options.name&&(d=_.options.name)}h=this.transformationType===Ue.PLAIN_TO_CLASS?e[u]:e instanceof Map?e.get(u):e[u]instanceof Function?e[u]():e[u];let v,b=h instanceof Map;if(i&&a)v=i;else if(i){const _=Ci.findTypeMetadata(i,f);if(_){const D={newObject:l,object:e,property:f},E=_.typeFunction?_.typeFunction(D):_.reflectedType;_.options&&_.options.discriminator&&_.options.discriminator.property&&_.options.discriminator.subTypes?e[u]instanceof Array?v=_:(this.transformationType===Ue.PLAIN_TO_CLASS&&(v=_.options.discriminator.subTypes.find(A=>{if(h&&h instanceof Object&&_.options.discriminator.property in h)return A.name===h[_.options.discriminator.property]}),v=void 0===v?E:v.value,_.options.keepDiscriminatorProperty||h&&h instanceof Object&&_.options.discriminator.property in h&&delete h[_.options.discriminator.property]),this.transformationType===Ue.CLASS_TO_CLASS&&(v=h.constructor),this.transformationType===Ue.CLASS_TO_PLAIN&&h&&(h[_.options.discriminator.property]=_.options.discriminator.subTypes.find(A=>A.value===h.constructor).name)):v=E,b=b||_.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(D=>D.target===i&&!!D.properties[f]).forEach(D=>v=D.properties[f]);else if(this.options.enableImplicitConversion&&this.transformationType===Ue.PLAIN_TO_CLASS){const D=Reflect.getMetadata("design:type",i.prototype,f);D&&(v=D)}}const C=Array.isArray(e[u])?this.getReflectedType(i,f):void 0,S=n?n[u]:void 0;if(l.constructor.prototype){const _=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if((this.transformationType===Ue.PLAIN_TO_CLASS||this.transformationType===Ue.CLASS_TO_CLASS)&&(_&&!_.set||l[d]instanceof Function))continue}if(this.options.enableCircularCheck&&this.isCircular(h)){if(this.transformationType===Ue.CLASS_TO_CLASS){let _=h;_=this.applyCustomTransformations(_,i,c,e,this.transformationType),(void 0!==_||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,_):l[d]=_)}}else{const _=this.transformationType===Ue.PLAIN_TO_CLASS?d:c;let D;this.transformationType===Ue.CLASS_TO_PLAIN?(D=e[_],D=this.applyCustomTransformations(D,i,_,e,this.transformationType),D=e[_]===D?h:D,D=this.transform(S,D,v,C,b,o+1)):void 0===h&&this.options.exposeDefaultValues?D=l[d]:(D=this.transform(S,h,v,C,b,o+1),D=this.applyCustomTransformations(D,i,_,e,this.transformationType)),(void 0!==D||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,D):l[d]=D)}}return this.options.enableCircularCheck&&this.recursionStack.delete(e),l}return e}applyCustomTransformations(n,e,i,r,a){let o=Ci.findTransformMetadatas(e,i,this.transformationType);return void 0!==this.options.version&&(o=o.filter(s=>!s.options||this.checkVersion(s.options.since,s.options.until))),o=o.filter(this.options.groups&&this.options.groups.length?s=>!s.options||this.checkGroups(s.options.groups):s=>!s.options||!s.options.groups||!s.options.groups.length),o.forEach(s=>{n=s.transformFn({value:n,key:i,obj:r,type:a,options:this.options})}),n}isCircular(n){return this.recursionStack.has(n)}getReflectedType(n,e){if(!n)return;const i=Ci.findTypeMetadata(n,e);return i?i.reflectedType:void 0}getKeys(n,e,i){let r=Ci.getStrategy(n);"none"===r&&(r=this.options.strategy||"exposeAll");let a=[];if(("exposeAll"===r||i)&&(a=e instanceof Map?Array.from(e.keys()):Object.keys(e)),i)return a;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&n&&(a=[...Ci.getExposedProperties(n,this.transformationType),...Ci.getExcludedProperties(n,this.transformationType)]),!this.options.ignoreDecorators&&n){let o=Ci.getExposedProperties(n,this.transformationType);this.transformationType===Ue.PLAIN_TO_CLASS&&(o=o.map(l=>{const c=Ci.findExposeMetadata(n,l);return c&&c.options&&c.options.name?c.options.name:l})),a=this.options.excludeExtraneousValues?o:a.concat(o);const s=Ci.getExcludedProperties(n,this.transformationType);s.length>0&&(a=a.filter(l=>!s.includes(l))),void 0!==this.options.version&&(a=a.filter(l=>{const c=Ci.findExposeMetadata(n,l);return!c||!c.options||this.checkVersion(c.options.since,c.options.until)})),a=a.filter(this.options.groups&&this.options.groups.length?l=>{const c=Ci.findExposeMetadata(n,l);return!c||!c.options||this.checkGroups(c.options.groups)}:l=>{const c=Ci.findExposeMetadata(n,l);return!(c&&c.options&&c.options.groups&&c.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter(o=>this.options.excludePrefixes.every(s=>o.substr(0,s.length)!==s))),a=a.filter((o,s,l)=>l.indexOf(o)===s),a}checkVersion(n,e){let i=!0;return i&&n&&(i=this.options.version>=n),i&&e&&(i=this.options.version<e),i}checkGroups(n){return!n||this.options.groups.some(e=>n.includes(e))}}const Ss={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},Dr=new class zL{instanceToPlain(n,e){return new ws(Ue.CLASS_TO_PLAIN,Yi(Yi({},Ss),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToPlainFromExist(n,e,i){return new ws(Ue.CLASS_TO_PLAIN,Yi(Yi({},Ss),i)).transform(e,n,void 0,void 0,void 0,void 0)}plainToInstance(n,e,i){return new ws(Ue.PLAIN_TO_CLASS,Yi(Yi({},Ss),i)).transform(void 0,e,n,void 0,void 0,void 0)}plainToClassFromExist(n,e,i){return new ws(Ue.PLAIN_TO_CLASS,Yi(Yi({},Ss),i)).transform(n,e,void 0,void 0,void 0,void 0)}instanceToInstance(n,e){return new ws(Ue.CLASS_TO_CLASS,Yi(Yi({},Ss),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToClassFromExist(n,e,i){return new ws(Ue.CLASS_TO_CLASS,Yi(Yi({},Ss),i)).transform(e,n,void 0,void 0,void 0,void 0)}serialize(n,e){return JSON.stringify(this.instanceToPlain(n,e))}deserialize(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}deserializeArray(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}};function NS(t,n,e){return Dr.plainToInstance(t,n,e)}let IS=(()=>{class t{constructor(e,i,r){this.globalService=e,this.utilityService=i,this.lookupService=r}getSpecializationPopoverText(e,i){if(e===gt.Attraction){var r=60,a=this.globalService.globalVar.modifiers.find(S=>"attractionTimeToCollectModifier"===S.text);null!=a&&(r=a.value);var o=0,s=this.globalService.globalVar.modifiers.find(S=>"attractionAmountModifier"===S.text);return null!=s&&(o=s.value*i),"Amount Earned: "+o+" Coins / "+r+" seconds\n"}if(e===gt.ResearchCenter){var l=this.globalService.globalVar.modifiers.find(S=>"researchCenterIncrementsModifier"===S.text),c=this.globalService.globalVar.modifiers.find(S=>"researchCenterTrainingAnimalModifier"===S.text),u=this.globalService.globalVar.modifiers.find(S=>"researchCenterStudyingAnimalModifier"===S.text),d=this.globalService.globalVar.modifiers.find(S=>"researchCenterMaxStatGainModifier"===S.text);if(null==l||null==c||null==u||null==d)return"";var f=i*l.value,v="Training Animal Stat Gain: "+(100*(c.value+f<d.value?c.value+f:d.value)).toFixed(0)+"%\n",b=(f-(d.value-c.value))/(d.value-u.value);return b>0?(Math.floor(b)>0&&(v+="Additional Studying Animal Stat Gain (x"+Math.floor(b)+"): "+(100*d.value).toFixed(0)+"%\n"),b>Math.floor(b)&&(v+="Additional Studying Animal Stat Gain: "+(100*((b-Math.floor(b))*(d.value-u.value)+u.value)).toFixed(0)+"%\n")):v+="Additional Studying Animal Stat Gain: "+(100*u.value).toFixed(0)+"%\n",v}return""}handleResearchCenterStatIncrease(e,i){var r=this.globalService.globalVar.modifiers.find(A=>"researchCenterIncrementsModifier"===A.text),a=this.globalService.globalVar.modifiers.find(A=>"researchCenterTrainingAnimalModifier"===A.text),o=this.globalService.globalVar.modifiers.find(A=>"researchCenterStudyingAnimalModifier"===A.text),s=this.globalService.globalVar.modifiers.find(A=>"researchCenterMaxStatGainModifier"===A.text);if(null!=r&&null!=a&&null!=o&&null!=s&&null!=e.currentTraining){var C,c=i.barnUpgrades.specializationLevel*r.value,u=e.currentTraining.affectedStatRatios.topSpeed,d=e.currentTraining.affectedStatRatios.acceleration,f=e.currentTraining.affectedStatRatios.endurance,h=e.currentTraining.affectedStatRatios.power,v=e.currentTraining.affectedStatRatios.focus,b=e.currentTraining.affectedStatRatios.adaptability;e.increaseStats(new ee((C=a.value+c<s.value?a.value+c:s.value)*u,C*d,C*f,C*h,C*v,C*b));var S=(c-(s.value-a.value))/(s.value-o.value),_=this.getAnimalsInRandomOrder(e.raceCourseType,e);if(S>0){_.length<S&&(S=_.length);for(var D=0;D<Math.floor(S);D++)_[D].increaseStats(new ee(s.value*u,s.value*d,s.value*f,s.value*h,s.value*v,s.value*b));if(S>Math.floor(S)&&_.length>D){var E=o.value+(S-Math.floor(S))*(s.value-o.value);_[D].increaseStats(new ee(E*u,E*d,E*f,E*h,E*v,E*b))}}else _.length>=1&&_[0].increaseStats(new ee((E=o.value)*u,E*d,E*f,E*h,E*v,E*b))}}getAnimalsInRandomOrder(e,i){for(var r=[],a=this.globalService.globalVar.animals.filter(u=>u.raceCourseType===e&&u.isAvailable&&u.type!==i.type),o=this.globalService.globalVar.animals.filter(u=>u.raceCourseType!==e&&u.isAvailable),s=a.length,l=0;l<s;l++){var c=this.utilityService.getRandomInteger(1,a.length);r.push(a[c-1]),a=a.filter(u=>u!==a[c-1])}for(s=o.length,l=0;l<s;l++)c=this.utilityService.getRandomInteger(1,o.length),r.push(o[c-1]),o=o.filter(f=>f!==o[c-1]);return r}handleAttractionRevenue(e,i){var r=this.globalService.globalVar.barns.find(f=>f.barnNumber===i.associatedBarnNumber);if(null!=r&&r.barnUpgrades.specialization===gt.Attraction){var a=60,o=this.globalService.globalVar.modifiers.find(f=>"attractionTimeToCollectModifier"===f.text);null!=o&&(a=o.value);var s=0,l=this.globalService.globalVar.modifiers.find(f=>"attractionAmountModifier"===f.text);null!=l&&(s=l.value),r.barnUpgrades.currentDeltaTime+=e;var c=0,u=r.barnUpgrades.currentDeltaTime;for(null!==i.currentTraining&&r.barnUpgrades.currentDeltaTime>=i.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.currentDeltaTime=i.currentTraining.trainingTimeRemaining),r.barnUpgrades.currentDeltaTime>=a&&console.log("Coins Before Attraction While: "+this.lookupService.getCoins());r.barnUpgrades.currentDeltaTime>=a;){r.barnUpgrades.currentDeltaTime-=a,s*=r.barnUpgrades.specializationLevel;var d=this.globalService.globalVar.resources.find(f=>"Coins"===f.name);void 0!==d&&(d.amount+=s),c+=s}c>0&&(console.log("Collected Amount: "+c),console.log("Original Delta Time: "+u),console.log("Coins After Attraction While: "+this.lookupService.getCoins()))}}}return t.\u0275fac=function(e){return new(e||t)(Q(Ze),Q(qr),Q(Cn))},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var zi=(()=>{return(t=zi||(zi={}))[t.None=0]="None",t[t.Stumble=1]="Stumble",t[t.LostFocus=2]="LostFocus",t[t.LostStamina=3]="LostStamina",t[t.Burst=4]="Burst",zi;var t})();class WL{constructor(){this.raceUpdates=[],this.beatMoneyMark=!1}addRaceUpdate(n,e){var i=new F;i.text=e,i.value=n,this.raceUpdates.push(i)}}class qL{}let PS=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.lookupService=i,this.utilityService=r,this.initializeService=a,this.frameModifier=60,this.timeToComplete=60,this.currentLostFocusOpportunity=0,this.currentBurstOpportunity=0,this.tundraPreviousYAmount=0}runRace(e){console.log("Race Info:"),console.log(e),this.currentBurstOpportunity=0,this.currentLostFocusOpportunity=0,this.tundraPreviousYAmount=0,this.selectedRace=e;var i=new WL,r=0,a=0;e.raceLegs.forEach(A=>r+=A.distance);var o=0;(0===e.timeToComplete||null==e.timeToComplete)&&(e.timeToComplete=60);var s=r/e.timeToComplete,l=this.globalService.globalVar.animalDecks.find(A=>A.isPrimaryDeck),c=0;this.timeToComplete=e.timeToComplete;var u=[],d=[],f=zi.None,h=0,v=0,C=0,S=0,_=0,D=0,E=1;return void 0===l?(i.errorMessage="No animal deck selected.",i):(this.racingAnimals=this.lookupService.getAnimalsFromAnimalDeck(l),e.raceUI.distanceCoveredByFrame=[],e.raceUI.velocityByFrame=[],e.raceUI.timeToCompleteByFrame=[],e.raceUI.maxSpeedByFrame=[],e.raceUI.staminaPercentByFrame=[],e.raceUI.yAdjustmentByFrame=[],e.raceUI.racerEffectByFrame=[],e.raceUI.lavaFallPercentByFrame=[],i.addRaceUpdate(o,e.timeToComplete+" seconds are on the race clock."),e.raceLegs.forEach(A=>{var y=this.racingAnimals.find(Y=>Y.raceCourseType===A.courseType);null!=y&&(y.raceVariables=new Wg,y.totalRacesRun+=1)}),this.globalService.globalVar.trackedStats.totalRaces+=1,e.raceLegs.forEach(A=>{var y=this.racingAnimals.find(Le=>Le.raceCourseType===A.courseType);if(null!=y){this.increasePersistentAbilityXp(y);var Y=void 0,G=new Zt,X="<span class='coloredText "+A.getCourseTypeClass()+"'>"+y.name+"</span>";o<this.timeToComplete*this.frameModifier&&(d.length>0&&(Y=d[d.length-1]),this.PrepareRacingAnimal(y,u,A,Y),this.prepareRacingLeg(A,y),i.addRaceUpdate(o,X+" starts their leg of the race."));var Z=y.currentStats.stamina,te=0,Je=A.distance,ke=new yd,at=new yd,_e=new Wt,he=new Wt,Ht=!1,ot=1,ln={permanentAdaptabilityIncreaseMultiplier:1},Ke={permanentMaxSpeedIncreaseMultiplier:1},ct=1,vt=1,Lt={coldBloodedIncreaseMultiplier:1},wt=1,st=[],ye=1,ut=!1,cn=0,Wn=[!1,!1,!1,!1,!1],Nn=A.terrain.maxSpeedModifier,qn=A.terrain.accelerationModifier,ui=A.terrain.staminaModifier,Sn=A.terrain.powerModifier,tn=A.terrain.focusModifier,Tn=A.terrain.adaptabilityModifier;if("Nap"===y.ability.name&&y.type===I.Hare){var nn=A.distance-this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye);nn<0&&(nn=0),y.ability.remainingLength=nn}S>0&&(y.currentStats.stamina+=S);for(var St=o;St<=this.timeToComplete*this.frameModifier;St++){cn+=1,f=zi.None;var se=0;if(c>0)for(var me=0;me<c;me++)se+=e.raceLegs[me].distance;if(v>0){var di=this.racingAnimals.find(Le=>Le.raceCourseType===e.raceLegs[v-1].courseType);null!=di&&(_e=di)}else _e=null;if(v<e.raceLegs.length-1){G=e.raceLegs[v+1];var Jr=this.racingAnimals.find(Le=>Le.raceCourseType===G.courseType);null!=Jr&&(he=Jr)}else he=null;s=r/this.timeToComplete;var dt=a-se,un=0,cr=!1,La=0;if(A.pathData.forEach(Le=>{!cr&&dt>=La&&dt<La+Le.length&&(cr=!0,ke=Le,un=dt-La),Le.legStartingDistance=La,La+=Le.length,cr||(at=Le)}),"Night Vision"===y.ability.name&&y.type===I.Gecko&&!y.ability.abilityInUse&&!at.didAnimalLoseFocus&&at.length>0&&(ot+=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)/100,this.globalService.increaseAbilityXp(y),y.ability.abilityInUse=!0),"Feeding Frenzy"===y.ability.name&&y.type===I.Shark){var dc=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye);if(dt<=dc||dt>=A.distance-dc){ct=1.5;var fc=this.globalService.globalVar.modifiers.find(Le=>"feedingFrenzyPositiveModifier"===Le.text);void 0!==fc&&(ct=fc.value)}else ct=1}if(null!==_e&&void 0!==Y){if("Navigator"===_e.ability.name&&_e.type===I.Dolphin&&!_e.ability.abilityInUse){var Od=this.lookupService.GetAbilityEffectiveAmount(_e,Y.terrain.powerModifier,ye);this.AddRelayEffect(y,Od,new ee(0,0,0,0,0,.25*_e.currentStats.adaptabilityMs),!1),_e.ability.abilityInUse=!0}_e.type===I.Caribou&&"Herd Mentality"===_e.ability.name&&!_e.ability.abilityUsed&&(C>0&&(y.raceVariables.isBursting=!0),y.currentStats.stamina+=C,C=0,_e.ability.abilityUsed=!0,this.globalService.increaseAbilityXp(_e))}"Navigator"===y.ability.name&&y.type===I.Dolphin&&(y.ability.abilityInUse=!1),y.type===I.Fox&&"Fleeting Speed"===y.ability.name&&!y.ability.abilityUsed&&(wt+=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)/100,y.ability.abilityUsed=!0),y.type===I.Dolphin&&"Echolocation"===y.ability.name&&y.ability.abilityInUse?(A.terrain.maxSpeedModifier<1&&(A.terrain.maxSpeedModifier=1),A.terrain.accelerationModifier<1&&(A.terrain.accelerationModifier=1),A.terrain.staminaModifier<1&&(A.terrain.staminaModifier=1),A.terrain.powerModifier<1&&(A.terrain.powerModifier=1),A.terrain.focusModifier<1&&(A.terrain.focusModifier=1),A.terrain.adaptabilityModifier<1&&(A.terrain.adaptabilityModifier=1)):(A.terrain.maxSpeedModifier=Nn,A.terrain.accelerationModifier=qn,A.terrain.staminaModifier=ui,A.terrain.powerModifier=Sn,A.terrain.focusModifier=tn,A.terrain.adaptabilityModifier=Tn),Ht=ke===A.pathData[A.pathData.length-1];var hc=this.getModifiedAdaptability(y,ln,ye,st,A,dt,he,G),dn=this.getModifiedFocus(y,ye,st,Lt),Nm=this.didAnimalStumble(y,ke,un,A.terrain,ln,hc,ye,o,X,i),Fd=this.didAnimalLoseFocus(y,this.timeToComplete,e.length,a,A.terrain,ye,st,Lt,ke,dn);if(Fd&&(y.raceVariables.lostFocus=!0,y.raceVariables.currentLostFocusLength=y.raceVariables.defaultLostFocusLength,y.raceVariables.metersSinceLostFocus=0,h=te,"Night Vision"===y.ability.name&&y.type===I.Gecko&&(ot=1),i.addRaceUpdate(o,X+" is distracted and lost focus!")),Nm&&(y.raceVariables.stumbled=!0,y.raceVariables.currentStumbledLength=y.raceVariables.defaultStumbledLength,h=te,i.addRaceUpdate(o,X+" stumbles!")),0===y.currentStats.stamina){var Vd=.9,Ld=this.globalService.globalVar.modifiers.find(Le=>"exhaustionStatLossModifier"===Le.text);void 0!==Ld&&(Vd=Ld.value),ye*=Vd;var pc=.5;if(y.getEquippedItemName()===this.globalService.getEquipmentName(Se.quickSnack)){pc=1;var Bd=this.globalService.globalVar.modifiers.find(Le=>"quickSnackEquipmentModifier"===Le.text);void 0!==Bd&&(pc=Bd.value)}y.currentStats.stamina=Z*pc,i.addRaceUpdate(o,X+" runs out of stamina and must slow down.")}if(y.raceVariables.lostFocus||y.raceVariables.stumbled){if(y.raceVariables.lostFocus){f=zi.LostFocus;var gc=.9*h;te>0&&(te-=gc/y.raceVariables.defaultLostFocusLength),y.raceVariables.currentLostFocusLength-=1,0===y.raceVariables.currentLostFocusLength&&(y.raceVariables.lostFocus=!1)}y.raceVariables.stumbled&&(f=zi.Stumble,gc=h-h*ke.stumbleSeverity,te>0&&(te-=gc/y.raceVariables.defaultStumbledLength),y.raceVariables.currentStumbledLength-=1,0===y.raceVariables.currentStumbledLength&&(y.raceVariables.stumbled=!1))}else{var Kn=y.currentStats.accelerationMs;if(Kn*=A.terrain.accelerationModifier,Kn*=ye,y.type===I.Horse&&"Pacemaker"===y.ability.name&&y.ability.abilityInUse&&(Kn*=1.25),y.type===I.Cheetah&&"Sprint"===y.ability.name&&y.ability.abilityInUse&&(Kn*=1.1),y.type===I.Cheetah&&"Giving Chase"===y.ability.name){var Ud=s*(o/this.frameModifier)-a;if(Ud>0){var Om=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye),Hd=Ud/s*Om;Hd>=1&&(Kn*=Hd)}}if("Feeding Frenzy"===y.ability.name&&y.type===I.Shark&&(Kn*=ct),y.type===I.Caribou&&"Great Migration"===y.ability.name&&(Kn+=vt),"Wild Toboggan"===y.ability.name&&y.type===I.Penguin&&y.ability.abilityInUse){var xm=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)/100,ma=20,Gd=this.globalService.globalVar.modifiers.find(Le=>"maxDriftAmountModifier"===Le.text);void 0!==Gd&&(ma=Gd.value),(Ba=ke.driftAmount)>(ma*=2)&&(Ba=ma),Kn*=1+xm*(Math.abs(Ba)/ma),y.ability.abilityInUse=!0}"Nap"===y.ability.name&&y.type===I.Hare&&(y.ability.remainingLength-=s*(1/this.frameModifier),y.ability.remainingLength<=0&&(y.ability.remainingLength=0),y.ability.remainingLength>0&&(Kn=0)),"Buried Treasure"===y.ability.name&&y.type===I.Octopus&&cn<8*this.frameModifier&&(Kn=0),y.type===I.Salamander&&"Heat Up"===y.ability.name&&y.ability.abilityInUse&&(Kn*=1+.15*y.ability.totalUseCount),y.type===I.Fox&&"Trickster"===y.ability.name&&"Acceleration"===y.ability.tricksterStatLoss&&y.ability.abilityInUse&&(Kn*=.8),y.type===I.Fox&&"Trickster"===y.ability.name&&"Acceleration"===y.ability.tricksterStatGain&&y.ability.abilityInUse&&(Kn*=1.4),y.type===I.Fox&&"Nine Tails"===y.ability.name&&(Kn*=1+.1*this.getNineTailsBuffCount("Acceleration",st)),te+=Kn/this.frameModifier}var fn=y.currentStats.maxSpeedMs;if(fn*=A.terrain.maxSpeedModifier,fn*=ye,y.type===I.Cheetah&&"Sprint"===y.ability.name&&y.ability.abilityInUse&&(fn*=1.25),y.type===I.Cheetah&&"On The Hunt"===y.ability.name&&(fn*=ot),"Nap"===y.ability.name&&y.type===I.Hare&&(fn*=2),ut&&y.type===I.Shark&&"Blood In The Water"===y.ability.name&&(fn*=1+this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)/100),null!==he&&he.type===I.Shark&&"Feeding Frenzy"===he.ability.name||null!==_e&&_e.type===I.Shark&&"Feeding Frenzy"===_e.ability.name){var jd=.9,$d=this.globalService.globalVar.modifiers.find(Le=>"feedingFrenzyNegativeModifier"===Le.text);void 0!==$d&&(jd=$d.value),fn*=jd}if("Feeding Frenzy"===y.ability.name&&y.type===I.Shark&&(fn*=ct),"Quick Toboggan"===y.ability.name&&y.type===I.Penguin&&(fn*=Ke.permanentMaxSpeedIncreaseMultiplier),y.type===I.Gecko&&"Night Vision"===y.ability.name&&(fn*=ot),y.type===I.Fox&&"Trickster"===y.ability.name&&"Max Speed"===y.ability.tricksterStatLoss&&y.ability.abilityInUse&&(fn*=.8),y.type===I.Fox&&"Trickster"===y.ability.name&&"Max Speed"===y.ability.tricksterStatGain&&y.ability.abilityInUse&&(fn*=1.4),y.type===I.Fox&&"Fleeting Speed"===y.ability.name){var bo=wt;(bo-=.02*Math.floor(dt/A.distance*100)*(bo-1))<1&&(bo=1),fn*=bo}if(y.type===I.Fox&&"Nine Tails"===y.ability.name&&(fn*=1+.1*this.getNineTailsBuffCount("Max Speed",st)),te>fn&&(te=fn),this.doesRacerBurst(y,ke,this.timeToComplete,e.length,a,hc,dn)){if(y.raceVariables.isBursting=!0,y.raceVariables.remainingBurstMeters=y.currentStats.burstDistance,y.raceVariables.burstCount+=1,y.type===I.Monkey&&"Frenzy"===y.ability.name&&(y.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye),this.globalService.increaseAbilityXp(y)),y.type===I.Hare&&"Prey Instinct"===y.ability.name&&!y.ability.abilityUsed&&(y.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye),y.ability.abilityUsed=!0),y.type===I.Octopus&&"Big Brain"===y.ability.name){var LG=Math.ceil(A.pathData.length/3);if(y.raceVariables.burstCount===LG){var sD=e.raceLegs.findIndex(Le=>Le.courseType===P.Ocean);e.raceLegs.length>sD&&e.raceLegs.slice(sD+1).forEach(Le=>{var jm=this.racingAnimals.find(XG=>XG.raceCourseType===Le.courseType);if(null!=jm){var YG=1+this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)/100;this.AddRelayEffect(jm,Le.distance,new ee(1,1,1,YG,1,1),!0),this.globalService.increaseAbilityXp(y)}})}}if(i.addRaceUpdate(o,"<strong>BURST!</strong> "+X+" is breaking their limit!"),y.type===I.Cheetah&&"On The Hunt"===y.ability.name&&(ot+=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)/100,this.globalService.increaseAbilityXp(y)),y.type===I.Goat&&"Deep Breathing"===y.ability.name){var BG=Z*(this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)/100);y.currentStats.stamina+=BG,y.currentStats.stamina>Z&&(S+=y.currentStats.stamina-Z),this.globalService.increaseAbilityXp(y)}}var kr=te;if(null!==_e&&"Camouflage"===_e.ability.name&&_e.type===I.Gecko&&_>0){var Bm=dt/_e.ability.remainingLength;Bm>1&&(Bm=1),(kr+=(1-Bm)*_)>1.5*fn&&(kr=1.5*fn)}if(y.raceVariables.isBursting){f=zi.Burst;var zd=1.25;y.type===I.Goat&&"In The Rhythm"===y.ability.name&&(zd+=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)/100),zd+=D,y.raceVariables.remainingBurstMeters>=kr/this.frameModifier?(y.raceVariables.remainingBurstMeters-=(kr*=zd)/this.frameModifier,y.raceVariables.remainingBurstMeters<0&&(kr+=y.raceVariables.remainingBurstMeters,y.raceVariables.remainingBurstMeters=0)):(kr-=y.raceVariables.remainingBurstMeters,kr+=y.raceVariables.remainingBurstMeters*zd,y.raceVariables.remainingBurstMeters=0,y.raceVariables.isBursting=!1,i.addRaceUpdate(o,X+"'s burst ends."))}var Ua,Ti=kr/this.frameModifier;if(y.ability.abilityInUse&&(y.type===I.Monkey&&"Leap"===y.ability.name||y.type===I.Octopus&&"Propulsion"===y.ability.name)){var UG=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye);Ti+=UG/y.ability.totalFrames,y.ability.remainingFrames-=1,y.ability.remainingFrames<=0&&(y.ability.abilityInUse=!1)}if(A.courseType===P.Tundra){var Ba;if(this.handleTundraDrift(y,ke,at,Ht,hc,A.terrain,un,Ti,ye,Ke,i,X,o))Ti=0,te=0,i.addRaceUpdate(o,X+" slides into a wall and loses all momentum!");else if((Ba=Math.abs(ke.driftAmount))<=(ma=20)&&!Ht){var lD=1-Ba/100;Ti*=lD,fn*=lD}this.tundraPreviousYAmount=y.raceVariables.icyCurrentYAmount}if(A.courseType===P.Volcanic?this.handleLavaFall(y,cn,e.length/this.timeToComplete,dt,A.distance,i,o,Wn)&&(this.timeToComplete=o/this.frameModifier):this.selectedRace.raceUI.lavaFallPercentByFrame.push(this.selectedRace.raceUI.lavaFallPercentByFrame.length>0&&null!=this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]&&this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]>0?this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1]:[0,0,0,0,0]),a+=Ti>Je?Je:Ti,Je-=Ti,e.raceUI.distanceCoveredByFrame.push(a),e.raceUI.velocityByFrame.push(Ti),e.raceUI.timeToCompleteByFrame.push(this.timeToComplete),e.raceUI.maxSpeedByFrame.push(fn),e.raceUI.staminaPercentByFrame.push(y.currentStats.stamina/Z),e.raceUI.racerEffectByFrame.push(f),this.handleStamina(y,i,Ti,o,A.terrain),Fd||(y.raceVariables.metersSinceLostFocus+=Ti),y.type===I.Fox&&"Nine Tails"===y.ability.name&&(this.checkForNineTailsBuff(ke,st,y,A,ye,i,o,X),st.length>0&&(st.forEach(Le=>{Le[1]-=Ti}),st=st.filter(Le=>Le[1]>0))),y.ability.abilityInUse&&y.ability.remainingLength>0&&(y.ability.remainingLength-=Ti,y.type===I.Gecko&&"Camouflage"===y.ability.name&&(y.ability.remainingLength-=Ti),y.ability.remainingLength<=0&&(y.ability.abilityInUse=!1,y.ability.currentCooldown=y.ability.cooldown,y.getEquippedItemName()===this.globalService.getEquipmentName(Se.pendant)))){var cD=.9,uD=this.globalService.globalVar.modifiers.find(Le=>"pendantEquipmentModifier"===Le.text);void 0!==uD&&(cD=uD.value),y.ability.currentCooldown*=cD}if(null!=y.ability.currentCooldown&&y.ability.currentCooldown<=0&&this.abilityRedundancyCheck(y,te,ke,A,Je,ye)&&(this.useAbility(y,e,A,ye,Z,dt,Lt),(Ua=new F).value=o,Ua.text=y.type===I.Fox&&"Trickster"===y.ability.name?y.getAbilityUseUpdateText(X,", gaining "+y.ability.tricksterStatGain+" but losing "+y.ability.tricksterStatLoss):y.getAbilityUseUpdateText(X),i.raceUpdates.push(Ua),y.ability.currentCooldown=y.ability.cooldown,y.type===I.Caribou&&"Great Migration"===y.ability.name)){var Hm=.1*Z;y.currentStats.stamina-=Hm,vt=Hm>1?.25*Hm:1}null!=y.raceVariables.relayEffects&&y.raceVariables.relayEffects.length>0&&(y.raceVariables.relayEffects.forEach(Le=>{Le.remainingRelayMeters<=Ti?(Le.remainingRelayMeters=0,Le.isMultiplicative?null==y||y.currentStats.divideCurrentRacingStats(Le.relayAffectedStatRatios):null==y||y.currentStats.subtractCurrentRacingStats(Le.relayAffectedStatRatios),i.addRaceUpdate(o,X+"'s relay effect ends.")):Le.remainingRelayMeters-=Ti}),y.raceVariables.relayEffects=y.raceVariables.relayEffects.filter(Le=>Le.remainingRelayMeters>0)),0!==o&&o!==this.timeToComplete&&o%(10*this.frameModifier)==0&&((Ua=new F).value=o,Ua.text=this.getUpdateMessageByRelativeDistance(s,o,a,X),i.raceUpdates.push(Ua));var Gm=!1;if(a>s*(o/this.frameModifier)?(ut||(Gm=!0),ut=!0):(ut&&(Gm=!0),ut=!1),Gm&&y.type===I.Shark&&"Apex Predator"===y.ability.name&&!y.ability.abilityUsed&&St>1){y.ability.abilityUsed=!0;var zG=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye),dD=this.timeToComplete*(zG/this.selectedRace.length);this.timeToComplete+=1.5*dD-dD,this.globalService.increaseAbilityXp(y)}if(y.ability.currentCooldown-=1/this.frameModifier,o+=1,Je<=0){i.addRaceUpdate(o,X+" finishes their leg of the race."),A.legComplete=!0,v+=1,y.type===I.Caribou&&"Herd Mentality"===y.ability.name&&!y.raceVariables.ranOutOfStamina&&(C=y.currentStats.stamina*(this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)/100),this.globalService.increaseAbilityXp(y)),y.type===I.Caribou&&"Special Delivery"===y.ability.name&&!y.raceVariables.ranOutOfStamina&&(D=y.currentStats.stamina/Z*(this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)/100),this.globalService.increaseAbilityXp(y)),y.type===I.Octopus&&"Buried Treasure"===y.ability.name&&(E=1+this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)/100),this.PrepareRacingAnimal(y,void 0,void 0,void 0,ye),y.type===I.Gecko&&"Camouflage"===y.ability.name&&(_=kr,y.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(y,A.terrain.powerModifier,ye)),u.push(y),d.push(A);break}}c+=1}}),e.raceLegs.some(A=>!A.legComplete)?(i.wasSuccessful=!1,i.addRaceUpdate(o,"You lost the race...")):(e.isCompleted=!0,i.wasSuccessful=!0,i.totalFramesPassed=o,i.addRaceUpdate(o,"You won the race!")),this.racingAnimals.forEach(A=>{this.PrepareRacingAnimal(A,void 0,void 0,void 0,void 0,!0)}),this.globalService.globalVar.trackedStats.totalMetersRaced+=a,i.wasSuccessful&&this.raceWasSuccessfulUpdate(i,E),i)}getStaminaModifier(e){var i,r=this.globalService.globalVar.modifiers.find(a=>"staminaModifier"===a.text);return i=void 0===r?.2:r.value,null!=e&&null!=e.staminaModifier&&(i*=e.staminaModifier),i}handleStamina(e,i,r,a,o){var s=this.getStaminaModifier(o);e.type===I.Horse&&"Second Wind"===e.ability.name&&e.ability.abilityInUse||(e.currentStats.stamina-=e.type===I.Cheetah&&"Sprint"===e.ability.name&&e.ability.abilityInUse?r*s*2:r*s),e.currentStats.stamina<0&&(e.currentStats.stamina=0,e.raceVariables.ranOutOfStamina=!0)}doesRacerBurst(e,i,r,a,o,s,l){var c=1e3/this.selectedRace.length,u=e.currentStats.calculateBurstChance(l,s)*c;if(i.checkedForBurst)return!1;if(i.checkedForBurst=!0,"Night Vision"===e.ability.name&&e.type===I.Gecko&&(e.ability.abilityInUse=!1),e.type===I.Hare&&"Prey Instinct"===e.ability.name&&!e.ability.abilityUsed)return!0;if(i.isSpecialPath){var d=this.lookupService.getResourceByName("Course Maps");if(null==d&&(d=0),d>0){var f=1,h=this.globalService.globalVar.modifiers.find(b=>"racerMapsModifier"===b.text);null!=h&&(f=1+d*h.value),u*=f}}return this.utilityService.getRandomNumber(1,100)<=u+1}raceWasSuccessfulUpdate(e,i){var a,r=this.globalService.globalVar.circuitRank,o=0;if(this.selectedRace.isCircuitRace?(a=this.globalService.globalVar.circuitRaces.find(c=>c.raceId===this.selectedRace.raceId),o=this.lookupService.getCircuitBreedGaugeIncrease(),this.globalService.globalVar.circuitRaces.filter(c=>c.requiredRank===r).every(c=>c.isCompleted)&&(this.selectedRace.circuitIncreaseReward=this.globalService.IncreaseCircuitRank(),this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,q.Resources)))):(a=this.globalService.globalVar.localRaces.find(c=>c.raceId===this.selectedRace.raceId&&c.localRaceType===this.selectedRace.localRaceType),o=this.lookupService.getLocalBreedGaugeIncrease()),this.selectedRace.localRaceType!==Vt.Free){if(void 0===a)return;this.selectedRace.localRaceType===Vt.Mono&&(this.globalService.globalVar.lastMonoRaceCourseType=this.selectedRace.raceLegs[0].courseType),this.globalService.IncreaseLocalRaceRank(this.selectedRace.localRaceType),a.isCompleted=!0}else this.globalService.globalVar.nationalRaceCountdown+=1;this.racingAnimals.forEach(c=>{this.globalService.IncreaseAnimalBreedGauge(c,o)}),e.beatMoneyMark=this.checkMoneyMark(e),null!=this.selectedRace.rewards&&this.selectedRace.rewards.forEach(c=>{if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(v=>v.name===c.name)){var u=this.globalService.globalVar.resources.find(v=>v.name===c.name);if(null!=u)if("Coins"===u.name){if(e.beatMoneyMark){e.addRaceUpdate(e.totalFramesPassed,"You beat the money mark!");var d=1.25,f=this.globalService.globalVar.modifiers.find(v=>"moneyMarkRewardModifier"===v.text);null!=f&&(d=f.value),c.amount=Math.round(c.amount*d)}var h=this.lookupService.getRenown();c.amount+=Math.round(c.amount*(h/100)),c.amount=Math.round(c.amount*i),u.amount+=c.amount}else"Facility Level"===u.name?(u.amount+=c.amount,this.lookupService.recalculateAllAnimalStats()):"Renown"===u.name?u.amount=parseFloat((u.amount+c.amount).toFixed(3)):u.amount+=c.amount}else this.globalService.globalVar.resources.push(new oe(c.name,c.amount,c.itemType))})}checkMoneyMark(e){var i=!1;if(0===this.lookupService.getResourceByName("Money Mark"))return i;var a=this.globalService.globalVar.modifiers.find(s=>"moneyMarkPaceModifier"===s.text);return null==a||e.totalFramesPassed<=this.timeToComplete*this.frameModifier*a.value&&(i=!0),i}getUpdateMessageByRelativeDistance(e,i,r,a){var o=a,s=e*(i/this.frameModifier);return r<.5*s?o="Is "+a+" <strong>even moving?!</strong>":r<.75*s?o=a+" is <strong>falling out of the race!</strong>":r<.9*s?o=a+" is <strong>just a step behind everyone else!</strong>":r>=.9*s&&r<=1.1*s?o=a+" is <strong>right on pace!</strong>":r>=1.5*s?o=a+" <strong>CANNOT be caught!!</strong>":r>=1.25*s?o=a+" is <strong>WAY ahead of the pack!</strong>":r>=1.1*s&&(o=a+" is <strong>barely leading the pack!</strong>"),o}PrepareRacingAnimal(e,i,r,a,o,s){if(e.ability.currentCooldown=e.ability.cooldown,e.ability.remainingLength=0,e.ability.totalUseCount=0,e.getEquippedItemName()===this.globalService.getEquipmentName(Se.pendant)){var l=.9,c=this.globalService.globalVar.modifiers.find(h=>"pendantEquipmentModifier"===h.text);void 0!==c&&(l=c.value),e.ability.currentCooldown*=l}if(e.ability.abilityUsed=!1,e.ability.abilityInUse=!1,null!=e.raceVariables&&(e.raceVariables.ranOutOfStamina=!1,e.raceVariables.burstCount=0,e.raceVariables.metersSinceLostFocus=0),this.globalService.calculateAnimalRacingStats(e),!0!==s){if(null!=i&&i.length>0){var u=i[i.length-1];if("Inspiration"===u.ability.name&&u.type===I.Horse&&null!=a){var d=this.lookupService.GetAbilityEffectiveAmount(u,a.terrain.powerModifier,o);this.AddRelayEffect(e,d,new ee(.25*u.currentStats.maxSpeedMs,0,0,0,0,0),!1),this.globalService.increaseAbilityXp(u)}"Flowing Current"===u.ability.name&&u.type===I.Dolphin&&null!=a&&(d=this.lookupService.GetAbilityEffectiveAmount(u,a.terrain.powerModifier,o),this.AddRelayEffect(e,d,new ee(0,.25*u.currentStats.accelerationMs,0,0,0,0),!1),this.globalService.increaseAbilityXp(u)),void 0!==r&&this.batonEquipmentCheck(u,e,r.distance)}null!=e.raceVariables.relayEffects&&e.raceVariables.relayEffects.length>0&&e.raceVariables.relayEffects.forEach(h=>{h.isMultiplicative?e.currentStats.multiplyCurrentRacingStats(h.relayAffectedStatRatios):e.currentStats.addCurrentRacingStats(h.relayAffectedStatRatios)})}}batonEquipmentCheck(e,i,r){if(e.getEquippedItemName()===this.globalService.getEquipmentName(Se.redBaton)){var a=1.1,o=this.globalService.globalVar.modifiers.find(S=>"redBatonEquipmentModifier"===S.text);void 0!==o&&(a=o.value),this.AddRelayEffect(i,r,new ee(a,1,1,1,1,1),!0)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Se.blueBaton)){var s=1.1,l=this.globalService.globalVar.modifiers.find(S=>"blueBatonEquipmentModifier"===S.text);void 0!==l&&(s=l.value),this.AddRelayEffect(i,r,new ee(1,1,1,1,s,1),!0)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Se.violetBaton)){var c=1.1,u=this.globalService.globalVar.modifiers.find(S=>"violetBatonEquipmentModifier"===S.text);void 0!==u&&(c=u.value),this.AddRelayEffect(i,r,new ee(1,1,1,c,1,1),!0)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Se.greenBaton)){var d=1.1,f=this.globalService.globalVar.modifiers.find(S=>"greenBatonEquipmentModifier"===S.text);void 0!==f&&(d=f.value),this.AddRelayEffect(i,r,new ee(1,1,1,1,1,d),!0)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Se.orangeBaton)){var h=1.1,v=this.globalService.globalVar.modifiers.find(S=>"orangeBatonEquipmentModifier"===S.text);void 0!==v&&(h=v.value),this.AddRelayEffect(i,r,new ee(1,h,1,1,1,1),!0)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Se.yellowBaton)){var b=1.1,C=this.globalService.globalVar.modifiers.find(S=>"yellowBatonEquipmentModifier"===S.text);void 0!==C&&(b=C.value),this.AddRelayEffect(i,r,new ee(1,1,b,1,1,1),!0)}}prepareRacingLeg(e,i){if(e.pathData.forEach(a=>{a.currentStumbleOpportunity=0,a.checkedForBurst=!1,a.checkedForNineTails=!1,a.driftAmount=0,a.didAnimalStumble=!1}),i.getEquippedItemName()===this.globalService.getEquipmentName(Se.blinders)){var r=.5;e.terrain.maxSpeedModifier<1&&(e.terrain.maxSpeedModifier=1-(1-e.terrain.maxSpeedModifier)*r),e.terrain.accelerationModifier<1&&(e.terrain.accelerationModifier=1-(1-e.terrain.accelerationModifier)*r),e.terrain.staminaModifier<1&&(e.terrain.staminaModifier=1-(1-e.terrain.staminaModifier)*r),e.terrain.powerModifier<1&&(e.terrain.powerModifier=1-(1-e.terrain.powerModifier)*r),e.terrain.focusModifier<1&&(e.terrain.focusModifier=1-(1-e.terrain.focusModifier)*r),e.terrain.adaptabilityModifier<1&&(e.terrain.adaptabilityModifier=1-(1-e.terrain.adaptabilityModifier)*r)}}AddRelayEffect(e,i,r,a){var o=new qL;o.remainingRelayMeters=i,o.relayAffectedStatRatios=r,o.isMultiplicative=a,e.raceVariables.relayEffects.push(o)}didAnimalStumble(e,i,r,a,o,s,l,c,u,d){if(e.raceVariables.stumbled||0===i.frequencyOfStumble||e.type===I.Gecko&&"Sticky"===e.ability.name&&e.ability.abilityInUse||e.type===I.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||e.type===I.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;var f=i.length/i.stumbleOpportunities;if(i.currentStumbleOpportunity===i.stumbleOpportunities&&i.routeDesign!==ae.Regular&&e.type===I.Goat&&"Sure-footed"===e.ability.name&&(o.permanentAdaptabilityIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,a.powerModifier,l)/100,this.globalService.increaseAbilityXp(e),i.currentStumbleOpportunity+=1),i.currentStumbleOpportunity*f<r){i.currentStumbleOpportunity+=1;var v=250;if(this.utilityService.getRandomNumber(1,100)<=i.frequencyOfStumble/(v+=s*a.adaptabilityModifier)*i.length){if(e.getEquippedItemName()===this.globalService.getEquipmentName(Se.headband)){var S=3,_=this.globalService.globalVar.modifiers.find(D=>"headbandEquipmentModifier"===D.text);if(void 0!==_&&(S=_.value),e.raceVariables.headbandStumblePreventionCount<S)return e.raceVariables.headbandStumblePreventionCount+=1,d.addRaceUpdate(c,u+"'s headband prevents them from stumbling."),!1}return i.didAnimalStumble=!0,!0}}return!1}didAnimalLoseFocus(e,i,r,a,o,s,l,c,u,d){if(e.raceVariables.lostFocus||e.type===I.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(this.currentLostFocusOpportunity*(r/i)<a){this.currentLostFocusOpportunity+=1;var v=this.globalService.globalVar.modifiers.find(D=>"focusModifier"===D.text),b=d*o.focusModifier*(void 0===v?.75:v.value);if(e.raceVariables.metersSinceLostFocus<b)return!1;var S=(e.raceVariables.metersSinceLostFocus-b)/e.currentStats.focusMs*100;return this.utilityService.getRandomNumber(1,100)<=S&&(u.didAnimalLoseFocus=!0),!0}return!1}increasePersistentAbilityXp(e){(e.type===I.Cheetah&&"Giving Chase"===e.ability.name||e.type===I.Hare&&"Prey Instinct"===e.ability.name||e.type===I.Hare&&"Nap"===e.ability.name||e.type===I.Goat&&"In The Rhythm"===e.ability.name||e.type===I.Gecko&&"Camouflage"===e.ability.name||e.type===I.Dolphin&&"Navigator"===e.ability.name||e.type===I.Shark&&"Feeding Frenzy"===e.ability.name||e.type===I.Shark&&"Blood In The Water"===e.ability.name||e.type===I.Octopus&&"Buried Treasure"===e.ability.name||e.type===I.Penguin&&"Wild Toboggan"===e.ability.name||e.type===I.Fox&&"Fleeting Speed"===e.ability.name)&&this.globalService.increaseAbilityXp(e,5)}abilityRedundancyCheck(e,i,r,a,o,s){return!(e.ability.oneTimeEffect&&e.ability.abilityUsed||"Second Wind"===e.ability.name&&e.type===I.Horse&&e.raceVariables.recoveringStamina||"Pacemaker"===e.ability.name&&e.type===I.Horse&&i===e.currentStats.maxSpeedMs)&&(!("Leap"===e.ability.name&&e.type===I.Monkey&&this.lookupService.GetAbilityEffectiveAmount(e,a.terrain.powerModifier,s)<o)&&!("Sticky"===e.ability.name&&e.type===I.Gecko&&0===r.frequencyOfStumble))}useAbility(e,i,r,a,o,s,l){if(e.ability.abilityUsed=!0,e.type===I.Horse&&("Second Wind"===e.ability.name||"Pacemaker"===e.ability.name)&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===I.Cheetah&&"Sprint"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===I.Hare&&"Awareness"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===I.Monkey){if("Landslide"===e.ability.name){var c=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a);this.timeToComplete+=c/(i.length/this.timeToComplete),this.globalService.increaseAbilityXp(e)}"Leap"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e))}if(e.type===I.Gecko&&"Sticky"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===I.Dolphin&&"Echolocation"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===I.Octopus&&"Propulsion"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e)),e.type===I.Penguin&&"Careful Toboggan"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===I.Caribou&&"Great Migration"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===I.Salamander){if("Cold Blooded"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a);var d=s/r.distance;d>.5&&(d=.5-(d-.5)),e.currentStats.stamina+=o*d,e.currentStats.stamina>o&&(e.currentStats.stamina=o),l.coldBloodedIncreaseMultiplier=1+d}"Burrow"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),"Heat Up"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e))}if(e.type===I.Fox&&"Trickster"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e);var f=this.utilityService.getRandomInteger(1,6);1===f&&(e.ability.tricksterStatLoss="Acceleration"),2===f&&(e.ability.tricksterStatLoss="Max Speed"),3===f&&(e.ability.tricksterStatLoss="Adaptability"),4===f&&(e.ability.tricksterStatLoss="Focus"),5===f&&(e.ability.tricksterStatLoss="Stamina",e.currentStats.stamina-=.2*o,e.currentStats.stamina<0&&(e.currentStats.stamina=0)),6===f&&(e.ability.tricksterStatLoss="Power");var h=this.utilityService.getRandomInteger(1,6);h===f&&(h+=1)>6&&(h=1),1===h&&(e.ability.tricksterStatGain="Acceleration"),2===h&&(e.ability.tricksterStatGain="Max Speed"),3===h&&(e.ability.tricksterStatGain="Adaptability"),4===h&&(e.ability.tricksterStatGain="Focus"),5===h&&(e.ability.tricksterStatGain="Stamina",e.currentStats.stamina+=.4*o,e.currentStats.stamina>o&&(e.currentStats.stamina=o)),6===h&&(e.ability.tricksterStatGain="Power"),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a)}}checkForNineTailsBuff(e,i,r,a,o,s,l,c){if(!e.checkedForNineTails){e.checkedForNineTails=!0;var u=this.utilityService.getRandomInteger(1,4),d=new F;d.value=l,1===u?(i.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Acceleration)"),s.raceUpdates.push(d)):2===u?(i.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Max Speed)"),s.raceUpdates.push(d)):3===u?(i.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Adaptability)"),s.raceUpdates.push(d)):4===u&&(i.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Focus)"),s.raceUpdates.push(d)),this.globalService.increaseAbilityXp(r)}}getNineTailsBuffCount(e,i){return i.filter(r=>r[0]===e).length}getModifiedAdaptability(e,i,r,a,o,s,l,c){var u=e.currentStats.adaptabilityMs*r;return e.type===I.Dolphin&&"Echolocation"===e.ability.name&&e.ability.abilityInUse&&(u*=1.25),e.type===I.Goat&&"Sure-footed"===e.ability.name&&(u*=i.permanentAdaptabilityIncreaseMultiplier),e.type===I.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(u*=1.25),e.type===I.Penguin&&"Careful Toboggan"===e.ability.name&&e.ability.abilityInUse&&(u*=1.4),e.type===I.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(u*=.8),e.type===I.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(u*=1.4),e.type===I.Fox&&"Nine Tails"===e.ability.name&&(u*=1+.1*this.getNineTailsBuffCount("Adaptability",a)),null!==l&&void 0!==c&&"Navigator"===l.ability.name&&l.type===I.Dolphin&&o.distance-s<=this.lookupService.GetAbilityEffectiveAmount(l,c.terrain.powerModifier,r)&&(u+=.25*l.currentStats.adaptabilityMs,l.ability.abilityInUse=!0),u}getModifiedFocus(e,i,r,a){var o=e.currentStats.focusMs*i;return e.type===I.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(o*=1.25),e.type===I.Hare&&"Nap"===e.ability.name&&(o*=2),e.type===I.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(o*=.8),e.type===I.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(o*=1.4),e.type===I.Fox&&"Nine Tails"===e.ability.name&&(o*=1+.1*this.getNineTailsBuffCount("Focus",r)),e.type===I.Salamander&&"Cold Blooded"===e.ability.name&&e.ability.abilityInUse&&(o*=a.coldBloodedIncreaseMultiplier),o}handleTundraDrift(e,i,r,a,o,s,l,c,u,d,f,h,v){var b=!1;if(!i.checkedForDrift){i.checkedForDrift=!0;var C=80,S=-80;if((i.routeDesign===ae.Cavern||r.routeDesign===ae.Cavern)&&(C=60,S=-60),e.raceVariables.icyCurrentYAmount>=C||e.raceVariables.icyCurrentYAmount<=S||a)return(e.raceVariables.icyCurrentYAmount>=C||e.raceVariables.icyCurrentYAmount<=S)&&(b=!0),i.driftAmount=-e.raceVariables.icyCurrentYAmount,e.raceVariables.icyCurrentYAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,b;var _=this.utilityService.getRandomNumber(1,100),D=1e3,A=i.frequencyOfDrift/(D+=o*s.adaptabilityModifier)*i.length;if(_<=A){i.didAnimalStumble=!0;var y=this.utilityService.getRandomInteger(1,2);e.raceVariables.icyCurrentDirectionUp=1===y;var Y=A-_,G=20,H=this.globalService.globalVar.modifiers.find(X=>"maxDriftAmountModifier"===X.text);void 0!==H&&(G=H.value),"Wild Toboggan"===e.ability.name&&e.type===I.Penguin&&(G*=2,e.ability.abilityInUse=!0),"Quick Toboggan"===e.ability.name&&e.type===I.Penguin&&(e.ability.abilityInUse=!1),Y>G&&(Y=G),e.raceVariables.icyCurrentDirectionUp?e.raceVariables.icyCurrentYAmount-=Y:e.raceVariables.icyCurrentYAmount+=Y,e.raceVariables.icyCurrentYAmount>=C&&(e.raceVariables.icyCurrentYAmount=C),e.raceVariables.icyCurrentYAmount<=S&&(e.raceVariables.icyCurrentYAmount=S),i.driftAmount=e.raceVariables.icyCurrentDirectionUp?-Y:Y,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount}else i.driftAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,"Quick Toboggan"===e.ability.name&&e.type===I.Penguin&&(f.addRaceUpdate(v,h+" slides through without drifting, gaining speed."),this.globalService.increaseAbilityXp(e),d.permanentMaxSpeedIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,s.powerModifier,u)/100,e.ability.abilityInUse=!0);return b}}handleLavaFall(e,i,r,a,o,s,l,c){for(var u=!1,d=i/this.frameModifier,f=o/r,h=[.4,.45,.5,.55,.6],v=[],b=0;b<h.length;b++){var C=f*h[b],S=d/C;S>1&&(S=1),v.push(S);var _=a>h[b]*o,D=_!=c[b];c[b]=_,d>=C&&D&&(e.type===I.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||(s.addRaceUpdate(l,"Lava spills out onto the course, forcing you to evacuate."),u=!0))}return this.selectedRace.raceUI.lavaFallPercentByFrame.push(v),u}}return t.\u0275fac=function(e){return new(e||t)(Q(Ze),Q(Cn),Q(qr),Q(Kg))},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var wn=(()=>{return(t=wn||(wn={}))[t.barn=0]="barn",t[t.raceselection=1]="raceselection",t[t.animals=2]="animals",t[t.decks=3]="decks",t[t.shop=4]="shop",t[t.incubator=5]="incubator",t[t.talents=6]="talents",t[t.resources=7]="resources",t[t.faqs=8]="faqs",t[t.stats=9]="stats",t[t.settings=10]="settings",wn;var t})();let Ts=(()=>{class t{constructor(){this.switchView=new yn(wn.barn),this.selectAnimalView=new yn(new Wt),this.selectBarnView=new yn(0)}setNewView(e){this.switchView.next(e)}getNewView(){return this.switchView.asObservable()}setAnimalView(e,i){this.selectAnimalView.next(i),this.switchView.next(e)}getAnimalView(){return this.selectAnimalView.asObservable()}setBarnView(e,i){this.selectBarnView.next(i),this.switchView.next(e)}getBarnView(){return this.selectBarnView.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class YL{}let OS=(()=>{class t{constructor(e){this.globalService=e}skipTutorial(){this.globalService.globalVar.tutorialCompleted=!0,this.globalService.globalVar.currentTutorialId=9}getTutorialState(e){var i=new YL;return i.id=e,1===e&&(i.tutorialText="<b>Welcome to Cultura!</b> \n\n Cultura is the name of your soon to be state of the art animal racing facility. Train and nurture your animal companions and rise through the ranks by winning circuit competitions. Mix and match different racing teams and abilities to rise as far as you can!\n\nLet's take a tour. From this page, you can select a barn where you can assign and train animals. Currently, you have a fine racing horse already set up in your first barn. Select it and let's get to work. \n\n <b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=wn.barn),2===e&&(i.tutorialText="You gotta train your animals if you want them to win. There are only a few training options to choose from now, but as you grow you will find better and faster ways to improve. Each training will develop your animals in specific ways, improving the following stats:\n\nSpeed: Increase the max speed your animal can run in a race.\nAcceleration: Increase how quickly your animal gains speed.\nEndurance: Increase the distance your animal can run before tiring out and slowing down.\nPower: Increase the efficiency of your unique ability.\nFocus: Increase the distance your animal can run before losing focus and stopping abruptly.\nAdaptability: Increase the likelihood your animal won't stumble when racing through unique paths.\n\n<b>Select a training option out of the ones outlined in red.</b>",i.associatedTab=wn.barn),3===e&&(i.tutorialText="Here you can get a breakdown on the status of your animals. Here's your horse along with all of the stat information we just went over. If you need a refresher, hover over any of the stats to see what they do. Check back here often as you proceed to assign new abilities and items to your animals, as well as breeding them to gain even faster offspring.\n\nNow that your horse has had time to take a few practice laps, let's see if they have what it takes to win a race!\n\n<b>Select the 'Race' option on the right bordered in red.</b>",i.associatedTab=wn.animals),4===e&&(i.tutorialText="You've got a few options here. Circuit races are all about deciding where you stand against the competition. If you win all of the circuit races for your rank, you'll move up into the next rank which may net you some nifty rewards and open up new opportunities for your facility. You can also check out the local scene and see what other options you have. That might be a good way to get your name out there and improve your renown or maybe find some stuff you couldn't find anywhere else.\n\nFor now, let's see if you can make it up to the next circuit rank. It's a nice sunny day today and that might impact how your racer runs. If you hover over a race, you'll see how the terrain or weather might impact the conditions of the race. When in doubt, hovering over an item usually gives you the information you need. Whenever you're ready, start the race. Good luck!\n\n<b>Select the race option outlined in red.</b>",i.associatedTab=wn.raceselection),5===e&&(i.tutorialText="Way to go! Exciting stuff there. Looks like you've got the gist of it for now. Keep racing, make some money, and build up your facility to be as great as it can be. I'll check in with you again a little later. I look forward to seeing how far you can go!",i.associatedTab=wn.raceselection),6===e&&(i.tutorialText="Nice, you've unlocked another racer! If you jump straight into a race with your untrained monkey, things probably aren't going to go well. As you race, you'll start making enough money to build more barns and train your animals simultaneously. For now, let's go back to the barn you have.\n\n<b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=wn.raceselection),7===e&&(i.tutorialText="From here you can unassign an animal from a barn and bring a new animal in. As you start to branch out and race in different course types, you'll want to try and keep your team well balanced. It's not going to help you if you have a prized thoroughbred torching the competition if your follow up racer can barely make it out the gate.\n\nLet's start training your monkey now.\n\n<b>Select 'Unassign' at the top of the screen and choose 'Monkey' to train.</b>",i.associatedTab=wn.barn),8===e&&(i.tutorialText="Nicely done. One last thing to talk about before I let you do whatever you want. Click your animal's name to take a shortcut to the animal page and let's talk about breeding. If you haven't named your animal, its type is its name (so for example, Monkey's name is Monkey).\n\n<b>Select your animal's type or name to jump to its page.</b>",i.associatedTab=wn.barn),9===e&&(i.tutorialText="Here you can see how close your animal is to being able to breed. Training and racing both contribute to this. Once you're ready, you can breed your animal and start racing the offspring. There's a strategic element to this. After breeding, your animal will have its stats set back to their starting points, but the amount that the base stats contribute to the racing stats will increase. To keep up with the competition, you'll need to keep breeding and getting faster animals. But don't breed right before a big race or you might find yourself in trouble!\n\nThat's all I have for you. Good luck and have fun!",i.associatedTab=wn.animals,this.globalService.globalVar.tutorialCompleted=!0),i}openTutorialModal(){}}return t.\u0275fac=function(e){return new(e||t)(Q(Ze))},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const XL=["addListener","removeListener"],QL=["addEventListener","removeEventListener"],ZL=["on","off"];function wi(t,n,e,i){if(ue(e)&&(i=e,e=void 0),i)return wi(t,n,e).pipe(Kp(i));const[r,a]=function eB(t){return ue(t.addEventListener)&&ue(t.removeEventListener)}(t)?QL.map(o=>s=>t[o](n,s,e)):function JL(t){return ue(t.addListener)&&ue(t.removeListener)}(t)?XL.map(xS(t,n)):function KL(t){return ue(t.on)&&ue(t.off)}(t)?ZL.map(xS(t,n)):[];if(!r&&qd(t))return pn(o=>wi(o,n,e))(ni(t));if(!r)throw new TypeError("Invalid event target");return new Xe(o=>{const s=(...l)=>o.next(1<l.length?l:l[0]);return r(s),()=>a(s)})}function xS(t,n){return e=>i=>t[e](n,i)}class tB extends He{constructor(n,e){super()}schedule(n,e=0){return this}}const Cd={setInterval(...t){const{delegate:n}=Cd;return((null==n?void 0:n.setInterval)||setInterval)(...t)},clearInterval(t){const{delegate:n}=Cd;return((null==n?void 0:n.clearInterval)||clearInterval)(t)},delegate:void 0},FS={now:()=>(FS.delegate||Date).now(),delegate:void 0};class Zl{constructor(n,e=Zl.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}Zl.now=FS.now;const VS=new class iB extends Zl{constructor(n,e=Zl.now){super(n,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}(class nB extends tB{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(n,e,i=0){return Cd.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;Cd.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(a){i=!0,r=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Un(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),rB=VS;function im(t=0,n,e=rB){let i=-1;return null!=n&&(av(n)?e=n:i=n),new Xe(r=>{let a=function aB(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},a)})}const{isArray:oB}=Array;function LS(t){return 1===t.length&&oB(t[0])?t[0]:t}function BS(...t){return 1===(t=LS(t)).length?ni(t[0]):new Xe(function sB(t){return n=>{let e=[];for(let i=0;e&&!n.closed&&i<t.length;i++)e.push(ni(t[i]).subscribe(jt(n,r=>{if(e){for(let a=0;a<e.length;a++)a!==i&&e[a].unsubscribe();e=null}n.next(r)})))}}(t))}function wd(...t){const n=mc(t),e=LS(t);return e.length?new Xe(i=>{let r=e.map(()=>[]),a=e.map(()=>!1);i.add(()=>{r=a=null});for(let o=0;!i.closed&&o<e.length;o++)ni(e[o]).subscribe(jt(i,s=>{if(r[o].push(s),r.every(l=>l.length)){const l=r.map(c=>c.shift());i.next(n?n(...l):l),r.some((c,u)=>!c.length&&a[u])&&i.complete()}},()=>{a[o]=!0,!r[o].length&&i.complete()}));return()=>{r=a=null}}):ur}function Vn(t){return hn((n,e)=>{ni(t).subscribe(jt(e,()=>e.complete(),B)),!e.closed&&n.subscribe(e)})}function am(...t){const n=mc(t);return hn((e,i)=>{const r=t.length,a=new Array(r);let o=t.map(()=>!1),s=!1;for(let l=0;l<r;l++)ni(t[l]).subscribe(jt(i,c=>{a[l]=c,!s&&!o[l]&&(o[l]=!0,(s=o.every(Dn))&&(o=null))},B));e.subscribe(jt(i,l=>{if(s){const c=[l,...a];i.next(n?n(...c):c)}}))})}function HS(t,n){return n?e=>Fl(n.pipe(Gn(1),function uB(){return hn((t,n)=>{t.subscribe(jt(n,B))})}()),e.pipe(HS(t))):pn((e,i)=>t(e,i).pipe(Gn(1),function dB(t){return We(()=>t)}(e)))}function GS(t,n=VS){const e=im(t,n);return HS(()=>e)}new Xe(B);var hB={left:"right",right:"left",bottom:"top",top:"bottom"};function Sd(t){return t.replace(/left|right|bottom|top/g,function(n){return hB[n]})}function Yr(t){return t.split("-")[0]}var pB={start:"end",end:"start"};function jS(t){return t.replace(/start|end/g,function(n){return pB[n]})}var Wi="top",Mr="bottom",Ar="right",qi="left",om="auto",Jl=[Wi,Mr,Ar,qi],Ds="start",Kl="end",$S="viewport",ec="popper",zS=Jl.reduce(function(t,n){return t.concat([n+"-"+Ds,n+"-"+Kl])},[]),WS=[].concat(Jl,[om]).reduce(function(t,n){return t.concat([n,n+"-"+Ds,n+"-"+Kl])},[]),MB=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Rr(t){if(null==t)return window;if("[object Window]"!==t.toString()){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function Ms(t){return t instanceof Rr(t).Element||t instanceof Element}function lr(t){return t instanceof Rr(t).HTMLElement||t instanceof HTMLElement}function qS(t){return"undefined"!=typeof ShadowRoot&&(t instanceof Rr(t).ShadowRoot||t instanceof ShadowRoot)}function xa(t){return((Ms(t)?t.ownerDocument:t.document)||window.document).documentElement}var ho=Math.max,Td=Math.min,As=Math.round;function Rs(t,n){void 0===n&&(n=!1);var e=t.getBoundingClientRect(),i=1,r=1;if(lr(t)&&n){var a=t.offsetHeight,o=t.offsetWidth;o>0&&(i=As(e.width)/o||1),a>0&&(r=As(e.height)/a||1)}return{width:e.width/i,height:e.height/r,top:e.top/r,right:e.right/i,bottom:e.bottom/r,left:e.left/i,x:e.left/i,y:e.top/r}}function sm(t){var n=Rr(t);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function lm(t){return Rs(xa(t)).left+sm(t).scrollLeft}function ga(t){return Rr(t).getComputedStyle(t)}function Xr(t){return t?(t.nodeName||"").toLowerCase():null}function Dd(t){return"html"===Xr(t)?t:t.assignedSlot||t.parentNode||(qS(t)?t.host:null)||xa(t)}function cm(t){var n=ga(t);return/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX)}function YS(t){return["html","body","#document"].indexOf(Xr(t))>=0?t.ownerDocument.body:lr(t)&&cm(t)?t:YS(Dd(t))}function tc(t,n){var e;void 0===n&&(n=[]);var i=YS(t),r=i===(null==(e=t.ownerDocument)?void 0:e.body),a=Rr(i),o=r?[a].concat(a.visualViewport||[],cm(i)?i:[]):i,s=n.concat(o);return r?s:s.concat(tc(Dd(o)))}function EB(t){return["table","td","th"].indexOf(Xr(t))>=0}function XS(t){return lr(t)&&"fixed"!==ga(t).position?t.offsetParent:null}function nc(t){for(var n=Rr(t),e=XS(t);e&&EB(e)&&"static"===ga(e).position;)e=XS(e);return e&&("html"===Xr(e)||"body"===Xr(e)&&"static"===ga(e).position)?n:e||function kB(t){var n=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&lr(t)&&"fixed"===ga(t).position)return null;for(var r=Dd(t);lr(r)&&["html","body"].indexOf(Xr(r))<0;){var a=ga(r);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||n&&"filter"===a.willChange||n&&a.filter&&"none"!==a.filter)return r;r=r.parentNode}return null}(t)||n}function QS(t,n){var e=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(e&&qS(e)){var i=n;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function um(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ZS(t,n){return n===$S?um(function AB(t){var n=Rr(t),e=xa(t),i=n.visualViewport,r=e.clientWidth,a=e.clientHeight,o=0,s=0;return i&&(r=i.width,a=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,s=i.offsetTop)),{width:r,height:a,x:o+lm(t),y:s}}(t)):Ms(n)?function NB(t){var n=Rs(t);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(n):um(function RB(t){var n,e=xa(t),i=sm(t),r=null==(n=t.ownerDocument)?void 0:n.body,a=ho(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=ho(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+lm(t),l=-i.scrollTop;return"rtl"===ga(r||e).direction&&(s+=ho(e.clientWidth,r?r.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(xa(t)))}function Es(t){return t.split("-")[1]}function dm(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function JS(t){var l,n=t.reference,e=t.element,i=t.placement,r=i?Yr(i):null,a=i?Es(i):null,o=n.x+n.width/2-e.width/2,s=n.y+n.height/2-e.height/2;switch(r){case Wi:l={x:o,y:n.y-e.height};break;case Mr:l={x:o,y:n.y+n.height};break;case Ar:l={x:n.x+n.width,y:s};break;case qi:l={x:n.x-e.width,y:s};break;default:l={x:n.x,y:n.y}}var c=r?dm(r):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case Ds:l[c]=l[c]-(n[u]/2-e[u]/2);break;case Kl:l[c]=l[c]+(n[u]/2-e[u]/2)}}return l}function eT(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function tT(t,n){return n.reduce(function(e,i){return e[i]=t,e},{})}function fm(t,n){void 0===n&&(n={});var i=n.placement,r=void 0===i?t.placement:i,a=n.boundary,o=void 0===a?"clippingParents":a,s=n.rootBoundary,l=void 0===s?$S:s,c=n.elementContext,u=void 0===c?ec:c,d=n.altBoundary,f=void 0!==d&&d,h=n.padding,v=void 0===h?0:h,b=eT("number"!=typeof v?v:tT(v,Jl)),S=t.rects.popper,_=t.elements[f?u===ec?"reference":ec:u],D=function PB(t,n,e){var i="clippingParents"===n?function IB(t){var n=tc(Dd(t)),i=["absolute","fixed"].indexOf(ga(t).position)>=0&&lr(t)?nc(t):t;return Ms(i)?n.filter(function(r){return Ms(r)&&QS(r,i)&&"body"!==Xr(r)}):[]}(t):[].concat(n),r=[].concat(i,[e]),o=r.reduce(function(s,l){var c=ZS(t,l);return s.top=ho(c.top,s.top),s.right=Td(c.right,s.right),s.bottom=Td(c.bottom,s.bottom),s.left=ho(c.left,s.left),s},ZS(t,r[0]));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(Ms(_)?_:_.contextElement||xa(t.elements.popper),o,l),E=Rs(t.elements.reference),A=JS({reference:E,element:S,strategy:"absolute",placement:r}),y=um(Object.assign({},S,A)),Y=u===ec?y:E,G={top:D.top-Y.top+b.top,bottom:Y.bottom-D.bottom+b.bottom,left:D.left-Y.left+b.left,right:Y.right-D.right+b.right},H=t.modifiersData.offset;if(u===ec&&H){var X=H[r];Object.keys(G).forEach(function(Z){var te=[Ar,Mr].indexOf(Z)>=0?1:-1,Je=[Wi,Mr].indexOf(Z)>=0?"y":"x";G[Z]+=X[Je]*te})}return G}const VB={name:"flip",enabled:!0,phase:"main",fn:function FB(t){var n=t.state,e=t.options,i=t.name;if(!n.modifiersData[i]._skip){for(var r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0===o||o,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,f=e.altBoundary,h=e.flipVariations,v=void 0===h||h,b=e.allowedAutoPlacements,C=n.options.placement,S=Yr(C),D=l||(S!==C&&v?function xB(t){if(Yr(t)===om)return[];var n=Sd(t);return[jS(t),n,jS(n)]}(C):[Sd(C)]),E=[C].concat(D).reduce(function(vt,Lt){return vt.concat(Yr(Lt)===om?function OB(t,n){void 0===n&&(n={});var r=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?WS:l,u=Es(n.placement),d=u?s?zS:zS.filter(function(v){return Es(v)===u}):Jl,f=d.filter(function(v){return c.indexOf(v)>=0});0===f.length&&(f=d);var h=f.reduce(function(v,b){return v[b]=fm(t,{placement:b,boundary:r,rootBoundary:a,padding:o})[Yr(b)],v},{});return Object.keys(h).sort(function(v,b){return h[v]-h[b]})}(n,{placement:Lt,boundary:u,rootBoundary:d,padding:c,flipVariations:v,allowedAutoPlacements:b}):Lt)},[]),A=n.rects.reference,y=n.rects.popper,Y=new Map,G=!0,H=E[0],X=0;X<E.length;X++){var Z=E[X],te=Yr(Z),Je=Es(Z)===Ds,ke=[Wi,Mr].indexOf(te)>=0,at=ke?"width":"height",_e=fm(n,{placement:Z,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),he=ke?Je?Ar:qi:Je?Mr:Wi;A[at]>y[at]&&(he=Sd(he));var it=Sd(he),Ht=[];if(a&&Ht.push(_e[te]<=0),s&&Ht.push(_e[he]<=0,_e[it]<=0),Ht.every(function(vt){return vt})){H=Z,G=!1;break}Y.set(Z,Ht)}if(G)for(var ln=function(Lt){var wt=E.find(function(st){var ye=Y.get(st);if(ye)return ye.slice(0,Lt).every(function(ut){return ut})});if(wt)return H=wt,"break"},Ke=v?3:1;Ke>0&&"break"!==ln(Ke);Ke--);n.placement!==H&&(n.modifiersData[i]._skip=!0,n.placement=H,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ic(t,n,e){return ho(t,Td(n,e))}function hm(t){var n=Rs(t),e=t.offsetWidth,i=t.offsetHeight;return Math.abs(n.width-e)<=1&&(e=n.width),Math.abs(n.height-i)<=1&&(i=n.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:i}}const HB={name:"preventOverflow",enabled:!0,phase:"main",fn:function UB(t){var n=t.state,e=t.options,i=t.name,r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0!==o&&o,f=e.tether,h=void 0===f||f,v=e.tetherOffset,b=void 0===v?0:v,C=fm(n,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),S=Yr(n.placement),_=Es(n.placement),D=!_,E=dm(S),A=function LB(t){return"x"===t?"y":"x"}(E),y=n.modifiersData.popperOffsets,Y=n.rects.reference,G=n.rects.popper,H="function"==typeof b?b(Object.assign({},n.rects,{placement:n.placement})):b,X="number"==typeof H?{mainAxis:H,altAxis:H}:Object.assign({mainAxis:0,altAxis:0},H),Z=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,te={x:0,y:0};if(y){if(a){var Je,ke="y"===E?Wi:qi,at="y"===E?Mr:Ar,_e="y"===E?"height":"width",he=y[E],it=he+C[ke],Ht=he-C[at],ot=h?-G[_e]/2:0,ln=_===Ds?Y[_e]:G[_e],Ke=_===Ds?-G[_e]:-Y[_e],ct=n.elements.arrow,vt=h&&ct?hm(ct):{width:0,height:0},Lt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},wt=Lt[ke],st=Lt[at],ye=ic(0,Y[_e],vt[_e]),ut=D?Y[_e]/2-ot-ye-wt-X.mainAxis:ln-ye-wt-X.mainAxis,zn=D?-Y[_e]/2+ot+ye+st+X.mainAxis:Ke+ye+st+X.mainAxis,cn=n.elements.arrow&&nc(n.elements.arrow),Nn=null!=(Je=null==Z?void 0:Z[E])?Je:0,ui=he+zn-Nn,Sn=ic(h?Td(it,he+ut-Nn-(cn?"y"===E?cn.clientTop||0:cn.clientLeft||0:0)):it,he,h?ho(Ht,ui):Ht);y[E]=Sn,te[E]=Sn-he}if(s){var tn,St=y[A],se="y"===A?"height":"width",me=St+C["x"===E?Wi:qi],di=St-C["x"===E?Mr:Ar],Jr=-1!==[Wi,qi].indexOf(S),dt=null!=(tn=null==Z?void 0:Z[A])?tn:0,Bn=Jr?me:St-Y[se]-G[se]-dt+X.altAxis,un=Jr?St+Y[se]+G[se]-dt-X.altAxis:di,cr=h&&Jr?function BB(t,n,e){var i=ic(t,n,e);return i>e?e:i}(Bn,St,un):ic(h?Bn:me,St,h?un:di);y[A]=cr,te[A]=cr-St}n.modifiersData[i]=te}},requiresIfExists:["offset"]},zB={name:"arrow",enabled:!0,phase:"main",fn:function jB(t){var n,e=t.state,i=t.name,r=t.options,a=e.elements.arrow,o=e.modifiersData.popperOffsets,s=Yr(e.placement),l=dm(s),u=[qi,Ar].indexOf(s)>=0?"height":"width";if(a&&o){var d=function(n,e){return eT("number"!=typeof(n="function"==typeof n?n(Object.assign({},e.rects,{placement:e.placement})):n)?n:tT(n,Jl))}(r.padding,e),f=hm(a),h="y"===l?Wi:qi,v="y"===l?Mr:Ar,b=e.rects.reference[u]+e.rects.reference[l]-o[l]-e.rects.popper[u],C=o[l]-e.rects.reference[l],S=nc(a),_=S?"y"===l?S.clientHeight||0:S.clientWidth||0:0,y=_/2-f[u]/2+(b/2-C/2),Y=ic(d[h],y,_-f[u]-d[v]);e.modifiersData[i]=((n={})[l]=Y,n.centerOffset=Y-y,n)}},effect:function $B(t){var n=t.state,i=t.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=n.elements.popper.querySelector(r))||!QS(n.elements.popper,r)||(n.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function XB(t,n,e){void 0===e&&(e=!1);var i=lr(n),r=lr(n)&&function YB(t){var n=t.getBoundingClientRect(),e=As(n.width)/t.offsetWidth||1,i=As(n.height)/t.offsetHeight||1;return 1!==e||1!==i}(n),a=xa(n),o=Rs(t,r),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&(("body"!==Xr(n)||cm(a))&&(s=function qB(t){return t!==Rr(t)&&lr(t)?function WB(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):sm(t)}(n)),lr(n)?((l=Rs(n,!0)).x+=n.clientLeft,l.y+=n.clientTop):a&&(l.x=lm(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function QB(t){var n=new Map,e=new Set,i=[];function r(a){e.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(s){if(!e.has(s)){var l=n.get(s);l&&r(l)}}),i.push(a)}return t.forEach(function(a){n.set(a.name,a)}),t.forEach(function(a){e.has(a.name)||r(a)}),i}function JB(t){var n;return function(){return n||(n=new Promise(function(e){Promise.resolve().then(function(){n=void 0,e(t())})})),n}}var nT={placement:"bottom",modifiers:[],strategy:"absolute"};function iT(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return!n.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function e3(t){void 0===t&&(t={});var e=t.defaultModifiers,i=void 0===e?[]:e,r=t.defaultOptions,a=void 0===r?nT:r;return function(s,l,c){void 0===c&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},nT,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(S){var _="function"==typeof S?S(u.options):S;b(),u.options=Object.assign({},a,u.options,_),u.scrollParents={reference:Ms(s)?tc(s):s.contextElement?tc(s.contextElement):[],popper:tc(l)};var D=function ZB(t){var n=QB(t);return MB.reduce(function(e,i){return e.concat(n.filter(function(r){return r.phase===i}))},[])}(function KB(t){var n=t.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(n).map(function(e){return n[e]})}([].concat(i,u.options.modifiers)));return u.orderedModifiers=D.filter(function(Z){return Z.enabled}),function v(){u.orderedModifiers.forEach(function(C){var _=C.options,E=C.effect;if("function"==typeof E){var A=E({state:u,name:C.name,instance:h,options:void 0===_?{}:_});d.push(A||function(){})}})}(),h.update()},forceUpdate:function(){if(!f){var S=u.elements,_=S.reference,D=S.popper;if(iT(_,D)){u.rects={reference:XB(_,nc(D),"fixed"===u.options.strategy),popper:hm(D)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(Z){return u.modifiersData[Z.name]=Object.assign({},Z.data)});for(var A=0;A<u.orderedModifiers.length;A++)if(!0!==u.reset){var y=u.orderedModifiers[A],Y=y.fn,G=y.options;"function"==typeof Y&&(u=Y({state:u,options:void 0===G?{}:G,name:y.name,instance:h})||u)}else u.reset=!1,A=-1}}},update:JB(function(){return new Promise(function(C){h.forceUpdate(),C(u)})}),destroy:function(){b(),f=!0}};if(!iT(s,l))return h;function b(){d.forEach(function(C){return C()}),d=[]}return h.setOptions(c).then(function(C){!f&&c.onFirstUpdate&&c.onFirstUpdate(C)}),h}}var Md={passive:!0},o3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function rT(t){var n,e=t.popper,i=t.popperRect,r=t.placement,a=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=o.x,h=void 0===f?0:f,v=o.y,b=void 0===v?0:v,C="function"==typeof u?u({x:h,y:b}):{x:h,y:b};h=C.x,b=C.y;var S=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),D=qi,E=Wi,A=window;if(c){var y=nc(e),Y="clientHeight",G="clientWidth";y===Rr(e)&&"static"!==ga(y=xa(e)).position&&"absolute"===s&&(Y="scrollHeight",G="scrollWidth"),y=y,(r===Wi||(r===qi||r===Ar)&&a===Kl)&&(E=Mr,b-=(d&&A.visualViewport?A.visualViewport.height:y[Y])-i.height,b*=l?1:-1),r!==qi&&(r!==Wi&&r!==Mr||a!==Kl)||(D=Ar,h-=(d&&A.visualViewport?A.visualViewport.width:y[G])-i.width,h*=l?1:-1)}var Je,Z=Object.assign({position:s},c&&o3),te=!0===u?function s3(t){var e=t.y,r=window.devicePixelRatio||1;return{x:As(t.x*r)/r||0,y:As(e*r)/r||0}}({x:h,y:b}):{x:h,y:b};return h=te.x,b=te.y,Object.assign({},Z,l?((Je={})[E]=_?"0":"",Je[D]=S?"0":"",Je.transform=(A.devicePixelRatio||1)<=1?"translate("+h+"px, "+b+"px)":"translate3d("+h+"px, "+b+"px, 0)",Je):((n={})[E]=_?b+"px":"",n[D]=S?h+"px":"",n.transform="",n))}var h3=e3({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function t3(t){var n=t.state,e=t.instance,i=t.options,r=i.scroll,a=void 0===r||r,o=i.resize,s=void 0===o||o,l=Rr(n.elements.popper),c=[].concat(n.scrollParents.reference,n.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",e.update,Md)}),s&&l.addEventListener("resize",e.update,Md),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",e.update,Md)}),s&&l.removeEventListener("resize",e.update,Md)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function r3(t){var n=t.state;n.modifiersData[t.name]=JS({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function l3(t){var n=t.state,e=t.options,i=e.gpuAcceleration,r=void 0===i||i,a=e.adaptive,o=void 0===a||a,s=e.roundOffsets,l=void 0===s||s,u={placement:Yr(n.placement),variation:Es(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:r,isFixed:"fixed"===n.options.strategy};null!=n.modifiersData.popperOffsets&&(n.styles.popper=Object.assign({},n.styles.popper,rT(Object.assign({},u,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:o,roundOffsets:l})))),null!=n.modifiersData.arrow&&(n.styles.arrow=Object.assign({},n.styles.arrow,rT(Object.assign({},u,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function u3(t){var n=t.state;Object.keys(n.elements).forEach(function(e){var i=n.styles[e]||{},r=n.attributes[e]||{},a=n.elements[e];!lr(a)||!Xr(a)||(Object.assign(a.style,i),Object.keys(r).forEach(function(o){var s=r[o];!1===s?a.removeAttribute(o):a.setAttribute(o,!0===s?"":s)}))})},effect:function d3(t){var n=t.state,e={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,e.popper),n.styles=e,n.elements.arrow&&Object.assign(n.elements.arrow.style,e.arrow),function(){Object.keys(n.elements).forEach(function(i){var r=n.elements[i],a=n.attributes[i]||{},s=Object.keys(n.styles.hasOwnProperty(i)?n.styles[i]:e[i]).reduce(function(l,c){return l[c]="",l},{});!lr(r)||!Xr(r)||(Object.assign(r.style,s),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]}]});const m3={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function g3(t){var n=t.state,i=t.name,r=t.options.offset,a=void 0===r?[0,0]:r,o=WS.reduce(function(u,d){return u[d]=function p3(t,n,e){var i=Yr(t),r=[qi,Wi].indexOf(i)>=0?-1:1,a="function"==typeof e?e(Object.assign({},n,{placement:t})):e,o=a[0],s=a[1];return o=o||0,s=(s||0)*r,[qi,Ar].indexOf(i)>=0?{x:s,y:o}:{x:o,y:s}}(d,n.rects,a),u},{}),s=o[n.placement],c=s.y;null!=n.modifiersData.popperOffsets&&(n.modifiersData.popperOffsets.x+=s.x,n.modifiersData.popperOffsets.y+=c),n.modifiersData[i]=o}},pm=["*"],H3=["dialog"];function b5(t,n){1&t&&w(0),2&t&&Ie(R(2).title)}function y5(t,n){}function C5(t,n){if(1&t&&(m(0,"h3",3),k(1,b5,1,1,"ng-template",null,4,Rt),k(3,y5,0,0,"ng-template",5),g()),2&t){const e=It(2),i=R();p(3),T("ngTemplateOutlet",i.isTitleTemplate()?i.title:e)("ngTemplateOutletContext",i.context)}}function w5(t,n){if(1&t&&(m(0,"span"),la(1,2),sn(2,"percent"),g()),2&t){const e=R();p(2),pu(function z0(t,n,e){const i=t+20,r=U(),a=Do(r,i);return yl(r,i)?U0(r,gi(),n,a.transform,e,a):a.transform(e)}(2,1,e.getValue()/e.max)),function Qh(t){!function SN(t,n,e){if(gl>0){const i=t.data[e];m0(t,n,Array.isArray(i)?i:i.update,ra()-gl-1,pl)}pl=0,gl=0}(nt(),U(),t+20)}(1)}}function Qr(t){return!isNaN(function Ad(t){return parseInt(`${t}`,10)}(t))}function po(t){return null!=t}function ks(t){return(t||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let n=this;if(!document.documentElement.contains(n))return null;do{if(n.matches(t))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null});const sT={animation:!0,transitionTimerDelayMs:5},V5=()=>{},{transitionTimerDelayMs:L5}=sT,rc=new Map,Si=(t,n,e,i)=>{let r=i.context||{};const a=rc.get(n);if(a)switch(i.runningTransition){case"continue":return ur;case"stop":t.run(()=>a.transition$.complete()),r=Object.assign(a.context,r),rc.delete(n)}const o=e(n,i.animation,r)||V5;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return t.run(()=>o()),Ae(void 0).pipe(function x5(t){return n=>new Xe(e=>n.subscribe({next:o=>t.run(()=>e.next(o)),error:o=>t.run(()=>e.error(o)),complete:()=>t.run(()=>e.complete())}))}(t));const s=new Yt,l=new Yt,c=s.pipe(function lB(...t){return n=>Fl(n,Ae(...t))}(!0));rc.set(n,{transition$:s,complete:()=>{l.next(),l.complete()},context:r});const u=function F5(t){const{transitionDelay:n,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(n)+parseFloat(e))}(n);return t.runOutsideAngular(()=>{const d=wi(n,"transitionend").pipe(Vn(c),Qn(({target:h})=>h===n));BS(im(u+L5).pipe(Vn(c)),d,l).pipe(Vn(c)).subscribe(()=>{rc.delete(n),t.run(()=>{o(),s.next(),s.complete()})})}),s.asObservable()};let ac=(()=>{class t{constructor(){this.animation=sT.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni]]}),t})(),pT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni]]}),t})(),mT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({}),t})(),bT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni]]}),t})(),yT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({}),t})();var Ln=(()=>{return(t=Ln||(Ln={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",Ln;var t})();const Ed=(t,n)=>!!n&&n.some(e=>e.contains(t)),CT=(t,n)=>!n||null!=function O5(t,n){return n&&void 0!==t.closest?t.closest(n):null}(t,n),nU="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function wT(t,n,e,i,r,a,o,s){e&&t.runOutsideAngular((t=>nU?()=>setTimeout(()=>t(),100):t)(()=>{const c=wi(n,"keydown").pipe(Vn(r),Qn(f=>f.which===Ln.Escape),ci(f=>f.preventDefault())),u=wi(n,"mousedown").pipe(We(f=>{const h=f.target;return 2!==f.button&&!Ed(h,o)&&("inside"===e?Ed(h,a)&&CT(h,s):"outside"===e?!Ed(h,a):CT(h,s)||!Ed(h,a))}),Vn(r)),d=wi(n,"mouseup").pipe(am(u),Qn(([f,h])=>h),GS(0),Vn(r));BS([c.pipe(We(f=>0)),d.pipe(We(f=>1))]).subscribe(f=>t.run(()=>i(f)))}))}const ST=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function TT(t){const n=Array.from(t.querySelectorAll(ST)).filter(e=>-1!==e.tabIndex);return[n[0],n[n.length-1]]}const aU=/\s+/,oU=/  +/gi,sU=/^start/,lU=/^end/,cU=/-(top|left)$/,uU=/-(bottom|right)$/,fU=/^left/,hU=/^right/,pU=/^start/,gU=/^end/;function DT({placement:t,baseClass:n}){let e=Array.isArray(t)?t:t.split(aU),r=e.findIndex(l=>"auto"===l);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(l){null==e.find(c=>-1!==c.search("^"+l))&&e.splice(r++,1,l)});const a=e.map(l=>function dU(t){return t.replace(sU,"left").replace(lU,"right").replace(cU,"-start").replace(uU,"-end")}(l));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!n,phase:"write",fn({state:l}){const c=new RegExp(n+"-[a-z]+","gi"),u=l.elements.popper,d=l.placement;let f=u.className;f=f.replace(c,""),f+=` ${function mU(t,n){let[e,i]=n.split("-");const r=e.replace(fU,"start").replace(hU,"end");let a=[r];if(i){let o=i;("left"===e||"right"===e)&&(o=o.replace(pU,"top").replace(gU,"bottom")),a.push(`${r}-${o}`)}return t&&(a=a.map(o=>`${t}-${o}`)),a.join(" ")}(n,d)}`,f=f.trim().replace(oU," "),u.className=f}},VB,HB,zB,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function MT(t){return t}function AT(){let t=null;return{createPopper(n){if(!t){let i=(n.updatePopperOptions||MT)(DT(n));t=h3(n.hostElement,n.targetElement,i)}},update(){t&&t.update()},setOptions(n){if(t){let i=(n.updatePopperOptions||MT)(DT(n));t.setOptions(i)}},destroy(){t&&(t.destroy(),t=null)}}}new Date(1882,10,12),new Date(2174,10,25);let PT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni,Cw]]}),t})(),DU=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),OT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=J({type:t,selectors:[["",8,"navbar"]]}),t})(),Sm=(()=>{class t{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(M(At))},t.\u0275dir=J({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,i){2&e&&we("disabled",i.disabled)},inputs:{disabled:"disabled"}}),t})(),Tm=(()=>{class t{constructor(e,i){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(M(rt(()=>cc)),M(At))},t.\u0275dir=J({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,i,r){if(1&e&&_n(r,Sm,4),2&e){let a;Ot(a=xt())&&(i.menuItems=a)}},hostVars:5,hostBindings:function(e,i){1&e&&N("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return i.dropdown.onKeyDown(a)})("keydown.Space",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&(Ct("data-popper",i.placement),we("dropdown-menu",!0)("show",i.dropdown.isOpen()))}}),t})(),Pd=(()=>{class t{constructor(e,i){this.dropdown=e,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(M(rt(()=>cc)),M(At))},t.\u0275dir=J({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){2&e&&Ct("aria-expanded",i.dropdown.isOpen())}}),t})(),xT=(()=>{class t extends Pd{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(M(rt(()=>cc)),M(At))},t.\u0275dir=J({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){1&e&&N("click",function(){return i.dropdown.toggle()})("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&Ct("aria-expanded",i.dropdown.isOpen())},features:[Pt([{provide:Pd,useExisting:rt(()=>t)}]),pt]}),t})(),cc=(()=>{class t{constructor(e,i,r,a,o,s,l){this._changeDetector=e,this._document=r,this._ngZone=a,this._elementRef=o,this._renderer=s,this._closed$=new Yt,this._bodyContainer=null,this._positioning=AT(),this._open=!1,this.openChange=new ge,this.placement=i.placement,this.container=i.container,this.autoClose=i.autoClose,this.display=l?"static":"dynamic",this._zoneSubscription=a.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(Gn(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:i,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(i,r)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.onStable.pipe(Gn(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()})))}_setCloseHandlers(){wT(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._positioning.destroy(),this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const i=e.which,r=this._getMenuElements();let a=-1,o=null;const s=this._isEventFromToggle(e);if(!s&&r.length&&r.forEach((l,c)=>{l.contains(e.target)&&(o=l),l===this._document.activeElement&&(a=c)}),i!==Ln.Space&&i!==Ln.Enter){if(i!==Ln.Tab){if(s||o){if(this.open(),r.length){switch(i){case Ln.ArrowDown:a=Math.min(a+1,r.length-1);break;case Ln.ArrowUp:if(this._isDropup()&&-1===a){a=r.length-1;break}a=Math.max(a-1,0);break;case Ln.Home:a=0;break;case Ln.End:a=r.length-1}r[a].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const l=this._menu.nativeElement.querySelectorAll(ST);e.shiftKey&&e.target===l[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===l[l.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else wi(e.target,"focusout").pipe(Gn(1)).subscribe(({relatedTarget:l})=>{this._elementRef.nativeElement.contains(l)||this.close()})}}else o&&(!0===this.autoClose||"inside"===this.autoClose)&&wi(o,"click").pipe(Gn(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(i=>!i.disabled).map(i=>i.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const i=this._renderer,r=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||i.createElement("div");i.setStyle(a,"position","absolute"),i.setStyle(r,"position","static"),i.setStyle(a,"z-index","1050"),i.appendChild(a,r),i.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,i){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(i&&this._renderer.removeClass(r,i),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const i=this._menu;if(i){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,a=this._elementRef.nativeElement;r.removeClass(a,"dropup"),r.removeClass(a,"dropdown");const{nativeElement:o}=i;"static"===this.display?(i.placement=null,r.setAttribute(o,"data-bs-popper","static")):(i.placement=e,r.removeAttribute(o,"data-bs-popper"));const s=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(a,s);const l=this._bodyContainer;l&&(r.removeClass(l,"dropup"),r.removeClass(l,"dropdown"),r.addClass(l,s))}}}return t.\u0275fac=function(e){return new(e||t)(M(Gi),M(DU),M(Rn),M(Ft),M(At),M(tr),M(OT,8))},t.\u0275dir=J({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(e,i,r){if(1&e&&(_n(r,Tm,5),_n(r,Pd,5)),2&e){let a;Ot(a=xt())&&(i._menu=a.first),Ot(a=xt())&&(i._anchor=a.first)}},hostVars:2,hostBindings:function(e,i){2&e&&we("show",i.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[$n]}),t})(),FT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({}),t})();class _o{constructor(n,e,i){this.nodes=n,this.viewRef=e,this.componentRef=i}}class MU{constructor(n,e,i,r,a,o){this._type=n,this._injector=e,this._viewContainerRef=i,this._renderer=r,this._ngZone=a,this._applicationRef=o,this._windowRef=null,this._contentRef=null}open(n,e,i=!1){this._windowRef||(this._contentRef=this._getContentRef(n,e),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,a=this._ngZone.onStable.pipe(Gn(1),pn(()=>Si(this._ngZone,r,({classList:o})=>o.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:a}}close(n=!1){return this._windowRef?Si(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:n,runningTransition:"stop"}).pipe(ci(()=>{var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):Ae(void 0)}_getContentRef(n,e){if(n){if(n instanceof Qt){const i=n.createEmbeddedView(e);return this._applicationRef.attachView(i),new _o([i.rootNodes],i)}return new _o([[this._renderer.createText(`${n}`)]])}return new _o([])}}let AU=(()=>{class t{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Gn(1)).subscribe(()=>{Si(this._zone,this._el.nativeElement,(e,i)=>{i&&ks(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Si(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(M(At),M(Ft))},t.\u0275cmp=De({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(Da("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),we("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),t})();class VT{close(n){}dismiss(n){}}class RU{constructor(n,e,i,r){this._windowCmptRef=n,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Yt,this._dismissed=new Yt,this._hidden=new Yt,n.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,o)=>{this._resolve=a,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Vn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Vn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function P5(t){return t&&t.then}(e)?!1!==e&&this._dismiss(n):e.then(i=>{!1!==i&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Ae(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),wd(n,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var uc=(()=>{return(t=uc||(uc={}))[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",uc;var t})();let EU=(()=>{class t{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new Yt,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ge,this.shown=new Yt,this.hidden=new Yt}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Gn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=wd(Si(this._zone,e,()=>e.classList.remove("show"),i),Si(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const e={animation:this.animation,runningTransition:"continue"};wd(Si(this._zone,this._elRef.nativeElement,(a,o)=>{o&&ks(a),a.classList.add("show")},e),Si(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{wi(e,"keydown").pipe(Vn(this._closed$),Qn(r=>r.which===Ln.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(uc.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;wi(this._dialogEl.nativeElement,"mousedown").pipe(Vn(this._closed$),ci(()=>i=!1),fa(()=>wi(e,"mouseup").pipe(Vn(this._closed$),Gn(1))),Qn(({target:r})=>e===r)).subscribe(()=>{i=!0}),wi(e,"click").pipe(Vn(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(uc.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=TT(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Si(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(M(Rn),M(At),M(Ft))},t.\u0275cmp=De({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&no(H3,7),2&e){let r;Ot(r=xt())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(Ct("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),Da("modal d-block"+(i.windowClass?" "+i.windowClass:"")),we("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:pm,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(au(),m(0,"div",0,1)(2,"div",2),ou(3),g()()),2&e&&Da("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),kU=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:a,paddingRight:o}=r;if(e>0){const s=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${s+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=o),r.overflow=a}}}return t.\u0275fac=function(e){return new(e||t)(Q(Rn))},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),NU=(()=>{class t{constructor(e,i,r,a,o,s){this._applicationRef=e,this._injector=i,this._document=r,this._scrollBar=a,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new Yt,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new ge,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((t,n,e,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=wi(n,"focusin").pipe(Vn(e),We(a=>a.target));wi(n,"keydown").pipe(Vn(e),Qn(a=>a.which===Ln.Tab),am(r)).subscribe(([a,o])=>{const[s,l]=TT(n);(o===s||o===n)&&a.shiftKey&&(l.focus(),a.preventDefault()),o===l&&!a.shiftKey&&(s.focus(),a.preventDefault())}),i&&wi(n,"click").pipe(Vn(e),am(r),We(a=>a[1])).subscribe(a=>a.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(e,i,r,a){const o=a.container instanceof HTMLElement?a.container:po(a.container)?this._document.querySelector(a.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.hide(),c=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!o)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const u=new VT,d=this._getContentRef(e,a.injector||i,r,u,a);let f=!1!==a.backdrop?this._attachBackdrop(e,o):void 0,h=this._attachWindowComponent(e,o,d),v=new RU(h,d,f,a.beforeDismiss);return this._registerModalRef(v),this._registerWindowCmpt(h),v.result.then(l,l),v.result.then(c,c),u.close=b=>{v.close(b)},u.dismiss=b=>{v.dismiss(b)},this._applyWindowOptions(h.instance,a),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),f&&f.instance&&(this._applyBackdropOptions(f.instance,a),f.changeDetectorRef.detectChanges()),h.changeDetectorRef.detectChanges(),v}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,i){let a=e.resolveComponentFactory(AU).create(this._injector);return this._applicationRef.attachView(a.hostView),i.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,i,r){let o=e.resolveComponentFactory(EU).create(this._injector,r.nodes);return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{po(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{po(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,a,o){return r?r instanceof Qt?this._createFromTemplateRef(r,a):function oT(t){return"string"==typeof t}(r)?this._createFromString(r):this._createFromComponent(e,i,r,a,o):new _o([])}_createFromTemplateRef(e,i){const a=e.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(a),new _o([a.rootNodes],a)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new _o([[i]])}_createFromComponent(e,i,r,a,o){const s=e.resolveComponentFactory(r),l=mn.create({providers:[{provide:VT,useValue:a}],parent:i}),c=s.create(l),u=c.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new _o([[u]],c.hostView,c)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(Q(io),Q(mn),Q(Rn),Q(kU),Q(tp),Q(Ft))},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),IU=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Q(ac))},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Is=(()=>{class t{constructor(e,i,r,a){this._moduleCFR=e,this._injector=i,this._modalStack=r,this._config=a}open(e,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(Q(eo),Q(mn),Q(NU),Q(IU))},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),LT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({providers:[Is]}),t})(),GT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni]]}),t})(),QT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni]]}),t})();class LU{constructor(n,e){this.open=n,this.close=e,e||(this.close=n)}isManual(){return"manual"===this.open||"manual"===this.close}}const BU={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},ZT=t=>t>0?GS(t):n=>n;let $U=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Q(ac))},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),zU=0;function WU(t){return t.modifiers.push(m3,{name:"offset",options:{offset:()=>[0,12]}}),t}let qU=(()=>{class t{isTitleTemplate(){return this.title instanceof Qt}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=De({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,i){2&e&&(Ma("id",i.id),Da("popover"+(i.popoverClass?" "+i.popoverClass:"")),we("fade",i.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:pm,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(au(),O(0,"div",0),k(1,C5,4,2,"h3",1),m(2,"div",2),ou(3),g()),2&e&&(p(1),T("ngIf",i.title))},directives:[zt,fs],encapsulation:2,changeDetection:0}),t})(),Va=(()=>{class t{constructor(e,i,r,a,o,s,l,c,u){this._elementRef=e,this._renderer=i,this._ngZone=s,this._document=l,this._changeDetector=c,this.shown=new ge,this.hidden=new ge,this._ngbPopoverWindowId="ngb-popover-"+zU++,this._windowRef=null,this._positioning=AT(),this.animation=o.animation,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disablePopover=o.disablePopover,this.popoverClass=o.popoverClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new MU(qU,r,a,i,this._ngZone,u),this._zoneSubscription=s.onStable.subscribe(()=>{this._positioning.update()})}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:i,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=i,this._windowRef.instance.animation=this.animation,this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(Gn(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:WU})}),wT(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function jU(t,n,e,i,r,a,o=0,s=0){const l=function UU(t,n=BU){const e=(t||"").trim();if(0===e.length)return[];const i=e.split(/\s+/).map(a=>a.split(":")).map(a=>{let o=n[a[0]]||a;return new LU(o[0],o[1])}),r=i.filter(a=>a.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(e);if(1===l.length&&l[0].isManual())return()=>{};const c=function HU(t,n,e,i){return new Xe(r=>{const a=[],o=()=>r.next(!0),s=()=>r.next(!1),l=()=>r.next(!i());return e.forEach(c=>{c.open===c.close?a.push(t.listen(n,c.open,l)):a.push(t.listen(n,c.open,o),t.listen(n,c.close,s))}),()=>{a.forEach(c=>c())}})}(t,n,l,i).pipe(function GU(t,n,e){return i=>{let r=null;const a=i.pipe(We(l=>({open:l})),Qn(l=>{const c=e();return c===l.open||r&&r.open!==c?(r&&r.open!==l.open&&(r=null),!1):(r=l,!0)}),uv());return cv(a.pipe(Qn(l=>l.open),ZT(t)),a.pipe(Qn(l=>!l.open),ZT(n))).pipe(Qn(l=>l===r&&(r=null,l.open!==e())),We(l=>l.open))}}(o,s,i)).subscribe(u=>u?r():a());return()=>c.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:i,disablePopover:r,popoverClass:a}){a&&this.isOpen()&&(this._windowRef.instance.popoverClass=a.currentValue),(e||i||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(M(At),M(tr),M(mn),M(nr),M($U),M(Ft),M(Rn),M(Gi),M(io))},t.\u0275dir=J({type:t,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[$n]}),t})(),JT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni]]}),t})(),YU=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Rm=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!Qr(e)||e<=0?100:e}get max(){return this._max}getValue(){return function aT(t,n,e=0){return Math.max(Math.min(t,n),e)}(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(M(YU))},t.\u0275cmp=De({type:t,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(e,i){2&e&&dl("height",i.height)},inputs:{max:"max",animated:"animated",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},ngContentSelectors:pm,decls:3,vars:11,consts:function(){let n;return n=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],n]},template:function(e,i){1&e&&(au(),m(0,"div",0),k(1,w5,3,3,"span",1),ou(2),g()),2&e&&(qy("progress-bar",i.type?" bg-"+i.type:"","",i.textType?" text-"+i.textType:"","\n    ",i.animated?" progress-bar-animated":"","",i.striped?" progress-bar-striped":"",""),dl("width",i.getPercentValue(),"%"),Ct("aria-valuenow",i.getValue())("aria-valuemax",i.max),p(1),T("ngIf",i.showValue))},directives:[zt],pipes:[rC],encapsulation:2,changeDetection:0}),t})(),KT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni]]}),t})(),eD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni]]}),t})(),tD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni]]}),t})(),nD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni]]}),t})(),iD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({}),t})();new Be("live announcer delay",{providedIn:"root",factory:function ZU(){return 100}});let rD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[[Ni]]}),t})();const JU=[hT,pT,mT,bT,yT,PT,FT,LT,GT,QT,JT,KT,eD,tD,nD,iD,rD];let KU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t}),t.\u0275inj=ht({imports:[JU,hT,pT,mT,bT,yT,PT,FT,LT,GT,QT,JT,KT,eD,tD,nD,iD,rD]}),t})(),e4=(()=>{class t{constructor(e,i,r){this.lookupService=e,this.gameLoopService=i,this.globalService=r}ngOnInit(){this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.gameLoopService.gameUpdateEvent.subscribe(e=>{this.globalService.globalVar.userIsRacing||(this.coinCount=this.lookupService.getCoins(),this.medalCount=this.lookupService.getMedals())})}}return t.\u0275fac=function(e){return new(e||t)(M(Cn),M(Tr),M(Ze))},t.\u0275cmp=De({type:t,selectors:[["app-header"]],decls:13,vars:3,consts:[[1,"headerView"],[1,"gridContainer"],[1,"nameArea","keyword"],[1,"name"],[1,"version","screenMarginLeft"],[1,"coins","keyword"],[1,"medals","keyword"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),w(4," Cultura "),g(),m(5,"span",4),w(6),g()(),m(7,"div",5)(8,"span"),w(9),g()(),m(10,"div",6)(11,"span"),w(12),g()()()()),2&e&&(p(6),z(" v",i.version," "),p(3),z("Coins: ",i.coinCount,""),p(3),z("Medals: ",i.medalCount,""))},styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name . coins ." ". name . medals ."}.nameArea[_ngcontent-%COMP%]{grid-area:name;justify-self:stretch}.name[_ngcontent-%COMP%]{font-size:2rem}.coins[_ngcontent-%COMP%]{grid-area:coins;justify-self:stretch}.medals[_ngcontent-%COMP%]{grid-area:medals;justify-self:stretch}']}),t})();function t4(t,n){if(1&t&&(m(0,"div")(1,"span"),w(2),g(),O(3,"br"),m(4,"span"),w(5),g()()),2&t){const e=R(2);p(2),Ie(e.associatedAnimalName),p(3),Ie(e.associatedAnimalType)}}function n4(t,n){if(1&t&&(m(0,"div")(1,"span"),w(2),g()()),2&t){const e=R(2);p(2),Ie(e.associatedAnimalType)}}function i4(t,n){1&t&&(m(0,"div"),w(1," Ready to Breed "),g())}const r4=function(t){return{floatingProgressTextAnimation:t}};function a4(t,n){if(1&t&&(m(0,"div",4)(1,"span"),w(2),g(),k(3,t4,6,2,"div",5),k(4,n4,3,1,"div",5),O(5,"br"),m(6,"p"),O(7,"ngb-progressbar",6),g(),m(8,"div",7),w(9),g(),O(10,"br")(11,"br"),k(12,i4,2,0,"div",5),g()),2&t){const e=R();p(2),Ie(e.barnName),p(1),T("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),T("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(3),T("value",e.trainingProgressBarPercent),p(1),T("ngClass",yr(7,r4,e.showTrainingAnimation)),p(1),z(" ",e.trainingCompleteText," "),p(3),T("ngIf",e.readyToBreed)}}function o4(t,n){1&t&&(m(0,"div",8)(1,"span"),w(2,"Unassigned"),g()())}function s4(t,n){1&t&&(m(0,"div",9)(1,"span"),w(2,"Locked"),g()())}let l4=(()=>{class t{constructor(e,i,r){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.trainingCompleteText="",this.showTrainingAnimation=!1,this.selectedBarn=new ge}ngOnInit(){if(this.barnNumber>0&&this.barnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.barnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e);var i=this.globalService.globalVar.animals.find(r=>r.associatedBarnNumber==this.barnNumber);null!=i?(this.isOccupied=!0,this.associatedAnimalName=i.name,this.associatedAnimalType=I[i.type],this.associatedAnimal=i):this.isOccupied=!1,this.isLocked=e.isLocked}}else console.log("Can't find barn");this.isLocked||(this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.barnNumber);if(null!=a){if(null==a.currentTraining)return void(this.trainingProgressBarPercent=0);a.currentTraining.timeTrained<this.previousTrainedAmount&&(this.trainingCompleteText=this.lookupService.getTrainingProgressionAnimationText(a.currentTraining),this.showTrainingAnimation=!0,setTimeout(()=>{this.showTrainingAnimation=!1,this.trainingCompleteText=""},3e3)),this.readyToBreed=a.breedGaugeXp>=a.breedGaugeMax,this.previousTrainedAmount=a.currentTraining.timeTrained,this.trainingProgressBarPercent=a.currentTraining.timeTrained/a.currentTraining.timeToComplete*100}}))}ngOnDestroy(){this.previousTrainedAmount=0,null!=this.subscription&&this.subscription.unsubscribe()}onClick(){this.selectedBarn.emit(this.barnNumber)}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Tr),M(Cn))},t.\u0275cmp=De({type:t,selectors:[["app-barn"]],hostBindings:function(e,i){1&e&&N("click",function(){return i.onClick()})},inputs:{barnNumber:"barnNumber"},outputs:{selectedBarn:"selectedBarn"},decls:4,vars:3,consts:[[1,"barn","clickableText"],["class","unlocked",4,"ngIf"],["class","unassigned",4,"ngIf"],["class","locked",4,"ngIf"],[1,"unlocked"],[4,"ngIf"],["type","success",3,"value"],[1,"progressBar","floatingProgressText","progressBarColor","keyword",3,"ngClass"],[1,"unassigned"],[1,"locked"]],template:function(e,i){1&e&&(m(0,"div",0),k(1,a4,13,9,"div",1),k(2,o4,3,0,"div",2),k(3,s4,3,0,"div",3),g()),2&e&&(p(1),T("ngIf",i.isOccupied),p(1),T("ngIf",!i.isOccupied&&!i.isLocked),p(1),T("ngIf",i.isLocked))},directives:[zt,Rm,ki],styles:[".barn[_ngcontent-%COMP%]{text-align:center;width:45%;margin:auto}.floatingProgressText[_ngcontent-%COMP%]{float:right;position:relative;text-align:right;top:-2em}.floatingProgressTextAnimation[_ngcontent-%COMP%]{animation-name:floatingProgressTextAnimation;animation-duration:3s;animation-iteration-count:1;animation-timing-function:ease-in-out}@keyframes floatingProgressTextAnimation{0%{transform:translate(0)}to{transform:translateY(-30px);opacity:0}}"]}),t})(),c4=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=De({type:t,selectors:[["app-training-option"]],inputs:{trainingOption:"trainingOption"},decls:7,vars:4,consts:[[1,"training"],[1,"trainingName"],[1,"trainingStats"],[1,"trainingTimeToComplete"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"p",1),w(2),g(),m(3,"p",2),w(4),g(),m(5,"p",3),w(6),g()()),2&e&&(p(2),Ie(i.trainingOption.trainingName),p(2),Ie(i.trainingOption.getStatGainDescription()),p(2),Hi("",i.trainingOption.getFacilitySize()," - ",i.trainingOption.timeToComplete," sec "))},styles:[".training[_ngcontent-%COMP%]{white-space:pre-line}"]}),t})();const u4=function(t){return{activeTrainingOption:t}};function d4(t,n){if(1&t){const e=re();m(0,"td",4)(1,"div",5),N("click",function(){const a=V(e).$implicit;return R(2).selectTrainingOption(a)}),O(2,"app-training-option",6),g()()}if(2&t){const e=n.$implicit;p(1),T("ngClass",yr(2,u4,e.isSelected)),p(1),T("trainingOption",e)}}function f4(t,n){if(1&t&&(m(0,"tr"),k(1,d4,3,4,"td",3),g()),2&t){const e=n.$implicit;p(1),T("ngForOf",e)}}let h4=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrainingOption=new ge}ngOnInit(){this.setupDisplayTrainings()}setupDisplayTrainings(){this.trainingsCells=[],this.trainingsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTrainingOptions.length;i++)this.trainingsCells.push(this.availableTrainingOptions[i-1]),i%e==0&&(this.trainingsRows.push(this.trainingsCells),this.trainingsCells=[]);0!==this.trainingsCells.length&&this.trainingsRows.push(this.trainingsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrainingOption(e){this.availableTrainingOptions.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrainingOption.emit(e)}ngOnChanges(e){this.availableTrainingOptions=e.availableTrainingOptions.currentValue,this.setupDisplayTrainings()}}return t.\u0275fac=function(e){return new(e||t)(M(Ze))},t.\u0275cmp=De({type:t,selectors:[["app-training-list"]],hostBindings:function(e,i){1&e&&N("resize",function(a){return i.onResize(a)},!1,nl)},inputs:{availableTrainingOptions:"availableTrainingOptions"},outputs:{selectedTrainingOption:"selectedTrainingOption"},features:[$n],decls:4,vars:1,consts:[[1,"trainingsView"],[1,"trainings"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trainingOption"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1)(2,"table"),k(3,f4,2,1,"tr",2),g()()()),2&e&&(p(3),T("ngForOf",i.trainingsRows))},directives:[Fn,ki,c4],styles:[".trainingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.trainings[_ngcontent-%COMP%]{margin:.5rem}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function p4(t,n){if(1&t&&(m(0,"span"),w(1),g()),2&t){const e=R(2);p(1),Ie(e.selectedAnimal.name)}}function g4(t,n){if(1&t&&(m(0,"div"),k(1,p4,2,1,"span",1),O(2,"br"),m(3,"span"),w(4),g()()),2&t){const e=R();p(1),T("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),Ie(e.selectedAnimal.getAnimalType())}}function m4(t,n){if(1&t&&(m(0,"div")(1,"span"),w(2),g()()),2&t){const e=R();p(2),Ie(e.selectedAnimal.getAnimalType())}}let v4=(()=>{class t{constructor(){}ngOnInit(){this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=De({type:t,selectors:[["app-animal"]],inputs:{selectedAnimal:"selectedAnimal"},decls:7,vars:4,consts:[[1,"keyword","animal",3,"ngClass"],[4,"ngIf"]],template:function(e,i){1&e&&(m(0,"div",0),k(1,g4,5,2,"div",1),k(2,m4,3,1,"div",1),O(3,"br")(4,"br"),m(5,"span"),w(6),g()()),2&e&&(T("ngClass",i.colorConditional),p(1),T("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),T("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(4),Ie(i.selectedAnimal.getRaceCourseType()))},directives:[ki,zt],styles:[".animal[_ngcontent-%COMP%]{margin:.5rem}"]}),t})();function _4(t,n){if(1&t){const e=re();m(0,"td")(1,"div",3),N("click",function(){const a=V(e).$implicit;return R(2).selectAnimal(a)}),O(2,"app-animal",4),g()()}if(2&t){const e=n.$implicit;p(2),T("selectedAnimal",e)}}function b4(t,n){if(1&t&&(m(0,"tr"),k(1,_4,3,1,"td",2),g()),2&t){const e=n.$implicit;p(1),T("ngForOf",e)}}let Em=(()=>{class t{constructor(e){this.globalService=e,this.selectedAnimal=new ge}ngOnInit(){this.setupDisplayAnimals()}setupDisplayAnimals(){this.animalCells=[],this.animalRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableAnimals.length;i++)this.animalCells.push(this.availableAnimals[i-1]),i%e==0&&(this.animalRows.push(this.animalCells),this.animalCells=[]);0!==this.animalCells.length&&this.animalRows.push(this.animalCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectAnimal(e){this.selectedAnimal.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(M(Ze))},t.\u0275cmp=De({type:t,selectors:[["app-animal-list"]],hostBindings:function(e,i){1&e&&N("resize",function(a){return i.onResize(a)},!1,nl)},inputs:{availableAnimals:"availableAnimals"},outputs:{selectedAnimal:"selectedAnimal"},decls:4,vars:1,consts:[[1,"animalsView"],[1,"animals"],[4,"ngFor","ngForOf"],[1,"clickableText",3,"click"],[3,"selectedAnimal"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1)(2,"table"),k(3,b4,2,1,"tr",2),g()()()),2&e&&(p(3),T("ngForOf",i.animalRows))},directives:[Fn,v4],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();const y4=["specializationModal"];function C4(t,n){if(1&t){const e=re();m(0,"div")(1,"span",33),w(2),g(),O(3,"br"),m(4,"span",33)(5,"button",34),N("click",function(){return V(e),R(2).upgradeBarn()}),w(6),g()()()}if(2&t){const e=R(2),i=It(4),r=It(6);p(1),T("ngbPopover",i),p(1),z("Barn Level ",e.barn.barnUpgrades.barnLevel,""),p(2),T("ngbPopover",r),p(1),T("disabled",!e.canUpgrade),p(1),Ie(e.upgradeText)}}function w4(t,n){if(1&t&&(m(0,"span"),w(1),g()),2&t){const e=R(3);p(1),Ie(e.associatedAnimal.name)}}function S4(t,n){if(1&t){const e=re();m(0,"div",24),N("click",function(){return V(e),R(2).goToAnimal()}),k(1,w4,2,1,"span",10),O(2,"br"),m(3,"span"),w(4),g()()}if(2&t){const e=R(2);p(1),T("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(3),Ie(e.associatedAnimal.getAnimalType())}}function T4(t,n){if(1&t){const e=re();m(0,"div",24),N("click",function(){return V(e),R(2).goToAnimal()}),m(1,"span"),w(2),g()()}if(2&t){const e=R(2);p(2),Ie(e.associatedAnimal.getAnimalType())}}function D4(t,n){if(1&t){const e=re();m(0,"span",33)(1,"button",35),N("click",function(){return V(e),R(2).upgradeBarnSize()}),w(2,"Build"),g()()}if(2&t){const e=R(2);T("ngbPopover",It(8)),p(1),T("disabled",!e.canBuild)}}function M4(t,n){if(1&t&&(m(0,"div")(1,"span",36),w(2),g(),O(3,"br"),m(4,"span")(5,"em"),w(6),sn(7,"number"),g()()()),2&t){const e=R(2);p(2),z("",e.existingTraining.trainingName," "),p(4),z("(",vn(7,2,e.existingTraining.trainingTimeRemaining/60,"1.0-0")," min remaining)")}}function A4(t,n){1&t&&(m(0,"div")(1,"span"),w(2,"No Training Assigned"),g()())}function R4(t,n){if(1&t&&(m(0,"div"),O(1,"br"),m(2,"p",37),O(3,"ngb-progressbar",38),m(4,"span",39),w(5),sn(6,"number"),g()(),O(7,"br"),g()),2&t){const e=R(2);p(3),T("value",e.trainingProgressBarPercent),p(2),z("",vn(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}function E4(t,n){if(1&t){const e=re();m(0,"app-training-list",40),N("selectedTrainingOption",function(r){return V(e),R(2).selectNewTraining(r)}),g()}2&t&&T("availableTrainingOptions",R(2).availableTrainings)}function k4(t,n){1&t&&(m(0,"div"),w(1," This animal is currently in incubation and cannot train. Check back after incubation finishes. "),g())}const N4=function(t){return{sizeSpacing:t}};function I4(t,n){if(1&t){const e=re();m(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"span",9),N("click",function(){return V(e),R().unassignAnimal()}),w(5,"Unassign"),g(),O(6,"br")(7,"br"),k(8,C4,7,5,"div",10),g(),m(9,"div",11)(10,"span"),w(11),g(),O(12,"br"),k(13,S4,5,2,"div",12),k(14,T4,3,1,"div",12),m(15,"div")(16,"span",13),w(17),g(),k(18,D4,3,2,"span",14),g(),O(19,"hr"),k(20,M4,8,5,"div",10),k(21,A4,3,0,"div",10),g(),m(22,"div",15),N("click",function(){return V(e),R().returnToBarnView()}),m(23,"span"),w(24,"Back"),g()()(),O(25,"hr"),k(26,R4,8,5,"div",10),O(27,"br")(28,"br"),m(29,"div",16)(30,"span",17),N("click",function(){return V(e),R().resetFilters()}),w(31,"Change Training"),g()(),m(32,"div",18)(33,"div",19)(34,"span",20),N("click",function(){return V(e),R().toggleFacilityFilter("Small")}),w(35,"Small "),g(),m(36,"span",21),N("click",function(){return V(e),R().toggleFacilityFilter("Medium")}),w(37,"Medium "),g(),m(38,"span",22),N("click",function(){return V(e),R().toggleFacilityFilter("Large")}),w(39,"Large "),g()(),m(40,"div",23)(41,"span",24),N("click",function(){return V(e),R().resetFilters()}),w(42,"Reset Filters"),g()(),m(43,"div",25)(44,"span",26),N("click",function(){return V(e),R().toggleStatFilter("Speed")}),w(45,"SPD "),g(),m(46,"span",27),N("click",function(){return V(e),R().toggleStatFilter("Acceleration")}),w(47,"ACC "),g(),m(48,"span",28),N("click",function(){return V(e),R().toggleStatFilter("Endurance")}),w(49,"END "),g(),m(50,"span",29),N("click",function(){return V(e),R().toggleStatFilter("Power")}),w(51,"PWR "),g(),m(52,"span",30),N("click",function(){return V(e),R().toggleStatFilter("Focus")}),w(53,"FCS "),g(),m(54,"span",31),N("click",function(){return V(e),R().toggleStatFilter("Adaptability")}),w(55,"ADP"),g()()(),O(56,"br"),m(57,"div",13),k(58,E4,1,1,"app-training-list",32),k(59,k4,2,0,"div",10),g()()()}if(2&t){const e=R();p(8),T("ngIf",e.barnSpecializationsUnlocked),p(3),z(" ",e.barnName,""),p(2),T("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),T("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(2),T("ngClass",yr(31,N4,"Large"!==e.sizeValue)),p(1),z("",e.sizeValue," "),p(1),T("ngIf","Large"!==e.sizeValue),p(2),T("ngIf",null!=e.existingTraining),p(1),T("ngIf",null==e.existingTraining),p(5),T("ngIf",null!=e.existingTraining),p(8),we("filterActive",e.filterSmall),p(2),we("filterActive",e.filterMedium),p(2),we("filterActive",e.filterLarge),p(6),we("filterActive",e.filterSpeed),p(2),we("filterActive",e.filterAcceleration),p(2),we("filterActive",e.filterEndurance),p(2),we("filterActive",e.filterPower),p(2),we("filterActive",e.filterFocus),p(2),we("filterActive",e.filterAdaptability),p(3),T("ngClass",e.tutorialActive?"tutorialActive":""),p(1),T("ngIf",e.associatedAnimal.canTrain),p(1),T("ngIf",!e.associatedAnimal.canTrain)}}function P4(t,n){if(1&t){const e=re();m(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",11)(4,"span"),w(5),g(),O(6,"br"),m(7,"span"),w(8,"Unassigned"),g()(),m(9,"div",15),N("click",function(){return V(e),R().returnToBarnView()}),m(10,"span"),w(11,"Back"),g()()(),O(12,"hr")(13,"br")(14,"br"),m(15,"span"),w(16,"Assign Animal"),g(),m(17,"app-animal-list",41),N("selectedAnimal",function(r){return V(e),R().assignAnimal(r)}),g()()()}if(2&t){const e=R();p(5),z("Barn ",e.selectedBarnNumber,""),p(12),T("availableAnimals",e.availableAnimals)}}function O4(t,n){if(1&t){const e=re();m(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",11)(4,"span"),w(5),g(),O(6,"br"),m(7,"span"),w(8,"Locked"),g()(),m(9,"div",15),N("click",function(){return V(e),R().returnToBarnView()}),m(10,"span"),w(11,"Back"),g()()(),O(12,"hr")(13,"br")(14,"br"),m(15,"div",42)(16,"span"),w(17,"Purchase Barn"),g(),O(18,"br")(19,"br"),m(20,"span",43),w(21),g(),O(22,"br"),m(23,"button",44),N("click",function(){return V(e),R().purchaseBarn()}),w(24,"Buy"),g()()()()}if(2&t){const e=R();p(5),z("Barn ",e.selectedBarnNumber,""),p(16),z("",e.barn.purchasePrice," Coins"),p(2),T("disabled",!e.canPurchaseBarn())}}function x4(t,n){if(1&t&&(m(0,"div",46),w(1),g()),2&t){const e=R(2);p(1),z(" ",e.totalBarnStatsPopover," ")}}function F4(t,n){1&t&&k(0,x4,2,1,"div",45),2&t&&T("ngIf",""!==R().totalBarnStatsPopover)}function V4(t,n){if(1&t&&(m(0,"div",46),w(1),g()),2&t){const e=R(2);p(1),z(" ",e.upgradeBarnPopover," ")}}function L4(t,n){1&t&&k(0,V4,2,1,"div",45),2&t&&T("ngIf",""!==R().upgradeBarnPopover)}function B4(t,n){if(1&t&&(m(0,"div",46),w(1),g()),2&t){const e=R(2);p(1),z(" ",e.buildBiggerBarnPopover," ")}}function U4(t,n){1&t&&k(0,B4,2,1,"div",45),2&t&&T("ngIf",""!==R().buildBiggerBarnPopover)}const H4=function(t){return{selectedSpecialization:t}};function G4(t,n){if(1&t){const e=re();m(0,"span",57),N("click",function(){const a=V(e).$implicit;return R(3).filterSpecialization(a)}),w(1),g()}if(2&t){const e=n.$implicit,i=R(3);T("ngClass",yr(2,H4,i.selectedSpecialization===e)),p(1),z(" ",e.trim()," ")}}function j4(t,n){if(1&t&&(m(0,"div"),w(1),O(2,"br")(3,"br"),m(4,"strong"),w(5),g()()),2&t){const e=R(3);p(1),z(" ",e.specializationDescription," "),p(4),z(" ",e.inDepthSpecializationDescription," ")}}function $4(t,n){if(1&t&&(m(0,"div",55),k(1,G4,2,4,"span",56),O(2,"hr"),k(3,j4,6,2,"div",10),g()),2&t){const e=R(2);p(1),T("ngForOf",e.specializationOptions),p(2),T("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription)}}function z4(t,n){if(1&t){const e=re();m(0,"div",47)(1,"form")(2,"div",48)(3,"h4",49),w(4,"Choose Barn Specialization"),g(),m(5,"button",50),N("click",function(){return V(e).$implicit.dismiss()}),w(6,"X"),g()(),m(7,"div",51),k(8,$4,4,2,"div",52),g(),m(9,"div",53)(10,"button",54),N("click",function(){return V(e),R().selectSpecialization()}),w(11,"Select"),g()()()()}if(2&t){const e=R();p(8),T("ngIf",e.specializationOptions.length>0)}}let W4=(()=>{class t{constructor(e,i,r,a,o,s,l){this.globalService=e,this.gameLoopService=i,this.modalService=r,this.lookupService=a,this.componentCommunicationService=o,this.specializationService=s,this.tutorialService=l,this.returnToBarnEmitter=new ge,this.canUpgrade=!1,this.canBuild=!1,this.barnSpecializationsUnlocked=!1,this.tutorialActive=!1,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1}ngOnInit(){if(this.handleTutorial(),this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.upgradeText="Upgrade",this.barnSpecializationsUnlocked=this.lookupService.isItemUnlocked("barnSpecializations"),this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e),this.getSizeValue(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize");var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=i){if(this.animalAssigned=!0,this.associatedAnimal=i,this.associatedAnimalName=i.name,this.existingTraining=i.currentTraining,this.availableTrainings=this.GetAvailableTrainingOptions(i),null!=this.existingTraining){var r=this.availableTrainings.find(a=>{var o;return(null===(o=this.existingTraining)||void 0===o?void 0:o.trainingName)===a.trainingName});null!=r&&(r.isSelected=!0)}}else this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions();this.componentCommunicationService.setBarnView(wn.barn,0),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{if(!this.barn.isLocked){var o=this.globalService.globalVar.animals.find(l=>l.associatedBarnNumber==this.selectedBarnNumber);if(null!=o){if(null==o.currentTraining){if(null!==this.existingTraining){var s=this.availableTrainings.find(l=>{var c;return(null===(c=this.existingTraining)||void 0===c?void 0:c.trainingName)===l.trainingName});null!=s&&(s.isSelected=!1),this.existingTraining=null}return}o.currentTraining!==this.existingTraining&&(this.existingTraining=o.currentTraining),this.trainingProgressBarPercent>=100&&(this.trainingProgressBarPercent=100),this.trainingProgressBarPercent=o.currentTraining.timeTrained/o.currentTraining.timeToComplete*100}}})}}else console.log("Can't find barn")}selectNewTraining(e){var i=this.globalService.globalVar.animals.find(s=>s.associatedBarnNumber===this.selectedBarnNumber);if(null!=i){var r=Object.assign({},e),a="smallBarnTrainingTimeModifier";this.barn.size===ve.Medium?a="mediumBarnTrainingTimeModifier":this.barn.size===ve.Large&&(a="largeBarnTrainingTimeModifier");var o=this.globalService.globalVar.modifiers.find(s=>s.text===a);if(null!=o&&(r.trainingTimeRemaining=o.value),null!=i.currentTraining){if(this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching"))return void(i.queuedTraining=r);i.currentTraining.timeTrained=0}i.currentTraining=r,this.existingTraining=r,!this.globalService.globalVar.tutorialCompleted&&2===this.globalService.globalVar.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.currentTutorialId+=1,this.globalService.globalVar.showTutorial=!0,this.componentCommunicationService.setAnimalView(wn.animals,this.associatedAnimal))}}GetAvailableTrainingOptions(e){var i=[];if(null==this.globalService.globalVar||null==this.globalService.globalVar.trainingOptions||0===this.globalService.globalVar.trainingOptions.length)return i;i=this.globalService.globalVar.trainingOptions.filter(o=>o.isAvailable&&(o.facilitySize===ve.Small||o.facilitySize===ve.Medium&&(this.barn.size===ve.Medium||this.barn.size===ve.Large)||o.facilitySize===ve.Large&&this.barn.size===ve.Large));var r=[];i.forEach(o=>{var s=o.makeCopy(o),l=this.lookupService.getTrainingTimeReductionFromTrainingFacility(this.barn.barnUpgrades),c=this.lookupService.getResourceByName("Stopwatch");null==c&&(c=0),s.timeToComplete*=1-(.05*c+l),s.timeToComplete=Math.round(100*(s.timeToComplete+Number.EPSILON))/100,e.raceCourseType===P.Mountain&&(s.trainingType===W.ShortTrackRunning&&(s.trainingName="Short Track Climbing"),s.trainingType===W.TrailRunning&&(s.trainingName="Trail Climbing"),s.trainingType===W.LongTrackRunning&&(s.trainingName="Long Track Climbing")),e.raceCourseType===P.Ocean&&(s.trainingType===W.ShortTrackRunning&&(s.trainingName="Short Track Swimming"),s.trainingType===W.TrailRunning&&(s.trainingName="Lane Swimming"),s.trainingType===W.SmallWagonTow&&(s.trainingName="Small Canoe Tow"),s.trainingType===W.UphillRun&&(s.trainingName="Upstream Swim"),s.trainingType===W.LongTrackRunning&&(s.trainingName="Long Track Swimming"),s.trainingType===W.VehicleTow&&(s.trainingName="Boat Tow"),s.trainingType===W.GreenwayHike&&(s.trainingName="Canal Adventure")),s.affectedStatRatios.topSpeed*=this.barn.barnUpgrades.upgradedStatGain.topSpeed,s.affectedStatRatios.acceleration*=this.barn.barnUpgrades.upgradedStatGain.acceleration,s.affectedStatRatios.endurance*=this.barn.barnUpgrades.upgradedStatGain.endurance,s.affectedStatRatios.power*=this.barn.barnUpgrades.upgradedStatGain.power,s.affectedStatRatios.focus*=this.barn.barnUpgrades.upgradedStatGain.focus,s.affectedStatRatios.adaptability*=this.barn.barnUpgrades.upgradedStatGain.adaptability,s.affectedStatRatios.topSpeed=Math.round(100*(s.affectedStatRatios.topSpeed+Number.EPSILON))/100,s.affectedStatRatios.acceleration=Math.round(100*(s.affectedStatRatios.acceleration+Number.EPSILON))/100,s.affectedStatRatios.endurance=Math.round(100*(s.affectedStatRatios.endurance+Number.EPSILON))/100,s.affectedStatRatios.power=Math.round(100*(s.affectedStatRatios.power+Number.EPSILON))/100,s.affectedStatRatios.focus=Math.round(100*(s.affectedStatRatios.focus+Number.EPSILON))/100,s.affectedStatRatios.adaptability=Math.round(100*(s.affectedStatRatios.adaptability+Number.EPSILON))/100,r.push(s)}),(this.filterAcceleration||this.filterAdaptability||this.filterEndurance||this.filterFocus||this.filterPower||this.filterSpeed||this.filterSmall||this.filterMedium||this.filterLarge)&&(r=r.filter(o=>(!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterAcceleration&&o.affectedStatRatios.acceleration>0||this.filterAdaptability&&o.affectedStatRatios.adaptability>0||this.filterEndurance&&o.affectedStatRatios.endurance>0||this.filterFocus&&o.affectedStatRatios.focus>0||this.filterPower&&o.affectedStatRatios.power>0||this.filterSpeed&&o.affectedStatRatios.topSpeed>0)&&(!this.filterSmall&&!this.filterMedium&&!this.filterLarge||this.filterSmall&&o.facilitySize===ve.Small||this.filterMedium&&o.facilitySize===ve.Medium||this.filterLarge&&o.facilitySize===ve.Large)));var a=r.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});return null!=a&&this.animalAssigned&&(a.isSelected=!0),r}GetAvailableAnimalOptions(){var e=[];return null==this.globalService.globalVar||null==this.globalService.globalVar.animals||0===this.globalService.globalVar.animals.length||(e=this.globalService.globalVar.animals.filter(i=>i.isAvailable&&(void 0===i.associatedBarnNumber||i.associatedBarnNumber<=0))),e}unassignAnimal(){var e=this.globalService.globalVar.animals.find(i=>i.associatedBarnNumber==this.selectedBarnNumber);null!=e&&(e.associatedBarnNumber=0,e.currentTraining=null),this.existingTraining=null,this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions()}assignAnimal(e){e.associatedBarnNumber=this.selectedBarnNumber,this.animalAssigned=!0,this.availableAnimals=this.GetAvailableAnimalOptions(),this.availableTrainings=this.GetAvailableTrainingOptions(e),this.associatedAnimalName=e.name,this.existingTraining=null;var i=this.lookupService.getAnimalByType(e.type);null!==i&&(i.associatedBarnNumber=this.selectedBarnNumber,this.associatedAnimal=i),!this.globalService.globalVar.tutorialCompleted&&7===this.globalService.globalVar.currentTutorialId&&this.associatedAnimal.type===I.Monkey&&(this.globalService.globalVar.currentTutorialId+=1,this.globalService.globalVar.showTutorial=!0)}returnToBarnView(){this.returnToBarnEmitter.emit(0)}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}toggleFacilityFilter(e){"Small"===e&&(this.filterSmall=!this.filterSmall),"Medium"===e&&(this.filterMedium=!this.filterMedium),"Large"===e&&(this.filterLarge=!this.filterLarge),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1,this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}purchaseBarn(){this.lookupService.getCoins()>=this.barn.purchasePrice&&(this.barn.isLocked=!1,this.lookupService.spendCoins(this.barn.purchasePrice))}canPurchaseBarn(){return this.lookupService.getCoins()>=this.barn.purchasePrice}getSizeValue(){this.sizeValue=this.barn.getSize()}upgradeBarnSize(){if(this.lookupService.getCoins()>=this.barn.facilityUpgradePrice){if(this.lookupService.spendCoins(this.barn.facilityUpgradePrice),this.barn.size===ve.Small)this.barn.size=ve.Medium,this.barn.facilityUpgradePrice=4e3,null!=(i=this.globalService.globalVar.shop.find(r=>"Trainings"===r.name))&&i.itemList.filter(r=>r.additionalIdentifier===ve.Medium.toString()).forEach(r=>{r.isAvailable=!0});else if(this.barn.size===ve.Medium){var i;this.barn.size=ve.Large,null!=(i=this.globalService.globalVar.shop.find(a=>"Trainings"===a.name))&&i.itemList.filter(a=>a.additionalIdentifier===ve.Large.toString()).forEach(a=>{a.isAvailable=!0})}this.getSizeValue(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover()}}upgradeBarn(){var e=this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel);if(this.canUpgradeBarn(e)){if(9===this.barn.barnUpgrades.barnLevel)this.modalService.open(this.specializationModal,{ariaLabelledBy:"modal-basic-title",size:"lg"});else{e.forEach(o=>{this.lookupService.spendResourceByName(o.name,o.amount)}),this.barn.barnUpgrades.barnLevel+=1;var r=.1;if(this.barn.barnUpgrades.barnLevel%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var a=this.barn.barnUpgrades.barnLevel-this.barn.barnUpgrades.specializationLevel;a%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=r:a%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=r:a%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=r:a%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=r:a%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=r:a%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=r)}this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover()}this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}}canUpgradeBarn(e){var i=!0;return e.forEach(r=>{this.lookupService.getResourceByName(r.name)<r.amount&&(i=!1)}),i}canBuildLargerBarn(){var e=!1;return this.lookupService.getCoins()>=this.barn.facilityUpgradePrice&&(e=!0),e}getTotalBarnStatsPopover(){var e="Upgrade to gain barn bonuses";if(this.barn.barnUpgrades.barnLevel>=1&&(e="Barn Upgrades: \n"),this.barn.barnUpgrades.specialization===gt.TrainingFacility)e+=this.barn.barnUpgrades.specializationLevel<=20?"Training Time Reduction: "+this.barn.barnUpgrades.specializationLevel+"%\n":"Training Time Reduction: 20%\n All Stat Multiplier: "+(this.barn.barnUpgrades.specializationLevel-20)/10;else if(this.barn.barnUpgrades.specialization===gt.BreedingGrounds){var i=this.globalService.globalVar.modifiers.find(a=>"breedingGroundsSpecializationModifier"===a.text);null!=i&&(e+="Training Breed XP Multipler: "+this.barn.barnUpgrades.specializationLevel*(100*i.value)+"%\n")}else this.barn.barnUpgrades.specialization===gt.Attraction?e+=this.specializationService.getSpecializationPopoverText(gt.Attraction,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===gt.ResearchCenter&&(e+=this.specializationService.getSpecializationPopoverText(gt.ResearchCenter,this.barn.barnUpgrades.specializationLevel));return this.barn.barnUpgrades.upgradedStatGain.adaptability>1&&(e+="Adaptability Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.adaptability.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.focus>1&&(e+="Focus Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.focus.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.power>1&&(e+="Power Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.power.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.endurance>1&&(e+="Endurance Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.endurance.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.acceleration>1&&(e+="Acceleration Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.acceleration.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.topSpeed>1&&(e+="Top Speed Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.topSpeed.toFixed(1)+"\n"),e}getUpgradeBarnPopover(){var e="Cost to upgrade: \n";return this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(r=>{var a=r.name;"Medals"===a&&1===r.amount&&(a="Medal"),e+=r.amount+" "+a+"\n"}),e}getBuildLargerBarnPopover(){var e="Cost to build larger barn: \n";return e+=this.barn.facilityUpgradePrice+" Coins \n\n",this.barn.size===ve.Small?e+="You will be able to do Medium trainings and increase idle training time to 4 hours.":this.barn.size===ve.Medium&&(e+="You will be able to do Large trainings and increase idle training time to 8 hours."),e}filterSpecialization(e){this.selectedSpecialization=e,this.specializationDescription=this.globalService.getSpecializationDescription(e),this.inDepthSpecializationDescription=this.lookupService.getInDepthSpecializationDescription(e)}selectSpecialization(){this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(i=>{this.lookupService.spendResourceByName(i.name,i.amount)}),this.barn.barnUpgrades.specialization=this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel+=1,this.barn.barnUpgrades.barnLevel+=1,this.barn.barnUpgrades.specialization===gt.TrainingFacility&&(this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.modalService.dismissAll()}goToAnimal(){this.componentCommunicationService.setAnimalView(wn.animals,this.associatedAnimal)}handleTutorial(){var e=this.globalService.globalVar.animals.find(i=>i.type===I.Monkey);this.globalService.globalVar.tutorialCompleted||1!==this.globalService.globalVar.currentTutorialId?!this.globalService.globalVar.tutorialCompleted&&6===this.globalService.globalVar.currentTutorialId&&(null==e?void 0:e.isAvailable)?(this.globalService.globalVar.currentTutorialId+=1,this.globalService.globalVar.showTutorial=!0):this.globalService.globalVar.tutorialCompleted||(this.tutorialActive=!1):(this.tutorialActive=!0,this.globalService.globalVar.currentTutorialId+=1,this.globalService.globalVar.showTutorial=!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Tr),M(Is),M(Cn),M(Ts),M(IS),M(OS))},t.\u0275cmp=De({type:t,selectors:[["app-selected-barn"]],viewQuery:function(e,i){if(1&e&&no(y4,7),2&e){let r;Ot(r=xt())&&(i.specializationModal=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{returnToBarnEmitter:"returnToBarnEmitter"},decls:11,vars:3,consts:[["class","selectedBarnModal",4,"ngIf"],["totalBarnStatsContent",""],["upgradeBarnContent",""],["costToBuildContent",""],["specializationModal",""],[1,"selectedBarnModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"unassign"],[1,"clickableText",3,"click"],[4,"ngIf"],[1,"info"],[3,"click",4,"ngIf"],[3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"back","clickableText",3,"click"],[1,"changeTrainingHeader"],[1,"s4Heading",3,"click"],[1,"filterGridContainer"],[1,"facilitySizeFilter","clickableText"],["id","smallFilter",3,"click"],["id","mediumFilter",3,"click"],["id","largeFilter",3,"click"],[1,"resetFiltersHeader","clickableText"],[3,"click"],[1,"statFilter","clickableText"],["id","speedFilter",3,"click"],["id","accelerationFilter",3,"click"],["id","enduranceFilter",3,"click"],["id","powerFilter",3,"click"],["id","focusFilter",3,"click"],["id","adaptabilityFilter",3,"click"],[3,"availableTrainingOptions","selectedTrainingOption",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[1,"sizeButtonSpacing",3,"disabled","click"],[1,"activeTrainingOption"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"],[3,"availableTrainingOptions","selectedTrainingOption"],[3,"availableAnimals","selectedAnimal"],[1,"purchaseBarn"],[1,"price"],["id","purchaseButton",3,"disabled","click"],["class","popoverClass",4,"ngIf"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],["class","typeContainer",4,"ngIf"],[1,"modal-footer"],["type","button",3,"click"],[1,"typeContainer"],["class","specializationType subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"specializationType","subHeading",3,"ngClass","click"]],template:function(e,i){1&e&&(k(0,I4,60,33,"div",0),k(1,P4,18,2,"div",0),k(2,O4,25,3,"div",0),k(3,F4,1,1,"ng-template",null,1,Rt),k(5,L4,1,1,"ng-template",null,2,Rt),k(7,U4,1,1,"ng-template",null,3,Rt),k(9,z4,12,1,"ng-template",null,4,Rt)),2&e&&(T("ngIf",i.animalAssigned&&!i.barn.isLocked),p(1),T("ngIf",!i.animalAssigned&&!i.barn.isLocked),p(1),T("ngIf",i.barn.isLocked))},directives:[zt,Va,ki,Rm,h4,Em,Ju,ju,Ol,Fn],pipes:[Ml],styles:['ngb-modal-backdrop{z-index:1050!important}.selectedBarnModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"unassign info back"}.unassign[_ngcontent-%COMP%]{grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.facilitySizeFilter[_ngcontent-%COMP%]{grid-area:facilitySizeFilter}.resetFiltersHeader[_ngcontent-%COMP%]{grid-area:resetFiltersHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.changeTrainingHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.specializationType[_ngcontent-%COMP%]{width:25%;-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedSpecialization[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.sizeButtonSpacing[_ngcontent-%COMP%]{width:4rem}.sizeSpacing[_ngcontent-%COMP%]{margin-left:4rem}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}']}),t})();function q4(t,n){if(1&t){const e=re();m(0,"div",13)(1,"app-barn",4),N("selectedBarn",function(r){return V(e),R(2).goToBarn(r)}),g()()}2&t&&(p(1),T("barnNumber",4))}function Y4(t,n){if(1&t){const e=re();m(0,"div",14)(1,"app-barn",4),N("selectedBarn",function(r){return V(e),R(2).goToBarn(r)}),g()()}2&t&&(p(1),T("barnNumber",5))}function X4(t,n){if(1&t){const e=re();m(0,"div",15)(1,"app-barn",4),N("selectedBarn",function(r){return V(e),R(2).goToBarn(r)}),g()()}2&t&&(p(1),T("barnNumber",6))}function Q4(t,n){if(1&t){const e=re();m(0,"div",16)(1,"app-barn",4),N("selectedBarn",function(r){return V(e),R(2).goToBarn(r)}),g()()}2&t&&(p(1),T("barnNumber",7))}function Z4(t,n){if(1&t){const e=re();m(0,"div",17)(1,"app-barn",4),N("selectedBarn",function(r){return V(e),R(2).goToBarn(r)}),g()()}2&t&&(p(1),T("barnNumber",8))}function J4(t,n){if(1&t){const e=re();m(0,"div",18)(1,"app-barn",4),N("selectedBarn",function(r){return V(e),R(2).goToBarn(r)}),g()()}2&t&&(p(1),T("barnNumber",9))}function K4(t,n){if(1&t){const e=re();m(0,"div",2)(1,"div",3)(2,"app-barn",4),N("selectedBarn",function(r){return V(e),R().goToBarn(r)}),g()(),m(3,"div",5)(4,"app-barn",4),N("selectedBarn",function(r){return V(e),R().goToBarn(r)}),g()(),m(5,"div",6)(6,"app-barn",4),N("selectedBarn",function(r){return V(e),R().goToBarn(r)}),g()(),k(7,q4,2,1,"div",7),k(8,Y4,2,1,"div",8),k(9,X4,2,1,"div",9),k(10,Q4,2,1,"div",10),k(11,Z4,2,1,"div",11),k(12,J4,2,1,"div",12),g()}if(2&t){const e=R();p(1),T("ngClass",e.tutorialActive?"tutorialActive":""),p(1),T("barnNumber",1),p(2),T("barnNumber",2),p(2),T("barnNumber",3),p(1),T("ngIf",e.barnRow2IsUnlocked),p(1),T("ngIf",e.barnRow2IsUnlocked),p(1),T("ngIf",e.barnRow2IsUnlocked),p(1),T("ngIf",e.barnRow3IsUnlocked),p(1),T("ngIf",e.barnRow3IsUnlocked),p(1),T("ngIf",e.barnRow3IsUnlocked)}}function eH(t,n){if(1&t){const e=re();m(0,"div",19)(1,"app-selected-barn",20),N("returnToBarnEmitter",function(){return V(e),R().goToBarn(0)}),g()()}if(2&t){const e=R();p(1),T("selectedBarnNumber",e.selectedBarn)}}let tH=(()=>{class t{constructor(e,i,r){this.lookupService=e,this.componentCommunicationService=i,this.globalService=r,this.selectedBarn=0,this.tutorialActive=!1,this.barnRow2IsUnlocked=!1,this.barnRow3IsUnlocked=!1,this.barnRow4IsUnlocked=!1}ngOnInit(){var e;this.barnRow2IsUnlocked=this.lookupService.isItemUnlocked("barnRow2"),this.barnRow3IsUnlocked=this.lookupService.isItemUnlocked("barnRow3"),this.barnRow4IsUnlocked=this.lookupService.isItemUnlocked("barnRow4"),!this.globalService.globalVar.tutorialCompleted&&1===this.globalService.globalVar.currentTutorialId&&(this.tutorialActive=!0),!this.globalService.globalVar.tutorialCompleted&&6===this.globalService.globalVar.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(i=>i.type===I.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.tutorialActive=!0),this.subscription=this.componentCommunicationService.getBarnView().subscribe(i=>{i>0&&(this.selectedBarn=i)})}goToBarn(e){this.selectedBarn=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(M(Cn),M(Ts),M(Ze))},t.\u0275cmp=De({type:t,selectors:[["app-barn-view"]],decls:2,vars:2,consts:[["class","gridContainer","id","barnViewDiv",4,"ngIf"],["class","selectedBarnDiv",4,"ngIf"],["id","barnViewDiv",1,"gridContainer"],[1,"barn1","barnDefault",3,"ngClass"],[3,"barnNumber","selectedBarn"],[1,"barn2","barnDefault"],[1,"barn3","barnDefault"],["class","barn4 barnDefault",4,"ngIf"],["class","barn5 barnDefault",4,"ngIf"],["class","barn6 barnDefault",4,"ngIf"],["class","barn7 barnDefault",4,"ngIf"],["class","barn8 barnDefault",4,"ngIf"],["class","barn9 barnDefault",4,"ngIf"],[1,"barn4","barnDefault"],[1,"barn5","barnDefault"],[1,"barn6","barnDefault"],[1,"barn7","barnDefault"],[1,"barn8","barnDefault"],[1,"barn9","barnDefault"],[1,"selectedBarnDiv"],[3,"selectedBarnNumber","returnToBarnEmitter"]],template:function(e,i){1&e&&(k(0,K4,13,10,"div",0),k(1,eH,2,1,"div",1)),2&e&&(T("ngIf",0===i.selectedBarn),p(1),T("ngIf",i.selectedBarn>0))},directives:[zt,ki,l4,W4],styles:['#barnViewDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:33.333%;grid-template-rows:33.333%;justify-content:stretch;grid-template-areas:"barn1 barn2 barn3" "barn4 barn5 barn6" "barn7 barn8 barn9"}.selectedBarnDiv[_ngcontent-%COMP%]{height:100%}.barnDefault[_ngcontent-%COMP%]{justify-self:stretch;display:grid;align-items:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none}.lockedBarnRow[_ngcontent-%COMP%]{border:none!important}.barn1[_ngcontent-%COMP%]{grid-area:barn1}.barn2[_ngcontent-%COMP%]{grid-area:barn2}.barn3[_ngcontent-%COMP%]{grid-area:barn3}.barn4[_ngcontent-%COMP%]{grid-area:barn4}.barn5[_ngcontent-%COMP%]{grid-area:barn5}.barn6[_ngcontent-%COMP%]{grid-area:barn6}.barn7[_ngcontent-%COMP%]{grid-area:barn7}.barn8[_ngcontent-%COMP%]{grid-area:barn8}.barn9[_ngcontent-%COMP%]{grid-area:barn9}.tutorialActive[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-color:red}']}),t})();function nH(t,n){1&t&&(m(0,"span",3),w(1," Primary "),g())}function iH(t,n){1&t&&(m(0,"span",4),w(1," Auto Run Free Race "),g())}function rH(t,n){1&t&&(m(0,"span",7),w(1," / "),g())}function aH(t,n){if(1&t&&(m(0,"span",5),w(1),k(2,rH,2,0,"span",6),g()),2&t){const e=n.$implicit,i=n.index,r=R();T("ngClass",r.getColorClass(e)),p(1),z(" ",e.name,""),p(1),T("ngIf",i<r.deck.selectedAnimals.length-1)}}let km=(()=>{class t{constructor(e){this.globalService=e}ngOnInit(){if(0===this.deckNumber||null==this.deckNumber){var e=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=e&&(this.deck=e)}else{var i=this.globalService.globalVar.animalDecks.find(r=>r.deckNumber===this.deckNumber);null!=i&&(this.deck=i)}}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}}return t.\u0275fac=function(e){return new(e||t)(M(Ze))},t.\u0275cmp=De({type:t,selectors:[["app-animal-deck"]],inputs:{deckNumber:"deckNumber"},decls:8,vars:4,consts:[["class","primaryText keyword rightSpaced",4,"ngIf"],["class","primaryText keyword",4,"ngIf"],["class","coloredText",3,"ngClass",4,"ngFor","ngForOf"],[1,"primaryText","keyword","rightSpaced"],[1,"primaryText","keyword"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"]],template:function(e,i){1&e&&(m(0,"div"),k(1,nH,2,0,"span",0),k(2,iH,2,0,"span",1),O(3,"br"),m(4,"strong"),w(5),g(),w(6," - "),k(7,aH,3,3,"span",2),g()),2&e&&(p(1),T("ngIf",i.deck.isPrimaryDeck&&void 0!==i.deckNumber&&i.deckNumber>0),p(1),T("ngIf",i.deck.autoRunFreeRace&&void 0!==i.deckNumber&&i.deckNumber>0),p(3),Ie(i.deck.name),p(2),T("ngForOf",i.deck.selectedAnimals))},directives:[zt,Fn,ki],styles:[".primaryText[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary);padding-left:.5rem;padding-right:.5rem}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}"]}),t})();function oH(t,n){if(1&t&&(m(0,"span"),w(1),g()),2&t){const e=R();p(1),z("Race ",e.index+1," ")}}function sH(t,n){if(1&t&&(m(0,"p",5),w(1),sn(2,"number"),m(3,"span",6),w(4),g()()),2&t){const e=n.$implicit,i=R();T("ngClass",i.getNoRacerClass(e)),p(1),Hi(" ",vn(2,5,e.distance,"1.2-2")," Meters of ",e.getTerrainName()," "),p(2),T("ngClass",i.getColorClass(e)),p(1),Ie(e.getCourseTypeName())}}function lH(t,n){if(1&t&&(m(0,"p"),w(1),g()),2&t){const e=R();p(1),Ie(e.race.isCompleted?"Completed":e.cannotRace?"Cannot Run":"Start")}}function cH(t,n){if(1&t&&(m(0,"div",7),w(1),g()),2&t){const e=R();p(1),z(" ",e.popoverText," ")}}const uH=function(t){return{raceNotAllowed:t}};let aD=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.missingRacers=[]}ngOnInit(){this.cannotRace=!1;var e=this.lookupService.getPrimaryDeck();this.race.raceLegs.forEach(i=>{null==e||0===e.selectedAnimals.length?(this.cannotRace=!0,this.missingRacers.push(i.courseType)):(null==e?void 0:e.selectedAnimals.some(r=>r.raceCourseType===i.courseType))||(this.cannotRace=!0,this.missingRacers.push(i.courseType))}),!this.cannotRace&&this.race.isCompleted&&(this.cannotRace=!0),this.race.localRaceType===Vt.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(this.cannotRace=!0),this.popoverText=this.cannotRace?this.getErrorPopoverText():this.getSuccessfulPopoverText()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getCourseTypeName(),mountainColor:"Mountain"===e.getCourseTypeName(),waterColor:"Ocean"===e.getCourseTypeName(),tundraColor:"Tundra"===e.getCourseTypeName(),volcanicColor:"Volcanic"===e.getCourseTypeName()}:{}}getNoRacerClass(e){return{noRacer:!this.hasRacerForLeg(e)}}hasRacerForLeg(e){var i=!1,r=this.lookupService.getPrimaryDeck();return null==r||0===r.selectedAnimals.length||r.selectedAnimals.some(a=>a.raceCourseType===e.courseType)&&(i=!0),i}getErrorPopoverText(){var e="You cannot do this race for the following reasons: \n\n";return this.missingRacers.forEach(i=>{e+="-Missing "+P[i]+" racer\n"}),this.race.isCompleted&&(e+="-You've already completed this race."),this.race.localRaceType===Vt.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(e+="-You've met your limit of free races. More will be available soon."),e}getSuccessfulPopoverText(){var e="",i=1;return this.race.raceLegs.forEach(r=>{null!=r.terrain&&(e+=this.lookupService.getTerrainPopoverText(r.terrain,r)),i<this.race.raceLegs.length&&(e+="\n"),i+=1}),e}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Cn))},t.\u0275cmp=De({type:t,selectors:[["app-race-description"]],inputs:{index:"index",race:"race",showStartText:"showStartText"},decls:8,vars:8,consts:[[1,"raceDescription"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngClass","ngbPopover","disablePopover"],[3,"ngClass",4,"ngFor","ngForOf"],["popContent",""],[3,"ngClass"],[1,"coloredText",3,"ngClass"],[1,"popoverClass"]],template:function(e,i){if(1&e&&(m(0,"div",0),k(1,oH,2,1,"span",1),O(2,"br"),m(3,"div",2),k(4,sH,5,8,"p",3),k(5,lH,2,1,"p",1),g()(),k(6,cH,2,1,"ng-template",null,4,Rt)),2&e){const r=It(7);p(1),T("ngIf",null!=i.index&&i.index>-1),p(2),T("ngClass",yr(6,uH,i.cannotRace))("ngbPopover",r)("disablePopover",""===i.popoverText),p(1),T("ngForOf",i.race.raceLegs),p(1),T("ngIf",i.showStartText)}},directives:[zt,ki,Va,Fn],pipes:[Ml],styles:[".raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}"]}),t})();function dH(t,n){if(1&t){const e=re();m(0,"div",6),N("click",function(){const a=V(e).$implicit;return R().selectCircuitRace(a)}),O(1,"app-race-description",7),g()}if(2&t){const e=n.$implicit,i=n.index,r=R();qh("circuitRace",i+1,""),T("ngClass",r.tutorialActive?"tutorialActive":""),p(1),T("index",i)("race",e)("showStartText",!0)}}function fH(t,n){if(1&t&&(m(0,"div",8),w(1),g()),2&t){const e=R();p(1),z(" ",e.circuitRankUpDescription," ")}}let hH=(()=>{class t{constructor(e,i){this.globalService=e,this.utilityService=i,this.raceSelected=new ge,this.tutorialActive=!1}ngOnInit(){this.handleTutorial();var e=this.globalService.globalVar.circuitRank;this.circuitRank=this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank).toString():this.globalService.globalVar.circuitRank,this.circuitRankUpDescription=this.globalService.globalVar.circuitRankUpRewardDescription,this.availableCircuitRaces=this.globalService.globalVar.circuitRaces.filter(r=>r.requiredRank===e);var i=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);this.availableCircuitRaces.forEach(r=>{void 0!==i&&(r.raceLegs=this.globalService.reorganizeLegsByDeckOrder(r.raceLegs,i))})}selectCircuitRace(e){var i=!0,r=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck);null!=r&&0!==r.selectedAnimals.length?(e.raceLegs.forEach(a=>{(null==r?void 0:r.selectedAnimals.some(o=>o.raceCourseType===a.courseType))||(i=!1)}),e.isCompleted&&(i=!1),!this.globalService.globalVar.tutorialCompleted&&4===this.globalService.globalVar.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.currentTutorialId+=1),i&&this.raceSelected.emit(e)):i=!1}handleTutorial(){var e;!this.globalService.globalVar.tutorialCompleted&&3===this.globalService.globalVar.currentTutorialId&&(this.tutorialActive=!0,this.globalService.globalVar.currentTutorialId+=1,this.globalService.globalVar.showTutorial=!0),!this.globalService.globalVar.tutorialCompleted&&5===this.globalService.globalVar.currentTutorialId&&(this.globalService.globalVar.showTutorial=!0),!this.globalService.globalVar.tutorialCompleted&&6===this.globalService.globalVar.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(i=>i.type===I.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.globalService.globalVar.showTutorial=!0)}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(qr))},t.\u0275cmp=De({type:t,selectors:[["app-circuit-view"]],outputs:{raceSelected:"raceSelected"},decls:13,vars:3,consts:[[1,"circuitViewDiv"],[1,"circuitRaceHeader","s4Heading"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"circuitRaceGrid"],[3,"ngClass","class","click",4,"ngFor","ngForOf"],["circuitRewardContent",""],[3,"ngClass","click"],[3,"index","race","showStartText"],[1,"popoverClass"]],template:function(e,i){if(1&e&&(m(0,"div",0)(1,"div",1)(2,"span",2),w(3,"Rank "),m(4,"strong"),w(5),g(),w(6," Circuit"),g()(),O(7,"app-animal-deck")(8,"hr"),m(9,"div",3),k(10,dH,2,7,"div",4),g()(),k(11,fH,2,1,"ng-template",null,5,Rt)),2&e){const r=It(12);p(2),T("ngbPopover",r),p(3),Ie(i.circuitRank),p(5),T("ngForOf",i.availableCircuitRaces)}},directives:[Va,km,Fn,ki,aD],styles:['.circuitRaceHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.circuitRaceGrid[_ngcontent-%COMP%]{height:100%;display:grid;text-align:center;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"circuitRace1 circuitRace2 circuitRace3"}.circuitRace1[_ngcontent-%COMP%]{grid-area:circuitRace1}.circuitRace2[_ngcontent-%COMP%]{grid-area:circuitRace2}.circuitRace3[_ngcontent-%COMP%]{grid-area:circuitRace3}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}']}),t})();function pH(t,n){if(1&t){const e=re();m(0,"div",13),N("click",function(){V(e);const r=R(2);return r.selectLocalRace(r.availableMonoRace)}),m(1,"span",7),w(2,"Mono Race "),m(3,"strong"),w(4),g()(),O(5,"br")(6,"app-race-description",14),g()}if(2&t){const e=R(2);p(4),Ie(e.monoRaceRank),p(2),T("race",e.availableMonoRace)("showStartText",!0)}}function gH(t,n){1&t&&(m(0,"div",15),w(1," Next Mono Race Available After Circuit Rank Up "),g())}function mH(t,n){if(1&t&&(m(0,"div",10),k(1,pH,7,3,"div",11),k(2,gH,2,0,"div",12),O(3,"hr"),g()),2&t){const e=R();p(1),T("ngIf",null!=e.availableMonoRace),p(1),T("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function vH(t,n){if(1&t){const e=re();m(0,"div",19),N("click",function(){V(e);const r=R(2);return r.selectLocalRace(r.availableDuoRace)}),m(1,"span",7),w(2,"Duo Race "),m(3,"strong"),w(4),g()(),O(5,"br")(6,"app-race-description",14),g()}if(2&t){const e=R(2);p(4),Ie(e.duoRaceRank),p(2),T("race",e.availableDuoRace)("showStartText",!0)}}function _H(t,n){1&t&&(m(0,"div",20),w(1," Next Duo Race Available After Circuit Rank Up "),g())}function bH(t,n){if(1&t&&(m(0,"div",16),k(1,vH,7,3,"div",17),k(2,_H,2,0,"div",18),O(3,"hr"),g()),2&t){const e=R();p(1),T("ngIf",null!=e.availableDuoRace),p(1),T("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function yH(t,n){if(1&t){const e=re();m(0,"div",24),N("click",function(){V(e);const r=R(2);return r.selectLocalRace(r.availableRainbowRace)}),m(1,"span",7),w(2,"Rainbow Race "),m(3,"strong"),w(4),g()(),O(5,"br")(6,"app-race-description",14),g()}if(2&t){const e=R(2);p(4),Ie(e.rainbowRaceRank),p(2),T("race",e.availableRainbowRace)("showStartText",!0)}}function CH(t,n){1&t&&(m(0,"div",25),w(1," Next Rainbow Race Available After Circuit Rank Up "),g())}function wH(t,n){if(1&t&&(m(0,"div",21),k(1,yH,7,3,"div",22),k(2,CH,2,0,"div",23),O(3,"hr"),g()),2&t){const e=R();p(1),T("ngIf",null!=e.availableRainbowRace),p(1),T("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}function SH(t,n){if(1&t){const e=re();m(0,"div",26),N("click",function(){const a=V(e).$implicit;return R().selectLocalRace(a)}),O(1,"app-race-description",27),g()}if(2&t){const e=n.$implicit,i=n.index;qh("localRace",i+1,""),p(1),T("index",i)("race",e)("showStartText",!0)}}let TH=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new ge,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){var e=this;this.availableLocalRaces=[];var i=this.getNextAvailableSpecialRace(Vt.Mono);void 0!==i&&(this.availableMonoRace=i);var r=this.getNextAvailableSpecialRace(Vt.Duo);void 0!==r&&(this.availableDuoRace=r);var a=this.getNextAvailableSpecialRace(Vt.Rainbow);void 0!==a&&(this.availableRainbowRace=a),this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?(null!=this.availableMonoRace&&(this.monoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableMonoRace.requiredRank).toString()),null!=this.availableDuoRace&&(this.duoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableDuoRace.requiredRank).toString()),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableRainbowRace.requiredRank).toString())):(null!=this.availableMonoRace&&(this.monoRaceRank=this.availableMonoRace.requiredRank),null!=this.availableDuoRace&&(this.duoRaceRank=this.availableDuoRace.requiredRank),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.availableRainbowRace.requiredRank)),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.areMonoRacesAvailable=this.lookupService.isItemUnlocked("monoRace"),this.areDuoRacesAvailable=this.lookupService.isItemUnlocked("duoRace"),this.areRainbowRacesAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.totalFreeRaces=this.lookupService.getTotalFreeRacesPerPeriod();var o=900,s=this.globalService.globalVar.modifiers.find(l=>"freeRacesTimePeriodModifier"===l.text);void 0!==s&&(o=s.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var l=_d(function*(c){var u=o-e.globalService.globalVar.freeRaceTimePeriodCounter,d=Math.floor(u/60),f=u-60*d,h=Math.floor(f).toString();f<10&&(h=f<1||f>59?"00":String(h).padStart(2,"0")),e.freeRaceTimer=d+":"+h,e.freeRacesRemaining=e.lookupService.getRemainingFreeRacesPerPeriod()});return function(c){return l.apply(this,arguments)}}())}getNextAvailableSpecialRace(e){return e===Vt.Mono&&this.globalService.GenerateMonoRaces(this.globalService.globalVar.monoRank),e===Vt.Duo&&this.globalService.GenerateDuoRaces(this.globalService.globalVar.duoRank),e===Vt.Rainbow&&this.globalService.GenerateRainbowRaces(this.globalService.globalVar.rainbowRank),this.globalService.globalVar.localRaces.find(i=>i.localRaceType===e)}sortByRankRequired(e,i){return e.requiredRank>i.requiredRank?1:i.requiredRank>e.requiredRank?-1:0}selectLocalRace(e){var i=!0,r=e.localRaceType===Vt.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(s=>s.raceCourseType===o.courseType))||(i=!1)}),r&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(i=!1),i&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):i=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(qr),M(Cn),M(Tr))},t.\u0275cmp=De({type:t,selectors:[["app-local-view"]],outputs:{raceSelected:"raceSelected"},decls:18,vars:7,consts:[[1,"localViewDiv"],[1,"localRaceHeader"],[1,"allLocalRaces"],["id","monoRaceSection",4,"ngIf"],["id","duoRaceSection",4,"ngIf"],["id","rainbowRaceSection",4,"ngIf"],["id","localRaceSection"],[1,"s4Heading"],[1,"localRaceGrid"],[3,"class","click",4,"ngFor","ngForOf"],["id","monoRaceSection"],["class","monoRace",3,"click",4,"ngIf"],["class","monoRace",4,"ngIf"],[1,"monoRace",3,"click"],[3,"race","showStartText"],[1,"monoRace"],["id","duoRaceSection"],["class","duoRace",3,"click",4,"ngIf"],["class","duoRace",4,"ngIf"],[1,"duoRace",3,"click"],[1,"duoRace"],["id","rainbowRaceSection"],["class","rainbowRace",3,"click",4,"ngIf"],["class","rainbowRace",4,"ngIf"],[1,"rainbowRace",3,"click"],[1,"rainbowRace"],[3,"click"],[3,"index","race","showStartText"]],template:function(e,i){1&e&&(m(0,"div",0),O(1,"div",1)(2,"app-animal-deck")(3,"hr"),m(4,"div",2),k(5,mH,4,2,"div",3),k(6,bH,4,2,"div",4),k(7,wH,4,2,"div",5),m(8,"div",6)(9,"span",7),w(10,"Free Races"),g(),O(11,"br"),m(12,"em"),w(13),g(),O(14,"br")(15,"br"),m(16,"div",8),k(17,SH,2,6,"div",9),g()()()()),2&e&&(p(5),T("ngIf",i.areMonoRacesAvailable),p(1),T("ngIf",i.areDuoRacesAvailable),p(1),T("ngIf",i.areRainbowRacesAvailable),p(6),Wh(" ",i.freeRacesRemaining," of ",i.totalFreeRaces," remaining -- resets in ",i.freeRaceTimer,""),p(4),T("ngForOf",i.availableLocalRaces))},directives:[km,zt,aD,Fn],styles:['.allLocalRaces[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.localRaceGrid[_ngcontent-%COMP%]{text-align:center;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"localRace1 localRace2 localRace3"}.localRace1[_ngcontent-%COMP%]{grid-area:localRace1}.localRace2[_ngcontent-%COMP%]{grid-area:localRace2}.localRace3[_ngcontent-%COMP%]{grid-area:localRace3}']}),t})();const DH=["raceCanvas"];let MH=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.themeService=o,this.skipRace=!1,this.pauseRace=!1,this.lengthCompleted=0,this.frameModifier=60,this.mountainEndingY=0,this.icyPatchBackgroundLines=[],this.volcanoYOffset=0,this.volcanoRadiusXModifier=6,this.backgroundVolcanoYStart=0,this.lastPathEndingX=0,this.lastPathEndingY=0,this.lastPreviousSeconds=0,this.totalRaceModeXDistance=0,this.totalRaceModeYDistance=0,this.deltaY=0,this.yOffscreen=0,this.overviewYOffsetModifier=1,this.visibleDistanceXLeft=0,this.visibleDistanceYTop=0,this.visibleDistanceXRight=0,this.visibleDistanceYBottom=0,this.mountainClimbPercent=.5}ngOnInit(){this.globalService.globalVar.userIsRacing=!0,this.skipSubscription=this.skip.subscribe(()=>{this.skipRace=!0,this.isRaceFinished=!0}),this.pauseSubscription=this.pause.subscribe(()=>{this.pauseRace=!this.pauseRace}),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.skipRace=!0,this.isRaceFinished=!0)}ngAfterViewInit(){this.totalLegs=this.race.raceLegs.length,this.setupCanvas(),this.canvasXDistanceScale=this.canvasWidth/this.race.length;var e=this.raceCanvas.nativeElement.getContext("2d");e.lineWidth=6;var i=0;this.mountainClimbPercent=this.utilityService.getRandomNumber(.3,.7);var r=this.race.raceUI.timeToCompleteByFrame[this.race.raceUI.timeToCompleteByFrame.length-1];this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{performance.now(),e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.lineWidth=6,this.pauseRace||(i+=a),i>=r||this.isRaceFinished||this.skipRace?this.displayOverview(e,!0):this.displayRace(e,i),performance.now()})}setupCanvas(){this.raceCanvas.nativeElement.style.width="100%",this.raceCanvas.nativeElement.style.height="100%",this.raceCanvas.nativeElement.width=this.raceCanvas.nativeElement.offsetWidth,this.raceCanvas.nativeElement.height=this.raceCanvas.nativeElement.offsetHeight,this.canvasHeight=this.raceCanvas.nativeElement.height,this.canvasWidth=this.raceCanvas.nativeElement.width}displayOverview(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.lengthCompleted=0,this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=0,a=!0,l=0;if(this.race.raceLegs.forEach(_=>{void 0!==_.pathData&&0!==_.pathData.length&&(l=0,_.pathData.forEach(D=>{if(_.courseType===P.Flatland)e.lineCap="round",D.routeDesign===ae.Regular&&this.drawRegularFlatlandOverview(e,D,1,1),D.routeDesign===ae.S&&this.drawSFlatlandOverview(e,D,1,1),D.routeDesign===ae.Bumps&&this.drawBumpsFlatlandOverview(e,D,1,1);else if(_.courseType===P.Mountain){e.lineCap="round";var E=this.getCurrentAnimalRacingCourse(this.lengthCompleted)!==P.Mountain||r<_.distance*this.mountainClimbPercent;D.routeDesign===ae.Regular&&this.drawRegularMountainOverview(e,D,1,this.overviewYOffsetModifier,E),D.routeDesign===ae.Crevasse&&this.drawCrevasseMountainOverview(e,D,1,this.overviewYOffsetModifier,E),D.routeDesign===ae.Gaps&&this.drawGapsMountainOverview(e,D,1,this.overviewYOffsetModifier,E),r+=D.length}else _.courseType===P.Ocean&&(e.lineCap="round",D.routeDesign===ae.Regular&&this.drawRegularWaterOverview(e,D,1,1,a),D.routeDesign===ae.Waves&&this.drawWavesWaterOverview(e,D,1,1,a),D.routeDesign===ae.Dive&&this.drawDiveWaterOverview(e,D,1,1,a),a=!a);_.courseType===P.Tundra&&(e.lineCap="round",D.routeDesign===ae.Regular&&this.drawRegularTundraOverview(e,D,1,1),D.routeDesign===ae.Cavern&&this.drawCavernTundraOverview(e,D,1,1),D.routeDesign===ae.Hills&&this.drawHillsTundraOverview(e,D,1,1)),_.courseType===P.Volcanic&&(e.lineCap="round",this.backgroundVolcanoYStart=this.lastPathEndingY,(D.routeDesign===ae.Regular||D.routeDesign===ae.FirstRegular||D.routeDesign===ae.LastRegular)&&this.drawRegularVolcanoOverview(e,0,l,D,_.pathData.length,1,1),D.routeDesign===ae.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,l,D,_.pathData.length,1,1)),this.lengthCompleted+=D.length,l+=1,this.lastPathEndingY<0&&(this.yOffscreen=this.lastPathEndingY)}))}),this.yOffscreen<0&&(this.overviewYOffsetModifier=this.overviewYOffsetModifier/1.25,this.yOffscreen=0),i){this.globalService.globalVar.userIsRacing=!1,e.globalCompositeOperation="source-atop";var u=this.race.raceUI.distanceCoveredByFrame[this.race.raceUI.distanceCoveredByFrame.length-1]/this.race.length,d=0,f=0,h=!1;this.race.raceLegs.forEach(_=>{if(!h){var D=(d+=_.distance)/this.race.length;D>u&&(D=u,h=!0);var E=(D-f)*this.canvasWidth;e.fillStyle=this.getAnimalDistanceColorByType(_.courseType),e.fillRect(f*this.canvasWidth,0,E,this.canvasHeight),f=D}})}if(this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(_=>{"Hills"===_[0]?this.drawHillsBackgroundTundraOverview(e,_):this.drawIcyPatchBackgroundTundraOverview(e,_)}),this.race.raceLegs.some(_=>_.courseType===P.Volcanic)){var C,v=0,b=!1;this.race.raceLegs.forEach(_=>{this.race.raceLegs.some(D=>D.courseType===P.Volcanic)&&(_.courseType!==P.Volcanic&&!b&&(v+=_.distance),_.courseType===P.Volcanic&&(b=!0))}),C=this.race.raceLegs.find(_=>_.courseType===P.Volcanic).distance;var S=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,0,v,v+C,1,1),e.globalCompositeOperation=S}}}displayRace(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.lineCap="round",e.strokeStyle="gray",this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=10,a=10;this.totalRaceModeXDistance=this.race.length*r;var o=Math.round(i*this.frameModifier),s=this.race.raceUI.distanceCoveredByFrame[o],l=0;this.averageDistancePerSecond=this.race.length/this.race.raceUI.timeToCompleteByFrame[o];var c=0,u=0,d=!1;this.race.raceLegs.forEach(se=>{d||(s>=c&&s<c+se.distance&&(d=!0,this.currentLeg=se),d||(u+=se.distance)),c+=se.distance});var h=s-u,v=0;if(this.currentLeg.courseType===P.Mountain){var b=this.currentLeg.distance*this.mountainClimbPercent,C=0,S=!1,_=0;this.currentLeg.pathData.forEach(se=>{S||(b>=_&&b<_+se.length&&(S=!0,C=_+se.length-b),_+=se.length)}),S=!1;var D=0,E=0;this.currentLeg.pathData.forEach(se=>{if(!S){if(h>=D&&h<D+se.length&&(S=!0,E=h-D,se.routeDesign===ae.Crevasse)){var me=se.length/2*3,di=3*E;v-=E<se.length/2?di:me-(di-me)}D+=se.length}});var A=b+C;this.mountainEndingY=l=h<A?h+v:A-(h-A)+v}if(l=this.mountainEndingY,this.currentLeg.courseType===P.Volcanic&&!this.pauseRace){var y=this.currentLeg.pathData[0].length/r;if(h>y){var Y=this.currentLeg.distance/this.volcanoRadiusXModifier,G=y/this.currentLeg.distance,H=h/this.currentLeg.distance,X=(this.currentLeg.distance-2*y)/this.currentLeg.distance/2;if(H>G&&H<1-G){var Z=100/(100-2*G),at=-Y,_e=Y*Math.pow(1.05,-100*(H>.5?2*(X-((H-G)*Z-X)):(H-G)*Z*2))+at;this.volcanoYOffset=_e}}}var he=s*this.canvasXDistanceScale*r-this.canvasWidth/2,it=(l+=this.volcanoYOffset)*this.canvasXDistanceScale*a;if(this.visibleDistanceXLeft=he,this.visibleDistanceXRight=he+this.canvasWidth,e.globalCompositeOperation="source-over",s>=this.race.length||o>this.race.raceUI.distanceCoveredByFrame.length)return void(this.isRaceFinished=!0);var Ht=0,ot=!0,Ke=0;this.race.raceLegs.forEach(se=>{void 0!==se.pathData&&0!==se.pathData.length&&(Ke=0,se.pathData.forEach(me=>{if(se.courseType===P.Flatland)me.routeDesign===ae.Regular&&this.drawRegularFlatlandOverview(e,me,r,a,he,it),me.routeDesign===ae.S&&this.drawSFlatlandOverview(e,me,r,a,he,it),me.routeDesign===ae.Bumps&&this.drawBumpsFlatlandOverview(e,me,r,a,he,it);else if(se.courseType===P.Mountain){var di=Ht<se.distance*this.mountainClimbPercent;me.routeDesign===ae.Regular&&this.drawRegularMountainOverview(e,me,r,a,di,he,it),me.routeDesign===ae.Crevasse&&this.drawCrevasseMountainOverview(e,me,r,a,di,he,it),me.routeDesign===ae.Gaps&&this.drawGapsMountainOverview(e,me,r,a,di,he,it),Ht+=me.length}else se.courseType===P.Ocean&&(me.routeDesign===ae.Regular&&this.drawRegularWaterOverview(e,me,r,a,ot,he,it),me.routeDesign===ae.Waves&&this.drawWavesWaterOverview(e,me,r,a,ot,he,it),me.routeDesign===ae.Dive&&this.drawDiveWaterOverview(e,me,r,a,ot,he,it),ot=!ot);se.courseType===P.Tundra&&(me.routeDesign===ae.Regular&&this.drawRegularTundraOverview(e,me,r,a,he,it),me.routeDesign===ae.Cavern&&this.drawCavernTundraOverview(e,me,r,a,he,it),me.routeDesign===ae.Hills&&this.drawHillsTundraOverview(e,me,r,a,he,it)),se.courseType===P.Volcanic&&(this.backgroundVolcanoYStart=this.lastPathEndingY,(me.routeDesign===ae.Regular||me.routeDesign===ae.FirstRegular||me.routeDesign===ae.LastRegular)&&this.drawRegularVolcanoOverview(e,0,Ke,me,se.pathData.length,r,a,he,it),me.routeDesign===ae.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,Ke,me,se.pathData.length,r,a,he,it)),Ke+=1,this.lengthCompleted+=me.length}))}),e.globalCompositeOperation="source-atop";var ct=0,vt=u*this.canvasXDistanceScale*r,Lt=this.race.raceLegs.indexOf(this.currentLeg),wt=null;Lt>0&&(wt=this.race.raceLegs[Lt-1]),null!=wt&&vt>=this.visibleDistanceXLeft&&vt<=this.visibleDistanceXRight?(ct=(vt-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=this.getAnimalDistanceColorByType(wt.courseType),e.fillRect(0,0,this.canvasWidth*ct,this.canvasHeight),e.fillStyle=this.getAnimalDistanceColorByType(this.currentLeg.courseType),e.fillRect(this.canvasWidth*ct,0,this.canvasWidth/2-this.canvasWidth*ct,this.canvasHeight)):(e.fillStyle=this.getAnimalDistanceColor(s),e.fillRect(0,0,this.canvasWidth/2,this.canvasHeight));var ut=this.getAnimalRacerColor(s);(this.race.raceUI.racerEffectByFrame[o]===zi.LostFocus||this.race.raceUI.racerEffectByFrame[o]===zi.LostStamina||this.race.raceUI.racerEffectByFrame[o]===zi.Stumble)&&(ut=this.utilityService.shadeColor(ut,-90)),this.race.raceUI.racerEffectByFrame[o]===zi.Burst&&(ut=this.utilityService.shadeColor(ut,90)),e.fillStyle=ut,e.fillRect(this.canvasWidth/2-5,0,5,this.canvasHeight),this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(se=>{"Hills"===se[0]?this.drawHillsBackgroundTundraOverview(e,se):this.drawIcyPatchBackgroundTundraOverview(e,se)}),e.globalCompositeOperation="source-atop";var zn=this.averageDistancePerSecond/this.frameModifier*o;if(this.drawRacer(e,zn*this.canvasXDistanceScale*r,"black"),this.lookupService.getResourceByName("Money Mark")>0){var Nn=.75,qn=this.globalService.globalVar.modifiers.find(se=>"moneyMarkPaceModifier"===se.text);null!=qn&&(Nn=qn.value),this.drawRacer(e,zn*this.canvasXDistanceScale*r*(1-Nn+1),"gold")}if(this.drawBreakpoints(e,r),this.race.raceLegs.some(se=>se.courseType===P.Volcanic)){var nn,tn=0,Tn=!1;this.race.raceLegs.forEach(se=>{this.race.raceLegs.some(me=>me.courseType===P.Volcanic)&&(se.courseType!==P.Volcanic&&!Tn&&(tn+=se.distance),se.courseType===P.Volcanic&&(Tn=!0))}),nn=this.race.raceLegs.find(se=>se.courseType===P.Volcanic).distance;var St=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,o,tn,tn+nn,r,a,he,it),e.globalCompositeOperation=St}}}getAnimalDistanceColor(e){var i="",r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(a.courseType===P.Flatland&&(i="#7d3f00"),a.courseType===P.Mountain&&(i="#1b630d"),a.courseType===P.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),a.courseType===P.Tundra&&(i="#28809c"),a.courseType===P.Volcanic&&(i="#8f1a1a")),r+=a.distance}),i}getAnimalDistanceColorByType(e){var i="";return e===P.Flatland&&(i="#7d3f00"),e===P.Mountain&&(i="#1b630d"),e===P.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===P.Tundra&&(i="#28809c"),e===P.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e){var i="",r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(a.courseType===P.Flatland&&(i="#D16900"),a.courseType===P.Mountain&&(i="#279113"),a.courseType===P.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#7463f7":"#0000FF"),a.courseType===P.Tundra&&(i="#1CA1C9"),a.courseType===P.Volcanic&&(i="#D92525")),r+=a.distance}),i}getCurrentAnimalRacingCourse(e){var i;i=P.Flatland;var r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(i=a.courseType),r+=a.distance}),i}getNextAnimalRacingCourse(e){var i;i=P.Flatland;var r=this.race.raceLegs.indexOf(e);return this.race.raceLegs.length>r&&(i=this.race.raceLegs[r+1].courseType),i}drawRacer(e,i,r){var a=0;i>=this.visibleDistanceXLeft&&i<=this.visibleDistanceXRight&&(a=(i-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=r,e.fillRect(this.canvasWidth*a-5,0,5,this.canvasHeight))}drawBreakpoints(e,i){for(var r=0,a=0;a<this.race.raceLegs.length;a++){var o=this.race.raceLegs[a],s=null;a<this.race.raceLegs.length-1&&(s=this.race.raceLegs[a+1]);var l=0,c=(r+o.distance)*this.canvasXDistanceScale*i;c>=this.visibleDistanceXLeft&&c<=this.visibleDistanceXRight&&(l=(c-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=null!==s?this.getAnimalDistanceColorByType(s.courseType):"pink",e.fillRect(this.canvasWidth*l-5,0,5,this.canvasHeight)),r+=o.distance}}drawRegularFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0),e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+s),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawSFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,f=.23*l,h=1.2173*f,v=.04*l,b=h,C=v+f,S=h,_=C+f,D=h,E=_,y=_,Y=h,G=y+f,H=h,X=G+f,Z=h,te=X;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.bezierCurveTo(c+d,u,c+v,u+b,c+C,u+S),e.bezierCurveTo(c+C,u+S,c+_,u+D,c+E,u),e.stroke(),e.beginPath(),e.moveTo(c+E,u),e.bezierCurveTo(c+E,u,c+y,u-Y,c+G,u-H),e.bezierCurveTo(c+G,u-H,c+X,u-Z,c+X,u),e.stroke(),e.beginPath(),e.moveTo(c+X,u),e.lineTo(c+te+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+te+d}drawBumpsFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,f=.115*l,h=f/3;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.lineTo(c+d+f/2,u-h),e.lineTo(c+d+f,u),e.stroke(),e.beginPath(),e.moveTo(c+d+f,u),e.lineTo(c+d+f+f/2,u-h),e.lineTo(c+d+2*f,u),e.stroke(),e.beginPath(),e.moveTo(c+d+2*f,u),e.lineTo(c+d+2*f+f/2,u-h),e.lineTo(c+d+3*f,u),e.stroke(),e.beginPath(),e.moveTo(c+d+3*f,u),e.lineTo(c+d+3*f+f/2,u-h),e.lineTo(c+d+4*f,u),e.stroke(),e.beginPath(),e.moveTo(c+d+4*f,u),e.lineTo(c+d+4*f+f/2,u-h),e.lineTo(c+d+5*f,u),e.stroke(),e.beginPath(),e.moveTo(c+d+5*f,u),e.lineTo(c+d+5*f+f/2,u-h),e.lineTo(c+d+6*f,u),e.stroke(),e.beginPath(),e.moveTo(c+d+6*f,u),e.lineTo(c+d+6*f+f/2,u-h),e.lineTo(c+d+7*f,u),e.stroke(),e.beginPath(),e.moveTo(c+d+7*f,u),e.lineTo(c+d+7*f+f/2,u-h),e.lineTo(c+d+8*f,u),e.stroke(),e.beginPath(),e.moveTo(c+d+8*f,u),e.lineTo(c+d+8*f+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawRegularMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0),e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),e.lineTo(this.lastPathEndingX+c-s,o?this.lastPathEndingY-u+l:this.lastPathEndingY+u+l),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawCrevasseMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,f=this.lastPathEndingY+l,v=c,b=u,C=2*b;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),o?(C=2*b-(b-0),e.lineTo(d+0,f-0),e.lineTo(d+0+v/2,f+C-0),e.lineTo(d+0+v,f-b-0),e.lineTo(d+0+v,f-b-0)):(e.lineTo(d+0,f+0),e.lineTo(d+0+v/2,f+C+0),e.lineTo(d+0+v,f+b+0),e.lineTo(d+0+v,f+b+0)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawGapsMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,f=this.lastPathEndingY+l,h=.04*c,v=.115*c,b=.115*u,C=.04*u;e.beginPath(),e.moveTo(d,f),o?(e.lineTo(d+h,f-C),e.moveTo(d+v+h,f-b-C),e.lineTo(d+2*v+h,f-2*b-C),e.moveTo(d+3*v+h,f-3*b-C),e.lineTo(d+4*v+h,f-4*b-C),e.moveTo(d+5*v+h,f-5*b-C),e.lineTo(d+6*v+h,f-6*b-C),e.moveTo(d+7*v+h,f-7*b-C),e.lineTo(d+8*v+h,f-8*b-C),e.lineTo(d+8*v+2*h,f-8*b-2*C)):(e.lineTo(d+h,f+C),e.moveTo(d+v+h,f+b+C),e.lineTo(d+2*v+h,f+2*b+C),e.moveTo(d+3*v+h,f+3*b+C),e.lineTo(d+4*v+h,f+4*b+C),e.moveTo(d+5*v+h,f+5*b+C),e.lineTo(d+6*v+h,f+6*b+C),e.moveTo(d+7*v+h,f+7*b+C),e.lineTo(d+8*v+h,f+8*b+C),e.lineTo(d+8*v+2*h,f+8*b+2*C)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawRegularWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,f=c/3,h=c/6,v=u+f,b=o?d+h:d-h,C=u+2*f,S=o?d+h:d-h,_=u+3*f,D=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(v,b,C,S,_,D),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawWavesWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,f=c/3,h=c/3,v=u+f/3,b=d,C=u+f/3,S=d-h,_=u+f,D=d-.6*h;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(v,b,C,S,_,D),e.stroke();var E=_-f/3,A=D-h/10,y=_-f/3,Y=D+.4*h,G=_,H=d;e.beginPath(),e.moveTo(_,D),e.bezierCurveTo(E,A,y,Y,G,H),e.stroke();var X=G+f/3,Z=H,te=G+f/3,Je=H-h,ke=G+f,at=H-.6*h;e.beginPath(),e.moveTo(G,H),e.bezierCurveTo(X,Z,te,Je,ke,at),e.stroke();var _e=ke-f/3,he=at-h/10,it=ke-f/3,Ht=at+.4*h,ot=ke,ln=d;e.beginPath(),e.moveTo(ke,at),e.bezierCurveTo(_e,he,it,Ht,ot,ln),e.stroke();var Ke=ot+f/3,ct=ln,vt=ot+f/3,Lt=ln-h,wt=ot+f,st=ln-.6*h;e.beginPath(),e.moveTo(ot,ln),e.bezierCurveTo(Ke,ct,vt,Lt,wt,st),e.stroke();var ye=wt-f/3,ut=st-h/10,zn=wt-f/3,cn=st+.4*h,Wn=wt,Nn=d;e.beginPath(),e.moveTo(wt,st),e.bezierCurveTo(ye,ut,zn,cn,Wn,Nn),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawDiveWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,f=c/3,h=c/2,v=u,b=o?d+2*h:d-2*h,C=u+2*f,S=o?d+h/4:d-h/4,_=u+3*f,D=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(v,b,C,S,_,D),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawRegularTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=i.driftAmount/80*u,f=(i.totalTundraYAmount-i.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+f+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+f+d+s),e.stroke();var h=[];h.push("Regular"),h.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),h.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),h.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),h.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),h.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]),this.icyPatchBackgroundLines.push(h),this.lastPathEndingX=this.lastPathEndingX+l}drawCavernTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var f=l/4*.97,h=i.driftAmount/80*f,v=(i.totalTundraYAmount-i.driftAmount)/80*f;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+v+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+v+h+s),e.stroke();var C=l/4*.75,S=[];S.push("Cavern"),S.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),S.push([this.lastPathEndingX-o,this.lastPathEndingY+C+s]),S.push([this.lastPathEndingX+l-o,this.lastPathEndingY+C+s]),S.push([this.lastPathEndingX+l-o,this.lastPathEndingY-C+s]),S.push([this.lastPathEndingX-o,this.lastPathEndingY-C+s]),this.icyPatchBackgroundLines.push(S),this.lastPathEndingX=this.lastPathEndingX+l}drawHillsTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=i.driftAmount/80*u,f=(i.totalTundraYAmount-i.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+f+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+f+d+s),e.stroke();var h=[];h.push("Hills"),h.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),h.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),h.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),h.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),h.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]);var v=l/12,b=l/4,C=c/2,S=c*(3/4),_=c/4;h.push([this.lastPathEndingX+b-v/2-o,this.lastPathEndingY-C+_/2+s]),h.push([this.lastPathEndingX+b-v/2-o,this.lastPathEndingY-C-_+s,this.lastPathEndingX+b+v/2-o,this.lastPathEndingY-C-_+s,this.lastPathEndingX+b+v/2-o,this.lastPathEndingY-C+_/2+s]),h.push([this.lastPathEndingX+b-v/2-o,this.lastPathEndingY+C+_/2+s]),h.push([this.lastPathEndingX+b-v/2-o,this.lastPathEndingY+C-_+s,this.lastPathEndingX+b+v/2-o,this.lastPathEndingY+C-_+s,this.lastPathEndingX+b+v/2-o,this.lastPathEndingY+C+_/2+s]),h.push([this.lastPathEndingX+2*b-v/2-o,this.lastPathEndingY-S+_/2+s]),h.push([this.lastPathEndingX+2*b-v/2-o,this.lastPathEndingY-S-_+s,this.lastPathEndingX+2*b+v/2-o,this.lastPathEndingY-S-_+s,this.lastPathEndingX+2*b+v/2-o,this.lastPathEndingY-S+_/2+s]),h.push([this.lastPathEndingX+2*b-v/2-o,this.lastPathEndingY+S+_/2+s]),h.push([this.lastPathEndingX+2*b-v/2-o,this.lastPathEndingY+S-_+s,this.lastPathEndingX+2*b+v/2-o,this.lastPathEndingY+S-_+s,this.lastPathEndingX+2*b+v/2-o,this.lastPathEndingY+S+_/2+s]),h.push([this.lastPathEndingX+3*b-v/2-o,this.lastPathEndingY-C+_/2+s]),h.push([this.lastPathEndingX+3*b-v/2-o,this.lastPathEndingY-C-_+s,this.lastPathEndingX+3*b+v/2-o,this.lastPathEndingY-C-_+s,this.lastPathEndingX+3*b+v/2-o,this.lastPathEndingY-C+_/2+s]),h.push([this.lastPathEndingX+3*b-v/2-o,this.lastPathEndingY+C+_/2+s]),h.push([this.lastPathEndingX+3*b-v/2-o,this.lastPathEndingY+C-_+s,this.lastPathEndingX+3*b+v/2-o,this.lastPathEndingY+C-_+s,this.lastPathEndingX+3*b+v/2-o,this.lastPathEndingY+C+_/2+s]),this.icyPatchBackgroundLines.push(h),this.lastPathEndingX=this.lastPathEndingX+l}drawIcyPatchBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r}drawHillsBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",i.length>=17&&(e.beginPath(),e.moveTo(i[6][0],i[6][1]),e.bezierCurveTo(i[7][0],i[7][1],i[7][2],i[7][3],i[7][4],i[7][5]),e.stroke(),e.beginPath(),e.moveTo(i[8][0],i[8][1]),e.bezierCurveTo(i[9][0],i[9][1],i[9][2],i[9][3],i[9][4],i[9][5]),e.stroke(),e.beginPath(),e.moveTo(i[10][0],i[10][1]),e.bezierCurveTo(i[11][0],i[11][1],i[11][2],i[11][3],i[11][4],i[11][5]),e.stroke(),e.beginPath(),e.moveTo(i[12][0],i[12][1]),e.bezierCurveTo(i[13][0],i[13][1],i[13][2],i[13][3],i[13][4],i[13][5]),e.stroke(),e.beginPath(),e.moveTo(i[14][0],i[14][1]),e.bezierCurveTo(i[15][0],i[15][1],i[15][2],i[15][3],i[15][4],i[15][5]),e.stroke(),e.beginPath(),e.moveTo(i[16][0],i[16][1]),e.bezierCurveTo(i[17][0],i[17][1],i[17][2],i[17][3],i[17][4],i[17][5]),e.stroke()),e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r,e.strokeStyle="gray"}drawRegularVolcanoOverview(e,i,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);var S=this.lastPathEndingX-c-d*r+d*o/2,_=this.lastPathEndingY+0+u,D=d*o/this.volcanoRadiusXModifier,E=d*o/2-d/s,A=Math.PI/2,G=180/o,H=0;a.routeDesign===ae.FirstRegular?(this.volcanoStartingAngle=H=90,e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d/s-c,this.lastPathEndingY+0+u),e.stroke()):a.routeDesign===ae.LastRegular&&(e.beginPath(),e.moveTo(this.lastPathEndingX+(d-d/s)-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d-c,this.lastPathEndingY+0+u),e.stroke()),(H=this.volcanoStartingAngle-G)<0&&(H=360-Math.abs(H)),e.beginPath(),e.ellipse(S,_,D,E,A,this.volcanoStartingAngle*(Math.PI/180),H*(Math.PI/180),!0),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=H}drawSteppingStonesVolcanoOverview(e,i,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);for(var S=this.lastPathEndingX-c-d*r+d*o/2,_=this.lastPathEndingY+0+u,D=d*o/this.volcanoRadiusXModifier,E=d*o/2-d/s,A=Math.PI/2,G=180/o,te=0,H=G/20,X=0;X<10;X++){var Z=this.volcanoStartingAngle-H*(2*X);Z<0&&(Z=360-Math.abs(Z)),(te=Z-H)<0&&(te=360-Math.abs(te)),e.beginPath(),e.ellipse(S,_,D,E,A,Z*(Math.PI/180),te*(Math.PI/180),!0),e.stroke()}(te=this.volcanoStartingAngle-G)<0&&(te=360-Math.abs(te)),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=te}drawBackgroundVolcano(e,i,r,a,o,s,l,c){null==l&&(l=0),null==c&&(c=0);var u=.1*(a-r),d=(r+u)*this.canvasXDistanceScale*o-l,f=(a-u)*this.canvasXDistanceScale*o-l,h=f-d,v=(a-r)*this.canvasXDistanceScale*o/this.volcanoRadiusXModifier,b=this.canvasHeight*o,C=this.backgroundVolcanoYStart-.75*v+c,S=d+.15*h,_=b-10*s,D=d+.35*h,E=C+20*s,A=d+.4*h,y=C,Y=f-.15*h,G=b-10*s,H=f-.35*h,X=C+20*s,Z=f-.4*h,te=C,Je=e.fillStyle;e.fillStyle="orange";var ke=A+(Z-A)/3,at=C+v/4,_e=A+2*(Z-A)/3,he=C+v/4,Ke=A-.075*h,ct=y+v/2,vt=Z+.075*h,Lt=te+v/2,wt=Ke+1.7*(vt-Ke)/5,st=ct+.5*v,ye=Ke+1.4*(vt-Ke)/5,ut=ct+v/2,zn=Ke+2.5*(vt-Ke)/5,cn=ct,Wn=Ke+3.6*(vt-Ke)/5,Nn=ct+v,qn=Ke+3.3*(vt-Ke)/5,ui=ct-.25*v;e.beginPath(),e.moveTo(A,y),e.bezierCurveTo(ke,at,_e,he,Z,te),e.lineTo(vt,Lt),e.moveTo(vt,Lt),e.bezierCurveTo(Wn,Nn,qn,ui,zn,cn),e.bezierCurveTo(wt,st,ye,ut,Ke,ct),e.lineTo(A,y),e.fill(),1===o&&(i=this.race.raceUI.lavaFallPercentByFrame.length-1);var tn=this.race.raceUI.lavaFallPercentByFrame[i],Tn=(a-r)*this.canvasXDistanceScale*o,nn=r*this.canvasXDistanceScale*o,St=nn+.4*Tn-l+0,se=nn+.45*Tn-l+0,me=nn+.5*Tn-l+0,di=nn+.55*Tn-l+0,Jr=nn+.6*Tn-l+0,dt=.01*(a-r)*this.canvasXDistanceScale*o,Bn=dt/2,un=C+v/4,cr=this.backgroundVolcanoYStart+v+c,La=(cr-un)*tn[0];e.beginPath(),e.ellipse(St,un+La-Bn,dt,Bn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(St-dt,un,2*dt,La-(Bn-1));var dc=(cr-un)*tn[1];e.beginPath(),e.ellipse(se,un+dc-Bn,dt,Bn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(se-dt,un,2*dt,dc-(Bn-1));var fc=(cr-un)*tn[2];e.beginPath(),e.ellipse(me,un+fc-Bn,dt,Bn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(me-dt,un,2*dt,fc-(Bn-1));var Od=(cr-un)*tn[3];e.beginPath(),e.ellipse(di,un+Od-Bn,dt,Bn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(di-dt,un,2*dt,Od-(Bn-1));var xd=(cr-un)*tn[4];e.beginPath(),e.ellipse(Jr,un+xd-Bn,dt,Bn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Jr-dt,un,2*dt,xd-(Bn-1)),e.fillStyle=Je,e.beginPath(),e.moveTo(d,b),e.bezierCurveTo(S,_,D,E,A,y),e.stroke(),e.beginPath(),e.moveTo(f,b),e.bezierCurveTo(Y,G,H,X,Z,te),e.stroke();var hc=e.lineWidth;e.lineWidth=2;var dn=.175,Nm=d+h*(dn+.025),Fd=b-v/4,Vd=d+h*(dn+.2),Ld=C+v/3,pc=d+h*(dn+.25),Bd=C+v/4;e.beginPath(),e.moveTo(d+h*dn,.95*b),e.bezierCurveTo(Nm,Fd,Vd,Ld,pc,Bd),e.stroke();var Im=d+h*(.025+(dn=.35)),gc=b-v/4,Kn=d+h*(dn+.075),Pm=C+v/2,Ud=d+h*(dn+.1),Om=C+v/3;e.beginPath(),e.moveTo(d+h*dn,.95*b),e.bezierCurveTo(Im,gc,Kn,Pm,Ud,Om),e.stroke();var Hd=f-h*(.025+(dn=.35)),xm=b-v/4,ma=f-h*(dn+.075),Gd=C+v/2,Ba=f-h*(dn+.1),Fm=C+v/3;e.beginPath(),e.moveTo(f-h*dn,.95*b),e.bezierCurveTo(Hd,xm,ma,Gd,Ba,Fm),e.stroke();var fn=f-h*(.025+(dn=.175)),jd=b-v/4,$d=f-h*(dn+.2),Vm=C+v/3,bo=f-h*(dn+.25),Lm=C+v/4;e.beginPath(),e.moveTo(f-h*dn,.95*b),e.bezierCurveTo(fn,jd,$d,Vm,bo,Lm),e.stroke(),e.lineWidth=hc}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.skipSubscription.unsubscribe(),this.pauseSubscription.unsubscribe(),this.globalService.globalVar.userIsRacing=!1,this.race.raceUI.distanceCoveredByFrame=[],this.race.raceUI.lavaFallPercentByFrame=[],this.race.raceUI.maxSpeedByFrame=[],this.race.raceUI.racerEffectByFrame=[],this.race.raceUI.staminaPercentByFrame=[],this.race.raceUI.timeToCompleteByFrame=[],this.race.raceUI.yAdjustmentByFrame=[],this.race.raceUI.velocityByFrame=[]}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Tr),M(qr),M(Cn),M(Ql))},t.\u0275cmp=De({type:t,selectors:[["app-draw-race"]],viewQuery:function(e,i){if(1&e&&no(DH,5,At),2&e){let r;Ot(r=xt())&&(i.raceCanvas=r.first)}},inputs:{race:"race",skip:"skip",pause:"pause"},decls:3,vars:0,consts:[[1,"drawRaceDiv"],["id","raceCanvas",1,"raceCanvas"],["raceCanvas",""]],template:function(e,i){1&e&&(m(0,"div",0),O(1,"canvas",1,2),g())},styles:[".drawRaceDiv[_ngcontent-%COMP%]{height:100%}.raceCanvas[_ngcontent-%COMP%]{border:1px solid black}"]}),t})();const AH=["circuitRewardModal"];function RH(t,n){1&t&&(m(0,"span"),w(1,"BURST!"),g())}function EH(t,n){if(1&t){const e=re();m(0,"div",8)(1,"div",9)(2,"div")(3,"button",6),N("click",function(){return V(e),R().skipRaceAnimation()}),w(4,"Skip"),g()(),m(5,"div"),w(6),k(7,RH,2,0,"span",2),g(),m(8,"div"),w(9),g(),m(10,"div")(11,"button",6),N("click",function(){return V(e),R().pauseRaceAnimation()}),w(12,"Pause"),g()()(),m(13,"div",10)(14,"div",11),O(15,"app-draw-race",12),g(),O(16,"div",13,14),g()()}if(2&t){const e=It(17),i=R();p(6),Hi("Velocity: ",i.velocityAtCurrentFrame," / ",i.maxSpeedAtCurrentFrame,"m/s "),p(1),T("ngIf",i.racerEffectAtCurrentFrame===i.burstEffect),p(2),z("Stamina: ",i.staminaAtCurrentFrame,"%"),p(6),T("race",i.selectedRace)("skip",i.skipRace.asObservable())("pause",i.pauseRace.asObservable()),p(1),T("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),Wc)}}function kH(t,n){if(1&t){const e=re();m(0,"div")(1,"div",15)(2,"div")(3,"button",6),N("click",function(){return V(e),R().skipRaceAnimation()}),w(4,"Skip"),g()(),m(5,"div")(6,"button",6),N("click",function(){return V(e),R().pauseRaceAnimation()}),w(7,"Pause"),g()()(),O(8,"div",16,14),g()}if(2&t){const e=It(9),i=R();p(8),T("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),Wc)}}function NH(t,n){if(1&t){const e=re();m(0,"div",17)(1,"div",15)(2,"div")(3,"button",6),N("click",function(){return V(e),R().skipRaceAnimation()}),w(4,"Skip"),g()(),m(5,"div"),w(6),g(),m(7,"div"),w(8),g(),m(9,"div")(10,"button",6),N("click",function(){return V(e),R().pauseRaceAnimation()}),w(11,"Pause"),g()()(),m(12,"div",18),O(13,"app-draw-race",12),g()()}if(2&t){const e=R();p(6),Hi("Velocity: ",e.velocityAtCurrentFrame," / ",e.maxSpeedAtCurrentFrame,"m/s "),p(2),z("Stamina: ",e.staminaAtCurrentFrame,"%"),p(5),T("race",e.selectedRace)("skip",e.skipRace.asObservable())("pause",e.pauseRace.asObservable())}}function IH(t,n){if(1&t&&(m(0,"td")(1,"span",23),w(2),g(),w(3),g()),2&t){const e=n.$implicit;p(2),Ie(e.name),p(1),z(": ",e.amount,"")}}function PH(t,n){if(1&t&&(m(0,"tr"),k(1,IH,4,2,"td",22),g()),2&t){const e=n.$implicit;p(1),T("ngForOf",e)}}function OH(t,n){if(1&t&&(m(0,"div",19),O(1,"br"),m(2,"span",20),w(3,"Rewards"),g(),m(4,"div",21)(5,"table"),k(6,PH,2,1,"tr",22),g()()()),2&t){const e=R();p(6),T("ngForOf",e.rewardRows)}}function xH(t,n){if(1&t){const e=re();m(0,"div",24)(1,"div",25)(2,"h4",26),w(3,"Circuit Rank Reward!"),g(),m(4,"button",27),N("click",function(){return V(e).$implicit.dismiss()}),w(5,"X"),g()(),m(6,"div",28)(7,"div",29),w(8," After ranking up, you receive: "),O(9,"br"),m(10,"div",20),w(11),g()(),O(12,"br")(13,"br"),m(14,"div"),w(15),g()(),m(16,"div",30)(17,"button",31),N("click",function(){return V(e).$implicit.dismiss()}),w(18,"Continue"),g()()()}if(2&t){const e=R();p(11),Ie(e.selectedRace.circuitIncreaseReward[0]),p(4),Ie(e.selectedRace.circuitIncreaseReward[1])}}let FH=(()=>{class t{constructor(e,i,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.initializeService=o,this.modalService=s,this.sanitizer=l,this.raceLogicService=c,this.raceFinished=new ge,this.skipRace=new Yt,this.pauseRace=new Yt,this.raceSkipped=!1,this.racePaused=!1,this.frameModifier=60,this.displayVisualRace=!0,this.displayTextUpdates=!0,this.burstEffect=zi.Burst}ngOnInit(){var e=this.globalService.globalVar.settings.get("raceDisplayInfo");e===sr.draw?(this.displayVisualRace=!0,this.displayTextUpdates=!1):e===sr.text?(this.displayVisualRace=!1,this.displayTextUpdates=!0):e===sr.both&&(this.displayVisualRace=!0,this.displayTextUpdates=!0);var i=this.raceLogicService.runRace(this.selectedRace);this.setupDisplayRewards(this.selectedRace),this.displayRaceUpdates(i),this.getFrameByFrameStats(),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.raceSkipped=!0)}ngOnDestroy(){this.frameByFrameSubscription.unsubscribe()}displayRaceUpdates(e){var i=e.raceUpdates,r=0;this.incrementalRaceUpdates="";var a=this.gameLoopService.gameUpdateEvent.subscribe(o=>{if(this.racePaused||(r+=o),0===i.length||this.raceSkipped)return this.raceSkipped&&i.forEach(s=>{this.incrementalRaceUpdates+=this.sanitizer.sanitize(yt.HTML,this.sanitizer.bypassSecurityTrustHtml(s.text+"\n"))}),e.wasSuccessful&&(this.displayResults=!0,null!=this.selectedRace.circuitIncreaseReward&&""!==this.selectedRace.circuitIncreaseReward[0]&&this.modalService.open(this.circuitRewardModal,{ariaLabelledBy:"modal-basic-title",size:"lg"})),void a.unsubscribe();r*this.frameModifier>=i[0].value&&(this.incrementalRaceUpdates+=this.sanitizer.sanitize(yt.HTML,this.sanitizer.bypassSecurityTrustHtml(i[0].text+"\n")),i.shift())})}setupDisplayRewards(e){this.rewardCells=[],this.rewardRows=[];for(var r=1;r<=e.rewards.length;r++)this.rewardCells.push({name:e.rewards[r-1].name,amount:e.rewards[r-1].amount}),r%6==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}goToRaceSelection(){this.raceFinished.emit(!0)}skipRaceAnimation(){this.raceSkipped=!0,this.skipRace.next(!0)}pauseRaceAnimation(){this.racePaused=!this.racePaused,this.pauseRace.next(!0)}getFrameByFrameStats(){var e=0;this.frameByFrameSubscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{this.racePaused||(e+=i);var r=Math.round(e*this.frameModifier);if(this.selectedRace.raceUI.velocityByFrame.length<=r||this.raceSkipped){var a=this.selectedRace.raceUI.velocityByFrame.length-1;this.velocityAtCurrentFrame=(this.selectedRace.raceUI.velocityByFrame[a]*this.frameModifier).toFixed(2),this.staminaAtCurrentFrame=(100*this.selectedRace.raceUI.staminaPercentByFrame[a]).toFixed(2),this.maxSpeedAtCurrentFrame=this.selectedRace.raceUI.maxSpeedByFrame[a].toFixed(2),this.racerEffectAtCurrentFrame=this.selectedRace.raceUI.racerEffectByFrame[a]}else this.velocityAtCurrentFrame=(this.selectedRace.raceUI.velocityByFrame[r]*this.frameModifier).toFixed(2),this.staminaAtCurrentFrame=(100*this.selectedRace.raceUI.staminaPercentByFrame[r]).toFixed(2),this.maxSpeedAtCurrentFrame=this.selectedRace.raceUI.maxSpeedByFrame[r].toFixed(2),this.racerEffectAtCurrentFrame=this.selectedRace.raceUI.racerEffectByFrame[r]})}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Tr),M(qr),M(Cn),M(Kg),M(Is),M(Jp),M(PS))},t.\u0275cmp=De({type:t,selectors:[["app-race"]],viewQuery:function(e,i){if(1&e&&no(AH,7),2&e){let r;Ot(r=xt())&&(i.circuitRewardModal=r.first)}},inputs:{selectedRace:"selectedRace"},outputs:{raceFinished:"raceFinished"},decls:12,vars:4,consts:[["id","raceInfo"],["class","bothDisplayValues",4,"ngIf"],[4,"ngIf"],["class","oneDisplayValue",4,"ngIf"],["class","results",4,"ngIf"],[1,"back"],[3,"click"],["circuitRewardModal",""],[1,"bothDisplayValues"],[1,"headerInfo"],[1,"updates"],[1,"drawRaces"],[3,"race","skip","pause"],[1,"raceUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],[1,"individualItemHeaderInfo"],[1,"raceUpdates","onlyText",3,"scrollTop","innerHTML"],[1,"oneDisplayValue"],[1,"drawRace","onlyDraw"],[1,"results"],[1,"s4Heading"],[1,"rewards"],[4,"ngFor","ngForOf"],[1,"keyword"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,i){1&e&&(m(0,"div",0),k(1,EH,18,9,"div",1),k(2,kH,10,2,"div",2),k(3,NH,14,6,"div",3),O(4,"br"),k(5,OH,7,1,"div",4),O(6,"br"),m(7,"div",5)(8,"button",6),N("click",function(){return i.goToRaceSelection()}),w(9,"Back"),g()()(),k(10,xH,19,2,"ng-template",null,7,Rt)),2&e&&(p(1),T("ngIf",i.displayVisualRace&&i.displayTextUpdates),p(1),T("ngIf",!i.displayVisualRace&&i.displayTextUpdates),p(1),T("ngIf",i.displayVisualRace&&!i.displayTextUpdates),p(2),T("ngIf",i.displayResults))},directives:[zt,MH,Fn],styles:['#raceInfo[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre;overflow-x:hidden}.headerInfo[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between}.individualItemHeaderInfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bothDisplayValues[_ngcontent-%COMP%], .oneDisplayValue[_ngcontent-%COMP%]{height:76.5%}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawRace raceUpdates"}.raceUpdates[_ngcontent-%COMP%]{overflow-y:auto;grid-area:raceUpdates}.drawRaces[_ngcontent-%COMP%]{grid-area:drawRace}.onlyText[_ngcontent-%COMP%]{text-align:center}.onlyDraw[_ngcontent-%COMP%]{text-align:center;height:100%}.rightAlign[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:left}td[_ngcontent-%COMP%]{width:16.666%}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;padding:1rem}']}),t})();function VH(t,n){if(1&t){const e=re();m(0,"app-circuit-view",7),N("raceSelected",function(r){return V(e),R(2).raceSelected(r)}),g()}}function LH(t,n){if(1&t){const e=re();m(0,"app-local-view",7),N("raceSelected",function(r){return V(e),R(2).raceSelected(r)}),g()}}function BH(t,n){if(1&t){const e=re();m(0,"div",2)(1,"div",3)(2,"span",4),N("click",function(){return V(e),R().toggleCircuitRace(!0)}),w(3,"Circuit Race"),g(),m(4,"span",5),N("click",function(){return V(e),R().toggleCircuitRace(!1)}),w(5,"Local Race"),g()(),O(6,"hr"),k(7,VH,1,0,"app-circuit-view",6),k(8,LH,1,0,"app-local-view",6),g()}if(2&t){const e=R();p(2),T("ngClass",e.displayCircuitView?"filterActive":""),p(2),T("ngClass",e.displayCircuitView?"":"filterActive"),p(3),T("ngIf",e.displayCircuitView),p(1),T("ngIf",!e.displayCircuitView)}}function UH(t,n){if(1&t){const e=re();m(0,"div",8)(1,"app-race",9),N("raceFinished",function(){return V(e),R().showRace=!1}),g()()}if(2&t){const e=R();p(1),T("selectedRace",e.selectedRace)}}let HH=(()=>{class t{constructor(e){this.globalService=e,this.displayCircuitView=!0,this.showRace=!1}ngOnInit(){}toggleCircuitRace(e){this.displayCircuitView=e}raceSelected(e){this.selectedRace=e,this.showRace=!0}}return t.\u0275fac=function(e){return new(e||t)(M(Ze))},t.\u0275cmp=De({type:t,selectors:[["app-race-selection-view"]],decls:2,vars:2,consts:[["class","raceSelectionDiv",4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"raceSelectionDiv"],[1,"raceGridContainer"],[1,"circuit","s5Heading","clickableText",3,"ngClass","click"],[1,"local","s5Heading","clickableText",3,"ngClass","click"],[3,"raceSelected",4,"ngIf"],[3,"raceSelected"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,i){1&e&&(k(0,BH,9,4,"div",0),k(1,UH,2,1,"div",1)),2&e&&(T("ngIf",!i.showRace),p(1),T("ngIf",i.showRace))},directives:[zt,ki,hH,TH,FH],styles:['.raceGridContainer[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"circuit local"}.raceSelectionDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.circuit[_ngcontent-%COMP%]{grid-area:circuit;text-align:center}.local[_ngcontent-%COMP%]{grid-area:local;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}']}),t})(),GH=(()=>{class t{constructor(e){this.utilityService=e}ngOnInit(){}toggle(){null!=this.callbackFunction&&this.callbackFunction()}getId(){return"cbxInput"+this.id}}return t.\u0275fac=function(e){return new(e||t)(M(qr))},t.\u0275cmp=De({type:t,selectors:[["app-toggle"]],inputs:{model:"model",label:"label",id:"id",popoverText:"popoverText",callbackFunction:"callbackFunction"},decls:5,vars:5,consts:[[1,"custom-control","custom-switch"],["triggers","mouseenter:mouseleave",3,"ngbPopover"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange","input"],[1,"custom-control-label",3,"for"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"span",1)(2,"input",2),N("ngModelChange",function(a){return i.model=a})("input",function(){return i.toggle()}),g(),m(3,"label",3),w(4),g()()()),2&e&&(p(1),T("ngbPopover",i.popoverText),p(1),T("id",i.getId())("ngModel",i.model),p(1),T("for",i.getId()),p(1),Ie(i.label))},directives:[Va,Uu,El,xl],styles:[""]}),t})();function jH(t,n){if(1&t&&(m(0,"div",12),w(1),O(2,"br")(3,"br"),w(4),g()),2&t){const e=R();T("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)),p(1),z("Equipped: ",e.selectedAnimal.equippedItem.name," "),p(3),z(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)," ")}}function $H(t,n){1&t&&(m(0,"div"),w(1," Equipped: None "),g())}function zH(t,n){if(1&t){const e=re();m(0,"button",8),N("click",function(){return V(e),R().unequipItem()}),w(1,"Unequip Item"),g()}}function WH(t,n){if(1&t){const e=re();m(0,"div")(1,"span",33),w(2),g(),m(3,"span")(4,"button",34),N("click",function(){V(e);const r=R(2);return r.editingName=!r.editingName}),w(5,"Edit"),g()()()}if(2&t){const e=R(2);p(2),z("",e.selectedAnimal.name," ")}}function qH(t,n){if(1&t){const e=re();m(0,"div")(1,"span")(2,"input",35),N("ngModelChange",function(r){return V(e),R(2).newName=r}),g()(),m(3,"span")(4,"button",8),N("click",function(){return V(e),R(2).editName()}),w(5,"Save"),g()(),m(6,"span")(7,"button",8),N("click",function(){V(e);const r=R(2);return r.editingName=!r.editingName}),w(8,"Cancel"),g()()()}if(2&t){const e=R(2);p(2),T("ngModel",e.newName)}}function YH(t,n){if(1&t&&(m(0,"span",36),w(1),g()),2&t){const e=R(2);An("ngbPopover",e.traitStatGainDescription),p(1),z(" ",e.selectedAnimal.trait.traitName," ")}}function XH(t,n){if(1&t&&(m(0,"div"),k(1,WH,6,1,"div",6),k(2,qH,9,1,"div",6),m(3,"span",11),k(4,YH,2,2,"span",32),w(5),g()()),2&t){const e=R();p(1),T("ngIf",!e.editingName),p(1),T("ngIf",e.editingName),p(2),T("ngIf",null!=e.selectedAnimal.trait),p(1),z(" ",e.selectedAnimal.getAnimalType()," ")}}function QH(t,n){if(1&t){const e=re();m(0,"div")(1,"span")(2,"button",8),N("click",function(){V(e);const r=R(2);return r.editingName=!r.editingName}),w(3,"Edit Name"),g()()()}}function ZH(t,n){if(1&t){const e=re();m(0,"div")(1,"span")(2,"input",37),N("ngModelChange",function(r){return V(e),R(2).newName=r}),g()(),m(3,"span")(4,"button",8),N("click",function(){return V(e),R(2).editName()}),w(5,"Save"),g()(),m(6,"span")(7,"button",8),N("click",function(){V(e);const r=R(2);return r.editingName=!r.editingName}),w(8,"Cancel"),g()()()}if(2&t){const e=R(2);p(2),T("ngModel",e.newName)}}function JH(t,n){if(1&t&&(m(0,"span",36),w(1),g()),2&t){const e=R(2);An("ngbPopover",e.traitStatGainDescription),p(1),z(" ",e.selectedAnimal.trait.traitName," ")}}function KH(t,n){if(1&t&&(m(0,"div"),k(1,QH,4,0,"div",6),k(2,ZH,9,1,"div",6),m(3,"span",11),k(4,JH,2,2,"span",32),w(5),g()()),2&t){const e=R();p(1),T("ngIf",!e.editingName),p(1),T("ngIf",e.editingName),p(2),T("ngIf",null!=e.selectedAnimal.trait),p(1),z(" ",e.selectedAnimal.getAnimalType()," ")}}function e8(t,n){if(1&t&&O(0,"app-toggle",38),2&t){const e=R();T("callbackFunction",e.toggleAutoBreed)("label","Auto Breed")("model",e.autoBreedActive)}}function t8(t,n){if(1&t){const e=re();m(0,"span",39),N("click",function(){V(e);const r=R();return r.selectAbility(r.ability2)}),w(1),g()}if(2&t){const e=R();we("filterActive",e.selectedAnimal.ability.name===e.ability2.name),p(1),z("",e.ability2.name," ")}}function n8(t,n){if(1&t){const e=re();m(0,"span",40),N("click",function(){V(e);const r=R();return r.selectAbility(r.ability3)}),w(1),g()}if(2&t){const e=R();we("filterActive",e.selectedAnimal.ability.name===e.ability3.name),p(1),z("",e.ability3.name," ")}}function i8(t,n){if(1&t&&(m(0,"span"),w(1),g()),2&t){const e=R();p(1),Hi("",e.selectedAbility.abilityXp," / ",e.selectedAbility.abilityMaxXp," XP")}}function r8(t,n){1&t&&(m(0,"span"),w(1,"MAX"),g())}function a8(t,n){if(1&t&&(m(0,"div",41),w(1),g()),2&t){const e=R();p(1),z(" ",e.getTopSpeedPopover()," ")}}function o8(t,n){if(1&t&&(m(0,"div",41),w(1),g()),2&t){const e=R();p(1),z(" ",e.getAccelerationPopover()," ")}}function s8(t,n){if(1&t&&(m(0,"div",41),w(1),g()),2&t){const e=R();p(1),z(" ",e.getEndurancePopover()," ")}}function l8(t,n){if(1&t&&(m(0,"div",41),w(1),g()),2&t){const e=R();p(1),z(" ",e.getPowerPopover()," ")}}function c8(t,n){if(1&t&&(m(0,"div",41),w(1),g()),2&t){const e=R();p(1),z(" ",e.getFocusPopover()," ")}}function u8(t,n){if(1&t&&(m(0,"div",41),w(1),g()),2&t){const e=R();p(1),z(" ",e.getAdaptabilityPopover()," ")}}function d8(t,n){if(1&t&&(m(0,"div",41),w(1),g()),2&t){const e=R();p(1),z(" ",e.getAbilityLevelPopover()," ")}}function f8(t,n){if(1&t){const e=re();m(0,"td",51)(1,"div",8),N("click",function(){const a=V(e).$implicit;return R(4).selectItem(a)}),w(2),O(3,"br"),w(4),g()()}if(2&t){const e=n.$implicit,i=R(4);p(2),Hi(" ",e.name," (",e.amount,") "),p(2),z(" ",i.getItemShortDescription(e.name)," ")}}function h8(t,n){if(1&t&&(m(0,"tr"),k(1,f8,5,3,"td",50),g()),2&t){const e=n.$implicit;p(1),T("ngForOf",e)}}function p8(t,n){if(1&t){const e=re();m(0,"div",52)(1,"span",53)(2,"span"),w(3),g(),m(4,"span",54)(5,"label",55),w(6,"Amount: "),g(),m(7,"input",56),N("ngModelChange",function(r){return V(e),R(3).selectedItemQuantity=r}),g(),m(8,"button",57),N("click",function(){return V(e),R(3).useItem()}),w(9,"Use"),g()()()()}if(2&t){const e=R(3);p(3),Hi("",e.selectedItem.name," - ",e.getItemShortDescription(e.selectedItem.name)," "),p(4),T("ngModel",e.selectedItemQuantity)}}function g8(t,n){if(1&t&&(m(0,"div")(1,"div",46)(2,"div",47)(3,"table"),k(4,h8,2,1,"tr",48),g()()(),k(5,p8,10,3,"div",49),g()),2&t){const e=R(2);p(4),T("ngForOf",e.itemsRows),p(1),T("ngIf",null!=e.selectedItem)}}function m8(t,n){1&t&&(m(0,"div"),w(1," No items available. "),g())}function v8(t,n){if(1&t){const e=re();m(0,"div",42)(1,"form")(2,"div",43)(3,"h4",44),w(4,"Use Item"),g(),m(5,"button",45),N("click",function(){return V(e).$implicit.dismiss()}),w(6,"X"),g()(),k(7,g8,6,2,"div",6),k(8,m8,2,0,"div",6),g()()}if(2&t){const e=R();p(7),T("ngIf",e.usableItemsList.length>0),p(1),T("ngIf",0==e.usableItemsList.length)}}function _8(t,n){if(1&t){const e=re();m(0,"td",51)(1,"div",8),N("click",function(){const a=V(e).$implicit;return R(3).selectEquipment(a)}),w(2),O(3,"br"),w(4),g()()}if(2&t){const e=n.$implicit,i=R(3);p(2),Hi(" ",e.name," (",e.amount,") "),p(2),z(" ",i.getEquipmentShortDescription(e.name)," ")}}function b8(t,n){if(1&t&&(m(0,"tr"),k(1,_8,5,3,"td",50),g()),2&t){const e=n.$implicit;p(1),T("ngForOf",e)}}function y8(t,n){if(1&t){const e=re();m(0,"div",52)(1,"span",59)(2,"span"),w(3),g(),m(4,"span",54)(5,"button",57),N("click",function(){return V(e),R(2).equipItem()}),w(6,"Equip"),g()()()()}if(2&t){const e=R(2);p(3),Hi("",e.selectedEquipment.name," - ",e.getEquipmentShortDescription(e.selectedEquipment.name)," ")}}function C8(t,n){1&t&&(m(0,"div"),w(1," No equipment available. "),g())}function w8(t,n){if(1&t){const e=re();m(0,"div",42)(1,"form")(2,"div",43)(3,"h4",44),w(4,"Change Equipment"),g(),m(5,"button",45),N("click",function(){return V(e).$implicit.dismiss()}),w(6,"X"),g()(),m(7,"div")(8,"div",46)(9,"div",58)(10,"table"),k(11,b8,2,1,"tr",48),g()()(),k(12,y8,7,2,"div",49),g(),k(13,C8,2,0,"div",6),g()()}if(2&t){const e=R();p(11),T("ngForOf",e.equipmentRows),p(1),T("ngIf",null!=e.selectedEquipment),p(1),T("ngIf",0==e.equipmentList.length)}}let S8=(()=>{class t{constructor(e,i,r,a){this.lookupService=e,this.modalService=i,this.globalService=r,this.componentCommunicationService=a,this.returnEmitter=new ge,this.canAutoBreed=!1,this.toggleAutoBreed=()=>{this.autoBreedActive=!this.autoBreedActive,this.selectedAnimal.autoBreedActive=this.autoBreedActive}}ngOnInit(){this.handleIntroTutorial(),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel);var e=this.lookupService.getStockbreeder();null!=e&&e>0&&(this.canAutoBreed=!0),this.canAutoBreed&&(this.autoBreedActive=this.selectedAnimal.autoBreedActive),this.ability1=this.selectedAnimal.availableAbilities[0],this.selectedAnimal.availableAbilities.length>1&&(this.ability2=this.selectedAnimal.availableAbilities[1]),this.selectedAnimal.availableAbilities.length>2&&(this.ability3=this.selectedAnimal.availableAbilities[2]),this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal),null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.updateItemsList(),this.updateEquipmentList(),this.globalService.globalVar.animals.filter(r=>null!=r.equippedItem).forEach(r=>{var a=this.equipmentList.find(o=>{var s;return o.name===(null===(s=r.equippedItem)||void 0===s?void 0:s.name)});null!=a&&(a.amount>0&&(a.amount-=1),a.amount<=0&&(this.equipmentList=this.equipmentList.filter(o=>o.name!==(null==a?void 0:a.name))))}),this.componentCommunicationService.setAnimalView(wn.animals,new Wt);var i=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.selectedAnimal.associatedBarnNumber);this.assignedBarnName=null==i?"Unassigned":"Assigned to: "+this.lookupService.getBarnName(i),this.breedDescriptionPopover="When your Breed XP reaches the max, you can Breed your animal. This will reset your base stats, but it will also increase the amount that your base stats contribute to your racing stats."}returnToAnimalView(){this.returnEmitter.emit(!1)}isAbilityLevelMaxedOut(){var e=25,i=this.globalService.globalVar.modifiers.find(r=>"abilityLevelCapModifier"===r.text);return null!=i&&(e=i.value),null!=this.selectedAbility&&this.selectedAbility.abilityLevel>this.selectedAnimal.breedLevel+e}breed(){this.globalService.BreedAnimal(this.selectedAnimal),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel),this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut()}editName(){this.newName.length<=50&&this.newName.length>=1&&(this.selectedAnimal.name=this.newName,this.editingName=!1)}selectAbility(e){this.selectedAnimal.ability=e,this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal)}updateItemsList(){this.usableItemsList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===q.Food&&e.amount>0).forEach(e=>{void 0!==e&&this.usableItemsList.push(e)}),this.setupDisplayItems()}updateEquipmentList(){this.equipmentList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===q.Equipment).forEach(e=>{if(void 0!==e){var i=e.makeCopy(e);this.equipmentList.push(i)}}),this.setupDisplayEquipment()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];for(var i=1;i<=this.usableItemsList.length;i++)this.itemsCells.push(this.usableItemsList[i-1]),i%4==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}setupDisplayEquipment(){this.equipmentCells=[],this.equipmentRows=[];for(var i=1;i<=this.equipmentList.length;i++)this.equipmentCells.push(this.equipmentList[i-1]),i%4==0&&(this.equipmentRows.push(this.equipmentCells),this.equipmentCells=[]);0!==this.equipmentCells.length&&this.equipmentRows.push(this.equipmentCells)}openItemModal(e){this.setupDisplayItems(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}openEquipmentModal(e){this.setupDisplayEquipment(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}useItem(){var e=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name&&r.itemType===this.selectedItem.itemType);if(void 0!==e&&!(e.amount<this.selectedItemQuantity)){if(e.amount-=this.selectedItemQuantity,this.selectedItem.itemType===q.Food)if("Mangoes"===this.selectedItem.name)this.selectedAnimal.breedLevel+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal);else{var i=new ee(0,0,0,0,0,0);"Apples"===this.selectedItem.name&&(i.acceleration=this.selectedItemQuantity),"Bananas"===this.selectedItem.name&&(i.topSpeed=this.selectedItemQuantity),"Strawberries"===this.selectedItem.name&&(i.endurance=this.selectedItemQuantity),"Carrots"===this.selectedItem.name&&(i.power=this.selectedItemQuantity),"Turnips"===this.selectedItem.name&&(i.focus=this.selectedItemQuantity),"Oranges"===this.selectedItem.name&&(i.adaptability=this.selectedItemQuantity),this.selectedAnimal.increaseStats(i),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}this.updateItemsList()}}selectItem(e){this.selectedItem=e}equipItem(){this.selectedAnimal.equippedItem=this.selectedEquipment,this.updateEquipmentList(),this.modalService.dismissAll()}selectEquipment(e){this.selectedEquipment=e}unequipItem(){this.selectedAnimal.equippedItem=null}getTopSpeedPopover(){return this.lookupService.topSpeedPopover(this.selectedAnimal)}getAccelerationPopover(){return this.lookupService.accelerationPopover(this.selectedAnimal)}getEndurancePopover(){return this.lookupService.endurancePopover(this.selectedAnimal)}getPowerPopover(){return this.lookupService.powerPopover(this.selectedAnimal)}getFocusPopover(){return this.lookupService.focusPopover(this.selectedAnimal)}getAdaptabilityPopover(){return this.lookupService.adaptabilityPopover(this.selectedAnimal)}getAbilityLevelPopover(){return this.lookupService.abilityLevelPopover(this.selectedAnimal)}getAbilityPopover(){return this.lookupService.abilityPopover()}getDiminishingReturnsPopover(){return"Once a trainable stat is over this number, additional gains in this stat will be reduced. Increase with Facility Level."}getEquipmentShortDescription(e){return this.globalService.getEquipmentDescription(e)}getItemShortDescription(e){return this.globalService.getItemDescription(e)}handleIntroTutorial(){!this.globalService.globalVar.tutorialCompleted&&3===this.globalService.globalVar.currentTutorialId&&(this.globalService.globalVar.showTutorial=!0),!this.globalService.globalVar.tutorialCompleted&&8===this.globalService.globalVar.currentTutorialId&&(this.globalService.globalVar.currentTutorialId+=1,this.globalService.globalVar.showTutorial=!0)}goToAssignedBarn(){var e=this.globalService.globalVar.barns.find(i=>i.barnNumber===this.selectedAnimal.associatedBarnNumber);null!=e&&this.componentCommunicationService.setBarnView(wn.barn,e.barnNumber)}}return t.\u0275fac=function(e){return new(e||t)(M(Cn),M(Is),M(Ze),M(Ts))},t.\u0275cmp=De({type:t,selectors:[["app-selected-animal"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:145,vars:103,consts:[[1,"selectedAnimalView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"equippable"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],[1,"animalInfo"],[3,"ngClass"],[1,"keyword"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"callbackFunction","label","model",4,"ngIf"],[1,"back","clickableText",3,"click"],[1,"gridContainer"],[1,"trainableStats"],[1,"s4Heading"],[1,"racingStats"],[1,"abilities"],[1,"ability1","clickableText",3,"click"],["class","ability2 clickableText",3,"filterActive","click",4,"ngIf"],["class","ability3 clickableText",3,"filterActive","click",4,"ngIf"],["topSpeedPopoverContent",""],["accelerationPopoverContent",""],["endurancePopoverContent",""],["powerPopoverContent",""],["focusPopoverContent",""],["adaptabilityPopoverContent",""],["abilityLevelPopoverContent",""],["content",""],["equipment",""],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"name","keyword"],[1,"editName",3,"click"],["id","newName","name","newName","maxlength","50",3,"ngModel","ngModelChange"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],["id","newName","name","newName","minlength","1","maxlength","50",3,"ngModel","ngModelChange"],[3,"callbackFunction","label","model"],[1,"ability2","clickableText",3,"click"],[1,"ability3","clickableText",3,"click"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"modal-footer"],[1,"selectedItemSpan"],[1,"rightAlign"],["for","deck-name"],["id","deck-name","type","text",1,"spaced",3,"ngModel","ngModelChange"],["type","button",1,"spaced",3,"click"],[1,"equipmentContainer"],[1,"selectedEquipmentSpan"]],template:function(e,i){if(1&e){const r=re();m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),k(6,jH,5,3,"div",5),k(7,$H,2,0,"div",6),O(8,"br"),k(9,zH,2,0,"button",7),m(10,"button",8),N("click",function(){V(r);const o=It(144);return i.openEquipmentModal(o)}),w(11,"Equip New Item"),g()()(),m(12,"div",9)(13,"div",10),k(14,XH,6,4,"div",6),k(15,KH,6,4,"div",6),m(16,"span",11),w(17),g(),O(18,"br"),g(),m(19,"span",8),N("click",function(){return i.goToAssignedBarn()}),w(20),g(),O(21,"br"),m(22,"span",12),w(23),g(),O(24,"br"),m(25,"span",12),w(26),sn(27,"number"),m(28,"button",8),N("click",function(){return i.breed()}),w(29,"Breed"),g()(),O(30,"br"),m(31,"button",8),N("click",function(){V(r);const o=It(142);return i.openItemModal(o)}),w(32,"Use Item"),g(),O(33,"br"),k(34,e8,1,3,"app-toggle",13),g(),m(35,"div",14),N("click",function(){return i.returnToAnimalView()}),m(36,"span"),w(37,"Back"),g()()(),O(38,"hr"),m(39,"div",15)(40,"div",16)(41,"span",17),w(42,"Base Stats"),g(),O(43,"br")(44,"br"),m(45,"span",12),w(46),sn(47,"number"),g(),O(48,"br"),m(49,"span",12),w(50),sn(51,"number"),g(),O(52,"br"),m(53,"span",12),w(54),sn(55,"number"),g(),O(56,"br"),m(57,"span",12),w(58),sn(59,"number"),g(),O(60,"br"),m(61,"span",12),w(62),sn(63,"number"),g(),O(64,"br"),m(65,"span",12),w(66),sn(67,"number"),g(),O(68,"br"),m(69,"span",12),w(70),sn(71,"number"),g()(),m(72,"div",18)(73,"span",17),w(74,"Racing Stats"),g(),O(75,"br")(76,"br"),m(77,"span",12),w(78),sn(79,"number"),g(),O(80,"br"),m(81,"span",12),w(82),sn(83,"number"),g(),O(84,"br"),m(85,"span",12),w(86),sn(87,"number"),g(),O(88,"br"),m(89,"span",12),w(90),sn(91,"number"),g(),O(92,"br"),m(93,"span",12),w(94),sn(95,"number"),g(),O(96,"br"),m(97,"span",12),w(98),sn(99,"number"),g(),O(100,"br"),m(101,"span",12),w(102),sn(103,"number"),g(),O(104,"br"),m(105,"span",12),w(106),sn(107,"number"),g()()(),O(108,"br"),m(109,"div",19)(110,"p",17)(111,"span",12),w(112,"Abilities"),g()(),m(113,"div")(114,"span",20),N("click",function(){return i.selectAbility(i.ability1)}),w(115),g(),k(116,t8,2,3,"span",21),k(117,n8,2,3,"span",22),O(118,"br")(119,"br"),m(120,"p")(121,"span",12),w(122),k(123,i8,2,2,"span",6),k(124,r8,2,0,"span",6),g(),O(125,"br"),w(126),g()()()()()(),k(127,a8,2,1,"ng-template",null,23,Rt),k(129,o8,2,1,"ng-template",null,24,Rt),k(131,s8,2,1,"ng-template",null,25,Rt),k(133,l8,2,1,"ng-template",null,26,Rt),k(135,c8,2,1,"ng-template",null,27,Rt),k(137,u8,2,1,"ng-template",null,28,Rt),k(139,d8,2,1,"ng-template",null,29,Rt),k(141,v8,9,2,"ng-template",null,30,Rt),k(143,w8,14,3,"ng-template",null,31,Rt)}if(2&e){const r=It(128),a=It(130),o=It(132),s=It(134),l=It(136),c=It(138),u=It(140);p(6),T("ngIf",null!=i.selectedAnimal.equippedItem),p(1),T("ngIf",null==i.selectedAnimal.equippedItem),p(2),T("ngIf",null!=i.selectedAnimal.equippedItem),p(4),T("ngClass",i.colorConditional),p(1),T("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),T("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(2),Ie(i.selectedAnimal.getRaceCourseType()),p(3),Ie(i.assignedBarnName),p(2),An("ngbPopover",i.breedLevelPopover),p(1),z("Breed Level ",i.selectedAnimal.breedLevel,""),p(2),T("ngbPopover",i.breedDescriptionPopover),p(1),Hi("Breed XP: ",vn(27,55,i.selectedAnimal.breedGaugeXp,"1.2-2"),"/",i.selectedAnimal.breedGaugeMax," "),p(8),T("ngIf",i.canAutoBreed),p(11),T("ngbPopover",r),p(1),z(" Speed: ",vn(47,58,i.selectedAnimal.currentStats.topSpeed,"1.2-2")," "),p(3),T("ngbPopover",a),p(1),z(" Acceleration: ",vn(51,61,i.selectedAnimal.currentStats.acceleration,"1.2-2")," "),p(3),T("ngbPopover",o),p(1),z(" Endurance: ",vn(55,64,i.selectedAnimal.currentStats.endurance,"1.2-2")," "),p(3),T("ngbPopover",s),p(1),z(" Power: ",vn(59,67,i.selectedAnimal.currentStats.power,"1.2-2")," "),p(3),T("ngbPopover",l),p(1),z(" Focus: ",vn(63,70,i.selectedAnimal.currentStats.focus,"1.2-2")," "),p(3),T("ngbPopover",c),p(1),z(" Adaptability: ",vn(67,73,i.selectedAnimal.currentStats.adaptability,"1.2-2")," "),p(3),An("ngbPopover",i.getDiminishingReturnsPopover()),p(1),z(" Diminishing Returns: ",vn(71,76,i.diminishingReturnsAmount,"1.0-0")," "),p(7),An("ngbPopover",i.selectedAnimal.currentStats.maxSpeedMsPopover()),p(1),z(" Max Speed: ",vn(79,79,i.selectedAnimal.currentStats.maxSpeedMs,"1.2-2")," m/s "),p(3),An("ngbPopover",i.selectedAnimal.currentStats.accelerationMsPopover()),p(1),z(" Acceleration Rate: ",vn(83,82,i.selectedAnimal.currentStats.accelerationMs,"1.2-2")," m/s "),p(3),An("ngbPopover",i.selectedAnimal.currentStats.staminaPopover()),p(1),z(" Stamina: ",vn(87,85,i.selectedAnimal.currentStats.stamina,"1.2-2")," "),p(3),An("ngbPopover",i.selectedAnimal.currentStats.powerMsPopover()),p(1),z(" Power Efficiency: ",vn(91,88,i.selectedAnimal.currentStats.powerMs,"1.2-2"),"% "),p(3),An("ngbPopover",i.selectedAnimal.currentStats.focusMsPopover()),p(1),z(" Focus Distance: ~",vn(95,91,i.selectedAnimal.currentStats.focusMs,"1.2-2")," m "),p(3),An("ngbPopover",i.selectedAnimal.currentStats.adaptabilityMsPopover()),p(1),z(" Adaptability Distance: ~",vn(99,94,i.selectedAnimal.currentStats.adaptabilityMs,"1.2-2")," m "),p(3),An("ngbPopover",i.selectedAnimal.currentStats.burstChancePopover()),p(1),z(" Burst Chance: ",vn(103,97,i.selectedAnimal.currentStats.burstChance,"1.2-2"),"% "),p(3),An("ngbPopover",i.selectedAnimal.currentStats.burstDistancePopover()),p(1),z(" Burst Distance: ",vn(107,100,i.selectedAnimal.currentStats.burstDistance,"1.2-2")," m "),p(5),T("ngbPopover",i.getAbilityPopover()),p(3),we("filterActive",i.selectedAnimal.ability.name===i.ability1.name),p(1),z("",i.ability1.name," "),p(1),T("ngIf",i.ability2.isAbilityPurchased),p(1),T("ngIf",i.ability3.isAbilityPurchased),p(4),T("ngbPopover",u),p(1),z("Level ",i.selectedAbility.abilityLevel," "),p(1),T("ngIf",!i.abilityLevelMaxedOut),p(1),T("ngIf",i.abilityLevelMaxedOut),p(2),z(" ",i.longDescription," ")}},directives:[zt,Va,ki,hs,ed,El,xl,wg,GH,Ju,ju,Ol,Fn],pipes:[Ml],styles:['.selectedAnimalView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.animalInfo[_ngcontent-%COMP%]{text-align:center;grid-area:animalInfo}.back[_ngcontent-%COMP%]{text-align:center;grid-area:back}.equippable[_ngcontent-%COMP%]{grid-area:equippable}.marginGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"equippable animalInfo back"}.gridContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingStats racingStats"}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.racingStats[_ngcontent-%COMP%]{grid-area:racingStats}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.editName[_ngcontent-%COMP%]{width:4rem}.name[_ngcontent-%COMP%]{margin-left:4rem}.selectedItemSpan[_ngcontent-%COMP%], .selectedEquipmentSpan[_ngcontent-%COMP%]{width:100%}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.rightAlign[_ngcontent-%COMP%]{float:right}.ability1[_ngcontent-%COMP%], .ability2[_ngcontent-%COMP%], .ability3[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.spaced[_ngcontent-%COMP%]{margin-left:.5em}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}']}),t})();function T8(t,n){1&t&&(m(0,"div",4)(1,"h2"),w(2,"Animals"),g(),m(3,"div",5),w(4," Select an animal to view its stats, change abilities, and more. "),g(),O(5,"hr"),g())}function D8(t,n){if(1&t){const e=re();m(0,"div",6)(1,"app-animal-list",7),N("selectedAnimal",function(r){return V(e),R().selectedAnimal(r)}),g()()}if(2&t){const e=R();p(1),T("availableAnimals",e.availableAnimals)}}function M8(t,n){if(1&t){const e=re();m(0,"div",8)(1,"app-selected-animal",9),N("returnEmitter",function(r){return V(e),R().returnToAnimalView(r)}),g()()}if(2&t){const e=R();p(1),T("selectedAnimal",e.animal)}}let A8=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.animalSelected=!1}ngOnInit(){this.availableAnimals=this.globalService.globalVar.animals.filter(e=>e.isAvailable),this.subscription=this.componentCommunicationService.getAnimalView().subscribe(e=>{null!=e.type&&(this.animalSelected=!0,this.animal=e)})}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Ts))},t.\u0275cmp=De({type:t,selectors:[["app-animals-view"]],decls:4,vars:3,consts:[[1,"animalsView"],["class","info",4,"ngIf"],["class","listView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"info"],[1,"description"],[1,"listView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(m(0,"div",0),k(1,T8,6,0,"div",1),k(2,D8,2,1,"div",2),k(3,M8,2,1,"div",3),g()),2&e&&(p(1),T("ngIf",!i.animalSelected),p(1),T("ngIf",!i.animalSelected),p(1),T("ngIf",i.animalSelected))},directives:[zt,Em,S8],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{width:100%;height:100%}.info[_ngcontent-%COMP%]{text-align:center}"]}),t})();function R8(t,n){if(1&t){const e=re();m(0,"button",15),N("click",function(){V(e);const r=R().$implicit;return R().setAsAutoRunFreeRace(r)}),w(1,"Auto Run Free Race"),g()}}function E8(t,n){if(1&t){const e=re();m(0,"div")(1,"div",7),O(2,"app-animal-deck",8),m(3,"div",9)(4,"button",10),N("click",function(){const a=V(e).$implicit,o=R(),s=It(11);return o.editDeck(s,a)}),w(5,"Edit"),g()(),m(6,"div",11)(7,"button",12),N("click",function(){const a=V(e).$implicit;return R().setAsPrimary(a)}),w(8,"Set as Primary"),g()(),m(9,"div",13),k(10,R8,2,0,"button",14),g()(),O(11,"hr"),g()}if(2&t){const e=n.index,i=R();p(2),T("deckNumber",e+1),p(8),T("ngIf",i.showAutoRaceButton)}}function k8(t,n){if(1&t){const e=re();m(0,"div",31)(1,"input",32),N("input",function(){return V(e),R(2).toggleRaceOrder()}),g(),m(2,"label",33),N("click",function(){return V(e),R(2).toggleRaceOrder()}),w(3,"Race Order: "),g(),m(4,"span")(5,"span",34),N("dragstart",function(r){return V(e),R(2).dragStart(r)})("dragover",function(r){return V(e),R(2).allowDrop(r)})("drop",function(r){return V(e),R(2).dropCourseType(r)}),w(6),g(),w(7," / "),m(8,"span",35),N("dragstart",function(r){return V(e),R(2).dragStart(r)})("dragover",function(r){return V(e),R(2).allowDrop(r)})("drop",function(r){return V(e),R(2).dropCourseType(r)}),w(9),g(),w(10," / "),m(11,"span",36),N("dragstart",function(r){return V(e),R(2).dragStart(r)})("dragover",function(r){return V(e),R(2).allowDrop(r)})("drop",function(r){return V(e),R(2).dropCourseType(r)}),w(12),g(),w(13," / "),m(14,"span",37),N("dragstart",function(r){return V(e),R(2).dragStart(r)})("dragover",function(r){return V(e),R(2).allowDrop(r)})("drop",function(r){return V(e),R(2).dropCourseType(r)}),w(15),g(),w(16," / "),m(17,"span",38),N("dragstart",function(r){return V(e),R(2).dragStart(r)})("dragover",function(r){return V(e),R(2).allowDrop(r)})("drop",function(r){return V(e),R(2).dropCourseType(r)}),w(18),g()()()}if(2&t){const e=R(2);p(1),T("checked",e.isRaceOrderOn),p(4),T("ngClass",e.getColorClass(e.selectedDeckOrder[0])),p(1),Ie(e.selectedDeckOrder[0]),p(2),T("ngClass",e.getColorClass(e.selectedDeckOrder[1])),p(1),Ie(e.selectedDeckOrder[1]),p(2),T("ngClass",e.getColorClass(e.selectedDeckOrder[2])),p(1),Ie(e.selectedDeckOrder[2]),p(2),T("ngClass",e.getColorClass(e.selectedDeckOrder[3])),p(1),Ie(e.selectedDeckOrder[3]),p(2),T("ngClass",e.getColorClass(e.selectedDeckOrder[4])),p(1),Ie(e.selectedDeckOrder[4])}}const N8=function(t,n,e,i,r,a){return{selectedCourseType:t,flatlandColor:n,mountainColor:e,waterColor:i,tundraColor:r,volcanicColor:a}};function I8(t,n){if(1&t){const e=re();m(0,"span",39),N("click",function(){const a=V(e).$implicit;return R(2).filterType(a)}),w(1),g()}if(2&t){const e=n.$implicit,i=R(2);T("ngClass",function B0(t,n,e,i,r,a,o,s,l){const c=gi()+t,u=U(),d=er(u,c,e,i,r,a);return Ja(u,c+4,o,s)||d?Ur(u,c+6,l?n.call(l,e,i,r,a,o,s):n(e,i,r,a,o,s)):function cl(t,n){return t[n]}(u,c+6)}(2,N8,i.selectedCourseType===e,"Flatland"===e,"Mountain"===e,"Ocean"===e,"Tundra"===e,"Volcanic"===e)),p(1),z(" ",e.trim()," ")}}const P8=function(t){return{selectedAnimal:t}};function O8(t,n){if(1&t){const e=re();m(0,"span",40),N("click",function(){const a=V(e).$implicit;return R(2).selectAnimal(a)}),w(1),g()}if(2&t){const e=n.$implicit,i=R(2);T("ngClass",yr(2,P8,i.selectedAnimalName===e)),p(1),z(" ",e.trim()," ")}}function x8(t,n){if(1&t){const e=re();m(0,"div",16)(1,"form",17)(2,"div",18)(3,"h4",19),w(4),g(),m(5,"button",20),N("click",function(){return V(e).$implicit.dismiss()}),w(6,"X"),g()(),m(7,"div",21)(8,"div",22)(9,"label",23),w(10,"Deck Name: "),g(),O(11,"input",24),g(),k(12,k8,19,11,"div",25),O(13,"br"),m(14,"div",26),k(15,I8,2,9,"span",27),g(),O(16,"br"),m(17,"div"),k(18,O8,2,4,"span",28),g()(),m(19,"div",29)(20,"button",30),N("click",function(){return V(e),R().saveDeck()}),w(21,"Save"),g()()()()}if(2&t){const e=R();p(1),T("formGroup",e.editDeckForm),p(3),z("Edit ",e.selectedDeck.name,""),p(8),T("ngIf",e.displayRaceOrder),p(3),T("ngForOf",e.raceCourseTypeList),p(3),T("ngForOf",e.possibleAnimalsList)}}let F8=(()=>{class t{constructor(e,i,r){this.globalService=e,this.modalService=i,this.lookupService=r,this.raceCourseTypeList=[],this.displayRaceOrder=!1,this.editDeckForm=new Zu({deckName:new pg("")}),this.toggleRaceOrder=()=>{this.isRaceOrderOn=!this.isRaceOrderOn,this.selectedDeck.isCourseOrderActive=this.isRaceOrderOn}}ngOnInit(){this.isRaceOrderOn=!1,this.newAnimalList=[],this.animalDecks=this.globalService.globalVar.animalDecks,this.globalService.globalVar.animals.filter(r=>r.isAvailable).forEach(r=>{this.raceCourseTypeList.some(a=>a===r.getRaceCourseType())||this.raceCourseTypeList.push(r.getRaceCourseType())});var e=this.lookupService.getResourceByName("Scouts");null!=e&&e>0&&(this.displayRaceOrder=!0),this.selectedDeckOrder=[],this.selectedDeckOrder.push("Flatland"),this.selectedDeckOrder.push("Mountain"),this.selectedDeckOrder.push("Ocean"),this.selectedDeckOrder.push("Tundra"),this.selectedDeckOrder.push("Volcanic");var i=this.lookupService.getResourceByName("Team Manager");null==i&&(i=0),this.showAutoRaceButton=i>0}editDeck(e,i){this.selectedDeck=i,this.newAnimalList=[],this.selectedAnimalName="",this.selectedCourseType="Flatland",this.isRaceOrderOn=i.isCourseOrderActive,null!=i.courseTypeOrder&&i.courseTypeOrder.length>0&&(this.selectedDeckOrder=[],i.courseTypeOrder.forEach(r=>{r===P.Flatland&&this.selectedDeckOrder.push("Flatland"),r===P.Mountain&&this.selectedDeckOrder.push("Mountain"),r===P.Ocean&&this.selectedDeckOrder.push("Ocean"),r===P.Tundra&&this.selectedDeckOrder.push("Tundra"),r===P.Volcanic&&this.selectedDeckOrder.push("Volcanic")})),this.filterType(this.selectedCourseType),i.selectedAnimals.length>0&&i.selectedAnimals.forEach(r=>{this.newAnimalList.push(r)}),this.editDeckForm.patchValue({deckName:i.name}),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}saveDeck(){var e,i,r,a,o,s,l,c,u=this.globalService.globalVar.animalDecks.find(S=>S.deckNumber===this.selectedDeck.deckNumber);if(null!=u&&((null===(e=this.editDeckForm.get("deckName"))||void 0===e?void 0:e.value.length)<=50&&(null===(i=this.editDeckForm.get("deckName"))||void 0===i?void 0:i.value.length)>=1&&(u.name=null===(r=this.editDeckForm.get("deckName"))||void 0===r?void 0:r.value),u.selectedAnimals=[],this.newAnimalList.forEach(S=>{null==u||u.selectedAnimals.push(S)}),null==u||u.selectedAnimals.sort(this.compare),this.displayRaceOrder&&this.isRaceOrderOn)){var d=[],f=null===(a=document.getElementById("raceOrder1"))||void 0===a?void 0:a.innerHTML,h=null===(o=document.getElementById("raceOrder2"))||void 0===o?void 0:o.innerHTML,v=null===(s=document.getElementById("raceOrder3"))||void 0===s?void 0:s.innerHTML,b=null===(l=document.getElementById("raceOrder4"))||void 0===l?void 0:l.innerHTML,C=null===(c=document.getElementById("raceOrder5"))||void 0===c?void 0:c.innerHTML;d.push(f),d.push(h),d.push(v),d.push(b),d.push(C),d.forEach(S=>{"Flatland"===S&&(null==u||u.courseTypeOrder.push(P.Flatland)),"Mountain"===S&&(null==u||u.courseTypeOrder.push(P.Mountain)),"Ocean"===S&&(null==u||u.courseTypeOrder.push(P.Ocean)),"Tundra"===S&&(null==u||u.courseTypeOrder.push(P.Tundra)),"Volcanic"===S&&(null==u||u.courseTypeOrder.push(P.Volcanic))})}this.modalService.dismissAll()}compare(e,i){return e.raceCourseType>i.raceCourseType?1:i.raceCourseType>e.raceCourseType?-1:0}filterType(e){var i=this.lookupService.getAnimalsByRaceCourseType(e),r=[];i.length>0&&i.forEach(o=>{var s=this.globalService.globalVar.animals.find(l=>l.getAnimalType()===o);(null==s?void 0:s.isAvailable)&&r.push(s.getAnimalType())}),this.possibleAnimalsList=r,this.selectedCourseType=e;var a=this.selectedDeck.selectedAnimals.find(o=>o.getRaceCourseType()===e);null!=a&&(this.selectedAnimalName=a.getAnimalType())}selectAnimal(e){var i=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(null!=i){var r=-1,a=i.getRaceCourseType();this.newAnimalList.forEach(o=>{o.getRaceCourseType()===a&&(r=this.newAnimalList.indexOf(o))}),r>=0&&this.newAnimalList.splice(r,1),this.selectedAnimalName===i.getAnimalType()?this.selectedAnimalName="":(this.newAnimalList.push(i),this.selectedAnimalName=i.getAnimalType())}}setAsPrimary(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.isPrimaryDeck=!1),r.isPrimaryDeck=!0)}setAsAutoRunFreeRace(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.autoRunFreeRace),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.autoRunFreeRace=!1),r.autoRunFreeRace=!0)}dragStart(e){this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id)}allowDrop(e){e.preventDefault()}dropCourseType(e){var i=e.dataTransfer.getData("text"),r=document.getElementById(i),a=e.target.innerHTML;if(null!==r&&null!==a){var l=this.selectedDeckOrder.indexOf(a),c=this.selectedDeckOrder.indexOf(null==r?void 0:r.innerHTML);this.selectedDeckOrder[l]=r.innerHTML,this.selectedDeckOrder[c]=a,e.target.innerHTML="",e.target.className="",e.target.append(r.innerHTML),r.innerHTML="",r.className="",r.append(a)}}getColorClass(e){return{flatlandColor:"Flatland"===e,mountainColor:"Mountain"===e,waterColor:"Ocean"===e,tundraColor:"Tundra"===e,volcanicColor:"Volcanic"===e}}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Is),M(Cn))},t.\u0275cmp=De({type:t,selectors:[["app-decks-view"]],decls:12,vars:1,consts:[[1,"decksView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"description"],[4,"ngFor","ngForOf"],["content",""],[1,"gridContainer"],[1,"deck",3,"deckNumber"],[1,"edit"],[1,"editButton",3,"click"],[1,"primary"],[1,"primaryButton",3,"click"],[1,"autoRunFreeRace"],["class","autoRunFreeRaceButton",3,"click",4,"ngIf"],[1,"autoRunFreeRaceButton",3,"click"],[1,"modalClass"],[3,"formGroup"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","deck-name"],["id","deck-name","type","text","maxlength","50","formControlName","deckName",1,"spaced"],["class","raceOrder",4,"ngIf"],[1,"typeContainer"],["class","raceType subHeading clickableText",3,"ngClass","click",4,"ngFor","ngForOf"],["class","animalOption clickableText",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",3,"click"],[1,"raceOrder"],["type","checkbox","id","finishTraining",1,"spaced",3,"checked","input"],[1,"spaced",3,"click"],["id","raceOrder1","draggable","true",1,"draggable",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder2","draggable","true",1,"draggable",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder3","draggable","true",1,"draggable",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder4","draggable","true",1,"draggable",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder5","draggable","true",1,"draggable",3,"ngClass","dragstart","dragover","drop"],[1,"raceType","subHeading","clickableText",3,"ngClass","click"],[1,"animalOption","clickableText",3,"ngClass","click"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),w(5,"Decks"),g(),m(6,"div",4),w(7," Decks are groups of animals that run together in a race. Each deck consists of one animal from each course type. Your primary deck is the one that will run the races you select. "),g(),O(8,"hr"),g(),k(9,E8,12,2,"div",5),g()()(),k(10,x8,22,5,"ng-template",null,6,Rt)),2&e&&(p(9),T("ngForOf",i.animalDecks))},directives:[Fn,km,zt,Ju,ju,Ku,hs,ed,El,_g,ki],styles:['.decksView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceType[_ngcontent-%COMP%]{width:20%;-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.animalOption[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.selectedAnimal[_ngcontent-%COMP%]{font-weight:700}.selectedCourseType[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.typeContainer[_ngcontent-%COMP%]{width:100%}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:70% 15% 15%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"deck . freeRace" "deck edit primary"}.deck[_ngcontent-%COMP%]{grid-area:deck}.edit[_ngcontent-%COMP%]{grid-area:edit;text-align:center}.editButton[_ngcontent-%COMP%]{width:80%}.primary[_ngcontent-%COMP%]{grid-area:primary;text-align:center}.primaryButton[_ngcontent-%COMP%]{width:80%}.autoRunFreeRace[_ngcontent-%COMP%]{grid-area:freeRace;text-align:center}.autoRunFreeRaceButton[_ngcontent-%COMP%]{width:80%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.draggable[_ngcontent-%COMP%]{cursor:move;margin:1em}.raceOrder[_ngcontent-%COMP%]{display:inline-block}']}),t})();function V8(t,n){if(1&t&&(m(0,"em"),w(1),g()),2&t){const e=R();p(1),z("(",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}let L8=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.itemPurchased=new ge,this.canAffordItem=!0}ngOnInit(){this.selectedItem.type===q.Ability?(this.shortDescription=this.lookupService.getAnimalAbilityDescription(!0,this.selectedItem.additionalIdentifier),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedItem.additionalIdentifier)):this.selectedItem.type===q.Specialty?(this.shortDescription=this.lookupService.getSpecialtyItemDescription(this.selectedItem.name),""===this.shortDescription&&(this.shortDescription=this.selectedItem.shortDescription)):(this.shortDescription=this.selectedItem.shortDescription,this.longDescription=this.selectedItem.longDescription),this.selectedItem.purchasePrice.forEach(e=>{this.purchaseResourcesRequired=e.amount+" "+e.name+", ",this.lookupService.getResourceByName(e.name)<e.amount&&(this.canAffordItem=!1)}),this.purchaseResourcesRequired.length>0&&(this.purchaseResourcesRequired=this.purchaseResourcesRequired.substring(0,this.purchaseResourcesRequired.length-2))}BuyItem(){this.canBuyItem()&&(this.spendResourcesOnItem(),this.selectedItem.type===q.Animal&&this.buyAnimal(),this.selectedItem.type===q.Food?this.buyFood():this.selectedItem.type===q.Training&&this.buyTraining(),this.selectedItem.type===q.Specialty?this.buySpecialty():this.selectedItem.type===q.Ability&&this.buyAbility(),this.selectedItem.type===q.Equipment&&this.buyEquipment(),this.itemPurchased.emit(this.selectedItem))}canBuyItem(){var e=!0;return this.selectedItem.purchasePrice.forEach(i=>{this.lookupService.getResourceByName(i.name)<i.amount&&(e=!1)}),e}spendResourcesOnItem(){this.selectedItem.purchasePrice.forEach(e=>{this.lookupService.spendResourceByName(e.name,e.amount)})}buyAnimal(){var e=this.globalService.globalVar.animals.find(s=>s.name===this.selectedItem.name);if(null!=e){e.isAvailable=!0,this.selectedItem.amountPurchased=1;var i=this.globalService.globalVar.shop.find(s=>"Abilities"===s.name);if(null!=i){var r=i.itemList.filter(s=>s.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(s=>{s.isAvailable=!0})}var a=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);if(null!=a){var o=!1;a.selectedAnimals.forEach(s=>{s.raceCourseType===(null==e?void 0:e.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(e)}}}buyTraining(){this.selectedItem.amountPurchased=1;var e=this.globalService.globalVar.trainingOptions.find(i=>i.trainingName===this.selectedItem.name);void 0!==e&&(e.isAvailable=!0)}buyFood(){if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(i=>i.name===this.selectedItem.name)){var e=this.globalService.globalVar.resources.find(i=>i.name===this.selectedItem.name);null!=e&&(e.amount+=1)}else this.globalService.globalVar.resources.push(new oe(this.selectedItem.name,1,q.Food))}buySpecialty(){if(this.selectedItem.amountPurchased+=1,"National Races"===this.selectedItem.name){this.globalService.globalVar.nationalRaceCountdown=0;var e=this.globalService.globalVar.shop.find(o=>"Specialty"===o.name);if(null!=e){var i=e.itemList.find(o=>"International Races"===o.name);null!=i&&(i.isAvailable=!0)}}if("Team Manager"===this.selectedItem.name&&1===this.selectedItem.amountPurchased){var r=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=r&&(r.autoRunFreeRace=!0)}if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(o=>o.name===this.selectedItem.name)){var a=this.globalService.globalVar.resources.find(o=>o.name===this.selectedItem.name);null!=a&&(a.amount+=1)}else this.globalService.globalVar.resources.push(new oe(this.selectedItem.name,1,q.Specialty));null!=this.selectedItem.quantityMultiplier&&this.selectedItem.quantityMultiplier>0&&this.selectedItem.purchasePrice.forEach(o=>{null!=this.selectedItem.quantityAdditive&&this.selectedItem.quantityAdditive>0?o.amount+=this.selectedItem.quantityAdditive:o.amount*=this.selectedItem.quantityMultiplier})}buyAbility(){var e=this.selectedItem.name.split(" ")[0].trim(),i=this.selectedItem.name.split(":")[1].trim();if(""!==e&&""!==i){var r=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(void 0!==r){var a=r.availableAbilities.find(o=>o.name===i);void 0!==a&&(a.isAbilityPurchased=!0,this.selectedItem.amountPurchased=1)}}}buyEquipment(){if(this.selectedItem.amountPurchased+=1,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(i=>i.name===this.selectedItem.name)){var e=this.globalService.globalVar.resources.find(i=>i.name===this.selectedItem.name);null!=e&&(e.amount+=1)}else this.globalService.globalVar.resources.push(new oe(this.selectedItem.name,1,q.Equipment))}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Cn))},t.\u0275cmp=De({type:t,selectors:[["app-shopping-item"]],inputs:{selectedItem:"selectedItem"},outputs:{itemPurchased:"itemPurchased"},decls:12,vars:6,consts:[["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"item",3,"ngbPopover"],[4,"ngIf"],[3,"disabled","click"]],template:function(e,i){1&e&&(m(0,"div",0),w(1),k(2,V8,2,1,"em",1),O(3,"br")(4,"br"),w(5),O(6,"br")(7,"br"),w(8),O(9,"br"),m(10,"button",2),N("click",function(){return i.BuyItem()}),w(11,"Buy"),g()()),2&e&&(An("ngbPopover",i.longDescription),p(1),z(" ",i.selectedItem.name," "),p(1),T("ngIf",i.selectedItem.totalShopQuantity>1),p(3),z(" ",i.shortDescription," "),p(3),z(" ",i.purchaseResourcesRequired," "),p(2),T("disabled",!i.canAffordItem))},directives:[Va,zt],styles:[".item[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();function B8(t,n){if(1&t){const e=re();m(0,"td",6)(1,"div")(2,"app-shopping-item",7),N("itemPurchased",function(r){return V(e),R(2).itemPurchased(r)}),g()()()}if(2&t){const e=n.$implicit;p(2),T("selectedItem",e)}}function U8(t,n){if(1&t&&(m(0,"tr"),k(1,B8,3,1,"td",5),g()),2&t){const e=n.$implicit;p(1),T("ngForOf",e)}}let H8=(()=>{class t{constructor(e){this.globalService=e}ngOnInit(){this.setupDisplayItems()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];var e=4;this.screenHeight<=650&&(e=2);var i=[];this.section.itemList.forEach(a=>{a.isAvailable&&(a.canHaveMultiples&&(a.infiniteAmount||a.amountPurchased<a.totalShopQuantity)||0===a.amountPurchased)&&i.push(a)});for(var r=1;r<=i.length;r++)this.itemsCells.push(i[r-1]),r%e==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}itemPurchased(e){this.setupDisplayItems()}}return t.\u0275fac=function(e){return new(e||t)(M(Ze))},t.\u0275cmp=De({type:t,selectors:[["app-shopping-list"]],hostBindings:function(e,i){1&e&&N("resize",function(a){return i.onResize(a)},!1,nl)},inputs:{section:"section"},decls:8,vars:2,consts:[[1,"shoppingListView"],[1,"sectionHeaderBackgroundColor"],[1,"s4Heading","keyword","sectionHeaderText"],[1,"items"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[3,"selectedItem","itemPurchased"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1)(2,"span",2),w(3),g()(),m(4,"div",3)(5,"table"),k(6,U8,2,1,"tr",4),g(),O(7,"br"),g()()),2&e&&(p(3),Ie(i.section.name),p(3),T("ngForOf",i.itemsRows))},directives:[Fn,L8],styles:[".shoppingListView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.sectionHeaderBackgroundColor[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center}.sectionHeaderText[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function G8(t,n){if(1&t&&(m(0,"div",14),O(1,"app-shopping-list",15),g()),2&t){const e=n.$implicit;p(1),T("section",e)}}let j8=(()=>{class t{constructor(e){this.globalService=e,this.filterAnimals=!1,this.filterTrainings=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterAbilities=!1}ngOnInit(){this.getShopOptions()}getShopOptions(){this.sections=[];var e=this.filtersActive(),i=this.globalService.globalVar.shop.find(c=>"Animals"===c.name&&(!e||e&&this.filterAnimals));void 0!==i&&this.sections.push(i);var r=this.globalService.globalVar.shop.find(c=>"Trainings"===c.name&&(!e||e&&this.filterTrainings));void 0!==r&&this.sections.push(r);var a=this.globalService.globalVar.shop.find(c=>"Equipment"===c.name&&(!e||e&&this.filterEquipment));void 0!==a&&this.sections.push(a);var o=this.globalService.globalVar.shop.find(c=>"Food"===c.name&&(!e||e&&this.filterFood));void 0!==o&&this.sections.push(o);var s=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name&&(!e||e&&this.filterSpecialty));void 0!==s&&this.sections.push(s);var l=this.globalService.globalVar.shop.find(c=>"Abilities"===c.name&&(!e||e&&this.filterAbilities));void 0!==l&&this.sections.push(l)}toggleShopFilter(e){"Animals"===e&&(this.filterAnimals=!this.filterAnimals),"Trainings"===e&&(this.filterTrainings=!this.filterTrainings),"Equipment"===e&&(this.filterEquipment=!this.filterEquipment),"Food"===e&&(this.filterFood=!this.filterFood),"Specialty"===e&&(this.filterSpecialty=!this.filterSpecialty),"Abilities"===e&&(this.filterAbilities=!this.filterAbilities),this.getShopOptions()}filtersActive(){return!!(this.filterAnimals||this.filterAbilities||this.filterEquipment||this.filterFood||this.filterSpecialty||this.filterTrainings)}ResetShopFilters(){this.filterAnimals=!1,this.filterAbilities=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterTrainings=!1,this.getShopOptions()}}return t.\u0275fac=function(e){return new(e||t)(M(Ze))},t.\u0275cmp=De({type:t,selectors:[["app-shop-view"]],decls:25,vars:13,consts:[[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"filters"],["id","title"],["id","animalsFilter",1,"clickableText",3,"click"],["id","trainingsFilter",1,"clickableText",3,"click"],["id","equipmentFilter",1,"clickableText",3,"click"],["id","foodFilter",1,"clickableText",3,"click"],["id","specialtyFilter",1,"clickableText",3,"click"],["id","abilitiesFilter",1,"clickableText",3,"click"],[1,"centered","clickableText",3,"click"],["class","shopSection",4,"ngFor","ngForOf"],[1,"shopSection"],[3,"section"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),w(5,"Shop"),g()()(),m(6,"div",4)(7,"p",5),w(8,"Filters:"),g(),m(9,"p",6),N("click",function(){return i.toggleShopFilter("Animals")}),w(10,"Animals"),g(),m(11,"p",7),N("click",function(){return i.toggleShopFilter("Trainings")}),w(12," Trainings"),g(),m(13,"p",8),N("click",function(){return i.toggleShopFilter("Equipment")}),w(14,"Equipment "),g(),m(15,"p",9),N("click",function(){return i.toggleShopFilter("Food")}),w(16,"Food"),g(),m(17,"p",10),N("click",function(){return i.toggleShopFilter("Specialty")}),w(18," Specialty"),g(),m(19,"p",11),N("click",function(){return i.toggleShopFilter("Abilities")}),w(20," Abilities"),g()(),m(21,"div",12),N("click",function(){return i.ResetShopFilters()}),w(22," Reset Filters "),g()(),O(23,"br"),k(24,G8,2,1,"div",13),g()),2&e&&(p(9),we("filterActive",i.filterAnimals),p(2),we("filterActive",i.filterTrainings),p(2),we("filterActive",i.filterEquipment),p(2),we("filterActive",i.filterFood),p(2),we("filterActive",i.filterSpecialty),p(2),we("filterActive",i.filterAbilities),p(5),T("ngForOf",i.sections))},directives:[Fn,H8],styles:['.shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.filters[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"title animalsFilter trainingsFilter facilityFilter foodFilter specialtyFilter enhancerFilter"}#title[_ngcontent-%COMP%]{grid-area:title}#animalsFilter[_ngcontent-%COMP%]{grid-area:animalsFilter}#trainingsFilter[_ngcontent-%COMP%]{grid-area:trainingsFilter}#facilityFilter[_ngcontent-%COMP%]{grid-area:facilityFilter}#foodFilter[_ngcontent-%COMP%]{grid-area:foodFilter}#specialtyFilter[_ngcontent-%COMP%]{grid-area:specialtyFilter}#enhancerFilter[_ngcontent-%COMP%]{grid-area:enhancerFilter}']}),t})();class mt{constructor(n,e,i,r,a){void 0!==n&&(this.traitName=n),void 0!==e&&(this.requiredLevel=e),void 0!==i&&(this.researchLevel=i),void 0!==r&&(this.positiveStatGain=r),void 0!==a&&(this.negativeStatGain=a)}getStatGainDescription(){var n="",e="";return this.positiveStatGain===L.acceleration&&(n="Acceleration"),this.positiveStatGain===L.adaptability&&(n="Adaptability"),this.positiveStatGain===L.endurance&&(n="Endurance"),this.positiveStatGain===L.focus&&(n="Focus"),this.positiveStatGain===L.power&&(n="Power"),this.positiveStatGain===L.topSpeed&&(n="Top Speed"),this.negativeStatGain===L.acceleration&&(e="Acceleration"),this.negativeStatGain===L.adaptability&&(e="Adaptability"),this.negativeStatGain===L.endurance&&(e="Endurance"),this.negativeStatGain===L.focus&&(e="Focus"),this.negativeStatGain===L.power&&(e="Power"),this.negativeStatGain===L.topSpeed&&(e="Top Speed"),"+"+this.researchLevel+"% "+n+", -"+this.researchLevel+"% "+e}}let $8=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i}ngOnInit(){this.traitLevel=this.lookupService.getResearchLevel()}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Cn))},t.\u0275cmp=De({type:t,selectors:[["app-trait-option"]],inputs:{trait:"trait"},decls:5,vars:2,consts:[[1,"trait"],[1,"traitName"],[1,"traitStats"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"p",1),w(2),g(),m(3,"p",2),w(4),g()()),2&e&&(p(2),Ie(i.trait.traitName),p(2),Ie(i.trait.getStatGainDescription()))},styles:[".trait[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const z8=function(t){return{activeTrait:t}};function W8(t,n){if(1&t){const e=re();m(0,"td",4)(1,"div",5),N("click",function(){const a=V(e).$implicit;return R(2).selectTrait(a)}),O(2,"app-trait-option",6),g()()}if(2&t){const e=n.$implicit;p(1),T("ngClass",yr(2,z8,e.isSelected)),p(1),T("trait",e)}}function q8(t,n){if(1&t&&(m(0,"tr"),k(1,W8,3,4,"td",3),g()),2&t){const e=n.$implicit;p(1),T("ngForOf",e)}}let Y8=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrait=new ge}ngOnInit(){this.setupDisplayTraits()}setupDisplayTraits(){this.traitsCells=[],this.traitsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTraits.length;i++)this.traitsCells.push(this.availableTraits[i-1]),i%e==0&&(this.traitsRows.push(this.traitsCells),this.traitsCells=[]);0!==this.traitsCells.length&&this.traitsRows.push(this.traitsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrait(e){this.availableTraits.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrait.emit(e)}ngOnChanges(e){this.availableTraits=e.availableTraits.currentValue,this.setupDisplayTraits()}}return t.\u0275fac=function(e){return new(e||t)(M(Ze))},t.\u0275cmp=De({type:t,selectors:[["app-trait-list"]],hostBindings:function(e,i){1&e&&N("resize",function(a){return i.onResize(a)},!1,nl)},inputs:{availableTraits:"availableTraits"},outputs:{selectedTrait:"selectedTrait"},features:[$n],decls:4,vars:1,consts:[[1,"traitsView"],[1,"traits"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trait"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1)(2,"table"),k(3,q8,2,1,"tr",2),g()()()),2&e&&(p(3),T("ngForOf",i.traitsRows))},directives:[Fn,ki,$8],styles:[".traitsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function X8(t,n){if(1&t&&(m(0,"span"),w(1),g()),2&t){const e=R(2);p(1),Ie(e.selectedAnimal.name)}}function Q8(t,n){if(1&t&&(m(0,"div"),k(1,X8,2,1,"span",4),O(2,"br"),m(3,"span"),w(4),g()()),2&t){const e=R();p(1),T("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),Ie(e.selectedAnimal.getAnimalType())}}function Z8(t,n){if(1&t&&(m(0,"div")(1,"span"),w(2),g()()),2&t){const e=R();p(2),Ie(e.selectedAnimal.getAnimalType())}}function J8(t,n){if(1&t&&(m(0,"span",19),w(1),g()),2&t){const e=R();p(1),z("",e.existingTrait.traitName," ")}}function K8(t,n){1&t&&(m(0,"span"),w(1,"No Trait Assigned"),g())}function eG(t,n){if(1&t&&(m(0,"div"),O(1,"br"),m(2,"p",20),O(3,"ngb-progressbar",21),m(4,"span",22),w(5),sn(6,"number"),g()(),O(7,"br"),g()),2&t){const e=R();p(3),T("value",e.trainingProgressBarPercent),p(2),z("",vn(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}let tG=(()=>{class t{constructor(e,i,r){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.returnEmitter=new ge,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1}ngOnInit(){this.availableTraits=this.GetAvailableTraits();var e=this.globalService.globalVar.incubator;if(null!=e.assignedAnimal&&null!=e.assignedTrait&&(this.existingTrait=e.assignedTrait),null!=this.existingTrait){var i=this.availableTraits.find(a=>{var o;return(null===(o=this.existingTrait)||void 0===o?void 0:o.traitName)===a.traitName});null!=i&&(i.isSelected=!0)}this.gameLoopService.gameUpdateEvent.subscribe(a=>{var o=this.globalService.globalVar.incubator;if(null==o.assignedAnimal||null==o.assignedTrait)return this.existingTrait=null,void this.availableTraits.forEach(s=>{s.isSelected=!1});this.trainingProgressBarPercent=o.timeTrained/o.timeToComplete*100})}selectNewTrait(e){var i=Object.assign({},e),r=this.globalService.globalVar.incubator;r.timeTrained=0,r.assignedAnimal=this.selectedAnimal,r.assignedTrait=i,this.existingTrait=i,this.selectedAnimal.currentTraining=null,this.selectedAnimal.canTrain=!1}GetAvailableTraits(){var e=[],i=this.lookupService.getResearchLevel();return e.push(new mt("Alert",1,i,L.focus,L.endurance)),e.push(new mt("Sharp",1,i,L.adaptability,L.power)),e.push(new mt("Bulky",1,i,L.power,L.topSpeed)),e.push(new mt("Curious",3,i,L.acceleration,L.focus)),e.push(new mt("Adamant",3,i,L.topSpeed,L.acceleration)),e.push(new mt("Stoic",5,i,L.endurance,L.adaptability)),e.push(new mt("Smart",5,i,L.focus,L.power)),e.push(new mt("Careful",7,i,L.adaptability,L.acceleration)),e.push(new mt("Attentive",7,i,L.power,L.endurance)),e.push(new mt("Keen",9,i,L.acceleration,L.topSpeed)),e.push(new mt("Quick",9,i,L.topSpeed,L.adaptability)),e.push(new mt("Tough",11,i,L.endurance,L.focus)),e.push(new mt("Solitary",11,i,L.focus,L.acceleration)),e.push(new mt("Cautious",13,i,L.adaptability,L.topSpeed)),e.push(new mt("Wild",13,i,L.power,L.focus)),e.push(new mt("Clumsy",15,i,L.acceleration,L.adaptability)),e.push(new mt("Natural",15,i,L.topSpeed,L.endurance)),e.push(new mt("Resilient",17,i,L.endurance,L.power)),e.push(new mt("Anxious",17,i,L.focus,L.topSpeed)),e.push(new mt("Lucky",19,i,L.adaptability,L.focus)),e.push(new mt("Rugged",19,i,L.power,L.adaptability)),e.push(new mt("Naive",21,i,L.acceleration,L.endurance)),e.push(new mt("Sprightly",21,i,L.topSpeed,L.power)),e.push(new mt("Stout",23,i,L.endurance,L.acceleration)),e.push(new mt("Pensive",23,i,L.focus,L.adaptability)),e.push(new mt("Languid",25,i,L.adaptability,L.endurance)),e.push(new mt("Mighty",25,i,L.power,L.acceleration)),e.push(new mt("Nimble",27,i,L.acceleration,L.power)),e.push(new mt("Small",27,i,L.topSpeed,L.focus)),e.push(new mt("Resolute",29,i,L.endurance,L.topSpeed)),(e=e.filter(r=>i>=r.requiredLevel)).filter(r=>!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterSpeed&&r.positiveStatGain===L.topSpeed||this.filterAcceleration&&r.positiveStatGain===L.acceleration||this.filterEndurance&&r.positiveStatGain===L.endurance||this.filterPower&&r.positiveStatGain===L.power||this.filterFocus&&r.positiveStatGain===L.focus||this.filterAdaptability&&r.positiveStatGain===L.adaptability)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.availableTraits=this.GetAvailableTraits()}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTraits=this.GetAvailableTraits()}returnToAnimalView(){this.returnEmitter.emit(!1)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Tr),M(Cn))},t.\u0275cmp=De({type:t,selectors:[["app-incubator-traits"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:40,vars:19,consts:[[1,"incubatorTraitsModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[4,"ngIf"],["class","activeTrait",4,"ngIf"],[1,"back",3,"click"],[1,"filterGridContainer"],[1,"resetFiltersHeader","clickableText"],[3,"click"],[1,"changeTrainingHeader"],[1,"statFilter","clickableText"],["id","speedFilter",3,"click"],["id","accelerationFilter",3,"click"],["id","enduranceFilter",3,"click"],["id","powerFilter",3,"click"],["id","focusFilter",3,"click"],["id","adaptabilityFilter",3,"click"],[3,"availableTraits","selectedTrait"],[1,"activeTrait"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),k(4,Q8,5,2,"div",4),k(5,Z8,3,1,"div",4),m(6,"span"),w(7),g(),O(8,"hr"),k(9,J8,2,1,"span",5),k(10,K8,2,0,"span",4),g(),m(11,"div",6),N("click",function(){return i.returnToAnimalView()}),m(12,"span"),w(13,"Back"),g()()(),O(14,"hr"),k(15,eG,8,5,"div",4),O(16,"br")(17,"br"),m(18,"div",7)(19,"div",8)(20,"span",9),N("click",function(){return i.resetFilters()}),w(21,"Reset Filters"),g()(),m(22,"div",10)(23,"span"),w(24,"Choose New Trait"),g()(),m(25,"div",11)(26,"span",12),N("click",function(){return i.toggleStatFilter("Speed")}),w(27,"SPD "),g(),m(28,"span",13),N("click",function(){return i.toggleStatFilter("Acceleration")}),w(29,"ACC "),g(),m(30,"span",14),N("click",function(){return i.toggleStatFilter("Endurance")}),w(31,"END "),g(),m(32,"span",15),N("click",function(){return i.toggleStatFilter("Power")}),w(33,"PWR "),g(),m(34,"span",16),N("click",function(){return i.toggleStatFilter("Focus")}),w(35,"FCS "),g(),m(36,"span",17),N("click",function(){return i.toggleStatFilter("Adaptability")}),w(37,"ADP"),g()()(),O(38,"br"),m(39,"app-trait-list",18),N("selectedTrait",function(a){return i.selectNewTrait(a)}),g()()()),2&e&&(p(4),T("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),T("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(2),z("Current Trait: ",i.selectedAnimal.getTraitName(),""),p(2),T("ngIf",null!=i.existingTrait),p(1),T("ngIf",null==i.existingTrait),p(5),T("ngIf",null!=i.existingTrait),p(11),we("filterActive",i.filterSpeed),p(2),we("filterActive",i.filterAcceleration),p(2),we("filterActive",i.filterEndurance),p(2),we("filterActive",i.filterPower),p(2),we("filterActive",i.filterFocus),p(2),we("filterActive",i.filterAdaptability),p(3),T("availableTraits",i.availableTraits))},directives:[zt,Rm,Y8],pipes:[Ml],styles:['.incubatorTraitsModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"ResetFiler changeTraitHeader statFilter"}.changeTraitHeader[_ngcontent-%COMP%]{grid-area:changeTraitHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.resetFilter[_ngcontent-%COMP%]{grid-area:resetFilter}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}']}),t})();function nG(t,n){1&t&&(m(0,"div",3)(1,"h2"),w(2,"Incubator"),g(),m(3,"div",4),w(4," Select an animal and the desired trait to begin the incubation process. While incubating, you will not be able to train the selected animal. The chosen trait will remain on the animal until a new trait is selected or the trait is removed. "),g(),O(5,"hr"),g())}function iG(t,n){if(1&t){const e=re();m(0,"div",7)(1,"div")(2,"app-animal-list",8),N("selectedAnimal",function(r){return V(e),R(2).selectedAnimal(r)}),g()()()}if(2&t){const e=R(2);p(2),T("availableAnimals",e.availableAnimals)}}function rG(t,n){if(1&t){const e=re();m(0,"div",9)(1,"app-incubator-traits",10),N("returnEmitter",function(r){return V(e),R(2).returnToAnimalView(r)}),g()()}if(2&t){const e=R(2);p(1),T("selectedAnimal",e.animal)}}function aG(t,n){if(1&t&&(m(0,"div"),k(1,iG,3,1,"div",5),k(2,rG,2,1,"div",6),g()),2&t){const e=R();p(1),T("ngIf",!e.animalSelected),p(1),T("ngIf",e.animalSelected)}}function oG(t,n){1&t&&(m(0,"div"),w(1," To access the incubator, you need to improve your research level. Try participating in Duo Races. "),g())}let sG=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.animalSelected=!1}ngOnInit(){this.availableAnimals=this.globalService.globalVar.animals.filter(i=>i.isAvailable),this.researchLevel=this.lookupService.getResearchLevel();var e=this.globalService.globalVar.incubator;null!=e.assignedAnimal&&(this.animalSelected=!0,this.animal=e.assignedAnimal)}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Cn))},t.\u0275cmp=De({type:t,selectors:[["app-incubator-view"]],decls:4,vars:3,consts:[[1,"incubatorView"],["class","info",4,"ngIf"],[4,"ngIf"],[1,"info"],[1,"description"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"selectAnimalView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(m(0,"div",0),k(1,nG,6,0,"div",1),k(2,aG,3,2,"div",2),k(3,oG,2,0,"div",2),g()),2&e&&(p(1),T("ngIf",!i.animalSelected),p(1),T("ngIf",i.researchLevel>0),p(1),T("ngIf",0===i.researchLevel))},directives:[zt,Em,tG],styles:[".incubatorView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:1rem}"]}),t})(),lG=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=De({type:t,selectors:[["app-talents-view"]],decls:2,vars:0,consts:[[1,"talentsView"]],template:function(e,i){1&e&&(m(0,"div",0),w(1,"\nThis is still in development. Check back soon!\n"),g())},styles:[".talentsView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}"]}),t})(),cG=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=De({type:t,selectors:[["app-faq-view"]],decls:2,vars:0,consts:[[1,"faqView"]],template:function(e,i){1&e&&(m(0,"div",0),w(1," This is still in development. Check back soon! "),g())},styles:[".faqView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}"]}),t})(),uG=(()=>{class t{constructor(e){this.globalService=e}ngOnInit(){this.trackedStats=this.globalService.globalVar.trackedStats;var e=0;this.globalService.globalVar.animals.forEach(i=>{i.totalRacesRun>e&&(e=i.totalRacesRun,this.mostUsedAnimal=i.name,this.mostUsedAnimalCount=e)})}}return t.\u0275fac=function(e){return new(e||t)(M(Ze))},t.\u0275cmp=De({type:t,selectors:[["app-stats-view"]],decls:13,vars:5,consts:[[1,"statsView"],[1,"info"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"h2",1),w(2,"Stats"),g(),O(3,"br")(4,"br"),w(5),O(6,"br"),w(7),O(8,"br"),w(9),O(10,"br"),w(11),O(12,"br"),g()),2&e&&(p(5),z(" Total Races: ",i.trackedStats.totalRaces," "),p(2),z(" Total Meters Covered: ",i.trackedStats.totalMetersRaced.toFixed(0)," "),p(2),z(" Total Breeds: ",i.trackedStats.totalBreeds," "),p(2),Hi(" Most Used Animal: ",i.mostUsedAnimal," (",i.mostUsedAnimalCount,") "))},styles:[".statsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}"]}),t})();function dG(t,n){if(1&t&&(m(0,"p")(1,"span",7),w(2),m(3,"span",8),w(4),g(),O(5,"hr",9),g()()),2&t){const e=n.$implicit,i=R();p(1),An("ngbPopover",i.getPopover(e.name,e.itemType)),p(1),z(" ",e.name," "),p(2),z("x ",e.amount,"")}}function fG(t,n){if(1&t&&(m(0,"p")(1,"span",7),w(2),m(3,"span",8),w(4),g(),O(5,"hr",9),g()()),2&t){const e=n.$implicit,i=R();p(1),An("ngbPopover",i.getPopover(e.name,e.itemType)),p(1),z(" ",e.name," "),p(2),z("x ",e.amount,"")}}function hG(t,n){if(1&t&&(m(0,"p")(1,"span",7),w(2),m(3,"span",8),w(4),g(),O(5,"hr",9),g()()),2&t){const e=n.$implicit,i=R();p(1),An("ngbPopover",i.getPopover(e.name,e.itemType)),p(1),z(" ",e.name," "),p(2),z("x ",e.amount,"")}}function pG(t,n){if(1&t&&(m(0,"p")(1,"span",7),w(2),m(3,"span",8),w(4),g(),O(5,"hr",9),g()()),2&t){const e=n.$implicit,i=R();p(1),An("ngbPopover",i.getPopover(e.name,e.itemType)),p(1),z(" ",e.name," "),p(2),z("x ",e.amount,"")}}let gG=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.resources=[],this.equipment=[],this.specialtyItems=[],this.progressionResources=[]}ngOnInit(){this.resources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===q.Food||e.itemType===q.Resources).sort(),this.equipment=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===q.Equipment).sort(),this.specialtyItems=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===q.Specialty).sort(),this.progressionResources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===q.Progression).sort()}getPopover(e,i){return this.lookupService.getResourcePopover(e,i)}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Cn))},t.\u0275cmp=De({type:t,selectors:[["app-resources-view"]],decls:21,vars:4,consts:[[1,"resourcesView","gridContainer"],[1,"resources"],[1,"s4Heading","centered"],[4,"ngFor","ngForOf"],[1,"progression"],[1,"specialty"],[1,"equipment"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"screenMarginLeft",3,"ngbPopover"],[1,"rightAligned"],[1,"miniHr"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1)(2,"div",2),w(3,"Resources"),g(),O(4,"br"),k(5,dG,6,3,"p",3),g(),m(6,"div",4)(7,"div",2),w(8,"Progression"),g(),O(9,"br"),k(10,fG,6,3,"p",3),g(),m(11,"div",5)(12,"div",2),w(13,"Specialty"),g(),O(14,"br"),k(15,hG,6,3,"p",3),g(),m(16,"div",6)(17,"div",2),w(18,"Equipment"),g(),O(19,"br"),k(20,pG,6,3,"p",3),g()()),2&e&&(p(5),T("ngForOf",i.resources),p(5),T("ngForOf",i.progressionResources),p(5),T("ngForOf",i.specialtyItems),p(5),T("ngForOf",i.equipment))},directives:[Fn,Va],styles:['.resources[_ngcontent-%COMP%]{white-space:pre}.resourcesView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:25%;grid-template-rows:100%;justify-content:stretch;grid-template-areas:"resources progression specialty equipment"}.resources[_ngcontent-%COMP%]{grid-area:resources;border-right:1px solid rgba(0,0,0,.1)}.progression[_ngcontent-%COMP%]{grid-area:progression;border-right:1px solid rgba(0,0,0,.1)}.specialty[_ngcontent-%COMP%]{grid-area:specialty;border-right:1px solid rgba(0,0,0,.1)}.equipment[_ngcontent-%COMP%]{grid-area:equipment}.rightAligned[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{text-align:center}']}),t})(),mG=(()=>{class t{constructor(e,i,r){this.globalService=e,this.themeService=i,this.utilityService=r,this.raceDisplayInfoEnum=sr,this.skipDrawRaceToggle=()=>{this.skipDrawRace=!this.skipDrawRace,this.globalService.globalVar.settings.set("skipDrawRace",this.skipDrawRace)},this.finishTrainingBeforeSwitchingToggle=()=>{this.finishTrainingBeforeSwitching=!this.finishTrainingBeforeSwitching,this.globalService.globalVar.settings.set("finishTrainingBeforeSwitching",this.finishTrainingBeforeSwitching)},this.hideTipsToggle=()=>{this.hideTips=!this.hideTips,this.globalService.globalVar.settings.set("hideTips",this.hideTips)},this.useNumbersForCircuitRankToggle=()=>{this.useNumbersForCircuitRank=!this.useNumbersForCircuitRank,this.globalService.globalVar.settings.set("useNumbersForCircuitRank",this.useNumbersForCircuitRank)}}ngOnInit(){this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1);var e=this.globalService.globalVar.settings.get("skipDrawRace");this.skipDrawRace=void 0!==e&&e,this.skipDrawRacePopoverText="Turn on to immediately skip to the end of any race.";var i=this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching");this.finishTrainingBeforeSwitching=void 0!==i&&i,this.finishTrainingBeforeSwitchingPopoverText="Turn on to wait until finishing your current training before switching to the next training you select.";var r=this.globalService.globalVar.settings.get("raceDisplayInfo");this.raceDisplayInfo=this.getRaceDisplayInfoName(void 0===r?sr.both:r),this.raceDisplayInfoPopoverText="Choose how to view races. Draw only shows the visual aspect, text only shows the textual updates, and both shows both. Both is default.";var a=this.globalService.globalVar.settings.get("hideTips");this.hideTips=void 0!==a&&a,this.hideTipsPopoverText="Stop displaying tips in the footer.";var o=this.globalService.globalVar.settings.get("useNumbersForCircuitRank");this.useNumbersForCircuitRank=void 0!==o&&o,this.useNumbersForCircuitRankPopoverText="Use numbers instead of letters when displaying ranks."}SaveGame(){var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);this.importExportValue=i}LoadGame(){if(confirm("This will overwrite your existing game data. Continue?")){var e=LZString.decompressFromBase64(this.importExportValue),i=JSON.parse(e);this.globalService.globalVar=NS(Jn,i)}}saveRaceDisplayInfo(){this.globalService.globalVar.settings.set("raceDisplayInfo",this.raceDisplayInfo)}changeRaceDisplayInfo(e){this.globalService.globalVar.settings.set("raceDisplayInfo",e),this.raceDisplayInfo=this.getRaceDisplayInfoName(e)}changeTheme(e){var i=Xl;"White"===e&&(i=this.themeService.setWhiteTheme()),"Light"===e&&(i=this.themeService.setLightTheme()),"Twilight"===e&&(i=this.themeService.setTwilightTheme()),"Night"===e&&(i=this.themeService.setNightTheme()),this.globalService.globalVar.settings.set("theme",i),this.getThemeName()}getThemeName(){this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1)}getRaceDisplayInfoName(e){return e===sr.both?"Both":e===sr.text?"Text":e===sr.draw?"Draw":""}enterRedemptionCode(){}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Ql),M(qr))},t.\u0275cmp=De({type:t,selectors:[["app-settings-view"]],decls:85,vars:13,consts:[[1,"settingsView"],[1,"info"],[1,"settingsGrid"],[1,"options"],[1,"s4Heading"],[1,"toggles"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","finishTraining",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","hideTips",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","useNumbersForCircuitRank",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave","ngbDropdown","",1,"d-inline-block",3,"ngbPopover"],[1,"bottomAligned"],["type","button","id","raceDisplayInfoDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","raceDisplayInfoDropdown"],["ngbDropdownItem","",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","themeDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","themeDropdown"],[1,"saveLoad"],[1,"importExportDiv"],["id","importExport","name","importExport","rows","10",3,"ngModel","ngModelChange"],[1,"importExportButtons"],[3,"click"],[1,"codeRedemption"],["for","codeRedemptionText"],["id","codeRedemptionText","type","text",1,"spaced","codeRedemptionInput",3,"ngModel","ngModelChange"],[1,"screenMarginLeft",3,"click"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1)(2,"h2"),w(3,"Settings"),g()(),m(4,"div",2)(5,"div",3)(6,"span",4),w(7,"Options"),g(),O(8,"br"),m(9,"div",5)(10,"span",6)(11,"label")(12,"input",7),N("ngModelChange",function(a){return i.skipDrawRace=a})("input",function(){return i.skipDrawRaceToggle()}),g(),m(13,"span"),w(14,"Auto Skip Race Info"),g()()(),O(15,"br"),m(16,"span",6)(17,"label")(18,"input",8),N("ngModelChange",function(a){return i.finishTrainingBeforeSwitching=a})("input",function(){return i.finishTrainingBeforeSwitchingToggle()}),g(),m(19,"span"),w(20,"Finish Training Before Switching "),g()()(),O(21,"br"),m(22,"span",6)(23,"label")(24,"input",9),N("ngModelChange",function(a){return i.hideTips=a})("input",function(){return i.hideTipsToggle()}),g(),m(25,"span"),w(26,"Hide Tips"),g()()(),O(27,"br"),m(28,"span",6)(29,"label")(30,"input",10),N("ngModelChange",function(a){return i.useNumbersForCircuitRank=a})("input",function(){return i.useNumbersForCircuitRankToggle()}),g(),m(31,"span"),w(32,"Use Numbers For Circuit Rank"),g()()(),O(33,"br"),g(),m(34,"div",11)(35,"label",12),w(36,"Race Display Info:"),g(),m(37,"button",13),w(38),g(),m(39,"div",14)(40,"button",15),N("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.draw)}),w(41,"Draw"),g(),m(42,"button",15),N("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.text)}),w(43,"Text"),g(),m(44,"button",15),N("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.both)}),w(45,"Both"),g()()(),O(46,"br"),m(47,"div",16)(48,"label",12),w(49,"Theme:"),g(),m(50,"button",17),w(51),g(),m(52,"div",18)(53,"button",15),N("click",function(){return i.changeTheme("White")}),w(54,"White"),g(),m(55,"button",15),N("click",function(){return i.changeTheme("Light")}),w(56,"Light"),g(),m(57,"button",15),N("click",function(){return i.changeTheme("Twilight")}),w(58,"Twilight"),g(),m(59,"button",15),N("click",function(){return i.changeTheme("Night")}),w(60,"Night"),g()()()(),m(61,"div",19)(62,"span",4),w(63,"Save/Load"),g(),O(64,"br"),m(65,"div",20)(66,"textarea",21),N("ngModelChange",function(a){return i.importExportValue=a}),g(),m(67,"div",22)(68,"button",23),N("click",function(){return i.LoadGame()}),w(69," Import "),g(),m(70,"button",23),N("click",function(){return i.SaveGame()}),w(71," Export "),g()()(),O(72,"br")(73,"br"),m(74,"div")(75,"span",4),w(76,"Code Redemption"),g(),O(77,"br")(78,"br"),m(79,"div",24)(80,"label",25),w(81,"Code: "),g(),m(82,"input",26),N("ngModelChange",function(a){return i.enteredRedemptionCode=a}),g(),m(83,"button",27),N("click",function(){return i.enterRedemptionCode()}),w(84," Enter "),g()()()()()()),2&e&&(p(10),T("ngbPopover",i.skipDrawRacePopoverText),p(2),T("ngModel",i.skipDrawRace),p(4),T("ngbPopover",i.finishTrainingBeforeSwitchingPopoverText),p(2),T("ngModel",i.finishTrainingBeforeSwitching),p(4),T("ngbPopover",i.finishTrainingBeforeSwitchingPopoverText),p(2),T("ngModel",i.hideTips),p(4),T("ngbPopover",i.finishTrainingBeforeSwitchingPopoverText),p(2),T("ngModel",i.useNumbersForCircuitRank),p(4),T("ngbPopover",i.raceDisplayInfoPopoverText),p(4),Ie(i.raceDisplayInfo),p(13),Ie(i.currentTheme),p(15),T("ngModel",i.importExportValue),p(16),T("ngModel",i.enteredRedemptionCode))},directives:[Va,Uu,El,xl,cc,xT,Tm,Sm,hs],styles:['.settingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}#raceDisplayInfoDropdown[_ngcontent-%COMP%], #themeDropdown[_ngcontent-%COMP%]{border:1px solid;border-color:var(--background-tertiary)}.bottomAligned[_ngcontent-%COMP%]{vertical-align:bottom}.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". options saveLoad ."}.options[_ngcontent-%COMP%]{grid-area:options}.saveLoad[_ngcontent-%COMP%]{grid-area:saveLoad}#importExport[_ngcontent-%COMP%]{width:100%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.importExportButtons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.codeRedemption[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.codeRedemptionInput[_ngcontent-%COMP%]{flex:1}']}),t})();function vG(t,n){if(1&t){const e=re();m(0,"div")(1,"p",1),N("click",function(){V(e);const r=R();return r.switchView(r.navigationEnum.incubator)}),w(2,"Incubator"),g(),O(3,"hr"),g()}if(2&t){const e=R();p(1),T("ngClass",e.selectedNavigation===e.navigationEnum.incubator?"active":"")}}function _G(t,n){if(1&t){const e=re();m(0,"div")(1,"p",1),N("click",function(){V(e);const r=R();return r.switchView(r.navigationEnum.talents)}),w(2,"Talents"),g(),O(3,"hr"),g()}if(2&t){const e=R();p(1),T("ngClass",e.selectedNavigation===e.navigationEnum.talents?"active":"")}}const oD=function(t,n){return{active:t,tutorialActive:n}};let bG=(()=>{class t{constructor(e,i,r,a){this.componentCommunicationService=e,this.lookupService=i,this.globalService=r,this.gameLoopService=a,this.viewChanged=new ge,this.navigationEnum=wn,this.selectedNavigation=0,this.tutorial3Active=!1,this.tutorial6Active=!1}ngOnInit(){this.componentCommunicationService.getNewView().subscribe(e=>{this.viewChanged.emit(e),this.selectedNavigation=e}),this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.talentsAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.tutorialSubscription=this.gameLoopService.gameUpdateEvent.subscribe(e=>{var i;this.tutorial3Active=!this.globalService.globalVar.tutorialCompleted&&3===this.globalService.globalVar.currentTutorialId,this.tutorial6Active=!(this.globalService.globalVar.tutorialCompleted||6!==this.globalService.globalVar.currentTutorialId||!(null===(i=this.globalService.globalVar.animals.find(r=>r.type===I.Monkey))||void 0===i?void 0:i.isAvailable)),this.globalService.globalVar.tutorialCompleted&&this.tutorialSubscription.unsubscribe()})}switchView(e){this.viewChanged.emit(e),this.selectedNavigation=e,this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.talentsAvailable=this.lookupService.isItemUnlocked("rainbowRace")}handleIntroTutorial(){!this.globalService.globalVar.tutorialCompleted&&3===this.globalService.globalVar.currentTutorialId&&(this.globalService.globalVar.showTutorial=!0)}}return t.\u0275fac=function(e){return new(e||t)(M(Ts),M(Cn),M(Ze),M(Tr))},t.\u0275cmp=De({type:t,selectors:[["app-navigation"]],outputs:{viewChanged:"viewChanged"},decls:29,vars:17,consts:[[1,"navigation"],[1,"clickableText",3,"ngClass","click"],[4,"ngIf"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"p",1),N("click",function(){return i.switchView(i.navigationEnum.barn)}),w(2,"Barns"),g(),O(3,"hr"),m(4,"p",1),N("click",function(){return i.switchView(i.navigationEnum.raceselection)}),w(5,"Race"),g(),O(6,"hr"),m(7,"p",1),N("click",function(){return i.switchView(i.navigationEnum.animals)}),w(8,"Animals"),g(),O(9,"hr"),m(10,"p",1),N("click",function(){return i.switchView(i.navigationEnum.decks)}),w(11,"Decks"),g(),O(12,"hr"),m(13,"p",1),N("click",function(){return i.switchView(i.navigationEnum.shop)}),w(14,"Shop"),g(),O(15,"hr"),k(16,vG,4,1,"div",2),k(17,_G,4,1,"div",2),m(18,"p",1),N("click",function(){return i.switchView(i.navigationEnum.resources)}),w(19,"Resources"),g(),O(20,"hr"),m(21,"p",1),N("click",function(){return i.switchView(i.navigationEnum.settings)}),w(22,"Settings"),g(),O(23,"hr"),m(24,"p",1),N("click",function(){return i.switchView(i.navigationEnum.stats)}),w(25,"Stats"),g(),O(26,"hr"),m(27,"p",1),N("click",function(){return i.switchView(i.navigationEnum.faqs)}),w(28,"FAQs"),g()()),2&e&&(p(1),T("ngClass",to(11,oD,i.selectedNavigation===i.navigationEnum.barn,i.tutorial6Active)),p(3),T("ngClass",to(14,oD,i.selectedNavigation===i.navigationEnum.raceselection,i.tutorial3Active)),p(3),T("ngClass",i.selectedNavigation===i.navigationEnum.animals?"active":""),p(3),T("ngClass",i.selectedNavigation===i.navigationEnum.decks?"active":""),p(3),T("ngClass",i.selectedNavigation===i.navigationEnum.shop?"active":""),p(3),T("ngIf",i.incubatorAvailable),p(1),T("ngIf",i.talentsAvailable),p(1),T("ngClass",i.selectedNavigation===i.navigationEnum.resources?"active":""),p(3),T("ngClass",i.selectedNavigation===i.navigationEnum.settings?"active":""),p(3),T("ngClass",i.selectedNavigation===i.navigationEnum.stats?"active":""),p(3),T("ngClass",i.selectedNavigation===i.navigationEnum.faqs?"active":""))},directives:[ki,zt],styles:[".navigation[_ngcontent-%COMP%]{height:100%;border-left:1px solid rgba(0,0,0,.1);padding-left:1rem;padding-top:1rem}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}"]}),t})();function yG(t,n){if(1&t&&(m(0,"div",8)(1,"span"),w(2),g()()),2&t){const e=R();p(2),z("Tip: ",e.randomTip,"")}}let CG=(()=>{class t{constructor(e,i,r){this.globalService=e,this.gameLoopService=i,this.lookupService=r}ngOnInit(){var e=this;this.displayTip=!this.globalService.globalVar.settings.get("hideTips"),this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.randomTip=this.lookupService.getRandomTip(),this.totalTime=0,this.maxTipTime=60,this.gameLoopService.gameUpdateEvent.subscribe(function(){var i=_d(function*(r){e.displayTip=!e.globalService.globalVar.settings.get("hideTips"),e.totalTime+=r,e.totalTime>=e.maxTipTime&&(e.totalTime=0,e.randomTip=e.lookupService.getRandomTip())});return function(r){return i.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Tr),M(Cn))},t.\u0275cmp=De({type:t,selectors:[["app-footer"]],decls:15,vars:1,consts:[[1,"footerView"],[1,"gridContainer"],[1,"area1"],["class","area2 keyword",4,"ngIf"],[1,"area3","keyword","rightAlign"],["href","https://www.reddit.com/message/compose/?to=Jaghancement","rel","noopener noreferrer","target","_blank"],["href","mailto:CulturaIdle@gmail.com"],[1,"area4","keyword","rightAlign"],[1,"area2","keyword"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1)(2,"div",2),O(3,"span"),g(),k(4,yG,3,1,"div",3),m(5,"div",4)(6,"span")(7,"a",5),w(8,"Reddit"),g(),w(9," | "),m(10,"a",6),w(11,"Email"),g()()(),m(12,"div",7)(13,"span"),w(14,"Donate | Patreon"),g()()()()),2&e&&(p(4),T("ngIf",i.displayTip))},directives:[zt],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 1fr 20% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". area1 area2 area3 ." ". area1 area2 area4 ."}a[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.area1[_ngcontent-%COMP%]{grid-area:area1;justify-self:stretch}.area2[_ngcontent-%COMP%]{grid-area:area2;justify-self:stretch}.area3[_ngcontent-%COMP%]{grid-area:area3;justify-self:stretch}.area4[_ngcontent-%COMP%]{grid-area:area4;justify-self:stretch}.rightAlign[_ngcontent-%COMP%]{text-align:right}']}),t})();const wG=["tutorialContent"];function SG(t,n){1&t&&(m(0,"div",18),O(1,"app-barn-view"),g())}function TG(t,n){1&t&&(m(0,"div",19),O(1,"app-race-selection-view"),g())}function DG(t,n){1&t&&(m(0,"div",20),O(1,"app-animals-view"),g())}function MG(t,n){1&t&&(m(0,"div",21),O(1,"app-decks-view"),g())}function AG(t,n){1&t&&(m(0,"div",22),O(1,"app-shop-view"),g())}function RG(t,n){1&t&&(m(0,"div",23),O(1,"app-incubator-view"),g())}function EG(t,n){1&t&&(m(0,"div",24),O(1,"app-talents-view"),g())}function kG(t,n){1&t&&(m(0,"div",25),O(1,"app-faq-view"),g())}function NG(t,n){1&t&&(m(0,"div",26),O(1,"app-stats-view"),g())}function IG(t,n){1&t&&(m(0,"div",27),O(1,"app-resources-view"),g())}function PG(t,n){1&t&&(m(0,"div",28),O(1,"app-settings-view"),g())}function OG(t,n){if(1&t){const e=re();m(0,"div",29)(1,"div",30)(2,"h4",31),w(3,"Tutorial"),g(),m(4,"button",32),N("click",function(){return V(e),R().closeTutorialModal()}),w(5,"X"),g()(),O(6,"div",33),m(7,"div",34)(8,"span")(9,"button",35),N("click",function(){return V(e),R().skipTutorial()}),w(10,"Skip Tutorial"),g()(),m(11,"span")(12,"button",35),N("click",function(){return V(e),R().continueTutorial()}),w(13,"Continue"),g()()()()}if(2&t){const e=R();p(6),T("innerHTML",e.tutorialText,Wc)}}let xG=(()=>{class t{constructor(e,i,r,a,o,s,l){this.ref=e,this.globalService=i,this.modalService=r,this.componentCommunicationService=a,this.tutorialService=o,this.sanitizer=s,this.gameLoopService=l,this.navigationEnum=wn,this.activeView=wn.barn}ngOnInit(){var e=this;this.openTutorialModal(),this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=_d(function*(a){e.globalService.globalVar.showTutorial&&e.openTutorialModal()});return function(a){return r.apply(this,arguments)}}())}changeView(e){this.activeView=e}openTutorialModal(){if(!this.globalService.globalVar.tutorialCompleted){var e=this.tutorialService.getTutorialState(this.globalService.globalVar.currentTutorialId);this.activeView===e.associatedTab&&(this.tutorialText=this.sanitizer.sanitize(yt.HTML,this.sanitizer.bypassSecurityTrustHtml(e.tutorialText+"\n")),this.globalService.globalVar.showTutorial=!1,5===e.id&&(this.globalService.globalVar.currentTutorialId+=1),this.modalService.open(this.tutorialContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(i=>{this.closeTutorialModal()},i=>{this.closeTutorialModal()}))}}closeTutorialModal(){this.modalService.dismissAll()}skipTutorial(){this.tutorialService.skipTutorial(),this.closeTutorialModal()}continueTutorial(){this.closeTutorialModal()}}return t.\u0275fac=function(e){return new(e||t)(M(Gi),M(Ze),M(Is),M(Ts),M(OS),M(Jp),M(Tr))},t.\u0275cmp=De({type:t,selectors:[["app-main"]],viewQuery:function(e,i){if(1&e&&no(wG,7),2&e){let r;Ot(r=xt())&&(i.tutorialContent=r.first)}},decls:21,vars:11,consts:[[1,"gridContainer"],[1,"headerArea"],[1,"mainArea"],["id","BarnView","class","mainView",4,"ngIf"],["id","RaceSelectionView","class","mainView",4,"ngIf"],["id","AnimalsView","class","mainView",4,"ngIf"],["id","DecksView","class","mainView",4,"ngIf"],["id","ShopView","class","mainView",4,"ngIf"],["id","IncubatorView","class","mainView",4,"ngIf"],["id","TalentsView","class","mainView",4,"ngIf"],["id","FaqsView","class","mainView",4,"ngIf"],["id","StatsView","class","mainView",4,"ngIf"],["id","ResourcesView","class","mainView",4,"ngIf"],["id","SettingsView","class","mainView",4,"ngIf"],[1,"navArea"],[3,"viewChanged"],[1,"footerArea"],["tutorialContent",""],["id","BarnView",1,"mainView"],["id","RaceSelectionView",1,"mainView"],["id","AnimalsView",1,"mainView"],["id","DecksView",1,"mainView"],["id","ShopView",1,"mainView"],["id","IncubatorView",1,"mainView"],["id","TalentsView",1,"mainView"],["id","FaqsView",1,"mainView"],["id","StatsView",1,"mainView"],["id","ResourcesView",1,"mainView"],["id","SettingsView",1,"mainView"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"]],template:function(e,i){1&e&&(m(0,"div",0)(1,"div",1),O(2,"app-header"),g(),m(3,"div",2),k(4,SG,2,0,"div",3),k(5,TG,2,0,"div",4),k(6,DG,2,0,"div",5),k(7,MG,2,0,"div",6),k(8,AG,2,0,"div",7),k(9,RG,2,0,"div",8),k(10,EG,2,0,"div",9),k(11,kG,2,0,"div",10),k(12,NG,2,0,"div",11),k(13,IG,2,0,"div",12),k(14,PG,2,0,"div",13),g(),m(15,"div",14)(16,"app-navigation",15),N("viewChanged",function(a){return i.changeView(a)}),g()(),m(17,"div",16),O(18,"app-footer"),g()(),k(19,OG,14,1,"ng-template",null,17,Rt)),2&e&&(p(4),T("ngIf",i.activeView===i.navigationEnum.barn),p(1),T("ngIf",i.activeView===i.navigationEnum.raceselection),p(1),T("ngIf",i.activeView===i.navigationEnum.animals),p(1),T("ngIf",i.activeView===i.navigationEnum.decks),p(1),T("ngIf",i.activeView===i.navigationEnum.shop),p(1),T("ngIf",i.activeView===i.navigationEnum.incubator),p(1),T("ngIf",i.activeView===i.navigationEnum.talents),p(1),T("ngIf",i.activeView===i.navigationEnum.faqs),p(1),T("ngIf",i.activeView===i.navigationEnum.stats),p(1),T("ngIf",i.activeView===i.navigationEnum.resources),p(1),T("ngIf",i.activeView===i.navigationEnum.settings))},directives:[e4,zt,tH,HH,A8,F8,j8,sG,lG,cG,uG,gG,mG,bG,CG],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100vh;grid-template-columns:88% 12%;grid-template-rows:6% 88% 6%;justify-content:stretch;grid-template-areas:"header header" "main  nav" "footer footer"}.mainArea[_ngcontent-%COMP%]{grid-area:main;justify-self:stretch;background-color:var(--background-default);color:var(--foreground-default);overflow:auto}.navArea[_ngcontent-%COMP%]{grid-area:nav;justify-self:stretch;background-color:var(--background-secondary);color:var(--foreground-default)}.footerArea[_ngcontent-%COMP%]{grid-area:footer;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.headerArea[_ngcontent-%COMP%]{grid-area:header;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.mainView[_ngcontent-%COMP%]{height:100%}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.rightAlign[_ngcontent-%COMP%]{float:right}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.spaceBetween[_ngcontent-%COMP%]{justify-content:space-between!important}']}),t})(),FG=(()=>{class t{constructor(e,i,r,a,o,s){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.specializationService=a,this.themeService=o,this.raceLogicService=s,this.title="Cultura",this.newGame=!0,this.saveTime=0,this.saveFrequency=20,this.racingSaveFrequency=120}ngOnInit(){var e=this,i=localStorage.getItem("gameData");if(null!=i){this.newGame=!1;var r=LZString.decompressFromBase64(i),a=JSON.parse(r);this.globalService.globalVar=NS(Jn,a),this.loadStartup()}this.globalService.initializeGlobalVariables(),this.globalService.globalVar.tutorialCompleted=!0,this.globalService.devModeInitialize(60),this.gameLoopService.gameUpdateEvent.subscribe(function(){var c=_d(function*(u){e.gameCheckup(u),e.saveTime+=u;var d=e.saveFrequency;e.globalService.globalVar.userIsRacing&&(d=e.racingSaveFrequency),e.saveTime>=d&&(e.saveTime=0,e.saveGame())});return function(u){return c.apply(this,arguments)}}()),this.gameLoopService.Update()}gameCheckup(e){if(null!=this.globalService.globalVar.animals){var i=this.globalService.globalVar.animals.filter(a=>a.isAvailable&&null!=a.currentTraining);i.length>0&&i.forEach(a=>{var o;if(null!=a.currentTraining)for(a.currentTraining.timeTrained+=e,this.specializationService.handleAttractionRevenue(e,a);null!==a.currentTraining&&a.currentTraining.timeTrained>=a.currentTraining.timeToComplete;){var s=this.globalService.globalVar.barns.find(u=>u.barnNumber===a.associatedBarnNumber),l=0;null!=s&&s.barnUpgrades.specialization===gt.BreedingGrounds&&(l=s.barnUpgrades.specializationLevel),null!=s&&s.barnUpgrades.specialization===gt.ResearchCenter?this.specializationService.handleResearchCenterStatIncrease(a,s):a.increaseStatsFromCurrentTraining(),this.globalService.calculateAnimalRacingStats(a);var c=this.lookupService.getTrainingBreedGaugeIncrease(l);this.globalService.IncreaseAnimalBreedGauge(a,c),a.currentTraining.timeTrained-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining<=0&&(a.currentTraining=null),null!=a.queuedTraining&&(null!==a.currentTraining&&a.currentTraining.trainingTimeRemaining>0&&(a.queuedTraining.timeTrained+=null===(o=a.currentTraining)||void 0===o?void 0:o.timeTrained),a.currentTraining=a.queuedTraining,a.queuedTraining=null)}});var r=this.globalService.globalVar.incubator;null!=r&&null!=r.assignedAnimal&&null!=r.assignedTrait&&(r.timeTrained+=e,r.timeTrained>=r.timeToComplete&&(r.assignedAnimal.trait=r.assignedTrait,this.globalService.calculateAnimalRacingStats(r.assignedAnimal),r.assignedAnimal.canTrain=!0,r.timeTrained=0,r.assignedAnimal=null,r.assignedTrait=null)),this.handleFreeRaceTimer(e)}}handleFreeRaceTimer(e){if(this.globalService.globalVar.freeRaceTimePeriodCounter+=e,!this.globalService.globalVar.userIsRacing){var i=300,r=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==r&&(i=r.value);var a=3600,o=this.globalService.globalVar.modifiers.find(s=>"autoFreeRacesMaxIdleTimePeriodModifier"===s.text);for(void 0!==o&&(a=o.value);this.globalService.globalVar.freeRaceTimePeriodCounter>=i&&a>0;)this.globalService.globalVar.freeRaceTimePeriodCounter>a&&(this.globalService.globalVar.freeRaceTimePeriodCounter=a),this.globalService.globalVar.freeRaceTimePeriodCounter-=i,a-=i,this.globalService.globalVar.freeRaceCounter=0,this.globalService.globalVar.autoFreeRaceCounter=0,this.handleAutoFreeRace(e)}}handleAutoFreeRace(e){var i=this.lookupService.getResourceByName("Team Manager");if(null==i&&(i=0),0!==i&&this.globalService.globalVar.animalDecks.some(d=>d.autoRunFreeRace)){var r=this.globalService.globalVar.animalDecks.find(d=>d.autoRunFreeRace);if(null!=r)for(var a=i-this.globalService.globalVar.autoFreeRaceCounter,o=this.lookupService.getTotalFreeRacesPerPeriod(),s=0;s<a;s++){if(this.globalService.globalVar.freeRaceCounter>=o)return;this.globalService.globalVar.autoFreeRaceCounter+=1,this.globalService.globalVar.freeRaceCounter+=1;var l=this.globalService.generateFreeRace(),c=!0;l.raceLegs.forEach(d=>{(null==r?void 0:r.selectedAnimals.some(f=>f.raceCourseType===d.courseType))||(c=!1)}),c&&this.raceLogicService.runRace(l)}}}saveGame(){if("undefined"!=typeof Worker){const r=new Worker(le.tu(new URL(le.p+le.u(151),le.b)));r.onmessage=({data:a})=>{localStorage.setItem("gameData",a),r.terminate()},r.postMessage(this.globalService.globalVar)}else{var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);localStorage.setItem("gameData",i)}}loadStartup(){var e=this.globalService.globalVar.settings.get("theme");null!=e&&this.themeService.setActiveTheme(e)}}return t.\u0275fac=function(e){return new(e||t)(M(Ze),M(Tr),M(Cn),M(IS),M(Ql),M(PS))},t.\u0275cmp=De({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"grayTheme"]],template:function(e,i){1&e&&(m(0,"div",0),O(1,"app-main"),g(),O(2,"router-outlet"))},directives:[xG,Vg],styles:[""]}),t})(),VG=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bt({type:t,bootstrap:[FG]}),t.\u0275inj=ht({providers:[Ze,Ql],imports:[[Zx,DL,KU,Ni,Cw,fF]]}),t})();(function EP(){k1=!1})(),Xx().bootstrapModule(VG).catch(t=>console.error(t))},340:(Pe,et,le)=>{var ue=le(471),Yn=le(992),Te=le(657),Un=le(583),He=le(929),Gt=le(83),Ye=le(818);Ye.alea=ue,Ye.xor128=Yn,Ye.xorwow=Te,Ye.xorshift7=Un,Ye.xor4096=He,Ye.tychei=Gt,Pe.exports=Ye},471:function(Pe,et,le){var ue;!function(Yn,Te,Un){function He(x){var j=this,K=function ce(){var x=4022871197;return function(K){K=String(K);for(var B=0;B<K.length;B++){var $=.02519603282416938*(x+=K.charCodeAt(B));$-=x=$>>>0,x=($*=x)>>>0,x+=4294967296*($-=x)}return 2.3283064365386963e-10*(x>>>0)}}();j.next=function(){var B=2091639*j.s0+2.3283064365386963e-10*j.c;return j.s0=j.s1,j.s1=j.s2,j.s2=B-(j.c=0|B)},j.c=1,j.s0=K(" "),j.s1=K(" "),j.s2=K(" "),j.s0-=K(x),j.s0<0&&(j.s0+=1),j.s1-=K(x),j.s1<0&&(j.s1+=1),j.s2-=K(x),j.s2<0&&(j.s2+=1),K=null}function Gt(x,j){return j.c=x.c,j.s0=x.s0,j.s1=x.s1,j.s2=x.s2,j}function Ye(x,j){var K=new He(x),B=j&&j.state,$=K.next;return $.int32=function(){return 4294967296*K.next()|0},$.double=function(){return $()+11102230246251565e-32*(2097152*$()|0)},$.quick=$,B&&("object"==typeof B&&Gt(B,K),$.state=function(){return Gt(K,{})}),$}Te&&Te.exports?Te.exports=Ye:le.amdD&&le.amdO?void 0!==(ue=function(){return Ye}.call(et,le,et,Te))&&(Te.exports=ue):this.alea=Ye}(0,Pe=le.nmd(Pe))},83:function(Pe,et,le){var ue;!function(Yn,Te,Un){function He(ce){var x=this,j="";x.next=function(){var B=x.b,$=x.c,de=x.d,pe=x.a;return B=B<<25^B>>>7^$,$=$-de|0,de=de<<24^de>>>8^pe,pe=pe-B|0,x.b=B=B<<20^B>>>12^$,x.c=$=$-de|0,x.d=de<<16^$>>>16^pe,x.a=pe-B|0},x.a=0,x.b=0,x.c=-1640531527,x.d=1367130551,ce===Math.floor(ce)?(x.a=ce/4294967296|0,x.b=0|ce):j+=ce;for(var K=0;K<j.length+20;K++)x.b^=0|j.charCodeAt(K),x.next()}function Gt(ce,x){return x.a=ce.a,x.b=ce.b,x.c=ce.c,x.d=ce.d,x}function Ye(ce,x){var j=new He(ce),K=x&&x.state,B=function(){return(j.next()>>>0)/4294967296};return B.double=function(){do{var pe=((j.next()>>>11)+(j.next()>>>0)/4294967296)/(1<<21)}while(0===pe);return pe},B.int32=j.next,B.quick=B,K&&("object"==typeof K&&Gt(K,j),B.state=function(){return Gt(j,{})}),B}Te&&Te.exports?Te.exports=Ye:le.amdD&&le.amdO?void 0!==(ue=function(){return Ye}.call(et,le,et,Te))&&(Te.exports=ue):this.tychei=Ye}(0,Pe=le.nmd(Pe))},992:function(Pe,et,le){var ue;!function(Yn,Te,Un){function He(ce){var x=this,j="";x.x=0,x.y=0,x.z=0,x.w=0,x.next=function(){var B=x.x^x.x<<11;return x.x=x.y,x.y=x.z,x.z=x.w,x.w^=x.w>>>19^B^B>>>8},ce===(0|ce)?x.x=ce:j+=ce;for(var K=0;K<j.length+64;K++)x.x^=0|j.charCodeAt(K),x.next()}function Gt(ce,x){return x.x=ce.x,x.y=ce.y,x.z=ce.z,x.w=ce.w,x}function Ye(ce,x){var j=new He(ce),K=x&&x.state,B=function(){return(j.next()>>>0)/4294967296};return B.double=function(){do{var pe=((j.next()>>>11)+(j.next()>>>0)/4294967296)/(1<<21)}while(0===pe);return pe},B.int32=j.next,B.quick=B,K&&("object"==typeof K&&Gt(K,j),B.state=function(){return Gt(j,{})}),B}Te&&Te.exports?Te.exports=Ye:le.amdD&&le.amdO?void 0!==(ue=function(){return Ye}.call(et,le,et,Te))&&(Te.exports=ue):this.xor128=Ye}(0,Pe=le.nmd(Pe))},929:function(Pe,et,le){var ue;!function(Yn,Te,Un){function He(ce){var x=this;x.next=function(){var de,pe,K=x.w,B=x.X,$=x.i;return x.w=K=K+1640531527|0,pe=B[$+34&127],de=B[$=$+1&127],pe^=pe<<13,de^=de<<17,pe=B[$]=(pe^=pe>>>15)^(de^=de>>>12),x.i=$,pe+(K^K>>>16)|0},function j(K,B){var $,de,pe,Xn,ei,fi=[],Ha=128;for(B===(0|B)?(de=B,B=null):(B+="\0",de=0,Ha=Math.max(Ha,B.length)),pe=0,Xn=-32;Xn<Ha;++Xn)B&&(de^=B.charCodeAt((Xn+32)%B.length)),0===Xn&&(ei=de),de^=de<<10,de^=de>>>15,de^=de<<4,de^=de>>>13,Xn>=0&&(pe=0==($=fi[127&Xn]^=de+(ei=ei+1640531527|0))?pe+1:0);for(pe>=128&&(fi[127&(B&&B.length||0)]=-1),pe=127,Xn=512;Xn>0;--Xn)de=fi[pe+34&127],$=fi[pe=pe+1&127],de^=de<<13,$^=$<<17,fi[pe]=(de^=de>>>15)^($^=$>>>12);K.w=ei,K.X=fi,K.i=pe}(x,ce)}function Gt(ce,x){return x.i=ce.i,x.w=ce.w,x.X=ce.X.slice(),x}function Ye(ce,x){null==ce&&(ce=+new Date);var j=new He(ce),K=x&&x.state,B=function(){return(j.next()>>>0)/4294967296};return B.double=function(){do{var pe=((j.next()>>>11)+(j.next()>>>0)/4294967296)/(1<<21)}while(0===pe);return pe},B.int32=j.next,B.quick=B,K&&(K.X&&Gt(K,j),B.state=function(){return Gt(j,{})}),B}Te&&Te.exports?Te.exports=Ye:le.amdD&&le.amdO?void 0!==(ue=function(){return Ye}.call(et,le,et,Te))&&(Te.exports=ue):this.xor4096=Ye}(0,Pe=le.nmd(Pe))},583:function(Pe,et,le){var ue;!function(Yn,Te,Un){function He(ce){var x=this;x.next=function(){var $,de,K=x.x,B=x.i;return $=K[B],de=($^=$>>>7)^$<<24,de^=($=K[B+1&7])^$>>>10,de^=($=K[B+3&7])^$>>>3,de^=($=K[B+4&7])^$<<7,$=K[B+7&7],K[B]=de^=($^=$<<13)^$<<9,x.i=B+1&7,de},function j(K,B){var $,pe=[];if(B===(0|B))pe[0]=B;else for(B=""+B,$=0;$<B.length;++$)pe[7&$]=pe[7&$]<<15^B.charCodeAt($)+pe[$+1&7]<<13;for(;pe.length<8;)pe.push(0);for($=0;$<8&&0===pe[$];++$);for(8==$&&(pe[7]=-1),K.x=pe,K.i=0,$=256;$>0;--$)K.next()}(x,ce)}function Gt(ce,x){return x.x=ce.x.slice(),x.i=ce.i,x}function Ye(ce,x){null==ce&&(ce=+new Date);var j=new He(ce),K=x&&x.state,B=function(){return(j.next()>>>0)/4294967296};return B.double=function(){do{var pe=((j.next()>>>11)+(j.next()>>>0)/4294967296)/(1<<21)}while(0===pe);return pe},B.int32=j.next,B.quick=B,K&&(K.x&&Gt(K,j),B.state=function(){return Gt(j,{})}),B}Te&&Te.exports?Te.exports=Ye:le.amdD&&le.amdO?void 0!==(ue=function(){return Ye}.call(et,le,et,Te))&&(Te.exports=ue):this.xorshift7=Ye}(0,Pe=le.nmd(Pe))},657:function(Pe,et,le){var ue;!function(Yn,Te,Un){function He(ce){var x=this,j="";x.next=function(){var B=x.x^x.x>>>2;return x.x=x.y,x.y=x.z,x.z=x.w,x.w=x.v,(x.d=x.d+362437|0)+(x.v=x.v^x.v<<4^B^B<<1)|0},x.x=0,x.y=0,x.z=0,x.w=0,x.v=0,ce===(0|ce)?x.x=ce:j+=ce;for(var K=0;K<j.length+64;K++)x.x^=0|j.charCodeAt(K),K==j.length&&(x.d=x.x<<10^x.x>>>4),x.next()}function Gt(ce,x){return x.x=ce.x,x.y=ce.y,x.z=ce.z,x.w=ce.w,x.v=ce.v,x.d=ce.d,x}function Ye(ce,x){var j=new He(ce),K=x&&x.state,B=function(){return(j.next()>>>0)/4294967296};return B.double=function(){do{var pe=((j.next()>>>11)+(j.next()>>>0)/4294967296)/(1<<21)}while(0===pe);return pe},B.int32=j.next,B.quick=B,K&&("object"==typeof K&&Gt(K,j),B.state=function(){return Gt(j,{})}),B}Te&&Te.exports?Te.exports=Ye:le.amdD&&le.amdO?void 0!==(ue=function(){return Ye}.call(et,le,et,Te))&&(Te.exports=ue):this.xorwow=Ye}(0,Pe=le.nmd(Pe))},818:function(Pe,et,le){var ue;!function(Yn,Te,Un){var $,He=256,x=Un.pow(He,6),j=Un.pow(2,52),K=2*j,B=255;function de(lt,ft,ti){var Kt=[],qt=fi(ei((ft=1==ft?{entropy:!0}:ft||{}).entropy?[lt,Kr(Te)]:null==lt?function Ha(){try{var lt;return $&&(lt=$.randomBytes)?lt=lt(He):(lt=new Uint8Array(He),(Yn.crypto||Yn.msCrypto).getRandomValues(lt)),Kr(lt)}catch(Kt){var ft=Yn.navigator,ti=ft&&ft.plugins;return[+new Date,Yn,ti,Yn.screen,Kr(Te)]}}():lt,3),Kt),Di=new pe(Kt),hi=function(){for(var Mi=Di.g(6),Ii=x,Dn=0;Mi<j;)Mi=(Mi+Dn)*He,Ii*=He,Dn=Di.g(1);for(;Mi>=K;)Mi/=2,Ii/=2,Dn>>>=1;return(Mi+Dn)/Ii};return hi.int32=function(){return 0|Di.g(4)},hi.quick=function(){return Di.g(4)/4294967296},hi.double=hi,fi(Kr(Di.S),Te),(ft.pass||ti||function(Mi,Ii,Dn,ea){return ea&&(ea.S&&Xn(ea,Di),Mi.state=function(){return Xn(Di,{})}),Dn?(Un.random=Mi,Ii):Mi})(hi,qt,"global"in ft?ft.global:this==Un,ft.state)}function pe(lt){var ft,ti=lt.length,Kt=this,qt=0,Di=Kt.i=Kt.j=0,hi=Kt.S=[];for(ti||(lt=[ti++]);qt<He;)hi[qt]=qt++;for(qt=0;qt<He;qt++)hi[qt]=hi[Di=B&Di+lt[qt%ti]+(ft=hi[qt])],hi[Di]=ft;(Kt.g=function(Mi){for(var Ii,Dn=0,ea=Kt.i,Ga=Kt.j,Xe=Kt.S;Mi--;)Ii=Xe[ea=B&ea+1],Dn=Dn*He+Xe[B&(Xe[ea]=Xe[Ga=B&Ga+Ii])+(Xe[Ga]=Ii)];return Kt.i=ea,Kt.j=Ga,Dn})(He)}function Xn(lt,ft){return ft.i=lt.i,ft.j=lt.j,ft.S=lt.S.slice(),ft}function ei(lt,ft){var qt,ti=[],Kt=typeof lt;if(ft&&"object"==Kt)for(qt in lt)try{ti.push(ei(lt[qt],ft-1))}catch(Di){}return ti.length?ti:"string"==Kt?lt:lt+"\0"}function fi(lt,ft){for(var Kt,ti=lt+"",qt=0;qt<ti.length;)ft[B&qt]=B&(Kt^=19*ft[B&qt])+ti.charCodeAt(qt++);return Kr(ft)}function Kr(lt){return String.fromCharCode.apply(0,lt)}if(fi(Un.random(),Te),Pe.exports){Pe.exports=de;try{$=le(42)}catch(lt){}}else void 0!==(ue=function(){return de}.call(et,le,et,Pe))&&(Pe.exports=ue)}("undefined"!=typeof self?self:this,[],Math)},42:()=>{}},Pe=>{Pe(Pe.s=487)}]);