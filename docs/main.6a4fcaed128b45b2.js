var r$=Object.defineProperty,C2=Object.getOwnPropertySymbols,a$=Object.prototype.hasOwnProperty,o$=Object.prototype.propertyIsEnumerable,S2=(Ce,De,q)=>De in Ce?r$(Ce,De,{enumerable:!0,configurable:!0,writable:!0,value:q}):Ce[De]=q,Nr=(Ce,De)=>{for(var q in De||(De={}))a$.call(De,q)&&S2(Ce,q,De[q]);if(C2)for(var q of C2(De))o$.call(De,q)&&S2(Ce,q,De[q]);return Ce};(self.webpackChunkCultura=self.webpackChunkCultura||[]).push([[179],{2179:(Ce,De,q)=>{"use strict";function W(t){return"function"==typeof t}function U(t){const e=t(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const ee=U(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function re(t,i){if(t){const e=t.indexOf(i);0<=e&&t.splice(e,1)}}class pe{constructor(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let i;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(W(n))try{n()}catch(a){i=a instanceof ee?a.errors:[a]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const a of r)try{E(a)}catch(o){i=null!=i?i:[],o instanceof ee?i=[...i,...o.errors]:i.push(o)}}if(i)throw new ee(i)}}add(i){var e;if(i&&i!==this)if(this.closed)E(i);else{if(i instanceof pe){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(i)}}_hasParent(i){const{_parentage:e}=this;return e===i||Array.isArray(e)&&e.includes(i)}_addParent(i){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i}_removeParent(i){const{_parentage:e}=this;e===i?this._parentage=null:Array.isArray(e)&&re(e,i)}remove(i){const{_teardowns:e}=this;e&&re(e,i),i instanceof pe&&i._removeParent(this)}}pe.EMPTY=(()=>{const t=new pe;return t.closed=!0,t})();const J=pe.EMPTY;function ne(t){return t instanceof pe||t&&"closed"in t&&W(t.remove)&&W(t.add)&&W(t.unsubscribe)}function E(t){W(t)?t():t.unsubscribe()}const M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},V={setTimeout(...t){const{delegate:i}=V;return((null==i?void 0:i.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:i}=V;return((null==i?void 0:i.clearTimeout)||clearTimeout)(t)},delegate:void 0};function P(t){V.setTimeout(()=>{const{onUnhandledError:i}=M;if(!i)throw t;i(t)})}function N(){}const k=ae("C",void 0,void 0);function ae(t,i,e){return{kind:t,value:i,error:e}}let ie=null;function L(t){if(M.useDeprecatedSynchronousErrorHandling){const i=!ie;if(i&&(ie={errorThrown:!1,error:null}),t(),i){const{errorThrown:e,error:n}=ie;if(ie=null,e)throw n}}else t()}class ue extends pe{constructor(i){super(),this.isStopped=!1,i?(this.destination=i,ne(i)&&i.add(this)):this.destination=me}static create(i,e,n){return new Te(i,e,n)}next(i){this.isStopped?Ue(function H(t){return ae("N",t,void 0)}(i),this):this._next(i)}error(i){this.isStopped?Ue(function F(t){return ae("E",void 0,t)}(i),this):(this.isStopped=!0,this._error(i))}complete(){this.isStopped?Ue(k,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(i){this.destination.next(i)}_error(i){try{this.destination.error(i)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const te=Function.prototype.bind;function oe(t,i){return te.call(t,i)}class ce{constructor(i){this.partialObserver=i}next(i){const{partialObserver:e}=this;if(e.next)try{e.next(i)}catch(n){we(n)}}error(i){const{partialObserver:e}=this;if(e.error)try{e.error(i)}catch(n){we(n)}else we(i)}complete(){const{partialObserver:i}=this;if(i.complete)try{i.complete()}catch(e){we(e)}}}class Te extends ue{constructor(i,e,n){let r;if(super(),W(i)||!i)r={next:null!=i?i:void 0,error:null!=e?e:void 0,complete:null!=n?n:void 0};else{let a;this&&M.useDeprecatedNextContext?(a=Object.create(i),a.unsubscribe=()=>this.unsubscribe(),r={next:i.next&&oe(i.next,a),error:i.error&&oe(i.error,a),complete:i.complete&&oe(i.complete,a)}):r=i}this.destination=new ce(r)}}function we(t){M.useDeprecatedSynchronousErrorHandling?function $(t){M.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=t)}(t):P(t)}function Ue(t,i){const{onStoppedNotification:e}=M;e&&V.setTimeout(()=>e(t,i))}const me={closed:!0,next:N,error:function Ie(t){throw t},complete:N},Me="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fe(t){return t}let Be=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(e,n,r){const a=function Se(t){return t&&t instanceof ue||function Zt(t){return t&&W(t.next)&&W(t.error)&&W(t.complete)}(t)&&ne(t)}(e)?e:new Te(e,n,r);return L(()=>{const{operator:o,source:s}=this;a.add(o?o.call(a,s):s?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=Lt(n))((r,a)=>{const o=new Te({next:s=>{try{e(s)}catch(l){a(l),o.unsubscribe()}},error:a,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[Me](){return this}pipe(...e){return function st(t){return 0===t.length?Fe:1===t.length?t[0]:function(e){return t.reduce((n,r)=>r(n),e)}}(e)(this)}toPromise(e){return new(e=Lt(e))((n,r)=>{let a;this.subscribe(o=>a=o,o=>r(o),()=>n(a))})}}return t.create=i=>new t(i),t})();function Lt(t){var i;return null!==(i=null!=t?t:M.Promise)&&void 0!==i?i:Promise}const Pe=U(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let _e=(()=>{class t extends Be{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new xe(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new Pe}next(e){L(()=>{if(this._throwIfClosed(),!this.isStopped){const n=this.observers.slice();for(const r of n)r.next(e)}})}error(e){L(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){L(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:a}=this;return n||r?J:(a.push(e),new pe(()=>re(a,e)))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:a}=this;n?e.error(r):a&&e.complete()}asObservable(){const e=new Be;return e.source=this,e}}return t.create=(i,e)=>new xe(i,e),t})();class xe extends _e{constructor(i,e){super(),this.destination=i,this.source=e}next(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,i)}error(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,i)}complete(){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.complete)||void 0===e||e.call(i)}_subscribe(i){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(i))&&void 0!==n?n:J}}function Tn(t){return W(null==t?void 0:t.lift)}function yt(t){return i=>{if(Tn(i))return i.lift(function(e){try{return t(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function zt(t,i,e,n,r){return new $t(t,i,e,n,r)}class $t extends ue{constructor(i,e,n,r,a,o){super(i),this.onFinalize=a,this.shouldUnsubscribe=o,this._next=e?function(s){try{e(s)}catch(l){i.error(l)}}:super._next,this._error=r?function(s){try{r(s)}catch(l){i.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(s){i.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}}}function Et(t,i){return yt((e,n)=>{let r=0;e.subscribe(zt(n,a=>{n.next(t.call(i,a,r++))}))})}function Ge(t,i,e,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,i,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(i,e,a):o(i,e))||a);return r>3&&a&&Object.defineProperty(i,e,a),a}function Qe(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)}function fr(t){return this instanceof fr?(this.v=t,this):new fr(t)}function Ho(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(t,i||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(m){n[m]&&(r[m]=function(v){return new Promise(function(_,y){a.push([m,v,_,y])>1||s(m,v)})})}function s(m,v){try{!function l(m){m.value instanceof fr?Promise.resolve(m.value.v).then(c,u):d(a[0][2],m)}(n[m](v))}catch(_){d(a[0][3],_)}}function c(m){s("next",m)}function u(m){s("throw",m)}function d(m,v){m(v),a.shift(),a.length&&s(a[0][0],a[0][1])}}function Hu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=function dr(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(a){e[a]=t[a]&&function(o){return new Promise(function(s,l){!function r(a,o,s,l){Promise.resolve(l).then(function(c){a({value:c,done:s})},o)}(s,l,(o=t[a](o)).done,o.value)})}}}const ql=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Gu(t){return W(null==t?void 0:t.then)}function Wl(t){return W(t[Me])}function ju(t){return Symbol.asyncIterator&&W(null==t?void 0:t[Symbol.asyncIterator])}function Xl(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Yl=function Of(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function zu(t){return W(null==t?void 0:t[Yl])}function $u(t){return Ho(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:n,done:r}=yield fr(e.read());if(r)return yield fr(void 0);yield yield fr(n)}}finally{e.releaseLock()}})}function qu(t){return W(null==t?void 0:t.getReader)}function wi(t){if(t instanceof Be)return t;if(null!=t){if(Wl(t))return function Nf(t){return new Be(i=>{const e=t[Me]();if(W(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ql(t))return function Vf(t){return new Be(i=>{for(let e=0;e<t.length&&!i.closed;e++)i.next(t[e]);i.complete()})}(t);if(Gu(t))return function Wu(t){return new Be(i=>{t.then(e=>{i.closed||(i.next(e),i.complete())},e=>i.error(e)).then(null,P)})}(t);if(ju(t))return Ql(t);if(zu(t))return function Ff(t){return new Be(i=>{for(const e of t)if(i.next(e),i.closed)return;i.complete()})}(t);if(qu(t))return function Ki(t){return Ql($u(t))}(t)}throw Xl(t)}function Ql(t){return new Be(i=>{(function Ca(t,i){var e,n,r,a;return function Cs(t,i,e,n){return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):function r(a){return a instanceof e?a:new e(function(o){o(a)})}(u.value).then(s,l)}c((n=n.apply(t,i||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Hu(t);!(n=yield e.next()).done;)if(i.next(n.value),i.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}i.complete()})})(t,i).catch(e=>i.error(e))})}function Fr(t,i,e,n=0,r=!1){const a=i.schedule(function(){e(),r?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(a),!r)return a}function si(t,i,e=1/0){return W(i)?si((n,r)=>Et((a,o)=>i(n,a,r,o))(wi(t(n,r))),e):("number"==typeof i&&(e=i),yt((n,r)=>function Bf(t,i,e,n,r,a,o,s){const l=[];let c=0,u=0,d=!1;const m=()=>{d&&!l.length&&!c&&i.complete()},v=y=>c<n?_(y):l.push(y),_=y=>{a&&i.next(y),c++;let S=!1;wi(e(y,u++)).subscribe(zt(i,T=>{null==r||r(T),a?v(T):i.next(T)},()=>{S=!0},void 0,()=>{if(S)try{for(c--;l.length&&c<n;){const T=l.shift();o?Fr(i,o,()=>_(T)):_(T)}m()}catch(T){i.error(T)}}))};return t.subscribe(zt(i,v,()=>{d=!0,m()})),()=>{null==s||s()}}(n,r,t,e)))}function Kl(t=1/0){return si(Fe,t)}const Jr=new Be(t=>t.complete());function q0(t){return t&&W(t.schedule)}function Lf(t){return t[t.length-1]}function Xu(t){return W(Lf(t))?t.pop():void 0}function Zl(t){return q0(Lf(t))?t.pop():void 0}function W0(t,i=0){return yt((e,n)=>{e.subscribe(zt(n,r=>Fr(n,t,()=>n.next(r),i),()=>Fr(n,t,()=>n.complete(),i),r=>Fr(n,t,()=>n.error(r),i)))})}function X0(t,i=0){return yt((e,n)=>{n.add(t.schedule(()=>e.subscribe(n),i))})}function Y0(t,i){if(!t)throw new Error("Iterable cannot be null");return new Be(e=>{Fr(e,i,()=>{const n=t[Symbol.asyncIterator]();Fr(e,i,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Pi(t,i){return i?function P2(t,i){if(null!=t){if(Wl(t))return function R2(t,i){return wi(t).pipe(X0(i),W0(i))}(t,i);if(ql(t))return function M2(t,i){return new Be(e=>{let n=0;return i.schedule(function(){n===t.length?e.complete():(e.next(t[n++]),e.closed||this.schedule())})})}(t,i);if(Gu(t))return function x2(t,i){return wi(t).pipe(X0(i),W0(i))}(t,i);if(ju(t))return Y0(t,i);if(zu(t))return function k2(t,i){return new Be(e=>{let n;return Fr(e,i,()=>{n=t[Yl](),Fr(e,i,()=>{let r,a;try{({value:r,done:a}=n.next())}catch(o){return void e.error(o)}a?e.complete():e.next(r)},0,!0)}),()=>W(null==n?void 0:n.return)&&n.return()})}(t,i);if(qu(t))return function A2(t,i){return Y0($u(t),i)}(t,i)}throw Xl(t)}(t,i):wi(t)}function Q0(...t){const i=Zl(t),e=function D2(t,i){return"number"==typeof Lf(t)?t.pop():i}(t,1/0),n=t;return n.length?1===n.length?wi(n[0]):Kl(e)(Pi(n,i)):Jr}function Ei(t){return t<=0?()=>Jr:yt((i,e)=>{let n=0;i.subscribe(zt(e,r=>{++n<=t&&(e.next(r),t<=n&&e.complete())}))})}function K0(t={}){const{connector:i=(()=>new _e),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=t;return a=>{let o=null,s=null,l=null,c=0,u=!1,d=!1;const m=()=>{null==s||s.unsubscribe(),s=null},v=()=>{m(),o=l=null,u=d=!1},_=()=>{const y=o;v(),null==y||y.unsubscribe()};return yt((y,S)=>{c++,!d&&!u&&m();const T=l=null!=l?l:i();S.add(()=>{c--,0===c&&!d&&!u&&(s=Uf(_,r))}),T.subscribe(S),o||(o=new Te({next:C=>T.next(C),error:C=>{d=!0,m(),s=Uf(v,e,C),T.error(C)},complete:()=>{u=!0,m(),s=Uf(v,n),T.complete()}}),Pi(y).subscribe(o))})(a)}}function Uf(t,i,...e){return!0===i?(t(),null):!1===i?null:i(...e).pipe(Ei(1)).subscribe(()=>t())}function Dn(t){for(let i in t)if(t[i]===Dn)return i;throw Error("Could not find renamed property on target object.")}function Hf(t,i){for(const e in i)i.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=i[e])}function yn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(yn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const i=t.toString();if(null==i)return""+i;const e=i.indexOf("\n");return-1===e?i:i.substring(0,e)}function Gf(t,i){return null==t||""===t?null===i?"":i:null==i||""===i?t:t+" "+i}const E2=Dn({__forward_ref__:Dn});function cn(t){return t.__forward_ref__=cn,t.toString=function(){return yn(this())},t}function Ut(t){return Z0(t)?t():t}function Z0(t){return"function"==typeof t&&t.hasOwnProperty(E2)&&t.__forward_ref__===cn}class sn extends Error{constructor(i,e){super(function jf(t,i){return`NG0${Math.abs(t)}${i?": "+i:""}`}(i,e)),this.code=i}}function At(t){return"string"==typeof t?t:null==t?"":String(t)}function Zi(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():At(t)}function Yu(t,i){const e=i?` in ${i}`:"";throw new sn(-201,`No provider for ${Zi(t)} found${e}`)}function Fn(t,i,e,n){throw new Error(`ASSERTION ERROR: ${t}`+(null==n?"":` [Expected=> ${e} ${n} ${i} <=Actual]`))}function tt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function mn(t){return{providers:t.providers||[],imports:t.imports||[]}}function zf(t){return J0(t,Qu)||J0(t,tb)}function J0(t,i){return t.hasOwnProperty(i)?t[i]:null}function eb(t){return t&&(t.hasOwnProperty($f)||t.hasOwnProperty(L2))?t[$f]:null}const Qu=Dn({\u0275prov:Dn}),$f=Dn({\u0275inj:Dn}),tb=Dn({ngInjectableDef:Dn}),L2=Dn({ngInjectorDef:Dn});var It=(()=>((It=It||{})[It.Default=0]="Default",It[It.Host=1]="Host",It[It.Self=2]="Self",It[It.SkipSelf=4]="SkipSelf",It[It.Optional=8]="Optional",It))();let qf;function mo(t){const i=qf;return qf=t,i}function nb(t,i,e){const n=zf(t);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&It.Optional?null:void 0!==i?i:void Yu(yn(t),"Injector")}function vo(t){return{toString:t}.toString()}var ea=(()=>((ea=ea||{})[ea.OnPush=0]="OnPush",ea[ea.Default=1]="Default",ea))(),Sa=(()=>{return(t=Sa||(Sa={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Sa;var t})();const H2="undefined"!=typeof globalThis&&globalThis,G2="undefined"!=typeof window&&window,j2="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Sn=H2||"undefined"!=typeof global&&global||G2||j2,xs={},Rn=[],Ku=Dn({\u0275cmp:Dn}),Wf=Dn({\u0275dir:Dn}),Xf=Dn({\u0275pipe:Dn}),ib=Dn({\u0275mod:Dn}),qa=Dn({\u0275fac:Dn}),Jl=Dn({__NG_ELEMENT_ID__:Dn});let z2=0;function dt(t){return vo(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ea.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Rn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Sa.Emulated,id:"c",styles:t.styles||Rn,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,a=t.features,o=t.pipes;return n.id+=z2++,n.inputs=sb(t.inputs,e),n.outputs=sb(t.outputs),a&&a.forEach(s=>s(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(rb):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(ab):null,n})}function rb(t){return Gi(t)||function bo(t){return t[Wf]||null}(t)}function ab(t){return function Go(t){return t[Xf]||null}(t)}const ob={};function wn(t){return vo(()=>{const i={type:t.type,bootstrap:t.bootstrap||Rn,declarations:t.declarations||Rn,imports:t.imports||Rn,exports:t.exports||Rn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(ob[t.id]=t.type),i})}function sb(t,i){if(null==t)return xs;const e={};for(const n in t)if(t.hasOwnProperty(n)){let r=t[n],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=n,i&&(i[r]=a)}return e}const je=dt;function pr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Gi(t){return t[Ku]||null}function Br(t,i){const e=t[ib]||null;if(!e&&!0===i)throw new Error(`Type ${yn(t)} does not have '\u0275mod' property.`);return e}function Ta(t){return Array.isArray(t)&&"object"==typeof t[1]}function na(t){return Array.isArray(t)&&!0===t[1]}function Kf(t){return 0!=(8&t.flags)}function td(t){return 2==(2&t.flags)}function nd(t){return 1==(1&t.flags)}function ia(t){return null!==t.template}function Q2(t){return 0!=(512&t[2])}function qo(t,i){return t.hasOwnProperty(qa)?t[qa]:null}class J2{constructor(i,e,n){this.previousValue=i,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Oi(){return cb}function cb(t){return t.type.prototype.ngOnChanges&&(t.setInput=tx),ex}function ex(){const t=db(this),i=null==t?void 0:t.current;if(i){const e=t.previous;if(e===xs)t.previous=i;else for(let n in i)e[n]=i[n];t.current=null,this.ngOnChanges(i)}}function tx(t,i,e,n){const r=db(t)||function nx(t,i){return t[ub]=i}(t,{previous:xs,current:null}),a=r.current||(r.current={}),o=r.previous,s=this.declaredInputs[e],l=o[s];a[s]=new J2(l&&l.currentValue,i,o===xs),t[n]=i}Oi.ngInherit=!0;const ub="__ngSimpleChanges__";function db(t){return t[ub]||null}let np;function ip(){return void 0!==np?np:"undefined"!=typeof document?document:void 0}function ti(t){return!!t.listen}const hb={createRenderer:(t,i)=>ip()};function gi(t){for(;Array.isArray(t);)t=t[0];return t}function id(t,i){return gi(i[t])}function Hr(t,i){return gi(i[t.index])}function rp(t,i){return t.data[i]}function Es(t,i){return t[i]}function Sr(t,i){const e=i[t];return Ta(e)?e:e[0]}function fb(t){return 4==(4&t[2])}function ap(t){return 128==(128&t[2])}function _o(t,i){return null==i?null:t[i]}function pb(t){t[18]=0}function op(t,i){t[5]+=i;let e=t,n=t[3];for(;null!==n&&(1===i&&1===e[5]||-1===i&&0===e[5]);)n[5]+=i,e=n,n=n[3]}const Tt={lFrame:Cb(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function gb(){return Tt.bindingsEnabled}function Re(){return Tt.lFrame.lView}function ln(){return Tt.lFrame.tView}function B(t){return Tt.lFrame.contextLView=t,t[8]}function Ci(){let t=mb();for(;null!==t&&64===t.type;)t=t.parent;return t}function mb(){return Tt.lFrame.currentTNode}function ic(){const t=Tt.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}function Da(t,i){const e=Tt.lFrame;e.currentTNode=t,e.isParent=i}function sp(){return Tt.lFrame.isParent}function lp(){Tt.lFrame.isParent=!1}function rd(){return Tt.isInCheckNoChangesMode}function ad(t){Tt.isInCheckNoChangesMode=t}function Ji(){const t=Tt.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}function Wa(){return Tt.lFrame.bindingIndex}function Is(){return Tt.lFrame.bindingIndex++}function Xa(t){const i=Tt.lFrame,e=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,e}function bb(t){Tt.lFrame.inI18n=t}function _x(t,i){const e=Tt.lFrame;e.bindingIndex=e.bindingRootIndex=t,cp(i)}function cp(t){Tt.lFrame.currentDirectiveIndex=t}function _b(){return Tt.lFrame.currentQueryIndex}function dp(t){Tt.lFrame.currentQueryIndex=t}function wx(t){const i=t[1];return 2===i.type?i.declTNode:1===i.type?t[6]:null}function yb(t,i,e){if(e&It.SkipSelf){let r=i,a=t;for(;!(r=r.parent,null!==r||e&It.Host||(r=wx(a),null===r||(a=a[15],10&r.type))););if(null===r)return!1;i=r,t=a}const n=Tt.lFrame=wb();return n.currentTNode=i,n.lView=t,!0}function od(t){const i=wb(),e=t[1];Tt.lFrame=i,i.currentTNode=e.firstChild,i.lView=t,i.tView=e,i.contextLView=t,i.bindingIndex=e.bindingStartIndex,i.inI18n=!1}function wb(){const t=Tt.lFrame,i=null===t?null:t.child;return null===i?Cb(t):i}function Cb(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function Sb(){const t=Tt.lFrame;return Tt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Tb=Sb;function sd(){const t=Sb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function er(){return Tt.lFrame.selectedIndex}function yo(t){Tt.lFrame.selectedIndex=t}function ni(){const t=Tt.lFrame;return rp(t.tView,t.selectedIndex)}function ld(t,i){for(let e=i.directiveStart,n=i.directiveEnd;e<n;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=a;o&&(t.contentHooks||(t.contentHooks=[])).push(-e,o),s&&((t.contentHooks||(t.contentHooks=[])).push(e,s),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,s)),l&&(t.viewHooks||(t.viewHooks=[])).push(-e,l),c&&((t.viewHooks||(t.viewHooks=[])).push(e,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,c)),null!=u&&(t.destroyHooks||(t.destroyHooks=[])).push(e,u)}}function cd(t,i,e){Db(t,i,3,e)}function ud(t,i,e,n){(3&t[2])===e&&Db(t,i,e,n)}function hp(t,i){let e=t[2];(3&e)===i&&(e&=2047,e+=1,t[2]=e)}function Db(t,i,e,n){const a=null!=n?n:-1,o=i.length-1;let s=0;for(let l=void 0!==n?65535&t[18]:0;l<o;l++)if("number"==typeof i[l+1]){if(s=i[l],null!=n&&s>=n)break}else i[l]<0&&(t[18]+=65536),(s<a||-1==a)&&(Ax(t,e,i,l),t[18]=(4294901760&t[18])+l+2),l++}function Ax(t,i,e,n){const r=e[n]<0,a=e[n+1],s=t[r?-e[n]:e[n]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===i){t[2]+=2048;try{a.call(s)}finally{}}}else try{a.call(s)}finally{}}class rc{constructor(i,e,n){this.factory=i,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function dd(t,i,e){const n=ti(t);let r=0;for(;r<e.length;){const a=e[r];if("number"==typeof a){if(0!==a)break;r++;const o=e[r++],s=e[r++],l=e[r++];n?t.setAttribute(i,s,l,o):i.setAttributeNS(o,s,l)}else{const o=a,s=e[++r];pp(o)?n&&t.setProperty(i,o,s):n?t.setAttribute(i,o,s):i.setAttribute(o,s),r++}}return r}function Rb(t){return 3===t||4===t||6===t}function pp(t){return 64===t.charCodeAt(0)}function hd(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let e=-1;for(let n=0;n<i.length;n++){const r=i[n];"number"==typeof r?e=r:0===e||xb(t,e,r,null,-1===e||2===e?i[++n]:null)}}return t}function xb(t,i,e,n,r){let a=0,o=t.length;if(-1===i)o=-1;else for(;a<t.length;){const s=t[a++];if("number"==typeof s){if(s===i){o=-1;break}if(s>i){o=a-1;break}}}for(;a<t.length;){const s=t[a];if("number"==typeof s)break;if(s===e){if(null===n)return void(null!==r&&(t[a+1]=r));if(n===t[a+1])return void(t[a+2]=r)}a++,null!==n&&a++,null!==r&&a++}-1!==o&&(t.splice(o,0,i),a=o+1),t.splice(a++,0,e),null!==n&&t.splice(a++,0,n),null!==r&&t.splice(a++,0,r)}function Mb(t){return-1!==t}function Os(t){return 32767&t}function Ns(t,i){let e=function Nx(t){return t>>16}(t),n=i;for(;e>0;)n=n[15],e--;return n}let gp=!0;function fd(t){const i=gp;return gp=t,i}let Vx=0;function oc(t,i){const e=vp(t,i);if(-1!==e)return e;const n=i[1];n.firstCreatePass&&(t.injectorIndex=i.length,mp(n.data,t),mp(i,null),mp(n.blueprint,null));const r=pd(t,i),a=t.injectorIndex;if(Mb(r)){const o=Os(r),s=Ns(r,i),l=s[1].data;for(let c=0;c<8;c++)i[a+c]=s[o+c]|l[o+c]}return i[a+8]=r,a}function mp(t,i){t.push(0,0,0,0,0,0,0,0,i)}function vp(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function pd(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,n=null,r=i;for(;null!==r;){const a=r[1],o=a.type;if(n=2===o?a.declTNode:1===o?r[6]:null,null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function gd(t,i,e){!function Fx(t,i,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(Jl)&&(n=e[Jl]),null==n&&(n=e[Jl]=Vx++);const r=255&n;i.data[t+(r>>5)]|=1<<r}(t,i,e)}function Pb(t,i,e){if(e&It.Optional)return t;Yu(i,"NodeInjector")}function Eb(t,i,e,n){if(e&It.Optional&&void 0===n&&(n=null),0==(e&(It.Self|It.Host))){const r=t[9],a=mo(void 0);try{return r?r.get(i,n,e&It.Optional):nb(i,n,e&It.Optional)}finally{mo(a)}}return Pb(n,i,e)}function Ib(t,i,e,n=It.Default,r){if(null!==t){const a=function Hx(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(Jl)?t[Jl]:void 0;return"number"==typeof i?i>=0?255&i:Lx:i}(e);if("function"==typeof a){if(!yb(i,t,n))return n&It.Host?Pb(r,e,n):Eb(i,e,n,r);try{const o=a(n);if(null!=o||n&It.Optional)return o;Yu(e)}finally{Tb()}}else if("number"==typeof a){let o=null,s=vp(t,i),l=-1,c=n&It.Host?i[16][6]:null;for((-1===s||n&It.SkipSelf)&&(l=-1===s?pd(t,i):i[s+8],-1!==l&&Vb(n,!1)?(o=i[1],s=Os(l),i=Ns(l,i)):s=-1);-1!==s;){const u=i[1];if(Nb(a,s,u.data)){const d=Ux(s,i,e,o,n,c);if(d!==Ob)return d}l=i[s+8],-1!==l&&Vb(n,i[1].data[s+8]===c)&&Nb(a,s,i)?(o=u,s=Os(l),i=Ns(l,i)):s=-1}}}return Eb(i,e,n,r)}const Ob={};function Lx(){return new Vs(Ci(),Re())}function Ux(t,i,e,n,r,a){const o=i[1],s=o.data[t+8],u=md(s,o,e,null==n?td(s)&&gp:n!=o&&0!=(3&s.type),r&It.Host&&a===s);return null!==u?sc(i,o,u,s):Ob}function md(t,i,e,n,r){const a=t.providerIndexes,o=i.data,s=1048575&a,l=t.directiveStart,u=a>>20,m=r?s+u:t.directiveEnd;for(let v=n?s:s+u;v<m;v++){const _=o[v];if(v<l&&e===_||v>=l&&_.type===e)return v}if(r){const v=o[l];if(v&&ia(v)&&v.type===e)return l}return null}function sc(t,i,e,n){let r=t[e];const a=i.data;if(function Px(t){return t instanceof rc}(r)){const o=r;o.resolving&&function I2(t,i){const e=i?`. Dependency path: ${i.join(" > ")} > ${t}`:"";throw new sn(-200,`Circular dependency in DI detected for ${t}${e}`)}(Zi(a[e]));const s=fd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?mo(o.injectImpl):null;yb(t,n,It.Default);try{r=t[e]=o.factory(void 0,a,t,n),i.firstCreatePass&&e>=n.directiveStart&&function kx(t,i,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:a}=i.type.prototype;if(n){const o=cb(i);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),a&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,a),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,a))}(e,a[e],i)}finally{null!==l&&mo(l),fd(s),o.resolving=!1,Tb()}}return r}function Nb(t,i,e){return!!(e[i+(t>>5)]&1<<t)}function Vb(t,i){return!(t&It.Self||t&It.Host&&i)}class Vs{constructor(i,e){this._tNode=i,this._lView=e}get(i,e,n){return Ib(this._tNode,this._lView,i,n,e)}}function zi(t){return vo(()=>{const i=t.prototype.constructor,e=i[qa]||bp(i),n=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==n;){const a=r[qa]||bp(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function bp(t){return Z0(t)?()=>{const i=bp(Ut(t));return i&&i()}:qo(t)}const Bs="__parameters__";function Us(t,i,e){return vo(()=>{const n=function _p(t){return function(...e){if(t){const n=t(...e);for(const r in n)this[r]=n[r]}}}(i);function r(...a){if(this instanceof r)return n.apply(this,a),this;const o=new r(...a);return s.annotation=o,s;function s(l,c,u){const d=l.hasOwnProperty(Bs)?l[Bs]:Object.defineProperty(l,Bs,{value:[]})[Bs];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class qt{constructor(i,e){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=tt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const jx=new qt("AnalyzeForEntryComponents");function Gr(t,i){void 0===i&&(i=t);for(let e=0;e<t.length;e++){let n=t[e];Array.isArray(n)?(i===t&&(i=t.slice(0,e)),Gr(n,i)):i!==t&&i.push(n)}return i}function Ra(t,i){t.forEach(e=>Array.isArray(e)?Ra(e,i):i(e))}function Bb(t,i,e){i>=t.length?t.push(e):t.splice(i,0,e)}function vd(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function uc(t,i){const e=[];for(let n=0;n<t;n++)e.push(i);return e}function Tr(t,i,e){let n=Hs(t,i);return n>=0?t[1|n]=e:(n=~n,function qx(t,i,e,n){let r=t.length;if(r==i)t.push(e,n);else if(1===r)t.push(n,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>i;)t[r]=t[r-2],r--;t[i]=e,t[i+1]=n}}(t,n,i,e)),n}function wp(t,i){const e=Hs(t,i);if(e>=0)return t[1|e]}function Hs(t,i){return function Hb(t,i,e){let n=0,r=t.length>>e;for(;r!==n;){const a=n+(r-n>>1),o=t[a<<e];if(i===o)return a<<e;o>i?r=a:n=a+1}return~(r<<e)}(t,i,1)}const dc={},Sp="__NG_DI_FLAG__",_d="ngTempTokenPath",Jx=/\n/gm,jb="__source",tM=Dn({provide:String,useValue:Dn});let hc;function zb(t){const i=hc;return hc=t,i}function nM(t,i=It.Default){if(void 0===hc)throw new sn(203,"");return null===hc?nb(t,void 0,i):hc.get(t,i&It.Optional?null:void 0,i)}function Le(t,i=It.Default){return(function U2(){return qf}()||nM)(Ut(t),i)}function Tp(t){const i=[];for(let e=0;e<t.length;e++){const n=Ut(t[e]);if(Array.isArray(n)){if(0===n.length)throw new sn(900,"");let r,a=It.Default;for(let o=0;o<n.length;o++){const s=n[o],l=iM(s);"number"==typeof l?-1===l?r=s.token:a|=l:r=s}i.push(Le(r,a))}else i.push(Le(n))}return i}function fc(t,i){return t[Sp]=i,t.prototype[Sp]=i,t}function iM(t){return t[Sp]}const pc=fc(Us("Inject",t=>({token:t})),-1),xa=fc(Us("Optional"),8),Gs=fc(Us("SkipSelf"),4);let wd,Cd;function zs(t){var i;return(null===(i=function Rp(){if(void 0===wd&&(wd=null,Sn.trustedTypes))try{wd=Sn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return wd}())||void 0===i?void 0:i.createHTML(t))||t}function Qb(t){var i;return(null===(i=function xp(){if(void 0===Cd&&(Cd=null,Sn.trustedTypes))try{Cd=Sn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Cd}())||void 0===i?void 0:i.createHTML(t))||t}class Xo{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class mM extends Xo{getTypeName(){return"HTML"}}class vM extends Xo{getTypeName(){return"Style"}}class bM extends Xo{getTypeName(){return"Script"}}class _M extends Xo{getTypeName(){return"URL"}}class yM extends Xo{getTypeName(){return"ResourceURL"}}function Dr(t){return t instanceof Xo?t.changingThisBreaksApplicationSecurity:t}function Ma(t,i){const e=Jb(t);if(null!=e&&e!==i){if("ResourceURL"===e&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===i}function Jb(t){return t instanceof Xo&&t.getTypeName()||null}function e1(t){const i=new xM(t);return function MM(){try{return!!(new window.DOMParser).parseFromString(zs(""),"text/html")}catch(t){return!1}}()?new RM(i):i}class RM{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const e=(new window.DOMParser).parseFromString(zs(i),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(i):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class xM{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(i){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=zs(i),e;const n=this.inertDocument.createElement("body");return n.innerHTML=zs(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(i){const e=i.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&i.removeAttribute(o)}let n=i.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const kM=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,AM=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function mc(t){return(t=String(t)).match(kM)||t.match(AM)?t:"unsafe:"+t}function t1(t){return(t=String(t)).split(",").map(i=>mc(i.trim())).join(", ")}function ka(t){const i={};for(const e of t.split(","))i[e]=!0;return i}function vc(...t){const i={};for(const e of t)for(const n in e)e.hasOwnProperty(n)&&(i[n]=!0);return i}const n1=ka("area,br,col,hr,img,wbr"),i1=ka("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),r1=ka("rp,rt"),Mp=vc(n1,vc(i1,ka("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vc(r1,ka("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vc(r1,i1)),kp=ka("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ap=ka("srcset"),a1=vc(kp,Ap,ka("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ka("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),PM=ka("script,style,template");class EM{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let e=i.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(i){const e=i.nodeName.toLowerCase();if(!Mp.hasOwnProperty(e))return this.sanitizedSomething=!0,!PM.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=i.attributes;for(let r=0;r<n.length;r++){const a=n.item(r),o=a.name,s=o.toLowerCase();if(!a1.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let l=a.value;kp[s]&&(l=mc(l)),Ap[s]&&(l=t1(l)),this.buf.push(" ",o,'="',o1(l),'"')}return this.buf.push(">"),!0}endElement(i){const e=i.nodeName.toLowerCase();Mp.hasOwnProperty(e)&&!n1.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(i){this.buf.push(o1(i))}checkClobberedElement(i,e){if(e&&(i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return e}}const IM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,OM=/([^\#-~ |!])/g;function o1(t){return t.replace(/&/g,"&amp;").replace(IM,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(OM,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Sd;function s1(t,i){let e=null;try{Sd=Sd||e1(t);let n=i?String(i):"";e=Sd.getInertBodyElement(n);let r=5,a=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=a,a=e.innerHTML,e=Sd.getInertBodyElement(n)}while(n!==a);return zs((new EM).sanitizeChildren(Pp(e)||e))}finally{if(e){const n=Pp(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Pp(t){return"content"in t&&function NM(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var en=(()=>((en=en||{})[en.NONE=0]="NONE",en[en.HTML=1]="HTML",en[en.STYLE=2]="STYLE",en[en.SCRIPT=3]="SCRIPT",en[en.URL=4]="URL",en[en.RESOURCE_URL=5]="RESOURCE_URL",en))();function Nt(t){const i=function bc(){const t=Re();return t&&t[12]}();return i?Qb(i.sanitize(en.HTML,t)||""):Ma(t,"HTML")?Qb(Dr(t)):s1(ip(),At(t))}const u1="__ngContext__";function $i(t,i){t[u1]=i}function Op(t){const i=function _c(t){return t[u1]||null}(t);return i?Array.isArray(i)?i:i.lView:null}function Vp(t){return t.ngOriginalError}function KM(t,...i){t.error(...i)}class $s{constructor(){this._console=console}handleError(i){const e=this._findOriginalError(i),n=function QM(t){return t&&t.ngErrorLogger||KM}(i);n(this._console,"ERROR",i),e&&n(this._console,"ORIGINAL ERROR",e)}_findOriginalError(i){let e=i&&Vp(i);for(;e&&Vp(e);)e=Vp(e);return e||null}}const ek=/^>|^->|<!--|-->|--!>|<!-$/g,tk=/(<|>)/;const g1=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Sn))();function Ya(t){return t.ownerDocument.defaultView}function Aa(t){return t instanceof Function?t():t}var Rr=(()=>((Rr=Rr||{})[Rr.Important=1]="Important",Rr[Rr.DashCase=2]="DashCase",Rr))();let Fp;function Bp(t,i){return Fp(t,i)}function yc(t){const i=t[3];return na(i)?i[3]:i}function Lp(t){return y1(t[13])}function Up(t){return y1(t[4])}function y1(t){for(;null!==t&&!na(t);)t=t[4];return t}function Ws(t,i,e,n,r){if(null!=n){let a,o=!1;na(n)?a=n:Ta(n)&&(o=!0,n=n[0]);const s=gi(n);0===t&&null!==e?null==r?R1(i,e,s):Yo(i,e,s,r||null,!0):1===t&&null!==e?Yo(i,e,s,r||null,!0):2===t?I1(i,s,o):3===t&&i.destroyNode(s),null!=a&&function Ck(t,i,e,n,r){const a=e[7];a!==gi(e)&&Ws(i,t,n,a,r);for(let s=10;s<e.length;s++){const l=e[s];wc(l[1],l,t,i,n,a)}}(i,t,a,e,r)}}function Hp(t,i){return ti(t)?t.createText(i):t.createTextNode(i)}function w1(t,i,e){ti(t)?t.setValue(i,e):i.textContent=e}function uk(t,i){return t.createComment(function p1(t){return t.replace(ek,i=>i.replace(tk,"\u200b$1\u200b"))}(i))}function Gp(t,i,e){if(ti(t))return t.createElement(i,e);{const n=null!==e?function ox(t){const i=t.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(e):null;return null===n?t.createElement(i):t.createElementNS(n,i)}}function C1(t,i){const e=t[9],n=e.indexOf(i),r=i[3];1024&i[2]&&(i[2]&=-1025,op(r,-1)),e.splice(n,1)}function jp(t,i){if(t.length<=10)return;const e=10+i,n=t[e];if(n){const r=n[17];null!==r&&r!==t&&C1(r,n),i>0&&(t[e-1][4]=n[4]);const a=vd(t,10+i);!function dk(t,i){wc(t,i,i[11],2,null,null),i[0]=null,i[6]=null}(n[1],n);const o=a[19];null!==o&&o.detachView(a[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function S1(t,i){if(!(256&i[2])){const e=i[11];ti(e)&&e.destroyNode&&wc(t,i,e,3,null,null),function pk(t){let i=t[13];if(!i)return zp(t[1],t);for(;i;){let e=null;if(Ta(i))e=i[13];else{const n=i[10];n&&(e=n)}if(!e){for(;i&&!i[4]&&i!==t;)Ta(i)&&zp(i[1],i),i=i[3];null===i&&(i=t),Ta(i)&&zp(i[1],i),e=i&&i[4]}i=e}}(i)}}function zp(t,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function bk(t,i){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let n=0;n<e.length;n+=2){const r=i[e[n]];if(!(r instanceof rc)){const a=e[n+1];if(Array.isArray(a))for(let o=0;o<a.length;o+=2){const s=r[a[o]],l=a[o+1];try{l.call(s)}finally{}}else try{a.call(r)}finally{}}}}(t,i),function vk(t,i){const e=t.cleanup,n=i[7];let r=-1;if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const o=e[a+1],s="function"==typeof o?o(i):gi(i[o]),l=n[r=e[a+2]],c=e[a+3];"boolean"==typeof c?s.removeEventListener(e[a],l,c):c>=0?n[r=c]():n[r=-c].unsubscribe(),a+=2}else{const o=n[r=e[a+1]];e[a].call(o)}if(null!==n){for(let a=r+1;a<n.length;a++)n[a]();i[7]=null}}(t,i),1===i[1].type&&ti(i[11])&&i[11].destroy();const e=i[17];if(null!==e&&na(i[3])){e!==i[3]&&C1(e,i);const n=i[19];null!==n&&n.detachView(t)}}}function T1(t,i,e){return D1(t,i.parent,e)}function D1(t,i,e){let n=i;for(;null!==n&&40&n.type;)n=(i=n).parent;if(null===n)return e[0];if(2&n.flags){const r=t.data[n.directiveStart].encapsulation;if(r===Sa.None||r===Sa.Emulated)return null}return Hr(n,e)}function Yo(t,i,e,n,r){ti(t)?t.insertBefore(i,e,n,r):i.insertBefore(e,n,r)}function R1(t,i,e){ti(t)?t.appendChild(i,e):i.appendChild(e)}function x1(t,i,e,n,r){null!==n?Yo(t,i,e,n,r):R1(t,i,e)}function Td(t,i){return ti(t)?t.parentNode(i):i.parentNode}function M1(t,i,e){return A1(t,i,e)}function k1(t,i,e){return 40&t.type?Hr(t,e):null}let $p,A1=k1;function P1(t,i){A1=t,$p=i}function Dd(t,i,e,n){const r=T1(t,n,i),a=i[11],s=M1(n.parent||i[6],n,i);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)x1(a,r,e[l],s,!1);else x1(a,r,e,s,!1);void 0!==$p&&$p(a,n,i,e,r)}function Rd(t,i){if(null!==i){const e=i.type;if(3&e)return Hr(i,t);if(4&e)return qp(-1,t[i.index]);if(8&e){const n=i.child;if(null!==n)return Rd(t,n);{const r=t[i.index];return na(r)?qp(-1,r):gi(r)}}if(32&e)return Bp(i,t)()||gi(t[i.index]);{const n=E1(t,i);return null!==n?Array.isArray(n)?n[0]:Rd(yc(t[16]),n):Rd(t,i.next)}}return null}function E1(t,i){return null!==i?t[16][6].projection[i.projection]:null}function qp(t,i){const e=10+t+1;if(e<i.length){const n=i[e],r=n[1].firstChild;if(null!==r)return Rd(n,r)}return i[7]}function I1(t,i,e){const n=Td(t,i);n&&function _k(t,i,e,n){ti(t)?t.removeChild(i,e,n):i.removeChild(e)}(t,n,i,e)}function Wp(t,i,e,n,r,a,o){for(;null!=e;){const s=n[e.index],l=e.type;if(o&&0===i&&(s&&$i(gi(s),n),e.flags|=4),64!=(64&e.flags))if(8&l)Wp(t,i,e.child,n,r,a,!1),Ws(i,t,r,s,a);else if(32&l){const c=Bp(e,n);let u;for(;u=c();)Ws(i,t,r,u,a);Ws(i,t,r,s,a)}else 16&l?O1(t,i,n,e,r,a):Ws(i,t,r,s,a);e=o?e.projectionNext:e.next}}function wc(t,i,e,n,r,a){Wp(e,n,t.firstChild,i,r,a,!1)}function O1(t,i,e,n,r,a){const o=e[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Ws(i,t,r,l[c],a);else Wp(t,i,l,o[3],r,a,!0)}function N1(t,i,e){ti(t)?t.setAttribute(i,"style",e):i.style.cssText=e}function Xp(t,i,e){ti(t)?""===e?t.removeAttribute(i,"class"):t.setAttribute(i,"class",e):i.className=e}function V1(t,i,e){let n=t.length;for(;;){const r=t.indexOf(i,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=i.length;if(r+a===n||t.charCodeAt(r+a)<=32)return r}e=r+1}}const F1="ng-template";function Tk(t,i,e){let n=0;for(;n<t.length;){let r=t[n++];if(e&&"class"===r){if(r=t[n],-1!==V1(r.toLowerCase(),i,0))return!0}else if(1===r){for(;n<t.length&&"string"==typeof(r=t[n++]);)if(r.toLowerCase()===i)return!0;return!1}}return!1}function B1(t){return 4===t.type&&t.value!==F1}function Dk(t,i,e){return i===(4!==t.type||e?t.value:F1)}function Rk(t,i,e){let n=4;const r=t.attrs||[],a=function kk(t){for(let i=0;i<t.length;i++)if(Rb(t[i]))return i;return t.length}(r);let o=!1;for(let s=0;s<i.length;s++){const l=i[s];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!Dk(t,l,e)||""===l&&1===i.length){if(ra(n))return!1;o=!0}}else{const c=8&n?l:i[++s];if(8&n&&null!==t.attrs){if(!Tk(t.attrs,c,e)){if(ra(n))return!1;o=!0}continue}const d=xk(8&n?"class":l,r,B1(t),e);if(-1===d){if(ra(n))return!1;o=!0;continue}if(""!==c){let m;m=d>a?"":r[d+1].toLowerCase();const v=8&n?m:null;if(v&&-1!==V1(v,c,0)||2&n&&c!==m){if(ra(n))return!1;o=!0}}}}else{if(!o&&!ra(n)&&!ra(l))return!1;if(o&&ra(l))continue;o=!1,n=l|1&n}}return ra(n)||o}function ra(t){return 0==(1&t)}function xk(t,i,e,n){if(null===i)return-1;let r=0;if(n||!e){let a=!1;for(;r<i.length;){const o=i[r];if(o===t)return r;if(3===o||6===o)a=!0;else{if(1===o||2===o){let s=i[++r];for(;"string"==typeof s;)s=i[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=a?1:2}return-1}return function Ak(t,i){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const n=t[e];if("number"==typeof n)return-1;if(n===i)return e;e++}return-1}(i,t)}function L1(t,i,e=!1){for(let n=0;n<i.length;n++)if(Rk(t,i[n],e))return!0;return!1}function Pk(t,i){e:for(let e=0;e<i.length;e++){const n=i[e];if(t.length===n.length){for(let r=0;r<t.length;r++)if(t[r]!==n[r])continue e;return!0}}return!1}function U1(t,i){return t?":not("+i.trim()+")":i}function Ek(t){let i=t[0],e=1,n=2,r="",a=!1;for(;e<t.length;){let o=t[e];if("string"==typeof o)if(2&n){const s=t[++e];r+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!ra(o)&&(i+=U1(a,r),r=""),n=o,a=a||!ra(n);e++}return""!==r&&(i+=U1(a,r)),i}const Pt={};function p(t){H1(ln(),Re(),er()+t,rd())}function H1(t,i,e,n){if(!n)if(3==(3&i[2])){const a=t.preOrderCheckHooks;null!==a&&cd(i,a,e)}else{const a=t.preOrderHooks;null!==a&&ud(i,a,0,e)}yo(e)}function xd(t,i){return t<<17|i<<2}function aa(t){return t>>17&32767}function Yp(t){return 2|t}function Qa(t){return(131068&t)>>2}function Qp(t,i){return-131069&t|i<<2}function Kp(t){return 1|t}function Z1(t,i){const e=t.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],a=e[n+1];if(-1!==a){const o=t.data[a];dp(r),o.contentQueries(2,i[a],a)}}}function Cc(t,i,e,n,r,a,o,s,l,c){const u=i.blueprint.slice();return u[0]=r,u[2]=140|n,pb(u),u[3]=u[15]=t,u[8]=e,u[10]=o||t&&t[10],u[11]=s||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=a,u[16]=2==i.type?t[16]:u,u}function Xs(t,i,e,n,r){let a=t.data[i];if(null===a)a=og(t,i,e,n,r),function bx(){return Tt.lFrame.inI18n}()&&(a.flags|=64);else if(64&a.type){a.type=e,a.value=n,a.attrs=r;const o=ic();a.injectorIndex=null===o?-1:o.injectorIndex}return Da(a,!0),a}function og(t,i,e,n,r){const a=mb(),o=sp(),l=t.data[i]=function Qk(t,i,e,n,r,a){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,e,i,n,r);return null===t.firstChild&&(t.firstChild=l),null!==a&&(o?null==a.child&&null!==l.parent&&(a.child=l):null===a.next&&(a.next=l)),l}function Ys(t,i,e,n){if(0===e)return-1;const r=i.length;for(let a=0;a<e;a++)i.push(n),t.blueprint.push(n),t.data.push(null);return r}function Sc(t,i,e){od(i);try{const n=t.viewQuery;null!==n&&gg(1,n,e);const r=t.template;null!==r&&J1(t,i,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Z1(t,i),t.staticViewQueries&&gg(2,t.viewQuery,e);const a=t.components;null!==a&&function Wk(t,i){for(let e=0;e<i.length;e++)pA(t,i[e])}(i,a)}catch(n){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),n}finally{i[2]&=-5,sd()}}function Qs(t,i,e,n){const r=i[2];if(256==(256&r))return;od(i);const a=rd();try{pb(i),function vb(t){return Tt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&J1(t,i,e,2,n);const o=3==(3&r);if(!a)if(o){const c=t.preOrderCheckHooks;null!==c&&cd(i,c,null)}else{const c=t.preOrderHooks;null!==c&&ud(i,c,0,null),hp(i,0)}if(function hA(t){for(let i=Lp(t);null!==i;i=Up(i)){if(!i[2])continue;const e=i[9];for(let n=0;n<e.length;n++){const r=e[n],a=r[3];0==(1024&r[2])&&op(a,1),r[2]|=1024}}}(i),function dA(t){for(let i=Lp(t);null!==i;i=Up(i))for(let e=10;e<i.length;e++){const n=i[e],r=n[1];ap(n)&&Qs(r,n,r.template,n[8])}}(i),null!==t.contentQueries&&Z1(t,i),!a)if(o){const c=t.contentCheckHooks;null!==c&&cd(i,c)}else{const c=t.contentHooks;null!==c&&ud(i,c,1),hp(i,1)}!function $k(t,i){const e=t.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)yo(~r);else{const a=r,o=e[++n],s=e[++n];_x(o,a),s(2,i[a])}}}finally{yo(-1)}}(t,i);const s=t.components;null!==s&&function qk(t,i){for(let e=0;e<i.length;e++)fA(t,i[e])}(i,s);const l=t.viewQuery;if(null!==l&&gg(2,l,n),!a)if(o){const c=t.viewCheckHooks;null!==c&&cd(i,c)}else{const c=t.viewHooks;null!==c&&ud(i,c,2),hp(i,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,op(i[3],-1))}finally{sd()}}function Xk(t,i,e,n){const r=i[10],a=!rd(),o=fb(i);try{a&&!o&&r.begin&&r.begin(),o&&Sc(t,i,n),Qs(t,i,e,n)}finally{a&&!o&&r.end&&r.end()}}function J1(t,i,e,n,r){const a=er(),o=2&n;try{yo(-1),o&&i.length>20&&H1(t,i,20,rd()),e(n,r)}finally{yo(a)}}function sg(t,i,e){!gb()||(function iA(t,i,e,n){const r=e.directiveStart,a=e.directiveEnd;t.firstCreatePass||oc(e,i),$i(n,i);const o=e.initialInputs;for(let s=r;s<a;s++){const l=t.data[s],c=ia(l);c&&lA(i,e,l);const u=sc(i,t,s,e);$i(u,i),null!==o&&cA(0,s-r,u,l,0,o),c&&(Sr(e.index,i)[8]=u)}}(t,i,e,Hr(e,i)),128==(128&e.flags)&&function rA(t,i,e){const n=e.directiveStart,r=e.directiveEnd,o=e.index,s=function yx(){return Tt.lFrame.currentDirectiveIndex}();try{yo(o);for(let l=n;l<r;l++){const c=t.data[l],u=i[l];cp(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&l_(c,u)}}finally{yo(-1),cp(s)}}(t,i,e))}function lg(t,i,e=Hr){const n=i.localNames;if(null!==n){let r=i.index+1;for(let a=0;a<n.length;a+=2){const o=n[a+1],s=-1===o?e(i,t):t[o];t[r++]=s}}}function t_(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=Ad(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):i}function Ad(t,i,e,n,r,a,o,s,l,c){const u=20+n,d=u+r,m=function Yk(t,i){const e=[];for(let n=0;n<i;n++)e.push(n<t?null:Pt);return e}(u,d),v="function"==typeof c?c():c;return m[1]={type:t,blueprint:m,template:e,queries:null,viewQuery:s,declTNode:i,data:m.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1}}function r_(t,i,e,n){const r=p_(i);null===e?r.push(n):(r.push(e),t.firstCreatePass&&g_(t).push(n,r.length-1))}function a_(t,i,e){for(let n in t)if(t.hasOwnProperty(n)){const r=t[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(i,r):e[n]=[i,r]}return e}function xr(t,i,e,n,r,a,o,s){const l=Hr(i,e);let u,c=i.inputs;!s&&null!=c&&(u=c[n])?(b_(t,e,u,n,r),td(i)&&function Jk(t,i){const e=Sr(i,t);16&e[2]||(e[2]|=64)}(e,i.index)):3&i.type&&(n=function Zk(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n),r=null!=o?o(r,i.value||"",n):r,ti(a)?a.setProperty(l,n,r):pp(n)||(l.setProperty?l.setProperty(n,r):l[n]=r))}function cg(t,i,e,n){let r=!1;if(gb()){const a=function aA(t,i,e){const n=t.directiveRegistry;let r=null;if(n)for(let a=0;a<n.length;a++){const o=n[a];L1(e,o.selectors,!1)&&(r||(r=[]),gd(oc(e,i),t,o.type),ia(o)?(c_(t,e),r.unshift(o)):r.push(o))}return r}(t,i,e),o=null===n?null:{"":-1};if(null!==a){r=!0,u_(e,t.data.length,a.length);for(let u=0;u<a.length;u++){const d=a[u];d.providersResolver&&d.providersResolver(d)}let s=!1,l=!1,c=Ys(t,i,a.length,null);for(let u=0;u<a.length;u++){const d=a[u];e.mergedAttrs=hd(e.mergedAttrs,d.hostAttrs),d_(t,e,i,c,d),sA(c,d,o),null!==d.contentQueries&&(e.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=128);const m=d.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),s=!0),!l&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function Kk(t,i){const n=i.directiveEnd,r=t.data,a=i.attrs,o=[];let s=null,l=null;for(let c=i.directiveStart;c<n;c++){const u=r[c],d=u.inputs,m=null===a||B1(i)?null:uA(d,a);o.push(m),s=a_(d,c,s),l=a_(u.outputs,c,l)}null!==s&&(s.hasOwnProperty("class")&&(i.flags|=16),s.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=o,i.inputs=s,i.outputs=l}(t,e)}o&&function oA(t,i,e){if(i){const n=t.localNames=[];for(let r=0;r<i.length;r+=2){const a=e[i[r+1]];if(null==a)throw new sn(-301,!1);n.push(i[r],a)}}}(e,n,o)}return e.mergedAttrs=hd(e.mergedAttrs,e.attrs),r}function s_(t,i,e,n,r,a){const o=a.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const l=~i.index;(function nA(t){let i=t.length;for(;i>0;){const e=t[--i];if("number"==typeof e&&e<0)return e}return 0})(s)!=l&&s.push(l),s.push(n,r,o)}}function l_(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function c_(t,i){i.flags|=2,(t.components||(t.components=[])).push(i.index)}function sA(t,i,e){if(e){if(i.exportAs)for(let n=0;n<i.exportAs.length;n++)e[i.exportAs[n]]=t;ia(i)&&(e[""]=t)}}function u_(t,i,e){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+e,t.providerIndexes=i}function d_(t,i,e,n,r){t.data[n]=r;const a=r.factory||(r.factory=qo(r.type)),o=new rc(a,ia(r),null);t.blueprint[n]=o,e[n]=o,s_(t,i,0,n,Ys(t,e,r.hostVars,Pt),r)}function lA(t,i,e){const n=Hr(i,t),r=t_(e),a=t[10],o=Pd(t,Cc(t,r,null,e.onPush?64:16,n,i,a,a.createRenderer(n,e),null,null));t[i.index]=o}function ug(t,i,e,n,r,a,o){if(null==a)ti(t)?t.removeAttribute(i,r,e):i.removeAttribute(r);else{const s=null==o?At(a):o(a,n||"",r);ti(t)?t.setAttribute(i,r,s,e):e?i.setAttributeNS(e,r,s):i.setAttribute(r,s)}}function cA(t,i,e,n,r,a){const o=a[i];if(null!==o){const s=n.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==s?n.setInput(e,d,c,u):e[u]=d}}}function uA(t,i){let e=null,n=0;for(;n<i.length;){const r=i[n];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],i[n+1])),n+=2}else n+=2;else n+=4}return e}function h_(t,i,e,n){return new Array(t,!0,!1,i,null,0,n,e,null,null)}function fA(t,i){const e=Sr(i,t);if(ap(e)){const n=e[1];80&e[2]?Qs(n,e,n.template,e[8]):e[5]>0&&dg(e)}}function dg(t){for(let n=Lp(t);null!==n;n=Up(n))for(let r=10;r<n.length;r++){const a=n[r];if(1024&a[2]){const o=a[1];Qs(o,a,o.template,a[8])}else a[5]>0&&dg(a)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Sr(e[n],t);ap(r)&&r[5]>0&&dg(r)}}function pA(t,i){const e=Sr(i,t),n=e[1];(function gA(t,i){for(let e=i.length;e<t.blueprint.length;e++)i.push(t.blueprint[e])})(n,e),Sc(n,e,e[8])}function Pd(t,i){return t[13]?t[14][4]=i:t[13]=i,t[14]=i,i}function hg(t){for(;t;){t[2]|=64;const i=yc(t);if(Q2(t)&&!i)return t;t=i}return null}function pg(t,i,e){const n=i[10];n.begin&&n.begin();try{Qs(t,i,t.template,e)}catch(r){throw v_(i,r),r}finally{n.end&&n.end()}}function f_(t){!function fg(t){for(let i=0;i<t.components.length;i++){const e=t.components[i],n=Op(e),r=n[1];Xk(r,n,r.template,e)}}(t[8])}function gg(t,i,e){dp(0),i(t,e)}const _A=(()=>Promise.resolve(null))();function p_(t){return t[7]||(t[7]=[])}function g_(t){return t.cleanup||(t.cleanup=[])}function v_(t,i){const e=t[9],n=e?e.get($s,null):null;n&&n.handleError(i)}function b_(t,i,e,n,r){for(let a=0;a<e.length;){const o=e[a++],s=e[a++],l=i[o],c=t.data[o];null!==c.setInput?c.setInput(l,r,n,s):l[s]=r}}function Ka(t,i,e){const n=id(i,t);w1(t[11],n,e)}function Ed(t,i,e){let n=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==i)for(let o=0;o<i.length;o++){const s=i[o];"number"==typeof s?a=s:1==a?r=Gf(r,s):2==a&&(n=Gf(n,s+": "+i[++o]+";"))}e?t.styles=n:t.stylesWithoutHost=n,e?t.classes=r:t.classesWithoutHost=r}const mg=new qt("INJECTOR",-1);class __{get(i,e=dc){if(e===dc){const n=new Error(`NullInjectorError: No provider for ${yn(i)}!`);throw n.name="NullInjectorError",n}return e}}const vg=new qt("Set Injector scope."),Tc={},CA={};let bg;function y_(){return void 0===bg&&(bg=new __),bg}function w_(t,i=null,e=null,n){const r=C_(t,i,e,n);return r._resolveInjectorDefTypes(),r}function C_(t,i=null,e=null,n){return new SA(t,e,i||y_(),n)}class SA{constructor(i,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];e&&Ra(e,s=>this.processProvider(s,i,e)),Ra([i],s=>this.processInjectorType(s,[],a)),this.records.set(mg,Ks(void 0,this));const o=this.records.get(vg);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof i?null:yn(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,e=dc,n=It.Default){this.assertNotDestroyed();const r=zb(this),a=mo(void 0);try{if(!(n&It.SkipSelf)){let s=this.records.get(i);if(void 0===s){const l=function PA(t){return"function"==typeof t||"object"==typeof t&&t instanceof qt}(i)&&zf(i);s=l&&this.injectableDefInScope(l)?Ks(_g(i),Tc):null,this.records.set(i,s)}if(null!=s)return this.hydrate(i,s)}return(n&It.Self?y_():this.parent).get(i,e=n&It.Optional&&e===dc?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[_d]=o[_d]||[]).unshift(yn(i)),r)throw o;return function rM(t,i,e,n){const r=t[_d];throw i[jb]&&r.unshift(i[jb]),t.message=function aM(t,i,e,n=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=yn(i);if(Array.isArray(i))r=i.map(yn).join(" -> ");else if("object"==typeof i){let a=[];for(let o in i)if(i.hasOwnProperty(o)){let s=i[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):yn(s)))}r=`{${a.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${t.replace(Jx,"\n  ")}`}("\n"+t.message,r,e,n),t.ngTokenPath=r,t[_d]=null,t}(o,i,"R3InjectorError",this.source)}throw o}finally{mo(a),zb(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((n,r)=>i.push(yn(r))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new sn(205,!1)}processInjectorType(i,e,n){if(!(i=Ut(i)))return!1;let r=eb(i);const a=null==r&&i.ngModule||void 0,o=void 0===a?i:a,s=-1!==n.indexOf(o);if(void 0!==a&&(r=eb(a)),null==r)return!1;if(null!=r.imports&&!s){let u;n.push(o);try{Ra(r.imports,d=>{this.processInjectorType(d,e,n)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:m,providers:v}=u[d];Ra(v,_=>this.processProvider(_,m,v||Rn))}}this.injectorDefTypes.add(o);const l=qo(o)||(()=>new o);this.records.set(o,Ks(l,Tc));const c=r.providers;if(null!=c&&!s){const u=i;Ra(c,d=>this.processProvider(d,u,c))}return void 0!==a&&void 0!==i.providers}processProvider(i,e,n){let r=Zs(i=Ut(i))?i:Ut(i&&i.provide);const a=function DA(t,i,e){return T_(t)?Ks(void 0,t.useValue):Ks(S_(t),Tc)}(i);if(Zs(i)||!0!==i.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=Ks(void 0,Tc,!0),o.factory=()=>Tp(o.multi),this.records.set(r,o)),r=i,o.multi.push(i)}this.records.set(r,a)}hydrate(i,e){return e.value===Tc&&(e.value=CA,e.value=e.factory()),"object"==typeof e.value&&e.value&&function AA(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(i){if(!i.providedIn)return!1;const e=Ut(i.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function _g(t){const i=zf(t),e=null!==i?i.factory:qo(t);if(null!==e)return e;if(t instanceof qt)throw new sn(204,!1);if(t instanceof Function)return function TA(t){const i=t.length;if(i>0)throw uc(i,"?"),new sn(204,!1);const e=function F2(t){const i=t&&(t[Qu]||t[tb]);if(i){const e=function B2(t){if(t.hasOwnProperty("name"))return t.name;const i=(""+t).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),i}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new sn(204,!1)}function S_(t,i,e){let n;if(Zs(t)){const r=Ut(t);return qo(r)||_g(r)}if(T_(t))n=()=>Ut(t.useValue);else if(function xA(t){return!(!t||!t.useFactory)}(t))n=()=>t.useFactory(...Tp(t.deps||[]));else if(function RA(t){return!(!t||!t.useExisting)}(t))n=()=>Le(Ut(t.useExisting));else{const r=Ut(t&&(t.useClass||t.provide));if(!function kA(t){return!!t.deps}(t))return qo(r)||_g(r);n=()=>new r(...Tp(t.deps))}return n}function Ks(t,i,e=!1){return{factory:t,value:i,multi:e?[]:void 0}}function T_(t){return null!==t&&"object"==typeof t&&tM in t}function Zs(t){return"function"==typeof t}let ci=(()=>{class t{static create(e,n){var r;if(Array.isArray(e))return w_({name:""},n,e,"");{const a=null!==(r=e.name)&&void 0!==r?r:"";return w_({name:a},e.parent,e.providers,a)}}}return t.THROW_IF_NOT_FOUND=dc,t.NULL=new __,t.\u0275prov=tt({token:t,providedIn:"any",factory:()=>Le(mg)}),t.__NG_ELEMENT_ID__=-1,t})();function LA(t,i){ld(Op(t)[1],Ci())}function vn(t){let i=function V_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const n=[t];for(;i;){let r;if(ia(t))r=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new sn(903,"");r=i.\u0275dir}if(r){if(e){n.push(r);const o=t;o.inputs=Cg(t.inputs),o.declaredInputs=Cg(t.declaredInputs),o.outputs=Cg(t.outputs);const s=r.hostBindings;s&&jA(t,s);const l=r.viewQuery,c=r.contentQueries;if(l&&HA(t,l),c&&GA(t,c),Hf(t.inputs,r.inputs),Hf(t.declaredInputs,r.declaredInputs),Hf(t.outputs,r.outputs),ia(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let o=0;o<a.length;o++){const s=a[o];s&&s.ngInherit&&s(t),s===vn&&(e=!1)}}i=Object.getPrototypeOf(i)}!function UA(t){let i=0,e=null;for(let n=t.length-1;n>=0;n--){const r=t[n];r.hostVars=i+=r.hostVars,r.hostAttrs=hd(r.hostAttrs,e=hd(e,r.hostAttrs))}}(n)}function Cg(t){return t===xs?{}:t===Rn?[]:t}function HA(t,i){const e=t.viewQuery;t.viewQuery=e?(n,r)=>{i(n,r),e(n,r)}:i}function GA(t,i){const e=t.contentQueries;t.contentQueries=e?(n,r,a)=>{i(n,r,a),e(n,r,a)}:i}function jA(t,i){const e=t.hostBindings;t.hostBindings=e?(n,r)=>{i(n,r),e(n,r)}:i}let Id=null;function Js(){if(!Id){const t=Sn.Symbol;if(t&&t.iterator)Id=t.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<i.length;++e){const n=i[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Id=n)}}}return Id}function Dc(t){return!!Sg(t)&&(Array.isArray(t)||!(t instanceof Map)&&Js()in t)}function Sg(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ea(t,i,e){return t[i]=e}function Rc(t,i){return t[i]}function qi(t,i,e){return!Object.is(t[i],e)&&(t[i]=e,!0)}function Qo(t,i,e,n){const r=qi(t,i,e);return qi(t,i+1,n)||r}function Od(t,i,e,n,r){const a=Qo(t,i,e,n);return qi(t,i+2,r)||a}function jr(t,i,e,n,r,a){const o=Qo(t,i,e,n);return Qo(t,i+2,r,a)||o}function Cn(t,i,e,n){const r=Re();return qi(r,Is(),i)&&(ln(),function Pa(t,i,e,n,r,a){const o=Hr(t,i);ug(i[11],o,a,t.value,e,n,r)}(ni(),r,t,i,e,n)),Cn}function tl(t,i,e,n){return qi(t,Is(),e)?i+At(e)+n:Pt}function rl(t,i,e,n,r,a,o,s,l,c){const d=jr(t,Wa(),e,r,o,l);return Xa(4),d?i+At(e)+n+At(r)+a+At(o)+s+At(l)+c:Pt}function x(t,i,e,n,r,a,o,s){const l=Re(),c=ln(),u=t+20,d=c.firstCreatePass?function QA(t,i,e,n,r,a,o,s,l){const c=i.consts,u=Xs(i,t,4,o||null,_o(c,s));cg(i,e,u,_o(c,l)),ld(i,u);const d=u.tViews=Ad(2,u,n,r,a,i.directiveRegistry,i.pipeRegistry,null,i.schemas,c);return null!==i.queries&&(i.queries.template(i,u),d.queries=i.queries.embeddedTView(u)),u}(u,c,l,i,e,n,r,a,o):c.data[u];Da(d,!1);const m=l[11].createComment("");Dd(c,l,m,d),$i(m,l),Pd(l,l[u]=h_(m,l,m,d)),nd(d)&&sg(c,l,d),null!=o&&lg(l,d,s)}function at(t){return Es(function vx(){return Tt.lFrame.contextLView}(),20+t)}function A(t,i=It.Default){const e=Re();return null===e?Le(t,i):Ib(Ci(),e,Ut(t),i)}function Mg(){throw new Error("invalid")}function b(t,i,e){const n=Re();return qi(n,Is(),i)&&xr(ln(),ni(),n,t,i,n[11],e,!1),b}function kg(t,i,e,n,r){const o=r?"class":"style";b_(t,e,i.inputs[o],o,n)}function f(t,i,e,n){const r=Re(),a=ln(),o=20+t,s=r[11],l=r[o]=Gp(s,i,function Mx(){return Tt.lFrame.currentNamespace}()),c=a.firstCreatePass?function vP(t,i,e,n,r,a,o){const s=i.consts,c=Xs(i,t,2,r,_o(s,a));return cg(i,e,c,_o(s,o)),null!==c.attrs&&Ed(c,c.attrs,!1),null!==c.mergedAttrs&&Ed(c,c.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,c),c}(o,a,r,0,i,e,n):a.data[o];Da(c,!0);const u=c.mergedAttrs;null!==u&&dd(s,l,u);const d=c.classes;null!==d&&Xp(s,l,d);const m=c.styles;return null!==m&&N1(s,l,m),64!=(64&c.flags)&&Dd(a,r,l,c),0===function hx(){return Tt.lFrame.elementDepthCount}()&&$i(l,r),function fx(){Tt.lFrame.elementDepthCount++}(),nd(c)&&(sg(a,r,c),function e_(t,i,e){if(Kf(i)){const r=i.directiveEnd;for(let a=i.directiveStart;a<r;a++){const o=t.data[a];o.contentQueries&&o.contentQueries(1,e[a],a)}}}(a,c,r)),null!==n&&lg(r,c),f}function h(){let t=Ci();sp()?lp():(t=t.parent,Da(t,!1));const i=t;!function px(){Tt.lFrame.elementDepthCount--}();const e=ln();return e.firstCreatePass&&(ld(e,t),Kf(t)&&e.queries.elementEnd(t)),null!=i.classesWithoutHost&&function Ix(t){return 0!=(16&t.flags)}(i)&&kg(e,i,Re(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Ox(t){return 0!=(32&t.flags)}(i)&&kg(e,i,Re(),i.stylesWithoutHost,!1),h}function D(t,i,e,n){return f(t,i,e,n),h(),D}function ge(){return Re()}function xc(t){return!!t&&"function"==typeof t.then}const Eg=function iy(t){return!!t&&"function"==typeof t.subscribe};function I(t,i,e,n){const r=Re(),a=ln(),o=Ci();return function ay(t,i,e,n,r,a,o,s){const l=nd(n),u=t.firstCreatePass&&g_(t),d=i[8],m=p_(i);let v=!0;if(3&n.type||s){const S=Hr(n,i),T=s?s(S):S,C=m.length,O=s?j=>s(gi(j[n.index])):n.index;if(ti(e)){let j=null;if(!s&&l&&(j=function _P(t,i,e,n){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const o=r[a];if(o===e&&r[a+1]===n){const s=i[7],l=r[a+2];return s.length>l?s[l]:null}"string"==typeof o&&(a+=2)}return null}(t,i,r,n.index)),null!==j)(j.__ngLastListenerFn__||j).__ngNextListenerFn__=a,j.__ngLastListenerFn__=a,v=!1;else{a=Ig(n,i,d,a,!1);const G=e.listen(T,r,a);m.push(a,G),u&&u.push(r,O,C,C+1)}}else a=Ig(n,i,d,a,!0),T.addEventListener(r,a,o),m.push(a),u&&u.push(r,O,C,o)}else a=Ig(n,i,d,a,!1);const _=n.outputs;let y;if(v&&null!==_&&(y=_[r])){const S=y.length;if(S)for(let T=0;T<S;T+=2){const K=i[y[T]][y[T+1]].subscribe(a),se=m.length;m.push(a,K),u&&u.push(r,n.index,se,-(se+1))}}}(a,r,r[11],o,t,i,!!e,n),I}function oy(t,i,e,n){try{return!1!==e(n)}catch(r){return v_(t,r),!1}}function Ig(t,i,e,n,r){return function a(o){if(o===Function)return n;const s=2&t.flags?Sr(t.index,i):i;0==(32&i[2])&&hg(s);let l=oy(i,0,n,o),c=a.__ngNextListenerFn__;for(;c;)l=oy(i,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function w(t=1){return function Cx(t){return(Tt.lFrame.contextLView=function Sx(t,i){for(;t>0;)i=i[15],t--;return i}(t,Tt.lFrame.contextLView))[8]}(t)}function yP(t,i){let e=null;const n=function Mk(t){const i=t.attrs;if(null!=i){const e=i.indexOf(5);if(0==(1&e))return i[e+1]}return null}(t);for(let r=0;r<i.length;r++){const a=i[r];if("*"!==a){if(null===n?L1(t,a,!0):Pk(n,a))return r}else e=r}return e}function Vd(t){const i=Re()[16][6];if(!i.projection){const n=i.projection=uc(t?t.length:1,null),r=n.slice();let a=i.child;for(;null!==a;){const o=t?yP(a,t):0;null!==o&&(r[o]?r[o].projectionNext=a:n[o]=a,r[o]=a),a=a.next}}}function Fd(t,i=0,e){const n=Re(),r=ln(),a=Xs(r,20+t,16,null,e||null);null===a.projection&&(a.projection=i),lp(),64!=(64&a.flags)&&function wk(t,i,e){O1(i[11],0,i,e,T1(t,e,i),M1(e.parent||i[6],e,i))}(r,n,a)}function Wi(t,i,e){return Bd(t,"",i,"",e),Wi}function Bd(t,i,e,n,r){const a=Re(),o=tl(a,i,e,n);return o!==Pt&&xr(ln(),ni(),a,t,o,a[11],r,!1),Bd}function gy(t,i,e,n,r){const a=t[e+1],o=null===i;let s=n?aa(a):Qa(a),l=!1;for(;0!==s&&(!1===l||o);){const u=t[s+1];SP(t[s],i)&&(l=!0,t[s+1]=n?Kp(u):Yp(u)),s=n?aa(u):Qa(u)}l&&(t[e+1]=n?Yp(a):Kp(a))}function SP(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&Hs(t,i)>=0}const Ti={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function my(t){return t.substring(Ti.key,Ti.keyEnd)}function vy(t,i){const e=Ti.textEnd;return e===i?-1:(i=Ti.keyEnd=function xP(t,i,e){for(;i<e&&t.charCodeAt(i)>32;)i++;return i}(t,Ti.key=i,e),ul(t,i,e))}function ul(t,i,e){for(;i<e&&t.charCodeAt(i)<=32;)i++;return i}function Mc(t,i,e){return sa(t,i,e,!1),Mc}function wt(t,i){return sa(t,i,null,!0),wt}function To(t){la(Tr,Oa,t,!0)}function Oa(t,i){for(let e=function DP(t){return function _y(t){Ti.key=0,Ti.keyEnd=0,Ti.value=0,Ti.valueEnd=0,Ti.textEnd=t.length}(t),vy(t,ul(t,0,Ti.textEnd))}(i);e>=0;e=vy(i,e))Tr(t,my(i),!0)}function sa(t,i,e,n){const r=Re(),a=ln(),o=Xa(2);a.firstUpdatePass&&Sy(a,t,o,n),i!==Pt&&qi(r,o,i)&&Dy(a,a.data[er()],r,r[11],t,r[o+1]=function FP(t,i){return null==t||("string"==typeof i?t+=i:"object"==typeof t&&(t=yn(Dr(t)))),t}(i,e),n,o)}function la(t,i,e,n){const r=ln(),a=Xa(2);r.firstUpdatePass&&Sy(r,null,a,n);const o=Re();if(e!==Pt&&qi(o,a,e)){const s=r.data[er()];if(xy(s,n)&&!Cy(r,a)){let l=n?s.classesWithoutHost:s.stylesWithoutHost;null!==l&&(e=Gf(l,e||"")),kg(r,s,o,e,n)}else!function VP(t,i,e,n,r,a,o,s){r===Pt&&(r=Rn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<a.length?a[0]:null;for(;null!==u||null!==d;){const m=l<r.length?r[l+1]:void 0,v=c<a.length?a[c+1]:void 0;let y,_=null;u===d?(l+=2,c+=2,m!==v&&(_=d,y=v)):null===d||null!==u&&u<d?(l+=2,_=u):(c+=2,_=d,y=v),null!==_&&Dy(t,i,e,n,_,y,o,s),u=l<r.length?r[l]:null,d=c<a.length?a[c]:null}}(r,s,o,o[11],o[a+1],o[a+1]=function NP(t,i,e){if(null==e||""===e)return Rn;const n=[],r=Dr(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(n,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(n,a,r[a]);else"string"==typeof r&&i(n,r);return n}(t,i,e),n,a)}}function Cy(t,i){return i>=t.expandoStartIndex}function Sy(t,i,e,n){const r=t.data;if(null===r[e+1]){const a=r[er()],o=Cy(t,e);xy(a,n)&&null===i&&!o&&(i=!1),i=function PP(t,i,e,n){const r=function up(t){const i=Tt.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}(t);let a=n?i.residualClasses:i.residualStyles;if(null===r)0===(n?i.classBindings:i.styleBindings)&&(e=kc(e=Og(null,t,i,e,n),i.attrs,n),a=null);else{const o=i.directiveStylingLast;if(-1===o||t[o]!==r)if(e=Og(r,t,i,e,n),null===a){let l=function EP(t,i,e){const n=e?i.classBindings:i.styleBindings;if(0!==Qa(n))return t[aa(n)]}(t,i,n);void 0!==l&&Array.isArray(l)&&(l=Og(null,t,i,l[1],n),l=kc(l,i.attrs,n),function IP(t,i,e,n){t[aa(e?i.classBindings:i.styleBindings)]=n}(t,i,n,l))}else a=function OP(t,i,e){let n;const r=i.directiveEnd;for(let a=1+i.directiveStylingLast;a<r;a++)n=kc(n,t[a].hostAttrs,e);return kc(n,i.attrs,e)}(t,i,n)}return void 0!==a&&(n?i.residualClasses=a:i.residualStyles=a),e}(r,a,i,n),function wP(t,i,e,n,r,a){let o=a?i.classBindings:i.styleBindings,s=aa(o),l=Qa(o);t[n]=e;let u,c=!1;if(Array.isArray(e)){const d=e;u=d[1],(null===u||Hs(d,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const m=aa(t[s+1]);t[n+1]=xd(m,s),0!==m&&(t[m+1]=Qp(t[m+1],n)),t[s+1]=function Nk(t,i){return 131071&t|i<<17}(t[s+1],n)}else t[n+1]=xd(s,0),0!==s&&(t[s+1]=Qp(t[s+1],n)),s=n;else t[n+1]=xd(l,0),0===s?s=n:t[l+1]=Qp(t[l+1],n),l=n;c&&(t[n+1]=Yp(t[n+1])),gy(t,u,n,!0),gy(t,u,n,!1),function CP(t,i,e,n,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof i&&Hs(a,i)>=0&&(e[n+1]=Kp(e[n+1]))}(i,u,t,n,a),o=xd(s,l),a?i.classBindings=o:i.styleBindings=o}(r,a,i,e,o,n)}}function Og(t,i,e,n,r){let a=null;const o=e.directiveEnd;let s=e.directiveStylingLast;for(-1===s?s=e.directiveStart:s++;s<o&&(a=i[s],n=kc(n,a.hostAttrs,r),a!==t);)s++;return null!==t&&(e.directiveStylingLast=s),n}function kc(t,i,e){const n=e?1:2;let r=-1;if(null!==i)for(let a=0;a<i.length;a++){const o=i[a];"number"==typeof o?r=o:r===n&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Tr(t,o,!!e||i[++a]))}return void 0===t?null:t}function Dy(t,i,e,n,r,a,o,s){if(!(3&i.type))return;const l=t.data,c=l[s+1];Ld(function z1(t){return 1==(1&t)}(c)?Ry(l,i,e,r,Qa(c),o):void 0)||(Ld(a)||function j1(t){return 2==(2&t)}(c)&&(a=Ry(l,null,e,r,s,o)),function Sk(t,i,e,n,r){const a=ti(t);if(i)r?a?t.addClass(e,n):e.classList.add(n):a?t.removeClass(e,n):e.classList.remove(n);else{let o=-1===n.indexOf("-")?void 0:Rr.DashCase;if(null==r)a?t.removeStyle(e,n,o):e.style.removeProperty(n);else{const s="string"==typeof r&&r.endsWith("!important");s&&(r=r.slice(0,-10),o|=Rr.Important),a?t.setStyle(e,n,r,o):e.style.setProperty(n,r,s?"important":"")}}}(n,o,id(er(),e),r,a))}function Ry(t,i,e,n,r,a){const o=null===i;let s;for(;r>0;){const l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let m=e[r+1];m===Pt&&(m=d?Rn:void 0);let v=d?wp(m,n):u===n?m:void 0;if(c&&!Ld(v)&&(v=wp(l,n)),Ld(v)&&(s=v,o))return s;const _=t[r+1];r=o?aa(_):Qa(_)}if(null!==i){let l=a?i.residualClasses:i.residualStyles;null!=l&&(s=wp(l,n))}return s}function Ld(t){return void 0!==t}function xy(t,i){return 0!=(t.flags&(i?16:32))}function g(t,i=""){const e=Re(),n=ln(),r=t+20,a=n.firstCreatePass?Xs(n,r,1,i,null):n.data[r],o=e[r]=Hp(e[11],i);Dd(n,e,o,a),Da(a,!1)}function nt(t){return Q("",t,""),nt}function Q(t,i,e){const n=Re(),r=tl(n,t,i,e);return r!==Pt&&Ka(n,er(),r),Q}function Wn(t,i,e,n,r){const a=Re(),o=function nl(t,i,e,n,r,a){const s=Qo(t,Wa(),e,r);return Xa(2),s?i+At(e)+n+At(r)+a:Pt}(a,t,i,e,n,r);return o!==Pt&&Ka(a,er(),o),Wn}function Ng(t,i,e,n,r,a,o){const s=Re(),l=function il(t,i,e,n,r,a,o,s){const c=Od(t,Wa(),e,r,o);return Xa(3),c?i+At(e)+n+At(r)+a+At(o)+s:Pt}(s,t,i,e,n,r,a,o);return l!==Pt&&Ka(s,er(),l),Ng}function Vg(t,i,e,n,r,a,o,s,l){const c=Re(),u=rl(c,t,i,e,n,r,a,o,s,l);return u!==Pt&&Ka(c,er(),u),Vg}function Fg(t,i,e){la(Tr,Oa,tl(Re(),t,i,e),!0)}function Do(t,i,e){const n=Re();return qi(n,Is(),i)&&xr(ln(),ni(),n,t,i,n[11],e,!0),Do}const Ko=void 0;var tE=["en",[["a","p"],["AM","PM"],Ko],[["AM","PM"],Ko,Ko],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ko,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ko,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ko,"{1} 'at' {0}",Ko],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eE(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let dl={};function nr(t){const i=function nE(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=$y(i);if(e)return e;const n=i.split("-")[0];if(e=$y(n),e)return e;if("en"===n)return tE;throw new Error(`Missing locale data for the locale "${t}".`)}function zy(t){return nr(t)[We.PluralCase]}function $y(t){return t in dl||(dl[t]=Sn.ng&&Sn.ng.common&&Sn.ng.common.locales&&Sn.ng.common.locales[t]),dl[t]}var We=(()=>((We=We||{})[We.LocaleId=0]="LocaleId",We[We.DayPeriodsFormat=1]="DayPeriodsFormat",We[We.DayPeriodsStandalone=2]="DayPeriodsStandalone",We[We.DaysFormat=3]="DaysFormat",We[We.DaysStandalone=4]="DaysStandalone",We[We.MonthsFormat=5]="MonthsFormat",We[We.MonthsStandalone=6]="MonthsStandalone",We[We.Eras=7]="Eras",We[We.FirstDayOfWeek=8]="FirstDayOfWeek",We[We.WeekendRange=9]="WeekendRange",We[We.DateFormat=10]="DateFormat",We[We.TimeFormat=11]="TimeFormat",We[We.DateTimeFormat=12]="DateTimeFormat",We[We.NumberSymbols=13]="NumberSymbols",We[We.NumberFormats=14]="NumberFormats",We[We.CurrencyCode=15]="CurrencyCode",We[We.CurrencySymbol=16]="CurrencySymbol",We[We.CurrencyName=17]="CurrencyName",We[We.Currencies=18]="Currencies",We[We.Directionality=19]="Directionality",We[We.PluralCase=20]="PluralCase",We[We.ExtraData=21]="ExtraData",We))();const iE=["zero","one","two","few","many"],Ud="en-US",Hd={marker:"element"},Gd={marker:"ICU"};var ii=(()=>((ii=ii||{})[ii.SHIFT=2]="SHIFT",ii[ii.APPEND_EAGERLY=1]="APPEND_EAGERLY",ii[ii.COMMENT=2]="COMMENT",ii))();let qy=Ud;function Wy(t,i,e){const n=i.insertBeforeIndex,r=Array.isArray(n)?n[0]:n;return null===r?k1(t,0,e):gi(e[r])}function Xy(t,i,e,n,r){const a=i.insertBeforeIndex;if(Array.isArray(a)){let o=n,s=null;if(3&i.type||(s=o,o=r),null!==o&&0==(2&i.flags))for(let l=1;l<a.length;l++)Yo(t,o,e[a[l]],s,!1)}}function Yy(t,i){if(t.push(i),t.length>1)for(let e=t.length-2;e>=0;e--){const n=t[e];Qy(n)||lE(n,i)&&null===cE(n)&&uE(n,i.index)}}function Qy(t){return!(64&t.type)}function lE(t,i){return Qy(i)||t.index>i.index}function cE(t){const i=t.insertBeforeIndex;return Array.isArray(i)?i[0]:i}function uE(t,i){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=i:(P1(Wy,Xy),t.insertBeforeIndex=i)}function Ac(t,i){const e=t.data[i];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function fE(t,i,e){const n=og(t,e,64,null,null);return Yy(i,n),n}function jd(t,i){const e=i[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function Ky(t){return t>>>17}function Zy(t){return(131070&t)>>>1}let Pc=0,Ec=0;function ew(t,i,e,n){const r=e[11];let o,a=null;for(let s=0;s<i.length;s++){const l=i[s];if("string"==typeof l){const c=i[++s];null===e[c]&&(e[c]=Hp(r,l))}else if("number"==typeof l)switch(1&l){case 0:const c=Ky(l);let u,d;if(null===a&&(a=c,o=Td(r,n)),c===a?(u=n,d=o):(u=null,d=gi(e[c])),null!==d){const y=Zy(l);Yo(r,d,e[y],u,!1);const T=Ac(t,y);if(null!==T&&"object"==typeof T){const C=jd(T,e);null!==C&&ew(t,T.create[C],e,e[T.anchorIdx])}}break;case 1:const v=i[++s],_=i[++s];ug(r,id(l>>>1,e),null,null,v,_,null)}else switch(l){case Gd:const c=i[++s],u=i[++s];null===e[u]&&$i(e[u]=uk(r,c),e);break;case Hd:const d=i[++s],m=i[++s];null===e[m]&&$i(e[m]=Gp(r,d,null),e)}}}function tw(t,i,e,n,r){for(let a=0;a<e.length;a++){const o=e[a],s=e[++a];if(o&r){let l="";for(let c=a+1;c<=a+s;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=At(i[n-u]);else{const d=u>>>2;switch(3&u){case 1:const m=e[++c],v=e[++c],_=t.data[d];"string"==typeof _?ug(i[11],i[d],null,_,m,l,v):xr(t,_,i,m,l,i[11],v,!1);break;case 0:const y=i[d];null!==y&&w1(i[11],y,l);break;case 2:bE(t,Ac(t,d),i,l);break;case 3:nw(t,Ac(t,d),n,i)}}}}else{const l=e[a+1];if(l>0&&3==(3&l)){const u=Ac(t,l>>>2);i[u.currentCaseLViewIndex]<0&&nw(t,u,n,i)}}a+=s}}function nw(t,i,e,n){let r=n[i.currentCaseLViewIndex];if(null!==r){let a=Pc;r<0&&(r=n[i.currentCaseLViewIndex]=~r,a=-1),tw(t,n,i.update[r],e,a)}}function bE(t,i,e,n){const r=function _E(t,i){let e=t.cases.indexOf(i);if(-1===e)switch(t.type){case 1:{const n=function rE(t,i){const e=zy(i)(parseInt(t,10)),n=iE[e];return void 0!==n?n:"other"}(i,function sE(){return qy}());e=t.cases.indexOf(n),-1===e&&"other"!==n&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(i,n);if(jd(i,e)!==r&&(iw(t,i,e),e[i.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const o=e[i.anchorIdx];o&&ew(t,i.create[r],e,o)}}function iw(t,i,e){let n=jd(i,e);if(null!==n){const r=i.remove[n];for(let a=0;a<r.length;a++){const o=r[a];if(o>0){const s=id(o,e);null!==s&&I1(e[11],s)}else iw(t,Ac(t,~o),e)}}}function yE(){const t=[];let e,n,i=-1;function a(s,l){i=0;const c=jd(s,l);n=null!==c?s.remove[c]:Rn}function o(){if(i<n.length){const s=n[i++];return s>0?e[s]:(t.push(i,n),a(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),i=t.pop(),o())}return function r(s,l){for(e=l;t.length;)t.pop();return a(s.value,l),o}}const zd=/\ufffd(\d+):?\d*\ufffd/gi,CE=/\ufffd(\d+)\ufffd/,aw=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,SE=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,TE=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,DE=/\uE500/g;function ow(t,i,e,n,r,a,o){const s=Ys(t,n,1,null);let l=s<<ii.SHIFT,c=ic();i===c&&(c=null),null===c&&(l|=ii.APPEND_EAGERLY),o&&(l|=ii.COMMENT,function ck(t){void 0===Fp&&(Fp=t())}(yE)),r.push(l,null===a?"":a);const u=og(t,s,o?32:1,null===a?"":a,null);Yy(e,u);const d=u.index;return Da(u,!1),null!==c&&i!==c&&function hE(t,i){let e=t.insertBeforeIndex;null===e?(P1(Wy,Xy),e=t.insertBeforeIndex=[null,i]):(function $a(t,i,e){t!=i&&Fn(e,t,i,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(i))}(c,d),u}function ME(t,i,e,n,r,a,o){const s=o.match(zd),l=ow(t,i,e,a,n,s?null:o,!1);s&&hl(r,o,l.index,null,0,null)}function hl(t,i,e,n,r,a){const o=t.length,s=o+1;t.push(null,null);const l=o+2,c=i.split(zd);let u=0;for(let d=0;d<c.length;d++){const m=c[d];if(1&d){const v=r+parseInt(m,10);t.push(-1-v),u|=sw(v)}else""!==m&&t.push(m)}return t.push(e<<2|(n?1:0)),n&&t.push(n,a),t[o]=u,t[s]=t.length-l,u}function sw(t){return 1<<Math.min(t,31)}function lw(t){let i,a,e="",n=0,r=!1;for(;null!==(i=SE.exec(t));)r?i[0]===`\ufffd/*${a}\ufffd`&&(n=i.index,r=!1):(e+=t.substring(n,i.index+i[0].length),a=i[1],r=!0);return e+=t.substr(n),e}function cw(t,i,e,n,r,a){let o=0;const s={type:r.type,currentCaseLViewIndex:Ys(t,i,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};(function VE(t,i,e){t.push(sw(i.mainBinding),2,-1-i.mainBinding,e<<2|2)})(e,r,a),function dE(t,i,e){const n=t.data[i];null===n?t.data[i]=e:n.value=e}(t,a,s);const l=r.values;for(let c=0;c<l.length;c++){const u=l[c],d=[];for(let m=0;m<u.length;m++){const v=u[m];if("string"!=typeof v){const _=d.push(v)-1;u[m]=`\x3c!--\ufffd${_}\ufffd--\x3e`}}o=OE(t,s,i,e,n,r.cases[c],u.join(""),d)|o}o&&function FE(t,i,e){t.push(i,1,e<<2|3)}(e,o,a)}function IE(t){const i=[],e=[];let n=1,r=0;const a=Bg(t=t.replace(aw,function(o,s,l){return n="select"===l?0:1,r=parseInt(s.substr(1),10),""}));for(let o=0;o<a.length;){let s=a[o++].trim();1===n&&(s=s.replace(/\s*(?:=)?(\w+)\s*/,"$1")),s.length&&i.push(s);const l=Bg(a[o++]);i.length>e.length&&e.push(l)}return{type:n,mainBinding:r,cases:i,values:e}}function Bg(t){if(!t)return[];let i=0;const e=[],n=[],r=/[{}]/g;let a;for(r.lastIndex=0;a=r.exec(t);){const s=a.index;if("}"==a[0]){if(e.pop(),0==e.length){const l=t.substring(i,s);aw.test(l)?n.push(IE(l)):n.push(l),i=s+1}}else{if(0==e.length){const l=t.substring(i,s);n.push(l),i=s+1}e.push("{")}}const o=t.substring(i);return n.push(o),n}function OE(t,i,e,n,r,a,o,s){const l=[],c=[],u=[];i.cases.push(a),i.create.push(l),i.remove.push(c),i.update.push(u);const m=e1(ip()).getInertBodyElement(o),v=Pp(m)||m;return v?uw(t,i,e,n,l,c,u,v,r,s,0):0}function uw(t,i,e,n,r,a,o,s,l,c,u){let d=0,m=s.firstChild;for(;m;){const v=Ys(t,e,1,null);switch(m.nodeType){case Node.ELEMENT_NODE:const _=m,y=_.tagName.toLowerCase();if(Mp.hasOwnProperty(y)){Lg(r,Hd,y,l,v),t.data[v]=y;const O=_.attributes;for(let j=0;j<O.length;j++){const G=O.item(j),K=G.name.toLowerCase();G.value.match(zd)?a1.hasOwnProperty(K)&&hl(o,G.value,v,G.name,0,kp[K]?mc:Ap[K]?t1:null):BE(r,v,G)}d=uw(t,i,e,n,r,a,o,m,v,c,u+1)|d,dw(a,v,u)}break;case Node.TEXT_NODE:const S=m.textContent||"",T=S.match(zd);Lg(r,null,T?"":S,l,v),dw(a,v,u),T&&(d=hl(o,S,v,null,0,null)|d);break;case Node.COMMENT_NODE:const C=CE.exec(m.textContent||"");if(C){const j=c[parseInt(C[1],10)];Lg(r,Gd,"",l,v),cw(t,e,n,l,j,v),NE(a,v,u)}}m=m.nextSibling}return d}function dw(t,i,e){0===e&&t.push(i)}function NE(t,i,e){0===e&&(t.push(~i),t.push(i))}function Lg(t,i,e,n,r){null!==i&&t.push(i),t.push(e,r,function pE(t,i,e){return t|i<<17|e<<1}(0,n,r))}function BE(t,i,e){t.push(i<<1|1,e.name,e.value)}function fw(t,i,e=-1){const n=ln(),r=Re(),a=20+t,o=_o(n.consts,i),s=ic();n.firstCreatePass&&function xE(t,i,e,n,r,a){const o=ic(),s=[],l=[],c=[[]];r=function EE(t,i){if(function PE(t){return-1===t}(i))return lw(t);{const e=t.indexOf(`:${i}\ufffd`)+2+i.toString().length,n=t.search(new RegExp(`\ufffd\\/\\*\\d+:${i}\ufffd`));return lw(t.substring(e,n))}}(r,a);const u=function RE(t){return t.replace(DE," ")}(r).split(TE);for(let d=0;d<u.length;d++){let m=u[d];if(0==(1&d)){const v=Bg(m);for(let _=0;_<v.length;_++){let y=v[_];if(0==(1&_)){const S=y;""!==S&&ME(t,o,c[0],s,l,e,S)}else{const S=y;if("object"!=typeof S)throw new Error(`Unable to parse ICU expression in "${r}" message.`);cw(t,e,l,i,S,ow(t,o,c[0],e,s,"",!0).index)}}}else{const v=47===m.charCodeAt(0),y=(m.charCodeAt(v?1:0),20+Number.parseInt(m.substring(v?2:1)));if(v)c.shift(),Da(ic(),!1);else{const S=fE(t,c[0],y);c.unshift([]),Da(S,!0)}}}t.data[n]={create:s,update:l}}(n,null===s?0:s.index,r,a,o,e);const l=n.data[a],u=D1(n,s===r[6]?null:s,r);(function vE(t,i,e,n){const r=t[11];for(let a=0;a<i.length;a++){const o=i[a++],s=i[a],l=(o&ii.COMMENT)===ii.COMMENT,c=(o&ii.APPEND_EAGERLY)===ii.APPEND_EAGERLY,u=o>>>ii.SHIFT;let d=t[u];null===d&&(d=t[u]=l?r.createComment(s):Hp(r,s)),c&&null!==e&&Yo(r,e,d,n,!1)}})(r,l.create,u,s&&8&s.type?r[s.index]:null),bb(!0)}function Za(t,i,e){fw(t,i,e),function pw(){bb(!1)}()}function $d(t){return function gE(t){t&&(Pc|=1<<Math.min(Ec,31)),Ec++}(qi(Re(),Is(),t)),$d}function Hg(t,i,e,n,r){if(t=Ut(t),Array.isArray(t))for(let a=0;a<t.length;a++)Hg(t[a],i,e,n,r);else{const a=ln(),o=Re();let s=Zs(t)?t:Ut(t.provide),l=S_(t);const c=Ci(),u=1048575&c.providerIndexes,d=c.directiveStart,m=c.providerIndexes>>20;if(Zs(t)||!t.multi){const v=new rc(l,r,A),_=jg(s,i,r?u:u+m,d);-1===_?(gd(oc(c,o),a,s),Gg(a,t,i.length),i.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(v),o.push(v)):(e[_]=v,o[_]=v)}else{const v=jg(s,i,u+m,d),_=jg(s,i,u,u+m),y=v>=0&&e[v],S=_>=0&&e[_];if(r&&!S||!r&&!y){gd(oc(c,o),a,s);const T=function ZE(t,i,e,n,r){const a=new rc(t,e,A);return a.multi=[],a.index=i,a.componentProviders=0,gw(a,r,n&&!e),a}(r?KE:QE,e.length,r,n,l);!r&&S&&(e[_].providerFactory=T),Gg(a,t,i.length,0),i.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(T),o.push(T)}else Gg(a,t,v>-1?v:_,gw(e[r?_:v],l,!r&&n));!r&&n&&S&&e[_].componentProviders++}}}function Gg(t,i,e,n){const r=Zs(i),a=function MA(t){return!!t.useClass}(i);if(r||a){const l=(a?Ut(i.useClass):i).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&i.multi){const u=c.indexOf(e);-1===u?c.push(e,[n,l]):c[u+1].push(n,l)}else c.push(e,l)}}}function gw(t,i,e){return e&&t.componentProviders++,t.multi.push(i)-1}function jg(t,i,e,n){for(let r=e;r<n;r++)if(i[r]===t)return r;return-1}function QE(t,i,e,n){return zg(this.multi,[])}function KE(t,i,e,n){const r=this.multi;let a;if(this.providerFactory){const o=this.providerFactory.componentProviders,s=sc(e,e[1],this.providerFactory.index,n);a=s.slice(0,o),zg(r,a);for(let l=o;l<s.length;l++)a.push(s[l])}else a=[],zg(r,a);return a}function zg(t,i){for(let e=0;e<t.length;e++)i.push((0,t[e])());return i}function xn(t,i=[]){return e=>{e.providersResolver=(n,r)=>function YE(t,i,e){const n=ln();if(n.firstCreatePass){const r=ia(t);Hg(e,n.data,n.blueprint,r,!0),Hg(i,n.data,n.blueprint,r,!1)}}(n,r?r(t):t,i)}}class mw{}class tI{resolveComponentFactory(i){throw function eI(t){const i=Error(`No component factory found for ${yn(t)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=t,i}(i)}}let Zo=(()=>{class t{}return t.NULL=new tI,t})();function nI(){return fl(Ci(),Re())}function fl(t,i){return new bn(Hr(t,i))}let bn=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=nI,t})();function iI(t){return t instanceof bn?t.nativeElement:t}class $g{}let zr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function aI(){const t=Re(),e=Sr(Ci().index,t);return function rI(t){return t[11]}(Ta(e)?e:t)}(),t})(),oI=(()=>{class t{}return t.\u0275prov=tt({token:t,providedIn:"root",factory:()=>null}),t})();class Oc{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const sI=new Oc("13.2.3"),qg={};function qd(t,i,e,n,r=!1){for(;null!==e;){const a=i[e.index];if(null!==a&&n.push(gi(a)),na(a))for(let s=10;s<a.length;s++){const l=a[s],c=l[1].firstChild;null!==c&&qd(l[1],l,c,n)}const o=e.type;if(8&o)qd(t,i,e.child,n);else if(32&o){const s=Bp(e,i);let l;for(;l=s();)n.push(l)}else if(16&o){const s=E1(i,e);if(Array.isArray(s))n.push(...s);else{const l=yc(i[16]);qd(l[1],l,s,n,!0)}}e=r?e.projectionNext:e.next}return n}class Nc{constructor(i,e){this._lView=i,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,e=i[1];return qd(e,i,e.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(na(i)){const e=i[8],n=e?e.indexOf(this):-1;n>-1&&(jp(i,n),vd(e,n))}this._attachedToViewContainer=!1}S1(this._lView[1],this._lView)}onDestroy(i){r_(this._lView[1],this._lView,null,i)}markForCheck(){hg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){pg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function vA(t,i,e){ad(!0);try{pg(t,i,e)}finally{ad(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new sn(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fk(t,i){wc(t,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new sn(902,"");this._appRef=i}}class lI extends Nc{constructor(i){super(i),this._view=i}detectChanges(){f_(this._view)}checkNoChanges(){!function bA(t){ad(!0);try{f_(t)}finally{ad(!1)}}(this._view)}get context(){return null}}class bw extends Zo{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const e=Gi(i);return new Wg(e,this.ngModule)}}function _w(t){const i=[];for(let e in t)t.hasOwnProperty(e)&&i.push({propName:t[e],templateName:e});return i}const uI=new qt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>g1});class Wg extends mw{constructor(i,e){super(),this.componentDef=i,this.ngModule=e,this.componentType=i.type,this.selector=function Ik(t){return t.map(Ek).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return _w(this.componentDef.inputs)}get outputs(){return _w(this.componentDef.outputs)}create(i,e,n,r){const a=(r=r||this.ngModule)?function dI(t,i){return{get:(e,n,r)=>{const a=t.get(e,qg,r);return a!==qg||n===qg?a:i.get(e,n,r)}}}(i,r.injector):i,o=a.get($g,hb),s=a.get(oI,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function i_(t,i,e){if(ti(t))return t.selectRootElement(i,e===Sa.ShadowDom);let n="string"==typeof i?t.querySelector(i):i;return n.textContent="",n}(l,n,this.componentDef.encapsulation):Gp(o.createRenderer(null,this.componentDef),c,function cI(t){const i=t.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(c)),d=this.componentDef.onPush?576:528,m=function N_(t,i){return{components:[],scheduler:t||g1,clean:_A,playerHandler:i||null,flags:0}}(),v=Ad(0,null,null,1,0,null,null,null,null,null),_=Cc(null,v,m,d,null,null,o,l,s,a);let y,S;od(_);try{const T=function I_(t,i,e,n,r,a){const o=e[1];e[20]=t;const l=Xs(o,20,2,"#host",null),c=l.mergedAttrs=i.hostAttrs;null!==c&&(Ed(l,c,!0),null!==t&&(dd(r,t,c),null!==l.classes&&Xp(r,t,l.classes),null!==l.styles&&N1(r,t,l.styles)));const u=n.createRenderer(t,i),d=Cc(e,t_(i),null,i.onPush?64:16,e[20],l,n,u,a||null,null);return o.firstCreatePass&&(gd(oc(l,e),o,i.type),c_(o,l),u_(l,e.length,1)),Pd(e,d),e[20]=d}(u,this.componentDef,_,o,l);if(u)if(n)dd(l,u,["ng-version",sI.full]);else{const{attrs:C,classes:O}=function Ok(t){const i=[],e=[];let n=1,r=2;for(;n<t.length;){let a=t[n];if("string"==typeof a)2===r?""!==a&&i.push(a,t[++n]):8===r&&e.push(a);else{if(!ra(r))break;r=a}n++}return{attrs:i,classes:e}}(this.componentDef.selectors[0]);C&&dd(l,u,C),O&&O.length>0&&Xp(l,u,O.join(" "))}if(S=rp(v,20),void 0!==e){const C=S.projection=[];for(let O=0;O<this.ngContentSelectors.length;O++){const j=e[O];C.push(null!=j?Array.from(j):null)}}y=function O_(t,i,e,n,r){const a=e[1],o=function tA(t,i,e){const n=Ci();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),d_(t,n,i,Ys(t,i,1,null),e));const r=sc(i,t,n.directiveStart,n);$i(r,i);const a=Hr(n,i);return a&&$i(a,i),r}(a,e,i);if(n.components.push(o),t[8]=o,r&&r.forEach(l=>l(o,i)),i.contentQueries){const l=Ci();i.contentQueries(1,o,l.directiveStart)}const s=Ci();return!a.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(yo(s.index),s_(e[1],s,0,s.directiveStart,s.directiveEnd,i),l_(i,o)),o}(T,this.componentDef,_,m,[LA]),Sc(v,_,null)}finally{sd()}return new fI(this.componentType,y,fl(S,_),_,S)}}class fI extends class JE{}{constructor(i,e,n,r,a){super(),this.location=n,this._rootLView=r,this._tNode=a,this.instance=e,this.hostView=this.changeDetectorRef=new lI(r),this.componentType=i}get injector(){return new Vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class Ja{}class yw{}const pl=new Map;class Sw extends Ja{constructor(i,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new bw(this);const n=Br(i);this._bootstrapComponents=Aa(n.bootstrap),this._r3Injector=C_(i,e,[{provide:Ja,useValue:this},{provide:Zo,useValue:this.componentFactoryResolver}],yn(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,e=ci.THROW_IF_NOT_FOUND,n=It.Default){return i===ci||i===Ja||i===mg?this:this._r3Injector.get(i,e,n)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Xg extends yw{constructor(i){super(),this.moduleType=i,null!==Br(i)&&function gI(t){const i=new Set;!function e(n){const r=Br(n,!0),a=r.id;null!==a&&(function ww(t,i,e){if(i&&i!==e)throw new Error(`Duplicate module registered for ${t} - ${yn(i)} vs ${yn(i.name)}`)}(a,pl.get(a),n),pl.set(a,n));const o=Aa(r.imports);for(const s of o)i.has(s)||(i.add(s),e(s))}(t)}(i)}create(i){return new Sw(this.moduleType,i)}}function Yg(t,i,e){const n=Ji()+t,r=Re();return r[n]===Pt?Ea(r,n,e?i.call(e):i()):Rc(r,n)}function ri(t,i,e,n){return Dw(Re(),Ji(),t,i,e,n)}function Jo(t,i,e,n,r){return Rw(Re(),Ji(),t,i,e,n,r)}function Vc(t,i){const e=t[i];return e===Pt?void 0:e}function Dw(t,i,e,n,r,a){const o=i+e;return qi(t,o,r)?Ea(t,o+1,a?n.call(a,r):n(r)):Vc(t,o+1)}function Rw(t,i,e,n,r,a,o){const s=i+e;return Qo(t,s,r,a)?Ea(t,s+2,o?n.call(o,r,a):n(r,a)):Vc(t,s+2)}function Vt(t,i){const e=ln();let n;const r=t+20;e.firstCreatePass?(n=function wI(t,i){if(i)for(let e=i.length-1;e>=0;e--){const n=i[e];if(t===n.name)return n}}(i,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const a=n.factory||(n.factory=qo(n.type)),o=mo(A);try{const s=fd(!1),l=a();return fd(s),function KA(t,i,e,n){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),i[e]=n}(e,Re(),r,l),l}finally{mo(o)}}function Wd(t,i,e){const n=t+20,r=Re(),a=Es(r,n);return Bc(r,n)?Dw(r,Ji(),i,a.transform,e,a):a.transform(e)}function rn(t,i,e,n){const r=t+20,a=Re(),o=Es(a,r);return Bc(a,r)?Rw(a,Ji(),i,o.transform,e,n,o):o.transform(e,n)}function Fc(t,i,e,n,r){const a=t+20,o=Re(),s=Es(o,a);return Bc(o,a)?function xw(t,i,e,n,r,a,o,s){const l=i+e;return Od(t,l,r,a,o)?Ea(t,l+3,s?n.call(s,r,a,o):n(r,a,o)):Vc(t,l+3)}(o,Ji(),i,s.transform,e,n,r,s):s.transform(e,n,r)}function Bc(t,i){return t[1].data[i].pure}function Kg(t){return i=>{setTimeout(t,void 0,i)}}const rt=class TI extends _e{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,e,n){var r,a,o;let s=i,l=e||(()=>null),c=n;if(i&&"object"==typeof i){const d=i;s=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(a=d.error)||void 0===a?void 0:a.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=Kg(l),s&&(s=Kg(s)),c&&(c=Kg(c)));const u=super.subscribe({next:s,error:l,complete:c});return i instanceof pe&&i.add(u),u}};function DI(){return this._results[Js()]()}class Zg{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Js(),n=Zg.prototype;n[e]||(n[e]=DI)}get changes(){return this._changes||(this._changes=new rt)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,e){return this._results.reduce(i,e)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,e){const n=this;n.dirty=!1;const r=Gr(i);(this._changesDetected=!function zx(t,i,e){if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],a=i[n];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Un=(()=>{class t{}return t.__NG_ELEMENT_ID__=MI,t})();const RI=Un,xI=class extends RI{constructor(i,e,n){super(),this._declarationLView=i,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(i){const e=this._declarationTContainer.tViews,n=Cc(this._declarationLView,e,i,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(n[19]=a.createEmbeddedView(e)),Sc(e,n,i),new Nc(n)}};function MI(){return Xd(Ci(),Re())}function Xd(t,i){return 4&t.type?new xI(i,t,fl(t,i)):null}let $r=(()=>{class t{}return t.__NG_ELEMENT_ID__=kI,t})();function kI(){return Ew(Ci(),Re())}const AI=$r,Aw=class extends AI{constructor(i,e,n){super(),this._lContainer=i,this._hostTNode=e,this._hostLView=n}get element(){return fl(this._hostTNode,this._hostLView)}get injector(){return new Vs(this._hostTNode,this._hostLView)}get parentInjector(){const i=pd(this._hostTNode,this._hostLView);if(Mb(i)){const e=Ns(i,this._hostLView),n=Os(i);return new Vs(e[1].data[n+8],e)}return new Vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const e=Pw(this._lContainer);return null!==e&&e[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,e,n){const r=i.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(i,e,n,r,a){const o=i&&!function cc(t){return"function"==typeof t}(i);let s;if(o)s=e;else{const d=e||{};s=d.index,n=d.injector,r=d.projectableNodes,a=d.ngModuleRef}const l=o?i:new Wg(Gi(i)),c=n||this.parentInjector;if(!a&&null==l.ngModule){const m=(o?c:this.parentInjector).get(Ja,null);m&&(a=m)}const u=l.create(c,r,void 0,a);return this.insert(u.hostView,s),u}insert(i,e){const n=i._lView,r=n[1];if(function dx(t){return na(t[3])}(n)){const u=this.indexOf(i);if(-1!==u)this.detach(u);else{const d=n[3],m=new Aw(d,d[6],d[3]);m.detach(m.indexOf(i))}}const a=this._adjustIndex(e),o=this._lContainer;!function gk(t,i,e,n){const r=10+n,a=e.length;n>0&&(e[r-1][4]=i),n<a-10?(i[4]=e[r],Bb(e,10+n,i)):(e.push(i),i[4]=null),i[3]=e;const o=i[17];null!==o&&e!==o&&function mk(t,i){const e=t[9];i[16]!==i[3][3][16]&&(t[2]=!0),null===e?t[9]=[i]:e.push(i)}(o,i);const s=i[19];null!==s&&s.insertView(t),i[2]|=128}(r,n,o,a);const s=qp(a,o),l=n[11],c=Td(l,o[7]);return null!==c&&function hk(t,i,e,n,r,a){n[0]=r,n[6]=i,wc(t,n,e,1,r,a)}(r,o[6],l,n,c,s),i.attachToViewContainerRef(),Bb(Jg(o),a,i),i}move(i,e){return this.insert(i,e)}indexOf(i){const e=Pw(this._lContainer);return null!==e?e.indexOf(i):-1}remove(i){const e=this._adjustIndex(i,-1),n=jp(this._lContainer,e);n&&(vd(Jg(this._lContainer),e),S1(n[1],n))}detach(i){const e=this._adjustIndex(i,-1),n=jp(this._lContainer,e);return n&&null!=vd(Jg(this._lContainer),e)?new Nc(n):null}_adjustIndex(i,e=0){return null==i?this.length+e:i}};function Pw(t){return t[8]}function Jg(t){return t[8]||(t[8]=[])}function Ew(t,i){let e;const n=i[t.index];if(na(n))e=n;else{let r;if(8&t.type)r=gi(n);else{const a=i[11];r=a.createComment("");const o=Hr(t,i);Yo(a,Td(a,o),r,function yk(t,i){return ti(t)?t.nextSibling(i):i.nextSibling}(a,o),!1)}i[t.index]=e=h_(n,i,r,t),Pd(i,e)}return new Aw(e,t,i)}class em{constructor(i){this.queryList=i,this.matches=null}clone(){return new em(this.queryList)}setDirty(){this.queryList.setDirty()}}class tm{constructor(i=[]){this.queries=i}createEmbeddedView(i){const e=i.queries;if(null!==e){const n=null!==i.contentQueries?i.contentQueries[0]:e.length,r=[];for(let a=0;a<n;a++){const o=e.getByIndex(a);r.push(this.queries[o.indexInDeclarationView].clone())}return new tm(r)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let e=0;e<this.queries.length;e++)null!==Fw(i,e).matches&&this.queries[e].setDirty()}}class Iw{constructor(i,e,n=null){this.predicate=i,this.flags=e,this.read=n}}class nm{constructor(i=[]){this.queries=i}elementStart(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(i,e)}elementEnd(i){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(i)}embeddedTView(i){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,a=this.getByIndex(n).embeddedTView(i,r);a&&(a.indexInDeclarationView=n,null!==e?e.push(a):e=[a])}return null!==e?new nm(e):null}template(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(i,e)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class im{constructor(i,e=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(i,e){this.isApplyingToNode(e)&&this.matchTNode(i,e)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,e){this.elementStart(i,e)}embeddedTView(i,e){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,e),new im(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=i.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(i,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const a=n[r];this.matchTNodeWithReadOption(i,e,II(e,a)),this.matchTNodeWithReadOption(i,e,md(e,i,a,!1,!1))}else n===Un?4&e.type&&this.matchTNodeWithReadOption(i,e,-1):this.matchTNodeWithReadOption(i,e,md(e,i,n,!1,!1))}matchTNodeWithReadOption(i,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===bn||r===$r||r===Un&&4&e.type)this.addMatch(e.index,-2);else{const a=md(e,i,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,n)}}addMatch(i,e){null===this.matches?this.matches=[i,e]:this.matches.push(i,e)}}function II(t,i){const e=t.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===i)return e[n+1];return null}function NI(t,i,e,n){return-1===e?function OI(t,i){return 11&t.type?fl(t,i):4&t.type?Xd(t,i):null}(i,t):-2===e?function VI(t,i,e){return e===bn?fl(i,t):e===Un?Xd(i,t):e===$r?Ew(i,t):void 0}(t,i,n):sc(t,t[1],e,i)}function Ow(t,i,e,n){const r=i[19].queries[n];if(null===r.matches){const a=t.data,o=e.matches,s=[];for(let l=0;l<o.length;l+=2){const c=o[l];s.push(c<0?null:NI(i,a[c],o[l+1],e.metadata.read))}r.matches=s}return r.matches}function rm(t,i,e,n){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const o=Ow(t,i,r,e);for(let s=0;s<a.length;s+=2){const l=a[s];if(l>0)n.push(o[s/2]);else{const c=a[s+1],u=i[-l];for(let d=10;d<u.length;d++){const m=u[d];m[17]===m[3]&&rm(m[1],m,c,n)}if(null!==u[9]){const d=u[9];for(let m=0;m<d.length;m++){const v=d[m];rm(v[1],v,c,n)}}}}}return n}function fn(t){const i=Re(),e=ln(),n=_b();dp(n+1);const r=Fw(e,n);if(t.dirty&&fb(i)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?rm(e,i,n,[]):Ow(e,i,r,n);t.reset(a,iI),t.notifyOnChanges()}return!0}return!1}function ca(t,i,e){const n=ln();n.firstCreatePass&&(Vw(n,new Iw(t,i,e),-1),2==(2&i)&&(n.staticViewQueries=!0)),Nw(n,Re(),i)}function ui(t,i,e,n){const r=ln();if(r.firstCreatePass){const a=Ci();Vw(r,new Iw(i,e,n),a.index),function BI(t,i){const e=t.contentQueries||(t.contentQueries=[]);i!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,i)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}Nw(r,Re(),e)}function pn(){return function FI(t,i){return t[19].queries[i].queryList}(Re(),_b())}function Nw(t,i,e){const n=new Zg(4==(4&e));r_(t,i,n,n.destroy),null===i[19]&&(i[19]=new tm),i[19].queries.push(new em(n))}function Vw(t,i,e){null===t.queries&&(t.queries=new nm),t.queries.track(new im(i,e))}function Fw(t,i){return t.queries.getByIndex(i)}function ot(t,i){return Xd(t,i)}function Kd(...t){}const Zd=new qt("Application Initializer");let ml=(()=>{class t{constructor(e){this.appInits=e,this.resolve=Kd,this.reject=Kd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const a=this.appInits[r]();if(xc(a))e.push(a);else if(Eg(a)){const o=new Promise((s,l)=>{a.subscribe({complete:s,error:l})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Le(Zd,8))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();const Uc=new qt("AppId"),nO={provide:Uc,useFactory:function tO(){return`${um()}${um()}${um()}`},deps:[]};function um(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eC=new qt("Platform Initializer"),Jd=new qt("Platform ID"),tC=new qt("appBootstrapListener");let nC=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();const Ro=new qt("LocaleId"),iC=new qt("DefaultCurrencyCode");class iO{constructor(i,e){this.ngModuleFactory=i,this.componentFactories=e}}let eh=(()=>{class t{compileModuleSync(e){return new Xg(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),a=Aa(Br(e).declarations).reduce((o,s)=>{const l=Gi(s);return l&&o.push(new Wg(l)),o},[]);return new iO(n,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();const aO=(()=>Promise.resolve(0))();function dm(t){"undefined"==typeof Zone?aO.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Mn{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rt(!1),this.onMicrotaskEmpty=new rt(!1),this.onStable=new rt(!1),this.onError=new rt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function oO(){let t=Sn.requestAnimationFrame,i=Sn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&i){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const n=i[Zone.__symbol__("OriginalDelegate")];n&&(i=n)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function cO(t){const i=()=>{!function lO(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Sn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,fm(t),t.isCheckStableRunning=!0,hm(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),fm(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,a,o,s)=>{try{return rC(t),e.invokeTask(r,a,o,s)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&i(),aC(t)}},onInvoke:(e,n,r,a,o,s,l)=>{try{return rC(t),e.invoke(r,a,o,s,l)}finally{t.shouldCoalesceRunChangeDetection&&i(),aC(t)}},onHasTask:(e,n,r,a)=>{e.hasTask(r,a),n===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,fm(t),hm(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,n,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Mn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,e,n){return this._inner.run(i,e,n)}runTask(i,e,n,r){const a=this._inner,o=a.scheduleEventTask("NgZoneEvent: "+r,i,sO,Kd,Kd);try{return a.runTask(o,e,n)}finally{a.cancelTask(o)}}runGuarded(i,e,n){return this._inner.runGuarded(i,e,n)}runOutsideAngular(i){return this._outer.run(i)}}const sO={};function hm(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fm(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function rC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function aC(t){t._nesting--,hm(t)}class uO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rt,this.onMicrotaskEmpty=new rt,this.onStable=new rt,this.onError=new rt}run(i,e,n){return i.apply(e,n)}runGuarded(i,e,n){return i.apply(e,n)}runOutsideAngular(i){return i()}runTask(i,e,n,r){return i.apply(e,n)}}let pm=(()=>{class t{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mn.assertNotInAngularZone(),dm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dm(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let a=-1;n&&n>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==a),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Le(Mn))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})(),oC=(()=>{class t{constructor(){this._applications=new Map,gm.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return gm.findTestabilityInTree(this,e,n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();class dO{addToWindow(i){}findTestabilityInTree(i,e,n){return null}}let ua,gm=new dO;const sC=new qt("AllowMultipleToken");class lC{constructor(i,e){this.name=i,this.token=e}}function cC(t,i,e=[]){const n=`Platform: ${i}`,r=new qt(n);return(a=[])=>{let o=uC();if(!o||o.injector.get(sC,!1))if(t)t(e.concat(a).concat({provide:r,useValue:!0}));else{const s=e.concat(a).concat({provide:r,useValue:!0},{provide:vg,useValue:"platform"});!function gO(t){if(ua&&!ua.destroyed&&!ua.injector.get(sC,!1))throw new sn(400,"");ua=t.get(dC);const i=t.get(eC,null);i&&i.forEach(e=>e())}(ci.create({providers:s,name:n}))}return function mO(t){const i=uC();if(!i)throw new sn(401,"");return i}()}}function uC(){return ua&&!ua.destroyed?ua:null}let dC=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const s=function vO(t,i){let e;return e="noop"===t?new uO:("zone.js"===t?void 0:t)||new Mn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),e}(n?n.ngZone:void 0,{ngZoneEventCoalescing:n&&n.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:n&&n.ngZoneRunCoalescing||!1}),l=[{provide:Mn,useValue:s}];return s.run(()=>{const c=ci.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),d=u.injector.get($s,null);if(!d)throw new sn(402,"");return s.runOutsideAngular(()=>{const m=s.onError.subscribe({next:v=>{d.handleError(v)}});u.onDestroy(()=>{mm(this._modules,u),m.unsubscribe()})}),function bO(t,i,e){try{const n=e();return xc(n)?n.catch(r=>{throw i.runOutsideAngular(()=>t.handleError(r)),r}):n}catch(n){throw i.runOutsideAngular(()=>t.handleError(n)),n}}(d,s,()=>{const m=u.injector.get(ml);return m.runInitializers(),m.donePromise.then(()=>(function oE(t){(function wr(t,i){null==t&&Fn(i,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(qy=t.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Ro,Ud)||Ud),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,n=[]){const r=hC({},n);return function fO(t,i,e){const n=new Xg(e);return Promise.resolve(n)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const n=e.injector.get(es);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new sn(403,"");e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new sn(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Le(ci))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();function hC(t,i){return Array.isArray(i)?i.reduce(hC,t):Object.assign(Object.assign({},t),i)}let es=(()=>{class t{constructor(e,n,r,a,o){this._zone=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Be(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Be(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Mn.assertNotInAngularZone(),dm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Mn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=Q0(s,l.pipe(K0()))}bootstrap(e,n){if(!this._initStatus.done)throw new sn(405,"");let r;r=e instanceof mw?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const a=function pO(t){return t.isBoundToModule}(r)?void 0:this._injector.get(Ja),s=r.create(ci.NULL,[],n||r.selector,a),l=s.location.nativeElement,c=s.injector.get(pm,null),u=c&&s.injector.get(oC);return c&&u&&u.registerApplication(l,c),s.onDestroy(()=>{this.detachView(s.hostView),mm(this.components,s),u&&u.unregisterApplication(l)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new sn(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;mm(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(tC,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Le(Mn),Le(ci),Le($s),Le(Zo),Le(ml))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();function mm(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}let pC=!0,Mr=(()=>{class t{}return t.__NG_ELEMENT_ID__=wO,t})();function wO(t){return function CO(t,i,e){if(td(t)&&!e){const n=Sr(t.index,i);return new Nc(n,n)}return 47&t.type?new Nc(i[16],i):null}(Ci(),Re(),16==(16&t))}class _C{constructor(){}supports(i){return Dc(i)}create(i){return new MO(i)}}const xO=(t,i)=>i;class MO{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||xO}forEachItem(i){let e;for(e=this._itHead;null!==e;e=e._next)i(e)}forEachOperation(i){let e=this._itHead,n=this._removalsHead,r=0,a=null;for(;e||n;){const o=!n||e&&e.currentIndex<wC(n,r,a)?e:n,s=wC(o,r,a),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{a||(a=[]);const c=s-r,u=l-r;if(c!=u){for(let m=0;m<c;m++){const v=m<a.length?a[m]:a[m]=0,_=v+m;u<=_&&_<c&&(a[m]=v+1)}a[o.previousIndex]=u-c}}s!==l&&i(o,s,l)}}forEachPreviousItem(i){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)i(e)}forEachMovedItem(i){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)i(e)}forEachIdentityChange(i){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)i(e)}diff(i){if(null==i&&(i=[]),!Dc(i))throw new sn(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let r,a,o,e=this._itHead,n=!1;if(Array.isArray(i)){this.length=i.length;for(let s=0;s<this.length;s++)a=i[s],o=this._trackByFn(s,a),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,s),n=!0),e=e._next}else r=0,function YA(t,i){if(Array.isArray(t))for(let e=0;e<t.length;e++)i(t[e]);else{const e=t[Js()]();let n;for(;!(n=e.next()).done;)i(n.value)}}(i,s=>{o=this._trackByFn(r,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,r)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,e,n,r){let a;return null===i?a=this._itTail:(a=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._reinsertAfter(i,a,r)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._moveAfter(i,a,r)):i=this._addAfter(new kO(e,n),a,r),i}_verifyReinsertion(i,e,n,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==a?i=this._reinsertAfter(a,i._prev,r):i.currentIndex!=r&&(i.currentIndex=r,this._addToMoves(i,r)),i}_truncate(i){for(;null!==i;){const e=i._next;this._addToRemovals(this._unlink(i)),i=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const r=i._prevRemoved,a=i._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(i,e,n),this._addToMoves(i,n),i}_moveAfter(i,e,n){return this._unlink(i),this._insertAfter(i,e,n),this._addToMoves(i,n),i}_addAfter(i,e,n){return this._insertAfter(i,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,e,n){const r=null===e?this._itHead:e._next;return i._next=r,i._prev=e,null===r?this._itTail=i:r._prev=i,null===e?this._itHead=i:e._next=i,null===this._linkedRecords&&(this._linkedRecords=new yC),this._linkedRecords.put(i),i.currentIndex=n,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const e=i._prev,n=i._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,i}_addToMoves(i,e){return i.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yC),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,e){return i.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class kO{constructor(i,e){this.item=i,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AO{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,i))return n;return null}remove(i){const e=i._prevDup,n=i._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class yC{constructor(){this.map=new Map}put(i){const e=i.trackById;let n=this.map.get(e);n||(n=new AO,this.map.set(e,n)),n.add(i)}get(i,e){const r=this.map.get(i);return r?r.get(i,e):null}remove(i){const e=i.trackById;return this.map.get(e).remove(i)&&this.map.delete(e),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wC(t,i,e){const n=t.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+i+r}class CC{constructor(){}supports(i){return i instanceof Map||Sg(i)}create(){return new PO}}class PO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let e;for(e=this._mapHead;null!==e;e=e._next)i(e)}forEachPreviousItem(i){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)i(e)}forEachChangedItem(i){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)i(e)}diff(i){if(i){if(!(i instanceof Map||Sg(i)))throw new sn(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(i,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const a=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,a)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,e){if(i){const n=i._prev;return e._next=i,e._prev=n,i._prev=e,n&&(n._next=e),i===this._mapHead&&(this._mapHead=e),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(i,e){if(this._records.has(i)){const r=this._records.get(i);this._maybeAddToChanges(r,e);const a=r._prev,o=r._next;return a&&(a._next=o),o&&(o._prev=a),r._next=null,r._prev=null,r}const n=new EO(i);return this._records.set(i,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,e){Object.is(e,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=e,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,e){i instanceof Map?i.forEach(e):Object.keys(i).forEach(n=>e(i[n],n))}}class EO{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function SC(){return new Hc([new _C])}let Hc=(()=>{class t{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||SC()),deps:[[t,new Gs,new xa]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new sn(901,"")}}return t.\u0275prov=tt({token:t,providedIn:"root",factory:SC}),t})();function TC(){return new vl([new CC])}let vl=(()=>{class t{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||TC()),deps:[[t,new Gs,new xa]]}}find(e){const n=this.factories.find(a=>a.supports(e));if(n)return n;throw new sn(901,"")}}return t.\u0275prov=tt({token:t,providedIn:"root",factory:TC}),t})();const IO=[new CC],NO=new Hc([new _C]),VO=new vl(IO),FO=cC(null,"core",[{provide:Jd,useValue:"unknown"},{provide:dC,deps:[ci]},{provide:oC,deps:[]},{provide:nC,deps:[]}]),GO=[{provide:es,useClass:es,deps:[Mn,ci,$s,Zo,ml]},{provide:uI,deps:[Mn],useFactory:function jO(t){let i=[];return t.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(e){i.push(e)}}},{provide:ml,useClass:ml,deps:[[new xa,Zd]]},{provide:eh,useClass:eh,deps:[]},nO,{provide:Hc,useFactory:function BO(){return NO},deps:[]},{provide:vl,useFactory:function LO(){return VO},deps:[]},{provide:Ro,useFactory:function UO(t){return t||function HO(){return"undefined"!=typeof $localize&&$localize.locale||Ud}()},deps:[[new pc(Ro),new xa,new Gs]]},{provide:iC,useValue:"USD"}];let zO=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Le(es))},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({providers:GO}),t})(),ih=null;function Na(){return ih}const mi=new qt("DocumentToken");let ns=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:function(){return function XO(){return Le(DC)}()},providedIn:"platform"}),t})();const YO=new qt("Location Initialized");let DC=(()=>{class t extends ns{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Na().getBaseHref(this._doc)}onPopState(e){const n=Na().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Na().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){RC()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){RC()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Le(mi))},t.\u0275prov=tt({token:t,factory:function(){return function QO(){return new DC(Le(mi))}()},providedIn:"platform"}),t})();function RC(){return!!window.history.pushState}function wm(t,i){if(0==t.length)return i;if(0==i.length)return t;let e=0;return t.endsWith("/")&&e++,i.startsWith("/")&&e++,2==e?t+i.substring(1):1==e?t+i:t+"/"+i}function xC(t){const i=t.match(/#|\?|$/),e=i&&i.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function eo(t){return t&&"?"!==t[0]?"?"+t:t}let bl=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:function(){return function KO(t){const i=Le(mi).location;return new MC(Le(ns),i&&i.origin||"")}()},providedIn:"root"}),t})();const Cm=new qt("appBaseHref");let MC=(()=>{class t extends bl{constructor(e,n){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return wm(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+eo(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,a){const o=this.prepareExternalUrl(r+eo(a));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,a){const o=this.prepareExternalUrl(r+eo(a));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return t.\u0275fac=function(e){return new(e||t)(Le(ns),Le(Cm,8))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})(),ZO=(()=>{class t extends bl{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=wm(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,a){let o=this.prepareExternalUrl(r+eo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,a){let o=this.prepareExternalUrl(r+eo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return t.\u0275fac=function(e){return new(e||t)(Le(ns),Le(Cm,8))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})(),Sm=(()=>{class t{constructor(e,n){this._subject=new rt,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=xC(kC(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+eo(n))}normalize(e){return t.stripTrailingSlash(function eN(t,i){return t&&i.startsWith(t)?i.substring(t.length):i}(this._baseHref,kC(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+eo(n)),r)}replaceState(e,n="",r=null){this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+eo(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformStrategy).historyGo)||void 0===r||r.call(n,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}))}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return t.normalizeQueryParams=eo,t.joinWithSlash=wm,t.stripTrailingSlash=xC,t.\u0275fac=function(e){return new(e||t)(Le(bl),Le(ns))},t.\u0275prov=tt({token:t,factory:function(){return function JO(){return new Sm(Le(bl),Le(ns))}()},providedIn:"root"}),t})();function kC(t){return t.replace(/\/index.html$/,"")}var mr=(()=>((mr=mr||{})[mr.Decimal=0]="Decimal",mr[mr.Percent=1]="Percent",mr[mr.Currency=2]="Currency",mr[mr.Scientific=3]="Scientific",mr))(),vi=(()=>((vi=vi||{})[vi.Zero=0]="Zero",vi[vi.One=1]="One",vi[vi.Two=2]="Two",vi[vi.Few=3]="Few",vi[vi.Many=4]="Many",vi[vi.Other=5]="Other",vi))(),pt=(()=>((pt=pt||{})[pt.Decimal=0]="Decimal",pt[pt.Group=1]="Group",pt[pt.List=2]="List",pt[pt.PercentSign=3]="PercentSign",pt[pt.PlusSign=4]="PlusSign",pt[pt.MinusSign=5]="MinusSign",pt[pt.Exponential=6]="Exponential",pt[pt.SuperscriptingExponent=7]="SuperscriptingExponent",pt[pt.PerMille=8]="PerMille",pt[pt.Infinity=9]="Infinity",pt[pt.NaN=10]="NaN",pt[pt.TimeSeparator=11]="TimeSeparator",pt[pt.CurrencyDecimal=12]="CurrencyDecimal",pt[pt.CurrencyGroup=13]="CurrencyGroup",pt))();function qr(t,i){const e=nr(t),n=e[We.NumberSymbols][i];if(void 0===n){if(i===pt.CurrencyDecimal)return e[We.NumberSymbols][pt.Decimal];if(i===pt.CurrencyGroup)return e[We.NumberSymbols][pt.Group]}return n}function Tm(t,i){return nr(t)[We.NumberFormats][i]}const sN=zy,RN=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function km(t,i,e,n,r,a,o=!1){let s="",l=!1;if(isFinite(t)){let c=function ON(t){let n,r,a,o,s,i=Math.abs(t)+"",e=0;for((r=i.indexOf("."))>-1&&(i=i.replace(".","")),(a=i.search(/e/i))>0?(r<0&&(r=a),r+=+i.slice(a+1),i=i.substring(0,a)):r<0&&(r=i.length),a=0;"0"===i.charAt(a);a++);if(a===(s=i.length))n=[0],r=1;else{for(s--;"0"===i.charAt(s);)s--;for(r-=a,n=[],o=0;a<=s;a++,o++)n[o]=Number(i.charAt(a))}return r>22&&(n=n.splice(0,21),e=r-1,r=1),{digits:n,exponent:e,integerLen:r}}(t);o&&(c=function IN(t){if(0===t.digits[0])return t;const i=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===i?t.digits.push(0,0):1===i&&t.digits.push(0),t.integerLen+=2),t}(c));let u=i.minInt,d=i.minFrac,m=i.maxFrac;if(a){const C=a.match(RN);if(null===C)throw new Error(`${a} is not a valid digit info`);const O=C[1],j=C[3],G=C[5];null!=O&&(u=Pm(O)),null!=j&&(d=Pm(j)),null!=G?m=Pm(G):null!=j&&d>m&&(m=d)}!function NN(t,i,e){if(i>e)throw new Error(`The minimum number of digits after fraction (${i}) is higher than the maximum (${e}).`);let n=t.digits,r=n.length-t.integerLen;const a=Math.min(Math.max(i,r),e);let o=a+t.integerLen,s=n[o];if(o>0){n.splice(Math.max(t.integerLen,o));for(let d=o;d<n.length;d++)n[d]=0}else{r=Math.max(0,r),t.integerLen=1,n.length=Math.max(1,o=a+1),n[0]=0;for(let d=1;d<o;d++)n[d]=0}if(s>=5)if(o-1<0){for(let d=0;d>o;d--)n.unshift(0),t.integerLen++;n.unshift(1),t.integerLen++}else n[o-1]++;for(;r<Math.max(0,a);r++)n.push(0);let l=0!==a;const c=i+t.integerLen,u=n.reduceRight(function(d,m,v,_){return _[v]=(m+=d)<10?m:m-10,l&&(0===_[v]&&v>=c?_.pop():l=!1),m>=10?1:0},0);u&&(n.unshift(u),t.integerLen++)}(c,d,m);let v=c.digits,_=c.integerLen;const y=c.exponent;let S=[];for(l=v.every(C=>!C);_<u;_++)v.unshift(0);for(;_<0;_++)v.unshift(0);_>0?S=v.splice(_,v.length):(S=v,v=[0]);const T=[];for(v.length>=i.lgSize&&T.unshift(v.splice(-i.lgSize,v.length).join(""));v.length>i.gSize;)T.unshift(v.splice(-i.gSize,v.length).join(""));v.length&&T.unshift(v.join("")),s=T.join(qr(e,n)),S.length&&(s+=qr(e,r)+S.join("")),y&&(s+=qr(e,pt.Exponential)+"+"+y)}else s=qr(e,pt.Infinity);return s=t<0&&!l?i.negPre+s+i.negSuf:i.posPre+s+i.posSuf,s}function Am(t,i="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=t.split(";"),r=n[0],a=n[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],s=o[0],l=o[1]||"";e.posPre=s.substr(0,s.indexOf("#"));for(let u=0;u<l.length;u++){const d=l.charAt(u);"0"===d?e.minFrac=e.maxFrac=u+1:"#"===d?e.maxFrac=u+1:e.posSuf+=d}const c=s.split(",");if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,a){const u=r.length-e.posPre.length-e.posSuf.length,d=a.indexOf("#");e.negPre=a.substr(0,d).replace(/'/g,""),e.negSuf=a.substr(d+u).replace(/'/g,"")}else e.negPre=i+e.posPre,e.negSuf=e.posSuf;return e}function Pm(t){const i=parseInt(t);if(isNaN(i))throw new Error("Invalid integer literal when parsing "+t);return i}class fh{}let VN=(()=>{class t extends fh{constructor(e){super(),this.locale=e}getPluralCategory(e,n){switch(sN(n||this.locale)(e)){case vi.Zero:return"zero";case vi.One:return"one";case vi.Two:return"two";case vi.Few:return"few";case vi.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Le(Ro))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})(),Hn=(()=>{class t{constructor(e,n,r,a){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Dc(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${yn(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(A(Hc),A(vl),A(bn),A(zr))},t.\u0275dir=je({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class LN{constructor(i,e,n,r){this.$implicit=i,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yn=(()=>{class t{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,a,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new LN(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===a?void 0:a);else if(null!==a){const s=n.get(a);n.move(s,o),BC(s,r)}});for(let r=0,a=n.length;r<a;r++){const s=n.get(r).context;s.index=r,s.count=a,s.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{BC(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return t.\u0275fac=function(e){return new(e||t)(A($r),A(Un),A(Hc))},t.\u0275dir=je({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function BC(t,i){t.context.$implicit=i.item}let an=(()=>{class t{constructor(e,n){this._viewContainer=e,this._context=new UN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){LC("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){LC("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return t.\u0275fac=function(e){return new(e||t)(A($r),A(Un))},t.\u0275dir=je({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class UN{constructor(){this.$implicit=null,this.ngIf=null}}function LC(t,i){if(i&&!i.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${yn(i)}'.`)}let _l=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const n=this._viewContainerRef;this._viewRef&&n.remove(n.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?n.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(A($r))},t.\u0275dir=je({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Oi]}),t})();function ha(t,i){return new sn(2100,"")}let no=(()=>{class t{constructor(e){this._locale=e}transform(e,n,r){if(!Om(e))return null;r=r||this._locale;try{return function EN(t,i,e){return km(t,Am(Tm(i,mr.Decimal),qr(i,pt.MinusSign)),i,pt.Group,pt.Decimal,e)}(Nm(e),r,n)}catch(a){throw ha()}}}return t.\u0275fac=function(e){return new(e||t)(A(Ro,16))},t.\u0275pipe=pr({name:"number",type:t,pure:!0}),t})(),GC=(()=>{class t{constructor(e){this._locale=e}transform(e,n,r){if(!Om(e))return null;r=r||this._locale;try{return function PN(t,i,e){return km(t,Am(Tm(i,mr.Percent),qr(i,pt.MinusSign)),i,pt.Group,pt.Decimal,e,!0).replace(new RegExp("%","g"),qr(i,pt.PercentSign))}(Nm(e),r,n)}catch(a){throw ha()}}}return t.\u0275fac=function(e){return new(e||t)(A(Ro,16))},t.\u0275pipe=pr({name:"percent",type:t,pure:!0}),t})();function Om(t){return!(null==t||""===t||t!=t)}function Nm(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let vr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({providers:[{provide:fh,useClass:VN}]}),t})();let pV=(()=>{class t{}return t.\u0275prov=tt({token:t,providedIn:"root",factory:()=>new gV(Le(mi),window)}),t})();class gV{constructor(i,e){this.document=i,this.window=e,this.offset=()=>[0,0]}setOffset(i){this.offset=Array.isArray(i)?()=>i:i}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(i){this.supportsScrolling()&&this.window.scrollTo(i[0],i[1])}scrollToAnchor(i){if(!this.supportsScrolling())return;const e=function mV(t,i){const e=t.getElementById(i)||t.getElementsByName(i)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const a=r.shadowRoot;if(a){const o=a.getElementById(i)||a.querySelector(`[name="${i}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,i);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(i){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=i)}}scrollToElement(i){const e=i.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(n-a[0],r-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const i=zC(this.window.history)||zC(Object.getPrototypeOf(this.window.history));return!(!i||!i.writable&&!i.set)}catch(i){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(i){return!1}}}function zC(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Vm extends class bV extends class WO{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function qO(t){ih||(ih=t)}(new Vm)}onAndCancel(i,e,n){return i.addEventListener(e,n,!1),()=>{i.removeEventListener(e,n,!1)}}dispatchEvent(i,e){i.dispatchEvent(e)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,e){return(e=e||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,e){return"window"===e?window:"document"===e?i:"body"===e?i.body:null}getBaseHref(i){const e=function _V(){return zc=zc||document.querySelector("base"),zc?zc.getAttribute("href"):null}();return null==e?null:function yV(t){ph=ph||document.createElement("a"),ph.setAttribute("href",t);const i=ph.pathname;return"/"===i.charAt(0)?i:`/${i}`}(e)}resetBaseElement(){zc=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return function FN(t,i){i=encodeURIComponent(i);for(const e of t.split(";")){const n=e.indexOf("="),[r,a]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===i)return decodeURIComponent(a)}return null}(document.cookie,i)}}let ph,zc=null;const $C=new qt("TRANSITION_ID"),CV=[{provide:Zd,useFactory:function wV(t,i,e){return()=>{e.get(ml).donePromise.then(()=>{const n=Na(),r=i.querySelectorAll(`style[ng-transition="${t}"]`);for(let a=0;a<r.length;a++)n.remove(r[a])})}},deps:[$C,mi,ci],multi:!0}];class Fm{static init(){!function hO(t){gm=t}(new Fm)}addToWindow(i){Sn.getAngularTestability=(n,r=!0)=>{const a=i.findTestabilityInTree(n,r);if(null==a)throw new Error("Could not find testability for element.");return a},Sn.getAllAngularTestabilities=()=>i.getAllTestabilities(),Sn.getAllAngularRootElements=()=>i.getAllRootElements(),Sn.frameworkStabilizers||(Sn.frameworkStabilizers=[]),Sn.frameworkStabilizers.push(n=>{const r=Sn.getAllAngularTestabilities();let a=r.length,o=!1;const s=function(l){o=o||l,a--,0==a&&n(o)};r.forEach(function(l){l.whenStable(s)})})}findTestabilityInTree(i,e,n){if(null==e)return null;const r=i.getTestability(e);return null!=r?r:n?Na().isShadowRoot(e)?this.findTestabilityInTree(i,e.host,!0):this.findTestabilityInTree(i,e.parentElement,!0):null}}let SV=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();const gh=new qt("EventManagerPlugins");let mh=(()=>{class t{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let a=0;a<r.length;a++){const o=r[a];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Le(gh),Le(Mn))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();class qC{constructor(i){this._doc=i}addGlobalEventListener(i,e,n){const r=Na().getGlobalEventTarget(this._doc,i);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let WC=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})(),$c=(()=>{class t extends WC{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(a=>{const o=this._doc.createElement("style");o.textContent=a,r.push(n.appendChild(o))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(XC),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(XC))}}return t.\u0275fac=function(e){return new(e||t)(Le(mi))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();function XC(t){Na().remove(t)}const Bm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Lm=/%COMP%/g;function vh(t,i,e){for(let n=0;n<i.length;n++){let r=i[n];Array.isArray(r)?vh(t,r,e):(r=r.replace(Lm,t),e.push(r))}return e}function KC(t){return i=>{if("__ngUnwrap__"===i)return t;!1===t(i)&&(i.preventDefault(),i.returnValue=!1)}}let Um=(()=>{class t{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Hm(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case Sa.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new kV(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case Sa.ShadowDom:return new AV(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=vh(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Le(mh),Le($c),Le(Uc))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();class Hm{constructor(i){this.eventManager=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(i,e){return e?document.createElementNS(Bm[e]||e,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,e){i.appendChild(e)}insertBefore(i,e,n){i&&i.insertBefore(e,n)}removeChild(i,e){i&&i.removeChild(e)}selectRootElement(i,e){let n="string"==typeof i?document.querySelector(i):i;if(!n)throw new Error(`The selector "${i}" did not match any elements`);return e||(n.textContent=""),n}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,e,n,r){if(r){e=r+":"+e;const a=Bm[r];a?i.setAttributeNS(a,e,n):i.setAttribute(e,n)}else i.setAttribute(e,n)}removeAttribute(i,e,n){if(n){const r=Bm[n];r?i.removeAttributeNS(r,e):i.removeAttribute(`${n}:${e}`)}else i.removeAttribute(e)}addClass(i,e){i.classList.add(e)}removeClass(i,e){i.classList.remove(e)}setStyle(i,e,n,r){r&(Rr.DashCase|Rr.Important)?i.style.setProperty(e,n,r&Rr.Important?"important":""):i.style[e]=n}removeStyle(i,e,n){n&Rr.DashCase?i.style.removeProperty(e):i.style[e]=""}setProperty(i,e,n){i[e]=n}setValue(i,e){i.nodeValue=e}listen(i,e,n){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,e,KC(n)):this.eventManager.addEventListener(i,e,KC(n))}}class kV extends Hm{constructor(i,e,n,r){super(i),this.component=n;const a=vh(r+"-"+n.id,n.styles,[]);e.addStyles(a),this.contentAttr=function RV(t){return"_ngcontent-%COMP%".replace(Lm,t)}(r+"-"+n.id),this.hostAttr=function xV(t){return"_nghost-%COMP%".replace(Lm,t)}(r+"-"+n.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,e){const n=super.createElement(i,e);return super.setAttribute(n,this.contentAttr,""),n}}class AV extends Hm{constructor(i,e,n,r){super(i),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=vh(r.id,r.styles,[]);for(let o=0;o<a.length;o++){const s=document.createElement("style");s.textContent=a[o],this.shadowRoot.appendChild(s)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,e){return super.appendChild(this.nodeOrShadowRoot(i),e)}insertBefore(i,e,n){return super.insertBefore(this.nodeOrShadowRoot(i),e,n)}removeChild(i,e){return super.removeChild(this.nodeOrShadowRoot(i),e)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let PV=(()=>{class t extends qC{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return t.\u0275fac=function(e){return new(e||t)(Le(mi))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();const JC=["alt","control","meta","shift"],IV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eS={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},OV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let NV=(()=>{class t extends qC{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const a=t.parseEventName(n),o=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Na().onAndCancel(e,a.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(n.pop());let o="";if(JC.forEach(l=>{const c=n.indexOf(l);c>-1&&(n.splice(c,1),o+=l+".")}),o+=a,0!=n.length||0===a.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let n="",r=function VV(t){let i=t.key;if(null==i){if(i=t.keyIdentifier,null==i)return"Unidentified";i.startsWith("U+")&&(i=String.fromCharCode(parseInt(i.substring(2),16)),3===t.location&&eS.hasOwnProperty(i)&&(i=eS[i]))}return IV[i]||i}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),JC.forEach(a=>{a!=r&&OV[a](e)&&(n+=a+".")}),n+=r,n}static eventCallback(e,n,r){return a=>{t.getEventFullKey(a)===e&&r.runGuarded(()=>n(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Le(mi))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();const UV=cC(FO,"browser",[{provide:Jd,useValue:"browser"},{provide:eC,useValue:function FV(){Vm.makeCurrent(),Fm.init()},multi:!0},{provide:mi,useFactory:function LV(){return function sx(t){np=t}(document),document},deps:[]}]),HV=[{provide:vg,useValue:"root"},{provide:$s,useFactory:function BV(){return new $s},deps:[]},{provide:gh,useClass:PV,multi:!0,deps:[mi,Mn,Jd]},{provide:gh,useClass:NV,multi:!0,deps:[mi]},{provide:Um,useClass:Um,deps:[mh,$c,Uc]},{provide:$g,useExisting:Um},{provide:WC,useExisting:$c},{provide:$c,useClass:$c,deps:[mi]},{provide:pm,useClass:pm,deps:[Mn]},{provide:mh,useClass:mh,deps:[gh,Mn]},{provide:class vV{},useClass:SV,deps:[]}];let GV=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Uc,useValue:e.appId},{provide:$C,useExisting:Uc},CV]}}}return t.\u0275fac=function(e){return new(e||t)(Le(t,12))},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({providers:HV,imports:[vr,zO]}),t})();"undefined"!=typeof window&&window;let Mo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:function(e){let n=null;return n=e?new(e||t):Le(iS),n},providedIn:"root"}),t})(),iS=(()=>{class t extends Mo{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case en.NONE:return n;case en.HTML:return Ma(n,"HTML")?Dr(n):s1(this._doc,String(n)).toString();case en.STYLE:return Ma(n,"Style")?Dr(n):n;case en.SCRIPT:if(Ma(n,"Script"))return Dr(n);throw new Error("unsafe value used in a script context");case en.URL:return Jb(n),Ma(n,"URL")?Dr(n):mc(String(n));case en.RESOURCE_URL:if(Ma(n,"ResourceURL"))return Dr(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function wM(t){return new mM(t)}(e)}bypassSecurityTrustStyle(e){return function CM(t){return new vM(t)}(e)}bypassSecurityTrustScript(e){return function SM(t){return new bM(t)}(e)}bypassSecurityTrustUrl(e){return function TM(t){return new _M(t)}(e)}bypassSecurityTrustResourceUrl(e){return function DM(t){return new yM(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(Le(mi))},t.\u0275prov=tt({token:t,factory:function(e){let n=null;return n=e?new e:function ZV(t){return new iS(t.get(mi))}(Le(ci)),n},providedIn:"root"}),t})();const{isArray:JV}=Array,{getPrototypeOf:eF,prototype:tF,keys:nF}=Object;function rS(t){if(1===t.length){const i=t[0];if(JV(i))return{args:i,keys:null};if(function iF(t){return t&&"object"==typeof t&&eF(t)===tF}(i)){const e=nF(i);return{args:e.map(n=>i[n]),keys:e}}}return{args:t,keys:null}}const{isArray:rF}=Array;function jm(t){return Et(i=>function aF(t,i){return rF(i)?t(...i):t(i)}(t,i))}function aS(t,i){return t.reduce((e,n,r)=>(e[n]=i[r],e),{})}let oS=(()=>{class t{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(A(zr),A(bn))},t.\u0275dir=je({type:t}),t})(),is=(()=>{class t extends oS{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=je({type:t,features:[vn]}),t})();const Xr=new qt("NgValueAccessor"),sF={provide:Xr,useExisting:cn(()=>bh),multi:!0};let bh=(()=>{class t extends is{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,n){1&e&&I("change",function(a){return n.onChange(a.target.checked)})("blur",function(){return n.onTouched()})},features:[xn([sF]),vn]}),t})();const lF={provide:Xr,useExisting:cn(()=>rs),multi:!0},uF=new qt("CompositionEventMode");let rs=(()=>{class t extends oS{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function cF(){const t=Na()?Na().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(A(zr),A(bn),A(uF,8))},t.\u0275dir=je({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&I("input",function(a){return n._handleInput(a.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(a){return n._compositionEnd(a.target.value)})},features:[xn([lF]),vn]}),t})();function sS(t){return null!=t&&"number"==typeof t.length}const Xi=new qt("NgValidators"),Ao=new qt("NgAsyncValidators");function _h(t){return null}function mS(t){return null!=t}function vS(t){const i=xc(t)?Pi(t):t;return Eg(i),i}function bS(t){let i={};return t.forEach(e=>{i=null!=e?Object.assign(Object.assign({},i),e):i}),0===Object.keys(i).length?null:i}function _S(t,i){return i.map(e=>e(t))}function yS(t){return t.map(i=>function hF(t){return!t.validate}(i)?i:e=>i.validate(e))}function zm(t){return null!=t?function wS(t){if(!t)return null;const i=t.filter(mS);return 0==i.length?null:function(e){return bS(_S(e,i))}}(yS(t)):null}function $m(t){return null!=t?function CS(t){if(!t)return null;const i=t.filter(mS);return 0==i.length?null:function(e){return function oF(...t){const i=Xu(t),{args:e,keys:n}=rS(t),r=new Be(a=>{const{length:o}=e;if(!o)return void a.complete();const s=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;wi(e[u]).subscribe(zt(a,m=>{d||(d=!0,c--),s[u]=m},()=>l--,void 0,()=>{(!l||!d)&&(c||a.next(n?aS(n,s):s),a.complete())}))}});return i?r.pipe(jm(i)):r}(_S(e,i).map(vS)).pipe(Et(bS))}}(yS(t)):null}function SS(t,i){return null===t?[i]:Array.isArray(t)?[...t,i]:[t,i]}function TS(t){return t._rawValidators}function DS(t){return t._rawAsyncValidators}function qm(t){return t?Array.isArray(t)?t:[t]:[]}function yh(t,i){return Array.isArray(t)?t.includes(i):t===i}function RS(t,i){const e=qm(i);return qm(t).forEach(r=>{yh(e,r)||e.push(r)}),e}function xS(t,i){return qm(i).filter(e=>!yh(t,e))}class MS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=zm(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=$m(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i){this.control&&this.control.reset(i)}hasError(i,e){return!!this.control&&this.control.hasError(i,e)}getError(i,e){return this.control?this.control.getError(i,e):null}}class Po extends MS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rr extends MS{get formDirective(){return null}get path(){return null}}class kS{constructor(i){this._cd=i}is(i){var e,n,r;return"submitted"===i?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[i])}}let yl=(()=>{class t extends kS{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(A(Po,2))},t.\u0275dir=je({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&wt("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[vn]}),t})(),wh=(()=>{class t extends kS{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(A(rr,10))},t.\u0275dir=je({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&wt("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))("ng-submitted",n.is("submitted"))},features:[vn]}),t})();function Sh(t,i){return[...i.path,t]}function qc(t,i){Ym(t,i),i.valueAccessor.writeValue(t.value),function yF(t,i){i.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&PS(t,i)})}(t,i),function CF(t,i){const e=(n,r)=>{i.valueAccessor.writeValue(n),r&&i.viewToModelUpdate(n)};t.registerOnChange(e),i._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,i),function wF(t,i){i.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&PS(t,i),"submit"!==t.updateOn&&t.markAsTouched()})}(t,i),function _F(t,i){if(i.valueAccessor.setDisabledState){const e=n=>{i.valueAccessor.setDisabledState(n)};t.registerOnDisabledChange(e),i._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,i)}function Th(t,i,e=!0){const n=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(n),i.valueAccessor.registerOnTouched(n)),Rh(t,i),t&&(i._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Dh(t,i){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function Ym(t,i){const e=TS(t);null!==i.validator?t.setValidators(SS(e,i.validator)):"function"==typeof e&&t.setValidators([e]);const n=DS(t);null!==i.asyncValidator?t.setAsyncValidators(SS(n,i.asyncValidator)):"function"==typeof n&&t.setAsyncValidators([n]);const r=()=>t.updateValueAndValidity();Dh(i._rawValidators,r),Dh(i._rawAsyncValidators,r)}function Rh(t,i){let e=!1;if(null!==t){if(null!==i.validator){const r=TS(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==i.validator);a.length!==r.length&&(e=!0,t.setValidators(a))}}if(null!==i.asyncValidator){const r=DS(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==i.asyncValidator);a.length!==r.length&&(e=!0,t.setAsyncValidators(a))}}}const n=()=>{};return Dh(i._rawValidators,n),Dh(i._rawAsyncValidators,n),e}function PS(t,i){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ES(t,i){Ym(t,i)}function Qm(t,i){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(i,e.currentValue)}function IS(t,i){t._syncPendingControls(),i.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function Km(t,i){if(!i)return null;let e,n,r;return Array.isArray(i),i.forEach(a=>{a.constructor===rs?e=a:function DF(t){return Object.getPrototypeOf(t.constructor)===is}(a)?n=a:r=a}),r||n||e||null}function Zm(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}const Wc="VALID",xh="INVALID",wl="PENDING",Xc="DISABLED";function ev(t){return(Mh(t)?t.validators:t)||null}function OS(t){return Array.isArray(t)?zm(t):t||null}function tv(t,i){return(Mh(i)?i.asyncValidators:t)||null}function NS(t){return Array.isArray(t)?$m(t):t||null}function Mh(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const VS=t=>t instanceof rv,nv=t=>t instanceof kh;function FS(t){return VS(t)?t.value:t.getRawValue()}function BS(t,i){const e=nv(t),n=t.controls;if(!(e?Object.keys(n):n).length)throw new sn(1e3,"");if(!n[i])throw new sn(1001,"")}function LS(t,i){nv(t),t._forEachChild((n,r)=>{if(void 0===i[r])throw new sn(1002,"")})}class iv{constructor(i,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=i,this._rawAsyncValidators=e,this._composedValidatorFn=OS(this._rawValidators),this._composedAsyncValidatorFn=NS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get valid(){return this.status===Wc}get invalid(){return this.status===xh}get pending(){return this.status==wl}get disabled(){return this.status===Xc}get enabled(){return this.status!==Xc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._rawValidators=i,this._composedValidatorFn=OS(i)}setAsyncValidators(i){this._rawAsyncValidators=i,this._composedAsyncValidatorFn=NS(i)}addValidators(i){this.setValidators(RS(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(RS(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(xS(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(xS(i,this._rawAsyncValidators))}hasValidator(i){return yh(this._rawValidators,i)}hasAsyncValidator(i){return yh(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){this.touched=!0,this._parent&&!i.onlySelf&&this._parent.markAsTouched(i)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(i=>i.markAllAsTouched())}markAsUntouched(i={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}markAsDirty(i={}){this.pristine=!1,this._parent&&!i.onlySelf&&this._parent.markAsDirty(i)}markAsPristine(i={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}markAsPending(i={}){this.status=wl,!1!==i.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!i.onlySelf&&this._parent.markAsPending(i)}disable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=Xc,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this._updateValue(),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=Wc,this._forEachChild(n=>{n.enable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(i){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(i){this._parent=i}updateValueAndValidity(i={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wc||this.status===wl)&&this._runAsyncValidator(i.emitEvent)),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(i)}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xc:Wc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i){if(this.asyncValidator){this.status=wl,this._hasOwnPendingAsyncValidator=!0;const e=vS(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:i})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(!1!==e.emitEvent)}get(i){return function RF(t,i,e){if(null==i||(Array.isArray(i)||(i=i.split(e)),Array.isArray(i)&&0===i.length))return null;let n=t;return i.forEach(r=>{n=nv(n)?n.controls.hasOwnProperty(r)?n.controls[r]:null:(t=>t instanceof MF)(n)&&n.at(r)||null}),n}(this,i,".")}getError(i,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(i)}_initObservables(){this.valueChanges=new rt,this.statusChanges=new rt}_calculateStatus(){return this._allControlsDisabled()?Xc:this.errors?xh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wl)?wl:this._anyControlsHaveStatus(xh)?xh:Wc}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i={}){this.pristine=!this._anyControlsDirty(),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}_updateTouched(i={}){this.touched=this._anyControlsTouched(),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}_isBoxedValue(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){Mh(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class rv extends iv{constructor(i=null,e,n){super(ev(e),tv(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mh(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(i)?i.value:i)}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=this.defaultValue,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){Zm(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){Zm(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){this._isBoxedValue(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}}class kh extends iv{constructor(i,e,n){super(ev(e),tv(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,n={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){LS(this,i),Object.keys(i).forEach(n=>{BS(this,n),this.controls[n].setValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(Object.keys(i).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((n,r)=>{n.reset(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,n)=>(i[n]=FS(e),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&i(n,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&i(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(i,e,n)=>((e.enabled||this.disabled)&&(i[n]=e.value),i))}_reduceChildren(i,e){let n=i;return this._forEachChild((r,a)=>{n=e(n,r,a)}),n}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class MF extends iv{constructor(i,e,n){super(ev(e),tv(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[i]}push(i,e={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(i,e,n={}){this.controls.splice(i,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,e={}){LS(this,i),i.forEach((n,r)=>{BS(this,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(i.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i=[],e={}){this._forEachChild((n,r)=>{n.reset(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(i=>FS(i))}clear(i={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_syncPendingControls(){let i=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){this.controls.forEach((e,n)=>{i(e,n)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(e=>e.enabled&&i(e))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_allControlsDisabled(){for(const i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}}const kF={provide:rr,useExisting:cn(()=>Qc)},Yc=(()=>Promise.resolve(null))();let Qc=(()=>{class t extends rr{constructor(e,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new rt,this.form=new kh({},zm(e),$m(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Yc.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),qc(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Yc.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Yc.then(()=>{const n=this._findContainer(e.path),r=new kh({});ES(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Yc.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Yc.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,IS(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(A(Xi,10),A(Ao,10))},t.\u0275dir=je({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&I("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[xn([kF]),vn]}),t})();const PF={provide:Po,useExisting:cn(()=>Cl)},GS=(()=>Promise.resolve(null))();let Cl=(()=>{class t extends Po{constructor(e,n,r,a,o){super(),this._changeDetectorRef=o,this.control=new rv,this._registered=!1,this.update=new rt,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=Km(0,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Qm(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){GS.then(()=>{var n;this.control.setValue(e,{emitViewToModelChange:!1}),null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;GS.then(()=>{var a;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(e){return this._parent?Sh(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(A(rr,9),A(Xi,10),A(Ao,10),A(Xr,10),A(Mr,8))},t.\u0275dir=je({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[xn([PF]),vn,Oi]}),t})(),Ah=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const EF={provide:Xr,useExisting:cn(()=>av),multi:!0};let av=(()=>{class t extends is{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,n){1&e&&I("input",function(a){return n.onChange(a.target.value)})("blur",function(){return n.onTouched()})},features:[xn([EF]),vn]}),t})(),jS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({}),t})();const ov=new qt("NgModelWithFormControlWarning"),FF={provide:rr,useExisting:cn(()=>Ph)};let Ph=(()=>{class t extends rr{constructor(e,n){super(),this.validators=e,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new rt,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return qc(n,e),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){Th(e.control||null,e,!1),Zm(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,IS(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(Th(n||null,e),VS(r)&&(qc(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);ES(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function SF(t,i){return Rh(t,i)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ym(this.form,this),this._oldForm&&Rh(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(A(Xi,10),A(Ao,10))},t.\u0275dir=je({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,n){1&e&&I("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[xn([FF]),vn,Oi]}),t})();const UF={provide:Po,useExisting:cn(()=>cv)};let cv=(()=>{class t extends Po{constructor(e,n,r,a,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new rt,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=Km(0,a)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),Qm(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Sh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(A(rr,13),A(Xi,10),A(Ao,10),A(Xr,10),A(ov,8))},t.\u0275dir=je({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[xn([UF]),vn,Oi]}),t})();const HF={provide:Xr,useExisting:cn(()=>Eh),multi:!0};function XS(t,i){return null==t?`${i}`:(i&&"object"==typeof i&&(i="Object"),`${t}: ${i}`.slice(0,50))}let Eh=(()=>{class t extends is{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=XS(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){const n=function GF(t){return t.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,n){1&e&&I("change",function(a){return n.onChange(a.target.value)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[xn([HF]),vn]}),t})(),YS=(()=>{class t{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(XS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(A(bn),A(zr),A(Eh,9))},t.\u0275dir=je({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const jF={provide:Xr,useExisting:cn(()=>uv),multi:!0};function QS(t,i){return null==t?`${i}`:("string"==typeof i&&(i=`'${i}'`),i&&"object"==typeof i&&(i="Object"),`${t}: ${i}`.slice(0,50))}let uv=(()=>{class t extends is{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let n;if(this.value=e,Array.isArray(e)){const r=e.map(a=>this._getOptionId(a));n=(a,o)=>{a._setSelected(r.indexOf(o.toString())>-1)}}else n=(r,a)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{const r=[],a=n.selectedOptions;if(void 0!==a){const o=a;for(let s=0;s<o.length;s++){const c=this._getOptionValue(o[s].value);r.push(c)}}else{const o=n.options;for(let s=0;s<o.length;s++){const l=o[s];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){const n=function zF(t){return t.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,n){1&e&&I("change",function(a){return n.onChange(a.target)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[xn([jF]),vn]}),t})(),KS=(()=>{class t{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(QS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(QS(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(A(bn),A(zr),A(uv,9))},t.\u0275dir=je({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function ZS(t){return"number"==typeof t?t:parseInt(t,10)}let as=(()=>{class t{constructor(){this._validator=_h}ngOnChanges(e){if(this.inputName in e){const n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):_h,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,features:[Oi]}),t})();const KF={provide:Xi,useExisting:cn(()=>hv),multi:!0};let hv=(()=>{class t extends as{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>ZS(e),this.createValidator=e=>function fS(t){return i=>function ko(t){return null==t||0===t.length}(i.value)||!sS(i.value)?null:i.value.length<t?{minlength:{requiredLength:t,actualLength:i.value.length}}:null}(e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&Cn("minlength",n._enabled?n.minlength:null)},inputs:{minlength:"minlength"},features:[xn([KF]),vn]}),t})();const ZF={provide:Xi,useExisting:cn(()=>Kc),multi:!0};let Kc=(()=>{class t extends as{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>ZS(e),this.createValidator=e=>function pS(t){return i=>sS(i.value)&&i.value.length>t?{maxlength:{requiredLength:t,actualLength:i.value.length}}:null}(e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=je({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&Cn("maxlength",n._enabled?n.maxlength:null)},inputs:{maxlength:"maxlength"},features:[xn([ZF]),vn]}),t})(),aT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[jS]]}),t})(),oT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[aT]}),t})(),e3=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:ov,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[aT]}),t})();function Mt(...t){return Pi(t,Zl(t))}class Qn extends _e{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const e=super._subscribe(i);return!e.closed&&i.next(this._value),e}getValue(){const{hasError:i,thrownError:e,_value:n}=this;if(i)throw e;return this._throwIfClosed(),n}next(i){super.next(this._value=i)}}function sT(t,i,e){t?Fr(e,t,i):i()}const Ih=U(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Zc(...t){return function n3(){return Kl(1)}()(Pi(t,Zl(t)))}function lT(t){return new Be(i=>{wi(t()).subscribe(i)})}function cT(){return yt((t,i)=>{let e=null;t._refCount++;const n=zt(i,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),i.unsubscribe()});t.subscribe(n),n.closed||(e=t.connect())})}class r3 extends Be{constructor(i,e){super(),this.source=i,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Tn(i)&&(this.lift=i.lift)}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){const i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:i}=this;this._subject=this._connection=null,null==i||i.unsubscribe()}connect(){let i=this._connection;if(!i){i=this._connection=new pe;const e=this.getSubject();i.add(this.source.subscribe(zt(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),i.closed&&(this._connection=null,i=pe.EMPTY)}return i}refCount(){return cT()(this)}}function io(t,i){return yt((e,n)=>{let r=null,a=0,o=!1;const s=()=>o&&!r&&n.complete();e.subscribe(zt(n,l=>{null==r||r.unsubscribe();let c=0;const u=a++;wi(t(l,u)).subscribe(r=zt(n,d=>n.next(i?i(l,d,u,c++):d),()=>{r=null,s()}))},()=>{o=!0,s()}))})}function a3(t,i,e,n,r){return(a,o)=>{let s=e,l=i,c=0;a.subscribe(zt(o,u=>{const d=c++;l=s?t(l,u,d):(s=!0,u),n&&o.next(l)},r&&(()=>{s&&o.next(l),o.complete()})))}}function uT(t,i){return yt(a3(t,i,arguments.length>=2,!0))}function Fi(t,i){return yt((e,n)=>{let r=0;e.subscribe(zt(n,a=>t.call(i,a,r++)&&n.next(a)))})}function Eo(t){return yt((i,e)=>{let a,n=null,r=!1;n=i.subscribe(zt(e,void 0,void 0,o=>{a=wi(t(o,Eo(t)(i))),n?(n.unsubscribe(),n=null,a.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,a.subscribe(e))})}function Jc(t,i){return W(i)?si(t,i,1):si(t,1)}function pv(t){return t<=0?()=>Jr:yt((i,e)=>{let n=[];i.subscribe(zt(e,r=>{n.push(r),t<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function dT(t=o3){return yt((i,e)=>{let n=!1;i.subscribe(zt(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(t())))})}function o3(){return new Ih}function hT(t){return yt((i,e)=>{let n=!1;i.subscribe(zt(e,r=>{n=!0,e.next(r)},()=>{n||e.next(t),e.complete()}))})}function Sl(t,i){const e=arguments.length>=2;return n=>n.pipe(t?Fi((r,a)=>t(r,a,n)):Fe,Ei(1),e?hT(i):dT(()=>new Ih))}function Yi(t,i,e){const n=W(t)||i||e?{next:t,error:i,complete:e}:t;return n?yt((r,a)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let s=!0;r.subscribe(zt(a,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),a.next(l)},()=>{var l;s=!1,null===(l=n.complete)||void 0===l||l.call(n),a.complete()},l=>{var c;s=!1,null===(c=n.error)||void 0===c||c.call(n,l),a.error(l)},()=>{var l,c;s&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):Fe}class ro{constructor(i,e){this.id=i,this.url=e}}class gv extends ro{constructor(i,e,n="imperative",r=null){super(i,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class eu extends ro{constructor(i,e,n){super(i,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fT extends ro{constructor(i,e,n){super(i,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class c3 extends ro{constructor(i,e,n){super(i,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class u3 extends ro{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class d3 extends ro{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h3 extends ro{constructor(i,e,n,r,a){super(i,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class f3 extends ro{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p3 extends ro{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pT{constructor(i){this.route=i}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gT{constructor(i){this.route=i}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class g3{constructor(i){this.snapshot=i}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m3{constructor(i){this.snapshot=i}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v3{constructor(i){this.snapshot=i}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b3{constructor(i){this.snapshot=i}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mT{constructor(i,e,n){this.routerEvent=i,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Yt="primary";class _3{constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e[0]:e}return null}getAll(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Tl(t){return new _3(t)}const vT="ngNavigationCancelingError";function mv(t){const i=Error("NavigationCancelingError: "+t);return i[vT]=!0,i}function w3(t,i,e){const n=e.path.split("/");if(n.length>t.length||"full"===e.pathMatch&&(i.hasChildren()||n.length<t.length))return null;const r={};for(let a=0;a<n.length;a++){const o=n[a],s=t[a];if(o.startsWith(":"))r[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:t.slice(0,n.length),posParams:r}}function Va(t,i){const e=t?Object.keys(t):void 0,n=i?Object.keys(i):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!bT(t[r],i[r]))return!1;return!0}function bT(t,i){if(Array.isArray(t)&&Array.isArray(i)){if(t.length!==i.length)return!1;const e=[...t].sort(),n=[...i].sort();return e.every((r,a)=>n[a]===r)}return t===i}function _T(t){return Array.prototype.concat.apply([],t)}function yT(t){return t.length>0?t[t.length-1]:null}function Bi(t,i){for(const e in t)t.hasOwnProperty(e)&&i(t[e],e)}function Fa(t){return Eg(t)?t:xc(t)?Pi(Promise.resolve(t)):Mt(t)}const T3={exact:function ST(t,i,e){if(!ss(t.segments,i.segments)||!Nh(t.segments,i.segments,e)||t.numberOfChildren!==i.numberOfChildren)return!1;for(const n in i.children)if(!t.children[n]||!ST(t.children[n],i.children[n],e))return!1;return!0},subset:TT},wT={exact:function D3(t,i){return Va(t,i)},subset:function R3(t,i){return Object.keys(i).length<=Object.keys(t).length&&Object.keys(i).every(e=>bT(t[e],i[e]))},ignored:()=>!0};function CT(t,i,e){return T3[e.paths](t.root,i.root,e.matrixParams)&&wT[e.queryParams](t.queryParams,i.queryParams)&&!("exact"===e.fragment&&t.fragment!==i.fragment)}function TT(t,i,e){return DT(t,i,i.segments,e)}function DT(t,i,e,n){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!ss(r,e)||i.hasChildren()||!Nh(r,e,n))}if(t.segments.length===e.length){if(!ss(t.segments,e)||!Nh(t.segments,e,n))return!1;for(const r in i.children)if(!t.children[r]||!TT(t.children[r],i.children[r],n))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(ss(t.segments,r)&&Nh(t.segments,r,n)&&t.children[Yt])&&DT(t.children[Yt],i,a,n)}}function Nh(t,i,e){return i.every((n,r)=>wT[e](t[r].parameters,n.parameters))}class os{constructor(i,e,n){this.root=i,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tl(this.queryParams)),this._queryParamMap}toString(){return k3.serialize(this)}}class tn{constructor(i,e){this.segments=i,this.children=e,this.parent=null,Bi(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vh(this)}}class tu{constructor(i,e){this.path=i,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Tl(this.parameters)),this._parameterMap}toString(){return AT(this)}}function ss(t,i){return t.length===i.length&&t.every((e,n)=>e.path===i[n].path)}class RT{}class xT{parse(i){const e=new B3(i);return new os(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(i){const e=`/${nu(i.root,!0)}`,n=function E3(t){const i=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(r=>`${Fh(e)}=${Fh(r)}`).join("&"):`${Fh(e)}=${Fh(n)}`}).filter(e=>!!e);return i.length?`?${i.join("&")}`:""}(i.queryParams);return`${e}${n}${"string"==typeof i.fragment?`#${function A3(t){return encodeURI(t)}(i.fragment)}`:""}`}}const k3=new xT;function Vh(t){return t.segments.map(i=>AT(i)).join("/")}function nu(t,i){if(!t.hasChildren())return Vh(t);if(i){const e=t.children[Yt]?nu(t.children[Yt],!1):"",n=[];return Bi(t.children,(r,a)=>{a!==Yt&&n.push(`${a}:${nu(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function M3(t,i){let e=[];return Bi(t.children,(n,r)=>{r===Yt&&(e=e.concat(i(n,r)))}),Bi(t.children,(n,r)=>{r!==Yt&&(e=e.concat(i(n,r)))}),e}(t,(n,r)=>r===Yt?[nu(t.children[Yt],!1)]:[`${r}:${nu(n,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Yt]?`${Vh(t)}/${e[0]}`:`${Vh(t)}/(${e.join("//")})`}}function MT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fh(t){return MT(t).replace(/%3B/gi,";")}function vv(t){return MT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bh(t){return decodeURIComponent(t)}function kT(t){return Bh(t.replace(/\+/g,"%20"))}function AT(t){return`${vv(t.path)}${function P3(t){return Object.keys(t).map(i=>`;${vv(i)}=${vv(t[i])}`).join("")}(t.parameters)}`}const I3=/^[^\/()?;=#]+/;function Lh(t){const i=t.match(I3);return i?i[0]:""}const O3=/^[^=?&#]+/,V3=/^[^&#]+/;class B3{constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const i={};if(this.consumeOptional("?"))do{this.parseQueryParam(i)}while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(i.length>0||Object.keys(e).length>0)&&(n[Yt]=new tn(i,e)),n}parseSegment(){const i=Lh(this.remaining);if(""===i&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(i),new tu(Bh(i),this.parseMatrixParams())}parseMatrixParams(){const i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){const e=Lh(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=Lh(this.remaining);r&&(n=r,this.capture(n))}i[Bh(e)]=Bh(n)}parseQueryParam(i){const e=function N3(t){const i=t.match(O3);return i?i[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function F3(t){const i=t.match(V3);return i?i[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=kT(e),a=kT(n);if(i.hasOwnProperty(r)){let o=i[r];Array.isArray(o)||(o=[o],i[r]=o),o.push(a)}else i[r]=a}parseParens(i){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Lh(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a;n.indexOf(":")>-1?(a=n.substr(0,n.indexOf(":")),this.capture(a),this.capture(":")):i&&(a=Yt);const o=this.parseChildren();e[a]=1===Object.keys(o).length?o[Yt]:new tn([],o),this.consumeOptional("//")}return e}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return!!this.peekStartsWith(i)&&(this.remaining=this.remaining.substring(i.length),!0)}capture(i){if(!this.consumeOptional(i))throw new Error(`Expected "${i}".`)}}class PT{constructor(i){this._root=i}get root(){return this._root.value}parent(i){const e=this.pathFromRoot(i);return e.length>1?e[e.length-2]:null}children(i){const e=bv(i,this._root);return e?e.children.map(n=>n.value):[]}firstChild(i){const e=bv(i,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(i){const e=_v(i,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==i)}pathFromRoot(i){return _v(i,this._root).map(e=>e.value)}}function bv(t,i){if(t===i.value)return i;for(const e of i.children){const n=bv(t,e);if(n)return n}return null}function _v(t,i){if(t===i.value)return[i];for(const e of i.children){const n=_v(t,e);if(n.length)return n.unshift(i),n}return[]}class ao{constructor(i,e){this.value=i,this.children=e}toString(){return`TreeNode(${this.value})`}}function Dl(t){const i={};return t&&t.children.forEach(e=>i[e.value.outlet]=e),i}class ET extends PT{constructor(i,e){super(i),this.snapshot=e,yv(this,i)}toString(){return this.snapshot.toString()}}function IT(t,i){const e=function L3(t,i){const o=new Uh([],{},{},"",{},Yt,i,null,t.root,-1,{});return new NT("",new ao(o,[]))}(t,i),n=new Qn([new tu("",{})]),r=new Qn({}),a=new Qn({}),o=new Qn({}),s=new Qn(""),l=new Rl(n,r,o,s,a,Yt,i,e.root);return l.snapshot=e.root,new ET(new ao(l,[]),e)}class Rl{constructor(i,e,n,r,a,o,s,l){this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Et(i=>Tl(i)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Et(i=>Tl(i)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OT(t,i="emptyOnly"){const e=t.pathFromRoot;let n=0;if("always"!==i)for(n=e.length-1;n>=1;){const r=e[n],a=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(a.component)break;n--}}return function U3(t){return t.reduce((i,e)=>({params:Object.assign(Object.assign({},i.params),e.params),data:Object.assign(Object.assign({},i.data),e.data),resolve:Object.assign(Object.assign({},i.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(n))}class Uh{constructor(i,e,n,r,a,o,s,l,c,u,d){this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Tl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class NT extends PT{constructor(i,e){super(e),this.url=i,yv(this,e)}toString(){return VT(this._root)}}function yv(t,i){i.value._routerState=t,i.children.forEach(e=>yv(t,e))}function VT(t){const i=t.children.length>0?` { ${t.children.map(VT).join(", ")} } `:"";return`${t.value}${i}`}function wv(t){if(t.snapshot){const i=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Va(i.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),i.fragment!==e.fragment&&t.fragment.next(e.fragment),Va(i.params,e.params)||t.params.next(e.params),function C3(t,i){if(t.length!==i.length)return!1;for(let e=0;e<t.length;++e)if(!Va(t[e],i[e]))return!1;return!0}(i.url,e.url)||t.url.next(e.url),Va(i.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Cv(t,i){const e=Va(t.params,i.params)&&function x3(t,i){return ss(t,i)&&t.every((e,n)=>Va(e.parameters,i[n].parameters))}(t.url,i.url);return e&&!(!t.parent!=!i.parent)&&(!t.parent||Cv(t.parent,i.parent))}function iu(t,i,e){if(e&&t.shouldReuseRoute(i.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=i.value;const r=function G3(t,i,e){return i.children.map(n=>{for(const r of e.children)if(t.shouldReuseRoute(n.value,r.value.snapshot))return iu(t,n,r);return iu(t,n)})}(t,i,e);return new ao(n,r)}{if(t.shouldAttach(i.value)){const a=t.retrieve(i.value);if(null!==a){const o=a.route;return o.value._futureSnapshot=i.value,o.children=i.children.map(s=>iu(t,s)),o}}const n=function j3(t){return new Rl(new Qn(t.url),new Qn(t.params),new Qn(t.queryParams),new Qn(t.fragment),new Qn(t.data),t.outlet,t.component,t)}(i.value),r=i.children.map(a=>iu(t,a));return new ao(n,r)}}function Hh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ru(t){return"object"==typeof t&&null!=t&&t.outlets}function Sv(t,i,e,n,r){let a={};return n&&Bi(n,(o,s)=>{a[s]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new os(e.root===t?i:FT(e.root,t,i),a,r)}function FT(t,i,e){const n={};return Bi(t.children,(r,a)=>{n[a]=r===i?e:FT(r,i,e)}),new tn(t.segments,n)}class BT{constructor(i,e,n){if(this.isAbsolute=i,this.numberOfDoubleDots=e,this.commands=n,i&&n.length>0&&Hh(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(ru);if(r&&r!==yT(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tv{constructor(i,e,n){this.segmentGroup=i,this.processChildren=e,this.index=n}}function LT(t,i,e){if(t||(t=new tn([],{})),0===t.segments.length&&t.hasChildren())return Gh(t,i,e);const n=function Y3(t,i,e){let n=0,r=i;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(n>=e.length)return a;const o=t.segments[r],s=e[n];if(ru(s))break;const l=`${s}`,c=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!HT(l,c,o))return a;n+=2}else{if(!HT(l,{},o))return a;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(t,i,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){const a=new tn(t.segments.slice(0,n.pathIndex),{});return a.children[Yt]=new tn(t.segments.slice(n.pathIndex),t.children),Gh(a,0,r)}return n.match&&0===r.length?new tn(t.segments,{}):n.match&&!t.hasChildren()?Dv(t,i,e):n.match?Gh(t,0,r):Dv(t,i,e)}function Gh(t,i,e){if(0===e.length)return new tn(t.segments,{});{const n=function X3(t){return ru(t[0])?t[0].outlets:{[Yt]:t}}(e),r={};return Bi(n,(a,o)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[o]=LT(t.children[o],i,a))}),Bi(t.children,(a,o)=>{void 0===n[o]&&(r[o]=a)}),new tn(t.segments,r)}}function Dv(t,i,e){const n=t.segments.slice(0,i);let r=0;for(;r<e.length;){const a=e[r];if(ru(a)){const l=Q3(a.outlets);return new tn(n,l)}if(0===r&&Hh(e[0])){n.push(new tu(t.segments[i].path,UT(e[0]))),r++;continue}const o=ru(a)?a.outlets[Yt]:`${a}`,s=r<e.length-1?e[r+1]:null;o&&s&&Hh(s)?(n.push(new tu(o,UT(s))),r+=2):(n.push(new tu(o,{})),r++)}return new tn(n,{})}function Q3(t){const i={};return Bi(t,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(i[n]=Dv(new tn([],{}),0,e))}),i}function UT(t){const i={};return Bi(t,(e,n)=>i[n]=`${e}`),i}function HT(t,i,e){return t==e.path&&Va(i,e.parameters)}class Z3{constructor(i,e,n,r){this.routeReuseStrategy=i,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(i){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,i),wv(this.futureState.root),this.activateChildRoutes(e,n,i)}deactivateChildRoutes(i,e,n){const r=Dl(e);i.children.forEach(a=>{const o=a.value.outlet;this.deactivateRoutes(a,r[o],n),delete r[o]}),Bi(r,(a,o)=>{this.deactivateRouteAndItsChildren(a,n)})}deactivateRoutes(i,e,n){const r=i.value,a=e?e.value:null;if(r===a)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(i,e,o.children)}else this.deactivateChildRoutes(i,e,n);else a&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(i,e){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,e):this.deactivateRouteAndOutlet(i,e)}detachAndStoreRouteSubtree(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,a=Dl(i);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);if(n&&n.outlet){const o=n.outlet.detach(),s=n.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:o,route:i,contexts:s})}}deactivateRouteAndOutlet(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,a=Dl(i);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(i,e,n){const r=Dl(e);i.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],n),this.forwardEvent(new b3(a.value.snapshot))}),i.children.length&&this.forwardEvent(new m3(i.value.snapshot))}activateRoutes(i,e,n){const r=i.value,a=e?e.value:null;if(wv(r),r===a)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(i,e,o.children)}else this.activateChildRoutes(i,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),wv(s.route.value),this.activateChildRoutes(i,null,o.children)}else{const s=function J3(t){for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(i,null,o.children)}}else this.activateChildRoutes(i,null,n)}}class Rv{constructor(i,e){this.routes=i,this.module=e}}function Io(t){return"function"==typeof t}function ls(t){return t instanceof os}const au=Symbol("INITIAL_VALUE");function ou(){return io(t=>function fv(...t){const i=Zl(t),e=Xu(t),{args:n,keys:r}=rS(t);if(0===n.length)return Pi([],i);const a=new Be(function t3(t,i,e=Fe){return n=>{sT(i,()=>{const{length:r}=t,a=new Array(r);let o=r,s=r;for(let l=0;l<r;l++)sT(i,()=>{const c=Pi(t[l],i);let u=!1;c.subscribe(zt(n,d=>{a[l]=d,u||(u=!0,s--),s||n.next(e(a.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,i,r?o=>aS(r,o):Fe));return e?a.pipe(jm(e)):a}(t.map(i=>i.pipe(Ei(1),function Oh(...t){const i=Zl(t);return yt((e,n)=>{(i?Zc(t,e,i):Zc(t,e)).subscribe(n)})}(au)))).pipe(uT((i,e)=>{let n=!1;return e.reduce((r,a,o)=>r!==au?r:(a===au&&(n=!0),n||!1!==a&&o!==e.length-1&&!ls(a)?r:a),i)},au),Fi(i=>i!==au),Et(i=>ls(i)?i:!0===i),Ei(1)))}class aB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new su,this.attachRef=null}}class su{constructor(){this.contexts=new Map}onChildOutletCreated(i,e){const n=this.getOrCreateContext(i);n.outlet=e,this.contexts.set(i,n)}onChildOutletDestroyed(i){const e=this.getContext(i);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let e=this.getContext(i);return e||(e=new aB,this.contexts.set(i,e)),e}getContext(i){return this.contexts.get(i)||null}}let xv=(()=>{class t{constructor(e,n,r,a,o){this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new rt,this.deactivateEvents=new rt,this.attachEvents=new rt,this.detachEvents=new rt,this.name=a||Yt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),s=this.parentContexts.getOrCreateContext(this.name).children,l=new oB(e,s,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(A(su),A($r),A(Zo),function Wo(t){return function Bx(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const e=t.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const a=e[r];if(Rb(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(a===i)return e[r+1];r+=2}}}return null}(Ci(),t)}("name"),A(Mr))},t.\u0275dir=je({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class oB{constructor(i,e,n){this.route=i,this.childContexts=e,this.parent=n}get(i,e){return i===Rl?this.route:i===su?this.childContexts:this.parent.get(i,e)}}let GT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=dt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&D(0,"router-outlet")},directives:[xv],encapsulation:2}),t})();function jT(t,i=""){for(let e=0;e<t.length;e++){const n=t[e];sB(n,lB(i,n))}}function sB(t,i){t.children&&jT(t.children,i)}function lB(t,i){return i?t||i.path?t&&!i.path?`${t}/`:!t&&i.path?i.path:`${t}/${i.path}`:"":t}function Mv(t){const i=t.children&&t.children.map(Mv),e=i?Object.assign(Object.assign({},t),{children:i}):Object.assign({},t);return!e.component&&(i||e.loadChildren)&&e.outlet&&e.outlet!==Yt&&(e.component=GT),e}function Yr(t){return t.outlet||Yt}function zT(t,i){const e=t.filter(n=>Yr(n)===i);return e.push(...t.filter(n=>Yr(n)!==i)),e}const $T={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function jh(t,i,e){var n;if(""===i.path)return"full"===i.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},$T):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(i.matcher||w3)(e,t,i);if(!a)return Object.assign({},$T);const o={};Bi(a.posParams,(l,c)=>{o[c]=l.path});const s=a.consumed.length>0?Object.assign(Object.assign({},o),a.consumed[a.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:s,positionalParamSegments:null!==(n=a.posParams)&&void 0!==n?n:{}}}function zh(t,i,e,n,r="corrected"){if(e.length>0&&function dB(t,i,e){return e.some(n=>$h(t,i,n)&&Yr(n)!==Yt)}(t,e,n)){const o=new tn(i,function uB(t,i,e,n){const r={};r[Yt]=n,n._sourceSegment=t,n._segmentIndexShift=i.length;for(const a of e)if(""===a.path&&Yr(a)!==Yt){const o=new tn([],{});o._sourceSegment=t,o._segmentIndexShift=i.length,r[Yr(a)]=o}return r}(t,i,n,new tn(e,t.children)));return o._sourceSegment=t,o._segmentIndexShift=i.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function hB(t,i,e){return e.some(n=>$h(t,i,n))}(t,e,n)){const o=new tn(t.segments,function cB(t,i,e,n,r,a){const o={};for(const s of n)if($h(t,e,s)&&!r[Yr(s)]){const l=new tn([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===a?t.segments.length:i.length,o[Yr(s)]=l}return Object.assign(Object.assign({},r),o)}(t,i,e,n,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=i.length,{segmentGroup:o,slicedSegments:e}}const a=new tn(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=i.length,{segmentGroup:a,slicedSegments:e}}function $h(t,i,e){return(!(t.hasChildren()||i.length>0)||"full"!==e.pathMatch)&&""===e.path}function qT(t,i,e,n){return!!(Yr(t)===n||n!==Yt&&$h(i,e,t))&&("**"===t.path||jh(i,t,e).matched)}function WT(t,i,e){return 0===i.length&&!t.children[e]}class lu{constructor(i){this.segmentGroup=i||null}}class XT{constructor(i){this.urlTree=i}}function qh(t){return new Be(i=>i.error(new lu(t)))}function YT(t){return new Be(i=>i.error(new XT(t)))}function fB(t){return new Be(i=>i.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class mB{constructor(i,e,n,r,a){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=i.get(Ja)}apply(){const i=zh(this.urlTree.root,[],[],this.config).segmentGroup,e=new tn(i.segments,i.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Yt).pipe(Et(a=>this.createUrlTree(kv(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Eo(a=>{if(a instanceof XT)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof lu?this.noMatchError(a):a}))}match(i){return this.expandSegmentGroup(this.ngModule,this.config,i.root,Yt).pipe(Et(r=>this.createUrlTree(kv(r),i.queryParams,i.fragment))).pipe(Eo(r=>{throw r instanceof lu?this.noMatchError(r):r}))}noMatchError(i){return new Error(`Cannot match any routes. URL Segment: '${i.segmentGroup}'`)}createUrlTree(i,e,n){const r=i.segments.length>0?new tn([],{[Yt]:i}):i;return new os(r,e,n)}expandSegmentGroup(i,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(i,e,n).pipe(Et(a=>new tn([],a))):this.expandSegment(i,n,e,n.segments,r,!0)}expandChildren(i,e,n){const r=[];for(const a of Object.keys(n.children))"primary"===a?r.unshift(a):r.push(a);return Pi(r).pipe(Jc(a=>{const o=n.children[a],s=zT(e,a);return this.expandSegmentGroup(i,s,o,a).pipe(Et(l=>({segment:l,outlet:a})))}),uT((a,o)=>(a[o.outlet]=o.segment,a),{}),function s3(t,i){const e=arguments.length>=2;return n=>n.pipe(t?Fi((r,a)=>t(r,a,n)):Fe,pv(1),e?hT(i):dT(()=>new Ih))}())}expandSegment(i,e,n,r,a,o){return Pi(n).pipe(Jc(s=>this.expandSegmentAgainstRoute(i,e,n,s,r,a,o).pipe(Eo(c=>{if(c instanceof lu)return Mt(null);throw c}))),Sl(s=>!!s),Eo((s,l)=>{if(s instanceof Ih||"EmptyError"===s.name){if(WT(e,r,a))return Mt(new tn([],{}));throw new lu(e)}throw s}))}expandSegmentAgainstRoute(i,e,n,r,a,o,s){return qT(r,e,a,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(i,e,r,a,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o):qh(e):qh(e)}expandSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(i,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(i,e,n,r){const a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?YT(a):this.lineralizeSegments(n,a).pipe(si(o=>{const s=new tn(o,{});return this.expandSegment(i,s,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o){const{matched:s,consumedSegments:l,lastChild:c,positionalParamSegments:u}=jh(e,r,a);if(!s)return qh(e);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?YT(d):this.lineralizeSegments(r,d).pipe(si(m=>this.expandSegment(i,e,n,m.concat(a.slice(c)),o,!1)))}matchSegmentAgainstRoute(i,e,n,r,a){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Mt(n._loadedConfig):this.configLoader.load(i.injector,n)).pipe(Et(m=>(n._loadedConfig=m,new tn(r,{})))):Mt(new tn(r,{}));const{matched:o,consumedSegments:s,lastChild:l}=jh(e,n,r);if(!o)return qh(e);const c=r.slice(l);return this.getChildConfig(i,n,r).pipe(si(d=>{const m=d.module,v=d.routes,{segmentGroup:_,slicedSegments:y}=zh(e,s,c,v),S=new tn(_.segments,_.children);if(0===y.length&&S.hasChildren())return this.expandChildren(m,v,S).pipe(Et(j=>new tn(s,j)));if(0===v.length&&0===y.length)return Mt(new tn(s,{}));const T=Yr(n)===a;return this.expandSegment(m,S,v,y,T?Yt:a,!0).pipe(Et(O=>new tn(s.concat(O.segments),O.children)))}))}getChildConfig(i,e,n){return e.children?Mt(new Rv(e.children,i)):e.loadChildren?void 0!==e._loadedConfig?Mt(e._loadedConfig):this.runCanLoadGuards(i.injector,e,n).pipe(si(r=>r?this.configLoader.load(i.injector,e).pipe(Et(a=>(e._loadedConfig=a,a))):function pB(t){return new Be(i=>i.error(mv(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Mt(new Rv([],i))}runCanLoadGuards(i,e,n){const r=e.canLoad;return r&&0!==r.length?Mt(r.map(o=>{const s=i.get(o);let l;if(function tB(t){return t&&Io(t.canLoad)}(s))l=s.canLoad(e,n);else{if(!Io(s))throw new Error("Invalid CanLoad guard");l=s(e,n)}return Fa(l)})).pipe(ou(),Yi(o=>{if(!ls(o))return;const s=mv(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw s.url=o,s}),Et(o=>!0===o)):Mt(!0)}lineralizeSegments(i,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Mt(n);if(r.numberOfChildren>1||!r.children[Yt])return fB(i.redirectTo);r=r.children[Yt]}}applyRedirectCommands(i,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),i,n)}applyRedirectCreatreUrlTree(i,e,n,r){const a=this.createSegmentGroup(i,e.root,n,r);return new os(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(i,e){const n={};return Bi(i,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const s=r.substring(1);n[a]=e[s]}else n[a]=r}),n}createSegmentGroup(i,e,n,r){const a=this.createSegments(i,e.segments,n,r);let o={};return Bi(e.children,(s,l)=>{o[l]=this.createSegmentGroup(i,s,n,r)}),new tn(a,o)}createSegments(i,e,n,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(i,a,r):this.findOrReturn(a,n))}findPosParam(i,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${i}'. Cannot find '${e.path}'.`);return r}findOrReturn(i,e){let n=0;for(const r of e){if(r.path===i.path)return e.splice(n),r;n++}return i}}function kv(t){const i={};for(const n of Object.keys(t.children)){const a=kv(t.children[n]);(a.segments.length>0||a.hasChildren())&&(i[n]=a)}return function vB(t){if(1===t.numberOfChildren&&t.children[Yt]){const i=t.children[Yt];return new tn(t.segments.concat(i.segments),i.children)}return t}(new tn(t.segments,i))}class QT{constructor(i){this.path=i,this.route=this.path[this.path.length-1]}}class Wh{constructor(i,e){this.component=i,this.route=e}}function _B(t,i,e){const n=t._root;return cu(n,i?i._root:null,e,[n.value])}function Xh(t,i,e){const n=function wB(t){if(!t)return null;for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(i);return(n?n.module.injector:e).get(t)}function cu(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=Dl(i);return t.children.forEach(o=>{(function CB(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,o=i?i.value:null,s=e?e.getContext(t.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){const l=function SB(t,i,e){if("function"==typeof e)return e(t,i);switch(e){case"pathParamsChange":return!ss(t.url,i.url);case"pathParamsOrQueryParamsChange":return!ss(t.url,i.url)||!Va(t.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cv(t,i)||!Va(t.queryParams,i.queryParams);default:return!Cv(t,i)}}(o,a,a.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new QT(n)):(a.data=o.data,a._resolvedData=o._resolvedData),cu(t,i,a.component?s?s.children:null:e,n,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new Wh(s.outlet.component,o))}else o&&uu(i,s,r),r.canActivateChecks.push(new QT(n)),cu(t,null,a.component?s?s.children:null:e,n,r)})(o,a[o.value.outlet],e,n.concat([o.value]),r),delete a[o.value.outlet]}),Bi(a,(o,s)=>uu(o,e.getContext(s),r)),r}function uu(t,i,e){const n=Dl(t),r=t.value;Bi(n,(a,o)=>{uu(a,r.component?i?i.children.getContext(o):null:i,e)}),e.canDeactivateChecks.push(new Wh(r.component&&i&&i.outlet&&i.outlet.isActivated?i.outlet.component:null,r))}class EB{}function KT(t){return new Be(i=>i.error(t))}class OB{constructor(i,e,n,r,a,o){this.rootComponentType=i,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}recognize(){const i=zh(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,i,Yt);if(null===e)return null;const n=new Uh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Yt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ao(n,e),a=new NT(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(i){const e=i.value,n=OT(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),i.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(i,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(i,e):this.processSegment(i,e,e.segments,n)}processChildren(i,e){const n=[];for(const a of Object.keys(e.children)){const o=e.children[a],s=zT(i,a),l=this.processSegmentGroup(s,o,a);if(null===l)return null;n.push(...l)}const r=ZT(n);return function NB(t){t.sort((i,e)=>i.value.outlet===Yt?-1:e.value.outlet===Yt?1:i.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(i,e,n,r){for(const a of i){const o=this.processSegmentAgainstRoute(a,e,n,r);if(null!==o)return o}return WT(e,n,r)?[]:null}processSegmentAgainstRoute(i,e,n,r){if(i.redirectTo||!qT(i,e,n,r))return null;let a,o=[],s=[];if("**"===i.path){const v=n.length>0?yT(n).parameters:{};a=new Uh(n,v,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tD(i),Yr(i),i.component,i,JT(e),eD(e)+n.length,nD(i))}else{const v=jh(e,i,n);if(!v.matched)return null;o=v.consumedSegments,s=n.slice(v.lastChild),a=new Uh(o,v.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tD(i),Yr(i),i.component,i,JT(e),eD(e)+o.length,nD(i))}const l=function VB(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(i),{segmentGroup:c,slicedSegments:u}=zh(e,o,s,l.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const v=this.processChildren(l,c);return null===v?null:[new ao(a,v)]}if(0===l.length&&0===u.length)return[new ao(a,[])];const d=Yr(i)===r,m=this.processSegment(l,c,u,d?Yt:r);return null===m?null:[new ao(a,m)]}}function FB(t){const i=t.value.routeConfig;return i&&""===i.path&&void 0===i.redirectTo}function ZT(t){const i=[],e=new Set;for(const n of t){if(!FB(n)){i.push(n);continue}const r=i.find(a=>n.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):i.push(n)}for(const n of e){const r=ZT(n.children);i.push(new ao(n.value,r))}return i.filter(n=>!e.has(n))}function JT(t){let i=t;for(;i._sourceSegment;)i=i._sourceSegment;return i}function eD(t){let i=t,e=i._segmentIndexShift?i._segmentIndexShift:0;for(;i._sourceSegment;)i=i._sourceSegment,e+=i._segmentIndexShift?i._segmentIndexShift:0;return e-1}function tD(t){return t.data||{}}function nD(t){return t.resolve||{}}function iD(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Av(t){return io(i=>{const e=t(i);return e?Pi(e).pipe(Et(()=>i)):Mt(i)})}class $B extends class zB{shouldDetach(i){return!1}store(i,e){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,e){return i.routeConfig===e.routeConfig}}{}const Pv=new qt("ROUTES");class rD{constructor(i,e,n,r){this.injector=i,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(i,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(Et(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=a.create(i);return new Rv(_T(o.injector.get(Pv,void 0,It.Self|It.Optional)).map(Mv),o)}),Eo(a=>{throw e._loader$=void 0,a}));return e._loader$=new r3(r,()=>new _e).pipe(cT()),e._loader$}loadModuleFactory(i){return Fa(i()).pipe(si(e=>e instanceof yw?Mt(e):Pi(this.compiler.compileModuleAsync(e))))}}class WB{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,e){return i}}function XB(t){throw t}function YB(t,i,e){return i.parse("/")}function aD(t,i){return Mt(null)}const QB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let kr=(()=>{class t{constructor(e,n,r,a,o,s,l){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=a,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _e,this.errorHandler=XB,this.malformedUriErrorHandler=YB,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:aD,afterPreactivation:aD},this.urlHandlingStrategy=new WB,this.routeReuseStrategy=new $B,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Ja),this.console=o.get(nC);const d=o.get(Mn);this.isNgZoneEnabled=d instanceof Mn&&Mn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function S3(){return new os(new tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new rD(o,s,m=>this.triggerEvent(new pT(m)),m=>this.triggerEvent(new gT(m))),this.routerState=IT(this.currentUrlTree,this.rootComponentType),this.transitions=new Qn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(Fi(r=>0!==r.id),Et(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),io(r=>{let a=!1,o=!1;return Mt(r).pipe(Yi(s=>{this.currentNavigation={id:s.id,initialUrl:s.currentRawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),io(s=>{const l=this.browserUrlTree.toString(),c=!this.navigated||s.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Yh(s.source)&&(this.browserUrlTree=s.extractedUrl),Mt(s).pipe(io(d=>{const m=this.transitions.getValue();return n.next(new gv(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),m!==this.transitions.getValue()?Jr:Promise.resolve(d)}),function bB(t,i,e,n){return io(r=>function gB(t,i,e,n,r){return new mB(t,i,e,n,r).apply()}(t,i,e,r.extractedUrl,n).pipe(Et(a=>Object.assign(Object.assign({},r),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Yi(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function BB(t,i,e,n,r){return si(a=>function IB(t,i,e,n,r="emptyOnly",a="legacy"){try{const o=new OB(t,i,e,n,r,a).recognize();return null===o?KT(new EB):Mt(o)}catch(o){return KT(o)}}(t,i,a.urlAfterRedirects,e(a.urlAfterRedirects),n,r).pipe(Et(o=>Object.assign(Object.assign({},a),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Yi(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const v=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(v,d)}this.browserUrlTree=d.urlAfterRedirects}const m=new u3(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);n.next(m)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:m,extractedUrl:v,source:_,restoredState:y,extras:S}=s,T=new gv(m,this.serializeUrl(v),_,y);n.next(T);const C=IT(v,this.rootComponentType).snapshot;return Mt(Object.assign(Object.assign({},s),{targetSnapshot:C,urlAfterRedirects:v,extras:Object.assign(Object.assign({},S),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=s.rawUrl,s.resolve(null),Jr}),Av(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:m,replaceUrl:v}}=s;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!m,replaceUrl:!!v})}),Yi(s=>{const l=new d3(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot);this.triggerEvent(l)}),Et(s=>Object.assign(Object.assign({},s),{guards:_B(s.targetSnapshot,s.currentSnapshot,this.rootContexts)})),function TB(t,i){return si(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:o}}=e;return 0===o.length&&0===a.length?Mt(Object.assign(Object.assign({},e),{guardsResult:!0})):function DB(t,i,e,n){return Pi(t).pipe(si(r=>function PB(t,i,e,n,r){const a=i&&i.routeConfig?i.routeConfig.canDeactivate:null;return a&&0!==a.length?Mt(a.map(s=>{const l=Xh(s,i,r);let c;if(function rB(t){return t&&Io(t.canDeactivate)}(l))c=Fa(l.canDeactivate(t,i,e,n));else{if(!Io(l))throw new Error("Invalid CanDeactivate guard");c=Fa(l(t,i,e,n))}return c.pipe(Sl())})).pipe(ou()):Mt(!0)}(r.component,r.route,e,i,n)),Sl(r=>!0!==r,!0))}(o,n,r,t).pipe(si(s=>s&&function eB(t){return"boolean"==typeof t}(s)?function RB(t,i,e,n){return Pi(i).pipe(Jc(r=>Zc(function MB(t,i){return null!==t&&i&&i(new g3(t)),Mt(!0)}(r.route.parent,n),function xB(t,i){return null!==t&&i&&i(new v3(t)),Mt(!0)}(r.route,n),function AB(t,i,e){const n=i[i.length-1],a=i.slice(0,i.length-1).reverse().map(o=>function yB(t){const i=t.routeConfig?t.routeConfig.canActivateChild:null;return i&&0!==i.length?{node:t,guards:i}:null}(o)).filter(o=>null!==o).map(o=>lT(()=>Mt(o.guards.map(l=>{const c=Xh(l,o.node,e);let u;if(function iB(t){return t&&Io(t.canActivateChild)}(c))u=Fa(c.canActivateChild(n,t));else{if(!Io(c))throw new Error("Invalid CanActivateChild guard");u=Fa(c(n,t))}return u.pipe(Sl())})).pipe(ou())));return Mt(a).pipe(ou())}(t,r.path,e),function kB(t,i,e){const n=i.routeConfig?i.routeConfig.canActivate:null;if(!n||0===n.length)return Mt(!0);const r=n.map(a=>lT(()=>{const o=Xh(a,i,e);let s;if(function nB(t){return t&&Io(t.canActivate)}(o))s=Fa(o.canActivate(i,t));else{if(!Io(o))throw new Error("Invalid CanActivate guard");s=Fa(o(i,t))}return s.pipe(Sl())}));return Mt(r).pipe(ou())}(t,r.route,e))),Sl(r=>!0!==r,!0))}(n,a,t,i):Mt(s)),Et(s=>Object.assign(Object.assign({},e),{guardsResult:s})))})}(this.ngModule.injector,s=>this.triggerEvent(s)),Yi(s=>{if(ls(s.guardsResult)){const c=mv(`Redirecting to "${this.serializeUrl(s.guardsResult)}"`);throw c.url=s.guardsResult,c}const l=new h3(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.triggerEvent(l)}),Fi(s=>!!s.guardsResult||(this.restoreHistory(s),this.cancelNavigationTransition(s,""),!1)),Av(s=>{if(s.guards.canActivateChecks.length)return Mt(s).pipe(Yi(l=>{const c=new f3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),io(l=>{let c=!1;return Mt(l).pipe(function LB(t,i){return si(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return Mt(e);let a=0;return Pi(r).pipe(Jc(o=>function UB(t,i,e,n){return function HB(t,i,e,n){const r=iD(t);if(0===r.length)return Mt({});const a={};return Pi(r).pipe(si(o=>function GB(t,i,e,n){const r=Xh(t,i,n);return Fa(r.resolve?r.resolve(i,e):r(i,e))}(t[o],i,e,n).pipe(Yi(s=>{a[o]=s}))),pv(1),si(()=>iD(a).length===r.length?Mt(a):Jr))}(t._resolve,t,i,n).pipe(Et(a=>(t._resolvedData=a,t.data=Object.assign(Object.assign({},t.data),OT(t,e).resolve),null)))}(o.route,n,t,i)),Yi(()=>a++),pv(1),si(o=>a===r.length?Mt(e):Jr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Yi({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Yi(l=>{const c=new p3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),Av(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:m,replaceUrl:v}}=s;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!m,replaceUrl:!!v})}),Et(s=>{const l=function H3(t,i,e){const n=iu(t,i._root,e?e._root:void 0);return new ET(n,i)}(this.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return Object.assign(Object.assign({},s),{targetRouterState:l})}),Yi(s=>{this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects)}),((t,i,e)=>Et(n=>(new Z3(i,n.targetRouterState,n.currentRouterState,e).activate(t),n)))(this.rootContexts,this.routeReuseStrategy,s=>this.triggerEvent(s)),Yi({next(){a=!0},complete(){a=!0}}),function l3(t){return yt((i,e)=>{try{i.subscribe(e)}finally{e.add(t)}})}(()=>{var s;a||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(s=this.currentNavigation)||void 0===s?void 0:s.id)===r.id&&(this.currentNavigation=null)}),Eo(s=>{if(o=!0,function y3(t){return t&&t[vT]}(s)){const l=ls(s.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new fT(r.id,this.serializeUrl(r.extractedUrl),s.message);n.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(s.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Yh(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new c3(r.id,this.serializeUrl(r.extractedUrl),s);n.next(l);try{r.resolve(this.errorHandler(s))}catch(c){r.reject(c)}}return Jr}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{var r;const a={replaceUrl:!0},o=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}const s=this.parseUrl(e.url);this.scheduleNavigation(s,n,o,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){jT(e),this.config=e.map(Mv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:a,fragment:o,queryParamsHandling:s,preserveFragment:l}=n,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(s){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}return null!==d&&(d=this.removeEmptyProps(d)),function z3(t,i,e,n,r){if(0===e.length)return Sv(i.root,i.root,i,n,r);const a=function $3(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new BT(!0,0,t);let i=0,e=!1;const n=t.reduce((r,a,o)=>{if("object"==typeof a&&null!=a){if(a.outlets){const s={};return Bi(a.outlets,(l,c)=>{s[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:s}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===o?(a.split("/").forEach((s,l)=>{0==l&&"."===s||(0==l&&""===s?e=!0:".."===s?i++:""!=s&&r.push(s))}),r):[...r,a]},[]);return new BT(e,i,n)}(e);if(a.toRoot())return Sv(i.root,new tn([],{}),i,n,r);const o=function q3(t,i,e){if(t.isAbsolute)return new Tv(i.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new Tv(a,a===i.root,0)}const n=Hh(t.commands[0])?0:1;return function W3(t,i,e){let n=t,r=i,a=e;for(;a>r;){if(a-=r,n=n.parent,!n)throw new Error("Invalid number of '../'");r=n.segments.length}return new Tv(n,!1,r-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+n,t.numberOfDoubleDots)}(a,i,t),s=o.processChildren?Gh(o.segmentGroup,o.index,a.commands):LT(o.segmentGroup,o.index,a.commands);return Sv(o.segmentGroup,s,i,n,r)}(c,this.currentUrlTree,e,d,null!=u?u:null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=ls(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function ZB(t){for(let i=0;i<t.length;i++){const e=t[i];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${i}`)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?Object.assign({},QB):!1===n?Object.assign({},KB):n,ls(e))return CT(this.currentUrlTree,e,r);const a=this.parseUrl(e);return CT(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const a=e[r];return null!=a&&(n[r]=a),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new eu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,a,o){var s,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=Yh(n)&&u&&!Yh(u.source),m=u.rawUrl.toString()===e.toString(),v=u.id===(null===(s=this.currentNavigation)||void 0===s?void 0:s.id);if(d&&m&&v)return Promise.resolve(!0);let y,S,T;o?(y=o.resolve,S=o.reject,T=o.promise):T=new Promise((j,G)=>{y=j,S=G});const C=++this.navigationId;let O;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),O=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):O=0,this.setTransition({id:C,targetPageId:O,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:y,reject:S,promise:T,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),T.catch(j=>Promise.reject(j))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},n.extras.state),this.generateNgRouterState(n.id,n.targetPageId));this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(e,n=!1){var r,a;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n){const r=new fT(e.id,this.serializeUrl(e.extractedUrl),n);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return t.\u0275fac=function(e){Mg()},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();function Yh(t){return"imperative"!==t}class oD{}class sD{preload(i,e){return Mt(null)}}let lD=(()=>{class t{constructor(e,n,r,a){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=new rD(r,n,l=>e.triggerEvent(new pT(l)),l=>e.triggerEvent(new gT(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Fi(e=>e instanceof eu),Jc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Ja);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const a of n)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children));return Pi(r).pipe(Kl(),Et(a=>{}))}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>(n._loadedConfig?Mt(n._loadedConfig):this.loader.load(e.injector,n)).pipe(si(a=>(n._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Le(kr),Le(eh),Le(ci),Le(oD))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})(),Ov=(()=>{class t{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof gv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof eu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof mT&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new mT(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){Mg()},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();const cs=new qt("ROUTER_CONFIGURATION"),cD=new qt("ROUTER_FORROOT_GUARD"),n4=[Sm,{provide:RT,useClass:xT},{provide:kr,useFactory:function s4(t,i,e,n,r,a,o={},s,l){const c=new kr(null,t,i,e,n,r,_T(a));return s&&(c.urlHandlingStrategy=s),l&&(c.routeReuseStrategy=l),function l4(t,i){t.errorHandler&&(i.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(i.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(i.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(i.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(i.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(i.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(i.canceledNavigationResolution=t.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,m;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(m=console.groupEnd)||void 0===m||m.call(console)}),c},deps:[RT,su,Sm,ci,eh,Pv,cs,[class qB{},new xa],[class jB{},new xa]]},su,{provide:Rl,useFactory:function c4(t){return t.routerState.root},deps:[kr]},lD,sD,class t4{preload(i,e){return e().pipe(Eo(()=>Mt(null)))}},{provide:cs,useValue:{enableTracing:!1}}];function i4(){return new lC("Router",kr)}let uD=(()=>{class t{constructor(e,n){}static forRoot(e,n){return{ngModule:t,providers:[n4,dD(e),{provide:cD,useFactory:o4,deps:[[kr,new xa,new Gs]]},{provide:cs,useValue:n||{}},{provide:bl,useFactory:a4,deps:[ns,[new pc(Cm),new xa],cs]},{provide:Ov,useFactory:r4,deps:[kr,pV,cs]},{provide:oD,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:sD},{provide:lC,multi:!0,useFactory:i4},[Nv,{provide:Zd,multi:!0,useFactory:u4,deps:[Nv]},{provide:hD,useFactory:d4,deps:[Nv]},{provide:tC,multi:!0,useExisting:hD}]]}}static forChild(e){return{ngModule:t,providers:[dD(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Le(cD,8),Le(kr,8))},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({}),t})();function r4(t,i,e){return e.scrollOffset&&i.setOffset(e.scrollOffset),new Ov(t,i,e)}function a4(t,i,e={}){return e.useHash?new ZO(t,i):new MC(t,i)}function o4(t){return"guarded"}function dD(t){return[{provide:jx,multi:!0,useValue:t},{provide:Pv,multi:!0,useValue:t}]}let Nv=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new _e}appInitializer(){return this.injector.get(YO,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let n=null;const r=new Promise(s=>n=s),a=this.injector.get(kr),o=this.injector.get(cs);return"disabled"===o.initialNavigation?(a.setUpLocationChangeListener(),n(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Mt(null):(this.initNavigation=!0,n(!0),this.resultOfPreactivationDone),a.initialNavigation()):n(!0),r})}bootstrapListener(e){const n=this.injector.get(cs),r=this.injector.get(lD),a=this.injector.get(Ov),o=this.injector.get(kr),s=this.injector.get(es);e===s.components[0]&&(("enabledNonBlocking"===n.initialNavigation||void 0===n.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),a.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(Le(ci))},t.\u0275prov=tt({token:t,factory:t.\u0275fac}),t})();function u4(t){return t.appInitializer.bind(t)}function d4(t){return t.bootstrapListener.bind(t)}const hD=new qt("Router Initializer"),f4=[];let p4=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[uD.forRoot(f4)],uD]}),t})();function fD(t,i,e,n,r,a,o){try{var s=t[a](o),l=s.value}catch(c){return void e(c)}s.done?i(l):Promise.resolve(l).then(n,r)}function ar(t){return function(){var i=this,e=arguments;return new Promise(function(n,r){var a=t.apply(i,e);function o(l){fD(a,n,r,o,s,"next",l)}function s(l){fD(a,n,r,o,s,"throw",l)}o(void 0)})}}var Wt=(()=>{return(t=Wt||(Wt={}))[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",Wt;var t})();const or=new class g4{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(i){this._typeMetadatas.has(i.target)||this._typeMetadatas.set(i.target,new Map),this._typeMetadatas.get(i.target).set(i.propertyName,i)}addTransformMetadata(i){this._transformMetadatas.has(i.target)||this._transformMetadatas.set(i.target,new Map),this._transformMetadatas.get(i.target).has(i.propertyName)||this._transformMetadatas.get(i.target).set(i.propertyName,[]),this._transformMetadatas.get(i.target).get(i.propertyName).push(i)}addExposeMetadata(i){this._exposeMetadatas.has(i.target)||this._exposeMetadatas.set(i.target,new Map),this._exposeMetadatas.get(i.target).set(i.propertyName,i)}addExcludeMetadata(i){this._excludeMetadatas.has(i.target)||this._excludeMetadatas.set(i.target,new Map),this._excludeMetadatas.get(i.target).set(i.propertyName,i)}findTransformMetadatas(i,e,n){return this.findMetadatas(this._transformMetadatas,i,e).filter(r=>!r.options||!0===r.options.toClassOnly&&!0===r.options.toPlainOnly||(!0===r.options.toClassOnly?n===Wt.CLASS_TO_CLASS||n===Wt.PLAIN_TO_CLASS:!0!==r.options.toPlainOnly||n===Wt.CLASS_TO_PLAIN))}findExcludeMetadata(i,e){return this.findMetadata(this._excludeMetadatas,i,e)}findExposeMetadata(i,e){return this.findMetadata(this._exposeMetadatas,i,e)}findExposeMetadataByCustomName(i,e){return this.getExposedMetadatas(i).find(n=>n.options&&n.options.name===e)}findTypeMetadata(i,e){return this.findMetadata(this._typeMetadatas,i,e)}getStrategy(i){const e=this._excludeMetadatas.get(i),n=e&&e.get(void 0),r=this._exposeMetadatas.get(i),a=r&&r.get(void 0);return n&&a||!n&&!a?"none":n?"excludeAll":"exposeAll"}getExposedMetadatas(i){return this.getMetadata(this._exposeMetadatas,i)}getExcludedMetadatas(i){return this.getMetadata(this._excludeMetadatas,i)}getExposedProperties(i,e){return this.getExposedMetadatas(i).filter(n=>!n.options||!0===n.options.toClassOnly&&!0===n.options.toPlainOnly||(!0===n.options.toClassOnly?e===Wt.CLASS_TO_CLASS||e===Wt.PLAIN_TO_CLASS:!0!==n.options.toPlainOnly||e===Wt.CLASS_TO_PLAIN)).map(n=>n.propertyName)}getExcludedProperties(i,e){return this.getExcludedMetadatas(i).filter(n=>!n.options||!0===n.options.toClassOnly&&!0===n.options.toPlainOnly||(!0===n.options.toClassOnly?e===Wt.CLASS_TO_CLASS||e===Wt.PLAIN_TO_CLASS:!0!==n.options.toPlainOnly||e===Wt.CLASS_TO_PLAIN)).map(n=>n.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(i,e){const n=i.get(e);let r;n&&(r=Array.from(n.values()).filter(o=>void 0!==o.propertyName));const a=[];for(const o of this.getAncestors(e)){const s=i.get(o);if(s){const l=Array.from(s.values()).filter(c=>void 0!==c.propertyName);a.push(...l)}}return a.concat(r||[])}findMetadata(i,e,n){const r=i.get(e);if(r){const a=r.get(n);if(a)return a}for(const a of this.getAncestors(e)){const o=i.get(a);if(o){const s=o.get(n);if(s)return s}}}findMetadatas(i,e,n){const r=i.get(e);let a;r&&(a=r.get(n));const o=[];for(const s of this.getAncestors(e)){const l=i.get(s);l&&l.has(n)&&o.push(...l.get(n))}return o.slice().reverse().concat((a||[]).slice().reverse())}getAncestors(i){if(!i)return[];if(!this._ancestorsMap.has(i)){const e=[];for(let n=Object.getPrototypeOf(i.prototype.constructor);void 0!==n.prototype;n=Object.getPrototypeOf(n.prototype.constructor))e.push(n);this._ancestorsMap.set(i,e)}return this._ancestorsMap.get(i)}};function et(t,i={}){return function(e,n){const r=Reflect.getMetadata("design:type",e,n);or.addTypeMetadata({target:e.constructor,propertyName:n,reflectedType:r,typeFunction:t,options:i})}}var X=(()=>{return(t=X||(X={}))[t.Horse=0]="Horse",t[t.Cheetah=1]="Cheetah",t[t.Hare=2]="Hare",t[t.Monkey=3]="Monkey",t[t.Goat=4]="Goat",t[t.Gecko=5]="Gecko",t[t.Dolphin=6]="Dolphin",t[t.Shark=7]="Shark",t[t.Octopus=8]="Octopus",t[t.Penguin=9]="Penguin",t[t.Caribou=10]="Caribou",t[t.Salamander=11]="Salamander",t[t.Fox=12]="Fox",X;var t})(),z=(()=>{return(t=z||(z={}))[t.Flatland=0]="Flatland",t[t.Mountain=1]="Mountain",t[t.Ocean=2]="Ocean",t[t.Tundra=3]="Tundra",t[t.Volcanic=4]="Volcanic",z;var t})();class le{constructor(i,e,n){this.name=i,this.amount=e,void 0!==n&&(this.itemType=n)}makeCopy(i){var e=new le("",0);return e.name=JSON.parse(JSON.stringify(i.name)),e.amount=JSON.parse(JSON.stringify(i.amount)),e.itemType=JSON.parse(JSON.stringify(i.itemType)),e}}var Y=(()=>{return(t=Y||(Y={}))[t.Animal=0]="Animal",t[t.Food=1]="Food",t[t.Training=2]="Training",t[t.Ability=3]="Ability",t[t.Specialty=4]="Specialty",t[t.Equipment=5]="Equipment",t[t.Resources=6]="Resources",t[t.Progression=7]="Progression",t[t.Other=8]="Other",t[t.Consumable=9]="Consumable",Y;var t})();class Ba{constructor(){this.totalRewards=0,this.rewardsObtained=0,this.rewards=[]}}Ge([et(()=>le),Qe("design:type",Array)],Ba.prototype,"rewards",void 0);class Ml{constructor(){this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.noviceTrack=new Ba,this.noviceTrack.totalRewards=12;var i=50;this.noviceTrack.rewards.push(new le("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new le("Bonus Breed XP Gain From Training",1,Y.Other)),this.noviceTrack.rewards.push(new le("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new le("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.noviceTrack.rewards.push(new le("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new le("Bonus Breed XP Gain From Training",1,Y.Other)),this.noviceTrack.rewards.push(new le("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new le("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.noviceTrack.rewards.push(new le("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new le("Bonus Breed XP Gain From Training",1,Y.Other)),this.noviceTrack.rewards.push(new le("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new le("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.intermediateTrack=new Ba,this.intermediateTrack.totalRewards=12,this.intermediateTrack.rewards.push(new le("Coins",200,Y.Resources)),this.intermediateTrack.rewards.push(new le("Bonus Breed XP Gain From Training",2,Y.Other)),this.intermediateTrack.rewards.push(new le("Medals",1,Y.Resources)),this.intermediateTrack.rewards.push(new le("Diminishing Returns per Facility Level",2,Y.Other)),this.intermediateTrack.rewards.push(new le("Training Time Reduction",1,Y.Other)),this.intermediateTrack.rewards.push(new le("Bonus Breed XP Gain From Circuit Races",5,Y.Other)),this.intermediateTrack.rewards.push(new le("Coins",200,Y.Resources)),this.intermediateTrack.rewards.push(new le("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.intermediateTrack.rewards.push(new le("Medals",1,Y.Resources)),this.intermediateTrack.rewards.push(new le("Bonus Breed XP Gain From Training",2,Y.Other)),this.intermediateTrack.rewards.push(new le("Training Time Reduction",1,Y.Other)),this.intermediateTrack.rewards.push(new le("Diminishing Returns per Facility Level",3,Y.Other)),this.masterTrack=new Ba,this.masterTrack.totalRewards=12,this.masterTrack.rewards.push(new le("Bonus Breed XP Gain From Free Races",5,Y.Other)),this.masterTrack.rewards.push(new le("Diminishing Returns per Facility Level",2,Y.Other)),this.masterTrack.rewards.push(new le("Training Time Reduction",1,Y.Other)),this.masterTrack.rewards.push(new le("Coins",1e3,Y.Resources)),this.masterTrack.rewards.push(new le("Bonus Breed XP Gain From Training",3,Y.Other)),this.masterTrack.rewards.push(new le("Bonus Talents",2,Y.Other)),this.masterTrack.rewards.push(new le("Training Time Reduction",1,Y.Other)),this.masterTrack.rewards.push(new le("Coins",1e3,Y.Resources)),this.masterTrack.rewards.push(new le("Orb Pendant",1,Y.Other)),this.masterTrack.rewards.push(new le("Diminishing Returns per Facility Level",3,Y.Other)),this.masterTrack.rewards.push(new le("Training Time Reduction",1,Y.Other)),this.masterTrack.rewards.push(new le("Bonus Talents",3,Y.Other))}getTotalRewardCount(){return this.noviceTrack.totalRewards+this.intermediateTrack.totalRewards+this.masterTrack.totalRewards}getTotalRewardsObtained(){return this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalRewardsRemaining(){return this.getTotalRewardCount()-this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalTrainingTrackBonusBreedXpFromFreeRaces(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=4&&(i+=this.noviceTrack.rewards[3].amount),this.noviceTrack.rewardsObtained>=8&&(i+=this.noviceTrack.rewards[7].amount),this.noviceTrack.rewardsObtained>=12&&(i+=this.noviceTrack.rewards[11].amount),this.intermediateTrack.rewardsObtained>=8&&(i+=this.intermediateTrack.rewards[7].amount),this.masterTrack.rewardsObtained>=1&&(i+=this.masterTrack.rewards[0].amount),i)}getTotalTrainingTrackBonusBreedXpFromCircuitRaces(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=6&&(i+=this.intermediateTrack.rewards[5].amount),i)}getTotalTrainingTrackBonusBreedXpFromTraining(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=2&&(i+=this.noviceTrack.rewards[1].amount),this.noviceTrack.rewardsObtained>=6&&(i+=this.noviceTrack.rewards[5].amount),this.noviceTrack.rewardsObtained>=10&&(i+=this.noviceTrack.rewards[9].amount),this.intermediateTrack.rewardsObtained>=2&&(i+=this.intermediateTrack.rewards[1].amount),this.intermediateTrack.rewardsObtained>=10&&(i+=this.intermediateTrack.rewards[9].amount),this.masterTrack.rewardsObtained>=5&&(i+=this.masterTrack.rewards[4].amount),i)}getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=4&&(i+=this.intermediateTrack.rewards[3].amount),this.intermediateTrack.rewardsObtained>=12&&(i+=this.intermediateTrack.rewards[11].amount),this.masterTrack.rewardsObtained>=2&&(i+=this.masterTrack.rewards[1].amount),this.masterTrack.rewardsObtained>=10&&(i+=this.masterTrack.rewards[9].amount),i)}getTotalTrainingTrackBonusTrainingTimeReduction(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=5&&(i+=this.intermediateTrack.rewards[4].amount),this.intermediateTrack.rewardsObtained>=11&&(i+=this.intermediateTrack.rewards[10].amount),this.masterTrack.rewardsObtained>=3&&(i+=this.masterTrack.rewards[2].amount),this.masterTrack.rewardsObtained>=7&&(i+=this.masterTrack.rewards[6].amount),this.masterTrack.rewardsObtained>=11&&(i+=this.masterTrack.rewards[10].amount),i)}getTotalTrainingTrackBonusTalents(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.masterTrack.rewardsObtained>=6&&(i+=this.masterTrack.rewards[5].amount),this.masterTrack.rewardsObtained>=12&&(i+=this.masterTrack.rewards[11].amount),i)}}Ge([et(()=>Ba),Qe("design:type",Ba)],Ml.prototype,"noviceTrack",void 0),Ge([et(()=>Ba),Qe("design:type",Ba)],Ml.prototype,"intermediateTrack",void 0),Ge([et(()=>Ba),Qe("design:type",Ba)],Ml.prototype,"masterTrack",void 0);class Oe{constructor(i,e,n,r,a,o){this.defaultStaminaModifier=5,this.defaultMaxSpeedModifier=.3,this.defaultAccelerationModifier=.1,this.defaultPowerModifier=1,this.defaultFocusModifier=5,this.defaultAdaptabilityModifier=5,this.defaultBurstDistanceModifier=1,this.diminishingReturnsDefaultStatThreshold=20,void 0!==i&&(this.topSpeed=i),void 0!==e&&(this.acceleration=e),void 0!==n&&(this.endurance=n),void 0!==r&&(this.power=r),void 0!==a&&(this.focus=a),void 0!==o&&(this.adaptability=o)}makeCopy(i){var e=new Oe;return e.topSpeed=i.topSpeed,e.acceleration=i.acceleration,e.endurance=i.endurance,e.power=i.power,e.focus=i.focus,e.adaptability=i.adaptability,e.stamina=i.stamina,e.maxSpeedMs=i.maxSpeedMs,e.accelerationMs=i.accelerationMs,e.powerMs=i.powerMs,e.focusMs=i.focusMs,e.adaptabilityMs=i.adaptabilityMs,e.burstChance=i.burstChance,e.burstDistance=i.burstDistance,e}calculateStamina(i,e,n){return null==i&&(i=this.defaultStaminaModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.endurance<=e?this.endurance*i*n:(e*i+(this.endurance-e)*(i*this.calculateDiminishingReturns(this.endurance-e)))*n}calculateMaxSpeed(i,e,n){return null==i&&(i=this.defaultMaxSpeedModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.topSpeed<=e?this.topSpeed*i*n:(e*i+(this.topSpeed-e)*(i*this.calculateDiminishingReturns(this.topSpeed-e)))*n}calculateTrueAcceleration(i,e,n){return null==i&&(i=this.defaultAccelerationModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.acceleration<=e?this.acceleration*i*n:(e*i+(this.acceleration-e)*(i*this.calculateDiminishingReturns(this.acceleration-e)))*n}calculateTruePower(i,e,n){return null==i&&(i=this.defaultPowerModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.power<=e?this.power*i*n:(e*i+(this.power-e)*(i*this.calculateDiminishingReturns(this.power-e)))*n}calculateTrueFocus(i,e,n){return null==i&&(i=this.defaultFocusModifier),null==n&&(n=1),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.focus<=e?this.focus*i*n:(e*i+(this.focus-e)*(i*this.calculateDiminishingReturns(this.focus-e)))*n}calculateTrueAdaptability(i,e,n){return null==i&&(i=this.defaultAdaptabilityModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.adaptability<=e?this.adaptability*i*n:(e*i+(this.adaptability-e)*(i*this.calculateDiminishingReturns(this.adaptability-e)))*n}calculateBurstChance(i,e,n){var r=this.focus,a=this.adaptability;return null!=e&&(r*=e/this.focusMs),null!=n&&(a*=n/this.adaptabilityMs),(a+r)*(1+i/4)/1e3*100}calculateBurstDistance(i,e,n){null==e&&(e=this.defaultBurstDistanceModifier);var r=this.power;return null!=n&&(r*=n/this.powerMs),r*(1+i/4)*e}topSpeedPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}accelerationPopover(i){return"Every stat point increases acceleration by "+i.toFixed(3)+"m/s up to diminishing returns."}endurancePopover(i){return"Every stat point increases stamina by "+i.toFixed(3)+" up to diminishing returns."}powerPopover(i){return"Every stat point increases ability efficiency by "+i.toFixed(3)+"% up to diminishing returns."}focusPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}adaptabilityPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}maxSpeedMsPopover(){return"This is the max speed this animal can go during a race."}accelerationMsPopover(){return"This is how quickly this animal will gain speed."}staminaPopover(){return"Your animal loses stamina while racing. If its stamina reaches 0, it will slow down for a period of time while its stamina recharges."}powerMsPopover(){return"This increases the efficiency of your animal's ability."}focusMsPopover(){return"This is the average distance your animal can go without losing focus, causing them to stop."}adaptabilityMsPopover(){return"This is the average distance your animal can go without stumbling, causing them to slow down."}burstChancePopover(){return"Every time you enter a path, you have the chance to enter burst mode. This is your chance per 1000 meters that you will burst. Increase by improving Focus and Adaptability."}burstDistancePopover(){return"This is how far you can go while bursting. Increase by improving Power."}calculateDiminishingReturns(i){return 1/i**.6}addCurrentRacingStats(i){this.maxSpeedMs+=i.topSpeed,this.accelerationMs+=i.acceleration,this.stamina+=i.endurance,this.powerMs+=i.power,this.focusMs+=i.focus,this.adaptabilityMs+=i.adaptability}subtractCurrentRacingStats(i){this.maxSpeedMs-=i.topSpeed,this.accelerationMs-=i.acceleration,this.stamina-=i.endurance,this.powerMs-=i.power,this.focusMs-=i.focus,this.adaptabilityMs-=i.adaptability}multiplyCurrentRacingStats(i){this.maxSpeedMs*=i.topSpeed,this.accelerationMs*=i.acceleration,this.stamina*=i.endurance,this.powerMs*=i.power,this.focusMs*=i.focus,this.adaptabilityMs*=i.adaptability}divideCurrentRacingStats(i){this.maxSpeedMs/=i.topSpeed,this.accelerationMs/=i.acceleration,this.stamina/=i.endurance,this.powerMs/=i.power,this.focusMs/=i.focus,this.adaptabilityMs/=i.adaptability}}var ct=(()=>{return(t=ct||(ct={}))[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large",ct;var t})();class Oo{constructor(){this.trainingTimeRemaining=7200,this.timeTrained=0,this.isAvailable=!1,this.purchasePrice=50}makeCopy(i){var e=new Oo;return e.affectedStatRatios=JSON.parse(JSON.stringify(i.affectedStatRatios)),e.facilitySize=JSON.parse(JSON.stringify(i.facilitySize)),e.isAvailable=JSON.parse(JSON.stringify(i.isAvailable)),e.purchasePrice=JSON.parse(JSON.stringify(i.purchasePrice)),e.statGain=JSON.parse(JSON.stringify(i.statGain)),e.timeToComplete=JSON.parse(JSON.stringify(i.timeToComplete)),e.timeTrained=JSON.parse(JSON.stringify(i.timeTrained)),e.trainingCourseType=JSON.parse(JSON.stringify(i.trainingCourseType)),e.trainingName=JSON.parse(JSON.stringify(i.trainingName)),e.trainingType=JSON.parse(JSON.stringify(i.trainingType)),e}getFacilitySize(){return ct[this.facilitySize]}getStatGainDescription(){var i="";return this.affectedStatRatios.topSpeed>0&&(i+="+"+this.statGain*this.affectedStatRatios.topSpeed+" Speed\n"),this.affectedStatRatios.acceleration>0&&(i+="+"+this.statGain*this.affectedStatRatios.acceleration+" Acceleration\n"),this.affectedStatRatios.endurance>0&&(i+="+"+this.statGain*this.affectedStatRatios.endurance+" Endurance\n"),this.affectedStatRatios.focus>0&&(i+="+"+this.statGain*this.affectedStatRatios.focus+" Focus\n"),this.affectedStatRatios.power>0&&(i+="+"+this.statGain*this.affectedStatRatios.power+" Power\n"),this.affectedStatRatios.adaptability>0&&(i+="+"+this.statGain*this.affectedStatRatios.adaptability+" Adaptability\n"),i}}Ge([et(()=>Oe),Qe("design:type",Oe)],Oo.prototype,"affectedStatRatios",void 0);class Ft{constructor(){this.abilityLevel=1,this.abilityXp=0,this.abilityMaxXp=50}}var ye=(()=>{return(t=ye||(ye={}))[t.topSpeed=0]="topSpeed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",ye;var t})();class un{constructor(i,e,n,r,a){void 0!==i&&(this.traitName=i),void 0!==e&&(this.requiredLevel=e),void 0!==n&&(this.researchLevel=n),void 0!==r&&(this.positiveStatGain=r),void 0!==a&&(this.negativeStatGain=a)}getStatGainDescription(i){var e="",n="";return this.positiveStatGain===ye.acceleration&&(e="Acceleration"),this.positiveStatGain===ye.adaptability&&(e="Adaptability"),this.positiveStatGain===ye.endurance&&(e="Endurance"),this.positiveStatGain===ye.focus&&(e="Focus"),this.positiveStatGain===ye.power&&(e="Power"),this.positiveStatGain===ye.topSpeed&&(e="Speed"),this.negativeStatGain===ye.acceleration&&(n="Acceleration"),this.negativeStatGain===ye.adaptability&&(n="Adaptability"),this.negativeStatGain===ye.endurance&&(n="Endurance"),this.negativeStatGain===ye.focus&&(n="Focus"),this.negativeStatGain===ye.power&&(n="Power"),this.negativeStatGain===ye.topSpeed&&(n="Speed"),"+"+this.researchLevel+"% "+e+", -"+(this.researchLevel>i?i:this.researchLevel)+"% "+n}}class Vv{constructor(){this.maxSpeedModifier=1,this.accelerationModifier=1,this.staminaModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1}}class Fv{constructor(){this.bonusBreedXpGainFromLocalRaces=0,this.bonusBreedXpGainFromCircuitRaces=0,this.bonusBreedXpGainFromTraining=0,this.trainingTimeReduction=0,this.diminishingReturnsBonus=0,this.bonusTalents=0,this.bonusTrainingBreedXpCertificateCount=0,this.bonusCircuitBreedXpCertificateCount=0,this.bonusLocalBreedXpCertificateCount=0,this.bonusDiminishingReturnsCertificateCount=0,this.certificateUseCap=30}}class oo{constructor(){this.remainingBurstMeters=0,this.metersSinceLostFocus=0,this.recoveringStamina=!1,this.defaultRecoveringStaminaLength=150,this.currentRecoveringStaminaLength=this.defaultRecoveringStaminaLength,this.ranOutOfStamina=!1,this.lostFocus=!1,this.defaultLostFocusLength=60,this.currentLostFocusLength=this.defaultLostFocusLength,this.hasLostFocusDuringRace=!1,this.stumbled=!1,this.defaultStumbledLength=10,this.currentStumbledLength=this.defaultStumbledLength,this.relayEffects=[],this.burstCount=0,this.icyCurrentYAmount=0,this.icyCurrentDirectionUp=!0,this.headbandStumblePreventionCount=0,this.scaryMaskEffectOccurred=!1,this.firstAbilityUseEffectApplied=!1,this.velocityExceedsMaxSpeedDuringBurst=!1,this.velocityReachesMaxSpeedCount=0}makeCopy(){var i=new oo;return i.remainingBurstMeters=this.remainingBurstMeters,i.metersSinceLostFocus=this.metersSinceLostFocus,i.recoveringStamina=this.recoveringStamina,i.defaultRecoveringStaminaLength=this.defaultRecoveringStaminaLength,i.currentRecoveringStaminaLength=this.currentRecoveringStaminaLength,i.ranOutOfStamina=this.ranOutOfStamina,i.lostFocus=this.lostFocus,i.defaultLostFocusLength=this.defaultLostFocusLength,i.currentLostFocusLength=this.currentLostFocusLength,i.hasLostFocusDuringRace=this.hasLostFocusDuringRace,i.stumbled=this.stumbled,i.defaultStumbledLength=this.defaultStumbledLength,i.currentStumbledLength=this.currentStumbledLength,i.burstCount=this.burstCount,i.icyCurrentYAmount=this.icyCurrentYAmount,i.icyCurrentDirectionUp=this.icyCurrentDirectionUp,i.headbandStumblePreventionCount=this.headbandStumblePreventionCount,i.scaryMaskEffectOccurred=this.scaryMaskEffectOccurred,i.firstAbilityUseEffectApplied=this.firstAbilityUseEffectApplied,i.velocityExceedsMaxSpeedDuringBurst=this.velocityExceedsMaxSpeedDuringBurst,i.velocityReachesMaxSpeedCount=this.velocityReachesMaxSpeedCount,this.relayEffects=[],i}}var ht=(()=>{return(t=ht||(ht={}))[t.none=0]="none",t[t.sprint=1]="sprint",t[t.support=2]="support",t[t.longDistance=3]="longDistance",ht;var t})();class du{constructor(){this.talentTreeType=ht.none,this.row2RequiredPoints=5,this.row3RequiredPoints=10,this.row4RequiredPoints=15,this.column1Row1Points=0,this.column1Row2Points=0,this.column1Row3Points=0,this.column1Row4Points=0,this.column2Row1Points=0,this.column2Row2Points=0,this.column2Row3Points=0,this.column2Row4Points=0,this.column3Row1Points=0,this.column3Row2Points=0,this.column3Row3Points=0,this.column3Row4Points=0}makeCopy(i){var e=new du;return e.talentTreeType=i.talentTreeType,e.column1Row1Points=i.column1Row1Points,e.column1Row2Points=i.column1Row2Points,e.column1Row3Points=i.column1Row3Points,e.column1Row4Points=i.column1Row4Points,e.column2Row1Points=i.column2Row1Points,e.column2Row2Points=i.column2Row2Points,e.column2Row3Points=i.column2Row3Points,e.column2Row4Points=i.column2Row4Points,e.column3Row1Points=i.column3Row1Points,e.column3Row2Points=i.column3Row2Points,e.column3Row3Points=i.column3Row3Points,e.column3Row4Points=i.column3Row4Points,e}getTalentPointsByColumn(i){return 0===i?this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points:1===i?this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points:2===i?this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points:0}getTalentPointsByRowColumn(i,e){return 0===i&&0===e?this.column1Row1Points:1===i&&0===e?this.column1Row2Points:2===i&&0===e?this.column1Row3Points:3===i&&0===e?this.column1Row4Points:0===i&&1===e?this.column2Row1Points:1===i&&1===e?this.column2Row2Points:2===i&&1===e?this.column2Row3Points:3===i&&1===e?this.column2Row4Points:0===i&&2===e?this.column3Row1Points:1===i&&2===e?this.column3Row2Points:2===i&&2===e?this.column3Row3Points:3===i&&2===e?this.column3Row4Points:0}getTotalSpentPoints(){return this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points+this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points+this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points}spendTalentPoint(i,e){0===i&&0===e&&(this.column1Row1Points+=1),1===i&&0===e&&(this.column1Row2Points+=1),2===i&&0===e&&(this.column1Row3Points+=1),3===i&&0===e&&(this.column1Row4Points+=1),0===i&&1===e&&(this.column2Row1Points+=1),1===i&&1===e&&(this.column2Row2Points+=1),2===i&&1===e&&(this.column2Row3Points+=1),3===i&&1===e&&(this.column2Row4Points+=1),0===i&&2===e&&(this.column3Row1Points+=1),1===i&&2===e&&(this.column3Row2Points+=1),2===i&&2===e&&(this.column3Row3Points+=1),3===i&&2===e&&(this.column3Row4Points+=1)}}class Bv{constructor(){this.successfulCoachingAttempts=0}}class Dt{constructor(){this.incubatorStatUpgrades=new Vv,this.allTrainingTracks=new Ml,this.miscStats=new Fv,this.trackedAnimalStats=new Bv,this.talentTree=new du,this.breedLevel=1,this.breedGaugeXp=0,this.breedGaugeMax=200,this.totalRacesRun=0,this.equippedOrb=null,this.canEquipOrb=!1,this.canTrain=!0,this.isAvailable=!1,this.availableAbilities=[]}makeCopy(i){var e=new Dt;return e.name=i.name,e.type=i.type,e.raceCourseType=i.raceCourseType,e.currentStats=i.currentStats.makeCopy(i.currentStats),e.baseStats=i.baseStats.makeCopy(i.baseStats),e.talentTree=i.talentTree.makeCopy(i.talentTree),e.isAvailable=i.isAvailable,e.ability=i.ability,e.raceVariables=new oo,e.equippedItem=i.equippedItem,e.equippedOrb=i.equippedOrb,e.incubatorStatUpgrades=i.incubatorStatUpgrades,e.breedLevel=i.breedLevel,e.trackedAnimalStats=i.trackedAnimalStats,e.trait=i.trait,e}viewAbility(){return this.ability.name}getAbilityUseUpdateText(i,e=""){return i+" uses "+this.ability.name+e+"."}useAbility(){}getAnimalType(){return X[this.type]}getRaceCourseType(){return z[this.raceCourseType]}getTraitName(){return null==this.trait||""===this.trait.traitName?"None":this.trait.traitName}getEquippedItemName(){if(null!=this.equippedItem)return this.equippedItem.name}getCourseTypeClass(){return this.raceCourseType===z.Flatland?"flatlandColor":this.raceCourseType===z.Mountain?"mountainColor":this.raceCourseType===z.Ocean?"waterColor":this.raceCourseType===z.Tundra?"tundraColor":this.raceCourseType===z.Volcanic?"volcanicColor":""}increaseStatsFromCurrentTraining(){null==this.currentTraining||null==this.currentStats||(this.currentStats.topSpeed+=this.currentTraining.affectedStatRatios.topSpeed*this.currentTraining.statGain,this.currentStats.acceleration+=this.currentTraining.affectedStatRatios.acceleration*this.currentTraining.statGain,this.currentStats.endurance+=this.currentTraining.affectedStatRatios.endurance*this.currentTraining.statGain,this.currentStats.power+=this.currentTraining.affectedStatRatios.power*this.currentTraining.statGain,this.currentStats.focus+=this.currentTraining.affectedStatRatios.focus*this.currentTraining.statGain,this.currentStats.adaptability+=this.currentTraining.affectedStatRatios.adaptability*this.currentTraining.statGain)}increaseStats(i){null==i||null==this.currentStats||(this.currentStats.topSpeed+=Number(i.topSpeed),this.currentStats.acceleration+=Number(i.acceleration),this.currentStats.stamina+=Number(i.stamina),this.currentStats.endurance+=Number(i.endurance),this.currentStats.power+=Number(i.power),this.currentStats.focus+=Number(i.focus),this.currentStats.adaptability+=Number(i.adaptability))}}Ge([et(()=>Oe),Qe("design:type",Oe)],Dt.prototype,"currentStats",void 0),Ge([et(()=>Oe),Qe("design:type",Oe)],Dt.prototype,"baseStats",void 0),Ge([et(()=>Oo),Qe("design:type",Object)],Dt.prototype,"currentTraining",void 0),Ge([et(()=>Oo),Qe("design:type",Object)],Dt.prototype,"queuedTraining",void 0),Ge([et(()=>Ft),Qe("design:type",Ft)],Dt.prototype,"ability",void 0),Ge([et(()=>oo),Qe("design:type",oo)],Dt.prototype,"raceVariables",void 0),Ge([et(()=>le),Qe("design:type",Object)],Dt.prototype,"equippedItem",void 0),Ge([et(()=>le),Qe("design:type",Object)],Dt.prototype,"equippedOrb",void 0),Ge([et(()=>Vv),Qe("design:type",Vv)],Dt.prototype,"incubatorStatUpgrades",void 0),Ge([et(()=>Ml),Qe("design:type",Ml)],Dt.prototype,"allTrainingTracks",void 0),Ge([et(()=>Fv),Qe("design:type",Fv)],Dt.prototype,"miscStats",void 0),Ge([et(()=>Bv),Qe("design:type",Bv)],Dt.prototype,"trackedAnimalStats",void 0),Ge([et(()=>Ft),Qe("design:type",Array)],Dt.prototype,"availableAbilities",void 0),Ge([et(()=>un),Qe("design:type",un)],Dt.prototype,"trait",void 0),Ge([et(()=>du),Qe("design:type",du)],Dt.prototype,"talentTree",void 0);class m4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Horse,this.raceCourseType=z.Flatland,this.ability=new Ft,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Second Wind",this.ability.description="Second Wind",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.efficiency=60,i.oneTimeEffect=!0,i.name="Inspiration",i.description="Inspiration",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.cooldown=5,e.efficiency=27,e.oneTimeEffect=!1,e.name="Pacemaker",e.description="Pacemaker",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class v4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Cheetah,this.raceCourseType=z.Flatland,this.ability=new Ft,this.ability.cooldown=6,this.ability.efficiency=35,this.ability.oneTimeEffect=!1,this.ability.name="Sprint",this.ability.description="Sprint",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.efficiency=.5,i.oneTimeEffect=!1,i.name="Giving Chase",i.description="Giving Chase",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.efficiency=.1,e.oneTimeEffect=!1,e.name="On The Hunt",e.description="On The Hunt",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class b4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Hare,this.raceCourseType=z.Flatland,this.ability=new Ft,this.ability.efficiency=45,this.ability.oneTimeEffect=!0,this.ability.name="Prey Instinct",this.ability.description="Prey Instinct",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.cooldown=5,i.efficiency=40,i.oneTimeEffect=!1,i.name="Awareness",i.description="Awareness",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.efficiency=130,e.oneTimeEffect=!0,e.name="Nap",e.description="Nap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class _4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Monkey,this.raceCourseType=z.Mountain,this.ability=new Ft,this.ability.cooldown=11,this.ability.efficiency=6,this.ability.name="Landslide",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.efficiency=60,i.oneTimeEffect=!0,i.name="Frenzy",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.efficiency=70,e.cooldown=0,e.oneTimeEffect=!0,e.name="Leap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=30,this.availableAbilities.push(e)}}class y4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Goat,this.raceCourseType=z.Mountain,this.ability=new Ft,this.ability.efficiency=.5,this.ability.oneTimeEffect=!1,this.ability.name="Sure-footed",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.efficiency=.25,i.oneTimeEffect=!1,i.name="Deep Breathing",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.efficiency=.1,e.oneTimeEffect=!1,e.name="In The Rhythm",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=15,this.availableAbilities.push(e)}}class w4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Gecko,this.raceCourseType=z.Mountain,this.ability=new Ft,this.ability.cooldown=5,this.ability.efficiency=55,this.ability.oneTimeEffect=!1,this.ability.name="Sticky",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.efficiency=.2,i.oneTimeEffect=!1,i.name="Night Vision",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.efficiency=38,e.oneTimeEffect=!0,e.name="Camouflage",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class C4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Dolphin,this.raceCourseType=z.Ocean,this.ability=new Ft,this.ability.cooldown=6,this.ability.efficiency=84,this.ability.oneTimeEffect=!1,this.ability.name="Echolocation",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.efficiency=50,i.oneTimeEffect=!0,i.name="Navigator",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.efficiency=70,e.oneTimeEffect=!0,e.name="Flowing Current",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class S4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Shark,this.raceCourseType=z.Ocean,this.ability=new Ft,this.ability.efficiency=60,this.ability.oneTimeEffect=!0,this.ability.name="Apex Predator",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.efficiency=35,i.oneTimeEffect=!0,i.name="Feeding Frenzy",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.efficiency=.1,e.oneTimeEffect=!0,e.name="Blood In The Water",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class T4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Octopus,this.raceCourseType=z.Ocean,this.ability=new Ft,this.ability.cooldown=5,this.ability.efficiency=17,this.ability.totalFrames=15,this.ability.oneTimeEffect=!1,this.ability.name="Propulsion",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.efficiency=1,i.oneTimeEffect=!1,i.name="Buried Treasure",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.efficiency=2,e.oneTimeEffect=!0,e.name="Big Brain",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class D4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Penguin,this.raceCourseType=z.Tundra,this.ability=new Ft,this.ability.efficiency=65,this.ability.cooldown=8,this.ability.oneTimeEffect=!1,this.ability.name="Careful Toboggan",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.efficiency=4,i.oneTimeEffect=!1,i.name="Wild Toboggan",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.efficiency=.1,e.oneTimeEffect=!1,e.name="Quick Toboggan",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class R4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Caribou,this.raceCourseType=z.Tundra,this.ability=new Ft,this.ability.efficiency=.5,this.ability.oneTimeEffect=!0,this.ability.name="Herd Mentality",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.efficiency=50,i.cooldown=7,i.oneTimeEffect=!1,i.name="Great Migration",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.efficiency=.05,e.oneTimeEffect=!0,e.name="Special Delivery",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class x4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Salamander,this.raceCourseType=z.Volcanic,this.ability=new Ft,this.ability.cooldown=7,this.ability.efficiency=70,this.ability.oneTimeEffect=!1,this.ability.name="Cold Blooded",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.cooldown=6,i.efficiency=50,i.oneTimeEffect=!1,i.name="Burrow",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.cooldown=10,e.efficiency=25,e.oneTimeEffect=!1,e.name="Heat Up",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class M4 extends Dt{constructor(){super(),this.baseStats=new Oe(5,5,5,5,5,5),this.currentStats=new Oe(5,5,5,5,5,5),this.type=X.Fox,this.raceCourseType=z.Volcanic,this.ability=new Ft,this.ability.cooldown=5,this.ability.efficiency=60,this.ability.oneTimeEffect=!1,this.ability.name="Trickster",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Ft;i.efficiency=1.5,i.oneTimeEffect=!1,i.name="Fleeting Speed",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Ft;e.efficiency=65,e.oneTimeEffect=!0,e.name="Nine Tails",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class Qh{constructor(){this.selectedAnimals=[],this.courseTypeOrder=[],this.isCourseOrderActive=!1,this.autoRunFreeRace=!1,this.isEventDeck=!1}}Ge([et(()=>Dt),Qe("design:type",Array)],Qh.prototype,"selectedAnimals",void 0);class Lv{constructor(){this.maxSpeedIncrease=1.1,this.accelerationRateIncrease=1.1,this.staminaIncrease=1.1,this.powerEfficiencyIncrease=1.1,this.focusDistanceIncrease=1.1,this.adaptabilityDistanceIncrease=1.1}}class k4{constructor(){this.upgradePrice=[],this.upgradedStatGain=new Oe(1,1,1,1,1,1),this.barnLevel=0,this.specializationLevel=0,this.currentDeltaTime=0}}class Uv{constructor(){this.barnUpgrades=new k4}getSize(){return ct[this.size]}}class hu{constructor(){this.timeTrained=0,this.timeToComplete=120}}Ge([et(()=>Dt),Qe("design:type",Object)],hu.prototype,"assignedAnimal",void 0),Ge([et(()=>un),Qe("design:type",Object)],hu.prototype,"assignedTrait",void 0);class pD{constructor(i){this.exhaustionStatReduction=1,this.morale=1,this.associatedAnimalType=i,this.isCurrentlyRacing=!1,this.isSetToRelay=!1}}class Hv{constructor(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.deepBreathingUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.bigBrainUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.specialDeliveryUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0,this.onTheHuntUseCap=25,this.sureFootedUseCap=25,this.deepBreathingUseCap=25,this.nightVisionUseCap=25,this.bigBrainUseCap=5,this.quickTobogganUseCap=25,this.herdMentalityUseCap=1,this.specialDeliveryUseCap=25}resetUseCounts(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0}}class Kh{constructor(){this.nineTailsBuffs=[],this.relayEffects=[],this.mountainEndingY=0,this.deepBreathingStaminaGain=0,this.longDistanceTalentIncreaseAccelerationWithLowVelocity=!1,this.maxSpeedFloor=0,this.raceVariables=new oo}}Ge([et(()=>oo),Qe("design:type",oo)],Kh.prototype,"raceVariables",void 0);class Z{constructor(i,e){void 0!==i&&(this.value=i),void 0!==e&&(this.text=e)}}class Zh{constructor(){this.raceUpdates=[],this.beatMoneyMark=!1,this.distanceCovered=0}addRaceUpdate(i,e){var n=new Z;n.text=e,n.value=i,this.raceUpdates.push(n)}}class gD{constructor(i,e){void 0!==i&&(this.objectType=i),void 0!==e&&(this.xDistance=e)}}var ze=(()=>{return(t=ze||(ze={}))[t.Sunny=0]="Sunny",t[t.Rainy=1]="Rainy",t[t.Stormy=2]="Stormy",t[t.Snowfall=3]="Snowfall",t[t.Maelstrom=4]="Maelstrom",t[t.Hailstorm=5]="Hailstorm",t[t.Ashfall=6]="Ashfall",t[t.Torrid=7]="Torrid",ze;var t})(),Xe=(()=>{return(t=Xe||(Xe={}))[t.Regular=0]="Regular",t[t.S=1]="S",t[t.Bumps=2]="Bumps",t[t.Crevasse=3]="Crevasse",t[t.Gaps=4]="Gaps",t[t.Waves=5]="Waves",t[t.Dive=6]="Dive",t[t.Cavern=7]="Cavern",t[t.Hills=8]="Hills",t[t.FirstRegular=9]="FirstRegular",t[t.LastRegular=10]="LastRegular",t[t.SteppingStones=11]="SteppingStones",Xe;var t})(),Ar=(()=>{return(t=Ar||(Ar={}))[t.None=0]="None",t[t.Low=.8]="Low",t[t.Medium=.6]="Medium",t[t.High=.4]="High",Ar;var t})();class Jh{constructor(i){this.didAnimalStumble=!1,this.didAnimalLoseFocus=!1,this.checkedForBurst=!1,this.checkedForMiniBurst=!1,this.checkedForNineTails=!1,null!=i&&this.setStumbleFields(),this.driftAmount=0,this.isSpecialPath=!1}setStumbleFields(){this.currentStumbleOpportunity=0,this.routeDesign===Xe.Regular&&(this.stumbleSeverity=Ar.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Xe.S&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.Low,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Xe.Bumps&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.Medium,this.frequencyOfStumble=20,this.stumbleOpportunities=8),this.routeDesign===Xe.Crevasse&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.High,this.frequencyOfStumble=80,this.stumbleOpportunities=6),this.routeDesign===Xe.Gaps&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.Medium,this.frequencyOfStumble=175,this.stumbleOpportunities=4),this.routeDesign===Xe.Waves&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.Medium,this.frequencyOfStumble=50,this.stumbleOpportunities=6),this.routeDesign===Xe.Dive&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.High,this.frequencyOfStumble=200,this.stumbleOpportunities=2),this.routeDesign===Xe.Cavern&&(this.isSpecialPath=!0,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Xe.Hills&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.High,this.frequencyOfStumble=120,this.stumbleOpportunities=3,this.frequencyOfDrift=250),(this.routeDesign===Xe.FirstRegular||this.routeDesign===Xe.LastRegular)&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.Medium,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Xe.SteppingStones&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.High,this.frequencyOfStumble=60,this.stumbleOpportunities=10)}}class ai{constructor(i){var e=.8,r=1.2;this.maxSpeedModifier=1,this.accelerationModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1,null!==i&&(this.terrainType=i,i===ze.Sunny&&(this.staminaModifier=1.5,this.maxSpeedModifier=r),i===ze.Rainy&&(this.adaptabilityModifier=e,this.focusModifier=r),i===ze.Stormy&&(this.focusModifier=e,this.accelerationModifier=r),i===ze.Maelstrom&&(this.accelerationModifier=e,this.maxSpeedModifier=e,this.adaptabilityModifier=r),i===ze.Hailstorm&&(this.focusModifier=e,this.adaptabilityModifier=e,this.maxSpeedModifier=e),i===ze.Ashfall&&(this.staminaModifier=r,this.accelerationModifier=e,this.powerModifier=e),i===ze.Snowfall&&(this.staminaModifier=e,this.maxSpeedModifier=e,this.accelerationModifier=e),i===ze.Torrid&&(this.powerModifier=e,this.maxSpeedModifier=e,this.focusModifier=r))}getTerrainType(){return ze[this.terrainType]}}class Nn{constructor(i,e){this.legComplete=!1,null!=i&&(this.courseType=i),void 0!==e&&null!=e&&(this.distance=e),this.pathData=[]}getCourseTypeName(){return z[this.courseType]}getCourseTypeClass(){return this.courseType===z.Flatland?"flatlandColor":this.courseType===z.Mountain?"mountainColor":this.courseType===z.Ocean?"waterColor":this.courseType===z.Tundra?"tundraColor":this.courseType===z.Volcanic?"volcanicColor":""}getTerrainName(){return null==this.terrain?"":ze[this.terrain.terrainType]}}Ge([et(()=>Jh),Qe("design:type",Array)],Nn.prototype,"pathData",void 0),Ge([et(()=>ai),Qe("design:type",ai)],Nn.prototype,"terrain",void 0);class ef{constructor(){this.distanceCoveredByFrame=[],this.velocityByFrame=[],this.timeToCompleteByFrame=[],this.maxSpeedByFrame=[],this.staminaPercentByFrame=[],this.racerEffectByFrame=[],this.yAdjustmentByFrame=[],this.lavaFallPercentByFrame=[],this.racePositionByFrame=[]}}class hi{constructor(i,e,n,r,a,o,s,l,c,u,d,m){this.raceLegs=i,this.requiredRank=e,this.isCircuitRace=n,this.raceId=r,this.length=a,this.timeToComplete=o,this.raceUI=new ef,this.circuitIncreaseReward=["",""],null!=s&&(this.rewards=s),null!=l&&(this.localRaceType=l),null!=c&&(this.trackRaceType=c),null!=u&&(this.raceType=u),null!=d&&(this.eventRaceType=d),null!=m&&(this.drawnObjects=m)}makeCopy(i){var e=new hi(i.raceLegs,i.requiredRank,i.isCircuitRace,i.raceId,i.length,i.timeToComplete,i.rewards,i.localRaceType,i.trackRaceType,i.raceType,i.eventRaceType,i.drawnObjects);return i.raceUI.velocityByFrame.length>0&&i.raceUI.velocityByFrame.forEach(n=>{e.raceUI.velocityByFrame.push(n)}),i.raceUI.staminaPercentByFrame.length>0&&i.raceUI.staminaPercentByFrame.forEach(n=>{e.raceUI.staminaPercentByFrame.push(n)}),e}reduceExportSize(){this.raceUI=new ef}}Ge([et(()=>Nn),Qe("design:type",Array)],hi.prototype,"raceLegs",void 0),Ge([et(()=>le),Qe("design:type",Array)],hi.prototype,"rewards",void 0),Ge([et(()=>ef),Qe("design:type",ef)],hi.prototype,"raceUI",void 0),Ge([et(()=>gD),Qe("design:type",Array)],hi.prototype,"drawnObjects",void 0);class tf{constructor(){this.affectsAllRacers=!1}makeCopy(){var i=new tf;return i.isMultiplicative=this.isMultiplicative,i.remainingRelayMeters=this.remainingRelayMeters,i.relayAffectedStatRatios=new Oe(this.relayAffectedStatRatios.topSpeed,this.relayAffectedStatRatios.acceleration,this.relayAffectedStatRatios.endurance,this.relayAffectedStatRatios.power,this.relayAffectedStatRatios.focus,this.relayAffectedStatRatios.adaptability),i.effectType=this.effectType,i.additionalValue=this.additionalValue,i.affectsAllRacers=this.affectsAllRacers,i}}class Li{constructor(){this.isRunning=!1,this.initialSetupComplete=!1,this.animalAlreadyPrepped=!1,this.mountainEndingY=0,this.mountainClimbPercent=0,this.exhaustionMoraleUpdateCounter=0,this.weatherClusterUpdateCounter=0,this.weekStartDay=2,this.weekStartHour=9,this.weekEndDay=4,this.weekEndHour=12,this.weekendStartDay=5,this.weekendStartHour=20,this.weekendEndDay=0,this.weekendEndHour=23,this.distanceCovered=0,this.grandPrixTimeLength=183600,this.segmentTime=180,this.segmentTimeCounter=0,this.overallTimeCounter=0,this.rank="Z",this.animalData=[],this.queuedRelayEffects=[],this.bonusTime=0,this.remainingRewards=0,this.totalRewards=0,this.coinRewardsObtained=0,this.renownRewardsObtained=0,this.tokenRewardsObtained=0,this.isGrandPrixCompleted=!1,this.remainingEventRaceTime=0,this.eventAbilityData=new Hv,this.isCatchingUp=!1,this.isLoading=!1}}Ge([et(()=>Hv),Qe("design:type",Hv)],Li.prototype,"eventAbilityData",void 0),Ge([et(()=>ai),Qe("design:type",ai)],Li.prototype,"raceTerrain",void 0),Ge([et(()=>hi),Qe("design:type",hi)],Li.prototype,"currentRaceSegment",void 0),Ge([et(()=>Zh),Qe("design:type",Zh)],Li.prototype,"currentRaceSegmentResult",void 0),Ge([et(()=>hi),Qe("design:type",hi)],Li.prototype,"nextRaceSegment",void 0),Ge([et(()=>hi),Qe("design:type",hi)],Li.prototype,"previousRaceSegment",void 0),Ge([et(()=>Kh),Qe("design:type",Kh)],Li.prototype,"previousRaceSegmentData",void 0),Ge([et(()=>pD),Qe("design:type",Array)],Li.prototype,"animalData",void 0),Ge([et(()=>tf),Qe("design:type",Array)],Li.prototype,"queuedRelayEffects",void 0);class mD{}class nf{constructor(){this.rewards=[]}}Ge([et(()=>Date),Qe("design:type",Date)],nf.prototype,"expirationDate",void 0),Ge([et(()=>Oo),Qe("design:type",Array)],nf.prototype,"rewards",void 0);class it{constructor(){this.isAvailable=!0,this.amountPurchased=0,this.totalShopQuantity=1,this.quantityMultiplier=1,this.numberPurchasing=1,this.purchasePrice=[],this.basePurchasePrice=[]}}class Qr{}Ge([et(()=>it),Qe("design:type",Array)],Qr.prototype,"itemList",void 0);class rf{constructor(){this.tutorialCompleted=!1,this.currentTutorialId=1,this.showTutorial=!1,this.showTrainingTrackTutorial=!0,this.showCoachingTutorial=!0}}class af{constructor(){this.isNewSpecialRaceAvailable=!1,this.isEventRaceNowActive=!1}}class Gv{constructor(){this.settings=[]}get(i){var e=this.settings.find(n=>n[0]===i);return null!=e?e[1]:""}set(i,e){var n=this.settings.find(r=>r[0]===i);null==n?this.settings.push([i,e]):n[1]=e}}class jv{constructor(){this.totalRaces=0,this.totalBreeds=0,this.totalMetersRaced=0,this.mostUsedAnimal="",this.mostRacedCourseType="",this.highestMaxSpeed="",this.highestAccelerationRate="",this.highestStamina="",this.highestPowerEfficiency="",this.highestFocusDistance="",this.highestAdaptabilityDistance=""}}class zv{constructor(){this.unlockables=[]}get(i){var e=this.unlockables.find(n=>n[0]===i);return null!=e&&e[1]}set(i,e){var n=this.unlockables.find(r=>r[0]===i);null==n?this.unlockables.push([i,e]):n[1]=e}}class Gn{constructor(i){this.userIsRacing=!1,this.showBreedWarning=!0,null!=i&&(this.animals=i.animals,this.barns=i.barns,this.trainingOptions=i.trainingOptions,this.circuitRaces=i.circuitRaces,this.circuitRank=i.circuitRank,this.localRaces=i.localRaces,this.resources=i.resources,this.modifiers=i.modifiers,this.shop=i.shop,this.tokenShop=i.tokenShop,this.animalDecks=i.animalDecks,this.incubator=i.incubator,this.trackedStats=i.trackedStats,this.pinnacle=i.pinnacle,this.orbStats=i.orbStats,this.redeemedCodes=i.redeemedCodes,this.eventRaceData=i.eventRaceData,this.notifications=i.notifications,this.previousEventRewards=[],this.nationalRaceCountdown=0,this.autoFreeRaceCounter=0,this.freeRaceCounter=0,this.freeRaceTimePeriodCounter=0)}}Ge([et(()=>Dt),Qe("design:type",Array)],Gn.prototype,"animals",void 0),Ge([et(()=>Uv),Qe("design:type",Array)],Gn.prototype,"barns",void 0),Ge([et(()=>Oo),Qe("design:type",Array)],Gn.prototype,"trainingOptions",void 0),Ge([et(()=>hi),Qe("design:type",Array)],Gn.prototype,"circuitRaces",void 0),Ge([et(()=>hi),Qe("design:type",Array)],Gn.prototype,"localRaces",void 0),Ge([et(()=>mD),Qe("design:type",mD)],Gn.prototype,"pinnacle",void 0),Ge([et(()=>le),Qe("design:type",Array)],Gn.prototype,"resources",void 0),Ge([et(()=>Z),Qe("design:type",Array)],Gn.prototype,"modifiers",void 0),Ge([et(()=>Qr),Qe("design:type",Array)],Gn.prototype,"shop",void 0),Ge([et(()=>Qr),Qe("design:type",Array)],Gn.prototype,"tokenShop",void 0),Ge([et(()=>Qh),Qe("design:type",Array)],Gn.prototype,"animalDecks",void 0),Ge([et(()=>Gv),Qe("design:type",Gv)],Gn.prototype,"settings",void 0),Ge([et(()=>zv),Qe("design:type",zv)],Gn.prototype,"unlockables",void 0),Ge([et(()=>hu),Qe("design:type",hu)],Gn.prototype,"incubator",void 0),Ge([et(()=>jv),Qe("design:type",jv)],Gn.prototype,"trackedStats",void 0),Ge([et(()=>Lv),Qe("design:type",Lv)],Gn.prototype,"orbStats",void 0),Ge([et(()=>rf),Qe("design:type",rf)],Gn.prototype,"tutorials",void 0),Ge([et(()=>nf),Qe("design:type",Array)],Gn.prototype,"redeemedCodes",void 0),Ge([et(()=>Li),Qe("design:type",Li)],Gn.prototype,"eventRaceData",void 0),Ge([et(()=>le),Qe("design:type",Array)],Gn.prototype,"previousEventRewards",void 0),Ge([et(()=>af),Qe("design:type",af)],Gn.prototype,"notifications",void 0);var Ve=(()=>{return(t=Ve||(Ve={}))[t.ShortTrackRunning=0]="ShortTrackRunning",t[t.Sprints=1]="Sprints",t[t.TrailRunning=2]="TrailRunning",t[t.MoveLogs=3]="MoveLogs",t[t.Footwork=4]="Footwork",t[t.PracticeCommands=5]="PracticeCommands",t[t.ScentTraining=6]="ScentTraining",t[t.SmallWagonTow=7]="SmallWagonTow",t[t.Sidestep=8]="Sidestep",t[t.MediumTrackRunning=9]="MediumTrackRunning",t[t.UphillRun=10]="UphillRun",t[t.Puzzles=11]="Puzzles",t[t.MoveRocks=12]="MoveRocks",t[t.LateralVerticalDrill=13]="LateralVerticalDrill",t[t.DodgeBall=14]="DodgeBall",t[t.BurstPractice=15]="BurstPractice",t[t.Acrobatics=16]="Acrobatics",t[t.LongTrackRunning=17]="LongTrackRunning",t[t.VehicleTow=18]="VehicleTow",t[t.LogJump=19]="LogJump",t[t.Meditation=20]="Meditation",t[t.WindSprints=21]="WindSprints",t[t.GreenwayHike=22]="GreenwayHike",t[t.Marathon=23]="Marathon",t[t.AgilityCourse=24]="AgilityCourse",Ve;var t})(),vD=q(340);let Ri=(()=>{class t{constructor(e){this.sanitizer=e}getRandomSeededInteger(e,n,r="seeded"){var a=vD(r);return Math.round(a()*(n-e)+e)}getRandomInteger(e,n){return e-=.500000001,n+=.499999999,Math.round(Math.random()*(n-e)+e)}getRandomSeededNumber(e,n,r="seeded"){return vD(r)()*(n-e)+e}getRandomNumber(e,n){return Math.random()*(n-e)+e}getRandomNumberPercent(){return 99*Math.random()+1}getNumericValueOfCircuitRank(e){var n=0;return e.length>1&&(n=26*(e.length-1)),n+(91-e.charCodeAt(e.length-1))}getCircuitRankFromNumericValue(e){for(var n="";e>26;)n+="A",e-=26;return n+String.fromCharCode(91-e)}getHoursRemainingFromSeconds(e){return Math.floor(e/3600)}getMinutesLeftInHourRemainingFromSeconds(e){var n=Math.floor(e/3600);return Math.floor(e/60-60*n)}getSecondsLeftInMinuteRemainingFromSeconds(e){var n=Math.floor(e/3600);return e-60*n*60-60*Math.floor(e/60-60*n)}convertSecondsToHHMMSS(e){var n=Math.floor(e/3600),r=Math.floor(e/60-60*n),a=e-60*n*60-60*r,o=n.toString(),s=r.toString(),l=Math.floor(a).toString();return n<10&&(o=n<1||n>59?"00":String(o).padStart(2,"0")),r<10&&(s=r<1||r>59?"00":String(s).padStart(2,"0")),a<10&&(l=a<1||a>59?"00":String(l).padStart(2,"0")),o+":"+s+":"+l}getClosestWholeNumber(e,n){return n/Math.floor(n/e)}getDayOfWeekFromNumber(e){return e<=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].length-1?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]:""}getAmPmTimeFromHours(e){return 0===e?"12:00 AM":e<12?e+":00 AM":12===e?"12:00 PM":e-12+":00 PM"}get24HourFormat(e){return e<=9?"0"+e+":00":e+":00"}convertDegreesToRadians(e){return e*(Math.PI/180)}getSanitizedHtml(e){var n=this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(e));return null===n?"":n}shadeColor(e,n){return"#"+e.replace(/^#/,"").replace(/../g,a=>("0"+Math.min(255,Math.max(0,parseInt(a,16)+n)).toString(16)).substr(-2))}getProperNoun(e){return e.charAt(0).toUpperCase()+e.slice(1)}condenseList(e){var n=[];return e.forEach(r=>{if(n.some(o=>o.name===r.name))n.find(o=>o.name===r.name).amount+=r.amount;else{var a=r.makeCopy(r);n.push(a)}}),n}ordinalSuffixOf(e){var n=e%10,r=e%100;return 1==n&&11!=r?e+"st":2==n&&12!=r?e+"nd":3==n&&13!=r?e+"rd":e+"th"}}return t.\u0275fac=function(e){return new(e||t)(Le(Mo))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$v=(()=>{class t{constructor(){}initializeShop(){}initializeResource(e,n,r){return new le(e,n,r)}initializeTraining(e){var n=new Oo;return e===Ve.ShortTrackRunning&&(n.trainingName="Short Track Running",n.isAvailable=!0,n.facilitySize=ct.Small,n.timeToComplete=30,n.trainingType=Ve.ShortTrackRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(1,0,0,0,0,0)),e===Ve.Sprints&&(n.trainingName="Sprints",n.isAvailable=!0,n.facilitySize=ct.Small,n.timeToComplete=20,n.trainingType=Ve.Sprints,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,1,0,0,0,0)),e===Ve.TrailRunning&&(n.trainingName="Trail Running",n.isAvailable=!0,n.facilitySize=ct.Small,n.timeToComplete=45,n.trainingType=Ve.TrailRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(.5,0,1,0,0,0)),e===Ve.MoveLogs&&(n.trainingName="Move Logs",n.isAvailable=!1,n.facilitySize=ct.Small,n.timeToComplete=30,n.trainingType=Ve.MoveLogs,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,0,0,1,0,0)),e===Ve.Footwork&&(n.trainingName="Footwork",n.isAvailable=!1,n.facilitySize=ct.Small,n.timeToComplete=45,n.trainingType=Ve.Footwork,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,.25,0,0,0,1)),e===Ve.PracticeCommands&&(n.trainingName="Practice Commands",n.isAvailable=!1,n.facilitySize=ct.Small,n.timeToComplete=40,n.trainingType=Ve.PracticeCommands,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,0,0,0,1,.25)),e===Ve.ScentTraining&&(n.trainingName="Scent Training",n.isAvailable=!1,n.facilitySize=ct.Small,n.timeToComplete=45,n.trainingType=Ve.ScentTraining,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,0,.5,0,1,0)),e===Ve.SmallWagonTow&&(n.trainingName="Small Wagon Tow",n.isAvailable=!1,n.facilitySize=ct.Small,n.timeToComplete=45,n.trainingType=Ve.SmallWagonTow,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(.25,0,0,1.5,0,0)),e===Ve.Sidestep&&(n.trainingName="Sidestep",n.isAvailable=!1,n.facilitySize=ct.Small,n.timeToComplete=35,n.trainingType=Ve.Sidestep,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,2,0,0,0,0)),e===Ve.MediumTrackRunning&&(n.trainingName="Medium Track Running",n.isAvailable=!1,n.facilitySize=ct.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Ve.MediumTrackRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(2,0,1,0,0,0)),e===Ve.UphillRun&&(n.trainingName="Uphill Run",n.isAvailable=!1,n.facilitySize=ct.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ve.UphillRun,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,1,2,0,0,0)),e===Ve.Puzzles&&(n.trainingName="Puzzles",n.isAvailable=!1,n.facilitySize=ct.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Ve.Puzzles,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,0,0,0,2,1)),e===Ve.MoveRocks&&(n.trainingName="Move Rocks",n.isAvailable=!1,n.facilitySize=ct.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Ve.MoveRocks,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,1,0,2,0,0)),e===Ve.DodgeBall&&(n.trainingName="Dodge Ball",n.isAvailable=!1,n.facilitySize=ct.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Ve.DodgeBall,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,2.5,0,0,0,1)),e===Ve.LateralVerticalDrill&&(n.trainingName="Lateral Vertical Drill",n.isAvailable=!1,n.facilitySize=ct.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ve.LateralVerticalDrill,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(1.5,0,0,0,2,0)),e===Ve.BurstPractice&&(n.trainingName="Burst Practice",n.isAvailable=!1,n.facilitySize=ct.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ve.BurstPractice,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,0,0,1.5,1.5,1.5)),e===Ve.Acrobatics&&(n.trainingName="Acrobatics",n.isAvailable=!1,n.facilitySize=ct.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ve.Acrobatics,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(.5,0,.5,3,0,0)),e===Ve.LongTrackRunning&&(n.trainingName="Long Track Running",n.isAvailable=!1,n.facilitySize=ct.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ve.LongTrackRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(5,0,0,0,2,0)),e===Ve.VehicleTow&&(n.trainingName="Vehicle Tow",n.isAvailable=!1,n.facilitySize=ct.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ve.VehicleTow,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,0,2,5,0,0)),e===Ve.LogJump&&(n.trainingName="Log Jump",n.isAvailable=!1,n.facilitySize=ct.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ve.LogJump,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(1,1,0,0,0,5)),e===Ve.Meditation&&(n.trainingName="Meditation",n.isAvailable=!1,n.facilitySize=ct.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ve.Meditation,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,0,0,2,5,0)),e===Ve.WindSprints&&(n.trainingName="Wind Sprints",n.isAvailable=!1,n.facilitySize=ct.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ve.WindSprints,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(2,5,0,0,0,0)),e===Ve.GreenwayHike&&(n.trainingName="Greenway Hike",n.isAvailable=!1,n.facilitySize=ct.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ve.GreenwayHike,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,0,5,0,0,2)),e===Ve.Marathon&&(n.trainingName="Marathon",n.isAvailable=!1,n.facilitySize=ct.Large,n.purchasePrice*=10,n.timeToComplete=120,n.trainingType=Ve.Marathon,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(0,2,3,0,3,0)),e===Ve.AgilityCourse&&(n.trainingName="Agility Course",n.isAvailable=!1,n.facilitySize=ct.Large,n.purchasePrice*=10,n.timeToComplete=120,n.trainingType=Ve.AgilityCourse,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Oe(3,0,0,2,0,3)),n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Qt=(()=>{return(t=Qt||(Qt={}))[t.Track=0]="Track",t[t.Free=1]="Free",t[t.Mono=2]="Mono",t[t.Duo=3]="Duo",t[t.Rainbow=4]="Rainbow",Qt;var t})(),Je=(()=>{return(t=Je||(Je={}))[t.none=0]="none",t[t.headband=1]="headband",t[t.redBaton=2]="redBaton",t[t.blueBaton=3]="blueBaton",t[t.violetBaton=4]="violetBaton",t[t.orangeBaton=5]="orangeBaton",t[t.greenBaton=6]="greenBaton",t[t.yellowBaton=7]="yellowBaton",t[t.quickSnack=8]="quickSnack",t[t.blinders=9]="blinders",t[t.pendant=10]="pendant",t[t.carrotOnAStick=11]="carrotOnAStick",t[t.scaryMask=12]="scaryMask",t[t.runningShoes=13]="runningShoes",t[t.incense=14]="incense",t[t.athleticTape=15]="athleticTape",Je;var t})();const qv={name:"white",properties:{"--foreground-default":"#000000","--foreground-secondary":"#1B1B1B","--foreground-tertiary":"#a6a49d","--foreground-quaternary":"#2F2F2F","--foreground-light":"#000000","--background-default":"#FCFCFC","--background-secondary":"#FFFFFF","--background-tertiary":"#C4C4C4","--background-quarternary":"#ACAFB4","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#8105fc","--specialityKeywordColor":"#050efc","--equipmentKeywordColor":"#1B7F02","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},Wv={name:"light",properties:{"--foreground-default":"#08090A","--foreground-secondary":"#41474D","--foreground-tertiary":"#797C80","--foreground-quaternary":"#F4FAFF","--foreground-light":"#41474D","--background-default":"#F4FAFF","--background-secondary":"#A3B9CC","--background-tertiary":"#5C7D99","--background-quarternary":"#65799E","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#BF6200","--mountainColor":"#228D0F","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#266A80","--volcanicColor":"#C70604","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#064064","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},Xv={name:"twilight",properties:{"--foreground-default":"#ED8B42","--foreground-secondary":"#C05100","--foreground-tertiary":"#6A2D00","--foreground-quaternary":"#FFAA20","--foreground-light":"#FF8F3D","--background-default":"#5D0274","--background-secondary":"#210129","--background-tertiary":"#14001A","--background-quarternary":"#4F223C","--background-light":"#72028D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#000000","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},fu={name:"night",properties:{"--foreground-default":"#A3B9CC","--foreground-secondary":"#5C7D99","--foreground-tertiary":"#49647A","--foreground-quaternary":"#E5E5E5","--foreground-light":"#FFFFFF","--background-default":"#797C80","--background-secondary":"#41474D","--background-tertiary":"#08090A","--background-quarternary":"##2A2C31","--background-light":"#41474D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#E18B07","--mountainColor":"#30b001","--waterColor":"#9289CF","--waterSubcolor":"#5044ab","--tundraColor":"#019DDE","--volcanicColor":"#E56C6E","--resourceKeywordColor":"#EAAD91","--progressionKeywordColor":"#ABB5DC","--specialityKeywordColor":"#5DBDF6","--equipmentKeywordColor":"#83C2A6","--background-tertiary-shadow":"0 1px 3px 0 rgba(8, 9, 10, 0.5)"}};let kl=(()=>{class t{constructor(){this.active=fu,this.availableThemes=[qv,Wv,Xv,fu]}getAvailableThemes(){return this.availableThemes}getActiveTheme(){return this.active}getActiveThemeName(){var e="";return e=this.active.name,this.active===fu&&(e="night"),this.active===Wv&&(e="light"),this.active===qv&&(e="white"),this.active===Xv&&(e="twilight"),e}setNightTheme(){return this.setActiveTheme(fu)}setLightTheme(){return this.setActiveTheme(Wv)}setTwilightTheme(){return this.setActiveTheme(Xv)}setWhiteTheme(){return this.setActiveTheme(qv)}setActiveTheme(e){return this.active=e,Object.keys(this.active.properties).forEach(n=>{document.documentElement.style.setProperty(n,this.active.properties[n])}),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Kr=(()=>{return(t=Kr||(Kr={}))[t.draw=0]="draw",t[t.text=1]="text",t[t.both=2]="both",Kr;var t})(),Kn=(()=>{return(t=Kn||(Kn={}))[t.practice=0]="practice",t[t.novice=1]="novice",t[t.intermediate=2]="intermediate",t[t.master=3]="master",Kn;var t})(),Ne=(()=>{return(t=Ne||(Ne={}))[t.circuit=0]="circuit",t[t.special=1]="special",t[t.event=2]="event",t[t.trainingTrack=3]="trainingTrack",Ne;var t})(),He=(()=>{return(t=He||(He={}))[t.grandPrix=0]="grandPrix",He;var t})(),Ni=(()=>{return(t=Ni||(Ni={}))[t.clearSkies=0]="clearSkies",t[t.inclementWeather=1]="inclementWeather",t[t.coldSpell=2]="coldSpell",Ni;var t})(),sf=(()=>{return(t=sf||(sf={}))[t.brazier=0]="brazier",sf;var t})();let Rt=(()=>{class t{constructor(e,n,r){this.utilityService=e,this.initializeService=n,this.themeService=r,this.globalVar=new Gn}initializeGlobalVariables(){this.globalVar.animals=[],this.globalVar.trainingOptions=[],this.globalVar.circuitRaces=[],this.globalVar.localRaces=[],this.globalVar.resources=[],this.globalVar.modifiers=[],this.globalVar.animalDecks=[],this.globalVar.barns=[],this.globalVar.redeemedCodes=[],this.globalVar.settings=new Gv,this.globalVar.unlockables=new zv,this.globalVar.incubator=new hu,this.globalVar.trackedStats=new jv,this.globalVar.orbStats=new Lv,this.globalVar.tutorials=new rf,this.globalVar.previousEventRewards=[],this.globalVar.eventRaceData=new Li,this.globalVar.userIsRacing=!1,this.globalVar.nationalRaceCountdown=0,this.globalVar.autoFreeRaceCounter=0,this.globalVar.freeRaceCounter=0,this.globalVar.freeRaceTimePeriodCounter=0,this.globalVar.lastTimeStamp=Date.now(),this.globalVar.currentVersion=1.09,this.globalVar.startingVersion=1.09,this.globalVar.startDate=new Date,this.globalVar.notifications=new af,this.InitializeModifiers(),this.InitializeAnimals(),this.InitializeRelayTeams(),this.InitializeGlobalTrainingOptions(),this.InitializeShop(),this.InitializeTokenShop(),this.InitializeBarns(),this.globalVar.circuitRank="Z",this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),this.checkCircuitRankRewards(),this.globalVar.monoRank="Z",this.globalVar.duoRank="Z",this.globalVar.rainbowRank="Z",this.GenerateLocalRaces(),this.InitializeResources(),this.InitializeSettings(),this.InitializeUnlockables()}InitializeModifiers(){this.globalVar.modifiers.push(new Z(.2,"staminaModifier")),this.globalVar.modifiers.push(new Z(.9,"exhaustionStatLossModifier")),this.globalVar.modifiers.push(new Z(.1,"exhaustionStatLossMinimumModifier")),this.globalVar.modifiers.push(new Z(5,"trainingBreedGaugeIncrease")),this.globalVar.modifiers.push(new Z(10,"circuitBreedGaugeIncrease")),this.globalVar.modifiers.push(new Z(1,"localBreedGaugeIncrease")),this.globalVar.modifiers.push(new Z(.5,"trainingTrackPaceModifier")),this.globalVar.modifiers.push(new Z(.05,"breedLevelStatModifier")),this.globalVar.modifiers.push(new Z(10,"breedGaugeMaxIncreaseModifier")),this.globalVar.modifiers.push(new Z(.001,"incubatorUpgradeIncreaseModifier")),this.globalVar.modifiers.push(new Z(5,"facilityLevelModifier")),this.globalVar.modifiers.push(new Z(.02,"animalHandlerModifier")),this.globalVar.modifiers.push(new Z(.01,"stopwatchModifier")),this.globalVar.modifiers.push(new Z(.1,"racerMapsModifier")),this.globalVar.modifiers.push(new Z(25,"nationalRacesToMedalModifier")),this.globalVar.modifiers.push(new Z(10,"internationalRacesToMedalModifier")),this.globalVar.modifiers.push(new Z(.75,"moneyMarkPaceModifier")),this.globalVar.modifiers.push(new Z(1.25,"moneyMarkRewardModifier")),this.globalVar.modifiers.push(new Z(5,"whistleModifier")),this.globalVar.modifiers.push(new Z(10,"goldenWhistleModifier")),this.globalVar.modifiers.push(new Z(.1,"breedingGroundsSpecializationModifier")),this.globalVar.modifiers.push(new Z(300,"attractionTimeToCollectModifier")),this.globalVar.modifiers.push(new Z(20,"attractionAmountModifier")),this.globalVar.modifiers.push(new Z(.05,"researchCenterIncrementsModifier")),this.globalVar.modifiers.push(new Z(.45,"researchCenterTrainingAnimalModifier")),this.globalVar.modifiers.push(new Z(.25,"researchCenterStudyingAnimalModifier")),this.globalVar.modifiers.push(new Z(.75,"researchCenterMaxStatGainModifier")),this.globalVar.modifiers.push(new Z(3,"headbandEquipmentModifier")),this.globalVar.modifiers.push(new Z(1,"quickSnackEquipmentModifier")),this.globalVar.modifiers.push(new Z(.5,"blindersEquipmentModifier")),this.globalVar.modifiers.push(new Z(.9,"pendantEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"redBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"blueBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"orangeBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"greenBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"yellowBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.1,"violetBatonEquipmentModifier")),this.globalVar.modifiers.push(new Z(2,"scaryMaskEquipmentModifier")),this.globalVar.modifiers.push(new Z(1.2,"runningShoesEquipmentModifier")),this.globalVar.modifiers.push(new Z(.9,"incenseEquipmentModifier")),this.globalVar.modifiers.push(new Z(.5,"athleticTapeEquipmentModifier")),this.globalVar.modifiers.push(new Z(14400,"smallBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new Z(28800,"mediumBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new Z(43200,"largeBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new Z(5,"freeRacesPerTimePeriodModifier")),this.globalVar.modifiers.push(new Z(300,"freeRacesTimePeriodModifier")),this.globalVar.modifiers.push(new Z(28800,"autoFreeRacesMaxIdleTimePeriodModifier")),this.globalVar.modifiers.push(new Z(5e6,"metersPerCoinsGrandPrixModifier")),this.globalVar.modifiers.push(new Z(2e7,"metersPerRenownGrandPrixModifier")),this.globalVar.modifiers.push(new Z(100,"grandPrixCoinRewardModifier")),this.globalVar.modifiers.push(new Z(3,"grandPrixRenownRewardModifier")),this.globalVar.modifiers.push(new Z(5e7,"grandPrixToken1MeterModifier")),this.globalVar.modifiers.push(new Z(1e8,"grandPrixToken2MeterModifier")),this.globalVar.modifiers.push(new Z(25e7,"grandPrixToken3MeterModifier")),this.globalVar.modifiers.push(new Z(5e8,"grandPrixToken4MeterModifier")),this.globalVar.modifiers.push(new Z(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new Z(.02,"exhaustionGainGrandPrixModifier")),this.globalVar.modifiers.push(new Z(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new Z(25,"grandPrixBreedLevelRequiredModifier")),this.globalVar.modifiers.push(new Z(.2,"weatherMoraleBoostModifier")),this.globalVar.modifiers.push(new Z(.03,"focusMoraleLossModifier")),this.globalVar.modifiers.push(new Z(.02,"burstMoraleBoostModifier")),this.globalVar.modifiers.push(new Z(.01,"stumbleMoraleLossModifier")),this.globalVar.modifiers.push(new Z(.05,"segmentCompleteMoraleBoostModifier")),this.globalVar.modifiers.push(new Z(25,"abilityLevelCapModifier")),this.globalVar.modifiers.push(new Z(1.5,"feedingFrenzyPositiveModifier")),this.globalVar.modifiers.push(new Z(.9,"feedingFrenzyNegativeModifier")),this.globalVar.modifiers.push(new Z(20,"maxDriftAmountModifier")),this.globalVar.modifiers.push(new Z(4,"relayAbilityXpGainModifier")),this.globalVar.modifiers.push(new Z(25,"maximumTraitNegativePercentModifier"));var e=.3,n=.1,l=1.025,c=1.05,d=.975,m=.95;this.globalVar.modifiers.push(new Z(e*l,"horseDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n,"horseDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5.5,"horseDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1,"horseDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*m,"horseDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"horseDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*c,"cheetahDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(1.1*n,"cheetahDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(4.5,"cheetahDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1,"cheetahDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5,"cheetahDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5*d,"cheetahDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*m,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e,"monkeyDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*m,"monkeyDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5,"monkeyDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1.1,"monkeyDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*c,"monkeyDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"monkeyDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e,"goatDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*l,"goatDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5*l,"goatDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*d,"goatDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*d,"goatDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5.5,"goatDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*m,"geckoDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n,"geckoDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5*c,"geckoDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1,"geckoDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5.5,"geckoDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"geckoDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*d,"dolphinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*l,"dolphinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5,"dolphinDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1.1,"dolphinDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5,"dolphinDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5*d,"dolphinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(.33,"sharkDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n,"sharkDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5*d,"sharkDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*l,"sharkDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*m,"sharkDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5*m,"sharkDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*d,"octopusDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*m,"octopusDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5,"octopusDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1.1,"octopusDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*l,"octopusDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"octopusDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*m,"penguinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n,"penguinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5,"penguinDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*l,"penguinDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5,"penguinDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5*c,"penguinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*d,"caribouDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*m,"caribouDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5.5,"caribouDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*l,"caribouDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*c,"caribouDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"caribouDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e,"salamanderDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n*l,"salamanderDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5*m,"salamanderDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1,"salamanderDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(5*c,"salamanderDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5,"salamanderDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Z(e*c,"foxDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Z(n,"foxDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Z(5*d,"foxDefaultStaminaModifier")),this.globalVar.modifiers.push(new Z(1*l,"foxDefaultPowerModifier")),this.globalVar.modifiers.push(new Z(4.5,"foxDefaultFocusModifier")),this.globalVar.modifiers.push(new Z(5*c,"foxDefaultAdaptabilityModifier"))}InitializeAnimals(){var e=new m4;e.name="Horse",e.isAvailable=!0,this.calculateAnimalRacingStats(e);var n=new _4;n.name="Monkey",this.calculateAnimalRacingStats(n);var r=new b4;r.name="Hare",this.calculateAnimalRacingStats(r);var a=new v4;a.name="Cheetah",this.calculateAnimalRacingStats(a);var o=new y4;o.name="Goat",this.calculateAnimalRacingStats(o);var s=new w4;s.name="Gecko",this.calculateAnimalRacingStats(s);var l=new C4;l.name="Dolphin",this.calculateAnimalRacingStats(l);var c=new S4;c.name="Shark",this.calculateAnimalRacingStats(c);var u=new T4;u.name="Octopus",this.calculateAnimalRacingStats(u);var d=new D4;d.name="Penguin",this.calculateAnimalRacingStats(d);var m=new R4;m.name="Caribou",this.calculateAnimalRacingStats(m);var v=new x4;v.name="Salamander",this.calculateAnimalRacingStats(v);var _=new M4;_.name="Fox",this.calculateAnimalRacingStats(_),this.globalVar.animals.push(e),this.globalVar.animals.push(a),this.globalVar.animals.push(r),this.globalVar.animals.push(o),this.globalVar.animals.push(n),this.globalVar.animals.push(s),this.globalVar.animals.push(l),this.globalVar.animals.push(c),this.globalVar.animals.push(u),this.globalVar.animals.push(d),this.globalVar.animals.push(m),this.globalVar.animals.push(v),this.globalVar.animals.push(_)}InitializeRelayTeams(){var e=new Qh;e.isPrimaryDeck=!0,e.isAvailable=!0,e.name="Relay Team 1",e.deckNumber=1;var n=this.globalVar.animals.find(o=>"Horse"===o.getAnimalType());void 0!==n&&e.selectedAnimals.push(n),this.globalVar.animalDecks.push(e);for(var r=0;r<3;r++){var a=new Qh;a.isAvailable=!0,a.deckNumber=r+2,a.name="Relay Team "+a.deckNumber,this.globalVar.animalDecks.push(a)}}InitializeTokenShop(){this.globalVar.tokenShop=[];var e=new Qr,n=[],r=10,a=new it;a.name="Apples",a.purchasePrice.push(this.getTokenResourceValue(1)),a.basePurchasePrice.push(this.getTokenResourceValue(1)),a.shortDescription="+1 Acceleration to a single animal",a.numberPurchasing=r,a.canHaveMultiples=!0,a.type=Y.Food,a.infiniteAmount=!0,n.push(a);var o=new it;o.name="Bananas",o.shortDescription="+1 Speed to a single animal",o.purchasePrice.push(this.getTokenResourceValue(1)),o.basePurchasePrice.push(this.getTokenResourceValue(1)),o.canHaveMultiples=!0,o.numberPurchasing=r,o.type=Y.Food,o.infiniteAmount=!0,n.push(o);var s=new it;s.name="Strawberries",s.shortDescription="+1 Endurance to a single animal",s.purchasePrice.push(this.getTokenResourceValue(1)),s.basePurchasePrice.push(this.getTokenResourceValue(1)),s.canHaveMultiples=!0,s.numberPurchasing=r,s.type=Y.Food,s.infiniteAmount=!0,n.push(s);var l=new it;l.name="Carrots",l.shortDescription="+1 Power to a single animal",l.purchasePrice.push(this.getTokenResourceValue(1)),l.basePurchasePrice.push(this.getTokenResourceValue(1)),l.canHaveMultiples=!0,l.numberPurchasing=r,l.type=Y.Food,l.infiniteAmount=!0,n.push(l);var c=new it;c.name="Turnips",c.shortDescription="+1 Focus to a single animal",c.purchasePrice.push(this.getTokenResourceValue(1)),c.basePurchasePrice.push(this.getTokenResourceValue(1)),c.canHaveMultiples=!0,c.numberPurchasing=r,c.type=Y.Food,c.infiniteAmount=!0,n.push(c);var u=new it;u.name="Oranges",u.shortDescription="+1 Adaptability to a single animal",u.purchasePrice.push(this.getTokenResourceValue(1)),u.basePurchasePrice.push(this.getTokenResourceValue(1)),u.canHaveMultiples=!0,u.numberPurchasing=r,u.type=Y.Food,u.infiniteAmount=!0,n.push(u);var d=new it;d.name="Circuit Race Breed XP Gain Certificate",d.shortDescription=this.getItemDescription(d.name),d.purchasePrice.push(this.getTokenResourceValue(1)),d.basePurchasePrice.push(this.getTokenResourceValue(1)),d.canHaveMultiples=!0,d.type=Y.Consumable,d.infiniteAmount=!0,n.push(d);var m=new it;m.name="Free Race Breed XP Gain Certificate",m.shortDescription=this.getItemDescription(m.name),m.purchasePrice.push(this.getTokenResourceValue(1)),m.basePurchasePrice.push(this.getTokenResourceValue(1)),m.canHaveMultiples=!0,m.type=Y.Consumable,m.infiniteAmount=!0,n.push(m),e.name="Tier 1",e.itemList=n,this.globalVar.tokenShop.push(e);var v=new Qr,_=[],y=new it;y.name="Mangoes",y.shortDescription="+1 Breed Level to a single animal",y.purchasePrice.push(this.getTokenResourceValue(1)),y.basePurchasePrice.push(this.getTokenResourceValue(1)),y.canHaveMultiples=!0,y.numberPurchasing=2,y.type=Y.Food,y.infiniteAmount=!0,_.push(y);var S=new it;S.name="Coins",S.shortDescription="",S.purchasePrice.push(this.getTokenResourceValue(3)),S.basePurchasePrice.push(this.getTokenResourceValue(3)),S.canHaveMultiples=!0,S.numberPurchasing=5e3,S.type=Y.Resources,S.infiniteAmount=!0,_.push(S);var T=new it;T.name="Diminishing Returns Increase Certificate",T.shortDescription=this.getItemDescription(T.name),T.purchasePrice.push(this.getTokenResourceValue(5)),T.basePurchasePrice.push(this.getTokenResourceValue(5)),T.canHaveMultiples=!0,T.type=Y.Consumable,T.infiniteAmount=!0,_.push(T);var C=new it;C.name="Training Breed XP Gain Certificate",C.shortDescription=this.getItemDescription(C.name),C.purchasePrice.push(this.getTokenResourceValue(1)),C.basePurchasePrice.push(this.getTokenResourceValue(1)),C.canHaveMultiples=!0,C.type=Y.Consumable,C.infiniteAmount=!0,_.push(C),v.name="Tier 2",v.itemList=_,this.globalVar.tokenShop.push(v);var O=new Qr,j=[],G=new it;G.name=this.getEquipmentName(Je.scaryMask),G.shortDescription=this.getEquipmentDescription(G.name),G.purchasePrice.push(this.getTokenResourceValue(7)),G.canHaveMultiples=!0,G.infiniteAmount=!0,G.type=Y.Equipment,j.push(G);var K=new it;K.name=this.getEquipmentName(Je.runningShoes),K.shortDescription=this.getEquipmentDescription(K.name),K.purchasePrice.push(this.getTokenResourceValue(7)),K.canHaveMultiples=!0,K.infiniteAmount=!0,K.type=Y.Equipment,j.push(K);var se=new it;se.name=this.getEquipmentName(Je.incense),se.shortDescription=this.getEquipmentDescription(se.name),se.purchasePrice.push(this.getTokenResourceValue(7)),se.canHaveMultiples=!0,se.infiniteAmount=!0,se.type=Y.Equipment,j.push(se);var de=new it;de.name=this.getEquipmentName(Je.athleticTape),de.shortDescription=this.getEquipmentDescription(de.name),de.purchasePrice.push(this.getTokenResourceValue(7)),de.canHaveMultiples=!0,de.infiniteAmount=!0,de.type=Y.Equipment,j.push(de),O.name="Tier 3",O.itemList=j,this.globalVar.tokenShop.push(O)}InitializeShop(){this.globalVar.shop=[];var e=new Qr,n=[],u=new it;u.name="Cheetah",u.purchasePrice.push(new le("Coins",1e3)),u.canHaveMultiples=!1,u.type=Y.Animal,n.push(u);var d=new it;d.name="Hare",d.purchasePrice.push(new le("Coins",1e3)),d.canHaveMultiples=!1,d.type=Y.Animal,n.push(d);var m=new it;m.name="Goat",m.purchasePrice.push(new le("Coins",2500)),m.canHaveMultiples=!1,m.type=Y.Animal,m.isAvailable=!1,n.push(m);var v=new it;v.name="Gecko",v.purchasePrice.push(new le("Coins",2500)),v.canHaveMultiples=!1,v.type=Y.Animal,v.isAvailable=!1,n.push(v);var _=new it;_.name="Shark",_.purchasePrice.push(new le("Coins",5e3)),_.canHaveMultiples=!1,_.type=Y.Animal,_.isAvailable=!1,n.push(_);var y=new it;y.name="Octopus",y.purchasePrice.push(new le("Coins",5e3)),y.canHaveMultiples=!1,y.type=Y.Animal,y.isAvailable=!1,n.push(y);var S=new it;S.name="Caribou",S.purchasePrice.push(new le("Coins",1e4)),S.canHaveMultiples=!1,S.type=Y.Animal,S.isAvailable=!1,n.push(S);var T=new it;T.name="Fox",T.purchasePrice.push(new le("Coins",1e4)),T.canHaveMultiples=!1,T.type=Y.Animal,T.isAvailable=!1,n.push(T),e.name="Animals",e.itemList=n,this.globalVar.shop.push(e);var C=new Qr,O=[],j=10,G=new it;G.name="Apples",G.shortDescription="+1 Acceleration to a single animal",G.purchasePrice.push(new le("Coins",j)),G.canHaveMultiples=!0,G.type=Y.Food,G.infiniteAmount=!0,O.push(G);var K=new it;K.name="Bananas",K.shortDescription="+1 Speed to a single animal",K.purchasePrice.push(new le("Coins",j)),K.canHaveMultiples=!0,K.type=Y.Food,K.infiniteAmount=!0,O.push(K);var se=new it;se.name="Strawberries",se.shortDescription="+1 Endurance to a single animal",se.purchasePrice.push(new le("Coins",j)),se.canHaveMultiples=!0,se.type=Y.Food,se.infiniteAmount=!0,O.push(se);var de=new it;de.name="Carrots",de.shortDescription="+1 Power to a single animal",de.purchasePrice.push(new le("Coins",j)),de.canHaveMultiples=!0,de.type=Y.Food,de.infiniteAmount=!0,O.push(de);var be=new it;be.name="Turnips",be.shortDescription="+1 Focus to a single animal",be.purchasePrice.push(new le("Coins",j)),be.canHaveMultiples=!0,be.type=Y.Food,be.infiniteAmount=!0,O.push(be);var he=new it;he.name="Oranges",he.shortDescription="+1 Adaptability to a single animal",he.purchasePrice.push(new le("Coins",j)),he.canHaveMultiples=!0,he.type=Y.Food,he.infiniteAmount=!0,O.push(he);var Ae=new it;Ae.name="Mangoes",Ae.shortDescription="+1 Breed Level to a single animal",Ae.purchasePrice.push(new le("Coins",100)),Ae.canHaveMultiples=!0,Ae.type=Y.Food,Ae.infiniteAmount=!0,O.push(Ae),C.name="Food",C.itemList=O,this.globalVar.shop.push(C);var Ze=new Qr,Ct=[];this.globalVar.trainingOptions.filter(Vn=>!Vn.isAvailable).forEach(Vn=>{var _n=new it;_n.name=Vn.trainingName,_n.shortDescription=Vn.getStatGainDescription(),_n.purchasePrice.push(new le("Coins",Vn.purchasePrice)),_n.canHaveMultiples=!1,_n.type=Y.Training,(Vn.facilitySize===ct.Medium||Vn.facilitySize===ct.Large)&&(_n.isAvailable=!1,_n.additionalIdentifier=Vn.facilitySize.toString()),Ct.push(_n)}),Ze.name="Trainings",Ze.itemList=Ct,this.globalVar.shop.push(Ze);var vt=new Qr,xt=[];this.globalVar.animals.forEach(Vn=>{Vn.availableAbilities.forEach(_n=>{if(!_n.isAbilityPurchased){var oi=new it;oi.name=Vn.getAnimalType()+" Ability: "+_n.name,oi.purchasePrice.push(new le("Coins",_n.purchasePrice)),oi.canHaveMultiples=!1,oi.type=Y.Ability,oi.additionalIdentifier=_n.name,oi.isAvailable=Vn.isAvailable,xt.push(oi)}})}),vt.name="Abilities",vt.itemList=xt,this.globalVar.shop.push(vt);var Ot=new Qr,_t=[],ve=new it;ve.name="Stopwatch",ve.purchasePrice.push(this.getMedalResourceValue(10)),ve.basePurchasePrice.push(this.getMedalResourceValue(10)),ve.quantityMultiplier=2.5,ve.totalShopQuantity=2,ve.canHaveMultiples=!0,ve.type=Y.Specialty,_t.push(ve);var R=new it;R.name="Animal Handler",R.purchasePrice.push(this.getCoinsResourceValue(2e3)),R.basePurchasePrice.push(this.getCoinsResourceValue(2e3)),R.quantityAdditive=2e3,R.totalShopQuantity=20,R.canHaveMultiples=!0,R.type=Y.Specialty,_t.push(R);var Ye=new it;Ye.name="Course Maps",Ye.purchasePrice.push(this.getMedalResourceValue(2)),Ye.basePurchasePrice.push(this.getMedalResourceValue(2)),Ye.quantityMultiplier=2,Ye.totalShopQuantity=5,Ye.canHaveMultiples=!0,Ye.type=Y.Specialty,_t.push(Ye);var fe=new it;fe.name="Stockbreeder",fe.purchasePrice.push(this.getCoinsResourceValue(500)),fe.basePurchasePrice.push(this.getCoinsResourceValue(500)),fe.canHaveMultiples=!1,fe.type=Y.Specialty,_t.push(fe);var Ee=new it;Ee.name="Team Manager",Ee.purchasePrice.push(this.getMedalResourceValue(3)),Ee.basePurchasePrice.push(this.getMedalResourceValue(3)),Ee.canHaveMultiples=!0,Ee.quantityMultiplier=2,Ee.totalShopQuantity=20,Ee.type=Y.Specialty,_t.push(Ee);var Kt=new it;Kt.name="Scouts",Kt.purchasePrice.push(this.getCoinsResourceValue(1e4)),Kt.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),Kt.canHaveMultiples=!1,Kt.type=Y.Specialty,_t.push(Kt);var ut=new it;ut.name="Money Mark",ut.purchasePrice.push(this.getCoinsResourceValue(500)),ut.basePurchasePrice.push(this.getCoinsResourceValue(500)),ut.canHaveMultiples=!1,ut.type=Y.Specialty,_t.push(ut);var nn=new it;nn.name="National Races",nn.purchasePrice.push(this.getCoinsResourceValue(1e4)),nn.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),nn.canHaveMultiples=!1,nn.type=Y.Specialty,_t.push(nn);var ft,on=new it;on.name="International Races",on.purchasePrice.push(this.getCoinsResourceValue(5e4)),on.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),on.canHaveMultiples=!1,on.isAvailable=!1,on.type=Y.Specialty,_t.push(on),(ft=new it).name="Incubator Upgrade Lv1",ft.purchasePrice.push(this.getCoinsResourceValue(5e3)),ft.basePurchasePrice.push(this.getCoinsResourceValue(5e3)),ft.canHaveMultiples=!1,ft.isAvailable=!1,ft.type=Y.Specialty,_t.push(ft),(ft=new it).name="Incubator Upgrade Lv2",ft.purchasePrice.push(this.getCoinsResourceValue(1e4)),ft.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),ft.canHaveMultiples=!1,ft.isAvailable=!1,ft.type=Y.Specialty,_t.push(ft),(ft=new it).name="Incubator Upgrade Lv3",ft.purchasePrice.push(this.getCoinsResourceValue(25e3)),ft.basePurchasePrice.push(this.getCoinsResourceValue(25e3)),ft.canHaveMultiples=!1,ft.isAvailable=!1,ft.type=Y.Specialty,_t.push(ft),(ft=new it).name="Incubator Upgrade Lv4",ft.purchasePrice.push(this.getCoinsResourceValue(5e4)),ft.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),ft.canHaveMultiples=!1,ft.isAvailable=!1,ft.type=Y.Specialty,_t.push(ft);var gn=new it;gn.name="Whistle",gn.purchasePrice.push(this.getCoinsResourceValue(2500)),gn.basePurchasePrice.push(this.getCoinsResourceValue(2500)),gn.totalShopQuantity=1,gn.canHaveMultiples=!1,gn.isAvailable=!1,gn.type=Y.Specialty,_t.push(gn);var Bn=new it;Bn.name="Golden Whistle",Bn.purchasePrice.push(this.getCoinsResourceValue(15e3)),Bn.basePurchasePrice.push(this.getCoinsResourceValue(15e3)),Bn.totalShopQuantity=1,Bn.canHaveMultiples=!1,Bn.isAvailable=!1,Bn.type=Y.Specialty,_t.push(Bn);var zn=new it;zn.name="Talent Point Voucher",zn.purchasePrice.push(this.getMedalResourceValue(25)),zn.basePurchasePrice.push(this.getMedalResourceValue(25)),zn.infiniteAmount=!0,zn.canHaveMultiples=!0,zn.quantityAdditive=25,zn.isAvailable=!1,zn.type=Y.Specialty,_t.push(zn),Ot.name="Specialty",Ot.itemList=_t,this.globalVar.shop.push(Ot);var $n=new Qr,kn=[],qn=new it;qn.name=this.getEquipmentName(Je.headband),qn.shortDescription=this.getEquipmentDescription(qn.name),qn.purchasePrice.push(this.getCoinsResourceValue(1e3)),qn.canHaveMultiples=!0,qn.infiniteAmount=!0,qn.type=Y.Equipment,kn.push(qn);var fi=new it;fi.name=this.getEquipmentName(Je.pendant),fi.shortDescription=this.getEquipmentDescription(fi.name),fi.purchasePrice.push(this.getCoinsResourceValue(1e3)),fi.canHaveMultiples=!0,fi.infiniteAmount=!0,fi.type=Y.Equipment,kn.push(fi);var pi=new it;pi.name=this.getEquipmentName(Je.blinders),pi.shortDescription=this.getEquipmentDescription(pi.name),pi.purchasePrice.push(this.getCoinsResourceValue(1e3)),pi.canHaveMultiples=!0,pi.infiniteAmount=!0,pi.type=Y.Equipment,kn.push(pi);var St=new it;St.name=this.getEquipmentName(Je.quickSnack),St.shortDescription=this.getEquipmentDescription(St.name),St.purchasePrice.push(this.getCoinsResourceValue(1e3)),St.canHaveMultiples=!0,St.infiniteAmount=!0,St.type=Y.Equipment,kn.push(St);var An=new it;An.name=this.getEquipmentName(Je.redBaton),An.shortDescription=this.getEquipmentDescription(An.name),An.purchasePrice.push(this.getCoinsResourceValue(2500)),An.canHaveMultiples=!0,An.infiniteAmount=!0,An.type=Y.Equipment,kn.push(An);var lt=new it;lt.name=this.getEquipmentName(Je.blueBaton),lt.shortDescription=this.getEquipmentDescription(lt.name),lt.purchasePrice.push(this.getCoinsResourceValue(2500)),lt.canHaveMultiples=!0,lt.infiniteAmount=!0,lt.type=Y.Equipment,kn.push(lt);var yi=new it;yi.name=this.getEquipmentName(Je.violetBaton),yi.shortDescription=this.getEquipmentDescription(yi.name),yi.purchasePrice.push(this.getCoinsResourceValue(2500)),yi.canHaveMultiples=!0,yi.infiniteAmount=!0,yi.type=Y.Equipment,kn.push(yi);var dn=new it;dn.name=this.getEquipmentName(Je.orangeBaton),dn.shortDescription=this.getEquipmentDescription(dn.name),dn.purchasePrice.push(this.getCoinsResourceValue(2500)),dn.canHaveMultiples=!0,dn.infiniteAmount=!0,dn.type=Y.Equipment,kn.push(dn);var ei=new it;ei.name=this.getEquipmentName(Je.greenBaton),ei.shortDescription=this.getEquipmentDescription(ei.name),ei.purchasePrice.push(this.getCoinsResourceValue(2500)),ei.canHaveMultiples=!0,ei.infiniteAmount=!0,ei.type=Y.Equipment,kn.push(ei);var Ui=new it;Ui.name=this.getEquipmentName(Je.yellowBaton),Ui.shortDescription=this.getEquipmentDescription(Ui.name),Ui.purchasePrice.push(this.getCoinsResourceValue(2500)),Ui.canHaveMultiples=!0,Ui.infiniteAmount=!0,Ui.type=Y.Equipment,kn.push(Ui),$n.name="Equipment",$n.itemList=kn,this.globalVar.shop.push($n)}getEquipmentName(e){return e===Je.headband?"Headband":e===Je.pendant?"Pendant":e===Je.blinders?"Blinders":e===Je.quickSnack?"Quick Snack":e===Je.carrotOnAStick?"Carrot on a Stick":e===Je.redBaton?"Red Baton":e===Je.blueBaton?"Blue Baton":e===Je.violetBaton?"Violet Baton":e===Je.yellowBaton?"Yellow Baton":e===Je.greenBaton?"Green Baton":e===Je.orangeBaton?"Orange Baton":e===Je.scaryMask?"Scary Mask":e===Je.runningShoes?"Running Shoes":e===Je.incense?"Incense":e===Je.athleticTape?"Athletic Tape":""}getEquipmentEnum(e){return"Headband"===e?Je.headband:"Pendant"===e?Je.pendant:"Blinders"===e?Je.blinders:"Quick Snack"===e?Je.quickSnack:"Carrot on a Stick"===e?Je.carrotOnAStick:"Red Baton"===e?Je.redBaton:"Blue Baton"===e?Je.blueBaton:"Violet Baton"===e?Je.violetBaton:"Yellow Baton"===e?Je.yellowBaton:"Green Baton"===e?Je.greenBaton:"Orange Baton"===e?Je.orangeBaton:"Scary Mask"===e?Je.scaryMask:"Running Shoes"===e?Je.runningShoes:"Incense"===e?Je.incense:"Athletic Tape"===e?Je.athleticTape:Je.none}InitializeBarns(){if(null==this.globalVar.barns||0===this.globalVar.barns.length){this.globalVar.barns=[];var n=new Uv;if(n.barnNumber=1,n.isLocked=!1,n.size=ct.Small,n.purchasePrice=0,n.facilityUpgradePrice=500,n.upgradePrice=500,null!=this.globalVar.animals&&this.globalVar.animals.length>0){var r=this.globalVar.animals.find(s=>s.type===X.Horse);null!=r&&(r.associatedBarnNumber=n.barnNumber)}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.globalVar.barns.push(n);for(var a=2;a<=15;a++){var o=new Uv;o.barnNumber=a,o.isLocked=!0,o.purchasePrice=500*(a-1),o.facilityUpgradePrice=500,o.size=ct.Small,this.globalVar.barns.push(o)}}}InitializeGlobalTrainingOptions(){this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.ShortTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.Sprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.TrailRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.MoveLogs)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.Footwork)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.PracticeCommands)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.ScentTraining)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.SmallWagonTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.Sidestep)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.MediumTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.UphillRun)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.Puzzles)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.MoveRocks)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.LateralVerticalDrill)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.DodgeBall)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.BurstPractice)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.Acrobatics)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.LongTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.VehicleTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.LogJump)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.Meditation)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.WindSprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.GreenwayHike)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.Marathon)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ve.AgilityCourse))}IncreaseCircuitRank(){var e=this.globalVar.circuitRank,n=e.replace(/([A-Z])[^A-Z]*$/,function(c){var u=c.charCodeAt(0);return 65===u?String.fromCharCode(u)+"Z":String.fromCharCode(--u)}),r=!1;this.utilityService.getNumericValueOfCircuitRank(this.globalVar.monoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.duoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.rainbowRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),r&&(this.globalVar.notifications.isNewSpecialRaceAvailable=!0),this.globalVar.circuitRank=n;var l=this.checkCircuitRankRewards();return this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),l}IncreaseLocalRaceRank(e){var n="";e===Qt.Mono&&(n=this.globalVar.monoRank),e===Qt.Duo&&(n=this.globalVar.duoRank),e===Qt.Rainbow&&(n=this.globalVar.rainbowRank);var r=n.replace(/([A-Z])[^A-Z]*$/,function(a){var o=a.charCodeAt(0);return 65===o?String.fromCharCode(o)+"Z":String.fromCharCode(--o)});e===Qt.Mono&&(this.globalVar.monoRank=r,this.GenerateMonoRaces(this.globalVar.monoRank)),e===Qt.Duo&&(this.globalVar.duoRank=r,this.GenerateDuoRaces(this.globalVar.duoRank)),e===Qt.Rainbow&&(this.globalVar.rainbowRank=r,this.GenerateRainbowRaces(this.globalVar.rainbowRank))}increaseGrandPrixRaceRank(){if(null!=this.globalVar.eventRaceData){var n=this.globalVar.eventRaceData.rank.replace(/([A-Z])[^A-Z]*$/,function(r){var a=r.charCodeAt(0);return 65===a?String.fromCharCode(a)+"Z":String.fromCharCode(--a)});this.globalVar.eventRaceData.rank=n,this.initialGrandPrixSetup(this.globalVar.eventRaceData.rank),this.globalVar.eventRaceData.initialSetupComplete=!0,this.globalVar.notifications.isEventRaceNowActive=!0}}getRewardReceiveText(e){return this.globalVar.settings.get("useNumbersForCircuitRank")?"Reach circuit rank "+e+" to receive: \n":"Reach circuit rank "+this.utilityService.getCircuitRankFromNumericValue(e)+" to receive: \n"}checkCircuitRankRewards(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),n=["",""];if(1===e&&(this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(2)+"Mono Races"),2===e&&(this.globalVar.unlockables.set("monoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,n=["Mono Race",this.utilityService.getSanitizedHtml("A new race type has been unlocked! Take part in a Mono Race where you run an extended race as only one course type. Progressing through this race type generates new interest in your facility, which means it's time to make some upgrades. Gain Facility Level points from winning these races that increase your Diminishing Returns max value. <br/> <br/><em>Select this race and others like it by choosing the 'Special Race' option from the 'Races' menu.</em>")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(3)+"Monkey"),3===e){var r=this.globalVar.animals.find(de=>de.type===X.Monkey);if(null!=r&&(r.isAvailable=!0,this.unlockAnimalAbilities(r),this.unlockOtherRaceCourseTypeAnimals(r.raceCourseType),null!=(a=this.globalVar.animalDecks.find(de=>de.isPrimaryDeck)))){var o=!1;a.selectedAnimals.forEach(de=>{de.raceCourseType===(null==r?void 0:r.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(r)}n=["Monkey","The Monkey is a Mountain climbing animal capable of slowing its competitors and leaping to victory."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(4)+"Coaching"}else if(4===e){if(this.globalVar.unlockables.set("coaching",!0),null!=(s=this.globalVar.shop.find(de=>"Specialty"===de.name))){var l=s.itemList.find(de=>"Whistle"===de.name);null!=l&&(l.isAvailable=!0)}n=["Coaching","Take charge of your animal's training by giving them some coaching yourself. Visit a barn with an animal assigned and select 'Coach' to get started."];var c=500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+c+" Coins"}else if(5===e)c=500,null==(u=this.globalVar.resources.find(be=>"Coins"===be.name))?this.globalVar.resources.push(new le("Coins",c)):u.amount+=c,n=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(7)+"Barn Specializations";else if(7===e)this.globalVar.unlockables.set("barnSpecializations",!0),n=["Barn Specializations","As your training facility grows, so should your barns. At barn upgrade level 10, choose what direction you want your barn to progress in. Each option benefits your animals in different ways, so choose carefully."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(8)+"Headband";else if(8===e){c=1,null==(u=this.globalVar.resources.find(he=>"Headband"===he.name))?this.globalVar.resources.push(new le("Headband",c,Y.Equipment)):u.amount+=c,n=[c+" Headband","Equipment can be handled when viewing an animal from the Animals tab."];var d=1e3;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(9)+d+" Coins"}else if(9===e)c=1e3,null==(u=this.globalVar.resources.find(he=>"Coins"===he.name))?this.globalVar.resources.push(new le("Coins",c)):u.amount+=c,n=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Dolphin";else if(10===e){var m=this.globalVar.animals.find(be=>be.type===X.Dolphin);null!=m&&(m.isAvailable=!0,this.unlockAnimalAbilities(m),this.unlockOtherRaceCourseTypeAnimals(m.raceCourseType),null!=(a=this.globalVar.animalDecks.find(he=>he.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(Ae=>{Ae.raceCourseType===(null==m?void 0:m.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(m))),n=["Dolphin","The Dolphin is an Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay."],c=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(12)+c+" Stat Increasing Food"}else if(12===e)this.increaseAllFood(c=10),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(13)+"Grand Prix";else if(13===e){this.globalVar.unlockables.set("grandPrix",!0);var v=this.globalVar.animalDecks.find(de=>de.isPrimaryDeck);null!=v&&(v.isEventDeck=!0),n=["Grand Prix","Now that you've climbed the ranks and your racing team has turned some heads, you've received an invite to the Grand Prix invitational. Twice per week, a marathon style race runs over multiple days. Check the 'Event Races' tab to see more info."];var _=1;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(15)+"Attraction Specialization"}else if(15===e)this.globalVar.unlockables.set("attractionSpecialization",!0),n=["Attraction Specialization",this.getSpecializationDescription("Attraction")+"<br/><br/><em>Barn Specializations are available to select once you upgrade a barn to level 10.</em>"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(16)+" 1 Pendant";else if(16===e)c=1,null==(u=this.globalVar.resources.find(he=>"Pendant"===he.name))?this.globalVar.resources.push(new le("Pendant",c,Y.Equipment)):u.amount+=c,n=[c+" Pendant","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(18)+"Barn Row 2";else if(18===e)this.globalVar.unlockables.set("barnRow2",!0),n=["Barn Row 2",""],_=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+_+" Renown";else if(20===e)_=1,null==(y=this.globalVar.resources.find(he=>"Renown"===he.name))?this.globalVar.resources.push(new le("Renown",_)):y.amount+=_,n=[_+" Renown",""],c=50,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(22)+c+" Stat Increasing Food";else if(22===e)this.increaseAllFood(c=50),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],d=1500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(23)+d+" Coins";else if(23===e)c=1500,null==(u=this.globalVar.resources.find(he=>"Coins"===he.name))?this.globalVar.resources.push(new le("Coins",c)):u.amount+=c,n=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(25)+"Research Center Specialization";else if(25===e)this.globalVar.unlockables.set("researchCenterSpecialization",!0),n=["Research Center Specialization",this.getSpecializationDescription("Research Center")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(27)+"Duo Races";else if(27===e){if(this.globalVar.unlockables.set("duoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(s=this.globalVar.shop.find(be=>"Specialty"===be.name))){var S=s.itemList.find(be=>"Incubator Upgrade Lv1"===be.name);null!=S&&(S.isAvailable=!0)}n=["Duo Races","A new race type has been unlocked! Race in pairs to complete this long distance race. Success here will generate more interest for your facility, this time drawing in curious researchers. Gain Research Levels that improve incubator results."];var T=2500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(30)+T+" Coins"}else if(30===e){var C=2500;null==(u=this.globalVar.resources.find(he=>"Coins"===he.name))?this.globalVar.resources.push(new le("Coins",C)):u.amount+=C,n=[C+" Coins",""],c=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(32)+c+" Mangoes"}else if(32===e)c=1,null==(u=this.globalVar.resources.find(he=>"Blue Baton"===he.name))?this.globalVar.resources.push(new le("Blue Baton",c,Y.Equipment)):u.amount+=c,n=[c+" Blue Baton","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(33)+20+" Mangoes";else if(33===e)c=20,null==(u=this.globalVar.resources.find(he=>"Mangoes"===he.name))?this.globalVar.resources.push(new le("Mangoes",c,Y.Food)):u.amount+=c,n=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(35)+"Penguin";else if(35===e){var j=this.globalVar.animals.find(be=>be.type===X.Penguin);null!=j&&(j.isAvailable=!0,this.unlockAnimalAbilities(j),this.unlockOtherRaceCourseTypeAnimals(j.raceCourseType),null!=(a=this.globalVar.animalDecks.find(he=>he.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(Ae=>{Ae.raceCourseType===(null==j?void 0:j.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(j))),n=["Penguin","The Penguin is a Tundra racing animal that can slide carefully or recklessly.<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getTundraDescription()+"</em>")],T=3500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(37)+T+" Coins"}else if(37===e)C=3500,null==(u=this.globalVar.resources.find(he=>"Coins"===he.name))?this.globalVar.resources.push(new le("Coins",C)):u.amount+=C,n=[C+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(38)+"5 Medals";else if(38===e)null==(u=this.globalVar.resources.find(be=>"Medals"===be.name))?this.globalVar.resources.push(new le("Medals",5)):u.amount+=5,n=["5 Medals",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(40)+"Barn Row 3";else if(40===e)this.globalVar.unlockables.set("barnRow3",!0),n=["Barn Row 3",""],c=250,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(43)+c+" Stat Increasing Food";else if(43===e)this.increaseAllFood(c=250),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(45)+"Salamander";else if(45===e){var a,K=this.globalVar.animals.find(be=>be.type===X.Salamander);null!=K&&(K.isAvailable=!0,this.unlockAnimalAbilities(K),this.unlockOtherRaceCourseTypeAnimals(K.raceCourseType),null!=(a=this.globalVar.animalDecks.find(he=>he.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(Ae=>{Ae.raceCourseType===(null==K?void 0:K.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(K))),n=["Salamander","The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration.<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getVolcanicDescription()+"</em>")],_=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(47)+_+" Renown"}else if(47===e)_=10,null==(y=this.globalVar.resources.find(Ae=>"Renown"===Ae.name))?this.globalVar.resources.push(new le("Renown",_)):y.amount+=_,n=[_+" Renown",""],C=15e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(50)+C+" Coins";else if(50===e)T=15e3,null==(u=this.globalVar.resources.find(he=>"Coins"===he.name))?this.globalVar.resources.push(new le("Coins",T)):u.amount+=T,n=[T+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(53)+"Rainbow Races";else if(53===e){var s;if(this.globalVar.unlockables.set("rainbowRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(s=this.globalVar.shop.find(be=>"Specialty"===be.name))){var se=s.itemList.find(be=>"Talent Point Voucher"===be.name);null!=se&&(se.isAvailable=!0)}n=["Rainbow Race","A new race type has been unlocked! This race requires a full team effort spanning all five course types. Your team of researchers are on hand for these races, coming up with more efficient ways to win. Gain Talent Tree Points that can be spent to improve various course types."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(55)+"Amethyst Orb"}else if(55===e)this.globalVar.resources.push(new le("Amethyst Orb",1,Y.Equipment)),this.globalVar.unlockables.set("orbs",!0),n=["Amethyst Orb","You receive a glowing violet orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(58)+"Barn Row 4";else if(58===e)this.globalVar.unlockables.set("barnRow4",!0),n=["Barn Row 4",""],_=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(60)+"Sapphire Orb";else if(60===e)this.globalVar.resources.push(new le("Sapphire Orb",1,Y.Equipment)),n=["Sapphire Orb","You receive a glowing blue orb. What it does is a mystery."],c=100,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(62)+c+" Mangoes";else if(62===e){var u;c=100,null==(u=this.globalVar.resources.find(he=>"Mangoes"===he.name))?this.globalVar.resources.push(new le("Mangoes",c,Y.Food)):u.amount+=c,n=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(65)+"Amber Orb"}else if(65===e)this.globalVar.resources.push(new le("Amber Orb",1,Y.Equipment)),n=["Amber Orb","You receive a glowing orange orb. What it does is a mystery."],c=25,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(67)+c+" Renown";else if(67===e){var y;_=25,null==(y=this.globalVar.resources.find(he=>"Renown"===he.name))?this.globalVar.resources.push(new le("Renown",_)):y.amount+=_,n=[_+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(70)+"Topaz Orb"}else 70===e?(this.globalVar.resources.push(new le("Topaz Orb",1,Y.Equipment)),n=["Topaz Orb","You receive a glowing yellow orb. What it does is a mystery."],c=500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(73)+c+" Stat Increasing Food Items"):73===e?(this.increaseAllFood(c=500),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(75)+"Emerald Orb"):75===e?(this.globalVar.resources.push(new le("Emerald Orb",1,Y.Equipment)),n=["Emerald Orb","You receive a glowing green orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(78)+"Ruby Orb"):78===e&&(this.globalVar.resources.push(new le("Ruby Orb",1,Y.Equipment)),n=["Ruby Orb","You receive a glowing red orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription="More Coming Soon!");return n}increaseAllFood(e){var n=this.globalVar.resources.find(c=>"Apples"===c.name);null==n?this.globalVar.resources.push(new le("Apples",e,Y.Food)):n.amount+=e;var r=this.globalVar.resources.find(c=>"Bananas"===c.name);null==r?this.globalVar.resources.push(new le("Bananas",e,Y.Food)):r.amount+=e;var a=this.globalVar.resources.find(c=>"Oranges"===c.name);null==a?this.globalVar.resources.push(new le("Oranges",e,Y.Food)):a.amount+=e;var o=this.globalVar.resources.find(c=>"Strawberries"===c.name);null==o?this.globalVar.resources.push(new le("Strawberries",e,Y.Food)):o.amount+=e;var s=this.globalVar.resources.find(c=>"Carrots"===c.name);null==s?this.globalVar.resources.push(new le("Carrots",e,Y.Food)):s.amount+=e;var l=this.globalVar.resources.find(c=>"Turnips"===c.name);null==l?this.globalVar.resources.push(new le("Turnips",e,Y.Food)):l.amount+=e}GenerateCircuitRacesForRank(e){this.globalVar.circuitRaces=[];var n=this.utilityService.getNumericValueOfCircuitRank(e),r=1,a=60,o=15,s=100,l=1.125,c=80*n,u=1.1,d=.9,_=3;"Z"===e?_=1:"Y"==e&&(_=2);for(var y=0;y<_;y++){var S=[],T="C"+n+y;if(n<=2){c=-37;var C=new Nn;C.courseType=z.Flatland,2===n?0===y?C.terrain=new ai(ze.Sunny):1===y&&(C.terrain=new ai(ze.Rainy)):C.terrain=new ai(ze.Sunny),C.distance=Math.round(s*l**n+c),S.push(C)}else if(n<=9){c=3===n?20*n:40*n,(O=[]).push(z.Flatland),O.push(z.Mountain);var j=this.getCourseTypeInRandomOrderSeeded(O,T+"cl1"),G=this.utilityService.getRandomSeededNumber(20,80,T+"l1d"),he=(K=this.utilityService.getRandomSeededNumber(20,80,T+"l2d"))*(de=a/(G+K));(be=G*de)<o?(be=0,he=a):he<o&&(he=0,be=a),be>0&&((Ae=new Nn).courseType=j[0],Ae.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,T+"l1r")*(be/a),Ae.terrain=this.getRandomTerrain(Ae.courseType,T+"lt1d"),S.push(Ae)),he>0&&((Ze=new Nn).courseType=j[1],Ze.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,T+"l2r")*(he/a),Ze.terrain=this.getRandomTerrain(Ze.courseType,T+"lt2d"),S.push(Ze))}else{o=10,10===n?c=50*n:11===n&&(c=60*n);var O=[];n<=43?(O.push(z.Flatland),O.push(z.Mountain),O.push(z.Ocean)):n<=51?(O.push(z.Flatland),O.push(z.Mountain),O.push(z.Ocean),O.push(z.Tundra)):(O.push(z.Flatland),O.push(z.Mountain),O.push(z.Ocean),O.push(z.Tundra),O.push(z.Volcanic)),j=this.getCourseTypeInRandomOrderSeeded(O,T+"courses1"),G=this.utilityService.getRandomSeededNumber(20,80,T+"l1d");var de,be,Ae,Ze,K=this.utilityService.getRandomSeededNumber(20,80,T+"l2d"),Ct=this.utilityService.getRandomSeededNumber(20,80,T+"l3d"),vt=(he=K*(de=a/(G+K+Ct)),Ct*de);if((be=G*de)<o?(he+=be/2,vt+=be/2,be=0):he<o?(be+=he/2,vt+=he/2,he=0):vt<o&&(be+=vt/2,he+=vt/2,vt=0),be>0&&((Ae=new Nn).courseType=j[0],Ae.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,T+"l1r")*(be/a),Ae.terrain=this.getRandomTerrain(Ae.courseType,T+"tl1d"),S.push(Ae)),he>0&&((Ze=new Nn).courseType=j[1],Ze.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,T+"l2r")*(he/a),Ze.terrain=this.getRandomTerrain(Ze.courseType,T+"tl2d"),S.push(Ze)),vt>0){var xt=new Nn;xt.courseType=j[2],xt.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,T+"l3r")*(vt/a),xt.terrain=this.getRandomTerrain(xt.courseType,T+"tl3d"),S.push(xt)}}var Ot=0;S.forEach(_t=>{Ot+=_t.distance}),S.forEach(_t=>{_t.pathData=this.GenerateRaceLegPaths(_t,Ot)}),this.globalVar.circuitRaces.push(new hi(S,e,!0,r,Ot,a,this.GenerateCircuitRaceRewards(e),void 0,void 0,Ne.circuit)),r+=1}}reorganizeLegsByDeckOrder(e,n){return n.isCourseOrderActive?e.sort((r,a)=>n.courseTypeOrder.indexOf(r.courseType)-n.courseTypeOrder.indexOf(a.courseType)):e}reorganizeAnimalsByDeckOrder(e,n){return n.isCourseOrderActive?e.sort((r,a)=>n.courseTypeOrder.indexOf(r.raceCourseType)-n.courseTypeOrder.indexOf(a.raceCourseType)):e}getCourseTypeInRandomOrder(e){for(var n=[],r=e.length,a=0;a<r;a++){var o=this.utilityService.getRandomInteger(1,e.length);n.push(e[o-1]),e=e.filter(s=>s!==e[o-1])}return n}getCourseTypeInRandomOrderSeeded(e,n="seeded"){for(var r=[],a=e.length,o=0;o<a;o++){var s=this.utilityService.getRandomSeededInteger(1,e.length,n);r.push(e[s-1]),e=e.filter(l=>l!==e[s-1])}return r}getRandomTerrain(e,n){var r=[];e===z.Flatland||e===z.Mountain?(r.push(ze.Sunny),r.push(ze.Rainy),r.push(ze.Stormy),r.push(ze.Torrid),r.push(ze.Snowfall)):e===z.Ocean?(r.push(ze.Sunny),r.push(ze.Maelstrom),r.push(ze.Stormy),r.push(ze.Snowfall)):e===z.Tundra?(r.push(ze.Sunny),r.push(ze.Hailstorm),r.push(ze.Stormy),r.push(ze.Snowfall)):e===z.Volcanic&&(r.push(ze.Sunny),r.push(ze.Ashfall),r.push(ze.Stormy),r.push(ze.Torrid));var a;return a=null!=n?this.utilityService.getRandomSeededInteger(1,r.length,n):this.utilityService.getRandomInteger(1,r.length),new ai(r[a-1])}getRandomGrandPrixWeatherCluster(e,n){var r=[];r.push(Ni.clearSkies),r.push(Ni.coldSpell),r.push(Ni.inclementWeather);var o=r[(null!=e?this.utilityService.getRandomSeededInteger(1,r.length,e):this.utilityService.getRandomInteger(1,r.length))-1];if(this.globalVar.eventRaceData.animalData.length>0){var s=.2,l=this.globalVar.modifiers.find(c=>"weatherMoraleBoostModifier"===c.text);void 0!==l&&(s=l.value),this.globalVar.eventRaceData.animalData.forEach(c=>{var u=this.globalVar.animals.find(d=>d.type===c.associatedAnimalType);void 0!==u&&(void 0!==n&&this.animalGainsMoraleBoostFromWeather(u.raceCourseType,n)&&(c.morale-=+s),this.animalGainsMoraleBoostFromWeather(u.raceCourseType,o)&&(c.morale+=+s))})}return o}animalGainsMoraleBoostFromWeather(e,n){var r=!1;return(n===Ni.clearSkies&&(e===z.Volcanic||e===z.Flatland)||n===Ni.inclementWeather&&e===z.Ocean||n===Ni.coldSpell&&(e===z.Tundra||e===z.Mountain))&&(r=!0),r}getRandomGrandPrixTerrainFromWeatherCluster(e,n,r){var a=[];e===Ni.clearSkies?(a.push(ze.Sunny),a.push(ze.Torrid),a.push(ze.Ashfall)):e===Ni.coldSpell?(a.push(ze.Snowfall),a.push(ze.Hailstorm),a.push(ze.Sunny)):e===Ni.inclementWeather&&(a.push(ze.Rainy),a.push(ze.Stormy),a.push(ze.Maelstrom),a.push(ze.Hailstorm)),n===z.Flatland&&(a=a.filter(s=>s!==ze.Ashfall&&s!==ze.Hailstorm&&s!==ze.Maelstrom)),n===z.Mountain&&(a=a.filter(s=>s!==ze.Ashfall&&s!==ze.Hailstorm&&s!==ze.Maelstrom)),n===z.Ocean&&(a=a.filter(s=>s!==ze.Ashfall&&s!==ze.Hailstorm&&s!==ze.Rainy&&s!==ze.Torrid)),n===z.Tundra&&(a=a.filter(s=>s!==ze.Ashfall&&s!==ze.Rainy&&s!==ze.Maelstrom&&s!==ze.Torrid)),n===z.Volcanic&&(a=a.filter(s=>s!==ze.Snowfall&&s!==ze.Hailstorm&&s!==ze.Maelstrom));var o;return o=null!=r?this.utilityService.getRandomSeededInteger(1,a.length,r):this.utilityService.getRandomInteger(1,a.length),new ai(a[o-1])}stopGrandPrixRace(){null!=this.globalVar.eventRaceData&&(this.globalVar.eventRaceData.animalData.forEach(e=>{e.isCurrentlyRacing=!1}),this.globalVar.eventRaceData.isLoading=!1,this.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalVar.eventRaceData.isRunning=!1,this.globalVar.eventRaceData.isCatchingUp=!1,this.globalVar.eventRaceData.overallTimeCounter-=this.globalVar.eventRaceData.segmentTimeCounter,this.globalVar.eventRaceData.segmentTimeCounter=0,void 0!==this.globalVar.eventRaceData.currentRaceSegment&&this.globalVar.eventRaceData.currentRaceSegment.reduceExportSize())}GetCircuitRankValue(e){for(var n=1;e.length>1;){var r=e.length;n+=26,(e=e.substring(1)).length>=r&&(e="")}return n+(91-e.charCodeAt(0))}GenerateCircuitRaceRewards(e){var n=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new le("Coins",Math.round(50*1.0135**n))),l.push(new le("Renown",parseFloat((1.03*1.03**n/100).toFixed(3)))),l}GenerateLocalRaceRewards(e){var n=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new le("Coins",Math.round(10*1.013**n))),l.push(new le("Renown",parseFloat((1.01*1.015**n/100).toFixed(3)))),l}GenerateMonoRaceRewards(e){var n=[];n.push(new le("Facility Level",1,Y.Progression));var r=this.GetCircuitRankValue(e);return n.push(new le("Coins",Math.round(60*1.0135**r))),n.push(new le("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateDuoRaceRewards(e){var n=[];n.push(new le("Research Level",1,Y.Progression));var r=this.GetCircuitRankValue(e);return n.push(new le("Coins",Math.round(125*1.0135**r))),n.push(new le("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateRainbowRaceRewards(e){var n=[];n.push(new le("Talent Points",1,Y.Progression));var r=this.GetCircuitRankValue(e);return n.push(new le("Coins",Math.round(250*1.012**r))),n.push(new le("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateLocalRaces(){this.GenerateMonoRaces(this.globalVar.monoRank),this.GenerateDuoRaces(this.globalVar.duoRank),this.GenerateRainbowRaces(this.globalVar.rainbowRank)}GenerateMonoRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(S=>S.localRaceType!==Qt.Mono),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,l=100*n,d=[],m=new Nn;if(1===n)m.courseType=z.Flatland;else{var v=[];n<9?(v.push(z.Flatland),v.push(z.Mountain)):n<40?(v.push(z.Flatland),v.push(z.Mountain),v.push(z.Ocean)):n<50?(v.push(z.Flatland),v.push(z.Mountain),v.push(z.Ocean),v.push(z.Tundra)):(v.push(z.Flatland),v.push(z.Mountain),v.push(z.Ocean),v.push(z.Tundra),v.push(z.Volcanic)),null!=this.globalVar.lastMonoRaceCourseType&&n>2&&(v=v.filter(S=>S!==this.globalVar.lastMonoRaceCourseType));var _=this.getCourseTypeInRandomOrderSeeded(v,"monoseed"+e+n);m.courseType=_[0]}m.terrain=this.getRandomTerrain(m.courseType,"monoseed"+e+n),m.distance=Math.round((155*1.155**n+l)*this.utilityService.getRandomSeededNumber(.9,1.1)),d.push(m);var y=m.distance;d.forEach(S=>{S.pathData=this.GenerateRaceLegPaths(S,y)}),this.globalVar.localRaces.push(new hi(d,e,!1,r,y,90,this.GenerateMonoRaceRewards(e),Qt.Mono,void 0,Ne.special)),r+=1}}GenerateDuoRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(T=>T.localRaceType!==Qt.Duo),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,u=[],d=[];n<=10?(d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean)):n<=20?(d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean),d.push(z.Tundra)):(d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean),d.push(z.Tundra),d.push(z.Volcanic));var m=this.getCourseTypeInRandomOrderSeeded(d,"duooseed"+e+n),v=this.utilityService.getRandomSeededNumber(.8,1.2),_=new Nn;_.courseType=m[0],_.distance=Math.round(6500*1.1**n*v*.5),_.terrain=this.getRandomTerrain(_.courseType,"duoseedl1"+e+n),u.push(_);var y=new Nn;y.courseType=m[1],y.distance=Math.round(6500*1.1**n*v*.5),y.terrain=this.getRandomTerrain(y.courseType,"duoseedl2"+e+n),u.push(y);var S=_.distance+y.distance;u.forEach(T=>{T.pathData=this.GenerateRaceLegPaths(T,S)}),this.globalVar.localRaces.push(new hi(u,e,!1,r,S,80,this.GenerateDuoRaceRewards(e),Qt.Duo,void 0,Ne.special)),r+=1}}GenerateRainbowRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(j=>j.localRaceType!==Qt.Rainbow),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,o=1e5,s=1.135,u=[],d=[];d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean),d.push(z.Tundra),d.push(z.Volcanic);var m=this.getCourseTypeInRandomOrderSeeded(d,"rainbow"+e+n),v=this.utilityService.getRandomSeededNumber(.8,1.2),_=new Nn;_.courseType=m[0],_.distance=Math.round(o*s**n*v*.2),_.terrain=this.getRandomTerrain(_.courseType,"rainbowl1"+e+n),u.push(_);var y=new Nn;y.courseType=m[1],y.distance=Math.round(o*s**n*v*.2),y.terrain=this.getRandomTerrain(y.courseType,"rainbowl2"+e+n),u.push(y);var S=new Nn;S.courseType=m[2],S.distance=Math.round(o*s**n*v*.2),S.terrain=this.getRandomTerrain(S.courseType,"rainbowl3"+e+n),u.push(S);var T=new Nn;T.courseType=m[3],T.distance=Math.round(o*s**n*v*.2),T.terrain=this.getRandomTerrain(T.courseType,"rainbowl4"+e+n),u.push(T);var C=new Nn;C.courseType=m[4],C.distance=Math.round(o*s**n*v*.2),C.terrain=this.getRandomTerrain(C.courseType,"rainbowl5"+e+n),u.push(C);var O=_.distance+y.distance+S.distance+T.distance+C.distance;u.forEach(j=>{j.pathData=this.GenerateRaceLegPaths(j,O)}),this.globalVar.localRaces.push(new hi(u,e,!1,r,O,120,this.GenerateRainbowRaceRewards(e),Qt.Rainbow,void 0,Ne.special)),r+=1}}generateFreeRace(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),n=60,r=15,a=90,o=1.125,s=30*e;e>=11&&(s=65*e);var l=1.05,c=.8,m=[];if(e<=2){var v=new Nn;v.courseType=z.Flatland,v.terrain=this.getRandomTerrain(v.courseType),v.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l)),m.push(v)}else if(e<=10){(_=[]).push(z.Flatland),_.push(z.Mountain);var y=this.getCourseTypeInRandomOrder(_),S=this.utilityService.getRandomNumber(10,90),G=(T=this.utilityService.getRandomNumber(10,90))*(O=n/(S+T));(j=S*O)<r?(j=0,G=n):G<r&&(G=0,j=n),j>0&&((K=new Nn).courseType=y[0],K.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(j/n),K.terrain=this.getRandomTerrain(K.courseType),m.push(K)),G>0&&((se=new Nn).courseType=y[1],se.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(G/n),se.terrain=this.getRandomTerrain(se.courseType),m.push(se))}else{r=10;var _=[];e<45?(_.push(z.Flatland),_.push(z.Mountain),_.push(z.Ocean)):e<53?(_.push(z.Flatland),_.push(z.Mountain),_.push(z.Ocean),_.push(z.Tundra)):(_.push(z.Flatland),_.push(z.Mountain),_.push(z.Ocean),_.push(z.Tundra),_.push(z.Volcanic)),y=this.getCourseTypeInRandomOrder(_),S=this.utilityService.getRandomNumber(10,90);var O,j,K,se,T=this.utilityService.getRandomNumber(10,90),de=this.utilityService.getRandomNumber(10,90),be=(G=T*(O=n/(S+T+de)),de*O);if((j=S*O)<r?(G+=j/2,be+=j/2,j=0):G<r?(j+=G/2,be+=G/2,G=0):be<r&&(j+=be/2,G+=be/2,be=0),j>0&&((K=new Nn).courseType=y[0],K.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(j/n),K.terrain=this.getRandomTerrain(K.courseType),m.push(K)),G>0&&((se=new Nn).courseType=y[1],se.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(G/n),se.terrain=this.getRandomTerrain(se.courseType),m.push(se)),be>0){var he=new Nn;he.courseType=y[2],he.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(be/n),he.terrain=this.getRandomTerrain(he.courseType),m.push(he)}}var Ae=0,Ze=this.globalVar.animalDecks.find(xt=>xt.isPrimaryDeck);void 0!==Ze&&(m=this.reorganizeLegsByDeckOrder(m,Ze)),m.forEach(xt=>{Ae+=xt.distance}),m.forEach(xt=>{xt.pathData=this.GenerateRaceLegPaths(xt,Ae)});var Ct=new gD(sf.brazier,.1*Ae);return[].push(Ct),new hi(m,this.globalVar.circuitRank,!1,1,Ae,n,this.GenerateLocalRaceRewards(this.globalVar.circuitRank),Qt.Free,void 0,Ne.circuit,void 0,void 0)}getTotalSegments(e){return(null==this.globalVar.circuitRaces||0===this.globalVar.circuitRaces.length)&&this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),Math.ceil(this.globalVar.eventRaceData.grandPrixTimeLength/this.globalVar.eventRaceData.segmentTime),e/this.utilityService.getClosestWholeNumber(this.globalVar.circuitRaces[0].length*(this.globalVar.eventRaceData.segmentTime/this.globalVar.circuitRaces[0].timeToComplete),e)}initialGrandPrixSetup(e){this.globalVar.eventRaceData=new Li,this.globalVar.eventRaceData.rank=e;var n=this.utilityService.getNumericValueOfCircuitRank(e);this.globalVar.eventRaceData.totalDistance=5e8*n,this.globalVar.eventRaceData.currentRaceSegmentCount=0,this.globalVar.eventRaceData.segmentTimeCounter=0,this.globalVar.eventRaceData.totalSegments=this.getTotalSegments(this.globalVar.eventRaceData.totalDistance),this.globalVar.eventRaceData.remainingRewards=this.globalVar.eventRaceData.totalRewards=this.getGrandPrixRewardCount(),this.globalVar.eventRaceData.animalData=[],this.globalVar.animals.forEach(r=>{this.globalVar.eventRaceData.animalData.push(new pD(r.type))}),this.globalVar.eventRaceData.weatherCluster=this.getRandomGrandPrixWeatherCluster(),this.globalVar.previousEventRewards=[]}animalCanRaceGrandPrix(e){var n=!0,r=this.getBreedLevelRequiredForGrandPrix();e.breedLevel<r&&(n=!1);var a=this.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);return null!=a&&a.exhaustionStatReduction<.5&&(n=!1),n}getGrandPrixRacingAnimal(){var e=new Dt,n=this.globalVar.animalDecks.find(l=>l.isEventDeck);if(void 0!==n){var r=[];if(n.isCourseOrderActive){for(var a=0;a<n.selectedAnimals.length;a++)if(n.courseTypeOrder.length>a){var o=n.courseTypeOrder[a],s=n.selectedAnimals.find(l=>l.raceCourseType===o);void 0!==s&&r.push(s)}}else n.selectedAnimals.forEach(l=>{r.push(l)});r=r.filter(l=>this.animalCanRaceGrandPrix(l)),this.globalVar.eventRaceData.isCatchingUp&&(r=r.filter(l=>!this.shouldShowSlowSegmentWarning(l))),r.length>0&&(e=r[0])}return this.globalVar.eventRaceData.animalData.forEach(l=>{if(l.isCurrentlyRacing){var c=this.globalVar.animals.find(u=>u.type===l.associatedAnimalType);void 0!==c&&(e=c.makeCopy(c))}}),e}getCurrentlyActiveGrandPrixRacingAnimal(){var e=new Dt;return this.globalVar.eventRaceData.isRunning&&this.globalVar.eventRaceData.animalData.forEach(n=>{if(n.isCurrentlyRacing){var r=this.globalVar.animals.find(a=>a.type===n.associatedAnimalType);void 0!==r&&(e=r.makeCopy(r))}}),e}getExhaustionOfAnimal(e){var n;return null===(n=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===n?void 0:n.exhaustionStatReduction}getMoraleOfAnimal(e){var n;return null===(n=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===n?void 0:n.morale}generateGrandPrixSegment(e){var n=this.globalVar.eventRaceData,r=this.getRemainingEventRaceTime(),a=n.totalDistance/n.totalSegments,o=[],s=new Nn;return s.courseType=e.raceCourseType,s.terrain=this.getRandomGrandPrixTerrainFromWeatherCluster(this.globalVar.eventRaceData.weatherCluster,s.courseType,this.getEventStartDateTime().toString()+this.getEventTimePer5Min().toString()),s.distance=a,o.push(s),o.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,a)}),new hi(o,this.globalVar.circuitRank,!1,1,a,r,void 0,void 0,void 0,Ne.event,He.grandPrix)}getGrandPrixRewardCount(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.eventRaceData.rank),n=5,r=this.globalVar.modifiers.find(u=>"metersPerCoinsGrandPrixModifier"===u.text);void 0!==r&&(n=r.value);var a=5,o=this.globalVar.modifiers.find(u=>"metersPerRenownGrandPrixModifier"===u.text);return void 0!==o&&(a=o.value),this.globalVar.eventRaceData.totalDistance/(n*e)+this.globalVar.eventRaceData.totalDistance/(a*e)+4}getEventStartDateTime(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?l:o}getTimeToEventRace(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?(l.getTime()-e.getTime())/1e3:(o.getTime()-e.getTime())/1e3}getRemainingEventRaceTime(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?e>l?(c.getTime()-e.getTime())/1e3:(s.getTime()-e.getTime())/1e3:0}getEventTimePer5Min(){var e=this.getRemainingEventRaceTime();return Math.floor(e/60/5)}generateTrackRace(e,n){var r=60,a=[],o=new Nn;o.courseType=e.raceCourseType,n===Kn.practice?(r=45,o.distance=100,o.terrain=new ai(ze.Stormy)):n===Kn.novice?(r=60,o.distance=1e3,o.terrain=new ai(ze.Stormy)):n===Kn.intermediate?(r=80,o.distance=1e4,o.terrain=new ai(ze.Stormy)):n===Kn.master&&(r=100,o.distance=1e5,o.terrain=new ai(ze.Stormy)),a.push(o);var s=0;return a.forEach(l=>{s+=l.distance}),a.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,s,n)}),new hi(a,this.globalVar.circuitRank,!1,1,s,r,void 0,Qt.Track,n,Ne.trainingTrack)}GenerateRaceLegPaths(e,n,r){for(var o=[],s=e.distance,c=Math.round(s/(n/20)),u=!1,d=Xe.Regular,m=s/c,v=0;v<c;v++){var _=new Jh;0!==v?v!==c-1?(_.length=s>m?m:s,(s-=_.length)<0&&(s=0),u?_.routeDesign=Xe.Regular:(_.routeDesign=this.GetSpecialRoute(e.courseType,v+2<c,d),e.specialPathCount+=1,_.isSpecialPath=!0),u=_.routeDesign!==Xe.Regular,_.setStumbleFields(),o.push(_),d=_.routeDesign):(_.length=s,_.routeDesign=e.courseType===z.Volcanic?Xe.LastRegular:Xe.Regular,_.setStumbleFields(),o.push(_),d=_.routeDesign):(_.length=m,_.routeDesign=e.courseType===z.Volcanic?Xe.FirstRegular:Xe.Regular,_.setStumbleFields(),o.push(_),s-=_.length,d=_.routeDesign)}return o}GetSpecialRoute(e,n,r){var a=Xe.Regular,s=this.utilityService.getRandomInteger(1,3);return 1===s||(2===s?e===z.Flatland?a=Xe.S:e===z.Mountain?a=Xe.Crevasse:e===z.Ocean?a=Xe.Waves:e===z.Tundra?a=Xe.Cavern:e===z.Volcanic&&(a=Xe.Regular):3===s&&(e===z.Flatland?a=Xe.Bumps:e===z.Mountain?a=Xe.Gaps:e===z.Ocean?a=Xe.Dive:e===z.Tundra?a=Xe.Hills:e===z.Volcanic&&(a=Xe.SteppingStones))),a}calculateAnimalRacingStats(e){var n=e.currentStats.defaultMaxSpeedModifier,r=e.currentStats.defaultAccelerationModifier,a=e.currentStats.defaultStaminaModifier,o=e.currentStats.defaultPowerModifier,s=e.currentStats.defaultFocusModifier,l=e.currentStats.defaultAdaptabilityModifier,c=.02,u=e.getAnimalType().toLowerCase(),d=this.globalVar.modifiers.find(fe=>fe.text===u+"DefaultMaxSpeedModifier"),m=this.globalVar.modifiers.find(fe=>fe.text===u+"DefaultAccelerationModifier"),v=this.globalVar.modifiers.find(fe=>fe.text===u+"DefaultStaminaModifier"),_=this.globalVar.modifiers.find(fe=>fe.text===u+"DefaultPowerModifier"),y=this.globalVar.modifiers.find(fe=>fe.text===u+"DefaultFocusModifier"),S=this.globalVar.modifiers.find(fe=>fe.text===u+"DefaultAdaptabilityModifier");null!=d&&(n=d.value),null!=m&&(r=m.value),null!=v&&(a=v.value),null!=_&&(o=_.value),null!=y&&(s=y.value),null!=S&&(l=S.value);var T=this.getTraitModifier(e,ye.topSpeed),C=this.getTraitModifier(e,ye.acceleration),O=this.getTraitModifier(e,ye.endurance),j=this.getTraitModifier(e,ye.power),G=this.getTraitModifier(e,ye.focus),K=this.getTraitModifier(e,ye.adaptability),se=null!==e.equippedOrb&&"Ruby Orb"===e.equippedOrb.name?this.globalVar.orbStats.maxSpeedIncrease:1,de=null!==e.equippedOrb&&"Amber Orb"===e.equippedOrb.name?this.globalVar.orbStats.accelerationRateIncrease:1,be=null!==e.equippedOrb&&"Topaz Orb"===e.equippedOrb.name?this.globalVar.orbStats.staminaIncrease:1,he=null!==e.equippedOrb&&"Amethyst Orb"===e.equippedOrb.name?this.globalVar.orbStats.powerEfficiencyIncrease:1,Ae=null!==e.equippedOrb&&"Sapphire Orb"===e.equippedOrb.name?this.globalVar.orbStats.focusDistanceIncrease:1,Ze=null!==e.equippedOrb&&"Emerald Orb"===e.equippedOrb.name?this.globalVar.orbStats.adaptabilityDistanceIncrease:1,Ct=this.globalVar.modifiers.find(fe=>"breedLevelStatModifier"===fe.text);null!=Ct&&(c=Ct.value),c=1+c*(e.breedLevel-1);var vt=1,xt=1,Ot=1,_t=1,ve=1,R=1;e.talentTree.talentTreeType===ht.sprint&&(R=1+e.talentTree.column1Row3Points/100,xt=1+e.talentTree.column2Row3Points/100,_t=1+e.talentTree.column3Row3Points/100),e.talentTree.talentTreeType===ht.longDistance&&(ve=1+e.talentTree.column1Row3Points/100,vt=1+e.talentTree.column2Row3Points/100,Ot=1+e.talentTree.column3Row3Points/100);var Ye=this.GetAnimalDiminishingReturns(e);e.currentStats.maxSpeedMs=e.currentStats.calculateMaxSpeed(n*c*T*e.incubatorStatUpgrades.maxSpeedModifier*vt,Ye,se),e.currentStats.accelerationMs=e.currentStats.calculateTrueAcceleration(r*c*C*e.incubatorStatUpgrades.accelerationModifier*xt,Ye,de),e.currentStats.stamina=e.currentStats.calculateStamina(a*c*O*e.incubatorStatUpgrades.staminaModifier*Ot,Ye,be),e.currentStats.powerMs=e.currentStats.calculateTruePower(o*c*j*e.incubatorStatUpgrades.powerModifier*_t,Ye,he),e.currentStats.focusMs=e.currentStats.calculateTrueFocus(s*c*G*e.incubatorStatUpgrades.focusModifier*ve,Ye,Ae),e.currentStats.adaptabilityMs=e.currentStats.calculateTrueAdaptability(l*c*K*e.incubatorStatUpgrades.adaptabilityModifier*R,Ye,Ze),e.currentStats.burstChance=e.currentStats.calculateBurstChance(c),e.currentStats.burstDistance=e.currentStats.calculateBurstDistance(c),this.updateTrackedMaxStats(e)}getTraitModifier(e,n){var r=1;if(null!=e.trait){var a=e.trait.researchLevel,o=e.trait.researchLevel,s=this.globalVar.modifiers.find(l=>"maximumTraitNegativePercentModifier"===l.text);void 0!==s&&o>s.value&&(o=s.value),e.trait.positiveStatGain===n&&(r+=a/100),e.trait.negativeStatGain===n&&(r-=o/100)}return r}GetAnimalDiminishingReturns(e){var n=e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalVar.resources.find(s=>"Facility Level"===s.name);if(null==r)return n;var a=5,o=this.globalVar.modifiers.find(s=>"facilityLevelModifier"===s.text);return void 0!==o&&(a=o.value),n+r.amount*(a+e.miscStats.diminishingReturnsBonus)}IncreaseAnimalBreedGauge(e,n){e.breedGaugeXp+=n,e.breedGaugeXp>=e.breedGaugeMax&&(e.breedGaugeXp=e.breedGaugeMax,e.autoBreedActive&&this.BreedAnimal(e))}getBreedLevelRequiredForGrandPrix(){var e=50,n=this.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}BreedAnimal(e){if(!(e.breedGaugeXp<e.breedGaugeMax)){var n=5,r=this.globalVar.modifiers.find(K=>"breedGaugeMaxIncreaseModifier"===K.text);if(null!=r&&(n=r.value),e.breedLevel+=1,e.breedGaugeXp=0,e.breedGaugeMax+=n,null!=this.globalVar.resources.find(K=>K.name.includes("Incubator Upgrade"))&&null!=e.trait){var o=.001,s=this.globalVar.modifiers.find(K=>"incubatorUpgradeIncreaseModifier"===K.text);null!=s&&(o=s.value);var l=e.trait.researchLevel*o,c=this.globalVar.resources.find(K=>"Incubator Upgrade Lv1"===K.name),u=this.globalVar.resources.find(K=>"Incubator Upgrade Lv2"===K.name),d=this.globalVar.resources.find(K=>"Incubator Upgrade Lv3"===K.name);null!=this.globalVar.resources.find(K=>"Incubator Upgrade Lv4"===K.name)?l>.1&&(l=.1):null!=d?l>.05&&(l=.05):null!=u?l>.025&&(l=.025):null!=c&&l>.01&&(l=.01),e.trait.positiveStatGain===ye.topSpeed&&(e.incubatorStatUpgrades.maxSpeedModifier+=l),e.trait.positiveStatGain===ye.acceleration&&(e.incubatorStatUpgrades.accelerationModifier+=l),e.trait.positiveStatGain===ye.endurance&&(e.incubatorStatUpgrades.staminaModifier+=l),e.trait.positiveStatGain===ye.power&&(e.incubatorStatUpgrades.powerModifier+=l),e.trait.positiveStatGain===ye.focus&&(e.incubatorStatUpgrades.focusModifier+=l),e.trait.positiveStatGain===ye.adaptability&&(e.incubatorStatUpgrades.adaptabilityModifier+=l)}var v=this.globalVar.resources.find(K=>"Animal Handler"===K.name),_=this.globalVar.modifiers.find(K=>"animalHandlerModifier"===K.text);if(null!=v&&void 0!==_&&null!=_&&v.amount>0){var y=v.amount*_.value,S=Math.round((e.currentStats.topSpeed-e.baseStats.topSpeed)*y),T=Math.round((e.currentStats.acceleration-e.baseStats.acceleration)*y),C=Math.round((e.currentStats.endurance-e.baseStats.endurance)*y),O=Math.round((e.currentStats.power-e.baseStats.power)*y),j=Math.round((e.currentStats.focus-e.baseStats.focus)*y),G=Math.round((e.currentStats.adaptability-e.baseStats.adaptability)*y);e.currentStats=new Oe(e.baseStats.topSpeed+S,e.baseStats.acceleration+T,e.baseStats.endurance+C,e.baseStats.power+O,e.baseStats.focus+j,e.baseStats.adaptability+G)}else e.currentStats=new Oe(e.baseStats.topSpeed,e.baseStats.acceleration,e.baseStats.endurance,e.baseStats.power,e.baseStats.focus,e.baseStats.adaptability);this.calculateAnimalRacingStats(e),this.globalVar.trackedStats.totalBreeds+=1}}increaseAbilityXp(e,n){var r=25,a=this.globalVar.modifiers.find(l=>"abilityLevelCapModifier"===l.text);if(null!=a&&(r=a.value),!(e.ability.abilityLevel>e.breedLevel+r)){var o=1;null!=n&&n>1&&(o=n),e.ability.abilityXp+=o,e.ability.abilityXp>=e.ability.abilityMaxXp&&(e.ability.abilityXp=0,e.ability.abilityLevel+=1,e.ability.abilityLevel%10==0&&(e.ability.abilityMaxXp+=5));var s=e.availableAbilities.find(l=>l.name===e.ability.name);null!=s&&(s.abilityXp=e.ability.abilityXp,s.abilityLevel=e.ability.abilityLevel,s.abilityMaxXp=e.ability.abilityMaxXp)}}InitializeResources(){this.globalVar.resources.push(this.initializeService.initializeResource("Coins",500,Y.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Renown",1,Y.Progression))}InitializeSettings(){this.themeService.setLightTheme(),this.globalVar.settings.set("theme",this.themeService.getActiveTheme()),this.globalVar.settings.set("skipDrawRace",!1),this.globalVar.settings.set("finishTrainingBeforeSwitching",!0),this.globalVar.settings.set("hideTips",!1),this.globalVar.settings.set("useNumbersForCircuitRank",!1),this.globalVar.settings.set("raceDisplayInfo",Kr.both),this.globalVar.settings.set("autoStartEventRace",!1)}InitializeUnlockables(){this.globalVar.unlockables.set("monoRace",!1),this.globalVar.unlockables.set("duoRace",!1),this.globalVar.unlockables.set("rainbowRace",!1),this.globalVar.unlockables.set("grandPrix",!1),this.globalVar.unlockables.set("orbs",!1),this.globalVar.unlockables.set("barnRow2",!1),this.globalVar.unlockables.set("barnRow3",!1),this.globalVar.unlockables.set("barnRow4",!1),this.globalVar.unlockables.set("barnRow5",!1),this.globalVar.unlockables.set("coaching",!1),this.globalVar.unlockables.set("barnSpecializations",!1),this.globalVar.unlockables.set("attractionSpecialization",!1),this.globalVar.unlockables.set("researchCenterSpecialization",!1)}getCoinsResourceValue(e){return new le("Coins",e)}getMedalResourceValue(e){return new le("Medals",e)}getTokenResourceValue(e){return new le("Tokens",e)}unlockAnimalAbilities(e){var n=this.globalVar.shop.find(a=>"Abilities"===a.name);if(null!=n){var r=n.itemList.filter(a=>a.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}unlockOtherRaceCourseTypeAnimals(e){var n=this.globalVar.shop.find(a=>"Animals"===a.name);if(null!=n){var r=[];n.itemList.forEach(a=>{var o=this.globalVar.animals.find(s=>s.getAnimalType()===a.name);null!=o&&o.raceCourseType===e&&r.push(a)}),null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}getEquipmentDescription(e){var n="";return"Headband"===e&&(n="The first three stumbles you would have are ignored"),"Pendant"===e&&(n="Reduce your ability cooldown by 10%"),"Blinders"===e&&(n="Negative terrain effects are cut in half"),"Quick Snack"===e&&(n="Gain 100% of Stamina back after running out"),"Red Baton"===e&&(n="Increase next racer's Speed by 10% on Relay"),"Blue Baton"===e&&(n="Increase next racer's Focus by 10% on Relay"),"Violet Baton"===e&&(n="Increase next racer's Power by 10% on Relay"),"Green Baton"===e&&(n="Increase next racer's Adaptability by 10% on Relay"),"Orange Baton"===e&&(n="Increase next racer's Acceleration by 10% on Relay"),"Yellow Baton"===e&&(n="Increase next racer's Endurance by 10% on Relay"),"Amethyst Orb"===e&&(n="Increase your Power Efficiency by 10%."),"Sapphire Orb"===e&&(n="Increase your Focus Distance by 10%."),"Amber Orb"===e&&(n="Increase your Acceleration Rate by 10%."),"Topaz Orb"===e&&(n="Increase your Stamina by 10%."),"Emerald Orb"===e&&(n="Increase your Adaptability Distance by 10%."),"Ruby Orb"===e&&(n="Increase your Max Speed by 10%."),"Scary Mask"===e&&(n="Cause a distraction the first time you lose focus while ahead of competition, slowing competitors by 2 seconds."),"Running Shoes"===e&&(n="After each Burst during a race, increase subsequent Burst distance by 20%."),"Incense"===e&&(n="When your velocity is at least 90% of your Max Speed, immediately set velocity to 100% of your Max Speed."),"Athletic Tape"===e&&(n="While Bursting, decrease Acceleration Rate by 50% but increase Focus Distance and Adaptability Distance by 50%."),n}getItemDescription(e){var n="";return"Apples"===e&&(n="+1 Acceleration to a single animal"),"Bananas"===e&&(n="+1 Speed to a single animal"),"Strawberries"===e&&(n="+1 Endurance to a single animal"),"Carrots"===e&&(n="+1 Power to a single animal"),"Turnips"===e&&(n="+1 Focus to a single animal"),"Oranges"===e&&(n="+1 Adaptability to a single animal"),"Mangoes"===e&&(n="+1 Breed Level to a single animal"),"Circuit Race Breed XP Gain Certificate"===e&&(n="Give an animal +2 Bonus Breed XP Gain from Circuit Races. Can use up to 30 of these certificates on any individual animal."),"Free Race Breed XP Gain Certificate"===e&&(n="Give an animal +1 Bonus Breed XP Gain from Free Races. Can use up to 30 of these certificates on any individual animal."),"Training Breed XP Gain Certificate"===e&&(n="Give an animal +1 Bonus Breed XP Gain from Training. Can use up to 30 of these certificates on any individual animal."),"Diminishing Returns Increase Certificate"===e&&(n="Give an animal +1 Diminishing Returns per Facility Level. Can use up to 30 of these certificates on any individual animal."),n}getSpecializationDescription(e){var n="";return"Breeding Grounds"===e?n="Turn your barn into a habitat based around the optimal breeding environment for your animals. As you progress, your animals will gain more breeding XP from their training.":"Training Facility"===e?n="Pull out all the stops giving your animals the best environment to improve. As you progress, your animals will train faster and gain stats from training at a higher rate.":"Attraction"===e?n="Give the people what they want and turn your barn into a tourist attraction. As you progress, your barn will provide passive income at a steady rate while training.":"Research Center"===e&&(n="Bring in the top names in animal research to optimize your training process. As you progress, your animal will gain reduced stats from training but split its improvements with other animals."),n}getTundraDescription(){return"When racing in the Tundra, your racer will slide all over the race course as they move forward. The higher your Adaptability stat, the better control your racer will have and the less likely they will slide. You lose a percentage of max speed while sliding, and if you slide too much you may hit a wall and come to a complete stop!"}getVolcanicDescription(){return"Volcanic racers make their way while a Volcano ominously looms in the background. As you race, the Volcano will erupt making it impossible to proceed if you get stuck behind the lava flow. If you stay ahead of the average pace for the Volcanic leg of the race, you should have no problem speeding past the lava so make sure your Max Speed and Acceleration are up to the challenge."}updateTrackedMaxStats(e){if(e.isAvailable){if(""===this.globalVar.trackedStats.highestMaxSpeed)this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var n=parseFloat(this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").indexOf(" ")));e.currentStats.maxSpeedMs>n&&(this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAccelerationRate)this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var r=parseFloat(this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").indexOf(" ")));e.currentStats.accelerationMs>r&&(this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestStamina)this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")";else{var a=parseFloat(this.globalVar.trackedStats.highestStamina.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestStamina.replaceAll(",","").indexOf(" ")));e.currentStats.stamina>a&&(this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")")}if(""===this.globalVar.trackedStats.highestPowerEfficiency)this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")";else{var o=parseFloat(this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").indexOf(" ")));e.currentStats.powerMs>o&&(this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")")}if(""===this.globalVar.trackedStats.highestFocusDistance)this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")";else{var s=parseFloat(this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>s&&(this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAdaptabilityDistance)this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")";else{var l=parseFloat(this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>l&&(this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")")}}}shouldShowSlowSegmentWarning(e){var n=!1;if(void 0===e)return n;if((e.currentStats.acceleration<=10||e.currentStats.topSpeed<=10||e.currentStats.endurance<=10||e.currentStats.power<=10||e.currentStats.focus<=10||e.currentStats.adaptability<=10)&&(console.log("Stats too low: "+e.currentStats.acceleration+" "+e.currentStats.topSpeed+" "+e.currentStats.endurance+" "+e.currentStats.power+" "+e.currentStats.focus+" "+e.currentStats.adaptability),n=!0),null!=this.globalVar.eventRaceData){var a=this.globalVar.eventRaceData.totalDistance/this.globalVar.eventRaceData.totalSegments/this.globalVar.eventRaceData.segmentTime;a>3*e.currentStats.maxSpeedMs&&(console.log("Max Speed Too Low: "+a+" > "+3*e.currentStats.maxSpeedMs),n=!0),e.currentStats.focusMs<a/5&&(console.log("Not Focused Enough: "+e.currentStats.focusMs+" < "+a/30),n=!0)}return n}devModeInitialize(e){var n=this.globalVar.resources.find(G=>"Coins"===G.name);if(void 0!==n&&(n.amount=1e6),this.globalVar.resources.some(G=>"Medals"===G.name)){var r=this.globalVar.resources.find(G=>"Medals"===G.name);void 0!==r&&(r.amount+=e+1e7)}else this.globalVar.resources.push(this.initializeService.initializeResource("Medals",e+1e5,Y.Resources));if(this.globalVar.resources.push(this.initializeService.initializeResource("Talent Points",1e3,Y.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Tokens",1e3,Y.Resources)),this.globalVar.resources.some(G=>"Renown"===G.name)){var a=this.globalVar.resources.find(G=>"Renown"===G.name);void 0!==a&&(a.amount+=5e4)}else this.globalVar.resources.push(this.initializeService.initializeResource("Renown",5e4,Y.Resources));this.globalVar.resources.push(this.initializeService.initializeResource("Facility Level",2*e,Y.Progression)),this.globalVar.resources.push(this.initializeService.initializeResource("Research Level",e,Y.Progression));for(var o=1;o<=e;o++){var s=this.utilityService.getCircuitRankFromNumericValue(o);this.globalVar.circuitRank=s,this.checkCircuitRankRewards(),this.GenerateCircuitRacesForRank(this.globalVar.circuitRank)}var l=this.globalVar.animals.find(G=>G.type===X.Horse);void 0!==l&&(l.currentStats.topSpeed=2e3,l.currentStats.acceleration=2e3,l.currentStats.endurance=1e3,l.currentStats.power=2e3,l.currentStats.focus=1e3,l.currentStats.adaptability=1e3,l.breedLevel=250,l.canEquipOrb=!0,l.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(l));var c=this.globalVar.animals.find(G=>G.type===X.Cheetah);void 0!==c&&(c.currentStats.topSpeed=2e3,c.currentStats.acceleration=200,c.currentStats.endurance=200,c.currentStats.power=2e3,c.currentStats.focus=200,c.currentStats.adaptability=200,c.breedLevel=250,c.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(c));var u=this.globalVar.animals.find(G=>G.type===X.Hare);void 0!==u&&(u.currentStats.topSpeed=200,u.currentStats.acceleration=200,u.currentStats.endurance=200,u.currentStats.power=2e3,u.currentStats.focus=200,u.currentStats.adaptability=200,u.breedLevel=250,u.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(u));var d=this.globalVar.animals.find(G=>G.type===X.Monkey);void 0!==d&&(d.currentStats.topSpeed=250,d.currentStats.acceleration=250,d.currentStats.endurance=2550,d.currentStats.power=2e3,d.currentStats.focus=250,d.currentStats.adaptability=250,d.breedLevel=250,d.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(d));var m=this.globalVar.animals.find(G=>G.type===X.Goat);void 0!==m&&(m.currentStats.topSpeed=200,m.currentStats.acceleration=200,m.currentStats.endurance=200,m.currentStats.power=2e3,m.currentStats.focus=200,m.currentStats.adaptability=200,m.breedLevel=250,m.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(m));var v=this.globalVar.animals.find(G=>G.type===X.Gecko);void 0!==v&&(v.currentStats.topSpeed=200,v.currentStats.acceleration=200,v.currentStats.endurance=200,v.currentStats.power=2e3,v.currentStats.focus=200,v.currentStats.adaptability=200,v.breedLevel=250,v.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(v));var _=this.globalVar.animals.find(G=>G.type===X.Dolphin);void 0!==_&&(_.currentStats.topSpeed=250,_.currentStats.acceleration=250,_.currentStats.endurance=500,_.currentStats.power=2e3,_.currentStats.focus=250,_.currentStats.adaptability=250,_.breedLevel=250,_.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(_));var y=this.globalVar.animals.find(G=>G.type===X.Octopus);void 0!==y&&(y.currentStats.topSpeed=200,y.currentStats.acceleration=200,y.currentStats.endurance=200,y.currentStats.power=2e3,y.currentStats.focus=500,y.currentStats.adaptability=500,y.breedLevel=250,y.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(y));var S=this.globalVar.animals.find(G=>G.type===X.Shark);void 0!==S&&(S.currentStats.topSpeed=200,S.currentStats.acceleration=200,S.currentStats.endurance=200,S.currentStats.power=2e3,S.currentStats.focus=200,S.currentStats.adaptability=200,S.incubatorStatUpgrades.powerModifier=1,S.breedLevel=250,this.calculateAnimalRacingStats(S));var T=this.globalVar.animals.find(G=>G.type===X.Penguin);void 0!==T&&(T.currentStats.topSpeed=600,T.currentStats.acceleration=200,T.currentStats.endurance=50,T.currentStats.power=2e3,T.currentStats.focus=200,T.currentStats.adaptability=200,T.incubatorStatUpgrades.powerModifier=1,T.breedLevel=250,this.calculateAnimalRacingStats(T));var C=this.globalVar.animals.find(G=>G.type===X.Caribou);void 0!==C&&(C.currentStats.topSpeed=200,C.currentStats.acceleration=200,C.currentStats.endurance=200,C.currentStats.power=2e3,C.currentStats.focus=200,C.currentStats.adaptability=200,C.breedLevel=250,C.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(C));var O=this.globalVar.animals.find(G=>G.type===X.Salamander);void 0!==O&&(O.currentStats.topSpeed=250,O.currentStats.acceleration=150,O.currentStats.endurance=50,O.currentStats.power=2e3,O.currentStats.focus=100,O.currentStats.adaptability=100,O.breedLevel=250,O.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(O));var j=this.globalVar.animals.find(G=>G.type===X.Fox);void 0!==j&&(j.currentStats.topSpeed=400,j.currentStats.acceleration=200,j.currentStats.endurance=40,j.currentStats.power=2e3,j.currentStats.focus=200,j.currentStats.adaptability=200,j.breedLevel=250,j.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(j))}}return t.\u0275fac=function(e){return new(e||t)(Le(Ri),Le($v),Le(kl))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var jt=(()=>{return(t=jt||(jt={})).None="None",t.BreedingGrounds="Breeding Grounds",t.TrainingFacility="Training Facility",t.Attraction="Attraction",t.ResearchCenter="Research Center",jt;var t})(),$e=(()=>{return(t=$e||($e={}))[t.inspiration=0]="inspiration",t[t.navigator=1]="navigator",t[t.flowingCurrent=2]="flowingCurrent",t[t.bigBrain=3]="bigBrain",t[t.camouflage=4]="camouflage",t[t.herdMentality=5]="herdMentality",t[t.specialDelivery=6]="specialDelivery",t[t.deepBreathing=7]="deepBreathing",t[t.redBaton=8]="redBaton",t[t.blueBaton=9]="blueBaton",t[t.violetBaton=10]="violetBaton",t[t.greenBaton=11]="greenBaton",t[t.orangeBaton=12]="orangeBaton",t[t.yellowBaton=13]="yellowBaton",t[t.supportMaxSpeedRelay=14]="supportMaxSpeedRelay",t[t.supportAccelerationRelay=15]="supportAccelerationRelay",t[t.supportStaminaRelay=16]="supportStaminaRelay",t[t.supportPowerRelay=17]="supportPowerRelay",t[t.supportFocusRelay=18]="supportFocusRelay",t[t.supportAdaptabilityRelay=19]="supportAdaptabilityRelay",t[t.supportBurstDistance=20]="supportBurstDistance",t[t.supportBurstChance=21]="supportBurstChance",t[t.supportAbilityCooldown=22]="supportAbilityCooldown",t[t.supportAbilityEfficiency=23]="supportAbilityEfficiency",$e;var t})();let hn=(()=>{class t{constructor(e,n,r){this.globalService=e,this.utilityService=n,this.sanitizer=r}recalculateAllAnimalStats(){this.globalService.globalVar.animals.forEach(e=>{this.globalService.calculateAnimalRacingStats(e)})}getAnimalsFromAnimalDeck(e){var n=[];return null==e||void 0===e.selectedAnimals||0===e.selectedAnimals.length||e.selectedAnimals.forEach(r=>{var a=this.globalService.globalVar.animals.find(o=>o.type===r.type);void 0!==a&&n.push(a)}),n}getPrimaryDeck(){return this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck)}getResourceByName(e){var n=this.globalService.globalVar.resources.find(r=>r.name===e);return void 0!==n?n.amount:0}spendResourceByName(e,n){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount-=n)}gainResourceByName(e,n,r){var a=this.globalService.globalVar.resources.find(o=>o.name===e);void 0!==a?a.amount+=n:this.globalService.globalVar.resources.push(new le(e,n,r))}getFacilityLevel(){var e=this.globalService.globalVar.resources.find(n=>"Facility Level"===n.name);return void 0!==e?e.amount:0}getResearchLevel(){var e=this.globalService.globalVar.resources.find(n=>"Research Level"===n.name);return void 0!==e?e.amount:0}getCoins(){var e=this.globalService.globalVar.resources.find(n=>"Coins"===n.name);return void 0!==e?e.amount:0}spendCoins(e){var n=this.globalService.globalVar.resources.find(r=>"Coins"===r.name);void 0!==n&&(n.amount-=e)}getMedals(){var e=this.globalService.globalVar.resources.find(n=>"Medals"===n.name);return void 0!==e?e.amount:0}spendMedals(e){var n=this.globalService.globalVar.resources.find(r=>"Medals"===r.name);void 0!==n&&(n.amount-=e)}getTokens(){var e=this.globalService.globalVar.resources.find(n=>"Tokens"===n.name);return void 0!==e?e.amount:0}spendTokens(e){var n=this.globalService.globalVar.resources.find(r=>"Tokens"===r.name);void 0!==n&&(n.amount-=e)}getRenown(){var e=this.globalService.globalVar.resources.find(n=>"Renown"===n.name);return void 0!==e?e.amount:0}addResourceToResourceList(e,n){if(void 0!==n)if(n.some(a=>a.name===e.name)){var r=n.find(a=>a.name===e.name);void 0!==r&&(r.amount+=e.amount)}else n.push(e)}getRenownCoinModifier(e,n){var r=1;return r=e<=50?e:500*Math.log10(.0035*(e-50)+1)+50,n||(r/=100,r+=1),r}getStockbreeder(){var e=this.globalService.globalVar.resources.find(n=>"Stockbreeder"===n.name);return void 0!==e?e.amount:0}getAnimalDescription(e){var n="";return"Horse"===e?n="The Horse is a Flatland racing animal capable of running without losing stamina and increasing the max speed of relay racers.":"Cheetah"===e?n="The Cheetah is a Flatland racing animal that prioritizes quickness over stamina.":"Hare"===e?n="The Hare is a Flatland racing animal that can instantly enter Burst and increase adaptability and focus.":"Monkey"===e?n="The Monkey is a Mountain climbing animal capable of slowing its competitors and leaping to victory.":"Goat"===e?n="The Goat is a Mountain climbing animal that can nimbly travel terrain and increase stamina.":"Gecko"===e?n="The Gecko is a Mountain climbing animal that can increase speed based on focus and can increase other racers' starting velocity.":"Dolphin"===e?n="The Dolphin is an Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay.":"Shark"===e?n="The Shark is an Ocean swimming animal that can slow competitors and increase its own stats at the cost of your other racers.":"Octopus"===e?n="The Octopus is an Ocean swimming animal that can increase your coin rewards from races and increase power of other racers.":"Penguin"===e?n="The Penguin is a Tundra racing animal that can slide carefully or recklessly.":"Caribou"===e?n="The Caribou is a Tundra racing animal that boosts other racers based on stamina.":"Salamander"===e?n="The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration.":"Fox"===e&&(n="The Fox is a Volcanic racing animal that can increase stats at random."),n}getAnimalByType(e){var n=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==n?n:null}getMaxSpeedModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultMaxSpeedModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.topSpeed),u=1;o.talentTree.talentTreeType===ht.longDistance&&(u=1+o.talentTree.column2Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.maxSpeedModifier*u}return n}getAccelerationModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultAccelerationModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.acceleration),u=1;o.talentTree.talentTreeType===ht.sprint&&(u=1+o.talentTree.column2Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.accelerationModifier*u}return n}getStaminaModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultStaminaModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.endurance),u=1;o.talentTree.talentTreeType===ht.longDistance&&(u=1+o.talentTree.column3Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.staminaModifier*u}return n}getPowerModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultPowerModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.power),u=1;o.talentTree.talentTreeType===ht.sprint&&(u=1+o.talentTree.column3Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.powerModifier*u}return n}getFocusModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultFocusModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.focus),u=1;o.talentTree.talentTreeType===ht.longDistance&&(u=1+o.talentTree.column1Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.focusModifier*u}return n}getAdaptabilityModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultAdaptabilityModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,ye.adaptability),u=1;o.talentTree.talentTreeType===ht.sprint&&(u=1+o.talentTree.column1Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.adaptabilityModifier*u}return n}getTrainingBreedGaugeIncrease(e,n){var r=0,a=this.globalService.globalVar.modifiers.find(s=>"trainingBreedGaugeIncrease"===s.text);if(null!=a&&(r=a.value),void 0!==n&&null!=n.miscStats.bonusBreedXpGainFromTraining&&n.miscStats.bonusBreedXpGainFromTraining>0&&(r+=n.miscStats.bonusBreedXpGainFromTraining),e>0){var o=this.globalService.globalVar.modifiers.find(s=>"breedingGroundsSpecializationModifier"===s.text);null!=o&&(r*=1+e*o.value)}return r}getCircuitBreedGaugeIncrease(e){var n=0,r=this.globalService.globalVar.modifiers.find(a=>"circuitBreedGaugeIncrease"===a.text);return null!=r&&(n=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromCircuitRaces&&e.miscStats.bonusBreedXpGainFromCircuitRaces>0&&(n+=e.miscStats.bonusBreedXpGainFromCircuitRaces),n}getLocalBreedGaugeIncrease(e){var n=0,r=this.globalService.globalVar.modifiers.find(a=>"localBreedGaugeIncrease"===a.text);return null!=r&&(n=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromLocalRaces&&e.miscStats.bonusBreedXpGainFromLocalRaces>0&&(n+=e.miscStats.bonusBreedXpGainFromLocalRaces),n}getTotalRacersByRace(e){var n=2;return e.localRaceType===Qt.Track?n=13:this.getResourceByName("Money Mark")>0&&(n+=1),n}getDiminishingReturnsThreshold(e){var n=null==e?20:e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalService.globalVar.modifiers.find(a=>"facilityLevelModifier"===a.text);return void 0!==r&&(n+=this.getFacilityLevel()*r.value),n}getBreedLevelPopover(e){var n=.2,r=this.globalService.globalVar.modifiers.find(a=>"breedLevelStatModifier"===a.text);return null!=r&&(n=r.value),"Increase racing stat gain from base stats by "+(n*(e-1)*100).toFixed(0)+"%"}getResourcePopover(e,n){if("Coins"===e)return"Good ol classic Coins. Gain from most races and buy items from the shop with this.";if("Medals"===e)return"Rare currency gained from improving your circuit rank.";if("Renown"===e){var r=this.getRenown();return"Increases Coins gained from races by "+this.getRenownCoinModifier(r,!0).toFixed(2)+"%. Increase total number of free races available per reset period by 1 for every 100 renown for a total of "+this.getTotalFreeRacesPerPeriod()+". Complete circuit or free races to get your name out there and raise your renown."}return"Facility Level"===e?"Increase Diminishing Returns value by 5 for each level for a total of "+this.getDiminishingReturnsThreshold()+". You can increase a base stat up to your Diminishing Returns value before that base stat starts to increase your racing stats less and less.":"Tokens"===e?"Currency used to purchase items from the Event Shop.":"Talent Points"===e?"Use to improve any of your racers' talents. Each of these applies to all racers.":"Research Level"===e?"Increase incubator trait values by "+this.getResourceByName(e)+"% and unlock new available traits.":"Apples"===e||"Bananas"===e||"Oranges"===e||"Strawberries"===e||"Turnips"===e||"Carrots"===e||"Mangoes"===e?this.globalService.getItemDescription(e):"Bonus Breed XP Gain From Training"===e?"Increase Breed XP gained from training by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Free Races"===e?"Increase Breed XP gained from completing free races by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Circuit Races"===e?"Increase Breed XP gained from completing circuit races by this amount. Only applies to this animal.":"Diminishing Returns per Facility Level"===e?"Increase Diminishing Returns value by this amount for every Facility Level you have. Only applies to this animal.":"Orb Pendant"===e?"This looks like the perfect size to fit an orb inside.":"Training Time Reduction"===e?"Reduce training times by this percent. Only applies to this animal.":"Bonus Talents"===e?"Increase talent point amount for this animal.":n===Y.Specialty?this.getSpecialtyItemDescription(e):n===Y.Equipment?this.globalService.getEquipmentDescription(e):""}getAllRaceCourseTypes(){var e=[];for(let n in z)isNaN(Number(n))&&e.push(n);return e}getCourseTypeFromAnimalType(e){var n=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==n?n.raceCourseType:-1}getTalentTreeNameByEnum(e){var n="";return e===ht.sprint&&(n="Sprint"),e===ht.support&&(n="Support"),e===ht.longDistance&&(n="Long Distance"),n}getAllBarnSpecializations(){var e=[];return e.push("Breeding Grounds"),e.push("Training Facility"),this.isItemUnlocked("attractionSpecialization")&&e.push("Attraction"),this.isItemUnlocked("researchCenterSpecialization")&&e.push("Research Center"),e}getTrackRaceRewards(e){var n=[];return e===Kn.novice?(n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races")):e===Kn.intermediate?(n.push("- 200 Coins"),n.push("- +2 Bonus Breed XP Gain From Training"),n.push("- 1 Medal"),n.push("- +2 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- +5 Bonus Breed XP Gain From Circuit Races"),n.push("- 200 Coins"),n.push("- +2 Bonus Breed XP Gain From Training"),n.push("- 1 Medal"),n.push("- +2 Bonus Breed XP Gain From Free Races"),n.push("- +1% Training Time Reduction"),n.push("- +3 Diminishing Returns per Facility Level")):e===Kn.master&&(n.push("- +5 Bonus Breed XP Gain From Free Races"),n.push("- +2 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- 1000 Coins"),n.push("- +3 Bonus Breed XP Gain From Training"),n.push("- +2 Talents"),n.push("- +1% Training Time Reduction"),n.push("- 1000 Coins"),n.push("- Orb Pendant"),n.push("- +3 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- +3 Talents")),n}getGrandPrixTokenRewards(){var e=[],n=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),r=5e7,a=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken1MeterModifier"===S.text);null!=a&&(r=a.value);var o=5e7,s=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken2MeterModifier"===S.text);null!=s&&(o=s.value);var l=5e7,c=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken3MeterModifier"===S.text);null!=c&&(l=c.value);var u=5e7,d=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken4MeterModifier"===S.text);null!=d&&(u=d.value);var m=1*n,v=2*n,_=3*n,y=4*n;return e.push((r*n).toLocaleString()+" meters - +"+m+" Token"+(m>1?"s":"")),e.push((o*n).toLocaleString()+" meters - +"+v+" Tokens"),e.push((l*n).toLocaleString()+" meters - +"+_+" Tokens"),e.push((u*n).toLocaleString()+" meters - +"+y+" Tokens"),e}getRenownRequiredForEventShopTier(e){return 1===e?0:2===e?200:e>2?500*(e-2):-1}getHighestEventShopTierUnlocked(){var e=1,n=this.getRenown();return n>200&&(e=2),n>500&&(e=Math.floor(n/500)+2),e}isItemUnlocked(e){var n=!1,r=this.globalService.globalVar.unlockables.get(e);return null!=r&&(n=r),n}getAnimalsByRaceCourseType(e){var n=[];return"Flatland"===e?(n.push(X[X.Horse]),n.push(X[X.Cheetah]),n.push(X[X.Hare])):"Mountain"===e?(n.push(X[X.Monkey]),n.push(X[X.Goat]),n.push(X[X.Gecko])):"Ocean"===e?(n.push(X[X.Dolphin]),n.push(X[X.Shark]),n.push(X[X.Octopus])):"Tundra"===e?(n.push(X[X.Penguin]),n.push(X[X.Caribou])):"Volcanic"===e&&(n.push(X[X.Salamander]),n.push(X[X.Fox])),n}GetAbilityEffectiveAmount(e,n,r,a){if(null==e.ability||null==e.ability.name)return-1;null==n&&(n=1),null==r&&(r=1);var o=1;e.type===X.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(o*=.75),e.type===X.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(o*=1.5),e.talentTree.talentTreeType===ht.sprint&&(o*=1+.05*e.talentTree.column3Row2Points);var s=e.ability;null!=a&&(s=a);var l=1;null!=e.talentTree&&null!=e.raceVariables&&e.talentTree.talentTreeType===ht.sprint&&!e.raceVariables.firstAbilityUseEffectApplied&&(l*=1+.05*e.talentTree.column3Row4Points,e.raceVariables.firstAbilityUseEffectApplied=!0);var c=1;if(null!=e.raceVariables&&null!=e.raceVariables.relayEffects){var u=this.getRelayEffectFromListByType(e.raceVariables.relayEffects,$e.supportAbilityEfficiency);void 0!==u&&void 0!==u.additionalValue&&(c=u.additionalValue)}return(s.efficiency*c*l+s.efficiency*(.01*(s.abilityLevel-1)))*(1+e.currentStats.powerMs*o*n*r/100)}getAnimalAbilityDescription(e,n,r){if(e){if("Second Wind"===n)return"Stamina does not go down for a short period";if("Inspiration"===n)return"Increase next racer's max speed on relay";if("Pacemaker"===n)return"Increase acceleration for a short period";if("Sprint"===n)return"Increase max speed, acceleration, stamina cost for a short period";if("Giving Chase"===n)return"Increase acceleration when behind competitors";if("On The Hunt"===n)return"Gain max speed after each burst";if("Awareness"===n)return"Increase adaptability, focus for a short period";if("Prey Instinct"===n)return"Start in extended burst mode";if("Nap"===n)return"Delay leg start, increase max speed and focus";if("Landslide"===n)return"Delay competitors";if("Frenzy"===n)return"Increase burst distance, cannot stumble or lose focus during burst";if("Leap"===n)return"Jump to the end of the leg";if("Echolocation"===n)return"Increase adaptability, ignore negative terrain effects for a short period";if("Navigator"===n)return"Increase previous and next racer's adaptability";if("Flowing Current"===n)return"Increase next racer's acceleration on relay";if("Apex Predator"===n)return"Slow competitors if they pass you";if("Feeding Frenzy"===n)return"Slow next and previous racers, increase max speed and acceleration for a distance";if("Blood In The Water"===n)return"Increase max speed when ahead of competitors";if("Propulsion"===n)return"Dash a short distance";if("Buried Treasure"===n)return"Delay your start, increase coin gain for winning race";if("Big Brain"===n)return"Increase power of other racers after bursting a certain number of times";if("Sure-footed"===n)return"Increase adaptability after not stumbling through path";if("Deep Breathing"===n)return"Regain stamina after burst, increase other racers' stamina";if("In The Rhythm"===n)return"Increase burst speed bonus";if("Sticky"===n)return"Cannot stumble for a short period";if("Night Vision"===n)return"Increase max speed by keeping focused";if("Camouflage"===n)return"Transfer velocity to next racer on relay";if("Herd Mentality"===n)return"Grant next racer portion of your stamina, they start in burst mode";if("Great Migration"===n)return"Sacrifice stamina for acceleration for a short period";if("Special Delivery"===n)return"Increase other racers' burst max speed bonus based on stamina";if("Careful Toboggan"===n)return"Increase adaptability for a short period";if("Wild Toboggan"===n)return"Increase max drift penalty, acceleration based on drift";if("Quick Toboggan"===n)return"Increase max speed if you do not drift";if("Cold Blooded"===n)return"Increase stamina and focus for a short period based on distance in leg";if("Burrow"===n)return"Avoid lava fall, prevent stumbles for a short period";if("Heat Up"===n)return"Increase acceleration for a short period, gets stronger every use";if("Trickster"===n)return"Decrease one random stat, increase a different random stat for a short period";if("Fleeting Speed"===n)return"Increase max speed greatly, lose over time";if("Nine Tails"===n)return"Increase random stat for a short period, effect can stack"}else{var a="",o=void 0;if(null==r&&this.globalService.globalVar.animals.forEach(u=>{u.availableAbilities.forEach(d=>{d.name===n&&(r=u,o=d,null!=d.cooldown&&(a=d.cooldown.toString()))})}),null!=r){var s=this.GetAbilityEffectiveAmount(r,void 0,void 0,o).toLocaleString(void 0,{minimumFractionDigits:2});""===a&&null!=r.ability.cooldown&&(a=r.ability.cooldown.toString());var l="";return"Second Wind"===n?"Stamina does not decrease for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Inspiration"===n?"When the next racer starts, they gain 25% of your Max Speed for <span class='keyword'>"+s+"</span> meters. Passive.":"Pacemaker"===n?"Increase Acceleration Rate by 50% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Sprint"===n?" Gain 35% Max Speed and Acceleration Rate for <span class='keyword'>"+s+"</span> meters, but lose twice as much stamina as normal. "+a+" second cooldown.":"Giving Chase"===n?"While you are behind the average pace, increase Acceleration Rate by <span class='keyword'>"+s+"</span>%. Passive.":"On The Hunt"===n?"Every time you Burst, increase your Max Speed by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Awareness"===n?"Boosts Focus Distance and Adaptability Distance by 40% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Prey Instinct"===n?"Starts its leg in Burst mode that continues for an additional <span class='keyword'>"+s+"</span> meters. Passive.":"Nap"===n?"Sleep until the competition has traveled a distance equal to <span class='keyword'>"+s+"</span> meters from the end of your leg. Max Speed and Focus Distance are then doubled. Passive.":"Landslide"===n?"Drop rocks on competitors, delaying them <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Frenzy"===n?"Increase Burst distance by <span class='keyword'>"+s+"</span> meters. You do not stumble or lose focus while bursting. Passive.":"Leap"===n?"When you are <span class='keyword'>"+s+"</span> meters from the end of the leg, leap straight to the end over .5 seconds. Passive.":"Sure-footed"===n?"When you make it through a special path without stumbling, increase your Adaptability Distance by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Deep Breathing"===n?"Every time you Burst, regain <span class='keyword'>"+s+"</span>% of your stamina, up to 100%. If this amount exceeds 100% of your stamina, increase all other racers' stamina by the amount exceeded. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"In The Rhythm"===n?"Increase your max speed bonus while Bursting by <span class='keyword'>"+s+"</span>%. Passive.":"Sticky"===n?"Cannot stumble for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Night Vision"===n?"Increase Max Speed by <span class='keyword'>"+s+"</span>% for every path you complete without losing focus. If you lose focus, reset this bonus back to 0%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Camouflage"===n?"The velocity you finish your leg at is given to your following racer on Relay. Decrease this amount to 0 evenly over <span class='keyword'>"+s+"</span> meters. The following racer can break their max speed by up to 50% while this is active. Passive.":"Echolocation"===n?"Increase your Adaptability Distance by 75% for <span class='keyword'>"+s+"</span> meters and ignore any negative effects from the terrain. "+a+" second cooldown.":"Navigator"===n?"Assist the previous racer and next racer, boosting their Adaptability Distance by 25% of your max for the last and first <span class='keyword'>"+s+"</span> meters of their legs respectively. Passive.":"Flowing Current"===n?"When relaying, increase the Acceleration Rate of your next racer by 25% of your Acceleration Rate for <span class='keyword'>"+s+"</span> meters. Passive.":"Apex Predator"===n?"If the competitors moving at the average pace pass the shark during its leg, immediately bite them, slowing their pace by 50% for <span class='keyword'>"+s+"</span> meters. Can only occur once. Passive.":"Feeding Frenzy"===n?"Increase Max Speed and Acceleration Rate by 50% for the first and last <span class='keyword'>"+s+"</span> meters of your leg. Your next and previous racers have a 10% Max Speed reduction. Passive.":"Blood In The Water"===n?"While you are ahead of the average pace, increase Max Speed by <span class='keyword'>"+s+"</span>%. Passive.":"Propulsion"===n?"Dash <span class='keyword'>"+s+"</span> meters over .25 seconds. "+a+" second cooldown.":"Buried Treasure"===n?"Delay your start by 8 seconds. If you still win the race, increase your Coin reward by <span class='keyword'>"+s+"</span>%. Passive.":"Big Brain"===n?"After Bursting through one third of your race paths, increase Power Efficiency of all remaining racers by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 5 times. Effects remain for the duration of the race.":"Herd Mentality"===n?"After completing your leg, <span class='keyword'>"+s+"</span>% of your remaining Stamina is given to the next racer and they start their leg in Burst mode. This does not occur if you run out of Stamina during your leg. Passive.":"Great Migration"===n?"Reduce stamina by 10%. For <span class='keyword'>"+s+"</span> meters, Acceleration Rate is increased by 25% of the amount of stamina lost. "+a+" second cooldown.":"Special Delivery"===n?"Increase all remaining racers' Burst Max Speed Bonus by <span class='keyword'>"+s+"</span>% of your remaining Stamina percentage, up to 100%, after completing your leg. This does not occur if you run out of Stamina during your leg. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"Careful Toboggan"===n?"Increase Adaptability Distance by 60% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Wild Toboggan"===n?"Double the maximum amount of drift per path. Increase Acceleration Rate by up to <span class='keyword'>"+s+"</span>% based on how much you drift. Passive.":"Quick Toboggan"===n?"Every time you make it through a path without drifting, gain <span class='keyword'>"+s+"</span>% Max Speed. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Cold Blooded"===n?"Increase Stamina and Focus Distance by 0-30% depending on how close to the center of the volcano you are. Focus Distance boost lasts <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Burrow"===n?"Go underground for <span class='keyword'>"+s+"</span> meters, dodging lava fall and preventing stumbles. "+a+" second cooldown.":"Heat Up"===n?"Increase Acceleration Rate by 15% for <span class='keyword'>"+s+"</span> meters. This increase doubles every subsequent use this race. "+a+" second cooldown.":"Trickster"===n?"When active, sacrifice 25% of one random stat for 50% of another random stat. Lasts <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Fleeting Speed"===n?"Increase Max Speed by <span class='keyword'>"+s+"</span>%. Decrease this bonus by 2% for every percent of the leg you complete. Passive.":"Nine Tails"===n?"At the start of each path, increase either Acceleration Rate, Max Speed, Focus Distance, or Adaptability Distance by 15% for <span class='keyword'>"+s+"</span> meters. This effect can stack. Passive.":(null===(l=this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(l)))&&(l=""),l)}}return""}getBarnByBarnNumber(e){return this.globalService.globalVar.barns.find(n=>n.barnNumber===e)}getAvailableBarns(){var e=[];return e.push(this.getBarnByBarnNumber(1)),e.push(this.getBarnByBarnNumber(2)),e.push(this.getBarnByBarnNumber(3)),this.isItemUnlocked("barnRow2")&&(e.push(this.getBarnByBarnNumber(4)),e.push(this.getBarnByBarnNumber(5)),e.push(this.getBarnByBarnNumber(6))),this.isItemUnlocked("barnRow3")&&(e.push(this.getBarnByBarnNumber(7)),e.push(this.getBarnByBarnNumber(8)),e.push(this.getBarnByBarnNumber(9))),this.isItemUnlocked("barnRow4")&&(e.push(this.getBarnByBarnNumber(10)),e.push(this.getBarnByBarnNumber(11)),e.push(this.getBarnByBarnNumber(12))),this.isItemUnlocked("barnRow5")&&(e.push(this.getBarnByBarnNumber(13)),e.push(this.getBarnByBarnNumber(14)),e.push(this.getBarnByBarnNumber(15))),e}getResourcesForBarnUpgrade(e){var n=[],r=100;e<10&&(r=50);var a=new le("Coins",r);if(e>=10&&(a.amount*=e-9),n.push(a),e%10==9){var o;o=Math.ceil(e/100);var s=new le("Medals",1*o);n.push(s)}return n}getBarnName(e){var n="",r=e.getSize();return(e.barnUpgrades.specialization===jt.None||null==e.barnUpgrades.specialization)&&(n=r+" Barn "+e.barnNumber),e.barnUpgrades.specialization===jt.Attraction&&(n=r+" Attraction "+e.barnNumber),e.barnUpgrades.specialization===jt.BreedingGrounds&&(n=r+" Breeding Grounds "+e.barnNumber),e.barnUpgrades.specialization===jt.TrainingFacility&&(n=r+" Training Facility "+e.barnNumber),e.barnUpgrades.specialization===jt.ResearchCenter&&(n=r+" Research Center "+e.barnNumber),n}getTerrainPopoverText(e,n){var r="";void 0!==n&&(r="The terrain for the "+n.getCourseTypeName()+" leg is "+e.getTerrainType()+": <br/>"),null!=e.staminaModifier&&1!==e.staminaModifier&&(r+=e.staminaModifier>1?"+"+(100*(e.staminaModifier-1)).toFixed(0)+"% stamina loss <br/>":"-"+(100*(1-e.staminaModifier)).toFixed(0)+"% stamina loss <br/>"),null!=e.maxSpeedModifier&&1!==e.maxSpeedModifier&&(r+=e.maxSpeedModifier>1?"+"+(100*(e.maxSpeedModifier-1)).toFixed(0)+"% max speed<br/>":"-"+(100*(1-e.maxSpeedModifier)).toFixed(0)+"% max speed<br/>"),null!=e.accelerationModifier&&1!==e.accelerationModifier&&(r+=e.accelerationModifier>1?"+"+(100*(e.accelerationModifier-1)).toFixed(0)+"% acceleration<br/>":"-"+(100*(1-e.accelerationModifier)).toFixed(0)+"% acceleration<br/>"),null!=e.powerModifier&&1!==e.powerModifier&&(r+=e.powerModifier>1?"+"+(100*(e.powerModifier-1)).toFixed(0)+"% power efficiency<br/>":"-"+(100*(1-e.powerModifier)).toFixed(0)+"% power efficiency<br/>"),null!=e.focusModifier&&1!==e.focusModifier&&(r+=e.focusModifier>1?"+"+(100*(e.focusModifier-1)).toFixed(0)+"% meters before losing focus<br/>":"-"+(100*(1-e.focusModifier)).toFixed(0)+"% meters before losing focus<br/>"),null!=e.adaptabilityModifier&&1!==e.adaptabilityModifier&&(r+=e.adaptabilityModifier>1?"+"+(100*(e.adaptabilityModifier-1)).toFixed(0)+"% meters before stumbling<br/>":"-"+(100*(1-e.adaptabilityModifier)).toFixed(0)+"% meters before stumbling<br/>");var a=this.utilityService.getSanitizedHtml(r);return null!=a&&(r=a),r}getInDepthSpecializationDescription(e){var n="";if("Breeding Grounds"===e){var r=0,a=this.globalService.globalVar.modifiers.find(C=>"breedingGroundsSpecializationModifier"===C.text);null!=a&&(r=a.value),n="For every 10 levels, gain "+100*r+"% additional breed XP when completing a training."}else if("Training Facility"===e)n="For every 10 levels up to level 200, gain 1% training time reduction. For every 10 levels after level 200, gain a .1 stat multiplier for every stat.";else if("Attraction"===e){var o=60,s=this.globalService.globalVar.modifiers.find(C=>"attractionTimeToCollectModifier"===C.text);null!=s&&(o=s.value);this.globalService.globalVar.modifiers.find(C=>"attractionAmountModifier"===C.text);n="Gain a certain amount of Coins every "+o+" seconds while an animal trains in this barn. At level 10, you gain 20 Coins and every subsequent 10 levels adds an additional 20 Coins * Specialization Level."}else if("Research Center"===e){var u=this.globalService.globalVar.modifiers.find(C=>"researchCenterIncrementsModifier"===C.text),d=this.globalService.globalVar.modifiers.find(C=>"researchCenterTrainingAnimalModifier"===C.text),m=this.globalService.globalVar.modifiers.find(C=>"researchCenterStudyingAnimalModifier"===C.text),v=this.globalService.globalVar.modifiers.find(C=>"researchCenterMaxStatGainModifier"===C.text),_=.05,y=.45,S=.25,T=.5;null!=u&&(_=u.value),null!=d&&(y=d.value),null!=m&&(S=m.value),null!=v&&(T=v.value),n="To start, the animal training at the Research Center only gains "+100*(y+_)+"% of the stat values from their training. Another animal at random will gain "+100*S+"% of the stat values from training, prioritizing animals of the same course type. For every 10 levels, "+100*_+"% additional stat gain will be distributed up to "+100*T+"% starting with the training animal and then the other animal. Additional animals will gain stats after maxing out the previous."}return n}convertSpecializationNameToEnum(e){return"Breeding Grounds"===e?jt.BreedingGrounds:"Training Facility"===e?jt.TrainingFacility:"Attraction"===e?jt.Attraction:"Research Center"===e?jt.ResearchCenter:jt.None}convertTalentTreeNameToEnum(e){return"Sprint"===e?ht.sprint:"Support"===e?ht.support:"Long Distance"===e?ht.longDistance:ht.none}convertSpecializationEnumToName(e){return e===jt.BreedingGrounds?"Breeding Grounds":e===jt.TrainingFacility?"Training Facility":e===jt.Attraction?"Attraction":e===jt.ResearchCenter?"Research Center":"None"}getTrainingTimeReductionFromTrainingFacility(e){return e.specialization===jt.TrainingFacility?.01*e.specializationLevel:0}getTrainingProgressionAnimationText(e){var n="";return e.affectedStatRatios.topSpeed>0&&(n+="+SPD\n"),e.affectedStatRatios.acceleration>0&&(n+="+ACC\n"),e.affectedStatRatios.endurance>0&&(n+="+END\n"),e.affectedStatRatios.power>0&&(n+="+PWR\n"),e.affectedStatRatios.focus>0&&(n+="+FCS\n"),e.affectedStatRatios.adaptability>0&&(n+="+ADP\n"),n}relayEffectTypeStacksEffectiveness(e){var n=!1;return(e===$e.bigBrain||e===$e.herdMentality||e===$e.deepBreathing||e===$e.specialDelivery)&&(n=!0),n}relayEffectPersistsEventSegments(e){var n=!1;return(e===$e.bigBrain||e===$e.redBaton||e===$e.blueBaton||e===$e.greenBaton||e===$e.orangeBaton||e===$e.violetBaton||e===$e.yellowBaton)&&(n=!0),n}getBreedLevelRequiredForGrandPrix(){var e=50,n=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}canAnimalTrain(e){var n=!0;this.globalService.globalVar.incubator.assignedAnimal===e&&(n=!1);var r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(n=!1),n}canAnimalRace(e){var n=!0,r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(n=!1),n}getTraitStatGainDescription(e){var n="",r="";return e.positiveStatGain===ye.acceleration&&(n="Acceleration"),e.positiveStatGain===ye.adaptability&&(n="Adaptability"),e.positiveStatGain===ye.endurance&&(n="Endurance"),e.positiveStatGain===ye.focus&&(n="Focus"),e.positiveStatGain===ye.power&&(n="Power"),e.positiveStatGain===ye.topSpeed&&(n="Speed"),e.negativeStatGain===ye.acceleration&&(r="Acceleration"),e.negativeStatGain===ye.adaptability&&(r="Adaptability"),e.negativeStatGain===ye.endurance&&(r="Endurance"),e.negativeStatGain===ye.focus&&(r="Focus"),e.negativeStatGain===ye.power&&(r="Power"),e.negativeStatGain===ye.topSpeed&&(r="Speed"),"+"+e.researchLevel+"% "+n+", -"+(e.researchLevel>25?25:e.researchLevel)+"% "+r}getSpecialtyItemDescription(e){var n="",r=5,a=this.globalService.globalVar.modifiers.find(v=>"internationalRacesToMedalModifier"===v.text);null!=a&&(r=a.value);var o=10,s=this.globalService.globalVar.modifiers.find(v=>"nationalRacesToMedalModifier"===v.text);null!=s&&(o=s.value);var l=5,c=this.globalService.globalVar.modifiers.find(v=>"whistleModifier"===v.text);null!=c&&(l=c.value);var u=5,d=this.globalService.globalVar.modifiers.find(v=>"goldenWhistleModifier"===v.text);null!=d&&(u=d.value),"Stopwatch"===e?n="Reduce training time by 5%":"Animal Handler"===e?n="Retain 2% of trained stats after breeding":"Course Maps"===e?n="Increase your chance to burst during special routes by 10%":"Stockbreeder"===e?n="Add option to auto breed when Breed XP is full":"Scouts"===e?n="You can choose the order of race legs for each relay team":"Money Mark"===e?n="Add new indicator to race, beat its time to gain increased coins":"National Races"===e?n="Gain 1 medal for every "+o+" free races you complete":"International Races"===e?n="Gain 1 medal for every "+r+" free races you complete":"Team Manager"===e?n="Add option to automatically run 1 free race per reset period <em>(banks 8 hours worth of races when away from the game)</em>":"Incubator Upgrade Lv1"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .01 per Breed. <em>(10% trait value)</em>":"Incubator Upgrade Lv2"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .025 per Breed. <em>(25% trait value)</em>":"Incubator Upgrade Lv3"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .05 per Breed. <em>(50% trait value)</em>":"Incubator Upgrade Lv4"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .1 per Breed. <em>(100% trait value)</em>":"Whistle"===e?n="Gain +"+l+" to a stat instead of +1 after a successful coaching attempt":"Golden Whistle"===e?n="Gain +"+u+" to a stat instead of +"+l+" after a successful coaching attempt":"Talent Point Voucher"===e&&(n="Increase Talent Points by 1");var m=this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(n));return null!==m&&(n=m),n}getWeatherClusterFromEnum(e){var n="";return e===Ni.clearSkies?n="Clear Skies":e===Ni.inclementWeather?n="Inclement Weather":e===Ni.coldSpell&&(n="Cold Spell"),n}getWeatherClusterDescription(e){var n="";return e===Ni.clearSkies?n="Race terrain shifts between Sunny, Torrid, and Ashfall. \n Flatland and Volcanic Morale increased by 20%.":e===Ni.inclementWeather?n="Race terrain shifts between Rainy, Stormy, Maelstrom, and Hailstorm. \n Ocean Morale increased by 20%.":e===Ni.coldSpell&&(n="Race terrain shifts between Sunny, Snowfall, and Hailstorm. \n Tundra and Mountain Morale increased by 20%."),n}topSpeedPopover(e){var n=e.currentStats.defaultMaxSpeedModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultMaxSpeedModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.topSpeed),c=1;e.talentTree.talentTreeType===ht.longDistance&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases max speed by "+this.getMaxSpeedModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.maxSpeedModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.maxSpeedModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}accelerationPopover(e){var n=e.currentStats.defaultAccelerationModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAccelerationModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.acceleration),c=1;e.talentTree.talentTreeType===ht.sprint&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases acceleration by "+this.getAccelerationModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.accelerationModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.accelerationModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}endurancePopover(e){var n=e.currentStats.defaultStaminaModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultStaminaModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.endurance),c=1;e.talentTree.talentTreeType===ht.longDistance&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases stamina by "+this.getStaminaModifierByAnimalType(e.type).toFixed(3)+" up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.staminaModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.staminaModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}powerPopover(e){var n=e.currentStats.defaultPowerModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultPowerModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.power),c=1;e.talentTree.talentTreeType===ht.sprint&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases ability efficiency by "+this.getPowerModifierByAnimalType(e.type).toFixed(3)+"% up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.powerModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.powerModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}focusPopover(e){var n=e.currentStats.defaultFocusModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultFocusModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.focus),c=1;e.talentTree.talentTreeType===ht.longDistance&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases focus distance by "+this.getFocusModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.focusModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.focusModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}adaptabilityPopover(e){var n=e.currentStats.defaultAdaptabilityModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAdaptabilityModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,ye.adaptability),c=1;e.talentTree.talentTreeType===ht.sprint&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases adaptability distance by "+this.getAdaptabilityModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.adaptabilityModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.adaptabilityModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}abilityPopover(){var e=25,n=this.globalService.globalVar.modifiers.find(a=>"abilityLevelCapModifier"===a.text);return null!=n&&(e=n.value),"Select from up to three different abilities by clicking on their names here. Using your ability during a race will award your ability XP which increases its effectiveness. Ability level cannot exceed your animal's breed level + "+e+"."}abilityLevelPopover(e){var n="Base Efficiency: "+e.ability.efficiency+"\n";return e.ability.abilityLevel>1&&(n+="Level Efficiency Multiplier: "+(1+.01*(e.ability.abilityLevel-1))),n}bonusFreeRaceXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusLocalBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusLocalBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusLocalBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusCircuitRaceXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusCircuitBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+2*e.miscStats.bonusCircuitBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusCircuitBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusTrainingXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusTrainingBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusTrainingBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusTrainingBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusDiminishingReturnsPerFacilityLevelPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusDiminishingReturnsCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusDiminishingReturnsCertificateCount+" (Certificates Used: "+e.miscStats.bonusDiminishingReturnsCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusTrainingTimeReductionPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction();return r>0&&(n+="Track Race Rewards: "+r+"%\n"),n}bonusTalentsPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();return r>0&&(n+="Track Race Rewards: "+r+"\n"),n}isAmountMoreThanCertificateCap(e,n,r){var a=!1;return e=+e,"Free Race Breed XP Gain Certificate"===r&&n.miscStats.bonusLocalBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Circuit Race Breed XP Gain Certificate"===r&&n.miscStats.bonusCircuitBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Training Breed XP Gain Certificate"===r&&n.miscStats.bonusTrainingBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Diminishing Returns Increase Certificate"===r&&n.miscStats.bonusDiminishingReturnsCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),a}getAnimalMorale(e){if(null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e);return null==n?0:n.morale}changeGrandPrixMorale(e,n){if(null!=this.globalService.globalVar.eventRaceData&&null!=this.globalService.globalVar.eventRaceData.animalData&&0!==this.globalService.globalVar.eventRaceData.animalData.length){var r=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e);null!=r&&(r.morale+=n,r.morale>=3&&(r.morale=3),r.morale<=.5&&(r.morale=.5))}}slowSegmentWarning(e){return!e||confirm("The animal you have selected has low racing stats for this race. You may experience some loading time as they race. Continue?")}getWeekDayGrandPrixTimeSpan(){var e=new Li;return this.utilityService.getDayOfWeekFromNumber(e.weekStartDay)+" "+this.utilityService.get24HourFormat(e.weekStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekEndDay)+" "+this.utilityService.get24HourFormat(e.weekEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekEndHour)+")"}getWeekEndGrandPrixTimeSpan(){var e=new Li;return this.utilityService.getDayOfWeekFromNumber(e.weekendStartDay)+" "+this.utilityService.get24HourFormat(e.weekendStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekendEndDay)+" "+this.utilityService.get24HourFormat(e.weekendEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendEndHour)+")"}getRandomTip(){var e="",n=[];return this.globalService.globalVar.settings.get("hideTips")||(n.push("After upgrading training options, reselect them to gain their benefits!"),n.push("Don't forget to export your save regularly!"),n.push("Have to recite the alphabet to figure out what your next circuit rank is? You're not alone, go to the settings to use numbers instead!"),n.push("Small barns allow training for 4 hours, medium for 8 hours, and large for 12 hours. Your animals will train even when the game is not active."),n.push("Each animal gains more or less racing stats from a base stat than other animals. Hover over each base stat in the Animals tab to see its modifier."),n.push("Can't quite finish a close race? Burst Chance and Distance are not affected by Diminishing Returns, so continue to increase those stats to get ahead!"),e=n[this.utilityService.getRandomInteger(0,n.length-1)]),e}getRandomFunFact(){var e,n,r,a,o,s,l="",c=[];return this.globalService.globalVar.settings.get("hideTips")||(c.push("Horses are prey animals. Their best method of defense? Run!"),(null===(e=this.globalService.globalVar.animals.find(d=>d.type===X.Monkey))||void 0===e?void 0:e.isAvailable)&&c.push("There are over 300 species of Monkey in the world. Roughly half are considered Old World Monkeys in Asia and Africa, and the others are New World Monkeys in Central and South America."),(null===(n=this.globalService.globalVar.animals.find(d=>d.type===X.Goat))||void 0===n?void 0:n.isAvailable)&&c.push("Mountain goats' wide toes, rough hooves, and sharp dewclaws give them incredible traction and the ability to climb steep slopes sometimes over 60 degrees."),(null===(r=this.globalService.globalVar.animals.find(d=>d.type===X.Octopus))||void 0===r?void 0:r.isAvailable)&&c.push("Octopi have the largest brain of any invertebrate and have been known to use tools, such as using coconut husks to defend themselves."),(null===(a=this.globalService.globalVar.animals.find(d=>d.type===X.Hare))||void 0===a?void 0:a.isAvailable)&&c.push("Hares' teeth never stop growing. They continually chew on grasses and twigs to keep their teeth from getting too large."),(null===(o=this.globalService.globalVar.animals.find(d=>d.type===X.Penguin))||void 0===o?void 0:o.isAvailable)&&c.push("Penguins' bodies are tapered on both ends meaning they can swim with very little resistance. They are considered one of the most streamlined animals in the world."),(null===(s=this.globalService.globalVar.animals.find(d=>d.type===X.Salamander))||void 0===s?void 0:s.isAvailable)&&c.push("Salamanders are capable of regenerating some organs and limbs. Their impressive regeneration is used as a model for scientific studies."),l=c[this.utilityService.getRandomInteger(0,c.length-1)]),l}getSettingDescriptions(e){var n="";return"Auto Skip Race Info"===e&&(n="Turn on to immediately skip to the end of any race."),"Finish Training Before Switching"===e&&(n="Turn on to wait until finishing your current training before switching to the next training you select."),"Hide Tips"===e&&(n="Turn on to stop displaying tips in the footer. (Tips never display in Mobile version presently)"),"Use Numbers For Circuit Rank"===e&&(n="Turn on to use numbers instead of letters when displaying ranks."),"Auto Start Event Race"===e&&(n="When event race begins, automatically start running with your current event relay team."),"Race Display Info"===e&&(n="Choose how to view races. Draw only shows the visual aspect, text only shows the textual updates, and both shows both. Both is default."),n}getTotalFreeRacesPerPeriod(){var e=10,n=this.globalService.globalVar.modifiers.find(o=>"freeRacesPerTimePeriodModifier"===o.text);void 0!==n&&(e=n.value);var r=this.getRenown(),a=Math.floor(r/100);return a>15&&(a=15),e+a}getRemainingFreeRacesPerPeriod(){return this.getTotalFreeRacesPerPeriod()-this.globalService.globalVar.freeRaceCounter}getRelayEffectFromListByType(e,n){if(null!=e&&0!==e.length)return e.find(r=>r.effectType===n)}isEquipmentItemAnOrb(e){return"Amethyst Orb"===e||"Sapphire Orb"===e||"Amber Orb"===e||"Topaz Orb"===e||"Emerald Orb"===e||"Ruby Orb"===e}getRelayEffectNameByType(e){var n="";return e===$e.bigBrain?n="Big Brain":e===$e.blueBaton?n="Blue Baton":e===$e.camouflage?n="Camouflage":e===$e.deepBreathing?n="Deep Breathing":e===$e.flowingCurrent?n="Flowing Current":e===$e.greenBaton?n="Green Baton":e===$e.herdMentality?n="Herd Mentality":e===$e.inspiration?n="Inspiration":e===$e.navigator?n="Navigator":e===$e.orangeBaton?n="Orange Baton":e===$e.redBaton?n="Red Baton":e===$e.specialDelivery?n="Special Delivery":e===$e.supportAbilityCooldown?n="Cooldown Reduction Talent":e===$e.supportAbilityEfficiency?n="Ability Efficiency Talent":e===$e.supportAccelerationRelay?n="Acceleration Rate Talent":e===$e.supportAdaptabilityRelay?n="Adaptability Distance Talent":e===$e.supportBurstChance?n="Burst Chance Talent":e===$e.supportBurstDistance?n="Burst Distance Talent":e===$e.supportFocusRelay?n="Focus Distance Talent":e===$e.supportMaxSpeedRelay?n="Max Speed Talent":e===$e.supportPowerRelay?n="Power Efficiency Talent":e===$e.supportStaminaRelay?n="Stamina Talent":e===$e.violetBaton?n="Violet Baton":e===$e.yellowBaton&&(n="Yellow Baton"),n}getStatGainDescription(e,n){var r="";return e.topSpeed>0&&(r+="+"+n*e.topSpeed+" Speed\n"),e.acceleration>0&&(r+="+"+n*e.acceleration+" Acceleration\n"),e.endurance>0&&(r+="+"+n*e.endurance+" Endurance\n"),e.focus>0&&(r+="+"+n*e.focus+" Focus\n"),e.power>0&&(r+="+"+n*e.power+" Power\n"),e.adaptability>0&&(r+="+"+n*e.adaptability+" Adaptability\n"),r}getTalentTreeNames(){var e=[];return e.push("Sprint"),e.push("Support"),e.push("Long Distance"),e}getInDepthTalentTreeDescription(e){var n="";return"Sprint"===e?n="Sprinters excel at going short distances quickly. Whether it's through chaining together quick Bursts or powerful abilities, these racers will leave others in the dust at the starting line. Recommended for when you want to get the most out of Burst effects and high acceleration.":"Support"===e?n="Supporters excel when working alongside other animals. They have a special way of encouraging the racers after and sometimes before them to reach new limits. Recommended for when you want to get the most out of Relay effects.":"Long Distance"===e&&(n="Long Distance Racers excel when given time to ramp up and go the distance. These racers manage their stamina well and can reach incredible speeds over time. Recommended for racers with high max speed and that have abilities that improve over time."),n}getTalentDescription(e,n,r,a){var o="";return(null==a||a<=0)&&(a=1),r===ht.sprint&&(0===e&&0===n&&(o="Increase Adaptability stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(o="Increase Adaptability Distance by <span class='keyword'>"+5*a+"</span>% until you lose focus for the first time."),2===e&&0===n&&(o="Increase Adaptability Distance gain from Adaptability stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(o="Every time you make it through a special path without stumbling, enter a Burst that lasts <span class='keyword'>"+5*a+"</span>% as long as normal."),0===e&&1===n&&(o="Increase Acceleration stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(o="The first time velocity exceeds Max Speed while bursting, increase remaining burst distance by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===n&&(o="Increase Acceleration Rate gain from Acceleration stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(o="Each time your velocity reaches Max Speed, increase Max Speed by <span class='keyword'>"+.5*a+"</span>% and reduce Focus Distance by <span class='keyword'>"+.5*a+"</span>%. This effect can occur 10 times, up to <span class='keyword'>"+5*a+"</span>%."),0===e&&2===n&&(o="Increase Power stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(o="Increase Power Efficiency by <span class='keyword'>"+5*a+"</span>%, but consume stamina <span class='keyword'>"+5*a+"</span>% faster."),2===e&&2===n&&(o="Increase Power Efficiency gain from Power stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(o="The first time you use an ability every race, the efficiency is increased by <span class='keyword'>"+5*a+"</span>%.")),r===ht.support&&(0===e&&0===n&&(o="Increase Relay Animal's Adaptability Distance by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(o="Increase the effectiveness of your Relay effects by <span class='keyword'>"+2*a+"</span>%."),2===e&&0===n&&(o="Increase Relay Animal's Max Speed by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(o="The racer prior to you gains any relay effects you provide for <span class='keyword'>"+3*a+"</span>% of the normal length if possible."),0===e&&1===n&&(o="Increase Relay Animal's Acceleration Rate by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(o="Increase Burst Distance of next racer by <span class='keyword'>"+5*a+"</span>% of your Burst Distance on Relay."),2===e&&1===n&&(o="Increase Relay Animal's Stamina by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(o="Increase Burst Chance of next racer by <span class='keyword'>"+3*a+"</span>% of your Burst Chance on Relay."),0===e&&2===n&&(o="Increase Relay Animal's Power Efficiency by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(o="If Relay Animal ability has a cooldown, reduce it by <span class='keyword'>"+2*a+"</span>%."),2===e&&2===n&&(o="Increase Relay Animal's Focus Distance by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(o="Increase Relay Animal's Ability Efficiency by <span class='keyword'>"+2*a+"</span>%.")),r===ht.longDistance&&(0===e&&0===n&&(o="Increase Focus stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(o="Every burst increases Burst Velocity Bonus by <span class='keyword'>"+.5*a+"</span>%."),2===e&&0===n&&(o="Increase Focus Distance gain from Focus stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(o="Instead of reducing velocity to 10% when losing focus, reduce to <span class='keyword'>"+(10+2*a)+"</span>%."),0===e&&1===n&&(o="Increase Max Speed stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(o="While your velocity is 25% of your Max Speed or below, increase your Acceleration Rate by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===n&&(o="Increase Max Speed gain from Speed stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(o="After surpassing <span class='keyword'>"+.5*a+"</span>% of your Max Speed, your velocity can no longer drop below it. All calculations consider this to be 0% of your velocity."),0===e&&2===n&&(o="Increase Endurance stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(o="While stamina is below 35%, reduce stamina consumption by <span class='keyword'>"+5*a+"</span>%."),2===e&&2===n&&(o="Increase Stamina gain from Endurance stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(o="When running out of stamina, increase the percent regained by <span class='keyword'>"+2*a+"</span>%.")),o}getTalentUpgradeDescription(e,n,r,a){}getTotalPossiblePointsByRowColumn(e,n,r){var a=0;return r===ht.sprint&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),r===ht.support&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),r===ht.longDistance&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),a}getTalentPointsAvailableToAnimal(e){var n=0;return n=this.getResourceByName("Talent Points"),n+=e.miscStats.bonusTalents,(n-=e.talentTree.getTotalSpentPoints())<=0&&(n=0),n}gainMangoes(e){return new le("Mangoes",e,Y.Food)}gainApples(e){return new le("Apples",e,Y.Food)}gainBananas(e){return new le("Bananas",e,Y.Food)}gainOranges(e){return new le("Oranges",e,Y.Food)}gainStrawberries(e){return new le("Strawberries",e,Y.Food)}gainTurnips(e){return new le("Turnips",e,Y.Food)}gainCarrots(e){return new le("Carrots",e,Y.Food)}gainCoins(e){return new le("Coins",e,Y.Resources)}gainTokens(e){return new le("Tokens",e,Y.Resources)}}return t.\u0275fac=function(e){return new(e||t)(Le(Rt),Le(Ri),Le(Mo))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_i=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n,this.totalTime=0,this.gameUpdateEvent=new rt}Update(){var e=Date.now();const n=(e-this.globalService.globalVar.lastTimeStamp)/1e3;this.deltaTime=n,this.totalTime+=n;var r=performance.now();this.globalService.globalVar.lastTimeStamp=e,this.gameUpdateEvent.emit(n),this.lastPerformanceNow=r,window.requestAnimationFrame(()=>this.Update())}}return t.\u0275fac=function(e){return new(e||t)(Le(Rt),Le(hn))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Al{constructor(i,e){this.transformationType=i,this.options=e,this.recursionStack=new Set}transform(i,e,n,r,a,o=0){if(Array.isArray(e)||e instanceof Set){const s=r&&this.transformationType===Wt.PLAIN_TO_CLASS?function E4(t){const i=new t;return i instanceof Set||"push"in i?i:[]}(r):[];return e.forEach((l,c)=>{const u=i?i[c]:void 0;if(this.options.enableCircularCheck&&this.isCircular(l))this.transformationType===Wt.CLASS_TO_CLASS&&(s instanceof Set?s.add(l):s.push(l));else{let d;if("function"!=typeof n&&n&&n.options&&n.options.discriminator&&n.options.discriminator.property&&n.options.discriminator.subTypes){if(this.transformationType===Wt.PLAIN_TO_CLASS){d=n.options.discriminator.subTypes.find(y=>y.name===l[n.options.discriminator.property]);const _=n.typeFunction({newObject:s,object:l,property:void 0});d=void 0===d?_:d.value,n.options.keepDiscriminatorProperty||delete l[n.options.discriminator.property]}this.transformationType===Wt.CLASS_TO_CLASS&&(d=l.constructor),this.transformationType===Wt.CLASS_TO_PLAIN&&(l[n.options.discriminator.property]=n.options.discriminator.subTypes.find(v=>v.value===l.constructor).name)}else d=n;const m=this.transform(u,l,d,void 0,l instanceof Map,o+1);s instanceof Set?s.add(m):s.push(m)}}),s}if(n===String&&!a)return null==e?e:String(e);if(n===Number&&!a)return null==e?e:Number(e);if(n===Boolean&&!a)return null==e?e:Boolean(e);if((n===Date||e instanceof Date)&&!a)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(function A4(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}().Buffer&&(n===Buffer||e instanceof Buffer)&&!a)return null==e?e:Buffer.from(e);if(function P4(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}(e)&&!a)return new Promise((s,l)=>{e.then(c=>s(this.transform(void 0,c,n,void 0,void 0,o+1)),l)});if(!a&&null!==e&&"object"==typeof e&&"function"==typeof e.then)return e;if("object"==typeof e&&null!==e){!n&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(n=e.constructor)),!n&&i&&(n=i.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);const s=this.getKeys(n,e,a);let l=i||{};!i&&(this.transformationType===Wt.PLAIN_TO_CLASS||this.transformationType===Wt.CLASS_TO_CLASS)&&(l=a?new Map:n?new n:{});for(const c of s){if("__proto__"===c||"constructor"===c)continue;const u=c;let v,d=c,m=c;if(!this.options.ignoreDecorators&&n)if(this.transformationType===Wt.PLAIN_TO_CLASS){const C=or.findExposeMetadataByCustomName(n,c);C&&(m=C.propertyName,d=C.propertyName)}else if(this.transformationType===Wt.CLASS_TO_PLAIN||this.transformationType===Wt.CLASS_TO_CLASS){const C=or.findExposeMetadata(n,c);C&&C.options&&C.options.name&&(d=C.options.name)}v=this.transformationType===Wt.PLAIN_TO_CLASS?e[u]:e instanceof Map?e.get(u):e[u]instanceof Function?e[u]():e[u];let _,y=v instanceof Map;if(n&&a)_=n;else if(n){const C=or.findTypeMetadata(n,m);if(C){const O={newObject:l,object:e,property:m},j=C.typeFunction?C.typeFunction(O):C.reflectedType;C.options&&C.options.discriminator&&C.options.discriminator.property&&C.options.discriminator.subTypes?e[u]instanceof Array?_=C:(this.transformationType===Wt.PLAIN_TO_CLASS&&(_=C.options.discriminator.subTypes.find(G=>{if(v&&v instanceof Object&&C.options.discriminator.property in v)return G.name===v[C.options.discriminator.property]}),_=void 0===_?j:_.value,C.options.keepDiscriminatorProperty||v&&v instanceof Object&&C.options.discriminator.property in v&&delete v[C.options.discriminator.property]),this.transformationType===Wt.CLASS_TO_CLASS&&(_=v.constructor),this.transformationType===Wt.CLASS_TO_PLAIN&&v&&(v[C.options.discriminator.property]=C.options.discriminator.subTypes.find(G=>G.value===v.constructor).name)):_=j,y=y||C.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(O=>O.target===n&&!!O.properties[m]).forEach(O=>_=O.properties[m]);else if(this.options.enableImplicitConversion&&this.transformationType===Wt.PLAIN_TO_CLASS){const O=Reflect.getMetadata("design:type",n.prototype,m);O&&(_=O)}}const S=Array.isArray(e[u])?this.getReflectedType(n,m):void 0,T=i?i[u]:void 0;if(l.constructor.prototype){const C=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if((this.transformationType===Wt.PLAIN_TO_CLASS||this.transformationType===Wt.CLASS_TO_CLASS)&&(C&&!C.set||l[d]instanceof Function))continue}if(this.options.enableCircularCheck&&this.isCircular(v)){if(this.transformationType===Wt.CLASS_TO_CLASS){let C=v;C=this.applyCustomTransformations(C,n,c,e,this.transformationType),(void 0!==C||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,C):l[d]=C)}}else{const C=this.transformationType===Wt.PLAIN_TO_CLASS?d:c;let O;this.transformationType===Wt.CLASS_TO_PLAIN?(O=e[C],O=this.applyCustomTransformations(O,n,C,e,this.transformationType),O=e[C]===O?v:O,O=this.transform(T,O,_,S,y,o+1)):void 0===v&&this.options.exposeDefaultValues?O=l[d]:(O=this.transform(T,v,_,S,y,o+1),O=this.applyCustomTransformations(O,n,C,e,this.transformationType)),(void 0!==O||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,O):l[d]=O)}}return this.options.enableCircularCheck&&this.recursionStack.delete(e),l}return e}applyCustomTransformations(i,e,n,r,a){let o=or.findTransformMetadatas(e,n,this.transformationType);return void 0!==this.options.version&&(o=o.filter(s=>!s.options||this.checkVersion(s.options.since,s.options.until))),o=o.filter(this.options.groups&&this.options.groups.length?s=>!s.options||this.checkGroups(s.options.groups):s=>!s.options||!s.options.groups||!s.options.groups.length),o.forEach(s=>{i=s.transformFn({value:i,key:n,obj:r,type:a,options:this.options})}),i}isCircular(i){return this.recursionStack.has(i)}getReflectedType(i,e){if(!i)return;const n=or.findTypeMetadata(i,e);return n?n.reflectedType:void 0}getKeys(i,e,n){let r=or.getStrategy(i);"none"===r&&(r=this.options.strategy||"exposeAll");let a=[];if(("exposeAll"===r||n)&&(a=e instanceof Map?Array.from(e.keys()):Object.keys(e)),n)return a;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&i&&(a=[...or.getExposedProperties(i,this.transformationType),...or.getExcludedProperties(i,this.transformationType)]),!this.options.ignoreDecorators&&i){let o=or.getExposedProperties(i,this.transformationType);this.transformationType===Wt.PLAIN_TO_CLASS&&(o=o.map(l=>{const c=or.findExposeMetadata(i,l);return c&&c.options&&c.options.name?c.options.name:l})),a=this.options.excludeExtraneousValues?o:a.concat(o);const s=or.getExcludedProperties(i,this.transformationType);s.length>0&&(a=a.filter(l=>!s.includes(l))),void 0!==this.options.version&&(a=a.filter(l=>{const c=or.findExposeMetadata(i,l);return!c||!c.options||this.checkVersion(c.options.since,c.options.until)})),a=a.filter(this.options.groups&&this.options.groups.length?l=>{const c=or.findExposeMetadata(i,l);return!c||!c.options||this.checkGroups(c.options.groups)}:l=>{const c=or.findExposeMetadata(i,l);return!(c&&c.options&&c.options.groups&&c.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter(o=>this.options.excludePrefixes.every(s=>o.substr(0,s.length)!==s))),a=a.filter((o,s,l)=>l.indexOf(o)===s),a}checkVersion(i,e){let n=!0;return n&&i&&(n=this.options.version>=i),n&&e&&(n=this.options.version<e),n}checkGroups(i){return!i||this.options.groups.some(e=>i.includes(e))}}const Pl={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},fa=new class I4{instanceToPlain(i,e){return new Al(Wt.CLASS_TO_PLAIN,Nr(Nr({},Pl),e)).transform(void 0,i,void 0,void 0,void 0,void 0)}classToPlainFromExist(i,e,n){return new Al(Wt.CLASS_TO_PLAIN,Nr(Nr({},Pl),n)).transform(e,i,void 0,void 0,void 0,void 0)}plainToInstance(i,e,n){return new Al(Wt.PLAIN_TO_CLASS,Nr(Nr({},Pl),n)).transform(void 0,e,i,void 0,void 0,void 0)}plainToClassFromExist(i,e,n){return new Al(Wt.PLAIN_TO_CLASS,Nr(Nr({},Pl),n)).transform(i,e,void 0,void 0,void 0,void 0)}instanceToInstance(i,e){return new Al(Wt.CLASS_TO_CLASS,Nr(Nr({},Pl),e)).transform(void 0,i,void 0,void 0,void 0,void 0)}classToClassFromExist(i,e,n){return new Al(Wt.CLASS_TO_CLASS,Nr(Nr({},Pl),n)).transform(e,i,void 0,void 0,void 0,void 0)}serialize(i,e){return JSON.stringify(this.instanceToPlain(i,e))}deserialize(i,e,n){const r=JSON.parse(e);return this.plainToInstance(i,r,n)}deserializeArray(i,e,n){const r=JSON.parse(e);return this.plainToInstance(i,r,n)}};function bD(t,i,e){return fa.plainToInstance(t,i,e)}let Yv=(()=>{class t{constructor(e,n,r){this.globalService=e,this.utilityService=n,this.lookupService=r}getSpecializationPopoverText(e,n){var r="";if(e===jt.TrainingFacility&&(r=n<=20?"Training Time Reduction: "+n+"%<br/>":"Training Time Reduction: 20%<br/> All Stat Multiplier: "+(n-20)/10+"<br/>"),e===jt.BreedingGrounds){var a=this.globalService.globalVar.modifiers.find(G=>"breedingGroundsSpecializationModifier"===G.text);null!=a&&(r="Training Breed XP Multipler: "+n*(100*a.value)+"%<br/>")}if(e===jt.Attraction){var o=60,s=this.globalService.globalVar.modifiers.find(G=>"attractionTimeToCollectModifier"===G.text);null!=s&&(o=s.value);var l=0;if(null!=this.globalService.globalVar.modifiers.find(G=>"attractionAmountModifier"===G.text))for(var u=1;u<=n;u++)l+=20*u;r="Amount Earned: "+l+" Coins / "+o+" seconds<br/>"}else if(e===jt.ResearchCenter){var d=this.globalService.globalVar.modifiers.find(G=>"researchCenterIncrementsModifier"===G.text),m=this.globalService.globalVar.modifiers.find(G=>"researchCenterTrainingAnimalModifier"===G.text),v=this.globalService.globalVar.modifiers.find(G=>"researchCenterStudyingAnimalModifier"===G.text),_=this.globalService.globalVar.modifiers.find(G=>"researchCenterMaxStatGainModifier"===G.text);if(null==d||null==m||null==v||null==_)return"";var y=n*d.value,T="Training Animal Stat Gain: "+(100*(m.value+y<_.value?m.value+y:_.value)).toFixed(0)+"%<br />",C=(y-(_.value-m.value))/(_.value-v.value);C>0?(Math.floor(C)>0&&(T+="Additional Studying Animal Stat Gain (x"+Math.floor(C)+"): "+(100*_.value).toFixed(0)+"%<br />"),C>Math.floor(C)&&(T+="Additional Studying Animal Stat Gain: "+(100*((C-Math.floor(C))*(_.value-v.value)+v.value)).toFixed(0)+"%<br />")):T+="Additional Studying Animal Stat Gain: "+(100*v.value).toFixed(0)+"%<br />",r=T}var j=this.utilityService.getSanitizedHtml(r);return null!=j&&(r=j),r}handleResearchCenterStatIncrease(e,n){var r=this.globalService.globalVar.modifiers.find(G=>"researchCenterIncrementsModifier"===G.text),a=this.globalService.globalVar.modifiers.find(G=>"researchCenterTrainingAnimalModifier"===G.text),o=this.globalService.globalVar.modifiers.find(G=>"researchCenterStudyingAnimalModifier"===G.text),s=this.globalService.globalVar.modifiers.find(G=>"researchCenterMaxStatGainModifier"===G.text);if(null!=r&&null!=a&&null!=o&&null!=s&&null!=e.currentTraining){var S,c=n.barnUpgrades.specializationLevel*r.value,u=e.currentTraining.affectedStatRatios.topSpeed,d=e.currentTraining.affectedStatRatios.acceleration,m=e.currentTraining.affectedStatRatios.endurance,v=e.currentTraining.affectedStatRatios.power,_=e.currentTraining.affectedStatRatios.focus,y=e.currentTraining.affectedStatRatios.adaptability;e.increaseStats(new Oe((S=a.value+c<s.value?a.value+c:s.value)*u,S*d,S*m,S*v,S*_,S*y)),this.globalService.calculateAnimalRacingStats(e);var T=(c-(s.value-a.value))/(s.value-o.value),C=this.getAnimalsInRandomOrder(e.raceCourseType,e);if(T>0){C.length<T&&(T=C.length);for(var O=0;O<Math.floor(T);O++)C[O].increaseStats(new Oe(s.value*u,s.value*d,s.value*m,s.value*v,s.value*_,s.value*y)),this.globalService.calculateAnimalRacingStats(C[O]);if(T>Math.floor(T)&&C.length>O){var j=o.value+(T-Math.floor(T))*(s.value-o.value);C[O].increaseStats(new Oe(j*u,j*d,j*m,j*v,j*_,j*y)),this.globalService.calculateAnimalRacingStats(C[O])}}else C.length>=1&&(C[0].increaseStats(new Oe((j=o.value)*u,j*d,j*m,j*v,j*_,j*y)),this.globalService.calculateAnimalRacingStats(C[0]))}}getAnimalsInRandomOrder(e,n){for(var r=[],a=this.globalService.globalVar.animals.filter(u=>u.raceCourseType===e&&u.isAvailable&&u.type!==n.type),o=this.globalService.globalVar.animals.filter(u=>u.raceCourseType!==e&&u.isAvailable),s=a.length,l=0;l<s;l++){var c=this.utilityService.getRandomInteger(1,a.length);r.push(a[c-1]),a=a.filter(u=>u!==a[c-1])}for(s=o.length,l=0;l<s;l++)c=this.utilityService.getRandomInteger(1,o.length),r.push(o[c-1]),o=o.filter(m=>m!==o[c-1]);return r}handleAttractionRevenue(e,n){var r=this.globalService.globalVar.barns.find(m=>m.barnNumber===n.associatedBarnNumber);if(null!=r&&r.barnUpgrades.specialization===jt.Attraction){var a=60,o=this.globalService.globalVar.modifiers.find(m=>"attractionTimeToCollectModifier"===m.text);null!=o&&(a=o.value);var s=0;if(null!=this.globalService.globalVar.modifiers.find(m=>"attractionAmountModifier"===m.text))for(var c=1;c<=r.barnUpgrades.specializationLevel;c++)s+=20*c;for(r.barnUpgrades.currentDeltaTime+=e,null!==n.currentTraining&&r.barnUpgrades.currentDeltaTime>=n.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.currentDeltaTime=n.currentTraining.trainingTimeRemaining);r.barnUpgrades.currentDeltaTime>=a;){r.barnUpgrades.currentDeltaTime-=a;var d=this.globalService.globalVar.resources.find(m=>"Coins"===m.name);void 0!==d&&(d.amount+=s)}}}}return t.\u0275fac=function(e){return new(e||t)(Le(Rt),Le(Ri),Le(hn))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Pr=(()=>{return(t=Pr||(Pr={}))[t.None=0]="None",t[t.Stumble=1]="Stumble",t[t.LostFocus=2]="LostFocus",t[t.LostStamina=3]="LostStamina",t[t.Burst=4]="Burst",Pr;var t})();let Qv=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.utilityService=r,this.initializeService=a,this.frameModifier=60,this.timeToComplete=60,this.currentLostFocusOpportunity=0,this.currentBurstOpportunity=0,this.tundraPreviousYAmount=0}runRace(e,n){this.currentBurstOpportunity=0,this.currentLostFocusOpportunity=0,this.tundraPreviousYAmount=0,this.selectedRace=e;var r=new Zh,a=0,o=0,s=0,l=0,c=0;e.raceLegs.forEach(ve=>a+=ve.distance);var u=0;(0===e.timeToComplete||null==e.timeToComplete)&&(e.timeToComplete=60);var d=a/e.timeToComplete,m=this.globalService.globalVar.animalDecks.find(ve=>ve.isPrimaryDeck),v=0;this.timeToComplete=e.timeToComplete;var _=[],y=[],S=Pr.None,T=0,C=0,O=0,j=0,G=0,K=0,se=1,de=new Dt,be=new Dt;if(void 0===m)return r.errorMessage="No relay team selected.",r;if(this.racingAnimals=this.lookupService.getAnimalsFromAnimalDeck(m),e.raceUI.distanceCoveredByFrame=[],e.raceUI.velocityByFrame=[],e.raceUI.timeToCompleteByFrame=[],e.raceUI.maxSpeedByFrame=[],e.raceUI.staminaPercentByFrame=[],e.raceUI.yAdjustmentByFrame=[],e.raceUI.racerEffectByFrame=[],e.raceUI.lavaFallPercentByFrame=[],e.raceUI.racePositionByFrame=[],e.timeToComplete<=180)r.addRaceUpdate(u,Math.round(e.timeToComplete)+" seconds are on the race clock.");else{var he=this.globalService.getRemainingEventRaceTime()+this.globalService.globalVar.eventRaceData.bonusTime,Ae=this.utilityService.getHoursRemainingFromSeconds(he),Ze=this.utilityService.getMinutesLeftInHourRemainingFromSeconds(he),Ct=this.utilityService.getSecondsLeftInMinuteRemainingFromSeconds(he),vt=Math.floor(Ct).toString(),xt=Ae.toString(),Ot=Ze.toString();Ae<10&&(xt=Ae<1||Ae>59?"00":String(xt).padStart(2,"0")),Ze<10&&(Ot=Ze<1||Ze>59?"00":String(Ot).padStart(2,"0")),Ct<10&&(vt=Ct<1||Ct>59?"00":String(vt).padStart(2,"0")),r.addRaceUpdate(u,xt+":"+Ot+":"+vt+" is left on the race clock.")}return e.raceLegs.forEach(ve=>{var R=null;null!=(R=this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(Ye=>Ye.raceCourseType===ve.courseType))?this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||(R.raceVariables=new oo,R.totalRacesRun+=1):alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),this.globalService.globalVar.trackedStats.totalRaces+=1,e.raceLegs.forEach(ve=>{var R=void 0;if(null!=(R=this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(Ke=>Ke.raceCourseType===ve.courseType))){this.increasePersistentAbilityXp(R);var Ye=void 0;this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&(Ye=this.globalService.globalVar.eventRaceData.previousRaceSegmentData);var fe=void 0,Ee=new Nn,ut="<span class='coloredText "+ve.getCourseTypeClass()+"'>"+R.name+"</span>",on="",gn="";if(C>0){var Bn=this.racingAnimals.find(Ke=>Ke.raceCourseType===e.raceLegs[C-1].courseType);null!=Bn&&(de=Bn)}else de=null;if(C<e.raceLegs.length-1){Ee=e.raceLegs[C+1];var zn=this.racingAnimals.find(Ke=>Ke.raceCourseType===Ee.courseType);null!=zn&&(be=zn,gn="<span class='coloredText "+Ee.getCourseTypeClass()+"'>"+(null==be?void 0:be.name)+"</span>")}else be=null;this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&r.addRaceUpdate(u,ut+" clears "+Math.round(this.selectedRace.length).toLocaleString()+" meters of the Grand Prix and moves onto the next leg of the race.");var $n=ve.terrain.maxSpeedModifier,kn=ve.terrain.accelerationModifier,qn=ve.terrain.staminaModifier,fi=ve.terrain.powerModifier,pi=ve.terrain.focusModifier,St=ve.terrain.adaptabilityModifier;u<this.timeToComplete*this.frameModifier&&(y.length>0&&void 0!==(fe=y[y.length-1])&&(on="<span class='coloredText "+fe.getCourseTypeClass()+"'>"+(null==de?void 0:de.name)+"</span>"),this.getPrelayEffects(R,be,null==Ee?void 0:Ee.terrain,1,r,u,on,Ee,ve),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.PrepareRacingAnimal(r,u,on,R,_,ve,fe,void 0,void 0,s,c,l),this.prepareRacingLeg(ve,R),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix||r.addRaceUpdate(u,ut+" starts their leg of the race."));var An=R.currentStats.stamina,lt=0,yi=ve.distance,dn=new Jh,ei=new Jh,Vn=!1,_n=1,oi={permanentAdaptabilityIncreaseMultiplier:1},ba={permanentMaxSpeedIncreaseMultiplier:1},br=1,_a=1,co={coldBloodedIncreaseMultiplier:1},Fo=1,Vi=[],Bt=1,Qi=!1,ms=0,gt=[!1,!1,!1,!1,!1],kt=!1,_r=0,Tf=0,Df=0;if(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix){var Mu=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime();Tf+=d*Mu,Df=this.globalService.globalVar.eventRaceData.distanceCovered}o+Df>d*(u/this.frameModifier)+Tf?(Qi||(Lu=!0),Qi=!0):(Qi&&(Lu=!0),Qi=!1),null!=Ye&&(lt=Ye.velocity,R.currentStats.stamina=Ye.stamina,j=Ye.deepBreathingStaminaGain,_n=Ye.permanentMaxSpeedIncreaseMultiplier,oi.permanentAdaptabilityIncreaseMultiplier=Ye.permanentAdaptabilityIncreaseMultiplier,ba.permanentMaxSpeedIncreaseMultiplier=Ye.permanentMaxSpeedIncreaseObjMultiplier,br=Ye.feedingFrenzyIncreaseMultiplier,_a=Ye.greatMigrationAccelerationIncreaseAdditive,co.coldBloodedIncreaseMultiplier=Ye.coldBloodedIncreaseMultiplier,Fo=Ye.fleetingSpeedIncreaseMultiplier,R.raceVariables=Ye.raceVariables.makeCopy(),Ye.nineTailsBuffs.length>0&&Ye.nineTailsBuffs.forEach(Ke=>{Vi.push(Ke)}),Ye.relayEffects.length>0&&Ye.relayEffects.forEach(Ke=>{null!=R&&(R.raceVariables.relayEffects.push(Ke),null!=R.raceVariables.relayEffects&&R.raceVariables.relayEffects.length>0&&R.raceVariables.relayEffects.forEach(j0=>{j0.isMultiplicative?R.currentStats.multiplyCurrentRacingStats(j0.relayAffectedStatRatios):R.currentStats.addCurrentRacingStats(j0.relayAffectedStatRatios)}))}),kt=Ye.longDistanceTalentIncreaseAccelerationWithLowVelocity,_r=Ye.maxSpeedFloor,Bt=Ye.statLossFromExhaustion);var Au=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,$e.camouflage);void 0!==Au&&void 0!==Au.additionalValue&&(G=Au.additionalValue);var uo=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,$e.herdMentality);void 0!==uo&&void 0!==uo.additionalValue&&(O=uo.additionalValue);var ho=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,$e.specialDelivery);if(void 0!==ho&&void 0!==ho.additionalValue&&(K=ho.additionalValue),"Nap"===R.ability.name&&R.type===X.Hare){var fo=ve.distance-this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt);fo<0&&(fo=0),R.ability.remainingLength=fo}var Bo=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,$e.deepBreathing);if(void 0!==Bo&&void 0!==Bo.additionalValue){var Pu=R.raceVariables.relayEffects.filter(Ke=>Ke.effectType===$e.deepBreathing);void 0!==Pu&&Pu.forEach(Ke=>{void 0!==Ke.additionalValue&&(j=Ke.additionalValue),j>0&&R.type!==X.Goat&&(R.currentStats.stamina+=j)})}for(var Hl=u;Hl<=this.timeToComplete*this.frameModifier;Hl++){ms+=1,S=Pr.None;var vs=!1,Eu=0;if(v>0)for(var Gl=0;Gl<v;Gl++)Eu+=e.raceLegs[Gl].distance;d=this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime):a/this.timeToComplete;var Pn=o-Eu,ki=0,Ai=!1,ya=0;if(ve.pathData.forEach(Ke=>{!Ai&&Pn>=ya&&Pn<ya+Ke.length&&(Ai=!0,dn=Ke,ki=Pn-ya),Ke.legStartingDistance=ya,ya+=Ke.length,Ai||(ei=Ke)}),"Night Vision"===R.ability.name&&R.type===X.Gecko&&!R.ability.abilityInUse&&!ei.didAnimalLoseFocus&&ei.length>0&&(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCap||(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount+=1),_n+=this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt)/100,this.globalService.increaseAbilityXp(R),R.ability.abilityInUse=!0)),"Feeding Frenzy"===R.ability.name&&R.type===X.Shark){var bs=this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt);if(Pn<=bs||Pn>=ve.distance-bs){br=1.5;var Iu=this.globalService.globalVar.modifiers.find(Ke=>"feedingFrenzyPositiveModifier"===Ke.text);void 0!==Iu&&(br=Iu.value)}else br=1}O>0&&(R.raceVariables.isBursting=!0,vs=!0,R.currentStats.stamina+=O,O=0,null!=de&&(de.ability.abilityUsed=!0)),"Navigator"===R.ability.name&&R.type===X.Dolphin&&(R.ability.abilityInUse=!1),R.type===X.Fox&&"Fleeting Speed"===R.ability.name&&!R.ability.abilityUsed&&(Fo+=this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt)/100,R.ability.abilityUsed=!0),R.type===X.Dolphin&&"Echolocation"===R.ability.name&&(R.ability.abilityInUse?(ve.terrain.maxSpeedModifier<1&&(ve.terrain.maxSpeedModifier=1),ve.terrain.accelerationModifier<1&&(ve.terrain.accelerationModifier=1),ve.terrain.staminaModifier<1&&(ve.terrain.staminaModifier=1),ve.terrain.powerModifier<1&&(ve.terrain.powerModifier=1),ve.terrain.focusModifier<1&&(ve.terrain.focusModifier=1),ve.terrain.adaptabilityModifier<1&&(ve.terrain.adaptabilityModifier=1)):(ve.terrain.maxSpeedModifier=$n,ve.terrain.accelerationModifier=kn,ve.terrain.staminaModifier=qn,ve.terrain.powerModifier=fi,ve.terrain.focusModifier=pi,ve.terrain.adaptabilityModifier=St,this.checkForBlinders(ve,R))),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix?(Vn=!1,dn===ve.pathData[ve.pathData.length-1]&&this.globalService.globalVar.eventRaceData.animalData.some(Ke=>Ke.isSetToRelay)&&(Vn=!0)):Vn=dn===ve.pathData[ve.pathData.length-1];var Lo=this.getModifiedAdaptability(R,oi,Bt,Vi,ve,Pn,be,Ee,r,u,ut,gn),_s=this.getModifiedFocus(R,Bt,Vi,co),Rf=this.didAnimalStumble(R,dn,ki,ve.terrain,oi,Lo,Bt,u,ut,r),ZR=this.didAnimalLoseFocus(R,this.timeToComplete,e.length,o,ve.terrain,Bt,Vi,co,dn,_s);if(ZR){if(R.raceVariables.lostFocus=!0,R.raceVariables.hasLostFocusDuringRace=!0,R.raceVariables.currentLostFocusLength=R.raceVariables.defaultLostFocusLength,R.raceVariables.metersSinceLostFocus=0,T=lt,this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix){var JR=.02,x0=this.globalService.globalVar.modifiers.find(Ke=>"focusMoraleLossModifier"===Ke.text);null!=x0&&(JR=x0.value),this.lookupService.changeGrandPrixMorale(R.type,-JR)}if("Night Vision"===R.ability.name&&R.type===X.Gecko&&(_n=1),R.getEquippedItemName()===this.globalService.getEquipmentName(Je.scaryMask)&&Qi&&!R.raceVariables.scaryMaskEffectOccurred){R.raceVariables.scaryMaskEffectOccurred=!0;var M0=2,e2=this.globalService.globalVar.modifiers.find(Ke=>"scaryMaskEquipmentModifier"===Ke.text);void 0!==e2&&(M0=e2.value),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=M0:this.timeToComplete+=M0}r.addRaceUpdate(u,ut+" is distracted and lost focus!")}if(Rf){if(R.raceVariables.stumbled=!0,R.raceVariables.currentStumbledLength=R.raceVariables.defaultStumbledLength,T=lt,this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix){var t2=.02,k0=this.globalService.globalVar.modifiers.find(Ke=>"stumbleMoraleLossModifier"===Ke.text);null!=k0&&(t2=k0.value),this.lookupService.changeGrandPrixMorale(R.type,-t2)}r.addRaceUpdate(u,ut+" stumbles!")}if(0===R.currentStats.stamina){var xf=.9,n2=this.globalService.globalVar.modifiers.find(Ke=>"exhaustionStatLossModifier"===Ke.text);if(void 0!==n2&&(xf=n2.value),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix){var A0=1-xf;xf=1-(A0*=1/this.lookupService.getAnimalMorale(R.type))}Bt*=xf;var P0=.1,r2=this.globalService.globalVar.modifiers.find(Ke=>"exhaustionStatLossMinimumModifier"===Ke.text);void 0!==r2&&(P0=r2.value),Bt<P0&&(Bt=P0),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.setStaminaLossForEventAnimal(Bt,R.type);var Mf=.5;if(R.talentTree.talentTreeType===ht.longDistance&&(Mf+=.02*R.talentTree.column3Row4Points),R.getEquippedItemName()===this.globalService.getEquipmentName(Je.quickSnack)){Mf=1;var a2=this.globalService.globalVar.modifiers.find(Ke=>"quickSnackEquipmentModifier"===Ke.text);void 0!==a2&&(Mf=a2.value)}R.currentStats.stamina=An*Mf,r.addRaceUpdate(u,ut+" runs out of stamina and must slow down.")}if(R.raceVariables.lostFocus||R.raceVariables.stumbled){if(R.raceVariables.lostFocus){S=Pr.LostFocus;var o2=.9;R.talentTree.talentTreeType===ht.longDistance&&(o2-=.02*R.talentTree.column1Row4Points);var E0=T*o2;lt>_r&&(lt-=E0/R.raceVariables.defaultLostFocusLength),R.raceVariables.currentLostFocusLength-=1,0===R.raceVariables.currentLostFocusLength&&(R.raceVariables.lostFocus=!1)}R.raceVariables.stumbled&&(S=Pr.Stumble,E0=T-T*dn.stumbleSeverity,lt>_r&&(lt-=E0/R.raceVariables.defaultStumbledLength),R.raceVariables.currentStumbledLength-=1,0===R.raceVariables.currentStumbledLength&&(R.raceVariables.stumbled=!1))}else{var Hi=R.currentStats.accelerationMs;if(Hi*=ve.terrain.accelerationModifier,Hi*=Bt,R.type===X.Horse&&"Pacemaker"===R.ability.name&&R.ability.abilityInUse&&(Hi*=1.5),R.type===X.Cheetah&&"Sprint"===R.ability.name&&R.ability.abilityInUse&&(Hi*=1.35),R.type===X.Cheetah&&"Giving Chase"===R.ability.name&&!Qi&&(Hi*=1+this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt)/100),"Feeding Frenzy"===R.ability.name&&R.type===X.Shark&&(Hi*=br),R.type===X.Caribou&&"Great Migration"===R.ability.name&&(Hi+=_a),"Wild Toboggan"===R.ability.name&&R.type===X.Penguin&&R.ability.abilityInUse){var jz=this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt)/100,ys=20,s2=this.globalService.globalVar.modifiers.find(Ke=>"maxDriftAmountModifier"===Ke.text);void 0!==s2&&(ys=s2.value),(jl=dn.driftAmount)>(ys*=2)&&(jl=ys),Hi*=1+jz*(Math.abs(jl)/ys),R.ability.abilityInUse=!0}"Nap"===R.ability.name&&R.type===X.Hare&&(R.ability.remainingLength-=d*(1/this.frameModifier),R.ability.remainingLength<=0&&(R.ability.remainingLength=0),R.ability.remainingLength>0&&(Hi=0)),"Buried Treasure"===R.ability.name&&R.type===X.Octopus&&ms<8*this.frameModifier&&(Hi=0),R.type===X.Salamander&&"Heat Up"===R.ability.name&&R.ability.abilityInUse&&(Hi*=1+.15*R.ability.totalUseCount),R.type===X.Fox&&"Trickster"===R.ability.name&&"Acceleration"===R.ability.tricksterStatLoss&&R.ability.abilityInUse&&(Hi*=.75),R.type===X.Fox&&"Trickster"===R.ability.name&&"Acceleration"===R.ability.tricksterStatGain&&R.ability.abilityInUse&&(Hi*=1.5),R.type===X.Fox&&"Nine Tails"===R.ability.name&&(Hi*=1+.15*this.getNineTailsBuffCount("Acceleration",Vi)),R.getEquippedItemName()===this.globalService.getEquipmentName(Je.athleticTape)&&R.raceVariables.isBursting&&(Hi*=.5),kt&&(Hi*=1+.05*R.talentTree.column2Row2Points),lt+=Hi/this.frameModifier}lt<0&&(lt=0);var En=R.currentStats.maxSpeedMs;if(En*=ve.terrain.maxSpeedModifier,En*=Bt,R.type===X.Cheetah&&"Sprint"===R.ability.name&&R.ability.abilityInUse&&(En*=1.35),R.type===X.Cheetah&&"On The Hunt"===R.ability.name&&(En*=_n),"Nap"===R.ability.name&&R.type===X.Hare&&(En*=2),Qi&&R.type===X.Shark&&"Blood In The Water"===R.ability.name&&(En*=1+this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt)/100),null!==be&&be.type===X.Shark&&"Feeding Frenzy"===be.ability.name||null!==de&&de.type===X.Shark&&"Feeding Frenzy"===de.ability.name){var l2=.9,c2=this.globalService.globalVar.modifiers.find(Ke=>"feedingFrenzyNegativeModifier"===Ke.text);void 0!==c2&&(l2=c2.value),En*=l2}if("Feeding Frenzy"===R.ability.name&&R.type===X.Shark&&(En*=br),"Quick Toboggan"===R.ability.name&&R.type===X.Penguin&&(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCap||(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount+=1),En*=ba.permanentMaxSpeedIncreaseMultiplier)),R.type===X.Gecko&&"Night Vision"===R.ability.name&&(En*=_n),R.type===X.Fox&&"Trickster"===R.ability.name&&"Max Speed"===R.ability.tricksterStatLoss&&R.ability.abilityInUse&&(En*=.75),R.type===X.Fox&&"Trickster"===R.ability.name&&"Max Speed"===R.ability.tricksterStatGain&&R.ability.abilityInUse&&(En*=1.5),R.type===X.Fox&&"Fleeting Speed"===R.ability.name){var Ou=Fo;(Ou-=.02*Math.floor(Pn/ve.distance*100)*(Ou-1))<1&&(Ou=1),En*=Ou}if(R.type===X.Fox&&"Nine Tails"===R.ability.name&&(En*=1+.15*this.getNineTailsBuffCount("Max Speed",Vi)),R.talentTree.talentTreeType===ht.sprint&&(En*=1+.005*R.talentTree.column2Row4Points*R.raceVariables.velocityReachesMaxSpeedCount),R.talentTree.talentTreeType===ht.longDistance&&lt>En*(.005*R.talentTree.column2Row4Points)&&(_r=En*(.005*R.talentTree.column2Row4Points)),R.getEquippedItemName()===this.globalService.getEquipmentName(Je.incense)){var u2=.9,d2=this.globalService.globalVar.modifiers.find(Ke=>"incenseEquipmentModifier"===Ke.text);void 0!==d2&&(u2=d2.value),lt>=En*u2&&(lt=En)}kt=R.talentTree.talentTreeType===ht.longDistance&&lt<=.25*En,lt>En&&(lt=En,R.talentTree.talentTreeType===ht.sprint&&R.raceVariables.velocityReachesMaxSpeedCount<10&&(R.raceVariables.velocityReachesMaxSpeedCount+=1));var I0=this.doesRacerMiniBurst(R,ei),O0=this.doesRacerBurst(R,dn,this.timeToComplete,e.length,o,Lo,_s);if(O0||I0||vs){if(R.raceVariables.isBursting=!0,(O0||vs)&&(R.raceVariables.remainingBurstMeters+=this.getBurstDistance(R,ve.terrain.powerModifier,Bt)),I0&&(R.raceVariables.remainingBurstMeters+=this.getBurstDistance(R,ve.terrain.powerModifier,Bt)*(.05*R.talentTree.column1Row4Points)),R.raceVariables.burstCount+=1,this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix){var h2=.02,N0=this.globalService.globalVar.modifiers.find(Ke=>"burstMoraleBoostModifier"===Ke.text);null!=N0&&(h2=N0.value),this.lookupService.changeGrandPrixMorale(R.type,h2)}if(R.type===X.Monkey&&"Frenzy"===R.ability.name&&(R.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt),this.globalService.increaseAbilityXp(R)),R.type===X.Hare&&"Prey Instinct"===R.ability.name&&!R.ability.abilityUsed&&(R.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt),R.ability.abilityUsed=!0),R.type===X.Octopus&&"Big Brain"===R.ability.name&&!(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCap)){var qz=Math.round(ve.pathData.length/3);if(R.raceVariables.burstCount===qz){this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount+=1),r.addRaceUpdate(u,ut+" uses "+(null==R?void 0:R.ability.name)+".");var Wz=1+this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt)/100,Xz=this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;this.AddRelayEffect(new Dt,R,Xz,new Oe(1,1,1,Wz,1,1),!0,$e.bigBrain,!0);var f2=4,p2=this.globalService.globalVar.modifiers.find(Ke=>"relayAbilityXpGainModifier"===Ke.text);void 0!==p2&&(f2=p2.value),this.globalService.increaseAbilityXp(R,f2)}}if((O0||vs)&&r.addRaceUpdate(u,"<strong>BURST!</strong> "+ut+" is breaking their limit!"),I0&&r.addRaceUpdate(u,"<strong>MINI BURST!</strong> "+ut+" is breaking their limit!"),R.type!==X.Cheetah||"On The Hunt"!==R.ability.name||this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCap||(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount+=1),_n+=this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt)/100,this.globalService.increaseAbilityXp(R)),R.type===X.Goat&&"Deep Breathing"===R.ability.name){var kf=An*(this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt)/100);R.currentStats.stamina+=kf,r.addRaceUpdate(u,ut+" uses "+R.ability.name+"."),R.currentStats.stamina>An&&(kf=R.currentStats.stamina-An,bs=0,this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCap||(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(kf*=.2,this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount+=1),this.AddRelayEffect(new Dt,R,bs,new Oe(0,0,0,0,0,0),!1,$e.deepBreathing,!0,kf)),R.currentStats.stamina=An),this.globalService.increaseAbilityXp(R)}}var cr=lt;if(G>0){var V0=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,$e.camouflage);if(void 0!==V0&&void 0!==V0.additionalValue){var F0=Pn/V0.remainingRelayMeters;F0>1&&(F0=1),(cr+=(1-F0)*G)>1.5*En&&(cr=1.5*En)}}if(R.raceVariables.isBursting){S=Pr.Burst;var Nu=1.25;R.type===X.Goat&&"In The Rhythm"===R.ability.name&&(Nu+=this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt)/100),Nu+=K,R.talentTree.talentTreeType===ht.longDistance&&(Nu+=R.raceVariables.burstCount*(.005*R.talentTree.column1Row2Points)),R.raceVariables.remainingBurstMeters>=cr/this.frameModifier?(R.raceVariables.remainingBurstMeters-=(cr*=Nu)/this.frameModifier,R.raceVariables.remainingBurstMeters<0&&(cr+=R.raceVariables.remainingBurstMeters,R.raceVariables.remainingBurstMeters=0)):(cr-=R.raceVariables.remainingBurstMeters,cr+=R.raceVariables.remainingBurstMeters*Nu,R.raceVariables.remainingBurstMeters=0,R.raceVariables.isBursting=!1,r.addRaceUpdate(u,ut+"'s burst ends.")),R.talentTree.talentTreeType===ht.sprint&&!R.raceVariables.velocityExceedsMaxSpeedDuringBurst&&cr>En&&R.raceVariables.isBursting&&(R.raceVariables.remainingBurstMeters+=R.raceVariables.remainingBurstMeters*(.05*R.talentTree.column2Row2Points),R.raceVariables.velocityExceedsMaxSpeedDuringBurst=!0)}var ur=cr/this.frameModifier;if(R.ability.abilityInUse&&(R.type===X.Monkey&&"Leap"===R.ability.name||R.type===X.Octopus&&"Propulsion"===R.ability.name)){var Qz=this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt);ur+=Qz/R.ability.totalFrames,R.ability.remainingFrames-=1,R.ability.remainingFrames<=0&&(R.ability.abilityInUse=!1)}if(ve.courseType===z.Tundra){var jl;if(this.handleTundraDrift(R,dn,ei,Vn,Lo,ve.terrain,ki,ur,Bt,ba,r,ut,u))ur=0,lt=0,r.addRaceUpdate(u,ut+" slides into a wall and loses all momentum!");else if((jl=Math.abs(dn.driftAmount))<=(ys=20)&&!Vn){var g2=1-jl/100;ur*=g2,En*=g2}this.tundraPreviousYAmount=R.raceVariables.icyCurrentYAmount}ve.courseType===z.Volcanic?this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix?this.selectedRace.raceUI.lavaFallPercentByFrame.push([0,0,0,0,0]):this.handleLavaFall(R,ms,e.length/this.timeToComplete,Pn,ve.distance,r,u,gt)&&(this.timeToComplete=u/this.frameModifier):this.selectedRace.raceLegs.some(Ke=>Ke.courseType===z.Volcanic)&&this.selectedRace.raceUI.lavaFallPercentByFrame.push(this.selectedRace.raceUI.lavaFallPercentByFrame.length>0&&null!=this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]&&this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]>0?this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1]:[0,0,0,0,0]),o+=ur>yi?yi:ur,yi-=ur;var ws=1e5;this.timeToComplete*this.frameModifier>2e4&&(ws=1e4);var B0=1e5;if(this.timeToComplete*this.frameModifier>2e4&&(B0=1e3),e.raceUI.distanceCoveredByFrame.push(Math.round(o*B0)/B0),e.raceUI.velocityByFrame.push(Math.round(ur*ws)/ws),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix||e.raceUI.timeToCompleteByFrame.push(this.timeToComplete),e.raceUI.maxSpeedByFrame.push(Math.round(En*ws)/ws),e.raceUI.staminaPercentByFrame.push(Math.round(R.currentStats.stamina/An*ws)/ws),e.raceUI.racerEffectByFrame.push(S),this.handleRacePositionByFrame(e,d,u,this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+o:o),this.handleStamina(R,r,ur,u,ve.terrain,An),ZR||(R.raceVariables.metersSinceLostFocus+=ur),R.type===X.Fox&&"Nine Tails"===R.ability.name&&(this.checkForNineTailsBuff(dn,Vi,R,ve,Bt,r,u,ut),Vi.length>0&&(Vi.forEach(Ke=>{Ke[1]-=ur}),Vi=Vi.filter(Ke=>Ke[1]>0))),R.ability.abilityInUse&&R.ability.remainingLength>0&&(R.ability.remainingLength-=ur,R.type===X.Gecko&&"Camouflage"===R.ability.name&&(R.ability.remainingLength-=ur),R.ability.remainingLength<=0)){if(R.ability.abilityInUse=!1,R.ability.currentCooldown=R.ability.cooldown,R.getEquippedItemName()===this.globalService.getEquipmentName(Je.pendant)){var Fu=.9;void 0!==(Bu=this.globalService.globalVar.modifiers.find(Ke=>"pendantEquipmentModifier"===Ke.text))&&(Fu=Bu.value),R.ability.currentCooldown*=Fu}if(null!=R.raceVariables&&null!=R.raceVariables.relayEffects&&R.raceVariables.relayEffects.length>0){var L0=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,$e.supportAbilityCooldown);void 0!==L0&&void 0!==L0.additionalValue&&(R.ability.currentCooldown*=L0.additionalValue)}}if(null!=R.ability.currentCooldown&&R.ability.currentCooldown<=0&&this.abilityRedundancyCheck(R,lt,dn,ve,yi,Bt)){var Bu;if(this.useAbility(R,e,ve,Bt,An,Pn,co),(Uo=new Z).value=u,Uo.text=R.type===X.Fox&&"Trickster"===R.ability.name?R.getAbilityUseUpdateText(ut,", gaining "+R.ability.tricksterStatGain+" but losing "+R.ability.tricksterStatLoss):R.getAbilityUseUpdateText(ut),r.raceUpdates.push(Uo),R.ability.currentCooldown=R.ability.cooldown,R.getEquippedItemName()===this.globalService.getEquipmentName(Je.pendant))Fu=.9,void 0!==(Bu=this.globalService.globalVar.modifiers.find(i$=>"pendantEquipmentModifier"===i$.text))&&(Fu=Bu.value),R.ability.currentCooldown*=Fu;if(R.type===X.Caribou&&"Great Migration"===R.ability.name){var U0=.1*An;R.currentStats.stamina-=U0,_a=U0>1?.25*U0:1}}null!=R.raceVariables.relayEffects&&R.raceVariables.relayEffects.length>0&&(R.raceVariables.relayEffects.forEach(Ke=>{Ke.remainingRelayMeters<=ur?(Ke.remainingRelayMeters=0,Ke.isMultiplicative?null==R||R.currentStats.divideCurrentRacingStats(Ke.relayAffectedStatRatios):null==R||R.currentStats.subtractCurrentRacingStats(Ke.relayAffectedStatRatios),Ke.effectType!==$e.deepBreathing&&Ke.effectType!==$e.bigBrain&&Ke.effectType!==$e.specialDelivery&&r.addRaceUpdate(u,ut+"'s relay effect "+this.lookupService.getRelayEffectNameByType(Ke.effectType)+" ends.")):Ke.remainingRelayMeters-=ur}),R.raceVariables.relayEffects=R.raceVariables.relayEffects.filter(Ke=>Ke.remainingRelayMeters>0));var Uo,v2=10;this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(v2=20),0!==u&&u!==this.timeToComplete&&u%(v2*this.frameModifier)==0&&((Uo=new Z).value=u,Uo.text=this.getUpdateMessageByRelativeDistance(d,u,this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+o:o,ut),r.raceUpdates.push(Uo));var Lu=!1,b2=0,_2=0;if(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(Mu=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime(),b2+=d*Mu,_2=this.globalService.globalVar.eventRaceData.distanceCovered),o+_2>d*(u/this.frameModifier)+b2?(Qi||(Lu=!0),Qi=!0):(Qi&&(Lu=!0),Qi=!1),Lu&&R.type===X.Shark&&"Apex Predator"===R.ability.name&&!R.ability.abilityUsed&&Hl>1){r.addRaceUpdate(u,ut+" bites the other racers as they pass, slowing them down."),R.ability.abilityUsed=!0;var t$=this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt),H0=this.timeToComplete*(t$/this.selectedRace.length),y2=1.5*H0;this.timeToComplete+=y2-H0,this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.bonusTime+=y2-H0),this.globalService.increaseAbilityXp(R)}if(R.ability.currentCooldown-=1/this.frameModifier,u+=1,yi<=0){r.addRaceUpdate(u,ut+" finishes their leg of the race."),ve.legComplete=!0,C+=1,this.preRacerResetRelayEffectCheck(R,be,r,u,ut,ve,ve,Bt,cr,An),R.type===X.Octopus&&"Buried Treasure"===R.ability.name&&(se=1+this.lookupService.GetAbilityEffectiveAmount(R,ve.terrain.powerModifier,Bt)/100),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped?this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.endOfLegRelayEffectCheck(R,new Dt,r,u,on,ve,ve,Bt,cr,_s,Lo):this.PrepareRacingAnimal(r,u,on,R,void 0,void 0,void 0,Bt,void 0,cr),ve.terrain.accelerationModifier=kn,ve.terrain.maxSpeedModifier=$n,ve.terrain.staminaModifier=qn,ve.terrain.powerModifier=fi,ve.terrain.focusModifier=pi,ve.terrain.adaptabilityModifier=St,_.push(R),y.push(ve);break}u===this.timeToComplete*this.frameModifier&&(ve.terrain.accelerationModifier=kn,ve.terrain.maxSpeedModifier=$n,ve.terrain.staminaModifier=qn,ve.terrain.powerModifier=fi,ve.terrain.focusModifier=pi,ve.terrain.adaptabilityModifier=St),s=cr,l=Lo,c=_s}if(v+=1,this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix){var w2=.05,G0=this.globalService.globalVar.modifiers.find(Ke=>"segmentCompleteMoraleBoostModifier"===Ke.text);null!=G0&&(w2=G0.value),this.lookupService.changeGrandPrixMorale(R.type,w2),this.globalService.globalVar.eventRaceData.previousRaceSegmentData=this.carryOverEventRaceSegmentData(R,lt,_n,oi.permanentAdaptabilityIncreaseMultiplier,ba.permanentMaxSpeedIncreaseMultiplier,br,_a,co.coldBloodedIncreaseMultiplier,Fo,Vi,j,kt,_r)}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),e.raceLegs.some(ve=>!ve.legComplete)?(r.wasSuccessful=!1,r.totalFramesPassed=u,r.distanceCovered=e.raceUI.distanceCoveredByFrame[u-1],r.addRaceUpdate(u,"You lost the race...")):(e.isCompleted=!0,r.wasSuccessful=!0,r.totalFramesPassed=u,r.distanceCovered=e.raceUI.distanceCoveredByFrame[u-1],r.addRaceUpdate(u,"You won the race!")),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.racingAnimals.forEach(ve=>{this.PrepareRacingAnimal(r,u,"",ve,void 0,void 0,void 0,void 0,!0)}),this.globalService.globalVar.trackedStats.totalMetersRaced+=o,r.wasSuccessful&&this.raceWasSuccessfulUpdate(r,se),r}getStaminaModifier(e,n,r){var a,o=this.globalService.globalVar.modifiers.find(s=>"staminaModifier"===s.text);return a=void 0===o?.2:o.value,null!=e&&null!=e.staminaModifier&&(a*=e.staminaModifier),n.talentTree.talentTreeType===ht.sprint&&(a*=1+.05*n.talentTree.column3Row2Points),n.talentTree.talentTreeType===ht.longDistance&&n.currentStats.stamina/r<=.35&&(a*=1-.05*n.talentTree.column3Row2Points),a}handleStamina(e,n,r,a,o,s){var l=this.getStaminaModifier(o,e,s);e.type===X.Horse&&"Second Wind"===e.ability.name&&e.ability.abilityInUse||(e.currentStats.stamina-=e.type===X.Cheetah&&"Sprint"===e.ability.name&&e.ability.abilityInUse?r*l*2:r*l),e.currentStats.stamina<0&&(e.currentStats.stamina=0,e.raceVariables.ranOutOfStamina=!0)}getBurstDistance(e,n,r){var a=0,o=this.globalService.globalVar.modifiers.find(_=>"breedLevelStatModifier"===_.text);null!=o&&(a=o.value),a=1+a*(e.breedLevel-1);var s=1;e.type===X.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.75),e.type===X.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.5);var l=e.currentStats.powerMs*s*n*r,c=1;if(e.getEquippedItemName()===this.globalService.getEquipmentName(Je.runningShoes)){var u=1.2,d=this.globalService.globalVar.modifiers.find(_=>"runningShoesEquipmentModifier"===_.text);void 0!==d&&(u=d.value),c=1+e.raceVariables.burstCount*(u-1)}var m=0,v=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,$e.supportBurstDistance);return void 0!==v&&void 0!==v.additionalValue&&(m=v.additionalValue),e.currentStats.calculateBurstDistance(a,void 0,l)*c+m}doesRacerMiniBurst(e,n){var r=!1;return null!=n&&n.isSpecialPath&&(e.talentTree.talentTreeType===ht.sprint&&e.talentTree.column1Row4Points>0&&!n.didAnimalStumble&&!n.checkedForMiniBurst&&(r=!0),n.checkedForMiniBurst=!0),r}getBurstChance(e,n,r){var a=1e3/this.selectedRace.length,o=0,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value);var l=e.currentStats.calculateBurstChance(o=1+o*(e.breedLevel-1),n,r)*a,c=0,u=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,$e.supportBurstChance);return void 0!==u&&void 0!==u.additionalValue&&(c=u.additionalValue),l+c}doesRacerBurst(e,n,r,a,o,s,l){var c=this.getBurstChance(e,l,s);if(n.checkedForBurst)return!1;if(n.checkedForBurst=!0,"Night Vision"===e.ability.name&&e.type===X.Gecko&&(e.ability.abilityInUse=!1),e.type===X.Hare&&"Prey Instinct"===e.ability.name&&!e.ability.abilityUsed)return!0;if(n.isSpecialPath){var u=this.lookupService.getResourceByName("Course Maps");if(null==u&&(u=0),u>0){var d=1,m=this.globalService.globalVar.modifiers.find(_=>"racerMapsModifier"===_.text);null!=m&&(d=1+u*m.value),c*=d}}return this.utilityService.getRandomNumber(1,100)<=c+1}raceWasSuccessfulUpdate(e,n){var s,r=this.globalService.globalVar.animals.find(T=>T.type===X.Octopus),a="<span class='coloredText waterColor'>"+(null==r?void 0:r.name)+"</span>",o=this.globalService.globalVar.circuitRank,l=0;if(this.selectedRace.isCircuitRace)s=this.globalService.globalVar.circuitRaces.find(T=>T.raceId===this.selectedRace.raceId),this.globalService.globalVar.circuitRaces.filter(T=>T.requiredRank===o).every(T=>T.isCompleted)&&(this.selectedRace.circuitIncreaseReward=this.globalService.IncreaseCircuitRank(),this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Y.Resources)));else if(s=this.globalService.globalVar.localRaces.find(T=>T.raceId===this.selectedRace.raceId&&T.localRaceType===this.selectedRace.localRaceType),this.selectedRace.localRaceType===Qt.Free){var u=this.globalService.globalVar.resources.find(T=>"International Races"===T.name),d=this.globalService.globalVar.resources.find(T=>"National Races"===T.name);if(null!=u&&u.amount>0){var m=5,v=this.globalService.globalVar.modifiers.find(T=>"internationalRacesToMedalModifier"===T.text);null!=v&&(m=v.value),this.globalService.globalVar.nationalRaceCountdown>=m&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Y.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else if(null!=d&&d.amount>0){var _=12,y=this.globalService.globalVar.modifiers.find(T=>"nationalRacesToMedalModifier"===T.text);null!=y&&(_=y.value),this.globalService.globalVar.nationalRaceCountdown>=_&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Y.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}}if(this.selectedRace.localRaceType!==Qt.Free&&this.selectedRace.localRaceType!==Qt.Track){if(void 0===s)return;this.selectedRace.localRaceType===Qt.Mono&&(this.globalService.globalVar.lastMonoRaceCourseType=this.selectedRace.raceLegs[0].courseType),this.globalService.IncreaseLocalRaceRank(this.selectedRace.localRaceType),s.isCompleted=!0}else this.selectedRace.localRaceType===Qt.Free&&(this.globalService.globalVar.nationalRaceCountdown+=1);this.racingAnimals.forEach(T=>{l=this.selectedRace.isCircuitRace?this.lookupService.getCircuitBreedGaugeIncrease(T):this.lookupService.getLocalBreedGaugeIncrease(T),this.globalService.IncreaseAnimalBreedGauge(T,l)}),this.selectedRace.localRaceType!==Qt.Track?e.beatMoneyMark=this.checkMoneyMark(e):this.handleTrackRaceRewards(e),null!=this.selectedRace.rewards&&this.selectedRace.rewards.forEach(T=>{if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(de=>de.name===T.name)){var C=this.globalService.globalVar.resources.find(de=>de.name===T.name);if(null!=C)if(this.selectedRace.localRaceType!==Qt.Track)if("Coins"===C.name){if(e.beatMoneyMark){e.addRaceUpdate(e.totalFramesPassed,"You beat the money mark!");var O=1.25,j=this.globalService.globalVar.modifiers.find(de=>"moneyMarkRewardModifier"===de.text);null!=j&&(O=j.value),T.amount=Math.round(T.amount*O)}var G=this.lookupService.getRenown();T.amount=Math.round(T.amount*this.lookupService.getRenownCoinModifier(G,!1)),n>1&&e.addRaceUpdate(e.totalFramesPassed,a+" finds buried treasure at the bottom of the ocean!"),T.amount=Math.round(T.amount*n),C.amount+=T.amount}else"Facility Level"===C.name?(C.amount+=T.amount,this.lookupService.recalculateAllAnimalStats()):"Renown"===C.name?C.amount=parseFloat((C.amount+T.amount).toFixed(3)):C.amount+=T.amount;else C.amount+=T.amount}else if("Bonus Breed XP Gain From Training"===T.name&&T.itemType===Y.Other){var K=this.selectedRace.raceLegs[0].courseType;null!=(se=this.racingAnimals.find(de=>de.raceCourseType===K))&&(se.miscStats.bonusBreedXpGainFromTraining+=T.amount)}else if("Bonus Breed XP Gain From Free Races"===T.name&&T.itemType===Y.Other)K=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(he=>he.raceCourseType===K))&&(se.miscStats.bonusBreedXpGainFromLocalRaces+=T.amount);else if("Bonus Breed XP Gain From Circuit Races"===T.name&&T.itemType===Y.Other)K=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(he=>he.raceCourseType===K))&&(se.miscStats.bonusBreedXpGainFromCircuitRaces+=T.amount);else if("Training Time Reduction"===T.name&&T.itemType===Y.Other)K=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(he=>he.raceCourseType===K))&&(se.miscStats.trainingTimeReduction+=T.amount);else if("Diminishing Returns per Facility Level"===T.name&&T.itemType===Y.Other)K=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(he=>he.raceCourseType===K))&&(se.miscStats.diminishingReturnsBonus+=T.amount);else if("Orb Pendant"===T.name&&T.itemType===Y.Other)K=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(he=>he.raceCourseType===K))&&(se.canEquipOrb=!0);else if("Bonus Talents"===T.name&&T.itemType===Y.Other){var se;K=this.selectedRace.raceLegs[0].courseType,null!=(se=this.racingAnimals.find(he=>he.raceCourseType===K))&&(se.miscStats.bonusTalents+=T.amount)}else this.globalService.globalVar.resources.push(new le(T.name,T.amount,T.itemType))})}checkMoneyMark(e){var n=!1;if(0===this.lookupService.getResourceByName("Money Mark"))return n;var a=this.globalService.globalVar.modifiers.find(s=>"moneyMarkPaceModifier"===s.text);return null==a||e.totalFramesPassed<=this.timeToComplete*this.frameModifier*a.value&&(n=!0),n}handleTrackRaceRewards(e){if(1===this.selectedRace.raceLegs.length){var n=this.selectedRace.raceLegs[0].courseType,r=this.racingAnimals.find(d=>d.raceCourseType===n);if(void 0!==r){var a=null;if(this.selectedRace.trackRaceType===Kn.novice&&(a=r.allTrainingTracks.noviceTrack),this.selectedRace.trackRaceType===Kn.intermediate&&(a=r.allTrainingTracks.intermediateTrack),this.selectedRace.trackRaceType===Kn.master&&(a=r.allTrainingTracks.masterTrack),null!==a){var o=this.timeToComplete*this.frameModifier,s=.25,l=this.globalService.globalVar.modifiers.find(d=>"trainingTrackPaceModifier"===d.text);void 0!==l&&(s=l.value);for(var c=0;c<a.totalRewards;c++)c<a.rewardsObtained||e.totalFramesPassed<=o/(1+s*c)&&(a.rewardsObtained=c+1,a.rewardsObtained===a.totalRewards&&(this.selectedRace.trackRaceType===Kn.novice&&(r.allTrainingTracks.intermediateTrackAvailable=!0),this.selectedRace.trackRaceType===Kn.intermediate&&(r.allTrainingTracks.masterTrackAvailable=!0)),null==this.selectedRace.rewards&&(this.selectedRace.rewards=[]),this.selectedRace.rewards.push(a.rewards[c]));null!=this.selectedRace.rewards&&(this.selectedRace.rewards=this.utilityService.condenseList(this.selectedRace.rewards))}}}}getUpdateMessageByRelativeDistance(e,n,r,a){var o=a,s=e*(n/this.frameModifier);return this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(s+=e*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),r<.5*s?o="Is "+a+" <strong>even moving?!</strong>":r<.75*s?o=a+" is <strong>falling out of the race!</strong>":r<.9*s?o=a+" is <strong>just a step behind everyone else!</strong>":r>=.9*s&&r<=1.1*s?o=a+" is <strong>right on pace!</strong>":r>=1.5*s?o=a+" <strong>CANNOT be caught!!</strong>":r>=1.25*s?o=a+" is <strong>WAY ahead of the pack!</strong>":r>=1.1*s&&(o=a+" is <strong>barely leading the pack!</strong>"),o}PrepareRacingAnimal(e,n,r,a,o,s,l,c,u,d,m,v){if(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!0),a.ability.currentCooldown=a.ability.cooldown,a.ability.remainingLength=0,a.ability.totalUseCount=0,a.getEquippedItemName()===this.globalService.getEquipmentName(Je.pendant)){var _=.9,y=this.globalService.globalVar.modifiers.find(O=>"pendantEquipmentModifier"===O.text);void 0!==y&&(_=y.value),a.ability.currentCooldown*=_}if(null!=a.raceVariables&&null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0){var T=this.lookupService.getRelayEffectFromListByType(a.raceVariables.relayEffects,$e.supportAbilityCooldown);void 0!==T&&void 0!==T.additionalValue&&(a.ability.currentCooldown*=T.additionalValue)}a.ability.abilityUsed=!1,a.ability.abilityInUse=!1,null!=a.raceVariables&&(a.raceVariables.ranOutOfStamina=!1,a.raceVariables.burstCount=0,a.raceVariables.metersSinceLostFocus=0,a.raceVariables.hasLostFocusDuringRace=!1,a.raceVariables.firstAbilityUseEffectApplied=!1,a.raceVariables.velocityExceedsMaxSpeedDuringBurst=!1,a.raceVariables.velocityReachesMaxSpeedCount=0),this.globalService.calculateAnimalRacingStats(a),!0!==u&&(null!=o&&o.length>0&&this.endOfLegRelayEffectCheck(o[o.length-1],a,e,n,r,s,l,c,d,m,v),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects.forEach(O=>{a.raceVariables.relayEffects.push(O.makeCopy())}),this.globalService.globalVar.eventRaceData.queuedRelayEffects.length>0&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects=this.globalService.globalVar.eventRaceData.queuedRelayEffects.filter(O=>O.affectsAllRacers))),null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0&&a.raceVariables.relayEffects.forEach(O=>{O.isMultiplicative?a.currentStats.multiplyCurrentRacingStats(O.relayAffectedStatRatios):a.currentStats.addCurrentRacingStats(O.relayAffectedStatRatios)}))}preRacerResetRelayEffectCheck(e,n,r,a,o,s,l,c,u,d){var m=4,v=this.globalService.globalVar.modifiers.find(C=>"relayAbilityXpGainModifier"===C.text);if(void 0!==v&&(m=v.value),null===n&&(n=new Dt),null!=l){if(e.type===X.Caribou&&"Herd Mentality"===e.ability.name&&!e.raceVariables.ranOutOfStamina){var _=e.currentStats.stamina*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100),y=0;this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCap||(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount+=1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.AddRelayEffect(n,e,y,new Oe(0,0,0,0,0,0),!1,$e.herdMentality,!1,_),this.globalService.increaseAbilityXp(e,m))}if(!(e.type!==X.Caribou||"Special Delivery"!==e.ability.name||e.raceVariables.ranOutOfStamina||(void 0===d&&(d=1),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCap))){this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount+=1),y=this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;var S=e.currentStats.stamina/d;S>1&&(S=1);var T=S*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100);this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(T*=.2),this.AddRelayEffect(e,e,y,new Oe(0,0,0,0,0,0),!1,$e.specialDelivery,!0,T),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,m)}}}endOfLegRelayEffectCheck(e,n,r,a,o,s,l,c,u,d,m,v=1){var _=4,y=this.globalService.globalVar.modifiers.find(G=>"relayAbilityXpGainModifier"===G.text);if(void 0!==y&&(_=y.value),"Inspiration"===e.ability.name&&e.type===X.Horse&&null!=l){var S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c);this.AddRelayEffect(n,e,S*v,new Oe(.25*e.currentStats.maxSpeedMs,0,0,0,0,0),!1,$e.inspiration,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,_),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.inspirationUseCount+=1)}if("Flowing Current"===e.ability.name&&e.type===X.Dolphin&&null!=l&&(S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,S*v,new Oe(0,.25*e.currentStats.accelerationMs,0,0,0,0),!1,$e.flowingCurrent,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,_),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.flowingCurrentUseCount+=1)),"Navigator"===e.ability.name&&e.type===X.Dolphin&&null!=l&&(S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,S*v,new Oe(0,0,0,0,0,.25*e.currentStats.adaptabilityMs),!1,$e.navigator,!1),r.addRaceUpdate(a,o+" uses "+(null==e?void 0:e.ability.name)+"."),this.globalService.increaseAbilityXp(e,_),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.navigatorUseCount+=1)),e.type===X.Gecko&&"Camouflage"===e.ability.name&&null!=l){var C=u;S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,S*v,new Oe(0,0,0,0,0,0),!1,$e.camouflage,!1,C),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.camouflageUseCount+=1)}if(void 0!==s){var O=new ai;void 0!==l&&(O=l.terrain),void 0===c&&(c=1),void 0===m&&(m=e.currentStats.adaptabilityMs),void 0===d&&(d=e.currentStats.focusMs),this.talentRelayCheck(e,n,s.distance*v,O,c,d,m),this.batonEquipmentCheck(e,n,s.distance*v)}}talentRelayCheck(e,n,r,a,o,s,l,c=1){if(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.talentTree.talentTreeType===ht.support){if(e.talentTree.column1Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Oe(1,1,1,1,1,u=1+.01*e.talentTree.column1Row1Points),!0,$e.supportAdaptabilityRelay,!1),e.talentTree.column1Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Oe(u=1+.01*e.talentTree.column1Row3Points,1,1,1,1,1),!0,$e.supportMaxSpeedRelay,!1),e.talentTree.column2Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Oe(1,u=1+.01*e.talentTree.column2Row1Points,1,1,1,1),!0,$e.supportAccelerationRelay,!1),e.talentTree.column2Row2Points>0){var u=this.getBurstDistance(e,a.powerModifier,o)*(.05*e.talentTree.column2Row2Points);this.AddRelayEffect(n,e,r*c,new Oe(0,0,0,0,0,0),!1,$e.supportBurstDistance,!1,u)}if(e.talentTree.column2Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Oe(1,1,u=1+.01*e.talentTree.column2Row3Points,1,1,1),!0,$e.supportStaminaRelay,!1),e.talentTree.column2Row4Points>0){u=this.getBurstChance(e,s,l)*(.03*e.talentTree.column2Row4Points);this.AddRelayEffect(n,e,r*c,new Oe(0,0,0,0,0,0),!1,$e.supportBurstChance,!1,u)}e.talentTree.column3Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Oe(1,1,1,u=1+.01*e.talentTree.column3Row1Points,1,1),!0,$e.supportPowerRelay,!1),e.talentTree.column3Row2Points>0&&(u=1-.02*e.talentTree.column3Row2Points,this.AddRelayEffect(n,e,r*c,new Oe(0,0,0,0,0,0),!1,$e.supportAbilityCooldown,!1,u)),e.talentTree.column3Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Oe(1,1,1,1,u=1+.01*e.talentTree.column3Row3Points,1),!0,$e.supportFocusRelay,!1),e.talentTree.column3Row4Points>0&&(u=1+.02*e.talentTree.column3Row4Points,this.AddRelayEffect(n,e,r*c,new Oe(1,1,1,1,1,1),!0,$e.supportAbilityEfficiency,!1,u))}}batonEquipmentCheck(e,n,r,a=1){if(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.getEquippedItemName()===this.globalService.getEquipmentName(Je.redBaton)){var o=1.1,s=this.globalService.globalVar.modifiers.find(C=>"redBatonEquipmentModifier"===C.text);void 0!==s&&(o=s.value),this.AddRelayEffect(n,e,r*a,new Oe(o,1,1,1,1,1),!0,$e.redBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Je.blueBaton)){var l=1.1,c=this.globalService.globalVar.modifiers.find(C=>"blueBatonEquipmentModifier"===C.text);void 0!==c&&(l=c.value),this.AddRelayEffect(n,e,r*a,new Oe(1,1,1,1,l,1),!0,$e.blueBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Je.violetBaton)){var u=1.1,d=this.globalService.globalVar.modifiers.find(C=>"violetBatonEquipmentModifier"===C.text);void 0!==d&&(u=d.value),this.AddRelayEffect(n,e,r*a,new Oe(1,1,1,u,1,1),!0,$e.violetBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Je.greenBaton)){var m=1.1,v=this.globalService.globalVar.modifiers.find(C=>"greenBatonEquipmentModifier"===C.text);void 0!==v&&(m=v.value),this.AddRelayEffect(n,e,r*a,new Oe(1,1,1,1,1,m),!0,$e.greenBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Je.orangeBaton)){var _=1.1,y=this.globalService.globalVar.modifiers.find(C=>"orangeBatonEquipmentModifier"===C.text);void 0!==y&&(_=y.value),this.AddRelayEffect(n,e,r*a,new Oe(1,_,1,1,1,1),!0,$e.orangeBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Je.yellowBaton)){var S=1.1,T=this.globalService.globalVar.modifiers.find(C=>"yellowBatonEquipmentModifier"===C.text);void 0!==T&&(S=T.value),this.AddRelayEffect(n,e,r*a,new Oe(1,1,S,1,1,1),!0,$e.yellowBaton,!1)}}prepareRacingLeg(e,n){e.pathData.forEach(r=>{r.currentStumbleOpportunity=0,r.checkedForBurst=!1,r.checkedForNineTails=!1,r.driftAmount=0,r.didAnimalStumble=!1,r.checkedForDrift=!1}),this.checkForBlinders(e,n)}checkForBlinders(e,n){if(n.getEquippedItemName()===this.globalService.getEquipmentName(Je.blinders)){var r=.5;e.terrain.maxSpeedModifier<1&&(e.terrain.maxSpeedModifier=1-(1-e.terrain.maxSpeedModifier)*r),e.terrain.accelerationModifier<1&&(e.terrain.accelerationModifier=1-(1-e.terrain.accelerationModifier)*r),e.terrain.staminaModifier<1&&(e.terrain.staminaModifier=1-(1-e.terrain.staminaModifier)*r),e.terrain.powerModifier<1&&(e.terrain.powerModifier=1-(1-e.terrain.powerModifier)*r),e.terrain.focusModifier<1&&(e.terrain.focusModifier=1-(1-e.terrain.focusModifier)*r),e.terrain.adaptabilityModifier<1&&(e.terrain.adaptabilityModifier=1-(1-e.terrain.adaptabilityModifier)*r)}}getPrelayEffects(e,n,r,a,o,s,l,c,u){null!==n&&void 0!==c&&n.talentTree.talentTreeType===ht.support&&n.talentTree.column1Row4Points>0&&this.endOfLegRelayEffectCheck(n,e,o,s,l,c,u,a,void 0,void 0,void 0,.03*n.talentTree.column1Row4Points)}AddRelayEffect(e,n,r,a,o,s,l,c,u=!1){var d=new tf;if(d.remainingRelayMeters=r,d.relayAffectedStatRatios=a,d.isMultiplicative=o,d.effectType=s,d.additionalValue=c,d.affectsAllRacers=l,n.talentTree.talentTreeType===ht.support&&n.talentTree.column1Row2Points>0){var m=1+.02*n.talentTree.column1Row2Points;d.isMultiplicative?(d.relayAffectedStatRatios.topSpeed>1&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*m),d.relayAffectedStatRatios.acceleration>1&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*m),d.relayAffectedStatRatios.endurance>1&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*m),d.relayAffectedStatRatios.power>1&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*m),d.relayAffectedStatRatios.focus>1&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*m),d.relayAffectedStatRatios.adaptability>1&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*m),void 0!==d.additionalValue&&d.additionalValue>1&&(d.additionalValue*=m)):(d.relayAffectedStatRatios.topSpeed>0&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*m),d.relayAffectedStatRatios.acceleration>0&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*m),d.relayAffectedStatRatios.endurance>0&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*m),d.relayAffectedStatRatios.power>0&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*m),d.relayAffectedStatRatios.focus>0&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*m),d.relayAffectedStatRatios.adaptability>0&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*m),void 0!==d.additionalValue&&d.additionalValue>0&&(d.additionalValue*=m))}if(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix)if(this.globalService.globalVar.eventRaceData.queuedRelayEffects.some(y=>y.effectType===s))if(this.lookupService.relayEffectTypeStacksEffectiveness(s))null!=(v=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(y=>y.effectType===s))&&(v.relayAffectedStatRatios.addCurrentRacingStats(a),void 0!==v.additionalValue&&void 0!==d.additionalValue&&(v.additionalValue+=d.additionalValue));else{var v;null!=(v=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(S=>S.effectType===s))&&(v.remainingRelayMeters+=r)}else this.globalService.globalVar.eventRaceData.queuedRelayEffects.push(d);else if(l){var _=this.selectedRace.raceLegs.findIndex(y=>y.courseType===e.raceCourseType);this.selectedRace.raceLegs.length>_&&this.selectedRace.raceLegs.slice(_+1).forEach(y=>{var S=this.racingAnimals.find(T=>T.raceCourseType===y.courseType);null!=S&&null!=S.raceVariables&&null!=S.raceVariables.relayEffects&&S.raceVariables.relayEffects.push(d)})}else null!=e&&null!=e.raceVariables&&null!=e.raceVariables.relayEffects&&e.raceVariables.relayEffects.push(d)}didAnimalStumble(e,n,r,a,o,s,l,c,u,d){if(e.raceVariables.stumbled||0===n.frequencyOfStumble||e.type===X.Gecko&&"Sticky"===e.ability.name&&e.ability.abilityInUse||e.type===X.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||e.type===X.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;var m=n.length/n.stumbleOpportunities;if(n.currentStumbleOpportunity===n.stumbleOpportunities&&n.routeDesign!==Xe.Regular&&e.type===X.Goat&&"Sure-footed"===e.ability.name&&(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCap||(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount+=1),o.permanentAdaptabilityIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,a.powerModifier,l)/100,this.globalService.increaseAbilityXp(e),n.currentStumbleOpportunity+=1)),n.currentStumbleOpportunity*m<r){n.currentStumbleOpportunity+=1;var _=250;if(this.utilityService.getRandomNumber(1,100)<=n.frequencyOfStumble/(_+=s*a.adaptabilityModifier)*n.length){if(e.getEquippedItemName()===this.globalService.getEquipmentName(Je.headband)){var T=3,C=this.globalService.globalVar.modifiers.find(O=>"headbandEquipmentModifier"===O.text);if(void 0!==C&&(T=C.value),e.raceVariables.headbandStumblePreventionCount<T)return e.raceVariables.headbandStumblePreventionCount+=1,d.addRaceUpdate(c,u+"'s headband prevents them from stumbling."),!1}return n.didAnimalStumble=!0,!0}}return!1}didAnimalLoseFocus(e,n,r,a,o,s,l,c,u,d){if(e.raceVariables.lostFocus||e.type===X.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(this.currentLostFocusOpportunity*(r/n)<a){this.currentLostFocusOpportunity+=1;var _=this.globalService.globalVar.modifiers.find(O=>"focusModifier"===O.text),y=d*o.focusModifier*(void 0===_?.75:_.value);if(e.raceVariables.metersSinceLostFocus<y)return!1;var T=(e.raceVariables.metersSinceLostFocus-y)/e.currentStats.focusMs*100;return this.utilityService.getRandomNumber(1,100)<=T&&(u.didAnimalLoseFocus=!0),!0}return!1}increasePersistentAbilityXp(e){(e.type===X.Cheetah&&"Giving Chase"===e.ability.name||e.type===X.Hare&&"Prey Instinct"===e.ability.name||e.type===X.Hare&&"Nap"===e.ability.name||e.type===X.Goat&&"In The Rhythm"===e.ability.name||e.type===X.Shark&&"Feeding Frenzy"===e.ability.name||e.type===X.Shark&&"Blood In The Water"===e.ability.name||e.type===X.Octopus&&"Buried Treasure"===e.ability.name||e.type===X.Penguin&&"Wild Toboggan"===e.ability.name||e.type===X.Fox&&"Fleeting Speed"===e.ability.name)&&this.globalService.increaseAbilityXp(e,3)}abilityRedundancyCheck(e,n,r,a,o,s){return!(e.ability.oneTimeEffect&&e.ability.abilityUsed||"Second Wind"===e.ability.name&&e.type===X.Horse&&e.raceVariables.recoveringStamina||"Pacemaker"===e.ability.name&&e.type===X.Horse&&n===e.currentStats.maxSpeedMs)&&(!("Leap"===e.ability.name&&e.type===X.Monkey&&this.lookupService.GetAbilityEffectiveAmount(e,a.terrain.powerModifier,s)<o)&&!("Sticky"===e.ability.name&&e.type===X.Gecko&&0===r.frequencyOfStumble))}useAbility(e,n,r,a,o,s,l){if(e.ability.abilityUsed=!0,e.type===X.Horse&&("Second Wind"===e.ability.name||"Pacemaker"===e.ability.name)&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Cheetah&&"Sprint"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Hare&&"Awareness"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Monkey){if("Landslide"===e.ability.name){var c=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),u=n.length/this.timeToComplete;this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=c/(u=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=c/u,this.globalService.increaseAbilityXp(e)}"Leap"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e))}if(e.type===X.Gecko&&"Sticky"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Dolphin&&"Echolocation"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Octopus&&"Propulsion"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e)),e.type===X.Penguin&&"Careful Toboggan"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Caribou&&"Great Migration"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Salamander){if("Cold Blooded"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a);var d=s/r.distance;d>.5&&(d=.5-(d-.5));var m=.6*d;e.currentStats.stamina+=o*m,e.currentStats.stamina>o&&(e.currentStats.stamina=o),l.coldBloodedIncreaseMultiplier=1+m}"Burrow"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),"Heat Up"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e))}if(e.type===X.Fox&&"Trickster"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e);var v=this.utilityService.getRandomInteger(1,6);1===v&&(e.ability.tricksterStatLoss="Acceleration"),2===v&&(e.ability.tricksterStatLoss="Max Speed"),3===v&&(e.ability.tricksterStatLoss="Adaptability"),4===v&&(e.ability.tricksterStatLoss="Focus"),5===v&&(e.ability.tricksterStatLoss="Stamina",e.currentStats.stamina-=.25*o,e.currentStats.stamina<0&&(e.currentStats.stamina=0)),6===v&&(e.ability.tricksterStatLoss="Power");var _=this.utilityService.getRandomInteger(1,6);_===v&&(_+=1)>6&&(_=1),1===_&&(e.ability.tricksterStatGain="Acceleration"),2===_&&(e.ability.tricksterStatGain="Max Speed"),3===_&&(e.ability.tricksterStatGain="Adaptability"),4===_&&(e.ability.tricksterStatGain="Focus"),5===_&&(e.ability.tricksterStatGain="Stamina",e.currentStats.stamina+=.5*o,e.currentStats.stamina>o&&(e.currentStats.stamina=o)),6===_&&(e.ability.tricksterStatGain="Power"),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a)}}checkForNineTailsBuff(e,n,r,a,o,s,l,c){if(!e.checkedForNineTails){e.checkedForNineTails=!0;var u=this.utilityService.getRandomInteger(1,4),d=new Z;d.value=l,1===u?(n.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Acceleration)"),s.raceUpdates.push(d)):2===u?(n.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Max Speed)"),s.raceUpdates.push(d)):3===u?(n.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Adaptability)"),s.raceUpdates.push(d)):4===u&&(n.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Focus)"),s.raceUpdates.push(d)),this.globalService.increaseAbilityXp(r)}}getNineTailsBuffCount(e,n){return n.filter(r=>r[0]===e).length}getModifiedAdaptability(e,n,r,a,o,s,l,c,u,d,m,v){var _=e.currentStats.adaptabilityMs*r;return e.type===X.Dolphin&&"Echolocation"===e.ability.name&&e.ability.abilityInUse&&(_*=1.75),e.type===X.Goat&&"Sure-footed"===e.ability.name&&(_*=n.permanentAdaptabilityIncreaseMultiplier),e.type===X.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(_*=1.4),e.type===X.Penguin&&"Careful Toboggan"===e.ability.name&&e.ability.abilityInUse&&(_*=1.6),e.type===X.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(_*=.75),e.type===X.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(_*=1.5),e.type===X.Fox&&"Nine Tails"===e.ability.name&&(_*=1+.15*this.getNineTailsBuffCount("Adaptability",a)),null!==l&&void 0!==c&&"Navigator"===l.ability.name&&l.type===X.Dolphin&&o.distance-s<=this.lookupService.GetAbilityEffectiveAmount(l,c.terrain.powerModifier,r)&&(_+=.25*l.currentStats.adaptabilityMs,l.ability.abilityInUse||u.addRaceUpdate(d,m+" is shown the way by "+v+"'s "+(null==l?void 0:l.ability.name)+" ability."),l.ability.abilityInUse=!0),e.getEquippedItemName()===this.globalService.getEquipmentName(Je.athleticTape)&&e.raceVariables.isBursting&&(_*=1.5),e.talentTree.talentTreeType===ht.sprint&&!e.raceVariables.hasLostFocusDuringRace&&(_*=1+5*e.talentTree.column1Row2Points/100),_}getModifiedFocus(e,n,r,a){var o=e.currentStats.focusMs*n;return e.type===X.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(o*=1.4),e.type===X.Hare&&"Nap"===e.ability.name&&(o*=2),e.type===X.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(o*=.75),e.type===X.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(o*=1.5),e.type===X.Fox&&"Nine Tails"===e.ability.name&&(o*=1+.15*this.getNineTailsBuffCount("Focus",r)),e.type===X.Salamander&&"Cold Blooded"===e.ability.name&&e.ability.abilityInUse&&(o*=a.coldBloodedIncreaseMultiplier),e.getEquippedItemName()===this.globalService.getEquipmentName(Je.athleticTape)&&e.raceVariables.isBursting&&(o*=1.5),e.talentTree.talentTreeType===ht.sprint&&(o*=1-.005*e.talentTree.column2Row4Points*e.raceVariables.velocityReachesMaxSpeedCount),o}handleTundraDrift(e,n,r,a,o,s,l,c,u,d,m,v,_){var y=!1;if(!n.checkedForDrift){n.checkedForDrift=!0;var S=80,T=-80;if((n.routeDesign===Xe.Cavern||r.routeDesign===Xe.Cavern)&&(S=60,T=-60),e.raceVariables.icyCurrentYAmount>=S||e.raceVariables.icyCurrentYAmount<=T||a)return(e.raceVariables.icyCurrentYAmount>=S||e.raceVariables.icyCurrentYAmount<=T)&&(y=!0),n.driftAmount=-e.raceVariables.icyCurrentYAmount,e.raceVariables.icyCurrentYAmount=0,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,y;var C=this.utilityService.getRandomNumber(1,100),O=1e3,G=n.frequencyOfDrift/(O+=o*s.adaptabilityModifier)*n.length;if(C<G){n.didAnimalStumble=!0,(G-=C)<=0&&(G=0);var K=this.utilityService.getRandomInteger(1,2);e.raceVariables.icyCurrentDirectionUp=1===K;var se=100,de=20,be=this.globalService.globalVar.modifiers.find(Ae=>"maxDriftAmountModifier"===Ae.text);void 0!==be&&(de=be.value),"Wild Toboggan"===e.ability.name&&e.type===X.Penguin&&(de*=2,se*=2,e.ability.abilityInUse=!0),"Quick Toboggan"===e.ability.name&&e.type===X.Penguin&&(e.ability.abilityInUse=!1);var he=0;(he=G>se?de:G/se*de)>de&&(he=de),e.raceVariables.icyCurrentDirectionUp?e.raceVariables.icyCurrentYAmount-=he:e.raceVariables.icyCurrentYAmount+=he,e.raceVariables.icyCurrentYAmount>=S&&(e.raceVariables.icyCurrentYAmount=S),e.raceVariables.icyCurrentYAmount<=T&&(e.raceVariables.icyCurrentYAmount=T),m.addRaceUpdate(_,v+" drifts to the side, losing "+he.toFixed(2)+"% max speed."),n.driftAmount=e.raceVariables.icyCurrentDirectionUp?-he:he,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount}else n.driftAmount=0,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,"Quick Toboggan"===e.ability.name&&e.type===X.Penguin&&(m.addRaceUpdate(_,v+" slides through without drifting, gaining speed."),this.globalService.increaseAbilityXp(e),d.permanentMaxSpeedIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,s.powerModifier,u)/100,e.ability.abilityInUse=!0);return y}}handleLavaFall(e,n,r,a,o,s,l,c){for(var u=!1,d=n/this.frameModifier,m=o/r,v=[.4,.45,.5,.55,.6],_=[],y=0;y<v.length;y++){var S=m*v[y],T=d/S;T>1&&(T=1),_.push(Math.round(1e5*T)/1e5);var C=a>v[y]*o,O=C!=c[y];c[y]=C,d>=S&&O&&(e.type===X.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||(s.addRaceUpdate(l,"Lava spills out onto the course, forcing you to evacuate."),u=!0))}return this.selectedRace.raceUI.lavaFallPercentByFrame.push(_),u}handleRacePositionByFrame(e,n,r,a){var o=this.lookupService.getTotalRacersByRace(e),s=o,l=.25,c=this.globalService.globalVar.modifiers.find(O=>"trainingTrackPaceModifier"===O.text);if(void 0!==c&&(l=c.value),e.localRaceType===Qt.Track)for(var u=0;u<o-1;u++)a>e.length/(this.timeToComplete/(1+l*u))*(r/this.frameModifier)&&(s=o-(u+1));else{var v=n*(r/this.frameModifier),_=0;if(this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(v+=_=n*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),2===o)a>v&&(s=1);else if(3===o){a>v&&(s=2);var S=.75,T=this.globalService.globalVar.modifiers.find(O=>"moneyMarkPaceModifier"===O.text);null!=T&&(S=T.value),a>e.length/(this.timeToComplete*S)*(r/this.frameModifier)+_&&(s=1)}}e.raceUI.racePositionByFrame.push(s)}carryOverEventRaceSegmentData(e,n,r,a,o,s,l,c,u,d,m,v,_){var y=new Kh;return y.velocity=n,y.stamina=e.currentStats.stamina,y.permanentMaxSpeedIncreaseMultiplier=r,y.permanentAdaptabilityIncreaseMultiplier=a,y.permanentMaxSpeedIncreaseObjMultiplier=o,y.feedingFrenzyIncreaseMultiplier=s,y.greatMigrationAccelerationIncreaseAdditive=l,y.coldBloodedIncreaseMultiplier=c,y.fleetingSpeedIncreaseMultiplier=u,y.racingAnimalType=e.type,y.deepBreathingStaminaGain=m,y.longDistanceTalentIncreaseAccelerationWithLowVelocity=v,y.maxSpeedFloor=_,d.length>0&&d.forEach(S=>{y.nineTailsBuffs.push(S)}),e.raceVariables.relayEffects.length>0&&e.raceVariables.relayEffects.forEach(S=>{y.relayEffects.push(S)}),this.globalService.globalVar.eventRaceData.animalData.forEach(S=>{S.associatedAnimalType===e.type&&(y.statLossFromExhaustion=S.exhaustionStatReduction)}),y.raceVariables=e.raceVariables.makeCopy(),y}setStaminaLossForEventAnimal(e,n){this.globalService.globalVar.eventRaceData.animalData.forEach(r=>{r.associatedAnimalType===n&&(r.exhaustionStatReduction=e)})}}return t.\u0275fac=function(e){return new(e||t)(Le(Rt),Le(hn),Le(Ri),Le($v))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let Kv=(()=>{class t{constructor(e,n,r){this.globalService=e,this.lookupService=n,this.utilityService=r,this.gameVersions=[1.09,1.08,1.07,1.06,1.05,1.04,1.03,1.02,1.01,1]}getListAscended(){var e=[];return this.gameVersions.forEach(n=>{e.unshift(n)}),e}getLatestChanges(){return this.getVersionChanges(this.gameVersions[0])}getAllChanges(){var e=[];return this.gameVersions.forEach(n=>{e.push(this.getVersionChanges(n))}),e}getVersionChanges(e){var n="";return 1===e&&(n="Initial Launch!"),1.01===e&&(n="Improved UI by adding better notifications and refactoring some clickable text.\n\nBreeding Grounds specialization now grants a 10% bonus to Breeding XP from Training, up from 5%.\n\nRefactored Breed Progression:\n<ul><li>Breed Levels now grant a 5% bonus to racing stats as opposed to 2%. Breed Levels now require twice as much XP.</li><li>Animals have had their breed levels reduced by half to balance this change. Despite this, you should notice a small increase in stats.</li></ul>"),1.02===e&&(n="Event Races now active!\n<ul><li>Select an event deck (now relay team) and run the marathon-style Grand Prix.</li><li>Run a single race over the course of multiple days to unlock new rewards.</li><li>Mix and match powerful Relay abilities with strong long distance racers and see how far you can go!</li></ul>\nMore UI improvements. (better contrast in colors, differentiation of text through various means, etc)\n\nBug fixes."),1.03===e&&(n="Talents are now active!\n<ul><li>Complete Rainbow Races to start earning Talent Points for your animals.</li><li>Each animal can select a unique talent tree and start racing in its own unique way.</li></ul>\nMore UI improvements. (specifically around items/equipment)\n\nBug fixes."),1.04===e&&(n="Ability rebalancing (view Discord Change Log for full info).\n\nChanges to Event Races<ul><li>Leg length adjusts based on your game progress so that the race always feels smooth.</li><li>Certain abilities have different effects during events, viewable when changing abilities.</li><li>Abilities that can trigger multiple times or have a cap are now displayed on the Event Race Info page.</li></ul>\nBug fixes (view Discord Change Log for full info)."),1.05===e&&(n="Changed all references of 'Decks' to 'Relay Teams' for ease of understanding and better theming.\n\nBug fixes and UI improvements (view Discord Change Log for full info)."),1.06===e&&(n="Barns can now reset their specialization. By clicking or tapping your Barn Upgrade level, you'll see an overview of your barn's benefits and the option to reset your specialization at the cost of losing 20% of your Barn Upgrade level.\n\nCost for Mangoes now scale. 1 Mango from the shop costs an extra 50 per purchase and 2 Mangoes from the event shop costs an extra 1 token per purchase.\n\nThe impact that Renown has on coin gain from race is now logarithmic. After reaching 50 renown, the coin gain will start to slightly fall off. \n\nAttractions now give slightly more Coins per specialization level.\n\nAdded setting to automatically start the event race when the time period begins. This will also catch up on any time you were away between the start of the race and when you first return to the game.\n\nGrand Prix now requires breed level 25 instead of 50.\n\nIncubator now takes 2 minutes instead of 5 minutes.\n\nUI Improvements and Bug Fixes (view Discord Change Log for full info)."),1.07===e&&(n="Sectioned out FAQs, added calculators to make planning easier.\n\nVarious minor bug fixes and UI improvements."),1.08===e&&(n="Increased coin gain from Mono and Duo races. \n\nAdjusted free races so that new course types do not show up until you've completed a circuit rank with that type. \n\nAdded circuit rank up reward for 1000 coins at rank 9 and 1500 coins at rank 23.<ul><li>Those who have already passed these ranks will immediately receive these coins.</li></ul>\nMade Acceleration coaching slightly easier. \n\nAdded warning before first Breed to better explain what will happen.\n\nMinor UI improvements for mobile."),1.09===e&&(n="<em>Just to preface, this is the first set of changes of several intended to make the early game flow better, coin gain and progression feel less punishing, and doing a better job of putting players in the intended gameplay loops. Look forward to more changes soon.</em>\n\nMade changes to verbiage in Tutorial and FAQ section for clarity and better guiding on how to play. \n\nReadjusted certain trainings so that there was clear progression going up from small to medium barns.<ul><li><b>Footwork</b> now gives .25 Acceleration as opposed to .5 Acceleration.</li><li><b>Dodge Ball</b> now gives 1 Adaptability as opposed to .5 Adaptability and takes 60 seconds to complete as opposed to 75 seconds.</li></ul>Some adjustments were made to passive game time while the game is not active.<ul><li>Small barns now allow for 4 hours worth of training, up from 2 hours.</li><li>Medium barns now allow for 8 hours worth of training, up from 4 hours.</li><li>Large barns now allow for 12 hours worth of training, up from 8 hours.</li><li>Team Managers will now cover 8 hours of inactive time worth of free races, up from 2 hours.</li></ul>The base price for food has been reduced.<ul><li>All stat increasing food has been reduced to 10 Coins. The goal for these items is to give you a quick boost after breeding to cut down on wait time. This new price should make that a more viable option.</li><li>The base price for Mangoes has been reduced to 100 Coins. For those who have already purchased Mangoes and the price has begun to increase, your total cost will be reduced by 400 Coins to match up with this change.</li></ul>Attractions now provide significantly more income. The new formula is 20 Coins * Specialization Level added on top of the previous amount. Check the calculator in the FAQ section to see exactly how much it provides at any given level.\n\nFor the first 10 barn upgrade levels, the cost is now 50 coins instead of 100.\n\nCertain RNG elements were not evenly distributed (Coaching for example) and that issue has been resolved. \n\nThere have been bugs, balance issues, and some concerns about reward scaling with the Grand Prix. I have taken the Grand Prix down for now while I work on these issues. Look forward to it coming back up in a better state in the next couple of weeks.\n\nAdditional minor bug fixes."),n}getDateForVersion(e){var n=new Date;return 1===e&&(n=new Date("2022-07-08 12:00:00")),1.01===e&&(n=new Date("2022-07-10 12:00:00")),1.02===e&&(n=new Date("2022-07-18 12:00:00")),1.03===e&&(n=new Date("2022-07-24 12:00:00")),1.04===e&&(n=new Date("2022-07-27 12:00:00")),1.05===e&&(n=new Date("2022-07-29 12:00:00")),1.06===e&&(n=new Date("2022-08-04 12:00:00")),1.07===e&&(n=new Date("2022-08-06 12:00:00")),1.08===e&&(n=new Date("2022-08-07 12:00:00")),1.09===e&&(n=new Date("2022-08-11 12:00:00")),n.toDateString().replace(/^\S+\s/,"")}updatePlayerVersion(){this.getListAscended().forEach(e=>{if(this.globalService.globalVar.currentVersion<e){if(1.01===e){this.globalService.globalVar.notifications=new af;var n=this.globalService.globalVar.modifiers.find(fe=>"breedLevelStatModifier"===fe.text);void 0!==n&&(n.value=.05);var r=this.globalService.globalVar.modifiers.find(fe=>"breedGaugeMaxIncreaseModifier"===fe.text);void 0!==r&&(r.value=10);var a=this.globalService.globalVar.modifiers.find(fe=>"breedingGroundsSpecializationModifier"===fe.text);void 0!==a&&(a.value=.1),this.globalService.globalVar.animals.forEach(fe=>{fe.breedLevel=Math.round(fe.breedLevel/2),fe.breedGaugeXp=2*fe.breedGaugeXp});var o=this.globalService.globalVar.animalDecks.find(fe=>fe.isPrimaryDeck);null!=o&&(o.isEventDeck=!0)}else if(1.02===e){this.globalService.globalVar.eventRaceData=new Li,this.globalService.globalVar.modifiers.push(new Z(.1,"exhaustionStatLossMinimumModifier")),this.globalService.globalVar.modifiers.push(new Z(5e6,"metersPerCoinsGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Z(2e7,"metersPerRenownGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Z(100,"grandPrixCoinRewardModifier")),this.globalService.globalVar.modifiers.push(new Z(5,"grandPrixRenownRewardModifier")),this.globalService.globalVar.modifiers.push(new Z(5e7,"grandPrixToken1MeterModifier")),this.globalService.globalVar.modifiers.push(new Z(1e8,"grandPrixToken2MeterModifier")),this.globalService.globalVar.modifiers.push(new Z(25e7,"grandPrixToken3MeterModifier")),this.globalService.globalVar.modifiers.push(new Z(5e8,"grandPrixToken4MeterModifier")),this.globalService.globalVar.modifiers.push(new Z(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Z(.02,"exhaustionGainGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Z(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Z(75,"grandPrixBreedLevelRequiredModifier")),this.globalService.globalVar.modifiers.push(new Z(2,"scaryMaskEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Z(1.2,"runningShoesEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Z(.9,"incenseEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Z(.5,"athleticTapeEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Z(.2,"weatherMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new Z(.03,"focusMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new Z(.01,"stumbleMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new Z(.05,"segmentCompleteMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new Z(5,"whistleModifier")),this.globalService.globalVar.modifiers.push(new Z(10,"goldenWhistleModifier")),this.globalService.InitializeTokenShop();var s=this.globalService.globalVar.shop.find(fe=>"Specialty"===fe.name);if(null!=s){var l=new it;l.name="Whistle",l.purchasePrice.push(this.globalService.getCoinsResourceValue(2500)),l.basePurchasePrice.push(this.globalService.getCoinsResourceValue(2500)),l.totalShopQuantity=1,l.canHaveMultiples=!1,l.isAvailable=this.lookupService.isItemUnlocked("coaching"),l.type=Y.Specialty,s.itemList.push(l);var c=new it;c.name="Golden Whistle",c.purchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),c.basePurchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),c.totalShopQuantity=1,c.canHaveMultiples=!1,c.isAvailable=!1,c.type=Y.Specialty,s.itemList.push(c)}this.globalService.globalVar.animals.forEach(fe=>{fe.allTrainingTracks.noviceTrack.rewards.filter(Ee=>"Bonus Breed XP Gain From Local Races"===Ee.name).forEach(Ee=>{Ee.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(fe=>{fe.allTrainingTracks.intermediateTrack.rewards.filter(Ee=>"Bonus Breed XP Gain From Local Races"===Ee.name).forEach(Ee=>{Ee.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(fe=>{fe.allTrainingTracks.masterTrack.rewards.filter(Ee=>"Bonus Breed XP Gain From Local Races"===Ee.name).forEach(Ee=>{Ee.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(fe=>{fe.breedGaugeMax=200+10*(fe.breedLevel-1)})}else if(1.03===e)this.globalService.globalVar.animals.forEach(fe=>{(isNaN(Number(fe.breedLevel))||null==fe.breedLevel)&&(fe.breedLevel=1)});else if(1.04===e)this.fixTrackRewardsBug(),this.globalService.globalVar.notifications.isEventRaceNowActive=!1,this.globalService.globalVar.animals.forEach(fe=>{if(fe.type===X.Cheetah){var Ee=fe.availableAbilities.find(St=>"Giving Chase"===St.name);void 0!==Ee&&(Ee.efficiency=.5),"Giving Chase"===fe.ability.name&&(fe.ability.efficiency=.5);var Kt=fe.availableAbilities.find(St=>"On The Hunt"===St.name);void 0!==Kt&&(Kt.efficiency=.1),"On The Hunt"===fe.ability.name&&(fe.ability.efficiency=.1)}if(fe.type===X.Goat){var ut=fe.availableAbilities.find(St=>"Deep Breathing"===St.name);void 0!==ut&&(ut.efficiency=.25),"Deep Breathing"===fe.ability.name&&(fe.ability.efficiency=.25);var nn=fe.availableAbilities.find(St=>"In The Rhythm"===St.name);void 0!==nn&&(nn.efficiency=.1),"In The Rhythm"===fe.ability.name&&(fe.ability.efficiency=.1);var on=fe.availableAbilities.find(St=>"Sure-footed"===St.name);void 0!==on&&(on.efficiency=.5),"Sure-footed"===fe.ability.name&&(fe.ability.efficiency=.5)}if(fe.type===X.Gecko){var ft=fe.availableAbilities.find(St=>"Night Vision"===St.name);void 0!==ft&&(ft.efficiency=.2),"Night Vision"===fe.ability.name&&(fe.ability.efficiency=.2)}if(fe.type===X.Shark){var gn=fe.availableAbilities.find(St=>"Blood In The Water"===St.name);void 0!==gn&&(gn.efficiency=.1),"Blood In The Water"===fe.ability.name&&(fe.ability.efficiency=.1)}if(fe.type===X.Octopus){var Bn=fe.availableAbilities.find(St=>"Buried Treasure"===St.name);void 0!==Bn&&(Bn.efficiency=1),"Buried Treasure"===fe.ability.name&&(fe.ability.efficiency=1);var zn=fe.availableAbilities.find(St=>"Big Brain"===St.name);void 0!==zn&&(zn.efficiency=2),"Big Brain"===fe.ability.name&&(fe.ability.efficiency=2)}if(fe.type===X.Penguin){var $n=fe.availableAbilities.find(St=>"Wild Toboggan"===St.name);void 0!==$n&&($n.efficiency=4),"Wild Toboggan"===fe.ability.name&&(fe.ability.efficiency=4);var kn=fe.availableAbilities.find(St=>"Quick Toboggan"===St.name);void 0!==kn&&(kn.efficiency=.1),"Quick Toboggan"===fe.ability.name&&(fe.ability.efficiency=.1)}if(fe.type===X.Caribou){var qn=fe.availableAbilities.find(St=>"Herd Mentality"===St.name);void 0!==qn&&(qn.efficiency=.5),"Herd Mentality"===fe.ability.name&&(fe.ability.efficiency=.5);var fi=fe.availableAbilities.find(St=>"Special Delivery"===St.name);void 0!==fi&&(fi.efficiency=.05),"Special Delivery"===fe.ability.name&&(fe.ability.efficiency=.05)}if(fe.type===X.Fox){var pi=fe.availableAbilities.find(St=>"Fleeting Speed"===St.name);void 0!==pi&&(pi.efficiency=1.5),"Fleeting Speed"===fe.ability.name&&(fe.ability.efficiency=1.5)}}),void 0!==(u=this.globalService.globalVar.modifiers.find(fe=>"autoFreeRacesMaxIdleTimePeriodModifier"===fe.text))&&(u.value=7200);else if(1.05===e)null!=this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.isCatchingUp&&(this.globalService.globalVar.eventRaceData.isCatchingUp=!1),void 0!==(d=this.globalService.globalVar.modifiers.find(fe=>"grandPrixBreedLevelRequiredModifier"===fe.text))&&(d.value=50);else if(1.06===e){this.globalService.globalVar.previousEventRewards=[],this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Ee=>"Bonus Breed XP Gain From Training"!==Ee.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Ee=>"Bonus Breed XP Gain From Free Races"!==Ee.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Ee=>"Diminishing Returns per Facility Level"!==Ee.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Ee=>"Training Time Reduction"!==Ee.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Ee=>"Bonus Breed XP Gain From Circuit Races"!==Ee.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Ee=>"Bonus Talents"!==Ee.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(Ee=>"Orb Pendant"!==Ee.name),this.fixTrackRewardsBug(),this.globalService.globalVar.modifiers.push(new Z(.02,"burstMoraleBoostModifier"));var d,m=this.globalService.globalVar.modifiers.find(Ee=>"grandPrixRenownRewardModifier"===Ee.text);void 0!==m&&(m.value=3),void 0!==(d=this.globalService.globalVar.modifiers.find(Ee=>"grandPrixBreedLevelRequiredModifier"===Ee.text))&&(d.value=25),void 0!==this.globalService.globalVar.incubator&&(this.globalService.globalVar.incubator.timeToComplete=120),this.globalService.globalVar.settings.set("autoStartEventRace",!1)}else if(1.07===e){var v=0,_=0;if(this.globalService.globalVar.resources.forEach(fe=>{"Headband"===fe.name&&(v+=1,_+=fe.amount)}),v>1){var y=this.globalService.globalVar.resources.findIndex(fe=>"Headband"===fe.name);this.globalService.globalVar.resources.splice(y,1),void 0!==(S=this.globalService.globalVar.resources.find(fe=>"Headband"===fe.name))&&(S.amount=_)}var S,T=0,C=0;if(this.globalService.globalVar.resources.forEach(fe=>{"Blue Baton"===fe.name&&(T+=1,C+=fe.amount)}),T>1)y=this.globalService.globalVar.resources.findIndex(Kt=>"Blue Baton"===Kt.name),this.globalService.globalVar.resources.splice(y,1),void 0!==(S=this.globalService.globalVar.resources.find(Kt=>"Blue Baton"===Kt.name))&&(S.amount=C)}else if(1.08===e){if(this.globalService.globalVar.showBreedWarning=!1,void 0===this.globalService.globalVar.tutorials&&(this.globalService.globalVar.tutorials=new rf),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>9){var O=1e3;null==(j=this.globalService.globalVar.resources.find(fe=>"Coins"===fe.name))?this.globalService.globalVar.resources.push(new le("Coins",O)):j.amount+=O}var j;if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>23)O=1500,null==(j=this.globalService.globalVar.resources.find(Kt=>"Coins"===Kt.name))?this.globalService.globalVar.resources.push(new le("Coins",O)):j.amount+=O}else if(1.09===e){var u;void 0!==(u=this.globalService.globalVar.modifiers.find(Ee=>"autoFreeRacesMaxIdleTimePeriodModifier"===Ee.text))&&(u.value=28800);var G=this.globalService.globalVar.modifiers.find(Ee=>"smallBarnTrainingTimeModifier"===Ee.text);void 0!==G&&(G.value=14400);var K=this.globalService.globalVar.modifiers.find(Ee=>"mediumBarnTrainingTimeModifier"===Ee.text);void 0!==K&&(K.value=28800);var se=this.globalService.globalVar.modifiers.find(Ee=>"largeBarnTrainingTimeModifier"===Ee.text);void 0!==se&&(se.value=43200);var de=this.globalService.globalVar.trainingOptions.find(Ee=>Ee.trainingType===Ve.Footwork);void 0!==de&&(de.affectedStatRatios=new Oe(0,.25,0,0,0,1));var be=this.globalService.globalVar.trainingOptions.find(Ee=>Ee.trainingType===Ve.DodgeBall);void 0!==be&&(be.affectedStatRatios=new Oe(0,2.5,0,0,0,1),be.timeToComplete=60);var he=this.globalService.globalVar.shop.find(Ee=>"Food"===Ee.name);if(void 0!==he){var Ze=he.itemList.find(Ee=>"Apples"===Ee.name);void 0!==Ze&&(Ze.purchasePrice=[],Ze.purchasePrice.push(new le("Coins",10)));var Ct=he.itemList.find(Ee=>"Bananas"===Ee.name);void 0!==Ct&&(Ct.purchasePrice=[],Ct.purchasePrice.push(new le("Coins",10)));var vt=he.itemList.find(Ee=>"Strawberries"===Ee.name);void 0!==vt&&(vt.purchasePrice=[],vt.purchasePrice.push(new le("Coins",10)));var xt=he.itemList.find(Ee=>"Carrots"===Ee.name);void 0!==xt&&(xt.purchasePrice=[],xt.purchasePrice.push(new le("Coins",10)));var Ot=he.itemList.find(Ee=>"Turnips"===Ee.name);void 0!==Ot&&(Ot.purchasePrice=[],Ot.purchasePrice.push(new le("Coins",10)));var _t=he.itemList.find(Ee=>"Oranges"===Ee.name);void 0!==_t&&(_t.purchasePrice=[],_t.purchasePrice.push(new le("Coins",10)));var ve=he.itemList.find(Ee=>"Mangoes"===Ee.name);if(void 0!==ve){var R=ve.purchasePrice.find(Ee=>"Coins"===Ee.name);void 0!==R&&(R.amount-=400)}var Ye=this.globalService.globalVar.modifiers.find(Ee=>"attractionAmountModifier"===Ee.text);void 0!==Ye&&(Ye.value=20),this.globalService.stopGrandPrixRace()}}this.globalService.globalVar.currentVersion=e}})}fixTrackRewardsBug(){this.globalService.globalVar.animals.filter(e=>e.isAvailable).forEach(e=>{var n=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces(),r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces(),a=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining(),o=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(),s=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction(),l=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();e.miscStats.bonusBreedXpGainFromLocalRaces=0===e.miscStats.bonusLocalBreedXpCertificateCount?n:n+e.miscStats.bonusLocalBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromCircuitRaces=0===e.miscStats.bonusCircuitBreedXpCertificateCount?r:r+2*e.miscStats.bonusCircuitBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromTraining=0===e.miscStats.bonusTrainingBreedXpCertificateCount?a:a+e.miscStats.bonusTrainingBreedXpCertificateCount,e.miscStats.diminishingReturnsBonus=0===e.miscStats.bonusDiminishingReturnsCertificateCount?o:o+e.miscStats.bonusDiminishingReturnsCertificateCount,e.miscStats.trainingTimeReduction=s,e.miscStats.bonusTalents=l})}}return t.\u0275fac=function(e){return new(e||t)(Le(Rt),Le(hn),Le(Ri))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_D=(()=>{class t{constructor(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setProductionMode(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setDevMode(){this.devModeActive=!0,this.forceStartNewGame=!0,this.codeCreationMode=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var mt=(()=>{return(t=mt||(mt={}))[t.barn=0]="barn",t[t.raceselection=1]="raceselection",t[t.animals=2]="animals",t[t.relayTeams=3]="relayTeams",t[t.shop=4]="shop",t[t.incubator=5]="incubator",t[t.trainingtrack=6]="trainingtrack",t[t.talents=7]="talents",t[t.resources=8]="resources",t[t.faqs=9]="faqs",t[t.stats=10]="stats",t[t.settings=11]="settings",mt;var t})(),La=(()=>{return(t=La||(La={}))[t.regular=0]="regular",t[t.token=1]="token",La;var t})();let Zn=(()=>{class t{constructor(){this.switchView=new Qn(mt.barn),this.selectAnimalView=new Qn(new Dt),this.selectBarnView=new Qn(0),this.selectShopView=new Qn(La.regular),this.selectRaceView=new Qn(Ne.circuit)}setNewView(e){e!==this.switchView.value&&this.switchView.next(e)}getNewView(){return this.switchView.asObservable()}setAnimalView(e,n){n!==this.selectAnimalView.value&&this.selectAnimalView.next(n),e!==this.switchView.value&&this.switchView.next(e)}setAnimal(e){e!==this.selectAnimalView.value&&this.selectAnimalView.next(e)}getAnimalView(){return this.selectAnimalView.asObservable()}setBarnView(e,n){n!==this.selectBarnView.value&&this.selectBarnView.next(n),e!==this.switchView.value&&this.switchView.next(e)}setBarnNumber(e){e!==this.selectBarnView.value&&this.selectBarnView.next(e)}getBarnView(){return this.selectBarnView.asObservable()}setShopView(e,n){n!==this.selectShopView.value&&this.selectShopView.next(n),e!==this.switchView.value&&this.switchView.next(e)}getShopView(){return this.selectShopView.asObservable()}setRaceView(e,n){n!==this.selectRaceView.value&&this.selectRaceView.next(n),e!==this.switchView.value&&this.switchView.next(e)}getRaceView(){return this.selectRaceView.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class O4{}let yD=(()=>{class t{constructor(e){this.globalService=e}skipTutorial(){this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.globalVar.tutorials.currentTutorialId=9}getTutorialState(e){var n=new O4;return n.id=e,1===e&&(n.tutorialText="<b>Welcome to Cultura!</b> \n\n Cultura is the name of your soon to be state of the art animal racing facility. Train and nurture your animal companions and rise through the ranks by winning circuit competitions. Mix and match different racing teams and abilities to rise as far as you can!\n\nLet's take a tour. From this page, you can select a barn where you can assign and train animals. Currently, you have a fine racing horse already set up in your first barn. Select it and let's get to work. \n\n <b>Select 'Barn 1' outlined in red.</b>",n.associatedTab=mt.barn),2===e&&(n.tutorialText="You'll have to train your animals if you want them to win. There are only a few training options to choose from now, but as you grow you will find better and faster ways to improve. Each training will develop your animals in specific ways, improving the following base stats:\n\n<b>Speed</b>: Increase the max speed your animal can run in a race.\n<b>Acceleration</b>: Increase how quickly your animal gains speed.\n<b>Endurance</b>: Increase the distance your animal can run before tiring out and slowing down.\n<b>Power</b>: Increase the efficiency of your unique ability.\n<b>Focus</b>: Increase the distance your animal can run before losing focus and stopping abruptly.\n<b>Adaptability</b>: Increase the likelihood your animal won't stumble when racing through unique paths.\n\n<b>Select a training option out of the ones outlined in red.</b>",n.associatedTab=mt.barn),3===e&&(n.tutorialText="Here you can get a breakdown on the status of your animals. Here's your horse along with all of the stat information we just went over. If you need a refresher, hover over any of the stats to see what they do. There are a few other stats here to be mindful of:\n\n<b>Diminishing Returns</b>: After a base stat reaches the Diminishing Returns value, any additional training of that stat gets progressively weaker. Typically, you want to try and keep all of your base stats around your Diminishing Returns value for best results. You'll find multiple ways to increase your Diminishing Returns value as you progress.\n<b>Burst Chance</b>: As you race, your racer may enter Burst mode. This increases their overall velocity and allows them to exceed their Max Speed. This stat is based on a combination of Focus and Adaptability and is not affected by Diminishing Returns.\n<b>Burst Distance</b>: This controls how long you stay in Burst mode. This stat is based on your Power and is not affected by Diminishing Returns.\n\nCheck back here often as you proceed to assign new abilities and items to your animals, as well as breeding them to gain even faster offspring.\n\nNow that your horse has had time to take a few practice laps, let's see if they have what it takes to win a race!\n\n<b>Select the 'Race' option on the right (or in the menu if on mobile) bordered in red.</b>",n.associatedTab=mt.animals),4===e&&(n.tutorialText="You've got a few options here. Circuit races are all about deciding where you stand against the competition. If you win all of the circuit races for your rank, you'll move up into the next rank which may net you some nifty rewards and open up new opportunities for your facility. Improving your Circuit Rank should be your number one goal in becoming a top tier racing facility!\n\nYou can also run some free races against local competition. Only a few races are available at a time, but it can be a great way to get some practice in and make some quick money. It may be helpful at times to make sure you make quick work of free races before proceeding to the next circuit rank.\n\nFor now, let's see if you can make it up to the next circuit rank. It's a nice sunny day today and that might impact how your racer runs. If you hover over a race, you'll see how the terrain or weather might impact the conditions of the race. When in doubt, hovering over text usually gives you the information you need. Whenever you're ready, start the race. Your goal is to get to the finish line before your competition (represented as the little black dot). Good luck!\n\n<b>Click (or tap if you are on mobile) the race option outlined in red.</b>",n.associatedTab=mt.raceselection),5===e&&(n.tutorialText="Way to go! Exciting stuff there. Looks like you've got the gist of it for now. Keep racing, make some money, and build up your facility to be as great as it can be. Don't forget to train both your Horse and Monkey, and try to keep their stats well rounded. I'll check in with you again a little later. I look forward to seeing how far you can go!\n\n<b>Continue training your animals and completing Circuit Races to raise your Circuit Rank. If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",n.associatedTab=mt.raceselection),6===e&&(n.tutorialText="Nice, you've unlocked another racer! If you jump straight into a race with your untrained monkey, things probably aren't going to go well. As you race, you'll start making enough money to build more barns and train your animals simultaneously. For now, let's go back to the barn you have.\n\n<b>Select 'Barn 1' outlined in red.</b>",n.associatedTab=mt.raceselection),7===e&&(n.tutorialText="Let's see if we can start training your new racing Monkey. From here you can unassign an animal from a barn and bring a new animal in. As you start to branch out and race in different course types, you'll want to try and keep your team well balanced. It's not going to help you if you have a prized thoroughbred torching the competition if your follow up racer can barely make it out the gate.\n\nLet's start training your Monkey now.\n\n<b>Select 'Unassign' at the top of the screen and choose 'Monkey' to train.</b>",n.associatedTab=mt.barn),8===e&&(n.tutorialText="Nicely done. One last thing to talk about before I let you do whatever you want. First, select a training option from the options below so that your Monkey can start getting acclimated to racing. Then, click your animal's name to take a shortcut to the animal page and let's talk about breeding. If you haven't named your animal, its type is its name (so for example, Monkey's name is Monkey).\n\n<b>Select a training option below and then click (or tap if you are on mobile) your animal's type or name to jump to its page.</b>",n.associatedTab=mt.barn),9===e&&(n.tutorialText="Here you can see how close your animal is to being able to breed. Training and racing both contribute to this. Once you're ready, you can breed your animal and start racing the offspring. There's a strategic element to this. <b>After breeding, your animal will have its stats set back to their starting points, but the amount that the base stats contribute to the racing stats will increase.</b> You won't need to worry about breeding for awhile, but to eventually keep up with the competition you'll need to keep breeding and getting faster. Don't breed right before a big race though or you might have to spend some extra time training!\n\nThere's an ebb and flow to it. Race as far as your animals can go, breed them many times in quick succession to get a large percentage upgrade to stats, and then get back in the race. <b>This game is intended to be a slow burn and skews towards idle play. If you play very actively, you may find yourself needing to wait at certain points especially early on. Breeding once, training to max, breeding one time again, and so on is not recommended. Cycle between breeding in batches and then racing with your much higher stat modifiers.\n\nThat's all I have for you. Good luck and have fun!",n.associatedTab=mt.animals,this.globalService.globalVar.tutorials.tutorialCompleted=!0),n}openTutorialModal(){}}return t.\u0275fac=function(e){return new(e||t)(Le(Rt))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const N4=["addListener","removeListener"],V4=["addEventListener","removeEventListener"],F4=["on","off"];function sr(t,i,e,n){if(W(e)&&(n=e,e=void 0),n)return sr(t,i,e).pipe(jm(n));const[r,a]=function U4(t){return W(t.addEventListener)&&W(t.removeEventListener)}(t)?V4.map(o=>s=>t[o](i,s,e)):function B4(t){return W(t.addListener)&&W(t.removeListener)}(t)?N4.map(wD(t,i)):function L4(t){return W(t.on)&&W(t.off)}(t)?F4.map(wD(t,i)):[];if(!r&&ql(t))return si(o=>sr(o,i,e))(wi(t));if(!r)throw new TypeError("Invalid event target");return new Be(o=>{const s=(...l)=>o.next(1<l.length?l:l[0]);return r(s),()=>a(s)})}function wD(t,i){return e=>n=>t[e](i,n)}class H4 extends pe{constructor(i,e){super()}schedule(i,e=0){return this}}const cf={setInterval(...t){const{delegate:i}=cf;return((null==i?void 0:i.setInterval)||setInterval)(...t)},clearInterval(t){const{delegate:i}=cf;return((null==i?void 0:i.clearInterval)||clearInterval)(t)},delegate:void 0},CD={now:()=>(CD.delegate||Date).now(),delegate:void 0};class pu{constructor(i,e=pu.now){this.schedulerActionCtor=i,this.now=e}schedule(i,e=0,n){return new this.schedulerActionCtor(this,i).schedule(n,e)}}pu.now=CD.now;const SD=new class j4 extends pu{constructor(i,e=pu.now){super(i,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(i){const{actions:e}=this;if(this._active)return void e.push(i);let n;this._active=!0;do{if(n=i.execute(i.state,i.delay))break}while(i=e.shift());if(this._active=!1,n){for(;i=e.shift();)i.unsubscribe();throw n}}}(class G4 extends H4{constructor(i,e){super(i,e),this.scheduler=i,this.work=e,this.pending=!1}schedule(i,e=0){if(this.closed)return this;this.state=i;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(i,e,n=0){return cf.setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;cf.clearInterval(e)}execute(i,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(i,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,e){let r,n=!1;try{this.work(i)}catch(a){n=!0,r=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:i,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,re(n,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,super.unsubscribe()}}}),z4=SD;function Zv(t=0,i,e=z4){let n=-1;return null!=i&&(q0(i)?e=i:n=i),new Be(r=>{let a=function $4(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},a)})}const{isArray:q4}=Array;function TD(t){return 1===t.length&&q4(t[0])?t[0]:t}function DD(...t){return 1===(t=TD(t)).length?wi(t[0]):new Be(function W4(t){return i=>{let e=[];for(let n=0;e&&!i.closed&&n<t.length;n++)e.push(wi(t[n]).subscribe(zt(i,r=>{if(e){for(let a=0;a<e.length;a++)a!==n&&e[a].unsubscribe();e=null}i.next(r)})))}}(t))}function uf(...t){const i=Xu(t),e=TD(t);return e.length?new Be(n=>{let r=e.map(()=>[]),a=e.map(()=>!1);n.add(()=>{r=a=null});for(let o=0;!n.closed&&o<e.length;o++)wi(e[o]).subscribe(zt(n,s=>{if(r[o].push(s),r.every(l=>l.length)){const l=r.map(c=>c.shift());n.next(i?i(...l):l),r.some((c,u)=>!c.length&&a[u])&&n.complete()}},()=>{a[o]=!0,!r[o].length&&n.complete()}));return()=>{r=a=null}}):Jr}function xi(t){return yt((i,e)=>{wi(t).subscribe(zt(e,()=>e.complete(),N)),!e.closed&&i.subscribe(e)})}function e0(...t){const i=Xu(t);return yt((e,n)=>{const r=t.length,a=new Array(r);let o=t.map(()=>!1),s=!1;for(let l=0;l<r;l++)wi(t[l]).subscribe(zt(n,c=>{a[l]=c,!s&&!o[l]&&(o[l]=!0,(s=o.every(Fe))&&(o=null))},N));e.subscribe(zt(n,l=>{if(s){const c=[l,...a];n.next(i?i(...c):c)}}))})}function xD(t,i){return i?e=>Zc(i.pipe(Ei(1),function Q4(){return yt((t,i)=>{t.subscribe(zt(i,N))})}()),e.pipe(xD(t))):si((e,n)=>t(e,n).pipe(Ei(1),function K4(t){return Et(()=>t)}(e)))}function MD(t,i=SD){const e=Zv(t,i);return xD(()=>e)}new Be(N);var J4={left:"right",right:"left",bottom:"top",top:"bottom"};function df(t){return t.replace(/left|right|bottom|top/g,function(i){return J4[i]})}function Ua(t){return t.split("-")[0]}var e5={start:"end",end:"start"};function kD(t){return t.replace(/start|end/g,function(i){return e5[i]})}var Er="top",pa="bottom",ga="right",Ir="left",t0="auto",gu=[Er,pa,ga,Ir],El="start",mu="end",AD="viewport",vu="popper",PD=gu.reduce(function(t,i){return t.concat([i+"-"+El,i+"-"+mu])},[]),ED=[].concat(gu,[t0]).reduce(function(t,i){return t.concat([i,i+"-"+El,i+"-"+mu])},[]),h5=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ma(t){if(null==t)return window;if("[object Window]"!==t.toString()){var i=t.ownerDocument;return i&&i.defaultView||window}return t}function Il(t){return t instanceof ma(t).Element||t instanceof Element}function Zr(t){return t instanceof ma(t).HTMLElement||t instanceof HTMLElement}function ID(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ma(t).ShadowRoot||t instanceof ShadowRoot)}function No(t){return((Il(t)?t.ownerDocument:t.document)||window.document).documentElement}var us=Math.max,hf=Math.min,Ol=Math.round;function Nl(t,i){void 0===i&&(i=!1);var e=t.getBoundingClientRect(),n=1,r=1;if(Zr(t)&&i){var a=t.offsetHeight,o=t.offsetWidth;o>0&&(n=Ol(e.width)/o||1),a>0&&(r=Ol(e.height)/a||1)}return{width:e.width/n,height:e.height/r,top:e.top/r,right:e.right/n,bottom:e.bottom/r,left:e.left/n,x:e.left/n,y:e.top/r}}function n0(t){var i=ma(t);return{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function r0(t){return Nl(No(t)).left+n0(t).scrollLeft}function so(t){return ma(t).getComputedStyle(t)}function Ha(t){return t?(t.nodeName||"").toLowerCase():null}function ff(t){return"html"===Ha(t)?t:t.assignedSlot||t.parentNode||(ID(t)?t.host:null)||No(t)}function a0(t){var i=so(t);return/auto|scroll|overlay|hidden/.test(i.overflow+i.overflowY+i.overflowX)}function OD(t){return["html","body","#document"].indexOf(Ha(t))>=0?t.ownerDocument.body:Zr(t)&&a0(t)?t:OD(ff(t))}function bu(t,i){var e;void 0===i&&(i=[]);var n=OD(t),r=n===(null==(e=t.ownerDocument)?void 0:e.body),a=ma(n),o=r?[a].concat(a.visualViewport||[],a0(n)?n:[]):n,s=i.concat(o);return r?s:s.concat(bu(ff(o)))}function g5(t){return["table","td","th"].indexOf(Ha(t))>=0}function ND(t){return Zr(t)&&"fixed"!==so(t).position?t.offsetParent:null}function _u(t){for(var i=ma(t),e=ND(t);e&&g5(e)&&"static"===so(e).position;)e=ND(e);return e&&("html"===Ha(e)||"body"===Ha(e)&&"static"===so(e).position)?i:e||function m5(t){var i=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Zr(t)&&"fixed"===so(t).position)return null;for(var r=ff(t);Zr(r)&&["html","body"].indexOf(Ha(r))<0;){var a=so(r);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||i&&"filter"===a.willChange||i&&a.filter&&"none"!==a.filter)return r;r=r.parentNode}return null}(t)||i}function VD(t,i){var e=i.getRootNode&&i.getRootNode();if(t.contains(i))return!0;if(e&&ID(e)){var n=i;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function o0(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function FD(t,i){return i===AD?o0(function f5(t){var i=ma(t),e=No(t),n=i.visualViewport,r=e.clientWidth,a=e.clientHeight,o=0,s=0;return n&&(r=n.width,a=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,s=n.offsetTop)),{width:r,height:a,x:o+r0(t),y:s}}(t)):Il(i)?function v5(t){var i=Nl(t);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(i):o0(function p5(t){var i,e=No(t),n=n0(t),r=null==(i=t.ownerDocument)?void 0:i.body,a=us(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=us(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-n.scrollLeft+r0(t),l=-n.scrollTop;return"rtl"===so(r||e).direction&&(s+=us(e.clientWidth,r?r.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(No(t)))}function Vl(t){return t.split("-")[1]}function s0(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function BD(t){var l,i=t.reference,e=t.element,n=t.placement,r=n?Ua(n):null,a=n?Vl(n):null,o=i.x+i.width/2-e.width/2,s=i.y+i.height/2-e.height/2;switch(r){case Er:l={x:o,y:i.y-e.height};break;case pa:l={x:o,y:i.y+i.height};break;case ga:l={x:i.x+i.width,y:s};break;case Ir:l={x:i.x-e.width,y:s};break;default:l={x:i.x,y:i.y}}var c=r?s0(r):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case El:l[c]=l[c]-(i[u]/2-e[u]/2);break;case mu:l[c]=l[c]+(i[u]/2-e[u]/2)}}return l}function UD(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function HD(t,i){return i.reduce(function(e,n){return e[n]=t,e},{})}function l0(t,i){void 0===i&&(i={});var n=i.placement,r=void 0===n?t.placement:n,a=i.boundary,o=void 0===a?"clippingParents":a,s=i.rootBoundary,l=void 0===s?AD:s,c=i.elementContext,u=void 0===c?vu:c,d=i.altBoundary,m=void 0!==d&&d,v=i.padding,_=void 0===v?0:v,y=UD("number"!=typeof _?_:HD(_,gu)),T=t.rects.popper,C=t.elements[m?u===vu?"reference":vu:u],O=function _5(t,i,e){var n="clippingParents"===i?function b5(t){var i=bu(ff(t)),n=["absolute","fixed"].indexOf(so(t).position)>=0&&Zr(t)?_u(t):t;return Il(n)?i.filter(function(r){return Il(r)&&VD(r,n)&&"body"!==Ha(r)}):[]}(t):[].concat(i),r=[].concat(n,[e]),o=r.reduce(function(s,l){var c=FD(t,l);return s.top=us(c.top,s.top),s.right=hf(c.right,s.right),s.bottom=hf(c.bottom,s.bottom),s.left=us(c.left,s.left),s},FD(t,r[0]));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(Il(C)?C:C.contextElement||No(t.elements.popper),o,l),j=Nl(t.elements.reference),G=BD({reference:j,element:T,strategy:"absolute",placement:r}),K=o0(Object.assign({},T,G)),se=u===vu?K:j,de={top:O.top-se.top+y.top,bottom:se.bottom-O.bottom+y.bottom,left:O.left-se.left+y.left,right:se.right-O.right+y.right},be=t.modifiersData.offset;if(u===vu&&be){var he=be[r];Object.keys(de).forEach(function(Ae){var Ze=[ga,pa].indexOf(Ae)>=0?1:-1,Ct=[Er,pa].indexOf(Ae)>=0?"y":"x";de[Ae]+=he[Ct]*Ze})}return de}const S5={name:"flip",enabled:!0,phase:"main",fn:function C5(t){var i=t.state,e=t.options,n=t.name;if(!i.modifiersData[n]._skip){for(var r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0===o||o,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,m=e.altBoundary,v=e.flipVariations,_=void 0===v||v,y=e.allowedAutoPlacements,S=i.options.placement,T=Ua(S),O=l||(T!==S&&_?function w5(t){if(Ua(t)===t0)return[];var i=df(t);return[kD(t),i,kD(i)]}(S):[df(S)]),j=[S].concat(O).reduce(function(ut,nn){return ut.concat(Ua(nn)===t0?function y5(t,i){void 0===i&&(i={});var r=i.boundary,a=i.rootBoundary,o=i.padding,s=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?ED:l,u=Vl(i.placement),d=u?s?PD:PD.filter(function(_){return Vl(_)===u}):gu,m=d.filter(function(_){return c.indexOf(_)>=0});0===m.length&&(m=d);var v=m.reduce(function(_,y){return _[y]=l0(t,{placement:y,boundary:r,rootBoundary:a,padding:o})[Ua(y)],_},{});return Object.keys(v).sort(function(_,y){return v[_]-v[y]})}(i,{placement:nn,boundary:u,rootBoundary:d,padding:c,flipVariations:_,allowedAutoPlacements:y}):nn)},[]),G=i.rects.reference,K=i.rects.popper,se=new Map,de=!0,be=j[0],he=0;he<j.length;he++){var Ae=j[he],Ze=Ua(Ae),Ct=Vl(Ae)===El,vt=[Er,pa].indexOf(Ze)>=0,xt=vt?"width":"height",Ot=l0(i,{placement:Ae,boundary:u,rootBoundary:d,altBoundary:m,padding:c}),_t=vt?Ct?ga:Ir:Ct?pa:Er;G[xt]>K[xt]&&(_t=df(_t));var ve=df(_t),R=[];if(a&&R.push(Ot[Ze]<=0),s&&R.push(Ot[_t]<=0,Ot[ve]<=0),R.every(function(ut){return ut})){be=Ae,de=!1;break}se.set(Ae,R)}if(de)for(var fe=function(nn){var on=j.find(function(ft){var gn=se.get(ft);if(gn)return gn.slice(0,nn).every(function(Bn){return Bn})});if(on)return be=on,"break"},Ee=_?3:1;Ee>0&&"break"!==fe(Ee);Ee--);i.placement!==be&&(i.modifiersData[n]._skip=!0,i.placement=be,i.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function yu(t,i,e){return us(t,hf(i,e))}function c0(t){var i=Nl(t),e=t.offsetWidth,n=t.offsetHeight;return Math.abs(i.width-e)<=1&&(e=i.width),Math.abs(i.height-n)<=1&&(n=i.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:n}}const x5={name:"preventOverflow",enabled:!0,phase:"main",fn:function R5(t){var i=t.state,e=t.options,n=t.name,r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0!==o&&o,m=e.tether,v=void 0===m||m,_=e.tetherOffset,y=void 0===_?0:_,S=l0(i,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),T=Ua(i.placement),C=Vl(i.placement),O=!C,j=s0(T),G=function T5(t){return"x"===t?"y":"x"}(j),K=i.modifiersData.popperOffsets,se=i.rects.reference,de=i.rects.popper,be="function"==typeof y?y(Object.assign({},i.rects,{placement:i.placement})):y,he="number"==typeof be?{mainAxis:be,altAxis:be}:Object.assign({mainAxis:0,altAxis:0},be),Ae=i.modifiersData.offset?i.modifiersData.offset[i.placement]:null,Ze={x:0,y:0};if(K){if(a){var Ct,vt="y"===j?Er:Ir,xt="y"===j?pa:ga,Ot="y"===j?"height":"width",_t=K[j],ve=_t+S[vt],R=_t-S[xt],Ye=v?-de[Ot]/2:0,fe=C===El?se[Ot]:de[Ot],Ee=C===El?-de[Ot]:-se[Ot],Kt=i.elements.arrow,ut=v&&Kt?c0(Kt):{width:0,height:0},nn=i.modifiersData["arrow#persistent"]?i.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},on=nn[vt],ft=nn[xt],gn=yu(0,se[Ot],ut[Ot]),Bn=O?se[Ot]/2-Ye-gn-on-he.mainAxis:fe-gn-on-he.mainAxis,zn=O?-se[Ot]/2+Ye+gn+ft+he.mainAxis:Ee+gn+ft+he.mainAxis,$n=i.elements.arrow&&_u(i.elements.arrow),qn=null!=(Ct=null==Ae?void 0:Ae[j])?Ct:0,pi=_t+zn-qn,St=yu(v?hf(ve,_t+Bn-qn-($n?"y"===j?$n.clientTop||0:$n.clientLeft||0:0)):ve,_t,v?us(R,pi):R);K[j]=St,Ze[j]=St-_t}if(s){var An,dn=K[G],ei="y"===G?"height":"width",Ui=dn+S["x"===j?Er:Ir],Vn=dn-S["x"===j?pa:ga],_n=-1!==[Er,Ir].indexOf(T),oi=null!=(An=null==Ae?void 0:Ae[G])?An:0,ba=_n?Ui:dn-se[ei]-de[ei]-oi+he.altAxis,br=_n?dn+se[ei]+de[ei]-oi-he.altAxis:Vn,_a=v&&_n?function D5(t,i,e){var n=yu(t,i,e);return n>e?e:n}(ba,dn,br):yu(v?ba:Ui,dn,v?br:Vn);K[G]=_a,Ze[G]=_a-dn}i.modifiersData[n]=Ze}},requiresIfExists:["offset"]},P5={name:"arrow",enabled:!0,phase:"main",fn:function k5(t){var i,e=t.state,n=t.name,r=t.options,a=e.elements.arrow,o=e.modifiersData.popperOffsets,s=Ua(e.placement),l=s0(s),u=[Ir,ga].indexOf(s)>=0?"height":"width";if(a&&o){var d=function(i,e){return UD("number"!=typeof(i="function"==typeof i?i(Object.assign({},e.rects,{placement:e.placement})):i)?i:HD(i,gu))}(r.padding,e),m=c0(a),v="y"===l?Er:Ir,_="y"===l?pa:ga,y=e.rects.reference[u]+e.rects.reference[l]-o[l]-e.rects.popper[u],S=o[l]-e.rects.reference[l],T=_u(a),C=T?"y"===l?T.clientHeight||0:T.clientWidth||0:0,K=C/2-m[u]/2+(y/2-S/2),se=yu(d[v],K,C-m[u]-d[_]);e.modifiersData[n]=((i={})[l]=se,i.centerOffset=se-K,i)}},effect:function A5(t){var i=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"==typeof r&&!(r=i.elements.popper.querySelector(r))||!VD(i.elements.popper,r)||(i.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function N5(t,i,e){void 0===e&&(e=!1);var n=Zr(i),r=Zr(i)&&function O5(t){var i=t.getBoundingClientRect(),e=Ol(i.width)/t.offsetWidth||1,n=Ol(i.height)/t.offsetHeight||1;return 1!==e||1!==n}(i),a=No(i),o=Nl(t,r),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!e)&&(("body"!==Ha(i)||a0(a))&&(s=function I5(t){return t!==ma(t)&&Zr(t)?function E5(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):n0(t)}(i)),Zr(i)?((l=Nl(i,!0)).x+=i.clientLeft,l.y+=i.clientTop):a&&(l.x=r0(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function V5(t){var i=new Map,e=new Set,n=[];function r(a){e.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(s){if(!e.has(s)){var l=i.get(s);l&&r(l)}}),n.push(a)}return t.forEach(function(a){i.set(a.name,a)}),t.forEach(function(a){e.has(a.name)||r(a)}),n}function B5(t){var i;return function(){return i||(i=new Promise(function(e){Promise.resolve().then(function(){i=void 0,e(t())})})),i}}var GD={placement:"bottom",modifiers:[],strategy:"absolute"};function jD(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return!i.some(function(n){return!(n&&"function"==typeof n.getBoundingClientRect)})}function U5(t){void 0===t&&(t={});var e=t.defaultModifiers,n=void 0===e?[]:e,r=t.defaultOptions,a=void 0===r?GD:r;return function(s,l,c){void 0===c&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},GD,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],m=!1,v={state:u,setOptions:function(T){var C="function"==typeof T?T(u.options):T;y(),u.options=Object.assign({},a,u.options,C),u.scrollParents={reference:Il(s)?bu(s):s.contextElement?bu(s.contextElement):[],popper:bu(l)};var O=function F5(t){var i=V5(t);return h5.reduce(function(e,n){return e.concat(i.filter(function(r){return r.phase===n}))},[])}(function L5(t){var i=t.reduce(function(e,n){var r=e[n.name];return e[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,e},{});return Object.keys(i).map(function(e){return i[e]})}([].concat(n,u.options.modifiers)));return u.orderedModifiers=O.filter(function(Ae){return Ae.enabled}),function _(){u.orderedModifiers.forEach(function(S){var C=S.options,j=S.effect;if("function"==typeof j){var G=j({state:u,name:S.name,instance:v,options:void 0===C?{}:C});d.push(G||function(){})}})}(),v.update()},forceUpdate:function(){if(!m){var T=u.elements,C=T.reference,O=T.popper;if(jD(C,O)){u.rects={reference:N5(C,_u(O),"fixed"===u.options.strategy),popper:c0(O)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(Ae){return u.modifiersData[Ae.name]=Object.assign({},Ae.data)});for(var G=0;G<u.orderedModifiers.length;G++)if(!0!==u.reset){var K=u.orderedModifiers[G],se=K.fn,de=K.options;"function"==typeof se&&(u=se({state:u,options:void 0===de?{}:de,name:K.name,instance:v})||u)}else u.reset=!1,G=-1}}},update:B5(function(){return new Promise(function(S){v.forceUpdate(),S(u)})}),destroy:function(){y(),m=!0}};if(!jD(s,l))return v;function y(){d.forEach(function(S){return S()}),d=[]}return v.setOptions(c).then(function(S){!m&&c.onFirstUpdate&&c.onFirstUpdate(S)}),v}}var pf={passive:!0},$5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zD(t){var i,e=t.popper,n=t.popperRect,r=t.placement,a=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,m=o.x,v=void 0===m?0:m,_=o.y,y=void 0===_?0:_,S="function"==typeof u?u({x:v,y}):{x:v,y};v=S.x,y=S.y;var T=o.hasOwnProperty("x"),C=o.hasOwnProperty("y"),O=Ir,j=Er,G=window;if(c){var K=_u(e),se="clientHeight",de="clientWidth";K===ma(e)&&"static"!==so(K=No(e)).position&&"absolute"===s&&(se="scrollHeight",de="scrollWidth"),K=K,(r===Er||(r===Ir||r===ga)&&a===mu)&&(j=pa,y-=(d&&G.visualViewport?G.visualViewport.height:K[se])-n.height,y*=l?1:-1),r!==Ir&&(r!==Er&&r!==pa||a!==mu)||(O=ga,v-=(d&&G.visualViewport?G.visualViewport.width:K[de])-n.width,v*=l?1:-1)}var Ct,Ae=Object.assign({position:s},c&&$5),Ze=!0===u?function q5(t){var e=t.y,r=window.devicePixelRatio||1;return{x:Ol(t.x*r)/r||0,y:Ol(e*r)/r||0}}({x:v,y}):{x:v,y};return v=Ze.x,y=Ze.y,Object.assign({},Ae,l?((Ct={})[j]=C?"0":"",Ct[O]=T?"0":"",Ct.transform=(G.devicePixelRatio||1)<=1?"translate("+v+"px, "+y+"px)":"translate3d("+v+"px, "+y+"px, 0)",Ct):((i={})[j]=C?y+"px":"",i[O]=T?v+"px":"",i.transform="",i))}var Z5=U5({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function H5(t){var i=t.state,e=t.instance,n=t.options,r=n.scroll,a=void 0===r||r,o=n.resize,s=void 0===o||o,l=ma(i.elements.popper),c=[].concat(i.scrollParents.reference,i.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",e.update,pf)}),s&&l.addEventListener("resize",e.update,pf),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",e.update,pf)}),s&&l.removeEventListener("resize",e.update,pf)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function j5(t){var i=t.state;i.modifiersData[t.name]=BD({reference:i.rects.reference,element:i.rects.popper,strategy:"absolute",placement:i.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function W5(t){var i=t.state,e=t.options,n=e.gpuAcceleration,r=void 0===n||n,a=e.adaptive,o=void 0===a||a,s=e.roundOffsets,l=void 0===s||s,u={placement:Ua(i.placement),variation:Vl(i.placement),popper:i.elements.popper,popperRect:i.rects.popper,gpuAcceleration:r,isFixed:"fixed"===i.options.strategy};null!=i.modifiersData.popperOffsets&&(i.styles.popper=Object.assign({},i.styles.popper,zD(Object.assign({},u,{offsets:i.modifiersData.popperOffsets,position:i.options.strategy,adaptive:o,roundOffsets:l})))),null!=i.modifiersData.arrow&&(i.styles.arrow=Object.assign({},i.styles.arrow,zD(Object.assign({},u,{offsets:i.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),i.attributes.popper=Object.assign({},i.attributes.popper,{"data-popper-placement":i.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function Y5(t){var i=t.state;Object.keys(i.elements).forEach(function(e){var n=i.styles[e]||{},r=i.attributes[e]||{},a=i.elements[e];!Zr(a)||!Ha(a)||(Object.assign(a.style,n),Object.keys(r).forEach(function(o){var s=r[o];!1===s?a.removeAttribute(o):a.setAttribute(o,!0===s?"":s)}))})},effect:function Q5(t){var i=t.state,e={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(i.elements.popper.style,e.popper),i.styles=e,i.elements.arrow&&Object.assign(i.elements.arrow.style,e.arrow),function(){Object.keys(i.elements).forEach(function(n){var r=i.elements[n],a=i.attributes[n]||{},s=Object.keys(i.styles.hasOwnProperty(n)?i.styles[n]:e[n]).reduce(function(l,c){return l[c]="",l},{});!Zr(r)||!Ha(r)||(Object.assign(r.style,s),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]}]});const tL={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function eL(t){var i=t.state,n=t.name,r=t.options.offset,a=void 0===r?[0,0]:r,o=ED.reduce(function(u,d){return u[d]=function J5(t,i,e){var n=Ua(t),r=[Ir,Er].indexOf(n)>=0?-1:1,a="function"==typeof e?e(Object.assign({},i,{placement:t})):e,o=a[0],s=a[1];return o=o||0,s=(s||0)*r,[Ir,ga].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}(d,i.rects,a),u},{}),s=o[i.placement],c=s.y;null!=i.modifiersData.popperOffsets&&(i.modifiersData.popperOffsets.x+=s.x,i.modifiersData.popperOffsets.y+=c),i.modifiersData[n]=o}},u0=["*"],RL=["dialog"];function r8(t,i){1&t&&g(0),2&t&&nt(w(2).title)}function a8(t,i){}function o8(t,i){if(1&t&&(f(0,"h3",3),x(1,r8,1,1,"ng-template",null,4,ot),x(3,a8,0,0,"ng-template",5),h()),2&t){const e=at(2),n=w();p(3),b("ngTemplateOutlet",n.isTitleTemplate()?n.title:e)("ngTemplateOutletContext",n.context)}}function s8(t,i){if(1&t&&(f(0,"span"),Za(1,2),Vt(2,"percent"),h()),2&t){const e=w();p(2),$d(Wd(2,1,e.getValue()/e.max)),function Ug(t){!function mE(t,i,e){if(Ec>0){const n=t.data[e];tw(t,i,Array.isArray(n)?n:n.update,Wa()-Ec-1,Pc)}Pc=0,Ec=0}(ln(),Re(),t+20)}(1)}}function Ga(t){return!isNaN(function gf(t){return parseInt(`${t}`,10)}(t))}function ds(t){return null!=t}function Fl(t){return(t||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let i=this;if(!document.documentElement.contains(i))return null;do{if(i.matches(t))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null});const WD={animation:!0,transitionTimerDelayMs:5},C8=()=>{},{transitionTimerDelayMs:S8}=WD,wu=new Map,lr=(t,i,e,n)=>{let r=n.context||{};const a=wu.get(i);if(a)switch(n.runningTransition){case"continue":return Jr;case"stop":t.run(()=>a.transition$.complete()),r=Object.assign(a.context,r),wu.delete(i)}const o=e(i,n.animation,r)||C8;if(!n.animation||"none"===window.getComputedStyle(i).transitionProperty)return t.run(()=>o()),Mt(void 0).pipe(function y8(t){return i=>new Be(e=>i.subscribe({next:o=>t.run(()=>e.next(o)),error:o=>t.run(()=>e.error(o)),complete:()=>t.run(()=>e.complete())}))}(t));const s=new _e,l=new _e,c=s.pipe(function X4(...t){return i=>Zc(i,Mt(...t))}(!0));wu.set(i,{transition$:s,complete:()=>{l.next(),l.complete()},context:r});const u=function w8(t){const{transitionDelay:i,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(i)+parseFloat(e))}(i);return t.runOutsideAngular(()=>{const d=sr(i,"transitionend").pipe(xi(c),Fi(({target:v})=>v===i));DD(Zv(u+S8).pipe(xi(c)),d,l).pipe(xi(c)).subscribe(()=>{wu.delete(i),t.run(()=>{o(),s.next(),s.complete()})})}),s.asObservable()};let Cu=(()=>{class t{constructor(){this.animation=WD.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),JD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr]]}),t})(),eR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr]]}),t})(),nR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({}),t})(),aR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr]]}),t})(),oR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({}),t})();var Mi=(()=>{return(t=Mi||(Mi={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",Mi;var t})();const vf=(t,i)=>!!i&&i.some(e=>e.contains(t)),sR=(t,i)=>!i||null!=function _8(t,i){return i&&void 0!==t.closest?t.closest(i):null}(t,i),H8="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function lR(t,i,e,n,r,a,o,s){e&&t.runOutsideAngular((t=>H8?()=>setTimeout(()=>t(),100):t)(()=>{const c=sr(i,"keydown").pipe(xi(r),Fi(m=>m.which===Mi.Escape),Yi(m=>m.preventDefault())),u=sr(i,"mousedown").pipe(Et(m=>{const v=m.target;return 2!==m.button&&!vf(v,o)&&("inside"===e?vf(v,a)&&sR(v,s):"outside"===e?!vf(v,a):sR(v,s)||!vf(v,a))}),xi(r)),d=sr(i,"mouseup").pipe(e0(u),Fi(([m,v])=>v),MD(0),xi(r));DD([c.pipe(Et(m=>0)),d.pipe(Et(m=>1))]).subscribe(m=>t.run(()=>n(m)))}))}const cR=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function uR(t){const i=Array.from(t.querySelectorAll(cR)).filter(e=>-1!==e.tabIndex);return[i[0],i[i.length-1]]}const z8=/\s+/,$8=/  +/gi,q8=/^start/,W8=/^end/,X8=/-(top|left)$/,Y8=/-(bottom|right)$/,K8=/^left/,Z8=/^right/,J8=/^start/,e6=/^end/;function dR({placement:t,baseClass:i}){let e=Array.isArray(t)?t:t.split(z8),r=e.findIndex(l=>"auto"===l);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(l){null==e.find(c=>-1!==c.search("^"+l))&&e.splice(r++,1,l)});const a=e.map(l=>function Q8(t){return t.replace(q8,"left").replace(W8,"right").replace(X8,"-start").replace(Y8,"-end")}(l));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!i,phase:"write",fn({state:l}){const c=new RegExp(i+"-[a-z]+","gi"),u=l.elements.popper,d=l.placement;let m=u.className;m=m.replace(c,""),m+=` ${function t6(t,i){let[e,n]=i.split("-");const r=e.replace(K8,"start").replace(Z8,"end");let a=[r];if(n){let o=n;("left"===e||"right"===e)&&(o=o.replace(J8,"top").replace(e6,"bottom")),a.push(`${r}-${o}`)}return t&&(a=a.map(o=>`${t}-${o}`)),a.join(" ")}(i,d)}`,m=m.trim().replace($8," "),u.className=m}},S5,x5,P5,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function hR(t){return t}function fR(){let t=null;return{createPopper(i){if(!t){let n=(i.updatePopperOptions||hR)(dR(i));t=Z5(i.hostElement,i.targetElement,n)}},update(){t&&t.update()},setOptions(i){if(t){let n=(i.updatePopperOptions||hR)(dR(i));t.setOptions(n)}},destroy(){t&&(t.destroy(),t=null)}}}new Date(1882,10,12),new Date(2174,10,25);let _R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr,oT]]}),t})(),u6=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),yR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["",8,"navbar"]]}),t})(),_0=(()=>{class t{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(A(bn))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,n){2&e&&wt("disabled",n.disabled)},inputs:{disabled:"disabled"}}),t})(),wf=(()=>{class t{constructor(e,n){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=n.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(A(cn(()=>Ll)),A(bn))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,n,r){if(1&e&&ui(r,_0,4),2&e){let a;fn(a=pn())&&(n.menuItems=a)}},hostVars:5,hostBindings:function(e,n){1&e&&I("keydown.ArrowUp",function(a){return n.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return n.dropdown.onKeyDown(a)})("keydown.Home",function(a){return n.dropdown.onKeyDown(a)})("keydown.End",function(a){return n.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return n.dropdown.onKeyDown(a)})("keydown.Space",function(a){return n.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return n.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return n.dropdown.onKeyDown(a)}),2&e&&(Cn("data-popper",n.placement),wt("dropdown-menu",!0)("show",n.dropdown.isOpen()))}}),t})(),Cf=(()=>{class t{constructor(e,n){this.dropdown=e,this.nativeElement=n.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(A(cn(()=>Ll)),A(bn))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,n){2&e&&Cn("aria-expanded",n.dropdown.isOpen())}}),t})(),y0=(()=>{class t extends Cf{constructor(e,n){super(e,n)}}return t.\u0275fac=function(e){return new(e||t)(A(cn(()=>Ll)),A(bn))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,n){1&e&&I("click",function(){return n.dropdown.toggle()})("keydown.ArrowUp",function(a){return n.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return n.dropdown.onKeyDown(a)})("keydown.Home",function(a){return n.dropdown.onKeyDown(a)})("keydown.End",function(a){return n.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return n.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return n.dropdown.onKeyDown(a)}),2&e&&Cn("aria-expanded",n.dropdown.isOpen())},features:[xn([{provide:Cf,useExisting:cn(()=>t)}]),vn]}),t})(),Ll=(()=>{class t{constructor(e,n,r,a,o,s,l){this._changeDetector=e,this._document=r,this._ngZone=a,this._elementRef=o,this._renderer=s,this._closed$=new _e,this._bodyContainer=null,this._positioning=fR(),this._open=!1,this.openChange=new rt,this.placement=n.placement,this.container=n.container,this.autoClose=n.autoClose,this.display=l?"static":"dynamic",this._zoneSubscription=a.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(Ei(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:n,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(n,r)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.onStable.pipe(Ei(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()})))}_setCloseHandlers(){lR(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._positioning.destroy(),this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const n=e.which,r=this._getMenuElements();let a=-1,o=null;const s=this._isEventFromToggle(e);if(!s&&r.length&&r.forEach((l,c)=>{l.contains(e.target)&&(o=l),l===this._document.activeElement&&(a=c)}),n!==Mi.Space&&n!==Mi.Enter){if(n!==Mi.Tab){if(s||o){if(this.open(),r.length){switch(n){case Mi.ArrowDown:a=Math.min(a+1,r.length-1);break;case Mi.ArrowUp:if(this._isDropup()&&-1===a){a=r.length-1;break}a=Math.max(a-1,0);break;case Mi.Home:a=0;break;case Mi.End:a=r.length-1}r[a].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const l=this._menu.nativeElement.querySelectorAll(cR);e.shiftKey&&e.target===l[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===l[l.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else sr(e.target,"focusout").pipe(Ei(1)).subscribe(({relatedTarget:l})=>{this._elementRef.nativeElement.contains(l)||this.close()})}}else o&&(!0===this.autoClose||"inside"===this.autoClose)&&sr(o,"click").pipe(Ei(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(n=>!n.disabled).map(n=>n.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const n=this._renderer,r=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||n.createElement("div");n.setStyle(a,"position","absolute"),n.setStyle(r,"position","static"),n.setStyle(a,"z-index","1050"),n.appendChild(a,r),n.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,n){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(n&&this._renderer.removeClass(r,n),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const n=this._menu;if(n){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,a=this._elementRef.nativeElement;r.removeClass(a,"dropup"),r.removeClass(a,"dropdown");const{nativeElement:o}=n;"static"===this.display?(n.placement=null,r.setAttribute(o,"data-bs-popper","static")):(n.placement=e,r.removeAttribute(o,"data-bs-popper"));const s=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(a,s);const l=this._bodyContainer;l&&(r.removeClass(l,"dropup"),r.removeClass(l,"dropdown"),r.addClass(l,s))}}}return t.\u0275fac=function(e){return new(e||t)(A(Mr),A(u6),A(mi),A(Mn),A(bn),A(zr),A(yR,8))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(e,n,r){if(1&e&&(ui(r,wf,5),ui(r,Cf,5)),2&e){let a;fn(a=pn())&&(n._menu=a.first),fn(a=pn())&&(n._anchor=a.first)}},hostVars:2,hostBindings:function(e,n){2&e&&wt("show",n.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[Oi]}),t})(),wR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({}),t})();class gs{constructor(i,e,n){this.nodes=i,this.viewRef=e,this.componentRef=n}}class d6{constructor(i,e,n,r,a,o){this._type=i,this._injector=e,this._viewContainerRef=n,this._renderer=r,this._ngZone=a,this._applicationRef=o,this._windowRef=null,this._contentRef=null}open(i,e,n=!1){this._windowRef||(this._contentRef=this._getContentRef(i,e),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,a=this._ngZone.onStable.pipe(Ei(1),si(()=>lr(this._ngZone,r,({classList:o})=>o.add("show"),{animation:n,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:a}}close(i=!1){return this._windowRef?lr(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:i,runningTransition:"stop"}).pipe(Yi(()=>{var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):Mt(void 0)}_getContentRef(i,e){if(i){if(i instanceof Un){const n=i.createEmbeddedView(e);return this._applicationRef.attachView(n),new gs([n.rootNodes],n)}return new gs([[this._renderer.createText(`${i}`)]])}return new gs([])}}let h6=(()=>{class t{constructor(e,n){this._el=e,this._zone=n}ngOnInit(){this._zone.onStable.asObservable().pipe(Ei(1)).subscribe(()=>{lr(this._zone,this._el.nativeElement,(e,n)=>{n&&Fl(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return lr(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(A(bn),A(Mn))},t.\u0275cmp=dt({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,n){2&e&&(To("modal-backdrop"+(n.backdropClass?" "+n.backdropClass:"")),wt("show",!n.animation)("fade",n.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),t})();class CR{close(i){}dismiss(i){}}class f6{constructor(i,e,n,r){this._windowCmptRef=i,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new _e,this._dismissed=new _e,this._hidden=new _e,i.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,o)=>{this._resolve=a,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(xi(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(xi(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(i){this._windowCmptRef&&(this._closed.next(i),this._resolve(i),this._removeModalElements())}_dismiss(i){this._dismissed.next(i),this._reject(i),this._removeModalElements()}dismiss(i){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function b8(t){return t&&t.then}(e)?!1!==e&&this._dismiss(i):e.then(n=>{!1!==n&&this._dismiss(i)},()=>{})}else this._dismiss(i)}_removeModalElements(){const i=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Mt(void 0);i.subscribe(()=>{const{nativeElement:n}=this._windowCmptRef.location;n.parentNode.removeChild(n),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:n}=this._backdropCmptRef.location;n.parentNode.removeChild(n),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),uf(i,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Ru=(()=>{return(t=Ru||(Ru={}))[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",Ru;var t})();let p6=(()=>{class t{constructor(e,n,r){this._document=e,this._elRef=n,this._zone=r,this._closed$=new _e,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new rt,this.shown=new _e,this.hidden=new _e}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Ei(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,n={animation:this.animation,runningTransition:"stop"},o=uf(lr(this._zone,e,()=>e.classList.remove("show"),n),lr(this._zone,this._dialogEl.nativeElement,()=>{},n));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const e={animation:this.animation,runningTransition:"continue"};uf(lr(this._zone,this._elRef.nativeElement,(a,o)=>{o&&Fl(a),a.classList.add("show")},e),lr(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{sr(e,"keydown").pipe(xi(this._closed$),Fi(r=>r.which===Mi.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Ru.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let n=!1;sr(this._dialogEl.nativeElement,"mousedown").pipe(xi(this._closed$),Yi(()=>n=!1),io(()=>sr(e,"mouseup").pipe(xi(this._closed$),Ei(1))),Fi(({target:r})=>e===r)).subscribe(()=>{n=!0}),sr(e,"click").pipe(xi(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!n&&this._zone.run(()=>this.dismiss(Ru.BACKDROP_CLICK))),n=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const n=e.querySelector("[ngbAutofocus]"),r=uR(e)[0];(n||r||e).focus()}}_restoreFocus(){const e=this._document.body,n=this._elWithFocus;let r;r=n&&n.focus&&e.contains(n)?n:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&lr(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(A(mi),A(bn),A(Mn))},t.\u0275cmp=dt({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,n){if(1&e&&ca(RL,7),2&e){let r;fn(r=pn())&&(n._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,n){2&e&&(Cn("aria-modal",!0)("aria-labelledby",n.ariaLabelledBy)("aria-describedby",n.ariaDescribedBy),To("modal d-block"+(n.windowClass?" "+n.windowClass:"")),wt("fade",n.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:u0,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,n){1&e&&(Vd(),f(0,"div",0,1)(2,"div",2),Fd(3),h()()),2&e&&To("modal-dialog"+(n.size?" modal-"+n.size:"")+(n.centered?" modal-dialog-centered":"")+(n.scrollable?" modal-dialog-scrollable":"")+(n.modalDialogClass?" "+n.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),g6=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),n=this._document.body,r=n.style,{overflow:a,paddingRight:o}=r;if(e>0){const s=parseFloat(window.getComputedStyle(n).paddingRight);r.paddingRight=`${s+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=o),r.overflow=a}}}return t.\u0275fac=function(e){return new(e||t)(Le(mi))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),m6=(()=>{class t{constructor(e,n,r,a,o,s){this._applicationRef=e,this._injector=n,this._document=r,this._scrollBar=a,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new _e,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new rt,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((t,i,e,n=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=sr(i,"focusin").pipe(xi(e),Et(a=>a.target));sr(i,"keydown").pipe(xi(e),Fi(a=>a.which===Mi.Tab),e0(r)).subscribe(([a,o])=>{const[s,l]=uR(i);(o===s||o===i)&&a.shiftKey&&(l.focus(),a.preventDefault()),o===l&&!a.shiftKey&&(s.focus(),a.preventDefault())}),n&&sr(i,"click").pipe(xi(e),e0(r),Et(a=>a[1])).subscribe(a=>a.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(e,n,r,a){const o=a.container instanceof HTMLElement?a.container:ds(a.container)?this._document.querySelector(a.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.hide(),c=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!o)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const u=new CR,d=this._getContentRef(e,a.injector||n,r,u,a);let m=!1!==a.backdrop?this._attachBackdrop(e,o):void 0,v=this._attachWindowComponent(e,o,d),_=new f6(v,d,m,a.beforeDismiss);return this._registerModalRef(_),this._registerWindowCmpt(v),_.result.then(l,l),_.result.then(c,c),u.close=y=>{_.close(y)},u.dismiss=y=>{_.dismiss(y)},this._applyWindowOptions(v.instance,a),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),m&&m.instance&&(this._applyBackdropOptions(m.instance,a),m.changeDetectorRef.detectChanges()),v.changeDetectorRef.detectChanges(),_}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(n=>n.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,n){let a=e.resolveComponentFactory(h6).create(this._injector);return this._applicationRef.attachView(a.hostView),n.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,n,r){let o=e.resolveComponentFactory(p6).create(this._injector,r.nodes);return this._applicationRef.attachView(o.hostView),n.appendChild(o.location.nativeElement),o}_applyWindowOptions(e,n){this._windowAttributes.forEach(r=>{ds(n[r])&&(e[r]=n[r])})}_applyBackdropOptions(e,n){this._backdropAttributes.forEach(r=>{ds(n[r])&&(e[r]=n[r])})}_getContentRef(e,n,r,a,o){return r?r instanceof Un?this._createFromTemplateRef(r,a):function qD(t){return"string"==typeof t}(r)?this._createFromString(r):this._createFromComponent(e,n,r,a,o):new gs([])}_createFromTemplateRef(e,n){const a=e.createEmbeddedView({$implicit:n,close(o){n.close(o)},dismiss(o){n.dismiss(o)}});return this._applicationRef.attachView(a),new gs([a.rootNodes],a)}_createFromString(e){const n=this._document.createTextNode(`${e}`);return new gs([[n]])}_createFromComponent(e,n,r,a,o){const s=e.resolveComponentFactory(r),l=ci.create({providers:[{provide:CR,useValue:a}],parent:n}),c=s.create(l),u=c.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new gs([[u]],c.hostView,c)}_setAriaHidden(e){const n=e.parentElement;n&&e!==this._document.body&&(Array.from(n.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(n))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,n)=>{e?n.setAttribute("aria-hidden",e):n.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const n=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(n,n)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const n=this._windowCmpts.indexOf(e);n>-1&&(this._windowCmpts.splice(n,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(Le(es),Le(ci),Le(mi),Le(g6),Le($g),Le(Mn))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),v6=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Le(Cu))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),lo=(()=>{class t{constructor(e,n,r,a){this._moduleCFR=e,this._injector=n,this._modalStack=r,this._config=a}open(e,n={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),n);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(Le(Zo),Le(ci),Le(m6),Le(v6))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),SR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({providers:[lo]}),t})(),xR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr]]}),t})(),NR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr]]}),t})();class S6{constructor(i,e){this.open=i,this.close=e,e||(this.close=i)}isManual(){return"manual"===this.open||"manual"===this.close}}const T6={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},VR=t=>t>0?MD(t):i=>i;let k6=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Le(Cu))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),A6=0;function P6(t){return t.modifiers.push(tL,{name:"offset",options:{offset:()=>[0,12]}}),t}let E6=(()=>{class t{isTitleTemplate(){return this.title instanceof Un}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=dt({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,n){2&e&&(Do("id",n.id),To("popover"+(n.popoverClass?" "+n.popoverClass:"")),wt("fade",n.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:u0,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Vd(),D(0,"div",0),x(1,o8,4,2,"h3",1),f(2,"div",2),Fd(3),h()),2&e&&(p(1),b("ngIf",n.title))},directives:[an,_l],encapsulation:2,changeDetection:0}),t})(),Or=(()=>{class t{constructor(e,n,r,a,o,s,l,c,u){this._elementRef=e,this._renderer=n,this._ngZone=s,this._document=l,this._changeDetector=c,this.shown=new rt,this.hidden=new rt,this._ngbPopoverWindowId="ngb-popover-"+A6++,this._windowRef=null,this._positioning=fR(),this.animation=o.animation,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disablePopover=o.disablePopover,this.popoverClass=o.popoverClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new d6(E6,r,a,n,this._ngZone,u),this._zoneSubscription=s.onStable.subscribe(()=>{this._positioning.update()})}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:n,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=n,this._windowRef.instance.animation=this.animation,this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(Ei(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:P6})}),lR(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function M6(t,i,e,n,r,a,o=0,s=0){const l=function D6(t,i=T6){const e=(t||"").trim();if(0===e.length)return[];const n=e.split(/\s+/).map(a=>a.split(":")).map(a=>{let o=i[a[0]]||a;return new S6(o[0],o[1])}),r=n.filter(a=>a.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return n}(e);if(1===l.length&&l[0].isManual())return()=>{};const c=function R6(t,i,e,n){return new Be(r=>{const a=[],o=()=>r.next(!0),s=()=>r.next(!1),l=()=>r.next(!n());return e.forEach(c=>{c.open===c.close?a.push(t.listen(i,c.open,l)):a.push(t.listen(i,c.open,o),t.listen(i,c.close,s))}),()=>{a.forEach(c=>c())}})}(t,i,l,n).pipe(function x6(t,i,e){return n=>{let r=null;const a=n.pipe(Et(l=>({open:l})),Fi(l=>{const c=e();return c===l.open||r&&r.open!==c?(r&&r.open!==l.open&&(r=null),!1):(r=l,!0)}),K0());return Q0(a.pipe(Fi(l=>l.open),VR(t)),a.pipe(Fi(l=>!l.open),VR(i))).pipe(Fi(l=>l===r&&(r=null,l.open!==e())),Et(l=>l.open))}}(o,s,n)).subscribe(u=>u?r():a());return()=>c.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:n,disablePopover:r,popoverClass:a}){a&&this.isOpen()&&(this._windowRef.instance.popoverClass=a.currentValue),(e||n||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(bn),A(zr),A(ci),A($r),A(k6),A(Mn),A(mi),A(Mr),A(es))},t.\u0275dir=je({type:t,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[Oi]}),t})(),FR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr]]}),t})(),I6=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),T0=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!Ga(e)||e<=0?100:e}get max(){return this._max}getValue(){return function $D(t,i,e=0){return Math.max(Math.min(t,i),e)}(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(A(I6))},t.\u0275cmp=dt({type:t,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(e,n){2&e&&Mc("height",n.height)},inputs:{max:"max",animated:"animated",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},ngContentSelectors:u0,decls:3,vars:11,consts:function(){let i;return i=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],i]},template:function(e,n){1&e&&(Vd(),f(0,"div",0),x(1,s8,3,3,"span",1),Fd(2),h()),2&e&&(function Iy(t,i,e,n,r,a,o,s,l){la(Tr,Oa,rl(Re(),t,i,e,n,r,a,o,s,l),!0)}("progress-bar",n.type?" bg-"+n.type:"","",n.textType?" text-"+n.textType:"","\n    ",n.animated?" progress-bar-animated":"","",n.striped?" progress-bar-striped":"",""),Mc("width",n.getPercentValue(),"%"),Cn("aria-valuenow",n.getValue())("aria-valuemax",n.max),p(1),b("ngIf",n.showValue))},directives:[an],pipes:[GC],encapsulation:2,changeDetection:0}),t})(),BR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr]]}),t})(),LR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr]]}),t})(),UR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr]]}),t})(),HR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr]]}),t})(),GR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({}),t})();new qt("live announcer delay",{providedIn:"root",factory:function V6(){return 100}});let jR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[[vr]]}),t})();const F6=[JD,eR,nR,aR,oR,_R,wR,SR,xR,NR,FR,BR,LR,UR,HR,GR,jR];let B6=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t}),t.\u0275inj=mn({imports:[F6,JD,eR,nR,aR,oR,_R,wR,SR,xR,NR,FR,BR,LR,UR,HR,GR,jR]}),t})();function L6(t,i){if(1&t){const e=ge();f(0,"div",1),I("click",function(){B(e);const r=w();return r.switchView(r.navigationEnum.incubator)}),f(1,"button",2),g(2,"Incubator"),h(),D(3,"hr"),h()}if(2&t){const e=w();p(1),b("ngClass",e.selectedNavigation===e.navigationEnum.incubator?"active":"")}}const zR=function(t,i){return{active:t,tutorialActive:i}};let $R=(()=>{class t{constructor(e,n,r,a){this.componentCommunicationService=e,this.lookupService=n,this.globalService=r,this.gameLoopService=a,this.viewChanged=new rt,this.navigationEnum=mt,this.selectedNavigation=0,this.tutorial3Active=!1,this.tutorial6Active=!1}ngOnInit(){this.componentCommunicationService.getNewView().subscribe(e=>{this.viewChanged.emit(e),this.selectedNavigation=e}),this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack"),this.tutorialSubscription=this.gameLoopService.gameUpdateEvent.subscribe(e=>{var n;this.tutorial3Active=!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId,this.tutorial6Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||6!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(n=this.globalService.globalVar.animals.find(r=>r.type===X.Monkey))||void 0===n?void 0:n.isAvailable)),this.globalService.globalVar.tutorials.tutorialCompleted&&this.tutorialSubscription.unsubscribe()})}switchView(e){this.selectedNavigation===mt.shop&&this.componentCommunicationService.setShopView(mt.shop,La.regular),this.selectedNavigation===mt.barn&&this.componentCommunicationService.setBarnView(mt.barn,0),this.selectedNavigation===mt.animals&&this.componentCommunicationService.setAnimalView(mt.animals,new Dt),this.viewChanged.emit(e),this.selectedNavigation=e,this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack")}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0)}}return t.\u0275fac=function(e){return new(e||t)(A(Zn),A(hn),A(Rt),A(_i))},t.\u0275cmp=dt({type:t,selectors:[["app-navigation"]],outputs:{viewChanged:"viewChanged"},decls:33,vars:15,consts:[[1,"navigation"],[1,"navSpace","clickableText",3,"click"],[1,"buttonAsText",3,"ngClass"],["class","navSpace clickableText",3,"click",4,"ngIf"],[1,"navSpace","clickableText"],[1,"buttonAsText",3,"ngClass","click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1),I("click",function(){return n.switchView(n.navigationEnum.barn)}),f(2,"button",2),g(3,"Barns"),h()(),D(4,"hr"),f(5,"div",1),I("click",function(){return n.switchView(n.navigationEnum.raceselection)}),f(6,"button",2),g(7,"Races"),h()(),D(8,"hr"),f(9,"div",1),I("click",function(){return n.switchView(n.navigationEnum.animals)}),f(10,"button",2),g(11,"Animals"),h()(),D(12,"hr"),f(13,"div",1),I("click",function(){return n.switchView(n.navigationEnum.relayTeams)}),f(14,"button",2),g(15,"Relay Teams"),h()(),D(16,"hr"),f(17,"div",1),I("click",function(){return n.switchView(n.navigationEnum.shop)}),f(18,"button",2),g(19,"Shop"),h()(),D(20,"hr"),x(21,L6,4,1,"div",3),f(22,"div",4)(23,"button",5),I("click",function(){return n.switchView(n.navigationEnum.resources)}),g(24,"Resources"),h()(),D(25,"hr"),f(26,"div",1),I("click",function(){return n.switchView(n.navigationEnum.settings)}),f(27,"button",2),g(28,"Settings"),h()(),D(29,"hr"),f(30,"div",1),I("click",function(){return n.switchView(n.navigationEnum.stats)}),f(31,"button",2),g(32,"Stats"),h()()()),2&e&&(p(2),b("ngClass",Jo(9,zR,n.selectedNavigation===n.navigationEnum.barn,n.tutorial6Active)),p(4),b("ngClass",Jo(12,zR,n.selectedNavigation===n.navigationEnum.raceselection,n.tutorial3Active)),p(4),b("ngClass",n.selectedNavigation===n.navigationEnum.animals?"active":""),p(4),b("ngClass",n.selectedNavigation===n.navigationEnum.relayTeams?"active":""),p(4),b("ngClass",n.selectedNavigation===n.navigationEnum.shop?"active":""),p(3),b("ngIf",n.incubatorAvailable),p(2),b("ngClass",n.selectedNavigation===n.navigationEnum.resources?"active":""),p(4),b("ngClass",n.selectedNavigation===n.navigationEnum.settings?"active":""),p(4),b("ngClass",n.selectedNavigation===n.navigationEnum.stats?"active":""))},directives:[Hn,an],styles:[".navigation[_ngcontent-%COMP%]{height:100%;border-left:1px solid rgba(0,0,0,.1);padding-left:1rem;padding-top:1rem;background-color:var(--background-secondary);color:var(--foreground-default)}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}"]}),t})();function U6(t,i){if(1&t&&D(0,"div",15),2&t){const e=w();b("innerHTML",e.getSanitizedHtml(e.latestVersionChanges),Nt)}}function H6(t,i){if(1&t&&(f(0,"div")(1,"div",24)(2,"span",25),g(3),Vt(4,"number"),h(),f(5,"span"),g(6),h()(),D(7,"br")(8,"div",26),f(9,"span"),D(10,"hr"),h()()),2&t){const e=i.$implicit,n=i.index,r=w(3);p(3),Q("Version ",rn(4,3,r.allVersions[n],"1.2-2"),""),p(3),Q(" ",r.versionControlService.getDateForVersion(r.allVersions[n]),""),p(2),b("innerHTML",r.getSanitizedHtml(e),Nt)}}function G6(t,i){if(1&t&&(f(0,"div")(1,"div",21)(2,"div",22),x(3,H6,11,6,"div",23),h()()()),2&t){const e=w(2);p(3),b("ngForOf",e.changeLog)}}function j6(t,i){if(1&t){const e=ge();f(0,"div",16)(1,"div",17)(2,"h4",18),g(3,"Change Log"),h(),f(4,"button",19),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),x(6,G6,4,1,"div",20),h()}if(2&t){const e=w();p(6),b("ngIf",e.changeLog.length>0)}}let z6=(()=>{class t{constructor(e,n,r,a,o,s,l){this.lookupService=e,this.gameLoopService=n,this.globalService=r,this.componentCommunicationService=a,this.versionControlService=o,this.modalService=s,this.sanitizer=l}ngOnInit(){this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.latestVersionChanges=this.versionControlService.getLatestChanges(),this.changeLog=this.versionControlService.getAllChanges(),this.allVersions=this.versionControlService.gameVersions,this.gameLoopService.gameUpdateEvent.subscribe(e=>{this.globalService.globalVar.userIsRacing||(this.coinCount=this.lookupService.getCoins(),this.medalCount=this.lookupService.getMedals())})}getSanitizedHtml(e){return this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(e))}changeView(e){this.componentCommunicationService.setNewView(e)}openChangeLog(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}}return t.\u0275fac=function(e){return new(e||t)(A(hn),A(_i),A(Rt),A(Zn),A(Kv),A(lo),A(Mo))},t.\u0275cmp=dt({type:t,selectors:[["app-header"]],decls:26,vars:8,consts:[[1,"headerView"],[1,"gridContainer"],[1,"nameArea","keyword"],[1,"name"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"version","versionMargin","clickableText",3,"ngbPopover","click"],[1,"coins","keyword"],[1,"medals","keyword"],[1,"menu","keyword"],["ngbDropdown","",1,"d-inline-block","customDropdown"],["menuDropdown","ngbDropdown"],["type","button","id","menuDropdown","ngbDropdownToggle","",1,"btn","dropdown"],["ngbDropdownMenu","","aria-labelledby","menuDropdown",1,"dropdownItems"],[3,"viewChanged","click"],["latestVersionChangesContent",""],["content",""],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[4,"ngIf"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],[1,"flexDiv"],[1,"s4Heading"],[3,"innerHTML"]],template:function(e,n){if(1&e){const r=ge();f(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),g(4," Cultura "),h(),f(5,"span",4),I("click",function(){B(r);const o=at(25);return n.openChangeLog(o)}),g(6),h()(),f(7,"div",5)(8,"span"),g(9),Vt(10,"number"),h()(),f(11,"div",6)(12,"span"),g(13),Vt(14,"number"),h()(),f(15,"div",7)(16,"div",8,9)(18,"button",10),g(19,"Menu"),h(),f(20,"div",11)(21,"app-navigation",12),I("viewChanged",function(o){return n.changeView(o)})("click",function(){return B(r),at(17).close()}),h()()()()(),x(22,U6,1,1,"ng-template",null,13,ot),x(24,j6,7,1,"ng-template",null,14,ot),h()}if(2&e){const r=at(23);p(5),b("ngbPopover",r),p(1),Q(" v",n.version," "),p(3),Q("Coins: ",Wd(10,4,n.coinCount),""),p(4),Q("Medals: ",Wd(14,6,n.medalCount),"")}},directives:[Or,Ll,y0,wf,$R,an,Yn],pipes:[no],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name . coins ." ". name . medals ."}.nameArea[_ngcontent-%COMP%]{grid-area:name;justify-self:stretch}.name[_ngcontent-%COMP%]{font-size:2rem}.coins[_ngcontent-%COMP%]{grid-area:coins;justify-self:stretch}.medals[_ngcontent-%COMP%]{grid-area:medals;justify-self:stretch}.versionMargin[_ngcontent-%COMP%]{margin-left:.5rem}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}.dropdownItems[_ngcontent-%COMP%]{background-color:var(--background-secondary);color:var(--foreground-default)}.menu[_ngcontent-%COMP%]{display:none}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre-line}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.flexDiv[_ngcontent-%COMP%]{display:flex;justify-content:space-between}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 15% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name coins menu ." ". name medals menu ."}.menu[_ngcontent-%COMP%]{display:block;grid-area:menu;justify-self:stretch}.customDropdown[_ngcontent-%COMP%]{width:100%;text-align:center}}']}),t})();function $6(t,i){if(1&t&&(f(0,"h6",9)(1,"span"),g(2),h(),D(3,"br"),f(4,"span"),g(5),h()()),2&t){const e=w(2);b("ngClass",e.colorConditional),p(2),nt(e.associatedAnimalName),p(3),nt(e.associatedAnimalType)}}function q6(t,i){if(1&t&&(f(0,"h6",9)(1,"span"),g(2),h()()),2&t){const e=w(2);b("ngClass",e.colorConditional),p(2),nt(e.associatedAnimalType)}}function W6(t,i){1&t&&(f(0,"div")(1,"em"),g(2,"Ready to Breed"),h()())}const X6=function(t){return{floatingProgressTextAnimation:t}};function Y6(t,i){if(1&t&&(f(0,"div",4)(1,"span"),g(2),h(),x(3,$6,6,3,"h6",5),x(4,q6,3,2,"h6",5),D(5,"br"),f(6,"p"),D(7,"ngb-progressbar",6),h(),f(8,"div",7),g(9),h(),D(10,"br"),x(11,W6,3,0,"div",8),h()),2&t){const e=w();p(2),nt(e.barnName),p(1),b("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),b("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(3),b("value",e.trainingProgressBarPercent),p(1),b("ngClass",ri(7,X6,e.showTrainingAnimation)),p(1),Q(" ",e.trainingCompleteText," "),p(2),b("ngIf",e.readyToBreed)}}function Q6(t,i){1&t&&(f(0,"h6",10)(1,"span"),g(2,"Unassigned"),h(),D(3,"br"),f(4,"em"),g(5,"Click to assign animal"),h()())}function K6(t,i){1&t&&(f(0,"h6",11)(1,"span"),g(2,"Locked"),h(),D(3,"br"),f(4,"em"),g(5,"Click to view status"),h()())}let Z6=(()=>{class t{constructor(e,n,r){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.trainingCompleteText="",this.showTrainingAnimation=!1,this.selectedBarn=new rt}ngOnInit(){if(this.barnNumber>0&&this.barnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.barnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e);var n=this.globalService.globalVar.animals.find(r=>r.associatedBarnNumber==this.barnNumber);null!=n?(this.isOccupied=!0,this.associatedAnimalName=n.name,this.associatedAnimalType=X[n.type],this.associatedAnimal=n,this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()}):this.isOccupied=!1,this.isLocked=e.isLocked}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.isLocked||(this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.barnNumber);if(null!=a){if(null==a.currentTraining)return void(this.trainingProgressBarPercent=0);a.currentTraining.timeTrained<this.previousTrainedAmount&&(this.trainingCompleteText=this.lookupService.getTrainingProgressionAnimationText(a.currentTraining),this.showTrainingAnimation=!0,setTimeout(()=>{this.showTrainingAnimation=!1,this.trainingCompleteText=""},3e3)),this.readyToBreed=a.breedGaugeXp>=a.breedGaugeMax,this.previousTrainedAmount=a.currentTraining.timeTrained,this.trainingProgressBarPercent=a.currentTraining.timeTrained/a.currentTraining.timeToComplete*100}}))}ngOnDestroy(){this.previousTrainedAmount=0,null!=this.subscription&&this.subscription.unsubscribe()}onClick(){this.selectedBarn.emit(this.barnNumber)}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(_i),A(hn))},t.\u0275cmp=dt({type:t,selectors:[["app-barn"]],hostBindings:function(e,n){1&e&&I("click",function(){return n.onClick()})},inputs:{barnNumber:"barnNumber"},outputs:{selectedBarn:"selectedBarn"},decls:4,vars:3,consts:[[1,"barn","clickableText"],["class","unlocked",4,"ngIf"],["class","unassigned",4,"ngIf"],["class","locked",4,"ngIf"],[1,"unlocked"],["class","keyword",3,"ngClass",4,"ngIf"],["type","success",3,"value"],[1,"progressBar","floatingProgressText","progressBarColor","keyword",3,"ngClass"],[4,"ngIf"],[1,"keyword",3,"ngClass"],[1,"unassigned"],[1,"locked"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,Y6,12,9,"div",1),x(2,Q6,6,0,"h6",2),x(3,K6,6,0,"h6",3),h()),2&e&&(p(1),b("ngIf",n.isOccupied),p(1),b("ngIf",!n.isOccupied&&!n.isLocked),p(1),b("ngIf",n.isLocked))},directives:[an,Hn,T0],styles:[".barn[_ngcontent-%COMP%]{text-align:center;width:45%;margin:auto;display:flex;justify-content:center;align-content:center;flex-direction:column;height:100%}.floatingProgressText[_ngcontent-%COMP%]{float:right;position:relative;text-align:right;top:-2em}.floatingProgressTextAnimation[_ngcontent-%COMP%]{animation-name:floatingProgressTextAnimation;animation-duration:3s;animation-iteration-count:1;animation-timing-function:ease-in-out}@keyframes floatingProgressTextAnimation{0%{transform:translate(0)}to{transform:translateY(-30px);opacity:0}}@media (max-width: 800px){.barn[_ngcontent-%COMP%]{width:75%}}"]}),t})(),J6=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=dt({type:t,selectors:[["app-training-option"]],inputs:{trainingOption:"trainingOption"},decls:7,vars:4,consts:[[1,"training"],[1,"trainingName","keyword"],[1,"trainingStats"],[1,"trainingTimeToComplete"]],template:function(e,n){1&e&&(f(0,"h6",0)(1,"p",1),g(2),h(),f(3,"p",2),g(4),h(),f(5,"p",3),g(6),h()()),2&e&&(p(2),nt(n.trainingOption.trainingName),p(2),nt(n.trainingOption.getStatGainDescription()),p(2),Wn("",n.trainingOption.getFacilitySize()," - ",n.trainingOption.timeToComplete," sec "))},styles:[".training[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const eU=function(t){return{activeTrainingOption:t}};function tU(t,i){if(1&t){const e=ge();f(0,"td",4)(1,"div",5),I("click",function(){const a=B(e).$implicit;return w(2).selectTrainingOption(a)}),D(2,"app-training-option",6),h()()}if(2&t){const e=i.$implicit;p(1),b("ngClass",ri(2,eU,e.isSelected)),p(1),b("trainingOption",e)}}function nU(t,i){if(1&t&&(f(0,"tr"),x(1,tU,3,4,"td",3),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}let iU=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrainingOption=new rt}ngOnInit(){this.setupDisplayTrainings()}setupDisplayTrainings(){this.trainingsCells=[],this.trainingsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableTrainingOptions.length;n++)this.trainingsCells.push(this.availableTrainingOptions[n-1]),n%e==0&&(this.trainingsRows.push(this.trainingsCells),this.trainingsCells=[]);0!==this.trainingsCells.length&&this.trainingsRows.push(this.trainingsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrainingOption(e){this.availableTrainingOptions.forEach(n=>{n.isSelected=!1}),e.isSelected=!0,this.selectedTrainingOption.emit(e)}ngOnChanges(e){this.availableTrainingOptions=e.availableTrainingOptions.currentValue,this.setupDisplayTrainings()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt))},t.\u0275cmp=dt({type:t,selectors:[["app-training-list"]],hostBindings:function(e,n){1&e&&I("resize",function(a){return n.onResize(a)},!1,Ya)},inputs:{availableTrainingOptions:"availableTrainingOptions"},outputs:{selectedTrainingOption:"selectedTrainingOption"},features:[Oi],decls:4,vars:1,consts:[[1,"trainingsView"],[1,"trainings"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trainingOption"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,nU,2,1,"tr",2),h()()()),2&e&&(p(3),b("ngForOf",n.trainingsRows))},directives:[Yn,Hn,J6],styles:[".trainingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.trainings[_ngcontent-%COMP%]{margin:.5rem}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function rU(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),nt(e.selectedAnimal.name)}}function aU(t,i){if(1&t&&(f(0,"h6",3),x(1,rU,2,1,"span",2),D(2,"br"),f(3,"span"),g(4),h()()),2&t){const e=w();p(1),b("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),nt(e.selectedAnimal.getAnimalType())}}function oU(t,i){if(1&t&&(f(0,"h6",3)(1,"span"),g(2),h()()),2&t){const e=w();p(2),nt(e.selectedAnimal.getAnimalType())}}function sU(t,i){if(1&t&&(f(0,"div"),D(1,"br")(2,"br"),f(3,"h6",3)(4,"em"),g(5),h()()()),2&t){const e=w();p(5),Wn("",e.trainingTrackRewardsRemaining," / ",e.trainingTrackTotalRewards," rewards remaining")}}let lU=(()=>{class t{constructor(){this.isTrainingTrackView=!1,this.trainingTrackRewardsRemaining=0,this.trainingTrackTotalRewards=0}ngOnInit(){this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.isTrainingTrackView&&(this.trainingTrackRewardsRemaining=this.selectedAnimal.allTrainingTracks.getTotalRewardsRemaining(),this.trainingTrackTotalRewards=this.selectedAnimal.allTrainingTracks.getTotalRewardCount())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=dt({type:t,selectors:[["app-animal"]],inputs:{selectedAnimal:"selectedAnimal",isTrainingTrackView:"isTrainingTrackView"},decls:8,vars:5,consts:[[1,"keyword","animal",3,"ngClass"],["class","keyword",4,"ngIf"],[4,"ngIf"],[1,"keyword"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,aU,5,2,"h6",1),x(2,oU,3,1,"h6",1),D(3,"br")(4,"br"),f(5,"span"),g(6),h(),x(7,sU,6,2,"div",2),h()),2&e&&(b("ngClass",n.colorConditional),p(1),b("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),p(1),b("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),p(4),nt(n.selectedAnimal.getRaceCourseType()),p(1),b("ngIf",n.isTrainingTrackView))},directives:[Hn,an],styles:[".animal[_ngcontent-%COMP%]{margin:.5rem}"]}),t})();function cU(t,i){if(1&t){const e=ge();f(0,"td")(1,"div",3),I("click",function(){const a=B(e).$implicit;return w(2).selectAnimal(a)}),D(2,"app-animal",4),h()()}if(2&t){const e=i.$implicit,n=w(2);p(2),b("selectedAnimal",e)("isTrainingTrackView",n.isTrainingTrackView)}}function uU(t,i){if(1&t&&(f(0,"tr"),x(1,cU,3,2,"td",2),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}let Sf=(()=>{class t{constructor(e){this.globalService=e,this.isTrainingTrackView=!1,this.selectedAnimal=new rt}ngOnInit(){this.setupDisplayAnimals()}setupDisplayAnimals(){this.animalCells=[],this.animalRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableAnimals.length;n++)this.animalCells.push(this.availableAnimals[n-1]),n%e==0&&(this.animalRows.push(this.animalCells),this.animalCells=[]);0!==this.animalCells.length&&this.animalRows.push(this.animalCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectAnimal(e){this.selectedAnimal.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(A(Rt))},t.\u0275cmp=dt({type:t,selectors:[["app-animal-list"]],hostBindings:function(e,n){1&e&&I("resize",function(a){return n.onResize(a)},!1,Ya)},inputs:{availableAnimals:"availableAnimals",isTrainingTrackView:"isTrainingTrackView"},outputs:{selectedAnimal:"selectedAnimal"},decls:4,vars:1,consts:[[1,"animalsView"],[1,"animals"],[4,"ngFor","ngForOf"],[1,"clickableText",3,"click"],[3,"selectedAnimal","isTrainingTrackView"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,uU,2,1,"tr",2),h()()()),2&e&&(p(3),b("ngForOf",n.animalRows))},directives:[Yn,lU],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();const dU=["specializationModal"];function hU(t,i){if(1&t){const e=ge();f(0,"div")(1,"span",38),I("click",function(){B(e);const r=w(2),a=at(16);return r.openBarnUpgradeModal(a)}),g(2),h(),D(3,"br")(4,"br"),f(5,"span",39)(6,"button",40),I("click",function(){return B(e),w(2).upgradeBarn()}),g(7),h()()()}if(2&t){const e=w(2),n=at(4),r=at(6);p(1),b("ngbPopover",n),p(1),Q("Barn Level ",e.barn.barnUpgrades.barnLevel,""),p(3),b("ngbPopover",r),p(1),b("disabled",!e.canUpgrade),p(1),nt(e.upgradeText)}}function fU(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(3);p(1),nt(e.associatedAnimal.name)}}function pU(t,i){if(1&t){const e=ge();f(0,"button",41),I("click",function(){return B(e),w(2).goToAnimal()}),x(1,fU,2,1,"span",13),D(2,"br"),f(3,"span"),g(4),h()()}if(2&t){const e=w(2);b("ngClass",e.colorConditional),p(1),b("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(3),nt(e.associatedAnimal.getAnimalType())}}function gU(t,i){if(1&t){const e=ge();f(0,"button",42),I("click",function(){return B(e),w(2).goToAnimal()}),f(1,"span"),g(2),h()()}if(2&t){const e=w(2);b("ngClass",e.colorConditional),p(2),nt(e.associatedAnimal.getAnimalType())}}function mU(t,i){if(1&t){const e=ge();f(0,"span",39)(1,"button",43),I("click",function(){return B(e),w(2).upgradeBarnSize()}),g(2,"Build"),h()()}if(2&t){const e=w(2);b("ngbPopover",at(8)),p(1),b("disabled",!e.canBuild)}}function vU(t,i){if(1&t&&(f(0,"div",39)(1,"span",44),g(2),h(),D(3,"br"),f(4,"span")(5,"em"),g(6),Vt(7,"number"),h()()()),2&t){const e=w(2);b("ngbPopover",at(10)),p(2),Q("",e.existingTraining.trainingName," "),p(4),Q("(",rn(7,3,e.existingTraining.trainingTimeRemaining/60,"1.0-0")," min remaining)")}}function bU(t,i){1&t&&(f(0,"div",39)(1,"span"),g(2,"No Training Assigned"),h()()),2&t&&(w(2),b("ngbPopover",at(12)))}function _U(t,i){if(1&t){const e=ge();f(0,"div")(1,"span")(2,"button",12),I("click",function(){return B(e),w(2).goToCoaching()}),g(3,"Coach"),h()()()}}function yU(t,i){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"p",45),D(3,"ngb-progressbar",46),f(4,"span",47),g(5),Vt(6,"number"),h()(),D(7,"br"),h()),2&t){const e=w(2);p(3),b("value",e.trainingProgressBarPercent),p(2),Q("",rn(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}function wU(t,i){if(1&t){const e=ge();f(0,"app-training-list",48),I("selectedTrainingOption",function(r){return B(e),w(2).selectNewTraining(r)}),h()}2&t&&b("availableTrainingOptions",w(2).availableTrainings)}function CU(t,i){1&t&&(f(0,"div",49),g(1," This animal is currently busy and cannot train. "),h())}const SU=function(t){return{sizeSpacing:t}};function TU(t,i){if(1&t){const e=ge();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"button",12),I("click",function(){return B(e),w().unassignAnimal()}),g(5,"Unassign"),h(),D(6,"br")(7,"br"),x(8,hU,8,5,"div",13),h(),f(9,"div",14)(10,"span"),g(11),h(),D(12,"br"),x(13,pU,5,3,"button",15),x(14,gU,3,2,"button",16),f(15,"div")(16,"span",17),g(17),h(),x(18,mU,3,2,"span",18),h(),D(19,"hr"),x(20,vU,8,6,"div",18),x(21,bU,3,1,"div",18),h(),f(22,"div",19)(23,"button",12),I("click",function(){return B(e),w().returnToBarnView()}),g(24,"Back"),h(),D(25,"br")(26,"br")(27,"br")(28,"br"),x(29,_U,4,0,"div",13),h()(),D(30,"hr"),x(31,yU,8,5,"div",13),D(32,"br"),f(33,"div",20)(34,"span",21),I("click",function(){return B(e),w().resetFilters()}),g(35,"Change Training"),h(),D(36,"br"),f(37,"span",22)(38,"em"),g(39,"Click an option below to start training."),h()()(),D(40,"br"),f(41,"div",23)(42,"div",24)(43,"button",25),I("click",function(){return B(e),w().toggleFacilityFilter("Small")}),g(44,"Small "),h(),f(45,"button",26),I("click",function(){return B(e),w().toggleFacilityFilter("Medium")}),g(46,"Medium "),h(),f(47,"button",27),I("click",function(){return B(e),w().toggleFacilityFilter("Large")}),g(48,"Large "),h()(),f(49,"button",28)(50,"span",12),I("click",function(){return B(e),w().resetFilters()}),g(51,"Reset Filters"),h()(),f(52,"div",29)(53,"button",30),I("click",function(){return B(e),w().toggleStatFilter("Speed")}),g(54,"SPD "),h(),f(55,"button",31),I("click",function(){return B(e),w().toggleStatFilter("Acceleration")}),g(56,"ACC "),h(),f(57,"button",32),I("click",function(){return B(e),w().toggleStatFilter("Endurance")}),g(58,"END "),h(),f(59,"button",33),I("click",function(){return B(e),w().toggleStatFilter("Power")}),g(60,"PWR "),h(),f(61,"button",34),I("click",function(){return B(e),w().toggleStatFilter("Focus")}),g(62,"FCS "),h(),f(63,"button",35),I("click",function(){return B(e),w().toggleStatFilter("Adaptability")}),g(64,"ADP"),h()()(),D(65,"br"),f(66,"div",17),x(67,wU,1,1,"app-training-list",36),x(68,CU,2,0,"div",37),h()()()}if(2&t){const e=w();p(8),b("ngIf",e.barnSpecializationsUnlocked),p(3),Q(" ",e.barnName,""),p(2),b("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),b("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(2),b("ngClass",ri(32,SU,"Large"!==e.sizeValue)),p(1),Q("",e.sizeValue," "),p(1),b("ngIf","Large"!==e.sizeValue),p(2),b("ngIf",null!=e.existingTraining),p(1),b("ngIf",null==e.existingTraining),p(8),b("ngIf",e.coachingUnlocked),p(2),b("ngIf",null!=e.existingTraining),p(12),wt("filterActive",e.filterSmall),p(2),wt("filterActive",e.filterMedium),p(2),wt("filterActive",e.filterLarge),p(6),wt("filterActive",e.filterSpeed),p(2),wt("filterActive",e.filterAcceleration),p(2),wt("filterActive",e.filterEndurance),p(2),wt("filterActive",e.filterPower),p(2),wt("filterActive",e.filterFocus),p(2),wt("filterActive",e.filterAdaptability),p(3),b("ngClass",e.tutorialActive?"tutorialActive":""),p(1),b("ngIf",e.associatedAnimal.canTrain),p(1),b("ngIf",!e.associatedAnimal.canTrain)}}function DU(t,i){if(1&t){const e=ge();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",14)(4,"span"),g(5),h(),D(6,"br"),f(7,"span"),g(8,"Unassigned"),h()(),f(9,"div",19)(10,"button",12),I("click",function(){return B(e),w().returnToBarnView()}),g(11,"Back"),h()()(),D(12,"hr")(13,"br"),f(14,"span"),g(15,"Assign Animal"),h(),D(16,"br")(17,"br"),f(18,"app-animal-list",50),I("selectedAnimal",function(r){return B(e),w().assignAnimal(r)}),h()()()}if(2&t){const e=w();p(5),Q("Barn ",e.selectedBarnNumber,""),p(13),b("availableAnimals",e.availableAnimals)}}function RU(t,i){if(1&t){const e=ge();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",14)(4,"span"),g(5),h(),D(6,"br"),f(7,"span"),g(8,"Locked"),h()(),f(9,"div",19)(10,"button",12),I("click",function(){return B(e),w().returnToBarnView()}),g(11,"Back"),h()()(),D(12,"hr")(13,"br"),f(14,"div",51)(15,"span"),g(16,"Purchase Barn"),h(),D(17,"br")(18,"br"),f(19,"span",52),g(20),h(),D(21,"br"),f(22,"button",53),I("click",function(){return B(e),w().purchaseBarn()}),g(23,"Buy"),h()()()()}if(2&t){const e=w();p(5),Q("Barn ",e.selectedBarnNumber,""),p(15),Q("",e.barn.purchasePrice," Coins"),p(2),b("disabled",!e.canPurchaseBarn())}}function xU(t,i){if(1&t&&(f(0,"div",55),D(1,"div",56),h()),2&t){const e=w(2);p(1),b("innerHTML",e.totalBarnStatsPopover,Nt)}}function MU(t,i){1&t&&x(0,xU,2,1,"div",54),2&t&&b("ngIf",""!==w().totalBarnStatsPopover)}function kU(t,i){if(1&t&&(f(0,"div",55),g(1),h()),2&t){const e=w(2);p(1),Q(" ",e.upgradeBarnPopover," ")}}function AU(t,i){1&t&&x(0,kU,2,1,"div",54),2&t&&b("ngIf",""!==w().upgradeBarnPopover)}function PU(t,i){if(1&t&&(f(0,"div",55),g(1),h()),2&t){const e=w(2);p(1),Q(" ",e.buildBiggerBarnPopover," ")}}function EU(t,i){1&t&&x(0,PU,2,1,"div",54),2&t&&b("ngIf",""!==w().buildBiggerBarnPopover)}function IU(t,i){1&t&&D(0,"div",58),2&t&&b("innerHTML",w(2).currentTrainingPopover,Nt)}function OU(t,i){1&t&&x(0,IU,1,1,"div",57),2&t&&b("ngIf",""!==w().currentTrainingPopover)}function NU(t,i){1&t&&D(0,"div",58),2&t&&b("innerHTML",w(2).currentTrainingPopover,Nt)}function VU(t,i){1&t&&x(0,NU,1,1,"div",57),2&t&&b("ngIf",""!==w().currentTrainingPopover)}const qR=function(t){return{selectedSpecialization:t}};function FU(t,i){if(1&t){const e=ge();f(0,"span",69),I("click",function(){const a=B(e).$implicit;return w(3).filterSpecialization(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=w(3);b("ngClass",ri(2,qR,n.selectedSpecialization===e)),p(1),Q(" ",e.trim()," ")}}function BU(t,i){if(1&t&&(f(0,"div",67),x(1,FU,2,4,"span",68),h()),2&t){const e=w(2);p(1),b("ngForOf",e.specializationOptions)}}function LU(t,i){if(1&t&&(f(0,"div"),g(1),D(2,"br")(3,"br"),f(4,"strong"),g(5),h()()),2&t){const e=w(2);p(1),Q(" ",e.specializationDescription," "),p(4),Q(" ",e.inDepthSpecializationDescription," ")}}function UU(t,i){if(1&t){const e=ge();f(0,"div",59)(1,"form")(2,"div",60)(3,"h4",61),g(4,"Choose Barn Specialization"),h(),f(5,"button",62),I("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div",63),x(8,BU,2,1,"div",64),D(9,"hr"),x(10,LU,6,2,"div",13),h(),f(11,"div",65)(12,"button",66),I("click",function(){return B(e),w().selectSpecialization()}),g(13,"Select"),h()()()()}if(2&t){const e=w();p(8),b("ngIf",e.specializationOptions.length>0),p(2),b("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription)}}function HU(t,i){if(1&t){const e=ge();f(0,"span",69),I("click",function(){const a=B(e).$implicit;return w(4).filterSpecialization(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=w(4);b("ngClass",ri(2,qR,n.selectedSpecialization===e)),p(1),Q(" ",e.trim()," ")}}function GU(t,i){if(1&t&&(f(0,"div",67),x(1,HU,2,4,"span",68),h()),2&t){const e=w(3);p(1),b("ngForOf",e.specializationOptions)}}function jU(t,i){if(1&t&&(f(0,"div"),g(1),D(2,"br")(3,"br"),f(4,"strong"),g(5),h(),D(6,"br")(7,"br"),h()),2&t){const e=w(3);p(1),Q(" ",e.specializationDescription," "),p(4),Q(" ",e.inDepthSpecializationDescription," ")}}function zU(t,i){if(1&t){const e=ge();f(0,"div",72)(1,"div",73)(2,"span",74),g(3,"Reset Barn Specialization"),h(),D(4,"br"),f(5,"em"),g(6," Tear down your barn to build up something new. Each barn can be reset as many times as you want, but "),f(7,"strong"),g(8,"it only retains 80% of its current Barn Level after being reset."),h()()(),D(9,"br"),f(10,"div")(11,"div",75),x(12,GU,2,1,"div",64),D(13,"hr"),x(14,jU,8,2,"div",13),h(),f(15,"div",76)(16,"span"),g(17),h(),f(18,"button",66),I("click",function(){return B(e),w(2).resetSpecialization()}),g(19,"Reset Specialization"),h()()()()}if(2&t){const e=w(2);p(12),b("ngIf",e.specializationOptions.length>0),p(2),b("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription),p(3),Q("New Barn Level will be ",e.postResetBarnUpgradeLevel,"")}}function $U(t,i){if(1&t){const e=ge();f(0,"div",59)(1,"div",60)(2,"h4",61),g(3,"Barn Upgrade Info"),h(),f(4,"button",62),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",63)(7,"div",70),D(8,"div",56)(9,"br"),g(10),D(11,"br")(12,"hr"),x(13,zU,20,3,"div",71),h()()()}if(2&t){const e=w();p(8),b("innerHTML",e.totalBarnStatsPopover,Nt),p(2),Q(" ",e.upgradeBarnPopover," "),p(3),b("ngIf",e.barn.barnUpgrades.specializationLevel>0)}}let qU=(()=>{class t{constructor(e,n,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=n,this.modalService=r,this.lookupService=a,this.componentCommunicationService=o,this.specializationService=s,this.tutorialService=l,this.utilityService=c,this.returnToBarnEmitter=new rt,this.isCoachingEmitter=new rt,this.canUpgrade=!1,this.canBuild=!1,this.barnSpecializationsUnlocked=!1,this.coachingUnlocked=!1,this.tutorialActive=!1,this.postResetBarnUpgradeLevel=0,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1}keyEvent(e){var n=this.lookupService.getAvailableBarns().filter(s=>void 0!==s),r=n.findIndex(s=>this.selectedBarnNumber===s.barnNumber);if("ArrowLeft"===e.key)r>-1&&(null!=this.subscription&&this.subscription.unsubscribe(),(a=r-1)<0&&(a=n.length-1),this.componentCommunicationService.setBarnView(mt.barn,(o=n[a]).barnNumber),this.resetSelectedBarnInfo(o));else if("ArrowRight"===e.key&&r>-1){var a,o;null!=this.subscription&&this.subscription.unsubscribe(),(a=r+1)===n.length&&(a=0),this.componentCommunicationService.setBarnView(mt.barn,(o=n[a]).barnNumber),this.resetSelectedBarnInfo(o)}}ngOnInit(){var e=this;if(this.handleTutorial(),this.tutorialSubscription=this.gameLoopService.gameUpdateEvent.subscribe(ar(function*(){!e.globalService.globalVar.tutorials.tutorialCompleted&&e.globalService.globalVar.tutorials.currentTutorialId>3&&e.handleSecondaryTutorial()})),this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var n=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.selectedBarnNumber);null!=n&&this.resetSelectedBarnInfo(n)}}selectNewTraining(e){var n=this.globalService.globalVar.animals.find(s=>s.associatedBarnNumber===this.selectedBarnNumber);if(null!=n){var r=Object.assign({},e),a="smallBarnTrainingTimeModifier";this.barn.size===ct.Medium?a="mediumBarnTrainingTimeModifier":this.barn.size===ct.Large&&(a="largeBarnTrainingTimeModifier");var o=this.globalService.globalVar.modifiers.find(s=>s.text===a);if(null!=o&&(r.trainingTimeRemaining=o.value),null!=n.currentTraining){if(this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching"))return void(n.queuedTraining=r);n.currentTraining.timeTrained=0}n.currentTraining=r,this.existingTraining=r,!this.globalService.globalVar.tutorials.tutorialCompleted&&2===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.componentCommunicationService.setAnimalView(mt.animals,this.associatedAnimal))}}GetAvailableTrainingOptions(e){var n=[];if(null==this.globalService.globalVar||null==this.globalService.globalVar.trainingOptions||0===this.globalService.globalVar.trainingOptions.length)return n;n=this.globalService.globalVar.trainingOptions.filter(o=>o.isAvailable&&(o.facilitySize===ct.Small||o.facilitySize===ct.Medium&&(this.barn.size===ct.Medium||this.barn.size===ct.Large)||o.facilitySize===ct.Large&&this.barn.size===ct.Large));var r=[];n.forEach(o=>{var s=o.makeCopy(o),l=this.lookupService.getTrainingTimeReductionFromTrainingFacility(this.barn.barnUpgrades),c=this.lookupService.getResourceByName("Stopwatch");null==c&&(c=0),s.timeToComplete*=1-(.05*c+l+e.miscStats.trainingTimeReduction/100),s.timeToComplete=Math.round(100*(s.timeToComplete+Number.EPSILON))/100,e.raceCourseType===z.Mountain&&(s.trainingType===Ve.ShortTrackRunning&&(s.trainingName="Short Track Climbing"),s.trainingType===Ve.TrailRunning&&(s.trainingName="Trail Climbing"),s.trainingType===Ve.LongTrackRunning&&(s.trainingName="Long Track Climbing")),e.raceCourseType===z.Ocean&&(s.trainingType===Ve.ShortTrackRunning&&(s.trainingName="Short Track Swimming"),s.trainingType===Ve.TrailRunning&&(s.trainingName="Lane Swimming"),s.trainingType===Ve.SmallWagonTow&&(s.trainingName="Small Canoe Tow"),s.trainingType===Ve.UphillRun&&(s.trainingName="Upstream Swim"),s.trainingType===Ve.LongTrackRunning&&(s.trainingName="Long Track Swimming"),s.trainingType===Ve.VehicleTow&&(s.trainingName="Boat Tow"),s.trainingType===Ve.GreenwayHike&&(s.trainingName="Canal Adventure")),s.affectedStatRatios.topSpeed*=this.barn.barnUpgrades.upgradedStatGain.topSpeed,s.affectedStatRatios.acceleration*=this.barn.barnUpgrades.upgradedStatGain.acceleration,s.affectedStatRatios.endurance*=this.barn.barnUpgrades.upgradedStatGain.endurance,s.affectedStatRatios.power*=this.barn.barnUpgrades.upgradedStatGain.power,s.affectedStatRatios.focus*=this.barn.barnUpgrades.upgradedStatGain.focus,s.affectedStatRatios.adaptability*=this.barn.barnUpgrades.upgradedStatGain.adaptability;var u=1,d=1,m=1,v=1,_=1,y=1;e.talentTree.talentTreeType===ht.sprint&&(y=1+e.talentTree.column1Row1Points/100,d=1+e.talentTree.column2Row1Points/100,v=1+e.talentTree.column3Row1Points/100),e.talentTree.talentTreeType===ht.longDistance&&(_=1+e.talentTree.column1Row1Points/100,u=1+e.talentTree.column2Row1Points/100,m=1+e.talentTree.column3Row1Points/100),s.affectedStatRatios.topSpeed*=u,s.affectedStatRatios.acceleration*=d,s.affectedStatRatios.endurance*=m,s.affectedStatRatios.power*=v,s.affectedStatRatios.focus*=_,s.affectedStatRatios.adaptability*=y,s.affectedStatRatios.topSpeed=Math.round(100*(s.affectedStatRatios.topSpeed+Number.EPSILON))/100,s.affectedStatRatios.acceleration=Math.round(100*(s.affectedStatRatios.acceleration+Number.EPSILON))/100,s.affectedStatRatios.endurance=Math.round(100*(s.affectedStatRatios.endurance+Number.EPSILON))/100,s.affectedStatRatios.power=Math.round(100*(s.affectedStatRatios.power+Number.EPSILON))/100,s.affectedStatRatios.focus=Math.round(100*(s.affectedStatRatios.focus+Number.EPSILON))/100,s.affectedStatRatios.adaptability=Math.round(100*(s.affectedStatRatios.adaptability+Number.EPSILON))/100,r.push(s)}),(this.filterAcceleration||this.filterAdaptability||this.filterEndurance||this.filterFocus||this.filterPower||this.filterSpeed||this.filterSmall||this.filterMedium||this.filterLarge)&&(r=r.filter(o=>(!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterAcceleration&&o.affectedStatRatios.acceleration>0||this.filterAdaptability&&o.affectedStatRatios.adaptability>0||this.filterEndurance&&o.affectedStatRatios.endurance>0||this.filterFocus&&o.affectedStatRatios.focus>0||this.filterPower&&o.affectedStatRatios.power>0||this.filterSpeed&&o.affectedStatRatios.topSpeed>0)&&(!this.filterSmall&&!this.filterMedium&&!this.filterLarge||this.filterSmall&&o.facilitySize===ct.Small||this.filterMedium&&o.facilitySize===ct.Medium||this.filterLarge&&o.facilitySize===ct.Large)));var a=r.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});return null!=a&&this.animalAssigned&&(a.isSelected=!0),r}GetAvailableAnimalOptions(){var e=[];return null==this.globalService.globalVar||null==this.globalService.globalVar.animals||0===this.globalService.globalVar.animals.length||(e=this.globalService.globalVar.animals.filter(n=>n.isAvailable&&(void 0===n.associatedBarnNumber||n.associatedBarnNumber<=0))),e}unassignAnimal(){var e=this.globalService.globalVar.animals.find(n=>n.associatedBarnNumber==this.selectedBarnNumber);null!=e&&(e.associatedBarnNumber=0,e.currentTraining=null),this.existingTraining=null,this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions()}assignAnimal(e){e.associatedBarnNumber=this.selectedBarnNumber,this.animalAssigned=!0,this.availableAnimals=this.GetAvailableAnimalOptions(),this.availableTrainings=this.GetAvailableTrainingOptions(e),this.associatedAnimalName=e.name,this.existingTraining=null;var n=this.lookupService.getAnimalByType(e.type);null!==n&&(n.associatedBarnNumber=this.selectedBarnNumber,this.associatedAnimal=n,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()}),!this.globalService.globalVar.tutorials.tutorialCompleted&&7===this.globalService.globalVar.tutorials.currentTutorialId&&this.associatedAnimal.type===X.Monkey&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}returnToBarnView(){this.returnToBarnEmitter.emit(0)}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}toggleFacilityFilter(e){"Small"===e&&(this.filterSmall=!this.filterSmall),"Medium"===e&&(this.filterMedium=!this.filterMedium),"Large"===e&&(this.filterLarge=!this.filterLarge),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1,this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}purchaseBarn(){this.lookupService.getCoins()>=this.barn.purchasePrice&&(this.barn.isLocked=!1,this.lookupService.spendCoins(this.barn.purchasePrice))}canPurchaseBarn(){return this.lookupService.getCoins()>=this.barn.purchasePrice}getSizeValue(){this.sizeValue=this.barn.getSize()}upgradeBarnSize(){if(this.lookupService.getCoins()>=this.barn.facilityUpgradePrice){if(this.lookupService.spendCoins(this.barn.facilityUpgradePrice),this.barn.size===ct.Small)this.barn.size=ct.Medium,this.barn.facilityUpgradePrice=4e3,null!=(n=this.globalService.globalVar.shop.find(r=>"Trainings"===r.name))&&n.itemList.filter(r=>r.additionalIdentifier===ct.Medium.toString()).forEach(r=>{r.isAvailable=!0});else if(this.barn.size===ct.Medium){var n;this.barn.size=ct.Large,null!=(n=this.globalService.globalVar.shop.find(a=>"Trainings"===a.name))&&n.itemList.filter(a=>a.additionalIdentifier===ct.Large.toString()).forEach(a=>{a.isAvailable=!0})}this.getSizeValue(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover()}}upgradeBarn(){var e=this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel);if(this.canUpgradeBarn(e)){if(9===this.barn.barnUpgrades.barnLevel)this.modalService.open(this.specializationModal,{ariaLabelledBy:"modal-basic-title",size:"lg"});else{e.forEach(o=>{this.lookupService.spendResourceByName(o.name,o.amount)}),this.barn.barnUpgrades.barnLevel+=1;var r=.1;if(this.barn.barnUpgrades.barnLevel%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var a=this.barn.barnUpgrades.barnLevel-this.barn.barnUpgrades.specializationLevel;a%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=r:a%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=r:a%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=r:a%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=r:a%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=r:a%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=r)}this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover()}this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}else alert("You don't have the required resources to upgrade your barn.")}canUpgradeBarn(e){var n=!0;return e.forEach(r=>{this.lookupService.getResourceByName(r.name)<r.amount&&(n=!1)}),n}canBuildLargerBarn(){var e=!1;return this.lookupService.getCoins()>=this.barn.facilityUpgradePrice&&(e=!0),e}getTotalBarnStatsPopover(){var e="Upgrade to gain barn bonuses";return this.barn.barnUpgrades.barnLevel>=1&&(e="Barn Upgrades: <br/>"),this.barn.barnUpgrades.specialization===jt.TrainingFacility?e+=this.specializationService.getSpecializationPopoverText(jt.TrainingFacility,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===jt.BreedingGrounds?e+=this.specializationService.getSpecializationPopoverText(jt.BreedingGrounds,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===jt.Attraction?e+=this.specializationService.getSpecializationPopoverText(jt.Attraction,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===jt.ResearchCenter&&(e+=this.specializationService.getSpecializationPopoverText(jt.ResearchCenter,this.barn.barnUpgrades.specializationLevel)),this.barn.barnUpgrades.upgradedStatGain.adaptability>1&&(e+="Adaptability Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.adaptability.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.focus>1&&(e+="Focus Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.focus.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.power>1&&(e+="Power Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.power.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.endurance>1&&(e+="Endurance Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.endurance.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.acceleration>1&&(e+="Acceleration Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.acceleration.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.topSpeed>1&&(e+="Speed Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.topSpeed.toFixed(1)+"<br/>"),null!==this.utilityService.getSanitizedHtml(e)&&(e=this.utilityService.getSanitizedHtml(e)),e}getUpgradeBarnPopover(){var e="Cost for next upgrade: \n";return this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(r=>{var a=r.name;"Medals"===a&&1===r.amount&&(a="Medal"),e+=r.amount+" "+a+"\n"}),e}getBuildLargerBarnPopover(){var e="Cost to build larger barn: \n";return e+=this.barn.facilityUpgradePrice+" Coins \n\n",this.barn.size===ct.Small?e+="You will be able to do Medium trainings and increase idle training time to 4 hours.":this.barn.size===ct.Medium&&(e+="You will be able to do Large trainings and increase idle training time to 8 hours."),e}filterSpecialization(e){this.selectedSpecialization=e,this.specializationDescription=this.globalService.getSpecializationDescription(e),this.inDepthSpecializationDescription=this.lookupService.getInDepthSpecializationDescription(e)}selectSpecialization(){""!==this.selectedSpecialization&&null!=this.selectedSpecialization?(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(n=>{this.lookupService.spendResourceByName(n.name,n.amount)}),this.barn.barnUpgrades.specialization=this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel+=1,this.barn.barnUpgrades.barnLevel+=1,this.barn.barnUpgrades.specialization===jt.TrainingFacility&&(this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="",this.modalService.dismissAll()):alert("You must select a specialization.")}resetSpecialization(){if(""!==this.selectedSpecialization&&null!=this.selectedSpecialization){this.barn.barnUpgrades.barnLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel),this.barn.barnUpgrades.specialization=this.barn.barnUpgrades.barnLevel<10?jt.None:this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel=0,this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="";var e=.1;this.barn.barnUpgrades.upgradedStatGain=new Oe(1,1,1,1,1,1);for(var n=1;n<=this.barn.barnUpgrades.barnLevel;n++)if(n%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var r=n-this.barn.barnUpgrades.specializationLevel;r%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=e:r%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=e:r%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=e:r%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=e:r%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=e:r%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=e)}this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.modalService.dismissAll()}else alert("You must select a specialization.")}goToAnimal(){this.componentCommunicationService.setAnimalView(mt.animals,this.associatedAnimal)}handleTutorial(){var e=this.globalService.globalVar.animals.find(n=>n.type===X.Monkey);this.globalService.globalVar.tutorials.tutorialCompleted||1!==this.globalService.globalVar.tutorials.currentTutorialId?!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)?(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0):this.globalService.globalVar.tutorials.tutorialCompleted||(this.tutorialActive=!1):(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}handleSecondaryTutorial(){var e=this.globalService.globalVar.animals.find(n=>n.type===X.Monkey);!this.globalService.globalVar.tutorials.tutorialCompleted&&8===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)?this.tutorialActive=!0:!this.globalService.globalVar.tutorials.tutorialCompleted&&this.globalService.globalVar.tutorials.currentTutorialId>3&&(this.tutorialActive=!1)}resetSelectedBarnInfo(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.upgradeText="Upgrade",this.barnSpecializationsUnlocked=this.lookupService.isItemUnlocked("barnSpecializations"),this.coachingUnlocked=this.lookupService.isItemUnlocked("coaching"),this.selectedBarnNumber=e.barnNumber,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var n=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedBarnNumber);if(void 0!==n){this.barn=n,this.barnName=this.lookupService.getBarnName(n),this.getSizeValue(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize");var r=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.selectedBarnNumber);if(null!=r){if(this.animalAssigned=!0,this.associatedAnimal=r,this.associatedAnimalName=r.name,this.existingTraining=r.currentTraining,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()},this.availableTrainings=this.GetAvailableTrainingOptions(r),this.currentTrainingPopover=this.getCurrentTrainingPopover(r),null!=this.existingTraining){var a=this.availableTrainings.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});null!=a&&(a.isSelected=!0)}}else this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions();this.componentCommunicationService.setBarnView(mt.barn,this.selectedBarnNumber),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(o=>{if(!this.barn.isLocked){var s=this.globalService.globalVar.animals.find(c=>c.associatedBarnNumber==this.selectedBarnNumber);if(null!=s){if(null==s.currentTraining){if(null!==this.existingTraining){var l=this.availableTrainings.find(c=>{var u;return(null===(u=this.existingTraining)||void 0===u?void 0:u.trainingName)===c.trainingName});null!=l&&(l.isSelected=!1),this.existingTraining=null}return}s.currentTraining!==this.existingTraining&&(this.existingTraining=s.currentTraining),this.trainingProgressBarPercent>=100&&(this.trainingProgressBarPercent=100),this.trainingProgressBarPercent=s.currentTraining.timeTrained/s.currentTraining.timeToComplete*100,this.currentTrainingPopover=this.getCurrentTrainingPopover(s)}}})}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}getCurrentTrainingPopover(e){var n="";null!=e.currentTraining&&(n+=e.currentTraining.trainingName+"\n"+this.lookupService.getStatGainDescription(e.currentTraining.affectedStatRatios,e.currentTraining.statGain)+"\n"),n+=e.name+" Current Stats:\n",n+="Speed: "+Math.round(e.currentStats.topSpeed).toLocaleString()+"\n",n+="Acceleration: "+Math.round(e.currentStats.acceleration).toLocaleString()+"\n",n+="Endurance: "+Math.round(e.currentStats.endurance).toLocaleString()+"\n",n+="Power: "+Math.round(e.currentStats.power).toLocaleString()+"\n",n+="Focus: "+Math.round(e.currentStats.focus).toLocaleString()+"\n",n+="Adaptability: "+Math.round(e.currentStats.adaptability).toLocaleString()+"\n",n+="Diminishing Returns: "+this.globalService.GetAnimalDiminishingReturns(e);var r=this.utilityService.getSanitizedHtml(n);return null!==r&&(n=r),n}goToCoaching(){this.isCoachingEmitter.emit(!0)}openBarnUpgradeModal(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.barn.barnUpgrades.specialization!==jt.None){var n=this.lookupService.convertSpecializationEnumToName(this.barn.barnUpgrades.specialization);this.specializationOptions=this.specializationOptions.filter(r=>r!==n),this.postResetBarnUpgradeLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel)}this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.tutorialSubscription&&this.tutorialSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(_i),A(lo),A(hn),A(Zn),A(Yv),A(yD),A(Ri))},t.\u0275cmp=dt({type:t,selectors:[["app-selected-barn"]],viewQuery:function(e,n){if(1&e&&ca(dU,7),2&e){let r;fn(r=pn())&&(n.specializationModal=r.first)}},hostBindings:function(e,n){1&e&&I("keyup",function(a){return n.keyEvent(a)},!1,Ya)},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{returnToBarnEmitter:"returnToBarnEmitter",isCoachingEmitter:"isCoachingEmitter"},decls:17,vars:3,consts:[["class","selectedBarnModal",4,"ngIf"],["totalBarnStatsContent",""],["upgradeBarnContent",""],["costToBuildContent",""],["noTrainingContent",""],["currentTrainingContent",""],["specializationModal",""],["barnUpgradeContent",""],[1,"selectedBarnModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"unassign"],[3,"click"],[4,"ngIf"],[1,"info"],["class","keyword buttonAsTextKeepColor clickableText",3,"ngClass","click",4,"ngIf"],["class","clickableText keyword buttonAsTextKeepColor",3,"ngClass","click",4,"ngIf"],[3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"back"],[1,"changeTrainingHeader"],[1,"s4Heading",3,"click"],[1,"trainingDescription"],[1,"filterGridContainer"],[1,"facilitySizeFilter","clickableText","filterMargins"],["id","smallFilter",1,"buttonAsText",3,"click"],["id","mediumFilter",1,"buttonAsText",3,"click"],["id","largeFilter",1,"buttonAsText",3,"click"],[1,"resetFiltersHeader","buttonAsText","clickableText"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTrainingOptions","selectedTrainingOption",4,"ngIf"],["class","keyword",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[1,"keyword","buttonAsTextKeepColor","clickableText",3,"ngClass","click"],[1,"clickableText","keyword","buttonAsTextKeepColor",3,"ngClass","click"],[1,"sizeButtonSpacing",3,"disabled","click"],[1,"activeTrainingOption"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"],[3,"availableTrainingOptions","selectedTrainingOption"],[1,"keyword"],[3,"availableAnimals","selectedAnimal"],[1,"purchaseBarn"],[1,"price","resourceKeyword"],["id","purchaseButton",3,"disabled","click"],["class","popoverClass",4,"ngIf"],[1,"popoverClass"],[3,"innerHTML"],["class","popoverClass",3,"innerHTML",4,"ngIf"],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],["class","typeContainer",4,"ngIf"],[1,"modal-footer"],["type","button",3,"click"],[1,"typeContainer"],["class","specializationType subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"specializationType","subHeading",3,"ngClass","click"],[1,"upgradeBarnInfo"],["class","resetBarn",4,"ngIf"],[1,"resetBarn"],[1,"resetSpecializationInfo"],[1,"s4Heading"],[1,"resetSpecializationOptions"],[1,"modal-footer","spaceEvenly"]],template:function(e,n){1&e&&(x(0,TU,69,34,"div",0),x(1,DU,19,2,"div",0),x(2,RU,24,3,"div",0),x(3,MU,1,1,"ng-template",null,1,ot),x(5,AU,1,1,"ng-template",null,2,ot),x(7,EU,1,1,"ng-template",null,3,ot),x(9,OU,1,1,"ng-template",null,4,ot),x(11,VU,1,1,"ng-template",null,5,ot),x(13,UU,14,2,"ng-template",null,6,ot),x(15,$U,14,3,"ng-template",null,7,ot)),2&e&&(b("ngIf",n.animalAssigned&&!n.barn.isLocked),p(1),b("ngIf",!n.animalAssigned&&!n.barn.isLocked),p(1),b("ngIf",n.barn.isLocked))},directives:[an,Or,Hn,T0,iU,Sf,Ah,wh,Qc,Yn],pipes:[no],styles:['ngb-modal-backdrop{z-index:1050!important}.selectedBarnModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}.infoText[_ngcontent-%COMP%]{text-align:center}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"unassign info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.trainingDescription[_ngcontent-%COMP%]{text-align:center}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.facilitySizeFilter[_ngcontent-%COMP%]{grid-area:facilitySizeFilter}.resetFiltersHeader[_ngcontent-%COMP%]{grid-area:resetFiltersHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.changeTrainingHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.specializationType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedSpecialization[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.sizeButtonSpacing[_ngcontent-%COMP%]{width:4rem}.sizeSpacing[_ngcontent-%COMP%]{margin-left:4rem}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.spaceEvenly[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}.resetSpecializationInfo[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:2fr 1fr 2fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}}']}),t})();var Jn=(()=>{return(t=Jn||(Jn={}))[t.speed=0]="speed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",t[t.special=6]="special",Jn;var t})();const WU=["coachingCanvas"],XU=["drawCoaching"];let YU=(()=>{class t{constructor(e,n,r,a){this.gameLoopService=e,this.globalService=n,this.themeService=r,this.utilityService=a,this.isCoachingEmitter=new rt,this.isPointerDown=!1,this.activePoints=[],this.currentEndPoint=0,this.currentX=0,this.currentY=0,this.getNewPath=!1}ngOnInit(){if(this.successfulAttemptStreak=0,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var n=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=n){this.associatedAnimal=n;var r="coloredText "+this.associatedAnimal.getCourseTypeClass();this.animalDisplayName="<span class='"+r+"'>"+this.associatedAnimal.name+"</span>"}}this.incrementalCoachingUpdates="You bring "+this.animalDisplayName+" out into an open area for practice.\n"}ngAfterViewInit(){this.setupCanvas(),null!=this.drawCoaching&&(this.canvasOffsetX=this.drawCoaching.nativeElement.offsetLeft,this.canvasOffsetY=this.drawCoaching.nativeElement.offsetTop),this.context=this.coachingCanvas.nativeElement.getContext("2d"),this.context.lineWidth=6,this.currentPathType=this.getRandomPathType(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(n=>{this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=6,this.displayTrace(this.context,0)})}setupCanvas(){this.coachingCanvas.nativeElement.style.width="100%",this.coachingCanvas.nativeElement.style.height="100%",this.coachingCanvas.nativeElement.width=this.coachingCanvas.nativeElement.offsetWidth,this.coachingCanvas.nativeElement.height=this.coachingCanvas.nativeElement.offsetHeight,this.canvasHeight=this.coachingCanvas.nativeElement.height,this.canvasWidth=this.coachingCanvas.nativeElement.width}displayTrace(e,n){e.lineCap="round",e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.currentPathType===Jn.speed&&(this.activePoints=this.drawSpeedTrace(e)),this.currentPathType===Jn.acceleration&&(this.activePoints=this.drawAccelerationTrace(e)),this.currentPathType===Jn.endurance&&(this.activePoints=this.drawEnduranceTrace(e)),this.currentPathType===Jn.power&&(this.activePoints=this.drawPowerTrace(e)),this.currentPathType===Jn.focus&&(this.activePoints=this.drawFocusTrace(e)),this.currentPathType===Jn.adaptability&&(this.activePoints=this.drawAdaptabilityTrace(e)),this.currentPathType===Jn.special&&(this.activePoints=this.drawSpecialTrace(e)),e.strokeStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.globalCompositeOperation="source-atop";for(var r=0;r<this.currentEndPoint;r++)if(r<this.currentEndPoint-1)this.currentPathType===Jn.power&&0===r?(e.beginPath(),e.ellipse(this.activePoints[0][0],this.activePoints[0][1],this.activePoints[0][2],this.activePoints[0][3],this.activePoints[0][4],this.activePoints[0][5],this.activePoints[0][6],!0),e.stroke()):(e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.activePoints[r+1][0],this.activePoints[r+1][1]),e.stroke());else if(this.currentPathType!==Jn.power||0!==r&&2!==r)e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.currentX,this.currentY),e.stroke(),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,this.currentY-5,10,10);else{var a=0;2===r&&(a=3),e.fillStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.fillRect(this.activePoints[a][0]-this.activePoints[a][2]-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],this.currentX-(this.activePoints[a][0]-this.activePoints[a][2]),2*this.activePoints[a][3]+2),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],10,2*this.activePoints[a][3])}}pointerMove(e){if(this.isPointerDown&&null!=this.activePoints&&0!==this.activePoints.length){e.preventDefault(),e.stopPropagation();var n=e.clientX-this.canvasOffsetX,r=e.clientY-this.canvasOffsetY,a=.1*this.canvasWidth,o=.1*this.canvasHeight;0===this.currentEndPoint&&(this.currentX=this.activePoints[0][0],this.currentY=this.activePoints[0][1],this.currentPathType===Jn.power&&(this.currentX=this.activePoints[0][0]-this.activePoints[0][2],this.currentY=this.activePoints[0][1]),this.currentEndPoint=1),this.currentPathType===Jn.power&&(o=.25*this.canvasHeight);var s=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint-1][0]:this.activePoints[this.currentEndPoint][0],l=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint][0]:this.activePoints[this.currentEndPoint-1][0],c=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint-1][1]:this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint][1]:this.activePoints[this.currentEndPoint-1][1],d=s-a,m=l+a,v=c-o,_=u+o,y=!1,S=!1,T=!1,C=!1;if(this.activePoints[this.currentEndPoint-1][0]>this.activePoints[this.currentEndPoint][0]&&(y=!0),this.activePoints[this.currentEndPoint-1][1]>this.activePoints[this.currentEndPoint][1]&&(S=!0),this.activePoints[this.currentEndPoint-1][0]===this.activePoints[this.currentEndPoint][0]&&(T=!0),this.activePoints[this.currentEndPoint-1][1]===this.activePoints[this.currentEndPoint][1]&&(C=!0),this.currentPathType!==Jn.power||1!==this.currentEndPoint&&3!==this.currentEndPoint?this.currentPathType===Jn.power&&2===this.currentEndPoint&&(d=(s=this.activePoints[2][0])-a,m=(l=this.activePoints[1][0])+a,v=(c=this.activePoints[1][1])-o,_=(u=this.activePoints[2][1])+o,y=!0,S=!1,T=!1,C=!1):(1===this.currentEndPoint?(s=this.activePoints[this.currentEndPoint-1][0]-this.activePoints[this.currentEndPoint-1][2],l=this.activePoints[this.currentEndPoint-1][0]+this.activePoints[this.currentEndPoint-1][2],c=this.activePoints[this.currentEndPoint-1][1],u=this.activePoints[this.currentEndPoint-1][1]):(s=this.activePoints[this.currentEndPoint][0]-this.activePoints[this.currentEndPoint][2],l=this.activePoints[this.currentEndPoint][0]+this.activePoints[this.currentEndPoint][2],c=this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint][1]),d=s-a,m=l+a,v=c-o,_=u+o,y=!1,S=!1,T=!1,C=!0),n>=d&&n<=m&&r>=v&&r<=_){if(T||C)(!S&&r>this.currentY||S&&r<this.currentY)&&!C&&(this.currentY=r),(!y&&n>this.currentX||y&&n<this.currentX)&&!T&&(this.currentX=n);else if(!y&&n>this.currentX||y&&n<this.currentX){var O=(n-s)/(l-s);y&&(O=1-O),S&&(O=1-O);var j=(u-c)*O+c;this.currentX=n,this.currentY=j}var G=.005*this.canvasWidth,K=.005*this.canvasHeight;(!y&&this.currentX>=l-G||y&&this.currentX<=s+G)&&(!S&&this.currentY>=u-K||S&&this.currentY<=c+K)&&(this.currentX=y?s:l,this.currentY=S?c:u,this.currentEndPoint+=1,this.currentEndPoint>this.activePoints.length-1&&this.completePath())}}}pointerUp(){this.isPointerDown=!1}pointerDown(){this.isPointerDown=!0}drawSpeedTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([n,r]),a.push([this.canvasWidth-n,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-n,this.canvasHeight-r]),a.push([n,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}drawAdaptabilityTrace(e){var n=.1*this.canvasWidth,o=(this.canvasWidth-2*n)/14,s=(this.canvasHeight-.1*this.canvasHeight*2)/7,l=[];l.push([n,this.canvasHeight/2]),l.push([n+o,this.canvasHeight/2-s]),l.push([n+2*o,this.canvasHeight/2+s]),l.push([n+3*o,this.canvasHeight/2-2*s]),l.push([n+4*o,this.canvasHeight/2+2*s]),l.push([n+5*o,this.canvasHeight/2-3*s]),l.push([n+6*o,this.canvasHeight/2+3*s]),l.push([n+7*o,this.canvasHeight/2-4*s]),l.push([n+8*o,this.canvasHeight/2+3*s]),l.push([n+9*o,this.canvasHeight/2-3*s]),l.push([n+10*o,this.canvasHeight/2+2*s]),l.push([n+11*o,this.canvasHeight/2-2*s]),l.push([n+12*o,this.canvasHeight/2+s]),l.push([n+13*o,this.canvasHeight/2-s]),l.push([n+14*o,this.canvasHeight/2]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawPowerTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([this.canvasWidth/2,this.canvasHeight/4,this.canvasWidth/2-n,this.canvasHeight/4-r,0,0,Math.PI]),a.push([this.canvasWidth/2+(this.canvasWidth/2-n),this.canvasHeight/4]),a.push([this.canvasWidth/2-(this.canvasWidth/2-n),3*this.canvasHeight/4]),a.push([this.canvasWidth/2,3*this.canvasHeight/4,this.canvasWidth/2-n,this.canvasHeight/4-r,0,0,Math.PI]),e.beginPath(),e.ellipse(a[0][0],a[0][1],a[0][2],a[0][3],a[0][4],a[0][5],a[0][6],!0),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.ellipse(a[3][0],a[3][1],a[3][2],a[3][3],a[3][4],a[3][5],a[3][6],!1),e.stroke(),a}drawEnduranceTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=.15*this.canvasWidth,o=.15*this.canvasHeight,s=[];s.push([n,r]),s.push([this.canvasWidth-n,r]),s.push([this.canvasWidth-n,this.canvasHeight-r]),s.push([n,this.canvasHeight-r]),s.push([n,r+o]),s.push([this.canvasWidth-(n+a),r+o]),s.push([this.canvasWidth-(n+a),this.canvasHeight-(r+o)]),s.push([n+a,this.canvasHeight-(r+o)]),s.push([n+a,r+2*o]),s.push([this.canvasWidth-(n+2*a),r+2*o]),s.push([this.canvasWidth-(n+2*a),this.canvasHeight-(r+2*o)]),s.push([n+2*a,this.canvasHeight-(r+2*o)]),s.push([n+2*a,this.canvasHeight/2]),s.push([this.canvasWidth/2,this.canvasHeight/2]);for(var l=1;l<s.length;l++)e.beginPath(),e.moveTo(s[l-1][0],s[l-1][1]),e.lineTo(s[l][0],s[l][1]),e.stroke();return s}drawFocusTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];a.push([this.canvasWidth/3,r]),a.push([this.canvasWidth/3,this.canvasHeight/6]),a.push([n,this.canvasHeight/6]),a.push([this.canvasWidth/2,this.canvasHeight-r]),a.push([this.canvasWidth-n,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,r]);for(var o=1;o<a.length;o++)e.beginPath(),e.moveTo(a[o-1][0],a[o-1][1]),e.lineTo(a[o][0],a[o][1]),e.stroke();return a}drawAccelerationTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,o=this.canvasWidth-2*n,s=this.canvasHeight-2*r,l=[];l.push([n,r]),l.push([o/9+n,r]),l.push([o/9+n,2*s/9+r]),l.push([2*o/9+n,2*s/9+r]),l.push([2*o/9+n,4*s/9+r]),l.push([3*o/9+n,4*s/9+r]),l.push([3*o/9+n,6*s/9+r]),l.push([4*o/9+n,6*s/9+r]),l.push([4*o/9+n,8*s/9+r]),l.push([5*o/9+n,8*s/9+r]),l.push([5*o/9+n,6*s/9+r]),l.push([6*o/9+n,6*s/9+r]),l.push([6*o/9+n,4*s/9+r]),l.push([7*o/9+n,4*s/9+r]),l.push([7*o/9+n,2*s/9+r]),l.push([8*o/9+n,2*s/9+r]),l.push([8*o/9+n,r]),l.push([9*o/9+n,r]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawSpecialTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([n,r]),a.push([this.canvasWidth-n,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-n,this.canvasHeight-r]),a.push([n,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}getAnimalDistanceColor(e){var n="";return e===z.Flatland&&(n="#7d3f00"),e===z.Mountain&&(n="#1b630d"),e===z.Ocean&&(n="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===z.Tundra&&(n="#28809c"),e===z.Volcanic&&(n="#8f1a1a"),n}getAnimalRacerColor(e){var n="";return e===z.Flatland&&("night"===this.themeService.getActiveThemeName()?n="#E18B07":(this.themeService.getActiveThemeName(),n="#c66900")),e===z.Mountain&&("night"===this.themeService.getActiveThemeName()?n="#30b001":(this.themeService.getActiveThemeName(),n="#279113")),e===z.Ocean&&("night"===this.themeService.getActiveThemeName()?n="#9289CF":(this.themeService.getActiveThemeName(),n="#0000FF")),e===z.Tundra&&("night"===this.themeService.getActiveThemeName()?n="#019DDE":(this.themeService.getActiveThemeName(),n="#1CA1C9")),e===z.Volcanic&&("night"===this.themeService.getActiveThemeName()?n="#E56C6E":(this.themeService.getActiveThemeName(),n="#D92525")),n}getRandomPathType(e){var n=Object.keys(Jn),r=[];n.forEach((o,s)=>{!isNaN(Number(o))&&6!==Number(o)&&r.push(Number(o))});var a=this.utilityService.getRandomInteger(0,r.length-1);return r[a]}completePath(){this.getNewPath=!0,this.currentEndPoint=0,this.activePoints=[],this.currentX=0,this.currentY=0,this.isPointerDown=!1,this.successfulAttemptStreak+=1,this.getReward(this.currentPathType),this.associatedAnimal.trackedAnimalStats.successfulCoachingAttempts+=1,this.currentPathType=this.getRandomPathType(this.currentPathType)}getReward(e){var n=1,r=this.globalService.globalVar.resources.find(l=>"Whistle"===l.name);if(null!=r&&r.amount>0){var a=this.globalService.globalVar.modifiers.find(l=>"whistleModifier"===l.text);null!=a&&(n=a.value)}var o=this.globalService.globalVar.resources.find(l=>"Golden Whistle"===l.name);if(null!=o&&o.amount>0){var s=this.globalService.globalVar.modifiers.find(l=>"goldenWhistleModifier"===l.text);null!=s&&(n=s.value)}e===Jn.speed&&(this.associatedAnimal.currentStats.topSpeed+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" speed. ("+this.associatedAnimal.currentStats.topSpeed.toFixed(2)+")\n"),e===Jn.acceleration&&(this.associatedAnimal.currentStats.acceleration+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" acceleration. ("+this.associatedAnimal.currentStats.acceleration.toFixed(2)+")\n"),e===Jn.endurance&&(this.associatedAnimal.currentStats.endurance+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" endurance. ("+this.associatedAnimal.currentStats.endurance.toFixed(2)+")\n"),e===Jn.power&&(this.associatedAnimal.currentStats.power+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" power. ("+this.associatedAnimal.currentStats.power.toFixed(2)+")\n"),e===Jn.focus&&(this.associatedAnimal.currentStats.focus+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" focus. ("+this.associatedAnimal.currentStats.focus.toFixed(2)+")\n"),e===Jn.adaptability&&(this.associatedAnimal.currentStats.adaptability+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" adaptability. ("+this.associatedAnimal.currentStats.adaptability.toFixed(2)+")\n"),this.successfulAttemptStreak%5==0&&(this.globalService.increaseAbilityXp(this.associatedAnimal,n),this.incrementalCoachingUpdates+=this.animalDisplayName+" also gains "+n+" XP towards their ability "+this.associatedAnimal.ability.name+"!\n"),this.globalService.calculateAnimalRacingStats(this.associatedAnimal)}returnToSelectedBarnView(){this.isCoachingEmitter.emit(!1)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(_i),A(Rt),A(kl),A(Ri))},t.\u0275cmp=dt({type:t,selectors:[["app-coaching"]],viewQuery:function(e,n){if(1&e&&(ca(WU,5,bn),ca(XU,5,bn)),2&e){let r;fn(r=pn())&&(n.coachingCanvas=r.first),fn(r=pn())&&(n.drawCoaching=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{isCoachingEmitter:"isCoachingEmitter"},decls:22,vars:2,consts:[[1,"coachingView"],[1,"marginDiv"],["id","coachingInfo"],[1,"infoGridContainer"],[1,"info"],[1,"description"],[1,"back"],[3,"click"],[1,"drawingDiv"],[1,"updates"],["id","drawCoaching",1,"drawCoaching"],["drawCoaching",""],[1,"drawCoachingDiv"],["id","coachingCanvas",1,"coachingCanvas",3,"pointermove","pointerdown","pointerup"],["coachingCanvas",""],[1,"coachingUpdates",3,"scrollTop","innerHTML"],["scrollMe",""]],template:function(e,n){if(1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),g(6,"Coaching"),h(),f(7,"div",5),g(8," Show your animals the way by tracing each path. Successfully making it through will reward your partner with a stat point. "),h()(),f(9,"div",6)(10,"button",7),I("click",function(){return n.returnToSelectedBarnView()}),g(11,"Back"),h()()(),D(12,"hr"),h(),f(13,"div",8)(14,"div",9)(15,"div",10,11)(17,"div",12)(18,"canvas",13,14),I("pointermove",function(a){return n.pointerMove(a)})("pointerdown",function(){return n.pointerDown()})("pointerup",function(){return n.pointerUp()}),h()()(),D(20,"div",15,16),h()()()()),2&e){const r=at(21);p(20),b("scrollTop",r.scrollHeight)("innerHTML",n.incrementalCoachingUpdates.trim(),Nt)}},styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:76.5%}']}),t})();function QU(t,i){if(1&t){const e=ge();f(0,"div",12)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",4))}function KU(t,i){if(1&t){const e=ge();f(0,"div",13)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",5))}function ZU(t,i){if(1&t){const e=ge();f(0,"div",14)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",6))}function JU(t,i){if(1&t&&(f(0,"div",3),x(1,QU,2,1,"div",9),x(2,KU,2,1,"div",10),x(3,ZU,2,1,"div",11),h()),2&t){const e=w(2);p(1),b("ngIf",e.barnRow2IsUnlocked),p(1),b("ngIf",e.barnRow2IsUnlocked),p(1),b("ngIf",e.barnRow2IsUnlocked)}}function eH(t,i){if(1&t){const e=ge();f(0,"div",18)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",7))}function tH(t,i){if(1&t){const e=ge();f(0,"div",19)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",8))}function nH(t,i){if(1&t){const e=ge();f(0,"div",20)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",9))}function iH(t,i){if(1&t&&(f(0,"div",3),x(1,eH,2,1,"div",15),x(2,tH,2,1,"div",16),x(3,nH,2,1,"div",17),h()),2&t){const e=w(2);p(1),b("ngIf",e.barnRow3IsUnlocked),p(1),b("ngIf",e.barnRow3IsUnlocked),p(1),b("ngIf",e.barnRow3IsUnlocked)}}function rH(t,i){if(1&t){const e=ge();f(0,"div",24)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",10))}function aH(t,i){if(1&t){const e=ge();f(0,"div",25)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",11))}function oH(t,i){if(1&t){const e=ge();f(0,"div",26)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",12))}function sH(t,i){if(1&t&&(f(0,"div",3),x(1,rH,2,1,"div",21),x(2,aH,2,1,"div",22),x(3,oH,2,1,"div",23),h()),2&t){const e=w(2);p(1),b("ngIf",e.barnRow4IsUnlocked),p(1),b("ngIf",e.barnRow4IsUnlocked),p(1),b("ngIf",e.barnRow4IsUnlocked)}}function lH(t,i){if(1&t){const e=ge();f(0,"div",30)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",13))}function cH(t,i){if(1&t){const e=ge();f(0,"div",31)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",14))}function uH(t,i){if(1&t){const e=ge();f(0,"div",32)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),w(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",15))}function dH(t,i){if(1&t&&(f(0,"div",3),x(1,lH,2,1,"div",27),x(2,cH,2,1,"div",28),x(3,uH,2,1,"div",29),h()),2&t){const e=w(2);p(1),b("ngIf",e.barnRow5IsUnlocked),p(1),b("ngIf",e.barnRow5IsUnlocked),p(1),b("ngIf",e.barnRow5IsUnlocked)}}function hH(t,i){if(1&t){const e=ge();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"app-barn",5),I("selectedBarn",function(r){return B(e),w().goToBarn(r)}),h()(),f(4,"div",6)(5,"app-barn",5),I("selectedBarn",function(r){return B(e),w().goToBarn(r)}),h()(),f(6,"div",7)(7,"app-barn",5),I("selectedBarn",function(r){return B(e),w().goToBarn(r)}),h()()(),x(8,JU,4,3,"div",8),x(9,iH,4,3,"div",8),x(10,sH,4,3,"div",8),x(11,dH,4,3,"div",8),h()}if(2&t){const e=w();p(2),b("ngClass",e.tutorialActive?"tutorialActive":""),p(1),b("barnNumber",1),p(2),b("barnNumber",2),p(2),b("barnNumber",3),p(1),b("ngIf",e.barnRow2IsUnlocked),p(1),b("ngIf",e.barnRow3IsUnlocked),p(1),b("ngIf",e.barnRow4IsUnlocked),p(1),b("ngIf",e.barnRow5IsUnlocked)}}function fH(t,i){if(1&t){const e=ge();f(0,"app-selected-barn",36),I("returnToBarnEmitter",function(){return B(e),w(2).goToBarn(0)})("isCoachingEmitter",function(r){return B(e),w(2).goToCoaching(r)}),h()}2&t&&b("selectedBarnNumber",w(2).selectedBarn)}function pH(t,i){if(1&t){const e=ge();f(0,"app-coaching",37),I("isCoachingEmitter",function(r){return B(e),w(2).goToCoaching(r)}),h()}2&t&&b("selectedBarnNumber",w(2).selectedBarn)}function gH(t,i){if(1&t&&(f(0,"div",33),x(1,fH,1,1,"app-selected-barn",34),x(2,pH,1,1,"app-coaching",35),h()),2&t){const e=w();p(1),b("ngIf",!e.isCoaching),p(1),b("ngIf",e.isCoaching)}}let mH=(()=>{class t{constructor(e,n,r){this.lookupService=e,this.componentCommunicationService=n,this.globalService=r,this.selectedBarn=0,this.isCoaching=!1,this.tutorialActive=!1,this.barnRow2IsUnlocked=!1,this.barnRow3IsUnlocked=!1,this.barnRow4IsUnlocked=!1,this.barnRow5IsUnlocked=!1}ngOnInit(){var e;this.componentCommunicationService.setNewView(mt.barn),this.barnRow2IsUnlocked=this.lookupService.isItemUnlocked("barnRow2"),this.barnRow3IsUnlocked=this.lookupService.isItemUnlocked("barnRow3"),this.barnRow4IsUnlocked=this.lookupService.isItemUnlocked("barnRow4"),this.barnRow5IsUnlocked=this.lookupService.isItemUnlocked("barnRow5"),!this.globalService.globalVar.tutorials.tutorialCompleted&&1===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(n=>n.type===X.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.tutorialActive=!0),this.subscription=this.componentCommunicationService.getBarnView().subscribe(n=>{this.selectedBarn=n})}goToBarn(e){this.selectedBarn=e,this.componentCommunicationService.setBarnView(mt.barn,e)}goToCoaching(e){this.isCoaching=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setBarnNumber(0)}}return t.\u0275fac=function(e){return new(e||t)(A(hn),A(Zn),A(Rt))},t.\u0275cmp=dt({type:t,selectors:[["app-barn-view"]],decls:2,vars:2,consts:[["class","gridContainer","id","barnViewDiv",4,"ngIf"],["class","selectedBarnDiv",4,"ngIf"],["id","barnViewDiv",1,"gridContainer"],[1,"barnRow"],[1,"barn1","barnDefault",3,"ngClass"],[3,"barnNumber","selectedBarn"],[1,"barn2","barnDefault"],[1,"barn3","barnDefault"],["class","barnRow",4,"ngIf"],["class","barn4 barnDefault",4,"ngIf"],["class","barn5 barnDefault",4,"ngIf"],["class","barn6 barnDefault",4,"ngIf"],[1,"barn4","barnDefault"],[1,"barn5","barnDefault"],[1,"barn6","barnDefault"],["class","barn7 barnDefault",4,"ngIf"],["class","barn8 barnDefault",4,"ngIf"],["class","barn9 barnDefault",4,"ngIf"],[1,"barn7","barnDefault"],[1,"barn8","barnDefault"],[1,"barn9","barnDefault"],["class","barn10 barnDefault",4,"ngIf"],["class","barn11 barnDefault",4,"ngIf"],["class","barn12 barnDefault",4,"ngIf"],[1,"barn10","barnDefault"],[1,"barn11","barnDefault"],[1,"barn12","barnDefault"],["class","barn13 barnDefault",4,"ngIf"],["class","barn14 barnDefault",4,"ngIf"],["class","barn15 barnDefault",4,"ngIf"],[1,"barn13","barnDefault"],[1,"barn14","barnDefault"],[1,"barn15","barnDefault"],[1,"selectedBarnDiv"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter"],[3,"selectedBarnNumber","isCoachingEmitter"]],template:function(e,n){1&e&&(x(0,hH,12,8,"div",0),x(1,gH,3,2,"div",1)),2&e&&(b("ngIf",0===n.selectedBarn),p(1),b("ngIf",n.selectedBarn>0))},directives:[an,Hn,Z6,qU,YU],styles:["#barnViewDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.selectedBarnDiv[_ngcontent-%COMP%]{height:100%}.barnDefault[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none;border-top:none;width:33.3333%;display:inline-block;vertical-align:middle;height:100%}.barnRow[_ngcontent-%COMP%]{height:25%;width:100%;display:inline-block}.lockedBarnRow[_ngcontent-%COMP%]{border:none!important}.tutorialActive[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-color:red}"]}),t})();function vH(t,i){1&t&&(f(0,"span",5),g(1," Primary "),h())}function bH(t,i){1&t&&(f(0,"span",5),g(1," Auto Run Free Race "),h())}function _H(t,i){1&t&&(f(0,"span",5),g(1," Event "),h())}function yH(t,i){1&t&&D(0,"br")}function wH(t,i){1&t&&(f(0,"span",8),g(1," / "),h())}function CH(t,i){if(1&t&&(f(0,"span",6),g(1),x(2,wH,2,0,"span",7),h()),2&t){const e=i.$implicit,n=i.index,r=w();b("ngClass",r.getColorClass(e)),p(1),Q(" ",e.name,""),p(1),b("ngIf",n<r.deck.selectedAnimals.length-1)}}let D0=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n}ngOnInit(){if(0===this.deckNumber||null==this.deckNumber){var e=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=e&&(this.deck=e)}else{var n=this.globalService.globalVar.animalDecks.find(r=>r.deckNumber===this.deckNumber);null!=n&&(this.deck=n)}}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}goToDeckView(){this.componentCommunicationService.setNewView(mt.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(Zn))},t.\u0275cmp=dt({type:t,selectors:[["app-animal-deck"]],inputs:{deckNumber:"deckNumber"},decls:11,vars:6,consts:[[1,"relayTeam"],["class","primaryText keyword rightSpaced",4,"ngIf"],[4,"ngIf"],[1,"clickableText",3,"click"],["class","coloredText",3,"ngClass",4,"ngFor","ngForOf"],[1,"primaryText","keyword","rightSpaced"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div"),x(2,vH,2,0,"span",1),x(3,bH,2,0,"span",1),x(4,_H,2,0,"span",1),x(5,yH,1,0,"br",2),h(),f(6,"div")(7,"strong",3),I("click",function(){return n.goToDeckView()}),g(8),h(),g(9," - "),x(10,CH,3,3,"span",4),h()()),2&e&&(p(2),b("ngIf",n.deck.isPrimaryDeck&&void 0!==n.deckNumber&&n.deckNumber>0),p(1),b("ngIf",n.deck.autoRunFreeRace&&void 0!==n.deckNumber&&n.deckNumber>0),p(1),b("ngIf",n.deck.isEventDeck&&void 0!==n.deckNumber&&n.deckNumber>0),p(1),b("ngIf",n.deckNumber>0),p(3),nt(n.deck.name),p(2),b("ngForOf",n.deck.selectedAnimals))},directives:[an,Yn,Hn],styles:[".primaryText[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary);padding-left:.5rem;padding-right:.5rem}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.relayTeam[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:100%}"]}),t})();function SH(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w();p(1),Q("Race ",e.index+1," ")}}function TH(t,i){if(1&t&&(f(0,"p",6),g(1),Vt(2,"number"),f(3,"span",7),g(4),h()()),2&t){const e=i.$implicit,n=w();b("ngClass",n.getNoRacerClass(e)),p(1),Wn(" ",rn(2,5,e.distance,"1.2-2")," Meters of ",e.getTerrainName()," "),p(2),b("ngClass",n.getColorClass(e)),p(1),nt(e.getCourseTypeName())}}function DH(t,i){1&t&&(f(0,"h6")(1,"em"),g(2,"Completed!"),h()())}function RH(t,i){1&t&&(f(0,"h6")(1,"em"),g(2,"Cannot Run"),h()())}function xH(t,i){1&t&&(f(0,"h6",8),g(1,"Start"),h())}function MH(t,i){1&t&&D(0,"div",9),2&t&&b("innerHTML",w().popoverText,Nt)}const kH=function(t){return{raceNotAllowed:t}};let R0=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n,this.missingRacers=[],this.busyRacers=[]}ngOnInit(){this.cannotRace=!1;var e=this.lookupService.getPrimaryDeck();this.race.raceLegs.forEach(n=>{if(null==e||0===e.selectedAnimals.length&&this.race.raceType!==Ne.trainingTrack)this.cannotRace=!0,this.missingRacers.push(n.courseType);else if((null==e?void 0:e.selectedAnimals.some(a=>a.raceCourseType===n.courseType))||this.race.raceType===Ne.trainingTrack){var r=null==e?void 0:e.selectedAnimals.find(a=>a.raceCourseType===n.courseType);void 0!==r&&!this.lookupService.canAnimalRace(r)&&(this.cannotRace=!0,this.busyRacers.push(r))}else this.cannotRace=!0,this.missingRacers.push(n.courseType)}),!this.cannotRace&&this.race.isCompleted&&(this.cannotRace=!0),this.race.localRaceType===Qt.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(this.cannotRace=!0),this.popoverText=this.cannotRace?this.getErrorPopoverText():this.getSuccessfulPopoverText()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getCourseTypeName(),mountainColor:"Mountain"===e.getCourseTypeName(),waterColor:"Ocean"===e.getCourseTypeName(),tundraColor:"Tundra"===e.getCourseTypeName(),volcanicColor:"Volcanic"===e.getCourseTypeName()}:{}}getNoRacerClass(e){return{noRacer:!this.hasRacerForLeg(e)}}hasRacerForLeg(e){var n=!1,r=this.lookupService.getPrimaryDeck();return null==r||0===r.selectedAnimals.length||(r.selectedAnimals.some(a=>a.raceCourseType===e.courseType)&&(n=!0),this.busyRacers.some(a=>a.raceCourseType===e.courseType)&&(n=!1)),n}getErrorPopoverText(){var e="You cannot do this race for the following reasons: \n\n";return this.missingRacers.forEach(n=>{e+="-Missing "+z[n]+" racer\n"}),this.busyRacers.forEach(n=>{e+="-"+n.name+" is active in another race\n"}),this.race.isCompleted&&(e+="-You've already completed this race."),this.race.localRaceType===Qt.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(e+="-You've met your limit of free races. More will be available soon."),e}getSuccessfulPopoverText(){var e="",n=1;return this.race.raceLegs.forEach(r=>{null!=r.terrain&&(e+=this.lookupService.getTerrainPopoverText(r.terrain,r)),n<this.race.raceLegs.length&&(e+="\n"),n+=1}),e}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(hn))},t.\u0275cmp=dt({type:t,selectors:[["app-race-description"]],inputs:{index:"index",race:"race",showStartText:"showStartText"},decls:10,vars:10,consts:[[1,"raceDescription"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngClass","ngbPopover","disablePopover"],[3,"ngClass",4,"ngFor","ngForOf"],["class","keyword",4,"ngIf"],["popContent",""],[3,"ngClass"],[1,"coloredText",3,"ngClass"],[1,"keyword"],[1,"popoverClass",3,"innerHTML"]],template:function(e,n){if(1&e&&(f(0,"div",0),x(1,SH,2,1,"span",1),D(2,"br"),f(3,"div",2),x(4,TH,5,8,"p",3),x(5,DH,3,0,"h6",1),x(6,RH,3,0,"h6",1),x(7,xH,2,0,"h6",4),h()(),x(8,MH,1,1,"ng-template",null,5,ot)),2&e){const r=at(9);p(1),b("ngIf",null!=n.index&&n.index>-1),p(2),b("ngClass",ri(8,kH,n.cannotRace))("ngbPopover",r)("disablePopover",""===n.popoverText),p(1),b("ngForOf",n.race.raceLegs),p(1),b("ngIf",n.showStartText&&n.race.isCompleted),p(1),b("ngIf",n.showStartText&&!n.race.isCompleted&&n.cannotRace),p(1),b("ngIf",n.showStartText&&!n.race.isCompleted&&!n.cannotRace)}},directives:[an,Hn,Or,Yn],pipes:[no],styles:[".raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}"]}),t})();function AH(t,i){if(1&t){const e=ge();f(0,"div",10),I("click",function(){const a=B(e).$implicit;return w().selectCircuitRace(a)}),D(1,"app-race-description",11),h()}if(2&t){const e=i.$implicit,n=i.index,r=w();Fg("circuitRace",n+1,""),b("ngClass",r.tutorialActive?"tutorialActive":""),p(1),b("index",n)("race",e)("showStartText",!0)}}function PH(t,i){if(1&t){const e=ge();f(0,"div",12),I("click",function(){const a=B(e).$implicit;return w().selectLocalRace(a)}),D(1,"app-race-description",11),h()}if(2&t){const e=i.$implicit,n=i.index;Fg("localRace",n+1,""),p(1),b("index",n)("race",e)("showStartText",!0)}}function EH(t,i){if(1&t&&(f(0,"div",13),g(1),h()),2&t){const e=w();p(1),Q(" ",e.circuitRankUpDescription," ")}}let IH=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.utilityService=n,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new rt,this.tutorialActive=!1,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){var e=this;this.handleTutorial(),this.availableLocalRaces=[],this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace());var n=this.globalService.globalVar.circuitRank;this.circuitRank=this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank).toString():this.globalService.globalVar.circuitRank,this.circuitRankUpDescription=this.globalService.globalVar.circuitRankUpRewardDescription,this.availableCircuitRaces=this.globalService.globalVar.circuitRaces.filter(s=>s.requiredRank===n);var r=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);this.availableCircuitRaces.forEach(s=>{void 0!==r&&(s.raceLegs=this.globalService.reorganizeLegsByDeckOrder(s.raceLegs,r))}),this.totalFreeRaces=this.lookupService.getTotalFreeRacesPerPeriod();var a=900,o=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==o&&(a=o.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=ar(function*(l){var c=a-e.globalService.globalVar.freeRaceTimePeriodCounter,u=Math.floor(c/60),d=c-60*u,m=Math.floor(d).toString();d<10&&(m=d<1||d>59?"00":String(m).padStart(2,"0")),e.freeRaceTimer=u+":"+m,e.freeRacesRemaining=e.lookupService.getRemainingFreeRacesPerPeriod()});return function(l){return s.apply(this,arguments)}}())}selectCircuitRace(e){var n=!0,r=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck);null!=r&&0!==r.selectedAnimals.length?(e.raceLegs.forEach(a=>{(null==r?void 0:r.selectedAnimals.some(s=>s.raceCourseType===a.courseType))||(n=!1);var o=null==r?void 0:r.selectedAnimals.find(s=>s.raceCourseType===a.courseType);void 0!==o&&!this.lookupService.canAnimalRace(o)&&(n=!1)}),e.isCompleted&&(n=!1),!this.globalService.globalVar.tutorials.tutorialCompleted&&4===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1),n&&this.raceSelected.emit(e)):n=!1}selectLocalRace(e){var n=!0,r=e.localRaceType===Qt.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(s=>s.raceCourseType===o.courseType))||(n=!1)}),r&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(n=!1),n&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):n=!1}handleTutorial(){var e;!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&5===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(n=>n.type===X.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(Ri),A(hn),A(_i))},t.\u0275cmp=dt({type:t,selectors:[["app-circuit-view"]],outputs:{raceSelected:"raceSelected"},decls:25,vars:7,consts:[[1,"circuitViewDiv"],[1,"circuitRaceHeader","s4Heading"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"circuitRaceGrid"],[3,"ngClass","class","click",4,"ngFor","ngForOf"],["id","localRaceSection"],[1,"s4Heading"],[1,"localRaceGrid"],[3,"class","click",4,"ngFor","ngForOf"],["circuitRewardContent",""],[3,"ngClass","click"],[3,"index","race","showStartText"],[3,"click"],[1,"popoverClass"]],template:function(e,n){if(1&e&&(f(0,"div",0),D(1,"app-animal-deck")(2,"hr"),f(3,"div",1)(4,"span",2),g(5,"Circuit Rank "),f(6,"strong"),g(7),h()(),D(8,"br")(9,"br"),h(),f(10,"div",3),x(11,AH,2,7,"div",4),h(),D(12,"hr"),f(13,"div",5)(14,"span",6),g(15,"Free Races"),h(),D(16,"br"),f(17,"em"),g(18),h(),D(19,"br")(20,"br"),f(21,"div",7),x(22,PH,2,6,"div",8),h()()(),x(23,EH,2,1,"ng-template",null,9,ot)),2&e){const r=at(24);p(4),b("ngbPopover",r),p(3),nt(n.circuitRank),p(4),b("ngForOf",n.availableCircuitRaces),p(7),Ng(" ",n.freeRacesRemaining," of ",n.totalFreeRaces," remaining -- resets in ",n.freeRaceTimer,""),p(4),b("ngForOf",n.availableLocalRaces)}},directives:[D0,Or,Yn,Hn,R0],styles:['.circuitRaceHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.circuitRaceGrid[_ngcontent-%COMP%]{height:100%;display:grid;text-align:center;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"circuitRace1 circuitRace2 circuitRace3"}.circuitRace1[_ngcontent-%COMP%]{grid-area:circuitRace1}.circuitRace2[_ngcontent-%COMP%]{grid-area:circuitRace2}.circuitRace3[_ngcontent-%COMP%]{grid-area:circuitRace3}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.localRaceGrid[_ngcontent-%COMP%]{text-align:center;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"localRace1 localRace2 localRace3"}.localRace1[_ngcontent-%COMP%]{grid-area:localRace1}.localRace2[_ngcontent-%COMP%]{grid-area:localRace2}.localRace3[_ngcontent-%COMP%]{grid-area:localRace3}#localRaceSection[_ngcontent-%COMP%]{text-align:center}']}),t})();function OH(t,i){if(1&t){const e=ge();f(0,"div",9),I("click",function(){B(e);const r=w(2);return r.selectLocalRace(r.availableMonoRace)}),f(1,"span",10),g(2,"Mono Race "),f(3,"strong"),g(4),h()(),D(5,"br")(6,"app-race-description",11),h()}if(2&t){const e=w(2);p(4),nt(e.monoRaceRank),p(2),b("race",e.availableMonoRace)("showStartText",!0)}}function NH(t,i){1&t&&(f(0,"div",12),g(1," Next Mono Race Available After Circuit Rank Up "),h())}function VH(t,i){if(1&t&&(f(0,"div",6),x(1,OH,7,3,"div",7),x(2,NH,2,0,"div",8),D(3,"hr"),h()),2&t){const e=w();p(1),b("ngIf",null!=e.availableMonoRace),p(1),b("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function FH(t,i){if(1&t){const e=ge();f(0,"div",16),I("click",function(){B(e);const r=w(2);return r.selectLocalRace(r.availableDuoRace)}),f(1,"span",10),g(2,"Duo Race "),f(3,"strong"),g(4),h()(),D(5,"br")(6,"app-race-description",11),h()}if(2&t){const e=w(2);p(4),nt(e.duoRaceRank),p(2),b("race",e.availableDuoRace)("showStartText",!0)}}function BH(t,i){1&t&&(f(0,"div",17),g(1," Next Duo Race Available After Circuit Rank Up "),h())}function LH(t,i){if(1&t&&(f(0,"div",13),x(1,FH,7,3,"div",14),x(2,BH,2,0,"div",15),D(3,"hr"),h()),2&t){const e=w();p(1),b("ngIf",null!=e.availableDuoRace),p(1),b("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function UH(t,i){if(1&t){const e=ge();f(0,"div",21),I("click",function(){B(e);const r=w(2);return r.selectLocalRace(r.availableRainbowRace)}),f(1,"span",10),g(2,"Rainbow Race "),f(3,"strong"),g(4),h()(),D(5,"br")(6,"app-race-description",11),h()}if(2&t){const e=w(2);p(4),nt(e.rainbowRaceRank),p(2),b("race",e.availableRainbowRace)("showStartText",!0)}}function HH(t,i){1&t&&(f(0,"div",22),g(1," Next Rainbow Race Available After Circuit Rank Up "),h())}function GH(t,i){if(1&t&&(f(0,"div",18),x(1,UH,7,3,"div",19),x(2,HH,2,0,"div",20),D(3,"hr"),h()),2&t){const e=w();p(1),b("ngIf",null!=e.availableRainbowRace),p(1),b("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}let jH=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.utilityService=n,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new rt,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){this.availableLocalRaces=[];var e=this.getNextAvailableSpecialRace(Qt.Mono);void 0!==e&&(this.availableMonoRace=e);var n=this.getNextAvailableSpecialRace(Qt.Duo);void 0!==n&&(this.availableDuoRace=n);var r=this.getNextAvailableSpecialRace(Qt.Rainbow);void 0!==r&&(this.availableRainbowRace=r);var a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&(null!=this.availableDuoRace&&(this.availableDuoRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableDuoRace.raceLegs,a)),null!=this.availableRainbowRace&&(this.availableRainbowRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableRainbowRace.raceLegs,a))),this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?(null!=this.availableMonoRace&&(this.monoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableMonoRace.requiredRank).toString()),null!=this.availableDuoRace&&(this.duoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableDuoRace.requiredRank).toString()),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableRainbowRace.requiredRank).toString())):(null!=this.availableMonoRace&&(this.monoRaceRank=this.availableMonoRace.requiredRank),null!=this.availableDuoRace&&(this.duoRaceRank=this.availableDuoRace.requiredRank),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.availableRainbowRace.requiredRank)),this.areMonoRacesAvailable=this.lookupService.isItemUnlocked("monoRace"),this.areDuoRacesAvailable=this.lookupService.isItemUnlocked("duoRace"),this.areRainbowRacesAvailable=this.lookupService.isItemUnlocked("rainbowRace")}getNextAvailableSpecialRace(e){return e===Qt.Mono&&this.globalService.GenerateMonoRaces(this.globalService.globalVar.monoRank),e===Qt.Duo&&this.globalService.GenerateDuoRaces(this.globalService.globalVar.duoRank),e===Qt.Rainbow&&this.globalService.GenerateRainbowRaces(this.globalService.globalVar.rainbowRank),this.globalService.globalVar.localRaces.find(n=>n.localRaceType===e)}sortByRankRequired(e,n){return e.requiredRank>n.requiredRank?1:n.requiredRank>e.requiredRank?-1:0}selectLocalRace(e){var n=!0,r=e.localRaceType===Qt.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(l=>l.raceCourseType===o.courseType))||(n=!1);var s=null==a?void 0:a.selectedAnimals.find(l=>l.raceCourseType===o.courseType);void 0!==s&&!this.lookupService.canAnimalRace(s)&&(n=!1)}),n&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):n=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(Ri),A(hn),A(_i))},t.\u0275cmp=dt({type:t,selectors:[["app-local-view"]],outputs:{raceSelected:"raceSelected"},decls:8,vars:3,consts:[[1,"localViewDiv"],[1,"localRaceHeader"],[1,"allLocalRaces"],["id","monoRaceSection",4,"ngIf"],["id","duoRaceSection",4,"ngIf"],["id","rainbowRaceSection",4,"ngIf"],["id","monoRaceSection"],["class","monoRace",3,"click",4,"ngIf"],["class","monoRace",4,"ngIf"],[1,"monoRace",3,"click"],[1,"s4Heading"],[3,"race","showStartText"],[1,"monoRace"],["id","duoRaceSection"],["class","duoRace",3,"click",4,"ngIf"],["class","duoRace",4,"ngIf"],[1,"duoRace",3,"click"],[1,"duoRace"],["id","rainbowRaceSection"],["class","rainbowRace",3,"click",4,"ngIf"],["class","rainbowRace",4,"ngIf"],[1,"rainbowRace",3,"click"],[1,"rainbowRace"]],template:function(e,n){1&e&&(f(0,"div",0),D(1,"div",1)(2,"app-animal-deck")(3,"hr"),f(4,"div",2),x(5,VH,4,2,"div",3),x(6,LH,4,2,"div",4),x(7,GH,4,2,"div",5),h()()),2&e&&(p(5),b("ngIf",n.areMonoRacesAvailable),p(1),b("ngIf",n.areDuoRacesAvailable),p(1),b("ngIf",n.areRainbowRacesAvailable))},directives:[D0,an,R0],styles:[".allLocalRaces[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}"]}),t})();function zH(t,i){1&t&&(f(0,"div"),D(1,"br"),h())}function $H(t,i){1&t&&(f(0,"span",8),g(1," Will Start Race "),h())}function qH(t,i){if(1&t){const e=ge();f(0,"button",12),I("click",function(){B(e);const r=w(5).$implicit;return w().chooseToStartRace(r)}),g(1,"Choose To Start Race"),h()}}function WH(t,i){if(1&t&&(f(0,"span")(1,"em",7),g(2,"Resting..."),h()()),2&t){const e=w(6);p(1),b("ngbPopover",e.getRestingPopover())}}function XH(t,i){if(1&t&&(f(0,"span"),x(1,qH,2,0,"button",11),x(2,WH,3,1,"span",6),h()),2&t){const e=w(4).$implicit,n=w();p(1),b("ngIf",!n.isSetToRelay(e)&&n.canRelay(e)),p(1),b("ngIf",!n.isSetToRelay(e)&&!n.canRelay(e))}}function YH(t,i){if(1&t&&(f(0,"div"),x(1,$H,2,0,"span",10),x(2,XH,3,2,"span",6),h()),2&t){const e=w(3).$implicit,n=w();p(1),b("ngIf",n.isCurrentlyRacing(e)),p(1),b("ngIf",!n.isCurrentlyRacing(e))}}function QH(t,i){1&t&&(f(0,"span",8),g(1," Currently Racing "),h())}function KH(t,i){if(1&t){const e=ge();f(0,"button",14),I("click",function(){B(e);const r=w(4).$implicit;return w().pullFromRace(r)}),g(1," Pull From Race "),h()}}function ZH(t,i){if(1&t){const e=ge();f(0,"button",12),I("click",function(){B(e);const r=w(5).$implicit;return w().relayAnimal(r)}),g(1,"Relay"),h()}}function JH(t,i){if(1&t&&(f(0,"span")(1,"em",7),g(2,"Resting..."),h()()),2&t){const e=w(6);p(1),b("ngbPopover",e.getRestingPopover())}}function e7(t,i){1&t&&(f(0,"span"),g(1,"Set To Relay"),h())}function t7(t,i){if(1&t&&(f(0,"span"),x(1,ZH,2,0,"button",11),x(2,JH,3,1,"span",6),x(3,e7,2,0,"span",6),h()),2&t){const e=w(4).$implicit,n=w();p(1),b("ngIf",!n.isSetToRelay(e)&&n.canRelay(e)),p(1),b("ngIf",!n.isSetToRelay(e)&&!n.canRelay(e)),p(1),b("ngIf",n.isSetToRelay(e))}}function n7(t,i){if(1&t&&(f(0,"div"),x(1,QH,2,0,"span",10),x(2,KH,2,0,"button",13),x(3,t7,4,3,"span",6),h()),2&t){const e=w(3).$implicit,n=w();p(1),b("ngIf",n.isCurrentlyRacing(e)),p(1),b("ngIf",n.isCurrentlyRacing(e)),p(1),b("ngIf",!n.isCurrentlyRacing(e))}}function i7(t,i){if(1&t&&(f(0,"div"),x(1,YH,3,2,"div",6),x(2,n7,4,3,"div",6),h()),2&t){const e=w(3);p(1),b("ngIf",!e.enteredEvent()),p(1),b("ngIf",e.enteredEvent())}}function r7(t,i){if(1&t&&(f(0,"div")(1,"em"),g(2),h()()),2&t){const e=w(3);p(2),Q("Breed Level ",e.breedLevelRequired," Required")}}function a7(t,i){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"div")(3,"span",7)(4,"span",8),g(5,"Morale:"),h(),g(6),Vt(7,"number"),h(),D(8,"br"),f(9,"span",7)(10,"span",8),g(11,"Energy:"),h(),g(12),Vt(13,"number"),h(),D(14,"br"),x(15,zH,2,0,"div",6),D(16,"div",9),h(),D(17,"br")(18,"br"),x(19,i7,3,2,"div",6),x(20,r7,3,1,"div",6),h()),2&t){const e=w().$implicit,n=w();p(3),b("ngbPopover",n.getMoralePopover(e)),p(3),Q(" ",rn(7,8,n.getMorale(e),"1.2-2"),"%"),p(3),b("ngbPopover",n.getEnergyPopover(e)),p(3),Q(" ",rn(13,11,n.getExhaustion(e),"1.2-2"),"%"),p(3),b("ngIf",""===n.getUseCountInformation(e)),p(1),b("innerHTML",n.getUseCountInformation(e),Nt),p(3),b("ngIf",n.canEnterGrandPrix(e)),p(1),b("ngIf",!n.canEnterGrandPrix(e))}}function o7(t,i){if(1&t&&(f(0,"div",4)(1,"span",5),g(2),h(),x(3,a7,21,14,"div",6),h()),2&t){const e=i.$implicit,n=w();p(1),b("ngClass",n.getColorClass(e)),p(1),nt(e.name),p(1),b("ngIf",n.hasEventStarted()&&!n.eventCompleted())}}let s7=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.componentCommunicationService=n,this.lookupService=r,this.utilityService=a,this.organizedAnimals=[]}ngOnInit(){var e=this.globalService.globalVar.animalDecks.find(o=>o.isEventDeck);if(void 0!==e&&(this.deck=e),null!=this.deck)if(this.deck.isCourseOrderActive){for(var n=0;n<this.deck.selectedAnimals.length;n++)if(this.deck.courseTypeOrder.length>n){var r=this.deck.courseTypeOrder[n],a=this.deck.selectedAnimals.find(o=>o.raceCourseType===r);void 0!==a&&this.organizedAnimals.push(a)}}else this.deck.selectedAnimals.forEach(o=>{this.organizedAnimals.push(o)});this.breedLevelRequired=this.getBreedLevelRequired()}getMorale(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==n?0:100*n.morale}getExhaustion(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==n?0:100*n.exhaustionStatReduction}eventCompleted(){return this.globalService.globalVar.eventRaceData.isGrandPrixCompleted}hasEventStarted(){return!(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime)}enteredEvent(){return this.globalService.globalVar.eventRaceData.isRunning}canEnterGrandPrix(e){var n=!1,r=this.getBreedLevelRequired(),a=this.globalService.globalVar.animals.find(o=>o.type===e.type);return void 0!==a&&a.breedLevel>=r&&(n=!0),n}getBreedLevelRequired(){var e=50,n=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}chooseToStartRace(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==n){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==n?void 0:n.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isCurrentlyRacing=!1}),n.isCurrentlyRacing=!0)}}}isCurrentlyRacing(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.isCurrentlyRacing}isSetToRelay(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.isSetToRelay}canRelay(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.exhaustionStatReduction>.5}relayAnimal(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==n){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==n?void 0:n.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isSetToRelay=!1}),n.isSetToRelay=!0)}}}pullFromRace(e){this.globalService.stopGrandPrixRace()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}getRestingPopover(){return"Racer must be above 50% energy to race"}getMoralePopover(e){var n="",r=this.getMorale(e);if(void 0!==r){var a=.9,o=this.globalService.globalVar.modifiers.find(l=>"exhaustionStatLossModifier"===l.text);void 0!==o&&(a=o.value);var s=1-a;a=1-(s*=1/(r/100)),n="Your current Morale is "+r.toFixed(2)+"%. Your energy will reduce by "+(100*(1-a)).toFixed(2)+"% every time you run out of stamina."}return n}getEnergyPopover(e){return""+"Your current Energy is "+this.getExhaustion(e).toFixed(2)+"%. Your stats are reduced to this amount while racing in the grand prix."}getUseCountInformation(e){var n="",r=this.globalService.globalVar.eventRaceData.eventAbilityData,a=this.globalService.globalVar.animals.find(o=>o.type===e.type);if(null!=a)return a.type===X.Horse&&"Inspiration"===a.ability.name&&(n+="Inspiration Relay Count: "+r.inspirationUseCount),a.type===X.Cheetah&&"On The Hunt"===a.ability.name&&(n+="On The Hunt Use Count: "+r.onTheHuntUseCount+" / "+r.onTheHuntUseCap),a.type===X.Goat&&("Sure-footed"===a.ability.name&&(n+="Sure-footed Use Count: "+r.sureFootedUseCount+" / "+r.sureFootedUseCap),"Deep Breathing"===a.ability.name&&(n+="Deep Breathing Relay Count: "+r.deepBreathingUseCount+" / "+r.deepBreathingUseCap)),a.type===X.Gecko&&"Night Vision"===a.ability.name&&(n+="Night Vision Use Count: "+r.nightVisionUseCount+" / "+r.nightVisionUseCap),a.type===X.Dolphin&&("Flowing Current"===a.ability.name&&(n+="Flowing Current Relay Count: "+r.flowingCurrentUseCount),"Navigator"===a.ability.name&&(n+="Navigator Relay Count: "+r.navigatorUseCount)),a.type===X.Octopus&&"Big Brain"===a.ability.name&&(n+="Big Brain Relay Count: "+r.bigBrainUseCount+" / "+r.bigBrainUseCap),a.type===X.Penguin&&"Quick Toboggan"===a.ability.name&&(n+="Quick Toboggan Use Count: "+r.quickTobogganUseCount+" / "+r.quickTobogganUseCap),a.type===X.Caribou&&("Herd Mentality"===a.ability.name&&(n+="Herd Mentality Relay Count: "+r.herdMentalityUseCount+" / "+r.herdMentalityUseCap),"Special Delivery"===a.ability.name&&(n+="Special Delivery Relay Count: "+r.specialDeliveryUseCount+" / "+r.specialDeliveryUseCap)),this.utilityService.getSanitizedHtml(n)}goToDeckView(){this.componentCommunicationService.setNewView(mt.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(Zn),A(hn),A(Ri))},t.\u0275cmp=dt({type:t,selectors:[["app-event-animal-deck"]],decls:7,vars:2,consts:[[1,"deckName"],[1,"clickableText",3,"click"],[1,"flex"],["class","eventAnimal",4,"ngFor","ngForOf"],[1,"eventAnimal"],[1,"coloredText",3,"ngClass"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"keyword"],[3,"innerHTML"],["class","keyword",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","keyword",3,"click",4,"ngIf"],[1,"keyword",3,"click"]],template:function(e,n){1&e&&(f(0,"div")(1,"div",0)(2,"strong",1),I("click",function(){return n.goToDeckView()}),g(3),h()(),D(4,"br"),f(5,"div",2),x(6,o7,4,3,"div",3),h()()),2&e&&(p(3),nt(n.deck.name),p(3),b("ngForOf",n.organizedAnimals))},directives:[Yn,Hn,an,Or],pipes:[no],styles:[".flex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.deckName[_ngcontent-%COMP%]{text-align:center}.eventAnimal[_ngcontent-%COMP%]{flex:1}"]}),t})();const l7=["loadingModal"];function c7(t,i){1&t&&(f(0,"p",6),g(1,"The Grand Prix is currently under construction. "),D(2,"br")(3,"br"),f(4,"em"),g(5,"I'm fixing a few bugs and making some improvements related to the Grand Prix but it will reopen soon!"),h()())}function u7(t,i){if(1&t){const e=ge();f(0,"div",14),I("click",function(){B(e);const r=w(3),a=at(9);return r.selectEventRace(a)}),g(1),D(2,"br"),h()}if(2&t){const e=w(3);b("ngbPopover",at(7)),p(1),Q("Bonus Time: ",e.bonusTime," ")}}function d7(t,i){1&t&&(f(0,"h6",20),g(1,"View Race"),h())}function h7(t,i){1&t&&(f(0,"h6",24)(1,"em"),g(2,"Please Wait -- Offline Time Is Calculating"),h()())}function f7(t,i){1&t&&(f(0,"h6",20),g(1,"Start"),h())}function p7(t,i){1&t&&(f(0,"h6")(1,"em"),g(2,"Completed!"),h()())}function g7(t,i){if(1&t&&(f(0,"div",25),g(1),h()),2&t){const e=w(4);p(1),Q(" ",e.popoverText," ")}}const m7=function(t){return{raceNotAllowed:t}};function v7(t,i){if(1&t){const e=ge();f(0,"div",15)(1,"div")(2,"span",16),g(3,"Grand Prix "),f(4,"strong"),g(5),h()(),D(6,"br"),f(7,"span",17),I("click",function(){B(e);const r=w(3),a=at(3);return r.openRewardsModal(a)}),g(8),h(),D(9,"br")(10,"br"),f(11,"div",18)(12,"div",19),I("click",function(){B(e);const r=w(3),a=at(9);return r.selectEventRace(a)}),f(13,"span")(14,"span",20),g(15,"Forecast:"),h(),g(16),h(),D(17,"br"),g(18),Vt(19,"number"),D(20,"br"),x(21,d7,2,0,"h6",21),x(22,h7,3,0,"h6",22),x(23,f7,2,0,"h6",21),x(24,p7,3,0,"h6",9),h()(),x(25,g7,2,1,"ng-template",null,23,ot),h()()}if(2&t){const e=at(26),n=w(3);p(5),nt(n.grandPrixData.rank),p(3),Wn("",n.globalService.globalVar.eventRaceData.remainingRewards," / ",n.globalService.globalVar.eventRaceData.totalRewards," rewards remaining"),p(4),b("ngClass",ri(15,m7,n.grandPrixData.isCatchingUp))("ngbPopover",e)("disablePopover",""===n.popoverText),p(4),Q(" ",void 0===n.grandPrixData.weatherCluster?"Unknown":n.lookupService.getWeatherClusterFromEnum(n.grandPrixData.weatherCluster),""),p(2),Q(" ",rn(19,12,n.remainingMeters,"1.")," Meters Remaining "),p(3),b("ngIf",n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted&&!n.grandPrixData.isCatchingUp),p(1),b("ngIf",n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted&&n.grandPrixData.isCatchingUp),p(1),b("ngIf",!n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted),p(1),b("ngIf",!n.grandPrixData.isRunning&&n.grandPrixData.isGrandPrixCompleted)}}function b7(t,i){1&t&&(f(0,"div",28),g(1," None "),h())}function _7(t,i){if(1&t&&(f(0,"td")(1,"span",20),g(2),h(),g(3),h()),2&t){const e=i.$implicit;p(2),nt(e.name),p(1),Q(": ",e.amount,"")}}function y7(t,i){if(1&t&&(f(0,"tr"),x(1,_7,4,2,"td",29),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function w7(t,i){if(1&t&&(f(0,"div",28)(1,"table"),x(2,y7,2,1,"tr",29),h()()),2&t){const e=w(4);p(2),b("ngForOf",e.rewardRows)}}function C7(t,i){if(1&t&&(f(0,"div"),D(1,"br")(2,"br"),f(3,"div",26)(4,"span",16),g(5,"Previous Grand Prix Rewards"),h(),x(6,b7,2,0,"div",27),x(7,w7,3,1,"div",27),h()()),2&t){const e=w(3);p(6),b("ngIf",0===e.previousRaceRewardList.length),p(1),b("ngIf",e.previousRaceRewardList.length>0)}}function S7(t,i){if(1&t){const e=ge();f(0,"div")(1,"div"),g(2),D(3,"br"),x(4,u7,3,2,"div",10),f(5,"button",11),I("click",function(){B(e);const r=w(2),a=at(5);return r.openInfoModal(a)}),g(6,"Grand Prix Info"),h(),f(7,"button",12),I("click",function(){return B(e),w(2).goToTokenShop()}),g(8,"Token Shop"),h(),D(9,"br")(10,"br"),h(),D(11,"br"),x(12,v7,27,17,"div",13),D(13,"br"),f(14,"div"),D(15,"app-event-animal-deck"),h(),x(16,C7,8,2,"div",9),h()}if(2&t){const e=w(2);p(2),Wn(" ",e.eventRaceNotice," ",e.eventRaceTimer," "),p(2),b("ngIf",""!==e.bonusTime),p(8),b("ngIf",e.isEventRaceAvailable),p(4),b("ngIf",null!=e.previousRaceRewardList&&!e.isEventRaceAvailable)}}function T7(t,i){1&t&&(f(0,"div"),g(1," Nothing here yet, but maybe as you climb the circuit ranks you might be invited to a new type of race. "),h())}function D7(t,i){if(1&t&&(f(0,"div",7),D(1,"div",8),x(2,S7,17,5,"div",9),x(3,T7,2,0,"div",9),h()),2&t){const e=w();p(2),b("ngIf",e.grandPrixUnlocked),p(1),b("ngIf",!e.grandPrixUnlocked)}}function R7(t,i){if(1&t){const e=ge();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Grand Prix Rewards"),h(),f(4,"button",33),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",34)(7,"div"),g(8),Vt(9,"number"),Vt(10,"number"),D(11,"br")(12,"br"),g(13),Vt(14,"number"),Vt(15,"number"),D(16,"br")(17,"br")(18,"div",35)(19,"div",35)(20,"div",35),h()(),f(21,"div",36)(22,"button",37),I("click",function(){return B(e).$implicit.dismiss()}),g(23,"Close"),h()()()}if(2&t){const e=w();p(8),Vg(" The further you go in the Grand Prix invitational, the more rewards you'll receive. Every ",rn(9,9,e.coinRewardInterval,"1.")," meters, you'll receive ",e.coinRewardAmount," Coins. Every ",rn(10,12,e.renownRewardInterval,"1.")," meters, you'll receive ",e.renownRewardAmount," Renown. Also, you'll be able to obtain rare tokens that can be spent on rare upgrades. "),p(5),Wn(" Distance Covered: ",rn(14,15,(e.grandPrixData.totalDistance-e.remainingMeters).toFixed(0),"1.")," / ",rn(15,18,e.grandPrixData.totalDistance,"1.")," "),p(5),b("innerHTML",e.getGrandPrixCoinRewardsPopover(),Nt),p(1),b("innerHTML",e.getGrandPrixRenownRewardsPopover(),Nt),p(1),b("innerHTML",e.getGrandPrixTokenRewardsPopover(),Nt)}}function x7(t,i){if(1&t){const e=ge();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Grand Prix Info"),h(),f(4,"button",33),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",34)(7,"div"),g(8," You've been invited to the "),f(9,"span",20),g(10,"Grand Prix"),h(),g(11," invitational, which is a marathon style race that runs for 51 hours twice a week. You can start the race at any time during the start and stop point of the Grand Prix. "),f(12,"b"),g(13,"It will run on its own in the background -- you don't have to watch your animals race for it to run."),h(),g(14," You have the option to view the race as desired by clicking the race. The weekly start and end times are: "),D(15,"br")(16,"br"),f(17,"span",20),g(18,"Weekday Marathon"),h(),g(19),D(20,"br"),f(21,"span",20),g(22,"Weekend Marathon"),h(),g(23),D(24,"br")(25,"br"),g(26),D(27,"br")(28,"br"),f(29,"span",20),g(30,"Morale"),h(),g(31," - This affects how much your stats reduce when running out of stamina. By default, your stats will reduce by 10% while Morale is at 100%. Morale can range from 50% to 300%. "),D(32,"br"),f(33,"span",20),g(34,"Energy"),h(),g(35," - The percent your stats are currently at from their maximum. This is increased slightly over time while a racer is not racing. "),D(36,"br"),f(37,"span",20),g(38,"*Note that these values have no impact on any race other than the Grand Prix."),h(),D(39,"br")(40,"br"),g(41," Maintain your morale and energy to get the most out of your racing animals. You can Relay to another animal in your event deck at any point, although the Relay will only occur after the completion of the current race leg. "),D(42,"br")(43,"br"),g(44," Race as far as you can to gain "),f(45,"span",38),g(46,"Coins"),h(),g(47,", "),f(48,"span",39),g(49,"Renown"),h(),g(50,", and the unique resource "),f(51,"span",38),g(52,"Tokens"),h(),g(53,". Click '"),f(54,"em"),g(55,"Rewards"),h(),g(56,"' to track your progress on gaining rewards. "),h()(),f(57,"div",36)(58,"button",37),I("click",function(){return B(e).$implicit.dismiss()}),g(59,"Close"),h()()()}if(2&t){const e=w();p(19),Q(" - ",e.weekDayGrandPrixTimeSpan," "),p(4),Q(" - ",e.weekEndGrandPrixTimeSpan," "),p(3),Q(" To run in the Grand Prix, animals must be at least Breed Level ",e.requiredBreedLevel,". The animals in your event deck will be shown below along with their current morale and energy. ")}}function M7(t,i){1&t&&(f(0,"div",25),g(1," Bonus Time is accrued from effects that delay competitors or extend the length of a race. Once the Grand Prix event time ends, any bonus time will continue to play out before your entry to the Grand Prix ends. "),h())}function k7(t,i){1&t&&(f(0,"div",25),g(1," Loading... "),h())}let A7=(()=>{class t{constructor(e,n,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.raceLogicService=a,this.sanitizer=o,this.modalService=s,this.componentCommunicationService=l,this.utilityService=c,this.raceSelected=new rt,this.popoverText="",this.cannotRace=!1,this.eventRaceReleased=!1,this.eventRaceNotice="",this.eventRaceTimer="",this.bonusTime="",this.grandPrixUnlocked=!1}ngOnInit(){var e=this;this.grandPrixData=this.globalService.globalVar.eventRaceData,this.previousRaceRewardList=this.globalService.globalVar.previousEventRewards,this.grandPrixUnlocked=this.lookupService.isItemUnlocked("grandPrix"),this.weekDayGrandPrixTimeSpan=this.lookupService.getWeekDayGrandPrixTimeSpan(),this.weekEndGrandPrixTimeSpan=this.lookupService.getWeekEndGrandPrixTimeSpan(),this.requiredBreedLevel=this.lookupService.getBreedLevelRequiredForGrandPrix(),this.popoverText=this.getForecastPopoverText();var n=this.globalService.getGrandPrixRacingAnimal();if(!this.globalService.globalVar.eventRaceData.animalData.some(c=>c.isCurrentlyRacing)){var r=this.globalService.globalVar.eventRaceData.animalData.find(c=>c.associatedAnimalType==n.type);void 0!==r&&(r.isCurrentlyRacing=!0)}var a=this.globalService.globalVar.modifiers.find(c=>"grandPrixCoinRewardModifier"===c.text);null!=a&&(this.coinRewardAmount=a.value);var o=this.globalService.globalVar.modifiers.find(c=>"grandPrixRenownRewardModifier"===c.text);null!=o&&(this.renownRewardAmount=o.value);var s=this.globalService.globalVar.modifiers.find(c=>"metersPerCoinsGrandPrixModifier"===c.text);null!=s&&(this.coinRewardInterval=s.value);var l=this.globalService.globalVar.modifiers.find(c=>"metersPerRenownGrandPrixModifier"===c.text);null!=l&&(this.renownRewardInterval=l.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var c=ar(function*(u){e.setupEventTime(),e.grandPrixData=e.globalService.globalVar.eventRaceData,e.previousRaceRewardList=e.globalService.globalVar.previousEventRewards,e.previousRaceRewardList.length>0&&e.setupDisplayRewards(),e.remainingMeters=e.globalService.globalVar.eventRaceData.totalDistance-e.globalService.globalVar.eventRaceData.distanceCovered,null!=e.globalService.globalVar.eventRaceData&&null!=e.globalService.globalVar.eventRaceData.currentRaceSegment&&(e.grandPrixData.isCatchingUp=e.globalService.globalVar.eventRaceData.segmentTimeCounter>=e.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60*2)});return function(u){return c.apply(this,arguments)}}())}selectEventRace(e){if(!1===this.globalService.globalVar.eventRaceData.isRunning){var n=this.globalService.getGrandPrixRacingAnimal();if(null==n.type)return void alert("None of the animals in your event deck are capable of entering the Grand Prix. Swap to new animals or make adjustments to your existing animals to meet the criteria.");var r=this.globalService.shouldShowSlowSegmentWarning(n);if(!this.lookupService.slowSegmentWarning(r))return;this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(n),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(n),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}!this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&!this.globalService.globalVar.eventRaceData.isCatchingUp&&this.raceSelected.emit(this.globalService.globalVar.eventRaceData.currentRaceSegment)}setupEventTime(){var e=this.globalService.getTimeToEventRace();if(e>0){this.isEventRaceAvailable=this.globalService.globalVar.eventRaceData.bonusTime>0,this.eventRaceNotice="Next Grand Prix available in";var a=e-60*(n=Math.floor(e/3600))*60-60*(r=Math.floor(e/60-60*n)),o=Math.floor(a).toString(),s=n.toString(),l=r.toString();n<10&&(s=n<1||n>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}else{var n,r,c=this.globalService.getRemainingEventRaceTime();if(c>0)this.eventRaceNotice="Grand Prix ends in",this.isEventRaceAvailable=!0,a=c-60*(n=Math.floor(c/3600))*60-60*(r=Math.floor(c/60-60*n)),s=n.toString(),l=r.toString(),o=Math.floor(a).toString(),n<10&&(s=n<1||n>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}this.bonusTime=this.globalService.globalVar.eventRaceData.bonusTime>0?this.utilityService.convertSecondsToHHMMSS(this.globalService.globalVar.eventRaceData.bonusTime):""}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openInfoModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openLoadingModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}getGrandPrixRenownRewardsPopover(){var r,a=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return r=this.globalService.globalVar.eventRaceData.totalDistance/(this.renownRewardInterval*a),Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/(this.renownRewardInterval*a))*this.renownRewardAmount+"/"+r*this.renownRewardAmount+" Renown obtained"}getGrandPrixCoinRewardsPopover(){var r,a=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return r=this.globalService.globalVar.eventRaceData.totalDistance/(this.coinRewardInterval*a),Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/(this.coinRewardInterval*a))*this.coinRewardAmount+"/"+r*this.coinRewardAmount+" Coins obtained"}getGrandPrixTokenRewardsPopover(){var e="",n=this.lookupService.getGrandPrixTokenRewards(),r=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),a=5e7,o=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken1MeterModifier"===C.text);null!=o&&(a=o.value);var s=n[0],l=5e7,c=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken2MeterModifier"===C.text);null!=c&&(l=c.value);var u=n[1],d=5e7,m=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken3MeterModifier"===C.text);null!=m&&(d=m.value);var v=n[2],_=5e7,y=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken4MeterModifier"===C.text);null!=y&&(_=y.value);var S=n[3],T=this.globalService.globalVar.eventRaceData.distanceCovered;return e+=T>=a*r?"<span class='crossed'>"+s+"</span>\n":"<span>"+s+"</span>\n",e+=T>=l*r?"<span class='crossed'>"+u+"</span>\n":"<span>"+u+"</span>\n",e+=T>=d*r?"<span class='crossed'>"+v+"</span>\n":"<span>"+v+"</span>\n",this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(e+=T>=_*r?"<span class='crossed'>"+S+"</span>\n":"<span>"+S+"</span>\n"))}getForecastPopoverText(){return this.lookupService.getWeatherClusterDescription(this.grandPrixData.weatherCluster)}goToTokenShop(){this.componentCommunicationService.setShopView(mt.shop,La.token)}setupDisplayRewards(){if(this.rewardCells=[],this.rewardRows=[],null!=this.previousRaceRewardList){for(var n=1;n<=this.previousRaceRewardList.length;n++)this.rewardCells.push({name:this.previousRaceRewardList[n-1].name,amount:this.previousRaceRewardList[n-1].amount}),n%4==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(_i),A(hn),A(Qv),A(Mo),A(lo),A(Zn),A(Ri))},t.\u0275cmp=dt({type:t,selectors:[["app-event-view"]],viewQuery:function(e,n){if(1&e&&ca(l7,7),2&e){let r;fn(r=pn())&&(n.loadingContent=r.first)}},outputs:{raceSelected:"raceSelected"},decls:10,vars:2,consts:[["class","centered",4,"ngIf"],["class","eventViewDiv centered",4,"ngIf"],["grandPrixRewardModal",""],["grandPrixInfoModal",""],["bonusTimeContent",""],["loadingModal",""],[1,"centered"],[1,"eventViewDiv","centered"],[1,"eventRaceHeader"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass","class","clickableText",3,"ngbPopover","click",4,"ngIf"],["type","button",1,"rightSpaced",3,"click"],[3,"click"],["id","grandPrix",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngbPopover","click"],["id","grandPrix"],[1,"s4Heading"],[1,"helpText",3,"click"],[1,"raceDescription"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText","eventRaceDescription",3,"ngClass","ngbPopover","disablePopover","click"],[1,"keyword"],["class","keyword",4,"ngIf"],["class","raceCatchingUp",4,"ngIf"],["popContent",""],[1,"raceCatchingUp"],[1,"popoverClass"],[1,"results"],["class","rewards",4,"ngIf"],[1,"rewards"],[4,"ngFor","ngForOf"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"],[1,"resourceKeyword"],[1,"progressionKeyword"]],template:function(e,n){1&e&&(x(0,c7,6,0,"p",0),x(1,D7,4,2,"div",1),x(2,R7,24,21,"ng-template",null,2,ot),x(4,x7,60,3,"ng-template",null,3,ot),x(6,M7,2,0,"ng-template",null,4,ot),x(8,k7,2,0,"ng-template",null,5,ot)),2&e&&(b("ngIf",!n.eventRaceReleased),p(1),b("ngIf",n.eventRaceReleased))},directives:[an,Or,Hn,s7,Yn],pipes:[no],styles:[".eventRace[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.centered[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.eventRaceDescription[_ngcontent-%COMP%]{width:40%;margin:auto}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.raceCatchingUp[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}table[_ngcontent-%COMP%]{table-layout:fixed;width:60%;height:100%;text-align:center;margin-left:auto;margin-right:auto}"]}),t})();function P7(t,i){if(1&t){const e=ge();f(0,"div",14)(1,"div",15)(2,"span",9),g(3,"Intermediate Track"),h(),D(4,"br"),f(5,"h6",10),I("click",function(){B(e);const r=w(2),a=at(9);return r.openRewardsModal(a)}),g(6),h(),D(7,"br"),f(8,"app-race-description",11),I("click",function(){B(e);const r=w(2);return r.selectTrackRace(r.intermediateTrackRace)}),h()(),D(9,"hr"),h()}if(2&t){const e=w(2);p(6),Wn("",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),p(2),b("race",e.intermediateTrackRace)("showStartText",!0)}}function E7(t,i){if(1&t){const e=ge();f(0,"div",16)(1,"div",17)(2,"span",9),g(3,"Master Track"),h(),D(4,"br"),f(5,"h6",10),I("click",function(){B(e);const r=w(2),a=at(11);return r.openRewardsModal(a)}),g(6),h(),D(7,"br"),f(8,"app-race-description",11),I("click",function(){B(e);const r=w(2);return r.selectTrackRace(r.masterTrackRace)}),h()(),D(9,"hr"),h()}if(2&t){const e=w(2);p(6),Wn("",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),p(2),b("race",e.masterTrackRace)("showStartText",!0)}}function I7(t,i){if(1&t){const e=ge();f(0,"div",6)(1,"div",7)(2,"div",8)(3,"span",9),g(4,"Novice Track"),h(),D(5,"br"),f(6,"h6",10),I("click",function(){B(e);const r=w(),a=at(7);return r.openRewardsModal(a)}),g(7),h(),D(8,"br"),f(9,"app-race-description",11),I("click",function(){B(e);const r=w();return r.selectTrackRace(r.noviceTrackRace)}),h()(),D(10,"hr"),h(),x(11,P7,10,4,"div",12),x(12,E7,10,4,"div",13),h()}if(2&t){const e=w();p(7),Wn("",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),p(2),b("race",e.noviceTrackRace)("showStartText",!0),p(2),b("ngIf",e.intermediateTrackAvailable),p(1),b("ngIf",e.masterTrackAvailable)}}function O7(t,i){if(1&t){const e=ge();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Novice Rewards"),h(),f(4,"button",21),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),I("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=w();p(11),b("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.novice),Nt)}}function N7(t,i){if(1&t){const e=ge();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Intermediate Rewards"),h(),f(4,"button",21),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),I("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=w();p(11),b("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.intermediate),Nt)}}function V7(t,i){if(1&t){const e=ge();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Master Rewards"),h(),f(4,"button",21),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),I("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=w();p(11),b("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.master),Nt)}}let F7=(()=>{class t{constructor(e,n,r,a,o){this.globalService=e,this.lookupService=n,this.sanitizer=r,this.modalService=a,this.componentCommunicationService=o,this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.raceSelected=new rt,this.showRace=!1,this.trackRaceTypeEnum=Kn}ngOnInit(){this.practiceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Kn.practice),this.noviceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Kn.novice),this.intermediateTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Kn.intermediate),this.masterTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Kn.master),this.intermediateTrackAvailable=this.selectedAnimal.allTrainingTracks.intermediateTrackAvailable,this.masterTrackAvailable=this.selectedAnimal.allTrainingTracks.masterTrackAvailable,this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()}}selectTrackRace(e){if(this.lookupService.canAnimalRace(this.selectedAnimal)){var n=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=n&&(n.selectedAnimals=n.selectedAnimals.filter(r=>r.raceCourseType!==this.selectedAnimal.raceCourseType),n.selectedAnimals.push(this.selectedAnimal)),this.raceSelected.emit(e)}}getTrackRewardsPopover(e){var n="",r=this.lookupService.getTrackRaceRewards(e),a=.25,o=this.globalService.globalVar.modifiers.find(u=>"trainingTrackPaceModifier"===u.text);void 0!==o&&(a=o.value);for(var s=0;s<r.length;s++){var l=r[s],c=0;e===Kn.novice?c=this.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained:e===Kn.intermediate?c=this.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained:e===Kn.master&&(c=this.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained),n+=s<c?"<span class='crossed'>("+s*a*100+"% average pace) "+l+"</span>\n":"<span>("+s*a*100+"% average pace) "+l+"</span>\n"}return this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(n))}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}goToAnimal(){this.componentCommunicationService.setAnimalView(mt.animals,this.selectedAnimal)}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(hn),A(Mo),A(lo),A(Zn))},t.\u0275cmp=dt({type:t,selectors:[["app-training-track-race-view"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{raceSelected:"raceSelected"},decls:12,vars:3,consts:[[1,"trainingTrackView"],[1,"keyword","clickableText",3,"ngClass","click"],["class","trainingTracks",4,"ngIf"],["noviceRewardModal",""],["intermediateRewardModal",""],["masterRewardModal",""],[1,"trainingTracks"],["id","trainingTrack1"],[1,"noviceTrackRace"],[1,"s4Heading"],[1,"clickableText","keyword",3,"click"],[3,"race","showStartText","click"],["id","trainingTrack2",4,"ngIf"],["id","trainingTrack3",4,"ngIf"],["id","trainingTrack2"],[1,"intermediateTrackRace"],["id","trainingTrack3"],[1,"masterTrackRace"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0),g(1," Selected Animal: "),f(2,"span",1),I("click",function(){return n.goToAnimal()}),g(3),h(),D(4,"hr"),x(5,I7,13,6,"div",2),h(),x(6,O7,15,1,"ng-template",null,3,ot),x(8,N7,15,1,"ng-template",null,4,ot),x(10,V7,15,1,"ng-template",null,5,ot)),2&e&&(p(2),b("ngClass",n.colorConditional),p(1),nt(n.selectedAnimal.name),p(2),b("ngIf",!n.showRace))},directives:[Hn,an,R0],styles:[".trainingTrackView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}"]}),t})();const B7=["raceCanvas"];let L7=(()=>{class t{constructor(e,n,r,a,o){this.globalService=e,this.gameLoopService=n,this.utilityService=r,this.lookupService=a,this.themeService=o,this.skipRace=!1,this.pauseRace=!1,this.lengthCompleted=0,this.frameModifier=60,this.mountainEndingY=0,this.icyPatchBackgroundLines=[],this.volcanoYOffset=0,this.volcanoRadiusXModifier=6,this.backgroundVolcanoYStart=0,this.currentRaceFrame=0,this.lastPathEndingX=0,this.lastPathEndingY=0,this.lastPreviousSeconds=0,this.totalRaceModeXDistance=0,this.totalRaceModeYDistance=0,this.deltaY=0,this.yOffscreen=0,this.overviewYOffsetModifier=1,this.visibleDistanceXLeft=0,this.visibleDistanceYTop=0,this.visibleDistanceXRight=0,this.visibleDistanceYBottom=0,this.mountainClimbPercent=.5,this.eventViewStartFrame=0,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,this.newSegment=!1}ngOnInit(){this.globalService.globalVar.userIsRacing=!0,this.skipSubscription=this.skip.subscribe(()=>{this.skipRace=!0,this.isRaceFinished=!0}),this.pauseSubscription=this.pause.subscribe(()=>{this.pauseRace=!this.pauseRace}),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.skipRace=!0,this.isRaceFinished=!0)}ngAfterViewInit(){this.race.raceType===Ne.event&&this.race.eventRaceType===He.grandPrix&&(this.eventViewStartFrame=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier)),this.totalLegs=this.race.raceLegs.length,this.setupCanvas(),this.canvasXDistanceScale=this.canvasWidth/this.race.length;var e=this.raceCanvas.nativeElement.getContext("2d");e.lineWidth=6;var n=0;this.mountainClimbPercent=this.utilityService.getRandomNumber(.3,.7),this.race.raceType===Ne.event&&this.race.eventRaceType===He.grandPrix&&(0===this.globalService.globalVar.eventRaceData.mountainClimbPercent?this.globalService.globalVar.eventRaceData.mountainClimbPercent=this.mountainClimbPercent:this.mountainClimbPercent=this.globalService.globalVar.eventRaceData.mountainClimbPercent);var r=this.race.raceUI.timeToCompleteByFrame[this.race.raceUI.timeToCompleteByFrame.length-1];this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{performance.now(),e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.lineWidth=6,this.pauseRace||(n+=a,this.race.raceType===Ne.event&&this.race.eventRaceType===He.grandPrix&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount>this.lastEventSegment?(this.eventViewStartFrame=0,this.currentRaceFrame=0,this.race=this.globalService.globalVar.eventRaceData.currentRaceSegment,this.newSegment=!0):this.newSegment=!1,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount),this.currentRaceFrame+=1);var s=!1;this.race.raceType===Ne.event&&this.race.eventRaceType===He.grandPrix&&this.globalService.getRemainingEventRaceTime()>0&&(s=!0),(this.currentRaceFrame>=r*this.frameModifier||this.isRaceFinished||this.skipRace)&&!s?this.displayOverview(e,!0):this.displayRace(e,n),performance.now()})}setupCanvas(){this.raceCanvas.nativeElement.style.width="100%",this.raceCanvas.nativeElement.style.height="100%",this.raceCanvas.nativeElement.width=this.raceCanvas.nativeElement.offsetWidth,this.raceCanvas.nativeElement.height=this.raceCanvas.nativeElement.offsetHeight,this.canvasHeight=this.raceCanvas.nativeElement.height,this.canvasWidth=this.raceCanvas.nativeElement.width}displayOverview(e,n){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.lengthCompleted=0,this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=0,a=!0,l=0;if(this.race.raceLegs.forEach(C=>{void 0!==C.pathData&&0!==C.pathData.length&&(l=0,C.pathData.forEach(O=>{if(C.courseType===z.Flatland)e.lineCap="round",O.routeDesign===Xe.Regular&&this.drawRegularFlatlandOverview(e,O,1,1),O.routeDesign===Xe.S&&this.drawSFlatlandOverview(e,O,1,1),O.routeDesign===Xe.Bumps&&this.drawBumpsFlatlandOverview(e,O,1,1);else if(C.courseType===z.Mountain){e.lineCap="round";var j=this.getCurrentAnimalRacingCourse(this.lengthCompleted)!==z.Mountain||r<C.distance*this.mountainClimbPercent;O.routeDesign===Xe.Regular&&this.drawRegularMountainOverview(e,O,1,this.overviewYOffsetModifier,j),O.routeDesign===Xe.Crevasse&&this.drawCrevasseMountainOverview(e,O,1,this.overviewYOffsetModifier,j),O.routeDesign===Xe.Gaps&&this.drawGapsMountainOverview(e,O,1,this.overviewYOffsetModifier,j),r+=O.length}else C.courseType===z.Ocean&&(e.lineCap="round",O.routeDesign===Xe.Regular&&this.drawRegularWaterOverview(e,O,1,1,a),O.routeDesign===Xe.Waves&&this.drawWavesWaterOverview(e,O,1,1,a),O.routeDesign===Xe.Dive&&this.drawDiveWaterOverview(e,O,1,1,a),a=!a);C.courseType===z.Tundra&&(e.lineCap="round",O.routeDesign===Xe.Regular&&this.drawRegularTundraOverview(e,O,1,1),O.routeDesign===Xe.Cavern&&this.drawCavernTundraOverview(e,O,1,1),O.routeDesign===Xe.Hills&&this.drawHillsTundraOverview(e,O,1,1)),C.courseType===z.Volcanic&&(e.lineCap="round",this.backgroundVolcanoYStart=this.lastPathEndingY,(O.routeDesign===Xe.Regular||O.routeDesign===Xe.FirstRegular||O.routeDesign===Xe.LastRegular)&&this.drawRegularVolcanoOverview(e,0,l,O,C.pathData.length,1,1),O.routeDesign===Xe.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,l,O,C.pathData.length,1,1)),this.lengthCompleted+=O.length,l+=1,this.lastPathEndingY<0&&(this.yOffscreen=this.lastPathEndingY)}))}),this.yOffscreen<0&&(this.overviewYOffsetModifier=this.overviewYOffsetModifier/1.25,this.yOffscreen=0),n){this.globalService.globalVar.userIsRacing=!1,e.globalCompositeOperation="source-atop";var u=this.race.raceUI.distanceCoveredByFrame[this.race.raceUI.distanceCoveredByFrame.length-1]/this.race.length,d=0,m=0,v=!1;this.race.raceLegs.forEach(C=>{if(!v){var O=(d+=C.distance)/this.race.length;O>u&&(O=u,v=!0);var j=(O-m)*this.canvasWidth;e.fillStyle=this.getAnimalDistanceColorByType(C.courseType),e.fillRect(m*this.canvasWidth,0,j,this.canvasHeight),m=O}})}if(this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(C=>{"Hills"===C[0]?this.drawHillsBackgroundTundraOverview(e,C):this.drawIcyPatchBackgroundTundraOverview(e,C)}),this.race.raceLegs.some(C=>C.courseType===z.Volcanic)){var S,_=0,y=!1;this.race.raceLegs.forEach(C=>{this.race.raceLegs.some(O=>O.courseType===z.Volcanic)&&(C.courseType!==z.Volcanic&&!y&&(_+=C.distance),C.courseType===z.Volcanic&&(y=!0))}),S=this.race.raceLegs.find(C=>C.courseType===z.Volcanic).distance;var T=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,0,_,_+S,1,1),e.globalCompositeOperation=T}}}displayRace(e,n){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.lineCap="round",e.strokeStyle="gray",this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=10,a=10;this.totalRaceModeXDistance=this.race.length*r;var o=0,s=[];this.race.raceLegs.forEach(gt=>{s.push(gt)});var l=!1;this.race.raceType===Ne.event&&this.race.eventRaceType===He.grandPrix?(l=!0,o=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier),s.push(this.globalService.globalVar.eventRaceData.nextRaceSegment.raceLegs[0])):o=this.currentRaceFrame;var c=this.race.raceUI.distanceCoveredByFrame[o],u=0;l&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment&&(s.unshift(this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0]),c+=s[0].distance),this.averageDistancePerSecond=this.race.raceType===Ne.event&&this.race.eventRaceType===He.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/this.globalService.globalVar.eventRaceData.grandPrixTimeLength:this.race.length/this.race.raceUI.timeToCompleteByFrame[o];var d=0,m=0,v=!1,_=0;s.forEach(gt=>{v||(c>=d&&c<d+gt.distance&&(v=!0,this.currentLeg=gt),v||(m+=gt.distance,_+=1)),d+=gt.distance});var y=c-m,S=0;if(this.currentLeg.courseType===z.Mountain){var T=this.currentLeg.distance*this.mountainClimbPercent,C=0,O=!1,j=0;this.currentLeg.pathData.forEach(gt=>{O||(T>=j&&T<j+gt.length&&(O=!0,C=j+gt.length-T),j+=gt.length)}),O=!1;var G=0,K=0;this.currentLeg.pathData.forEach(gt=>{if(!O){if(y>=G&&y<G+gt.length&&(O=!0,K=y-G,gt.routeDesign===Xe.Crevasse)){var kt=gt.length/2*3,_r=3*K;S-=K<gt.length/2?_r:kt-(_r-kt)}G+=gt.length}});var se=T+C;this.mountainEndingY=u=y<se?y+S:se-(y-se)+S,this.race.raceType===Ne.event&&this.race.eventRaceType===He.grandPrix&&o===this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed-2&&(this.globalService.globalVar.eventRaceData.mountainEndingY=u)}if(this.race.raceLegs.some(gt=>gt.courseType===z.Mountain)||(this.mountainEndingY=0),u=this.mountainEndingY,this.race.raceType===Ne.event&&this.race.eventRaceType===He.grandPrix&&(u+=this.globalService.globalVar.eventRaceData.mountainEndingY,null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&this.currentLeg.courseType!==z.Mountain&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType!==z.Mountain&&(u=0)),this.currentLeg.courseType===z.Volcanic&&!this.pauseRace){var de=this.currentLeg.pathData[0].length/r;if(y>de){var be=this.currentLeg.distance/this.volcanoRadiusXModifier,he=de/this.currentLeg.distance,Ae=y/this.currentLeg.distance,Ze=(this.currentLeg.distance-2*de)/this.currentLeg.distance/2;if(Ae>he&&Ae<1-he){var Ct=100/(100-2*he),_t=-be,ve=be*Math.pow(1.05,-100*(Ae>.5?2*(Ze-((Ae-he)*Ct-Ze)):(Ae-he)*Ct*2))+_t;this.volcanoYOffset=ve}}}var R=c*this.canvasXDistanceScale*r-this.canvasWidth/2,Ye=(u+=this.volcanoYOffset)*this.canvasXDistanceScale*a;if(this.visibleDistanceXLeft=R,this.visibleDistanceXRight=R+this.canvasWidth,e.globalCompositeOperation="source-over",(c>=this.race.length||o>this.race.raceUI.distanceCoveredByFrame.length)&&!l)return void(this.isRaceFinished=!0);var fe=0,Ee=!0,ut=0;s.forEach(gt=>{void 0!==gt.pathData&&0!==gt.pathData.length&&(ut=0,this.race.raceType===Ne.event&&this.race.eventRaceType===He.grandPrix&&(fe=0),gt.pathData.forEach(kt=>{if(gt.courseType===z.Flatland)kt.routeDesign===Xe.Regular&&this.drawRegularFlatlandOverview(e,kt,r,a,R,Ye),kt.routeDesign===Xe.S&&this.drawSFlatlandOverview(e,kt,r,a,R,Ye),kt.routeDesign===Xe.Bumps&&this.drawBumpsFlatlandOverview(e,kt,r,a,R,Ye);else if(gt.courseType===z.Mountain){var _r=fe<gt.distance*this.mountainClimbPercent;kt.routeDesign===Xe.Regular&&this.drawRegularMountainOverview(e,kt,r,a,_r,R,Ye),kt.routeDesign===Xe.Crevasse&&this.drawCrevasseMountainOverview(e,kt,r,a,_r,R,Ye),kt.routeDesign===Xe.Gaps&&this.drawGapsMountainOverview(e,kt,r,a,_r,R,Ye),fe+=kt.length,this.grandPrixMountainYReset(_)}else gt.courseType===z.Ocean&&(kt.routeDesign===Xe.Regular&&this.drawRegularWaterOverview(e,kt,r,a,Ee,R,Ye),kt.routeDesign===Xe.Waves&&this.drawWavesWaterOverview(e,kt,r,a,Ee,R,Ye),kt.routeDesign===Xe.Dive&&this.drawDiveWaterOverview(e,kt,r,a,Ee,R,Ye),Ee=!Ee);gt.courseType===z.Tundra&&(kt.routeDesign===Xe.Regular&&this.drawRegularTundraOverview(e,kt,r,a,R,Ye),kt.routeDesign===Xe.Cavern&&this.drawCavernTundraOverview(e,kt,r,a,R,Ye),kt.routeDesign===Xe.Hills&&this.drawHillsTundraOverview(e,kt,r,a,R,Ye)),gt.courseType===z.Volcanic&&(this.backgroundVolcanoYStart=this.lastPathEndingY,(kt.routeDesign===Xe.Regular||kt.routeDesign===Xe.FirstRegular||kt.routeDesign===Xe.LastRegular)&&this.drawRegularVolcanoOverview(e,0,ut,kt,gt.pathData.length,r,a,R,Ye),kt.routeDesign===Xe.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,ut,kt,gt.pathData.length,r,a,R,Ye)),ut+=1,this.lengthCompleted+=kt.length})),_+=1}),e.globalCompositeOperation="source-atop";var nn=0,on=m*this.canvasXDistanceScale*r,ft=s.indexOf(this.currentLeg),gn=null;ft>0&&(gn=s[ft-1]),null!=gn&&on>=this.visibleDistanceXLeft&&on<=this.visibleDistanceXRight?(nn=(on-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=this.getAnimalDistanceColorByType(gn.courseType),e.fillRect(0,0,this.canvasWidth*nn,this.canvasHeight),e.fillStyle=this.getAnimalDistanceColorByType(this.currentLeg.courseType),e.fillRect(this.canvasWidth*nn,0,this.canvasWidth/2-this.canvasWidth*nn,this.canvasHeight)):(e.fillStyle=this.getAnimalDistanceColor(c,s),e.fillRect(0,0,this.canvasWidth/2,this.canvasHeight));var $n=this.getAnimalRacerColor(c,s);(this.race.raceUI.racerEffectByFrame[o]===Pr.LostFocus||this.race.raceUI.racerEffectByFrame[o]===Pr.LostStamina||this.race.raceUI.racerEffectByFrame[o]===Pr.Stumble)&&($n=this.utilityService.shadeColor($n,-90)),this.race.raceUI.racerEffectByFrame[o]===Pr.Burst&&($n=this.utilityService.shadeColor($n,90)),e.fillStyle=$n,e.fillRect(this.canvasWidth/2-5,0,5,this.canvasHeight),this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(gt=>{"Hills"===gt[0]?this.drawHillsBackgroundTundraOverview(e,gt):this.drawIcyPatchBackgroundTundraOverview(e,gt)}),e.globalCompositeOperation="source-atop";var kn=this.averageDistancePerSecond/this.frameModifier*o;if(this.race.raceType===Ne.event&&this.race.eventRaceType===He.grandPrix){var qn=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();kn+=this.averageDistancePerSecond*qn}if(this.drawRacer(e,kn*this.canvasXDistanceScale*r,"black"),this.race.localRaceType!==Qt.Track){if(this.lookupService.getResourceByName("Money Mark")>0){var An=.75,lt=this.globalService.globalVar.modifiers.find(gt=>"moneyMarkPaceModifier"===gt.text);null!=lt&&(An=lt.value),this.drawRacer(e,this.race.length/(this.race.raceUI.timeToCompleteByFrame[o]*An)/this.frameModifier*o*this.canvasXDistanceScale*r,"gold")}}else{var Vn=.25,_n=this.globalService.globalVar.modifiers.find(gt=>"trainingTrackPaceModifier"===gt.text);void 0!==_n&&(Vn=_n.value);for(var oi=0;oi<11;oi++){var co=this.race.length/(this.race.raceUI.timeToCompleteByFrame[o]/(1+Vn*(oi+1)))/this.frameModifier*o*this.canvasXDistanceScale*r,Fo=this.getTrackRacerColor(oi);this.drawRacer(e,co,Fo)}}if(this.drawBreakpoints(e,r,s),s.some(gt=>gt.courseType===z.Volcanic)){var Qi,Vi=0,Bt=!1;s.forEach(gt=>{s.some(kt=>kt.courseType===z.Volcanic)&&(gt.courseType!==z.Volcanic&&!Bt&&(Vi+=gt.distance),gt.courseType===z.Volcanic&&(Bt=!0))}),Qi=s.find(gt=>gt.courseType===z.Volcanic).distance;var ms=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,o,Vi,Vi+Qi,r,a,R,Ye),e.globalCompositeOperation=ms}}}getAnimalDistanceColor(e,n){var r="",a=0;return null==n&&(n=this.race.raceLegs),n.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===z.Flatland&&(r="#7d3f00"),o.courseType===z.Mountain&&(r="#1b630d"),o.courseType===z.Ocean&&(r="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),o.courseType===z.Tundra&&(r="#28809c"),o.courseType===z.Volcanic&&(r="#8f1a1a")),a+=o.distance}),r}getAnimalDistanceColorByType(e){var n="";return e===z.Flatland&&(n="#7d3f00"),e===z.Mountain&&(n="#1b630d"),e===z.Ocean&&(n="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===z.Tundra&&(n="#28809c"),e===z.Volcanic&&(n="#8f1a1a"),n}getAnimalRacerColor(e,n){var r="",a=0;return null==n&&(n=this.race.raceLegs),n.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===z.Flatland&&("night"===this.themeService.getActiveThemeName()?r="#E18B07":(this.themeService.getActiveThemeName(),r="#c66900")),o.courseType===z.Mountain&&("night"===this.themeService.getActiveThemeName()?r="#30b001":(this.themeService.getActiveThemeName(),r="#279113")),o.courseType===z.Ocean&&("night"===this.themeService.getActiveThemeName()?r="#9289CF":(this.themeService.getActiveThemeName(),r="#0000FF")),o.courseType===z.Tundra&&("night"===this.themeService.getActiveThemeName()?r="#019DDE":(this.themeService.getActiveThemeName(),r="#1CA1C9")),o.courseType===z.Volcanic&&("night"===this.themeService.getActiveThemeName()?r="#E56C6E":(this.themeService.getActiveThemeName(),r="#D92525"))),a+=o.distance}),r}getTrackRacerColor(e){var n="";return 0===e&&(n="#cfc800"),1===e&&(n="#00cf68"),2===e&&(n="#cf00c5"),3===e&&(n="#cfb8e6"),4===e&&(n="#4a1d1d"),5===e&&(n="#1b5054"),6===e&&(n="#541b3c"),7===e&&(n="#aeb85a"),8===e&&(n="#ffffff"),9===e&&(n="#01253b"),10===e&&(n="#790dde"),n}getCurrentAnimalRacingCourse(e){var n;n=z.Flatland;var r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(n=a.courseType),r+=a.distance}),n}getNextAnimalRacingCourse(e){var n;n=z.Flatland;var r=this.race.raceLegs.indexOf(e);return this.race.raceLegs.length>r&&(n=this.race.raceLegs[r+1].courseType),n}drawRacer(e,n,r){var a=0;n>=this.visibleDistanceXLeft&&n<=this.visibleDistanceXRight&&(a=(n-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=r,e.fillRect(this.canvasWidth*a-5,0,5,this.canvasHeight))}drawBreakpoints(e,n,r){var a=0;null==r&&(r=this.race.raceLegs);for(var o=0;o<r.length;o++){var s=r[o],l=null;o<r.length-1&&(l=r[o+1]);var c=0,u=(a+s.distance)*this.canvasXDistanceScale*n;u>=this.visibleDistanceXLeft&&u<=this.visibleDistanceXRight&&(c=(u-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=null!==l?this.getAnimalDistanceColorByType(l.courseType):"pink",e.fillRect(this.canvasWidth*c-5,0,5,this.canvasHeight)),a+=s.distance}}drawRegularFlatlandOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0),e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+s),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawSFlatlandOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,m=.23*l,v=1.2173*m,_=.04*l,y=v,S=_+m,T=v,C=S+m,O=v,j=C,K=C,se=v,de=K+m,be=v,he=de+m,Ae=v,Ze=he;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.bezierCurveTo(c+d,u,c+_,u+y,c+S,u+T),e.bezierCurveTo(c+S,u+T,c+C,u+O,c+j,u),e.stroke(),e.beginPath(),e.moveTo(c+j,u),e.bezierCurveTo(c+j,u,c+K,u-se,c+de,u-be),e.bezierCurveTo(c+de,u-be,c+he,u-Ae,c+he,u),e.stroke(),e.beginPath(),e.moveTo(c+he,u),e.lineTo(c+Ze+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+Ze+d}drawBumpsFlatlandOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,m=.115*l,v=m/3;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.lineTo(c+d+m/2,u-v),e.lineTo(c+d+m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+m,u),e.lineTo(c+d+m+m/2,u-v),e.lineTo(c+d+2*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+2*m,u),e.lineTo(c+d+2*m+m/2,u-v),e.lineTo(c+d+3*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+3*m,u),e.lineTo(c+d+3*m+m/2,u-v),e.lineTo(c+d+4*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+4*m,u),e.lineTo(c+d+4*m+m/2,u-v),e.lineTo(c+d+5*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+5*m,u),e.lineTo(c+d+5*m+m/2,u-v),e.lineTo(c+d+6*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+6*m,u),e.lineTo(c+d+6*m+m/2,u-v),e.lineTo(c+d+7*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+7*m,u),e.lineTo(c+d+7*m+m/2,u-v),e.lineTo(c+d+8*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+8*m,u),e.lineTo(c+d+8*m+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawRegularMountainOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0),e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),e.lineTo(this.lastPathEndingX+c-s,o?this.lastPathEndingY-u+l:this.lastPathEndingY+u+l),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawCrevasseMountainOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,m=this.lastPathEndingY+l,_=c,y=u,S=2*y;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),o?(S=2*y-(y-0),e.lineTo(d+0,m-0),e.lineTo(d+0+_/2,m+S-0),e.lineTo(d+0+_,m-y-0),e.lineTo(d+0+_,m-y-0)):(e.lineTo(d+0,m+0),e.lineTo(d+0+_/2,m+S+0),e.lineTo(d+0+_,m+y+0),e.lineTo(d+0+_,m+y+0)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawGapsMountainOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,m=this.lastPathEndingY+l,v=.04*c,_=.115*c,y=.115*u,S=.04*u;e.beginPath(),e.moveTo(d,m),o?(e.lineTo(d+v,m-S),e.moveTo(d+_+v,m-y-S),e.lineTo(d+2*_+v,m-2*y-S),e.moveTo(d+3*_+v,m-3*y-S),e.lineTo(d+4*_+v,m-4*y-S),e.moveTo(d+5*_+v,m-5*y-S),e.lineTo(d+6*_+v,m-6*y-S),e.moveTo(d+7*_+v,m-7*y-S),e.lineTo(d+8*_+v,m-8*y-S),e.lineTo(d+8*_+2*v,m-8*y-2*S)):(e.lineTo(d+v,m+S),e.moveTo(d+_+v,m+y+S),e.lineTo(d+2*_+v,m+2*y+S),e.moveTo(d+3*_+v,m+3*y+S),e.lineTo(d+4*_+v,m+4*y+S),e.moveTo(d+5*_+v,m+5*y+S),e.lineTo(d+6*_+v,m+6*y+S),e.moveTo(d+7*_+v,m+7*y+S),e.lineTo(d+8*_+v,m+8*y+S),e.lineTo(d+8*_+2*v,m+8*y+2*S)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawRegularWaterOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,m=c/3,v=c/6,_=u+m,y=o?d+v:d-v,S=u+2*m,T=o?d+v:d-v,C=u+3*m,O=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(_,y,S,T,C,O),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawWavesWaterOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,m=c/3,v=c/3,_=u+m/3,y=d,S=u+m/3,T=d-v,C=u+m,O=d-.6*v;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(_,y,S,T,C,O),e.stroke();var j=C-m/3,G=O-v/10,K=C-m/3,se=O+.6*v,de=C,be=d;e.beginPath(),e.moveTo(C,O),e.bezierCurveTo(j,G,K,se,de,be),e.stroke();var he=de+m/3,Ae=be,Ze=de+m/3,Ct=be-v,vt=de+m,xt=be-.6*v;e.beginPath(),e.moveTo(de,be),e.bezierCurveTo(he,Ae,Ze,Ct,vt,xt),e.stroke();var Ot=vt-m/3,_t=xt-v/10,ve=vt-m/3,R=xt+.6*v,Ye=vt,fe=d;e.beginPath(),e.moveTo(vt,xt),e.bezierCurveTo(Ot,_t,ve,R,Ye,fe),e.stroke();var Ee=Ye+m/3,Kt=fe,ut=Ye+m/3,nn=fe-v,on=Ye+m,ft=fe-.6*v;e.beginPath(),e.moveTo(Ye,fe),e.bezierCurveTo(Ee,Kt,ut,nn,on,ft),e.stroke();var gn=on-m/3,Bn=ft-v/10,zn=on-m/3,$n=ft+.6*v,kn=on,qn=d;e.beginPath(),e.moveTo(on,ft),e.bezierCurveTo(gn,Bn,zn,$n,kn,qn),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawDiveWaterOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,m=c/3,v=c/2,_=u,y=o?d+2*v:d-2*v,S=u+2*m,T=o?d+v/4:d-v/4,C=u+3*m,O=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(_,y,S,T,C,O),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawRegularTundraOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=n.driftAmount/80*u,m=(n.totalTundraYAmount-n.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+m+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+m+d+s),e.stroke();var v=[];v.push("Regular"),v.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]),this.icyPatchBackgroundLines.push(v),this.lastPathEndingX=this.lastPathEndingX+l}drawCavernTundraOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var m=l/4*.97,v=n.driftAmount/80*m,_=(n.totalTundraYAmount-n.driftAmount)/80*m;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+_+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+_+v+s),e.stroke();var S=l/4*.75,T=[];T.push("Cavern"),T.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),T.push([this.lastPathEndingX-o,this.lastPathEndingY+S+s]),T.push([this.lastPathEndingX+l-o,this.lastPathEndingY+S+s]),T.push([this.lastPathEndingX+l-o,this.lastPathEndingY-S+s]),T.push([this.lastPathEndingX-o,this.lastPathEndingY-S+s]),this.icyPatchBackgroundLines.push(T),this.lastPathEndingX=this.lastPathEndingX+l}drawHillsTundraOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=n.driftAmount/80*u,m=(n.totalTundraYAmount-n.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+m+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+m+d+s),e.stroke();var v=[];v.push("Hills"),v.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]);var _=l/12,y=l/4,S=c/2,T=c*(3/4),C=c/4;v.push([this.lastPathEndingX+y-_/2-o,this.lastPathEndingY-S+C/2+s]),v.push([this.lastPathEndingX+y-_/2-o,this.lastPathEndingY-S-C+s,this.lastPathEndingX+y+_/2-o,this.lastPathEndingY-S-C+s,this.lastPathEndingX+y+_/2-o,this.lastPathEndingY-S+C/2+s]),v.push([this.lastPathEndingX+y-_/2-o,this.lastPathEndingY+S+C/2+s]),v.push([this.lastPathEndingX+y-_/2-o,this.lastPathEndingY+S-C+s,this.lastPathEndingX+y+_/2-o,this.lastPathEndingY+S-C+s,this.lastPathEndingX+y+_/2-o,this.lastPathEndingY+S+C/2+s]),v.push([this.lastPathEndingX+2*y-_/2-o,this.lastPathEndingY-T+C/2+s]),v.push([this.lastPathEndingX+2*y-_/2-o,this.lastPathEndingY-T-C+s,this.lastPathEndingX+2*y+_/2-o,this.lastPathEndingY-T-C+s,this.lastPathEndingX+2*y+_/2-o,this.lastPathEndingY-T+C/2+s]),v.push([this.lastPathEndingX+2*y-_/2-o,this.lastPathEndingY+T+C/2+s]),v.push([this.lastPathEndingX+2*y-_/2-o,this.lastPathEndingY+T-C+s,this.lastPathEndingX+2*y+_/2-o,this.lastPathEndingY+T-C+s,this.lastPathEndingX+2*y+_/2-o,this.lastPathEndingY+T+C/2+s]),v.push([this.lastPathEndingX+3*y-_/2-o,this.lastPathEndingY-S+C/2+s]),v.push([this.lastPathEndingX+3*y-_/2-o,this.lastPathEndingY-S-C+s,this.lastPathEndingX+3*y+_/2-o,this.lastPathEndingY-S-C+s,this.lastPathEndingX+3*y+_/2-o,this.lastPathEndingY-S+C/2+s]),v.push([this.lastPathEndingX+3*y-_/2-o,this.lastPathEndingY+S+C/2+s]),v.push([this.lastPathEndingX+3*y-_/2-o,this.lastPathEndingY+S-C+s,this.lastPathEndingX+3*y+_/2-o,this.lastPathEndingY+S-C+s,this.lastPathEndingX+3*y+_/2-o,this.lastPathEndingY+S+C/2+s]),this.icyPatchBackgroundLines.push(v),this.lastPathEndingX=this.lastPathEndingX+l}drawIcyPatchBackgroundTundraOverview(e,n){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.beginPath(),e.moveTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.lineTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r}drawHillsBackgroundTundraOverview(e,n){var r=e.globalCompositeOperation;e.strokeStyle="dimgray",e.globalCompositeOperation="source-atop",n.length>=17&&(e.beginPath(),e.moveTo(n[6][0],n[6][1]),e.bezierCurveTo(n[7][0],n[7][1],n[7][2],n[7][3],n[7][4],n[7][5]),e.stroke(),e.beginPath(),e.moveTo(n[8][0],n[8][1]),e.bezierCurveTo(n[9][0],n[9][1],n[9][2],n[9][3],n[9][4],n[9][5]),e.stroke(),e.beginPath(),e.moveTo(n[10][0],n[10][1]),e.bezierCurveTo(n[11][0],n[11][1],n[11][2],n[11][3],n[11][4],n[11][5]),e.stroke(),e.beginPath(),e.moveTo(n[12][0],n[12][1]),e.bezierCurveTo(n[13][0],n[13][1],n[13][2],n[13][3],n[13][4],n[13][5]),e.stroke(),e.beginPath(),e.moveTo(n[14][0],n[14][1]),e.bezierCurveTo(n[15][0],n[15][1],n[15][2],n[15][3],n[15][4],n[15][5]),e.stroke(),e.beginPath(),e.moveTo(n[16][0],n[16][1]),e.bezierCurveTo(n[17][0],n[17][1],n[17][2],n[17][3],n[17][4],n[17][5]),e.stroke()),e.globalCompositeOperation="destination-over",n.length>=17&&(e.beginPath(),e.moveTo(n[6][0],n[6][1]),e.bezierCurveTo(n[7][0],n[7][1],n[7][2],n[7][3],n[7][4],n[7][5]),e.stroke(),e.beginPath(),e.moveTo(n[8][0],n[8][1]),e.bezierCurveTo(n[9][0],n[9][1],n[9][2],n[9][3],n[9][4],n[9][5]),e.stroke(),e.beginPath(),e.moveTo(n[10][0],n[10][1]),e.bezierCurveTo(n[11][0],n[11][1],n[11][2],n[11][3],n[11][4],n[11][5]),e.stroke(),e.beginPath(),e.moveTo(n[12][0],n[12][1]),e.bezierCurveTo(n[13][0],n[13][1],n[13][2],n[13][3],n[13][4],n[13][5]),e.stroke(),e.beginPath(),e.moveTo(n[14][0],n[14][1]),e.bezierCurveTo(n[15][0],n[15][1],n[15][2],n[15][3],n[15][4],n[15][5]),e.stroke(),e.beginPath(),e.moveTo(n[16][0],n[16][1]),e.bezierCurveTo(n[17][0],n[17][1],n[17][2],n[17][3],n[17][4],n[17][5]),e.stroke()),e.beginPath(),e.moveTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.lineTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r,e.strokeStyle="gray"}drawRegularVolcanoOverview(e,n,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);var T=this.lastPathEndingX-c-d*r+d*o/2,C=this.lastPathEndingY+0+u,O=d*o/this.volcanoRadiusXModifier,j=d*o/2-d/s,G=Math.PI/2,de=180/o,be=0;a.routeDesign===Xe.FirstRegular?(this.volcanoStartingAngle=be=90,e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d/s-c,this.lastPathEndingY+0+u),e.stroke()):a.routeDesign===Xe.LastRegular&&(e.beginPath(),e.moveTo(this.lastPathEndingX+(d-d/s)-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d-c,this.lastPathEndingY+0+u),e.stroke()),(be=this.volcanoStartingAngle-de)<0&&(be=360-Math.abs(be)),e.beginPath(),e.ellipse(T,C,O,j,G,this.volcanoStartingAngle*(Math.PI/180),be*(Math.PI/180),!0),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=be}drawSteppingStonesVolcanoOverview(e,n,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);for(var T=this.lastPathEndingX-c-d*r+d*o/2,C=this.lastPathEndingY+0+u,O=d*o/this.volcanoRadiusXModifier,j=d*o/2-d/s,G=Math.PI/2,de=180/o,Ze=0,be=de/20,he=0;he<10;he++){var Ae=this.volcanoStartingAngle-be*(2*he);Ae<0&&(Ae=360-Math.abs(Ae)),(Ze=Ae-be)<0&&(Ze=360-Math.abs(Ze)),e.beginPath(),e.ellipse(T,C,O,j,G,Ae*(Math.PI/180),Ze*(Math.PI/180),!0),e.stroke()}(Ze=this.volcanoStartingAngle-de)<0&&(Ze=360-Math.abs(Ze)),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=Ze}drawBackgroundVolcano(e,n,r,a,o,s,l,c){null==l&&(l=0),null==c&&(c=0);var u=.1*(a-r),d=(r+u)*this.canvasXDistanceScale*o-l,m=(a-u)*this.canvasXDistanceScale*o-l,v=m-d,_=(a-r)*this.canvasXDistanceScale*o/this.volcanoRadiusXModifier,y=this.canvasHeight*o,S=this.backgroundVolcanoYStart-.75*_+c,T=d+.15*v,C=y-10*s,O=d+.35*v,j=S+20*s,G=d+.4*v,K=S,se=m-.15*v,de=y-10*s,be=m-.35*v,he=S+20*s,Ae=m-.4*v,Ze=S,Ct=e.fillStyle,vt=e.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);vt.addColorStop(0,"red"),vt.addColorStop(1,"orange"),e.fillStyle=vt;var xt=G+(Ae-G)/3,Ot=S+_/4,_t=G+2*(Ae-G)/3,ve=S+_/4,Kt=G-.075*v,ut=K+_/2,nn=Ae+.075*v,on=Ze+_/2,ft=Kt+1.7*(nn-Kt)/5,gn=ut+.5*_,Bn=Kt+1.4*(nn-Kt)/5,zn=ut+_/2,$n=Kt+2.5*(nn-Kt)/5,kn=ut,qn=Kt+3.6*(nn-Kt)/5,fi=ut+_,pi=Kt+3.3*(nn-Kt)/5,St=ut-.25*_;e.beginPath(),e.moveTo(G,K),e.bezierCurveTo(xt,Ot,_t,ve,Ae,Ze),e.lineTo(nn,on),e.moveTo(nn,on),e.bezierCurveTo(qn,fi,pi,St,$n,kn),e.bezierCurveTo(ft,gn,Bn,zn,Kt,ut),e.lineTo(G,K),e.fill(),e.beginPath(),e.moveTo(d,y),e.bezierCurveTo(T,C,O,j,G,K),e.stroke(),e.beginPath(),e.moveTo(m,y),e.bezierCurveTo(se,de,be,he,Ae,Ze),e.stroke();var An=e.lineWidth;e.lineWidth=2;var lt=.175,yi=d+v*(lt+.025),dn=y-_/4,ei=d+v*(lt+.2),Ui=S+_/3,Vn=d+v*(lt+.25),_n=S+_/4;e.beginPath(),e.moveTo(d+v*lt,.95*y),e.bezierCurveTo(yi,dn,ei,Ui,Vn,_n),e.stroke();var oi=d+v*(.025+(lt=.35)),ba=y-_/4,br=d+v*(lt+.075),_a=S+_/2,co=d+v*(lt+.1),Fo=S+_/3;e.beginPath(),e.moveTo(d+v*lt,.95*y),e.bezierCurveTo(oi,ba,br,_a,co,Fo),e.stroke();var Vi=m-v*(.025+(lt=.35)),Bt=y-_/4,Qi=m-v*(lt+.075),ms=S+_/2,gt=m-v*(lt+.1),kt=S+_/3;e.beginPath(),e.moveTo(m-v*lt,.95*y),e.bezierCurveTo(Vi,Bt,Qi,ms,gt,kt),e.stroke();var _r=m-v*(.025+(lt=.175)),Tf=y-_/4,Df=m-v*(lt+.2),Mu=S+_/3,ku=m-v*(lt+.25),Au=S+_/4;if(e.beginPath(),e.moveTo(m-v*lt,.95*y),e.bezierCurveTo(_r,Tf,Df,Mu,ku,Au),e.stroke(),e.lineWidth=An,void 0!==this.race.raceUI.lavaFallPercentByFrame[n]&&0!==this.race.raceUI.lavaFallPercentByFrame[n].length&&void 0!==this.race.raceUI.lavaFallPercentByFrame[n][0]){1===o&&(n=this.race.raceUI.lavaFallPercentByFrame.length-1);var ho=this.race.raceUI.lavaFallPercentByFrame[n],fo=(a-r)*this.canvasXDistanceScale*o,Bo=r*this.canvasXDistanceScale*o,Pu=Bo+.4*fo-l+0,Hl=Bo+.45*fo-l+0,vs=Bo+.5*fo-l+0,Eu=Bo+.55*fo-l+0,Gl=Bo+.6*fo-l+0,Pn=.01*(a-r)*this.canvasXDistanceScale*o,ki=Pn/2,Ai=S+_/4,ya=this.backgroundVolcanoYStart+_+c,bs=(ya-Ai)*ho[0];e.beginPath(),e.ellipse(Pu,Ai+bs-ki,Pn,ki,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Pu-Pn,Ai,2*Pn,bs-(ki-1));var Iu=(ya-Ai)*ho[1];e.beginPath(),e.ellipse(Hl,Ai+Iu-ki,Pn,ki,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Hl-Pn,Ai,2*Pn,Iu-(ki-1));var Lo=(ya-Ai)*ho[2];e.beginPath(),e.ellipse(vs,Ai+Lo-ki,Pn,ki,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(vs-Pn,Ai,2*Pn,Lo-(ki-1));var _s=(ya-Ai)*ho[3];e.beginPath(),e.ellipse(Eu,Ai+_s-ki,Pn,ki,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Eu-Pn,Ai,2*Pn,_s-(ki-1));var Rf=(ya-Ai)*ho[4];e.beginPath(),e.ellipse(Gl,Ai+Rf-ki,Pn,ki,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Gl-Pn,Ai,2*Pn,Rf-(ki-1)),e.fillStyle=Ct}else e.fillStyle=Ct}drawBrazier(e,n,r,a,o,s,l){var c=.01*this.race.length*this.canvasXDistanceScale*a;null==s&&(s=0),null==l&&(l=0);var u=e*this.canvasXDistanceScale*a-s,d=this.canvasHeight/2,m=.166667*c,v=.333333*c,_=.8*c;console.log("Starting X: "+u),n.strokeStyle="black",n.lineWidth="6",n.fillStyle="gray",n.beginPath(),n.moveTo(u,d),n.lineTo(u+m,d),n.lineTo(u+m,d-_),n.lineTo(u,d-_),n.lineTo(u,d),n.stroke(),n.fill(),n.beginPath(),n.moveTo(u+m,d),n.lineTo(u+m+v,d),n.lineTo(u+m+v,d-_),n.lineTo(u+m,d-_),n.lineTo(u+m,d),n.stroke(),n.fill(),n.beginPath(),n.moveTo(u+m+v,d),n.lineTo(u+m+2*v,d),n.lineTo(u+m+2*v,d-_),n.lineTo(u+m+v,d-_),n.lineTo(u+m+v,d),n.stroke(),n.fill(),n.beginPath(),n.moveTo(u+m+2*v,d),n.lineTo(u+2*m+2*v,d),n.lineTo(u+2*m+2*v,d-_),n.lineTo(u+m+2*v,d-_),n.lineTo(u+m+2*v,d),n.stroke(),n.fill(),this.lastPathEndingX=this.lastPathEndingX+c}grandPrixMountainYReset(e){this.race.raceType===Ne.event&&this.race.eventRaceType===He.grandPrix&&0===this.globalService.globalVar.eventRaceData.mountainEndingY&&null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType===z.Mountain&&1===e&&(this.lastPathEndingY=this.canvasHeight/2)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.skipSubscription.unsubscribe(),this.pauseSubscription.unsubscribe(),this.globalService.globalVar.userIsRacing=!1,this.race.raceType!==Ne.event&&(this.race.raceUI.staminaPercentByFrame=[],this.race.raceUI.timeToCompleteByFrame=[],this.race.raceUI.yAdjustmentByFrame=[],this.race.raceUI.velocityByFrame=[],this.race.raceUI.distanceCoveredByFrame=[],this.race.raceUI.lavaFallPercentByFrame=[],this.race.raceUI.maxSpeedByFrame=[],this.race.raceUI.racerEffectByFrame=[])}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(_i),A(Ri),A(hn),A(kl))},t.\u0275cmp=dt({type:t,selectors:[["app-draw-race"]],viewQuery:function(e,n){if(1&e&&ca(B7,5,bn),2&e){let r;fn(r=pn())&&(n.raceCanvas=r.first)}},inputs:{race:"race",skip:"skip",pause:"pause"},decls:3,vars:0,consts:[[1,"drawRaceDiv"],["id","raceCanvas",1,"raceCanvas"],["raceCanvas",""]],template:function(e,n){1&e&&(f(0,"div",0),D(1,"canvas",1,2),h())},styles:[".drawRaceDiv[_ngcontent-%COMP%]{height:100%}.raceCanvas[_ngcontent-%COMP%]{border:1px solid black}"]}),t})();const U7=["circuitRewardModal"];function H7(t,i){if(1&t){const e=ge();f(0,"button",6),I("click",function(){return B(e),w(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function G7(t,i){1&t&&(f(0,"span"),g(1,"BURST!"),h())}function j7(t,i){if(1&t){const e=ge();f(0,"button",6),I("click",function(){return B(e),w(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function z7(t,i){if(1&t&&(f(0,"div",8)(1,"div",9)(2,"div"),x(3,H7,2,0,"button",10),h(),f(4,"div")(5,"span",11),g(6,"Vel:"),h(),f(7,"span",12),g(8,"Velocity:"),h(),g(9),x(10,G7,2,0,"span",3),h(),f(11,"div")(12,"span",11),g(13,"Stam:"),h(),f(14,"span",12),g(15,"Stamina:"),h(),g(16),h(),f(17,"div")(18,"span",11),g(19,"Pos:"),h(),f(20,"span",12),g(21,"Position:"),h(),g(22),h(),f(23,"div"),x(24,j7,2,0,"button",10),h()(),f(25,"div",13)(26,"div",14),D(27,"app-draw-race",15),h(),D(28,"div",16,17),h()()),2&t){const e=at(29),n=w();p(3),b("ngIf",!n.grandPrixRace),p(6),Wn(" ",n.velocityAtCurrentFrame," / ",n.maxSpeedAtCurrentFrame,"m/s "),p(1),b("ngIf",n.racerEffectAtCurrentFrame===n.burstEffect),p(6),Q(" ",n.staminaAtCurrentFrame,"%"),p(6),Wn(" ",n.positionAtCurrentFrame," / ",n.totalRacers,""),p(2),b("ngIf",!n.grandPrixRace),p(3),b("race",n.selectedRace)("skip",n.skipRace.asObservable())("pause",n.pauseRace.asObservable()),p(1),b("scrollTop",e.scrollHeight)("innerHTML",n.incrementalRaceUpdates.trim(),Nt)}}function $7(t,i){if(1&t){const e=ge();f(0,"button",6),I("click",function(){return B(e),w(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function q7(t,i){if(1&t){const e=ge();f(0,"button",6),I("click",function(){return B(e),w(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function W7(t,i){if(1&t&&(f(0,"div",18)(1,"div",19)(2,"div"),x(3,$7,2,0,"button",10),h(),f(4,"div"),x(5,q7,2,0,"button",10),h()(),D(6,"div",20,17),h()),2&t){const e=at(7),n=w();p(3),b("ngIf",!n.grandPrixRace),p(2),b("ngIf",!n.grandPrixRace),p(1),b("scrollTop",e.scrollHeight)("innerHTML",n.incrementalRaceUpdates.trim(),Nt)}}function X7(t,i){if(1&t){const e=ge();f(0,"button",6),I("click",function(){return B(e),w(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function Y7(t,i){1&t&&(f(0,"span"),g(1,"BURST!"),h())}function Q7(t,i){if(1&t){const e=ge();f(0,"button",6),I("click",function(){return B(e),w(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function K7(t,i){if(1&t&&(f(0,"div",18)(1,"div",19)(2,"div"),x(3,X7,2,0,"button",10),h(),f(4,"div")(5,"span",11),g(6,"Vel:"),h(),f(7,"span",12),g(8,"Velocity:"),h(),g(9),x(10,Y7,2,0,"span",3),h(),f(11,"div")(12,"span",11),g(13,"Stam:"),h(),f(14,"span",12),g(15,"Stamina:"),h(),g(16),h(),f(17,"div")(18,"span",11),g(19,"Pos:"),h(),f(20,"span",12),g(21,"Position:"),h(),g(22),h(),f(23,"div"),x(24,Q7,2,0,"button",10),h()(),f(25,"div",21),D(26,"app-draw-race",15)(27,"br"),h()()),2&t){const e=w();p(3),b("ngIf",!e.grandPrixRace),p(6),Wn(" ",e.velocityAtCurrentFrame," / ",e.maxSpeedAtCurrentFrame,"m/s "),p(1),b("ngIf",e.racerEffectAtCurrentFrame===e.burstEffect),p(6),Q(" ",e.staminaAtCurrentFrame,"%"),p(6),Wn(" ",e.positionAtCurrentFrame," / ",e.totalRacers,""),p(2),b("ngIf",!e.grandPrixRace),p(2),b("race",e.selectedRace)("skip",e.skipRace.asObservable())("pause",e.pauseRace.asObservable())}}function Z7(t,i){1&t&&D(0,"br")}function J7(t,i){if(1&t&&(f(0,"div",28),g(1),h()),2&t){const e=w().$implicit,n=w(3);p(1),Q(" ",n.lookupService.getResourcePopover(e.name,e.shopItemTypeEnum)," ")}}function e9(t,i){if(1&t&&(f(0,"td")(1,"span",26),g(2),h(),g(3),x(4,J7,2,1,"ng-template",null,27,ot),h()),2&t){const e=i.$implicit,n=at(5);p(1),b("ngbPopover",n),p(1),nt(e.name),p(1),Q(": ",e.amount," ")}}function t9(t,i){if(1&t&&(f(0,"tr"),x(1,e9,6,3,"td",25),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function n9(t,i){if(1&t&&(f(0,"div",22)(1,"span",23),g(2,"Rewards"),h(),f(3,"div",24)(4,"table"),x(5,t9,2,1,"tr",25),h()()()),2&t){const e=w();p(5),b("ngForOf",e.rewardRows)}}function i9(t,i){if(1&t){const e=ge();f(0,"div",29)(1,"div",30)(2,"h4",31),g(3,"Circuit Rank Reward!"),h(),f(4,"button",32),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",33)(7,"div",34),g(8," After ranking up, you receive: "),D(9,"br"),f(10,"div",23),g(11),h()(),D(12,"br")(13,"br")(14,"div",35),h(),f(15,"div",36)(16,"button",37),I("click",function(){return B(e).$implicit.dismiss()}),g(17,"Continue"),h()()()}if(2&t){const e=w();p(11),nt(e.selectedRace.circuitIncreaseReward[0]),p(3),b("innerHTML",e.selectedRace.circuitIncreaseReward[1],Nt)}}let WR=(()=>{class t{constructor(e,n,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=n,this.utilityService=r,this.lookupService=a,this.initializeService=o,this.modalService=s,this.sanitizer=l,this.raceLogicService=c,this.incrementalRaceUpdates="",this.raceFinished=new rt,this.skipRace=new _e,this.pauseRace=new _e,this.raceSkipped=!1,this.racePaused=!1,this.frameModifier=60,this.displayVisualRace=!0,this.displayTextUpdates=!0,this.burstEffect=Pr.Burst,this.grandPrixRace=!1}ngOnInit(){var e=this,n=this.globalService.globalVar.settings.get("raceDisplayInfo");n===Kr.draw?(this.displayVisualRace=!0,this.displayTextUpdates=!1):n===Kr.text?(this.displayVisualRace=!1,this.displayTextUpdates=!0):n===Kr.both&&(this.displayVisualRace=!0,this.displayTextUpdates=!0),this.selectedRace.raceType===Ne.event&&this.selectedRace.eventRaceType===He.grandPrix&&(this.grandPrixRace=!0);var r=new Zh;r=this.grandPrixRace?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult:this.raceLogicService.runRace(this.selectedRace),this.setupDisplayRewards(this.selectedRace),this.displayRaceUpdates(r),this.getFrameByFrameStats(),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.raceSkipped=!0),this.grandPrixRace&&(this.eventRaceSubscription=this.gameLoopService.gameUpdateEvent.subscribe(ar(function*(){e.globalService.getTimeToEventRace()>0&&0===e.globalService.globalVar.eventRaceData.bonusTime&&e.raceFinished.emit(!0),e.globalService.globalVar.eventRaceData.isRunning||e.raceFinished.emit(!0)})))}ngOnDestroy(){null!=this.frameByFrameSubscription&&this.frameByFrameSubscription.unsubscribe(),null!=this.updateSubscription&&this.updateSubscription.unsubscribe(),null!=this.eventRaceSubscription&&this.eventRaceSubscription.unsubscribe(),this.raceFinished.emit(!0)}displayRaceUpdates(e){var n=this,r=e.raceUpdates;this.incrementalRaceUpdates="";var o=0,l=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,c=this.updateSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=ar(function*(d){if(n.racePaused||(n.selectedRace.raceType===Ne.event&&n.selectedRace.eventRaceType===He.grandPrix&&(n.globalService.globalVar.eventRaceData.currentRaceSegmentCount>l&&(o=0,n.selectedRace=n.globalService.globalVar.eventRaceData.currentRaceSegment,r=n.globalService.globalVar.eventRaceData.currentRaceSegmentResult.raceUpdates),l=n.globalService.globalVar.eventRaceData.currentRaceSegmentCount),o+=1),(n.selectedRace.raceType!==Ne.event||n.selectedRace.eventRaceType!==He.grandPrix)&&(0===r.length||n.raceSkipped))return n.raceSkipped&&r.forEach(m=>{n.incrementalRaceUpdates+=n.sanitizer.sanitize(en.HTML,n.sanitizer.bypassSecurityTrustHtml(m.text+"\n"))}),e.wasSuccessful&&(n.displayResults=!0,null!=n.selectedRace.circuitIncreaseReward&&""!==n.selectedRace.circuitIncreaseReward[0]&&n.modalService.open(n.circuitRewardModal,{ariaLabelledBy:"modal-basic-title",size:"lg"})),void c.unsubscribe();n.selectedRace.raceType===Ne.event&&n.selectedRace.eventRaceType===He.grandPrix?n.globalService.globalVar.eventRaceData.segmentTimeCounter*n.frameModifier>=r[0].value&&(n.incrementalRaceUpdates+=n.sanitizer.sanitize(en.HTML,n.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift()):o>=r[0].value&&(n.incrementalRaceUpdates+=n.sanitizer.sanitize(en.HTML,n.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift())});return function(d){return u.apply(this,arguments)}}())}setupDisplayRewards(e){this.rewardCells=[],this.rewardRows=[];var n=4;if(window.matchMedia("only screen and (max-width: 760px)").matches&&(n=2),null!=e.rewards){for(var r=1;r<=e.rewards.length;r++)this.rewardCells.push({name:e.rewards[r-1].name,amount:e.rewards[r-1].amount}),r%n==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}goToRaceSelection(){this.raceFinished.emit(!0)}skipRaceAnimation(){this.raceSkipped=!0,this.skipRace.next(!0)}pauseRaceAnimation(){this.racePaused=!this.racePaused,this.pauseRace.next(!0)}getFrameByFrameStats(){var e=this;this.totalRacers=this.lookupService.getTotalRacersByRace(this.selectedRace);var r=0,o=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount;this.frameByFrameSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=ar(function*(l){e.racePaused||(e.selectedRace.raceType===Ne.event&&e.selectedRace.eventRaceType===He.grandPrix&&(e.globalService.globalVar.eventRaceData.currentRaceSegmentCount>o&&(e.selectedRace=e.globalService.globalVar.eventRaceData.currentRaceSegment),o=e.globalService.globalVar.eventRaceData.currentRaceSegmentCount),r+=1);var c;c=e.selectedRace.raceType===Ne.event&&e.selectedRace.eventRaceType===He.grandPrix?Math.round(e.globalService.globalVar.eventRaceData.segmentTimeCounter*e.frameModifier):r;try{if(e.selectedRace.raceUI.velocityByFrame.length<=c||(e.selectedRace.raceType!==Ne.event||e.selectedRace.eventRaceType!==He.grandPrix)&&e.raceSkipped){var u=e.selectedRace.raceUI.velocityByFrame.length-1;e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[u]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[u]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[u].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[u],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[u])}else e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[c]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[c]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[c].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[c],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[c])}catch(d){console.log("error")}});return function(l){return s.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(_i),A(Ri),A(hn),A($v),A(lo),A(Mo),A(Qv))},t.\u0275cmp=dt({type:t,selectors:[["app-race"]],viewQuery:function(e,n){if(1&e&&ca(U7,7),2&e){let r;fn(r=pn())&&(n.circuitRewardModal=r.first)}},inputs:{selectedRace:"selectedRace"},outputs:{raceFinished:"raceFinished"},decls:11,vars:5,consts:[["id","raceInfo"],["class","bothDisplayValues",4,"ngIf"],["class","oneDisplayValue",4,"ngIf"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"back"],[3,"click"],["circuitRewardModal",""],[1,"bothDisplayValues"],[1,"headerInfo"],[3,"click",4,"ngIf"],[1,"mobileVersion"],[1,"webVersion"],[1,"updates"],[1,"drawRaces"],[3,"race","skip","pause"],[1,"raceUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],[1,"oneDisplayValue"],[1,"individualItemHeaderInfo"],[1,"raceUpdates","onlyText",3,"scrollTop","innerHTML"],[1,"drawRace","onlyDraw"],[1,"results"],[1,"s4Heading"],[1,"rewards"],[4,"ngFor","ngForOf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],["popContent",""],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,z7,30,13,"div",1),x(2,W7,8,4,"div",2),x(3,K7,28,11,"div",2),x(4,Z7,1,0,"br",3),x(5,n9,6,1,"div",4),f(6,"div",5)(7,"button",6),I("click",function(){return n.goToRaceSelection()}),g(8,"Back"),h()()(),x(9,i9,18,2,"ng-template",null,7,ot)),2&e&&(p(1),b("ngIf",n.displayVisualRace&&n.displayTextUpdates),p(1),b("ngIf",!n.displayVisualRace&&n.displayTextUpdates),p(1),b("ngIf",n.displayVisualRace&&!n.displayTextUpdates),p(1),b("ngIf",n.displayVisualRace&&!n.displayTextUpdates),p(1),b("ngIf",n.displayResults))},directives:[an,L7,Yn,Or],styles:['#raceInfo[_ngcontent-%COMP%]{height:100%;margin-left:.5rem;margin-right:.5rem;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre;overflow-x:hidden}.headerInfo[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between}.individualItemHeaderInfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bothDisplayValues[_ngcontent-%COMP%], .oneDisplayValue[_ngcontent-%COMP%]{height:76.5%}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawRace raceUpdates"}.raceUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:raceUpdates}.drawRaces[_ngcontent-%COMP%]{grid-area:drawRace}.onlyText[_ngcontent-%COMP%], .onlyDraw[_ngcontent-%COMP%]{text-align:center;height:100%}.rightAlign[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:left}td[_ngcontent-%COMP%]{width:16.666%}.mobileVersion[_ngcontent-%COMP%]{display:none}.webVersion[_ngcontent-%COMP%]{display:inline-block}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;padding:1rem}.results[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawRace" "raceUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.raceUpdates[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:inline-block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();function r9(t,i){if(1&t){const e=ge();f(0,"div",9)(1,"button",10),I("click",function(){return B(e),w(2).returnToAnimalView()}),g(2,"Back"),h()()}}function a9(t,i){if(1&t){const e=ge();f(0,"div",11)(1,"div")(2,"app-animal-list",12),I("selectedAnimal",function(r){return B(e),w(2).selectedAnimal(r)}),h()()()}if(2&t){const e=w(2);p(2),b("availableAnimals",e.availableAnimals)("isTrainingTrackView",!0)}}function o9(t,i){if(1&t){const e=ge();f(0,"div",13)(1,"app-training-track-race-view",14),I("raceSelected",function(r){return B(e),w(2).raceSelected(r)})("returnEmitter",function(){return B(e),w(2).returnToAnimalView()}),h()()}if(2&t){const e=w(2);p(1),b("selectedAnimal",e.animal)}}function s9(t,i){if(1&t&&(f(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),g(4,"Training Track"),h(),f(5,"div",5),g(6," Each animal can run their own training track to gain rewards and unique bonuses. To get each reward, you will have to beat each track at a progressively faster pace. "),h()(),x(7,r9,3,0,"div",6),h(),D(8,"hr"),x(9,a9,3,2,"div",7),x(10,o9,2,1,"div",8),h()),2&t){const e=w();p(7),b("ngIf",e.animalSelected),p(2),b("ngIf",!e.animalSelected),p(1),b("ngIf",e.animalSelected)}}function l9(t,i){if(1&t){const e=ge();f(0,"div",15)(1,"app-race",16),I("raceFinished",function(){return B(e),w().raceFinished()}),h()()}if(2&t){const e=w();p(1),b("selectedRace",e.selectedRace)}}const c9=function(t){return{fullHeight:t}};let XR=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.animalSelected=!1,this.raceSelectedEmitter=new rt}ngOnInit(){this.availableAnimals=this.globalService.globalVar.animals.filter(n=>n.isAvailable);var e=this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck);null!=e&&(this.existingPrimaryDeckAnimals=[],e.selectedAnimals.forEach(n=>{this.existingPrimaryDeckAnimals.push(n)}))}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(){this.animalSelected=!1}raceSelected(e){this.selectedRace=e,this.showRace=!0,this.raceSelectedEmitter.emit(!0)}ngOnDestroy(){this.raceSelectedEmitter.emit(!1)}raceFinished(){this.showRace=!1,this.raceSelectedEmitter.emit(!1);var e=this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck);null!=e&&(e.selectedAnimals=this.existingPrimaryDeckAnimals)}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(Zn))},t.\u0275cmp=dt({type:t,selectors:[["app-training-track-view"]],outputs:{raceSelectedEmitter:"raceSelectedEmitter"},decls:3,vars:5,consts:[[1,"trainingTrackView",3,"ngClass"],[4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"infoGridContainer"],[1,"info"],[1,"description"],["class","back",4,"ngIf"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"back"],[3,"click"],[1,"selectAnimalView"],[3,"availableAnimals","isTrainingTrackView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","raceSelected","returnEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,s9,11,3,"div",1),x(2,l9,2,1,"div",2),h()),2&e&&(b("ngClass",ri(3,c9,n.showRace)),p(1),b("ngIf",!n.showRace),p(1),b("ngIf",n.showRace))},directives:[Hn,an,Sf,F7,WR],styles:['.trainingTrackView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.fullHeight[_ngcontent-%COMP%]{height:100%}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}']}),t})();function u9(t,i){1&t&&(f(0,"span",13),g(1,"!"),h())}function d9(t,i){1&t&&(f(0,"span",13),g(1,"!"),h())}function h9(t,i){if(1&t){const e=ge();f(0,"div",6)(1,"div",7)(2,"button",8),I("click",function(){B(e);const r=w(2);return r.changeDisplayRaceView(r.raceTypeEnum.circuit)}),g(3,"Circuit Races"),h(),f(4,"button",9),I("click",function(){B(e);const r=w(2);return r.changeDisplayRaceView(r.raceTypeEnum.special)}),x(5,u9,2,0,"span",10),g(6,"Special Races"),h(),f(7,"button",11),I("click",function(){B(e);const r=w(2);return r.changeDisplayRaceView(r.raceTypeEnum.event)}),x(8,d9,2,0,"span",10),g(9,"Event Races"),h(),f(10,"button",12),I("click",function(){B(e);const r=w(2);return r.changeDisplayRaceView(r.raceTypeEnum.trainingTrack)}),g(11,"Training Track"),h()(),D(12,"hr"),h()}if(2&t){const e=w(2);p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.circuit?"filterActive":""),p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.special?"filterActive":""),p(1),b("ngIf",e.newSpecialRaceAvailable),p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.event?"filterActive":""),p(1),b("ngIf",e.eventRaceNowAvailable),p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.trainingTrack?"filterActive":"")}}function f9(t,i){if(1&t){const e=ge();f(0,"app-circuit-view",14),I("raceSelected",function(r){return B(e),w(2).raceSelected(r)}),h()}}function p9(t,i){if(1&t){const e=ge();f(0,"app-local-view",14),I("raceSelected",function(r){return B(e),w(2).raceSelected(r)}),h()}}function g9(t,i){if(1&t){const e=ge();f(0,"app-event-view",14),I("raceSelected",function(r){return B(e),w(2).raceSelected(r)}),h()}}function m9(t,i){if(1&t){const e=ge();f(0,"app-training-track-view",15),I("raceSelectedEmitter",function(r){return B(e),w(2).trainingTrackRaceSelected(r)}),h()}}function v9(t,i){if(1&t&&(f(0,"div",2),x(1,h9,13,6,"div",3),x(2,f9,1,0,"app-circuit-view",4),x(3,p9,1,0,"app-local-view",4),x(4,g9,1,0,"app-event-view",4),x(5,m9,1,0,"app-training-track-view",5),h()),2&t){const e=w();p(1),b("ngIf",!e.trainingTrackRace),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.circuit),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.special),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.event),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.trainingTrack)}}function b9(t,i){if(1&t){const e=ge();f(0,"div",16)(1,"app-race",17),I("raceFinished",function(){return B(e),w().raceFinished()}),h()()}if(2&t){const e=w();p(1),b("selectedRace",e.selectedRace)}}let _9=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.componentCommunicationService=n,this.gameLoopService=r,this.lookupService=a,this.displayRaceView=Ne.circuit,this.showRace=!1,this.trainingTrackRace=!1,this.raceTypeEnum=Ne,this.newSpecialRaceAvailable=!1,this.eventRaceNowAvailable=!1}ngOnInit(){var e=this;this.componentCommunicationService.setNewView(mt.raceselection),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var n=ar(function*(r){e.newSpecialRaceAvailable=e.globalService.globalVar.notifications.isNewSpecialRaceAvailable&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>9),e.eventRaceNowAvailable=e.globalService.globalVar.notifications.isEventRaceNowActive&&e.lookupService.isItemUnlocked("grandPrix")&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>9)});return function(r){return n.apply(this,arguments)}}()),this.communicationSubscription=this.componentCommunicationService.getRaceView().subscribe(n=>{this.displayRaceView=n})}changeDisplayRaceView(e){this.displayRaceView=e,e===Ne.special&&(this.newSpecialRaceAvailable=this.globalService.globalVar.notifications.isNewSpecialRaceAvailable=!1),e===Ne.event&&(this.eventRaceNowAvailable=this.globalService.globalVar.notifications.isEventRaceNowActive=!1)}raceSelected(e){this.selectedRace=e,this.showRace=!0}raceFinished(){this.showRace=!1}trainingTrackRaceSelected(e){this.trainingTrackRace=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.communicationSubscription&&this.communicationSubscription.unsubscribe(),this.globalService.globalVar.localRaces=[]}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(Zn),A(_i),A(hn))},t.\u0275cmp=dt({type:t,selectors:[["app-race-selection-view"]],decls:2,vars:2,consts:[["class","raceSelectionDiv",4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"raceSelectionDiv"],["class","info",4,"ngIf"],[3,"raceSelected",4,"ngIf"],[3,"raceSelectedEmitter",4,"ngIf"],[1,"info"],[1,"raceGridContainer"],[1,"buttonAsText","circuit","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","local","s5Heading","clickableText",3,"ngClass","click"],["class","availableIcon",4,"ngIf"],[1,"buttonAsText","event","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","trainingTrack","s5Heading","clickableText",3,"ngClass","click"],[1,"availableIcon"],[3,"raceSelected"],[3,"raceSelectedEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,n){1&e&&(x(0,v9,6,5,"div",0),x(1,b9,2,1,"div",1)),2&e&&(b("ngIf",!n.showRace),p(1),b("ngIf",n.showRace))},directives:[an,Hn,IH,jH,A7,XR,WR],styles:['.raceGridContainer[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"circuit local event trainingTrack"}.raceSelectionDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.circuit[_ngcontent-%COMP%]{grid-area:circuit;text-align:center}.local[_ngcontent-%COMP%]{grid-area:local;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.trainingTrack[_ngcontent-%COMP%]{grid-area:trainingTrack;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary);-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.availableIcon[_ngcontent-%COMP%]{color:var(--foreground-quaternary);border-radius:25px;background:var(--background-five);padding:0 .5rem;margin-right:.25rem}@media (max-width: 800px){.raceGridContainer[_ngcontent-%COMP%]{grid-template-columns:.9fr 1.1fr 1fr 1fr}}']}),t})(),y9=(()=>{class t{constructor(e){this.utilityService=e}ngOnInit(){}toggle(){null!=this.callbackFunction&&this.callbackFunction()}getId(){return"cbxInput"+this.id}}return t.\u0275fac=function(e){return new(e||t)(A(Ri))},t.\u0275cmp=dt({type:t,selectors:[["app-toggle"]],inputs:{model:"model",label:"label",id:"id",popoverText:"popoverText",callbackFunction:"callbackFunction"},decls:5,vars:5,consts:[[1,"custom-control","custom-switch"],["triggers","mouseenter:mouseleave",3,"ngbPopover"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange","input"],[1,"custom-control-label",3,"for"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"span",1)(2,"input",2),I("ngModelChange",function(a){return n.model=a})("input",function(){return n.toggle()}),h(),f(3,"label",3),g(4),h()()()),2&e&&(p(1),b("ngbPopover",n.popoverText),p(1),b("id",n.getId())("ngModel",n.model),p(1),b("for",n.getId()),p(1),nt(n.label))},directives:[Or,bh,yl,Cl],styles:[""]}),t})();function w9(t,i){if(1&t&&(f(0,"div",8)(1,"em"),g(2),h(),D(3,"br")(4,"br"),h()),2&t){const e=w();p(2),Q("",e.pointsNeededInColumn," points needed in this column to unlock")}}function C9(t,i){1&t&&(f(0,"div",8)(1,"em"),g(2," Click Upgrade to unlock this talent. "),D(3,"br")(4,"br"),h()())}function S9(t,i){1&t&&(f(0,"div"),D(1,"br")(2,"br"),h())}function T9(t,i){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"em")(3,"div",8),g(4,"Next Upgrade: "),h()(),D(5,"div",9),h()),2&t){const e=w();p(5),b("innerHTML",e.upgradedTalentDescription,Nt)}}const D9=function(t){return{talentInactive:t}};let R9=(()=>{class t{constructor(e,n,r){this.lookupService=e,this.gameLoopService=n,this.globalService=r,this.spentTalent=new rt}ngOnInit(){this.talentTreeType=this.selectedAnimal.talentTree.talentTreeType,this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.totalPossiblePoints=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.talentTreeType),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0;var e=0;1===this.row&&(e=this.selectedAnimal.talentTree.row2RequiredPoints),2===this.row&&(e=this.selectedAnimal.talentTree.row3RequiredPoints),3===this.row&&(e=this.selectedAnimal.talentTree.row4RequiredPoints),this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0,this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(n=>{this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0})}isTalentMaxed(){var e=!1;return this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column)>=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.selectedAnimal.talentTree.talentTreeType)&&(e=!0),e}spendTalentPoint(){this.isTalentMaxed()||(this.selectedAnimal.talentTree.spendTalentPoint(this.row,this.column),this.spentTalent.emit(!0),this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.globalService.calculateAnimalRacingStats(this.selectedAnimal))}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(hn),A(_i),A(Rt))},t.\u0275cmp=dt({type:t,selectors:[["app-talent"]],inputs:{selectedAnimal:"selectedAnimal",row:"row",column:"column"},outputs:{spentTalent:"spentTalent"},decls:15,vars:13,consts:[[1,"talent"],[1,"header","keyword"],[1,"content"],["class","centeredText",4,"ngIf"],[4,"ngIf"],[1,"description",3,"ngClass","innerHTML"],[1,"footer"],[3,"disabled","click"],[1,"centeredText"],[1,"talentInactive",3,"innerHTML"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"span"),g(3),h()(),f(4,"div",2),x(5,w9,5,1,"div",3),x(6,C9,5,0,"div",3),x(7,S9,3,0,"div",4),D(8,"div",5),x(9,T9,6,1,"div",4),D(10,"br"),f(11,"div",6),g(12),f(13,"button",7),I("click",function(){return n.spendTalentPoint()}),g(14,"Upgrade"),h()()()()),2&e&&(p(3),Wn("Sprint Column ",n.column+1," Row ",n.row+1,""),p(2),b("ngIf",n.pointsNeededInColumn>0),p(1),b("ngIf",n.pointsNeededInColumn<=0&&0===n.pointsInTalent),p(1),b("ngIf",n.pointsInTalent===n.totalPossiblePoints),p(1),b("ngClass",ri(11,D9,0===n.pointsInTalent))("innerHTML",n.talentDescription,Nt),p(1),b("ngIf",n.pointsInTalent>0&&n.pointsInTalent<n.totalPossiblePoints),p(3),Wn(" ",n.pointsInTalent," / ",n.totalPossiblePoints," Points "),p(1),b("disabled",!n.hasTalentPoint||!n.hasEnoughPointsInColumn||n.isTalentMaxed()))},directives:[an,Hn],styles:['.talent[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr;justify-content:stretch;grid-template-areas:"header" "content"}.header[_ngcontent-%COMP%]{grid-area:header;background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary)}.content[_ngcontent-%COMP%]{grid-area:content;margin:1rem;display:flex;flex-direction:column;justify-content:space-between}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.talentInactive[_ngcontent-%COMP%]{color:#00000080}']}),t})();function x9(t,i){if(1&t&&(f(0,"div",14),g(1,"Equipped: "),f(2,"span",52),g(3),h(),D(4,"br")(5,"br"),g(6),h()),2&t){const e=w();b("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)),p(3),nt(e.selectedAnimal.equippedItem.name),p(3),Q(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)," ")}}function M9(t,i){1&t&&(f(0,"div"),g(1," Equipped: None "),h())}function k9(t,i){if(1&t){const e=ge();f(0,"button",8),I("click",function(){return B(e),w().unequipItem()}),g(1,"Unequip Item"),h()}}function A9(t,i){if(1&t&&(f(0,"span",12),g(1),h()),2&t){const e=w(2);p(1),Q(" ",e.getTalentTreeName(),"")}}function P9(t,i){if(1&t){const e=ge();f(0,"div",53)(1,"div"),x(2,A9,2,1,"span",54),h(),f(3,"button",8),I("click",function(){B(e);const r=w(),a=at(217);return r.openTalentsModal(a)}),g(4,"View Talents"),h()()}if(2&t){const e=w();p(2),b("ngIf",e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none)}}function E9(t,i){if(1&t){const e=ge();f(0,"div")(1,"span",56),g(2),h(),f(3,"span")(4,"button",57),I("click",function(){B(e);const r=w(2);return r.editingName=!r.editingName}),g(5,"Edit"),h()()()}if(2&t){const e=w(2);p(2),Q("",e.selectedAnimal.name," ")}}function I9(t,i){if(1&t){const e=ge();f(0,"div")(1,"span")(2,"input",58),I("ngModelChange",function(r){return B(e),w(2).newName=r}),h()(),f(3,"span")(4,"button",8),I("click",function(){return B(e),w(2).editName()}),g(5,"Save"),h()(),f(6,"span")(7,"button",8),I("click",function(){B(e);const r=w(2);return r.editingName=!r.editingName}),g(8,"Cancel"),h()()()}if(2&t){const e=w(2);p(2),b("ngModel",e.newName)}}function O9(t,i){if(1&t&&(f(0,"span",59),g(1),h()),2&t){const e=w(2);Wi("ngbPopover",e.traitStatGainDescription),p(1),Q(" ",e.selectedAnimal.trait.traitName," ")}}function N9(t,i){if(1&t&&(f(0,"div"),x(1,E9,6,1,"div",6),x(2,I9,9,1,"div",6),f(3,"span",12),x(4,O9,2,2,"span",55),g(5),h()()),2&t){const e=w();p(1),b("ngIf",!e.editingName),p(1),b("ngIf",e.editingName),p(2),b("ngIf",null!=e.selectedAnimal.trait),p(1),Q(" ",e.selectedAnimal.getAnimalType()," ")}}function V9(t,i){if(1&t){const e=ge();f(0,"div")(1,"span")(2,"button",8),I("click",function(){B(e);const r=w(2);return r.editingName=!r.editingName}),g(3,"Edit Name"),h()()()}}function F9(t,i){if(1&t){const e=ge();f(0,"div")(1,"span")(2,"input",60),I("ngModelChange",function(r){return B(e),w(2).newName=r}),h()(),f(3,"span")(4,"button",8),I("click",function(){return B(e),w(2).editName()}),g(5,"Save"),h()(),f(6,"span")(7,"button",8),I("click",function(){B(e);const r=w(2);return r.editingName=!r.editingName}),g(8,"Cancel"),h()()()}if(2&t){const e=w(2);p(2),b("ngModel",e.newName)}}function B9(t,i){if(1&t&&(f(0,"span",59),g(1),h()),2&t){const e=w(2);Wi("ngbPopover",e.traitStatGainDescription),p(1),Q(" ",e.selectedAnimal.trait.traitName," ")}}function L9(t,i){if(1&t&&(f(0,"div"),x(1,V9,4,0,"div",6),x(2,F9,9,1,"div",6),f(3,"span",12),x(4,B9,2,2,"span",55),g(5),h()()),2&t){const e=w();p(1),b("ngIf",!e.editingName),p(1),b("ngIf",e.editingName),p(2),b("ngIf",null!=e.selectedAnimal.trait),p(1),Q(" ",e.selectedAnimal.getAnimalType()," ")}}function U9(t,i){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=w();p(1),Q("(",e.selectedAnimal.currentTraining.trainingName,")")}}function H9(t,i){if(1&t&&D(0,"app-toggle",61),2&t){const e=w();b("callbackFunction",e.toggleAutoBreed)("label","Auto Breed")("model",e.autoBreedActive)}}function G9(t,i){if(1&t&&(f(0,"div",14),g(1),D(2,"br")(3,"br"),g(4),h()),2&t){const e=w(2);b("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)),p(1),Q("Orb: ",e.selectedAnimal.equippedOrb.name," "),p(3),Q(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)," ")}}function j9(t,i){1&t&&(f(0,"div"),g(1," Orb: None "),h())}function z9(t,i){if(1&t){const e=ge();f(0,"button",8),I("click",function(){return B(e),w(2).unequipOrb()}),g(1,"Unequip Orb"),h()}}function $9(t,i){if(1&t){const e=ge();f(0,"div",62),x(1,G9,5,3,"div",5),x(2,j9,2,0,"div",6),D(3,"br"),x(4,z9,2,0,"button",7),f(5,"button",8),I("click",function(){B(e);const r=w(),a=at(215);return r.openOrbModal(a)}),g(6,"Equip New Orb"),h()()}if(2&t){const e=w();p(1),b("ngIf",null!=e.selectedAnimal.equippedOrb),p(1),b("ngIf",null==e.selectedAnimal.equippedOrb),p(2),b("ngIf",null!=e.selectedAnimal.equippedOrb)}}function q9(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Training:"),h(),g(4),Vt(5,"number"),h(),D(6,"br"),h()),2&t){const e=w(),n=at(203);p(2),b("ngbPopover",n),p(2),Q(" ",rn(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromTraining,"1.0-0")," ")}}function W9(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Free Races:"),h(),g(4),Vt(5,"number"),h()()),2&t){const e=w(),n=at(199);p(2),b("ngbPopover",n),p(2),Q(" ",rn(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces,"1.0-0")," ")}}function X9(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Circuit Races:"),h(),g(4),Vt(5,"number"),h()()),2&t){const e=w(),n=at(201);p(2),b("ngbPopover",n),p(2),Q(" ",rn(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces,"1.0-0")," ")}}function Y9(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Training Time Reduction:"),h(),g(4),Vt(5,"number"),h()()),2&t){const e=w(),n=at(207);p(2),b("ngbPopover",n),p(2),Q(" ",rn(5,2,e.selectedAnimal.miscStats.trainingTimeReduction,"1.0-0"),"% ")}}function Q9(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Diminishing Returns per Facility Level:"),h(),g(4),Vt(5,"number"),h()()),2&t){const e=w(),n=at(205);p(2),b("ngbPopover",n),p(2),Q(" ",rn(5,2,e.selectedAnimal.miscStats.diminishingReturnsBonus,"1.0-0")," ")}}function K9(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Talents:"),h(),g(4),Vt(5,"number"),h()()),2&t){const e=w(),n=at(209);p(2),b("ngbPopover",n),p(2),Q(" ",rn(5,2,e.selectedAnimal.miscStats.bonusTalents,"1.0-0")," ")}}function Z9(t,i){if(1&t){const e=ge();f(0,"button",64),I("click",function(){B(e);const r=w();return r.selectAbility(r.ability2)}),g(1),h()}if(2&t){const e=w();wt("filterActive",e.selectedAnimal.ability.name===e.ability2.name),p(1),Q("",e.ability2.name," ")}}function J9(t,i){if(1&t){const e=ge();f(0,"button",65),I("click",function(){B(e);const r=w();return r.selectAbility(r.ability3)}),g(1),h()}if(2&t){const e=w();wt("filterActive",e.selectedAnimal.ability.name===e.ability3.name),p(1),Q("",e.ability3.name," ")}}function eG(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w();p(1),Wn("",e.selectedAbility.abilityXp," / ",e.selectedAbility.abilityMaxXp," XP")}}function tG(t,i){1&t&&(f(0,"span"),g(1,"MAX"),h())}function nG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getTopSpeedPopover()," ")}}function iG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getAccelerationPopover()," ")}}function rG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getEndurancePopover()," ")}}function aG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getPowerPopover()," ")}}function oG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getFocusPopover()," ")}}function sG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getAdaptabilityPopover()," ")}}function lG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getAbilityLevelPopover()," ")}}function cG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getBonusFreeRaceXpPopover()," ")}}function uG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getBonusCircuitRaceXpPopover()," ")}}function dG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getBonusTrainingXpPopover()," ")}}function hG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," ")}}function fG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getBonusTrainingTimeReductionPopover()," ")}}function pG(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=w();p(1),Q(" ",e.getBonusTalentsPopover()," ")}}function gG(t,i){if(1&t&&(f(0,"div"),D(1,"span",31),h()),2&t){const e=w().$implicit,n=w(4);p(1),b("innerHTML",n.getItemAdditionalText(e),Nt)}}const mG=function(t){return{activeSelectedItem:t}};function vG(t,i){if(1&t){const e=ge();f(0,"td",76)(1,"div",77),I("click",function(){const a=B(e).$implicit;return w(4).selectItem(a)}),f(2,"h6",78),g(3),h(),x(4,gG,2,1,"div",6),D(5,"br")(6,"br"),g(7),D(8,"br")(9,"br"),h()()}if(2&t){const e=i.$implicit,n=w(4);p(1),b("ngClass",ri(5,mG,e.isSelected)),p(2),Wn("",e.name," (",e.amount,")"),p(1),b("ngIf",n.itemHasAdditionalText(e)),p(3),Q(" ",n.getItemShortDescription(e.name)," ")}}function bG(t,i){if(1&t&&(f(0,"tr"),x(1,vG,10,7,"td",75),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function _G(t,i){if(1&t){const e=ge();f(0,"div",79)(1,"span",80)(2,"span")(3,"span",78),g(4),h(),g(5),h(),f(6,"span",81)(7,"label",82),g(8,"Amount: "),h(),f(9,"input",83),I("ngModelChange",function(r){return B(e),w(3).selectedItemQuantity=r}),h(),f(10,"button",84),I("click",function(){return B(e),w(3).useItem()}),g(11,"Use"),h()()()()}if(2&t){const e=w(3);p(4),nt(e.selectedItem.name),p(1),Q(" - ",e.getItemShortDescription(e.selectedItem.name)," "),p(4),b("ngModel",e.selectedItemQuantity)}}function yG(t,i){if(1&t&&(f(0,"div")(1,"div",71)(2,"div",72)(3,"table"),x(4,bG,2,1,"tr",73),h()()(),x(5,_G,12,3,"div",74),h()),2&t){const e=w(2);p(4),b("ngForOf",e.itemsRows),p(1),b("ngIf",null!=e.selectedItem)}}function wG(t,i){1&t&&(f(0,"div"),g(1," No items available. "),h())}function CG(t,i){if(1&t){const e=ge();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Use Item"),h(),f(5,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),x(7,yG,6,2,"div",6),x(8,wG,2,0,"div",6),h()()}if(2&t){const e=w();p(7),b("ngIf",e.usableItemsList.length>0),p(1),b("ngIf",0==e.usableItemsList.length)}}const SG=function(t){return{activeSelectedEquipment:t}};function TG(t,i){if(1&t){const e=ge();f(0,"td",76)(1,"div",86),I("click",function(){const a=B(e).$implicit;return w(3).selectEquipment(a)}),f(2,"h6",52),g(3),h(),D(4,"br")(5,"br"),g(6),D(7,"br"),h()()}if(2&t){const e=i.$implicit,n=w(3);p(1),b("ngClass",ri(4,SG,e.isSelected)),p(2),Wn("",e.name," (",e.amount,")"),p(3),Q(" ",n.getEquipmentShortDescription(e.name)," ")}}function DG(t,i){if(1&t&&(f(0,"tr"),x(1,TG,8,6,"td",75),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function RG(t,i){if(1&t){const e=ge();f(0,"div",79)(1,"span",87)(2,"span")(3,"span",52),g(4),h(),g(5),h(),f(6,"span",81)(7,"button",84),I("click",function(){return B(e),w(2).equipItem()}),g(8,"Equip"),h()()()()}if(2&t){const e=w(2);p(4),nt(e.selectedEquipment.name),p(1),Q(" - ",e.getEquipmentShortDescription(e.selectedEquipment.name)," ")}}function xG(t,i){1&t&&(f(0,"div"),g(1," No equipment available. "),h())}function MG(t,i){if(1&t){const e=ge();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Change Equipment"),h(),f(5,"button",70),I("click",function(){const a=B(e).$implicit;return w().clearSelectedItems(),a.dismiss()}),g(6,"X"),h()(),f(7,"div")(8,"div",71)(9,"div",85)(10,"table"),x(11,DG,2,1,"tr",73),h()()(),x(12,RG,9,2,"div",74),h(),x(13,xG,2,0,"div",6),h()()}if(2&t){const e=w();p(11),b("ngForOf",e.equipmentRows),p(1),b("ngIf",null!=e.selectedEquipment),p(1),b("ngIf",0==e.equipmentList.length)}}const kG=function(t){return{activeSelectedOrb:t}};function AG(t,i){if(1&t){const e=ge();f(0,"td",76)(1,"div",89),I("click",function(){const a=B(e).$implicit;return w(3).selectOrb(a)}),f(2,"h6",90),g(3),h(),D(4,"br"),g(5),D(6,"br"),h()()}if(2&t){const e=i.$implicit,n=w(3);p(1),b("ngClass",ri(3,kG,e.isSelected)),p(2),nt(e.name),p(2),Q(" ",n.getEquipmentShortDescription(e.name)," ")}}function PG(t,i){if(1&t&&(f(0,"tr"),x(1,AG,7,5,"td",75),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function EG(t,i){if(1&t){const e=ge();f(0,"div",79)(1,"span",91)(2,"span")(3,"span",90),g(4),h(),g(5),h(),f(6,"span",81)(7,"button",84),I("click",function(){return B(e),w(2).equipOrb()}),g(8,"Equip"),h()()()()}if(2&t){const e=w(2);p(4),nt(e.selectedOrb.name),p(1),Q(" - ",e.getEquipmentShortDescription(e.selectedOrb.name)," ")}}function IG(t,i){1&t&&(f(0,"div"),g(1," No equipment available. "),h())}function OG(t,i){if(1&t){const e=ge();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Change Orb"),h(),f(5,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div")(8,"div",71)(9,"div",88)(10,"table"),x(11,PG,2,1,"tr",73),h()()(),x(12,EG,9,2,"div",74),h(),x(13,IG,2,0,"div",6),h()()}if(2&t){const e=w();p(11),b("ngForOf",e.orbRows),p(1),b("ngIf",null!=e.selectedOrb),p(1),b("ngIf",0==e.equipmentList.length)}}const NG=function(t){return{selectedTalentTree:t}};function VG(t,i){if(1&t){const e=ge();f(0,"span",96),I("click",function(){const a=B(e).$implicit;return w(4).filterTalentTree(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=w(4);b("ngClass",ri(2,NG,n.selectedTalentTree===e)),p(1),Q(" ",e.trim()," ")}}function FG(t,i){if(1&t&&(f(0,"div")(1,"strong"),g(2),h()()),2&t){const e=w(4);p(2),Q(" ",e.inDepthTalentTreeDescription," ")}}function BG(t,i){if(1&t&&(f(0,"div")(1,"div",94),x(2,VG,2,4,"span",95),h(),D(3,"hr"),x(4,FG,3,1,"div",6),h()),2&t){const e=w(3);p(2),b("ngForOf",e.talentTreeOptions),p(2),b("ngIf",""!==e.inDepthTalentTreeDescription&&void 0!==e.inDepthTalentTreeDescription)}}function LG(t,i){if(1&t){const e=ge();f(0,"div")(1,"div",71),x(2,BG,5,2,"div",6),h(),f(3,"div",79)(4,"button",93),I("click",function(){return B(e),w(2).selectTalentTree()}),g(5,"Select"),h()()()}if(2&t){const e=w(2);p(2),b("ngIf",e.talentTreeOptions.length>0)}}function UG(t,i){1&t&&D(0,"div",107)}function HG(t,i){if(1&t&&D(0,"div",11),2&t){const e=w().index,n=w().index;b("ngClass",w(3).getBorderConditional(n,e))}}function GG(t,i){if(1&t){const e=ge();f(0,"div",102)(1,"div",11)(2,"app-talent",103),I("spentTalent",function(r){return B(e),w(4).spentTalent(r)}),h()(),f(3,"div",104),x(4,UG,1,0,"div",105),x(5,HG,1,1,"div",106),h()()}if(2&t){const e=i.index,n=w().index,r=w(3);p(1),b("ngClass",n<r.talentRows-1?"talentContent":"lastTalentContent"),p(1),b("row",n)("column",e)("selectedAnimal",r.selectedAnimal),p(2),b("ngIf",n!==r.talentRows-1),p(1),b("ngIf",n!==r.talentRows-1)}}const YR=function(){return[]};function jG(t,i){if(1&t&&(f(0,"div",99)(1,"div",100),x(2,GG,6,6,"div",101),h()()),2&t){const e=w(3);p(2),b("ngForOf",Yg(1,YR).constructor(e.talentColumns))}}function zG(t,i){if(1&t&&(f(0,"div",71)(1,"div",97),g(2),h(),D(3,"br"),f(4,"p")(5,"em"),g(6," Note that this functionality is new and subject to change. I have plans to add more talents and certain talents will likely still need rebalancing/redesigning. Bear with me as I work that out. Once I feel like talents are in a final state, everyone will have the option to reset their talent choices if they choose to. Feel free to experiment with the options as they are now and let me know if you have any feedback. Thanks! "),h()(),D(7,"br"),x(8,jG,3,2,"div",98),h()),2&t){const e=w(2);p(2),Q("Available Talent Points: ",e.availableTalentPoints,""),p(6),b("ngForOf",Yg(2,YR).constructor(e.talentRows))}}function $G(t,i){1&t&&(f(0,"div"),g(1," Coming Soon! "),h())}function qG(t,i){if(1&t){const e=ge();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Talents"),h(),f(5,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),x(7,LG,6,1,"div",6),x(8,zG,9,3,"div",92),x(9,$G,2,0,"div",6),h()()}if(2&t){const e=w();p(7),b("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType===e.talentTreeTypeEnum.none),p(1),b("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none),p(1),b("ngIf",!e.talentsReleased)}}function WG(t,i){if(1&t){const e=ge();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Base Stats Info"),h(),f(4,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",108)(8,"div",66)(9,"span",12),g(10,"Speed - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Acceleration - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Endurance - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Power - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Focus - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Adaptability - "),h(),g(36),h(),D(37,"hr"),f(38,"div",66)(39,"span",12),g(40,"Diminishing Returns - "),h(),g(41),h()()()()}if(2&t){const e=w();p(11),Q(" ",e.getTopSpeedPopover()," "),p(5),Q(" ",e.getAccelerationPopover()," "),p(5),Q(" ",e.getEndurancePopover()," "),p(5),Q(" ",e.getPowerPopover()," "),p(5),Q(" ",e.getFocusPopover()," "),p(5),Q(" ",e.getAdaptabilityPopover()," "),p(5),Q(" ",e.getDiminishingReturnsPopover()," ")}}function XG(t,i){if(1&t){const e=ge();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Racing Stats Info"),h(),f(4,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",23)(8,"div",66)(9,"span",12),g(10,"Max Speed - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Acceleration Rate - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Stamina - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Power Efficiency - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Focus Distance - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Adaptability Distance - "),h(),g(36),h(),D(37,"hr"),f(38,"div",66)(39,"span",12),g(40,"Burst Chance - "),h(),g(41),h(),D(42,"hr"),f(43,"div",66)(44,"span",12),g(45,"Burst Distance - "),h(),g(46),h()()()()}if(2&t){const e=w();p(11),Q(" ",e.selectedAnimal.currentStats.maxSpeedMsPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.accelerationMsPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.staminaPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.powerMsPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.focusMsPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.adaptabilityMsPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.burstChancePopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.burstDistancePopover()," ")}}function YG(t,i){if(1&t){const e=ge();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Miscellaneous Stats Info"),h(),f(4,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",108)(8,"div",66)(9,"span",12),g(10,"Bonus Breed XP From Training - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Bonus Breed XP From Free Races - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Bonus Breed XP From Circuit Races - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Training Time Reduction - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Bonus Diminishing Returns per Facility Level - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Bonus Talents - "),h(),g(36),h()()()()}if(2&t){const e=w();p(11),Q(" ",e.getBonusTrainingXpPopover()," "),p(5),Q(" ",e.getBonusFreeRaceXpPopover()," "),p(5),Q(" ",e.getBonusCircuitRaceXpPopover()," "),p(5),Q(" ",e.getBonusTrainingTimeReductionPopover()," "),p(5),Q(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," "),p(5),Q(" ",e.getBonusTalentsPopover()," ")}}let QG=(()=>{class t{constructor(e,n,r,a,o,s){this.lookupService=e,this.modalService=n,this.globalService=r,this.componentCommunicationService=a,this.utilityService=o,this.gameLoopService=s,this.returnEmitter=new rt,this.canAutoBreed=!1,this.areTalentsAvailable=!1,this.orbIsUnlocked=!1,this.talentTreeTypeEnum=ht,this.canBreed=!0,this.orbFunctionalityReleased=!1,this.talentsReleased=!0,this.talentColumns=3,this.talentRows=4,this.toggleAutoBreed=()=>{this.autoBreedActive=!this.autoBreedActive,this.selectedAnimal.autoBreedActive=this.autoBreedActive}}keyEvent(e){if(!this.modalService.hasOpenModals()){var n=this.globalService.globalVar.animals.filter(s=>s.isAvailable),r=n.findIndex(s=>this.selectedAnimal===s);if(r>-1)if("ArrowLeft"===e.key)(a=r-1)<0&&(a=n.length-1),this.componentCommunicationService.setAnimalView(mt.animals,o=n[a]),this.resetSelectedAnimalInfo(o);else if("ArrowRight"===e.key){var a,o;(a=r+1)===n.length&&(a=0),this.componentCommunicationService.setAnimalView(mt.animals,o=n[a]),this.resetSelectedAnimalInfo(o)}}}ngOnInit(){this.handleIntroTutorial(),this.resetSelectedAnimalInfo(this.selectedAnimal),this.breedDescriptionPopover="When your Breed XP reaches the max, you can Breed your animal. This will reset your base stats, but it will also increase the amount that your base stats contribute to your racing stats."}returnToAnimalView(){this.returnEmitter.emit(!1)}isAbilityLevelMaxedOut(){var e=25,n=this.globalService.globalVar.modifiers.find(r=>"abilityLevelCapModifier"===r.text);return null!=n&&(e=n.value),null!=this.selectedAbility&&this.selectedAbility.abilityLevel>this.selectedAnimal.breedLevel+e}canAnimalBreed(){var e=!0;return this.selectedAnimal.breedGaugeXp<this.selectedAnimal.breedGaugeMax&&(e=!1),e}breed(){(!this.globalService.globalVar.showBreedWarning||confirm("Breeding will increase your base stat modifiers at the cost of resetting your base stats to their default values. You should do this when you have raced as far as you can without breeding or you have the time to spend to train your stats back. Continue?"))&&(this.globalService.globalVar.showBreedWarning=!1,this.globalService.BreedAnimal(this.selectedAnimal),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel),this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut())}editName(){this.newName.length<=50&&this.newName.length>=1?(this.selectedAnimal.name=this.newName,this.editingName=!1):alert("Name must be between 1 and 50 characters long.")}selectAbility(e){this.selectedAnimal.ability=e,this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal)}updateItemsList(){this.usableItemsList=[],this.globalService.globalVar.resources.filter(e=>(e.itemType===Y.Food||e.itemType===Y.Consumable)&&e.amount>0).forEach(e=>{void 0!==e&&this.usableItemsList.push(e)}),this.setupDisplayItems()}updateEquipmentList(){this.equipmentList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===Y.Equipment&&!this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var n=e.makeCopy(e);this.equipmentList.push(n)}}),this.setupDisplayEquipment(),this.globalService.globalVar.animals.filter(e=>null!=e.equippedItem).forEach(e=>{var n=this.equipmentList.find(r=>{var a;return r.name===(null===(a=e.equippedItem)||void 0===a?void 0:a.name)});null!=n&&(n.amount>0&&(n.amount-=1),n.amount<=0&&(this.equipmentList=this.equipmentList.filter(r=>r.name!==(null==n?void 0:n.name))))})}updateOrbList(){this.orbList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===Y.Equipment&&this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var n=e.makeCopy(e);this.orbList.push(n)}}),this.setupDisplayEquipment()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];for(var n=1;n<=this.usableItemsList.length;n++)this.itemsCells.push(this.usableItemsList[n-1]),n%4==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}setupDisplayEquipment(){this.equipmentCells=[],this.equipmentRows=[];for(var n=1;n<=this.equipmentList.length;n++)this.equipmentCells.push(this.equipmentList[n-1]),n%4==0&&(this.equipmentRows.push(this.equipmentCells),this.equipmentCells=[]);0!==this.equipmentCells.length&&this.equipmentRows.push(this.equipmentCells)}setupDisplayOrbs(){this.orbCells=[],this.orbRows=[];for(var n=1;n<=this.orbList.length;n++)this.orbCells.push(this.orbList[n-1]),n%4==0&&(this.orbRows.push(this.orbCells),this.orbCells=[]);0!==this.orbCells.length&&this.orbRows.push(this.orbCells)}openTalentsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openBaseStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openRacingStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openMiscStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openItemModal(e){this.setupDisplayItems(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()},r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()})}openEquipmentModal(e){this.setupDisplayEquipment(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()},r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()})}openOrbModal(e){this.setupDisplayOrbs(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()},r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()})}useItem(){if(void 0!==this.selectedItem){var e=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name&&r.itemType===this.selectedItem.itemType);if(void 0===e)return void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");if(null==this.selectedItemQuantity||isNaN(Number(this.selectedItemQuantity)))return void alert("You must enter a numerical amount to use.");if(e.amount<this.selectedItemQuantity)return void alert("You don't have that many "+e.name+"!");if(this.selectedItem.itemType===Y.Consumable&&this.selectedItem.name.includes("Certificate")&&this.lookupService.isAmountMoreThanCertificateCap(this.selectedItemQuantity,this.selectedAnimal,this.selectedItem.name))return void alert("This amount will exceed the amount of these certificates you can give your animal.");if(e.amount-=this.selectedItemQuantity,this.selectedItem.itemType===Y.Food)if("Mangoes"===this.selectedItem.name)this.selectedAnimal.breedLevel+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal);else{var n=new Oe(0,0,0,0,0,0);"Apples"===this.selectedItem.name&&(n.acceleration=this.selectedItemQuantity),"Bananas"===this.selectedItem.name&&(n.topSpeed=this.selectedItemQuantity),"Strawberries"===this.selectedItem.name&&(n.endurance=this.selectedItemQuantity),"Carrots"===this.selectedItem.name&&(n.power=this.selectedItemQuantity),"Turnips"===this.selectedItem.name&&(n.focus=this.selectedItemQuantity),"Oranges"===this.selectedItem.name&&(n.adaptability=this.selectedItemQuantity),this.selectedAnimal.increaseStats(n),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}else this.selectedItem.itemType===Y.Consumable&&(this.selectedItemQuantity=+this.selectedItemQuantity,"Free Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+=+this.selectedItemQuantity),"Circuit Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces+=2*this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+=+this.selectedItemQuantity),"Training Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromTraining+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+=+this.selectedItemQuantity),"Diminishing Returns Increase Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.diminishingReturnsBonus+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal)));this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()}}selectItem(e){this.selectedItem=e,this.usableItemsList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}clearSelectedItems(){this.usableItemsList.forEach(e=>{e.isSelected=!1})}clearSelectedEquipment(){this.equipmentList.forEach(e=>{e.isSelected=!1})}clearSelectedOrb(){this.orbList.forEach(e=>{e.isSelected=!1})}equipItem(){void 0!==this.selectedEquipment&&(this.selectedAnimal.equippedItem=this.selectedEquipment,this.updateEquipmentList(),this.clearSelectedEquipment(),this.modalService.dismissAll(),this.selectedEquipment=void 0)}selectEquipment(e){this.selectedEquipment=e,this.equipmentList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}unequipItem(){this.selectedAnimal.equippedItem=null,this.clearSelectedEquipment(),this.updateEquipmentList()}equipOrb(){void 0!==this.selectedOrb&&(this.selectedAnimal.equippedOrb=this.selectedOrb,this.updateOrbList(),this.clearSelectedOrb(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal),this.modalService.dismissAll(),this.selectedOrb=void 0)}selectOrb(e){this.selectedOrb=e,this.orbList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}unequipOrb(){this.selectedAnimal.equippedOrb=null,this.clearSelectedOrb(),this.updateOrbList(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}getTopSpeedPopover(){return this.lookupService.topSpeedPopover(this.selectedAnimal)}getAccelerationPopover(){return this.lookupService.accelerationPopover(this.selectedAnimal)}getEndurancePopover(){return this.lookupService.endurancePopover(this.selectedAnimal)}getPowerPopover(){return this.lookupService.powerPopover(this.selectedAnimal)}getFocusPopover(){return this.lookupService.focusPopover(this.selectedAnimal)}getAdaptabilityPopover(){return this.lookupService.adaptabilityPopover(this.selectedAnimal)}getAbilityLevelPopover(){return this.lookupService.abilityLevelPopover(this.selectedAnimal)}getBonusFreeRaceXpPopover(){return this.lookupService.bonusFreeRaceXpPopover(this.selectedAnimal)}getBonusCircuitRaceXpPopover(){return this.lookupService.bonusCircuitRaceXpPopover(this.selectedAnimal)}getBonusTrainingXpPopover(){return this.lookupService.bonusTrainingXpPopover(this.selectedAnimal)}getBonusDiminishingReturnsPerFacilityLevelPopover(){return this.lookupService.bonusDiminishingReturnsPerFacilityLevelPopover(this.selectedAnimal)}getBonusTrainingTimeReductionPopover(){return this.lookupService.bonusTrainingTimeReductionPopover(this.selectedAnimal)}getBonusTalentsPopover(){return this.lookupService.bonusTalentsPopover(this.selectedAnimal)}getAbilityPopover(){return this.lookupService.abilityPopover()}getDiminishingReturnsPopover(){return"Once a trainable stat is over this number, additional gains in this stat will be reduced. Increase with Facility Level."}getEquipmentShortDescription(e){return this.globalService.getEquipmentDescription(e)}getItemShortDescription(e){return this.globalService.getItemDescription(e)}itemHasAdditionalText(e){return!(e.itemType!==Y.Consumable||!e.name.includes("Certificate"))}getItemAdditionalText(e){var n="";return e.itemType===Y.Consumable&&e.name.includes("Certificate")&&("Free Race Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Circuit Race Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Training Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Diminishing Returns Increase Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>")),this.utilityService.getSanitizedHtml(n)}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&8===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}goToAssignedBarn(){var e=this.globalService.globalVar.barns.find(n=>n.barnNumber===this.selectedAnimal.associatedBarnNumber);null!=e&&this.componentCommunicationService.setBarnView(mt.barn,e.barnNumber)}filterTalentTree(e){this.selectedTalentTree=e,this.inDepthTalentTreeDescription=this.lookupService.getInDepthTalentTreeDescription(e)}selectTalentTree(){""!==this.selectedTalentTree&&null!=this.selectedTalentTree?this.selectedAnimal.talentTree.talentTreeType=this.lookupService.convertTalentTreeNameToEnum(this.selectedTalentTree):alert("You must select a talent tree.")}resetSelectedAnimalInfo(e){var n=this;this.selectedAnimal=e,this.areTalentsAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.orbIsUnlocked=this.lookupService.isItemUnlocked("orbs"),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel);var r=this.lookupService.getStockbreeder();null!=r&&r>0&&(this.canAutoBreed=!0),this.canAutoBreed&&(this.autoBreedActive=this.selectedAnimal.autoBreedActive),this.ability1=this.selectedAnimal.availableAbilities[0],this.selectedAnimal.availableAbilities.length>1&&(this.ability2=this.selectedAnimal.availableAbilities[1]),this.selectedAnimal.availableAbilities.length>2&&(this.ability3=this.selectedAnimal.availableAbilities[2]),this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal),null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.updateItemsList(),this.updateEquipmentList(),this.updateOrbList(),this.selectedTalentTree="",this.inDepthTalentTreeDescription="",this.componentCommunicationService.setAnimalView(mt.animals,e);var a=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedAnimal.associatedBarnNumber);this.assignedBarnName=null==a?"Unassigned":"Assigned to: "+this.lookupService.getBarnName(a),this.areTalentsAvailable&&(this.talentTreeOptions=this.lookupService.getTalentTreeNames(),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var o=ar(function*(s){n.canBreed=n.canAnimalBreed()});return function(s){return o.apply(this,arguments)}}())}getTalentTreeName(){var e=this.selectedAnimal.talentTree.getTotalSpentPoints();return this.lookupService.getTalentTreeNameByEnum(this.selectedAnimal.talentTree.talentTreeType)+" Level "+e}getBorderConditional(e,n){var r,a=e+1,o=0;1===a&&(o=this.selectedAnimal.talentTree.row2RequiredPoints),2===a&&(o=this.selectedAnimal.talentTree.row3RequiredPoints),3===a&&(o=this.selectedAnimal.talentTree.row4RequiredPoints);var s=o-this.selectedAnimal.talentTree.getTalentPointsByColumn(n);return"Flatland"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedFlatlandTalentSpacer height0":!0}:4===s?r={"completedFlatlandTalentSpacer height1":!0}:3===s?r={"completedFlatlandTalentSpacer height2":!0}:2===s?r={"completedFlatlandTalentSpacer height3":!0}:1===s?r={"completedFlatlandTalentSpacer height4":!0}:s<=0&&(r={"completedFlatlandTalentSpacer height5":!0})),"Mountain"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedMountainTalentSpacer height0":!0}:4===s?r={"completedMountainTalentSpacer height1":!0}:3===s?r={"completedMountainTalentSpacer height2":!0}:2===s?r={"completedMountainTalentSpacer height3":!0}:1===s?r={"completedMountainTalentSpacer height4":!0}:s<=0&&(r={"completedMountainTalentSpacer height5":!0})),"Ocean"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedOceanTalentSpacer height0":!0}:4===s?r={"completedOceanTalentSpacer height1":!0}:3===s?r={"completedOceanTalentSpacer height2":!0}:2===s?r={"completedOceanTalentSpacer height3":!0}:1===s?r={"completedOceanTalentSpacer height4":!0}:s<=0&&(r={"completedOceanTalentSpacer height5":!0})),"Tundra"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedTundraTalentSpacer height0":!0}:4===s?r={"completedTundraTalentSpacer height1":!0}:3===s?r={"completedTundraTalentSpacer height2":!0}:2===s?r={"completedTundraTalentSpacer height3":!0}:1===s?r={"completedTundraTalentSpacer height4":!0}:s<=0&&(r={"completedTundraTalentSpacer height5":!0})),"Volcanic"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedVolcanicTalentSpacer height0":!0}:4===s?r={"completedVolcanicTalentSpacer height1":!0}:3===s?r={"completedVolcanicTalentSpacer height2":!0}:2===s?r={"completedVolcanicTalentSpacer height3":!0}:1===s?r={"completedVolcanicTalentSpacer height4":!0}:s<=0&&(r={"completedVolcanicTalentSpacer height5":!0})),r}spentTalent(e){this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setAnimal(new Dt)}}return t.\u0275fac=function(e){return new(e||t)(A(hn),A(lo),A(Rt),A(Zn),A(Ri),A(_i))},t.\u0275cmp=dt({type:t,selectors:[["app-selected-animal"]],hostBindings:function(e,n){1&e&&I("keyup",function(a){return n.keyEvent(a)},!1,Ya)},inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:224,vars:113,consts:[[1,"selectedAnimalView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"equippable"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","talents",4,"ngIf"],[1,"animalInfo"],[3,"ngClass"],[1,"keyword"],[1,"clickableText","buttonAsText",3,"click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[3,"callbackFunction","label","model",4,"ngIf"],[1,"back"],["class","orb",4,"ngIf"],[1,"gridContainer"],[1,"trainableStats"],[1,"s4Heading"],[1,"tooltipIcon",3,"click"],[1,"racingStats"],[1,"miscStats"],[1,"abilities"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"s4Heading",3,"ngbPopover"],[1,"ability1","s5Heading","clickableText","buttonAsText",3,"click"],["class","ability2 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],["class","ability3 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],[1,"abilityXp"],[3,"innerHTML"],["topSpeedPopoverContent",""],["accelerationPopoverContent",""],["endurancePopoverContent",""],["powerPopoverContent",""],["focusPopoverContent",""],["adaptabilityPopoverContent",""],["abilityLevelPopoverContent",""],["bonusFreeRaceXpPopoverContent",""],["bonusCircuitRaceXpPopoverContent",""],["bonusTrainingXpPopoverContent",""],["bonusDiminishingReturnsPerFacilityLevelPopoverContent",""],["bonusTrainingTimeReductionPopoverContent",""],["bonusTalentsPopoverContent",""],["content",""],["equipment",""],["orb",""],["talentsContent",""],["baseStatsContent",""],["racingStatsContent",""],["miscStatsContent",""],[1,"equipmentKeyword"],[1,"talents"],["class","keyword",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"name","keyword"],[1,"editName",3,"click"],["id","newName","name","newName","maxlength","50",3,"ngModel","ngModelChange"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],["id","newName","name","newName","minlength","1","maxlength","50",3,"ngModel","ngModelChange"],[3,"callbackFunction","label","model"],[1,"orb"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],[1,"ability2","s5Heading","clickableText","buttonAsText",3,"click"],[1,"ability3","s5Heading","clickableText","buttonAsText",3,"click"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"selectableItem",3,"ngClass","click"],[1,"resourceKeyword"],[1,"modal-footer"],[1,"selectedItemSpan"],[1,"rightAlign"],["for","deck-name"],["id","deck-name","type","text",1,"spaced",3,"ngModel","ngModelChange"],["type","button",1,"spaced",3,"click"],[1,"equipmentContainer"],[1,"selectableEquipment",3,"ngClass","click"],[1,"selectedEquipmentSpan"],[1,"orbContainer"],[1,"selectableOrb",3,"ngClass","click"],[1,"progressionKeyword"],[1,"selectedOrbSpan"],["class","modal-body",4,"ngIf"],["type","button",3,"click"],[1,"typeContainer"],["class","talents subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"talents","subHeading",3,"ngClass","click"],[1,"talentInfo"],["class","talentRow",4,"ngFor","ngForOf"],[1,"talentRow"],[1,"rowFlex"],["class","talentColumn",4,"ngFor","ngForOf"],[1,"talentColumn"],[3,"row","column","selectedAnimal","spentTalent"],[1,"talentSpacer"],["class","defaultTalentSpacer",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"defaultTalentSpacer"],[1,"baseStats"]],template:function(e,n){if(1&e){const r=ge();f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),x(6,x9,7,3,"div",5),x(7,M9,2,0,"div",6),D(8,"br"),x(9,k9,2,0,"button",7),f(10,"button",8),I("click",function(){B(r);const o=at(213);return n.openEquipmentModal(o)}),g(11,"Equip New Item"),h()(),D(12,"br"),x(13,P9,5,1,"div",9),h(),f(14,"div",10)(15,"div",11),x(16,N9,6,4,"div",6),x(17,L9,6,4,"div",6),f(18,"span",12),g(19),h(),D(20,"br"),h(),f(21,"button",13),I("click",function(){return n.goToAssignedBarn()}),g(22),x(23,U9,2,1,"em",6),h(),D(24,"br"),f(25,"span",14),g(26),h(),D(27,"br"),f(28,"span",14),g(29),Vt(30,"number"),f(31,"button",15),I("click",function(){return n.breed()}),g(32,"Breed"),h()(),D(33,"br"),f(34,"button",8),I("click",function(){B(r);const o=at(211);return n.openItemModal(o)}),g(35,"Use Item"),h(),D(36,"br"),x(37,H9,1,3,"app-toggle",16),h(),f(38,"div",17)(39,"div")(40,"button",8),I("click",function(){return n.returnToAnimalView()}),g(41,"Back"),h()(),D(42,"br"),x(43,$9,7,3,"div",18),h()(),D(44,"hr"),f(45,"div",19)(46,"div",20)(47,"span",21),g(48,"Base Stats "),f(49,"span",22),I("click",function(){B(r);const o=at(219);return n.openBaseStatsModal(o)}),g(50,"?"),h()(),D(51,"br")(52,"br"),f(53,"span",14)(54,"span",12),g(55,"Speed:"),h(),g(56),Vt(57,"number"),h(),D(58,"br"),f(59,"span",14)(60,"span",12),g(61,"Acceleration:"),h(),g(62),Vt(63,"number"),h(),D(64,"br"),f(65,"span",14)(66,"span",12),g(67,"Endurance:"),h(),g(68),Vt(69,"number"),h(),D(70,"br"),f(71,"span",14)(72,"span",12),g(73,"Power:"),h(),g(74),Vt(75,"number"),h(),D(76,"br"),f(77,"span",14)(78,"span",12),g(79,"Focus:"),h(),g(80),Vt(81,"number"),h(),D(82,"br"),f(83,"span",14)(84,"span",12),g(85,"Adaptability:"),h(),g(86),Vt(87,"number"),h(),D(88,"br"),f(89,"span",14)(90,"span",12),g(91,"Diminishing Returns:"),h(),g(92),Vt(93,"number"),h()(),f(94,"div",23)(95,"span",21),g(96,"Racing Stats "),f(97,"span",22),I("click",function(){B(r);const o=at(221);return n.openRacingStatsModal(o)}),g(98,"?"),h()(),D(99,"br")(100,"br"),f(101,"span",14)(102,"span",12),g(103,"Max Speed:"),h(),g(104),Vt(105,"number"),h(),D(106,"br"),f(107,"span",14)(108,"span",12),g(109,"Acceleration Rate:"),h(),g(110),Vt(111,"number"),h(),D(112,"br"),f(113,"span",14)(114,"span",12),g(115,"Stamina:"),h(),g(116),Vt(117,"number"),h(),D(118,"br"),f(119,"span",14)(120,"span",12),g(121,"Power Efficiency:"),h(),g(122),Vt(123,"number"),h(),D(124,"br"),f(125,"span",14)(126,"span",12),g(127,"Focus Distance:"),h(),g(128),Vt(129,"number"),h(),D(130,"br"),f(131,"span",14)(132,"span",12),g(133,"Adaptability Distance:"),h(),g(134),Vt(135,"number"),h(),D(136,"br"),f(137,"span",14)(138,"span",12),g(139,"Burst Chance:"),h(),g(140),Vt(141,"number"),h(),D(142,"br"),f(143,"span",14)(144,"span",12),g(145,"Burst Distance:"),h(),g(146),Vt(147,"number"),h()(),f(148,"div",24)(149,"span",21),g(150,"Miscellaneous Stats "),f(151,"span",22),I("click",function(){B(r);const o=at(223);return n.openMiscStatsModal(o)}),g(152,"?"),h()(),D(153,"br")(154,"br"),x(155,q9,7,5,"div",6),x(156,W9,6,5,"div",6),x(157,X9,6,5,"div",6),x(158,Y9,6,5,"div",6),x(159,Q9,6,5,"div",6),x(160,K9,6,5,"div",6),h()(),f(161,"div",25)(162,"p")(163,"span",26),g(164,"Abilities"),h(),D(165,"br"),f(166,"span")(167,"em"),g(168,"Your animal will use the ability you select below."),h()()(),f(169,"div")(170,"div")(171,"button",27),I("click",function(){return n.selectAbility(n.ability1)}),g(172),h(),x(173,Z9,2,3,"button",28),x(174,J9,2,3,"button",29),h(),D(175,"br"),f(176,"p")(177,"span",14),g(178),f(179,"span",30),x(180,eG,2,2,"span",6),x(181,tG,2,0,"span",6),h()(),D(182,"br")(183,"span",31),h()()()()()(),x(184,nG,2,1,"ng-template",null,32,ot),x(186,iG,2,1,"ng-template",null,33,ot),x(188,rG,2,1,"ng-template",null,34,ot),x(190,aG,2,1,"ng-template",null,35,ot),x(192,oG,2,1,"ng-template",null,36,ot),x(194,sG,2,1,"ng-template",null,37,ot),x(196,lG,2,1,"ng-template",null,38,ot),x(198,cG,2,1,"ng-template",null,39,ot),x(200,uG,2,1,"ng-template",null,40,ot),x(202,dG,2,1,"ng-template",null,41,ot),x(204,hG,2,1,"ng-template",null,42,ot),x(206,fG,2,1,"ng-template",null,43,ot),x(208,pG,2,1,"ng-template",null,44,ot),x(210,CG,9,2,"ng-template",null,45,ot),x(212,MG,14,3,"ng-template",null,46,ot),x(214,OG,14,3,"ng-template",null,47,ot),x(216,qG,10,3,"ng-template",null,48,ot),x(218,WG,42,7,"ng-template",null,49,ot),x(220,XG,47,8,"ng-template",null,50,ot),x(222,YG,37,6,"ng-template",null,51,ot)}if(2&e){const r=at(185),a=at(187),o=at(189),s=at(191),l=at(193),c=at(195),u=at(197);p(6),b("ngIf",null!=n.selectedAnimal.equippedItem),p(1),b("ngIf",null==n.selectedAnimal.equippedItem),p(2),b("ngIf",null!=n.selectedAnimal.equippedItem),p(4),b("ngIf",n.areTalentsAvailable),p(2),b("ngClass",n.colorConditional),p(1),b("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),p(1),b("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),p(2),nt(n.selectedAnimal.getRaceCourseType()),p(3),Q("",n.assignedBarnName," "),p(1),b("ngIf",null!=n.selectedAnimal.currentTraining),p(2),Wi("ngbPopover",n.breedLevelPopover),p(1),Q("Breed Level ",n.selectedAnimal.breedLevel,""),p(2),b("ngbPopover",n.breedDescriptionPopover),p(1),Wn("Breed XP: ",rn(30,65,n.selectedAnimal.breedGaugeXp,"1.2-2"),"/",n.selectedAnimal.breedGaugeMax," "),p(2),b("disabled",!n.canBreed),p(6),b("ngIf",n.canAutoBreed),p(6),b("ngIf",n.orbIsUnlocked&&n.orbFunctionalityReleased),p(10),b("ngbPopover",r),p(3),Q(" ",rn(57,68,n.selectedAnimal.currentStats.topSpeed,"1.2-2")," "),p(3),b("ngbPopover",a),p(3),Q(" ",rn(63,71,n.selectedAnimal.currentStats.acceleration,"1.2-2")," "),p(3),b("ngbPopover",o),p(3),Q(" ",rn(69,74,n.selectedAnimal.currentStats.endurance,"1.2-2")," "),p(3),b("ngbPopover",s),p(3),Q(" ",rn(75,77,n.selectedAnimal.currentStats.power,"1.2-2")," "),p(3),b("ngbPopover",l),p(3),Q(" ",rn(81,80,n.selectedAnimal.currentStats.focus,"1.2-2")," "),p(3),b("ngbPopover",c),p(3),Q(" ",rn(87,83,n.selectedAnimal.currentStats.adaptability,"1.2-2")," "),p(3),Wi("ngbPopover",n.getDiminishingReturnsPopover()),p(3),Q(" ",rn(93,86,n.diminishingReturnsAmount,"1.0-0")," "),p(9),Wi("ngbPopover",n.selectedAnimal.currentStats.maxSpeedMsPopover()),p(3),Q(" ",rn(105,89,n.selectedAnimal.currentStats.maxSpeedMs,"1.2-2")," m/s "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.accelerationMsPopover()),p(3),Q(" ",rn(111,92,n.selectedAnimal.currentStats.accelerationMs,"1.2-2")," m/s "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.staminaPopover()),p(3),Q(" ",rn(117,95,n.selectedAnimal.currentStats.stamina,"1.2-2")," "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.powerMsPopover()),p(3),Q(" ",rn(123,98,n.selectedAnimal.currentStats.powerMs,"1.2-2"),"% "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.focusMsPopover()),p(3),Q(" ~",rn(129,101,n.selectedAnimal.currentStats.focusMs,"1.2-2")," m "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.adaptabilityMsPopover()),p(3),Q(" ~",rn(135,104,n.selectedAnimal.currentStats.adaptabilityMs,"1.2-2")," m "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.burstChancePopover()),p(3),Q(" ",rn(141,107,n.selectedAnimal.currentStats.burstChance,"1.2-2"),"% "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.burstDistancePopover()),p(3),Q(" ",rn(147,110,n.selectedAnimal.currentStats.burstDistance,"1.2-2")," m "),p(9),b("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromTraining>0),p(1),b("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces>0),p(1),b("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces>0),p(1),b("ngIf",n.selectedAnimal.miscStats.trainingTimeReduction>0),p(1),b("ngIf",n.selectedAnimal.miscStats.diminishingReturnsBonus>0),p(1),b("ngIf",n.selectedAnimal.miscStats.bonusTalents>0),p(3),b("ngbPopover",n.getAbilityPopover()),p(8),wt("filterActive",n.selectedAnimal.ability.name===n.ability1.name),p(1),Q("",n.ability1.name," "),p(1),b("ngIf",n.ability2.isAbilityPurchased),p(1),b("ngIf",n.ability3.isAbilityPurchased),p(3),b("ngbPopover",u),p(1),Q("Level ",n.selectedAbility.abilityLevel," "),p(2),b("ngIf",!n.abilityLevelMaxedOut),p(1),b("ngIf",n.abilityLevelMaxedOut),p(2),b("innerHTML",n.longDescription,Nt)}},directives:[an,Or,Hn,rs,Kc,yl,Cl,hv,y9,Ah,wh,Qc,Yn,R9],pipes:[no],styles:['.selectedAnimalView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.animalInfo[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:animalInfo}.back[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:back;justify-content:space-between;flex-direction:column;display:flex}.equippable[_ngcontent-%COMP%]{justify-content:space-between;flex-direction:column;display:flex;grid-area:equippable}.marginGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.filterActive[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor;color:var(--foreground-secondary)}.info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"equippable animalInfo back"}.gridContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-items:center;justify-content:stretch;grid-template-areas:"trainingStats racingStats miscStats"}.trainableStats[_ngcontent-%COMP%]{justify-self:left;grid-area:trainingStats}.racingStats[_ngcontent-%COMP%]{grid-area:racingStats}.miscStats[_ngcontent-%COMP%]{grid-area:miscStats}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.editName[_ngcontent-%COMP%]{width:4rem}.name[_ngcontent-%COMP%]{margin-left:4rem}.selectedEquipmentSpan[_ngcontent-%COMP%], .selectedOrbSpan[_ngcontent-%COMP%], .selectedItemSpan[_ngcontent-%COMP%]{width:100%}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.rightAlign[_ngcontent-%COMP%]{float:right}.ability1[_ngcontent-%COMP%], .ability2[_ngcontent-%COMP%], .ability3[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.typeContainer[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-evenly}.talentTreeType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedTalentTree[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid;text-decoration:underline solid}.rowFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.abilityXp[_ngcontent-%COMP%]{margin-left:2.5rem}.talentColumn[_ngcontent-%COMP%]{width:31.75%}.talentContent[_ngcontent-%COMP%]{height:calc(100% - 5rem);height:-o-calc(100% - 5rem);border:1px solid rgba(0,0,0,.1)}.lastTalentContent[_ngcontent-%COMP%]{height:100%;border:1px solid rgba(0,0,0,.1)}.talentInfo[_ngcontent-%COMP%]{text-align:center}.talentSpacer[_ngcontent-%COMP%]{display:grid;grid-template:1fr / 1fr;place-items:center}.defaultTalentSpacer[_ngcontent-%COMP%]{height:5rem;border-right:solid thick rgba(0,0,0,.1);grid-column:1 / 1;grid-row:1 / 1;z-index:1}.completedFlatlandTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--flatlandColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedMountainTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--mountainColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedOceanTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--waterColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedTundraTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--tundraColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedVolcanicTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--volcanicColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.height0[_ngcontent-%COMP%]{height:0}.height1[_ngcontent-%COMP%]{height:1rem}.height2[_ngcontent-%COMP%]{height:2rem}.height3[_ngcontent-%COMP%]{height:3rem}.height4[_ngcontent-%COMP%]{height:4rem}.height5[_ngcontent-%COMP%]{height:5rem}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}.activeSelectedItem[_ngcontent-%COMP%], .activeSelectedEquipment[_ngcontent-%COMP%], .activeSelectedOrb[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.selectableItem[_ngcontent-%COMP%], .selectableOrb[_ngcontent-%COMP%], .selectableEquipment[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem;margin-top:.25rem}.tooltipIcon[_ngcontent-%COMP%]{display:none}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}@media (max-width: 800px){.info[_ngcontent-%COMP%], .gridContainer[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr 1fr}.tooltipIcon[_ngcontent-%COMP%]{display:inline-block}}']}),t})();function KG(t,i){1&t&&(f(0,"div",4)(1,"h2"),g(2,"Animals"),h(),f(3,"div",5),g(4," Select an animal to view its stats, change abilities, and more. "),h(),D(5,"hr"),h())}function ZG(t,i){if(1&t){const e=ge();f(0,"div",6)(1,"app-animal-list",7),I("selectedAnimal",function(r){return B(e),w().selectedAnimal(r)}),h()()}if(2&t){const e=w();p(1),b("availableAnimals",e.availableAnimals)}}function JG(t,i){if(1&t){const e=ge();f(0,"div",8)(1,"app-selected-animal",9),I("returnEmitter",function(r){return B(e),w().returnToAnimalView(r)}),h()()}if(2&t){const e=w();p(1),b("selectedAnimal",e.animal)}}let ej=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(mt.animals),this.availableAnimals=this.globalService.globalVar.animals.filter(e=>e.isAvailable),this.subscription=this.componentCommunicationService.getAnimalView().subscribe(e=>{null!=e.type?(this.animalSelected=!0,this.animal=e):this.animalSelected=!1})}selectedAnimal(e){this.animalSelected=!0,this.animal=e,this.componentCommunicationService.setAnimalView(mt.animals,this.animal)}returnToAnimalView(e){this.animalSelected=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(Zn))},t.\u0275cmp=dt({type:t,selectors:[["app-animals-view"]],decls:4,vars:3,consts:[[1,"animalsView"],["class","info",4,"ngIf"],["class","listView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"info"],[1,"description"],[1,"listView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,KG,6,0,"div",1),x(2,ZG,2,1,"div",2),x(3,JG,2,1,"div",3),h()),2&e&&(p(1),b("ngIf",!n.animalSelected),p(1),b("ngIf",!n.animalSelected),p(1),b("ngIf",n.animalSelected))},directives:[an,Sf,QG],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;overflow:hidden;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{width:100%;height:100%}.info[_ngcontent-%COMP%]{text-align:center}.selectedView[_ngcontent-%COMP%]{height:100%;overflow:auto}"]}),t})();function tj(t,i){if(1&t){const e=ge();f(0,"button",17),I("click",function(){B(e);const r=w().$implicit;return w().setAsAutoRunFreeRace(r)}),g(1,"Auto Run Free Race"),h()}}function nj(t,i){if(1&t){const e=ge();f(0,"button",18),I("click",function(){B(e);const r=w().$implicit;return w().setAsEventDeck(r)}),g(1,"Set as Event Team"),h()}}function ij(t,i){if(1&t){const e=ge();f(0,"div")(1,"div",7),D(2,"app-animal-deck",8),f(3,"div",9)(4,"button",10),I("click",function(){const a=B(e).$implicit,o=w(),s=at(11);return o.editDeck(s,a)}),g(5,"Edit"),h()(),f(6,"div",11)(7,"button",12),I("click",function(){const a=B(e).$implicit;return w().setAsPrimary(a)}),g(8,"Set as Primary Team"),h()(),f(9,"div",13),x(10,tj,2,0,"button",14),h(),f(11,"div",15),x(12,nj,2,0,"button",16),h()(),D(13,"hr"),h()}if(2&t){const e=i.index,n=w();p(2),b("deckNumber",e+1),p(8),b("ngIf",n.showAutoRaceButton),p(2),b("ngIf",n.showEventButton)}}function rj(t,i){if(1&t){const e=ge();f(0,"div",35)(1,"input",36),I("input",function(){return B(e),w(2).toggleRaceOrder()}),h(),f(2,"label",37),I("click",function(){return B(e),w(2).toggleRaceOrder()}),g(3,"Race Order: "),h(),f(4,"span")(5,"span",38),I("dragstart",function(r){return B(e),w(2).dragStart(r)})("dragover",function(r){return B(e),w(2).allowDrop(r)})("drop",function(r){return B(e),w(2).dropCourseType(r)}),g(6),h(),g(7," / "),f(8,"span",39),I("dragstart",function(r){return B(e),w(2).dragStart(r)})("dragover",function(r){return B(e),w(2).allowDrop(r)})("drop",function(r){return B(e),w(2).dropCourseType(r)}),g(9),h(),g(10," / "),f(11,"span",40),I("dragstart",function(r){return B(e),w(2).dragStart(r)})("dragover",function(r){return B(e),w(2).allowDrop(r)})("drop",function(r){return B(e),w(2).dropCourseType(r)}),g(12),h(),g(13," / "),f(14,"span",41),I("dragstart",function(r){return B(e),w(2).dragStart(r)})("dragover",function(r){return B(e),w(2).allowDrop(r)})("drop",function(r){return B(e),w(2).dropCourseType(r)}),g(15),h(),g(16," / "),f(17,"span",42),I("dragstart",function(r){return B(e),w(2).dragStart(r)})("dragover",function(r){return B(e),w(2).allowDrop(r)})("drop",function(r){return B(e),w(2).dropCourseType(r)}),g(18),h()()()}if(2&t){const e=w(2);p(1),b("checked",e.isRaceOrderOn),p(4),b("ngClass",e.getColorClass(e.selectedDeckOrder[0])),p(1),nt(e.selectedDeckOrder[0]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[1])),p(1),nt(e.selectedDeckOrder[1]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[2])),p(1),nt(e.selectedDeckOrder[2]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[3])),p(1),nt(e.selectedDeckOrder[3]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[4])),p(1),nt(e.selectedDeckOrder[4])}}const aj=function(t,i,e,n,r,a){return{selectedCourseType:t,flatlandColor:i,mountainColor:e,waterColor:n,tundraColor:r,volcanicColor:a}};function oj(t,i){if(1&t){const e=ge();f(0,"button",43),I("click",function(){const a=B(e).$implicit;return w(2).filterType(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=w(2);b("ngClass",function Tw(t,i,e,n,r,a,o,s,l){const c=Ji()+t,u=Re(),d=jr(u,c,e,n,r,a);return Qo(u,c+4,o,s)||d?Ea(u,c+6,l?i.call(l,e,n,r,a,o,s):i(e,n,r,a,o,s)):Rc(u,c+6)}(2,aj,n.selectedCourseType===e,"Flatland"===e,"Mountain"===e,"Ocean"===e,"Tundra"===e,"Volcanic"===e)),p(1),Q(" ",e.trim()," ")}}const sj=function(t){return{selectedAnimal:t}};function lj(t,i){if(1&t){const e=ge();f(0,"button",44),I("click",function(){const a=B(e).$implicit;return w(2).selectAnimal(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=w(2);b("ngClass",ri(2,sj,n.selectedAnimalName===e)),p(1),Q(" ",e.trim()," ")}}function cj(t,i){if(1&t){const e=ge();f(0,"div",19)(1,"form",20)(2,"div",21)(3,"h4",22),g(4),h(),f(5,"button",23),I("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div",24)(8,"div",25)(9,"label",26),g(10,"Relay Team Name: "),h(),D(11,"input",27),h(),x(12,rj,19,11,"div",28),D(13,"br"),f(14,"div",29),x(15,oj,2,9,"button",30),h(),D(16,"br"),f(17,"div",31),x(18,lj,2,4,"button",32),h()(),f(19,"div",33)(20,"button",34),I("click",function(){return B(e),w().saveDeck()}),g(21,"Save"),h()()()()}if(2&t){const e=w();p(1),b("formGroup",e.editDeckForm),p(3),Q("Edit ",e.selectedDeck.name,""),p(8),b("ngIf",e.displayRaceOrder),p(3),b("ngForOf",e.raceCourseTypeList),p(3),b("ngForOf",e.possibleAnimalsList)}}let uj=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.modalService=n,this.lookupService=r,this.componentCommunicationService=a,this.raceCourseTypeList=[],this.displayRaceOrder=!1,this.editDeckForm=new kh({deckName:new rv("")}),this.toggleRaceOrder=()=>{this.isRaceOrderOn=!this.isRaceOrderOn,this.selectedDeck.isCourseOrderActive=this.isRaceOrderOn}}ngOnInit(){this.componentCommunicationService.setNewView(mt.relayTeams),this.isRaceOrderOn=!1,this.newAnimalList=[],this.animalDecks=this.globalService.globalVar.animalDecks,this.globalService.globalVar.animals.filter(r=>r.isAvailable).forEach(r=>{this.raceCourseTypeList.some(a=>a===r.getRaceCourseType())||this.raceCourseTypeList.push(r.getRaceCourseType())});var e=this.lookupService.getResourceByName("Scouts");null!=e&&e>0&&(this.displayRaceOrder=!0),this.selectedDeckOrder=[],this.selectedDeckOrder.push("Flatland"),this.selectedDeckOrder.push("Mountain"),this.selectedDeckOrder.push("Ocean"),this.selectedDeckOrder.push("Tundra"),this.selectedDeckOrder.push("Volcanic");var n=this.lookupService.getResourceByName("Team Manager");null==n&&(n=0),this.showAutoRaceButton=n>0,this.showEventButton=!!this.lookupService.isItemUnlocked("grandPrix")}editDeck(e,n){this.selectedDeck=n,this.newAnimalList=[],this.selectedAnimalName="",this.selectedCourseType="Flatland",this.isRaceOrderOn=n.isCourseOrderActive,null!=n.courseTypeOrder&&n.courseTypeOrder.length>0&&(this.selectedDeckOrder=[],n.courseTypeOrder.forEach(r=>{r===z.Flatland&&this.selectedDeckOrder.push("Flatland"),r===z.Mountain&&this.selectedDeckOrder.push("Mountain"),r===z.Ocean&&this.selectedDeckOrder.push("Ocean"),r===z.Tundra&&this.selectedDeckOrder.push("Tundra"),r===z.Volcanic&&this.selectedDeckOrder.push("Volcanic")})),this.filterType(this.selectedCourseType),n.selectedAnimals.length>0&&n.selectedAnimals.forEach(r=>{this.newAnimalList.push(r)}),this.editDeckForm.patchValue({deckName:n.name}),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}saveDeck(){var e,n,r,a,o,s,l,c,u=this.globalService.globalVar.animalDecks.find(T=>T.deckNumber===this.selectedDeck.deckNumber);if(null!=u&&((null===(e=this.editDeckForm.get("deckName"))||void 0===e?void 0:e.value.length)<=50&&(null===(n=this.editDeckForm.get("deckName"))||void 0===n?void 0:n.value.length)>=1&&(u.name=null===(r=this.editDeckForm.get("deckName"))||void 0===r?void 0:r.value),u.selectedAnimals=[],this.newAnimalList.forEach(T=>{null==u||u.selectedAnimals.push(T)}),null==u||u.selectedAnimals.sort(this.compare),this.displayRaceOrder&&this.isRaceOrderOn)){var d=[],m=null===(a=document.getElementById("raceOrder1"))||void 0===a?void 0:a.innerHTML,v=null===(o=document.getElementById("raceOrder2"))||void 0===o?void 0:o.innerHTML,_=null===(s=document.getElementById("raceOrder3"))||void 0===s?void 0:s.innerHTML,y=null===(l=document.getElementById("raceOrder4"))||void 0===l?void 0:l.innerHTML,S=null===(c=document.getElementById("raceOrder5"))||void 0===c?void 0:c.innerHTML;d.push(m),d.push(v),d.push(_),d.push(y),d.push(S),null!=u&&(u.courseTypeOrder=[]),d.forEach(T=>{"Flatland"===T&&(null==u||u.courseTypeOrder.push(z.Flatland)),"Mountain"===T&&(null==u||u.courseTypeOrder.push(z.Mountain)),"Ocean"===T&&(null==u||u.courseTypeOrder.push(z.Ocean)),"Tundra"===T&&(null==u||u.courseTypeOrder.push(z.Tundra)),"Volcanic"===T&&(null==u||u.courseTypeOrder.push(z.Volcanic))})}this.modalService.dismissAll()}compare(e,n){return e.raceCourseType>n.raceCourseType?1:n.raceCourseType>e.raceCourseType?-1:0}filterType(e){var n=this.lookupService.getAnimalsByRaceCourseType(e),r=[];n.length>0&&n.forEach(o=>{var s=this.globalService.globalVar.animals.find(l=>l.getAnimalType()===o);(null==s?void 0:s.isAvailable)&&r.push(s.getAnimalType())}),this.possibleAnimalsList=r,this.selectedCourseType=e;var a=this.selectedDeck.selectedAnimals.find(o=>o.getRaceCourseType()===e);null!=a&&(this.selectedAnimalName=a.getAnimalType())}selectAnimal(e){var n=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(null!=n){var r=-1,a=n.getRaceCourseType();this.newAnimalList.forEach(o=>{o.getRaceCourseType()===a&&(r=this.newAnimalList.indexOf(o))}),r>=0&&this.newAnimalList.splice(r,1),this.selectedAnimalName===n.getAnimalType()?this.selectedAnimalName="":(this.newAnimalList.push(n),this.selectedAnimalName=n.getAnimalType())}}setAsPrimary(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.isPrimaryDeck=!1),r.isPrimaryDeck=!0)}setAsAutoRunFreeRace(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.autoRunFreeRace),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.autoRunFreeRace=!1),r.autoRunFreeRace=!0)}setAsEventDeck(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.isEventDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.isEventDeck=!1),r.isEventDeck=!0)}dragStart(e){this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id)}allowDrop(e){e.preventDefault()}dropCourseType(e){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.getData("text"),r=document.getElementById(n),a=e.target.innerHTML;if(null!==r&&null!==a){var l=this.selectedDeckOrder.indexOf(a),c=this.selectedDeckOrder.indexOf(null==r?void 0:r.innerHTML);this.selectedDeckOrder[l]=r.innerHTML,this.selectedDeckOrder[c]=a,e.target.innerHTML="",e.target.className="",e.target.append(r.innerHTML),r.innerHTML="",r.className="",r.append(a)}}getColorClass(e){return{flatlandColor:"Flatland"===e,mountainColor:"Mountain"===e,waterColor:"Ocean"===e,tundraColor:"Tundra"===e,volcanicColor:"Volcanic"===e}}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(lo),A(hn),A(Zn))},t.\u0275cmp=dt({type:t,selectors:[["app-decks-view"]],decls:12,vars:1,consts:[[1,"decksView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"description"],[4,"ngFor","ngForOf"],["content",""],[1,"gridContainer"],[1,"deck",3,"deckNumber"],[1,"edit"],[1,"editButton",3,"click"],[1,"primary"],[1,"primaryButton",3,"click"],[1,"autoRunFreeRace"],["class","autoRunFreeRaceButton",3,"click",4,"ngIf"],[1,"event"],["class","eventButton",3,"click",4,"ngIf"],[1,"autoRunFreeRaceButton",3,"click"],[1,"eventButton",3,"click"],[1,"modalClass"],[3,"formGroup"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","deck-name"],["id","deck-name","type","text","maxlength","50","formControlName","deckName",1,"spaced"],["class","raceOrder",4,"ngIf"],[1,"typeContainer"],["class","raceType subHeading clickableText buttonAsTextKeepColor",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"animalContainer"],["class","animalOption clickableText buttonAsText",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",3,"click"],[1,"raceOrder"],["type","checkbox","id","finishTraining",1,"spaced",3,"checked","input"],[1,"spaced",3,"click"],["id","raceOrder1","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder2","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder3","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder4","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder5","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],[1,"raceType","subHeading","clickableText","buttonAsTextKeepColor",3,"ngClass","click"],[1,"animalOption","clickableText","buttonAsText",3,"ngClass","click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Relay Teams"),h(),f(6,"div",4),g(7," Relay Teams are groups of animals that run together in a race. As you rise through the ranks, races will have multiple legs of varying terrain that require you to use different animals to succeed. Each Relay Team consists of one animal from each course type. Your primary Relay Team is the one that will run the races you select. "),h(),D(8,"hr"),h(),x(9,ij,14,3,"div",5),h()()(),x(10,cj,22,5,"ng-template",null,6,ot)),2&e&&(p(9),b("ngForOf",n.animalDecks))},directives:[Yn,D0,an,Ah,wh,Ph,rs,Kc,yl,cv,Hn],styles:['.decksView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.animalContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.animalOption[_ngcontent-%COMP%]{display:inline-block}.selectedAnimal[_ngcontent-%COMP%]{font-weight:700}.selectedCourseType[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:60% 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"deck . freeRace ." "deck edit primary event"}.deck[_ngcontent-%COMP%]{grid-area:deck}.edit[_ngcontent-%COMP%]{grid-area:edit;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.eventButton[_ngcontent-%COMP%], .editButton[_ngcontent-%COMP%]{width:80%}.primary[_ngcontent-%COMP%]{grid-area:primary;text-align:center}.primaryButton[_ngcontent-%COMP%]{width:80%}.autoRunFreeRace[_ngcontent-%COMP%]{grid-area:freeRace;text-align:center}.autoRunFreeRaceButton[_ngcontent-%COMP%]{width:80%;margin-bottom:.5rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.draggable[_ngcontent-%COMP%]{cursor:move;margin:1em}.raceOrder[_ngcontent-%COMP%]{display:inline-block}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{grid-template-columns:50% 1fr 1fr 1fr}}']}),t})();function dj(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),Q("",e.selectedItem.numberPurchasing," ")}}function hj(t,i){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=w(2);p(1),Q(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function fj(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),Q(" x ",e.buyMultiplierAmount,"")}}function pj(t,i){if(1&t){const e=ge();f(0,"div",3)(1,"span",4),x(2,dj,2,1,"span",5),g(3),h(),x(4,hj,2,1,"em",5),D(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),f(10,"div",7),g(11),h(),D(12,"br"),f(13,"button",8),I("click",function(){return B(e),w().BuyItem()}),g(14,"Buy "),x(15,fj,2,1,"span",5),h()()}if(2&t){const e=w();b("ngbPopover",at(3)),p(1),b("ngClass",e.colorConditional),p(1),b("ngIf",e.displayNumberPurchasing),p(1),Q(" ",e.displayName,""),p(1),b("ngIf",e.selectedItem.totalShopQuantity>1),p(3),b("innerHTML",e.shortDescription,Nt),p(4),Q(" ",e.purchaseResourcesRequired," "),p(2),b("disabled",!e.canAffordItem),p(2),b("ngIf",e.buyMultiplierAmount>1)}}function gj(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),Q("",e.selectedItem.numberPurchasing," ")}}function mj(t,i){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=w(2);p(1),Q(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function vj(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),Q(" x ",e.buyMultiplierAmount,"")}}function bj(t,i){if(1&t){const e=ge();f(0,"div",9)(1,"span",4),x(2,gj,2,1,"span",5),g(3),h(),x(4,mj,2,1,"em",5),D(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),f(10,"div",7),g(11),h(),D(12,"br"),f(13,"button",8),I("click",function(){return B(e),w().BuyItem()}),g(14,"Buy "),x(15,vj,2,1,"span",5),h()()}if(2&t){const e=w();p(1),b("ngClass",e.colorConditional),p(1),b("ngIf",e.displayNumberPurchasing),p(1),nt(e.displayName),p(1),b("ngIf",e.selectedItem.totalShopQuantity>1),p(3),b("innerHTML",e.shortDescription,Nt),p(4),Q(" ",e.purchaseResourcesRequired," "),p(2),b("disabled",!e.canAffordItem),p(2),b("ngIf",e.buyMultiplierAmount>1)}}function _j(t,i){if(1&t&&(f(0,"div",10),D(1,"span",6),h()),2&t){const e=w();p(1),b("innerHTML",e.longDescription,Nt)}}let yj=(()=>{class t{constructor(e,n,r){this.globalService=e,this.lookupService=n,this.gameLoopService=r,this.itemPurchased=new rt,this.canAffordItem=!0,this.displayNumberPurchasing=!1,this.displayName="",this.buyMultiplierAmount=1}keyEventDown(e){(this.selectedItem.type===Y.Consumable||this.selectedItem.type===Y.Food||this.selectedItem.type===Y.Equipment||this.selectedItem.type===Y.Resources)&&"Mangoes"!==this.selectedItem.name&&("Shift"===e.key&&(e.preventDefault(),this.shiftPressed||(this.buyMultiplierAmount*=25,this.shiftPressed=!0)),"Control"===e.key&&(e.preventDefault(),this.ctrlPressed||(this.buyMultiplierAmount*=10,this.ctrlPressed=!0)),"Alt"===e.key&&(e.preventDefault(),this.altPressed||(this.buyMultiplierAmount*=100,this.altPressed=!0)))}keyEventUp(e){e.preventDefault(),(this.selectedItem.type===Y.Consumable||this.selectedItem.type===Y.Food||this.selectedItem.type===Y.Equipment||this.selectedItem.type===Y.Resources)&&"Mangoes"!==this.selectedItem.name&&("Shift"===e.key&&this.shiftPressed&&(this.buyMultiplierAmount/=25,this.shiftPressed=!1),"Control"===e.key&&this.ctrlPressed&&(this.buyMultiplierAmount/=10,this.ctrlPressed=!1),"Alt"===e.key&&this.altPressed&&(this.buyMultiplierAmount/=100,this.altPressed=!1))}ngOnInit(){var e=this;if(this.buyMultiplierAmount=1,this.selectedItem.type===Y.Ability?(this.shortDescription=this.lookupService.getAnimalAbilityDescription(!0,this.selectedItem.additionalIdentifier),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedItem.additionalIdentifier)):this.selectedItem.type===Y.Specialty?(this.shortDescription=this.lookupService.getSpecialtyItemDescription(this.selectedItem.name),""===this.shortDescription&&(this.shortDescription=this.selectedItem.shortDescription)):this.selectedItem.type===Y.Animal?this.shortDescription=this.lookupService.getAnimalDescription(this.selectedItem.name):(this.shortDescription=this.selectedItem.shortDescription,this.longDescription=this.selectedItem.longDescription),this.displayName=this.selectedItem.name,this.selectedItem.type===Y.Animal&&void 0!==(n=this.globalService.globalVar.animals.find(a=>a.name===this.selectedItem.name))&&(this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()}),this.selectedItem.type===Y.Ability){var n,r=this.selectedItem.name.split(" ")[0].trim();""!==r&&void 0!==(n=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===r))&&(this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()})}this.selectedItem.type===Y.Food&&1===this.selectedItem.numberPurchasing&&("Apples"===this.displayName&&(this.displayName="Apple"),"Oranges"===this.displayName&&(this.displayName="Orange"),"Bananas"===this.displayName&&(this.displayName="Banana"),"Strawberries"===this.displayName&&(this.displayName="Strawberry"),"Carrots"===this.displayName&&(this.displayName="Carrot"),"Turnips"===this.displayName&&(this.displayName="Turnip"),"Mangoes"===this.displayName&&(this.displayName="Mango")),(this.selectedItem.type===Y.Food||this.selectedItem.type===Y.Resources)&&(this.displayNumberPurchasing=!0),this.amountSubscription=this.gameLoopService.gameUpdateEvent.subscribe(ar(function*(){e.selectedItem.purchasePrice.forEach(a=>{var o=a.name;1===a.amount&&("Tokens"===o&&(o="Token"),"Medals"===o&&(o="Medal")),e.purchaseResourcesRequired=a.amount.toLocaleString()+" "+o+", ";var s=e.lookupService.getResourceByName(a.name);e.canAffordItem=!(s<a.amount*e.buyMultiplierAmount)}),e.purchaseResourcesRequired.length>0&&(e.purchaseResourcesRequired=e.purchaseResourcesRequired.substring(0,e.purchaseResourcesRequired.length-2))}))}BuyItem(){this.canBuyItem()&&(this.spendResourcesOnItem(),this.selectedItem.type===Y.Animal&&this.buyAnimal(),this.selectedItem.type===Y.Food?this.buyFood():this.selectedItem.type===Y.Training&&this.buyTraining(),this.selectedItem.type===Y.Specialty?this.buySpecialty():this.selectedItem.type===Y.Ability&&this.buyAbility(),this.selectedItem.type===Y.Equipment&&this.buyEquipment(),this.selectedItem.type===Y.Consumable&&this.buyConsumable(),this.selectedItem.type===Y.Resources&&this.buyResources(),this.itemPurchased.emit(this.selectedItem))}canBuyItem(){var e=!0;return this.selectedItem.purchasePrice.forEach(n=>{this.lookupService.getResourceByName(n.name)<n.amount*this.buyMultiplierAmount&&(e=!1)}),e}spendResourcesOnItem(){this.selectedItem.purchasePrice.forEach(e=>{this.lookupService.spendResourceByName(e.name,e.amount*this.buyMultiplierAmount)})}buyAnimal(){var e=this.globalService.globalVar.animals.find(s=>s.name===this.selectedItem.name);if(null!=e){e.isAvailable=!0,this.selectedItem.amountPurchased=1;var n=this.globalService.globalVar.shop.find(s=>"Abilities"===s.name);if(null!=n){var r=n.itemList.filter(s=>s.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(s=>{s.isAvailable=!0})}var a=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);if(null!=a){var o=!1;a.selectedAnimals.forEach(s=>{s.raceCourseType===(null==e?void 0:e.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(e)}}}buyTraining(){this.selectedItem.amountPurchased=1;var e=this.globalService.globalVar.trainingOptions.find(n=>n.trainingName===this.selectedItem.name);void 0!==e&&(e.isAvailable=!0)}buyFood(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new le(this.selectedItem.name,e,Y.Food));"Mangoes"===this.selectedItem.name&&this.selectedItem.purchasePrice.forEach(r=>{"Coins"===r.name&&(r.amount+=50),"Tokens"===r.name&&(r.amount+=1)})}buySpecialty(){var e,a;if(this.selectedItem.amountPurchased+=1,"Whistle"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(l=>"Specialty"===l.name))){var n=e.itemList.find(l=>"Golden Whistle"===l.name);null!=n&&(n.isAvailable=!0)}if("National Races"===this.selectedItem.name&&(this.globalService.globalVar.nationalRaceCountdown=0,null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name)))){var r=e.itemList.find(c=>"International Races"===c.name);null!=r&&(r.isAvailable=!0)}if("Incubator Upgrade Lv1"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))&&null!=(a=e.itemList.find(c=>"Incubator Upgrade Lv2"===c.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv2"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))&&null!=(a=e.itemList.find(u=>"Incubator Upgrade Lv3"===u.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv3"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))&&null!=(a=e.itemList.find(u=>"Incubator Upgrade Lv4"===u.name))&&(a.isAvailable=!0),"Team Manager"===this.selectedItem.name&&1===this.selectedItem.amountPurchased){var o=this.globalService.globalVar.animalDecks.find(l=>l.isPrimaryDeck);null!=o&&(o.autoRunFreeRace=!0)}if(null!=this.globalService.globalVar.resources&&(this.globalService.globalVar.resources.some(l=>l.name===this.selectedItem.name)?null!=(s=this.globalService.globalVar.resources.find(l=>l.name===this.selectedItem.name))&&(s.amount+=1):this.globalService.globalVar.resources.push(new le(this.selectedItem.name,1,Y.Specialty))),"Talent Point Voucher"===this.selectedItem.name)if(this.globalService.globalVar.resources.some(l=>"Talent Points"===l.name)){var s;null!=(s=this.globalService.globalVar.resources.find(c=>"Talent Points"===c.name))&&(s.amount+=1)}else this.globalService.globalVar.resources.push(new le("Talent Points",1,Y.Resources));null!=this.selectedItem.quantityMultiplier&&this.selectedItem.quantityMultiplier>0&&this.selectedItem.purchasePrice.forEach(l=>{null!=this.selectedItem.quantityAdditive&&this.selectedItem.quantityAdditive>0?l.amount+=this.selectedItem.quantityAdditive:l.amount*=this.selectedItem.quantityMultiplier,"Team Manager"===this.selectedItem.name&&l.amount>5e3&&(l.amount=5e3)})}buyAbility(){var e=this.selectedItem.name.split(" ")[0].trim(),n=this.selectedItem.name.split(":")[1].trim();if(""!==e&&""!==n){var r=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(void 0!==r){var a=r.availableAbilities.find(o=>o.name===n);void 0!==a&&(a.isAbilityPurchased=!0,this.selectedItem.amountPurchased=1)}}}buyEquipment(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new le(this.selectedItem.name,e,Y.Equipment))}buyConsumable(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new le(this.selectedItem.name,e,Y.Consumable))}buyResources(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new le(this.selectedItem.name,e,Y.Resources))}ngOnDestroy(){null!=this.amountSubscription&&this.amountSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(hn),A(_i))},t.\u0275cmp=dt({type:t,selectors:[["app-shopping-item"]],hostBindings:function(e,n){1&e&&I("keydown",function(a){return n.keyEventDown(a)},!1,Ya)("keyup",function(a){return n.keyEventUp(a)},!1,Ya)},inputs:{selectedItem:"selectedItem"},outputs:{itemPurchased:"itemPurchased"},decls:4,vars:2,consts:[["class","item","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","item",4,"ngIf"],["longDescriptionContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"item",3,"ngbPopover"],[1,"keyword",3,"ngClass"],[4,"ngIf"],[3,"innerHTML"],[1,"resourceKeyword"],[3,"disabled","click"],[1,"item"],[1,"popoverClass"]],template:function(e,n){1&e&&(x(0,pj,16,9,"div",0),x(1,bj,16,8,"div",1),x(2,_j,2,1,"ng-template",null,2,ot)),2&e&&(b("ngIf",""!==n.longDescription&&null!=n.longDescription),p(1),b("ngIf",""===n.longDescription||null==n.longDescription))},directives:[an,Or,Hn],styles:[".item[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();function wj(t,i){if(1&t){const e=ge();f(0,"td",8)(1,"div")(2,"app-shopping-item",9),I("itemPurchased",function(r){return B(e),w(3).itemPurchased(r)}),h()()()}if(2&t){const e=i.$implicit;p(2),b("selectedItem",e)}}function Cj(t,i){if(1&t&&(f(0,"tr"),x(1,wj,3,1,"td",7),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function Sj(t,i){if(1&t&&(f(0,"table"),x(1,Cj,2,1,"tr",6),h()),2&t){const e=w();p(1),b("ngForOf",e.itemsRows)}}function Tj(t,i){1&t&&(f(0,"div",10),D(1,"br"),f(2,"span"),g(3,"Fresh out! Check back again in the future to see if more items are added!"),h(),D(4,"br"),h())}const Dj=function(t){return{tokenShopColor:t}};let QR=(()=>{class t{constructor(e){this.globalService=e,this.shopsEnum=La}ngOnInit(){null==this.shopType&&(this.shopType=La.regular),this.setupDisplayItems()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];var e=4;this.screenHeight<=650&&(e=2);var n=[];this.section.itemList.forEach(a=>{a.isAvailable&&(a.canHaveMultiples&&(a.infiniteAmount||a.amountPurchased<a.totalShopQuantity)||0===a.amountPurchased)&&n.push(a)});for(var r=1;r<=n.length;r++)this.itemsCells.push(n[r-1]),r%e==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}itemPurchased(e){this.setupDisplayItems()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt))},t.\u0275cmp=dt({type:t,selectors:[["app-shopping-list"]],hostBindings:function(e,n){1&e&&I("resize",function(a){return n.onResize(a)},!1,Ya)},inputs:{section:"section",shopType:"shopType"},decls:8,vars:6,consts:[[1,"shoppingListView"],[1,"sectionHeaderBackgroundColor",3,"ngClass"],[1,"s4Heading","keyword","sectionHeaderText"],[1,"items"],[4,"ngIf"],["class","centered","c","",4,"ngIf"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[3,"selectedItem","itemPurchased"],["c","",1,"centered"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"span",2),g(3),h()(),f(4,"div",3),x(5,Sj,2,1,"table",4),x(6,Tj,5,0,"div",5),D(7,"br"),h()()),2&e&&(p(1),b("ngClass",ri(4,Dj,n.shopType===n.shopsEnum.token)),p(2),nt(n.section.name),p(2),b("ngIf",n.itemsRows.length>0),p(1),b("ngIf",0===n.itemsRows.length))},directives:[Hn,an,Yn,yj],styles:[".shoppingListView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.sectionHeaderBackgroundColor[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center}.tokenShopColor[_ngcontent-%COMP%]{background-color:var(--tokenShopColor)!important}.sectionHeaderText[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.centered[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function Rj(t,i){if(1&t&&(f(0,"div",8),D(1,"app-shopping-list",9),h()),2&t){const e=i.$implicit,n=w();p(1),b("section",e)("shopType",n.shopType)}}function xj(t,i){if(1&t&&(f(0,"div",10),D(1,"hr"),f(2,"em"),g(3),f(4,"span",11),g(5,"Renown"),h()()()),2&t){const e=w();p(3),Q("Next tier unlocked at ",e.lookupService.getRenownRequiredForEventShopTier(e.highestTierUnlocked+1)," ")}}let Mj=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.gameLoopService=r,this.componentCommunicationService=a,this.highestTierUnlocked=0,this.maxTiers=3,this.shopType=La.token,this.currentTokens=0}ngOnInit(){var e=this;this.highestTierUnlocked=this.lookupService.getHighestEventShopTierUnlocked(),this.getShopOptions(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(ar(function*(){e.currentTokens=e.lookupService.getTokens()}))}getShopOptions(){this.sections=[];var e=this.globalService.globalVar.tokenShop.find(a=>"Tier 1"===a.name);void 0!==e&&this.highestTierUnlocked>=1&&this.sections.push(e);var n=this.globalService.globalVar.tokenShop.find(a=>"Tier 2"===a.name);void 0!==n&&this.highestTierUnlocked>=2&&this.sections.push(n);var r=this.globalService.globalVar.tokenShop.find(a=>"Tier 3"===a.name);void 0!==r&&this.highestTierUnlocked>=3&&this.sections.push(r)}returnToEventRaceView(){this.componentCommunicationService.setRaceView(mt.raceselection,Ne.event)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(hn),A(_i),A(Zn))},t.\u0275cmp=dt({type:t,selectors:[["app-token-shop-view"]],decls:15,vars:3,consts:[[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"back"],[3,"click"],["class","shopSection",4,"ngFor","ngForOf"],["class","centered",4,"ngIf"],[1,"shopSection"],[3,"section","shopType"],[1,"centered"],[1,"progressionKeyword"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Token Shop"),h(),f(6,"span"),g(7),h()(),f(8,"div",4)(9,"button",5),I("click",function(){return n.returnToEventRaceView()}),g(10,"Back To Event"),h()()()(),D(11,"br"),x(12,Rj,2,2,"div",6),D(13,"br"),x(14,xj,6,1,"div",7),h()),2&e&&(p(7),Q("Tokens: ",n.currentTokens,""),p(5),b("ngForOf",n.sections),p(2),b("ngIf",n.highestTierUnlocked<n.maxTiers))},directives:[Yn,QR,an],styles:['.shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}']}),t})();function kj(t,i){if(1&t&&(f(0,"div",16),D(1,"app-shopping-list",17),h()),2&t){const e=i.$implicit;p(1),b("section",e)}}function Aj(t,i){if(1&t){const e=ge();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2"),g(5,"Shop"),h()()(),f(6,"div",6)(7,"span",7),g(8,"Filters:"),h(),f(9,"button",8),I("click",function(){return B(e),w().toggleShopFilter("Animals")}),g(10,"Animals"),h(),f(11,"button",9),I("click",function(){return B(e),w().toggleShopFilter("Trainings")}),g(12," Trainings"),h(),f(13,"button",10),I("click",function(){return B(e),w().toggleShopFilter("Equipment")}),g(14,"Equipment "),h(),f(15,"button",11),I("click",function(){return B(e),w().toggleShopFilter("Food")}),g(16,"Food"),h(),f(17,"button",12),I("click",function(){return B(e),w().toggleShopFilter("Specialty")}),g(18," Specialty"),h(),f(19,"button",13),I("click",function(){return B(e),w().toggleShopFilter("Abilities")}),g(20," Abilities"),h()(),f(21,"button",14),I("click",function(){return B(e),w().ResetShopFilters()}),g(22," Reset Filters "),h()(),D(23,"br"),x(24,kj,2,1,"div",15),h()}if(2&t){const e=w();p(9),wt("filterActive",e.filterAnimals),p(2),wt("filterActive",e.filterTrainings),p(2),wt("filterActive",e.filterEquipment),p(2),wt("filterActive",e.filterFood),p(2),wt("filterActive",e.filterSpecialty),p(2),wt("filterActive",e.filterAbilities),p(5),b("ngForOf",e.sections)}}function Pj(t,i){1&t&&(f(0,"div"),D(1,"app-token-shop-view"),h())}let Ej=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.filterAnimals=!1,this.filterTrainings=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterAbilities=!1,this.ShopsEnum=La}ngOnInit(){this.componentCommunicationService.setNewView(mt.shop),this.getShopOptions(),this.subscription=this.componentCommunicationService.getShopView().subscribe(e=>{this.activeShopView=e})}getShopOptions(){this.sections=[];var e=this.filtersActive(),n=this.globalService.globalVar.shop.find(c=>"Animals"===c.name&&(!e||e&&this.filterAnimals));void 0!==n&&this.sections.push(n);var r=this.globalService.globalVar.shop.find(c=>"Trainings"===c.name&&(!e||e&&this.filterTrainings));void 0!==r&&this.sections.push(r);var a=this.globalService.globalVar.shop.find(c=>"Equipment"===c.name&&(!e||e&&this.filterEquipment));void 0!==a&&this.sections.push(a);var o=this.globalService.globalVar.shop.find(c=>"Food"===c.name&&(!e||e&&this.filterFood));void 0!==o&&this.sections.push(o);var s=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name&&(!e||e&&this.filterSpecialty));void 0!==s&&this.sections.push(s);var l=this.globalService.globalVar.shop.find(c=>"Abilities"===c.name&&(!e||e&&this.filterAbilities));void 0!==l&&this.sections.push(l)}toggleShopFilter(e){"Animals"===e&&(this.filterAnimals=!this.filterAnimals),"Trainings"===e&&(this.filterTrainings=!this.filterTrainings),"Equipment"===e&&(this.filterEquipment=!this.filterEquipment),"Food"===e&&(this.filterFood=!this.filterFood),"Specialty"===e&&(this.filterSpecialty=!this.filterSpecialty),"Abilities"===e&&(this.filterAbilities=!this.filterAbilities),this.getShopOptions()}filtersActive(){return!!(this.filterAnimals||this.filterAbilities||this.filterEquipment||this.filterFood||this.filterSpecialty||this.filterTrainings)}ResetShopFilters(){this.filterAnimals=!1,this.filterAbilities=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterTrainings=!1,this.getShopOptions()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(Zn))},t.\u0275cmp=dt({type:t,selectors:[["app-shop-view"]],decls:2,vars:2,consts:[["class","shopView",4,"ngIf"],[4,"ngIf"],[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"filters"],["id","title"],["id","animalsFilter",1,"clickableText","buttonAsText",3,"click"],["id","trainingsFilter",1,"clickableText","buttonAsText",3,"click"],["id","equipmentFilter",1,"clickableText","buttonAsText",3,"click"],["id","foodFilter",1,"clickableText","buttonAsText",3,"click"],["id","specialtyFilter",1,"clickableText","buttonAsText",3,"click"],["id","abilitiesFilter",1,"clickableText","buttonAsText",3,"click"],[1,"centered","clickableText","buttonAsText",3,"click"],["class","shopSection",4,"ngFor","ngForOf"],[1,"shopSection"],[3,"section"]],template:function(e,n){1&e&&(x(0,Aj,25,13,"div",0),x(1,Pj,2,0,"div",1)),2&e&&(b("ngIf",n.activeShopView===n.ShopsEnum.regular),p(1),b("ngIf",n.activeShopView===n.ShopsEnum.token))},directives:[an,Yn,QR,Mj],styles:[".shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.filters[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4%}#title[_ngcontent-%COMP%]{grid-area:title}#animalsFilter[_ngcontent-%COMP%]{grid-area:animalsFilter}#trainingsFilter[_ngcontent-%COMP%]{grid-area:trainingsFilter}#facilityFilter[_ngcontent-%COMP%]{grid-area:facilityFilter}#foodFilter[_ngcontent-%COMP%]{grid-area:foodFilter}#specialtyFilter[_ngcontent-%COMP%]{grid-area:specialtyFilter}#enhancerFilter[_ngcontent-%COMP%]{grid-area:enhancerFilter}"]}),t})(),Ij=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n}ngOnInit(){this.traitLevel=this.lookupService.getResearchLevel(),this.maxNegativePercent=25;var e=this.globalService.globalVar.modifiers.find(n=>"maximumTraitNegativePercentModifier"===n.text);void 0!==e&&(this.maxNegativePercent=e.value)}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(hn))},t.\u0275cmp=dt({type:t,selectors:[["app-trait-option"]],inputs:{trait:"trait"},decls:5,vars:2,consts:[[1,"trait"],[1,"traitName","keyword"],[1,"traitStats"]],template:function(e,n){1&e&&(f(0,"h6",0)(1,"p",1),g(2),h(),f(3,"p",2),g(4),h()()),2&e&&(p(2),nt(n.trait.traitName),p(2),nt(n.trait.getStatGainDescription(n.maxNegativePercent)))},styles:[".trait[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const Oj=function(t){return{activeTrait:t}};function Nj(t,i){if(1&t){const e=ge();f(0,"td",4)(1,"div",5),I("click",function(){const a=B(e).$implicit;return w(2).selectTrait(a)}),D(2,"app-trait-option",6),h()()}if(2&t){const e=i.$implicit;p(1),b("ngClass",ri(2,Oj,e.isSelected)),p(1),b("trait",e)}}function Vj(t,i){if(1&t&&(f(0,"tr"),x(1,Nj,3,4,"td",3),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}let Fj=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrait=new rt}ngOnInit(){this.setupDisplayTraits()}setupDisplayTraits(){this.traitsCells=[],this.traitsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableTraits.length;n++)this.traitsCells.push(this.availableTraits[n-1]),n%e==0&&(this.traitsRows.push(this.traitsCells),this.traitsCells=[]);0!==this.traitsCells.length&&this.traitsRows.push(this.traitsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrait(e){this.availableTraits.forEach(n=>{n.isSelected=!1}),e.isSelected=!0,this.selectedTrait.emit(e)}ngOnChanges(e){this.availableTraits=e.availableTraits.currentValue,this.setupDisplayTraits()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt))},t.\u0275cmp=dt({type:t,selectors:[["app-trait-list"]],hostBindings:function(e,n){1&e&&I("resize",function(a){return n.onResize(a)},!1,Ya)},inputs:{availableTraits:"availableTraits"},outputs:{selectedTrait:"selectedTrait"},features:[Oi],decls:4,vars:1,consts:[[1,"traitsView"],[1,"traits"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trait"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,Vj,2,1,"tr",2),h()()()),2&e&&(p(3),b("ngForOf",n.traitsRows))},directives:[Yn,Hn,Ij],styles:[".traitsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function Bj(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=w(2);p(1),nt(e.selectedAnimal.name)}}function Lj(t,i){if(1&t){const e=ge();f(0,"div",21),I("click",function(){return B(e),w().goToAnimal()}),x(1,Bj,2,1,"span",7),D(2,"br"),f(3,"span"),g(4),h()()}if(2&t){const e=w();b("ngClass",e.colorConditional),p(1),b("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),nt(e.selectedAnimal.getAnimalType())}}function Uj(t,i){if(1&t){const e=ge();f(0,"div",21),I("click",function(){return B(e),w().goToAnimal()}),f(1,"span"),g(2),h()()}if(2&t){const e=w();b("ngClass",e.colorConditional),p(2),nt(e.selectedAnimal.getAnimalType())}}function Hj(t,i){if(1&t&&(f(0,"span",22),g(1,"Current Trait: "),f(2,"span",23),g(3),h()()),2&t){const e=w();Wi("ngbPopover",e.traitStatGainDescription),p(3),nt(e.selectedAnimal.getTraitName())}}function Gj(t,i){if(1&t&&(f(0,"span",24),g(1),h()),2&t){const e=w();p(1),Q("",e.existingTrait.traitName," ")}}function jj(t,i){1&t&&(f(0,"span"),g(1,"No Trait Assigned"),h())}function zj(t,i){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"p",25),D(3,"ngb-progressbar",26),f(4,"span",27),g(5),Vt(6,"number"),h()(),D(7,"br"),h()),2&t){const e=w();p(3),b("value",e.trainingProgressBarPercent),p(2),Q("",rn(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}let $j=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.componentCommunicationService=a,this.returnEmitter=new rt,this.traitStatGainDescription="",this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1}ngOnInit(){this.availableTraits=this.GetAvailableTraits();var e=this.globalService.globalVar.incubator;if(null!=e.assignedAnimal&&null!=e.assignedTrait&&(this.existingTrait=e.assignedTrait),null!=this.existingTrait){var n=this.availableTraits.find(r=>{var a;return(null===(a=this.existingTrait)||void 0===a?void 0:a.traitName)===r.traitName});null!=n&&(n.isSelected=!0)}this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.incubator;if(null==a.assignedAnimal||null==a.assignedTrait)return this.existingTrait=null,void this.availableTraits.forEach(o=>{o.isSelected=!1});this.trainingProgressBarPercent=a.timeTrained/a.timeToComplete*100})}selectNewTrait(e){var n=Object.assign({},e),r=this.globalService.globalVar.incubator;r.timeTrained=0,r.assignedAnimal=this.selectedAnimal,r.assignedTrait=n,this.existingTrait=n,this.selectedAnimal.currentTraining=null,this.selectedAnimal.canTrain=!1}GetAvailableTraits(){var e=[],n=this.lookupService.getResearchLevel();return e.push(new un("Alert",1,n,ye.focus,ye.endurance)),e.push(new un("Sharp",1,n,ye.adaptability,ye.power)),e.push(new un("Bulky",1,n,ye.power,ye.topSpeed)),e.push(new un("Curious",3,n,ye.acceleration,ye.focus)),e.push(new un("Adamant",3,n,ye.topSpeed,ye.acceleration)),e.push(new un("Stoic",5,n,ye.endurance,ye.adaptability)),e.push(new un("Smart",5,n,ye.focus,ye.power)),e.push(new un("Careful",7,n,ye.adaptability,ye.acceleration)),e.push(new un("Attentive",7,n,ye.power,ye.endurance)),e.push(new un("Keen",9,n,ye.acceleration,ye.topSpeed)),e.push(new un("Quick",9,n,ye.topSpeed,ye.adaptability)),e.push(new un("Tough",11,n,ye.endurance,ye.focus)),e.push(new un("Solitary",11,n,ye.focus,ye.acceleration)),e.push(new un("Cautious",13,n,ye.adaptability,ye.topSpeed)),e.push(new un("Wild",13,n,ye.power,ye.focus)),e.push(new un("Clumsy",15,n,ye.acceleration,ye.adaptability)),e.push(new un("Natural",15,n,ye.topSpeed,ye.endurance)),e.push(new un("Resilient",17,n,ye.endurance,ye.power)),e.push(new un("Anxious",17,n,ye.focus,ye.topSpeed)),e.push(new un("Lucky",19,n,ye.adaptability,ye.focus)),e.push(new un("Rugged",19,n,ye.power,ye.adaptability)),e.push(new un("Naive",21,n,ye.acceleration,ye.endurance)),e.push(new un("Sprightly",21,n,ye.topSpeed,ye.power)),e.push(new un("Stout",23,n,ye.endurance,ye.acceleration)),e.push(new un("Pensive",23,n,ye.focus,ye.adaptability)),e.push(new un("Languid",25,n,ye.adaptability,ye.endurance)),e.push(new un("Mighty",25,n,ye.power,ye.acceleration)),e.push(new un("Nimble",27,n,ye.acceleration,ye.power)),e.push(new un("Small",27,n,ye.topSpeed,ye.focus)),e.push(new un("Resolute",29,n,ye.endurance,ye.topSpeed)),(e=e.filter(r=>n>=r.requiredLevel)).filter(r=>!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterSpeed&&r.positiveStatGain===ye.topSpeed||this.filterAcceleration&&r.positiveStatGain===ye.acceleration||this.filterEndurance&&r.positiveStatGain===ye.endurance||this.filterPower&&r.positiveStatGain===ye.power||this.filterFocus&&r.positiveStatGain===ye.focus||this.filterAdaptability&&r.positiveStatGain===ye.adaptability)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.availableTraits=this.GetAvailableTraits()}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTraits=this.GetAvailableTraits()}returnToAnimalView(){this.returnEmitter.emit(!1)}goToAnimal(){this.componentCommunicationService.setAnimalView(mt.animals,this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(_i),A(hn),A(Zn))},t.\u0275cmp=dt({type:t,selectors:[["app-incubator-traits"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:39,vars:19,consts:[[1,"incubatorTraitsModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],["class","clickableText keyword",3,"ngClass","click",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","activeTrait",4,"ngIf"],[4,"ngIf"],[1,"back"],[3,"click"],[1,"filterGridContainer"],[1,"resetFiltersHeader","clickableText"],[1,"changeTrainingHeader"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTraits","selectedTrait"],[1,"clickableText","keyword",3,"ngClass","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],[1,"keyword"],[1,"activeTrait"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),x(4,Lj,5,3,"div",4),x(5,Uj,3,2,"div",4),x(6,Hj,4,2,"span",5),D(7,"hr"),x(8,Gj,2,1,"span",6),x(9,jj,2,0,"span",7),h(),f(10,"div",8)(11,"button",9),I("click",function(){return n.returnToAnimalView()}),g(12,"Back"),h()()(),D(13,"hr"),x(14,zj,8,5,"div",7),D(15,"br")(16,"br"),f(17,"div",10)(18,"div",11)(19,"span",9),I("click",function(){return n.resetFilters()}),g(20,"Reset Filters"),h()(),f(21,"div",12)(22,"span"),g(23,"Choose New Trait"),h()(),f(24,"div",13)(25,"button",14),I("click",function(){return n.toggleStatFilter("Speed")}),g(26,"SPD "),h(),f(27,"button",15),I("click",function(){return n.toggleStatFilter("Acceleration")}),g(28,"ACC "),h(),f(29,"button",16),I("click",function(){return n.toggleStatFilter("Endurance")}),g(30,"END "),h(),f(31,"button",17),I("click",function(){return n.toggleStatFilter("Power")}),g(32,"PWR "),h(),f(33,"button",18),I("click",function(){return n.toggleStatFilter("Focus")}),g(34,"FCS "),h(),f(35,"button",19),I("click",function(){return n.toggleStatFilter("Adaptability")}),g(36,"ADP"),h()()(),D(37,"br"),f(38,"app-trait-list",20),I("selectedTrait",function(a){return n.selectNewTrait(a)}),h()()()),2&e&&(p(4),b("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),p(1),b("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),p(1),b("ngIf",null!=n.selectedAnimal.trait),p(2),b("ngIf",null!=n.existingTrait),p(1),b("ngIf",null==n.existingTrait),p(5),b("ngIf",null!=n.existingTrait),p(11),wt("filterActive",n.filterSpeed),p(2),wt("filterActive",n.filterAcceleration),p(2),wt("filterActive",n.filterEndurance),p(2),wt("filterActive",n.filterPower),p(2),wt("filterActive",n.filterFocus),p(2),wt("filterActive",n.filterAdaptability),p(3),b("availableTraits",n.availableTraits))},directives:[an,Hn,Or,T0,Fj],pipes:[no],styles:['.incubatorTraitsModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"ResetFiler changeTraitHeader statFilter"}.changeTraitHeader[_ngcontent-%COMP%]{grid-area:changeTraitHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.resetFilter[_ngcontent-%COMP%]{grid-area:resetFilter}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}']}),t})();function qj(t,i){1&t&&(f(0,"div",3)(1,"h2"),g(2,"Incubator"),h(),f(3,"div",4),g(4," Select an animal and the desired trait to begin the incubation process. While incubating, you will not be able to train the selected animal. The chosen trait will remain on the animal until a new trait is selected or the trait is removed. "),h(),D(5,"hr"),h())}function Wj(t,i){if(1&t){const e=ge();f(0,"div",7)(1,"div")(2,"app-animal-list",8),I("selectedAnimal",function(r){return B(e),w(2).selectedAnimal(r)}),h()()()}if(2&t){const e=w(2);p(2),b("availableAnimals",e.availableAnimals)}}function Xj(t,i){if(1&t){const e=ge();f(0,"div",9)(1,"app-incubator-traits",10),I("returnEmitter",function(r){return B(e),w(2).returnToAnimalView(r)}),h()()}if(2&t){const e=w(2);p(1),b("selectedAnimal",e.animal)}}function Yj(t,i){if(1&t&&(f(0,"div"),x(1,Wj,3,1,"div",5),x(2,Xj,2,1,"div",6),h()),2&t){const e=w();p(1),b("ngIf",!e.animalSelected),p(1),b("ngIf",e.animalSelected)}}function Qj(t,i){1&t&&(f(0,"div"),g(1," To access the incubator, you need to improve your research level. Try participating in Duo Races. "),h())}let Kj=(()=>{class t{constructor(e,n,r){this.globalService=e,this.lookupService=n,this.componentCommunicationService=r,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(mt.incubator),this.availableAnimals=this.globalService.globalVar.animals.filter(n=>n.isAvailable),this.researchLevel=this.lookupService.getResearchLevel();var e=this.globalService.globalVar.incubator;null!=e.assignedAnimal&&(this.animalSelected=!0,this.animal=e.assignedAnimal)}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(hn),A(Zn))},t.\u0275cmp=dt({type:t,selectors:[["app-incubator-view"]],decls:4,vars:3,consts:[[1,"incubatorView"],["class","info",4,"ngIf"],[4,"ngIf"],[1,"info"],[1,"description"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"selectAnimalView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,qj,6,0,"div",1),x(2,Yj,3,2,"div",2),x(3,Qj,2,0,"div",2),h()),2&e&&(p(1),b("ngIf",!n.animalSelected),p(1),b("ngIf",n.researchLevel>0),p(1),b("ngIf",0===n.researchLevel))},directives:[an,Sf,$j],styles:[".incubatorView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:1rem}"]}),t})();var xu=(()=>{return(t=xu||(xu={}))[t.basics=0]="basics",t[t.progression=1]="progression",t[t.calculators=2]="calculators",xu;var t})();function Zj(t,i){if(1&t){const e=ge();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswerBreedGuide")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"What does Breeding do? How do I gain Breed XP?"),h()()(),f(9,"div",10),D(10,"div",7),f(11,"p"),g(12," Breeding is one of the best way to increase your animals' racing capabilities. It is a reset mechanic, meaning all of the base stats your animal has gained will be reset back to their default levels, and in return gain a permanent multiplier to your racing stats. Note that the stats your animal has prior to breeding have no impact on Breeding. "),D(13,"br")(14,"br"),g(15," Every time you Breed, you gain a 5% increase to the amount your base stats contribute to your racing stats. If you hover over your base stats (or tap if you are on mobile) when selecting an animal on the Animal page, you will see a breakdown of all multipliers you have obtained. With the Stockbreeder, you can set your animal to breed automatically without input so you can quickly raise your Breed Level in quick succession without having to spend time training in between each level. "),D(16,"br")(17,"br"),g(18," There are a few ways to increase Breed XP: "),D(19,"br"),f(20,"em"),g(21,"Completing any training:"),h(),g(22),D(23,"br"),f(24,"em"),g(25,"Successfully completing a free race:"),h(),g(26),D(27,"br"),f(28,"em"),g(29,"Successfully completeing a circuit race:"),h(),g(30),D(31,"br")(32,"br"),g(33," As you progress, you'll find ways to increase the amount of XP gained. "),h()()(),D(34,"hr"),f(35,"div")(36,"div")(37,"div",7)(38,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswerBreedBarnRows")}),g(39,"+"),h()(),f(40,"div",9)(41,"p"),g(42,"I've got too many animals -- how do I unlock more barns?"),h()()(),f(43,"div",11),D(44,"div",7),f(45,"p"),g(46," Raise your circuit rank! As you progress, you'll unlock more rows of 3 barns. "),h()()(),D(47,"hr"),f(48,"div")(49,"div")(50,"div",7)(51,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswerAllAnimals")}),g(52,"+"),h()(),f(53,"div",9)(54,"p"),g(55,"What are all of the animals and course types?"),h()()(),f(56,"div",12),D(57,"div",7),f(58,"div")(59,"span",13),g(60,"Flatland"),h(),D(61,"br"),f(62,"span",14),g(63,"Horse"),h(),g(64),D(65,"br"),f(66,"span",14),g(67,"Cheetah"),h(),g(68),D(69,"br"),f(70,"span",14),g(71,"Hare"),h(),g(72),D(73,"br")(74,"br"),f(75,"span",15),g(76,"Mountain"),h(),D(77,"br"),f(78,"span",14),g(79,"Monkey"),h(),g(80),D(81,"br"),f(82,"span",14),g(83,"Goat"),h(),g(84),D(85,"br"),f(86,"span",14),g(87,"Gecko"),h(),g(88),D(89,"br")(90,"br"),f(91,"div")(92,"span",16),I("click",function(){return B(e),w().viewSpoiler("Ocean Course Type")}),f(93,"span",17),g(94,"View Spoiler"),h(),f(95,"span",18),g(96,"Ocean"),h()(),D(97,"br"),f(98,"span",16),I("click",function(){return B(e),w().viewSpoiler("Ocean Course Type")}),f(99,"span",17),g(100,"View Spoiler"),h(),f(101,"span",14),g(102,"Dolphin"),h(),g(103),h(),D(104,"br"),f(105,"span",16),I("click",function(){return B(e),w().viewSpoiler("Ocean Course Type")}),f(106,"span",17),g(107,"View Spoiler"),h(),f(108,"span",14),g(109,"Shark"),h(),g(110),h(),D(111,"br"),f(112,"span",16),I("click",function(){return B(e),w().viewSpoiler("Ocean Course Type")}),f(113,"span",17),g(114,"View Spoiler"),h(),f(115,"span",14),g(116,"Octopus"),h(),g(117),h(),D(118,"br")(119,"br"),h(),f(120,"div")(121,"span",16),I("click",function(){return B(e),w().viewSpoiler("Tundra Course Type")}),f(122,"span",17),g(123,"View Spoiler"),h(),f(124,"span",18),g(125,"Tundra"),h()(),D(126,"br"),f(127,"span",16),I("click",function(){return B(e),w().viewSpoiler("Tundra Course Type")}),f(128,"span",17),g(129,"View Spoiler"),h(),D(130,"em",19),h(),D(131,"br"),f(132,"span",16),I("click",function(){return B(e),w().viewSpoiler("Tundra Course Type")}),f(133,"span",17),g(134,"View Spoiler"),h(),f(135,"span",14),g(136,"Penguin"),h(),g(137),h(),D(138,"br"),f(139,"span",16),I("click",function(){return B(e),w().viewSpoiler("Tundra Course Type")}),f(140,"span",17),g(141,"View Spoiler"),h(),f(142,"span",14),g(143,"Caribou"),h(),g(144),h(),D(145,"br")(146,"br"),h(),f(147,"div")(148,"span",16),I("click",function(){return B(e),w().viewSpoiler("Volcanic Course Type")}),f(149,"span",17),g(150,"View Spoiler"),h(),f(151,"span",18),g(152,"Volcanic"),h()(),D(153,"br"),f(154,"span",16),I("click",function(){return B(e),w().viewSpoiler("Volcanic Course Type")}),f(155,"span",17),g(156,"View Spoiler"),h(),D(157,"em",19),h(),D(158,"br"),f(159,"span",16),I("click",function(){return B(e),w().viewSpoiler("Volcanic Course Type")}),f(160,"span",17),g(161,"View Spoiler"),h(),f(162,"span",14),g(163,"Salamander"),h(),g(164),h(),D(165,"br"),f(166,"span",16),I("click",function(){return B(e),w().viewSpoiler("Volcanic Course Type")}),f(167,"span",17),g(168,"View Spoiler"),h(),f(169,"span",14),g(170,"Fox"),h(),g(171),h()()()()(),D(172,"hr"),f(173,"div")(174,"div")(175,"div",7)(176,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswerTerrain")}),g(177,"+"),h()(),f(178,"div",9)(179,"p"),g(180,"What are the different terrain options when racing?"),h()()(),f(181,"div",20),D(182,"div",7),f(183,"p"),g(184," Every race leg will have a random terrain. Each terrain may have a positive or negative effect for your racer and should be considered when thinking about which animal is going to race a particular leg. The terrain options are below: "),D(185,"br")(186,"br"),f(187,"strong"),g(188,"Sunny"),h(),D(189,"br")(190,"span",19)(191,"br"),f(192,"strong"),g(193,"Rainy"),h(),D(194,"br")(195,"span",19)(196,"br"),f(197,"strong"),g(198,"Stormy"),h(),D(199,"br")(200,"span",19)(201,"br"),f(202,"strong"),g(203,"Torrid"),h(),D(204,"br")(205,"span",19)(206,"br"),f(207,"strong"),g(208,"Maelstrom"),h(),D(209,"br")(210,"span",19)(211,"br"),f(212,"strong"),g(213,"Snowfall"),h(),D(214,"br")(215,"span",19)(216,"br"),f(217,"strong"),g(218,"Hailstorm"),h(),D(219,"br")(220,"span",19)(221,"br"),f(222,"strong"),g(223,"Ashfall"),h(),D(224,"br")(225,"span",19),h()()(),D(226,"hr"),f(227,"div")(228,"div")(229,"div",7)(230,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswerBreedKeybinds")}),g(231,"+"),h()(),f(232,"div",9)(233,"p"),g(234,"What keybinds or similar shortcuts are there?"),h()()(),f(235,"div",21),D(236,"div",7),f(237,"p"),g(238," Use the left and right arrow keys to quickly jump between barns under the 'Barns' page and between animals under the 'Animals' page. "),D(239,"br"),g(240," Use the ctrl, shift, and alt keys to add multipliers to certain items in the shop to buy them in bulk. "),h()()(),D(241,"hr"),f(242,"div")(243,"div")(244,"div",7)(245,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswerSettings")}),g(246,"+"),h()(),f(247,"div",9)(248,"p"),g(249,"What does each setting do?"),h()()(),f(250,"div",22),D(251,"div",7),f(252,"p")(253,"strong"),g(254,"Auto Skip Race Info"),h(),g(255),D(256,"br")(257,"br"),f(258,"strong"),g(259,"Finish Training Before Switching"),h(),g(260),D(261,"br")(262,"br"),f(263,"strong"),g(264,"Hide Tips"),h(),g(265),D(266,"br")(267,"br"),f(268,"strong"),g(269,"Use Numbers For Circuit Rank"),h(),g(270),D(271,"br")(272,"br"),f(273,"strong"),g(274,"Auto Start Event Race"),h(),g(275),D(276,"br")(277,"br"),f(278,"strong"),g(279,"Race Display Info"),h(),g(280),h()()(),D(281,"hr"),f(282,"div")(283,"div")(284,"div",7)(285,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswerFeedback")}),g(286,"+"),h()(),f(287,"div",9)(288,"p"),g(289,"I'm having an issue with my game or have some feedback, how can I contact you?"),h()()(),f(290,"div",23),D(291,"div",7),f(292,"p"),g(293,"Feel free to use the links at the bottom right or email me at CulturaIdle@gmail.com to get in touch. "),h()()(),D(294,"hr"),h()}if(2&t){const e=w();p(22),Q(" ",e.lookupService.getTrainingBreedGaugeIncrease(0)," XP"),p(4),Q(" ",e.lookupService.getLocalBreedGaugeIncrease()," XP"),p(4),Q(" ",e.lookupService.getCircuitBreedGaugeIncrease()," XP"),p(34),Q(" - ",e.lookupService.getAnimalDescription("Horse")," "),p(4),Q(" - ",e.lookupService.getAnimalDescription("Cheetah")," "),p(4),Q(" - ",e.lookupService.getAnimalDescription("Hare")," "),p(8),Q(" - ",e.lookupService.getAnimalDescription("Monkey")," "),p(4),Q(" - ",e.lookupService.getAnimalDescription("Goat")," "),p(4),Q(" - ",e.lookupService.getAnimalDescription("Gecko")," "),p(4),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("ngClass",e.seeOceanCourseTypeSpoiler?"waterColor":""),p(3),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Dolphin"),""),p(2),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Shark"),""),p(2),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Octopus"),""),p(4),b("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("ngClass",e.seeTundraCourseTypeSpoiler?"tundraColor":""),p(3),b("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("innerHTML",e.globalService.getTundraDescription(),Nt),p(2),b("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Penguin"),""),p(2),b("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Caribou"),""),p(4),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"volcanicColor":""),p(3),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("innerHTML",e.globalService.getVolcanicDescription(),Nt),p(2),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Salamander"),""),p(2),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Fox"),""),p(19),b("innerHTML",e.sunnyTerrainInfo,Nt),p(5),b("innerHTML",e.rainyTerrainInfo,Nt),p(5),b("innerHTML",e.stormyTerrainInfo,Nt),p(5),b("innerHTML",e.torridTerrainInfo,Nt),p(5),b("innerHTML",e.maelstromTerrainInfo,Nt),p(5),b("innerHTML",e.snowfallTerrainInfo,Nt),p(5),b("innerHTML",e.hailstormTerrainInfo,Nt),p(5),b("innerHTML",e.ashfallTerrainInfo,Nt),p(30),Q(" - ",e.lookupService.getSettingDescriptions("Auto Skip Race Info")," "),p(5),Q(" - ",e.lookupService.getSettingDescriptions("Finish Training Before Switching")," "),p(5),Q(" - ",e.lookupService.getSettingDescriptions("Hide Tips")," "),p(5),Q(" - ",e.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank")," "),p(5),Q(" - ",e.lookupService.getSettingDescriptions("Auto Start Event Race")," "),p(5),Q(" - ",e.lookupService.getSettingDescriptions("Race Display Info")," ")}}function Jj(t,i){if(1&t){const e=ge();f(0,"div")(1,"div")(2,"div",7)(3,"button",8),I("click",function(){return B(e),w(2).expandAnswer("faqAnswer4")}),g(4,"+"),h()(),f(5,"div",9)(6,"p"),g(7,"What is the Incubator? How does the Incubator Upgrade item work?"),h()()(),f(8,"div",28),D(9,"div",7),f(10,"p"),g(11,"Once you've successfully completed a Duo Race, you will have access to the Incubator. The Incubator lets you select a trait for an individual animal that lets your customize your stats further. A trait increases one stat and decreases another. As you increase your Research Level by completing Duo Races, you will unlock new traits and increase the amount the traits increase/decrease your stats. Note that traits will only decrease the chosen stat by a maximum of 25%. "),D(12,"br")(13,"br"),g(14," The Incubator Upgrade item gives you even further control over how you build your animals and allows newer animals to quickly catch up to ones of higher breed level. After purchasing this item, every time you breed you will gain a permanent increase to the stat your trait currently is providing you. The increase amount depends on your current Research Level. For example: "),D(15,"br")(16,"br"),g(17," If you have a Research Level of 15 and apply the "),f(18,"span",14),g(19,"Alert"),h(),g(20," trait to your Horse, it will gain 15% "),f(21,"span",14),g(22,"Focus"),h(),g(23," and lose 15% "),f(24,"span",14),g(25,"Endurance"),h(),g(26," through the trait itself. "),D(27,"br"),f(28,"em"),g(29,"If you have Incubator Upgrade Level 1:"),h(),g(30," each time you Breed your Horse, it will gain an additional modifier of .01 to its "),f(31,"span",14),g(32,"Focus"),h(),g(33," stat. 10% of the positive trait value of 15% would come out to .015. Incubator Upgrade Level 1 only allows for the first 10% of your trait value to contribute to the modifier, so you would gain .01. "),D(34,"br"),f(35,"em"),g(36,"If you have Incubator Upgrade Level 2:"),h(),g(37," each time you Breed your Horse, it will gain an additional modifier of .015 to its "),f(38,"span",14),g(39,"Focus"),h(),g(40," stat. 10% of the positive trait value of 15% would come to .015. Incubator Upgrade Level 2 allows for the first 25% of your trait value to contribute to the modifier. Because your trait value is only 15%, it will contribute in its entirety. "),h()(),D(41,"hr"),h()}}function ez(t,i){if(1&t){const e=ge();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswerOverwhelmed")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"I'm overwhelmed -- what am I supposed to be doing? What are all of the different races?"),h()()(),f(9,"div",24),D(10,"div",7),f(11,"p"),g(12,"That's okay! There is a lot of information that comes at you at first. The first thing to understand is that this game has two basic loops at its core: Training/Racing cycles and Breeding cycles. At the beginning, you simply want to make sure your animals are training in a balanced way. Make sure to pay attention to what each animal's diminishing returns value is (20 by default), because after you train a base stat to that point then any further training of that stat becomes progressively weaker. You can keep up with your animal's stats and Diminishing Returns value by viewing any particular animal after clicking 'Animals' in the navigation menu. With that in mind, once you've got at least one animal of each available course type with stats close to their Diminishing Returns value, you're ready to race. When you click on the 'Races' section of the navigation menu, there are a few subsections at the top. Here is what they mean: "),D(13,"br")(14,"br"),f(15,"strong"),g(16,"Circuit Races:"),h(),g(17," Raising your circuit rank as high as possible is your ultimate aim, and completing Circuit Races is the only way to do so. You'll unlock new animals, races, items, and upgrades by doing this. On this page, you also have access to free races which are easier races that provide a smaller amount of coin. Free race difficulty scales with your circuit rank, so if you plan to play a more active playstyle then you may benefit from not speeding through circuit ranks too quickly as you may have trouble completing free races. If you are okay with a more idle play style though, then you can simply complete Circuit Races as you are able to. "),D(18,"br"),f(19,"strong"),g(20,"Special Races:"),h(),g(21," These races types are unlocked as you increase your circuit rank. They work just like Circuit Races in that you have to complete each rank's races before you increase your rank, but they each reward something unique. For example, the Mono Races you unlock at circuit rank 2 increase your animal's Diminishing Returns value. Your rank at any particular Special Race cannot exceed your circuit rank, so as you increase your circuit rank make sure to check back and complete your Special Races as you are able to. "),D(22,"br"),f(23,"strong"),g(24,"Event Races:"),h(),g(25," After reaching circuit rank 13, you have access to the Grand Prix. The Grand Prix is a multi day race that runs in the background where you can easily swap in and out different racers. This race may be difficult for those who are just starting and you are safe to ignore it until you have a handle on everything else. "),D(26,"br"),f(27,"strong"),g(28,"Training Track"),h(),g(29,": At the training track, each animal has the opportunity to race against a number of competitors to gain some Coins and some unique rewards. You'll likely need to raise your breed levels a bit before seeing success here, but do check in after you've played a little while and give it a shot. "),D(30,"br")(31,"br"),g(32," Once you've trained your animals up to their Diminishing Returns value, you've completed Special Races to increase your Diminishing Returns value, and you've pushed your Circuit Rank as high as you can go, that's when you will want to start breeding your animals. There are other FAQ sections dedicated to Breeding so check those out for more information. After Breeding for awhile, you'll go back to training and racing. Cycling between these two flows is key to success in Cultura. Once you start unlocking multiple animals per course type, you can have one set breeding while the others train and race to cut down on wait time. "),h()()(),D(33,"hr"),f(34,"div")(35,"div")(36,"div",7)(37,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswer1")}),g(38,"+"),h()(),f(39,"div",9)(40,"p"),g(41,"I'm stuck early on, how should I progress?"),h()()(),f(42,"div",25),D(43,"div",7),f(44,"p"),g(45,"In the early game, your biggest obstacles will be coins and breed level. Using the Stockbreeder to Auto Breed your animals can give them a big boost in stats. "),f(46,"em"),g(47,"Note that you should typically wait to Breed until you've gotten as far as you can in circuit races as Breeding will reset your base stats to their defaults and require you to train them back up again. "),h(),D(48,"br")(49,"br"),g(50," If you are having a hard time collecting coins, look into buying the Money Mark and Team Managers from the Shop and upgrading your barns to Attractions to build passive income. The Money Mark will add a new competitor to your races (gold colored as opposed to black) that will run 25% faster than the average speed. If you finish the race first, your coin gain will increase by 25%."),D(51,"br"),g(52," Team Managers will automatically run free races for you every reset period, making sure you're getting as much value as possible from free races. "),D(53,"br"),g(54," Attractions require reaching barn level 10 and will take a little longer than buying the Money Mark and Team Manager, but it will provide passive income as long as there is an animal training in the barn. "),D(55,"br")(56,"br"),g(57," Some early game goals to set for yourself are to complete the Novice level training track, buy enough barns to train at least 1 animal of each course type available to you, raise your circuit rank, and make sure you raise your mono rank to match your circuit rank. "),h()()(),D(58,"hr"),f(59,"div")(60,"div")(61,"div",7)(62,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswer2")}),g(63,"+"),h()(),f(64,"div",9)(65,"p"),g(66,"What do team managers do and how do I set auto race?"),h()()(),f(67,"div",26),D(68,"div",7),f(69,"p"),g(70,'After buying a Team Manager from the shop, you\'ll have the ability to set a deck as your "Auto Run Free Race" deck. Once selected, this deck will immediately run free races as soon as the time period resets creating a steady stream of income (assuming you win, of course!). '),D(71,"br")(72,"br"),g(73,' To set a deck as your "Auto Run Free Race" deck, select \'Decks\' on the right and then select the button that says "Auto Run Free Race" by the deck you want to select. Note that this option will not be available until you buy a Team Manager. '),h()()(),D(74,"hr"),f(75,"div")(76,"div")(77,"div",7)(78,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswer3")}),g(79,"+"),h()(),f(80,"div",9)(81,"p"),g(82,"What does upgrading a barn do and how do I specialize my barn?"),h()()(),f(83,"div",27),D(84,"div",7),f(85,"p"),g(86,"After reaching a certain circuit rank, you will gain the ability to upgrade your barns. Every level you upgrade, you gain a multiplier for a particular stat when training. Hovering over your barn level when selecting a barn will show you your current multipliers. Increasing your barn level can be a great way to get you back in the race after breeding. "),D(87,"br")(88,"br"),g(89," At barn level 10, you will instead have the option to specialize. Subsequently, every 10 levels will improve your specialization instead of giving a stat multiplier. The current specialization options are below."),D(90,"br")(91,"br"),f(92,"strong"),g(93),h(),D(94,"br"),f(95,"strong"),g(96),h(),D(97,"br"),f(98,"strong",16),I("click",function(){return B(e),w().viewSpoiler("Attraction Specialization")}),f(99,"span",17),g(100,"View Spoiler"),h(),g(101),h(),D(102,"br"),f(103,"strong",16),I("click",function(){return B(e),w().viewSpoiler("Research Center Specialization")}),f(104,"span",17),g(105,"View Spoiler"),h(),g(106),h()()()(),D(107,"hr"),x(108,Jj,42,0,"div",6),h()}if(2&t){const e=w();p(93),Q("Training Facility - ",e.lookupService.getInDepthSpecializationDescription("Training Facility"),""),p(3),Q("Breeding Grounds - ",e.lookupService.getInDepthSpecializationDescription("Breeding Grounds"),""),p(2),b("ngClass",e.seeAttractionSpoiler?"viewSpoiler":"spoilerText"),p(3),Q(" Attraction - ",e.lookupService.getInDepthSpecializationDescription("Attraction"),""),p(2),b("ngClass",e.seeResearchCenterSpoiler?"viewSpoiler":"spoilerText"),p(3),Q("Research Center - ",e.lookupService.getInDepthSpecializationDescription("Research Center"),""),p(2),b("ngIf",e.lookupService.isItemUnlocked("duoRace"))}}function tz(t,i){if(1&t&&(f(0,"span",14),g(1),h()),2&t){const e=w(2);p(1),Q("",e.renownCoinGain,"% Additional Coins")}}function nz(t,i){if(1&t&&(f(0,"span",14),g(1),h()),2&t){const e=w(2);p(1),Q("",e.renownCoinGain.toFixed(2),"% Additional Coins")}}function iz(t,i){if(1&t&&(f(0,"option",52),g(1),h()),2&t){const e=i.$implicit;b("value",e.type),p(1),Q(" ",e.name,"")}}function rz(t,i){1&t&&(f(0,"option",52),g(1,"Attraction"),h()),2&t&&b("value",3)}function az(t,i){1&t&&(f(0,"option",52),g(1,"Research Center"),h()),2&t&&b("value",4)}function oz(t,i){if(1&t){const e=ge();f(0,"div")(1,"div")(2,"div",7)(3,"button",8),I("click",function(){return B(e),w(2).expandAnswer("faqAnswerIncubatorGrowthCalculator")}),g(4,"+"),h()(),f(5,"div",9)(6,"p"),g(7,"Modifier gain from Incubator Upgrade"),h()()(),f(8,"div",58),D(9,"div",7),f(10,"div",48)(11,"div")(12,"em"),g(13,"Enter a Facility Level and an Incubator Upgrade Level between 1 and 4 to see what the modifier would be on the stat corresponding to the positive trait. This pulls from your current resources by default."),h()(),D(14,"br")(15,"br"),f(16,"div",30)(17,"div",49)(18,"label",59),g(19,"Incubator Upgrade Level:"),h(),f(20,"input",60),I("ngModelChange",function(r){return B(e),w(2).incubatorUpgradeLevel=r}),h(),D(21,"br"),f(22,"label",61),g(23,"Facility Level:"),h(),f(24,"input",62),I("ngModelChange",function(r){return B(e),w(2).facilityLevel=r}),h()(),f(25,"div",34)(26,"span"),g(27,"Result:"),h(),D(28,"br"),f(29,"em")(30,"span",36),g(31),h(),g(32," * .001 with Incubator Upgrade Level "),f(33,"span",63),g(34),h()(),g(35," = "),f(36,"span",14),g(37),h()()()()(),D(38,"hr"),h()}if(2&t){const e=w(2);p(20),b("ngModel",e.incubatorUpgradeLevel),p(4),b("ngModel",e.facilityLevel),p(7),nt(e.facilityLevel),p(3),nt(e.incubatorUpgradeLevel),p(3),Q("*",e.incubatorModifierAmount," to Positive Trait Stat per Breed Level")}}const KR=function(t){return{inactiveCalculation:t}};function sz(t,i){if(1&t){const e=ge();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswerRenownCalculator")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"Coin gain from Renown"),h()()(),f(9,"div",29),D(10,"div",7),f(11,"div")(12,"em"),g(13,"Enter a Renown amount to see what the modifier would be on Coins won from races."),h()(),D(14,"br")(15,"br"),f(16,"div",30)(17,"div",31)(18,"label",32),g(19,"Renown:"),h(),f(20,"input",33),I("ngModelChange",function(r){return B(e),w().coinGainRenownAmount=r}),h()(),f(21,"div",34)(22,"span"),g(23,"Result:"),h(),f(24,"div",35)(25,"em"),g(26,"If Renown <= 50: "),f(27,"span",36),g(28),h()(),g(29," = "),x(30,tz,2,1,"span",37),h(),D(31,"br"),f(32,"div",35)(33,"em"),g(34,"If Renown > 50: 500 * log(.0035 * - ("),f(35,"span",36),g(36),h(),g(37," - 50) + 1) + 50 "),h(),g(38," = "),x(39,nz,2,1,"span",37),h()()()()(),D(40,"hr"),f(41,"div")(42,"div")(43,"div",7)(44,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswerTrainingBreedXpCalculator")}),g(45,"+"),h()(),f(46,"div",9)(47,"p"),g(48,"Breed XP gain from Training"),h()()(),f(49,"div",38),D(50,"div",7),f(51,"div")(52,"em"),g(53,"Select an animal or enter your own values to see how much Breed XP you would gain from completing a single training. Selecting an animal pulls from their current bonuses."),h()(),D(54,"br")(55,"br"),f(56,"div",30)(57,"div",31)(58,"div",39)(59,"label",40),g(60,"Animal:"),h(),f(61,"select",41),I("ngModelChange",function(r){return B(e),w().selectedAnimalType=r})("change",function(){return B(e),w().newAnimalSelected()}),x(62,iz,2,2,"option",42),h()(),f(63,"em"),g(64,"or"),h(),f(65,"div")(66,"label",43),g(67,"Bonus Training Breed XP:"),h(),f(68,"input",44),I("change",function(){return B(e),w().animalNotSelected()})("ngModelChange",function(r){return B(e),w().bonusBreedXp=r}),h(),D(69,"br"),f(70,"label",45),g(71,"Breeding Grounds Specialization Level:"),h(),f(72,"input",46),I("ngModelChange",function(r){return B(e),w().breedingGroundsSpecializationLevel=r}),h()()(),f(73,"div",34)(74,"span"),g(75,"Result:"),h(),D(76,"br"),f(77,"em"),g(78,"(5 + "),f(79,"span",14),g(80),h(),g(81,") * (1 + "),f(82,"span",14),g(83),h(),g(84," * .1) "),h(),g(85," = "),f(86,"span",14),g(87),h()()()()(),D(88,"hr"),f(89,"div")(90,"div")(91,"div",7)(92,"button",8),I("click",function(){return B(e),w().expandAnswer("faqAnswerBarnSpecializationGainCalculator")}),g(93,"+"),h()(),f(94,"div",9)(95,"p"),g(96,"Barn Specialization Calculator"),h()()(),f(97,"div",47),D(98,"div",7),f(99,"div",48)(100,"div")(101,"em"),g(102,"Select a Specialization Type and enter the Barn Upgrade Level or Specialization Level to see what impact that specialization would have. Specialization Level corresponds Barn Upgrade Level * 10 because your specialization improves every 10 barn upgrade levels."),h()(),D(103,"br")(104,"br"),f(105,"div",30)(106,"div",49)(107,"label",50),g(108,"Specialization:"),h(),f(109,"select",51),I("ngModelChange",function(r){return B(e),w().selectedSpecialization=r}),f(110,"option",52),g(111,"Breeding Grounds"),h(),f(112,"option",52),g(113,"Training Facility"),h(),x(114,rz,2,1,"option",53),x(115,az,2,1,"option",53),h(),D(116,"br")(117,"br"),f(118,"div")(119,"label",54),g(120,"Barn Upgrade Level:"),h(),f(121,"input",55),I("change",function(){return B(e),w().changeBarnUpgradeLevel()})("ngModelChange",function(r){return B(e),w().barnUpgradeLevel=r}),h(),D(122,"br"),f(123,"em"),g(124,"or"),h(),D(125,"br"),f(126,"label",56),g(127,"Barn Specialization Level:"),h(),f(128,"input",57),I("change",function(){return B(e),w().changeBarnSpecializationLevel()})("ngModelChange",function(r){return B(e),w().barnSpecializationLevel=r}),h()()(),f(129,"div",34)(130,"span"),g(131,"Result:"),h(),D(132,"br")(133,"span",19),h()()()()(),D(134,"hr"),x(135,oz,39,5,"div",6),h()}if(2&t){const e=w();p(20),b("ngModel",e.coinGainRenownAmount),p(4),b("ngClass",ri(23,KR,e.coinGainRenownAmount>50)),p(4),nt(e.coinGainRenownAmount),p(2),b("ngIf",e.coinGainRenownAmount<=50),p(2),b("ngClass",ri(25,KR,e.coinGainRenownAmount<=50)),p(4),nt(e.coinGainRenownAmount),p(3),b("ngIf",e.coinGainRenownAmount>50),p(22),b("ngModel",e.selectedAnimalType),p(1),b("ngForOf",e.availableAnimals),p(6),b("ngModel",e.bonusBreedXp),p(4),b("ngModel",e.breedingGroundsSpecializationLevel),p(8),nt(e.bonusBreedXp),p(3),nt(e.breedingGroundsSpecializationLevel),p(4),Q("",e.trainingBreedXpGain," XP gained after completing any Training"),p(22),b("ngModel",e.selectedSpecialization),p(1),b("value",1),p(2),b("value",2),p(2),b("ngIf",e.seeAttractionSpoiler),p(1),b("ngIf",e.seeResearchCenterSpoiler),p(6),b("ngModel",e.barnUpgradeLevel),p(7),b("ngModel",e.barnSpecializationLevel),p(5),b("innerHTML",e.barnSpecializationLevelAmount,Nt),p(2),b("ngIf",e.lookupService.isItemUnlocked("duoRace"))}}let lz=(()=>{class t{constructor(e,n,r,a,o){this.componentCommunicationService=e,this.lookupService=n,this.gameLoopService=r,this.globalService=a,this.specializationService=o,this.seeAttractionSpoiler=!1,this.seeResearchCenterSpoiler=!1,this.seeOceanCourseTypeSpoiler=!1,this.seeTundraCourseTypeSpoiler=!1,this.seeVolcanicCourseTypeSpoiler=!1,this.currentSection=xu.basics,this.faqSectionsEnum=xu,this.sunnyTerrainInfo="",this.stormyTerrainInfo="",this.rainyTerrainInfo="",this.snowfallTerrainInfo="",this.ashfallTerrainInfo="",this.maelstromTerrainInfo="",this.hailstormTerrainInfo="",this.torridTerrainInfo="",this.coinGainRenownAmount=0,this.facilityLevel=0,this.incubatorUpgradeLevel=0,this.selectedAnimalType=0,this.animalSelected=!0,this.availableAnimals=[],this.bonusBreedXp=0,this.breedingGroundsSpecializationLevel=0,this.selectedSpecialization=1,this.barnUpgradeLevel=0,this.barnSpecializationLevel=0,this.renownCoinGain=0,this.incubatorModifierAmount=0,this.trainingBreedXpGain=0,this.barnSpecializationLevelAmount=""}ngOnInit(){var n,r,a,e=this;this.componentCommunicationService.setNewView(mt.faqs),this.lookupService.isItemUnlocked("attractionSpecialization")&&(this.seeAttractionSpoiler=!0),this.lookupService.isItemUnlocked("researchCenterSpecialization")&&(this.seeResearchCenterSpoiler=!0),(null===(n=this.globalService.globalVar.animals.find(u=>u.type===X.Dolphin))||void 0===n?void 0:n.isAvailable)&&(this.seeOceanCourseTypeSpoiler=!0),(null===(r=this.globalService.globalVar.animals.find(u=>u.type===X.Penguin))||void 0===r?void 0:r.isAvailable)&&(this.seeTundraCourseTypeSpoiler=!0),(null===(a=this.globalService.globalVar.animals.find(u=>u.type===X.Salamander))||void 0===a?void 0:a.isAvailable)&&(this.seeVolcanicCourseTypeSpoiler=!0),this.sunnyTerrainInfo=this.lookupService.getTerrainPopoverText(new ai(ze.Sunny)),this.stormyTerrainInfo=this.lookupService.getTerrainPopoverText(new ai(ze.Stormy)),this.rainyTerrainInfo=this.lookupService.getTerrainPopoverText(new ai(ze.Rainy)),this.torridTerrainInfo=this.lookupService.getTerrainPopoverText(new ai(ze.Torrid)),this.maelstromTerrainInfo=this.lookupService.getTerrainPopoverText(new ai(ze.Maelstrom)),this.hailstormTerrainInfo=this.lookupService.getTerrainPopoverText(new ai(ze.Hailstorm)),this.ashfallTerrainInfo=this.lookupService.getTerrainPopoverText(new ai(ze.Ashfall)),this.snowfallTerrainInfo=this.lookupService.getTerrainPopoverText(new ai(ze.Snowfall)),this.availableAnimals=this.globalService.globalVar.animals.filter(u=>u.isAvailable),this.coinGainRenownAmount=this.lookupService.getRenown(),this.facilityLevel=this.lookupService.getFacilityLevel();var o=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv1"===u.name),s=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv2"===u.name),l=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv3"===u.name),c=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv4"===u.name);null!=o&&(this.incubatorUpgradeLevel=1),null!=s&&(this.incubatorUpgradeLevel=2),null!=l&&(this.incubatorUpgradeLevel=3),null!=c&&(this.incubatorUpgradeLevel=4),this.newAnimalSelected(),this.calculatorSubscription=this.gameLoopService.gameUpdateEvent.subscribe(ar(function*(){e.handleRenownModifierCalculation(),e.handleIncubatorModifierCalculation(),e.handleTrainingBreedXpGainCalculation(),e.handleBarnSpecializationLevelAmountCalculation()}))}handleRenownModifierCalculation(){null!=this.coinGainRenownAmount&&(this.renownCoinGain=this.lookupService.getRenownCoinModifier(this.coinGainRenownAmount,!0))}handleIncubatorModifierCalculation(){if(null!=this.incubatorUpgradeLevel&&null!=this.facilityLevel){var r=0,e=.001,n=this.globalService.globalVar.modifiers.find(a=>"incubatorUpgradeIncreaseModifier"===a.text);null!=n&&(e=n.value),r=this.facilityLevel*e,isNaN(this.incubatorUpgradeLevel)||(this.incubatorUpgradeLevel=+this.incubatorUpgradeLevel),this.incubatorUpgradeLevel>=4?(r>.1&&(r=.1),this.incubatorUpgradeLevel=4):3===this.incubatorUpgradeLevel?r>.05&&(r=.05):2===this.incubatorUpgradeLevel?r>.025&&(r=.025):1===this.incubatorUpgradeLevel?r>.01&&(r=.01):this.incubatorUpgradeLevel<=0&&(r=0),this.incubatorModifierAmount=Math.round(1e3*r)/1e3}}handleTrainingBreedXpGainCalculation(){var e=new Dt;e.miscStats.bonusBreedXpGainFromTraining=this.bonusBreedXp,this.trainingBreedXpGain=this.lookupService.getTrainingBreedGaugeIncrease(this.breedingGroundsSpecializationLevel,e)}newAnimalSelected(){this.animalSelected=!0;var e=void 0;if(null!=this.selectedAnimalType&&void 0!==(e=this.globalService.globalVar.animals.find(r=>r.getAnimalType()===X[this.selectedAnimalType]))){if(this.bonusBreedXp=e.miscStats.bonusBreedXpGainFromTraining,e.associatedBarnNumber>=0)var n=this.globalService.globalVar.barns.find(r=>r.barnNumber===(null==e?void 0:e.associatedBarnNumber));void 0!==n&&n.barnUpgrades.specialization===jt.BreedingGrounds&&(this.breedingGroundsSpecializationLevel=n.barnUpgrades.specializationLevel)}}animalNotSelected(){this.animalSelected=!1}handleBarnSpecializationLevelAmountCalculation(){1==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(jt.BreedingGrounds,this.barnSpecializationLevel):2==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(jt.TrainingFacility,this.barnSpecializationLevel):3==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(jt.Attraction,this.barnSpecializationLevel):4==+this.selectedSpecialization&&(this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(jt.ResearchCenter,this.barnSpecializationLevel))}changeBarnUpgradeLevel(){this.barnSpecializationLevel=Math.floor(this.barnUpgradeLevel/10)}changeBarnSpecializationLevel(){this.barnUpgradeLevel=10*this.barnSpecializationLevel}viewSpoiler(e){"Attraction Specialization"===e&&(this.seeAttractionSpoiler=!0),"Research Center Specialization"===e&&(this.seeResearchCenterSpoiler=!0),"Ocean Course Type"===e&&(this.seeOceanCourseTypeSpoiler=!0),"Tundra Course Type"===e&&(this.seeTundraCourseTypeSpoiler=!0),"Volcanic Course Type"===e&&(this.seeVolcanicCourseTypeSpoiler=!0)}expandAnswer(e){var n=document.getElementById(e);null!=n&&n.classList.toggle("hide")}changeSection(e){this.currentSection=e}ngOnDestroy(){null!=this.calculatorSubscription&&this.calculatorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(A(Zn),A(hn),A(_i),A(Rt),A(Yv))},t.\u0275cmp=dt({type:t,selectors:[["app-faq-view"]],decls:21,vars:6,consts:[[1,"faqView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"subsections","s4Heading"],[1,"subsectionOption","buttonAsText",3,"ngClass","click"],[4,"ngIf"],[1,"expanderMargin"],["type","button","aria-label","Expand",3,"click"],[1,"faqQuestion"],["id","faqAnswerBreedGuide",1,"faqAnswer","hide"],["id","faqAnswerBreedBarnRows",1,"faqAnswer","hide"],["id","faqAnswerAllAnimals",1,"faqAnswer","hide"],[1,"flatlandColor","keyword"],[1,"keyword"],[1,"mountainColor","keyword"],[3,"ngClass","click"],[1,"hidden"],[1,"keyword",3,"ngClass"],[3,"innerHTML"],["id","faqAnswerTerrain",1,"faqAnswer","hide"],["id","faqAnswerBreedKeybinds",1,"faqAnswer","hide"],["id","faqAnswerSettings",1,"faqAnswer","hide"],["id","faqAnswerFeedback",1,"faqAnswer","hide"],["id","faqAnswerOverwhelmed",1,"faqAnswer","hide"],["id","faqAnswer1",1,"faqAnswer","hide"],["id","faqAnswer2",1,"faqAnswer","hide"],["id","faqAnswer3",1,"faqAnswer","hide"],["id","faqAnswer4",1,"faqAnswer","hide"],["id","faqAnswerRenownCalculator",1,"faqAnswer","hide"],[1,"inputsAndResult"],[1,"mb-3","inputs"],["for","renown-amount",1,"shortLabelMargin","progressionKeyword"],["id","renown-amount","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"result"],[3,"ngClass"],[1,"progressionKeyword"],["class","keyword",4,"ngIf"],["id","faqAnswerTrainingBreedXpCalculator",1,"faqAnswer","hide"],[1,"dropdownSelection"],["for","breed-xp-animal",1,"keyword"],["name","breed-xp-animal","id","breed-xp-animal",1,"spaced",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","bonus-breed-xp",1,"longLabelMargin","keyword"],["id","bonus-breed-xp","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","breeding-grounds-spec-level",1,"longLabelMargin","keyword"],["id","breeding-grounds-spec-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["id","faqAnswerBarnSpecializationGainCalculator",1,"faqAnswer","hide"],[1,"mb-3"],[1,"inputs"],["for","specialization-options",1,"keyword"],["name","specialization-options","id","specialization-options",1,"spaced",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngIf"],["for","barn-upgrade-level",1,"labelMargin","keyword"],["id","barn-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","barn-specialization-level",1,"labelMargin","keyword"],["id","barn-specialization-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["id","faqAnswerIncubatorGrowthCalculator",1,"faqAnswer","hide"],["for","incubator-upgrade-level",1,"labelMargin","specialtyKeyword"],["id","incubator-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["for","facility-level",1,"labelMargin","progressionKeyword"],["id","facility-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"specialtyKeyword"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Frequently Asked Questions"),h(),f(6,"em"),g(7,"This FAQ and game is still a work in progress! Bear with me if certain features aren't fully fleshed out and developed yet. If you have any feedback at all, please let me know using one of the links on the bottom right. Thank you so much for playing and hope you're enjoying it!"),h()(),D(8,"br"),f(9,"div",4)(10,"button",5),I("click",function(){return n.changeSection(n.faqSectionsEnum.basics)}),g(11,"Basics"),h(),f(12,"button",5),I("click",function(){return n.changeSection(n.faqSectionsEnum.progression)}),g(13,"Progression"),h(),f(14,"button",5),I("click",function(){return n.changeSection(n.faqSectionsEnum.calculators)}),g(15,"Calculators"),h()(),D(16,"hr")(17,"br"),x(18,Zj,295,47,"div",6),x(19,ez,109,7,"div",6),x(20,sz,136,27,"div",6),h()()()),2&e&&(p(10),b("ngClass",n.currentSection===n.faqSectionsEnum.basics?"active":""),p(2),b("ngClass",n.currentSection===n.faqSectionsEnum.progression?"active":""),p(2),b("ngClass",n.currentSection===n.faqSectionsEnum.calculators?"active":""),p(4),b("ngIf",n.currentSection===n.faqSectionsEnum.basics),p(1),b("ngIf",n.currentSection===n.faqSectionsEnum.progression),p(1),b("ngIf",n.currentSection===n.faqSectionsEnum.calculators))},directives:[Hn,an,av,rs,Kc,yl,Cl,Eh,Yn,YS,KS],styles:['.faqView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}.faqQuestion[_ngcontent-%COMP%]{display:inline-block;width:95%;font-weight:700}.hide[_ngcontent-%COMP%]{display:none}.expanderMargin[_ngcontent-%COMP%]{display:inline-block;width:5%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.inputsAndResult[_ngcontent-%COMP%]{display:flex}.inactiveCalculation[_ngcontent-%COMP%]{opacity:.5}.inputs[_ngcontent-%COMP%], .results[_ngcontent-%COMP%]{width:50%}.spoilerText[_ngcontent-%COMP%]{background-color:gray;color:transparent;-webkit-user-select:none;user-select:none;position:relative;display:inline-block;min-width:8rem}.spoilerText[_ngcontent-%COMP%]:hover > .hidden[_ngcontent-%COMP%]{display:block;color:#fff}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.shortLabelMargin[_ngcontent-%COMP%]{min-width:15%}.labelMargin[_ngcontent-%COMP%]{min-width:25%}.longLabelMargin[_ngcontent-%COMP%]{min-width:40%}.hidden[_ngcontent-%COMP%]{display:none;position:absolute}.subsections[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.viewSpoiler[_ngcontent-%COMP%]{background-color:inherit;color:inherit}@media (max-width: 800px){.expanderMargin[_ngcontent-%COMP%]{width:auto;margin-right:1rem}.faqQuestion[_ngcontent-%COMP%]{width:auto}}']}),t})(),cz=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n}ngOnInit(){this.componentCommunicationService.setNewView(mt.stats),this.trackedStats=this.globalService.globalVar.trackedStats;var e=0;this.globalService.globalVar.animals.forEach(n=>{n.totalRacesRun>e&&(e=n.totalRacesRun,this.mostUsedAnimal=n.name,this.mostUsedAnimalCount=e)})}getColorClass(e){if(null!=e&&e.length>0){var n=this.globalService.globalVar.animals.filter(o=>o.isAvailable),r=new Dt;return n.forEach(o=>{e.includes(o.name)&&(r=o)}),{flatlandColor:"Flatland"===r.getRaceCourseType(),mountainColor:"Mountain"===r.getRaceCourseType(),waterColor:"Ocean"===r.getRaceCourseType(),tundraColor:"Tundra"===r.getRaceCourseType(),volcanicColor:"Volcanic"===r.getRaceCourseType()}}return{}}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(Zn))},t.\u0275cmp=dt({type:t,selectors:[["app-stats-view"]],decls:37,vars:34,consts:[[1,"statsView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"coloredText",3,"ngClass"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"Stats"),h(),D(5,"br")(6,"br"),g(7),Vt(8,"number"),D(9,"br"),g(10),Vt(11,"number"),D(12,"br"),g(13),Vt(14,"number"),D(15,"br"),f(16,"span",4),g(17),Vt(18,"number"),h(),D(19,"br"),f(20,"span",4),g(21),h(),D(22,"br"),f(23,"span",4),g(24),h(),D(25,"br"),f(26,"span",4),g(27),h(),D(28,"br"),f(29,"span",4),g(30),h(),D(31,"br"),f(32,"span",4),g(33),h(),D(34,"br"),f(35,"span",4),g(36),h()()()()),2&e&&(p(7),Q(" Total Races: ",Fc(8,18,n.trackedStats.totalRaces,"1.0","en-US")," "),p(3),Q(" Total Meters Covered: ",Fc(11,22,n.trackedStats.totalMetersRaced.toFixed(0),"1.0","en-US")," "),p(3),Q(" Total Breeds: ",Fc(14,26,n.trackedStats.totalBreeds,"1.0","en-US")," "),p(3),b("ngClass",n.getColorClass(n.mostUsedAnimal)),p(1),Wn("Most Used Animal: ",n.mostUsedAnimal," (",Fc(18,30,n.mostUsedAnimalCount,"1.0","en-US"),")"),p(3),b("ngClass",n.getColorClass(n.trackedStats.highestMaxSpeed)),p(1),Q("Highest Max Speed: ",n.trackedStats.highestMaxSpeed,""),p(2),b("ngClass",n.getColorClass(n.trackedStats.highestAccelerationRate)),p(1),Q("Highest Acceleration Rate: ",n.trackedStats.highestAccelerationRate,""),p(2),b("ngClass",n.getColorClass(n.trackedStats.highestStamina)),p(1),Q("Highest Stamina: ",n.trackedStats.highestStamina,""),p(2),b("ngClass",n.getColorClass(n.trackedStats.highestPowerEfficiency)),p(1),Q("Highest Power Efficiency: ",n.trackedStats.highestPowerEfficiency,""),p(2),b("ngClass",n.getColorClass(n.trackedStats.highestFocusDistance)),p(1),Q("Highest Focus Distance: ",n.trackedStats.highestFocusDistance,""),p(2),b("ngClass",n.getColorClass(n.trackedStats.highestAdaptabilityDistance)),p(1),Q("Highest Adaptability Distance: ",n.trackedStats.highestAdaptabilityDistance,""))},directives:[Hn],pipes:[no],styles:['.statsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}']}),t})();function uz(t,i){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=w().$implicit,n=w();p(1),b("innerHTML",n.getPopover(e.name,e.itemType),Nt)}}function dz(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",8),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,uz,2,1,"ng-template",null,11,ot),h()),2&t){const e=i.$implicit,n=at(8);p(1),b("ngbPopover",n),p(2),nt(e.name),p(2),Q(" x ",e.amount,"")}}function hz(t,i){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=w().$implicit,n=w();p(1),b("innerHTML",n.getPopover(e.name,e.itemType),Nt)}}function fz(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",14),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,hz,2,1,"ng-template",null,15,ot),h()),2&t){const e=i.$implicit,n=at(8);p(1),b("ngbPopover",n),p(2),nt(e.name),p(2),Q(" x ",e.amount,"")}}function pz(t,i){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=w().$implicit,n=w();p(1),b("innerHTML",n.getPopover(e.name,e.itemType),Nt)}}function gz(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",16),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,pz,2,1,"ng-template",null,17,ot),h()),2&t){const e=i.$implicit,n=at(8);p(1),b("ngbPopover",n),p(2),nt(e.name),p(2),Q(" x ",e.amount,"")}}function mz(t,i){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=w().$implicit,n=w();p(1),b("innerHTML",n.getPopover(e.name,e.itemType),Nt)}}function vz(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",18),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,mz,2,1,"ng-template",null,19,ot),h()),2&t){const e=i.$implicit,n=at(8);p(1),b("ngbPopover",n),p(2),nt(e.name),p(2),Q(" x ",e.amount,"")}}let bz=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.componentCommunicationService=r,this.utilityService=a,this.resources=[],this.equipment=[],this.specialtyItems=[],this.progressionResources=[]}ngOnInit(){this.componentCommunicationService.setNewView(mt.resources),this.resources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Food||e.itemType===Y.Resources).sort(),this.equipment=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Equipment).sort(),this.specialtyItems=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Specialty).sort(),this.progressionResources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Progression).sort()}getPopover(e,n){return this.utilityService.getSanitizedHtml(this.lookupService.getResourcePopover(e,n))}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(hn),A(Zn),A(Ri))},t.\u0275cmp=dt({type:t,selectors:[["app-resources-view"]],decls:21,vars:4,consts:[[1,"resourcesView","gridContainer"],[1,"resources"],[1,"s4Heading","centered"],[4,"ngFor","ngForOf"],[1,"progression"],[1,"specialty"],[1,"equipment"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"screenMarginLeft",3,"ngbPopover"],[1,"resourceKeyword"],[1,"rightAligned"],[1,"miniHr"],["resourceContent",""],[1,"popoverClass"],[3,"innerHTML"],[1,"progressionKeyword"],["progressionContent",""],[1,"specialtyKeyword"],["specialityContent",""],[1,"equipmentKeyword"],["equipmentContent",""]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2),g(3,"Resources"),h(),D(4,"br"),x(5,dz,9,3,"p",3),h(),f(6,"div",4)(7,"div",2),g(8,"Progression"),h(),D(9,"br"),x(10,fz,9,3,"p",3),h(),f(11,"div",5)(12,"div",2),g(13,"Specialty"),h(),D(14,"br"),x(15,gz,9,3,"p",3),h(),f(16,"div",6)(17,"div",2),g(18,"Equipment"),h(),D(19,"br"),x(20,vz,9,3,"p",3),h()()),2&e&&(p(5),b("ngForOf",n.resources),p(5),b("ngForOf",n.progressionResources),p(5),b("ngForOf",n.specialtyItems),p(5),b("ngForOf",n.equipment))},directives:[Yn,Or],styles:['.resources[_ngcontent-%COMP%]{white-space:pre}.resourcesView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:25%;grid-template-rows:100%;justify-content:stretch;grid-template-areas:"resources progression specialty equipment"}.resources[_ngcontent-%COMP%]{grid-area:resources;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.progression[_ngcontent-%COMP%]{grid-area:progression;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.specialty[_ngcontent-%COMP%]{grid-area:specialty;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.equipment[_ngcontent-%COMP%]{grid-area:equipment;background-color:var(--background-secondary)}.rightAligned[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto auto;justify-content:stretch;grid-template-areas:"resources" "progression" "specialty" "equipment"}}']}),t})();var Ul=q(7206);let _z=(()=>{class t{constructor(e){this.globalService=e}redeemCode(e){var r=Ul.AES.decrypt(e,"LaunchSecret!CLTRA71");0===r.toString(Ul.enc.Utf8).length&&alert("Invalid code entered.");try{var a=JSON.parse(r.toString(Ul.enc.Utf8));null!=a&&a.rewards.length>0&&((new Date).getTime()>new Date(a.expirationDate).getTime()?alert("This code has expired."):this.globalService.globalVar.redeemedCodes.some(o=>o.codeValue===r.toString(Ul.enc.Utf8))?alert("This code has already been redeemed."):(a.rewards.forEach(o=>{var s=this.globalService.globalVar.resources.find(l=>l.name===o.name);null!=s?s.amount+=o.amount:this.globalService.globalVar.resources.push(o)}),a.codeValue=r.toString(Ul.enc.Utf8),this.globalService.globalVar.redeemedCodes.push(a)))}catch(o){alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}}}return t.\u0275fac=function(e){return new(e||t)(Le(Rt))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),yz=(()=>{class t{constructor(e){this.lookupService=e}setupRewards(){this.redeemableCode=new nf,this.redeemableCode.expirationDate=new Date("2022-09-01"),this.redeemableCode.rewards.push(this.lookupService.gainMangoes(10)),this.redeemableCode.rewards.push(this.lookupService.gainCoins(1e4)),this.redeemableCode.rewards.push(this.lookupService.gainTokens(5))}createCode(){this.setupRewards();var n=JSON.stringify(this.redeemableCode);return Ul.AES.encrypt(n,"LaunchSecret!CLTRA71").toString()}}return t.\u0275fac=function(e){return new(e||t)(Le(hn))},t.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wz=(()=>{class t{constructor(e,n,r,a,o,s,l,c,u){this.globalService=e,this.themeService=n,this.lookupService=r,this.codeRedemptionService=a,this.codeCreationService=o,this.deploymentService=s,this.componentCommunicationService=l,this.versionControlService=c,this.utilityService=u,this.raceDisplayInfoEnum=Kr,this.skipDrawRaceToggle=()=>{this.skipDrawRace=!this.skipDrawRace,this.globalService.globalVar.settings.set("skipDrawRace",this.skipDrawRace)},this.finishTrainingBeforeSwitchingToggle=()=>{this.finishTrainingBeforeSwitching=!this.finishTrainingBeforeSwitching,this.globalService.globalVar.settings.set("finishTrainingBeforeSwitching",this.finishTrainingBeforeSwitching)},this.hideTipsToggle=()=>{this.hideTips=!this.hideTips,this.globalService.globalVar.settings.set("hideTips",this.hideTips)},this.useNumbersForCircuitRankToggle=()=>{this.useNumbersForCircuitRank=!this.useNumbersForCircuitRank,this.globalService.globalVar.settings.set("useNumbersForCircuitRank",this.useNumbersForCircuitRank)},this.autoStartEventRaceToggle=()=>{this.autoStartEventRace=!this.autoStartEventRace,this.globalService.globalVar.settings.set("autoStartEventRace",this.autoStartEventRace)}}ngOnInit(){this.componentCommunicationService.setNewView(mt.settings),this.deploymentService.codeCreationMode&&console.log(this.codeCreationService.createCode()),this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1);var e=this.globalService.globalVar.settings.get("skipDrawRace");this.skipDrawRace=void 0!==e&&e,this.skipDrawRacePopoverText=this.lookupService.getSettingDescriptions("Auto Skip Race Info");var n=this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching");this.finishTrainingBeforeSwitching=void 0!==n&&n,this.finishTrainingBeforeSwitchingPopoverText=this.lookupService.getSettingDescriptions("Finish Training Before Switching");var r=this.globalService.globalVar.settings.get("raceDisplayInfo");this.raceDisplayInfo=this.getRaceDisplayInfoName(void 0===r?Kr.both:r),this.raceDisplayInfoPopoverText=this.lookupService.getSettingDescriptions("Race Display Info");var a=this.globalService.globalVar.settings.get("hideTips");this.hideTips=void 0!==a&&a,this.hideTipsPopoverText=this.lookupService.getSettingDescriptions("Hide Tips");var o=this.globalService.globalVar.settings.get("useNumbersForCircuitRank");this.useNumbersForCircuitRank=void 0!==o&&o,this.useNumbersForCircuitRankPopoverText=this.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank");var s=this.globalService.globalVar.settings.get("autoStartEventRace");this.autoStartEventRace=void 0!==s&&s,this.autoStartEventRacePopoverText=this.lookupService.getSettingDescriptions("Auto Start Event Race")}SaveGame(){var e=JSON.stringify(this.globalService.globalVar),n=LZString.compressToBase64(e);this.importExportValue=n}LoadGame(){if(confirm("This will overwrite your existing game data. Continue?")){var e=LZString.decompressFromBase64(this.importExportValue),n=JSON.parse(e);null!=n&&(this.globalService.globalVar=bD(Gn,n),this.versionControlService.updatePlayerVersion())}}saveRaceDisplayInfo(){this.globalService.globalVar.settings.set("raceDisplayInfo",this.raceDisplayInfo)}changeRaceDisplayInfo(e){this.globalService.globalVar.settings.set("raceDisplayInfo",e),this.raceDisplayInfo=this.getRaceDisplayInfoName(e)}changeTheme(e){var n=fu;"White"===e&&(n=this.themeService.setWhiteTheme()),"Light"===e&&(n=this.themeService.setLightTheme()),"Twilight"===e&&(n=this.themeService.setTwilightTheme()),"Night"===e&&(n=this.themeService.setNightTheme()),this.globalService.globalVar.settings.set("theme",n),this.getThemeName()}getThemeName(){this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1)}getRaceDisplayInfoName(e){return e===Kr.both?"Both":e===Kr.text?"Text":e===Kr.draw?"Draw":""}enterRedemptionCode(){this.codeRedemptionService.redeemCode(this.enteredRedemptionCode)}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(kl),A(hn),A(_z),A(yz),A(_D),A(Zn),A(Kv),A(Ri))},t.\u0275cmp=dt({type:t,selectors:[["app-settings-view"]],decls:91,vars:15,consts:[[1,"settingsView"],[1,"info"],[1,"settingsGrid"],[1,"options"],[1,"s4Heading"],[1,"toggles"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","finishTraining",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","hideTips",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","useNumbersForCircuitRank",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","autoStartEventRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave","ngbDropdown","",1,"d-inline-block",3,"ngbPopover"],[1,"bottomAligned"],["type","button","id","raceDisplayInfoDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","raceDisplayInfoDropdown"],["ngbDropdownItem","",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","themeDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","themeDropdown"],[1,"saveLoad"],[1,"importExportDiv"],["id","importExport","name","importExport","rows","10",3,"ngModel","ngModelChange"],[1,"importExportButtons"],[3,"click"],[1,"codeRedemption"],["for","codeRedemptionText"],["id","codeRedemptionText","type","text",1,"spaced","codeRedemptionInput",3,"ngModel","ngModelChange"],[1,"screenMarginLeft",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"h2"),g(3,"Settings"),h()(),f(4,"div",2)(5,"div",3)(6,"span",4),g(7,"Options"),h(),D(8,"br"),f(9,"div",5)(10,"span",6)(11,"label")(12,"input",7),I("ngModelChange",function(a){return n.skipDrawRace=a})("input",function(){return n.skipDrawRaceToggle()}),h(),f(13,"span"),g(14,"Auto Skip Race Info"),h()()(),D(15,"br"),f(16,"span",6)(17,"label")(18,"input",8),I("ngModelChange",function(a){return n.finishTrainingBeforeSwitching=a})("input",function(){return n.finishTrainingBeforeSwitchingToggle()}),h(),f(19,"span"),g(20,"Finish Training Before Switching "),h()()(),D(21,"br"),f(22,"span",6)(23,"label")(24,"input",9),I("ngModelChange",function(a){return n.hideTips=a})("input",function(){return n.hideTipsToggle()}),h(),f(25,"span"),g(26,"Hide Tips"),h()()(),D(27,"br"),f(28,"span",6)(29,"label")(30,"input",10),I("ngModelChange",function(a){return n.useNumbersForCircuitRank=a})("input",function(){return n.useNumbersForCircuitRankToggle()}),h(),f(31,"span"),g(32,"Use Numbers For Circuit Rank"),h()()(),D(33,"br"),f(34,"span",6)(35,"label")(36,"input",11),I("ngModelChange",function(a){return n.autoStartEventRace=a})("input",function(){return n.autoStartEventRaceToggle()}),h(),f(37,"span"),g(38,"Auto Start Event Race"),h()()(),D(39,"br"),h(),f(40,"div",12)(41,"label",13),g(42,"Race Display Info:"),h(),f(43,"button",14),g(44),h(),f(45,"div",15)(46,"button",16),I("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.draw)}),g(47,"Draw"),h(),f(48,"button",16),I("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.text)}),g(49,"Text"),h(),f(50,"button",16),I("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.both)}),g(51,"Both"),h()()(),D(52,"br"),f(53,"div",17)(54,"label",13),g(55,"Theme:"),h(),f(56,"button",18),g(57),h(),f(58,"div",19)(59,"button",16),I("click",function(){return n.changeTheme("White")}),g(60,"White"),h(),f(61,"button",16),I("click",function(){return n.changeTheme("Light")}),g(62,"Light"),h(),f(63,"button",16),I("click",function(){return n.changeTheme("Twilight")}),g(64,"Twilight"),h(),f(65,"button",16),I("click",function(){return n.changeTheme("Night")}),g(66,"Night"),h()()()(),f(67,"div",20)(68,"span",4),g(69,"Save/Load"),h(),D(70,"br"),f(71,"div",21)(72,"textarea",22),I("ngModelChange",function(a){return n.importExportValue=a}),h(),f(73,"div",23)(74,"button",24),I("click",function(){return n.LoadGame()}),g(75," Import "),h(),f(76,"button",24),I("click",function(){return n.SaveGame()}),g(77," Export "),h()()(),D(78,"br")(79,"br"),f(80,"div")(81,"span",4),g(82,"Code Redemption"),h(),D(83,"br")(84,"br"),f(85,"div",25)(86,"label",26),g(87,"Code: "),h(),f(88,"input",27),I("ngModelChange",function(a){return n.enteredRedemptionCode=a}),h(),f(89,"button",28),I("click",function(){return n.enterRedemptionCode()}),g(90," Enter "),h()()()()()()),2&e&&(p(10),b("ngbPopover",n.skipDrawRacePopoverText),p(2),b("ngModel",n.skipDrawRace),p(4),b("ngbPopover",n.finishTrainingBeforeSwitchingPopoverText),p(2),b("ngModel",n.finishTrainingBeforeSwitching),p(4),b("ngbPopover",n.hideTipsPopoverText),p(2),b("ngModel",n.hideTips),p(4),b("ngbPopover",n.useNumbersForCircuitRankPopoverText),p(2),b("ngModel",n.useNumbersForCircuitRank),p(4),b("ngbPopover",n.autoStartEventRacePopoverText),p(2),b("ngModel",n.autoStartEventRace),p(4),b("ngbPopover",n.raceDisplayInfoPopoverText),p(4),nt(n.raceDisplayInfo),p(13),nt(n.currentTheme),p(15),b("ngModel",n.importExportValue),p(16),b("ngModel",n.enteredRedemptionCode))},directives:[Or,bh,yl,Cl,Ll,y0,wf,_0,rs],styles:['.settingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}#raceDisplayInfoDropdown[_ngcontent-%COMP%], #themeDropdown[_ngcontent-%COMP%]{border:1px solid;border-color:var(--background-tertiary)}.bottomAligned[_ngcontent-%COMP%]{vertical-align:bottom}.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". options saveLoad ."}.options[_ngcontent-%COMP%]{grid-area:options}.saveLoad[_ngcontent-%COMP%]{grid-area:saveLoad}#importExport[_ngcontent-%COMP%]{width:100%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.importExportButtons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.codeRedemption[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.codeRedemptionInput[_ngcontent-%COMP%]{flex:1}@media (max-width: 800px){.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". options ." ". saveLoad ."}}']}),t})();function Cz(t,i){if(1&t){const e=ge();f(0,"div",12),I("click",function(){return B(e),w().getNewTip()}),f(1,"span"),g(2),h()()}if(2&t){const e=w();p(2),Wn("",e.displayingFunFact?"Fun Fact: ":"Tip: ","",e.randomTip,"")}}let Sz=(()=>{class t{constructor(e,n,r,a,o){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.componentCommunicationService=a,this.utilityService=o,this.displayingFunFact=!1,this.lastDisplayedFunFact=!1}ngOnInit(){var e=this;this.displayTip=!this.globalService.globalVar.settings.get("hideTips"),this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.randomTip=this.lookupService.getRandomTip(),this.totalTime=0,this.maxTipTime=60,this.gameLoopService.gameUpdateEvent.subscribe(function(){var n=ar(function*(r){if(e.displayTip=!e.globalService.globalVar.settings.get("hideTips"),e.totalTime+=r,e.totalTime>=e.maxTipTime&&e.displayTip){e.totalTime=0;var a=e.utilityService.getRandomInteger(1,4);a<=3||e.lastDisplayedFunFact?(e.displayingFunFact=!1,e.lastDisplayedFunFact=!1,e.randomTip=e.lookupService.getRandomTip()):4===a&&(e.displayingFunFact=!0,e.lastDisplayedFunFact=!0,e.randomTip=e.lookupService.getRandomFunFact())}});return function(r){return n.apply(this,arguments)}}())}getNewTip(){this.totalTime=0;var e=this.utilityService.getRandomInteger(1,4);e<=3||this.lastDisplayedFunFact?(this.displayingFunFact=!1,this.lastDisplayedFunFact=!1,this.randomTip=this.lookupService.getRandomTip()):4===e&&(this.displayingFunFact=!0,this.lastDisplayedFunFact=!0,this.randomTip=this.lookupService.getRandomFunFact())}openFAQs(){this.componentCommunicationService.setNewView(mt.faqs)}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(_i),A(hn),A(Zn),A(Ri))},t.\u0275cmp=dt({type:t,selectors:[["app-footer"]],decls:25,vars:1,consts:[[1,"footerView"],[1,"gridContainer"],[1,"area1"],["class","area2 keyword tips",3,"click",4,"ngIf"],[1,"area3","keyword","rightAlign"],[1,"faqs",3,"click"],["href","https://discord.gg/TgbRXsXQF3","rel","noopener noreferrer","target","_blank"],["href","https://www.reddit.com/message/compose/?to=Jaghancement","rel","noopener noreferrer","target","_blank"],["href","mailto:CulturaIdle@gmail.com"],[1,"area4","keyword","rightAlign"],["href","https://www.buymeacoffee.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],["href","https://www.patreon.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],[1,"area2","keyword","tips",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2),D(3,"span"),h(),x(4,Cz,3,2,"div",3),f(5,"div",4)(6,"span")(7,"span",5),I("click",function(){return n.openFAQs()}),g(8,"FAQs"),h(),g(9," | "),f(10,"a",6),g(11,"Discord"),h(),g(12," | "),f(13,"a",7),g(14,"Reddit"),h(),g(15," | "),f(16,"a",8),g(17,"Email"),h()()(),f(18,"div",9)(19,"span")(20,"a",10),g(21,"Donate"),h(),g(22," | "),f(23,"a",11),g(24,"Patreon"),h()()()()()),2&e&&(p(4),b("ngIf",n.displayTip))},directives:[an],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 1fr 20% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". area1 area2 area3 ." ". area1 area2 area4 ."}a[_ngcontent-%COMP%], .faqs[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.faqs[_ngcontent-%COMP%]{cursor:pointer}.faqs[_ngcontent-%COMP%]:hover{text-decoration:underline}.area1[_ngcontent-%COMP%]{grid-area:area1;justify-self:stretch}.area2[_ngcontent-%COMP%]{grid-area:area2;justify-self:stretch}.area3[_ngcontent-%COMP%]{grid-area:area3;justify-self:stretch}.area4[_ngcontent-%COMP%]{grid-area:area4;justify-self:stretch}.rightAlign[_ngcontent-%COMP%]{text-align:right}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 0% 1fr 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". . . area3 ." ". . . area4 ."}.tips[_ngcontent-%COMP%]{display:none}}']}),t})();const Tz=["tutorialContent"],Dz=["eventLoadingContent"];function Rz(t,i){1&t&&(f(0,"div",19),D(1,"app-barn-view"),h())}function xz(t,i){1&t&&(f(0,"div",20),D(1,"app-race-selection-view"),h())}function Mz(t,i){1&t&&(f(0,"div",21),D(1,"app-animals-view"),h())}function kz(t,i){1&t&&(f(0,"div",22),D(1,"app-decks-view"),h())}function Az(t,i){1&t&&(f(0,"div",23),D(1,"app-shop-view"),h())}function Pz(t,i){1&t&&(f(0,"div",24),D(1,"app-incubator-view"),h())}function Ez(t,i){1&t&&(f(0,"div",25),D(1,"app-training-track-view"),h())}function Iz(t,i){1&t&&(f(0,"div",26),D(1,"app-faq-view"),h())}function Oz(t,i){1&t&&(f(0,"div",27),D(1,"app-stats-view"),h())}function Nz(t,i){1&t&&(f(0,"div",28),D(1,"app-resources-view"),h())}function Vz(t,i){1&t&&(f(0,"div",29),D(1,"app-settings-view"),h())}function Fz(t,i){if(1&t){const e=ge();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Tutorial"),h(),f(4,"button",33),I("click",function(){return B(e),w().closeTutorialModal()}),g(5,"X"),h()(),D(6,"div",34),f(7,"div",35)(8,"span")(9,"button",36),I("click",function(){return B(e),w().skipTutorial()}),g(10,"Skip Tutorial"),h()(),f(11,"span")(12,"button",36),I("click",function(){return B(e),w().continueTutorial()}),g(13,"Continue"),h()()()()}if(2&t){const e=w();p(6),b("innerHTML",e.tutorialText,Nt)}}function Bz(t,i){if(1&t){const e=ge();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Loading..."),h(),f(4,"button",33),I("click",function(){return B(e),w().closeModals()}),g(5,"X"),h()(),f(6,"div",37),g(7," Grand Prix is calculating offline time. Load times may be long while this finishes. "),h(),f(8,"div",35)(9,"span")(10,"button",36),I("click",function(){return B(e),w().closeModals()}),g(11,"Continue"),h()()()()}}let Lz=(()=>{class t{constructor(e,n,r,a,o,s,l){this.ref=e,this.globalService=n,this.modalService=r,this.tutorialService=a,this.componentCommunicationService=o,this.sanitizer=s,this.gameLoopService=l,this.navigationEnum=mt,this.activeView=mt.barn,this.loadingScreenDisplayed=!1}ngOnInit(){var e=this;this.openTutorialModal(),this.eventPrixSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=ar(function*(a){null!=e.globalService.globalVar.eventRaceData&&e.globalService.globalVar.eventRaceData.isCatchingUp&&!e.loadingScreenDisplayed?(e.loadingScreenDisplayed=!0,e.openLoadingModal()):null!=e.globalService.globalVar.eventRaceData&&!e.globalService.globalVar.eventRaceData.isCatchingUp&&e.loadingScreenDisplayed&&(e.loadingScreenDisplayed=!1,e.closeModals())});return function(a){return r.apply(this,arguments)}}());var n=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=ar(function*(a){e.globalService.globalVar.tutorials.showTutorial&&e.openTutorialModal(),e.globalService.globalVar.tutorials.tutorialCompleted&&n.unsubscribe()});return function(a){return r.apply(this,arguments)}}())}changeView(e){this.activeView=e}openTutorialModal(){if(!this.globalService.globalVar.tutorials.tutorialCompleted){var e=this.tutorialService.getTutorialState(this.globalService.globalVar.tutorials.currentTutorialId);this.activeView===e.associatedTab&&(this.tutorialText=this.sanitizer.sanitize(en.HTML,this.sanitizer.bypassSecurityTrustHtml(e.tutorialText+"\n")),this.globalService.globalVar.tutorials.showTutorial=!1,5===e.id&&(this.globalService.globalVar.tutorials.currentTutorialId+=1),this.modalService.open(this.tutorialContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(n=>{this.closeTutorialModal()},n=>{this.closeTutorialModal()}))}}openLoadingModal(){this.modalService.open(this.eventLoadingContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(e=>{this.closeModals()},e=>{this.closeModals()})}closeModals(){this.modalService.dismissAll()}closeTutorialModal(){this.modalService.dismissAll()}skipTutorial(){this.tutorialService.skipTutorial(),this.closeTutorialModal()}continueTutorial(){this.closeTutorialModal()}}return t.\u0275fac=function(e){return new(e||t)(A(Mr),A(Rt),A(lo),A(yD),A(Zn),A(Mo),A(_i))},t.\u0275cmp=dt({type:t,selectors:[["app-main"]],viewQuery:function(e,n){if(1&e&&(ca(Tz,7),ca(Dz,7)),2&e){let r;fn(r=pn())&&(n.tutorialContent=r.first),fn(r=pn())&&(n.eventLoadingContent=r.first)}},decls:23,vars:11,consts:[[1,"gridContainer"],[1,"headerArea"],[1,"mainArea"],["id","BarnView","class","mainView",4,"ngIf"],["id","RaceSelectionView","class","mainView",4,"ngIf"],["id","AnimalsView","class","mainView",4,"ngIf"],["id","DecksView","class","mainView",4,"ngIf"],["id","ShopView","class","mainView",4,"ngIf"],["id","IncubatorView","class","mainView",4,"ngIf"],["id","TrainingTrackView","class","mainView",4,"ngIf"],["id","FaqsView","class","mainView",4,"ngIf"],["id","StatsView","class","mainView",4,"ngIf"],["id","ResourcesView","class","mainView",4,"ngIf"],["id","SettingsView","class","mainView",4,"ngIf"],[1,"navArea"],[3,"viewChanged"],[1,"footerArea"],["tutorialContent",""],["eventLoadingContent",""],["id","BarnView",1,"mainView"],["id","RaceSelectionView",1,"mainView"],["id","AnimalsView",1,"mainView"],["id","DecksView",1,"mainView"],["id","ShopView",1,"mainView"],["id","IncubatorView",1,"mainView"],["id","TrainingTrackView",1,"mainView"],["id","FaqsView",1,"mainView"],["id","StatsView",1,"mainView"],["id","ResourcesView",1,"mainView"],["id","SettingsView",1,"mainView"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"],[1,"modal-body"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1),D(2,"app-header"),h(),f(3,"div",2),x(4,Rz,2,0,"div",3),x(5,xz,2,0,"div",4),x(6,Mz,2,0,"div",5),x(7,kz,2,0,"div",6),x(8,Az,2,0,"div",7),x(9,Pz,2,0,"div",8),x(10,Ez,2,0,"div",9),x(11,Iz,2,0,"div",10),x(12,Oz,2,0,"div",11),x(13,Nz,2,0,"div",12),x(14,Vz,2,0,"div",13),h(),f(15,"div",14)(16,"app-navigation",15),I("viewChanged",function(a){return n.changeView(a)}),h()(),f(17,"div",16),D(18,"app-footer"),h()(),x(19,Fz,14,1,"ng-template",null,17,ot),x(21,Bz,12,0,"ng-template",null,18,ot)),2&e&&(p(4),b("ngIf",n.activeView===n.navigationEnum.barn),p(1),b("ngIf",n.activeView===n.navigationEnum.raceselection),p(1),b("ngIf",n.activeView===n.navigationEnum.animals),p(1),b("ngIf",n.activeView===n.navigationEnum.relayTeams),p(1),b("ngIf",n.activeView===n.navigationEnum.shop),p(1),b("ngIf",n.activeView===n.navigationEnum.incubator),p(1),b("ngIf",n.activeView===n.navigationEnum.trainingtrack),p(1),b("ngIf",n.activeView===n.navigationEnum.faqs),p(1),b("ngIf",n.activeView===n.navigationEnum.stats),p(1),b("ngIf",n.activeView===n.navigationEnum.resources),p(1),b("ngIf",n.activeView===n.navigationEnum.settings))},directives:[z6,an,mH,_9,ej,uj,Ej,Kj,XR,lz,cz,bz,wz,$R,Sz],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100vh;grid-template-columns:88% 12%;grid-template-rows:6% 88% 6%;justify-content:stretch;grid-template-areas:"header header" "main  nav" "footer footer"}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100%;position:fixed;top:0;left:0;bottom:0;right:0;grid-template-columns:88% 12%;grid-template-rows:auto 1fr auto;justify-content:stretch;grid-template-areas:"header header" "main  main" "footer footer"}.navArea[_ngcontent-%COMP%]{display:none}}.mainArea[_ngcontent-%COMP%]{grid-area:main;justify-self:stretch;background-color:var(--background-default);color:var(--foreground-default);overflow:auto}.navArea[_ngcontent-%COMP%]{grid-area:nav;justify-self:stretch;background-color:var(--background-secondary);color:var(--foreground-default)}.footerArea[_ngcontent-%COMP%]{grid-area:footer;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.headerArea[_ngcontent-%COMP%]{grid-area:header;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.mainView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.rightAlign[_ngcontent-%COMP%]{float:right}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.spaceBetween[_ngcontent-%COMP%]{justify-content:space-between!important}']}),t})(),Uz=(()=>{class t{constructor(e,n,r,a,o,s,l,c,u){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.specializationService=a,this.themeService=o,this.raceLogicService=s,this.deploymentService=l,this.versionControlService=c,this.utilityService=u,this.title="Cultura",this.newGame=!0,this.saveTime=0,this.saveFrequency=20,this.racingSaveFrequency=60}ngOnInit(){var e=this,n=localStorage.getItem("culturaIdleGameData");if((null==n||0===n.length)&&(n=localStorage.getItem("gameData")),null!=n){var r=LZString.decompressFromBase64(n),a=JSON.parse(r);null!=a&&(this.newGame=!1,this.globalService.globalVar=bD(Gn,a),this.loadStartup())}this.deploymentService.setDevMode();var s=this.deploymentService.devModeActive;(this.newGame||this.deploymentService.forceStartNewGame)&&this.globalService.initializeGlobalVariables(),s&&(this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.devModeInitialize(34)),this.versionControlService.updatePlayerVersion(),this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=ar(function*(d){e.gameCheckup(d),e.saveTime+=d;var m=e.saveFrequency;e.globalService.globalVar.userIsRacing&&(m=e.racingSaveFrequency),e.saveTime>=m&&(e.saveTime=0,e.saveGame());performance.now()});return function(d){return u.apply(this,arguments)}}()),this.gameLoopService.Update()}gameCheckup(e){if(null!=this.globalService.globalVar.animals){this.globalService.globalVar.animals.filter(a=>a.isAvailable).forEach(a=>{a.canTrain=this.lookupService.canAnimalTrain(a)});var n=this.globalService.globalVar.animals.filter(a=>a.isAvailable&&null!=a.currentTraining);n.length>0&&n.forEach(a=>{var o;if(null!=a.currentTraining&&a.canTrain)for(a.currentTraining.timeTrained+=e,this.specializationService.handleAttractionRevenue(e,a);null!==a.currentTraining&&a.currentTraining.timeTrained>=a.currentTraining.timeToComplete;){var s=this.globalService.globalVar.barns.find(u=>u.barnNumber===a.associatedBarnNumber),l=0;null!=s&&s.barnUpgrades.specialization===jt.BreedingGrounds&&(l=s.barnUpgrades.specializationLevel),null!=s&&s.barnUpgrades.specialization===jt.ResearchCenter?this.specializationService.handleResearchCenterStatIncrease(a,s):a.increaseStatsFromCurrentTraining(),this.globalService.calculateAnimalRacingStats(a);var c=this.lookupService.getTrainingBreedGaugeIncrease(l,a);this.globalService.IncreaseAnimalBreedGauge(a,c),a.currentTraining.timeTrained-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining<=0&&(a.currentTraining=null),null!=a.queuedTraining&&(null!==a.currentTraining&&a.currentTraining.trainingTimeRemaining>0&&(a.queuedTraining.timeTrained+=null===(o=a.currentTraining)||void 0===o?void 0:o.timeTrained),a.currentTraining=a.queuedTraining,a.queuedTraining=null)}});var r=this.globalService.globalVar.incubator;null!=r&&null!=r.assignedAnimal&&null!=r.assignedTrait&&(r.timeTrained+=e,r.timeTrained>=r.timeToComplete&&(r.assignedAnimal.trait=r.assignedTrait,this.globalService.calculateAnimalRacingStats(r.assignedAnimal),r.assignedAnimal.canTrain=!0,r.timeTrained=0,r.assignedAnimal=null,r.assignedTrait=null)),this.handleFreeRaceTimer(e),this.handleGrandPrix(e)}}handleGrandPrix(e){var n=!1;if(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime&&(n=!0,this.globalService.globalVar.eventRaceData.initialSetupComplete&&(this.globalService.globalVar.eventRaceData.remainingEventRaceTime>0?(this.globalService.globalVar.eventRaceData.segmentTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime,this.globalService.globalVar.eventRaceData.overallTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime):this.globalService.globalVar.eventRaceData.isCatchingUp||(this.globalService.globalVar.eventRaceData=new Li)),!this.globalService.globalVar.eventRaceData.isCatchingUp&&0===this.globalService.globalVar.eventRaceData.remainingEventRaceTime))this.globalService.globalVar.eventRaceData.initialSetupComplete=!1;else{if(this.globalService.globalVar.eventRaceData.initialSetupComplete||(this.globalService.initialGrandPrixSetup("Z"),this.globalService.globalVar.eventRaceData.initialSetupComplete=!0,this.globalService.globalVar.notifications.isEventRaceNowActive=!0),this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&this.globalService.increaseGrandPrixRaceRank(),this.globalService.globalVar.eventRaceData.isRunning){if(null==this.globalService.globalVar.animalDecks.find(l=>l.isEventDeck))return;n||(this.globalService.globalVar.eventRaceData.segmentTimeCounter+=e,this.globalService.globalVar.eventRaceData.overallTimeCounter+=e),this.globalService.globalVar.eventRaceData.remainingEventRaceTime=this.globalService.getRemainingEventRaceTime(),this.globalService.getTimeToEventRace()>0&&this.globalService.globalVar.eventRaceData.bonusTime>0&&(this.globalService.globalVar.eventRaceData.bonusTime-=e,this.globalService.globalVar.eventRaceData.bonusTime<=0&&(this.globalService.globalVar.eventRaceData.bonusTime=0));var a=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60;if(this.globalService.globalVar.eventRaceData.isCatchingUp=this.globalService.globalVar.eventRaceData.segmentTimeCounter>=2*a,this.globalService.globalVar.eventRaceData.segmentTimeCounter>=a)if(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1,this.globalService.globalVar.eventRaceData.segmentTimeCounter-=a,this.globalService.globalVar.eventRaceData.distanceCovered+=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.distanceCovered,this.globalService.globalVar.eventRaceData.previousRaceSegment=this.globalService.globalVar.eventRaceData.currentRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.previousRaceSegment.reduceExportSize(),this.globalService.globalVar.eventRaceData.distanceCovered>=this.globalService.globalVar.eventRaceData.totalDistance)this.globalService.globalVar.eventRaceData.distanceCovered=this.globalService.globalVar.eventRaceData.totalDistance,this.grandPrixRaceCompleted();else{this.checkForEventRelayAnimal()&&this.resetEventAbilityUseCounts();var s=this.globalService.getGrandPrixRacingAnimal();void 0!==s.type&&void 0!==s.name&&(this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.globalVar.eventRaceData.nextRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.nextRaceSegment),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s))}this.checkForGrandPrixRewards()}else this.globalService.globalVar.eventRaceData.isCatchingUp=!1;this.updateExhaustionAndMorale(e),this.updateWeatherCluster(e)}}grandPrixRaceCompleted(){this.globalService.globalVar.eventRaceData.isGrandPrixCompleted=!0,this.globalService.stopGrandPrixRace()}updateExhaustionAndMorale(e){this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter+=e;var n=300,r=this.globalService.globalVar.modifiers.find(s=>"exhaustionGainTimerCapGrandPrixModifier"===s.text);null!=r&&(n=r.value);var a=.02,o=this.globalService.globalVar.modifiers.find(s=>"exhaustionGainGrandPrixModifier"===s.text);null!=o&&(a=o.value),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter>n&&(this.globalService.globalVar.eventRaceData.animalData.forEach(s=>{s.exhaustionStatReduction+=a,s.exhaustionStatReduction>=1&&(s.exhaustionStatReduction=1),s.morale<1&&(s.morale+=a)}),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter-=n)}updateWeatherCluster(e){this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter+=e;var n=7200,r=this.globalService.globalVar.modifiers.find(a=>"weatherClusterTimerCapGrandPrixModifier"===a.text);null!=r&&(n=r.value),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter>n&&(this.globalService.globalVar.eventRaceData.weatherCluster=this.globalService.getRandomGrandPrixWeatherCluster(void 0,this.globalService.globalVar.eventRaceData.weatherCluster),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter-=n)}checkForEventRelayAnimal(){var e=!1;if(this.globalService.globalVar.eventRaceData.animalData.some(d=>d.isSetToRelay))this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1,d.isSetToRelay&&(d.isCurrentlyRacing=!0,d.isSetToRelay=!1,this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===z.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0))});else{var n=this.globalService.getGrandPrixRacingAnimal(),r=this.globalService.getExhaustionOfAnimal(n.type),a=this.lookupService.getBreedLevelRequiredForGrandPrix();if(void 0!==r&&r<.5){var o=this.globalService.globalVar.animalDecks.find(d=>d.isEventDeck);if(null!=o){var s=null==o?void 0:o.selectedAnimals.filter(d=>d.breedLevel>=a);if((s=s.filter(d=>{var m=this.globalService.globalVar.eventRaceData.animalData.find(_=>_.associatedAnimalType===d.type);if(null!=m){var v=this.globalService.globalVar.animals.find(_=>_.type===d.type);return m.exhaustionStatReduction>=.5&&!this.globalService.shouldShowSlowSegmentWarning(v)||m.associatedAnimalType===n.type}return!1})).length>1){var l=0,c=!1;if(s.forEach(d=>{d.type===n.type&&(c=!0),c||(l+=1)}),c||(l=-1),this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1}),l>-1){var u=l+1;u===s.length&&(u=0),this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.associatedAnimalType===s[u].type&&(d.isCurrentlyRacing=!0,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===z.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s[u]))})}else this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.associatedAnimalType===s[0].type&&(d.isCurrentlyRacing=!0,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===z.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s[0]))});this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1}else this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1}),this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalService.globalVar.eventRaceData.isRunning=!1,this.globalService.globalVar.eventRaceData.overallTimeCounter-=this.globalService.globalVar.eventRaceData.segmentTimeCounter,this.globalService.globalVar.eventRaceData.segmentTimeCounter=0,this.globalService.globalVar.eventRaceData.currentRaceSegment.reduceExportSize()}}}return e}resetEventAbilityUseCounts(){null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.eventAbilityData||this.globalService.globalVar.eventRaceData.eventAbilityData.resetUseCounts()}checkForGrandPrixRewards(){var e=this.globalService.globalVar.eventRaceData.distanceCovered,n=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),r=100,a=this.globalService.globalVar.modifiers.find(se=>"grandPrixCoinRewardModifier"===se.text);null!=a&&(r=a.value);var o=5,s=this.globalService.globalVar.modifiers.find(se=>"grandPrixRenownRewardModifier"===se.text);null!=s&&(o=s.value);var l=5e6,c=this.globalService.globalVar.modifiers.find(se=>"metersPerCoinsGrandPrixModifier"===se.text);null!=c&&(l=c.value);var u=2e7,d=this.globalService.globalVar.modifiers.find(se=>"metersPerRenownGrandPrixModifier"===se.text);null!=d&&(u=d.value);var m=5e7,v=this.globalService.globalVar.modifiers.find(se=>"grandPrixToken1MeterModifier"===se.text);null!=v&&(m=v.value);var _=5e7,y=this.globalService.globalVar.modifiers.find(se=>"grandPrixToken2MeterModifier"===se.text);null!=y&&(_=y.value);var S=5e7,T=this.globalService.globalVar.modifiers.find(se=>"grandPrixToken3MeterModifier"===se.text);null!=T&&(S=T.value);var C=5e7,O=this.globalService.globalVar.modifiers.find(se=>"grandPrixToken4MeterModifier"===se.text);null!=O&&(C=O.value);var K,G=this.globalService.globalVar.eventRaceData.totalDistance/(u*n);e>=l*n*(this.globalService.globalVar.eventRaceData.coinRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.coinRewardsObtained<this.globalService.globalVar.eventRaceData.totalDistance/(l*n)&&(this.globalService.globalVar.eventRaceData.coinRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(K=this.globalService.globalVar.resources.find(se=>"Coins"===se.name))&&(K.amount+=r),this.lookupService.addResourceToResourceList(new le("Coins",r,Y.Resources),this.globalService.globalVar.previousEventRewards)),e>=u*n*(this.globalService.globalVar.eventRaceData.renownRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.renownRewardsObtained<G&&(this.globalService.globalVar.eventRaceData.renownRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(K=this.globalService.globalVar.resources.find(de=>"Renown"===de.name))&&(K.amount+=o),this.lookupService.addResourceToResourceList(new le("Renown",o,Y.Progression),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=0&&e>=m*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(K=this.globalService.globalVar.resources.find(de=>"Tokens"===de.name))?K.amount+=1*n:this.globalService.globalVar.resources.push(new le("Tokens",1*n,Y.Resources)),this.lookupService.addResourceToResourceList(new le("Tokens",1*n,Y.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=1&&e>=_*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(K=this.globalService.globalVar.resources.find(de=>"Tokens"===de.name))?K.amount+=2*n:this.globalService.globalVar.resources.push(new le("Tokens",2*n,Y.Resources)),this.lookupService.addResourceToResourceList(new le("Tokens",2*n,Y.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=2&&e>=S*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(K=this.globalService.globalVar.resources.find(de=>"Tokens"===de.name))?K.amount+=3*n:this.globalService.globalVar.resources.push(new le("Tokens",3*n,Y.Resources)),this.lookupService.addResourceToResourceList(new le("Tokens",3*n,Y.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=3&&e>=C*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(K=this.globalService.globalVar.resources.find(de=>"Tokens"===de.name))?K.amount+=4*n:this.globalService.globalVar.resources.push(new le("Tokens",4*n,Y.Resources)),this.lookupService.addResourceToResourceList(new le("Tokens",4*n,Y.Resources),this.globalService.globalVar.previousEventRewards))}handleFreeRaceTimer(e){if(this.globalService.globalVar.freeRaceTimePeriodCounter+=e,!this.globalService.globalVar.userIsRacing){var n=300,r=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==r&&(n=r.value);var a=3600,o=this.globalService.globalVar.modifiers.find(s=>"autoFreeRacesMaxIdleTimePeriodModifier"===s.text);for(void 0!==o&&(a=o.value);this.globalService.globalVar.freeRaceTimePeriodCounter>=n&&a>0;)this.globalService.globalVar.freeRaceTimePeriodCounter>a&&(this.globalService.globalVar.freeRaceTimePeriodCounter=a),this.globalService.globalVar.freeRaceTimePeriodCounter-=n,a-=n,this.globalService.globalVar.freeRaceCounter=0,this.globalService.globalVar.autoFreeRaceCounter=0,this.handleAutoFreeRace(e)}}handleAutoFreeRace(e){var n=this.lookupService.getResourceByName("Team Manager");if(null==n&&(n=0),0!==n&&this.globalService.globalVar.animalDecks.some(d=>d.autoRunFreeRace)){var r=this.globalService.globalVar.animalDecks.find(d=>d.autoRunFreeRace);if(null!=r)for(var a=n-this.globalService.globalVar.autoFreeRaceCounter,o=this.lookupService.getTotalFreeRacesPerPeriod(),s=0;s<a;s++){if(this.globalService.globalVar.freeRaceCounter>=o)return;this.globalService.globalVar.autoFreeRaceCounter+=1,this.globalService.globalVar.freeRaceCounter+=1;var l=this.globalService.generateFreeRace(),c=!0;l.raceLegs.forEach(d=>{(null==r?void 0:r.selectedAnimals.some(m=>m.raceCourseType===d.courseType))||(c=!1)}),c&&this.raceLogicService.runRace(l)}}}saveGame(){if("undefined"!=typeof Worker){const r=new Worker(q.tu(new URL(q.p+q.u(151),q.b)));r.onmessage=({data:a})=>{localStorage.setItem("culturaIdleGameData",a),r.terminate()},r.postMessage(this.globalService.globalVar)}else{var e=JSON.stringify(this.globalService.globalVar),n=LZString.compressToBase64(e);localStorage.setItem("culturaIdleGameData",n)}}loadStartup(){var e=this.globalService.globalVar.settings.get("theme");null!=e&&this.themeService.setActiveTheme(e)}}return t.\u0275fac=function(e){return new(e||t)(A(Rt),A(_i),A(hn),A(Yv),A(kl),A(Qv),A(_D),A(Kv),A(Ri))},t.\u0275cmp=dt({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"grayTheme"]],template:function(e,n){1&e&&(f(0,"div",0),D(1,"app-main"),h(),D(2,"router-outlet"))},directives:[Lz,xv],styles:[""]}),t})(),Hz=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=wn({type:t,bootstrap:[Uz]}),t.\u0275inj=mn({providers:[Rt,kl],imports:[[GV,p4,B6,vr,oT,e3]]}),t})();(function yO(){pC=!1})(),UV().bootstrapModule(Hz).catch(t=>console.error(t))},7466:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var U=W,re=U.lib.BlockCipher,pe=U.algo,J=[],ne=[],E=[],M=[],V=[],P=[],N=[],k=[],F=[],H=[];!function(){for(var L=[],$=0;$<256;$++)L[$]=$<128?$<<1:$<<1^283;var ue=0,te=0;for($=0;$<256;$++){var oe=te^te<<1^te<<2^te<<3^te<<4;J[ue]=oe=oe>>>8^255&oe^99,ne[oe]=ue;var Ie,ce=L[ue],Te=L[ce],we=L[Te];E[ue]=(Ie=257*L[oe]^16843008*oe)<<24|Ie>>>8,M[ue]=Ie<<16|Ie>>>16,V[ue]=Ie<<8|Ie>>>24,P[ue]=Ie,N[oe]=(Ie=16843009*we^65537*Te^257*ce^16843008*ue)<<24|Ie>>>8,k[oe]=Ie<<16|Ie>>>16,F[oe]=Ie<<8|Ie>>>24,H[oe]=Ie,ue?(ue=ce^L[L[L[we^ce]]],te^=L[L[te]]):ue=te=1}}();var ae=[0,1,2,4,8,16,32,64,128,27,54],ie=pe.AES=re.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var $=this._keyPriorReset=this._key,ue=$.words,te=$.sigBytes/4,ce=4*((this._nRounds=te+6)+1),Te=this._keySchedule=[],we=0;we<ce;we++)we<te?Te[we]=ue[we]:(L=Te[we-1],we%te?te>6&&we%te==4&&(L=J[L>>>24]<<24|J[L>>>16&255]<<16|J[L>>>8&255]<<8|J[255&L]):(L=J[(L=L<<8|L>>>24)>>>24]<<24|J[L>>>16&255]<<16|J[L>>>8&255]<<8|J[255&L],L^=ae[we/te|0]<<24),Te[we]=Te[we-te]^L);for(var Ie=this._invKeySchedule=[],Ue=0;Ue<ce;Ue++){if(we=ce-Ue,Ue%4)var L=Te[we];else L=Te[we-4];Ie[Ue]=Ue<4||we<=4?L:N[J[L>>>24]]^k[J[L>>>16&255]]^F[J[L>>>8&255]]^H[J[255&L]]}}},encryptBlock:function(L,$){this._doCryptBlock(L,$,this._keySchedule,E,M,V,P,J)},decryptBlock:function(L,$){var ue=L[$+1];L[$+1]=L[$+3],L[$+3]=ue,this._doCryptBlock(L,$,this._invKeySchedule,N,k,F,H,ne),ue=L[$+1],L[$+1]=L[$+3],L[$+3]=ue},_doCryptBlock:function(L,$,ue,te,oe,ce,Te,we){for(var Ie=this._nRounds,Ue=L[$]^ue[0],me=L[$+1]^ue[1],Me=L[$+2]^ue[2],Fe=L[$+3]^ue[3],ke=4,st=1;st<Ie;st++){var Be=te[Ue>>>24]^oe[me>>>16&255]^ce[Me>>>8&255]^Te[255&Fe]^ue[ke++],Lt=te[me>>>24]^oe[Me>>>16&255]^ce[Fe>>>8&255]^Te[255&Ue]^ue[ke++],Zt=te[Me>>>24]^oe[Fe>>>16&255]^ce[Ue>>>8&255]^Te[255&me]^ue[ke++],Se=te[Fe>>>24]^oe[Ue>>>16&255]^ce[me>>>8&255]^Te[255&Me]^ue[ke++];Ue=Be,me=Lt,Me=Zt,Fe=Se}Be=(we[Ue>>>24]<<24|we[me>>>16&255]<<16|we[Me>>>8&255]<<8|we[255&Fe])^ue[ke++],Lt=(we[me>>>24]<<24|we[Me>>>16&255]<<16|we[Fe>>>8&255]<<8|we[255&Ue])^ue[ke++],Zt=(we[Me>>>24]<<24|we[Fe>>>16&255]<<16|we[Ue>>>8&255]<<8|we[255&me])^ue[ke++],Se=(we[Fe>>>24]<<24|we[Ue>>>16&255]<<16|we[me>>>8&255]<<8|we[255&Me])^ue[ke++],L[$]=Be,L[$+1]=Lt,L[$+2]=Zt,L[$+3]=Se},keySize:8});U.AES=re._createHelper(ie)}(),W.AES)},3057:function(Ce,De,q){var ee,re,pe,J,ne,E,V,N,k,H,ae,ie,$,te,ce,Te,Ie,Ue,W;Ce.exports=(W=q(7585),q(7865),void(W.lib.Cipher||(ee=W,re=ee.lib,pe=re.Base,J=re.WordArray,ne=re.BufferedBlockAlgorithm,E=ee.enc,V=E.Base64,N=ee.algo.EvpKDF,k=re.Cipher=ne.extend({cfg:pe.extend(),createEncryptor:function(me,Me){return this.create(this._ENC_XFORM_MODE,me,Me)},createDecryptor:function(me,Me){return this.create(this._DEC_XFORM_MODE,me,Me)},init:function(me,Me,Fe){this.cfg=this.cfg.extend(Fe),this._xformMode=me,this._key=Me,this.reset()},reset:function(){ne.reset.call(this),this._doReset()},process:function(me){return this._append(me),this._process()},finalize:function(me){return me&&this._append(me),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function me(Me){return"string"==typeof Me?Ue:Te}return function(Me){return{encrypt:function(Fe,ke,st){return me(ke).encrypt(Me,Fe,ke,st)},decrypt:function(Fe,ke,st){return me(ke).decrypt(Me,Fe,ke,st)}}}}()}),re.StreamCipher=k.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),H=ee.mode={},ae=re.BlockCipherMode=pe.extend({createEncryptor:function(me,Me){return this.Encryptor.create(me,Me)},createDecryptor:function(me,Me){return this.Decryptor.create(me,Me)},init:function(me,Me){this._cipher=me,this._iv=Me}}),ie=H.CBC=function(){var me=ae.extend();function Me(Fe,ke,st){var Be,Lt=this._iv;Lt?(Be=Lt,this._iv=undefined):Be=this._prevBlock;for(var Zt=0;Zt<st;Zt++)Fe[ke+Zt]^=Be[Zt]}return me.Encryptor=me.extend({processBlock:function(Fe,ke){var st=this._cipher,Be=st.blockSize;Me.call(this,Fe,ke,Be),st.encryptBlock(Fe,ke),this._prevBlock=Fe.slice(ke,ke+Be)}}),me.Decryptor=me.extend({processBlock:function(Fe,ke){var st=this._cipher,Be=st.blockSize,Lt=Fe.slice(ke,ke+Be);st.decryptBlock(Fe,ke),Me.call(this,Fe,ke,Be),this._prevBlock=Lt}}),me}(),$=(ee.pad={}).Pkcs7={pad:function(me,Me){for(var Fe=4*Me,ke=Fe-me.sigBytes%Fe,st=ke<<24|ke<<16|ke<<8|ke,Be=[],Lt=0;Lt<ke;Lt+=4)Be.push(st);var Zt=J.create(Be,ke);me.concat(Zt)},unpad:function(me){me.sigBytes-=255&me.words[me.sigBytes-1>>>2]}},re.BlockCipher=k.extend({cfg:k.cfg.extend({mode:ie,padding:$}),reset:function(){var me;k.reset.call(this);var Me=this.cfg,Fe=Me.iv,ke=Me.mode;this._xformMode==this._ENC_XFORM_MODE?me=ke.createEncryptor:(me=ke.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==me?this._mode.init(this,Fe&&Fe.words):(this._mode=me.call(ke,this,Fe&&Fe.words),this._mode.__creator=me)},_doProcessBlock:function(me,Me){this._mode.processBlock(me,Me)},_doFinalize:function(){var me,Me=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Me.pad(this._data,this.blockSize),me=this._process(!0)):(me=this._process(!0),Me.unpad(me)),me},blockSize:4}),te=re.CipherParams=pe.extend({init:function(me){this.mixIn(me)},toString:function(me){return(me||this.formatter).stringify(this)}}),ce=(ee.format={}).OpenSSL={stringify:function(me){var Fe=me.ciphertext,ke=me.salt;return(ke?J.create([1398893684,1701076831]).concat(ke).concat(Fe):Fe).toString(V)},parse:function(me){var Me,Fe=V.parse(me),ke=Fe.words;return 1398893684==ke[0]&&1701076831==ke[1]&&(Me=J.create(ke.slice(2,4)),ke.splice(0,4),Fe.sigBytes-=16),te.create({ciphertext:Fe,salt:Me})}},Te=re.SerializableCipher=pe.extend({cfg:pe.extend({format:ce}),encrypt:function(me,Me,Fe,ke){ke=this.cfg.extend(ke);var st=me.createEncryptor(Fe,ke),Be=st.finalize(Me),Lt=st.cfg;return te.create({ciphertext:Be,key:Fe,iv:Lt.iv,algorithm:me,mode:Lt.mode,padding:Lt.padding,blockSize:me.blockSize,formatter:ke.format})},decrypt:function(me,Me,Fe,ke){return ke=this.cfg.extend(ke),Me=this._parse(Me,ke.format),me.createDecryptor(Fe,ke).finalize(Me.ciphertext)},_parse:function(me,Me){return"string"==typeof me?Me.parse(me,this):me}}),Ie=(ee.kdf={}).OpenSSL={execute:function(me,Me,Fe,ke){ke||(ke=J.random(8));var st=N.create({keySize:Me+Fe}).compute(me,ke),Be=J.create(st.words.slice(Me),4*Fe);return st.sigBytes=4*Me,te.create({key:st,iv:Be,salt:ke})}},Ue=re.PasswordBasedCipher=Te.extend({cfg:Te.cfg.extend({kdf:Ie}),encrypt:function(me,Me,Fe,ke){var st=(ke=this.cfg.extend(ke)).kdf.execute(Fe,me.keySize,me.ivSize);ke.iv=st.iv;var Be=Te.encrypt.call(this,me,Me,st.key,ke);return Be.mixIn(st),Be},decrypt:function(me,Me,Fe,ke){ke=this.cfg.extend(ke),Me=this._parse(Me,ke.format);var st=ke.kdf.execute(Fe,me.keySize,me.ivSize,Me.salt);return ke.iv=st.iv,Te.decrypt.call(this,me,Me,st.key,ke)}}))))},7585:function(Ce,De,q){var W;Ce.exports=(W=W||function(U,ee){var re;if("undefined"!=typeof window&&window.crypto&&(re=window.crypto),"undefined"!=typeof self&&self.crypto&&(re=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(re=globalThis.crypto),!re&&"undefined"!=typeof window&&window.msCrypto&&(re=window.msCrypto),!re&&"undefined"!=typeof global&&global.crypto&&(re=global.crypto),!re)try{re=q(2480)}catch(L){}var pe=function(){if(re){if("function"==typeof re.getRandomValues)try{return re.getRandomValues(new Uint32Array(1))[0]}catch(L){}if("function"==typeof re.randomBytes)try{return re.randomBytes(4).readInt32LE()}catch(L){}}throw new Error("Native crypto module could not be used to get secure random number.")},J=Object.create||function(){function L(){}return function($){var ue;return L.prototype=$,ue=new L,L.prototype=null,ue}}(),ne={},E=ne.lib={},M=E.Base={extend:function(L){var $=J(this);return L&&$.mixIn(L),(!$.hasOwnProperty("init")||this.init===$.init)&&($.init=function(){$.$super.init.apply(this,arguments)}),$.init.prototype=$,$.$super=this,$},create:function(){var L=this.extend();return L.init.apply(L,arguments),L},init:function(){},mixIn:function(L){for(var $ in L)L.hasOwnProperty($)&&(this[$]=L[$]);L.hasOwnProperty("toString")&&(this.toString=L.toString)},clone:function(){return this.init.prototype.extend(this)}},V=E.WordArray=M.extend({init:function(L,$){L=this.words=L||[],this.sigBytes=null!=$?$:4*L.length},toString:function(L){return(L||N).stringify(this)},concat:function(L){var $=this.words,ue=L.words,te=this.sigBytes,oe=L.sigBytes;if(this.clamp(),te%4)for(var ce=0;ce<oe;ce++)$[te+ce>>>2]|=(ue[ce>>>2]>>>24-ce%4*8&255)<<24-(te+ce)%4*8;else for(var we=0;we<oe;we+=4)$[te+we>>>2]=ue[we>>>2];return this.sigBytes+=oe,this},clamp:function(){var L=this.words,$=this.sigBytes;L[$>>>2]&=4294967295<<32-$%4*8,L.length=U.ceil($/4)},clone:function(){var L=M.clone.call(this);return L.words=this.words.slice(0),L},random:function(L){for(var $=[],ue=0;ue<L;ue+=4)$.push(pe());return new V.init($,L)}}),P=ne.enc={},N=P.Hex={stringify:function(L){for(var $=L.words,ue=L.sigBytes,te=[],oe=0;oe<ue;oe++){var ce=$[oe>>>2]>>>24-oe%4*8&255;te.push((ce>>>4).toString(16)),te.push((15&ce).toString(16))}return te.join("")},parse:function(L){for(var $=L.length,ue=[],te=0;te<$;te+=2)ue[te>>>3]|=parseInt(L.substr(te,2),16)<<24-te%8*4;return new V.init(ue,$/2)}},k=P.Latin1={stringify:function(L){for(var $=L.words,ue=L.sigBytes,te=[],oe=0;oe<ue;oe++)te.push(String.fromCharCode($[oe>>>2]>>>24-oe%4*8&255));return te.join("")},parse:function(L){for(var $=L.length,ue=[],te=0;te<$;te++)ue[te>>>2]|=(255&L.charCodeAt(te))<<24-te%4*8;return new V.init(ue,$)}},F=P.Utf8={stringify:function(L){try{return decodeURIComponent(escape(k.stringify(L)))}catch($){throw new Error("Malformed UTF-8 data")}},parse:function(L){return k.parse(unescape(encodeURIComponent(L)))}},H=E.BufferedBlockAlgorithm=M.extend({reset:function(){this._data=new V.init,this._nDataBytes=0},_append:function(L){"string"==typeof L&&(L=F.parse(L)),this._data.concat(L),this._nDataBytes+=L.sigBytes},_process:function(L){var $,ue=this._data,te=ue.words,oe=ue.sigBytes,ce=this.blockSize,we=oe/(4*ce),Ie=(we=L?U.ceil(we):U.max((0|we)-this._minBufferSize,0))*ce,Ue=U.min(4*Ie,oe);if(Ie){for(var me=0;me<Ie;me+=ce)this._doProcessBlock(te,me);$=te.splice(0,Ie),ue.sigBytes-=Ue}return new V.init($,Ue)},clone:function(){var L=M.clone.call(this);return L._data=this._data.clone(),L},_minBufferSize:0}),ie=(E.Hasher=H.extend({cfg:M.extend(),init:function(L){this.cfg=this.cfg.extend(L),this.reset()},reset:function(){H.reset.call(this),this._doReset()},update:function(L){return this._append(L),this._process(),this},finalize:function(L){return L&&this._append(L),this._doFinalize()},blockSize:16,_createHelper:function(L){return function($,ue){return new L.init(ue).finalize($)}},_createHmacHelper:function(L){return function($,ue){return new ie.HMAC.init(L,ue).finalize($)}}}),ne.algo={});return ne}(Math),W)},8319:function(Ce,De,q){var W,re;Ce.exports=(W=q(7585),re=W.lib.WordArray,W.enc.Base64={stringify:function(E){var M=E.words,V=E.sigBytes,P=this._map;E.clamp();for(var N=[],k=0;k<V;k+=3)for(var ie=(M[k>>>2]>>>24-k%4*8&255)<<16|(M[k+1>>>2]>>>24-(k+1)%4*8&255)<<8|M[k+2>>>2]>>>24-(k+2)%4*8&255,L=0;L<4&&k+.75*L<V;L++)N.push(P.charAt(ie>>>6*(3-L)&63));var $=P.charAt(64);if($)for(;N.length%4;)N.push($);return N.join("")},parse:function(E){var M=E.length,V=this._map,P=this._reverseMap;if(!P){P=this._reverseMap=[];for(var N=0;N<V.length;N++)P[V.charCodeAt(N)]=N}var k=V.charAt(64);if(k){var F=E.indexOf(k);-1!==F&&(M=F)}return function ne(E,M,V){for(var P=[],N=0,k=0;k<M;k++)if(k%4){var F=V[E.charCodeAt(k-1)]<<k%4*2,H=V[E.charCodeAt(k)]>>>6-k%4*2;P[N>>>2]|=(F|H)<<24-N%4*8,N++}return re.create(P,N)}(E,M,P)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},W.enc.Base64)},4410:function(Ce,De,q){var W,re;Ce.exports=(W=q(7585),re=W.lib.WordArray,W.enc.Base64url={stringify:function(E,M=!0){var V=E.words,P=E.sigBytes,N=M?this._safe_map:this._map;E.clamp();for(var k=[],F=0;F<P;F+=3)for(var L=(V[F>>>2]>>>24-F%4*8&255)<<16|(V[F+1>>>2]>>>24-(F+1)%4*8&255)<<8|V[F+2>>>2]>>>24-(F+2)%4*8&255,$=0;$<4&&F+.75*$<P;$++)k.push(N.charAt(L>>>6*(3-$)&63));var ue=N.charAt(64);if(ue)for(;k.length%4;)k.push(ue);return k.join("")},parse:function(E,M=!0){var V=E.length,P=M?this._safe_map:this._map,N=this._reverseMap;if(!N){N=this._reverseMap=[];for(var k=0;k<P.length;k++)N[P.charCodeAt(k)]=k}var F=P.charAt(64);if(F){var H=E.indexOf(F);-1!==H&&(V=H)}return function ne(E,M,V){for(var P=[],N=0,k=0;k<M;k++)if(k%4){var F=V[E.charCodeAt(k-1)]<<k%4*2,H=V[E.charCodeAt(k)]>>>6-k%4*2;P[N>>>2]|=(F|H)<<24-N%4*8,N++}return re.create(P,N)}(E,V,N)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},W.enc.Base64url)},9012:function(Ce,De,q){var W;Ce.exports=(W=q(7585),function(){var re=W.lib.WordArray,pe=W.enc;function ne(E){return E<<8&4278255360|E>>>8&16711935}pe.Utf16=pe.Utf16BE={stringify:function(E){for(var M=E.words,V=E.sigBytes,P=[],N=0;N<V;N+=2)P.push(String.fromCharCode(M[N>>>2]>>>16-N%4*8&65535));return P.join("")},parse:function(E){for(var M=E.length,V=[],P=0;P<M;P++)V[P>>>1]|=E.charCodeAt(P)<<16-P%2*16;return re.create(V,2*M)}},pe.Utf16LE={stringify:function(E){for(var M=E.words,V=E.sigBytes,P=[],N=0;N<V;N+=2){var k=ne(M[N>>>2]>>>16-N%4*8&65535);P.push(String.fromCharCode(k))}return P.join("")},parse:function(E){for(var M=E.length,V=[],P=0;P<M;P++)V[P>>>1]|=ne(E.charCodeAt(P)<<16-P%2*16);return re.create(V,2*M)}}}(),W.enc.Utf16)},7865:function(Ce,De,q){var U,ee,re,pe,J,E,W;Ce.exports=(W=q(7585),q(5162),q(3764),pe=(ee=(U=W).lib).WordArray,E=(J=U.algo).EvpKDF=(re=ee.Base).extend({cfg:re.extend({keySize:4,hasher:J.MD5,iterations:1}),init:function(M){this.cfg=this.cfg.extend(M)},compute:function(M,V){for(var P,N=this.cfg,k=N.hasher.create(),F=pe.create(),H=F.words,ae=N.keySize,ie=N.iterations;H.length<ae;){P&&k.update(P),P=k.update(M).finalize(V),k.reset();for(var L=1;L<ie;L++)P=k.finalize(P),k.reset();F.concat(P)}return F.sigBytes=4*ae,F}}),U.EvpKDF=function(M,V,P){return E.create(P).compute(M,V)},W.EvpKDF)},1847:function(Ce,De,q){var W,pe,ne;Ce.exports=(W=q(7585),q(3057),pe=W.lib.CipherParams,ne=W.enc.Hex,W.format.Hex={stringify:function(V){return V.ciphertext.toString(ne)},parse:function(V){var P=ne.parse(V);return pe.create({ciphertext:P})}},W.format.Hex)},3764:function(Ce,De,q){var W,J;Ce.exports=(W=q(7585),J=W.enc.Utf8,void(W.algo.HMAC=W.lib.Base.extend({init:function(M,V){M=this._hasher=new M.init,"string"==typeof V&&(V=J.parse(V));var P=M.blockSize,N=4*P;V.sigBytes>N&&(V=M.finalize(V)),V.clamp();for(var k=this._oKey=V.clone(),F=this._iKey=V.clone(),H=k.words,ae=F.words,ie=0;ie<P;ie++)H[ie]^=1549556828,ae[ie]^=909522486;k.sigBytes=F.sigBytes=N,this.reset()},reset:function(){var M=this._hasher;M.reset(),M.update(this._iKey)},update:function(M){return this._hasher.update(M),this},finalize:function(M){var V=this._hasher,P=V.finalize(M);return V.reset(),V.finalize(this._oKey.clone().concat(P))}})))},7206:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(401),q(7412),q(9012),q(8319),q(4410),q(9493),q(5162),q(1817),q(8769),q(3351),q(6787),q(1971),q(4973),q(3764),q(8812),q(7865),q(3057),q(4424),q(6635),q(3592),q(9354),q(7934),q(4413),q(4630),q(187),q(1691),q(3237),q(1847),q(7466),q(7243),q(486),q(8182),q(3544),W)},7412:function(Ce,De,q){var W;Ce.exports=(W=q(7585),function(){if("function"==typeof ArrayBuffer){var re=W.lib.WordArray,pe=re.init,J=re.init=function(ne){if(ne instanceof ArrayBuffer&&(ne=new Uint8Array(ne)),(ne instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&ne instanceof Uint8ClampedArray||ne instanceof Int16Array||ne instanceof Uint16Array||ne instanceof Int32Array||ne instanceof Uint32Array||ne instanceof Float32Array||ne instanceof Float64Array)&&(ne=new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength)),ne instanceof Uint8Array){for(var E=ne.byteLength,M=[],V=0;V<E;V++)M[V>>>2]|=ne[V]<<24-V%4*8;pe.call(this,M,E)}else pe.apply(this,arguments)};J.prototype=re}}(),W.lib.WordArray)},9493:function(Ce,De,q){var W;Ce.exports=(W=q(7585),function(U){var ee=W,re=ee.lib,pe=re.WordArray,J=re.Hasher,ne=ee.algo,E=[];!function(){for(var F=0;F<64;F++)E[F]=4294967296*U.abs(U.sin(F+1))|0}();var M=ne.MD5=J.extend({_doReset:function(){this._hash=new pe.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(F,H){for(var ae=0;ae<16;ae++){var ie=H+ae,L=F[ie];F[ie]=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8)}var $=this._hash.words,ue=F[H+0],te=F[H+1],oe=F[H+2],ce=F[H+3],Te=F[H+4],we=F[H+5],Ie=F[H+6],Ue=F[H+7],me=F[H+8],Me=F[H+9],Fe=F[H+10],ke=F[H+11],st=F[H+12],Be=F[H+13],Lt=F[H+14],Zt=F[H+15],Se=$[0],Pe=$[1],_e=$[2],xe=$[3];Se=V(Se,Pe,_e,xe,ue,7,E[0]),xe=V(xe,Se,Pe,_e,te,12,E[1]),_e=V(_e,xe,Se,Pe,oe,17,E[2]),Pe=V(Pe,_e,xe,Se,ce,22,E[3]),Se=V(Se,Pe,_e,xe,Te,7,E[4]),xe=V(xe,Se,Pe,_e,we,12,E[5]),_e=V(_e,xe,Se,Pe,Ie,17,E[6]),Pe=V(Pe,_e,xe,Se,Ue,22,E[7]),Se=V(Se,Pe,_e,xe,me,7,E[8]),xe=V(xe,Se,Pe,_e,Me,12,E[9]),_e=V(_e,xe,Se,Pe,Fe,17,E[10]),Pe=V(Pe,_e,xe,Se,ke,22,E[11]),Se=V(Se,Pe,_e,xe,st,7,E[12]),xe=V(xe,Se,Pe,_e,Be,12,E[13]),_e=V(_e,xe,Se,Pe,Lt,17,E[14]),Se=P(Se,Pe=V(Pe,_e,xe,Se,Zt,22,E[15]),_e,xe,te,5,E[16]),xe=P(xe,Se,Pe,_e,Ie,9,E[17]),_e=P(_e,xe,Se,Pe,ke,14,E[18]),Pe=P(Pe,_e,xe,Se,ue,20,E[19]),Se=P(Se,Pe,_e,xe,we,5,E[20]),xe=P(xe,Se,Pe,_e,Fe,9,E[21]),_e=P(_e,xe,Se,Pe,Zt,14,E[22]),Pe=P(Pe,_e,xe,Se,Te,20,E[23]),Se=P(Se,Pe,_e,xe,Me,5,E[24]),xe=P(xe,Se,Pe,_e,Lt,9,E[25]),_e=P(_e,xe,Se,Pe,ce,14,E[26]),Pe=P(Pe,_e,xe,Se,me,20,E[27]),Se=P(Se,Pe,_e,xe,Be,5,E[28]),xe=P(xe,Se,Pe,_e,oe,9,E[29]),_e=P(_e,xe,Se,Pe,Ue,14,E[30]),Se=N(Se,Pe=P(Pe,_e,xe,Se,st,20,E[31]),_e,xe,we,4,E[32]),xe=N(xe,Se,Pe,_e,me,11,E[33]),_e=N(_e,xe,Se,Pe,ke,16,E[34]),Pe=N(Pe,_e,xe,Se,Lt,23,E[35]),Se=N(Se,Pe,_e,xe,te,4,E[36]),xe=N(xe,Se,Pe,_e,Te,11,E[37]),_e=N(_e,xe,Se,Pe,Ue,16,E[38]),Pe=N(Pe,_e,xe,Se,Fe,23,E[39]),Se=N(Se,Pe,_e,xe,Be,4,E[40]),xe=N(xe,Se,Pe,_e,ue,11,E[41]),_e=N(_e,xe,Se,Pe,ce,16,E[42]),Pe=N(Pe,_e,xe,Se,Ie,23,E[43]),Se=N(Se,Pe,_e,xe,Me,4,E[44]),xe=N(xe,Se,Pe,_e,st,11,E[45]),_e=N(_e,xe,Se,Pe,Zt,16,E[46]),Se=k(Se,Pe=N(Pe,_e,xe,Se,oe,23,E[47]),_e,xe,ue,6,E[48]),xe=k(xe,Se,Pe,_e,Ue,10,E[49]),_e=k(_e,xe,Se,Pe,Lt,15,E[50]),Pe=k(Pe,_e,xe,Se,we,21,E[51]),Se=k(Se,Pe,_e,xe,st,6,E[52]),xe=k(xe,Se,Pe,_e,ce,10,E[53]),_e=k(_e,xe,Se,Pe,Fe,15,E[54]),Pe=k(Pe,_e,xe,Se,te,21,E[55]),Se=k(Se,Pe,_e,xe,me,6,E[56]),xe=k(xe,Se,Pe,_e,Zt,10,E[57]),_e=k(_e,xe,Se,Pe,Ie,15,E[58]),Pe=k(Pe,_e,xe,Se,Be,21,E[59]),Se=k(Se,Pe,_e,xe,Te,6,E[60]),xe=k(xe,Se,Pe,_e,ke,10,E[61]),_e=k(_e,xe,Se,Pe,oe,15,E[62]),Pe=k(Pe,_e,xe,Se,Me,21,E[63]),$[0]=$[0]+Se|0,$[1]=$[1]+Pe|0,$[2]=$[2]+_e|0,$[3]=$[3]+xe|0},_doFinalize:function(){var F=this._data,H=F.words,ae=8*this._nDataBytes,ie=8*F.sigBytes;H[ie>>>5]|=128<<24-ie%32;var L=U.floor(ae/4294967296),$=ae;H[15+(ie+64>>>9<<4)]=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8),H[14+(ie+64>>>9<<4)]=16711935&($<<8|$>>>24)|4278255360&($<<24|$>>>8),F.sigBytes=4*(H.length+1),this._process();for(var ue=this._hash,te=ue.words,oe=0;oe<4;oe++){var ce=te[oe];te[oe]=16711935&(ce<<8|ce>>>24)|4278255360&(ce<<24|ce>>>8)}return ue},clone:function(){var F=J.clone.call(this);return F._hash=this._hash.clone(),F}});function V(F,H,ae,ie,L,$,ue){var te=F+(H&ae|~H&ie)+L+ue;return(te<<$|te>>>32-$)+H}function P(F,H,ae,ie,L,$,ue){var te=F+(H&ie|ae&~ie)+L+ue;return(te<<$|te>>>32-$)+H}function N(F,H,ae,ie,L,$,ue){var te=F+(H^ae^ie)+L+ue;return(te<<$|te>>>32-$)+H}function k(F,H,ae,ie,L,$,ue){var te=F+(ae^(H|~ie))+L+ue;return(te<<$|te>>>32-$)+H}ee.MD5=J._createHelper(M),ee.HmacMD5=J._createHmacHelper(M)}(Math),W.MD5)},4424:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(3057),W.mode.CFB=function(){var U=W.lib.BlockCipherMode.extend();function ee(re,pe,J,ne){var E,M=this._iv;M?(E=M.slice(0),this._iv=void 0):E=this._prevBlock,ne.encryptBlock(E,0);for(var V=0;V<J;V++)re[pe+V]^=E[V]}return U.Encryptor=U.extend({processBlock:function(re,pe){var J=this._cipher,ne=J.blockSize;ee.call(this,re,pe,ne,J),this._prevBlock=re.slice(pe,pe+ne)}}),U.Decryptor=U.extend({processBlock:function(re,pe){var J=this._cipher,ne=J.blockSize,E=re.slice(pe,pe+ne);ee.call(this,re,pe,ne,J),this._prevBlock=E}}),U}(),W.mode.CFB)},3592:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(3057),W.mode.CTRGladman=function(){var U=W.lib.BlockCipherMode.extend();function ee(J){if(255==(J>>24&255)){var ne=J>>16&255,E=J>>8&255,M=255&J;255===ne?(ne=0,255===E?(E=0,255===M?M=0:++M):++E):++ne,J=0,J+=ne<<16,J+=E<<8,J+=M}else J+=1<<24;return J}var pe=U.Encryptor=U.extend({processBlock:function(J,ne){var E=this._cipher,M=E.blockSize,V=this._iv,P=this._counter;V&&(P=this._counter=V.slice(0),this._iv=void 0),function re(J){return 0===(J[0]=ee(J[0]))&&(J[1]=ee(J[1])),J}(P);var N=P.slice(0);E.encryptBlock(N,0);for(var k=0;k<M;k++)J[ne+k]^=N[k]}});return U.Decryptor=pe,U}(),W.mode.CTRGladman)},6635:function(Ce,De,q){var U,ee,W;Ce.exports=(W=q(7585),q(3057),W.mode.CTR=(ee=(U=W.lib.BlockCipherMode.extend()).Encryptor=U.extend({processBlock:function(re,pe){var J=this._cipher,ne=J.blockSize,E=this._iv,M=this._counter;E&&(M=this._counter=E.slice(0),this._iv=void 0);var V=M.slice(0);J.encryptBlock(V,0),M[ne-1]=M[ne-1]+1|0;for(var P=0;P<ne;P++)re[pe+P]^=V[P]}}),U.Decryptor=ee,U),W.mode.CTR)},7934:function(Ce,De,q){var U,W;Ce.exports=(W=q(7585),q(3057),W.mode.ECB=((U=W.lib.BlockCipherMode.extend()).Encryptor=U.extend({processBlock:function(ee,re){this._cipher.encryptBlock(ee,re)}}),U.Decryptor=U.extend({processBlock:function(ee,re){this._cipher.decryptBlock(ee,re)}}),U),W.mode.ECB)},9354:function(Ce,De,q){var U,ee,W;Ce.exports=(W=q(7585),q(3057),W.mode.OFB=(ee=(U=W.lib.BlockCipherMode.extend()).Encryptor=U.extend({processBlock:function(re,pe){var J=this._cipher,ne=J.blockSize,E=this._iv,M=this._keystream;E&&(M=this._keystream=E.slice(0),this._iv=void 0),J.encryptBlock(M,0);for(var V=0;V<ne;V++)re[pe+V]^=M[V]}}),U.Decryptor=ee,U),W.mode.OFB)},4413:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(3057),W.pad.AnsiX923={pad:function(U,ee){var re=U.sigBytes,pe=4*ee,J=pe-re%pe,ne=re+J-1;U.clamp(),U.words[ne>>>2]|=J<<24-ne%4*8,U.sigBytes+=J},unpad:function(U){U.sigBytes-=255&U.words[U.sigBytes-1>>>2]}},W.pad.Ansix923)},4630:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(3057),W.pad.Iso10126={pad:function(U,ee){var re=4*ee,pe=re-U.sigBytes%re;U.concat(W.lib.WordArray.random(pe-1)).concat(W.lib.WordArray.create([pe<<24],1))},unpad:function(U){U.sigBytes-=255&U.words[U.sigBytes-1>>>2]}},W.pad.Iso10126)},187:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(3057),W.pad.Iso97971={pad:function(U,ee){U.concat(W.lib.WordArray.create([2147483648],1)),W.pad.ZeroPadding.pad(U,ee)},unpad:function(U){W.pad.ZeroPadding.unpad(U),U.sigBytes--}},W.pad.Iso97971)},3237:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(3057),W.pad.NoPadding={pad:function(){},unpad:function(){}},W.pad.NoPadding)},1691:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(3057),W.pad.ZeroPadding={pad:function(U,ee){var re=4*ee;U.clamp(),U.sigBytes+=re-(U.sigBytes%re||re)},unpad:function(U){var ee=U.words,re=U.sigBytes-1;for(re=U.sigBytes-1;re>=0;re--)if(ee[re>>>2]>>>24-re%4*8&255){U.sigBytes=re+1;break}}},W.pad.ZeroPadding)},8812:function(Ce,De,q){var U,ee,re,pe,J,E,M,W;Ce.exports=(W=q(7585),q(5162),q(3764),pe=(ee=(U=W).lib).WordArray,E=(J=U.algo).HMAC,M=J.PBKDF2=(re=ee.Base).extend({cfg:re.extend({keySize:4,hasher:J.SHA1,iterations:1}),init:function(V){this.cfg=this.cfg.extend(V)},compute:function(V,P){for(var N=this.cfg,k=E.create(N.hasher,V),F=pe.create(),H=pe.create([1]),ae=F.words,ie=H.words,L=N.keySize,$=N.iterations;ae.length<L;){var ue=k.update(P).finalize(H);k.reset();for(var te=ue.words,oe=te.length,ce=ue,Te=1;Te<$;Te++){ce=k.finalize(ce),k.reset();for(var we=ce.words,Ie=0;Ie<oe;Ie++)te[Ie]^=we[Ie]}F.concat(ue),ie[0]++}return F.sigBytes=4*L,F}}),U.PBKDF2=function(V,P,N){return M.create(N).compute(V,P)},W.PBKDF2)},3544:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var U=W,re=U.lib.StreamCipher,J=[],ne=[],E=[],M=U.algo.RabbitLegacy=re.extend({_doReset:function(){var P=this._key.words,N=this.cfg.iv,k=this._X=[P[0],P[3]<<16|P[2]>>>16,P[1],P[0]<<16|P[3]>>>16,P[2],P[1]<<16|P[0]>>>16,P[3],P[2]<<16|P[1]>>>16],F=this._C=[P[2]<<16|P[2]>>>16,4294901760&P[0]|65535&P[1],P[3]<<16|P[3]>>>16,4294901760&P[1]|65535&P[2],P[0]<<16|P[0]>>>16,4294901760&P[2]|65535&P[3],P[1]<<16|P[1]>>>16,4294901760&P[3]|65535&P[0]];this._b=0;for(var H=0;H<4;H++)V.call(this);for(H=0;H<8;H++)F[H]^=k[H+4&7];if(N){var ae=N.words,ie=ae[0],L=ae[1],$=16711935&(ie<<8|ie>>>24)|4278255360&(ie<<24|ie>>>8),ue=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8),te=$>>>16|4294901760&ue,oe=ue<<16|65535&$;for(F[0]^=$,F[1]^=te,F[2]^=ue,F[3]^=oe,F[4]^=$,F[5]^=te,F[6]^=ue,F[7]^=oe,H=0;H<4;H++)V.call(this)}},_doProcessBlock:function(P,N){var k=this._X;V.call(this),J[0]=k[0]^k[5]>>>16^k[3]<<16,J[1]=k[2]^k[7]>>>16^k[5]<<16,J[2]=k[4]^k[1]>>>16^k[7]<<16,J[3]=k[6]^k[3]>>>16^k[1]<<16;for(var F=0;F<4;F++)J[F]=16711935&(J[F]<<8|J[F]>>>24)|4278255360&(J[F]<<24|J[F]>>>8),P[N+F]^=J[F]},blockSize:4,ivSize:2});function V(){for(var P=this._X,N=this._C,k=0;k<8;k++)ne[k]=N[k];for(N[0]=N[0]+1295307597+this._b|0,N[1]=N[1]+3545052371+(N[0]>>>0<ne[0]>>>0?1:0)|0,N[2]=N[2]+886263092+(N[1]>>>0<ne[1]>>>0?1:0)|0,N[3]=N[3]+1295307597+(N[2]>>>0<ne[2]>>>0?1:0)|0,N[4]=N[4]+3545052371+(N[3]>>>0<ne[3]>>>0?1:0)|0,N[5]=N[5]+886263092+(N[4]>>>0<ne[4]>>>0?1:0)|0,N[6]=N[6]+1295307597+(N[5]>>>0<ne[5]>>>0?1:0)|0,N[7]=N[7]+3545052371+(N[6]>>>0<ne[6]>>>0?1:0)|0,this._b=N[7]>>>0<ne[7]>>>0?1:0,k=0;k<8;k++){var F=P[k]+N[k],H=65535&F,ae=F>>>16;E[k]=((H*H>>>17)+H*ae>>>15)+ae*ae^((4294901760&F)*F|0)+((65535&F)*F|0)}P[0]=E[0]+(E[7]<<16|E[7]>>>16)+(E[6]<<16|E[6]>>>16)|0,P[1]=E[1]+(E[0]<<8|E[0]>>>24)+E[7]|0,P[2]=E[2]+(E[1]<<16|E[1]>>>16)+(E[0]<<16|E[0]>>>16)|0,P[3]=E[3]+(E[2]<<8|E[2]>>>24)+E[1]|0,P[4]=E[4]+(E[3]<<16|E[3]>>>16)+(E[2]<<16|E[2]>>>16)|0,P[5]=E[5]+(E[4]<<8|E[4]>>>24)+E[3]|0,P[6]=E[6]+(E[5]<<16|E[5]>>>16)+(E[4]<<16|E[4]>>>16)|0,P[7]=E[7]+(E[6]<<8|E[6]>>>24)+E[5]|0}U.RabbitLegacy=re._createHelper(M)}(),W.RabbitLegacy)},8182:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var U=W,re=U.lib.StreamCipher,J=[],ne=[],E=[],M=U.algo.Rabbit=re.extend({_doReset:function(){for(var P=this._key.words,N=this.cfg.iv,k=0;k<4;k++)P[k]=16711935&(P[k]<<8|P[k]>>>24)|4278255360&(P[k]<<24|P[k]>>>8);var F=this._X=[P[0],P[3]<<16|P[2]>>>16,P[1],P[0]<<16|P[3]>>>16,P[2],P[1]<<16|P[0]>>>16,P[3],P[2]<<16|P[1]>>>16],H=this._C=[P[2]<<16|P[2]>>>16,4294901760&P[0]|65535&P[1],P[3]<<16|P[3]>>>16,4294901760&P[1]|65535&P[2],P[0]<<16|P[0]>>>16,4294901760&P[2]|65535&P[3],P[1]<<16|P[1]>>>16,4294901760&P[3]|65535&P[0]];for(this._b=0,k=0;k<4;k++)V.call(this);for(k=0;k<8;k++)H[k]^=F[k+4&7];if(N){var ae=N.words,ie=ae[0],L=ae[1],$=16711935&(ie<<8|ie>>>24)|4278255360&(ie<<24|ie>>>8),ue=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8),te=$>>>16|4294901760&ue,oe=ue<<16|65535&$;for(H[0]^=$,H[1]^=te,H[2]^=ue,H[3]^=oe,H[4]^=$,H[5]^=te,H[6]^=ue,H[7]^=oe,k=0;k<4;k++)V.call(this)}},_doProcessBlock:function(P,N){var k=this._X;V.call(this),J[0]=k[0]^k[5]>>>16^k[3]<<16,J[1]=k[2]^k[7]>>>16^k[5]<<16,J[2]=k[4]^k[1]>>>16^k[7]<<16,J[3]=k[6]^k[3]>>>16^k[1]<<16;for(var F=0;F<4;F++)J[F]=16711935&(J[F]<<8|J[F]>>>24)|4278255360&(J[F]<<24|J[F]>>>8),P[N+F]^=J[F]},blockSize:4,ivSize:2});function V(){for(var P=this._X,N=this._C,k=0;k<8;k++)ne[k]=N[k];for(N[0]=N[0]+1295307597+this._b|0,N[1]=N[1]+3545052371+(N[0]>>>0<ne[0]>>>0?1:0)|0,N[2]=N[2]+886263092+(N[1]>>>0<ne[1]>>>0?1:0)|0,N[3]=N[3]+1295307597+(N[2]>>>0<ne[2]>>>0?1:0)|0,N[4]=N[4]+3545052371+(N[3]>>>0<ne[3]>>>0?1:0)|0,N[5]=N[5]+886263092+(N[4]>>>0<ne[4]>>>0?1:0)|0,N[6]=N[6]+1295307597+(N[5]>>>0<ne[5]>>>0?1:0)|0,N[7]=N[7]+3545052371+(N[6]>>>0<ne[6]>>>0?1:0)|0,this._b=N[7]>>>0<ne[7]>>>0?1:0,k=0;k<8;k++){var F=P[k]+N[k],H=65535&F,ae=F>>>16;E[k]=((H*H>>>17)+H*ae>>>15)+ae*ae^((4294901760&F)*F|0)+((65535&F)*F|0)}P[0]=E[0]+(E[7]<<16|E[7]>>>16)+(E[6]<<16|E[6]>>>16)|0,P[1]=E[1]+(E[0]<<8|E[0]>>>24)+E[7]|0,P[2]=E[2]+(E[1]<<16|E[1]>>>16)+(E[0]<<16|E[0]>>>16)|0,P[3]=E[3]+(E[2]<<8|E[2]>>>24)+E[1]|0,P[4]=E[4]+(E[3]<<16|E[3]>>>16)+(E[2]<<16|E[2]>>>16)|0,P[5]=E[5]+(E[4]<<8|E[4]>>>24)+E[3]|0,P[6]=E[6]+(E[5]<<16|E[5]>>>16)+(E[4]<<16|E[4]>>>16)|0,P[7]=E[7]+(E[6]<<8|E[6]>>>24)+E[5]|0}U.Rabbit=re._createHelper(M)}(),W.Rabbit)},486:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var U=W,re=U.lib.StreamCipher,pe=U.algo,J=pe.RC4=re.extend({_doReset:function(){for(var M=this._key,V=M.words,P=M.sigBytes,N=this._S=[],k=0;k<256;k++)N[k]=k;k=0;for(var F=0;k<256;k++){var H=k%P,ie=N[k];N[k]=N[F=(F+N[k]+(V[H>>>2]>>>24-H%4*8&255))%256],N[F]=ie}this._i=this._j=0},_doProcessBlock:function(M,V){M[V]^=ne.call(this)},keySize:8,ivSize:0});function ne(){for(var M=this._S,V=this._i,P=this._j,N=0,k=0;k<4;k++){var F=M[V=(V+1)%256];M[V]=M[P=(P+M[V])%256],M[P]=F,N|=M[(M[V]+M[P])%256]<<24-8*k}return this._i=V,this._j=P,N}U.RC4=re._createHelper(J);var E=pe.RC4Drop=J.extend({cfg:J.cfg.extend({drop:192}),_doReset:function(){J._doReset.call(this);for(var M=this.cfg.drop;M>0;M--)ne.call(this)}});U.RC4Drop=re._createHelper(E)}(),W.RC4)},4973:function(Ce,De,q){var W;Ce.exports=(W=q(7585),function(U){var ee=W,re=ee.lib,pe=re.WordArray,J=re.Hasher,ne=ee.algo,E=pe.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),M=pe.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),V=pe.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),P=pe.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),N=pe.create([0,1518500249,1859775393,2400959708,2840853838]),k=pe.create([1352829926,1548603684,1836072691,2053994217,0]),F=ne.RIPEMD160=J.extend({_doReset:function(){this._hash=pe.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(te,oe){for(var ce=0;ce<16;ce++){var Te=oe+ce,we=te[Te];te[Te]=16711935&(we<<8|we>>>24)|4278255360&(we<<24|we>>>8)}var Be,Lt,Zt,Se,Pe,_e,xe,Tn,yt,zt,$t,Ie=this._hash.words,Ue=N.words,me=k.words,Me=E.words,Fe=M.words,ke=V.words,st=P.words;for(_e=Be=Ie[0],xe=Lt=Ie[1],Tn=Zt=Ie[2],yt=Se=Ie[3],zt=Pe=Ie[4],ce=0;ce<80;ce+=1)$t=Be+te[oe+Me[ce]]|0,$t+=ce<16?H(Lt,Zt,Se)+Ue[0]:ce<32?ae(Lt,Zt,Se)+Ue[1]:ce<48?ie(Lt,Zt,Se)+Ue[2]:ce<64?L(Lt,Zt,Se)+Ue[3]:$(Lt,Zt,Se)+Ue[4],$t=($t=ue($t|=0,ke[ce]))+Pe|0,Be=Pe,Pe=Se,Se=ue(Zt,10),Zt=Lt,Lt=$t,$t=_e+te[oe+Fe[ce]]|0,$t+=ce<16?$(xe,Tn,yt)+me[0]:ce<32?L(xe,Tn,yt)+me[1]:ce<48?ie(xe,Tn,yt)+me[2]:ce<64?ae(xe,Tn,yt)+me[3]:H(xe,Tn,yt)+me[4],$t=($t=ue($t|=0,st[ce]))+zt|0,_e=zt,zt=yt,yt=ue(Tn,10),Tn=xe,xe=$t;$t=Ie[1]+Zt+yt|0,Ie[1]=Ie[2]+Se+zt|0,Ie[2]=Ie[3]+Pe+_e|0,Ie[3]=Ie[4]+Be+xe|0,Ie[4]=Ie[0]+Lt+Tn|0,Ie[0]=$t},_doFinalize:function(){var te=this._data,oe=te.words,ce=8*this._nDataBytes,Te=8*te.sigBytes;oe[Te>>>5]|=128<<24-Te%32,oe[14+(Te+64>>>9<<4)]=16711935&(ce<<8|ce>>>24)|4278255360&(ce<<24|ce>>>8),te.sigBytes=4*(oe.length+1),this._process();for(var we=this._hash,Ie=we.words,Ue=0;Ue<5;Ue++){var me=Ie[Ue];Ie[Ue]=16711935&(me<<8|me>>>24)|4278255360&(me<<24|me>>>8)}return we},clone:function(){var te=J.clone.call(this);return te._hash=this._hash.clone(),te}});function H(te,oe,ce){return te^oe^ce}function ae(te,oe,ce){return te&oe|~te&ce}function ie(te,oe,ce){return(te|~oe)^ce}function L(te,oe,ce){return te&ce|oe&~ce}function $(te,oe,ce){return te^(oe|~ce)}function ue(te,oe){return te<<oe|te>>>32-oe}ee.RIPEMD160=J._createHelper(F),ee.HmacRIPEMD160=J._createHmacHelper(F)}(Math),W.RIPEMD160)},5162:function(Ce,De,q){var U,ee,re,pe,ne,E,W;Ce.exports=(W=q(7585),re=(ee=(U=W).lib).WordArray,ne=[],E=U.algo.SHA1=(pe=ee.Hasher).extend({_doReset:function(){this._hash=new re.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(M,V){for(var P=this._hash.words,N=P[0],k=P[1],F=P[2],H=P[3],ae=P[4],ie=0;ie<80;ie++){if(ie<16)ne[ie]=0|M[V+ie];else{var L=ne[ie-3]^ne[ie-8]^ne[ie-14]^ne[ie-16];ne[ie]=L<<1|L>>>31}var $=(N<<5|N>>>27)+ae+ne[ie];$+=ie<20?1518500249+(k&F|~k&H):ie<40?1859775393+(k^F^H):ie<60?(k&F|k&H|F&H)-1894007588:(k^F^H)-899497514,ae=H,H=F,F=k<<30|k>>>2,k=N,N=$}P[0]=P[0]+N|0,P[1]=P[1]+k|0,P[2]=P[2]+F|0,P[3]=P[3]+H|0,P[4]=P[4]+ae|0},_doFinalize:function(){var M=this._data,V=M.words,P=8*this._nDataBytes,N=8*M.sigBytes;return V[N>>>5]|=128<<24-N%32,V[14+(N+64>>>9<<4)]=Math.floor(P/4294967296),V[15+(N+64>>>9<<4)]=P,M.sigBytes=4*V.length,this._process(),this._hash},clone:function(){var M=pe.clone.call(this);return M._hash=this._hash.clone(),M}}),U.SHA1=pe._createHelper(E),U.HmacSHA1=pe._createHmacHelper(E),W.SHA1)},8769:function(Ce,De,q){var U,re,pe,J,ne,W;Ce.exports=(W=q(7585),q(1817),re=(U=W).lib.WordArray,ne=(pe=U.algo).SHA224=(J=pe.SHA256).extend({_doReset:function(){this._hash=new re.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var E=J._doFinalize.call(this);return E.sigBytes-=4,E}}),U.SHA224=J._createHelper(ne),U.HmacSHA224=J._createHmacHelper(ne),W.SHA224)},1817:function(Ce,De,q){var W;Ce.exports=(W=q(7585),function(U){var ee=W,re=ee.lib,pe=re.WordArray,J=re.Hasher,ne=ee.algo,E=[],M=[];!function(){function N(ae){for(var ie=U.sqrt(ae),L=2;L<=ie;L++)if(!(ae%L))return!1;return!0}function k(ae){return 4294967296*(ae-(0|ae))|0}for(var F=2,H=0;H<64;)N(F)&&(H<8&&(E[H]=k(U.pow(F,.5))),M[H]=k(U.pow(F,1/3)),H++),F++}();var V=[],P=ne.SHA256=J.extend({_doReset:function(){this._hash=new pe.init(E.slice(0))},_doProcessBlock:function(N,k){for(var F=this._hash.words,H=F[0],ae=F[1],ie=F[2],L=F[3],$=F[4],ue=F[5],te=F[6],oe=F[7],ce=0;ce<64;ce++){if(ce<16)V[ce]=0|N[k+ce];else{var Te=V[ce-15],Ie=V[ce-2];V[ce]=((Te<<25|Te>>>7)^(Te<<14|Te>>>18)^Te>>>3)+V[ce-7]+((Ie<<15|Ie>>>17)^(Ie<<13|Ie>>>19)^Ie>>>10)+V[ce-16]}var Me=H&ae^H&ie^ae&ie,st=oe+(($<<26|$>>>6)^($<<21|$>>>11)^($<<7|$>>>25))+($&ue^~$&te)+M[ce]+V[ce];oe=te,te=ue,ue=$,$=L+st|0,L=ie,ie=ae,ae=H,H=st+(((H<<30|H>>>2)^(H<<19|H>>>13)^(H<<10|H>>>22))+Me)|0}F[0]=F[0]+H|0,F[1]=F[1]+ae|0,F[2]=F[2]+ie|0,F[3]=F[3]+L|0,F[4]=F[4]+$|0,F[5]=F[5]+ue|0,F[6]=F[6]+te|0,F[7]=F[7]+oe|0},_doFinalize:function(){var N=this._data,k=N.words,F=8*this._nDataBytes,H=8*N.sigBytes;return k[H>>>5]|=128<<24-H%32,k[14+(H+64>>>9<<4)]=U.floor(F/4294967296),k[15+(H+64>>>9<<4)]=F,N.sigBytes=4*k.length,this._process(),this._hash},clone:function(){var N=J.clone.call(this);return N._hash=this._hash.clone(),N}});ee.SHA256=J._createHelper(P),ee.HmacSHA256=J._createHmacHelper(P)}(Math),W.SHA256)},1971:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(401),function(U){var ee=W,re=ee.lib,pe=re.WordArray,J=re.Hasher,E=ee.x64.Word,M=ee.algo,V=[],P=[],N=[];!function(){for(var H=1,ae=0,ie=0;ie<24;ie++){V[H+5*ae]=(ie+1)*(ie+2)/2%64;var $=(2*H+3*ae)%5;H=ae%5,ae=$}for(H=0;H<5;H++)for(ae=0;ae<5;ae++)P[H+5*ae]=ae+(2*H+3*ae)%5*5;for(var ue=1,te=0;te<24;te++){for(var oe=0,ce=0,Te=0;Te<7;Te++){if(1&ue){var we=(1<<Te)-1;we<32?ce^=1<<we:oe^=1<<we-32}128&ue?ue=ue<<1^113:ue<<=1}N[te]=E.create(oe,ce)}}();var k=[];!function(){for(var H=0;H<25;H++)k[H]=E.create()}();var F=M.SHA3=J.extend({cfg:J.cfg.extend({outputLength:512}),_doReset:function(){for(var H=this._state=[],ae=0;ae<25;ae++)H[ae]=new E.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(H,ae){for(var ie=this._state,L=this.blockSize/2,$=0;$<L;$++){var ue=H[ae+2*$],te=H[ae+2*$+1];ue=16711935&(ue<<8|ue>>>24)|4278255360&(ue<<24|ue>>>8),(oe=ie[$]).high^=te=16711935&(te<<8|te>>>24)|4278255360&(te<<24|te>>>8),oe.low^=ue}for(var ce=0;ce<24;ce++){for(var Te=0;Te<5;Te++){for(var we=0,Ie=0,Ue=0;Ue<5;Ue++)we^=(oe=ie[Te+5*Ue]).high,Ie^=oe.low;var me=k[Te];me.high=we,me.low=Ie}for(Te=0;Te<5;Te++){var Me=k[(Te+4)%5],Fe=k[(Te+1)%5],ke=Fe.high,st=Fe.low;for(we=Me.high^(ke<<1|st>>>31),Ie=Me.low^(st<<1|ke>>>31),Ue=0;Ue<5;Ue++)(oe=ie[Te+5*Ue]).high^=we,oe.low^=Ie}for(var Be=1;Be<25;Be++){var Lt=(oe=ie[Be]).high,Zt=oe.low,Se=V[Be];Se<32?(we=Lt<<Se|Zt>>>32-Se,Ie=Zt<<Se|Lt>>>32-Se):(we=Zt<<Se-32|Lt>>>64-Se,Ie=Lt<<Se-32|Zt>>>64-Se);var Pe=k[P[Be]];Pe.high=we,Pe.low=Ie}var _e=k[0],xe=ie[0];for(_e.high=xe.high,_e.low=xe.low,Te=0;Te<5;Te++)for(Ue=0;Ue<5;Ue++){var Tn=k[Be=Te+5*Ue],yt=k[(Te+1)%5+5*Ue],zt=k[(Te+2)%5+5*Ue];(oe=ie[Be]).high=Tn.high^~yt.high&zt.high,oe.low=Tn.low^~yt.low&zt.low}var oe,$t=N[ce];(oe=ie[0]).high^=$t.high,oe.low^=$t.low}},_doFinalize:function(){var H=this._data,ae=H.words,L=8*H.sigBytes,$=32*this.blockSize;ae[L>>>5]|=1<<24-L%32,ae[(U.ceil((L+1)/$)*$>>>5)-1]|=128,H.sigBytes=4*ae.length,this._process();for(var ue=this._state,te=this.cfg.outputLength/8,oe=te/8,ce=[],Te=0;Te<oe;Te++){var we=ue[Te],Ie=we.high,Ue=we.low;Ie=16711935&(Ie<<8|Ie>>>24)|4278255360&(Ie<<24|Ie>>>8),ce.push(Ue=16711935&(Ue<<8|Ue>>>24)|4278255360&(Ue<<24|Ue>>>8)),ce.push(Ie)}return new pe.init(ce,te)},clone:function(){for(var H=J.clone.call(this),ae=H._state=this._state.slice(0),ie=0;ie<25;ie++)ae[ie]=ae[ie].clone();return H}});ee.SHA3=J._createHelper(F),ee.HmacSHA3=J._createHmacHelper(F)}(Math),W.SHA3)},6787:function(Ce,De,q){var U,ee,re,pe,J,ne,E,W;Ce.exports=(W=q(7585),q(401),q(3351),re=(ee=(U=W).x64).Word,pe=ee.WordArray,E=(J=U.algo).SHA384=(ne=J.SHA512).extend({_doReset:function(){this._hash=new pe.init([new re.init(3418070365,3238371032),new re.init(1654270250,914150663),new re.init(2438529370,812702999),new re.init(355462360,4144912697),new re.init(1731405415,4290775857),new re.init(2394180231,1750603025),new re.init(3675008525,1694076839),new re.init(1203062813,3204075428)])},_doFinalize:function(){var M=ne._doFinalize.call(this);return M.sigBytes-=16,M}}),U.SHA384=ne._createHelper(E),U.HmacSHA384=ne._createHmacHelper(E),W.SHA384)},3351:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(401),function(){var U=W,re=U.lib.Hasher,pe=U.x64,J=pe.Word,ne=pe.WordArray,E=U.algo;function M(){return J.create.apply(J,arguments)}var V=[M(1116352408,3609767458),M(1899447441,602891725),M(3049323471,3964484399),M(3921009573,2173295548),M(961987163,4081628472),M(1508970993,3053834265),M(2453635748,2937671579),M(2870763221,3664609560),M(3624381080,2734883394),M(310598401,1164996542),M(607225278,1323610764),M(1426881987,3590304994),M(1925078388,4068182383),M(2162078206,991336113),M(2614888103,633803317),M(3248222580,3479774868),M(3835390401,2666613458),M(4022224774,944711139),M(264347078,2341262773),M(604807628,2007800933),M(770255983,1495990901),M(1249150122,1856431235),M(1555081692,3175218132),M(1996064986,2198950837),M(2554220882,3999719339),M(2821834349,766784016),M(2952996808,2566594879),M(3210313671,3203337956),M(3336571891,1034457026),M(3584528711,2466948901),M(113926993,3758326383),M(338241895,168717936),M(666307205,1188179964),M(773529912,1546045734),M(1294757372,1522805485),M(1396182291,2643833823),M(1695183700,2343527390),M(1986661051,1014477480),M(2177026350,1206759142),M(2456956037,344077627),M(2730485921,1290863460),M(2820302411,3158454273),M(3259730800,3505952657),M(3345764771,106217008),M(3516065817,3606008344),M(3600352804,1432725776),M(4094571909,1467031594),M(275423344,851169720),M(430227734,3100823752),M(506948616,1363258195),M(659060556,3750685593),M(883997877,3785050280),M(958139571,3318307427),M(1322822218,3812723403),M(1537002063,2003034995),M(1747873779,3602036899),M(1955562222,1575990012),M(2024104815,1125592928),M(2227730452,2716904306),M(2361852424,442776044),M(2428436474,593698344),M(2756734187,3733110249),M(3204031479,2999351573),M(3329325298,3815920427),M(3391569614,3928383900),M(3515267271,566280711),M(3940187606,3454069534),M(4118630271,4000239992),M(116418474,1914138554),M(174292421,2731055270),M(289380356,3203993006),M(460393269,320620315),M(685471733,587496836),M(852142971,1086792851),M(1017036298,365543100),M(1126000580,2618297676),M(1288033470,3409855158),M(1501505948,4234509866),M(1607167915,987167468),M(1816402316,1246189591)],P=[];!function(){for(var k=0;k<80;k++)P[k]=M()}();var N=E.SHA512=re.extend({_doReset:function(){this._hash=new ne.init([new J.init(1779033703,4089235720),new J.init(3144134277,2227873595),new J.init(1013904242,4271175723),new J.init(2773480762,1595750129),new J.init(1359893119,2917565137),new J.init(2600822924,725511199),new J.init(528734635,4215389547),new J.init(1541459225,327033209)])},_doProcessBlock:function(k,F){for(var H=this._hash.words,ae=H[0],ie=H[1],L=H[2],$=H[3],ue=H[4],te=H[5],oe=H[6],ce=H[7],Te=ae.high,we=ae.low,Ie=ie.high,Ue=ie.low,me=L.high,Me=L.low,Fe=$.high,ke=$.low,st=ue.high,Be=ue.low,Lt=te.high,Zt=te.low,Se=oe.high,Pe=oe.low,_e=ce.high,xe=ce.low,Tn=Te,yt=we,zt=Ie,$t=Ue,Et=me,wa=Me,Uu=Fe,po=ke,Vr=st,Ge=Be,zl=Lt,Qe=Zt,Cs=Se,Ss=Pe,Ts=_e,Ds=xe,dr=0;dr<80;dr++){var hr,za,$l=P[dr];if(dr<16)za=$l.high=0|k[F+2*dr],hr=$l.low=0|k[F+2*dr+1];else{var Af=P[dr-15],fr=Af.high,Ho=Af.low,Hu=(Ho>>>1|fr<<31)^(Ho>>>8|fr<<24)^(Ho>>>7|fr<<25),Pf=P[dr-2],go=Pf.high,Rs=Pf.low,Ef=(Rs>>>19|go<<13)^(Rs<<3|go>>>29)^(Rs>>>6|go<<26),If=P[dr-7],Wl=P[dr-16],Xl=Wl.low;$l.high=za=(za=(za=((fr>>>1|Ho<<31)^(fr>>>8|Ho<<24)^fr>>>7)+If.high+((hr=Hu+If.low)>>>0<Hu>>>0?1:0))+((go>>>19|Rs<<13)^(go<<3|Rs>>>29)^go>>>6)+((hr+=Ef)>>>0<Ef>>>0?1:0))+Wl.high+((hr+=Xl)>>>0<Xl>>>0?1:0),$l.low=hr}var Ki,Of=Vr&zl^~Vr&Cs,Yl=Ge&Qe^~Ge&Ss,zu=Tn&zt^Tn&Et^zt&Et,wi=(yt>>>28|Tn<<4)^(yt<<30|Tn>>>2)^(yt<<25|Tn>>>7),Wu=V[dr],Ql=Wu.low,Ca=Ts+((Vr>>>14|Ge<<18)^(Vr>>>18|Ge<<14)^(Vr<<23|Ge>>>9))+((Ki=Ds+((Ge>>>14|Vr<<18)^(Ge>>>18|Vr<<14)^(Ge<<23|Vr>>>9)))>>>0<Ds>>>0?1:0),Fr=wi+(yt&$t^yt&wa^$t&wa);Ts=Cs,Ds=Ss,Cs=zl,Ss=Qe,zl=Vr,Qe=Ge,Vr=Uu+(Ca=(Ca=(Ca=Ca+Of+((Ki+=Yl)>>>0<Yl>>>0?1:0))+Wu.high+((Ki+=Ql)>>>0<Ql>>>0?1:0))+za+((Ki+=hr)>>>0<hr>>>0?1:0))+((Ge=po+Ki|0)>>>0<po>>>0?1:0)|0,Uu=Et,po=wa,Et=zt,wa=$t,zt=Tn,$t=yt,Tn=Ca+(((Tn>>>28|yt<<4)^(Tn<<30|yt>>>2)^(Tn<<25|yt>>>7))+zu+(Fr>>>0<wi>>>0?1:0))+((yt=Ki+Fr|0)>>>0<Ki>>>0?1:0)|0}we=ae.low=we+yt,ae.high=Te+Tn+(we>>>0<yt>>>0?1:0),Ue=ie.low=Ue+$t,ie.high=Ie+zt+(Ue>>>0<$t>>>0?1:0),Me=L.low=Me+wa,L.high=me+Et+(Me>>>0<wa>>>0?1:0),ke=$.low=ke+po,$.high=Fe+Uu+(ke>>>0<po>>>0?1:0),Be=ue.low=Be+Ge,ue.high=st+Vr+(Be>>>0<Ge>>>0?1:0),Zt=te.low=Zt+Qe,te.high=Lt+zl+(Zt>>>0<Qe>>>0?1:0),Pe=oe.low=Pe+Ss,oe.high=Se+Cs+(Pe>>>0<Ss>>>0?1:0),xe=ce.low=xe+Ds,ce.high=_e+Ts+(xe>>>0<Ds>>>0?1:0)},_doFinalize:function(){var k=this._data,F=k.words,H=8*this._nDataBytes,ae=8*k.sigBytes;return F[ae>>>5]|=128<<24-ae%32,F[30+(ae+128>>>10<<5)]=Math.floor(H/4294967296),F[31+(ae+128>>>10<<5)]=H,k.sigBytes=4*F.length,this._process(),this._hash.toX32()},clone:function(){var k=re.clone.call(this);return k._hash=this._hash.clone(),k},blockSize:32});U.SHA512=re._createHelper(N),U.HmacSHA512=re._createHmacHelper(N)}(),W.SHA512)},7243:function(Ce,De,q){var W;Ce.exports=(W=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var U=W,ee=U.lib,re=ee.WordArray,pe=ee.BlockCipher,J=U.algo,ne=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],E=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],M=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],V=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],P=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],N=J.DES=pe.extend({_doReset:function(){for(var ie=this._key.words,L=[],$=0;$<56;$++){var ue=ne[$]-1;L[$]=ie[ue>>>5]>>>31-ue%32&1}for(var te=this._subKeys=[],oe=0;oe<16;oe++){var ce=te[oe]=[],Te=M[oe];for($=0;$<24;$++)ce[$/6|0]|=L[(E[$]-1+Te)%28]<<31-$%6,ce[4+($/6|0)]|=L[28+(E[$+24]-1+Te)%28]<<31-$%6;for(ce[0]=ce[0]<<1|ce[0]>>>31,$=1;$<7;$++)ce[$]=ce[$]>>>4*($-1)+3;ce[7]=ce[7]<<5|ce[7]>>>27}var we=this._invSubKeys=[];for($=0;$<16;$++)we[$]=te[15-$]},encryptBlock:function(ae,ie){this._doCryptBlock(ae,ie,this._subKeys)},decryptBlock:function(ae,ie){this._doCryptBlock(ae,ie,this._invSubKeys)},_doCryptBlock:function(ae,ie,L){this._lBlock=ae[ie],this._rBlock=ae[ie+1],k.call(this,4,252645135),k.call(this,16,65535),F.call(this,2,858993459),F.call(this,8,16711935),k.call(this,1,1431655765);for(var $=0;$<16;$++){for(var ue=L[$],te=this._lBlock,oe=this._rBlock,ce=0,Te=0;Te<8;Te++)ce|=V[Te][((oe^ue[Te])&P[Te])>>>0];this._lBlock=oe,this._rBlock=te^ce}var we=this._lBlock;this._lBlock=this._rBlock,this._rBlock=we,k.call(this,1,1431655765),F.call(this,8,16711935),F.call(this,2,858993459),k.call(this,16,65535),k.call(this,4,252645135),ae[ie]=this._lBlock,ae[ie+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function k(ae,ie){var L=(this._lBlock>>>ae^this._rBlock)&ie;this._rBlock^=L,this._lBlock^=L<<ae}function F(ae,ie){var L=(this._rBlock>>>ae^this._lBlock)&ie;this._lBlock^=L,this._rBlock^=L<<ae}U.DES=pe._createHelper(N);var H=J.TripleDES=pe.extend({_doReset:function(){var ie=this._key.words;if(2!==ie.length&&4!==ie.length&&ie.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var L=ie.slice(0,2),$=ie.length<4?ie.slice(0,2):ie.slice(2,4),ue=ie.length<6?ie.slice(0,2):ie.slice(4,6);this._des1=N.createEncryptor(re.create(L)),this._des2=N.createEncryptor(re.create($)),this._des3=N.createEncryptor(re.create(ue))},encryptBlock:function(ae,ie){this._des1.encryptBlock(ae,ie),this._des2.decryptBlock(ae,ie),this._des3.encryptBlock(ae,ie)},decryptBlock:function(ae,ie){this._des3.decryptBlock(ae,ie),this._des2.encryptBlock(ae,ie),this._des1.decryptBlock(ae,ie)},keySize:6,ivSize:2,blockSize:2});U.TripleDES=pe._createHelper(H)}(),W.TripleDES)},401:function(Ce,De,q){var re,pe,J,ne,W;Ce.exports=(W=q(7585),pe=(re=W.lib).Base,J=re.WordArray,(ne=W.x64={}).Word=pe.extend({init:function(V,P){this.high=V,this.low=P}}),ne.WordArray=pe.extend({init:function(V,P){V=this.words=V||[],this.sigBytes=null!=P?P:8*V.length},toX32:function(){for(var V=this.words,P=V.length,N=[],k=0;k<P;k++){var F=V[k];N.push(F.high),N.push(F.low)}return J.create(N,this.sigBytes)},clone:function(){for(var V=pe.clone.call(this),P=V.words=this.words.slice(0),N=P.length,k=0;k<N;k++)P[k]=P[k].clone();return V}}),W)},340:(Ce,De,q)=>{var W=q(9471),U=q(2992),ee=q(7657),re=q(5583),pe=q(1929),J=q(8083),ne=q(3818);ne.alea=W,ne.xor128=U,ne.xorwow=ee,ne.xorshift7=re,ne.xor4096=pe,ne.tychei=J,Ce.exports=ne},9471:function(Ce,De,q){var W;!function(U,ee,re){function pe(M){var V=this,P=function E(){var M=4022871197;return function(P){P=String(P);for(var N=0;N<P.length;N++){var k=.02519603282416938*(M+=P.charCodeAt(N));k-=M=k>>>0,M=(k*=M)>>>0,M+=4294967296*(k-=M)}return 2.3283064365386963e-10*(M>>>0)}}();V.next=function(){var N=2091639*V.s0+2.3283064365386963e-10*V.c;return V.s0=V.s1,V.s1=V.s2,V.s2=N-(V.c=0|N)},V.c=1,V.s0=P(" "),V.s1=P(" "),V.s2=P(" "),V.s0-=P(M),V.s0<0&&(V.s0+=1),V.s1-=P(M),V.s1<0&&(V.s1+=1),V.s2-=P(M),V.s2<0&&(V.s2+=1),P=null}function J(M,V){return V.c=M.c,V.s0=M.s0,V.s1=M.s1,V.s2=M.s2,V}function ne(M,V){var P=new pe(M),N=V&&V.state,k=P.next;return k.int32=function(){return 4294967296*P.next()|0},k.double=function(){return k()+11102230246251565e-32*(2097152*k()|0)},k.quick=k,N&&("object"==typeof N&&J(N,P),k.state=function(){return J(P,{})}),k}ee&&ee.exports?ee.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(De,q,De,ee))&&(ee.exports=W):this.alea=ne}(0,Ce=q.nmd(Ce))},8083:function(Ce,De,q){var W;!function(U,ee,re){function pe(E){var M=this,V="";M.next=function(){var N=M.b,k=M.c,F=M.d,H=M.a;return N=N<<25^N>>>7^k,k=k-F|0,F=F<<24^F>>>8^H,H=H-N|0,M.b=N=N<<20^N>>>12^k,M.c=k=k-F|0,M.d=F<<16^k>>>16^H,M.a=H-N|0},M.a=0,M.b=0,M.c=-1640531527,M.d=1367130551,E===Math.floor(E)?(M.a=E/4294967296|0,M.b=0|E):V+=E;for(var P=0;P<V.length+20;P++)M.b^=0|V.charCodeAt(P),M.next()}function J(E,M){return M.a=E.a,M.b=E.b,M.c=E.c,M.d=E.d,M}function ne(E,M){var V=new pe(E),P=M&&M.state,N=function(){return(V.next()>>>0)/4294967296};return N.double=function(){do{var H=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===H);return H},N.int32=V.next,N.quick=N,P&&("object"==typeof P&&J(P,V),N.state=function(){return J(V,{})}),N}ee&&ee.exports?ee.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(De,q,De,ee))&&(ee.exports=W):this.tychei=ne}(0,Ce=q.nmd(Ce))},2992:function(Ce,De,q){var W;!function(U,ee,re){function pe(E){var M=this,V="";M.x=0,M.y=0,M.z=0,M.w=0,M.next=function(){var N=M.x^M.x<<11;return M.x=M.y,M.y=M.z,M.z=M.w,M.w^=M.w>>>19^N^N>>>8},E===(0|E)?M.x=E:V+=E;for(var P=0;P<V.length+64;P++)M.x^=0|V.charCodeAt(P),M.next()}function J(E,M){return M.x=E.x,M.y=E.y,M.z=E.z,M.w=E.w,M}function ne(E,M){var V=new pe(E),P=M&&M.state,N=function(){return(V.next()>>>0)/4294967296};return N.double=function(){do{var H=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===H);return H},N.int32=V.next,N.quick=N,P&&("object"==typeof P&&J(P,V),N.state=function(){return J(V,{})}),N}ee&&ee.exports?ee.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(De,q,De,ee))&&(ee.exports=W):this.xor128=ne}(0,Ce=q.nmd(Ce))},1929:function(Ce,De,q){var W;!function(U,ee,re){function pe(E){var M=this;M.next=function(){var F,H,P=M.w,N=M.X,k=M.i;return M.w=P=P+1640531527|0,H=N[k+34&127],F=N[k=k+1&127],H^=H<<13,F^=F<<17,H=N[k]=(H^=H>>>15)^(F^=F>>>12),M.i=k,H+(P^P>>>16)|0},function V(P,N){var k,F,H,ae,ie,L=[],$=128;for(N===(0|N)?(F=N,N=null):(N+="\0",F=0,$=Math.max($,N.length)),H=0,ae=-32;ae<$;++ae)N&&(F^=N.charCodeAt((ae+32)%N.length)),0===ae&&(ie=F),F^=F<<10,F^=F>>>15,F^=F<<4,F^=F>>>13,ae>=0&&(H=0==(k=L[127&ae]^=F+(ie=ie+1640531527|0))?H+1:0);for(H>=128&&(L[127&(N&&N.length||0)]=-1),H=127,ae=512;ae>0;--ae)F=L[H+34&127],k=L[H=H+1&127],F^=F<<13,k^=k<<17,L[H]=(F^=F>>>15)^(k^=k>>>12);P.w=ie,P.X=L,P.i=H}(M,E)}function J(E,M){return M.i=E.i,M.w=E.w,M.X=E.X.slice(),M}function ne(E,M){null==E&&(E=+new Date);var V=new pe(E),P=M&&M.state,N=function(){return(V.next()>>>0)/4294967296};return N.double=function(){do{var H=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===H);return H},N.int32=V.next,N.quick=N,P&&(P.X&&J(P,V),N.state=function(){return J(V,{})}),N}ee&&ee.exports?ee.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(De,q,De,ee))&&(ee.exports=W):this.xor4096=ne}(0,Ce=q.nmd(Ce))},5583:function(Ce,De,q){var W;!function(U,ee,re){function pe(E){var M=this;M.next=function(){var k,F,P=M.x,N=M.i;return k=P[N],F=(k^=k>>>7)^k<<24,F^=(k=P[N+1&7])^k>>>10,F^=(k=P[N+3&7])^k>>>3,F^=(k=P[N+4&7])^k<<7,k=P[N+7&7],P[N]=F^=(k^=k<<13)^k<<9,M.i=N+1&7,F},function V(P,N){var k,H=[];if(N===(0|N))H[0]=N;else for(N=""+N,k=0;k<N.length;++k)H[7&k]=H[7&k]<<15^N.charCodeAt(k)+H[k+1&7]<<13;for(;H.length<8;)H.push(0);for(k=0;k<8&&0===H[k];++k);for(8==k&&(H[7]=-1),P.x=H,P.i=0,k=256;k>0;--k)P.next()}(M,E)}function J(E,M){return M.x=E.x.slice(),M.i=E.i,M}function ne(E,M){null==E&&(E=+new Date);var V=new pe(E),P=M&&M.state,N=function(){return(V.next()>>>0)/4294967296};return N.double=function(){do{var H=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===H);return H},N.int32=V.next,N.quick=N,P&&(P.x&&J(P,V),N.state=function(){return J(V,{})}),N}ee&&ee.exports?ee.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(De,q,De,ee))&&(ee.exports=W):this.xorshift7=ne}(0,Ce=q.nmd(Ce))},7657:function(Ce,De,q){var W;!function(U,ee,re){function pe(E){var M=this,V="";M.next=function(){var N=M.x^M.x>>>2;return M.x=M.y,M.y=M.z,M.z=M.w,M.w=M.v,(M.d=M.d+362437|0)+(M.v=M.v^M.v<<4^N^N<<1)|0},M.x=0,M.y=0,M.z=0,M.w=0,M.v=0,E===(0|E)?M.x=E:V+=E;for(var P=0;P<V.length+64;P++)M.x^=0|V.charCodeAt(P),P==V.length&&(M.d=M.x<<10^M.x>>>4),M.next()}function J(E,M){return M.x=E.x,M.y=E.y,M.z=E.z,M.w=E.w,M.v=E.v,M.d=E.d,M}function ne(E,M){var V=new pe(E),P=M&&M.state,N=function(){return(V.next()>>>0)/4294967296};return N.double=function(){do{var H=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===H);return H},N.int32=V.next,N.quick=N,P&&("object"==typeof P&&J(P,V),N.state=function(){return J(V,{})}),N}ee&&ee.exports?ee.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(De,q,De,ee))&&(ee.exports=W):this.xorwow=ne}(0,Ce=q.nmd(Ce))},3818:function(Ce,De,q){var W;!function(U,ee,re){var k,pe=256,M=re.pow(pe,6),V=re.pow(2,52),P=2*V,N=255;function F(te,oe,ce){var Te=[],we=L(ie((oe=1==oe?{entropy:!0}:oe||{}).entropy?[te,ue(ee)]:null==te?function $(){try{var te;return k&&(te=k.randomBytes)?te=te(pe):(te=new Uint8Array(pe),(U.crypto||U.msCrypto).getRandomValues(te)),ue(te)}catch(Te){var oe=U.navigator,ce=oe&&oe.plugins;return[+new Date,U,ce,U.screen,ue(ee)]}}():te,3),Te),Ie=new H(Te),Ue=function(){for(var me=Ie.g(6),Me=M,Fe=0;me<V;)me=(me+Fe)*pe,Me*=pe,Fe=Ie.g(1);for(;me>=P;)me/=2,Me/=2,Fe>>>=1;return(me+Fe)/Me};return Ue.int32=function(){return 0|Ie.g(4)},Ue.quick=function(){return Ie.g(4)/4294967296},Ue.double=Ue,L(ue(Ie.S),ee),(oe.pass||ce||function(me,Me,Fe,ke){return ke&&(ke.S&&ae(ke,Ie),me.state=function(){return ae(Ie,{})}),Fe?(re.random=me,Me):me})(Ue,we,"global"in oe?oe.global:this==re,oe.state)}function H(te){var oe,ce=te.length,Te=this,we=0,Ie=Te.i=Te.j=0,Ue=Te.S=[];for(ce||(te=[ce++]);we<pe;)Ue[we]=we++;for(we=0;we<pe;we++)Ue[we]=Ue[Ie=N&Ie+te[we%ce]+(oe=Ue[we])],Ue[Ie]=oe;(Te.g=function(me){for(var Me,Fe=0,ke=Te.i,st=Te.j,Be=Te.S;me--;)Me=Be[ke=N&ke+1],Fe=Fe*pe+Be[N&(Be[ke]=Be[st=N&st+Me])+(Be[st]=Me)];return Te.i=ke,Te.j=st,Fe})(pe)}function ae(te,oe){return oe.i=te.i,oe.j=te.j,oe.S=te.S.slice(),oe}function ie(te,oe){var we,ce=[],Te=typeof te;if(oe&&"object"==Te)for(we in te)try{ce.push(ie(te[we],oe-1))}catch(Ie){}return ce.length?ce:"string"==Te?te:te+"\0"}function L(te,oe){for(var Te,ce=te+"",we=0;we<ce.length;)oe[N&we]=N&(Te^=19*oe[N&we])+ce.charCodeAt(we++);return ue(oe)}function ue(te){return String.fromCharCode.apply(0,te)}if(L(re.random(),ee),Ce.exports){Ce.exports=F;try{k=q(5042)}catch(te){}}else void 0!==(W=function(){return F}.call(De,q,De,Ce))&&(Ce.exports=W)}("undefined"!=typeof self?self:this,[],Math)},2480:()=>{},5042:()=>{}},Ce=>{Ce(Ce.s=2179)}]);