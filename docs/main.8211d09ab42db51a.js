var WW=Object.defineProperty,l3=Object.getOwnPropertySymbols,XW=Object.prototype.hasOwnProperty,YW=Object.prototype.propertyIsEnumerable,c3=(ye,ue,H)=>ue in ye?WW(ye,ue,{enumerable:!0,configurable:!0,writable:!0,value:H}):ye[ue]=H,So=(ye,ue)=>{for(var H in ue||(ue={}))XW.call(ue,H)&&c3(ye,H,ue[H]);if(l3)for(var H of l3(ue))YW.call(ue,H)&&c3(ye,H,ue[H]);return ye};(self.webpackChunkCultura=self.webpackChunkCultura||[]).push([[179],{9711:(ye,ue,H)=>{"use strict";function j(t){return"function"==typeof t}function W(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const I=W(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function G(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class p{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(j(i))try{i()}catch(a){n=a instanceof I?a.errors:[a]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const a of r)try{E(a)}catch(c){n=null!=n?n:[],c instanceof I?n=[...n,...c.errors]:n.push(c)}}if(n)throw new I(n)}}add(n){var e;if(n&&n!==this)if(this.closed)E(n);else{if(n instanceof p){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&G(e,n)}remove(n){const{_teardowns:e}=this;e&&G(e,n),n instanceof p&&n._removeParent(this)}}p.EMPTY=(()=>{const t=new p;return t.closed=!0,t})();const k=p.EMPTY;function P(t){return t instanceof p||t&&"closed"in t&&j(t.remove)&&j(t.add)&&j(t.unsubscribe)}function E(t){j(t)?t():t.unsubscribe()}const R={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},x={setTimeout(...t){const{delegate:n}=x;return((null==n?void 0:n.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:n}=x;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function S(t){x.setTimeout(()=>{const{onUnhandledError:n}=R;if(!n)throw t;n(t)})}function O(){}const C=z("C",void 0,void 0);function z(t,n,e){return{kind:t,value:n,error:e}}let X=null;function U(t){if(R.useDeprecatedSynchronousErrorHandling){const n=!X;if(n&&(X={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=X;if(X=null,e)throw i}}else t()}class ee extends p{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,P(n)&&n.add(this)):this.destination=o}static create(n,e,i){return new De(n,e,i)}next(n){this.isStopped?y(function N(t){return z("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?y(function B(t){return z("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?y(C,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ae=Function.prototype.bind;function ge(t,n){return ae.call(t,n)}class Ce{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){we(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){we(i)}else we(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){we(e)}}}class De extends ee{constructor(n,e,i){let r;if(super(),j(n)||!n)r={next:null!=n?n:void 0,error:null!=e?e:void 0,complete:null!=i?i:void 0};else{let a;this&&R.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&ge(n.next,a),error:n.error&&ge(n.error,a),complete:n.complete&&ge(n.complete,a)}):r=n}this.destination=new Ce(r)}}function we(t){R.useDeprecatedSynchronousErrorHandling?function Z(t){R.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=t)}(t):S(t)}function y(t,n){const{onStoppedNotification:e}=R;e&&x.setTimeout(()=>e(t,n))}const o={closed:!0,next:O,error:function Oe(t){throw t},complete:O},l="function"==typeof Symbol&&Symbol.observable||"@@observable";function f(t){return t}let b=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const a=function s(t){return t&&t instanceof ee||function g(t){return t&&j(t.next)&&j(t.error)&&j(t.complete)}(t)&&P(t)}(e)?e:new De(e,i,r);return U(()=>{const{operator:c,source:d}=this;a.add(c?c.call(a,d):d?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=w(i))((r,a)=>{const c=new De({next:d=>{try{e(d)}catch(m){a(m),c.unsubscribe()}},error:a,complete:r});this.subscribe(c)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[l](){return this}pipe(...e){return function h(t){return 0===t.length?f:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}(e)(this)}toPromise(e){return new(e=w(e))((i,r)=>{let a;this.subscribe(c=>a=c,c=>r(c),()=>i(a))})}}return t.create=n=>new t(n),t})();function w(t){var n;return null!==(n=null!=t?t:R.Promise)&&void 0!==n?n:Promise}const v=W(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $=(()=>{class t extends b{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new L(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new v}next(e){U(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const r of i)r.next(e)}})}error(e){U(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){U(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:a}=this;return i||r?k:(a.push(e),new p(()=>G(a,e)))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:a}=this;i?e.error(r):a&&e.complete()}asObservable(){const e=new b;return e.source=this,e}}return t.create=(n,e)=>new L(n,e),t})();class L extends ${constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:k}}function ie(t){return j(null==t?void 0:t.lift)}function Se(t){return n=>{if(ie(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ke(t,n,e,i,r){return new Be(t,n,e,i,r)}class Be extends ee{constructor(n,e,i,r,a,c){super(n),this.onFinalize=a,this.shouldUnsubscribe=c,this._next=e?function(d){try{e(d)}catch(m){n.error(m)}}:super._next,this._error=r?function(d){try{r(d)}catch(m){n.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(d){n.error(d)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Pe(t,n){return Se((e,i)=>{let r=0;e.subscribe(ke(i,a=>{i.next(t.call(n,a,r++))}))})}function se(t,n,e,i){var c,r=arguments.length,a=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var d=t.length-1;d>=0;d--)(c=t[d])&&(a=(r<3?c(a):r>3?c(n,e,a):c(n,e))||a);return r>3&&a&&Object.defineProperty(n,e,a),a}function Re(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)}function Qe(t){return this instanceof Qe?(this.v=t,this):new Qe(t)}function rn(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(t,n||[]),a=[];return r={},c("next"),c("throw"),c("return"),r[Symbol.asyncIterator]=function(){return this},r;function c(q){i[q]&&(r[q]=function(Q){return new Promise(function(te,oe){a.push([q,Q,te,oe])>1||d(q,Q)})})}function d(q,Q){try{!function m(q){q.value instanceof Qe?Promise.resolve(q.value.v).then(_,T):A(a[0][2],q)}(i[q](Q))}catch(te){A(a[0][3],te)}}function _(q){d("next",q)}function T(q){d("throw",q)}function A(q,Q){q(Q),a.shift(),a.length&&d(a[0][0],a[0][1])}}function J(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function xi(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=t[a]&&function(c){return new Promise(function(d,m){!function r(a,c,d,m){Promise.resolve(m).then(function(_){a({value:_,done:d})},c)}(d,m,(c=t[a](c)).done,c.value)})}}}const Pi=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function it(t){return j(null==t?void 0:t.then)}function rt(t){return j(t[l])}function bi(t){return Symbol.asyncIterator&&j(null==t?void 0:t[Symbol.asyncIterator])}function ht(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Sr=function _t(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function gt(t){return j(null==t?void 0:t[Sr])}function vt(t){return rn(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield Qe(e.read());if(r)return yield Qe(void 0);yield yield Qe(i)}}finally{e.releaseLock()}})}function Dr(t){return j(null==t?void 0:t.getReader)}function st(t){if(t instanceof b)return t;if(null!=t){if(rt(t))return function yt(t){return new b(n=>{const e=t[l]();if(j(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Pi(t))return function Ir(t){return new b(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(it(t))return function mt(t){return new b(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,S)})}(t);if(bi(t))return Cr(t);if(gt(t))return function wt(t){return new b(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(Dr(t))return function ct(t){return Cr(vt(t))}(t)}throw ht(t)}function Cr(t){return new b(n=>{(function ft(t,n){var e,i,r,a;return function Ge(t,n,e,i){return new(e||(e=Promise))(function(a,c){function d(T){try{_(i.next(T))}catch(A){c(A)}}function m(T){try{_(i.throw(T))}catch(A){c(A)}}function _(T){T.done?a(T.value):function r(a){return a instanceof e?a:new e(function(c){c(a)})}(T.value).then(d,m)}_((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=J(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(c){r={error:c}}finally{try{i&&!i.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function An(t,n,e,i=0,r=!1){const a=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!r)return a}function at(t,n,e=1/0){return j(n)?at((i,r)=>Pe((a,c)=>n(i,a,r,c))(st(t(i,r))),e):("number"==typeof n&&(e=n),Se((i,r)=>function St(t,n,e,i,r,a,c,d){const m=[];let _=0,T=0,A=!1;const q=()=>{A&&!m.length&&!_&&n.complete()},Q=oe=>_<i?te(oe):m.push(oe),te=oe=>{a&&n.next(oe),_++;let de=!1;st(e(oe,T++)).subscribe(ke(n,be=>{null==r||r(be),a?Q(be):n.next(be)},()=>{de=!0},void 0,()=>{if(de)try{for(_--;m.length&&_<i;){const be=m.shift();c?An(n,c,()=>te(be)):te(be)}q()}catch(be){n.error(be)}}))};return t.subscribe(ke(n,Q,()=>{A=!0,q()})),()=>{null==d||d()}}(i,r,t,e)))}function Tr(t=1/0){return at(f,t)}const dt=new b(t=>t.complete());function Tt(t){return t&&j(t.schedule)}function Ct(t){return t[t.length-1]}function Fn(t){return j(Ct(t))?t.pop():void 0}function Ri(t){return Tt(Ct(t))?t.pop():void 0}function zn(t,n=0){return Se((e,i)=>{e.subscribe(ke(i,r=>An(i,t,()=>i.next(r),n),()=>An(i,t,()=>i.complete(),n),r=>An(i,t,()=>i.error(r),n)))})}function jn(t,n=0){return Se((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function qn(t,n){if(!t)throw new Error("Iterable cannot be null");return new b(e=>{An(e,n,()=>{const i=t[Symbol.asyncIterator]();An(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Vi(t,n){return n?function or(t,n){if(null!=t){if(rt(t))return function tr(t,n){return st(t).pipe(jn(n),zn(n))}(t,n);if(Pi(t))return function nr(t,n){return new b(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(it(t))return function ir(t,n){return st(t).pipe(jn(n),zn(n))}(t,n);if(bi(t))return qn(t,n);if(gt(t))return function rr(t,n){return new b(e=>{let i;return An(e,n,()=>{i=t[Sr](),An(e,n,()=>{let r,a;try{({value:r,done:a}=i.next())}catch(c){return void e.error(c)}a?e.complete():e.next(r)},0,!0)}),()=>j(null==i?void 0:i.return)&&i.return()})}(t,n);if(Dr(t))return function ar(t,n){return qn(vt(t),n)}(t,n)}throw ht(t)}(t,n):st(t)}function $n(...t){const n=Ri(t),e=function Oi(t,n){return"number"==typeof Ct(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?st(i[0]):Tr(e)(Vi(i,n)):dt}function Ni(t){return t<=0?()=>dt:Se((n,e)=>{let i=0;n.subscribe(ke(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function Wn(t={}){const{connector:n=(()=>new $),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return a=>{let c=null,d=null,m=null,_=0,T=!1,A=!1;const q=()=>{null==d||d.unsubscribe(),d=null},Q=()=>{q(),c=m=null,T=A=!1},te=()=>{const oe=c;Q(),null==oe||oe.unsubscribe()};return Se((oe,de)=>{_++,!A&&!T&&q();const be=m=null!=m?m:n();de.add(()=>{_--,0===_&&!A&&!T&&(d=Ln(te,r))}),be.subscribe(de),c||(c=new De({next:ce=>be.next(ce),error:ce=>{A=!0,q(),d=Ln(Q,e,ce),be.error(ce)},complete:()=>{T=!0,q(),d=Ln(Q,i),be.complete()}}),Vi(oe).subscribe(c))})(a)}}function Ln(t,n,...e){return!0===n?(t(),null):!1===n?null:n(...e).pipe(Ni(1)).subscribe(()=>t())}function vi(t){for(let n in t)if(t[n]===vi)return n;throw Error("Could not find renamed property on target object.")}function Un(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Pn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Pn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function Sl(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const _u=vi({__forward_ref__:vi});function En(t){return t.__forward_ref__=En,t.toString=function(){return Pn(this())},t}function Zi(t){return F1(t)?t():t}function F1(t){return"function"==typeof t&&t.hasOwnProperty(_u)&&t.__forward_ref__===En}class Cn extends Error{constructor(n,e){super(function j0(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function $i(t){return"string"==typeof t?t:null==t?"":String(t)}function Ua(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():$i(t)}function cf(t,n){const e=n?` in ${n}`:"";throw new Cn(-201,`No provider for ${Ua(t)} found${e}`)}function kr(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}function si(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xn(t){return{providers:t.providers||[],imports:t.imports||[]}}function q0(t){return L1(t,uf)||L1(t,H1)}function L1(t,n){return t.hasOwnProperty(n)?t[n]:null}function U1(t){return t&&(t.hasOwnProperty($0)||t.hasOwnProperty(v3))?t[$0]:null}const uf=vi({\u0275prov:vi}),$0=vi({\u0275inj:vi}),H1=vi({ngInjectableDef:vi}),v3=vi({ngInjectorDef:vi});var Xi=(()=>((Xi=Xi||{})[Xi.Default=0]="Default",Xi[Xi.Host=1]="Host",Xi[Xi.Self=2]="Self",Xi[Xi.SkipSelf=4]="SkipSelf",Xi[Xi.Optional=8]="Optional",Xi))();let W0;function Qs(t){const n=W0;return W0=t,n}function G1(t,n,e){const i=q0(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Xi.Optional?null:void 0!==n?n:void cf(Pn(t),"Injector")}function Js(t){return{toString:t}.toString()}var zo=(()=>((zo=zo||{})[zo.OnPush=0]="OnPush",zo[zo.Default=1]="Default",zo))(),cs=(()=>{return(t=cs||(cs={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",cs;var t})();const b3="undefined"!=typeof globalThis&&globalThis,_3="undefined"!=typeof window&&window,y3="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,dr=b3||"undefined"!=typeof global&&global||_3||y3,oc={},vr=[],df=vi({\u0275cmp:vi}),X0=vi({\u0275dir:vi}),Y0=vi({\u0275pipe:vi}),z1=vi({\u0275mod:vi}),Ps=vi({\u0275fac:vi}),yu=vi({__NG_ELEMENT_ID__:vi});let w3=0;function mi(t){return Js(()=>{const e={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===zo.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||vr,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||cs.Emulated,id:"c",styles:t.styles||vr,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,a=t.features,c=t.pipes;return i.id+=w3++,i.inputs=W1(t.inputs,e),i.outputs=W1(t.outputs),a&&a.forEach(d=>d(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(j1):null,i.pipeDefs=c?()=>("function"==typeof c?c():c).map(q1):null,i})}function j1(t){return Da(t)||function el(t){return t[X0]||null}(t)}function q1(t){return function Cl(t){return t[Y0]||null}(t)}const $1={};function sr(t){return Js(()=>{const n={type:t.type,bootstrap:t.bootstrap||vr,declarations:t.declarations||vr,imports:t.imports||vr,exports:t.exports||vr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&($1[t.id]=t.type),n})}function W1(t,n){if(null==t)return oc;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=i,n&&(n[r]=a)}return e}const Yt=mi;function Ja(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Da(t){return t[df]||null}function Co(t,n){const e=t[z1]||null;if(!e&&!0===n)throw new Error(`Type ${Pn(t)} does not have '\u0275mod' property.`);return e}function us(t){return Array.isArray(t)&&"object"==typeof t[1]}function qo(t){return Array.isArray(t)&&!0===t[1]}function Q0(t){return 0!=(8&t.flags)}function gf(t){return 2==(2&t.flags)}function vf(t){return 1==(1&t.flags)}function $o(t){return null!==t.template}function R3(t){return 0!=(512&t[2])}function Rl(t,n){return t.hasOwnProperty(Ps)?t[Ps]:null}class A3{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function ra(){return Y1}function Y1(t){return t.type.prototype.ngOnChanges&&(t.setInput=E3),P3}function P3(){const t=Z1(this),n=null==t?void 0:t.current;if(n){const e=t.previous;if(e===oc)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function E3(t,n,e,i){const r=Z1(t)||function I3(t,n){return t[K1]=n}(t,{previous:oc,current:null}),a=r.current||(r.current={}),c=r.previous,d=this.declaredInputs[e],m=c[d];a[d]=new A3(m&&m.currentValue,n,c===oc),t[i]=n}ra.ngInherit=!0;const K1="__ngSimpleChanges__";function Z1(t){return t[K1]||null}let np;function rp(){return void 0!==np?np:"undefined"!=typeof document?document:void 0}function Wr(t){return!!t.listen}const Q1={createRenderer:(t,n)=>rp()};function aa(t){for(;Array.isArray(t);)t=t[0];return t}function mf(t,n){return aa(n[t])}function xo(t,n){return aa(n[t.index])}function ap(t,n){return t.data[n]}function dc(t,n){return t[n]}function co(t,n){const e=n[t];return us(e)?e:e[0]}function J1(t){return 4==(4&t[2])}function op(t){return 128==(128&t[2])}function tl(t,n){return null==n?null:t[n]}function eb(t){t[18]=0}function sp(t,n){t[5]+=n;let e=t,i=t[3];for(;null!==i&&(1===n&&1===e[5]||-1===n&&0===e[5]);)i[5]+=n,e=i,i=i[3]}const Fi={lFrame:lb(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function tb(){return Fi.bindingsEnabled}function Et(){return Fi.lFrame.lView}function Tn(){return Fi.lFrame.tView}function me(t){return Fi.lFrame.contextLView=t,t[8]}function ca(){let t=ib();for(;null!==t&&64===t.type;)t=t.parent;return t}function ib(){return Fi.lFrame.currentTNode}function Tu(){const t=Fi.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function ds(t,n){const e=Fi.lFrame;e.currentTNode=t,e.isParent=n}function lp(){return Fi.lFrame.isParent}function cp(){Fi.lFrame.isParent=!1}function bf(){return Fi.isInCheckNoChangesMode}function _f(t){Fi.isInCheckNoChangesMode=t}function Ha(){const t=Fi.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Es(){return Fi.lFrame.bindingIndex}function fc(){return Fi.lFrame.bindingIndex++}function Is(t){const n=Fi.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function rb(t){Fi.lFrame.inI18n=t}function K3(t,n){const e=Fi.lFrame;e.bindingIndex=e.bindingRootIndex=t,up(n)}function up(t){Fi.lFrame.currentDirectiveIndex=t}function ab(){return Fi.lFrame.currentQueryIndex}function fp(t){Fi.lFrame.currentQueryIndex=t}function Q3(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function ob(t,n,e){if(e&Xi.SkipSelf){let r=n,a=t;for(;!(r=r.parent,null!==r||e&Xi.Host||(r=Q3(a),null===r||(a=a[15],10&r.type))););if(null===r)return!1;n=r,t=a}const i=Fi.lFrame=sb();return i.currentTNode=n,i.lView=t,!0}function yf(t){const n=sb(),e=t[1];Fi.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function sb(){const t=Fi.lFrame,n=null===t?null:t.child;return null===n?lb(t):n}function lb(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function cb(){const t=Fi.lFrame;return Fi.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ub=cb;function wf(){const t=cb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ga(){return Fi.lFrame.selectedIndex}function il(t){Fi.lFrame.selectedIndex=t}function Xr(){const t=Fi.lFrame;return ap(t.tView,t.selectedIndex)}function Sf(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:c,ngAfterContentChecked:d,ngAfterViewInit:m,ngAfterViewChecked:_,ngOnDestroy:T}=a;c&&(t.contentHooks||(t.contentHooks=[])).push(-e,c),d&&((t.contentHooks||(t.contentHooks=[])).push(e,d),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,d)),m&&(t.viewHooks||(t.viewHooks=[])).push(-e,m),_&&((t.viewHooks||(t.viewHooks=[])).push(e,_),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,_)),null!=T&&(t.destroyHooks||(t.destroyHooks=[])).push(e,T)}}function Cf(t,n,e){db(t,n,3,e)}function Tf(t,n,e,i){(3&t[2])===e&&db(t,n,e,i)}function hp(t,n){let e=t[2];(3&e)===n&&(e&=2047,e+=1,t[2]=e)}function db(t,n,e,i){const a=null!=i?i:-1,c=n.length-1;let d=0;for(let m=void 0!==i?65535&t[18]:0;m<c;m++)if("number"==typeof n[m+1]){if(d=n[m],null!=i&&d>=i)break}else n[m]<0&&(t[18]+=65536),(d<a||-1==a)&&(sR(t,e,n,m),t[18]=(4294901760&t[18])+m+2),m++}function sR(t,n,e,i){const r=e[i]<0,a=e[i+1],d=t[r?-e[i]:e[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{a.call(d)}finally{}}}else try{a.call(d)}finally{}}class Mu{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Mf(t,n,e){const i=Wr(t);let r=0;for(;r<e.length;){const a=e[r];if("number"==typeof a){if(0!==a)break;r++;const c=e[r++],d=e[r++],m=e[r++];i?t.setAttribute(n,d,m,c):n.setAttributeNS(c,d,m)}else{const c=a,d=e[++r];gp(c)?i&&t.setProperty(n,c,d):i?t.setAttribute(n,c,d):n.setAttribute(c,d),r++}}return r}function fb(t){return 3===t||4===t||6===t}function gp(t){return 64===t.charCodeAt(0)}function xf(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||hb(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function hb(t,n,e,i,r){let a=0,c=t.length;if(-1===n)c=-1;else for(;a<t.length;){const d=t[a++];if("number"==typeof d){if(d===n){c=-1;break}if(d>n){c=a-1;break}}}for(;a<t.length;){const d=t[a];if("number"==typeof d)break;if(d===e){if(null===i)return void(null!==r&&(t[a+1]=r));if(i===t[a+1])return void(t[a+2]=r)}a++,null!==i&&a++,null!==r&&a++}-1!==c&&(t.splice(c,0,n),a=c+1),t.splice(a++,0,e),null!==i&&t.splice(a++,0,i),null!==r&&t.splice(a++,0,r)}function pb(t){return-1!==t}function hc(t){return 32767&t}function pc(t,n){let e=function fR(t){return t>>16}(t),i=n;for(;e>0;)i=i[15],e--;return i}let vp=!0;function Rf(t){const n=vp;return vp=t,n}let hR=0;function Ru(t,n){const e=bp(t,n);if(-1!==e)return e;const i=n[1];i.firstCreatePass&&(t.injectorIndex=n.length,mp(i.data,t),mp(n,null),mp(i.blueprint,null));const r=Df(t,n),a=t.injectorIndex;if(pb(r)){const c=hc(r),d=pc(r,n),m=d[1].data;for(let _=0;_<8;_++)n[a+_]=d[c+_]|m[c+_]}return n[a+8]=r,a}function mp(t,n){t.push(0,0,0,0,0,0,0,0,n)}function bp(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Df(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){const a=r[1],c=a.type;if(i=2===c?a.declTNode:1===c?r[6]:null,null===i)return-1;if(e++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return-1}function kf(t,n,e){!function pR(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(yu)&&(i=e[yu]),null==i&&(i=e[yu]=hR++);const r=255&i;n.data[t+(r>>5)]|=1<<r}(t,n,e)}function mb(t,n,e){if(e&Xi.Optional)return t;cf(n,"NodeInjector")}function bb(t,n,e,i){if(e&Xi.Optional&&void 0===i&&(i=null),0==(e&(Xi.Self|Xi.Host))){const r=t[9],a=Qs(void 0);try{return r?r.get(n,i,e&Xi.Optional):G1(n,i,e&Xi.Optional)}finally{Qs(a)}}return mb(i,n,e)}function _b(t,n,e,i=Xi.Default,r){if(null!==t){const a=function bR(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(yu)?t[yu]:void 0;return"number"==typeof n?n>=0?255&n:vR:n}(e);if("function"==typeof a){if(!ob(n,t,i))return i&Xi.Host?mb(r,e,i):bb(n,e,i,r);try{const c=a(i);if(null!=c||i&Xi.Optional)return c;cf(e)}finally{ub()}}else if("number"==typeof a){let c=null,d=bp(t,n),m=-1,_=i&Xi.Host?n[16][6]:null;for((-1===d||i&Xi.SkipSelf)&&(m=-1===d?Df(t,n):n[d+8],-1!==m&&Sb(i,!1)?(c=n[1],d=hc(m),n=pc(m,n)):d=-1);-1!==d;){const T=n[1];if(wb(a,d,T.data)){const A=mR(d,n,e,c,i,_);if(A!==yb)return A}m=n[d+8],-1!==m&&Sb(i,n[1].data[d+8]===_)&&wb(a,d,n)?(c=T,d=hc(m),n=pc(m,n)):d=-1}}}return bb(n,e,i,r)}const yb={};function vR(){return new gc(ca(),Et())}function mR(t,n,e,i,r,a){const c=n[1],d=c.data[t+8],T=Af(d,c,e,null==i?gf(d)&&vp:i!=c&&0!=(3&d.type),r&Xi.Host&&a===d);return null!==T?Du(n,c,T,d):yb}function Af(t,n,e,i,r){const a=t.providerIndexes,c=n.data,d=1048575&a,m=t.directiveStart,T=a>>20,q=r?d+T:t.directiveEnd;for(let Q=i?d:d+T;Q<q;Q++){const te=c[Q];if(Q<m&&e===te||Q>=m&&te.type===e)return Q}if(r){const Q=c[m];if(Q&&$o(Q)&&Q.type===e)return m}return null}function Du(t,n,e,i){let r=t[e];const a=n.data;if(function lR(t){return t instanceof Mu}(r)){const c=r;c.resolving&&function u3(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new Cn(-200,`Circular dependency in DI detected for ${t}${e}`)}(Ua(a[e]));const d=Rf(c.canSeeViewProviders);c.resolving=!0;const m=c.injectImpl?Qs(c.injectImpl):null;ob(t,i,Xi.Default);try{r=t[e]=c.factory(void 0,a,t,i),n.firstCreatePass&&e>=i.directiveStart&&function oR(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:a}=n.type.prototype;if(i){const c=Y1(n);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,c),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,c)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),a&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,a),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,a))}(e,a[e],n)}finally{null!==m&&Qs(m),Rf(d),c.resolving=!1,ub()}}return r}function wb(t,n,e){return!!(e[n+(t>>5)]&1<<t)}function Sb(t,n){return!(t&Xi.Self||t&Xi.Host&&n)}class gc{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return _b(this._tNode,this._lView,n,i,e)}}function Aa(t){return Js(()=>{const n=t.prototype.constructor,e=n[Ps]||_p(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const a=r[Ps]||_p(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function _p(t){return F1(t)?()=>{const n=_p(Zi(t));return n&&n()}:Rl(t)}const mc="__parameters__";function _c(t,n,e){return Js(()=>{const i=function yp(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...a){if(this instanceof r)return i.apply(this,a),this;const c=new r(...a);return d.annotation=c,d;function d(m,_,T){const A=m.hasOwnProperty(mc)?m[mc]:Object.defineProperty(m,mc,{value:[]})[mc];for(;A.length<=T;)A.push(null);return(A[T]=A[T]||[]).push(c),m}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class an{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=si({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const yR=new an("AnalyzeForEntryComponents");function Ro(t,n){void 0===n&&(n=t);for(let e=0;e<t.length;e++){let i=t[e];Array.isArray(i)?(n===t&&(n=t.slice(0,e)),Ro(i,n)):n!==t&&n.push(i)}return n}function fs(t,n){t.forEach(e=>Array.isArray(e)?fs(e,n):n(e))}function Tb(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Pf(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Pu(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function uo(t,n,e){let i=yc(t,n);return i>=0?t[1|i]=e:(i=~i,function CR(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function Sp(t,n){const e=yc(t,n);if(e>=0)return t[1|e]}function yc(t,n){return function Rb(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const a=i+(r-i>>1),c=t[a<<e];if(n===c)return a<<e;c>n?r=a:i=a+1}return~(r<<e)}(t,n,1)}const Eu={},Tp="__NG_DI_FLAG__",If="ngTempTokenPath",AR=/\n/gm,kb="__source",ER=vi({provide:String,useValue:vi});let Iu;function Ab(t){const n=Iu;return Iu=t,n}function IR(t,n=Xi.Default){if(void 0===Iu)throw new Cn(203,"");return null===Iu?G1(t,void 0,n):Iu.get(t,n&Xi.Optional?null:void 0,n)}function Ft(t,n=Xi.Default){return(function m3(){return W0}()||IR)(Zi(t),n)}function Mp(t){const n=[];for(let e=0;e<t.length;e++){const i=Zi(t[e]);if(Array.isArray(i)){if(0===i.length)throw new Cn(900,"");let r,a=Xi.Default;for(let c=0;c<i.length;c++){const d=i[c],m=BR(d);"number"==typeof m?-1===m?r=d.token:a|=m:r=d}n.push(Ft(r,a))}else n.push(Ft(i))}return n}function Bu(t,n){return t[Tp]=n,t.prototype[Tp]=n,t}function BR(t){return t[Tp]}const Ou=Bu(_c("Inject",t=>({token:t})),-1),hs=Bu(_c("Optional"),8),wc=Bu(_c("SkipSelf"),4);let Of,Vf;function Cc(t){var n;return(null===(n=function Rp(){if(void 0===Of&&(Of=null,dr.trustedTypes))try{Of=dr.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Of}())||void 0===n?void 0:n.createHTML(t))||t}function Vb(t){var n;return(null===(n=function Dp(){if(void 0===Vf&&(Vf=null,dr.trustedTypes))try{Vf=dr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Vf}())||void 0===n?void 0:n.createHTML(t))||t}class kl{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class WR extends kl{getTypeName(){return"HTML"}}class XR extends kl{getTypeName(){return"Style"}}class YR extends kl{getTypeName(){return"Script"}}class KR extends kl{getTypeName(){return"URL"}}class ZR extends kl{getTypeName(){return"ResourceURL"}}function fo(t){return t instanceof kl?t.changingThisBreaksApplicationSecurity:t}function ps(t,n){const e=Lb(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===n}function Lb(t){return t instanceof kl&&t.getTypeName()||null}function Ub(t){const n=new rD(t);return function aD(){try{return!!(new window.DOMParser).parseFromString(Cc(""),"text/html")}catch(t){return!1}}()?new nD(n):n}class nD{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(Cc(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class rD{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const i=this.inertDocument.createElement("body");e.appendChild(i)}}getInertBodyElement(n){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Cc(n),e;const i=this.inertDocument.createElement("body");return i.innerHTML=Cc(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(n){const e=n.attributes;for(let r=e.length-1;0<r;r--){const c=e.item(r).name;("xmlns:ns1"===c||0===c.indexOf("ns1:"))&&n.removeAttribute(c)}let i=n.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const oD=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,sD=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Nu(t){return(t=String(t)).match(oD)||t.match(sD)?t:"unsafe:"+t}function Hb(t){return(t=String(t)).split(",").map(n=>Nu(n.trim())).join(", ")}function gs(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function Fu(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const Gb=gs("area,br,col,hr,img,wbr"),zb=gs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jb=gs("rp,rt"),kp=Fu(Gb,Fu(zb,gs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fu(jb,gs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Fu(jb,zb)),Ap=gs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Pp=gs("srcset"),qb=Fu(Ap,Pp,gs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),gs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),lD=gs("script,style,template");class cD{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!kp.hasOwnProperty(e))return this.sanitizedSomething=!0,!lD.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const a=i.item(r),c=a.name,d=c.toLowerCase();if(!qb.hasOwnProperty(d)){this.sanitizedSomething=!0;continue}let m=a.value;Ap[d]&&(m=Nu(m)),Pp[d]&&(m=Hb(m)),this.buf.push(" ",c,'="',$b(m),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();kp.hasOwnProperty(e)&&!Gb.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push($b(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const uD=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dD=/([^\#-~ |!])/g;function $b(t){return t.replace(/&/g,"&amp;").replace(uD,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(dD,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Nf;function Wb(t,n){let e=null;try{Nf=Nf||Ub(t);let i=n?String(n):"";e=Nf.getInertBodyElement(i);let r=5,a=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=a,a=e.innerHTML,e=Nf.getInertBodyElement(i)}while(i!==a);return Cc((new cD).sanitizeChildren(Ep(e)||e))}finally{if(e){const i=Ep(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Ep(t){return"content"in t&&function fD(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var vn=(()=>((vn=vn||{})[vn.NONE=0]="NONE",vn[vn.HTML=1]="HTML",vn[vn.STYLE=2]="STYLE",vn[vn.SCRIPT=3]="SCRIPT",vn[vn.URL=4]="URL",vn[vn.RESOURCE_URL=5]="RESOURCE_URL",vn))();function Si(t){const n=function Lu(){const t=Et();return t&&t[12]}();return n?Vb(n.sanitize(vn.HTML,t)||""):ps(t,"HTML")?Vb(fo(t)):Wb(rp(),$i(t))}const Kb="__ngContext__";function Pa(t,n){t[Kb]=n}function Op(t){const n=function Uu(t){return t[Kb]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function Np(t){return t.ngOriginalError}function DD(t,...n){t.error(...n)}class Tc{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n),i=function RD(t){return t&&t.ngErrorLogger||DD}(n);i(this._console,"ERROR",n),e&&i(this._console,"ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&Np(n);for(;e&&Np(e);)e=Np(e);return e||null}}const PD=/^>|^->|<!--|-->|--!>|<!-$/g,ED=/(<|>)/;const t_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(dr))();function Do(t){return t.ownerDocument.defaultView}function vs(t){return t instanceof Function?t():t}var ho=(()=>((ho=ho||{})[ho.Important=1]="Important",ho[ho.DashCase=2]="DashCase",ho))();let Fp;function Lp(t,n){return Fp(t,n)}function Hu(t){const n=t[3];return qo(n)?n[3]:n}function Up(t){return o_(t[13])}function Hp(t){return o_(t[4])}function o_(t){for(;null!==t&&!qo(t);)t=t[4];return t}function xc(t,n,e,i,r){if(null!=i){let a,c=!1;qo(i)?a=i:us(i)&&(c=!0,i=i[0]);const d=aa(i);0===t&&null!==e?null==r?f_(n,e,d):Al(n,e,d,r||null,!0):1===t&&null!==e?Al(n,e,d,r||null,!0):2===t?__(n,d,c):3===t&&n.destroyNode(d),null!=a&&function JD(t,n,e,i,r){const a=e[7];a!==aa(e)&&xc(n,t,i,a,r);for(let d=10;d<e.length;d++){const m=e[d];Gu(m[1],m,t,n,i,a)}}(n,t,a,e,r)}}function Gp(t,n){return Wr(t)?t.createText(n):t.createTextNode(n)}function s_(t,n,e){Wr(t)?t.setValue(n,e):n.textContent=e}function HD(t,n){return t.createComment(function e_(t){return t.replace(PD,n=>n.replace(ED,"\u200b$1\u200b"))}(n))}function zp(t,n,e){if(Wr(t))return t.createElement(n,e);{const i=null!==e?function N3(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(e):null;return null===i?t.createElement(n):t.createElementNS(i,n)}}function l_(t,n){const e=t[9],i=e.indexOf(n),r=n[3];1024&n[2]&&(n[2]&=-1025,sp(r,-1)),e.splice(i,1)}function jp(t,n){if(t.length<=10)return;const e=10+n,i=t[e];if(i){const r=i[17];null!==r&&r!==t&&l_(r,i),n>0&&(t[e-1][4]=i[4]);const a=Pf(t,10+n);!function GD(t,n){Gu(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(i[1],i);const c=a[19];null!==c&&c.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function c_(t,n){if(!(256&n[2])){const e=n[11];Wr(e)&&e.destroyNode&&Gu(t,n,e,3,null,null),function qD(t){let n=t[13];if(!n)return qp(t[1],t);for(;n;){let e=null;if(us(n))e=n[13];else{const i=n[10];i&&(e=i)}if(!e){for(;n&&!n[4]&&n!==t;)us(n)&&qp(n[1],n),n=n[3];null===n&&(n=t),us(n)&&qp(n[1],n),e=n&&n[4]}n=e}}(n)}}function qp(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function YD(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof Mu)){const a=e[i+1];if(Array.isArray(a))for(let c=0;c<a.length;c+=2){const d=r[a[c]],m=a[c+1];try{m.call(d)}finally{}}else try{a.call(r)}finally{}}}}(t,n),function XD(t,n){const e=t.cleanup,i=n[7];let r=-1;if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const c=e[a+1],d="function"==typeof c?c(n):aa(n[c]),m=i[r=e[a+2]],_=e[a+3];"boolean"==typeof _?d.removeEventListener(e[a],m,_):_>=0?i[r=_]():i[r=-_].unsubscribe(),a+=2}else{const c=i[r=e[a+1]];e[a].call(c)}if(null!==i){for(let a=r+1;a<i.length;a++)i[a]();n[7]=null}}(t,n),1===n[1].type&&Wr(n[11])&&n[11].destroy();const e=n[17];if(null!==e&&qo(n[3])){e!==n[3]&&l_(e,n);const i=n[19];null!==i&&i.detachView(t)}}}function u_(t,n,e){return d_(t,n.parent,e)}function d_(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[0];if(2&i.flags){const r=t.data[i.directiveStart].encapsulation;if(r===cs.None||r===cs.Emulated)return null}return xo(i,e)}function Al(t,n,e,i,r){Wr(t)?t.insertBefore(n,e,i,r):n.insertBefore(e,i,r)}function f_(t,n,e){Wr(t)?t.appendChild(n,e):n.appendChild(e)}function h_(t,n,e,i,r){null!==i?Al(t,n,e,i,r):f_(t,n,e)}function Ff(t,n){return Wr(t)?t.parentNode(n):n.parentNode}function p_(t,n,e){return v_(t,n,e)}function g_(t,n,e){return 40&t.type?xo(t,e):null}let $p,v_=g_;function m_(t,n){v_=t,$p=n}function Lf(t,n,e,i){const r=u_(t,i,n),a=n[11],d=p_(i.parent||n[6],i,n);if(null!=r)if(Array.isArray(e))for(let m=0;m<e.length;m++)h_(a,r,e[m],d,!1);else h_(a,r,e,d,!1);void 0!==$p&&$p(a,i,n,e,r)}function Uf(t,n){if(null!==n){const e=n.type;if(3&e)return xo(n,t);if(4&e)return Wp(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return Uf(t,i);{const r=t[n.index];return qo(r)?Wp(-1,r):aa(r)}}if(32&e)return Lp(n,t)()||aa(t[n.index]);{const i=b_(t,n);return null!==i?Array.isArray(i)?i[0]:Uf(Hu(t[16]),i):Uf(t,n.next)}}return null}function b_(t,n){return null!==n?t[16][6].projection[n.projection]:null}function Wp(t,n){const e=10+t+1;if(e<n.length){const i=n[e],r=i[1].firstChild;if(null!==r)return Uf(i,r)}return n[7]}function __(t,n,e){const i=Ff(t,n);i&&function KD(t,n,e,i){Wr(t)?t.removeChild(n,e,i):n.removeChild(e)}(t,i,n,e)}function Xp(t,n,e,i,r,a,c){for(;null!=e;){const d=i[e.index],m=e.type;if(c&&0===n&&(d&&Pa(aa(d),i),e.flags|=4),64!=(64&e.flags))if(8&m)Xp(t,n,e.child,i,r,a,!1),xc(n,t,r,d,a);else if(32&m){const _=Lp(e,i);let T;for(;T=_();)xc(n,t,r,T,a);xc(n,t,r,d,a)}else 16&m?y_(t,n,i,e,r,a):xc(n,t,r,d,a);e=c?e.projectionNext:e.next}}function Gu(t,n,e,i,r,a){Xp(e,i,t.firstChild,n,r,a,!1)}function y_(t,n,e,i,r,a){const c=e[16],m=c[6].projection[i.projection];if(Array.isArray(m))for(let _=0;_<m.length;_++)xc(n,t,r,m[_],a);else Xp(t,n,m,c[3],r,a,!0)}function w_(t,n,e){Wr(t)?t.setAttribute(n,"style",e):n.style.cssText=e}function Yp(t,n,e){Wr(t)?""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e):n.className=e}function S_(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=n.length;if(r+a===i||t.charCodeAt(r+a)<=32)return r}e=r+1}}const C_="ng-template";function t4(t,n,e){let i=0;for(;i<t.length;){let r=t[i++];if(e&&"class"===r){if(r=t[i],-1!==S_(r.toLowerCase(),n,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===n)return!0;return!1}}return!1}function T_(t){return 4===t.type&&t.value!==C_}function i4(t,n,e){return n===(4!==t.type||e?t.value:C_)}function n4(t,n,e){let i=4;const r=t.attrs||[],a=function o4(t){for(let n=0;n<t.length;n++)if(fb(t[n]))return n;return t.length}(r);let c=!1;for(let d=0;d<n.length;d++){const m=n[d];if("number"!=typeof m){if(!c)if(4&i){if(i=2|1&i,""!==m&&!i4(t,m,e)||""===m&&1===n.length){if(Wo(i))return!1;c=!0}}else{const _=8&i?m:n[++d];if(8&i&&null!==t.attrs){if(!t4(t.attrs,_,e)){if(Wo(i))return!1;c=!0}continue}const A=r4(8&i?"class":m,r,T_(t),e);if(-1===A){if(Wo(i))return!1;c=!0;continue}if(""!==_){let q;q=A>a?"":r[A+1].toLowerCase();const Q=8&i?q:null;if(Q&&-1!==S_(Q,_,0)||2&i&&_!==q){if(Wo(i))return!1;c=!0}}}}else{if(!c&&!Wo(i)&&!Wo(m))return!1;if(c&&Wo(m))continue;c=!1,i=m|1&i}}return Wo(i)||c}function Wo(t){return 0==(1&t)}function r4(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let a=!1;for(;r<n.length;){const c=n[r];if(c===t)return r;if(3===c||6===c)a=!0;else{if(1===c||2===c){let d=n[++r];for(;"string"==typeof d;)d=n[++r];continue}if(4===c)break;if(0===c){r+=4;continue}}r+=a?1:2}return-1}return function s4(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function M_(t,n,e=!1){for(let i=0;i<n.length;i++)if(n4(t,n[i],e))return!0;return!1}function l4(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function x_(t,n){return t?":not("+n.trim()+")":n}function c4(t){let n=t[0],e=1,i=2,r="",a=!1;for(;e<t.length;){let c=t[e];if("string"==typeof c)if(2&i){const d=t[++e];r+="["+c+(d.length>0?'="'+d+'"':"")+"]"}else 8&i?r+="."+c:4&i&&(r+=" "+c);else""!==r&&!Wo(c)&&(n+=x_(a,r),r=""),i=c,a=a||!Wo(i);e++}return""!==r&&(n+=x_(a,r)),n}const Wi={};function V(t){R_(Tn(),Et(),Ga()+t,bf())}function R_(t,n,e,i){if(!i)if(3==(3&n[2])){const a=t.preOrderCheckHooks;null!==a&&Cf(n,a,e)}else{const a=t.preOrderHooks;null!==a&&Tf(n,a,0,e)}il(e)}function Hf(t,n){return t<<17|n<<2}function Xo(t){return t>>17&32767}function Kp(t){return 2|t}function Bs(t){return(131068&t)>>2}function Zp(t,n){return-131069&t|n<<2}function Qp(t){return 1|t}function F_(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const r=e[i],a=e[i+1];if(-1!==a){const c=t.data[a];fp(r),c.contentQueries(2,n[a],a)}}}function zu(t,n,e,i,r,a,c,d,m,_){const T=n.blueprint.slice();return T[0]=r,T[2]=140|i,eb(T),T[3]=T[15]=t,T[8]=e,T[10]=c||t&&t[10],T[11]=d||t&&t[11],T[12]=m||t&&t[12]||null,T[9]=_||t&&t[9]||null,T[6]=a,T[16]=2==n.type?t[16]:T,T}function Rc(t,n,e,i,r){let a=t.data[n];if(null===a)a=sg(t,n,e,i,r),function Y3(){return Fi.lFrame.inI18n}()&&(a.flags|=64);else if(64&a.type){a.type=e,a.value=i,a.attrs=r;const c=Tu();a.injectorIndex=null===c?-1:c.injectorIndex}return ds(a,!0),a}function sg(t,n,e,i,r){const a=ib(),c=lp(),m=t.data[n]=function R4(t,n,e,i,r,a){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,c?a:a&&a.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=m),null!==a&&(c?null==a.child&&null!==m.parent&&(a.child=m):null===a.next&&(a.next=m)),m}function Dc(t,n,e,i){if(0===e)return-1;const r=n.length;for(let a=0;a<e;a++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function ju(t,n,e){yf(n);try{const i=t.viewQuery;null!==i&&vg(1,i,e);const r=t.template;null!==r&&L_(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&F_(t,n),t.staticViewQueries&&vg(2,t.viewQuery,e);const a=t.components;null!==a&&function T4(t,n){for(let e=0;e<n.length;e++)q4(t,n[e])}(n,a)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[2]&=-5,wf()}}function kc(t,n,e,i){const r=n[2];if(256==(256&r))return;yf(n);const a=bf();try{eb(n),function nb(t){return Fi.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&L_(t,n,e,2,i);const c=3==(3&r);if(!a)if(c){const _=t.preOrderCheckHooks;null!==_&&Cf(n,_,null)}else{const _=t.preOrderHooks;null!==_&&Tf(n,_,0,null),hp(n,0)}if(function z4(t){for(let n=Up(t);null!==n;n=Hp(n)){if(!n[2])continue;const e=n[9];for(let i=0;i<e.length;i++){const r=e[i],a=r[3];0==(1024&r[2])&&sp(a,1),r[2]|=1024}}}(n),function G4(t){for(let n=Up(t);null!==n;n=Hp(n))for(let e=10;e<n.length;e++){const i=n[e],r=i[1];op(i)&&kc(r,i,r.template,i[8])}}(n),null!==t.contentQueries&&F_(t,n),!a)if(c){const _=t.contentCheckHooks;null!==_&&Cf(n,_)}else{const _=t.contentHooks;null!==_&&Tf(n,_,1),hp(n,1)}!function S4(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)il(~r);else{const a=r,c=e[++i],d=e[++i];K3(c,a),d(2,n[a])}}}finally{il(-1)}}(t,n);const d=t.components;null!==d&&function C4(t,n){for(let e=0;e<n.length;e++)j4(t,n[e])}(n,d);const m=t.viewQuery;if(null!==m&&vg(2,m,i),!a)if(c){const _=t.viewCheckHooks;null!==_&&Cf(n,_)}else{const _=t.viewHooks;null!==_&&Tf(n,_,2),hp(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,sp(n[3],-1))}finally{wf()}}function M4(t,n,e,i){const r=n[10],a=!bf(),c=J1(n);try{a&&!c&&r.begin&&r.begin(),c&&ju(t,n,i),kc(t,n,e,i)}finally{a&&!c&&r.end&&r.end()}}function L_(t,n,e,i,r){const a=Ga(),c=2&i;try{il(-1),c&&n.length>20&&R_(t,n,20,bf()),e(i,r)}finally{il(a)}}function lg(t,n,e){!tb()||(function B4(t,n,e,i){const r=e.directiveStart,a=e.directiveEnd;t.firstCreatePass||Ru(e,n),Pa(i,n);const c=e.initialInputs;for(let d=r;d<a;d++){const m=t.data[d],_=$o(m);_&&L4(n,e,m);const T=Du(n,t,d,e);Pa(T,n),null!==c&&U4(0,d-r,T,m,0,c),_&&(co(e.index,n)[8]=T)}}(t,n,e,xo(e,n)),128==(128&e.flags)&&function O4(t,n,e){const i=e.directiveStart,r=e.directiveEnd,c=e.index,d=function Z3(){return Fi.lFrame.currentDirectiveIndex}();try{il(c);for(let m=i;m<r;m++){const _=t.data[m],T=n[m];up(m),(null!==_.hostBindings||0!==_.hostVars||null!==_.hostAttrs)&&X_(_,T)}}finally{il(-1),up(d)}}(t,n,e))}function cg(t,n,e=xo){const i=n.localNames;if(null!==i){let r=n.index+1;for(let a=0;a<i.length;a+=2){const c=i[a+1],d=-1===c?e(n,t):t[c];t[r++]=d}}}function H_(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=jf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function jf(t,n,e,i,r,a,c,d,m,_){const T=20+i,A=T+r,q=function x4(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:Wi);return e}(T,A),Q="function"==typeof _?_():_;return q[1]={type:t,blueprint:q,template:e,queries:null,viewQuery:d,declTNode:n,data:q.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof c?c():c,firstChild:null,schemas:m,consts:Q,incompleteFirstPass:!1}}function j_(t,n,e,i){const r=ey(n);null===e?r.push(i):(r.push(e),t.firstCreatePass&&ty(t).push(i,r.length-1))}function q_(t,n,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(e=null===e?{}:e).hasOwnProperty(i)?e[i].push(n,r):e[i]=[n,r]}return e}function po(t,n,e,i,r,a,c,d){const m=xo(n,e);let T,_=n.inputs;!d&&null!=_&&(T=_[i])?(ry(t,e,T,i,r),gf(n)&&function A4(t,n){const e=co(n,t);16&e[2]||(e[2]|=64)}(e,n.index)):3&n.type&&(i=function k4(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=c?c(r,n.value||"",i):r,Wr(a)?a.setProperty(m,i,r):gp(i)||(m.setProperty?m.setProperty(i,r):m[i]=r))}function ug(t,n,e,i){let r=!1;if(tb()){const a=function V4(t,n,e){const i=t.directiveRegistry;let r=null;if(i)for(let a=0;a<i.length;a++){const c=i[a];M_(e,c.selectors,!1)&&(r||(r=[]),kf(Ru(e,n),t,c.type),$o(c)?(Y_(t,e),r.unshift(c)):r.push(c))}return r}(t,n,e),c=null===i?null:{"":-1};if(null!==a){r=!0,K_(e,t.data.length,a.length);for(let T=0;T<a.length;T++){const A=a[T];A.providersResolver&&A.providersResolver(A)}let d=!1,m=!1,_=Dc(t,n,a.length,null);for(let T=0;T<a.length;T++){const A=a[T];e.mergedAttrs=xf(e.mergedAttrs,A.hostAttrs),Z_(t,e,n,_,A),F4(_,A,c),null!==A.contentQueries&&(e.flags|=8),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(e.flags|=128);const q=A.type.prototype;!d&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),d=!0),!m&&(q.ngOnChanges||q.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),m=!0),_++}!function D4(t,n){const i=n.directiveEnd,r=t.data,a=n.attrs,c=[];let d=null,m=null;for(let _=n.directiveStart;_<i;_++){const T=r[_],A=T.inputs,q=null===a||T_(n)?null:H4(A,a);c.push(q),d=q_(A,_,d),m=q_(T.outputs,_,m)}null!==d&&(d.hasOwnProperty("class")&&(n.flags|=16),d.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=c,n.inputs=d,n.outputs=m}(t,e)}c&&function N4(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const a=e[n[r+1]];if(null==a)throw new Cn(-301,!1);i.push(n[r],a)}}}(e,i,c)}return e.mergedAttrs=xf(e.mergedAttrs,e.attrs),r}function W_(t,n,e,i,r,a){const c=a.hostBindings;if(c){let d=t.hostBindingOpCodes;null===d&&(d=t.hostBindingOpCodes=[]);const m=~n.index;(function I4(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(d)!=m&&d.push(m),d.push(i,r,c)}}function X_(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Y_(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function F4(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;$o(n)&&(e[""]=t)}}function K_(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function Z_(t,n,e,i,r){t.data[i]=r;const a=r.factory||(r.factory=Rl(r.type)),c=new Mu(a,$o(r),null);t.blueprint[i]=c,e[i]=c,W_(t,n,0,i,Dc(t,e,r.hostVars,Wi),r)}function L4(t,n,e){const i=xo(n,t),r=H_(e),a=t[10],c=qf(t,zu(t,r,null,e.onPush?64:16,i,n,a,a.createRenderer(i,e),null,null));t[n.index]=c}function dg(t,n,e,i,r,a,c){if(null==a)Wr(t)?t.removeAttribute(n,r,e):n.removeAttribute(r);else{const d=null==c?$i(a):c(a,i||"",r);Wr(t)?t.setAttribute(n,r,d,e):e?n.setAttributeNS(e,r,d):n.setAttribute(r,d)}}function U4(t,n,e,i,r,a){const c=a[n];if(null!==c){const d=i.setInput;for(let m=0;m<c.length;){const _=c[m++],T=c[m++],A=c[m++];null!==d?i.setInput(e,A,_,T):e[T]=A}}}function H4(t,n){let e=null,i=0;for(;i<n.length;){const r=n[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],n[i+1])),i+=2}else i+=2;else i+=4}return e}function Q_(t,n,e,i){return new Array(t,!0,!1,n,null,0,i,e,null,null)}function j4(t,n){const e=co(n,t);if(op(e)){const i=e[1];80&e[2]?kc(i,e,i.template,e[8]):e[5]>0&&fg(e)}}function fg(t){for(let i=Up(t);null!==i;i=Hp(i))for(let r=10;r<i.length;r++){const a=i[r];if(1024&a[2]){const c=a[1];kc(c,a,c.template,a[8])}else a[5]>0&&fg(a)}const e=t[1].components;if(null!==e)for(let i=0;i<e.length;i++){const r=co(e[i],t);op(r)&&r[5]>0&&fg(r)}}function q4(t,n){const e=co(n,t),i=e[1];(function $4(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(i,e),ju(i,e,e[8])}function qf(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function hg(t){for(;t;){t[2]|=64;const n=Hu(t);if(R3(t)&&!n)return t;t=n}return null}function gg(t,n,e){const i=n[10];i.begin&&i.begin();try{kc(t,n,t.template,e)}catch(r){throw ny(n,r),r}finally{i.end&&i.end()}}function J_(t){!function pg(t){for(let n=0;n<t.components.length;n++){const e=t.components[n],i=Op(e),r=i[1];M4(r,i,r.template,e)}}(t[8])}function vg(t,n,e){fp(0),n(t,e)}const K4=(()=>Promise.resolve(null))();function ey(t){return t[7]||(t[7]=[])}function ty(t){return t.cleanup||(t.cleanup=[])}function ny(t,n){const e=t[9],i=e?e.get(Tc,null):null;i&&i.handleError(n)}function ry(t,n,e,i,r){for(let a=0;a<e.length;){const c=e[a++],d=e[a++],m=n[c],_=t.data[c];null!==_.setInput?_.setInput(m,r,i,d):m[d]=r}}function Os(t,n,e){const i=mf(n,t);s_(t[11],i,e)}function $f(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==n)for(let c=0;c<n.length;c++){const d=n[c];"number"==typeof d?a=d:1==a?r=Sl(r,d):2==a&&(i=Sl(i,d+": "+n[++c]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}const mg=new an("INJECTOR",-1);class ay{get(n,e=Eu){if(e===Eu){const i=new Error(`NullInjectorError: No provider for ${Pn(n)}!`);throw i.name="NullInjectorError",i}return e}}const bg=new an("Set Injector scope."),qu={},J4={};let _g;function oy(){return void 0===_g&&(_g=new ay),_g}function sy(t,n=null,e=null,i){const r=ly(t,n,e,i);return r._resolveInjectorDefTypes(),r}function ly(t,n=null,e=null,i){return new e5(t,e,n||oy(),i)}class e5{constructor(n,e,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];e&&fs(e,d=>this.processProvider(d,n,e)),fs([n],d=>this.processInjectorType(d,[],a)),this.records.set(mg,Ac(void 0,this));const c=this.records.get(bg);this.scope=null!=c?c.value:null,this.source=r||("object"==typeof n?null:Pn(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,e=Eu,i=Xi.Default){this.assertNotDestroyed();const r=Ab(this),a=Qs(void 0);try{if(!(i&Xi.SkipSelf)){let d=this.records.get(n);if(void 0===d){const m=function l5(t){return"function"==typeof t||"object"==typeof t&&t instanceof an}(n)&&q0(n);d=m&&this.injectableDefInScope(m)?Ac(yg(n),qu):null,this.records.set(n,d)}if(null!=d)return this.hydrate(n,d)}return(i&Xi.Self?oy():this.parent).get(n,e=i&Xi.Optional&&e===Eu?null:e)}catch(c){if("NullInjectorError"===c.name){if((c[If]=c[If]||[]).unshift(Pn(n)),r)throw c;return function OR(t,n,e,i){const r=t[If];throw n[kb]&&r.unshift(n[kb]),t.message=function VR(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=Pn(n);if(Array.isArray(n))r=n.map(Pn).join(" -> ");else if("object"==typeof n){let a=[];for(let c in n)if(n.hasOwnProperty(c)){let d=n[c];a.push(c+":"+("string"==typeof d?JSON.stringify(d):Pn(d)))}r=`{${a.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(AR,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[If]=null,t}(c,n,"R3InjectorError",this.source)}throw c}finally{Qs(a),Ab(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((i,r)=>n.push(Pn(r))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Cn(205,!1)}processInjectorType(n,e,i){if(!(n=Zi(n)))return!1;let r=U1(n);const a=null==r&&n.ngModule||void 0,c=void 0===a?n:a,d=-1!==i.indexOf(c);if(void 0!==a&&(r=U1(a)),null==r)return!1;if(null!=r.imports&&!d){let T;i.push(c);try{fs(r.imports,A=>{this.processInjectorType(A,e,i)&&(void 0===T&&(T=[]),T.push(A))})}finally{}if(void 0!==T)for(let A=0;A<T.length;A++){const{ngModule:q,providers:Q}=T[A];fs(Q,te=>this.processProvider(te,q,Q||vr))}}this.injectorDefTypes.add(c);const m=Rl(c)||(()=>new c);this.records.set(c,Ac(m,qu));const _=r.providers;if(null!=_&&!d){const T=n;fs(_,A=>this.processProvider(A,T,_))}return void 0!==a&&void 0!==n.providers}processProvider(n,e,i){let r=Pc(n=Zi(n))?n:Zi(n&&n.provide);const a=function i5(t,n,e){return uy(t)?Ac(void 0,t.useValue):Ac(cy(t),qu)}(n);if(Pc(n)||!0!==n.multi)this.records.get(r);else{let c=this.records.get(r);c||(c=Ac(void 0,qu,!0),c.factory=()=>Mp(c.multi),this.records.set(r,c)),r=n,c.multi.push(n)}this.records.set(r,a)}hydrate(n,e){return e.value===qu&&(e.value=J4,e.value=e.factory()),"object"==typeof e.value&&e.value&&function s5(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Zi(n.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function yg(t){const n=q0(t),e=null!==n?n.factory:Rl(t);if(null!==e)return e;if(t instanceof an)throw new Cn(204,!1);if(t instanceof Function)return function t5(t){const n=t.length;if(n>0)throw Pu(n,"?"),new Cn(204,!1);const e=function p3(t){const n=t&&(t[uf]||t[H1]);if(n){const e=function g3(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),n}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new Cn(204,!1)}function cy(t,n,e){let i;if(Pc(t)){const r=Zi(t);return Rl(r)||yg(r)}if(uy(t))i=()=>Zi(t.useValue);else if(function r5(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Mp(t.deps||[]));else if(function n5(t){return!(!t||!t.useExisting)}(t))i=()=>Ft(Zi(t.useExisting));else{const r=Zi(t&&(t.useClass||t.provide));if(!function o5(t){return!!t.deps}(t))return Rl(r)||yg(r);i=()=>new r(...Mp(t.deps))}return i}function Ac(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function uy(t){return null!==t&&"object"==typeof t&&ER in t}function Pc(t){return"function"==typeof t}let Jr=(()=>{class t{static create(e,i){var r;if(Array.isArray(e))return sy({name:""},i,e,"");{const a=null!==(r=e.name)&&void 0!==r?r:"";return sy({name:a},e.parent,e.providers,a)}}}return t.THROW_IF_NOT_FOUND=Eu,t.NULL=new ay,t.\u0275prov=si({token:t,providedIn:"any",factory:()=>Ft(mg)}),t.__NG_ELEMENT_ID__=-1,t})();function v5(t,n){Sf(Op(t)[1],ca())}function Yn(t){let n=function Sy(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if($o(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Cn(903,"");r=n.\u0275dir}if(r){if(e){i.push(r);const c=t;c.inputs=Cg(t.inputs),c.declaredInputs=Cg(t.declaredInputs),c.outputs=Cg(t.outputs);const d=r.hostBindings;d&&y5(t,d);const m=r.viewQuery,_=r.contentQueries;if(m&&b5(t,m),_&&_5(t,_),Un(t.inputs,r.inputs),Un(t.declaredInputs,r.declaredInputs),Un(t.outputs,r.outputs),$o(r)&&r.data.animation){const T=t.data;T.animation=(T.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let c=0;c<a.length;c++){const d=a[c];d&&d.ngInherit&&d(t),d===Yn&&(e=!1)}}n=Object.getPrototypeOf(n)}!function m5(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=xf(r.hostAttrs,e=xf(e,r.hostAttrs))}}(i)}function Cg(t){return t===oc?{}:t===vr?[]:t}function b5(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function _5(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,a)=>{n(i,r,a),e(i,r,a)}:n}function y5(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}let Wf=null;function Ec(){if(!Wf){const t=dr.Symbol;if(t&&t.iterator)Wf=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<n.length;++e){const i=n[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Wf=i)}}}return Wf}function $u(t){return!!Tg(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ec()in t)}function Tg(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function bs(t,n,e){return t[n]=e}function Wu(t,n){return t[n]}function Ea(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function Pl(t,n,e,i){const r=Ea(t,n,e);return Ea(t,n+1,i)||r}function Xf(t,n,e,i,r){const a=Pl(t,n,e,i);return Ea(t,n+2,r)||a}function ko(t,n,e,i,r,a){const c=Pl(t,n,e,i);return Pl(t,n+2,r,a)||c}function lr(t,n,e,i){const r=Et();return Ea(r,fc(),n)&&(Tn(),function ms(t,n,e,i,r,a){const c=xo(t,n);dg(n[11],c,a,t.value,e,i,r)}(Xr(),r,t,n,e,i)),lr}function Bc(t,n,e,i){return Ea(t,fc(),e)?n+$i(e)+i:Wi}function Nc(t,n,e,i,r,a,c,d,m,_){const A=ko(t,Es(),e,r,c,m);return Is(4),A?n+$i(e)+i+$i(r)+a+$i(c)+d+$i(m)+_:Wi}function pe(t,n,e,i,r,a,c,d){const m=Et(),_=Tn(),T=t+20,A=_.firstCreatePass?function R5(t,n,e,i,r,a,c,d,m){const _=n.consts,T=Rc(n,t,4,c||null,tl(_,d));ug(n,e,T,tl(_,m)),Sf(n,T);const A=T.tViews=jf(2,T,i,r,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,_);return null!==n.queries&&(n.queries.template(n,T),A.queries=n.queries.embeddedTView(T)),T}(T,_,m,n,e,i,r,a,c):_.data[T];ds(A,!1);const q=m[11].createComment("");Lf(_,m,q,A),Pa(q,m),qf(m,m[T]=Q_(q,m,q,A)),vf(A)&&lg(_,m,A),null!=c&&cg(m,A,d)}function Qt(t){return dc(function X3(){return Fi.lFrame.contextLView}(),20+t)}function Me(t,n=Xi.Default){const e=Et();return null===e?Ft(t,n):_b(ca(),e,Zi(t),n)}function kg(){throw new Error("invalid")}function Y(t,n,e){const i=Et();return Ea(i,fc(),n)&&po(Tn(),Xr(),i,t,n,i[11],e,!1),Y}function Ag(t,n,e,i,r){const c=r?"class":"style";ry(t,e,n.inputs[c],c,i)}function D(t,n,e,i){const r=Et(),a=Tn(),c=20+t,d=r[11],m=r[c]=zp(d,n,function aR(){return Fi.lFrame.currentNamespace}()),_=a.firstCreatePass?function X5(t,n,e,i,r,a,c){const d=n.consts,_=Rc(n,t,2,r,tl(d,a));return ug(n,e,_,tl(d,c)),null!==_.attrs&&$f(_,_.attrs,!1),null!==_.mergedAttrs&&$f(_,_.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,_),_}(c,a,r,0,n,e,i):a.data[c];ds(_,!0);const T=_.mergedAttrs;null!==T&&Mf(d,m,T);const A=_.classes;null!==A&&Yp(d,m,A);const q=_.styles;return null!==q&&w_(d,m,q),64!=(64&_.flags)&&Lf(a,r,m,_),0===function z3(){return Fi.lFrame.elementDepthCount}()&&Pa(m,r),function j3(){Fi.lFrame.elementDepthCount++}(),vf(_)&&(lg(a,r,_),function U_(t,n,e){if(Q0(n)){const r=n.directiveEnd;for(let a=n.directiveStart;a<r;a++){const c=t.data[a];c.contentQueries&&c.contentQueries(1,e[a],a)}}}(a,_,r)),null!==i&&cg(r,_),D}function M(){let t=ca();lp()?cp():(t=t.parent,ds(t,!1));const n=t;!function q3(){Fi.lFrame.elementDepthCount--}();const e=Tn();return e.firstCreatePass&&(Sf(e,t),Q0(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function uR(t){return 0!=(16&t.flags)}(n)&&Ag(e,n,Et(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function dR(t){return 0!=(32&t.flags)}(n)&&Ag(e,n,Et(),n.stylesWithoutHost,!1),M}function he(t,n,e,i){return D(t,n,e,i),M(),he}function tt(){return Et()}function Xu(t){return!!t&&"function"==typeof t.then}const Ig=function zy(t){return!!t&&"function"==typeof t.subscribe};function _e(t,n,e,i){const r=Et(),a=Tn(),c=ca();return function qy(t,n,e,i,r,a,c,d){const m=vf(i),T=t.firstCreatePass&&ty(t),A=n[8],q=ey(n);let Q=!0;if(3&i.type||d){const de=xo(i,n),be=d?d(de):de,ce=q.length,ne=d?Ae=>d(aa(Ae[i.index])):i.index;if(Wr(e)){let Ae=null;if(!d&&m&&(Ae=function K5(t,n,e,i){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const c=r[a];if(c===e&&r[a+1]===i){const d=n[7],m=r[a+2];return d.length>m?d[m]:null}"string"==typeof c&&(a+=2)}return null}(t,n,r,i.index)),null!==Ae)(Ae.__ngLastListenerFn__||Ae).__ngNextListenerFn__=a,Ae.__ngLastListenerFn__=a,Q=!1;else{a=Bg(i,n,A,a,!1);const Ue=e.listen(be,r,a);q.push(a,Ue),T&&T.push(r,ne,ce,ce+1)}}else a=Bg(i,n,A,a,!0),be.addEventListener(r,a,c),q.push(a),T&&T.push(r,ne,ce,c)}else a=Bg(i,n,A,a,!1);const te=i.outputs;let oe;if(Q&&null!==te&&(oe=te[r])){const de=oe.length;if(de)for(let be=0;be<de;be+=2){const bt=n[oe[be]][oe[be+1]].subscribe(a),nt=q.length;q.push(a,bt),T&&T.push(r,i.index,nt,-(nt+1))}}}(a,r,r[11],c,t,n,!!e,i),_e}function $y(t,n,e,i){try{return!1!==e(i)}catch(r){return ny(t,r),!1}}function Bg(t,n,e,i,r){return function a(c){if(c===Function)return i;const d=2&t.flags?co(t.index,n):n;0==(32&n[2])&&hg(d);let m=$y(n,0,i,c),_=a.__ngNextListenerFn__;for(;_;)m=$y(n,0,_,c)&&m,_=_.__ngNextListenerFn__;return r&&!1===m&&(c.preventDefault(),c.returnValue=!1),m}}function K(t=1){return function J3(t){return(Fi.lFrame.contextLView=function eR(t,n){for(;t>0;)n=n[15],t--;return n}(t,Fi.lFrame.contextLView))[8]}(t)}function Z5(t,n){let e=null;const i=function a4(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(0==(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const a=n[r];if("*"!==a){if(null===i?M_(t,a,!0):l4(i,a))return r}else e=r}return e}function Kf(t){const n=Et()[16][6];if(!n.projection){const i=n.projection=Pu(t?t.length:1,null),r=i.slice();let a=n.child;for(;null!==a;){const c=t?Z5(a,t):0;null!==c&&(r[c]?r[c].projectionNext=a:i[c]=a,r[c]=a),a=a.next}}}function Zf(t,n=0,e){const i=Et(),r=Tn(),a=Rc(r,20+t,16,null,e||null);null===a.projection&&(a.projection=n),cp(),64!=(64&a.flags)&&function QD(t,n,e){y_(n[11],0,n,e,u_(t,e,n),p_(e.parent||n[6],e,n))}(r,i,a)}function Ia(t,n,e){return Qf(t,"",n,"",e),Ia}function Qf(t,n,e,i,r){const a=Et(),c=Bc(a,n,e,i);return c!==Wi&&po(Tn(),Xr(),a,t,c,a[11],r,!1),Qf}function tw(t,n,e,i,r){const a=t[e+1],c=null===n;let d=i?Xo(a):Bs(a),m=!1;for(;0!==d&&(!1===m||c);){const T=t[d+1];ek(t[d],n)&&(m=!0,t[d+1]=i?Qp(T):Kp(T)),d=i?Xo(T):Bs(T)}m&&(t[e+1]=i?Kp(a):Qp(a))}function ek(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&yc(t,n)>=0}const da={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function iw(t){return t.substring(da.key,da.keyEnd)}function nw(t,n){const e=da.textEnd;return e===n?-1:(n=da.keyEnd=function rk(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,da.key=n,e),zc(t,n,e))}function zc(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function Yu(t,n,e){return Ko(t,n,e,!1),Yu}function Ii(t,n){return Ko(t,n,null,!0),Ii}function ol(t){Zo(uo,ys,t,!0)}function ys(t,n){for(let e=function ik(t){return function aw(t){da.key=0,da.keyEnd=0,da.value=0,da.valueEnd=0,da.textEnd=t.length}(t),nw(t,zc(t,0,da.textEnd))}(n);e>=0;e=nw(n,e))uo(t,iw(n),!0)}function Ko(t,n,e,i){const r=Et(),a=Tn(),c=Is(2);a.firstUpdatePass&&cw(a,t,c,i),n!==Wi&&Ea(r,c,n)&&dw(a,a.data[Ga()],r,r[11],t,r[c+1]=function pk(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Pn(fo(t)))),t}(n,e),i,c)}function Zo(t,n,e,i){const r=Tn(),a=Is(2);r.firstUpdatePass&&cw(r,null,a,i);const c=Et();if(e!==Wi&&Ea(c,a,e)){const d=r.data[Ga()];if(hw(d,i)&&!lw(r,a)){let m=i?d.classesWithoutHost:d.stylesWithoutHost;null!==m&&(e=Sl(m,e||"")),Ag(r,d,c,e,i)}else!function hk(t,n,e,i,r,a,c,d){r===Wi&&(r=vr);let m=0,_=0,T=0<r.length?r[0]:null,A=0<a.length?a[0]:null;for(;null!==T||null!==A;){const q=m<r.length?r[m+1]:void 0,Q=_<a.length?a[_+1]:void 0;let oe,te=null;T===A?(m+=2,_+=2,q!==Q&&(te=A,oe=Q)):null===A||null!==T&&T<A?(m+=2,te=T):(_+=2,te=A,oe=Q),null!==te&&dw(t,n,e,i,te,oe,c,d),T=m<r.length?r[m]:null,A=_<a.length?a[_]:null}}(r,d,c,c[11],c[a+1],c[a+1]=function fk(t,n,e){if(null==e||""===e)return vr;const i=[],r=fo(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(i,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(i,a,r[a]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,a)}}function lw(t,n){return n>=t.expandoStartIndex}function cw(t,n,e,i){const r=t.data;if(null===r[e+1]){const a=r[Ga()],c=lw(t,e);hw(a,i)&&null===n&&!c&&(n=!1),n=function lk(t,n,e,i){const r=function dp(t){const n=Fi.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let a=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=Ku(e=Og(null,t,n,e,i),n.attrs,i),a=null);else{const c=n.directiveStylingLast;if(-1===c||t[c]!==r)if(e=Og(r,t,n,e,i),null===a){let m=function ck(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==Bs(i))return t[Xo(i)]}(t,n,i);void 0!==m&&Array.isArray(m)&&(m=Og(null,t,n,m[1],i),m=Ku(m,n.attrs,i),function uk(t,n,e,i){t[Xo(e?n.classBindings:n.styleBindings)]=i}(t,n,i,m))}else a=function dk(t,n,e){let i;const r=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<r;a++)i=Ku(i,t[a].hostAttrs,e);return Ku(i,n.attrs,e)}(t,n,i)}return void 0!==a&&(i?n.residualClasses=a:n.residualStyles=a),e}(r,a,n,i),function Q5(t,n,e,i,r,a){let c=a?n.classBindings:n.styleBindings,d=Xo(c),m=Bs(c);t[i]=e;let T,_=!1;if(Array.isArray(e)){const A=e;T=A[1],(null===T||yc(A,T)>0)&&(_=!0)}else T=e;if(r)if(0!==m){const q=Xo(t[d+1]);t[i+1]=Hf(q,d),0!==q&&(t[q+1]=Zp(t[q+1],i)),t[d+1]=function f4(t,n){return 131071&t|n<<17}(t[d+1],i)}else t[i+1]=Hf(d,0),0!==d&&(t[d+1]=Zp(t[d+1],i)),d=i;else t[i+1]=Hf(m,0),0===d?d=i:t[m+1]=Zp(t[m+1],i),m=i;_&&(t[i+1]=Kp(t[i+1])),tw(t,T,i,!0),tw(t,T,i,!1),function J5(t,n,e,i,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof n&&yc(a,n)>=0&&(e[i+1]=Qp(e[i+1]))}(n,T,t,i,a),c=Hf(d,m),a?n.classBindings=c:n.styleBindings=c}(r,a,n,e,c,i)}}function Og(t,n,e,i,r){let a=null;const c=e.directiveEnd;let d=e.directiveStylingLast;for(-1===d?d=e.directiveStart:d++;d<c&&(a=n[d],i=Ku(i,a.hostAttrs,r),a!==t);)d++;return null!==t&&(e.directiveStylingLast=d),i}function Ku(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let a=0;a<n.length;a++){const c=n[a];"number"==typeof c?r=c:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),uo(t,c,!!e||n[++a]))}return void 0===t?null:t}function dw(t,n,e,i,r,a,c,d){if(!(3&n.type))return;const m=t.data,_=m[d+1];Jf(function A_(t){return 1==(1&t)}(_)?fw(m,n,e,r,Bs(_),c):void 0)||(Jf(a)||function k_(t){return 2==(2&t)}(_)&&(a=fw(m,null,e,r,d,c)),function e4(t,n,e,i,r){const a=Wr(t);if(n)r?a?t.addClass(e,i):e.classList.add(i):a?t.removeClass(e,i):e.classList.remove(i);else{let c=-1===i.indexOf("-")?void 0:ho.DashCase;if(null==r)a?t.removeStyle(e,i,c):e.style.removeProperty(i);else{const d="string"==typeof r&&r.endsWith("!important");d&&(r=r.slice(0,-10),c|=ho.Important),a?t.setStyle(e,i,r,c):e.style.setProperty(i,r,d?"important":"")}}}(i,c,mf(Ga(),e),r,a))}function fw(t,n,e,i,r,a){const c=null===n;let d;for(;r>0;){const m=t[r],_=Array.isArray(m),T=_?m[1]:m,A=null===T;let q=e[r+1];q===Wi&&(q=A?vr:void 0);let Q=A?Sp(q,i):T===i?q:void 0;if(_&&!Jf(Q)&&(Q=Sp(m,i)),Jf(Q)&&(d=Q,c))return d;const te=t[r+1];r=c?Xo(te):Bs(te)}if(null!==n){let m=a?n.residualClasses:n.residualStyles;null!=m&&(d=Sp(m,i))}return d}function Jf(t){return void 0!==t}function hw(t,n){return 0!=(t.flags&(n?16:32))}function F(t,n=""){const e=Et(),i=Tn(),r=t+20,a=i.firstCreatePass?Rc(i,r,1,n,null):i.data[r],c=e[r]=Gp(e[11],n);Lf(i,e,c,a),ds(a,!1)}function Kt(t){return He("",t,""),Kt}function He(t,n,e){const i=Et(),r=Bc(i,t,n,e);return r!==Wi&&Os(i,Ga(),r),He}function Mn(t,n,e,i,r){const a=Et(),c=function Oc(t,n,e,i,r,a){const d=Pl(t,Es(),e,r);return Is(2),d?n+$i(e)+i+$i(r)+a:Wi}(a,t,n,e,i,r);return c!==Wi&&Os(a,Ga(),c),Mn}function eh(t,n,e,i,r,a,c){const d=Et(),m=function Vc(t,n,e,i,r,a,c,d){const _=Xf(t,Es(),e,r,c);return Is(3),_?n+$i(e)+i+$i(r)+a+$i(c)+d:Wi}(d,t,n,e,i,r,a,c);return m!==Wi&&Os(d,Ga(),m),eh}function Vg(t,n,e,i,r,a,c,d,m){const _=Et(),T=Nc(_,t,n,e,i,r,a,c,d,m);return T!==Wi&&Os(_,Ga(),T),Vg}function Ng(t,n,e){Zo(uo,ys,Bc(Et(),t,n,e),!0)}function sl(t,n,e){const i=Et();return Ea(i,fc(),n)&&po(Tn(),Xr(),i,t,n,i[11],e,!0),sl}const El=void 0;var Ek=["en",[["a","p"],["AM","PM"],El],[["AM","PM"],El,El],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],El,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],El,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",El,"{1} 'at' {0}",El],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Pk(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let jc={};function ja(t){const n=function Ik(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=Pw(n);if(e)return e;const i=n.split("-")[0];if(e=Pw(i),e)return e;if("en"===i)return Ek;throw new Error(`Missing locale data for the locale "${t}".`)}function Aw(t){return ja(t)[Jt.PluralCase]}function Pw(t){return t in jc||(jc[t]=dr.ng&&dr.ng.common&&dr.ng.common.locales&&dr.ng.common.locales[t]),jc[t]}var Jt=(()=>((Jt=Jt||{})[Jt.LocaleId=0]="LocaleId",Jt[Jt.DayPeriodsFormat=1]="DayPeriodsFormat",Jt[Jt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Jt[Jt.DaysFormat=3]="DaysFormat",Jt[Jt.DaysStandalone=4]="DaysStandalone",Jt[Jt.MonthsFormat=5]="MonthsFormat",Jt[Jt.MonthsStandalone=6]="MonthsStandalone",Jt[Jt.Eras=7]="Eras",Jt[Jt.FirstDayOfWeek=8]="FirstDayOfWeek",Jt[Jt.WeekendRange=9]="WeekendRange",Jt[Jt.DateFormat=10]="DateFormat",Jt[Jt.TimeFormat=11]="TimeFormat",Jt[Jt.DateTimeFormat=12]="DateTimeFormat",Jt[Jt.NumberSymbols=13]="NumberSymbols",Jt[Jt.NumberFormats=14]="NumberFormats",Jt[Jt.CurrencyCode=15]="CurrencyCode",Jt[Jt.CurrencySymbol=16]="CurrencySymbol",Jt[Jt.CurrencyName=17]="CurrencyName",Jt[Jt.Currencies=18]="Currencies",Jt[Jt.Directionality=19]="Directionality",Jt[Jt.PluralCase=20]="PluralCase",Jt[Jt.ExtraData=21]="ExtraData",Jt))();const Bk=["zero","one","two","few","many"],th="en-US",ih={marker:"element"},nh={marker:"ICU"};var Yr=(()=>((Yr=Yr||{})[Yr.SHIFT=2]="SHIFT",Yr[Yr.APPEND_EAGERLY=1]="APPEND_EAGERLY",Yr[Yr.COMMENT=2]="COMMENT",Yr))();let Ew=th;function Iw(t,n,e){const i=n.insertBeforeIndex,r=Array.isArray(i)?i[0]:i;return null===r?g_(t,0,e):aa(e[r])}function Bw(t,n,e,i,r){const a=n.insertBeforeIndex;if(Array.isArray(a)){let c=i,d=null;if(3&n.type||(d=c,c=r),null!==c&&0==(2&n.flags))for(let m=1;m<a.length;m++)Al(t,c,e[a[m]],d,!1)}}function Ow(t,n){if(t.push(n),t.length>1)for(let e=t.length-2;e>=0;e--){const i=t[e];Vw(i)||Lk(i,n)&&null===Uk(i)&&Hk(i,n.index)}}function Vw(t){return!(64&t.type)}function Lk(t,n){return Vw(n)||t.index>n.index}function Uk(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function Hk(t,n){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=n:(m_(Iw,Bw),t.insertBeforeIndex=n)}function Zu(t,n){const e=t.data[n];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function jk(t,n,e){const i=sg(t,e,64,null,null);return Ow(n,i),i}function rh(t,n){const e=n[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function Nw(t){return t>>>17}function Fw(t){return(131070&t)>>>1}let Qu=0,Ju=0;function Uw(t,n,e,i){const r=e[11];let c,a=null;for(let d=0;d<n.length;d++){const m=n[d];if("string"==typeof m){const _=n[++d];null===e[_]&&(e[_]=Gp(r,m))}else if("number"==typeof m)switch(1&m){case 0:const _=Nw(m);let T,A;if(null===a&&(a=_,c=Ff(r,i)),_===a?(T=i,A=c):(T=null,A=aa(e[_])),null!==A){const oe=Fw(m);Al(r,A,e[oe],T,!1);const be=Zu(t,oe);if(null!==be&&"object"==typeof be){const ce=rh(be,e);null!==ce&&Uw(t,be.create[ce],e,e[be.anchorIdx])}}break;case 1:const Q=n[++d],te=n[++d];dg(r,mf(m>>>1,e),null,null,Q,te,null)}else switch(m){case nh:const _=n[++d],T=n[++d];null===e[T]&&Pa(e[T]=HD(r,_),e);break;case ih:const A=n[++d],q=n[++d];null===e[q]&&Pa(e[q]=zp(r,A,null),e)}}}function Hw(t,n,e,i,r){for(let a=0;a<e.length;a++){const c=e[a],d=e[++a];if(c&r){let m="";for(let _=a+1;_<=a+d;_++){const T=e[_];if("string"==typeof T)m+=T;else if("number"==typeof T)if(T<0)m+=$i(n[i-T]);else{const A=T>>>2;switch(3&T){case 1:const q=e[++_],Q=e[++_],te=t.data[A];"string"==typeof te?dg(n[11],n[A],null,te,q,m,Q):po(t,te,n,q,m,n[11],Q,!1);break;case 0:const oe=n[A];null!==oe&&s_(n[11],oe,m);break;case 2:Yk(t,Zu(t,A),n,m);break;case 3:Gw(t,Zu(t,A),i,n)}}}}else{const m=e[a+1];if(m>0&&3==(3&m)){const T=Zu(t,m>>>2);n[T.currentCaseLViewIndex]<0&&Gw(t,T,i,n)}}a+=d}}function Gw(t,n,e,i){let r=i[n.currentCaseLViewIndex];if(null!==r){let a=Qu;r<0&&(r=i[n.currentCaseLViewIndex]=~r,a=-1),Hw(t,i,n.update[r],e,a)}}function Yk(t,n,e,i){const r=function Kk(t,n){let e=t.cases.indexOf(n);if(-1===e)switch(t.type){case 1:{const i=function Ok(t,n){const e=Aw(n)(parseInt(t,10)),i=Bk[e];return void 0!==i?i:"other"}(n,function Fk(){return Ew}());e=t.cases.indexOf(i),-1===e&&"other"!==i&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(n,i);if(rh(n,e)!==r&&(zw(t,n,e),e[n.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const c=e[n.anchorIdx];c&&Uw(t,n.create[r],e,c)}}function zw(t,n,e){let i=rh(n,e);if(null!==i){const r=n.remove[i];for(let a=0;a<r.length;a++){const c=r[a];if(c>0){const d=mf(c,e);null!==d&&__(e[11],d)}else zw(t,Zu(t,~c),e)}}}function Zk(){const t=[];let e,i,n=-1;function a(d,m){n=0;const _=rh(d,m);i=null!==_?d.remove[_]:vr}function c(){if(n<i.length){const d=i[n++];return d>0?e[d]:(t.push(n,i),a(e[1].data[~d],e),c())}return 0===t.length?null:(i=t.pop(),n=t.pop(),c())}return function r(d,m){for(e=m;t.length;)t.pop();return a(d.value,m),c}}const ah=/\ufffd(\d+):?\d*\ufffd/gi,Jk=/\ufffd(\d+)\ufffd/,qw=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,eA=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,tA=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,iA=/\uE500/g;function $w(t,n,e,i,r,a,c){const d=Dc(t,i,1,null);let m=d<<Yr.SHIFT,_=Tu();n===_&&(_=null),null===_&&(m|=Yr.APPEND_EAGERLY),c&&(m|=Yr.COMMENT,function UD(t){void 0===Fp&&(Fp=t())}(Zk)),r.push(m,null===a?"":a);const T=sg(t,d,c?32:1,null===a?"":a,null);Ow(e,T);const A=T.index;return ds(T,!1),null!==_&&n!==_&&function zk(t,n){let e=t.insertBeforeIndex;null===e?(m_(Iw,Bw),e=t.insertBeforeIndex=[null,n]):(function As(t,n,e){t!=n&&kr(e,t,n,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(n))}(_,A),T}function aA(t,n,e,i,r,a,c){const d=c.match(ah),m=$w(t,n,e,a,i,d?null:c,!1);d&&qc(r,c,m.index,null,0,null)}function qc(t,n,e,i,r,a){const c=t.length,d=c+1;t.push(null,null);const m=c+2,_=n.split(ah);let T=0;for(let A=0;A<_.length;A++){const q=_[A];if(1&A){const Q=r+parseInt(q,10);t.push(-1-Q),T|=Ww(Q)}else""!==q&&t.push(q)}return t.push(e<<2|(i?1:0)),i&&t.push(i,a),t[c]=T,t[d]=t.length-m,T}function Ww(t){return 1<<Math.min(t,31)}function Xw(t){let n,a,e="",i=0,r=!1;for(;null!==(n=eA.exec(t));)r?n[0]===`\ufffd/*${a}\ufffd`&&(i=n.index,r=!1):(e+=t.substring(i,n.index+n[0].length),a=n[1],r=!0);return e+=t.substr(i),e}function Yw(t,n,e,i,r,a){let c=0;const d={type:r.type,currentCaseLViewIndex:Dc(t,n,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};(function hA(t,n,e){t.push(Ww(n.mainBinding),2,-1-n.mainBinding,e<<2|2)})(e,r,a),function Gk(t,n,e){const i=t.data[n];null===i?t.data[n]=e:i.value=e}(t,a,d);const m=r.values;for(let _=0;_<m.length;_++){const T=m[_],A=[];for(let q=0;q<T.length;q++){const Q=T[q];if("string"!=typeof Q){const te=A.push(Q)-1;T[q]=`\x3c!--\ufffd${te}\ufffd--\x3e`}}c=dA(t,d,n,e,i,r.cases[_],T.join(""),A)|c}c&&function pA(t,n,e){t.push(n,1,e<<2|3)}(e,c,a)}function uA(t){const n=[],e=[];let i=1,r=0;const a=Fg(t=t.replace(qw,function(c,d,m){return i="select"===m?0:1,r=parseInt(d.substr(1),10),""}));for(let c=0;c<a.length;){let d=a[c++].trim();1===i&&(d=d.replace(/\s*(?:=)?(\w+)\s*/,"$1")),d.length&&n.push(d);const m=Fg(a[c++]);n.length>e.length&&e.push(m)}return{type:i,mainBinding:r,cases:n,values:e}}function Fg(t){if(!t)return[];let n=0;const e=[],i=[],r=/[{}]/g;let a;for(r.lastIndex=0;a=r.exec(t);){const d=a.index;if("}"==a[0]){if(e.pop(),0==e.length){const m=t.substring(n,d);qw.test(m)?i.push(uA(m)):i.push(m),n=d+1}}else{if(0==e.length){const m=t.substring(n,d);i.push(m),n=d+1}e.push("{")}}const c=t.substring(n);return i.push(c),i}function dA(t,n,e,i,r,a,c,d){const m=[],_=[],T=[];n.cases.push(a),n.create.push(m),n.remove.push(_),n.update.push(T);const q=Ub(rp()).getInertBodyElement(c),Q=Ep(q)||q;return Q?Kw(t,n,e,i,m,_,T,Q,r,d,0):0}function Kw(t,n,e,i,r,a,c,d,m,_,T){let A=0,q=d.firstChild;for(;q;){const Q=Dc(t,e,1,null);switch(q.nodeType){case Node.ELEMENT_NODE:const te=q,oe=te.tagName.toLowerCase();if(kp.hasOwnProperty(oe)){Lg(r,ih,oe,m,Q),t.data[Q]=oe;const ne=te.attributes;for(let Ae=0;Ae<ne.length;Ae++){const Ue=ne.item(Ae),bt=Ue.name.toLowerCase();Ue.value.match(ah)?qb.hasOwnProperty(bt)&&qc(c,Ue.value,Q,Ue.name,0,Ap[bt]?Nu:Pp[bt]?Hb:null):gA(r,Q,Ue)}A=Kw(t,n,e,i,r,a,c,q,Q,_,T+1)|A,Zw(a,Q,T)}break;case Node.TEXT_NODE:const de=q.textContent||"",be=de.match(ah);Lg(r,null,be?"":de,m,Q),Zw(a,Q,T),be&&(A=qc(c,de,Q,null,0,null)|A);break;case Node.COMMENT_NODE:const ce=Jk.exec(q.textContent||"");if(ce){const Ae=_[parseInt(ce[1],10)];Lg(r,nh,"",m,Q),Yw(t,e,i,m,Ae,Q),fA(a,Q,T)}}q=q.nextSibling}return A}function Zw(t,n,e){0===e&&t.push(n)}function fA(t,n,e){0===e&&(t.push(~n),t.push(n))}function Lg(t,n,e,i,r){null!==n&&t.push(n),t.push(e,r,function qk(t,n,e){return t|n<<17|e<<1}(0,i,r))}function gA(t,n,e){t.push(n<<1|1,e.name,e.value)}function Jw(t,n,e=-1){const i=Tn(),r=Et(),a=20+t,c=tl(i.consts,n),d=Tu();i.firstCreatePass&&function rA(t,n,e,i,r,a){const c=Tu(),d=[],m=[],_=[[]];r=function cA(t,n){if(function lA(t){return-1===t}(n))return Xw(t);{const e=t.indexOf(`:${n}\ufffd`)+2+n.toString().length,i=t.search(new RegExp(`\ufffd\\/\\*\\d+:${n}\ufffd`));return Xw(t.substring(e,i))}}(r,a);const T=function nA(t){return t.replace(iA," ")}(r).split(tA);for(let A=0;A<T.length;A++){let q=T[A];if(0==(1&A)){const Q=Fg(q);for(let te=0;te<Q.length;te++){let oe=Q[te];if(0==(1&te)){const de=oe;""!==de&&aA(t,c,_[0],d,m,e,de)}else{const de=oe;if("object"!=typeof de)throw new Error(`Unable to parse ICU expression in "${r}" message.`);Yw(t,e,m,n,de,$w(t,c,_[0],e,d,"",!0).index)}}}else{const Q=47===q.charCodeAt(0),oe=(q.charCodeAt(Q?1:0),20+Number.parseInt(q.substring(Q?2:1)));if(Q)_.shift(),ds(Tu(),!1);else{const de=jk(t,_[0],oe);_.unshift([]),ds(de,!0)}}}t.data[i]={create:d,update:m}}(i,null===d?0:d.index,r,a,c,e);const m=i.data[a],T=d_(i,d===r[6]?null:d,r);(function Xk(t,n,e,i){const r=t[11];for(let a=0;a<n.length;a++){const c=n[a++],d=n[a],m=(c&Yr.COMMENT)===Yr.COMMENT,_=(c&Yr.APPEND_EAGERLY)===Yr.APPEND_EAGERLY,T=c>>>Yr.SHIFT;let A=t[T];null===A&&(A=t[T]=m?r.createComment(d):Gp(r,d)),_&&null!==e&&Al(r,e,A,i,!1)}})(r,m.create,T,d&&8&d.type?r[d.index]:null),rb(!0)}function Vs(t,n,e){Jw(t,n,e),function e2(){rb(!1)}()}function oh(t){return function $k(t){t&&(Qu|=1<<Math.min(Ju,31)),Ju++}(Ea(Et(),fc(),t)),oh}function Hg(t,n,e,i,r){if(t=Zi(t),Array.isArray(t))for(let a=0;a<t.length;a++)Hg(t[a],n,e,i,r);else{const a=Tn(),c=Et();let d=Pc(t)?t:Zi(t.provide),m=cy(t);const _=ca(),T=1048575&_.providerIndexes,A=_.directiveStart,q=_.providerIndexes>>20;if(Pc(t)||!t.multi){const Q=new Mu(m,r,Me),te=zg(d,n,r?T:T+q,A);-1===te?(kf(Ru(_,c),a,d),Gg(a,t,n.length),n.push(d),_.directiveStart++,_.directiveEnd++,r&&(_.providerIndexes+=1048576),e.push(Q),c.push(Q)):(e[te]=Q,c[te]=Q)}else{const Q=zg(d,n,T+q,A),te=zg(d,n,T,T+q),oe=Q>=0&&e[Q],de=te>=0&&e[te];if(r&&!de||!r&&!oe){kf(Ru(_,c),a,d);const be=function kA(t,n,e,i,r){const a=new Mu(t,e,Me);return a.multi=[],a.index=n,a.componentProviders=0,t2(a,r,i&&!e),a}(r?DA:RA,e.length,r,i,m);!r&&de&&(e[te].providerFactory=be),Gg(a,t,n.length,0),n.push(d),_.directiveStart++,_.directiveEnd++,r&&(_.providerIndexes+=1048576),e.push(be),c.push(be)}else Gg(a,t,Q>-1?Q:te,t2(e[r?te:Q],m,!r&&i));!r&&i&&de&&e[te].componentProviders++}}}function Gg(t,n,e,i){const r=Pc(n),a=function a5(t){return!!t.useClass}(n);if(r||a){const m=(a?Zi(n.useClass):n).prototype.ngOnDestroy;if(m){const _=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const T=_.indexOf(e);-1===T?_.push(e,[i,m]):_[T+1].push(i,m)}else _.push(e,m)}}}function t2(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function zg(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function RA(t,n,e,i){return jg(this.multi,[])}function DA(t,n,e,i){const r=this.multi;let a;if(this.providerFactory){const c=this.providerFactory.componentProviders,d=Du(e,e[1],this.providerFactory.index,i);a=d.slice(0,c),jg(r,a);for(let m=c;m<d.length;m++)a.push(d[m])}else a=[],jg(r,a);return a}function jg(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function mr(t,n=[]){return e=>{e.providersResolver=(i,r)=>function xA(t,n,e){const i=Tn();if(i.firstCreatePass){const r=$o(t);Hg(e,i.data,i.blueprint,r,!0),Hg(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class n2{}class EA{resolveComponentFactory(n){throw function PA(t){const n=Error(`No component factory found for ${Pn(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Il=(()=>{class t{}return t.NULL=new EA,t})();function IA(){return $c(ca(),Et())}function $c(t,n){return new xn(xo(t,n))}let xn=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=IA,t})();function BA(t){return t instanceof xn?t.nativeElement:t}class qg{}let Ao=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function VA(){const t=Et(),e=co(ca().index,t);return function OA(t){return t[11]}(us(e)?e:t)}(),t})(),NA=(()=>{class t{}return t.\u0275prov=si({token:t,providedIn:"root",factory:()=>null}),t})();class td{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const FA=new td("13.2.3"),$g={};function sh(t,n,e,i,r=!1){for(;null!==e;){const a=n[e.index];if(null!==a&&i.push(aa(a)),qo(a))for(let d=10;d<a.length;d++){const m=a[d],_=m[1].firstChild;null!==_&&sh(m[1],m,_,i)}const c=e.type;if(8&c)sh(t,n,e.child,i);else if(32&c){const d=Lp(e,n);let m;for(;m=d();)i.push(m)}else if(16&c){const d=b_(n,e);if(Array.isArray(d))i.push(...d);else{const m=Hu(n[16]);sh(m[1],m,d,i,!0)}}e=r?e.projectionNext:e.next}return i}class id{constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,e=n[1];return sh(e,n,e.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(qo(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(jp(n,i),Pf(e,i))}this._attachedToViewContainer=!1}c_(this._lView[1],this._lView)}onDestroy(n){j_(this._lView[1],this._lView,null,n)}markForCheck(){hg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){gg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function X4(t,n,e){_f(!0);try{gg(t,n,e)}finally{_f(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Cn(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function jD(t,n){Gu(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Cn(902,"");this._appRef=n}}class LA extends id{constructor(n){super(n),this._view=n}detectChanges(){J_(this._view)}checkNoChanges(){!function Y4(t){_f(!0);try{J_(t)}finally{_f(!1)}}(this._view)}get context(){return null}}class a2 extends Il{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Da(n);return new Wg(e,this.ngModule)}}function o2(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}const HA=new an("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>t_});class Wg extends n2{constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function u4(t){return t.map(c4).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return o2(this.componentDef.inputs)}get outputs(){return o2(this.componentDef.outputs)}create(n,e,i,r){const a=(r=r||this.ngModule)?function GA(t,n){return{get:(e,i,r)=>{const a=t.get(e,$g,r);return a!==$g||i===$g?a:n.get(e,i,r)}}}(n,r.injector):n,c=a.get(qg,Q1),d=a.get(NA,null),m=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",T=i?function z_(t,n,e){if(Wr(t))return t.selectRootElement(n,e===cs.ShadowDom);let i="string"==typeof n?t.querySelector(n):n;return i.textContent="",i}(m,i,this.componentDef.encapsulation):zp(c.createRenderer(null,this.componentDef),_,function UA(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(_)),A=this.componentDef.onPush?576:528,q=function wy(t,n){return{components:[],scheduler:t||t_,clean:K4,playerHandler:n||null,flags:0}}(),Q=jf(0,null,null,1,0,null,null,null,null,null),te=zu(null,Q,q,A,null,null,c,m,d,a);let oe,de;yf(te);try{const be=function _y(t,n,e,i,r,a){const c=e[1];e[20]=t;const m=Rc(c,20,2,"#host",null),_=m.mergedAttrs=n.hostAttrs;null!==_&&($f(m,_,!0),null!==t&&(Mf(r,t,_),null!==m.classes&&Yp(r,t,m.classes),null!==m.styles&&w_(r,t,m.styles)));const T=i.createRenderer(t,n),A=zu(e,H_(n),null,n.onPush?64:16,e[20],m,i,T,a||null,null);return c.firstCreatePass&&(kf(Ru(m,e),c,n.type),Y_(c,m),K_(m,e.length,1)),qf(e,A),e[20]=A}(T,this.componentDef,te,c,m);if(T)if(i)Mf(m,T,["ng-version",FA.full]);else{const{attrs:ce,classes:ne}=function d4(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let a=t[i];if("string"==typeof a)2===r?""!==a&&n.push(a,t[++i]):8===r&&e.push(a);else{if(!Wo(r))break;r=a}i++}return{attrs:n,classes:e}}(this.componentDef.selectors[0]);ce&&Mf(m,T,ce),ne&&ne.length>0&&Yp(m,T,ne.join(" "))}if(de=ap(Q,20),void 0!==e){const ce=de.projection=[];for(let ne=0;ne<this.ngContentSelectors.length;ne++){const Ae=e[ne];ce.push(null!=Ae?Array.from(Ae):null)}}oe=function yy(t,n,e,i,r){const a=e[1],c=function E4(t,n,e){const i=ca();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),Z_(t,i,n,Dc(t,n,1,null),e));const r=Du(n,t,i.directiveStart,i);Pa(r,n);const a=xo(i,n);return a&&Pa(a,n),r}(a,e,n);if(i.components.push(c),t[8]=c,r&&r.forEach(m=>m(c,n)),n.contentQueries){const m=ca();n.contentQueries(1,c,m.directiveStart)}const d=ca();return!a.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(il(d.index),W_(e[1],d,0,d.directiveStart,d.directiveEnd,n),X_(n,c)),c}(be,this.componentDef,te,q,[v5]),ju(Q,te,null)}finally{wf()}return new jA(this.componentType,oe,$c(de,te),te,de)}}class jA extends class AA{}{constructor(n,e,i,r,a){super(),this.location=i,this._rootLView=r,this._tNode=a,this.instance=e,this.hostView=this.changeDetectorRef=new LA(r),this.componentType=n}get injector(){return new gc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class Ns{}class s2{}const Wc=new Map;class u2 extends Ns{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new a2(this);const i=Co(n);this._bootstrapComponents=vs(i.bootstrap),this._r3Injector=ly(n,e,[{provide:Ns,useValue:this},{provide:Il,useValue:this.componentFactoryResolver}],Pn(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,e=Jr.THROW_IF_NOT_FOUND,i=Xi.Default){return n===Jr||n===Ns||n===mg?this:this._r3Injector.get(n,e,i)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Xg extends s2{constructor(n){super(),this.moduleType=n,null!==Co(n)&&function $A(t){const n=new Set;!function e(i){const r=Co(i,!0),a=r.id;null!==a&&(function l2(t,n,e){if(n&&n!==e)throw new Error(`Duplicate module registered for ${t} - ${Pn(n)} vs ${Pn(n.name)}`)}(a,Wc.get(a),i),Wc.set(a,i));const c=vs(r.imports);for(const d of c)n.has(d)||(n.add(d),e(d))}(t)}(n)}create(n){return new u2(this.moduleType,n)}}function nd(t,n,e){const i=Ha()+t,r=Et();return r[i]===Wi?bs(r,i,e?n.call(e):n()):Wu(r,i)}function hi(t,n,e,i){return f2(Et(),Ha(),t,n,e,i)}function ll(t,n,e,i,r){return h2(Et(),Ha(),t,n,e,i,r)}function rd(t,n){const e=t[n];return e===Wi?void 0:e}function f2(t,n,e,i,r,a){const c=n+e;return Ea(t,c,r)?bs(t,c+1,a?i.call(a,r):i(r)):rd(t,c+1)}function h2(t,n,e,i,r,a,c){const d=n+e;return Pl(t,d,r,a)?bs(t,d+2,c?i.call(c,r,a):i(r,a)):rd(t,d+2)}function p2(t,n,e,i,r,a,c,d){const m=n+e;return Xf(t,m,r,a,c)?bs(t,m+3,d?i.call(d,r,a,c):i(r,a,c)):rd(t,m+3)}function Di(t,n){const e=Tn();let i;const r=t+20;e.firstCreatePass?(i=function QA(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const a=i.factory||(i.factory=Rl(i.type)),c=Qs(Me);try{const d=Rf(!1),m=a();return Rf(d),function D5(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,Et(),r,m),m}finally{Qs(c)}}function ch(t,n,e){const i=t+20,r=Et(),a=dc(r,i);return od(r,i)?f2(r,Ha(),n,a.transform,e,a):a.transform(e)}function Yi(t,n,e,i){const r=t+20,a=Et(),c=dc(a,r);return od(a,r)?h2(a,Ha(),n,c.transform,e,i,c):c.transform(e,i)}function ad(t,n,e,i,r){const a=t+20,c=Et(),d=dc(c,a);return od(c,a)?p2(c,Ha(),n,d.transform,e,i,r,d):d.transform(e,i,r)}function od(t,n){return t[1].data[n].pure}function Yg(t){return n=>{setTimeout(t,void 0,n)}}const di=class t6 extends ${constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){var r,a,c;let d=n,m=e||(()=>null),_=i;if(n&&"object"==typeof n){const A=n;d=null===(r=A.next)||void 0===r?void 0:r.bind(A),m=null===(a=A.error)||void 0===a?void 0:a.bind(A),_=null===(c=A.complete)||void 0===c?void 0:c.bind(A)}this.__isAsync&&(m=Yg(m),d&&(d=Yg(d)),_&&(_=Yg(_)));const T=super.subscribe({next:d,error:m,complete:_});return n instanceof p&&n.add(T),T}};function i6(){return this._results[Ec()]()}class Kg{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ec(),i=Kg.prototype;i[e]||(i[e]=i6)}get changes(){return this._changes||(this._changes=new di)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=Ro(n);(this._changesDetected=!function wR(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],a=n[i];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Or=(()=>{class t{}return t.__NG_ELEMENT_ID__=a6,t})();const n6=Or,r6=class extends n6{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(n){const e=this._declarationTContainer.tViews,i=zu(this._declarationLView,e,n,16,null,e.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(e)),ju(e,i,n),new id(i)}};function a6(){return uh(ca(),Et())}function uh(t,n){return 4&t.type?new r6(n,t,$c(t,n)):null}let Po=(()=>{class t{}return t.__NG_ELEMENT_ID__=o6,t})();function o6(){return _2(ca(),Et())}const s6=Po,m2=class extends s6{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return $c(this._hostTNode,this._hostLView)}get injector(){return new gc(this._hostTNode,this._hostLView)}get parentInjector(){const n=Df(this._hostTNode,this._hostLView);if(pb(n)){const e=pc(n,this._hostLView),i=hc(n);return new gc(e[1].data[i+8],e)}return new gc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=b2(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,e,i){const r=n.createEmbeddedView(e||{});return this.insert(r,i),r}createComponent(n,e,i,r,a){const c=n&&!function Au(t){return"function"==typeof t}(n);let d;if(c)d=e;else{const A=e||{};d=A.index,i=A.injector,r=A.projectableNodes,a=A.ngModuleRef}const m=c?n:new Wg(Da(n)),_=i||this.parentInjector;if(!a&&null==m.ngModule){const q=(c?_:this.parentInjector).get(Ns,null);q&&(a=q)}const T=m.create(_,r,void 0,a);return this.insert(T.hostView,d),T}insert(n,e){const i=n._lView,r=i[1];if(function G3(t){return qo(t[3])}(i)){const T=this.indexOf(n);if(-1!==T)this.detach(T);else{const A=i[3],q=new m2(A,A[6],A[3]);q.detach(q.indexOf(n))}}const a=this._adjustIndex(e),c=this._lContainer;!function $D(t,n,e,i){const r=10+i,a=e.length;i>0&&(e[r-1][4]=n),i<a-10?(n[4]=e[r],Tb(e,10+i,n)):(e.push(n),n[4]=null),n[3]=e;const c=n[17];null!==c&&e!==c&&function WD(t,n){const e=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===e?t[9]=[n]:e.push(n)}(c,n);const d=n[19];null!==d&&d.insertView(t),n[2]|=128}(r,i,c,a);const d=Wp(a,c),m=i[11],_=Ff(m,c[7]);return null!==_&&function zD(t,n,e,i,r,a){i[0]=r,i[6]=n,Gu(t,i,e,1,r,a)}(r,c[6],m,i,_,d),n.attachToViewContainerRef(),Tb(Zg(c),a,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=b2(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=jp(this._lContainer,e);i&&(Pf(Zg(this._lContainer),e),c_(i[1],i))}detach(n){const e=this._adjustIndex(n,-1),i=jp(this._lContainer,e);return i&&null!=Pf(Zg(this._lContainer),e)?new id(i):null}_adjustIndex(n,e=0){return null==n?this.length+e:n}};function b2(t){return t[8]}function Zg(t){return t[8]||(t[8]=[])}function _2(t,n){let e;const i=n[t.index];if(qo(i))e=i;else{let r;if(8&t.type)r=aa(i);else{const a=n[11];r=a.createComment("");const c=xo(t,n);Al(a,Ff(a,c),r,function ZD(t,n){return Wr(t)?t.nextSibling(n):n.nextSibling}(a,c),!1)}n[t.index]=e=Q_(i,n,r,t),qf(n,e)}return new m2(e,t,n)}class Qg{constructor(n){this.queryList=n,this.matches=null}clone(){return new Qg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jg{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let a=0;a<i;a++){const c=e.getByIndex(a);r.push(this.queries[c.indexInDeclarationView].clone())}return new Jg(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==T2(n,e).matches&&this.queries[e].setDirty()}}class y2{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class ev{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,a=this.getByIndex(i).embeddedTView(n,r);a&&(a.indexInDeclarationView=i,null!==e?e.push(a):e=[a])}return null!==e?new ev(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class tv{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new tv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=i[r];this.matchTNodeWithReadOption(n,e,u6(e,a)),this.matchTNodeWithReadOption(n,e,Af(e,n,a,!1,!1))}else i===Or?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Af(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===xn||r===Po||r===Or&&4&e.type)this.addMatch(e.index,-2);else{const a=Af(e,n,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function u6(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function f6(t,n,e,i){return-1===e?function d6(t,n){return 11&t.type?$c(t,n):4&t.type?uh(t,n):null}(n,t):-2===e?function h6(t,n,e){return e===xn?$c(n,t):e===Or?uh(n,t):e===Po?_2(n,t):void 0}(t,n,i):Du(t,t[1],e,n)}function w2(t,n,e,i){const r=n[19].queries[i];if(null===r.matches){const a=t.data,c=e.matches,d=[];for(let m=0;m<c.length;m+=2){const _=c[m];d.push(_<0?null:f6(n,a[_],c[m+1],e.metadata.read))}r.matches=d}return r.matches}function iv(t,n,e,i){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const c=w2(t,n,r,e);for(let d=0;d<a.length;d+=2){const m=a[d];if(m>0)i.push(c[d/2]);else{const _=a[d+1],T=n[-m];for(let A=10;A<T.length;A++){const q=T[A];q[17]===q[3]&&iv(q[1],q,_,i)}if(null!==T[9]){const A=T[9];for(let q=0;q<A.length;q++){const Q=A[q];iv(Q[1],Q,_,i)}}}}}return i}function mn(t){const n=Et(),e=Tn(),i=ab();fp(i+1);const r=T2(e,i);if(t.dirty&&J1(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?iv(e,n,i,[]):w2(e,n,r,i);t.reset(a,BA),t.notifyOnChanges()}return!0}return!1}function Ba(t,n,e){const i=Tn();i.firstCreatePass&&(C2(i,new y2(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),S2(i,Et(),n)}function ea(t,n,e,i){const r=Tn();if(r.firstCreatePass){const a=ca();C2(r,new y2(n,e,i),a.index),function g6(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}S2(r,Et(),e)}function bn(){return function p6(t,n){return t[19].queries[n].queryList}(Et(),ab())}function S2(t,n,e){const i=new Kg(4==(4&e));j_(t,n,i,i.destroy),null===n[19]&&(n[19]=new Jg),n[19].queries.push(new Qg(i))}function C2(t,n,e){null===t.queries&&(t.queries=new ev),t.queries.track(new tv(n,e))}function T2(t,n){return t.queries.getByIndex(n)}function ni(t,n){return uh(t,n)}function hh(...t){}const ph=new an("Application Initializer");let Yc=(()=>{class t{constructor(e){this.appInits=e,this.resolve=hh,this.reject=hh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const a=this.appInits[r]();if(Xu(a))e.push(a);else if(Ig(a)){const c=new Promise((d,m)=>{a.subscribe({complete:d,error:m})});e.push(c)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Ft(ph,8))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();const ld=new an("AppId"),I6={provide:ld,useFactory:function E6(){return`${lv()}${lv()}${lv()}`},deps:[]};function lv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const H2=new an("Platform Initializer"),gh=new an("Platform ID"),G2=new an("appBootstrapListener");let z2=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();const cl=new an("LocaleId"),j2=new an("DefaultCurrencyCode");class B6{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let vh=(()=>{class t{compileModuleSync(e){return new Xg(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),a=vs(Co(e).declarations).reduce((c,d)=>{const m=Da(d);return m&&c.push(new Wg(m)),c},[]);return new B6(i,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();const V6=(()=>Promise.resolve(0))();function cv(t){"undefined"==typeof Zone?V6.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class br{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new di(!1),this.onMicrotaskEmpty=new di(!1),this.onStable=new di(!1),this.onError=new di(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function N6(){let t=dr.requestAnimationFrame,n=dr.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function U6(t){const n=()=>{!function L6(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(dr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,dv(t),t.isCheckStableRunning=!0,uv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),dv(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,a,c,d)=>{try{return q2(t),e.invokeTask(r,a,c,d)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&n(),$2(t)}},onInvoke:(e,i,r,a,c,d,m)=>{try{return q2(t),e.invoke(r,a,c,d,m)}finally{t.shouldCoalesceRunChangeDetection&&n(),$2(t)}},onHasTask:(e,i,r,a)=>{e.hasTask(r,a),i===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,dv(t),uv(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,i,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!br.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(br.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const a=this._inner,c=a.scheduleEventTask("NgZoneEvent: "+r,n,F6,hh,hh);try{return a.runTask(c,e,i)}finally{a.cancelTask(c)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const F6={};function uv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function dv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function q2(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $2(t){t._nesting--,uv(t)}class H6{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new di,this.onMicrotaskEmpty=new di,this.onStable=new di,this.onError=new di}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}let fv=(()=>{class t{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{br.assertNotInAngularZone(),cv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cv(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(c=>c.timeoutId!==a),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,i,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Ft(br))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})(),W2=(()=>{class t{constructor(){this._applications=new Map,hv.addToWindow(this)}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return hv.findTestabilityInTree(this,e,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();class G6{addToWindow(n){}findTestabilityInTree(n,e,i){return null}}let Qo,hv=new G6;const X2=new an("AllowMultipleToken");class Y2{constructor(n,e){this.name=n,this.token=e}}function K2(t,n,e=[]){const i=`Platform: ${n}`,r=new an(i);return(a=[])=>{let c=Z2();if(!c||c.injector.get(X2,!1))if(t)t(e.concat(a).concat({provide:r,useValue:!0}));else{const d=e.concat(a).concat({provide:r,useValue:!0},{provide:bg,useValue:"platform"});!function $6(t){if(Qo&&!Qo.destroyed&&!Qo.injector.get(X2,!1))throw new Cn(400,"");Qo=t.get(Q2);const n=t.get(H2,null);n&&n.forEach(e=>e())}(Jr.create({providers:d,name:i}))}return function W6(t){const n=Z2();if(!n)throw new Cn(401,"");return n}()}}function Z2(){return Qo&&!Qo.destroyed?Qo:null}let Q2=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const d=function X6(t,n){let e;return e="noop"===t?new H6:("zone.js"===t?void 0:t)||new br({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),e}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),m=[{provide:br,useValue:d}];return d.run(()=>{const _=Jr.create({providers:m,parent:this.injector,name:e.moduleType.name}),T=e.create(_),A=T.injector.get(Tc,null);if(!A)throw new Cn(402,"");return d.runOutsideAngular(()=>{const q=d.onError.subscribe({next:Q=>{A.handleError(Q)}});T.onDestroy(()=>{pv(this._modules,T),q.unsubscribe()})}),function Y6(t,n,e){try{const i=e();return Xu(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(A,d,()=>{const q=T.injector.get(Yc);return q.runInitializers(),q.donePromise.then(()=>(function Nk(t){(function so(t,n){null==t&&kr(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(Ew=t.toLowerCase().replace(/_/g,"-"))}(T.injector.get(cl,th)||th),this._moduleDoBootstrap(T),T))})})}bootstrapModule(e,i=[]){const r=J2({},i);return function j6(t,n,e){const i=new Xg(e);return Promise.resolve(i)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const i=e.injector.get(Bl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new Cn(403,"");e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Cn(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Ft(Jr))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();function J2(t,n){return Array.isArray(n)?n.reduce(J2,t):Object.assign(Object.assign({},t),n)}let Bl=(()=>{class t{constructor(e,i,r,a,c){this._zone=e,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const d=new b(_=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{_.next(this._stable),_.complete()})}),m=new b(_=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{br.assertNotInAngularZone(),cv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,_.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{br.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{_.next(!1)}))});return()=>{T.unsubscribe(),A.unsubscribe()}});this.isStable=$n(d,m.pipe(Wn()))}bootstrap(e,i){if(!this._initStatus.done)throw new Cn(405,"");let r;r=e instanceof n2?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const a=function q6(t){return t.isBoundToModule}(r)?void 0:this._injector.get(Ns),d=r.create(Jr.NULL,[],i||r.selector,a),m=d.location.nativeElement,_=d.injector.get(fv,null),T=_&&d.injector.get(W2);return _&&T&&T.registerApplication(m,_),d.onDestroy(()=>{this.detachView(d.hostView),pv(this.components,d),T&&T.unregisterApplication(m)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new Cn(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;pv(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(G2,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Ft(br),Ft(Jr),Ft(Tc),Ft(Il),Ft(Yc))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();function pv(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let tS=!0,go=(()=>{class t{}return t.__NG_ELEMENT_ID__=Q6,t})();function Q6(t){return function J6(t,n,e){if(gf(t)&&!e){const i=co(t.index,n);return new id(i,i)}return 47&t.type?new id(n[16],n):null}(ca(),Et(),16==(16&t))}class oS{constructor(){}supports(n){return $u(n)}create(n){return new a8(n)}}const r8=(t,n)=>n;class a8{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||r8}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,a=null;for(;e||i;){const c=!i||e&&e.currentIndex<lS(i,r,a)?e:i,d=lS(c,r,a),m=c.currentIndex;if(c===i)r--,i=i._nextRemoved;else if(e=e._next,null==c.previousIndex)r++;else{a||(a=[]);const _=d-r,T=m-r;if(_!=T){for(let q=0;q<_;q++){const Q=q<a.length?a[q]:a[q]=0,te=Q+q;T<=te&&te<_&&(a[q]=Q+1)}a[c.previousIndex]=T-_}}d!==m&&n(c,d,m)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!$u(n))throw new Cn(900,"");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,a,c,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let d=0;d<this.length;d++)a=n[d],c=this._trackByFn(d,a),null!==e&&Object.is(e.trackById,c)?(i&&(e=this._verifyReinsertion(e,a,c,d)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,c,d),i=!0),e=e._next}else r=0,function x5(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Ec()]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,d=>{c=this._trackByFn(r,d),null!==e&&Object.is(e.trackById,c)?(i&&(e=this._verifyReinsertion(e,d,c,r)),Object.is(e.item,d)||this._addIdentityChange(e,d)):(e=this._mismatch(e,d,c,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,a,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,a,r)):n=this._addAfter(new o8(e,i),a,r),n}_verifyReinsertion(n,e,i,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==a?n=this._reinsertAfter(a,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,a=n._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new sS),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sS),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class o8{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class s8{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class sS{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new s8,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lS(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}class cS{constructor(){}supports(n){return n instanceof Map||Tg(n)}create(){return new l8}}class l8{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||Tg(n)))throw new Cn(900,"")}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const a=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,a)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,e);const a=r._prev,c=r._next;return a&&(a._next=c),c&&(c._prev=a),r._next=null,r._prev=null,r}const i=new c8(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}}class c8{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uS(){return new cd([new oS])}let cd=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||uS()),deps:[[t,new wc,new hs]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new Cn(901,"")}}return t.\u0275prov=si({token:t,providedIn:"root",factory:uS}),t})();function dS(){return new Kc([new cS])}let Kc=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||dS()),deps:[[t,new wc,new hs]]}}find(e){const i=this.factories.find(a=>a.supports(e));if(i)return i;throw new Cn(901,"")}}return t.\u0275prov=si({token:t,providedIn:"root",factory:dS}),t})();const u8=[new cS],f8=new cd([new oS]),h8=new Kc(u8),p8=K2(null,"core",[{provide:gh,useValue:"unknown"},{provide:Q2,deps:[Jr]},{provide:W2,deps:[]},{provide:z2,deps:[]}]),_8=[{provide:Bl,useClass:Bl,deps:[br,Jr,Tc,Il,Yc]},{provide:HA,deps:[br],useFactory:function y8(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(e){n.push(e)}}},{provide:Yc,useClass:Yc,deps:[[new hs,ph]]},{provide:vh,useClass:vh,deps:[]},I6,{provide:cd,useFactory:function g8(){return f8},deps:[]},{provide:Kc,useFactory:function v8(){return h8},deps:[]},{provide:cl,useFactory:function m8(t){return t||function b8(){return"undefined"!=typeof $localize&&$localize.locale||th}()},deps:[[new Ou(cl),new hs,new wc]]},{provide:j2,useValue:"USD"}];let w8=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Ft(Bl))},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({providers:_8}),t})(),_h=null;function ws(){return _h}const oa=new an("DocumentToken");let Vl=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:function(){return function M8(){return Ft(fS)}()},providedIn:"platform"}),t})();const x8=new an("Location Initialized");let fS=(()=>{class t extends Vl{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ws().getBaseHref(this._doc)}onPopState(e){const i=ws().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=ws().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){hS()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){hS()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Ft(oa))},t.\u0275prov=si({token:t,factory:function(){return function R8(){return new fS(Ft(oa))}()},providedIn:"platform"}),t})();function hS(){return!!window.history.pushState}function _v(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function pS(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Fs(t){return t&&"?"!==t[0]?"?"+t:t}let Zc=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:function(){return function D8(t){const n=Ft(oa).location;return new gS(Ft(Vl),n&&n.origin||"")}()},providedIn:"root"}),t})();const yv=new an("appBaseHref");let gS=(()=>{class t extends Zc{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return _v(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+Fs(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,a){const c=this.prepareExternalUrl(r+Fs(a));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,a){const c=this.prepareExternalUrl(r+Fs(a));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(Ft(Vl),Ft(yv,8))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})(),k8=(()=>{class t extends Zc{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=_v(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,a){let c=this.prepareExternalUrl(r+Fs(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,a){let c=this.prepareExternalUrl(r+Fs(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(Ft(Vl),Ft(yv,8))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})(),wv=(()=>{class t{constructor(e,i){this._subject=new di,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=pS(vS(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+Fs(i))}normalize(e){return t.stripTrailingSlash(function P8(t,n){return t&&n.startsWith(t)?n.substring(t.length):n}(this._baseHref,vS(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Fs(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Fs(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return t.normalizeQueryParams=Fs,t.joinWithSlash=_v,t.stripTrailingSlash=pS,t.\u0275fac=function(e){return new(e||t)(Ft(Zc),Ft(Vl))},t.\u0275prov=si({token:t,factory:function(){return function A8(){return new wv(Ft(Zc),Ft(Vl))}()},providedIn:"root"}),t})();function vS(t){return t.replace(/\/index.html$/,"")}var to=(()=>((to=to||{})[to.Decimal=0]="Decimal",to[to.Percent=1]="Percent",to[to.Currency=2]="Currency",to[to.Scientific=3]="Scientific",to))(),sa=(()=>((sa=sa||{})[sa.Zero=0]="Zero",sa[sa.One=1]="One",sa[sa.Two=2]="Two",sa[sa.Few=3]="Few",sa[sa.Many=4]="Many",sa[sa.Other=5]="Other",sa))(),Ci=(()=>((Ci=Ci||{})[Ci.Decimal=0]="Decimal",Ci[Ci.Group=1]="Group",Ci[Ci.List=2]="List",Ci[Ci.PercentSign=3]="PercentSign",Ci[Ci.PlusSign=4]="PlusSign",Ci[Ci.MinusSign=5]="MinusSign",Ci[Ci.Exponential=6]="Exponential",Ci[Ci.SuperscriptingExponent=7]="SuperscriptingExponent",Ci[Ci.PerMille=8]="PerMille",Ci[Ci.Infinity=9]="Infinity",Ci[Ci.NaN=10]="NaN",Ci[Ci.TimeSeparator=11]="TimeSeparator",Ci[Ci.CurrencyDecimal=12]="CurrencyDecimal",Ci[Ci.CurrencyGroup=13]="CurrencyGroup",Ci))();function Eo(t,n){const e=ja(t),i=e[Jt.NumberSymbols][n];if(void 0===i){if(n===Ci.CurrencyDecimal)return e[Jt.NumberSymbols][Ci.Decimal];if(n===Ci.CurrencyGroup)return e[Jt.NumberSymbols][Ci.Group]}return i}function Sv(t,n){return ja(t)[Jt.NumberFormats][n]}const F8=Aw,nP=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Rv(t,n,e,i,r,a,c=!1){let d="",m=!1;if(isFinite(t)){let _=function dP(t){let i,r,a,c,d,n=Math.abs(t)+"",e=0;for((r=n.indexOf("."))>-1&&(n=n.replace(".","")),(a=n.search(/e/i))>0?(r<0&&(r=a),r+=+n.slice(a+1),n=n.substring(0,a)):r<0&&(r=n.length),a=0;"0"===n.charAt(a);a++);if(a===(d=n.length))i=[0],r=1;else{for(d--;"0"===n.charAt(d);)d--;for(r-=a,i=[],c=0;a<=d;a++,c++)i[c]=Number(n.charAt(a))}return r>22&&(i=i.splice(0,21),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}(t);c&&(_=function uP(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(_));let T=n.minInt,A=n.minFrac,q=n.maxFrac;if(a){const ce=a.match(nP);if(null===ce)throw new Error(`${a} is not a valid digit info`);const ne=ce[1],Ae=ce[3],Ue=ce[5];null!=ne&&(T=kv(ne)),null!=Ae&&(A=kv(Ae)),null!=Ue?q=kv(Ue):null!=Ae&&A>q&&(q=A)}!function fP(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,r=i.length-t.integerLen;const a=Math.min(Math.max(n,r),e);let c=a+t.integerLen,d=i[c];if(c>0){i.splice(Math.max(t.integerLen,c));for(let A=c;A<i.length;A++)i[A]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,c=a+1),i[0]=0;for(let A=1;A<c;A++)i[A]=0}if(d>=5)if(c-1<0){for(let A=0;A>c;A--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[c-1]++;for(;r<Math.max(0,a);r++)i.push(0);let m=0!==a;const _=n+t.integerLen,T=i.reduceRight(function(A,q,Q,te){return te[Q]=(q+=A)<10?q:q-10,m&&(0===te[Q]&&Q>=_?te.pop():m=!1),q>=10?1:0},0);T&&(i.unshift(T),t.integerLen++)}(_,A,q);let Q=_.digits,te=_.integerLen;const oe=_.exponent;let de=[];for(m=Q.every(ce=>!ce);te<T;te++)Q.unshift(0);for(;te<0;te++)Q.unshift(0);te>0?de=Q.splice(te,Q.length):(de=Q,Q=[0]);const be=[];for(Q.length>=n.lgSize&&be.unshift(Q.splice(-n.lgSize,Q.length).join(""));Q.length>n.gSize;)be.unshift(Q.splice(-n.gSize,Q.length).join(""));Q.length&&be.unshift(Q.join("")),d=be.join(Eo(e,i)),de.length&&(d+=Eo(e,r)+de.join("")),oe&&(d+=Eo(e,Ci.Exponential)+"+"+oe)}else d=Eo(e,Ci.Infinity);return d=t<0&&!m?n.negPre+d+n.negSuf:n.posPre+d+n.posSuf,d}function Dv(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(";"),r=i[0],a=i[1],c=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],d=c[0],m=c[1]||"";e.posPre=d.substr(0,d.indexOf("#"));for(let T=0;T<m.length;T++){const A=m.charAt(T);"0"===A?e.minFrac=e.maxFrac=T+1:"#"===A?e.maxFrac=T+1:e.posSuf+=A}const _=d.split(",");if(e.gSize=_[1]?_[1].length:0,e.lgSize=_[2]||_[1]?(_[2]||_[1]).length:0,a){const T=r.length-e.posPre.length-e.posSuf.length,A=a.indexOf("#");e.negPre=a.substr(0,A).replace(/'/g,""),e.negSuf=a.substr(A+T).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}function kv(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}class kh{}let hP=(()=>{class t extends kh{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(F8(i||this.locale)(e)){case sa.Zero:return"zero";case sa.One:return"one";case sa.Two:return"two";case sa.Few:return"few";case sa.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Ft(cl))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})(),_r=(()=>{class t{constructor(e,i,r,a){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&($u(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Pn(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(Me(cd),Me(Kc),Me(xn),Me(Ao))},t.\u0275dir=Yt({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class vP{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vr=(()=>{class t{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,a,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new vP(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===a?void 0:a);else if(null!==a){const d=i.get(a);i.move(d,c),MS(d,r)}});for(let r=0,a=i.length;r<a;r++){const d=i.get(r).context;d.index=r,d.count=a,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{MS(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(Me(Po),Me(Or),Me(cd))},t.\u0275dir=Yt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function MS(t,n){t.context.$implicit=n.item}let on=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new mP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){xS("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){xS("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(Me(Po),Me(Or))},t.\u0275dir=Yt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class mP{constructor(){this.$implicit=null,this.ngIf=null}}function xS(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Pn(n)}'.`)}let Qc=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(Me(Po))},t.\u0275dir=Yt({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[ra]}),t})();function es(t,n){return new Cn(2100,"")}let ts=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!Ev(e))return null;r=r||this._locale;try{return function cP(t,n,e){return Rv(t,Dv(Sv(n,to.Decimal),Eo(n,Ci.MinusSign)),n,Ci.Group,Ci.Decimal,e)}(Iv(e),r,i)}catch(a){throw es()}}}return t.\u0275fac=function(e){return new(e||t)(Me(cl,16))},t.\u0275pipe=Ja({name:"number",type:t,pure:!0}),t})(),kS=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!Ev(e))return null;r=r||this._locale;try{return function lP(t,n,e){return Rv(t,Dv(Sv(n,to.Percent),Eo(n,Ci.MinusSign)),n,Ci.Group,Ci.Decimal,e,!0).replace(new RegExp("%","g"),Eo(n,Ci.PercentSign))}(Iv(e),r,i)}catch(a){throw es()}}}return t.\u0275fac=function(e){return new(e||t)(Me(cl,16))},t.\u0275pipe=Ja({name:"percent",type:t,pure:!0}),t})();function Ev(t){return!(null==t||""===t||t!=t)}function Iv(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let io=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({providers:[{provide:kh,useClass:hP}]}),t})();let qP=(()=>{class t{}return t.\u0275prov=si({token:t,providedIn:"root",factory:()=>new $P(Ft(oa),window)}),t})();class $P{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function WP(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const a=r.shadowRoot;if(a){const c=a.getElementById(n)||a.querySelector(`[name="${n}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],r-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=PS(this.window.history)||PS(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function PS(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Bv extends class YP extends class T8{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function C8(t){_h||(_h=t)}(new Bv)}onAndCancel(n,e,i){return n.addEventListener(e,i,!1),()=>{n.removeEventListener(e,i,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function KP(){return fd=fd||document.querySelector("base"),fd?fd.getAttribute("href"):null}();return null==e?null:function ZP(t){Ah=Ah||document.createElement("a"),Ah.setAttribute("href",t);const n=Ah.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){fd=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function pP(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,a]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(a)}return null}(document.cookie,n)}}let Ah,fd=null;const ES=new an("TRANSITION_ID"),JP=[{provide:ph,useFactory:function QP(t,n,e){return()=>{e.get(Yc).donePromise.then(()=>{const i=ws(),r=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let a=0;a<r.length;a++)i.remove(r[a])})}},deps:[ES,oa,Jr],multi:!0}];class Ov{static init(){!function z6(t){hv=t}(new Ov)}addToWindow(n){dr.getAngularTestability=(i,r=!0)=>{const a=n.findTestabilityInTree(i,r);if(null==a)throw new Error("Could not find testability for element.");return a},dr.getAllAngularTestabilities=()=>n.getAllTestabilities(),dr.getAllAngularRootElements=()=>n.getAllRootElements(),dr.frameworkStabilizers||(dr.frameworkStabilizers=[]),dr.frameworkStabilizers.push(i=>{const r=dr.getAllAngularTestabilities();let a=r.length,c=!1;const d=function(m){c=c||m,a--,0==a&&i(c)};r.forEach(function(m){m.whenStable(d)})})}findTestabilityInTree(n,e,i){if(null==e)return null;const r=n.getTestability(e);return null!=r?r:i?ws().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null}}let eE=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();const Ph=new an("EventManagerPlugins");let Eh=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let a=0;a<r.length;a++){const c=r[a];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Ft(Ph),Ft(br))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();class IS{constructor(n){this._doc=n}addGlobalEventListener(n,e,i){const r=ws().getGlobalEventTarget(this._doc,n);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let BS=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})(),hd=(()=>{class t extends BS{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(OS),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(OS))}}return t.\u0275fac=function(e){return new(e||t)(Ft(oa))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();function OS(t){ws().remove(t)}const Vv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Nv=/%COMP%/g;function Ih(t,n,e){for(let i=0;i<n.length;i++){let r=n[i];Array.isArray(r)?Ih(t,r,e):(r=r.replace(Nv,t),e.push(r))}return e}function FS(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let Fv=(()=>{class t{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Lv(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case cs.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new oE(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case cs.ShadowDom:return new sE(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Ih(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Ft(Eh),Ft(hd),Ft(ld))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();class Lv{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(Vv[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){n.appendChild(e)}insertBefore(n,e,i){n&&n.insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const a=Vv[r];a?n.setAttributeNS(a,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=Vv[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(ho.DashCase|ho.Important)?n.style.setProperty(e,i,r&ho.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&ho.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,FS(i)):this.eventManager.addEventListener(n,e,FS(i))}}class oE extends Lv{constructor(n,e,i,r){super(n),this.component=i;const a=Ih(r+"-"+i.id,i.styles,[]);e.addStyles(a),this.contentAttr=function nE(t){return"_ngcontent-%COMP%".replace(Nv,t)}(r+"-"+i.id),this.hostAttr=function rE(t){return"_nghost-%COMP%".replace(Nv,t)}(r+"-"+i.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}class sE extends Lv{constructor(n,e,i,r){super(n),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ih(r.id,r.styles,[]);for(let c=0;c<a.length;c++){const d=document.createElement("style");d.textContent=a[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let lE=(()=>{class t extends IS{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return t.\u0275fac=function(e){return new(e||t)(Ft(oa))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();const US=["alt","control","meta","shift"],uE={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},HS={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},dE={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let fE=(()=>{class t extends IS{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const a=t.parseEventName(i),c=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ws().onAndCancel(e,a.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(i.pop());let c="";if(US.forEach(m=>{const _=i.indexOf(m);_>-1&&(i.splice(_,1),c+=m+".")}),c+=a,0!=i.length||0===a.length)return null;const d={};return d.domEventName=r,d.fullKey=c,d}static getEventFullKey(e){let i="",r=function hE(t){let n=t.key;if(null==n){if(n=t.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===t.location&&HS.hasOwnProperty(n)&&(n=HS[n]))}return uE[n]||n}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),US.forEach(a=>{a!=r&&dE[a](e)&&(i+=a+".")}),i+=r,i}static eventCallback(e,i,r){return a=>{t.getEventFullKey(a)===e&&r.runGuarded(()=>i(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Ft(oa))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();const mE=K2(p8,"browser",[{provide:gh,useValue:"browser"},{provide:H2,useValue:function pE(){Bv.makeCurrent(),Ov.init()},multi:!0},{provide:oa,useFactory:function vE(){return function F3(t){np=t}(document),document},deps:[]}]),bE=[{provide:bg,useValue:"root"},{provide:Tc,useFactory:function gE(){return new Tc},deps:[]},{provide:Ph,useClass:lE,multi:!0,deps:[oa,br,gh]},{provide:Ph,useClass:fE,multi:!0,deps:[oa]},{provide:Fv,useClass:Fv,deps:[Eh,hd,ld]},{provide:qg,useExisting:Fv},{provide:BS,useExisting:hd},{provide:hd,useClass:hd,deps:[oa]},{provide:fv,useClass:fv,deps:[br]},{provide:Eh,useClass:Eh,deps:[Ph,br]},{provide:class XP{},useClass:eE,deps:[]}];let _E=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:ld,useValue:e.appId},{provide:ES,useExisting:ld},JP]}}}return t.\u0275fac=function(e){return new(e||t)(Ft(t,12))},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({providers:bE,imports:[io,w8]}),t})();"undefined"!=typeof window&&window;let dl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:function(e){let i=null;return i=e?new(e||t):Ft(jS),i},providedIn:"root"}),t})(),jS=(()=>{class t extends dl{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case vn.NONE:return i;case vn.HTML:return ps(i,"HTML")?fo(i):Wb(this._doc,String(i)).toString();case vn.STYLE:return ps(i,"Style")?fo(i):i;case vn.SCRIPT:if(ps(i,"Script"))return fo(i);throw new Error("unsafe value used in a script context");case vn.URL:return Lb(i),ps(i,"URL")?fo(i):Nu(String(i));case vn.RESOURCE_URL:if(ps(i,"ResourceURL"))return fo(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function QR(t){return new WR(t)}(e)}bypassSecurityTrustStyle(e){return function JR(t){return new XR(t)}(e)}bypassSecurityTrustScript(e){return function eD(t){return new YR(t)}(e)}bypassSecurityTrustUrl(e){return function tD(t){return new KR(t)}(e)}bypassSecurityTrustResourceUrl(e){return function iD(t){return new ZR(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(Ft(oa))},t.\u0275prov=si({token:t,factory:function(e){let i=null;return i=e?new e:function kE(t){return new jS(t.get(oa))}(Ft(Jr)),i},providedIn:"root"}),t})();const{isArray:AE}=Array,{getPrototypeOf:PE,prototype:EE,keys:IE}=Object;function qS(t){if(1===t.length){const n=t[0];if(AE(n))return{args:n,keys:null};if(function BE(t){return t&&"object"==typeof t&&PE(t)===EE}(n)){const e=IE(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:OE}=Array;function Hv(t){return Pe(n=>function VE(t,n){return OE(n)?t(...n):t(n)}(t,n))}function $S(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}let WS=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(Me(Ao),Me(xn))},t.\u0275dir=Yt({type:t}),t})(),Nl=(()=>{class t extends WS{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Aa(t)))(i||t)}}(),t.\u0275dir=Yt({type:t,features:[Yn]}),t})();const Bo=new an("NgValueAccessor"),FE={provide:Bo,useExisting:En(()=>Jc),multi:!0};let Jc=(()=>{class t extends Nl{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Aa(t)))(i||t)}}(),t.\u0275dir=Yt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,i){1&e&&_e("change",function(a){return i.onChange(a.target.checked)})("blur",function(){return i.onTouched()})},features:[mr([FE]),Yn]}),t})();const LE={provide:Bo,useExisting:En(()=>Us),multi:!0},HE=new an("CompositionEventMode");let Us=(()=>{class t extends WS{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function UE(){const t=ws()?ws().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(Me(Ao),Me(xn),Me(HE,8))},t.\u0275dir=Yt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&_e("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[mr([LE]),Yn]}),t})();function XS(t){return null!=t&&"number"==typeof t.length}const Oa=new an("NgValidators"),hl=new an("NgAsyncValidators");function Bh(t){return null}function nC(t){return null!=t}function rC(t){const n=Xu(t)?Vi(t):t;return Ig(n),n}function aC(t){let n={};return t.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function oC(t,n){return n.map(e=>e(t))}function sC(t){return t.map(n=>function zE(t){return!t.validate}(n)?n:e=>n.validate(e))}function Gv(t){return null!=t?function lC(t){if(!t)return null;const n=t.filter(nC);return 0==n.length?null:function(e){return aC(oC(e,n))}}(sC(t)):null}function zv(t){return null!=t?function cC(t){if(!t)return null;const n=t.filter(nC);return 0==n.length?null:function(e){return function NE(...t){const n=Fn(t),{args:e,keys:i}=qS(t),r=new b(a=>{const{length:c}=e;if(!c)return void a.complete();const d=new Array(c);let m=c,_=c;for(let T=0;T<c;T++){let A=!1;st(e[T]).subscribe(ke(a,q=>{A||(A=!0,_--),d[T]=q},()=>m--,void 0,()=>{(!m||!A)&&(_||a.next(i?$S(i,d):d),a.complete())}))}});return n?r.pipe(Hv(n)):r}(oC(e,n).map(rC)).pipe(Pe(aC))}}(sC(t)):null}function uC(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function dC(t){return t._rawValidators}function fC(t){return t._rawAsyncValidators}function jv(t){return t?Array.isArray(t)?t:[t]:[]}function Oh(t,n){return Array.isArray(t)?t.includes(n):t===n}function hC(t,n){const e=jv(n);return jv(t).forEach(r=>{Oh(e,r)||e.push(r)}),e}function pC(t,n){return jv(n).filter(e=>!Oh(t,e))}class gC{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Gv(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=zv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class pl extends gC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $a extends gC{get formDirective(){return null}get path(){return null}}class vC{constructor(n){this._cd=n}is(n){var e,i,r;return"submitted"===n?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[n])}}let Hs=(()=>{class t extends vC{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(Me(pl,2))},t.\u0275dir=Yt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&Ii("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[Yn]}),t})(),Vh=(()=>{class t extends vC{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(Me($a,10))},t.\u0275dir=Yt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&Ii("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[Yn]}),t})();function Fh(t,n){return[...n.path,t]}function pd(t,n){Wv(t,n),n.valueAccessor.writeValue(t.value),function ZE(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&bC(t,n)})}(t,n),function JE(t,n){const e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function QE(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&bC(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function KE(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function Lh(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),Hh(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Uh(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Wv(t,n){const e=dC(t);null!==n.validator?t.setValidators(uC(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=fC(t);null!==n.asyncValidator?t.setAsyncValidators(uC(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();Uh(n._rawValidators,r),Uh(n._rawAsyncValidators,r)}function Hh(t,n){let e=!1;if(null!==t){if(null!==n.validator){const r=dC(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(c=>c!==n.validator);a.length!==r.length&&(e=!0,t.setValidators(a))}}if(null!==n.asyncValidator){const r=fC(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(c=>c!==n.asyncValidator);a.length!==r.length&&(e=!0,t.setAsyncValidators(a))}}}const i=()=>{};return Uh(n._rawValidators,i),Uh(n._rawAsyncValidators,i),e}function bC(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function _C(t,n){Wv(t,n)}function Xv(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function yC(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Yv(t,n){if(!n)return null;let e,i,r;return Array.isArray(n),n.forEach(a=>{a.constructor===Us?e=a:function iI(t){return Object.getPrototypeOf(t.constructor)===Nl}(a)?i=a:r=a}),r||i||e||null}function Kv(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const gd="VALID",Gh="INVALID",eu="PENDING",vd="DISABLED";function Qv(t){return(zh(t)?t.validators:t)||null}function wC(t){return Array.isArray(t)?Gv(t):t||null}function Jv(t,n){return(zh(n)?n.asyncValidators:t)||null}function SC(t){return Array.isArray(t)?zv(t):t||null}function zh(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const CC=t=>t instanceof im,em=t=>t instanceof jh;function TC(t){return CC(t)?t.value:t.getRawValue()}function MC(t,n){const e=em(t),i=t.controls;if(!(e?Object.keys(i):i).length)throw new Cn(1e3,"");if(!i[n])throw new Cn(1001,"")}function xC(t,n){em(t),t._forEachChild((i,r)=>{if(void 0===n[r])throw new Cn(1002,"")})}class tm{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=wC(this._rawValidators),this._composedAsyncValidatorFn=SC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===gd}get invalid(){return this.status===Gh}get pending(){return this.status==eu}get disabled(){return this.status===vd}get enabled(){return this.status!==vd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=wC(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=SC(n)}addValidators(n){this.setValidators(hC(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(hC(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(pC(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(pC(n,this._rawAsyncValidators))}hasValidator(n){return Oh(this._rawValidators,n)}hasAsyncValidator(n){return Oh(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=eu,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=vd,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=gd,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gd||this.status===eu)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vd:gd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=eu,this._hasOwnPendingAsyncValidator=!0;const e=rC(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){return function nI(t,n,e){if(null==n||(Array.isArray(n)||(n=n.split(e)),Array.isArray(n)&&0===n.length))return null;let i=t;return n.forEach(r=>{i=em(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(t=>t instanceof aI)(i)&&i.at(r)||null}),i}(this,n,".")}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new di,this.statusChanges=new di}_calculateStatus(){return this._allControlsDisabled()?vd:this.errors?Gh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(eu)?eu:this._anyControlsHaveStatus(Gh)?Gh:gd}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){zh(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class im extends tm{constructor(n=null,e,i){super(Qv(e),Jv(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zh(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Kv(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Kv(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class jh extends tm{constructor(n,e,i){super(Qv(e),Jv(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){xC(this,n),Object.keys(n).forEach(i=>{MC(this,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=TC(e),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&n(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,e,i)=>((e.enabled||this.disabled)&&(n[i]=e.value),n))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,a)=>{i=e(i,r,a)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class aI extends tm{constructor(n,e,i){super(Qv(e),Jv(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){xC(this,n),n.forEach((i,r)=>{MC(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>TC(n))}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const oI={provide:$a,useExisting:En(()=>bd)},md=(()=>Promise.resolve(null))();let bd=(()=>{class t extends $a{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new di,this.form=new jh({},Gv(e),zv(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){md.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),pd(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){md.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){md.then(()=>{const i=this._findContainer(e.path),r=new jh({});_C(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){md.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){md.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,yC(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(Me(Oa,10),Me(hl,10))},t.\u0275dir=Yt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&_e("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[mr([oI]),Yn]}),t})();const lI={provide:pl,useExisting:En(()=>Gs)},kC=(()=>Promise.resolve(null))();let Gs=(()=>{class t extends pl{constructor(e,i,r,a,c){super(),this._changeDetectorRef=c,this.control=new im,this._registered=!1,this.update=new di,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Yv(0,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Xv(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pd(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){kC.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;kC.then(()=>{var a;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(e){return this._parent?Fh(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(Me($a,9),Me(Oa,10),Me(hl,10),Me(Bo,10),Me(go,8))},t.\u0275dir=Yt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[mr([lI]),Yn,ra]}),t})(),qh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Yt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const cI={provide:Bo,useExisting:En(()=>nm),multi:!0};let nm=(()=>{class t extends Nl{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Aa(t)))(i||t)}}(),t.\u0275dir=Yt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&_e("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[mr([cI]),Yn]}),t})(),AC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({}),t})();const rm=new an("NgModelWithFormControlWarning"),pI={provide:$a,useExisting:En(()=>$h)};let $h=(()=>{class t extends $a{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new di,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Hh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return pd(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Lh(e.control||null,e,!1),Kv(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,yC(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(Lh(i||null,e),CC(r)&&(pd(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);_C(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function eI(t,n){return Hh(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Wv(this.form,this),this._oldForm&&Hh(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(Me(Oa,10),Me(hl,10))},t.\u0275dir=Yt({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&_e("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[mr([pI]),Yn,ra]}),t})();const mI={provide:pl,useExisting:En(()=>sm)};let sm=(()=>{class t extends pl{constructor(e,i,r,a,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new di,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Yv(0,a)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),Xv(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Fh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(Me($a,13),Me(Oa,10),Me(hl,10),Me(Bo,10),Me(rm,8))},t.\u0275dir=Yt({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[mr([mI]),Yn,ra]}),t})();const bI={provide:Bo,useExisting:En(()=>Wh),multi:!0};function OC(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Wh=(()=>{class t extends Nl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=OC(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function _I(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Aa(t)))(i||t)}}(),t.\u0275dir=Yt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&_e("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[mr([bI]),Yn]}),t})(),VC=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(OC(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Me(xn),Me(Ao),Me(Wh,9))},t.\u0275dir=Yt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const yI={provide:Bo,useExisting:En(()=>lm),multi:!0};function NC(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let lm=(()=>{class t extends Nl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(a=>this._getOptionId(a));i=(a,c)=>{a._setSelected(r.indexOf(c.toString())>-1)}}else i=(r,a)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],a=i.selectedOptions;if(void 0!==a){const c=a;for(let d=0;d<c.length;d++){const _=this._getOptionValue(c[d].value);r.push(_)}}else{const c=i.options;for(let d=0;d<c.length;d++){const m=c[d];if(m.selected){const _=this._getOptionValue(m.value);r.push(_)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function wI(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Aa(t)))(i||t)}}(),t.\u0275dir=Yt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&_e("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[mr([yI]),Yn]}),t})(),FC=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(NC(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(NC(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Me(xn),Me(Ao),Me(lm,9))},t.\u0275dir=Yt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function LC(t){return"number"==typeof t?t:parseInt(t,10)}let Fl=(()=>{class t{constructor(){this._validator=Bh}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Bh,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Yt({type:t,features:[ra]}),t})();const DI={provide:Oa,useExisting:En(()=>Xh),multi:!0};let Xh=(()=>{class t extends Fl{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>LC(e),this.createValidator=e=>function eC(t){return n=>function fl(t){return null==t||0===t.length}(n.value)||!XS(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Aa(t)))(i||t)}}(),t.\u0275dir=Yt({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&lr("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[mr([DI]),Yn]}),t})();const kI={provide:Oa,useExisting:En(()=>Ll),multi:!0};let Ll=(()=>{class t extends Fl{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>LC(e),this.createValidator=e=>function tC(t){return n=>XS(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Aa(t)))(i||t)}}(),t.\u0275dir=Yt({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&lr("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[mr([kI]),Yn]}),t})(),$C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[AC]]}),t})(),WC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[$C]}),t})(),PI=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:rm,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[$C]}),t})();function Gi(...t){return Vi(t,Ri(t))}class zr extends ${constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function XC(t,n,e){t?An(e,t,n):n()}const Yh=W(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function _d(...t){return function II(){return Tr(1)}()(Vi(t,Ri(t)))}function YC(t){return new b(n=>{st(t()).subscribe(n)})}function KC(){return Se((t,n)=>{let e=null;t._refCount++;const i=ke(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class BI extends b{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,ie(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,null==n||n.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new p;const e=this.getSubject();n.add(this.source.subscribe(ke(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=p.EMPTY)}return n}refCount(){return KC()(this)}}function zs(t,n){return Se((e,i)=>{let r=null,a=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe(ke(i,m=>{null==r||r.unsubscribe();let _=0;const T=a++;st(t(m,T)).subscribe(r=ke(i,A=>i.next(n?n(m,A,T,_++):A),()=>{r=null,d()}))},()=>{c=!0,d()}))})}function OI(t,n,e,i,r){return(a,c)=>{let d=e,m=n,_=0;a.subscribe(ke(c,T=>{const A=_++;m=d?t(m,T,A):(d=!0,T),i&&c.next(m)},r&&(()=>{d&&c.next(m),c.complete()})))}}function ZC(t,n){return Se(OI(t,n,arguments.length>=2,!0))}function Ca(t,n){return Se((e,i)=>{let r=0;e.subscribe(ke(i,a=>t.call(n,a,r++)&&i.next(a)))})}function gl(t){return Se((n,e)=>{let a,i=null,r=!1;i=n.subscribe(ke(e,void 0,void 0,c=>{a=st(t(c,gl(t)(n))),i?(i.unsubscribe(),i=null,a.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,a.subscribe(e))})}function yd(t,n){return j(n)?at(t,n,1):at(t,1)}function dm(t){return t<=0?()=>dt:Se((n,e)=>{let i=[];n.subscribe(ke(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function QC(t=VI){return Se((n,e)=>{let i=!1;n.subscribe(ke(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function VI(){return new Yh}function JC(t){return Se((n,e)=>{let i=!1;n.subscribe(ke(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function tu(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Ca((r,a)=>t(r,a,i)):f,Ni(1),e?JC(n):QC(()=>new Yh))}function Va(t,n,e){const i=j(t)||n||e?{next:t,error:n,complete:e}:t;return i?Se((r,a)=>{var c;null===(c=i.subscribe)||void 0===c||c.call(i);let d=!0;r.subscribe(ke(a,m=>{var _;null===(_=i.next)||void 0===_||_.call(i,m),a.next(m)},()=>{var m;d=!1,null===(m=i.complete)||void 0===m||m.call(i),a.complete()},m=>{var _;d=!1,null===(_=i.error)||void 0===_||_.call(i,m),a.error(m)},()=>{var m,_;d&&(null===(m=i.unsubscribe)||void 0===m||m.call(i)),null===(_=i.finalize)||void 0===_||_.call(i)}))}):f}class js{constructor(n,e){this.id=n,this.url=e}}class fm extends js{constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wd extends js{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class eT extends js{constructor(n,e,i){super(n,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class LI extends js{constructor(n,e,i){super(n,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class UI extends js{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HI extends js{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GI extends js{constructor(n,e,i,r,a){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zI extends js{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jI extends js{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tT{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class iT{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qI{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $I{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WI{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XI{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nT{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const cn="primary";class YI{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function iu(t){return new YI(t)}const rT="ngNavigationCancelingError";function hm(t){const n=Error("NavigationCancelingError: "+t);return n[rT]=!0,n}function ZI(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let a=0;a<i.length;a++){const c=i[a],d=t[a];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Ss(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!aT(t[r],n[r]))return!1;return!0}function aT(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,a)=>i[a]===r)}return t===n}function oT(t){return Array.prototype.concat.apply([],t)}function sT(t){return t.length>0?t[t.length-1]:null}function Ta(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function Cs(t){return Ig(t)?t:Xu(t)?Vi(Promise.resolve(t)):Gi(t)}const e7={exact:function uT(t,n,e){if(!Hl(t.segments,n.segments)||!Zh(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!uT(t.children[i],n.children[i],e))return!1;return!0},subset:dT},lT={exact:function t7(t,n){return Ss(t,n)},subset:function i7(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>aT(t[e],n[e]))},ignored:()=>!0};function cT(t,n,e){return e7[e.paths](t.root,n.root,e.matrixParams)&&lT[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function dT(t,n,e){return fT(t,n,n.segments,e)}function fT(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!Hl(r,e)||n.hasChildren()||!Zh(r,e,i))}if(t.segments.length===e.length){if(!Hl(t.segments,e)||!Zh(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!dT(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(Hl(t.segments,r)&&Zh(t.segments,r,i)&&t.children[cn])&&fT(t.children[cn],n,a,i)}}function Zh(t,n,e){return n.every((i,r)=>lT[e](t[r].parameters,i.parameters))}class Ul{constructor(n,e,i){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iu(this.queryParams)),this._queryParamMap}toString(){return a7.serialize(this)}}class _n{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Ta(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qh(this)}}class Sd{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=iu(this.parameters)),this._parameterMap}toString(){return mT(this)}}function Hl(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}class hT{}class pT{parse(n){const e=new p7(n);return new Ul(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Cd(n.root,!0)}`,i=function l7(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${Jh(e)}=${Jh(r)}`).join("&"):`${Jh(e)}=${Jh(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function o7(t){return encodeURI(t)}(n.fragment)}`:""}`}}const a7=new pT;function Qh(t){return t.segments.map(n=>mT(n)).join("/")}function Cd(t,n){if(!t.hasChildren())return Qh(t);if(n){const e=t.children[cn]?Cd(t.children[cn],!1):"",i=[];return Ta(t.children,(r,a)=>{a!==cn&&i.push(`${a}:${Cd(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function r7(t,n){let e=[];return Ta(t.children,(i,r)=>{r===cn&&(e=e.concat(n(i,r)))}),Ta(t.children,(i,r)=>{r!==cn&&(e=e.concat(n(i,r)))}),e}(t,(i,r)=>r===cn?[Cd(t.children[cn],!1)]:[`${r}:${Cd(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[cn]?`${Qh(t)}/${e[0]}`:`${Qh(t)}/(${e.join("//")})`}}function gT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jh(t){return gT(t).replace(/%3B/gi,";")}function pm(t){return gT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function e0(t){return decodeURIComponent(t)}function vT(t){return e0(t.replace(/\+/g,"%20"))}function mT(t){return`${pm(t.path)}${function s7(t){return Object.keys(t).map(n=>`;${pm(n)}=${pm(t[n])}`).join("")}(t.parameters)}`}const c7=/^[^\/()?;=#]+/;function t0(t){const n=t.match(c7);return n?n[0]:""}const u7=/^[^=?&#]+/,f7=/^[^&#]+/;class p7{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _n([],{}):new _n([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[cn]=new _n(n,e)),i}parseSegment(){const n=t0(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new Sd(e0(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=t0(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=t0(this.remaining);r&&(i=r,this.capture(i))}n[e0(e)]=e0(i)}parseQueryParam(n){const e=function d7(t){const n=t.match(u7);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function h7(t){const n=t.match(f7);return n?n[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=vT(e),a=vT(i);if(n.hasOwnProperty(r)){let c=n[r];Array.isArray(c)||(c=[c],n[r]=c),c.push(a)}else n[r]=a}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=t0(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a;i.indexOf(":")>-1?(a=i.substr(0,i.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=cn);const c=this.parseChildren();e[a]=1===Object.keys(c).length?c[cn]:new _n([],c),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class bT{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=gm(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=gm(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=vm(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return vm(n,this._root).map(e=>e.value)}}function gm(t,n){if(t===n.value)return n;for(const e of n.children){const i=gm(t,e);if(i)return i}return null}function vm(t,n){if(t===n.value)return[n];for(const e of n.children){const i=vm(t,e);if(i.length)return i.unshift(n),i}return[]}class qs{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function nu(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class _T extends bT{constructor(n,e){super(n),this.snapshot=e,mm(this,n)}toString(){return this.snapshot.toString()}}function yT(t,n){const e=function g7(t,n){const c=new n0([],{},{},"",{},cn,n,null,t.root,-1,{});return new ST("",new qs(c,[]))}(t,n),i=new zr([new Sd("",{})]),r=new zr({}),a=new zr({}),c=new zr({}),d=new zr(""),m=new Gl(i,r,c,d,a,cn,n,e.root);return m.snapshot=e.root,new _T(new qs(m,[]),e)}class Gl{constructor(n,e,i,r,a,c,d,m){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=c,this.component=d,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Pe(n=>iu(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Pe(n=>iu(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wT(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],a=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function v7(t){return t.reduce((n,e)=>({params:Object.assign(Object.assign({},n.params),e.params),data:Object.assign(Object.assign({},n.data),e.data),resolve:Object.assign(Object.assign({},n.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class n0{constructor(n,e,i,r,a,c,d,m,_,T,A){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=c,this.component=d,this.routeConfig=m,this._urlSegment=_,this._lastPathIndex=T,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=iu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=iu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ST extends bT{constructor(n,e){super(e),this.url=n,mm(this,e)}toString(){return CT(this._root)}}function mm(t,n){n.value._routerState=t,n.children.forEach(e=>mm(t,e))}function CT(t){const n=t.children.length>0?` { ${t.children.map(CT).join(", ")} } `:"";return`${t.value}${n}`}function bm(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Ss(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),Ss(n.params,e.params)||t.params.next(e.params),function QI(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!Ss(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),Ss(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function _m(t,n){const e=Ss(t.params,n.params)&&function n7(t,n){return Hl(t,n)&&t.every((e,i)=>Ss(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||_m(t.parent,n.parent))}function Td(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function b7(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Td(t,i,r);return Td(t,i)})}(t,n,e);return new qs(i,r)}{if(t.shouldAttach(n.value)){const a=t.retrieve(n.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=n.value,c.children=n.children.map(d=>Td(t,d)),c}}const i=function _7(t){return new Gl(new zr(t.url),new zr(t.params),new zr(t.queryParams),new zr(t.fragment),new zr(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(a=>Td(t,a));return new qs(i,r)}}function r0(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Md(t){return"object"==typeof t&&null!=t&&t.outlets}function ym(t,n,e,i,r){let a={};return i&&Ta(i,(c,d)=>{a[d]=Array.isArray(c)?c.map(m=>`${m}`):`${c}`}),new Ul(e.root===t?n:TT(e.root,t,n),a,r)}function TT(t,n,e){const i={};return Ta(t.children,(r,a)=>{i[a]=r===n?e:TT(r,n,e)}),new _n(t.segments,i)}class MT{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&r0(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Md);if(r&&r!==sT(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wm{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function xT(t,n,e){if(t||(t=new _n([],{})),0===t.segments.length&&t.hasChildren())return a0(t,n,e);const i=function M7(t,n,e){let i=0,r=n;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return a;const c=t.segments[r],d=e[i];if(Md(d))break;const m=`${d}`,_=i<e.length-1?e[i+1]:null;if(r>0&&void 0===m)break;if(m&&_&&"object"==typeof _&&void 0===_.outlets){if(!DT(m,_,c))return a;i+=2}else{if(!DT(m,{},c))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const a=new _n(t.segments.slice(0,i.pathIndex),{});return a.children[cn]=new _n(t.segments.slice(i.pathIndex),t.children),a0(a,0,r)}return i.match&&0===r.length?new _n(t.segments,{}):i.match&&!t.hasChildren()?Sm(t,n,e):i.match?a0(t,0,r):Sm(t,n,e)}function a0(t,n,e){if(0===e.length)return new _n(t.segments,{});{const i=function T7(t){return Md(t[0])?t[0].outlets:{[cn]:t}}(e),r={};return Ta(i,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[c]=xT(t.children[c],n,a))}),Ta(t.children,(a,c)=>{void 0===i[c]&&(r[c]=a)}),new _n(t.segments,r)}}function Sm(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const a=e[r];if(Md(a)){const m=x7(a.outlets);return new _n(i,m)}if(0===r&&r0(e[0])){i.push(new Sd(t.segments[n].path,RT(e[0]))),r++;continue}const c=Md(a)?a.outlets[cn]:`${a}`,d=r<e.length-1?e[r+1]:null;c&&d&&r0(d)?(i.push(new Sd(c,RT(d))),r+=2):(i.push(new Sd(c,{})),r++)}return new _n(i,{})}function x7(t){const n={};return Ta(t,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[i]=Sm(new _n([],{}),0,e))}),n}function RT(t){const n={};return Ta(t,(e,i)=>n[i]=`${e}`),n}function DT(t,n,e){return t==e.path&&Ss(n,e.parameters)}class D7{constructor(n,e,i,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),bm(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=nu(e);n.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,r[c],i),delete r[c]}),Ta(r,(a,c)=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(r===a)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(n,e,c.children)}else this.deactivateChildRoutes(n,e,i);else a&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=nu(n);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:d})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=nu(n);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,e,i){const r=nu(e);n.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],i),this.forwardEvent(new XI(a.value.snapshot))}),n.children.length&&this.forwardEvent(new $I(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(bm(r),r===a)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,c.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),bm(d.route.value),this.activateChildRoutes(n,null,c.children)}else{const d=function k7(t){for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),m=d?d.module.componentFactoryResolver:null;c.attachRef=null,c.route=r,c.resolver=m,c.outlet&&c.outlet.activateWith(r,m),this.activateChildRoutes(n,null,c.children)}}else this.activateChildRoutes(n,null,i)}}class Cm{constructor(n,e){this.routes=n,this.module=e}}function vl(t){return"function"==typeof t}function zl(t){return t instanceof Ul}const xd=Symbol("INITIAL_VALUE");function Rd(){return zs(t=>function um(...t){const n=Ri(t),e=Fn(t),{args:i,keys:r}=qS(t);if(0===i.length)return Vi([],n);const a=new b(function EI(t,n,e=f){return i=>{XC(n,()=>{const{length:r}=t,a=new Array(r);let c=r,d=r;for(let m=0;m<r;m++)XC(n,()=>{const _=Vi(t[m],n);let T=!1;_.subscribe(ke(i,A=>{a[m]=A,T||(T=!0,d--),d||i.next(e(a.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,n,r?c=>$S(r,c):f));return e?a.pipe(Hv(e)):a}(t.map(n=>n.pipe(Ni(1),function Kh(...t){const n=Ri(t);return Se((e,i)=>{(n?_d(t,e,n):_d(t,e)).subscribe(i)})}(xd)))).pipe(ZC((n,e)=>{let i=!1;return e.reduce((r,a,c)=>r!==xd?r:(a===xd&&(i=!0),i||!1!==a&&c!==e.length-1&&!zl(a)?r:a),n)},xd),Ca(n=>n!==xd),Pe(n=>zl(n)?n:!0===n),Ni(1)))}class O7{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Dd,this.attachRef=null}}class Dd{constructor(){this.contexts=new Map}onChildOutletCreated(n,e){const i=this.getOrCreateContext(n);i.outlet=e,this.contexts.set(n,i)}onChildOutletDestroyed(n){const e=this.getContext(n);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let e=this.getContext(n);return e||(e=new O7,this.contexts.set(n,e)),e}getContext(n){return this.contexts.get(n)||null}}let Tm=(()=>{class t{constructor(e,i,r,a,c){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new di,this.deactivateEvents=new di,this.attachEvents=new di,this.detachEvents=new di,this.name=a||cn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const c=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,m=new V7(e,d,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Me(Dd),Me(Po),Me(Il),function Dl(t){return function gR(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const a=e[r];if(fb(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(a===n)return e[r+1];r+=2}}}return null}(ca(),t)}("name"),Me(go))},t.\u0275dir=Yt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class V7{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===Gl?this.route:n===Dd?this.childContexts:this.parent.get(n,e)}}let kT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=mi({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&he(0,"router-outlet")},directives:[Tm],encapsulation:2}),t})();function AT(t,n=""){for(let e=0;e<t.length;e++){const i=t[e];N7(i,F7(n,i))}}function N7(t,n){t.children&&AT(t.children,n)}function F7(t,n){return n?t||n.path?t&&!n.path?`${t}/`:!t&&n.path?n.path:`${t}/${n.path}`:"":t}function Mm(t){const n=t.children&&t.children.map(Mm),e=n?Object.assign(Object.assign({},t),{children:n}):Object.assign({},t);return!e.component&&(n||e.loadChildren)&&e.outlet&&e.outlet!==cn&&(e.component=kT),e}function Oo(t){return t.outlet||cn}function PT(t,n){const e=t.filter(i=>Oo(i)===n);return e.push(...t.filter(i=>Oo(i)!==n)),e}const ET={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function o0(t,n,e){var i;if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},ET):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(n.matcher||ZI)(e,t,n);if(!a)return Object.assign({},ET);const c={};Ta(a.posParams,(m,_)=>{c[_]=m.path});const d=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:d,positionalParamSegments:null!==(i=a.posParams)&&void 0!==i?i:{}}}function s0(t,n,e,i,r="corrected"){if(e.length>0&&function H7(t,n,e){return e.some(i=>l0(t,n,i)&&Oo(i)!==cn)}(t,e,i)){const c=new _n(n,function U7(t,n,e,i){const r={};r[cn]=i,i._sourceSegment=t,i._segmentIndexShift=n.length;for(const a of e)if(""===a.path&&Oo(a)!==cn){const c=new _n([],{});c._sourceSegment=t,c._segmentIndexShift=n.length,r[Oo(a)]=c}return r}(t,n,i,new _n(e,t.children)));return c._sourceSegment=t,c._segmentIndexShift=n.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function G7(t,n,e){return e.some(i=>l0(t,n,i))}(t,e,i)){const c=new _n(t.segments,function L7(t,n,e,i,r,a){const c={};for(const d of i)if(l0(t,e,d)&&!r[Oo(d)]){const m=new _n([],{});m._sourceSegment=t,m._segmentIndexShift="legacy"===a?t.segments.length:n.length,c[Oo(d)]=m}return Object.assign(Object.assign({},r),c)}(t,n,e,i,t.children,r));return c._sourceSegment=t,c._segmentIndexShift=n.length,{segmentGroup:c,slicedSegments:e}}const a=new _n(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:e}}function l0(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function IT(t,n,e,i){return!!(Oo(t)===i||i!==cn&&l0(n,e,t))&&("**"===t.path||o0(n,t,e).matched)}function BT(t,n,e){return 0===n.length&&!t.children[e]}class kd{constructor(n){this.segmentGroup=n||null}}class OT{constructor(n){this.urlTree=n}}function c0(t){return new b(n=>n.error(new kd(t)))}function VT(t){return new b(n=>n.error(new OT(t)))}function z7(t){return new b(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class $7{constructor(n,e,i,r,a){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=n.get(Ns)}apply(){const n=s0(this.urlTree.root,[],[],this.config).segmentGroup,e=new _n(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,e,cn).pipe(Pe(a=>this.createUrlTree(xm(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(gl(a=>{if(a instanceof OT)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof kd?this.noMatchError(a):a}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,cn).pipe(Pe(r=>this.createUrlTree(xm(r),n.queryParams,n.fragment))).pipe(gl(r=>{throw r instanceof kd?this.noMatchError(r):r}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,e,i){const r=n.segments.length>0?new _n([],{[cn]:n}):n;return new Ul(r,e,i)}expandSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,e,i).pipe(Pe(a=>new _n([],a))):this.expandSegment(n,i,e,i.segments,r,!0)}expandChildren(n,e,i){const r=[];for(const a of Object.keys(i.children))"primary"===a?r.unshift(a):r.push(a);return Vi(r).pipe(yd(a=>{const c=i.children[a],d=PT(e,a);return this.expandSegmentGroup(n,d,c,a).pipe(Pe(m=>({segment:m,outlet:a})))}),ZC((a,c)=>(a[c.outlet]=c.segment,a),{}),function NI(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Ca((r,a)=>t(r,a,i)):f,dm(1),e?JC(n):QC(()=>new Yh))}())}expandSegment(n,e,i,r,a,c){return Vi(i).pipe(yd(d=>this.expandSegmentAgainstRoute(n,e,i,d,r,a,c).pipe(gl(_=>{if(_ instanceof kd)return Gi(null);throw _}))),tu(d=>!!d),gl((d,m)=>{if(d instanceof Yh||"EmptyError"===d.name){if(BT(e,r,a))return Gi(new _n([],{}));throw new kd(e)}throw d}))}expandSegmentAgainstRoute(n,e,i,r,a,c,d){return IT(r,e,a,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,e,r,a,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,c):c0(e):c0(e)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const a=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?VT(a):this.lineralizeSegments(i,a).pipe(at(c=>{const d=new _n(c,{});return this.expandSegment(n,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,c){const{matched:d,consumedSegments:m,lastChild:_,positionalParamSegments:T}=o0(e,r,a);if(!d)return c0(e);const A=this.applyRedirectCommands(m,r.redirectTo,T);return r.redirectTo.startsWith("/")?VT(A):this.lineralizeSegments(r,A).pipe(at(q=>this.expandSegment(n,e,i,q.concat(a.slice(_)),c,!1)))}matchSegmentAgainstRoute(n,e,i,r,a){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Gi(i._loadedConfig):this.configLoader.load(n.injector,i)).pipe(Pe(q=>(i._loadedConfig=q,new _n(r,{})))):Gi(new _n(r,{}));const{matched:c,consumedSegments:d,lastChild:m}=o0(e,i,r);if(!c)return c0(e);const _=r.slice(m);return this.getChildConfig(n,i,r).pipe(at(A=>{const q=A.module,Q=A.routes,{segmentGroup:te,slicedSegments:oe}=s0(e,d,_,Q),de=new _n(te.segments,te.children);if(0===oe.length&&de.hasChildren())return this.expandChildren(q,Q,de).pipe(Pe(Ae=>new _n(d,Ae)));if(0===Q.length&&0===oe.length)return Gi(new _n(d,{}));const be=Oo(i)===a;return this.expandSegment(q,de,Q,oe,be?cn:a,!0).pipe(Pe(ne=>new _n(d.concat(ne.segments),ne.children)))}))}getChildConfig(n,e,i){return e.children?Gi(new Cm(e.children,n)):e.loadChildren?void 0!==e._loadedConfig?Gi(e._loadedConfig):this.runCanLoadGuards(n.injector,e,i).pipe(at(r=>r?this.configLoader.load(n.injector,e).pipe(Pe(a=>(e._loadedConfig=a,a))):function j7(t){return new b(n=>n.error(hm(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Gi(new Cm([],n))}runCanLoadGuards(n,e,i){const r=e.canLoad;return r&&0!==r.length?Gi(r.map(c=>{const d=n.get(c);let m;if(function P7(t){return t&&vl(t.canLoad)}(d))m=d.canLoad(e,i);else{if(!vl(d))throw new Error("Invalid CanLoad guard");m=d(e,i)}return Cs(m)})).pipe(Rd(),Va(c=>{if(!zl(c))return;const d=hm(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw d.url=c,d}),Pe(c=>!0===c)):Gi(!0)}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Gi(i);if(r.numberOfChildren>1||!r.children[cn])return z7(n.redirectTo);r=r.children[cn]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreatreUrlTree(n,e,i,r){const a=this.createSegmentGroup(n,e.root,i,r);return new Ul(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Ta(n,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[a]=e[d]}else i[a]=r}),i}createSegmentGroup(n,e,i,r){const a=this.createSegments(n,e.segments,i,r);let c={};return Ta(e.children,(d,m)=>{c[m]=this.createSegmentGroup(n,d,i,r)}),new _n(a,c)}createSegments(n,e,i,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(n,a,r):this.findOrReturn(a,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${n}'. Cannot find '${e.path}'.`);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}function xm(t){const n={};for(const i of Object.keys(t.children)){const a=xm(t.children[i]);(a.segments.length>0||a.hasChildren())&&(n[i]=a)}return function W7(t){if(1===t.numberOfChildren&&t.children[cn]){const n=t.children[cn];return new _n(t.segments.concat(n.segments),n.children)}return t}(new _n(t.segments,n))}class NT{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class u0{constructor(n,e){this.component=n,this.route=e}}function Y7(t,n,e){const i=t._root;return Ad(i,n?n._root:null,e,[i.value])}function d0(t,n,e){const i=function Z7(t){if(!t)return null;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(n);return(i?i.module.injector:e).get(t)}function Ad(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=nu(n);return t.children.forEach(c=>{(function Q7(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,c=n?n.value:null,d=e?e.getContext(t.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const m=function J7(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Hl(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Hl(t.url,n.url)||!Ss(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_m(t,n)||!Ss(t.queryParams,n.queryParams);default:return!_m(t,n)}}(c,a,a.routeConfig.runGuardsAndResolvers);m?r.canActivateChecks.push(new NT(i)):(a.data=c.data,a._resolvedData=c._resolvedData),Ad(t,n,a.component?d?d.children:null:e,i,r),m&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new u0(d.outlet.component,c))}else c&&Pd(n,d,r),r.canActivateChecks.push(new NT(i)),Ad(t,null,a.component?d?d.children:null:e,i,r)})(c,a[c.value.outlet],e,i.concat([c.value]),r),delete a[c.value.outlet]}),Ta(a,(c,d)=>Pd(c,e.getContext(d),r)),r}function Pd(t,n,e){const i=nu(t),r=t.value;Ta(i,(a,c)=>{Pd(a,r.component?n?n.children.getContext(c):null:n,e)}),e.canDeactivateChecks.push(new u0(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}class lB{}function FT(t){return new b(n=>n.error(t))}class uB{constructor(n,e,i,r,a,c){this.rootComponentType=n,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const n=s0(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,n,cn);if(null===e)return null;const i=new n0([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},cn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new qs(i,e),a=new ST(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(n){const e=n.value,i=wT(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(n,e):this.processSegment(n,e,e.segments,i)}processChildren(n,e){const i=[];for(const a of Object.keys(e.children)){const c=e.children[a],d=PT(n,a),m=this.processSegmentGroup(d,c,a);if(null===m)return null;i.push(...m)}const r=LT(i);return function dB(t){t.sort((n,e)=>n.value.outlet===cn?-1:e.value.outlet===cn?1:n.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(n,e,i,r){for(const a of n){const c=this.processSegmentAgainstRoute(a,e,i,r);if(null!==c)return c}return BT(e,i,r)?[]:null}processSegmentAgainstRoute(n,e,i,r){if(n.redirectTo||!IT(n,e,i,r))return null;let a,c=[],d=[];if("**"===n.path){const Q=i.length>0?sT(i).parameters:{};a=new n0(i,Q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,GT(n),Oo(n),n.component,n,UT(e),HT(e)+i.length,zT(n))}else{const Q=o0(e,n,i);if(!Q.matched)return null;c=Q.consumedSegments,d=i.slice(Q.lastChild),a=new n0(c,Q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,GT(n),Oo(n),n.component,n,UT(e),HT(e)+c.length,zT(n))}const m=function fB(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(n),{segmentGroup:_,slicedSegments:T}=s0(e,c,d,m.filter(Q=>void 0===Q.redirectTo),this.relativeLinkResolution);if(0===T.length&&_.hasChildren()){const Q=this.processChildren(m,_);return null===Q?null:[new qs(a,Q)]}if(0===m.length&&0===T.length)return[new qs(a,[])];const A=Oo(n)===r,q=this.processSegment(m,_,T,A?cn:r);return null===q?null:[new qs(a,q)]}}function hB(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function LT(t){const n=[],e=new Set;for(const i of t){if(!hB(i)){n.push(i);continue}const r=n.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=LT(i.children);n.push(new qs(i.value,r))}return n.filter(i=>!e.has(i))}function UT(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function HT(t){let n=t,e=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift?n._segmentIndexShift:0;return e-1}function GT(t){return t.data||{}}function zT(t){return t.resolve||{}}function jT(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Rm(t){return zs(n=>{const e=t(n);return e?Vi(e).pipe(Pe(()=>n)):Gi(n)})}class wB extends class yB{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}{}const Dm=new an("ROUTES");class qT{constructor(n,e,i,r){this.injector=n,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(n,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(Pe(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const c=a.create(n);return new Cm(oT(c.injector.get(Dm,void 0,Xi.Self|Xi.Optional)).map(Mm),c)}),gl(a=>{throw e._loader$=void 0,a}));return e._loader$=new BI(r,()=>new $).pipe(KC()),e._loader$}loadModuleFactory(n){return Cs(n()).pipe(at(e=>e instanceof s2?Gi(e):Vi(this.compiler.compileModuleAsync(e))))}}class CB{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,e){return n}}function TB(t){throw t}function MB(t,n,e){return n.parse("/")}function $T(t,n){return Gi(null)}const xB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vo=(()=>{class t{constructor(e,i,r,a,c,d,m){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new $,this.errorHandler=TB,this.malformedUriErrorHandler=MB,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$T,afterPreactivation:$T},this.urlHandlingStrategy=new CB,this.routeReuseStrategy=new wB,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(Ns),this.console=c.get(z2);const A=c.get(br);this.isNgZoneEnabled=A instanceof br&&br.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function JI(){return new Ul(new _n([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new qT(c,d,q=>this.triggerEvent(new tT(q)),q=>this.triggerEvent(new iT(q))),this.routerState=yT(this.currentUrlTree,this.rootComponentType),this.transitions=new zr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Ca(r=>0!==r.id),Pe(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),zs(r=>{let a=!1,c=!1;return Gi(r).pipe(Va(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),zs(d=>{const m=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return f0(d.source)&&(this.browserUrlTree=d.extractedUrl),Gi(d).pipe(zs(A=>{const q=this.transitions.getValue();return i.next(new fm(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),q!==this.transitions.getValue()?dt:Promise.resolve(A)}),function X7(t,n,e,i){return zs(r=>function q7(t,n,e,i,r){return new $7(t,n,e,i,r).apply()}(t,n,e,r.extractedUrl,i).pipe(Pe(a=>Object.assign(Object.assign({},r),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Va(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function pB(t,n,e,i,r){return at(a=>function cB(t,n,e,i,r="emptyOnly",a="legacy"){try{const c=new uB(t,n,e,i,r,a).recognize();return null===c?FT(new lB):Gi(c)}catch(c){return FT(c)}}(t,n,a.urlAfterRedirects,e(a.urlAfterRedirects),i,r).pipe(Pe(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),Va(A=>{if("eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(Q,A)}this.browserUrlTree=A.urlAfterRedirects}const q=new UI(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);i.next(q)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:q,extractedUrl:Q,source:te,restoredState:oe,extras:de}=d,be=new fm(q,this.serializeUrl(Q),te,oe);i.next(be);const ce=yT(Q,this.rootComponentType).snapshot;return Gi(Object.assign(Object.assign({},d),{targetSnapshot:ce,urlAfterRedirects:Q,extras:Object.assign(Object.assign({},de),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),dt}),Rm(d=>{const{targetSnapshot:m,id:_,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:q,replaceUrl:Q}}=d;return this.hooks.beforePreactivation(m,{navigationId:_,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!q,replaceUrl:!!Q})}),Va(d=>{const m=new HI(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(m)}),Pe(d=>Object.assign(Object.assign({},d),{guards:Y7(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function eB(t,n){return at(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:c}}=e;return 0===c.length&&0===a.length?Gi(Object.assign(Object.assign({},e),{guardsResult:!0})):function tB(t,n,e,i){return Vi(t).pipe(at(r=>function sB(t,n,e,i,r){const a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return a&&0!==a.length?Gi(a.map(d=>{const m=d0(d,n,r);let _;if(function B7(t){return t&&vl(t.canDeactivate)}(m))_=Cs(m.canDeactivate(t,n,e,i));else{if(!vl(m))throw new Error("Invalid CanDeactivate guard");_=Cs(m(t,n,e,i))}return _.pipe(tu())})).pipe(Rd()):Gi(!0)}(r.component,r.route,e,n,i)),tu(r=>!0!==r,!0))}(c,i,r,t).pipe(at(d=>d&&function A7(t){return"boolean"==typeof t}(d)?function iB(t,n,e,i){return Vi(n).pipe(yd(r=>_d(function rB(t,n){return null!==t&&n&&n(new qI(t)),Gi(!0)}(r.route.parent,i),function nB(t,n){return null!==t&&n&&n(new WI(t)),Gi(!0)}(r.route,i),function oB(t,n,e){const i=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(c=>function K7(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(c)).filter(c=>null!==c).map(c=>YC(()=>Gi(c.guards.map(m=>{const _=d0(m,c.node,e);let T;if(function I7(t){return t&&vl(t.canActivateChild)}(_))T=Cs(_.canActivateChild(i,t));else{if(!vl(_))throw new Error("Invalid CanActivateChild guard");T=Cs(_(i,t))}return T.pipe(tu())})).pipe(Rd())));return Gi(a).pipe(Rd())}(t,r.path,e),function aB(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return Gi(!0);const r=i.map(a=>YC(()=>{const c=d0(a,n,e);let d;if(function E7(t){return t&&vl(t.canActivate)}(c))d=Cs(c.canActivate(n,t));else{if(!vl(c))throw new Error("Invalid CanActivate guard");d=Cs(c(n,t))}return d.pipe(tu())}));return Gi(r).pipe(Rd())}(t,r.route,e))),tu(r=>!0!==r,!0))}(i,a,t,n):Gi(d)),Pe(d=>Object.assign(Object.assign({},e),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),Va(d=>{if(zl(d.guardsResult)){const _=hm(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw _.url=d.guardsResult,_}const m=new GI(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(m)}),Ca(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),Rm(d=>{if(d.guards.canActivateChecks.length)return Gi(d).pipe(Va(m=>{const _=new zI(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(_)}),zs(m=>{let _=!1;return Gi(m).pipe(function gB(t,n){return at(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Gi(e);let a=0;return Vi(r).pipe(yd(c=>function vB(t,n,e,i){return function mB(t,n,e,i){const r=jT(t);if(0===r.length)return Gi({});const a={};return Vi(r).pipe(at(c=>function bB(t,n,e,i){const r=d0(t,n,i);return Cs(r.resolve?r.resolve(n,e):r(n,e))}(t[c],n,e,i).pipe(Va(d=>{a[c]=d}))),dm(1),at(()=>jT(a).length===r.length?Gi(a):dt))}(t._resolve,t,n,i).pipe(Pe(a=>(t._resolvedData=a,t.data=Object.assign(Object.assign({},t.data),wT(t,e).resolve),null)))}(c.route,i,t,n)),Va(()=>a++),dm(1),at(c=>a===r.length?Gi(e):dt))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Va({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),Va(m=>{const _=new jI(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(_)}))}),Rm(d=>{const{targetSnapshot:m,id:_,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:q,replaceUrl:Q}}=d;return this.hooks.afterPreactivation(m,{navigationId:_,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!q,replaceUrl:!!Q})}),Pe(d=>{const m=function m7(t,n,e){const i=Td(t,n._root,e?e._root:void 0);return new _T(i,n)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:m})}),Va(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((t,n,e)=>Pe(i=>(new D7(n,i.targetRouterState,i.currentRouterState,e).activate(t),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),Va({next(){a=!0},complete(){a=!0}}),function FI(t){return Se((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}(()=>{var d;a||c||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===r.id&&(this.currentNavigation=null)}),gl(d=>{if(c=!0,function KI(t){return t&&t[rT]}(d)){const m=zl(d.url);m||(this.navigated=!0,this.restoreHistory(r,!0));const _=new eT(r.id,this.serializeUrl(r.extractedUrl),d.message);i.next(_),m?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),A={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||f0(r.source)};this.scheduleNavigation(T,"imperative",null,A,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const m=new LI(r.id,this.serializeUrl(r.extractedUrl),d);i.next(m);try{r.resolve(this.errorHandler(d))}catch(_){r.reject(_)}}return dt}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const a={replaceUrl:!0},c=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(c){const m=Object.assign({},c);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const d=this.parseUrl(e.url);this.scheduleNavigation(d,i,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){AT(e),this.config=e.map(Mm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:a,fragment:c,queryParamsHandling:d,preserveFragment:m}=i,_=r||this.routerState.root,T=m?this.currentUrlTree.fragment:c;let A=null;switch(d){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),function y7(t,n,e,i,r){if(0===e.length)return ym(n.root,n.root,n,i,r);const a=function w7(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new MT(!0,0,t);let n=0,e=!1;const i=t.reduce((r,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return Ta(a.outlets,(m,_)=>{d[_]="string"==typeof m?m.split("/"):m}),[...r,{outlets:d}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===c?(a.split("/").forEach((d,m)=>{0==m&&"."===d||(0==m&&""===d?e=!0:".."===d?n++:""!=d&&r.push(d))}),r):[...r,a]},[]);return new MT(e,n,i)}(e);if(a.toRoot())return ym(n.root,new _n([],{}),n,i,r);const c=function S7(t,n,e){if(t.isAbsolute)return new wm(n.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new wm(a,a===n.root,0)}const i=r0(t.commands[0])?0:1;return function C7(t,n,e){let i=t,r=n,a=e;for(;a>r;){if(a-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new wm(i,!1,r-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,n,t),d=c.processChildren?a0(c.segmentGroup,c.index,a.commands):xT(c.segmentGroup,c.index,a.commands);return ym(c.segmentGroup,d,n,i,r)}(_,this.currentUrlTree,e,A,null!=T?T:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=zl(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function DB(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${n}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},xB):!1===i?Object.assign({},RB):i,zl(e))return cT(this.currentUrlTree,e,r);const a=this.parseUrl(e);return cT(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const a=e[r];return null!=a&&(i[r]=a),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new wd(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,a,c){var d,m,_;if(this.disposed)return Promise.resolve(!1);const T=this.transitions.value,A=f0(i)&&T&&!f0(T.source),q=T.rawUrl.toString()===e.toString(),Q=T.id===(null===(d=this.currentNavigation)||void 0===d?void 0:d.id);if(A&&q&&Q)return Promise.resolve(!0);let oe,de,be;c?(oe=c.resolve,de=c.reject,be=c.promise):be=new Promise((Ae,Ue)=>{oe=Ae,de=Ue});const ce=++this.navigationId;let ne;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),ne=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):ne=0,this.setTransition({id:ce,targetPageId:ne,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:oe,reject:de,promise:be,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),be.catch(Ae=>Promise.reject(Ae))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(e,i=!1){var r,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new eT(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return t.\u0275fac=function(e){kg()},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();function f0(t){return"imperative"!==t}class WT{}class XT{preload(n,e){return Gi(null)}}let YT=(()=>{class t{constructor(e,i,r,a){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=new qT(r,i,m=>e.triggerEvent(new tT(m)),m=>e.triggerEvent(new iT(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ca(e=>e instanceof wd),yd(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Ns);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const a of i)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const c=a._loadedConfig;r.push(this.processRoutes(c.module,c.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children));return Vi(r).pipe(Tr(),Pe(a=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Gi(i._loadedConfig):this.loader.load(e.injector,i)).pipe(at(a=>(i._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Ft(vo),Ft(vh),Ft(Jr),Ft(WT))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})(),Pm=(()=>{class t{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof fm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof wd&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof nT&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new nT(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){kg()},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();const jl=new an("ROUTER_CONFIGURATION"),KT=new an("ROUTER_FORROOT_GUARD"),EB=[wv,{provide:hT,useClass:pT},{provide:vo,useFactory:function NB(t,n,e,i,r,a,c={},d,m){const _=new vo(null,t,n,e,i,r,oT(a));return d&&(_.urlHandlingStrategy=d),m&&(_.routeReuseStrategy=m),function FB(t,n){t.errorHandler&&(n.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(n.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(n.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(n.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(n.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(n.canceledNavigationResolution=t.canceledNavigationResolution)}(c,_),c.enableTracing&&_.events.subscribe(T=>{var A,q;null===(A=console.group)||void 0===A||A.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(q=console.groupEnd)||void 0===q||q.call(console)}),_},deps:[hT,Dd,wv,Jr,vh,Dm,jl,[class SB{},new hs],[class _B{},new hs]]},Dd,{provide:Gl,useFactory:function LB(t){return t.routerState.root},deps:[vo]},YT,XT,class PB{preload(n,e){return e().pipe(gl(()=>Gi(null)))}},{provide:jl,useValue:{enableTracing:!1}}];function IB(){return new Y2("Router",vo)}let ZT=(()=>{class t{constructor(e,i){}static forRoot(e,i){return{ngModule:t,providers:[EB,QT(e),{provide:KT,useFactory:VB,deps:[[vo,new hs,new wc]]},{provide:jl,useValue:i||{}},{provide:Zc,useFactory:OB,deps:[Vl,[new Ou(yv),new hs],jl]},{provide:Pm,useFactory:BB,deps:[vo,qP,jl]},{provide:WT,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:XT},{provide:Y2,multi:!0,useFactory:IB},[Em,{provide:ph,multi:!0,useFactory:UB,deps:[Em]},{provide:JT,useFactory:HB,deps:[Em]},{provide:G2,multi:!0,useExisting:JT}]]}}static forChild(e){return{ngModule:t,providers:[QT(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Ft(KT,8),Ft(vo,8))},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({}),t})();function BB(t,n,e){return e.scrollOffset&&n.setOffset(e.scrollOffset),new Pm(t,n,e)}function OB(t,n,e={}){return e.useHash?new k8(t,n):new gS(t,n)}function VB(t){return"guarded"}function QT(t){return[{provide:yR,multi:!0,useValue:t},{provide:Dm,multi:!0,useValue:t}]}let Em=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new $}appInitializer(){return this.injector.get(x8,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(d=>i=d),a=this.injector.get(vo),c=this.injector.get(jl);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),i(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Gi(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),a.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(jl),r=this.injector.get(YT),a=this.injector.get(Pm),c=this.injector.get(vo),d=this.injector.get(Bl);e===d.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&c.initialNavigation(),r.setUpPreloading(),a.init(),c.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(Ft(Jr))},t.\u0275prov=si({token:t,factory:t.\u0275fac}),t})();function UB(t){return t.appInitializer.bind(t)}function HB(t){return t.bootstrapListener.bind(t)}const JT=new an("Router Initializer"),zB=[];let jB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[ZT.forRoot(zB)],ZT]}),t})();function eM(t,n,e,i,r,a,c){try{var d=t[a](c),m=d.value}catch(_){return void e(_)}d.done?n(m):Promise.resolve(m).then(i,r)}function Wa(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var a=t.apply(n,e);function c(m){eM(a,i,r,c,d,"next",m)}function d(m){eM(a,i,r,c,d,"throw",m)}c(void 0)})}}var sn=(()=>{return(t=sn||(sn={}))[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",sn;var t})();const Xa=new class qB{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(n){this._typeMetadatas.has(n.target)||this._typeMetadatas.set(n.target,new Map),this._typeMetadatas.get(n.target).set(n.propertyName,n)}addTransformMetadata(n){this._transformMetadatas.has(n.target)||this._transformMetadatas.set(n.target,new Map),this._transformMetadatas.get(n.target).has(n.propertyName)||this._transformMetadatas.get(n.target).set(n.propertyName,[]),this._transformMetadatas.get(n.target).get(n.propertyName).push(n)}addExposeMetadata(n){this._exposeMetadatas.has(n.target)||this._exposeMetadatas.set(n.target,new Map),this._exposeMetadatas.get(n.target).set(n.propertyName,n)}addExcludeMetadata(n){this._excludeMetadatas.has(n.target)||this._excludeMetadatas.set(n.target,new Map),this._excludeMetadatas.get(n.target).set(n.propertyName,n)}findTransformMetadatas(n,e,i){return this.findMetadatas(this._transformMetadatas,n,e).filter(r=>!r.options||!0===r.options.toClassOnly&&!0===r.options.toPlainOnly||(!0===r.options.toClassOnly?i===sn.CLASS_TO_CLASS||i===sn.PLAIN_TO_CLASS:!0!==r.options.toPlainOnly||i===sn.CLASS_TO_PLAIN))}findExcludeMetadata(n,e){return this.findMetadata(this._excludeMetadatas,n,e)}findExposeMetadata(n,e){return this.findMetadata(this._exposeMetadatas,n,e)}findExposeMetadataByCustomName(n,e){return this.getExposedMetadatas(n).find(i=>i.options&&i.options.name===e)}findTypeMetadata(n,e){return this.findMetadata(this._typeMetadatas,n,e)}getStrategy(n){const e=this._excludeMetadatas.get(n),i=e&&e.get(void 0),r=this._exposeMetadatas.get(n),a=r&&r.get(void 0);return i&&a||!i&&!a?"none":i?"excludeAll":"exposeAll"}getExposedMetadatas(n){return this.getMetadata(this._exposeMetadatas,n)}getExcludedMetadatas(n){return this.getMetadata(this._excludeMetadatas,n)}getExposedProperties(n,e){return this.getExposedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===sn.CLASS_TO_CLASS||e===sn.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===sn.CLASS_TO_PLAIN)).map(i=>i.propertyName)}getExcludedProperties(n,e){return this.getExcludedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===sn.CLASS_TO_CLASS||e===sn.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===sn.CLASS_TO_PLAIN)).map(i=>i.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(n,e){const i=n.get(e);let r;i&&(r=Array.from(i.values()).filter(c=>void 0!==c.propertyName));const a=[];for(const c of this.getAncestors(e)){const d=n.get(c);if(d){const m=Array.from(d.values()).filter(_=>void 0!==_.propertyName);a.push(...m)}}return a.concat(r||[])}findMetadata(n,e,i){const r=n.get(e);if(r){const a=r.get(i);if(a)return a}for(const a of this.getAncestors(e)){const c=n.get(a);if(c){const d=c.get(i);if(d)return d}}}findMetadatas(n,e,i){const r=n.get(e);let a;r&&(a=r.get(i));const c=[];for(const d of this.getAncestors(e)){const m=n.get(d);m&&m.has(i)&&c.push(...m.get(i))}return c.slice().reverse().concat((a||[]).slice().reverse())}getAncestors(n){if(!n)return[];if(!this._ancestorsMap.has(n)){const e=[];for(let i=Object.getPrototypeOf(n.prototype.constructor);void 0!==i.prototype;i=Object.getPrototypeOf(i.prototype.constructor))e.push(i);this._ancestorsMap.set(n,e)}return this._ancestorsMap.get(n)}};function ei(t,n={}){return function(e,i){const r=Reflect.getMetadata("design:type",e,i);Xa.addTypeMetadata({target:e.constructor,propertyName:i,reflectedType:r,typeFunction:t,options:n})}}var Fe=(()=>{return(t=Fe||(Fe={}))[t.Horse=0]="Horse",t[t.Cheetah=1]="Cheetah",t[t.Hare=2]="Hare",t[t.Monkey=3]="Monkey",t[t.Goat=4]="Goat",t[t.Gecko=5]="Gecko",t[t.Dolphin=6]="Dolphin",t[t.Shark=7]="Shark",t[t.Octopus=8]="Octopus",t[t.Penguin=9]="Penguin",t[t.Caribou=10]="Caribou",t[t.Salamander=11]="Salamander",t[t.Fox=12]="Fox",t[t.Warthog=13]="Warthog",t[t.Whale=14]="Whale",Fe;var t})(),Ve=(()=>{return(t=Ve||(Ve={}))[t.Flatland=0]="Flatland",t[t.Mountain=1]="Mountain",t[t.Ocean=2]="Ocean",t[t.Tundra=3]="Tundra",t[t.Volcanic=4]="Volcanic",Ve;var t})();class Je{constructor(n,e,i){this.name=n,this.amount=e,void 0!==i&&(this.itemType=i)}makeCopy(n){var e=new Je("",0);return e.name=JSON.parse(JSON.stringify(n.name)),e.amount=JSON.parse(JSON.stringify(n.amount)),e.itemType=JSON.parse(JSON.stringify(n.itemType)),e}}var Le=(()=>{return(t=Le||(Le={}))[t.Animal=0]="Animal",t[t.Food=1]="Food",t[t.Training=2]="Training",t[t.Ability=3]="Ability",t[t.Specialty=4]="Specialty",t[t.Equipment=5]="Equipment",t[t.Resources=6]="Resources",t[t.Progression=7]="Progression",t[t.Other=8]="Other",t[t.Consumable=9]="Consumable",Le;var t})();class mo{constructor(){this.totalRewards=0,this.rewardsObtained=0,this.rewards=[]}}se([ei(()=>Je),Re("design:type",Array)],mo.prototype,"rewards",void 0);class ql{constructor(){this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.legacyTrackAvailable=!1,this.noviceTrack=new mo,this.noviceTrack.totalRewards=12;var n=50;this.noviceTrack.rewards.push(new Je("Coins",n,Le.Resources)),this.noviceTrack.rewards.push(new Je("Bonus Breed XP Gain From Training",1,Le.Other)),this.noviceTrack.rewards.push(new Je("Coins",n,Le.Resources)),this.noviceTrack.rewards.push(new Je("Bonus Breed XP Gain From Free Races",1,Le.Other)),this.noviceTrack.rewards.push(new Je("Coins",n,Le.Resources)),this.noviceTrack.rewards.push(new Je("Bonus Breed XP Gain From Training",1,Le.Other)),this.noviceTrack.rewards.push(new Je("Coins",n,Le.Resources)),this.noviceTrack.rewards.push(new Je("Bonus Breed XP Gain From Free Races",1,Le.Other)),this.noviceTrack.rewards.push(new Je("Coins",n,Le.Resources)),this.noviceTrack.rewards.push(new Je("Bonus Breed XP Gain From Training",1,Le.Other)),this.noviceTrack.rewards.push(new Je("Coins",n,Le.Resources)),this.noviceTrack.rewards.push(new Je("Bonus Breed XP Gain From Free Races",1,Le.Other)),this.intermediateTrack=new mo,this.intermediateTrack.totalRewards=12,this.intermediateTrack.rewards.push(new Je("Coins",200,Le.Resources)),this.intermediateTrack.rewards.push(new Je("Bonus Breed XP Gain From Training",2,Le.Other)),this.intermediateTrack.rewards.push(new Je("Medals",1,Le.Resources)),this.intermediateTrack.rewards.push(new Je("Diminishing Returns per Facility Level",2,Le.Other)),this.intermediateTrack.rewards.push(new Je("Training Time Reduction",1,Le.Other)),this.intermediateTrack.rewards.push(new Je("Bonus Breed XP Gain From Circuit Races",5,Le.Other)),this.intermediateTrack.rewards.push(new Je("Coins",200,Le.Resources)),this.intermediateTrack.rewards.push(new Je("Bonus Breed XP Gain From Free Races",1,Le.Other)),this.intermediateTrack.rewards.push(new Je("Medals",1,Le.Resources)),this.intermediateTrack.rewards.push(new Je("Bonus Breed XP Gain From Training",2,Le.Other)),this.intermediateTrack.rewards.push(new Je("Training Time Reduction",1,Le.Other)),this.intermediateTrack.rewards.push(new Je("Diminishing Returns per Facility Level",3,Le.Other)),this.masterTrack=new mo,this.masterTrack.totalRewards=12,this.masterTrack.rewards.push(new Je("Bonus Breed XP Gain From Free Races",5,Le.Other)),this.masterTrack.rewards.push(new Je("Diminishing Returns per Facility Level",2,Le.Other)),this.masterTrack.rewards.push(new Je("Training Time Reduction",1,Le.Other)),this.masterTrack.rewards.push(new Je("Coins",1e3,Le.Resources)),this.masterTrack.rewards.push(new Je("Bonus Breed XP Gain From Training",3,Le.Other)),this.masterTrack.rewards.push(new Je("Bonus Talents",2,Le.Other)),this.masterTrack.rewards.push(new Je("Training Time Reduction",1,Le.Other)),this.masterTrack.rewards.push(new Je("Coins",1e3,Le.Resources)),this.masterTrack.rewards.push(new Je("Orb Pendant",1,Le.Other)),this.masterTrack.rewards.push(new Je("Diminishing Returns per Facility Level",3,Le.Other)),this.masterTrack.rewards.push(new Je("Training Time Reduction",1,Le.Other)),this.masterTrack.rewards.push(new Je("Bonus Talents",3,Le.Other)),this.legacyTrack=new mo,this.legacyTrack.totalRewards=4,this.legacyTrack.rewards.push(new Je("Bonus Breed XP Gain From Training",5,Le.Other)),this.legacyTrack.rewards.push(new Je("Bonus Base Ability Efficiency",.05,Le.Other)),this.legacyTrack.rewards.push(new Je("Bonus Orb XP Gain",.1,Le.Other)),this.legacyTrack.rewards.push(new Je("Nectar of the Gods",1,Le.Other))}getTotalRewardCount(){return this.noviceTrack.totalRewards+this.intermediateTrack.totalRewards+this.masterTrack.totalRewards+this.legacyTrack.totalRewards}getTotalRewardsObtained(){return this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained-this.legacyTrack.rewardsObtained}getTotalRewardsRemaining(){return this.getTotalRewardCount()-this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained-this.legacyTrack.rewardsObtained}getTotalTrainingTrackBonusBreedXpFromFreeRaces(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=4&&(n+=this.noviceTrack.rewards[3].amount),this.noviceTrack.rewardsObtained>=8&&(n+=this.noviceTrack.rewards[7].amount),this.noviceTrack.rewardsObtained>=12&&(n+=this.noviceTrack.rewards[11].amount),this.intermediateTrack.rewardsObtained>=8&&(n+=this.intermediateTrack.rewards[7].amount),this.masterTrack.rewardsObtained>=1&&(n+=this.masterTrack.rewards[0].amount),n)}getTotalTrainingTrackBonusBreedXpFromCircuitRaces(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=6&&(n+=this.intermediateTrack.rewards[5].amount),n)}getTotalTrainingTrackBonusBreedXpFromTraining(n){var e=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=2&&(e+=this.noviceTrack.rewards[1].amount),this.noviceTrack.rewardsObtained>=6&&(e+=this.noviceTrack.rewards[5].amount),this.noviceTrack.rewardsObtained>=10&&(e+=this.noviceTrack.rewards[9].amount),this.intermediateTrack.rewardsObtained>=2&&(e+=this.intermediateTrack.rewards[1].amount),this.intermediateTrack.rewardsObtained>=10&&(e+=this.intermediateTrack.rewards[9].amount),this.masterTrack.rewardsObtained>=5&&(e+=this.masterTrack.rewards[4].amount),e+=5*n.legacyRaceCount,this.legacyTrack.rewardsObtained>=1&&(e+=5),e)}getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=4&&(n+=this.intermediateTrack.rewards[3].amount),this.intermediateTrack.rewardsObtained>=12&&(n+=this.intermediateTrack.rewards[11].amount),this.masterTrack.rewardsObtained>=2&&(n+=this.masterTrack.rewards[1].amount),this.masterTrack.rewardsObtained>=10&&(n+=this.masterTrack.rewards[9].amount),n)}getTotalTrainingTrackBonusTrainingTimeReduction(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=5&&(n+=this.intermediateTrack.rewards[4].amount),this.intermediateTrack.rewardsObtained>=11&&(n+=this.intermediateTrack.rewards[10].amount),this.masterTrack.rewardsObtained>=3&&(n+=this.masterTrack.rewards[2].amount),this.masterTrack.rewardsObtained>=7&&(n+=this.masterTrack.rewards[6].amount),this.masterTrack.rewardsObtained>=11&&(n+=this.masterTrack.rewards[10].amount),n)}getTotalTrainingTrackBonusTalents(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.masterTrack.rewardsObtained>=6&&(n+=this.masterTrack.rewards[5].amount),this.masterTrack.rewardsObtained>=12&&(n+=this.masterTrack.rewards[11].amount),n)}getTotalTrainingTrackBonusAbilityEfficiency(n){var e=0;return e=.05*n.legacyRaceCount,this.legacyTrack.rewardsObtained>=2&&(e+=.05),e}getTotalTrainingTrackBonusOrbXp(n){var e=0;return e=.1*n.legacyRaceCount,this.legacyTrack.rewardsObtained>=3&&(e+=.1),e}}se([ei(()=>mo),Re("design:type",mo)],ql.prototype,"noviceTrack",void 0),se([ei(()=>mo),Re("design:type",mo)],ql.prototype,"intermediateTrack",void 0),se([ei(()=>mo),Re("design:type",mo)],ql.prototype,"masterTrack",void 0),se([ei(()=>mo),Re("design:type",mo)],ql.prototype,"legacyTrack",void 0);class It{constructor(n,e,i,r,a,c){this.defaultStaminaModifier=5,this.defaultMaxSpeedModifier=.3,this.defaultAccelerationModifier=.1,this.defaultPowerModifier=1,this.defaultFocusModifier=5,this.defaultAdaptabilityModifier=5,this.defaultBurstDistanceModifier=1,this.diminishingReturnsDefaultStatThreshold=20,void 0!==n&&(this.topSpeed=n),void 0!==e&&(this.acceleration=e),void 0!==i&&(this.endurance=i),void 0!==r&&(this.power=r),void 0!==a&&(this.focus=a),void 0!==c&&(this.adaptability=c)}makeCopy(n){var e=new It;return e.topSpeed=n.topSpeed,e.acceleration=n.acceleration,e.endurance=n.endurance,e.power=n.power,e.focus=n.focus,e.adaptability=n.adaptability,e.stamina=n.stamina,e.maxSpeedMs=n.maxSpeedMs,e.accelerationMs=n.accelerationMs,e.powerMs=n.powerMs,e.focusMs=n.focusMs,e.adaptabilityMs=n.adaptabilityMs,e.burstChance=n.burstChance,e.burstDistance=n.burstDistance,e}calculateStamina(n,e,i){return null==n&&(n=this.defaultStaminaModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.endurance<=e?this.endurance*n*i:(e*n+(this.endurance-e)*(n*this.calculateDiminishingReturns(this.endurance-e)))*i}calculateMaxSpeed(n,e,i){return null==n&&(n=this.defaultMaxSpeedModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.topSpeed<=e?this.topSpeed*n*i:(e*n+(this.topSpeed-e)*(n*this.calculateDiminishingReturns(this.topSpeed-e)))*i}calculateTrueAcceleration(n,e,i){return null==n&&(n=this.defaultAccelerationModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.acceleration<=e?this.acceleration*n*i:(e*n+(this.acceleration-e)*(n*this.calculateDiminishingReturns(this.acceleration-e)))*i}calculateTruePower(n,e,i){return null==n&&(n=this.defaultPowerModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.power<=e?this.power*n*i:(e*n+(this.power-e)*(n*this.calculateDiminishingReturns(this.power-e)))*i}calculateTrueFocus(n,e,i){return null==n&&(n=this.defaultFocusModifier),null==i&&(i=1),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.focus<=e?this.focus*n*i:(e*n+(this.focus-e)*(n*this.calculateDiminishingReturns(this.focus-e)))*i}calculateTrueAdaptability(n,e,i){return null==n&&(n=this.defaultAdaptabilityModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.adaptability<=e?this.adaptability*n*i:(e*n+(this.adaptability-e)*(n*this.calculateDiminishingReturns(this.adaptability-e)))*i}calculateBurstChance(n,e,i){var r=this.focus,a=this.adaptability;return null!=e&&(r*=e/this.focusMs),null!=i&&(a*=i/this.adaptabilityMs),(a+r)*(1+n/4)/1e3*100}calculateBurstDistance(n,e,i){null==e&&(e=this.defaultBurstDistanceModifier);var r=this.power;return null!=i&&(r*=i/this.powerMs),r*(1+n/4)*e}maxSpeedMsPopover(){return"This is the max speed this animal can go during a race."}accelerationMsPopover(){return"This is how quickly this animal will gain speed."}staminaPopover(){return"Your animal loses stamina while racing. If its stamina reaches 0, it will slow down for a period of time while its stamina recharges."}powerMsPopover(){return"This increases the efficiency of your animal's ability."}focusMsPopover(){return"This is the average distance your animal can go without losing focus, causing them to stop."}adaptabilityMsPopover(){return"This is the average distance your animal can go without stumbling, causing them to slow down."}burstChancePopover(){return"Every time you enter a path, you have the chance to enter burst mode. This is your chance per 1000 meters that you will burst. Increase by improving Focus and Adaptability."}burstDistancePopover(){return"This is how far you can go while bursting. Increase by improving Power."}calculateDiminishingReturns(n){return 1/n**.6}addCurrentRacingStats(n){this.maxSpeedMs+=n.topSpeed,this.accelerationMs+=n.acceleration,this.stamina+=n.endurance,this.powerMs+=n.power,this.focusMs+=n.focus,this.adaptabilityMs+=n.adaptability}subtractCurrentRacingStats(n){this.maxSpeedMs-=n.topSpeed,this.accelerationMs-=n.acceleration,this.stamina-=n.endurance,this.powerMs-=n.power,this.focusMs-=n.focus,this.adaptabilityMs-=n.adaptability}multiplyCurrentRacingStats(n){this.maxSpeedMs*=n.topSpeed,this.accelerationMs*=n.acceleration,this.stamina*=n.endurance,this.powerMs*=n.power,this.focusMs*=n.focus,this.adaptabilityMs*=n.adaptability}divideCurrentRacingStats(n){this.maxSpeedMs/=n.topSpeed,this.accelerationMs/=n.acceleration,this.stamina/=n.endurance,this.powerMs/=n.power,this.focusMs/=n.focus,this.adaptabilityMs/=n.adaptability}}var _i=(()=>{return(t=_i||(_i={}))[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large",_i;var t})();class $s{constructor(){this.trainingTimeRemaining=7200,this.timeTrained=0,this.isAvailable=!1,this.purchasePrice=50}makeCopy(n){var e=new $s;return e.affectedStatRatios=JSON.parse(JSON.stringify(n.affectedStatRatios)),e.facilitySize=JSON.parse(JSON.stringify(n.facilitySize)),e.isAvailable=JSON.parse(JSON.stringify(n.isAvailable)),e.purchasePrice=JSON.parse(JSON.stringify(n.purchasePrice)),e.statGain=JSON.parse(JSON.stringify(n.statGain)),e.timeToComplete=JSON.parse(JSON.stringify(n.timeToComplete)),e.timeTrained=JSON.parse(JSON.stringify(n.timeTrained)),e.trainingCourseType=JSON.parse(JSON.stringify(n.trainingCourseType)),e.trainingName=JSON.parse(JSON.stringify(n.trainingName)),e.trainingType=JSON.parse(JSON.stringify(n.trainingType)),e}getFacilitySize(){return _i[this.facilitySize]}getStatGainDescription(){var n="";return this.affectedStatRatios.topSpeed>0&&(n+="+"+this.statGain*this.affectedStatRatios.topSpeed+" Speed\n"),this.affectedStatRatios.acceleration>0&&(n+="+"+this.statGain*this.affectedStatRatios.acceleration+" Acceleration\n"),this.affectedStatRatios.endurance>0&&(n+="+"+this.statGain*this.affectedStatRatios.endurance+" Endurance\n"),this.affectedStatRatios.focus>0&&(n+="+"+this.statGain*this.affectedStatRatios.focus+" Focus\n"),this.affectedStatRatios.power>0&&(n+="+"+this.statGain*this.affectedStatRatios.power+" Power\n"),this.affectedStatRatios.adaptability>0&&(n+="+"+this.statGain*this.affectedStatRatios.adaptability+" Adaptability\n"),n}}se([ei(()=>It),Re("design:type",It)],$s.prototype,"affectedStatRatios",void 0);class Bi{constructor(){this.abilityLevel=1,this.abilityXp=0,this.abilityMaxXp=50}}var Dt=(()=>{return(t=Dt||(Dt={}))[t.topSpeed=0]="topSpeed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",Dt;var t})();class In{constructor(n,e,i,r,a){void 0!==n&&(this.traitName=n),void 0!==e&&(this.requiredLevel=e),void 0!==i&&(this.researchLevel=i),void 0!==r&&(this.positiveStatGain=r),void 0!==a&&(this.negativeStatGain=a)}getStatGainDescription(n){var e="",i="";return this.positiveStatGain===Dt.acceleration&&(e="Acceleration"),this.positiveStatGain===Dt.adaptability&&(e="Adaptability"),this.positiveStatGain===Dt.endurance&&(e="Endurance"),this.positiveStatGain===Dt.focus&&(e="Focus"),this.positiveStatGain===Dt.power&&(e="Power"),this.positiveStatGain===Dt.topSpeed&&(e="Speed"),this.negativeStatGain===Dt.acceleration&&(i="Acceleration"),this.negativeStatGain===Dt.adaptability&&(i="Adaptability"),this.negativeStatGain===Dt.endurance&&(i="Endurance"),this.negativeStatGain===Dt.focus&&(i="Focus"),this.negativeStatGain===Dt.power&&(i="Power"),this.negativeStatGain===Dt.topSpeed&&(i="Speed"),"+"+this.researchLevel+"% "+e+", -"+(this.researchLevel>n?n:this.researchLevel)+"% "+i}}class Ed{constructor(){this.maxSpeedModifier=1,this.accelerationModifier=1,this.staminaModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1}}class Id{constructor(){this.bonusBreedXpGainFromLocalRaces=0,this.bonusBreedXpGainFromCircuitRaces=0,this.bonusBreedXpGainFromTraining=0,this.trainingTimeReduction=0,this.diminishingReturnsBonus=0,this.bonusTalents=0,this.bonusAbilityEfficiency=0,this.bonusOrbXp=0,this.bonusBreedModifierAmount=0,this.bonusTrainingBreedXpCertificateCount=0,this.bonusCircuitBreedXpCertificateCount=0,this.bonusLocalBreedXpCertificateCount=0,this.bonusDiminishingReturnsCertificateCount=0,this.certificateUseCap=30}makeCopy(n){var e=new Id;return e.bonusBreedXpGainFromCircuitRaces=n.bonusBreedXpGainFromCircuitRaces,e.bonusBreedXpGainFromLocalRaces=n.bonusBreedXpGainFromLocalRaces,e.bonusBreedXpGainFromTraining=n.bonusBreedXpGainFromTraining,e.bonusCircuitBreedXpCertificateCount=n.bonusCircuitBreedXpCertificateCount,e.bonusDiminishingReturnsCertificateCount=n.bonusDiminishingReturnsCertificateCount,e.bonusLocalBreedXpCertificateCount=n.bonusLocalBreedXpCertificateCount,e.bonusTalents=n.bonusTalents,e.bonusTrainingBreedXpCertificateCount=n.bonusTrainingBreedXpCertificateCount,e.certificateUseCap=n.certificateUseCap,e.diminishingReturnsBonus=n.diminishingReturnsBonus,e.trainingTimeReduction=n.trainingTimeReduction,e.bonusAbilityEfficiency=n.bonusAbilityEfficiency,e.bonusOrbXp=n.bonusOrbXp,e.bonusBreedModifierAmount=n.bonusBreedModifierAmount,e}}class Ws{constructor(){this.remainingBurstMeters=0,this.metersSinceLostFocus=0,this.recoveringStamina=!1,this.defaultRecoveringStaminaLength=150,this.currentRecoveringStaminaLength=this.defaultRecoveringStaminaLength,this.ranOutOfStamina=!1,this.lostFocus=!1,this.defaultLostFocusLength=60,this.currentLostFocusLength=this.defaultLostFocusLength,this.hasLostFocusDuringRace=!1,this.stumbled=!1,this.defaultStumbledLength=10,this.currentStumbledLength=this.defaultStumbledLength,this.relayEffects=[],this.burstCount=0,this.icyCurrentYAmount=0,this.icyCurrentDirectionUp=!0,this.headbandStumblePreventionCount=0,this.scaryMaskEffectOccurred=!1,this.firstAbilityUseEffectApplied=!1,this.velocityExceedsMaxSpeedDuringBurst=!1,this.velocityReachesMaxSpeedCount=0,this.velocityExceedsMaxSpeedFloorRequirement=!1,this.forceRelay=!1}makeCopy(){var n=new Ws;return n.remainingBurstMeters=this.remainingBurstMeters,n.metersSinceLostFocus=this.metersSinceLostFocus,n.recoveringStamina=this.recoveringStamina,n.defaultRecoveringStaminaLength=this.defaultRecoveringStaminaLength,n.currentRecoveringStaminaLength=this.currentRecoveringStaminaLength,n.ranOutOfStamina=this.ranOutOfStamina,n.lostFocus=this.lostFocus,n.defaultLostFocusLength=this.defaultLostFocusLength,n.currentLostFocusLength=this.currentLostFocusLength,n.hasLostFocusDuringRace=this.hasLostFocusDuringRace,n.stumbled=this.stumbled,n.defaultStumbledLength=this.defaultStumbledLength,n.currentStumbledLength=this.currentStumbledLength,n.burstCount=this.burstCount,n.icyCurrentYAmount=this.icyCurrentYAmount,n.icyCurrentDirectionUp=this.icyCurrentDirectionUp,n.headbandStumblePreventionCount=this.headbandStumblePreventionCount,n.scaryMaskEffectOccurred=this.scaryMaskEffectOccurred,n.firstAbilityUseEffectApplied=this.firstAbilityUseEffectApplied,n.velocityExceedsMaxSpeedDuringBurst=this.velocityExceedsMaxSpeedDuringBurst,n.velocityReachesMaxSpeedCount=this.velocityReachesMaxSpeedCount,n.velocityExceedsMaxSpeedFloorRequirement=this.velocityExceedsMaxSpeedFloorRequirement,n.forceRelay=this.forceRelay,this.relayEffects=[],n}}var li=(()=>{return(t=li||(li={}))[t.none=0]="none",t[t.sprint=1]="sprint",t[t.support=2]="support",t[t.longDistance=3]="longDistance",li;var t})();class Bd{constructor(){this.talentTreeType=li.none,this.row2RequiredPoints=5,this.row3RequiredPoints=10,this.row4RequiredPoints=15,this.column1Row1Points=0,this.column1Row2Points=0,this.column1Row3Points=0,this.column1Row4Points=0,this.column2Row1Points=0,this.column2Row2Points=0,this.column2Row3Points=0,this.column2Row4Points=0,this.column3Row1Points=0,this.column3Row2Points=0,this.column3Row3Points=0,this.column3Row4Points=0}makeCopy(n){var e=new Bd;return e.talentTreeType=n.talentTreeType,e.column1Row1Points=n.column1Row1Points,e.column1Row2Points=n.column1Row2Points,e.column1Row3Points=n.column1Row3Points,e.column1Row4Points=n.column1Row4Points,e.column2Row1Points=n.column2Row1Points,e.column2Row2Points=n.column2Row2Points,e.column2Row3Points=n.column2Row3Points,e.column2Row4Points=n.column2Row4Points,e.column3Row1Points=n.column3Row1Points,e.column3Row2Points=n.column3Row2Points,e.column3Row3Points=n.column3Row3Points,e.column3Row4Points=n.column3Row4Points,e}getTalentPointsByColumn(n){return 0===n?this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points:1===n?this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points:2===n?this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points:0}getTalentPointsByRowColumn(n,e){return 0===n&&0===e?this.column1Row1Points:1===n&&0===e?this.column1Row2Points:2===n&&0===e?this.column1Row3Points:3===n&&0===e?this.column1Row4Points:0===n&&1===e?this.column2Row1Points:1===n&&1===e?this.column2Row2Points:2===n&&1===e?this.column2Row3Points:3===n&&1===e?this.column2Row4Points:0===n&&2===e?this.column3Row1Points:1===n&&2===e?this.column3Row2Points:2===n&&2===e?this.column3Row3Points:3===n&&2===e?this.column3Row4Points:0}getTotalSpentPoints(){return this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points+this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points+this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points}spendTalentPoint(n,e){0===n&&0===e&&(this.column1Row1Points+=1),1===n&&0===e&&(this.column1Row2Points+=1),2===n&&0===e&&(this.column1Row3Points+=1),3===n&&0===e&&(this.column1Row4Points+=1),0===n&&1===e&&(this.column2Row1Points+=1),1===n&&1===e&&(this.column2Row2Points+=1),2===n&&1===e&&(this.column2Row3Points+=1),3===n&&1===e&&(this.column2Row4Points+=1),0===n&&2===e&&(this.column3Row1Points+=1),1===n&&2===e&&(this.column3Row2Points+=1),2===n&&2===e&&(this.column3Row3Points+=1),3===n&&2===e&&(this.column3Row4Points+=1)}reset(){this.talentTreeType=li.none,this.column1Row1Points=0,this.column1Row2Points=0,this.column1Row3Points=0,this.column1Row4Points=0,this.column2Row1Points=0,this.column2Row2Points=0,this.column2Row3Points=0,this.column2Row4Points=0,this.column3Row1Points=0,this.column3Row2Points=0,this.column3Row3Points=0,this.column3Row4Points=0}}class Im{constructor(){this.successfulCoachingAttempts=0}}class Ti{constructor(){this.mangoesUsed=0,this.talentResetCount=0,this.freeTalentResetCount=0,this.scrimmageEnergyTimer=0,this.legacyRaceCount=0,this.nectarAvailable=!1,this.incubatorStatUpgrades=new Ed,this.allTrainingTracks=new ql,this.increasedDefaultStats=new It(0,0,0,0,0,0),this.miscStats=new Id,this.trackedAnimalStats=new Im,this.talentTree=new Bd,this.breedLevel=1,this.breedGaugeXp=0,this.breedGaugeMax=200,this.previousBreedLevel=1,this.totalRacesRun=0,this.equippedOrb=null,this.canEquipOrb=!1,this.canTrain=!0,this.isAvailable=!1,this.availableAbilities=[]}makeCopy(n){var e=new Ti;return e.name=n.name,e.type=n.type,e.raceCourseType=n.raceCourseType,e.currentStats=n.currentStats.makeCopy(n.currentStats),e.baseStats=n.baseStats.makeCopy(n.baseStats),e.talentTree=n.talentTree.makeCopy(n.talentTree),e.isAvailable=n.isAvailable,e.ability=n.ability,e.raceVariables=new Ws,e.equippedItem=n.equippedItem,e.equippedOrb=n.equippedOrb,e.incubatorStatUpgrades=n.incubatorStatUpgrades,e.breedLevel=n.breedLevel,e.trackedAnimalStats=n.trackedAnimalStats,e.trait=n.trait,e.miscStats=n.miscStats.makeCopy(n.miscStats),e.legacyRaceCount=n.legacyRaceCount,e.nectarAvailable=n.nectarAvailable,e}viewAbility(){return this.ability.name}getAbilityUseUpdateText(n,e=""){return n+" uses "+this.ability.name+e+"."}useAbility(){}getAnimalType(){return Fe[this.type]}getRaceCourseType(){return Ve[this.raceCourseType]}getTraitName(){return null==this.trait||""===this.trait.traitName?"None":this.trait.traitName}getEquippedItemName(){if(null!=this.equippedItem)return this.equippedItem.name}getCourseTypeClass(){return this.raceCourseType===Ve.Flatland?"flatlandColor":this.raceCourseType===Ve.Mountain?"mountainColor":this.raceCourseType===Ve.Ocean?"waterColor":this.raceCourseType===Ve.Tundra?"tundraColor":this.raceCourseType===Ve.Volcanic?"volcanicColor":""}increaseStatsFromCurrentTraining(){null==this.currentTraining||null==this.currentStats||(this.currentStats.topSpeed+=this.currentTraining.affectedStatRatios.topSpeed*this.currentTraining.statGain,this.currentStats.acceleration+=this.currentTraining.affectedStatRatios.acceleration*this.currentTraining.statGain,this.currentStats.endurance+=this.currentTraining.affectedStatRatios.endurance*this.currentTraining.statGain,this.currentStats.power+=this.currentTraining.affectedStatRatios.power*this.currentTraining.statGain,this.currentStats.focus+=this.currentTraining.affectedStatRatios.focus*this.currentTraining.statGain,this.currentStats.adaptability+=this.currentTraining.affectedStatRatios.adaptability*this.currentTraining.statGain)}increaseStats(n){null==n||null==this.currentStats||(this.currentStats.topSpeed+=Number(n.topSpeed),this.currentStats.acceleration+=Number(n.acceleration),this.currentStats.stamina+=Number(n.stamina),this.currentStats.endurance+=Number(n.endurance),this.currentStats.power+=Number(n.power),this.currentStats.focus+=Number(n.focus),this.currentStats.adaptability+=Number(n.adaptability))}}se([ei(()=>It),Re("design:type",It)],Ti.prototype,"currentStats",void 0),se([ei(()=>It),Re("design:type",It)],Ti.prototype,"baseStats",void 0),se([ei(()=>It),Re("design:type",It)],Ti.prototype,"increasedDefaultStats",void 0),se([ei(()=>$s),Re("design:type",Object)],Ti.prototype,"currentTraining",void 0),se([ei(()=>$s),Re("design:type",Object)],Ti.prototype,"queuedTraining",void 0),se([ei(()=>$s),Re("design:type",Object)],Ti.prototype,"previousTraining",void 0),se([ei(()=>Bi),Re("design:type",Bi)],Ti.prototype,"ability",void 0),se([ei(()=>Ws),Re("design:type",Ws)],Ti.prototype,"raceVariables",void 0),se([ei(()=>Je),Re("design:type",Object)],Ti.prototype,"equippedItem",void 0),se([ei(()=>Je),Re("design:type",Object)],Ti.prototype,"equippedOrb",void 0),se([ei(()=>Ed),Re("design:type",Ed)],Ti.prototype,"incubatorStatUpgrades",void 0),se([ei(()=>ql),Re("design:type",ql)],Ti.prototype,"allTrainingTracks",void 0),se([ei(()=>Id),Re("design:type",Id)],Ti.prototype,"miscStats",void 0),se([ei(()=>Im),Re("design:type",Im)],Ti.prototype,"trackedAnimalStats",void 0),se([ei(()=>Bi),Re("design:type",Array)],Ti.prototype,"availableAbilities",void 0),se([ei(()=>In),Re("design:type",In)],Ti.prototype,"trait",void 0),se([ei(()=>Bd),Re("design:type",Bd)],Ti.prototype,"talentTree",void 0);class $B extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Horse,this.raceCourseType=Ve.Flatland,this.ability=new Bi,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Second Wind",this.ability.description="Second Wind",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=60,n.oneTimeEffect=!0,n.name="Inspiration",n.description="Inspiration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.cooldown=5,e.efficiency=27,e.oneTimeEffect=!1,e.name="Pacemaker",e.description="Pacemaker",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class WB extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Cheetah,this.raceCourseType=Ve.Flatland,this.ability=new Bi,this.ability.cooldown=6,this.ability.efficiency=35,this.ability.oneTimeEffect=!1,this.ability.name="Sprint",this.ability.description="Sprint",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=1,n.oneTimeEffect=!1,n.name="Giving Chase",n.description="Giving Chase",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=.5,e.oneTimeEffect=!1,e.name="On The Hunt",e.description="On The Hunt",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class XB extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Hare,this.raceCourseType=Ve.Flatland,this.ability=new Bi,this.ability.efficiency=45,this.ability.oneTimeEffect=!0,this.ability.name="Prey Instinct",this.ability.description="Prey Instinct",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.cooldown=5,n.efficiency=40,n.oneTimeEffect=!1,n.name="Awareness",n.description="Awareness",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=130,e.oneTimeEffect=!0,e.name="Nap",e.description="Nap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class tM extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Warthog,this.raceCourseType=Ve.Flatland,this.ability=new Bi,this.ability.cooldown=5,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Graze",this.ability.description="Graze",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=80,n.oneTimeEffect=!1,n.name="Mud Pit",n.description="Mud Pit",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=30,e.oneTimeEffect=!0,e.name="Time To Tussle",e.description="Time To Tussle",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class YB extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Monkey,this.raceCourseType=Ve.Mountain,this.ability=new Bi,this.ability.cooldown=11,this.ability.efficiency=6,this.ability.name="Landslide",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=60,n.oneTimeEffect=!0,n.name="Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=70,e.cooldown=0,e.oneTimeEffect=!0,e.name="Leap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=30,this.availableAbilities.push(e)}}class KB extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Goat,this.raceCourseType=Ve.Mountain,this.ability=new Bi,this.ability.efficiency=50,this.ability.oneTimeEffect=!1,this.ability.name="Sure-footed",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=8,n.oneTimeEffect=!1,n.name="Deep Breathing",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=.2,e.oneTimeEffect=!1,e.name="In The Rhythm",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=15,this.availableAbilities.push(e)}}class ZB extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Gecko,this.raceCourseType=Ve.Mountain,this.ability=new Bi,this.ability.cooldown=5,this.ability.efficiency=55,this.ability.oneTimeEffect=!1,this.ability.name="Sticky",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=.75,n.oneTimeEffect=!1,n.name="Night Vision",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=38,e.oneTimeEffect=!0,e.name="Camouflage",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class QB extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Dolphin,this.raceCourseType=Ve.Ocean,this.ability=new Bi,this.ability.cooldown=6,this.ability.efficiency=84,this.ability.oneTimeEffect=!1,this.ability.name="Echolocation",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=50,n.oneTimeEffect=!0,n.name="Navigator",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=70,e.oneTimeEffect=!0,e.name="Flowing Current",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class JB extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Shark,this.raceCourseType=Ve.Ocean,this.ability=new Bi,this.ability.efficiency=60,this.ability.oneTimeEffect=!0,this.ability.name="Apex Predator",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=35,n.oneTimeEffect=!0,n.name="Feeding Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=2,e.oneTimeEffect=!0,e.name="Blood In The Water",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class eO extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Octopus,this.raceCourseType=Ve.Ocean,this.ability=new Bi,this.ability.cooldown=5,this.ability.efficiency=17,this.ability.totalFrames=15,this.ability.oneTimeEffect=!1,this.ability.name="Propulsion",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=100,n.oneTimeEffect=!1,n.name="Buried Treasure",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=4,e.oneTimeEffect=!0,e.name="Big Brain",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class iM extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Whale,this.raceCourseType=Ve.Ocean,this.ability=new Bi,this.ability.cooldown=9,this.ability.efficiency=75,this.ability.oneTimeEffect=!1,this.ability.name="Storing Power",this.ability.description="Storing Power",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=80,n.oneTimeEffect=!1,n.name="Unparalleled Focus",n.description="Mud Pit",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=45,e.cooldown=8,e.oneTimeEffect=!1,e.name="Whalesong",e.description="Whalesong",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class tO extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Penguin,this.raceCourseType=Ve.Tundra,this.ability=new Bi,this.ability.efficiency=65,this.ability.cooldown=8,this.ability.oneTimeEffect=!1,this.ability.name="Careful Toboggan",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=1.5,n.oneTimeEffect=!1,n.name="Wild Toboggan",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=.5,e.oneTimeEffect=!1,e.name="Quick Toboggan",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class iO extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Caribou,this.raceCourseType=Ve.Tundra,this.ability=new Bi,this.ability.efficiency=3,this.ability.oneTimeEffect=!0,this.ability.name="Herd Mentality",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=50,n.cooldown=7,n.oneTimeEffect=!1,n.name="Great Migration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=5,e.oneTimeEffect=!0,e.name="Special Delivery",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class nO extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Salamander,this.raceCourseType=Ve.Volcanic,this.ability=new Bi,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Cold Blooded",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.cooldown=6,n.efficiency=50,n.oneTimeEffect=!1,n.name="Burrow",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.cooldown=10,e.efficiency=25,e.oneTimeEffect=!1,e.name="Heat Up",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class rO extends Ti{constructor(){super(),this.baseStats=new It(5,5,5,5,5,5),this.currentStats=new It(5,5,5,5,5,5),this.type=Fe.Fox,this.raceCourseType=Ve.Volcanic,this.ability=new Bi,this.ability.cooldown=5,this.ability.efficiency=60,this.ability.oneTimeEffect=!1,this.ability.name="Trickster",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new Bi;n.efficiency=4,n.oneTimeEffect=!1,n.name="Fleeting Speed",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new Bi;e.efficiency=65,e.oneTimeEffect=!0,e.name="Nine Tails",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class h0{constructor(){this.selectedAnimals=[],this.courseTypeOrder=[],this.isCourseOrderActive=!1,this.autoRunFreeRace=!1,this.isEventDeck=!1}}se([ei(()=>Ti),Re("design:type",Array)],h0.prototype,"selectedAnimals",void 0);var Ot=(()=>{return(t=Ot||(Ot={}))[t.ruby=0]="ruby",t[t.amber=1]="amber",t[t.topaz=2]="topaz",t[t.amethyst=3]="amethyst",t[t.sapphire=4]="sapphire",t[t.emerald=5]="emerald",t[t.none=6]="none",Ot;var t})();class Xs{constructor(n){this.type=n,this.defaultIncrease=1.2,this.increasePerLevel=.2,this.level=1,this.maxLevel=1,this.xp=0,this.xpNeededForLevel=1e4}makeCopy(){var n=new Xs(this.type);return n.level=this.level,n.maxLevel=this.maxLevel,n.xp=this.xp,n.xpNeededForLevel=this.xpNeededForLevel,n.defaultIncrease=this.defaultIncrease,n.increasePerLevel=this.increasePerLevel,n}}class $l{constructor(){this.allOrbs=[];var n=new Xs(Ot.amber);this.allOrbs.push(n);var e=new Xs(Ot.amethyst);this.allOrbs.push(e);var i=new Xs(Ot.ruby);this.allOrbs.push(i);var r=new Xs(Ot.sapphire);this.allOrbs.push(r);var a=new Xs(Ot.topaz);this.allOrbs.push(a);var c=new Xs(Ot.emerald);this.allOrbs.push(c)}getMaxSpeedIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var i=this.allOrbs.find(r=>r.type===Ot.ruby);void 0!==i&&(e=i.defaultIncrease+(i.level-1)*i.increasePerLevel)}return(e-1)/n+1}getAccelerationIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var i=this.allOrbs.find(r=>r.type===Ot.amber);void 0!==i&&(e=i.defaultIncrease+(i.level-1)*i.increasePerLevel)}return(e-1)/n+1}getEnduranceIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var r=this.allOrbs.find(a=>a.type===Ot.topaz);void 0!==r&&(e=r.defaultIncrease+(r.level-1)*r.increasePerLevel)}return(e-1)/n+1}getPowerIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var r=this.allOrbs.find(a=>a.type===Ot.amethyst);void 0!==r&&(e=r.defaultIncrease+(r.level-1)*r.increasePerLevel)}return(e-1)/n+1}getAdaptabilityIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var r=this.allOrbs.find(a=>a.type===Ot.emerald);void 0!==r&&(e=r.defaultIncrease+(r.level-1)*r.increasePerLevel)}return(e-1)/n+1}getFocusIncrease(n){var e=1;if(void 0!==this.allOrbs&&this.allOrbs.length>0){var r=this.allOrbs.find(a=>a.type===Ot.sapphire);void 0!==r&&(e=r.defaultIncrease+(r.level-1)*r.increasePerLevel)}return(e-1)/n+1}makeCopy(){var n=new $l;return n.allOrbs=[],this.allOrbs.forEach(e=>{n.allOrbs.push(e.makeCopy())}),n}}se([ei(()=>Xs),Re("design:type",Array)],$l.prototype,"allOrbs",void 0);class aO{constructor(){this.upgradePrice=[],this.upgradedStatGain=new It(1,1,1,1,1,1),this.barnLevel=0,this.specializationLevel=0,this.currentDeltaTime=0,this.trainingFacilityDeltaTime=0}}class Bm{constructor(){this.barnUpgrades=new aO}getSize(){return _i[this.size]}}class Od{constructor(){this.timeTrained=0,this.timeToComplete=120}}se([ei(()=>Ti),Re("design:type",Object)],Od.prototype,"assignedAnimal",void 0),se([ei(()=>In),Re("design:type",Object)],Od.prototype,"assignedTrait",void 0);class nM{constructor(n){this.exhaustionStatReduction=1,this.morale=1,this.associatedAnimalType=n,this.isCurrentlyRacing=!1,this.isSetToRelay=!1}}class Om{constructor(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.deepBreathingUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.bigBrainUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.specialDeliveryUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0,this.storingPowerUseCount=0,this.onTheHuntUseCap=25,this.sureFootedUseCap=25,this.deepBreathingUseCap=25,this.nightVisionUseCap=25,this.bigBrainUseCap=5,this.quickTobogganUseCap=25,this.herdMentalityUseCap=1,this.specialDeliveryUseCap=25,this.storingPowerUseCap=25}resetUseCounts(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0,this.storingPowerUseCount=0}}class p0{constructor(){this.nineTailsBuffs=[],this.grazeBuffs=[],this.relayEffects=[],this.mountainEndingY=0,this.deepBreathingStaminaGain=0,this.longDistanceTalentIncreaseAccelerationWithLowVelocity=!1,this.maxSpeedFloor=0,this.whalePowerStored=0,this.pathsClearedWithoutLosingFocus=0,this.raceVariables=new Ws}}se([ei(()=>Ws),Re("design:type",Ws)],p0.prototype,"raceVariables",void 0);class ze{constructor(n,e){void 0!==n&&(this.value=n),void 0!==e&&(this.text=e)}}class g0{constructor(){this.raceUpdates=[],this.beatMoneyMark=!1,this.distanceCovered=0}addRaceUpdate(n,e){var i=new ze;i.text=e,i.value=n,this.raceUpdates.push(i)}}class rM{constructor(n,e){void 0!==n&&(this.objectType=n),void 0!==e&&(this.xDistance=e),this.isGoingUp=!1}}var $t=(()=>{return(t=$t||($t={}))[t.threeHundredSecondRace=0]="threeHundredSecondRace",t[t.twoRacersOnly=1]="twoRacersOnly",t[t.threeRacersOnly=2]="threeRacersOnly",t[t.noRelayEffects=3]="noRelayEffects",t[t.steamy=4]="steamy",t[t.burstIncreaseStaminaLoss=5]="burstIncreaseStaminaLoss",t[t.slick=6]="slick",t[t.strongWinds=7]="strongWinds",t[t.hot=8]="hot",t[t.cold=9]="cold",$t;var t})(),gi=(()=>{return(t=gi||(gi={}))[t.thirtySecondRace=0]="thirtySecondRace",t[t.fourRacersOnly=1]="fourRacersOnly",t[t.brokenFloorboards=2]="brokenFloorboards",t[t.sticky=3]="sticky",t[t.longCooldowns=4]="longCooldowns",t[t.unfocused=5]="unfocused",t[t.harshTerrain=6]="harshTerrain",t[t.highSpeedLowAcceleration=7]="highSpeedLowAcceleration",gi;var t})(),cr=(()=>{return(t=cr||(cr={}))[t.noBurst=0]="noBurst",t[t.lowStaminaRelay=1]="lowStaminaRelay",t[t.exhaustionPenaltyIncreased=2]="exhaustionPenaltyIncreased",t[t.reduceSpeedOnRelay=3]="reduceSpeedOnRelay",t[t.reduceAbilityEfficiency=4]="reduceAbilityEfficiency",cr;var t})();class ml{constructor(){this.easyConditions=[],this.mediumConditions=[],this.hardConditions=[]}containsCondition(n){var e=!1;return this.easyConditions.length>0&&this.easyConditions.some(i=>$t[i]===n)&&(e=!0),this.mediumConditions.length>0&&this.mediumConditions.some(i=>gi[i]===n)&&(e=!0),this.hardConditions.length>0&&this.hardConditions.some(i=>cr[i]===n)&&(e=!0),e}}var Gt=(()=>{return(t=Gt||(Gt={}))[t.Sunny=0]="Sunny",t[t.Rainy=1]="Rainy",t[t.Stormy=2]="Stormy",t[t.Snowfall=3]="Snowfall",t[t.Maelstrom=4]="Maelstrom",t[t.Hailstorm=5]="Hailstorm",t[t.Ashfall=6]="Ashfall",t[t.Torrid=7]="Torrid",Gt;var t})(),Lt=(()=>{return(t=Lt||(Lt={}))[t.Regular=0]="Regular",t[t.S=1]="S",t[t.Bumps=2]="Bumps",t[t.Crevasse=3]="Crevasse",t[t.Gaps=4]="Gaps",t[t.Waves=5]="Waves",t[t.Dive=6]="Dive",t[t.Cavern=7]="Cavern",t[t.Hills=8]="Hills",t[t.FirstRegular=9]="FirstRegular",t[t.LastRegular=10]="LastRegular",t[t.SteppingStones=11]="SteppingStones",Lt;var t})(),Ya=(()=>{return(t=Ya||(Ya={}))[t.None=0]="None",t[t.Low=.8]="Low",t[t.Medium=.6]="Medium",t[t.High=.4]="High",Ya;var t})();class Nr{constructor(n){this.didAnimalStumble=!1,this.didAnimalLoseFocus=!1,this.checkedForBurst=!1,this.checkedForMiniBurst=!1,this.checkedForNineTails=!1,null!=n&&(this.routeDesign=n,this.setStumbleFields()),this.driftAmount=0,this.isSpecialPath=!1}setStumbleFields(){return this.currentStumbleOpportunity=0,this.routeDesign===Lt.Regular&&(this.stumbleSeverity=Ya.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Lt.S&&(this.isSpecialPath=!0,this.stumbleSeverity=Ya.Low,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Lt.Bumps&&(this.isSpecialPath=!0,this.stumbleSeverity=Ya.Medium,this.frequencyOfStumble=20,this.stumbleOpportunities=8),this.routeDesign===Lt.Crevasse&&(this.isSpecialPath=!0,this.stumbleSeverity=Ya.High,this.frequencyOfStumble=80,this.stumbleOpportunities=6),this.routeDesign===Lt.Gaps&&(this.isSpecialPath=!0,this.stumbleSeverity=Ya.Medium,this.frequencyOfStumble=175,this.stumbleOpportunities=4),this.routeDesign===Lt.Waves&&(this.isSpecialPath=!0,this.stumbleSeverity=Ya.Medium,this.frequencyOfStumble=50,this.stumbleOpportunities=6),this.routeDesign===Lt.Dive&&(this.isSpecialPath=!0,this.stumbleSeverity=Ya.High,this.frequencyOfStumble=200,this.stumbleOpportunities=2),this.routeDesign===Lt.Cavern&&(this.isSpecialPath=!0,this.stumbleSeverity=Ya.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Lt.Hills&&(this.isSpecialPath=!0,this.stumbleSeverity=Ya.High,this.frequencyOfStumble=120,this.stumbleOpportunities=3,this.frequencyOfDrift=250),(this.routeDesign===Lt.FirstRegular||this.routeDesign===Lt.LastRegular)&&(this.isSpecialPath=!0,this.stumbleSeverity=Ya.Medium,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Lt.SteppingStones&&(this.isSpecialPath=!0,this.stumbleSeverity=Ya.High,this.frequencyOfStumble=60,this.stumbleOpportunities=10),this}}class Kn{constructor(n){var e=.8,r=1.2;this.maxSpeedModifier=1,this.accelerationModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1,null!==n&&(this.terrainType=n,n===Gt.Sunny&&(this.staminaModifier=1.5,this.maxSpeedModifier=r),n===Gt.Rainy&&(this.adaptabilityModifier=e,this.focusModifier=r),n===Gt.Stormy&&(this.focusModifier=e,this.accelerationModifier=r),n===Gt.Maelstrom&&(this.accelerationModifier=e,this.maxSpeedModifier=e,this.adaptabilityModifier=r),n===Gt.Hailstorm&&(this.focusModifier=e,this.adaptabilityModifier=e,this.maxSpeedModifier=e),n===Gt.Ashfall&&(this.staminaModifier=r,this.accelerationModifier=e,this.powerModifier=e),n===Gt.Snowfall&&(this.staminaModifier=e,this.maxSpeedModifier=e,this.accelerationModifier=e),n===Gt.Torrid&&(this.powerModifier=e,this.maxSpeedModifier=e,this.focusModifier=r))}getTerrainType(){return Gt[this.terrainType]}}class fr{constructor(n,e){this.legComplete=!1,null!=n&&(this.courseType=n),void 0!==e&&null!=e&&(this.distance=e),this.pathData=[]}getCourseTypeName(){return Ve[this.courseType]}getCourseTypeClass(){return this.courseType===Ve.Flatland?"flatlandColor":this.courseType===Ve.Mountain?"mountainColor":this.courseType===Ve.Ocean?"waterColor":this.courseType===Ve.Tundra?"tundraColor":this.courseType===Ve.Volcanic?"volcanicColor":""}getTerrainName(){return null==this.terrain?"":Gt[this.terrain.terrainType]}}se([ei(()=>Nr),Re("design:type",Array)],fr.prototype,"pathData",void 0),se([ei(()=>Kn),Re("design:type",Kn)],fr.prototype,"terrain",void 0);class v0{constructor(){this.distanceCoveredByFrame=[],this.velocityByFrame=[],this.timeToCompleteByFrame=[],this.maxSpeedByFrame=[],this.staminaPercentByFrame=[],this.racerEffectByFrame=[],this.yAdjustmentByFrame=[],this.lavaFallPercentByFrame=[],this.racePositionByFrame=[]}}class Fr{constructor(n,e,i,r,a,c,d,m,_,T,A,q){this.raceLegs=n,this.requiredRank=e,this.isCircuitRace=i,this.raceId=r,this.length=a,this.timeToComplete=c,this.raceUI=new v0,this.circuitIncreaseReward=["",""],null!=d&&(this.rewards=d),null!=m&&(this.localRaceType=m),null!=_&&(this.trackRaceType=_),null!=T&&(this.raceType=T),null!=A&&(this.eventRaceType=A),null!=q&&(this.drawnObjects=q)}makeCopy(n){var e=new Fr(n.raceLegs,n.requiredRank,n.isCircuitRace,n.raceId,n.length,n.timeToComplete,n.rewards,n.localRaceType,n.trackRaceType,n.raceType,n.eventRaceType,n.drawnObjects);return n.raceUI.velocityByFrame.length>0&&n.raceUI.velocityByFrame.forEach(i=>{e.raceUI.velocityByFrame.push(i)}),n.raceUI.staminaPercentByFrame.length>0&&n.raceUI.staminaPercentByFrame.forEach(i=>{e.raceUI.staminaPercentByFrame.push(i)}),e}reduceExportSize(){this.raceUI=new v0}}se([ei(()=>fr),Re("design:type",Array)],Fr.prototype,"raceLegs",void 0),se([ei(()=>Je),Re("design:type",Array)],Fr.prototype,"rewards",void 0),se([ei(()=>v0),Re("design:type",v0)],Fr.prototype,"raceUI",void 0),se([ei(()=>rM),Re("design:type",Array)],Fr.prototype,"drawnObjects",void 0),se([ei(()=>ml),Re("design:type",ml)],Fr.prototype,"pinnacleConditions",void 0);class m0{constructor(){this.affectsAllRacers=!1}makeCopy(){var n=new m0;return n.isMultiplicative=this.isMultiplicative,n.remainingRelayMeters=this.remainingRelayMeters,n.relayAffectedStatRatios=new It(this.relayAffectedStatRatios.topSpeed,this.relayAffectedStatRatios.acceleration,this.relayAffectedStatRatios.endurance,this.relayAffectedStatRatios.power,this.relayAffectedStatRatios.focus,this.relayAffectedStatRatios.adaptability),n.effectType=this.effectType,n.additionalValue=this.additionalValue,n.affectsAllRacers=this.affectsAllRacers,n}}class ha{constructor(){this.rankDistanceMultiplier=1,this.isRunning=!1,this.initialSetupComplete=!1,this.animalAlreadyPrepped=!1,this.mountainEndingY=0,this.mountainClimbPercent=0,this.exhaustionMoraleUpdateCounter=0,this.weatherClusterUpdateCounter=0,this.triggerEnergyFloorRelay=!1,this.weekStartDay=2,this.weekStartHour=9,this.weekEndDay=4,this.weekEndHour=12,this.weekendStartDay=5,this.weekendStartHour=20,this.weekendEndDay=0,this.weekendEndHour=23,this.distanceCovered=0,this.grandPrixTimeLength=183600,this.segmentTime=120,this.segmentTimeCounter=0,this.overallTimeCounter=0,this.delayCatchingUpTimeCounter=0,this.rank="Z",this.animalData=[],this.queuedRelayEffects=[],this.bonusTime=0,this.remainingRewards=0,this.totalRewards=0,this.foodRewardsObtained=0,this.coinRewardsObtained=0,this.renownRewardsObtained=0,this.tokenRewardsObtained=0,this.isGrandPrixCompleted=!1,this.remainingEventRaceTime=0,this.eventAbilityData=new Om,this.isCatchingUp=!1,this.isLoading=!1}}se([ei(()=>Om),Re("design:type",Om)],ha.prototype,"eventAbilityData",void 0),se([ei(()=>Kn),Re("design:type",Kn)],ha.prototype,"raceTerrain",void 0),se([ei(()=>Fr),Re("design:type",Fr)],ha.prototype,"currentRaceSegment",void 0),se([ei(()=>g0),Re("design:type",g0)],ha.prototype,"currentRaceSegmentResult",void 0),se([ei(()=>Fr),Re("design:type",Fr)],ha.prototype,"nextRaceSegment",void 0),se([ei(()=>Fr),Re("design:type",Fr)],ha.prototype,"previousRaceSegment",void 0),se([ei(()=>p0),Re("design:type",p0)],ha.prototype,"previousRaceSegmentData",void 0),se([ei(()=>nM),Re("design:type",Array)],ha.prototype,"animalData",void 0),se([ei(()=>m0),Re("design:type",Array)],ha.prototype,"queuedRelayEffects",void 0);class aM{}class b0{constructor(){this.rewards=[]}}se([ei(()=>Date),Re("design:type",Date)],b0.prototype,"expirationDate",void 0),se([ei(()=>$s),Re("design:type",Array)],b0.prototype,"rewards",void 0);class Wt{constructor(){this.isAvailable=!0,this.amountPurchased=0,this.totalShopQuantity=1,this.quantityMultiplier=1,this.numberPurchasing=1,this.purchasePrice=[],this.basePurchasePrice=[]}}class Vo{}se([ei(()=>Wt),Re("design:type",Array)],Vo.prototype,"itemList",void 0);class _0{constructor(){this.tutorialCompleted=!1,this.currentTutorialId=1,this.showTutorial=!1,this.showTrainingTrackTutorial=!0,this.showCoachingTutorial=!0,this.showScrimmageTutorial=!0}}class y0{constructor(){this.isNewSpecialRaceAvailable=!1,this.isEventRaceNowActive=!1}}class Wl{constructor(){this.settings=[]}get(n){var e=this.settings.find(i=>i[0]===n);return null!=e?e[1]:""}set(n,e){var i=this.settings.find(r=>r[0]===n);null==i?this.settings.push([n,e]):i[1]=e}}class Vm{constructor(){this.totalRaces=0,this.totalBreeds=0,this.totalMetersRaced=0,this.mostUsedAnimal="",this.mostRacedCourseType="",this.highestMaxSpeed="",this.highestAccelerationRate="",this.highestStamina="",this.highestPowerEfficiency="",this.highestFocusDistance="",this.highestAdaptabilityDistance=""}}class Nm{constructor(){this.unlockables=[]}get(n){var e=this.unlockables.find(i=>i[0]===n);return null!=e&&e[1]}set(n,e){var i=this.unlockables.find(r=>r[0]===n);null==i?this.unlockables.push([n,e]):i[1]=e}}class hr{constructor(n){this.userIsRacing=!1,this.showBreedWarning=!0,null!=n&&(this.animals=n.animals,this.barns=n.barns,this.trainingOptions=n.trainingOptions,this.circuitRaces=n.circuitRaces,this.circuitRank=n.circuitRank,this.localRaces=n.localRaces,this.resources=n.resources,this.modifiers=n.modifiers,this.shop=n.shop,this.tokenShop=n.tokenShop,this.animalDecks=n.animalDecks,this.incubator=n.incubator,this.trackedStats=n.trackedStats,this.pinnacle=n.pinnacle,this.orbStats=n.orbStats,this.redeemedCodes=n.redeemedCodes,this.eventRaceData=n.eventRaceData,this.notifications=n.notifications,this.previousEventRewards=[],this.barnOrder=n.barnOrder,this.monthlyMangoesPurchased=n.monthlyMangoesPurchased,this.nationalRaceCountdown=0,this.autoFreeRaceCounter=0,this.freeRaceCounter=0,this.freeRaceTimePeriodCounter=0)}}se([ei(()=>Ti),Re("design:type",Array)],hr.prototype,"animals",void 0),se([ei(()=>Bm),Re("design:type",Array)],hr.prototype,"barns",void 0),se([ei(()=>$s),Re("design:type",Array)],hr.prototype,"trainingOptions",void 0),se([ei(()=>Fr),Re("design:type",Array)],hr.prototype,"circuitRaces",void 0),se([ei(()=>Fr),Re("design:type",Array)],hr.prototype,"localRaces",void 0),se([ei(()=>aM),Re("design:type",aM)],hr.prototype,"pinnacle",void 0),se([ei(()=>Je),Re("design:type",Array)],hr.prototype,"resources",void 0),se([ei(()=>ze),Re("design:type",Array)],hr.prototype,"modifiers",void 0),se([ei(()=>Vo),Re("design:type",Array)],hr.prototype,"shop",void 0),se([ei(()=>Vo),Re("design:type",Array)],hr.prototype,"tokenShop",void 0),se([ei(()=>h0),Re("design:type",Array)],hr.prototype,"animalDecks",void 0),se([ei(()=>Wl),Re("design:type",Wl)],hr.prototype,"keybinds",void 0),se([ei(()=>Wl),Re("design:type",Wl)],hr.prototype,"settings",void 0),se([ei(()=>Nm),Re("design:type",Nm)],hr.prototype,"unlockables",void 0),se([ei(()=>Od),Re("design:type",Od)],hr.prototype,"incubator",void 0),se([ei(()=>Vm),Re("design:type",Vm)],hr.prototype,"trackedStats",void 0),se([ei(()=>$l),Re("design:type",$l)],hr.prototype,"orbStats",void 0),se([ei(()=>_0),Re("design:type",_0)],hr.prototype,"tutorials",void 0),se([ei(()=>b0),Re("design:type",Array)],hr.prototype,"redeemedCodes",void 0),se([ei(()=>ha),Re("design:type",ha)],hr.prototype,"eventRaceData",void 0),se([ei(()=>Je),Re("design:type",Array)],hr.prototype,"previousEventRewards",void 0),se([ei(()=>y0),Re("design:type",y0)],hr.prototype,"notifications",void 0),se([ei(()=>ml),Re("design:type",ml)],hr.prototype,"pinnacleHistory",void 0),se([ei(()=>ml),Re("design:type",Object)],hr.prototype,"currentPinnacleConditions",void 0);var Ut=(()=>{return(t=Ut||(Ut={}))[t.ShortTrackRunning=0]="ShortTrackRunning",t[t.Sprints=1]="Sprints",t[t.TrailRunning=2]="TrailRunning",t[t.MoveLogs=3]="MoveLogs",t[t.Footwork=4]="Footwork",t[t.PracticeCommands=5]="PracticeCommands",t[t.ScentTraining=6]="ScentTraining",t[t.SmallWagonTow=7]="SmallWagonTow",t[t.Sidestep=8]="Sidestep",t[t.MediumTrackRunning=9]="MediumTrackRunning",t[t.UphillRun=10]="UphillRun",t[t.Puzzles=11]="Puzzles",t[t.MoveRocks=12]="MoveRocks",t[t.LateralVerticalDrill=13]="LateralVerticalDrill",t[t.DodgeBall=14]="DodgeBall",t[t.BurstPractice=15]="BurstPractice",t[t.Acrobatics=16]="Acrobatics",t[t.LongTrackRunning=17]="LongTrackRunning",t[t.VehicleTow=18]="VehicleTow",t[t.LogJump=19]="LogJump",t[t.Meditation=20]="Meditation",t[t.WindSprints=21]="WindSprints",t[t.GreenwayHike=22]="GreenwayHike",t[t.Marathon=23]="Marathon",t[t.AgilityCourse=24]="AgilityCourse",Ut;var t})(),oM=H(340);let Lr=(()=>{class t{constructor(e){this.sanitizer=e}getRandomSeededInteger(e,i,r="seeded"){var a=oM(r);return Math.round(a()*(i-e)+e)}getRandomInteger(e,i){return e-=.500000001,i+=.499999999,Math.round(Math.random()*(i-e)+e)}getRandomSeededNumber(e,i,r="seeded"){return oM(r)()*(i-e)+e}getRandomNumber(e,i){return Math.random()*(i-e)+e}getRandomNumberPercent(){return 99*Math.random()+1}getNumericValueOfCircuitRank(e){var i=0;return e.length>1&&(i=26*(e.length-1)),i+(91-e.charCodeAt(e.length-1))}getCircuitRankFromNumericValue(e){for(var i="";e>26;)i+="A",e-=26;return i+String.fromCharCode(91-e)}getHoursRemainingFromSeconds(e){return Math.floor(e/3600)}getMinutesLeftInHourRemainingFromSeconds(e){var i=Math.floor(e/3600);return Math.floor(e/60-60*i)}getSecondsLeftInMinuteRemainingFromSeconds(e){var i=Math.floor(e/3600);return e-60*i*60-60*Math.floor(e/60-60*i)}convertSecondsToHHMMSS(e){var i=Math.floor(e/3600),r=Math.floor(e/60-60*i),a=e-60*i*60-60*r,c=i.toString(),d=r.toString(),m=Math.floor(a).toString();return i<10&&(c=i<1||i>59?"00":String(c).padStart(2,"0")),r<10&&(d=r<1||r>59?"00":String(d).padStart(2,"0")),a<10&&(m=a<1||a>59?"00":String(m).padStart(2,"0")),c+":"+d+":"+m}convertSecondsToMMSS(e){var i=Math.floor(e/3600),r=Math.floor(e/60-60*i),a=e-60*i*60-60*r,c=i.toString(),d=r.toString(),m=Math.floor(a).toString();return i<10&&(c=i<1||i>59?"00":String(c).padStart(2,"0")),r<10&&(d=r<1||r>59?"00":String(d).padStart(2,"0")),a<10&&(m=a<1||a>59?"00":String(m).padStart(2,"0")),d+":"+m}getClosestWholeNumber(e,i){return i/Math.floor(i/e)}getDayOfWeekFromNumber(e){return e<=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].length-1?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]:""}getAmPmTimeFromHours(e){return 0===e?"12:00 AM":e<12?e+":00 AM":12===e?"12:00 PM":e-12+":00 PM"}get24HourFormat(e){return e<=9?"0"+e+":00":e+":00"}convertDegreesToRadians(e){return e*(Math.PI/180)}reduceToProperUnits(e){for(var i="",r=0;e.toString().length>3&&r<8;)e/=1e3,e=Math.round(e),r+=1;return i=e.toString(),0===r&&(i+=" m"),1===r&&(i+=" km"),2===r&&(i+=" Mm"),3===r&&(i+=" Gm"),4===r&&(i+=" Tm"),5===r&&(i+=" Pm"),6===r&&(i+=" Em"),7===r&&(i+=" Zm"),8===r&&(i+=" Ym"),i}getSanitizedHtml(e){var i=this.sanitizer.sanitize(vn.HTML,this.sanitizer.bypassSecurityTrustHtml(e));return null===i?"":i}addDaysToDate(e,i){var r=new Date(e);return r.setDate(r.getDate()+i),r}shadeColor(e,i){return"#"+e.replace(/^#/,"").replace(/../g,a=>("0"+Math.min(255,Math.max(0,parseInt(a,16)+i)).toString(16)).substr(-2))}getProperNoun(e){return e.charAt(0).toUpperCase()+e.slice(1)}condenseList(e){var i=[];return e.forEach(r=>{if(i.some(c=>c.name===r.name))i.find(c=>c.name===r.name).amount+=r.amount;else{var a=r.makeCopy(r);i.push(a)}}),i}ordinalSuffixOf(e){var i=e%10,r=e%100;return 1==i&&11!=r?e+"st":2==i&&12!=r?e+"nd":3==i&&13!=r?e+"rd":e+"th"}}return t.\u0275fac=function(e){return new(e||t)(Ft(dl))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Fm=(()=>{class t{constructor(){}initializeShop(){}initializeResource(e,i,r){return new Je(e,i,r)}initializeTraining(e){var i=new $s;return e===Ut.ShortTrackRunning&&(i.trainingName="Short Track Running",i.isAvailable=!0,i.facilitySize=_i.Small,i.timeToComplete=30,i.trainingType=Ut.ShortTrackRunning,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(1,0,0,0,0,0)),e===Ut.Sprints&&(i.trainingName="Sprints",i.isAvailable=!0,i.facilitySize=_i.Small,i.timeToComplete=20,i.trainingType=Ut.Sprints,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,1,0,0,0,0)),e===Ut.TrailRunning&&(i.trainingName="Trail Running",i.isAvailable=!0,i.facilitySize=_i.Small,i.timeToComplete=45,i.trainingType=Ut.TrailRunning,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(.5,0,1,0,0,0)),e===Ut.MoveLogs&&(i.trainingName="Move Logs",i.isAvailable=!1,i.facilitySize=_i.Small,i.timeToComplete=30,i.trainingType=Ut.MoveLogs,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,0,0,1,0,0)),e===Ut.Footwork&&(i.trainingName="Footwork",i.isAvailable=!1,i.facilitySize=_i.Small,i.timeToComplete=45,i.trainingType=Ut.Footwork,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,.25,0,0,0,1)),e===Ut.PracticeCommands&&(i.trainingName="Practice Commands",i.isAvailable=!1,i.facilitySize=_i.Small,i.timeToComplete=40,i.trainingType=Ut.PracticeCommands,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,0,0,0,1,.25)),e===Ut.ScentTraining&&(i.trainingName="Scent Training",i.isAvailable=!1,i.facilitySize=_i.Small,i.timeToComplete=45,i.trainingType=Ut.ScentTraining,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,0,.5,0,1,0)),e===Ut.SmallWagonTow&&(i.trainingName="Small Wagon Tow",i.isAvailable=!1,i.facilitySize=_i.Small,i.timeToComplete=45,i.trainingType=Ut.SmallWagonTow,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(.25,0,0,1.5,0,0)),e===Ut.Sidestep&&(i.trainingName="Sidestep",i.isAvailable=!1,i.facilitySize=_i.Small,i.timeToComplete=35,i.trainingType=Ut.Sidestep,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,2,0,0,0,0)),e===Ut.MediumTrackRunning&&(i.trainingName="Medium Track Running",i.isAvailable=!1,i.facilitySize=_i.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Ut.MediumTrackRunning,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(2,0,1,0,0,0)),e===Ut.UphillRun&&(i.trainingName="Uphill Run",i.isAvailable=!1,i.facilitySize=_i.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Ut.UphillRun,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,1,2,0,0,0)),e===Ut.Puzzles&&(i.trainingName="Puzzles",i.isAvailable=!1,i.facilitySize=_i.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Ut.Puzzles,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,0,0,0,2,1)),e===Ut.MoveRocks&&(i.trainingName="Move Rocks",i.isAvailable=!1,i.facilitySize=_i.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Ut.MoveRocks,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,1,0,2,0,0)),e===Ut.DodgeBall&&(i.trainingName="Dodge Ball",i.isAvailable=!1,i.facilitySize=_i.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Ut.DodgeBall,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,2.5,0,0,0,1)),e===Ut.LateralVerticalDrill&&(i.trainingName="Lateral Vertical Drill",i.isAvailable=!1,i.facilitySize=_i.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Ut.LateralVerticalDrill,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(1.5,0,0,0,2,0)),e===Ut.BurstPractice&&(i.trainingName="Burst Practice",i.isAvailable=!1,i.facilitySize=_i.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Ut.BurstPractice,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,0,0,1.5,1.5,1.5)),e===Ut.Acrobatics&&(i.trainingName="Acrobatics",i.isAvailable=!1,i.facilitySize=_i.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Ut.Acrobatics,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(.5,0,.5,3,0,0)),e===Ut.LongTrackRunning&&(i.trainingName="Long Track Running",i.isAvailable=!1,i.facilitySize=_i.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ut.LongTrackRunning,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(5,0,0,0,2,0)),e===Ut.VehicleTow&&(i.trainingName="Vehicle Tow",i.isAvailable=!1,i.facilitySize=_i.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ut.VehicleTow,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,0,2,5,0,0)),e===Ut.LogJump&&(i.trainingName="Log Jump",i.isAvailable=!1,i.facilitySize=_i.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ut.LogJump,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(1,1,0,0,0,5)),e===Ut.Meditation&&(i.trainingName="Meditation",i.isAvailable=!1,i.facilitySize=_i.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ut.Meditation,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,0,0,2,5,0)),e===Ut.WindSprints&&(i.trainingName="Wind Sprints",i.isAvailable=!1,i.facilitySize=_i.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ut.WindSprints,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(2,5,0,0,0,0)),e===Ut.GreenwayHike&&(i.trainingName="Greenway Hike",i.isAvailable=!1,i.facilitySize=_i.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ut.GreenwayHike,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,0,5,0,0,2)),e===Ut.Marathon&&(i.trainingName="Marathon",i.isAvailable=!1,i.facilitySize=_i.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=Ut.Marathon,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(0,2,3,0,3,0)),e===Ut.AgilityCourse&&(i.trainingName="Agility Course",i.isAvailable=!1,i.facilitySize=_i.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=Ut.AgilityCourse,i.trainingCourseType=Ve.Flatland,i.statGain=1,i.affectedStatRatios=new It(3,0,0,2,0,3)),i}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Li=(()=>{return(t=Li||(Li={}))[t.Track=0]="Track",t[t.Free=1]="Free",t[t.Mono=2]="Mono",t[t.Duo=3]="Duo",t[t.Rainbow=4]="Rainbow",t[t.Pinnacle=5]="Pinnacle",Li;var t})(),ri=(()=>{return(t=ri||(ri={}))[t.none=0]="none",t[t.headband=1]="headband",t[t.redBaton=2]="redBaton",t[t.blueBaton=3]="blueBaton",t[t.violetBaton=4]="violetBaton",t[t.orangeBaton=5]="orangeBaton",t[t.greenBaton=6]="greenBaton",t[t.yellowBaton=7]="yellowBaton",t[t.quickSnack=8]="quickSnack",t[t.blinders=9]="blinders",t[t.pendant=10]="pendant",t[t.carrotOnAStick=11]="carrotOnAStick",t[t.scaryMask=12]="scaryMask",t[t.runningShoes=13]="runningShoes",t[t.incense=14]="incense",t[t.athleticTape=15]="athleticTape",ri;var t})();const Lm={name:"white",properties:{"--foreground-default":"#000000","--foreground-secondary":"#1B1B1B","--foreground-tertiary":"#a6a49d","--foreground-quaternary":"#2F2F2F","--foreground-light":"#000000","--background-default":"#FCFCFC","--background-secondary":"#FFFFFF","--background-tertiary":"#C4C4C4","--background-quarternary":"#ACAFB4","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#8105fc","--specialityKeywordColor":"#050efc","--equipmentKeywordColor":"#1B7F02","--amberColor":"#C25E0E","--amethystColor":"#7b2bcc","--emeraldColor":"#28643C","--rubyColor":"#9b111e","--sapphireColor":"#2554C7","--topazColor":"#ffe600","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},Um={name:"light",properties:{"--foreground-default":"#08090A","--foreground-secondary":"#41474D","--foreground-tertiary":"#797C80","--foreground-quaternary":"#F4FAFF","--foreground-light":"#41474D","--background-default":"#F4FAFF","--background-secondary":"#A3B9CC","--background-tertiary":"#5C7D99","--background-quarternary":"#65799E","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#BF6200","--mountainColor":"#228D0F","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#266A80","--volcanicColor":"#C70604","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#064064","--equipmentKeywordColor":"#2C6854","--amberColor":"#C25E0E","--amethystColor":"#7b2bcc","--emeraldColor":"#28643C","--rubyColor":"#9b111e","--sapphireColor":"#2554C7","--topazColor":"#ffe600","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},Hm={name:"twilight",properties:{"--foreground-default":"#ED8B42","--foreground-secondary":"#C05100","--foreground-tertiary":"#6A2D00","--foreground-quaternary":"#FFAA20","--foreground-light":"#FF8F3D","--background-default":"#5D0274","--background-secondary":"#210129","--background-tertiary":"#14001A","--background-quarternary":"#4F223C","--background-light":"#72028D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#000000","--equipmentKeywordColor":"#2C6854","--amberColor":"#C25E0E","--amethystColor":"#7b2bcc","--emeraldColor":"#28643C","--rubyColor":"#9b111e","--sapphireColor":"#2554C7","--topazColor":"#ffe600","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},Vd={name:"night",properties:{"--foreground-default":"#A3B9CC","--foreground-secondary":"#5C7D99","--foreground-tertiary":"#49647A","--foreground-quaternary":"#E5E5E5","--foreground-light":"#FFFFFF","--background-default":"#797C80","--background-secondary":"#41474D","--background-tertiary":"#08090A","--background-quarternary":"##2A2C31","--background-light":"#41474D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#E18B07","--mountainColor":"#30b001","--waterColor":"#9289CF","--waterSubcolor":"#5044ab","--tundraColor":"#019DDE","--volcanicColor":"#E56C6E","--resourceKeywordColor":"#EAAD91","--progressionKeywordColor":"#ABB5DC","--specialityKeywordColor":"#5DBDF6","--equipmentKeywordColor":"#83C2A6","--amberColor":"#F67612","--amethystColor":"#E65DD8","--emeraldColor":"#50C878","--rubyColor":"#f2021a","--sapphireColor":"#799EFB","--topazColor":"#ffe600","--background-tertiary-shadow":"0 1px 3px 0 rgba(8, 9, 10, 0.5)"}};let Xl=(()=>{class t{constructor(){this.active=Vd,this.availableThemes=[Lm,Um,Hm,Vd]}getAvailableThemes(){return this.availableThemes}getActiveTheme(){return this.active}getActiveThemeName(){var e="";return e=this.active.name,this.active===Vd&&(e="night"),this.active===Um&&(e="light"),this.active===Lm&&(e="white"),this.active===Hm&&(e="twilight"),e}setNightTheme(){return this.setActiveTheme(Vd)}setLightTheme(){return this.setActiveTheme(Um)}setTwilightTheme(){return this.setActiveTheme(Hm)}setWhiteTheme(){return this.setActiveTheme(Lm)}setActiveTheme(e){return this.active=e,Object.keys(this.active.properties).forEach(i=>{document.documentElement.style.setProperty(i,this.active.properties[i])}),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var No=(()=>{return(t=No||(No={}))[t.draw=0]="draw",t[t.text=1]="text",t[t.both=2]="both",No;var t})(),Hn=(()=>{return(t=Hn||(Hn={}))[t.practice=0]="practice",t[t.novice=1]="novice",t[t.intermediate=2]="intermediate",t[t.master=3]="master",t[t.legacy=4]="legacy",Hn;var t})(),xt=(()=>{return(t=xt||(xt={}))[t.circuit=0]="circuit",t[t.special=1]="special",t[t.event=2]="event",t[t.trainingTrack=3]="trainingTrack",xt;var t})(),zt=(()=>{return(t=zt||(zt={}))[t.grandPrix=0]="grandPrix",zt;var t})(),ba=(()=>{return(t=ba||(ba={}))[t.clearSkies=0]="clearSkies",t[t.inclementWeather=1]="inclementWeather",t[t.coldSpell=2]="coldSpell",ba;var t})(),zi=(()=>{return(t=zi||(zi={}))[t.rubyBrazier=0]="rubyBrazier",t[t.amberBrazier=1]="amberBrazier",t[t.topazBrazier=2]="topazBrazier",t[t.amethystBrazier=3]="amethystBrazier",t[t.sapphireBrazier=4]="sapphireBrazier",t[t.emeraldBrazier=5]="emeraldBrazier",zi;var t})();let ki=(()=>{class t{constructor(e,i,r){this.utilityService=e,this.initializeService=i,this.themeService=r,this.globalVar=new hr}initializeGlobalVariables(){this.globalVar.animals=[],this.globalVar.trainingOptions=[],this.globalVar.circuitRaces=[],this.globalVar.localRaces=[],this.globalVar.resources=[],this.globalVar.modifiers=[],this.globalVar.animalDecks=[],this.globalVar.barns=[],this.globalVar.redeemedCodes=[],this.globalVar.keybinds=new Wl,this.globalVar.settings=new Wl,this.globalVar.unlockables=new Nm,this.globalVar.incubator=new Od,this.globalVar.trackedStats=new Vm,this.globalVar.orbStats=new $l,this.globalVar.tutorials=new _0,this.globalVar.previousEventRewards=[],this.globalVar.eventRaceData=new ha,this.globalVar.pinnacleHistory=new ml,this.globalVar.currentPinnacleConditions=void 0,this.globalVar.userIsRacing=!1,this.globalVar.nationalRaceCountdown=0,this.globalVar.autoFreeRaceCounter=0,this.globalVar.freeRaceCounter=0,this.globalVar.freeRaceTimePeriodCounter=0,this.globalVar.lastTimeStamp=Date.now(),this.globalVar.currentVersion=1.25,this.globalVar.startingVersion=1.25,this.globalVar.startDate=new Date,this.globalVar.notifications=new y0,this.globalVar.relayEnergyFloor=50,this.globalVar.doNotRelayBelowEnergyFloor=!1,this.globalVar.barnOrder=[],this.globalVar.monthlyMangoesPurchased=0,this.InitializeModifiers(),this.InitializeAnimals(),this.InitializeRelayTeams(),this.InitializeGlobalTrainingOptions(),this.InitializeShop(),this.InitializeTokenShop(),this.InitializeBarns(),this.globalVar.circuitRank="Z",this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),this.checkCircuitRankRewards(),this.globalVar.monoRank="Z",this.globalVar.duoRank="Z",this.globalVar.rainbowRank="Z",this.globalVar.pinnacleFloor="Z",this.GenerateLocalRaces(),this.InitializeResources(),this.InitializeSettings(),this.InitializeUnlockables(),this.InitializeKeybinds()}InitializeModifiers(){this.globalVar.modifiers.push(new ze(250,"monthlyMangoDefaultLimit")),this.globalVar.modifiers.push(new ze(.2,"staminaModifier")),this.globalVar.modifiers.push(new ze(.9,"exhaustionStatLossModifier")),this.globalVar.modifiers.push(new ze(.3,"exhaustionStatLossMinimumModifier")),this.globalVar.modifiers.push(new ze(5,"trainingBreedGaugeIncrease")),this.globalVar.modifiers.push(new ze(10,"circuitBreedGaugeIncrease")),this.globalVar.modifiers.push(new ze(1,"localBreedGaugeIncrease")),this.globalVar.modifiers.push(new ze(.5,"trainingTrackPaceModifier")),this.globalVar.modifiers.push(new ze(.05,"breedLevelStatModifier")),this.globalVar.modifiers.push(new ze(10,"breedGaugeMaxIncreaseModifier")),this.globalVar.modifiers.push(new ze(.001,"incubatorUpgradeIncreaseModifier")),this.globalVar.modifiers.push(new ze(5,"facilityLevelModifier")),this.globalVar.modifiers.push(new ze(.02,"animalHandlerModifier")),this.globalVar.modifiers.push(new ze(.01,"stopwatchModifier")),this.globalVar.modifiers.push(new ze(.1,"racerMapsModifier")),this.globalVar.modifiers.push(new ze(50,"freeRacesToMedalModifier")),this.globalVar.modifiers.push(new ze(25,"nationalRacesToMedalModifier")),this.globalVar.modifiers.push(new ze(10,"internationalRacesToMedalModifier")),this.globalVar.modifiers.push(new ze(.75,"moneyMarkPaceModifier")),this.globalVar.modifiers.push(new ze(1.25,"moneyMarkRewardModifier")),this.globalVar.modifiers.push(new ze(5,"whistleModifier")),this.globalVar.modifiers.push(new ze(10,"goldenWhistleModifier")),this.globalVar.modifiers.push(new ze(.1,"breedingGroundsSpecializationModifier")),this.globalVar.modifiers.push(new ze(300,"attractionTimeToCollectModifier")),this.globalVar.modifiers.push(new ze(20,"attractionAmountModifier")),this.globalVar.modifiers.push(new ze(.05,"researchCenterIncrementsModifier")),this.globalVar.modifiers.push(new ze(.7,"researchCenterTrainingAnimalModifier")),this.globalVar.modifiers.push(new ze(.25,"researchCenterStudyingAnimalModifier")),this.globalVar.modifiers.push(new ze(.75,"researchCenterMaxStatGainModifier")),this.globalVar.modifiers.push(new ze(.001,"attractionRenownAmountModifier")),this.globalVar.modifiers.push(new ze(1,"trainingFacilityAbilityXpAmountModifier")),this.globalVar.modifiers.push(new ze(.1,"researchCenterRewardBonusAmountModifier")),this.globalVar.modifiers.push(new ze(.05,"breedingGroundsAdditionalAmountModifier")),this.globalVar.modifiers.push(new ze(3,"headbandEquipmentModifier")),this.globalVar.modifiers.push(new ze(1,"quickSnackEquipmentModifier")),this.globalVar.modifiers.push(new ze(.5,"blindersEquipmentModifier")),this.globalVar.modifiers.push(new ze(.9,"pendantEquipmentModifier")),this.globalVar.modifiers.push(new ze(1.1,"redBatonEquipmentModifier")),this.globalVar.modifiers.push(new ze(1.1,"blueBatonEquipmentModifier")),this.globalVar.modifiers.push(new ze(1.1,"orangeBatonEquipmentModifier")),this.globalVar.modifiers.push(new ze(1.1,"greenBatonEquipmentModifier")),this.globalVar.modifiers.push(new ze(1.1,"yellowBatonEquipmentModifier")),this.globalVar.modifiers.push(new ze(1.1,"violetBatonEquipmentModifier")),this.globalVar.modifiers.push(new ze(2,"scaryMaskEquipmentModifier")),this.globalVar.modifiers.push(new ze(1.2,"runningShoesEquipmentModifier")),this.globalVar.modifiers.push(new ze(.9,"incenseEquipmentModifier")),this.globalVar.modifiers.push(new ze(.5,"athleticTapeEquipmentModifier")),this.globalVar.modifiers.push(new ze(14400,"smallBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new ze(28800,"mediumBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new ze(43200,"largeBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new ze(5,"freeRacesPerTimePeriodModifier")),this.globalVar.modifiers.push(new ze(300,"freeRacesTimePeriodModifier")),this.globalVar.modifiers.push(new ze(28800,"autoFreeRacesMaxIdleTimePeriodModifier")),this.globalVar.modifiers.push(new ze(25e5,"metersPerCoinsGrandPrixModifier")),this.globalVar.modifiers.push(new ze(2e7,"metersPerRenownGrandPrixModifier")),this.globalVar.modifiers.push(new ze(250,"grandPrixCoinRewardModifier")),this.globalVar.modifiers.push(new ze(3,"grandPrixRenownRewardModifier")),this.globalVar.modifiers.push(new ze(5e7,"grandPrixToken1MeterModifier")),this.globalVar.modifiers.push(new ze(1e8,"grandPrixToken2MeterModifier")),this.globalVar.modifiers.push(new ze(25e7,"grandPrixToken3MeterModifier")),this.globalVar.modifiers.push(new ze(5e8,"grandPrixToken4MeterModifier")),this.globalVar.modifiers.push(new ze(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new ze(.02,"exhaustionGainGrandPrixModifier")),this.globalVar.modifiers.push(new ze(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new ze(25,"grandPrixBreedLevelRequiredModifier")),this.globalVar.modifiers.push(new ze(.5,"weatherMoraleBoostModifier")),this.globalVar.modifiers.push(new ze(.03,"focusMoraleLossModifier")),this.globalVar.modifiers.push(new ze(.02,"burstMoraleBoostModifier")),this.globalVar.modifiers.push(new ze(.01,"stumbleMoraleLossModifier")),this.globalVar.modifiers.push(new ze(.1,"segmentCompleteMoraleBoostModifier")),this.globalVar.modifiers.push(new ze(25,"abilityLevelCapModifier")),this.globalVar.modifiers.push(new ze(1.5,"feedingFrenzyPositiveModifier")),this.globalVar.modifiers.push(new ze(.9,"feedingFrenzyNegativeModifier")),this.globalVar.modifiers.push(new ze(20,"maxDriftAmountModifier")),this.globalVar.modifiers.push(new ze(4,"relayAbilityXpGainModifier")),this.globalVar.modifiers.push(new ze(25,"maximumTraitNegativePercentModifier"));var e=.3,i=.1,m=1.025,_=1.05,A=.975,q=.95;this.globalVar.modifiers.push(new ze(e*m,"horseDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i,"horseDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5.5,"horseDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1,"horseDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5*q,"horseDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5,"horseDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e*_,"cheetahDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(1.1*i,"cheetahDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(4.5,"cheetahDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1,"cheetahDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5,"cheetahDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5*A,"cheetahDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i*_,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1*m,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5*q,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i*_,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1*m,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5*q,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e*m,"warthogDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i,"warthogDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5*_,"warthogDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1*m,"warthogDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5*A,"warthogDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5*q,"warthogDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e,"monkeyDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i*q,"monkeyDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5,"monkeyDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1.1,"monkeyDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5*_,"monkeyDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5,"monkeyDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e,"goatDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i*m,"goatDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5*m,"goatDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1*A,"goatDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5*A,"goatDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5.5,"goatDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e*q,"geckoDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i,"geckoDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5*_,"geckoDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1,"geckoDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5.5,"geckoDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5,"geckoDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e*A,"dolphinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i*m,"dolphinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5,"dolphinDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1.1,"dolphinDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5,"dolphinDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5*A,"dolphinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(.33,"sharkDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i,"sharkDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5*A,"sharkDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1*m,"sharkDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5*q,"sharkDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5*q,"sharkDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e*A,"octopusDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i*q,"octopusDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5,"octopusDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1.1,"octopusDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5*m,"octopusDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5,"octopusDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(.27,"whaleDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i,"whaleDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5*_,"whaleDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1*_,"whaleDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5.5,"whaleDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5*q,"whaleDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e*q,"penguinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i,"penguinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5,"penguinDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1*m,"penguinDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5,"penguinDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5*_,"penguinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e*A,"caribouDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i*q,"caribouDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5.5,"caribouDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1*m,"caribouDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5*_,"caribouDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5,"caribouDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e,"salamanderDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i*m,"salamanderDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5*q,"salamanderDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1,"salamanderDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(5*_,"salamanderDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5,"salamanderDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ze(e*_,"foxDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ze(i,"foxDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ze(5*A,"foxDefaultStaminaModifier")),this.globalVar.modifiers.push(new ze(1*m,"foxDefaultPowerModifier")),this.globalVar.modifiers.push(new ze(4.5,"foxDefaultFocusModifier")),this.globalVar.modifiers.push(new ze(5*_,"foxDefaultAdaptabilityModifier"))}InitializeAnimals(){var e=new $B;e.name="Horse",e.isAvailable=!0,this.calculateAnimalRacingStats(e);var i=new YB;i.name="Monkey",this.calculateAnimalRacingStats(i);var r=new XB;r.name="Hare",this.calculateAnimalRacingStats(r);var a=new tM;a.name="Warthog",this.calculateAnimalRacingStats(a);var c=new WB;c.name="Cheetah",this.calculateAnimalRacingStats(c);var d=new KB;d.name="Goat",this.calculateAnimalRacingStats(d);var m=new ZB;m.name="Gecko",this.calculateAnimalRacingStats(m);var _=new QB;_.name="Dolphin",this.calculateAnimalRacingStats(_);var T=new JB;T.name="Shark",this.calculateAnimalRacingStats(T);var A=new eO;A.name="Octopus",this.calculateAnimalRacingStats(A);var q=new iM;q.name="Whale",this.calculateAnimalRacingStats(q);var Q=new tO;Q.name="Penguin",this.calculateAnimalRacingStats(Q);var te=new iO;te.name="Caribou",this.calculateAnimalRacingStats(te);var oe=new nO;oe.name="Salamander",this.calculateAnimalRacingStats(oe);var de=new rO;de.name="Fox",this.calculateAnimalRacingStats(de),this.globalVar.animals.push(e),this.globalVar.animals.push(c),this.globalVar.animals.push(r),this.globalVar.animals.push(d),this.globalVar.animals.push(i),this.globalVar.animals.push(m),this.globalVar.animals.push(_),this.globalVar.animals.push(T),this.globalVar.animals.push(A),this.globalVar.animals.push(Q),this.globalVar.animals.push(te),this.globalVar.animals.push(oe),this.globalVar.animals.push(de),this.globalVar.animals.push(a),this.globalVar.animals.push(q)}InitializeRelayTeams(){var e=new h0;e.isPrimaryDeck=!0,e.isAvailable=!0,e.name="Relay Team 1",e.deckNumber=1;var i=this.globalVar.animals.find(c=>"Horse"===c.getAnimalType());void 0!==i&&e.selectedAnimals.push(i),this.globalVar.animalDecks.push(e);for(var r=0;r<3;r++){var a=new h0;a.isAvailable=!0,a.deckNumber=r+2,a.name="Relay Team "+a.deckNumber,this.globalVar.animalDecks.push(a)}}InitializeTokenShop(){this.globalVar.tokenShop=[];var e=new Vo,i=[],r=10,a=new Wt;a.name="Apples",a.purchasePrice.push(this.getTokenResourceValue(1)),a.basePurchasePrice.push(this.getTokenResourceValue(1)),a.shortDescription="+1 Acceleration to a single animal",a.numberPurchasing=r,a.canHaveMultiples=!0,a.type=Le.Food,a.infiniteAmount=!0,i.push(a);var c=new Wt;c.name="Bananas",c.shortDescription="+1 Speed to a single animal",c.purchasePrice.push(this.getTokenResourceValue(1)),c.basePurchasePrice.push(this.getTokenResourceValue(1)),c.canHaveMultiples=!0,c.numberPurchasing=r,c.type=Le.Food,c.infiniteAmount=!0,i.push(c);var d=new Wt;d.name="Strawberries",d.shortDescription="+1 Endurance to a single animal",d.purchasePrice.push(this.getTokenResourceValue(1)),d.basePurchasePrice.push(this.getTokenResourceValue(1)),d.canHaveMultiples=!0,d.numberPurchasing=r,d.type=Le.Food,d.infiniteAmount=!0,i.push(d);var m=new Wt;m.name="Carrots",m.shortDescription="+1 Power to a single animal",m.purchasePrice.push(this.getTokenResourceValue(1)),m.basePurchasePrice.push(this.getTokenResourceValue(1)),m.canHaveMultiples=!0,m.numberPurchasing=r,m.type=Le.Food,m.infiniteAmount=!0,i.push(m);var _=new Wt;_.name="Turnips",_.shortDescription="+1 Focus to a single animal",_.purchasePrice.push(this.getTokenResourceValue(1)),_.basePurchasePrice.push(this.getTokenResourceValue(1)),_.canHaveMultiples=!0,_.numberPurchasing=r,_.type=Le.Food,_.infiniteAmount=!0,i.push(_);var T=new Wt;T.name="Oranges",T.shortDescription="+1 Adaptability to a single animal",T.purchasePrice.push(this.getTokenResourceValue(1)),T.basePurchasePrice.push(this.getTokenResourceValue(1)),T.canHaveMultiples=!0,T.numberPurchasing=r,T.type=Le.Food,T.infiniteAmount=!0,i.push(T);var A=new Wt;A.name="Circuit Race Breed XP Gain Certificate",A.shortDescription=this.getItemDescription(A.name),A.purchasePrice.push(this.getTokenResourceValue(1)),A.basePurchasePrice.push(this.getTokenResourceValue(1)),A.canHaveMultiples=!0,A.type=Le.Consumable,A.infiniteAmount=!0,i.push(A);var q=new Wt;q.name="Free Race Breed XP Gain Certificate",q.shortDescription=this.getItemDescription(q.name),q.purchasePrice.push(this.getTokenResourceValue(1)),q.basePurchasePrice.push(this.getTokenResourceValue(1)),q.canHaveMultiples=!0,q.type=Le.Consumable,q.infiniteAmount=!0,i.push(q),e.name="Tier 1",e.itemList=i,this.globalVar.tokenShop.push(e);var Q=new Vo,te=[],oe=new Wt;oe.name="Mangoes",oe.shortDescription="+1 Breed Level to a single animal",oe.purchasePrice.push(this.getTokenResourceValue(1)),oe.basePurchasePrice.push(this.getTokenResourceValue(1)),oe.canHaveMultiples=!0,oe.numberPurchasing=2,oe.type=Le.Food,oe.infiniteAmount=!0,te.push(oe);var de=new Wt;de.name="Coins",de.shortDescription="",de.purchasePrice.push(this.getTokenResourceValue(1)),de.basePurchasePrice.push(this.getTokenResourceValue(1)),de.canHaveMultiples=!0,de.numberPurchasing=5e3,de.type=Le.Resources,de.infiniteAmount=!0,te.push(de);var be=new Wt;be.name="Diminishing Returns Increase Certificate",be.shortDescription=this.getItemDescription(be.name),be.purchasePrice.push(this.getTokenResourceValue(4)),be.basePurchasePrice.push(this.getTokenResourceValue(4)),be.canHaveMultiples=!0,be.type=Le.Consumable,be.infiniteAmount=!0,te.push(be);var ce=new Wt;ce.name="Training Breed XP Gain Certificate",ce.shortDescription=this.getItemDescription(ce.name),ce.purchasePrice.push(this.getTokenResourceValue(2)),ce.basePurchasePrice.push(this.getTokenResourceValue(2)),ce.canHaveMultiples=!0,ce.type=Le.Consumable,ce.infiniteAmount=!0,te.push(ce),Q.name="Tier 2",Q.itemList=te,this.globalVar.tokenShop.push(Q);var ne=new Vo,Ae=[],Ue=new Wt;Ue.name=this.getEquipmentName(ri.scaryMask),Ue.shortDescription=this.getEquipmentDescription(Ue.name),Ue.purchasePrice.push(this.getTokenResourceValue(7)),Ue.canHaveMultiples=!0,Ue.infiniteAmount=!0,Ue.type=Le.Equipment,Ae.push(Ue);var bt=new Wt;bt.name=this.getEquipmentName(ri.runningShoes),bt.shortDescription=this.getEquipmentDescription(bt.name),bt.purchasePrice.push(this.getTokenResourceValue(7)),bt.canHaveMultiples=!0,bt.infiniteAmount=!0,bt.type=Le.Equipment,Ae.push(bt);var nt=new Wt;nt.name=this.getEquipmentName(ri.incense),nt.shortDescription=this.getEquipmentDescription(nt.name),nt.purchasePrice.push(this.getTokenResourceValue(7)),nt.canHaveMultiples=!0,nt.infiniteAmount=!0,nt.type=Le.Equipment,Ae.push(nt);var pt=new Wt;pt.name=this.getEquipmentName(ri.athleticTape),pt.shortDescription=this.getEquipmentDescription(pt.name),pt.purchasePrice.push(this.getTokenResourceValue(7)),pt.canHaveMultiples=!0,pt.infiniteAmount=!0,pt.type=Le.Equipment,Ae.push(pt),ne.name="Tier 3",ne.itemList=Ae,this.globalVar.tokenShop.push(ne)}InitializeShop(){this.globalVar.shop=[];var e=new Vo,i=[],T=new Wt;T.name="Cheetah",T.purchasePrice.push(new Je("Coins",1e3)),T.canHaveMultiples=!1,T.type=Le.Animal,i.push(T);var A=new Wt;A.name="Warthog",A.purchasePrice.push(new Je("Coins",1e3)),A.canHaveMultiples=!1,A.type=Le.Animal,i.push(A);var q=new Wt;q.name="Goat",q.purchasePrice.push(new Je("Coins",2500)),q.canHaveMultiples=!1,q.type=Le.Animal,q.isAvailable=!1,i.push(q);var Q=new Wt;Q.name="Gecko",Q.purchasePrice.push(new Je("Coins",2500)),Q.canHaveMultiples=!1,Q.type=Le.Animal,Q.isAvailable=!1,i.push(Q);var te=new Wt;te.name="Shark",te.purchasePrice.push(new Je("Coins",5e3)),te.canHaveMultiples=!1,te.type=Le.Animal,te.isAvailable=!1,i.push(te);var oe=new Wt;oe.name="Octopus",oe.purchasePrice.push(new Je("Coins",5e3)),oe.canHaveMultiples=!1,oe.type=Le.Animal,oe.isAvailable=!1,i.push(oe);var de=new Wt;de.name="Caribou",de.purchasePrice.push(new Je("Coins",1e4)),de.canHaveMultiples=!1,de.type=Le.Animal,de.isAvailable=!1,i.push(de);var be=new Wt;be.name="Fox",be.purchasePrice.push(new Je("Coins",1e4)),be.canHaveMultiples=!1,be.type=Le.Animal,be.isAvailable=!1,i.push(be),e.name="Animals",e.itemList=i,this.globalVar.shop.push(e);var ce=new Vo,ne=[],Ue=new Wt;Ue.name="Apples",Ue.purchasePrice.push(new Je("Coins",10)),Ue.canHaveMultiples=!0,Ue.type=Le.Food,Ue.infiniteAmount=!0,ne.push(Ue);var bt=new Wt;bt.name="Bananas",bt.purchasePrice.push(new Je("Coins",10)),bt.canHaveMultiples=!0,bt.type=Le.Food,bt.infiniteAmount=!0,ne.push(bt);var nt=new Wt;nt.name="Strawberries",nt.purchasePrice.push(new Je("Coins",10)),nt.canHaveMultiples=!0,nt.type=Le.Food,nt.infiniteAmount=!0,ne.push(nt);var pt=new Wt;pt.name="Carrots",pt.purchasePrice.push(new Je("Coins",10)),pt.canHaveMultiples=!0,pt.type=Le.Food,pt.infiniteAmount=!0,ne.push(pt);var lt=new Wt;lt.name="Turnips",lt.purchasePrice.push(new Je("Coins",10)),lt.canHaveMultiples=!0,lt.type=Le.Food,lt.infiniteAmount=!0,ne.push(lt);var kt=new Wt;kt.name="Oranges",kt.purchasePrice.push(new Je("Coins",10)),kt.canHaveMultiples=!0,kt.type=Le.Food,kt.infiniteAmount=!0,ne.push(kt);var At=new Wt;At.name="Mangoes",At.purchasePrice.push(new Je("Coins",100)),At.canHaveMultiples=!0,At.type=Le.Food,At.infiniteAmount=!0,ne.push(At);var Rt=new Wt;Rt.name="Gingko Leaves",Rt.purchasePrice.push(new Je("Coins",3500)),Rt.canHaveMultiples=!0,Rt.type=Le.Food,Rt.infiniteAmount=!0,Rt.isAvailable=!1,ne.push(Rt),ce.name="Food",ce.itemList=ne,this.globalVar.shop.push(ce);var Bt=new Vo,jt=[];this.globalVar.trainingOptions.filter(Rr=>!Rr.isAvailable).forEach(Rr=>{var Jn=new Wt;Jn.name=Rr.trainingName,Jn.shortDescription=Rr.getStatGainDescription(),Jn.purchasePrice.push(new Je("Coins",Rr.purchasePrice)),Jn.canHaveMultiples=!1,Jn.type=Le.Training,(Rr.facilitySize===_i.Medium||Rr.facilitySize===_i.Large)&&(Jn.isAvailable=!1,Jn.additionalIdentifier=Rr.facilitySize.toString()),jt.push(Jn)}),Bt.name="Trainings",Bt.itemList=jt,this.globalVar.shop.push(Bt);var Ui=new Vo,Ht=[];this.globalVar.animals.forEach(Rr=>{Rr.availableAbilities.forEach(Jn=>{if(!Jn.isAbilityPurchased){var ia=new Wt;ia.name=Rr.getAnimalType()+" Ability: "+Jn.name,ia.purchasePrice.push(new Je("Coins",Jn.purchasePrice)),ia.canHaveMultiples=!1,ia.type=Le.Ability,ia.additionalIdentifier=Jn.name,ia.isAvailable=Rr.isAvailable,Ht.push(ia)}})}),Ui.name="Abilities",Ui.itemList=Ht,this.globalVar.shop.push(Ui);var ai=new Vo,wi=[],yi=new Wt;yi.name="Stopwatch",yi.purchasePrice.push(this.getMedalResourceValue(10)),yi.basePurchasePrice.push(this.getMedalResourceValue(10)),yi.quantityMultiplier=2.5,yi.totalShopQuantity=2,yi.canHaveMultiples=!0,yi.type=Le.Specialty,wi.push(yi);var Ze=new Wt;Ze.name="Animal Handler",Ze.purchasePrice.push(this.getCoinsResourceValue(2e3)),Ze.basePurchasePrice.push(this.getCoinsResourceValue(2e3)),Ze.quantityAdditive=2e3,Ze.totalShopQuantity=20,Ze.canHaveMultiples=!0,Ze.type=Le.Specialty,wi.push(Ze);var fe=new Wt;fe.name="Course Maps",fe.purchasePrice.push(this.getMedalResourceValue(2)),fe.basePurchasePrice.push(this.getMedalResourceValue(2)),fe.quantityMultiplier=2,fe.totalShopQuantity=5,fe.isAvailable=!1,fe.canHaveMultiples=!0,fe.type=Le.Specialty,wi.push(fe);var oi=new Wt;oi.name="Stockbreeder",oi.purchasePrice.push(this.getCoinsResourceValue(500)),oi.basePurchasePrice.push(this.getCoinsResourceValue(500)),oi.canHaveMultiples=!1,oi.type=Le.Specialty,wi.push(oi);var fi=new Wt;fi.name="Team Manager",fi.purchasePrice.push(this.getMedalResourceValue(3)),fi.basePurchasePrice.push(this.getMedalResourceValue(3)),fi.canHaveMultiples=!0,fi.quantityMultiplier=2,fi.totalShopQuantity=19,fi.type=Le.Specialty,wi.push(fi);var Ai=new Wt;Ai.name="Scouts",Ai.purchasePrice.push(this.getCoinsResourceValue(1e4)),Ai.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),Ai.canHaveMultiples=!1,Ai.isAvailable=!1,Ai.type=Le.Specialty,wi.push(Ai);var Ki=new Wt;Ki.name="Money Mark",Ki.purchasePrice.push(this.getCoinsResourceValue(500)),Ki.basePurchasePrice.push(this.getCoinsResourceValue(500)),Ki.canHaveMultiples=!1,Ki.type=Le.Specialty,wi.push(Ki);var ti=new Wt;ti.name="National Races",ti.purchasePrice.push(this.getCoinsResourceValue(1e4)),ti.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),ti.canHaveMultiples=!1,ti.isAvailable=!1,ti.type=Le.Specialty,wi.push(ti);var Nt,en=new Wt;en.name="International Races",en.purchasePrice.push(this.getCoinsResourceValue(5e4)),en.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),en.canHaveMultiples=!1,en.isAvailable=!1,en.type=Le.Specialty,wi.push(en),(Nt=new Wt).name="Incubator Upgrade Lv1",Nt.purchasePrice.push(this.getCoinsResourceValue(5e3)),Nt.basePurchasePrice.push(this.getCoinsResourceValue(5e3)),Nt.canHaveMultiples=!1,Nt.isAvailable=!1,Nt.type=Le.Specialty,wi.push(Nt),(Nt=new Wt).name="Incubator Upgrade Lv2",Nt.purchasePrice.push(this.getCoinsResourceValue(25e3)),Nt.basePurchasePrice.push(this.getCoinsResourceValue(25e3)),Nt.canHaveMultiples=!1,Nt.isAvailable=!1,Nt.type=Le.Specialty,wi.push(Nt),(Nt=new Wt).name="Incubator Upgrade Lv3",Nt.purchasePrice.push(this.getCoinsResourceValue(1e5)),Nt.basePurchasePrice.push(this.getCoinsResourceValue(1e5)),Nt.canHaveMultiples=!1,Nt.isAvailable=!1,Nt.type=Le.Specialty,wi.push(Nt),(Nt=new Wt).name="Incubator Upgrade Lv4",Nt.purchasePrice.push(this.getCoinsResourceValue(1e6)),Nt.basePurchasePrice.push(this.getCoinsResourceValue(1e6)),Nt.canHaveMultiples=!1,Nt.isAvailable=!1,Nt.type=Le.Specialty,wi.push(Nt);var Sn=new Wt;Sn.name="Whistle",Sn.purchasePrice.push(this.getCoinsResourceValue(2500)),Sn.basePurchasePrice.push(this.getCoinsResourceValue(2500)),Sn.totalShopQuantity=1,Sn.canHaveMultiples=!1,Sn.isAvailable=!1,Sn.type=Le.Specialty,wi.push(Sn);var pr=new Wt;pr.name="Golden Whistle",pr.purchasePrice.push(this.getCoinsResourceValue(15e3)),pr.basePurchasePrice.push(this.getCoinsResourceValue(15e3)),pr.totalShopQuantity=1,pr.canHaveMultiples=!1,pr.isAvailable=!1,pr.type=Le.Specialty,wi.push(pr);var Bn=new Wt;Bn.name="Talent Point Voucher",Bn.purchasePrice.push(this.getMedalResourceValue(25)),Bn.basePurchasePrice.push(this.getMedalResourceValue(25)),Bn.infiniteAmount=!0,Bn.canHaveMultiples=!0,Bn.quantityAdditive=25,Bn.isAvailable=!1,Bn.type=Le.Specialty,wi.push(Bn);var Rn=new Wt;Rn.name="Training Facility Improvements",Rn.purchasePrice.push(this.getCoinsResourceValue(25e4)),Rn.basePurchasePrice.push(this.getCoinsResourceValue(25e4)),Rn.totalShopQuantity=1,Rn.canHaveMultiples=!1,Rn.isAvailable=!1,Rn.type=Le.Specialty,wi.push(Rn);var un=new Wt;un.name="Breeding Grounds Improvements",un.purchasePrice.push(this.getCoinsResourceValue(25e4)),un.basePurchasePrice.push(this.getCoinsResourceValue(25e4)),un.totalShopQuantity=1,un.canHaveMultiples=!1,un.isAvailable=!1,un.type=Le.Specialty,wi.push(un);var Dn=new Wt;Dn.name="Attraction Improvements",Dn.purchasePrice.push(this.getCoinsResourceValue(25e4)),Dn.basePurchasePrice.push(this.getCoinsResourceValue(25e4)),Dn.totalShopQuantity=1,Dn.canHaveMultiples=!1,Dn.isAvailable=!1,Dn.type=Le.Specialty,wi.push(Dn);var hn=new Wt;hn.name="Research Center Improvements",hn.purchasePrice.push(this.getCoinsResourceValue(25e4)),hn.basePurchasePrice.push(this.getCoinsResourceValue(25e4)),hn.totalShopQuantity=1,hn.canHaveMultiples=!1,hn.isAvailable=!1,hn.type=Le.Specialty,wi.push(hn);var dn=new Wt;dn.name="Orb Infuser",dn.purchasePrice.push(this.getCoinsResourceValue(5e6)),dn.basePurchasePrice.push(this.getCoinsResourceValue(5e6)),dn.canHaveMultiples=!1,dn.isAvailable=!1,dn.type=Le.Specialty,wi.push(dn),ai.name="Specialty",ai.itemList=wi,this.globalVar.shop.push(ai);var Ar=new Vo,ci=[],pn=new Wt;pn.name=this.getEquipmentName(ri.headband),pn.shortDescription=this.getEquipmentDescription(pn.name),pn.purchasePrice.push(this.getCoinsResourceValue(1e3)),pn.canHaveMultiples=!0,pn.infiniteAmount=!0,pn.type=Le.Equipment,ci.push(pn);var Hi=new Wt;Hi.name=this.getEquipmentName(ri.pendant),Hi.shortDescription=this.getEquipmentDescription(Hi.name),Hi.purchasePrice.push(this.getCoinsResourceValue(1e3)),Hi.canHaveMultiples=!0,Hi.infiniteAmount=!0,Hi.type=Le.Equipment,ci.push(Hi);var pi=new Wt;pi.name=this.getEquipmentName(ri.blinders),pi.shortDescription=this.getEquipmentDescription(pi.name),pi.purchasePrice.push(this.getCoinsResourceValue(1e3)),pi.canHaveMultiples=!0,pi.infiniteAmount=!0,pi.type=Le.Equipment,ci.push(pi);var Gn=new Wt;Gn.name=this.getEquipmentName(ri.quickSnack),Gn.shortDescription=this.getEquipmentDescription(Gn.name),Gn.purchasePrice.push(this.getCoinsResourceValue(1e3)),Gn.canHaveMultiples=!0,Gn.infiniteAmount=!0,Gn.type=Le.Equipment,ci.push(Gn);var tn=new Wt;tn.name=this.getEquipmentName(ri.redBaton),tn.shortDescription=this.getEquipmentDescription(tn.name),tn.purchasePrice.push(this.getCoinsResourceValue(2500)),tn.canHaveMultiples=!0,tn.infiniteAmount=!0,tn.isAvailable=!1,tn.type=Le.Equipment,ci.push(tn);var nn=new Wt;nn.name=this.getEquipmentName(ri.blueBaton),nn.shortDescription=this.getEquipmentDescription(nn.name),nn.purchasePrice.push(this.getCoinsResourceValue(2500)),nn.canHaveMultiples=!0,nn.infiniteAmount=!0,nn.isAvailable=!1,nn.type=Le.Equipment,ci.push(nn);var gr=new Wt;gr.name=this.getEquipmentName(ri.violetBaton),gr.shortDescription=this.getEquipmentDescription(gr.name),gr.purchasePrice.push(this.getCoinsResourceValue(2500)),gr.canHaveMultiples=!0,gr.infiniteAmount=!0,gr.isAvailable=!1,gr.type=Le.Equipment,ci.push(gr);var Qn=new Wt;Qn.name=this.getEquipmentName(ri.orangeBaton),Qn.shortDescription=this.getEquipmentDescription(Qn.name),Qn.purchasePrice.push(this.getCoinsResourceValue(2500)),Qn.canHaveMultiples=!0,Qn.infiniteAmount=!0,Qn.isAvailable=!1,Qn.type=Le.Equipment,ci.push(Qn);var Vn=new Wt;Vn.name=this.getEquipmentName(ri.greenBaton),Vn.shortDescription=this.getEquipmentDescription(Vn.name),Vn.purchasePrice.push(this.getCoinsResourceValue(2500)),Vn.canHaveMultiples=!0,Vn.infiniteAmount=!0,Vn.isAvailable=!1,Vn.type=Le.Equipment,ci.push(Vn);var On=new Wt;On.name=this.getEquipmentName(ri.yellowBaton),On.shortDescription=this.getEquipmentDescription(On.name),On.purchasePrice.push(this.getCoinsResourceValue(2500)),On.canHaveMultiples=!0,On.infiniteAmount=!0,On.isAvailable=!1,On.type=Le.Equipment,ci.push(On),Ar.name="Equipment",Ar.itemList=ci,this.globalVar.shop.push(Ar)}getEquipmentName(e){return e===ri.headband?"Headband":e===ri.pendant?"Pendant":e===ri.blinders?"Blinders":e===ri.quickSnack?"Quick Snack":e===ri.carrotOnAStick?"Carrot on a Stick":e===ri.redBaton?"Red Baton":e===ri.blueBaton?"Blue Baton":e===ri.violetBaton?"Violet Baton":e===ri.yellowBaton?"Yellow Baton":e===ri.greenBaton?"Green Baton":e===ri.orangeBaton?"Orange Baton":e===ri.scaryMask?"Scary Mask":e===ri.runningShoes?"Running Shoes":e===ri.incense?"Incense":e===ri.athleticTape?"Athletic Tape":""}getEquipmentEnum(e){return"Headband"===e?ri.headband:"Pendant"===e?ri.pendant:"Blinders"===e?ri.blinders:"Quick Snack"===e?ri.quickSnack:"Carrot on a Stick"===e?ri.carrotOnAStick:"Red Baton"===e?ri.redBaton:"Blue Baton"===e?ri.blueBaton:"Violet Baton"===e?ri.violetBaton:"Yellow Baton"===e?ri.yellowBaton:"Green Baton"===e?ri.greenBaton:"Orange Baton"===e?ri.orangeBaton:"Scary Mask"===e?ri.scaryMask:"Running Shoes"===e?ri.runningShoes:"Incense"===e?ri.incense:"Athletic Tape"===e?ri.athleticTape:ri.none}InitializeBarns(){if(null==this.globalVar.barns||0===this.globalVar.barns.length){this.globalVar.barns=[];var i=new Bm;if(i.barnNumber=1,i.isLocked=!1,i.size=_i.Small,i.purchasePrice=0,i.facilityUpgradePrice=500,i.upgradePrice=500,null!=this.globalVar.animals&&this.globalVar.animals.length>0){var r=this.globalVar.animals.find(d=>d.type===Fe.Horse);null!=r&&(r.associatedBarnNumber=i.barnNumber)}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.globalVar.barns.push(i);for(var a=2;a<=15;a++){var c=new Bm;c.barnNumber=a,c.isLocked=!0,c.purchasePrice=500*(a-1),c.facilityUpgradePrice=500,c.size=_i.Small,this.globalVar.barns.push(c)}this.globalVar.barns.forEach(d=>{this.globalVar.barnOrder.push(d.barnNumber)})}}InitializeGlobalTrainingOptions(){this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.ShortTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.Sprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.TrailRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.MoveLogs)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.Footwork)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.PracticeCommands)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.ScentTraining)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.SmallWagonTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.Sidestep)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.MediumTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.UphillRun)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.Puzzles)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.MoveRocks)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.LateralVerticalDrill)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.DodgeBall)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.BurstPractice)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.Acrobatics)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.LongTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.VehicleTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.LogJump)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.Meditation)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.WindSprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.GreenwayHike)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.Marathon)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ut.AgilityCourse))}IncreaseCircuitRank(){var e=this.globalVar.circuitRank,i=e.replace(/([A-Z])[^A-Z]*$/,function(_){var T=_.charCodeAt(0);return 65===T?String.fromCharCode(T)+"Z":String.fromCharCode(--T)}),r=!1;this.utilityService.getNumericValueOfCircuitRank(this.globalVar.monoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.duoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.rainbowRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),r&&(this.globalVar.notifications.isNewSpecialRaceAvailable=!0),this.globalVar.circuitRank=i;var m=this.checkCircuitRankRewards();return this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),m}IncreaseLocalRaceRank(e){var i="";e===Li.Mono&&(i=this.globalVar.monoRank),e===Li.Duo&&(i=this.globalVar.duoRank),e===Li.Rainbow&&(i=this.globalVar.rainbowRank),e===Li.Pinnacle&&(i=this.globalVar.pinnacleFloor);var r=i.replace(/([A-Z])[^A-Z]*$/,function(a){var c=a.charCodeAt(0);return 65===c?String.fromCharCode(c)+"Z":String.fromCharCode(--c)});e===Li.Mono&&(this.globalVar.monoRank=r,this.GenerateMonoRaces(this.globalVar.monoRank)),e===Li.Duo&&(this.globalVar.duoRank=r,this.GenerateDuoRaces(this.globalVar.duoRank)),e===Li.Rainbow&&(this.globalVar.rainbowRank=r,this.GenerateRainbowRaces(this.globalVar.rainbowRank)),e===Li.Pinnacle&&(this.globalVar.pinnacleFloor=r,this.GeneratePinnacleRaces(this.globalVar.pinnacleFloor))}increaseGrandPrixRaceRank(){if(null!=this.globalVar.eventRaceData){var i=this.globalVar.eventRaceData.rank.replace(/([A-Z])[^A-Z]*$/,function(a){var c=a.charCodeAt(0);return 65===c?String.fromCharCode(c)+"Z":String.fromCharCode(--c)});if(this.globalVar.eventRaceData.rank=i,this.utilityService.getNumericValueOfCircuitRank(this.globalVar.eventRaceData.rank)%5==0)this.globalVar.eventRaceData.rankDistanceMultiplier*=2;else{var r=Math.ceil(this.utilityService.getNumericValueOfCircuitRank(this.globalVar.eventRaceData.rank)/5);this.globalVar.eventRaceData.rankDistanceMultiplier+=r}this.initialGrandPrixSetup(this.globalVar.eventRaceData.rank,this.globalVar.eventRaceData.rankDistanceMultiplier),this.globalVar.eventRaceData.initialSetupComplete=!0,this.globalVar.notifications.isEventRaceNowActive=!0}}getRewardReceiveText(e){return this.globalVar.settings.get("useNumbersForCircuitRank")?"Reach circuit rank "+e+" to receive: \n":"Reach circuit rank "+this.utilityService.getCircuitRankFromNumericValue(e)+" to receive: \n"}checkCircuitRankRewards(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=["",""];if(1===e&&(this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(2)+"Mono Races"),2===e)this.globalVar.unlockables.set("monoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,i=["Mono Race",this.utilityService.getSanitizedHtml("A new race type has been unlocked! Take part in a Mono Race where you run an extended race as only one course type. Progressing through this race type generates new interest in your facility, which means it's time to make some upgrades. Gain Facility Level points from winning these races that increase your Diminishing Returns max value. <br/> <br/><em>Select this race and others like it by choosing the 'Special Race' option from the 'Races' menu.</em>")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(3)+"Coaching";else if(3===e){if(this.globalVar.unlockables.set("coaching",!0),null!=(r=this.globalVar.shop.find(At=>"Specialty"===At.name))){var a=r.itemList.find(At=>"Whistle"===At.name);null!=a&&(a.isAvailable=!0)}i=["Coaching","Take charge of your animal's training by giving them some coaching yourself. Visit a barn with an animal assigned and select 'Coach' to get started."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(4)+"Monkey"}if(4===e){var c=this.globalVar.animals.find(At=>At.type===Fe.Monkey);if(null!=c&&(c.isAvailable=!0,this.unlockAnimalAbilities(c),this.unlockOtherRaceCourseTypeAnimals(c.raceCourseType),null!=(d=this.globalVar.animalDecks.find(At=>At.isPrimaryDeck)))){var m=!1;d.selectedAnimals.forEach(At=>{At.raceCourseType===(null==c?void 0:c.raceCourseType)&&(m=!0)}),m||d.selectedAnimals.push(c)}i=["Monkey",this.getAnimalDescription("Monkey")];var _=500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+_+" Coins"}else if(5===e)_=500,null==(T=this.globalVar.resources.find(Rt=>"Coins"===Rt.name))?this.globalVar.resources.push(new Je("Coins",_)):T.amount+=_,i=[_+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(6)+"1 Team Manager";else if(6===e){_=1,null==(T=this.globalVar.resources.find(Bt=>"Team Manager"===Bt.name))?(this.globalVar.resources.push(new Je("Team Manager",_,Le.Specialty)),null!=(A=this.globalVar.animalDecks.find(Bt=>Bt.isPrimaryDeck))&&(A.autoRunFreeRace=!0)):T.amount+=_,i=[_+" Team Manager","As your popularity has grown, you've attracted some new faces to your racing facility. Each Team Manager you receive will automatically run 1 free race per reset period. Buy more from the Shop."];var q=1e3;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(7)+"Barn Specializations"}else if(7===e)this.globalVar.unlockables.set("barnSpecializations",!0),i=["Barn Specializations","As your training facility grows, so should your barns. At barn upgrade level 10, choose what direction you want your barn to progress in. Each option benefits your animals in different ways, so choose carefully."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(8)+"Headband";else if(8===e)_=1,null==(T=this.globalVar.resources.find(jt=>"Headband"===jt.name))?this.globalVar.resources.push(new Je("Headband",_,Le.Equipment)):T.amount+=_,i=[_+" Headband","Equipment can be handled when viewing an animal from the Animals tab."],q=1e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(9)+q+" Coins";else if(9===e)_=1e3,null==(T=this.globalVar.resources.find(Bt=>"Coins"===Bt.name))?this.globalVar.resources.push(new Je("Coins",_)):T.amount+=_,i=[_+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Hare";else if(10===e){var Q=this.globalVar.animals.find(At=>At.type===Fe.Hare);null!=Q&&(Q.isAvailable=!0,this.unlockAnimalAbilities(Q)),this.sortAnimalOrder(),i=["Hare",this.getAnimalDescription("Hare")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(11)+"Scrimmages"}if(11===e)this.globalVar.unlockables.set("scrimmages",!0),i=["Scrimmages",this.utilityService.getSanitizedHtml("A new coaching type has been unlocked! Scrimmages are another way to manually train your animal. Instead of directly raising their stats, you can permanently increase their default stat value after Breeding. The faster you help your animal race, the more their values will increase.<br/><br/><em>Run scrimmages by selecting 'Coach' when viewing a barn and selecting 'Scrimmage' in the upper menu.</em>")],_=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(12)+_+" Stat Increasing Food";else if(12===e)this.increaseAllFood(_=20),i=[_+" Stat Increasing Food",_+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(13)+"Barn Row 2";else if(13===e){this.globalVar.unlockables.set("barnRow2",!0),i=["Barn Row 2",""];var te=1;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(14)+"Attraction Specialization"}else if(14===e)this.globalVar.unlockables.set("attractionSpecialization",!0),i=["Attraction Specialization",this.getSpecializationDescription("Attraction")+"<br/><br/><em>Barn Specializations are available to select once you upgrade a barn to level 10.</em>"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(15)+"Dolphin";else if(15===e){var oe=this.globalVar.animals.find(At=>At.type===Fe.Dolphin);null!=oe&&(oe.isAvailable=!0,this.unlockAnimalAbilities(oe),this.unlockOtherRaceCourseTypeAnimals(oe.raceCourseType),null!=(d=this.globalVar.animalDecks.find(Rt=>Rt.isPrimaryDeck))&&(m=!1,d.selectedAnimals.forEach(Bt=>{Bt.raceCourseType===(null==oe?void 0:oe.raceCourseType)&&(m=!0)}),m||d.selectedAnimals.push(oe))),this.sortAnimalOrder(),i=["Dolphin",this.getAnimalDescription("Dolphin")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(16)+"1 Pendant"}else if(16===e)_=1,null==(T=this.globalVar.resources.find(Bt=>"Pendant"===Bt.name))?this.globalVar.resources.push(new Je("Pendant",_,Le.Equipment)):T.amount+=_,i=[_+" Pendant","Equipment can be handled when viewing an animal from the Animals tab."],_=5,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(18)+_+" Renown";else if(18===e)te=5,null==(de=this.globalVar.resources.find(Rt=>"Renown"===Rt.name))?this.globalVar.resources.push(new Je("Renown",te)):de.amount+=te,i=[te+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+"Grand Prix";else if(20===e){var A;this.globalVar.unlockables.set("grandPrix",!0),null!=(A=this.globalVar.animalDecks.find(Bt=>Bt.isPrimaryDeck))&&(A.isEventDeck=!0),i=["Grand Prix","Now that you've climbed the ranks and your racing team has turned some heads, you've received an invite to the Grand Prix invitational. Twice per week, a marathon style race runs over multiple days. Check the 'Event Races' tab to see more info."],_=50,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(22)+_+" Stat Increasing Food"}else 22===e?(this.increaseAllFood(_=50),i=[_+" Stat Increasing Food",_+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],q=1500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(23)+q+" Coins"):23===e&&(_=1500,null==(T=this.globalVar.resources.find(Bt=>"Coins"===Bt.name))?this.globalVar.resources.push(new Je("Coins",_)):T.amount+=_,i=[_+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(25)+"Whale");if(25===e){var be=this.globalVar.animals.find(At=>At.type===Fe.Whale);null!=be&&(be.isAvailable=!0,this.unlockAnimalAbilities(be)),this.sortAnimalOrder(),i=["Whale",this.getAnimalDescription("Whale")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(27)+"Duo Races"}else if(27===e)this.globalVar.unlockables.set("duoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,this.unlockTier2ShopItems(),i=["Duo Races","A new race type has been unlocked! Race in pairs to complete this long distance race. Success here will generate more interest for your facility, this time drawing in curious researchers. Gain Research Levels that improve incubator results."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(29)+"Barn Row 3";else if(29===e){this.globalVar.unlockables.set("barnRow3",!0),i=["Barn Row 3",""];var ce=2500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(30)+ce+" Coins"}else if(30===e){var ne=2500;null==(T=this.globalVar.resources.find(Bt=>"Coins"===Bt.name))?this.globalVar.resources.push(new Je("Coins",ne)):T.amount+=ne,i=[ne+" Coins",""],_=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(32)+"1 Blue Baton"}else if(32===e)_=1,null==(T=this.globalVar.resources.find(Bt=>"Blue Baton"===Bt.name))?this.globalVar.resources.push(new Je("Blue Baton",_,Le.Equipment)):T.amount+=_,i=[_+" Blue Baton","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(33)+20+" Mangoes";else if(33===e)_=20,null==(T=this.globalVar.resources.find(Bt=>"Mangoes"===Bt.name))?this.globalVar.resources.push(new Je("Mangoes",_,Le.Food)):T.amount+=_,i=[_+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(35)+"Penguin";else if(35===e){var Ue=this.globalVar.animals.find(Rt=>Rt.type===Fe.Penguin);null!=Ue&&(Ue.isAvailable=!0,this.unlockAnimalAbilities(Ue),this.unlockOtherRaceCourseTypeAnimals(Ue.raceCourseType),null!=(d=this.globalVar.animalDecks.find(Bt=>Bt.isPrimaryDeck))&&(m=!1,d.selectedAnimals.forEach(jt=>{jt.raceCourseType===(null==Ue?void 0:Ue.raceCourseType)&&(m=!0)}),m||d.selectedAnimals.push(Ue))),this.sortAnimalOrder(),i=["Penguin",this.getAnimalDescription("Penguin")+"<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getTundraDescription()+"</em>")],ce=3500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(37)+ce+" Coins"}else if(37===e)ne=3500,null==(T=this.globalVar.resources.find(Bt=>"Coins"===Bt.name))?this.globalVar.resources.push(new Je("Coins",ne)):T.amount+=ne,i=[ne+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(38)+"5 Medals";else if(38===e)null==(T=this.globalVar.resources.find(Rt=>"Medals"===Rt.name))?this.globalVar.resources.push(new Je("Medals",5)):T.amount+=5,i=["5 Medals",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(40)+"Barn Row 4";else if(40===e)this.globalVar.unlockables.set("barnRow4",!0),i=["Barn Row 4",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(41)+"Research Center Specialization";else if(41===e){if(this.globalVar.unlockables.set("researchCenterSpecialization",!0),null!=(r=this.globalVar.shop.find(Bt=>"Specialty"===Bt.name))){var nt=r.itemList.find(Bt=>"Research Center Improvements"===Bt.name);null!=nt&&(nt.isAvailable=!0)}i=["Research Center Specialization",this.getSpecializationDescription("Research Center")],_=250,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(43)+_+" Stat Increasing Food"}else if(43===e)this.increaseAllFood(_=250),i=[_+" Stat Increasing Food",_+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(45)+"Salamander";else if(45===e){var d,pt=this.globalVar.animals.find(Rt=>Rt.type===Fe.Salamander);null!=pt&&(pt.isAvailable=!0,this.unlockAnimalAbilities(pt),this.unlockOtherRaceCourseTypeAnimals(pt.raceCourseType),null!=(d=this.globalVar.animalDecks.find(Bt=>Bt.isPrimaryDeck))&&(m=!1,d.selectedAnimals.forEach(jt=>{jt.raceCourseType===(null==pt?void 0:pt.raceCourseType)&&(m=!0)}),m||d.selectedAnimals.push(pt))),this.sortAnimalOrder(),i=["Salamander",this.getAnimalDescription("Salamander")+"<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getVolcanicDescription()+"</em>")],te=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(47)+te+" Renown"}else if(47===e)te=10,null==(de=this.globalVar.resources.find(jt=>"Renown"===jt.name))?this.globalVar.resources.push(new Je("Renown",te)):de.amount+=te,i=[te+" Renown",""],ne=15e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(50)+ne+" Coins";else if(50===e)ce=15e3,null==(T=this.globalVar.resources.find(Bt=>"Coins"===Bt.name))?this.globalVar.resources.push(new Je("Coins",ce)):T.amount+=ce,i=[ce+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(53)+"Rainbow Races";else if(53===e){if(this.globalVar.unlockables.set("rainbowRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(r=this.globalVar.shop.find(Rt=>"Specialty"===Rt.name))){var lt=r.itemList.find(Rt=>"Talent Point Voucher"===Rt.name);null!=lt&&(lt.isAvailable=!0)}i=["Rainbow Race","A new race type has been unlocked! This race requires a full team effort spanning all five course types. Your team of researchers are on hand for these races, coming up with more efficient ways to win. Gain Talent Tree Points that can be spent to improve various course types."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(55)+"Amethyst Orb"}else if(55===e)this.globalVar.resources.push(new Je("Amethyst Orb",1,Le.Equipment)),this.globalVar.unlockables.set("orbs",!0),i=["Amethyst Orb","You receive a glowing violet orb. What it is for is a mystery, but you feel faster while you hold it."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(58)+"Barn Row 5";else if(58===e)this.globalVar.unlockables.set("barnRow5",!0),i=["Barn Row 5",""],te=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(60)+"Sapphire Orb";else if(60===e)this.globalVar.resources.push(new Je("Sapphire Orb",1,Le.Equipment)),i=["Sapphire Orb","You receive a glowing blue orb. What it is for is a mystery, but you feel faster while you hold it.."],_=100,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(62)+_+" Mangoes";else if(62===e){var T;_=100,null==(T=this.globalVar.resources.find(Bt=>"Mangoes"===Bt.name))?this.globalVar.resources.push(new Je("Mangoes",_,Le.Food)):T.amount+=_,i=[_+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(65)+"Amber Orb"}else if(65===e)this.globalVar.resources.push(new Je("Amber Orb",1,Le.Equipment)),i=["Amber Orb","You receive a glowing orange orb. What it is for is a mystery, but you feel faster while you hold it.."],_=25,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(67)+_+" Renown";else if(67===e){var de;te=25,null==(de=this.globalVar.resources.find(Bt=>"Renown"===Bt.name))?this.globalVar.resources.push(new Je("Renown",te)):de.amount+=te,i=[te+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(70)+"Topaz Orb"}else if(70===e)this.globalVar.resources.push(new Je("Topaz Orb",1,Le.Equipment)),i=["Topaz Orb","You receive a glowing yellow orb. What it is for is a mystery, but you feel faster while you hold it.."],_=500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(73)+_+" Stat Increasing Food Items";else if(73===e)this.increaseAllFood(_=500),i=[_+" Stat Increasing Food",_+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(75)+"Emerald Orb";else if(75===e)this.globalVar.resources.push(new Je("Emerald Orb",1,Le.Equipment)),i=["Emerald Orb","You receive a glowing green orb. What it is for is a mystery, but you feel faster while you hold it.."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(78)+"Ruby Orb";else if(78===e)this.globalVar.resources.push(new Je("Ruby Orb",1,Le.Equipment)),i=["Ruby Orb","You receive a glowing red orb. What it is for is a mystery, but you feel faster while you hold it.."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(79)+"The Pinnacle";else if(79===e){var r;if(this.globalVar.unlockables.set("thePinnacle",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(r=this.globalVar.shop.find(Rt=>"Specialty"===Rt.name))){var kt=r.itemList.find(Rt=>"Orb Infuser"===Rt.name);null!=kt&&(kt.isAvailable=!0)}i=["The Pinnacle",this.utilityService.getSanitizedHtml("A new race type has been unlocked! The Pinnacle is an old and mysterious fortress. Researchers have struggled to map out its interior due to the ever changing terrain and constantly shifting weather. Your team has been contracted out to help map the area out. <br/> As you race through each floor, you notice that you can insert the Orbs you have received into braziers to activate them. This increases your Orb level, allowing you to further power them up. <br/> <br/><em>Select this race and others like it by choosing the 'Special Race' option from the 'Races' menu. </em>")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(80)+"More Coming Soon!"}return i}increaseAllFood(e){var i=this.globalVar.resources.find(_=>"Apples"===_.name);null==i?this.globalVar.resources.push(new Je("Apples",e,Le.Food)):i.amount+=e;var r=this.globalVar.resources.find(_=>"Bananas"===_.name);null==r?this.globalVar.resources.push(new Je("Bananas",e,Le.Food)):r.amount+=e;var a=this.globalVar.resources.find(_=>"Oranges"===_.name);null==a?this.globalVar.resources.push(new Je("Oranges",e,Le.Food)):a.amount+=e;var c=this.globalVar.resources.find(_=>"Strawberries"===_.name);null==c?this.globalVar.resources.push(new Je("Strawberries",e,Le.Food)):c.amount+=e;var d=this.globalVar.resources.find(_=>"Carrots"===_.name);null==d?this.globalVar.resources.push(new Je("Carrots",e,Le.Food)):d.amount+=e;var m=this.globalVar.resources.find(_=>"Turnips"===_.name);null==m?this.globalVar.resources.push(new Je("Turnips",e,Le.Food)):m.amount+=e}GenerateCircuitRacesForRank(e){this.globalVar.circuitRaces=[];var i=this.utilityService.getNumericValueOfCircuitRank(e),r=1,a=60,c=15,d=100,m=1.125,_=80*i,T=1.1,A=.9;this.utilityService.getNumericValueOfCircuitRank(e)>=53&&(d=110),this.utilityService.getNumericValueOfCircuitRank(e)>=53&&(d=125),this.utilityService.getNumericValueOfCircuitRank(e)>=79&&(d=150);var te=3;"Z"===e?te=1:"Y"==e&&(te=2);for(var oe=0;oe<te;oe++){var de=[],be="C"+i+oe;if(i<=3){_=-37;var ce=new fr;ce.courseType=Ve.Flatland,2===i?0===oe?ce.terrain=new Kn(Gt.Sunny):1===oe&&(ce.terrain=new Kn(Gt.Rainy)):3===i?0===oe?ce.terrain=new Kn(Gt.Sunny):1===oe?ce.terrain=new Kn(Gt.Rainy):2===oe&&(ce.terrain=new Kn(Gt.Stormy)):ce.terrain=new Kn(Gt.Sunny),ce.distance=Math.round(d*m**i+_),de.push(ce)}else if(i<=14){_=4===i?5*i:35*i,(ne=[]).push(Ve.Flatland),ne.push(Ve.Mountain);var Ae=this.getCourseTypeInRandomOrderSeeded(ne,be+"cl1"),Ue=this.utilityService.getRandomSeededNumber(20,80,be+"l1d"),kt=(bt=this.utilityService.getRandomSeededNumber(20,80,be+"l2d"))*(pt=a/(Ue+bt));(lt=Ue*pt)<c?(lt=0,kt=a):kt<c&&(kt=0,lt=a),lt>0&&((At=new fr).courseType=Ae[0],At.distance=Math.round(d*m**i+_)*this.utilityService.getRandomSeededNumber(A,T,be+"l1r")*(lt/a),At.terrain=this.getRandomTerrain(At.courseType,be+"lt1d"),de.push(At)),kt>0&&((Rt=new fr).courseType=Ae[1],Rt.distance=Math.round(d*m**i+_)*this.utilityService.getRandomSeededNumber(A,T,be+"l2r")*(kt/a),Rt.terrain=this.getRandomTerrain(Rt.courseType,be+"lt2d"),de.push(Rt))}else{c=10,15===i?_=50*i:16===i&&(_=60*i);var ne=[];i<=43?(ne.push(Ve.Flatland),ne.push(Ve.Mountain),ne.push(Ve.Ocean)):i<=51?(ne.push(Ve.Flatland),ne.push(Ve.Mountain),ne.push(Ve.Ocean),ne.push(Ve.Tundra)):(ne.push(Ve.Flatland),ne.push(Ve.Mountain),ne.push(Ve.Ocean),ne.push(Ve.Tundra),ne.push(Ve.Volcanic)),Ae=this.getCourseTypeInRandomOrderSeeded(ne,be+"courses1"),Ue=this.utilityService.getRandomSeededNumber(20,80,be+"l1d");var pt,lt,At,Rt,bt=this.utilityService.getRandomSeededNumber(20,80,be+"l2d"),Bt=this.utilityService.getRandomSeededNumber(20,80,be+"l3d"),jt=(kt=bt*(pt=a/(Ue+bt+Bt)),Bt*pt);if((lt=Ue*pt)<c?(kt+=lt/2,jt+=lt/2,lt=0):kt<c?(lt+=kt/2,jt+=kt/2,kt=0):jt<c&&(lt+=jt/2,kt+=jt/2,jt=0),lt>0&&((At=new fr).courseType=Ae[0],At.distance=Math.round(d*m**i+_)*this.utilityService.getRandomSeededNumber(A,T,be+"l1r")*(lt/a),At.terrain=this.getRandomTerrain(At.courseType,be+"tl1d"),de.push(At)),kt>0&&((Rt=new fr).courseType=Ae[1],Rt.distance=Math.round(d*m**i+_)*this.utilityService.getRandomSeededNumber(A,T,be+"l2r")*(kt/a),Rt.terrain=this.getRandomTerrain(Rt.courseType,be+"tl2d"),de.push(Rt)),jt>0){var Ui=new fr;Ui.courseType=Ae[2],Ui.distance=Math.round(d*m**i+_)*this.utilityService.getRandomSeededNumber(A,T,be+"l3r")*(jt/a),Ui.terrain=this.getRandomTerrain(Ui.courseType,be+"tl3d"),de.push(Ui)}}var Ht=0;de.forEach(ai=>{Ht+=ai.distance}),de.forEach(ai=>{ai.pathData=this.GenerateRaceLegPaths(ai,Ht)}),this.globalVar.circuitRaces.push(new Fr(de,e,!0,r,Ht,a,this.GenerateCircuitRaceRewards(e),void 0,void 0,xt.circuit)),r+=1}}reorganizeLegsByDeckOrder(e,i){return i.isCourseOrderActive?e.sort((r,a)=>i.courseTypeOrder.indexOf(r.courseType)-i.courseTypeOrder.indexOf(a.courseType)):e}reorganizeAnimalsByDeckOrder(e,i){return i.isCourseOrderActive?e.sort((r,a)=>i.courseTypeOrder.indexOf(r.raceCourseType)-i.courseTypeOrder.indexOf(a.raceCourseType)):e}getCourseTypeInRandomOrder(e){for(var i=[],r=e.length,a=0;a<r;a++){var c=this.utilityService.getRandomInteger(1,e.length);i.push(e[c-1]),e=e.filter(d=>d!==e[c-1])}return i}getCourseTypeInRandomOrderSeeded(e,i="seeded"){for(var r=[],a=e.length,c=0;c<a;c++){var d=this.utilityService.getRandomSeededInteger(1,e.length,i);r.push(e[d-1]),e=e.filter(m=>m!==e[d-1])}return r}getRandomTerrain(e,i,r){var a=[];if(void 0!==r&&r.containsCondition(gi[gi.harshTerrain])){if(e===Ve.Flatland||e===Ve.Mountain)return new Kn(Gt.Snowfall);if(e===Ve.Volcanic)return new Kn(Gt.Ashfall);if(e===Ve.Tundra)return new Kn(Gt.Hailstorm);if(e===Ve.Ocean)return new Kn(Gt.Maelstrom)}e===Ve.Flatland||e===Ve.Mountain?(a.push(Gt.Sunny),a.push(Gt.Rainy),a.push(Gt.Stormy),a.push(Gt.Torrid),a.push(Gt.Snowfall)):e===Ve.Ocean?(a.push(Gt.Sunny),a.push(Gt.Maelstrom),a.push(Gt.Stormy),a.push(Gt.Snowfall)):e===Ve.Tundra?(a.push(Gt.Sunny),a.push(Gt.Hailstorm),a.push(Gt.Stormy),a.push(Gt.Snowfall)):e===Ve.Volcanic&&(a.push(Gt.Sunny),a.push(Gt.Ashfall),a.push(Gt.Stormy),a.push(Gt.Torrid));var c;return c=null!=i?this.utilityService.getRandomSeededInteger(1,a.length,i):this.utilityService.getRandomInteger(1,a.length),new Kn(a[c-1])}getRandomOrbListOrder(e,i="seeded"){for(var r=[],a=e.length,c=0;c<a;c++){var d=this.utilityService.getRandomSeededInteger(1,e.length,i);r.push(e[d-1]),e=e.filter(m=>m!==e[d-1])}return r}getAnimalStatLossFromExhaustionEventRace(e){if(null==this.globalVar.eventRaceData.animalData||0===this.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:i.exhaustionStatReduction}getRandomGrandPrixWeatherCluster(e,i){var r=[];r.push(ba.clearSkies),r.push(ba.coldSpell),r.push(ba.inclementWeather);var c=r[(null!=e?this.utilityService.getRandomSeededInteger(1,r.length,e):this.utilityService.getRandomInteger(1,r.length))-1];if(this.globalVar.eventRaceData.animalData.length>0){var d=.2,m=this.globalVar.modifiers.find(_=>"weatherMoraleBoostModifier"===_.text);void 0!==m&&(d=m.value),this.globalVar.eventRaceData.animalData.forEach(_=>{var T=this.globalVar.animals.find(A=>A.type===_.associatedAnimalType);void 0!==T&&(void 0!==i&&this.animalGainsMoraleBoostFromWeather(T.raceCourseType,i)&&this.changeGrandPrixMorale(T.type,-d),this.animalGainsMoraleBoostFromWeather(T.raceCourseType,c)&&this.changeGrandPrixMorale(T.type,d))})}return c}changeGrandPrixMorale(e,i){if(null!=this.globalVar.eventRaceData&&null!=this.globalVar.eventRaceData.animalData&&0!==this.globalVar.eventRaceData.animalData.length){var r=this.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e);null!=r&&(r.morale+=i,r.morale>=3&&(r.morale=3),r.morale<=.5&&(r.morale=.5))}}animalGainsMoraleBoostFromWeather(e,i){var r=!1;return(i===ba.clearSkies&&(e===Ve.Volcanic||e===Ve.Flatland)||i===ba.inclementWeather&&e===Ve.Ocean||i===ba.coldSpell&&(e===Ve.Tundra||e===Ve.Mountain))&&(r=!0),r}getRandomGrandPrixTerrainFromWeatherCluster(e,i,r){var a=[];e===ba.clearSkies?(a.push(Gt.Sunny),a.push(Gt.Torrid),a.push(Gt.Ashfall)):e===ba.coldSpell?(a.push(Gt.Snowfall),a.push(Gt.Hailstorm),a.push(Gt.Sunny)):e===ba.inclementWeather&&(a.push(Gt.Rainy),a.push(Gt.Stormy),a.push(Gt.Maelstrom),a.push(Gt.Hailstorm)),i===Ve.Flatland&&(a=a.filter(d=>d!==Gt.Ashfall&&d!==Gt.Hailstorm&&d!==Gt.Maelstrom)),i===Ve.Mountain&&(a=a.filter(d=>d!==Gt.Ashfall&&d!==Gt.Hailstorm&&d!==Gt.Maelstrom)),i===Ve.Ocean&&(a=a.filter(d=>d!==Gt.Ashfall&&d!==Gt.Hailstorm&&d!==Gt.Rainy&&d!==Gt.Torrid)),i===Ve.Tundra&&(a=a.filter(d=>d!==Gt.Ashfall&&d!==Gt.Rainy&&d!==Gt.Maelstrom&&d!==Gt.Torrid)),i===Ve.Volcanic&&(a=a.filter(d=>d!==Gt.Snowfall&&d!==Gt.Hailstorm&&d!==Gt.Maelstrom));var c;return c=null!=r?this.utilityService.getRandomSeededInteger(1,a.length,r):this.utilityService.getRandomInteger(1,a.length),new Kn(a[c-1])}stopGrandPrixRace(){null!=this.globalVar.eventRaceData&&(this.globalVar.eventRaceData.animalData.forEach(e=>{e.isCurrentlyRacing=!1,e.isSetToRelay=!1}),this.globalVar.eventRaceData.isLoading=!1,this.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalVar.eventRaceData.isRunning=!1,this.globalVar.eventRaceData.isCatchingUp=!1,this.globalVar.eventRaceData.overallTimeCounter-=this.globalVar.eventRaceData.segmentTimeCounter,this.globalVar.eventRaceData.segmentTimeCounter=0,void 0!==this.globalVar.eventRaceData.currentRaceSegment&&this.globalVar.eventRaceData.currentRaceSegment.reduceExportSize())}unlockTier2ShopItems(){var e=this.globalVar.shop.find(ne=>"Specialty"===ne.name);if(null!=e){var i=e.itemList.find(ne=>"Incubator Upgrade Lv1"===ne.name);null!=i&&(i.isAvailable=!0);var r=e.itemList.find(ne=>"National Races"===ne.name);null!=r&&(r.isAvailable=!0);var a=e.itemList.find(ne=>"Scouts"===ne.name);null!=a&&(a.isAvailable=!0);var c=e.itemList.find(ne=>"Course Maps"===ne.name);null!=c&&(c.isAvailable=!0);var d=e.itemList.find(ne=>"Training Facility Improvements"===ne.name);null!=d&&(d.isAvailable=!0);var m=e.itemList.find(ne=>"Breeding Grounds Improvements"===ne.name);null!=m&&(m.isAvailable=!0);var _=e.itemList.find(ne=>"Attraction Improvements"===ne.name);null!=_&&(_.isAvailable=!0)}var T=this.globalVar.shop.find(ne=>"Equipment"===ne.name);if(null!=T){var A=T.itemList.find(ne=>"Red Baton"===ne.name);null!=A&&(A.isAvailable=!0);var q=T.itemList.find(ne=>"Orange Baton"===ne.name);null!=q&&(q.isAvailable=!0);var Q=T.itemList.find(ne=>"Green Baton"===ne.name);null!=Q&&(Q.isAvailable=!0);var te=T.itemList.find(ne=>"Yellow Baton"===ne.name);null!=te&&(te.isAvailable=!0);var oe=T.itemList.find(ne=>"Blue Baton"===ne.name);null!=oe&&(oe.isAvailable=!0);var de=T.itemList.find(ne=>"Violet Baton"===ne.name);null!=de&&(de.isAvailable=!0)}var be=this.globalVar.shop.find(ne=>"Food"===ne.name);if(null!=be){var ce=be.itemList.find(ne=>"Gingko Leaves"===ne.name);null!=ce&&(ce.isAvailable=!0)}}lockTier2ShopItems(){var e=this.globalVar.shop.find(te=>"Specialty"===te.name);if(null!=e){var i=e.itemList.find(te=>"Incubator Upgrade Lv1"===te.name);null!=i&&(i.isAvailable=!1);var r=e.itemList.find(te=>"National Races"===te.name);null!=r&&(r.isAvailable=!1);var a=e.itemList.find(te=>"Scouts"===te.name);null!=a&&(a.isAvailable=!1);var c=e.itemList.find(te=>"Course Maps"===te.name);null!=c&&(c.isAvailable=!1)}var d=this.globalVar.shop.find(te=>"Equipment"===te.name);if(null!=d){var m=d.itemList.find(te=>"Red Baton"===te.name);null!=m&&(m.isAvailable=!1);var _=d.itemList.find(te=>"Orange Baton"===te.name);null!=_&&(_.isAvailable=!1);var T=d.itemList.find(te=>"Green Baton"===te.name);null!=T&&(T.isAvailable=!1);var A=d.itemList.find(te=>"Yellow Baton"===te.name);null!=A&&(A.isAvailable=!1);var q=d.itemList.find(te=>"Blue Baton"===te.name);null!=q&&(q.isAvailable=!1);var Q=d.itemList.find(te=>"Violet Baton"===te.name);null!=Q&&(Q.isAvailable=!1)}}GetCircuitRankValue(e){for(var i=1;e.length>1;){var r=e.length;i+=26,(e=e.substring(1)).length>=r&&(e="")}return i+(91-e.charCodeAt(0))}GenerateCircuitRaceRewards(e){var i=this.GetCircuitRankValue(e),m=[];this.globalVar.resources.find(A=>"Renown"===A.name);return m.push(new Je("Coins",Math.round(50*1.0135**i))),m.push(new Je("Renown",parseFloat((1.03*1.03**i/100).toFixed(3)))),m}GenerateLocalRaceRewards(e){var i=this.GetCircuitRankValue(e),m=[];this.globalVar.resources.find(A=>"Renown"===A.name);return m.push(new Je("Coins",Math.round(10*1.013**i))),m.push(new Je("Renown",parseFloat((1.01*1.015**i/100).toFixed(3)))),m}GenerateMonoRaceRewards(e){var i=[];i.push(new Je("Facility Level",1,Le.Progression));var r=this.GetCircuitRankValue(e);return i.push(new Je("Coins",Math.round(60*1.0135**r))),i.push(new Je("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateDuoRaceRewards(e){var i=[];i.push(new Je("Research Level",1,Le.Progression));var r=this.GetCircuitRankValue(e);return i.push(new Je("Coins",Math.round(125*1.0135**r))),i.push(new Je("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateRainbowRaceRewards(e){var i=[];i.push(new Je("Talent Points",1,Le.Progression));var r=this.GetCircuitRankValue(e);return i.push(new Je("Coins",Math.round(250*1.012**r))),i.push(new Je("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateLocalRaces(){this.GenerateMonoRaces(this.globalVar.monoRank),this.GenerateDuoRaces(this.globalVar.duoRank),this.GenerateRainbowRaces(this.globalVar.rainbowRank),this.GeneratePinnacleRaces(this.globalVar.pinnacleFloor)}GenerateMonoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(de=>de.localRaceType!==Li.Mono),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,m=100*i,A=[],q=new fr;if(i<=2)q.courseType=Ve.Flatland;else{var Q=[];i<14?(Q.push(Ve.Flatland),Q.push(Ve.Mountain)):i<40?(Q.push(Ve.Flatland),Q.push(Ve.Mountain),Q.push(Ve.Ocean)):i<50?(Q.push(Ve.Flatland),Q.push(Ve.Mountain),Q.push(Ve.Ocean),Q.push(Ve.Tundra)):(Q.push(Ve.Flatland),Q.push(Ve.Mountain),Q.push(Ve.Ocean),Q.push(Ve.Tundra),Q.push(Ve.Volcanic)),null!=this.globalVar.lastMonoRaceCourseType&&i>2&&(Q=Q.filter(de=>de!==this.globalVar.lastMonoRaceCourseType));var te=this.getCourseTypeInRandomOrderSeeded(Q,"monoseed"+e+i);q.courseType=te[0]}q.terrain=this.getRandomTerrain(q.courseType,"monoseed"+e+i),q.distance=Math.round((155*1.145**i+m)*this.utilityService.getRandomSeededNumber(.9,1.1)),A.push(q);var oe=q.distance;A.forEach(de=>{de.pathData=this.GenerateRaceLegPaths(de,oe)}),this.globalVar.localRaces.push(new Fr(A,e,!1,r,oe,90,this.GenerateMonoRaceRewards(e),Li.Mono,void 0,xt.special)),r+=1}}GenerateDuoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(be=>be.localRaceType!==Li.Duo),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,T=[],A=[];i<=10?(A.push(Ve.Flatland),A.push(Ve.Mountain),A.push(Ve.Ocean)):i<=20?(A.push(Ve.Flatland),A.push(Ve.Mountain),A.push(Ve.Ocean),A.push(Ve.Tundra)):(A.push(Ve.Flatland),A.push(Ve.Mountain),A.push(Ve.Ocean),A.push(Ve.Tundra),A.push(Ve.Volcanic));var q=this.getCourseTypeInRandomOrderSeeded(A,"duooseed"+e+i),Q=this.utilityService.getRandomSeededNumber(.8,1.2),te=new fr;te.courseType=q[0],te.distance=Math.round(6500*1.14**i*Q*.5),te.terrain=this.getRandomTerrain(te.courseType,"duoseedl1"+e+i),T.push(te);var oe=new fr;oe.courseType=q[1],oe.distance=Math.round(6500*1.14**i*Q*.5),oe.terrain=this.getRandomTerrain(oe.courseType,"duoseedl2"+e+i),T.push(oe);var de=te.distance+oe.distance;T.forEach(be=>{be.pathData=this.GenerateRaceLegPaths(be,de)}),this.globalVar.localRaces.push(new Fr(T,e,!1,r,de,80,this.GenerateDuoRaceRewards(e),Li.Duo,void 0,xt.special)),r+=1}}GenerateRainbowRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(Ae=>Ae.localRaceType!==Li.Rainbow),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,c=125e3,d=1.17,T=[],A=[];A.push(Ve.Flatland),A.push(Ve.Mountain),A.push(Ve.Ocean),A.push(Ve.Tundra),A.push(Ve.Volcanic);var q=this.getCourseTypeInRandomOrderSeeded(A,"rainbow"+e+i),Q=this.utilityService.getRandomSeededNumber(.8,1.2),te=new fr;te.courseType=q[0],te.distance=Math.round(c*d**i*Q*.2),te.terrain=this.getRandomTerrain(te.courseType,"rainbowl1"+e+i),T.push(te);var oe=new fr;oe.courseType=q[1],oe.distance=Math.round(c*d**i*Q*.2),oe.terrain=this.getRandomTerrain(oe.courseType,"rainbowl2"+e+i),T.push(oe);var de=new fr;de.courseType=q[2],de.distance=Math.round(c*d**i*Q*.2),de.terrain=this.getRandomTerrain(de.courseType,"rainbowl3"+e+i),T.push(de);var be=new fr;be.courseType=q[3],be.distance=Math.round(c*d**i*Q*.2),be.terrain=this.getRandomTerrain(be.courseType,"rainbowl4"+e+i),T.push(be);var ce=new fr;ce.courseType=q[4],ce.distance=Math.round(c*d**i*Q*.2),ce.terrain=this.getRandomTerrain(ce.courseType,"rainbowl5"+e+i),T.push(ce);var ne=te.distance+oe.distance+de.distance+be.distance+ce.distance;T.forEach(Ae=>{Ae.pathData=this.GenerateRaceLegPaths(Ae,ne)}),this.globalVar.localRaces.push(new Fr(T,e,!1,r,ne,120,this.GenerateRainbowRaceRewards(e),Li.Rainbow,void 0,xt.special)),r+=1}}GeneratePinnacleRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(lt=>lt.localRaceType!==Li.Pinnacle),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,m=1,_=this.getRandomPinnacleCondition(i,"pinnaclel1"+e+i);_.containsCondition($t[$t.threeHundredSecondRace])&&(m=1.75),_.containsCondition(gi[gi.thirtySecondRace])&&(m=.25);var q=[],Q=this.utilityService.getRandomSeededNumber(.8,1.2),te=this.globalVar.animalDecks.find(lt=>lt.isPrimaryDeck);if(void 0!==te){var oe=te.selectedAnimals.slice(0,4);_.containsCondition($t[$t.twoRacersOnly])&&(oe=te.selectedAnimals.slice(0,2)),_.containsCondition($t[$t.threeRacersOnly])&&(oe=te.selectedAnimals.slice(0,3));for(var de=Math.round(275e4*1.17**i*Q*m),be=0;be<oe.length;be++){var ce=1/oe.length,ne=new fr;ne.courseType=oe[be].raceCourseType,ne.distance=ce*de,ne.terrain=this.getRandomTerrain(ne.courseType,"pinnaclel"+e+i+be,_),q.push(ne)}q.forEach(lt=>{lt.pathData=this.GenerateRaceLegPaths(lt,de)});var Ae=[];Ae.push(Ot.amber),Ae.push(Ot.amethyst),Ae.push(Ot.ruby),Ae.push(Ot.emerald),Ae.push(Ot.sapphire),Ae.push(Ot.topaz);var Ue=this.getRandomOrbListOrder(Ae,"pinnaclel1"+e+i),bt=0,nt=[];Ue.forEach(lt=>{bt+=1;var kt=new rM(this.getBrazierFromOrbType(lt),de*(bt/(Ue.length+1)));nt.push(kt)});var pt=new Fr(q,e,!1,r,de,180,[],Li.Pinnacle,void 0,xt.special,void 0,nt);pt.pinnacleConditions=_,_.containsCondition($t[$t.threeHundredSecondRace])&&(pt.timeToComplete=300),_.containsCondition(gi[gi.thirtySecondRace])&&(pt.timeToComplete=30),this.globalVar.localRaces.push(pt),r+=1}}}addToPinnacleHistory(e){e.easyConditions.length>0&&e.easyConditions.forEach(i=>{this.globalVar.pinnacleHistory.easyConditions.push(i),this.globalVar.pinnacleHistory.easyConditions.length>3&&(this.globalVar.pinnacleHistory.easyConditions=this.globalVar.pinnacleHistory.easyConditions.filter(r=>r!==this.globalVar.pinnacleHistory.easyConditions[0]))}),e.mediumConditions.length>0&&e.mediumConditions.forEach(i=>{this.globalVar.pinnacleHistory.mediumConditions.push(i),this.globalVar.pinnacleHistory.mediumConditions.length>3&&(this.globalVar.pinnacleHistory.mediumConditions=this.globalVar.pinnacleHistory.mediumConditions.filter(r=>r!==this.globalVar.pinnacleHistory.mediumConditions[0]))}),e.hardConditions.length>0&&e.hardConditions.forEach(i=>{this.globalVar.pinnacleHistory.hardConditions.push(i),this.globalVar.pinnacleHistory.hardConditions.length>3&&(this.globalVar.pinnacleHistory.hardConditions=this.globalVar.pinnacleHistory.hardConditions.filter(r=>r!==this.globalVar.pinnacleHistory.hardConditions[0]))})}getRandomPinnacleCondition(e,i="seeded"){var r=new ml;if(void 0!==this.globalVar.currentPinnacleConditions)return this.globalVar.currentPinnacleConditions;if(e<=10)return 1===e&&r.easyConditions.push($t.threeRacersOnly),2===e&&r.easyConditions.push($t.threeHundredSecondRace),3===e&&r.mediumConditions.push(gi.brokenFloorboards),4===e&&r.mediumConditions.push(gi.longCooldowns),5===e&&r.hardConditions.push(cr.noBurst),6===e&&r.easyConditions.push($t.noRelayEffects),7===e&&r.easyConditions.push($t.twoRacersOnly),8===e&&r.mediumConditions.push(gi.thirtySecondRace),9===e&&r.mediumConditions.push(gi.sticky),10===e&&r.hardConditions.push(cr.exhaustionPenaltyIncreased),this.globalVar.currentPinnacleConditions=r,this.addToPinnacleHistory(r),r;var a=e%5;if(1===a||2===a){var c=this.getAllEasyPinnacleConditions(),d=this.utilityService.getRandomSeededInteger(1,c.length-1,i);r.easyConditions.push(c[d])}else if(3===a||4===a){var m=this.getAllMediumPinnacleConditions();d=this.utilityService.getRandomSeededInteger(1,m.length-1,i),r.mediumConditions.push(m[d])}else if(0===a){var _=this.getAllHardPinnacleConditions();d=this.utilityService.getRandomSeededInteger(1,_.length-1,i),r.hardConditions.push(_[d])}return e>=15&&(1===a||2===a)&&(c=this.getAllEasyPinnacleConditions(r),d=this.utilityService.getRandomSeededInteger(1,c.length-1,i),r.easyConditions.push(c[d])),e>=20&&(3===a||4===a)&&(c=this.getAllEasyPinnacleConditions(r),d=this.utilityService.getRandomSeededInteger(1,c.length-1,i),r.easyConditions.push(c[d])),e>=24&&0===a&&(c=this.getAllEasyPinnacleConditions(r),d=this.utilityService.getRandomSeededInteger(1,c.length-1,i),r.easyConditions.push(c[d])),e>=53&&0===a&&(m=this.getAllMediumPinnacleConditions(r),d=this.utilityService.getRandomSeededInteger(1,m.length-1,i),r.mediumConditions.push(m[d])),this.globalVar.currentPinnacleConditions=r,this.addToPinnacleHistory(r),r}getAllEasyPinnacleConditions(e){var i=[];return i.push($t.noRelayEffects),i.push($t.steamy),i.push($t.threeHundredSecondRace),i.push($t.threeRacersOnly),i.push($t.twoRacersOnly),i.push($t.burstIncreaseStaminaLoss),i.push($t.cold),i.push($t.hot),i.push($t.slick),i.push($t.strongWinds),this.globalVar.pinnacleHistory.easyConditions.forEach(r=>{i=i.filter(a=>a!==r)}),void 0!==e&&(e.easyConditions.forEach(r=>{i=i.filter(a=>a!==r)}),e.easyConditions.some(r=>r===$t.twoRacersOnly)&&(i=i.filter(r=>r!==$t.threeRacersOnly)),e.easyConditions.some(r=>r===$t.threeRacersOnly)&&(i=i.filter(r=>r!==$t.twoRacersOnly)),e.mediumConditions.some(r=>r===gi.fourRacersOnly)&&(i=i.filter(r=>r!==$t.threeRacersOnly&&r!==$t.twoRacersOnly)),e.mediumConditions.some(r=>r===gi.thirtySecondRace)&&(i=i.filter(r=>r!==$t.threeHundredSecondRace)),e.hardConditions.some(r=>r===cr.noBurst)&&(i=i.filter(r=>r!==$t.burstIncreaseStaminaLoss))),i}getAllMediumPinnacleConditions(e){var i=[];return i.push(gi.brokenFloorboards),i.push(gi.fourRacersOnly),i.push(gi.longCooldowns),i.push(gi.sticky),i.push(gi.thirtySecondRace),i.push(gi.harshTerrain),i.push(gi.highSpeedLowAcceleration),i.push(gi.unfocused),this.globalVar.pinnacleHistory.mediumConditions.forEach(r=>{i=i.filter(a=>a!==r)}),void 0!==e&&(e.mediumConditions.forEach(r=>{i=i.filter(a=>a!==r)}),e.easyConditions.some(r=>r===$t.twoRacersOnly||r===$t.threeRacersOnly)&&(i=i.filter(r=>r!==gi.fourRacersOnly)),e.easyConditions.some(r=>r===$t.threeHundredSecondRace)&&(i=i.filter(r=>r!==gi.thirtySecondRace))),i}getAllHardPinnacleConditions(e){var i=[];return i.push(cr.exhaustionPenaltyIncreased),i.push(cr.lowStaminaRelay),i.push(cr.noBurst),i.push(cr.reduceSpeedOnRelay),i.push(cr.reduceAbilityEfficiency),this.globalVar.pinnacleHistory.hardConditions.forEach(r=>{i=i.filter(a=>a!==r)}),void 0!==e&&e.hardConditions.forEach(r=>{i=i.filter(a=>a!==r)}),i}getPinnacleFloorConditionDescription(e){var i="";return e.easyConditions.length>0&&e.easyConditions.forEach(r=>{r===$t.noRelayEffects&&(i+="<strong>Dark</strong> - No relay effects <br/>"),r===$t.steamy&&(i+="<strong>Steamy</strong> - Stamina Loss increased by 100%<br/>"),r===$t.threeHundredSecondRace&&(i+="<strong>Maze</strong> - Race timer increased to 300 seconds<br/>"),r===$t.threeRacersOnly&&(i+="<strong>Trios</strong> - 3 racers only<br/>"),r===$t.twoRacersOnly&&(i+="<strong>Duos</strong> - 2 racers only<br/>"),r===$t.slick&&(i+="<strong>Slick</strong> - Flatland, Mountain, and Volcanic Adaptability Distance reduced by 50%<br/>"),r===$t.strongWinds&&(i+="<strong>Strong Winds</strong> - Ocean and Tundra Acceleration Rate reduced by 50%<br/>"),r===$t.cold&&(i+="<strong>Cold</strong> - Volcanic lava falls 25% slower, Tundra max drift is 30%<br/>"),r===$t.hot&&(i+="<strong>Hot</strong> - Volcanic lava falls 25% faster, Tundra max drift is 10%<br/>"),r===$t.burstIncreaseStaminaLoss&&(i+="<strong>Humid</strong> - Lose three times as much stamina while bursting<br/>")}),e.mediumConditions.length>0&&e.mediumConditions.forEach(r=>{r===gi.fourRacersOnly&&(i+="<strong>Quartet</strong> - 4 racers only"),r===gi.brokenFloorboards&&(i+="<strong>Broken Floorboards</strong> - Every path has an adaptability check"),r===gi.longCooldowns&&(i+="<strong>Unusual Aroma</strong> - Ability cooldowns are twice as long"),r===gi.sticky&&(i+="<strong>Sticky</strong> - Acceleration reduces as you go further in the race"),r===gi.thirtySecondRace&&(i+="<strong>Lockdown</strong> - Race timer reduced to 30 seconds"),r===gi.harshTerrain&&(i+="<strong>Harsh Terrain</strong> - Terrain is always Maelstrom, Snowfall, Hailstorm, or Ashfall"),r===gi.highSpeedLowAcceleration&&(i+="<strong>Straight Shot</strong> - Acceleration Rate reduced to 10%, Max Speed increased to 500%"),r===gi.unfocused&&(i+="<strong>Distracting</strong> - After losing focus, reduce Focus Distance by 25% for the rest of the race")}),e.hardConditions.length>0&&e.hardConditions.forEach(r=>{r===cr.exhaustionPenaltyIncreased&&(i+="<strong>Low Energy</strong> - Stamina starts at 50%, stat loss from running out of stamina doubled"),r===cr.lowStaminaRelay&&(i+="<strong>Trudging</strong> - When your racer reaches 50% stamina, immediately relay or end the race if there are no animals remaining"),r===cr.noBurst&&(i+="<strong>Shifting Corridors</strong> - No bursts"),r===cr.reduceSpeedOnRelay&&(i+="<strong>Quicksand</strong> - On Relay, reduce your next racer's max speed by 20%. Every subsequent Relay reduces by an additional 20%."),r===cr.reduceAbilityEfficiency&&(i+="<strong>Tight Quarters</strong> - Ability efficiency reduced by 99%")}),i}getBrazierFromOrbType(e){return e===Ot.amber?zi.amberBrazier:e===Ot.amethyst?zi.amethystBrazier:e===Ot.ruby?zi.rubyBrazier:e===Ot.topaz?zi.topazBrazier:e===Ot.emerald?zi.emeraldBrazier:e===Ot.sapphire?zi.sapphireBrazier:void 0}getOrbTypeFromBrazier(e){return e===zi.amberBrazier?Ot.amber:e===zi.amethystBrazier?Ot.amethyst:e===zi.rubyBrazier?Ot.ruby:e===zi.topazBrazier?Ot.topaz:e===zi.emeraldBrazier?Ot.emerald:e===zi.sapphireBrazier?Ot.sapphire:void 0}getOrbTypeFromResource(e){var i=Ot.none;return"Amber Orb"===e.name&&(i=Ot.amber),"Amethyst Orb"===e.name&&(i=Ot.amethyst),"Emerald Orb"===e.name&&(i=Ot.emerald),"Ruby Orb"===e.name&&(i=Ot.ruby),"Sapphire Orb"===e.name&&(i=Ot.sapphire),"Topaz Orb"===e.name&&(i=Ot.topaz),i}getOrbDetailsFromType(e){return this.globalVar.orbStats.allOrbs.find(r=>r.type===e)}getOrbDescription(e){var i="";return e===Ot.amber&&(i="Increase the Acceleration Rate of the user by "+(100*(this.globalVar.orbStats.getAccelerationIncrease(1)-1)).toFixed(2)+"%. Gain orb experience for every meter covered while below your max speed."),e===Ot.amethyst&&(i="Increase the Power Efficiency of the user by "+(100*(this.globalVar.orbStats.getPowerIncrease(1)-1)).toFixed(2)+"%. Gain orb experience for every ability use."),e===Ot.emerald&&(i="Increase the Adaptability Distance of the user by "+(100*(this.globalVar.orbStats.getAdaptabilityIncrease(1)-1)).toFixed(2)+"%. Gain orb experience for every meter covered during a special path without stumbling."),e===Ot.ruby&&(i="Increase the Max Speed of the user by "+(100*(this.globalVar.orbStats.getMaxSpeedIncrease(1)-1)).toFixed(2)+"%.  Gain orb experience for every meter covered while at or above your max speed."),e===Ot.sapphire&&(i="Increase the Focus Distance of the user by "+(100*(this.globalVar.orbStats.getFocusIncrease(1)-1)).toFixed(2)+"%.  Gain orb experience for every meter covered prior to losing focus."),e===Ot.topaz&&(i="Increase the Stamina of the user by "+(100*(this.globalVar.orbStats.getEnduranceIncrease(1)-1)).toFixed(2)+"%.  Gain orb experience for every meter covered prior to running out of stamina."),i}getOrbNameFromType(e){return e===Ot.amber?"Amber Orb":e===Ot.amethyst?"Amethyst Orb":e===Ot.ruby?"Ruby Orb":e===Ot.topaz?"Topaz Orb":e===Ot.emerald?"Emerald Orb":e===Ot.sapphire?"Sapphire Orb":""}increaseOrbLevel(e){e.level+=1,e.xp-=e.xpNeededForLevel,e.xpNeededForLevel=1e4*1.09**e.level+1500*(e.level-1)}increaseAmberOrbXp(e,i){var a=5e-5*e,c=this.getOrbDetailsFromType(Ot.amber);void 0!==c&&(c.level<c.maxLevel?(c.xp+=a+a*i.miscStats.bonusOrbXp,c.xp>=c.xpNeededForLevel&&c.level<c.maxLevel&&this.increaseOrbLevel(c)):c.level===c.maxLevel&&(c.xp=0))}increaseAmethystOrbXp(e){var a=this.getOrbDetailsFromType(Ot.amethyst);void 0!==a&&(a.level<a.maxLevel?(a.xp+=2+2*e.miscStats.bonusOrbXp,a.xp>=a.xpNeededForLevel&&a.level<a.maxLevel&&this.increaseOrbLevel(a)):a.level===a.maxLevel&&(a.xp=0))}increaseEmeraldOrbXp(e,i){var a=8e-5*e,c=this.getOrbDetailsFromType(Ot.emerald);void 0!==c&&(c.level<c.maxLevel?(c.xp+=a+a*i.miscStats.bonusOrbXp,c.xp>=c.xpNeededForLevel&&c.level<c.maxLevel&&this.increaseOrbLevel(c)):c.level===c.maxLevel&&(c.xp=0))}increaseRubyOrbXp(e,i){var a=3e-4*e,c=this.getOrbDetailsFromType(Ot.ruby);void 0!==c&&(c.level<c.maxLevel?(c.xp+=a+a*i.miscStats.bonusOrbXp,c.xp>=c.xpNeededForLevel&&c.level<c.maxLevel&&this.increaseOrbLevel(c)):c.level===c.maxLevel&&(c.xp=0))}increaseSapphireOrbXp(e,i){var a=25e-6*e,c=this.getOrbDetailsFromType(Ot.sapphire);void 0!==c&&(c.level<c.maxLevel?(c.xp+=a+a*i.miscStats.bonusOrbXp,c.xp>=c.xpNeededForLevel&&c.level<c.maxLevel&&this.increaseOrbLevel(c)):c.level===c.maxLevel&&(c.xp=0))}increaseTopazOrbXp(e,i){var a=25e-6*e,c=this.getOrbDetailsFromType(Ot.topaz);void 0!==c&&(c.level<c.maxLevel?(c.xp+=a+a*i.miscStats.bonusOrbXp,c.xp>=c.xpNeededForLevel&&c.level<c.maxLevel&&this.increaseOrbLevel(c)):c.level===c.maxLevel&&(c.xp=0))}getAverageStumbleFrequencyForCourseType(e){var i=0;return e===Ve.Flatland&&(i=(new Nr(Lt.Bumps).frequencyOfStumble+new Nr(Lt.S).frequencyOfStumble)/2),e===Ve.Mountain&&(i=(new Nr(Lt.Gaps).frequencyOfStumble+new Nr(Lt.Crevasse).frequencyOfStumble)/2),e===Ve.Ocean&&(i=(new Nr(Lt.Dive).frequencyOfStumble+new Nr(Lt.Waves).frequencyOfStumble)/2),e===Ve.Tundra&&(i=(new Nr(Lt.Cavern).frequencyOfStumble+new Nr(Lt.Hills).frequencyOfStumble)/2),e===Ve.Volcanic&&(i=(new Nr(Lt.FirstRegular).frequencyOfStumble+new Nr(Lt.SteppingStones).frequencyOfStumble)/2),i}getAverageStumbleOpportunitiesForCourseType(e){var i=0;return e===Ve.Flatland&&(i=(new Nr(Lt.Bumps).stumbleOpportunities+new Nr(Lt.S).stumbleOpportunities)/2),e===Ve.Mountain&&(i=(new Nr(Lt.Gaps).stumbleOpportunities+new Nr(Lt.Crevasse).stumbleOpportunities)/2),e===Ve.Ocean&&(i=(new Nr(Lt.Dive).stumbleOpportunities+new Nr(Lt.Waves).stumbleOpportunities)/2),e===Ve.Tundra&&(i=(new Nr(Lt.Cavern).stumbleOpportunities+new Nr(Lt.Hills).stumbleOpportunities)/2),e===Ve.Volcanic&&(i=(new Nr(Lt.FirstRegular).stumbleOpportunities+new Nr(Lt.SteppingStones).stumbleOpportunities)/2),i}generateFreeRace(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=60,r=15,a=90,c=1.125,d=12*e;e>=15&&(d=50*e);var m=1.05,_=.8,q=[];if(e<=4){var Q=new fr;Q.courseType=Ve.Flatland,Q.terrain=this.getRandomTerrain(Q.courseType),Q.distance=Math.round((a*c**e+d)*this.utilityService.getRandomNumber(_,m)),q.push(Q)}else if(e<=15){(te=[]).push(Ve.Flatland),te.push(Ve.Mountain);var oe=this.getCourseTypeInRandomOrder(te),de=this.utilityService.getRandomNumber(10,90),Ue=(be=this.utilityService.getRandomNumber(10,90))*(ne=i/(de+be));(Ae=de*ne)<r?(Ae=0,Ue=i):Ue<r&&(Ue=0,Ae=i),Ae>0&&((bt=new fr).courseType=oe[0],bt.distance=Math.round((a*c**e+d)*this.utilityService.getRandomNumber(_,m))*(Ae/i),bt.terrain=this.getRandomTerrain(bt.courseType),q.push(bt)),Ue>0&&((nt=new fr).courseType=oe[1],nt.distance=Math.round((a*c**e+d)*this.utilityService.getRandomNumber(_,m))*(Ue/i),nt.terrain=this.getRandomTerrain(nt.courseType),q.push(nt))}else{r=10;var te=[];e<45?(te.push(Ve.Flatland),te.push(Ve.Mountain),te.push(Ve.Ocean)):e<53?(te.push(Ve.Flatland),te.push(Ve.Mountain),te.push(Ve.Ocean),te.push(Ve.Tundra)):(te.push(Ve.Flatland),te.push(Ve.Mountain),te.push(Ve.Ocean),te.push(Ve.Tundra),te.push(Ve.Volcanic)),oe=this.getCourseTypeInRandomOrder(te),de=this.utilityService.getRandomNumber(10,90);var ne,Ae,bt,nt,be=this.utilityService.getRandomNumber(10,90),pt=this.utilityService.getRandomNumber(10,90),lt=(Ue=be*(ne=i/(de+be+pt)),pt*ne);if((Ae=de*ne)<r?(Ue+=Ae/2,lt+=Ae/2,Ae=0):Ue<r?(Ae+=Ue/2,lt+=Ue/2,Ue=0):lt<r&&(Ae+=lt/2,Ue+=lt/2,lt=0),Ae>0&&((bt=new fr).courseType=oe[0],bt.distance=Math.round((a*c**e+d)*this.utilityService.getRandomNumber(_,m))*(Ae/i),bt.terrain=this.getRandomTerrain(bt.courseType),q.push(bt)),Ue>0&&((nt=new fr).courseType=oe[1],nt.distance=Math.round((a*c**e+d)*this.utilityService.getRandomNumber(_,m))*(Ue/i),nt.terrain=this.getRandomTerrain(nt.courseType),q.push(nt)),lt>0){var kt=new fr;kt.courseType=oe[2],kt.distance=Math.round((a*c**e+d)*this.utilityService.getRandomNumber(_,m))*(lt/i),kt.terrain=this.getRandomTerrain(kt.courseType),q.push(kt)}}var At=0,Rt=this.globalVar.animalDecks.find(Bt=>Bt.isPrimaryDeck);return void 0!==Rt&&(q=this.reorganizeLegsByDeckOrder(q,Rt)),q.forEach(Bt=>{At+=Bt.distance}),q.forEach(Bt=>{Bt.pathData=this.GenerateRaceLegPaths(Bt,At)}),new Fr(q,this.globalVar.circuitRank,!1,1,At,i,this.GenerateLocalRaceRewards(this.globalVar.circuitRank),Li.Free,void 0,xt.circuit,void 0)}getTotalSegments(e){return(null==this.globalVar.circuitRaces||0===this.globalVar.circuitRaces.length)&&this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),Math.ceil(this.globalVar.eventRaceData.grandPrixTimeLength/this.globalVar.eventRaceData.segmentTime),e/this.utilityService.getClosestWholeNumber(this.globalVar.circuitRaces[0].length*(this.globalVar.eventRaceData.segmentTime/this.globalVar.circuitRaces[0].timeToComplete),e)}initialGrandPrixSetup(e,i){this.globalVar.eventRaceData=new ha,this.globalVar.eventRaceData.rank=e,this.utilityService.getNumericValueOfCircuitRank(e),this.globalVar.eventRaceData.rankDistanceMultiplier=i,this.globalVar.eventRaceData.totalDistance=5e8*this.globalVar.eventRaceData.rankDistanceMultiplier,this.globalVar.eventRaceData.currentRaceSegmentCount=0,this.globalVar.eventRaceData.segmentTimeCounter=0,this.globalVar.eventRaceData.totalSegments=this.getTotalSegments(this.globalVar.eventRaceData.totalDistance),this.globalVar.eventRaceData.remainingRewards=this.globalVar.eventRaceData.totalRewards=this.getGrandPrixRewardCount(),this.globalVar.eventRaceData.animalData=[],this.globalVar.animals.forEach(d=>{this.globalVar.eventRaceData.animalData.push(new nM(d.type))});var a=this.getCurrentEventStartEndDateTime(!1);a instanceof Date&&(this.globalVar.eventRaceData.currentEventStartDate=a);var c=this.getCurrentEventStartEndDateTime(!0);c instanceof Date&&(this.globalVar.eventRaceData.currentEventEndDate=c),this.globalVar.eventRaceData.weatherCluster=this.getRandomGrandPrixWeatherCluster()}animalCanRaceGrandPrix(e){var i=!0,r=this.getBreedLevelRequiredForGrandPrix();e.breedLevel<r&&(i=!1);var a=this.globalVar.eventRaceData.animalData.find(c=>c.associatedAnimalType===e.type);return null!=a&&a.exhaustionStatReduction<.5&&(i=!1),i}getGrandPrixRacingAnimal(){var e=new Ti,i=this.globalVar.animalDecks.find(T=>T.isEventDeck);if(void 0!==i){var r=[];if(i.isCourseOrderActive){for(var a=0;a<i.selectedAnimals.length;a++)if(i.courseTypeOrder.length>a){var c=i.courseTypeOrder[a],d=i.selectedAnimals.find(T=>T.raceCourseType===c);if(void 0!==d){var m=this.globalVar.animals.find(T=>T.type===d.type);if(void 0!==m){var _=m.makeCopy(m);r.push(_)}}}}else i.selectedAnimals.forEach(T=>{var A=this.globalVar.animals.find(Q=>Q.type===T.type);if(void 0!==A){var q=A.makeCopy(A);r.push(q)}});(r=(r=r.filter(T=>this.animalCanRaceGrandPrix(T))).filter(T=>!this.shouldShowSlowSegmentWarning(T))).length>0&&(e=r[0])}return this.globalVar.eventRaceData.animalData.forEach(T=>{if(T.isCurrentlyRacing){var A=this.globalVar.animals.find(q=>q.type===T.associatedAnimalType);void 0!==A&&(e=A.makeCopy(A))}}),e}getCurrentlyActiveGrandPrixRacingAnimal(){var e=new Ti;return this.globalVar.eventRaceData.isRunning&&this.globalVar.eventRaceData.animalData.forEach(i=>{if(i.isCurrentlyRacing){var r=this.globalVar.animals.find(a=>a.type===i.associatedAnimalType);void 0!==r&&(e=r.makeCopy(r))}}),e}getExhaustionOfAnimal(e){var i;return null===(i=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===i?void 0:i.exhaustionStatReduction}getMoraleOfAnimal(e){var i;return null===(i=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===i?void 0:i.morale}generateGrandPrixSegment(e,i){var r=this.globalVar.eventRaceData,a=this.getRemainingEventRaceTime();void 0!==i&&(0===a||null==a)&&(a=i);var c=r.totalDistance/r.totalSegments,d=[],m=new fr;return m.courseType=e.raceCourseType,m.terrain=this.getRandomGrandPrixTerrainFromWeatherCluster(this.globalVar.eventRaceData.weatherCluster,m.courseType,this.getEventStartDateTime().toString()+this.getEventTimePer5Min().toString()),m.distance=c,d.push(m),d.forEach(_=>{_.pathData=this.GenerateRaceLegPaths(_,c)}),new Fr(d,this.globalVar.circuitRank,!1,1,c,a,void 0,void 0,void 0,xt.event,zt.grandPrix)}getGrandPrixRewardCount(){var e=this.globalVar.eventRaceData.rankDistanceMultiplier,i=5,r=this.globalVar.modifiers.find(A=>"metersPerCoinsGrandPrixModifier"===A.text);void 0!==r&&(i=r.value);var a=5,c=this.globalVar.modifiers.find(A=>"metersPerRenownGrandPrixModifier"===A.text);void 0!==c&&(a=c.value);var T=8;return e>1&&(T=0),this.globalVar.eventRaceData.totalDistance/(i*e)+this.globalVar.eventRaceData.totalDistance/(a*e)+4+T}getEventStartDateTime(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,c=new Date,d=new Date,m=new Date,_=new Date;return(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(c.getHours()-r+a.weekStartHour),c.setMinutes(0,0,0),(d=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(d.getHours()-r+a.weekEndHour),d.setMinutes(0,0,0),(m=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(m.getHours()-r+a.weekendStartHour),m.setMinutes(0,0,0),(_=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(_.getHours()-r+a.weekendEndHour),_.setMinutes(0,0,0),e>=c&&e<=d||e>=m&&e<=_?0:e>d?m:c}getCurrentEventStartEndDateTime(e){var i=new Date,r=i.getDay(),a=i.getHours(),c=this.globalVar.eventRaceData,d=new Date,m=new Date,_=new Date,T=new Date;return(d=0===i.getDay()&&a<c.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+c.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-r+c.weekStartDay))).setHours(d.getHours()-a+c.weekStartHour),d.setMinutes(0,0,0),(m=0===i.getDay()&&a<c.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+c.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-r+c.weekEndDay))).setHours(m.getHours()-a+c.weekEndHour),m.setMinutes(0,0,0),(_=0===i.getDay()&&a<c.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+c.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-r+c.weekendStartDay))).setHours(_.getHours()-a+c.weekendStartHour),_.setMinutes(0,0,0),(T=0===i.getDay()&&a<c.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-r+c.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-r+c.weekendEndDay))).setHours(T.getHours()-a+c.weekendEndHour),T.setMinutes(0,0,0),i>=d&&i<=m?e?m:d:i>=_&&i<=T?e?T:_:0}getTimeToEventRace(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,c=new Date,d=new Date,m=new Date,_=new Date;return(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(c.getHours()-r+a.weekStartHour),c.setMinutes(0,0,0),(d=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(d.getHours()-r+a.weekEndHour),d.setMinutes(0,0,0),(m=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(m.getHours()-r+a.weekendStartHour),m.setMinutes(0,0,0),(_=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(_.getHours()-r+a.weekendEndHour),_.setMinutes(0,0,0),e>=c&&e<=d||e>=m&&e<=_?0:e>d?(m.getTime()-e.getTime())/1e3:(c.getTime()-e.getTime())/1e3}getRemainingEventRaceTime(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,c=new Date,d=new Date,m=new Date,_=new Date;return(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(c.getHours()-r+a.weekStartHour),c.setMinutes(0,0,0),(d=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(d.getHours()-r+a.weekEndHour),d.setMinutes(0,0,0),(m=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(m.getHours()-r+a.weekendStartHour),m.setMinutes(0,0,0),(_=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(_.getHours()-r+a.weekendEndHour),_.setMinutes(0,0,0),e>=c&&e<=d||e>=m&&e<=_?e>m?(_.getTime()-e.getTime())/1e3:(d.getTime()-e.getTime())/1e3:0}getEventTimePer5Min(){var e=this.getRemainingEventRaceTime();return Math.floor(e/60/5)}generateTrackRace(e,i){var r=60,a=[],c=new fr;c.courseType=e.raceCourseType,i===Hn.practice?(r=45,c.distance=100,c.terrain=new Kn(Gt.Stormy)):i===Hn.novice?(r=60,c.distance=1e3,c.terrain=new Kn(Gt.Stormy)):i===Hn.intermediate?(r=80,c.distance=1e4,c.terrain=new Kn(Gt.Stormy)):i===Hn.master&&(r=100,c.distance=1e5,c.terrain=new Kn(Gt.Stormy)),a.push(c);var d=0;return a.forEach(m=>{d+=m.distance}),a.forEach(m=>{m.pathData=this.GenerateRaceLegPaths(m,d,i)}),new Fr(a,this.globalVar.circuitRank,!1,1,d,r,void 0,Li.Track,i,xt.trainingTrack)}generateLegacyTrackRace(e,i){var a=[],c=new fr;c.courseType=e.raceCourseType,c.distance=1e6*Math.pow(2,e.legacyRaceCount),c.terrain=new Kn(Gt.Stormy),a.push(c);var d=0;return a.forEach(m=>{d+=m.distance}),a.forEach(m=>{m.pathData=this.GenerateRaceLegPaths(m,d,i)}),new Fr(a,this.globalVar.circuitRank,!1,1,d,100,void 0,Li.Track,i,xt.trainingTrack)}GenerateRaceLegPaths(e,i,r){for(var c=[],d=e.distance,_=Math.round(d/(i/20)),T=!1,A=Lt.Regular,q=d/_,Q=0;Q<_;Q++){var te=new Nr;0!==Q?Q!==_-1?(te.length=d>q?q:d,(d-=te.length)<0&&(d=0),T?te.routeDesign=Lt.Regular:(te.routeDesign=this.GetSpecialRoute(e.courseType,Q+2<_,A),e.specialPathCount+=1,te.isSpecialPath=!0),T=te.routeDesign!==Lt.Regular,te.setStumbleFields(),c.push(te),A=te.routeDesign):(te.length=d,te.routeDesign=e.courseType===Ve.Volcanic?Lt.LastRegular:Lt.Regular,te.setStumbleFields(),c.push(te),A=te.routeDesign):(te.length=q,te.routeDesign=e.courseType===Ve.Volcanic?Lt.FirstRegular:Lt.Regular,te.setStumbleFields(),c.push(te),d-=te.length,A=te.routeDesign)}return c}GetSpecialRoute(e,i,r){var a=Lt.Regular,d=this.utilityService.getRandomInteger(1,3);return 1===d||(2===d?e===Ve.Flatland?a=Lt.S:e===Ve.Mountain?a=Lt.Crevasse:e===Ve.Ocean?a=Lt.Waves:e===Ve.Tundra?a=Lt.Cavern:e===Ve.Volcanic&&(a=Lt.Regular):3===d&&(e===Ve.Flatland?a=Lt.Bumps:e===Ve.Mountain?a=Lt.Gaps:e===Ve.Ocean?a=Lt.Dive:e===Ve.Tundra?a=Lt.Hills:e===Ve.Volcanic&&(a=Lt.SteppingStones))),a}calculateAnimalRacingStats(e,i){var r=e.currentStats.defaultMaxSpeedModifier,a=e.currentStats.defaultAccelerationModifier,c=e.currentStats.defaultStaminaModifier,d=e.currentStats.defaultPowerModifier,m=e.currentStats.defaultFocusModifier,_=e.currentStats.defaultAdaptabilityModifier,T=.02,A=e.getAnimalType().toLowerCase(),q=this.globalVar.modifiers.find(Nt=>Nt.text===A+"DefaultMaxSpeedModifier"),Q=this.globalVar.modifiers.find(Nt=>Nt.text===A+"DefaultAccelerationModifier"),te=this.globalVar.modifiers.find(Nt=>Nt.text===A+"DefaultStaminaModifier"),oe=this.globalVar.modifiers.find(Nt=>Nt.text===A+"DefaultPowerModifier"),de=this.globalVar.modifiers.find(Nt=>Nt.text===A+"DefaultFocusModifier"),be=this.globalVar.modifiers.find(Nt=>Nt.text===A+"DefaultAdaptabilityModifier");null!=q&&(r=q.value),null!=Q&&(a=Q.value),null!=te&&(c=te.value),null!=oe&&(d=oe.value),null!=de&&(m=de.value),null!=be&&(_=be.value);var ce=this.getTraitModifier(e,Dt.topSpeed),ne=this.getTraitModifier(e,Dt.acceleration),Ae=this.getTraitModifier(e,Dt.endurance),Ue=this.getTraitModifier(e,Dt.power),bt=this.getTraitModifier(e,Dt.focus),nt=this.getTraitModifier(e,Dt.adaptability),pt=void 0===i?1:null==i?void 0:i.filter(Nt=>null!==Nt.equippedOrb&&this.getOrbTypeFromResource(Nt.equippedOrb)===Ot.ruby).length,lt=void 0===i?1:null==i?void 0:i.filter(Nt=>null!==Nt.equippedOrb&&this.getOrbTypeFromResource(Nt.equippedOrb)===Ot.amber).length,kt=void 0===i?1:null==i?void 0:i.filter(Nt=>null!==Nt.equippedOrb&&this.getOrbTypeFromResource(Nt.equippedOrb)===Ot.topaz).length,At=void 0===i?1:null==i?void 0:i.filter(Nt=>null!==Nt.equippedOrb&&this.getOrbTypeFromResource(Nt.equippedOrb)===Ot.amethyst).length,Rt=void 0===i?1:null==i?void 0:i.filter(Nt=>null!==Nt.equippedOrb&&this.getOrbTypeFromResource(Nt.equippedOrb)===Ot.sapphire).length,Bt=void 0===i?1:null==i?void 0:i.filter(Nt=>null!==Nt.equippedOrb&&this.getOrbTypeFromResource(Nt.equippedOrb)===Ot.emerald).length,jt=null!==e.equippedOrb&&"Ruby Orb"===e.equippedOrb.name?this.globalVar.orbStats.getMaxSpeedIncrease(pt):1,Ui=null!==e.equippedOrb&&"Amber Orb"===e.equippedOrb.name?this.globalVar.orbStats.getAccelerationIncrease(lt):1,Ht=null!==e.equippedOrb&&"Topaz Orb"===e.equippedOrb.name?this.globalVar.orbStats.getEnduranceIncrease(kt):1,ai=null!==e.equippedOrb&&"Amethyst Orb"===e.equippedOrb.name?this.globalVar.orbStats.getPowerIncrease(At):1,wi=null!==e.equippedOrb&&"Sapphire Orb"===e.equippedOrb.name?this.globalVar.orbStats.getFocusIncrease(Rt):1,yi=null!==e.equippedOrb&&"Emerald Orb"===e.equippedOrb.name?this.globalVar.orbStats.getAdaptabilityIncrease(Bt):1,Ze=this.globalVar.modifiers.find(Nt=>"breedLevelStatModifier"===Nt.text);null!=Ze&&(T=Ze.value),T=1+(T+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var fe=1,oi=1,fi=1,Ai=1,Ki=1,ti=1;e.talentTree.talentTreeType===li.sprint&&(ti=1+e.talentTree.column1Row3Points/100,oi=1+e.talentTree.column2Row3Points/100,Ai=1+e.talentTree.column3Row3Points/100),e.talentTree.talentTreeType===li.longDistance&&(Ki=1+e.talentTree.column1Row3Points/100,fe=1+e.talentTree.column2Row3Points/100,fi=1+e.talentTree.column3Row3Points/100);var en=this.GetAnimalDiminishingReturns(e);e.currentStats.maxSpeedMs=e.currentStats.calculateMaxSpeed(r*T*ce*e.incubatorStatUpgrades.maxSpeedModifier*fe,en,jt),e.currentStats.accelerationMs=e.currentStats.calculateTrueAcceleration(a*T*ne*e.incubatorStatUpgrades.accelerationModifier*oi,en,Ui),e.currentStats.stamina=e.currentStats.calculateStamina(c*T*Ae*e.incubatorStatUpgrades.staminaModifier*fi,en,Ht),e.currentStats.powerMs=e.currentStats.calculateTruePower(d*T*Ue*e.incubatorStatUpgrades.powerModifier*Ai,en,ai),e.currentStats.focusMs=e.currentStats.calculateTrueFocus(m*T*bt*e.incubatorStatUpgrades.focusModifier*Ki,en,wi),e.currentStats.adaptabilityMs=e.currentStats.calculateTrueAdaptability(_*T*nt*e.incubatorStatUpgrades.adaptabilityModifier*ti,en,yi),e.currentStats.burstChance=e.currentStats.calculateBurstChance(T),e.currentStats.burstDistance=e.currentStats.calculateBurstDistance(T),this.updateTrackedMaxStats(e)}getTraitModifier(e,i){var r=1;if(null!=e.trait){var a=e.trait.researchLevel,c=e.trait.researchLevel,d=this.globalVar.modifiers.find(m=>"maximumTraitNegativePercentModifier"===m.text);void 0!==d&&c>d.value&&(c=d.value),e.trait.positiveStatGain===i&&(r+=a/100),e.trait.negativeStatGain===i&&(r-=c/100)}return r}GetAnimalDiminishingReturns(e){var i=e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalVar.resources.find(d=>"Facility Level"===d.name);if(null==r)return i;var a=5,c=this.globalVar.modifiers.find(d=>"facilityLevelModifier"===d.text);return void 0!==c&&(a=c.value),i+r.amount*(a+e.miscStats.diminishingReturnsBonus)}IncreaseAnimalBreedGauge(e,i){e.breedGaugeXp+=i,e.breedGaugeXp>=e.breedGaugeMax&&(e.breedGaugeXp=e.breedGaugeMax,e.autoBreedActive&&this.BreedAnimal(e))}getBreedLevelRequiredForGrandPrix(){var e=50,i=this.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}BreedAnimal(e){if(!(e.breedGaugeXp<e.breedGaugeMax)){var i=5,r=this.globalVar.modifiers.find(Rt=>"breedGaugeMaxIncreaseModifier"===Rt.text);if(null!=r&&(i=r.value),e.breedLevel+=1,e.breedGaugeXp=0,e.breedGaugeMax+=i,null!=this.globalVar.resources.find(Rt=>Rt.name.includes("Incubator Upgrade"))&&null!=e.trait){var c=.001,d=this.globalVar.modifiers.find(Rt=>"incubatorUpgradeIncreaseModifier"===Rt.text);null!=d&&(c=d.value);var m=e.trait.researchLevel*c,_=this.globalVar.resources.find(Rt=>"Incubator Upgrade Lv1"===Rt.name),T=this.globalVar.resources.find(Rt=>"Incubator Upgrade Lv2"===Rt.name),A=this.globalVar.resources.find(Rt=>"Incubator Upgrade Lv3"===Rt.name);null!=this.globalVar.resources.find(Rt=>"Incubator Upgrade Lv4"===Rt.name)?m>.1&&(m=.1):null!=A?m>.05&&(m=.05):null!=T?m>.025&&(m=.025):null!=_&&m>.01&&(m=.01),e.trait.positiveStatGain===Dt.topSpeed&&(e.incubatorStatUpgrades.maxSpeedModifier+=m),e.trait.positiveStatGain===Dt.acceleration&&(e.incubatorStatUpgrades.accelerationModifier+=m),e.trait.positiveStatGain===Dt.endurance&&(e.incubatorStatUpgrades.staminaModifier+=m),e.trait.positiveStatGain===Dt.power&&(e.incubatorStatUpgrades.powerModifier+=m),e.trait.positiveStatGain===Dt.focus&&(e.incubatorStatUpgrades.focusModifier+=m),e.trait.positiveStatGain===Dt.adaptability&&(e.incubatorStatUpgrades.adaptabilityModifier+=m)}var Q=e.baseStats.topSpeed+e.increasedDefaultStats.topSpeed,te=e.baseStats.acceleration+e.increasedDefaultStats.acceleration,oe=e.baseStats.endurance+e.increasedDefaultStats.endurance,de=e.baseStats.power+e.increasedDefaultStats.power,be=e.baseStats.focus+e.increasedDefaultStats.focus,ce=e.baseStats.adaptability+e.increasedDefaultStats.adaptability,ne=this.globalVar.resources.find(Rt=>"Animal Handler"===Rt.name),Ae=this.globalVar.modifiers.find(Rt=>"animalHandlerModifier"===Rt.text);if(null!=ne&&void 0!==Ae&&null!=Ae&&ne.amount>0){var Ue=ne.amount*Ae.value,bt=Math.round((e.currentStats.topSpeed-Q)*Ue),nt=Math.round((e.currentStats.acceleration-te)*Ue),pt=Math.round((e.currentStats.endurance-oe)*Ue),lt=Math.round((e.currentStats.power-de)*Ue),kt=Math.round((e.currentStats.focus-be)*Ue),At=Math.round((e.currentStats.adaptability-ce)*Ue);e.currentStats=new It(Q+bt,te+nt,oe+pt,de+lt,be+kt,ce+At)}else e.currentStats=new It(Q,te,oe,de,be,ce);this.calculateAnimalRacingStats(e),this.globalVar.trackedStats.totalBreeds+=1}}increaseAbilityXp(e,i,r){null!=e.equippedOrb&&!r&&this.getOrbTypeFromResource(e.equippedOrb)===Ot.amethyst&&this.increaseAmethystOrbXp(e);var a=25,c=this.globalVar.modifiers.find(_=>"abilityLevelCapModifier"===_.text);if(null!=c&&(a=c.value),!(e.ability.abilityLevel>e.breedLevel+a)){var d=1;null!=i&&i>1&&(d=i),e.ability.abilityXp+=d,e.ability.abilityXp>=e.ability.abilityMaxXp&&(e.ability.abilityXp=0,e.ability.abilityLevel+=1,e.ability.abilityLevel%10==0&&(e.ability.abilityMaxXp+=5));var m=e.availableAbilities.find(_=>_.name===e.ability.name);null!=m&&(m.abilityXp=e.ability.abilityXp,m.abilityLevel=e.ability.abilityLevel,m.abilityMaxXp=e.ability.abilityMaxXp)}}getBarnListInOrder(){var e=[];return this.globalVar.barnOrder.forEach(i=>{var r=this.globalVar.barns.find(a=>a.barnNumber===i);void 0!==r&&e.push(r)}),e}InitializeResources(){this.globalVar.resources.push(this.initializeService.initializeResource("Coins",500,Le.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Renown",1,Le.Progression))}InitializeKeybinds(){this.globalVar.keybinds.set("Back","B"),this.globalVar.settings.set("Show Food","F"),this.globalVar.settings.set("Shout Encouragement","E"),this.globalVar.settings.set("Blow Whistle","W")}InitializeSettings(){this.themeService.setLightTheme(),this.globalVar.settings.set("theme",this.themeService.getActiveTheme()),this.globalVar.settings.set("skipDrawRace",!1),this.globalVar.settings.set("finishTrainingBeforeSwitching",!0),this.globalVar.settings.set("hideTips",!1),this.globalVar.settings.set("useNumbersForCircuitRank",!1),this.globalVar.settings.set("raceDisplayInfo",No.both),this.globalVar.settings.set("autoStartEventRace",!1),this.globalVar.settings.set("quickViewBarnMode",!1),this.globalVar.settings.set("displayAverageDistancePace",!0),this.globalVar.settings.set("showBarnOptions",!1),this.globalVar.settings.set("monoRaceToggled",!1),this.globalVar.settings.set("duoRaceToggled",!1),this.globalVar.settings.set("rainbowRaceToggled",!1),this.globalVar.settings.set("pinnacleRaceToggled",!1),this.globalVar.settings.set("noviceTrainingTrackToggled",!1),this.globalVar.settings.set("intermediateTrainingTrackToggled",!1),this.globalVar.settings.set("masterTrainingTrackToggled",!1),this.globalVar.settings.set("amberOrbToggled",!1),this.globalVar.settings.set("amethystOrbToggled",!1),this.globalVar.settings.set("emeraldOrbToggled",!1),this.globalVar.settings.set("rubyOrbToggled",!1),this.globalVar.settings.set("sapphireOrbToggled",!1),this.globalVar.settings.set("topazOrbToggled",!1)}InitializeUnlockables(){this.globalVar.unlockables.set("monoRace",!1),this.globalVar.unlockables.set("duoRace",!1),this.globalVar.unlockables.set("rainbowRace",!1),this.globalVar.unlockables.set("thePinnacle",!1),this.globalVar.unlockables.set("scrimmages",!1),this.globalVar.unlockables.set("grandPrix",!1),this.globalVar.unlockables.set("orbs",!1),this.globalVar.unlockables.set("barnRow2",!1),this.globalVar.unlockables.set("barnRow3",!1),this.globalVar.unlockables.set("barnRow4",!1),this.globalVar.unlockables.set("barnRow5",!1),this.globalVar.unlockables.set("coaching",!1),this.globalVar.unlockables.set("barnSpecializations",!1),this.globalVar.unlockables.set("attractionSpecialization",!1),this.globalVar.unlockables.set("researchCenterSpecialization",!1)}getCoinsResourceValue(e){return new Je("Coins",e)}getMedalResourceValue(e){return new Je("Medals",e)}getTokenResourceValue(e){return new Je("Tokens",e)}unlockAnimalAbilities(e){var i=this.globalVar.shop.find(a=>"Abilities"===a.name);if(null!=i){var r=i.itemList.filter(a=>a.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}unlockOtherRaceCourseTypeAnimals(e){var i=this.globalVar.shop.find(a=>"Animals"===a.name);if(null!=i){var r=[];i.itemList.forEach(a=>{var c=this.globalVar.animals.find(d=>d.getAnimalType()===a.name);null!=c&&c.raceCourseType===e&&r.push(a)}),null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}getAnimalDescription(e){var i="";return"Horse"===e?i="The Horse is a Flatland racing animal capable of running without losing stamina and increasing the max speed of relay racers.":"Cheetah"===e?i="The Cheetah is a Flatland racing animal that prioritizes quickness over stamina.":"Hare"===e?i="The Hare is a Flatland racing animal that can instantly enter Burst and increase adaptability and focus.":"Warthog"===e?i="The Warthog is a Flatland racing animal that can increase stats at random and increase Burst Chance after losing focus.":"Monkey"===e?i="The Monkey is a Mountain climbing animal capable of slowing its competitors and leaping to victory.":"Goat"===e?i="The Goat is a Mountain climbing animal that can nimbly travel terrain and increase stamina.":"Gecko"===e?i="The Gecko is a Mountain climbing animal that can increase speed based on focus and can increase other racers' starting velocity.":"Dolphin"===e?i="The Dolphin is an Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay.":"Shark"===e?i="The Shark is an Ocean swimming animal that can slow competitors and increase its own stats at the cost of your other racers.":"Octopus"===e?i="The Octopus is an Ocean swimming animal that can increase your coin rewards from races and increase power of other racers.":"Whale"===e?i="The Whale is an Ocean swimming animal that can set a velocity floor and becomes increasingly faster as the race goes on.":"Penguin"===e?i="The Penguin is a Tundra racing animal that can slide carefully or recklessly.":"Caribou"===e?i="The Caribou is a Tundra racing animal that boosts other racers based on stamina.":"Salamander"===e?i="The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration.":"Fox"===e&&(i="The Fox is a Volcanic racing animal that can increase stats at random."),i}getNumberOfCircuitRankRotations(){return 1+Math.floor((this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank)-1)/26)}sortAnimalOrder(){this.globalVar.animals.sort((e,i)=>e.raceCourseType-i.raceCourseType)}getEquipmentDescription(e){var i="";return"Headband"===e&&(i="The first three stumbles you would have are ignored"),"Pendant"===e&&(i="Reduce your ability cooldown by 10%"),"Blinders"===e&&(i="Negative terrain effects are cut in half"),"Quick Snack"===e&&(i="Gain 100% of Stamina back after running out"),"Red Baton"===e&&(i="Increase next racer's Speed by 10% on Relay"),"Blue Baton"===e&&(i="Increase next racer's Focus by 10% on Relay"),"Violet Baton"===e&&(i="Increase next racer's Power by 10% on Relay"),"Green Baton"===e&&(i="Increase next racer's Adaptability by 10% on Relay"),"Orange Baton"===e&&(i="Increase next racer's Acceleration by 10% on Relay"),"Yellow Baton"===e&&(i="Increase next racer's Endurance by 10% on Relay"),"Amethyst Orb"===e&&(i="Increase your Power Efficiency by "+(100*(this.globalVar.orbStats.getPowerIncrease(1)-1)).toFixed(2)+"%."),"Sapphire Orb"===e&&(i="Increase your Focus Distance by "+(100*(this.globalVar.orbStats.getFocusIncrease(1)-1)).toFixed(2)+"%."),"Amber Orb"===e&&(i="Increase your Acceleration Rate by "+(100*(this.globalVar.orbStats.getAccelerationIncrease(1)-1)).toFixed(2)+"%."),"Topaz Orb"===e&&(i="Increase your Stamina by "+(100*(this.globalVar.orbStats.getEnduranceIncrease(1)-1)).toFixed(2)+"%."),"Emerald Orb"===e&&(i="Increase your Adaptability Distance by "+(100*(this.globalVar.orbStats.getAdaptabilityIncrease(1)-1)).toFixed(2)+"%."),"Ruby Orb"===e&&(i="Increase your Max Speed by "+(100*(this.globalVar.orbStats.getMaxSpeedIncrease(1)-1)).toFixed(2)+"%."),"Scary Mask"===e&&(i="Cause a distraction the first time you lose focus while ahead of competition, slowing competitors by 2 seconds."),"Running Shoes"===e&&(i="After each Burst during a race, increase subsequent Burst distance by 20%."),"Incense"===e&&(i="When your velocity is at least 90% of your Max Speed, immediately set velocity to 100% of your Max Speed."),"Athletic Tape"===e&&(i="While Bursting, decrease Acceleration Rate by 50% but increase Focus Distance and Adaptability Distance by 50%."),i}getItemDescription(e,i){var r="",a=0,c="";return void 0!==i&&(a=100*this.getNectarOfTheGodsIncrease(i),this.globalVar.resources.some(d=>"Orb Infuser"===d.name)&&(c="and your selected Orb's stat gain per level by  "+this.getNectarOfTheGodsOrbInfusionIncrease(i).toFixed(2)+"% ")),"Apples"===e&&(r="+1 Acceleration to a single animal"),"Bananas"===e&&(r="+1 Speed to a single animal"),"Strawberries"===e&&(r="+1 Endurance to a single animal"),"Carrots"===e&&(r="+1 Power to a single animal"),"Turnips"===e&&(r="+1 Focus to a single animal"),"Oranges"===e&&(r="+1 Adaptability to a single animal"),"Mangoes"===e&&(r="+1 Breed Level to a single animal"),"Gingko Leaves"===e&&(r="Reset Breed Level for a single animal back to 1 and remove all incubator upgrade gains. Increase Breed XP Gain by 900% until Breed Level returns to what it was."),"Circuit Race Breed XP Gain Certificate"===e&&(r="Give an animal +2 Bonus Breed XP Gain from Circuit Races. Can use up to 30 of these certificates on any individual animal."),"Free Race Breed XP Gain Certificate"===e&&(r="Give an animal +1 Bonus Breed XP Gain from Free Races. Can use up to 30 of these certificates on any individual animal."),"Training Breed XP Gain Certificate"===e&&(r="Give an animal +1 Bonus Breed XP Gain from Training. Can use up to 30 of these certificates on any individual animal."),"Diminishing Returns Increase Certificate"===e&&(r="Give an animal +1 Diminishing Returns per Facility Level. Can use up to 30 of these certificates on any individual animal."),"Nectar of the Gods"===e&&(r="Drink this to reset Breed Level, Incubator Upgrades, and Ability Levels back to 1. Increase Breed Modifier per Breed Level by "+a.toFixed(2)+"% "+c+"when using this."),r}getSpecializationDescription(e){var i="";return"Breeding Grounds"===e?i="Turn your barn into a habitat based around the optimal breeding environment for your animals. As you progress, your animals will gain more breeding XP from their training.":"Training Facility"===e?i="Pull out all the stops giving your animals the best environment to improve. As you progress, your animals will train faster and gain stats from training at a higher rate.":"Attraction"===e?i="Give the people what they want and turn your barn into a tourist attraction. As you progress, your barn will provide passive income at a steady rate while training.":"Research Center"===e&&(i="Bring in the top names in animal research to optimize your training process. As you progress, your animal will gain reduced stats from training but split its improvements with other animals."),i}getTundraDescription(){return"When racing in the Tundra, your racer will slide all over the race course as they move forward. The higher your Adaptability stat, the better control your racer will have and the less likely they will slide. You lose a percentage of max speed while sliding, and if you slide too much you may hit a wall and come to a complete stop!"}getVolcanicDescription(){return"Volcanic racers make their way while a Volcano ominously looms in the background. As you race, the Volcano will erupt making it impossible to proceed if you get stuck behind the lava flow. If you stay ahead of the average pace for the Volcanic leg of the race, you should have no problem speeding past the lava so make sure your Max Speed and Acceleration are up to the challenge."}handleNectarOfTheGodsReset(e){if(e.miscStats.bonusBreedModifierAmount+=this.getNectarOfTheGodsIncrease(e),this.globalVar.resources.some(a=>"Orb Infuser"===a.name)){var i=this.getNectarOfTheGodsOrbInfusionIncrease(e);if(null!=e.equippedOrb){var r=this.getOrbDetailsFromType(this.getOrbTypeFromResource(e.equippedOrb));void 0!==r&&(r.defaultIncrease+=i/100,r.increasePerLevel+=i/100)}}e.previousBreedLevel=1,e.breedLevel=1,e.breedGaugeMax=200,e.breedGaugeXp=0,e.incubatorStatUpgrades=new Ed,e.ability.abilityLevel=1,e.ability.abilityMaxXp=50,e.ability.abilityXp=0,e.nectarAvailable=!1,e.allTrainingTracks.legacyTrack.rewardsObtained=0,e.legacyRaceCount+=1,e.availableAbilities.forEach(a=>{a.abilityLevel=1,a.abilityMaxXp=50,a.abilityXp=0}),this.calculateAnimalRacingStats(e)}getNectarOfTheGodsIncrease(e,i){var r=e.breedLevel;void 0!==i&&i>0&&(r=i);return(r<=1500?r/100:5*Math.log10(.005*(r-1500)+1)+15)/100}getNectarOfTheGodsOrbInfusionIncrease(e,i){var a=e.breedLevel;return void 0!==i&&i>0&&(a=i),a/1500}updateTrackedMaxStats(e){if(e.isAvailable){if(""===this.globalVar.trackedStats.highestMaxSpeed)this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var i=parseFloat(this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").indexOf(" ")));e.currentStats.maxSpeedMs>i&&(this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAccelerationRate)this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var r=parseFloat(this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").indexOf(" ")));e.currentStats.accelerationMs>r&&(this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestStamina)this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")";else{var a=parseFloat(this.globalVar.trackedStats.highestStamina.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestStamina.replaceAll(",","").indexOf(" ")));e.currentStats.stamina>a&&(this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")")}if(""===this.globalVar.trackedStats.highestPowerEfficiency)this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")";else{var c=parseFloat(this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").indexOf(" ")));e.currentStats.powerMs>c&&(this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")")}if(""===this.globalVar.trackedStats.highestFocusDistance)this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")";else{var d=parseFloat(this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>d&&(this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAdaptabilityDistance)this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")";else{var m=parseFloat(this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>m&&(this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")")}}}shouldShowSlowSegmentWarning(e){var i=!1;if(void 0===e)return i;if((e.currentStats.acceleration<=10||e.currentStats.topSpeed<=10||e.currentStats.endurance<=10||e.currentStats.power<=10||e.currentStats.focus<=10||e.currentStats.adaptability<=10)&&(console.log("Stats too low for "+e.name+": "+e.currentStats.acceleration+" "+e.currentStats.topSpeed+" "+e.currentStats.endurance+" "+e.currentStats.power+" "+e.currentStats.focus+" "+e.currentStats.adaptability),i=!0),null!=this.globalVar.eventRaceData){var a=this.globalVar.eventRaceData.totalDistance/this.globalVar.eventRaceData.totalSegments/this.globalVar.eventRaceData.segmentTime;a>3*e.currentStats.maxSpeedMs&&(console.log("Max Speed Too Low for "+e.name+": "+a+" > "+3*e.currentStats.maxSpeedMs),i=!0),e.currentStats.focusMs<a/5&&(console.log("Not Focused Enough for "+e.name+": "+e.currentStats.focusMs+" < "+a/30),i=!0)}return i}devModeInitialize(e,i){var r,a,c,d,m,_=this.globalVar.resources.find(ne=>"Coins"===ne.name);if(void 0!==_&&(_.amount=1e11),this.globalVar.resources.some(ne=>"Medals"===ne.name)){var T=this.globalVar.resources.find(ne=>"Medals"===ne.name);void 0!==T&&(T.amount+=e+1e7)}else this.globalVar.resources.push(this.initializeService.initializeResource("Medals",e+1e5,Le.Resources));if(this.globalVar.resources.push(this.initializeService.initializeResource("Talent Points",1e3,Le.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Tokens",1e3,Le.Resources)),this.globalVar.resources.some(ne=>"Renown"===ne.name)){var A=this.globalVar.resources.find(ne=>"Renown"===ne.name);void 0!==A&&(A.amount+=5e4)}else this.globalVar.resources.push(this.initializeService.initializeResource("Renown",5e4,Le.Resources));this.globalVar.resources.push(this.initializeService.initializeResource("Facility Level",1e3,Le.Progression)),this.globalVar.resources.push(this.initializeService.initializeResource("Research Level",e,Le.Progression)),this.globalVar.monoRank="AAAZ",this.globalVar.duoRank="AAZ",this.globalVar.rainbowRank="AZ";for(var q=1;q<=e;q++){var Q=this.utilityService.getCircuitRankFromNumericValue(q);this.globalVar.circuitRank=Q,this.checkCircuitRankRewards(),this.GenerateCircuitRacesForRank(this.globalVar.circuitRank)}null===(r=this.globalVar.animalDecks.find(ne=>2===ne.deckNumber))||void 0===r||r.selectedAnimals.push(this.globalVar.animals.find(ne=>ne.type===Fe.Horse)),null===(a=this.globalVar.animalDecks.find(ne=>2===ne.deckNumber))||void 0===a||a.selectedAnimals.push(this.globalVar.animals.find(ne=>ne.type===Fe.Goat)),null===(c=this.globalVar.animalDecks.find(ne=>2===ne.deckNumber))||void 0===c||c.selectedAnimals.push(this.globalVar.animals.find(ne=>ne.type===Fe.Whale)),null===(d=this.globalVar.animalDecks.find(ne=>2===ne.deckNumber))||void 0===d||d.selectedAnimals.push(this.globalVar.animals.find(ne=>ne.type===Fe.Caribou)),null===(m=this.globalVar.animalDecks.find(ne=>2===ne.deckNumber))||void 0===m||m.selectedAnimals.push(this.globalVar.animals.find(ne=>ne.type===Fe.Salamander)),this.globalVar.animalDecks.find(ne=>2===ne.deckNumber).isPrimaryDeck=!0,this.globalVar.animalDecks.find(ne=>2===ne.deckNumber).isEventDeck=!0,this.globalVar.animalDecks.find(ne=>1===ne.deckNumber).isPrimaryDeck=!1,this.globalVar.animalDecks.find(ne=>1===ne.deckNumber).isEventDeck=!1;var te=5,oe=1,de=1;1===i?(te=50,oe=50):2===i?(te=100,oe=250,de=3):3===i?(te=750,oe=750,de=7):4===i&&(te=5e3,oe=1e3,de=12.5),this.globalVar.animals.forEach(ne=>{if((ne.type===Fe.Goat||ne.type===Fe.Caribou||ne.type===Fe.Octopus)&&(ne.isAvailable=!0,ne.availableAbilities.forEach(Ue=>{Ue.isAbilityPurchased=!0,("Deep Breathing"===Ue.name||"Special Delivery"===Ue.name||"Big Brain"===Ue.name)&&(ne.ability=Ue)})),ne.currentStats.topSpeed=te,ne.currentStats.acceleration=te,ne.currentStats.endurance=te,ne.currentStats.power=te,ne.currentStats.focus=te,ne.currentStats.adaptability=te,ne.breedLevel=oe,ne.incubatorStatUpgrades.maxSpeedModifier=de,ne.incubatorStatUpgrades.accelerationModifier=de,ne.incubatorStatUpgrades.staminaModifier=de,ne.incubatorStatUpgrades.powerModifier=de,ne.incubatorStatUpgrades.focusModifier=de,ne.incubatorStatUpgrades.adaptabilityModifier=de,ne.ability.abilityLevel=ne.breedLevel+25,ne.availableAbilities.forEach(Ue=>{Ue.abilityLevel=ne.breedLevel}),i>=4){var Ae=this.utilityService.getRandomInteger(1,3);1===Ae&&(ne.talentTree.talentTreeType=li.sprint),2===Ae&&(ne.talentTree.talentTreeType=li.support),3===Ae&&(ne.talentTree.talentTreeType=li.longDistance),ne.talentTree.column1Row1Points=10,ne.talentTree.column1Row2Points=10,ne.talentTree.column1Row3Points=10,ne.talentTree.column1Row4Points=10,ne.talentTree.column2Row1Points=10,ne.talentTree.column2Row2Points=10,ne.talentTree.column2Row3Points=10,ne.talentTree.column2Row4Points=10,ne.talentTree.column3Row1Points=10,ne.talentTree.column3Row2Points=10,ne.talentTree.column3Row3Points=10,ne.talentTree.column3Row4Points=10}i>=3&&e>=79&&(ne.canEquipOrb=!0,ne.type===Fe.Horse&&(ne.equippedOrb=this.globalVar.resources.find(Ue=>"Sapphire Orb"===Ue.name)),ne.type===Fe.Monkey&&(ne.equippedOrb=this.globalVar.resources.find(Ue=>"Ruby Orb"===Ue.name)),ne.type===Fe.Dolphin&&(ne.equippedOrb=this.globalVar.resources.find(Ue=>"Topaz Orb"===Ue.name)),ne.type===Fe.Penguin&&(ne.equippedOrb=this.globalVar.resources.find(Ue=>"Emerald Orb"===Ue.name)),ne.type===Fe.Salamander&&(ne.equippedOrb=this.globalVar.resources.find(Ue=>"Amber Orb"===Ue.name))),this.calculateAnimalRacingStats(ne)})}}return t.\u0275fac=function(e){return new(e||t)(Ft(Lr),Ft(Fm),Ft(Xl))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ji=(()=>{return(t=ji||(ji={})).None="None",t.BreedingGrounds="Breeding Grounds",t.TrainingFacility="Training Facility",t.Attraction="Attraction",t.ResearchCenter="Research Center",ji;var t})(),Xt=(()=>{return(t=Xt||(Xt={}))[t.inspiration=0]="inspiration",t[t.navigator=1]="navigator",t[t.flowingCurrent=2]="flowingCurrent",t[t.bigBrain=3]="bigBrain",t[t.camouflage=4]="camouflage",t[t.herdMentality=5]="herdMentality",t[t.specialDelivery=6]="specialDelivery",t[t.deepBreathing=7]="deepBreathing",t[t.redBaton=8]="redBaton",t[t.blueBaton=9]="blueBaton",t[t.violetBaton=10]="violetBaton",t[t.greenBaton=11]="greenBaton",t[t.orangeBaton=12]="orangeBaton",t[t.yellowBaton=13]="yellowBaton",t[t.supportMaxSpeedRelay=14]="supportMaxSpeedRelay",t[t.supportAccelerationRelay=15]="supportAccelerationRelay",t[t.supportStaminaRelay=16]="supportStaminaRelay",t[t.supportPowerRelay=17]="supportPowerRelay",t[t.supportFocusRelay=18]="supportFocusRelay",t[t.supportAdaptabilityRelay=19]="supportAdaptabilityRelay",t[t.supportBurstDistance=20]="supportBurstDistance",t[t.supportBurstChance=21]="supportBurstChance",t[t.supportAbilityCooldown=22]="supportAbilityCooldown",t[t.supportAbilityEfficiency=23]="supportAbilityEfficiency",Xt;var t})();let yn=(()=>{class t{constructor(e,i,r){this.globalService=e,this.utilityService=i,this.sanitizer=r}recalculateAllAnimalStats(){this.globalService.globalVar.animals.forEach(e=>{this.globalService.calculateAnimalRacingStats(e)})}getAnimalsFromAnimalDeck(e){var i=[];return null==e||void 0===e.selectedAnimals||0===e.selectedAnimals.length||e.selectedAnimals.forEach(r=>{var a=this.globalService.globalVar.animals.find(c=>c.type===r.type);void 0!==a&&i.push(a)}),i}getPrimaryDeck(){return this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck)}getResourceByName(e){var i=this.globalService.globalVar.resources.find(r=>r.name===e);return void 0!==i?i.amount:0}spendResourceByName(e,i){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount-=i)}gainResourceByName(e,i,r){var a=this.globalService.globalVar.resources.find(c=>c.name===e);void 0!==a?a.amount+=i:this.globalService.globalVar.resources.push(new Je(e,i,r))}getFacilityLevel(){var e=this.globalService.globalVar.resources.find(i=>"Facility Level"===i.name);return void 0!==e?e.amount:0}getResearchLevel(){var e=this.globalService.globalVar.resources.find(i=>"Research Level"===i.name);return void 0!==e?e.amount:0}getCoins(){var e=this.globalService.globalVar.resources.find(i=>"Coins"===i.name);return void 0!==e?e.amount:0}spendCoins(e){var i=this.globalService.globalVar.resources.find(r=>"Coins"===r.name);void 0!==i&&(i.amount-=e)}getMedals(){var e=this.globalService.globalVar.resources.find(i=>"Medals"===i.name);return void 0!==e?e.amount:0}spendMedals(e){var i=this.globalService.globalVar.resources.find(r=>"Medals"===r.name);void 0!==i&&(i.amount-=e)}getTokens(){var e=this.globalService.globalVar.resources.find(i=>"Tokens"===i.name);return void 0!==e?e.amount:0}spendTokens(e){var i=this.globalService.globalVar.resources.find(r=>"Tokens"===r.name);void 0!==i&&(i.amount-=e)}getRenown(){var e=this.globalService.globalVar.resources.find(i=>"Renown"===i.name);return void 0!==e?e.amount:0}addResourceToResourceList(e,i){if(void 0!==i)if(i.some(a=>a.name===e.name)){var r=i.find(a=>a.name===e.name);void 0!==r&&(r.amount+=e.amount)}else i.push(e)}getMonthlyMangoLimit(){var e=0,i=this.globalService.globalVar.modifiers.find(r=>"monthlyMangoDefaultLimit"===r.text);return null!=i&&(e=i.value),e*this.globalService.getNumberOfCircuitRankRotations()}getRenownCoinModifier(e,i){var r=1;return r=e<=50?e:500*Math.log10(.0035*(e-50)+1)+50,i||(r/=100,r+=1),r}getStockbreeder(){var e=this.globalService.globalVar.resources.find(i=>"Stockbreeder"===i.name);return void 0!==e?e.amount:0}getAnimalByType(e){var i=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==i?i:null}getMaxSpeedModifierByAnimalType(e){var i=0,r=.01,a=0,c=this.globalService.globalVar.animals.find(A=>A.type===e);if(null!=c){var d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(r=d.value),r=1+(r+c.miscStats.bonusBreedModifierAmount)*(c.breedLevel-1);var m=this.globalService.globalVar.modifiers.find(A=>A.text===Fe[e].toLowerCase()+"DefaultMaxSpeedModifier");null!=m&&(a=m.value);var _=this.globalService.getTraitModifier(c,Dt.topSpeed),T=1;c.talentTree.talentTreeType===li.longDistance&&(T=1+c.talentTree.column2Row3Points/100),i=a*r*_*c.incubatorStatUpgrades.maxSpeedModifier*T}return i}getAccelerationModifierByAnimalType(e){var i=0,r=.01,a=0,c=this.globalService.globalVar.animals.find(A=>A.type===e);if(null!=c){var d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(r=d.value),r=1+(r+c.miscStats.bonusBreedModifierAmount)*(c.breedLevel-1);var m=this.globalService.globalVar.modifiers.find(A=>A.text===Fe[e].toLowerCase()+"DefaultAccelerationModifier");null!=m&&(a=m.value);var _=this.globalService.getTraitModifier(c,Dt.acceleration),T=1;c.talentTree.talentTreeType===li.sprint&&(T=1+c.talentTree.column2Row3Points/100),i=a*r*_*c.incubatorStatUpgrades.accelerationModifier*T}return i}getStaminaModifierByAnimalType(e){var i=0,r=.01,a=0,c=this.globalService.globalVar.animals.find(A=>A.type===e);if(null!=c){var d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(r=d.value),r=1+(r+c.miscStats.bonusBreedModifierAmount)*(c.breedLevel-1);var m=this.globalService.globalVar.modifiers.find(A=>A.text===Fe[e].toLowerCase()+"DefaultStaminaModifier");null!=m&&(a=m.value);var _=this.globalService.getTraitModifier(c,Dt.endurance),T=1;c.talentTree.talentTreeType===li.longDistance&&(T=1+c.talentTree.column3Row3Points/100),i=a*r*_*c.incubatorStatUpgrades.staminaModifier*T}return i}getPowerModifierByAnimalType(e){var i=0,r=.01,a=0,c=this.globalService.globalVar.animals.find(A=>A.type===e);if(null!=c){var d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(r=d.value),r=1+(r+c.miscStats.bonusBreedModifierAmount)*(c.breedLevel-1);var m=this.globalService.globalVar.modifiers.find(A=>A.text===Fe[e].toLowerCase()+"DefaultPowerModifier");null!=m&&(a=m.value);var _=this.globalService.getTraitModifier(c,Dt.power),T=1;c.talentTree.talentTreeType===li.sprint&&(T=1+c.talentTree.column3Row3Points/100),i=a*r*_*c.incubatorStatUpgrades.powerModifier*T}return i}getFocusModifierByAnimalType(e){var i=0,r=.01,a=0,c=this.globalService.globalVar.animals.find(A=>A.type===e);if(null!=c){var d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(r=d.value),r=1+(r+c.miscStats.bonusBreedModifierAmount)*(c.breedLevel-1);var m=this.globalService.globalVar.modifiers.find(A=>A.text===Fe[e].toLowerCase()+"DefaultFocusModifier");null!=m&&(a=m.value);var _=this.globalService.getTraitModifier(c,Dt.focus),T=1;c.talentTree.talentTreeType===li.longDistance&&(T=1+c.talentTree.column1Row3Points/100),i=a*r*_*c.incubatorStatUpgrades.focusModifier*T}return i}getAdaptabilityModifierByAnimalType(e){var i=0,r=.01,a=0,c=this.globalService.globalVar.animals.find(A=>A.type===e);if(null!=c){var d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(r=d.value),r=1+(r+c.miscStats.bonusBreedModifierAmount)*(c.breedLevel-1);var m=this.globalService.globalVar.modifiers.find(A=>A.text===Fe[e].toLowerCase()+"DefaultAdaptabilityModifier");null!=m&&(a=m.value);var _=this.globalService.getTraitModifier(c,Dt.adaptability),T=1;c.talentTree.talentTreeType===li.sprint&&(T=1+c.talentTree.column1Row3Points/100),i=a*r*_*c.incubatorStatUpgrades.adaptabilityModifier*T}return i}getTrainingBreedGaugeIncrease(e,i){var r=0,a=this.globalService.globalVar.modifiers.find(_=>"trainingBreedGaugeIncrease"===_.text);if(null!=a&&(r=a.value),void 0!==i&&null!=i.miscStats.bonusBreedXpGainFromTraining&&i.miscStats.bonusBreedXpGainFromTraining>0&&(r+=i.miscStats.bonusBreedXpGainFromTraining),e>0){var c=0;if(this.globalService.globalVar.resources.find(_=>"Breeding Grounds Improvements"===_.name)){var d=this.globalService.globalVar.modifiers.find(_=>"breedingGroundsAdditionalAmountModifier"===_.text);void 0!==d&&(c=d.value)}var m=this.globalService.globalVar.modifiers.find(_=>"breedingGroundsSpecializationModifier"===_.text);null!=m&&(r*=1+e*(m.value+c))}return void 0!==i&&i.previousBreedLevel>i.breedLevel&&(r*=10),r}getCircuitBreedGaugeIncrease(e){var i=0,r=this.globalService.globalVar.modifiers.find(a=>"circuitBreedGaugeIncrease"===a.text);return null!=r&&(i=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromCircuitRaces&&e.miscStats.bonusBreedXpGainFromCircuitRaces>0&&(i+=e.miscStats.bonusBreedXpGainFromCircuitRaces),void 0!==e&&e.previousBreedLevel>e.breedLevel&&(i*=10),i}getLocalBreedGaugeIncrease(e){var i=0,r=this.globalService.globalVar.modifiers.find(a=>"localBreedGaugeIncrease"===a.text);return null!=r&&(i=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromLocalRaces&&e.miscStats.bonusBreedXpGainFromLocalRaces>0&&(i+=e.miscStats.bonusBreedXpGainFromLocalRaces),void 0!==e&&e.previousBreedLevel>e.breedLevel&&(i*=10),i}getTotalRacersByRace(e){var i=2;return e.localRaceType===Li.Track?(i=13,e.trackRaceType===Hn.legacy&&(i=5)):this.getResourceByName("Money Mark")>0&&(i+=1),i}getDiminishingReturnsThreshold(e){var i=null==e?20:e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalService.globalVar.modifiers.find(a=>"facilityLevelModifier"===a.text);return void 0!==r&&(i+=this.getFacilityLevel()*r.value),i}getBreedLevelPopover(e){var i=.2,r=this.globalService.globalVar.modifiers.find(a=>"breedLevelStatModifier"===a.text);return null!=r&&(i=r.value),"Increase racing stat gain from base stats by "+((i+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1)*100).toFixed(0)+"%"}getResourcePopover(e,i){if("Coins"===e)return"Good ol classic Coins. Gain from most races and buy items from the shop with this.";if("Medals"===e)return"Rare currency gained from improving your circuit rank.";if("Renown"===e){var r=this.getRenown();return"Increases Coins gained from races by "+this.getRenownCoinModifier(r,!0).toFixed(2)+"%. Increase total number of free races available per reset period by 1 for every 100 renown for a total of "+this.getTotalFreeRacesPerPeriod()+". Complete circuit or free races to get your name out there and raise your renown."}return"Facility Level"===e?"Increase Diminishing Returns value by 5 for each level for a total of "+this.getDiminishingReturnsThreshold()+". You can increase a base stat up to your Diminishing Returns value before that base stat starts to increase your racing stats less and less.":"Tokens"===e?"Currency used to purchase items from the Event Shop.":"Talent Points"===e?"Use to improve any of your racers' talents. Each of these applies to all racers.":"Research Level"===e?"Increase incubator trait values by "+this.getResourceByName(e)+"% and unlock new available traits.":"Apples"===e||"Bananas"===e||"Oranges"===e||"Strawberries"===e||"Turnips"===e||"Carrots"===e||"Mangoes"===e?this.globalService.getItemDescription(e):"Bonus Breed XP Gain From Training"===e?"Increase Breed XP gained from training by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Free Races"===e?"Increase Breed XP gained from completing free races by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Circuit Races"===e?"Increase Breed XP gained from completing circuit races by this amount. Only applies to this animal.":"Diminishing Returns per Facility Level"===e?"Increase Diminishing Returns value by this amount for every Facility Level you have. Only applies to this animal.":"Orb Pendant"===e?"This looks like the perfect size to fit an orb inside.":"Bonus Base Ability Efficiency"===e?"Increase Ability Efficiency by this amount. Only applies to this animal.":"Bonus Orb XP Gain"===e?"Increase the amount of XP gained for orbs by this amount. Only applies to this animal.":"Nectar of the Gods"===e?"Drink this to reset Breed Level, Incubator Upgrades, and Ability Levels back to 1. Increase Breed Modifier per Breed Level based on your Breed Level when using this.":"Training Time Reduction"===e?"Reduce training times by this percent. Only applies to this animal.":"Bonus Talents"===e?"Increase talent point amount for this animal.":"Amethyst Orb Level Up"===e?"Increase the max level of your Amethyst Orb.":"Amber Orb Level Up"===e?"Increase the max level of your Amber Orb.":"Emerald Orb Level Up"===e?"Increase the max level of your Emerald Orb.":"Ruby Orb Level Up"===e?"Increase the max level of your Ruby Orb.":"Sapphire Orb Level Up"===e?"Increase the max level of your Sapphire Orb.":"Topaz Orb Level Up"===e?"Increase the max level of your Topaz Orb.":i===Le.Specialty?this.getSpecialtyItemDescription(e):i===Le.Equipment?this.globalService.getEquipmentDescription(e):""}getAllRaceCourseTypes(){var e=[];for(let i in Ve)isNaN(Number(i))&&e.push(i);return e}getCourseTypeFromAnimalType(e){var i=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==i?i.raceCourseType:-1}getTalentTreeNameByEnum(e){var i="";return e===li.sprint&&(i="Sprint"),e===li.support&&(i="Support"),e===li.longDistance&&(i="Long Distance"),i}getAllBarnSpecializations(){var e=[];return e.push("Breeding Grounds"),e.push("Training Facility"),this.isItemUnlocked("attractionSpecialization")&&e.push("Attraction"),this.isItemUnlocked("researchCenterSpecialization")&&e.push("Research Center"),e}getTrackRaceRewards(e){var i=[];return e===Hn.novice?(i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races")):e===Hn.intermediate?(i.push("- 200 Coins"),i.push("- +2 Bonus Breed XP Gain From Training"),i.push("- 1 Medal"),i.push("- +2 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- +5 Bonus Breed XP Gain From Circuit Races"),i.push("- 200 Coins"),i.push("- +2 Bonus Breed XP Gain From Training"),i.push("- 1 Medal"),i.push("- +2 Bonus Breed XP Gain From Free Races"),i.push("- +1% Training Time Reduction"),i.push("- +3 Diminishing Returns per Facility Level")):e===Hn.master?(i.push("- +5 Bonus Breed XP Gain From Free Races"),i.push("- +2 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- 1000 Coins"),i.push("- +3 Bonus Breed XP Gain From Training"),i.push("- +2 Talents"),i.push("- +1% Training Time Reduction"),i.push("- 1000 Coins"),i.push("- Orb Pendant"),i.push("- +3 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- +3 Talents")):e===Hn.legacy&&(i.push("- +5 Bonus Breed XP Gain From Training"),i.push("- +5% Base Ability Efficiency Increase"),i.push("- +10% Orb XP Gain Increase"),i.push("- Nectar of the Gods")),i}getGrandPrixTokenRewards(){var e=[],i=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,r=5e7,a=this.globalService.globalVar.modifiers.find(be=>"grandPrixToken1MeterModifier"===be.text);null!=a&&(r=a.value);var c=5e7,d=this.globalService.globalVar.modifiers.find(be=>"grandPrixToken2MeterModifier"===be.text);null!=d&&(c=d.value);var m=5e7,_=this.globalService.globalVar.modifiers.find(be=>"grandPrixToken3MeterModifier"===be.text);null!=_&&(m=_.value);var T=5e7,A=this.globalService.globalVar.modifiers.find(be=>"grandPrixToken4MeterModifier"===be.text);null!=A&&(T=A.value);var q=this.getTokenModifier(),Q=1*q,te=2*q,oe=3*q,de=4*q;return e.push((r*i).toLocaleString()+" meters - +"+Q+" Token"+(Q>1?"s":"")),e.push((c*i).toLocaleString()+" meters - +"+te+" Tokens"),e.push((m*i).toLocaleString()+" meters - +"+oe+" Tokens"),e.push((T*i).toLocaleString()+" meters - +"+de+" Tokens"),e}getRenownRequiredForEventShopTier(e){return 1===e?0:2===e?200:e>2?500*(e-2):-1}getHighestEventShopTierUnlocked(){var e=1,i=this.getRenown();return i>200&&(e=2),i>500&&(e=Math.floor(i/500)+2),e}isItemUnlocked(e){var i=!1,r=this.globalService.globalVar.unlockables.get(e);return null!=r&&(i=r),i}getAnimalsByRaceCourseType(e){var i=[];return"Flatland"===e?(i.push(Fe[Fe.Horse]),i.push(Fe[Fe.Cheetah]),i.push(Fe[Fe.Hare]),i.push(Fe[Fe.Warthog])):"Mountain"===e?(i.push(Fe[Fe.Monkey]),i.push(Fe[Fe.Goat]),i.push(Fe[Fe.Gecko])):"Ocean"===e?(i.push(Fe[Fe.Dolphin]),i.push(Fe[Fe.Shark]),i.push(Fe[Fe.Octopus]),i.push(Fe[Fe.Whale])):"Tundra"===e?(i.push(Fe[Fe.Penguin]),i.push(Fe[Fe.Caribou])):"Volcanic"===e&&(i.push(Fe[Fe.Salamander]),i.push(Fe[Fe.Fox])),i}GetAbilityEffectiveAmount(e,i,r,a,c,d){if(null==e.ability||null==e.ability.name)return-1;null==r&&(r=1),null==a&&(a=1);var m=1;e.type===Fe.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(m*=.75),e.type===Fe.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(m*=1.5),e.type===Fe.Warthog&&"Graze"===e.ability.name&&void 0!==d&&(m*=1+.1*d.filter(be=>"Power"===be[0]).length),e.talentTree.talentTreeType===li.sprint&&(m*=1+.05*e.talentTree.column3Row2Points);var _=e.ability;null!=c&&(_=c);var T=1;null!=e.talentTree&&null!=e.raceVariables&&e.talentTree.talentTreeType===li.sprint&&!e.raceVariables.firstAbilityUseEffectApplied&&(T*=1+.05*e.talentTree.column3Row4Points,"Leap"!==e.ability.name&&(e.raceVariables.firstAbilityUseEffectApplied=!0));var A=1;if(null!=e.raceVariables&&null!=e.raceVariables.relayEffects){var q=this.getRelayEffectFromListByType(e.raceVariables.relayEffects,Xt.supportAbilityEfficiency);void 0!==q&&void 0!==q.additionalValue&&(A=q.additionalValue)}var Q=1;void 0!==i&&i.containsCondition(cr[cr.reduceAbilityEfficiency])&&(Q=.01);var de=_.efficiency*(1+e.miscStats.bonusAbilityEfficiency)*A*T+_.efficiency*(.01*(_.abilityLevel-1));return(de*=Q)*(1+e.currentStats.powerMs*m*r*a/100)}getAnimalAbilityDescription(e,i,r){if(e){if("Second Wind"===i)return"Reduce stamina loss for a short period";if("Inspiration"===i)return"Increase next racer's max speed on relay";if("Pacemaker"===i)return"Increase acceleration for a short period";if("Sprint"===i)return"Increase max speed, acceleration, stamina cost for a short period";if("Giving Chase"===i)return"Increase acceleration when behind competitors";if("On The Hunt"===i)return"Gain max speed after each burst";if("Awareness"===i)return"Increase adaptability, focus for a short period";if("Prey Instinct"===i)return"Start in extended burst mode";if("Nap"===i)return"Delay leg start, increase max speed and focus";if("Graze"===i)return"Increase stats at random";if("Mud Pit"===i)return"Focus loss is longer, gain acceleration and lose less stamina";if("Time To Tussle"===i)return"Delay competitors when you complete your leg faster than the average pace";if("Landslide"===i)return"Delay competitors";if("Frenzy"===i)return"Increase burst distance, cannot stumble or lose focus during burst";if("Leap"===i)return"Jump to the end of the leg";if("Echolocation"===i)return"Increase adaptability, ignore negative terrain effects for a short period";if("Navigator"===i)return"Increase previous and next racer's adaptability";if("Flowing Current"===i)return"Increase next racer's acceleration on relay";if("Apex Predator"===i)return"Slow competitors if they pass you";if("Feeding Frenzy"===i)return"Slow next and previous racers, increase max speed and acceleration for a distance";if("Blood In The Water"===i)return"Increase max speed when ahead of competitors";if("Propulsion"===i)return"Dash a short distance";if("Buried Treasure"===i)return"Delay your start, increase coin gain for winning race";if("Big Brain"===i)return"Increase power of other racers after bursting a certain number of times";if("Storing Power"===i)return"Reduce max speed, gain increased max speed on burst";if("Unparalleled Focus"===i)return"Gain velocity floor after keeping focus for long enough";if("Whalesong"===i)return"Gain different stat boosts on use";if("Sure-footed"===i)return"Increase adaptability after not stumbling through path";if("Deep Breathing"===i)return"Regain stamina after burst, increase other racers' stamina";if("In The Rhythm"===i)return"Increase burst speed bonus";if("Sticky"===i)return"Cannot stumble for a short period";if("Night Vision"===i)return"Increase max speed by keeping focused";if("Camouflage"===i)return"Transfer velocity to next racer on relay";if("Herd Mentality"===i)return"Grant next racer portion of your stamina, they start in burst mode";if("Great Migration"===i)return"Sacrifice stamina for acceleration for a short period";if("Special Delivery"===i)return"Increase other racers' burst velocity bonus based on stamina";if("Careful Toboggan"===i)return"Increase adaptability for a short period";if("Wild Toboggan"===i)return"Increase max drift penalty, acceleration based on drift";if("Quick Toboggan"===i)return"Increase max speed if you do not drift";if("Cold Blooded"===i)return"Reduce stamina loss and increase focus distance for a short period based on distance in leg";if("Burrow"===i)return"Avoid lava fall, prevent stumbles for a short period";if("Heat Up"===i)return"Increase acceleration for a short period, gets stronger every use";if("Trickster"===i)return"Decrease one random stat, increase a different random stat for a short period";if("Fleeting Speed"===i)return"Increase max speed greatly, lose over time";if("Nine Tails"===i)return"Increase random stat for a short period, effect can stack"}else{var a="",c=void 0;if(null==r&&this.globalService.globalVar.animals.forEach(T=>{T.availableAbilities.forEach(A=>{A.name===i&&(r=T,c=A,null!=A.cooldown&&(a=A.cooldown.toString()))})}),null!=r){var d=this.GetAbilityEffectiveAmount(r,void 0,void 0,void 0,c).toLocaleString(void 0,{minimumFractionDigits:2});""===a&&null!=r.ability.cooldown&&(a=r.ability.cooldown.toString());var m="";return"Second Wind"===i?"Reduce stamina loss by 90% for <span class='keyword'>"+d+"</span> meters. "+a+" second cooldown.":"Inspiration"===i?"When the next racer starts, they gain 25% of your Max Speed for <span class='keyword'>"+d+"</span> meters. Passive.":"Pacemaker"===i?"Increase Acceleration Rate by 50% for <span class='keyword'>"+d+"</span> meters. "+a+" second cooldown.":"Sprint"===i?" Gain 35% Max Speed and Acceleration Rate for <span class='keyword'>"+d+"</span> meters, but lose twice as much stamina as normal. "+a+" second cooldown.":"Giving Chase"===i?"While you are behind the average pace, increase Acceleration Rate by <span class='keyword'>"+d+"</span> m/s\xb2. Passive.":"On The Hunt"===i?"Every time you Burst, increase your Max Speed by <span class='keyword'>"+d+"</span> m/s for the rest of the race. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Awareness"===i?"Boosts Focus Distance and Adaptability Distance by 40% for <span class='keyword'>"+d+"</span> meters. "+a+" second cooldown.":"Prey Instinct"===i?"Starts its leg in Burst mode that continues for an additional <span class='keyword'>"+d+"</span> meters. Passive.":"Nap"===i?"Sleep until the competition has traveled a distance equal to <span class='keyword'>"+d+"</span> meters from the end of your leg. Max Speed and Focus Distance are then doubled. Passive.":"Graze"===i?"Forage for food, gaining a 10% increase to a random stat for <span class='keyword'>"+d+"</span> meters. This effect can stack. "+a+" second cooldown.":"Mud Pit"===i?"Right after losing focus, roll in a mud pit for 1 second. Afterwards, reduce Stamina loss by 25% and increase Burst Chance by 25% for <span class='keyword'>"+d+"</span> meters. Passive.":"Time To Tussle"===i?"If you finish your leg before the average competition, tangle with them as they pass the end of your leg. Slow them by <span class='keyword'>"+d+"</span> meters. Passive.":"Landslide"===i?"Drop rocks on competitors, delaying them <span class='keyword'>"+d+"</span> meters. "+a+" second cooldown.":"Frenzy"===i?"Increase Burst distance by <span class='keyword'>"+d+"</span> meters. You do not stumble or lose focus while bursting. Passive.":"Leap"===i?"When you are <span class='keyword'>"+d+"</span> meters from the end of the leg, leap straight to the end over .5 seconds. Passive.":"Sure-footed"===i?"When you make it through a special path without stumbling, increase your Adaptability Distance by <span class='keyword'>"+d+"</span> m. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Deep Breathing"===i?"Every time you Burst, regain <span class='keyword'>"+d+"</span> stamina, up to 100% of your total stamina. If this amount exceeds 100% of your stamina, increase all other racers' stamina by the amount exceeded up to 200% of your total stamina. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"In The Rhythm"===i?"Increase your Burst Velocity Bonus by 50% for the first <span class='keyword'>"+d+"</span> meters of every Burst. Passive.":"Sticky"===i?"Cannot stumble for <span class='keyword'>"+d+"</span> meters. "+a+" second cooldown.":"Night Vision"===i?"Every time you clear a path without losing focus, increase your Max Speed by <span class='keyword'>"+d+"</span> m/s for the rest of the race. Reset this bonus back to 0 whenever you lose focus. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Camouflage"===i?"The velocity you finish your leg at is given to your following racer on Relay. Decrease this amount to 0 evenly over <span class='keyword'>"+d+"</span> meters. The following racer can break their max speed by up to 50% while this is active. Passive.":"Echolocation"===i?"Increase your Adaptability Distance by 75% for <span class='keyword'>"+d+"</span> meters and ignore any negative effects from the terrain. "+a+" second cooldown.":"Navigator"===i?"Assist the previous racer and next racer, boosting their Adaptability Distance by 25% of your max for the last and first <span class='keyword'>"+d+"</span> meters of their legs respectively. Passive.":"Flowing Current"===i?"When relaying, increase the Acceleration Rate of your next racer by 25% of your Acceleration Rate for <span class='keyword'>"+d+"</span> meters. Passive.":"Apex Predator"===i?"If the competitors moving at the average pace pass the shark during its leg, immediately bite them, slowing their pace by 50% for <span class='keyword'>"+d+"</span> meters. Can only occur once. Passive.":"Feeding Frenzy"===i?"Increase Max Speed and Acceleration Rate by 50% for the first and last <span class='keyword'>"+d+"</span> meters of your leg. Your next and previous racers have a 10% Max Speed reduction. Passive.":"Blood In The Water"===i?"While you are ahead of the average pace, increase Max Speed by <span class='keyword'>"+d+"</span> m/s. Passive.":"Propulsion"===i?"Dash <span class='keyword'>"+d+"</span> meters over .25 seconds. "+a+" second cooldown.":"Buried Treasure"===i?"Delay your start to search for treasure until the competition has traveled a distance equal to <span class='keyword'>"+d+"</span> meters from the end of your leg. If you still win the race, increase your Coin reward by 25%. Passive.":"Big Brain"===i?"After Bursting through one third of your race paths, add <span class='keyword'>"+d+"</span>% to the Power Efficiency of all remaining racers. Passive.<br/><em>During Event Races:</em> Can trigger up to 5 times. Effects remain for the duration of the race.":"Storing Power"===i?"On use, reduce Max Speed by 10% for <span class='keyword'>"+d+"</span> meters. If you burst while this is active, regain double the amount of Max Speed lost for the rest of the race. "+a+" second cooldown.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Unparalleled Focus"===i?"Every time you complete 3 paths in a row without losing focus, gain a 20% velocity floor for <span class='keyword'>"+d+"</span> meters. While this is active, your velocity cannot drop below 20% of your Max Speed, and all calculations will consider that number to be 0% of your Max Speed. Passive.":"Whalesong"===i?"Gain 30% to a particular stat for <span class='keyword'>"+d+"</span> meters based on how many times you have used this ability, as follows:<br/>First Use - Gain 30% Adaptability Distance.<br/>Second Use - Gain 30% Burst Distance.<br/>Third Use - Gain 30% Acceleration Rate.<br/>Fourth Use - Gain 30% Focus Distance.<br/>Fifth Use - Gain 30% Max Speed.<br/>After 5 uses, every subsequent use will give 30% to all of these stats. "+ +a+" second cooldown.":"Herd Mentality"===i?"After completing your leg, <span class='keyword'>"+d+"</span> Stamina plus 10% of your remaining Stamina is given to the next racer and they start their leg in Burst mode. This does not occur if you run out of Stamina during your leg. Passive.":"Great Migration"===i?"Reduce stamina by 10%. For <span class='keyword'>"+d+"</span> meters, Acceleration Rate is increased by 25% of the amount of stamina lost. "+a+" second cooldown.":"Special Delivery"===i?"After completing your leg, increase Stamina by <span class='keyword'>"+d+"</span>, up to 125% of your total stamina. Increase all remaining racers' Burst Velocity Bonus by your remaining stamina percentage. This does not occur if you run out of Stamina during your leg. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 10%. Can trigger up to 25 times. This does not occur if your energy is below 100% at the end of the segment. Effects remain for the duration of the race.":"Careful Toboggan"===i?"Increase Adaptability Distance by 60% for <span class='keyword'>"+d+"</span> meters. "+a+" second cooldown.":"Wild Toboggan"===i?"Double the maximum amount of drift per path. Increase Acceleration Rate by up to <span class='keyword'>"+d+"</span> m/s\xb2 based on how much you drift. Passive.":"Quick Toboggan"===i?"Every time you clear a path without drifting, increase your Max Speed by <span class='keyword'>"+d+"</span> m/s for the rest of the race. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Cold Blooded"===i?"Increase Focus Distance and reduce Stamina loss by up to 50% depending on how close to the center of the volcano you are. These bonuses last <span class='keyword'>"+d+"</span> meters. "+a+" second cooldown.":"Burrow"===i?"Go underground for <span class='keyword'>"+d+"</span> meters, dodging lava fall and preventing stumbles. "+a+" second cooldown.":"Heat Up"===i?"Increase Acceleration Rate by 15% for <span class='keyword'>"+d+"</span> meters. This increase doubles every subsequent use this race. "+a+" second cooldown.":"Trickster"===i?"When active, sacrifice 25% of one random stat for 50% of another random stat. Lasts <span class='keyword'>"+d+"</span> meters. "+a+" second cooldown.":"Fleeting Speed"===i?"Increase Max Speed by <span class='keyword'>"+d+"</span> m/s. Decrease this bonus by 2% for every percent of the leg you complete, down to 0 after you reach the half way point. Passive.":"Nine Tails"===i?"At the start of each path, increase either Acceleration Rate, Max Speed, Focus Distance, or Adaptability Distance by 15% for <span class='keyword'>"+d+"</span> meters. This effect can stack. Passive.":(null===(m=this.sanitizer.sanitize(vn.HTML,this.sanitizer.bypassSecurityTrustHtml(m)))&&(m=""),m)}}return""}getBarnByBarnNumber(e){return this.globalService.globalVar.barns.find(i=>i.barnNumber===e)}getAvailableBarns(){var e=[];return e.push(this.getBarnByBarnNumber(1)),e.push(this.getBarnByBarnNumber(2)),e.push(this.getBarnByBarnNumber(3)),this.isItemUnlocked("barnRow2")&&(e.push(this.getBarnByBarnNumber(4)),e.push(this.getBarnByBarnNumber(5)),e.push(this.getBarnByBarnNumber(6))),this.isItemUnlocked("barnRow3")&&(e.push(this.getBarnByBarnNumber(7)),e.push(this.getBarnByBarnNumber(8)),e.push(this.getBarnByBarnNumber(9))),this.isItemUnlocked("barnRow4")&&(e.push(this.getBarnByBarnNumber(10)),e.push(this.getBarnByBarnNumber(11)),e.push(this.getBarnByBarnNumber(12))),this.isItemUnlocked("barnRow5")&&(e.push(this.getBarnByBarnNumber(13)),e.push(this.getBarnByBarnNumber(14)),e.push(this.getBarnByBarnNumber(15))),e}getResourcesForBarnUpgrade(e){var i=[],r=100;if(e<10)r=50;else if(r=100*(e-9),e>=100&&(r=9100+500*(e-99)),e>=200&&(r=59100+1e3*(e-199)),e>=300&&(r=159100+2500*(e-299)),e>=400){var m=Math.ceil((e-399)/100);r=409100;for(var T=1;T<=m;T++){var A=e-(400+100*(T-1)-1);A>100&&(A=100),r+=2500*(T+1)*A}}var q=new Je("Coins",r);if(i.push(q),e%10==9){var Q;Q=Math.ceil(e/100);var te=new Je("Medals",1*Q);i.push(te)}return i}getTalentResetCost(e){var i=25e4,r=this.globalService.globalVar.animals.find(a=>a.type===e);return void 0===r?i:r.freeTalentResetCount>0?i=0:(0===r.talentResetCount||(i*=r.talentResetCount+1),i)}getBarnName(e){var i="",r=e.getSize();return(e.barnUpgrades.specialization===ji.None||null==e.barnUpgrades.specialization)&&(i=r+" Barn "+e.barnNumber),e.barnUpgrades.specialization===ji.Attraction&&(i=r+" Attraction "+e.barnNumber),e.barnUpgrades.specialization===ji.BreedingGrounds&&(i=r+" Breeding Grounds "+e.barnNumber),e.barnUpgrades.specialization===ji.TrainingFacility&&(i=r+" Training Facility "+e.barnNumber),e.barnUpgrades.specialization===ji.ResearchCenter&&(i=r+" Research Center "+e.barnNumber),i}getAnimalNameFromBarn(e){var i="Empty Barn",r=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber===e.barnNumber);return void 0!==r&&(i=r.name),i}getTerrainPopoverText(e,i){var r="";void 0!==i&&(r="Terrain for the "+i.getCourseTypeName()+" leg is "+e.getTerrainType()+": <br/>"),null!=e.staminaModifier&&1!==e.staminaModifier&&(r+=e.staminaModifier>1?"+"+(100*(e.staminaModifier-1)).toFixed(0)+"% stamina loss <br/>":"-"+(100*(1-e.staminaModifier)).toFixed(0)+"% stamina loss <br/>"),null!=e.maxSpeedModifier&&1!==e.maxSpeedModifier&&(r+=e.maxSpeedModifier>1?"+"+(100*(e.maxSpeedModifier-1)).toFixed(0)+"% max speed<br/>":"-"+(100*(1-e.maxSpeedModifier)).toFixed(0)+"% max speed<br/>"),null!=e.accelerationModifier&&1!==e.accelerationModifier&&(r+=e.accelerationModifier>1?"+"+(100*(e.accelerationModifier-1)).toFixed(0)+"% acceleration<br/>":"-"+(100*(1-e.accelerationModifier)).toFixed(0)+"% acceleration<br/>"),null!=e.powerModifier&&1!==e.powerModifier&&(r+=e.powerModifier>1?"+"+(100*(e.powerModifier-1)).toFixed(0)+"% power efficiency<br/>":"-"+(100*(1-e.powerModifier)).toFixed(0)+"% power efficiency<br/>"),null!=e.focusModifier&&1!==e.focusModifier&&(r+=e.focusModifier>1?"+"+(100*(e.focusModifier-1)).toFixed(0)+"% meters before losing focus<br/>":"-"+(100*(1-e.focusModifier)).toFixed(0)+"% meters before losing focus<br/>"),null!=e.adaptabilityModifier&&1!==e.adaptabilityModifier&&(r+=e.adaptabilityModifier>1?"+"+(100*(e.adaptabilityModifier-1)).toFixed(0)+"% meters before stumbling<br/>":"-"+(100*(1-e.adaptabilityModifier)).toFixed(0)+"% meters before stumbling<br/>");var a=this.utilityService.getSanitizedHtml(r);return null!=a&&(r=a),r}getInDepthSpecializationDescription(e){var i="";if("Breeding Grounds"===e){var r=0,a=this.globalService.globalVar.modifiers.find(ce=>"breedingGroundsSpecializationModifier"===ce.text);null!=a&&(r=a.value),i="For every 10 levels, gain "+100*r+"% additional breed XP when completing a training."}else if("Training Facility"===e)i="For every 10 levels up to level 100, gain 2% training time reduction. For every 10 levels after level 100, gain a .1 stat multiplier for every stat.";else if("Attraction"===e){var c=60,d=this.globalService.globalVar.modifiers.find(ce=>"attractionTimeToCollectModifier"===ce.text);null!=d&&(c=d.value);this.globalService.globalVar.modifiers.find(ce=>"attractionAmountModifier"===ce.text);i="Gain a certain amount of Coins every "+c+" seconds while an animal trains in this barn. At level 10, you gain 20 Coins and every subsequent 10 levels adds an additional 20 Coins * Specialization Level."}else if("Research Center"===e){var T=this.globalService.globalVar.modifiers.find(ce=>"researchCenterIncrementsModifier"===ce.text),A=this.globalService.globalVar.modifiers.find(ce=>"researchCenterTrainingAnimalModifier"===ce.text),q=this.globalService.globalVar.modifiers.find(ce=>"researchCenterStudyingAnimalModifier"===ce.text),Q=this.globalService.globalVar.modifiers.find(ce=>"researchCenterMaxStatGainModifier"===ce.text),te=.05,oe=.45,de=.25,be=.5;null!=T&&(te=T.value),null!=A&&(oe=A.value),null!=q&&(de=q.value),null!=Q&&(be=Q.value),i="To start, the animal training at the Research Center only gains "+100*(oe+te)+"% of the stat values from their training. Another animal at random will gain "+100*de+"% of the stat values from training, prioritizing animals of the same course type. For every 10 levels, "+100*te+"% additional stat gain will be distributed up to "+100*be+"% to the other animal. Additional animals will gain stats after maxing out the previous."}return i}convertSpecializationNameToEnum(e){return"Breeding Grounds"===e?ji.BreedingGrounds:"Training Facility"===e?ji.TrainingFacility:"Attraction"===e?ji.Attraction:"Research Center"===e?ji.ResearchCenter:ji.None}convertTalentTreeNameToEnum(e){return"Sprint"===e?li.sprint:"Support"===e?li.support:"Long Distance"===e?li.longDistance:li.none}convertSpecializationEnumToName(e){return e===ji.BreedingGrounds?"Breeding Grounds":e===ji.TrainingFacility?"Training Facility":e===ji.Attraction?"Attraction":e===ji.ResearchCenter?"Research Center":"None"}getTrainingTimeReductionFromTrainingFacility(e){if(e.specialization===ji.TrainingFacility){var i=e.specializationLevel;return i>10&&(i=10),.02*i}return 0}getTrainingProgressionAnimationText(e){var i="";return e.affectedStatRatios.topSpeed>0&&(i+="+SPD\n"),e.affectedStatRatios.acceleration>0&&(i+="+ACC\n"),e.affectedStatRatios.endurance>0&&(i+="+END\n"),e.affectedStatRatios.power>0&&(i+="+PWR\n"),e.affectedStatRatios.focus>0&&(i+="+FCS\n"),e.affectedStatRatios.adaptability>0&&(i+="+ADP\n"),i}relayEffectTypeStacksEffectiveness(e){var i=!1;return(e===Xt.bigBrain||e===Xt.herdMentality||e===Xt.deepBreathing||e===Xt.specialDelivery)&&(i=!0),i}relayEffectPersistsEventSegments(e){var i=!1;return(e===Xt.bigBrain||e===Xt.redBaton||e===Xt.blueBaton||e===Xt.greenBaton||e===Xt.orangeBaton||e===Xt.violetBaton||e===Xt.yellowBaton)&&(i=!0),i}getBreedLevelRequiredForGrandPrix(){var e=50,i=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}canAnimalTrain(e){var i=!0;this.globalService.globalVar.incubator.assignedAnimal===e&&(i=!1);var r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(i=!1),i}canAnimalRace(e){var i=!0,r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(i=!1),i}getTraitStatGainDescription(e){var i="",r="";return e.positiveStatGain===Dt.acceleration&&(i="Acceleration"),e.positiveStatGain===Dt.adaptability&&(i="Adaptability"),e.positiveStatGain===Dt.endurance&&(i="Endurance"),e.positiveStatGain===Dt.focus&&(i="Focus"),e.positiveStatGain===Dt.power&&(i="Power"),e.positiveStatGain===Dt.topSpeed&&(i="Speed"),e.negativeStatGain===Dt.acceleration&&(r="Acceleration"),e.negativeStatGain===Dt.adaptability&&(r="Adaptability"),e.negativeStatGain===Dt.endurance&&(r="Endurance"),e.negativeStatGain===Dt.focus&&(r="Focus"),e.negativeStatGain===Dt.power&&(r="Power"),e.negativeStatGain===Dt.topSpeed&&(r="Speed"),"+"+e.researchLevel+"% "+i+", -"+(e.researchLevel>25?25:e.researchLevel)+"% "+r}getSpecialtyItemDescription(e){var i="",r=5,a=this.globalService.globalVar.modifiers.find(ne=>"internationalRacesToMedalModifier"===ne.text);null!=a&&(r=a.value);var c=10,d=this.globalService.globalVar.modifiers.find(ne=>"nationalRacesToMedalModifier"===ne.text);null!=d&&(c=d.value);var m=5,_=this.globalService.globalVar.modifiers.find(ne=>"whistleModifier"===ne.text);null!=_&&(m=_.value);var T=5,A=this.globalService.globalVar.modifiers.find(ne=>"goldenWhistleModifier"===ne.text);null!=A&&(T=A.value);var q=60,Q=this.globalService.globalVar.modifiers.find(ne=>"attractionTimeToCollectModifier"===ne.text);null!=Q&&(q=Q.value);var te=0,oe=this.globalService.globalVar.modifiers.find(ne=>"attractionRenownAmountModifier"===ne.text);null!=oe&&(te=oe.value);var de=0,be=this.globalService.globalVar.modifiers.find(ne=>"researchCenterRewardBonusAmountModifier"===ne.text);null!=be&&(de=be.value),"Stopwatch"===e?i="Reduce training time by 5%":"Animal Handler"===e?i="Retain 2% of trained stats after breeding":"Course Maps"===e?i="Increase your chance to burst during special routes by 10%":"Stockbreeder"===e?i="Add option to auto breed when Breed XP is full":"Scouts"===e?i="You can choose the order of race legs for each relay team":"Money Mark"===e?i="Add new indicator to race, beat its time to gain increased coins":"National Races"===e?i="Gain 1 medal for every "+c+" free races you complete":"International Races"===e?i="Gain 1 medal for every "+r+" free races you complete":"Team Manager"===e?i="Automatically run 1 additional free race per reset period <em>(banks 8 hours worth of races when away from the game)</em>":"Incubator Upgrade Lv1"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .01 per Breed. <em>(10% trait value)</em>":"Incubator Upgrade Lv2"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .025 per Breed. <em>(25% trait value)</em>":"Incubator Upgrade Lv3"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .05 per Breed. <em>(50% trait value)</em>":"Incubator Upgrade Lv4"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .1 per Breed. <em>(100% trait value)</em>":"Whistle"===e?i="Gain +"+m+" to a stat instead of +1 after a successful coaching attempt":"Golden Whistle"===e?i="Gain +"+T+" to a stat instead of +"+m+" after a successful coaching attempt":"Talent Point Voucher"===e?i="Increase Talent Points by 1":"Training Facility Improvements"===e?i="Increase ability XP by 1 for every 10 barn levels every "+q+" seconds while an animal trains at a Training Facility.":"Breeding Grounds Improvements"===e?i="Further increase Breed XP gain from Breeding Grounds by 5% for every 10 barn levels.":"Attraction Improvements"===e?i="Increase Renown by "+te+" for every 10 barn levels every "+q+" seconds while an animal trains at an Attraction.":"Research Center Improvements"===e?i="Increase stat gain from Coaching and Scrimmages by "+100*de+"% for every 10 barn levels of a Research Center.":"Orb Infuser"===e&&(i="When using Nectar of the Gods, permanently increase the equipped Orb's stat increase amount per orb level.");var ce=this.sanitizer.sanitize(vn.HTML,this.sanitizer.bypassSecurityTrustHtml(i));return null!==ce&&(i=ce),i}getWeatherClusterFromEnum(e){var i="";return e===ba.clearSkies?i="Clear Skies":e===ba.inclementWeather?i="Inclement Weather":e===ba.coldSpell&&(i="Cold Spell"),i}getWeatherClusterDescription(e){var i="";return e===ba.clearSkies?i="Race terrain shifts between Sunny, Torrid, and Ashfall. \n Flatland and Volcanic Morale increased by 50%.":e===ba.inclementWeather?i="Race terrain shifts between Rainy, Stormy, Maelstrom, and Hailstorm. \n Ocean Morale increased by 50%.":e===ba.coldSpell&&(i="Race terrain shifts between Sunny, Snowfall, and Hailstorm. \n Tundra and Mountain Morale increased by 50%."),i}getStatNameFromEnum(e){var i="";return e===Dt.topSpeed&&(i="Speed"),e===Dt.acceleration&&(i="Acceleration"),e===Dt.endurance&&(i="Endurance"),e===Dt.power&&(i="Power"),e===Dt.focus&&(i="Focus"),e===Dt.adaptability&&(i="Adaptability"),i}topSpeedPopover(e){var i=e.currentStats.defaultMaxSpeedModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(A=>A.text===r+"DefaultMaxSpeedModifier");null!=a&&(i=a.value);var c=.02,d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(c=d.value),c=1+(c+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var m=this.globalService.getTraitModifier(e,Dt.topSpeed),_=1;e.talentTree.talentTreeType===li.longDistance&&(_=1+e.talentTree.column2Row3Points/100);var T="Every stat point increases max speed by "+this.getMaxSpeedModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return c>1&&(T+="Breed Modifier: *"+c.toFixed(2)+"\n"),1!==m&&(T+=e.trait.traitName+" (Trait): *"+m.toFixed(2)+"\n"),e.incubatorStatUpgrades.maxSpeedModifier>1&&(T+="Incubator Upgrade: *"+e.incubatorStatUpgrades.maxSpeedModifier.toFixed(3)+"\n"),_>1&&(T+="Long Distance Talents: *"+_.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Ot.ruby&&this.globalService.globalVar.orbStats.getMaxSpeedIncrease(1)>1&&(T+="Ruby Orb: *"+this.globalService.globalVar.orbStats.getMaxSpeedIncrease(1).toFixed(3)+"\n"),T+"\n Default Speed value after Breed is "+(e.increasedDefaultStats.topSpeed+e.baseStats.topSpeed).toFixed(3)+"."}accelerationPopover(e){var i=e.currentStats.defaultAccelerationModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(A=>A.text===r+"DefaultAccelerationModifier");null!=a&&(i=a.value);var c=.02,d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(c=d.value),c=1+(c+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var m=this.globalService.getTraitModifier(e,Dt.acceleration),_=1;e.talentTree.talentTreeType===li.sprint&&(_=1+e.talentTree.column2Row3Points/100);var T="Every stat point increases acceleration by "+this.getAccelerationModifierByAnimalType(e.type).toFixed(3)+"m/s\xb2 up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return c>1&&(T+="Breed Modifier: *"+c.toFixed(2)+"\n"),1!==m&&(T+=e.trait.traitName+" (Trait): *"+m.toFixed(2)+"\n"),e.incubatorStatUpgrades.accelerationModifier>1&&(T+="Incubator Upgrade: *"+e.incubatorStatUpgrades.accelerationModifier.toFixed(3)+"\n"),_>1&&(T+="Sprint Talents: *"+_.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Ot.amber&&this.globalService.globalVar.orbStats.getAccelerationIncrease(1)>1&&(T+="Amber Orb: *"+this.globalService.globalVar.orbStats.getAccelerationIncrease(1).toFixed(3)+"\n"),T+"\n Default Acceleration value after Breed is "+(e.increasedDefaultStats.acceleration+e.baseStats.acceleration).toFixed(3)+"."}endurancePopover(e){var i=e.currentStats.defaultStaminaModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(A=>A.text===r+"DefaultStaminaModifier");null!=a&&(i=a.value);var c=.02,d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(c=d.value),c=1+(c+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var m=this.globalService.getTraitModifier(e,Dt.endurance),_=1;e.talentTree.talentTreeType===li.longDistance&&(_=1+e.talentTree.column3Row3Points/100);var T="Every stat point increases stamina by "+this.getStaminaModifierByAnimalType(e.type).toFixed(3)+" up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return c>1&&(T+="Breed Modifier: *"+c.toFixed(2)+"\n"),1!==m&&(T+=e.trait.traitName+" (Trait): *"+m.toFixed(2)+"\n"),e.incubatorStatUpgrades.staminaModifier>1&&(T+="Incubator Upgrade: *"+e.incubatorStatUpgrades.staminaModifier.toFixed(3)+"\n"),_>1&&(T+="Long Distance Talents: *"+_.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Ot.topaz&&this.globalService.globalVar.orbStats.getEnduranceIncrease(1)>1&&(T+="Topaz Orb: *"+this.globalService.globalVar.orbStats.getEnduranceIncrease(1).toFixed(3)+"\n"),T+"\n Default Endurance value after Breed is "+(e.increasedDefaultStats.endurance+e.baseStats.endurance).toFixed(3)+"."}powerPopover(e){var i=e.currentStats.defaultPowerModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(A=>A.text===r+"DefaultPowerModifier");null!=a&&(i=a.value);var c=.02,d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(c=d.value),c=1+(c+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var m=this.globalService.getTraitModifier(e,Dt.power),_=1;e.talentTree.talentTreeType===li.sprint&&(_=1+e.talentTree.column3Row3Points/100);var T="Every stat point increases ability efficiency by "+this.getPowerModifierByAnimalType(e.type).toFixed(3)+"% up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return c>1&&(T+="Breed Modifier: *"+c.toFixed(2)+"\n"),1!==m&&(T+=e.trait.traitName+" (Trait): *"+m.toFixed(2)+"\n"),e.incubatorStatUpgrades.powerModifier>1&&(T+="Incubator Upgrade: *"+e.incubatorStatUpgrades.powerModifier.toFixed(3)+"\n"),_>1&&(T+="Sprint Talents: *"+_.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Ot.amethyst&&this.globalService.globalVar.orbStats.getPowerIncrease(1)>1&&(T+="Amethyst Orb: *"+this.globalService.globalVar.orbStats.getPowerIncrease(1).toFixed(3)+"\n"),T+"\n Default Power value after Breed is "+(e.increasedDefaultStats.power+e.baseStats.power).toFixed(3)+"."}focusPopover(e){var i=e.currentStats.defaultFocusModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(A=>A.text===r+"DefaultFocusModifier");null!=a&&(i=a.value);var c=.02,d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(c=d.value),c=1+(c+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var m=this.globalService.getTraitModifier(e,Dt.focus),_=1;e.talentTree.talentTreeType===li.longDistance&&(_=1+e.talentTree.column1Row3Points/100);var T="Every stat point increases focus distance by "+this.getFocusModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return c>1&&(T+="Breed Modifier: *"+c.toFixed(2)+"\n"),1!==m&&(T+=e.trait.traitName+" (Trait): *"+m.toFixed(2)+"\n"),e.incubatorStatUpgrades.focusModifier>1&&(T+="Incubator Upgrade: *"+e.incubatorStatUpgrades.focusModifier.toFixed(3)+"\n"),_>1&&(T+="Long Distance Talents: *"+_.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Ot.sapphire&&this.globalService.globalVar.orbStats.getFocusIncrease(1)>1&&(T+="Sapphire Orb: *"+this.globalService.globalVar.orbStats.getFocusIncrease(1).toFixed(3)+"\n"),T+"\n Default Focus value after Breed is "+(e.increasedDefaultStats.focus+e.baseStats.focus).toFixed(3)+"."}adaptabilityPopover(e){var i=e.currentStats.defaultAdaptabilityModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(A=>A.text===r+"DefaultAdaptabilityModifier");null!=a&&(i=a.value);var c=.02,d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(c=d.value),c=1+(c+e.miscStats.bonusBreedModifierAmount)*(e.breedLevel-1);var m=this.globalService.getTraitModifier(e,Dt.adaptability),_=1;e.talentTree.talentTreeType===li.sprint&&(_=1+e.talentTree.column1Row3Points/100);var T="Every stat point increases adaptability distance by "+this.getAdaptabilityModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return c>1&&(T+="Breed Modifier: *"+c.toFixed(2)+"\n"),1!==m&&(T+=e.trait.traitName+" (Trait): *"+m.toFixed(2)+"\n"),e.incubatorStatUpgrades.adaptabilityModifier>1&&(T+="Incubator Upgrade: *"+e.incubatorStatUpgrades.adaptabilityModifier.toFixed(3)+"\n"),_>1&&(T+="Sprint Talents: *"+_.toFixed(2)+"\n"),null!=e.equippedOrb&&this.globalService.getOrbTypeFromResource(e.equippedOrb)===Ot.emerald&&this.globalService.globalVar.orbStats.getAdaptabilityIncrease(1)>1&&(T+="Emerald Orb: *"+this.globalService.globalVar.orbStats.getAdaptabilityIncrease(1).toFixed(3)+"\n"),T+"\n Default Adaptability value after Breed is "+(e.increasedDefaultStats.adaptability+e.baseStats.adaptability).toFixed(3)+"."}abilityPopover(){var e=25,i=this.globalService.globalVar.modifiers.find(a=>"abilityLevelCapModifier"===a.text);return null!=i&&(e=i.value),"Select from up to three different abilities by clicking on their names here. Using your ability during a race will award your ability XP which increases its effectiveness. Ability level cannot exceed your animal's breed level + "+e+"."}abilityLevelPopover(e){var i="Base Efficiency: "+e.ability.efficiency+"\n";return e.ability.abilityLevel>1&&(i+="Level Efficiency Multiplier: *"+(1+.01*(e.ability.abilityLevel-1))),e.miscStats.bonusAbilityEfficiency>0&&(i+="Bonus Ability Efficiency: *"+(1+e.miscStats.bonusAbilityEfficiency)),i}bonusFreeRaceXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusLocalBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusLocalBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusLocalBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusCircuitRaceXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusCircuitBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+2*e.miscStats.bonusCircuitBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusCircuitBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusTrainingXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining(e);return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusTrainingBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusTrainingBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusTrainingBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusDiminishingReturnsPerFacilityLevelPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusDiminishingReturnsCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusDiminishingReturnsCertificateCount+" (Certificates Used: "+e.miscStats.bonusDiminishingReturnsCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusTrainingTimeReductionPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction();return r>0&&(i+="Track Race Rewards: "+r+"%\n"),i}bonusTalentsPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();return r>0&&(i+="Track Race Rewards: "+r+"\n"),i}bonusAbilityEfficiencyPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusAbilityEfficiency(e);return r>0&&(i+="Track Race Rewards: "+100*r+"%\n"),i}bonusOrbXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusOrbXp(e);return r>0&&(i+="Track Race Rewards: "+100*r+"%\n"),i}isAmountMoreThanCertificateCap(e,i,r){var a=!1;return e=+e,"Free Race Breed XP Gain Certificate"===r&&i.miscStats.bonusLocalBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Circuit Race Breed XP Gain Certificate"===r&&i.miscStats.bonusCircuitBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Training Breed XP Gain Certificate"===r&&i.miscStats.bonusTrainingBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Diminishing Returns Increase Certificate"===r&&i.miscStats.bonusDiminishingReturnsCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),a}getAnimalMorale(e){if(null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e);return null==i?0:i.morale}slowSegmentWarning(e){return!e||confirm("The animal you have selected has low racing stats for this race. You may experience some loading time as they race. Continue?")}getWeekDayGrandPrixTimeSpan(){var e=new ha;return this.utilityService.getDayOfWeekFromNumber(e.weekStartDay)+" "+this.utilityService.get24HourFormat(e.weekStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekEndDay)+" "+this.utilityService.get24HourFormat(e.weekEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekEndHour)+")"}getWeekEndGrandPrixTimeSpan(){var e=new ha;return this.utilityService.getDayOfWeekFromNumber(e.weekendStartDay)+" "+this.utilityService.get24HourFormat(e.weekendStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekendEndDay)+" "+this.utilityService.get24HourFormat(e.weekendEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendEndHour)+")"}getRandomTip(){var e="",i=[];return this.globalService.globalVar.settings.get("hideTips")||(i.push("After upgrading training options, reselect them to gain their benefits!"),i.push("Don't forget to export your save regularly!"),i.push("Use the arrow keys to quickly navigate between barns or animals."),i.push("Have to recite the alphabet to figure out what your next circuit rank is? You're not alone, go to the settings to use numbers instead!"),i.push("Small barns allow training for 4 hours, medium for 8 hours, and large for 12 hours. Your animals will train even when the game is not active."),i.push("Each animal gains more or less racing stats from a base stat than other animals. Hover over each base stat in the Animals tab to see its modifier."),i.push("Can't quite finish a close race? Burst Chance and Distance are not affected by Diminishing Returns, so continue to increase those stats to get ahead!"),i.push("Want to take a more hands on approach? Go to any barn that has an animal assigned and start coaching to raise stats manually!"),e=i[this.utilityService.getRandomInteger(0,i.length-1)]),e}getRandomFunFact(){var e,i,r,a,c,d,m="",_=[];return this.globalService.globalVar.settings.get("hideTips")||(_.push("Horses are prey animals. Their best method of defense? Run!"),(null===(e=this.globalService.globalVar.animals.find(A=>A.type===Fe.Monkey))||void 0===e?void 0:e.isAvailable)&&_.push("There are over 300 species of Monkey in the world. Roughly half are considered Old World Monkeys in Asia and Africa, and the others are New World Monkeys in Central and South America."),(null===(i=this.globalService.globalVar.animals.find(A=>A.type===Fe.Goat))||void 0===i?void 0:i.isAvailable)&&_.push("Mountain goats' wide toes, rough hooves, and sharp dewclaws give them incredible traction and the ability to climb steep slopes sometimes over 60 degrees."),(null===(r=this.globalService.globalVar.animals.find(A=>A.type===Fe.Octopus))||void 0===r?void 0:r.isAvailable)&&_.push("Octopi have the largest brain of any invertebrate and have been known to use tools, such as using coconut husks to defend themselves."),(null===(a=this.globalService.globalVar.animals.find(A=>A.type===Fe.Hare))||void 0===a?void 0:a.isAvailable)&&_.push("Hares' teeth never stop growing. They continually chew on grasses and twigs to keep their teeth from getting too large."),(null===(c=this.globalService.globalVar.animals.find(A=>A.type===Fe.Penguin))||void 0===c?void 0:c.isAvailable)&&_.push("Penguins' bodies are tapered on both ends meaning they can swim with very little resistance. They are considered one of the most streamlined animals in the world."),(null===(d=this.globalService.globalVar.animals.find(A=>A.type===Fe.Salamander))||void 0===d?void 0:d.isAvailable)&&_.push("Salamanders are capable of regenerating some organs and limbs. Their impressive regeneration is used as a model for scientific studies."),m=_[this.utilityService.getRandomInteger(0,_.length-1)]),m}getSettingDescriptions(e){var i="";return"Auto Skip Race Info"===e&&(i="Turn on to immediately skip to the end of any race."),"Finish Training Before Switching"===e&&(i="Turn on to wait until finishing your current training before switching to the next training you select."),"Hide Tips"===e&&(i="Turn on to stop displaying tips in the footer. (Tips never display in Mobile version presently)"),"Use Numbers For Ranks"===e&&(i="Turn on to use numbers instead of letters when displaying ranks."),"Auto Start Event Race"===e&&(i="When event race begins, automatically start running with your current event relay team."),"Race Display Info"===e&&(i="Choose how to view races. Draw only shows the visual aspect, text only shows the textual updates, and both shows both. Both is default."),"Quick View Barn"===e&&(i="Condense the barn screen so that each barn is easier to see."),"Display Average Distance Pace"===e&&(i="When the average distance pace is outside of your field of view during a race, display it in a bubble on the side of the screen."),"Swap Barn Mode"===e&&(i="Enable this to swap your barns around by dragging and dropping them. While this is active, you won't be able to click into your barns."),"Show Barn Options"===e&&(i="Enable this to show a bar above your barns with different UI options."),i}getTokenModifier(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return Math.ceil((e+1)/5)}getTotalFreeRacesPerPeriod(){var e=10,i=this.globalService.globalVar.modifiers.find(c=>"freeRacesPerTimePeriodModifier"===c.text);void 0!==i&&(e=i.value);var r=this.getRenown(),a=Math.floor(r/100);return a>15&&(a=15),e+a}getRemainingFreeRacesPerPeriod(){return this.getTotalFreeRacesPerPeriod()-this.globalService.globalVar.freeRaceCounter}getRelayEffectFromListByType(e,i){if(null!=e&&0!==e.length)return e.find(r=>r.effectType===i)}isEquipmentItemAnOrb(e){return"Amethyst Orb"===e||"Sapphire Orb"===e||"Amber Orb"===e||"Topaz Orb"===e||"Emerald Orb"===e||"Ruby Orb"===e}getRelayEffectNameByType(e){var i="";return e===Xt.bigBrain?i="Big Brain":e===Xt.blueBaton?i="Blue Baton":e===Xt.camouflage?i="Camouflage":e===Xt.deepBreathing?i="Deep Breathing":e===Xt.flowingCurrent?i="Flowing Current":e===Xt.greenBaton?i="Green Baton":e===Xt.herdMentality?i="Herd Mentality":e===Xt.inspiration?i="Inspiration":e===Xt.navigator?i="Navigator":e===Xt.orangeBaton?i="Orange Baton":e===Xt.redBaton?i="Red Baton":e===Xt.specialDelivery?i="Special Delivery":e===Xt.supportAbilityCooldown?i="Cooldown Reduction Talent":e===Xt.supportAbilityEfficiency?i="Ability Efficiency Talent":e===Xt.supportAccelerationRelay?i="Acceleration Rate Talent":e===Xt.supportAdaptabilityRelay?i="Adaptability Distance Talent":e===Xt.supportBurstChance?i="Burst Chance Talent":e===Xt.supportBurstDistance?i="Burst Distance Talent":e===Xt.supportFocusRelay?i="Focus Distance Talent":e===Xt.supportMaxSpeedRelay?i="Max Speed Talent":e===Xt.supportPowerRelay?i="Power Efficiency Talent":e===Xt.supportStaminaRelay?i="Stamina Talent":e===Xt.violetBaton?i="Violet Baton":e===Xt.yellowBaton&&(i="Yellow Baton"),i}getStatGainDescription(e,i){var r="";return e.topSpeed>0&&(r+="+"+i*e.topSpeed+" Speed\n"),e.acceleration>0&&(r+="+"+i*e.acceleration+" Acceleration\n"),e.endurance>0&&(r+="+"+i*e.endurance+" Endurance\n"),e.focus>0&&(r+="+"+i*e.focus+" Focus\n"),e.power>0&&(r+="+"+i*e.power+" Power\n"),e.adaptability>0&&(r+="+"+i*e.adaptability+" Adaptability\n"),r}getTalentTreeNames(){var e=[];return e.push("Sprint"),e.push("Support"),e.push("Long Distance"),e}getTalentTreeByStringName(e){return"Sprint"===e?li.sprint:"Support"===e?li.support:"Long Distance"===e?li.longDistance:li.none}getNameByTalentTree(e){var i="";return e===li.sprint&&(i="Sprint"),e===li.support&&(i="Support"),e===li.longDistance&&(i="Long Distance"),i}getInDepthTalentTreeDescription(e){var i="";return"Sprint"===e?i="Sprinters excel at going short distances quickly. Whether it's through chaining together quick Bursts or powerful abilities, these racers will leave others in the dust at the starting line. Recommended for when you want to get the most out of Burst effects and high acceleration.":"Support"===e?i="Supporters excel when working alongside other animals. They have a special way of encouraging the racers after and sometimes before them to reach new limits. Recommended for when you want to get the most out of Relay effects.":"Long Distance"===e&&(i="Long Distance Racers excel when given time to ramp up and go the distance. These racers manage their stamina well and can reach incredible speeds over time. Recommended for racers with high max speed and that have abilities that improve over time."),i}getTalentDescription(e,i,r,a){var c="";return(null==a||a<=0)&&(a=1),r===li.sprint&&(0===e&&0===i&&(c="Increase Adaptability stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(c="Increase Adaptability Distance by <span class='keyword'>"+5*a+"</span>% until you lose focus for the first time."),2===e&&0===i&&(c="Increase Adaptability Distance gain from Adaptability stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(c="Every time you make it through a special path without stumbling, enter a Burst that lasts <span class='keyword'>"+5*a+"</span>% as long as normal."),0===e&&1===i&&(c="Increase Acceleration stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(c="The first time velocity exceeds Max Speed while bursting, increase remaining burst distance by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===i&&(c="Increase Acceleration Rate gain from Acceleration stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(c="Each time your velocity reaches Max Speed, increase Max Speed by <span class='keyword'>"+.5*a+"</span>% and reduce Focus Distance by <span class='keyword'>"+.5*a+"</span>%. This effect can occur 10 times, up to <span class='keyword'>"+5*a+"</span>%."),0===e&&2===i&&(c="Increase Power stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(c="Increase Power Efficiency by <span class='keyword'>"+5*a+"</span>%, but consume stamina <span class='keyword'>"+5*a+"</span>% faster."),2===e&&2===i&&(c="Increase Power Efficiency gain from Power stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(c="The first time you use an ability every race, the efficiency is increased by <span class='keyword'>"+5*a+"</span>%.")),r===li.support&&(0===e&&0===i&&(c="Increase Relay Animal's Adaptability Distance by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(c="Increase the effectiveness of your Relay effects by <span class='keyword'>"+2*a+"</span>%."),2===e&&0===i&&(c="Increase Relay Animal's Max Speed by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(c="The racer prior to you gains any relay effects you provide for <span class='keyword'>"+3*a+"</span>% of the normal length if possible."),0===e&&1===i&&(c="Increase Relay Animal's Acceleration Rate by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(c="Increase Burst Distance of next racer by <span class='keyword'>"+5*a+"</span>% of your Burst Distance on Relay."),2===e&&1===i&&(c="Increase Relay Animal's Stamina by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(c="Increase Burst Chance of next racer by <span class='keyword'>"+3*a+"</span>% of your Burst Chance on Relay."),0===e&&2===i&&(c="Increase Relay Animal's Power Efficiency by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(c="If Relay Animal ability has a cooldown, reduce it by <span class='keyword'>"+2*a+"</span>%."),2===e&&2===i&&(c="Increase Relay Animal's Focus Distance by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(c="Increase Relay Animal's Ability Efficiency by <span class='keyword'>"+2*a+"</span>%.")),r===li.longDistance&&(0===e&&0===i&&(c="Increase Focus stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(c="Every burst increases Burst Velocity Bonus by <span class='keyword'>"+.5*a+"</span>% up to <span class='keyword'>"+10*a+"</span>%."),2===e&&0===i&&(c="Increase Focus Distance gain from Focus stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(c="Instead of reducing velocity to 10% when losing focus, reduce to <span class='keyword'>"+(10+2*a)+"</span>%."),0===e&&1===i&&(c="Increase Speed stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(c="While your velocity is 25% of your Max Speed or below, increase your Acceleration Rate by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===i&&(c="Increase Max Speed gain from Speed stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(c="After surpassing <span class='keyword'>"+.5*a+"</span>% of your Max Speed, your velocity can no longer drop below it. All calculations consider this to be 0% of your velocity."),0===e&&2===i&&(c="Increase Endurance stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(c="While stamina is below 35%, reduce stamina consumption by <span class='keyword'>"+5*a+"</span>%."),2===e&&2===i&&(c="Increase Stamina gain from Endurance stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(c="When running out of stamina, increase the percent regained by <span class='keyword'>"+2*a+"</span>%.")),c}getTalentUpgradeDescription(e,i,r,a){}getTotalPossiblePointsByRowColumn(e,i,r){var a=0;return r===li.sprint&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),r===li.support&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),r===li.longDistance&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),a}getTalentPointsAvailableToAnimal(e){var i=0;return i=this.getResourceByName("Talent Points"),i+=e.miscStats.bonusTalents,(i-=e.talentTree.getTotalSpentPoints())<=0&&(i=0),i}gainMangoes(e){return new Je("Mangoes",e,Le.Food)}gainApples(e){return new Je("Apples",e,Le.Food)}gainBananas(e){return new Je("Bananas",e,Le.Food)}gainOranges(e){return new Je("Oranges",e,Le.Food)}gainStrawberries(e){return new Je("Strawberries",e,Le.Food)}gainTurnips(e){return new Je("Turnips",e,Le.Food)}gainCarrots(e){return new Je("Carrots",e,Le.Food)}gainCoins(e){return new Je("Coins",e,Le.Resources)}gainMedals(e){return new Je("Medals",e,Le.Resources)}gainTokens(e){return new Je("Tokens",e,Le.Resources)}}return t.\u0275fac=function(e){return new(e||t)(Ft(ki),Ft(Lr),Ft(dl))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),jr=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.totalTime=0,this.gameUpdateEvent=new di}Update(){var e=Date.now();const i=(e-this.globalService.globalVar.lastTimeStamp)/1e3;this.deltaTime=i,this.totalTime+=i;var r=performance.now();this.globalService.globalVar.lastTimeStamp=e,this.gameUpdateEvent.emit(i),this.lastPerformanceNow=r,window.requestAnimationFrame(()=>this.Update())}}return t.\u0275fac=function(e){return new(e||t)(Ft(ki),Ft(yn))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class au{constructor(n,e){this.transformationType=n,this.options=e,this.recursionStack=new Set}transform(n,e,i,r,a,c=0){if(Array.isArray(e)||e instanceof Set){const d=r&&this.transformationType===sn.PLAIN_TO_CLASS?function lO(t){const n=new t;return n instanceof Set||"push"in n?n:[]}(r):[];return e.forEach((m,_)=>{const T=n?n[_]:void 0;if(this.options.enableCircularCheck&&this.isCircular(m))this.transformationType===sn.CLASS_TO_CLASS&&(d instanceof Set?d.add(m):d.push(m));else{let A;if("function"!=typeof i&&i&&i.options&&i.options.discriminator&&i.options.discriminator.property&&i.options.discriminator.subTypes){if(this.transformationType===sn.PLAIN_TO_CLASS){A=i.options.discriminator.subTypes.find(oe=>oe.name===m[i.options.discriminator.property]);const te=i.typeFunction({newObject:d,object:m,property:void 0});A=void 0===A?te:A.value,i.options.keepDiscriminatorProperty||delete m[i.options.discriminator.property]}this.transformationType===sn.CLASS_TO_CLASS&&(A=m.constructor),this.transformationType===sn.CLASS_TO_PLAIN&&(m[i.options.discriminator.property]=i.options.discriminator.subTypes.find(Q=>Q.value===m.constructor).name)}else A=i;const q=this.transform(T,m,A,void 0,m instanceof Map,c+1);d instanceof Set?d.add(q):d.push(q)}}),d}if(i===String&&!a)return null==e?e:String(e);if(i===Number&&!a)return null==e?e:Number(e);if(i===Boolean&&!a)return null==e?e:Boolean(e);if((i===Date||e instanceof Date)&&!a)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(function oO(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}().Buffer&&(i===Buffer||e instanceof Buffer)&&!a)return null==e?e:Buffer.from(e);if(function sO(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}(e)&&!a)return new Promise((d,m)=>{e.then(_=>d(this.transform(void 0,_,i,void 0,void 0,c+1)),m)});if(!a&&null!==e&&"object"==typeof e&&"function"==typeof e.then)return e;if("object"==typeof e&&null!==e){!i&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(i=e.constructor)),!i&&n&&(i=n.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);const d=this.getKeys(i,e,a);let m=n||{};!n&&(this.transformationType===sn.PLAIN_TO_CLASS||this.transformationType===sn.CLASS_TO_CLASS)&&(m=a?new Map:i?new i:{});for(const _ of d){if("__proto__"===_||"constructor"===_)continue;const T=_;let Q,A=_,q=_;if(!this.options.ignoreDecorators&&i)if(this.transformationType===sn.PLAIN_TO_CLASS){const ce=Xa.findExposeMetadataByCustomName(i,_);ce&&(q=ce.propertyName,A=ce.propertyName)}else if(this.transformationType===sn.CLASS_TO_PLAIN||this.transformationType===sn.CLASS_TO_CLASS){const ce=Xa.findExposeMetadata(i,_);ce&&ce.options&&ce.options.name&&(A=ce.options.name)}Q=this.transformationType===sn.PLAIN_TO_CLASS?e[T]:e instanceof Map?e.get(T):e[T]instanceof Function?e[T]():e[T];let te,oe=Q instanceof Map;if(i&&a)te=i;else if(i){const ce=Xa.findTypeMetadata(i,q);if(ce){const ne={newObject:m,object:e,property:q},Ae=ce.typeFunction?ce.typeFunction(ne):ce.reflectedType;ce.options&&ce.options.discriminator&&ce.options.discriminator.property&&ce.options.discriminator.subTypes?e[T]instanceof Array?te=ce:(this.transformationType===sn.PLAIN_TO_CLASS&&(te=ce.options.discriminator.subTypes.find(Ue=>{if(Q&&Q instanceof Object&&ce.options.discriminator.property in Q)return Ue.name===Q[ce.options.discriminator.property]}),te=void 0===te?Ae:te.value,ce.options.keepDiscriminatorProperty||Q&&Q instanceof Object&&ce.options.discriminator.property in Q&&delete Q[ce.options.discriminator.property]),this.transformationType===sn.CLASS_TO_CLASS&&(te=Q.constructor),this.transformationType===sn.CLASS_TO_PLAIN&&Q&&(Q[ce.options.discriminator.property]=ce.options.discriminator.subTypes.find(Ue=>Ue.value===Q.constructor).name)):te=Ae,oe=oe||ce.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(ne=>ne.target===i&&!!ne.properties[q]).forEach(ne=>te=ne.properties[q]);else if(this.options.enableImplicitConversion&&this.transformationType===sn.PLAIN_TO_CLASS){const ne=Reflect.getMetadata("design:type",i.prototype,q);ne&&(te=ne)}}const de=Array.isArray(e[T])?this.getReflectedType(i,q):void 0,be=n?n[T]:void 0;if(m.constructor.prototype){const ce=Object.getOwnPropertyDescriptor(m.constructor.prototype,A);if((this.transformationType===sn.PLAIN_TO_CLASS||this.transformationType===sn.CLASS_TO_CLASS)&&(ce&&!ce.set||m[A]instanceof Function))continue}if(this.options.enableCircularCheck&&this.isCircular(Q)){if(this.transformationType===sn.CLASS_TO_CLASS){let ce=Q;ce=this.applyCustomTransformations(ce,i,_,e,this.transformationType),(void 0!==ce||this.options.exposeUnsetFields)&&(m instanceof Map?m.set(A,ce):m[A]=ce)}}else{const ce=this.transformationType===sn.PLAIN_TO_CLASS?A:_;let ne;this.transformationType===sn.CLASS_TO_PLAIN?(ne=e[ce],ne=this.applyCustomTransformations(ne,i,ce,e,this.transformationType),ne=e[ce]===ne?Q:ne,ne=this.transform(be,ne,te,de,oe,c+1)):void 0===Q&&this.options.exposeDefaultValues?ne=m[A]:(ne=this.transform(be,Q,te,de,oe,c+1),ne=this.applyCustomTransformations(ne,i,ce,e,this.transformationType)),(void 0!==ne||this.options.exposeUnsetFields)&&(m instanceof Map?m.set(A,ne):m[A]=ne)}}return this.options.enableCircularCheck&&this.recursionStack.delete(e),m}return e}applyCustomTransformations(n,e,i,r,a){let c=Xa.findTransformMetadatas(e,i,this.transformationType);return void 0!==this.options.version&&(c=c.filter(d=>!d.options||this.checkVersion(d.options.since,d.options.until))),c=c.filter(this.options.groups&&this.options.groups.length?d=>!d.options||this.checkGroups(d.options.groups):d=>!d.options||!d.options.groups||!d.options.groups.length),c.forEach(d=>{n=d.transformFn({value:n,key:i,obj:r,type:a,options:this.options})}),n}isCircular(n){return this.recursionStack.has(n)}getReflectedType(n,e){if(!n)return;const i=Xa.findTypeMetadata(n,e);return i?i.reflectedType:void 0}getKeys(n,e,i){let r=Xa.getStrategy(n);"none"===r&&(r=this.options.strategy||"exposeAll");let a=[];if(("exposeAll"===r||i)&&(a=e instanceof Map?Array.from(e.keys()):Object.keys(e)),i)return a;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&n&&(a=[...Xa.getExposedProperties(n,this.transformationType),...Xa.getExcludedProperties(n,this.transformationType)]),!this.options.ignoreDecorators&&n){let c=Xa.getExposedProperties(n,this.transformationType);this.transformationType===sn.PLAIN_TO_CLASS&&(c=c.map(m=>{const _=Xa.findExposeMetadata(n,m);return _&&_.options&&_.options.name?_.options.name:m})),a=this.options.excludeExtraneousValues?c:a.concat(c);const d=Xa.getExcludedProperties(n,this.transformationType);d.length>0&&(a=a.filter(m=>!d.includes(m))),void 0!==this.options.version&&(a=a.filter(m=>{const _=Xa.findExposeMetadata(n,m);return!_||!_.options||this.checkVersion(_.options.since,_.options.until)})),a=a.filter(this.options.groups&&this.options.groups.length?m=>{const _=Xa.findExposeMetadata(n,m);return!_||!_.options||this.checkGroups(_.options.groups)}:m=>{const _=Xa.findExposeMetadata(n,m);return!(_&&_.options&&_.options.groups&&_.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter(c=>this.options.excludePrefixes.every(d=>c.substr(0,d.length)!==d))),a=a.filter((c,d,m)=>m.indexOf(c)===d),a}checkVersion(n,e){let i=!0;return i&&n&&(i=this.options.version>=n),i&&e&&(i=this.options.version<e),i}checkGroups(n){return!n||this.options.groups.some(e=>n.includes(e))}}const ou={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},is=new class cO{instanceToPlain(n,e){return new au(sn.CLASS_TO_PLAIN,So(So({},ou),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToPlainFromExist(n,e,i){return new au(sn.CLASS_TO_PLAIN,So(So({},ou),i)).transform(e,n,void 0,void 0,void 0,void 0)}plainToInstance(n,e,i){return new au(sn.PLAIN_TO_CLASS,So(So({},ou),i)).transform(void 0,e,n,void 0,void 0,void 0)}plainToClassFromExist(n,e,i){return new au(sn.PLAIN_TO_CLASS,So(So({},ou),i)).transform(n,e,void 0,void 0,void 0,void 0)}instanceToInstance(n,e){return new au(sn.CLASS_TO_CLASS,So(So({},ou),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToClassFromExist(n,e,i){return new au(sn.CLASS_TO_CLASS,So(So({},ou),i)).transform(e,n,void 0,void 0,void 0,void 0)}serialize(n,e){return JSON.stringify(this.instanceToPlain(n,e))}deserialize(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}deserializeArray(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}};function Gm(t,n,e){return is.plainToInstance(t,n,e)}let zm=(()=>{class t{constructor(e,i,r){this.globalService=e,this.utilityService=i,this.lookupService=r}getSpecializationPopoverText(e,i,r=!1){var a="";if(e===ji.TrainingFacility){a=i<=10?"Training Time Reduction: "+2*i+"%<br/>":"Training Time Reduction: 20%<br/> All Stat Multiplier: "+(i-10)/10+"<br/>";var c=0;if(this.globalService.globalVar.resources.find(jt=>"Training Facility Improvements"===jt.name)||r){var d=this.globalService.globalVar.modifiers.find(jt=>"trainingFacilityAbilityXpAmountModifier"===jt.text);if(void 0!==d){c=d.value;var m=60;null!=(_=this.globalService.globalVar.modifiers.find(jt=>"attractionTimeToCollectModifier"===jt.text))&&(m=_.value),a+="Ability XP: "+c*i+" / "+m+" seconds <br/>"}}}if(e===ji.BreedingGrounds){var T=0;if(this.globalService.globalVar.resources.find(jt=>"Breeding Grounds Improvements"===jt.name)||r){var A=this.globalService.globalVar.modifiers.find(jt=>"breedingGroundsAdditionalAmountModifier"===jt.text);void 0!==A&&(T=A.value)}var q=this.globalService.globalVar.modifiers.find(jt=>"breedingGroundsSpecializationModifier"===jt.text);null!=q&&(a="Training Breed XP Multipler: "+(i*(100*(q.value+T))).toFixed(0)+"%<br/>")}if(e===ji.Attraction){var _;m=60,null!=(_=this.globalService.globalVar.modifiers.find(Ht=>"attractionTimeToCollectModifier"===Ht.text))&&(m=_.value);var Q=0;if(null!=this.globalService.globalVar.modifiers.find(Ht=>"attractionAmountModifier"===Ht.text))for(var oe=1;oe<=i;oe++)Q+=20*oe;if(a="Amount Earned: "+Q.toFixed(0)+" Coins / "+m+" seconds<br/>",this.globalService.globalVar.resources.find(Ht=>"Attraction Improvements"===Ht.name)||r){var be=this.globalService.globalVar.modifiers.find(Ht=>"attractionRenownAmountModifier"===Ht.text);null!=be&&(a+="Amount Earned: "+(be.value*i).toFixed(3)+" Renown / "+m+" seconds<br/>")}}else if(e===ji.ResearchCenter){var ce=this.globalService.globalVar.modifiers.find(jt=>"researchCenterIncrementsModifier"===jt.text),ne=this.globalService.globalVar.modifiers.find(jt=>"researchCenterTrainingAnimalModifier"===jt.text),Ae=this.globalService.globalVar.modifiers.find(jt=>"researchCenterStudyingAnimalModifier"===jt.text),Ue=this.globalService.globalVar.modifiers.find(jt=>"researchCenterMaxStatGainModifier"===jt.text);if(null==ce||null==ne||null==Ae||null==Ue)return"";var bt=i*ce.value,pt="Training Animal Stat Gain: "+(100*(ne.value+bt<Ue.value?ne.value+bt:Ue.value)).toFixed(0)+"%<br />",lt=(bt-(Ue.value-ne.value))/(Ue.value-Ae.value);if(lt>0?(Math.floor(lt)>0&&(pt+="Additional Studying Animal Stat Gain (x"+Math.floor(lt)+"): "+(100*Ue.value).toFixed(0)+"%<br />"),lt>Math.floor(lt)&&(pt+="Additional Studying Animal Stat Gain: "+(100*((lt-Math.floor(lt))*(Ue.value-Ae.value)+Ae.value)).toFixed(0)+"%<br />")):pt+="Additional Studying Animal Stat Gain: "+(100*Ae.value).toFixed(0)+"%<br />",this.globalService.globalVar.resources.find(jt=>"Research Center Improvements"===jt.name)||r){var Rt=this.globalService.globalVar.modifiers.find(jt=>"researchCenterRewardBonusAmountModifier"===jt.text);null!=Rt&&(pt+="Scrimmage & Coaching Reward Increase: "+(Rt.value*i*100).toFixed(0)+"%<br />")}a=pt}var Bt=this.utilityService.getSanitizedHtml(a);return null!=Bt&&(a=Bt),a}handleResearchCenterStatIncrease(e,i){var r=this.globalService.globalVar.modifiers.find(Ue=>"researchCenterIncrementsModifier"===Ue.text),a=this.globalService.globalVar.modifiers.find(Ue=>"researchCenterTrainingAnimalModifier"===Ue.text),c=this.globalService.globalVar.modifiers.find(Ue=>"researchCenterStudyingAnimalModifier"===Ue.text),d=this.globalService.globalVar.modifiers.find(Ue=>"researchCenterMaxStatGainModifier"===Ue.text);if(null!=r&&null!=a&&null!=c&&null!=d&&null!=e.currentTraining){var de,_=i.barnUpgrades.specializationLevel*r.value,T=e.currentTraining.affectedStatRatios.topSpeed,A=e.currentTraining.affectedStatRatios.acceleration,q=e.currentTraining.affectedStatRatios.endurance,Q=e.currentTraining.affectedStatRatios.power,te=e.currentTraining.affectedStatRatios.focus,oe=e.currentTraining.affectedStatRatios.adaptability;e.increaseStats(new It((de=a.value+_<d.value?a.value+_:d.value)*T,de*A,de*q,de*Q,de*te,de*oe)),this.globalService.calculateAnimalRacingStats(e);var be=(_-(d.value-a.value))/(d.value-c.value),ce=this.getAnimalsInRandomOrder(e.raceCourseType,e);if(be>0){ce.length<be&&(be=ce.length);for(var ne=0;ne<Math.floor(be);ne++)ce[ne].increaseStats(new It(d.value*T,d.value*A,d.value*q,d.value*Q,d.value*te,d.value*oe)),this.globalService.calculateAnimalRacingStats(ce[ne]);if(be>Math.floor(be)&&ce.length>ne){var Ae=c.value+(be-Math.floor(be))*(d.value-c.value);ce[ne].increaseStats(new It(Ae*T,Ae*A,Ae*q,Ae*Q,Ae*te,Ae*oe)),this.globalService.calculateAnimalRacingStats(ce[ne])}}else ce.length>=1&&(ce[0].increaseStats(new It((Ae=c.value)*T,Ae*A,Ae*q,Ae*Q,Ae*te,Ae*oe)),this.globalService.calculateAnimalRacingStats(ce[0]))}}getAnimalsInRandomOrder(e,i){for(var r=[],a=this.globalService.globalVar.animals.filter(T=>T.raceCourseType===e&&T.isAvailable&&T.type!==i.type),c=this.globalService.globalVar.animals.filter(T=>T.raceCourseType!==e&&T.isAvailable),d=a.length,m=0;m<d;m++){var _=this.utilityService.getRandomInteger(1,a.length);r.push(a[_-1]),a=a.filter(T=>T!==a[_-1])}for(d=c.length,m=0;m<d;m++)_=this.utilityService.getRandomInteger(1,c.length),r.push(c[_-1]),c=c.filter(q=>q!==c[_-1]);return r}handleTrainingFacilityImprovementsIncreases(e,i){var r=this.globalService.globalVar.barns.find(T=>T.barnNumber===i.associatedBarnNumber),a=this.globalService.globalVar.resources.find(T=>"Training Facility Improvements"===T.name);if(!(null==r||r.barnUpgrades.specialization!==ji.TrainingFacility||void 0===a||a.amount<=0)){var c=60,d=this.globalService.globalVar.modifiers.find(T=>"attractionTimeToCollectModifier"===T.text);null!=d&&(c=d.value);var m=0,_=this.globalService.globalVar.modifiers.find(T=>"trainingFacilityAbilityXpAmountModifier"===T.text);for(null!=_&&(m=_.value*r.barnUpgrades.specializationLevel),r.barnUpgrades.trainingFacilityDeltaTime+=e,null!==i.currentTraining&&r.barnUpgrades.trainingFacilityDeltaTime>=i.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.trainingFacilityDeltaTime=i.currentTraining.trainingTimeRemaining);r.barnUpgrades.trainingFacilityDeltaTime>=c;)r.barnUpgrades.trainingFacilityDeltaTime-=c,this.globalService.increaseAbilityXp(i,m,!1)}}handleAttractionRevenue(e,i){var r=this.globalService.globalVar.barns.find(te=>te.barnNumber===i.associatedBarnNumber);if(null!=r&&r.barnUpgrades.specialization===ji.Attraction){var a=60,c=this.globalService.globalVar.modifiers.find(te=>"attractionTimeToCollectModifier"===te.text);null!=c&&(a=c.value);var d=0;if(null!=this.globalService.globalVar.modifiers.find(te=>"attractionAmountModifier"===te.text))for(var _=1;_<=r.barnUpgrades.specializationLevel;_++)d+=20*_;var T=0;if(this.globalService.globalVar.resources.find(te=>"Attraction Improvements"===te.name)){var A=this.globalService.globalVar.modifiers.find(te=>"attractionRenownAmountModifier"===te.text);null!=A&&(T=A.value*r.barnUpgrades.specializationLevel)}for(r.barnUpgrades.currentDeltaTime+=e,null!==i.currentTraining&&r.barnUpgrades.currentDeltaTime>=i.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.currentDeltaTime=i.currentTraining.trainingTimeRemaining);r.barnUpgrades.currentDeltaTime>=a;){var Q;r.barnUpgrades.currentDeltaTime-=a,void 0!==(Q=this.globalService.globalVar.resources.find(te=>"Coins"===te.name))&&(Q.amount+=d),T>0&&void 0!==(Q=this.globalService.globalVar.resources.find(oe=>"Renown"===oe.name))&&(Q.amount+=T)}}}}return t.\u0275fac=function(e){return new(e||t)(Ft(ki),Ft(Lr),Ft(yn))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var bo=(()=>{return(t=bo||(bo={}))[t.None=0]="None",t[t.Stumble=1]="Stumble",t[t.LostFocus=2]="LostFocus",t[t.LostStamina=3]="LostStamina",t[t.Burst=4]="Burst",bo;var t})();let w0=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.lookupService=i,this.utilityService=r,this.initializeService=a,this.frameModifier=60,this.timeToComplete=60,this.currentLostFocusOpportunity=0,this.currentBurstOpportunity=0,this.tundraPreviousYAmount=0}runRace(e,i,r){this.existingOrbStats=this.globalService.globalVar.orbStats.makeCopy(),this.currentBurstOpportunity=0,this.currentLostFocusOpportunity=0,this.tundraPreviousYAmount=0,this.selectedRace=e;var a=new g0,c=0,d=0,m=0,_=0,T=0;e.raceLegs.forEach(Ze=>c+=Ze.distance);var A=0;(0===e.timeToComplete||null==e.timeToComplete)&&(e.timeToComplete=60);var q=c/e.timeToComplete,Q=this.globalService.globalVar.animalDecks.find(Ze=>Ze.isPrimaryDeck);void 0!==i&&i&&(Q=this.globalService.globalVar.animalDecks.find(Ze=>Ze.autoRunFreeRace));var te=0;this.timeToComplete=e.timeToComplete;var oe=[],de=[],be=bo.None,ce=0,ne=0,Ae=0,Ue=0,bt=0,nt=0,pt=1,lt=0,kt=new Ti,At=new Ti;if(void 0===Q)return a.errorMessage="No relay team selected.",a;if(this.racingAnimals=this.lookupService.getAnimalsFromAnimalDeck(Q),this.setupBraziers(),e.raceUI.distanceCoveredByFrame=[],e.raceUI.velocityByFrame=[],e.raceUI.timeToCompleteByFrame=[],e.raceUI.maxSpeedByFrame=[],e.raceUI.staminaPercentByFrame=[],e.raceUI.yAdjustmentByFrame=[],e.raceUI.racerEffectByFrame=[],e.raceUI.lavaFallPercentByFrame=[],e.raceUI.racePositionByFrame=[],e.timeToComplete<=300)a.addRaceUpdate(A,Math.round(e.timeToComplete)+" seconds are on the race clock.");else{var Rt=this.globalService.getRemainingEventRaceTime()+this.globalService.globalVar.eventRaceData.bonusTime,Bt=this.utilityService.getHoursRemainingFromSeconds(Rt),jt=this.utilityService.getMinutesLeftInHourRemainingFromSeconds(Rt),Ui=this.utilityService.getSecondsLeftInMinuteRemainingFromSeconds(Rt),Ht=Math.floor(Ui).toString(),ai=Bt.toString(),wi=jt.toString();Bt<10&&(ai=Bt<1||Bt>59?"00":String(ai).padStart(2,"0")),jt<10&&(wi=jt<1||jt>59?"00":String(wi).padStart(2,"0")),Ui<10&&(Ht=Ui<1||Ui>59?"00":String(Ht).padStart(2,"0")),a.addRaceUpdate(A,ai+":"+wi+":"+Ht+" is left on the race clock.")}return e.raceLegs.forEach(Ze=>{var fe=null;if(null==(fe=this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(oi=>oi.raceCourseType===Ze.courseType)))return console.log(this.selectedRace),void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||(fe.raceVariables=new Ws,fe.totalRacesRun+=1)}),this.globalService.globalVar.trackedStats.totalRaces+=1,e.raceLegs.forEach(Ze=>{var fe=void 0;if(null==(fe=this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(qt=>qt.raceCourseType===Ze.courseType)))return console.log(this.selectedRace),void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.increasePersistentAbilityXp(fe);var oi=void 0;this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&this.globalService.globalVar.eventRaceData.previousRaceSegmentData.racingAnimalType===fe.type&&(oi=this.globalService.globalVar.eventRaceData.previousRaceSegmentData);var fi=void 0,Ai=new fr,ti="<span class='coloredText "+Ze.getCourseTypeClass()+"'>"+fe.name+"</span>",Nt="",pr="";if(ne>0){var Bn=this.racingAnimals.find(qt=>qt.raceCourseType===e.raceLegs[ne-1].courseType);null!=Bn&&(kt=Bn)}else kt=null;if(ne<e.raceLegs.length-1){Ai=e.raceLegs[ne+1];var Rn=this.racingAnimals.find(qt=>qt.raceCourseType===Ai.courseType);null!=Rn&&(At=Rn,pr="<span class='coloredText "+Ai.getCourseTypeClass()+"'>"+(null==At?void 0:At.name)+"</span>")}else At=null;this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&a.addRaceUpdate(A,ti+" clears "+Math.round(this.selectedRace.length).toLocaleString()+" meters of the Grand Prix and moves onto the next leg of the race.");var un=Ze.terrain.maxSpeedModifier,Dn=Ze.terrain.accelerationModifier,hn=Ze.terrain.staminaModifier,dn=Ze.terrain.powerModifier,Ar=Ze.terrain.focusModifier,ci=Ze.terrain.adaptabilityModifier;if(A<this.timeToComplete*this.frameModifier){if(de.length>0&&void 0!==(fi=de[de.length-1])&&(Nt="<span class='coloredText "+fi.getCourseTypeClass()+"'>"+(null==kt?void 0:kt.name)+"</span>"),this.getPrelayEffects(fe,At,null==Ai?void 0:Ai.terrain,1,a,A,Nt,Ai,Ze),this.selectedRace.raceType!==xt.event||this.selectedRace.eventRaceType!==zt.grandPrix||!this.globalService.globalVar.eventRaceData.animalAlreadyPrepped){var pn=[];this.racingAnimals.forEach(qt=>{this.selectedRace.raceLegs.some(ac=>ac.courseType===qt.raceCourseType)&&pn.push(qt)}),this.PrepareRacingAnimal(a,A,Nt,fe,oe,Ze,fi,void 0,void 0,m,T,_,pn)}this.prepareRacingLeg(Ze,fe),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix||a.addRaceUpdate(A,ti+" starts their leg of the race.")}var Hi=fe.currentStats.stamina,pi=0,Gn=Ze.distance,tn=new Nr,nn=new Nr,Qn=!1,Vn=0,On={permanentAdaptabilityIncreaseMultiplier:0},Rr={permanentMaxSpeedIncreaseMultiplier:0},Jn=1,ia=1,na={coldBloodedIncreaseMultiplier:1},Na=1,Pr=[],yr=[],Pt=1,ii=!1,va=0,yl=[!1,!1,!1,!1,!1],wo=!1,Fa=0,Ho=!1,_a=0,La=0,ro=0,ya=0,Ds=0,Ma=0;if(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix){var Er=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime();Ds+=q*Er,Ma=this.globalService.globalVar.eventRaceData.distanceCovered}d+Ma>q*(A/this.frameModifier)+Ds?(ii||(sf=!0),ii=!0):(ii&&(sf=!0),ii=!1),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(Pt=this.globalService.getAnimalStatLossFromExhaustionEventRace(fe))<1&&(fe.raceVariables.ranOutOfStamina=!0),null!=oi&&(pi=oi.velocity,fe.currentStats.stamina=oi.stamina,Ue=oi.deepBreathingStaminaGain,Vn=oi.permanentMaxSpeedIncreaseMultiplier,On.permanentAdaptabilityIncreaseMultiplier=oi.permanentAdaptabilityIncreaseMultiplier,Rr.permanentMaxSpeedIncreaseMultiplier=oi.permanentMaxSpeedIncreaseObjMultiplier,Jn=oi.feedingFrenzyIncreaseMultiplier,ia=oi.greatMigrationAccelerationIncreaseAdditive,na.coldBloodedIncreaseMultiplier=oi.coldBloodedIncreaseMultiplier,Na=oi.fleetingSpeedIncreaseMultiplier,La=oi.whalePowerStored,ya=oi.pathsClearedWithoutLosingFocus,fe.raceVariables=oi.raceVariables.makeCopy(),oi.nineTailsBuffs.length>0&&oi.nineTailsBuffs.forEach(qt=>{Pr.push(qt)}),oi.grazeBuffs.length>0&&oi.grazeBuffs.forEach(qt=>{yr.push(qt)}),oi.relayEffects.length>0&&oi.relayEffects.forEach(qt=>{null!=fe&&(fe.raceVariables.relayEffects.push(qt),null!=fe.raceVariables.relayEffects&&fe.raceVariables.relayEffects.length>0&&fe.raceVariables.relayEffects.forEach(ac=>{ac.effectType!==Xt.supportStaminaRelay&&ac.effectType!==Xt.yellowBaton&&(ac.isMultiplicative?fe.currentStats.multiplyCurrentRacingStats(ac.relayAffectedStatRatios):fe.currentStats.addCurrentRacingStats(ac.relayAffectedStatRatios))}))}),wo=oi.longDistanceTalentIncreaseAccelerationWithLowVelocity,Fa=oi.maxSpeedFloor,Pt=oi.statLossFromExhaustion);var Sa=this.lookupService.getRelayEffectFromListByType(fe.raceVariables.relayEffects,Xt.camouflage);void 0!==Sa&&void 0!==Sa.additionalValue&&(bt=Sa.additionalValue);var Nn=this.lookupService.getRelayEffectFromListByType(fe.raceVariables.relayEffects,Xt.herdMentality);void 0!==Nn&&void 0!==Nn.additionalValue&&(Ae=Nn.additionalValue);var We,er=this.lookupService.getRelayEffectFromListByType(fe.raceVariables.relayEffects,Xt.specialDelivery);void 0!==er&&void 0!==er.additionalValue&&(nt=er.additionalValue),"Nap"===fe.ability.name&&fe.type===Fe.Hare&&((We=Ze.distance-this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt))<0&&(We=0),fe.ability.remainingLength=We),"Buried Treasure"===fe.ability.name&&fe.type===Fe.Octopus&&((We=Ze.distance-this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt))<0&&(We=0),fe.ability.remainingLength=We);var $e=this.lookupService.getRelayEffectFromListByType(fe.raceVariables.relayEffects,Xt.deepBreathing);if(void 0!==$e&&void 0!==$e.additionalValue){var gn=fe.raceVariables.relayEffects.filter(qt=>qt.effectType===Xt.deepBreathing);void 0!==gn&&gn.forEach(qt=>{void 0!==qt.additionalValue&&(Ue=qt.additionalValue),Ue>0&&fe.type!==Fe.Goat&&(fe.currentStats.stamina+=Ue)})}void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(cr[cr.exhaustionPenaltyIncreased])&&(fe.currentStats.stamina/=2);for(var kn=A;kn<=this.timeToComplete*this.frameModifier;kn++){va+=1,be=bo.None;var wr=!1,ks=0;if(te>0)for(var Go=0;Go<te;Go++)ks+=e.raceLegs[Go].distance;q=this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime):c/this.timeToComplete;var xa=d-ks,Hr=0,Zs=!1,ls=0;if(Ze.pathData.forEach(qt=>{!Zs&&xa>=ls&&xa<ls+qt.length&&(Zs=!0,tn=qt,Hr=xa-ls),qt.legStartingDistance=ls,ls+=qt.length,Zs||(nn=qt)}),"Feeding Frenzy"===fe.ability.name&&fe.type===Fe.Shark){var tc=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt);if(xa<=tc||xa>=Ze.distance-tc){Jn=1.5;var Jd=this.globalService.globalVar.modifiers.find(qt=>"feedingFrenzyPositiveModifier"===qt.text);void 0!==Jd&&(Jn=Jd.value)}else Jn=1}Ae>0&&(fe.raceVariables.isBursting=!0,wr=!0,fe.currentStats.stamina+=Ae,Ae=0,null!=kt&&(kt.ability.abilityUsed=!0)),"Navigator"===fe.ability.name&&fe.type===Fe.Dolphin&&(fe.ability.abilityInUse=!1),fe.type===Fe.Fox&&"Fleeting Speed"===fe.ability.name&&!fe.ability.abilityUsed&&(Na+=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt),fe.ability.abilityUsed=!0),fe.type===Fe.Dolphin&&"Echolocation"===fe.ability.name&&(fe.ability.abilityInUse?(Ze.terrain.maxSpeedModifier<1&&(Ze.terrain.maxSpeedModifier=1),Ze.terrain.accelerationModifier<1&&(Ze.terrain.accelerationModifier=1),Ze.terrain.staminaModifier<1&&(Ze.terrain.staminaModifier=1),Ze.terrain.powerModifier<1&&(Ze.terrain.powerModifier=1),Ze.terrain.focusModifier<1&&(Ze.terrain.focusModifier=1),Ze.terrain.adaptabilityModifier<1&&(Ze.terrain.adaptabilityModifier=1)):(Ze.terrain.maxSpeedModifier=un,Ze.terrain.accelerationModifier=Dn,Ze.terrain.staminaModifier=hn,Ze.terrain.powerModifier=dn,Ze.terrain.focusModifier=Ar,Ze.terrain.adaptabilityModifier=ci,this.checkForBlinders(Ze,fe))),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?(Qn=!1,tn===Ze.pathData[Ze.pathData.length-1]&&this.globalService.globalVar.eventRaceData.animalData.some(qt=>qt.isSetToRelay)&&(Qn=!0)):Qn=tn===Ze.pathData[Ze.pathData.length-1];var wl=this.getModifiedAdaptability(fe,On,Pt,Pr,yr,Ze,xa,At,Ai,a,A,ti,pr),ic=this.getModifiedFocus(fe,Pt,Pr,yr,na),ur=this.didAnimalStumble(fe,tn,Hr,Ze.terrain,On,wl,Pt,A,ti,a),Lx=this.didAnimalLoseFocus(fe,this.timeToComplete,e.length,d,Ze.terrain,Pt,na,tn,ic);if(Lx){if(fe.raceVariables.lostFocus=!0,fe.raceVariables.hasLostFocusDuringRace=!0,fe.raceVariables.currentLostFocusLength=fe.raceVariables.defaultLostFocusLength,fe.raceVariables.metersSinceLostFocus=0,ce=pi,this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix){var Ux=.02,_1=this.globalService.globalVar.modifiers.find(qt=>"focusMoraleLossModifier"===qt.text);null!=_1&&(Ux=_1.value),this.globalService.changeGrandPrixMorale(fe.type,-Ux)}if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(gi[gi.unfocused])&&(fe.currentStats.focusMs*=.75),"Night Vision"===fe.ability.name&&fe.type===Fe.Gecko&&(Vn=0),fe.getEquippedItemName()===this.globalService.getEquipmentName(ri.scaryMask)&&ii&&!fe.raceVariables.scaryMaskEffectOccurred){fe.raceVariables.scaryMaskEffectOccurred=!0;var y1=2,Hx=this.globalService.globalVar.modifiers.find(qt=>"scaryMaskEquipmentModifier"===qt.text);void 0!==Hx&&(y1=Hx.value),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=y1:this.timeToComplete+=y1}a.addRaceUpdate(A,ti+" is distracted and lost focus!")}if(ur){if(fe.raceVariables.stumbled=!0,fe.raceVariables.currentStumbledLength=fe.raceVariables.defaultStumbledLength,ce=pi,this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix){var Gx=.02,w1=this.globalService.globalVar.modifiers.find(qt=>"stumbleMoraleLossModifier"===qt.text);null!=w1&&(Gx=w1.value),this.globalService.changeGrandPrixMorale(fe.type,-Gx)}a.addRaceUpdate(A,ti+" stumbles!")}if(0===fe.currentStats.stamina){var vu=.9,zx=this.globalService.globalVar.modifiers.find(qt=>"exhaustionStatLossModifier"===qt.text);if(void 0!==zx&&(vu=zx.value),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix){var S1=1-vu;vu=1-(S1*=1/this.lookupService.getAnimalMorale(fe.type))}void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(cr[cr.exhaustionPenaltyIncreased])&&(vu=1-2*(1-vu)),Pt*=vu;var C1=.3,jx=this.globalService.globalVar.modifiers.find(qt=>"exhaustionStatLossMinimumModifier"===qt.text);void 0!==jx&&(C1=jx.value),Pt<C1&&(Pt=C1),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.setStaminaLossForEventAnimal(Pt,fe.type);var L0=.5;if(fe.talentTree.talentTreeType===li.longDistance&&(L0+=.02*fe.talentTree.column3Row4Points),fe.getEquippedItemName()===this.globalService.getEquipmentName(ri.quickSnack)){L0=1;var qx=this.globalService.globalVar.modifiers.find(qt=>"quickSnackEquipmentModifier"===qt.text);void 0!==qx&&(L0=qx.value)}fe.currentStats.stamina=Hi*L0,a.addRaceUpdate(A,ti+" runs out of stamina and must slow down.")}if(fe.raceVariables.lostFocus||fe.raceVariables.stumbled||Ho){if(fe.raceVariables.lostFocus){be=bo.LostFocus;var $x=.9;fe.talentTree.talentTreeType===li.longDistance&&($x-=.02*fe.talentTree.column1Row4Points);var T1=ce*$x,M1=1-Fa/fe.currentStats.maxSpeedMs;pi>Fa&&(pi-=T1*M1/fe.raceVariables.defaultLostFocusLength),fe.raceVariables.currentLostFocusLength-=1,0===fe.raceVariables.currentLostFocusLength&&(fe.raceVariables.lostFocus=!1,fe.type===Fe.Warthog&&"Mud Pit"===fe.ability.name&&(a.addRaceUpdate(A,ti+" finds a mud pit and can't help but roll in it."),fe.ability.abilityInUse=!0,Ho=!0,ce=pi,pi=0,fe.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt),this.globalService.increaseAbilityXp(fe,void 0,this.selectedRace.raceType===xt.trainingTrack)))}if(fe.raceVariables.stumbled&&(be=bo.Stumble,T1=ce-ce*tn.stumbleSeverity,M1=1-Fa/fe.currentStats.maxSpeedMs,pi>Fa&&(pi-=T1*M1/fe.raceVariables.defaultStumbledLength),fe.raceVariables.currentStumbledLength-=1,0===fe.raceVariables.currentStumbledLength&&(fe.raceVariables.stumbled=!1)),Ho){var Wx=e.length/this.timeToComplete;_a<this.frameModifier/4||_a>=3*this.frameModifier/4?pi+=Wx/this.frameModifier:pi-=Wx/this.frameModifier,(_a+=1)===this.frameModifier&&(Ho=!1,_a=0,pi=ce)}}else{var Zr=fe.currentStats.accelerationMs;if(Zr*=Ze.terrain.accelerationModifier,Zr*=Pt,void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(gi[gi.sticky])&&(Zr*=1-d/this.selectedRace.length*.8),fe.type===Fe.Horse&&"Pacemaker"===fe.ability.name&&fe.ability.abilityInUse&&(Zr*=1.5),fe.type===Fe.Cheetah&&"Sprint"===fe.ability.name&&fe.ability.abilityInUse&&(Zr*=1.35),fe.type===Fe.Cheetah&&"Giving Chase"===fe.ability.name&&!ii&&(Zr+=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt)),"Feeding Frenzy"===fe.ability.name&&fe.type===Fe.Shark&&(Zr*=Jn),fe.type===Fe.Caribou&&"Great Migration"===fe.ability.name&&(Zr+=ia),"Wild Toboggan"===fe.ability.name&&fe.type===Fe.Penguin&&fe.ability.abilityInUse){var EW=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt),nc=20,Xx=this.globalService.globalVar.modifiers.find(qt=>"maxDriftAmountModifier"===qt.text);void 0!==Xx&&(nc=Xx.value),(mu=tn.driftAmount)>(nc*=2)&&(mu=nc),Zr+=EW*(Math.abs(mu)/nc),fe.ability.abilityInUse=!0}"Nap"===fe.ability.name&&fe.type===Fe.Hare&&(fe.ability.remainingLength-=q*(1/this.frameModifier),fe.ability.remainingLength<=0&&(fe.ability.remainingLength=0),fe.ability.remainingLength>0&&(Zr=0)),"Buried Treasure"===fe.ability.name&&fe.type===Fe.Octopus&&(fe.ability.remainingLength-=q*(1/this.frameModifier),fe.ability.remainingLength<=0&&(fe.ability.remainingLength=0),fe.ability.remainingLength>0&&(Zr=0)),fe.type===Fe.Salamander&&"Heat Up"===fe.ability.name&&fe.ability.abilityInUse&&(Zr*=1+.15*fe.ability.totalUseCount),fe.type===Fe.Fox&&"Trickster"===fe.ability.name&&"Acceleration"===fe.ability.tricksterStatLoss&&fe.ability.abilityInUse&&(Zr*=.75),fe.type===Fe.Fox&&"Trickster"===fe.ability.name&&"Acceleration"===fe.ability.tricksterStatGain&&fe.ability.abilityInUse&&(Zr*=1.5),fe.type===Fe.Fox&&"Nine Tails"===fe.ability.name&&(Zr*=1+.15*this.getNineTailsBuffCount("Acceleration",Pr)),fe.type===Fe.Warthog&&"Graze"===fe.ability.name&&(Zr*=1+.1*this.getGrazeBuffCount("Acceleration",yr)),fe.type===Fe.Whale&&"Whalesong"===fe.ability.name&&(3===fe.ability.totalUseCount||fe.ability.totalUseCount>5)&&fe.ability.abilityInUse&&(Zr*=1.3),fe.getEquippedItemName()===this.globalService.getEquipmentName(ri.athleticTape)&&fe.raceVariables.isBursting&&(Zr*=.5),wo&&(Zr*=1+.05*fe.talentTree.column2Row2Points),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition($t[$t.strongWinds])&&(fe.raceCourseType===Ve.Tundra||fe.raceCourseType===Ve.Ocean)&&(Zr*=.5),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(gi[gi.highSpeedLowAcceleration])&&(Zr*=.1),pi+=Zr/this.frameModifier}pi<0&&!Ho&&(pi=0);var wn=fe.currentStats.maxSpeedMs;if(wn*=Ze.terrain.maxSpeedModifier,wn*=Pt,void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(cr[cr.reduceSpeedOnRelay])&&(wn*=1-.2*this.racingAnimals.indexOf(fe)),fe.type===Fe.Cheetah&&"Sprint"===fe.ability.name&&fe.ability.abilityInUse&&(wn*=1.35),fe.type===Fe.Cheetah&&"On The Hunt"===fe.ability.name&&fe.ability.abilityInUse&&(wn+=Vn),"Nap"===fe.ability.name&&fe.type===Fe.Hare&&(wn*=2),ii&&fe.type===Fe.Shark&&"Blood In The Water"===fe.ability.name&&(wn+=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt)),null!==At&&At.type===Fe.Shark&&"Feeding Frenzy"===At.ability.name||null!==kt&&kt.type===Fe.Shark&&"Feeding Frenzy"===kt.ability.name){var Yx=.9,Kx=this.globalService.globalVar.modifiers.find(qt=>"feedingFrenzyNegativeModifier"===qt.text);void 0!==Kx&&(Yx=Kx.value),wn*=Yx}if("Feeding Frenzy"===fe.ability.name&&fe.type===Fe.Shark&&(wn*=Jn),"Quick Toboggan"===fe.ability.name&&fe.type===Fe.Penguin&&(wn+=Rr.permanentMaxSpeedIncreaseMultiplier),fe.type===Fe.Gecko&&"Night Vision"===fe.ability.name&&(wn+=Vn),fe.type===Fe.Fox&&"Trickster"===fe.ability.name&&"Max Speed"===fe.ability.tricksterStatLoss&&fe.ability.abilityInUse&&(wn*=.75),fe.type===Fe.Fox&&"Trickster"===fe.ability.name&&"Max Speed"===fe.ability.tricksterStatGain&&fe.ability.abilityInUse&&(wn*=1.5),fe.type===Fe.Fox&&"Fleeting Speed"===fe.ability.name){var ef=Na;(ef-=.02*Math.floor(xa/Ze.distance*100)*(ef-1))<1&&(ef=1),wn+=ef}if(fe.type===Fe.Fox&&"Nine Tails"===fe.ability.name&&(wn*=1+.15*this.getNineTailsBuffCount("Max Speed",Pr)),fe.type===Fe.Warthog&&"Graze"===fe.ability.name&&(wn*=1+.1*this.getGrazeBuffCount("Max Speed",yr)),fe.type===Fe.Whale&&"Whalesong"===fe.ability.name&&fe.ability.totalUseCount>=5&&fe.ability.abilityInUse&&(wn*=1.3),fe.type===Fe.Whale&&"Storing Power"===fe.ability.name&&(fe.ability.abilityInUse&&(ro=.1*wn,wn*=.9),wn+=La),fe.talentTree.talentTreeType===li.sprint&&(wn*=1+.005*fe.talentTree.column2Row4Points*fe.raceVariables.velocityReachesMaxSpeedCount),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(gi[gi.highSpeedLowAcceleration])&&(wn*=5),Fa=0,fe.talentTree.talentTreeType===li.longDistance&&(pi>wn*(.005*fe.talentTree.column2Row4Points)&&(fe.raceVariables.velocityExceedsMaxSpeedFloorRequirement=!0),fe.raceVariables.velocityExceedsMaxSpeedFloorRequirement&&(Fa+=wn*(.005*fe.talentTree.column2Row4Points))),fe.type===Fe.Whale&&"Unparalleled Focus"===fe.ability.name&&fe.ability.abilityInUse&&(Fa+=.2*wn),fe.getEquippedItemName()===this.globalService.getEquipmentName(ri.incense)){var Zx=.9,Qx=this.globalService.globalVar.modifiers.find(qt=>"incenseEquipmentModifier"===qt.text);void 0!==Qx&&(Zx=Qx.value),pi>=wn*Zx&&(pi=wn)}wo=fe.talentTree.talentTreeType===li.longDistance&&pi<=.25*wn,pi>wn&&(pi=wn,fe.talentTree.talentTreeType===li.sprint&&fe.raceVariables.velocityReachesMaxSpeedCount<10&&(fe.raceVariables.velocityReachesMaxSpeedCount+=1)),tn.checkedForBurst||("Night Vision"===fe.ability.name&&fe.type===Fe.Gecko&&!nn.didAnimalLoseFocus&&nn.length>0&&(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCap||(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount+=1),Vn+=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt),this.globalService.increaseAbilityXp(fe,void 0,this.selectedRace.raceType===xt.trainingTrack),fe.ability.abilityInUse=!0)),nn.didAnimalLoseFocus?ya=0:ya+=1,ya>=3&&fe.type===Fe.Whale&&"Unparalleled Focus"===fe.ability.name&&(fe.ability.abilityInUse=!0,fe.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt),this.globalService.increaseAbilityXp(fe,void 0,this.selectedRace.raceType===xt.trainingTrack),a.addRaceUpdate(A,ti+"'s immense focus prevents their velocity from dropping too low."),ya=0),void 0!==nn&&void 0!==nn.routeDesign&&nn.routeDesign!==Lt.Regular&&!nn.didAnimalStumble&&(null!=fe.equippedOrb&&this.selectedRace.raceType!==xt.trainingTrack&&this.globalService.getOrbTypeFromResource(fe.equippedOrb)===Ot.emerald&&this.globalService.increaseEmeraldOrbXp(nn.length,fe),fe.type===Fe.Goat&&"Sure-footed"===fe.ability.name&&(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCap||(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount+=1),On.permanentAdaptabilityIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt),this.globalService.increaseAbilityXp(fe,void 0,this.selectedRace.raceType===xt.trainingTrack)))));var U0=this.doesRacerMiniBurst(fe,nn),H0=this.doesRacerBurst(fe,tn,this.timeToComplete,e.length,d,wl,ic);if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(cr[cr.noBurst])&&(U0=!1,H0=!1,wr=!1),H0||U0||wr){if(fe.raceVariables.isBursting=!0,(H0||wr)&&(fe.raceVariables.remainingBurstMeters+=this.getBurstDistance(fe,Ze.terrain.powerModifier,Pt,yr)),U0&&(fe.raceVariables.remainingBurstMeters+=this.getBurstDistance(fe,Ze.terrain.powerModifier,Pt,yr)*(.05*fe.talentTree.column1Row4Points)),fe.raceVariables.burstCount+=1,this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix){var Jx=.02,R1=this.globalService.globalVar.modifiers.find(qt=>"burstMoraleBoostModifier"===qt.text);null!=R1&&(Jx=R1.value),this.globalService.changeGrandPrixMorale(fe.type,Jx)}if(fe.type===Fe.Monkey&&"Frenzy"===fe.ability.name&&(fe.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt),this.globalService.increaseAbilityXp(fe,void 0,this.selectedRace.raceType===xt.trainingTrack)),fe.type===Fe.Goat&&"In The Rhythm"===fe.ability.name&&(fe.ability.abilityInUse=!0,fe.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt)),fe.type===Fe.Hare&&"Prey Instinct"===fe.ability.name&&!fe.ability.abilityUsed&&(fe.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt),fe.ability.abilityUsed=!0),fe.type===Fe.Whale&&"Storing Power"===fe.ability.name&&fe.ability.abilityInUse&&(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.storingPowerUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.storingPowerUseCap||(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.storingPowerUseCount+=1),La+=ro)),fe.type===Fe.Octopus&&"Big Brain"===fe.ability.name&&!(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCap)){var OW=Math.round(Ze.pathData.length/3);if(fe.raceVariables.burstCount===OW){this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount+=1),a.addRaceUpdate(A,ti+" uses "+(null==fe?void 0:fe.ability.name)+".");var VW=1+this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt)/100,NW=this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;this.AddRelayEffect(new Ti,fe,NW,new It(1,1,1,VW,1,1),!1,Xt.bigBrain,!0);var e3=4,t3=this.globalService.globalVar.modifiers.find(qt=>"relayAbilityXpGainModifier"===qt.text);void 0!==t3&&(e3=t3.value),this.globalService.increaseAbilityXp(fe,e3,this.selectedRace.raceType===xt.trainingTrack)}}if((H0||wr)&&a.addRaceUpdate(A,"<strong>BURST!</strong> "+ti+" is breaking their limit!"),U0&&a.addRaceUpdate(A,"<strong>MINI BURST!</strong> "+ti+" is breaking their limit!"),fe.type!==Fe.Cheetah||"On The Hunt"!==fe.ability.name||this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCap||(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount+=1),Vn+=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt),this.globalService.increaseAbilityXp(fe,void 0,this.selectedRace.raceType===xt.trainingTrack),fe.ability.abilityInUse=!0),fe.type===Fe.Goat&&"Deep Breathing"===fe.ability.name){var bu=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt);fe.currentStats.stamina+=bu,a.addRaceUpdate(A,ti+" uses "+fe.ability.name+"."),fe.currentStats.stamina>Hi&&(tc=0,(bu=fe.currentStats.stamina-Hi)>Hi&&(bu=Hi),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCap||(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(bu*=.2,this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount+=1),this.AddRelayEffect(new Ti,fe,tc,new It(0,0,0,0,0,0),!1,Xt.deepBreathing,!0,bu)),fe.currentStats.stamina=Hi),this.globalService.increaseAbilityXp(fe,void 0,this.selectedRace.raceType===xt.trainingTrack)}}var Qa=pi;if(bt>0){var D1=this.lookupService.getRelayEffectFromListByType(fe.raceVariables.relayEffects,Xt.camouflage);if(void 0!==D1&&void 0!==D1.additionalValue){var k1=xa/D1.remainingRelayMeters;k1>1&&(k1=1),(Qa+=(1-k1)*bt)>1.5*wn&&(Qa=1.5*wn)}}if(fe.raceVariables.isBursting){be=bo.Burst;var tf=1.25;if(fe.type===Fe.Goat&&"In The Rhythm"===fe.ability.name&&fe.ability.abilityInUse&&(tf+=.5),tf+=nt,fe.talentTree.talentTreeType===li.longDistance){var A1=fe.raceVariables.burstCount*(.005*fe.talentTree.column1Row2Points);A1>1&&(A1=1),tf+=A1}fe.raceVariables.remainingBurstMeters>=Qa/this.frameModifier?(fe.raceVariables.remainingBurstMeters-=(Qa*=tf)/this.frameModifier,fe.raceVariables.remainingBurstMeters<0&&(Qa+=fe.raceVariables.remainingBurstMeters,fe.raceVariables.remainingBurstMeters=0)):(Qa-=fe.raceVariables.remainingBurstMeters,Qa+=fe.raceVariables.remainingBurstMeters*tf,fe.raceVariables.remainingBurstMeters=0,fe.raceVariables.isBursting=!1,a.addRaceUpdate(A,ti+"'s burst ends.")),fe.talentTree.talentTreeType===li.sprint&&!fe.raceVariables.velocityExceedsMaxSpeedDuringBurst&&Qa>wn&&fe.raceVariables.isBursting&&(fe.raceVariables.remainingBurstMeters+=fe.raceVariables.remainingBurstMeters*(.05*fe.talentTree.column2Row2Points),fe.raceVariables.velocityExceedsMaxSpeedDuringBurst=!0)}var Ra=Qa/this.frameModifier;if(fe.ability.abilityInUse&&(fe.type===Fe.Monkey&&"Leap"===fe.ability.name||fe.type===Fe.Octopus&&"Propulsion"===fe.ability.name)){var LW=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt);Ra+=LW/fe.ability.totalFrames,fe.ability.remainingFrames-=1,fe.ability.remainingFrames<=0&&(fe.ability.abilityInUse=!1)}if(Ze.courseType===Ve.Tundra){var mu;if(this.handleTundraDrift(fe,tn,nn,Qn,wl,Ze.terrain,Hr,Ra,Pt,Rr,a,ti,A))Ra=0,pi=0,a.addRaceUpdate(A,ti+" slides into a wall and loses all momentum!");else if((mu=Math.abs(tn.driftAmount))<=(nc=20)&&!Qn){var n3=1-mu/100;Ra*=n3,wn*=n3}this.tundraPreviousYAmount=fe.raceVariables.icyCurrentYAmount}Ze.courseType===Ve.Volcanic?this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?this.selectedRace.raceUI.lavaFallPercentByFrame.push([0,0,0,0,0]):this.handleLavaFall(fe,va,e.length/this.timeToComplete,xa,Ze.distance,a,A,yl)&&(this.timeToComplete=A/this.frameModifier):this.selectedRace.raceLegs.some(qt=>qt.courseType===Ve.Volcanic)&&this.selectedRace.raceUI.lavaFallPercentByFrame.push(this.selectedRace.raceUI.lavaFallPercentByFrame.length>0&&null!=this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]&&this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]>0?this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1]:[0,0,0,0,0]),d+=Ra>Gn?Gn:Ra,Gn-=Ra,this.giveOrbXpBasedOnMeters(Ra,fe,pi,wn);var rc=1e5;this.timeToComplete*this.frameModifier>2e4&&(rc=1e4);var P1=1e5;if(this.timeToComplete*this.frameModifier>2e4&&(P1=1e3),e.raceUI.distanceCoveredByFrame.push(Math.round(d*P1)/P1),e.raceUI.velocityByFrame.push(Math.round(Ra*rc)/rc),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix||e.raceUI.timeToCompleteByFrame.push(this.timeToComplete),e.raceUI.maxSpeedByFrame.push(Math.round(wn*rc)/rc),e.raceUI.staminaPercentByFrame.push(Math.round(fe.currentStats.stamina/Hi*rc)/rc),e.raceUI.racerEffectByFrame.push(be),this.handleRacePositionByFrame(e,q,A,this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+d:d),this.handleStamina(fe,a,Ra,A,Ze.terrain,Hi,xa,Ze,na,this.selectedRace.raceLegs[this.selectedRace.raceLegs.length-1].courseType,tn,Hr),fe.raceVariables.forceRelay&&(Gn=0),null!=this.selectedRace.drawnObjects&&this.selectedRace.drawnObjects.length>0&&this.handleBrazierLighting(kn,d),Lx||(fe.raceVariables.metersSinceLostFocus+=Ra),fe.type===Fe.Fox&&"Nine Tails"===fe.ability.name&&(this.checkForNineTailsBuff(tn,Pr,fe,Ze,Pt,a,A,ti),Pr.length>0&&(Pr.forEach(qt=>{qt[1]-=Ra}),Pr=Pr.filter(qt=>qt[1]>0))),fe.type===Fe.Warthog&&"Graze"===fe.ability.name&&yr.length>0&&(yr.forEach(qt=>{qt[1]-=Ra}),yr=yr.filter(qt=>qt[1]>0)),fe.ability.abilityInUse&&fe.ability.remainingLength>0&&(fe.ability.remainingLength-=Ra,fe.type===Fe.Gecko&&"Camouflage"===fe.ability.name&&(fe.ability.remainingLength-=Ra),fe.ability.remainingLength<=0)){if(fe.ability.abilityInUse=!1,fe.ability.currentCooldown=fe.ability.cooldown,fe.getEquippedItemName()===this.globalService.getEquipmentName(ri.pendant)){var rf=.9;void 0!==(af=this.globalService.globalVar.modifiers.find(qt=>"pendantEquipmentModifier"===qt.text))&&(rf=af.value),fe.ability.currentCooldown*=rf}if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(gi[gi.longCooldowns])&&(fe.ability.currentCooldown*=2),null!=fe.raceVariables&&null!=fe.raceVariables.relayEffects&&fe.raceVariables.relayEffects.length>0){var E1=this.lookupService.getRelayEffectFromListByType(fe.raceVariables.relayEffects,Xt.supportAbilityCooldown);void 0!==E1&&void 0!==E1.additionalValue&&(fe.ability.currentCooldown*=E1.additionalValue)}}if(null!=fe.ability.currentCooldown&&fe.ability.currentCooldown<=0&&this.abilityRedundancyCheck(fe,pi,tn,Ze,Gn,Pt)){var af;if(this.useAbility(fe,e,Ze,Pt,Hi,xa,na,yr,a,A,ti),(ao=new ze).value=A,fe.type===Fe.Fox&&"Trickster"===fe.ability.name?ao.text=fe.getAbilityUseUpdateText(ti,", gaining "+fe.ability.tricksterStatGain+" but losing "+fe.ability.tricksterStatLoss):fe.type===Fe.Whale&&"Whalesong"===fe.ability.name?1===fe.ability.totalUseCount?ao.text=fe.getAbilityUseUpdateText(ti," (Adaptability)"):2===fe.ability.totalUseCount?ao.text=fe.getAbilityUseUpdateText(ti," (Burst Distance)"):3===fe.ability.totalUseCount?ao.text=fe.getAbilityUseUpdateText(ti," (Acceleration)"):4===fe.ability.totalUseCount?ao.text=fe.getAbilityUseUpdateText(ti," (Focus)"):5===fe.ability.totalUseCount?ao.text=fe.getAbilityUseUpdateText(ti," (Max Speed)"):fe.ability.totalUseCount>5&&(ao.text=fe.getAbilityUseUpdateText(ti," (All)")):ao.text=fe.getAbilityUseUpdateText(ti),fe.type===Fe.Warthog&&"Graze"===fe.ability.name||a.raceUpdates.push(ao),fe.ability.currentCooldown=fe.ability.cooldown,fe.getEquippedItemName()===this.globalService.getEquipmentName(ri.pendant))rf=.9,void 0!==(af=this.globalService.globalVar.modifiers.find($W=>"pendantEquipmentModifier"===$W.text))&&(rf=af.value),fe.ability.currentCooldown*=rf;if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(gi[gi.longCooldowns])&&(fe.ability.currentCooldown*=2),fe.type===Fe.Caribou&&"Great Migration"===fe.ability.name){var I1=.1*Hi;fe.currentStats.stamina-=I1,ia=I1>1?.25*I1:1}}null!=fe.raceVariables.relayEffects&&fe.raceVariables.relayEffects.length>0&&(fe.raceVariables.relayEffects.forEach(qt=>{qt.remainingRelayMeters<=Ra?(qt.remainingRelayMeters=0,qt.isMultiplicative?null==fe||fe.currentStats.divideCurrentRacingStats(qt.relayAffectedStatRatios):null==fe||fe.currentStats.subtractCurrentRacingStats(qt.relayAffectedStatRatios),qt.effectType!==Xt.deepBreathing&&qt.effectType!==Xt.bigBrain&&qt.effectType!==Xt.specialDelivery&&a.addRaceUpdate(A,ti+"'s relay effect "+this.lookupService.getRelayEffectNameByType(qt.effectType)+" ends.")):qt.remainingRelayMeters-=Ra}),fe.raceVariables.relayEffects=fe.raceVariables.relayEffects.filter(qt=>qt.remainingRelayMeters>0));var ao,a3=10;this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(a3=20),0!==A&&A!==this.timeToComplete&&A%(a3*this.frameModifier)==0&&((ao=new ze).value=A,ao.text=this.getUpdateMessageByRelativeDistance(q,A,this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+d:d,ti),a.raceUpdates.push(ao));var sf=!1,G0=0,B1=0;if(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(Er=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime(),G0+=q*Er,B1=this.globalService.globalVar.eventRaceData.distanceCovered),d+B1>q*(A/this.frameModifier)+G0?(ii||(sf=!0),ii=!0):(ii&&(sf=!0),ii=!1),sf&&fe.type===Fe.Shark&&"Apex Predator"===fe.ability.name&&!fe.ability.abilityUsed&&kn>1){a.addRaceUpdate(A,ti+" bites the other racers as they pass, slowing them down."),fe.ability.abilityUsed=!0;var z0=this.lookupService.GetAbilityEffectiveAmount(fe,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier,Pt),O1=this.timeToComplete*(z0/this.selectedRace.length),o3=1.5*O1;this.timeToComplete+=o3-O1,this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.bonusTime+=o3-O1),this.globalService.increaseAbilityXp(fe,void 0,this.selectedRace.raceType===xt.trainingTrack)}if(lt>0&&q*(A/this.frameModifier)+G0>=lt&&q*((A-1)/this.frameModifier)+G0<lt){var lf=this.racingAnimals.find(qt=>qt.type===Fe.Warthog);if(void 0!==lf){z0=this.lookupService.GetAbilityEffectiveAmount(lf,this.selectedRace.pinnacleConditions,Ze.terrain.powerModifier);var V1=e.length/this.timeToComplete;this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=z0/(V1=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=z0/V1,lt=0,a.addRaceUpdate(A,"<span class='coloredText flatlandColor'>"+(null==lf?void 0:lf.name)+"</span> tussles with the competition as they pass, slowing them down.")}}if(fe.ability.currentCooldown-=1/this.frameModifier,A+=1,Gn<=0){a.addRaceUpdate(A,ti+" finishes their leg of the race."),Ze.legComplete=!0,ne+=1,fe.type===Fe.Warthog&&"Time To Tussle"===fe.ability.name&&ii&&(lt=d+B1,this.globalService.increaseAbilityXp(fe,void 0,this.selectedRace.raceType===xt.trainingTrack)),this.preRacerResetRelayEffectCheck(fe,At,a,A,ti,Ze,Ze,Pt,Qa,Hi),fe.type===Fe.Octopus&&"Buried Treasure"===fe.ability.name&&(pt=1.25),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped?this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.endOfLegRelayEffectCheck(fe,new Ti,a,A,Nt,Ze,Ze,Pt,Qa,ic,wl):this.PrepareRacingAnimal(a,A,Nt,fe,void 0,void 0,void 0,Pt,void 0,Qa),Ze.terrain.accelerationModifier=Dn,Ze.terrain.maxSpeedModifier=un,Ze.terrain.staminaModifier=hn,Ze.terrain.powerModifier=dn,Ze.terrain.focusModifier=Ar,Ze.terrain.adaptabilityModifier=ci,oe.push(fe),de.push(Ze);break}A===this.timeToComplete*this.frameModifier&&(Ze.terrain.accelerationModifier=Dn,Ze.terrain.maxSpeedModifier=un,Ze.terrain.staminaModifier=hn,Ze.terrain.powerModifier=dn,Ze.terrain.focusModifier=Ar,Ze.terrain.adaptabilityModifier=ci),m=Qa,_=wl,T=ic}if(te+=1,this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix){var s3=.05,N1=this.globalService.globalVar.modifiers.find(qt=>"segmentCompleteMoraleBoostModifier"===qt.text);null!=N1&&(s3=N1.value),this.globalService.changeGrandPrixMorale(fe.type,s3),this.globalService.globalVar.eventRaceData.previousRaceSegmentData=this.carryOverEventRaceSegmentData(fe,pi,Vn,On.permanentAdaptabilityIncreaseMultiplier,Rr.permanentMaxSpeedIncreaseMultiplier,Jn,ia,na.coldBloodedIncreaseMultiplier,Na,Pr,yr,Ue,wo,Fa,La,ya)}}),e.raceLegs.some(Ze=>!Ze.legComplete)?(a.wasSuccessful=!1,a.totalFramesPassed=A,a.distanceCovered=e.raceUI.distanceCoveredByFrame[A-1],a.addRaceUpdate(A,"You lost the race..."),this.globalService.globalVar.orbStats.allOrbs=this.existingOrbStats.allOrbs):(e.isCompleted=!0,a.wasSuccessful=!0,a.totalFramesPassed=A,a.distanceCovered=e.raceUI.distanceCoveredByFrame[A-1],a.addRaceUpdate(A,"You won the race!")),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.racingAnimals.forEach(Ze=>{this.PrepareRacingAnimal(a,A,"",Ze,void 0,void 0,void 0,void 0,!0)}),this.globalService.globalVar.trackedStats.totalMetersRaced+=d,a.wasSuccessful&&this.raceWasSuccessfulUpdate(a,pt),a}getStaminaModifier(e,i,r,a,c,d){var m,_=this.globalService.globalVar.modifiers.find(A=>"staminaModifier"===A.text);return m=void 0===_?.2:_.value,null!=e&&null!=e.staminaModifier&&(m*=e.staminaModifier),i.talentTree.talentTreeType===li.sprint&&(m*=1+.05*i.talentTree.column3Row2Points),i.talentTree.talentTreeType===li.longDistance&&i.currentStats.stamina/r<=.35&&(m*=1-.05*i.talentTree.column3Row2Points),i.type===Fe.Warthog&&"Mud Pit"===i.ability.name&&i.ability.abilityInUse&&(m*=.75),i.type===Fe.Salamander&&"Cold Blooded"===i.ability.name&&i.ability.abilityInUse&&(m*=1-d),i.type===Fe.Horse&&"Second Wind"===i.ability.name&&i.ability.abilityInUse&&(m*=1-.9),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition($t[$t.steamy])&&(m*=2),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition($t[$t.burstIncreaseStaminaLoss])&&i.raceVariables.isBursting&&(m*=3),m}handleStamina(e,i,r,a,c,d,m,_,T,A,q,Q){var te=this.getStaminaModifier(c,e,d,m,_,T.coldBloodedIncreaseMultiplier);if(e.currentStats.stamina-=e.type===Fe.Cheetah&&"Sprint"===e.ability.name&&e.ability.abilityInUse?r*te*2:r*te,void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(cr[cr.lowStaminaRelay])&&e.currentStats.stamina/d<.5)if(e.raceCourseType===A)this.timeToComplete=1;else{var de=this.selectedRace.raceLegs.findIndex(Ae=>Ae===_);if(de<this.selectedRace.raceLegs.length-1){var be=_.distance-m;this.selectedRace.raceLegs[de].distance-=be,this.selectedRace.raceLegs[de+1].distance+=be;var ce=this.selectedRace.raceLegs[de].pathData.findIndex(Ae=>Ae===q);this.selectedRace.raceLegs[de].pathData=this.selectedRace.raceLegs[de].pathData.slice(0,ce+1);var ne=this.selectedRace.raceLegs[de].pathData[ce].length-Q;this.selectedRace.raceLegs[de].pathData[ce].length-=ne,this.selectedRace.raceLegs[de+1].pathData[0].length+=ne,e.raceVariables.forceRelay=!0}}e.currentStats.stamina<0&&(e.currentStats.stamina=0,e.raceVariables.ranOutOfStamina=!0)}getBurstDistance(e,i,r,a){var c=0,d=this.globalService.globalVar.modifiers.find(de=>"breedLevelStatModifier"===de.text);null!=d&&(c=d.value),c=1+c*(e.breedLevel-1);var m=1;e.type===Fe.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(m*=.75),e.type===Fe.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(m*=1.5),e.type===Fe.Warthog&&"Graze"===e.ability.name&&void 0!==a&&(m*=1+.1*this.getGrazeBuffCount("Power",a));var _=e.currentStats.powerMs*m*i*r,T=1;if(e.getEquippedItemName()===this.globalService.getEquipmentName(ri.runningShoes)){var A=1.2,q=this.globalService.globalVar.modifiers.find(de=>"runningShoesEquipmentModifier"===de.text);void 0!==q&&(A=q.value),T=1+e.raceVariables.burstCount*(A-1)}var Q=0,te=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,Xt.supportBurstDistance);void 0!==te&&void 0!==te.additionalValue&&(Q=te.additionalValue);var oe=1;return e.type===Fe.Whale&&"Whalesong"===e.ability.name&&(2===e.ability.totalUseCount||e.ability.totalUseCount>5)&&e.ability.abilityInUse&&(oe*=1.3),e.currentStats.calculateBurstDistance(c,void 0,_)*T*oe+Q}doesRacerMiniBurst(e,i){var r=!1;return null!=i&&i.isSpecialPath&&(e.talentTree.talentTreeType===li.sprint&&e.talentTree.column1Row4Points>0&&!i.didAnimalStumble&&!i.checkedForMiniBurst&&(r=!0),i.checkedForMiniBurst=!0),r}getBurstChance(e,i,r){var a=1e3/this.selectedRace.length,c=0,d=this.globalService.globalVar.modifiers.find(A=>"breedLevelStatModifier"===A.text);null!=d&&(c=d.value);var m=e.currentStats.calculateBurstChance(c=1+c*(e.breedLevel-1),i,r)*a;e.type===Fe.Warthog&&"Mud Pit"===e.ability.name&&e.ability.abilityInUse&&(m*=1.25);var _=0,T=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,Xt.supportBurstChance);return void 0!==T&&void 0!==T.additionalValue&&(_=T.additionalValue),m+_}doesRacerBurst(e,i,r,a,c,d,m){var _=this.getBurstChance(e,m,d);if(i.checkedForBurst)return!1;if(i.checkedForBurst=!0,"Night Vision"===e.ability.name&&e.type===Fe.Gecko&&(e.ability.abilityInUse=!1),e.type===Fe.Hare&&"Prey Instinct"===e.ability.name&&!e.ability.abilityUsed)return!0;if(i.isSpecialPath){var T=this.lookupService.getResourceByName("Course Maps");if(null==T&&(T=0),T>0){var A=1,q=this.globalService.globalVar.modifiers.find(te=>"racerMapsModifier"===te.text);null!=q&&(A=1+T*q.value),_*=A}}return this.utilityService.getRandomNumber(1,100)<=_+1}raceWasSuccessfulUpdate(e,i){var d,r=this.globalService.globalVar.animals.find(ne=>ne.type===Fe.Octopus),a="<span class='coloredText waterColor'>"+(null==r?void 0:r.name)+"</span>",c=this.globalService.globalVar.circuitRank,m=0;if(this.selectedRace.isCircuitRace)d=this.globalService.globalVar.circuitRaces.find(ne=>ne.raceId===this.selectedRace.raceId),this.globalService.globalVar.circuitRaces.filter(ne=>ne.requiredRank===c).every(ne=>ne.isCompleted)&&(this.selectedRace.circuitIncreaseReward=this.globalService.IncreaseCircuitRank(),this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Le.Resources)));else if(d=this.globalService.globalVar.localRaces.find(ne=>ne.raceId===this.selectedRace.raceId&&ne.localRaceType===this.selectedRace.localRaceType),this.selectedRace.raceType===xt.special&&this.selectedRace.localRaceType===Li.Pinnacle&&(this.globalService.globalVar.currentPinnacleConditions=void 0),this.selectedRace.localRaceType===Li.Free){var T=this.globalService.globalVar.resources.find(ne=>"International Races"===ne.name),A=this.globalService.globalVar.resources.find(ne=>"National Races"===ne.name);if(null!=T&&T.amount>0){var q=5,Q=this.globalService.globalVar.modifiers.find(ne=>"internationalRacesToMedalModifier"===ne.text);null!=Q&&(q=Q.value),this.globalService.globalVar.nationalRaceCountdown>=q&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Le.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else if(null!=A&&A.amount>0){var te=12,oe=this.globalService.globalVar.modifiers.find(ne=>"nationalRacesToMedalModifier"===ne.text);null!=oe&&(te=oe.value),this.globalService.globalVar.nationalRaceCountdown>=te&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Le.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else{var de=50,be=this.globalService.globalVar.modifiers.find(ne=>"freeRacesToMedalModifier"===ne.text);null!=be&&(de=be.value),this.globalService.globalVar.nationalRaceCountdown>=de&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Le.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}}if(this.selectedRace.localRaceType!==Li.Free&&this.selectedRace.localRaceType!==Li.Track){if(void 0===d)return;this.selectedRace.localRaceType===Li.Mono&&(this.globalService.globalVar.lastMonoRaceCourseType=this.selectedRace.raceLegs[0].courseType),this.globalService.IncreaseLocalRaceRank(this.selectedRace.localRaceType),d.isCompleted=!0}else this.selectedRace.localRaceType===Li.Free&&(this.globalService.globalVar.nationalRaceCountdown+=1);this.racingAnimals.forEach(ne=>{this.selectedRace.isCircuitRace?m=this.lookupService.getCircuitBreedGaugeIncrease(ne):this.selectedRace.raceType!==xt.trainingTrack&&(m=this.lookupService.getLocalBreedGaugeIncrease(ne)),this.globalService.IncreaseAnimalBreedGauge(ne,m)}),this.selectedRace.localRaceType!==Li.Track?e.beatMoneyMark=this.checkMoneyMark(e):this.handleTrackRaceRewards(e),null!=this.selectedRace.rewards&&this.selectedRace.rewards.forEach(ne=>{if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(kt=>kt.name===ne.name)){var Ae=this.globalService.globalVar.resources.find(kt=>kt.name===ne.name);if(null!=Ae)if(this.selectedRace.localRaceType!==Li.Track)if("Coins"===Ae.name){if(e.beatMoneyMark){e.addRaceUpdate(e.totalFramesPassed,"You beat the money mark!");var Ue=1.25,bt=this.globalService.globalVar.modifiers.find(kt=>"moneyMarkRewardModifier"===kt.text);null!=bt&&(Ue=bt.value),ne.amount=Math.round(ne.amount*Ue)}var nt=this.lookupService.getRenown();ne.amount=Math.round(ne.amount*this.lookupService.getRenownCoinModifier(nt,!1)),i>1&&e.addRaceUpdate(e.totalFramesPassed,a+" finds buried treasure at the bottom of the ocean!"),ne.amount=Math.round(ne.amount*i),Ae.amount+=ne.amount}else"Facility Level"===Ae.name?(Ae.amount+=ne.amount,this.lookupService.recalculateAllAnimalStats()):"Renown"===Ae.name?Ae.amount=parseFloat((Ae.amount+ne.amount).toFixed(3)):Ae.amount+=ne.amount;else Ae.amount+=ne.amount}else if("Bonus Breed XP Gain From Training"===ne.name&&ne.itemType===Le.Other){var pt=this.selectedRace.raceLegs[0].courseType;null!=(lt=this.racingAnimals.find(kt=>kt.raceCourseType===pt))&&(lt.miscStats.bonusBreedXpGainFromTraining+=ne.amount)}else if("Bonus Breed XP Gain From Free Races"===ne.name&&ne.itemType===Le.Other)pt=this.selectedRace.raceLegs[0].courseType,null!=(lt=this.racingAnimals.find(Rt=>Rt.raceCourseType===pt))&&(lt.miscStats.bonusBreedXpGainFromLocalRaces+=ne.amount);else if("Bonus Breed XP Gain From Circuit Races"===ne.name&&ne.itemType===Le.Other)pt=this.selectedRace.raceLegs[0].courseType,null!=(lt=this.racingAnimals.find(Rt=>Rt.raceCourseType===pt))&&(lt.miscStats.bonusBreedXpGainFromCircuitRaces+=ne.amount);else if("Training Time Reduction"===ne.name&&ne.itemType===Le.Other)pt=this.selectedRace.raceLegs[0].courseType,null!=(lt=this.racingAnimals.find(Rt=>Rt.raceCourseType===pt))&&(lt.miscStats.trainingTimeReduction+=ne.amount);else if("Diminishing Returns per Facility Level"===ne.name&&ne.itemType===Le.Other)pt=this.selectedRace.raceLegs[0].courseType,null!=(lt=this.racingAnimals.find(Rt=>Rt.raceCourseType===pt))&&(lt.miscStats.diminishingReturnsBonus+=ne.amount);else if("Orb Pendant"===ne.name&&ne.itemType===Le.Other)pt=this.selectedRace.raceLegs[0].courseType,null!=(lt=this.racingAnimals.find(Rt=>Rt.raceCourseType===pt))&&(lt.canEquipOrb=!0);else if("Bonus Talents"===ne.name&&ne.itemType===Le.Other)pt=this.selectedRace.raceLegs[0].courseType,null!=(lt=this.racingAnimals.find(Rt=>Rt.raceCourseType===pt))&&(lt.miscStats.bonusTalents+=ne.amount);else if("Bonus Base Ability Efficiency"===ne.name&&ne.itemType===Le.Other)pt=this.selectedRace.raceLegs[0].courseType,null!=(lt=this.racingAnimals.find(Rt=>Rt.raceCourseType===pt))&&(lt.miscStats.bonusAbilityEfficiency+=ne.amount);else if("Bonus Orb XP Gain"===ne.name&&ne.itemType===Le.Other)pt=this.selectedRace.raceLegs[0].courseType,null!=(lt=this.racingAnimals.find(Rt=>Rt.raceCourseType===pt))&&(lt.miscStats.bonusOrbXp+=ne.amount);else if("Nectar of the Gods"===ne.name&&ne.itemType===Le.Other){var lt;pt=this.selectedRace.raceLegs[0].courseType,null!=(lt=this.racingAnimals.find(Rt=>Rt.raceCourseType===pt))&&(lt.nectarAvailable=!0)}else this.globalService.globalVar.resources.push(new Je(ne.name,ne.amount,ne.itemType))})}checkMoneyMark(e){var i=!1;if(0===this.lookupService.getResourceByName("Money Mark"))return i;var a=this.globalService.globalVar.modifiers.find(d=>"moneyMarkPaceModifier"===d.text);return null==a||e.totalFramesPassed<=this.timeToComplete*this.frameModifier*a.value&&(i=!0),i}handleTrackRaceRewards(e){if(1===this.selectedRace.raceLegs.length){var i=this.selectedRace.raceLegs[0].courseType,r=this.racingAnimals.find(A=>A.raceCourseType===i);if(void 0!==r){var a=null;if(this.selectedRace.trackRaceType===Hn.novice&&(a=r.allTrainingTracks.noviceTrack),this.selectedRace.trackRaceType===Hn.intermediate&&(a=r.allTrainingTracks.intermediateTrack),this.selectedRace.trackRaceType===Hn.master&&(a=r.allTrainingTracks.masterTrack),this.selectedRace.trackRaceType===Hn.legacy&&(a=r.allTrainingTracks.legacyTrack),null!==a){var c=this.timeToComplete*this.frameModifier,d=.25,m=this.globalService.globalVar.modifiers.find(A=>"trainingTrackPaceModifier"===A.text);void 0!==m&&(d=m.value),this.selectedRace.trackRaceType===Hn.legacy&&(d=1);for(var _=0;_<a.totalRewards;_++)_<a.rewardsObtained||e.totalFramesPassed<=c/(1+d*_)&&(a.rewardsObtained=_+1,a.rewardsObtained===a.totalRewards&&(this.selectedRace.trackRaceType===Hn.novice&&(r.allTrainingTracks.intermediateTrackAvailable=!0),this.selectedRace.trackRaceType===Hn.intermediate&&(r.allTrainingTracks.masterTrackAvailable=!0),this.selectedRace.trackRaceType===Hn.master&&(r.allTrainingTracks.legacyTrackAvailable=!0)),null==this.selectedRace.rewards&&(this.selectedRace.rewards=[]),this.selectedRace.rewards.push(a.rewards[_]));null!=this.selectedRace.rewards&&(this.selectedRace.rewards=this.utilityService.condenseList(this.selectedRace.rewards))}}}}getUpdateMessageByRelativeDistance(e,i,r,a){var c=a,d=e*(i/this.frameModifier);return this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(d+=e*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),r<.5*d?c="Is "+a+" <strong>even moving?!</strong>":r<.75*d?c=a+" is <strong>falling out of the race!</strong>":r<.9*d?c=a+" is <strong>just a step behind everyone else!</strong>":r>=.9*d&&r<=1.1*d?c=a+" is <strong>right on pace!</strong>":r>=1.5*d?c=a+" <strong>CANNOT be caught!!</strong>":r>=1.25*d?c=a+" is <strong>WAY ahead of the pack!</strong>":r>=1.1*d&&(c=a+" is <strong>barely leading the pack!</strong>"),c}PrepareRacingAnimal(e,i,r,a,c,d,m,_,T,A,q,Q,te){if(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!0),a.ability.currentCooldown=a.ability.cooldown,a.ability.remainingLength=0,a.ability.totalUseCount=0,a.getEquippedItemName()===this.globalService.getEquipmentName(ri.pendant)){var oe=.9,de=this.globalService.globalVar.modifiers.find(Ae=>"pendantEquipmentModifier"===Ae.text);void 0!==de&&(oe=de.value),a.ability.currentCooldown*=oe}if(void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition(gi[gi.longCooldowns])&&(a.ability.currentCooldown*=2),null!=a.raceVariables&&null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0){var ce=this.lookupService.getRelayEffectFromListByType(a.raceVariables.relayEffects,Xt.supportAbilityCooldown);void 0!==ce&&void 0!==ce.additionalValue&&(a.ability.currentCooldown*=ce.additionalValue)}a.ability.abilityUsed=!1,a.ability.abilityInUse=!1,null!=a.raceVariables&&(a.raceVariables.ranOutOfStamina=!1,a.raceVariables.burstCount=0,a.raceVariables.metersSinceLostFocus=0,a.raceVariables.hasLostFocusDuringRace=!1,a.raceVariables.firstAbilityUseEffectApplied=!1,a.raceVariables.velocityExceedsMaxSpeedDuringBurst=!1,a.raceVariables.velocityExceedsMaxSpeedFloorRequirement=!1,a.raceVariables.velocityReachesMaxSpeedCount=0),this.globalService.calculateAnimalRacingStats(a,te),!0!==T&&(null!=c&&c.length>0&&this.endOfLegRelayEffectCheck(c[c.length-1],a,e,i,r,d,m,_,A,q,Q),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects.forEach(Ae=>{a.raceVariables.relayEffects.push(Ae.makeCopy())}),this.globalService.globalVar.eventRaceData.queuedRelayEffects.length>0&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects=this.globalService.globalVar.eventRaceData.queuedRelayEffects.filter(Ae=>Ae.affectsAllRacers))),null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0&&a.raceVariables.relayEffects.forEach(Ae=>{Ae.isMultiplicative?a.currentStats.multiplyCurrentRacingStats(Ae.relayAffectedStatRatios):a.currentStats.addCurrentRacingStats(Ae.relayAffectedStatRatios)}))}preRacerResetRelayEffectCheck(e,i,r,a,c,d,m,_,T,A){var q=4,Q=this.globalService.globalVar.modifiers.find(ne=>"relayAbilityXpGainModifier"===ne.text);if(void 0!==Q&&(q=Q.value),null===i&&(i=new Ti),null!=m){if(e.type===Fe.Caribou&&"Herd Mentality"===e.ability.name&&!e.raceVariables.ranOutOfStamina){var te=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,m.terrain.powerModifier,_)+.1*e.currentStats.stamina,oe=0;this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCap||(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount+=1),r.addRaceUpdate(a,c+" uses "+e.ability.name+"."),this.AddRelayEffect(i,e,oe,new It(0,0,0,0,0,0),!1,Xt.herdMentality,!1,te),this.globalService.increaseAbilityXp(e,q,this.selectedRace.raceType===xt.trainingTrack))}if(!(e.type!==Fe.Caribou||"Special Delivery"!==e.ability.name||e.raceVariables.ranOutOfStamina||(void 0===A&&(A=1),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCap))){this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount+=1),oe=this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;var de=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,m.terrain.powerModifier,_);e.currentStats.stamina+=de;var be=e.currentStats.stamina/A;be>1.25&&(be=1.25);var ce=be;this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(ce*=.1),this.AddRelayEffect(e,e,oe,new It(0,0,0,0,0,0),!1,Xt.specialDelivery,!0,ce),r.addRaceUpdate(a,c+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,q,this.selectedRace.raceType===xt.trainingTrack)}}}endOfLegRelayEffectCheck(e,i,r,a,c,d,m,_,T,A,q,Q=1){var te=4,oe=this.globalService.globalVar.modifiers.find(Ue=>"relayAbilityXpGainModifier"===Ue.text);if(void 0!==oe&&(te=oe.value),"Inspiration"===e.ability.name&&e.type===Fe.Horse&&null!=m){var de=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,m.terrain.powerModifier,_);this.AddRelayEffect(i,e,de*Q,new It(.25*e.currentStats.maxSpeedMs,0,0,0,0,0),!1,Xt.inspiration,!1),r.addRaceUpdate(a,c+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,te,this.selectedRace.raceType===xt.trainingTrack),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.inspirationUseCount+=1)}if("Flowing Current"===e.ability.name&&e.type===Fe.Dolphin&&null!=m&&(de=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,m.terrain.powerModifier,_),this.AddRelayEffect(i,e,de*Q,new It(0,.25*e.currentStats.accelerationMs,0,0,0,0),!1,Xt.flowingCurrent,!1),r.addRaceUpdate(a,c+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,te,this.selectedRace.raceType===xt.trainingTrack),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.flowingCurrentUseCount+=1)),"Navigator"===e.ability.name&&e.type===Fe.Dolphin&&null!=m&&(de=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,m.terrain.powerModifier,_),this.AddRelayEffect(i,e,de*Q,new It(0,0,0,0,0,.25*e.currentStats.adaptabilityMs),!1,Xt.navigator,!1),r.addRaceUpdate(a,c+" uses "+(null==e?void 0:e.ability.name)+"."),this.globalService.increaseAbilityXp(e,te,this.selectedRace.raceType===xt.trainingTrack),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.navigatorUseCount+=1)),e.type===Fe.Gecko&&"Camouflage"===e.ability.name&&null!=m){var ce=T;de=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,m.terrain.powerModifier,_),this.AddRelayEffect(i,e,de*Q,new It(0,0,0,0,0,0),!1,Xt.camouflage,!1,ce),r.addRaceUpdate(a,c+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,te,this.selectedRace.raceType===xt.trainingTrack),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.camouflageUseCount+=1)}if(void 0!==d){var ne=new Kn;void 0!==m&&(ne=m.terrain),void 0===_&&(_=1),void 0===q&&(q=e.currentStats.adaptabilityMs),void 0===A&&(A=e.currentStats.focusMs),this.talentRelayCheck(e,i,d.distance*Q,ne,_,A,q),this.batonEquipmentCheck(e,i,d.distance*Q)}}talentRelayCheck(e,i,r,a,c,d,m,_=1){if(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.talentTree.talentTreeType===li.support){if(e.talentTree.column1Row1Points>0&&this.AddRelayEffect(i,e,r*_,new It(1,1,1,1,1,T=1+.01*e.talentTree.column1Row1Points),!0,Xt.supportAdaptabilityRelay,!1),e.talentTree.column1Row3Points>0&&this.AddRelayEffect(i,e,r*_,new It(T=1+.01*e.talentTree.column1Row3Points,1,1,1,1,1),!0,Xt.supportMaxSpeedRelay,!1),e.talentTree.column2Row1Points>0&&this.AddRelayEffect(i,e,r*_,new It(1,T=1+.01*e.talentTree.column2Row1Points,1,1,1,1),!0,Xt.supportAccelerationRelay,!1),e.talentTree.column2Row2Points>0){var T=this.getBurstDistance(e,a.powerModifier,c)*(.05*e.talentTree.column2Row2Points);this.AddRelayEffect(i,e,r*_,new It(0,0,0,0,0,0),!1,Xt.supportBurstDistance,!1,T)}if(e.talentTree.column2Row3Points>0&&this.AddRelayEffect(i,e,r*_,new It(1,1,T=1+.01*e.talentTree.column2Row3Points,1,1,1),!0,Xt.supportStaminaRelay,!1),e.talentTree.column2Row4Points>0){T=this.getBurstChance(e,d,m)*(.03*e.talentTree.column2Row4Points);this.AddRelayEffect(i,e,r*_,new It(0,0,0,0,0,0),!1,Xt.supportBurstChance,!1,T)}e.talentTree.column3Row1Points>0&&this.AddRelayEffect(i,e,r*_,new It(1,1,1,T=1+.01*e.talentTree.column3Row1Points,1,1),!0,Xt.supportPowerRelay,!1),e.talentTree.column3Row2Points>0&&(T=1-.02*e.talentTree.column3Row2Points,this.AddRelayEffect(i,e,r*_,new It(0,0,0,0,0,0),!1,Xt.supportAbilityCooldown,!1,T)),e.talentTree.column3Row3Points>0&&this.AddRelayEffect(i,e,r*_,new It(1,1,1,1,T=1+.01*e.talentTree.column3Row3Points,1),!0,Xt.supportFocusRelay,!1),e.talentTree.column3Row4Points>0&&(T=1+.02*e.talentTree.column3Row4Points,this.AddRelayEffect(i,e,r*_,new It(1,1,1,1,1,1),!0,Xt.supportAbilityEfficiency,!1,T))}}batonEquipmentCheck(e,i,r,a=1){if(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.getEquippedItemName()===this.globalService.getEquipmentName(ri.redBaton)){var c=1.1,d=this.globalService.globalVar.modifiers.find(ce=>"redBatonEquipmentModifier"===ce.text);void 0!==d&&(c=d.value),this.AddRelayEffect(i,e,r*a,new It(c,1,1,1,1,1),!0,Xt.redBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(ri.blueBaton)){var m=1.1,_=this.globalService.globalVar.modifiers.find(ce=>"blueBatonEquipmentModifier"===ce.text);void 0!==_&&(m=_.value),this.AddRelayEffect(i,e,r*a,new It(1,1,1,1,m,1),!0,Xt.blueBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(ri.violetBaton)){var T=1.1,A=this.globalService.globalVar.modifiers.find(ce=>"violetBatonEquipmentModifier"===ce.text);void 0!==A&&(T=A.value),this.AddRelayEffect(i,e,r*a,new It(1,1,1,T,1,1),!0,Xt.violetBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(ri.greenBaton)){var q=1.1,Q=this.globalService.globalVar.modifiers.find(ce=>"greenBatonEquipmentModifier"===ce.text);void 0!==Q&&(q=Q.value),this.AddRelayEffect(i,e,r*a,new It(1,1,1,1,1,q),!0,Xt.greenBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(ri.orangeBaton)){var te=1.1,oe=this.globalService.globalVar.modifiers.find(ce=>"orangeBatonEquipmentModifier"===ce.text);void 0!==oe&&(te=oe.value),this.AddRelayEffect(i,e,r*a,new It(1,te,1,1,1,1),!0,Xt.orangeBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(ri.yellowBaton)){var de=1.1,be=this.globalService.globalVar.modifiers.find(ce=>"yellowBatonEquipmentModifier"===ce.text);void 0!==be&&(de=be.value),this.AddRelayEffect(i,e,r*a,new It(1,1,de,1,1,1),!0,Xt.yellowBaton,!1)}}prepareRacingLeg(e,i){e.pathData.forEach(r=>{r.currentStumbleOpportunity=0,r.checkedForBurst=!1,r.checkedForNineTails=!1,r.driftAmount=0,r.didAnimalStumble=!1,r.checkedForDrift=!1}),this.checkForBlinders(e,i)}checkForBlinders(e,i){if(i.getEquippedItemName()===this.globalService.getEquipmentName(ri.blinders)){var r=.5;e.terrain.maxSpeedModifier<1&&(e.terrain.maxSpeedModifier=1-(1-e.terrain.maxSpeedModifier)*r),e.terrain.accelerationModifier<1&&(e.terrain.accelerationModifier=1-(1-e.terrain.accelerationModifier)*r),e.terrain.staminaModifier<1&&(e.terrain.staminaModifier=1-(1-e.terrain.staminaModifier)*r),e.terrain.powerModifier<1&&(e.terrain.powerModifier=1-(1-e.terrain.powerModifier)*r),e.terrain.focusModifier<1&&(e.terrain.focusModifier=1-(1-e.terrain.focusModifier)*r),e.terrain.adaptabilityModifier<1&&(e.terrain.adaptabilityModifier=1-(1-e.terrain.adaptabilityModifier)*r)}}getPrelayEffects(e,i,r,a,c,d,m,_,T){null!==i&&void 0!==_&&(void 0===this.selectedRace.pinnacleConditions||!this.selectedRace.pinnacleConditions.containsCondition($t[$t.noRelayEffects]))&&i.talentTree.talentTreeType===li.support&&i.talentTree.column1Row4Points>0&&this.endOfLegRelayEffectCheck(i,e,c,d,m,_,T,a,void 0,void 0,void 0,.03*i.talentTree.column1Row4Points)}AddRelayEffect(e,i,r,a,c,d,m,_,T=!1){if(void 0===this.selectedRace.pinnacleConditions||!this.selectedRace.pinnacleConditions.containsCondition($t[$t.noRelayEffects])){var A=new m0;if(A.remainingRelayMeters=r,A.relayAffectedStatRatios=a,A.isMultiplicative=c,A.effectType=d,A.additionalValue=_,A.affectsAllRacers=m,i.talentTree.talentTreeType===li.support&&i.talentTree.column1Row2Points>0){var q=1+.02*i.talentTree.column1Row2Points;A.isMultiplicative?(A.relayAffectedStatRatios.topSpeed>1&&(A.relayAffectedStatRatios.topSpeed=1+(A.relayAffectedStatRatios.topSpeed-1)*q),A.relayAffectedStatRatios.acceleration>1&&(A.relayAffectedStatRatios.acceleration=1+(A.relayAffectedStatRatios.acceleration-1)*q),A.relayAffectedStatRatios.endurance>1&&(A.relayAffectedStatRatios.endurance=1+(A.relayAffectedStatRatios.endurance-1)*q),A.relayAffectedStatRatios.power>1&&(A.relayAffectedStatRatios.power=1+(A.relayAffectedStatRatios.power-1)*q),A.relayAffectedStatRatios.focus>1&&(A.relayAffectedStatRatios.focus=1+(A.relayAffectedStatRatios.focus-1)*q),A.relayAffectedStatRatios.adaptability>1&&(A.relayAffectedStatRatios.adaptability=1+(A.relayAffectedStatRatios.adaptability-1)*q),void 0!==A.additionalValue&&A.additionalValue>1&&(A.additionalValue*=q)):(A.relayAffectedStatRatios.topSpeed>0&&(A.relayAffectedStatRatios.topSpeed=1+(A.relayAffectedStatRatios.topSpeed-1)*q),A.relayAffectedStatRatios.acceleration>0&&(A.relayAffectedStatRatios.acceleration=1+(A.relayAffectedStatRatios.acceleration-1)*q),A.relayAffectedStatRatios.endurance>0&&(A.relayAffectedStatRatios.endurance=1+(A.relayAffectedStatRatios.endurance-1)*q),A.relayAffectedStatRatios.power>0&&(A.relayAffectedStatRatios.power=1+(A.relayAffectedStatRatios.power-1)*q),A.relayAffectedStatRatios.focus>0&&(A.relayAffectedStatRatios.focus=1+(A.relayAffectedStatRatios.focus-1)*q),A.relayAffectedStatRatios.adaptability>0&&(A.relayAffectedStatRatios.adaptability=1+(A.relayAffectedStatRatios.adaptability-1)*q),void 0!==A.additionalValue&&A.additionalValue>0&&(A.additionalValue*=q))}if(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix)if(this.globalService.globalVar.eventRaceData.queuedRelayEffects.some(oe=>oe.effectType===d))if(this.lookupService.relayEffectTypeStacksEffectiveness(d))null!=(Q=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(oe=>oe.effectType===d))&&(Q.relayAffectedStatRatios.addCurrentRacingStats(a),void 0!==Q.additionalValue&&void 0!==A.additionalValue&&(Q.additionalValue+=A.additionalValue));else{var Q;null!=(Q=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(de=>de.effectType===d))&&(Q.remainingRelayMeters+=r)}else this.globalService.globalVar.eventRaceData.queuedRelayEffects.push(A);else if(m){var te=this.selectedRace.raceLegs.findIndex(oe=>oe.courseType===e.raceCourseType);this.selectedRace.raceLegs.length>te&&this.selectedRace.raceLegs.slice(te+1).forEach(oe=>{var de=this.racingAnimals.find(be=>be.raceCourseType===oe.courseType);null!=de&&null!=de.raceVariables&&null!=de.raceVariables.relayEffects&&de.raceVariables.relayEffects.push(A)})}else null!=e&&null!=e.raceVariables&&null!=e.raceVariables.relayEffects&&e.raceVariables.relayEffects.push(A)}}didAnimalStumble(e,i,r,a,c,d,m,_,T,A){if(e.raceVariables.stumbled)return!1;if(0===i.frequencyOfStumble){if(void 0===this.selectedRace.pinnacleConditions||!this.selectedRace.pinnacleConditions.containsCondition(gi[gi.brokenFloorboards]))return!1;i.frequencyOfStumble=this.globalService.getAverageStumbleFrequencyForCourseType(e.raceCourseType),i.stumbleOpportunities=this.globalService.getAverageStumbleOpportunitiesForCourseType(e.raceCourseType),i.stumbleSeverity=Ya.Medium}if(e.type===Fe.Gecko&&"Sticky"===e.ability.name&&e.ability.abilityInUse||e.type===Fe.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||e.type===Fe.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(i.currentStumbleOpportunity*(i.length/i.stumbleOpportunities)<r){i.currentStumbleOpportunity+=1;var te=250;if(this.utilityService.getRandomNumber(1,100)<=i.frequencyOfStumble/(te+=d*a.adaptabilityModifier)*i.length){if(e.getEquippedItemName()===this.globalService.getEquipmentName(ri.headband)){var be=3,ce=this.globalService.globalVar.modifiers.find(ne=>"headbandEquipmentModifier"===ne.text);if(void 0!==ce&&(be=ce.value),e.raceVariables.headbandStumblePreventionCount<be)return e.raceVariables.headbandStumblePreventionCount+=1,A.addRaceUpdate(_,T+"'s headband prevents them from stumbling."),!1}return i.didAnimalStumble=!0,!0}}return!1}didAnimalLoseFocus(e,i,r,a,c,d,m,_,T){if(e.raceVariables.lostFocus||e.type===Fe.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(this.currentLostFocusOpportunity*(r/i)<a){this.currentLostFocusOpportunity+=1;var Q=this.globalService.globalVar.modifiers.find(ce=>"focusModifier"===ce.text),te=T*c.focusModifier*(void 0===Q?.75:Q.value);if(e.raceVariables.metersSinceLostFocus<te)return!1;var de=(e.raceVariables.metersSinceLostFocus-te)/e.currentStats.focusMs*100;if(this.utilityService.getRandomNumber(1,100)<=de)return _.didAnimalLoseFocus=!0,!0}return!1}increasePersistentAbilityXp(e){(e.type===Fe.Cheetah&&"Giving Chase"===e.ability.name||e.type===Fe.Hare&&"Prey Instinct"===e.ability.name||e.type===Fe.Hare&&"Nap"===e.ability.name||e.type===Fe.Goat&&"In The Rhythm"===e.ability.name||e.type===Fe.Shark&&"Feeding Frenzy"===e.ability.name||e.type===Fe.Shark&&"Blood In The Water"===e.ability.name||e.type===Fe.Octopus&&"Buried Treasure"===e.ability.name||e.type===Fe.Penguin&&"Wild Toboggan"===e.ability.name||e.type===Fe.Fox&&"Fleeting Speed"===e.ability.name)&&this.globalService.increaseAbilityXp(e,3,this.selectedRace.raceType===xt.trainingTrack)}giveOrbXpBasedOnMeters(e,i,r,a){null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===Ot.ruby&&this.selectedRace.raceType!==xt.trainingTrack&&r>=a&&this.globalService.increaseRubyOrbXp(e,i),null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===Ot.amber&&this.selectedRace.raceType!==xt.trainingTrack&&r<a&&this.globalService.increaseAmberOrbXp(e,i),null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===Ot.topaz&&this.selectedRace.raceType!==xt.trainingTrack&&!i.raceVariables.ranOutOfStamina&&this.globalService.increaseTopazOrbXp(e,i),null!=i.equippedOrb&&this.globalService.getOrbTypeFromResource(i.equippedOrb)===Ot.sapphire&&this.selectedRace.raceType!==xt.trainingTrack&&!i.raceVariables.hasLostFocusDuringRace&&this.globalService.increaseSapphireOrbXp(e,i)}abilityRedundancyCheck(e,i,r,a,c,d){return!(e.ability.oneTimeEffect&&e.ability.abilityUsed||"Second Wind"===e.ability.name&&e.type===Fe.Horse&&e.raceVariables.recoveringStamina||"Pacemaker"===e.ability.name&&e.type===Fe.Horse&&i===e.currentStats.maxSpeedMs)&&(!("Leap"===e.ability.name&&e.type===Fe.Monkey&&this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,a.terrain.powerModifier,d)<c)&&!("Sticky"===e.ability.name&&e.type===Fe.Gecko&&0===r.frequencyOfStumble))}useAbility(e,i,r,a,c,d,m,_,T,A,q){if(e.ability.abilityUsed=!0,e.type===Fe.Horse&&("Second Wind"===e.ability.name||"Pacemaker"===e.ability.name)&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)),e.type===Fe.Cheetah&&"Sprint"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)),e.type===Fe.Hare&&"Awareness"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)),e.type===Fe.Warthog&&"Graze"===e.ability.name&&(e.ability.abilityInUse=!0,this.checkForGrazeBuff(_,e,r,a,T,A,q),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)),e.type===Fe.Monkey){if("Landslide"===e.ability.name){var Q=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),te=i.length/this.timeToComplete;this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=Q/(te=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=Q/te,this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)}"Leap"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack))}if(e.type===Fe.Gecko&&"Sticky"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)),e.type===Fe.Dolphin&&"Echolocation"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)),e.type===Fe.Octopus&&"Propulsion"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)),e.type===Fe.Whale&&("Storing Power"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)),"Whalesong"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack))),e.type===Fe.Penguin&&"Careful Toboggan"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)),e.type===Fe.Caribou&&"Great Migration"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)),e.type===Fe.Salamander){if("Cold Blooded"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a);var oe=d/r.distance;oe>.5&&(oe=.5-(oe-.5)),m.coldBloodedIncreaseMultiplier=oe}"Burrow"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack)),"Heat Up"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack))}if(e.type===Fe.Fox&&"Trickster"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack);var de=this.utilityService.getRandomInteger(1,6);1===de&&(e.ability.tricksterStatLoss="Acceleration"),2===de&&(e.ability.tricksterStatLoss="Max Speed"),3===de&&(e.ability.tricksterStatLoss="Adaptability"),4===de&&(e.ability.tricksterStatLoss="Focus"),5===de&&(e.ability.tricksterStatLoss="Stamina",e.currentStats.stamina-=.25*c,e.currentStats.stamina<0&&(e.currentStats.stamina=0)),6===de&&(e.ability.tricksterStatLoss="Power");var be=this.utilityService.getRandomInteger(1,6);be===de&&(be+=1)>6&&(be=1),1===be&&(e.ability.tricksterStatGain="Acceleration"),2===be&&(e.ability.tricksterStatGain="Max Speed"),3===be&&(e.ability.tricksterStatGain="Adaptability"),4===be&&(e.ability.tricksterStatGain="Focus"),5===be&&(e.ability.tricksterStatGain="Stamina",e.currentStats.stamina+=.5*c,e.currentStats.stamina>c&&(e.currentStats.stamina=c)),6===be&&(e.ability.tricksterStatGain="Power"),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)}}checkForNineTailsBuff(e,i,r,a,c,d,m,_){if(!e.checkedForNineTails){e.checkedForNineTails=!0;var T=this.utilityService.getRandomInteger(1,4),A=new ze;A.value=m,1===T?(i.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(r,this.selectedRace.pinnacleConditions,a.terrain.powerModifier,c)]),A.text=r.getAbilityUseUpdateText(_," (Acceleration)"),d.raceUpdates.push(A)):2===T?(i.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(r,this.selectedRace.pinnacleConditions,a.terrain.powerModifier,c)]),A.text=r.getAbilityUseUpdateText(_," (Max Speed)"),d.raceUpdates.push(A)):3===T?(i.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(r,this.selectedRace.pinnacleConditions,a.terrain.powerModifier,c)]),A.text=r.getAbilityUseUpdateText(_," (Adaptability)"),d.raceUpdates.push(A)):4===T&&(i.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(r,this.selectedRace.pinnacleConditions,a.terrain.powerModifier,c)]),A.text=r.getAbilityUseUpdateText(_," (Focus)"),d.raceUpdates.push(A)),this.globalService.increaseAbilityXp(r,void 0,this.selectedRace.raceType===xt.trainingTrack)}}checkForGrazeBuff(e,i,r,a,c,d,m){var _=this.utilityService.getRandomInteger(1,5),T=new ze;T.value=d,1===_?(e.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(i,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)]),T.text=i.getAbilityUseUpdateText(m," (Acceleration)"),c.raceUpdates.push(T)):2===_?(e.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(i,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)]),T.text=i.getAbilityUseUpdateText(m," (Max Speed)"),c.raceUpdates.push(T)):3===_?(e.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(i,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)]),T.text=i.getAbilityUseUpdateText(m," (Adaptability)"),c.raceUpdates.push(T)):4===_?(e.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(i,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)]),T.text=i.getAbilityUseUpdateText(m," (Focus)"),c.raceUpdates.push(T)):4===_&&(e.push(["Power",this.lookupService.GetAbilityEffectiveAmount(i,this.selectedRace.pinnacleConditions,r.terrain.powerModifier,a)]),T.text=i.getAbilityUseUpdateText(m," (Power)"),c.raceUpdates.push(T)),this.globalService.increaseAbilityXp(i,void 0,this.selectedRace.raceType===xt.trainingTrack)}getNineTailsBuffCount(e,i){return i.filter(r=>r[0]===e).length}getGrazeBuffCount(e,i){return i.filter(r=>r[0]===e).length}getModifiedAdaptability(e,i,r,a,c,d,m,_,T,A,q,Q,te){var oe=e.currentStats.adaptabilityMs*r;return e.type===Fe.Dolphin&&"Echolocation"===e.ability.name&&e.ability.abilityInUse&&(oe*=1.75),e.type===Fe.Goat&&"Sure-footed"===e.ability.name&&(oe+=i.permanentAdaptabilityIncreaseMultiplier),e.type===Fe.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(oe*=1.4),e.type===Fe.Penguin&&"Careful Toboggan"===e.ability.name&&e.ability.abilityInUse&&(oe*=1.6),e.type===Fe.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(oe*=.75),e.type===Fe.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(oe*=1.5),e.type===Fe.Fox&&"Nine Tails"===e.ability.name&&(oe*=1+.15*this.getNineTailsBuffCount("Adaptability",a)),e.type===Fe.Warthog&&"Graze"===e.ability.name&&(oe*=1+.1*this.getGrazeBuffCount("Adaptability",c)),null!==_&&void 0!==T&&"Navigator"===_.ability.name&&_.type===Fe.Dolphin&&d.distance-m<=this.lookupService.GetAbilityEffectiveAmount(_,this.selectedRace.pinnacleConditions,T.terrain.powerModifier,r)&&(oe+=.25*_.currentStats.adaptabilityMs,_.ability.abilityInUse||A.addRaceUpdate(q,Q+" is shown the way by "+te+"'s "+(null==_?void 0:_.ability.name)+" ability."),_.ability.abilityInUse=!0),e.getEquippedItemName()===this.globalService.getEquipmentName(ri.athleticTape)&&e.raceVariables.isBursting&&(oe*=1.5),e.talentTree.talentTreeType===li.sprint&&!e.raceVariables.hasLostFocusDuringRace&&(oe*=1+5*e.talentTree.column1Row2Points/100),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition($t[$t.slick])&&(e.raceCourseType===Ve.Flatland||e.raceCourseType===Ve.Mountain||e.raceCourseType===Ve.Volcanic)&&(oe*=.5),oe}getModifiedFocus(e,i,r,a,c){var d=e.currentStats.focusMs*i;return e.type===Fe.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(d*=1.4),e.type===Fe.Hare&&"Nap"===e.ability.name&&(d*=2),e.type===Fe.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(d*=.75),e.type===Fe.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(d*=1.5),e.type===Fe.Fox&&"Nine Tails"===e.ability.name&&(d*=1+.15*this.getNineTailsBuffCount("Focus",r)),e.type===Fe.Warthog&&"Graze"===e.ability.name&&(d*=1+.1*this.getGrazeBuffCount("Focus",a)),e.type===Fe.Salamander&&"Cold Blooded"===e.ability.name&&e.ability.abilityInUse&&(d*=1+c.coldBloodedIncreaseMultiplier),e.type===Fe.Whale&&"Whalesong"===e.ability.name&&(4===e.ability.totalUseCount||e.ability.totalUseCount>5)&&e.ability.abilityInUse&&(d*=1.3),e.getEquippedItemName()===this.globalService.getEquipmentName(ri.athleticTape)&&e.raceVariables.isBursting&&(d*=1.5),e.talentTree.talentTreeType===li.sprint&&(d*=1-.005*e.talentTree.column2Row4Points*e.raceVariables.velocityReachesMaxSpeedCount),d}handleTundraDrift(e,i,r,a,c,d,m,_,T,A,q,Q,te){var oe=!1;if(!i.checkedForDrift){i.checkedForDrift=!0;var de=80,be=-80;if((i.routeDesign===Lt.Cavern||r.routeDesign===Lt.Cavern)&&(de=60,be=-60),e.raceVariables.icyCurrentYAmount>=de||e.raceVariables.icyCurrentYAmount<=be||a)return(e.raceVariables.icyCurrentYAmount>=de||e.raceVariables.icyCurrentYAmount<=be)&&(oe=!0),i.driftAmount=-e.raceVariables.icyCurrentYAmount,e.raceVariables.icyCurrentYAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,oe;var ce=this.utilityService.getRandomNumber(1,100),ne=1e3,Ue=i.frequencyOfDrift/(ne+=c*d.adaptabilityModifier)*i.length;if(ce<Ue){i.didAnimalStumble=!0,(Ue-=ce)<=0&&(Ue=0);var bt=this.utilityService.getRandomInteger(1,2);e.raceVariables.icyCurrentDirectionUp=1===bt;var nt=100,pt=20,lt=this.globalService.globalVar.modifiers.find(At=>"maxDriftAmountModifier"===At.text);void 0!==lt&&(pt=lt.value),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition($t[$t.hot])&&(pt=10),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition($t[$t.cold])&&(pt=30),"Wild Toboggan"===e.ability.name&&e.type===Fe.Penguin&&(pt*=2,nt*=2,e.ability.abilityInUse=!0),"Quick Toboggan"===e.ability.name&&e.type===Fe.Penguin&&(e.ability.abilityInUse=!1);var kt=0;(kt=Ue>nt?pt:Ue/nt*pt)>pt&&(kt=pt),e.raceVariables.icyCurrentDirectionUp?e.raceVariables.icyCurrentYAmount-=kt:e.raceVariables.icyCurrentYAmount+=kt,e.raceVariables.icyCurrentYAmount>=de&&(e.raceVariables.icyCurrentYAmount=de),e.raceVariables.icyCurrentYAmount<=be&&(e.raceVariables.icyCurrentYAmount=be),q.addRaceUpdate(te,Q+" drifts to the side, losing "+kt.toFixed(2)+"% max speed."),i.driftAmount=e.raceVariables.icyCurrentDirectionUp?-kt:kt,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount}else i.driftAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,"Quick Toboggan"===e.ability.name&&e.type===Fe.Penguin&&(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCap||(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount+=1),q.addRaceUpdate(te,Q+" slides through without drifting, gaining speed."),this.globalService.increaseAbilityXp(e,void 0,this.selectedRace.raceType===xt.trainingTrack),A.permanentMaxSpeedIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,this.selectedRace.pinnacleConditions,d.powerModifier,T),e.ability.abilityInUse=!0));return oe}}handleLavaFall(e,i,r,a,c,d,m,_){for(var T=!1,A=i/this.frameModifier,q=c/r,Q=[.4,.45,.5,.55,.6],te=[],oe=0;oe<Q.length;oe++){var de=1;void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition($t[$t.hot])&&(de=.75),void 0!==this.selectedRace.pinnacleConditions&&this.selectedRace.pinnacleConditions.containsCondition($t[$t.cold])&&(de=1.25);var be=q*(Q[oe]*de),ce=A/be;ce>1&&(ce=1),te.push(Math.round(1e5*ce)/1e5);var ne=a>Q[oe]*c,Ae=ne!=_[oe];_[oe]=ne,A>=be&&Ae&&(e.type===Fe.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||(d.addRaceUpdate(m,"Lava spills out onto the course, forcing you to evacuate."),T=!0))}return this.selectedRace.raceUI.lavaFallPercentByFrame.push(te),T}handleBrazierLighting(e,i){this.selectedRace.drawnObjects.forEach(r=>{if((void 0===r.changeOnFrame||0===r.changeOnFrame)&&i>r.xDistance){r.changeOnFrame=e;var c,a=this.globalService.getOrbTypeFromBrazier(r.objectType);void 0!==a&&(c=this.globalService.getOrbDetailsFromType(a)),void 0!==a&&void 0!==c&&(this.selectedRace.rewards.push(this.initializeService.initializeResource(this.globalService.getOrbNameFromType(a)+" Level Up",1,Le.Other)),c.maxLevel+=1)}})}setupBraziers(){if(void 0!==this.selectedRace.drawnObjects&&this.selectedRace.drawnObjects.length>0){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.pinnacleFloor);this.selectedRace.drawnObjects.forEach(i=>{if(i.objectType===zi.amberBrazier||i.objectType===zi.rubyBrazier||i.objectType===zi.topazBrazier||i.objectType===zi.sapphireBrazier||i.objectType===zi.amethystBrazier||i.objectType===zi.emeraldBrazier){var a,r=this.globalService.getOrbTypeFromBrazier(i.objectType);void 0!==r&&(a=this.globalService.getOrbDetailsFromType(r)),void 0!==r&&void 0!==a&&a.maxLevel>e&&(i.changeOnFrame=1)}})}}handleRacePositionByFrame(e,i,r,a){var c=this.lookupService.getTotalRacersByRace(e),d=c,m=.25,_=this.globalService.globalVar.modifiers.find(ne=>"trainingTrackPaceModifier"===ne.text);if(void 0!==_&&(m=_.value),e.trackRaceType===Hn.legacy&&(m=1),e.localRaceType===Li.Track)for(var T=0;T<c-1;T++)a>e.length/(this.timeToComplete/(1+m*T))*(r/this.frameModifier)&&(d=c-(T+1));else{var Q=i*(r/this.frameModifier),te=0;if(this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(Q+=te=i*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),2===c)a>Q&&(d=1);else if(3===c){a>Q&&(d=2);var de=.75,be=this.globalService.globalVar.modifiers.find(ne=>"moneyMarkPaceModifier"===ne.text);null!=be&&(de=be.value),a>e.length/(this.timeToComplete*de)*(r/this.frameModifier)+te&&(d=1)}}e.raceUI.racePositionByFrame.push(d)}carryOverEventRaceSegmentData(e,i,r,a,c,d,m,_,T,A,q,Q,te,oe,de,be){var ce=new p0;return ce.velocity=i,ce.stamina=e.currentStats.stamina,ce.permanentMaxSpeedIncreaseMultiplier=r,ce.permanentAdaptabilityIncreaseMultiplier=a,ce.permanentMaxSpeedIncreaseObjMultiplier=c,ce.feedingFrenzyIncreaseMultiplier=d,ce.greatMigrationAccelerationIncreaseAdditive=m,ce.coldBloodedIncreaseMultiplier=_,ce.fleetingSpeedIncreaseMultiplier=T,ce.racingAnimalType=e.type,ce.deepBreathingStaminaGain=Q,ce.longDistanceTalentIncreaseAccelerationWithLowVelocity=te,ce.maxSpeedFloor=oe,ce.whalePowerStored=de,ce.pathsClearedWithoutLosingFocus=be,A.length>0&&A.forEach(ne=>{ce.nineTailsBuffs.push(ne)}),q.length>0&&q.forEach(ne=>{ce.grazeBuffs.push(ne)}),e.raceVariables.relayEffects.length>0&&e.raceVariables.relayEffects.forEach(ne=>{ce.relayEffects.push(ne)}),this.globalService.globalVar.eventRaceData.animalData.forEach(ne=>{ne.associatedAnimalType===e.type&&(ce.statLossFromExhaustion=ne.exhaustionStatReduction)}),ce.raceVariables=e.raceVariables.makeCopy(),ce}setStaminaLossForEventAnimal(e,i){this.globalService.globalVar.eventRaceData.animalData.forEach(r=>{r.associatedAnimalType===i&&(r.exhaustionStatReduction=e,e<this.globalService.globalVar.relayEnergyFloor/100&&(this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay=!0))})}}return t.\u0275fac=function(e){return new(e||t)(Ft(ki),Ft(yn),Ft(Lr),Ft(Fm))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let jm=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.utilityService=r,this.gameVersions=[1.25,1.24,1.23,1.22,1.21,1.2,1.19,1.18,1.17,1.16,1.15,1.14,1.13,1.12,1.11,1.1,1.09,1.08,1.07,1.06,1.05,1.04,1.03,1.02,1.01,1]}getListAscended(){var e=[];return this.gameVersions.forEach(i=>{e.unshift(i)}),e}getLatestChanges(){return this.getVersionChanges(this.gameVersions[0])}getAllChanges(){var e=[];return this.gameVersions.forEach(i=>{e.push(this.getVersionChanges(i))}),e}getVersionChanges(e){var i="";return 1===e&&(i="Initial Launch!"),1.01===e&&(i="Improved UI by adding better notifications and refactoring some clickable text.\n\nBreeding Grounds specialization now grants a 10% bonus to Breeding XP from Training, up from 5%.\n\nRefactored Breed Progression:\n<ul><li>Breed Levels now grant a 5% bonus to racing stats as opposed to 2%. Breed Levels now require twice as much XP.</li><li>Animals have had their breed levels reduced by half to balance this change. Despite this, you should notice a small increase in stats.</li></ul>"),1.02===e&&(i="Event Races now active!\n<ul><li>Select an event deck (now relay team) and run the marathon-style Grand Prix.</li><li>Run a single race over the course of multiple days to unlock new rewards.</li><li>Mix and match powerful Relay abilities with strong long distance racers and see how far you can go!</li></ul>\nMore UI improvements. (better contrast in colors, differentiation of text through various means, etc)\n\nBug fixes."),1.03===e&&(i="Talents are now active!\n<ul><li>Complete Rainbow Races to start earning Talent Points for your animals.</li><li>Each animal can select a unique talent tree and start racing in its own unique way.</li></ul>\nMore UI improvements. (specifically around items/equipment)\n\nBug fixes."),1.04===e&&(i="Ability rebalancing (view Discord Change Log for full info).\n\nChanges to Event Races<ul><li>Leg length adjusts based on your game progress so that the race always feels smooth.</li><li>Certain abilities have different effects during events, viewable when changing abilities.</li><li>Abilities that can trigger multiple times or have a cap are now displayed on the Event Race Info page.</li></ul>\nBug fixes (view Discord Change Log for full info)."),1.05===e&&(i="Changed all references of 'Decks' to 'Relay Teams' for ease of understanding and better theming.\n\nBug fixes and UI improvements (view Discord Change Log for full info)."),1.06===e&&(i="Barns can now reset their specialization. By clicking or tapping your Barn Upgrade level, you'll see an overview of your barn's benefits and the option to reset your specialization at the cost of losing 20% of your Barn Upgrade level.\n\nCost for Mangoes now scale. 1 Mango from the shop costs an extra 50 per purchase and 2 Mangoes from the event shop costs an extra 1 token per purchase.\n\nThe impact that Renown has on coin gain from race is now logarithmic. After reaching 50 renown, the coin gain will start to slightly fall off. \n\nAttractions now give slightly more Coins per specialization level.\n\nAdded setting to automatically start the event race when the time period begins. This will also catch up on any time you were away between the start of the race and when you first return to the game.\n\nGrand Prix now requires breed level 25 instead of 50.\n\nIncubator now takes 2 minutes instead of 5 minutes.\n\nUI Improvements and Bug Fixes (view Discord Change Log for full info)."),1.07===e&&(i="Sectioned out FAQs, added calculators to make planning easier.\n\nVarious minor bug fixes and UI improvements."),1.08===e&&(i="Increased coin gain from Mono and Duo races. \n\nAdjusted free races so that new course types do not show up until you've completed a circuit rank with that type. \n\nAdded circuit rank up reward for 1000 coins at rank 9 and 1500 coins at rank 23.<ul><li>Those who have already passed these ranks will immediately receive these coins.</li></ul>\nMade Acceleration coaching slightly easier. \n\nAdded warning before first Breed to better explain what will happen.\n\nMinor UI improvements for mobile."),1.09===e&&(i="<em>Just to preface, this is the first set of changes of several intended to make the early game flow better, coin gain and progression feel less punishing, and doing a better job of putting players in the intended gameplay loops. Look forward to more changes soon.</em>\n\nMade changes to verbiage in Tutorial and FAQ section for clarity and better guiding on how to play. \n\nReadjusted certain trainings so that there was clear progression going up from small to medium barns.<ul><li><b>Footwork</b> now gives .25 Acceleration as opposed to .5 Acceleration.</li><li><b>Dodge Ball</b> now gives 1 Adaptability as opposed to .5 Adaptability and takes 60 seconds to complete as opposed to 75 seconds.</li></ul>Some adjustments were made to passive game time while the game is not active.<ul><li>Small barns now allow for 4 hours worth of training, up from 2 hours.</li><li>Medium barns now allow for 8 hours worth of training, up from 4 hours.</li><li>Large barns now allow for 12 hours worth of training, up from 8 hours.</li><li>Team Managers will now cover 8 hours of inactive time worth of free races, up from 2 hours.</li></ul>The base price for food has been reduced.<ul><li>All stat increasing food has been reduced to 10 Coins. The goal for these items is to give you a quick boost after breeding to cut down on wait time. This new price should make that a more viable option.</li><li>The base price for Mangoes has been reduced to 100 Coins. For those who have already purchased Mangoes and the price has begun to increase, your total cost will be reduced by 400 Coins to match up with this change.</li></ul>Attractions now provide significantly more income. The new formula is 20 Coins * Specialization Level added on top of the previous amount. Check the calculator in the FAQ section to see exactly how much it provides at any given level.\n\nFor the first 10 barn upgrade levels, the cost is now 50 coins instead of 100.\n\nCertain RNG elements were not evenly distributed (Coaching for example) and that issue has been resolved. \n\nThere have been bugs, balance issues, and some concerns about reward scaling with the Grand Prix. I have taken the Grand Prix down for now while I work on these issues. Look forward to it coming back up in a better state in the next couple of weeks.\n\nAdditional minor bug fixes."),1.1===e&&(i="Two new animals have been added to the game!<ul><li>The <span class='flatlandColor'>Warthog</span> is a new Flatland racer that you can purchase from the Shop.</li><li>The <span class='waterColor'>Whale</span> is a new Ocean racer that is rewarded for reaching Circuit Rank B (25).</li></ul>The <span class='flatlandColor'>Hare</span> is now rewarded for reaching Circuit Rank Q (10). It is no longer listed in the Shop and anyone who has already purchased it will receive 1000 Coins immediately.\n\nBuried Treasure (<span class='waterColor'>Octopus</span>) and Cold Blooded (<span class='volcanicColor'>Salamander</span>) have both been reworked.\n\nMany Circuit Rank rewards were moved around to make the early game flow better. Of note, the Dolphin is now a reward at Circuit Rank L (15) so that you have more time with only two race course types.\n\nCertain items in the shop have been locked behind reaching Circuit Rank AZ (27) before they appear to better guide new players to aim for items better suited for early game.\n\nBy default, free races now give 1 medal per 50 free race victories.\n\nEarly game circuit races and free races in general are now easier.\n\nAfter the Attraction change last patch, upgrading barns became a bit too easy at higher levels. Coin cost per upgrade level for barns has been adjusted higher starting at level 100 to keep the time between upgrades balanced.\n\nAdded option to 'Export to File'/'Import from File' to make saving and loading easier.\n\nRemoved 'Stats' navigation page. It was really bare bones and just added more to the length of the navigation bar. I will eventually re-implement this in a better fashion.\n\nVarious bug fixes and UI improvements."),1.11===e&&(i="The Grand Prix has returned!<ul><li>New items have been added as rewards up to the 1 million meter mark for the first rank of the Grand Prix.</li><li>There were some minor adjustments to Token cost of items from the Token shop.</li><li>You can now set the desired energy level of your animals before they relay.</li><li>Bug fixes related to Grand Prix.</li></ul>A new item has been added to the shop (Gingko Leaves) that allow you to reset your Breed level and incubator upgrades back to their default levels. In return, you gain 1000% Breed XP until you get back to the Breed Level you were originally at. This will allow those who felt like they want to redo their incubator upgrades to be able to do so quickly.\n\nPutting an animal in the incubator now pauses their current training instead of cancelling it.\n\nVarious bug fixes and UI improvements."),1.12===e&&(i="Added option to not relay to animals below entered energy amount during Grand Prix.\n\nBug fixes related to Grand Prix."),1.13===e&&(i="Changed energy floor from 10% to 30%.\n\nRefunded a team manager and tokens to those who started on earlier versions and did not correctly receive or had bugs related to them.\n\nMore bug fixes."),1.14===e&&(i="Added option to minimize special races/training tracks for better visibility.\n\nAdded trait % value under the animals when looking at the Incubator to easily see an animal's current status.\n\nYou can now preview a talent tree before selecting.\n\nMore bug fixes. (view Discord Change Log for full info)"),1.15===e&&(i="The Pinnacle has been added to the game!<ul><li>After reaching Circuit Rank AAAZ (79), you will have access to a new Special Race called The Pinnacle.</li><li>Each floor of the Pinnacle has its own special rules. Pay attention to the conditions and plan your team out to maximize your success!</li><li>As you race, you will pass ritualistic braziers where you place the orbs you received as you ranked up to increase their max level.</li></ul>Balance adjustments have been made for Circuit and Special races mostly around the time of being Circuit Rank AA (52) and higher.\n\nIncubator upgrade prices have been increased to be more in line with the coin gain increases that were made.\n\nMinor bug fixes."),1.16===e&&(i="Adjustments have been made to the following abilities to be additive instead of multiplicative: On The Hunt (Cheetah), Deep Breathing (Goat), Night Vision (Gecko), Big Brain (Octopus), Quick Toboggan (Penguin), Special Delivery (Caribou)\n\nSecond Wind (Horse) was nerfed slightly so that you cannot prevent stamina reduction from happening at all. \n\nMinor bug fixes."),1.17===e&&(i="Adjustments have been made to the following abilities: Giving Chase (Cheetah), Sure-footed (Goat), In The Rhythm (Goat), Blood In The Water (Shark), Wild Toboggan (Penguin), Herd Mentality (Caribou), and Fleeting Speed (Fox). Same as the previous round of changes, the intention is to make sure abilities can't become game breaking with scaling multiplicative percents.\n\nEndurance and Acceleration coaching are now easier and should take roughly the same amount of time as the others. \n\nNew setting added so that you can condense your barn view. \n\nCode redemption now gives an alert with what your code has given you.\n\nMinor bug fixes."),1.18===e&&(i="You can now reset your talents for a fee when viewing a talent tree. All existing players will be given 1 free talent reset per animal to be used whenever they want.\n\nMinor bug fixes, mostly around grand prix."),1.19===e&&(i="Scrimmages have been added to the game!<ul><li>Scrimmages are a new option under Coaching. As opposed to gaining racing stats, Scrimmages allow you to permanently increase the base stats your animals revert to after Breeding.</li><li>Help your animal race through two paths. The faster they go, the better the rewards.</li></ul>Minor UI improvements."),1.2===e&&(i="Added Barn Improvements to the Shop after reaching rank AZ (27), giving each barn specialization a unique upgrade.\n\nTraining Facilities have been adjusted so that they give 20% Training Time Reduction by level 100 instead of 200.\n\nResearch Centers have been adjusted so that the training animal receives 75% of stat gain at level 10 instead of 50%.\n\nScrimmage total energy has been reduced to 30 instead of 100, but the stat gain amount should roughly remain the same. This should cut down on how long it takes to complete a Scrimmage session.\n\nGrand Prix reward amounts have been altered.<ul><li>Token rewards increase every five Grand Prixes during an event period instead of after every Grand Prix during an event period. This should smooth out token gain a bit more instead of hitting a point where you go from getting barely any tokens to a massive amount all at once.</li><li>Base coin rewards per interval have been increased from 250 to 100. This amount increases after every successful Grand Prix during an event period.</li></ul>Bug fixes."),1.21===e&&(i="A new reset has been added!<ul><li>A new training trace race, the Legacy Track, has been added. Complete for new bonuses as well as the unique item Nectar of the Gods.</li><li>Using Nectar of the Gods resets your Breed Level, Ability Levels, and Incubator Upgrades back to 1 for the animal using it. Your Breed Modifier is increased by an amount based on your Breed Level when using the Nectar.</li><li>A new item, Orb Infuser, has been added to the shop. After purchasing, any time you use Nectar of the Gods, you will also permanently increase the stat gain per orb level of the orb that animal has equipped.</li><li>After using Nectar of the Gods, the Legacy Track is reset so that you can regain the bonuses from that track race. The track gets progressively harder the more times you complete it.</li></ul>UI improvements."),1.22===e&&(i="Bug fixes for Legacy Track."),1.23===e&&(i="Added calculators for Nectar of the Gods reset to FAQ section.\n\nAdded a new distance indicator that shows up during races when the average pace is offscreen. You can toggle this on or off on the Settings page.\n\nRemoved the Alt/Ctrl/Shift multiplier keys from the shop and instead just added a text box to enter a quantity. This allows you to be more precise and gives mobile users the ability to buy in bulk.\n\nAdded ability to move barns around so that you can order them however you please. You can toggle the new barn options bar on or off on the Settings page.\n\nAdded ability to quick swap animals from one barn to another when viewing an animal in its barn.\n\nScrimmages have been adjusted to give slightly more rewards and to no longer be tied to the animal's breed level. Instead, each animal will have 15 scrimmage energy by default and 30 once you reach Circuit Rank AZ.\n\nThe back button on every page has been bound to the key 'b' for ease of navigation. I soon plan to give you the ability to choose your own keybinds."),1.24===e&&(i="Added a new limit to how many Mangoes you can buy from the Shop every month. This limit is increased each time your circuit rank makes it through the alphabet (so AZ, AAZ, etc.). The amount will reset at the beginning of each month. Trying this out as a solution to Mangoes becoming very strong the longer you play, but it is subject to change.\n\nMade changes to idle free race timers so that there is less load time.\n\nAdded 'Refresh Training' button that will restart all animal's trainings or restart their previous one if no training is currently active.\n\nYou can now select a training while an animal is in the Incubator or Grand Prix, but the training will not begin until they are no longer busy with those tasks.\n\nAdded button to cancel incubation.\n\nBug fixes and UI improvements."),1.25===e&&(i="Swapped Monkey and Coaching rewards. Coaching is now a reward for reaching circuit rank X (3) and Monkey is a reward for reaching circuit rank W (4). Circuit and free races have been updated accordingly. \n\nScrimmages are now a reward at circuit rank P (11) instead of being grouped with the Coaching reward."),i}getDateForVersion(e){var i=new Date;return 1===e&&(i=new Date("2022-07-08 12:00:00")),1.01===e&&(i=new Date("2022-07-10 12:00:00")),1.02===e&&(i=new Date("2022-07-18 12:00:00")),1.03===e&&(i=new Date("2022-07-24 12:00:00")),1.04===e&&(i=new Date("2022-07-27 12:00:00")),1.05===e&&(i=new Date("2022-07-29 12:00:00")),1.06===e&&(i=new Date("2022-08-04 12:00:00")),1.07===e&&(i=new Date("2022-08-06 12:00:00")),1.08===e&&(i=new Date("2022-08-07 12:00:00")),1.09===e&&(i=new Date("2022-08-11 12:00:00")),1.1===e&&(i=new Date("2022-08-16 12:00:00")),1.11===e&&(i=new Date("2022-08-21 12:00:00")),1.12===e&&(i=new Date("2022-08-22 12:00:00")),1.13===e&&(i=new Date("2022-08-25 12:00:00")),1.14===e&&(i=new Date("2022-08-28 12:00:00")),1.15===e&&(i=new Date("2022-09-03 12:00:00")),1.16===e&&(i=new Date("2022-09-05 12:00:00")),1.17===e&&(i=new Date("2022-09-07 12:00:00")),1.18===e&&(i=new Date("2022-09-11 12:00:00")),1.19===e&&(i=new Date("2022-09-13 12:00:00")),1.2===e&&(i=new Date("2022-09-15 12:00:00")),1.21===e&&(i=new Date("2022-09-21 12:00:00")),1.22===e&&(i=new Date("2022-09-21 12:00:00")),1.23===e&&(i=new Date("2022-09-26 12:00:00")),1.24===e&&(i=new Date("2022-09-29 12:00:00")),1.25===e&&(i=new Date("2022-09-30 12:00:00")),i.toDateString().replace(/^\S+\s/,"")}updatePlayerVersion(){var _=1.05;this.getListAscended().forEach(te=>{var oe;if(this.globalService.globalVar.currentVersion<te){if(1.01===te){this.globalService.globalVar.notifications=new y0;var de=this.globalService.globalVar.modifiers.find(We=>"breedLevelStatModifier"===We.text);void 0!==de&&(de.value=.05);var be=this.globalService.globalVar.modifiers.find(We=>"breedGaugeMaxIncreaseModifier"===We.text);void 0!==be&&(be.value=10);var ce=this.globalService.globalVar.modifiers.find(We=>"breedingGroundsSpecializationModifier"===We.text);void 0!==ce&&(ce.value=.1),this.globalService.globalVar.animals.forEach(We=>{We.breedLevel=Math.round(We.breedLevel/2),We.breedGaugeXp=2*We.breedGaugeXp}),null!=(ne=this.globalService.globalVar.animalDecks.find(We=>We.isPrimaryDeck))&&(ne.isEventDeck=!0)}else if(1.02===te){if(this.globalService.globalVar.eventRaceData=new ha,this.globalService.globalVar.modifiers.push(new ze(.1,"exhaustionStatLossMinimumModifier")),this.globalService.globalVar.modifiers.push(new ze(5e6,"metersPerCoinsGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new ze(2e7,"metersPerRenownGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new ze(100,"grandPrixCoinRewardModifier")),this.globalService.globalVar.modifiers.push(new ze(5,"grandPrixRenownRewardModifier")),this.globalService.globalVar.modifiers.push(new ze(5e7,"grandPrixToken1MeterModifier")),this.globalService.globalVar.modifiers.push(new ze(1e8,"grandPrixToken2MeterModifier")),this.globalService.globalVar.modifiers.push(new ze(25e7,"grandPrixToken3MeterModifier")),this.globalService.globalVar.modifiers.push(new ze(5e8,"grandPrixToken4MeterModifier")),this.globalService.globalVar.modifiers.push(new ze(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new ze(.02,"exhaustionGainGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new ze(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new ze(75,"grandPrixBreedLevelRequiredModifier")),this.globalService.globalVar.modifiers.push(new ze(2,"scaryMaskEquipmentModifier")),this.globalService.globalVar.modifiers.push(new ze(1.2,"runningShoesEquipmentModifier")),this.globalService.globalVar.modifiers.push(new ze(.9,"incenseEquipmentModifier")),this.globalService.globalVar.modifiers.push(new ze(.5,"athleticTapeEquipmentModifier")),this.globalService.globalVar.modifiers.push(new ze(.2,"weatherMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new ze(.03,"focusMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new ze(.01,"stumbleMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new ze(.05,"segmentCompleteMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new ze(5,"whistleModifier")),this.globalService.globalVar.modifiers.push(new ze(10,"goldenWhistleModifier")),this.globalService.InitializeTokenShop(),null!=(Ae=this.globalService.globalVar.shop.find(We=>"Specialty"===We.name))){var Ue=new Wt;Ue.name="Whistle",Ue.purchasePrice.push(this.globalService.getCoinsResourceValue(2500)),Ue.basePurchasePrice.push(this.globalService.getCoinsResourceValue(2500)),Ue.totalShopQuantity=1,Ue.canHaveMultiples=!1,Ue.isAvailable=this.lookupService.isItemUnlocked("coaching"),Ue.type=Le.Specialty,Ae.itemList.push(Ue);var bt=new Wt;bt.name="Golden Whistle",bt.purchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),bt.basePurchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),bt.totalShopQuantity=1,bt.canHaveMultiples=!1,bt.isAvailable=!1,bt.type=Le.Specialty,Ae.itemList.push(bt)}this.globalService.globalVar.animals.forEach(We=>{We.allTrainingTracks.noviceTrack.rewards.filter($e=>"Bonus Breed XP Gain From Local Races"===$e.name).forEach($e=>{$e.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(We=>{We.allTrainingTracks.intermediateTrack.rewards.filter($e=>"Bonus Breed XP Gain From Local Races"===$e.name).forEach($e=>{$e.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(We=>{We.allTrainingTracks.masterTrack.rewards.filter($e=>"Bonus Breed XP Gain From Local Races"===$e.name).forEach($e=>{$e.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(We=>{We.breedGaugeMax=200+10*(We.breedLevel-1)})}else if(1.03===te)this.globalService.globalVar.animals.forEach(We=>{(isNaN(Number(We.breedLevel))||null==We.breedLevel)&&(We.breedLevel=1)});else if(1.04===te)this.fixTrackRewardsBug(),this.globalService.globalVar.notifications.isEventRaceNowActive=!1,this.globalService.globalVar.animals.forEach(We=>{if(We.type===Fe.Cheetah){var $e=We.availableAbilities.find(ur=>"Giving Chase"===ur.name);void 0!==$e&&($e.efficiency=.5),"Giving Chase"===We.ability.name&&(We.ability.efficiency=.5);var gn=We.availableAbilities.find(ur=>"On The Hunt"===ur.name);void 0!==gn&&(gn.efficiency=.1),"On The Hunt"===We.ability.name&&(We.ability.efficiency=.1)}if(We.type===Fe.Goat){var kn=We.availableAbilities.find(ur=>"Deep Breathing"===ur.name);void 0!==kn&&(kn.efficiency=.25),"Deep Breathing"===We.ability.name&&(We.ability.efficiency=.25);var wr=We.availableAbilities.find(ur=>"In The Rhythm"===ur.name);void 0!==wr&&(wr.efficiency=.1),"In The Rhythm"===We.ability.name&&(We.ability.efficiency=.1);var ks=We.availableAbilities.find(ur=>"Sure-footed"===ur.name);void 0!==ks&&(ks.efficiency=.5),"Sure-footed"===We.ability.name&&(We.ability.efficiency=.5)}if(We.type===Fe.Gecko){var Go=We.availableAbilities.find(ur=>"Night Vision"===ur.name);void 0!==Go&&(Go.efficiency=.2),"Night Vision"===We.ability.name&&(We.ability.efficiency=.2)}if(We.type===Fe.Shark){var xa=We.availableAbilities.find(ur=>"Blood In The Water"===ur.name);void 0!==xa&&(xa.efficiency=.1),"Blood In The Water"===We.ability.name&&(We.ability.efficiency=.1)}if(We.type===Fe.Octopus){var Hr=We.availableAbilities.find(ur=>"Buried Treasure"===ur.name);void 0!==Hr&&(Hr.efficiency=1),"Buried Treasure"===We.ability.name&&(We.ability.efficiency=1);var Zs=We.availableAbilities.find(ur=>"Big Brain"===ur.name);void 0!==Zs&&(Zs.efficiency=2),"Big Brain"===We.ability.name&&(We.ability.efficiency=2)}if(We.type===Fe.Penguin){var ls=We.availableAbilities.find(ur=>"Wild Toboggan"===ur.name);void 0!==ls&&(ls.efficiency=4),"Wild Toboggan"===We.ability.name&&(We.ability.efficiency=4);var tc=We.availableAbilities.find(ur=>"Quick Toboggan"===ur.name);void 0!==tc&&(tc.efficiency=.1),"Quick Toboggan"===We.ability.name&&(We.ability.efficiency=.1)}if(We.type===Fe.Caribou){var Jd=We.availableAbilities.find(ur=>"Herd Mentality"===ur.name);void 0!==Jd&&(Jd.efficiency=.5),"Herd Mentality"===We.ability.name&&(We.ability.efficiency=.5);var wl=We.availableAbilities.find(ur=>"Special Delivery"===ur.name);void 0!==wl&&(wl.efficiency=.05),"Special Delivery"===We.ability.name&&(We.ability.efficiency=.05)}if(We.type===Fe.Fox){var ic=We.availableAbilities.find(ur=>"Fleeting Speed"===ur.name);void 0!==ic&&(ic.efficiency=1.5),"Fleeting Speed"===We.ability.name&&(We.ability.efficiency=1.5)}}),void 0!==(nt=this.globalService.globalVar.modifiers.find(We=>"autoFreeRacesMaxIdleTimePeriodModifier"===We.text))&&(nt.value=7200);else if(1.05===te)null!=this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.isCatchingUp&&(this.globalService.globalVar.eventRaceData.isCatchingUp=!1),void 0!==(pt=this.globalService.globalVar.modifiers.find(We=>"grandPrixBreedLevelRequiredModifier"===We.text))&&(pt.value=50);else if(1.06===te){this.globalService.globalVar.previousEventRewards=[],this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter($e=>"Bonus Breed XP Gain From Training"!==$e.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter($e=>"Bonus Breed XP Gain From Free Races"!==$e.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter($e=>"Diminishing Returns per Facility Level"!==$e.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter($e=>"Training Time Reduction"!==$e.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter($e=>"Bonus Breed XP Gain From Circuit Races"!==$e.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter($e=>"Bonus Talents"!==$e.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter($e=>"Orb Pendant"!==$e.name),this.fixTrackRewardsBug(),this.globalService.globalVar.modifiers.push(new ze(.02,"burstMoraleBoostModifier"));var pt,lt=this.globalService.globalVar.modifiers.find($e=>"grandPrixRenownRewardModifier"===$e.text);void 0!==lt&&(lt.value=3),void 0!==(pt=this.globalService.globalVar.modifiers.find($e=>"grandPrixBreedLevelRequiredModifier"===$e.text))&&(pt.value=25),void 0!==this.globalService.globalVar.incubator&&(this.globalService.globalVar.incubator.timeToComplete=120),this.globalService.globalVar.settings.set("autoStartEventRace",!1)}else if(1.07===te){var kt=0,At=0;if(this.globalService.globalVar.resources.forEach(We=>{"Headband"===We.name&&(kt+=1,At+=We.amount)}),kt>1){var Rt=this.globalService.globalVar.resources.findIndex(We=>"Headband"===We.name);this.globalService.globalVar.resources.splice(Rt,1),void 0!==(Bt=this.globalService.globalVar.resources.find(We=>"Headband"===We.name))&&(Bt.amount=At)}var Bt,jt=0,Ui=0;if(this.globalService.globalVar.resources.forEach(We=>{"Blue Baton"===We.name&&(jt+=1,Ui+=We.amount)}),jt>1)Rt=this.globalService.globalVar.resources.findIndex(gn=>"Blue Baton"===gn.name),this.globalService.globalVar.resources.splice(Rt,1),void 0!==(Bt=this.globalService.globalVar.resources.find(gn=>"Blue Baton"===gn.name))&&(Bt.amount=Ui)}else if(1.08===te){if(this.globalService.globalVar.showBreedWarning=!1,void 0===this.globalService.globalVar.tutorials&&(this.globalService.globalVar.tutorials=new _0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>9){var Ht=1e3;null==(ai=this.globalService.globalVar.resources.find(We=>"Coins"===We.name))?this.globalService.globalVar.resources.push(new Je("Coins",Ht)):ai.amount+=Ht}this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>23&&(Ht=1500,null==(ai=this.globalService.globalVar.resources.find(gn=>"Coins"===gn.name))?this.globalService.globalVar.resources.push(new Je("Coins",Ht)):ai.amount+=Ht)}else if(1.09===te){var nt;void 0!==(nt=this.globalService.globalVar.modifiers.find($e=>"autoFreeRacesMaxIdleTimePeriodModifier"===$e.text))&&(nt.value=28800);var wi=this.globalService.globalVar.modifiers.find($e=>"smallBarnTrainingTimeModifier"===$e.text);void 0!==wi&&(wi.value=14400);var yi=this.globalService.globalVar.modifiers.find($e=>"mediumBarnTrainingTimeModifier"===$e.text);void 0!==yi&&(yi.value=28800);var Ze=this.globalService.globalVar.modifiers.find($e=>"largeBarnTrainingTimeModifier"===$e.text);void 0!==Ze&&(Ze.value=43200);var fe=this.globalService.globalVar.trainingOptions.find($e=>$e.trainingType===Ut.Footwork);void 0!==fe&&(fe.affectedStatRatios=new It(0,.25,0,0,0,1));var oi=this.globalService.globalVar.trainingOptions.find($e=>$e.trainingType===Ut.DodgeBall);void 0!==oi&&(oi.affectedStatRatios=new It(0,2.5,0,0,0,1),oi.timeToComplete=60);var fi=this.globalService.globalVar.shop.find($e=>"Food"===$e.name);if(void 0!==fi){var Ki=fi.itemList.find($e=>"Apples"===$e.name);void 0!==Ki&&(Ki.purchasePrice=[],Ki.purchasePrice.push(new Je("Coins",10)));var ti=fi.itemList.find($e=>"Bananas"===$e.name);void 0!==ti&&(ti.purchasePrice=[],ti.purchasePrice.push(new Je("Coins",10)));var en=fi.itemList.find($e=>"Strawberries"===$e.name);void 0!==en&&(en.purchasePrice=[],en.purchasePrice.push(new Je("Coins",10)));var Nt=fi.itemList.find($e=>"Carrots"===$e.name);void 0!==Nt&&(Nt.purchasePrice=[],Nt.purchasePrice.push(new Je("Coins",10)));var Sn=fi.itemList.find($e=>"Turnips"===$e.name);void 0!==Sn&&(Sn.purchasePrice=[],Sn.purchasePrice.push(new Je("Coins",10)));var pr=fi.itemList.find($e=>"Oranges"===$e.name);void 0!==pr&&(pr.purchasePrice=[],pr.purchasePrice.push(new Je("Coins",10)));var Bn=fi.itemList.find($e=>"Mangoes"===$e.name);if(void 0!==Bn){var Rn=Bn.purchasePrice.find($e=>"Coins"===$e.name);void 0!==Rn&&(Rn.amount-=400)}var un=this.globalService.globalVar.modifiers.find($e=>"attractionAmountModifier"===$e.text);void 0!==un&&(un.value=20),this.globalService.stopGrandPrixRace()}}else if(1.1===te){this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)<26?this.globalService.lockTier2ShopItems():this.globalService.unlockTier2ShopItems(),this.globalService.globalVar.modifiers.push(new ze(.3*1.025,"warthogDefaultMaxSpeedModifier")),this.globalService.globalVar.modifiers.push(new ze(.1,"warthogDefaultAccelerationModifier")),this.globalService.globalVar.modifiers.push(new ze(5*_,"warthogDefaultStaminaModifier")),this.globalService.globalVar.modifiers.push(new ze(1.025,"warthogDefaultPowerModifier")),this.globalService.globalVar.modifiers.push(new ze(4.875,"warthogDefaultFocusModifier")),this.globalService.globalVar.modifiers.push(new ze(4.75,"warthogDefaultAdaptabilityModifier")),this.globalService.globalVar.modifiers.push(new ze(.27,"whaleDefaultMaxSpeedModifier")),this.globalService.globalVar.modifiers.push(new ze(.1,"whaleDefaultAccelerationModifier")),this.globalService.globalVar.modifiers.push(new ze(5*_,"whaleDefaultStaminaModifier")),this.globalService.globalVar.modifiers.push(new ze(1*_,"whaleDefaultPowerModifier")),this.globalService.globalVar.modifiers.push(new ze(5.5,"whaleDefaultFocusModifier")),this.globalService.globalVar.modifiers.push(new ze(4.75,"whaleDefaultAdaptabilityModifier"));var Dn=new tM;Dn.name="Warthog",this.globalService.calculateAnimalRacingStats(Dn);var hn=new iM;hn.name="Whale",this.globalService.calculateAnimalRacingStats(hn),this.globalService.globalVar.animals.push(Dn),this.globalService.globalVar.animals.push(hn),this.globalService.sortAnimalOrder();var Hi,dn=this.globalService.globalVar.shop.find($e=>"Abilities"===$e.name);if(Dn.availableAbilities.forEach($e=>{if(!$e.isAbilityPurchased){var gn=new Wt;gn.name=Dn.getAnimalType()+" Ability: "+$e.name,gn.purchasePrice.push(new Je("Coins",$e.purchasePrice)),gn.canHaveMultiples=!1,gn.type=Le.Ability,gn.additionalIdentifier=$e.name,gn.isAvailable=Dn.isAvailable,null==dn||dn.itemList.push(gn)}}),hn.availableAbilities.forEach($e=>{if(!$e.isAbilityPurchased){var gn=new Wt;gn.name=hn.getAnimalType()+" Ability: "+$e.name,gn.purchasePrice.push(new Je("Coins",$e.purchasePrice)),gn.canHaveMultiples=!1,gn.type=Le.Ability,gn.additionalIdentifier=$e.name,gn.isAvailable=hn.isAvailable,null==dn||dn.itemList.push(gn)}}),null!=(Hi=this.globalService.globalVar.shop.find($e=>"Animals"===$e.name))){var Ar=new Wt;Ar.name="Warthog",Ar.purchasePrice.push(new Je("Coins",1e3)),Ar.canHaveMultiples=!1,Ar.type=Le.Animal,Hi.itemList.push(Ar)}if(this.globalService.globalVar.modifiers.push(new ze(50,"freeRacesToMedalModifier")),null!=(Ae=this.globalService.globalVar.shop.find($e=>"Specialty"===$e.name))){var ci=Ae.itemList.find($e=>"Team Manager"===$e.name);null!=ci&&(ci.totalShopQuantity=19);var pn=new Wt;pn.name="Talent Point Voucher",pn.purchasePrice.push(this.globalService.getMedalResourceValue(25)),pn.basePurchasePrice.push(this.globalService.getMedalResourceValue(25)),pn.infiniteAmount=!0,pn.canHaveMultiples=!0,pn.quantityAdditive=25,pn.isAvailable=!1,this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=53&&(pn.isAvailable=!0),pn.type=Le.Specialty,Ae.itemList.push(pn)}if((null===(oe=this.globalService.globalVar.animals.find($e=>$e.type===Fe.Hare))||void 0===oe?void 0:oe.isAvailable)&&(Ht=1e3,null==(ai=this.globalService.globalVar.resources.find(kn=>"Coins"===kn.name))?this.globalService.globalVar.resources.push(new Je("Coins",Ht)):ai.amount+=Ht),null!=(Hi=this.globalService.globalVar.shop.find($e=>"Animals"===$e.name))){var pi=Hi.itemList.find($e=>"Hare"===$e.name);null!=pi&&(pi.isAvailable=!1)}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=10){var Gn=this.globalService.globalVar.animals.find($e=>$e.type===Fe.Hare);void 0!==Gn&&(Gn.isAvailable=!0,this.globalService.unlockAnimalAbilities(Gn))}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=13&&this.globalService.globalVar.unlockables.set("barnRow2",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=14&&this.globalService.globalVar.unlockables.set("attractionSpecialization",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=25){var tn=this.globalService.globalVar.animals.find($e=>$e.type===Fe.Whale);void 0!==tn&&(tn.isAvailable=!0,this.globalService.unlockAnimalAbilities(tn))}this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=29&&this.globalService.globalVar.unlockables.set("barnRow3",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=40&&this.globalService.globalVar.unlockables.set("barnRow4",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=58&&this.globalService.globalVar.unlockables.set("barnRow5",!0);var nn=this.globalService.globalVar.animals.find($e=>$e.type===Fe.Octopus);if(void 0!==nn){var gr=nn.availableAbilities.find($e=>"Buried Treasure"===$e.name);void 0!==gr&&(gr.efficiency=100),"Buried Treasure"===nn.ability.name&&(nn.ability.efficiency=100)}var Qn=this.globalService.globalVar.animals.find($e=>$e.type===Fe.Salamander);if(void 0!==Qn){var Vn=Qn.availableAbilities.find($e=>"Cold Blooded"===$e.name);void 0!==Vn&&(Vn.efficiency=45),"Cold Blooded"===Qn.ability.name&&(Qn.ability.efficiency=45)}}else if(1.11===te){if(void 0!==this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.currentEventEndDate&&(this.globalService.globalVar.eventRaceData=new ha,this.globalService.globalVar.eventRaceData.initialSetupComplete=!1),null!=(Ae=this.globalService.globalVar.shop.find($e=>"Food"===$e.name))){var On=new Wt;On.name="Gingko Leaves",On.shortDescription="Reset Breed Level for a single animal back to 1 and remove all incubator upgrade gains. Increase Breed XP Gain by 900% until Breed Level returns to what it was.",On.purchasePrice.push(new Je("Coins",3500)),On.canHaveMultiples=!0,On.type=Le.Food,On.infiniteAmount=!0,On.isAvailable=!0,Ae.itemList.push(On)}var Rr=this.globalService.globalVar.modifiers.find($e=>"metersPerCoinsGrandPrixModifier"===$e.text);void 0!==Rr&&(Rr.value=25e5);var Jn=this.globalService.globalVar.modifiers.find($e=>"segmentCompleteMoraleBoostModifier"===$e.text);void 0!==Jn&&(Jn.value=.1);var ia=this.globalService.globalVar.modifiers.find($e=>"weatherMoraleBoostModifier"===$e.text);if(void 0!==ia&&(ia.value=.5),this.globalService.globalVar.relayEnergyFloor=50,this.globalService.globalVar.pinnacleFloor="Z",this.globalService.globalVar.unlockables.set("thePinnacle",!1),void 0!==(na=this.globalService.globalVar.tokenShop.find($e=>"Tier 2"===$e.name))){var Na=na.itemList.find($e=>"Coins"===$e.name),Pr=na.itemList.find($e=>"Training Breed XP Gain Certificate"===$e.name),yr=na.itemList.find($e=>"Diminishing Returns Increase Certificate"===$e.name);void 0!==Na&&(Na.purchasePrice=[],Na.purchasePrice.push(new Je("Tokens",1))),void 0!==Pr&&(Pr.purchasePrice=[],Pr.purchasePrice.push(new Je("Tokens",2))),void 0!==yr&&(yr.purchasePrice=[],yr.purchasePrice.push(new Je("Tokens",4)))}}else if(1.12===te)this.globalService.globalVar.doNotRelayBelowEnergyFloor=!1;else if(1.13===te){if(this.globalService.globalVar.startingVersion<=1.02){var Pt=this.globalService.globalVar.resources.find($e=>"Tokens"===$e.name);null!=Pt&&(Pt.amount+=5)}var ai,ne,ii=this.globalService.globalVar.resources.find($e=>"Mangoes"===$e.name&&$e.itemType===Le.Resources);if(void 0!==ii){var va=this.globalService.globalVar.resources.find($e=>"Mangoes"===$e.name&&$e.itemType===Le.Food);null!=va?va.amount+=ii.amount:this.globalService.globalVar.resources.push(new Je("Mangoes",ii.amount,Le.Food)),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter($e=>!("Mangoes"===$e.name&&$e.itemType===Le.Resources))}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=6&&this.globalService.globalVar.startingVersion<=1.09)Ht=1,null==(ai=this.globalService.globalVar.resources.find(kn=>"Team Manager"===kn.name))?(this.globalService.globalVar.resources.push(new Je("Team Manager",Ht,Le.Specialty)),this.globalService.globalVar.animalDecks.some(kn=>kn.autoRunFreeRace)||null!=(ne=this.globalService.globalVar.animalDecks.find(wr=>wr.isPrimaryDeck))&&(ne.autoRunFreeRace=!0)):ai.amount+=Ht;this.globalService.globalVar.orbStats=new $l;var yl=this.globalService.globalVar.modifiers.find($e=>"exhaustionStatLossMinimumModifier"===$e.text);void 0!==yl&&(yl.value=.3);var wo=this.globalService.globalVar.tokenShop.find($e=>"Tier 1"===$e.name),na=this.globalService.globalVar.tokenShop.find($e=>"Tier 2"===$e.name);if(void 0!==wo){var Fa=wo.itemList.find($e=>"Free Race Breed XP Gain Certificate"===$e.name),Ho=wo.itemList.find($e=>"Circuit Race Breed XP Gain Certificate"===$e.name);void 0!==Fa&&(Fa.type=Le.Consumable),void 0!==Ho&&(Ho.type=Le.Consumable)}void 0!==na&&(Pr=na.itemList.find(kn=>"Training Breed XP Gain Certificate"===kn.name),yr=na.itemList.find(kn=>"Diminishing Returns Increase Certificate"===kn.name),void 0!==Pr&&(Pr.type=Le.Consumable),void 0!==yr&&(yr.type=Le.Consumable))}else if(1.14===te)null!=this.globalService.globalVar.eventRaceData&&(this.globalService.globalVar.eventRaceData.rankDistanceMultiplier=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank)),this.globalService.globalVar.settings.set("monoRaceToggled",!1),this.globalService.globalVar.settings.set("duoRaceToggled",!1),this.globalService.globalVar.settings.set("rainbowRaceToggled",!1),this.globalService.globalVar.settings.set("pinnacleRaceToggled",!1),this.globalService.globalVar.settings.set("noviceTrainingTrackToggled",!1),this.globalService.globalVar.settings.set("intermediateTrainingTrackToggled",!1),this.globalService.globalVar.settings.set("masterTrainingTrackToggled",!1);else if(1.15===te){this.globalService.globalVar.pinnacleHistory=new ml,this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=79&&(this.globalService.globalVar.unlockables.set("thePinnacle",!0),this.globalService.globalVar.notifications.isNewSpecialRaceAvailable=!0),this.globalService.globalVar.settings.set("amberOrbToggled",!1),this.globalService.globalVar.settings.set("amethystOrbToggled",!1),this.globalService.globalVar.settings.set("emeraldOrbToggled",!1),this.globalService.globalVar.settings.set("rubyOrbToggled",!1),this.globalService.globalVar.settings.set("sapphireOrbToggled",!1),this.globalService.globalVar.settings.set("topazOrbToggled",!1);var _a=this.globalService.globalVar.shop.find(We=>"Specialty"===We.name);if(void 0!==_a){var La=_a.itemList.find(We=>"Incubator Upgrade Lv2"===We.name);void 0!==La&&(La.purchasePrice=[],La.purchasePrice.push(new Je("Coins",25e3)));var ro=_a.itemList.find(We=>"Incubator Upgrade Lv3"===We.name);void 0!==ro&&(ro.purchasePrice=[],ro.purchasePrice.push(new Je("Coins",1e5)));var ya=_a.itemList.find(We=>"Incubator Upgrade Lv4"===We.name);void 0!==ya&&(ya.purchasePrice=[],ya.purchasePrice.push(new Je("Coins",1e6)))}}else if(1.16===te)this.globalService.globalVar.animals.forEach(We=>{var $e;We.type===Fe.Octopus&&(void 0!==($e=We.availableAbilities.find(gn=>"Big Brain"===gn.name))&&($e.efficiency=4),"Big Brain"===We.ability.name&&(We.ability.efficiency=4)),We.type===Fe.Cheetah&&(void 0!==($e=We.availableAbilities.find(kn=>"On The Hunt"===kn.name))&&($e.efficiency=.5),"On The Hunt"===We.ability.name&&(We.ability.efficiency=.5)),We.type===Fe.Gecko&&(void 0!==($e=We.availableAbilities.find(kn=>"Night Vision"===kn.name))&&($e.efficiency=.75),"Night Vision"===We.ability.name&&(We.ability.efficiency=.75)),We.type===Fe.Penguin&&(void 0!==($e=We.availableAbilities.find(kn=>"Quick Toboggan"===kn.name))&&($e.efficiency=.5),"Quick Toboggan"===We.ability.name&&(We.ability.efficiency=.5)),We.type===Fe.Goat&&(void 0!==($e=We.availableAbilities.find(kn=>"Deep Breathing"===kn.name))&&($e.efficiency=8),"Deep Breathing"===We.ability.name&&(We.ability.efficiency=8)),We.type===Fe.Caribou&&(void 0!==($e=We.availableAbilities.find(kn=>"Special Delivery"===kn.name))&&($e.efficiency=5),"Special Delivery"===We.ability.name&&(We.ability.efficiency=5))});else if(1.17===te)this.globalService.globalVar.settings.set("quickViewBarnMode",!1),null!=this.globalService.globalVar.eventRaceData&&(this.globalService.globalVar.eventRaceData.eventAbilityData.storingPowerUseCap=25,this.globalService.globalVar.eventRaceData.eventAbilityData.storingPowerUseCount=0),this.globalService.globalVar.animals.forEach(We=>{if(We.type===Fe.Cheetah&&(void 0!==($e=We.availableAbilities.find(kn=>"Giving Chase"===kn.name))&&($e.efficiency=1),"Giving Chase"===We.ability.name&&(We.ability.efficiency=1)),We.type===Fe.Goat){var $e;void 0!==($e=We.availableAbilities.find(wr=>"Sure-footed"===wr.name))&&($e.efficiency=50),"Sure-footed"===We.ability.name&&(We.ability.efficiency=50);var gn=We.availableAbilities.find(wr=>"In The Rhythm"===wr.name);void 0!==gn&&(gn.efficiency=.2),"In The Rhythm"===We.ability.name&&(We.ability.efficiency=.2)}We.type===Fe.Shark&&(void 0!==($e=We.availableAbilities.find(wr=>"Blood In The Water"===wr.name))&&($e.efficiency=2),"Blood In The Water"===We.ability.name&&(We.ability.efficiency=2)),We.type===Fe.Penguin&&(void 0!==($e=We.availableAbilities.find(wr=>"Wild Toboggan"===wr.name))&&($e.efficiency=1.5),"Wild Toboggan"===We.ability.name&&(We.ability.efficiency=1.5)),We.type===Fe.Fox&&(void 0!==($e=We.availableAbilities.find(wr=>"Fleeting Speed"===wr.name))&&($e.efficiency=4),"Fleeting Speed"===We.ability.name&&(We.ability.efficiency=4)),We.type===Fe.Caribou&&(void 0!==($e=We.availableAbilities.find(wr=>"Herd Mentality"===wr.name))&&($e.efficiency=3),"Herd Mentality"===We.ability.name&&(We.ability.efficiency=3))});else if(1.18===te)this.globalService.globalVar.animals.forEach(We=>{We.talentResetCount=0,We.freeTalentResetCount=1});else if(1.19===te)this.globalService.globalVar.animals.forEach(We=>{We.increasedDefaultStats=new It(0,0,0,0,0,0),We.scrimmageEnergyTimer=0}),this.globalService.globalVar.tutorials.showScrimmageTutorial=!0;else if(1.2===te){var Ds=this.globalService.globalVar.modifiers.find($e=>"grandPrixCoinRewardModifier"===$e.text);void 0!==Ds&&(Ds.value=250);var Ma=this.globalService.globalVar.modifiers.find($e=>"researchCenterTrainingAnimalModifier"===$e.text);if(void 0!==Ma&&(Ma.value=.7),this.globalService.globalVar.modifiers.push(new ze(.001,"attractionRenownAmountModifier")),this.globalService.globalVar.modifiers.push(new ze(1,"trainingFacilityAbilityXpAmountModifier")),this.globalService.globalVar.modifiers.push(new ze(.1,"researchCenterRewardBonusAmountModifier")),this.globalService.globalVar.modifiers.push(new ze(.05,"breedingGroundsAdditionalAmountModifier")),this.globalService.globalVar.barns.forEach($e=>{$e.barnUpgrades.trainingFacilityDeltaTime=0}),null!=(Ae=this.globalService.globalVar.shop.find($e=>"Specialty"===$e.name))){var Er=new Wt;Er.name="Training Facility Improvements",Er.purchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),Er.basePurchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),Er.totalShopQuantity=1,Er.canHaveMultiples=!1,Er.isAvailable=!1,Er.type=Le.Specialty,Ae.itemList.push(Er),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=26&&(Er.isAvailable=!0);var wa=new Wt;wa.name="Breeding Grounds Improvements",wa.purchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),wa.basePurchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),wa.totalShopQuantity=1,wa.canHaveMultiples=!1,wa.isAvailable=!1,wa.type=Le.Specialty,Ae.itemList.push(wa),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=26&&(wa.isAvailable=!0);var Sa=new Wt;Sa.name="Attraction Improvements",Sa.purchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),Sa.basePurchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),Sa.totalShopQuantity=1,Sa.canHaveMultiples=!1,Sa.isAvailable=!1,Sa.type=Le.Specialty,Ae.itemList.push(Sa),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=26&&(Sa.isAvailable=!0);var Nn=new Wt;Nn.name="Research Center Improvements",Nn.purchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),Nn.basePurchasePrice.push(this.globalService.getCoinsResourceValue(25e4)),Nn.totalShopQuantity=1,Nn.canHaveMultiples=!1,Nn.isAvailable=!1,Nn.type=Le.Specialty,Ae.itemList.push(Nn),this.globalService.globalVar.unlockables.get("researchCenterSpecialization")&&(Nn.isAvailable=!0)}}else if(1.21===te){var Ae;if(this.globalService.globalVar.animals.forEach($e=>{$e.legacyRaceCount=0,$e.miscStats.bonusAbilityEfficiency=0,$e.miscStats.bonusOrbXp=0}),null!=(Ae=this.globalService.globalVar.shop.find($e=>"Specialty"===$e.name))){var er=new Wt;er.name="Orb Infuser",er.purchasePrice.push(this.globalService.getCoinsResourceValue(5e6)),er.basePurchasePrice.push(this.globalService.getCoinsResourceValue(5e6)),er.canHaveMultiples=!1,er.isAvailable=!1,er.type=Le.Specialty,Ae.itemList.push(er),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=79&&(er.isAvailable=!0)}}else 1.22===te?this.globalService.globalVar.animals.forEach(We=>{We.allTrainingTracks.masterTrack.rewardsObtained===We.allTrainingTracks.masterTrack.totalRewards&&(We.allTrainingTracks.legacyTrackAvailable=!0)}):1.23===te?(this.globalService.globalVar.settings.set("displayAverageDistancePace",!0),this.globalService.globalVar.settings.set("showBarnOptions",!0),this.globalService.globalVar.barnOrder=[],this.globalService.globalVar.barns.forEach(We=>{this.globalService.globalVar.barnOrder.push(We.barnNumber)}),this.globalService.globalVar.keybinds=new Wl,this.globalService.InitializeKeybinds()):1.24===te?(this.globalService.globalVar.monthlyMangoesPurchased=0,this.globalService.globalVar.modifiers.push(new ze(250,"monthlyMangoDefaultLimit"))):1.25===te&&this.globalService.globalVar.unlockables.set("scrimmages",!0);this.globalService.globalVar.currentVersion=te}})}fixTrackRewardsBug(){this.globalService.globalVar.animals.filter(e=>e.isAvailable).forEach(e=>{var i=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces(),r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces(),a=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining(e),c=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(),d=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction(),m=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();e.miscStats.bonusBreedXpGainFromLocalRaces=0===e.miscStats.bonusLocalBreedXpCertificateCount?i:i+e.miscStats.bonusLocalBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromCircuitRaces=0===e.miscStats.bonusCircuitBreedXpCertificateCount?r:r+2*e.miscStats.bonusCircuitBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromTraining=0===e.miscStats.bonusTrainingBreedXpCertificateCount?a:a+e.miscStats.bonusTrainingBreedXpCertificateCount,e.miscStats.diminishingReturnsBonus=0===e.miscStats.bonusDiminishingReturnsCertificateCount?c:c+e.miscStats.bonusDiminishingReturnsCertificateCount,e.miscStats.trainingTimeReduction=d,e.miscStats.bonusTalents=m})}}return t.\u0275fac=function(e){return new(e||t)(Ft(ki),Ft(yn),Ft(Lr))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),uO=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.raceLogicService=r,this.lookupService=a}handleGrandPrix(e){var i=!1;if(null!=this.globalService.globalVar.eventRaceData.currentEventEndDate&&new Date>this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1))return i=!0,this.globalService.globalVar.eventRaceData=new ha,void(this.globalService.globalVar.eventRaceData.initialSetupComplete=!1);if(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime&&(i=!0,this.globalService.globalVar.eventRaceData.isCatchingUp&&(i=!1),this.globalService.globalVar.eventRaceData.initialSetupComplete&&(this.globalService.globalVar.eventRaceData.remainingEventRaceTime>0&&new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1)?(this.globalService.globalVar.eventRaceData.segmentTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime,this.globalService.globalVar.eventRaceData.overallTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime):this.globalService.globalVar.eventRaceData.isCatchingUp||(this.globalService.globalVar.eventRaceData=new ha)),!this.globalService.globalVar.eventRaceData.isCatchingUp&&0===this.globalService.globalVar.eventRaceData.remainingEventRaceTime))this.globalService.globalVar.eventRaceData.initialSetupComplete=!1;else{if(!this.globalService.globalVar.eventRaceData.initialSetupComplete){this.globalService.globalVar.previousEventRewards=[],this.globalService.initialGrandPrixSetup("Z",1),this.globalService.globalVar.eventRaceData.initialSetupComplete=!0,this.globalService.globalVar.notifications.isEventRaceNowActive=!0;var r=this.globalService.getCurrentEventStartEndDateTime(!1);r instanceof Date&&(this.globalService.globalVar.eventRaceData.currentEventStartDate=r);var a=this.globalService.getCurrentEventStartEndDateTime(!0);if(a instanceof Date&&(this.globalService.globalVar.eventRaceData.currentEventEndDate=a),this.globalService.globalVar.settings.get("autoStartEventRace")&&!1===this.globalService.globalVar.eventRaceData.isRunning){var c=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();if(this.globalService.globalVar.eventRaceData.segmentTimeCounter=c,this.globalService.globalVar.eventRaceData.overallTimeCounter=c,null!=(d=this.globalService.getGrandPrixRacingAnimal()).type){if(!this.globalService.globalVar.eventRaceData.animalData.some(q=>q.isCurrentlyRacing)){var m=this.globalService.globalVar.eventRaceData.animalData.find(q=>q.associatedAnimalType==d.type);void 0!==m&&(m.isCurrentlyRacing=!0)}this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(d),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(d),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}}}if(this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&this.globalService.increaseGrandPrixRaceRank(),this.globalService.getTimeToEventRace()>0&&this.globalService.globalVar.eventRaceData.bonusTime>0&&(this.globalService.globalVar.eventRaceData.bonusTime-=e,this.globalService.globalVar.eventRaceData.bonusTime<=0&&(this.globalService.globalVar.eventRaceData.bonusTime=0)),this.globalService.globalVar.eventRaceData.isRunning){if(null==this.globalService.globalVar.animalDecks.find(q=>q.isEventDeck))return;i||(this.globalService.globalVar.eventRaceData.segmentTimeCounter+=e,this.globalService.globalVar.eventRaceData.overallTimeCounter+=e),this.globalService.globalVar.eventRaceData.remainingEventRaceTime=new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1)?0:this.globalService.getRemainingEventRaceTime();var T=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60;if(this.globalService.globalVar.eventRaceData.segmentTimeCounter>=2*T&&new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1)?(this.globalService.globalVar.eventRaceData.isCatchingUp=!0,this.globalService.globalVar.eventRaceData.delayCatchingUpTimeCounter+=e):(this.globalService.globalVar.eventRaceData.isCatchingUp=!1,this.globalService.globalVar.eventRaceData.delayCatchingUpTimeCounter=0),this.globalService.globalVar.eventRaceData.segmentTimeCounter>=T)if(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1,this.globalService.globalVar.eventRaceData.segmentTimeCounter-=T,this.globalService.globalVar.eventRaceData.distanceCovered+=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.distanceCovered,this.globalService.globalVar.eventRaceData.previousRaceSegment=this.globalService.globalVar.eventRaceData.currentRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.previousRaceSegment.reduceExportSize(),this.globalService.globalVar.eventRaceData.distanceCovered>=this.globalService.globalVar.eventRaceData.totalDistance)this.globalService.globalVar.eventRaceData.distanceCovered=this.globalService.globalVar.eventRaceData.totalDistance,this.grandPrixRaceCompleted();else{var d;this.checkForEventRelayAnimal(this.globalService.globalVar.eventRaceData.isCatchingUp,this.globalService.globalVar.eventRaceData.segmentTimeCounter)&&this.resetEventAbilityUseCounts(),void 0!==(d=this.globalService.getGrandPrixRacingAnimal()).type&&void 0!==d.name&&(this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.globalVar.eventRaceData.nextRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.nextRaceSegment),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(d,this.globalService.globalVar.eventRaceData.isCatchingUp?this.globalService.globalVar.eventRaceData.segmentTimeCounter:void 0),this.globalService.globalVar.eventRaceData.delayCatchingUpTimeCounter=0)}this.checkForGrandPrixRewards()}else this.globalService.globalVar.eventRaceData.isCatchingUp=!1;this.updateExhaustionAndMorale(e),this.updateWeatherCluster(e)}}grandPrixRaceCompleted(){this.globalService.globalVar.eventRaceData.isGrandPrixCompleted=!0,this.globalService.stopGrandPrixRace()}updateExhaustionAndMorale(e){this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter+=this.globalService.globalVar.eventRaceData.isCatchingUp?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60:e;var i=300,r=this.globalService.globalVar.modifiers.find(m=>"exhaustionGainTimerCapGrandPrixModifier"===m.text);null!=r&&(i=r.value);var a=.02,c=this.globalService.globalVar.modifiers.find(m=>"exhaustionGainGrandPrixModifier"===m.text);null!=c&&(a=c.value);var d=this.globalService.globalVar.eventRaceData.animalData.find(m=>m.isCurrentlyRacing);this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter>i&&(this.globalService.globalVar.eventRaceData.animalData.forEach(m=>{(!this.globalService.globalVar.eventRaceData.isRunning||void 0===d||m.associatedAnimalType!==(null==d?void 0:d.associatedAnimalType))&&(m.exhaustionStatReduction+=a,m.exhaustionStatReduction>=1&&(m.exhaustionStatReduction=1)),m.morale<1&&(m.morale+=a)}),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter-=i)}updateWeatherCluster(e){this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter+=e;var i=7200,r=this.globalService.globalVar.modifiers.find(a=>"weatherClusterTimerCapGrandPrixModifier"===a.text);null!=r&&(i=r.value),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter>i&&(this.globalService.globalVar.eventRaceData.weatherCluster=this.globalService.getRandomGrandPrixWeatherCluster(void 0,this.globalService.globalVar.eventRaceData.weatherCluster),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter-=i)}checkForEventRelayAnimal(e,i){var r=!1;if(this.globalService.globalVar.eventRaceData.animalData.some(ne=>ne.isSetToRelay))this.globalService.globalVar.eventRaceData.animalData.forEach(ne=>{ne.isCurrentlyRacing=!1,ne.isSetToRelay&&(ne.isCurrentlyRacing=!0,ne.isSetToRelay=!1,this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,r=!0,this.lookupService.getCourseTypeFromAnimalType(ne.associatedAnimalType)===Ve.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0))});else{var a=this.globalService.getGrandPrixRacingAnimal(),c=this.globalService.getExhaustionOfAnimal(a.type),d=this.lookupService.getBreedLevelRequiredForGrandPrix();if(void 0!==c&&(c<.5||this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay)){this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay=!1;var m=this.globalService.globalVar.animalDecks.find(ne=>ne.isEventDeck);if(null!=m){var _=[];m.selectedAnimals.forEach(ne=>{var Ae=this.globalService.globalVar.animals.find(Ue=>Ue.type===ne.type);void 0!==Ae&&_.push(Ae)});var T=_.filter(ne=>ne.breedLevel>=d),A=[];if(m.isCourseOrderActive){for(var q=0;q<T.length;q++)if(m.courseTypeOrder.length>q){var Q=m.courseTypeOrder[q],te=T.find(ne=>ne.raceCourseType===Q);void 0!==te&&A.push(te)}}else T.forEach(ne=>{A.push(ne)});var oe=.5;if(this.globalService.globalVar.doNotRelayBelowEnergyFloor&&(oe=this.globalService.globalVar.relayEnergyFloor/100),(A=A.filter(ne=>{var Ae=this.globalService.globalVar.eventRaceData.animalData.find(bt=>bt.associatedAnimalType===ne.type);if(null!=Ae){var Ue=this.globalService.globalVar.animals.find(bt=>bt.type===ne.type);return Ae.exhaustionStatReduction>=oe&&!this.globalService.shouldShowSlowSegmentWarning(Ue)||Ae.associatedAnimalType===a.type}return!1})).length>1){var de=0,be=!1;if(A.forEach(ne=>{ne.type===a.type&&(be=!0),be||(de+=1)}),be||(de=-1),this.globalService.globalVar.eventRaceData.animalData.forEach(ne=>{ne.isCurrentlyRacing=!1}),de>-1){var ce=de+1;ce===A.length&&(ce=0),this.globalService.globalVar.eventRaceData.animalData.forEach(ne=>{ne.associatedAnimalType===A[ce].type&&(ne.isCurrentlyRacing=!0,r=!0,this.lookupService.getCourseTypeFromAnimalType(ne.associatedAnimalType)===Ve.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(A[ce],e?i:void 0))})}else this.globalService.globalVar.eventRaceData.animalData.forEach(ne=>{ne.associatedAnimalType===A[0].type&&(ne.isCurrentlyRacing=!0,r=!0,this.lookupService.getCourseTypeFromAnimalType(ne.associatedAnimalType)===Ve.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(A[0],e?i:void 0))});this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1}else this.globalService.globalVar.eventRaceData.animalData.forEach(ne=>{ne.isCurrentlyRacing=!1}),this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalService.globalVar.eventRaceData.isRunning=!1,this.globalService.globalVar.eventRaceData.overallTimeCounter-=this.globalService.globalVar.eventRaceData.segmentTimeCounter,this.globalService.globalVar.eventRaceData.segmentTimeCounter=0,this.globalService.globalVar.eventRaceData.currentRaceSegment.reduceExportSize()}}}return r}resetEventAbilityUseCounts(){null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.eventAbilityData||this.globalService.globalVar.eventRaceData.eventAbilityData.resetUseCounts()}checkForGrandPrixRewards(){var e=this.globalService.globalVar.eventRaceData.distanceCovered,i=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,r=100,a=this.globalService.globalVar.modifiers.find(yi=>"grandPrixCoinRewardModifier"===yi.text);null!=a&&(r=a.value*i);var c=5,d=this.globalService.globalVar.modifiers.find(yi=>"grandPrixRenownRewardModifier"===yi.text);null!=d&&(c=d.value);var m=5e6,_=this.globalService.globalVar.modifiers.find(yi=>"metersPerCoinsGrandPrixModifier"===yi.text);null!=_&&(m=_.value);var T=2e7,A=this.globalService.globalVar.modifiers.find(yi=>"metersPerRenownGrandPrixModifier"===yi.text);null!=A&&(T=A.value);var q=5e7,Q=this.globalService.globalVar.modifiers.find(yi=>"grandPrixToken1MeterModifier"===yi.text);null!=Q&&(q=Q.value);var te=5e7,oe=this.globalService.globalVar.modifiers.find(yi=>"grandPrixToken2MeterModifier"===yi.text);null!=oe&&(te=oe.value);var de=5e7,be=this.globalService.globalVar.modifiers.find(yi=>"grandPrixToken3MeterModifier"===yi.text);null!=be&&(de=be.value);var ce=5e7,ne=this.globalService.globalVar.modifiers.find(yi=>"grandPrixToken4MeterModifier"===yi.text);null!=ne&&(ce=ne.value);var Ae=this.lookupService.getTokenModifier(),bt=this.globalService.globalVar.eventRaceData.totalDistance/(T*i);if(e>=m*i*(this.globalService.globalVar.eventRaceData.coinRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.coinRewardsObtained<this.globalService.globalVar.eventRaceData.totalDistance/(m*i)&&(this.globalService.globalVar.eventRaceData.coinRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(nt=this.globalService.globalVar.resources.find(yi=>"Coins"===yi.name))&&(nt.amount+=r),this.lookupService.addResourceToResourceList(new Je("Coins",r,Le.Resources),this.globalService.globalVar.previousEventRewards)),e>=T*i*(this.globalService.globalVar.eventRaceData.renownRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.renownRewardsObtained<bt&&(this.globalService.globalVar.eventRaceData.renownRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Renown"===Ze.name))&&(nt.amount+=c),this.lookupService.addResourceToResourceList(new Je("Renown",c,Le.Progression),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=0&&e>=q*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Tokens"===Ze.name))?nt.amount+=1*Ae:this.globalService.globalVar.resources.push(new Je("Tokens",1*Ae,Le.Resources)),this.lookupService.addResourceToResourceList(new Je("Tokens",1*Ae,Le.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=1&&e>=te*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Tokens"===Ze.name))?nt.amount+=2*Ae:this.globalService.globalVar.resources.push(new Je("Tokens",2*Ae,Le.Resources)),this.lookupService.addResourceToResourceList(new Je("Tokens",2*Ae,Le.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=2&&e>=de*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Tokens"===Ze.name))?nt.amount+=3*Ae:this.globalService.globalVar.resources.push(new Je("Tokens",3*Ae,Le.Resources)),this.lookupService.addResourceToResourceList(new Je("Tokens",3*Ae,Le.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=3&&e>=ce*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Tokens"===Ze.name))?nt.amount+=4*Ae:this.globalService.globalVar.resources.push(new Je("Tokens",4*Ae,Le.Resources)),this.lookupService.addResourceToResourceList(new Je("Tokens",4*Ae,Le.Resources),this.globalService.globalVar.previousEventRewards)),1===i){var nt,Ht=100;e>=25e3*i&&0===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Strawberries"===Ze.name))?nt.amount+=Ht*i:this.globalService.globalVar.resources.push(new Je("Strawberries",Ht*i,Le.Food)),this.lookupService.addResourceToResourceList(new Je("Strawberries",Ht*i,Le.Food),this.globalService.globalVar.previousEventRewards)),e>=5e4*i&&1===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Apples"===Ze.name))?nt.amount+=Ht*i:this.globalService.globalVar.resources.push(new Je("Apples",Ht*i,Le.Food)),this.lookupService.addResourceToResourceList(new Je("Apples",Ht*i,Le.Food),this.globalService.globalVar.previousEventRewards)),e>=75e3*i&&2===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Oranges"===Ze.name))?nt.amount+=Ht*i:this.globalService.globalVar.resources.push(new Je("Oranges",Ht*i,Le.Food)),this.lookupService.addResourceToResourceList(new Je("Oranges",Ht*i,Le.Food),this.globalService.globalVar.previousEventRewards)),e>=1e5*i&&3===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Mangoes"===Ze.name))?nt.amount+=5*i:this.globalService.globalVar.resources.push(new Je("Mangoes",5*i,Le.Food)),this.lookupService.addResourceToResourceList(new Je("Mangoes",5*i,Le.Food),this.globalService.globalVar.previousEventRewards)),e>=25e4*i&&4===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Turnips"===Ze.name))?nt.amount+=Ht*i:this.globalService.globalVar.resources.push(new Je("Turnips",Ht*i,Le.Food)),this.lookupService.addResourceToResourceList(new Je("Turnips",Ht*i,Le.Food),this.globalService.globalVar.previousEventRewards)),e>=5e5*i&&5===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Bananas"===Ze.name))?nt.amount+=Ht*i:this.globalService.globalVar.resources.push(new Je("Bananas",Ht*i,Le.Food)),this.lookupService.addResourceToResourceList(new Je("Bananas",Ht*i,Le.Food),this.globalService.globalVar.previousEventRewards)),e>=75e4*i&&6===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Carrots"===Ze.name))?nt.amount+=Ht*i:this.globalService.globalVar.resources.push(new Je("Carrots",Ht*i,Le.Food)),this.lookupService.addResourceToResourceList(new Je("Carrots",Ht*i,Le.Food),this.globalService.globalVar.previousEventRewards)),e>=1e6*i&&7===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(nt=this.globalService.globalVar.resources.find(Ze=>"Mangoes"===Ze.name))?nt.amount+=10*i:this.globalService.globalVar.resources.push(new Je("Mangoes",10*i,Le.Food)),this.lookupService.addResourceToResourceList(new Je("Mangoes",10*i,Le.Food),this.globalService.globalVar.previousEventRewards))}}}return t.\u0275fac=function(e){return new(e||t)(Ft(ki),Ft(Lr),Ft(w0),Ft(yn))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),sM=(()=>{class t{constructor(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setProductionMode(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setDevMode(){this.devModeActive=!0,this.forceStartNewGame=!0,this.codeCreationMode=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Mi=(()=>{return(t=Mi||(Mi={}))[t.barn=0]="barn",t[t.raceselection=1]="raceselection",t[t.animals=2]="animals",t[t.relayTeams=3]="relayTeams",t[t.shop=4]="shop",t[t.incubator=5]="incubator",t[t.trainingtrack=6]="trainingtrack",t[t.talents=7]="talents",t[t.resources=8]="resources",t[t.faqs=9]="faqs",t[t.stats=10]="stats",t[t.settings=11]="settings",Mi;var t})(),Fo=(()=>{return(t=Fo||(Fo={}))[t.regular=0]="regular",t[t.token=1]="token",Fo;var t})();let qr=(()=>{class t{constructor(){this.switchView=new zr(Mi.barn),this.selectAnimalView=new zr(new Ti),this.selectBarnView=new zr(0),this.selectShopView=new zr(Fo.regular),this.selectRaceView=new zr(xt.circuit)}setNewView(e){e!==this.switchView.value&&this.switchView.next(e)}getNewView(){return this.switchView.asObservable()}setAnimalView(e,i){i!==this.selectAnimalView.value&&this.selectAnimalView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setAnimal(e){e!==this.selectAnimalView.value&&this.selectAnimalView.next(e)}getAnimalView(){return this.selectAnimalView.asObservable()}setBarnView(e,i){i!==this.selectBarnView.value&&this.selectBarnView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setBarnNumber(e){e!==this.selectBarnView.value&&this.selectBarnView.next(e)}getBarnView(){return this.selectBarnView.asObservable()}setShopView(e,i){i!==this.selectShopView.value&&this.selectShopView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setShopType(e){e!==this.selectShopView.value&&this.selectShopView.next(e)}getShopView(){return this.selectShopView.asObservable()}setRaceView(e,i){i!==this.selectRaceView.value&&this.selectRaceView.next(i),e!==this.switchView.value&&this.switchView.next(e)}getRaceView(){return this.selectRaceView.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class dO{}let lM=(()=>{class t{constructor(e){this.globalService=e}skipTutorial(){this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.globalVar.tutorials.currentTutorialId=10}getTutorialState(e){var i=new dO;return i.id=e,1===e&&(i.tutorialText="<b>Welcome to Cultura!</b> \n\n Cultura is the name of your soon to be state of the art animal racing facility. Train and nurture your animal companions and rise through the ranks by winning circuit competitions. Mix and match different racing teams and abilities to rise as far as you can!\n\nLet's take a tour. From this page, you can select a barn where you can assign and train animals. Currently, you have a fine racing horse already set up in your first barn. Select it and let's get to work. \n\n <b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=Mi.barn),2===e&&(i.tutorialText="You'll have to train your animals if you want them to win. There are only a few training options to choose from now, but as you grow you will find better and faster ways to improve. Each training will develop your animals in specific ways, improving the following base stats:\n\n<b>Speed</b>: Increase the max speed your animal can run in a race.\n<b>Acceleration</b>: Increase how quickly your animal gains speed.\n<b>Endurance</b>: Increase the distance your animal can run before tiring out and slowing down.\n<b>Power</b>: Increase the efficiency of your unique ability.\n<b>Focus</b>: Increase the distance your animal can run before losing focus and stopping abruptly.\n<b>Adaptability</b>: Increase the likelihood your animal won't stumble when racing through unique paths.\n\n<b>Select a training option out of the ones outlined in red.</b>",i.associatedTab=Mi.barn),3===e&&(i.tutorialText="Here you can get a breakdown on the status of your animals. Here's your horse along with all of the stat information we just went over. If you need a refresher, hover over any of the stats to see what they do. There are a few other stats here to be mindful of:\n\n<b>Diminishing Returns</b>: After a base stat reaches the Diminishing Returns value, any additional training of that stat gets progressively weaker. Typically, you want to try and keep all of your base stats around your Diminishing Returns value for best results. You'll find multiple ways to increase your Diminishing Returns value as you progress.\n<b>Burst Chance</b>: As you race, your racer may enter Burst mode. This increases their overall velocity and allows them to exceed their Max Speed. This stat is based on a combination of Focus and Adaptability and is not affected by Diminishing Returns.\n<b>Burst Distance</b>: This controls how long you stay in Burst mode. This stat is based on your Power and is not affected by Diminishing Returns.\n\nCheck back here often as you proceed to assign new abilities and items to your animals, as well as breeding them to gain even faster offspring.\n\nNow that your horse has had time to take a few practice laps, let's see if they have what it takes to win a race!\n\n<b>Select the 'Race' option on the right (or in the menu if on mobile) bordered in red.</b>",i.associatedTab=Mi.animals),4===e&&(i.tutorialText="You've got a few options here. Circuit races are all about deciding where you stand against the competition. If you win all of the circuit races for your rank, you'll move up into the next rank which may net you some nifty rewards and open up new opportunities for your facility. Improving your Circuit Rank should be your number one goal in becoming a top tier racing facility!\n\nYou can also run some free races against local competition. Only a few races are available at a time, but it can be a great way to get some practice in and make some quick money.\n\nFor now, let's see if you can make it up to the next circuit rank. It's a nice sunny day today and that might impact how your racer runs. If you hover over a race, you'll see how the terrain or weather might impact the conditions of the race. When in doubt, hovering over text usually gives you the information you need. Whenever you're ready, start the race. Your goal is to get to the finish line before your competition (represented as the little black dot). Good luck!\n\n<b>Click (or tap if you are on mobile) the race option outlined in red.</b>",i.associatedTab=Mi.raceselection),5===e&&(i.tutorialText="Way to go! Exciting stuff there. Looks like you've got the gist of it for now. Keep racing, make some money, and build up your facility to be as great as it can be. I'll check in with you again a little later. I look forward to seeing how far you can go!\n\n<b>Continue training your animals and completing Circuit Races to raise your Circuit Rank. If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",i.associatedTab=Mi.raceselection),6===e&&(i.tutorialText="Nice, you've unlocked another racer! If you jump straight into a race with your untrained monkey, things probably aren't going to go well. As you race, you'll start making enough money to build more barns and train your animals simultaneously. For now, let's go back to the barn you have.\n\n<b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=Mi.raceselection),7===e&&(i.tutorialText="Let's see if we can start training your new racing Monkey. From here you can unassign an animal from a barn and bring a new animal in. As you start to branch out and race in different course types, you'll want to try and keep your team well balanced. It's not going to help you if you have a prized thoroughbred torching the competition if your follow up racer can barely make it out the gate.\n\nLet's start training your Monkey now.\n\n<b>Select 'Unassign' at the top of the screen and choose 'Monkey' to train.</b>",i.associatedTab=Mi.barn),8===e&&(i.tutorialText="Nicely done. Now you can set a training for your Monkey so it can start to get acclimated to racing. Once your Monkey has caught up to your Horse in stats, you'll be back to winning races in no time. Don't forget to train both your Horse and your Monkey, and to try to keep their stats balanced! I'll check back in with you after awhile.\n\n<b>Continue training your animals and completing Circuit Races to raise your Circuit Rank. If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",i.associatedTab=Mi.barn),9===e&&(i.tutorialText="Looks like you've won a nice racing Hare. The Hare and Horse are both Flatland animals, meaning only one of them will be able to run the Flatland portion of a race at a time. Ideally, you'll want one getting faster while the other is winning races. Let's head over to your animals and talk about Breeding.\n\n<b>Click (or tap if you are on mobile) 'Animals' on the right bordered in red and select an animal.</b>",i.associatedTab=Mi.raceselection),10===e&&(i.tutorialText="Breeding is where your speed really starts to grow. Firstly, to Breed you need a sufficient amount of Breed XP. Training and racing both contribute to this. Once you're ready, you can breed your animal to increase its Breed Level. This gives it a 5% increase to how much the base stats affect the racing stats. There's a strategic element to this. <b>After breeding, your animal will have its stats reset back to their starting points, but the amount that the base stats contribute to the racing stats will increase.</b>\n\n Because you only need 1 Flatland animal to race at any given time, you can choose one to start Breeding and another to keep racing. For best results, you should keep Breeding the same animal multiple times so that you don't need to spend too much time training. 5% may not make a huge difference at first, but 50% will. Once your racing animal can no longer keep up with the competition, swap them! The animal you were breeding will surely torch the competition and the animal you were racing can start to catch up in speed.\n\nThere's an ebb and flow to it. Race as far as your animals can go, breed them many times in quick succession to get a large percentage upgrade to stats, and then get back in the race. <b>This game is intended to be a slow burn and skews towards idle play. If you play very actively, you may find yourself needing to wait at certain points early on. Breeding once, training to max, breeding one time again, and so on is not recommended. Cycle between breeding in batches and then racing with your much higher stat modifiers.\n\nThat's all I have for you. Good luck and have fun!",i.associatedTab=Mi.animals,this.globalService.globalVar.tutorials.tutorialCompleted=!0),i}openTutorialModal(){}}return t.\u0275fac=function(e){return new(e||t)(Ft(ki))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const fO=["addListener","removeListener"],hO=["addEventListener","removeEventListener"],pO=["on","off"];function Ka(t,n,e,i){if(j(e)&&(i=e,e=void 0),i)return Ka(t,n,e).pipe(Hv(i));const[r,a]=function mO(t){return j(t.addEventListener)&&j(t.removeEventListener)}(t)?hO.map(c=>d=>t[c](n,d,e)):function gO(t){return j(t.addListener)&&j(t.removeListener)}(t)?fO.map(cM(t,n)):function vO(t){return j(t.on)&&j(t.off)}(t)?pO.map(cM(t,n)):[];if(!r&&Pi(t))return at(c=>Ka(c,n,e))(st(t));if(!r)throw new TypeError("Invalid event target");return new b(c=>{const d=(...m)=>c.next(1<m.length?m:m[0]);return r(d),()=>a(d)})}function cM(t,n){return e=>i=>t[e](n,i)}class bO extends p{constructor(n,e){super()}schedule(n,e=0){return this}}const S0={setInterval(...t){const{delegate:n}=S0;return((null==n?void 0:n.setInterval)||setInterval)(...t)},clearInterval(t){const{delegate:n}=S0;return((null==n?void 0:n.clearInterval)||clearInterval)(t)},delegate:void 0},uM={now:()=>(uM.delegate||Date).now(),delegate:void 0};class Fd{constructor(n,e=Fd.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}Fd.now=uM.now;const dM=new class yO extends Fd{constructor(n,e=Fd.now){super(n,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}(class _O extends bO{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(n,e,i=0){return S0.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;S0.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(a){i=!0,r=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,G(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),wO=dM;function qm(t=0,n,e=wO){let i=-1;return null!=n&&(Tt(n)?e=n:i=n),new b(r=>{let a=function SO(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},a)})}const{isArray:CO}=Array;function fM(t){return 1===t.length&&CO(t[0])?t[0]:t}function hM(...t){return 1===(t=fM(t)).length?st(t[0]):new b(function TO(t){return n=>{let e=[];for(let i=0;e&&!n.closed&&i<t.length;i++)e.push(st(t[i]).subscribe(ke(n,r=>{if(e){for(let a=0;a<e.length;a++)a!==i&&e[a].unsubscribe();e=null}n.next(r)})))}}(t))}function C0(...t){const n=Fn(t),e=fM(t);return e.length?new b(i=>{let r=e.map(()=>[]),a=e.map(()=>!1);i.add(()=>{r=a=null});for(let c=0;!i.closed&&c<e.length;c++)st(e[c]).subscribe(ke(i,d=>{if(r[c].push(d),r.every(m=>m.length)){const m=r.map(_=>_.shift());i.next(n?n(...m):m),r.some((_,T)=>!_.length&&a[T])&&i.complete()}},()=>{a[c]=!0,!r[c].length&&i.complete()}));return()=>{r=a=null}}):dt}function pa(t){return Se((n,e)=>{st(t).subscribe(ke(e,()=>e.complete(),O)),!e.closed&&n.subscribe(e)})}function Wm(...t){const n=Fn(t);return Se((e,i)=>{const r=t.length,a=new Array(r);let c=t.map(()=>!1),d=!1;for(let m=0;m<r;m++)st(t[m]).subscribe(ke(i,_=>{a[m]=_,!d&&!c[m]&&(c[m]=!0,(d=c.every(f))&&(c=null))},O));e.subscribe(ke(i,m=>{if(d){const _=[m,...a];i.next(n?n(..._):_)}}))})}function gM(t,n){return n?e=>_d(n.pipe(Ni(1),function RO(){return Se((t,n)=>{t.subscribe(ke(n,O))})}()),e.pipe(gM(t))):at((e,i)=>t(e,i).pipe(Ni(1),function DO(t){return Pe(()=>t)}(e)))}function vM(t,n=dM){const e=qm(t,n);return gM(()=>e)}new b(O);var AO={left:"right",right:"left",bottom:"top",top:"bottom"};function T0(t){return t.replace(/left|right|bottom|top/g,function(n){return AO[n]})}function Ts(t){return t.split("-")[0]}var PO={start:"end",end:"start"};function mM(t){return t.replace(/start|end/g,function(n){return PO[n]})}var _o="top",ns="bottom",rs="right",yo="left",Xm="auto",Ld=[_o,ns,rs,yo],su="start",Ud="end",bM="viewport",Hd="popper",_M=Ld.reduce(function(t,n){return t.concat([n+"-"+su,n+"-"+Ud])},[]),yM=[].concat(Ld,[Xm]).reduce(function(t,n){return t.concat([n,n+"-"+su,n+"-"+Ud])},[]),zO=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function as(t){if(null==t)return window;if("[object Window]"!==t.toString()){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function lu(t){return t instanceof as(t).Element||t instanceof Element}function Lo(t){return t instanceof as(t).HTMLElement||t instanceof HTMLElement}function wM(t){return"undefined"!=typeof ShadowRoot&&(t instanceof as(t).ShadowRoot||t instanceof ShadowRoot)}function bl(t){return((lu(t)?t.ownerDocument:t.document)||window.document).documentElement}var Yl=Math.max,M0=Math.min,cu=Math.round;function uu(t,n){void 0===n&&(n=!1);var e=t.getBoundingClientRect(),i=1,r=1;if(Lo(t)&&n){var a=t.offsetHeight,c=t.offsetWidth;c>0&&(i=cu(e.width)/c||1),a>0&&(r=cu(e.height)/a||1)}return{width:e.width/i,height:e.height/r,top:e.top/r,right:e.right/i,bottom:e.bottom/r,left:e.left/i,x:e.left/i,y:e.top/r}}function Ym(t){var n=as(t);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function Km(t){return uu(bl(t)).left+Ym(t).scrollLeft}function Ys(t){return as(t).getComputedStyle(t)}function Ms(t){return t?(t.nodeName||"").toLowerCase():null}function x0(t){return"html"===Ms(t)?t:t.assignedSlot||t.parentNode||(wM(t)?t.host:null)||bl(t)}function Zm(t){var n=Ys(t);return/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX)}function SM(t){return["html","body","#document"].indexOf(Ms(t))>=0?t.ownerDocument.body:Lo(t)&&Zm(t)?t:SM(x0(t))}function Gd(t,n){var e;void 0===n&&(n=[]);var i=SM(t),r=i===(null==(e=t.ownerDocument)?void 0:e.body),a=as(i),c=r?[a].concat(a.visualViewport||[],Zm(i)?i:[]):i,d=n.concat(c);return r?d:d.concat(Gd(x0(c)))}function $O(t){return["table","td","th"].indexOf(Ms(t))>=0}function CM(t){return Lo(t)&&"fixed"!==Ys(t).position?t.offsetParent:null}function zd(t){for(var n=as(t),e=CM(t);e&&$O(e)&&"static"===Ys(e).position;)e=CM(e);return e&&("html"===Ms(e)||"body"===Ms(e)&&"static"===Ys(e).position)?n:e||function WO(t){var n=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Lo(t)&&"fixed"===Ys(t).position)return null;for(var r=x0(t);Lo(r)&&["html","body"].indexOf(Ms(r))<0;){var a=Ys(r);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||n&&"filter"===a.willChange||n&&a.filter&&"none"!==a.filter)return r;r=r.parentNode}return null}(t)||n}function TM(t,n){var e=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(e&&wM(e)){var i=n;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Qm(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function MM(t,n){return n===bM?Qm(function jO(t){var n=as(t),e=bl(t),i=n.visualViewport,r=e.clientWidth,a=e.clientHeight,c=0,d=0;return i&&(r=i.width,a=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(c=i.offsetLeft,d=i.offsetTop)),{width:r,height:a,x:c+Km(t),y:d}}(t)):lu(n)?function XO(t){var n=uu(t);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(n):Qm(function qO(t){var n,e=bl(t),i=Ym(t),r=null==(n=t.ownerDocument)?void 0:n.body,a=Yl(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),c=Yl(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),d=-i.scrollLeft+Km(t),m=-i.scrollTop;return"rtl"===Ys(r||e).direction&&(d+=Yl(e.clientWidth,r?r.clientWidth:0)-a),{width:a,height:c,x:d,y:m}}(bl(t)))}function du(t){return t.split("-")[1]}function Jm(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function xM(t){var m,n=t.reference,e=t.element,i=t.placement,r=i?Ts(i):null,a=i?du(i):null,c=n.x+n.width/2-e.width/2,d=n.y+n.height/2-e.height/2;switch(r){case _o:m={x:c,y:n.y-e.height};break;case ns:m={x:c,y:n.y+n.height};break;case rs:m={x:n.x+n.width,y:d};break;case yo:m={x:n.x-e.width,y:d};break;default:m={x:n.x,y:n.y}}var _=r?Jm(r):null;if(null!=_){var T="y"===_?"height":"width";switch(a){case su:m[_]=m[_]-(n[T]/2-e[T]/2);break;case Ud:m[_]=m[_]+(n[T]/2-e[T]/2)}}return m}function DM(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function kM(t,n){return n.reduce(function(e,i){return e[i]=t,e},{})}function e1(t,n){void 0===n&&(n={});var i=n.placement,r=void 0===i?t.placement:i,a=n.boundary,c=void 0===a?"clippingParents":a,d=n.rootBoundary,m=void 0===d?bM:d,_=n.elementContext,T=void 0===_?Hd:_,A=n.altBoundary,q=void 0!==A&&A,Q=n.padding,te=void 0===Q?0:Q,oe=DM("number"!=typeof te?te:kM(te,Ld)),be=t.rects.popper,ce=t.elements[q?T===Hd?"reference":Hd:T],ne=function KO(t,n,e){var i="clippingParents"===n?function YO(t){var n=Gd(x0(t)),i=["absolute","fixed"].indexOf(Ys(t).position)>=0&&Lo(t)?zd(t):t;return lu(i)?n.filter(function(r){return lu(r)&&TM(r,i)&&"body"!==Ms(r)}):[]}(t):[].concat(n),r=[].concat(i,[e]),c=r.reduce(function(d,m){var _=MM(t,m);return d.top=Yl(_.top,d.top),d.right=M0(_.right,d.right),d.bottom=M0(_.bottom,d.bottom),d.left=Yl(_.left,d.left),d},MM(t,r[0]));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}(lu(ce)?ce:ce.contextElement||bl(t.elements.popper),c,m),Ae=uu(t.elements.reference),Ue=xM({reference:Ae,element:be,strategy:"absolute",placement:r}),bt=Qm(Object.assign({},be,Ue)),nt=T===Hd?bt:Ae,pt={top:ne.top-nt.top+oe.top,bottom:nt.bottom-ne.bottom+oe.bottom,left:ne.left-nt.left+oe.left,right:nt.right-ne.right+oe.right},lt=t.modifiersData.offset;if(T===Hd&&lt){var kt=lt[r];Object.keys(pt).forEach(function(At){var Rt=[rs,ns].indexOf(At)>=0?1:-1,Bt=[_o,ns].indexOf(At)>=0?"y":"x";pt[At]+=kt[Bt]*Rt})}return pt}const eV={name:"flip",enabled:!0,phase:"main",fn:function JO(t){var n=t.state,e=t.options,i=t.name;if(!n.modifiersData[i]._skip){for(var r=e.mainAxis,a=void 0===r||r,c=e.altAxis,d=void 0===c||c,m=e.fallbackPlacements,_=e.padding,T=e.boundary,A=e.rootBoundary,q=e.altBoundary,Q=e.flipVariations,te=void 0===Q||Q,oe=e.allowedAutoPlacements,de=n.options.placement,be=Ts(de),ne=m||(be!==de&&te?function QO(t){if(Ts(t)===Xm)return[];var n=T0(t);return[mM(t),n,mM(n)]}(de):[T0(de)]),Ae=[de].concat(ne).reduce(function(Ai,Ki){return Ai.concat(Ts(Ki)===Xm?function ZO(t,n){void 0===n&&(n={});var r=n.boundary,a=n.rootBoundary,c=n.padding,d=n.flipVariations,m=n.allowedAutoPlacements,_=void 0===m?yM:m,T=du(n.placement),A=T?d?_M:_M.filter(function(te){return du(te)===T}):Ld,q=A.filter(function(te){return _.indexOf(te)>=0});0===q.length&&(q=A);var Q=q.reduce(function(te,oe){return te[oe]=e1(t,{placement:oe,boundary:r,rootBoundary:a,padding:c})[Ts(oe)],te},{});return Object.keys(Q).sort(function(te,oe){return Q[te]-Q[oe]})}(n,{placement:Ki,boundary:T,rootBoundary:A,padding:_,flipVariations:te,allowedAutoPlacements:oe}):Ki)},[]),Ue=n.rects.reference,bt=n.rects.popper,nt=new Map,pt=!0,lt=Ae[0],kt=0;kt<Ae.length;kt++){var At=Ae[kt],Rt=Ts(At),Bt=du(At)===su,jt=[_o,ns].indexOf(Rt)>=0,Ui=jt?"width":"height",Ht=e1(n,{placement:At,boundary:T,rootBoundary:A,altBoundary:q,padding:_}),ai=jt?Bt?rs:yo:Bt?ns:_o;Ue[Ui]>bt[Ui]&&(ai=T0(ai));var wi=T0(ai),yi=[];if(a&&yi.push(Ht[Rt]<=0),d&&yi.push(Ht[ai]<=0,Ht[wi]<=0),yi.every(function(Ai){return Ai})){lt=At,pt=!1;break}nt.set(At,yi)}if(pt)for(var fe=function(Ki){var ti=Ae.find(function(en){var Nt=nt.get(en);if(Nt)return Nt.slice(0,Ki).every(function(Sn){return Sn})});if(ti)return lt=ti,"break"},oi=te?3:1;oi>0&&"break"!==fe(oi);oi--);n.placement!==lt&&(n.modifiersData[i]._skip=!0,n.placement=lt,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function jd(t,n,e){return Yl(t,M0(n,e))}function t1(t){var n=uu(t),e=t.offsetWidth,i=t.offsetHeight;return Math.abs(n.width-e)<=1&&(e=n.width),Math.abs(n.height-i)<=1&&(i=n.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:i}}const rV={name:"preventOverflow",enabled:!0,phase:"main",fn:function nV(t){var n=t.state,e=t.options,i=t.name,r=e.mainAxis,a=void 0===r||r,c=e.altAxis,d=void 0!==c&&c,q=e.tether,Q=void 0===q||q,te=e.tetherOffset,oe=void 0===te?0:te,de=e1(n,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),be=Ts(n.placement),ce=du(n.placement),ne=!ce,Ae=Jm(be),Ue=function tV(t){return"x"===t?"y":"x"}(Ae),bt=n.modifiersData.popperOffsets,nt=n.rects.reference,pt=n.rects.popper,lt="function"==typeof oe?oe(Object.assign({},n.rects,{placement:n.placement})):oe,kt="number"==typeof lt?{mainAxis:lt,altAxis:lt}:Object.assign({mainAxis:0,altAxis:0},lt),At=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,Rt={x:0,y:0};if(bt){if(a){var Bt,jt="y"===Ae?_o:yo,Ui="y"===Ae?ns:rs,Ht="y"===Ae?"height":"width",ai=bt[Ae],wi=ai+de[jt],yi=ai-de[Ui],Ze=Q?-pt[Ht]/2:0,fe=ce===su?nt[Ht]:pt[Ht],oi=ce===su?-pt[Ht]:-nt[Ht],fi=n.elements.arrow,Ai=Q&&fi?t1(fi):{width:0,height:0},Ki=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ti=Ki[jt],en=Ki[Ui],Nt=jd(0,nt[Ht],Ai[Ht]),Sn=ne?nt[Ht]/2-Ze-Nt-ti-kt.mainAxis:fe-Nt-ti-kt.mainAxis,pr=ne?-nt[Ht]/2+Ze+Nt+en+kt.mainAxis:oi+Nt+en+kt.mainAxis,Bn=n.elements.arrow&&zd(n.elements.arrow),un=null!=(Bt=null==At?void 0:At[Ae])?Bt:0,hn=ai+pr-un,dn=jd(Q?M0(wi,ai+Sn-un-(Bn?"y"===Ae?Bn.clientTop||0:Bn.clientLeft||0:0)):wi,ai,Q?Yl(yi,hn):yi);bt[Ae]=dn,Rt[Ae]=dn-ai}if(d){var Ar,Hi=bt[Ue],pi="y"===Ue?"height":"width",Gn=Hi+de["x"===Ae?_o:yo],tn=Hi-de["x"===Ae?ns:rs],nn=-1!==[_o,yo].indexOf(be),gr=null!=(Ar=null==At?void 0:At[Ue])?Ar:0,Qn=nn?Gn:Hi-nt[pi]-pt[pi]-gr+kt.altAxis,Vn=nn?Hi+nt[pi]+pt[pi]-gr-kt.altAxis:tn,On=Q&&nn?function iV(t,n,e){var i=jd(t,n,e);return i>e?e:i}(Qn,Hi,Vn):jd(Q?Qn:Gn,Hi,Q?Vn:tn);bt[Ue]=On,Rt[Ue]=On-Hi}n.modifiersData[i]=Rt}},requiresIfExists:["offset"]},lV={name:"arrow",enabled:!0,phase:"main",fn:function oV(t){var n,e=t.state,i=t.name,r=t.options,a=e.elements.arrow,c=e.modifiersData.popperOffsets,d=Ts(e.placement),m=Jm(d),T=[yo,rs].indexOf(d)>=0?"height":"width";if(a&&c){var A=function(n,e){return DM("number"!=typeof(n="function"==typeof n?n(Object.assign({},e.rects,{placement:e.placement})):n)?n:kM(n,Ld))}(r.padding,e),q=t1(a),Q="y"===m?_o:yo,te="y"===m?ns:rs,oe=e.rects.reference[T]+e.rects.reference[m]-c[m]-e.rects.popper[T],de=c[m]-e.rects.reference[m],be=zd(a),ce=be?"y"===m?be.clientHeight||0:be.clientWidth||0:0,bt=ce/2-q[T]/2+(oe/2-de/2),nt=jd(A[Q],bt,ce-q[T]-A[te]);e.modifiersData[i]=((n={})[m]=nt,n.centerOffset=nt-bt,n)}},effect:function sV(t){var n=t.state,i=t.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=n.elements.popper.querySelector(r))||!TM(n.elements.popper,r)||(n.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fV(t,n,e){void 0===e&&(e=!1);var i=Lo(n),r=Lo(n)&&function dV(t){var n=t.getBoundingClientRect(),e=cu(n.width)/t.offsetWidth||1,i=cu(n.height)/t.offsetHeight||1;return 1!==e||1!==i}(n),a=bl(n),c=uu(t,r),d={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(i||!i&&!e)&&(("body"!==Ms(n)||Zm(a))&&(d=function uV(t){return t!==as(t)&&Lo(t)?function cV(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):Ym(t)}(n)),Lo(n)?((m=uu(n,!0)).x+=n.clientLeft,m.y+=n.clientTop):a&&(m.x=Km(a))),{x:c.left+d.scrollLeft-m.x,y:c.top+d.scrollTop-m.y,width:c.width,height:c.height}}function hV(t){var n=new Map,e=new Set,i=[];function r(a){e.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(d){if(!e.has(d)){var m=n.get(d);m&&r(m)}}),i.push(a)}return t.forEach(function(a){n.set(a.name,a)}),t.forEach(function(a){e.has(a.name)||r(a)}),i}function gV(t){var n;return function(){return n||(n=new Promise(function(e){Promise.resolve().then(function(){n=void 0,e(t())})})),n}}var AM={placement:"bottom",modifiers:[],strategy:"absolute"};function PM(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return!n.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function mV(t){void 0===t&&(t={});var e=t.defaultModifiers,i=void 0===e?[]:e,r=t.defaultOptions,a=void 0===r?AM:r;return function(d,m,_){void 0===_&&(_=a);var T={placement:"bottom",orderedModifiers:[],options:Object.assign({},AM,a),modifiersData:{},elements:{reference:d,popper:m},attributes:{},styles:{}},A=[],q=!1,Q={state:T,setOptions:function(be){var ce="function"==typeof be?be(T.options):be;oe(),T.options=Object.assign({},a,T.options,ce),T.scrollParents={reference:lu(d)?Gd(d):d.contextElement?Gd(d.contextElement):[],popper:Gd(m)};var ne=function pV(t){var n=hV(t);return zO.reduce(function(e,i){return e.concat(n.filter(function(r){return r.phase===i}))},[])}(function vV(t){var n=t.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(n).map(function(e){return n[e]})}([].concat(i,T.options.modifiers)));return T.orderedModifiers=ne.filter(function(At){return At.enabled}),function te(){T.orderedModifiers.forEach(function(de){var ce=de.options,Ae=de.effect;if("function"==typeof Ae){var Ue=Ae({state:T,name:de.name,instance:Q,options:void 0===ce?{}:ce});A.push(Ue||function(){})}})}(),Q.update()},forceUpdate:function(){if(!q){var be=T.elements,ce=be.reference,ne=be.popper;if(PM(ce,ne)){T.rects={reference:fV(ce,zd(ne),"fixed"===T.options.strategy),popper:t1(ne)},T.reset=!1,T.placement=T.options.placement,T.orderedModifiers.forEach(function(At){return T.modifiersData[At.name]=Object.assign({},At.data)});for(var Ue=0;Ue<T.orderedModifiers.length;Ue++)if(!0!==T.reset){var bt=T.orderedModifiers[Ue],nt=bt.fn,pt=bt.options;"function"==typeof nt&&(T=nt({state:T,options:void 0===pt?{}:pt,name:bt.name,instance:Q})||T)}else T.reset=!1,Ue=-1}}},update:gV(function(){return new Promise(function(de){Q.forceUpdate(),de(T)})}),destroy:function(){oe(),q=!0}};if(!PM(d,m))return Q;function oe(){A.forEach(function(de){return de()}),A=[]}return Q.setOptions(_).then(function(de){!q&&_.onFirstUpdate&&_.onFirstUpdate(de)}),Q}}var R0={passive:!0},SV={top:"auto",right:"auto",bottom:"auto",left:"auto"};function EM(t){var n,e=t.popper,i=t.popperRect,r=t.placement,a=t.variation,c=t.offsets,d=t.position,m=t.gpuAcceleration,_=t.adaptive,T=t.roundOffsets,A=t.isFixed,q=c.x,Q=void 0===q?0:q,te=c.y,oe=void 0===te?0:te,de="function"==typeof T?T({x:Q,y:oe}):{x:Q,y:oe};Q=de.x,oe=de.y;var be=c.hasOwnProperty("x"),ce=c.hasOwnProperty("y"),ne=yo,Ae=_o,Ue=window;if(_){var bt=zd(e),nt="clientHeight",pt="clientWidth";bt===as(e)&&"static"!==Ys(bt=bl(e)).position&&"absolute"===d&&(nt="scrollHeight",pt="scrollWidth"),(r===_o||(r===yo||r===rs)&&a===Ud)&&(Ae=ns,oe-=(A&&Ue.visualViewport?Ue.visualViewport.height:bt[nt])-i.height,oe*=m?1:-1),r!==yo&&(r!==_o&&r!==ns||a!==Ud)||(ne=rs,Q-=(A&&Ue.visualViewport?Ue.visualViewport.width:bt[pt])-i.width,Q*=m?1:-1)}var Bt,At=Object.assign({position:d},_&&SV),Rt=!0===T?function CV(t){var e=t.y,r=window.devicePixelRatio||1;return{x:cu(t.x*r)/r||0,y:cu(e*r)/r||0}}({x:Q,y:oe}):{x:Q,y:oe};return Q=Rt.x,oe=Rt.y,Object.assign({},At,m?((Bt={})[Ae]=ce?"0":"",Bt[ne]=be?"0":"",Bt.transform=(Ue.devicePixelRatio||1)<=1?"translate("+Q+"px, "+oe+"px)":"translate3d("+Q+"px, "+oe+"px, 0)",Bt):((n={})[Ae]=ce?oe+"px":"",n[ne]=be?Q+"px":"",n.transform="",n))}var kV=mV({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function bV(t){var n=t.state,e=t.instance,i=t.options,r=i.scroll,a=void 0===r||r,c=i.resize,d=void 0===c||c,m=as(n.elements.popper),_=[].concat(n.scrollParents.reference,n.scrollParents.popper);return a&&_.forEach(function(T){T.addEventListener("scroll",e.update,R0)}),d&&m.addEventListener("resize",e.update,R0),function(){a&&_.forEach(function(T){T.removeEventListener("scroll",e.update,R0)}),d&&m.removeEventListener("resize",e.update,R0)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function yV(t){var n=t.state;n.modifiersData[t.name]=xM({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function TV(t){var n=t.state,e=t.options,i=e.gpuAcceleration,r=void 0===i||i,a=e.adaptive,c=void 0===a||a,d=e.roundOffsets,m=void 0===d||d,T={placement:Ts(n.placement),variation:du(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:r,isFixed:"fixed"===n.options.strategy};null!=n.modifiersData.popperOffsets&&(n.styles.popper=Object.assign({},n.styles.popper,EM(Object.assign({},T,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:c,roundOffsets:m})))),null!=n.modifiersData.arrow&&(n.styles.arrow=Object.assign({},n.styles.arrow,EM(Object.assign({},T,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function xV(t){var n=t.state;Object.keys(n.elements).forEach(function(e){var i=n.styles[e]||{},r=n.attributes[e]||{},a=n.elements[e];!Lo(a)||!Ms(a)||(Object.assign(a.style,i),Object.keys(r).forEach(function(c){var d=r[c];!1===d?a.removeAttribute(c):a.setAttribute(c,!0===d?"":d)}))})},effect:function RV(t){var n=t.state,e={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,e.popper),n.styles=e,n.elements.arrow&&Object.assign(n.elements.arrow.style,e.arrow),function(){Object.keys(n.elements).forEach(function(i){var r=n.elements[i],a=n.attributes[i]||{},d=Object.keys(n.styles.hasOwnProperty(i)?n.styles[i]:e[i]).reduce(function(m,_){return m[_]="",m},{});!Lo(r)||!Ms(r)||(Object.assign(r.style,d),Object.keys(a).forEach(function(m){r.removeAttribute(m)}))})}},requires:["computeStyles"]}]});const EV={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function PV(t){var n=t.state,i=t.name,r=t.options.offset,a=void 0===r?[0,0]:r,c=yM.reduce(function(T,A){return T[A]=function AV(t,n,e){var i=Ts(t),r=[yo,_o].indexOf(i)>=0?-1:1,a="function"==typeof e?e(Object.assign({},n,{placement:t})):e,c=a[0],d=a[1];return c=c||0,d=(d||0)*r,[yo,rs].indexOf(i)>=0?{x:d,y:c}:{x:c,y:d}}(A,n.rects,a),T},{}),d=c[n.placement],_=d.y;null!=n.modifiersData.popperOffsets&&(n.modifiersData.popperOffsets.x+=d.x,n.modifiersData.popperOffsets.y+=_),n.modifiersData[i]=c}},i1=["*"],n9=["dialog"];function O9(t,n){1&t&&F(0),2&t&&Kt(K(2).title)}function V9(t,n){}function N9(t,n){if(1&t&&(D(0,"h3",3),pe(1,O9,1,1,"ng-template",null,4,ni),pe(3,V9,0,0,"ng-template",5),M()),2&t){const e=Qt(2),i=K();V(3),Y("ngTemplateOutlet",i.isTitleTemplate()?i.title:e)("ngTemplateOutletContext",i.context)}}function F9(t,n){if(1&t&&(D(0,"span"),Vs(1,2),Di(2,"percent"),M()),2&t){const e=K();V(2),oh(ch(2,1,e.getValue()/e.max)),function Ug(t){!function Wk(t,n,e){if(Ju>0){const i=t.data[e];Hw(t,n,Array.isArray(i)?i:i.update,Es()-Ju-1,Qu)}Qu=0,Ju=0}(Tn(),Et(),t+20)}(1)}}function xs(t){return!isNaN(function D0(t){return parseInt(`${t}`,10)}(t))}function Kl(t){return null!=t}function fu(t){return(t||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let n=this;if(!document.documentElement.contains(n))return null;do{if(n.matches(t))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null});const OM={animation:!0,transitionTimerDelayMs:5},J9=()=>{},{transitionTimerDelayMs:eN}=OM,qd=new Map,Za=(t,n,e,i)=>{let r=i.context||{};const a=qd.get(n);if(a)switch(i.runningTransition){case"continue":return dt;case"stop":t.run(()=>a.transition$.complete()),r=Object.assign(a.context,r),qd.delete(n)}const c=e(n,i.animation,r)||J9;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return t.run(()=>c()),Gi(void 0).pipe(function Z9(t){return n=>new b(e=>n.subscribe({next:c=>t.run(()=>e.next(c)),error:c=>t.run(()=>e.error(c)),complete:()=>t.run(()=>e.complete())}))}(t));const d=new $,m=new $,_=d.pipe(function MO(...t){return n=>_d(n,Gi(...t))}(!0));qd.set(n,{transition$:d,complete:()=>{m.next(),m.complete()},context:r});const T=function Q9(t){const{transitionDelay:n,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(n)+parseFloat(e))}(n);return t.runOutsideAngular(()=>{const A=Ka(n,"transitionend").pipe(pa(_),Ca(({target:Q})=>Q===n));hM(qm(T+eN).pipe(pa(_)),A,m).pipe(pa(_)).subscribe(()=>{qd.delete(n),t.run(()=>{c(),d.next(),d.complete()})})}),d.asObservable()};let $d=(()=>{class t{constructor(){this.animation=OM.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),HM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io]]}),t})(),GM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io]]}),t})(),jM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({}),t})(),WM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io]]}),t})(),XM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({}),t})();var ga=(()=>{return(t=ga||(ga={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",ga;var t})();const A0=(t,n)=>!!n&&n.some(e=>e.contains(t)),YM=(t,n)=>!n||null!=function K9(t,n){return n&&void 0!==t.closest?t.closest(n):null}(t,n),bN="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function KM(t,n,e,i,r,a,c,d){e&&t.runOutsideAngular((t=>bN?()=>setTimeout(()=>t(),100):t)(()=>{const _=Ka(n,"keydown").pipe(pa(r),Ca(q=>q.which===ga.Escape),Va(q=>q.preventDefault())),T=Ka(n,"mousedown").pipe(Pe(q=>{const Q=q.target;return 2!==q.button&&!A0(Q,c)&&("inside"===e?A0(Q,a)&&YM(Q,d):"outside"===e?!A0(Q,a):YM(Q,d)||!A0(Q,a))}),pa(r)),A=Ka(n,"mouseup").pipe(Wm(T),Ca(([q,Q])=>Q),vM(0),pa(r));hM([_.pipe(Pe(q=>0)),A.pipe(Pe(q=>1))]).subscribe(q=>t.run(()=>i(q)))}))}const ZM=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function QM(t){const n=Array.from(t.querySelectorAll(ZM)).filter(e=>-1!==e.tabIndex);return[n[0],n[n.length-1]]}const wN=/\s+/,SN=/  +/gi,CN=/^start/,TN=/^end/,MN=/-(top|left)$/,xN=/-(bottom|right)$/,DN=/^left/,kN=/^right/,AN=/^start/,PN=/^end/;function JM({placement:t,baseClass:n}){let e=Array.isArray(t)?t:t.split(wN),r=e.findIndex(m=>"auto"===m);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(m){null==e.find(_=>-1!==_.search("^"+m))&&e.splice(r++,1,m)});const a=e.map(m=>function RN(t){return t.replace(CN,"left").replace(TN,"right").replace(MN,"-start").replace(xN,"-end")}(m));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!n,phase:"write",fn({state:m}){const _=new RegExp(n+"-[a-z]+","gi"),T=m.elements.popper,A=m.placement;let q=T.className;q=q.replace(_,""),q+=` ${function EN(t,n){let[e,i]=n.split("-");const r=e.replace(DN,"start").replace(kN,"end");let a=[r];if(i){let c=i;("left"===e||"right"===e)&&(c=c.replace(AN,"top").replace(PN,"bottom")),a.push(`${r}-${c}`)}return t&&(a=a.map(c=>`${t}-${c}`)),a.join(" ")}(n,A)}`,q=q.trim().replace(SN," "),T.className=q}},eV,rV,lV,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function ex(t){return t}function tx(){let t=null;return{createPopper(n){if(!t){let i=(n.updatePopperOptions||ex)(JM(n));t=kV(n.hostElement,n.targetElement,i)}},update(){t&&t.update()},setOptions(n){if(t){let i=(n.updatePopperOptions||ex)(JM(n));t.setOptions(i)}},destroy(){t&&(t.destroy(),t=null)}}}new Date(1882,10,12),new Date(2174,10,25);let sx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io,WC]]}),t})(),HN=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),lx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Yt({type:t,selectors:[["",8,"navbar"]]}),t})(),d1=(()=>{class t{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(Me(xn))},t.\u0275dir=Yt({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,i){2&e&&Ii("disabled",i.disabled)},inputs:{disabled:"disabled"}}),t})(),B0=(()=>{class t{constructor(e,i){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(Me(En(()=>pu)),Me(xn))},t.\u0275dir=Yt({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,i,r){if(1&e&&ea(r,d1,4),2&e){let a;mn(a=bn())&&(i.menuItems=a)}},hostVars:5,hostBindings:function(e,i){1&e&&_e("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return i.dropdown.onKeyDown(a)})("keydown.Space",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&(lr("data-popper",i.placement),Ii("dropdown-menu",!0)("show",i.dropdown.isOpen()))}}),t})(),O0=(()=>{class t{constructor(e,i){this.dropdown=e,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(Me(En(()=>pu)),Me(xn))},t.\u0275dir=Yt({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){2&e&&lr("aria-expanded",i.dropdown.isOpen())}}),t})(),f1=(()=>{class t extends O0{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(Me(En(()=>pu)),Me(xn))},t.\u0275dir=Yt({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){1&e&&_e("click",function(){return i.dropdown.toggle()})("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&lr("aria-expanded",i.dropdown.isOpen())},features:[mr([{provide:O0,useExisting:En(()=>t)}]),Yn]}),t})(),pu=(()=>{class t{constructor(e,i,r,a,c,d,m){this._changeDetector=e,this._document=r,this._ngZone=a,this._elementRef=c,this._renderer=d,this._closed$=new $,this._bodyContainer=null,this._positioning=tx(),this._open=!1,this.openChange=new di,this.placement=i.placement,this.container=i.container,this.autoClose=i.autoClose,this.display=m?"static":"dynamic",this._zoneSubscription=a.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(Ni(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:i,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(i,r)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.onStable.pipe(Ni(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()})))}_setCloseHandlers(){KM(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._positioning.destroy(),this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const i=e.which,r=this._getMenuElements();let a=-1,c=null;const d=this._isEventFromToggle(e);if(!d&&r.length&&r.forEach((m,_)=>{m.contains(e.target)&&(c=m),m===this._document.activeElement&&(a=_)}),i!==ga.Space&&i!==ga.Enter){if(i!==ga.Tab){if(d||c){if(this.open(),r.length){switch(i){case ga.ArrowDown:a=Math.min(a+1,r.length-1);break;case ga.ArrowUp:if(this._isDropup()&&-1===a){a=r.length-1;break}a=Math.max(a-1,0);break;case ga.Home:a=0;break;case ga.End:a=r.length-1}r[a].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const m=this._menu.nativeElement.querySelectorAll(ZM);e.shiftKey&&e.target===m[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===m[m.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else Ka(e.target,"focusout").pipe(Ni(1)).subscribe(({relatedTarget:m})=>{this._elementRef.nativeElement.contains(m)||this.close()})}}else c&&(!0===this.autoClose||"inside"===this.autoClose)&&Ka(c,"click").pipe(Ni(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(i=>!i.disabled).map(i=>i.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const i=this._renderer,r=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||i.createElement("div");i.setStyle(a,"position","absolute"),i.setStyle(r,"position","static"),i.setStyle(a,"z-index","1050"),i.appendChild(a,r),i.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,i){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(i&&this._renderer.removeClass(r,i),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const i=this._menu;if(i){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,a=this._elementRef.nativeElement;r.removeClass(a,"dropup"),r.removeClass(a,"dropdown");const{nativeElement:c}=i;"static"===this.display?(i.placement=null,r.setAttribute(c,"data-bs-popper","static")):(i.placement=e,r.removeAttribute(c,"data-bs-popper"));const d=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(a,d);const m=this._bodyContainer;m&&(r.removeClass(m,"dropup"),r.removeClass(m,"dropdown"),r.addClass(m,d))}}}return t.\u0275fac=function(e){return new(e||t)(Me(go),Me(HN),Me(oa),Me(br),Me(xn),Me(Ao),Me(lx,8))},t.\u0275dir=Yt({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(e,i,r){if(1&e&&(ea(r,B0,5),ea(r,O0,5)),2&e){let a;mn(a=bn())&&(i._menu=a.first),mn(a=bn())&&(i._anchor=a.first)}},hostVars:2,hostBindings:function(e,i){2&e&&Ii("show",i.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[ra]}),t})(),cx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({}),t})();class ec{constructor(n,e,i){this.nodes=n,this.viewRef=e,this.componentRef=i}}class GN{constructor(n,e,i,r,a,c){this._type=n,this._injector=e,this._viewContainerRef=i,this._renderer=r,this._ngZone=a,this._applicationRef=c,this._windowRef=null,this._contentRef=null}open(n,e,i=!1){this._windowRef||(this._contentRef=this._getContentRef(n,e),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,a=this._ngZone.onStable.pipe(Ni(1),at(()=>Za(this._ngZone,r,({classList:c})=>c.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:a}}close(n=!1){return this._windowRef?Za(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:n,runningTransition:"stop"}).pipe(Va(()=>{var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):Gi(void 0)}_getContentRef(n,e){if(n){if(n instanceof Or){const i=n.createEmbeddedView(e);return this._applicationRef.attachView(i),new ec([i.rootNodes],i)}return new ec([[this._renderer.createText(`${n}`)]])}return new ec([])}}let zN=(()=>{class t{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Ni(1)).subscribe(()=>{Za(this._zone,this._el.nativeElement,(e,i)=>{i&&fu(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Za(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(Me(xn),Me(br))},t.\u0275cmp=mi({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(ol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Ii("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),t})();class ux{close(n){}dismiss(n){}}class jN{constructor(n,e,i,r){this._windowCmptRef=n,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new $,this._dismissed=new $,this._hidden=new $,n.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,c)=>{this._resolve=a,this._reject=c}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(pa(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(pa(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function Y9(t){return t&&t.then}(e)?!1!==e&&this._dismiss(n):e.then(i=>{!1!==i&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Gi(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),C0(n,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Kd=(()=>{return(t=Kd||(Kd={}))[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",Kd;var t})();let qN=(()=>{class t{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new $,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new di,this.shown=new $,this.hidden=new $}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Ni(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},c=C0(Za(this._zone,e,()=>e.classList.remove("show"),i),Za(this._zone,this._dialogEl.nativeElement,()=>{},i));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const e={animation:this.animation,runningTransition:"continue"};C0(Za(this._zone,this._elRef.nativeElement,(a,c)=>{c&&fu(a),a.classList.add("show")},e),Za(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Ka(e,"keydown").pipe(pa(this._closed$),Ca(r=>r.which===ga.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Kd.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Ka(this._dialogEl.nativeElement,"mousedown").pipe(pa(this._closed$),Va(()=>i=!1),zs(()=>Ka(e,"mouseup").pipe(pa(this._closed$),Ni(1))),Ca(({target:r})=>e===r)).subscribe(()=>{i=!0}),Ka(e,"click").pipe(pa(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(Kd.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=QM(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Za(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(Me(oa),Me(xn),Me(br))},t.\u0275cmp=mi({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&Ba(n9,7),2&e){let r;mn(r=bn())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(lr("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),ol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Ii("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:i1,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(Kf(),D(0,"div",0,1)(2,"div",2),Zf(3),M()()),2&e&&ol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),$N=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:a,paddingRight:c}=r;if(e>0){const d=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${d+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=c),r.overflow=a}}}return t.\u0275fac=function(e){return new(e||t)(Ft(oa))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),WN=(()=>{class t{constructor(e,i,r,a,c,d){this._applicationRef=e,this._injector=i,this._document=r,this._scrollBar=a,this._rendererFactory=c,this._ngZone=d,this._activeWindowCmptHasChanged=new $,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new di,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const m=this._windowCmpts[this._windowCmpts.length-1];((t,n,e,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=Ka(n,"focusin").pipe(pa(e),Pe(a=>a.target));Ka(n,"keydown").pipe(pa(e),Ca(a=>a.which===ga.Tab),Wm(r)).subscribe(([a,c])=>{const[d,m]=QM(n);(c===d||c===n)&&a.shiftKey&&(m.focus(),a.preventDefault()),c===m&&!a.shiftKey&&(d.focus(),a.preventDefault())}),i&&Ka(n,"click").pipe(pa(e),Wm(r),Pe(a=>a[1])).subscribe(a=>a.focus())})})(0,m.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(m.location.nativeElement)}})}open(e,i,r,a){const c=a.container instanceof HTMLElement?a.container:Kl(a.container)?this._document.querySelector(a.container):this._document.body,d=this._rendererFactory.createRenderer(null,null),m=this._scrollBar.hide(),_=()=>{this._modalRefs.length||(d.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!c)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const T=new ux,A=this._getContentRef(e,a.injector||i,r,T,a);let q=!1!==a.backdrop?this._attachBackdrop(e,c):void 0,Q=this._attachWindowComponent(e,c,A),te=new jN(Q,A,q,a.beforeDismiss);return this._registerModalRef(te),this._registerWindowCmpt(Q),te.result.then(m,m),te.result.then(_,_),T.close=oe=>{te.close(oe)},T.dismiss=oe=>{te.dismiss(oe)},this._applyWindowOptions(Q.instance,a),1===this._modalRefs.length&&d.addClass(this._document.body,"modal-open"),q&&q.instance&&(this._applyBackdropOptions(q.instance,a),q.changeDetectorRef.detectChanges()),Q.changeDetectorRef.detectChanges(),te}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,i){let a=e.resolveComponentFactory(zN).create(this._injector);return this._applicationRef.attachView(a.hostView),i.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,i,r){let c=e.resolveComponentFactory(qN).create(this._injector,r.nodes);return this._applicationRef.attachView(c.hostView),i.appendChild(c.location.nativeElement),c}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{Kl(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{Kl(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,a,c){return r?r instanceof Or?this._createFromTemplateRef(r,a):function BM(t){return"string"==typeof t}(r)?this._createFromString(r):this._createFromComponent(e,i,r,a,c):new ec([])}_createFromTemplateRef(e,i){const a=e.createEmbeddedView({$implicit:i,close(c){i.close(c)},dismiss(c){i.dismiss(c)}});return this._applicationRef.attachView(a),new ec([a.rootNodes],a)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new ec([[i]])}_createFromComponent(e,i,r,a,c){const d=e.resolveComponentFactory(r),m=Jr.create({providers:[{provide:ux,useValue:a}],parent:i}),_=d.create(m),T=_.location.nativeElement;return c.scrollable&&T.classList.add("component-host-scrollable"),this._applicationRef.attachView(_.hostView),new ec([[T]],_.hostView,_)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(Ft(Bl),Ft(Jr),Ft(oa),Ft($N),Ft(qg),Ft(br))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),XN=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Ft($d))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ss=(()=>{class t{constructor(e,i,r,a){this._moduleCFR=e,this._injector=i,this._modalStack=r,this._config=a}open(e,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(Ft(Il),Ft(Jr),Ft(WN),Ft(XN))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),dx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({providers:[ss]}),t})(),gx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io]]}),t})(),Cx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io]]}),t})();class eF{constructor(n,e){this.open=n,this.close=e,e||(this.close=n)}isManual(){return"manual"===this.open||"manual"===this.close}}const tF={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},Tx=t=>t>0?vM(t):n=>n;let oF=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Ft($d))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),sF=0;function lF(t){return t.modifiers.push(EV,{name:"offset",options:{offset:()=>[0,12]}}),t}let cF=(()=>{class t{isTitleTemplate(){return this.title instanceof Or}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=mi({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,i){2&e&&(sl("id",i.id),ol("popover"+(i.popoverClass?" "+i.popoverClass:"")),Ii("fade",i.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:i1,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(Kf(),he(0,"div",0),pe(1,N9,4,2,"h3",1),D(2,"div",2),Zf(3),M()),2&e&&(V(1),Y("ngIf",i.title))},directives:[on,Qc],encapsulation:2,changeDetection:0}),t})(),no=(()=>{class t{constructor(e,i,r,a,c,d,m,_,T){this._elementRef=e,this._renderer=i,this._ngZone=d,this._document=m,this._changeDetector=_,this.shown=new di,this.hidden=new di,this._ngbPopoverWindowId="ngb-popover-"+sF++,this._windowRef=null,this._positioning=tx(),this.animation=c.animation,this.autoClose=c.autoClose,this.placement=c.placement,this.triggers=c.triggers,this.container=c.container,this.disablePopover=c.disablePopover,this.popoverClass=c.popoverClass,this.openDelay=c.openDelay,this.closeDelay=c.closeDelay,this._popupService=new GN(cF,r,a,i,this._ngZone,T),this._zoneSubscription=d.onStable.subscribe(()=>{this._positioning.update()})}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:i,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=i,this._windowRef.instance.animation=this.animation,this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(Ni(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:lF})}),KM(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function aF(t,n,e,i,r,a,c=0,d=0){const m=function iF(t,n=tF){const e=(t||"").trim();if(0===e.length)return[];const i=e.split(/\s+/).map(a=>a.split(":")).map(a=>{let c=n[a[0]]||a;return new eF(c[0],c[1])}),r=i.filter(a=>a.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(e);if(1===m.length&&m[0].isManual())return()=>{};const _=function nF(t,n,e,i){return new b(r=>{const a=[],c=()=>r.next(!0),d=()=>r.next(!1),m=()=>r.next(!i());return e.forEach(_=>{_.open===_.close?a.push(t.listen(n,_.open,m)):a.push(t.listen(n,_.open,c),t.listen(n,_.close,d))}),()=>{a.forEach(_=>_())}})}(t,n,m,i).pipe(function rF(t,n,e){return i=>{let r=null;const a=i.pipe(Pe(m=>({open:m})),Ca(m=>{const _=e();return _===m.open||r&&r.open!==_?(r&&r.open!==m.open&&(r=null),!1):(r=m,!0)}),Wn());return $n(a.pipe(Ca(m=>m.open),Tx(t)),a.pipe(Ca(m=>!m.open),Tx(n))).pipe(Ca(m=>m===r&&(r=null,m.open!==e())),Pe(m=>m.open))}}(c,d,i)).subscribe(T=>T?r():a());return()=>_.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:i,disablePopover:r,popoverClass:a}){a&&this.isOpen()&&(this._windowRef.instance.popoverClass=a.currentValue),(e||i||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(xn),Me(Ao),Me(Jr),Me(Po),Me(oF),Me(br),Me(oa),Me(go),Me(Bl))},t.\u0275dir=Yt({type:t,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[ra]}),t})(),Mx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io]]}),t})(),uF=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Zd=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!xs(e)||e<=0?100:e}get max(){return this._max}getValue(){return function IM(t,n,e=0){return Math.max(Math.min(t,n),e)}(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(Me(uF))},t.\u0275cmp=mi({type:t,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(e,i){2&e&&Yu("height",i.height)},inputs:{max:"max",animated:"animated",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},ngContentSelectors:i1,decls:3,vars:11,consts:function(){let n;return n=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],n]},template:function(e,i){1&e&&(Kf(),D(0,"div",0),pe(1,F9,3,3,"span",1),Zf(2),M()),2&e&&(function _w(t,n,e,i,r,a,c,d,m){Zo(uo,ys,Nc(Et(),t,n,e,i,r,a,c,d,m),!0)}("progress-bar",i.type?" bg-"+i.type:"","",i.textType?" text-"+i.textType:"","\n    ",i.animated?" progress-bar-animated":"","",i.striped?" progress-bar-striped":"",""),Yu("width",i.getPercentValue(),"%"),lr("aria-valuenow",i.getValue())("aria-valuemax",i.max),V(1),Y("ngIf",i.showValue))},directives:[on],pipes:[kS],encapsulation:2,changeDetection:0}),t})(),xx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io]]}),t})(),Rx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io]]}),t})(),Dx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io]]}),t})(),kx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io]]}),t})(),Ax=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({}),t})();new an("live announcer delay",{providedIn:"root",factory:function hF(){return 100}});let Px=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[[io]]}),t})();const pF=[HM,GM,jM,WM,XM,sx,cx,dx,gx,Cx,Mx,xx,Rx,Dx,kx,Ax,Px];let gF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t}),t.\u0275inj=Xn({imports:[pF,HM,GM,jM,WM,XM,sx,cx,dx,gx,Cx,Mx,xx,Rx,Dx,kx,Ax,Px]}),t})();function vF(t,n){if(1&t){const e=tt();D(0,"div",1),_e("click",function(){me(e);const r=K();return r.switchView(r.navigationEnum.incubator)}),D(1,"button",2),F(2,"Incubator"),M(),he(3,"hr"),M()}if(2&t){const e=K();V(1),Y("ngClass",e.selectedNavigation===e.navigationEnum.incubator?"active":"")}}const v1=function(t,n){return{active:t,tutorialActive:n}};let Ex=(()=>{class t{constructor(e,i,r,a){this.componentCommunicationService=e,this.lookupService=i,this.globalService=r,this.gameLoopService=a,this.viewChanged=new di,this.navigationEnum=Mi,this.selectedNavigation=0,this.tutorial3Active=!1,this.tutorial6Active=!1,this.tutorial9Active=!1}ngOnInit(){this.componentCommunicationService.getNewView().subscribe(e=>{this.viewChanged.emit(e),this.selectedNavigation=e}),this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack"),this.tutorialSubscription=this.gameLoopService.gameUpdateEvent.subscribe(e=>{var i,r;this.tutorial3Active=!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId,this.tutorial6Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||6!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(i=this.globalService.globalVar.animals.find(a=>a.type===Fe.Monkey))||void 0===i?void 0:i.isAvailable)),this.tutorial9Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||9!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(r=this.globalService.globalVar.animals.find(a=>a.type===Fe.Hare))||void 0===r?void 0:r.isAvailable)),this.globalService.globalVar.tutorials.tutorialCompleted&&this.tutorialSubscription.unsubscribe()})}switchView(e){this.selectedNavigation===Mi.shop&&this.componentCommunicationService.setShopView(Mi.shop,Fo.regular),this.selectedNavigation===Mi.barn&&this.componentCommunicationService.setBarnView(Mi.barn,0),this.selectedNavigation===Mi.animals&&this.componentCommunicationService.setAnimalView(Mi.animals,new Ti),this.viewChanged.emit(e),this.selectedNavigation=e,this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack")}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0)}}return t.\u0275fac=function(e){return new(e||t)(Me(qr),Me(yn),Me(ki),Me(jr))},t.\u0275cmp=mi({type:t,selectors:[["app-navigation"]],outputs:{viewChanged:"viewChanged"},decls:29,vars:17,consts:[[1,"navigation"],[1,"navSpace","clickableText",3,"click"],[1,"buttonAsText",3,"ngClass"],["class","navSpace clickableText",3,"click",4,"ngIf"],[1,"navSpace","clickableText"],[1,"buttonAsText",3,"ngClass","click"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1),_e("click",function(){return i.switchView(i.navigationEnum.barn)}),D(2,"button",2),F(3,"Barns"),M()(),he(4,"hr"),D(5,"div",1),_e("click",function(){return i.switchView(i.navigationEnum.raceselection)}),D(6,"button",2),F(7,"Races"),M()(),he(8,"hr"),D(9,"div",1),_e("click",function(){return i.switchView(i.navigationEnum.animals)}),D(10,"button",2),F(11,"Animals"),M()(),he(12,"hr"),D(13,"div",1),_e("click",function(){return i.switchView(i.navigationEnum.relayTeams)}),D(14,"button",2),F(15,"Relay Teams"),M()(),he(16,"hr"),D(17,"div",1),_e("click",function(){return i.switchView(i.navigationEnum.shop)}),D(18,"button",2),F(19,"Shop"),M()(),he(20,"hr"),pe(21,vF,4,1,"div",3),D(22,"div",4)(23,"button",5),_e("click",function(){return i.switchView(i.navigationEnum.resources)}),F(24,"Resources"),M()(),he(25,"hr"),D(26,"div",1),_e("click",function(){return i.switchView(i.navigationEnum.settings)}),D(27,"button",2),F(28,"Settings"),M()()()),2&e&&(V(2),Y("ngClass",ll(8,v1,i.selectedNavigation===i.navigationEnum.barn,i.tutorial6Active)),V(4),Y("ngClass",ll(11,v1,i.selectedNavigation===i.navigationEnum.raceselection,i.tutorial3Active)),V(4),Y("ngClass",ll(14,v1,i.selectedNavigation===i.navigationEnum.animals,i.tutorial9Active)),V(4),Y("ngClass",i.selectedNavigation===i.navigationEnum.relayTeams?"active":""),V(4),Y("ngClass",i.selectedNavigation===i.navigationEnum.shop?"active":""),V(3),Y("ngIf",i.incubatorAvailable),V(2),Y("ngClass",i.selectedNavigation===i.navigationEnum.resources?"active":""),V(4),Y("ngClass",i.selectedNavigation===i.navigationEnum.settings?"active":""))},directives:[_r,on],styles:[".navigation[_ngcontent-%COMP%]{height:100%;border-left:1px solid rgba(0,0,0,.1);padding-left:1rem;padding-top:1rem;background-color:var(--background-secondary);color:var(--foreground-default)}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}"]}),t})();function mF(t,n){if(1&t&&he(0,"div",15),2&t){const e=K();Y("innerHTML",e.getSanitizedHtml(e.latestVersionChanges),Si)}}function bF(t,n){if(1&t&&(D(0,"div")(1,"div",24)(2,"span",25),F(3),Di(4,"number"),M(),D(5,"span"),F(6),M()(),he(7,"br")(8,"div",26),D(9,"span"),he(10,"hr"),M()()),2&t){const e=n.$implicit,i=n.index,r=K(3);V(3),He("Version ",Yi(4,3,r.allVersions[i],"1.2-2"),""),V(3),He(" ",r.versionControlService.getDateForVersion(r.allVersions[i]),""),V(2),Y("innerHTML",r.getSanitizedHtml(e),Si)}}function _F(t,n){if(1&t&&(D(0,"div")(1,"div",21)(2,"div",22),pe(3,bF,11,6,"div",23),M()()()),2&t){const e=K(2);V(3),Y("ngForOf",e.changeLog)}}function yF(t,n){if(1&t){const e=tt();D(0,"div",16)(1,"div",17)(2,"h4",18),F(3,"Change Log"),M(),D(4,"button",19),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),pe(6,_F,4,1,"div",20),M()}if(2&t){const e=K();V(6),Y("ngIf",e.changeLog.length>0)}}let wF=(()=>{class t{constructor(e,i,r,a,c,d,m){this.lookupService=e,this.gameLoopService=i,this.globalService=r,this.componentCommunicationService=a,this.versionControlService=c,this.modalService=d,this.sanitizer=m}ngOnInit(){this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.latestVersionChanges=this.versionControlService.getLatestChanges(),this.changeLog=this.versionControlService.getAllChanges(),this.allVersions=this.versionControlService.gameVersions,this.gameLoopService.gameUpdateEvent.subscribe(e=>{this.globalService.globalVar.userIsRacing||(this.coinCount=this.lookupService.getCoins(),this.medalCount=this.lookupService.getMedals())})}getSanitizedHtml(e){return this.sanitizer.sanitize(vn.HTML,this.sanitizer.bypassSecurityTrustHtml(e))}changeView(e){this.componentCommunicationService.setNewView(e)}openChangeLog(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}}return t.\u0275fac=function(e){return new(e||t)(Me(yn),Me(jr),Me(ki),Me(qr),Me(jm),Me(ss),Me(dl))},t.\u0275cmp=mi({type:t,selectors:[["app-header"]],decls:26,vars:8,consts:[[1,"headerView"],[1,"gridContainer"],[1,"nameArea","keyword"],[1,"name"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"version","versionMargin","clickableText",3,"ngbPopover","click"],[1,"coins","keyword"],[1,"medals","keyword"],[1,"menu","keyword"],["ngbDropdown","",1,"d-inline-block","customDropdown"],["menuDropdown","ngbDropdown"],["type","button","id","menuDropdown","ngbDropdownToggle","",1,"btn","dropdown"],["ngbDropdownMenu","","aria-labelledby","menuDropdown",1,"dropdownItems"],[3,"viewChanged","click"],["latestVersionChangesContent",""],["content",""],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[4,"ngIf"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],[1,"flexDiv"],[1,"s4Heading"],[3,"innerHTML"]],template:function(e,i){if(1&e){const r=tt();D(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),F(4," Cultura "),M(),D(5,"span",4),_e("click",function(){me(r);const c=Qt(25);return i.openChangeLog(c)}),F(6),M()(),D(7,"div",5)(8,"span"),F(9),Di(10,"number"),M()(),D(11,"div",6)(12,"span"),F(13),Di(14,"number"),M()(),D(15,"div",7)(16,"div",8,9)(18,"button",10),F(19,"Menu"),M(),D(20,"div",11)(21,"app-navigation",12),_e("viewChanged",function(c){return i.changeView(c)})("click",function(){return me(r),Qt(17).close()}),M()()()()(),pe(22,mF,1,1,"ng-template",null,13,ni),pe(24,yF,7,1,"ng-template",null,14,ni),M()}if(2&e){const r=Qt(23);V(5),Y("ngbPopover",r),V(1),He(" v",i.version," "),V(3),He("Coins: ",ch(10,4,i.coinCount),""),V(4),He("Medals: ",ch(14,6,i.medalCount),"")}},directives:[no,pu,f1,B0,Ex,on,Vr],pipes:[ts],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name . coins ." ". name . medals ."}.nameArea[_ngcontent-%COMP%]{grid-area:name;justify-self:stretch}.name[_ngcontent-%COMP%]{font-size:2rem}.coins[_ngcontent-%COMP%]{grid-area:coins;justify-self:stretch}.medals[_ngcontent-%COMP%]{grid-area:medals;justify-self:stretch}.versionMargin[_ngcontent-%COMP%]{margin-left:.5rem}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}.dropdownItems[_ngcontent-%COMP%]{background-color:var(--background-secondary);color:var(--foreground-default)}.menu[_ngcontent-%COMP%]{display:none}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre-line}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.flexDiv[_ngcontent-%COMP%]{display:flex;justify-content:space-between}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 15% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name coins menu ." ". name medals menu ."}.menu[_ngcontent-%COMP%]{display:block;grid-area:menu;justify-self:stretch}.customDropdown[_ngcontent-%COMP%]{width:100%;text-align:center}}']}),t})();function SF(t,n){if(1&t&&(D(0,"strong"),F(1),M()),2&t){const e=K(3);V(1),He("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function CF(t,n){if(1&t&&(D(0,"h6",11)(1,"span"),F(2),M(),he(3,"br"),D(4,"span"),F(5),M()()),2&t){const e=K(3);Y("ngClass",e.colorConditional),V(2),Kt(e.associatedAnimalName),V(3),Kt(e.associatedAnimalType)}}function TF(t,n){if(1&t&&(D(0,"h6",11)(1,"span"),F(2),M()()),2&t){const e=K(3);Y("ngClass",e.colorConditional),V(2),Kt(e.associatedAnimalType)}}function MF(t,n){1&t&&(D(0,"div")(1,"em"),F(2,"Auto Breed "),D(3,"strong"),F(4,"ON"),M()()())}function xF(t,n){1&t&&(D(0,"div")(1,"em"),F(2,"At Max Breed XP"),M()())}const RF=function(t){return{floatingProgressTextAnimation:t}};function DF(t,n){if(1&t&&(D(0,"div",6)(1,"span"),F(2),pe(3,SF,2,1,"strong",7),M(),pe(4,CF,6,3,"h6",8),pe(5,TF,3,2,"h6",8),he(6,"br"),D(7,"p"),he(8,"ngb-progressbar",9),M(),D(9,"div",10),F(10),M(),he(11,"br"),pe(12,MF,5,0,"div",7),pe(13,xF,3,0,"div",7),M()),2&t){const e=K(2);V(2),He("",e.barnName," "),V(1),Y("ngIf",e.barn.barnUpgrades.barnLevel>0),V(1),Y("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),V(1),Y("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),V(3),Y("value",e.trainingProgressBarPercent),V(1),Y("ngClass",hi(9,RF,e.showTrainingAnimation)),V(1),He(" ",e.trainingCompleteText," "),V(2),Y("ngIf",e.autoBreedActive),V(1),Y("ngIf",!e.autoBreedActive&&e.readyToBreed)}}function kF(t,n){if(1&t&&(D(0,"strong"),F(1),M()),2&t){const e=K(3);V(1),He("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function AF(t,n){if(1&t&&(D(0,"h6",12)(1,"span"),F(2),pe(3,kF,2,1,"strong",7),M(),he(4,"br")(5,"br")(6,"br"),D(7,"span"),F(8,"Unassigned"),M(),he(9,"br"),D(10,"em"),F(11,"Click to assign animal"),M()()),2&t){const e=K(2);V(2),He("",e.barnName," "),V(1),Y("ngIf",e.barn.barnUpgrades.barnLevel>0)}}function PF(t,n){if(1&t&&(D(0,"strong"),F(1),M()),2&t){const e=K(3);V(1),He("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function EF(t,n){if(1&t&&(D(0,"h6",13)(1,"span"),F(2),pe(3,PF,2,1,"strong",7),M(),he(4,"br")(5,"br")(6,"br"),D(7,"span"),F(8,"Locked"),M(),he(9,"br"),D(10,"em"),F(11,"Click to view status"),M()()),2&t){const e=K(2);V(2),He("",e.barnName," "),V(1),Y("ngIf",e.barn.barnUpgrades.barnLevel>0)}}function IF(t,n){if(1&t&&(D(0,"div",2),pe(1,DF,14,11,"div",3),pe(2,AF,12,2,"h6",4),pe(3,EF,12,2,"h6",5),M()),2&t){const e=K();Y("ngClass",e.swapBarnActive()),V(1),Y("ngIf",e.isOccupied),V(1),Y("ngIf",!e.isOccupied&&!e.isLocked),V(1),Y("ngIf",e.isLocked)}}function BF(t,n){if(1&t&&(D(0,"strong"),F(1),M()),2&t){const e=K(3);V(1),He("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function OF(t,n){if(1&t&&(D(0,"h6",23)(1,"span"),F(2),M(),D(3,"span"),F(4),M()()),2&t){const e=K(3);Y("ngClass",e.colorConditional),V(2),He("",e.associatedAnimalName," "),V(2),He("(",e.associatedAnimalType,")")}}function VF(t,n){if(1&t&&(D(0,"h6",23)(1,"span"),F(2),M()()),2&t){const e=K(3);Y("ngClass",e.colorConditional),V(2),Kt(e.associatedAnimalType)}}function NF(t,n){1&t&&(D(0,"div",24)(1,"em"),F(2,"Auto Breed "),D(3,"strong"),F(4,"ON"),M()()())}function FF(t,n){1&t&&(D(0,"div",24)(1,"em"),F(2,"At Max Breed XP"),M()())}function LF(t,n){1&t&&(D(0,"div",24),he(1,"em"),M())}function UF(t,n){if(1&t&&(D(0,"div",18)(1,"span",19),F(2),pe(3,BF,2,1,"strong",7),M(),pe(4,OF,5,3,"h6",20),pe(5,VF,3,2,"h6",20),he(6,"ngb-progressbar",21),pe(7,NF,5,0,"div",22),pe(8,FF,3,0,"div",22),pe(9,LF,2,0,"div",22),M()),2&t){const e=K(2);V(2),He("",e.barnName," "),V(1),Y("ngIf",e.barn.barnUpgrades.barnLevel>0),V(1),Y("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),V(1),Y("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),V(1),Y("value",e.trainingProgressBarPercent),V(1),Y("ngIf",e.autoBreedActive),V(1),Y("ngIf",!e.autoBreedActive&&e.readyToBreed),V(1),Y("ngIf",!e.autoBreedActive&&!e.readyToBreed)}}function HF(t,n){if(1&t&&(D(0,"strong"),F(1),M()),2&t){const e=K(3);V(1),He("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function GF(t,n){if(1&t&&(D(0,"h6",25)(1,"span",19),F(2),pe(3,HF,2,1,"strong",7),M(),D(4,"span",26),F(5,"Unassigned"),M(),D(6,"em",27),F(7,"Click to assign animal"),M(),he(8,"span",28),M()),2&t){const e=K(2);V(2),He(" ",e.barnName," "),V(1),Y("ngIf",e.barn.barnUpgrades.barnLevel>0)}}function zF(t,n){if(1&t&&(D(0,"strong"),F(1),M()),2&t){const e=K(3);V(1),He("Lv ",e.barn.barnUpgrades.barnLevel,"")}}function jF(t,n){if(1&t&&(D(0,"h6",29)(1,"span",19),F(2),pe(3,zF,2,1,"strong",7),M(),D(4,"span",26),F(5,"Locked"),M(),D(6,"em",27),F(7,"Click to view status"),M(),he(8,"span",28),M()),2&t){const e=K(2);V(2),He("",e.barnName," "),V(1),Y("ngIf",e.barn.barnUpgrades.barnLevel>0)}}const qF=function(t){return{turnOffPointer:t}};function $F(t,n){if(1&t&&(D(0,"div",14),pe(1,UF,10,8,"div",15),pe(2,GF,9,2,"h6",16),pe(3,jF,9,2,"h6",17),M()),2&t){const e=K();Y("ngClass",hi(4,qF,e.swapBarnMode)),V(1),Y("ngIf",e.isOccupied),V(1),Y("ngIf",!e.isOccupied&&!e.isLocked),V(1),Y("ngIf",e.isLocked)}}let WF=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.utilityService=a,this.condensedView=!1,this.trainingCompleteText="",this.showTrainingAnimation=!1,this.swapBarnMode=!1,this.selectedBarn=new di}ngOnInit(){this.resetBarn()}ngOnChanges(){this.resetBarn()}ngOnDestroy(){this.previousTrainedAmount=0,null!=this.subscription&&this.subscription.unsubscribe()}resetBarn(){if(this.barnNumber>0&&this.barnNumber<=this.globalService.globalVar.barns.length+1){this.globalService.globalVar.settings.get("quickViewBarnMode")&&(this.condensedView=!0);var e=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.barnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e);var i=this.globalService.globalVar.animals.find(r=>r.associatedBarnNumber==this.barnNumber);null!=i?(this.isOccupied=!0,this.associatedAnimalName=i.name,this.associatedAnimalType=Fe[i.type],this.associatedAnimal=i,this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()}):this.isOccupied=!1,this.isLocked=e.isLocked}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");void 0!==this.subscription&&this.subscription.unsubscribe(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{if(this.globalService.globalVar.settings.get("swapBarnMode")&&(this.swapBarnMode=!0),!this.isLocked){var a=this.globalService.globalVar.animals.find(c=>c.associatedBarnNumber==this.barnNumber);if(null!=a){if(this.readyToBreed=a.breedGaugeXp>=a.breedGaugeMax&&this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=10,this.autoBreedActive=a.autoBreedActive,null==a.currentTraining)return void(this.trainingProgressBarPercent=0);a.currentTraining.timeTrained<this.previousTrainedAmount&&(this.trainingCompleteText=this.lookupService.getTrainingProgressionAnimationText(a.currentTraining),this.showTrainingAnimation=!0,setTimeout(()=>{this.showTrainingAnimation=!1,this.trainingCompleteText=""},3e3)),this.previousTrainedAmount=a.currentTraining.timeTrained,this.trainingProgressBarPercent=a.currentTraining.timeTrained/a.currentTraining.timeToComplete*100}}})}swapBarnActive(){return{turnOffPointer:this.swapBarnMode}}onClick(){this.selectedBarn.emit(this.barnNumber)}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(jr),Me(yn),Me(Lr))},t.\u0275cmp=mi({type:t,selectors:[["app-barn"]],hostBindings:function(e,i){1&e&&_e("click",function(){return i.onClick()})},inputs:{barnNumber:"barnNumber",condensedView:"condensedView"},outputs:{selectedBarn:"selectedBarn"},features:[ra],decls:2,vars:2,consts:[["class","barn clickableText",3,"ngClass",4,"ngIf"],["class","condensedBarn clickableText",3,"ngClass",4,"ngIf"],[1,"barn","clickableText",3,"ngClass"],["class","unlocked",4,"ngIf"],["class","unassigned",4,"ngIf"],["class","locked",4,"ngIf"],[1,"unlocked"],[4,"ngIf"],["class","keyword",3,"ngClass",4,"ngIf"],["type","success",3,"value"],[1,"progressBar","floatingProgressText","progressBarColor","keyword",3,"ngClass"],[1,"keyword",3,"ngClass"],[1,"unassigned"],[1,"locked"],[1,"condensedBarn","clickableText",3,"ngClass"],["class","condensedFlex unlocked",4,"ngIf"],["class","condensedFlex unassigned",4,"ngIf"],["class","condensedFlex locked",4,"ngIf"],[1,"condensedFlex","unlocked"],[1,"barnNameWidth"],["class","keyword inlineBlock condensedMargin nameWidth",3,"ngClass",4,"ngIf"],["type","success",1,"condensedProgressBar","condensedMargin",3,"value"],["class","condensedMargin breedWidth",4,"ngIf"],[1,"keyword","inlineBlock","condensedMargin","nameWidth",3,"ngClass"],[1,"condensedMargin","breedWidth"],[1,"condensedFlex","unassigned"],[1,"nameWidth"],[1,"condensedProgressBar"],[1,"breedWidth"],[1,"condensedFlex","locked"]],template:function(e,i){1&e&&(pe(0,IF,4,4,"div",0),pe(1,$F,4,6,"div",1)),2&e&&(Y("ngIf",!i.condensedView),V(1),Y("ngIf",i.condensedView))},directives:[on,_r,Zd],styles:[".barn[_ngcontent-%COMP%]{text-align:center;width:52.5%;margin:auto;display:flex;justify-content:center;align-content:center;flex-direction:column;height:100%}.turnOffPointer[_ngcontent-%COMP%]{pointer-events:none}.floatingProgressText[_ngcontent-%COMP%]{float:right;position:relative;text-align:right;top:-2em}.inlineBlock[_ngcontent-%COMP%]{display:inline-block}.condensedFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%}.condensedBarn[_ngcontent-%COMP%]{text-align:center;margin:.5rem auto;display:flex;justify-content:center;align-content:center;flex-direction:column;height:100%}.condensedMargin[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.nameWidth[_ngcontent-%COMP%]{width:32.5%}.barnNameWidth[_ngcontent-%COMP%]{width:28.5%}.condensedProgressBar[_ngcontent-%COMP%]{width:20%}.breedWidth[_ngcontent-%COMP%]{width:15%}.floatingProgressTextAnimation[_ngcontent-%COMP%]{animation-name:floatingProgressTextAnimation;animation-duration:3s;animation-iteration-count:1;animation-timing-function:ease-in-out}@keyframes floatingProgressTextAnimation{0%{transform:translate(0)}to{transform:translateY(-30px);opacity:0}}@media (max-width: 800px){.barn[_ngcontent-%COMP%]{width:75%}}"]}),t})(),XF=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=mi({type:t,selectors:[["app-training-option"]],inputs:{trainingOption:"trainingOption"},decls:7,vars:4,consts:[[1,"training"],[1,"trainingName","keyword"],[1,"trainingStats"],[1,"trainingTimeToComplete"]],template:function(e,i){1&e&&(D(0,"h6",0)(1,"p",1),F(2),M(),D(3,"p",2),F(4),M(),D(5,"p",3),F(6),M()()),2&e&&(V(2),Kt(i.trainingOption.trainingName),V(2),Kt(i.trainingOption.getStatGainDescription()),V(2),Mn("",i.trainingOption.getFacilitySize()," - ",i.trainingOption.timeToComplete," sec "))},styles:[".training[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const YF=function(t){return{activeTrainingOption:t}};function KF(t,n){if(1&t){const e=tt();D(0,"td",4)(1,"div",5),_e("click",function(){const a=me(e).$implicit;return K(2).selectTrainingOption(a)}),he(2,"app-training-option",6),M()()}if(2&t){const e=n.$implicit;V(1),Y("ngClass",hi(2,YF,e.isSelected)),V(1),Y("trainingOption",e)}}function ZF(t,n){if(1&t&&(D(0,"tr"),pe(1,KF,3,4,"td",3),M()),2&t){const e=n.$implicit;V(1),Y("ngForOf",e)}}let QF=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrainingOption=new di}ngOnInit(){this.setupDisplayTrainings()}setupDisplayTrainings(){this.trainingsCells=[],this.trainingsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTrainingOptions.length;i++)this.trainingsCells.push(this.availableTrainingOptions[i-1]),i%e==0&&(this.trainingsRows.push(this.trainingsCells),this.trainingsCells=[]);0!==this.trainingsCells.length&&this.trainingsRows.push(this.trainingsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrainingOption(e){this.availableTrainingOptions.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrainingOption.emit(e)}ngOnChanges(e){this.availableTrainingOptions=e.availableTrainingOptions.currentValue,this.setupDisplayTrainings()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki))},t.\u0275cmp=mi({type:t,selectors:[["app-training-list"]],hostBindings:function(e,i){1&e&&_e("resize",function(a){return i.onResize(a)},!1,Do)},inputs:{availableTrainingOptions:"availableTrainingOptions"},outputs:{selectedTrainingOption:"selectedTrainingOption"},features:[ra],decls:4,vars:1,consts:[[1,"trainingsView"],[1,"trainings"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trainingOption"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"table"),pe(3,ZF,2,1,"tr",2),M()()()),2&e&&(V(3),Y("ngForOf",i.trainingsRows))},directives:[Vr,_r,XF],styles:[".trainingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.trainings[_ngcontent-%COMP%]{margin:.5rem}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function JF(t,n){if(1&t&&(D(0,"span"),F(1),M()),2&t){const e=K(2);V(1),Kt(e.selectedAnimal.name)}}function eL(t,n){if(1&t&&(D(0,"div"),F(1),M()),2&t){const e=K(2);V(1),He(" Breed Level ",e.breedLevel," ")}}function tL(t,n){if(1&t&&(D(0,"div"),F(1),M()),2&t){const e=K(2);V(1),He(" ",e.getTraitDetails()," ")}}function iL(t,n){if(1&t&&(D(0,"h6",3),pe(1,JF,2,1,"span",2),he(2,"br"),D(3,"span"),F(4),M(),pe(5,eL,2,1,"div",2),pe(6,tL,2,1,"div",2),M()),2&t){const e=K();V(1),Y("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),V(3),Kt(e.selectedAnimal.getAnimalType()),V(1),Y("ngIf",e.isAnimalDetailView),V(1),Y("ngIf",e.isIncubatorDetailView&&void 0!==e.trait)}}function nL(t,n){if(1&t&&(D(0,"div"),F(1),M()),2&t){const e=K(2);V(1),He(" Breed Level ",e.breedLevel," ")}}function rL(t,n){if(1&t&&(D(0,"div"),F(1),M()),2&t){const e=K(2);V(1),He(" ",e.getTraitDetails()," ")}}function aL(t,n){if(1&t&&(D(0,"h6",3)(1,"span"),F(2),M(),pe(3,nL,2,1,"div",2),pe(4,rL,2,1,"div",2),M()),2&t){const e=K();V(2),Kt(e.selectedAnimal.getAnimalType()),V(1),Y("ngIf",e.isAnimalDetailView),V(1),Y("ngIf",e.isIncubatorDetailView&&void 0!==e.trait)}}function oL(t,n){if(1&t&&(D(0,"div"),he(1,"br")(2,"br"),D(3,"h6",3)(4,"em"),F(5),M()()()),2&t){const e=K();V(5),Mn("",e.trainingTrackRewardsRemaining," / ",e.trainingTrackTotalRewards," rewards remaining")}}let sL=(()=>{class t{constructor(){this.isTrainingTrackView=!1,this.isAnimalDetailView=!1,this.isIncubatorDetailView=!1,this.trainingTrackRewardsRemaining=0,this.trainingTrackTotalRewards=0,this.breedLevel=0}ngOnInit(){this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.isTrainingTrackView&&(this.trainingTrackRewardsRemaining=this.selectedAnimal.allTrainingTracks.getTotalRewardsRemaining(),this.trainingTrackTotalRewards=this.selectedAnimal.allTrainingTracks.getTotalRewardCount()),this.breedLevel=this.selectedAnimal.breedLevel,this.trait=this.selectedAnimal.trait}getTraitDetails(){return void 0!==this.trait?this.trait.traitName+" ("+this.trait.researchLevel+"%)":""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=mi({type:t,selectors:[["app-animal"]],inputs:{selectedAnimal:"selectedAnimal",isTrainingTrackView:"isTrainingTrackView",isAnimalDetailView:"isAnimalDetailView",isIncubatorDetailView:"isIncubatorDetailView"},decls:8,vars:5,consts:[[1,"keyword","animal",3,"ngClass"],["class","keyword",4,"ngIf"],[4,"ngIf"],[1,"keyword"]],template:function(e,i){1&e&&(D(0,"div",0),pe(1,iL,7,4,"h6",1),pe(2,aL,5,3,"h6",1),he(3,"br")(4,"br"),D(5,"span"),F(6),M(),pe(7,oL,6,2,"div",2),M()),2&e&&(Y("ngClass",i.colorConditional),V(1),Y("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),V(1),Y("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),V(4),Kt(i.selectedAnimal.getRaceCourseType()),V(1),Y("ngIf",i.isTrainingTrackView))},directives:[_r,on],styles:[".animal[_ngcontent-%COMP%]{margin:.5rem}"]}),t})();function lL(t,n){if(1&t){const e=tt();D(0,"td")(1,"div",3),_e("click",function(){const a=me(e).$implicit;return K(2).selectAnimal(a)}),he(2,"app-animal",4),M()()}if(2&t){const e=n.$implicit,i=K(2);V(2),Y("selectedAnimal",e)("isTrainingTrackView",i.isTrainingTrackView)("isIncubatorDetailView",i.isIncubatorDetailView)("isAnimalDetailView",i.isAnimalDetailView)}}function cL(t,n){if(1&t&&(D(0,"tr"),pe(1,lL,3,4,"td",2),M()),2&t){const e=n.$implicit;V(1),Y("ngForOf",e)}}let V0=(()=>{class t{constructor(e){this.globalService=e,this.isTrainingTrackView=!1,this.isAnimalDetailView=!1,this.isIncubatorDetailView=!1,this.selectedAnimal=new di}ngOnInit(){this.setupDisplayAnimals()}setupDisplayAnimals(){this.animalCells=[],this.animalRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableAnimals.length;i++)this.animalCells.push(this.availableAnimals[i-1]),i%e==0&&(this.animalRows.push(this.animalCells),this.animalCells=[]);0!==this.animalCells.length&&this.animalRows.push(this.animalCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectAnimal(e){this.selectedAnimal.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(Me(ki))},t.\u0275cmp=mi({type:t,selectors:[["app-animal-list"]],hostBindings:function(e,i){1&e&&_e("resize",function(a){return i.onResize(a)},!1,Do)},inputs:{availableAnimals:"availableAnimals",isTrainingTrackView:"isTrainingTrackView",isAnimalDetailView:"isAnimalDetailView",isIncubatorDetailView:"isIncubatorDetailView"},outputs:{selectedAnimal:"selectedAnimal"},decls:4,vars:1,consts:[[1,"animalsView"],[1,"animals"],[4,"ngFor","ngForOf"],[1,"clickableText",3,"click"],[3,"selectedAnimal","isTrainingTrackView","isIncubatorDetailView","isAnimalDetailView"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"table"),pe(3,cL,2,1,"tr",2),M()()()),2&e&&(V(3),Y("ngForOf",i.animalRows))},directives:[Vr,sL],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();const uL=["specializationModal"];function dL(t,n){if(1&t){const e=tt();D(0,"div")(1,"span",41),_e("click",function(){me(e);const r=K(2),a=Qt(18);return r.openBarnUpgradeModal(a)}),F(2),M(),he(3,"br")(4,"br"),D(5,"span",42)(6,"button",43),_e("click",function(){return me(e),K(2).upgradeBarn()}),F(7),M()()()}if(2&t){const e=K(2),i=Qt(4),r=Qt(6);V(1),Y("ngbPopover",i),V(1),He("Barn Level ",e.barn.barnUpgrades.barnLevel,""),V(3),Y("ngbPopover",r),V(1),Y("disabled",!e.canUpgrade),V(1),Kt(e.upgradeText)}}function fL(t,n){if(1&t&&(D(0,"span"),F(1),M()),2&t){const e=K(3);V(1),Kt(e.associatedAnimal.name)}}function hL(t,n){if(1&t){const e=tt();D(0,"button",44),_e("click",function(){return me(e),K(2).goToAnimal()}),pe(1,fL,2,1,"span",16),he(2,"br"),D(3,"span"),F(4),M()()}if(2&t){const e=K(2);Y("ngClass",e.colorConditional),V(1),Y("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),V(3),Kt(e.associatedAnimal.getAnimalType())}}function pL(t,n){if(1&t){const e=tt();D(0,"button",45),_e("click",function(){return me(e),K(2).goToAnimal()}),D(1,"span"),F(2),M()()}if(2&t){const e=K(2);Y("ngClass",e.colorConditional),V(2),Kt(e.associatedAnimal.getAnimalType())}}function gL(t,n){if(1&t){const e=tt();D(0,"span",42),he(1,"br",46),D(2,"button",47),_e("click",function(){return me(e),K(2).upgradeBarnSize()}),F(3,"Build"),M()()}if(2&t){const e=K(2);Y("ngbPopover",Qt(8)),V(2),Y("disabled",!e.canBuild)}}function vL(t,n){if(1&t&&(D(0,"div",42)(1,"span",48),F(2),M(),he(3,"br"),D(4,"span")(5,"em"),F(6),Di(7,"number"),M()()()),2&t){const e=K(2);Y("ngbPopover",Qt(10)),V(2),He("",e.existingTraining.trainingName," "),V(4),He("(",Yi(7,3,e.existingTraining.trainingTimeRemaining/60,"1.0-0")," min remaining)")}}function mL(t,n){1&t&&(D(0,"div",42)(1,"span"),F(2,"No Training Assigned"),M()()),2&t&&(K(2),Y("ngbPopover",Qt(12)))}function bL(t,n){if(1&t){const e=tt();D(0,"div")(1,"span")(2,"button",15),_e("click",function(){return me(e),K(2).goToCoaching()}),F(3,"Coach"),M()()()}}function _L(t,n){if(1&t&&(D(0,"div"),he(1,"br"),D(2,"p",49),he(3,"ngb-progressbar",50),D(4,"span",51),F(5),Di(6,"number"),M()(),he(7,"br"),M()),2&t){const e=K(2);V(3),Y("value",e.trainingProgressBarPercent),V(2),He("",Yi(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}function yL(t,n){1&t&&(D(0,"div",52)(1,"em"),F(2,"This animal is currently busy and will not progress in their training."),M()())}const wL=function(t){return{sizeSpacing:t}};function SL(t,n){if(1&t){const e=tt();D(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"button",14),_e("click",function(){return me(e),K().unassignAnimal()}),F(6,"Unassign"),M(),D(7,"button",15),_e("click",function(){me(e);const r=K(),a=Qt(14);return r.openSwapModal(a)}),F(8,"Swap"),M()(),he(9,"br")(10,"br"),pe(11,dL,8,5,"div",16),M(),D(12,"div",17)(13,"span"),F(14),M(),he(15,"br"),pe(16,hL,5,3,"button",18),pe(17,pL,3,2,"button",19),D(18,"div")(19,"span",20),F(20),M(),pe(21,gL,4,2,"span",21),M(),he(22,"hr"),pe(23,vL,8,6,"div",21),pe(24,mL,3,1,"div",21),M(),D(25,"div",22)(26,"button",15),_e("click",function(){return me(e),K().returnToBarnView()}),F(27,"Back"),M(),he(28,"br")(29,"br")(30,"br")(31,"br")(32,"br"),pe(33,bL,4,0,"div",16),M()(),he(34,"hr"),pe(35,_L,8,5,"div",16),he(36,"br"),D(37,"div",23)(38,"span",24),_e("click",function(){return me(e),K().resetFilters()}),F(39,"Change Training"),M(),he(40,"br"),D(41,"span",25)(42,"em"),F(43,"Click an option below to start training."),M()()(),he(44,"br"),D(45,"div",26)(46,"div",27)(47,"button",28),_e("click",function(){return me(e),K().toggleFacilityFilter("Small")}),F(48,"Small "),M(),D(49,"button",29),_e("click",function(){return me(e),K().toggleFacilityFilter("Medium")}),F(50,"Medium "),M(),D(51,"button",30),_e("click",function(){return me(e),K().toggleFacilityFilter("Large")}),F(52,"Large "),M()(),D(53,"button",31)(54,"span",15),_e("click",function(){return me(e),K().resetFilters()}),F(55,"Reset Filters"),M()(),D(56,"div",32)(57,"button",33),_e("click",function(){return me(e),K().toggleStatFilter("Speed")}),F(58,"SPD "),M(),D(59,"button",34),_e("click",function(){return me(e),K().toggleStatFilter("Acceleration")}),F(60,"ACC "),M(),D(61,"button",35),_e("click",function(){return me(e),K().toggleStatFilter("Endurance")}),F(62,"END "),M(),D(63,"button",36),_e("click",function(){return me(e),K().toggleStatFilter("Power")}),F(64,"PWR "),M(),D(65,"button",37),_e("click",function(){return me(e),K().toggleStatFilter("Focus")}),F(66,"FCS "),M(),D(67,"button",38),_e("click",function(){return me(e),K().toggleStatFilter("Adaptability")}),F(68,"ADP"),M()()(),he(69,"br"),D(70,"div",20),pe(71,yL,3,0,"div",39),D(72,"app-training-list",40),_e("selectedTrainingOption",function(r){return me(e),K().selectNewTraining(r)}),M()()()()}if(2&t){const e=K();V(11),Y("ngIf",e.barnSpecializationsUnlocked),V(3),He(" ",e.barnName,""),V(2),Y("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),V(1),Y("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),V(2),Y("ngClass",hi(32,wL,"Large"!==e.sizeValue)),V(1),He("",e.sizeValue," "),V(1),Y("ngIf","Large"!==e.sizeValue),V(2),Y("ngIf",null!=e.existingTraining),V(1),Y("ngIf",null==e.existingTraining),V(9),Y("ngIf",e.coachingUnlocked),V(2),Y("ngIf",null!=e.existingTraining),V(12),Ii("filterActive",e.filterSmall),V(2),Ii("filterActive",e.filterMedium),V(2),Ii("filterActive",e.filterLarge),V(6),Ii("filterActive",e.filterSpeed),V(2),Ii("filterActive",e.filterAcceleration),V(2),Ii("filterActive",e.filterEndurance),V(2),Ii("filterActive",e.filterPower),V(2),Ii("filterActive",e.filterFocus),V(2),Ii("filterActive",e.filterAdaptability),V(3),Y("ngClass",e.tutorialActive?"tutorialActive":""),V(1),Y("ngIf",!e.associatedAnimal.canTrain),V(1),Y("availableTrainingOptions",e.availableTrainings)}}function CL(t,n){if(1&t){const e=tt();D(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",17)(4,"span"),F(5),M(),he(6,"br"),D(7,"span"),F(8,"Unassigned"),M()(),D(9,"div",22)(10,"button",15),_e("click",function(){return me(e),K().returnToBarnView()}),F(11,"Back"),M()()(),he(12,"hr")(13,"br"),D(14,"span"),F(15,"Assign Animal"),M(),he(16,"br")(17,"br"),D(18,"app-animal-list",53),_e("selectedAnimal",function(r){return me(e),K().assignAnimal(r)}),M()()()}if(2&t){const e=K();V(5),He("Barn ",e.selectedBarnNumber,""),V(13),Y("availableAnimals",e.availableAnimals)}}function TL(t,n){if(1&t){const e=tt();D(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",17)(4,"span"),F(5),M(),he(6,"br"),D(7,"span"),F(8,"Locked"),M()(),D(9,"div",22)(10,"button",15),_e("click",function(){return me(e),K().returnToBarnView()}),F(11,"Back"),M()()(),he(12,"hr")(13,"br"),D(14,"div",54)(15,"span"),F(16,"Purchase Barn"),M(),he(17,"br")(18,"br"),D(19,"span",55),F(20),M(),he(21,"br"),D(22,"button",56),_e("click",function(){return me(e),K().purchaseBarn()}),F(23,"Buy"),M()()()()}if(2&t){const e=K();V(5),He("Barn ",e.selectedBarnNumber,""),V(15),He("",e.barn.purchasePrice," Coins"),V(2),Y("disabled",!e.canPurchaseBarn())}}function ML(t,n){if(1&t&&(D(0,"div",58),he(1,"div",59),M()),2&t){const e=K(2);V(1),Y("innerHTML",e.totalBarnStatsPopover,Si)}}function xL(t,n){1&t&&pe(0,ML,2,1,"div",57),2&t&&Y("ngIf",""!==K().totalBarnStatsPopover)}function RL(t,n){if(1&t&&(D(0,"div",58),F(1),M()),2&t){const e=K(2);V(1),He(" ",e.upgradeBarnPopover," ")}}function DL(t,n){1&t&&pe(0,RL,2,1,"div",57),2&t&&Y("ngIf",""!==K().upgradeBarnPopover)}function kL(t,n){if(1&t&&(D(0,"div",58),F(1),M()),2&t){const e=K(2);V(1),He(" ",e.buildBiggerBarnPopover," ")}}function AL(t,n){1&t&&pe(0,kL,2,1,"div",57),2&t&&Y("ngIf",""!==K().buildBiggerBarnPopover)}function PL(t,n){1&t&&he(0,"div",61),2&t&&Y("innerHTML",K(2).currentTrainingPopover,Si)}function EL(t,n){1&t&&pe(0,PL,1,1,"div",60),2&t&&Y("ngIf",""!==K().currentTrainingPopover)}function IL(t,n){1&t&&he(0,"div",61),2&t&&Y("innerHTML",K(2).currentTrainingPopover,Si)}function BL(t,n){1&t&&pe(0,IL,1,1,"div",60),2&t&&Y("ngIf",""!==K().currentTrainingPopover)}function OL(t,n){1&t&&(D(0,"div")(1,"span"),F(2,"No Barns Available"),M()())}function VL(t,n){if(1&t){const e=tt();D(0,"div")(1,"div",69)(2,"span")(3,"strong"),F(4),M(),F(5," - "),he(6,"span",59),M(),D(7,"button",70),_e("click",function(){const a=me(e).$implicit;return K(3).swapAnimals(a.barnNumber)}),F(8,"Swap"),M()()()}if(2&t){const e=n.$implicit,i=K(3);V(4),Kt(i.lookupService.getBarnName(e)),V(2),Y("innerHTML",i.animalNameWithClass(e),Si)}}function NL(t,n){if(1&t&&(D(0,"div"),pe(1,VL,9,2,"div",68),M()),2&t){const e=K(2);V(1),Y("ngForOf",e.otherBarns)}}function FL(t,n){if(1&t){const e=tt();D(0,"div",62)(1,"div",63)(2,"h4",64),F(3,"Swap Animals"),M(),D(4,"button",65),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",66)(7,"span"),F(8,"Swap"),M(),he(9,"br"),D(10,"div",67)(11,"strong"),F(12),M(),F(13," - "),he(14,"span",59),M(),D(15,"span"),F(16,"With"),M(),he(17,"br"),pe(18,OL,3,0,"div",16),pe(19,NL,2,1,"div",16),M()()}if(2&t){const e=K();V(12),Kt(e.lookupService.getBarnName(e.barn)),V(2),Y("innerHTML",e.animalNameWithClass(e.barn),Si),V(4),Y("ngIf",0===e.otherBarns.length),V(1),Y("ngIf",e.otherBarns.length>0)}}const Ix=function(t){return{selectedSpecialization:t}};function LL(t,n){if(1&t){const e=tt();D(0,"span",77),_e("click",function(){const a=me(e).$implicit;return K(3).filterSpecialization(a)}),F(1),M()}if(2&t){const e=n.$implicit,i=K(3);Y("ngClass",hi(2,Ix,i.selectedSpecialization===e)),V(1),He(" ",e.trim()," ")}}function UL(t,n){if(1&t&&(D(0,"div",75),pe(1,LL,2,4,"span",76),M()),2&t){const e=K(2);V(1),Y("ngForOf",e.specializationOptions)}}function HL(t,n){if(1&t&&(D(0,"div"),F(1),he(2,"br")(3,"br"),D(4,"strong"),F(5),M()()),2&t){const e=K(2);V(1),He(" ",e.specializationDescription," "),V(4),He(" ",e.inDepthSpecializationDescription," ")}}function GL(t,n){if(1&t){const e=tt();D(0,"div",62)(1,"form")(2,"div",63)(3,"h4",64),F(4,"Choose Barn Specialization"),M(),D(5,"button",65),_e("click",function(){return me(e).$implicit.dismiss()}),F(6,"X"),M()(),D(7,"div",71),pe(8,UL,2,1,"div",72),he(9,"hr"),pe(10,HL,6,2,"div",16),M(),D(11,"div",73)(12,"button",74),_e("click",function(){return me(e),K().selectSpecialization()}),F(13,"Select"),M()()()()}if(2&t){const e=K();V(8),Y("ngIf",e.specializationOptions.length>0),V(2),Y("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription)}}function zL(t,n){if(1&t){const e=tt();D(0,"span",77),_e("click",function(){const a=me(e).$implicit;return K(4).filterSpecialization(a)}),F(1),M()}if(2&t){const e=n.$implicit,i=K(4);Y("ngClass",hi(2,Ix,i.selectedSpecialization===e)),V(1),He(" ",e.trim()," ")}}function jL(t,n){if(1&t&&(D(0,"div",75),pe(1,zL,2,4,"span",76),M()),2&t){const e=K(3);V(1),Y("ngForOf",e.specializationOptions)}}function qL(t,n){if(1&t&&(D(0,"div"),F(1),he(2,"br")(3,"br"),D(4,"strong"),F(5),M(),he(6,"br")(7,"br"),M()),2&t){const e=K(3);V(1),He(" ",e.specializationDescription," "),V(4),He(" ",e.inDepthSpecializationDescription," ")}}function $L(t,n){if(1&t){const e=tt();D(0,"div",80)(1,"div",81)(2,"span",82),F(3,"Reset Barn Specialization"),M(),he(4,"br"),D(5,"em"),F(6," Tear down your barn to build up something new. Each barn can be reset as many times as you want, but "),D(7,"strong"),F(8,"it only retains 80% of its current Barn Level after being reset."),M()()(),he(9,"br"),D(10,"div")(11,"div",83),pe(12,jL,2,1,"div",72),he(13,"hr"),pe(14,qL,8,2,"div",16),M(),D(15,"div",84)(16,"span"),F(17),M(),D(18,"button",74),_e("click",function(){return me(e),K(2).resetSpecialization()}),F(19,"Reset Specialization"),M()()()()}if(2&t){const e=K(2);V(12),Y("ngIf",e.specializationOptions.length>0),V(2),Y("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription),V(3),He("New Barn Level will be ",e.postResetBarnUpgradeLevel,"")}}function WL(t,n){if(1&t){const e=tt();D(0,"div",62)(1,"div",63)(2,"h4",64),F(3,"Barn Upgrade Info"),M(),D(4,"button",65),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",71)(7,"div",78),he(8,"div",59)(9,"br"),F(10),he(11,"br")(12,"hr"),pe(13,$L,20,3,"div",79),M()()()}if(2&t){const e=K();V(8),Y("innerHTML",e.totalBarnStatsPopover,Si),V(2),He(" ",e.upgradeBarnPopover," "),V(3),Y("ngIf",e.barn.barnUpgrades.specializationLevel>0)}}let XL=(()=>{class t{constructor(e,i,r,a,c,d,m,_){this.globalService=e,this.gameLoopService=i,this.modalService=r,this.lookupService=a,this.componentCommunicationService=c,this.specializationService=d,this.tutorialService=m,this.utilityService=_,this.returnToBarnEmitter=new di,this.isCoachingEmitter=new di,this.canUpgrade=!1,this.canBuild=!1,this.barnSpecializationsUnlocked=!1,this.coachingUnlocked=!1,this.tutorialActive=!1,this.postResetBarnUpgradeLevel=0,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1}keyEvent(e){var i=this.lookupService.getAvailableBarns().filter(d=>void 0!==d),r=i.findIndex(d=>this.selectedBarnNumber===d.barnNumber);if("ArrowLeft"===e.key)r>-1&&(null!=this.subscription&&this.subscription.unsubscribe(),(a=r-1)<0&&(a=i.length-1),this.componentCommunicationService.setBarnView(Mi.barn,(c=i[a]).barnNumber),this.resetSelectedBarnInfo(c));else if("ArrowRight"===e.key){var a,c;r>-1&&(null!=this.subscription&&this.subscription.unsubscribe(),(a=r+1)===i.length&&(a=0),this.componentCommunicationService.setBarnView(Mi.barn,(c=i[a]).barnNumber),this.resetSelectedBarnInfo(c))}else(e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.returnToBarnView()}ngOnInit(){if(this.handleTutorial(),this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(i=>i.barnNumber===this.selectedBarnNumber);null!=e&&this.resetSelectedBarnInfo(e)}}selectNewTraining(e){var i=this.globalService.globalVar.animals.find(d=>d.associatedBarnNumber===this.selectedBarnNumber);if(null!=i){var r=Object.assign({},e),a="smallBarnTrainingTimeModifier";this.barn.size===_i.Medium?a="mediumBarnTrainingTimeModifier":this.barn.size===_i.Large&&(a="largeBarnTrainingTimeModifier");var c=this.globalService.globalVar.modifiers.find(d=>d.text===a);if(null!=c&&(r.trainingTimeRemaining=c.value),null!=i.currentTraining){if(this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching"))return i.queuedTraining=r,void(i.previousTraining=Object.assign({},r));i.currentTraining.timeTrained=0}i.currentTraining=r,i.previousTraining=Object.assign({},r),this.existingTraining=r,!this.globalService.globalVar.tutorials.tutorialCompleted&&2===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.componentCommunicationService.setAnimalView(Mi.animals,this.associatedAnimal)),!this.globalService.globalVar.tutorials.tutorialCompleted&&8===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1)}}GetAvailableTrainingOptions(e){var i=[];if(null==this.globalService.globalVar||null==this.globalService.globalVar.trainingOptions||0===this.globalService.globalVar.trainingOptions.length)return i;i=this.globalService.globalVar.trainingOptions.filter(c=>c.isAvailable&&(c.facilitySize===_i.Small||c.facilitySize===_i.Medium&&(this.barn.size===_i.Medium||this.barn.size===_i.Large)||c.facilitySize===_i.Large&&this.barn.size===_i.Large));var r=[];i.forEach(c=>{var d=c.makeCopy(c),m=this.lookupService.getTrainingTimeReductionFromTrainingFacility(this.barn.barnUpgrades),_=this.lookupService.getResourceByName("Stopwatch");null==_&&(_=0),d.timeToComplete*=1-(.05*_+m+e.miscStats.trainingTimeReduction/100),d.timeToComplete=Math.round(100*(d.timeToComplete+Number.EPSILON))/100,e.raceCourseType===Ve.Mountain&&(d.trainingType===Ut.ShortTrackRunning&&(d.trainingName="Short Track Climbing"),d.trainingType===Ut.TrailRunning&&(d.trainingName="Trail Climbing"),d.trainingType===Ut.LongTrackRunning&&(d.trainingName="Long Track Climbing")),e.raceCourseType===Ve.Ocean&&(d.trainingType===Ut.ShortTrackRunning&&(d.trainingName="Short Track Swimming"),d.trainingType===Ut.TrailRunning&&(d.trainingName="Lane Swimming"),d.trainingType===Ut.SmallWagonTow&&(d.trainingName="Small Canoe Tow"),d.trainingType===Ut.UphillRun&&(d.trainingName="Upstream Swim"),d.trainingType===Ut.LongTrackRunning&&(d.trainingName="Long Track Swimming"),d.trainingType===Ut.VehicleTow&&(d.trainingName="Boat Tow"),d.trainingType===Ut.GreenwayHike&&(d.trainingName="Canal Adventure"));var T=0;this.barn.barnUpgrades.specialization===ji.TrainingFacility&&this.barn.barnUpgrades.specializationLevel>10&&(T=(this.barn.barnUpgrades.specializationLevel-10)/10),d.affectedStatRatios.topSpeed*=this.barn.barnUpgrades.upgradedStatGain.topSpeed+T,d.affectedStatRatios.acceleration*=this.barn.barnUpgrades.upgradedStatGain.acceleration+T,d.affectedStatRatios.endurance*=this.barn.barnUpgrades.upgradedStatGain.endurance+T,d.affectedStatRatios.power*=this.barn.barnUpgrades.upgradedStatGain.power+T,d.affectedStatRatios.focus*=this.barn.barnUpgrades.upgradedStatGain.focus+T,d.affectedStatRatios.adaptability*=this.barn.barnUpgrades.upgradedStatGain.adaptability+T;var A=1,q=1,Q=1,te=1,oe=1,de=1;e.talentTree.talentTreeType===li.sprint&&(de=1+e.talentTree.column1Row1Points/100,q=1+e.talentTree.column2Row1Points/100,te=1+e.talentTree.column3Row1Points/100),e.talentTree.talentTreeType===li.longDistance&&(oe=1+e.talentTree.column1Row1Points/100,A=1+e.talentTree.column2Row1Points/100,Q=1+e.talentTree.column3Row1Points/100),d.affectedStatRatios.topSpeed*=A,d.affectedStatRatios.acceleration*=q,d.affectedStatRatios.endurance*=Q,d.affectedStatRatios.power*=te,d.affectedStatRatios.focus*=oe,d.affectedStatRatios.adaptability*=de,d.affectedStatRatios.topSpeed=Math.round(100*(d.affectedStatRatios.topSpeed+Number.EPSILON))/100,d.affectedStatRatios.acceleration=Math.round(100*(d.affectedStatRatios.acceleration+Number.EPSILON))/100,d.affectedStatRatios.endurance=Math.round(100*(d.affectedStatRatios.endurance+Number.EPSILON))/100,d.affectedStatRatios.power=Math.round(100*(d.affectedStatRatios.power+Number.EPSILON))/100,d.affectedStatRatios.focus=Math.round(100*(d.affectedStatRatios.focus+Number.EPSILON))/100,d.affectedStatRatios.adaptability=Math.round(100*(d.affectedStatRatios.adaptability+Number.EPSILON))/100,r.push(d)}),(this.filterAcceleration||this.filterAdaptability||this.filterEndurance||this.filterFocus||this.filterPower||this.filterSpeed||this.filterSmall||this.filterMedium||this.filterLarge)&&(r=r.filter(c=>(!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterAcceleration&&c.affectedStatRatios.acceleration>0||this.filterAdaptability&&c.affectedStatRatios.adaptability>0||this.filterEndurance&&c.affectedStatRatios.endurance>0||this.filterFocus&&c.affectedStatRatios.focus>0||this.filterPower&&c.affectedStatRatios.power>0||this.filterSpeed&&c.affectedStatRatios.topSpeed>0)&&(!this.filterSmall&&!this.filterMedium&&!this.filterLarge||this.filterSmall&&c.facilitySize===_i.Small||this.filterMedium&&c.facilitySize===_i.Medium||this.filterLarge&&c.facilitySize===_i.Large)));var a=r.find(c=>{var d;return(null===(d=this.existingTraining)||void 0===d?void 0:d.trainingName)===c.trainingName});return null!=a&&this.animalAssigned&&(a.isSelected=!0),r}GetAvailableAnimalOptions(){var e=[];return null==this.globalService.globalVar||null==this.globalService.globalVar.animals||0===this.globalService.globalVar.animals.length||(e=this.globalService.globalVar.animals.filter(i=>i.isAvailable&&(void 0===i.associatedBarnNumber||i.associatedBarnNumber<=0))),e}unassignAnimal(){var e=this.globalService.globalVar.animals.find(i=>i.associatedBarnNumber==this.selectedBarnNumber);null!=e&&(e.associatedBarnNumber=0,e.currentTraining=null),this.existingTraining=null,this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions()}assignAnimal(e){e.associatedBarnNumber=this.selectedBarnNumber,this.animalAssigned=!0,this.availableAnimals=this.GetAvailableAnimalOptions(),this.availableTrainings=this.GetAvailableTrainingOptions(e),this.associatedAnimalName=e.name,this.existingTraining=null;var i=this.lookupService.getAnimalByType(e.type);null!==i&&(i.associatedBarnNumber=this.selectedBarnNumber,this.associatedAnimal=i,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()}),!this.globalService.globalVar.tutorials.tutorialCompleted&&7===this.globalService.globalVar.tutorials.currentTutorialId&&this.associatedAnimal.type===Fe.Monkey&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.tutorialActive=!0)}returnToBarnView(){this.returnToBarnEmitter.emit(0)}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}toggleFacilityFilter(e){"Small"===e&&(this.filterSmall=!this.filterSmall),"Medium"===e&&(this.filterMedium=!this.filterMedium),"Large"===e&&(this.filterLarge=!this.filterLarge),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1,this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}purchaseBarn(){this.lookupService.getCoins()>=this.barn.purchasePrice&&(this.barn.isLocked=!1,this.lookupService.spendCoins(this.barn.purchasePrice))}canPurchaseBarn(){return this.lookupService.getCoins()>=this.barn.purchasePrice}getSizeValue(){this.sizeValue=this.barn.getSize()}upgradeBarnSize(){if(this.lookupService.getCoins()>=this.barn.facilityUpgradePrice){if(this.lookupService.spendCoins(this.barn.facilityUpgradePrice),this.barn.size===_i.Small)this.barn.size=_i.Medium,this.barn.facilityUpgradePrice=4e3,null!=(i=this.globalService.globalVar.shop.find(r=>"Trainings"===r.name))&&i.itemList.filter(r=>r.additionalIdentifier===_i.Medium.toString()).forEach(r=>{r.isAvailable=!0});else if(this.barn.size===_i.Medium){var i;this.barn.size=_i.Large,null!=(i=this.globalService.globalVar.shop.find(a=>"Trainings"===a.name))&&i.itemList.filter(a=>a.additionalIdentifier===_i.Large.toString()).forEach(a=>{a.isAvailable=!0})}this.getSizeValue(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover()}}upgradeBarn(){var e=this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel);if(this.canUpgradeBarn(e)){if(9===this.barn.barnUpgrades.barnLevel)this.modalService.open(this.specializationModal,{ariaLabelledBy:"modal-basic-title",size:"lg"});else{e.forEach(c=>{this.lookupService.spendResourceByName(c.name,c.amount)}),this.barn.barnUpgrades.barnLevel+=1;var r=.1;if(this.barn.barnUpgrades.barnLevel%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var a=this.barn.barnUpgrades.barnLevel-this.barn.barnUpgrades.specializationLevel;a%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=r:a%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=r:a%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=r:a%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=r:a%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=r:a%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=r)}this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover()}this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}else alert("You don't have the required resources to upgrade your barn.")}canUpgradeBarn(e){var i=!0;return e.forEach(r=>{this.lookupService.getResourceByName(r.name)<r.amount&&(i=!1)}),i}canBuildLargerBarn(){var e=!1;return this.lookupService.getCoins()>=this.barn.facilityUpgradePrice&&(e=!0),e}getTotalBarnStatsPopover(e){var i="Upgrade to gain barn bonuses. ";return this.barn.barnUpgrades.barnLevel>=1&&(i=e?"<em>Click to view full information and to change Barn specialization.</em><br/><br/>":""),i+="Barn Upgrades: <br/>",this.barn.barnUpgrades.specialization===ji.TrainingFacility?i+=this.specializationService.getSpecializationPopoverText(ji.TrainingFacility,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===ji.BreedingGrounds?i+=this.specializationService.getSpecializationPopoverText(ji.BreedingGrounds,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===ji.Attraction?i+=this.specializationService.getSpecializationPopoverText(ji.Attraction,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===ji.ResearchCenter&&(i+=this.specializationService.getSpecializationPopoverText(ji.ResearchCenter,this.barn.barnUpgrades.specializationLevel)),this.barn.barnUpgrades.upgradedStatGain.adaptability>1&&(i+="Adaptability Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.adaptability.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.focus>1&&(i+="Focus Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.focus.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.power>1&&(i+="Power Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.power.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.endurance>1&&(i+="Endurance Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.endurance.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.acceleration>1&&(i+="Acceleration Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.acceleration.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.topSpeed>1&&(i+="Speed Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.topSpeed.toFixed(1)+"<br/>"),null!==this.utilityService.getSanitizedHtml(i)&&(i=this.utilityService.getSanitizedHtml(i)),i}getUpgradeBarnPopover(){var e="Cost for next upgrade: \n";return this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(r=>{var a=r.name;"Medals"===a&&1===r.amount&&(a="Medal"),e+=r.amount+" "+a+"\n"}),e}getBuildLargerBarnPopover(){var e="Cost to build larger barn: \n";return e+=this.barn.facilityUpgradePrice+" Coins \n\n",this.barn.size===_i.Small?e+="You will be able to do Medium trainings and increase idle training time to 8 hours.":this.barn.size===_i.Medium&&(e+="You will be able to do Large trainings and increase idle training time to 12 hours."),e}filterSpecialization(e){this.selectedSpecialization=e,this.specializationDescription=this.globalService.getSpecializationDescription(e),this.inDepthSpecializationDescription=this.lookupService.getInDepthSpecializationDescription(e)}selectSpecialization(){""!==this.selectedSpecialization&&null!=this.selectedSpecialization?(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(i=>{this.lookupService.spendResourceByName(i.name,i.amount)}),this.barn.barnUpgrades.specialization=this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel+=1,this.barn.barnUpgrades.barnLevel+=1,this.barn.barnUpgrades.specialization===ji.TrainingFacility&&(this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="",this.modalService.dismissAll()):alert("You must select a specialization.")}resetSpecialization(){if(""!==this.selectedSpecialization&&null!=this.selectedSpecialization){this.barn.barnUpgrades.barnLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel),this.barn.barnUpgrades.specialization=this.barn.barnUpgrades.barnLevel<10?ji.None:this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel=0,this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="";var e=.1;this.barn.barnUpgrades.upgradedStatGain=new It(1,1,1,1,1,1);for(var i=1;i<=this.barn.barnUpgrades.barnLevel;i++)if(i%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var r=i-this.barn.barnUpgrades.specializationLevel;r%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=e:r%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=e:r%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=e:r%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=e:r%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=e:r%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=e)}this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.modalService.dismissAll()}else alert("You must select a specialization.")}goToAnimal(){this.componentCommunicationService.setAnimalView(Mi.animals,this.associatedAnimal)}handleTutorial(){var e=this.globalService.globalVar.animals.find(i=>i.type===Fe.Monkey);this.globalService.globalVar.tutorials.tutorialCompleted||1!==this.globalService.globalVar.tutorials.currentTutorialId?!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)?(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0):this.globalService.globalVar.tutorials.tutorialCompleted||(this.tutorialActive=!1):(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}resetSelectedBarnInfo(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.upgradeText="Upgrade",this.barnSpecializationsUnlocked=this.lookupService.isItemUnlocked("barnSpecializations"),this.coachingUnlocked=this.lookupService.isItemUnlocked("coaching"),this.selectedBarnNumber=e.barnNumber,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var i=this.globalService.globalVar.barns.find(c=>c.barnNumber===this.selectedBarnNumber);if(void 0!==i){this.barn=i,this.otherBarns=this.globalService.getBarnListInOrder(),this.otherBarns=this.otherBarns.filter(c=>c.barnNumber!==this.selectedBarnNumber&&!c.isLocked),this.barnName=this.lookupService.getBarnName(i),this.getSizeValue(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize");var r=this.globalService.globalVar.animals.find(c=>c.associatedBarnNumber==this.selectedBarnNumber);if(null!=r){if(this.animalAssigned=!0,this.associatedAnimal=r,this.associatedAnimalName=r.name,this.existingTraining=r.currentTraining,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()},this.availableTrainings=this.GetAvailableTrainingOptions(r),this.currentTrainingPopover=this.getCurrentTrainingPopover(r),null!=this.existingTraining){var a=this.availableTrainings.find(c=>{var d;return(null===(d=this.existingTraining)||void 0===d?void 0:d.trainingName)===c.trainingName});null!=a&&(a.isSelected=!0)}}else this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions();this.componentCommunicationService.setBarnView(Mi.barn,this.selectedBarnNumber),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(c=>{if(!this.barn.isLocked){var d=this.globalService.globalVar.animals.find(_=>_.associatedBarnNumber==this.selectedBarnNumber);if(null!=d){if(null==d.currentTraining){if(null!==this.existingTraining){var m=this.availableTrainings.find(_=>{var T;return(null===(T=this.existingTraining)||void 0===T?void 0:T.trainingName)===_.trainingName});null!=m&&(m.isSelected=!1),this.existingTraining=null}return}d.currentTraining!==this.existingTraining&&(this.existingTraining=d.currentTraining),this.trainingProgressBarPercent>=100&&(this.trainingProgressBarPercent=100),this.trainingProgressBarPercent=d.currentTraining.timeTrained/d.currentTraining.timeToComplete*100,this.currentTrainingPopover=this.getCurrentTrainingPopover(d)}}})}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}getCurrentTrainingPopover(e){var i="";null!=e.currentTraining&&(i+=e.currentTraining.trainingName+"\n"+this.lookupService.getStatGainDescription(e.currentTraining.affectedStatRatios,e.currentTraining.statGain)+"\n"),i+=e.name+" Current Stats:\n",i+="Speed: "+Math.round(e.currentStats.topSpeed).toLocaleString()+"\n",i+="Acceleration: "+Math.round(e.currentStats.acceleration).toLocaleString()+"\n",i+="Endurance: "+Math.round(e.currentStats.endurance).toLocaleString()+"\n",i+="Power: "+Math.round(e.currentStats.power).toLocaleString()+"\n",i+="Focus: "+Math.round(e.currentStats.focus).toLocaleString()+"\n",i+="Adaptability: "+Math.round(e.currentStats.adaptability).toLocaleString()+"\n",i+="Diminishing Returns: "+this.globalService.GetAnimalDiminishingReturns(e);var r=this.utilityService.getSanitizedHtml(i);return null!==r&&(i=r),i}animalNameWithClass(e){var i="Empty Barn",r=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber===e.barnNumber);return void 0!==r&&(i=r.name),"Empty Barn"===i?"<span class='keyword'>"+i+"</span>":"<span class='keyword "+this.getCourseTypeClass(r.raceCourseType)+"'>"+i+"</span>"}swapAnimals(e){var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber===e);void 0!==i&&(i.associatedBarnNumber=this.selectedBarnNumber),this.associatedAnimal.associatedBarnNumber=e;var r=this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber);null!=r&&this.resetSelectedBarnInfo(r)}getCourseTypeClass(e){return e===Ve.Flatland?"flatlandColor":e===Ve.Mountain?"mountainColor":e===Ve.Ocean?"waterColor":e===Ve.Tundra?"tundraColor":e===Ve.Volcanic?"volcanicColor":""}goToCoaching(){this.isCoachingEmitter.emit(!0)}openSwapModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openBarnUpgradeModal(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!1),this.barn.barnUpgrades.specialization!==ji.None){var i=this.lookupService.convertSpecializationEnumToName(this.barn.barnUpgrades.specialization);this.specializationOptions=this.specializationOptions.filter(r=>r!==i),this.postResetBarnUpgradeLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel)}this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.tutorialSubscription&&this.tutorialSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(jr),Me(ss),Me(yn),Me(qr),Me(zm),Me(lM),Me(Lr))},t.\u0275cmp=mi({type:t,selectors:[["app-selected-barn"]],viewQuery:function(e,i){if(1&e&&Ba(uL,7),2&e){let r;mn(r=bn())&&(i.specializationModal=r.first)}},hostBindings:function(e,i){1&e&&_e("keyup",function(a){return i.keyEvent(a)},!1,Do)},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{returnToBarnEmitter:"returnToBarnEmitter",isCoachingEmitter:"isCoachingEmitter"},decls:19,vars:3,consts:[["class","selectedBarnModal",4,"ngIf"],["totalBarnStatsContent",""],["upgradeBarnContent",""],["costToBuildContent",""],["noTrainingContent",""],["currentTrainingContent",""],["swapModal",""],["specializationModal",""],["barnUpgradeContent",""],[1,"selectedBarnModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"unassign"],[1,"unassignButtons"],[1,"rightSpaced",3,"click"],[3,"click"],[4,"ngIf"],[1,"info"],["class","keyword buttonAsTextKeepColor clickableText",3,"ngClass","click",4,"ngIf"],["class","clickableText keyword buttonAsTextKeepColor",3,"ngClass","click",4,"ngIf"],[3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"back"],[1,"changeTrainingHeader"],[1,"s4Heading",3,"click"],[1,"trainingDescription"],[1,"filterGridContainer"],[1,"facilitySizeFilter","clickableText","filterMargins"],["id","smallFilter",1,"buttonAsText",3,"click"],["id","mediumFilter",1,"buttonAsText",3,"click"],["id","largeFilter",1,"buttonAsText",3,"click"],[1,"resetFiltersHeader","buttonAsText","clickableText"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],["class","keyword",4,"ngIf"],[3,"availableTrainingOptions","selectedTrainingOption"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[1,"keyword","buttonAsTextKeepColor","clickableText",3,"ngClass","click"],[1,"clickableText","keyword","buttonAsTextKeepColor",3,"ngClass","click"],[1,"mobileVersion"],[1,"sizeButtonSpacing",3,"disabled","click"],[1,"activeTrainingOption"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"],[1,"keyword"],[3,"availableAnimals","selectedAnimal"],[1,"purchaseBarn"],[1,"price","resourceKeyword"],["id","purchaseButton",3,"disabled","click"],["class","popoverClass",4,"ngIf"],[1,"popoverClass"],[3,"innerHTML"],["class","popoverClass",3,"innerHTML",4,"ngIf"],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body","centered"],[1,"barnRow"],[4,"ngFor","ngForOf"],[1,"barnRow","flex"],[1,"rightAligned",3,"click"],[1,"modal-body"],["class","typeContainer",4,"ngIf"],[1,"modal-footer"],["type","button",3,"click"],[1,"typeContainer"],["class","specializationType subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"specializationType","subHeading",3,"ngClass","click"],[1,"upgradeBarnInfo"],["class","resetBarn",4,"ngIf"],[1,"resetBarn"],[1,"resetSpecializationInfo"],[1,"s4Heading"],[1,"resetSpecializationOptions"],[1,"modal-footer","spaceEvenly"]],template:function(e,i){1&e&&(pe(0,SL,73,34,"div",0),pe(1,CL,19,2,"div",0),pe(2,TL,24,3,"div",0),pe(3,xL,1,1,"ng-template",null,1,ni),pe(5,DL,1,1,"ng-template",null,2,ni),pe(7,AL,1,1,"ng-template",null,3,ni),pe(9,EL,1,1,"ng-template",null,4,ni),pe(11,BL,1,1,"ng-template",null,5,ni),pe(13,FL,20,4,"ng-template",null,6,ni),pe(15,GL,14,2,"ng-template",null,7,ni),pe(17,WL,14,3,"ng-template",null,8,ni)),2&e&&(Y("ngIf",i.animalAssigned&&!i.barn.isLocked),V(1),Y("ngIf",!i.animalAssigned&&!i.barn.isLocked),V(1),Y("ngIf",i.barn.isLocked))},directives:[on,no,_r,Zd,QF,V0,Vr,qh,Vh,bd],pipes:[ts],styles:['ngb-modal-backdrop{z-index:1050!important}.selectedBarnModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.rightAligned[_ngcontent-%COMP%]{text-align:right}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.barnRow[_ngcontent-%COMP%]{width:35%;margin:auto;padding:.5rem}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5rem}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"unassign info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.trainingGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"refreshTraining trainingTimer trainingSpacer"}.refreshTraining[_ngcontent-%COMP%]{grid-area:refreshTraining}.trainingTimer[_ngcontent-%COMP%]{grid-area:trainingTimer}.trainingSpacer[_ngcontent-%COMP%]{grid-area:trainingSpacer}.trainingDescription[_ngcontent-%COMP%]{text-align:center}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.facilitySizeFilter[_ngcontent-%COMP%]{grid-area:facilitySizeFilter}.resetFiltersHeader[_ngcontent-%COMP%]{grid-area:resetFiltersHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.changeTrainingHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.specializationType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedSpecialization[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.sizeButtonSpacing[_ngcontent-%COMP%]{width:4rem}.sizeSpacing[_ngcontent-%COMP%]{margin-left:4rem}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.spaceEvenly[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}.resetSpecializationInfo[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:none}@media (max-width: 800px){.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:2fr 1fr 2fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.barnRow[_ngcontent-%COMP%]{width:100%}.desktopVersion[_ngcontent-%COMP%]{display:none}.mobileVersion[_ngcontent-%COMP%]{display:block}.sizeSpacing[_ngcontent-%COMP%]{margin-left:0}}']}),t})();var gu=(()=>{return(t=gu||(gu={}))[t.coaching=0]="coaching",t[t.scrimmage=1]="scrimmage",gu;var t})(),Kr=(()=>{return(t=Kr||(Kr={}))[t.speed=0]="speed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",t[t.special=6]="special",Kr;var t})();const YL=["coachingCanvas"],KL=["drawCoaching"];let ZL=(()=>{class t{constructor(e,i,r,a){this.gameLoopService=e,this.globalService=i,this.themeService=r,this.utilityService=a,this.isPointerDown=!1,this.activePoints=[],this.currentEndPoint=0,this.currentX=0,this.currentY=0,this.getNewPath=!1,this.coachingTypeEnum=gu}ngOnInit(){if(this.successfulAttemptStreak=0,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=i){this.associatedAnimal=i;var r="coloredText "+this.associatedAnimal.getCourseTypeClass();this.animalDisplayName="<span class='"+r+"'>"+this.associatedAnimal.name+"</span>"}}this.incrementalCoachingUpdates="You bring "+this.animalDisplayName+" out into an open area for practice.\n"}ngAfterViewInit(){this.setupCanvas(),null!=this.drawCoaching&&(this.canvasOffsetX=this.drawCoaching.nativeElement.offsetLeft,this.canvasOffsetY=this.drawCoaching.nativeElement.offsetTop),this.context=this.coachingCanvas.nativeElement.getContext("2d"),this.context.lineWidth=6,this.currentPathType=this.getRandomPathType(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=6,this.displayTrace(this.context,0)})}setupCanvas(){void 0!==this.coachingCanvas&&(this.coachingCanvas.nativeElement.style.width="100%",this.coachingCanvas.nativeElement.style.height="100%",this.coachingCanvas.nativeElement.width=this.coachingCanvas.nativeElement.offsetWidth,this.coachingCanvas.nativeElement.height=this.coachingCanvas.nativeElement.offsetHeight,this.canvasHeight=this.coachingCanvas.nativeElement.height,this.canvasWidth=this.coachingCanvas.nativeElement.width)}displayTrace(e,i){e.lineCap="round",e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.currentPathType===Kr.speed&&(this.activePoints=this.drawSpeedTrace(e)),this.currentPathType===Kr.acceleration&&(this.activePoints=this.drawAccelerationTrace(e)),this.currentPathType===Kr.endurance&&(this.activePoints=this.drawEnduranceTrace(e)),this.currentPathType===Kr.power&&(this.activePoints=this.drawPowerTrace(e)),this.currentPathType===Kr.focus&&(this.activePoints=this.drawFocusTrace(e)),this.currentPathType===Kr.adaptability&&(this.activePoints=this.drawAdaptabilityTrace(e)),e.strokeStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.globalCompositeOperation="source-atop";for(var r=0;r<this.currentEndPoint;r++)if(r<this.currentEndPoint-1)this.currentPathType===Kr.power&&0===r?(e.beginPath(),e.ellipse(this.activePoints[0][0],this.activePoints[0][1],this.activePoints[0][2],this.activePoints[0][3],this.activePoints[0][4],this.activePoints[0][5],this.activePoints[0][6],!0),e.stroke()):(e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.activePoints[r+1][0],this.activePoints[r+1][1]),e.stroke());else if(this.currentPathType!==Kr.power||0!==r&&2!==r)e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.currentX,this.currentY),e.stroke(),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,this.currentY-5,10,10);else{var a=0;2===r&&(a=3),e.fillStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.fillRect(this.activePoints[a][0]-this.activePoints[a][2]-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],this.currentX-(this.activePoints[a][0]-this.activePoints[a][2]),2*this.activePoints[a][3]+2),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],10,2*this.activePoints[a][3])}}pointerMove(e){if(this.isPointerDown&&null!=this.activePoints&&0!==this.activePoints.length){e.preventDefault(),e.stopPropagation();var i=e.clientX-this.canvasOffsetX,r=e.clientY-this.canvasOffsetY,a=.1*this.canvasWidth,c=.1*this.canvasHeight;0===this.currentEndPoint&&(this.currentX=this.activePoints[0][0],this.currentY=this.activePoints[0][1],this.currentPathType===Kr.power&&(this.currentX=this.activePoints[0][0]-this.activePoints[0][2],this.currentY=this.activePoints[0][1]),this.currentEndPoint=1),this.currentPathType===Kr.power&&(c=.25*this.canvasHeight);var d=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint-1][0]:this.activePoints[this.currentEndPoint][0],m=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint][0]:this.activePoints[this.currentEndPoint-1][0],_=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint-1][1]:this.activePoints[this.currentEndPoint][1],T=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint][1]:this.activePoints[this.currentEndPoint-1][1],A=d-a,q=m+a,Q=_-c,te=T+c,oe=!1,de=!1,be=!1,ce=!1;if(this.activePoints[this.currentEndPoint-1][0]>this.activePoints[this.currentEndPoint][0]&&(oe=!0),this.activePoints[this.currentEndPoint-1][1]>this.activePoints[this.currentEndPoint][1]&&(de=!0),this.activePoints[this.currentEndPoint-1][0]===this.activePoints[this.currentEndPoint][0]&&(be=!0),this.activePoints[this.currentEndPoint-1][1]===this.activePoints[this.currentEndPoint][1]&&(ce=!0),this.currentPathType!==Kr.power||1!==this.currentEndPoint&&3!==this.currentEndPoint?this.currentPathType===Kr.power&&2===this.currentEndPoint&&(A=(d=this.activePoints[2][0])-a,q=(m=this.activePoints[1][0])+a,Q=(_=this.activePoints[1][1])-c,te=(T=this.activePoints[2][1])+c,oe=!0,de=!1,be=!1,ce=!1):(1===this.currentEndPoint?(d=this.activePoints[this.currentEndPoint-1][0]-this.activePoints[this.currentEndPoint-1][2],m=this.activePoints[this.currentEndPoint-1][0]+this.activePoints[this.currentEndPoint-1][2],_=this.activePoints[this.currentEndPoint-1][1],T=this.activePoints[this.currentEndPoint-1][1]):(d=this.activePoints[this.currentEndPoint][0]-this.activePoints[this.currentEndPoint][2],m=this.activePoints[this.currentEndPoint][0]+this.activePoints[this.currentEndPoint][2],_=this.activePoints[this.currentEndPoint][1],T=this.activePoints[this.currentEndPoint][1]),A=d-a,q=m+a,Q=_-c,te=T+c,oe=!1,de=!1,be=!1,ce=!0),i>=A&&i<=q&&r>=Q&&r<=te){if(be||ce)(!de&&r>this.currentY||de&&r<this.currentY)&&!ce&&(this.currentY=r),(!oe&&i>this.currentX||oe&&i<this.currentX)&&!be&&(this.currentX=i);else if(!oe&&i>this.currentX||oe&&i<this.currentX){var ne=(i-d)/(m-d);oe&&(ne=1-ne),de&&(ne=1-ne);var Ae=(T-_)*ne+_;this.currentX=i,this.currentY=Ae}var Ue=.005*this.canvasWidth,bt=.005*this.canvasHeight;(!oe&&this.currentX>=m-Ue||oe&&this.currentX<=d+Ue)&&(!de&&this.currentY>=T-bt||de&&this.currentY<=_+bt)&&(this.currentX=oe?d:m,this.currentY=de?_:T,this.currentEndPoint+=1,this.currentEndPoint>this.activePoints.length-1&&this.completePath())}}}pointerUp(){this.isPointerDown=!1}pointerDown(){this.isPointerDown=!0}drawSpeedTrace(e){var i=.15*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([i,r]),a.push([this.canvasWidth-i,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-i,this.canvasHeight-r]),a.push([i,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}drawAdaptabilityTrace(e){var i=.15*this.canvasWidth,c=(this.canvasWidth-2*i)/14,d=(this.canvasHeight-.1*this.canvasHeight*2)/7,m=[];m.push([i,this.canvasHeight/2]),m.push([i+c,this.canvasHeight/2-d]),m.push([i+2*c,this.canvasHeight/2+d]),m.push([i+3*c,this.canvasHeight/2-2*d]),m.push([i+4*c,this.canvasHeight/2+2*d]),m.push([i+5*c,this.canvasHeight/2-3*d]),m.push([i+6*c,this.canvasHeight/2+3*d]),m.push([i+7*c,this.canvasHeight/2-4*d]),m.push([i+8*c,this.canvasHeight/2+3*d]),m.push([i+9*c,this.canvasHeight/2-3*d]),m.push([i+10*c,this.canvasHeight/2+2*d]),m.push([i+11*c,this.canvasHeight/2-2*d]),m.push([i+12*c,this.canvasHeight/2+d]),m.push([i+13*c,this.canvasHeight/2-d]),m.push([i+14*c,this.canvasHeight/2]);for(var _=1;_<m.length;_++)e.beginPath(),e.moveTo(m[_-1][0],m[_-1][1]),e.lineTo(m[_][0],m[_][1]),e.stroke();return m}drawPowerTrace(e){var i=.15*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([this.canvasWidth/2,this.canvasHeight/4,this.canvasWidth/2-i,this.canvasHeight/4-r,0,0,Math.PI]),a.push([this.canvasWidth/2+(this.canvasWidth/2-i),this.canvasHeight/4]),a.push([this.canvasWidth/2-(this.canvasWidth/2-i),3*this.canvasHeight/4]),a.push([this.canvasWidth/2,3*this.canvasHeight/4,this.canvasWidth/2-i,this.canvasHeight/4-r,0,0,Math.PI]),e.beginPath(),e.ellipse(a[0][0],a[0][1],a[0][2],a[0][3],a[0][4],a[0][5],a[0][6],!0),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.ellipse(a[3][0],a[3][1],a[3][2],a[3][3],a[3][4],a[3][5],a[3][6],!1),e.stroke(),a}drawEnduranceTrace(e){var i=.15*this.canvasWidth,r=.1*this.canvasHeight,d=[];d.push([i,r]),d.push([this.canvasWidth-i,r]),d.push([this.canvasWidth-i,this.canvasHeight-r]),d.push([i,this.canvasHeight-r]),d.push([i,this.canvasHeight/2]),d.push([this.canvasWidth/2,this.canvasHeight/2]);for(var m=1;m<d.length;m++)e.beginPath(),e.moveTo(d[m-1][0],d[m-1][1]),e.lineTo(d[m][0],d[m][1]),e.stroke();return d}drawFocusTrace(e){var i=.15*this.canvasWidth,r=.1*this.canvasHeight,a=[];a.push([this.canvasWidth/3,r]),a.push([this.canvasWidth/3,this.canvasHeight/6]),a.push([i,this.canvasHeight/6]),a.push([this.canvasWidth/2,this.canvasHeight-r]),a.push([this.canvasWidth-i,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,r]);for(var c=1;c<a.length;c++)e.beginPath(),e.moveTo(a[c-1][0],a[c-1][1]),e.lineTo(a[c][0],a[c][1]),e.stroke();return a}drawAccelerationTrace(e){var i=.15*this.canvasWidth,r=.1*this.canvasHeight,c=this.canvasWidth-2*i,d=this.canvasHeight-2*r,m=[];m.push([i,r]),m.push([c/5+i,r]),m.push([c/5+i,2*d/5+r]),m.push([2*c/5+i,2*d/5+r]),m.push([2*c/5+i,4*d/5+r]),m.push([3*c/5+i,4*d/5+r]),m.push([3*c/5+i,2*d/5+r]),m.push([4*c/5+i,2*d/5+r]),m.push([4*c/5+i,r]),m.push([5*c/5+i,r]);for(var _=1;_<m.length;_++)e.beginPath(),e.moveTo(m[_-1][0],m[_-1][1]),e.lineTo(m[_][0],m[_][1]),e.stroke();return m}getAnimalDistanceColor(e){var i="";return e===Ve.Flatland&&(i="#7d3f00"),e===Ve.Mountain&&(i="#1b630d"),e===Ve.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===Ve.Tundra&&(i="#28809c"),e===Ve.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e){var i="";return e===Ve.Flatland&&("night"===this.themeService.getActiveThemeName()?i="#E18B07":(this.themeService.getActiveThemeName(),i="#c66900")),e===Ve.Mountain&&("night"===this.themeService.getActiveThemeName()?i="#30b001":(this.themeService.getActiveThemeName(),i="#279113")),e===Ve.Ocean&&("night"===this.themeService.getActiveThemeName()?i="#9289CF":(this.themeService.getActiveThemeName(),i="#0000FF")),e===Ve.Tundra&&("night"===this.themeService.getActiveThemeName()?i="#019DDE":(this.themeService.getActiveThemeName(),i="#1CA1C9")),e===Ve.Volcanic&&("night"===this.themeService.getActiveThemeName()?i="#E56C6E":(this.themeService.getActiveThemeName(),i="#D92525")),i}getRandomPathType(e){var i=Object.keys(Kr),r=[];i.forEach((c,d)=>{!isNaN(Number(c))&&6!==Number(c)&&r.push(Number(c))});var a=this.utilityService.getRandomInteger(0,r.length-1);return r[a]}completePath(){this.getNewPath=!0,this.currentEndPoint=0,this.activePoints=[],this.currentX=0,this.currentY=0,this.isPointerDown=!1,this.successfulAttemptStreak+=1,this.getReward(this.currentPathType),this.associatedAnimal.trackedAnimalStats.successfulCoachingAttempts+=1,this.currentPathType=this.getRandomPathType(this.currentPathType)}getReward(e){var i=1,r=this.globalService.globalVar.resources.find(A=>"Whistle"===A.name);if(null!=r&&r.amount>0){var a=this.globalService.globalVar.modifiers.find(A=>"whistleModifier"===A.text);null!=a&&(i=a.value)}var c=this.globalService.globalVar.resources.find(A=>"Golden Whistle"===A.name);if(null!=c&&c.amount>0){var d=this.globalService.globalVar.modifiers.find(A=>"goldenWhistleModifier"===A.text);null!=d&&(i=d.value)}var m=1;if(this.globalService.globalVar.resources.find(A=>"Research Center Improvements"===A.name)){var _=this.globalService.globalVar.modifiers.find(A=>"researchCenterRewardBonusAmountModifier"===A.text);if(null!=_){var T=this.globalService.globalVar.barns.find(A=>A.barnNumber===this.selectedBarnNumber);void 0!==T&&T.barnUpgrades.specialization===ji.ResearchCenter&&(m=1+_.value*T.barnUpgrades.specializationLevel)}}i*=m,e===Kr.speed&&(this.associatedAnimal.currentStats.topSpeed+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" speed. ("+this.associatedAnimal.currentStats.topSpeed.toFixed(2)+")\n"),e===Kr.acceleration&&(this.associatedAnimal.currentStats.acceleration+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" acceleration. ("+this.associatedAnimal.currentStats.acceleration.toFixed(2)+")\n"),e===Kr.endurance&&(this.associatedAnimal.currentStats.endurance+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" endurance. ("+this.associatedAnimal.currentStats.endurance.toFixed(2)+")\n"),e===Kr.power&&(this.associatedAnimal.currentStats.power+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" power. ("+this.associatedAnimal.currentStats.power.toFixed(2)+")\n"),e===Kr.focus&&(this.associatedAnimal.currentStats.focus+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" focus. ("+this.associatedAnimal.currentStats.focus.toFixed(2)+")\n"),e===Kr.adaptability&&(this.associatedAnimal.currentStats.adaptability+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" adaptability. ("+this.associatedAnimal.currentStats.adaptability.toFixed(2)+")\n"),this.successfulAttemptStreak%5==0&&(this.globalService.increaseAbilityXp(this.associatedAnimal,i),this.incrementalCoachingUpdates+=this.animalDisplayName+" also gains "+i+" XP towards their ability "+this.associatedAnimal.ability.name+"!\n"),this.globalService.calculateAnimalRacingStats(this.associatedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(jr),Me(ki),Me(Xl),Me(Lr))},t.\u0275cmp=mi({type:t,selectors:[["app-run-coaching"]],viewQuery:function(e,i){if(1&e&&(Ba(YL,5,xn),Ba(KL,5,xn)),2&e){let r;mn(r=bn())&&(i.coachingCanvas=r.first),mn(r=bn())&&(i.drawCoaching=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},decls:15,vars:2,consts:[["id","coachingInfo"],[1,"infoGridContainer"],[1,"info"],[1,"description"],[1,"drawingDiv"],[1,"updates"],["id","drawCoaching",1,"drawCoaching"],["drawCoaching",""],[1,"drawCoachingDiv"],["id","coachingCanvas",1,"coachingCanvas",3,"pointermove","pointerdown","pointerup"],["coachingCanvas",""],[1,"coachingUpdates",3,"scrollTop","innerHTML"],["scrollMe",""]],template:function(e,i){if(1&e&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"em",3),F(4," Show your animals the way by tracing each path. Successfully making it through will reward your partner with a stat point. "),M()()()(),he(5,"br"),D(6,"div",4)(7,"div",5)(8,"div",6,7)(10,"div",8)(11,"canvas",9,10),_e("pointermove",function(a){return i.pointerMove(a)})("pointerdown",function(){return i.pointerDown()})("pointerup",function(){return i.pointerUp()}),M()()(),he(13,"div",11,12),M()()),2&e){const r=Qt(14);V(13),Y("scrollTop",r.scrollHeight)("innerHTML",i.incrementalCoachingUpdates.trim(),Si)}},styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:76.5%}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawCoaching" "coachingUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.coachingUpdates[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:inline-block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();var Uo=(()=>{return(t=Uo||(Uo={}))[t.lostFocus=0]="lostFocus",t[t.lowDrive=1]="lowDrive",t[t.outOfControl=2]="outOfControl",Uo;var t})();const QL=["coachingCanvas"],JL=["drawCoaching"],eU=["scrimmageContent"];function tU(t,n){1&t&&he(0,"div",22)}function iU(t,n){if(1&t&&he(0,"ngb-progressbar",23),2&t){const e=K();Y("value",e.currentButtonCooldown/e.buttonCooldown*100)}}function nU(t,n){if(1&t){const e=tt();D(0,"div",24)(1,"div",25)(2,"h4",26),F(3,"Scrimmage Info"),M(),D(4,"button",27),_e("click",function(){return me(e),K().closeModals()}),F(5,"X"),M()(),D(6,"div",28),F(7," During a scrimmage, your racer will race against the clock to complete paths in a certain amount of time. The faster they go, the better the rewards. At the end of each scrimmage run, your racer will be rewarded with "),D(8,"strong"),F(9,"permanent stat boosts that increase the base value of a stat after Breeding"),M(),F(10,". Complete scrimmages so that your animal can get back in the race faster after Breeding! "),he(11,"br")(12,"br"),F(13," As your racer runs, they will need the extra motivation only a coach can provide to succeed. Select the right option under the race drawing to help your animal stay on track. "),D(14,"strong"),F(15,"Choosing the right option fast enough may trigger your animal to Burst."),M(),he(16,"br")(17,"br"),D(18,"strong"),F(19),M(),F(20,", your stat boost will be increased significantly and you will increase your Chain Modifier by an amount proportional to how fast you completed the scrimmage. Your Chain Modifier is a multiplier for each subsequent stat gain during this set of scrimmages. Increasing your Chain Modifier quickly is key to getting big stat boosts! "),he(21,"br")(22,"br"),F(23),M(),D(24,"div",29)(25,"span")(26,"button",30),_e("click",function(){return me(e),K().closeModals()}),F(27,"Continue"),M()()()()}if(2&t){const e=K();V(19),He("If you complete your scrimmage in ",e.timeToBeat," seconds or less"),V(4),He(" Each animal can only scrimmage a certain amount at a time. By default, you have 15 energy. After completing Circuit Rank A, you gain 15 more for a total of 30. After starting a round of scrimmage races, a ",e.energyResetMinutes," minute timer starts. Until that timer ends, a new round of scrimmages cannot be started for that animal. ")}}const rU=function(t,n,e){return{emphasizeWhistleText:t,emphasizeFoodText:n,emphasizeEncouragementText:e}},aU=function(t){return{emphasizeFood:t}},oU=function(t){return{emphasizeEncouragement:t}},sU=function(t){return{emphasizeWhistle:t}};let lU=(()=>{class t{constructor(e,i,r,a,c,d){this.gameLoopService=e,this.globalService=i,this.themeService=r,this.utilityService=a,this.lookupService=c,this.modalService=d,this.xRaceModeModifier=10,this.timeToBeat=4,this.frameModifier=60,this.buttonCooldown=.95,this.currentButtonCooldown=0,this.chainModifier=1,this.currentStatus="",this.energyResetMinutes=15,this.pauseRace=!1,this.emphasizeWhistle=!1,this.emphasizeFood=!1,this.emphasizeEncouragement=!1,this.reachedExhaustion=!1,this.triggerBurstTimer=!1,this.burstTimer=0,this.burstThreshold=.42}keyEvent(e){("F"===e.key||"f"===e.key)&&this.showFood(),("E"===e.key||"e"===e.key)&&this.shoutEncouragement(),("W"===e.key||"w"===e.key)&&this.blowWhistle()}ngOnInit(){if(this.globalService.globalVar.tutorials.showScrimmageTutorial&&(this.pauseRace=!0,this.openScrimmageInfoModal(),this.globalService.globalVar.tutorials.showScrimmageTutorial=!1),this.timeToBeat=4,this.timeToFinishScrimmage=0,this.currentDistance=0,this.checkedForEvent=!1,this.correctOptionSelected=!1,this.currentStatus="OK",this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=i){this.associatedAnimal=i,this.maxEnergy=15,this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>26&&(this.maxEnergy=30),this.remainingEnergy=this.maxEnergy-1,this.associatedAnimal.scrimmageEnergyTimer=60*this.energyResetMinutes;var r="coloredText "+this.associatedAnimal.getCourseTypeClass();this.animalDisplayName="<span class='"+r+"'>"+this.associatedAnimal.name+"</span>"}}this.incrementalCoachingUpdates="You bring "+this.animalDisplayName+" out for some scrimmage races.\n"}ngAfterViewInit(){this.setupCanvas(),null!=this.drawCoaching&&(this.canvasOffsetX=this.drawCoaching.nativeElement.offsetLeft,this.canvasOffsetY=this.drawCoaching.nativeElement.offsetTop),this.context=this.coachingCanvas.nativeElement.getContext("2d"),this.context.lineWidth=6,this.setDefaultMaxSpeedAndVelocity(),this.event=this.getRandomScrimmageType(),this.event===Uo.lowDrive&&(this.checkedForEvent=!0,this.maxSpeed/=3,this.velocity/=3,this.incrementalCoachingUpdates=this.animalDisplayName+" is off to a slow start, not caring about how well they do.\n",this.currentStatus="Low Drive",this.emphasizeFood=!0,this.triggerBurstTimer=!0),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{!this.pauseRace&&!this.reachedExhaustion&&(this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=6,this.displayScrimmage(this.context,i))})}setupCanvas(){void 0!==this.coachingCanvas&&(this.coachingCanvas.nativeElement.style.width="100%",this.coachingCanvas.nativeElement.style.height="100%",this.coachingCanvas.nativeElement.width=this.coachingCanvas.nativeElement.offsetWidth,this.coachingCanvas.nativeElement.height=this.coachingCanvas.nativeElement.offsetHeight,this.canvasHeight=this.coachingCanvas.nativeElement.height,this.canvasWidth=this.coachingCanvas.nativeElement.width)}displayScrimmage(e,i){e.lineCap="round",e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.timeToFinishScrimmage+=i,this.currentButtonCooldown-=i,this.currentButtonCooldown<=0&&(this.currentButtonCooldown=0),this.triggerBurstTimer&&(this.burstTimer+=i),this.currentDistance+=this.velocity,this.currentDistance>=this.canvasWidth/2&&this.event===Uo.lostFocus&&!this.checkedForEvent&&(this.checkedForEvent=!0,this.velocity=.35*this.velocity,this.incrementalCoachingUpdates+=this.animalDisplayName+" loses focus!\n",this.currentStatus="Lost Focus",this.emphasizeWhistle=!0,this.triggerBurstTimer=!0),this.currentDistance>=this.canvasWidth/4&&this.event===Uo.outOfControl&&!this.checkedForEvent&&(this.checkedForEvent=!0,this.incrementalCoachingUpdates+=this.animalDisplayName+" looks like they are losing control and may stumble!\n",this.currentStatus="Stumbling",this.emphasizeEncouragement=!0,this.triggerBurstTimer=!0),this.currentDistance>=3*this.canvasWidth/4&&this.event===Uo.outOfControl&&this.checkedForEvent&&!this.correctOptionSelected&&"Stumbled"!==this.currentStatus&&(this.velocity/=5,this.incrementalCoachingUpdates+=this.animalDisplayName+" stumbled!\n",this.currentStatus="Stumbled",this.emphasizeEncouragement=!1),this.currentDistance>=this.canvasWidth&&this.scrimmageComplete(),this.drawPath(),this.drawRacer(),this.associatedAnimal.raceCourseType===Ve.Tundra&&this.drawIcyBackground()}blowWhistle(){this.currentButtonCooldown>0||(this.currentButtonCooldown=this.buttonCooldown,this.event===Uo.lostFocus&&this.checkedForEvent&&(this.setDefaultMaxSpeedAndVelocity(),this.correctOptionSelected=!0,this.incrementalCoachingUpdates+="You blow your whistle, jolting "+this.animalDisplayName+" back to focus.\n",this.currentStatus="OK",this.emphasizeWhistle=!1,console.log(this.burstTimer+" vs "+this.burstThreshold),this.burstTimer<=this.burstThreshold&&(this.incrementalCoachingUpdates+=this.animalDisplayName+" BURSTS!\n",this.velocity*=1.25,this.currentStatus="BURST!")))}showFood(){this.currentButtonCooldown>0||(this.currentButtonCooldown=this.buttonCooldown,this.event===Uo.lowDrive&&this.checkedForEvent&&(this.setDefaultMaxSpeedAndVelocity(),this.correctOptionSelected=!0,this.incrementalCoachingUpdates+="You hold a treat at the end of the finish line, giving "+this.animalDisplayName+" the inspiration to continue.\n",this.currentStatus="OK",this.emphasizeFood=!1,console.log(this.burstTimer+" vs "+this.burstThreshold),this.burstTimer<=this.burstThreshold&&(this.incrementalCoachingUpdates+=this.animalDisplayName+" BURSTS!\n",this.velocity*=1.25,this.currentStatus="BURST!")))}shoutEncouragement(){this.currentButtonCooldown>0||(this.currentButtonCooldown=this.buttonCooldown,this.event===Uo.outOfControl&&this.checkedForEvent&&"Stumbled"!==this.currentStatus&&(this.setDefaultMaxSpeedAndVelocity(),this.correctOptionSelected=!0,this.incrementalCoachingUpdates+="You shout encouragement at "+this.animalDisplayName+" and they regain their composure.\n",this.currentStatus="OK",this.emphasizeEncouragement=!1,console.log(this.burstTimer+" vs "+this.burstThreshold),this.burstTimer<=this.burstThreshold&&(this.incrementalCoachingUpdates+=this.animalDisplayName+" BURSTS!\n",this.velocity*=1.25,this.currentStatus="BURST!")))}drawRacer(){this.context.fillStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),this.context.globalCompositeOperation="source-atop",this.context.fillRect(0,0,this.currentDistance-5,this.canvasHeight);var e=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType);"BURST!"===this.currentStatus?e=this.utilityService.shadeColor(e,90):("Lost Focus"===this.currentStatus||"Stumbling"===this.currentStatus||"Low Drive"===this.currentStatus)&&(e=this.utilityService.shadeColor(e,-90)),this.context.fillStyle=e,this.context.fillRect(this.currentDistance-5,0,5,this.canvasHeight)}getAnimalDistanceColor(e){var i="";return e===Ve.Flatland&&(i="#7d3f00"),e===Ve.Mountain&&(i="#1b630d"),e===Ve.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===Ve.Tundra&&(i="#28809c"),e===Ve.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e){var i="";return e===Ve.Flatland&&("night"===this.themeService.getActiveThemeName()?i="#E18B07":(this.themeService.getActiveThemeName(),i="#c66900")),e===Ve.Mountain&&("night"===this.themeService.getActiveThemeName()?i="#30b001":(this.themeService.getActiveThemeName(),i="#279113")),e===Ve.Ocean&&("night"===this.themeService.getActiveThemeName()?i="#9289CF":(this.themeService.getActiveThemeName(),i="#0000FF")),e===Ve.Tundra&&("night"===this.themeService.getActiveThemeName()?i="#019DDE":(this.themeService.getActiveThemeName(),i="#1CA1C9")),e===Ve.Volcanic&&("night"===this.themeService.getActiveThemeName()?i="#E56C6E":(this.themeService.getActiveThemeName(),i="#D92525")),i}scrimmageComplete(){var e=this.getRandomStatType(),i=(8-this.timeToFinishScrimmage)/100;i<.01&&(i=.01),i*=this.chainModifier,this.timeToFinishScrimmage<=this.timeToBeat&&(i*=4,this.chainModifier+=(this.timeToBeat-this.timeToFinishScrimmage)/5,this.chainModifier=Math.round(1e4*(this.chainModifier+Number.EPSILON))/1e4);var r=1;if(this.globalService.globalVar.resources.find(d=>"Research Center Improvements"===d.name)){var a=this.globalService.globalVar.modifiers.find(d=>"researchCenterRewardBonusAmountModifier"===d.text);if(null!=a){var c=this.globalService.globalVar.barns.find(d=>d.barnNumber===this.selectedBarnNumber);void 0!==c&&c.barnUpgrades.specialization===ji.ResearchCenter&&(r=1+a.value*c.barnUpgrades.specializationLevel)}}if(i*=r,e===Dt.topSpeed&&(this.associatedAnimal.increasedDefaultStats.topSpeed+=i),e===Dt.acceleration&&(this.associatedAnimal.increasedDefaultStats.acceleration+=i),e===Dt.endurance&&(this.associatedAnimal.increasedDefaultStats.endurance+=i),e===Dt.power&&(this.associatedAnimal.increasedDefaultStats.power+=i),e===Dt.focus&&(this.associatedAnimal.increasedDefaultStats.focus+=i),e===Dt.adaptability&&(this.associatedAnimal.increasedDefaultStats.adaptability+=i),this.incrementalCoachingUpdates+="Finished the scrimmage in "+this.timeToFinishScrimmage.toFixed(2)+" seconds and raised the default value of its base "+this.lookupService.getStatNameFromEnum(e)+" by "+i.toFixed(3)+".\n",this.currentDistance=0,this.timeToFinishScrimmage=0,this.remainingEnergy<=0)return this.remainingEnergy=0,this.currentButtonCooldown=0,this.currentStatus="Tired",this.reachedExhaustion=!0,void(this.incrementalCoachingUpdates+=this.animalDisplayName+" needs to stop and take a breather before they can continue. Revisit this page to continue another time. Final chain modifier: <b>"+this.chainModifier+"</b>\n");this.event=this.getRandomScrimmageType(),this.maxSpeed=this.canvasWidth/(this.timeToBeat*this.frameModifier),this.velocity=this.maxSpeed,this.checkedForEvent=!1,this.correctOptionSelected=!1,this.currentStatus="OK",this.emphasizeWhistle=!1,this.emphasizeFood=!1,this.emphasizeEncouragement=!1,this.triggerBurstTimer=!1,this.burstTimer=0,this.remainingEnergy-=1,this.event===Uo.lowDrive&&(this.checkedForEvent=!0,this.maxSpeed/=3,this.velocity/=3,this.incrementalCoachingUpdates+=this.animalDisplayName+" is off to a slow start, not really caring how well they do.\n",this.currentStatus="Low Drive",this.emphasizeFood=!0,this.triggerBurstTimer=!0)}drawPath(){this.context.globalCompositeOperation="source-over",this.associatedAnimal.raceCourseType===Ve.Flatland&&this.drawFlatlandScrimmage(),this.associatedAnimal.raceCourseType===Ve.Mountain&&this.drawMountainScrimmage(),this.associatedAnimal.raceCourseType===Ve.Ocean&&this.drawOceanScrimmage(),this.associatedAnimal.raceCourseType===Ve.Tundra&&this.drawTundraScrimmage(),this.associatedAnimal.raceCourseType===Ve.Volcanic&&this.drawVolcanicScrimmage()}drawFlatlandScrimmage(){var e=.05*this.canvasWidth*this.xRaceModeModifier;null==this.xDistanceOffset&&(this.xDistanceOffset=0),null==this.yDistanceOffset&&(this.yDistanceOffset=0),this.context.beginPath(),this.context.moveTo(this.xDistanceOffset,this.canvasHeight/2),this.context.lineTo(e-this.xDistanceOffset,this.canvasHeight/2),this.context.stroke();var i=e-this.xDistanceOffset,r=this.canvasHeight/2,a=.04*e,c=.23*e,d=1.2173*c,m=.04*e,_=d,T=m+c,A=d,q=T+c,Q=d,te=q,de=q,be=d,ce=de+c,ne=d,Ae=ce+c,Ue=d,bt=Ae;this.context.beginPath(),this.context.moveTo(i,r),this.context.lineTo(i+a,r),this.context.stroke(),this.context.beginPath(),this.context.moveTo(i+a,r),this.context.bezierCurveTo(i+a,r,i+m,r+_,i+T,r+A),this.context.bezierCurveTo(i+T,r+A,i+q,r+Q,i+te,r),this.context.stroke(),this.context.beginPath(),this.context.moveTo(i+te,r),this.context.bezierCurveTo(i+te,r,i+de,r-be,i+ce,r-ne),this.context.bezierCurveTo(i+ce,r-ne,i+Ae,r-Ue,i+Ae,r),this.context.stroke(),this.context.beginPath(),this.context.moveTo(i+Ae,r),this.context.lineTo(i+bt+a,r),this.context.stroke()}drawMountainScrimmage(){this.context.beginPath(),this.context.moveTo(0,4*this.canvasHeight/5),this.context.lineTo(this.canvasWidth/2,this.canvasHeight/5),this.context.stroke(),this.context.beginPath(),this.context.moveTo(this.canvasWidth/2,this.canvasHeight/5),this.context.lineTo(this.canvasWidth,4*this.canvasHeight/5),this.context.stroke()}drawOceanScrimmage(){var e=.05*this.canvasWidth*this.xRaceModeModifier;null==this.xDistanceOffset&&(this.xDistanceOffset=0),null==this.yDistanceOffset&&(this.yDistanceOffset=0);var Q=this.canvasHeight/2,i=e/3,r=e/6,a=!1,c=(q=this.xDistanceOffset)+i,d=a?Q+r:Q-r,m=q+2*i,_=a?Q+r:Q-r,T=q+3*i,A=Q;this.context.beginPath(),this.context.moveTo(q,Q),this.context.bezierCurveTo(c,d,m,_,T,A),this.context.stroke();var q,te=e/3,oe=e/3;a=!0;var de=(q=e)+te/3,be=Q=this.canvasHeight/2,ce=q+te/3,ne=Q-oe,Ae=q+te,Ue=Q-.6*oe;this.context.beginPath(),this.context.moveTo(q,Q),this.context.bezierCurveTo(de,be,ce,ne,Ae,Ue),this.context.stroke();var bt=Ae-te/3,nt=Ue-oe/10,pt=Ae-te/3,lt=Ue+.6*oe,kt=Ae,At=Q;this.context.beginPath(),this.context.moveTo(Ae,Ue),this.context.bezierCurveTo(bt,nt,pt,lt,kt,At),this.context.stroke();var Rt=kt+te/3,Bt=At,jt=kt+te/3,Ui=At-oe,Ht=kt+te,ai=At-.6*oe;this.context.beginPath(),this.context.moveTo(kt,At),this.context.bezierCurveTo(Rt,Bt,jt,Ui,Ht,ai),this.context.stroke();var wi=Ht-te/3,yi=ai-oe/10,Ze=Ht-te/3,fe=ai+.6*oe,oi=Ht,fi=Q;this.context.beginPath(),this.context.moveTo(Ht,ai),this.context.bezierCurveTo(wi,yi,Ze,fe,oi,fi),this.context.stroke();var Ai=oi+te/3,Ki=fi,ti=oi+te/3,en=fi-oe,Nt=oi+te,Sn=fi-.6*oe;this.context.beginPath(),this.context.moveTo(oi,fi),this.context.bezierCurveTo(Ai,Ki,ti,en,Nt,Sn),this.context.stroke();var pr=Nt-te/3,Bn=Sn-oe/10,Rn=Nt-te/3,un=Sn+.6*oe,Dn=Nt,hn=Q;this.context.beginPath(),this.context.moveTo(Nt,Sn),this.context.bezierCurveTo(pr,Bn,Rn,un,Dn,hn),this.context.stroke()}drawTundraScrimmage(){var e=.05*this.canvasWidth*this.xRaceModeModifier;this.context.beginPath(),this.context.moveTo(0,this.canvasHeight/2),this.context.lineTo(2*e,this.canvasHeight/2),this.context.stroke()}drawIcyBackground(){var e=.05*this.canvasWidth*this.xRaceModeModifier,i=e/4,r=this.context.globalCompositeOperation;this.context.globalCompositeOperation="destination-over",this.context.fillStyle="gray",this.context.beginPath(),this.context.moveTo(0,this.canvasHeight/2),this.context.lineTo(0,this.canvasHeight/2+i),this.context.lineTo(e,this.canvasHeight/2+i),this.context.lineTo(e,this.canvasHeight/2-i),this.context.lineTo(0,this.canvasHeight/2-i),this.context.fill(),i=e/6,this.context.beginPath(),this.context.moveTo(e,this.canvasHeight/2),this.context.lineTo(e,this.canvasHeight/2+i),this.context.lineTo(2*e,this.canvasHeight/2+i),this.context.lineTo(2*e,this.canvasHeight/2-i),this.context.lineTo(e,this.canvasHeight/2-i),this.context.fill(),this.context.globalCompositeOperation=r}drawVolcanicScrimmage(){var e=.05*this.canvasWidth*this.xRaceModeModifier,r=.05*e,m=e,_=this.canvasHeight/2,T=this.canvasHeight/3,A=e-r,q=Math.PI/2;this.context.beginPath(),this.context.moveTo(0,this.canvasHeight/2),this.context.lineTo(r,this.canvasHeight/2),this.context.stroke(),this.context.beginPath(),this.context.moveTo(this.canvasWidth-r,this.canvasHeight/2),this.context.lineTo(this.canvasWidth,this.canvasHeight/2),this.context.stroke(),this.context.beginPath(),this.context.ellipse(m,_,T,A,q,Math.PI/180*90,Math.PI/180*270,!0),this.context.stroke()}getRandomScrimmageType(){var e=Object.keys(Uo),i=[];e.forEach((a,c)=>{!isNaN(Number(a))&&6!==Number(a)&&i.push(Number(a))});var r=this.utilityService.getRandomInteger(0,i.length-1);return i[r]}setDefaultMaxSpeedAndVelocity(){this.maxSpeed=this.canvasWidth/((this.timeToBeat-1.75)*this.frameModifier),this.velocity=this.maxSpeed}pauseRaceAnimation(){this.pauseRace=!this.pauseRace}getRandomStatType(){var e=Object.keys(Dt),i=[];e.forEach((a,c)=>{!isNaN(Number(a))&&6!==Number(a)&&i.push(Number(a))});var r=this.utilityService.getRandomInteger(0,i.length-1);return i[r]}openScrimmageInfoModal(){this.modalService.open(this.scrimmageContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(e=>{this.closeModals()},e=>{this.closeModals()})}closeModals(){this.pauseRace=!1,this.modalService.dismissAll()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(jr),Me(ki),Me(Xl),Me(Lr),Me(yn),Me(ss))},t.\u0275cmp=mi({type:t,selectors:[["app-scrimmage"]],viewQuery:function(e,i){if(1&e&&(Ba(QL,5,xn),Ba(JL,5,xn),Ba(eU,7)),2&e){let r;mn(r=bn())&&(i.coachingCanvas=r.first),mn(r=bn())&&(i.drawCoaching=r.first),mn(r=bn())&&(i.scrimmageContent=r.first)}},hostBindings:function(e,i){1&e&&_e("keyup",function(a){return i.keyEvent(a)},!1,Do)},inputs:{selectedBarnNumber:"selectedBarnNumber"},decls:51,vars:28,consts:[["id","coachingInfo"],[1,"info"],[1,"description"],[1,"drawingDiv"],[1,"updates"],["id","drawCoaching",1,"drawCoaching"],["drawCoaching",""],[1,"drawCoachingDiv"],[1,"scrimmageHeaderInfo"],[3,"click"],["id","coachingCanvas",1,"coachingCanvas"],["coachingCanvas",""],[1,"buttonSpread"],[1,"keyword",3,"innerHTML"],[1,"keyword",3,"ngClass","innerHTML"],[3,"disabled","ngClass","click"],[1,"underline"],["class","progressBarHeight",4,"ngIf"],["height",".5rem",3,"value",4,"ngIf"],[1,"coachingUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],["scrimmageContent",""],[1,"progressBarHeight"],["height",".5rem",3,"value"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"]],template:function(e,i){if(1&e&&(D(0,"div",0)(1,"div")(2,"div",1)(3,"em",2),F(4," Help your partner race as fast as possible. Successfully making it through will reward your partner with a permanent boost to their default base stat value after Breeding. "),M()()()(),he(5,"br"),D(6,"div",3)(7,"div",4)(8,"div",5,6)(10,"div",7)(11,"div",8)(12,"div")(13,"span"),F(14,"Scrimmage Energy:"),M(),F(15),Di(16,"number"),M(),D(17,"div")(18,"button",9),_e("click",function(){return i.pauseRaceAnimation()}),F(19,"Pause"),M()()(),he(20,"canvas",10,11),D(22,"div",12)(23,"span"),F(24,"Chain Modifier: "),he(25,"span",13),M(),D(26,"span"),F(27,"Current Status: "),he(28,"span",14),M()(),D(29,"div",12)(30,"button",15),_e("click",function(){return i.showFood()}),F(31,"Show "),D(32,"span",16),F(33,"F"),M(),F(34,"ood"),M(),D(35,"button",15),_e("click",function(){return i.shoutEncouragement()}),F(36,"Shout "),D(37,"span",16),F(38,"E"),M(),F(39,"ncouragement"),M(),D(40,"button",15),_e("click",function(){return i.blowWhistle()}),F(41,"Blow "),D(42,"span",16),F(43,"W"),M(),F(44,"histle"),M()(),pe(45,tU,1,0,"div",17),pe(46,iU,1,1,"ngb-progressbar",18),M()(),he(47,"div",19,20),M()(),pe(49,nU,28,2,"ng-template",null,21,ni)),2&e){const r=Qt(48);V(15),Mn(" ",Yi(16,15,i.remainingEnergy,"1.0-0")," / ",i.maxEnergy,""),V(10),Y("innerHTML",i.chainModifier,Si),V(3),Y("ngClass",function lh(t,n,e,i,r,a){return p2(Et(),Ha(),t,n,e,i,r,a)}(18,rU,i.emphasizeWhistle,i.emphasizeFood,i.emphasizeEncouragement))("innerHTML",i.currentStatus,Si),V(2),Y("disabled",i.currentButtonCooldown>0)("ngClass",hi(22,aU,i.emphasizeFood)),V(5),Y("disabled",i.currentButtonCooldown>0)("ngClass",hi(24,oU,i.emphasizeEncouragement)),V(5),Y("disabled",i.currentButtonCooldown>0)("ngClass",hi(26,sU,i.emphasizeWhistle)),V(5),Y("ngIf",0===i.currentButtonCooldown),V(1),Y("ngIf",i.currentButtonCooldown>0),V(1),Y("scrollTop",r.scrollHeight)("innerHTML",i.incrementalCoachingUpdates.trim(),Si)}},directives:[_r,on,Zd],pipes:[ts],styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.updates[_ngcontent-%COMP%]{white-space:pre;height:80%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:60%}.underline[_ngcontent-%COMP%]{text-decoration:underline}.progressBarHeight[_ngcontent-%COMP%]{height:.5rem}.buttonSpread[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.emphasizeFood[_ngcontent-%COMP%]{border:2px solid green;color:green;font-weight:700}.emphasizeWhistle[_ngcontent-%COMP%]{border:2px solid blue;color:#00f;font-weight:700}.emphasizeEncouragement[_ngcontent-%COMP%]{border:2px solid red;color:red;font-weight:700}.emphasizeFoodText[_ngcontent-%COMP%]{color:green}.emphasizeWhistleText[_ngcontent-%COMP%]{color:#00f}.emphasizeEncouragementText[_ngcontent-%COMP%]{color:red}.scrimmageHeaderInfo[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.mobileVersion[_ngcontent-%COMP%]{display:none}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{white-space:initial;height:initial;width:initial;display:initial;grid-template-columns:initial;grid-template-rows:initial;justify-content:initial;gap:initial;grid-template-areas:initial}.headerInfo[_ngcontent-%COMP%]{width:100%}.coachingUpdates[_ngcontent-%COMP%]{height:50%;text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();const cU=["coachingCanvas"],uU=["drawCoaching"];function dU(t,n){1&t&&(D(0,"span",13),F(1,"!"),M())}function fU(t,n){if(1&t&&(D(0,"em",14),F(1),M()),2&t){const e=K(2);V(1),He("(Retry in ",e.scrimmageRestingTimeRemaining,")")}}function hU(t,n){if(1&t){const e=tt();D(0,"div")(1,"button",10),_e("click",function(){me(e);const r=K();return r.changeDisplayCoachingView(r.coachingTypeEnum.scrimmage)}),pe(2,dU,2,0,"span",11),F(3,"Scrimmage"),M(),pe(4,fU,2,1,"em",12),M()}if(2&t){const e=K();V(1),Y("disabled",e.restingForScrimmage)("ngClass",e.displayCoachingView===e.coachingTypeEnum.scrimmage?"filterActive":""),V(1),Y("ngIf",e.showScrimmageIcon),V(2),Y("ngIf",e.restingForScrimmage)}}function pU(t,n){1&t&&he(0,"app-run-coaching",15),2&t&&Y("selectedBarnNumber",K().selectedBarnNumber)}function gU(t,n){1&t&&he(0,"app-scrimmage",15),2&t&&Y("selectedBarnNumber",K().selectedBarnNumber)}let vU=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.isCoachingEmitter=new di,this.isPointerDown=!1,this.activePoints=[],this.currentEndPoint=0,this.currentX=0,this.currentY=0,this.getNewPath=!1,this.coachingTypeEnum=gu,this.showScrimmageIcon=!1,this.scrimmagesUnlocked=!1}ngOnInit(){var e=this;if(this.displayCoachingView=gu.coaching,this.lookupService.isItemUnlocked("scrimmages")&&(this.scrimmagesUnlocked=!0),this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var r=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);null!=r&&(this.associatedAnimal=r)}this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var a=Wa(function*(c){e.showScrimmageIcon=e.globalService.globalVar.tutorials.showScrimmageTutorial,e.restingForScrimmage=e.associatedAnimal.scrimmageEnergyTimer>0,e.scrimmageRestingTimeRemaining=e.utilityService.convertSecondsToMMSS(e.associatedAnimal.scrimmageEnergyTimer)});return function(c){return a.apply(this,arguments)}}())}returnToSelectedBarnView(){this.isCoachingEmitter.emit(!1)}changeDisplayCoachingView(e){this.displayCoachingView=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.isCoachingEmitter.emit(!1)}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(jr),Me(Lr),Me(yn))},t.\u0275cmp=mi({type:t,selectors:[["app-coaching"]],viewQuery:function(e,i){if(1&e&&(Ba(cU,5,xn),Ba(uU,5,xn)),2&e){let r;mn(r=bn())&&(i.coachingCanvas=r.first),mn(r=bn())&&(i.drawCoaching=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{isCoachingEmitter:"isCoachingEmitter"},decls:15,vars:4,consts:[[1,"coachingView"],[1,"marginDiv"],[1,"info"],[1,"flex"],[1,"coachingGridContainer"],[1,"buttonAsText","coaching","s5Heading","clickableText",3,"ngClass","click"],[4,"ngIf"],[1,"back"],[3,"click"],[3,"selectedBarnNumber",4,"ngIf"],[1,"buttonAsText","scrimmage","s5Heading","clickableText",3,"disabled","ngClass","click"],["class","availableIcon",4,"ngIf"],["class","smallText rightSpaced",4,"ngIf"],[1,"availableIcon"],[1,"smallText","rightSpaced"],[3,"selectedBarnNumber"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),he(4,"div"),D(5,"div",4)(6,"button",5),_e("click",function(){return i.changeDisplayCoachingView(i.coachingTypeEnum.coaching)}),F(7,"Coaching"),M(),pe(8,hU,5,4,"div",6),M(),D(9,"div",7)(10,"button",8),_e("click",function(){return i.returnToSelectedBarnView()}),F(11,"Back"),M()()(),he(12,"hr"),M(),pe(13,pU,1,1,"app-run-coaching",9),pe(14,gU,1,1,"app-scrimmage",9),M()()),2&e&&(V(6),Y("ngClass",i.displayCoachingView===i.coachingTypeEnum.coaching?"filterActive":""),V(2),Y("ngIf",i.scrimmagesUnlocked),V(5),Y("ngIf",i.displayCoachingView===i.coachingTypeEnum.coaching),V(1),Y("ngIf",i.displayCoachingView===i.coachingTypeEnum.scrimmage))},directives:[_r,on,ZL,lU],styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.availableIcon[_ngcontent-%COMP%]{color:var(--foreground-quaternary);border-radius:25px;background:var(--background-five);padding:0 .5rem;margin-right:.25rem}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.coachingGridContainer[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:space-around}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary);-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.rightSpaced[_ngcontent-%COMP%]{margin-left:.5rem}.smallText[_ngcontent-%COMP%]{font-size:1rem}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:76.5%}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawCoaching" "coachingUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.coachingUpdates[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:inline-block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();function mU(t,n){if(1&t){const e=tt();D(0,"div",4)(1,"span",5)(2,"label")(3,"input",6),_e("ngModelChange",function(r){return me(e),K().swapBarnMode=r})("input",function(){return me(e),K().swapBarnModeToggle()}),M(),D(4,"span"),F(5,"Swap Barn Mode"),M()()(),D(6,"span",5)(7,"label")(8,"input",7),_e("ngModelChange",function(r){return me(e),K().isCondensedView=r})("input",function(){return me(e),K().quickViewBarnToggle()}),M(),D(9,"span"),F(10,"Minimized Barn View"),M()()(),D(11,"span")(12,"button",8),_e("click",function(){return me(e),K().refreshTraining()}),F(13,"\u21bb Refresh Training"),M()()()}if(2&t){const e=K();V(1),Y("ngbPopover",e.swapBarnModePopoverText),V(2),Y("ngModel",e.swapBarnMode),V(3),Y("ngbPopover",e.quickViewBarnModePopoverText),V(2),Y("ngModel",e.isCondensedView),V(4),Y("ngbPopover",e.refreshTrainingPopoverText)}}const Zn=function(t){return{pointerCursor:t}};function bU(t,n){if(1&t){const e=tt();D(0,"div",21)(1,"app-barn",22),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[3].barnNumber)("draggable",e.swapBarnMode)}}function _U(t,n){if(1&t){const e=tt();D(0,"div",23)(1,"app-barn",24),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[4].barnNumber)("draggable",e.swapBarnMode)}}function yU(t,n){if(1&t){const e=tt();D(0,"div",25)(1,"app-barn",26),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[5].barnNumber)("draggable",e.swapBarnMode)}}function wU(t,n){if(1&t&&(D(0,"div",10),pe(1,bU,2,5,"div",18),pe(2,_U,2,5,"div",19),pe(3,yU,2,5,"div",20),M()),2&t){const e=K(2);V(1),Y("ngIf",e.barnRow2IsUnlocked),V(1),Y("ngIf",e.barnRow2IsUnlocked),V(1),Y("ngIf",e.barnRow2IsUnlocked)}}function SU(t,n){if(1&t){const e=tt();D(0,"div",30)(1,"app-barn",31),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[6].barnNumber)("draggable",e.swapBarnMode)}}function CU(t,n){if(1&t){const e=tt();D(0,"div",32)(1,"app-barn",33),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[7].barnNumber)("draggable",e.swapBarnMode)}}function TU(t,n){if(1&t){const e=tt();D(0,"div",34)(1,"app-barn",35),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[8].barnNumber)("draggable",e.swapBarnMode)}}function MU(t,n){if(1&t&&(D(0,"div",10),pe(1,SU,2,5,"div",27),pe(2,CU,2,5,"div",28),pe(3,TU,2,5,"div",29),M()),2&t){const e=K(2);V(1),Y("ngIf",e.barnRow3IsUnlocked),V(1),Y("ngIf",e.barnRow3IsUnlocked),V(1),Y("ngIf",e.barnRow3IsUnlocked)}}function xU(t,n){if(1&t){const e=tt();D(0,"div",39)(1,"app-barn",40),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[9].barnNumber)("draggable",e.swapBarnMode)}}function RU(t,n){if(1&t){const e=tt();D(0,"div",41)(1,"app-barn",42),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[10].barnNumber)("draggable",e.swapBarnMode)}}function DU(t,n){if(1&t){const e=tt();D(0,"div",43)(1,"app-barn",44),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[11].barnNumber)("draggable",e.swapBarnMode)}}function kU(t,n){if(1&t&&(D(0,"div",10),pe(1,xU,2,5,"div",36),pe(2,RU,2,5,"div",37),pe(3,DU,2,5,"div",38),M()),2&t){const e=K(2);V(1),Y("ngIf",e.barnRow4IsUnlocked),V(1),Y("ngIf",e.barnRow4IsUnlocked),V(1),Y("ngIf",e.barnRow4IsUnlocked)}}function AU(t,n){if(1&t){const e=tt();D(0,"div",48)(1,"app-barn",49),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[12].barnNumber)("draggable",e.swapBarnMode)}}function PU(t,n){if(1&t){const e=tt();D(0,"div",50)(1,"app-barn",51),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[13].barnNumber)("draggable",e.swapBarnMode)}}function EU(t,n){if(1&t){const e=tt();D(0,"div",52)(1,"app-barn",53),_e("selectedBarn",function(r){return me(e),K(3).goToBarn(r)})("dragstart",function(r){return me(e),K(3).dragStart(r)})("dragover",function(r){return me(e),K(3).allowDrop(r)})("drop",function(r){return me(e),K(3).dropBarn(r)}),M()()}if(2&t){const e=K(3);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[14].barnNumber)("draggable",e.swapBarnMode)}}function IU(t,n){if(1&t&&(D(0,"div",10),pe(1,AU,2,5,"div",45),pe(2,PU,2,5,"div",46),pe(3,EU,2,5,"div",47),M()),2&t){const e=K(2);V(1),Y("ngIf",e.barnRow5IsUnlocked),V(1),Y("ngIf",e.barnRow5IsUnlocked),V(1),Y("ngIf",e.barnRow5IsUnlocked)}}function BU(t,n){if(1&t){const e=tt();D(0,"div",9)(1,"div",10)(2,"div",11)(3,"app-barn",12),_e("selectedBarn",function(r){return me(e),K().goToBarn(r)})("dragstart",function(r){return me(e),K().dragStart(r)})("dragover",function(r){return me(e),K().allowDrop(r)})("drop",function(r){return me(e),K().dropBarn(r)}),M()(),D(4,"div",13)(5,"app-barn",14),_e("selectedBarn",function(r){return me(e),K().goToBarn(r)})("dragstart",function(r){return me(e),K().dragStart(r)})("dragover",function(r){return me(e),K().allowDrop(r)})("drop",function(r){return me(e),K().dropBarn(r)}),M()(),D(6,"div",15)(7,"app-barn",16),_e("selectedBarn",function(r){return me(e),K().goToBarn(r)})("dragstart",function(r){return me(e),K().dragStart(r)})("dragover",function(r){return me(e),K().allowDrop(r)})("drop",function(r){return me(e),K().dropBarn(r)}),M()()(),pe(8,wU,4,3,"div",17),pe(9,MU,4,3,"div",17),pe(10,kU,4,3,"div",17),pe(11,IU,4,3,"div",17),M()}if(2&t){const e=K();V(2),Y("ngClass",e.tutorialActive?"tutorialActive":""),V(1),Y("ngClass",hi(14,Zn,e.swapBarnMode))("barnNumber",e.allBarns[0].barnNumber)("draggable",e.swapBarnMode),V(2),Y("ngClass",hi(16,Zn,e.swapBarnMode))("barnNumber",e.allBarns[1].barnNumber)("draggable",e.swapBarnMode),V(2),Y("ngClass",hi(18,Zn,e.swapBarnMode))("barnNumber",e.allBarns[2].barnNumber)("draggable",e.swapBarnMode),V(1),Y("ngIf",e.barnRow2IsUnlocked),V(1),Y("ngIf",e.barnRow3IsUnlocked),V(1),Y("ngIf",e.barnRow4IsUnlocked),V(1),Y("ngIf",e.barnRow5IsUnlocked)}}function OU(t,n){if(1&t){const e=tt();D(0,"div",71)(1,"app-barn",22),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[3].barnNumber)("draggable",e.swapBarnMode)}}function VU(t,n){if(1&t){const e=tt();D(0,"div",72)(1,"app-barn",24),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[4].barnNumber)("draggable",e.swapBarnMode)}}function NU(t,n){if(1&t){const e=tt();D(0,"div",73)(1,"app-barn",26),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[5].barnNumber)("draggable",e.swapBarnMode)}}function FU(t,n){if(1&t){const e=tt();D(0,"div",74)(1,"app-barn",31),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[6].barnNumber)("draggable",e.swapBarnMode)}}function LU(t,n){if(1&t){const e=tt();D(0,"div",75)(1,"app-barn",33),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[7].barnNumber)("draggable",e.swapBarnMode)}}function UU(t,n){if(1&t){const e=tt();D(0,"div",76)(1,"app-barn",35),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[8].barnNumber)("draggable",e.swapBarnMode)}}function HU(t,n){if(1&t){const e=tt();D(0,"div",77)(1,"app-barn",40),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[9].barnNumber)("draggable",e.swapBarnMode)}}function GU(t,n){if(1&t){const e=tt();D(0,"div",78)(1,"app-barn",42),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[10].barnNumber)("draggable",e.swapBarnMode)}}function zU(t,n){if(1&t){const e=tt();D(0,"div",79)(1,"app-barn",44),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[11].barnNumber)("draggable",e.swapBarnMode)}}function jU(t,n){if(1&t){const e=tt();D(0,"div",80)(1,"app-barn",49),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[12].barnNumber)("draggable",e.swapBarnMode)}}function qU(t,n){if(1&t){const e=tt();D(0,"div",81)(1,"app-barn",51),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[13].barnNumber)("draggable",e.swapBarnMode)}}function $U(t,n){if(1&t){const e=tt();D(0,"div",82)(1,"app-barn",53),_e("selectedBarn",function(r){return me(e),K(2).goToBarn(r)})("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropBarn(r)}),M()()}if(2&t){const e=K(2);V(1),Y("ngClass",hi(3,Zn,e.swapBarnMode))("barnNumber",e.allBarns[14].barnNumber)("draggable",e.swapBarnMode)}}function WU(t,n){if(1&t){const e=tt();D(0,"div",54)(1,"div",55)(2,"div",56)(3,"app-barn",12),_e("selectedBarn",function(r){return me(e),K().goToBarn(r)})("dragstart",function(r){return me(e),K().dragStart(r)})("dragover",function(r){return me(e),K().allowDrop(r)})("drop",function(r){return me(e),K().dropBarn(r)}),M()(),he(4,"br"),D(5,"div",57)(6,"app-barn",14),_e("selectedBarn",function(r){return me(e),K().goToBarn(r)})("dragstart",function(r){return me(e),K().dragStart(r)})("dragover",function(r){return me(e),K().allowDrop(r)})("drop",function(r){return me(e),K().dropBarn(r)}),M()(),he(7,"br"),D(8,"div",58)(9,"app-barn",16),_e("selectedBarn",function(r){return me(e),K().goToBarn(r)})("dragstart",function(r){return me(e),K().dragStart(r)})("dragover",function(r){return me(e),K().allowDrop(r)})("drop",function(r){return me(e),K().dropBarn(r)}),M()(),he(10,"br"),pe(11,OU,2,5,"div",59),he(12,"br"),pe(13,VU,2,5,"div",60),he(14,"br"),pe(15,NU,2,5,"div",61),he(16,"br"),pe(17,FU,2,5,"div",62),he(18,"br"),pe(19,LU,2,5,"div",63),he(20,"br"),pe(21,UU,2,5,"div",64),he(22,"br"),pe(23,HU,2,5,"div",65),he(24,"br"),pe(25,GU,2,5,"div",66),he(26,"br"),pe(27,zU,2,5,"div",67),he(28,"br"),pe(29,jU,2,5,"div",68),he(30,"br"),pe(31,qU,2,5,"div",69),he(32,"br"),pe(33,$U,2,5,"div",70),M()()}if(2&t){const e=K();V(2),Y("ngClass",e.tutorialActive?"tutorialActive":""),V(1),Y("ngClass",hi(22,Zn,e.swapBarnMode))("barnNumber",e.allBarns[0].barnNumber)("draggable",e.swapBarnMode),V(3),Y("ngClass",hi(24,Zn,e.swapBarnMode))("barnNumber",e.allBarns[1].barnNumber)("draggable",e.swapBarnMode),V(3),Y("ngClass",hi(26,Zn,e.swapBarnMode))("barnNumber",e.allBarns[2].barnNumber)("draggable",e.swapBarnMode),V(2),Y("ngIf",e.barnRow2IsUnlocked),V(2),Y("ngIf",e.barnRow2IsUnlocked),V(2),Y("ngIf",e.barnRow2IsUnlocked),V(2),Y("ngIf",e.barnRow3IsUnlocked),V(2),Y("ngIf",e.barnRow3IsUnlocked),V(2),Y("ngIf",e.barnRow3IsUnlocked),V(2),Y("ngIf",e.barnRow4IsUnlocked),V(2),Y("ngIf",e.barnRow4IsUnlocked),V(2),Y("ngIf",e.barnRow4IsUnlocked),V(2),Y("ngIf",e.barnRow5IsUnlocked),V(2),Y("ngIf",e.barnRow5IsUnlocked),V(2),Y("ngIf",e.barnRow5IsUnlocked)}}function XU(t,n){if(1&t){const e=tt();D(0,"app-selected-barn",86),_e("returnToBarnEmitter",function(){return me(e),K(2).goToBarn(0)})("isCoachingEmitter",function(r){return me(e),K(2).goToCoaching(r)}),M()}2&t&&Y("selectedBarnNumber",K(2).selectedBarn)}function YU(t,n){if(1&t){const e=tt();D(0,"app-coaching",87),_e("isCoachingEmitter",function(r){return me(e),K(2).goToCoaching(r)}),M()}2&t&&Y("selectedBarnNumber",K(2).selectedBarn)}function KU(t,n){if(1&t&&(D(0,"div",83),pe(1,XU,1,1,"app-selected-barn",84),pe(2,YU,1,1,"app-coaching",85),M()),2&t){const e=K();V(1),Y("ngIf",!e.isCoaching),V(1),Y("ngIf",e.isCoaching)}}let ZU=(()=>{class t{constructor(e,i,r,a){this.lookupService=e,this.componentCommunicationService=i,this.globalService=r,this.gameLoopService=a,this.selectedBarn=0,this.isCoaching=!1,this.tutorialActive=!1,this.barnRow2IsUnlocked=!1,this.barnRow3IsUnlocked=!1,this.barnRow4IsUnlocked=!1,this.barnRow5IsUnlocked=!1,this.isCondensedView=!1,this.refreshTrainingPopoverText="",this.showBarnOptions=!0,this.swapBarnMode=!1,this.quickViewBarnToggle=()=>{this.isCondensedView=!this.isCondensedView,this.globalService.globalVar.settings.set("quickViewBarnMode",this.isCondensedView)},this.swapBarnModeToggle=()=>{this.swapBarnMode=!this.swapBarnMode,this.globalService.globalVar.settings.set("swapBarnMode",this.swapBarnMode)}}ngOnInit(){var e;this.allBarns=this.globalService.getBarnListInOrder(),this.componentCommunicationService.setNewView(Mi.barn),this.refreshTrainingPopoverText="Click here to restart your current training for all barns or, if no training is selected, restart your previous training.",this.globalService.globalVar.settings.get("quickViewBarnMode")&&(this.isCondensedView=!0),this.globalService.globalVar.settings.get("swapBarnMode")&&(this.swapBarnMode=!0),this.showBarnOptions=!!this.globalService.globalVar.settings.get("showBarnOptions"),this.barnRow2IsUnlocked=this.lookupService.isItemUnlocked("barnRow2"),this.barnRow3IsUnlocked=this.lookupService.isItemUnlocked("barnRow3"),this.barnRow4IsUnlocked=this.lookupService.isItemUnlocked("barnRow4"),this.barnRow5IsUnlocked=this.lookupService.isItemUnlocked("barnRow5"),this.swapBarnModePopoverText=this.lookupService.getSettingDescriptions("Swap Barn Mode"),this.quickViewBarnModePopoverText=this.lookupService.getSettingDescriptions("Quick View Barn"),!this.globalService.globalVar.tutorials.tutorialCompleted&&1===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(i=>i.type===Fe.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.tutorialActive=!0),this.subscription=this.componentCommunicationService.getBarnView().subscribe(i=>{this.selectedBarn=i})}refreshTraining(){this.globalService.globalVar.barns.forEach(e=>{var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber===e.barnNumber);if(null!=i&&null!=i.previousTraining){var r=Object.assign({},i.previousTraining);r.timeTrained=0,null!=i.currentTraining&&i.currentTraining.trainingTimeRemaining>0&&this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching")?i.queuedTraining=r:i.currentTraining=r}})}dragStart(e){this.swapBarnMode&&(this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id))}allowDrop(e){this.swapBarnMode&&e.preventDefault()}dropBarn(e){if(this.swapBarnMode){e.preventDefault(),e.stopPropagation();var i=e.dataTransfer.getData("text"),r=document.getElementById(i),a=e.target;if(null===r||null===a)return;var c=r.id.substring(4),d=a.id.substring(4);if(void 0===c||void 0===d||NaN===Number(c)||NaN===Number(d))return;var m=this.globalService.globalVar.barnOrder[Number(c)-1],_=this.globalService.globalVar.barnOrder[Number(d)-1],T=this.globalService.globalVar.barnOrder.findIndex(te=>te===m),A=this.globalService.globalVar.barnOrder.findIndex(te=>te===_);if(T<0||A<0)return;var q=this.globalService.globalVar.barnOrder[T];this.globalService.globalVar.barnOrder[T]=this.globalService.globalVar.barnOrder[A],this.globalService.globalVar.barnOrder[A]=q,this.allBarns=this.globalService.getBarnListInOrder()}}goToBarn(e){this.swapBarnMode||(this.selectedBarn=e,this.componentCommunicationService.setBarnView(Mi.barn,e))}goToCoaching(e){this.isCoaching=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setBarnNumber(0)}}return t.\u0275fac=function(e){return new(e||t)(Me(yn),Me(qr),Me(ki),Me(jr))},t.\u0275cmp=mi({type:t,selectors:[["app-barn-view"]],decls:4,vars:4,consts:[["class","flexed barnOptions",4,"ngIf"],["class","gridContainer","id","barnViewDiv",4,"ngIf"],["id","barnViewDiv",4,"ngIf"],["class","selectedBarnDiv",4,"ngIf"],[1,"flexed","barnOptions"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","quickViewBarn",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave",1,"refreshTraining",3,"ngbPopover","click"],["id","barnViewDiv",1,"gridContainer"],[1,"barnRow"],[1,"barn1","barnDefault",3,"ngClass"],["id","Barn1",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn2","barnDefault"],["id","Barn2",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn3","barnDefault"],["id","Barn3",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],["class","barnRow",4,"ngIf"],["class","barn4 barnDefault",4,"ngIf"],["class","barn5 barnDefault",4,"ngIf"],["class","barn6 barnDefault",4,"ngIf"],[1,"barn4","barnDefault"],["id","Barn4",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn5","barnDefault"],["id","Barn5",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn6","barnDefault"],["id","Barn6",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],["class","barn7 barnDefault",4,"ngIf"],["class","barn8 barnDefault",4,"ngIf"],["class","barn9 barnDefault",4,"ngIf"],[1,"barn7","barnDefault"],["id","Barn7",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn8","barnDefault"],["id","Barn8",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn9","barnDefault"],["id","Barn9",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],["class","barn10 barnDefault",4,"ngIf"],["class","barn11 barnDefault",4,"ngIf"],["class","barn12 barnDefault",4,"ngIf"],[1,"barn10","barnDefault"],["id","Barn10",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn11","barnDefault"],["id","Barn11",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn12","barnDefault"],["id","Barn12",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],["class","barn13 barnDefault",4,"ngIf"],["class","barn14 barnDefault",4,"ngIf"],["class","barn15 barnDefault",4,"ngIf"],[1,"barn13","barnDefault"],["id","Barn13",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn14","barnDefault"],["id","Barn14",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],[1,"barn15","barnDefault"],["id","Barn15",3,"ngClass","barnNumber","draggable","selectedBarn","dragstart","dragover","drop"],["id","barnViewDiv"],[1,"column"],[1,"barn1","condensedBarnDefault",3,"ngClass"],[1,"barn2","condensedBarnDefault"],[1,"barn3","condensedBarnDefault"],["class","barn4 condensedBarnDefault",4,"ngIf"],["class","barn5 condensedBarnDefault",4,"ngIf"],["class","barn6 condensedBarnDefault",4,"ngIf"],["class","barn7 condensedBarnDefault",4,"ngIf"],["class","barn8 condensedBarnDefault",4,"ngIf"],["class","barn9 condensedBarnDefault",4,"ngIf"],["class","barn10 condensedBarnDefault",4,"ngIf"],["class","barn11 condensedBarnDefault",4,"ngIf"],["class","barn12 condensedBarnDefault",4,"ngIf"],["class","barn13 condensedBarnDefault",4,"ngIf"],["class","barn14 condensedBarnDefault",4,"ngIf"],["class","barn15 condensedBarnDefault",4,"ngIf"],[1,"barn4","condensedBarnDefault"],[1,"barn5","condensedBarnDefault"],[1,"barn6","condensedBarnDefault"],[1,"barn7","condensedBarnDefault"],[1,"barn8","condensedBarnDefault"],[1,"barn9","condensedBarnDefault"],[1,"barn10","condensedBarnDefault"],[1,"barn11","condensedBarnDefault"],[1,"barn12","condensedBarnDefault"],[1,"barn13","condensedBarnDefault"],[1,"barn14","condensedBarnDefault"],[1,"barn15","condensedBarnDefault"],[1,"selectedBarnDiv"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter"],[3,"selectedBarnNumber","isCoachingEmitter"]],template:function(e,i){1&e&&(pe(0,mU,14,5,"div",0),pe(1,BU,12,20,"div",1),pe(2,WU,34,28,"div",2),pe(3,KU,3,2,"div",3)),2&e&&(Y("ngIf",0===i.selectedBarn&&i.showBarnOptions),V(1),Y("ngIf",0===i.selectedBarn&&!i.isCondensedView),V(1),Y("ngIf",0===i.selectedBarn&&i.isCondensedView),V(1),Y("ngIf",i.selectedBarn>0))},directives:[on,no,Jc,Hs,Gs,_r,WF,XL,vU],styles:["#barnViewDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.selectedBarnDiv[_ngcontent-%COMP%]{height:100%}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.barnOptions[_ngcontent-%COMP%]{position:sticky;right:0;width:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);padding:.1rem;border-bottom:1px solid rgba(0,0,0,.8)}.flexed[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.barnDefault[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none;border-top:none;width:33.3333%;display:inline-block;vertical-align:middle;height:100%}.pointerCursor[_ngcontent-%COMP%]{cursor:pointer}.condensedBarnDefault[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none;border-top:none;display:inline-block;vertical-align:middle;width:100%}.column[_ngcontent-%COMP%]{width:100%}.barnRow[_ngcontent-%COMP%]{height:25%;width:100%;display:inline-block}.lockedBarnRow[_ngcontent-%COMP%]{border:none!important}.tutorialActive[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-color:red}"]}),t})();function QU(t,n){1&t&&(D(0,"span",6),F(1," Primary "),M())}function JU(t,n){1&t&&(D(0,"span",6),F(1," Auto Run Free Race "),M())}function eH(t,n){1&t&&(D(0,"span",6),F(1," Event "),M())}function tH(t,n){1&t&&he(0,"br")}function iH(t,n){1&t&&(D(0,"span",9),F(1," / "),M())}function nH(t,n){if(1&t&&(D(0,"span",7),F(1),pe(2,iH,2,0,"span",8),M()),2&t){const e=n.$implicit,i=n.index,r=K();Y("ngClass",r.getColorClass(e)),V(1),He(" ",e.name,""),V(1),Y("ngIf",i<r.deck.selectedAnimals.length-1)}}let m1=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i}ngOnInit(){if(0===this.deckNumber||null==this.deckNumber){var e=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=e&&(this.deck=e)}else{var i=this.globalService.globalVar.animalDecks.find(r=>r.deckNumber===this.deckNumber);null!=i&&(this.deck=i)}}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}goToDeckView(){this.componentCommunicationService.setNewView(Mi.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(qr))},t.\u0275cmp=mi({type:t,selectors:[["app-animal-deck"]],inputs:{deckNumber:"deckNumber"},decls:11,vars:6,consts:[[1,"relayTeam"],[1,"headers"],["class","primaryText keyword rightSpaced",4,"ngIf"],[4,"ngIf"],[1,"clickableText",3,"click"],["class","coloredText",3,"ngClass",4,"ngFor","ngForOf"],[1,"primaryText","keyword","rightSpaced"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1),pe(2,QU,2,0,"span",2),pe(3,JU,2,0,"span",2),pe(4,eH,2,0,"span",2),pe(5,tH,1,0,"br",3),M(),D(6,"div")(7,"strong",4),_e("click",function(){return i.goToDeckView()}),F(8),M(),F(9," - "),pe(10,nH,3,3,"span",5),M()()),2&e&&(V(2),Y("ngIf",i.deck.isPrimaryDeck&&void 0!==i.deckNumber&&i.deckNumber>0),V(1),Y("ngIf",i.deck.autoRunFreeRace&&void 0!==i.deckNumber&&i.deckNumber>0),V(1),Y("ngIf",i.deck.isEventDeck&&void 0!==i.deckNumber&&i.deckNumber>0),V(1),Y("ngIf",i.deckNumber>0),V(3),Kt(i.deck.name),V(2),Y("ngForOf",i.deck.selectedAnimals))},directives:[on,Vr,_r],styles:[".primaryText[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary);padding-left:.5rem;padding-right:.5rem}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.relayTeam[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:100%;margin-left:.5rem}@media (max-width: 800px){.headers[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;width:50%}.rightSpaced[_ngcontent-%COMP%]{margin-top:.5rem}}"]}),t})();function rH(t,n){if(1&t&&(D(0,"span"),F(1),M()),2&t){const e=K(2);V(1),He("Race ",e.index+1," ")}}function aH(t,n){1&t&&(D(0,"span",12),F(1," / "),M())}function oH(t,n){if(1&t&&(D(0,"span",9)(1,"span",10),F(2),pe(3,aH,2,0,"span",11),M()()),2&t){const e=n.$implicit,i=n.index,r=K(2);Y("ngClass",r.getNoRacerClass(e)),V(1),Y("ngClass",r.getColorClass(e)),V(1),He(" ",e.getCourseTypeName()," "),V(1),Y("ngIf",i<r.race.raceLegs.length-1)}}function sH(t,n){1&t&&(D(0,"h6",13)(1,"em"),F(2,"Completed!"),M()())}function lH(t,n){1&t&&(D(0,"h6",13)(1,"em"),F(2,"Cannot Run"),M()())}function cH(t,n){1&t&&(D(0,"h6",14),F(1,"Start"),M())}const Bx=function(t){return{raceNotAllowed:t}};function uH(t,n){if(1&t&&(D(0,"div",2),pe(1,rH,2,1,"span",3),D(2,"div",4)(3,"div",5)(4,"div")(5,"span"),F(6),Di(7,"number"),M(),pe(8,oH,4,4,"span",6),M(),pe(9,sH,3,0,"h6",7),pe(10,lH,3,0,"h6",7),pe(11,cH,2,0,"h6",8),M()()()),2&t){const e=K(),i=Qt(3);V(1),Y("ngIf",null!=e.index&&e.index>-1),V(1),Y("ngClass",hi(12,Bx,e.cannotRace))("ngbPopover",i)("disablePopover",""===e.popoverText),V(4),He(" ",Yi(7,9,e.race.length,"1.2-2")," Total Meters "),V(2),Y("ngForOf",e.race.raceLegs),V(1),Y("ngIf",e.showStartText&&e.race.isCompleted),V(1),Y("ngIf",e.showStartText&&!e.race.isCompleted&&e.cannotRace),V(1),Y("ngIf",e.showStartText&&!e.race.isCompleted&&!e.cannotRace)}}function dH(t,n){if(1&t&&(D(0,"span"),F(1),M()),2&t){const e=K(2);V(1),He("Race ",e.index+1," ")}}function fH(t,n){if(1&t&&(D(0,"p",9),F(1),Di(2,"number"),D(3,"span",10),F(4),M()()),2&t){const e=n.$implicit,i=K(2);Y("ngClass",i.getNoRacerClass(e)),V(1),Mn(" ",Yi(2,5,e.distance,"1.2-2")," Meters of ",e.getTerrainName()," "),V(2),Y("ngClass",i.getColorClass(e)),V(1),Kt(e.getCourseTypeName())}}function hH(t,n){1&t&&(D(0,"h6")(1,"em"),F(2,"Completed!"),M()())}function pH(t,n){1&t&&(D(0,"h6")(1,"em"),F(2,"Cannot Run"),M()())}function gH(t,n){1&t&&(D(0,"h6",16),F(1,"Start"),M())}function vH(t,n){if(1&t&&(D(0,"div",2),pe(1,dH,2,1,"span",3),he(2,"br"),D(3,"div",4),pe(4,fH,5,8,"p",6),pe(5,hH,3,0,"h6",3),pe(6,pH,3,0,"h6",3),pe(7,gH,2,0,"h6",15),M()()),2&t){const e=K(),i=Qt(3);V(1),Y("ngIf",null!=e.index&&e.index>-1),V(2),Y("ngClass",hi(8,Bx,e.cannotRace))("ngbPopover",i)("disablePopover",""===e.popoverText),V(1),Y("ngForOf",e.race.raceLegs),V(1),Y("ngIf",e.showStartText&&e.race.isCompleted),V(1),Y("ngIf",e.showStartText&&!e.race.isCompleted&&e.cannotRace),V(1),Y("ngIf",e.showStartText&&!e.race.isCompleted&&!e.cannotRace)}}function mH(t,n){1&t&&he(0,"div",17),2&t&&Y("innerHTML",K().popoverText,Si)}let b1=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.condensedVersion=!1,this.missingRacers=[],this.busyRacers=[]}ngOnInit(){this.cannotRace=!1;var e=this.lookupService.getPrimaryDeck();this.race.raceLegs.forEach(i=>{if(null==e||0===e.selectedAnimals.length&&this.race.raceType!==xt.trainingTrack)this.cannotRace=!0,this.missingRacers.push(i.courseType);else if((null==e?void 0:e.selectedAnimals.some(a=>a.raceCourseType===i.courseType))||this.race.raceType===xt.trainingTrack){var r=null==e?void 0:e.selectedAnimals.find(a=>a.raceCourseType===i.courseType);this.race.raceType===xt.trainingTrack&&(r=this.selectedAnimal),void 0!==r&&!this.lookupService.canAnimalRace(r)&&(this.cannotRace=!0,this.busyRacers.push(r))}else this.cannotRace=!0,this.missingRacers.push(i.courseType)}),void 0!==this.race.pinnacleConditions&&void 0!==e&&(this.race.pinnacleConditions.containsCondition($t[$t.twoRacersOnly])&&e.selectedAnimals.length<2&&(this.cannotRace=!0),this.race.pinnacleConditions.containsCondition($t[$t.threeRacersOnly])&&e.selectedAnimals.length<3&&(this.cannotRace=!0),this.race.pinnacleConditions.containsCondition(gi[gi.fourRacersOnly])&&e.selectedAnimals.length<4&&(this.cannotRace=!0)),!this.cannotRace&&this.race.isCompleted&&(this.cannotRace=!0),this.race.localRaceType===Li.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(this.cannotRace=!0),this.popoverText=this.cannotRace?this.getErrorPopoverText():this.getSuccessfulPopoverText()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getCourseTypeName(),mountainColor:"Mountain"===e.getCourseTypeName(),waterColor:"Ocean"===e.getCourseTypeName(),tundraColor:"Tundra"===e.getCourseTypeName(),volcanicColor:"Volcanic"===e.getCourseTypeName()}:{}}getNoRacerClass(e){return{noRacer:!this.hasRacerForLeg(e)}}hasRacerForLeg(e){var i=!1,r=this.lookupService.getPrimaryDeck();return null==r||0===r.selectedAnimals.length||(r.selectedAnimals.some(a=>a.raceCourseType===e.courseType)&&(i=!0),this.busyRacers.some(a=>a.raceCourseType===e.courseType)&&(i=!1)),i}getErrorPopoverText(){var e="You cannot do this race for the following reasons: \n\n";this.missingRacers.forEach(r=>{e+="-Missing "+Ve[r]+" racer\n"}),this.busyRacers.forEach(r=>{e+="-"+r.name+" is active in another race\n"}),this.race.isCompleted&&(e+="-You've already completed this race."),this.race.localRaceType===Li.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(e+="-You've met your limit of free races. More will be available soon.");var i=this.lookupService.getPrimaryDeck();return void 0!==this.race.pinnacleConditions&&void 0!==i&&(this.race.pinnacleConditions.containsCondition($t[$t.twoRacersOnly])&&i.selectedAnimals.length<2&&(e+="-You do not meet the Pinnacle conditions.\n"),this.race.pinnacleConditions.containsCondition($t[$t.threeRacersOnly])&&i.selectedAnimals.length<3&&(e+="-You do not meet the Pinnacle conditions.\n"),this.race.pinnacleConditions.containsCondition(gi[gi.fourRacersOnly])&&i.selectedAnimals.length<4&&(e+="-You do not meet the Pinnacle conditions.\n")),e}getSuccessfulPopoverText(){var e="",i=1;return this.race.raceLegs.forEach(r=>{null!=r.terrain&&(e+=this.lookupService.getTerrainPopoverText(r.terrain,r)),i<this.race.raceLegs.length&&(e+="\n"),i+=1}),e}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(yn))},t.\u0275cmp=mi({type:t,selectors:[["app-race-description"]],inputs:{index:"index",race:"race",showStartText:"showStartText",selectedAnimal:"selectedAnimal",condensedVersion:"condensedVersion"},decls:4,vars:2,consts:[["class","raceDescription",4,"ngIf"],["popContent",""],[1,"raceDescription"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngClass","ngbPopover","disablePopover"],[1,"flex"],[3,"ngClass",4,"ngFor","ngForOf"],["class","inline",4,"ngIf"],["class","keyword inline",4,"ngIf"],[3,"ngClass"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"],[1,"inline"],[1,"keyword","inline"],["class","keyword",4,"ngIf"],[1,"keyword"],[1,"popoverClass",3,"innerHTML"]],template:function(e,i){1&e&&(pe(0,uH,12,14,"div",0),pe(1,vH,8,10,"div",0),pe(2,mH,1,1,"ng-template",null,1,ni)),2&e&&(Y("ngIf",i.condensedVersion),V(1),Y("ngIf",!i.condensedVersion))},directives:[on,_r,no,Vr],pipes:[ts],styles:[".raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.inline[_ngcontent-%COMP%]{display:inline-block}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}"]}),t})();function bH(t,n){if(1&t){const e=tt();D(0,"div",10),_e("click",function(){const a=me(e).$implicit;return K().selectCircuitRace(a)}),he(1,"app-race-description",11),M()}if(2&t){const e=n.$implicit,i=n.index,r=K();Ng("circuitRace",i+1,""),Y("ngClass",r.tutorialActive?"tutorialActive":""),V(1),Y("index",i)("race",e)("showStartText",!0)}}function _H(t,n){if(1&t){const e=tt();D(0,"div",12),_e("click",function(){const a=me(e).$implicit;return K().selectLocalRace(a)}),he(1,"app-race-description",11),M()}if(2&t){const e=n.$implicit,i=n.index;Ng("localRace",i+1,""),V(1),Y("index",i)("race",e)("showStartText",!0)}}function yH(t,n){if(1&t&&(D(0,"div",13),F(1),M()),2&t){const e=K();V(1),He(" ",e.circuitRankUpDescription," ")}}let wH=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new di,this.tutorialActive=!1,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){var e=this;this.handleTutorial(),this.availableLocalRaces=[],this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace());var i=this.globalService.globalVar.circuitRank;this.circuitRank=this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank).toString():this.globalService.globalVar.circuitRank,this.circuitRankUpDescription=this.globalService.globalVar.circuitRankUpRewardDescription,this.availableCircuitRaces=this.globalService.globalVar.circuitRaces.filter(d=>d.requiredRank===i);var r=this.globalService.globalVar.animalDecks.find(d=>d.isPrimaryDeck);this.availableCircuitRaces.forEach(d=>{void 0!==r&&(d.raceLegs=this.globalService.reorganizeLegsByDeckOrder(d.raceLegs,r))}),this.totalFreeRaces=this.lookupService.getTotalFreeRacesPerPeriod();var a=900,c=this.globalService.globalVar.modifiers.find(d=>"freeRacesTimePeriodModifier"===d.text);void 0!==c&&(a=c.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var d=Wa(function*(m){var _=a-e.globalService.globalVar.freeRaceTimePeriodCounter,T=Math.floor(_/60),A=_-60*T,q=Math.floor(A).toString();A<10&&(q=A<1||A>59?"00":String(q).padStart(2,"0")),e.getRacesRequiredForMedal(),e.freeRaceTimer=T+":"+q,e.freeRacesRemaining=e.lookupService.getRemainingFreeRacesPerPeriod()});return function(m){return d.apply(this,arguments)}}())}selectCircuitRace(e){var i=!0,r=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck);null!=r&&0!==r.selectedAnimals.length?(e.raceLegs.forEach(a=>{(null==r?void 0:r.selectedAnimals.some(d=>d.raceCourseType===a.courseType))||(i=!1);var c=null==r?void 0:r.selectedAnimals.find(d=>d.raceCourseType===a.courseType);void 0!==c&&!this.lookupService.canAnimalRace(c)&&(i=!1)}),e.isCompleted&&(i=!1),!this.globalService.globalVar.tutorials.tutorialCompleted&&4===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1),i&&this.raceSelected.emit(e)):i=!1}selectLocalRace(e){var i=!0,r=e.localRaceType===Li.Free,a=this.globalService.globalVar.animalDecks.find(c=>c.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(c=>{(null==a?void 0:a.selectedAnimals.some(d=>d.raceCourseType===c.courseType))||(i=!1)}),r&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(i=!1),i&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):i=!1}getRacesRequiredForMedal(){var e=this.globalService.globalVar.resources.find(T=>"International Races"===T.name),i=this.globalService.globalVar.resources.find(T=>"National Races"===T.name);if(null!=e&&e.amount>0){var r=5,a=this.globalService.globalVar.modifiers.find(T=>"internationalRacesToMedalModifier"===T.text);null!=a&&(r=a.value),this.winsNeededUntilNextMedal=r-this.globalService.globalVar.nationalRaceCountdown}else if(null!=i&&i.amount>0){var c=12,d=this.globalService.globalVar.modifiers.find(T=>"nationalRacesToMedalModifier"===T.text);null!=d&&(c=d.value),this.winsNeededUntilNextMedal=c-this.globalService.globalVar.nationalRaceCountdown}else{var m=50,_=this.globalService.globalVar.modifiers.find(T=>"freeRacesToMedalModifier"===T.text);null!=_&&(m=_.value),this.winsNeededUntilNextMedal=m-this.globalService.globalVar.nationalRaceCountdown}}handleTutorial(){var e,i;!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&5===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(r=>r.type===Fe.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&9===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(i=this.globalService.globalVar.animals.find(r=>r.type===Fe.Hare))||void 0===i?void 0:i.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(Lr),Me(yn),Me(jr))},t.\u0275cmp=mi({type:t,selectors:[["app-circuit-view"]],outputs:{raceSelected:"raceSelected"},decls:28,vars:8,consts:[[1,"circuitViewDiv"],[1,"circuitRaceHeader","s4Heading"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"circuitRaceGrid"],[3,"ngClass","class","click",4,"ngFor","ngForOf"],["id","localRaceSection"],[1,"s4Heading"],[1,"localRaceGrid"],[3,"class","click",4,"ngFor","ngForOf"],["circuitRewardContent",""],[3,"ngClass","click"],[3,"index","race","showStartText"],[3,"click"],[1,"popoverClass"]],template:function(e,i){if(1&e&&(D(0,"div",0),he(1,"app-animal-deck")(2,"hr"),D(3,"div",1)(4,"span",2),F(5,"Circuit Rank "),D(6,"strong"),F(7),M()(),he(8,"br")(9,"br"),M(),D(10,"div",3),pe(11,bH,2,7,"div",4),M(),he(12,"hr"),D(13,"div",5)(14,"span",6),F(15,"Free Races"),M(),he(16,"br"),D(17,"em"),F(18),M(),he(19,"br"),D(20,"em"),F(21),M(),he(22,"br")(23,"br"),D(24,"div",7),pe(25,_H,2,6,"div",8),M()()(),pe(26,yH,2,1,"ng-template",null,9,ni)),2&e){const r=Qt(27);V(4),Y("ngbPopover",r),V(3),Kt(i.circuitRank),V(4),Y("ngForOf",i.availableCircuitRaces),V(7),eh(" ",i.freeRacesRemaining," of ",i.totalFreeRaces," remaining -- resets in ",i.freeRaceTimer,""),V(3),He("Wins needed until next medal: ",i.winsNeededUntilNextMedal,""),V(4),Y("ngForOf",i.availableLocalRaces)}},directives:[m1,no,Vr,_r,b1],styles:['.circuitRaceHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.circuitRaceGrid[_ngcontent-%COMP%]{height:100%;display:grid;text-align:center;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"circuitRace1 circuitRace2 circuitRace3"}.circuitRace1[_ngcontent-%COMP%]{grid-area:circuitRace1}.circuitRace2[_ngcontent-%COMP%]{grid-area:circuitRace2}.circuitRace3[_ngcontent-%COMP%]{grid-area:circuitRace3}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.localRaceGrid[_ngcontent-%COMP%]{text-align:center;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"localRace1 localRace2 localRace3"}.localRace1[_ngcontent-%COMP%]{grid-area:localRace1}.localRace2[_ngcontent-%COMP%]{grid-area:localRace2}.localRace3[_ngcontent-%COMP%]{grid-area:localRace3}#localRaceSection[_ngcontent-%COMP%]{text-align:center}']}),t})();function SH(t,n){if(1&t){const e=tt();D(0,"div",9)(1,"div",10)(2,"span",11)(3,"button",12),_e("click",function(){return me(e),K(2).toggleRace("monoRaceToggled")}),F(4,"-"),M()(),D(5,"span",13),F(6,"Mono Race "),D(7,"strong"),F(8),M()(),he(9,"span",11),M(),D(10,"app-race-description",14),_e("click",function(){me(e);const r=K(2);return r.selectLocalRace(r.availableMonoRace)}),M()()}if(2&t){const e=K(2);V(8),Kt(e.monoRaceRank),V(2),Y("race",e.availableMonoRace)("showStartText",!0)}}function CH(t,n){1&t&&(D(0,"div",9),F(1," Next Mono Race Available After Circuit Rank Up "),M())}function TH(t,n){if(1&t&&(D(0,"div",7),pe(1,SH,11,3,"div",8),pe(2,CH,2,0,"div",8),he(3,"hr"),M()),2&t){const e=K();V(1),Y("ngIf",null!=e.availableMonoRace),V(1),Y("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function MH(t,n){if(1&t){const e=tt();D(0,"div",16),_e("click",function(){me(e);const r=K(2);return r.selectLocalRace(r.availableMonoRace)}),D(1,"div",10)(2,"span",11)(3,"button",12),_e("click",function(){return me(e),K(2).toggleRace("monoRaceToggled")}),F(4,"+"),M()(),D(5,"span",17),F(6,"Mono Race "),D(7,"strong"),F(8),M()(),D(9,"div",18)(10,"app-race-description",19),_e("click",function(){me(e);const r=K(2);return r.selectLocalRace(r.availableMonoRace)}),M()()()()}if(2&t){const e=K(2);V(8),Kt(e.monoRaceRank),V(2),Y("race",e.availableMonoRace)("showStartText",!0)("condensedVersion",!0)}}function xH(t,n){1&t&&(D(0,"div",9),F(1," Next Mono Race Available After Circuit Rank Up "),M())}function RH(t,n){if(1&t&&(D(0,"div",7),pe(1,MH,11,4,"div",15),pe(2,xH,2,0,"div",8),he(3,"hr"),M()),2&t){const e=K();V(1),Y("ngIf",null!=e.availableMonoRace),V(1),Y("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function DH(t,n){if(1&t){const e=tt();D(0,"div",22)(1,"div",10)(2,"span",11)(3,"button",12),_e("click",function(){return me(e),K(2).toggleRace("duoRaceToggled")}),F(4,"-"),M()(),D(5,"span",13),F(6,"Duo Race "),D(7,"strong"),F(8),M()(),he(9,"span",11),M(),D(10,"app-race-description",14),_e("click",function(){me(e);const r=K(2);return r.selectLocalRace(r.availableDuoRace)}),M()()}if(2&t){const e=K(2);V(8),Kt(e.duoRaceRank),V(2),Y("race",e.availableDuoRace)("showStartText",!0)}}function kH(t,n){1&t&&(D(0,"div",22),F(1," Next Duo Race Available After Circuit Rank Up "),M())}function AH(t,n){if(1&t&&(D(0,"div",20),pe(1,DH,11,3,"div",21),pe(2,kH,2,0,"div",21),he(3,"hr"),M()),2&t){const e=K();V(1),Y("ngIf",null!=e.availableDuoRace),V(1),Y("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function PH(t,n){if(1&t){const e=tt();D(0,"div",22)(1,"div",10)(2,"span",11)(3,"button",12),_e("click",function(){return me(e),K(2).toggleRace("duoRaceToggled")}),F(4,"+"),M()(),D(5,"span",17),F(6,"Duo Race "),D(7,"strong"),F(8),M()(),D(9,"div",18)(10,"app-race-description",19),_e("click",function(){me(e);const r=K(2);return r.selectLocalRace(r.availableDuoRace)}),M()()()()}if(2&t){const e=K(2);V(8),Kt(e.duoRaceRank),V(2),Y("race",e.availableDuoRace)("showStartText",!0)("condensedVersion",!0)}}function EH(t,n){1&t&&(D(0,"div",22),F(1," Next Duo Race Available After Circuit Rank Up "),M())}function IH(t,n){if(1&t&&(D(0,"div",20),pe(1,PH,11,4,"div",21),pe(2,EH,2,0,"div",21),he(3,"hr"),M()),2&t){const e=K();V(1),Y("ngIf",null!=e.availableDuoRace),V(1),Y("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function BH(t,n){if(1&t){const e=tt();D(0,"div",25)(1,"div",10)(2,"span",11)(3,"button",12),_e("click",function(){return me(e),K(2).toggleRace("rainbowRaceToggled")}),F(4,"-"),M()(),D(5,"span",13),F(6,"Rainbow Race "),D(7,"strong"),F(8),M()(),he(9,"span",11),M(),D(10,"app-race-description",14),_e("click",function(){me(e);const r=K(2);return r.selectLocalRace(r.availableRainbowRace)}),M()()}if(2&t){const e=K(2);V(8),Kt(e.rainbowRaceRank),V(2),Y("race",e.availableRainbowRace)("showStartText",!0)}}function OH(t,n){1&t&&(D(0,"div",25),F(1," Next Rainbow Race Available After Circuit Rank Up "),M())}function VH(t,n){if(1&t&&(D(0,"div",23),pe(1,BH,11,3,"div",24),pe(2,OH,2,0,"div",24),he(3,"hr"),M()),2&t){const e=K();V(1),Y("ngIf",null!=e.availableRainbowRace),V(1),Y("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}function NH(t,n){if(1&t){const e=tt();D(0,"div",25)(1,"div",10)(2,"span",11)(3,"button",12),_e("click",function(){return me(e),K(2).toggleRace("rainbowRaceToggled")}),F(4,"+"),M()(),D(5,"span",17),F(6,"Rainbow Race "),D(7,"strong"),F(8),M()(),D(9,"div",18)(10,"app-race-description",19),_e("click",function(){me(e);const r=K(2);return r.selectLocalRace(r.availableRainbowRace)}),M()()()()}if(2&t){const e=K(2);V(8),Kt(e.rainbowRaceRank),V(2),Y("race",e.availableRainbowRace)("showStartText",!0)("condensedVersion",!0)}}function FH(t,n){1&t&&(D(0,"div",25),F(1," Next Rainbow Race Available After Circuit Rank Up "),M())}function LH(t,n){if(1&t&&(D(0,"div",23),pe(1,NH,11,4,"div",24),pe(2,FH,2,0,"div",24),he(3,"hr"),M()),2&t){const e=K();V(1),Y("ngIf",null!=e.availableRainbowRace),V(1),Y("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}function UH(t,n){if(1&t){const e=tt();D(0,"div",28)(1,"div",10)(2,"span",11)(3,"button",12),_e("click",function(){return me(e),K(2).toggleRace("pinnacleRaceToggled")}),F(4,"-"),M()(),D(5,"span",13),F(6,"Pinnacle Floor "),D(7,"strong"),F(8),M()(),he(9,"span",11),M(),D(10,"span"),he(11,"span",29),M(),D(12,"app-race-description",14),_e("click",function(){me(e);const r=K(2);return r.selectLocalRace(r.availablePinnacleRace)}),M()()}if(2&t){const e=K(2);V(8),Kt(e.pinnacleRaceFloor),V(3),Y("innerHTML",e.globalService.getPinnacleFloorConditionDescription(e.availablePinnacleRace.pinnacleConditions),Si),V(1),Y("race",e.availablePinnacleRace)("showStartText",!0)}}function HH(t,n){1&t&&(D(0,"div",28),F(1," Next Pinnacle Floor Available After Circuit Rank Up "),M())}function GH(t,n){if(1&t&&(D(0,"div",26),pe(1,UH,13,4,"div",27),pe(2,HH,2,0,"div",27),he(3,"hr"),M()),2&t){const e=K();V(1),Y("ngIf",null!=e.availablePinnacleRace),V(1),Y("ngIf",void 0===e.availablePinnacleRace||null==e.availablePinnacleRace)}}function zH(t,n){if(1&t){const e=tt();D(0,"div",28)(1,"div",10)(2,"span",11)(3,"button",12),_e("click",function(){return me(e),K(2).toggleRace("pinnacleRaceToggled")}),F(4,"+"),M()(),D(5,"span",17),F(6,"Pinnacle Floor "),D(7,"strong"),F(8),M()(),D(9,"div",18)(10,"app-race-description",19),_e("click",function(){me(e);const r=K(2);return r.selectLocalRace(r.availablePinnacleRace)}),M()()(),D(11,"span"),he(12,"span",29),M()()}if(2&t){const e=K(2);V(8),Kt(e.pinnacleRaceFloor),V(2),Y("race",e.availablePinnacleRace)("showStartText",!0)("condensedVersion",!0),V(2),Y("innerHTML",e.globalService.getPinnacleFloorConditionDescription(e.availablePinnacleRace.pinnacleConditions),Si)}}function jH(t,n){1&t&&(D(0,"div",28),F(1," Next Pinnacle Floor Available After Circuit Rank Up "),M())}function qH(t,n){if(1&t&&(D(0,"div",26),pe(1,zH,13,5,"div",27),pe(2,jH,2,0,"div",27),he(3,"hr"),M()),2&t){const e=K();V(1),Y("ngIf",null!=e.availablePinnacleRace),V(1),Y("ngIf",void 0===e.availablePinnacleRace||null==e.availablePinnacleRace)}}let $H=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new di,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10,this.isMonoRaceToggled=!1,this.isDuoRaceToggled=!1,this.isRainbowRaceToggled=!1,this.isPinnacleRaceToggled=!1}ngOnInit(){this.availableLocalRaces=[],this.isMonoRaceToggled=this.globalService.globalVar.settings.get("monoRaceToggled"),this.isDuoRaceToggled=this.globalService.globalVar.settings.get("duoRaceToggled"),this.isRainbowRaceToggled=this.globalService.globalVar.settings.get("rainbowRaceToggled"),this.isPinnacleRaceToggled=this.globalService.globalVar.settings.get("pinnacleRaceToggled");var e=this.getNextAvailableSpecialRace(Li.Mono);void 0!==e&&(this.availableMonoRace=e);var i=this.getNextAvailableSpecialRace(Li.Duo);void 0!==i&&(this.availableDuoRace=i);var r=this.getNextAvailableSpecialRace(Li.Rainbow);void 0!==r&&(this.availableRainbowRace=r);var a=this.getNextAvailableSpecialRace(Li.Pinnacle);void 0!==a&&(this.availablePinnacleRace=a);var c=this.globalService.globalVar.animalDecks.find(d=>d.isPrimaryDeck);null!=c&&(null!=this.availableDuoRace&&(this.availableDuoRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableDuoRace.raceLegs,c)),null!=this.availableRainbowRace&&(this.availableRainbowRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableRainbowRace.raceLegs,c))),this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?(null!=this.availableMonoRace&&(this.monoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableMonoRace.requiredRank).toString()),null!=this.availableDuoRace&&(this.duoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableDuoRace.requiredRank).toString()),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableRainbowRace.requiredRank).toString()),null!=this.availablePinnacleRace&&(this.pinnacleRaceFloor=this.utilityService.getNumericValueOfCircuitRank(this.availablePinnacleRace.requiredRank).toString())):(null!=this.availableMonoRace&&(this.monoRaceRank=this.availableMonoRace.requiredRank),null!=this.availableDuoRace&&(this.duoRaceRank=this.availableDuoRace.requiredRank),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.availableRainbowRace.requiredRank),null!=this.availablePinnacleRace&&(this.pinnacleRaceFloor=this.availablePinnacleRace.requiredRank)),this.areMonoRacesAvailable=this.lookupService.isItemUnlocked("monoRace"),this.areDuoRacesAvailable=this.lookupService.isItemUnlocked("duoRace"),this.areRainbowRacesAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.arePinnacleRacesAvailable=this.lookupService.isItemUnlocked("thePinnacle")}getNextAvailableSpecialRace(e){return e===Li.Mono&&this.globalService.GenerateMonoRaces(this.globalService.globalVar.monoRank),e===Li.Duo&&this.globalService.GenerateDuoRaces(this.globalService.globalVar.duoRank),e===Li.Rainbow&&this.globalService.GenerateRainbowRaces(this.globalService.globalVar.rainbowRank),e===Li.Pinnacle&&this.globalService.GeneratePinnacleRaces(this.globalService.globalVar.pinnacleFloor),this.globalService.globalVar.localRaces.find(i=>i.localRaceType===e)}sortByRankRequired(e,i){return e.requiredRank>i.requiredRank?1:i.requiredRank>e.requiredRank?-1:0}selectLocalRace(e){var i=!0,r=e.localRaceType===Li.Free,a=this.globalService.globalVar.animalDecks.find(c=>c.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(c=>{(null==a?void 0:a.selectedAnimals.some(m=>m.raceCourseType===c.courseType))||(i=!1);var d=null==a?void 0:a.selectedAnimals.find(m=>m.raceCourseType===c.courseType);void 0!==d&&!this.lookupService.canAnimalRace(d)&&(i=!1)}),void 0!==e.pinnacleConditions&&(e.pinnacleConditions.containsCondition($t[$t.twoRacersOnly])&&a.selectedAnimals.length<2&&(i=!1),e.pinnacleConditions.containsCondition($t[$t.threeRacersOnly])&&a.selectedAnimals.length<3&&(i=!1),e.pinnacleConditions.containsCondition(gi[gi.fourRacersOnly])&&a.selectedAnimals.length<4&&(i=!1)),i&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):i=!1}toggleRace(e){var i=this.globalService.globalVar.settings.get(e);this.globalService.globalVar.settings.set(e,!i),"monoRaceToggled"===e&&(this.isMonoRaceToggled=!this.isMonoRaceToggled),"duoRaceToggled"===e&&(this.isDuoRaceToggled=!this.isDuoRaceToggled),"rainbowRaceToggled"===e&&(this.isRainbowRaceToggled=!this.isRainbowRaceToggled),"pinnacleRaceToggled"===e&&(this.isPinnacleRaceToggled=!this.isPinnacleRaceToggled)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(Lr),Me(yn),Me(jr))},t.\u0275cmp=mi({type:t,selectors:[["app-local-view"]],outputs:{raceSelected:"raceSelected"},decls:13,vars:8,consts:[[1,"localViewDiv"],[1,"localRaceHeader"],[1,"allLocalRaces"],["id","monoRaceSection",4,"ngIf"],["id","duoRaceSection",4,"ngIf"],["id","rainbowRaceSection",4,"ngIf"],["id","pinnacleRaceSection",4,"ngIf"],["id","monoRaceSection"],["class","monoRace",4,"ngIf"],[1,"monoRace"],[1,"minimizer"],[1,"minimizerSideSpacing"],[3,"click"],[1,"s4Heading"],[3,"race","showStartText","click"],["class","monoRace",3,"click",4,"ngIf"],[1,"monoRace",3,"click"],[1,"s4Heading","raceNameSpacing"],[1,"inlineDescription"],[3,"race","showStartText","condensedVersion","click"],["id","duoRaceSection"],["class","duoRace",4,"ngIf"],[1,"duoRace"],["id","rainbowRaceSection"],["class","rainbowRace",4,"ngIf"],[1,"rainbowRace"],["id","pinnacleRaceSection"],["class","pinnacleRace",4,"ngIf"],[1,"pinnacleRace"],[3,"innerHTML"]],template:function(e,i){1&e&&(D(0,"div",0),he(1,"div",1)(2,"app-animal-deck")(3,"hr"),D(4,"div",2),pe(5,TH,4,2,"div",3),pe(6,RH,4,2,"div",3),pe(7,AH,4,2,"div",4),pe(8,IH,4,2,"div",4),pe(9,VH,4,2,"div",5),pe(10,LH,4,2,"div",5),pe(11,GH,4,2,"div",6),pe(12,qH,4,2,"div",6),M()()),2&e&&(V(5),Y("ngIf",i.areMonoRacesAvailable&&!i.isMonoRaceToggled),V(1),Y("ngIf",i.areMonoRacesAvailable&&i.isMonoRaceToggled),V(1),Y("ngIf",i.areDuoRacesAvailable&&!i.isDuoRaceToggled),V(1),Y("ngIf",i.areDuoRacesAvailable&&i.isDuoRaceToggled),V(1),Y("ngIf",i.areRainbowRacesAvailable&&!i.isRainbowRaceToggled),V(1),Y("ngIf",i.areRainbowRacesAvailable&&i.isRainbowRaceToggled),V(1),Y("ngIf",i.arePinnacleRacesAvailable&&!i.isPinnacleRaceToggled),V(1),Y("ngIf",i.arePinnacleRacesAvailable&&i.isPinnacleRaceToggled))},directives:[m1,on,b1],styles:[".allLocalRaces[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.minimizer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.minimizerSideSpacing[_ngcontent-%COMP%]{width:3rem}.inlineDescription[_ngcontent-%COMP%]{width:40%;margin-top:auto;margin-bottom:auto}.raceNameSpacing[_ngcontent-%COMP%]{width:20%}"]}),t})();function WH(t,n){1&t&&(D(0,"span",8),F(1," Will Start Race "),M())}function XH(t,n){if(1&t){const e=tt();D(0,"button",12),_e("click",function(){me(e);const r=K(5).$implicit;return K().chooseToStartRace(r)}),F(1,"Choose To Start Race"),M()}}function YH(t,n){if(1&t&&(D(0,"span")(1,"em",7),F(2,"Resting..."),M()()),2&t){const e=K(6);V(1),Y("ngbPopover",e.getRestingPopover())}}function KH(t,n){if(1&t&&(D(0,"span"),pe(1,XH,2,0,"button",11),pe(2,YH,3,1,"span",6),M()),2&t){const e=K(4).$implicit,i=K();V(1),Y("ngIf",!i.isSetToRelay(e)&&i.canRelay(e)),V(1),Y("ngIf",!i.isSetToRelay(e)&&!i.canRelay(e))}}function ZH(t,n){if(1&t&&(D(0,"div"),pe(1,WH,2,0,"span",10),pe(2,KH,3,2,"span",6),M()),2&t){const e=K(3).$implicit,i=K();V(1),Y("ngIf",i.isCurrentlyRacing(e)),V(1),Y("ngIf",!i.isCurrentlyRacing(e))}}function QH(t,n){1&t&&(D(0,"span",8),F(1," Currently Racing "),M())}function JH(t,n){if(1&t){const e=tt();D(0,"button",14),_e("click",function(){me(e);const r=K(4).$implicit;return K().pullFromRace(r)}),F(1," Pull From Race "),M()}}function eG(t,n){if(1&t){const e=tt();D(0,"button",12),_e("click",function(){me(e);const r=K(5).$implicit;return K().relayAnimal(r)}),F(1,"Relay"),M()}}function tG(t,n){if(1&t&&(D(0,"span")(1,"em",7),F(2,"Resting..."),M()()),2&t){const e=K(6);V(1),Y("ngbPopover",e.getRestingPopover())}}function iG(t,n){1&t&&(D(0,"span"),F(1,"Set To Relay"),M())}function nG(t,n){if(1&t&&(D(0,"span"),pe(1,eG,2,0,"button",11),pe(2,tG,3,1,"span",6),pe(3,iG,2,0,"span",6),M()),2&t){const e=K(4).$implicit,i=K();V(1),Y("ngIf",!i.isSetToRelay(e)&&i.canRelay(e)),V(1),Y("ngIf",!i.isSetToRelay(e)&&!i.canRelay(e)),V(1),Y("ngIf",i.isSetToRelay(e))}}function rG(t,n){if(1&t&&(D(0,"div"),pe(1,QH,2,0,"span",10),pe(2,JH,2,0,"button",13),pe(3,nG,4,3,"span",6),M()),2&t){const e=K(3).$implicit,i=K();V(1),Y("ngIf",i.isCurrentlyRacing(e)),V(1),Y("ngIf",i.isCurrentlyRacing(e)),V(1),Y("ngIf",!i.isCurrentlyRacing(e))}}function aG(t,n){if(1&t&&(D(0,"div"),pe(1,ZH,3,2,"div",6),pe(2,rG,4,3,"div",6),M()),2&t){const e=K(3);V(1),Y("ngIf",!e.enteredEvent()),V(1),Y("ngIf",e.enteredEvent())}}function oG(t,n){if(1&t&&(D(0,"div")(1,"em"),F(2),M()()),2&t){const e=K(3);V(2),He("Breed Level ",e.breedLevelRequired," Required")}}function sG(t,n){if(1&t&&(D(0,"div"),he(1,"br"),D(2,"div")(3,"span",7)(4,"span",8),F(5,"Morale:"),M(),F(6),Di(7,"number"),M(),he(8,"br"),D(9,"span",7)(10,"span",8),F(11,"Energy:"),M(),F(12),Di(13,"number"),M(),he(14,"br")(15,"div",9),M(),he(16,"br"),pe(17,aG,3,2,"div",6),pe(18,oG,3,1,"div",6),M()),2&t){const e=K().$implicit,i=K();V(3),Y("ngbPopover",i.getMoralePopover(e)),V(3),He(" ",Yi(7,7,i.getMorale(e),"1.2-2"),"%"),V(3),Y("ngbPopover",i.getEnergyPopover(e)),V(3),He(" ",Yi(13,10,i.getExhaustion(e),"1.2-2"),"%"),V(3),Y("innerHTML",i.getUseCountInformation(e),Si),V(2),Y("ngIf",i.canEnterGrandPrix(e)),V(1),Y("ngIf",!i.canEnterGrandPrix(e))}}function lG(t,n){if(1&t&&(D(0,"div",4)(1,"span",5),F(2),M(),pe(3,sG,19,13,"div",6),M()),2&t){const e=n.$implicit,i=K();V(1),Y("ngClass",i.getColorClass(e)),V(1),Kt(e.name),V(1),Y("ngIf",i.hasEventStarted()&&!i.eventCompleted())}}let cG=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.componentCommunicationService=i,this.lookupService=r,this.utilityService=a,this.organizedAnimals=[]}ngOnInit(){var e=this.globalService.globalVar.animalDecks.find(c=>c.isEventDeck);if(void 0!==e&&(this.deck=e),null!=this.deck)if(this.deck.isCourseOrderActive){for(var i=0;i<this.deck.selectedAnimals.length;i++)if(this.deck.courseTypeOrder.length>i){var r=this.deck.courseTypeOrder[i],a=this.deck.selectedAnimals.find(c=>c.raceCourseType===r);void 0!==a&&this.organizedAnimals.push(a)}}else this.deck.selectedAnimals.forEach(c=>{this.organizedAnimals.push(c)});this.breedLevelRequired=this.getBreedLevelRequired()}getMorale(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:100*i.morale}getExhaustion(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:100*i.exhaustionStatReduction}eventCompleted(){return this.globalService.globalVar.eventRaceData.isGrandPrixCompleted}hasEventStarted(){return!(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime)}enteredEvent(){return this.globalService.globalVar.eventRaceData.isRunning}canEnterGrandPrix(e){var i=!1,r=this.getBreedLevelRequired(),a=this.globalService.globalVar.animals.find(c=>c.type===e.type);return void 0!==a&&a.breedLevel>=r&&(i=!0),i}getBreedLevelRequired(){var e=50,i=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}chooseToStartRace(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(c=>c.associatedAnimalType===e.type);if(void 0!==i){var r=this.globalService.globalVar.animals.find(c=>c.type===(null==i?void 0:i.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(c=>{c.isCurrentlyRacing=!1}),i.isCurrentlyRacing=!0)}}}isCurrentlyRacing(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.isCurrentlyRacing}isSetToRelay(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.isSetToRelay}canRelay(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.exhaustionStatReduction>.5}relayAnimal(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(c=>c.associatedAnimalType===e.type);if(void 0!==i){var r=this.globalService.globalVar.animals.find(c=>c.type===(null==i?void 0:i.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(c=>{c.isSetToRelay=!1}),i.isSetToRelay=!0)}}}pullFromRace(e){this.globalService.stopGrandPrixRace()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}getRestingPopover(){return"Racer must be above 50% energy to race"}getMoralePopover(e){var i="",r=this.getMorale(e);if(void 0!==r){var a=.9,c=this.globalService.globalVar.modifiers.find(m=>"exhaustionStatLossModifier"===m.text);void 0!==c&&(a=c.value);var d=1-a;a=1-(d*=1/(r/100)),i="Your current Morale is "+r.toFixed(2)+"%. Your energy will reduce by "+(100*(1-a)).toFixed(2)+"% every time you run out of stamina."}return i}getEnergyPopover(e){return""+"Your current Energy is "+this.getExhaustion(e).toFixed(2)+"%. Your stats are reduced to this amount while racing in the grand prix."}getUseCountInformation(e){var i="<br/><br/>",r=this.globalService.globalVar.eventRaceData.eventAbilityData,a=this.globalService.globalVar.animals.find(c=>c.type===e.type);if(null!=a)return a.type===Fe.Horse&&"Inspiration"===a.ability.name&&(i="Inspiration Relay Count: "+r.inspirationUseCount+"<br/><br/>"),a.type===Fe.Cheetah&&"On The Hunt"===a.ability.name&&(i="On The Hunt Use Count: "+r.onTheHuntUseCount+" / "+r.onTheHuntUseCap+"<br/><br/>"),a.type===Fe.Goat&&(i="Deep Breathing Relay Count: "+r.deepBreathingUseCount+" / "+r.deepBreathingUseCap+"<br/>",i+="Sure-footed"===a.ability.name?"Sure-footed Use Count: "+r.sureFootedUseCount+" / "+r.sureFootedUseCap+"<br/>":"<br/>"),a.type===Fe.Gecko&&"Night Vision"===a.ability.name&&(i="Night Vision Use Count: "+r.nightVisionUseCount+" / "+r.nightVisionUseCap+"<br/><br/>"),a.type===Fe.Dolphin&&("Flowing Current"===a.ability.name&&(i="Flowing Current Relay Count: "+r.flowingCurrentUseCount+"<br/><br/>"),"Navigator"===a.ability.name&&(i="Navigator Relay Count: "+r.navigatorUseCount+"<br/><br/>")),a.type===Fe.Octopus&&(i="Big Brain Relay Count: "+r.bigBrainUseCount+" / "+r.bigBrainUseCap+"<br/><br/>"),a.type===Fe.Whale&&"Storing Power"===a.ability.name&&(i="Storing Power Use Count: "+r.storingPowerUseCount+" / "+r.storingPowerUseCap+"<br/><br/>"),a.type===Fe.Penguin&&"Quick Toboggan"===a.ability.name&&(i="Quick Toboggan Use Count: "+r.quickTobogganUseCount+" / "+r.quickTobogganUseCap+"<br/><br/>"),a.type===Fe.Caribou&&(i="Herd Mentality Relay Count: "+r.herdMentalityUseCount+" / "+r.herdMentalityUseCap+"<br/>",i+="Special Delivery Relay Count: "+r.specialDeliveryUseCount+" / "+r.specialDeliveryUseCap),this.utilityService.getSanitizedHtml(i)}goToDeckView(){this.componentCommunicationService.setNewView(Mi.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(qr),Me(yn),Me(Lr))},t.\u0275cmp=mi({type:t,selectors:[["app-event-animal-deck"]],decls:7,vars:2,consts:[[1,"deckName"],[1,"clickableText",3,"click"],[1,"flex"],["class","eventAnimal",4,"ngFor","ngForOf"],[1,"eventAnimal"],[1,"coloredText",3,"ngClass"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"keyword"],[3,"innerHTML"],["class","keyword",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","keyword",3,"click",4,"ngIf"],[1,"keyword",3,"click"]],template:function(e,i){1&e&&(D(0,"div")(1,"div",0)(2,"strong",1),_e("click",function(){return i.goToDeckView()}),F(3),M()(),he(4,"br"),D(5,"div",2),pe(6,lG,4,3,"div",3),M()()),2&e&&(V(3),Kt(i.deck.name),V(3),Y("ngForOf",i.organizedAnimals))},directives:[Vr,_r,on,no],pipes:[ts],styles:[".flex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.deckName[_ngcontent-%COMP%]{text-align:center}.eventAnimal[_ngcontent-%COMP%]{flex:1}"]}),t})();const uG=["loadingModal"];function dG(t,n){1&t&&(D(0,"p",6),F(1,"The Grand Prix is currently under construction. "),he(2,"br")(3,"br"),D(4,"em"),F(5,"I'm fixing a few bugs and making some improvements related to the Grand Prix but it will reopen soon!"),M()())}function fG(t,n){if(1&t){const e=tt();D(0,"div",14),_e("click",function(){me(e);const r=K(3),a=Qt(9);return r.selectEventRace(a)}),F(1),he(2,"br"),M()}if(2&t){const e=K(3);Y("ngbPopover",Qt(7)),V(1),He("Bonus Time: ",e.bonusTime," ")}}function hG(t,n){1&t&&(D(0,"h6",20),F(1,"View Race"),M())}function pG(t,n){1&t&&(D(0,"h6",24)(1,"em"),F(2,"Please Wait -- Offline Time Is Calculating"),M()())}function gG(t,n){1&t&&(D(0,"h6",20),F(1,"Start"),M())}function vG(t,n){1&t&&(D(0,"h6")(1,"em"),F(2,"Completed!"),M()())}function mG(t,n){if(1&t&&(D(0,"div",25),F(1),M()),2&t){const e=K(4);V(1),He(" ",e.popoverText," ")}}const bG=function(t){return{raceNotAllowed:t}};function _G(t,n){if(1&t){const e=tt();D(0,"div",15)(1,"div")(2,"span",16),F(3,"Grand Prix "),D(4,"strong"),F(5),M()(),he(6,"br"),D(7,"span",17),_e("click",function(){me(e);const r=K(3),a=Qt(3);return r.openRewardsModal(a)}),F(8),M(),he(9,"br")(10,"br"),D(11,"div",18)(12,"div",19),_e("click",function(){me(e);const r=K(3),a=Qt(9);return r.selectEventRace(a)}),D(13,"span")(14,"span",20),F(15,"Forecast:"),M(),F(16),M(),he(17,"br"),F(18),Di(19,"number"),he(20,"br"),pe(21,hG,2,0,"h6",21),pe(22,pG,3,0,"h6",22),pe(23,gG,2,0,"h6",21),pe(24,vG,3,0,"h6",9),M()(),pe(25,mG,2,1,"ng-template",null,23,ni),M()()}if(2&t){const e=Qt(26),i=K(3);V(5),Kt(i.raceRank),V(3),Mn("",i.globalService.globalVar.eventRaceData.remainingRewards," / ",i.globalService.globalVar.eventRaceData.totalRewards," rewards remaining"),V(4),Y("ngClass",hi(15,bG,i.grandPrixData.isCatchingUp))("ngbPopover",e)("disablePopover",""===i.popoverText),V(4),He(" ",void 0===i.grandPrixData.weatherCluster?"Unknown":i.lookupService.getWeatherClusterFromEnum(i.grandPrixData.weatherCluster),""),V(2),He(" ",Yi(19,12,i.remainingMeters,"1.")," Meters Remaining "),V(3),Y("ngIf",i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted&&!i.grandPrixData.isCatchingUp),V(1),Y("ngIf",i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted&&i.grandPrixData.isCatchingUp),V(1),Y("ngIf",!i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted),V(1),Y("ngIf",!i.grandPrixData.isRunning&&i.grandPrixData.isGrandPrixCompleted)}}function yG(t,n){if(1&t){const e=tt();D(0,"div")(1,"label",26),F(2,"Your animals will automatically relay the segment after they lose energy and it is below "),M(),D(3,"input",27),_e("ngModelChange",function(r){return me(e),K(3).relayEnergy=r})("change",function(){return me(e),K(3).updateRelayEnergy()}),M(),F(4," %. "),D(5,"em"),F(6,"Must be between 50% and 99%."),M(),he(7,"br"),D(8,"span",28)(9,"label")(10,"input",29),_e("ngModelChange",function(r){return me(e),K(3).doNotAutoRelayBelowEnergyFloor=r})("input",function(){return me(e),K(3).doNotAutoRelayBelowEnergyFloorToggle()}),M(),D(11,"span"),F(12,"Do not relay to animals below "),D(13,"strong"),F(14),M(),F(15,"% energy."),M()()()()}if(2&t){const e=K(3);V(3),Y("ngModel",e.relayEnergy),V(7),Y("ngModel",e.doNotAutoRelayBelowEnergyFloor),V(4),Kt(e.relayEnergy)}}function wG(t,n){1&t&&(D(0,"div",32),F(1," None "),M())}function SG(t,n){if(1&t&&(D(0,"td")(1,"span",20),F(2),M(),F(3),M()),2&t){const e=n.$implicit;V(2),Kt(e.name),V(1),He(": ",e.amount,"")}}function CG(t,n){if(1&t&&(D(0,"tr"),pe(1,SG,4,2,"td",33),M()),2&t){const e=n.$implicit;V(1),Y("ngForOf",e)}}function TG(t,n){if(1&t&&(D(0,"div",32)(1,"table"),pe(2,CG,2,1,"tr",33),M()()),2&t){const e=K(4);V(2),Y("ngForOf",e.rewardRows)}}function MG(t,n){if(1&t&&(D(0,"div"),he(1,"br")(2,"br"),D(3,"div",30)(4,"span",16),F(5,"Previous Grand Prix Rewards"),M(),pe(6,wG,2,0,"div",31),pe(7,TG,3,1,"div",31),M()()),2&t){const e=K(3);V(6),Y("ngIf",0===e.previousRaceRewardList.length),V(1),Y("ngIf",e.previousRaceRewardList.length>0)}}function xG(t,n){if(1&t){const e=tt();D(0,"div")(1,"div"),F(2),he(3,"br"),pe(4,fG,3,2,"div",10),D(5,"button",11),_e("click",function(){me(e);const r=K(2),a=Qt(5);return r.openInfoModal(a)}),F(6,"Grand Prix Info"),M(),D(7,"button",12),_e("click",function(){return me(e),K(2).goToTokenShop()}),F(8,"Token Shop"),M(),he(9,"br")(10,"br"),M(),he(11,"br"),pe(12,_G,27,17,"div",13),he(13,"br"),D(14,"div"),he(15,"app-event-animal-deck"),M(),he(16,"br"),pe(17,yG,16,3,"div",9),pe(18,MG,8,2,"div",9),M()}if(2&t){const e=K(2);V(2),Mn(" ",e.eventRaceNotice," ",e.eventRaceTimer," "),V(2),Y("ngIf",""!==e.bonusTime),V(8),Y("ngIf",e.isEventRaceAvailable),V(5),Y("ngIf",e.isEventRaceAvailable),V(1),Y("ngIf",null!=e.previousRaceRewardList&&!e.isEventRaceAvailable)}}function RG(t,n){1&t&&(D(0,"div"),F(1," Nothing here yet, but maybe as you climb the circuit ranks you might be invited to a new type of race. "),M())}function DG(t,n){if(1&t&&(D(0,"div",7),he(1,"div",8),pe(2,xG,19,6,"div",9),pe(3,RG,2,0,"div",9),M()),2&t){const e=K();V(2),Y("ngIf",e.grandPrixUnlocked),V(1),Y("ngIf",!e.grandPrixUnlocked)}}function kG(t,n){if(1&t){const e=tt();D(0,"div",34)(1,"div",35)(2,"h4",36),F(3,"Grand Prix Rewards"),M(),D(4,"button",37),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",38)(7,"div"),F(8),Di(9,"number"),Di(10,"number"),he(11,"br")(12,"br"),F(13),Di(14,"number"),Di(15,"number"),he(16,"br")(17,"br")(18,"div",39)(19,"div",39)(20,"br")(21,"div",39)(22,"div",39),M()(),D(23,"div",40)(24,"button",41),_e("click",function(){return me(e).$implicit.dismiss()}),F(25,"Close"),M()()()}if(2&t){const e=K();V(8),Vg(" The further you go in the Grand Prix invitational, the more rewards you'll receive. Every ",Yi(9,10,e.coinRewardInterval,"1.")," meters, you'll receive ",e.coinRewardAmount," Coins. Every ",Yi(10,13,e.renownRewardInterval,"1.")," meters, you'll receive ",e.renownRewardAmount," Renown. Also, you'll be able to obtain rare tokens that can be spent on unique upgrades. "),V(5),Mn(" Distance Covered: ",Yi(14,16,(e.grandPrixData.totalDistance-e.remainingMeters).toFixed(0),"1.")," / ",Yi(15,19,e.grandPrixData.totalDistance,"1.")," "),V(5),Y("innerHTML",e.getGrandPrixCoinRewardsPopover(),Si),V(1),Y("innerHTML",e.getGrandPrixRenownRewardsPopover(),Si),V(2),Y("innerHTML",e.getGrandPrixFoodRewardsPopover(),Si),V(1),Y("innerHTML",e.getGrandPrixTokenRewardsPopover(),Si)}}function AG(t,n){if(1&t){const e=tt();D(0,"div",34)(1,"div",35)(2,"h4",36),F(3,"Grand Prix Info"),M(),D(4,"button",37),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",38)(7,"div"),F(8," You've been invited to the "),D(9,"span",20),F(10,"Grand Prix"),M(),F(11," invitational, which is a marathon style race that runs for 51 hours twice a week. You can start the race at any time during the start and stop point of the Grand Prix. "),D(12,"b"),F(13,"It will run on its own in the background -- you don't have to watch your animals race for it to run."),M(),F(14," You have the option to view the race as desired by clicking the race. The weekly start and end times are: "),he(15,"br")(16,"br"),D(17,"span",20),F(18,"Weekday Marathon"),M(),F(19),he(20,"br"),D(21,"span",20),F(22,"Weekend Marathon"),M(),F(23),he(24,"br")(25,"br"),F(26),he(27,"br")(28,"br"),D(29,"span",20),F(30,"Morale"),M(),F(31," - This affects how much your stats reduce when running out of stamina. By default, your stats will reduce by 10% while Morale is at 100%. Morale can range from 50% to 300%. Gain Morale by completing segments and Bursting. Lose Morale when you stumble or lose focus. "),he(32,"br"),D(33,"span",20),F(34,"Energy"),M(),F(35," - The percent your stats are currently at from their maximum. This is increased slightly over time while a racer is not racing. "),he(36,"br"),D(37,"span",20),F(38,"*Note that these values have no impact on any race other than the Grand Prix."),M(),he(39,"br")(40,"br"),F(41," Maintain your morale and energy to get the most out of your racing animals. You can Relay to another animal in your event deck at any point, although the Relay will only occur after the completion of the current race leg. "),he(42,"br")(43,"br"),F(44," Race as far as you can to gain "),D(45,"span",42),F(46,"Coins"),M(),F(47,", "),D(48,"span",43),F(49,"Renown"),M(),F(50,", and the unique resource "),D(51,"span",42),F(52,"Tokens"),M(),F(53,". Click '"),D(54,"em"),F(55,"Rewards"),M(),F(56,"' to track your progress on gaining rewards. "),M()(),D(57,"div",40)(58,"button",41),_e("click",function(){return me(e).$implicit.dismiss()}),F(59,"Close"),M()()()}if(2&t){const e=K();V(19),He(" - ",e.weekDayGrandPrixTimeSpan," "),V(4),He(" - ",e.weekEndGrandPrixTimeSpan," "),V(3),He(" To run in the Grand Prix, animals must be at least Breed Level ",e.requiredBreedLevel,". The animals in your event deck will be shown below along with their current morale and energy. ")}}function PG(t,n){1&t&&(D(0,"div",25),F(1," Bonus Time is accrued from effects that delay competitors or extend the length of a race. Once the Grand Prix event time ends, any bonus time will continue to play out before your entry to the Grand Prix ends. "),M())}function EG(t,n){1&t&&(D(0,"div",25),F(1," Loading... "),M())}let IG=(()=>{class t{constructor(e,i,r,a,c,d,m,_){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.raceLogicService=a,this.sanitizer=c,this.modalService=d,this.componentCommunicationService=m,this.utilityService=_,this.raceSelected=new di,this.popoverText="",this.cannotRace=!1,this.eventRaceReleased=!0,this.raceRank="",this.eventRaceNotice="",this.eventRaceTimer="",this.bonusTime="",this.grandPrixUnlocked=!1,this.relayEnergy=50,this.doNotAutoRelayBelowEnergyFloor=!1,this.doNotAutoRelayBelowEnergyFloorToggle=()=>{this.doNotAutoRelayBelowEnergyFloor=!this.doNotAutoRelayBelowEnergyFloor,this.globalService.globalVar.doNotRelayBelowEnergyFloor=this.doNotAutoRelayBelowEnergyFloor}}ngOnInit(){var e=this;this.grandPrixData=this.globalService.globalVar.eventRaceData,this.previousRaceRewardList=this.globalService.globalVar.previousEventRewards,this.relayEnergy=this.globalService.globalVar.relayEnergyFloor,this.doNotAutoRelayBelowEnergyFloor=this.globalService.globalVar.doNotRelayBelowEnergyFloor,this.grandPrixUnlocked=this.lookupService.isItemUnlocked("grandPrix"),this.weekDayGrandPrixTimeSpan=this.lookupService.getWeekDayGrandPrixTimeSpan(),this.weekEndGrandPrixTimeSpan=this.lookupService.getWeekEndGrandPrixTimeSpan(),this.requiredBreedLevel=this.lookupService.getBreedLevelRequiredForGrandPrix(),this.popoverText=this.getForecastPopoverText(),this.raceRank=this.grandPrixData.rank,this.globalService.globalVar.settings.get("useNumbersForCircuitRank")&&(this.raceRank=this.utilityService.getNumericValueOfCircuitRank(this.raceRank).toString());var i=this.globalService.getGrandPrixRacingAnimal();if(!this.globalService.globalVar.eventRaceData.animalData.some(T=>T.isCurrentlyRacing)){var r=this.globalService.globalVar.eventRaceData.animalData.find(T=>T.associatedAnimalType==i.type);void 0!==r&&(r.isCurrentlyRacing=!0)}var a=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,c=this.globalService.globalVar.modifiers.find(T=>"grandPrixCoinRewardModifier"===T.text);null!=c&&(this.coinRewardAmount=c.value*a);var d=this.globalService.globalVar.modifiers.find(T=>"grandPrixRenownRewardModifier"===T.text);null!=d&&(this.renownRewardAmount=d.value);var m=this.globalService.globalVar.modifiers.find(T=>"metersPerCoinsGrandPrixModifier"===T.text);null!=m&&(this.coinRewardInterval=m.value*a);var _=this.globalService.globalVar.modifiers.find(T=>"metersPerRenownGrandPrixModifier"===T.text);null!=_&&(this.renownRewardInterval=_.value*a),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var T=Wa(function*(A){e.setupEventTime(),e.grandPrixData=e.globalService.globalVar.eventRaceData,e.previousRaceRewardList=e.globalService.globalVar.previousEventRewards,null!=m&&(e.coinRewardInterval=m.value*e.globalService.globalVar.eventRaceData.rankDistanceMultiplier),null!=_&&(e.renownRewardInterval=_.value*e.globalService.globalVar.eventRaceData.rankDistanceMultiplier),void 0!==e.grandPrixData&&(e.raceRank=e.grandPrixData.rank,e.globalService.globalVar.settings.get("useNumbersForCircuitRank")&&(e.raceRank=e.utilityService.getNumericValueOfCircuitRank(e.raceRank).toString())),e.previousRaceRewardList.length>0&&e.setupDisplayRewards(),e.remainingMeters=e.globalService.globalVar.eventRaceData.totalDistance-e.globalService.globalVar.eventRaceData.distanceCovered,null!=e.globalService.globalVar.eventRaceData&&null!=e.globalService.globalVar.eventRaceData.currentRaceSegment&&(e.grandPrixData.isCatchingUp=e.globalService.globalVar.eventRaceData.segmentTimeCounter>=e.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60*2)});return function(A){return T.apply(this,arguments)}}())}selectEventRace(e){if(!1===this.globalService.globalVar.eventRaceData.isRunning){var i=this.globalService.getGrandPrixRacingAnimal();if(null==i.type)return void alert("None of the animals in your event deck are capable of entering the Grand Prix. Swap to new animals or make adjustments to your existing animals to meet the criteria.");var r=this.globalService.globalVar.eventRaceData.animalData.find(c=>c.associatedAnimalType===i.type);void 0!==r&&(r.isCurrentlyRacing=!0);var a=this.globalService.shouldShowSlowSegmentWarning(i);if(!this.lookupService.slowSegmentWarning(a))return;this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(i),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(i),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}!this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&!this.globalService.globalVar.eventRaceData.isCatchingUp&&this.raceSelected.emit(this.globalService.globalVar.eventRaceData.currentRaceSegment)}setupEventTime(){var e=this.globalService.getTimeToEventRace();if(e>0){this.isEventRaceAvailable=this.globalService.globalVar.eventRaceData.bonusTime>0,this.eventRaceNotice="Next Grand Prix available in";var a=e-60*(i=Math.floor(e/3600))*60-60*(r=Math.floor(e/60-60*i)),c=Math.floor(a).toString(),d=i.toString(),m=r.toString();i<10&&(d=i<1||i>59?"00":String(d).padStart(2,"0")),r<10&&(m=r<1||r>59?"00":String(m).padStart(2,"0")),a<10&&(c=a<1||a>59?"00":String(c).padStart(2,"0")),this.eventRaceTimer=d+":"+m+":"+c}else{var i,r,_=this.globalService.getRemainingEventRaceTime();if(_>0)this.eventRaceNotice="Grand Prix ends in",this.isEventRaceAvailable=!0,a=_-60*(i=Math.floor(_/3600))*60-60*(r=Math.floor(_/60-60*i)),d=i.toString(),m=r.toString(),c=Math.floor(a).toString(),i<10&&(d=i<1||i>59?"00":String(d).padStart(2,"0")),r<10&&(m=r<1||r>59?"00":String(m).padStart(2,"0")),a<10&&(c=a<1||a>59?"00":String(c).padStart(2,"0")),this.eventRaceTimer=d+":"+m+":"+c}this.bonusTime=this.globalService.globalVar.eventRaceData.bonusTime>0?this.utilityService.convertSecondsToHHMMSS(this.globalService.globalVar.eventRaceData.bonusTime):""}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openInfoModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openLoadingModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}getGrandPrixFoodRewardsPopover(){var e="";if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank)>1)return e;var c=25e3,d=5e4,m=75e3,_=1e5,T=25e4,A=5e5,q=75e4,Q=1e6;return e+=this.globalService.globalVar.eventRaceData.distanceCovered>=c?"<span class='crossed'>"+c.toLocaleString()+" meters - +100 Strawberries</span><br/>":c.toLocaleString()+" meters - +100 Strawberries<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=d?"<span class='crossed'>"+d.toLocaleString()+" meters - +100 Apples</span><br/>":d.toLocaleString()+" meters - +100 Apples<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=m?"<span class='crossed'>"+m.toLocaleString()+" meters - +100 Oranges</span><br/>":m.toLocaleString()+" meters - +100 Oranges<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=_?"<span class='crossed'>"+_.toLocaleString()+" meters - +5 Mangoes</span><br/>":_.toLocaleString()+" meters - +100 Mangoes<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=T?"<span class='crossed'>"+T.toLocaleString()+" meters - +100 Turnips</span><br/>":T.toLocaleString()+" meters - +100 Turnips<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=A?"<span class='crossed'>"+A.toLocaleString()+" meters - +100 Bananas</span><br/>":A.toLocaleString()+" meters - +100 Bananas<br/>",(e+=this.globalService.globalVar.eventRaceData.distanceCovered>=q?"<span class='crossed'>"+q.toLocaleString()+" meters - +100 Carrots</span><br/>":q.toLocaleString()+" meters - +100 Carrots<br/>")+(this.globalService.globalVar.eventRaceData.distanceCovered>=Q?"<span class='crossed'>"+Q.toLocaleString()+" meters - +10 Mangoes</span><br/>":Q.toLocaleString()+" meters - +10 Mangoes<br/>")}getGrandPrixRenownRewardsPopover(){var r;return r=this.globalService.globalVar.eventRaceData.totalDistance/this.renownRewardInterval,Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/this.renownRewardInterval)*this.renownRewardAmount+"/"+r*this.renownRewardAmount+" Renown obtained"}getGrandPrixCoinRewardsPopover(){var r;return r=this.globalService.globalVar.eventRaceData.totalDistance/this.coinRewardInterval,(Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/this.coinRewardInterval)*this.coinRewardAmount).toLocaleString()+"/"+(r*this.coinRewardAmount).toLocaleString()+" Coins obtained"}getGrandPrixTokenRewardsPopover(){var e="",i=this.lookupService.getGrandPrixTokenRewards(),r=this.globalService.globalVar.eventRaceData.rankDistanceMultiplier,a=5e7,c=this.globalService.globalVar.modifiers.find(ce=>"grandPrixToken1MeterModifier"===ce.text);null!=c&&(a=c.value);var d=i[0],m=5e7,_=this.globalService.globalVar.modifiers.find(ce=>"grandPrixToken2MeterModifier"===ce.text);null!=_&&(m=_.value);var T=i[1],A=5e7,q=this.globalService.globalVar.modifiers.find(ce=>"grandPrixToken3MeterModifier"===ce.text);null!=q&&(A=q.value);var Q=i[2],te=5e7,oe=this.globalService.globalVar.modifiers.find(ce=>"grandPrixToken4MeterModifier"===ce.text);null!=oe&&(te=oe.value);var de=i[3],be=this.globalService.globalVar.eventRaceData.distanceCovered;return e+=be>=a*r?"<span class='crossed'>"+d+"</span>\n":"<span>"+d+"</span>\n",e+=be>=m*r?"<span class='crossed'>"+T+"</span>\n":"<span>"+T+"</span>\n",e+=be>=A*r?"<span class='crossed'>"+Q+"</span>\n":"<span>"+Q+"</span>\n",this.sanitizer.sanitize(vn.HTML,this.sanitizer.bypassSecurityTrustHtml(e+=be>=te*r?"<span class='crossed'>"+de+"</span>\n":"<span>"+de+"</span>\n"))}getForecastPopoverText(){return this.lookupService.getWeatherClusterDescription(this.grandPrixData.weatherCluster)}goToTokenShop(){this.componentCommunicationService.setShopView(Mi.shop,Fo.token)}setupDisplayRewards(){if(this.rewardCells=[],this.rewardRows=[],null!=this.previousRaceRewardList){for(var i=1;i<=this.previousRaceRewardList.length;i++)this.rewardCells.push({name:this.previousRaceRewardList[i-1].name,amount:this.previousRaceRewardList[i-1].amount}),i%4==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}updateRelayEnergy(){this.relayEnergy<50&&(this.relayEnergy=50),this.relayEnergy>99&&(this.relayEnergy=99),null!=this.globalService.globalVar.eventRaceData&&(this.globalService.globalVar.relayEnergyFloor=this.relayEnergy)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(jr),Me(yn),Me(w0),Me(dl),Me(ss),Me(qr),Me(Lr))},t.\u0275cmp=mi({type:t,selectors:[["app-event-view"]],viewQuery:function(e,i){if(1&e&&Ba(uG,7),2&e){let r;mn(r=bn())&&(i.loadingContent=r.first)}},outputs:{raceSelected:"raceSelected"},decls:10,vars:2,consts:[["class","centered",4,"ngIf"],["class","eventViewDiv centered",4,"ngIf"],["grandPrixRewardModal",""],["grandPrixInfoModal",""],["bonusTimeContent",""],["loadingModal",""],[1,"centered"],[1,"eventViewDiv","centered"],[1,"eventRaceHeader"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass","class","clickableText",3,"ngbPopover","click",4,"ngIf"],["type","button",1,"rightSpaced",3,"click"],[3,"click"],["id","grandPrix",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngbPopover","click"],["id","grandPrix"],[1,"s4Heading"],[1,"helpText",3,"click"],[1,"raceDescription"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText","eventRaceDescription",3,"ngClass","ngbPopover","disablePopover","click"],[1,"keyword"],["class","keyword",4,"ngIf"],["class","raceCatchingUp",4,"ngIf"],["popContent",""],[1,"raceCatchingUp"],[1,"popoverClass"],["for","relay-energy"],["id","relay-energy","name","relay-energy","type","text","minlength","2","maxlength","2",1,"spaced","energyInput",3,"ngModel","ngModelChange","change"],["triggers","mouseenter:mouseleave",1,"checkboxOption"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],[1,"results"],["class","rewards",4,"ngIf"],[1,"rewards"],[4,"ngFor","ngForOf"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"],[1,"resourceKeyword"],[1,"progressionKeyword"]],template:function(e,i){1&e&&(pe(0,dG,6,0,"p",0),pe(1,DG,4,2,"div",1),pe(2,kG,26,22,"ng-template",null,2,ni),pe(4,AG,60,3,"ng-template",null,3,ni),pe(6,PG,2,0,"ng-template",null,4,ni),pe(8,EG,2,0,"ng-template",null,5,ni)),2&e&&(Y("ngIf",!i.eventRaceReleased),V(1),Y("ngIf",i.eventRaceReleased))},directives:[on,no,_r,cG,Us,Xh,Ll,Hs,Gs,Jc,Vr],pipes:[ts],styles:[".eventRace[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.centered[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.energyInput[_ngcontent-%COMP%]{width:2rem}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.eventRaceDescription[_ngcontent-%COMP%]{width:40%;margin:auto}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.raceCatchingUp[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}table[_ngcontent-%COMP%]{table-layout:fixed;width:60%;height:100%;text-align:center;margin-left:auto;margin-right:auto}"]}),t})();function BG(t,n){if(1&t){const e=tt();D(0,"div",12)(1,"div",13)(2,"div",14)(3,"span",15)(4,"button",16),_e("click",function(){return me(e),K(2).toggleRace("noviceRaceToggled")}),F(5,"-"),M()(),D(6,"span",17),F(7,"Novice Track"),M(),he(8,"span",15),M(),he(9,"br"),D(10,"h6",18),_e("click",function(){me(e);const r=K(2),a=Qt(7);return r.openRewardsModal(a)}),F(11),M(),D(12,"app-race-description",19),_e("click",function(){me(e);const r=K(2);return r.selectTrackRace(r.noviceTrackRace)}),M()(),he(13,"hr"),M()}if(2&t){const e=K(2);V(11),Mn(" ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),V(1),Y("race",e.noviceTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function OG(t,n){if(1&t){const e=tt();D(0,"div",12)(1,"div",13)(2,"div",14)(3,"span",15)(4,"button",16),_e("click",function(){return me(e),K(2).toggleRace("noviceRaceToggled")}),F(5,"+"),M()(),D(6,"span",20),F(7,"Novice Track"),M(),D(8,"h6",18),_e("click",function(){me(e);const r=K(2),a=Qt(7);return r.openRewardsModal(a)}),F(9),M(),D(10,"div",21)(11,"app-race-description",22),_e("click",function(){me(e);const r=K(2);return r.selectTrackRace(r.noviceTrackRace)}),M()()()(),he(12,"hr"),M()}if(2&t){const e=K(2);V(9),Mn(" ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),V(2),Y("race",e.noviceTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)("condensedVersion",!0)}}function VG(t,n){if(1&t){const e=tt();D(0,"div",23)(1,"div",24)(2,"div",14)(3,"span",15)(4,"button",16),_e("click",function(){return me(e),K(2).toggleRace("intermediateRaceToggled")}),F(5,"-"),M()(),D(6,"span",17),F(7,"Intermediate Track"),M(),he(8,"span",15),M(),he(9,"br"),D(10,"h6",18),_e("click",function(){me(e);const r=K(2),a=Qt(9);return r.openRewardsModal(a)}),F(11),M(),D(12,"app-race-description",19),_e("click",function(){me(e);const r=K(2);return r.selectTrackRace(r.intermediateTrackRace)}),M()(),he(13,"hr"),M()}if(2&t){const e=K(2);V(11),Mn(" ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),V(1),Y("race",e.intermediateTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function NG(t,n){if(1&t){const e=tt();D(0,"div",23)(1,"div",24)(2,"div",14)(3,"span",15)(4,"button",16),_e("click",function(){return me(e),K(2).toggleRace("intermediateRaceToggled")}),F(5,"+"),M()(),D(6,"span",20),F(7,"Intermediate Track"),M(),D(8,"h6",18),_e("click",function(){me(e);const r=K(2),a=Qt(9);return r.openRewardsModal(a)}),F(9),M(),D(10,"div",21)(11,"app-race-description",22),_e("click",function(){me(e);const r=K(2);return r.selectTrackRace(r.intermediateTrackRace)}),M()()()(),he(12,"hr"),M()}if(2&t){const e=K(2);V(9),Mn(" ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),V(2),Y("race",e.intermediateTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)("condensedVersion",!0)}}function FG(t,n){if(1&t){const e=tt();D(0,"div",25)(1,"div",26)(2,"div",14)(3,"span",15)(4,"button",16),_e("click",function(){return me(e),K(2).toggleRace("masterRaceToggled")}),F(5,"-"),M()(),D(6,"span",17),F(7,"Master Track"),M(),he(8,"span",15),M(),he(9,"br"),D(10,"h6",18),_e("click",function(){me(e);const r=K(2),a=Qt(11);return r.openRewardsModal(a)}),F(11),M(),D(12,"app-race-description",19),_e("click",function(){me(e);const r=K(2);return r.selectTrackRace(r.masterTrackRace)}),M()(),he(13,"hr"),M()}if(2&t){const e=K(2);V(11),Mn(" ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),V(1),Y("race",e.masterTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function LG(t,n){if(1&t){const e=tt();D(0,"div",25)(1,"div",26)(2,"div",14)(3,"span",15)(4,"button",16),_e("click",function(){return me(e),K(2).toggleRace("masterRaceToggled")}),F(5,"+"),M()(),D(6,"span",20),F(7,"Master Track"),M(),D(8,"h6",18),_e("click",function(){me(e);const r=K(2),a=Qt(11);return r.openRewardsModal(a)}),F(9),M(),D(10,"div",21)(11,"app-race-description",22),_e("click",function(){me(e);const r=K(2);return r.selectTrackRace(r.masterTrackRace)}),M()()()(),he(12,"hr"),M()}if(2&t){const e=K(2);V(9),Mn(" ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),V(2),Y("race",e.masterTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)("condensedVersion",!0)}}function UG(t,n){if(1&t){const e=tt();D(0,"div",27)(1,"div",28)(2,"div",14)(3,"span",15)(4,"button",16),_e("click",function(){return me(e),K(2).toggleRace("legacyRaceToggled")}),F(5,"-"),M()(),D(6,"span",17),F(7,"Legacy Track"),M(),he(8,"span",15),M(),he(9,"br"),D(10,"h6",18),_e("click",function(){me(e);const r=K(2),a=Qt(13);return r.openRewardsModal(a)}),F(11),M(),D(12,"app-race-description",19),_e("click",function(){me(e);const r=K(2);return r.selectTrackRace(r.legacyTrackRace)}),M()(),he(13,"hr"),M()}if(2&t){const e=K(2);V(11),Mn(" ",e.selectedAnimal.allTrainingTracks.legacyTrack.totalRewards-e.selectedAnimal.allTrainingTracks.legacyTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.legacyTrack.totalRewards," rewards remaining"),V(1),Y("race",e.legacyTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function HG(t,n){if(1&t){const e=tt();D(0,"div",27)(1,"div",28)(2,"div",14)(3,"span",15)(4,"button",16),_e("click",function(){return me(e),K(2).toggleRace("legacyRaceToggled")}),F(5,"+"),M()(),D(6,"span",20),F(7,"Legacy Track"),M(),D(8,"h6",18),_e("click",function(){me(e);const r=K(2),a=Qt(13);return r.openRewardsModal(a)}),F(9),M(),D(10,"div",21)(11,"app-race-description",22),_e("click",function(){me(e);const r=K(2);return r.selectTrackRace(r.legacyTrackRace)}),M()()()(),he(12,"hr"),M()}if(2&t){const e=K(2);V(9),Mn(" ",e.selectedAnimal.allTrainingTracks.legacyTrack.totalRewards-e.selectedAnimal.allTrainingTracks.legacyTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.legacyTrack.totalRewards," rewards remaining"),V(2),Y("race",e.legacyTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)("condensedVersion",!0)}}function GG(t,n){if(1&t&&(D(0,"div",7),pe(1,BG,14,5,"div",8),pe(2,OG,13,6,"div",8),pe(3,VG,14,5,"div",9),pe(4,NG,13,6,"div",9),pe(5,FG,14,5,"div",10),pe(6,LG,13,6,"div",10),pe(7,UG,14,5,"div",11),pe(8,HG,13,6,"div",11),M()),2&t){const e=K();V(1),Y("ngIf",!e.isNoviceRaceToggled),V(1),Y("ngIf",e.isNoviceRaceToggled),V(1),Y("ngIf",e.intermediateTrackAvailable&&!e.isIntermediateRaceToggled),V(1),Y("ngIf",e.intermediateTrackAvailable&&e.isIntermediateRaceToggled),V(1),Y("ngIf",e.masterTrackAvailable&&!e.isMasterRaceToggled),V(1),Y("ngIf",e.masterTrackAvailable&&e.isMasterRaceToggled),V(1),Y("ngIf",e.legacyTrackAvailable&&!e.isLegacyRaceToggled),V(1),Y("ngIf",e.legacyTrackAvailable&&e.isLegacyRaceToggled)}}function zG(t,n){if(1&t){const e=tt();D(0,"div",29)(1,"div",30)(2,"h4",31),F(3,"Novice Rewards"),M(),D(4,"button",32),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",33)(7,"div",34),F(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),he(9,"br")(10,"br")(11,"div",35),M()(),D(12,"div",36)(13,"button",37),_e("click",function(){return me(e).$implicit.dismiss()}),F(14,"Close"),M()()()}if(2&t){const e=K();V(11),Y("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.novice),Si)}}function jG(t,n){if(1&t){const e=tt();D(0,"div",29)(1,"div",30)(2,"h4",31),F(3,"Intermediate Rewards"),M(),D(4,"button",32),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",33)(7,"div",34),F(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),he(9,"br")(10,"br")(11,"div",35),M()(),D(12,"div",36)(13,"button",37),_e("click",function(){return me(e).$implicit.dismiss()}),F(14,"Close"),M()()()}if(2&t){const e=K();V(11),Y("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.intermediate),Si)}}function qG(t,n){if(1&t){const e=tt();D(0,"div",29)(1,"div",30)(2,"h4",31),F(3,"Master Rewards"),M(),D(4,"button",32),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",33)(7,"div",34),F(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),he(9,"br")(10,"br")(11,"div",35),M()(),D(12,"div",36)(13,"button",37),_e("click",function(){return me(e).$implicit.dismiss()}),F(14,"Close"),M()()()}if(2&t){const e=K();V(11),Y("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.master),Si)}}function $G(t,n){if(1&t){const e=tt();D(0,"div",29)(1,"div",30)(2,"h4",31),F(3,"Legacy Rewards"),M(),D(4,"button",32),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",33)(7,"div",34),F(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),he(9,"br")(10,"br")(11,"div",35),M()(),D(12,"div",36)(13,"button",37),_e("click",function(){return me(e).$implicit.dismiss()}),F(14,"Close"),M()()()}if(2&t){const e=K();V(11),Y("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.legacy),Si)}}let WG=(()=>{class t{constructor(e,i,r,a,c){this.globalService=e,this.lookupService=i,this.sanitizer=r,this.modalService=a,this.componentCommunicationService=c,this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.legacyTrackAvailable=!1,this.raceSelected=new di,this.showRace=!1,this.isNoviceRaceToggled=!1,this.isIntermediateRaceToggled=!1,this.isMasterRaceToggled=!1,this.isLegacyRaceToggled=!1,this.trackRaceTypeEnum=Hn}ngOnInit(){this.noviceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Hn.novice),this.intermediateTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Hn.intermediate),this.masterTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Hn.master),this.legacyTrackRace=this.globalService.generateLegacyTrackRace(this.selectedAnimal,Hn.legacy),this.intermediateTrackAvailable=this.selectedAnimal.allTrainingTracks.intermediateTrackAvailable,this.masterTrackAvailable=this.selectedAnimal.allTrainingTracks.masterTrackAvailable,this.legacyTrackAvailable=this.selectedAnimal.allTrainingTracks.legacyTrackAvailable,this.isNoviceRaceToggled=this.globalService.globalVar.settings.get("noviceRaceToggled"),this.isIntermediateRaceToggled=this.globalService.globalVar.settings.get("intermediateRaceToggled"),this.isMasterRaceToggled=this.globalService.globalVar.settings.get("masterRaceToggled"),this.isLegacyRaceToggled=this.globalService.globalVar.settings.get("legacyRaceToggled"),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()}}selectTrackRace(e){if(this.lookupService.canAnimalRace(this.selectedAnimal)){var i=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=i&&(i.selectedAnimals=i.selectedAnimals.filter(r=>r.raceCourseType!==this.selectedAnimal.raceCourseType),i.selectedAnimals.push(this.selectedAnimal)),this.raceSelected.emit(e)}}getTrackRewardsPopover(e){var i="",r=this.lookupService.getTrackRaceRewards(e),a=.25,c=this.globalService.globalVar.modifiers.find(T=>"trainingTrackPaceModifier"===T.text);void 0!==c&&(a=c.value);for(var d=0;d<r.length;d++){var m=r[d],_=0;e===Hn.novice?_=this.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained:e===Hn.intermediate?_=this.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained:e===Hn.master?_=this.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained:e===Hn.legacy&&(_=this.selectedAnimal.allTrainingTracks.legacyTrack.rewardsObtained,a=1),i+=d<_?"<span class='crossed'>("+d*a*100+"% faster than average pace) "+m+"</span>\n":"<span>("+d*a*100+"% faster than average pace) "+m+"</span>\n"}return this.sanitizer.sanitize(vn.HTML,this.sanitizer.bypassSecurityTrustHtml(i))}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}toggleRace(e){var i=this.globalService.globalVar.settings.get(e);this.globalService.globalVar.settings.set(e,!i),"noviceRaceToggled"===e&&(this.isNoviceRaceToggled=!this.isNoviceRaceToggled),"intermediateRaceToggled"===e&&(this.isIntermediateRaceToggled=!this.isIntermediateRaceToggled),"masterRaceToggled"===e&&(this.isMasterRaceToggled=!this.isMasterRaceToggled),"legacyRaceToggled"===e&&(this.isLegacyRaceToggled=!this.isLegacyRaceToggled)}goToAnimal(){this.componentCommunicationService.setAnimalView(Mi.animals,this.selectedAnimal)}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(yn),Me(dl),Me(ss),Me(qr))},t.\u0275cmp=mi({type:t,selectors:[["app-training-track-race-view"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{raceSelected:"raceSelected"},decls:14,vars:3,consts:[[1,"trainingTrackView"],[1,"keyword","clickableText",3,"ngClass","click"],["class","trainingTracks",4,"ngIf"],["noviceRewardModal",""],["intermediateRewardModal",""],["masterRewardModal",""],["legacyRewardModal",""],[1,"trainingTracks"],["id","trainingTrack1",4,"ngIf"],["id","trainingTrack2",4,"ngIf"],["id","trainingTrack3",4,"ngIf"],["id","trainingTrack4",4,"ngIf"],["id","trainingTrack1"],[1,"noviceTrackRace"],[1,"minimizer"],[1,"minimizerSideSpacing"],[3,"click"],[1,"s4Heading"],[1,"clickableText","keyword",3,"click"],[3,"race","selectedAnimal","showStartText","click"],[1,"s4Heading","raceNameSpacing"],[1,"inlineDescription"],[3,"race","selectedAnimal","showStartText","condensedVersion","click"],["id","trainingTrack2"],[1,"intermediateTrackRace"],["id","trainingTrack3"],[1,"masterTrackRace"],["id","trainingTrack4"],[1,"legacyTrackRace"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,i){1&e&&(D(0,"div",0),F(1," Selected Animal: "),D(2,"span",1),_e("click",function(){return i.goToAnimal()}),F(3),M(),he(4,"hr"),pe(5,GG,9,8,"div",2),M(),pe(6,zG,15,1,"ng-template",null,3,ni),pe(8,jG,15,1,"ng-template",null,4,ni),pe(10,qG,15,1,"ng-template",null,5,ni),pe(12,$G,15,1,"ng-template",null,6,ni)),2&e&&(V(2),Y("ngClass",i.colorConditional),V(1),Kt(i.selectedAnimal.name),V(2),Y("ngIf",!i.showRace))},directives:[_r,on,b1],styles:[".trainingTrackView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}.minimizer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.minimizerSideSpacing[_ngcontent-%COMP%]{width:3rem}.inlineDescription[_ngcontent-%COMP%]{width:40%;margin-top:auto;margin-bottom:auto}.raceNameSpacing[_ngcontent-%COMP%]{width:20%}"]}),t})();const XG=["raceCanvas"];let YG=(()=>{class t{constructor(e,i,r,a,c){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.themeService=c,this.skipRace=!1,this.pauseRace=!1,this.lengthCompleted=0,this.frameModifier=60,this.mountainEndingY=0,this.icyPatchBackgroundLines=[],this.volcanoYOffset=0,this.volcanoRadiusXModifier=6,this.backgroundVolcanoYStart=0,this.currentRaceFrame=0,this.lastPathEndingX=0,this.lastPathEndingY=0,this.lastPreviousSeconds=0,this.totalRaceModeXDistance=0,this.totalRaceModeYDistance=0,this.deltaY=0,this.yOffscreen=0,this.overviewYOffsetModifier=1,this.visibleDistanceXLeft=0,this.visibleDistanceYTop=0,this.visibleDistanceXRight=0,this.visibleDistanceYBottom=0,this.mountainClimbPercent=.5,this.eventViewStartFrame=0,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,this.newSegment=!1}ngOnInit(){this.globalService.globalVar.userIsRacing=!0,this.skipSubscription=this.skip.subscribe(()=>{this.skipRace=!0,this.isRaceFinished=!0}),this.pauseSubscription=this.pause.subscribe(()=>{this.pauseRace=!this.pauseRace}),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.skipRace=!0,this.isRaceFinished=!0)}ngAfterViewInit(){this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix&&(this.eventViewStartFrame=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier)),this.totalLegs=this.race.raceLegs.length,this.setupCanvas(),this.canvasXDistanceScale=this.canvasWidth/this.race.length;var e=this.raceCanvas.nativeElement.getContext("2d");e.lineWidth=6;var i=0;this.mountainClimbPercent=this.utilityService.getRandomNumber(.3,.7),this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix&&(0===this.globalService.globalVar.eventRaceData.mountainClimbPercent?this.globalService.globalVar.eventRaceData.mountainClimbPercent=this.mountainClimbPercent:this.mountainClimbPercent=this.globalService.globalVar.eventRaceData.mountainClimbPercent);var r=this.race.raceUI.timeToCompleteByFrame[this.race.raceUI.timeToCompleteByFrame.length-1];this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{performance.now(),e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.lineWidth=6,this.pauseRace||(i+=a,this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount>this.lastEventSegment?(this.eventViewStartFrame=0,this.currentRaceFrame=0,this.race=this.globalService.globalVar.eventRaceData.currentRaceSegment,this.newSegment=!0):this.newSegment=!1,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount),this.currentRaceFrame+=1);var d=!1;this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix&&this.globalService.getRemainingEventRaceTime()>0&&(d=!0),(this.currentRaceFrame>=r*this.frameModifier||this.isRaceFinished||this.skipRace)&&!d?this.displayOverview(e,!0):this.displayRace(e,i),performance.now()})}setupCanvas(){this.raceCanvas.nativeElement.style.width="100%",this.raceCanvas.nativeElement.style.height="100%",this.raceCanvas.nativeElement.width=this.raceCanvas.nativeElement.offsetWidth,this.raceCanvas.nativeElement.height=this.raceCanvas.nativeElement.offsetHeight,this.canvasHeight=this.raceCanvas.nativeElement.height,this.canvasWidth=this.raceCanvas.nativeElement.width}displayOverview(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.lengthCompleted=0,this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=0,a=!0,m=0;if(this.race.raceLegs.forEach(ce=>{void 0!==ce.pathData&&0!==ce.pathData.length&&(m=0,ce.pathData.forEach(ne=>{if(ce.courseType===Ve.Flatland)e.lineCap="round",ne.routeDesign===Lt.Regular&&this.drawRegularFlatlandOverview(e,ne,1,1),ne.routeDesign===Lt.S&&this.drawSFlatlandOverview(e,ne,1,1),ne.routeDesign===Lt.Bumps&&this.drawBumpsFlatlandOverview(e,ne,1,1);else if(ce.courseType===Ve.Mountain){e.lineCap="round";var Ae=this.getCurrentAnimalRacingCourse(this.lengthCompleted)!==Ve.Mountain||r<ce.distance*this.mountainClimbPercent;ne.routeDesign===Lt.Regular&&this.drawRegularMountainOverview(e,ne,1,this.overviewYOffsetModifier,Ae),ne.routeDesign===Lt.Crevasse&&this.drawCrevasseMountainOverview(e,ne,1,this.overviewYOffsetModifier,Ae),ne.routeDesign===Lt.Gaps&&this.drawGapsMountainOverview(e,ne,1,this.overviewYOffsetModifier,Ae),r+=ne.length}else ce.courseType===Ve.Ocean&&(e.lineCap="round",ne.routeDesign===Lt.Regular&&this.drawRegularWaterOverview(e,ne,1,1,a),ne.routeDesign===Lt.Waves&&this.drawWavesWaterOverview(e,ne,1,1,a),ne.routeDesign===Lt.Dive&&this.drawDiveWaterOverview(e,ne,1,1,a),a=!a);ce.courseType===Ve.Tundra&&(e.lineCap="round",ne.routeDesign===Lt.Regular&&this.drawRegularTundraOverview(e,ne,1,1),ne.routeDesign===Lt.Cavern&&this.drawCavernTundraOverview(e,ne,1,1),ne.routeDesign===Lt.Hills&&this.drawHillsTundraOverview(e,ne,1,1)),ce.courseType===Ve.Volcanic&&(e.lineCap="round",this.backgroundVolcanoYStart=this.lastPathEndingY,(ne.routeDesign===Lt.Regular||ne.routeDesign===Lt.FirstRegular||ne.routeDesign===Lt.LastRegular)&&this.drawRegularVolcanoOverview(e,0,m,ne,ce.pathData.length,1,1),ne.routeDesign===Lt.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,m,ne,ce.pathData.length,1,1)),this.lengthCompleted+=ne.length,m+=1,this.lastPathEndingY<0&&(this.yOffscreen=this.lastPathEndingY)}))}),this.yOffscreen<0&&(this.overviewYOffsetModifier=this.overviewYOffsetModifier/1.25,this.yOffscreen=0),i){this.globalService.globalVar.userIsRacing=!1,e.globalCompositeOperation="source-atop";var T=this.race.raceUI.distanceCoveredByFrame[this.race.raceUI.distanceCoveredByFrame.length-1]/this.race.length,A=0,q=0,Q=!1;this.race.raceLegs.forEach(ce=>{if(!Q){var ne=(A+=ce.distance)/this.race.length;ne>T&&(ne=T,Q=!0);var Ae=(ne-q)*this.canvasWidth;e.fillStyle=this.getAnimalDistanceColorByType(ce.courseType),e.fillRect(q*this.canvasWidth,0,Ae,this.canvasHeight),q=ne}})}if(null!=this.race.drawnObjects&&this.race.drawnObjects.length>0){var te=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",this.race.drawnObjects.forEach(ce=>{(ce.objectType===zi.amberBrazier||ce.objectType===zi.rubyBrazier||ce.objectType===zi.topazBrazier||ce.objectType===zi.sapphireBrazier||ce.objectType===zi.amethystBrazier||ce.objectType===zi.emeraldBrazier)&&this.drawBrazier(!0,ce,Ve.Flatland,0,ce.xDistance,e,5,1,1,this.race.raceUI.distanceCoveredByFrame.length)}),e.globalCompositeOperation=te}if(this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(ce=>{"Hills"===ce[0]?this.drawHillsBackgroundTundraOverview(e,ce):this.drawIcyPatchBackgroundTundraOverview(e,ce)}),this.race.raceLegs.some(ce=>ce.courseType===Ve.Volcanic)){var be,oe=0,de=!1;this.race.raceLegs.forEach(ne=>{this.race.raceLegs.some(Ae=>Ae.courseType===Ve.Volcanic)&&(ne.courseType!==Ve.Volcanic&&!de&&(oe+=ne.distance),ne.courseType===Ve.Volcanic&&(de=!0))}),be=this.race.raceLegs.find(ne=>ne.courseType===Ve.Volcanic).distance,te=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,0,oe,oe+be,1,1),e.globalCompositeOperation=te}}}displayRace(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.lineCap="round",e.strokeStyle="gray",this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=10,a=10;this.totalRaceModeXDistance=this.race.length*r;var c=!1,d=0,m=[];this.race.raceLegs.forEach(Pt=>{m.push(Pt)});var _=!1;this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix?(_=!0,d=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier),m.push(this.globalService.globalVar.eventRaceData.nextRaceSegment.raceLegs[0])):d=this.currentRaceFrame;var T=this.race.raceUI.distanceCoveredByFrame[d],A=0;_&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment&&(m.unshift(this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0]),T+=m[0].distance),this.averageDistancePerSecond=this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/this.globalService.globalVar.eventRaceData.grandPrixTimeLength:this.race.length/this.race.raceUI.timeToCompleteByFrame[d];var q=0,Q=0,te=!1,oe=0;m.forEach(Pt=>{te||(T>=q&&T<q+Pt.distance&&(te=!0,this.currentLeg=Pt),te||(Q+=Pt.distance,oe+=1)),q+=Pt.distance});var de=T-Q,be=0;if(this.currentLeg.courseType===Ve.Mountain){var ce=this.currentLeg.distance*this.mountainClimbPercent,ne=0,Ae=!1,Ue=0;this.currentLeg.pathData.forEach(Pt=>{Ae||(ce>=Ue&&ce<Ue+Pt.length&&(Ae=!0,ne=Ue+Pt.length-ce),Ue+=Pt.length)}),Ae=!1;var bt=0,nt=0;this.currentLeg.pathData.forEach(Pt=>{if(!Ae){if(de>=bt&&de<bt+Pt.length&&(Ae=!0,nt=de-bt,Pt.routeDesign===Lt.Crevasse)){var ii=Pt.length/2*3,va=3*nt;be-=nt<Pt.length/2?va:ii-(va-ii)}bt+=Pt.length}});var pt=ce+ne;de<pt?(A=de+be,c=!0):(A=pt-(de-pt)+be,c=!1),this.mountainEndingY=A,this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix&&d===this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed-2&&(this.globalService.globalVar.eventRaceData.mountainEndingY=A)}if(this.race.raceLegs.some(Pt=>Pt.courseType===Ve.Mountain)||(this.mountainEndingY=0),A=this.mountainEndingY,this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix&&(A+=this.globalService.globalVar.eventRaceData.mountainEndingY,null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&this.currentLeg.courseType!==Ve.Mountain&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType!==Ve.Mountain&&(A=0)),this.currentLeg.courseType===Ve.Volcanic&&!this.pauseRace){var lt=this.currentLeg.pathData[0].length/r;if(de>lt){var kt=this.currentLeg.distance/this.volcanoRadiusXModifier,At=lt/this.currentLeg.distance,Rt=de/this.currentLeg.distance,Bt=(this.currentLeg.distance-2*lt)/this.currentLeg.distance/2;if(Rt>At&&Rt<1-At){var jt=100/(100-2*At),wi=-kt,yi=kt*Math.pow(1.05,-100*(Rt>.5?2*(Bt-((Rt-At)*jt-Bt)):(Rt-At)*jt*2))+wi;this.volcanoYOffset=yi}}}var Ze=T*this.canvasXDistanceScale*r-this.canvasWidth/2,fe=(A+=this.volcanoYOffset)*this.canvasXDistanceScale*a;if(this.visibleDistanceXLeft=Ze,this.visibleDistanceXRight=Ze+this.canvasWidth,this.setDrawnObjectGoingUpStatus(),e.globalCompositeOperation="source-over",(T>=this.race.length||d>this.race.raceUI.distanceCoveredByFrame.length)&&!_)return void(this.isRaceFinished=!0);var oi=0,fi=!0,Ki=0;m.forEach(Pt=>{void 0!==Pt.pathData&&0!==Pt.pathData.length&&(Ki=0,this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix&&(oi=0),Pt.pathData.forEach(ii=>{if(Pt.courseType===Ve.Flatland)ii.routeDesign===Lt.Regular&&this.drawRegularFlatlandOverview(e,ii,r,a,Ze,fe),ii.routeDesign===Lt.S&&this.drawSFlatlandOverview(e,ii,r,a,Ze,fe),ii.routeDesign===Lt.Bumps&&this.drawBumpsFlatlandOverview(e,ii,r,a,Ze,fe);else if(Pt.courseType===Ve.Mountain){var va=oi<Pt.distance*this.mountainClimbPercent;ii.routeDesign===Lt.Regular&&this.drawRegularMountainOverview(e,ii,r,a,va,Ze,fe),ii.routeDesign===Lt.Crevasse&&this.drawCrevasseMountainOverview(e,ii,r,a,va,Ze,fe),ii.routeDesign===Lt.Gaps&&this.drawGapsMountainOverview(e,ii,r,a,va,Ze,fe),oi+=ii.length,this.grandPrixMountainYReset(oe)}else Pt.courseType===Ve.Ocean&&(ii.routeDesign===Lt.Regular&&this.drawRegularWaterOverview(e,ii,r,a,fi,Ze,fe),ii.routeDesign===Lt.Waves&&this.drawWavesWaterOverview(e,ii,r,a,fi,Ze,fe),ii.routeDesign===Lt.Dive&&this.drawDiveWaterOverview(e,ii,r,a,fi,Ze,fe),fi=!fi);Pt.courseType===Ve.Tundra&&(ii.routeDesign===Lt.Regular&&this.drawRegularTundraOverview(e,ii,r,a,Ze,fe),ii.routeDesign===Lt.Cavern&&this.drawCavernTundraOverview(e,ii,r,a,Ze,fe),ii.routeDesign===Lt.Hills&&this.drawHillsTundraOverview(e,ii,r,a,Ze,fe)),Pt.courseType===Ve.Volcanic&&(this.backgroundVolcanoYStart=this.lastPathEndingY,(ii.routeDesign===Lt.Regular||ii.routeDesign===Lt.FirstRegular||ii.routeDesign===Lt.LastRegular)&&this.drawRegularVolcanoOverview(e,0,Ki,ii,Pt.pathData.length,r,a,Ze,fe),ii.routeDesign===Lt.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,Ki,ii,Pt.pathData.length,r,a,Ze,fe)),Ki+=1,this.lengthCompleted+=ii.length})),oe+=1}),e.globalCompositeOperation="source-atop";var ti=0,en=Q*this.canvasXDistanceScale*r,Nt=m.indexOf(this.currentLeg),Sn=null;Nt>0&&(Sn=m[Nt-1]),null!=Sn&&en>=this.visibleDistanceXLeft&&en<=this.visibleDistanceXRight?(ti=(en-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=this.getAnimalDistanceColorByType(Sn.courseType),e.fillRect(0,0,this.canvasWidth*ti,this.canvasHeight),e.fillStyle=this.getAnimalDistanceColorByType(this.currentLeg.courseType),e.fillRect(this.canvasWidth*ti,0,this.canvasWidth/2-this.canvasWidth*ti,this.canvasHeight)):(e.fillStyle=this.getAnimalDistanceColor(T,m),e.fillRect(0,0,this.canvasWidth/2,this.canvasHeight));var Rn=this.getAnimalRacerColor(T,m);if((this.race.raceUI.racerEffectByFrame[d]===bo.LostFocus||this.race.raceUI.racerEffectByFrame[d]===bo.LostStamina||this.race.raceUI.racerEffectByFrame[d]===bo.Stumble)&&(Rn=this.utilityService.shadeColor(Rn,-90)),this.race.raceUI.racerEffectByFrame[d]===bo.Burst&&(Rn=this.utilityService.shadeColor(Rn,90)),e.fillStyle=Rn,e.fillRect(this.canvasWidth/2-5,0,5,this.canvasHeight),null!=this.race.drawnObjects&&this.race.drawnObjects.length>0){var un=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",this.race.drawnObjects.forEach(Pt=>{(Pt.objectType===zi.amberBrazier||Pt.objectType===zi.rubyBrazier||Pt.objectType===zi.topazBrazier||Pt.objectType===zi.sapphireBrazier||Pt.objectType===zi.amethystBrazier||Pt.objectType===zi.emeraldBrazier)&&this.drawBrazier(!1,Pt,this.currentLeg.courseType,T,Pt.xDistance,e,r,r,a,d,Ze,fe,c)}),e.globalCompositeOperation=un}this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(Pt=>{"Hills"===Pt[0]?this.drawHillsBackgroundTundraOverview(e,Pt):this.drawIcyPatchBackgroundTundraOverview(e,Pt)}),e.globalCompositeOperation="source-atop";var Dn=this.averageDistancePerSecond/this.frameModifier*d;if(this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix){var hn=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();Dn+=this.averageDistancePerSecond*hn}if(this.drawRacer(e,Dn*this.canvasXDistanceScale*r,"black"),this.race.localRaceType!==Li.Track){if(this.lookupService.getResourceByName("Money Mark")>0){var pn=.75,Hi=this.globalService.globalVar.modifiers.find(Pt=>"moneyMarkPaceModifier"===Pt.text);null!=Hi&&(pn=Hi.value),this.drawRacer(e,this.race.length/(this.race.raceUI.timeToCompleteByFrame[d]*pn)/this.frameModifier*d*this.canvasXDistanceScale*r,"gold")}}else{var nn=11,gr=.25,Qn=this.globalService.globalVar.modifiers.find(Pt=>"trainingTrackPaceModifier"===Pt.text);void 0!==Qn&&(gr=Qn.value),this.race.trackRaceType===Hn.legacy&&(nn=3,gr=1);for(var Vn=0;Vn<nn;Vn++){var ia=this.race.length/(this.race.raceUI.timeToCompleteByFrame[d]/(1+gr*(Vn+1)))/this.frameModifier*d*this.canvasXDistanceScale*r,na=this.getTrackRacerColor(Vn);this.drawRacer(e,ia,na)}}if(this.drawBreakpoints(e,r,m),this.globalService.globalVar.settings.get("displayAverageDistancePace")&&this.drawCompetitorDistanceMarker(e,r,T,Dn),m.some(Pt=>Pt.courseType===Ve.Volcanic)){var yr,Na=0,Pr=!1;m.forEach(ii=>{m.some(va=>va.courseType===Ve.Volcanic)&&(ii.courseType!==Ve.Volcanic&&!Pr&&(Na+=ii.distance),ii.courseType===Ve.Volcanic&&(Pr=!0))}),yr=m.find(ii=>ii.courseType===Ve.Volcanic).distance,un=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,d,Na,Na+yr,r,a,Ze,fe),e.globalCompositeOperation=un}}}getAnimalDistanceColor(e,i){var r="",a=0;return null==i&&(i=this.race.raceLegs),i.forEach(c=>{e>=a&&e<a+c.distance&&(c.courseType===Ve.Flatland&&(r="#7d3f00"),c.courseType===Ve.Mountain&&(r="#1b630d"),c.courseType===Ve.Ocean&&(r="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),c.courseType===Ve.Tundra&&(r="#28809c"),c.courseType===Ve.Volcanic&&(r="#8f1a1a")),a+=c.distance}),r}getAnimalDistanceColorByType(e){var i="";return e===Ve.Flatland&&(i="#7d3f00"),e===Ve.Mountain&&(i="#1b630d"),e===Ve.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===Ve.Tundra&&(i="#28809c"),e===Ve.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e,i){var r="",a=0;return null==i&&(i=this.race.raceLegs),i.forEach(c=>{e>=a&&e<a+c.distance&&(c.courseType===Ve.Flatland&&("night"===this.themeService.getActiveThemeName()?r="#E18B07":(this.themeService.getActiveThemeName(),r="#c66900")),c.courseType===Ve.Mountain&&("night"===this.themeService.getActiveThemeName()?r="#30b001":(this.themeService.getActiveThemeName(),r="#279113")),c.courseType===Ve.Ocean&&("night"===this.themeService.getActiveThemeName()?r="#9289CF":(this.themeService.getActiveThemeName(),r="#0000FF")),c.courseType===Ve.Tundra&&("night"===this.themeService.getActiveThemeName()?r="#019DDE":(this.themeService.getActiveThemeName(),r="#1CA1C9")),c.courseType===Ve.Volcanic&&("night"===this.themeService.getActiveThemeName()?r="#E56C6E":(this.themeService.getActiveThemeName(),r="#D92525"))),a+=c.distance}),r}getTrackRacerColor(e){var i="";return 0===e&&(i="#cfc800"),1===e&&(i="#00cf68"),2===e&&(i="#cf00c5"),3===e&&(i="#cfb8e6"),4===e&&(i="#4a1d1d"),5===e&&(i="#1b5054"),6===e&&(i="#541b3c"),7===e&&(i="#aeb85a"),8===e&&(i="#ffffff"),9===e&&(i="#01253b"),10===e&&(i="#790dde"),i}getCurrentAnimalRacingCourse(e){var i;i=Ve.Flatland;var r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(i=a.courseType),r+=a.distance}),i}getNextAnimalRacingCourse(e){var i;i=Ve.Flatland;var r=this.race.raceLegs.indexOf(e);return this.race.raceLegs.length>r&&(i=this.race.raceLegs[r+1].courseType),i}drawRacer(e,i,r){var a=0;i>=this.visibleDistanceXLeft&&i<=this.visibleDistanceXRight&&(a=(i-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=r,e.fillRect(this.canvasWidth*a-5,0,5,this.canvasHeight))}drawBreakpoints(e,i,r){var a=0;null==r&&(r=this.race.raceLegs);for(var c=0;c<r.length;c++){var d=r[c],m=null;c<r.length-1&&(m=r[c+1]);var _=0,T=(a+d.distance)*this.canvasXDistanceScale*i;T>=this.visibleDistanceXLeft&&T<=this.visibleDistanceXRight&&(_=(T-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=null!==m?this.getAnimalDistanceColorByType(m.courseType):"pink",e.fillRect(this.canvasWidth*_-5,0,5,this.canvasHeight)),a+=d.distance}}drawCompetitorDistanceMarker(e,i,r,a){var c=a*this.canvasXDistanceScale*i;this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix&&(r+=this.globalService.globalVar.eventRaceData.distanceCovered),e.font="16px bold";var m=e.fillStyle,_=e.strokeStyle,T=e.globalCompositeOperation;e.fillStyle="#BAC2C2",e.strokeStyle="black",e.globalCompositeOperation="source-over",e.textAlign="center";var A=this.canvasWidth/10,q=this.canvasHeight/5,Q=this.canvasWidth/32;this.canvasWidth<600&&(e.font="12px bold",Q*=2),c<this.visibleDistanceXLeft?(e.beginPath(),e.arc(A,q,Q,3.3,3),e.moveTo(A-.9*Q,q+Q/4),e.lineTo(A-1.3*Q,q),e.lineTo(A-.9*Q,q-Q/4),e.stroke(),e.fill(),e.fillStyle="black",e.beginPath(),e.fillRect(A-2.5,q-17.5,5,5),e.fillText(this.utilityService.reduceToProperUnits(Math.round(r-a)),A,q+15)):c>this.visibleDistanceXRight&&(A=9*this.canvasWidth/10,e.beginPath(),e.arc(A,q,Q,.15,2*Math.PI-.15),e.moveTo(A+.9*Q,q-Q/4),e.lineTo(A+1.3*Q,q),e.lineTo(A+.9*Q,q+Q/4),e.stroke(),e.fill(),e.fillStyle="black",e.beginPath(),e.fillRect(A-2.5,q-17.5,5,5),e.fillText(this.utilityService.reduceToProperUnits(Math.round(a-r)),A,q+15)),e.fillStyle=m,e.globalCompositeOperation=T,e.strokeSTyle=_}drawRegularFlatlandOverview(e,i,r,a,c,d){var m=i.length/this.race.length*this.canvasWidth*r;null==c&&(c=0),null==d&&(d=0),e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+d),e.lineTo(this.lastPathEndingX+m-c,this.lastPathEndingY+d),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+m}drawSFlatlandOverview(e,i,r,a,c,d){var m=i.length/this.race.length*this.canvasWidth*r;null==c&&(c=0),null==d&&(d=0);var _=this.lastPathEndingX-c,T=this.lastPathEndingY+d,A=.04*m,q=.23*m,Q=1.2173*q,te=.04*m,oe=Q,de=te+q,be=Q,ce=de+q,ne=Q,Ae=ce,bt=ce,nt=Q,pt=bt+q,lt=Q,kt=pt+q,At=Q,Rt=kt;e.beginPath(),e.moveTo(_,T),e.lineTo(_+A,T),e.stroke(),e.beginPath(),e.moveTo(_+A,T),e.bezierCurveTo(_+A,T,_+te,T+oe,_+de,T+be),e.bezierCurveTo(_+de,T+be,_+ce,T+ne,_+Ae,T),e.stroke(),e.beginPath(),e.moveTo(_+Ae,T),e.bezierCurveTo(_+Ae,T,_+bt,T-nt,_+pt,T-lt),e.bezierCurveTo(_+pt,T-lt,_+kt,T-At,_+kt,T),e.stroke(),e.beginPath(),e.moveTo(_+kt,T),e.lineTo(_+Rt+A,T),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+Rt+A}drawBumpsFlatlandOverview(e,i,r,a,c,d){var m=i.length/this.race.length*this.canvasWidth*r;null==c&&(c=0),null==d&&(d=0);var _=this.lastPathEndingX-c,T=this.lastPathEndingY+d,A=.04*m,q=.115*m,Q=q/3;e.beginPath(),e.moveTo(_,T),e.lineTo(_+A,T),e.stroke(),e.beginPath(),e.moveTo(_+A,T),e.lineTo(_+A+q/2,T-Q),e.lineTo(_+A+q,T),e.stroke(),e.beginPath(),e.moveTo(_+A+q,T),e.lineTo(_+A+q+q/2,T-Q),e.lineTo(_+A+2*q,T),e.stroke(),e.beginPath(),e.moveTo(_+A+2*q,T),e.lineTo(_+A+2*q+q/2,T-Q),e.lineTo(_+A+3*q,T),e.stroke(),e.beginPath(),e.moveTo(_+A+3*q,T),e.lineTo(_+A+3*q+q/2,T-Q),e.lineTo(_+A+4*q,T),e.stroke(),e.beginPath(),e.moveTo(_+A+4*q,T),e.lineTo(_+A+4*q+q/2,T-Q),e.lineTo(_+A+5*q,T),e.stroke(),e.beginPath(),e.moveTo(_+A+5*q,T),e.lineTo(_+A+5*q+q/2,T-Q),e.lineTo(_+A+6*q,T),e.stroke(),e.beginPath(),e.moveTo(_+A+6*q,T),e.lineTo(_+A+6*q+q/2,T-Q),e.lineTo(_+A+7*q,T),e.stroke(),e.beginPath(),e.moveTo(_+A+7*q,T),e.lineTo(_+A+7*q+q/2,T-Q),e.lineTo(_+A+8*q,T),e.stroke(),e.beginPath(),e.moveTo(_+A+8*q,T),e.lineTo(_+A+8*q+A,T),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+m}drawRegularMountainOverview(e,i,r,a,c,d,m){var _=i.length/this.race.length*this.canvasWidth*r,T=i.length/this.race.length*this.canvasWidth*a;null==d&&(d=0),null==m&&(m=0),e.beginPath(),e.moveTo(this.lastPathEndingX-d,this.lastPathEndingY+m),e.lineTo(this.lastPathEndingX+_-d,c?this.lastPathEndingY-T+m:this.lastPathEndingY+T+m),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+_,this.lastPathEndingY=c?this.lastPathEndingY-T:this.lastPathEndingY+T}drawCrevasseMountainOverview(e,i,r,a,c,d,m){var _=i.length/this.race.length*this.canvasWidth*r,T=i.length/this.race.length*this.canvasWidth*a;null==d&&(d=0),null==m&&(m=0);var A=this.lastPathEndingX-d,q=this.lastPathEndingY+m,te=_,oe=T,de=2*oe;e.beginPath(),e.moveTo(this.lastPathEndingX-d,this.lastPathEndingY+m),c?(de=2*oe-(oe-0),e.lineTo(A+0,q-0),e.lineTo(A+0+te/2,q+de-0),e.lineTo(A+0+te,q-oe-0),e.lineTo(A+0+te,q-oe-0)):(e.lineTo(A+0,q+0),e.lineTo(A+0+te/2,q+de+0),e.lineTo(A+0+te,q+oe+0),e.lineTo(A+0+te,q+oe+0)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+_,this.lastPathEndingY=c?this.lastPathEndingY-T:this.lastPathEndingY+T}drawGapsMountainOverview(e,i,r,a,c,d,m){var _=i.length/this.race.length*this.canvasWidth*r,T=i.length/this.race.length*this.canvasWidth*a;null==d&&(d=0),null==m&&(m=0);var A=this.lastPathEndingX-d,q=this.lastPathEndingY+m,Q=.04*_,te=.115*_,oe=.115*T,de=.04*T;e.beginPath(),e.moveTo(A,q),c?(e.lineTo(A+Q,q-de),e.moveTo(A+te+Q,q-oe-de),e.lineTo(A+2*te+Q,q-2*oe-de),e.moveTo(A+3*te+Q,q-3*oe-de),e.lineTo(A+4*te+Q,q-4*oe-de),e.moveTo(A+5*te+Q,q-5*oe-de),e.lineTo(A+6*te+Q,q-6*oe-de),e.moveTo(A+7*te+Q,q-7*oe-de),e.lineTo(A+8*te+Q,q-8*oe-de),e.lineTo(A+8*te+2*Q,q-8*oe-2*de)):(e.lineTo(A+Q,q+de),e.moveTo(A+te+Q,q+oe+de),e.lineTo(A+2*te+Q,q+2*oe+de),e.moveTo(A+3*te+Q,q+3*oe+de),e.lineTo(A+4*te+Q,q+4*oe+de),e.moveTo(A+5*te+Q,q+5*oe+de),e.lineTo(A+6*te+Q,q+6*oe+de),e.moveTo(A+7*te+Q,q+7*oe+de),e.lineTo(A+8*te+Q,q+8*oe+de),e.lineTo(A+8*te+2*Q,q+8*oe+2*de)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+_,this.lastPathEndingY=c?this.lastPathEndingY-T:this.lastPathEndingY+T}drawRegularWaterOverview(e,i,r,a,c,d,m){var _=i.length/this.race.length*this.canvasWidth*r;null==d&&(d=0),null==m&&(m=0);var T=this.lastPathEndingX-d,A=this.lastPathEndingY+m,q=_/3,Q=_/6,te=T+q,oe=c?A+Q:A-Q,de=T+2*q,be=c?A+Q:A-Q,ce=T+3*q,ne=A;e.beginPath(),e.moveTo(T,A),e.bezierCurveTo(te,oe,de,be,ce,ne),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+_}drawWavesWaterOverview(e,i,r,a,c,d,m){var _=i.length/this.race.length*this.canvasWidth*r;null==d&&(d=0),null==m&&(m=0);var T=this.lastPathEndingX-d,A=this.lastPathEndingY+m,q=_/3,Q=_/3,te=T+q/3,oe=A,de=T+q/3,be=A-Q,ce=T+q,ne=A-.6*Q;e.beginPath(),e.moveTo(T,A),e.bezierCurveTo(te,oe,de,be,ce,ne),e.stroke();var Ae=ce-q/3,Ue=ne-Q/10,bt=ce-q/3,nt=ne+.6*Q,pt=ce,lt=A;e.beginPath(),e.moveTo(ce,ne),e.bezierCurveTo(Ae,Ue,bt,nt,pt,lt),e.stroke();var kt=pt+q/3,At=lt,Rt=pt+q/3,Bt=lt-Q,jt=pt+q,Ui=lt-.6*Q;e.beginPath(),e.moveTo(pt,lt),e.bezierCurveTo(kt,At,Rt,Bt,jt,Ui),e.stroke();var Ht=jt-q/3,ai=Ui-Q/10,wi=jt-q/3,yi=Ui+.6*Q,Ze=jt,fe=A;e.beginPath(),e.moveTo(jt,Ui),e.bezierCurveTo(Ht,ai,wi,yi,Ze,fe),e.stroke();var oi=Ze+q/3,fi=fe,Ai=Ze+q/3,Ki=fe-Q,ti=Ze+q,en=fe-.6*Q;e.beginPath(),e.moveTo(Ze,fe),e.bezierCurveTo(oi,fi,Ai,Ki,ti,en),e.stroke();var Nt=ti-q/3,Sn=en-Q/10,pr=ti-q/3,Bn=en+.6*Q,Rn=ti,un=A;e.beginPath(),e.moveTo(ti,en),e.bezierCurveTo(Nt,Sn,pr,Bn,Rn,un),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+_}drawDiveWaterOverview(e,i,r,a,c,d,m){var _=i.length/this.race.length*this.canvasWidth*r;null==d&&(d=0),null==m&&(m=0);var T=this.lastPathEndingX-d,A=this.lastPathEndingY+m,q=_/3,Q=_/2,te=T,oe=c?A+2*Q:A-2*Q,de=T+2*q,be=c?A+Q/4:A-Q/4,ce=T+3*q,ne=A;e.beginPath(),e.moveTo(T,A),e.bezierCurveTo(te,oe,de,be,ce,ne),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+_}drawRegularTundraOverview(e,i,r,a,c,d){var m=i.length/this.race.length*this.canvasWidth*r;null==c&&(c=0),null==d&&(d=0);var _=m/4,T=.97*_,A=i.driftAmount/80*T,q=(i.totalTundraYAmount-i.driftAmount)/80*T;e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+q+d),e.lineTo(this.lastPathEndingX+m-c,this.lastPathEndingY+q+A+d),e.stroke();var Q=[];Q.push("Regular"),Q.push([this.lastPathEndingX-c,this.lastPathEndingY+d]),Q.push([this.lastPathEndingX-c,this.lastPathEndingY+_+d]),Q.push([this.lastPathEndingX+m-c,this.lastPathEndingY+_+d]),Q.push([this.lastPathEndingX+m-c,this.lastPathEndingY-_+d]),Q.push([this.lastPathEndingX-c,this.lastPathEndingY-_+d]),this.icyPatchBackgroundLines.push(Q),this.lastPathEndingX=this.lastPathEndingX+m}drawCavernTundraOverview(e,i,r,a,c,d){var m=i.length/this.race.length*this.canvasWidth*r;null==c&&(c=0),null==d&&(d=0);var q=m/4*.97,Q=i.driftAmount/80*q,te=(i.totalTundraYAmount-i.driftAmount)/80*q;e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+te+d),e.lineTo(this.lastPathEndingX+m-c,this.lastPathEndingY+te+Q+d),e.stroke();var de=m/4*.75,be=[];be.push("Cavern"),be.push([this.lastPathEndingX-c,this.lastPathEndingY+d]),be.push([this.lastPathEndingX-c,this.lastPathEndingY+de+d]),be.push([this.lastPathEndingX+m-c,this.lastPathEndingY+de+d]),be.push([this.lastPathEndingX+m-c,this.lastPathEndingY-de+d]),be.push([this.lastPathEndingX-c,this.lastPathEndingY-de+d]),this.icyPatchBackgroundLines.push(be),this.lastPathEndingX=this.lastPathEndingX+m}drawHillsTundraOverview(e,i,r,a,c,d){var m=i.length/this.race.length*this.canvasWidth*r;null==c&&(c=0),null==d&&(d=0);var _=m/4,T=.97*_,A=i.driftAmount/80*T,q=(i.totalTundraYAmount-i.driftAmount)/80*T;e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+q+d),e.lineTo(this.lastPathEndingX+m-c,this.lastPathEndingY+q+A+d),e.stroke();var Q=[];Q.push("Hills"),Q.push([this.lastPathEndingX-c,this.lastPathEndingY+d]),Q.push([this.lastPathEndingX-c,this.lastPathEndingY+_+d]),Q.push([this.lastPathEndingX+m-c,this.lastPathEndingY+_+d]),Q.push([this.lastPathEndingX+m-c,this.lastPathEndingY-_+d]),Q.push([this.lastPathEndingX-c,this.lastPathEndingY-_+d]);var te=m/12,oe=m/4,de=_/2,be=_*(3/4),ce=_/4;Q.push([this.lastPathEndingX+oe-te/2-c,this.lastPathEndingY-de+ce/2+d]),Q.push([this.lastPathEndingX+oe-te/2-c,this.lastPathEndingY-de-ce+d,this.lastPathEndingX+oe+te/2-c,this.lastPathEndingY-de-ce+d,this.lastPathEndingX+oe+te/2-c,this.lastPathEndingY-de+ce/2+d]),Q.push([this.lastPathEndingX+oe-te/2-c,this.lastPathEndingY+de+ce/2+d]),Q.push([this.lastPathEndingX+oe-te/2-c,this.lastPathEndingY+de-ce+d,this.lastPathEndingX+oe+te/2-c,this.lastPathEndingY+de-ce+d,this.lastPathEndingX+oe+te/2-c,this.lastPathEndingY+de+ce/2+d]),Q.push([this.lastPathEndingX+2*oe-te/2-c,this.lastPathEndingY-be+ce/2+d]),Q.push([this.lastPathEndingX+2*oe-te/2-c,this.lastPathEndingY-be-ce+d,this.lastPathEndingX+2*oe+te/2-c,this.lastPathEndingY-be-ce+d,this.lastPathEndingX+2*oe+te/2-c,this.lastPathEndingY-be+ce/2+d]),Q.push([this.lastPathEndingX+2*oe-te/2-c,this.lastPathEndingY+be+ce/2+d]),Q.push([this.lastPathEndingX+2*oe-te/2-c,this.lastPathEndingY+be-ce+d,this.lastPathEndingX+2*oe+te/2-c,this.lastPathEndingY+be-ce+d,this.lastPathEndingX+2*oe+te/2-c,this.lastPathEndingY+be+ce/2+d]),Q.push([this.lastPathEndingX+3*oe-te/2-c,this.lastPathEndingY-de+ce/2+d]),Q.push([this.lastPathEndingX+3*oe-te/2-c,this.lastPathEndingY-de-ce+d,this.lastPathEndingX+3*oe+te/2-c,this.lastPathEndingY-de-ce+d,this.lastPathEndingX+3*oe+te/2-c,this.lastPathEndingY-de+ce/2+d]),Q.push([this.lastPathEndingX+3*oe-te/2-c,this.lastPathEndingY+de+ce/2+d]),Q.push([this.lastPathEndingX+3*oe-te/2-c,this.lastPathEndingY+de-ce+d,this.lastPathEndingX+3*oe+te/2-c,this.lastPathEndingY+de-ce+d,this.lastPathEndingX+3*oe+te/2-c,this.lastPathEndingY+de+ce/2+d]),this.icyPatchBackgroundLines.push(Q),this.lastPathEndingX=this.lastPathEndingX+m}drawIcyPatchBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r}drawHillsBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.strokeStyle="dimgray",e.globalCompositeOperation="source-atop",i.length>=17&&(e.beginPath(),e.moveTo(i[6][0],i[6][1]),e.bezierCurveTo(i[7][0],i[7][1],i[7][2],i[7][3],i[7][4],i[7][5]),e.stroke(),e.beginPath(),e.moveTo(i[8][0],i[8][1]),e.bezierCurveTo(i[9][0],i[9][1],i[9][2],i[9][3],i[9][4],i[9][5]),e.stroke(),e.beginPath(),e.moveTo(i[10][0],i[10][1]),e.bezierCurveTo(i[11][0],i[11][1],i[11][2],i[11][3],i[11][4],i[11][5]),e.stroke(),e.beginPath(),e.moveTo(i[12][0],i[12][1]),e.bezierCurveTo(i[13][0],i[13][1],i[13][2],i[13][3],i[13][4],i[13][5]),e.stroke(),e.beginPath(),e.moveTo(i[14][0],i[14][1]),e.bezierCurveTo(i[15][0],i[15][1],i[15][2],i[15][3],i[15][4],i[15][5]),e.stroke(),e.beginPath(),e.moveTo(i[16][0],i[16][1]),e.bezierCurveTo(i[17][0],i[17][1],i[17][2],i[17][3],i[17][4],i[17][5]),e.stroke()),e.globalCompositeOperation="destination-over",i.length>=17&&(e.beginPath(),e.moveTo(i[6][0],i[6][1]),e.bezierCurveTo(i[7][0],i[7][1],i[7][2],i[7][3],i[7][4],i[7][5]),e.stroke(),e.beginPath(),e.moveTo(i[8][0],i[8][1]),e.bezierCurveTo(i[9][0],i[9][1],i[9][2],i[9][3],i[9][4],i[9][5]),e.stroke(),e.beginPath(),e.moveTo(i[10][0],i[10][1]),e.bezierCurveTo(i[11][0],i[11][1],i[11][2],i[11][3],i[11][4],i[11][5]),e.stroke(),e.beginPath(),e.moveTo(i[12][0],i[12][1]),e.bezierCurveTo(i[13][0],i[13][1],i[13][2],i[13][3],i[13][4],i[13][5]),e.stroke(),e.beginPath(),e.moveTo(i[14][0],i[14][1]),e.bezierCurveTo(i[15][0],i[15][1],i[15][2],i[15][3],i[15][4],i[15][5]),e.stroke(),e.beginPath(),e.moveTo(i[16][0],i[16][1]),e.bezierCurveTo(i[17][0],i[17][1],i[17][2],i[17][3],i[17][4],i[17][5]),e.stroke()),e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r,e.strokeStyle="gray"}drawRegularVolcanoOverview(e,i,r,a,c,d,m,_,T){var A=a.length/this.race.length*this.canvasWidth*d;null==_&&(_=0),null==T&&(T=0);var be=this.lastPathEndingX-_-A*r+A*c/2,ce=this.lastPathEndingY+0+T,ne=A*c/this.volcanoRadiusXModifier,Ae=A*c/2-A/d,Ue=Math.PI/2,pt=180/c,lt=0;a.routeDesign===Lt.FirstRegular?(this.volcanoStartingAngle=lt=90,e.beginPath(),e.moveTo(this.lastPathEndingX-_,this.lastPathEndingY+0+T),e.lineTo(this.lastPathEndingX+A/d-_,this.lastPathEndingY+0+T),e.stroke()):a.routeDesign===Lt.LastRegular&&(e.beginPath(),e.moveTo(this.lastPathEndingX+(A-A/d)-_,this.lastPathEndingY+0+T),e.lineTo(this.lastPathEndingX+A-_,this.lastPathEndingY+0+T),e.stroke()),(lt=this.volcanoStartingAngle-pt)<0&&(lt=360-Math.abs(lt)),e.beginPath(),e.ellipse(be,ce,ne,Ae,Ue,this.volcanoStartingAngle*(Math.PI/180),lt*(Math.PI/180),!0),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+A,this.volcanoStartingAngle=lt}drawSteppingStonesVolcanoOverview(e,i,r,a,c,d,m,_,T){var A=a.length/this.race.length*this.canvasWidth*d;null==_&&(_=0),null==T&&(T=0);for(var be=this.lastPathEndingX-_-A*r+A*c/2,ce=this.lastPathEndingY+0+T,ne=A*c/this.volcanoRadiusXModifier,Ae=A*c/2-A/d,Ue=Math.PI/2,pt=180/c,Rt=0,lt=pt/20,kt=0;kt<10;kt++){var At=this.volcanoStartingAngle-lt*(2*kt);At<0&&(At=360-Math.abs(At)),(Rt=At-lt)<0&&(Rt=360-Math.abs(Rt)),e.beginPath(),e.ellipse(be,ce,ne,Ae,Ue,At*(Math.PI/180),Rt*(Math.PI/180),!0),e.stroke()}(Rt=this.volcanoStartingAngle-pt)<0&&(Rt=360-Math.abs(Rt)),this.lastPathEndingX=this.lastPathEndingX+A,this.volcanoStartingAngle=Rt}drawBackgroundVolcano(e,i,r,a,c,d,m,_){null==m&&(m=0),null==_&&(_=0);var T=.1*(a-r),A=(r+T)*this.canvasXDistanceScale*c-m,q=(a-T)*this.canvasXDistanceScale*c-m,Q=q-A,te=(a-r)*this.canvasXDistanceScale*c/this.volcanoRadiusXModifier,oe=this.canvasHeight*c,de=this.backgroundVolcanoYStart-.75*te+_,be=A+.15*Q,ce=oe-10*d,ne=A+.35*Q,Ae=de+20*d,Ue=A+.4*Q,bt=de,nt=q-.15*Q,pt=oe-10*d,lt=q-.35*Q,kt=de+20*d,At=q-.4*Q,Rt=de,Bt=e.fillStyle,jt=e.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);jt.addColorStop(0,"red"),jt.addColorStop(1,"orange"),e.fillStyle=jt;var Ui=Ue+(At-Ue)/3,Ht=de+te/4,ai=Ue+2*(At-Ue)/3,wi=de+te/4,fi=Ue-.075*Q,Ai=bt+te/2,Ki=At+.075*Q,ti=Rt+te/2,en=fi+1.7*(Ki-fi)/5,Nt=Ai+.5*te,Sn=fi+1.4*(Ki-fi)/5,pr=Ai+te/2,Bn=fi+2.5*(Ki-fi)/5,Rn=Ai,un=fi+3.6*(Ki-fi)/5,Dn=Ai+te,hn=fi+3.3*(Ki-fi)/5,dn=Ai-.25*te;e.beginPath(),e.moveTo(Ue,bt),e.bezierCurveTo(Ui,Ht,ai,wi,At,Rt),e.lineTo(Ki,ti),e.moveTo(Ki,ti),e.bezierCurveTo(un,Dn,hn,dn,Bn,Rn),e.bezierCurveTo(en,Nt,Sn,pr,fi,Ai),e.lineTo(Ue,bt),e.fill(),e.beginPath(),e.moveTo(A,oe),e.bezierCurveTo(be,ce,ne,Ae,Ue,bt),e.stroke(),e.beginPath(),e.moveTo(q,oe),e.bezierCurveTo(nt,pt,lt,kt,At,Rt),e.stroke();var Ar=e.lineWidth;e.lineWidth=2;var ci=.175,pn=A+Q*(ci+.025),Hi=oe-te/4,pi=A+Q*(ci+.2),Gn=de+te/3,tn=A+Q*(ci+.25),nn=de+te/4;e.beginPath(),e.moveTo(A+Q*ci,.95*oe),e.bezierCurveTo(pn,Hi,pi,Gn,tn,nn),e.stroke();var gr=A+Q*(.025+(ci=.35)),Qn=oe-te/4,Vn=A+Q*(ci+.075),On=de+te/2,Rr=A+Q*(ci+.1),Jn=de+te/3;e.beginPath(),e.moveTo(A+Q*ci,.95*oe),e.bezierCurveTo(gr,Qn,Vn,On,Rr,Jn),e.stroke();var ia=q-Q*(.025+(ci=.35)),na=oe-te/4,Na=q-Q*(ci+.075),Pr=de+te/2,yr=q-Q*(ci+.1),Pt=de+te/3;e.beginPath(),e.moveTo(q-Q*ci,.95*oe),e.bezierCurveTo(ia,na,Na,Pr,yr,Pt),e.stroke();var ii=q-Q*(.025+(ci=.175)),va=oe-te/4,yl=q-Q*(ci+.2),wo=de+te/3,Fa=q-Q*(ci+.25),Ho=de+te/4;if(e.beginPath(),e.moveTo(q-Q*ci,.95*oe),e.bezierCurveTo(ii,va,yl,wo,Fa,Ho),e.stroke(),e.lineWidth=Ar,void 0!==this.race.raceUI.lavaFallPercentByFrame[i]&&0!==this.race.raceUI.lavaFallPercentByFrame[i].length&&void 0!==this.race.raceUI.lavaFallPercentByFrame[i][0]){1===c&&(i=this.race.raceUI.lavaFallPercentByFrame.length-1);var La=this.race.raceUI.lavaFallPercentByFrame[i],ro=(a-r)*this.canvasXDistanceScale*c,ya=r*this.canvasXDistanceScale*c,Ds=ya+.4*ro-m+0,Ma=ya+.45*ro-m+0,Er=ya+.5*ro-m+0,wa=ya+.55*ro-m+0,Sa=ya+.6*ro-m+0,Nn=.01*(a-r)*this.canvasXDistanceScale*c,er=Nn/2,We=de+te/4,$e=this.backgroundVolcanoYStart+te+_,gn=($e-We)*La[0];e.beginPath(),e.ellipse(Ds,We+gn-er,Nn,er,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Ds-Nn,We,2*Nn,gn-(er-1));var kn=($e-We)*La[1];e.beginPath(),e.ellipse(Ma,We+kn-er,Nn,er,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Ma-Nn,We,2*Nn,kn-(er-1));var wr=($e-We)*La[2];e.beginPath(),e.ellipse(Er,We+wr-er,Nn,er,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Er-Nn,We,2*Nn,wr-(er-1));var ks=($e-We)*La[3];e.beginPath(),e.ellipse(wa,We+ks-er,Nn,er,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(wa-Nn,We,2*Nn,ks-(er-1));var Go=($e-We)*La[4];e.beginPath(),e.ellipse(Sa,We+Go-er,Nn,er,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Sa-Nn,We,2*Nn,Go-(er-1)),e.fillStyle=Bt}else e.fillStyle=Bt}drawBrazier(e,i,r,a,c,d,m,_,T,A,q,Q,te){var oe=.01*this.race.length*this.canvasXDistanceScale*m;null==q&&(q=0),null==Q&&(Q=0),null==te&&(te=!1);var de=c*this.canvasXDistanceScale*_-q,be=this.canvasHeight/2,ce=.166667*oe,ne=.333333*oe,Ae=.666667*oe;if(e)be=this.canvasHeight;else{var Ue,bt=!1,nt=0,pt=0,lt=0;if(this.race.raceLegs.forEach(Hr=>{bt||(i.xDistance>=nt&&i.xDistance<nt+Hr.distance&&(bt=!0,Ue=Hr),bt||(pt+=Hr.distance)),nt+=Hr.distance}),void 0===Ue)return;if(i.courseType===Ve.Flatland)be-=Ae;else if(i.courseType===Ve.Ocean)i.isGoingUp?be-=Ae:be+=2*Ae;else if(i.courseType===Ve.Tundra)be-=this.canvasHeight/15;else if(i.courseType===Ve.Mountain){i.isGoingUp?de-=this.canvasWidth/4:de+=this.canvasWidth/4;var kt=Ue.distance*this.mountainClimbPercent,Rt=!1,Bt=pt,Ht=0,ai=0;lt=0;var wi=!1,yi=0;this.currentLeg.pathData.forEach(Hr=>{wi||(kt>=yi&&kt<yi+Hr.length&&(wi=!0,lt=yi+Hr.length-kt),yi+=Hr.length)}),Ue.pathData.forEach(Hr=>{if(!Rt&&i.xDistance>=Bt&&i.xDistance<Bt+Hr.length&&(Rt=!0,ai=i.xDistance-pt,Hr.routeDesign===Lt.Crevasse)){var Zs=Hr.length/2*3,ls=3*ai;Ht-=ai<Hr.length/2?ls:Zs-(ls-Zs)}Bt+=Hr.length});var Ze=kt+lt;be=i.isGoingUp?this.canvasHeight-(be=(be=ai+Ht)*this.canvasXDistanceScale*T-Q)-this.canvasHeight/2:this.canvasHeight-(be=(be=Ze-(ai-Ze)+Ht)*this.canvasXDistanceScale*T-Q)-this.canvasHeight/2}else if(r===Ve.Volcanic){var oi=this.race.length/20/this.race.length*this.canvasWidth,fi=this.race.length/20/this.race.length*this.canvasWidth*_*20/2-oi,Ai=this.race.length/20/this.race.length*this.canvasWidth*_*20/this.volcanoRadiusXModifier,ti=a*this.canvasXDistanceScale*_-2*oi,en=this.canvasHeight/Ai,Nt=-Ai*Math.sqrt(1-Math.pow(i.xDistance*this.canvasXDistanceScale*_-2*oi-fi,2)/Math.pow(fi,2)),Sn=-Ai*Math.sqrt(1-Math.pow(ti-fi,2)/Math.pow(fi,2));be=this.canvasHeight-(Nt-Sn)*en}}d.fillStyle="brown",d.strokeStyle="black",d.lineWidth="2";var Bn=de,Rn=be-(dn=Ae/6);this.drawRoundedRectangle(d,Bn+(hn=oe/6+d.lineWidth/8),Rn,un=oe/6-d.lineWidth/2,dn,3),this.drawRoundedRectangle(d,Bn+2*hn,Rn,un,dn,3),this.drawRoundedRectangle(d,Bn+3*hn,Rn,un,dn,3),this.drawRoundedRectangle(d,Bn+4*hn,Rn,un,dn,3);var un,hn,dn,Dn=de,Ar=be-Ae-(dn=Ae/6);if(this.drawRoundedRectangle(d,Dn+(hn=oe/6+d.lineWidth/8),Ar,un=oe/6-d.lineWidth/2,dn,3),this.drawRoundedRectangle(d,Dn+2*hn,Ar,un,dn,3),this.drawRoundedRectangle(d,Dn+3*hn,Ar,un,dn,3),this.drawRoundedRectangle(d,Dn+4*hn,Ar,un,dn,3),d.strokeStyle="black",d.fillStyle="gray",d.beginPath(),d.moveTo(de+ce,be),d.lineTo(de+ce+ne,be),d.lineTo(de+ce+ne,be-Ae),d.lineTo(de+ce,be-Ae),d.lineTo(de+ce,be),d.stroke(),d.fill(),d.beginPath(),d.moveTo(de+ce+ne,be),d.lineTo(de+ce+2*ne,be),d.lineTo(de+ce+2*ne,be-Ae),d.lineTo(de+ce+ne,be-Ae),d.lineTo(de+ce+ne,be),d.stroke(),d.fill(),A>=i.changeOnFrame){var ci=.66667*oe/3,pn=de+.166*oe,Hi=1.5*Ae,pi=be-Ae-1.15*dn,Gn=ci/3;"night"===this.themeService.getActiveThemeName()&&(i.objectType===zi.amberBrazier&&(d.fillStyle="#F67612"),i.objectType===zi.sapphireBrazier&&(d.fillStyle="#799EFB"),i.objectType===zi.topazBrazier&&(d.fillStyle="#ffe600"),i.objectType===zi.amethystBrazier&&(d.fillStyle="#E65DD8"),i.objectType===zi.emeraldBrazier&&(d.fillStyle="#50C878"),i.objectType===zi.rubyBrazier&&(d.fillStyle="#f2021a")),"light"===this.themeService.getActiveThemeName()&&(i.objectType===zi.amberBrazier&&(d.fillStyle="#C25E0E"),i.objectType===zi.sapphireBrazier&&(d.fillStyle="#2554C7"),i.objectType===zi.topazBrazier&&(d.fillStyle="#ffe600"),i.objectType===zi.amethystBrazier&&(d.fillStyle="#7b2bcc"),i.objectType===zi.emeraldBrazier&&(d.fillStyle="#28643C"),i.objectType===zi.rubyBrazier&&(d.fillStyle="#9b111e"));var tn=.5*Hi,nn=Hi,gr=.5*Hi,Qn=pn+ci/2,Vn=pi-tn/8,On=pn+ci/2,Rr=pi-tn/2,Jn=pn+ci/1.75,ia=pi-tn/2;d.beginPath(),d.moveTo(pn,pi),d.bezierCurveTo(Qn,Vn,On,Rr,Jn,ia);var Pt=pn+ci,ii=pi;d.bezierCurveTo(pn+ci/1.75,pi-tn/8,pn+ci,pi,Pt+Gn,ii);var va=Pt+ci/2,yl=ii-nn/8,wo=Pt+ci/2,Fa=ii-nn/2,Ho=Pt+ci/1.75,_a=ii-nn/2;d.moveTo(Pt-Gn,ii),d.bezierCurveTo(va,yl,wo,Fa,Ho,_a);var Ma=Pt+ci,Er=ii;d.bezierCurveTo(Pt+ci/1.75,ii-nn/8,Pt+ci,ii,Ma+Gn,Er);var wa=Ma+ci/2,Sa=Er-gr/8,Nn=Ma+ci/2,er=Er-gr/2,We=Ma+ci/1.75,$e=Er-gr/2;d.moveTo(Ma-Gn,Er),d.bezierCurveTo(wa,Sa,Nn,er,We,$e);var Go=Ma+ci,xa=Er;d.bezierCurveTo(Ma+ci/1.75,Er-gr/8,Ma+ci,Er,Go,xa),d.moveTo(Go,xa),d.lineTo(de,pi),d.fill()}}grandPrixMountainYReset(e){this.race.raceType===xt.event&&this.race.eventRaceType===zt.grandPrix&&0===this.globalService.globalVar.eventRaceData.mountainEndingY&&null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType===Ve.Mountain&&1===e&&(this.lastPathEndingY=this.canvasHeight/2)}drawRoundedRectangle(e,i,r,a,c,d){var m=i+a,_=r+c;e.beginPath(),e.moveTo(i+d,r),e.lineTo(m-d,r),e.quadraticCurveTo(m,r,m,r+d),e.lineTo(m,r+c-d),e.quadraticCurveTo(m,_,m-d,_),e.lineTo(i+d,_),e.quadraticCurveTo(i,_,i,_-d),e.lineTo(i,r+d),e.quadraticCurveTo(i,r,i+d,r),e.stroke(),e.fill()}setDrawnObjectGoingUpStatus(){null==this.race.drawnObjects||0===this.race.drawnObjects.length||this.race.drawnObjects.forEach(e=>{var i,r=!1,a=0,c=0;if(this.race.raceLegs.forEach(Q=>{r||(e.xDistance>=a&&e.xDistance<a+Q.distance&&(r=!0,i=Q),r||(c+=Q.distance)),a+=Q.distance}),void 0!==i){var _=!1,T=c,q=0;i.pathData.forEach(Q=>{_||(e.xDistance>=T&&e.xDistance<T+Q.length&&(_=!0),_||(q+=1)),T+=Q.length}),e.courseType=i.courseType,i.courseType===Ve.Mountain&&(e.isGoingUp=(e.xDistance-c)/i.distance<this.mountainClimbPercent),i.courseType===Ve.Ocean&&(e.isGoingUp=q%2==0)}})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.skipSubscription.unsubscribe(),this.pauseSubscription.unsubscribe(),this.globalService.globalVar.userIsRacing=!1,this.race.raceType!==xt.event&&(this.race.raceUI.staminaPercentByFrame=[],this.race.raceUI.timeToCompleteByFrame=[],this.race.raceUI.yAdjustmentByFrame=[],this.race.raceUI.velocityByFrame=[],this.race.raceUI.distanceCoveredByFrame=[],this.race.raceUI.lavaFallPercentByFrame=[],this.race.raceUI.maxSpeedByFrame=[],this.race.raceUI.racerEffectByFrame=[])}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(jr),Me(Lr),Me(yn),Me(Xl))},t.\u0275cmp=mi({type:t,selectors:[["app-draw-race"]],viewQuery:function(e,i){if(1&e&&Ba(XG,5,xn),2&e){let r;mn(r=bn())&&(i.raceCanvas=r.first)}},inputs:{race:"race",skip:"skip",pause:"pause"},decls:3,vars:0,consts:[[1,"drawRaceDiv"],["id","raceCanvas",1,"raceCanvas"],["raceCanvas",""]],template:function(e,i){1&e&&(D(0,"div",0),he(1,"canvas",1,2),M())},styles:[".drawRaceDiv[_ngcontent-%COMP%]{height:100%}.raceCanvas[_ngcontent-%COMP%]{border:1px solid black}"]}),t})();const KG=["circuitRewardModal"];function ZG(t,n){if(1&t){const e=tt();D(0,"button",6),_e("click",function(){return me(e),K(2).skipRaceAnimation()}),F(1,"Skip"),M()}}function QG(t,n){1&t&&(D(0,"span"),F(1,"BURST!"),M())}function JG(t,n){if(1&t){const e=tt();D(0,"button",6),_e("click",function(){return me(e),K(2).pauseRaceAnimation()}),F(1,"Pause"),M()}}function ez(t,n){if(1&t&&(D(0,"div",8)(1,"div",9)(2,"div"),pe(3,ZG,2,0,"button",10),M(),D(4,"div")(5,"span",11),F(6,"Vel:"),M(),D(7,"span",12),F(8,"Velocity:"),M(),F(9),pe(10,QG,2,0,"span",3),M(),D(11,"div")(12,"span",11),F(13,"Stam:"),M(),D(14,"span",12),F(15,"Stamina:"),M(),F(16),M(),D(17,"div")(18,"span",11),F(19,"Pos:"),M(),D(20,"span",12),F(21,"Position:"),M(),F(22),M(),D(23,"div"),pe(24,JG,2,0,"button",10),M()(),D(25,"div",13)(26,"div",14),he(27,"app-draw-race",15),M(),he(28,"div",16,17),M()()),2&t){const e=Qt(29),i=K();V(3),Y("ngIf",!i.grandPrixRace),V(6),Mn(" ",i.velocityAtCurrentFrame," / ",i.maxSpeedAtCurrentFrame,"m/s "),V(1),Y("ngIf",i.racerEffectAtCurrentFrame===i.burstEffect),V(6),He(" ",i.staminaAtCurrentFrame,"%"),V(6),Mn(" ",i.positionAtCurrentFrame," / ",i.totalRacers,""),V(2),Y("ngIf",!i.grandPrixRace),V(3),Y("race",i.selectedRace)("skip",i.skipRace.asObservable())("pause",i.pauseRace.asObservable()),V(1),Y("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),Si)}}function tz(t,n){if(1&t){const e=tt();D(0,"button",6),_e("click",function(){return me(e),K(2).skipRaceAnimation()}),F(1,"Skip"),M()}}function iz(t,n){if(1&t){const e=tt();D(0,"button",6),_e("click",function(){return me(e),K(2).pauseRaceAnimation()}),F(1,"Pause"),M()}}function nz(t,n){if(1&t&&(D(0,"div",18)(1,"div",19)(2,"div"),pe(3,tz,2,0,"button",10),M(),D(4,"div"),pe(5,iz,2,0,"button",10),M()(),he(6,"div",20,17),M()),2&t){const e=Qt(7),i=K();V(3),Y("ngIf",!i.grandPrixRace),V(2),Y("ngIf",!i.grandPrixRace),V(1),Y("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),Si)}}function rz(t,n){if(1&t){const e=tt();D(0,"button",6),_e("click",function(){return me(e),K(2).skipRaceAnimation()}),F(1,"Skip"),M()}}function az(t,n){1&t&&(D(0,"span"),F(1,"BURST!"),M())}function oz(t,n){if(1&t){const e=tt();D(0,"button",6),_e("click",function(){return me(e),K(2).pauseRaceAnimation()}),F(1,"Pause"),M()}}function sz(t,n){if(1&t&&(D(0,"div",18)(1,"div",19)(2,"div"),pe(3,rz,2,0,"button",10),M(),D(4,"div")(5,"span",11),F(6,"Vel:"),M(),D(7,"span",12),F(8,"Velocity:"),M(),F(9),pe(10,az,2,0,"span",3),M(),D(11,"div")(12,"span",11),F(13,"Stam:"),M(),D(14,"span",12),F(15,"Stamina:"),M(),F(16),M(),D(17,"div")(18,"span",11),F(19,"Pos:"),M(),D(20,"span",12),F(21,"Position:"),M(),F(22),M(),D(23,"div"),pe(24,oz,2,0,"button",10),M()(),D(25,"div",21),he(26,"app-draw-race",15)(27,"br"),M()()),2&t){const e=K();V(3),Y("ngIf",!e.grandPrixRace),V(6),Mn(" ",e.velocityAtCurrentFrame," / ",e.maxSpeedAtCurrentFrame,"m/s "),V(1),Y("ngIf",e.racerEffectAtCurrentFrame===e.burstEffect),V(6),He(" ",e.staminaAtCurrentFrame,"%"),V(6),Mn(" ",e.positionAtCurrentFrame," / ",e.totalRacers,""),V(2),Y("ngIf",!e.grandPrixRace),V(2),Y("race",e.selectedRace)("skip",e.skipRace.asObservable())("pause",e.pauseRace.asObservable())}}function lz(t,n){1&t&&he(0,"br")}function cz(t,n){if(1&t&&(D(0,"div",28),F(1),M()),2&t){const e=K().$implicit,i=K(3);V(1),He(" ",i.lookupService.getResourcePopover(e.name,e.shopItemTypeEnum)," ")}}function uz(t,n){if(1&t&&(D(0,"td")(1,"span",26),F(2),M(),F(3),pe(4,cz,2,1,"ng-template",null,27,ni),M()),2&t){const e=n.$implicit,i=Qt(5);V(1),Y("ngbPopover",i),V(1),Kt(e.name),V(1),He(": ",e.amount," ")}}function dz(t,n){if(1&t&&(D(0,"tr"),pe(1,uz,6,3,"td",25),M()),2&t){const e=n.$implicit;V(1),Y("ngForOf",e)}}function fz(t,n){if(1&t&&(D(0,"div",22)(1,"span",23),F(2,"Rewards"),M(),D(3,"div",24)(4,"table"),pe(5,dz,2,1,"tr",25),M()()()),2&t){const e=K();V(5),Y("ngForOf",e.rewardRows)}}function hz(t,n){if(1&t){const e=tt();D(0,"div",29)(1,"div",30)(2,"h4",31),F(3,"Circuit Rank Reward!"),M(),D(4,"button",32),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",33)(7,"div",34),F(8," After ranking up, you receive: "),he(9,"br"),D(10,"div",23),F(11),M()(),he(12,"br")(13,"br")(14,"div",35),M(),D(15,"div",36)(16,"button",37),_e("click",function(){return me(e).$implicit.dismiss()}),F(17,"Continue"),M()()()}if(2&t){const e=K();V(11),Kt(e.selectedRace.circuitIncreaseReward[0]),V(3),Y("innerHTML",e.selectedRace.circuitIncreaseReward[1],Si)}}let Ox=(()=>{class t{constructor(e,i,r,a,c,d,m,_){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.initializeService=c,this.modalService=d,this.sanitizer=m,this.raceLogicService=_,this.incrementalRaceUpdates="",this.raceFinished=new di,this.skipRace=new $,this.pauseRace=new $,this.raceSkipped=!1,this.racePaused=!1,this.frameModifier=60,this.displayVisualRace=!0,this.displayTextUpdates=!0,this.burstEffect=bo.Burst,this.grandPrixRace=!1}keyEvent(e){(e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.goToRaceSelection()}ngOnInit(){var e=this,i=this.globalService.globalVar.settings.get("raceDisplayInfo");i===No.draw?(this.displayVisualRace=!0,this.displayTextUpdates=!1):i===No.text?(this.displayVisualRace=!1,this.displayTextUpdates=!0):i===No.both&&(this.displayVisualRace=!0,this.displayTextUpdates=!0),this.selectedRace.raceType===xt.event&&this.selectedRace.eventRaceType===zt.grandPrix&&(this.grandPrixRace=!0);var r=new g0;r=this.grandPrixRace?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult:this.raceLogicService.runRace(this.selectedRace),this.setupDisplayRewards(this.selectedRace),this.displayRaceUpdates(r),this.getFrameByFrameStats(),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.raceSkipped=!0),this.grandPrixRace&&(this.eventRaceSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Wa(function*(){e.globalService.getTimeToEventRace()>0&&0===e.globalService.globalVar.eventRaceData.bonusTime&&e.raceFinished.emit(!0),e.globalService.globalVar.eventRaceData.isRunning||e.raceFinished.emit(!0)})))}ngOnDestroy(){null!=this.frameByFrameSubscription&&this.frameByFrameSubscription.unsubscribe(),null!=this.updateSubscription&&this.updateSubscription.unsubscribe(),null!=this.eventRaceSubscription&&this.eventRaceSubscription.unsubscribe(),this.raceFinished.emit(!0)}displayRaceUpdates(e){var i=this,r=e.raceUpdates;this.incrementalRaceUpdates="";var c=0,m=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,_=this.updateSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var T=Wa(function*(A){if(i.racePaused||(i.selectedRace.raceType===xt.event&&i.selectedRace.eventRaceType===zt.grandPrix&&(i.globalService.globalVar.eventRaceData.currentRaceSegmentCount>m&&(c=0,i.selectedRace=i.globalService.globalVar.eventRaceData.currentRaceSegment,r=i.globalService.globalVar.eventRaceData.currentRaceSegmentResult.raceUpdates),m=i.globalService.globalVar.eventRaceData.currentRaceSegmentCount),c+=1),(i.selectedRace.raceType!==xt.event||i.selectedRace.eventRaceType!==zt.grandPrix)&&(0===r.length||i.raceSkipped))return i.raceSkipped&&r.forEach(q=>{i.incrementalRaceUpdates+=i.sanitizer.sanitize(vn.HTML,i.sanitizer.bypassSecurityTrustHtml(q.text+"\n"))}),e.wasSuccessful&&(i.displayResults=!0,null!=i.selectedRace.circuitIncreaseReward&&""!==i.selectedRace.circuitIncreaseReward[0]&&i.modalService.open(i.circuitRewardModal,{ariaLabelledBy:"modal-basic-title",size:"lg"})),void _.unsubscribe();i.selectedRace.raceType===xt.event&&i.selectedRace.eventRaceType===zt.grandPrix?i.globalService.globalVar.eventRaceData.segmentTimeCounter*i.frameModifier>=r[0].value&&(i.incrementalRaceUpdates+=i.sanitizer.sanitize(vn.HTML,i.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift()):c>=r[0].value&&(i.incrementalRaceUpdates+=i.sanitizer.sanitize(vn.HTML,i.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift())});return function(A){return T.apply(this,arguments)}}())}setupDisplayRewards(e){this.rewardCells=[],this.rewardRows=[];var i=4;if(window.matchMedia("only screen and (max-width: 760px)").matches&&(i=2),null!=e.rewards){for(var r=1;r<=e.rewards.length;r++)this.rewardCells.push({name:e.rewards[r-1].name,amount:e.rewards[r-1].amount}),r%i==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}goToRaceSelection(){this.raceFinished.emit(!0)}skipRaceAnimation(){this.raceSkipped=!0,this.skipRace.next(!0)}pauseRaceAnimation(){this.racePaused=!this.racePaused,this.pauseRace.next(!0)}getFrameByFrameStats(){var e=this;this.totalRacers=this.lookupService.getTotalRacersByRace(this.selectedRace);var r=0,c=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount;this.frameByFrameSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var d=Wa(function*(m){e.racePaused||(e.selectedRace.raceType===xt.event&&e.selectedRace.eventRaceType===zt.grandPrix&&(e.globalService.globalVar.eventRaceData.currentRaceSegmentCount>c&&(e.selectedRace=e.globalService.globalVar.eventRaceData.currentRaceSegment),c=e.globalService.globalVar.eventRaceData.currentRaceSegmentCount),r+=1);var _;_=e.selectedRace.raceType===xt.event&&e.selectedRace.eventRaceType===zt.grandPrix?Math.round(e.globalService.globalVar.eventRaceData.segmentTimeCounter*e.frameModifier):r;try{if(e.selectedRace.raceUI.velocityByFrame.length<=_||(e.selectedRace.raceType!==xt.event||e.selectedRace.eventRaceType!==zt.grandPrix)&&e.raceSkipped){var T=e.selectedRace.raceUI.velocityByFrame.length-1;e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[T]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[T]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[T].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[T],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[T])}else e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[_]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[_]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[_].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[_],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[_])}catch(A){console.log("error")}});return function(m){return d.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(jr),Me(Lr),Me(yn),Me(Fm),Me(ss),Me(dl),Me(w0))},t.\u0275cmp=mi({type:t,selectors:[["app-race"]],viewQuery:function(e,i){if(1&e&&Ba(KG,7),2&e){let r;mn(r=bn())&&(i.circuitRewardModal=r.first)}},hostBindings:function(e,i){1&e&&_e("keyup",function(a){return i.keyEvent(a)},!1,Do)},inputs:{selectedRace:"selectedRace"},outputs:{raceFinished:"raceFinished"},decls:11,vars:5,consts:[["id","raceInfo"],["class","bothDisplayValues",4,"ngIf"],["class","oneDisplayValue",4,"ngIf"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"back"],[3,"click"],["circuitRewardModal",""],[1,"bothDisplayValues"],[1,"headerInfo"],[3,"click",4,"ngIf"],[1,"mobileVersion"],[1,"webVersion"],[1,"updates"],[1,"drawRaces"],[3,"race","skip","pause"],[1,"raceUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],[1,"oneDisplayValue"],[1,"individualItemHeaderInfo"],[1,"raceUpdates","onlyText",3,"scrollTop","innerHTML"],[1,"drawRace","onlyDraw"],[1,"results"],[1,"s4Heading"],[1,"rewards"],[4,"ngFor","ngForOf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],["popContent",""],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,i){1&e&&(D(0,"div",0),pe(1,ez,30,13,"div",1),pe(2,nz,8,4,"div",2),pe(3,sz,28,11,"div",2),pe(4,lz,1,0,"br",3),pe(5,fz,6,1,"div",4),D(6,"div",5)(7,"button",6),_e("click",function(){return i.goToRaceSelection()}),F(8,"Back"),M()()(),pe(9,hz,18,2,"ng-template",null,7,ni)),2&e&&(V(1),Y("ngIf",i.displayVisualRace&&i.displayTextUpdates),V(1),Y("ngIf",!i.displayVisualRace&&i.displayTextUpdates),V(1),Y("ngIf",i.displayVisualRace&&!i.displayTextUpdates),V(1),Y("ngIf",i.displayVisualRace&&!i.displayTextUpdates),V(1),Y("ngIf",i.displayResults))},directives:[on,YG,Vr,no],styles:['#raceInfo[_ngcontent-%COMP%]{height:100%;margin-left:.5rem;margin-right:.5rem;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre;overflow-x:hidden}.headerInfo[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between}.individualItemHeaderInfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bothDisplayValues[_ngcontent-%COMP%], .oneDisplayValue[_ngcontent-%COMP%]{height:76.5%}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawRace raceUpdates"}.raceUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:raceUpdates}.drawRaces[_ngcontent-%COMP%]{grid-area:drawRace}.onlyText[_ngcontent-%COMP%], .onlyDraw[_ngcontent-%COMP%]{text-align:center;height:100%}.rightAlign[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:left}td[_ngcontent-%COMP%]{width:16.666%}.mobileVersion[_ngcontent-%COMP%]{display:none}.webVersion[_ngcontent-%COMP%]{display:inline-block}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;padding:1rem}.results[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawRace" "raceUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.raceUpdates[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:inline-block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();function pz(t,n){if(1&t){const e=tt();D(0,"div",9)(1,"button",10),_e("click",function(){return me(e),K(2).returnToAnimalView()}),F(2,"Back"),M()()}}function gz(t,n){if(1&t){const e=tt();D(0,"div",11)(1,"div")(2,"app-animal-list",12),_e("selectedAnimal",function(r){return me(e),K(2).selectedAnimal(r)}),M()()()}if(2&t){const e=K(2);V(2),Y("availableAnimals",e.availableAnimals)("isTrainingTrackView",!0)}}function vz(t,n){if(1&t){const e=tt();D(0,"div",13)(1,"app-training-track-race-view",14),_e("raceSelected",function(r){return me(e),K(2).raceSelected(r)})("returnEmitter",function(){return me(e),K(2).returnToAnimalView()}),M()()}if(2&t){const e=K(2);V(1),Y("selectedAnimal",e.animal)}}function mz(t,n){if(1&t&&(D(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),F(4,"Training Track"),M(),D(5,"div",5),F(6," Each animal can run their own training track to gain rewards and unique bonuses. To get each reward, you will have to beat each track at a progressively faster pace. "),M()(),pe(7,pz,3,0,"div",6),M(),he(8,"hr"),pe(9,gz,3,2,"div",7),pe(10,vz,2,1,"div",8),M()),2&t){const e=K();V(7),Y("ngIf",e.animalSelected),V(2),Y("ngIf",!e.animalSelected),V(1),Y("ngIf",e.animalSelected)}}function bz(t,n){if(1&t){const e=tt();D(0,"div",15)(1,"app-race",16),_e("raceFinished",function(){return me(e),K().raceFinished()}),M()()}if(2&t){const e=K();V(1),Y("selectedRace",e.selectedRace)}}const _z=function(t){return{fullHeight:t}};let Vx=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.animalSelected=!1,this.raceSelectedEmitter=new di}keyEvent(e){this.animalSelected&&!this.showRace&&(e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.returnToAnimalView()}ngOnInit(){this.availableAnimals=this.globalService.globalVar.animals.filter(i=>i.isAvailable);var e=this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck);null!=e&&(this.existingPrimaryDeckAnimals=[],e.selectedAnimals.forEach(i=>{this.existingPrimaryDeckAnimals.push(i)}))}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(){this.animalSelected=!1}raceSelected(e){this.selectedRace=e,this.showRace=!0,this.raceSelectedEmitter.emit(!0)}ngOnDestroy(){this.raceSelectedEmitter.emit(!1)}raceFinished(){this.showRace=!1,this.raceSelectedEmitter.emit(!1);var e=this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck);null!=e&&(e.selectedAnimals=this.existingPrimaryDeckAnimals)}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(qr))},t.\u0275cmp=mi({type:t,selectors:[["app-training-track-view"]],hostBindings:function(e,i){1&e&&_e("keyup",function(a){return i.keyEvent(a)},!1,Do)},outputs:{raceSelectedEmitter:"raceSelectedEmitter"},decls:3,vars:5,consts:[[1,"trainingTrackView",3,"ngClass"],[4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"infoGridContainer"],[1,"info"],[1,"description"],["class","back",4,"ngIf"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"back"],[3,"click"],[1,"selectAnimalView"],[3,"availableAnimals","isTrainingTrackView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","raceSelected","returnEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,i){1&e&&(D(0,"div",0),pe(1,mz,11,3,"div",1),pe(2,bz,2,1,"div",2),M()),2&e&&(Y("ngClass",hi(3,_z,i.showRace)),V(1),Y("ngIf",!i.showRace),V(1),Y("ngIf",i.showRace))},directives:[_r,on,V0,WG,Ox],styles:['.trainingTrackView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.fullHeight[_ngcontent-%COMP%]{height:100%}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}']}),t})();function yz(t,n){1&t&&(D(0,"span",13),F(1,"!"),M())}function wz(t,n){1&t&&(D(0,"span",13),F(1,"!"),M())}function Sz(t,n){if(1&t){const e=tt();D(0,"div",6)(1,"div",7)(2,"button",8),_e("click",function(){me(e);const r=K(2);return r.changeDisplayRaceView(r.raceTypeEnum.circuit)}),F(3,"Circuit Races"),M(),D(4,"button",9),_e("click",function(){me(e);const r=K(2);return r.changeDisplayRaceView(r.raceTypeEnum.special)}),pe(5,yz,2,0,"span",10),F(6,"Special Races"),M(),D(7,"button",11),_e("click",function(){me(e);const r=K(2);return r.changeDisplayRaceView(r.raceTypeEnum.event)}),pe(8,wz,2,0,"span",10),F(9,"Event Races"),M(),D(10,"button",12),_e("click",function(){me(e);const r=K(2);return r.changeDisplayRaceView(r.raceTypeEnum.trainingTrack)}),F(11,"Training Track"),M()(),he(12,"hr"),M()}if(2&t){const e=K(2);V(2),Y("ngClass",e.displayRaceView===e.raceTypeEnum.circuit?"filterActive":""),V(2),Y("ngClass",e.displayRaceView===e.raceTypeEnum.special?"filterActive":""),V(1),Y("ngIf",e.newSpecialRaceAvailable),V(2),Y("ngClass",e.displayRaceView===e.raceTypeEnum.event?"filterActive":""),V(1),Y("ngIf",e.eventRaceNowAvailable),V(2),Y("ngClass",e.displayRaceView===e.raceTypeEnum.trainingTrack?"filterActive":"")}}function Cz(t,n){if(1&t){const e=tt();D(0,"app-circuit-view",14),_e("raceSelected",function(r){return me(e),K(2).raceSelected(r)}),M()}}function Tz(t,n){if(1&t){const e=tt();D(0,"app-local-view",14),_e("raceSelected",function(r){return me(e),K(2).raceSelected(r)}),M()}}function Mz(t,n){if(1&t){const e=tt();D(0,"app-event-view",14),_e("raceSelected",function(r){return me(e),K(2).raceSelected(r)}),M()}}function xz(t,n){if(1&t){const e=tt();D(0,"app-training-track-view",15),_e("raceSelectedEmitter",function(r){return me(e),K(2).trainingTrackRaceSelected(r)}),M()}}function Rz(t,n){if(1&t&&(D(0,"div",2),pe(1,Sz,13,6,"div",3),pe(2,Cz,1,0,"app-circuit-view",4),pe(3,Tz,1,0,"app-local-view",4),pe(4,Mz,1,0,"app-event-view",4),pe(5,xz,1,0,"app-training-track-view",5),M()),2&t){const e=K();V(1),Y("ngIf",!e.trainingTrackRace),V(1),Y("ngIf",e.displayRaceView===e.raceTypeEnum.circuit),V(1),Y("ngIf",e.displayRaceView===e.raceTypeEnum.special),V(1),Y("ngIf",e.displayRaceView===e.raceTypeEnum.event),V(1),Y("ngIf",e.displayRaceView===e.raceTypeEnum.trainingTrack)}}function Dz(t,n){if(1&t){const e=tt();D(0,"div",16)(1,"app-race",17),_e("raceFinished",function(){return me(e),K().raceFinished()}),M()()}if(2&t){const e=K();V(1),Y("selectedRace",e.selectedRace)}}let kz=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.componentCommunicationService=i,this.gameLoopService=r,this.lookupService=a,this.displayRaceView=xt.circuit,this.showRace=!1,this.trainingTrackRace=!1,this.raceTypeEnum=xt,this.newSpecialRaceAvailable=!1,this.eventRaceNowAvailable=!1}ngOnInit(){var e=this;this.componentCommunicationService.setNewView(Mi.raceselection),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var i=Wa(function*(r){e.newSpecialRaceAvailable=e.globalService.globalVar.notifications.isNewSpecialRaceAvailable&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>6),e.eventRaceNowAvailable=e.globalService.globalVar.notifications.isEventRaceNowActive&&e.lookupService.isItemUnlocked("grandPrix")&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>9)});return function(r){return i.apply(this,arguments)}}()),this.communicationSubscription=this.componentCommunicationService.getRaceView().subscribe(i=>{this.displayRaceView=i})}changeDisplayRaceView(e){this.displayRaceView=e,e===xt.special&&(this.newSpecialRaceAvailable=this.globalService.globalVar.notifications.isNewSpecialRaceAvailable=!1),e===xt.event&&(this.eventRaceNowAvailable=this.globalService.globalVar.notifications.isEventRaceNowActive=!1)}raceSelected(e){this.selectedRace=e,this.showRace=!0}raceFinished(){this.showRace=!1}trainingTrackRaceSelected(e){this.trainingTrackRace=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.communicationSubscription&&this.communicationSubscription.unsubscribe(),this.globalService.globalVar.localRaces=[]}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(qr),Me(jr),Me(yn))},t.\u0275cmp=mi({type:t,selectors:[["app-race-selection-view"]],decls:2,vars:2,consts:[["class","raceSelectionDiv",4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"raceSelectionDiv"],["class","info",4,"ngIf"],[3,"raceSelected",4,"ngIf"],[3,"raceSelectedEmitter",4,"ngIf"],[1,"info"],[1,"raceGridContainer"],[1,"buttonAsText","circuit","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","local","s5Heading","clickableText",3,"ngClass","click"],["class","availableIcon",4,"ngIf"],[1,"buttonAsText","event","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","trainingTrack","s5Heading","clickableText",3,"ngClass","click"],[1,"availableIcon"],[3,"raceSelected"],[3,"raceSelectedEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,i){1&e&&(pe(0,Rz,6,5,"div",0),pe(1,Dz,2,1,"div",1)),2&e&&(Y("ngIf",!i.showRace),V(1),Y("ngIf",i.showRace))},directives:[on,_r,wH,$H,IG,Vx,Ox],styles:['.raceGridContainer[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"circuit local event trainingTrack"}.raceSelectionDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.circuit[_ngcontent-%COMP%]{grid-area:circuit;text-align:center}.local[_ngcontent-%COMP%]{grid-area:local;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.trainingTrack[_ngcontent-%COMP%]{grid-area:trainingTrack;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary);-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.availableIcon[_ngcontent-%COMP%]{color:var(--foreground-quaternary);border-radius:25px;background:var(--background-five);padding:0 .5rem;margin-right:.25rem}@media (max-width: 800px){.raceGridContainer[_ngcontent-%COMP%]{grid-template-columns:.9fr 1.1fr 1fr 1fr}}']}),t})(),Az=(()=>{class t{constructor(e){this.utilityService=e}ngOnInit(){}toggle(){null!=this.callbackFunction&&this.callbackFunction()}getId(){return"cbxInput"+this.id}}return t.\u0275fac=function(e){return new(e||t)(Me(Lr))},t.\u0275cmp=mi({type:t,selectors:[["app-toggle"]],inputs:{model:"model",label:"label",id:"id",popoverText:"popoverText",callbackFunction:"callbackFunction"},decls:5,vars:5,consts:[[1,"custom-control","custom-switch"],["triggers","mouseenter:mouseleave",3,"ngbPopover"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange","input"],[1,"custom-control-label",3,"for"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"span",1)(2,"input",2),_e("ngModelChange",function(a){return i.model=a})("input",function(){return i.toggle()}),M(),D(3,"label",3),F(4),M()()()),2&e&&(V(1),Y("ngbPopover",i.popoverText),V(1),Y("id",i.getId())("ngModel",i.model),V(1),Y("for",i.getId()),V(1),Kt(i.label))},directives:[no,Jc,Hs,Gs],styles:[""]}),t})();function Pz(t,n){if(1&t&&(D(0,"div",7)(1,"em"),F(2),M(),he(3,"br")(4,"br"),M()),2&t){const e=K();V(2),He("",e.pointsNeededInColumn," points needed in this column to unlock")}}function Ez(t,n){1&t&&(D(0,"div",7)(1,"em"),F(2," Click Upgrade to unlock this talent. "),he(3,"br")(4,"br"),M()())}function Iz(t,n){1&t&&(D(0,"div"),he(1,"br")(2,"br"),M())}function Bz(t,n){if(1&t&&(D(0,"div"),he(1,"br"),D(2,"em")(3,"div",7),F(4,"Next Upgrade: "),M()(),he(5,"div",8),M()),2&t){const e=K();V(5),Y("innerHTML",e.upgradedTalentDescription,Si)}}function Oz(t,n){if(1&t){const e=tt();D(0,"div",9),F(1),D(2,"button",10),_e("click",function(){return me(e),K().spendTalentPoint()}),F(3,"Upgrade"),M()()}if(2&t){const e=K();V(1),Mn(" ",e.pointsInTalent," / ",e.totalPossiblePoints," Points "),V(1),Y("disabled",!e.hasTalentPoint||!e.hasEnoughPointsInColumn||e.isTalentMaxed())}}const Vz=function(t){return{talentInactive:t}};let Nz=(()=>{class t{constructor(e,i,r){this.lookupService=e,this.gameLoopService=i,this.globalService=r,this.isPreview=!1,this.previewType="",this.spentTalent=new di}ngOnInit(){this.talentTreeType=this.selectedAnimal.talentTree.talentTreeType,this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.totalPossiblePoints=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.talentTreeType),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0;var e=0;1===this.row&&(e=this.selectedAnimal.talentTree.row2RequiredPoints),2===this.row&&(e=this.selectedAnimal.talentTree.row3RequiredPoints),3===this.row&&(e=this.selectedAnimal.talentTree.row4RequiredPoints),this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0,this.isPreview&&""!==this.previewType&&(this.talentTreeType=this.lookupService.getTalentTreeByStringName(this.previewType)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0})}isTalentMaxed(){var e=!1;return this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column)>=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.selectedAnimal.talentTree.talentTreeType)&&(e=!0),e}spendTalentPoint(){this.isTalentMaxed()||(this.selectedAnimal.talentTree.spendTalentPoint(this.row,this.column),this.spentTalent.emit(!0),this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.globalService.calculateAnimalRacingStats(this.selectedAnimal))}ngOnChanges(e){void 0!==e.previewType&&this.isPreview&&(this.previewType=e.previewType.currentValue,this.talentTreeType=this.lookupService.getTalentTreeByStringName(this.previewType))}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(yn),Me(jr),Me(ki))},t.\u0275cmp=mi({type:t,selectors:[["app-talent"]],inputs:{selectedAnimal:"selectedAnimal",row:"row",column:"column",isPreview:"isPreview",previewType:"previewType"},outputs:{spentTalent:"spentTalent"},features:[ra],decls:12,vars:12,consts:[[1,"talent"],[1,"header","keyword"],[1,"content"],["class","centeredText",4,"ngIf"],[4,"ngIf"],[1,"description",3,"ngClass","innerHTML"],["class","footer",4,"ngIf"],[1,"centeredText"],[1,"talentInactive",3,"innerHTML"],[1,"footer"],[3,"disabled","click"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"span"),F(3),M()(),D(4,"div",2),pe(5,Pz,5,1,"div",3),pe(6,Ez,5,0,"div",3),pe(7,Iz,3,0,"div",4),he(8,"div",5),pe(9,Bz,6,1,"div",4),he(10,"br"),pe(11,Oz,4,3,"div",6),M()()),2&e&&(V(3),eh("",i.lookupService.getNameByTalentTree(i.talentTreeType)," Column ",i.column+1," Row ",i.row+1,""),V(2),Y("ngIf",i.pointsNeededInColumn>0),V(1),Y("ngIf",i.pointsNeededInColumn<=0&&0===i.pointsInTalent&&!i.isPreview),V(1),Y("ngIf",i.pointsInTalent===i.totalPossiblePoints),V(1),Y("ngClass",hi(10,Vz,0===i.pointsInTalent))("innerHTML",i.talentDescription,Si),V(1),Y("ngIf",i.pointsInTalent>0&&i.pointsInTalent<i.totalPossiblePoints&&!i.isPreview),V(2),Y("ngIf",!i.isPreview))},directives:[on,_r],styles:['.talent[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr;justify-content:stretch;grid-template-areas:"header" "content"}.header[_ngcontent-%COMP%]{grid-area:header;background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary)}.content[_ngcontent-%COMP%]{grid-area:content;margin:1rem;display:flex;flex-direction:column;justify-content:space-between}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.talentInactive[_ngcontent-%COMP%]{opacity:.6}']}),t})();function Fz(t,n){if(1&t&&(D(0,"span"),F(1),M()),2&t){const e=K(2).$implicit;V(1),He("Level ",e.level+1,"")}}function Lz(t,n){1&t&&(D(0,"span"),F(1,"MAX"),M())}function Uz(t,n){if(1&t&&(D(0,"span"),F(1),Di(2,"number"),Di(3,"number"),D(4,"span",12),F(5),Di(6,"number"),M(),F(7,")"),M()),2&t){const e=K(2).$implicit,i=K();V(1),Mn("XP needed for next level: ",Yi(2,3,e.xp,"1.2-2")," / ",Yi(3,6,e.xpNeededForLevel,"1.0-0")," ("),V(4),He("",Yi(6,9,i.getProgressBarPercent(e.type),"1.2-2"),"%")}}function Hz(t,n){1&t&&(D(0,"span"),F(1,"MAX"),M())}function Gz(t,n){if(1&t){const e=tt();D(0,"div",1)(1,"div",5)(2,"span",6)(3,"button",7),_e("click",function(){me(e);const r=K().$implicit;return K().toggleOrb(r.type)}),F(4,"-"),M()(),D(5,"span",8),F(6),M(),he(7,"span",6),M(),D(8,"p"),F(9),M(),D(10,"div")(11,"span",9)(12,"span"),F(13),M(),he(14,"ngb-progressbar",10),pe(15,Fz,2,1,"span",11),pe(16,Lz,2,0,"span",11),M(),pe(17,Uz,8,12,"span",11),pe(18,Hz,2,0,"span",11),he(19,"br")(20,"br"),F(21),M()()}if(2&t){const e=K().$implicit,i=K();V(5),Y("ngClass",i.colorConditional(e.type)),V(1),Kt(i.globalService.getOrbNameFromType(e.type)),V(3),Mn("Level ",e.level," / ",e.maxLevel,""),V(4),He("Level ",e.level,""),V(1),Y("value",i.getProgressBarPercent(e.type)),V(1),Y("ngIf",e.level<e.maxLevel),V(1),Y("ngIf",e.level>=e.maxLevel),V(1),Y("ngIf",e.level<e.maxLevel),V(1),Y("ngIf",e.level>=e.maxLevel),V(3),He(" ",i.globalService.getOrbDescription(e.type)," ")}}function zz(t,n){if(1&t&&(D(0,"span",18),F(1),Di(2,"number"),M()),2&t){const e=K(2).$implicit;V(1),Mn("XP needed for Level ",e.level+1,": ",Yi(2,2,e.xpNeededForLevel-e.xp,"1.0-0")," ")}}function jz(t,n){1&t&&(D(0,"span",18),F(1,"MAX"),M())}function qz(t,n){if(1&t){const e=tt();D(0,"div",13)(1,"span",6)(2,"button",7),_e("click",function(){me(e);const r=K().$implicit;return K().toggleOrb(r.type)}),F(3,"+"),M()(),D(4,"span",14),F(5),M(),D(6,"span",15),F(7),M(),he(8,"ngb-progressbar",16),pe(9,zz,3,5,"span",17),pe(10,jz,2,0,"span",17),M()}if(2&t){const e=K().$implicit,i=K();V(4),Y("ngClass",i.colorConditional(e.type)),V(1),Kt(i.globalService.getOrbNameFromType(e.type)),V(2),Mn("Level ",e.level," / ",e.maxLevel,""),V(1),Y("value",i.getProgressBarPercent(e.type)),V(1),Y("ngIf",e.level<e.maxLevel),V(1),Y("ngIf",e.level>=e.maxLevel)}}function $z(t,n){if(1&t&&(D(0,"div"),pe(1,Gz,22,11,"div",3),pe(2,qz,11,7,"div",4),he(3,"hr"),M()),2&t){const e=n.$implicit,i=K();V(1),Y("ngIf",!i.isOrbMinimized(e.type)),V(1),Y("ngIf",i.isOrbMinimized(e.type))}}let Nx=(()=>{class t{constructor(e){this.globalService=e}ngOnInit(){this.allOrbs=this.globalService.globalVar.orbStats.allOrbs.filter(e=>this.globalService.globalVar.resources.some(i=>this.globalService.getOrbTypeFromResource(i)===e.type))}getProgressBarPercent(e){var i=this.globalService.getOrbDetailsFromType(e);return void 0!==i?i.xp/i.xpNeededForLevel*100:0}toggleOrb(e){if(e===Ot.amber){var i=this.globalService.globalVar.settings.get("amberOrbToggled");this.globalService.globalVar.settings.set("amberOrbToggled",!i)}e===Ot.amethyst&&(i=this.globalService.globalVar.settings.get("amethystOrbToggled"),this.globalService.globalVar.settings.set("amethystOrbToggled",!i)),e===Ot.emerald&&(i=this.globalService.globalVar.settings.get("emeraldOrbToggled"),this.globalService.globalVar.settings.set("emeraldOrbToggled",!i)),e===Ot.ruby&&(i=this.globalService.globalVar.settings.get("rubyOrbToggled"),this.globalService.globalVar.settings.set("rubyOrbToggled",!i)),e===Ot.sapphire&&(i=this.globalService.globalVar.settings.get("sapphireOrbToggled"),this.globalService.globalVar.settings.set("sapphireOrbToggled",!i)),e===Ot.topaz&&(i=this.globalService.globalVar.settings.get("topazOrbToggled"),this.globalService.globalVar.settings.set("topazOrbToggled",!i))}isOrbMinimized(e){var i=!1;return e===Ot.amber&&(i=this.globalService.globalVar.settings.get("amberOrbToggled")),e===Ot.amethyst&&(i=this.globalService.globalVar.settings.get("amethystOrbToggled")),e===Ot.emerald&&(i=this.globalService.globalVar.settings.get("emeraldOrbToggled")),e===Ot.ruby&&(i=this.globalService.globalVar.settings.get("rubyOrbToggled")),e===Ot.sapphire&&(i=this.globalService.globalVar.settings.get("sapphireOrbToggled")),e===Ot.topaz&&(i=this.globalService.globalVar.settings.get("topazOrbToggled")),i}colorConditional(e){return{amberColor:e===Ot.amber,amethystColor:e===Ot.amethyst,rubyColor:e===Ot.ruby,sapphireColor:e===Ot.sapphire,topazColor:e===Ot.topaz,emeraldColor:e===Ot.emerald}}}return t.\u0275fac=function(e){return new(e||t)(Me(ki))},t.\u0275cmp=mi({type:t,selectors:[["app-orbs-view"]],decls:5,vars:1,consts:[[1,"orbView"],[1,"centered"],[4,"ngFor","ngForOf"],["class","centered",4,"ngIf"],["class","minimizedDisplay",4,"ngIf"],[1,"minimizer"],[1,"minimizerSideSpacing"],[3,"click"],[1,"s4Heading","keyword",3,"ngClass"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[4,"ngIf"],[1,"customLabel"],[1,"minimizedDisplay"],[1,"s4Heading","keyword","orbNameWidth",3,"ngClass"],[1,"setVerticalAlign"],["type","success",1,"progressBar","progressBarMinimized","setVerticalAlign",3,"value"],["class","setVerticalAlign xpWidth",4,"ngIf"],[1,"setVerticalAlign","xpWidth"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1),F(2," Each orb is attuned to a specific stat, increasing it by 20% per level. This increase is reduced proportionally for however many racers use the same orb during a single race. Orb XP is only gained from races you win and does not include Training Tracks. To equip an Orb, you must first get the 'Orb Pendant' from the Master Training Track. After collecting all of the orbs, you will find a way to increase their max level. "),M(),he(3,"hr"),pe(4,$z,4,2,"div",2),M()),2&e&&(V(4),Y("ngForOf",i.allOrbs))},directives:[Vr,on,_r,Zd],pipes:[ts],styles:[".orbView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.progressBar[_ngcontent-%COMP%]{width:50%}.progressBarMinimized[_ngcontent-%COMP%]{width:30%!important}.progressBarContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.xpWidth[_ngcontent-%COMP%]{width:20%;text-align:center}.minimizer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.minimizerSideSpacing[_ngcontent-%COMP%]{width:3rem}.minimizedDisplay[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.setVerticalAlign[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.orbNameWidth[_ngcontent-%COMP%]{width:8rem}"]}),t})();function Wz(t,n){if(1&t&&(D(0,"div",14),F(1,"Equipped: "),D(2,"span",56),F(3),M(),he(4,"br")(5,"br"),F(6),M()),2&t){const e=K();Y("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)),V(3),Kt(e.selectedAnimal.equippedItem.name),V(3),He(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)," ")}}function Xz(t,n){1&t&&(D(0,"div"),F(1," Equipped: None "),M())}function Yz(t,n){if(1&t){const e=tt();D(0,"button",16),_e("click",function(){return me(e),K().unequipItem()}),F(1,"Unequip Item"),M()}}function Kz(t,n){if(1&t&&(D(0,"span",12),F(1),M()),2&t){const e=K(2);V(1),He(" ",e.getTalentTreeName(),"")}}function Zz(t,n){if(1&t){const e=tt();D(0,"div",57)(1,"div"),pe(2,Kz,2,1,"span",58),M(),D(3,"button",16),_e("click",function(){me(e);const r=K(),a=Qt(223);return r.openTalentsModal(a)}),F(4,"View Talents"),M()()}if(2&t){const e=K();V(2),Y("ngIf",e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none)}}function Qz(t,n){if(1&t){const e=tt();D(0,"div")(1,"span",60),F(2),M(),D(3,"span")(4,"button",61),_e("click",function(){me(e);const r=K(2);return r.editingName=!r.editingName}),F(5,"Edit"),M()()()}if(2&t){const e=K(2);V(2),He("",e.selectedAnimal.name," ")}}function Jz(t,n){if(1&t){const e=tt();D(0,"div")(1,"span")(2,"input",62),_e("ngModelChange",function(r){return me(e),K(2).newName=r}),M()(),D(3,"span")(4,"button",16),_e("click",function(){return me(e),K(2).editName()}),F(5,"Save"),M()(),D(6,"span")(7,"button",16),_e("click",function(){me(e);const r=K(2);return r.editingName=!r.editingName}),F(8,"Cancel"),M()()()}if(2&t){const e=K(2);V(2),Y("ngModel",e.newName)}}function ej(t,n){if(1&t&&(D(0,"span",63),F(1),M()),2&t){const e=K(2);Ia("ngbPopover",e.traitStatGainDescription),V(1),He(" ",e.selectedAnimal.trait.traitName," ")}}function tj(t,n){if(1&t&&(D(0,"div"),pe(1,Qz,6,1,"div",6),pe(2,Jz,9,1,"div",6),D(3,"span",12),pe(4,ej,2,2,"span",59),F(5),M()()),2&t){const e=K();V(1),Y("ngIf",!e.editingName),V(1),Y("ngIf",e.editingName),V(2),Y("ngIf",null!=e.selectedAnimal.trait),V(1),He(" ",e.selectedAnimal.getAnimalType()," ")}}function ij(t,n){if(1&t){const e=tt();D(0,"div")(1,"span")(2,"button",16),_e("click",function(){me(e);const r=K(2);return r.editingName=!r.editingName}),F(3,"Edit Name"),M()()()}}function nj(t,n){if(1&t){const e=tt();D(0,"div")(1,"span")(2,"input",64),_e("ngModelChange",function(r){return me(e),K(2).newName=r}),M()(),D(3,"span")(4,"button",16),_e("click",function(){return me(e),K(2).editName()}),F(5,"Save"),M()(),D(6,"span")(7,"button",16),_e("click",function(){me(e);const r=K(2);return r.editingName=!r.editingName}),F(8,"Cancel"),M()()()}if(2&t){const e=K(2);V(2),Y("ngModel",e.newName)}}function rj(t,n){if(1&t&&(D(0,"span",63),F(1),M()),2&t){const e=K(2);Ia("ngbPopover",e.traitStatGainDescription),V(1),He(" ",e.selectedAnimal.trait.traitName," ")}}function aj(t,n){if(1&t&&(D(0,"div"),pe(1,ij,4,0,"div",6),pe(2,nj,9,1,"div",6),D(3,"span",12),pe(4,rj,2,2,"span",59),F(5),M()()),2&t){const e=K();V(1),Y("ngIf",!e.editingName),V(1),Y("ngIf",e.editingName),V(2),Y("ngIf",null!=e.selectedAnimal.trait),V(1),He(" ",e.selectedAnimal.getAnimalType()," ")}}function oj(t,n){if(1&t&&(D(0,"em"),F(1),M()),2&t){const e=K();V(1),He("(",e.selectedAnimal.currentTraining.trainingName,")")}}function sj(t,n){if(1&t&&he(0,"app-toggle",65),2&t){const e=K();Y("callbackFunction",e.toggleAutoBreed)("label","Auto Breed")("model",e.autoBreedActive)}}function lj(t,n){if(1&t&&(D(0,"div",14)(1,"span",67),F(2),M(),he(3,"br")(4,"br"),F(5),M()),2&t){const e=K(2);Y("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)),V(1),Y("ngClass",e.orbColorConditional(e.selectedAnimal.equippedOrb)),V(1),Kt(e.selectedAnimal.equippedOrb.name),V(3),He(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)," ")}}function cj(t,n){1&t&&(D(0,"div"),F(1," No orb selected "),M())}function uj(t,n){if(1&t){const e=tt();D(0,"button",16),_e("click",function(){return me(e),K(2).unequipOrb()}),F(1,"Unequip Orb"),M()}}function dj(t,n){if(1&t){const e=tt();D(0,"div",66),pe(1,lj,6,4,"div",5),pe(2,cj,2,0,"div",6),he(3,"br"),pe(4,uj,2,0,"button",7),D(5,"button",8),_e("click",function(){me(e);const r=K(),a=Qt(221);return r.openOrbModal(a)}),F(6,"Equip New Orb"),M()()}if(2&t){const e=K();V(1),Y("ngIf",null!=e.selectedAnimal.equippedOrb),V(1),Y("ngIf",null==e.selectedAnimal.equippedOrb),V(2),Y("ngIf",null!=e.selectedAnimal.equippedOrb)}}function fj(t,n){if(1&t&&(D(0,"div")(1,"span")(2,"span",68),F(3,"Bonus Breed XP From Training:"),M(),F(4),Di(5,"number"),M(),he(6,"br"),M()),2&t){const e=K(),i=Qt(205);V(2),Y("ngbPopover",i),V(2),He(" ",Yi(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromTraining,"1.0-0")," ")}}function hj(t,n){if(1&t&&(D(0,"div")(1,"span")(2,"span",68),F(3,"Bonus Breed XP From Free Races:"),M(),F(4),Di(5,"number"),M()()),2&t){const e=K(),i=Qt(201);V(2),Y("ngbPopover",i),V(2),He(" ",Yi(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces,"1.0-0")," ")}}function pj(t,n){if(1&t&&(D(0,"div")(1,"span")(2,"span",68),F(3,"Bonus Breed XP From Circuit Races:"),M(),F(4),Di(5,"number"),M()()),2&t){const e=K(),i=Qt(203);V(2),Y("ngbPopover",i),V(2),He(" ",Yi(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces,"1.0-0")," ")}}function gj(t,n){if(1&t&&(D(0,"div")(1,"span")(2,"span",68),F(3,"Training Time Reduction:"),M(),F(4),Di(5,"number"),M()()),2&t){const e=K(),i=Qt(209);V(2),Y("ngbPopover",i),V(2),He(" ",Yi(5,2,e.selectedAnimal.miscStats.trainingTimeReduction,"1.0-0"),"% ")}}function vj(t,n){if(1&t&&(D(0,"div")(1,"span")(2,"span",68),F(3,"Bonus Diminishing Returns per Facility Level:"),M(),F(4),Di(5,"number"),M()()),2&t){const e=K(),i=Qt(207);V(2),Y("ngbPopover",i),V(2),He(" ",Yi(5,2,e.selectedAnimal.miscStats.diminishingReturnsBonus,"1.0-0")," ")}}function mj(t,n){if(1&t&&(D(0,"div")(1,"span")(2,"span",68),F(3,"Bonus Talents:"),M(),F(4),Di(5,"number"),M()()),2&t){const e=K(),i=Qt(211);V(2),Y("ngbPopover",i),V(2),He(" ",Yi(5,2,e.selectedAnimal.miscStats.bonusTalents,"1.0-0")," ")}}function bj(t,n){if(1&t&&(D(0,"div")(1,"span")(2,"span",68),F(3,"Bonus Ability Efficiency:"),M(),F(4),Di(5,"number"),M()()),2&t){const e=K(),i=Qt(213);V(2),Y("ngbPopover",i),V(2),He(" ",Yi(5,2,100*e.selectedAnimal.miscStats.bonusAbilityEfficiency,"1.0-0"),"% ")}}function _j(t,n){if(1&t&&(D(0,"div")(1,"span")(2,"span",68),F(3,"Bonus Orb XP Gain:"),M(),F(4),Di(5,"number"),M()()),2&t){const e=K(),i=Qt(215);V(2),Y("ngbPopover",i),V(2),He(" ",Yi(5,2,100*e.selectedAnimal.miscStats.bonusOrbXp,"1.0-0"),"% ")}}function yj(t,n){if(1&t){const e=tt();D(0,"button",69),_e("click",function(){me(e);const r=K();return r.selectAbility(r.ability2)}),F(1),M()}if(2&t){const e=K();Ii("filterActive",e.selectedAnimal.ability.name===e.ability2.name),V(1),He("",e.ability2.name," ")}}function wj(t,n){if(1&t){const e=tt();D(0,"button",70),_e("click",function(){me(e);const r=K();return r.selectAbility(r.ability3)}),F(1),M()}if(2&t){const e=K();Ii("filterActive",e.selectedAnimal.ability.name===e.ability3.name),V(1),He("",e.ability3.name," ")}}function Sj(t,n){if(1&t&&(D(0,"span"),F(1),M()),2&t){const e=K();V(1),Mn("",e.selectedAbility.abilityXp," / ",e.selectedAbility.abilityMaxXp," XP")}}function Cj(t,n){1&t&&(D(0,"span"),F(1,"MAX"),M())}function Tj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getTopSpeedPopover()," ")}}function Mj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getAccelerationPopover()," ")}}function xj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getEndurancePopover()," ")}}function Rj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getPowerPopover()," ")}}function Dj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getFocusPopover()," ")}}function kj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getAdaptabilityPopover()," ")}}function Aj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getAbilityLevelPopover()," ")}}function Pj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getBonusFreeRaceXpPopover()," ")}}function Ej(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getBonusCircuitRaceXpPopover()," ")}}function Ij(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getBonusTrainingXpPopover()," ")}}function Bj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," ")}}function Oj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getBonusTrainingTimeReductionPopover()," ")}}function Vj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getBonusTalentsPopover()," ")}}function Nj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getBonusAbilityEfficiencyPopover()," ")}}function Fj(t,n){if(1&t&&(D(0,"div",71),F(1),M()),2&t){const e=K();V(1),He(" ",e.getBonusOrbXpPopover()," ")}}function Lj(t,n){if(1&t&&(D(0,"div"),he(1,"span",32),M()),2&t){const e=K().$implicit,i=K(4);V(1),Y("innerHTML",i.getItemAdditionalText(e),Si)}}const Uj=function(t){return{activeSelectedItem:t}};function Hj(t,n){if(1&t){const e=tt();D(0,"td",81)(1,"div",82),_e("click",function(){const a=me(e).$implicit;return K(4).selectItem(a)}),D(2,"h6",83),F(3),M(),pe(4,Lj,2,1,"div",6),he(5,"br")(6,"br"),F(7),he(8,"br")(9,"br"),M()()}if(2&t){const e=n.$implicit,i=K(4);V(1),Y("ngClass",hi(5,Uj,e.isSelected)),V(2),Mn("",e.name," (",e.amount,")"),V(1),Y("ngIf",i.itemHasAdditionalText(e)),V(3),He(" ",i.getItemShortDescription(e.name)," ")}}function Gj(t,n){if(1&t&&(D(0,"tr"),pe(1,Hj,10,7,"td",80),M()),2&t){const e=n.$implicit;V(1),Y("ngForOf",e)}}function zj(t,n){if(1&t){const e=tt();D(0,"div",84)(1,"span",85)(2,"span")(3,"span",83),F(4),M(),F(5),M(),D(6,"span",86)(7,"label",87),F(8,"Amount: "),M(),D(9,"input",88),_e("ngModelChange",function(r){return me(e),K(3).selectedItemQuantity=r}),M(),D(10,"button",89),_e("click",function(){return me(e),K(3).useItem()}),F(11,"Use"),M()()()()}if(2&t){const e=K(3);V(4),Kt(e.selectedItem.name),V(1),He(" - ",e.getItemShortDescription(e.selectedItem.name)," "),V(4),Y("ngModel",e.selectedItemQuantity)}}function jj(t,n){if(1&t&&(D(0,"div")(1,"div",76)(2,"div",77)(3,"table"),pe(4,Gj,2,1,"tr",78),M()()(),pe(5,zj,12,3,"div",79),M()),2&t){const e=K(2);V(4),Y("ngForOf",e.itemsRows),V(1),Y("ngIf",null!=e.selectedItem)}}function qj(t,n){1&t&&(D(0,"div"),F(1," No items available. "),M())}function $j(t,n){if(1&t){const e=tt();D(0,"div",72)(1,"form")(2,"div",73)(3,"h4",74),F(4,"Use Item"),M(),D(5,"button",75),_e("click",function(){return me(e).$implicit.dismiss()}),F(6,"X"),M()(),pe(7,jj,6,2,"div",6),pe(8,qj,2,0,"div",6),M()()}if(2&t){const e=K();V(7),Y("ngIf",e.usableItemsList.length>0),V(1),Y("ngIf",0==e.usableItemsList.length)}}const Wj=function(t){return{activeSelectedEquipment:t}};function Xj(t,n){if(1&t){const e=tt();D(0,"td",81)(1,"div",91),_e("click",function(){const a=me(e).$implicit;return K(3).selectEquipment(a)}),D(2,"h6",56),F(3),M(),he(4,"br")(5,"br"),F(6),he(7,"br"),M()()}if(2&t){const e=n.$implicit,i=K(3);V(1),Y("ngClass",hi(4,Wj,e.isSelected)),V(2),Mn("",e.name," (",e.amount,")"),V(3),He(" ",i.getEquipmentShortDescription(e.name)," ")}}function Yj(t,n){if(1&t&&(D(0,"tr"),pe(1,Xj,8,6,"td",80),M()),2&t){const e=n.$implicit;V(1),Y("ngForOf",e)}}function Kj(t,n){if(1&t){const e=tt();D(0,"div",84)(1,"span",92)(2,"span")(3,"span",56),F(4),M(),F(5),M(),D(6,"span",86)(7,"button",89),_e("click",function(){return me(e),K(2).equipItem()}),F(8,"Equip"),M()()()()}if(2&t){const e=K(2);V(4),Kt(e.selectedEquipment.name),V(1),He(" - ",e.getEquipmentShortDescription(e.selectedEquipment.name)," ")}}function Zj(t,n){1&t&&(D(0,"div"),F(1," No equipment available. "),M())}function Qj(t,n){if(1&t){const e=tt();D(0,"div",72)(1,"form")(2,"div",73)(3,"h4",74),F(4,"Change Equipment"),M(),D(5,"button",75),_e("click",function(){const a=me(e).$implicit;return K().clearSelectedItems(),a.dismiss()}),F(6,"X"),M()(),D(7,"div")(8,"div",76)(9,"div",90)(10,"table"),pe(11,Yj,2,1,"tr",78),M()()(),pe(12,Kj,9,2,"div",79),M(),pe(13,Zj,2,0,"div",6),M()()}if(2&t){const e=K();V(11),Y("ngForOf",e.equipmentRows),V(1),Y("ngIf",null!=e.selectedEquipment),V(1),Y("ngIf",0==e.equipmentList.length)}}const Jj=function(t){return{activeSelectedOrb:t}};function eq(t,n){if(1&t){const e=tt();D(0,"td",81)(1,"div",96),_e("click",function(){const a=me(e).$implicit;return K(3).selectOrb(a)}),D(2,"h6",11),F(3),M(),he(4,"br"),F(5),he(6,"br"),M()()}if(2&t){const e=n.$implicit,i=K(3);V(1),Y("ngClass",hi(4,Jj,e.isSelected)),V(1),Y("ngClass",i.orbColorConditional(e)),V(1),Kt(e.name),V(2),He(" ",i.getEquipmentShortDescription(e.name)," ")}}function tq(t,n){if(1&t&&(D(0,"tr"),pe(1,eq,7,6,"td",80),M()),2&t){const e=n.$implicit;V(1),Y("ngForOf",e)}}function iq(t,n){if(1&t){const e=tt();D(0,"div",84)(1,"span",97)(2,"span")(3,"span",11),F(4),M(),F(5),M(),D(6,"span",86)(7,"button",89),_e("click",function(){return me(e),K(2).equipOrb()}),F(8,"Equip"),M()()()()}if(2&t){const e=K(2);V(3),Y("ngClass",e.orbColorConditional(e.selectedOrb)),V(1),Kt(e.selectedOrb.name),V(1),He(" - ",e.getEquipmentShortDescription(e.selectedOrb.name)," ")}}function nq(t,n){1&t&&(D(0,"div"),F(1," No equipment available. "),M())}function rq(t,n){if(1&t){const e=tt();D(0,"div",72)(1,"form")(2,"div",73)(3,"h4",74),F(4,"Change Orb"),M(),D(5,"div",93)(6,"button",94),_e("click",function(){me(e);const r=K(),a=Qt(225);return r.viewOrbDetails(a)}),F(7,"View Orb Details"),M(),D(8,"button",75),_e("click",function(){return me(e).$implicit.dismiss()}),F(9,"X"),M()()(),D(10,"div")(11,"div",76)(12,"div",95)(13,"table"),pe(14,tq,2,1,"tr",78),M()()(),pe(15,iq,9,3,"div",79),M(),pe(16,nq,2,0,"div",6),M()()}if(2&t){const e=K();V(14),Y("ngForOf",e.orbRows),V(1),Y("ngIf",null!=e.selectedOrb),V(1),Y("ngIf",0==e.equipmentList.length)}}const aq=function(t){return{selectedTalentTree:t}};function oq(t,n){if(1&t){const e=tt();D(0,"span",102),_e("click",function(){const a=me(e).$implicit;return K(4).filterTalentTree(a)}),F(1),M()}if(2&t){const e=n.$implicit,i=K(4);Y("ngClass",hi(2,aq,i.selectedTalentTree===e)),V(1),He(" ",e.trim()," ")}}function sq(t,n){1&t&&he(0,"div",115)}function lq(t,n){if(1&t&&he(0,"div",11),2&t){const e=K().index,i=K().index;Y("ngClass",K(5).getBorderConditional(i,e))}}function cq(t,n){if(1&t){const e=tt();D(0,"div",110)(1,"div",11)(2,"app-talent",111),_e("spentTalent",function(r){return me(e),K(6).spentTalent(r)}),M()(),D(3,"div",112),pe(4,sq,1,0,"div",113),pe(5,lq,1,1,"div",114),M()()}if(2&t){const e=n.index,i=K().index,r=K(5);V(1),Y("ngClass",i<r.talentRows-1?"talentContent":"lastTalentContent"),V(1),Y("row",i)("column",e)("selectedAnimal",r.selectedAnimal)("isPreview",!0)("previewType",r.selectedTalentTree),V(2),Y("ngIf",i!==r.talentRows-1),V(1),Y("ngIf",i!==r.talentRows-1)}}const N0=function(){return[]};function uq(t,n){if(1&t&&(D(0,"div",107)(1,"div",108),pe(2,cq,6,8,"div",109),M()()),2&t){const e=K(5);V(2),Y("ngForOf",nd(1,N0).constructor(e.talentColumns))}}function dq(t,n){if(1&t){const e=tt();D(0,"div")(1,"strong"),F(2),M(),he(3,"br"),D(4,"div",103)(5,"button",99),_e("click",function(){return me(e),K(4).selectTalentTree()}),F(6,"Select"),M()(),he(7,"hr"),D(8,"div",104)(9,"em"),F(10,"Preview"),M()(),D(11,"div",105),pe(12,uq,3,2,"div",106),M()()}if(2&t){const e=K(4);V(2),He(" ",e.inDepthTalentTreeDescription," "),V(10),Y("ngForOf",nd(2,N0).constructor(e.talentRows))}}function fq(t,n){if(1&t&&(D(0,"div")(1,"div",100),pe(2,oq,2,4,"span",101),M(),he(3,"hr"),pe(4,dq,13,3,"div",6),M()),2&t){const e=K(3);V(2),Y("ngForOf",e.talentTreeOptions),V(2),Y("ngIf",""!==e.inDepthTalentTreeDescription&&void 0!==e.inDepthTalentTreeDescription)}}function hq(t,n){if(1&t){const e=tt();D(0,"div")(1,"div",76),pe(2,fq,5,2,"div",6),M(),D(3,"div",84)(4,"button",99),_e("click",function(){return me(e),K(2).selectTalentTree()}),F(5,"Select"),M()()()}if(2&t){const e=K(2);V(2),Y("ngIf",e.talentTreeOptions.length>0)}}function pq(t,n){if(1&t&&(D(0,"em"),F(1),M()),2&t){const e=K(3);V(1),He("Free talent resets for this animal remaining: ",e.freeTalentResets,"")}}function gq(t,n){1&t&&he(0,"div",115)}function vq(t,n){if(1&t&&he(0,"div",11),2&t){const e=K().index,i=K().index;Y("ngClass",K(3).getBorderConditional(i,e))}}function mq(t,n){if(1&t){const e=tt();D(0,"div",110)(1,"div",11)(2,"app-talent",118),_e("spentTalent",function(r){return me(e),K(4).spentTalent(r)}),M()(),D(3,"div",112),pe(4,gq,1,0,"div",113),pe(5,vq,1,1,"div",114),M()()}if(2&t){const e=n.index,i=K().index,r=K(3);V(1),Y("ngClass",i<r.talentRows-1?"talentContent":"lastTalentContent"),V(1),Y("row",i)("column",e)("selectedAnimal",r.selectedAnimal),V(2),Y("ngIf",i!==r.talentRows-1),V(1),Y("ngIf",i!==r.talentRows-1)}}function bq(t,n){if(1&t&&(D(0,"div",107)(1,"div",108),pe(2,mq,6,6,"div",109),M()()),2&t){const e=K(3);V(2),Y("ngForOf",nd(1,N0).constructor(e.talentColumns))}}function _q(t,n){if(1&t){const e=tt();D(0,"div",76)(1,"div",116),F(2),M(),he(3,"br"),D(4,"p",116)(5,"span"),F(6),M(),D(7,"button",117),_e("click",function(){return me(e),K(2).resetTalents()}),F(8,"Reset Talents"),M(),he(9,"br"),pe(10,pq,2,1,"em",6),M(),he(11,"br"),pe(12,bq,3,2,"div",106),M()}if(2&t){const e=K(2);V(2),He("Available Talent Points: ",e.availableTalentPoints,""),V(4),He("Cost to reset talent specialization: ",e.talentResetCost,""),V(1),Y("disabled",e.lookupService.getCoins()<e.lookupService.getTalentResetCost(e.selectedAnimal.type)),V(3),Y("ngIf",e.freeTalentResets>0),V(2),Y("ngForOf",nd(5,N0).constructor(e.talentRows))}}function yq(t,n){if(1&t){const e=tt();D(0,"div",72)(1,"form")(2,"div",73)(3,"h4",74),F(4,"Talents"),M(),D(5,"button",75),_e("click",function(){return me(e).$implicit.dismiss()}),F(6,"X"),M()(),pe(7,hq,6,1,"div",6),pe(8,_q,13,6,"div",98),M()()}if(2&t){const e=K();V(7),Y("ngIf",e.selectedAnimal.talentTree.talentTreeType===e.talentTreeTypeEnum.none),V(1),Y("ngIf",e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none)}}function wq(t,n){if(1&t){const e=tt();D(0,"div",119)(1,"div",73)(2,"h4",74),F(3,"Orb Stats Info"),M(),D(4,"button",75),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",76),he(7,"app-orbs-view"),M()()}}function Sq(t,n){if(1&t){const e=tt();D(0,"div",72)(1,"div",73)(2,"h4",74),F(3,"Base Stats Info"),M(),D(4,"button",75),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",76)(7,"div",120)(8,"div",71)(9,"span",12),F(10,"Speed - "),M(),F(11),M(),he(12,"hr"),D(13,"div",71)(14,"span",12),F(15,"Acceleration - "),M(),F(16),M(),he(17,"hr"),D(18,"div",71)(19,"span",12),F(20,"Endurance - "),M(),F(21),M(),he(22,"hr"),D(23,"div",71)(24,"span",12),F(25,"Power - "),M(),F(26),M(),he(27,"hr"),D(28,"div",71)(29,"span",12),F(30,"Focus - "),M(),F(31),M(),he(32,"hr"),D(33,"div",71)(34,"span",12),F(35,"Adaptability - "),M(),F(36),M(),he(37,"hr"),D(38,"div",71)(39,"span",12),F(40,"Diminishing Returns - "),M(),F(41),M()()()()}if(2&t){const e=K();V(11),He(" ",e.getTopSpeedPopover()," "),V(5),He(" ",e.getAccelerationPopover()," "),V(5),He(" ",e.getEndurancePopover()," "),V(5),He(" ",e.getPowerPopover()," "),V(5),He(" ",e.getFocusPopover()," "),V(5),He(" ",e.getAdaptabilityPopover()," "),V(5),He(" ",e.getDiminishingReturnsPopover()," ")}}function Cq(t,n){if(1&t){const e=tt();D(0,"div",72)(1,"div",73)(2,"h4",74),F(3,"Racing Stats Info"),M(),D(4,"button",75),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",76)(7,"div",24)(8,"div",71)(9,"span",12),F(10,"Max Speed - "),M(),F(11),M(),he(12,"hr"),D(13,"div",71)(14,"span",12),F(15,"Acceleration Rate - "),M(),F(16),M(),he(17,"hr"),D(18,"div",71)(19,"span",12),F(20,"Stamina - "),M(),F(21),M(),he(22,"hr"),D(23,"div",71)(24,"span",12),F(25,"Power Efficiency - "),M(),F(26),M(),he(27,"hr"),D(28,"div",71)(29,"span",12),F(30,"Focus Distance - "),M(),F(31),M(),he(32,"hr"),D(33,"div",71)(34,"span",12),F(35,"Adaptability Distance - "),M(),F(36),M(),he(37,"hr"),D(38,"div",71)(39,"span",12),F(40,"Burst Chance - "),M(),F(41),M(),he(42,"hr"),D(43,"div",71)(44,"span",12),F(45,"Burst Distance - "),M(),F(46),M()()()()}if(2&t){const e=K();V(11),He(" ",e.selectedAnimal.currentStats.maxSpeedMsPopover()," "),V(5),He(" ",e.selectedAnimal.currentStats.accelerationMsPopover()," "),V(5),He(" ",e.selectedAnimal.currentStats.staminaPopover()," "),V(5),He(" ",e.selectedAnimal.currentStats.powerMsPopover()," "),V(5),He(" ",e.selectedAnimal.currentStats.focusMsPopover()," "),V(5),He(" ",e.selectedAnimal.currentStats.adaptabilityMsPopover()," "),V(5),He(" ",e.selectedAnimal.currentStats.burstChancePopover()," "),V(5),He(" ",e.selectedAnimal.currentStats.burstDistancePopover()," ")}}function Tq(t,n){if(1&t){const e=tt();D(0,"div",72)(1,"div",73)(2,"h4",74),F(3,"Miscellaneous Stats Info"),M(),D(4,"button",75),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",76)(7,"div",120)(8,"div",71)(9,"span",12),F(10,"Bonus Breed XP From Training - "),M(),F(11),M(),he(12,"hr"),D(13,"div",71)(14,"span",12),F(15,"Bonus Breed XP From Free Races - "),M(),F(16),M(),he(17,"hr"),D(18,"div",71)(19,"span",12),F(20,"Bonus Breed XP From Circuit Races - "),M(),F(21),M(),he(22,"hr"),D(23,"div",71)(24,"span",12),F(25,"Training Time Reduction - "),M(),F(26),M(),he(27,"hr"),D(28,"div",71)(29,"span",12),F(30,"Bonus Diminishing Returns per Facility Level - "),M(),F(31),M(),he(32,"hr"),D(33,"div",71)(34,"span",12),F(35,"Bonus Talents - "),M(),F(36),M()()()()}if(2&t){const e=K();V(11),He(" ",e.getBonusTrainingXpPopover()," "),V(5),He(" ",e.getBonusFreeRaceXpPopover()," "),V(5),He(" ",e.getBonusCircuitRaceXpPopover()," "),V(5),He(" ",e.getBonusTrainingTimeReductionPopover()," "),V(5),He(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," "),V(5),He(" ",e.getBonusTalentsPopover()," ")}}let Mq=(()=>{class t{constructor(e,i,r,a,c,d){this.lookupService=e,this.modalService=i,this.globalService=r,this.componentCommunicationService=a,this.utilityService=c,this.gameLoopService=d,this.returnEmitter=new di,this.canAutoBreed=!1,this.areTalentsAvailable=!1,this.orbIsUnlocked=!1,this.talentTreeTypeEnum=li,this.canBreed=!0,this.orbFunctionalityReleased=!0,this.talentColumns=3,this.talentRows=4,this.toggleAutoBreed=()=>{this.autoBreedActive=!this.autoBreedActive,this.selectedAnimal.autoBreedActive=this.autoBreedActive}}keyEvent(e){if((e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.returnToAnimalView(),!this.modalService.hasOpenModals()){var i=this.globalService.globalVar.animals.filter(d=>d.isAvailable),r=i.findIndex(d=>this.selectedAnimal===d);if(r>-1)if("ArrowLeft"===e.key)(a=r-1)<0&&(a=i.length-1),this.componentCommunicationService.setAnimalView(Mi.animals,c=i[a]),this.resetSelectedAnimalInfo(c);else if("ArrowRight"===e.key){var a,c;(a=r+1)===i.length&&(a=0),this.componentCommunicationService.setAnimalView(Mi.animals,c=i[a]),this.resetSelectedAnimalInfo(c)}}}ngOnInit(){this.handleIntroTutorial(),this.resetSelectedAnimalInfo(this.selectedAnimal),this.breedDescriptionPopover="When your Breed XP reaches the max, you can Breed your animal. This will reset your base stats, but it will also increase the amount that your base stats contribute to your racing stats."}returnToAnimalView(){this.returnEmitter.emit(!1)}isAbilityLevelMaxedOut(){var e=25,i=this.globalService.globalVar.modifiers.find(r=>"abilityLevelCapModifier"===r.text);return null!=i&&(e=i.value),null!=this.selectedAbility&&this.selectedAbility.abilityLevel>this.selectedAnimal.breedLevel+e}canAnimalBreed(){var e=!0;return this.selectedAnimal.breedGaugeXp<this.selectedAnimal.breedGaugeMax&&(e=!1),e}breed(){(!this.globalService.globalVar.showBreedWarning||confirm("Breeding will increase your base stat modifiers at the cost of resetting your base stats to their default values. You should do this when you have raced as far as you can without breeding or you have the time to spend to train your stats back. Continue?"))&&(this.globalService.globalVar.showBreedWarning=!1,this.globalService.BreedAnimal(this.selectedAnimal),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal),this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut())}editName(){this.newName.length<=50&&this.newName.length>=1?(this.selectedAnimal.name=this.newName,this.editingName=!1):alert("Name must be between 1 and 50 characters long.")}selectAbility(e){this.selectedAnimal.ability=e,this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal)}updateItemsList(){this.usableItemsList=[],this.globalService.globalVar.resources.filter(e=>(e.itemType===Le.Food||e.itemType===Le.Consumable)&&e.amount>0).forEach(e=>{void 0!==e&&this.usableItemsList.push(e)}),this.selectedAnimal.nectarAvailable&&this.usableItemsList.push(new Je("Nectar of the Gods",1,Le.Consumable)),this.setupDisplayItems()}updateEquipmentList(){this.equipmentList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===Le.Equipment&&!this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var i=e.makeCopy(e);this.equipmentList.push(i)}}),this.setupDisplayEquipment(),this.globalService.globalVar.animals.filter(e=>null!=e.equippedItem).forEach(e=>{var i=this.equipmentList.find(r=>{var a;return r.name===(null===(a=e.equippedItem)||void 0===a?void 0:a.name)});null!=i&&(i.amount>0&&(i.amount-=1),i.amount<=0&&(this.equipmentList=this.equipmentList.filter(r=>r.name!==(null==i?void 0:i.name))))})}updateOrbList(){this.orbList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===Le.Equipment&&this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var i=e.makeCopy(e);this.orbList.push(i)}}),this.setupDisplayEquipment()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];for(var i=1;i<=this.usableItemsList.length;i++)this.itemsCells.push(this.usableItemsList[i-1]),i%4==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}setupDisplayEquipment(){this.equipmentCells=[],this.equipmentRows=[];for(var i=1;i<=this.equipmentList.length;i++)this.equipmentCells.push(this.equipmentList[i-1]),i%4==0&&(this.equipmentRows.push(this.equipmentCells),this.equipmentCells=[]);0!==this.equipmentCells.length&&this.equipmentRows.push(this.equipmentCells)}setupDisplayOrbs(){this.orbCells=[],this.orbRows=[];for(var i=1;i<=this.orbList.length;i++)this.orbCells.push(this.orbList[i-1]),i%4==0&&(this.orbRows.push(this.orbCells),this.orbCells=[]);0!==this.orbCells.length&&this.orbRows.push(this.orbCells)}openTalentsModal(e){this.freeTalentResets=this.selectedAnimal.freeTalentResetCount;var i=this.lookupService.getTalentResetCost(this.selectedAnimal.type);this.talentResetCost=i.toLocaleString()+" Coins",this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openBaseStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openRacingStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openMiscStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openItemModal(e){this.setupDisplayItems(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()},r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()})}openEquipmentModal(e){this.setupDisplayEquipment(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()},r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()})}openOrbModal(e){this.setupDisplayOrbs(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()},r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()})}useItem(){if(void 0!==this.selectedItem){var e="Nectar of the Gods"===this.selectedItem.name,i=this.globalService.globalVar.resources.find(d=>d.name===this.selectedItem.name&&d.itemType===this.selectedItem.itemType);if(void 0===i&&!e)return void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");if(null==this.selectedItemQuantity||isNaN(Number(this.selectedItemQuantity)))return void alert("You must enter a numerical amount to use.");if(!e&&i.amount<this.selectedItemQuantity)return void alert("You don't have that many "+i.name+"!");if(this.selectedItem.itemType===Le.Consumable&&this.selectedItem.name.includes("Certificate")&&this.lookupService.isAmountMoreThanCertificateCap(this.selectedItemQuantity,this.selectedAnimal,this.selectedItem.name))return void alert("This amount will exceed the amount of these certificates you can give your animal.");if(e||(i.amount-=this.selectedItemQuantity),this.selectedItem.itemType===Le.Food)if("Mangoes"===this.selectedItem.name)this.selectedAnimal.breedLevel+=+this.selectedItemQuantity,null==this.selectedAnimal.mangoesUsed&&(this.selectedAnimal.mangoesUsed=0),this.selectedAnimal.mangoesUsed+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal);else if("Gingko Leaves"===this.selectedItem.name)this.selectedAnimal.previousBreedLevel=this.selectedAnimal.breedLevel,this.selectedAnimal.breedLevel=1,this.selectedAnimal.breedGaugeMax=200,this.selectedAnimal.breedGaugeXp=0,this.selectedAnimal.incubatorStatUpgrades=new Ed;else{var r=new It(0,0,0,0,0,0);"Apples"===this.selectedItem.name&&(r.acceleration=this.selectedItemQuantity),"Bananas"===this.selectedItem.name&&(r.topSpeed=this.selectedItemQuantity),"Strawberries"===this.selectedItem.name&&(r.endurance=this.selectedItemQuantity),"Carrots"===this.selectedItem.name&&(r.power=this.selectedItemQuantity),"Turnips"===this.selectedItem.name&&(r.focus=this.selectedItemQuantity),"Oranges"===this.selectedItem.name&&(r.adaptability=this.selectedItemQuantity),this.selectedAnimal.increaseStats(r),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}else if(this.selectedItem.itemType===Le.Consumable&&(this.selectedItemQuantity=+this.selectedItemQuantity,"Free Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+=+this.selectedItemQuantity),"Circuit Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces+=2*this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+=+this.selectedItemQuantity),"Training Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromTraining+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+=+this.selectedItemQuantity),"Diminishing Returns Increase Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.diminishingReturnsBonus+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal)),"Nectar of the Gods"===this.selectedItem.name)){var c,a=this.globalService.globalVar.resources.some(d=>"Orb Infuser"===d.name);c=null==this.selectedAnimal.equippedOrb?"You have not selected an orb and so no orb will improve when using this. If you did not intentionally do this, cancel this and select an orb for this animal. Continue?":"Your selected orb is the "+this.selectedAnimal.equippedOrb.name+". It will receive a "+this.globalService.getNectarOfTheGodsOrbInfusionIncrease(this.selectedAnimal).toFixed(2)+"% increase per level. Continue?",(!a||a&&confirm(c))&&this.globalService.handleNectarOfTheGodsReset(this.selectedAnimal)}this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()}}selectItem(e){this.selectedItem=e,this.usableItemsList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}clearSelectedItems(){this.usableItemsList.forEach(e=>{e.isSelected=!1})}clearSelectedEquipment(){this.equipmentList.forEach(e=>{e.isSelected=!1})}clearSelectedOrb(){this.orbList.forEach(e=>{e.isSelected=!1})}equipItem(){void 0!==this.selectedEquipment&&(this.selectedAnimal.equippedItem=this.selectedEquipment,this.updateEquipmentList(),this.clearSelectedEquipment(),this.modalService.dismissAll(),this.selectedEquipment=void 0)}selectEquipment(e){this.selectedEquipment=e,this.equipmentList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}unequipItem(){this.selectedAnimal.equippedItem=null,this.clearSelectedEquipment(),this.updateEquipmentList()}equipOrb(){void 0!==this.selectedOrb&&(this.selectedAnimal.equippedOrb=this.selectedOrb,this.updateOrbList(),this.clearSelectedOrb(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal),this.modalService.dismissAll(),this.selectedOrb=void 0)}selectOrb(e){this.selectedOrb=e,this.orbList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}unequipOrb(){this.selectedAnimal.equippedOrb=null,this.clearSelectedOrb(),this.updateOrbList(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}getTopSpeedPopover(){return this.lookupService.topSpeedPopover(this.selectedAnimal)}getAccelerationPopover(){return this.lookupService.accelerationPopover(this.selectedAnimal)}getEndurancePopover(){return this.lookupService.endurancePopover(this.selectedAnimal)}getPowerPopover(){return this.lookupService.powerPopover(this.selectedAnimal)}getFocusPopover(){return this.lookupService.focusPopover(this.selectedAnimal)}getAdaptabilityPopover(){return this.lookupService.adaptabilityPopover(this.selectedAnimal)}getAbilityLevelPopover(){return this.lookupService.abilityLevelPopover(this.selectedAnimal)}getBonusFreeRaceXpPopover(){return this.lookupService.bonusFreeRaceXpPopover(this.selectedAnimal)}getBonusCircuitRaceXpPopover(){return this.lookupService.bonusCircuitRaceXpPopover(this.selectedAnimal)}getBonusTrainingXpPopover(){return this.lookupService.bonusTrainingXpPopover(this.selectedAnimal)}getBonusDiminishingReturnsPerFacilityLevelPopover(){return this.lookupService.bonusDiminishingReturnsPerFacilityLevelPopover(this.selectedAnimal)}getBonusTrainingTimeReductionPopover(){return this.lookupService.bonusTrainingTimeReductionPopover(this.selectedAnimal)}getBonusTalentsPopover(){return this.lookupService.bonusTalentsPopover(this.selectedAnimal)}getBonusAbilityEfficiencyPopover(){return this.lookupService.bonusAbilityEfficiencyPopover(this.selectedAnimal)}getBonusOrbXpPopover(){return this.lookupService.bonusOrbXpPopover(this.selectedAnimal)}getAbilityPopover(){return this.lookupService.abilityPopover()}getDiminishingReturnsPopover(){return"Once a trainable stat is over this number, additional gains in this stat will be reduced. Increase with Facility Level."}getEquipmentShortDescription(e){return this.globalService.getEquipmentDescription(e)}getItemShortDescription(e){return this.globalService.getItemDescription(e,this.selectedAnimal)}itemHasAdditionalText(e){return!(e.itemType!==Le.Consumable||!e.name.includes("Certificate"))}getItemAdditionalText(e){var i="";return e.itemType===Le.Consumable&&e.name.includes("Certificate")&&("Free Race Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Circuit Race Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Training Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Diminishing Returns Increase Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>")),this.utilityService.getSanitizedHtml(i)}handleIntroTutorial(){var e=this.globalService.globalVar.animals.find(i=>i.type===Fe.Hare);!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&9===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}goToAssignedBarn(){var e=this.globalService.globalVar.barns.find(i=>i.barnNumber===this.selectedAnimal.associatedBarnNumber);null!=e&&this.componentCommunicationService.setBarnView(Mi.barn,e.barnNumber)}filterTalentTree(e){this.selectedTalentTree=e,this.inDepthTalentTreeDescription=this.lookupService.getInDepthTalentTreeDescription(e)}selectTalentTree(){""!==this.selectedTalentTree&&null!=this.selectedTalentTree?this.selectedAnimal.talentTree.talentTreeType=this.lookupService.convertTalentTreeNameToEnum(this.selectedTalentTree):alert("You must select a talent tree.")}resetSelectedAnimalInfo(e){var i=this;this.selectedAnimal=e,this.areTalentsAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.orbIsUnlocked=this.lookupService.isItemUnlocked("orbs")&&this.selectedAnimal.canEquipOrb,this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal);var r=this.lookupService.getStockbreeder();null!=r&&r>0&&(this.canAutoBreed=!0),this.canAutoBreed&&(this.autoBreedActive=this.selectedAnimal.autoBreedActive),this.ability1=this.selectedAnimal.availableAbilities[0],this.selectedAnimal.availableAbilities.length>1&&(this.ability2=this.selectedAnimal.availableAbilities[1]),this.selectedAnimal.availableAbilities.length>2&&(this.ability3=this.selectedAnimal.availableAbilities[2]),this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal),null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.updateItemsList(),this.updateEquipmentList(),this.updateOrbList(),this.selectedTalentTree="",this.inDepthTalentTreeDescription="",this.componentCommunicationService.setAnimalView(Mi.animals,e);var a=this.globalService.globalVar.barns.find(c=>c.barnNumber===this.selectedAnimal.associatedBarnNumber);this.assignedBarnName=null==a?"Unassigned":"Assigned to: "+this.lookupService.getBarnName(a),this.areTalentsAvailable&&(this.talentTreeOptions=this.lookupService.getTalentTreeNames(),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var c=Wa(function*(d){i.canBreed=i.canAnimalBreed()});return function(d){return c.apply(this,arguments)}}())}getTalentTreeName(){var e=this.selectedAnimal.talentTree.getTotalSpentPoints();return this.lookupService.getTalentTreeNameByEnum(this.selectedAnimal.talentTree.talentTreeType)+" Level "+e}resetTalents(){var i="Future resets for this animal will be more expensive.";if(0===(e=this.lookupService.getTalentResetCost(this.selectedAnimal.type))&&(i=""),this.lookupService.getCoins()>=e&&confirm("This will refund all talent points and allow you to reselect your specialization. "+i+"  Continue?")){this.lookupService.spendCoins(this.lookupService.getTalentResetCost(this.selectedAnimal.type)),this.selectedAnimal.talentTree.reset(),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.selectedAnimal.freeTalentResetCount>0?(this.selectedAnimal.freeTalentResetCount-=1,this.selectedAnimal.freeTalentResetCount<0&&(this.selectedAnimal.freeTalentResetCount=0)):this.selectedAnimal.talentResetCount+=1,this.freeTalentResets=this.selectedAnimal.freeTalentResetCount;var e=this.lookupService.getTalentResetCost(this.selectedAnimal.type);this.talentResetCost=e.toLocaleString()+" Coins"}}getBorderConditional(e,i){var r,a=e+1,c=0;1===a&&(c=this.selectedAnimal.talentTree.row2RequiredPoints),2===a&&(c=this.selectedAnimal.talentTree.row3RequiredPoints),3===a&&(c=this.selectedAnimal.talentTree.row4RequiredPoints);var d=c-this.selectedAnimal.talentTree.getTalentPointsByColumn(i);return"Flatland"===this.selectedAnimal.getRaceCourseType()&&(d>=5?r={"completedFlatlandTalentSpacer height0":!0}:4===d?r={"completedFlatlandTalentSpacer height1":!0}:3===d?r={"completedFlatlandTalentSpacer height2":!0}:2===d?r={"completedFlatlandTalentSpacer height3":!0}:1===d?r={"completedFlatlandTalentSpacer height4":!0}:d<=0&&(r={"completedFlatlandTalentSpacer height5":!0})),"Mountain"===this.selectedAnimal.getRaceCourseType()&&(d>=5?r={"completedMountainTalentSpacer height0":!0}:4===d?r={"completedMountainTalentSpacer height1":!0}:3===d?r={"completedMountainTalentSpacer height2":!0}:2===d?r={"completedMountainTalentSpacer height3":!0}:1===d?r={"completedMountainTalentSpacer height4":!0}:d<=0&&(r={"completedMountainTalentSpacer height5":!0})),"Ocean"===this.selectedAnimal.getRaceCourseType()&&(d>=5?r={"completedOceanTalentSpacer height0":!0}:4===d?r={"completedOceanTalentSpacer height1":!0}:3===d?r={"completedOceanTalentSpacer height2":!0}:2===d?r={"completedOceanTalentSpacer height3":!0}:1===d?r={"completedOceanTalentSpacer height4":!0}:d<=0&&(r={"completedOceanTalentSpacer height5":!0})),"Tundra"===this.selectedAnimal.getRaceCourseType()&&(d>=5?r={"completedTundraTalentSpacer height0":!0}:4===d?r={"completedTundraTalentSpacer height1":!0}:3===d?r={"completedTundraTalentSpacer height2":!0}:2===d?r={"completedTundraTalentSpacer height3":!0}:1===d?r={"completedTundraTalentSpacer height4":!0}:d<=0&&(r={"completedTundraTalentSpacer height5":!0})),"Volcanic"===this.selectedAnimal.getRaceCourseType()&&(d>=5?r={"completedVolcanicTalentSpacer height0":!0}:4===d?r={"completedVolcanicTalentSpacer height1":!0}:3===d?r={"completedVolcanicTalentSpacer height2":!0}:2===d?r={"completedVolcanicTalentSpacer height3":!0}:1===d?r={"completedVolcanicTalentSpacer height4":!0}:d<=0&&(r={"completedVolcanicTalentSpacer height5":!0})),r}spentTalent(e){this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)}orbColorConditional(e){var i=this.globalService.getOrbTypeFromResource(e);return{amberColor:i===Ot.amber,amethystColor:i===Ot.amethyst,rubyColor:i===Ot.ruby,sapphireColor:i===Ot.sapphire,topazColor:i===Ot.topaz,emeraldColor:i===Ot.emerald}}viewOrbDetails(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setAnimal(new Ti)}}return t.\u0275fac=function(e){return new(e||t)(Me(yn),Me(ss),Me(ki),Me(qr),Me(Lr),Me(jr))},t.\u0275cmp=mi({type:t,selectors:[["app-selected-animal"]],hostBindings:function(e,i){1&e&&_e("keyup",function(a){return i.keyEvent(a)},!1,Do)},inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:232,vars:115,consts:[[1,"selectedAnimalView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"equippable"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"spaced",3,"click"],["class","talents",4,"ngIf"],[1,"animalInfo"],[3,"ngClass"],[1,"keyword"],[1,"clickableText","buttonAsText",3,"click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[3,"click"],[3,"callbackFunction","label","model",4,"ngIf"],[1,"back"],["class","orb",4,"ngIf"],[1,"gridContainer"],[1,"trainableStats"],[1,"s4Heading"],[1,"tooltipIcon",3,"click"],[1,"racingStats"],[1,"miscStats"],[1,"abilities"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"s4Heading",3,"ngbPopover"],[1,"ability1","s5Heading","clickableText","buttonAsText",3,"click"],["class","ability2 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],["class","ability3 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],[1,"abilityXp"],[3,"innerHTML"],["topSpeedPopoverContent",""],["accelerationPopoverContent",""],["endurancePopoverContent",""],["powerPopoverContent",""],["focusPopoverContent",""],["adaptabilityPopoverContent",""],["abilityLevelPopoverContent",""],["bonusFreeRaceXpPopoverContent",""],["bonusCircuitRaceXpPopoverContent",""],["bonusTrainingXpPopoverContent",""],["bonusDiminishingReturnsPerFacilityLevelPopoverContent",""],["bonusTrainingTimeReductionPopoverContent",""],["bonusTalentsPopoverContent",""],["bonusAbilityEfficiencyPopoverContent",""],["bonusOrbXpPopoverContent",""],["content",""],["equipment",""],["orb",""],["talentsContent",""],["orbDetailsContent",""],["baseStatsContent",""],["racingStatsContent",""],["miscStatsContent",""],[1,"equipmentKeyword"],[1,"talents"],["class","keyword",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"name","keyword"],[1,"editName",3,"click"],["id","newName","name","newName","maxlength","50",3,"ngModel","ngModelChange"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],["id","newName","name","newName","minlength","1","maxlength","50",3,"ngModel","ngModelChange"],[3,"callbackFunction","label","model"],[1,"orb"],[1,"keyword",3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],[1,"ability2","s5Heading","clickableText","buttonAsText",3,"click"],[1,"ability3","s5Heading","clickableText","buttonAsText",3,"click"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"selectableItem",3,"ngClass","click"],[1,"resourceKeyword"],[1,"modal-footer"],[1,"selectedItemSpan"],[1,"rightAlign"],["for","deck-name"],["id","deck-name","type","text",1,"spaced",3,"ngModel","ngModelChange"],["type","button",1,"spaced",3,"click"],[1,"equipmentContainer"],[1,"selectableEquipment",3,"ngClass","click"],[1,"selectedEquipmentSpan"],[1,"orbDetails"],["type","button","aria-label","View Orb Details",3,"click"],[1,"orbContainer"],[1,"selectableOrb",3,"ngClass","click"],[1,"selectedOrbSpan"],["class","modal-body",4,"ngIf"],["type","button",3,"click"],[1,"typeContainer"],["class","talents subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"talents","subHeading",3,"ngClass","click"],[1,"rightTextAlign"],[1,"centered"],[1,"modal-body","talentPreview"],["class","talentRow",4,"ngFor","ngForOf"],[1,"talentRow"],[1,"rowFlex"],["class","talentColumn",4,"ngFor","ngForOf"],[1,"talentColumn"],[3,"row","column","selectedAnimal","isPreview","previewType","spentTalent"],[1,"talentSpacer"],["class","defaultTalentSpacer",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"defaultTalentSpacer"],[1,"talentInfo"],[1,"spaced",3,"disabled","click"],[3,"row","column","selectedAnimal","spentTalent"],[1,"modalClass","orbContent"],[1,"baseStats"]],template:function(e,i){if(1&e){const r=tt();D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),pe(6,Wz,7,3,"div",5),pe(7,Xz,2,0,"div",6),he(8,"br"),pe(9,Yz,2,0,"button",7),D(10,"button",8),_e("click",function(){me(r);const c=Qt(219);return i.openEquipmentModal(c)}),F(11,"Equip New Item"),M()(),he(12,"br"),pe(13,Zz,5,1,"div",9),M(),D(14,"div",10)(15,"div",11),pe(16,tj,6,4,"div",6),pe(17,aj,6,4,"div",6),D(18,"span",12),F(19),M(),he(20,"br"),M(),D(21,"button",13),_e("click",function(){return i.goToAssignedBarn()}),F(22),pe(23,oj,2,1,"em",6),M(),he(24,"br"),D(25,"span",14),F(26),M(),he(27,"br"),D(28,"span",14),F(29),Di(30,"number"),D(31,"button",15),_e("click",function(){return i.breed()}),F(32,"Breed"),M()(),he(33,"br"),D(34,"button",16),_e("click",function(){me(r);const c=Qt(217);return i.openItemModal(c)}),F(35,"Use Item"),M(),he(36,"br"),pe(37,sj,1,3,"app-toggle",17),M(),D(38,"div",18)(39,"div")(40,"button",16),_e("click",function(){return i.returnToAnimalView()}),F(41,"Back"),M()(),he(42,"br"),pe(43,dj,7,3,"div",19),M()(),he(44,"hr"),D(45,"div",20)(46,"div",21)(47,"span",22),F(48,"Base Stats "),D(49,"span",23),_e("click",function(){me(r);const c=Qt(227);return i.openBaseStatsModal(c)}),F(50,"?"),M()(),he(51,"br")(52,"br"),D(53,"span",14)(54,"span",12),F(55,"Speed:"),M(),F(56),Di(57,"number"),M(),he(58,"br"),D(59,"span",14)(60,"span",12),F(61,"Acceleration:"),M(),F(62),Di(63,"number"),M(),he(64,"br"),D(65,"span",14)(66,"span",12),F(67,"Endurance:"),M(),F(68),Di(69,"number"),M(),he(70,"br"),D(71,"span",14)(72,"span",12),F(73,"Power:"),M(),F(74),Di(75,"number"),M(),he(76,"br"),D(77,"span",14)(78,"span",12),F(79,"Focus:"),M(),F(80),Di(81,"number"),M(),he(82,"br"),D(83,"span",14)(84,"span",12),F(85,"Adaptability:"),M(),F(86),Di(87,"number"),M(),he(88,"br"),D(89,"span",14)(90,"span",12),F(91,"Diminishing Returns:"),M(),F(92),Di(93,"number"),M()(),D(94,"div",24)(95,"span",22),F(96,"Racing Stats "),D(97,"span",23),_e("click",function(){me(r);const c=Qt(229);return i.openRacingStatsModal(c)}),F(98,"?"),M()(),he(99,"br")(100,"br"),D(101,"span",14)(102,"span",12),F(103,"Max Speed:"),M(),F(104),Di(105,"number"),M(),he(106,"br"),D(107,"span",14)(108,"span",12),F(109,"Acceleration Rate:"),M(),F(110),Di(111,"number"),M(),he(112,"br"),D(113,"span",14)(114,"span",12),F(115,"Stamina:"),M(),F(116),Di(117,"number"),M(),he(118,"br"),D(119,"span",14)(120,"span",12),F(121,"Power Efficiency:"),M(),F(122),Di(123,"number"),M(),he(124,"br"),D(125,"span",14)(126,"span",12),F(127,"Focus Distance:"),M(),F(128),Di(129,"number"),M(),he(130,"br"),D(131,"span",14)(132,"span",12),F(133,"Adaptability Distance:"),M(),F(134),Di(135,"number"),M(),he(136,"br"),D(137,"span",14)(138,"span",12),F(139,"Burst Chance:"),M(),F(140),Di(141,"number"),M(),he(142,"br"),D(143,"span",14)(144,"span",12),F(145,"Burst Distance:"),M(),F(146),Di(147,"number"),M()(),D(148,"div",25)(149,"span",22),F(150,"Miscellaneous Stats "),D(151,"span",23),_e("click",function(){me(r);const c=Qt(231);return i.openMiscStatsModal(c)}),F(152,"?"),M()(),he(153,"br")(154,"br"),pe(155,fj,7,5,"div",6),pe(156,hj,6,5,"div",6),pe(157,pj,6,5,"div",6),pe(158,gj,6,5,"div",6),pe(159,vj,6,5,"div",6),pe(160,mj,6,5,"div",6),pe(161,bj,6,5,"div",6),pe(162,_j,6,5,"div",6),M()(),D(163,"div",26)(164,"p")(165,"span",27),F(166,"Abilities"),M(),he(167,"br"),D(168,"span")(169,"em"),F(170,"Your animal will use the ability you select below."),M()()(),D(171,"div")(172,"div")(173,"button",28),_e("click",function(){return i.selectAbility(i.ability1)}),F(174),M(),pe(175,yj,2,3,"button",29),pe(176,wj,2,3,"button",30),M(),he(177,"br"),D(178,"p")(179,"span",14),F(180),D(181,"span",31),pe(182,Sj,2,2,"span",6),pe(183,Cj,2,0,"span",6),M()(),he(184,"br")(185,"span",32),M()()()()()(),pe(186,Tj,2,1,"ng-template",null,33,ni),pe(188,Mj,2,1,"ng-template",null,34,ni),pe(190,xj,2,1,"ng-template",null,35,ni),pe(192,Rj,2,1,"ng-template",null,36,ni),pe(194,Dj,2,1,"ng-template",null,37,ni),pe(196,kj,2,1,"ng-template",null,38,ni),pe(198,Aj,2,1,"ng-template",null,39,ni),pe(200,Pj,2,1,"ng-template",null,40,ni),pe(202,Ej,2,1,"ng-template",null,41,ni),pe(204,Ij,2,1,"ng-template",null,42,ni),pe(206,Bj,2,1,"ng-template",null,43,ni),pe(208,Oj,2,1,"ng-template",null,44,ni),pe(210,Vj,2,1,"ng-template",null,45,ni),pe(212,Nj,2,1,"ng-template",null,46,ni),pe(214,Fj,2,1,"ng-template",null,47,ni),pe(216,$j,9,2,"ng-template",null,48,ni),pe(218,Qj,14,3,"ng-template",null,49,ni),pe(220,rq,17,3,"ng-template",null,50,ni),pe(222,yq,9,2,"ng-template",null,51,ni),pe(224,wq,8,0,"ng-template",null,52,ni),pe(226,Sq,42,7,"ng-template",null,53,ni),pe(228,Cq,47,8,"ng-template",null,54,ni),pe(230,Tq,37,6,"ng-template",null,55,ni)}if(2&e){const r=Qt(187),a=Qt(189),c=Qt(191),d=Qt(193),m=Qt(195),_=Qt(197),T=Qt(199);V(6),Y("ngIf",null!=i.selectedAnimal.equippedItem),V(1),Y("ngIf",null==i.selectedAnimal.equippedItem),V(2),Y("ngIf",null!=i.selectedAnimal.equippedItem),V(4),Y("ngIf",i.areTalentsAvailable),V(2),Y("ngClass",i.colorConditional),V(1),Y("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),V(1),Y("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),V(2),Kt(i.selectedAnimal.getRaceCourseType()),V(3),He("",i.assignedBarnName," "),V(1),Y("ngIf",null!=i.selectedAnimal.currentTraining),V(2),Ia("ngbPopover",i.breedLevelPopover),V(1),He("Breed Level ",i.selectedAnimal.breedLevel,""),V(2),Y("ngbPopover",i.breedDescriptionPopover),V(1),Mn("Breed XP: ",Yi(30,67,i.selectedAnimal.breedGaugeXp,"1.2-2"),"/",i.selectedAnimal.breedGaugeMax," "),V(2),Y("disabled",!i.canBreed),V(6),Y("ngIf",i.canAutoBreed),V(6),Y("ngIf",i.orbIsUnlocked&&i.orbFunctionalityReleased),V(10),Y("ngbPopover",r),V(3),He(" ",Yi(57,70,i.selectedAnimal.currentStats.topSpeed,"1.2-2")," "),V(3),Y("ngbPopover",a),V(3),He(" ",Yi(63,73,i.selectedAnimal.currentStats.acceleration,"1.2-2")," "),V(3),Y("ngbPopover",c),V(3),He(" ",Yi(69,76,i.selectedAnimal.currentStats.endurance,"1.2-2")," "),V(3),Y("ngbPopover",d),V(3),He(" ",Yi(75,79,i.selectedAnimal.currentStats.power,"1.2-2")," "),V(3),Y("ngbPopover",m),V(3),He(" ",Yi(81,82,i.selectedAnimal.currentStats.focus,"1.2-2")," "),V(3),Y("ngbPopover",_),V(3),He(" ",Yi(87,85,i.selectedAnimal.currentStats.adaptability,"1.2-2")," "),V(3),Ia("ngbPopover",i.getDiminishingReturnsPopover()),V(3),He(" ",Yi(93,88,i.diminishingReturnsAmount,"1.0-0")," "),V(9),Ia("ngbPopover",i.selectedAnimal.currentStats.maxSpeedMsPopover()),V(3),He(" ",Yi(105,91,i.selectedAnimal.currentStats.maxSpeedMs,"1.2-2")," m/s "),V(3),Ia("ngbPopover",i.selectedAnimal.currentStats.accelerationMsPopover()),V(3),He(" ",Yi(111,94,i.selectedAnimal.currentStats.accelerationMs,"1.2-2")," m/s\xb2 "),V(3),Ia("ngbPopover",i.selectedAnimal.currentStats.staminaPopover()),V(3),He(" ",Yi(117,97,i.selectedAnimal.currentStats.stamina,"1.2-2")," "),V(3),Ia("ngbPopover",i.selectedAnimal.currentStats.powerMsPopover()),V(3),He(" ",Yi(123,100,i.selectedAnimal.currentStats.powerMs,"1.2-2"),"% "),V(3),Ia("ngbPopover",i.selectedAnimal.currentStats.focusMsPopover()),V(3),He(" ~",Yi(129,103,i.selectedAnimal.currentStats.focusMs,"1.2-2")," m "),V(3),Ia("ngbPopover",i.selectedAnimal.currentStats.adaptabilityMsPopover()),V(3),He(" ~",Yi(135,106,i.selectedAnimal.currentStats.adaptabilityMs,"1.2-2")," m "),V(3),Ia("ngbPopover",i.selectedAnimal.currentStats.burstChancePopover()),V(3),He(" ",Yi(141,109,i.selectedAnimal.currentStats.burstChance,"1.2-2"),"% "),V(3),Ia("ngbPopover",i.selectedAnimal.currentStats.burstDistancePopover()),V(3),He(" ",Yi(147,112,i.selectedAnimal.currentStats.burstDistance,"1.2-2")," m "),V(9),Y("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromTraining>0),V(1),Y("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces>0),V(1),Y("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces>0),V(1),Y("ngIf",i.selectedAnimal.miscStats.trainingTimeReduction>0),V(1),Y("ngIf",i.selectedAnimal.miscStats.diminishingReturnsBonus>0),V(1),Y("ngIf",i.selectedAnimal.miscStats.bonusTalents>0),V(1),Y("ngIf",i.selectedAnimal.miscStats.bonusAbilityEfficiency>0),V(1),Y("ngIf",i.selectedAnimal.miscStats.bonusOrbXp>0),V(3),Y("ngbPopover",i.getAbilityPopover()),V(8),Ii("filterActive",i.selectedAnimal.ability.name===i.ability1.name),V(1),He("",i.ability1.name," "),V(1),Y("ngIf",i.ability2.isAbilityPurchased),V(1),Y("ngIf",i.ability3.isAbilityPurchased),V(3),Y("ngbPopover",T),V(1),He("Level ",i.selectedAbility.abilityLevel," "),V(2),Y("ngIf",!i.abilityLevelMaxedOut),V(1),Y("ngIf",i.abilityLevelMaxedOut),V(2),Y("innerHTML",i.longDescription,Si)}},directives:[on,no,_r,Us,Ll,Hs,Gs,Xh,Az,qh,Vh,bd,Vr,Nz,Nx],pipes:[ts],styles:['.selectedAnimalView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.animalInfo[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:animalInfo}.back[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:back;justify-content:space-between;flex-direction:column;display:flex}.equippable[_ngcontent-%COMP%]{justify-content:space-between;flex-direction:column;display:flex;grid-area:equippable}.marginGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.filterActive[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor;color:var(--foreground-secondary)}.info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"equippable animalInfo back"}.gridContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-items:center;justify-content:stretch;grid-template-areas:"trainingStats racingStats miscStats"}.trainableStats[_ngcontent-%COMP%]{justify-self:left;grid-area:trainingStats}.racingStats[_ngcontent-%COMP%]{grid-area:racingStats}.miscStats[_ngcontent-%COMP%]{grid-area:miscStats}.centered[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.editName[_ngcontent-%COMP%]{width:4rem}.name[_ngcontent-%COMP%]{margin-left:4rem}.selectedEquipmentSpan[_ngcontent-%COMP%], .selectedOrbSpan[_ngcontent-%COMP%], .selectedItemSpan[_ngcontent-%COMP%]{width:100%}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.rightTextAlign[_ngcontent-%COMP%]{text-align:right}.rightAlign[_ngcontent-%COMP%]{float:right}.orbDetails[_ngcontent-%COMP%]{width:20%;display:flex;justify-content:space-between}.ability1[_ngcontent-%COMP%], .ability2[_ngcontent-%COMP%], .ability3[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.typeContainer[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-evenly}.talentTreeType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedTalentTree[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid;text-decoration:underline solid}.rowFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.abilityXp[_ngcontent-%COMP%]{margin-left:2.5rem}.talentColumn[_ngcontent-%COMP%]{width:31.75%}.talentContent[_ngcontent-%COMP%]{height:calc(100% - 5rem);height:-o-calc(100% - 5rem);border:1px solid rgba(0,0,0,.1)}.lastTalentContent[_ngcontent-%COMP%]{height:100%;border:1px solid rgba(0,0,0,.1)}.talentInfo[_ngcontent-%COMP%]{text-align:center}.talentSpacer[_ngcontent-%COMP%]{display:grid;grid-template:1fr / 1fr;place-items:center}.defaultTalentSpacer[_ngcontent-%COMP%]{height:5rem;border-right:solid thick rgba(0,0,0,.1);grid-column:1 / 1;grid-row:1 / 1;z-index:1}.completedFlatlandTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--flatlandColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedMountainTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--mountainColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedOceanTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--waterColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedTundraTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--tundraColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedVolcanicTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--volcanicColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.height0[_ngcontent-%COMP%]{height:0}.height1[_ngcontent-%COMP%]{height:1rem}.height2[_ngcontent-%COMP%]{height:2rem}.height3[_ngcontent-%COMP%]{height:3rem}.height4[_ngcontent-%COMP%]{height:4rem}.height5[_ngcontent-%COMP%]{height:5rem}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}.activeSelectedItem[_ngcontent-%COMP%], .activeSelectedEquipment[_ngcontent-%COMP%], .activeSelectedOrb[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.selectableItem[_ngcontent-%COMP%], .selectableOrb[_ngcontent-%COMP%], .selectableEquipment[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem;margin-top:.25rem}.tooltipIcon[_ngcontent-%COMP%]{display:none}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}@media (max-width: 800px){.info[_ngcontent-%COMP%], .gridContainer[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr 1fr}.tooltipIcon[_ngcontent-%COMP%]{display:inline-block}}']}),t})();function xq(t,n){1&t&&(D(0,"div",4)(1,"h2"),F(2,"Animals"),M(),D(3,"div",5),F(4," Select an animal to view its stats, change abilities, and more. "),M(),he(5,"hr"),M())}function Rq(t,n){if(1&t){const e=tt();D(0,"div",6)(1,"app-animal-list",7),_e("selectedAnimal",function(r){return me(e),K().selectedAnimal(r)}),M()()}if(2&t){const e=K();V(1),Y("availableAnimals",e.availableAnimals)("isAnimalDetailView",!0)}}function Dq(t,n){if(1&t){const e=tt();D(0,"div",8)(1,"app-selected-animal",9),_e("returnEmitter",function(r){return me(e),K().returnToAnimalView(r)}),M()()}if(2&t){const e=K();V(1),Y("selectedAnimal",e.animal)}}let kq=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(Mi.animals),this.availableAnimals=this.globalService.globalVar.animals.filter(e=>e.isAvailable),this.subscription=this.componentCommunicationService.getAnimalView().subscribe(e=>{null!=e.type?(this.animalSelected=!0,this.animal=e):this.animalSelected=!1})}selectedAnimal(e){this.animalSelected=!0,this.animal=e,this.componentCommunicationService.setAnimalView(Mi.animals,this.animal)}returnToAnimalView(e){this.animalSelected=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(qr))},t.\u0275cmp=mi({type:t,selectors:[["app-animals-view"]],decls:4,vars:3,consts:[[1,"animalsView"],["class","info",4,"ngIf"],["class","listView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"info"],[1,"description"],[1,"listView"],[3,"availableAnimals","isAnimalDetailView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(D(0,"div",0),pe(1,xq,6,0,"div",1),pe(2,Rq,2,2,"div",2),pe(3,Dq,2,1,"div",3),M()),2&e&&(V(1),Y("ngIf",!i.animalSelected),V(1),Y("ngIf",!i.animalSelected),V(1),Y("ngIf",i.animalSelected))},directives:[on,V0,Mq],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;overflow:hidden;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{width:100%;height:100%}.info[_ngcontent-%COMP%]{text-align:center}.selectedView[_ngcontent-%COMP%]{height:100%;overflow:auto}"]}),t})();function Aq(t,n){if(1&t){const e=tt();D(0,"button",17),_e("click",function(){me(e);const r=K().$implicit;return K().setAsAutoRunFreeRace(r)}),F(1,"Auto Run Free Race"),M()}}function Pq(t,n){if(1&t){const e=tt();D(0,"button",18),_e("click",function(){me(e);const r=K().$implicit;return K().setAsEventDeck(r)}),F(1,"Set as Event Team"),M()}}function Eq(t,n){if(1&t){const e=tt();D(0,"div")(1,"div",7),he(2,"app-animal-deck",8),D(3,"div",9)(4,"button",10),_e("click",function(){const a=me(e).$implicit,c=K(),d=Qt(11);return c.editDeck(d,a)}),F(5,"Edit"),M()(),D(6,"div",11)(7,"button",12),_e("click",function(){const a=me(e).$implicit;return K().setAsPrimary(a)}),F(8,"Set as Primary Team"),M()(),D(9,"div",13),pe(10,Aq,2,0,"button",14),M(),D(11,"div",15),pe(12,Pq,2,0,"button",16),M()(),he(13,"hr"),M()}if(2&t){const e=n.index,i=K();V(2),Y("deckNumber",e+1),V(8),Y("ngIf",i.showAutoRaceButton),V(2),Y("ngIf",i.showEventButton)}}function Iq(t,n){if(1&t){const e=tt();D(0,"div",35)(1,"em"),F(2,"When this box is checked, this order will be enforced. Drag a course type on top of another to swap their position."),M(),he(3,"br"),D(4,"input",36),_e("input",function(){return me(e),K(2).toggleRaceOrder()}),M(),D(5,"label",37),_e("click",function(){return me(e),K(2).toggleRaceOrder()}),F(6,"Race Order: "),M(),D(7,"span")(8,"span",38),_e("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropCourseType(r)}),F(9),M(),F(10," / "),D(11,"span",39),_e("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropCourseType(r)}),F(12),M(),F(13," / "),D(14,"span",40),_e("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropCourseType(r)}),F(15),M(),F(16," / "),D(17,"span",41),_e("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropCourseType(r)}),F(18),M(),F(19," / "),D(20,"span",42),_e("dragstart",function(r){return me(e),K(2).dragStart(r)})("dragover",function(r){return me(e),K(2).allowDrop(r)})("drop",function(r){return me(e),K(2).dropCourseType(r)}),F(21),M()()()}if(2&t){const e=K(2);V(4),Y("checked",e.isRaceOrderOn),V(4),Y("ngClass",e.getColorClass(e.selectedDeckOrder[0])),V(1),Kt(e.selectedDeckOrder[0]),V(2),Y("ngClass",e.getColorClass(e.selectedDeckOrder[1])),V(1),Kt(e.selectedDeckOrder[1]),V(2),Y("ngClass",e.getColorClass(e.selectedDeckOrder[2])),V(1),Kt(e.selectedDeckOrder[2]),V(2),Y("ngClass",e.getColorClass(e.selectedDeckOrder[3])),V(1),Kt(e.selectedDeckOrder[3]),V(2),Y("ngClass",e.getColorClass(e.selectedDeckOrder[4])),V(1),Kt(e.selectedDeckOrder[4])}}const Bq=function(t,n,e,i,r,a){return{selectedCourseType:t,flatlandColor:n,mountainColor:e,waterColor:i,tundraColor:r,volcanicColor:a}};function Oq(t,n){if(1&t){const e=tt();D(0,"button",43),_e("click",function(){const a=me(e).$implicit;return K(2).filterType(a)}),F(1),M()}if(2&t){const e=n.$implicit,i=K(2);Y("ngClass",function d2(t,n,e,i,r,a,c,d,m){const _=Ha()+t,T=Et(),A=ko(T,_,e,i,r,a);return Pl(T,_+4,c,d)||A?bs(T,_+6,m?n.call(m,e,i,r,a,c,d):n(e,i,r,a,c,d)):Wu(T,_+6)}(2,Bq,i.selectedCourseType===e,"Flatland"===e,"Mountain"===e,"Ocean"===e,"Tundra"===e,"Volcanic"===e)),V(1),He(" ",e.trim()," ")}}const Vq=function(t){return{selectedAnimal:t}};function Nq(t,n){if(1&t){const e=tt();D(0,"button",44),_e("click",function(){const a=me(e).$implicit;return K(2).selectAnimal(a)}),F(1),M()}if(2&t){const e=n.$implicit,i=K(2);Y("ngClass",hi(2,Vq,i.selectedAnimalName===e)),V(1),He(" ",e.trim()," ")}}function Fq(t,n){if(1&t){const e=tt();D(0,"div",19)(1,"form",20)(2,"div",21)(3,"h4",22),F(4),M(),D(5,"button",23),_e("click",function(){return me(e).$implicit.dismiss()}),F(6,"X"),M()(),D(7,"div",24)(8,"div",25)(9,"label",26),F(10,"Relay Team Name: "),M(),he(11,"input",27),M(),pe(12,Iq,22,11,"div",28),he(13,"br")(14,"br"),D(15,"div",29),pe(16,Oq,2,9,"button",30),M(),he(17,"br"),D(18,"div",31),pe(19,Nq,2,4,"button",32),M()(),D(20,"div",33)(21,"button",34),_e("click",function(){return me(e),K().saveDeck()}),F(22,"Save"),M()()()()}if(2&t){const e=K();V(1),Y("formGroup",e.editDeckForm),V(3),He("Edit ",e.selectedDeck.name,""),V(8),Y("ngIf",e.displayRaceOrder),V(4),Y("ngForOf",e.raceCourseTypeList),V(3),Y("ngForOf",e.possibleAnimalsList)}}let Lq=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.modalService=i,this.lookupService=r,this.componentCommunicationService=a,this.raceCourseTypeList=[],this.displayRaceOrder=!1,this.editDeckForm=new jh({deckName:new im("")}),this.toggleRaceOrder=()=>{this.isRaceOrderOn=!this.isRaceOrderOn,this.selectedDeck.isCourseOrderActive=this.isRaceOrderOn}}ngOnInit(){this.componentCommunicationService.setNewView(Mi.relayTeams),this.isRaceOrderOn=!1,this.newAnimalList=[],this.animalDecks=this.globalService.globalVar.animalDecks,this.globalService.globalVar.animals.filter(r=>r.isAvailable).forEach(r=>{this.raceCourseTypeList.some(a=>a===r.getRaceCourseType())||this.raceCourseTypeList.push(r.getRaceCourseType())});var e=this.lookupService.getResourceByName("Scouts");null!=e&&e>0&&(this.displayRaceOrder=!0),this.selectedDeckOrder=[],this.selectedDeckOrder.push("Flatland"),this.selectedDeckOrder.push("Mountain"),this.selectedDeckOrder.push("Ocean"),this.selectedDeckOrder.push("Tundra"),this.selectedDeckOrder.push("Volcanic");var i=this.lookupService.getResourceByName("Team Manager");null==i&&(i=0),this.showAutoRaceButton=i>0,this.showEventButton=!!this.lookupService.isItemUnlocked("grandPrix")}editDeck(e,i){this.selectedDeck=i,this.newAnimalList=[],this.selectedAnimalName="",this.selectedCourseType="Flatland",this.isRaceOrderOn=i.isCourseOrderActive,null!=i.courseTypeOrder&&i.courseTypeOrder.length>0&&(this.selectedDeckOrder=[],i.courseTypeOrder.forEach(r=>{r===Ve.Flatland&&this.selectedDeckOrder.push("Flatland"),r===Ve.Mountain&&this.selectedDeckOrder.push("Mountain"),r===Ve.Ocean&&this.selectedDeckOrder.push("Ocean"),r===Ve.Tundra&&this.selectedDeckOrder.push("Tundra"),r===Ve.Volcanic&&this.selectedDeckOrder.push("Volcanic")})),this.filterType(this.selectedCourseType),i.selectedAnimals.length>0&&i.selectedAnimals.forEach(r=>{this.newAnimalList.push(r)}),this.editDeckForm.patchValue({deckName:i.name}),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}saveDeck(){var e,i,r,a,c,d,m,_,T=this.globalService.globalVar.animalDecks.find(be=>be.deckNumber===this.selectedDeck.deckNumber);if(null!=T&&((null===(e=this.editDeckForm.get("deckName"))||void 0===e?void 0:e.value.length)<=50&&(null===(i=this.editDeckForm.get("deckName"))||void 0===i?void 0:i.value.length)>=1&&(T.name=null===(r=this.editDeckForm.get("deckName"))||void 0===r?void 0:r.value),T.selectedAnimals=[],this.newAnimalList.forEach(be=>{null==T||T.selectedAnimals.push(be)}),null==T||T.selectedAnimals.sort(this.compare),this.displayRaceOrder&&this.isRaceOrderOn)){var A=[],q=null===(a=document.getElementById("raceOrder1"))||void 0===a?void 0:a.innerHTML,Q=null===(c=document.getElementById("raceOrder2"))||void 0===c?void 0:c.innerHTML,te=null===(d=document.getElementById("raceOrder3"))||void 0===d?void 0:d.innerHTML,oe=null===(m=document.getElementById("raceOrder4"))||void 0===m?void 0:m.innerHTML,de=null===(_=document.getElementById("raceOrder5"))||void 0===_?void 0:_.innerHTML;A.push(q),A.push(Q),A.push(te),A.push(oe),A.push(de),null!=T&&(T.courseTypeOrder=[]),A.forEach(be=>{"Flatland"===be&&(null==T||T.courseTypeOrder.push(Ve.Flatland)),"Mountain"===be&&(null==T||T.courseTypeOrder.push(Ve.Mountain)),"Ocean"===be&&(null==T||T.courseTypeOrder.push(Ve.Ocean)),"Tundra"===be&&(null==T||T.courseTypeOrder.push(Ve.Tundra)),"Volcanic"===be&&(null==T||T.courseTypeOrder.push(Ve.Volcanic))})}this.modalService.dismissAll()}compare(e,i){return e.raceCourseType>i.raceCourseType?1:i.raceCourseType>e.raceCourseType?-1:0}filterType(e){var i=this.lookupService.getAnimalsByRaceCourseType(e),r=[];i.length>0&&i.forEach(c=>{var d=this.globalService.globalVar.animals.find(m=>m.getAnimalType()===c);(null==d?void 0:d.isAvailable)&&r.push(d.getAnimalType())}),this.possibleAnimalsList=r,this.selectedCourseType=e;var a=this.selectedDeck.selectedAnimals.find(c=>c.getRaceCourseType()===e);null!=a&&(this.selectedAnimalName=a.getAnimalType())}selectAnimal(e){var i=this.globalService.globalVar.animals.find(c=>c.getAnimalType()===e);if(null!=i){var r=-1,a=i.getRaceCourseType();this.newAnimalList.forEach(c=>{c.getRaceCourseType()===a&&(r=this.newAnimalList.indexOf(c))}),r>=0&&this.newAnimalList.splice(r,1),this.selectedAnimalName===i.getAnimalType()?this.selectedAnimalName="":(this.newAnimalList.push(i),this.selectedAnimalName=i.getAnimalType())}}setAsPrimary(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.isPrimaryDeck=!1),r.isPrimaryDeck=!0)}setAsAutoRunFreeRace(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.autoRunFreeRace),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.autoRunFreeRace=!1),r.autoRunFreeRace=!0)}setAsEventDeck(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.isEventDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.isEventDeck=!1),r.isEventDeck=!0)}dragStart(e){this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id)}allowDrop(e){e.preventDefault()}dropCourseType(e){e.preventDefault(),e.stopPropagation();var i=e.dataTransfer.getData("text"),r=document.getElementById(i),a=e.target.innerHTML;if(null!==r&&null!==a){var m=this.selectedDeckOrder.indexOf(a),_=this.selectedDeckOrder.indexOf(null==r?void 0:r.innerHTML);this.selectedDeckOrder[m]=r.innerHTML,this.selectedDeckOrder[_]=a,e.target.innerHTML="",e.target.className="",e.target.append(r.innerHTML),r.innerHTML="",r.className="",r.append(a)}}getColorClass(e){return{flatlandColor:"Flatland"===e,mountainColor:"Mountain"===e,waterColor:"Ocean"===e,tundraColor:"Tundra"===e,volcanicColor:"Volcanic"===e}}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(ss),Me(yn),Me(qr))},t.\u0275cmp=mi({type:t,selectors:[["app-decks-view"]],decls:12,vars:1,consts:[[1,"decksView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"description"],[4,"ngFor","ngForOf"],["content",""],[1,"gridContainer"],[1,"deck",3,"deckNumber"],[1,"edit"],[1,"editButton",3,"click"],[1,"primary"],[1,"primaryButton",3,"click"],[1,"autoRunFreeRace"],["class","autoRunFreeRaceButton",3,"click",4,"ngIf"],[1,"event"],["class","eventButton",3,"click",4,"ngIf"],[1,"autoRunFreeRaceButton",3,"click"],[1,"eventButton",3,"click"],[1,"modalClass"],[3,"formGroup"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","deck-name"],["id","deck-name","type","text","maxlength","50","formControlName","deckName",1,"spaced"],["class","raceOrder",4,"ngIf"],[1,"typeContainer"],["class","raceType subHeading clickableText buttonAsTextKeepColor",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"animalContainer"],["class","animalOption clickableText buttonAsText",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",3,"click"],[1,"raceOrder"],["type","checkbox","id","finishTraining",1,"spaced",3,"checked","input"],[1,"spaced",3,"click"],["id","raceOrder1","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder2","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder3","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder4","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder5","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],[1,"raceType","subHeading","clickableText","buttonAsTextKeepColor",3,"ngClass","click"],[1,"animalOption","clickableText","buttonAsText",3,"ngClass","click"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),F(5,"Relay Teams"),M(),D(6,"div",4),F(7," Relay Teams are groups of animals that run together in a race. As you rise through the ranks, races will have multiple legs of varying terrain that require you to use different animals to succeed. Each Relay Team consists of one animal from each course type. Your primary Relay Team is the one that will run the races you select. "),M(),he(8,"hr"),M(),pe(9,Eq,14,3,"div",5),M()()(),pe(10,Fq,23,5,"ng-template",null,6,ni)),2&e&&(V(9),Y("ngForOf",i.animalDecks))},directives:[Vr,m1,on,qh,Vh,$h,Us,Ll,Hs,sm,_r],styles:['.decksView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view .";background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.view[_ngcontent-%COMP%]{grid-area:view;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.animalContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.animalOption[_ngcontent-%COMP%]{display:inline-block}.selectedAnimal[_ngcontent-%COMP%]{font-weight:700}.selectedCourseType[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:60% 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"deck . freeRace ." "deck edit primary event"}.deck[_ngcontent-%COMP%]{grid-area:deck}.edit[_ngcontent-%COMP%]{grid-area:edit;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.eventButton[_ngcontent-%COMP%], .editButton[_ngcontent-%COMP%]{width:80%}.primary[_ngcontent-%COMP%]{grid-area:primary;text-align:center}.primaryButton[_ngcontent-%COMP%]{width:80%}.autoRunFreeRace[_ngcontent-%COMP%]{grid-area:freeRace;text-align:center}.autoRunFreeRaceButton[_ngcontent-%COMP%]{width:80%;margin-bottom:.5rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.draggable[_ngcontent-%COMP%]{cursor:move;margin:1em}.raceOrder[_ngcontent-%COMP%]{display:inline-block}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{grid-template-columns:50% 1fr 1fr 1fr}}']}),t})();function Uq(t,n){if(1&t&&(D(0,"span"),F(1),M()),2&t){const e=K(2);V(1),He("",e.selectedItem.numberPurchasing," ")}}function Hq(t,n){if(1&t&&(D(0,"em"),F(1),M()),2&t){const e=K(2);V(1),Mn(" (",e.selectedItem.totalShopQuantity-e.amountPurchased," left",e.mangoTextLimit,")")}}function Gq(t,n){if(1&t){const e=tt();D(0,"span",9)(1,"span")(2,"label"),F(3,"Quantity: "),D(4,"input",10),_e("ngModelChange",function(r){return me(e),K(2).purchasingQuantity=r})("change",function(){return me(e),K(2).updatePrice()}),M()()(),D(5,"button",11),_e("click",function(){return me(e),K(2).BuyItem()}),F(6,"Buy"),M()()}if(2&t){const e=K(2);V(4),Y("ngModel",e.purchasingQuantity),V(1),Y("disabled",!e.canAffordItem)}}function zq(t,n){if(1&t){const e=tt();D(0,"span")(1,"button",11),_e("click",function(){return me(e),K(2).BuyItem()}),F(2,"Buy"),M()()}if(2&t){const e=K(2);V(1),Y("disabled",!e.canAffordItem)}}function jq(t,n){if(1&t&&(D(0,"div",3)(1,"span",4),pe(2,Uq,2,1,"span",5),F(3),M(),pe(4,Hq,2,2,"em",5),he(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),D(10,"div",7),F(11),M(),he(12,"br"),pe(13,Gq,7,2,"span",8),pe(14,zq,3,1,"span",5),M()),2&t){const e=K();Y("ngbPopover",Qt(3)),V(1),Y("ngClass",e.colorConditional),V(1),Y("ngIf",e.displayNumberPurchasing),V(1),He(" ",e.displayName,""),V(1),Y("ngIf",e.selectedItem.totalShopQuantity>1),V(3),Y("innerHTML",e.shortDescription,Si),V(4),He(" ",e.purchaseResourcesRequired," "),V(2),Y("ngIf",e.displayPurchasingQuantity),V(1),Y("ngIf",!e.displayPurchasingQuantity)}}function qq(t,n){if(1&t&&(D(0,"span"),F(1),M()),2&t){const e=K(2);V(1),He("",e.selectedItem.numberPurchasing," ")}}function $q(t,n){if(1&t&&(D(0,"em"),F(1),M()),2&t){const e=K(2);V(1),Mn(" (",e.selectedItem.totalShopQuantity-e.amountPurchased," left",e.mangoTextLimit,")")}}function Wq(t,n){if(1&t){const e=tt();D(0,"span",9)(1,"span")(2,"label"),F(3,"Quantity: "),D(4,"input",10),_e("ngModelChange",function(r){return me(e),K(2).purchasingQuantity=r})("change",function(){return me(e),K(2).updatePrice()}),M()()(),D(5,"button",11),_e("click",function(){return me(e),K(2).BuyItem()}),F(6,"Buy"),M()()}if(2&t){const e=K(2);V(4),Y("ngModel",e.purchasingQuantity),V(1),Y("disabled",!e.canAffordItem)}}function Xq(t,n){if(1&t){const e=tt();D(0,"span")(1,"button",11),_e("click",function(){return me(e),K(2).BuyItem()}),F(2,"Buy"),M()()}if(2&t){const e=K(2);V(1),Y("disabled",!e.canAffordItem)}}function Yq(t,n){if(1&t&&(D(0,"div",12)(1,"span",4),pe(2,qq,2,1,"span",5),F(3),M(),pe(4,$q,2,2,"em",5),he(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),D(10,"div",7),F(11),M(),he(12,"br"),pe(13,Wq,7,2,"span",8),pe(14,Xq,3,1,"span",5),M()),2&t){const e=K();V(1),Y("ngClass",e.colorConditional),V(1),Y("ngIf",e.displayNumberPurchasing),V(1),Kt(e.displayName),V(1),Y("ngIf",e.selectedItem.totalShopQuantity>1),V(3),Y("innerHTML",e.shortDescription,Si),V(4),He(" ",e.purchaseResourcesRequired," "),V(2),Y("ngIf",e.displayPurchasingQuantity),V(1),Y("ngIf",!e.displayPurchasingQuantity)}}function Kq(t,n){if(1&t&&(D(0,"div",13),he(1,"span",6),M()),2&t){const e=K();V(1),Y("innerHTML",e.longDescription,Si)}}let Zq=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.gameLoopService=r,this.itemPurchased=new di,this.canAffordItem=!0,this.displayNumberPurchasing=!1,this.displayName="",this.buyMultiplierAmount=1,this.purchasingQuantity=1,this.displayPurchasingQuantity=!1,this.mangoTextLimit=""}ngOnInit(){var e=this;if(this.buyMultiplierAmount=1,this.amountPurchased=this.selectedItem.amountPurchased,this.selectedItem.canHaveMultiples&&"Mangoes"!==this.selectedItem.name&&(void 0===this.selectedItem.quantityAdditive||0===this.selectedItem.quantityAdditive)&&(void 0===this.selectedItem.quantityMultiplier||1===this.selectedItem.quantityMultiplier)&&(this.displayPurchasingQuantity=!0),this.selectedItem.type===Le.Ability?(this.shortDescription=this.lookupService.getAnimalAbilityDescription(!0,this.selectedItem.additionalIdentifier),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedItem.additionalIdentifier)):this.selectedItem.type===Le.Specialty?(this.shortDescription=this.lookupService.getSpecialtyItemDescription(this.selectedItem.name),""===this.shortDescription&&(this.shortDescription=this.selectedItem.shortDescription)):this.selectedItem.type===Le.Animal?this.shortDescription=this.globalService.getAnimalDescription(this.selectedItem.name):this.selectedItem.type===Le.Food?this.shortDescription=this.globalService.getItemDescription(this.selectedItem.name):(this.shortDescription=this.selectedItem.shortDescription,this.longDescription=this.selectedItem.longDescription),this.displayName=this.selectedItem.name,this.selectedItem.type===Le.Animal&&void 0!==(i=this.globalService.globalVar.animals.find(a=>a.name===this.selectedItem.name))&&(this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()}),this.selectedItem.type===Le.Ability){var i,r=this.selectedItem.name.split(" ")[0].trim();""!==r&&void 0!==(i=this.globalService.globalVar.animals.find(c=>c.getAnimalType()===r))&&(this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()})}this.selectedItem.type===Le.Food&&1===this.selectedItem.numberPurchasing&&("Apples"===this.displayName&&(this.displayName="Apple"),"Oranges"===this.displayName&&(this.displayName="Orange"),"Bananas"===this.displayName&&(this.displayName="Banana"),"Strawberries"===this.displayName&&(this.displayName="Strawberry"),"Carrots"===this.displayName&&(this.displayName="Carrot"),"Turnips"===this.displayName&&(this.displayName="Turnip"),"Mangoes"===this.displayName&&(this.displayName="Mango"),"Gingko Leaves"===this.displayName&&(this.displayName="Gingko Leaf")),(this.selectedItem.type===Le.Food||this.selectedItem.type===Le.Resources)&&(this.displayNumberPurchasing=!0),this.amountSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Wa(function*(){e.selectedItem.purchasePrice.forEach(a=>{var c=a.name;1===a.amount&&("Tokens"===c&&(c="Token"),"Medals"===c&&(c="Medal")),e.purchaseResourcesRequired=(a.amount*e.buyMultiplierAmount).toLocaleString()+" "+c+", ";var d=e.lookupService.getResourceByName(a.name);e.canAffordItem=!(d<a.amount*e.buyMultiplierAmount)}),"Mangoes"===e.selectedItem.name&&(e.mangoTextLimit=" this month",e.amountPurchased=e.globalService.globalVar.monthlyMangoesPurchased,e.lookupService.getMonthlyMangoLimit()-e.amountPurchased<=0&&(e.canAffordItem=!1)),e.purchaseResourcesRequired.length>0&&(e.purchaseResourcesRequired=e.purchaseResourcesRequired.substring(0,e.purchaseResourcesRequired.length-2))}))}BuyItem(){this.buyMultiplierAmount=this.purchasingQuantity,this.canBuyItem()&&(this.spendResourcesOnItem(),this.selectedItem.type===Le.Animal&&this.buyAnimal(),this.selectedItem.type===Le.Food?this.buyFood():this.selectedItem.type===Le.Training&&this.buyTraining(),this.selectedItem.type===Le.Specialty?this.buySpecialty():this.selectedItem.type===Le.Ability&&this.buyAbility(),this.selectedItem.type===Le.Equipment&&this.buyEquipment(),this.selectedItem.type===Le.Consumable&&this.buyConsumable(),this.selectedItem.type===Le.Resources&&this.buyResources(),this.itemPurchased.emit(this.selectedItem))}canBuyItem(){this.buyMultiplierAmount=this.purchasingQuantity;var e=!0;return this.selectedItem.purchasePrice.forEach(i=>{this.lookupService.getResourceByName(i.name)<i.amount*this.buyMultiplierAmount&&(e=!1)}),e}updatePrice(){this.canBuyItem()}spendResourcesOnItem(){this.selectedItem.purchasePrice.forEach(e=>{this.lookupService.spendResourceByName(e.name,e.amount*this.buyMultiplierAmount)})}buyAnimal(){this.globalService.sortAnimalOrder();var e=this.globalService.globalVar.animals.find(d=>d.name===this.selectedItem.name);if(null!=e){e.isAvailable=!0,this.selectedItem.amountPurchased=1;var i=this.globalService.globalVar.shop.find(d=>"Abilities"===d.name);if(null!=i){var r=i.itemList.filter(d=>d.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(d=>{d.isAvailable=!0})}var a=this.globalService.globalVar.animalDecks.find(d=>d.isPrimaryDeck);if(null!=a){var c=!1;a.selectedAnimals.forEach(d=>{d.raceCourseType===(null==e?void 0:e.raceCourseType)&&(c=!0)}),c||a.selectedAnimals.push(e)}}}buyTraining(){this.selectedItem.amountPurchased=1;var e=this.globalService.globalVar.trainingOptions.find(i=>i.trainingName===this.selectedItem.name);void 0!==e&&(e.isAvailable=!0)}buyFood(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new Je(this.selectedItem.name,e,Le.Food));"Mangoes"===this.selectedItem.name&&this.selectedItem.purchasePrice.forEach(r=>{"Coins"===r.name&&(r.amount+=50,this.globalService.globalVar.monthlyMangoesPurchased+=1),"Tokens"===r.name&&(r.amount+=1)})}buySpecialty(){var e,a;if(this.selectedItem.amountPurchased+=1,"Whistle"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(_=>"Specialty"===_.name))){var i=e.itemList.find(_=>"Golden Whistle"===_.name);null!=i&&(i.isAvailable=!0)}if("National Races"===this.selectedItem.name&&(this.globalService.globalVar.nationalRaceCountdown=0,null!=(e=this.globalService.globalVar.shop.find(T=>"Specialty"===T.name)))){var r=e.itemList.find(T=>"International Races"===T.name);null!=r&&(r.isAvailable=!0)}"International Races"===this.selectedItem.name&&(this.globalService.globalVar.nationalRaceCountdown=0),"Incubator Upgrade Lv1"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(T=>"Specialty"===T.name))&&null!=(a=e.itemList.find(T=>"Incubator Upgrade Lv2"===T.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv2"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(T=>"Specialty"===T.name))&&null!=(a=e.itemList.find(A=>"Incubator Upgrade Lv3"===A.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv3"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(T=>"Specialty"===T.name))&&null!=(a=e.itemList.find(A=>"Incubator Upgrade Lv4"===A.name))&&(a.isAvailable=!0);var c=this.lookupService.getResourceByName("Team Manager");if("Team Manager"===this.selectedItem.name&&1===this.selectedItem.amountPurchased&&(null==c||0===c)&&!this.globalService.globalVar.animalDecks.some(_=>_.autoRunFreeRace)){var d=this.globalService.globalVar.animalDecks.find(_=>_.isPrimaryDeck);null!=d&&(d.autoRunFreeRace=!0)}if(null!=this.globalService.globalVar.resources&&(this.globalService.globalVar.resources.some(_=>_.name===this.selectedItem.name)?null!=(m=this.globalService.globalVar.resources.find(_=>_.name===this.selectedItem.name))&&(m.amount+=1):this.globalService.globalVar.resources.push(new Je(this.selectedItem.name,1,Le.Specialty))),"Talent Point Voucher"===this.selectedItem.name)if(this.globalService.globalVar.resources.some(_=>"Talent Points"===_.name)){var m;null!=(m=this.globalService.globalVar.resources.find(T=>"Talent Points"===T.name))&&(m.amount+=1)}else this.globalService.globalVar.resources.push(new Je("Talent Points",1,Le.Resources));null!=this.selectedItem.quantityMultiplier&&this.selectedItem.quantityMultiplier>0&&this.selectedItem.purchasePrice.forEach(_=>{null!=this.selectedItem.quantityAdditive&&this.selectedItem.quantityAdditive>0?_.amount+=this.selectedItem.quantityAdditive:_.amount*=this.selectedItem.quantityMultiplier,"Team Manager"===this.selectedItem.name&&_.amount>5e3&&(_.amount=5e3)})}buyAbility(){var e=this.selectedItem.name.split(" ")[0].trim(),i=this.selectedItem.name.split(":")[1].trim();if(""!==e&&""!==i){var r=this.globalService.globalVar.animals.find(c=>c.getAnimalType()===e);if(void 0!==r){var a=r.availableAbilities.find(c=>c.name===i);void 0!==a&&(a.isAbilityPurchased=!0,this.selectedItem.amountPurchased=1)}}}buyEquipment(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new Je(this.selectedItem.name,e,Le.Equipment))}buyConsumable(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new Je(this.selectedItem.name,e,Le.Consumable))}buyResources(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new Je(this.selectedItem.name,e,Le.Resources))}ngOnDestroy(){null!=this.amountSubscription&&this.amountSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(yn),Me(jr))},t.\u0275cmp=mi({type:t,selectors:[["app-shopping-item"]],inputs:{selectedItem:"selectedItem"},outputs:{itemPurchased:"itemPurchased"},decls:4,vars:2,consts:[["class","item","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","item",4,"ngIf"],["longDescriptionContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"item",3,"ngbPopover"],[1,"keyword",3,"ngClass"],[4,"ngIf"],[3,"innerHTML"],[1,"resourceKeyword"],["class","flex",4,"ngIf"],[1,"flex"],["maxlength","20",1,"quantity",3,"ngModel","ngModelChange","change"],[3,"disabled","click"],[1,"item"],[1,"popoverClass"]],template:function(e,i){1&e&&(pe(0,jq,15,9,"div",0),pe(1,Yq,15,8,"div",1),pe(2,Kq,2,1,"ng-template",null,2,ni)),2&e&&(Y("ngIf",""!==i.longDescription&&null!=i.longDescription),V(1),Y("ngIf",""===i.longDescription||null==i.longDescription))},directives:[on,no,_r,Us,Ll,Hs,Gs],styles:[".item[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}.quantity[_ngcontent-%COMP%]{width:5rem;margin-right:.5rem}"]}),t})();function Qq(t,n){if(1&t){const e=tt();D(0,"td",8)(1,"div")(2,"app-shopping-item",9),_e("itemPurchased",function(r){return me(e),K(3).itemPurchased(r)}),M()()()}if(2&t){const e=n.$implicit;V(2),Y("selectedItem",e)}}function Jq(t,n){if(1&t&&(D(0,"tr"),pe(1,Qq,3,1,"td",7),M()),2&t){const e=n.$implicit;V(1),Y("ngForOf",e)}}function e$(t,n){if(1&t&&(D(0,"table"),pe(1,Jq,2,1,"tr",6),M()),2&t){const e=K();V(1),Y("ngForOf",e.itemsRows)}}function t$(t,n){1&t&&(D(0,"div",10),he(1,"br"),D(2,"span"),F(3,"Fresh out! Check back again in the future to see if more items are added!"),M(),he(4,"br"),M())}const i$=function(t){return{tokenShopColor:t}};let Fx=(()=>{class t{constructor(e){this.globalService=e,this.shopsEnum=Fo,this.itemPurchasedEmitter=new di}ngOnInit(){null==this.shopType&&(this.shopType=Fo.regular),this.shopType===Fo.regular&&(this.resetShopSubscription=this.resetShop.subscribe(()=>this.setupDisplayItems())),this.setupDisplayItems()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];var e=4;this.screenHeight<=650&&(e=2);var i=[];this.section.itemList.forEach(a=>{a.isAvailable&&(a.canHaveMultiples&&(a.infiniteAmount||a.amountPurchased<a.totalShopQuantity)||0===a.amountPurchased)&&i.push(a)});for(var r=1;r<=i.length;r++)this.itemsCells.push(i[r-1]),r%e==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}itemPurchased(e){this.setupDisplayItems(),this.itemPurchasedEmitter.emit(!0)}ngOnDestroy(){void 0!==this.resetShopSubscription&&this.resetShopSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki))},t.\u0275cmp=mi({type:t,selectors:[["app-shopping-list"]],hostBindings:function(e,i){1&e&&_e("resize",function(a){return i.onResize(a)},!1,Do)},inputs:{section:"section",shopType:"shopType",resetShop:"resetShop"},outputs:{itemPurchasedEmitter:"itemPurchasedEmitter"},decls:8,vars:6,consts:[[1,"shoppingListView"],[1,"sectionHeaderBackgroundColor",3,"ngClass"],[1,"s4Heading","keyword","sectionHeaderText"],[1,"items"],[4,"ngIf"],["class","centered","c","",4,"ngIf"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[3,"selectedItem","itemPurchased"],["c","",1,"centered"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"span",2),F(3),M()(),D(4,"div",3),pe(5,e$,2,1,"table",4),pe(6,t$,5,0,"div",5),he(7,"br"),M()()),2&e&&(V(1),Y("ngClass",hi(4,i$,i.shopType===i.shopsEnum.token)),V(2),Kt(i.section.name),V(2),Y("ngIf",i.itemsRows.length>0),V(1),Y("ngIf",0===i.itemsRows.length))},directives:[_r,on,Vr,Zq],styles:[".shoppingListView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.sectionHeaderBackgroundColor[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center}.tokenShopColor[_ngcontent-%COMP%]{background-color:var(--tokenShopColor)!important}.sectionHeaderText[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.centered[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function n$(t,n){if(1&t&&(D(0,"div",8),he(1,"app-shopping-list",9),M()),2&t){const e=n.$implicit,i=K();V(1),Y("section",e)("shopType",i.shopType)}}function r$(t,n){if(1&t&&(D(0,"div",10),he(1,"hr"),D(2,"em"),F(3),D(4,"span",11),F(5,"Renown"),M()()()),2&t){const e=K();V(3),He("Next tier unlocked at ",e.lookupService.getRenownRequiredForEventShopTier(e.highestTierUnlocked+1)," ")}}let a$=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.lookupService=i,this.gameLoopService=r,this.componentCommunicationService=a,this.highestTierUnlocked=0,this.maxTiers=3,this.shopType=Fo.token,this.currentTokens=0}keyEvent(e){(e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.returnToEventRaceView()}ngOnInit(){var e=this;this.highestTierUnlocked=this.lookupService.getHighestEventShopTierUnlocked(),this.getShopOptions(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(Wa(function*(){e.currentTokens=e.lookupService.getTokens()}))}getShopOptions(){this.sections=[];var e=this.globalService.globalVar.tokenShop.find(a=>"Tier 1"===a.name);void 0!==e&&this.highestTierUnlocked>=1&&this.sections.push(e);var i=this.globalService.globalVar.tokenShop.find(a=>"Tier 2"===a.name);void 0!==i&&this.highestTierUnlocked>=2&&this.sections.push(i);var r=this.globalService.globalVar.tokenShop.find(a=>"Tier 3"===a.name);void 0!==r&&this.highestTierUnlocked>=3&&this.sections.push(r)}returnToEventRaceView(){this.componentCommunicationService.setShopType(Fo.regular),this.componentCommunicationService.setRaceView(Mi.raceselection,xt.event)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(yn),Me(jr),Me(qr))},t.\u0275cmp=mi({type:t,selectors:[["app-token-shop-view"]],hostBindings:function(e,i){1&e&&_e("keyup",function(a){return i.keyEvent(a)},!1,Do)},decls:15,vars:3,consts:[[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"back"],[3,"click"],["class","shopSection",4,"ngFor","ngForOf"],["class","centered",4,"ngIf"],[1,"shopSection"],[3,"section","shopType"],[1,"centered"],[1,"progressionKeyword"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),F(5,"Token Shop"),M(),D(6,"span"),F(7),M()(),D(8,"div",4)(9,"button",5),_e("click",function(){return i.returnToEventRaceView()}),F(10,"Back To Event"),M()()()(),he(11,"br"),pe(12,n$,2,2,"div",6),he(13,"br"),pe(14,r$,6,1,"div",7),M()),2&e&&(V(7),He("Tokens: ",i.currentTokens,""),V(5),Y("ngForOf",i.sections),V(2),Y("ngIf",i.highestTierUnlocked<i.maxTiers))},directives:[Vr,Fx,on],styles:['.shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}']}),t})();function o$(t,n){if(1&t){const e=tt();D(0,"div",16)(1,"app-shopping-list",17),_e("itemPurchasedEmitter",function(r){return me(e),K(2).itemPurchased(r)}),M()()}if(2&t){const e=n.$implicit,i=K(2);V(1),Y("section",e)("resetShop",i.resetShopSubject.asObservable())}}function s$(t,n){if(1&t){const e=tt();D(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2"),F(5,"Shop"),M()()(),D(6,"div",6)(7,"span",7),F(8,"Filters:"),M(),D(9,"button",8),_e("click",function(){return me(e),K().toggleShopFilter("Animals")}),F(10,"Animals"),M(),D(11,"button",9),_e("click",function(){return me(e),K().toggleShopFilter("Trainings")}),F(12," Trainings"),M(),D(13,"button",10),_e("click",function(){return me(e),K().toggleShopFilter("Equipment")}),F(14,"Equipment "),M(),D(15,"button",11),_e("click",function(){return me(e),K().toggleShopFilter("Food")}),F(16,"Food"),M(),D(17,"button",12),_e("click",function(){return me(e),K().toggleShopFilter("Specialty")}),F(18," Specialty"),M(),D(19,"button",13),_e("click",function(){return me(e),K().toggleShopFilter("Abilities")}),F(20," Abilities"),M()(),D(21,"button",14),_e("click",function(){return me(e),K().ResetShopFilters()}),F(22," Reset Filters "),M(),he(23,"br")(24,"br"),D(25,"em"),F(26,"Certain items can be bought in bulk. Use the Alt, Shift, and Ctrl keys to modify the amount you are buying."),M()(),he(27,"br"),pe(28,o$,2,2,"div",15),M()}if(2&t){const e=K();V(9),Ii("filterActive",e.filterAnimals),V(2),Ii("filterActive",e.filterTrainings),V(2),Ii("filterActive",e.filterEquipment),V(2),Ii("filterActive",e.filterFood),V(2),Ii("filterActive",e.filterSpecialty),V(2),Ii("filterActive",e.filterAbilities),V(9),Y("ngForOf",e.sections)}}function l$(t,n){1&t&&(D(0,"div"),he(1,"app-token-shop-view"),M())}let c$=(()=>{class t{constructor(e,i,r){this.globalService=e,this.componentCommunicationService=i,this.lookupService=r,this.filterAnimals=!1,this.filterTrainings=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterAbilities=!1,this.ShopsEnum=Fo,this.resetShopSubject=new $}ngOnInit(){this.componentCommunicationService.setNewView(Mi.shop),this.getShopOptions(),this.subscription=this.componentCommunicationService.getShopView().subscribe(e=>{this.activeShopView=e})}getShopOptions(){this.sections=[];var e=this.filtersActive(),i=this.globalService.globalVar.shop.find(A=>"Animals"===A.name&&(!e||e&&this.filterAnimals));void 0!==i&&this.sections.push(i);var r=this.globalService.globalVar.shop.find(A=>"Trainings"===A.name&&(!e||e&&this.filterTrainings));void 0!==r&&this.sections.push(r);var a=this.globalService.globalVar.shop.find(A=>"Equipment"===A.name&&(!e||e&&this.filterEquipment));void 0!==a&&this.sections.push(a);var c=this.globalService.globalVar.shop.find(A=>"Food"===A.name&&(!e||e&&this.filterFood));if(void 0!==c){var d=c.itemList.find(A=>"Mangoes"===A.name),m=this.lookupService.getMonthlyMangoLimit();m<0&&(m=0),void 0!==d&&(d.totalShopQuantity=m),this.sections.push(c)}var _=this.globalService.globalVar.shop.find(A=>"Specialty"===A.name&&(!e||e&&this.filterSpecialty));void 0!==_&&this.sections.push(_);var T=this.globalService.globalVar.shop.find(A=>"Abilities"===A.name&&(!e||e&&this.filterAbilities));void 0!==T&&this.sections.push(T)}toggleShopFilter(e){"Animals"===e&&(this.filterAnimals=!this.filterAnimals),"Trainings"===e&&(this.filterTrainings=!this.filterTrainings),"Equipment"===e&&(this.filterEquipment=!this.filterEquipment),"Food"===e&&(this.filterFood=!this.filterFood),"Specialty"===e&&(this.filterSpecialty=!this.filterSpecialty),"Abilities"===e&&(this.filterAbilities=!this.filterAbilities),this.getShopOptions()}filtersActive(){return!!(this.filterAnimals||this.filterAbilities||this.filterEquipment||this.filterFood||this.filterSpecialty||this.filterTrainings)}ResetShopFilters(){this.filterAnimals=!1,this.filterAbilities=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterTrainings=!1,this.getShopOptions()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}itemPurchased(e){this.getShopOptions(),this.resetShopSubject.next()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(qr),Me(yn))},t.\u0275cmp=mi({type:t,selectors:[["app-shop-view"]],decls:2,vars:2,consts:[["class","shopView",4,"ngIf"],[4,"ngIf"],[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"filters"],["id","title"],["id","animalsFilter",1,"clickableText","buttonAsText",3,"click"],["id","trainingsFilter",1,"clickableText","buttonAsText",3,"click"],["id","equipmentFilter",1,"clickableText","buttonAsText",3,"click"],["id","foodFilter",1,"clickableText","buttonAsText",3,"click"],["id","specialtyFilter",1,"clickableText","buttonAsText",3,"click"],["id","abilitiesFilter",1,"clickableText","buttonAsText",3,"click"],[1,"centered","clickableText","buttonAsText",3,"click"],["class","shopSection",4,"ngFor","ngForOf"],[1,"shopSection"],[3,"section","resetShop","itemPurchasedEmitter"]],template:function(e,i){1&e&&(pe(0,s$,29,13,"div",0),pe(1,l$,2,0,"div",1)),2&e&&(Y("ngIf",i.activeShopView===i.ShopsEnum.regular),V(1),Y("ngIf",i.activeShopView===i.ShopsEnum.token))},directives:[on,Vr,Fx,a$],styles:[".shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.filters[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4%}#title[_ngcontent-%COMP%]{grid-area:title}#animalsFilter[_ngcontent-%COMP%]{grid-area:animalsFilter}#trainingsFilter[_ngcontent-%COMP%]{grid-area:trainingsFilter}#facilityFilter[_ngcontent-%COMP%]{grid-area:facilityFilter}#foodFilter[_ngcontent-%COMP%]{grid-area:foodFilter}#specialtyFilter[_ngcontent-%COMP%]{grid-area:specialtyFilter}#enhancerFilter[_ngcontent-%COMP%]{grid-area:enhancerFilter}"]}),t})(),u$=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i}ngOnInit(){this.traitLevel=this.lookupService.getResearchLevel(),this.maxNegativePercent=25;var e=this.globalService.globalVar.modifiers.find(i=>"maximumTraitNegativePercentModifier"===i.text);void 0!==e&&(this.maxNegativePercent=e.value)}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(yn))},t.\u0275cmp=mi({type:t,selectors:[["app-trait-option"]],inputs:{trait:"trait"},decls:5,vars:2,consts:[[1,"trait"],[1,"traitName","keyword"],[1,"traitStats"]],template:function(e,i){1&e&&(D(0,"h6",0)(1,"p",1),F(2),M(),D(3,"p",2),F(4),M()()),2&e&&(V(2),Kt(i.trait.traitName),V(2),Kt(i.trait.getStatGainDescription(i.maxNegativePercent)))},styles:[".trait[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const d$=function(t){return{activeTrait:t}};function f$(t,n){if(1&t){const e=tt();D(0,"td",4)(1,"div",5),_e("click",function(){const a=me(e).$implicit;return K(2).selectTrait(a)}),he(2,"app-trait-option",6),M()()}if(2&t){const e=n.$implicit;V(1),Y("ngClass",hi(2,d$,e.isSelected)),V(1),Y("trait",e)}}function h$(t,n){if(1&t&&(D(0,"tr"),pe(1,f$,3,4,"td",3),M()),2&t){const e=n.$implicit;V(1),Y("ngForOf",e)}}let p$=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrait=new di}ngOnInit(){this.setupDisplayTraits()}setupDisplayTraits(){this.traitsCells=[],this.traitsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTraits.length;i++)this.traitsCells.push(this.availableTraits[i-1]),i%e==0&&(this.traitsRows.push(this.traitsCells),this.traitsCells=[]);0!==this.traitsCells.length&&this.traitsRows.push(this.traitsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrait(e){this.availableTraits.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrait.emit(e)}ngOnChanges(e){this.availableTraits=e.availableTraits.currentValue,this.setupDisplayTraits()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki))},t.\u0275cmp=mi({type:t,selectors:[["app-trait-list"]],hostBindings:function(e,i){1&e&&_e("resize",function(a){return i.onResize(a)},!1,Do)},inputs:{availableTraits:"availableTraits"},outputs:{selectedTrait:"selectedTrait"},features:[ra],decls:4,vars:1,consts:[[1,"traitsView"],[1,"traits"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trait"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"table"),pe(3,h$,2,1,"tr",2),M()()()),2&e&&(V(3),Y("ngForOf",i.traitsRows))},directives:[Vr,_r,u$],styles:[".traitsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function g$(t,n){if(1&t&&(D(0,"span"),F(1),M()),2&t){const e=K(2);V(1),Kt(e.selectedAnimal.name)}}function v$(t,n){if(1&t){const e=tt();D(0,"div",21),_e("click",function(){return me(e),K().goToAnimal()}),pe(1,g$,2,1,"span",7),he(2,"br"),D(3,"span"),F(4),M()()}if(2&t){const e=K();Y("ngClass",e.colorConditional),V(1),Y("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),V(3),Kt(e.selectedAnimal.getAnimalType())}}function m$(t,n){if(1&t){const e=tt();D(0,"div",21),_e("click",function(){return me(e),K().goToAnimal()}),D(1,"span"),F(2),M()()}if(2&t){const e=K();Y("ngClass",e.colorConditional),V(2),Kt(e.selectedAnimal.getAnimalType())}}function b$(t,n){if(1&t&&(D(0,"span",22),F(1,"Current Trait: "),D(2,"span",23),F(3),M()()),2&t){const e=K();Ia("ngbPopover",e.traitStatGainDescription),V(3),Kt(e.selectedAnimal.getTraitName())}}function _$(t,n){if(1&t&&(D(0,"span",24),F(1),M()),2&t){const e=K();V(1),He("",e.existingTrait.traitName," ")}}function y$(t,n){1&t&&(D(0,"span"),F(1,"No Trait Assigned"),M())}function w$(t,n){if(1&t){const e=tt();D(0,"div"),he(1,"br"),D(2,"p",25),he(3,"ngb-progressbar",26),D(4,"span",27),F(5),Di(6,"number"),M()(),he(7,"br"),D(8,"button",9),_e("click",function(){return me(e),K().cancelIncubation()}),F(9,"Cancel Incubation"),M()()}if(2&t){const e=K();V(3),Y("value",e.trainingProgressBarPercent),V(2),He("",Yi(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}let S$=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.componentCommunicationService=a,this.returnEmitter=new di,this.traitStatGainDescription="",this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1}keyEvent(e){(e.key===this.globalService.globalVar.keybinds.get("Back").toUpperCase()||e.key===this.globalService.globalVar.keybinds.get("Back").toLowerCase())&&this.returnToAnimalView()}ngOnInit(){this.availableTraits=this.GetAvailableTraits();var e=this.globalService.globalVar.incubator;if(null!=e.assignedAnimal&&null!=e.assignedTrait&&(this.existingTrait=e.assignedTrait),null!=this.existingTrait){var i=this.availableTraits.find(r=>{var a;return(null===(a=this.existingTrait)||void 0===a?void 0:a.traitName)===r.traitName});null!=i&&(i.isSelected=!0)}this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.incubator;if(null==a.assignedAnimal||null==a.assignedTrait)return this.existingTrait=null,void this.availableTraits.forEach(c=>{c.isSelected=!1});this.trainingProgressBarPercent=a.timeTrained/a.timeToComplete*100})}cancelIncubation(){var e=this.globalService.globalVar.incubator;e.timeTrained=0,e.assignedAnimal=null,e.assignedTrait=null,this.selectedAnimal.canTrain=!0}selectNewTrait(e){var i=Object.assign({},e),r=this.globalService.globalVar.incubator;r.timeTrained=0,r.assignedAnimal=this.selectedAnimal,r.assignedTrait=i,this.existingTrait=i,this.selectedAnimal.canTrain=!1}GetAvailableTraits(){var e=[],i=this.lookupService.getResearchLevel();return e.push(new In("Alert",1,i,Dt.focus,Dt.endurance)),e.push(new In("Sharp",1,i,Dt.adaptability,Dt.power)),e.push(new In("Bulky",1,i,Dt.power,Dt.topSpeed)),e.push(new In("Curious",3,i,Dt.acceleration,Dt.focus)),e.push(new In("Adamant",3,i,Dt.topSpeed,Dt.acceleration)),e.push(new In("Stoic",5,i,Dt.endurance,Dt.adaptability)),e.push(new In("Smart",5,i,Dt.focus,Dt.power)),e.push(new In("Careful",7,i,Dt.adaptability,Dt.acceleration)),e.push(new In("Attentive",7,i,Dt.power,Dt.endurance)),e.push(new In("Keen",9,i,Dt.acceleration,Dt.topSpeed)),e.push(new In("Quick",9,i,Dt.topSpeed,Dt.adaptability)),e.push(new In("Tough",11,i,Dt.endurance,Dt.focus)),e.push(new In("Solitary",11,i,Dt.focus,Dt.acceleration)),e.push(new In("Cautious",13,i,Dt.adaptability,Dt.topSpeed)),e.push(new In("Wild",13,i,Dt.power,Dt.focus)),e.push(new In("Clumsy",15,i,Dt.acceleration,Dt.adaptability)),e.push(new In("Natural",15,i,Dt.topSpeed,Dt.endurance)),e.push(new In("Resilient",17,i,Dt.endurance,Dt.power)),e.push(new In("Anxious",17,i,Dt.focus,Dt.topSpeed)),e.push(new In("Lucky",19,i,Dt.adaptability,Dt.focus)),e.push(new In("Rugged",19,i,Dt.power,Dt.adaptability)),e.push(new In("Naive",21,i,Dt.acceleration,Dt.endurance)),e.push(new In("Sprightly",21,i,Dt.topSpeed,Dt.power)),e.push(new In("Stout",23,i,Dt.endurance,Dt.acceleration)),e.push(new In("Pensive",23,i,Dt.focus,Dt.adaptability)),e.push(new In("Languid",25,i,Dt.adaptability,Dt.endurance)),e.push(new In("Mighty",25,i,Dt.power,Dt.acceleration)),e.push(new In("Nimble",27,i,Dt.acceleration,Dt.power)),e.push(new In("Small",27,i,Dt.topSpeed,Dt.focus)),e.push(new In("Resolute",29,i,Dt.endurance,Dt.topSpeed)),(e=e.filter(r=>i>=r.requiredLevel)).filter(r=>!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterSpeed&&r.positiveStatGain===Dt.topSpeed||this.filterAcceleration&&r.positiveStatGain===Dt.acceleration||this.filterEndurance&&r.positiveStatGain===Dt.endurance||this.filterPower&&r.positiveStatGain===Dt.power||this.filterFocus&&r.positiveStatGain===Dt.focus||this.filterAdaptability&&r.positiveStatGain===Dt.adaptability)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.availableTraits=this.GetAvailableTraits()}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTraits=this.GetAvailableTraits()}returnToAnimalView(){this.returnEmitter.emit(!1)}goToAnimal(){this.componentCommunicationService.setAnimalView(Mi.animals,this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(jr),Me(yn),Me(qr))},t.\u0275cmp=mi({type:t,selectors:[["app-incubator-traits"]],hostBindings:function(e,i){1&e&&_e("keyup",function(a){return i.keyEvent(a)},!1,Do)},inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:39,vars:19,consts:[[1,"incubatorTraitsModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],["class","clickableText keyword",3,"ngClass","click",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","activeTrait",4,"ngIf"],[4,"ngIf"],[1,"back"],[3,"click"],[1,"filterGridContainer"],[1,"resetFiltersHeader","clickableText"],[1,"changeTrainingHeader"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTraits","selectedTrait"],[1,"clickableText","keyword",3,"ngClass","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],[1,"keyword"],[1,"activeTrait"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),pe(4,v$,5,3,"div",4),pe(5,m$,3,2,"div",4),pe(6,b$,4,2,"span",5),he(7,"hr"),pe(8,_$,2,1,"span",6),pe(9,y$,2,0,"span",7),M(),D(10,"div",8)(11,"button",9),_e("click",function(){return i.returnToAnimalView()}),F(12,"Back"),M()()(),he(13,"hr"),pe(14,w$,10,5,"div",7),he(15,"br")(16,"br"),D(17,"div",10)(18,"div",11)(19,"span",9),_e("click",function(){return i.resetFilters()}),F(20,"Reset Filters"),M()(),D(21,"div",12)(22,"span"),F(23,"Choose New Trait"),M()(),D(24,"div",13)(25,"button",14),_e("click",function(){return i.toggleStatFilter("Speed")}),F(26,"SPD "),M(),D(27,"button",15),_e("click",function(){return i.toggleStatFilter("Acceleration")}),F(28,"ACC "),M(),D(29,"button",16),_e("click",function(){return i.toggleStatFilter("Endurance")}),F(30,"END "),M(),D(31,"button",17),_e("click",function(){return i.toggleStatFilter("Power")}),F(32,"PWR "),M(),D(33,"button",18),_e("click",function(){return i.toggleStatFilter("Focus")}),F(34,"FCS "),M(),D(35,"button",19),_e("click",function(){return i.toggleStatFilter("Adaptability")}),F(36,"ADP"),M()()(),he(37,"br"),D(38,"app-trait-list",20),_e("selectedTrait",function(a){return i.selectNewTrait(a)}),M()()()),2&e&&(V(4),Y("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),V(1),Y("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),V(1),Y("ngIf",null!=i.selectedAnimal.trait),V(2),Y("ngIf",null!=i.existingTrait),V(1),Y("ngIf",null==i.existingTrait),V(5),Y("ngIf",null!=i.existingTrait),V(11),Ii("filterActive",i.filterSpeed),V(2),Ii("filterActive",i.filterAcceleration),V(2),Ii("filterActive",i.filterEndurance),V(2),Ii("filterActive",i.filterPower),V(2),Ii("filterActive",i.filterFocus),V(2),Ii("filterActive",i.filterAdaptability),V(3),Y("availableTraits",i.availableTraits))},directives:[on,_r,no,Zd,p$],pipes:[ts],styles:['.incubatorTraitsModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"ResetFiler changeTraitHeader statFilter"}.changeTraitHeader[_ngcontent-%COMP%]{grid-area:changeTraitHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.resetFilter[_ngcontent-%COMP%]{grid-area:resetFilter}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}']}),t})();function C$(t,n){1&t&&(D(0,"div",3)(1,"h2"),F(2,"Incubator"),M(),D(3,"div",4),F(4," Select an animal and the desired trait to begin the incubation process. While incubating, you will not be able to train the selected animal. The chosen trait will remain on the animal until a new trait is selected or the trait is removed. "),M(),he(5,"hr"),M())}function T$(t,n){if(1&t){const e=tt();D(0,"div",7)(1,"div")(2,"app-animal-list",8),_e("selectedAnimal",function(r){return me(e),K(2).selectedAnimal(r)}),M()()()}if(2&t){const e=K(2);V(2),Y("availableAnimals",e.availableAnimals)("isIncubatorDetailView",!0)}}function M$(t,n){if(1&t){const e=tt();D(0,"div",9)(1,"app-incubator-traits",10),_e("returnEmitter",function(r){return me(e),K(2).returnToAnimalView(r)}),M()()}if(2&t){const e=K(2);V(1),Y("selectedAnimal",e.animal)}}function x$(t,n){if(1&t&&(D(0,"div"),pe(1,T$,3,2,"div",5),pe(2,M$,2,1,"div",6),M()),2&t){const e=K();V(1),Y("ngIf",!e.animalSelected),V(1),Y("ngIf",e.animalSelected)}}function R$(t,n){1&t&&(D(0,"div"),F(1," To access the incubator, you need to improve your research level. Try participating in Duo Races. "),M())}let D$=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.componentCommunicationService=r,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(Mi.incubator),this.availableAnimals=this.globalService.globalVar.animals.filter(i=>i.isAvailable),this.researchLevel=this.lookupService.getResearchLevel();var e=this.globalService.globalVar.incubator;null!=e.assignedAnimal&&(this.animalSelected=!0,this.animal=e.assignedAnimal)}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(yn),Me(qr))},t.\u0275cmp=mi({type:t,selectors:[["app-incubator-view"]],decls:4,vars:3,consts:[[1,"incubatorView"],["class","info",4,"ngIf"],[4,"ngIf"],[1,"info"],[1,"description"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"selectAnimalView"],[3,"availableAnimals","isIncubatorDetailView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(D(0,"div",0),pe(1,C$,6,0,"div",1),pe(2,x$,3,2,"div",2),pe(3,R$,2,0,"div",2),M()),2&e&&(V(1),Y("ngIf",!i.animalSelected),V(1),Y("ngIf",i.researchLevel>0),V(1),Y("ngIf",0===i.researchLevel))},directives:[on,V0,S$],styles:[".incubatorView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:1rem}"]}),t})();var Qd=(()=>{return(t=Qd||(Qd={}))[t.basics=0]="basics",t[t.progression=1]="progression",t[t.calculators=2]="calculators",Qd;var t})();function k$(t,n){if(1&t){const e=tt();D(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswerBreedGuide")}),F(5,"+"),M()(),D(6,"div",9)(7,"p"),F(8,"What does Breeding do? How do I gain Breed XP?"),M()()(),D(9,"div",10),he(10,"div",7),D(11,"p"),F(12," Breeding is one of the best way to increase your animals' racing capabilities. It is a reset mechanic, meaning all of the base stats your animal has gained will be reset back to their default levels, and in return gain a permanent multiplier to your racing stats. Note that the stats your animal has prior to breeding have no impact on Breeding. "),he(13,"br")(14,"br"),F(15," Every time you Breed, you gain a 5% increase to the amount your base stats contribute to your racing stats. If you hover over your base stats (or tap if you are on mobile) when selecting an animal on the Animal page, you will see a breakdown of all multipliers you have obtained. With the Stockbreeder, you can set your animal to breed automatically without input so you can quickly raise your Breed Level in quick succession without having to spend time training in between each level. "),he(16,"br")(17,"br"),F(18," There are a few ways to increase Breed XP: "),he(19,"br"),D(20,"em"),F(21,"Completing any training:"),M(),F(22),he(23,"br"),D(24,"em"),F(25,"Successfully completing a free race:"),M(),F(26),he(27,"br"),D(28,"em"),F(29,"Successfully completing a circuit race:"),M(),F(30),he(31,"br")(32,"br"),F(33," As you progress, you'll find ways to increase the amount of XP gained. "),M()()(),he(34,"hr"),D(35,"div")(36,"div")(37,"div",7)(38,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswerBreedBarnRows")}),F(39,"+"),M()(),D(40,"div",9)(41,"p"),F(42,"I've got too many animals -- how do I unlock more barns?"),M()()(),D(43,"div",11),he(44,"div",7),D(45,"p"),F(46," Raise your circuit rank! As you progress, you'll unlock more rows of 3 barns. "),M()()(),he(47,"hr"),D(48,"div")(49,"div")(50,"div",7)(51,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswerAllAnimals")}),F(52,"+"),M()(),D(53,"div",9)(54,"p"),F(55,"What are all of the animals and course types?"),M()()(),D(56,"div",12),he(57,"div",7),D(58,"div")(59,"span",13),F(60,"Flatland"),M(),he(61,"br"),D(62,"span",14),F(63,"Horse"),M(),F(64),he(65,"br"),D(66,"span",14),F(67,"Cheetah"),M(),F(68),he(69,"br"),D(70,"span",14),F(71,"Hare"),M(),F(72),he(73,"br"),D(74,"span",14),F(75,"Warthog"),M(),F(76),he(77,"br")(78,"br"),D(79,"span",15),F(80,"Mountain"),M(),he(81,"br"),D(82,"span",14),F(83,"Monkey"),M(),F(84),he(85,"br"),D(86,"span",14),F(87,"Goat"),M(),F(88),he(89,"br"),D(90,"span",14),F(91,"Gecko"),M(),F(92),he(93,"br")(94,"br"),D(95,"div")(96,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Ocean Course Type")}),D(97,"span",17),F(98,"View Spoiler"),M(),D(99,"span",18),F(100,"Ocean"),M()(),he(101,"br"),D(102,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Ocean Course Type")}),D(103,"span",17),F(104,"View Spoiler"),M(),D(105,"span",14),F(106,"Dolphin"),M(),F(107),M(),he(108,"br"),D(109,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Ocean Course Type")}),D(110,"span",17),F(111,"View Spoiler"),M(),D(112,"span",14),F(113,"Shark"),M(),F(114),M(),he(115,"br"),D(116,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Ocean Course Type")}),D(117,"span",17),F(118,"View Spoiler"),M(),D(119,"span",14),F(120,"Octopus"),M(),F(121),M(),he(122,"br"),D(123,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Ocean Course Type")}),D(124,"span",17),F(125,"View Spoiler"),M(),D(126,"span",14),F(127,"Whale"),M(),F(128),M(),he(129,"br")(130,"br"),M(),D(131,"div")(132,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Tundra Course Type")}),D(133,"span",17),F(134,"View Spoiler"),M(),D(135,"span",18),F(136,"Tundra"),M()(),he(137,"br"),D(138,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Tundra Course Type")}),D(139,"span",17),F(140,"View Spoiler"),M(),he(141,"em",19),M(),he(142,"br"),D(143,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Tundra Course Type")}),D(144,"span",17),F(145,"View Spoiler"),M(),D(146,"span",14),F(147,"Penguin"),M(),F(148),M(),he(149,"br"),D(150,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Tundra Course Type")}),D(151,"span",17),F(152,"View Spoiler"),M(),D(153,"span",14),F(154,"Caribou"),M(),F(155),M(),he(156,"br")(157,"br"),M(),D(158,"div")(159,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Volcanic Course Type")}),D(160,"span",17),F(161,"View Spoiler"),M(),D(162,"span",18),F(163,"Volcanic"),M()(),he(164,"br"),D(165,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Volcanic Course Type")}),D(166,"span",17),F(167,"View Spoiler"),M(),he(168,"em",19),M(),he(169,"br"),D(170,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Volcanic Course Type")}),D(171,"span",17),F(172,"View Spoiler"),M(),D(173,"span",14),F(174,"Salamander"),M(),F(175),M(),he(176,"br"),D(177,"span",16),_e("click",function(){return me(e),K().viewSpoiler("Volcanic Course Type")}),D(178,"span",17),F(179,"View Spoiler"),M(),D(180,"span",14),F(181,"Fox"),M(),F(182),M()()()()(),he(183,"hr"),D(184,"div")(185,"div")(186,"div",7)(187,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswerTerrain")}),F(188,"+"),M()(),D(189,"div",9)(190,"p"),F(191,"What are the different terrain options when racing?"),M()()(),D(192,"div",20),he(193,"div",7),D(194,"p"),F(195," Every race leg will have a random terrain. Each terrain may have a positive or negative effect for your racer and should be considered when thinking about which animal is going to race a particular leg. The terrain options are below: "),he(196,"br")(197,"br"),D(198,"strong"),F(199,"Sunny"),M(),he(200,"br")(201,"span",19)(202,"br"),D(203,"strong"),F(204,"Rainy"),M(),he(205,"br")(206,"span",19)(207,"br"),D(208,"strong"),F(209,"Stormy"),M(),he(210,"br")(211,"span",19)(212,"br"),D(213,"strong"),F(214,"Torrid"),M(),he(215,"br")(216,"span",19)(217,"br"),D(218,"strong"),F(219,"Maelstrom"),M(),he(220,"br")(221,"span",19)(222,"br"),D(223,"strong"),F(224,"Snowfall"),M(),he(225,"br")(226,"span",19)(227,"br"),D(228,"strong"),F(229,"Hailstorm"),M(),he(230,"br")(231,"span",19)(232,"br"),D(233,"strong"),F(234,"Ashfall"),M(),he(235,"br")(236,"span",19),M()()(),he(237,"hr"),D(238,"div")(239,"div")(240,"div",7)(241,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswerBreedKeybinds")}),F(242,"+"),M()(),D(243,"div",9)(244,"p"),F(245,"What keybinds or similar shortcuts are there?"),M()()(),D(246,"div",21),he(247,"div",7),D(248,"p"),F(249," Use the left and right arrow keys to quickly jump between barns under the 'Barns' page and between animals under the 'Animals' page. "),he(250,"br"),F(251," Use the ctrl, shift, and alt keys to add multipliers to certain items in the shop to buy them in bulk. "),M()()(),he(252,"hr"),D(253,"div")(254,"div")(255,"div",7)(256,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswerSettings")}),F(257,"+"),M()(),D(258,"div",9)(259,"p"),F(260,"What does each setting do?"),M()()(),D(261,"div",22),he(262,"div",7),D(263,"p")(264,"strong"),F(265,"Auto Skip Race Info"),M(),F(266),he(267,"br")(268,"br"),D(269,"strong"),F(270,"Finish Training Before Switching"),M(),F(271),he(272,"br")(273,"br"),D(274,"strong"),F(275,"Hide Tips"),M(),F(276),he(277,"br")(278,"br"),D(279,"strong"),F(280,"Use Numbers For Ranks"),M(),F(281),he(282,"br")(283,"br"),D(284,"strong"),F(285,"Auto Start Event Race"),M(),F(286),he(287,"br")(288,"br"),D(289,"strong"),F(290,"Race Display Info"),M(),F(291),he(292,"br")(293,"br"),D(294,"strong"),F(295,"Quick View Barn"),M(),F(296),M()()(),he(297,"hr"),D(298,"div")(299,"div")(300,"div",7)(301,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswerFeedback")}),F(302,"+"),M()(),D(303,"div",9)(304,"p"),F(305,"I'm having an issue with my game or have some feedback, how can I contact you?"),M()()(),D(306,"div",23),he(307,"div",7),D(308,"p"),F(309,"Feel free to use the links at the bottom right or email me at CulturaIdle@gmail.com to get in touch. "),M()()()()}if(2&t){const e=K();V(22),He(" ",e.lookupService.getTrainingBreedGaugeIncrease(0)," XP"),V(4),He(" ",e.lookupService.getLocalBreedGaugeIncrease()," XP"),V(4),He(" ",e.lookupService.getCircuitBreedGaugeIncrease()," XP"),V(34),He(" - ",e.globalService.getAnimalDescription("Horse")," "),V(4),He(" - ",e.globalService.getAnimalDescription("Cheetah")," "),V(4),He(" - ",e.globalService.getAnimalDescription("Hare")," "),V(4),He(" - ",e.globalService.getAnimalDescription("Warthog")," "),V(8),He(" - ",e.globalService.getAnimalDescription("Monkey")," "),V(4),He(" - ",e.globalService.getAnimalDescription("Goat")," "),V(4),He(" - ",e.globalService.getAnimalDescription("Gecko")," "),V(4),Y("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(3),Y("ngClass",e.seeOceanCourseTypeSpoiler?"waterColor":""),V(3),Y("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(5),He(" - ",e.globalService.getAnimalDescription("Dolphin"),""),V(2),Y("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(5),He(" - ",e.globalService.getAnimalDescription("Shark"),""),V(2),Y("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(5),He(" - ",e.globalService.getAnimalDescription("Octopus"),""),V(2),Y("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(5),He(" - ",e.globalService.getAnimalDescription("Whale"),""),V(4),Y("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(3),Y("ngClass",e.seeTundraCourseTypeSpoiler?"tundraColor":""),V(3),Y("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(3),Y("innerHTML",e.globalService.getTundraDescription(),Si),V(2),Y("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(5),He(" - ",e.globalService.getAnimalDescription("Penguin"),""),V(2),Y("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(5),He(" - ",e.globalService.getAnimalDescription("Caribou"),""),V(4),Y("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(3),Y("ngClass",e.seeVolcanicCourseTypeSpoiler?"volcanicColor":""),V(3),Y("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(3),Y("innerHTML",e.globalService.getVolcanicDescription(),Si),V(2),Y("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(5),He(" - ",e.globalService.getAnimalDescription("Salamander"),""),V(2),Y("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),V(5),He(" - ",e.globalService.getAnimalDescription("Fox"),""),V(19),Y("innerHTML",e.sunnyTerrainInfo,Si),V(5),Y("innerHTML",e.rainyTerrainInfo,Si),V(5),Y("innerHTML",e.stormyTerrainInfo,Si),V(5),Y("innerHTML",e.torridTerrainInfo,Si),V(5),Y("innerHTML",e.maelstromTerrainInfo,Si),V(5),Y("innerHTML",e.snowfallTerrainInfo,Si),V(5),Y("innerHTML",e.hailstormTerrainInfo,Si),V(5),Y("innerHTML",e.ashfallTerrainInfo,Si),V(30),He(" - ",e.lookupService.getSettingDescriptions("Auto Skip Race Info")," "),V(5),He(" - ",e.lookupService.getSettingDescriptions("Finish Training Before Switching")," "),V(5),He(" - ",e.lookupService.getSettingDescriptions("Hide Tips")," "),V(5),He(" - ",e.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank")," "),V(5),He(" - ",e.lookupService.getSettingDescriptions("Auto Start Event Race")," "),V(5),He(" - ",e.lookupService.getSettingDescriptions("Race Display Info")," "),V(5),He(" - ",e.lookupService.getSettingDescriptions("Quick View Barn")," ")}}function A$(t,n){if(1&t){const e=tt();D(0,"div")(1,"div")(2,"div",7)(3,"button",8),_e("click",function(){return me(e),K(2).expandAnswer("faqAnswer4")}),F(4,"+"),M()(),D(5,"div",9)(6,"p"),F(7,"What is the Incubator? How does the Incubator Upgrade item work?"),M()()(),D(8,"div",28),he(9,"div",7),D(10,"p"),F(11,"Once you've successfully completed a Duo Race, you will have access to the Incubator. The Incubator lets you select a trait for an individual animal that lets your customize your stats further. A trait increases one stat and decreases another. As you increase your Research Level by completing Duo Races, you will unlock new traits and increase the amount the traits increase/decrease your stats. Note that traits will only decrease the chosen stat by a maximum of 25%. "),he(12,"br")(13,"br"),F(14," The Incubator Upgrade item gives you even further control over how you build your animals and allows newer animals to quickly catch up to ones of higher breed level. After purchasing this item, every time you breed you will gain a permanent increase to the stat your trait currently is providing you. The increase amount depends on your current Research Level. For example: "),he(15,"br")(16,"br"),F(17," If you have a Research Level of 15 and apply the "),D(18,"span",14),F(19,"Alert"),M(),F(20," trait to your Horse, it will gain 15% "),D(21,"span",14),F(22,"Focus"),M(),F(23," and lose 15% "),D(24,"span",14),F(25,"Endurance"),M(),F(26," through the trait itself. "),he(27,"br"),D(28,"em"),F(29,"If you have Incubator Upgrade Level 1:"),M(),F(30," each time you Breed your Horse, it will gain an additional modifier of .01 to its "),D(31,"span",14),F(32,"Focus"),M(),F(33," stat. 10% of the positive trait value of 15% would come out to .015. Incubator Upgrade Level 1 only allows for the first 10% of your trait value to contribute to the modifier, so you would gain .01. "),he(34,"br"),D(35,"em"),F(36,"If you have Incubator Upgrade Level 2:"),M(),F(37," each time you Breed your Horse, it will gain an additional modifier of .015 to its "),D(38,"span",14),F(39,"Focus"),M(),F(40," stat. 10% of the positive trait value of 15% would come to .015. Incubator Upgrade Level 2 allows for the first 25% of your trait value to contribute to the modifier. Because your trait value is only 15%, it will contribute in its entirety. "),M()(),he(41,"hr"),M()}}function P$(t,n){if(1&t){const e=tt();D(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswerOverwhelmed")}),F(5,"+"),M()(),D(6,"div",9)(7,"p"),F(8,"I'm overwhelmed -- what am I supposed to be doing? What are all of the different races? "),M()()(),D(9,"div",24),he(10,"div",7),D(11,"p"),F(12,"That's okay! There is a lot of information that comes at you at first. The first thing to understand is that this game has two basic loops at its core: Training/Racing cycles and Breeding cycles. At the beginning, you simply want to make sure your animals are training in a balanced way. Make sure to pay attention to what each animal's diminishing returns value is (20 by default), because after you train a base stat to that point then any further training of that stat becomes progressively weaker. You can keep up with your animal's stats and Diminishing Returns value by viewing any particular animal after clicking 'Animals' in the navigation menu. With that in mind, once you've got at least one animal of each available course type with stats close to their Diminishing Returns value, you're ready to race. When you click on the 'Races' section of the navigation menu, there are a few subsections at the top. Here is what they mean: "),he(13,"br")(14,"br"),D(15,"strong"),F(16,"Circuit Races:"),M(),F(17," Raising your circuit rank as high as possible is your ultimate aim, and completing Circuit Races is the only way to do so. You'll unlock new animals, races, items, and upgrades by doing this. On this page, you also have access to free races which are easier races that provide a smaller amount of coin. Free race difficulty scales with your circuit rank, so if you plan to play a more active playstyle then you may benefit from not speeding through circuit ranks too quickly as you may have trouble completing free races. If you are okay with a more idle play style though, then you can simply complete Circuit Races as you are able to. "),he(18,"br"),D(19,"strong"),F(20,"Special Races:"),M(),F(21," These races types are unlocked as you increase your circuit rank. They work just like Circuit Races in that you have to complete each rank's races before you increase your rank, but they each reward something unique. For example, the Mono Races you unlock at circuit rank 2 increase your animal's Diminishing Returns value. Your rank at any particular Special Race cannot exceed your circuit rank, so as you increase your circuit rank make sure to check back and complete your Special Races as you are able to. "),he(22,"br"),D(23,"strong"),F(24,"Event Races:"),M(),F(25," After reaching circuit rank 13, you have access to the Grand Prix. The Grand Prix is a multi day race that runs in the background where you can easily swap in and out different racers. This race may be difficult for those who are just starting and you are safe to ignore it until you have a handle on everything else. "),he(26,"br"),D(27,"strong"),F(28,"Training Track"),M(),F(29,": At the training track, each animal has the opportunity to race against a number of competitors to gain some Coins and some unique rewards. You'll likely need to raise your breed levels a bit before seeing success here, but do check in after you've played a little while and give it a shot. "),he(30,"br")(31,"br"),F(32," Once you've trained your animals up to their Diminishing Returns value, you've completed Special Races to increase your Diminishing Returns value, and you've pushed your Circuit Rank as high as you can go, that's when you will want to start breeding your animals. There are other FAQ sections dedicated to Breeding so check those out for more information. After Breeding for awhile, you'll go back to training and racing. Cycling between these two flows is key to success in Cultura. Once you start unlocking multiple animals per course type, you can have one set breeding while the others train and race to cut down on wait time. "),M()()(),he(33,"hr"),D(34,"div")(35,"div")(36,"div",7)(37,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswer1")}),F(38,"+"),M()(),D(39,"div",9)(40,"p"),F(41,"I'm stuck early on, how should I progress?"),M()()(),D(42,"div",25),he(43,"div",7),D(44,"p"),F(45,"In the early game, your biggest obstacles will be coins and breed level. Using the Stockbreeder to Auto Breed your animals can give them a big boost in stats. "),D(46,"em"),F(47,"Note that you should typically wait to Breed until you've gotten as far as you can in circuit races as Breeding will reset your base stats to their defaults and require you to train them back up again. "),M(),he(48,"br")(49,"br"),F(50," If you are having a hard time collecting coins, look into buying the Money Mark and Team Managers from the Shop and upgrading your barns to Attractions to build passive income. The Money Mark will add a new competitor to your races (gold colored as opposed to black) that will run 25% faster than the average speed. If you finish the race first, your coin gain will increase by 25%."),he(51,"br"),F(52," Team Managers will automatically run free races for you every reset period, making sure you're getting as much value as possible from free races. "),he(53,"br"),F(54," Attractions require reaching barn level 10 and will take a little longer than buying the Money Mark and Team Manager, but it will provide passive income as long as there is an animal training in the barn. "),he(55,"br")(56,"br"),F(57," Some early game goals to set for yourself are to complete the Novice level training track, buy enough barns to train at least 1 animal of each course type available to you, raise your circuit rank, and make sure you raise your mono rank to match your circuit rank. "),M()()(),he(58,"hr"),D(59,"div")(60,"div")(61,"div",7)(62,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswer2")}),F(63,"+"),M()(),D(64,"div",9)(65,"p"),F(66,"What do team managers do and how do I set auto race?"),M()()(),D(67,"div",26),he(68,"div",7),D(69,"p"),F(70,'After buying a Team Manager from the shop, you\'ll have the ability to set a deck as your "Auto Run Free Race" deck. Once selected, this deck will immediately run free races as soon as the time period resets creating a steady stream of income (assuming you win, of course!). '),he(71,"br")(72,"br"),F(73,' To set a deck as your "Auto Run Free Race" deck, select \'Decks\' on the right and then select the button that says "Auto Run Free Race" by the deck you want to select. Note that this option will not be available until you buy a Team Manager. '),M()()(),he(74,"hr"),D(75,"div")(76,"div")(77,"div",7)(78,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswer3")}),F(79,"+"),M()(),D(80,"div",9)(81,"p"),F(82,"What does upgrading a barn do and how do I specialize my barn?"),M()()(),D(83,"div",27),he(84,"div",7),D(85,"p"),F(86,"After reaching a certain circuit rank, you will gain the ability to upgrade your barns. Every level you upgrade, you gain a multiplier for a particular stat when training. Hovering over your barn level when selecting a barn will show you your current multipliers. Increasing your barn level can be a great way to get you back in the race after breeding. "),he(87,"br")(88,"br"),F(89," At barn level 10, you will instead have the option to specialize. Subsequently, every 10 levels will improve your specialization instead of giving a stat multiplier. The current specialization options are below."),he(90,"br")(91,"br"),D(92,"strong"),F(93),M(),he(94,"br"),D(95,"strong",16),_e("click",function(){return me(e),K().viewSpoiler("Item Set 2")}),D(96,"span",17),F(97,"View Spoiler"),M(),F(98),M(),he(99,"br")(100,"br"),D(101,"strong"),F(102),M(),he(103,"br"),D(104,"strong",16),_e("click",function(){return me(e),K().viewSpoiler("Item Set 2")}),D(105,"span",17),F(106,"View Spoiler"),M(),F(107),M(),he(108,"br")(109,"br"),D(110,"strong",16),_e("click",function(){return me(e),K().viewSpoiler("Attraction Specialization")}),D(111,"span",17),F(112,"View Spoiler"),M(),F(113),M(),he(114,"br"),D(115,"strong",16),_e("click",function(){return me(e),K().viewSpoiler("Item Set 2")}),D(116,"span",17),F(117,"View Spoiler"),M(),F(118),M(),he(119,"br")(120,"br"),D(121,"strong",16),_e("click",function(){return me(e),K().viewSpoiler("Research Center Specialization")}),D(122,"span",17),F(123,"View Spoiler"),M(),F(124),M(),he(125,"br"),D(126,"strong",16),_e("click",function(){return me(e),K().viewSpoiler("Research Center Specialization")}),D(127,"span",17),F(128,"View Spoiler"),M(),F(129),M()()()(),he(130,"hr"),pe(131,A$,42,0,"div",6),M()}if(2&t){const e=K();V(93),He("Training Facility - ",e.lookupService.getInDepthSpecializationDescription("Training Facility"),""),V(2),Y("ngClass",e.seeItemSet2Spoiler?"viewSpoiler":"spoilerText"),V(3),He(" Training Facility Improvements - ",e.lookupService.getSpecialtyItemDescription("Training Facility Improvements"),""),V(4),He("Breeding Grounds - ",e.lookupService.getInDepthSpecializationDescription("Breeding Grounds"),""),V(2),Y("ngClass",e.seeItemSet2Spoiler?"viewSpoiler":"spoilerText"),V(3),He(" Breeding Grounds Improvements - ",e.lookupService.getSpecialtyItemDescription("Breeding Grounds Improvements"),""),V(3),Y("ngClass",e.seeAttractionSpoiler?"viewSpoiler":"spoilerText"),V(3),He(" Attraction - ",e.lookupService.getInDepthSpecializationDescription("Attraction"),""),V(2),Y("ngClass",e.seeItemSet2Spoiler?"viewSpoiler":"spoilerText"),V(3),He(" Attraction Improvements - ",e.lookupService.getSpecialtyItemDescription("Attraction Improvements"),""),V(3),Y("ngClass",e.seeResearchCenterSpoiler?"viewSpoiler":"spoilerText"),V(3),He("Research Center - ",e.lookupService.getInDepthSpecializationDescription("Research Center"),""),V(2),Y("ngClass",e.seeResearchCenterSpoiler?"viewSpoiler":"spoilerText"),V(3),He(" Research Center Improvements - ",e.lookupService.getSpecialtyItemDescription("Research Center Improvements"),""),V(2),Y("ngIf",e.lookupService.isItemUnlocked("duoRace"))}}function E$(t,n){if(1&t&&(D(0,"span",14),F(1),M()),2&t){const e=K(2);V(1),He("",e.renownCoinGain,"% Additional Coins")}}function I$(t,n){if(1&t&&(D(0,"span",14),F(1),M()),2&t){const e=K(2);V(1),He("",e.renownCoinGain.toFixed(2),"% Additional Coins")}}function B$(t,n){if(1&t&&(D(0,"option",52),F(1),M()),2&t){const e=n.$implicit;Y("value",e.type),V(1),He(" ",e.name,"")}}function O$(t,n){1&t&&(D(0,"option",52),F(1,"Attraction"),M()),2&t&&Y("value",3)}function V$(t,n){1&t&&(D(0,"option",52),F(1,"Research Center"),M()),2&t&&Y("value",4)}function N$(t,n){if(1&t){const e=tt();D(0,"div"),he(1,"br"),D(2,"label",58),F(3,"Barn improvements unlocked?"),M(),D(4,"input",59),_e("input",function(){return me(e),K(2).toggleHasImprovements()}),M()()}if(2&t){const e=K(2);V(4),Y("checked",e.hasBarnImprovements)}}function F$(t,n){if(1&t){const e=tt();D(0,"div")(1,"div")(2,"div",7)(3,"button",8),_e("click",function(){return me(e),K(2).expandAnswer("faqAnswerIncubatorGrowthCalculator")}),F(4,"+"),M()(),D(5,"div",9)(6,"p"),F(7,"Modifier gain from Incubator Upgrade"),M()()(),D(8,"div",60),he(9,"div",7),D(10,"div",48)(11,"div")(12,"em"),F(13,"Enter a Facility Level and an Incubator Upgrade Level between 1 and 4 to see what the modifier would be on the stat corresponding to the positive trait. This pulls from your current resources by default."),M()(),he(14,"br")(15,"br"),D(16,"div",30)(17,"div",49)(18,"label",61),F(19,"Incubator Upgrade Level:"),M(),D(20,"input",62),_e("ngModelChange",function(r){return me(e),K(2).incubatorUpgradeLevel=r}),M(),he(21,"br"),D(22,"label",63),F(23,"Facility Level:"),M(),D(24,"input",64),_e("ngModelChange",function(r){return me(e),K(2).facilityLevel=r}),M()(),D(25,"div",34)(26,"span"),F(27,"Result:"),M(),he(28,"br"),D(29,"em")(30,"span",36),F(31),M(),F(32," * .001 with Incubator Upgrade Level "),D(33,"span",65),F(34),M()(),F(35," = "),D(36,"span",14),F(37),M()()()()(),he(38,"hr"),M()}if(2&t){const e=K(2);V(20),Y("ngModel",e.incubatorUpgradeLevel),V(4),Y("ngModel",e.facilityLevel),V(7),Kt(e.facilityLevel),V(3),Kt(e.incubatorUpgradeLevel),V(3),He("*",e.incubatorModifierAmount," to Positive Trait Stat per Breed Level")}}function L$(t,n){if(1&t&&(D(0,"option",52),F(1),M()),2&t){const e=n.$implicit;Y("value",e.type),V(1),He(" ",e.name,"")}}function U$(t,n){if(1&t){const e=tt();D(0,"div"),he(1,"br"),D(2,"label",69),F(3,"Orb Infuser purchased?"),M(),D(4,"input",59),_e("input",function(){return me(e),K(3).toggleHasOrbInfuser()}),M()()}if(2&t){const e=K(3);V(4),Y("checked",e.hasOrbInfuser)}}function H$(t,n){if(1&t&&(D(0,"div")(1,"em")(2,"span",14),F(3),M(),F(4," / 1500"),M(),F(5," = "),D(6,"span",14),F(7),M()()),2&t){const e=K(3);V(3),Kt(e.notgBreedLevel),V(4),He("",e.notgOrbInfuserGain,"% added to Orb Stat Bonus % per Orb Level")}}const F0=function(t){return{inactiveCalculation:t}};function G$(t,n){if(1&t){const e=tt();D(0,"div")(1,"div")(2,"div",7)(3,"button",8),_e("click",function(){return me(e),K(2).expandAnswer("faqAnswerNectarOfTheGodsCalculator")}),F(4,"+"),M()(),D(5,"div",9)(6,"p"),F(7,"Nectar of the Gods Reset Gain"),M()()(),D(8,"div",66),he(9,"div",7),D(10,"div")(11,"em"),F(12,"Select an animal or enter your own values to see how much your Breed Modifier will increase. Selecting an animal pulls from their current breed level."),M()(),he(13,"br")(14,"br"),D(15,"div",30)(16,"div",31)(17,"div",39)(18,"label",40),F(19,"Animal:"),M(),D(20,"select",41),_e("ngModelChange",function(r){return me(e),K(2).notgSelectedAnimalType=r})("change",function(){return me(e),K(2).newNotgAnimalSelected()}),pe(21,L$,2,2,"option",42),M()(),D(22,"em"),F(23,"or"),M(),D(24,"div")(25,"label",67),F(26,"Breed Level:"),M(),D(27,"input",68),_e("change",function(){return me(e),K(2).notgAnimalNotSelected()})("ngModelChange",function(r){return me(e),K(2).notgBreedLevel=r}),M()(),pe(28,U$,5,1,"div",6),M(),D(29,"div",34)(30,"span"),F(31,"Result:"),M(),he(32,"br"),D(33,"div",35)(34,"em"),F(35,"If Breed Level <= 1500: "),M(),D(36,"em")(37,"span",14),F(38),M(),F(39," / 100"),M(),F(40," = "),D(41,"span",14),F(42),M()(),D(43,"div",35)(44,"em"),F(45,"If Breed Level > 1500: "),M(),D(46,"em"),F(47,"5 * (log(.005 * "),D(48,"span",14),F(49),M(),F(50," + 1)) + 15"),M(),F(51," = "),D(52,"span",14),F(53),M()(),he(54,"br"),pe(55,H$,8,2,"div",6),M()()(),he(56,"hr"),M()}if(2&t){const e=K(2);V(20),Y("ngModel",e.notgSelectedAnimalType),V(1),Y("ngForOf",e.availableAnimals),V(6),Y("ngModel",e.notgBreedLevel),V(1),Y("ngIf",e.seePinnacleSpoiler),V(5),Y("ngClass",hi(11,F0,e.notgBreedLevel>1500)),V(5),Kt(e.notgBreedLevel),V(4),He("",e.notgBreedModifierGain,"% added to Breed Modifier per Breed Level multiplier"),V(1),Y("ngClass",hi(13,F0,e.notgBreedLevel<=1500)),V(6),Kt(e.notgBreedLevel),V(4),He("",e.notgBreedModifierGain,"% added to Breed Modifier per Breed Level multiplier"),V(2),Y("ngIf",e.hasOrbInfuser)}}function z$(t,n){if(1&t){const e=tt();D(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswerRenownCalculator")}),F(5,"+"),M()(),D(6,"div",9)(7,"p"),F(8,"Coin gain from Renown"),M()()(),D(9,"div",29),he(10,"div",7),D(11,"div")(12,"em"),F(13,"Enter a Renown amount to see what the modifier would be on Coins won from races."),M()(),he(14,"br")(15,"br"),D(16,"div",30)(17,"div",31)(18,"label",32),F(19,"Renown:"),M(),D(20,"input",33),_e("ngModelChange",function(r){return me(e),K().coinGainRenownAmount=r}),M()(),D(21,"div",34)(22,"span"),F(23,"Result:"),M(),D(24,"div",35)(25,"em"),F(26,"If Renown <= 50: "),D(27,"span",36),F(28),M()(),F(29," = "),pe(30,E$,2,1,"span",37),M(),he(31,"br"),D(32,"div",35)(33,"em"),F(34,"If Renown > 50: 500 * log(.0035 * - ("),D(35,"span",36),F(36),M(),F(37," - 50) + 1) + 50 "),M(),F(38," = "),pe(39,I$,2,1,"span",37),M()()()()(),he(40,"hr"),D(41,"div")(42,"div")(43,"div",7)(44,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswerTrainingBreedXpCalculator")}),F(45,"+"),M()(),D(46,"div",9)(47,"p"),F(48,"Breed XP gain from Training"),M()()(),D(49,"div",38),he(50,"div",7),D(51,"div")(52,"em"),F(53,"Select an animal or enter your own values to see how much Breed XP you would gain from completing a single training. Selecting an animal pulls from their current bonuses."),M()(),he(54,"br")(55,"br"),D(56,"div",30)(57,"div",31)(58,"div",39)(59,"label",40),F(60,"Animal:"),M(),D(61,"select",41),_e("ngModelChange",function(r){return me(e),K().selectedAnimalType=r})("change",function(){return me(e),K().newAnimalSelected()}),pe(62,B$,2,2,"option",42),M()(),D(63,"em"),F(64,"or"),M(),D(65,"div")(66,"label",43),F(67,"Bonus Training Breed XP:"),M(),D(68,"input",44),_e("change",function(){return me(e),K().animalNotSelected()})("ngModelChange",function(r){return me(e),K().bonusBreedXp=r}),M(),he(69,"br"),D(70,"label",45),F(71,"Breeding Grounds Specialization Level:"),M(),D(72,"input",46),_e("ngModelChange",function(r){return me(e),K().breedingGroundsSpecializationLevel=r}),M()()(),D(73,"div",34)(74,"span"),F(75,"Result:"),M(),he(76,"br"),D(77,"em"),F(78,"(5 + "),D(79,"span",14),F(80),M(),F(81,") * (1 + "),D(82,"span",14),F(83),M(),F(84," * .1) "),M(),F(85," = "),D(86,"span",14),F(87),M()()()()(),he(88,"hr"),D(89,"div")(90,"div")(91,"div",7)(92,"button",8),_e("click",function(){return me(e),K().expandAnswer("faqAnswerBarnSpecializationGainCalculator")}),F(93,"+"),M()(),D(94,"div",9)(95,"p"),F(96,"Barn Specialization Calculator"),M()()(),D(97,"div",47),he(98,"div",7),D(99,"div",48)(100,"div")(101,"em"),F(102,"Select a Specialization Type and enter the Barn Upgrade Level or Specialization Level to see what impact that specialization would have. Specialization Level corresponds Barn Upgrade Level * 10 because your specialization improves every 10 barn upgrade levels."),M()(),he(103,"br")(104,"br"),D(105,"div",30)(106,"div",49)(107,"label",50),F(108,"Specialization:"),M(),D(109,"select",51),_e("ngModelChange",function(r){return me(e),K().selectedSpecialization=r})("change",function(){return me(e),K().checkForImprovements()}),D(110,"option",52),F(111,"Breeding Grounds"),M(),D(112,"option",52),F(113,"Training Facility"),M(),pe(114,O$,2,1,"option",53),pe(115,V$,2,1,"option",53),M(),pe(116,N$,5,1,"div",6),he(117,"br")(118,"br"),D(119,"div")(120,"label",54),F(121,"Barn Upgrade Level:"),M(),D(122,"input",55),_e("change",function(){return me(e),K().changeBarnUpgradeLevel()})("ngModelChange",function(r){return me(e),K().barnUpgradeLevel=r}),M(),he(123,"br"),D(124,"em"),F(125,"or"),M(),he(126,"br"),D(127,"label",56),F(128,"Barn Specialization Level:"),M(),D(129,"input",57),_e("change",function(){return me(e),K().changeBarnSpecializationLevel()})("ngModelChange",function(r){return me(e),K().barnSpecializationLevel=r}),M()()(),D(130,"div",34)(131,"span"),F(132,"Result:"),M(),he(133,"br")(134,"span",19),M()()()()(),he(135,"hr"),pe(136,F$,39,5,"div",6),pe(137,G$,57,15,"div",6),M()}if(2&t){const e=K();V(20),Y("ngModel",e.coinGainRenownAmount),V(4),Y("ngClass",hi(25,F0,e.coinGainRenownAmount>50)),V(4),Kt(e.coinGainRenownAmount),V(2),Y("ngIf",e.coinGainRenownAmount<=50),V(2),Y("ngClass",hi(27,F0,e.coinGainRenownAmount<=50)),V(4),Kt(e.coinGainRenownAmount),V(3),Y("ngIf",e.coinGainRenownAmount>50),V(22),Y("ngModel",e.selectedAnimalType),V(1),Y("ngForOf",e.availableAnimals),V(6),Y("ngModel",e.bonusBreedXp),V(4),Y("ngModel",e.breedingGroundsSpecializationLevel),V(8),Kt(e.bonusBreedXp),V(3),Kt(e.breedingGroundsSpecializationLevel),V(4),He("",e.trainingBreedXpGain," XP gained after completing any Training"),V(22),Y("ngModel",e.selectedSpecialization),V(1),Y("value",1),V(2),Y("value",2),V(2),Y("ngIf",e.seeAttractionSpoiler),V(1),Y("ngIf",e.seeResearchCenterSpoiler),V(1),Y("ngIf",e.seeItemSet2Spoiler),V(6),Y("ngModel",e.barnUpgradeLevel),V(7),Y("ngModel",e.barnSpecializationLevel),V(5),Y("innerHTML",e.barnSpecializationLevelAmount,Si),V(2),Y("ngIf",e.lookupService.isItemUnlocked("duoRace")),V(1),Y("ngIf",e.legacyTrackAvailable)}}let j$=(()=>{class t{constructor(e,i,r,a,c,d){this.componentCommunicationService=e,this.lookupService=i,this.gameLoopService=r,this.globalService=a,this.specializationService=c,this.utilityService=d,this.seeAttractionSpoiler=!1,this.seeResearchCenterSpoiler=!1,this.seeOceanCourseTypeSpoiler=!1,this.seeTundraCourseTypeSpoiler=!1,this.seeVolcanicCourseTypeSpoiler=!1,this.seeItemSet2Spoiler=!1,this.seePinnacleSpoiler=!1,this.currentSection=Qd.basics,this.faqSectionsEnum=Qd,this.sunnyTerrainInfo="",this.stormyTerrainInfo="",this.rainyTerrainInfo="",this.snowfallTerrainInfo="",this.ashfallTerrainInfo="",this.maelstromTerrainInfo="",this.hailstormTerrainInfo="",this.torridTerrainInfo="",this.legacyTrackAvailable=!1,this.coinGainRenownAmount=0,this.facilityLevel=0,this.incubatorUpgradeLevel=0,this.selectedAnimalType=0,this.animalSelected=!0,this.availableAnimals=[],this.bonusBreedXp=0,this.breedingGroundsSpecializationLevel=0,this.selectedSpecialization=1,this.barnUpgradeLevel=0,this.barnSpecializationLevel=0,this.hasBarnImprovements=!1,this.renownCoinGain=0,this.incubatorModifierAmount=0,this.trainingBreedXpGain=0,this.barnSpecializationLevelAmount="",this.notgSelectedAnimalType=0,this.notgAnimalSelected=!0,this.hasOrbInfuser=!1}ngOnInit(){var i,r,a,e=this;this.componentCommunicationService.setNewView(Mi.faqs),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=27&&(this.seeItemSet2Spoiler=!0),this.lookupService.isItemUnlocked("attractionSpecialization")&&(this.seeAttractionSpoiler=!0),this.lookupService.isItemUnlocked("researchCenterSpecialization")&&(this.seeResearchCenterSpoiler=!0),(null===(i=this.globalService.globalVar.animals.find(T=>T.type===Fe.Dolphin))||void 0===i?void 0:i.isAvailable)&&(this.seeOceanCourseTypeSpoiler=!0),(null===(r=this.globalService.globalVar.animals.find(T=>T.type===Fe.Penguin))||void 0===r?void 0:r.isAvailable)&&(this.seeTundraCourseTypeSpoiler=!0),(null===(a=this.globalService.globalVar.animals.find(T=>T.type===Fe.Salamander))||void 0===a?void 0:a.isAvailable)&&(this.seeVolcanicCourseTypeSpoiler=!0),this.lookupService.isItemUnlocked("thePinnacle")&&(this.seePinnacleSpoiler=!0),this.sunnyTerrainInfo=this.lookupService.getTerrainPopoverText(new Kn(Gt.Sunny)),this.stormyTerrainInfo=this.lookupService.getTerrainPopoverText(new Kn(Gt.Stormy)),this.rainyTerrainInfo=this.lookupService.getTerrainPopoverText(new Kn(Gt.Rainy)),this.torridTerrainInfo=this.lookupService.getTerrainPopoverText(new Kn(Gt.Torrid)),this.maelstromTerrainInfo=this.lookupService.getTerrainPopoverText(new Kn(Gt.Maelstrom)),this.hailstormTerrainInfo=this.lookupService.getTerrainPopoverText(new Kn(Gt.Hailstorm)),this.ashfallTerrainInfo=this.lookupService.getTerrainPopoverText(new Kn(Gt.Ashfall)),this.snowfallTerrainInfo=this.lookupService.getTerrainPopoverText(new Kn(Gt.Snowfall)),this.availableAnimals=this.globalService.globalVar.animals.filter(T=>T.isAvailable),this.coinGainRenownAmount=this.lookupService.getRenown(),this.facilityLevel=this.lookupService.getFacilityLevel();var c=this.globalService.globalVar.resources.find(T=>"Incubator Upgrade Lv1"===T.name),d=this.globalService.globalVar.resources.find(T=>"Incubator Upgrade Lv2"===T.name),m=this.globalService.globalVar.resources.find(T=>"Incubator Upgrade Lv3"===T.name),_=this.globalService.globalVar.resources.find(T=>"Incubator Upgrade Lv4"===T.name);null!=c&&(this.incubatorUpgradeLevel=1),null!=d&&(this.incubatorUpgradeLevel=2),null!=m&&(this.incubatorUpgradeLevel=3),null!=_&&(this.incubatorUpgradeLevel=4),this.globalService.globalVar.animals.forEach(T=>{T.allTrainingTracks.legacyTrackAvailable&&(this.legacyTrackAvailable=!0)}),this.newAnimalSelected(),this.newNotgAnimalSelected(),this.calculatorSubscription=this.gameLoopService.gameUpdateEvent.subscribe(Wa(function*(){e.handleRenownModifierCalculation(),e.handleIncubatorModifierCalculation(),e.handleTrainingBreedXpGainCalculation(),e.handleBarnSpecializationLevelAmountCalculation(),e.handleNectarOfTheGodsCalculation()}))}handleRenownModifierCalculation(){null!=this.coinGainRenownAmount&&(this.renownCoinGain=this.lookupService.getRenownCoinModifier(this.coinGainRenownAmount,!0))}handleIncubatorModifierCalculation(){if(null!=this.incubatorUpgradeLevel&&null!=this.facilityLevel){var r=0,e=.001,i=this.globalService.globalVar.modifiers.find(a=>"incubatorUpgradeIncreaseModifier"===a.text);null!=i&&(e=i.value),r=this.facilityLevel*e,isNaN(this.incubatorUpgradeLevel)||(this.incubatorUpgradeLevel=+this.incubatorUpgradeLevel),this.incubatorUpgradeLevel>=4?(r>.1&&(r=.1),this.incubatorUpgradeLevel=4):3===this.incubatorUpgradeLevel?r>.05&&(r=.05):2===this.incubatorUpgradeLevel?r>.025&&(r=.025):1===this.incubatorUpgradeLevel?r>.01&&(r=.01):this.incubatorUpgradeLevel<=0&&(r=0),this.incubatorModifierAmount=Math.round(1e3*r)/1e3}}handleTrainingBreedXpGainCalculation(){var e=new Ti;e.miscStats.bonusBreedXpGainFromTraining=this.bonusBreedXp,this.trainingBreedXpGain=this.lookupService.getTrainingBreedGaugeIncrease(this.breedingGroundsSpecializationLevel,e)}handleNectarOfTheGodsCalculation(){var e=100;if(this.notgAnimalSelected){var i=void 0;null!=this.notgSelectedAnimalType&&void 0!==(i=this.globalService.globalVar.animals.find(a=>a.getAnimalType()===Fe[this.notgSelectedAnimalType]))&&(this.notgBreedModifierGain=Math.round(100*this.globalService.getNectarOfTheGodsIncrease(i)*e)/e,this.notgOrbInfuserGain=this.globalService.getNectarOfTheGodsOrbInfusionIncrease(i))}else{var r=new Ti;this.notgBreedModifierGain=Math.round(100*this.globalService.getNectarOfTheGodsIncrease(r,this.notgBreedLevel)*e)/e,this.notgOrbInfuserGain=this.globalService.getNectarOfTheGodsOrbInfusionIncrease(r,this.notgBreedLevel)}}newAnimalSelected(){this.animalSelected=!0;var e=void 0;if(null!=this.selectedAnimalType&&void 0!==(e=this.globalService.globalVar.animals.find(r=>r.getAnimalType()===Fe[this.selectedAnimalType]))){if(this.bonusBreedXp=e.miscStats.bonusBreedXpGainFromTraining,e.associatedBarnNumber>=0)var i=this.globalService.globalVar.barns.find(r=>r.barnNumber===(null==e?void 0:e.associatedBarnNumber));void 0!==i&&i.barnUpgrades.specialization===ji.BreedingGrounds&&(this.breedingGroundsSpecializationLevel=i.barnUpgrades.specializationLevel)}}newNotgAnimalSelected(){console.log("Animal selected"),this.notgAnimalSelected=!0;var e=void 0;null!=this.notgSelectedAnimalType&&void 0!==(e=this.globalService.globalVar.animals.find(i=>i.getAnimalType()===Fe[this.notgSelectedAnimalType]))&&(this.notgBreedLevel=e.breedLevel)}animalNotSelected(){this.animalSelected=!1}notgAnimalNotSelected(){this.notgAnimalSelected=!1}handleBarnSpecializationLevelAmountCalculation(){1==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(ji.BreedingGrounds,this.barnSpecializationLevel,this.hasBarnImprovements):2==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(ji.TrainingFacility,this.barnSpecializationLevel,this.hasBarnImprovements):3==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(ji.Attraction,this.barnSpecializationLevel,this.hasBarnImprovements):4==+this.selectedSpecialization&&(this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(ji.ResearchCenter,this.barnSpecializationLevel,this.hasBarnImprovements))}checkForImprovements(){var e=!1;1==+this.selectedSpecialization?e=this.globalService.globalVar.resources.some(i=>"Breeding Grounds Improvements"===i.name):2==+this.selectedSpecialization?e=this.globalService.globalVar.resources.some(i=>"Training Facility Improvements"===i.name):3==+this.selectedSpecialization?e=this.globalService.globalVar.resources.some(i=>"Attraction Improvements"===i.name):4==+this.selectedSpecialization&&(e=this.globalService.globalVar.resources.some(i=>"Research Center Improvements"===i.name)),this.hasBarnImprovements=e}changeBarnUpgradeLevel(){this.barnSpecializationLevel=Math.floor(this.barnUpgradeLevel/10)}changeBarnSpecializationLevel(){this.barnUpgradeLevel=10*this.barnSpecializationLevel}viewSpoiler(e){"Attraction Specialization"===e&&(this.seeAttractionSpoiler=!0),"Research Center Specialization"===e&&(this.seeResearchCenterSpoiler=!0),"Ocean Course Type"===e&&(this.seeOceanCourseTypeSpoiler=!0),"Tundra Course Type"===e&&(this.seeTundraCourseTypeSpoiler=!0),"Volcanic Course Type"===e&&(this.seeVolcanicCourseTypeSpoiler=!0),"Item Set 2"===e&&(this.seeItemSet2Spoiler=!0)}expandAnswer(e){var i=document.getElementById(e);null!=i&&i.classList.toggle("hide")}toggleHasImprovements(){this.hasBarnImprovements=!this.hasBarnImprovements}toggleHasOrbInfuser(){this.hasOrbInfuser=!this.hasOrbInfuser}changeSection(e){this.currentSection=e}ngOnDestroy(){null!=this.calculatorSubscription&&this.calculatorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Me(qr),Me(yn),Me(jr),Me(ki),Me(zm),Me(Lr))},t.\u0275cmp=mi({type:t,selectors:[["app-faq-view"]],decls:21,vars:6,consts:[[1,"faqView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"subsections","s4Heading"],[1,"subsectionOption","buttonAsText",3,"ngClass","click"],[4,"ngIf"],[1,"expanderMargin"],["type","button","aria-label","Expand",3,"click"],[1,"faqQuestion"],["id","faqAnswerBreedGuide",1,"faqAnswer","hide"],["id","faqAnswerBreedBarnRows",1,"faqAnswer","hide"],["id","faqAnswerAllAnimals",1,"faqAnswer","hide"],[1,"flatlandColor","keyword"],[1,"keyword"],[1,"mountainColor","keyword"],[3,"ngClass","click"],[1,"hidden"],[1,"keyword",3,"ngClass"],[3,"innerHTML"],["id","faqAnswerTerrain",1,"faqAnswer","hide"],["id","faqAnswerBreedKeybinds",1,"faqAnswer","hide"],["id","faqAnswerSettings",1,"faqAnswer","hide"],["id","faqAnswerFeedback",1,"faqAnswer","hide"],["id","faqAnswerOverwhelmed",1,"faqAnswer","hide"],["id","faqAnswer1",1,"faqAnswer","hide"],["id","faqAnswer2",1,"faqAnswer","hide"],["id","faqAnswer3",1,"faqAnswer","hide"],["id","faqAnswer4",1,"faqAnswer","hide"],["id","faqAnswerRenownCalculator",1,"faqAnswer","hide"],[1,"inputsAndResult"],[1,"mb-3","inputs"],["for","renown-amount",1,"shortLabelMargin","progressionKeyword"],["id","renown-amount","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"result"],[3,"ngClass"],[1,"progressionKeyword"],["class","keyword",4,"ngIf"],["id","faqAnswerTrainingBreedXpCalculator",1,"faqAnswer","hide"],[1,"dropdownSelection"],["for","breed-xp-animal",1,"keyword"],["name","breed-xp-animal","id","breed-xp-animal",1,"spaced",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","bonus-breed-xp",1,"longLabelMargin","keyword"],["id","bonus-breed-xp","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","breeding-grounds-spec-level",1,"longLabelMargin","keyword"],["id","breeding-grounds-spec-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["id","faqAnswerBarnSpecializationGainCalculator",1,"faqAnswer","hide"],[1,"mb-3"],[1,"inputs"],["for","specialization-options",1,"keyword"],["name","specialization-options","id","specialization-options",1,"spaced",3,"ngModel","ngModelChange","change"],[3,"value"],[3,"value",4,"ngIf"],["for","barn-upgrade-level",1,"labelMargin","keyword"],["id","barn-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","barn-specialization-level",1,"labelMargin","keyword"],["id","barn-specialization-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","hasImprovements",1,"labelMargin","keyword"],["type","checkbox","id","hasImprovements",1,"spaced",3,"checked","input"],["id","faqAnswerIncubatorGrowthCalculator",1,"faqAnswer","hide"],["for","incubator-upgrade-level",1,"labelMargin","specialtyKeyword"],["id","incubator-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["for","facility-level",1,"labelMargin","progressionKeyword"],["id","facility-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"specialtyKeyword"],["id","faqAnswerNectarOfTheGodsCalculator",1,"faqAnswer","hide"],["for","notg-breed-level",1,"shortLabelMargin","keyword"],["id","notg-breed-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","hasOrbInfuser",1,"labelMargin","keyword"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),F(5,"Frequently Asked Questions"),M(),D(6,"em"),F(7,"This FAQ and game is still a work in progress! Bear with me if certain features aren't fully fleshed out and developed yet. If you have any feedback at all, please let me know using one of the links on the bottom right. Thank you so much for playing and hope you're enjoying it!"),M()(),he(8,"br"),D(9,"div",4)(10,"button",5),_e("click",function(){return i.changeSection(i.faqSectionsEnum.basics)}),F(11,"Basics"),M(),D(12,"button",5),_e("click",function(){return i.changeSection(i.faqSectionsEnum.progression)}),F(13,"Progression"),M(),D(14,"button",5),_e("click",function(){return i.changeSection(i.faqSectionsEnum.calculators)}),F(15,"Calculators"),M()(),he(16,"hr")(17,"br"),pe(18,k$,310,51,"div",6),pe(19,P$,132,15,"div",6),pe(20,z$,138,29,"div",6),M()()()),2&e&&(V(10),Y("ngClass",i.currentSection===i.faqSectionsEnum.basics?"active":""),V(2),Y("ngClass",i.currentSection===i.faqSectionsEnum.progression?"active":""),V(2),Y("ngClass",i.currentSection===i.faqSectionsEnum.calculators?"active":""),V(4),Y("ngIf",i.currentSection===i.faqSectionsEnum.basics),V(1),Y("ngIf",i.currentSection===i.faqSectionsEnum.progression),V(1),Y("ngIf",i.currentSection===i.faqSectionsEnum.calculators))},directives:[_r,on,nm,Us,Ll,Hs,Gs,Wh,Vr,VC,FC],styles:['.faqView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}.faqQuestion[_ngcontent-%COMP%]{display:inline-block;width:95%;font-weight:700}.hide[_ngcontent-%COMP%]{display:none}.expanderMargin[_ngcontent-%COMP%]{display:inline-block;width:5%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.inputsAndResult[_ngcontent-%COMP%]{display:flex}.inactiveCalculation[_ngcontent-%COMP%]{opacity:.5}.inputs[_ngcontent-%COMP%], .results[_ngcontent-%COMP%]{width:50%}.spoilerText[_ngcontent-%COMP%]{background-color:gray;color:transparent;-webkit-user-select:none;user-select:none;position:relative;display:inline-block;min-width:8rem}.spoilerText[_ngcontent-%COMP%]:hover > .hidden[_ngcontent-%COMP%]{display:block;color:#fff}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.shortLabelMargin[_ngcontent-%COMP%]{min-width:15%}.labelMargin[_ngcontent-%COMP%]{min-width:25%}.longLabelMargin[_ngcontent-%COMP%]{min-width:40%}.hidden[_ngcontent-%COMP%]{display:none;position:absolute}.subsections[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.viewSpoiler[_ngcontent-%COMP%]{background-color:inherit;color:inherit}@media (max-width: 800px){.expanderMargin[_ngcontent-%COMP%]{width:auto;margin-right:1rem}.faqQuestion[_ngcontent-%COMP%]{width:auto}}']}),t})(),q$=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i}ngOnInit(){this.componentCommunicationService.setNewView(Mi.stats),this.trackedStats=this.globalService.globalVar.trackedStats;var e=0;this.globalService.globalVar.animals.forEach(i=>{i.totalRacesRun>e&&(e=i.totalRacesRun,this.mostUsedAnimal=i.name,this.mostUsedAnimalCount=e)})}getColorClass(e){if(null!=e&&e.length>0){var i=this.globalService.globalVar.animals.filter(c=>c.isAvailable),r=new Ti;return i.forEach(c=>{e.includes(c.name)&&(r=c)}),{flatlandColor:"Flatland"===r.getRaceCourseType(),mountainColor:"Mountain"===r.getRaceCourseType(),waterColor:"Ocean"===r.getRaceCourseType(),tundraColor:"Tundra"===r.getRaceCourseType(),volcanicColor:"Volcanic"===r.getRaceCourseType()}}return{}}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(qr))},t.\u0275cmp=mi({type:t,selectors:[["app-stats-view"]],decls:37,vars:34,consts:[[1,"statsView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"coloredText",3,"ngClass"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),F(4,"Stats"),M(),he(5,"br")(6,"br"),F(7),Di(8,"number"),he(9,"br"),F(10),Di(11,"number"),he(12,"br"),F(13),Di(14,"number"),he(15,"br"),D(16,"span",4),F(17),Di(18,"number"),M(),he(19,"br"),D(20,"span",4),F(21),M(),he(22,"br"),D(23,"span",4),F(24),M(),he(25,"br"),D(26,"span",4),F(27),M(),he(28,"br"),D(29,"span",4),F(30),M(),he(31,"br"),D(32,"span",4),F(33),M(),he(34,"br"),D(35,"span",4),F(36),M()()()()),2&e&&(V(7),He(" Total Races: ",ad(8,18,i.trackedStats.totalRaces,"1.0","en-US")," "),V(3),He(" Total Meters Covered: ",ad(11,22,i.trackedStats.totalMetersRaced.toFixed(0),"1.0","en-US")," "),V(3),He(" Total Breeds: ",ad(14,26,i.trackedStats.totalBreeds,"1.0","en-US")," "),V(3),Y("ngClass",i.getColorClass(i.mostUsedAnimal)),V(1),Mn("Most Used Animal: ",i.mostUsedAnimal," (",ad(18,30,i.mostUsedAnimalCount,"1.0","en-US"),")"),V(3),Y("ngClass",i.getColorClass(i.trackedStats.highestMaxSpeed)),V(1),He("Highest Max Speed: ",i.trackedStats.highestMaxSpeed,""),V(2),Y("ngClass",i.getColorClass(i.trackedStats.highestAccelerationRate)),V(1),He("Highest Acceleration Rate: ",i.trackedStats.highestAccelerationRate,""),V(2),Y("ngClass",i.getColorClass(i.trackedStats.highestStamina)),V(1),He("Highest Stamina: ",i.trackedStats.highestStamina,""),V(2),Y("ngClass",i.getColorClass(i.trackedStats.highestPowerEfficiency)),V(1),He("Highest Power Efficiency: ",i.trackedStats.highestPowerEfficiency,""),V(2),Y("ngClass",i.getColorClass(i.trackedStats.highestFocusDistance)),V(1),He("Highest Focus Distance: ",i.trackedStats.highestFocusDistance,""),V(2),Y("ngClass",i.getColorClass(i.trackedStats.highestAdaptabilityDistance)),V(1),He("Highest Adaptability Distance: ",i.trackedStats.highestAdaptabilityDistance,""))},directives:[_r],pipes:[ts],styles:['.statsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}']}),t})();function $$(t,n){if(1&t&&(D(0,"div",13),he(1,"span",14),M()),2&t){const e=K().$implicit,i=K();V(1),Y("innerHTML",i.getPopover(e.name,e.itemType),Si)}}function W$(t,n){if(1&t&&(D(0,"p")(1,"span",8)(2,"span",9),F(3),M(),D(4,"span",10),F(5),M(),he(6,"hr",11),M(),pe(7,$$,2,1,"ng-template",null,12,ni),M()),2&t){const e=n.$implicit,i=Qt(8);V(1),Y("ngbPopover",i),V(2),Kt(e.name),V(2),He(" x ",e.amount,"")}}function X$(t,n){if(1&t&&(D(0,"div",13),he(1,"span",14),M()),2&t){const e=K().$implicit,i=K();V(1),Y("innerHTML",i.getPopover(e.name,e.itemType),Si)}}function Y$(t,n){if(1&t&&(D(0,"p")(1,"span",8)(2,"span",15),F(3),M(),D(4,"span",10),F(5),M(),he(6,"hr",11),M(),pe(7,X$,2,1,"ng-template",null,16,ni),M()),2&t){const e=n.$implicit,i=Qt(8);V(1),Y("ngbPopover",i),V(2),Kt(e.name),V(2),He(" x ",e.amount,"")}}function K$(t,n){if(1&t&&(D(0,"div",13),he(1,"span",14),M()),2&t){const e=K().$implicit,i=K();V(1),Y("innerHTML",i.getPopover(e.name,e.itemType),Si)}}function Z$(t,n){if(1&t&&(D(0,"p")(1,"span",8)(2,"span",17),F(3),M(),D(4,"span",10),F(5),M(),he(6,"hr",11),M(),pe(7,K$,2,1,"ng-template",null,18,ni),M()),2&t){const e=n.$implicit,i=Qt(8);V(1),Y("ngbPopover",i),V(2),Kt(e.name),V(2),He(" x ",e.amount,"")}}function Q$(t,n){if(1&t){const e=tt();D(0,"span")(1,"button",21),_e("click",function(){me(e);const r=K().$implicit,a=K(),c=Qt(22);return a.openOrbModal(c,r.name)}),D(2,"span",22),F(3),M(),D(4,"span",10),F(5),M()()()}if(2&t){const e=K().$implicit;V(3),Kt(e.name),V(2),He(" x ",e.amount,"")}}function J$(t,n){if(1&t&&(D(0,"span")(1,"span",22),F(2),M(),D(3,"span",10),F(4),M()()),2&t){const e=K().$implicit;V(2),Kt(e.name),V(2),He(" x ",e.amount,"")}}function eW(t,n){if(1&t&&(D(0,"div",13),he(1,"span",14),M()),2&t){const e=K().$implicit,i=K();V(1),Y("innerHTML",i.getPopover(e.name,e.itemType),Si)}}function tW(t,n){if(1&t&&(D(0,"p")(1,"span",8),pe(2,Q$,6,2,"span",19),pe(3,J$,5,2,"span",19),he(4,"hr",11),M(),pe(5,eW,2,1,"ng-template",null,20,ni),M()),2&t){const e=n.$implicit,i=Qt(6),r=K();V(1),Y("ngbPopover",i),V(1),Y("ngIf",r.isResourceAnOrb(e)),V(1),Y("ngIf",!r.isResourceAnOrb(e))}}function iW(t,n){if(1&t){const e=tt();D(0,"div",23)(1,"div",24)(2,"h4",25),F(3,"Orb Stats Info"),M(),D(4,"button",26),_e("click",function(){return me(e).$implicit.dismiss()}),F(5,"X"),M()(),D(6,"div",27),he(7,"app-orbs-view"),M()()}}let nW=(()=>{class t{constructor(e,i,r,a,c){this.globalService=e,this.lookupService=i,this.componentCommunicationService=r,this.utilityService=a,this.modalService=c,this.resources=[],this.equipment=[],this.specialtyItems=[],this.progressionResources=[]}ngOnInit(){this.componentCommunicationService.setNewView(Mi.resources),this.resources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Le.Food||e.itemType===Le.Resources).sort(),this.equipment=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Le.Equipment).sort(),this.specialtyItems=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Le.Specialty).sort(),this.progressionResources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Le.Progression).sort(),this.specialtyItems.find(e=>"Incubator Upgrade Lv2"===e.name)&&(this.specialtyItems=this.specialtyItems.filter(e=>"Incubator Upgrade Lv1"!==e.name)),this.specialtyItems.find(e=>"Incubator Upgrade Lv3"===e.name)&&(this.specialtyItems=this.specialtyItems.filter(e=>"Incubator Upgrade Lv2"!==e.name)),this.specialtyItems.find(e=>"Incubator Upgrade Lv4"===e.name)&&(this.specialtyItems=this.specialtyItems.filter(e=>"Incubator Upgrade Lv3"!==e.name)),this.specialtyItems.find(e=>"International Races"===e.name)&&(this.specialtyItems=this.specialtyItems.filter(e=>"National Races"!==e.name)),this.specialtyItems.find(e=>"Golden Whistle"===e.name)&&(this.specialtyItems=this.specialtyItems.filter(e=>"Whistle"!==e.name))}getPopover(e,i){return this.utilityService.getSanitizedHtml(this.lookupService.getResourcePopover(e,i))}isResourceAnOrb(e){return e.itemType===Le.Equipment&&("Sapphire Orb"===e.name||"Amethyst Orb"===e.name||"Topaz Orb"===e.name||"Amber Orb"===e.name||"Emerald Orb"===e.name||"Ruby Orb"===e.name)}openOrbModal(e,i){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(yn),Me(qr),Me(Lr),Me(ss))},t.\u0275cmp=mi({type:t,selectors:[["app-resources-view"]],decls:23,vars:4,consts:[[1,"resourcesView","gridContainer"],[1,"resources"],[1,"s4Heading","centered"],[4,"ngFor","ngForOf"],[1,"progression"],[1,"specialty"],[1,"equipment"],["orbContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"screenMarginLeft",3,"ngbPopover"],[1,"resourceKeyword"],[1,"rightAligned"],[1,"miniHr"],["resourceContent",""],[1,"popoverClass"],[3,"innerHTML"],[1,"progressionKeyword"],["progressionContent",""],[1,"specialtyKeyword"],["specialityContent",""],[4,"ngIf"],["equipmentContent",""],[1,"buttonAsText",3,"click"],[1,"equipmentKeyword"],[1,"modalClass","orbContent"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"div",2),F(3,"Resources"),M(),he(4,"br"),pe(5,W$,9,3,"p",3),M(),D(6,"div",4)(7,"div",2),F(8,"Progression"),M(),he(9,"br"),pe(10,Y$,9,3,"p",3),M(),D(11,"div",5)(12,"div",2),F(13,"Specialty"),M(),he(14,"br"),pe(15,Z$,9,3,"p",3),M(),D(16,"div",6)(17,"div",2),F(18,"Equipment"),M(),he(19,"br"),pe(20,tW,7,3,"p",3),M()(),pe(21,iW,8,0,"ng-template",null,7,ni)),2&e&&(V(5),Y("ngForOf",i.resources),V(5),Y("ngForOf",i.progressionResources),V(5),Y("ngForOf",i.specialtyItems),V(5),Y("ngForOf",i.equipment))},directives:[Vr,no,on,Nx],styles:['.resources[_ngcontent-%COMP%]{white-space:pre}.resourcesView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.orbContent[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:25%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:"resources progression specialty equipment"}.resources[_ngcontent-%COMP%]{grid-area:resources;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.progression[_ngcontent-%COMP%]{grid-area:progression;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.specialty[_ngcontent-%COMP%]{grid-area:specialty;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.equipment[_ngcontent-%COMP%]{grid-area:equipment;background-color:var(--background-secondary)}.rightAligned[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto auto;justify-content:stretch;grid-template-areas:"resources" "progression" "specialty" "equipment"}}']}),t})();var Ks=H(7206);let rW=(()=>{class t{constructor(e){this.globalService=e}getCodeItems(e){var r=Ks.AES.decrypt(e,"LaunchSecret!CLTRA71");if(0!==r.toString(Ks.enc.Utf8).length){var a=[],c=JSON.parse(r.toString(Ks.enc.Utf8));return null!=c&&c.rewards.length>0&&c.rewards.forEach(d=>{a.push(new Je(d.name,d.amount))}),a}}redeemCode(e){var r=Ks.AES.decrypt(e,"LaunchSecret!CLTRA71");if(0===r.toString(Ks.enc.Utf8).length)return alert("Invalid code entered."),!1;try{var a=JSON.parse(r.toString(Ks.enc.Utf8));if(null!=a&&a.rewards.length>0){if((new Date).getTime()>new Date(a.expirationDate).getTime())return alert("This code has expired."),!1;if(this.globalService.globalVar.redeemedCodes.some(c=>c.codeValue===r.toString(Ks.enc.Utf8)))return alert("This code has already been redeemed."),!1;a.rewards.forEach(c=>{var d=this.globalService.globalVar.resources.find(m=>m.name===c.name);null!=d?d.amount+=c.amount:this.globalService.globalVar.resources.push(c)}),a.codeValue=r.toString(Ks.enc.Utf8),this.globalService.globalVar.redeemedCodes.push(a)}}catch(c){return alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!"),!1}return!0}}return t.\u0275fac=function(e){return new(e||t)(Ft(ki))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),aW=(()=>{class t{constructor(e){this.lookupService=e}setupRewards(){this.redeemableCode=new b0,this.redeemableCode.expirationDate=new Date("2035-10-01"),this.redeemableCode.rewards.push(this.lookupService.gainCoins(1e5)),this.redeemableCode.rewards.push(this.lookupService.gainMangoes(100)),this.redeemableCode.rewards.push(this.lookupService.gainTokens(100))}createCode(){this.setupRewards();var i=JSON.stringify(this.redeemableCode);return Ks.AES.encrypt(i,"LaunchSecret!CLTRA71").toString()}}return t.\u0275fac=function(e){return new(e||t)(Ft(yn))},t.\u0275prov=si({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),oW=(()=>{class t{constructor(e,i,r,a,c,d,m,_,T){this.globalService=e,this.themeService=i,this.lookupService=r,this.codeRedemptionService=a,this.codeCreationService=c,this.deploymentService=d,this.componentCommunicationService=m,this.versionControlService=_,this.utilityService=T,this.raceDisplayInfoEnum=No,this.skipDrawRaceToggle=()=>{this.skipDrawRace=!this.skipDrawRace,this.globalService.globalVar.settings.set("skipDrawRace",this.skipDrawRace)},this.finishTrainingBeforeSwitchingToggle=()=>{this.finishTrainingBeforeSwitching=!this.finishTrainingBeforeSwitching,this.globalService.globalVar.settings.set("finishTrainingBeforeSwitching",this.finishTrainingBeforeSwitching)},this.hideTipsToggle=()=>{this.hideTips=!this.hideTips,this.globalService.globalVar.settings.set("hideTips",this.hideTips)},this.useNumbersForCircuitRankToggle=()=>{this.useNumbersForCircuitRank=!this.useNumbersForCircuitRank,this.globalService.globalVar.settings.set("useNumbersForCircuitRank",this.useNumbersForCircuitRank)},this.autoStartEventRaceToggle=()=>{this.autoStartEventRace=!this.autoStartEventRace,this.globalService.globalVar.settings.set("autoStartEventRace",this.autoStartEventRace)},this.quickViewBarnToggle=()=>{this.quickViewBarnMode=!this.quickViewBarnMode,this.globalService.globalVar.settings.set("quickViewBarnMode",this.quickViewBarnMode)},this.displayAverageDistancePaceToggle=()=>{this.displayAverageDistancePace=!this.displayAverageDistancePace,this.globalService.globalVar.settings.set("displayAverageDistancePace",this.displayAverageDistancePace)},this.showBarnOptionsToggle=()=>{this.showBarnOptions=!this.showBarnOptions,this.globalService.globalVar.settings.set("showBarnOptions",this.showBarnOptions)}}ngOnInit(){this.componentCommunicationService.setNewView(Mi.settings),this.deploymentService.codeCreationMode&&console.log(this.codeCreationService.createCode()),this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1);var e=this.globalService.globalVar.settings.get("skipDrawRace");this.skipDrawRace=void 0!==e&&e,this.skipDrawRacePopoverText=this.lookupService.getSettingDescriptions("Auto Skip Race Info");var i=this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching");this.finishTrainingBeforeSwitching=void 0!==i&&i,this.finishTrainingBeforeSwitchingPopoverText=this.lookupService.getSettingDescriptions("Finish Training Before Switching");var r=this.globalService.globalVar.settings.get("raceDisplayInfo");this.raceDisplayInfo=this.getRaceDisplayInfoName(void 0===r?No.both:r),this.raceDisplayInfoPopoverText=this.lookupService.getSettingDescriptions("Race Display Info");var a=this.globalService.globalVar.settings.get("hideTips");this.hideTips=void 0!==a&&a,this.hideTipsPopoverText=this.lookupService.getSettingDescriptions("Hide Tips");var c=this.globalService.globalVar.settings.get("useNumbersForCircuitRank");this.useNumbersForCircuitRank=void 0!==c&&c,this.useNumbersForCircuitRankPopoverText=this.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank");var d=this.globalService.globalVar.settings.get("autoStartEventRace");this.autoStartEventRace=void 0!==d&&d,this.autoStartEventRacePopoverText=this.lookupService.getSettingDescriptions("Auto Start Event Race");var m=this.globalService.globalVar.settings.get("quickViewBarnMode");this.quickViewBarnMode=void 0!==m&&m,this.quickViewBarnModePopoverText=this.lookupService.getSettingDescriptions("Quick View Barn");var _=this.globalService.globalVar.settings.get("displayAverageDistancePace");this.displayAverageDistancePace=void 0!==_&&_,this.displayAverageDistancePacePopoverText=this.lookupService.getSettingDescriptions("Display Average Distance Pace");var T=this.globalService.globalVar.settings.get("showBarnOptions");this.showBarnOptions=void 0!==T&&T,this.showBarnOptionsPopoverText=this.lookupService.getSettingDescriptions("Show Barn Options")}SaveGame(){var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);this.importExportValue=i}fileChanged(e){this.file=e.target.files[0]}LoadGame(){if(confirm("This will overwrite your existing game data. Continue?")){var e=LZString.decompressFromBase64(this.importExportValue),i=JSON.parse(e);null!=i&&(this.globalService.globalVar=Gm(hr,i),this.versionControlService.updatePlayerVersion())}}SaveGameToFile(){var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);let r=new Blob([i],{type:".txt"}),a=document.createElement("a"),c=URL.createObjectURL(r);a.href=c,a.download="Cultura-v"+this.globalService.globalVar.currentVersion.toString().replace(".","_")+"-"+(new Date).toLocaleDateString(),document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(c)},0)}LoadGameFromFile(){if((null==this.file||0===this.file.length)&&alert("First select a file to import."),confirm("This will overwrite your existing game data. Continue?")){let e=new FileReader;e.onload=i=>{var r=LZString.decompressFromBase64(e.result),a=JSON.parse(r);null!=a&&(this.globalService.globalVar=Gm(hr,a),this.versionControlService.updatePlayerVersion())},e.readAsText(this.file)}}saveRaceDisplayInfo(){this.globalService.globalVar.settings.set("raceDisplayInfo",this.raceDisplayInfo)}changeRaceDisplayInfo(e){this.globalService.globalVar.settings.set("raceDisplayInfo",e),this.raceDisplayInfo=this.getRaceDisplayInfoName(e)}changeTheme(e){var i=Vd;"White"===e&&(i=this.themeService.setWhiteTheme()),"Light"===e&&(i=this.themeService.setLightTheme()),"Twilight"===e&&(i=this.themeService.setTwilightTheme()),"Night"===e&&(i=this.themeService.setNightTheme()),this.globalService.globalVar.settings.set("theme",i),this.getThemeName()}getThemeName(){this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1)}getRaceDisplayInfoName(e){return e===No.both?"Both":e===No.text?"Text":e===No.draw?"Draw":""}enterRedemptionCode(){if(this.codeRedemptionService.redeemCode(this.enteredRedemptionCode)){var i=this.codeRedemptionService.getCodeItems(this.enteredRedemptionCode);if(void 0!==i){var r="";i.forEach(a=>r+=a.amount+" "+a.name+", "),r=r.replace(/,\s*$/,""),alert("You received: "+r)}}}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(Xl),Me(yn),Me(rW),Me(aW),Me(sM),Me(qr),Me(jm),Me(Lr))},t.\u0275cmp=mi({type:t,selectors:[["app-settings-view"]],decls:118,vars:21,consts:[[1,"settingsView"],[1,"info"],[1,"settingsGrid"],[1,"options"],[1,"s4Heading"],[1,"toggles"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","finishTraining",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","hideTips",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","useNumbersForCircuitRank",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","autoStartEventRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","quickViewBarn",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","displayAverageDistancePace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","showBarnOptions",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave","ngbDropdown","",1,"d-inline-block",3,"ngbPopover"],[1,"bottomAligned"],["type","button","id","raceDisplayInfoDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","raceDisplayInfoDropdown"],["ngbDropdownItem","",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","themeDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","themeDropdown"],[1,"saveLoad"],[1,"importExportDiv"],["id","importExport","name","importExport","rows","10",3,"ngModel","ngModelChange"],[1,"importExportButtons"],[3,"click"],["type","file","id","fileUpload",1,"spaced",3,"change"],[1,"codeRedemption"],["for","codeRedemptionText"],["id","codeRedemptionText","type","text",1,"spaced","codeRedemptionInput",3,"ngModel","ngModelChange"],[1,"screenMarginLeft",3,"click"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"h2"),F(3,"Settings"),M()(),D(4,"div",2)(5,"div",3)(6,"span",4),F(7,"Options"),M(),he(8,"br"),D(9,"div",5)(10,"span",6)(11,"label")(12,"input",7),_e("ngModelChange",function(a){return i.skipDrawRace=a})("input",function(){return i.skipDrawRaceToggle()}),M(),D(13,"span"),F(14,"Auto Skip Race Info"),M()()(),he(15,"br"),D(16,"span",6)(17,"label")(18,"input",8),_e("ngModelChange",function(a){return i.finishTrainingBeforeSwitching=a})("input",function(){return i.finishTrainingBeforeSwitchingToggle()}),M(),D(19,"span"),F(20,"Finish Training Before Switching "),M()()(),he(21,"br"),D(22,"span",6)(23,"label")(24,"input",9),_e("ngModelChange",function(a){return i.hideTips=a})("input",function(){return i.hideTipsToggle()}),M(),D(25,"span"),F(26,"Hide Tips"),M()()(),he(27,"br"),D(28,"span",6)(29,"label")(30,"input",10),_e("ngModelChange",function(a){return i.useNumbersForCircuitRank=a})("input",function(){return i.useNumbersForCircuitRankToggle()}),M(),D(31,"span"),F(32,"Use Numbers For Ranks"),M()()(),he(33,"br"),D(34,"span",6)(35,"label")(36,"input",11),_e("ngModelChange",function(a){return i.autoStartEventRace=a})("input",function(){return i.autoStartEventRaceToggle()}),M(),D(37,"span"),F(38,"Auto Start Event Race"),M()()(),he(39,"br"),D(40,"span",6)(41,"label")(42,"input",12),_e("ngModelChange",function(a){return i.quickViewBarnMode=a})("input",function(){return i.quickViewBarnToggle()}),M(),D(43,"span"),F(44,"Quick View Barn"),M()()(),he(45,"br"),D(46,"span",6)(47,"label")(48,"input",13),_e("ngModelChange",function(a){return i.displayAverageDistancePace=a})("input",function(){return i.displayAverageDistancePaceToggle()}),M(),D(49,"span"),F(50,"Display Distance From Average Pace During Race"),M()()(),he(51,"br"),D(52,"span",6)(53,"label")(54,"input",14),_e("ngModelChange",function(a){return i.showBarnOptions=a})("input",function(){return i.showBarnOptionsToggle()}),M(),D(55,"span"),F(56,"Show Barn Options"),M()()(),he(57,"br"),M(),D(58,"div",15)(59,"label",16),F(60,"Race Display Info:"),M(),D(61,"button",17),F(62),M(),D(63,"div",18)(64,"button",19),_e("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.draw)}),F(65,"Draw"),M(),D(66,"button",19),_e("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.text)}),F(67,"Text"),M(),D(68,"button",19),_e("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.both)}),F(69,"Both"),M()()(),he(70,"br"),D(71,"div",20)(72,"label",16),F(73,"Theme:"),M(),D(74,"button",21),F(75),M(),D(76,"div",22)(77,"button",19),_e("click",function(){return i.changeTheme("White")}),F(78,"White"),M(),D(79,"button",19),_e("click",function(){return i.changeTheme("Light")}),F(80,"Light"),M(),D(81,"button",19),_e("click",function(){return i.changeTheme("Twilight")}),F(82,"Twilight"),M(),D(83,"button",19),_e("click",function(){return i.changeTheme("Night")}),F(84,"Night"),M()()()(),D(85,"div",23)(86,"span",4),F(87,"Save/Load"),M(),he(88,"br"),D(89,"div",24)(90,"textarea",25),_e("ngModelChange",function(a){return i.importExportValue=a}),M(),D(91,"div",26)(92,"button",27),_e("click",function(){return i.LoadGame()}),F(93," Import "),M(),D(94,"button",27),_e("click",function(){return i.SaveGame()}),F(95," Export "),M()(),he(96,"br"),D(97,"div",26)(98,"div")(99,"button",27),_e("click",function(){return i.LoadGameFromFile()}),F(100," Import from File "),M(),D(101,"input",28),_e("change",function(a){return i.fileChanged(a)}),M()(),D(102,"button",27),_e("click",function(){return i.SaveGameToFile()}),F(103," Export to File "),M()()(),he(104,"br")(105,"br"),D(106,"div")(107,"span",4),F(108,"Code Redemption"),M(),he(109,"br")(110,"br"),D(111,"div",29)(112,"label",30),F(113,"Code: "),M(),D(114,"input",31),_e("ngModelChange",function(a){return i.enteredRedemptionCode=a}),M(),D(115,"button",32),_e("click",function(){return i.enterRedemptionCode()}),F(116," Enter "),M()(),he(117,"br"),M()()()()),2&e&&(V(10),Y("ngbPopover",i.skipDrawRacePopoverText),V(2),Y("ngModel",i.skipDrawRace),V(4),Y("ngbPopover",i.finishTrainingBeforeSwitchingPopoverText),V(2),Y("ngModel",i.finishTrainingBeforeSwitching),V(4),Y("ngbPopover",i.hideTipsPopoverText),V(2),Y("ngModel",i.hideTips),V(4),Y("ngbPopover",i.useNumbersForCircuitRankPopoverText),V(2),Y("ngModel",i.useNumbersForCircuitRank),V(4),Y("ngbPopover",i.autoStartEventRacePopoverText),V(2),Y("ngModel",i.autoStartEventRace),V(4),Y("ngbPopover",i.quickViewBarnModePopoverText),V(2),Y("ngModel",i.quickViewBarnMode),V(4),Y("ngbPopover",i.displayAverageDistancePacePopoverText),V(2),Y("ngModel",i.displayAverageDistancePace),V(4),Y("ngbPopover",i.showBarnOptionsPopoverText),V(2),Y("ngModel",i.showBarnOptions),V(4),Y("ngbPopover",i.raceDisplayInfoPopoverText),V(4),Kt(i.raceDisplayInfo),V(13),Kt(i.currentTheme),V(15),Y("ngModel",i.importExportValue),V(24),Y("ngModel",i.enteredRedemptionCode))},directives:[no,Jc,Hs,Gs,pu,f1,B0,d1,Us],styles:['.settingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}#raceDisplayInfoDropdown[_ngcontent-%COMP%], #themeDropdown[_ngcontent-%COMP%]{border:1px solid;border-color:var(--background-tertiary)}.bottomAligned[_ngcontent-%COMP%]{vertical-align:bottom}.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1fr 1%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:". options saveLoad .";background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.options[_ngcontent-%COMP%]{grid-area:options}.saveLoad[_ngcontent-%COMP%]{grid-area:saveLoad}#importExport[_ngcontent-%COMP%]{width:100%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.importExportButtons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.codeRedemption[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.codeRedemptionInput[_ngcontent-%COMP%]{flex:1}@media (max-width: 800px){.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:". options ." ". saveLoad ."}}']}),t})();function sW(t,n){if(1&t){const e=tt();D(0,"div",11),_e("click",function(){return me(e),K().getNewTip()}),D(1,"span"),F(2),M()()}if(2&t){const e=K();V(2),Mn("",e.displayingFunFact?"Fun Fact: ":"Tip: ","",e.randomTip,"")}}let lW=(()=>{class t{constructor(e,i,r,a,c){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.componentCommunicationService=a,this.utilityService=c,this.displayingFunFact=!1,this.lastDisplayedFunFact=!1}ngOnInit(){var e=this;this.displayTip=!this.globalService.globalVar.settings.get("hideTips"),this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.randomTip=this.lookupService.getRandomTip(),this.totalTime=0,this.maxTipTime=60,this.gameLoopService.gameUpdateEvent.subscribe(function(){var i=Wa(function*(r){if(e.displayTip=!e.globalService.globalVar.settings.get("hideTips"),e.totalTime+=r,e.totalTime>=e.maxTipTime&&e.displayTip){e.totalTime=0;var a=e.utilityService.getRandomInteger(1,4);a<=3||e.lastDisplayedFunFact?(e.displayingFunFact=!1,e.lastDisplayedFunFact=!1,e.randomTip=e.lookupService.getRandomTip()):4===a&&(e.displayingFunFact=!0,e.lastDisplayedFunFact=!0,e.randomTip=e.lookupService.getRandomFunFact())}});return function(r){return i.apply(this,arguments)}}())}getNewTip(){this.totalTime=0;var e=this.utilityService.getRandomInteger(1,4);e<=3||this.lastDisplayedFunFact?(this.displayingFunFact=!1,this.lastDisplayedFunFact=!1,this.randomTip=this.lookupService.getRandomTip()):4===e&&(this.displayingFunFact=!0,this.lastDisplayedFunFact=!0,this.randomTip=this.lookupService.getRandomFunFact())}openFAQs(){this.componentCommunicationService.setNewView(Mi.faqs)}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(jr),Me(yn),Me(qr),Me(Lr))},t.\u0275cmp=mi({type:t,selectors:[["app-footer"]],decls:22,vars:1,consts:[[1,"footerView"],[1,"gridContainer"],[1,"area1"],["class","area2 keyword tips",3,"click",4,"ngIf"],[1,"area3","keyword","rightAlign"],[1,"faqs",3,"click"],["href","https://discord.gg/TgbRXsXQF3","rel","noopener noreferrer","target","_blank"],["href","https://www.reddit.com/message/compose/?to=Jaghancement","rel","noopener noreferrer","target","_blank"],["href","mailto:CulturaIdle@gmail.com"],[1,"area4","keyword","rightAlign"],["href","https://www.buymeacoffee.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],[1,"area2","keyword","tips",3,"click"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1)(2,"div",2),he(3,"span"),M(),pe(4,sW,3,2,"div",3),D(5,"div",4)(6,"span")(7,"span",5),_e("click",function(){return i.openFAQs()}),F(8,"FAQs"),M(),F(9," | "),D(10,"a",6),F(11,"Discord"),M(),F(12," | "),D(13,"a",7),F(14,"Reddit"),M(),F(15," | "),D(16,"a",8),F(17,"Email"),M()()(),D(18,"div",9)(19,"span")(20,"a",10),F(21,"Donate"),M()()()()()),2&e&&(V(4),Y("ngIf",i.displayTip))},directives:[on],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 1fr 20% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". area1 area2 area3 ." ". area1 area2 area4 ."}a[_ngcontent-%COMP%], .faqs[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.faqs[_ngcontent-%COMP%]{cursor:pointer}.faqs[_ngcontent-%COMP%]:hover{text-decoration:underline}.area1[_ngcontent-%COMP%]{grid-area:area1;justify-self:stretch}.area2[_ngcontent-%COMP%]{grid-area:area2;justify-self:stretch}.area3[_ngcontent-%COMP%]{grid-area:area3;justify-self:stretch}.area4[_ngcontent-%COMP%]{grid-area:area4;justify-self:stretch}.rightAlign[_ngcontent-%COMP%]{text-align:right}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 0% 1fr 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". . . area3 ." ". . . area4 ."}.tips[_ngcontent-%COMP%]{display:none}}']}),t})();const cW=["tutorialContent"],uW=["eventLoadingContent"];function dW(t,n){1&t&&(D(0,"div",19),he(1,"app-barn-view"),M())}function fW(t,n){1&t&&(D(0,"div",20),he(1,"app-race-selection-view"),M())}function hW(t,n){1&t&&(D(0,"div",21),he(1,"app-animals-view"),M())}function pW(t,n){1&t&&(D(0,"div",22),he(1,"app-decks-view"),M())}function gW(t,n){1&t&&(D(0,"div",23),he(1,"app-shop-view"),M())}function vW(t,n){1&t&&(D(0,"div",24),he(1,"app-incubator-view"),M())}function mW(t,n){1&t&&(D(0,"div",25),he(1,"app-training-track-view"),M())}function bW(t,n){1&t&&(D(0,"div",26),he(1,"app-faq-view"),M())}function _W(t,n){1&t&&(D(0,"div",27),he(1,"app-stats-view"),M())}function yW(t,n){1&t&&(D(0,"div",28),he(1,"app-resources-view"),M())}function wW(t,n){1&t&&(D(0,"div",29),he(1,"app-settings-view"),M())}function SW(t,n){if(1&t){const e=tt();D(0,"div",30)(1,"div",31)(2,"h4",32),F(3,"Tutorial"),M(),D(4,"button",33),_e("click",function(){return me(e),K().closeTutorialModal()}),F(5,"X"),M()(),he(6,"div",34),D(7,"div",35)(8,"span")(9,"button",36),_e("click",function(){return me(e),K().skipTutorial()}),F(10,"Skip Tutorial"),M()(),D(11,"span")(12,"button",36),_e("click",function(){return me(e),K().continueTutorial()}),F(13,"Continue"),M()()()()}if(2&t){const e=K();V(6),Y("innerHTML",e.tutorialText,Si)}}function CW(t,n){if(1&t){const e=tt();D(0,"div",30)(1,"div",31)(2,"h4",32),F(3,"Loading..."),M(),D(4,"button",33),_e("click",function(){return me(e),K().closeModals()}),F(5,"X"),M()(),D(6,"div",37),F(7," Grand Prix is calculating offline time. Load times may be long while this finishes. "),M(),D(8,"div",35)(9,"span")(10,"button",36),_e("click",function(){return me(e),K().closeModals()}),F(11,"Continue"),M()()()()}}let TW=(()=>{class t{constructor(e,i,r,a,c,d,m){this.ref=e,this.globalService=i,this.modalService=r,this.tutorialService=a,this.componentCommunicationService=c,this.sanitizer=d,this.gameLoopService=m,this.navigationEnum=Mi,this.activeView=Mi.barn,this.loadingScreenDisplayed=!1}ngOnInit(){var e=this;this.openTutorialModal(),this.eventPrixSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=Wa(function*(a){null!=e.globalService.globalVar.eventRaceData&&e.globalService.globalVar.eventRaceData.isCatchingUp&&!e.loadingScreenDisplayed?(e.loadingScreenDisplayed=!0,e.openLoadingModal()):null!=e.globalService.globalVar.eventRaceData&&!e.globalService.globalVar.eventRaceData.isCatchingUp&&e.loadingScreenDisplayed&&(e.loadingScreenDisplayed=!1,e.closeModals())});return function(a){return r.apply(this,arguments)}}());var i=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=Wa(function*(a){e.globalService.globalVar.tutorials.showTutorial&&e.openTutorialModal(),e.globalService.globalVar.tutorials.tutorialCompleted&&i.unsubscribe()});return function(a){return r.apply(this,arguments)}}())}changeView(e){this.activeView=e}openTutorialModal(){if(!this.globalService.globalVar.tutorials.tutorialCompleted){var e=this.tutorialService.getTutorialState(this.globalService.globalVar.tutorials.currentTutorialId);this.activeView===e.associatedTab&&(this.tutorialText=this.sanitizer.sanitize(vn.HTML,this.sanitizer.bypassSecurityTrustHtml(e.tutorialText+"\n")),this.globalService.globalVar.tutorials.showTutorial=!1,5===e.id&&(this.globalService.globalVar.tutorials.currentTutorialId+=1),this.modalService.open(this.tutorialContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(i=>{this.closeTutorialModal()},i=>{this.closeTutorialModal()}))}}openLoadingModal(){this.modalService.open(this.eventLoadingContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(e=>{this.closeModals()},e=>{this.closeModals()})}closeModals(){this.modalService.dismissAll()}closeTutorialModal(){this.modalService.dismissAll()}skipTutorial(){this.tutorialService.skipTutorial(),this.closeTutorialModal()}continueTutorial(){this.closeTutorialModal()}}return t.\u0275fac=function(e){return new(e||t)(Me(go),Me(ki),Me(ss),Me(lM),Me(qr),Me(dl),Me(jr))},t.\u0275cmp=mi({type:t,selectors:[["app-main"]],viewQuery:function(e,i){if(1&e&&(Ba(cW,7),Ba(uW,7)),2&e){let r;mn(r=bn())&&(i.tutorialContent=r.first),mn(r=bn())&&(i.eventLoadingContent=r.first)}},decls:23,vars:11,consts:[[1,"gridContainer"],[1,"headerArea"],[1,"mainArea"],["id","BarnView","class","mainView",4,"ngIf"],["id","RaceSelectionView","class","mainView",4,"ngIf"],["id","AnimalsView","class","mainView",4,"ngIf"],["id","DecksView","class","mainView",4,"ngIf"],["id","ShopView","class","mainView",4,"ngIf"],["id","IncubatorView","class","mainView",4,"ngIf"],["id","TrainingTrackView","class","mainView",4,"ngIf"],["id","FaqsView","class","mainView",4,"ngIf"],["id","StatsView","class","mainView",4,"ngIf"],["id","ResourcesView","class","mainView",4,"ngIf"],["id","SettingsView","class","mainView",4,"ngIf"],[1,"navArea"],[3,"viewChanged"],[1,"footerArea"],["tutorialContent",""],["eventLoadingContent",""],["id","BarnView",1,"mainView"],["id","RaceSelectionView",1,"mainView"],["id","AnimalsView",1,"mainView"],["id","DecksView",1,"mainView"],["id","ShopView",1,"mainView"],["id","IncubatorView",1,"mainView"],["id","TrainingTrackView",1,"mainView"],["id","FaqsView",1,"mainView"],["id","StatsView",1,"mainView"],["id","ResourcesView",1,"mainView"],["id","SettingsView",1,"mainView"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"],[1,"modal-body"]],template:function(e,i){1&e&&(D(0,"div",0)(1,"div",1),he(2,"app-header"),M(),D(3,"div",2),pe(4,dW,2,0,"div",3),pe(5,fW,2,0,"div",4),pe(6,hW,2,0,"div",5),pe(7,pW,2,0,"div",6),pe(8,gW,2,0,"div",7),pe(9,vW,2,0,"div",8),pe(10,mW,2,0,"div",9),pe(11,bW,2,0,"div",10),pe(12,_W,2,0,"div",11),pe(13,yW,2,0,"div",12),pe(14,wW,2,0,"div",13),M(),D(15,"div",14)(16,"app-navigation",15),_e("viewChanged",function(a){return i.changeView(a)}),M()(),D(17,"div",16),he(18,"app-footer"),M()(),pe(19,SW,14,1,"ng-template",null,17,ni),pe(21,CW,12,0,"ng-template",null,18,ni)),2&e&&(V(4),Y("ngIf",i.activeView===i.navigationEnum.barn),V(1),Y("ngIf",i.activeView===i.navigationEnum.raceselection),V(1),Y("ngIf",i.activeView===i.navigationEnum.animals),V(1),Y("ngIf",i.activeView===i.navigationEnum.relayTeams),V(1),Y("ngIf",i.activeView===i.navigationEnum.shop),V(1),Y("ngIf",i.activeView===i.navigationEnum.incubator),V(1),Y("ngIf",i.activeView===i.navigationEnum.trainingtrack),V(1),Y("ngIf",i.activeView===i.navigationEnum.faqs),V(1),Y("ngIf",i.activeView===i.navigationEnum.stats),V(1),Y("ngIf",i.activeView===i.navigationEnum.resources),V(1),Y("ngIf",i.activeView===i.navigationEnum.settings))},directives:[wF,on,ZU,kz,kq,Lq,c$,D$,Vx,j$,q$,nW,oW,Ex,lW],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100vh;grid-template-columns:88% 12%;grid-template-rows:6% 88% 6%;justify-content:stretch;grid-template-areas:"header header" "main  nav" "footer footer"}.barnOptions[_ngcontent-%COMP%]{position:sticky;bottom:0;right:0;width:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.8)}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100%;position:fixed;top:0;left:0;bottom:0;right:0;grid-template-columns:88% 12%;grid-template-rows:auto 1fr auto;justify-content:stretch;grid-template-areas:"header header" "main  main" "footer footer"}.navArea[_ngcontent-%COMP%]{display:none}}.mainArea[_ngcontent-%COMP%]{grid-area:main;justify-self:stretch;background-color:var(--background-default);color:var(--foreground-default);overflow:auto}.navArea[_ngcontent-%COMP%]{grid-area:nav;justify-self:stretch;background-color:var(--background-secondary);color:var(--foreground-default)}.footerArea[_ngcontent-%COMP%]{grid-area:footer;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.headerArea[_ngcontent-%COMP%]{grid-area:header;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.mainView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.rightAlign[_ngcontent-%COMP%]{float:right}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.spaceBetween[_ngcontent-%COMP%]{justify-content:space-between!important}']}),t})(),MW=(()=>{class t{constructor(e,i,r,a,c,d,m,_,T,A,q){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.specializationService=a,this.themeService=c,this.raceLogicService=d,this.deploymentService=m,this.versionControlService=_,this.utilityService=T,this.grandPrixLogicService=A,this.activatedRoute=q,this.title="Cultura",this.newGame=!0,this.saveTime=0,this.saveFrequency=10,this.racingSaveFrequency=20}ngOnInit(){var e=this,i=localStorage.getItem("culturaIdleGameData");if((null==i||0===i.length)&&(i=localStorage.getItem("gameData")),null!=i){var r=LZString.decompressFromBase64(i),a=JSON.parse(r);null!=a&&(this.newGame=!1,this.globalService.globalVar=Gm(hr,a),this.loadStartup())}this.deploymentService.setDevMode();var d=this.deploymentService.devModeActive;(this.newGame||this.deploymentService.forceStartNewGame)&&this.globalService.initializeGlobalVariables(),d&&(this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.devModeInitialize(70,4)),this.versionControlService.updatePlayerVersion(),this.gameLoopService.gameUpdateEvent.subscribe(function(){var T=Wa(function*(A){e.gameCheckup(A),e.saveTime+=A;var q=e.saveFrequency;e.globalService.globalVar.userIsRacing&&(q=e.racingSaveFrequency),e.saveTime>=q&&(e.saveTime=0,e.saveGame());performance.now()});return function(A){return T.apply(this,arguments)}}()),this.gameLoopService.Update()}gameCheckup(e){if(this.handleMonthlyMangoTimer(),null!=this.globalService.globalVar.animals){this.globalService.globalVar.animals.filter(a=>a.isAvailable).forEach(a=>{a.canTrain=this.lookupService.canAnimalTrain(a)});var i=this.globalService.globalVar.animals.filter(a=>a.isAvailable&&null!=a.currentTraining&&a.canTrain);i.length>0&&i.forEach(a=>{var c;if(null!=a.currentTraining&&a.canTrain)for(a.currentTraining.timeTrained+=e,this.specializationService.handleAttractionRevenue(e,a),this.specializationService.handleTrainingFacilityImprovementsIncreases(e,a);null!==a.currentTraining&&a.currentTraining.timeTrained>=a.currentTraining.timeToComplete;){var d=this.globalService.globalVar.barns.find(T=>T.barnNumber===a.associatedBarnNumber),m=0;null!=d&&d.barnUpgrades.specialization===ji.BreedingGrounds&&(m=d.barnUpgrades.specializationLevel),null!=d&&d.barnUpgrades.specialization===ji.ResearchCenter?this.specializationService.handleResearchCenterStatIncrease(a,d):a.increaseStatsFromCurrentTraining(),this.globalService.calculateAnimalRacingStats(a);var _=this.lookupService.getTrainingBreedGaugeIncrease(m,a);this.globalService.IncreaseAnimalBreedGauge(a,_),a.currentTraining.timeTrained-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining<=0&&(a.currentTraining=null),null!=a.queuedTraining&&(null!==a.currentTraining&&a.currentTraining.trainingTimeRemaining>0&&(a.queuedTraining.timeTrained+=null===(c=a.currentTraining)||void 0===c?void 0:c.timeTrained),a.currentTraining=a.queuedTraining,a.queuedTraining=null)}});var r=this.globalService.globalVar.incubator;null!=r&&null!=r.assignedAnimal&&null!=r.assignedTrait&&(r.timeTrained+=e,r.timeTrained>=r.timeToComplete&&(r.assignedAnimal.trait=r.assignedTrait,this.globalService.calculateAnimalRacingStats(r.assignedAnimal),r.assignedAnimal.canTrain=!0,r.timeTrained=0,r.assignedAnimal=null,r.assignedTrait=null)),this.handleScrimmageTimer(e),this.handleFreeRaceTimer(e),this.grandPrixLogicService.handleGrandPrix(e)}}handleMonthlyMangoTimer(){var e=new Date(this.globalService.globalVar.lastTimeStamp).getMonth();(new Date).getMonth()!==e&&(this.globalService.globalVar.monthlyMangoesPurchased=0)}handleScrimmageTimer(e){this.globalService.globalVar.animals.forEach(i=>{i.scrimmageEnergyTimer>0&&(i.scrimmageEnergyTimer-=e)})}handleFreeRaceTimer(e){if(this.globalService.globalVar.freeRaceTimePeriodCounter+=e,!this.globalService.globalVar.userIsRacing){var i=300,r=this.globalService.globalVar.modifiers.find(d=>"freeRacesTimePeriodModifier"===d.text);void 0!==r&&(i=r.value);var a=3600,c=this.globalService.globalVar.modifiers.find(d=>"autoFreeRacesMaxIdleTimePeriodModifier"===d.text);void 0!==c&&(a=c.value),this.globalService.globalVar.freeRaceTimePeriodCounter>=i&&a>0&&(this.globalService.globalVar.freeRaceTimePeriodCounter>a&&(this.globalService.globalVar.freeRaceTimePeriodCounter=a),this.globalService.globalVar.freeRaceTimePeriodCounter-=i,a-=i,this.globalService.globalVar.freeRaceCounter=0,this.globalService.globalVar.autoFreeRaceCounter=0,this.handleAutoFreeRace(e))}}handleAutoFreeRace(e){var i=this.lookupService.getResourceByName("Team Manager");if(null==i&&(i=0),0!==i&&this.globalService.globalVar.animalDecks.some(A=>A.autoRunFreeRace)){var r=this.globalService.globalVar.animalDecks.find(A=>A.autoRunFreeRace);if(null!=r)for(var a=i-this.globalService.globalVar.autoFreeRaceCounter,c=this.lookupService.getTotalFreeRacesPerPeriod(),d=0;d<a;d++){if(this.globalService.globalVar.freeRaceCounter>=c)return;this.globalService.globalVar.autoFreeRaceCounter+=1,this.globalService.globalVar.freeRaceCounter+=1;var m=this.globalService.generateFreeRace(),_=!0;m.raceLegs.forEach(A=>{(null==r?void 0:r.selectedAnimals.some(q=>q.raceCourseType===A.courseType))||(_=!1)}),_&&this.raceLogicService.runRace(m,!0)}}}saveGame(){if("undefined"!=typeof Worker){const r=new Worker(H.tu(new URL(H.p+H.u(151),H.b)));r.onmessage=({data:a})=>{localStorage.setItem("culturaIdleGameData",a),r.terminate()},r.postMessage(this.globalService.globalVar)}else{var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);localStorage.setItem("culturaIdleGameData",i)}}loadStartup(){var e=this.globalService.globalVar.settings.get("theme");null!=e&&this.themeService.setActiveTheme(e)}}return t.\u0275fac=function(e){return new(e||t)(Me(ki),Me(jr),Me(yn),Me(zm),Me(Xl),Me(w0),Me(sM),Me(jm),Me(Lr),Me(uO),Me(Gl))},t.\u0275cmp=mi({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"grayTheme"]],template:function(e,i){1&e&&(D(0,"div",0),he(1,"app-main"),M(),he(2,"router-outlet"))},directives:[TW,Tm],styles:[""]}),t})(),xW=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=sr({type:t,bootstrap:[MW]}),t.\u0275inj=Xn({providers:[ki,Xl],imports:[[_E,jB,gF,io,WC,PI]]}),t})();(function Z6(){tS=!1})(),mE().bootstrapModule(xW).catch(t=>console.error(t))},7977:(ye,ue,H)=>{"use strict";const j=ue;j.bignum=H(3854),j.define=H(9516).define,j.base=H(7813),j.constants=H(5459),j.decoders=H(196),j.encoders=H(1131)},9516:(ye,ue,H)=>{"use strict";const j=H(1131),W=H(196),I=H(3894);function p(k,P){this.name=k,this.body=P,this.decoders={},this.encoders={}}ue.define=function(P,E){return new p(P,E)},p.prototype._createNamed=function(P){const E=this.name;function R(x){this._initNamed(x,E)}return I(R,P),R.prototype._initNamed=function(S,O){P.call(this,S,O)},new R(this)},p.prototype._getDecoder=function(P){return this.decoders.hasOwnProperty(P=P||"der")||(this.decoders[P]=this._createNamed(W[P])),this.decoders[P]},p.prototype.decode=function(P,E,R){return this._getDecoder(E).decode(P,R)},p.prototype._getEncoder=function(P){return this.encoders.hasOwnProperty(P=P||"der")||(this.encoders[P]=this._createNamed(j[P])),this.encoders[P]},p.prototype.encode=function(P,E,R){return this._getEncoder(E).encode(P,R)}},2769:(ye,ue,H)=>{"use strict";const j=H(3894),W=H(4919).b,I=H(2038).Buffer;function G(k,P){W.call(this,P),I.isBuffer(k)?(this.base=k,this.offset=0,this.length=k.length):this.error("Input not Buffer")}function p(k,P){if(Array.isArray(k))this.length=0,this.value=k.map(function(E){return p.isEncoderBuffer(E)||(E=new p(E,P)),this.length+=E.length,E},this);else if("number"==typeof k){if(!(0<=k&&k<=255))return P.error("non-byte EncoderBuffer value");this.value=k,this.length=1}else if("string"==typeof k)this.value=k,this.length=I.byteLength(k);else{if(!I.isBuffer(k))return P.error("Unsupported type: "+typeof k);this.value=k,this.length=k.length}}j(G,W),ue.C=G,G.isDecoderBuffer=function(P){return P instanceof G||"object"==typeof P&&I.isBuffer(P.base)&&"DecoderBuffer"===P.constructor.name&&"number"==typeof P.offset&&"number"==typeof P.length&&"function"==typeof P.save&&"function"==typeof P.restore&&"function"==typeof P.isEmpty&&"function"==typeof P.readUInt8&&"function"==typeof P.skip&&"function"==typeof P.raw},G.prototype.save=function(){return{offset:this.offset,reporter:W.prototype.save.call(this)}},G.prototype.restore=function(P){const E=new G(this.base);return E.offset=P.offset,E.length=this.offset,this.offset=P.offset,W.prototype.restore.call(this,P.reporter),E},G.prototype.isEmpty=function(){return this.offset===this.length},G.prototype.readUInt8=function(P){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(P||"DecoderBuffer overrun")},G.prototype.skip=function(P,E){if(!(this.offset+P<=this.length))return this.error(E||"DecoderBuffer overrun");const R=new G(this.base);return R._reporterState=this._reporterState,R.offset=this.offset,R.length=this.offset+P,this.offset+=P,R},G.prototype.raw=function(P){return this.base.slice(P?P.offset:this.offset,this.length)},ue.R=p,p.isEncoderBuffer=function(P){return P instanceof p||"object"==typeof P&&"EncoderBuffer"===P.constructor.name&&"number"==typeof P.length&&"function"==typeof P.join},p.prototype.join=function(P,E){return P||(P=I.alloc(this.length)),E||(E=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(R){R.join(P,E),E+=R.length}):("number"==typeof this.value?P[E]=this.value:"string"==typeof this.value?P.write(this.value,E):I.isBuffer(this.value)&&this.value.copy(P,E),E+=this.length)),P}},7813:(ye,ue,H)=>{"use strict";const j=ue;j.Reporter=H(4919).b,j.DecoderBuffer=H(2769).C,j.EncoderBuffer=H(2769).R,j.Node=H(1430)},1430:(ye,ue,H)=>{"use strict";const j=H(4919).b,W=H(2769).R,I=H(2769).C,G=H(2391),p=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],k=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(p);function E(x,S,O){const C={};this._baseState=C,C.name=O,C.enc=x,C.parent=S||null,C.children=null,C.tag=null,C.args=null,C.reverseArgs=null,C.choice=null,C.optional=!1,C.any=!1,C.obj=!1,C.use=null,C.useDecoder=null,C.key=null,C.default=null,C.explicit=null,C.implicit=null,C.contains=null,C.parent||(C.children=[],this._wrap())}ye.exports=E;const R=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];E.prototype.clone=function(){const S=this._baseState,O={};R.forEach(function(B){O[B]=S[B]});const C=new this.constructor(O.parent);return C._baseState=O,C},E.prototype._wrap=function(){const S=this._baseState;k.forEach(function(O){this[O]=function(){const B=new this.constructor(this);return S.children.push(B),B[O].apply(B,arguments)}},this)},E.prototype._init=function(S){const O=this._baseState;G(null===O.parent),S.call(this),O.children=O.children.filter(function(C){return C._baseState.parent===this},this),G.equal(O.children.length,1,"Root node can have only one child")},E.prototype._useArgs=function(S){const O=this._baseState,C=S.filter(function(B){return B instanceof this.constructor},this);S=S.filter(function(B){return!(B instanceof this.constructor)},this),0!==C.length&&(G(null===O.children),O.children=C,C.forEach(function(B){B._baseState.parent=this},this)),0!==S.length&&(G(null===O.args),O.args=S,O.reverseArgs=S.map(function(B){if("object"!=typeof B||B.constructor!==Object)return B;const N={};return Object.keys(B).forEach(function(z){z==(0|z)&&(z|=0),N[B[z]]=z}),N}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(x){E.prototype[x]=function(){throw new Error(x+" not implemented for encoding: "+this._baseState.enc)}}),p.forEach(function(x){E.prototype[x]=function(){const O=this._baseState,C=Array.prototype.slice.call(arguments);return G(null===O.tag),O.tag=x,this._useArgs(C),this}}),E.prototype.use=function(S){G(S);const O=this._baseState;return G(null===O.use),O.use=S,this},E.prototype.optional=function(){return this._baseState.optional=!0,this},E.prototype.def=function(S){const O=this._baseState;return G(null===O.default),O.default=S,O.optional=!0,this},E.prototype.explicit=function(S){const O=this._baseState;return G(null===O.explicit&&null===O.implicit),O.explicit=S,this},E.prototype.implicit=function(S){const O=this._baseState;return G(null===O.explicit&&null===O.implicit),O.implicit=S,this},E.prototype.obj=function(){const S=this._baseState,O=Array.prototype.slice.call(arguments);return S.obj=!0,0!==O.length&&this._useArgs(O),this},E.prototype.key=function(S){const O=this._baseState;return G(null===O.key),O.key=S,this},E.prototype.any=function(){return this._baseState.any=!0,this},E.prototype.choice=function(S){const O=this._baseState;return G(null===O.choice),O.choice=S,this._useArgs(Object.keys(S).map(function(C){return S[C]})),this},E.prototype.contains=function(S){const O=this._baseState;return G(null===O.use),O.contains=S,this},E.prototype._decode=function(S,O){const C=this._baseState;if(null===C.parent)return S.wrapResult(C.children[0]._decode(S,O));let X,B=C.default,N=!0,z=null;if(null!==C.key&&(z=S.enterKey(C.key)),C.optional){let U=null;if(null!==C.explicit?U=C.explicit:null!==C.implicit?U=C.implicit:null!==C.tag&&(U=C.tag),null!==U||C.any){if(N=this._peekTag(S,U,C.any),S.isError(N))return N}else{const Z=S.save();try{null===C.choice?this._decodeGeneric(C.tag,S,O):this._decodeChoice(S,O),N=!0}catch(ee){N=!1}S.restore(Z)}}if(C.obj&&N&&(X=S.enterObject()),N){if(null!==C.explicit){const Z=this._decodeTag(S,C.explicit);if(S.isError(Z))return Z;S=Z}const U=S.offset;if(null===C.use&&null===C.choice){let Z;C.any&&(Z=S.save());const ee=this._decodeTag(S,null!==C.implicit?C.implicit:C.tag,C.any);if(S.isError(ee))return ee;C.any?B=S.raw(Z):S=ee}if(O&&O.track&&null!==C.tag&&O.track(S.path(),U,S.length,"tagged"),O&&O.track&&null!==C.tag&&O.track(S.path(),S.offset,S.length,"content"),C.any||(B=null===C.choice?this._decodeGeneric(C.tag,S,O):this._decodeChoice(S,O)),S.isError(B))return B;if(!C.any&&null===C.choice&&null!==C.children&&C.children.forEach(function(ee){ee._decode(S,O)}),C.contains&&("octstr"===C.tag||"bitstr"===C.tag)){const Z=new I(B);B=this._getUse(C.contains,S._reporterState.obj)._decode(Z,O)}}return C.obj&&N&&(B=S.leaveObject(X)),null===C.key||null===B&&!0!==N?null!==z&&S.exitKey(z):S.leaveKey(z,C.key,B),B},E.prototype._decodeGeneric=function(S,O,C){const B=this._baseState;return"seq"===S||"set"===S?null:"seqof"===S||"setof"===S?this._decodeList(O,S,B.args[0],C):/str$/.test(S)?this._decodeStr(O,S,C):"objid"===S&&B.args?this._decodeObjid(O,B.args[0],B.args[1],C):"objid"===S?this._decodeObjid(O,null,null,C):"gentime"===S||"utctime"===S?this._decodeTime(O,S,C):"null_"===S?this._decodeNull(O,C):"bool"===S?this._decodeBool(O,C):"objDesc"===S?this._decodeStr(O,S,C):"int"===S||"enum"===S?this._decodeInt(O,B.args&&B.args[0],C):null!==B.use?this._getUse(B.use,O._reporterState.obj)._decode(O,C):O.error("unknown tag: "+S)},E.prototype._getUse=function(S,O){const C=this._baseState;return C.useDecoder=this._use(S,O),G(null===C.useDecoder._baseState.parent),C.useDecoder=C.useDecoder._baseState.children[0],C.implicit!==C.useDecoder._baseState.implicit&&(C.useDecoder=C.useDecoder.clone(),C.useDecoder._baseState.implicit=C.implicit),C.useDecoder},E.prototype._decodeChoice=function(S,O){const C=this._baseState;let B=null,N=!1;return Object.keys(C.choice).some(function(z){const X=S.save(),U=C.choice[z];try{const Z=U._decode(S,O);if(S.isError(Z))return!1;B={type:z,value:Z},N=!0}catch(Z){return S.restore(X),!1}return!0},this),N?B:S.error("Choice not matched")},E.prototype._createEncoderBuffer=function(S){return new W(S,this.reporter)},E.prototype._encode=function(S,O,C){const B=this._baseState;if(null!==B.default&&B.default===S)return;const N=this._encodeValue(S,O,C);return void 0===N||this._skipDefault(N,O,C)?void 0:N},E.prototype._encodeValue=function(S,O,C){const B=this._baseState;if(null===B.parent)return B.children[0]._encode(S,O||new j);let N=null;if(this.reporter=O,B.optional&&void 0===S){if(null===B.default)return;S=B.default}let z=null,X=!1;if(B.any)N=this._createEncoderBuffer(S);else if(B.choice)N=this._encodeChoice(S,O);else if(B.contains)z=this._getUse(B.contains,C)._encode(S,O),X=!0;else if(B.children)z=B.children.map(function(U){if("null_"===U._baseState.tag)return U._encode(null,O,S);if(null===U._baseState.key)return O.error("Child should have a key");const Z=O.enterKey(U._baseState.key);if("object"!=typeof S)return O.error("Child expected, but input is not object");const ee=U._encode(S[U._baseState.key],O,S);return O.leaveKey(Z),ee},this).filter(function(U){return U}),z=this._createEncoderBuffer(z);else if("seqof"===B.tag||"setof"===B.tag){if(!B.args||1!==B.args.length)return O.error("Too many args for : "+B.tag);if(!Array.isArray(S))return O.error("seqof/setof, but data is not Array");const U=this.clone();U._baseState.implicit=null,z=this._createEncoderBuffer(S.map(function(Z){return this._getUse(this._baseState.args[0],S)._encode(Z,O)},U))}else null!==B.use?N=this._getUse(B.use,C)._encode(S,O):(z=this._encodePrimitive(B.tag,S),X=!0);if(!B.any&&null===B.choice){const U=null!==B.implicit?B.implicit:B.tag,Z=null===B.implicit?"universal":"context";null===U?null===B.use&&O.error("Tag could be omitted only for .use()"):null===B.use&&(N=this._encodeComposite(U,X,Z,z))}return null!==B.explicit&&(N=this._encodeComposite(B.explicit,!1,"context",N)),N},E.prototype._encodeChoice=function(S,O){const C=this._baseState,B=C.choice[S.type];return B||G(!1,S.type+" not found in "+JSON.stringify(Object.keys(C.choice))),B._encode(S.value,O)},E.prototype._encodePrimitive=function(S,O){const C=this._baseState;if(/str$/.test(S))return this._encodeStr(O,S);if("objid"===S&&C.args)return this._encodeObjid(O,C.reverseArgs[0],C.args[1]);if("objid"===S)return this._encodeObjid(O,null,null);if("gentime"===S||"utctime"===S)return this._encodeTime(O,S);if("null_"===S)return this._encodeNull();if("int"===S||"enum"===S)return this._encodeInt(O,C.args&&C.reverseArgs[0]);if("bool"===S)return this._encodeBool(O);if("objDesc"===S)return this._encodeStr(O,S);throw new Error("Unsupported tag: "+S)},E.prototype._isNumstr=function(S){return/^[0-9 ]*$/.test(S)},E.prototype._isPrintstr=function(S){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(S)}},4919:(ye,ue,H)=>{"use strict";const j=H(3894);function W(G){this._reporterState={obj:null,path:[],options:G||{},errors:[]}}function I(G,p){this.path=G,this.rethrow(p)}ue.b=W,W.prototype.isError=function(p){return p instanceof I},W.prototype.save=function(){const p=this._reporterState;return{obj:p.obj,pathLen:p.path.length}},W.prototype.restore=function(p){const k=this._reporterState;k.obj=p.obj,k.path=k.path.slice(0,p.pathLen)},W.prototype.enterKey=function(p){return this._reporterState.path.push(p)},W.prototype.exitKey=function(p){const k=this._reporterState;k.path=k.path.slice(0,p-1)},W.prototype.leaveKey=function(p,k,P){const E=this._reporterState;this.exitKey(p),null!==E.obj&&(E.obj[k]=P)},W.prototype.path=function(){return this._reporterState.path.join("/")},W.prototype.enterObject=function(){const p=this._reporterState,k=p.obj;return p.obj={},k},W.prototype.leaveObject=function(p){const k=this._reporterState,P=k.obj;return k.obj=p,P},W.prototype.error=function(p){let k;const P=this._reporterState,E=p instanceof I;if(k=E?p:new I(P.path.map(function(R){return"["+JSON.stringify(R)+"]"}).join(""),p.message||p,p.stack),!P.options.partial)throw k;return E||P.errors.push(k),k},W.prototype.wrapResult=function(p){const k=this._reporterState;return k.options.partial?{result:this.isError(p)?null:p,errors:k.errors}:p},j(I,Error),I.prototype.rethrow=function(p){if(this.message=p+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,I),!this.stack)try{throw new Error(this.message)}catch(k){this.stack=k.stack}return this}},5496:(ye,ue)=>{"use strict";function H(j){const W={};return Object.keys(j).forEach(function(I){(0|I)==I&&(I|=0),W[j[I]]=I}),W}ue.tagClass={0:"universal",1:"application",2:"context",3:"private"},ue.tagClassByName=H(ue.tagClass),ue.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},ue.tagByName=H(ue.tag)},5459:(ye,ue,H)=>{"use strict";const j=ue;j._reverse=function(I){const G={};return Object.keys(I).forEach(function(p){(0|p)==p&&(p|=0),G[I[p]]=p}),G},j.der=H(5496)},7127:(ye,ue,H)=>{"use strict";const j=H(3894),W=H(3854),I=H(2769).C,G=H(1430),p=H(5496);function k(x){this.enc="der",this.name=x.name,this.entity=x,this.tree=new P,this.tree._init(x.body)}function P(x){G.call(this,"der",x)}function E(x,S){let O=x.readUInt8(S);if(x.isError(O))return O;const C=p.tagClass[O>>6],B=0==(32&O);if(31==(31&O)){let z=O;for(O=0;128==(128&z);){if(z=x.readUInt8(S),x.isError(z))return z;O<<=7,O|=127&z}}else O&=31;return{cls:C,primitive:B,tag:O,tagStr:p.tag[O]}}function R(x,S,O){let C=x.readUInt8(O);if(x.isError(C))return C;if(!S&&128===C)return null;if(0==(128&C))return C;const B=127&C;if(B>4)return x.error("length octect is too long");C=0;for(let N=0;N<B;N++){C<<=8;const z=x.readUInt8(O);if(x.isError(z))return z;C|=z}return C}ye.exports=k,k.prototype.decode=function(S,O){return I.isDecoderBuffer(S)||(S=new I(S,O)),this.tree._decode(S,O)},j(P,G),P.prototype._peekTag=function(S,O,C){if(S.isEmpty())return!1;const B=S.save(),N=E(S,'Failed to peek tag: "'+O+'"');return S.isError(N)?N:(S.restore(B),N.tag===O||N.tagStr===O||N.tagStr+"of"===O||C)},P.prototype._decodeTag=function(S,O,C){const B=E(S,'Failed to decode tag of "'+O+'"');if(S.isError(B))return B;let N=R(S,B.primitive,'Failed to get length of "'+O+'"');if(S.isError(N))return N;if(!C&&B.tag!==O&&B.tagStr!==O&&B.tagStr+"of"!==O)return S.error('Failed to match tag: "'+O+'"');if(B.primitive||null!==N)return S.skip(N,'Failed to match body of: "'+O+'"');const z=S.save(),X=this._skipUntilEnd(S,'Failed to skip indefinite length body: "'+this.tag+'"');return S.isError(X)?X:(N=S.offset-z.offset,S.restore(z),S.skip(N,'Failed to match body of: "'+O+'"'))},P.prototype._skipUntilEnd=function(S,O){for(;;){const C=E(S,O);if(S.isError(C))return C;const B=R(S,C.primitive,O);if(S.isError(B))return B;let N;if(N=C.primitive||null!==B?S.skip(B):this._skipUntilEnd(S,O),S.isError(N))return N;if("end"===C.tagStr)break}},P.prototype._decodeList=function(S,O,C,B){const N=[];for(;!S.isEmpty();){const z=this._peekTag(S,"end");if(S.isError(z))return z;const X=C.decode(S,"der",B);if(S.isError(X)&&z)break;N.push(X)}return N},P.prototype._decodeStr=function(S,O){if("bitstr"===O){const C=S.readUInt8();return S.isError(C)?C:{unused:C,data:S.raw()}}if("bmpstr"===O){const C=S.raw();if(C.length%2==1)return S.error("Decoding of string type: bmpstr length mismatch");let B="";for(let N=0;N<C.length/2;N++)B+=String.fromCharCode(C.readUInt16BE(2*N));return B}if("numstr"===O){const C=S.raw().toString("ascii");return this._isNumstr(C)?C:S.error("Decoding of string type: numstr unsupported characters")}if("octstr"===O)return S.raw();if("objDesc"===O)return S.raw();if("printstr"===O){const C=S.raw().toString("ascii");return this._isPrintstr(C)?C:S.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(O)?S.raw().toString():S.error("Decoding of string type: "+O+" unsupported")},P.prototype._decodeObjid=function(S,O,C){let B;const N=[];let z=0,X=0;for(;!S.isEmpty();)X=S.readUInt8(),z<<=7,z|=127&X,0==(128&X)&&(N.push(z),z=0);if(128&X&&N.push(z),B=C?N:[N[0]/40|0,N[0]%40].concat(N.slice(1)),O){let ee=O[B.join(" ")];void 0===ee&&(ee=O[B.join(".")]),void 0!==ee&&(B=ee)}return B},P.prototype._decodeTime=function(S,O){const C=S.raw().toString();let B,N,z,X,U,Z;if("gentime"===O)B=0|C.slice(0,4),N=0|C.slice(4,6),z=0|C.slice(6,8),X=0|C.slice(8,10),U=0|C.slice(10,12),Z=0|C.slice(12,14);else{if("utctime"!==O)return S.error("Decoding "+O+" time is not supported yet");B=0|C.slice(0,2),N=0|C.slice(2,4),z=0|C.slice(4,6),X=0|C.slice(6,8),U=0|C.slice(8,10),Z=0|C.slice(10,12),B=B<70?2e3+B:1900+B}return Date.UTC(B,N-1,z,X,U,Z,0)},P.prototype._decodeNull=function(){return null},P.prototype._decodeBool=function(S){const O=S.readUInt8();return S.isError(O)?O:0!==O},P.prototype._decodeInt=function(S,O){const C=S.raw();let B=new W(C);return O&&(B=O[B.toString(10)]||B),B},P.prototype._use=function(S,O){return"function"==typeof S&&(S=S(O)),S._getDecoder("der").tree}},196:(ye,ue,H)=>{"use strict";const j=ue;j.der=H(7127),j.pem=H(9617)},9617:(ye,ue,H)=>{"use strict";const j=H(3894),W=H(2038).Buffer,I=H(7127);function G(p){I.call(this,p),this.enc="pem"}j(G,I),ye.exports=G,G.prototype.decode=function(k,P){const E=k.toString().split(/[\r\n]+/g),R=P.label.toUpperCase(),x=/^-----(BEGIN|END) ([^-]+)-----$/;let S=-1,O=-1;for(let N=0;N<E.length;N++){const z=E[N].match(x);if(null!==z&&z[2]===R){if(-1!==S){if("END"!==z[1])break;O=N;break}if("BEGIN"!==z[1])break;S=N}}if(-1===S||-1===O)throw new Error("PEM section not found for: "+R);const C=E.slice(S+1,O).join("");C.replace(/[^a-z0-9+/=]+/gi,"");const B=W.from(C,"base64");return I.prototype.decode.call(this,B,P)}},6374:(ye,ue,H)=>{"use strict";const j=H(3894),W=H(2038).Buffer,I=H(1430),G=H(5496);function p(R){this.enc="der",this.name=R.name,this.entity=R,this.tree=new k,this.tree._init(R.body)}function k(R){I.call(this,"der",R)}function P(R){return R<10?"0"+R:R}ye.exports=p,p.prototype.encode=function(x,S){return this.tree._encode(x,S).join()},j(k,I),k.prototype._encodeComposite=function(x,S,O,C){const B=function E(R,x,S,O){let C;if("seqof"===R?R="seq":"setof"===R&&(R="set"),G.tagByName.hasOwnProperty(R))C=G.tagByName[R];else{if("number"!=typeof R||(0|R)!==R)return O.error("Unknown tag: "+R);C=R}return C>=31?O.error("Multi-octet tag encoding unsupported"):(x||(C|=32),C|=G.tagClassByName[S||"universal"]<<6,C)}(x,S,O,this.reporter);if(C.length<128){const X=W.alloc(2);return X[0]=B,X[1]=C.length,this._createEncoderBuffer([X,C])}let N=1;for(let X=C.length;X>=256;X>>=8)N++;const z=W.alloc(2+N);z[0]=B,z[1]=128|N;for(let X=1+N,U=C.length;U>0;X--,U>>=8)z[X]=255&U;return this._createEncoderBuffer([z,C])},k.prototype._encodeStr=function(x,S){if("bitstr"===S)return this._createEncoderBuffer([0|x.unused,x.data]);if("bmpstr"===S){const O=W.alloc(2*x.length);for(let C=0;C<x.length;C++)O.writeUInt16BE(x.charCodeAt(C),2*C);return this._createEncoderBuffer(O)}return"numstr"===S?this._isNumstr(x)?this._createEncoderBuffer(x):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===S?this._isPrintstr(x)?this._createEncoderBuffer(x):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(S)||"objDesc"===S?this._createEncoderBuffer(x):this.reporter.error("Encoding of string type: "+S+" unsupported")},k.prototype._encodeObjid=function(x,S,O){if("string"==typeof x){if(!S)return this.reporter.error("string objid given, but no values map found");if(!S.hasOwnProperty(x))return this.reporter.error("objid not found in values map");x=S[x].split(/[\s.]+/g);for(let z=0;z<x.length;z++)x[z]|=0}else if(Array.isArray(x)){x=x.slice();for(let z=0;z<x.length;z++)x[z]|=0}if(!Array.isArray(x))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(x));if(!O){if(x[1]>=40)return this.reporter.error("Second objid identifier OOB");x.splice(0,2,40*x[0]+x[1])}let C=0;for(let z=0;z<x.length;z++){let X=x[z];for(C++;X>=128;X>>=7)C++}const B=W.alloc(C);let N=B.length-1;for(let z=x.length-1;z>=0;z--){let X=x[z];for(B[N--]=127&X;(X>>=7)>0;)B[N--]=128|127&X}return this._createEncoderBuffer(B)},k.prototype._encodeTime=function(x,S){let O;const C=new Date(x);return"gentime"===S?O=[P(C.getUTCFullYear()),P(C.getUTCMonth()+1),P(C.getUTCDate()),P(C.getUTCHours()),P(C.getUTCMinutes()),P(C.getUTCSeconds()),"Z"].join(""):"utctime"===S?O=[P(C.getUTCFullYear()%100),P(C.getUTCMonth()+1),P(C.getUTCDate()),P(C.getUTCHours()),P(C.getUTCMinutes()),P(C.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+S+" time is not supported yet"),this._encodeStr(O,"octstr")},k.prototype._encodeNull=function(){return this._createEncoderBuffer("")},k.prototype._encodeInt=function(x,S){if("string"==typeof x){if(!S)return this.reporter.error("String int or enum given, but no values map");if(!S.hasOwnProperty(x))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(x));x=S[x]}if("number"!=typeof x&&!W.isBuffer(x)){const B=x.toArray();!x.sign&&128&B[0]&&B.unshift(0),x=W.from(B)}if(W.isBuffer(x)){let B=x.length;0===x.length&&B++;const N=W.alloc(B);return x.copy(N),0===x.length&&(N[0]=0),this._createEncoderBuffer(N)}if(x<128)return this._createEncoderBuffer(x);if(x<256)return this._createEncoderBuffer([0,x]);let O=1;for(let B=x;B>=256;B>>=8)O++;const C=new Array(O);for(let B=C.length-1;B>=0;B--)C[B]=255&x,x>>=8;return 128&C[0]&&C.unshift(0),this._createEncoderBuffer(W.from(C))},k.prototype._encodeBool=function(x){return this._createEncoderBuffer(x?255:0)},k.prototype._use=function(x,S){return"function"==typeof x&&(x=x(S)),x._getEncoder("der").tree},k.prototype._skipDefault=function(x,S,O){const C=this._baseState;let B;if(null===C.default)return!1;const N=x.join();if(void 0===C.defaultBuffer&&(C.defaultBuffer=this._encodeValue(C.default,S,O).join()),N.length!==C.defaultBuffer.length)return!1;for(B=0;B<N.length;B++)if(N[B]!==C.defaultBuffer[B])return!1;return!0}},1131:(ye,ue,H)=>{"use strict";const j=ue;j.der=H(6374),j.pem=H(3530)},3530:(ye,ue,H)=>{"use strict";const j=H(3894),W=H(6374);function I(G){W.call(this,G),this.enc="pem"}j(I,W),ye.exports=I,I.prototype.encode=function(p,k){const E=W.prototype.encode.call(this,p).toString("base64"),R=["-----BEGIN "+k.label+"-----"];for(let x=0;x<E.length;x+=64)R.push(E.slice(x,x+64));return R.push("-----END "+k.label+"-----"),R.join("\n")}},3854:function(ye,ue,H){!function(j,W){"use strict";function I(y,o){if(!y)throw new Error(o||"Assertion failed")}function G(y,o){y.super_=o;var l=function(){};l.prototype=o.prototype,y.prototype=new l,y.prototype.constructor=y}function p(y,o,l){if(p.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,null!==y&&(("le"===o||"be"===o)&&(l=o,o=10),this._init(y||0,o||10,l||"be"))}var k;"object"==typeof j?j.exports=p:W.BN=p,p.BN=p,p.wordSize=26;try{k="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:H(950).Buffer}catch(y){}function P(y,o){var l=y.charCodeAt(o);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function E(y,o,l){var f=P(y,l);return l-1>=o&&(f|=P(y,l-1)<<4),f}function R(y,o,l,f){for(var u=0,h=Math.min(y.length,l),b=o;b<h;b++){var w=y.charCodeAt(b)-48;u*=f,u+=w>=49?w-49+10:w>=17?w-17+10:w}return u}p.isBN=function(o){return o instanceof p||null!==o&&"object"==typeof o&&o.constructor.wordSize===p.wordSize&&Array.isArray(o.words)},p.max=function(o,l){return o.cmp(l)>0?o:l},p.min=function(o,l){return o.cmp(l)<0?o:l},p.prototype._init=function(o,l,f){if("number"==typeof o)return this._initNumber(o,l,f);if("object"==typeof o)return this._initArray(o,l,f);"hex"===l&&(l=16),I(l===(0|l)&&l>=2&&l<=36);var u=0;"-"===(o=o.toString().replace(/\s+/g,""))[0]&&(u++,this.negative=1),u<o.length&&(16===l?this._parseHex(o,u,f):(this._parseBase(o,l,u),"le"===f&&this._initArray(this.toArray(),l,f)))},p.prototype._initNumber=function(o,l,f){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[67108863&o],this.length=1):o<4503599627370496?(this.words=[67108863&o,o/67108864&67108863],this.length=2):(I(o<9007199254740992),this.words=[67108863&o,o/67108864&67108863,1],this.length=3),"le"===f&&this._initArray(this.toArray(),l,f)},p.prototype._initArray=function(o,l,f){if(I("number"==typeof o.length),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var h,b,w=0;if("be"===f)for(u=o.length-1,h=0;u>=0;u-=3)this.words[h]|=(b=o[u]|o[u-1]<<8|o[u-2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);else if("le"===f)for(u=0,h=0;u<o.length;u+=3)this.words[h]|=(b=o[u]|o[u+1]<<8|o[u+2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);return this.strip()},p.prototype._parseHex=function(o,l,f){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var w,h=0,b=0;if("be"===f)for(u=o.length-1;u>=l;u-=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;else for(u=(o.length-l)%2==0?l+1:l;u<o.length;u+=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;this.strip()},p.prototype._parseBase=function(o,l,f){this.words=[0],this.length=1;for(var u=0,h=1;h<=67108863;h*=l)u++;u--,h=h/l|0;for(var b=o.length-f,w=b%u,g=Math.min(b,b-w)+f,s=0,v=f;v<g;v+=u)s=R(o,v,v+u,l),this.imuln(h),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==w){var $=1;for(s=R(o,v,o.length,l),v=0;v<w;v++)$*=l;this.imuln($),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},p.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red},p.prototype.clone=function(){var o=new p(null);return this.copy(o),o},p.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},p.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},p.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},p.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function B(y,o,l){l.negative=o.negative^y.negative;var f=y.length+o.length|0;l.length=f,f=f-1|0;var u=0|y.words[0],h=0|o.words[0],b=u*h,g=b/67108864|0;l.words[0]=67108863&b;for(var s=1;s<f;s++){for(var v=g>>>26,$=67108863&g,L=Math.min(s,o.length-1),ie=Math.max(0,s-y.length+1);ie<=L;ie++)v+=(b=(u=0|y.words[s-ie|0])*(h=0|o.words[ie])+$)/67108864|0,$=67108863&b;l.words[s]=0|$,g=0|v}return 0!==g?l.words[s]=0|g:l.length--,l.strip()}p.prototype.toString=function(o,l){var f;if(l=0|l||1,16===(o=o||10)||"hex"===o){f="";for(var u=0,h=0,b=0;b<this.length;b++){var w=this.words[b],g=(16777215&(w<<u|h)).toString(16);f=0!=(h=w>>>24-u&16777215)||b!==this.length-1?x[6-g.length]+g+f:g+f,(u+=2)>=26&&(u-=26,b--)}for(0!==h&&(f=h.toString(16)+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}if(o===(0|o)&&o>=2&&o<=36){var s=S[o],v=O[o];f="";var $=this.clone();for($.negative=0;!$.isZero();){var L=$.modn(v).toString(o);f=($=$.idivn(v)).isZero()?L+f:x[s-L.length]+L+f}for(this.isZero()&&(f="0"+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}I(!1,"Base should be between 2 and 36")},p.prototype.toNumber=function(){var o=this.words[0];return 2===this.length?o+=67108864*this.words[1]:3===this.length&&1===this.words[2]?o+=4503599627370496+67108864*this.words[1]:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-o:o},p.prototype.toJSON=function(){return this.toString(16)},p.prototype.toBuffer=function(o,l){return I(void 0!==k),this.toArrayLike(k,o,l)},p.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)},p.prototype.toArrayLike=function(o,l,f){var u=this.byteLength(),h=f||Math.max(1,u);I(u<=h,"byte array longer than desired length"),I(h>0,"Requested array length <= 0"),this.strip();var g,s,b="le"===l,w=new o(h),v=this.clone();if(b){for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[s]=g;for(;s<h;s++)w[s]=0}else{for(s=0;s<h-u;s++)w[s]=0;for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[h-s-1]=g}return w},p.prototype._countBits=Math.clz32?function(o){return 32-Math.clz32(o)}:function(o){var l=o,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},p.prototype._zeroBits=function(o){if(0===o)return 26;var l=o,f=0;return 0==(8191&l)&&(f+=13,l>>>=13),0==(127&l)&&(f+=7,l>>>=7),0==(15&l)&&(f+=4,l>>>=4),0==(3&l)&&(f+=2,l>>>=2),0==(1&l)&&f++,f},p.prototype.bitLength=function(){var l=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+l},p.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(o+=f,26!==f)break}return o},p.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},p.prototype.toTwos=function(o){return 0!==this.negative?this.abs().inotn(o).iaddn(1):this.clone()},p.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},p.prototype.isNeg=function(){return 0!==this.negative},p.prototype.neg=function(){return this.clone().ineg()},p.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},p.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this.strip()},p.prototype.ior=function(o){return I(0==(this.negative|o.negative)),this.iuor(o)},p.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},p.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},p.prototype.iuand=function(o){var l;l=this.length>o.length?o:this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&o.words[f];return this.length=l.length,this.strip()},p.prototype.iand=function(o){return I(0==(this.negative|o.negative)),this.iuand(o)},p.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},p.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},p.prototype.iuxor=function(o){var l,f;this.length>o.length?(l=this,f=o):(l=o,f=this);for(var u=0;u<f.length;u++)this.words[u]=l.words[u]^f.words[u];if(this!==l)for(;u<l.length;u++)this.words[u]=l.words[u];return this.length=l.length,this.strip()},p.prototype.ixor=function(o){return I(0==(this.negative|o.negative)),this.iuxor(o)},p.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},p.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},p.prototype.inotn=function(o){I("number"==typeof o&&o>=0);var l=0|Math.ceil(o/26),f=o%26;this._expand(l),f>0&&l--;for(var u=0;u<l;u++)this.words[u]=67108863&~this.words[u];return f>0&&(this.words[u]=~this.words[u]&67108863>>26-f),this.strip()},p.prototype.notn=function(o){return this.clone().inotn(o)},p.prototype.setn=function(o,l){I("number"==typeof o&&o>=0);var f=o/26|0,u=o%26;return this._expand(f+1),this.words[f]=l?this.words[f]|1<<u:this.words[f]&~(1<<u),this.strip()},p.prototype.iadd=function(o){var l,f,u;if(0!==this.negative&&0===o.negative)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(0===this.negative&&0!==o.negative)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();this.length>o.length?(f=this,u=o):(f=o,u=this);for(var h=0,b=0;b<u.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+(0|u.words[b])+h),h=l>>>26;for(;0!==h&&b<f.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+h),h=l>>>26;if(this.length=f.length,0!==h)this.words[this.length]=h,this.length++;else if(f!==this)for(;b<f.length;b++)this.words[b]=f.words[b];return this},p.prototype.add=function(o){var l;return 0!==o.negative&&0===this.negative?(o.negative=0,l=this.sub(o),o.negative^=1,l):0===o.negative&&0!==this.negative?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},p.prototype.isub=function(o){if(0!==o.negative){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var u,h,f=this.cmp(o);if(0===f)return this.negative=0,this.length=1,this.words[0]=0,this;f>0?(u=this,h=o):(u=o,h=this);for(var b=0,w=0;w<h.length;w++)b=(l=(0|u.words[w])-(0|h.words[w])+b)>>26,this.words[w]=67108863&l;for(;0!==b&&w<u.length;w++)b=(l=(0|u.words[w])+b)>>26,this.words[w]=67108863&l;if(0===b&&w<u.length&&u!==this)for(;w<u.length;w++)this.words[w]=u.words[w];return this.length=Math.max(this.length,w),u!==this&&(this.negative=1),this.strip()},p.prototype.sub=function(o){return this.clone().isub(o)};var N=function(o,l,f){var g,s,v,u=o.words,h=l.words,b=f.words,w=0,$=0|u[0],L=8191&$,ie=$>>>13,Se=0|u[1],ke=8191&Se,Be=Se>>>13,Pe=0|u[2],Te=8191&Pe,Ie=Pe>>>13,Vt=0|u[3],je=8191&Vt,se=Vt>>>13,Ee=0|u[4],Re=8191&Ee,Ge=Ee>>>13,ui=0|u[5],qe=8191&ui,Ye=ui>>>13,xi=0|u[6],et=8191&xi,Ke=xi>>>13,qi=0|u[7],ut=8191&qi,Qe=qi>>>13,rn=0|u[8],le=8191&rn,J=rn>>>13,re=0|u[9],ve=8191&re,xe=re>>>13,ot=0|h[0],Ne=8191&ot,Xe=ot>>>13,Pi=0|h[1],it=8191&Pi,rt=Pi>>>13,bi=0|h[2],ht=8191&bi,_t=bi>>>13,Sr=0|h[3],gt=8191&Sr,vt=Sr>>>13,Dr=0|h[4],st=8191&Dr,yt=Dr>>>13,Ir=0|h[5],mt=8191&Ir,wt=Ir>>>13,Cr=0|h[6],ct=8191&Cr,ft=Cr>>>13,An=0|h[7],St=8191&An,at=An>>>13,Tr=0|h[8],dt=8191&Tr,Mt=Tr>>>13,$r=0|h[9],Tt=8191&$r,Ct=$r>>>13;f.negative=o.negative^l.negative,f.length=19;var Fn=(w+(g=Math.imul(L,Ne))|0)+((8191&(s=(s=Math.imul(L,Xe))+Math.imul(ie,Ne)|0))<<13)|0;w=((v=Math.imul(ie,Xe))+(s>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,g=Math.imul(ke,Ne),s=(s=Math.imul(ke,Xe))+Math.imul(Be,Ne)|0,v=Math.imul(Be,Xe);var Ri=(w+(g=g+Math.imul(L,it)|0)|0)+((8191&(s=(s=s+Math.imul(L,rt)|0)+Math.imul(ie,it)|0))<<13)|0;w=((v=v+Math.imul(ie,rt)|0)+(s>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,g=Math.imul(Te,Ne),s=(s=Math.imul(Te,Xe))+Math.imul(Ie,Ne)|0,v=Math.imul(Ie,Xe),g=g+Math.imul(ke,it)|0,s=(s=s+Math.imul(ke,rt)|0)+Math.imul(Be,it)|0,v=v+Math.imul(Be,rt)|0;var Oi=(w+(g=g+Math.imul(L,ht)|0)|0)+((8191&(s=(s=s+Math.imul(L,_t)|0)+Math.imul(ie,ht)|0))<<13)|0;w=((v=v+Math.imul(ie,_t)|0)+(s>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,g=Math.imul(je,Ne),s=(s=Math.imul(je,Xe))+Math.imul(se,Ne)|0,v=Math.imul(se,Xe),g=g+Math.imul(Te,it)|0,s=(s=s+Math.imul(Te,rt)|0)+Math.imul(Ie,it)|0,v=v+Math.imul(Ie,rt)|0,g=g+Math.imul(ke,ht)|0,s=(s=s+Math.imul(ke,_t)|0)+Math.imul(Be,ht)|0,v=v+Math.imul(Be,_t)|0;var zn=(w+(g=g+Math.imul(L,gt)|0)|0)+((8191&(s=(s=s+Math.imul(L,vt)|0)+Math.imul(ie,gt)|0))<<13)|0;w=((v=v+Math.imul(ie,vt)|0)+(s>>>13)|0)+(zn>>>26)|0,zn&=67108863,g=Math.imul(Re,Ne),s=(s=Math.imul(Re,Xe))+Math.imul(Ge,Ne)|0,v=Math.imul(Ge,Xe),g=g+Math.imul(je,it)|0,s=(s=s+Math.imul(je,rt)|0)+Math.imul(se,it)|0,v=v+Math.imul(se,rt)|0,g=g+Math.imul(Te,ht)|0,s=(s=s+Math.imul(Te,_t)|0)+Math.imul(Ie,ht)|0,v=v+Math.imul(Ie,_t)|0,g=g+Math.imul(ke,gt)|0,s=(s=s+Math.imul(ke,vt)|0)+Math.imul(Be,gt)|0,v=v+Math.imul(Be,vt)|0;var jn=(w+(g=g+Math.imul(L,st)|0)|0)+((8191&(s=(s=s+Math.imul(L,yt)|0)+Math.imul(ie,st)|0))<<13)|0;w=((v=v+Math.imul(ie,yt)|0)+(s>>>13)|0)+(jn>>>26)|0,jn&=67108863,g=Math.imul(qe,Ne),s=(s=Math.imul(qe,Xe))+Math.imul(Ye,Ne)|0,v=Math.imul(Ye,Xe),g=g+Math.imul(Re,it)|0,s=(s=s+Math.imul(Re,rt)|0)+Math.imul(Ge,it)|0,v=v+Math.imul(Ge,rt)|0,g=g+Math.imul(je,ht)|0,s=(s=s+Math.imul(je,_t)|0)+Math.imul(se,ht)|0,v=v+Math.imul(se,_t)|0,g=g+Math.imul(Te,gt)|0,s=(s=s+Math.imul(Te,vt)|0)+Math.imul(Ie,gt)|0,v=v+Math.imul(Ie,vt)|0,g=g+Math.imul(ke,st)|0,s=(s=s+Math.imul(ke,yt)|0)+Math.imul(Be,st)|0,v=v+Math.imul(Be,yt)|0;var tr=(w+(g=g+Math.imul(L,mt)|0)|0)+((8191&(s=(s=s+Math.imul(L,wt)|0)+Math.imul(ie,mt)|0))<<13)|0;w=((v=v+Math.imul(ie,wt)|0)+(s>>>13)|0)+(tr>>>26)|0,tr&=67108863,g=Math.imul(et,Ne),s=(s=Math.imul(et,Xe))+Math.imul(Ke,Ne)|0,v=Math.imul(Ke,Xe),g=g+Math.imul(qe,it)|0,s=(s=s+Math.imul(qe,rt)|0)+Math.imul(Ye,it)|0,v=v+Math.imul(Ye,rt)|0,g=g+Math.imul(Re,ht)|0,s=(s=s+Math.imul(Re,_t)|0)+Math.imul(Ge,ht)|0,v=v+Math.imul(Ge,_t)|0,g=g+Math.imul(je,gt)|0,s=(s=s+Math.imul(je,vt)|0)+Math.imul(se,gt)|0,v=v+Math.imul(se,vt)|0,g=g+Math.imul(Te,st)|0,s=(s=s+Math.imul(Te,yt)|0)+Math.imul(Ie,st)|0,v=v+Math.imul(Ie,yt)|0,g=g+Math.imul(ke,mt)|0,s=(s=s+Math.imul(ke,wt)|0)+Math.imul(Be,mt)|0,v=v+Math.imul(Be,wt)|0;var ir=(w+(g=g+Math.imul(L,ct)|0)|0)+((8191&(s=(s=s+Math.imul(L,ft)|0)+Math.imul(ie,ct)|0))<<13)|0;w=((v=v+Math.imul(ie,ft)|0)+(s>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ut,Ne),s=(s=Math.imul(ut,Xe))+Math.imul(Qe,Ne)|0,v=Math.imul(Qe,Xe),g=g+Math.imul(et,it)|0,s=(s=s+Math.imul(et,rt)|0)+Math.imul(Ke,it)|0,v=v+Math.imul(Ke,rt)|0,g=g+Math.imul(qe,ht)|0,s=(s=s+Math.imul(qe,_t)|0)+Math.imul(Ye,ht)|0,v=v+Math.imul(Ye,_t)|0,g=g+Math.imul(Re,gt)|0,s=(s=s+Math.imul(Re,vt)|0)+Math.imul(Ge,gt)|0,v=v+Math.imul(Ge,vt)|0,g=g+Math.imul(je,st)|0,s=(s=s+Math.imul(je,yt)|0)+Math.imul(se,st)|0,v=v+Math.imul(se,yt)|0,g=g+Math.imul(Te,mt)|0,s=(s=s+Math.imul(Te,wt)|0)+Math.imul(Ie,mt)|0,v=v+Math.imul(Ie,wt)|0,g=g+Math.imul(ke,ct)|0,s=(s=s+Math.imul(ke,ft)|0)+Math.imul(Be,ct)|0,v=v+Math.imul(Be,ft)|0;var nr=(w+(g=g+Math.imul(L,St)|0)|0)+((8191&(s=(s=s+Math.imul(L,at)|0)+Math.imul(ie,St)|0))<<13)|0;w=((v=v+Math.imul(ie,at)|0)+(s>>>13)|0)+(nr>>>26)|0,nr&=67108863,g=Math.imul(le,Ne),s=(s=Math.imul(le,Xe))+Math.imul(J,Ne)|0,v=Math.imul(J,Xe),g=g+Math.imul(ut,it)|0,s=(s=s+Math.imul(ut,rt)|0)+Math.imul(Qe,it)|0,v=v+Math.imul(Qe,rt)|0,g=g+Math.imul(et,ht)|0,s=(s=s+Math.imul(et,_t)|0)+Math.imul(Ke,ht)|0,v=v+Math.imul(Ke,_t)|0,g=g+Math.imul(qe,gt)|0,s=(s=s+Math.imul(qe,vt)|0)+Math.imul(Ye,gt)|0,v=v+Math.imul(Ye,vt)|0,g=g+Math.imul(Re,st)|0,s=(s=s+Math.imul(Re,yt)|0)+Math.imul(Ge,st)|0,v=v+Math.imul(Ge,yt)|0,g=g+Math.imul(je,mt)|0,s=(s=s+Math.imul(je,wt)|0)+Math.imul(se,mt)|0,v=v+Math.imul(se,wt)|0,g=g+Math.imul(Te,ct)|0,s=(s=s+Math.imul(Te,ft)|0)+Math.imul(Ie,ct)|0,v=v+Math.imul(Ie,ft)|0,g=g+Math.imul(ke,St)|0,s=(s=s+Math.imul(ke,at)|0)+Math.imul(Be,St)|0,v=v+Math.imul(Be,at)|0;var rr=(w+(g=g+Math.imul(L,dt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Mt)|0)+Math.imul(ie,dt)|0))<<13)|0;w=((v=v+Math.imul(ie,Mt)|0)+(s>>>13)|0)+(rr>>>26)|0,rr&=67108863,g=Math.imul(ve,Ne),s=(s=Math.imul(ve,Xe))+Math.imul(xe,Ne)|0,v=Math.imul(xe,Xe),g=g+Math.imul(le,it)|0,s=(s=s+Math.imul(le,rt)|0)+Math.imul(J,it)|0,v=v+Math.imul(J,rt)|0,g=g+Math.imul(ut,ht)|0,s=(s=s+Math.imul(ut,_t)|0)+Math.imul(Qe,ht)|0,v=v+Math.imul(Qe,_t)|0,g=g+Math.imul(et,gt)|0,s=(s=s+Math.imul(et,vt)|0)+Math.imul(Ke,gt)|0,v=v+Math.imul(Ke,vt)|0,g=g+Math.imul(qe,st)|0,s=(s=s+Math.imul(qe,yt)|0)+Math.imul(Ye,st)|0,v=v+Math.imul(Ye,yt)|0,g=g+Math.imul(Re,mt)|0,s=(s=s+Math.imul(Re,wt)|0)+Math.imul(Ge,mt)|0,v=v+Math.imul(Ge,wt)|0,g=g+Math.imul(je,ct)|0,s=(s=s+Math.imul(je,ft)|0)+Math.imul(se,ct)|0,v=v+Math.imul(se,ft)|0,g=g+Math.imul(Te,St)|0,s=(s=s+Math.imul(Te,at)|0)+Math.imul(Ie,St)|0,v=v+Math.imul(Ie,at)|0,g=g+Math.imul(ke,dt)|0,s=(s=s+Math.imul(ke,Mt)|0)+Math.imul(Be,dt)|0,v=v+Math.imul(Be,Mt)|0;var qn=(w+(g=g+Math.imul(L,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Ct)|0)+Math.imul(ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(ie,Ct)|0)+(s>>>13)|0)+(qn>>>26)|0,qn&=67108863,g=Math.imul(ve,it),s=(s=Math.imul(ve,rt))+Math.imul(xe,it)|0,v=Math.imul(xe,rt),g=g+Math.imul(le,ht)|0,s=(s=s+Math.imul(le,_t)|0)+Math.imul(J,ht)|0,v=v+Math.imul(J,_t)|0,g=g+Math.imul(ut,gt)|0,s=(s=s+Math.imul(ut,vt)|0)+Math.imul(Qe,gt)|0,v=v+Math.imul(Qe,vt)|0,g=g+Math.imul(et,st)|0,s=(s=s+Math.imul(et,yt)|0)+Math.imul(Ke,st)|0,v=v+Math.imul(Ke,yt)|0,g=g+Math.imul(qe,mt)|0,s=(s=s+Math.imul(qe,wt)|0)+Math.imul(Ye,mt)|0,v=v+Math.imul(Ye,wt)|0,g=g+Math.imul(Re,ct)|0,s=(s=s+Math.imul(Re,ft)|0)+Math.imul(Ge,ct)|0,v=v+Math.imul(Ge,ft)|0,g=g+Math.imul(je,St)|0,s=(s=s+Math.imul(je,at)|0)+Math.imul(se,St)|0,v=v+Math.imul(se,at)|0,g=g+Math.imul(Te,dt)|0,s=(s=s+Math.imul(Te,Mt)|0)+Math.imul(Ie,dt)|0,v=v+Math.imul(Ie,Mt)|0;var ar=(w+(g=g+Math.imul(ke,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ke,Ct)|0)+Math.imul(Be,Tt)|0))<<13)|0;w=((v=v+Math.imul(Be,Ct)|0)+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,g=Math.imul(ve,ht),s=(s=Math.imul(ve,_t))+Math.imul(xe,ht)|0,v=Math.imul(xe,_t),g=g+Math.imul(le,gt)|0,s=(s=s+Math.imul(le,vt)|0)+Math.imul(J,gt)|0,v=v+Math.imul(J,vt)|0,g=g+Math.imul(ut,st)|0,s=(s=s+Math.imul(ut,yt)|0)+Math.imul(Qe,st)|0,v=v+Math.imul(Qe,yt)|0,g=g+Math.imul(et,mt)|0,s=(s=s+Math.imul(et,wt)|0)+Math.imul(Ke,mt)|0,v=v+Math.imul(Ke,wt)|0,g=g+Math.imul(qe,ct)|0,s=(s=s+Math.imul(qe,ft)|0)+Math.imul(Ye,ct)|0,v=v+Math.imul(Ye,ft)|0,g=g+Math.imul(Re,St)|0,s=(s=s+Math.imul(Re,at)|0)+Math.imul(Ge,St)|0,v=v+Math.imul(Ge,at)|0,g=g+Math.imul(je,dt)|0,s=(s=s+Math.imul(je,Mt)|0)+Math.imul(se,dt)|0,v=v+Math.imul(se,Mt)|0;var or=(w+(g=g+Math.imul(Te,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Te,Ct)|0)+Math.imul(Ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ie,Ct)|0)+(s>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ve,gt),s=(s=Math.imul(ve,vt))+Math.imul(xe,gt)|0,v=Math.imul(xe,vt),g=g+Math.imul(le,st)|0,s=(s=s+Math.imul(le,yt)|0)+Math.imul(J,st)|0,v=v+Math.imul(J,yt)|0,g=g+Math.imul(ut,mt)|0,s=(s=s+Math.imul(ut,wt)|0)+Math.imul(Qe,mt)|0,v=v+Math.imul(Qe,wt)|0,g=g+Math.imul(et,ct)|0,s=(s=s+Math.imul(et,ft)|0)+Math.imul(Ke,ct)|0,v=v+Math.imul(Ke,ft)|0,g=g+Math.imul(qe,St)|0,s=(s=s+Math.imul(qe,at)|0)+Math.imul(Ye,St)|0,v=v+Math.imul(Ye,at)|0,g=g+Math.imul(Re,dt)|0,s=(s=s+Math.imul(Re,Mt)|0)+Math.imul(Ge,dt)|0,v=v+Math.imul(Ge,Mt)|0;var Vi=(w+(g=g+Math.imul(je,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(je,Ct)|0)+Math.imul(se,Tt)|0))<<13)|0;w=((v=v+Math.imul(se,Ct)|0)+(s>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,g=Math.imul(ve,st),s=(s=Math.imul(ve,yt))+Math.imul(xe,st)|0,v=Math.imul(xe,yt),g=g+Math.imul(le,mt)|0,s=(s=s+Math.imul(le,wt)|0)+Math.imul(J,mt)|0,v=v+Math.imul(J,wt)|0,g=g+Math.imul(ut,ct)|0,s=(s=s+Math.imul(ut,ft)|0)+Math.imul(Qe,ct)|0,v=v+Math.imul(Qe,ft)|0,g=g+Math.imul(et,St)|0,s=(s=s+Math.imul(et,at)|0)+Math.imul(Ke,St)|0,v=v+Math.imul(Ke,at)|0,g=g+Math.imul(qe,dt)|0,s=(s=s+Math.imul(qe,Mt)|0)+Math.imul(Ye,dt)|0,v=v+Math.imul(Ye,Mt)|0;var $n=(w+(g=g+Math.imul(Re,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Re,Ct)|0)+Math.imul(Ge,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ge,Ct)|0)+(s>>>13)|0)+($n>>>26)|0,$n&=67108863,g=Math.imul(ve,mt),s=(s=Math.imul(ve,wt))+Math.imul(xe,mt)|0,v=Math.imul(xe,wt),g=g+Math.imul(le,ct)|0,s=(s=s+Math.imul(le,ft)|0)+Math.imul(J,ct)|0,v=v+Math.imul(J,ft)|0,g=g+Math.imul(ut,St)|0,s=(s=s+Math.imul(ut,at)|0)+Math.imul(Qe,St)|0,v=v+Math.imul(Qe,at)|0,g=g+Math.imul(et,dt)|0,s=(s=s+Math.imul(et,Mt)|0)+Math.imul(Ke,dt)|0,v=v+Math.imul(Ke,Mt)|0;var Ni=(w+(g=g+Math.imul(qe,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(qe,Ct)|0)+Math.imul(Ye,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ye,Ct)|0)+(s>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,g=Math.imul(ve,ct),s=(s=Math.imul(ve,ft))+Math.imul(xe,ct)|0,v=Math.imul(xe,ft),g=g+Math.imul(le,St)|0,s=(s=s+Math.imul(le,at)|0)+Math.imul(J,St)|0,v=v+Math.imul(J,at)|0,g=g+Math.imul(ut,dt)|0,s=(s=s+Math.imul(ut,Mt)|0)+Math.imul(Qe,dt)|0,v=v+Math.imul(Qe,Mt)|0;var Wn=(w+(g=g+Math.imul(et,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(et,Ct)|0)+Math.imul(Ke,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ke,Ct)|0)+(s>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,g=Math.imul(ve,St),s=(s=Math.imul(ve,at))+Math.imul(xe,St)|0,v=Math.imul(xe,at),g=g+Math.imul(le,dt)|0,s=(s=s+Math.imul(le,Mt)|0)+Math.imul(J,dt)|0,v=v+Math.imul(J,Mt)|0;var Ln=(w+(g=g+Math.imul(ut,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ut,Ct)|0)+Math.imul(Qe,Tt)|0))<<13)|0;w=((v=v+Math.imul(Qe,Ct)|0)+(s>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,g=Math.imul(ve,dt),s=(s=Math.imul(ve,Mt))+Math.imul(xe,dt)|0,v=Math.imul(xe,Mt);var vi=(w+(g=g+Math.imul(le,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(le,Ct)|0)+Math.imul(J,Tt)|0))<<13)|0;w=((v=v+Math.imul(J,Ct)|0)+(s>>>13)|0)+(vi>>>26)|0,vi&=67108863;var Un=(w+(g=Math.imul(ve,Tt))|0)+((8191&(s=(s=Math.imul(ve,Ct))+Math.imul(xe,Tt)|0))<<13)|0;return w=((v=Math.imul(xe,Ct))+(s>>>13)|0)+(Un>>>26)|0,Un&=67108863,b[0]=Fn,b[1]=Ri,b[2]=Oi,b[3]=zn,b[4]=jn,b[5]=tr,b[6]=ir,b[7]=nr,b[8]=rr,b[9]=qn,b[10]=ar,b[11]=or,b[12]=Vi,b[13]=$n,b[14]=Ni,b[15]=Wn,b[16]=Ln,b[17]=vi,b[18]=Un,0!==w&&(b[19]=w,f.length++),f};function X(y,o,l){return(new U).mulp(y,o,l)}function U(y,o){this.x=y,this.y=o}Math.imul||(N=B),p.prototype.mulTo=function(o,l){var f,u=this.length+o.length;return f=10===this.length&&10===o.length?N(this,o,l):u<63?B(this,o,l):u<1024?function z(y,o,l){l.negative=o.negative^y.negative,l.length=y.length+o.length;for(var f=0,u=0,h=0;h<l.length-1;h++){var b=u;u=0;for(var w=67108863&f,g=Math.min(h,o.length-1),s=Math.max(0,h-y.length+1);s<=g;s++){var ie=(0|y.words[h-s])*(0|o.words[s]),Se=67108863&ie;w=67108863&(Se=Se+w|0),u+=(b=(b=b+(ie/67108864|0)|0)+(Se>>>26)|0)>>>26,b&=67108863}l.words[h]=w,f=b,b=u}return 0!==f?l.words[h]=f:l.length--,l.strip()}(this,o,l):X(this,o,l),f},U.prototype.makeRBT=function(o){for(var l=new Array(o),f=p.prototype._countBits(o)-1,u=0;u<o;u++)l[u]=this.revBin(u,f,o);return l},U.prototype.revBin=function(o,l,f){if(0===o||o===f-1)return o;for(var u=0,h=0;h<l;h++)u|=(1&o)<<l-h-1,o>>=1;return u},U.prototype.permute=function(o,l,f,u,h,b){for(var w=0;w<b;w++)u[w]=l[o[w]],h[w]=f[o[w]]},U.prototype.transform=function(o,l,f,u,h,b){this.permute(b,o,l,f,u,h);for(var w=1;w<h;w<<=1)for(var g=w<<1,s=Math.cos(2*Math.PI/g),v=Math.sin(2*Math.PI/g),$=0;$<h;$+=g)for(var L=s,ie=v,Se=0;Se<w;Se++){var ke=f[$+Se],Be=u[$+Se],Pe=f[$+Se+w],Te=u[$+Se+w],Ie=L*Pe-ie*Te;Te=L*Te+ie*Pe,f[$+Se]=ke+(Pe=Ie),u[$+Se]=Be+Te,f[$+Se+w]=ke-Pe,u[$+Se+w]=Be-Te,Se!==g&&(Ie=s*L-v*ie,ie=s*ie+v*L,L=Ie)}},U.prototype.guessLen13b=function(o,l){var f=1|Math.max(l,o),u=1&f,h=0;for(f=f/2|0;f;f>>>=1)h++;return 1<<h+1+u},U.prototype.conjugate=function(o,l,f){if(!(f<=1))for(var u=0;u<f/2;u++){var h=o[u];o[u]=o[f-u-1],o[f-u-1]=h,h=l[u],l[u]=-l[f-u-1],l[f-u-1]=-h}},U.prototype.normalize13b=function(o,l){for(var f=0,u=0;u<l/2;u++){var h=8192*Math.round(o[2*u+1]/l)+Math.round(o[2*u]/l)+f;o[u]=67108863&h,f=h<67108864?0:h/67108864|0}return o},U.prototype.convert13b=function(o,l,f,u){for(var h=0,b=0;b<l;b++)f[2*b]=8191&(h+=0|o[b]),f[2*b+1]=8191&(h>>>=13),h>>>=13;for(b=2*l;b<u;++b)f[b]=0;I(0===h),I(0==(-8192&h))},U.prototype.stub=function(o){for(var l=new Array(o),f=0;f<o;f++)l[f]=0;return l},U.prototype.mulp=function(o,l,f){var u=2*this.guessLen13b(o.length,l.length),h=this.makeRBT(u),b=this.stub(u),w=new Array(u),g=new Array(u),s=new Array(u),v=new Array(u),$=new Array(u),L=new Array(u),ie=f.words;ie.length=u,this.convert13b(o.words,o.length,w,u),this.convert13b(l.words,l.length,v,u),this.transform(w,b,g,s,u,h),this.transform(v,b,$,L,u,h);for(var Se=0;Se<u;Se++){var ke=g[Se]*$[Se]-s[Se]*L[Se];s[Se]=g[Se]*L[Se]+s[Se]*$[Se],g[Se]=ke}return this.conjugate(g,s,u),this.transform(g,s,ie,b,u,h),this.conjugate(ie,b,u),this.normalize13b(ie,u),f.negative=o.negative^l.negative,f.length=o.length+l.length,f.strip()},p.prototype.mul=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},p.prototype.mulf=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),X(this,o,l)},p.prototype.imul=function(o){return this.clone().mulTo(o,this)},p.prototype.imuln=function(o){I("number"==typeof o),I(o<67108864);for(var l=0,f=0;f<this.length;f++){var u=(0|this.words[f])*o,h=(67108863&u)+(67108863&l);l>>=26,l+=u/67108864|0,l+=h>>>26,this.words[f]=67108863&h}return 0!==l&&(this.words[f]=l,this.length++),this},p.prototype.muln=function(o){return this.clone().imuln(o)},p.prototype.sqr=function(){return this.mul(this)},p.prototype.isqr=function(){return this.imul(this.clone())},p.prototype.pow=function(o){var l=function C(y){for(var o=new Array(y.bitLength()),l=0;l<o.length;l++){var u=l%26;o[l]=(y.words[l/26|0]&1<<u)>>>u}return o}(o);if(0===l.length)return new p(1);for(var f=this,u=0;u<l.length&&0===l[u];u++,f=f.sqr());if(++u<l.length)for(var h=f.sqr();u<l.length;u++,h=h.sqr())0!==l[u]&&(f=f.mul(h));return f},p.prototype.iushln=function(o){I("number"==typeof o&&o>=0);var h,l=o%26,f=(o-l)/26,u=67108863>>>26-l<<26-l;if(0!==l){var b=0;for(h=0;h<this.length;h++){var w=this.words[h]&u;this.words[h]=(0|this.words[h])-w<<l|b,b=w>>>26-l}b&&(this.words[h]=b,this.length++)}if(0!==f){for(h=this.length-1;h>=0;h--)this.words[h+f]=this.words[h];for(h=0;h<f;h++)this.words[h]=0;this.length+=f}return this.strip()},p.prototype.ishln=function(o){return I(0===this.negative),this.iushln(o)},p.prototype.iushrn=function(o,l,f){var u;I("number"==typeof o&&o>=0),u=l?(l-l%26)/26:0;var h=o%26,b=Math.min((o-h)/26,this.length),w=67108863^67108863>>>h<<h,g=f;if(u-=b,u=Math.max(0,u),g){for(var s=0;s<b;s++)g.words[s]=this.words[s];g.length=b}if(0!==b)if(this.length>b)for(this.length-=b,s=0;s<this.length;s++)this.words[s]=this.words[s+b];else this.words[0]=0,this.length=1;var v=0;for(s=this.length-1;s>=0&&(0!==v||s>=u);s--){var $=0|this.words[s];this.words[s]=v<<26-h|$>>>h,v=$&w}return g&&0!==v&&(g.words[g.length++]=v),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},p.prototype.ishrn=function(o,l,f){return I(0===this.negative),this.iushrn(o,l,f)},p.prototype.shln=function(o){return this.clone().ishln(o)},p.prototype.ushln=function(o){return this.clone().iushln(o)},p.prototype.shrn=function(o){return this.clone().ishrn(o)},p.prototype.ushrn=function(o){return this.clone().iushrn(o)},p.prototype.testn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return!(this.length<=f||!(this.words[f]&1<<l))},p.prototype.imaskn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return I(0===this.negative,"imaskn works only with positive numbers"),this.length<=f?this:(0!==l&&f++,this.length=Math.min(f,this.length),0!==l&&(this.words[this.length-1]&=67108863^67108863>>>l<<l),this.strip())},p.prototype.maskn=function(o){return this.clone().imaskn(o)},p.prototype.iaddn=function(o){return I("number"==typeof o),I(o<67108864),o<0?this.isubn(-o):0!==this.negative?1===this.length&&(0|this.words[0])<o?(this.words[0]=o-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},p.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},p.prototype.isubn=function(o){if(I("number"==typeof o),I(o<67108864),o<0)return this.iaddn(-o);if(0!==this.negative)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},p.prototype.addn=function(o){return this.clone().iaddn(o)},p.prototype.subn=function(o){return this.clone().isubn(o)},p.prototype.iabs=function(){return this.negative=0,this},p.prototype.abs=function(){return this.clone().iabs()},p.prototype._ishlnsubmul=function(o,l,f){var h;this._expand(o.length+f);var b,w=0;for(h=0;h<o.length;h++){b=(0|this.words[h+f])+w;var g=(0|o.words[h])*l;w=((b-=67108863&g)>>26)-(g/67108864|0),this.words[h+f]=67108863&b}for(;h<this.length-f;h++)w=(b=(0|this.words[h+f])+w)>>26,this.words[h+f]=67108863&b;if(0===w)return this.strip();for(I(-1===w),w=0,h=0;h<this.length;h++)w=(b=-(0|this.words[h])+w)>>26,this.words[h]=67108863&b;return this.negative=1,this.strip()},p.prototype._wordDiv=function(o,l){var f,u=this.clone(),h=o,b=0|h.words[h.length-1];0!=(f=26-this._countBits(b))&&(h=h.ushln(f),u.iushln(f),b=0|h.words[h.length-1]);var s,g=u.length-h.length;if("mod"!==l){(s=new p(null)).length=g+1,s.words=new Array(s.length);for(var v=0;v<s.length;v++)s.words[v]=0}var $=u.clone()._ishlnsubmul(h,1,g);0===$.negative&&(u=$,s&&(s.words[g]=1));for(var L=g-1;L>=0;L--){var ie=67108864*(0|u.words[h.length+L])+(0|u.words[h.length+L-1]);for(ie=Math.min(ie/b|0,67108863),u._ishlnsubmul(h,ie,L);0!==u.negative;)ie--,u.negative=0,u._ishlnsubmul(h,1,L),u.isZero()||(u.negative^=1);s&&(s.words[L]=ie)}return s&&s.strip(),u.strip(),"div"!==l&&0!==f&&u.iushrn(f),{div:s||null,mod:u}},p.prototype.divmod=function(o,l,f){return I(!o.isZero()),this.isZero()?{div:new p(0),mod:new p(0)}:0!==this.negative&&0===o.negative?(b=this.neg().divmod(o,l),"mod"!==l&&(u=b.div.neg()),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.iadd(o)),{div:u,mod:h}):0===this.negative&&0!==o.negative?(b=this.divmod(o.neg(),l),"mod"!==l&&(u=b.div.neg()),{div:u,mod:b.mod}):0!=(this.negative&o.negative)?(b=this.neg().divmod(o.neg(),l),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.isub(o)),{div:b.div,mod:h}):o.length>this.length||this.cmp(o)<0?{div:new p(0),mod:this}:1===o.length?"div"===l?{div:this.divn(o.words[0]),mod:null}:"mod"===l?{div:null,mod:new p(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new p(this.modn(o.words[0]))}:this._wordDiv(o,l);var u,h,b},p.prototype.div=function(o){return this.divmod(o,"div",!1).div},p.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},p.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},p.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var f=0!==l.div.negative?l.mod.isub(o):l.mod,u=o.ushrn(1),h=o.andln(1),b=f.cmp(u);return b<0||1===h&&0===b?l.div:0!==l.div.negative?l.div.isubn(1):l.div.iaddn(1)},p.prototype.modn=function(o){I(o<=67108863);for(var l=(1<<26)%o,f=0,u=this.length-1;u>=0;u--)f=(l*f+(0|this.words[u]))%o;return f},p.prototype.idivn=function(o){I(o<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var u=(0|this.words[f])+67108864*l;this.words[f]=u/o|0,l=u%o}return this.strip()},p.prototype.divn=function(o){return this.clone().idivn(o)},p.prototype.egcd=function(o){I(0===o.negative),I(!o.isZero());var l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=new p(0),w=new p(1),g=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++g;for(var s=f.clone(),v=l.clone();!l.isZero();){for(var $=0,L=1;0==(l.words[0]&L)&&$<26;++$,L<<=1);if($>0)for(l.iushrn($);$-- >0;)(u.isOdd()||h.isOdd())&&(u.iadd(s),h.isub(v)),u.iushrn(1),h.iushrn(1);for(var ie=0,Se=1;0==(f.words[0]&Se)&&ie<26;++ie,Se<<=1);if(ie>0)for(f.iushrn(ie);ie-- >0;)(b.isOdd()||w.isOdd())&&(b.iadd(s),w.isub(v)),b.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(b),h.isub(w)):(f.isub(l),b.isub(u),w.isub(h))}return{a:b,b:w,gcd:f.iushln(g)}},p.prototype._invmp=function(o){I(0===o.negative),I(!o.isZero());var $,l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,g=1;0==(l.words[0]&g)&&w<26;++w,g<<=1);if(w>0)for(l.iushrn(w);w-- >0;)u.isOdd()&&u.iadd(b),u.iushrn(1);for(var s=0,v=1;0==(f.words[0]&v)&&s<26;++s,v<<=1);if(s>0)for(f.iushrn(s);s-- >0;)h.isOdd()&&h.iadd(b),h.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(h)):(f.isub(l),h.isub(u))}return($=0===l.cmpn(1)?u:h).cmpn(0)<0&&$.iadd(o),$},p.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),f=o.clone();l.negative=0,f.negative=0;for(var u=0;l.isEven()&&f.isEven();u++)l.iushrn(1),f.iushrn(1);for(;;){for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var h=l.cmp(f);if(h<0){var b=l;l=f,f=b}else if(0===h||0===f.cmpn(1))break;l.isub(f)}return f.iushln(u)},p.prototype.invm=function(o){return this.egcd(o).a.umod(o)},p.prototype.isEven=function(){return 0==(1&this.words[0])},p.prototype.isOdd=function(){return 1==(1&this.words[0])},p.prototype.andln=function(o){return this.words[0]&o},p.prototype.bincn=function(o){I("number"==typeof o);var l=o%26,f=(o-l)/26,u=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=u,this;for(var h=u,b=f;0!==h&&b<this.length;b++){var w=0|this.words[b];h=(w+=h)>>>26,this.words[b]=w&=67108863}return 0!==h&&(this.words[b]=h,this.length++),this},p.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},p.prototype.cmpn=function(o){var f,l=o<0;if(0!==this.negative&&!l)return-1;if(0===this.negative&&l)return 1;if(this.strip(),this.length>1)f=1;else{l&&(o=-o),I(o<=67108863,"Number is too big");var u=0|this.words[0];f=u===o?0:u<o?-1:1}return 0!==this.negative?0|-f:f},p.prototype.cmp=function(o){if(0!==this.negative&&0===o.negative)return-1;if(0===this.negative&&0!==o.negative)return 1;var l=this.ucmp(o);return 0!==this.negative?0|-l:l},p.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var u=0|this.words[f],h=0|o.words[f];if(u!==h){u<h?l=-1:u>h&&(l=1);break}}return l},p.prototype.gtn=function(o){return 1===this.cmpn(o)},p.prototype.gt=function(o){return 1===this.cmp(o)},p.prototype.gten=function(o){return this.cmpn(o)>=0},p.prototype.gte=function(o){return this.cmp(o)>=0},p.prototype.ltn=function(o){return-1===this.cmpn(o)},p.prototype.lt=function(o){return-1===this.cmp(o)},p.prototype.lten=function(o){return this.cmpn(o)<=0},p.prototype.lte=function(o){return this.cmp(o)<=0},p.prototype.eqn=function(o){return 0===this.cmpn(o)},p.prototype.eq=function(o){return 0===this.cmp(o)},p.red=function(o){return new we(o)},p.prototype.toRed=function(o){return I(!this.red,"Already a number in reduction context"),I(0===this.negative,"red works only with positives"),o.convertTo(this)._forceRed(o)},p.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},p.prototype._forceRed=function(o){return this.red=o,this},p.prototype.forceRed=function(o){return I(!this.red,"Already a number in reduction context"),this._forceRed(o)},p.prototype.redAdd=function(o){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},p.prototype.redIAdd=function(o){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},p.prototype.redSub=function(o){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},p.prototype.redISub=function(o){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},p.prototype.redShl=function(o){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},p.prototype.redMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},p.prototype.redIMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},p.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},p.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},p.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},p.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},p.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},p.prototype.redPow=function(o){return I(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Z={k256:null,p224:null,p192:null,p25519:null};function ee(y,o){this.name=y,this.p=new p(o,16),this.n=this.p.bitLength(),this.k=new p(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function ae(){ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function ge(){ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Ce(){ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function De(){ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function we(y){if("string"==typeof y){var o=p._prime(y);this.m=o.p,this.prime=o}else I(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}function Oe(y){we.call(this,y),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new p(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ee.prototype._tmp=function(){var o=new p(null);return o.words=new Array(Math.ceil(this.n/13)),o},ee.prototype.ireduce=function(o){var f,l=o;do{this.split(l,this.tmp),f=(l=(l=this.imulK(l)).iadd(this.tmp)).bitLength()}while(f>this.n);var u=f<this.n?-1:l.ucmp(this.p);return 0===u?(l.words[0]=0,l.length=1):u>0?l.isub(this.p):void 0!==l.strip?l.strip():l._strip(),l},ee.prototype.split=function(o,l){o.iushrn(this.n,0,l)},ee.prototype.imulK=function(o){return o.imul(this.k)},G(ae,ee),ae.prototype.split=function(o,l){for(var f=4194303,u=Math.min(o.length,9),h=0;h<u;h++)l.words[h]=o.words[h];if(l.length=u,o.length<=9)return o.words[0]=0,void(o.length=1);var b=o.words[9];for(l.words[l.length++]=b&f,h=10;h<o.length;h++){var w=0|o.words[h];o.words[h-10]=(w&f)<<4|b>>>22,b=w}o.words[h-10]=b>>>=22,o.length-=0===b&&o.length>10?10:9},ae.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,f=0;f<o.length;f++){var u=0|o.words[f];o.words[f]=67108863&(l+=977*u),l=64*u+(l/67108864|0)}return 0===o.words[o.length-1]&&(o.length--,0===o.words[o.length-1]&&o.length--),o},G(ge,ee),G(Ce,ee),G(De,ee),De.prototype.imulK=function(o){for(var l=0,f=0;f<o.length;f++){var u=19*(0|o.words[f])+l,h=67108863&u;u>>>=26,o.words[f]=h,l=u}return 0!==l&&(o.words[o.length++]=l),o},p._prime=function(o){if(Z[o])return Z[o];var l;if("k256"===o)l=new ae;else if("p224"===o)l=new ge;else if("p192"===o)l=new Ce;else{if("p25519"!==o)throw new Error("Unknown prime "+o);l=new De}return Z[o]=l,l},we.prototype._verify1=function(o){I(0===o.negative,"red works only with positives"),I(o.red,"red works only with red numbers")},we.prototype._verify2=function(o,l){I(0==(o.negative|l.negative),"red works only with positives"),I(o.red&&o.red===l.red,"red works only with red numbers")},we.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},we.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},we.prototype.add=function(o,l){this._verify2(o,l);var f=o.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},we.prototype.iadd=function(o,l){this._verify2(o,l);var f=o.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},we.prototype.sub=function(o,l){this._verify2(o,l);var f=o.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},we.prototype.isub=function(o,l){this._verify2(o,l);var f=o.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},we.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},we.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},we.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},we.prototype.isqr=function(o){return this.imul(o,o.clone())},we.prototype.sqr=function(o){return this.mul(o,o)},we.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(I(l%2==1),3===l){var f=this.m.add(new p(1)).iushrn(2);return this.pow(o,f)}for(var u=this.m.subn(1),h=0;!u.isZero()&&0===u.andln(1);)h++,u.iushrn(1);I(!u.isZero());var b=new p(1).toRed(this),w=b.redNeg(),g=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new p(2*s*s).toRed(this);0!==this.pow(s,g).cmp(w);)s.redIAdd(w);for(var v=this.pow(s,u),$=this.pow(o,u.addn(1).iushrn(1)),L=this.pow(o,u),ie=h;0!==L.cmp(b);){for(var Se=L,ke=0;0!==Se.cmp(b);ke++)Se=Se.redSqr();I(ke<ie);var Be=this.pow(v,new p(1).iushln(ie-ke-1));$=$.redMul(Be),v=Be.redSqr(),L=L.redMul(v),ie=ke}return $},we.prototype.invm=function(o){var l=o._invmp(this.m);return 0!==l.negative?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},we.prototype.pow=function(o,l){if(l.isZero())return new p(1).toRed(this);if(0===l.cmpn(1))return o.clone();var u=new Array(16);u[0]=new p(1).toRed(this),u[1]=o;for(var h=2;h<u.length;h++)u[h]=this.mul(u[h-1],o);var b=u[0],w=0,g=0,s=l.bitLength()%26;for(0===s&&(s=26),h=l.length-1;h>=0;h--){for(var v=l.words[h],$=s-1;$>=0;$--){var L=v>>$&1;b!==u[0]&&(b=this.sqr(b)),0!==L||0!==w?(w<<=1,w|=L,(4==++g||0===h&&0===$)&&(b=this.mul(b,u[w]),g=0,w=0)):g=0}s=26}return b},we.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},we.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},p.mont=function(o){return new Oe(o)},G(Oe,we),Oe.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Oe.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},Oe.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var f=o.imul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new p(0)._forceRed(this);var f=o.mul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.invm=function(o){return this.imod(o._invmp(this.m).mul(this.r2))._forceRed(this)}}(ye=H.nmd(ye),this)},5343:(ye,ue)=>{"use strict";ue.byteLength=function P(C){var B=k(C),z=B[1];return 3*(B[0]+z)/4-z},ue.toByteArray=function R(C){var B,ae,N=k(C),z=N[0],X=N[1],U=new W(function E(C,B,N){return 3*(B+N)/4-N}(0,z,X)),Z=0,ee=X>0?z-4:z;for(ae=0;ae<ee;ae+=4)B=j[C.charCodeAt(ae)]<<18|j[C.charCodeAt(ae+1)]<<12|j[C.charCodeAt(ae+2)]<<6|j[C.charCodeAt(ae+3)],U[Z++]=B>>16&255,U[Z++]=B>>8&255,U[Z++]=255&B;return 2===X&&(B=j[C.charCodeAt(ae)]<<2|j[C.charCodeAt(ae+1)]>>4,U[Z++]=255&B),1===X&&(B=j[C.charCodeAt(ae)]<<10|j[C.charCodeAt(ae+1)]<<4|j[C.charCodeAt(ae+2)]>>2,U[Z++]=B>>8&255,U[Z++]=255&B),U},ue.fromByteArray=function O(C){for(var B,N=C.length,z=N%3,X=[],U=16383,Z=0,ee=N-z;Z<ee;Z+=U)X.push(S(C,Z,Z+U>ee?ee:Z+U));return 1===z?X.push(H[(B=C[N-1])>>2]+H[B<<4&63]+"=="):2===z&&X.push(H[(B=(C[N-2]<<8)+C[N-1])>>10]+H[B>>4&63]+H[B<<2&63]+"="),X.join("")};for(var H=[],j=[],W="undefined"!=typeof Uint8Array?Uint8Array:Array,I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=0,p=I.length;G<p;++G)H[G]=I[G],j[I.charCodeAt(G)]=G;function k(C){var B=C.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=C.indexOf("=");return-1===N&&(N=B),[N,N===B?0:4-N%4]}function x(C){return H[C>>18&63]+H[C>>12&63]+H[C>>6&63]+H[63&C]}function S(C,B,N){for(var X=[],U=B;U<N;U+=3)X.push(x((C[U]<<16&16711680)+(C[U+1]<<8&65280)+(255&C[U+2])));return X.join("")}j["-".charCodeAt(0)]=62,j["_".charCodeAt(0)]=63},8538:function(ye,ue,H){!function(j,W){"use strict";function I(f,u){if(!f)throw new Error(u||"Assertion failed")}function G(f,u){f.super_=u;var h=function(){};h.prototype=u.prototype,f.prototype=new h,f.prototype.constructor=f}function p(f,u,h){if(p.isBN(f))return f;this.negative=0,this.words=null,this.length=0,this.red=null,null!==f&&(("le"===u||"be"===u)&&(h=u,u=10),this._init(f||0,u||10,h||"be"))}var k;"object"==typeof j?j.exports=p:W.BN=p,p.BN=p,p.wordSize=26;try{k="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:H(6601).Buffer}catch(f){}function P(f,u){var h=f.charCodeAt(u);return h>=48&&h<=57?h-48:h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:void I(!1,"Invalid character in "+f)}function E(f,u,h){var b=P(f,h);return h-1>=u&&(b|=P(f,h-1)<<4),b}function R(f,u,h,b){for(var w=0,g=0,s=Math.min(f.length,h),v=u;v<s;v++){var $=f.charCodeAt(v)-48;w*=b,g=$>=49?$-49+10:$>=17?$-17+10:$,I($>=0&&g<b,"Invalid character"),w+=g}return w}function x(f,u){f.words=u.words,f.length=u.length,f.negative=u.negative,f.red=u.red}if(p.isBN=function(u){return u instanceof p||null!==u&&"object"==typeof u&&u.constructor.wordSize===p.wordSize&&Array.isArray(u.words)},p.max=function(u,h){return u.cmp(h)>0?u:h},p.min=function(u,h){return u.cmp(h)<0?u:h},p.prototype._init=function(u,h,b){if("number"==typeof u)return this._initNumber(u,h,b);if("object"==typeof u)return this._initArray(u,h,b);"hex"===h&&(h=16),I(h===(0|h)&&h>=2&&h<=36);var w=0;"-"===(u=u.toString().replace(/\s+/g,""))[0]&&(w++,this.negative=1),w<u.length&&(16===h?this._parseHex(u,w,b):(this._parseBase(u,h,w),"le"===b&&this._initArray(this.toArray(),h,b)))},p.prototype._initNumber=function(u,h,b){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[67108863&u],this.length=1):u<4503599627370496?(this.words=[67108863&u,u/67108864&67108863],this.length=2):(I(u<9007199254740992),this.words=[67108863&u,u/67108864&67108863,1],this.length=3),"le"===b&&this._initArray(this.toArray(),h,b)},p.prototype._initArray=function(u,h,b){if(I("number"==typeof u.length),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var g,s,v=0;if("be"===b)for(w=u.length-1,g=0;w>=0;w-=3)this.words[g]|=(s=u[w]|u[w-1]<<8|u[w-2]<<16)<<v&67108863,this.words[g+1]=s>>>26-v&67108863,(v+=24)>=26&&(v-=26,g++);else if("le"===b)for(w=0,g=0;w<u.length;w+=3)this.words[g]|=(s=u[w]|u[w+1]<<8|u[w+2]<<16)<<v&67108863,this.words[g+1]=s>>>26-v&67108863,(v+=24)>=26&&(v-=26,g++);return this._strip()},p.prototype._parseHex=function(u,h,b){this.length=Math.ceil((u.length-h)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var v,g=0,s=0;if("be"===b)for(w=u.length-1;w>=h;w-=2)v=E(u,h,w)<<g,this.words[s]|=67108863&v,g>=18?(g-=18,this.words[s+=1]|=v>>>26):g+=8;else for(w=(u.length-h)%2==0?h+1:h;w<u.length;w+=2)v=E(u,h,w)<<g,this.words[s]|=67108863&v,g>=18?(g-=18,this.words[s+=1]|=v>>>26):g+=8;this._strip()},p.prototype._parseBase=function(u,h,b){this.words=[0],this.length=1;for(var w=0,g=1;g<=67108863;g*=h)w++;w--,g=g/h|0;for(var s=u.length-b,v=s%w,$=Math.min(s,s-v)+b,L=0,ie=b;ie<$;ie+=w)L=R(u,ie,ie+w,h),this.imuln(g),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L);if(0!==v){var Se=1;for(L=R(u,ie,u.length,h),ie=0;ie<v;ie++)Se*=h;this.imuln(Se),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L)}this._strip()},p.prototype.copy=function(u){u.words=new Array(this.length);for(var h=0;h<this.length;h++)u.words[h]=this.words[h];u.length=this.length,u.negative=this.negative,u.red=this.red},p.prototype._move=function(u){x(u,this)},p.prototype.clone=function(){var u=new p(null);return this.copy(u),u},p.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},p.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},p.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{p.prototype[Symbol.for("nodejs.util.inspect.custom")]=S}catch(f){p.prototype.inspect=S}else p.prototype.inspect=S;function S(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var O=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function X(f,u,h){h.negative=u.negative^f.negative;var b=f.length+u.length|0;h.length=b,b=b-1|0;var w=0|f.words[0],g=0|u.words[0],s=w*g,$=s/67108864|0;h.words[0]=67108863&s;for(var L=1;L<b;L++){for(var ie=$>>>26,Se=67108863&$,ke=Math.min(L,u.length-1),Be=Math.max(0,L-f.length+1);Be<=ke;Be++)ie+=(s=(w=0|f.words[L-Be|0])*(g=0|u.words[Be])+Se)/67108864|0,Se=67108863&s;h.words[L]=0|Se,$=0|ie}return 0!==$?h.words[L]=0|$:h.length--,h._strip()}p.prototype.toString=function(u,h){var b;if(h=0|h||1,16===(u=u||10)||"hex"===u){b="";for(var w=0,g=0,s=0;s<this.length;s++){var v=this.words[s],$=(16777215&(v<<w|g)).toString(16);g=v>>>24-w&16777215,(w+=2)>=26&&(w-=26,s--),b=0!==g||s!==this.length-1?O[6-$.length]+$+b:$+b}for(0!==g&&(b=g.toString(16)+b);b.length%h!=0;)b="0"+b;return 0!==this.negative&&(b="-"+b),b}if(u===(0|u)&&u>=2&&u<=36){var L=C[u],ie=B[u];b="";var Se=this.clone();for(Se.negative=0;!Se.isZero();){var ke=Se.modrn(ie).toString(u);b=(Se=Se.idivn(ie)).isZero()?ke+b:O[L-ke.length]+ke+b}for(this.isZero()&&(b="0"+b);b.length%h!=0;)b="0"+b;return 0!==this.negative&&(b="-"+b),b}I(!1,"Base should be between 2 and 36")},p.prototype.toNumber=function(){var u=this.words[0];return 2===this.length?u+=67108864*this.words[1]:3===this.length&&1===this.words[2]?u+=4503599627370496+67108864*this.words[1]:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-u:u},p.prototype.toJSON=function(){return this.toString(16,2)},k&&(p.prototype.toBuffer=function(u,h){return this.toArrayLike(k,u,h)}),p.prototype.toArray=function(u,h){return this.toArrayLike(Array,u,h)},p.prototype.toArrayLike=function(u,h,b){this._strip();var w=this.byteLength(),g=b||Math.max(1,w);I(w<=g,"byte array longer than desired length"),I(g>0,"Requested array length <= 0");var s=function(u,h){return u.allocUnsafe?u.allocUnsafe(h):new u(h)}(u,g);return this["_toArrayLike"+("le"===h?"LE":"BE")](s,w),s},p.prototype._toArrayLikeLE=function(u,h){for(var b=0,w=0,g=0,s=0;g<this.length;g++){var v=this.words[g]<<s|w;u[b++]=255&v,b<u.length&&(u[b++]=v>>8&255),b<u.length&&(u[b++]=v>>16&255),6===s?(b<u.length&&(u[b++]=v>>24&255),w=0,s=0):(w=v>>>24,s+=2)}if(b<u.length)for(u[b++]=w;b<u.length;)u[b++]=0},p.prototype._toArrayLikeBE=function(u,h){for(var b=u.length-1,w=0,g=0,s=0;g<this.length;g++){var v=this.words[g]<<s|w;u[b--]=255&v,b>=0&&(u[b--]=v>>8&255),b>=0&&(u[b--]=v>>16&255),6===s?(b>=0&&(u[b--]=v>>24&255),w=0,s=0):(w=v>>>24,s+=2)}if(b>=0)for(u[b--]=w;b>=0;)u[b--]=0},p.prototype._countBits=Math.clz32?function(u){return 32-Math.clz32(u)}:function(u){var h=u,b=0;return h>=4096&&(b+=13,h>>>=13),h>=64&&(b+=7,h>>>=7),h>=8&&(b+=4,h>>>=4),h>=2&&(b+=2,h>>>=2),b+h},p.prototype._zeroBits=function(u){if(0===u)return 26;var h=u,b=0;return 0==(8191&h)&&(b+=13,h>>>=13),0==(127&h)&&(b+=7,h>>>=7),0==(15&h)&&(b+=4,h>>>=4),0==(3&h)&&(b+=2,h>>>=2),0==(1&h)&&b++,b},p.prototype.bitLength=function(){var h=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+h},p.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,h=0;h<this.length;h++){var b=this._zeroBits(this.words[h]);if(u+=b,26!==b)break}return u},p.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},p.prototype.toTwos=function(u){return 0!==this.negative?this.abs().inotn(u).iaddn(1):this.clone()},p.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},p.prototype.isNeg=function(){return 0!==this.negative},p.prototype.neg=function(){return this.clone().ineg()},p.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},p.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var h=0;h<u.length;h++)this.words[h]=this.words[h]|u.words[h];return this._strip()},p.prototype.ior=function(u){return I(0==(this.negative|u.negative)),this.iuor(u)},p.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},p.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},p.prototype.iuand=function(u){var h;h=this.length>u.length?u:this;for(var b=0;b<h.length;b++)this.words[b]=this.words[b]&u.words[b];return this.length=h.length,this._strip()},p.prototype.iand=function(u){return I(0==(this.negative|u.negative)),this.iuand(u)},p.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},p.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},p.prototype.iuxor=function(u){var h,b;this.length>u.length?(h=this,b=u):(h=u,b=this);for(var w=0;w<b.length;w++)this.words[w]=h.words[w]^b.words[w];if(this!==h)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=h.length,this._strip()},p.prototype.ixor=function(u){return I(0==(this.negative|u.negative)),this.iuxor(u)},p.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},p.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},p.prototype.inotn=function(u){I("number"==typeof u&&u>=0);var h=0|Math.ceil(u/26),b=u%26;this._expand(h),b>0&&h--;for(var w=0;w<h;w++)this.words[w]=67108863&~this.words[w];return b>0&&(this.words[w]=~this.words[w]&67108863>>26-b),this._strip()},p.prototype.notn=function(u){return this.clone().inotn(u)},p.prototype.setn=function(u,h){I("number"==typeof u&&u>=0);var b=u/26|0,w=u%26;return this._expand(b+1),this.words[b]=h?this.words[b]|1<<w:this.words[b]&~(1<<w),this._strip()},p.prototype.iadd=function(u){var h,b,w;if(0!==this.negative&&0===u.negative)return this.negative=0,h=this.isub(u),this.negative^=1,this._normSign();if(0===this.negative&&0!==u.negative)return u.negative=0,h=this.isub(u),u.negative=1,h._normSign();this.length>u.length?(b=this,w=u):(b=u,w=this);for(var g=0,s=0;s<w.length;s++)this.words[s]=67108863&(h=(0|b.words[s])+(0|w.words[s])+g),g=h>>>26;for(;0!==g&&s<b.length;s++)this.words[s]=67108863&(h=(0|b.words[s])+g),g=h>>>26;if(this.length=b.length,0!==g)this.words[this.length]=g,this.length++;else if(b!==this)for(;s<b.length;s++)this.words[s]=b.words[s];return this},p.prototype.add=function(u){var h;return 0!==u.negative&&0===this.negative?(u.negative=0,h=this.sub(u),u.negative^=1,h):0===u.negative&&0!==this.negative?(this.negative=0,h=u.sub(this),this.negative=1,h):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},p.prototype.isub=function(u){if(0!==u.negative){u.negative=0;var h=this.iadd(u);return u.negative=1,h._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var w,g,b=this.cmp(u);if(0===b)return this.negative=0,this.length=1,this.words[0]=0,this;b>0?(w=this,g=u):(w=u,g=this);for(var s=0,v=0;v<g.length;v++)s=(h=(0|w.words[v])-(0|g.words[v])+s)>>26,this.words[v]=67108863&h;for(;0!==s&&v<w.length;v++)s=(h=(0|w.words[v])+s)>>26,this.words[v]=67108863&h;if(0===s&&v<w.length&&w!==this)for(;v<w.length;v++)this.words[v]=w.words[v];return this.length=Math.max(this.length,v),w!==this&&(this.negative=1),this._strip()},p.prototype.sub=function(u){return this.clone().isub(u)};var U=function(u,h,b){var $,L,ie,w=u.words,g=h.words,s=b.words,v=0,Se=0|w[0],ke=8191&Se,Be=Se>>>13,Pe=0|w[1],Te=8191&Pe,Ie=Pe>>>13,Vt=0|w[2],je=8191&Vt,se=Vt>>>13,Ee=0|w[3],Re=8191&Ee,Ge=Ee>>>13,ui=0|w[4],qe=8191&ui,Ye=ui>>>13,xi=0|w[5],et=8191&xi,Ke=xi>>>13,qi=0|w[6],ut=8191&qi,Qe=qi>>>13,rn=0|w[7],le=8191&rn,J=rn>>>13,re=0|w[8],ve=8191&re,xe=re>>>13,ot=0|w[9],Ne=8191&ot,Xe=ot>>>13,Pi=0|g[0],it=8191&Pi,rt=Pi>>>13,bi=0|g[1],ht=8191&bi,_t=bi>>>13,Sr=0|g[2],gt=8191&Sr,vt=Sr>>>13,Dr=0|g[3],st=8191&Dr,yt=Dr>>>13,Ir=0|g[4],mt=8191&Ir,wt=Ir>>>13,Cr=0|g[5],ct=8191&Cr,ft=Cr>>>13,An=0|g[6],St=8191&An,at=An>>>13,Tr=0|g[7],dt=8191&Tr,Mt=Tr>>>13,$r=0|g[8],Tt=8191&$r,Ct=$r>>>13,Fn=0|g[9],Ri=8191&Fn,Oi=Fn>>>13;b.negative=u.negative^h.negative,b.length=19;var zn=(v+($=Math.imul(ke,it))|0)+((8191&(L=(L=Math.imul(ke,rt))+Math.imul(Be,it)|0))<<13)|0;v=((ie=Math.imul(Be,rt))+(L>>>13)|0)+(zn>>>26)|0,zn&=67108863,$=Math.imul(Te,it),L=(L=Math.imul(Te,rt))+Math.imul(Ie,it)|0,ie=Math.imul(Ie,rt);var jn=(v+($=$+Math.imul(ke,ht)|0)|0)+((8191&(L=(L=L+Math.imul(ke,_t)|0)+Math.imul(Be,ht)|0))<<13)|0;v=((ie=ie+Math.imul(Be,_t)|0)+(L>>>13)|0)+(jn>>>26)|0,jn&=67108863,$=Math.imul(je,it),L=(L=Math.imul(je,rt))+Math.imul(se,it)|0,ie=Math.imul(se,rt),$=$+Math.imul(Te,ht)|0,L=(L=L+Math.imul(Te,_t)|0)+Math.imul(Ie,ht)|0,ie=ie+Math.imul(Ie,_t)|0;var tr=(v+($=$+Math.imul(ke,gt)|0)|0)+((8191&(L=(L=L+Math.imul(ke,vt)|0)+Math.imul(Be,gt)|0))<<13)|0;v=((ie=ie+Math.imul(Be,vt)|0)+(L>>>13)|0)+(tr>>>26)|0,tr&=67108863,$=Math.imul(Re,it),L=(L=Math.imul(Re,rt))+Math.imul(Ge,it)|0,ie=Math.imul(Ge,rt),$=$+Math.imul(je,ht)|0,L=(L=L+Math.imul(je,_t)|0)+Math.imul(se,ht)|0,ie=ie+Math.imul(se,_t)|0,$=$+Math.imul(Te,gt)|0,L=(L=L+Math.imul(Te,vt)|0)+Math.imul(Ie,gt)|0,ie=ie+Math.imul(Ie,vt)|0;var ir=(v+($=$+Math.imul(ke,st)|0)|0)+((8191&(L=(L=L+Math.imul(ke,yt)|0)+Math.imul(Be,st)|0))<<13)|0;v=((ie=ie+Math.imul(Be,yt)|0)+(L>>>13)|0)+(ir>>>26)|0,ir&=67108863,$=Math.imul(qe,it),L=(L=Math.imul(qe,rt))+Math.imul(Ye,it)|0,ie=Math.imul(Ye,rt),$=$+Math.imul(Re,ht)|0,L=(L=L+Math.imul(Re,_t)|0)+Math.imul(Ge,ht)|0,ie=ie+Math.imul(Ge,_t)|0,$=$+Math.imul(je,gt)|0,L=(L=L+Math.imul(je,vt)|0)+Math.imul(se,gt)|0,ie=ie+Math.imul(se,vt)|0,$=$+Math.imul(Te,st)|0,L=(L=L+Math.imul(Te,yt)|0)+Math.imul(Ie,st)|0,ie=ie+Math.imul(Ie,yt)|0;var nr=(v+($=$+Math.imul(ke,mt)|0)|0)+((8191&(L=(L=L+Math.imul(ke,wt)|0)+Math.imul(Be,mt)|0))<<13)|0;v=((ie=ie+Math.imul(Be,wt)|0)+(L>>>13)|0)+(nr>>>26)|0,nr&=67108863,$=Math.imul(et,it),L=(L=Math.imul(et,rt))+Math.imul(Ke,it)|0,ie=Math.imul(Ke,rt),$=$+Math.imul(qe,ht)|0,L=(L=L+Math.imul(qe,_t)|0)+Math.imul(Ye,ht)|0,ie=ie+Math.imul(Ye,_t)|0,$=$+Math.imul(Re,gt)|0,L=(L=L+Math.imul(Re,vt)|0)+Math.imul(Ge,gt)|0,ie=ie+Math.imul(Ge,vt)|0,$=$+Math.imul(je,st)|0,L=(L=L+Math.imul(je,yt)|0)+Math.imul(se,st)|0,ie=ie+Math.imul(se,yt)|0,$=$+Math.imul(Te,mt)|0,L=(L=L+Math.imul(Te,wt)|0)+Math.imul(Ie,mt)|0,ie=ie+Math.imul(Ie,wt)|0;var rr=(v+($=$+Math.imul(ke,ct)|0)|0)+((8191&(L=(L=L+Math.imul(ke,ft)|0)+Math.imul(Be,ct)|0))<<13)|0;v=((ie=ie+Math.imul(Be,ft)|0)+(L>>>13)|0)+(rr>>>26)|0,rr&=67108863,$=Math.imul(ut,it),L=(L=Math.imul(ut,rt))+Math.imul(Qe,it)|0,ie=Math.imul(Qe,rt),$=$+Math.imul(et,ht)|0,L=(L=L+Math.imul(et,_t)|0)+Math.imul(Ke,ht)|0,ie=ie+Math.imul(Ke,_t)|0,$=$+Math.imul(qe,gt)|0,L=(L=L+Math.imul(qe,vt)|0)+Math.imul(Ye,gt)|0,ie=ie+Math.imul(Ye,vt)|0,$=$+Math.imul(Re,st)|0,L=(L=L+Math.imul(Re,yt)|0)+Math.imul(Ge,st)|0,ie=ie+Math.imul(Ge,yt)|0,$=$+Math.imul(je,mt)|0,L=(L=L+Math.imul(je,wt)|0)+Math.imul(se,mt)|0,ie=ie+Math.imul(se,wt)|0,$=$+Math.imul(Te,ct)|0,L=(L=L+Math.imul(Te,ft)|0)+Math.imul(Ie,ct)|0,ie=ie+Math.imul(Ie,ft)|0;var qn=(v+($=$+Math.imul(ke,St)|0)|0)+((8191&(L=(L=L+Math.imul(ke,at)|0)+Math.imul(Be,St)|0))<<13)|0;v=((ie=ie+Math.imul(Be,at)|0)+(L>>>13)|0)+(qn>>>26)|0,qn&=67108863,$=Math.imul(le,it),L=(L=Math.imul(le,rt))+Math.imul(J,it)|0,ie=Math.imul(J,rt),$=$+Math.imul(ut,ht)|0,L=(L=L+Math.imul(ut,_t)|0)+Math.imul(Qe,ht)|0,ie=ie+Math.imul(Qe,_t)|0,$=$+Math.imul(et,gt)|0,L=(L=L+Math.imul(et,vt)|0)+Math.imul(Ke,gt)|0,ie=ie+Math.imul(Ke,vt)|0,$=$+Math.imul(qe,st)|0,L=(L=L+Math.imul(qe,yt)|0)+Math.imul(Ye,st)|0,ie=ie+Math.imul(Ye,yt)|0,$=$+Math.imul(Re,mt)|0,L=(L=L+Math.imul(Re,wt)|0)+Math.imul(Ge,mt)|0,ie=ie+Math.imul(Ge,wt)|0,$=$+Math.imul(je,ct)|0,L=(L=L+Math.imul(je,ft)|0)+Math.imul(se,ct)|0,ie=ie+Math.imul(se,ft)|0,$=$+Math.imul(Te,St)|0,L=(L=L+Math.imul(Te,at)|0)+Math.imul(Ie,St)|0,ie=ie+Math.imul(Ie,at)|0;var ar=(v+($=$+Math.imul(ke,dt)|0)|0)+((8191&(L=(L=L+Math.imul(ke,Mt)|0)+Math.imul(Be,dt)|0))<<13)|0;v=((ie=ie+Math.imul(Be,Mt)|0)+(L>>>13)|0)+(ar>>>26)|0,ar&=67108863,$=Math.imul(ve,it),L=(L=Math.imul(ve,rt))+Math.imul(xe,it)|0,ie=Math.imul(xe,rt),$=$+Math.imul(le,ht)|0,L=(L=L+Math.imul(le,_t)|0)+Math.imul(J,ht)|0,ie=ie+Math.imul(J,_t)|0,$=$+Math.imul(ut,gt)|0,L=(L=L+Math.imul(ut,vt)|0)+Math.imul(Qe,gt)|0,ie=ie+Math.imul(Qe,vt)|0,$=$+Math.imul(et,st)|0,L=(L=L+Math.imul(et,yt)|0)+Math.imul(Ke,st)|0,ie=ie+Math.imul(Ke,yt)|0,$=$+Math.imul(qe,mt)|0,L=(L=L+Math.imul(qe,wt)|0)+Math.imul(Ye,mt)|0,ie=ie+Math.imul(Ye,wt)|0,$=$+Math.imul(Re,ct)|0,L=(L=L+Math.imul(Re,ft)|0)+Math.imul(Ge,ct)|0,ie=ie+Math.imul(Ge,ft)|0,$=$+Math.imul(je,St)|0,L=(L=L+Math.imul(je,at)|0)+Math.imul(se,St)|0,ie=ie+Math.imul(se,at)|0,$=$+Math.imul(Te,dt)|0,L=(L=L+Math.imul(Te,Mt)|0)+Math.imul(Ie,dt)|0,ie=ie+Math.imul(Ie,Mt)|0;var or=(v+($=$+Math.imul(ke,Tt)|0)|0)+((8191&(L=(L=L+Math.imul(ke,Ct)|0)+Math.imul(Be,Tt)|0))<<13)|0;v=((ie=ie+Math.imul(Be,Ct)|0)+(L>>>13)|0)+(or>>>26)|0,or&=67108863,$=Math.imul(Ne,it),L=(L=Math.imul(Ne,rt))+Math.imul(Xe,it)|0,ie=Math.imul(Xe,rt),$=$+Math.imul(ve,ht)|0,L=(L=L+Math.imul(ve,_t)|0)+Math.imul(xe,ht)|0,ie=ie+Math.imul(xe,_t)|0,$=$+Math.imul(le,gt)|0,L=(L=L+Math.imul(le,vt)|0)+Math.imul(J,gt)|0,ie=ie+Math.imul(J,vt)|0,$=$+Math.imul(ut,st)|0,L=(L=L+Math.imul(ut,yt)|0)+Math.imul(Qe,st)|0,ie=ie+Math.imul(Qe,yt)|0,$=$+Math.imul(et,mt)|0,L=(L=L+Math.imul(et,wt)|0)+Math.imul(Ke,mt)|0,ie=ie+Math.imul(Ke,wt)|0,$=$+Math.imul(qe,ct)|0,L=(L=L+Math.imul(qe,ft)|0)+Math.imul(Ye,ct)|0,ie=ie+Math.imul(Ye,ft)|0,$=$+Math.imul(Re,St)|0,L=(L=L+Math.imul(Re,at)|0)+Math.imul(Ge,St)|0,ie=ie+Math.imul(Ge,at)|0,$=$+Math.imul(je,dt)|0,L=(L=L+Math.imul(je,Mt)|0)+Math.imul(se,dt)|0,ie=ie+Math.imul(se,Mt)|0,$=$+Math.imul(Te,Tt)|0,L=(L=L+Math.imul(Te,Ct)|0)+Math.imul(Ie,Tt)|0,ie=ie+Math.imul(Ie,Ct)|0;var Vi=(v+($=$+Math.imul(ke,Ri)|0)|0)+((8191&(L=(L=L+Math.imul(ke,Oi)|0)+Math.imul(Be,Ri)|0))<<13)|0;v=((ie=ie+Math.imul(Be,Oi)|0)+(L>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,$=Math.imul(Ne,ht),L=(L=Math.imul(Ne,_t))+Math.imul(Xe,ht)|0,ie=Math.imul(Xe,_t),$=$+Math.imul(ve,gt)|0,L=(L=L+Math.imul(ve,vt)|0)+Math.imul(xe,gt)|0,ie=ie+Math.imul(xe,vt)|0,$=$+Math.imul(le,st)|0,L=(L=L+Math.imul(le,yt)|0)+Math.imul(J,st)|0,ie=ie+Math.imul(J,yt)|0,$=$+Math.imul(ut,mt)|0,L=(L=L+Math.imul(ut,wt)|0)+Math.imul(Qe,mt)|0,ie=ie+Math.imul(Qe,wt)|0,$=$+Math.imul(et,ct)|0,L=(L=L+Math.imul(et,ft)|0)+Math.imul(Ke,ct)|0,ie=ie+Math.imul(Ke,ft)|0,$=$+Math.imul(qe,St)|0,L=(L=L+Math.imul(qe,at)|0)+Math.imul(Ye,St)|0,ie=ie+Math.imul(Ye,at)|0,$=$+Math.imul(Re,dt)|0,L=(L=L+Math.imul(Re,Mt)|0)+Math.imul(Ge,dt)|0,ie=ie+Math.imul(Ge,Mt)|0,$=$+Math.imul(je,Tt)|0,L=(L=L+Math.imul(je,Ct)|0)+Math.imul(se,Tt)|0,ie=ie+Math.imul(se,Ct)|0;var $n=(v+($=$+Math.imul(Te,Ri)|0)|0)+((8191&(L=(L=L+Math.imul(Te,Oi)|0)+Math.imul(Ie,Ri)|0))<<13)|0;v=((ie=ie+Math.imul(Ie,Oi)|0)+(L>>>13)|0)+($n>>>26)|0,$n&=67108863,$=Math.imul(Ne,gt),L=(L=Math.imul(Ne,vt))+Math.imul(Xe,gt)|0,ie=Math.imul(Xe,vt),$=$+Math.imul(ve,st)|0,L=(L=L+Math.imul(ve,yt)|0)+Math.imul(xe,st)|0,ie=ie+Math.imul(xe,yt)|0,$=$+Math.imul(le,mt)|0,L=(L=L+Math.imul(le,wt)|0)+Math.imul(J,mt)|0,ie=ie+Math.imul(J,wt)|0,$=$+Math.imul(ut,ct)|0,L=(L=L+Math.imul(ut,ft)|0)+Math.imul(Qe,ct)|0,ie=ie+Math.imul(Qe,ft)|0,$=$+Math.imul(et,St)|0,L=(L=L+Math.imul(et,at)|0)+Math.imul(Ke,St)|0,ie=ie+Math.imul(Ke,at)|0,$=$+Math.imul(qe,dt)|0,L=(L=L+Math.imul(qe,Mt)|0)+Math.imul(Ye,dt)|0,ie=ie+Math.imul(Ye,Mt)|0,$=$+Math.imul(Re,Tt)|0,L=(L=L+Math.imul(Re,Ct)|0)+Math.imul(Ge,Tt)|0,ie=ie+Math.imul(Ge,Ct)|0;var Ni=(v+($=$+Math.imul(je,Ri)|0)|0)+((8191&(L=(L=L+Math.imul(je,Oi)|0)+Math.imul(se,Ri)|0))<<13)|0;v=((ie=ie+Math.imul(se,Oi)|0)+(L>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,$=Math.imul(Ne,st),L=(L=Math.imul(Ne,yt))+Math.imul(Xe,st)|0,ie=Math.imul(Xe,yt),$=$+Math.imul(ve,mt)|0,L=(L=L+Math.imul(ve,wt)|0)+Math.imul(xe,mt)|0,ie=ie+Math.imul(xe,wt)|0,$=$+Math.imul(le,ct)|0,L=(L=L+Math.imul(le,ft)|0)+Math.imul(J,ct)|0,ie=ie+Math.imul(J,ft)|0,$=$+Math.imul(ut,St)|0,L=(L=L+Math.imul(ut,at)|0)+Math.imul(Qe,St)|0,ie=ie+Math.imul(Qe,at)|0,$=$+Math.imul(et,dt)|0,L=(L=L+Math.imul(et,Mt)|0)+Math.imul(Ke,dt)|0,ie=ie+Math.imul(Ke,Mt)|0,$=$+Math.imul(qe,Tt)|0,L=(L=L+Math.imul(qe,Ct)|0)+Math.imul(Ye,Tt)|0,ie=ie+Math.imul(Ye,Ct)|0;var Wn=(v+($=$+Math.imul(Re,Ri)|0)|0)+((8191&(L=(L=L+Math.imul(Re,Oi)|0)+Math.imul(Ge,Ri)|0))<<13)|0;v=((ie=ie+Math.imul(Ge,Oi)|0)+(L>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,$=Math.imul(Ne,mt),L=(L=Math.imul(Ne,wt))+Math.imul(Xe,mt)|0,ie=Math.imul(Xe,wt),$=$+Math.imul(ve,ct)|0,L=(L=L+Math.imul(ve,ft)|0)+Math.imul(xe,ct)|0,ie=ie+Math.imul(xe,ft)|0,$=$+Math.imul(le,St)|0,L=(L=L+Math.imul(le,at)|0)+Math.imul(J,St)|0,ie=ie+Math.imul(J,at)|0,$=$+Math.imul(ut,dt)|0,L=(L=L+Math.imul(ut,Mt)|0)+Math.imul(Qe,dt)|0,ie=ie+Math.imul(Qe,Mt)|0,$=$+Math.imul(et,Tt)|0,L=(L=L+Math.imul(et,Ct)|0)+Math.imul(Ke,Tt)|0,ie=ie+Math.imul(Ke,Ct)|0;var Ln=(v+($=$+Math.imul(qe,Ri)|0)|0)+((8191&(L=(L=L+Math.imul(qe,Oi)|0)+Math.imul(Ye,Ri)|0))<<13)|0;v=((ie=ie+Math.imul(Ye,Oi)|0)+(L>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,$=Math.imul(Ne,ct),L=(L=Math.imul(Ne,ft))+Math.imul(Xe,ct)|0,ie=Math.imul(Xe,ft),$=$+Math.imul(ve,St)|0,L=(L=L+Math.imul(ve,at)|0)+Math.imul(xe,St)|0,ie=ie+Math.imul(xe,at)|0,$=$+Math.imul(le,dt)|0,L=(L=L+Math.imul(le,Mt)|0)+Math.imul(J,dt)|0,ie=ie+Math.imul(J,Mt)|0,$=$+Math.imul(ut,Tt)|0,L=(L=L+Math.imul(ut,Ct)|0)+Math.imul(Qe,Tt)|0,ie=ie+Math.imul(Qe,Ct)|0;var vi=(v+($=$+Math.imul(et,Ri)|0)|0)+((8191&(L=(L=L+Math.imul(et,Oi)|0)+Math.imul(Ke,Ri)|0))<<13)|0;v=((ie=ie+Math.imul(Ke,Oi)|0)+(L>>>13)|0)+(vi>>>26)|0,vi&=67108863,$=Math.imul(Ne,St),L=(L=Math.imul(Ne,at))+Math.imul(Xe,St)|0,ie=Math.imul(Xe,at),$=$+Math.imul(ve,dt)|0,L=(L=L+Math.imul(ve,Mt)|0)+Math.imul(xe,dt)|0,ie=ie+Math.imul(xe,Mt)|0,$=$+Math.imul(le,Tt)|0,L=(L=L+Math.imul(le,Ct)|0)+Math.imul(J,Tt)|0,ie=ie+Math.imul(J,Ct)|0;var Un=(v+($=$+Math.imul(ut,Ri)|0)|0)+((8191&(L=(L=L+Math.imul(ut,Oi)|0)+Math.imul(Qe,Ri)|0))<<13)|0;v=((ie=ie+Math.imul(Qe,Oi)|0)+(L>>>13)|0)+(Un>>>26)|0,Un&=67108863,$=Math.imul(Ne,dt),L=(L=Math.imul(Ne,Mt))+Math.imul(Xe,dt)|0,ie=Math.imul(Xe,Mt),$=$+Math.imul(ve,Tt)|0,L=(L=L+Math.imul(ve,Ct)|0)+Math.imul(xe,Tt)|0,ie=ie+Math.imul(xe,Ct)|0;var Pn=(v+($=$+Math.imul(le,Ri)|0)|0)+((8191&(L=(L=L+Math.imul(le,Oi)|0)+Math.imul(J,Ri)|0))<<13)|0;v=((ie=ie+Math.imul(J,Oi)|0)+(L>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,$=Math.imul(Ne,Tt),L=(L=Math.imul(Ne,Ct))+Math.imul(Xe,Tt)|0,ie=Math.imul(Xe,Ct);var Sl=(v+($=$+Math.imul(ve,Ri)|0)|0)+((8191&(L=(L=L+Math.imul(ve,Oi)|0)+Math.imul(xe,Ri)|0))<<13)|0;v=((ie=ie+Math.imul(xe,Oi)|0)+(L>>>13)|0)+(Sl>>>26)|0,Sl&=67108863;var _u=(v+($=Math.imul(Ne,Ri))|0)+((8191&(L=(L=Math.imul(Ne,Oi))+Math.imul(Xe,Ri)|0))<<13)|0;return v=((ie=Math.imul(Xe,Oi))+(L>>>13)|0)+(_u>>>26)|0,_u&=67108863,s[0]=zn,s[1]=jn,s[2]=tr,s[3]=ir,s[4]=nr,s[5]=rr,s[6]=qn,s[7]=ar,s[8]=or,s[9]=Vi,s[10]=$n,s[11]=Ni,s[12]=Wn,s[13]=Ln,s[14]=vi,s[15]=Un,s[16]=Pn,s[17]=Sl,s[18]=_u,0!==v&&(s[19]=v,b.length++),b};function Z(f,u,h){h.negative=u.negative^f.negative,h.length=f.length+u.length;for(var b=0,w=0,g=0;g<h.length-1;g++){var s=w;w=0;for(var v=67108863&b,$=Math.min(g,u.length-1),L=Math.max(0,g-f.length+1);L<=$;L++){var Be=(0|f.words[g-L])*(0|u.words[L]),Pe=67108863&Be;v=67108863&(Pe=Pe+v|0),w+=(s=(s=s+(Be/67108864|0)|0)+(Pe>>>26)|0)>>>26,s&=67108863}h.words[g]=v,b=s,s=w}return 0!==b?h.words[g]=b:h.length--,h._strip()}function ee(f,u,h){return Z(f,u,h)}function ae(f,u){this.x=f,this.y=u}Math.imul||(U=X),p.prototype.mulTo=function(u,h){var w=this.length+u.length;return 10===this.length&&10===u.length?U(this,u,h):w<63?X(this,u,h):w<1024?Z(this,u,h):ee(this,u,h)},ae.prototype.makeRBT=function(u){for(var h=new Array(u),b=p.prototype._countBits(u)-1,w=0;w<u;w++)h[w]=this.revBin(w,b,u);return h},ae.prototype.revBin=function(u,h,b){if(0===u||u===b-1)return u;for(var w=0,g=0;g<h;g++)w|=(1&u)<<h-g-1,u>>=1;return w},ae.prototype.permute=function(u,h,b,w,g,s){for(var v=0;v<s;v++)w[v]=h[u[v]],g[v]=b[u[v]]},ae.prototype.transform=function(u,h,b,w,g,s){this.permute(s,u,h,b,w,g);for(var v=1;v<g;v<<=1)for(var $=v<<1,L=Math.cos(2*Math.PI/$),ie=Math.sin(2*Math.PI/$),Se=0;Se<g;Se+=$)for(var ke=L,Be=ie,Pe=0;Pe<v;Pe++){var Te=b[Se+Pe],Ie=w[Se+Pe],Vt=b[Se+Pe+v],je=w[Se+Pe+v],se=ke*Vt-Be*je;je=ke*je+Be*Vt,b[Se+Pe]=Te+(Vt=se),w[Se+Pe]=Ie+je,b[Se+Pe+v]=Te-Vt,w[Se+Pe+v]=Ie-je,Pe!==$&&(se=L*ke-ie*Be,Be=L*Be+ie*ke,ke=se)}},ae.prototype.guessLen13b=function(u,h){var b=1|Math.max(h,u),w=1&b,g=0;for(b=b/2|0;b;b>>>=1)g++;return 1<<g+1+w},ae.prototype.conjugate=function(u,h,b){if(!(b<=1))for(var w=0;w<b/2;w++){var g=u[w];u[w]=u[b-w-1],u[b-w-1]=g,g=h[w],h[w]=-h[b-w-1],h[b-w-1]=-g}},ae.prototype.normalize13b=function(u,h){for(var b=0,w=0;w<h/2;w++){var g=8192*Math.round(u[2*w+1]/h)+Math.round(u[2*w]/h)+b;u[w]=67108863&g,b=g<67108864?0:g/67108864|0}return u},ae.prototype.convert13b=function(u,h,b,w){for(var g=0,s=0;s<h;s++)b[2*s]=8191&(g+=0|u[s]),b[2*s+1]=8191&(g>>>=13),g>>>=13;for(s=2*h;s<w;++s)b[s]=0;I(0===g),I(0==(-8192&g))},ae.prototype.stub=function(u){for(var h=new Array(u),b=0;b<u;b++)h[b]=0;return h},ae.prototype.mulp=function(u,h,b){var w=2*this.guessLen13b(u.length,h.length),g=this.makeRBT(w),s=this.stub(w),v=new Array(w),$=new Array(w),L=new Array(w),ie=new Array(w),Se=new Array(w),ke=new Array(w),Be=b.words;Be.length=w,this.convert13b(u.words,u.length,v,w),this.convert13b(h.words,h.length,ie,w),this.transform(v,s,$,L,w,g),this.transform(ie,s,Se,ke,w,g);for(var Pe=0;Pe<w;Pe++){var Te=$[Pe]*Se[Pe]-L[Pe]*ke[Pe];L[Pe]=$[Pe]*ke[Pe]+L[Pe]*Se[Pe],$[Pe]=Te}return this.conjugate($,L,w),this.transform($,L,Be,s,w,g),this.conjugate(Be,s,w),this.normalize13b(Be,w),b.negative=u.negative^h.negative,b.length=u.length+h.length,b._strip()},p.prototype.mul=function(u){var h=new p(null);return h.words=new Array(this.length+u.length),this.mulTo(u,h)},p.prototype.mulf=function(u){var h=new p(null);return h.words=new Array(this.length+u.length),ee(this,u,h)},p.prototype.imul=function(u){return this.clone().mulTo(u,this)},p.prototype.imuln=function(u){var h=u<0;h&&(u=-u),I("number"==typeof u),I(u<67108864);for(var b=0,w=0;w<this.length;w++){var g=(0|this.words[w])*u,s=(67108863&g)+(67108863&b);b>>=26,b+=g/67108864|0,b+=s>>>26,this.words[w]=67108863&s}return 0!==b&&(this.words[w]=b,this.length++),h?this.ineg():this},p.prototype.muln=function(u){return this.clone().imuln(u)},p.prototype.sqr=function(){return this.mul(this)},p.prototype.isqr=function(){return this.imul(this.clone())},p.prototype.pow=function(u){var h=function z(f){for(var u=new Array(f.bitLength()),h=0;h<u.length;h++)u[h]=f.words[h/26|0]>>>h%26&1;return u}(u);if(0===h.length)return new p(1);for(var b=this,w=0;w<h.length&&0===h[w];w++,b=b.sqr());if(++w<h.length)for(var g=b.sqr();w<h.length;w++,g=g.sqr())0!==h[w]&&(b=b.mul(g));return b},p.prototype.iushln=function(u){I("number"==typeof u&&u>=0);var g,h=u%26,b=(u-h)/26,w=67108863>>>26-h<<26-h;if(0!==h){var s=0;for(g=0;g<this.length;g++){var v=this.words[g]&w;this.words[g]=(0|this.words[g])-v<<h|s,s=v>>>26-h}s&&(this.words[g]=s,this.length++)}if(0!==b){for(g=this.length-1;g>=0;g--)this.words[g+b]=this.words[g];for(g=0;g<b;g++)this.words[g]=0;this.length+=b}return this._strip()},p.prototype.ishln=function(u){return I(0===this.negative),this.iushln(u)},p.prototype.iushrn=function(u,h,b){var w;I("number"==typeof u&&u>=0),w=h?(h-h%26)/26:0;var g=u%26,s=Math.min((u-g)/26,this.length),v=67108863^67108863>>>g<<g,$=b;if(w-=s,w=Math.max(0,w),$){for(var L=0;L<s;L++)$.words[L]=this.words[L];$.length=s}if(0!==s)if(this.length>s)for(this.length-=s,L=0;L<this.length;L++)this.words[L]=this.words[L+s];else this.words[0]=0,this.length=1;var ie=0;for(L=this.length-1;L>=0&&(0!==ie||L>=w);L--){var Se=0|this.words[L];this.words[L]=ie<<26-g|Se>>>g,ie=Se&v}return $&&0!==ie&&($.words[$.length++]=ie),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},p.prototype.ishrn=function(u,h,b){return I(0===this.negative),this.iushrn(u,h,b)},p.prototype.shln=function(u){return this.clone().ishln(u)},p.prototype.ushln=function(u){return this.clone().iushln(u)},p.prototype.shrn=function(u){return this.clone().ishrn(u)},p.prototype.ushrn=function(u){return this.clone().iushrn(u)},p.prototype.testn=function(u){I("number"==typeof u&&u>=0);var h=u%26,b=(u-h)/26;return!(this.length<=b||!(this.words[b]&1<<h))},p.prototype.imaskn=function(u){I("number"==typeof u&&u>=0);var h=u%26,b=(u-h)/26;return I(0===this.negative,"imaskn works only with positive numbers"),this.length<=b?this:(0!==h&&b++,this.length=Math.min(b,this.length),0!==h&&(this.words[this.length-1]&=67108863^67108863>>>h<<h),this._strip())},p.prototype.maskn=function(u){return this.clone().imaskn(u)},p.prototype.iaddn=function(u){return I("number"==typeof u),I(u<67108864),u<0?this.isubn(-u):0!==this.negative?1===this.length&&(0|this.words[0])<=u?(this.words[0]=u-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},p.prototype._iaddn=function(u){this.words[0]+=u;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},p.prototype.isubn=function(u){if(I("number"==typeof u),I(u<67108864),u<0)return this.iaddn(-u);if(0!==this.negative)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},p.prototype.addn=function(u){return this.clone().iaddn(u)},p.prototype.subn=function(u){return this.clone().isubn(u)},p.prototype.iabs=function(){return this.negative=0,this},p.prototype.abs=function(){return this.clone().iabs()},p.prototype._ishlnsubmul=function(u,h,b){var g;this._expand(u.length+b);var s,v=0;for(g=0;g<u.length;g++){s=(0|this.words[g+b])+v;var $=(0|u.words[g])*h;v=((s-=67108863&$)>>26)-($/67108864|0),this.words[g+b]=67108863&s}for(;g<this.length-b;g++)v=(s=(0|this.words[g+b])+v)>>26,this.words[g+b]=67108863&s;if(0===v)return this._strip();for(I(-1===v),v=0,g=0;g<this.length;g++)v=(s=-(0|this.words[g])+v)>>26,this.words[g]=67108863&s;return this.negative=1,this._strip()},p.prototype._wordDiv=function(u,h){var b,w=this.clone(),g=u,s=0|g.words[g.length-1];0!=(b=26-this._countBits(s))&&(g=g.ushln(b),w.iushln(b),s=0|g.words[g.length-1]);var L,$=w.length-g.length;if("mod"!==h){(L=new p(null)).length=$+1,L.words=new Array(L.length);for(var ie=0;ie<L.length;ie++)L.words[ie]=0}var Se=w.clone()._ishlnsubmul(g,1,$);0===Se.negative&&(w=Se,L&&(L.words[$]=1));for(var ke=$-1;ke>=0;ke--){var Be=67108864*(0|w.words[g.length+ke])+(0|w.words[g.length+ke-1]);for(Be=Math.min(Be/s|0,67108863),w._ishlnsubmul(g,Be,ke);0!==w.negative;)Be--,w.negative=0,w._ishlnsubmul(g,1,ke),w.isZero()||(w.negative^=1);L&&(L.words[ke]=Be)}return L&&L._strip(),w._strip(),"div"!==h&&0!==b&&w.iushrn(b),{div:L||null,mod:w}},p.prototype.divmod=function(u,h,b){return I(!u.isZero()),this.isZero()?{div:new p(0),mod:new p(0)}:0!==this.negative&&0===u.negative?(s=this.neg().divmod(u,h),"mod"!==h&&(w=s.div.neg()),"div"!==h&&(g=s.mod.neg(),b&&0!==g.negative&&g.iadd(u)),{div:w,mod:g}):0===this.negative&&0!==u.negative?(s=this.divmod(u.neg(),h),"mod"!==h&&(w=s.div.neg()),{div:w,mod:s.mod}):0!=(this.negative&u.negative)?(s=this.neg().divmod(u.neg(),h),"div"!==h&&(g=s.mod.neg(),b&&0!==g.negative&&g.isub(u)),{div:s.div,mod:g}):u.length>this.length||this.cmp(u)<0?{div:new p(0),mod:this}:1===u.length?"div"===h?{div:this.divn(u.words[0]),mod:null}:"mod"===h?{div:null,mod:new p(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new p(this.modrn(u.words[0]))}:this._wordDiv(u,h);var w,g,s},p.prototype.div=function(u){return this.divmod(u,"div",!1).div},p.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},p.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},p.prototype.divRound=function(u){var h=this.divmod(u);if(h.mod.isZero())return h.div;var b=0!==h.div.negative?h.mod.isub(u):h.mod,w=u.ushrn(1),g=u.andln(1),s=b.cmp(w);return s<0||1===g&&0===s?h.div:0!==h.div.negative?h.div.isubn(1):h.div.iaddn(1)},p.prototype.modrn=function(u){var h=u<0;h&&(u=-u),I(u<=67108863);for(var b=(1<<26)%u,w=0,g=this.length-1;g>=0;g--)w=(b*w+(0|this.words[g]))%u;return h?-w:w},p.prototype.modn=function(u){return this.modrn(u)},p.prototype.idivn=function(u){var h=u<0;h&&(u=-u),I(u<=67108863);for(var b=0,w=this.length-1;w>=0;w--){var g=(0|this.words[w])+67108864*b;this.words[w]=g/u|0,b=g%u}return this._strip(),h?this.ineg():this},p.prototype.divn=function(u){return this.clone().idivn(u)},p.prototype.egcd=function(u){I(0===u.negative),I(!u.isZero());var h=this,b=u.clone();h=0!==h.negative?h.umod(u):h.clone();for(var w=new p(1),g=new p(0),s=new p(0),v=new p(1),$=0;h.isEven()&&b.isEven();)h.iushrn(1),b.iushrn(1),++$;for(var L=b.clone(),ie=h.clone();!h.isZero();){for(var Se=0,ke=1;0==(h.words[0]&ke)&&Se<26;++Se,ke<<=1);if(Se>0)for(h.iushrn(Se);Se-- >0;)(w.isOdd()||g.isOdd())&&(w.iadd(L),g.isub(ie)),w.iushrn(1),g.iushrn(1);for(var Be=0,Pe=1;0==(b.words[0]&Pe)&&Be<26;++Be,Pe<<=1);if(Be>0)for(b.iushrn(Be);Be-- >0;)(s.isOdd()||v.isOdd())&&(s.iadd(L),v.isub(ie)),s.iushrn(1),v.iushrn(1);h.cmp(b)>=0?(h.isub(b),w.isub(s),g.isub(v)):(b.isub(h),s.isub(w),v.isub(g))}return{a:s,b:v,gcd:b.iushln($)}},p.prototype._invmp=function(u){I(0===u.negative),I(!u.isZero());var Se,h=this,b=u.clone();h=0!==h.negative?h.umod(u):h.clone();for(var w=new p(1),g=new p(0),s=b.clone();h.cmpn(1)>0&&b.cmpn(1)>0;){for(var v=0,$=1;0==(h.words[0]&$)&&v<26;++v,$<<=1);if(v>0)for(h.iushrn(v);v-- >0;)w.isOdd()&&w.iadd(s),w.iushrn(1);for(var L=0,ie=1;0==(b.words[0]&ie)&&L<26;++L,ie<<=1);if(L>0)for(b.iushrn(L);L-- >0;)g.isOdd()&&g.iadd(s),g.iushrn(1);h.cmp(b)>=0?(h.isub(b),w.isub(g)):(b.isub(h),g.isub(w))}return(Se=0===h.cmpn(1)?w:g).cmpn(0)<0&&Se.iadd(u),Se},p.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var h=this.clone(),b=u.clone();h.negative=0,b.negative=0;for(var w=0;h.isEven()&&b.isEven();w++)h.iushrn(1),b.iushrn(1);for(;;){for(;h.isEven();)h.iushrn(1);for(;b.isEven();)b.iushrn(1);var g=h.cmp(b);if(g<0){var s=h;h=b,b=s}else if(0===g||0===b.cmpn(1))break;h.isub(b)}return b.iushln(w)},p.prototype.invm=function(u){return this.egcd(u).a.umod(u)},p.prototype.isEven=function(){return 0==(1&this.words[0])},p.prototype.isOdd=function(){return 1==(1&this.words[0])},p.prototype.andln=function(u){return this.words[0]&u},p.prototype.bincn=function(u){I("number"==typeof u);var h=u%26,b=(u-h)/26,w=1<<h;if(this.length<=b)return this._expand(b+1),this.words[b]|=w,this;for(var g=w,s=b;0!==g&&s<this.length;s++){var v=0|this.words[s];g=(v+=g)>>>26,this.words[s]=v&=67108863}return 0!==g&&(this.words[s]=g,this.length++),this},p.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},p.prototype.cmpn=function(u){var b,h=u<0;if(0!==this.negative&&!h)return-1;if(0===this.negative&&h)return 1;if(this._strip(),this.length>1)b=1;else{h&&(u=-u),I(u<=67108863,"Number is too big");var w=0|this.words[0];b=w===u?0:w<u?-1:1}return 0!==this.negative?0|-b:b},p.prototype.cmp=function(u){if(0!==this.negative&&0===u.negative)return-1;if(0===this.negative&&0!==u.negative)return 1;var h=this.ucmp(u);return 0!==this.negative?0|-h:h},p.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var h=0,b=this.length-1;b>=0;b--){var w=0|this.words[b],g=0|u.words[b];if(w!==g){w<g?h=-1:w>g&&(h=1);break}}return h},p.prototype.gtn=function(u){return 1===this.cmpn(u)},p.prototype.gt=function(u){return 1===this.cmp(u)},p.prototype.gten=function(u){return this.cmpn(u)>=0},p.prototype.gte=function(u){return this.cmp(u)>=0},p.prototype.ltn=function(u){return-1===this.cmpn(u)},p.prototype.lt=function(u){return-1===this.cmp(u)},p.prototype.lten=function(u){return this.cmpn(u)<=0},p.prototype.lte=function(u){return this.cmp(u)<=0},p.prototype.eqn=function(u){return 0===this.cmpn(u)},p.prototype.eq=function(u){return 0===this.cmp(u)},p.red=function(u){return new o(u)},p.prototype.toRed=function(u){return I(!this.red,"Already a number in reduction context"),I(0===this.negative,"red works only with positives"),u.convertTo(this)._forceRed(u)},p.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},p.prototype._forceRed=function(u){return this.red=u,this},p.prototype.forceRed=function(u){return I(!this.red,"Already a number in reduction context"),this._forceRed(u)},p.prototype.redAdd=function(u){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},p.prototype.redIAdd=function(u){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},p.prototype.redSub=function(u){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},p.prototype.redISub=function(u){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},p.prototype.redShl=function(u){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},p.prototype.redMul=function(u){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},p.prototype.redIMul=function(u){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},p.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},p.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},p.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},p.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},p.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},p.prototype.redPow=function(u){return I(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var ge={k256:null,p224:null,p192:null,p25519:null};function Ce(f,u){this.name=f,this.p=new p(u,16),this.n=this.p.bitLength(),this.k=new p(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function De(){Ce.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function we(){Ce.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Oe(){Ce.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function y(){Ce.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function o(f){if("string"==typeof f){var u=p._prime(f);this.m=u.p,this.prime=u}else I(f.gtn(1),"modulus must be greater than 1"),this.m=f,this.prime=null}function l(f){o.call(this,f),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new p(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Ce.prototype._tmp=function(){var u=new p(null);return u.words=new Array(Math.ceil(this.n/13)),u},Ce.prototype.ireduce=function(u){var b,h=u;do{this.split(h,this.tmp),b=(h=(h=this.imulK(h)).iadd(this.tmp)).bitLength()}while(b>this.n);var w=b<this.n?-1:h.ucmp(this.p);return 0===w?(h.words[0]=0,h.length=1):w>0?h.isub(this.p):void 0!==h.strip?h.strip():h._strip(),h},Ce.prototype.split=function(u,h){u.iushrn(this.n,0,h)},Ce.prototype.imulK=function(u){return u.imul(this.k)},G(De,Ce),De.prototype.split=function(u,h){for(var b=4194303,w=Math.min(u.length,9),g=0;g<w;g++)h.words[g]=u.words[g];if(h.length=w,u.length<=9)return u.words[0]=0,void(u.length=1);var s=u.words[9];for(h.words[h.length++]=s&b,g=10;g<u.length;g++){var v=0|u.words[g];u.words[g-10]=(v&b)<<4|s>>>22,s=v}u.words[g-10]=s>>>=22,u.length-=0===s&&u.length>10?10:9},De.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var h=0,b=0;b<u.length;b++){var w=0|u.words[b];u.words[b]=67108863&(h+=977*w),h=64*w+(h/67108864|0)}return 0===u.words[u.length-1]&&(u.length--,0===u.words[u.length-1]&&u.length--),u},G(we,Ce),G(Oe,Ce),G(y,Ce),y.prototype.imulK=function(u){for(var h=0,b=0;b<u.length;b++){var w=19*(0|u.words[b])+h,g=67108863&w;w>>>=26,u.words[b]=g,h=w}return 0!==h&&(u.words[u.length++]=h),u},p._prime=function(u){if(ge[u])return ge[u];var h;if("k256"===u)h=new De;else if("p224"===u)h=new we;else if("p192"===u)h=new Oe;else{if("p25519"!==u)throw new Error("Unknown prime "+u);h=new y}return ge[u]=h,h},o.prototype._verify1=function(u){I(0===u.negative,"red works only with positives"),I(u.red,"red works only with red numbers")},o.prototype._verify2=function(u,h){I(0==(u.negative|h.negative),"red works only with positives"),I(u.red&&u.red===h.red,"red works only with red numbers")},o.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(x(u,u.umod(this.m)._forceRed(this)),u)},o.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},o.prototype.add=function(u,h){this._verify2(u,h);var b=u.add(h);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},o.prototype.iadd=function(u,h){this._verify2(u,h);var b=u.iadd(h);return b.cmp(this.m)>=0&&b.isub(this.m),b},o.prototype.sub=function(u,h){this._verify2(u,h);var b=u.sub(h);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},o.prototype.isub=function(u,h){this._verify2(u,h);var b=u.isub(h);return b.cmpn(0)<0&&b.iadd(this.m),b},o.prototype.shl=function(u,h){return this._verify1(u),this.imod(u.ushln(h))},o.prototype.imul=function(u,h){return this._verify2(u,h),this.imod(u.imul(h))},o.prototype.mul=function(u,h){return this._verify2(u,h),this.imod(u.mul(h))},o.prototype.isqr=function(u){return this.imul(u,u.clone())},o.prototype.sqr=function(u){return this.mul(u,u)},o.prototype.sqrt=function(u){if(u.isZero())return u.clone();var h=this.m.andln(3);if(I(h%2==1),3===h){var b=this.m.add(new p(1)).iushrn(2);return this.pow(u,b)}for(var w=this.m.subn(1),g=0;!w.isZero()&&0===w.andln(1);)g++,w.iushrn(1);I(!w.isZero());var s=new p(1).toRed(this),v=s.redNeg(),$=this.m.subn(1).iushrn(1),L=this.m.bitLength();for(L=new p(2*L*L).toRed(this);0!==this.pow(L,$).cmp(v);)L.redIAdd(v);for(var ie=this.pow(L,w),Se=this.pow(u,w.addn(1).iushrn(1)),ke=this.pow(u,w),Be=g;0!==ke.cmp(s);){for(var Pe=ke,Te=0;0!==Pe.cmp(s);Te++)Pe=Pe.redSqr();I(Te<Be);var Ie=this.pow(ie,new p(1).iushln(Be-Te-1));Se=Se.redMul(Ie),ie=Ie.redSqr(),ke=ke.redMul(ie),Be=Te}return Se},o.prototype.invm=function(u){var h=u._invmp(this.m);return 0!==h.negative?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},o.prototype.pow=function(u,h){if(h.isZero())return new p(1).toRed(this);if(0===h.cmpn(1))return u.clone();var w=new Array(16);w[0]=new p(1).toRed(this),w[1]=u;for(var g=2;g<w.length;g++)w[g]=this.mul(w[g-1],u);var s=w[0],v=0,$=0,L=h.bitLength()%26;for(0===L&&(L=26),g=h.length-1;g>=0;g--){for(var ie=h.words[g],Se=L-1;Se>=0;Se--){var ke=ie>>Se&1;s!==w[0]&&(s=this.sqr(s)),0!==ke||0!==v?(v<<=1,v|=ke,(4==++$||0===g&&0===Se)&&(s=this.mul(s,w[v]),$=0,v=0)):$=0}L=26}return s},o.prototype.convertTo=function(u){var h=u.umod(this.m);return h===u?h.clone():h},o.prototype.convertFrom=function(u){var h=u.clone();return h.red=null,h},p.mont=function(u){return new l(u)},G(l,o),l.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},l.prototype.convertFrom=function(u){var h=this.imod(u.mul(this.rinv));return h.red=null,h},l.prototype.imul=function(u,h){if(u.isZero()||h.isZero())return u.words[0]=0,u.length=1,u;var b=u.imul(h),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=b.isub(w).iushrn(this.shift),s=g;return g.cmp(this.m)>=0?s=g.isub(this.m):g.cmpn(0)<0&&(s=g.iadd(this.m)),s._forceRed(this)},l.prototype.mul=function(u,h){if(u.isZero()||h.isZero())return new p(0)._forceRed(this);var b=u.mul(h),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=b.isub(w).iushrn(this.shift),s=g;return g.cmp(this.m)>=0?s=g.isub(this.m):g.cmpn(0)<0&&(s=g.iadd(this.m)),s._forceRed(this)},l.prototype.invm=function(u){return this.imod(u._invmp(this.m).mul(this.r2))._forceRed(this)}}(ye=H.nmd(ye),this)},7950:(ye,ue,H)=>{var j;function W(G){this.rand=G}if(ye.exports=function(p){return j||(j=new W(null)),j.generate(p)},ye.exports.Rand=W,W.prototype.generate=function(p){return this._rand(p)},W.prototype._rand=function(p){if(this.rand.getBytes)return this.rand.getBytes(p);for(var k=new Uint8Array(p),P=0;P<k.length;P++)k[P]=this.rand.getByte();return k},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?W.prototype._rand=function(p){var k=new Uint8Array(p);return self.crypto.getRandomValues(k),k}:self.msCrypto&&self.msCrypto.getRandomValues?W.prototype._rand=function(p){var k=new Uint8Array(p);return self.msCrypto.getRandomValues(k),k}:"object"==typeof window&&(W.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var I=H(1348);if("function"!=typeof I.randomBytes)throw new Error("Not supported");W.prototype._rand=function(p){return I.randomBytes(p)}}catch(G){}},1899:(ye,ue,H)=>{var j=H(3502).Buffer;function W(E){j.isBuffer(E)||(E=j.from(E));for(var R=E.length/4|0,x=new Array(R),S=0;S<R;S++)x[S]=E.readUInt32BE(4*S);return x}function I(E){for(;0<E.length;E++)E[0]=0}function G(E,R,x,S,O){for(var ae,ge,Ce,De,C=x[0],B=x[1],N=x[2],z=x[3],X=E[0]^R[0],U=E[1]^R[1],Z=E[2]^R[2],ee=E[3]^R[3],we=4,Oe=1;Oe<O;Oe++)ae=C[X>>>24]^B[U>>>16&255]^N[Z>>>8&255]^z[255&ee]^R[we++],ge=C[U>>>24]^B[Z>>>16&255]^N[ee>>>8&255]^z[255&X]^R[we++],Ce=C[Z>>>24]^B[ee>>>16&255]^N[X>>>8&255]^z[255&U]^R[we++],De=C[ee>>>24]^B[X>>>16&255]^N[U>>>8&255]^z[255&Z]^R[we++],X=ae,U=ge,Z=Ce,ee=De;return ae=(S[X>>>24]<<24|S[U>>>16&255]<<16|S[Z>>>8&255]<<8|S[255&ee])^R[we++],ge=(S[U>>>24]<<24|S[Z>>>16&255]<<16|S[ee>>>8&255]<<8|S[255&X])^R[we++],Ce=(S[Z>>>24]<<24|S[ee>>>16&255]<<16|S[X>>>8&255]<<8|S[255&U])^R[we++],De=(S[ee>>>24]<<24|S[X>>>16&255]<<16|S[U>>>8&255]<<8|S[255&Z])^R[we++],[ae>>>=0,ge>>>=0,Ce>>>=0,De>>>=0]}var p=[0,1,2,4,8,16,32,64,128,27,54],k=function(){for(var E=new Array(256),R=0;R<256;R++)E[R]=R<128?R<<1:R<<1^283;for(var x=[],S=[],O=[[],[],[],[]],C=[[],[],[],[]],B=0,N=0,z=0;z<256;++z){var X=N^N<<1^N<<2^N<<3^N<<4;x[B]=X=X>>>8^255&X^99,S[X]=B;var U=E[B],Z=E[U],ee=E[Z],ae=257*E[X]^16843008*X;O[0][B]=ae<<24|ae>>>8,O[1][B]=ae<<16|ae>>>16,O[2][B]=ae<<8|ae>>>24,O[3][B]=ae,C[0][X]=(ae=16843009*ee^65537*Z^257*U^16843008*B)<<24|ae>>>8,C[1][X]=ae<<16|ae>>>16,C[2][X]=ae<<8|ae>>>24,C[3][X]=ae,0===B?B=N=1:(B=U^E[E[E[ee^U]]],N^=E[E[N]])}return{SBOX:x,INV_SBOX:S,SUB_MIX:O,INV_SUB_MIX:C}}();function P(E){this._key=W(E),this._reset()}P.blockSize=16,P.keySize=32,P.prototype.blockSize=P.blockSize,P.prototype.keySize=P.keySize,P.prototype._reset=function(){for(var E=this._key,R=E.length,x=R+6,S=4*(x+1),O=[],C=0;C<R;C++)O[C]=E[C];for(C=R;C<S;C++){var B=O[C-1];C%R==0?(B=k.SBOX[(B=B<<8|B>>>24)>>>24]<<24|k.SBOX[B>>>16&255]<<16|k.SBOX[B>>>8&255]<<8|k.SBOX[255&B],B^=p[C/R|0]<<24):R>6&&C%R==4&&(B=k.SBOX[B>>>24]<<24|k.SBOX[B>>>16&255]<<16|k.SBOX[B>>>8&255]<<8|k.SBOX[255&B]),O[C]=O[C-R]^B}for(var N=[],z=0;z<S;z++){var X=S-z,U=O[X-(z%4?0:4)];N[z]=z<4||X<=4?U:k.INV_SUB_MIX[0][k.SBOX[U>>>24]]^k.INV_SUB_MIX[1][k.SBOX[U>>>16&255]]^k.INV_SUB_MIX[2][k.SBOX[U>>>8&255]]^k.INV_SUB_MIX[3][k.SBOX[255&U]]}this._nRounds=x,this._keySchedule=O,this._invKeySchedule=N},P.prototype.encryptBlockRaw=function(E){return G(E=W(E),this._keySchedule,k.SUB_MIX,k.SBOX,this._nRounds)},P.prototype.encryptBlock=function(E){var R=this.encryptBlockRaw(E),x=j.allocUnsafe(16);return x.writeUInt32BE(R[0],0),x.writeUInt32BE(R[1],4),x.writeUInt32BE(R[2],8),x.writeUInt32BE(R[3],12),x},P.prototype.decryptBlock=function(E){var R=(E=W(E))[1];E[1]=E[3],E[3]=R;var x=G(E,this._invKeySchedule,k.INV_SUB_MIX,k.INV_SBOX,this._nRounds),S=j.allocUnsafe(16);return S.writeUInt32BE(x[0],0),S.writeUInt32BE(x[3],4),S.writeUInt32BE(x[2],8),S.writeUInt32BE(x[1],12),S},P.prototype.scrub=function(){I(this._keySchedule),I(this._invKeySchedule),I(this._key)},ye.exports.AES=P},9382:(ye,ue,H)=>{var j=H(1899),W=H(3502).Buffer,I=H(1052),G=H(3894),p=H(8857),k=H(8789),P=H(7968);function x(S,O,C,B){I.call(this);var N=W.alloc(4,0);this._cipher=new j.AES(O);var z=this._cipher.encryptBlock(N);this._ghash=new p(z),C=function R(S,O,C){if(12===O.length)return S._finID=W.concat([O,W.from([0,0,0,1])]),W.concat([O,W.from([0,0,0,2])]);var B=new p(C),N=O.length,z=N%16;B.update(O),z&&B.update(W.alloc(z=16-z,0)),B.update(W.alloc(8,0));var X=8*N,U=W.alloc(8);U.writeUIntBE(X,0,8),B.update(U),S._finID=B.state;var Z=W.from(S._finID);return P(Z),Z}(this,C,z),this._prev=W.from(C),this._cache=W.allocUnsafe(0),this._secCache=W.allocUnsafe(0),this._decrypt=B,this._alen=0,this._len=0,this._mode=S,this._authTag=null,this._called=!1}G(x,I),x.prototype._update=function(S){if(!this._called&&this._alen){var O=16-this._alen%16;O<16&&(O=W.alloc(O,0),this._ghash.update(O))}this._called=!0;var C=this._mode.encrypt(this,S);return this._ghash.update(this._decrypt?S:C),this._len+=S.length,C},x.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var S=k(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function E(S,O){var C=0;S.length!==O.length&&C++;for(var B=Math.min(S.length,O.length),N=0;N<B;++N)C+=S[N]^O[N];return C}(S,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=S,this._cipher.scrub()},x.prototype.getAuthTag=function(){if(this._decrypt||!W.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},x.prototype.setAuthTag=function(O){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=O},x.prototype.setAAD=function(O){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(O),this._alen+=O.length},ye.exports=x},4330:(ye,ue,H)=>{var j=H(6900),W=H(856),I=H(4946);ue.createCipher=ue.Cipher=j.createCipher,ue.createCipheriv=ue.Cipheriv=j.createCipheriv,ue.createDecipher=ue.Decipher=W.createDecipher,ue.createDecipheriv=ue.Decipheriv=W.createDecipheriv,ue.listCiphers=ue.getCiphers=function G(){return Object.keys(I)}},856:(ye,ue,H)=>{var j=H(9382),W=H(3502).Buffer,I=H(9171),G=H(8441),p=H(1052),k=H(1899),P=H(347);function R(B,N,z){p.call(this),this._cache=new x,this._last=void 0,this._cipher=new k.AES(N),this._prev=W.from(z),this._mode=B,this._autopadding=!0}function x(){this.cache=W.allocUnsafe(0)}function O(B,N,z){var X=I[B.toLowerCase()];if(!X)throw new TypeError("invalid suite type");if("string"==typeof z&&(z=W.from(z)),"GCM"!==X.mode&&z.length!==X.iv)throw new TypeError("invalid iv length "+z.length);if("string"==typeof N&&(N=W.from(N)),N.length!==X.key/8)throw new TypeError("invalid key length "+N.length);return"stream"===X.type?new G(X.module,N,z,!0):"auth"===X.type?new j(X.module,N,z,!0):new R(X.module,N,z)}H(3894)(R,p),R.prototype._update=function(B){this._cache.add(B);for(var N,z,X=[];N=this._cache.get(this._autopadding);)z=this._mode.decrypt(this,N),X.push(z);return W.concat(X)},R.prototype._final=function(){var B=this._cache.flush();if(this._autopadding)return function S(B){var N=B[15];if(N<1||N>16)throw new Error("unable to decrypt data");for(var z=-1;++z<N;)if(B[z+(16-N)]!==N)throw new Error("unable to decrypt data");if(16!==N)return B.slice(0,16-N)}(this._mode.decrypt(this,B));if(B)throw new Error("data not multiple of block length")},R.prototype.setAutoPadding=function(B){return this._autopadding=!!B,this},x.prototype.add=function(B){this.cache=W.concat([this.cache,B])},x.prototype.get=function(B){var N;if(B){if(this.cache.length>16)return N=this.cache.slice(0,16),this.cache=this.cache.slice(16),N}else if(this.cache.length>=16)return N=this.cache.slice(0,16),this.cache=this.cache.slice(16),N;return null},x.prototype.flush=function(){if(this.cache.length)return this.cache},ue.createDecipher=function C(B,N){var z=I[B.toLowerCase()];if(!z)throw new TypeError("invalid suite type");var X=P(N,!1,z.key,z.iv);return O(B,X.key,X.iv)},ue.createDecipheriv=O},6900:(ye,ue,H)=>{var j=H(9171),W=H(9382),I=H(3502).Buffer,G=H(8441),p=H(1052),k=H(1899),P=H(347);function R(B,N,z){p.call(this),this._cache=new S,this._cipher=new k.AES(N),this._prev=I.from(z),this._mode=B,this._autopadding=!0}H(3894)(R,p),R.prototype._update=function(B){this._cache.add(B);for(var N,z,X=[];N=this._cache.get();)z=this._mode.encrypt(this,N),X.push(z);return I.concat(X)};var x=I.alloc(16,16);function S(){this.cache=I.allocUnsafe(0)}function O(B,N,z){var X=j[B.toLowerCase()];if(!X)throw new TypeError("invalid suite type");if("string"==typeof N&&(N=I.from(N)),N.length!==X.key/8)throw new TypeError("invalid key length "+N.length);if("string"==typeof z&&(z=I.from(z)),"GCM"!==X.mode&&z.length!==X.iv)throw new TypeError("invalid iv length "+z.length);return"stream"===X.type?new G(X.module,N,z):"auth"===X.type?new W(X.module,N,z):new R(X.module,N,z)}R.prototype._final=function(){var B=this._cache.flush();if(this._autopadding)return B=this._mode.encrypt(this,B),this._cipher.scrub(),B;if(!B.equals(x))throw this._cipher.scrub(),new Error("data not multiple of block length")},R.prototype.setAutoPadding=function(B){return this._autopadding=!!B,this},S.prototype.add=function(B){this.cache=I.concat([this.cache,B])},S.prototype.get=function(){if(this.cache.length>15){var B=this.cache.slice(0,16);return this.cache=this.cache.slice(16),B}return null},S.prototype.flush=function(){for(var B=16-this.cache.length,N=I.allocUnsafe(B),z=-1;++z<B;)N.writeUInt8(B,z);return I.concat([this.cache,N])},ue.createCipheriv=O,ue.createCipher=function C(B,N){var z=j[B.toLowerCase()];if(!z)throw new TypeError("invalid suite type");var X=P(N,!1,z.key,z.iv);return O(B,X.key,X.iv)}},8857:(ye,ue,H)=>{var j=H(3502).Buffer,W=j.alloc(16,0);function G(k){var P=j.allocUnsafe(16);return P.writeUInt32BE(k[0]>>>0,0),P.writeUInt32BE(k[1]>>>0,4),P.writeUInt32BE(k[2]>>>0,8),P.writeUInt32BE(k[3]>>>0,12),P}function p(k){this.h=k,this.state=j.alloc(16,0),this.cache=j.allocUnsafe(0)}p.prototype.ghash=function(k){for(var P=-1;++P<k.length;)this.state[P]^=k[P];this._multiply()},p.prototype._multiply=function(){for(var E,x,k=function I(k){return[k.readUInt32BE(0),k.readUInt32BE(4),k.readUInt32BE(8),k.readUInt32BE(12)]}(this.h),P=[0,0,0,0],S=-1;++S<128;){for(0!=(this.state[~~(S/8)]&1<<7-S%8)&&(P[0]^=k[0],P[1]^=k[1],P[2]^=k[2],P[3]^=k[3]),x=0!=(1&k[3]),E=3;E>0;E--)k[E]=k[E]>>>1|(1&k[E-1])<<31;k[0]=k[0]>>>1,x&&(k[0]=k[0]^225<<24)}this.state=G(P)},p.prototype.update=function(k){this.cache=j.concat([this.cache,k]);for(var P;this.cache.length>=16;)P=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(P)},p.prototype.final=function(k,P){return this.cache.length&&this.ghash(j.concat([this.cache,W],16)),this.ghash(G([0,k,0,P])),this.state},ye.exports=p},7968:ye=>{ye.exports=function ue(H){for(var W,j=H.length;j--;){if(255!==(W=H.readUInt8(j))){W++,H.writeUInt8(W,j);break}H.writeUInt8(0,j)}}},4903:(ye,ue,H)=>{var j=H(8789);ue.encrypt=function(W,I){var G=j(I,W._prev);return W._prev=W._cipher.encryptBlock(G),W._prev},ue.decrypt=function(W,I){var G=W._prev;W._prev=I;var p=W._cipher.decryptBlock(I);return j(p,G)}},9885:(ye,ue,H)=>{var j=H(3502).Buffer,W=H(8789);function I(G,p,k){var P=p.length,E=W(p,G._cache);return G._cache=G._cache.slice(P),G._prev=j.concat([G._prev,k?p:E]),E}ue.encrypt=function(G,p,k){for(var E,P=j.allocUnsafe(0);p.length;){if(0===G._cache.length&&(G._cache=G._cipher.encryptBlock(G._prev),G._prev=j.allocUnsafe(0)),!(G._cache.length<=p.length)){P=j.concat([P,I(G,p,k)]);break}P=j.concat([P,I(G,p.slice(0,E=G._cache.length),k)]),p=p.slice(E)}return P}},6531:(ye,ue,H)=>{var j=H(3502).Buffer;function W(G,p,k){for(var S,O,E=-1,x=0;++E<8;)x+=(128&(O=G._cipher.encryptBlock(G._prev)[0]^(S=p&1<<7-E?128:0)))>>E%8,G._prev=I(G._prev,k?S:O);return x}function I(G,p){var k=G.length,P=-1,E=j.allocUnsafe(G.length);for(G=j.concat([G,j.from([p])]);++P<k;)E[P]=G[P]<<1|G[P+1]>>7;return E}ue.encrypt=function(G,p,k){for(var P=p.length,E=j.allocUnsafe(P),R=-1;++R<P;)E[R]=W(G,p[R],k);return E}},1641:(ye,ue,H)=>{var j=H(3502).Buffer;function W(I,G,p){var P=I._cipher.encryptBlock(I._prev)[0]^G;return I._prev=j.concat([I._prev.slice(1),j.from([p?G:P])]),P}ue.encrypt=function(I,G,p){for(var k=G.length,P=j.allocUnsafe(k),E=-1;++E<k;)P[E]=W(I,G[E],p);return P}},1150:(ye,ue,H)=>{var j=H(8789),W=H(3502).Buffer,I=H(7968);function G(k){var P=k._cipher.encryptBlockRaw(k._prev);return I(k._prev),P}ue.encrypt=function(k,P){var E=Math.ceil(P.length/16),R=k._cache.length;k._cache=W.concat([k._cache,W.allocUnsafe(16*E)]);for(var x=0;x<E;x++){var S=G(k),O=R+16*x;k._cache.writeUInt32BE(S[0],O+0),k._cache.writeUInt32BE(S[1],O+4),k._cache.writeUInt32BE(S[2],O+8),k._cache.writeUInt32BE(S[3],O+12)}var C=k._cache.slice(0,P.length);return k._cache=k._cache.slice(P.length),j(P,C)}},1704:(ye,ue)=>{ue.encrypt=function(H,j){return H._cipher.encryptBlock(j)},ue.decrypt=function(H,j){return H._cipher.decryptBlock(j)}},9171:(ye,ue,H)=>{var j={ECB:H(1704),CBC:H(4903),CFB:H(9885),CFB8:H(1641),CFB1:H(6531),OFB:H(6816),CTR:H(1150),GCM:H(1150)},W=H(4946);for(var I in W)W[I].module=j[W[I].mode];ye.exports=W},6816:(ye,ue,H)=>{var j=H(8789);function W(I){return I._prev=I._cipher.encryptBlock(I._prev),I._prev}ue.encrypt=function(I,G){for(;I._cache.length<G.length;)I._cache=Buffer.concat([I._cache,W(I)]);var p=I._cache.slice(0,G.length);return I._cache=I._cache.slice(G.length),j(G,p)}},8441:(ye,ue,H)=>{var j=H(1899),W=H(3502).Buffer,I=H(1052);function p(k,P,E,R){I.call(this),this._cipher=new j.AES(P),this._prev=W.from(E),this._cache=W.allocUnsafe(0),this._secCache=W.allocUnsafe(0),this._decrypt=R,this._mode=k}H(3894)(p,I),p.prototype._update=function(k){return this._mode.encrypt(this,k,this._decrypt)},p.prototype._final=function(){this._cipher.scrub()},ye.exports=p},5255:(ye,ue,H)=>{var j=H(9004),W=H(4330),I=H(9171),G=H(1115),p=H(347);function E(S,O,C){if(S=S.toLowerCase(),I[S])return W.createCipheriv(S,O,C);if(G[S])return new j({key:O,iv:C,mode:S});throw new TypeError("invalid suite type")}function R(S,O,C){if(S=S.toLowerCase(),I[S])return W.createDecipheriv(S,O,C);if(G[S])return new j({key:O,iv:C,mode:S,decrypt:!0});throw new TypeError("invalid suite type")}ue.createCipher=ue.Cipher=function k(S,O){var C,B;if(S=S.toLowerCase(),I[S])C=I[S].key,B=I[S].iv;else{if(!G[S])throw new TypeError("invalid suite type");C=8*G[S].key,B=G[S].iv}var N=p(O,!1,C,B);return E(S,N.key,N.iv)},ue.createCipheriv=ue.Cipheriv=E,ue.createDecipher=ue.Decipher=function P(S,O){var C,B;if(S=S.toLowerCase(),I[S])C=I[S].key,B=I[S].iv;else{if(!G[S])throw new TypeError("invalid suite type");C=8*G[S].key,B=G[S].iv}var N=p(O,!1,C,B);return R(S,N.key,N.iv)},ue.createDecipheriv=ue.Decipheriv=R,ue.listCiphers=ue.getCiphers=function x(){return Object.keys(G).concat(W.getCiphers())}},9004:(ye,ue,H)=>{var j=H(1052),W=H(3684),I=H(3894),G=H(3502).Buffer,p={"des-ede3-cbc":W.CBC.instantiate(W.EDE),"des-ede3":W.EDE,"des-ede-cbc":W.CBC.instantiate(W.EDE),"des-ede":W.EDE,"des-cbc":W.CBC.instantiate(W.DES),"des-ecb":W.DES};function k(P){j.call(this);var x,E=P.mode.toLowerCase(),R=p[E];x=P.decrypt?"decrypt":"encrypt";var S=P.key;G.isBuffer(S)||(S=G.from(S)),("des-ede"===E||"des-ede-cbc"===E)&&(S=G.concat([S,S.slice(0,8)]));var O=P.iv;G.isBuffer(O)||(O=G.from(O)),this._des=R.create({key:S,iv:O,type:x})}p.des=p["des-cbc"],p.des3=p["des-ede3-cbc"],ye.exports=k,I(k,j),k.prototype._update=function(P){return G.from(this._des.update(P))},k.prototype._final=function(){return G.from(this._des.final())}},1115:(ye,ue)=>{ue["des-ecb"]={key:8,iv:0},ue["des-cbc"]=ue.des={key:8,iv:8},ue["des-ede3-cbc"]=ue.des3={key:24,iv:8},ue["des-ede3"]={key:24,iv:0},ue["des-ede-cbc"]={key:16,iv:8},ue["des-ede"]={key:16,iv:0}},8466:(ye,ue,H)=>{var j=H(8538),W=H(3753);function G(k){var E,P=k.modulus.byteLength();do{E=new j(W(P))}while(E.cmp(k.modulus)>=0||!E.umod(k.prime1)||!E.umod(k.prime2));return E}function p(k,P){var E=function I(k){var P=G(k);return{blinder:P.toRed(j.mont(k.modulus)).redPow(new j(k.publicExponent)).fromRed(),unblinder:P.invm(k.modulus)}}(P),R=P.modulus.byteLength(),x=new j(k).mul(E.blinder).umod(P.modulus),S=x.toRed(j.mont(P.prime1)),O=x.toRed(j.mont(P.prime2)),C=P.coefficient,B=P.prime1,N=P.prime2,z=S.redPow(P.exponent1).fromRed(),X=O.redPow(P.exponent2).fromRed(),U=z.isub(X).imul(C).umod(B).imul(N);return X.iadd(U).imul(E.unblinder).umod(P.modulus).toArrayLike(Buffer,"be",R)}p.getr=G,ye.exports=p},7793:(ye,ue,H)=>{ye.exports=H(5207)},3923:(ye,ue,H)=>{var j=H(8446).Buffer,W=H(6386),I=H(5685),G=H(3894),p=H(9947),k=H(3946),P=H(5207);function E(O){I.Writable.call(this);var C=P[O];if(!C)throw new Error("Unknown message digest");this._hashType=C.hash,this._hash=W(C.hash),this._tag=C.id,this._signType=C.sign}function R(O){I.Writable.call(this);var C=P[O];if(!C)throw new Error("Unknown message digest");this._hash=W(C.hash),this._tag=C.id,this._signType=C.sign}function x(O){return new E(O)}function S(O){return new R(O)}Object.keys(P).forEach(function(O){P[O].id=j.from(P[O].id,"hex"),P[O.toLowerCase()]=P[O]}),G(E,I.Writable),E.prototype._write=function(C,B,N){this._hash.update(C),N()},E.prototype.update=function(C,B){return"string"==typeof C&&(C=j.from(C,B)),this._hash.update(C),this},E.prototype.sign=function(C,B){this.end();var N=this._hash.digest(),z=p(N,C,this._hashType,this._signType,this._tag);return B?z.toString(B):z},G(R,I.Writable),R.prototype._write=function(C,B,N){this._hash.update(C),N()},R.prototype.update=function(C,B){return"string"==typeof C&&(C=j.from(C,B)),this._hash.update(C),this},R.prototype.verify=function(C,B,N){"string"==typeof B&&(B=j.from(B,N)),this.end();var z=this._hash.digest();return k(B,z,C,this._signType,this._tag)},ye.exports={Sign:x,Verify:S,createSign:x,createVerify:S}},9947:(ye,ue,H)=>{var j=H(8446).Buffer,W=H(4529),I=H(8466),G=H(7715).ec,p=H(8538),k=H(2772),P=H(1308);function O(X,U,Z,ee){if((X=j.from(X.toArray())).length<U.byteLength()){var ae=j.alloc(U.byteLength()-X.length);X=j.concat([ae,X])}var ge=Z.length,Ce=function B(X,U){X=(X=C(X,U)).mod(U);var Z=j.from(X.toArray());if(Z.length<U.byteLength()){var ee=j.alloc(U.byteLength()-Z.length);Z=j.concat([ee,Z])}return Z}(Z,U),De=j.alloc(ge);De.fill(1);var we=j.alloc(ge);return we=W(ee,we).update(De).update(j.from([0])).update(X).update(Ce).digest(),De=W(ee,we).update(De).digest(),{k:we=W(ee,we).update(De).update(j.from([1])).update(X).update(Ce).digest(),v:De=W(ee,we).update(De).digest()}}function C(X,U){var Z=new p(X),ee=(X.length<<3)-U.bitLength();return ee>0&&Z.ishrn(ee),Z}function N(X,U,Z){var ee,ae;do{for(ee=j.alloc(0);8*ee.length<X.bitLength();)U.v=W(Z,U.k).update(U.v).digest(),ee=j.concat([ee,U.v]);ae=C(ee,X),U.k=W(Z,U.k).update(U.v).update(j.from([0])).digest(),U.v=W(Z,U.k).update(U.v).digest()}while(-1!==ae.cmp(X));return ae}function z(X,U,Z,ee){return X.toRed(p.mont(Z)).redPow(U).fromRed().mod(ee)}ye.exports=function E(X,U,Z,ee,ae){var ge=k(U);if(ge.curve){if("ecdsa"!==ee&&"ecdsa/rsa"!==ee)throw new Error("wrong private key type");return function R(X,U){var Z=P[U.curve.join(".")];if(!Z)throw new Error("unknown curve "+U.curve.join("."));var ge=new G(Z).keyFromPrivate(U.privateKey).sign(X);return j.from(ge.toDER())}(X,ge)}if("dsa"===ge.type){if("dsa"!==ee)throw new Error("wrong private key type");return function x(X,U,Z){for(var we,ee=U.params.priv_key,ae=U.params.p,ge=U.params.q,Ce=U.params.g,De=new p(0),Oe=C(X,ge).mod(ge),y=!1,o=O(ee,ge,X,Z);!1===y;)De=z(Ce,we=N(ge,o,Z),ae,ge),0===(y=we.invm(ge).imul(Oe.add(ee.mul(De))).mod(ge)).cmpn(0)&&(y=!1,De=new p(0));return function S(X,U){X=X.toArray(),U=U.toArray(),128&X[0]&&(X=[0].concat(X)),128&U[0]&&(U=[0].concat(U));var ee=[48,X.length+U.length+4,2,X.length];return ee=ee.concat(X,[2,U.length],U),j.from(ee)}(De,y)}(X,ge,Z)}if("rsa"!==ee&&"ecdsa/rsa"!==ee)throw new Error("wrong private key type");X=j.concat([ae,X]);for(var Ce=ge.modulus.byteLength(),De=[0,1];X.length+De.length+1<Ce;)De.push(255);De.push(0);for(var we=-1;++we<X.length;)De.push(X[we]);return I(De,ge)},ye.exports.getKey=O,ye.exports.makeKey=N},3946:(ye,ue,H)=>{var j=H(8446).Buffer,W=H(8538),I=H(7715).ec,G=H(2772),p=H(1308);function R(x,S){if(x.cmpn(0)<=0)throw new Error("invalid sig");if(x.cmp(S)>=S)throw new Error("invalid sig")}ye.exports=function k(x,S,O,C,B){var N=G(O);if("ec"===N.type){if("ecdsa"!==C&&"ecdsa/rsa"!==C)throw new Error("wrong public key type");return function P(x,S,O){var C=p[O.data.algorithm.curve.join(".")];if(!C)throw new Error("unknown curve "+O.data.algorithm.curve.join("."));return new I(C).verify(S,x,O.data.subjectPrivateKey.data)}(x,S,N)}if("dsa"===N.type){if("dsa"!==C)throw new Error("wrong public key type");return function E(x,S,O){var C=O.data.p,B=O.data.q,N=O.data.g,z=O.data.pub_key,X=G.signature.decode(x,"der"),U=X.s,Z=X.r;R(U,B),R(Z,B);var ee=W.mont(C),ae=U.invm(B);return 0===N.toRed(ee).redPow(new W(S).mul(ae).mod(B)).fromRed().mul(z.toRed(ee).redPow(Z.mul(ae).mod(B)).fromRed()).mod(C).mod(B).cmp(Z)}(x,S,N)}if("rsa"!==C&&"ecdsa/rsa"!==C)throw new Error("wrong public key type");S=j.concat([B,S]);for(var z=N.modulus.byteLength(),X=[1],U=0;S.length+X.length+2<z;)X.push(255),U++;X.push(0);for(var Z=-1;++Z<S.length;)X.push(S[Z]);X=j.from(X);var ee=W.mont(N.modulus);x=(x=new W(x).toRed(ee)).redPow(new W(N.publicExponent)),x=j.from(x.fromRed().toArray());var ae=U<8?1:0;for(z=Math.min(x.length,X.length),x.length!==X.length&&(ae=1),Z=-1;++Z<z;)ae|=x[Z]^X[Z];return 0===ae}},8446:(ye,ue,H)=>{var j=H(3172),W=j.Buffer;function I(p,k){for(var P in p)k[P]=p[P]}function G(p,k,P){return W(p,k,P)}W.from&&W.alloc&&W.allocUnsafe&&W.allocUnsafeSlow?ye.exports=j:(I(j,ue),ue.Buffer=G),G.prototype=Object.create(W.prototype),I(W,G),G.from=function(p,k,P){if("number"==typeof p)throw new TypeError("Argument must not be a number");return W(p,k,P)},G.alloc=function(p,k,P){if("number"!=typeof p)throw new TypeError("Argument must be a number");var E=W(p);return void 0!==k?"string"==typeof P?E.fill(k,P):E.fill(k):E.fill(0),E},G.allocUnsafe=function(p){if("number"!=typeof p)throw new TypeError("Argument must be a number");return W(p)},G.allocUnsafeSlow=function(p){if("number"!=typeof p)throw new TypeError("Argument must be a number");return j.SlowBuffer(p)}},8789:ye=>{ye.exports=function(H,j){for(var W=Math.min(H.length,j.length),I=new Buffer(W),G=0;G<W;++G)I[G]=H[G]^j[G];return I}},3172:(ye,ue,H)=>{"use strict";const j=H(5343),W=H(8461),I="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ue.Buffer=P,ue.SlowBuffer=function U(le){return+le!=le&&(le=0),P.alloc(+le)},ue.INSPECT_MAX_BYTES=50;const G=2147483647;function k(le){if(le>G)throw new RangeError('The value "'+le+'" is invalid for option "size"');const J=new Uint8Array(le);return Object.setPrototypeOf(J,P.prototype),J}function P(le,J,re){if("number"==typeof le){if("string"==typeof J)throw new TypeError('The "string" argument must be of type string. Received type number');return S(le)}return E(le,J,re)}function E(le,J,re){if("string"==typeof le)return function O(le,J){if(("string"!=typeof J||""===J)&&(J="utf8"),!P.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const re=0|Z(le,J);let ve=k(re);const xe=ve.write(le,J);return xe!==re&&(ve=ve.slice(0,xe)),ve}(le,J);if(ArrayBuffer.isView(le))return function B(le){if(Ke(le,Uint8Array)){const J=new Uint8Array(le);return N(J.buffer,J.byteOffset,J.byteLength)}return C(le)}(le);if(null==le)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(Ke(le,ArrayBuffer)||le&&Ke(le.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(Ke(le,SharedArrayBuffer)||le&&Ke(le.buffer,SharedArrayBuffer)))return N(le,J,re);if("number"==typeof le)throw new TypeError('The "value" argument must not be of type number. Received type number');const ve=le.valueOf&&le.valueOf();if(null!=ve&&ve!==le)return P.from(ve,J,re);const xe=function z(le){if(P.isBuffer(le)){const J=0|X(le.length),re=k(J);return 0===re.length||le.copy(re,0,0,J),re}return void 0!==le.length?"number"!=typeof le.length||qi(le.length)?k(0):C(le):"Buffer"===le.type&&Array.isArray(le.data)?C(le.data):void 0}(le);if(xe)return xe;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof le[Symbol.toPrimitive])return P.from(le[Symbol.toPrimitive]("string"),J,re);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}function R(le){if("number"!=typeof le)throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function S(le){return R(le),k(le<0?0:0|X(le))}function C(le){const J=le.length<0?0:0|X(le.length),re=k(J);for(let ve=0;ve<J;ve+=1)re[ve]=255&le[ve];return re}function N(le,J,re){if(J<0||le.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<J+(re||0))throw new RangeError('"length" is outside of buffer bounds');let ve;return ve=void 0===J&&void 0===re?new Uint8Array(le):void 0===re?new Uint8Array(le,J):new Uint8Array(le,J,re),Object.setPrototypeOf(ve,P.prototype),ve}function X(le){if(le>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return 0|le}function Z(le,J){if(P.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||Ke(le,ArrayBuffer))return le.byteLength;if("string"!=typeof le)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const re=le.length,ve=arguments.length>2&&!0===arguments[2];if(!ve&&0===re)return 0;let xe=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return re;case"utf8":case"utf-8":return ui(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*re;case"hex":return re>>>1;case"base64":return xi(le).length;default:if(xe)return ve?-1:ui(le).length;J=(""+J).toLowerCase(),xe=!0}}function ee(le,J,re){let ve=!1;if((void 0===J||J<0)&&(J=0),J>this.length||((void 0===re||re>this.length)&&(re=this.length),re<=0)||(re>>>=0)<=(J>>>=0))return"";for(le||(le="utf8");;)switch(le){case"hex":return g(this,J,re);case"utf8":case"utf-8":return f(this,J,re);case"ascii":return b(this,J,re);case"latin1":case"binary":return w(this,J,re);case"base64":return l(this,J,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s(this,J,re);default:if(ve)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),ve=!0}}function ae(le,J,re){const ve=le[J];le[J]=le[re],le[re]=ve}function ge(le,J,re,ve,xe){if(0===le.length)return-1;if("string"==typeof re?(ve=re,re=0):re>2147483647?re=2147483647:re<-2147483648&&(re=-2147483648),qi(re=+re)&&(re=xe?0:le.length-1),re<0&&(re=le.length+re),re>=le.length){if(xe)return-1;re=le.length-1}else if(re<0){if(!xe)return-1;re=0}if("string"==typeof J&&(J=P.from(J,ve)),P.isBuffer(J))return 0===J.length?-1:Ce(le,J,re,ve,xe);if("number"==typeof J)return J&=255,"function"==typeof Uint8Array.prototype.indexOf?xe?Uint8Array.prototype.indexOf.call(le,J,re):Uint8Array.prototype.lastIndexOf.call(le,J,re):Ce(le,[J],re,ve,xe);throw new TypeError("val must be string, number or Buffer")}function Ce(le,J,re,ve,xe){let it,ot=1,Ne=le.length,Xe=J.length;if(void 0!==ve&&("ucs2"===(ve=String(ve).toLowerCase())||"ucs-2"===ve||"utf16le"===ve||"utf-16le"===ve)){if(le.length<2||J.length<2)return-1;ot=2,Ne/=2,Xe/=2,re/=2}function Pi(rt,bi){return 1===ot?rt[bi]:rt.readUInt16BE(bi*ot)}if(xe){let rt=-1;for(it=re;it<Ne;it++)if(Pi(le,it)===Pi(J,-1===rt?0:it-rt)){if(-1===rt&&(rt=it),it-rt+1===Xe)return rt*ot}else-1!==rt&&(it-=it-rt),rt=-1}else for(re+Xe>Ne&&(re=Ne-Xe),it=re;it>=0;it--){let rt=!0;for(let bi=0;bi<Xe;bi++)if(Pi(le,it+bi)!==Pi(J,bi)){rt=!1;break}if(rt)return it}return-1}function De(le,J,re,ve){re=Number(re)||0;const xe=le.length-re;ve?(ve=Number(ve))>xe&&(ve=xe):ve=xe;const ot=J.length;let Ne;for(ve>ot/2&&(ve=ot/2),Ne=0;Ne<ve;++Ne){const Xe=parseInt(J.substr(2*Ne,2),16);if(qi(Xe))return Ne;le[re+Ne]=Xe}return Ne}function we(le,J,re,ve){return et(ui(J,le.length-re),le,re,ve)}function Oe(le,J,re,ve){return et(function qe(le){const J=[];for(let re=0;re<le.length;++re)J.push(255&le.charCodeAt(re));return J}(J),le,re,ve)}function y(le,J,re,ve){return et(xi(J),le,re,ve)}function o(le,J,re,ve){return et(function Ye(le,J){let re,ve,xe;const ot=[];for(let Ne=0;Ne<le.length&&!((J-=2)<0);++Ne)re=le.charCodeAt(Ne),ve=re>>8,xe=re%256,ot.push(xe),ot.push(ve);return ot}(J,le.length-re),le,re,ve)}function l(le,J,re){return j.fromByteArray(0===J&&re===le.length?le:le.slice(J,re))}function f(le,J,re){re=Math.min(le.length,re);const ve=[];let xe=J;for(;xe<re;){const ot=le[xe];let Ne=null,Xe=ot>239?4:ot>223?3:ot>191?2:1;if(xe+Xe<=re){let Pi,it,rt,bi;switch(Xe){case 1:ot<128&&(Ne=ot);break;case 2:Pi=le[xe+1],128==(192&Pi)&&(bi=(31&ot)<<6|63&Pi,bi>127&&(Ne=bi));break;case 3:Pi=le[xe+1],it=le[xe+2],128==(192&Pi)&&128==(192&it)&&(bi=(15&ot)<<12|(63&Pi)<<6|63&it,bi>2047&&(bi<55296||bi>57343)&&(Ne=bi));break;case 4:Pi=le[xe+1],it=le[xe+2],rt=le[xe+3],128==(192&Pi)&&128==(192&it)&&128==(192&rt)&&(bi=(15&ot)<<18|(63&Pi)<<12|(63&it)<<6|63&rt,bi>65535&&bi<1114112&&(Ne=bi))}}null===Ne?(Ne=65533,Xe=1):Ne>65535&&(Ne-=65536,ve.push(Ne>>>10&1023|55296),Ne=56320|1023&Ne),ve.push(Ne),xe+=Xe}return function h(le){const J=le.length;if(J<=u)return String.fromCharCode.apply(String,le);let re="",ve=0;for(;ve<J;)re+=String.fromCharCode.apply(String,le.slice(ve,ve+=u));return re}(ve)}ue.kMaxLength=G,!(P.TYPED_ARRAY_SUPPORT=function p(){try{const le=new Uint8Array(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,Uint8Array.prototype),Object.setPrototypeOf(le,J),42===le.foo()}catch(le){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(P.prototype,"parent",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.buffer}}),Object.defineProperty(P.prototype,"offset",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.byteOffset}}),P.poolSize=8192,P.from=function(le,J,re){return E(le,J,re)},Object.setPrototypeOf(P.prototype,Uint8Array.prototype),Object.setPrototypeOf(P,Uint8Array),P.alloc=function(le,J,re){return function x(le,J,re){return R(le),le<=0?k(le):void 0!==J?"string"==typeof re?k(le).fill(J,re):k(le).fill(J):k(le)}(le,J,re)},P.allocUnsafe=function(le){return S(le)},P.allocUnsafeSlow=function(le){return S(le)},P.isBuffer=function(J){return null!=J&&!0===J._isBuffer&&J!==P.prototype},P.compare=function(J,re){if(Ke(J,Uint8Array)&&(J=P.from(J,J.offset,J.byteLength)),Ke(re,Uint8Array)&&(re=P.from(re,re.offset,re.byteLength)),!P.isBuffer(J)||!P.isBuffer(re))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===re)return 0;let ve=J.length,xe=re.length;for(let ot=0,Ne=Math.min(ve,xe);ot<Ne;++ot)if(J[ot]!==re[ot]){ve=J[ot],xe=re[ot];break}return ve<xe?-1:xe<ve?1:0},P.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},P.concat=function(J,re){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(0===J.length)return P.alloc(0);let ve;if(void 0===re)for(re=0,ve=0;ve<J.length;++ve)re+=J[ve].length;const xe=P.allocUnsafe(re);let ot=0;for(ve=0;ve<J.length;++ve){let Ne=J[ve];if(Ke(Ne,Uint8Array))ot+Ne.length>xe.length?(P.isBuffer(Ne)||(Ne=P.from(Ne)),Ne.copy(xe,ot)):Uint8Array.prototype.set.call(xe,Ne,ot);else{if(!P.isBuffer(Ne))throw new TypeError('"list" argument must be an Array of Buffers');Ne.copy(xe,ot)}ot+=Ne.length}return xe},P.byteLength=Z,P.prototype._isBuffer=!0,P.prototype.swap16=function(){const J=this.length;if(J%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let re=0;re<J;re+=2)ae(this,re,re+1);return this},P.prototype.swap32=function(){const J=this.length;if(J%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let re=0;re<J;re+=4)ae(this,re,re+3),ae(this,re+1,re+2);return this},P.prototype.swap64=function(){const J=this.length;if(J%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let re=0;re<J;re+=8)ae(this,re,re+7),ae(this,re+1,re+6),ae(this,re+2,re+5),ae(this,re+3,re+4);return this},P.prototype.toLocaleString=P.prototype.toString=function(){const J=this.length;return 0===J?"":0===arguments.length?f(this,0,J):ee.apply(this,arguments)},P.prototype.equals=function(J){if(!P.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J||0===P.compare(this,J)},P.prototype.inspect=function(){let J="";const re=ue.INSPECT_MAX_BYTES;return J=this.toString("hex",0,re).replace(/(.{2})/g,"$1 ").trim(),this.length>re&&(J+=" ... "),"<Buffer "+J+">"},I&&(P.prototype[I]=P.prototype.inspect),P.prototype.compare=function(J,re,ve,xe,ot){if(Ke(J,Uint8Array)&&(J=P.from(J,J.offset,J.byteLength)),!P.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(void 0===re&&(re=0),void 0===ve&&(ve=J?J.length:0),void 0===xe&&(xe=0),void 0===ot&&(ot=this.length),re<0||ve>J.length||xe<0||ot>this.length)throw new RangeError("out of range index");if(xe>=ot&&re>=ve)return 0;if(xe>=ot)return-1;if(re>=ve)return 1;if(this===J)return 0;let Ne=(ot>>>=0)-(xe>>>=0),Xe=(ve>>>=0)-(re>>>=0);const Pi=Math.min(Ne,Xe),it=this.slice(xe,ot),rt=J.slice(re,ve);for(let bi=0;bi<Pi;++bi)if(it[bi]!==rt[bi]){Ne=it[bi],Xe=rt[bi];break}return Ne<Xe?-1:Xe<Ne?1:0},P.prototype.includes=function(J,re,ve){return-1!==this.indexOf(J,re,ve)},P.prototype.indexOf=function(J,re,ve){return ge(this,J,re,ve,!0)},P.prototype.lastIndexOf=function(J,re,ve){return ge(this,J,re,ve,!1)},P.prototype.write=function(J,re,ve,xe){if(void 0===re)xe="utf8",ve=this.length,re=0;else if(void 0===ve&&"string"==typeof re)xe=re,ve=this.length,re=0;else{if(!isFinite(re))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");re>>>=0,isFinite(ve)?(ve>>>=0,void 0===xe&&(xe="utf8")):(xe=ve,ve=void 0)}const ot=this.length-re;if((void 0===ve||ve>ot)&&(ve=ot),J.length>0&&(ve<0||re<0)||re>this.length)throw new RangeError("Attempt to write outside buffer bounds");xe||(xe="utf8");let Ne=!1;for(;;)switch(xe){case"hex":return De(this,J,re,ve);case"utf8":case"utf-8":return we(this,J,re,ve);case"ascii":case"latin1":case"binary":return Oe(this,J,re,ve);case"base64":return y(this,J,re,ve);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o(this,J,re,ve);default:if(Ne)throw new TypeError("Unknown encoding: "+xe);xe=(""+xe).toLowerCase(),Ne=!0}},P.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const u=4096;function b(le,J,re){let ve="";re=Math.min(le.length,re);for(let xe=J;xe<re;++xe)ve+=String.fromCharCode(127&le[xe]);return ve}function w(le,J,re){let ve="";re=Math.min(le.length,re);for(let xe=J;xe<re;++xe)ve+=String.fromCharCode(le[xe]);return ve}function g(le,J,re){const ve=le.length;(!J||J<0)&&(J=0),(!re||re<0||re>ve)&&(re=ve);let xe="";for(let ot=J;ot<re;++ot)xe+=ut[le[ot]];return xe}function s(le,J,re){const ve=le.slice(J,re);let xe="";for(let ot=0;ot<ve.length-1;ot+=2)xe+=String.fromCharCode(ve[ot]+256*ve[ot+1]);return xe}function v(le,J,re){if(le%1!=0||le<0)throw new RangeError("offset is not uint");if(le+J>re)throw new RangeError("Trying to access beyond buffer length")}function $(le,J,re,ve,xe,ot){if(!P.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>xe||J<ot)throw new RangeError('"value" argument is out of bounds');if(re+ve>le.length)throw new RangeError("Index out of range")}function L(le,J,re,ve,xe){je(J,ve,xe,le,re,7);let ot=Number(J&BigInt(4294967295));le[re++]=ot,ot>>=8,le[re++]=ot,ot>>=8,le[re++]=ot,ot>>=8,le[re++]=ot;let Ne=Number(J>>BigInt(32)&BigInt(4294967295));return le[re++]=Ne,Ne>>=8,le[re++]=Ne,Ne>>=8,le[re++]=Ne,Ne>>=8,le[re++]=Ne,re}function ie(le,J,re,ve,xe){je(J,ve,xe,le,re,7);let ot=Number(J&BigInt(4294967295));le[re+7]=ot,ot>>=8,le[re+6]=ot,ot>>=8,le[re+5]=ot,ot>>=8,le[re+4]=ot;let Ne=Number(J>>BigInt(32)&BigInt(4294967295));return le[re+3]=Ne,Ne>>=8,le[re+2]=Ne,Ne>>=8,le[re+1]=Ne,Ne>>=8,le[re]=Ne,re+8}function Se(le,J,re,ve,xe,ot){if(re+ve>le.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("Index out of range")}function ke(le,J,re,ve,xe){return J=+J,re>>>=0,xe||Se(le,0,re,4),W.write(le,J,re,ve,23,4),re+4}function Be(le,J,re,ve,xe){return J=+J,re>>>=0,xe||Se(le,0,re,8),W.write(le,J,re,ve,52,8),re+8}P.prototype.slice=function(J,re){const ve=this.length;(J=~~J)<0?(J+=ve)<0&&(J=0):J>ve&&(J=ve),(re=void 0===re?ve:~~re)<0?(re+=ve)<0&&(re=0):re>ve&&(re=ve),re<J&&(re=J);const xe=this.subarray(J,re);return Object.setPrototypeOf(xe,P.prototype),xe},P.prototype.readUintLE=P.prototype.readUIntLE=function(J,re,ve){J>>>=0,re>>>=0,ve||v(J,re,this.length);let xe=this[J],ot=1,Ne=0;for(;++Ne<re&&(ot*=256);)xe+=this[J+Ne]*ot;return xe},P.prototype.readUintBE=P.prototype.readUIntBE=function(J,re,ve){J>>>=0,re>>>=0,ve||v(J,re,this.length);let xe=this[J+--re],ot=1;for(;re>0&&(ot*=256);)xe+=this[J+--re]*ot;return xe},P.prototype.readUint8=P.prototype.readUInt8=function(J,re){return J>>>=0,re||v(J,1,this.length),this[J]},P.prototype.readUint16LE=P.prototype.readUInt16LE=function(J,re){return J>>>=0,re||v(J,2,this.length),this[J]|this[J+1]<<8},P.prototype.readUint16BE=P.prototype.readUInt16BE=function(J,re){return J>>>=0,re||v(J,2,this.length),this[J]<<8|this[J+1]},P.prototype.readUint32LE=P.prototype.readUInt32LE=function(J,re){return J>>>=0,re||v(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+16777216*this[J+3]},P.prototype.readUint32BE=P.prototype.readUInt32BE=function(J,re){return J>>>=0,re||v(J,4,this.length),16777216*this[J]+(this[J+1]<<16|this[J+2]<<8|this[J+3])},P.prototype.readBigUInt64LE=Qe(function(J){se(J>>>=0,"offset");const re=this[J],ve=this[J+7];(void 0===re||void 0===ve)&&Ee(J,this.length-8);const xe=re+256*this[++J]+65536*this[++J]+this[++J]*2**24,ot=this[++J]+256*this[++J]+65536*this[++J]+ve*2**24;return BigInt(xe)+(BigInt(ot)<<BigInt(32))}),P.prototype.readBigUInt64BE=Qe(function(J){se(J>>>=0,"offset");const re=this[J],ve=this[J+7];(void 0===re||void 0===ve)&&Ee(J,this.length-8);const xe=re*2**24+65536*this[++J]+256*this[++J]+this[++J],ot=this[++J]*2**24+65536*this[++J]+256*this[++J]+ve;return(BigInt(xe)<<BigInt(32))+BigInt(ot)}),P.prototype.readIntLE=function(J,re,ve){J>>>=0,re>>>=0,ve||v(J,re,this.length);let xe=this[J],ot=1,Ne=0;for(;++Ne<re&&(ot*=256);)xe+=this[J+Ne]*ot;return ot*=128,xe>=ot&&(xe-=Math.pow(2,8*re)),xe},P.prototype.readIntBE=function(J,re,ve){J>>>=0,re>>>=0,ve||v(J,re,this.length);let xe=re,ot=1,Ne=this[J+--xe];for(;xe>0&&(ot*=256);)Ne+=this[J+--xe]*ot;return ot*=128,Ne>=ot&&(Ne-=Math.pow(2,8*re)),Ne},P.prototype.readInt8=function(J,re){return J>>>=0,re||v(J,1,this.length),128&this[J]?-1*(255-this[J]+1):this[J]},P.prototype.readInt16LE=function(J,re){J>>>=0,re||v(J,2,this.length);const ve=this[J]|this[J+1]<<8;return 32768&ve?4294901760|ve:ve},P.prototype.readInt16BE=function(J,re){J>>>=0,re||v(J,2,this.length);const ve=this[J+1]|this[J]<<8;return 32768&ve?4294901760|ve:ve},P.prototype.readInt32LE=function(J,re){return J>>>=0,re||v(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},P.prototype.readInt32BE=function(J,re){return J>>>=0,re||v(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},P.prototype.readBigInt64LE=Qe(function(J){se(J>>>=0,"offset");const re=this[J],ve=this[J+7];return(void 0===re||void 0===ve)&&Ee(J,this.length-8),(BigInt(this[J+4]+256*this[J+5]+65536*this[J+6]+(ve<<24))<<BigInt(32))+BigInt(re+256*this[++J]+65536*this[++J]+this[++J]*2**24)}),P.prototype.readBigInt64BE=Qe(function(J){se(J>>>=0,"offset");const re=this[J],ve=this[J+7];(void 0===re||void 0===ve)&&Ee(J,this.length-8);const xe=(re<<24)+65536*this[++J]+256*this[++J]+this[++J];return(BigInt(xe)<<BigInt(32))+BigInt(this[++J]*2**24+65536*this[++J]+256*this[++J]+ve)}),P.prototype.readFloatLE=function(J,re){return J>>>=0,re||v(J,4,this.length),W.read(this,J,!0,23,4)},P.prototype.readFloatBE=function(J,re){return J>>>=0,re||v(J,4,this.length),W.read(this,J,!1,23,4)},P.prototype.readDoubleLE=function(J,re){return J>>>=0,re||v(J,8,this.length),W.read(this,J,!0,52,8)},P.prototype.readDoubleBE=function(J,re){return J>>>=0,re||v(J,8,this.length),W.read(this,J,!1,52,8)},P.prototype.writeUintLE=P.prototype.writeUIntLE=function(J,re,ve,xe){J=+J,re>>>=0,ve>>>=0,xe||$(this,J,re,ve,Math.pow(2,8*ve)-1,0);let ot=1,Ne=0;for(this[re]=255&J;++Ne<ve&&(ot*=256);)this[re+Ne]=J/ot&255;return re+ve},P.prototype.writeUintBE=P.prototype.writeUIntBE=function(J,re,ve,xe){J=+J,re>>>=0,ve>>>=0,xe||$(this,J,re,ve,Math.pow(2,8*ve)-1,0);let ot=ve-1,Ne=1;for(this[re+ot]=255&J;--ot>=0&&(Ne*=256);)this[re+ot]=J/Ne&255;return re+ve},P.prototype.writeUint8=P.prototype.writeUInt8=function(J,re,ve){return J=+J,re>>>=0,ve||$(this,J,re,1,255,0),this[re]=255&J,re+1},P.prototype.writeUint16LE=P.prototype.writeUInt16LE=function(J,re,ve){return J=+J,re>>>=0,ve||$(this,J,re,2,65535,0),this[re]=255&J,this[re+1]=J>>>8,re+2},P.prototype.writeUint16BE=P.prototype.writeUInt16BE=function(J,re,ve){return J=+J,re>>>=0,ve||$(this,J,re,2,65535,0),this[re]=J>>>8,this[re+1]=255&J,re+2},P.prototype.writeUint32LE=P.prototype.writeUInt32LE=function(J,re,ve){return J=+J,re>>>=0,ve||$(this,J,re,4,4294967295,0),this[re+3]=J>>>24,this[re+2]=J>>>16,this[re+1]=J>>>8,this[re]=255&J,re+4},P.prototype.writeUint32BE=P.prototype.writeUInt32BE=function(J,re,ve){return J=+J,re>>>=0,ve||$(this,J,re,4,4294967295,0),this[re]=J>>>24,this[re+1]=J>>>16,this[re+2]=J>>>8,this[re+3]=255&J,re+4},P.prototype.writeBigUInt64LE=Qe(function(J,re=0){return L(this,J,re,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeBigUInt64BE=Qe(function(J,re=0){return ie(this,J,re,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeIntLE=function(J,re,ve,xe){if(J=+J,re>>>=0,!xe){const Pi=Math.pow(2,8*ve-1);$(this,J,re,ve,Pi-1,-Pi)}let ot=0,Ne=1,Xe=0;for(this[re]=255&J;++ot<ve&&(Ne*=256);)J<0&&0===Xe&&0!==this[re+ot-1]&&(Xe=1),this[re+ot]=(J/Ne>>0)-Xe&255;return re+ve},P.prototype.writeIntBE=function(J,re,ve,xe){if(J=+J,re>>>=0,!xe){const Pi=Math.pow(2,8*ve-1);$(this,J,re,ve,Pi-1,-Pi)}let ot=ve-1,Ne=1,Xe=0;for(this[re+ot]=255&J;--ot>=0&&(Ne*=256);)J<0&&0===Xe&&0!==this[re+ot+1]&&(Xe=1),this[re+ot]=(J/Ne>>0)-Xe&255;return re+ve},P.prototype.writeInt8=function(J,re,ve){return J=+J,re>>>=0,ve||$(this,J,re,1,127,-128),J<0&&(J=255+J+1),this[re]=255&J,re+1},P.prototype.writeInt16LE=function(J,re,ve){return J=+J,re>>>=0,ve||$(this,J,re,2,32767,-32768),this[re]=255&J,this[re+1]=J>>>8,re+2},P.prototype.writeInt16BE=function(J,re,ve){return J=+J,re>>>=0,ve||$(this,J,re,2,32767,-32768),this[re]=J>>>8,this[re+1]=255&J,re+2},P.prototype.writeInt32LE=function(J,re,ve){return J=+J,re>>>=0,ve||$(this,J,re,4,2147483647,-2147483648),this[re]=255&J,this[re+1]=J>>>8,this[re+2]=J>>>16,this[re+3]=J>>>24,re+4},P.prototype.writeInt32BE=function(J,re,ve){return J=+J,re>>>=0,ve||$(this,J,re,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[re]=J>>>24,this[re+1]=J>>>16,this[re+2]=J>>>8,this[re+3]=255&J,re+4},P.prototype.writeBigInt64LE=Qe(function(J,re=0){return L(this,J,re,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),P.prototype.writeBigInt64BE=Qe(function(J,re=0){return ie(this,J,re,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),P.prototype.writeFloatLE=function(J,re,ve){return ke(this,J,re,!0,ve)},P.prototype.writeFloatBE=function(J,re,ve){return ke(this,J,re,!1,ve)},P.prototype.writeDoubleLE=function(J,re,ve){return Be(this,J,re,!0,ve)},P.prototype.writeDoubleBE=function(J,re,ve){return Be(this,J,re,!1,ve)},P.prototype.copy=function(J,re,ve,xe){if(!P.isBuffer(J))throw new TypeError("argument should be a Buffer");if(ve||(ve=0),!xe&&0!==xe&&(xe=this.length),re>=J.length&&(re=J.length),re||(re=0),xe>0&&xe<ve&&(xe=ve),xe===ve||0===J.length||0===this.length)return 0;if(re<0)throw new RangeError("targetStart out of bounds");if(ve<0||ve>=this.length)throw new RangeError("Index out of range");if(xe<0)throw new RangeError("sourceEnd out of bounds");xe>this.length&&(xe=this.length),J.length-re<xe-ve&&(xe=J.length-re+ve);const ot=xe-ve;return this===J&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(re,ve,xe):Uint8Array.prototype.set.call(J,this.subarray(ve,xe),re),ot},P.prototype.fill=function(J,re,ve,xe){if("string"==typeof J){if("string"==typeof re?(xe=re,re=0,ve=this.length):"string"==typeof ve&&(xe=ve,ve=this.length),void 0!==xe&&"string"!=typeof xe)throw new TypeError("encoding must be a string");if("string"==typeof xe&&!P.isEncoding(xe))throw new TypeError("Unknown encoding: "+xe);if(1===J.length){const Ne=J.charCodeAt(0);("utf8"===xe&&Ne<128||"latin1"===xe)&&(J=Ne)}}else"number"==typeof J?J&=255:"boolean"==typeof J&&(J=Number(J));if(re<0||this.length<re||this.length<ve)throw new RangeError("Out of range index");if(ve<=re)return this;let ot;if(re>>>=0,ve=void 0===ve?this.length:ve>>>0,J||(J=0),"number"==typeof J)for(ot=re;ot<ve;++ot)this[ot]=J;else{const Ne=P.isBuffer(J)?J:P.from(J,xe),Xe=Ne.length;if(0===Xe)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(ot=0;ot<ve-re;++ot)this[ot+re]=Ne[ot%Xe]}return this};const Pe={};function Te(le,J,re){Pe[le]=class extends re{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,delete this.name}get code(){return le}set code(xe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:xe,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}function Ie(le){let J="",re=le.length;const ve="-"===le[0]?1:0;for(;re>=ve+4;re-=3)J=`_${le.slice(re-3,re)}${J}`;return`${le.slice(0,re)}${J}`}function je(le,J,re,ve,xe,ot){if(le>re||le<J){const Ne="bigint"==typeof J?"n":"";let Xe;throw Xe=ot>3?0===J||J===BigInt(0)?`>= 0${Ne} and < 2${Ne} ** ${8*(ot+1)}${Ne}`:`>= -(2${Ne} ** ${8*(ot+1)-1}${Ne}) and < 2 ** ${8*(ot+1)-1}${Ne}`:`>= ${J}${Ne} and <= ${re}${Ne}`,new Pe.ERR_OUT_OF_RANGE("value",Xe,le)}!function Vt(le,J,re){se(J,"offset"),(void 0===le[J]||void 0===le[J+re])&&Ee(J,le.length-(re+1))}(ve,xe,ot)}function se(le,J){if("number"!=typeof le)throw new Pe.ERR_INVALID_ARG_TYPE(J,"number",le)}function Ee(le,J,re){throw Math.floor(le)!==le?(se(le,re),new Pe.ERR_OUT_OF_RANGE(re||"offset","an integer",le)):J<0?new Pe.ERR_BUFFER_OUT_OF_BOUNDS:new Pe.ERR_OUT_OF_RANGE(re||"offset",`>= ${re?1:0} and <= ${J}`,le)}Te("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Te("ERR_INVALID_ARG_TYPE",function(le,J){return`The "${le}" argument must be of type number. Received type ${typeof J}`},TypeError),Te("ERR_OUT_OF_RANGE",function(le,J,re){let ve=`The value of "${le}" is out of range.`,xe=re;return Number.isInteger(re)&&Math.abs(re)>2**32?xe=Ie(String(re)):"bigint"==typeof re&&(xe=String(re),(re>BigInt(2)**BigInt(32)||re<-(BigInt(2)**BigInt(32)))&&(xe=Ie(xe)),xe+="n"),ve+=` It must be ${J}. Received ${xe}`,ve},RangeError);const Re=/[^+/0-9A-Za-z-_]/g;function ui(le,J){let re;J=J||1/0;const ve=le.length;let xe=null;const ot=[];for(let Ne=0;Ne<ve;++Ne){if(re=le.charCodeAt(Ne),re>55295&&re<57344){if(!xe){if(re>56319){(J-=3)>-1&&ot.push(239,191,189);continue}if(Ne+1===ve){(J-=3)>-1&&ot.push(239,191,189);continue}xe=re;continue}if(re<56320){(J-=3)>-1&&ot.push(239,191,189),xe=re;continue}re=65536+(xe-55296<<10|re-56320)}else xe&&(J-=3)>-1&&ot.push(239,191,189);if(xe=null,re<128){if((J-=1)<0)break;ot.push(re)}else if(re<2048){if((J-=2)<0)break;ot.push(re>>6|192,63&re|128)}else if(re<65536){if((J-=3)<0)break;ot.push(re>>12|224,re>>6&63|128,63&re|128)}else{if(!(re<1114112))throw new Error("Invalid code point");if((J-=4)<0)break;ot.push(re>>18|240,re>>12&63|128,re>>6&63|128,63&re|128)}}return ot}function xi(le){return j.toByteArray(function Ge(le){if((le=(le=le.split("=")[0]).trim().replace(Re,"")).length<2)return"";for(;le.length%4!=0;)le+="=";return le}(le))}function et(le,J,re,ve){let xe;for(xe=0;xe<ve&&!(xe+re>=J.length||xe>=le.length);++xe)J[xe+re]=le[xe];return xe}function Ke(le,J){return le instanceof J||null!=le&&null!=le.constructor&&null!=le.constructor.name&&le.constructor.name===J.name}function qi(le){return le!=le}const ut=function(){const le="0123456789abcdef",J=new Array(256);for(let re=0;re<16;++re){const ve=16*re;for(let xe=0;xe<16;++xe)J[ve+xe]=le[re]+le[xe]}return J}();function Qe(le){return"undefined"==typeof BigInt?rn:le}function rn(){throw new Error("BigInt not supported")}},1052:(ye,ue,H)=>{var j=H(3502).Buffer,W=H(295).Transform,I=H(3054).s;function p(k){W.call(this),this.hashMode="string"==typeof k,this.hashMode?this[k]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}H(3894)(p,W),p.prototype.update=function(k,P,E){"string"==typeof k&&(k=j.from(k,P));var R=this._update(k);return this.hashMode?this:(E&&(R=this._toString(R,E)),R)},p.prototype.setAutoPadding=function(){},p.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},p.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},p.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},p.prototype._transform=function(k,P,E){var R;try{this.hashMode?this._update(k):this.push(this._update(k))}catch(x){R=x}finally{E(R)}},p.prototype._flush=function(k){var P;try{this.push(this.__final())}catch(E){P=E}k(P)},p.prototype._finalOrDigest=function(k){var P=this.__final()||j.alloc(0);return k&&(P=this._toString(P,k,!0)),P},p.prototype._toString=function(k,P,E){if(this._decoder||(this._decoder=new I(P),this._encoding=P),this._encoding!==P)throw new Error("can't switch encodings");var R=this._decoder.write(k);return E&&(R+=this._decoder.end()),R},ye.exports=p},4746:(ye,ue,H)=>{var j=H(7715),W=H(6422);ye.exports=function(P){return new G(P)};var I={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function G(k){this.curveType=I[k],this.curveType||(this.curveType={name:k}),this.curve=new j.ec(this.curveType.name),this.keys=void 0}function p(k,P,E){Array.isArray(k)||(k=k.toArray());var R=new Buffer(k);if(E&&R.length<E){var x=new Buffer(E-R.length);x.fill(0),R=Buffer.concat([x,R])}return P?R.toString(P):R}I.p224=I.secp224r1,I.p256=I.secp256r1=I.prime256v1,I.p192=I.secp192r1=I.prime192v1,I.p384=I.secp384r1,I.p521=I.secp521r1,G.prototype.generateKeys=function(k,P){return this.keys=this.curve.genKeyPair(),this.getPublicKey(k,P)},G.prototype.computeSecret=function(k,P,E){return P=P||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,P)),p(this.curve.keyFromPublic(k).getPublic().mul(this.keys.getPrivate()).getX(),E,this.curveType.byteLength)},G.prototype.getPublicKey=function(k,P){var E=this.keys.getPublic("compressed"===P,!0);return"hybrid"===P&&(E[0]=E[E.length-1]%2?7:6),p(E,k)},G.prototype.getPrivateKey=function(k){return p(this.keys.getPrivate(),k)},G.prototype.setPublicKey=function(k,P){return P=P||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,P)),this.keys._importPublic(k),this},G.prototype.setPrivateKey=function(k,P){P=P||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,P));var E=new W(k);return E=E.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(E),this}},6422:function(ye,ue,H){!function(j,W){"use strict";function I(y,o){if(!y)throw new Error(o||"Assertion failed")}function G(y,o){y.super_=o;var l=function(){};l.prototype=o.prototype,y.prototype=new l,y.prototype.constructor=y}function p(y,o,l){if(p.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,null!==y&&(("le"===o||"be"===o)&&(l=o,o=10),this._init(y||0,o||10,l||"be"))}var k;"object"==typeof j?j.exports=p:W.BN=p,p.BN=p,p.wordSize=26;try{k="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:H(8623).Buffer}catch(y){}function P(y,o){var l=y.charCodeAt(o);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function E(y,o,l){var f=P(y,l);return l-1>=o&&(f|=P(y,l-1)<<4),f}function R(y,o,l,f){for(var u=0,h=Math.min(y.length,l),b=o;b<h;b++){var w=y.charCodeAt(b)-48;u*=f,u+=w>=49?w-49+10:w>=17?w-17+10:w}return u}p.isBN=function(o){return o instanceof p||null!==o&&"object"==typeof o&&o.constructor.wordSize===p.wordSize&&Array.isArray(o.words)},p.max=function(o,l){return o.cmp(l)>0?o:l},p.min=function(o,l){return o.cmp(l)<0?o:l},p.prototype._init=function(o,l,f){if("number"==typeof o)return this._initNumber(o,l,f);if("object"==typeof o)return this._initArray(o,l,f);"hex"===l&&(l=16),I(l===(0|l)&&l>=2&&l<=36);var u=0;"-"===(o=o.toString().replace(/\s+/g,""))[0]&&(u++,this.negative=1),u<o.length&&(16===l?this._parseHex(o,u,f):(this._parseBase(o,l,u),"le"===f&&this._initArray(this.toArray(),l,f)))},p.prototype._initNumber=function(o,l,f){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[67108863&o],this.length=1):o<4503599627370496?(this.words=[67108863&o,o/67108864&67108863],this.length=2):(I(o<9007199254740992),this.words=[67108863&o,o/67108864&67108863,1],this.length=3),"le"===f&&this._initArray(this.toArray(),l,f)},p.prototype._initArray=function(o,l,f){if(I("number"==typeof o.length),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var h,b,w=0;if("be"===f)for(u=o.length-1,h=0;u>=0;u-=3)this.words[h]|=(b=o[u]|o[u-1]<<8|o[u-2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);else if("le"===f)for(u=0,h=0;u<o.length;u+=3)this.words[h]|=(b=o[u]|o[u+1]<<8|o[u+2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);return this.strip()},p.prototype._parseHex=function(o,l,f){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var w,h=0,b=0;if("be"===f)for(u=o.length-1;u>=l;u-=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;else for(u=(o.length-l)%2==0?l+1:l;u<o.length;u+=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;this.strip()},p.prototype._parseBase=function(o,l,f){this.words=[0],this.length=1;for(var u=0,h=1;h<=67108863;h*=l)u++;u--,h=h/l|0;for(var b=o.length-f,w=b%u,g=Math.min(b,b-w)+f,s=0,v=f;v<g;v+=u)s=R(o,v,v+u,l),this.imuln(h),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==w){var $=1;for(s=R(o,v,o.length,l),v=0;v<w;v++)$*=l;this.imuln($),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},p.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red},p.prototype.clone=function(){var o=new p(null);return this.copy(o),o},p.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},p.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},p.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},p.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function B(y,o,l){l.negative=o.negative^y.negative;var f=y.length+o.length|0;l.length=f,f=f-1|0;var u=0|y.words[0],h=0|o.words[0],b=u*h,g=b/67108864|0;l.words[0]=67108863&b;for(var s=1;s<f;s++){for(var v=g>>>26,$=67108863&g,L=Math.min(s,o.length-1),ie=Math.max(0,s-y.length+1);ie<=L;ie++)v+=(b=(u=0|y.words[s-ie|0])*(h=0|o.words[ie])+$)/67108864|0,$=67108863&b;l.words[s]=0|$,g=0|v}return 0!==g?l.words[s]=0|g:l.length--,l.strip()}p.prototype.toString=function(o,l){var f;if(l=0|l||1,16===(o=o||10)||"hex"===o){f="";for(var u=0,h=0,b=0;b<this.length;b++){var w=this.words[b],g=(16777215&(w<<u|h)).toString(16);f=0!=(h=w>>>24-u&16777215)||b!==this.length-1?x[6-g.length]+g+f:g+f,(u+=2)>=26&&(u-=26,b--)}for(0!==h&&(f=h.toString(16)+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}if(o===(0|o)&&o>=2&&o<=36){var s=S[o],v=O[o];f="";var $=this.clone();for($.negative=0;!$.isZero();){var L=$.modn(v).toString(o);f=($=$.idivn(v)).isZero()?L+f:x[s-L.length]+L+f}for(this.isZero()&&(f="0"+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}I(!1,"Base should be between 2 and 36")},p.prototype.toNumber=function(){var o=this.words[0];return 2===this.length?o+=67108864*this.words[1]:3===this.length&&1===this.words[2]?o+=4503599627370496+67108864*this.words[1]:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-o:o},p.prototype.toJSON=function(){return this.toString(16)},p.prototype.toBuffer=function(o,l){return I(void 0!==k),this.toArrayLike(k,o,l)},p.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)},p.prototype.toArrayLike=function(o,l,f){var u=this.byteLength(),h=f||Math.max(1,u);I(u<=h,"byte array longer than desired length"),I(h>0,"Requested array length <= 0"),this.strip();var g,s,b="le"===l,w=new o(h),v=this.clone();if(b){for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[s]=g;for(;s<h;s++)w[s]=0}else{for(s=0;s<h-u;s++)w[s]=0;for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[h-s-1]=g}return w},p.prototype._countBits=Math.clz32?function(o){return 32-Math.clz32(o)}:function(o){var l=o,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},p.prototype._zeroBits=function(o){if(0===o)return 26;var l=o,f=0;return 0==(8191&l)&&(f+=13,l>>>=13),0==(127&l)&&(f+=7,l>>>=7),0==(15&l)&&(f+=4,l>>>=4),0==(3&l)&&(f+=2,l>>>=2),0==(1&l)&&f++,f},p.prototype.bitLength=function(){var l=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+l},p.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(o+=f,26!==f)break}return o},p.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},p.prototype.toTwos=function(o){return 0!==this.negative?this.abs().inotn(o).iaddn(1):this.clone()},p.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},p.prototype.isNeg=function(){return 0!==this.negative},p.prototype.neg=function(){return this.clone().ineg()},p.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},p.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this.strip()},p.prototype.ior=function(o){return I(0==(this.negative|o.negative)),this.iuor(o)},p.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},p.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},p.prototype.iuand=function(o){var l;l=this.length>o.length?o:this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&o.words[f];return this.length=l.length,this.strip()},p.prototype.iand=function(o){return I(0==(this.negative|o.negative)),this.iuand(o)},p.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},p.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},p.prototype.iuxor=function(o){var l,f;this.length>o.length?(l=this,f=o):(l=o,f=this);for(var u=0;u<f.length;u++)this.words[u]=l.words[u]^f.words[u];if(this!==l)for(;u<l.length;u++)this.words[u]=l.words[u];return this.length=l.length,this.strip()},p.prototype.ixor=function(o){return I(0==(this.negative|o.negative)),this.iuxor(o)},p.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},p.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},p.prototype.inotn=function(o){I("number"==typeof o&&o>=0);var l=0|Math.ceil(o/26),f=o%26;this._expand(l),f>0&&l--;for(var u=0;u<l;u++)this.words[u]=67108863&~this.words[u];return f>0&&(this.words[u]=~this.words[u]&67108863>>26-f),this.strip()},p.prototype.notn=function(o){return this.clone().inotn(o)},p.prototype.setn=function(o,l){I("number"==typeof o&&o>=0);var f=o/26|0,u=o%26;return this._expand(f+1),this.words[f]=l?this.words[f]|1<<u:this.words[f]&~(1<<u),this.strip()},p.prototype.iadd=function(o){var l,f,u;if(0!==this.negative&&0===o.negative)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(0===this.negative&&0!==o.negative)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();this.length>o.length?(f=this,u=o):(f=o,u=this);for(var h=0,b=0;b<u.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+(0|u.words[b])+h),h=l>>>26;for(;0!==h&&b<f.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+h),h=l>>>26;if(this.length=f.length,0!==h)this.words[this.length]=h,this.length++;else if(f!==this)for(;b<f.length;b++)this.words[b]=f.words[b];return this},p.prototype.add=function(o){var l;return 0!==o.negative&&0===this.negative?(o.negative=0,l=this.sub(o),o.negative^=1,l):0===o.negative&&0!==this.negative?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},p.prototype.isub=function(o){if(0!==o.negative){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var u,h,f=this.cmp(o);if(0===f)return this.negative=0,this.length=1,this.words[0]=0,this;f>0?(u=this,h=o):(u=o,h=this);for(var b=0,w=0;w<h.length;w++)b=(l=(0|u.words[w])-(0|h.words[w])+b)>>26,this.words[w]=67108863&l;for(;0!==b&&w<u.length;w++)b=(l=(0|u.words[w])+b)>>26,this.words[w]=67108863&l;if(0===b&&w<u.length&&u!==this)for(;w<u.length;w++)this.words[w]=u.words[w];return this.length=Math.max(this.length,w),u!==this&&(this.negative=1),this.strip()},p.prototype.sub=function(o){return this.clone().isub(o)};var N=function(o,l,f){var g,s,v,u=o.words,h=l.words,b=f.words,w=0,$=0|u[0],L=8191&$,ie=$>>>13,Se=0|u[1],ke=8191&Se,Be=Se>>>13,Pe=0|u[2],Te=8191&Pe,Ie=Pe>>>13,Vt=0|u[3],je=8191&Vt,se=Vt>>>13,Ee=0|u[4],Re=8191&Ee,Ge=Ee>>>13,ui=0|u[5],qe=8191&ui,Ye=ui>>>13,xi=0|u[6],et=8191&xi,Ke=xi>>>13,qi=0|u[7],ut=8191&qi,Qe=qi>>>13,rn=0|u[8],le=8191&rn,J=rn>>>13,re=0|u[9],ve=8191&re,xe=re>>>13,ot=0|h[0],Ne=8191&ot,Xe=ot>>>13,Pi=0|h[1],it=8191&Pi,rt=Pi>>>13,bi=0|h[2],ht=8191&bi,_t=bi>>>13,Sr=0|h[3],gt=8191&Sr,vt=Sr>>>13,Dr=0|h[4],st=8191&Dr,yt=Dr>>>13,Ir=0|h[5],mt=8191&Ir,wt=Ir>>>13,Cr=0|h[6],ct=8191&Cr,ft=Cr>>>13,An=0|h[7],St=8191&An,at=An>>>13,Tr=0|h[8],dt=8191&Tr,Mt=Tr>>>13,$r=0|h[9],Tt=8191&$r,Ct=$r>>>13;f.negative=o.negative^l.negative,f.length=19;var Fn=(w+(g=Math.imul(L,Ne))|0)+((8191&(s=(s=Math.imul(L,Xe))+Math.imul(ie,Ne)|0))<<13)|0;w=((v=Math.imul(ie,Xe))+(s>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,g=Math.imul(ke,Ne),s=(s=Math.imul(ke,Xe))+Math.imul(Be,Ne)|0,v=Math.imul(Be,Xe);var Ri=(w+(g=g+Math.imul(L,it)|0)|0)+((8191&(s=(s=s+Math.imul(L,rt)|0)+Math.imul(ie,it)|0))<<13)|0;w=((v=v+Math.imul(ie,rt)|0)+(s>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,g=Math.imul(Te,Ne),s=(s=Math.imul(Te,Xe))+Math.imul(Ie,Ne)|0,v=Math.imul(Ie,Xe),g=g+Math.imul(ke,it)|0,s=(s=s+Math.imul(ke,rt)|0)+Math.imul(Be,it)|0,v=v+Math.imul(Be,rt)|0;var Oi=(w+(g=g+Math.imul(L,ht)|0)|0)+((8191&(s=(s=s+Math.imul(L,_t)|0)+Math.imul(ie,ht)|0))<<13)|0;w=((v=v+Math.imul(ie,_t)|0)+(s>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,g=Math.imul(je,Ne),s=(s=Math.imul(je,Xe))+Math.imul(se,Ne)|0,v=Math.imul(se,Xe),g=g+Math.imul(Te,it)|0,s=(s=s+Math.imul(Te,rt)|0)+Math.imul(Ie,it)|0,v=v+Math.imul(Ie,rt)|0,g=g+Math.imul(ke,ht)|0,s=(s=s+Math.imul(ke,_t)|0)+Math.imul(Be,ht)|0,v=v+Math.imul(Be,_t)|0;var zn=(w+(g=g+Math.imul(L,gt)|0)|0)+((8191&(s=(s=s+Math.imul(L,vt)|0)+Math.imul(ie,gt)|0))<<13)|0;w=((v=v+Math.imul(ie,vt)|0)+(s>>>13)|0)+(zn>>>26)|0,zn&=67108863,g=Math.imul(Re,Ne),s=(s=Math.imul(Re,Xe))+Math.imul(Ge,Ne)|0,v=Math.imul(Ge,Xe),g=g+Math.imul(je,it)|0,s=(s=s+Math.imul(je,rt)|0)+Math.imul(se,it)|0,v=v+Math.imul(se,rt)|0,g=g+Math.imul(Te,ht)|0,s=(s=s+Math.imul(Te,_t)|0)+Math.imul(Ie,ht)|0,v=v+Math.imul(Ie,_t)|0,g=g+Math.imul(ke,gt)|0,s=(s=s+Math.imul(ke,vt)|0)+Math.imul(Be,gt)|0,v=v+Math.imul(Be,vt)|0;var jn=(w+(g=g+Math.imul(L,st)|0)|0)+((8191&(s=(s=s+Math.imul(L,yt)|0)+Math.imul(ie,st)|0))<<13)|0;w=((v=v+Math.imul(ie,yt)|0)+(s>>>13)|0)+(jn>>>26)|0,jn&=67108863,g=Math.imul(qe,Ne),s=(s=Math.imul(qe,Xe))+Math.imul(Ye,Ne)|0,v=Math.imul(Ye,Xe),g=g+Math.imul(Re,it)|0,s=(s=s+Math.imul(Re,rt)|0)+Math.imul(Ge,it)|0,v=v+Math.imul(Ge,rt)|0,g=g+Math.imul(je,ht)|0,s=(s=s+Math.imul(je,_t)|0)+Math.imul(se,ht)|0,v=v+Math.imul(se,_t)|0,g=g+Math.imul(Te,gt)|0,s=(s=s+Math.imul(Te,vt)|0)+Math.imul(Ie,gt)|0,v=v+Math.imul(Ie,vt)|0,g=g+Math.imul(ke,st)|0,s=(s=s+Math.imul(ke,yt)|0)+Math.imul(Be,st)|0,v=v+Math.imul(Be,yt)|0;var tr=(w+(g=g+Math.imul(L,mt)|0)|0)+((8191&(s=(s=s+Math.imul(L,wt)|0)+Math.imul(ie,mt)|0))<<13)|0;w=((v=v+Math.imul(ie,wt)|0)+(s>>>13)|0)+(tr>>>26)|0,tr&=67108863,g=Math.imul(et,Ne),s=(s=Math.imul(et,Xe))+Math.imul(Ke,Ne)|0,v=Math.imul(Ke,Xe),g=g+Math.imul(qe,it)|0,s=(s=s+Math.imul(qe,rt)|0)+Math.imul(Ye,it)|0,v=v+Math.imul(Ye,rt)|0,g=g+Math.imul(Re,ht)|0,s=(s=s+Math.imul(Re,_t)|0)+Math.imul(Ge,ht)|0,v=v+Math.imul(Ge,_t)|0,g=g+Math.imul(je,gt)|0,s=(s=s+Math.imul(je,vt)|0)+Math.imul(se,gt)|0,v=v+Math.imul(se,vt)|0,g=g+Math.imul(Te,st)|0,s=(s=s+Math.imul(Te,yt)|0)+Math.imul(Ie,st)|0,v=v+Math.imul(Ie,yt)|0,g=g+Math.imul(ke,mt)|0,s=(s=s+Math.imul(ke,wt)|0)+Math.imul(Be,mt)|0,v=v+Math.imul(Be,wt)|0;var ir=(w+(g=g+Math.imul(L,ct)|0)|0)+((8191&(s=(s=s+Math.imul(L,ft)|0)+Math.imul(ie,ct)|0))<<13)|0;w=((v=v+Math.imul(ie,ft)|0)+(s>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ut,Ne),s=(s=Math.imul(ut,Xe))+Math.imul(Qe,Ne)|0,v=Math.imul(Qe,Xe),g=g+Math.imul(et,it)|0,s=(s=s+Math.imul(et,rt)|0)+Math.imul(Ke,it)|0,v=v+Math.imul(Ke,rt)|0,g=g+Math.imul(qe,ht)|0,s=(s=s+Math.imul(qe,_t)|0)+Math.imul(Ye,ht)|0,v=v+Math.imul(Ye,_t)|0,g=g+Math.imul(Re,gt)|0,s=(s=s+Math.imul(Re,vt)|0)+Math.imul(Ge,gt)|0,v=v+Math.imul(Ge,vt)|0,g=g+Math.imul(je,st)|0,s=(s=s+Math.imul(je,yt)|0)+Math.imul(se,st)|0,v=v+Math.imul(se,yt)|0,g=g+Math.imul(Te,mt)|0,s=(s=s+Math.imul(Te,wt)|0)+Math.imul(Ie,mt)|0,v=v+Math.imul(Ie,wt)|0,g=g+Math.imul(ke,ct)|0,s=(s=s+Math.imul(ke,ft)|0)+Math.imul(Be,ct)|0,v=v+Math.imul(Be,ft)|0;var nr=(w+(g=g+Math.imul(L,St)|0)|0)+((8191&(s=(s=s+Math.imul(L,at)|0)+Math.imul(ie,St)|0))<<13)|0;w=((v=v+Math.imul(ie,at)|0)+(s>>>13)|0)+(nr>>>26)|0,nr&=67108863,g=Math.imul(le,Ne),s=(s=Math.imul(le,Xe))+Math.imul(J,Ne)|0,v=Math.imul(J,Xe),g=g+Math.imul(ut,it)|0,s=(s=s+Math.imul(ut,rt)|0)+Math.imul(Qe,it)|0,v=v+Math.imul(Qe,rt)|0,g=g+Math.imul(et,ht)|0,s=(s=s+Math.imul(et,_t)|0)+Math.imul(Ke,ht)|0,v=v+Math.imul(Ke,_t)|0,g=g+Math.imul(qe,gt)|0,s=(s=s+Math.imul(qe,vt)|0)+Math.imul(Ye,gt)|0,v=v+Math.imul(Ye,vt)|0,g=g+Math.imul(Re,st)|0,s=(s=s+Math.imul(Re,yt)|0)+Math.imul(Ge,st)|0,v=v+Math.imul(Ge,yt)|0,g=g+Math.imul(je,mt)|0,s=(s=s+Math.imul(je,wt)|0)+Math.imul(se,mt)|0,v=v+Math.imul(se,wt)|0,g=g+Math.imul(Te,ct)|0,s=(s=s+Math.imul(Te,ft)|0)+Math.imul(Ie,ct)|0,v=v+Math.imul(Ie,ft)|0,g=g+Math.imul(ke,St)|0,s=(s=s+Math.imul(ke,at)|0)+Math.imul(Be,St)|0,v=v+Math.imul(Be,at)|0;var rr=(w+(g=g+Math.imul(L,dt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Mt)|0)+Math.imul(ie,dt)|0))<<13)|0;w=((v=v+Math.imul(ie,Mt)|0)+(s>>>13)|0)+(rr>>>26)|0,rr&=67108863,g=Math.imul(ve,Ne),s=(s=Math.imul(ve,Xe))+Math.imul(xe,Ne)|0,v=Math.imul(xe,Xe),g=g+Math.imul(le,it)|0,s=(s=s+Math.imul(le,rt)|0)+Math.imul(J,it)|0,v=v+Math.imul(J,rt)|0,g=g+Math.imul(ut,ht)|0,s=(s=s+Math.imul(ut,_t)|0)+Math.imul(Qe,ht)|0,v=v+Math.imul(Qe,_t)|0,g=g+Math.imul(et,gt)|0,s=(s=s+Math.imul(et,vt)|0)+Math.imul(Ke,gt)|0,v=v+Math.imul(Ke,vt)|0,g=g+Math.imul(qe,st)|0,s=(s=s+Math.imul(qe,yt)|0)+Math.imul(Ye,st)|0,v=v+Math.imul(Ye,yt)|0,g=g+Math.imul(Re,mt)|0,s=(s=s+Math.imul(Re,wt)|0)+Math.imul(Ge,mt)|0,v=v+Math.imul(Ge,wt)|0,g=g+Math.imul(je,ct)|0,s=(s=s+Math.imul(je,ft)|0)+Math.imul(se,ct)|0,v=v+Math.imul(se,ft)|0,g=g+Math.imul(Te,St)|0,s=(s=s+Math.imul(Te,at)|0)+Math.imul(Ie,St)|0,v=v+Math.imul(Ie,at)|0,g=g+Math.imul(ke,dt)|0,s=(s=s+Math.imul(ke,Mt)|0)+Math.imul(Be,dt)|0,v=v+Math.imul(Be,Mt)|0;var qn=(w+(g=g+Math.imul(L,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Ct)|0)+Math.imul(ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(ie,Ct)|0)+(s>>>13)|0)+(qn>>>26)|0,qn&=67108863,g=Math.imul(ve,it),s=(s=Math.imul(ve,rt))+Math.imul(xe,it)|0,v=Math.imul(xe,rt),g=g+Math.imul(le,ht)|0,s=(s=s+Math.imul(le,_t)|0)+Math.imul(J,ht)|0,v=v+Math.imul(J,_t)|0,g=g+Math.imul(ut,gt)|0,s=(s=s+Math.imul(ut,vt)|0)+Math.imul(Qe,gt)|0,v=v+Math.imul(Qe,vt)|0,g=g+Math.imul(et,st)|0,s=(s=s+Math.imul(et,yt)|0)+Math.imul(Ke,st)|0,v=v+Math.imul(Ke,yt)|0,g=g+Math.imul(qe,mt)|0,s=(s=s+Math.imul(qe,wt)|0)+Math.imul(Ye,mt)|0,v=v+Math.imul(Ye,wt)|0,g=g+Math.imul(Re,ct)|0,s=(s=s+Math.imul(Re,ft)|0)+Math.imul(Ge,ct)|0,v=v+Math.imul(Ge,ft)|0,g=g+Math.imul(je,St)|0,s=(s=s+Math.imul(je,at)|0)+Math.imul(se,St)|0,v=v+Math.imul(se,at)|0,g=g+Math.imul(Te,dt)|0,s=(s=s+Math.imul(Te,Mt)|0)+Math.imul(Ie,dt)|0,v=v+Math.imul(Ie,Mt)|0;var ar=(w+(g=g+Math.imul(ke,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ke,Ct)|0)+Math.imul(Be,Tt)|0))<<13)|0;w=((v=v+Math.imul(Be,Ct)|0)+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,g=Math.imul(ve,ht),s=(s=Math.imul(ve,_t))+Math.imul(xe,ht)|0,v=Math.imul(xe,_t),g=g+Math.imul(le,gt)|0,s=(s=s+Math.imul(le,vt)|0)+Math.imul(J,gt)|0,v=v+Math.imul(J,vt)|0,g=g+Math.imul(ut,st)|0,s=(s=s+Math.imul(ut,yt)|0)+Math.imul(Qe,st)|0,v=v+Math.imul(Qe,yt)|0,g=g+Math.imul(et,mt)|0,s=(s=s+Math.imul(et,wt)|0)+Math.imul(Ke,mt)|0,v=v+Math.imul(Ke,wt)|0,g=g+Math.imul(qe,ct)|0,s=(s=s+Math.imul(qe,ft)|0)+Math.imul(Ye,ct)|0,v=v+Math.imul(Ye,ft)|0,g=g+Math.imul(Re,St)|0,s=(s=s+Math.imul(Re,at)|0)+Math.imul(Ge,St)|0,v=v+Math.imul(Ge,at)|0,g=g+Math.imul(je,dt)|0,s=(s=s+Math.imul(je,Mt)|0)+Math.imul(se,dt)|0,v=v+Math.imul(se,Mt)|0;var or=(w+(g=g+Math.imul(Te,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Te,Ct)|0)+Math.imul(Ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ie,Ct)|0)+(s>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ve,gt),s=(s=Math.imul(ve,vt))+Math.imul(xe,gt)|0,v=Math.imul(xe,vt),g=g+Math.imul(le,st)|0,s=(s=s+Math.imul(le,yt)|0)+Math.imul(J,st)|0,v=v+Math.imul(J,yt)|0,g=g+Math.imul(ut,mt)|0,s=(s=s+Math.imul(ut,wt)|0)+Math.imul(Qe,mt)|0,v=v+Math.imul(Qe,wt)|0,g=g+Math.imul(et,ct)|0,s=(s=s+Math.imul(et,ft)|0)+Math.imul(Ke,ct)|0,v=v+Math.imul(Ke,ft)|0,g=g+Math.imul(qe,St)|0,s=(s=s+Math.imul(qe,at)|0)+Math.imul(Ye,St)|0,v=v+Math.imul(Ye,at)|0,g=g+Math.imul(Re,dt)|0,s=(s=s+Math.imul(Re,Mt)|0)+Math.imul(Ge,dt)|0,v=v+Math.imul(Ge,Mt)|0;var Vi=(w+(g=g+Math.imul(je,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(je,Ct)|0)+Math.imul(se,Tt)|0))<<13)|0;w=((v=v+Math.imul(se,Ct)|0)+(s>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,g=Math.imul(ve,st),s=(s=Math.imul(ve,yt))+Math.imul(xe,st)|0,v=Math.imul(xe,yt),g=g+Math.imul(le,mt)|0,s=(s=s+Math.imul(le,wt)|0)+Math.imul(J,mt)|0,v=v+Math.imul(J,wt)|0,g=g+Math.imul(ut,ct)|0,s=(s=s+Math.imul(ut,ft)|0)+Math.imul(Qe,ct)|0,v=v+Math.imul(Qe,ft)|0,g=g+Math.imul(et,St)|0,s=(s=s+Math.imul(et,at)|0)+Math.imul(Ke,St)|0,v=v+Math.imul(Ke,at)|0,g=g+Math.imul(qe,dt)|0,s=(s=s+Math.imul(qe,Mt)|0)+Math.imul(Ye,dt)|0,v=v+Math.imul(Ye,Mt)|0;var $n=(w+(g=g+Math.imul(Re,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Re,Ct)|0)+Math.imul(Ge,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ge,Ct)|0)+(s>>>13)|0)+($n>>>26)|0,$n&=67108863,g=Math.imul(ve,mt),s=(s=Math.imul(ve,wt))+Math.imul(xe,mt)|0,v=Math.imul(xe,wt),g=g+Math.imul(le,ct)|0,s=(s=s+Math.imul(le,ft)|0)+Math.imul(J,ct)|0,v=v+Math.imul(J,ft)|0,g=g+Math.imul(ut,St)|0,s=(s=s+Math.imul(ut,at)|0)+Math.imul(Qe,St)|0,v=v+Math.imul(Qe,at)|0,g=g+Math.imul(et,dt)|0,s=(s=s+Math.imul(et,Mt)|0)+Math.imul(Ke,dt)|0,v=v+Math.imul(Ke,Mt)|0;var Ni=(w+(g=g+Math.imul(qe,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(qe,Ct)|0)+Math.imul(Ye,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ye,Ct)|0)+(s>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,g=Math.imul(ve,ct),s=(s=Math.imul(ve,ft))+Math.imul(xe,ct)|0,v=Math.imul(xe,ft),g=g+Math.imul(le,St)|0,s=(s=s+Math.imul(le,at)|0)+Math.imul(J,St)|0,v=v+Math.imul(J,at)|0,g=g+Math.imul(ut,dt)|0,s=(s=s+Math.imul(ut,Mt)|0)+Math.imul(Qe,dt)|0,v=v+Math.imul(Qe,Mt)|0;var Wn=(w+(g=g+Math.imul(et,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(et,Ct)|0)+Math.imul(Ke,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ke,Ct)|0)+(s>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,g=Math.imul(ve,St),s=(s=Math.imul(ve,at))+Math.imul(xe,St)|0,v=Math.imul(xe,at),g=g+Math.imul(le,dt)|0,s=(s=s+Math.imul(le,Mt)|0)+Math.imul(J,dt)|0,v=v+Math.imul(J,Mt)|0;var Ln=(w+(g=g+Math.imul(ut,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ut,Ct)|0)+Math.imul(Qe,Tt)|0))<<13)|0;w=((v=v+Math.imul(Qe,Ct)|0)+(s>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,g=Math.imul(ve,dt),s=(s=Math.imul(ve,Mt))+Math.imul(xe,dt)|0,v=Math.imul(xe,Mt);var vi=(w+(g=g+Math.imul(le,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(le,Ct)|0)+Math.imul(J,Tt)|0))<<13)|0;w=((v=v+Math.imul(J,Ct)|0)+(s>>>13)|0)+(vi>>>26)|0,vi&=67108863;var Un=(w+(g=Math.imul(ve,Tt))|0)+((8191&(s=(s=Math.imul(ve,Ct))+Math.imul(xe,Tt)|0))<<13)|0;return w=((v=Math.imul(xe,Ct))+(s>>>13)|0)+(Un>>>26)|0,Un&=67108863,b[0]=Fn,b[1]=Ri,b[2]=Oi,b[3]=zn,b[4]=jn,b[5]=tr,b[6]=ir,b[7]=nr,b[8]=rr,b[9]=qn,b[10]=ar,b[11]=or,b[12]=Vi,b[13]=$n,b[14]=Ni,b[15]=Wn,b[16]=Ln,b[17]=vi,b[18]=Un,0!==w&&(b[19]=w,f.length++),f};function X(y,o,l){return(new U).mulp(y,o,l)}function U(y,o){this.x=y,this.y=o}Math.imul||(N=B),p.prototype.mulTo=function(o,l){var f,u=this.length+o.length;return f=10===this.length&&10===o.length?N(this,o,l):u<63?B(this,o,l):u<1024?function z(y,o,l){l.negative=o.negative^y.negative,l.length=y.length+o.length;for(var f=0,u=0,h=0;h<l.length-1;h++){var b=u;u=0;for(var w=67108863&f,g=Math.min(h,o.length-1),s=Math.max(0,h-y.length+1);s<=g;s++){var ie=(0|y.words[h-s])*(0|o.words[s]),Se=67108863&ie;w=67108863&(Se=Se+w|0),u+=(b=(b=b+(ie/67108864|0)|0)+(Se>>>26)|0)>>>26,b&=67108863}l.words[h]=w,f=b,b=u}return 0!==f?l.words[h]=f:l.length--,l.strip()}(this,o,l):X(this,o,l),f},U.prototype.makeRBT=function(o){for(var l=new Array(o),f=p.prototype._countBits(o)-1,u=0;u<o;u++)l[u]=this.revBin(u,f,o);return l},U.prototype.revBin=function(o,l,f){if(0===o||o===f-1)return o;for(var u=0,h=0;h<l;h++)u|=(1&o)<<l-h-1,o>>=1;return u},U.prototype.permute=function(o,l,f,u,h,b){for(var w=0;w<b;w++)u[w]=l[o[w]],h[w]=f[o[w]]},U.prototype.transform=function(o,l,f,u,h,b){this.permute(b,o,l,f,u,h);for(var w=1;w<h;w<<=1)for(var g=w<<1,s=Math.cos(2*Math.PI/g),v=Math.sin(2*Math.PI/g),$=0;$<h;$+=g)for(var L=s,ie=v,Se=0;Se<w;Se++){var ke=f[$+Se],Be=u[$+Se],Pe=f[$+Se+w],Te=u[$+Se+w],Ie=L*Pe-ie*Te;Te=L*Te+ie*Pe,f[$+Se]=ke+(Pe=Ie),u[$+Se]=Be+Te,f[$+Se+w]=ke-Pe,u[$+Se+w]=Be-Te,Se!==g&&(Ie=s*L-v*ie,ie=s*ie+v*L,L=Ie)}},U.prototype.guessLen13b=function(o,l){var f=1|Math.max(l,o),u=1&f,h=0;for(f=f/2|0;f;f>>>=1)h++;return 1<<h+1+u},U.prototype.conjugate=function(o,l,f){if(!(f<=1))for(var u=0;u<f/2;u++){var h=o[u];o[u]=o[f-u-1],o[f-u-1]=h,h=l[u],l[u]=-l[f-u-1],l[f-u-1]=-h}},U.prototype.normalize13b=function(o,l){for(var f=0,u=0;u<l/2;u++){var h=8192*Math.round(o[2*u+1]/l)+Math.round(o[2*u]/l)+f;o[u]=67108863&h,f=h<67108864?0:h/67108864|0}return o},U.prototype.convert13b=function(o,l,f,u){for(var h=0,b=0;b<l;b++)f[2*b]=8191&(h+=0|o[b]),f[2*b+1]=8191&(h>>>=13),h>>>=13;for(b=2*l;b<u;++b)f[b]=0;I(0===h),I(0==(-8192&h))},U.prototype.stub=function(o){for(var l=new Array(o),f=0;f<o;f++)l[f]=0;return l},U.prototype.mulp=function(o,l,f){var u=2*this.guessLen13b(o.length,l.length),h=this.makeRBT(u),b=this.stub(u),w=new Array(u),g=new Array(u),s=new Array(u),v=new Array(u),$=new Array(u),L=new Array(u),ie=f.words;ie.length=u,this.convert13b(o.words,o.length,w,u),this.convert13b(l.words,l.length,v,u),this.transform(w,b,g,s,u,h),this.transform(v,b,$,L,u,h);for(var Se=0;Se<u;Se++){var ke=g[Se]*$[Se]-s[Se]*L[Se];s[Se]=g[Se]*L[Se]+s[Se]*$[Se],g[Se]=ke}return this.conjugate(g,s,u),this.transform(g,s,ie,b,u,h),this.conjugate(ie,b,u),this.normalize13b(ie,u),f.negative=o.negative^l.negative,f.length=o.length+l.length,f.strip()},p.prototype.mul=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},p.prototype.mulf=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),X(this,o,l)},p.prototype.imul=function(o){return this.clone().mulTo(o,this)},p.prototype.imuln=function(o){I("number"==typeof o),I(o<67108864);for(var l=0,f=0;f<this.length;f++){var u=(0|this.words[f])*o,h=(67108863&u)+(67108863&l);l>>=26,l+=u/67108864|0,l+=h>>>26,this.words[f]=67108863&h}return 0!==l&&(this.words[f]=l,this.length++),this},p.prototype.muln=function(o){return this.clone().imuln(o)},p.prototype.sqr=function(){return this.mul(this)},p.prototype.isqr=function(){return this.imul(this.clone())},p.prototype.pow=function(o){var l=function C(y){for(var o=new Array(y.bitLength()),l=0;l<o.length;l++){var u=l%26;o[l]=(y.words[l/26|0]&1<<u)>>>u}return o}(o);if(0===l.length)return new p(1);for(var f=this,u=0;u<l.length&&0===l[u];u++,f=f.sqr());if(++u<l.length)for(var h=f.sqr();u<l.length;u++,h=h.sqr())0!==l[u]&&(f=f.mul(h));return f},p.prototype.iushln=function(o){I("number"==typeof o&&o>=0);var h,l=o%26,f=(o-l)/26,u=67108863>>>26-l<<26-l;if(0!==l){var b=0;for(h=0;h<this.length;h++){var w=this.words[h]&u;this.words[h]=(0|this.words[h])-w<<l|b,b=w>>>26-l}b&&(this.words[h]=b,this.length++)}if(0!==f){for(h=this.length-1;h>=0;h--)this.words[h+f]=this.words[h];for(h=0;h<f;h++)this.words[h]=0;this.length+=f}return this.strip()},p.prototype.ishln=function(o){return I(0===this.negative),this.iushln(o)},p.prototype.iushrn=function(o,l,f){var u;I("number"==typeof o&&o>=0),u=l?(l-l%26)/26:0;var h=o%26,b=Math.min((o-h)/26,this.length),w=67108863^67108863>>>h<<h,g=f;if(u-=b,u=Math.max(0,u),g){for(var s=0;s<b;s++)g.words[s]=this.words[s];g.length=b}if(0!==b)if(this.length>b)for(this.length-=b,s=0;s<this.length;s++)this.words[s]=this.words[s+b];else this.words[0]=0,this.length=1;var v=0;for(s=this.length-1;s>=0&&(0!==v||s>=u);s--){var $=0|this.words[s];this.words[s]=v<<26-h|$>>>h,v=$&w}return g&&0!==v&&(g.words[g.length++]=v),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},p.prototype.ishrn=function(o,l,f){return I(0===this.negative),this.iushrn(o,l,f)},p.prototype.shln=function(o){return this.clone().ishln(o)},p.prototype.ushln=function(o){return this.clone().iushln(o)},p.prototype.shrn=function(o){return this.clone().ishrn(o)},p.prototype.ushrn=function(o){return this.clone().iushrn(o)},p.prototype.testn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return!(this.length<=f||!(this.words[f]&1<<l))},p.prototype.imaskn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return I(0===this.negative,"imaskn works only with positive numbers"),this.length<=f?this:(0!==l&&f++,this.length=Math.min(f,this.length),0!==l&&(this.words[this.length-1]&=67108863^67108863>>>l<<l),this.strip())},p.prototype.maskn=function(o){return this.clone().imaskn(o)},p.prototype.iaddn=function(o){return I("number"==typeof o),I(o<67108864),o<0?this.isubn(-o):0!==this.negative?1===this.length&&(0|this.words[0])<o?(this.words[0]=o-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},p.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},p.prototype.isubn=function(o){if(I("number"==typeof o),I(o<67108864),o<0)return this.iaddn(-o);if(0!==this.negative)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},p.prototype.addn=function(o){return this.clone().iaddn(o)},p.prototype.subn=function(o){return this.clone().isubn(o)},p.prototype.iabs=function(){return this.negative=0,this},p.prototype.abs=function(){return this.clone().iabs()},p.prototype._ishlnsubmul=function(o,l,f){var h;this._expand(o.length+f);var b,w=0;for(h=0;h<o.length;h++){b=(0|this.words[h+f])+w;var g=(0|o.words[h])*l;w=((b-=67108863&g)>>26)-(g/67108864|0),this.words[h+f]=67108863&b}for(;h<this.length-f;h++)w=(b=(0|this.words[h+f])+w)>>26,this.words[h+f]=67108863&b;if(0===w)return this.strip();for(I(-1===w),w=0,h=0;h<this.length;h++)w=(b=-(0|this.words[h])+w)>>26,this.words[h]=67108863&b;return this.negative=1,this.strip()},p.prototype._wordDiv=function(o,l){var f,u=this.clone(),h=o,b=0|h.words[h.length-1];0!=(f=26-this._countBits(b))&&(h=h.ushln(f),u.iushln(f),b=0|h.words[h.length-1]);var s,g=u.length-h.length;if("mod"!==l){(s=new p(null)).length=g+1,s.words=new Array(s.length);for(var v=0;v<s.length;v++)s.words[v]=0}var $=u.clone()._ishlnsubmul(h,1,g);0===$.negative&&(u=$,s&&(s.words[g]=1));for(var L=g-1;L>=0;L--){var ie=67108864*(0|u.words[h.length+L])+(0|u.words[h.length+L-1]);for(ie=Math.min(ie/b|0,67108863),u._ishlnsubmul(h,ie,L);0!==u.negative;)ie--,u.negative=0,u._ishlnsubmul(h,1,L),u.isZero()||(u.negative^=1);s&&(s.words[L]=ie)}return s&&s.strip(),u.strip(),"div"!==l&&0!==f&&u.iushrn(f),{div:s||null,mod:u}},p.prototype.divmod=function(o,l,f){return I(!o.isZero()),this.isZero()?{div:new p(0),mod:new p(0)}:0!==this.negative&&0===o.negative?(b=this.neg().divmod(o,l),"mod"!==l&&(u=b.div.neg()),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.iadd(o)),{div:u,mod:h}):0===this.negative&&0!==o.negative?(b=this.divmod(o.neg(),l),"mod"!==l&&(u=b.div.neg()),{div:u,mod:b.mod}):0!=(this.negative&o.negative)?(b=this.neg().divmod(o.neg(),l),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.isub(o)),{div:b.div,mod:h}):o.length>this.length||this.cmp(o)<0?{div:new p(0),mod:this}:1===o.length?"div"===l?{div:this.divn(o.words[0]),mod:null}:"mod"===l?{div:null,mod:new p(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new p(this.modn(o.words[0]))}:this._wordDiv(o,l);var u,h,b},p.prototype.div=function(o){return this.divmod(o,"div",!1).div},p.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},p.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},p.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var f=0!==l.div.negative?l.mod.isub(o):l.mod,u=o.ushrn(1),h=o.andln(1),b=f.cmp(u);return b<0||1===h&&0===b?l.div:0!==l.div.negative?l.div.isubn(1):l.div.iaddn(1)},p.prototype.modn=function(o){I(o<=67108863);for(var l=(1<<26)%o,f=0,u=this.length-1;u>=0;u--)f=(l*f+(0|this.words[u]))%o;return f},p.prototype.idivn=function(o){I(o<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var u=(0|this.words[f])+67108864*l;this.words[f]=u/o|0,l=u%o}return this.strip()},p.prototype.divn=function(o){return this.clone().idivn(o)},p.prototype.egcd=function(o){I(0===o.negative),I(!o.isZero());var l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=new p(0),w=new p(1),g=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++g;for(var s=f.clone(),v=l.clone();!l.isZero();){for(var $=0,L=1;0==(l.words[0]&L)&&$<26;++$,L<<=1);if($>0)for(l.iushrn($);$-- >0;)(u.isOdd()||h.isOdd())&&(u.iadd(s),h.isub(v)),u.iushrn(1),h.iushrn(1);for(var ie=0,Se=1;0==(f.words[0]&Se)&&ie<26;++ie,Se<<=1);if(ie>0)for(f.iushrn(ie);ie-- >0;)(b.isOdd()||w.isOdd())&&(b.iadd(s),w.isub(v)),b.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(b),h.isub(w)):(f.isub(l),b.isub(u),w.isub(h))}return{a:b,b:w,gcd:f.iushln(g)}},p.prototype._invmp=function(o){I(0===o.negative),I(!o.isZero());var $,l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,g=1;0==(l.words[0]&g)&&w<26;++w,g<<=1);if(w>0)for(l.iushrn(w);w-- >0;)u.isOdd()&&u.iadd(b),u.iushrn(1);for(var s=0,v=1;0==(f.words[0]&v)&&s<26;++s,v<<=1);if(s>0)for(f.iushrn(s);s-- >0;)h.isOdd()&&h.iadd(b),h.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(h)):(f.isub(l),h.isub(u))}return($=0===l.cmpn(1)?u:h).cmpn(0)<0&&$.iadd(o),$},p.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),f=o.clone();l.negative=0,f.negative=0;for(var u=0;l.isEven()&&f.isEven();u++)l.iushrn(1),f.iushrn(1);for(;;){for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var h=l.cmp(f);if(h<0){var b=l;l=f,f=b}else if(0===h||0===f.cmpn(1))break;l.isub(f)}return f.iushln(u)},p.prototype.invm=function(o){return this.egcd(o).a.umod(o)},p.prototype.isEven=function(){return 0==(1&this.words[0])},p.prototype.isOdd=function(){return 1==(1&this.words[0])},p.prototype.andln=function(o){return this.words[0]&o},p.prototype.bincn=function(o){I("number"==typeof o);var l=o%26,f=(o-l)/26,u=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=u,this;for(var h=u,b=f;0!==h&&b<this.length;b++){var w=0|this.words[b];h=(w+=h)>>>26,this.words[b]=w&=67108863}return 0!==h&&(this.words[b]=h,this.length++),this},p.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},p.prototype.cmpn=function(o){var f,l=o<0;if(0!==this.negative&&!l)return-1;if(0===this.negative&&l)return 1;if(this.strip(),this.length>1)f=1;else{l&&(o=-o),I(o<=67108863,"Number is too big");var u=0|this.words[0];f=u===o?0:u<o?-1:1}return 0!==this.negative?0|-f:f},p.prototype.cmp=function(o){if(0!==this.negative&&0===o.negative)return-1;if(0===this.negative&&0!==o.negative)return 1;var l=this.ucmp(o);return 0!==this.negative?0|-l:l},p.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var u=0|this.words[f],h=0|o.words[f];if(u!==h){u<h?l=-1:u>h&&(l=1);break}}return l},p.prototype.gtn=function(o){return 1===this.cmpn(o)},p.prototype.gt=function(o){return 1===this.cmp(o)},p.prototype.gten=function(o){return this.cmpn(o)>=0},p.prototype.gte=function(o){return this.cmp(o)>=0},p.prototype.ltn=function(o){return-1===this.cmpn(o)},p.prototype.lt=function(o){return-1===this.cmp(o)},p.prototype.lten=function(o){return this.cmpn(o)<=0},p.prototype.lte=function(o){return this.cmp(o)<=0},p.prototype.eqn=function(o){return 0===this.cmpn(o)},p.prototype.eq=function(o){return 0===this.cmp(o)},p.red=function(o){return new we(o)},p.prototype.toRed=function(o){return I(!this.red,"Already a number in reduction context"),I(0===this.negative,"red works only with positives"),o.convertTo(this)._forceRed(o)},p.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},p.prototype._forceRed=function(o){return this.red=o,this},p.prototype.forceRed=function(o){return I(!this.red,"Already a number in reduction context"),this._forceRed(o)},p.prototype.redAdd=function(o){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},p.prototype.redIAdd=function(o){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},p.prototype.redSub=function(o){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},p.prototype.redISub=function(o){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},p.prototype.redShl=function(o){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},p.prototype.redMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},p.prototype.redIMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},p.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},p.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},p.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},p.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},p.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},p.prototype.redPow=function(o){return I(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Z={k256:null,p224:null,p192:null,p25519:null};function ee(y,o){this.name=y,this.p=new p(o,16),this.n=this.p.bitLength(),this.k=new p(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function ae(){ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function ge(){ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Ce(){ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function De(){ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function we(y){if("string"==typeof y){var o=p._prime(y);this.m=o.p,this.prime=o}else I(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}function Oe(y){we.call(this,y),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new p(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ee.prototype._tmp=function(){var o=new p(null);return o.words=new Array(Math.ceil(this.n/13)),o},ee.prototype.ireduce=function(o){var f,l=o;do{this.split(l,this.tmp),f=(l=(l=this.imulK(l)).iadd(this.tmp)).bitLength()}while(f>this.n);var u=f<this.n?-1:l.ucmp(this.p);return 0===u?(l.words[0]=0,l.length=1):u>0?l.isub(this.p):void 0!==l.strip?l.strip():l._strip(),l},ee.prototype.split=function(o,l){o.iushrn(this.n,0,l)},ee.prototype.imulK=function(o){return o.imul(this.k)},G(ae,ee),ae.prototype.split=function(o,l){for(var f=4194303,u=Math.min(o.length,9),h=0;h<u;h++)l.words[h]=o.words[h];if(l.length=u,o.length<=9)return o.words[0]=0,void(o.length=1);var b=o.words[9];for(l.words[l.length++]=b&f,h=10;h<o.length;h++){var w=0|o.words[h];o.words[h-10]=(w&f)<<4|b>>>22,b=w}o.words[h-10]=b>>>=22,o.length-=0===b&&o.length>10?10:9},ae.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,f=0;f<o.length;f++){var u=0|o.words[f];o.words[f]=67108863&(l+=977*u),l=64*u+(l/67108864|0)}return 0===o.words[o.length-1]&&(o.length--,0===o.words[o.length-1]&&o.length--),o},G(ge,ee),G(Ce,ee),G(De,ee),De.prototype.imulK=function(o){for(var l=0,f=0;f<o.length;f++){var u=19*(0|o.words[f])+l,h=67108863&u;u>>>=26,o.words[f]=h,l=u}return 0!==l&&(o.words[o.length++]=l),o},p._prime=function(o){if(Z[o])return Z[o];var l;if("k256"===o)l=new ae;else if("p224"===o)l=new ge;else if("p192"===o)l=new Ce;else{if("p25519"!==o)throw new Error("Unknown prime "+o);l=new De}return Z[o]=l,l},we.prototype._verify1=function(o){I(0===o.negative,"red works only with positives"),I(o.red,"red works only with red numbers")},we.prototype._verify2=function(o,l){I(0==(o.negative|l.negative),"red works only with positives"),I(o.red&&o.red===l.red,"red works only with red numbers")},we.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},we.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},we.prototype.add=function(o,l){this._verify2(o,l);var f=o.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},we.prototype.iadd=function(o,l){this._verify2(o,l);var f=o.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},we.prototype.sub=function(o,l){this._verify2(o,l);var f=o.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},we.prototype.isub=function(o,l){this._verify2(o,l);var f=o.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},we.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},we.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},we.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},we.prototype.isqr=function(o){return this.imul(o,o.clone())},we.prototype.sqr=function(o){return this.mul(o,o)},we.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(I(l%2==1),3===l){var f=this.m.add(new p(1)).iushrn(2);return this.pow(o,f)}for(var u=this.m.subn(1),h=0;!u.isZero()&&0===u.andln(1);)h++,u.iushrn(1);I(!u.isZero());var b=new p(1).toRed(this),w=b.redNeg(),g=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new p(2*s*s).toRed(this);0!==this.pow(s,g).cmp(w);)s.redIAdd(w);for(var v=this.pow(s,u),$=this.pow(o,u.addn(1).iushrn(1)),L=this.pow(o,u),ie=h;0!==L.cmp(b);){for(var Se=L,ke=0;0!==Se.cmp(b);ke++)Se=Se.redSqr();I(ke<ie);var Be=this.pow(v,new p(1).iushln(ie-ke-1));$=$.redMul(Be),v=Be.redSqr(),L=L.redMul(v),ie=ke}return $},we.prototype.invm=function(o){var l=o._invmp(this.m);return 0!==l.negative?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},we.prototype.pow=function(o,l){if(l.isZero())return new p(1).toRed(this);if(0===l.cmpn(1))return o.clone();var u=new Array(16);u[0]=new p(1).toRed(this),u[1]=o;for(var h=2;h<u.length;h++)u[h]=this.mul(u[h-1],o);var b=u[0],w=0,g=0,s=l.bitLength()%26;for(0===s&&(s=26),h=l.length-1;h>=0;h--){for(var v=l.words[h],$=s-1;$>=0;$--){var L=v>>$&1;b!==u[0]&&(b=this.sqr(b)),0!==L||0!==w?(w<<=1,w|=L,(4==++g||0===h&&0===$)&&(b=this.mul(b,u[w]),g=0,w=0)):g=0}s=26}return b},we.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},we.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},p.mont=function(o){return new Oe(o)},G(Oe,we),Oe.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Oe.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},Oe.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var f=o.imul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new p(0)._forceRed(this);var f=o.mul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.invm=function(o){return this.imod(o._invmp(this.m).mul(this.r2))._forceRed(this)}}(ye=H.nmd(ye),this)},6386:(ye,ue,H)=>{"use strict";var j=H(3894),W=H(8095),I=H(5634),G=H(5244),p=H(1052);function k(P){p.call(this,"digest"),this._hash=P}j(k,p),k.prototype._update=function(P){this._hash.update(P)},k.prototype._final=function(){return this._hash.digest()},ye.exports=function(E){return"md5"===(E=E.toLowerCase())?new W:"rmd160"===E||"ripemd160"===E?new I:new k(G(E))}},5640:(ye,ue,H)=>{var j=H(8095);ye.exports=function(W){return(new j).update(W).digest()}},4529:(ye,ue,H)=>{"use strict";var j=H(3894),W=H(7309),I=H(1052),G=H(3502).Buffer,p=H(5640),k=H(5634),P=H(5244),E=G.alloc(128);function R(x,S){I.call(this,"digest"),"string"==typeof S&&(S=G.from(S));var O="sha512"===x||"sha384"===x?128:64;this._alg=x,this._key=S,S.length>O?S=("rmd160"===x?new k:P(x)).update(S).digest():S.length<O&&(S=G.concat([S,E],O));for(var B=this._ipad=G.allocUnsafe(O),N=this._opad=G.allocUnsafe(O),z=0;z<O;z++)B[z]=54^S[z],N[z]=92^S[z];this._hash="rmd160"===x?new k:P(x),this._hash.update(B)}j(R,I),R.prototype._update=function(x){this._hash.update(x)},R.prototype._final=function(){var x=this._hash.digest();return("rmd160"===this._alg?new k:P(this._alg)).update(this._opad).update(x).digest()},ye.exports=function(S,O){return"rmd160"===(S=S.toLowerCase())||"ripemd160"===S?new R("rmd160",O):"md5"===S?new W(p,O):new R(S,O)}},7309:(ye,ue,H)=>{"use strict";var j=H(3894),W=H(3502).Buffer,I=H(1052),G=W.alloc(128),p=64;function k(P,E){I.call(this,"digest"),"string"==typeof E&&(E=W.from(E)),this._alg=P,this._key=E,E.length>p?E=P(E):E.length<p&&(E=W.concat([E,G],p));for(var R=this._ipad=W.allocUnsafe(p),x=this._opad=W.allocUnsafe(p),S=0;S<p;S++)R[S]=54^E[S],x[S]=92^E[S];this._hash=[R]}j(k,I),k.prototype._update=function(P){this._hash.push(P)},k.prototype._final=function(){var P=this._alg(W.concat(this._hash));return this._alg(W.concat([this._opad,P]))},ye.exports=k},1348:(ye,ue,H)=>{"use strict";ue.randomBytes=ue.rng=ue.pseudoRandomBytes=ue.prng=H(3753),ue.createHash=ue.Hash=H(6386),ue.createHmac=ue.Hmac=H(4529);var j=H(7793),W=Object.keys(j),I=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(W);ue.getHashes=function(){return I};var G=H(9357);ue.pbkdf2=G.pbkdf2,ue.pbkdf2Sync=G.pbkdf2Sync;var p=H(5255);ue.Cipher=p.Cipher,ue.createCipher=p.createCipher,ue.Cipheriv=p.Cipheriv,ue.createCipheriv=p.createCipheriv,ue.Decipher=p.Decipher,ue.createDecipher=p.createDecipher,ue.Decipheriv=p.Decipheriv,ue.createDecipheriv=p.createDecipheriv,ue.getCiphers=p.getCiphers,ue.listCiphers=p.listCiphers;var k=H(8829);ue.DiffieHellmanGroup=k.DiffieHellmanGroup,ue.createDiffieHellmanGroup=k.createDiffieHellmanGroup,ue.getDiffieHellman=k.getDiffieHellman,ue.createDiffieHellman=k.createDiffieHellman,ue.DiffieHellman=k.DiffieHellman;var P=H(3923);ue.createSign=P.createSign,ue.Sign=P.Sign,ue.createVerify=P.createVerify,ue.Verify=P.Verify,ue.createECDH=H(4746);var E=H(3701);ue.publicEncrypt=E.publicEncrypt,ue.privateEncrypt=E.privateEncrypt,ue.publicDecrypt=E.publicDecrypt,ue.privateDecrypt=E.privateDecrypt;var R=H(4275);ue.randomFill=R.randomFill,ue.randomFillSync=R.randomFillSync,ue.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},ue.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},7466:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(8319),H(9493),H(7865),H(3057),function(){var W=j,G=W.lib.BlockCipher,p=W.algo,k=[],P=[],E=[],R=[],x=[],S=[],O=[],C=[],B=[],N=[];!function(){for(var U=[],Z=0;Z<256;Z++)U[Z]=Z<128?Z<<1:Z<<1^283;var ee=0,ae=0;for(Z=0;Z<256;Z++){var ge=ae^ae<<1^ae<<2^ae<<3^ae<<4;k[ee]=ge=ge>>>8^255&ge^99,P[ge]=ee;var Oe,Ce=U[ee],De=U[Ce],we=U[De];E[ee]=(Oe=257*U[ge]^16843008*ge)<<24|Oe>>>8,R[ee]=Oe<<16|Oe>>>16,x[ee]=Oe<<8|Oe>>>24,S[ee]=Oe,O[ge]=(Oe=16843009*we^65537*De^257*Ce^16843008*ee)<<24|Oe>>>8,C[ge]=Oe<<16|Oe>>>16,B[ge]=Oe<<8|Oe>>>24,N[ge]=Oe,ee?(ee=Ce^U[U[U[we^Ce]]],ae^=U[U[ae]]):ee=ae=1}}();var z=[0,1,2,4,8,16,32,64,128,27,54],X=p.AES=G.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var Z=this._keyPriorReset=this._key,ee=Z.words,ae=Z.sigBytes/4,Ce=4*((this._nRounds=ae+6)+1),De=this._keySchedule=[],we=0;we<Ce;we++)we<ae?De[we]=ee[we]:(U=De[we-1],we%ae?ae>6&&we%ae==4&&(U=k[U>>>24]<<24|k[U>>>16&255]<<16|k[U>>>8&255]<<8|k[255&U]):(U=k[(U=U<<8|U>>>24)>>>24]<<24|k[U>>>16&255]<<16|k[U>>>8&255]<<8|k[255&U],U^=z[we/ae|0]<<24),De[we]=De[we-ae]^U);for(var Oe=this._invKeySchedule=[],y=0;y<Ce;y++){if(we=Ce-y,y%4)var U=De[we];else U=De[we-4];Oe[y]=y<4||we<=4?U:O[k[U>>>24]]^C[k[U>>>16&255]]^B[k[U>>>8&255]]^N[k[255&U]]}}},encryptBlock:function(U,Z){this._doCryptBlock(U,Z,this._keySchedule,E,R,x,S,k)},decryptBlock:function(U,Z){var ee=U[Z+1];U[Z+1]=U[Z+3],U[Z+3]=ee,this._doCryptBlock(U,Z,this._invKeySchedule,O,C,B,N,P),ee=U[Z+1],U[Z+1]=U[Z+3],U[Z+3]=ee},_doCryptBlock:function(U,Z,ee,ae,ge,Ce,De,we){for(var Oe=this._nRounds,y=U[Z]^ee[0],o=U[Z+1]^ee[1],l=U[Z+2]^ee[2],f=U[Z+3]^ee[3],u=4,h=1;h<Oe;h++){var b=ae[y>>>24]^ge[o>>>16&255]^Ce[l>>>8&255]^De[255&f]^ee[u++],w=ae[o>>>24]^ge[l>>>16&255]^Ce[f>>>8&255]^De[255&y]^ee[u++],g=ae[l>>>24]^ge[f>>>16&255]^Ce[y>>>8&255]^De[255&o]^ee[u++],s=ae[f>>>24]^ge[y>>>16&255]^Ce[o>>>8&255]^De[255&l]^ee[u++];y=b,o=w,l=g,f=s}b=(we[y>>>24]<<24|we[o>>>16&255]<<16|we[l>>>8&255]<<8|we[255&f])^ee[u++],w=(we[o>>>24]<<24|we[l>>>16&255]<<16|we[f>>>8&255]<<8|we[255&y])^ee[u++],g=(we[l>>>24]<<24|we[f>>>16&255]<<16|we[y>>>8&255]<<8|we[255&o])^ee[u++],s=(we[f>>>24]<<24|we[y>>>16&255]<<16|we[o>>>8&255]<<8|we[255&l])^ee[u++],U[Z]=b,U[Z+1]=w,U[Z+2]=g,U[Z+3]=s},keySize:8});W.AES=G._createHelper(X)}(),j.AES)},3057:function(ye,ue,H){var I,G,p,k,P,E,x,O,C,N,z,X,Z,ae,Ce,De,Oe,y,j;ye.exports=(j=H(7585),H(7865),void(j.lib.Cipher||(I=j,G=I.lib,p=G.Base,k=G.WordArray,P=G.BufferedBlockAlgorithm,E=I.enc,x=E.Base64,O=I.algo.EvpKDF,C=G.Cipher=P.extend({cfg:p.extend(),createEncryptor:function(o,l){return this.create(this._ENC_XFORM_MODE,o,l)},createDecryptor:function(o,l){return this.create(this._DEC_XFORM_MODE,o,l)},init:function(o,l,f){this.cfg=this.cfg.extend(f),this._xformMode=o,this._key=l,this.reset()},reset:function(){P.reset.call(this),this._doReset()},process:function(o){return this._append(o),this._process()},finalize:function(o){return o&&this._append(o),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function o(l){return"string"==typeof l?y:De}return function(l){return{encrypt:function(f,u,h){return o(u).encrypt(l,f,u,h)},decrypt:function(f,u,h){return o(u).decrypt(l,f,u,h)}}}}()}),G.StreamCipher=C.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),N=I.mode={},z=G.BlockCipherMode=p.extend({createEncryptor:function(o,l){return this.Encryptor.create(o,l)},createDecryptor:function(o,l){return this.Decryptor.create(o,l)},init:function(o,l){this._cipher=o,this._iv=l}}),X=N.CBC=function(){var o=z.extend();function l(f,u,h){var b,w=this._iv;w?(b=w,this._iv=undefined):b=this._prevBlock;for(var g=0;g<h;g++)f[u+g]^=b[g]}return o.Encryptor=o.extend({processBlock:function(f,u){var h=this._cipher,b=h.blockSize;l.call(this,f,u,b),h.encryptBlock(f,u),this._prevBlock=f.slice(u,u+b)}}),o.Decryptor=o.extend({processBlock:function(f,u){var h=this._cipher,b=h.blockSize,w=f.slice(u,u+b);h.decryptBlock(f,u),l.call(this,f,u,b),this._prevBlock=w}}),o}(),Z=(I.pad={}).Pkcs7={pad:function(o,l){for(var f=4*l,u=f-o.sigBytes%f,h=u<<24|u<<16|u<<8|u,b=[],w=0;w<u;w+=4)b.push(h);var g=k.create(b,u);o.concat(g)},unpad:function(o){o.sigBytes-=255&o.words[o.sigBytes-1>>>2]}},G.BlockCipher=C.extend({cfg:C.cfg.extend({mode:X,padding:Z}),reset:function(){var o;C.reset.call(this);var l=this.cfg,f=l.iv,u=l.mode;this._xformMode==this._ENC_XFORM_MODE?o=u.createEncryptor:(o=u.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==o?this._mode.init(this,f&&f.words):(this._mode=o.call(u,this,f&&f.words),this._mode.__creator=o)},_doProcessBlock:function(o,l){this._mode.processBlock(o,l)},_doFinalize:function(){var o,l=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(l.pad(this._data,this.blockSize),o=this._process(!0)):(o=this._process(!0),l.unpad(o)),o},blockSize:4}),ae=G.CipherParams=p.extend({init:function(o){this.mixIn(o)},toString:function(o){return(o||this.formatter).stringify(this)}}),Ce=(I.format={}).OpenSSL={stringify:function(o){var f=o.ciphertext,u=o.salt;return(u?k.create([1398893684,1701076831]).concat(u).concat(f):f).toString(x)},parse:function(o){var l,f=x.parse(o),u=f.words;return 1398893684==u[0]&&1701076831==u[1]&&(l=k.create(u.slice(2,4)),u.splice(0,4),f.sigBytes-=16),ae.create({ciphertext:f,salt:l})}},De=G.SerializableCipher=p.extend({cfg:p.extend({format:Ce}),encrypt:function(o,l,f,u){u=this.cfg.extend(u);var h=o.createEncryptor(f,u),b=h.finalize(l),w=h.cfg;return ae.create({ciphertext:b,key:f,iv:w.iv,algorithm:o,mode:w.mode,padding:w.padding,blockSize:o.blockSize,formatter:u.format})},decrypt:function(o,l,f,u){return u=this.cfg.extend(u),l=this._parse(l,u.format),o.createDecryptor(f,u).finalize(l.ciphertext)},_parse:function(o,l){return"string"==typeof o?l.parse(o,this):o}}),Oe=(I.kdf={}).OpenSSL={execute:function(o,l,f,u){u||(u=k.random(8));var h=O.create({keySize:l+f}).compute(o,u),b=k.create(h.words.slice(l),4*f);return h.sigBytes=4*l,ae.create({key:h,iv:b,salt:u})}},y=G.PasswordBasedCipher=De.extend({cfg:De.cfg.extend({kdf:Oe}),encrypt:function(o,l,f,u){var h=(u=this.cfg.extend(u)).kdf.execute(f,o.keySize,o.ivSize);u.iv=h.iv;var b=De.encrypt.call(this,o,l,h.key,u);return b.mixIn(h),b},decrypt:function(o,l,f,u){u=this.cfg.extend(u),l=this._parse(l,u.format);var h=u.kdf.execute(f,o.keySize,o.ivSize,l.salt);return u.iv=h.iv,De.decrypt.call(this,o,l,h.key,u)}}))))},7585:function(ye,ue,H){var j;ye.exports=(j=j||function(W,I){var G;if("undefined"!=typeof window&&window.crypto&&(G=window.crypto),"undefined"!=typeof self&&self.crypto&&(G=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(G=globalThis.crypto),!G&&"undefined"!=typeof window&&window.msCrypto&&(G=window.msCrypto),!G&&"undefined"!=typeof global&&global.crypto&&(G=global.crypto),!G)try{G=H(1348)}catch(U){}var p=function(){if(G){if("function"==typeof G.getRandomValues)try{return G.getRandomValues(new Uint32Array(1))[0]}catch(U){}if("function"==typeof G.randomBytes)try{return G.randomBytes(4).readInt32LE()}catch(U){}}throw new Error("Native crypto module could not be used to get secure random number.")},k=Object.create||function(){function U(){}return function(Z){var ee;return U.prototype=Z,ee=new U,U.prototype=null,ee}}(),P={},E=P.lib={},R=E.Base={extend:function(U){var Z=k(this);return U&&Z.mixIn(U),(!Z.hasOwnProperty("init")||this.init===Z.init)&&(Z.init=function(){Z.$super.init.apply(this,arguments)}),Z.init.prototype=Z,Z.$super=this,Z},create:function(){var U=this.extend();return U.init.apply(U,arguments),U},init:function(){},mixIn:function(U){for(var Z in U)U.hasOwnProperty(Z)&&(this[Z]=U[Z]);U.hasOwnProperty("toString")&&(this.toString=U.toString)},clone:function(){return this.init.prototype.extend(this)}},x=E.WordArray=R.extend({init:function(U,Z){U=this.words=U||[],this.sigBytes=null!=Z?Z:4*U.length},toString:function(U){return(U||O).stringify(this)},concat:function(U){var Z=this.words,ee=U.words,ae=this.sigBytes,ge=U.sigBytes;if(this.clamp(),ae%4)for(var Ce=0;Ce<ge;Ce++)Z[ae+Ce>>>2]|=(ee[Ce>>>2]>>>24-Ce%4*8&255)<<24-(ae+Ce)%4*8;else for(var we=0;we<ge;we+=4)Z[ae+we>>>2]=ee[we>>>2];return this.sigBytes+=ge,this},clamp:function(){var U=this.words,Z=this.sigBytes;U[Z>>>2]&=4294967295<<32-Z%4*8,U.length=W.ceil(Z/4)},clone:function(){var U=R.clone.call(this);return U.words=this.words.slice(0),U},random:function(U){for(var Z=[],ee=0;ee<U;ee+=4)Z.push(p());return new x.init(Z,U)}}),S=P.enc={},O=S.Hex={stringify:function(U){for(var Z=U.words,ee=U.sigBytes,ae=[],ge=0;ge<ee;ge++){var Ce=Z[ge>>>2]>>>24-ge%4*8&255;ae.push((Ce>>>4).toString(16)),ae.push((15&Ce).toString(16))}return ae.join("")},parse:function(U){for(var Z=U.length,ee=[],ae=0;ae<Z;ae+=2)ee[ae>>>3]|=parseInt(U.substr(ae,2),16)<<24-ae%8*4;return new x.init(ee,Z/2)}},C=S.Latin1={stringify:function(U){for(var Z=U.words,ee=U.sigBytes,ae=[],ge=0;ge<ee;ge++)ae.push(String.fromCharCode(Z[ge>>>2]>>>24-ge%4*8&255));return ae.join("")},parse:function(U){for(var Z=U.length,ee=[],ae=0;ae<Z;ae++)ee[ae>>>2]|=(255&U.charCodeAt(ae))<<24-ae%4*8;return new x.init(ee,Z)}},B=S.Utf8={stringify:function(U){try{return decodeURIComponent(escape(C.stringify(U)))}catch(Z){throw new Error("Malformed UTF-8 data")}},parse:function(U){return C.parse(unescape(encodeURIComponent(U)))}},N=E.BufferedBlockAlgorithm=R.extend({reset:function(){this._data=new x.init,this._nDataBytes=0},_append:function(U){"string"==typeof U&&(U=B.parse(U)),this._data.concat(U),this._nDataBytes+=U.sigBytes},_process:function(U){var Z,ee=this._data,ae=ee.words,ge=ee.sigBytes,Ce=this.blockSize,we=ge/(4*Ce),Oe=(we=U?W.ceil(we):W.max((0|we)-this._minBufferSize,0))*Ce,y=W.min(4*Oe,ge);if(Oe){for(var o=0;o<Oe;o+=Ce)this._doProcessBlock(ae,o);Z=ae.splice(0,Oe),ee.sigBytes-=y}return new x.init(Z,y)},clone:function(){var U=R.clone.call(this);return U._data=this._data.clone(),U},_minBufferSize:0}),X=(E.Hasher=N.extend({cfg:R.extend(),init:function(U){this.cfg=this.cfg.extend(U),this.reset()},reset:function(){N.reset.call(this),this._doReset()},update:function(U){return this._append(U),this._process(),this},finalize:function(U){return U&&this._append(U),this._doFinalize()},blockSize:16,_createHelper:function(U){return function(Z,ee){return new U.init(ee).finalize(Z)}},_createHmacHelper:function(U){return function(Z,ee){return new X.HMAC.init(U,ee).finalize(Z)}}}),P.algo={});return P}(Math),j)},8319:function(ye,ue,H){var j,G;ye.exports=(j=H(7585),G=j.lib.WordArray,j.enc.Base64={stringify:function(E){var R=E.words,x=E.sigBytes,S=this._map;E.clamp();for(var O=[],C=0;C<x;C+=3)for(var X=(R[C>>>2]>>>24-C%4*8&255)<<16|(R[C+1>>>2]>>>24-(C+1)%4*8&255)<<8|R[C+2>>>2]>>>24-(C+2)%4*8&255,U=0;U<4&&C+.75*U<x;U++)O.push(S.charAt(X>>>6*(3-U)&63));var Z=S.charAt(64);if(Z)for(;O.length%4;)O.push(Z);return O.join("")},parse:function(E){var R=E.length,x=this._map,S=this._reverseMap;if(!S){S=this._reverseMap=[];for(var O=0;O<x.length;O++)S[x.charCodeAt(O)]=O}var C=x.charAt(64);if(C){var B=E.indexOf(C);-1!==B&&(R=B)}return function P(E,R,x){for(var S=[],O=0,C=0;C<R;C++)if(C%4){var B=x[E.charCodeAt(C-1)]<<C%4*2,N=x[E.charCodeAt(C)]>>>6-C%4*2;S[O>>>2]|=(B|N)<<24-O%4*8,O++}return G.create(S,O)}(E,R,S)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},j.enc.Base64)},4410:function(ye,ue,H){var j,G;ye.exports=(j=H(7585),G=j.lib.WordArray,j.enc.Base64url={stringify:function(E,R=!0){var x=E.words,S=E.sigBytes,O=R?this._safe_map:this._map;E.clamp();for(var C=[],B=0;B<S;B+=3)for(var U=(x[B>>>2]>>>24-B%4*8&255)<<16|(x[B+1>>>2]>>>24-(B+1)%4*8&255)<<8|x[B+2>>>2]>>>24-(B+2)%4*8&255,Z=0;Z<4&&B+.75*Z<S;Z++)C.push(O.charAt(U>>>6*(3-Z)&63));var ee=O.charAt(64);if(ee)for(;C.length%4;)C.push(ee);return C.join("")},parse:function(E,R=!0){var x=E.length,S=R?this._safe_map:this._map,O=this._reverseMap;if(!O){O=this._reverseMap=[];for(var C=0;C<S.length;C++)O[S.charCodeAt(C)]=C}var B=S.charAt(64);if(B){var N=E.indexOf(B);-1!==N&&(x=N)}return function P(E,R,x){for(var S=[],O=0,C=0;C<R;C++)if(C%4){var B=x[E.charCodeAt(C-1)]<<C%4*2,N=x[E.charCodeAt(C)]>>>6-C%4*2;S[O>>>2]|=(B|N)<<24-O%4*8,O++}return G.create(S,O)}(E,x,O)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},j.enc.Base64url)},9012:function(ye,ue,H){var j;ye.exports=(j=H(7585),function(){var G=j.lib.WordArray,p=j.enc;function P(E){return E<<8&4278255360|E>>>8&16711935}p.Utf16=p.Utf16BE={stringify:function(E){for(var R=E.words,x=E.sigBytes,S=[],O=0;O<x;O+=2)S.push(String.fromCharCode(R[O>>>2]>>>16-O%4*8&65535));return S.join("")},parse:function(E){for(var R=E.length,x=[],S=0;S<R;S++)x[S>>>1]|=E.charCodeAt(S)<<16-S%2*16;return G.create(x,2*R)}},p.Utf16LE={stringify:function(E){for(var R=E.words,x=E.sigBytes,S=[],O=0;O<x;O+=2){var C=P(R[O>>>2]>>>16-O%4*8&65535);S.push(String.fromCharCode(C))}return S.join("")},parse:function(E){for(var R=E.length,x=[],S=0;S<R;S++)x[S>>>1]|=P(E.charCodeAt(S)<<16-S%2*16);return G.create(x,2*R)}}}(),j.enc.Utf16)},7865:function(ye,ue,H){var W,I,G,p,k,E,j;ye.exports=(j=H(7585),H(5162),H(3764),p=(I=(W=j).lib).WordArray,E=(k=W.algo).EvpKDF=(G=I.Base).extend({cfg:G.extend({keySize:4,hasher:k.MD5,iterations:1}),init:function(R){this.cfg=this.cfg.extend(R)},compute:function(R,x){for(var S,O=this.cfg,C=O.hasher.create(),B=p.create(),N=B.words,z=O.keySize,X=O.iterations;N.length<z;){S&&C.update(S),S=C.update(R).finalize(x),C.reset();for(var U=1;U<X;U++)S=C.finalize(S),C.reset();B.concat(S)}return B.sigBytes=4*z,B}}),W.EvpKDF=function(R,x,S){return E.create(S).compute(R,x)},j.EvpKDF)},1847:function(ye,ue,H){var j,p,P;ye.exports=(j=H(7585),H(3057),p=j.lib.CipherParams,P=j.enc.Hex,j.format.Hex={stringify:function(x){return x.ciphertext.toString(P)},parse:function(x){var S=P.parse(x);return p.create({ciphertext:S})}},j.format.Hex)},3764:function(ye,ue,H){var j,k;ye.exports=(j=H(7585),k=j.enc.Utf8,void(j.algo.HMAC=j.lib.Base.extend({init:function(R,x){R=this._hasher=new R.init,"string"==typeof x&&(x=k.parse(x));var S=R.blockSize,O=4*S;x.sigBytes>O&&(x=R.finalize(x)),x.clamp();for(var C=this._oKey=x.clone(),B=this._iKey=x.clone(),N=C.words,z=B.words,X=0;X<S;X++)N[X]^=1549556828,z[X]^=909522486;C.sigBytes=B.sigBytes=O,this.reset()},reset:function(){var R=this._hasher;R.reset(),R.update(this._iKey)},update:function(R){return this._hasher.update(R),this},finalize:function(R){var x=this._hasher,S=x.finalize(R);return x.reset(),x.finalize(this._oKey.clone().concat(S))}})))},7206:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(401),H(8684),H(9012),H(8319),H(4410),H(9493),H(5162),H(1817),H(8769),H(3351),H(6787),H(1971),H(4973),H(3764),H(8812),H(7865),H(3057),H(4424),H(6635),H(3592),H(9354),H(7934),H(4413),H(4630),H(187),H(1691),H(3237),H(1847),H(7466),H(7243),H(486),H(8182),H(3544),j)},8684:function(ye,ue,H){var j;ye.exports=(j=H(7585),function(){if("function"==typeof ArrayBuffer){var G=j.lib.WordArray,p=G.init,k=G.init=function(P){if(P instanceof ArrayBuffer&&(P=new Uint8Array(P)),(P instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)&&(P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength)),P instanceof Uint8Array){for(var E=P.byteLength,R=[],x=0;x<E;x++)R[x>>>2]|=P[x]<<24-x%4*8;p.call(this,R,E)}else p.apply(this,arguments)};k.prototype=G}}(),j.lib.WordArray)},9493:function(ye,ue,H){var j;ye.exports=(j=H(7585),function(W){var I=j,G=I.lib,p=G.WordArray,k=G.Hasher,P=I.algo,E=[];!function(){for(var B=0;B<64;B++)E[B]=4294967296*W.abs(W.sin(B+1))|0}();var R=P.MD5=k.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(B,N){for(var z=0;z<16;z++){var X=N+z,U=B[X];B[X]=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8)}var Z=this._hash.words,ee=B[N+0],ae=B[N+1],ge=B[N+2],Ce=B[N+3],De=B[N+4],we=B[N+5],Oe=B[N+6],y=B[N+7],o=B[N+8],l=B[N+9],f=B[N+10],u=B[N+11],h=B[N+12],b=B[N+13],w=B[N+14],g=B[N+15],s=Z[0],v=Z[1],$=Z[2],L=Z[3];s=x(s,v,$,L,ee,7,E[0]),L=x(L,s,v,$,ae,12,E[1]),$=x($,L,s,v,ge,17,E[2]),v=x(v,$,L,s,Ce,22,E[3]),s=x(s,v,$,L,De,7,E[4]),L=x(L,s,v,$,we,12,E[5]),$=x($,L,s,v,Oe,17,E[6]),v=x(v,$,L,s,y,22,E[7]),s=x(s,v,$,L,o,7,E[8]),L=x(L,s,v,$,l,12,E[9]),$=x($,L,s,v,f,17,E[10]),v=x(v,$,L,s,u,22,E[11]),s=x(s,v,$,L,h,7,E[12]),L=x(L,s,v,$,b,12,E[13]),$=x($,L,s,v,w,17,E[14]),s=S(s,v=x(v,$,L,s,g,22,E[15]),$,L,ae,5,E[16]),L=S(L,s,v,$,Oe,9,E[17]),$=S($,L,s,v,u,14,E[18]),v=S(v,$,L,s,ee,20,E[19]),s=S(s,v,$,L,we,5,E[20]),L=S(L,s,v,$,f,9,E[21]),$=S($,L,s,v,g,14,E[22]),v=S(v,$,L,s,De,20,E[23]),s=S(s,v,$,L,l,5,E[24]),L=S(L,s,v,$,w,9,E[25]),$=S($,L,s,v,Ce,14,E[26]),v=S(v,$,L,s,o,20,E[27]),s=S(s,v,$,L,b,5,E[28]),L=S(L,s,v,$,ge,9,E[29]),$=S($,L,s,v,y,14,E[30]),s=O(s,v=S(v,$,L,s,h,20,E[31]),$,L,we,4,E[32]),L=O(L,s,v,$,o,11,E[33]),$=O($,L,s,v,u,16,E[34]),v=O(v,$,L,s,w,23,E[35]),s=O(s,v,$,L,ae,4,E[36]),L=O(L,s,v,$,De,11,E[37]),$=O($,L,s,v,y,16,E[38]),v=O(v,$,L,s,f,23,E[39]),s=O(s,v,$,L,b,4,E[40]),L=O(L,s,v,$,ee,11,E[41]),$=O($,L,s,v,Ce,16,E[42]),v=O(v,$,L,s,Oe,23,E[43]),s=O(s,v,$,L,l,4,E[44]),L=O(L,s,v,$,h,11,E[45]),$=O($,L,s,v,g,16,E[46]),s=C(s,v=O(v,$,L,s,ge,23,E[47]),$,L,ee,6,E[48]),L=C(L,s,v,$,y,10,E[49]),$=C($,L,s,v,w,15,E[50]),v=C(v,$,L,s,we,21,E[51]),s=C(s,v,$,L,h,6,E[52]),L=C(L,s,v,$,Ce,10,E[53]),$=C($,L,s,v,f,15,E[54]),v=C(v,$,L,s,ae,21,E[55]),s=C(s,v,$,L,o,6,E[56]),L=C(L,s,v,$,g,10,E[57]),$=C($,L,s,v,Oe,15,E[58]),v=C(v,$,L,s,b,21,E[59]),s=C(s,v,$,L,De,6,E[60]),L=C(L,s,v,$,u,10,E[61]),$=C($,L,s,v,ge,15,E[62]),v=C(v,$,L,s,l,21,E[63]),Z[0]=Z[0]+s|0,Z[1]=Z[1]+v|0,Z[2]=Z[2]+$|0,Z[3]=Z[3]+L|0},_doFinalize:function(){var B=this._data,N=B.words,z=8*this._nDataBytes,X=8*B.sigBytes;N[X>>>5]|=128<<24-X%32;var U=W.floor(z/4294967296),Z=z;N[15+(X+64>>>9<<4)]=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),N[14+(X+64>>>9<<4)]=16711935&(Z<<8|Z>>>24)|4278255360&(Z<<24|Z>>>8),B.sigBytes=4*(N.length+1),this._process();for(var ee=this._hash,ae=ee.words,ge=0;ge<4;ge++){var Ce=ae[ge];ae[ge]=16711935&(Ce<<8|Ce>>>24)|4278255360&(Ce<<24|Ce>>>8)}return ee},clone:function(){var B=k.clone.call(this);return B._hash=this._hash.clone(),B}});function x(B,N,z,X,U,Z,ee){var ae=B+(N&z|~N&X)+U+ee;return(ae<<Z|ae>>>32-Z)+N}function S(B,N,z,X,U,Z,ee){var ae=B+(N&X|z&~X)+U+ee;return(ae<<Z|ae>>>32-Z)+N}function O(B,N,z,X,U,Z,ee){var ae=B+(N^z^X)+U+ee;return(ae<<Z|ae>>>32-Z)+N}function C(B,N,z,X,U,Z,ee){var ae=B+(z^(N|~X))+U+ee;return(ae<<Z|ae>>>32-Z)+N}I.MD5=k._createHelper(R),I.HmacMD5=k._createHmacHelper(R)}(Math),j.MD5)},4424:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(3057),j.mode.CFB=function(){var W=j.lib.BlockCipherMode.extend();function I(G,p,k,P){var E,R=this._iv;R?(E=R.slice(0),this._iv=void 0):E=this._prevBlock,P.encryptBlock(E,0);for(var x=0;x<k;x++)G[p+x]^=E[x]}return W.Encryptor=W.extend({processBlock:function(G,p){var k=this._cipher,P=k.blockSize;I.call(this,G,p,P,k),this._prevBlock=G.slice(p,p+P)}}),W.Decryptor=W.extend({processBlock:function(G,p){var k=this._cipher,P=k.blockSize,E=G.slice(p,p+P);I.call(this,G,p,P,k),this._prevBlock=E}}),W}(),j.mode.CFB)},3592:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(3057),j.mode.CTRGladman=function(){var W=j.lib.BlockCipherMode.extend();function I(k){if(255==(k>>24&255)){var P=k>>16&255,E=k>>8&255,R=255&k;255===P?(P=0,255===E?(E=0,255===R?R=0:++R):++E):++P,k=0,k+=P<<16,k+=E<<8,k+=R}else k+=1<<24;return k}var p=W.Encryptor=W.extend({processBlock:function(k,P){var E=this._cipher,R=E.blockSize,x=this._iv,S=this._counter;x&&(S=this._counter=x.slice(0),this._iv=void 0),function G(k){return 0===(k[0]=I(k[0]))&&(k[1]=I(k[1])),k}(S);var O=S.slice(0);E.encryptBlock(O,0);for(var C=0;C<R;C++)k[P+C]^=O[C]}});return W.Decryptor=p,W}(),j.mode.CTRGladman)},6635:function(ye,ue,H){var W,I,j;ye.exports=(j=H(7585),H(3057),j.mode.CTR=(I=(W=j.lib.BlockCipherMode.extend()).Encryptor=W.extend({processBlock:function(G,p){var k=this._cipher,P=k.blockSize,E=this._iv,R=this._counter;E&&(R=this._counter=E.slice(0),this._iv=void 0);var x=R.slice(0);k.encryptBlock(x,0),R[P-1]=R[P-1]+1|0;for(var S=0;S<P;S++)G[p+S]^=x[S]}}),W.Decryptor=I,W),j.mode.CTR)},7934:function(ye,ue,H){var W,j;ye.exports=(j=H(7585),H(3057),j.mode.ECB=((W=j.lib.BlockCipherMode.extend()).Encryptor=W.extend({processBlock:function(I,G){this._cipher.encryptBlock(I,G)}}),W.Decryptor=W.extend({processBlock:function(I,G){this._cipher.decryptBlock(I,G)}}),W),j.mode.ECB)},9354:function(ye,ue,H){var W,I,j;ye.exports=(j=H(7585),H(3057),j.mode.OFB=(I=(W=j.lib.BlockCipherMode.extend()).Encryptor=W.extend({processBlock:function(G,p){var k=this._cipher,P=k.blockSize,E=this._iv,R=this._keystream;E&&(R=this._keystream=E.slice(0),this._iv=void 0),k.encryptBlock(R,0);for(var x=0;x<P;x++)G[p+x]^=R[x]}}),W.Decryptor=I,W),j.mode.OFB)},4413:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(3057),j.pad.AnsiX923={pad:function(W,I){var G=W.sigBytes,p=4*I,k=p-G%p,P=G+k-1;W.clamp(),W.words[P>>>2]|=k<<24-P%4*8,W.sigBytes+=k},unpad:function(W){W.sigBytes-=255&W.words[W.sigBytes-1>>>2]}},j.pad.Ansix923)},4630:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(3057),j.pad.Iso10126={pad:function(W,I){var G=4*I,p=G-W.sigBytes%G;W.concat(j.lib.WordArray.random(p-1)).concat(j.lib.WordArray.create([p<<24],1))},unpad:function(W){W.sigBytes-=255&W.words[W.sigBytes-1>>>2]}},j.pad.Iso10126)},187:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(3057),j.pad.Iso97971={pad:function(W,I){W.concat(j.lib.WordArray.create([2147483648],1)),j.pad.ZeroPadding.pad(W,I)},unpad:function(W){j.pad.ZeroPadding.unpad(W),W.sigBytes--}},j.pad.Iso97971)},3237:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(3057),j.pad.NoPadding={pad:function(){},unpad:function(){}},j.pad.NoPadding)},1691:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(3057),j.pad.ZeroPadding={pad:function(W,I){var G=4*I;W.clamp(),W.sigBytes+=G-(W.sigBytes%G||G)},unpad:function(W){var I=W.words,G=W.sigBytes-1;for(G=W.sigBytes-1;G>=0;G--)if(I[G>>>2]>>>24-G%4*8&255){W.sigBytes=G+1;break}}},j.pad.ZeroPadding)},8812:function(ye,ue,H){var W,I,G,p,k,E,R,j;ye.exports=(j=H(7585),H(5162),H(3764),p=(I=(W=j).lib).WordArray,E=(k=W.algo).HMAC,R=k.PBKDF2=(G=I.Base).extend({cfg:G.extend({keySize:4,hasher:k.SHA1,iterations:1}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,S){for(var O=this.cfg,C=E.create(O.hasher,x),B=p.create(),N=p.create([1]),z=B.words,X=N.words,U=O.keySize,Z=O.iterations;z.length<U;){var ee=C.update(S).finalize(N);C.reset();for(var ae=ee.words,ge=ae.length,Ce=ee,De=1;De<Z;De++){Ce=C.finalize(Ce),C.reset();for(var we=Ce.words,Oe=0;Oe<ge;Oe++)ae[Oe]^=we[Oe]}B.concat(ee),X[0]++}return B.sigBytes=4*U,B}}),W.PBKDF2=function(x,S,O){return R.create(O).compute(x,S)},j.PBKDF2)},3544:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(8319),H(9493),H(7865),H(3057),function(){var W=j,G=W.lib.StreamCipher,k=[],P=[],E=[],R=W.algo.RabbitLegacy=G.extend({_doReset:function(){var S=this._key.words,O=this.cfg.iv,C=this._X=[S[0],S[3]<<16|S[2]>>>16,S[1],S[0]<<16|S[3]>>>16,S[2],S[1]<<16|S[0]>>>16,S[3],S[2]<<16|S[1]>>>16],B=this._C=[S[2]<<16|S[2]>>>16,4294901760&S[0]|65535&S[1],S[3]<<16|S[3]>>>16,4294901760&S[1]|65535&S[2],S[0]<<16|S[0]>>>16,4294901760&S[2]|65535&S[3],S[1]<<16|S[1]>>>16,4294901760&S[3]|65535&S[0]];this._b=0;for(var N=0;N<4;N++)x.call(this);for(N=0;N<8;N++)B[N]^=C[N+4&7];if(O){var z=O.words,X=z[0],U=z[1],Z=16711935&(X<<8|X>>>24)|4278255360&(X<<24|X>>>8),ee=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),ae=Z>>>16|4294901760&ee,ge=ee<<16|65535&Z;for(B[0]^=Z,B[1]^=ae,B[2]^=ee,B[3]^=ge,B[4]^=Z,B[5]^=ae,B[6]^=ee,B[7]^=ge,N=0;N<4;N++)x.call(this)}},_doProcessBlock:function(S,O){var C=this._X;x.call(this),k[0]=C[0]^C[5]>>>16^C[3]<<16,k[1]=C[2]^C[7]>>>16^C[5]<<16,k[2]=C[4]^C[1]>>>16^C[7]<<16,k[3]=C[6]^C[3]>>>16^C[1]<<16;for(var B=0;B<4;B++)k[B]=16711935&(k[B]<<8|k[B]>>>24)|4278255360&(k[B]<<24|k[B]>>>8),S[O+B]^=k[B]},blockSize:4,ivSize:2});function x(){for(var S=this._X,O=this._C,C=0;C<8;C++)P[C]=O[C];for(O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<P[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<P[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<P[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<P[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<P[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<P[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<P[6]>>>0?1:0)|0,this._b=O[7]>>>0<P[7]>>>0?1:0,C=0;C<8;C++){var B=S[C]+O[C],N=65535&B,z=B>>>16;E[C]=((N*N>>>17)+N*z>>>15)+z*z^((4294901760&B)*B|0)+((65535&B)*B|0)}S[0]=E[0]+(E[7]<<16|E[7]>>>16)+(E[6]<<16|E[6]>>>16)|0,S[1]=E[1]+(E[0]<<8|E[0]>>>24)+E[7]|0,S[2]=E[2]+(E[1]<<16|E[1]>>>16)+(E[0]<<16|E[0]>>>16)|0,S[3]=E[3]+(E[2]<<8|E[2]>>>24)+E[1]|0,S[4]=E[4]+(E[3]<<16|E[3]>>>16)+(E[2]<<16|E[2]>>>16)|0,S[5]=E[5]+(E[4]<<8|E[4]>>>24)+E[3]|0,S[6]=E[6]+(E[5]<<16|E[5]>>>16)+(E[4]<<16|E[4]>>>16)|0,S[7]=E[7]+(E[6]<<8|E[6]>>>24)+E[5]|0}W.RabbitLegacy=G._createHelper(R)}(),j.RabbitLegacy)},8182:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(8319),H(9493),H(7865),H(3057),function(){var W=j,G=W.lib.StreamCipher,k=[],P=[],E=[],R=W.algo.Rabbit=G.extend({_doReset:function(){for(var S=this._key.words,O=this.cfg.iv,C=0;C<4;C++)S[C]=16711935&(S[C]<<8|S[C]>>>24)|4278255360&(S[C]<<24|S[C]>>>8);var B=this._X=[S[0],S[3]<<16|S[2]>>>16,S[1],S[0]<<16|S[3]>>>16,S[2],S[1]<<16|S[0]>>>16,S[3],S[2]<<16|S[1]>>>16],N=this._C=[S[2]<<16|S[2]>>>16,4294901760&S[0]|65535&S[1],S[3]<<16|S[3]>>>16,4294901760&S[1]|65535&S[2],S[0]<<16|S[0]>>>16,4294901760&S[2]|65535&S[3],S[1]<<16|S[1]>>>16,4294901760&S[3]|65535&S[0]];for(this._b=0,C=0;C<4;C++)x.call(this);for(C=0;C<8;C++)N[C]^=B[C+4&7];if(O){var z=O.words,X=z[0],U=z[1],Z=16711935&(X<<8|X>>>24)|4278255360&(X<<24|X>>>8),ee=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),ae=Z>>>16|4294901760&ee,ge=ee<<16|65535&Z;for(N[0]^=Z,N[1]^=ae,N[2]^=ee,N[3]^=ge,N[4]^=Z,N[5]^=ae,N[6]^=ee,N[7]^=ge,C=0;C<4;C++)x.call(this)}},_doProcessBlock:function(S,O){var C=this._X;x.call(this),k[0]=C[0]^C[5]>>>16^C[3]<<16,k[1]=C[2]^C[7]>>>16^C[5]<<16,k[2]=C[4]^C[1]>>>16^C[7]<<16,k[3]=C[6]^C[3]>>>16^C[1]<<16;for(var B=0;B<4;B++)k[B]=16711935&(k[B]<<8|k[B]>>>24)|4278255360&(k[B]<<24|k[B]>>>8),S[O+B]^=k[B]},blockSize:4,ivSize:2});function x(){for(var S=this._X,O=this._C,C=0;C<8;C++)P[C]=O[C];for(O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<P[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<P[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<P[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<P[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<P[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<P[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<P[6]>>>0?1:0)|0,this._b=O[7]>>>0<P[7]>>>0?1:0,C=0;C<8;C++){var B=S[C]+O[C],N=65535&B,z=B>>>16;E[C]=((N*N>>>17)+N*z>>>15)+z*z^((4294901760&B)*B|0)+((65535&B)*B|0)}S[0]=E[0]+(E[7]<<16|E[7]>>>16)+(E[6]<<16|E[6]>>>16)|0,S[1]=E[1]+(E[0]<<8|E[0]>>>24)+E[7]|0,S[2]=E[2]+(E[1]<<16|E[1]>>>16)+(E[0]<<16|E[0]>>>16)|0,S[3]=E[3]+(E[2]<<8|E[2]>>>24)+E[1]|0,S[4]=E[4]+(E[3]<<16|E[3]>>>16)+(E[2]<<16|E[2]>>>16)|0,S[5]=E[5]+(E[4]<<8|E[4]>>>24)+E[3]|0,S[6]=E[6]+(E[5]<<16|E[5]>>>16)+(E[4]<<16|E[4]>>>16)|0,S[7]=E[7]+(E[6]<<8|E[6]>>>24)+E[5]|0}W.Rabbit=G._createHelper(R)}(),j.Rabbit)},486:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(8319),H(9493),H(7865),H(3057),function(){var W=j,G=W.lib.StreamCipher,p=W.algo,k=p.RC4=G.extend({_doReset:function(){for(var R=this._key,x=R.words,S=R.sigBytes,O=this._S=[],C=0;C<256;C++)O[C]=C;C=0;for(var B=0;C<256;C++){var N=C%S,X=O[C];O[C]=O[B=(B+O[C]+(x[N>>>2]>>>24-N%4*8&255))%256],O[B]=X}this._i=this._j=0},_doProcessBlock:function(R,x){R[x]^=P.call(this)},keySize:8,ivSize:0});function P(){for(var R=this._S,x=this._i,S=this._j,O=0,C=0;C<4;C++){var B=R[x=(x+1)%256];R[x]=R[S=(S+R[x])%256],R[S]=B,O|=R[(R[x]+R[S])%256]<<24-8*C}return this._i=x,this._j=S,O}W.RC4=G._createHelper(k);var E=p.RC4Drop=k.extend({cfg:k.cfg.extend({drop:192}),_doReset:function(){k._doReset.call(this);for(var R=this.cfg.drop;R>0;R--)P.call(this)}});W.RC4Drop=G._createHelper(E)}(),j.RC4)},4973:function(ye,ue,H){var j;ye.exports=(j=H(7585),function(W){var I=j,G=I.lib,p=G.WordArray,k=G.Hasher,P=I.algo,E=p.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),R=p.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),x=p.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),S=p.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),O=p.create([0,1518500249,1859775393,2400959708,2840853838]),C=p.create([1352829926,1548603684,1836072691,2053994217,0]),B=P.RIPEMD160=k.extend({_doReset:function(){this._hash=p.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ae,ge){for(var Ce=0;Ce<16;Ce++){var De=ge+Ce,we=ae[De];ae[De]=16711935&(we<<8|we>>>24)|4278255360&(we<<24|we>>>8)}var b,w,g,s,v,$,L,ie,Se,ke,Be,Oe=this._hash.words,y=O.words,o=C.words,l=E.words,f=R.words,u=x.words,h=S.words;for($=b=Oe[0],L=w=Oe[1],ie=g=Oe[2],Se=s=Oe[3],ke=v=Oe[4],Ce=0;Ce<80;Ce+=1)Be=b+ae[ge+l[Ce]]|0,Be+=Ce<16?N(w,g,s)+y[0]:Ce<32?z(w,g,s)+y[1]:Ce<48?X(w,g,s)+y[2]:Ce<64?U(w,g,s)+y[3]:Z(w,g,s)+y[4],Be=(Be=ee(Be|=0,u[Ce]))+v|0,b=v,v=s,s=ee(g,10),g=w,w=Be,Be=$+ae[ge+f[Ce]]|0,Be+=Ce<16?Z(L,ie,Se)+o[0]:Ce<32?U(L,ie,Se)+o[1]:Ce<48?X(L,ie,Se)+o[2]:Ce<64?z(L,ie,Se)+o[3]:N(L,ie,Se)+o[4],Be=(Be=ee(Be|=0,h[Ce]))+ke|0,$=ke,ke=Se,Se=ee(ie,10),ie=L,L=Be;Be=Oe[1]+g+Se|0,Oe[1]=Oe[2]+s+ke|0,Oe[2]=Oe[3]+v+$|0,Oe[3]=Oe[4]+b+L|0,Oe[4]=Oe[0]+w+ie|0,Oe[0]=Be},_doFinalize:function(){var ae=this._data,ge=ae.words,Ce=8*this._nDataBytes,De=8*ae.sigBytes;ge[De>>>5]|=128<<24-De%32,ge[14+(De+64>>>9<<4)]=16711935&(Ce<<8|Ce>>>24)|4278255360&(Ce<<24|Ce>>>8),ae.sigBytes=4*(ge.length+1),this._process();for(var we=this._hash,Oe=we.words,y=0;y<5;y++){var o=Oe[y];Oe[y]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}return we},clone:function(){var ae=k.clone.call(this);return ae._hash=this._hash.clone(),ae}});function N(ae,ge,Ce){return ae^ge^Ce}function z(ae,ge,Ce){return ae&ge|~ae&Ce}function X(ae,ge,Ce){return(ae|~ge)^Ce}function U(ae,ge,Ce){return ae&Ce|ge&~Ce}function Z(ae,ge,Ce){return ae^(ge|~Ce)}function ee(ae,ge){return ae<<ge|ae>>>32-ge}I.RIPEMD160=k._createHelper(B),I.HmacRIPEMD160=k._createHmacHelper(B)}(Math),j.RIPEMD160)},5162:function(ye,ue,H){var W,I,G,p,P,E,j;ye.exports=(j=H(7585),G=(I=(W=j).lib).WordArray,P=[],E=W.algo.SHA1=(p=I.Hasher).extend({_doReset:function(){this._hash=new G.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(R,x){for(var S=this._hash.words,O=S[0],C=S[1],B=S[2],N=S[3],z=S[4],X=0;X<80;X++){if(X<16)P[X]=0|R[x+X];else{var U=P[X-3]^P[X-8]^P[X-14]^P[X-16];P[X]=U<<1|U>>>31}var Z=(O<<5|O>>>27)+z+P[X];Z+=X<20?1518500249+(C&B|~C&N):X<40?1859775393+(C^B^N):X<60?(C&B|C&N|B&N)-1894007588:(C^B^N)-899497514,z=N,N=B,B=C<<30|C>>>2,C=O,O=Z}S[0]=S[0]+O|0,S[1]=S[1]+C|0,S[2]=S[2]+B|0,S[3]=S[3]+N|0,S[4]=S[4]+z|0},_doFinalize:function(){var R=this._data,x=R.words,S=8*this._nDataBytes,O=8*R.sigBytes;return x[O>>>5]|=128<<24-O%32,x[14+(O+64>>>9<<4)]=Math.floor(S/4294967296),x[15+(O+64>>>9<<4)]=S,R.sigBytes=4*x.length,this._process(),this._hash},clone:function(){var R=p.clone.call(this);return R._hash=this._hash.clone(),R}}),W.SHA1=p._createHelper(E),W.HmacSHA1=p._createHmacHelper(E),j.SHA1)},8769:function(ye,ue,H){var W,G,p,k,P,j;ye.exports=(j=H(7585),H(1817),G=(W=j).lib.WordArray,P=(p=W.algo).SHA224=(k=p.SHA256).extend({_doReset:function(){this._hash=new G.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var E=k._doFinalize.call(this);return E.sigBytes-=4,E}}),W.SHA224=k._createHelper(P),W.HmacSHA224=k._createHmacHelper(P),j.SHA224)},1817:function(ye,ue,H){var j;ye.exports=(j=H(7585),function(W){var I=j,G=I.lib,p=G.WordArray,k=G.Hasher,P=I.algo,E=[],R=[];!function(){function O(z){for(var X=W.sqrt(z),U=2;U<=X;U++)if(!(z%U))return!1;return!0}function C(z){return 4294967296*(z-(0|z))|0}for(var B=2,N=0;N<64;)O(B)&&(N<8&&(E[N]=C(W.pow(B,.5))),R[N]=C(W.pow(B,1/3)),N++),B++}();var x=[],S=P.SHA256=k.extend({_doReset:function(){this._hash=new p.init(E.slice(0))},_doProcessBlock:function(O,C){for(var B=this._hash.words,N=B[0],z=B[1],X=B[2],U=B[3],Z=B[4],ee=B[5],ae=B[6],ge=B[7],Ce=0;Ce<64;Ce++){if(Ce<16)x[Ce]=0|O[C+Ce];else{var De=x[Ce-15],Oe=x[Ce-2];x[Ce]=((De<<25|De>>>7)^(De<<14|De>>>18)^De>>>3)+x[Ce-7]+((Oe<<15|Oe>>>17)^(Oe<<13|Oe>>>19)^Oe>>>10)+x[Ce-16]}var l=N&z^N&X^z&X,h=ge+((Z<<26|Z>>>6)^(Z<<21|Z>>>11)^(Z<<7|Z>>>25))+(Z&ee^~Z&ae)+R[Ce]+x[Ce];ge=ae,ae=ee,ee=Z,Z=U+h|0,U=X,X=z,z=N,N=h+(((N<<30|N>>>2)^(N<<19|N>>>13)^(N<<10|N>>>22))+l)|0}B[0]=B[0]+N|0,B[1]=B[1]+z|0,B[2]=B[2]+X|0,B[3]=B[3]+U|0,B[4]=B[4]+Z|0,B[5]=B[5]+ee|0,B[6]=B[6]+ae|0,B[7]=B[7]+ge|0},_doFinalize:function(){var O=this._data,C=O.words,B=8*this._nDataBytes,N=8*O.sigBytes;return C[N>>>5]|=128<<24-N%32,C[14+(N+64>>>9<<4)]=W.floor(B/4294967296),C[15+(N+64>>>9<<4)]=B,O.sigBytes=4*C.length,this._process(),this._hash},clone:function(){var O=k.clone.call(this);return O._hash=this._hash.clone(),O}});I.SHA256=k._createHelper(S),I.HmacSHA256=k._createHmacHelper(S)}(Math),j.SHA256)},1971:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(401),function(W){var I=j,G=I.lib,p=G.WordArray,k=G.Hasher,E=I.x64.Word,R=I.algo,x=[],S=[],O=[];!function(){for(var N=1,z=0,X=0;X<24;X++){x[N+5*z]=(X+1)*(X+2)/2%64;var Z=(2*N+3*z)%5;N=z%5,z=Z}for(N=0;N<5;N++)for(z=0;z<5;z++)S[N+5*z]=z+(2*N+3*z)%5*5;for(var ee=1,ae=0;ae<24;ae++){for(var ge=0,Ce=0,De=0;De<7;De++){if(1&ee){var we=(1<<De)-1;we<32?Ce^=1<<we:ge^=1<<we-32}128&ee?ee=ee<<1^113:ee<<=1}O[ae]=E.create(ge,Ce)}}();var C=[];!function(){for(var N=0;N<25;N++)C[N]=E.create()}();var B=R.SHA3=k.extend({cfg:k.cfg.extend({outputLength:512}),_doReset:function(){for(var N=this._state=[],z=0;z<25;z++)N[z]=new E.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(N,z){for(var X=this._state,U=this.blockSize/2,Z=0;Z<U;Z++){var ee=N[z+2*Z],ae=N[z+2*Z+1];ee=16711935&(ee<<8|ee>>>24)|4278255360&(ee<<24|ee>>>8),(ge=X[Z]).high^=ae=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8),ge.low^=ee}for(var Ce=0;Ce<24;Ce++){for(var De=0;De<5;De++){for(var we=0,Oe=0,y=0;y<5;y++)we^=(ge=X[De+5*y]).high,Oe^=ge.low;var o=C[De];o.high=we,o.low=Oe}for(De=0;De<5;De++){var l=C[(De+4)%5],f=C[(De+1)%5],u=f.high,h=f.low;for(we=l.high^(u<<1|h>>>31),Oe=l.low^(h<<1|u>>>31),y=0;y<5;y++)(ge=X[De+5*y]).high^=we,ge.low^=Oe}for(var b=1;b<25;b++){var w=(ge=X[b]).high,g=ge.low,s=x[b];s<32?(we=w<<s|g>>>32-s,Oe=g<<s|w>>>32-s):(we=g<<s-32|w>>>64-s,Oe=w<<s-32|g>>>64-s);var v=C[S[b]];v.high=we,v.low=Oe}var $=C[0],L=X[0];for($.high=L.high,$.low=L.low,De=0;De<5;De++)for(y=0;y<5;y++){var ie=C[b=De+5*y],Se=C[(De+1)%5+5*y],ke=C[(De+2)%5+5*y];(ge=X[b]).high=ie.high^~Se.high&ke.high,ge.low=ie.low^~Se.low&ke.low}var ge,Be=O[Ce];(ge=X[0]).high^=Be.high,ge.low^=Be.low}},_doFinalize:function(){var N=this._data,z=N.words,U=8*N.sigBytes,Z=32*this.blockSize;z[U>>>5]|=1<<24-U%32,z[(W.ceil((U+1)/Z)*Z>>>5)-1]|=128,N.sigBytes=4*z.length,this._process();for(var ee=this._state,ae=this.cfg.outputLength/8,ge=ae/8,Ce=[],De=0;De<ge;De++){var we=ee[De],Oe=we.high,y=we.low;Oe=16711935&(Oe<<8|Oe>>>24)|4278255360&(Oe<<24|Oe>>>8),Ce.push(y=16711935&(y<<8|y>>>24)|4278255360&(y<<24|y>>>8)),Ce.push(Oe)}return new p.init(Ce,ae)},clone:function(){for(var N=k.clone.call(this),z=N._state=this._state.slice(0),X=0;X<25;X++)z[X]=z[X].clone();return N}});I.SHA3=k._createHelper(B),I.HmacSHA3=k._createHmacHelper(B)}(Math),j.SHA3)},6787:function(ye,ue,H){var W,I,G,p,k,P,E,j;ye.exports=(j=H(7585),H(401),H(3351),G=(I=(W=j).x64).Word,p=I.WordArray,E=(k=W.algo).SHA384=(P=k.SHA512).extend({_doReset:function(){this._hash=new p.init([new G.init(3418070365,3238371032),new G.init(1654270250,914150663),new G.init(2438529370,812702999),new G.init(355462360,4144912697),new G.init(1731405415,4290775857),new G.init(2394180231,1750603025),new G.init(3675008525,1694076839),new G.init(1203062813,3204075428)])},_doFinalize:function(){var R=P._doFinalize.call(this);return R.sigBytes-=16,R}}),W.SHA384=P._createHelper(E),W.HmacSHA384=P._createHmacHelper(E),j.SHA384)},3351:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(401),function(){var W=j,G=W.lib.Hasher,p=W.x64,k=p.Word,P=p.WordArray,E=W.algo;function R(){return k.create.apply(k,arguments)}var x=[R(1116352408,3609767458),R(1899447441,602891725),R(3049323471,3964484399),R(3921009573,2173295548),R(961987163,4081628472),R(1508970993,3053834265),R(2453635748,2937671579),R(2870763221,3664609560),R(3624381080,2734883394),R(310598401,1164996542),R(607225278,1323610764),R(1426881987,3590304994),R(1925078388,4068182383),R(2162078206,991336113),R(2614888103,633803317),R(3248222580,3479774868),R(3835390401,2666613458),R(4022224774,944711139),R(264347078,2341262773),R(604807628,2007800933),R(770255983,1495990901),R(1249150122,1856431235),R(1555081692,3175218132),R(1996064986,2198950837),R(2554220882,3999719339),R(2821834349,766784016),R(2952996808,2566594879),R(3210313671,3203337956),R(3336571891,1034457026),R(3584528711,2466948901),R(113926993,3758326383),R(338241895,168717936),R(666307205,1188179964),R(773529912,1546045734),R(1294757372,1522805485),R(1396182291,2643833823),R(1695183700,2343527390),R(1986661051,1014477480),R(2177026350,1206759142),R(2456956037,344077627),R(2730485921,1290863460),R(2820302411,3158454273),R(3259730800,3505952657),R(3345764771,106217008),R(3516065817,3606008344),R(3600352804,1432725776),R(4094571909,1467031594),R(275423344,851169720),R(430227734,3100823752),R(506948616,1363258195),R(659060556,3750685593),R(883997877,3785050280),R(958139571,3318307427),R(1322822218,3812723403),R(1537002063,2003034995),R(1747873779,3602036899),R(1955562222,1575990012),R(2024104815,1125592928),R(2227730452,2716904306),R(2361852424,442776044),R(2428436474,593698344),R(2756734187,3733110249),R(3204031479,2999351573),R(3329325298,3815920427),R(3391569614,3928383900),R(3515267271,566280711),R(3940187606,3454069534),R(4118630271,4000239992),R(116418474,1914138554),R(174292421,2731055270),R(289380356,3203993006),R(460393269,320620315),R(685471733,587496836),R(852142971,1086792851),R(1017036298,365543100),R(1126000580,2618297676),R(1288033470,3409855158),R(1501505948,4234509866),R(1607167915,987167468),R(1816402316,1246189591)],S=[];!function(){for(var C=0;C<80;C++)S[C]=R()}();var O=E.SHA512=G.extend({_doReset:function(){this._hash=new P.init([new k.init(1779033703,4089235720),new k.init(3144134277,2227873595),new k.init(1013904242,4271175723),new k.init(2773480762,1595750129),new k.init(1359893119,2917565137),new k.init(2600822924,725511199),new k.init(528734635,4215389547),new k.init(1541459225,327033209)])},_doProcessBlock:function(C,B){for(var N=this._hash.words,z=N[0],X=N[1],U=N[2],Z=N[3],ee=N[4],ae=N[5],ge=N[6],Ce=N[7],De=z.high,we=z.low,Oe=X.high,y=X.low,o=U.high,l=U.low,f=Z.high,u=Z.low,h=ee.high,b=ee.low,w=ae.high,g=ae.low,s=ge.high,v=ge.low,$=Ce.high,L=Ce.low,ie=De,Se=we,ke=Oe,Be=y,Pe=o,Te=l,Ie=f,Vt=u,je=h,se=b,Ee=w,Re=g,Ge=s,ui=v,qe=$,Ye=L,xi=0;xi<80;xi++){var et,Ke,qi=S[xi];if(xi<16)Ke=qi.high=0|C[B+2*xi],et=qi.low=0|C[B+2*xi+1];else{var ut=S[xi-15],Qe=ut.high,rn=ut.low,J=(rn>>>1|Qe<<31)^(rn>>>8|Qe<<24)^(rn>>>7|Qe<<25),re=S[xi-2],ve=re.high,xe=re.low,Ne=(xe>>>19|ve<<13)^(xe<<3|ve>>>29)^(xe>>>6|ve<<26),Xe=S[xi-7],rt=S[xi-16],ht=rt.low;qi.high=Ke=(Ke=(Ke=((Qe>>>1|rn<<31)^(Qe>>>8|rn<<24)^Qe>>>7)+Xe.high+((et=J+Xe.low)>>>0<J>>>0?1:0))+((ve>>>19|xe<<13)^(ve<<3|xe>>>29)^ve>>>6)+((et+=Ne)>>>0<Ne>>>0?1:0))+rt.high+((et+=ht)>>>0<ht>>>0?1:0),qi.low=et}var ct,_t=je&Ee^~je&Ge,Sr=se&Re^~se&ui,gt=ie&ke^ie&Pe^ke&Pe,st=(Se>>>28|ie<<4)^(Se<<30|ie>>>2)^(Se<<25|ie>>>7),mt=x[xi],Cr=mt.low,ft=qe+((je>>>14|se<<18)^(je>>>18|se<<14)^(je<<23|se>>>9))+((ct=Ye+((se>>>14|je<<18)^(se>>>18|je<<14)^(se<<23|je>>>9)))>>>0<Ye>>>0?1:0),An=st+(Se&Be^Se&Te^Be&Te);qe=Ge,Ye=ui,Ge=Ee,ui=Re,Ee=je,Re=se,je=Ie+(ft=(ft=(ft=ft+_t+((ct+=Sr)>>>0<Sr>>>0?1:0))+mt.high+((ct+=Cr)>>>0<Cr>>>0?1:0))+Ke+((ct+=et)>>>0<et>>>0?1:0))+((se=Vt+ct|0)>>>0<Vt>>>0?1:0)|0,Ie=Pe,Vt=Te,Pe=ke,Te=Be,ke=ie,Be=Se,ie=ft+(((ie>>>28|Se<<4)^(ie<<30|Se>>>2)^(ie<<25|Se>>>7))+gt+(An>>>0<st>>>0?1:0))+((Se=ct+An|0)>>>0<ct>>>0?1:0)|0}we=z.low=we+Se,z.high=De+ie+(we>>>0<Se>>>0?1:0),y=X.low=y+Be,X.high=Oe+ke+(y>>>0<Be>>>0?1:0),l=U.low=l+Te,U.high=o+Pe+(l>>>0<Te>>>0?1:0),u=Z.low=u+Vt,Z.high=f+Ie+(u>>>0<Vt>>>0?1:0),b=ee.low=b+se,ee.high=h+je+(b>>>0<se>>>0?1:0),g=ae.low=g+Re,ae.high=w+Ee+(g>>>0<Re>>>0?1:0),v=ge.low=v+ui,ge.high=s+Ge+(v>>>0<ui>>>0?1:0),L=Ce.low=L+Ye,Ce.high=$+qe+(L>>>0<Ye>>>0?1:0)},_doFinalize:function(){var C=this._data,B=C.words,N=8*this._nDataBytes,z=8*C.sigBytes;return B[z>>>5]|=128<<24-z%32,B[30+(z+128>>>10<<5)]=Math.floor(N/4294967296),B[31+(z+128>>>10<<5)]=N,C.sigBytes=4*B.length,this._process(),this._hash.toX32()},clone:function(){var C=G.clone.call(this);return C._hash=this._hash.clone(),C},blockSize:32});W.SHA512=G._createHelper(O),W.HmacSHA512=G._createHmacHelper(O)}(),j.SHA512)},7243:function(ye,ue,H){var j;ye.exports=(j=H(7585),H(8319),H(9493),H(7865),H(3057),function(){var W=j,I=W.lib,G=I.WordArray,p=I.BlockCipher,k=W.algo,P=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],E=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],R=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],x=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],S=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],O=k.DES=p.extend({_doReset:function(){for(var X=this._key.words,U=[],Z=0;Z<56;Z++){var ee=P[Z]-1;U[Z]=X[ee>>>5]>>>31-ee%32&1}for(var ae=this._subKeys=[],ge=0;ge<16;ge++){var Ce=ae[ge]=[],De=R[ge];for(Z=0;Z<24;Z++)Ce[Z/6|0]|=U[(E[Z]-1+De)%28]<<31-Z%6,Ce[4+(Z/6|0)]|=U[28+(E[Z+24]-1+De)%28]<<31-Z%6;for(Ce[0]=Ce[0]<<1|Ce[0]>>>31,Z=1;Z<7;Z++)Ce[Z]=Ce[Z]>>>4*(Z-1)+3;Ce[7]=Ce[7]<<5|Ce[7]>>>27}var we=this._invSubKeys=[];for(Z=0;Z<16;Z++)we[Z]=ae[15-Z]},encryptBlock:function(z,X){this._doCryptBlock(z,X,this._subKeys)},decryptBlock:function(z,X){this._doCryptBlock(z,X,this._invSubKeys)},_doCryptBlock:function(z,X,U){this._lBlock=z[X],this._rBlock=z[X+1],C.call(this,4,252645135),C.call(this,16,65535),B.call(this,2,858993459),B.call(this,8,16711935),C.call(this,1,1431655765);for(var Z=0;Z<16;Z++){for(var ee=U[Z],ae=this._lBlock,ge=this._rBlock,Ce=0,De=0;De<8;De++)Ce|=x[De][((ge^ee[De])&S[De])>>>0];this._lBlock=ge,this._rBlock=ae^Ce}var we=this._lBlock;this._lBlock=this._rBlock,this._rBlock=we,C.call(this,1,1431655765),B.call(this,8,16711935),B.call(this,2,858993459),C.call(this,16,65535),C.call(this,4,252645135),z[X]=this._lBlock,z[X+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function C(z,X){var U=(this._lBlock>>>z^this._rBlock)&X;this._rBlock^=U,this._lBlock^=U<<z}function B(z,X){var U=(this._rBlock>>>z^this._lBlock)&X;this._lBlock^=U,this._rBlock^=U<<z}W.DES=p._createHelper(O);var N=k.TripleDES=p.extend({_doReset:function(){var X=this._key.words;if(2!==X.length&&4!==X.length&&X.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var U=X.slice(0,2),Z=X.length<4?X.slice(0,2):X.slice(2,4),ee=X.length<6?X.slice(0,2):X.slice(4,6);this._des1=O.createEncryptor(G.create(U)),this._des2=O.createEncryptor(G.create(Z)),this._des3=O.createEncryptor(G.create(ee))},encryptBlock:function(z,X){this._des1.encryptBlock(z,X),this._des2.decryptBlock(z,X),this._des3.encryptBlock(z,X)},decryptBlock:function(z,X){this._des3.decryptBlock(z,X),this._des2.encryptBlock(z,X),this._des1.decryptBlock(z,X)},keySize:6,ivSize:2,blockSize:2});W.TripleDES=p._createHelper(N)}(),j.TripleDES)},401:function(ye,ue,H){var G,p,k,P,j;ye.exports=(j=H(7585),p=(G=j.lib).Base,k=G.WordArray,(P=j.x64={}).Word=p.extend({init:function(x,S){this.high=x,this.low=S}}),P.WordArray=p.extend({init:function(x,S){x=this.words=x||[],this.sigBytes=null!=S?S:8*x.length},toX32:function(){for(var x=this.words,S=x.length,O=[],C=0;C<S;C++){var B=x[C];O.push(B.high),O.push(B.low)}return k.create(O,this.sigBytes)},clone:function(){for(var x=p.clone.call(this),S=x.words=this.words.slice(0),O=S.length,C=0;C<O;C++)S[C]=S[C].clone();return x}}),j)},3684:(ye,ue,H)=>{"use strict";ue.utils=H(7451),ue.Cipher=H(8170),ue.DES=H(4631),ue.CBC=H(9454),ue.EDE=H(1862)},9454:(ye,ue,H)=>{"use strict";var j=H(2391),W=H(3894),I={};function G(k){j.equal(k.length,8,"Invalid IV length"),this.iv=new Array(8);for(var P=0;P<this.iv.length;P++)this.iv[P]=k[P]}ue.instantiate=function p(k){function P(S){k.call(this,S),this._cbcInit()}W(P,k);for(var E=Object.keys(I),R=0;R<E.length;R++){var x=E[R];P.prototype[x]=I[x]}return P.create=function(O){return new P(O)},P},I._cbcInit=function(){var P=new G(this.options.iv);this._cbcState=P},I._update=function(P,E,R,x){var O=this.constructor.super_.prototype,C=this._cbcState.iv;if("encrypt"===this.type){for(var B=0;B<this.blockSize;B++)C[B]^=P[E+B];for(O._update.call(this,C,0,R,x),B=0;B<this.blockSize;B++)C[B]=R[x+B]}else{for(O._update.call(this,P,E,R,x),B=0;B<this.blockSize;B++)R[x+B]^=C[B];for(B=0;B<this.blockSize;B++)C[B]=P[E+B]}}},8170:(ye,ue,H)=>{"use strict";var j=H(2391);function W(I){this.options=I,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}ye.exports=W,W.prototype._init=function(){},W.prototype.update=function(G){return 0===G.length?[]:"decrypt"===this.type?this._updateDecrypt(G):this._updateEncrypt(G)},W.prototype._buffer=function(G,p){for(var k=Math.min(this.buffer.length-this.bufferOff,G.length-p),P=0;P<k;P++)this.buffer[this.bufferOff+P]=G[p+P];return this.bufferOff+=k,k},W.prototype._flushBuffer=function(G,p){return this._update(this.buffer,0,G,p),this.bufferOff=0,this.blockSize},W.prototype._updateEncrypt=function(G){var p=0,k=0,E=new Array(((this.bufferOff+G.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(p+=this._buffer(G,p),this.bufferOff===this.buffer.length&&(k+=this._flushBuffer(E,k)));for(var R=G.length-(G.length-p)%this.blockSize;p<R;p+=this.blockSize)this._update(G,p,E,k),k+=this.blockSize;for(;p<G.length;p++,this.bufferOff++)this.buffer[this.bufferOff]=G[p];return E},W.prototype._updateDecrypt=function(G){for(var p=0,k=0,P=Math.ceil((this.bufferOff+G.length)/this.blockSize)-1,E=new Array(P*this.blockSize);P>0;P--)p+=this._buffer(G,p),k+=this._flushBuffer(E,k);return p+=this._buffer(G,p),E},W.prototype.final=function(G){var p,k;return G&&(p=this.update(G)),k="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),p?p.concat(k):k},W.prototype._pad=function(G,p){if(0===p)return!1;for(;p<G.length;)G[p++]=0;return!0},W.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var G=new Array(this.blockSize);return this._update(this.buffer,0,G,0),G},W.prototype._unpad=function(G){return G},W.prototype._finalDecrypt=function(){j.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var G=new Array(this.blockSize);return this._flushBuffer(G,0),this._unpad(G)}},4631:(ye,ue,H)=>{"use strict";var j=H(2391),W=H(3894),I=H(7451),G=H(8170);function p(){this.tmp=new Array(2),this.keys=null}function k(E){G.call(this,E);var R=new p;this._desState=R,this.deriveKeys(R,E.key)}W(k,G),ye.exports=k,k.create=function(R){return new k(R)};var P=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];k.prototype.deriveKeys=function(R,x){R.keys=new Array(32),j.equal(x.length,this.blockSize,"Invalid key length");var S=I.readUInt32BE(x,0),O=I.readUInt32BE(x,4);I.pc1(S,O,R.tmp,0),S=R.tmp[0],O=R.tmp[1];for(var C=0;C<R.keys.length;C+=2){var B=P[C>>>1];S=I.r28shl(S,B),O=I.r28shl(O,B),I.pc2(S,O,R.keys,C)}},k.prototype._update=function(R,x,S,O){var C=this._desState,B=I.readUInt32BE(R,x),N=I.readUInt32BE(R,x+4);I.ip(B,N,C.tmp,0),B=C.tmp[0],N=C.tmp[1],"encrypt"===this.type?this._encrypt(C,B,N,C.tmp,0):this._decrypt(C,B,N,C.tmp,0),N=C.tmp[1],I.writeUInt32BE(S,B=C.tmp[0],O),I.writeUInt32BE(S,N,O+4)},k.prototype._pad=function(R,x){for(var S=R.length-x,O=x;O<R.length;O++)R[O]=S;return!0},k.prototype._unpad=function(R){for(var x=R[R.length-1],S=R.length-x;S<R.length;S++)j.equal(R[S],x);return R.slice(0,R.length-x)},k.prototype._encrypt=function(R,x,S,O,C){for(var B=x,N=S,z=0;z<R.keys.length;z+=2){var X=R.keys[z],U=R.keys[z+1];I.expand(N,R.tmp,0);var Z=I.substitute(X^=R.tmp[0],U^=R.tmp[1]),ae=N;N=(B^I.permute(Z))>>>0,B=ae}I.rip(N,B,O,C)},k.prototype._decrypt=function(R,x,S,O,C){for(var B=S,N=x,z=R.keys.length-2;z>=0;z-=2){var X=R.keys[z],U=R.keys[z+1];I.expand(B,R.tmp,0);var Z=I.substitute(X^=R.tmp[0],U^=R.tmp[1]),ae=B;B=(N^I.permute(Z))>>>0,N=ae}I.rip(B,N,O,C)}},1862:(ye,ue,H)=>{"use strict";var j=H(2391),W=H(3894),I=H(8170),G=H(4631);function p(P,E){j.equal(E.length,24,"Invalid key length");var R=E.slice(0,8),x=E.slice(8,16),S=E.slice(16,24);this.ciphers="encrypt"===P?[G.create({type:"encrypt",key:R}),G.create({type:"decrypt",key:x}),G.create({type:"encrypt",key:S})]:[G.create({type:"decrypt",key:S}),G.create({type:"encrypt",key:x}),G.create({type:"decrypt",key:R})]}function k(P){I.call(this,P);var E=new p(this.type,this.options.key);this._edeState=E}W(k,I),ye.exports=k,k.create=function(E){return new k(E)},k.prototype._update=function(E,R,x,S){var O=this._edeState;O.ciphers[0]._update(E,R,x,S),O.ciphers[1]._update(x,S,x,S),O.ciphers[2]._update(x,S,x,S)},k.prototype._pad=G.prototype._pad,k.prototype._unpad=G.prototype._unpad},7451:(ye,ue)=>{"use strict";ue.readUInt32BE=function(G,p){return(G[0+p]<<24|G[1+p]<<16|G[2+p]<<8|G[3+p])>>>0},ue.writeUInt32BE=function(G,p,k){G[0+k]=p>>>24,G[1+k]=p>>>16&255,G[2+k]=p>>>8&255,G[3+k]=255&p},ue.ip=function(G,p,k,P){for(var E=0,R=0,x=6;x>=0;x-=2){for(var S=0;S<=24;S+=8)E<<=1,E|=p>>>S+x&1;for(S=0;S<=24;S+=8)E<<=1,E|=G>>>S+x&1}for(x=6;x>=0;x-=2){for(S=1;S<=25;S+=8)R<<=1,R|=p>>>S+x&1;for(S=1;S<=25;S+=8)R<<=1,R|=G>>>S+x&1}k[P+0]=E>>>0,k[P+1]=R>>>0},ue.rip=function(G,p,k,P){for(var E=0,R=0,x=0;x<4;x++)for(var S=24;S>=0;S-=8)E<<=1,E|=p>>>S+x&1,E<<=1,E|=G>>>S+x&1;for(x=4;x<8;x++)for(S=24;S>=0;S-=8)R<<=1,R|=p>>>S+x&1,R<<=1,R|=G>>>S+x&1;k[P+0]=E>>>0,k[P+1]=R>>>0},ue.pc1=function(G,p,k,P){for(var E=0,R=0,x=7;x>=5;x--){for(var S=0;S<=24;S+=8)E<<=1,E|=p>>S+x&1;for(S=0;S<=24;S+=8)E<<=1,E|=G>>S+x&1}for(S=0;S<=24;S+=8)E<<=1,E|=p>>S+x&1;for(x=1;x<=3;x++){for(S=0;S<=24;S+=8)R<<=1,R|=p>>S+x&1;for(S=0;S<=24;S+=8)R<<=1,R|=G>>S+x&1}for(S=0;S<=24;S+=8)R<<=1,R|=G>>S+x&1;k[P+0]=E>>>0,k[P+1]=R>>>0},ue.r28shl=function(G,p){return G<<p&268435455|G>>>28-p};var H=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];ue.pc2=function(G,p,k,P){for(var E=0,R=0,x=H.length>>>1,S=0;S<x;S++)E<<=1,E|=G>>>H[S]&1;for(S=x;S<H.length;S++)R<<=1,R|=p>>>H[S]&1;k[P+0]=E>>>0,k[P+1]=R>>>0},ue.expand=function(G,p,k){var P=0,E=0;P=(1&G)<<5|G>>>27;for(var R=23;R>=15;R-=4)P<<=6,P|=G>>>R&63;for(R=11;R>=3;R-=4)E|=G>>>R&63,E<<=6;E|=(31&G)<<1|G>>>31,p[k+0]=P>>>0,p[k+1]=E>>>0};var j=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];ue.substitute=function(G,p){for(var k=0,P=0;P<4;P++)k<<=4,k|=j[64*P+(G>>>18-6*P&63)];for(P=0;P<4;P++)k<<=4,k|=j[256+64*P+(p>>>18-6*P&63)];return k>>>0};var W=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];ue.permute=function(G){for(var p=0,k=0;k<W.length;k++)p<<=1,p|=G>>>W[k]&1;return p>>>0},ue.padSplit=function(G,p,k){for(var P=G.toString(2);P.length<p;)P="0"+P;for(var E=[],R=0;R<p;R+=k)E.push(P.slice(R,R+k));return E.join(" ")}},8829:(ye,ue,H)=>{var j=H(5563),W=H(9799),I=H(1419),p={binary:!0,hex:!0,base64:!0};ue.DiffieHellmanGroup=ue.createDiffieHellmanGroup=ue.getDiffieHellman=function G(P){var E=new Buffer(W[P].prime,"hex"),R=new Buffer(W[P].gen,"hex");return new I(E,R)},ue.createDiffieHellman=ue.DiffieHellman=function k(P,E,R,x){return Buffer.isBuffer(E)||void 0===p[E]?k(P,"binary",E,R):(E=E||"binary",x=x||"binary",R=R||new Buffer([2]),Buffer.isBuffer(R)||(R=new Buffer(R,x)),"number"==typeof P?new I(j(P,R),R,!0):(Buffer.isBuffer(P)||(P=new Buffer(P,E)),new I(P,R,!0)))}},1419:(ye,ue,H)=>{var j=H(8313),I=new(H(7079)),G=new j(24),p=new j(11),k=new j(10),P=new j(3),E=new j(7),R=H(5563),x=H(3753);function S(X,U){return U=U||"utf8",Buffer.isBuffer(X)||(X=new Buffer(X,U)),this._pub=new j(X),this}function O(X,U){return U=U||"utf8",Buffer.isBuffer(X)||(X=new Buffer(X,U)),this._priv=new j(X),this}ye.exports=N;var C={};function N(X,U,Z){this.setGenerator(U),this.__prime=new j(X),this._prime=j.mont(this.__prime),this._primeLen=X.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,Z?(this.setPublicKey=S,this.setPrivateKey=O):this._primeCode=8}function z(X,U){var Z=new Buffer(X.toArray());return U?Z.toString(U):Z}Object.defineProperty(N.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function B(X,U){var Z=U.toString("hex"),ee=[Z,X.toString(16)].join("_");if(ee in C)return C[ee];var ge,ae=0;if(X.isEven()||!R.simpleSieve||!R.fermatTest(X)||!I.test(X))return ae+=1,C[ee]=ae+="02"===Z||"05"===Z?8:4,ae;switch(I.test(X.shrn(1))||(ae+=2),Z){case"02":X.mod(G).cmp(p)&&(ae+=8);break;case"05":(ge=X.mod(k)).cmp(P)&&ge.cmp(E)&&(ae+=8);break;default:ae+=4}return C[ee]=ae,ae}(this.__prime,this.__gen)),this._primeCode}}),N.prototype.generateKeys=function(){return this._priv||(this._priv=new j(x(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},N.prototype.computeSecret=function(X){var U=(X=(X=new j(X)).toRed(this._prime)).redPow(this._priv).fromRed(),Z=new Buffer(U.toArray()),ee=this.getPrime();if(Z.length<ee.length){var ae=new Buffer(ee.length-Z.length);ae.fill(0),Z=Buffer.concat([ae,Z])}return Z},N.prototype.getPublicKey=function(U){return z(this._pub,U)},N.prototype.getPrivateKey=function(U){return z(this._priv,U)},N.prototype.getPrime=function(X){return z(this.__prime,X)},N.prototype.getGenerator=function(X){return z(this._gen,X)},N.prototype.setGenerator=function(X,U){return U=U||"utf8",Buffer.isBuffer(X)||(X=new Buffer(X,U)),this.__gen=X,this._gen=new j(X),this}},5563:(ye,ue,H)=>{var j=H(3753);ye.exports=ae,ae.simpleSieve=Z,ae.fermatTest=ee;var W=H(8313),I=new W(24),p=new(H(7079)),k=new W(1),P=new W(2),E=new W(5),S=(new W(16),new W(8),new W(10)),O=new W(3),B=(new W(7),new W(11)),N=new W(4),X=(new W(12),null);function Z(ge){for(var Ce=function U(){if(null!==X)return X;var Ce=[];Ce[0]=2;for(var De=1,we=3;we<1048576;we+=2){for(var Oe=Math.ceil(Math.sqrt(we)),y=0;y<De&&Ce[y]<=Oe&&we%Ce[y]!=0;y++);De!==y&&Ce[y]<=Oe||(Ce[De++]=we)}return X=Ce,Ce}(),De=0;De<Ce.length;De++)if(0===ge.modn(Ce[De]))return 0===ge.cmpn(Ce[De]);return!0}function ee(ge){var Ce=W.mont(ge);return 0===P.toRed(Ce).redPow(ge.subn(1)).fromRed().cmpn(1)}function ae(ge,Ce){if(ge<16)return new W(2===Ce||5===Ce?[140,123]:[140,39]);Ce=new W(Ce);for(var De,we;;){for(De=new W(j(Math.ceil(ge/8)));De.bitLength()>ge;)De.ishrn(1);if(De.isEven()&&De.iadd(k),De.testn(1)||De.iadd(P),Ce.cmp(P)){if(!Ce.cmp(E))for(;De.mod(S).cmp(O);)De.iadd(N)}else for(;De.mod(I).cmp(B);)De.iadd(N);if(Z(we=De.shrn(1))&&Z(De)&&ee(we)&&ee(De)&&p.test(we)&&p.test(De))return De}}},8313:function(ye,ue,H){!function(j,W){"use strict";function I(y,o){if(!y)throw new Error(o||"Assertion failed")}function G(y,o){y.super_=o;var l=function(){};l.prototype=o.prototype,y.prototype=new l,y.prototype.constructor=y}function p(y,o,l){if(p.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,null!==y&&(("le"===o||"be"===o)&&(l=o,o=10),this._init(y||0,o||10,l||"be"))}var k;"object"==typeof j?j.exports=p:W.BN=p,p.BN=p,p.wordSize=26;try{k="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:H(7748).Buffer}catch(y){}function P(y,o){var l=y.charCodeAt(o);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function E(y,o,l){var f=P(y,l);return l-1>=o&&(f|=P(y,l-1)<<4),f}function R(y,o,l,f){for(var u=0,h=Math.min(y.length,l),b=o;b<h;b++){var w=y.charCodeAt(b)-48;u*=f,u+=w>=49?w-49+10:w>=17?w-17+10:w}return u}p.isBN=function(o){return o instanceof p||null!==o&&"object"==typeof o&&o.constructor.wordSize===p.wordSize&&Array.isArray(o.words)},p.max=function(o,l){return o.cmp(l)>0?o:l},p.min=function(o,l){return o.cmp(l)<0?o:l},p.prototype._init=function(o,l,f){if("number"==typeof o)return this._initNumber(o,l,f);if("object"==typeof o)return this._initArray(o,l,f);"hex"===l&&(l=16),I(l===(0|l)&&l>=2&&l<=36);var u=0;"-"===(o=o.toString().replace(/\s+/g,""))[0]&&(u++,this.negative=1),u<o.length&&(16===l?this._parseHex(o,u,f):(this._parseBase(o,l,u),"le"===f&&this._initArray(this.toArray(),l,f)))},p.prototype._initNumber=function(o,l,f){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[67108863&o],this.length=1):o<4503599627370496?(this.words=[67108863&o,o/67108864&67108863],this.length=2):(I(o<9007199254740992),this.words=[67108863&o,o/67108864&67108863,1],this.length=3),"le"===f&&this._initArray(this.toArray(),l,f)},p.prototype._initArray=function(o,l,f){if(I("number"==typeof o.length),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var h,b,w=0;if("be"===f)for(u=o.length-1,h=0;u>=0;u-=3)this.words[h]|=(b=o[u]|o[u-1]<<8|o[u-2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);else if("le"===f)for(u=0,h=0;u<o.length;u+=3)this.words[h]|=(b=o[u]|o[u+1]<<8|o[u+2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);return this.strip()},p.prototype._parseHex=function(o,l,f){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var w,h=0,b=0;if("be"===f)for(u=o.length-1;u>=l;u-=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;else for(u=(o.length-l)%2==0?l+1:l;u<o.length;u+=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;this.strip()},p.prototype._parseBase=function(o,l,f){this.words=[0],this.length=1;for(var u=0,h=1;h<=67108863;h*=l)u++;u--,h=h/l|0;for(var b=o.length-f,w=b%u,g=Math.min(b,b-w)+f,s=0,v=f;v<g;v+=u)s=R(o,v,v+u,l),this.imuln(h),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==w){var $=1;for(s=R(o,v,o.length,l),v=0;v<w;v++)$*=l;this.imuln($),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},p.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red},p.prototype.clone=function(){var o=new p(null);return this.copy(o),o},p.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},p.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},p.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},p.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function B(y,o,l){l.negative=o.negative^y.negative;var f=y.length+o.length|0;l.length=f,f=f-1|0;var u=0|y.words[0],h=0|o.words[0],b=u*h,g=b/67108864|0;l.words[0]=67108863&b;for(var s=1;s<f;s++){for(var v=g>>>26,$=67108863&g,L=Math.min(s,o.length-1),ie=Math.max(0,s-y.length+1);ie<=L;ie++)v+=(b=(u=0|y.words[s-ie|0])*(h=0|o.words[ie])+$)/67108864|0,$=67108863&b;l.words[s]=0|$,g=0|v}return 0!==g?l.words[s]=0|g:l.length--,l.strip()}p.prototype.toString=function(o,l){var f;if(l=0|l||1,16===(o=o||10)||"hex"===o){f="";for(var u=0,h=0,b=0;b<this.length;b++){var w=this.words[b],g=(16777215&(w<<u|h)).toString(16);f=0!=(h=w>>>24-u&16777215)||b!==this.length-1?x[6-g.length]+g+f:g+f,(u+=2)>=26&&(u-=26,b--)}for(0!==h&&(f=h.toString(16)+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}if(o===(0|o)&&o>=2&&o<=36){var s=S[o],v=O[o];f="";var $=this.clone();for($.negative=0;!$.isZero();){var L=$.modn(v).toString(o);f=($=$.idivn(v)).isZero()?L+f:x[s-L.length]+L+f}for(this.isZero()&&(f="0"+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}I(!1,"Base should be between 2 and 36")},p.prototype.toNumber=function(){var o=this.words[0];return 2===this.length?o+=67108864*this.words[1]:3===this.length&&1===this.words[2]?o+=4503599627370496+67108864*this.words[1]:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-o:o},p.prototype.toJSON=function(){return this.toString(16)},p.prototype.toBuffer=function(o,l){return I(void 0!==k),this.toArrayLike(k,o,l)},p.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)},p.prototype.toArrayLike=function(o,l,f){var u=this.byteLength(),h=f||Math.max(1,u);I(u<=h,"byte array longer than desired length"),I(h>0,"Requested array length <= 0"),this.strip();var g,s,b="le"===l,w=new o(h),v=this.clone();if(b){for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[s]=g;for(;s<h;s++)w[s]=0}else{for(s=0;s<h-u;s++)w[s]=0;for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[h-s-1]=g}return w},p.prototype._countBits=Math.clz32?function(o){return 32-Math.clz32(o)}:function(o){var l=o,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},p.prototype._zeroBits=function(o){if(0===o)return 26;var l=o,f=0;return 0==(8191&l)&&(f+=13,l>>>=13),0==(127&l)&&(f+=7,l>>>=7),0==(15&l)&&(f+=4,l>>>=4),0==(3&l)&&(f+=2,l>>>=2),0==(1&l)&&f++,f},p.prototype.bitLength=function(){var l=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+l},p.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(o+=f,26!==f)break}return o},p.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},p.prototype.toTwos=function(o){return 0!==this.negative?this.abs().inotn(o).iaddn(1):this.clone()},p.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},p.prototype.isNeg=function(){return 0!==this.negative},p.prototype.neg=function(){return this.clone().ineg()},p.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},p.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this.strip()},p.prototype.ior=function(o){return I(0==(this.negative|o.negative)),this.iuor(o)},p.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},p.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},p.prototype.iuand=function(o){var l;l=this.length>o.length?o:this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&o.words[f];return this.length=l.length,this.strip()},p.prototype.iand=function(o){return I(0==(this.negative|o.negative)),this.iuand(o)},p.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},p.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},p.prototype.iuxor=function(o){var l,f;this.length>o.length?(l=this,f=o):(l=o,f=this);for(var u=0;u<f.length;u++)this.words[u]=l.words[u]^f.words[u];if(this!==l)for(;u<l.length;u++)this.words[u]=l.words[u];return this.length=l.length,this.strip()},p.prototype.ixor=function(o){return I(0==(this.negative|o.negative)),this.iuxor(o)},p.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},p.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},p.prototype.inotn=function(o){I("number"==typeof o&&o>=0);var l=0|Math.ceil(o/26),f=o%26;this._expand(l),f>0&&l--;for(var u=0;u<l;u++)this.words[u]=67108863&~this.words[u];return f>0&&(this.words[u]=~this.words[u]&67108863>>26-f),this.strip()},p.prototype.notn=function(o){return this.clone().inotn(o)},p.prototype.setn=function(o,l){I("number"==typeof o&&o>=0);var f=o/26|0,u=o%26;return this._expand(f+1),this.words[f]=l?this.words[f]|1<<u:this.words[f]&~(1<<u),this.strip()},p.prototype.iadd=function(o){var l,f,u;if(0!==this.negative&&0===o.negative)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(0===this.negative&&0!==o.negative)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();this.length>o.length?(f=this,u=o):(f=o,u=this);for(var h=0,b=0;b<u.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+(0|u.words[b])+h),h=l>>>26;for(;0!==h&&b<f.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+h),h=l>>>26;if(this.length=f.length,0!==h)this.words[this.length]=h,this.length++;else if(f!==this)for(;b<f.length;b++)this.words[b]=f.words[b];return this},p.prototype.add=function(o){var l;return 0!==o.negative&&0===this.negative?(o.negative=0,l=this.sub(o),o.negative^=1,l):0===o.negative&&0!==this.negative?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},p.prototype.isub=function(o){if(0!==o.negative){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var u,h,f=this.cmp(o);if(0===f)return this.negative=0,this.length=1,this.words[0]=0,this;f>0?(u=this,h=o):(u=o,h=this);for(var b=0,w=0;w<h.length;w++)b=(l=(0|u.words[w])-(0|h.words[w])+b)>>26,this.words[w]=67108863&l;for(;0!==b&&w<u.length;w++)b=(l=(0|u.words[w])+b)>>26,this.words[w]=67108863&l;if(0===b&&w<u.length&&u!==this)for(;w<u.length;w++)this.words[w]=u.words[w];return this.length=Math.max(this.length,w),u!==this&&(this.negative=1),this.strip()},p.prototype.sub=function(o){return this.clone().isub(o)};var N=function(o,l,f){var g,s,v,u=o.words,h=l.words,b=f.words,w=0,$=0|u[0],L=8191&$,ie=$>>>13,Se=0|u[1],ke=8191&Se,Be=Se>>>13,Pe=0|u[2],Te=8191&Pe,Ie=Pe>>>13,Vt=0|u[3],je=8191&Vt,se=Vt>>>13,Ee=0|u[4],Re=8191&Ee,Ge=Ee>>>13,ui=0|u[5],qe=8191&ui,Ye=ui>>>13,xi=0|u[6],et=8191&xi,Ke=xi>>>13,qi=0|u[7],ut=8191&qi,Qe=qi>>>13,rn=0|u[8],le=8191&rn,J=rn>>>13,re=0|u[9],ve=8191&re,xe=re>>>13,ot=0|h[0],Ne=8191&ot,Xe=ot>>>13,Pi=0|h[1],it=8191&Pi,rt=Pi>>>13,bi=0|h[2],ht=8191&bi,_t=bi>>>13,Sr=0|h[3],gt=8191&Sr,vt=Sr>>>13,Dr=0|h[4],st=8191&Dr,yt=Dr>>>13,Ir=0|h[5],mt=8191&Ir,wt=Ir>>>13,Cr=0|h[6],ct=8191&Cr,ft=Cr>>>13,An=0|h[7],St=8191&An,at=An>>>13,Tr=0|h[8],dt=8191&Tr,Mt=Tr>>>13,$r=0|h[9],Tt=8191&$r,Ct=$r>>>13;f.negative=o.negative^l.negative,f.length=19;var Fn=(w+(g=Math.imul(L,Ne))|0)+((8191&(s=(s=Math.imul(L,Xe))+Math.imul(ie,Ne)|0))<<13)|0;w=((v=Math.imul(ie,Xe))+(s>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,g=Math.imul(ke,Ne),s=(s=Math.imul(ke,Xe))+Math.imul(Be,Ne)|0,v=Math.imul(Be,Xe);var Ri=(w+(g=g+Math.imul(L,it)|0)|0)+((8191&(s=(s=s+Math.imul(L,rt)|0)+Math.imul(ie,it)|0))<<13)|0;w=((v=v+Math.imul(ie,rt)|0)+(s>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,g=Math.imul(Te,Ne),s=(s=Math.imul(Te,Xe))+Math.imul(Ie,Ne)|0,v=Math.imul(Ie,Xe),g=g+Math.imul(ke,it)|0,s=(s=s+Math.imul(ke,rt)|0)+Math.imul(Be,it)|0,v=v+Math.imul(Be,rt)|0;var Oi=(w+(g=g+Math.imul(L,ht)|0)|0)+((8191&(s=(s=s+Math.imul(L,_t)|0)+Math.imul(ie,ht)|0))<<13)|0;w=((v=v+Math.imul(ie,_t)|0)+(s>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,g=Math.imul(je,Ne),s=(s=Math.imul(je,Xe))+Math.imul(se,Ne)|0,v=Math.imul(se,Xe),g=g+Math.imul(Te,it)|0,s=(s=s+Math.imul(Te,rt)|0)+Math.imul(Ie,it)|0,v=v+Math.imul(Ie,rt)|0,g=g+Math.imul(ke,ht)|0,s=(s=s+Math.imul(ke,_t)|0)+Math.imul(Be,ht)|0,v=v+Math.imul(Be,_t)|0;var zn=(w+(g=g+Math.imul(L,gt)|0)|0)+((8191&(s=(s=s+Math.imul(L,vt)|0)+Math.imul(ie,gt)|0))<<13)|0;w=((v=v+Math.imul(ie,vt)|0)+(s>>>13)|0)+(zn>>>26)|0,zn&=67108863,g=Math.imul(Re,Ne),s=(s=Math.imul(Re,Xe))+Math.imul(Ge,Ne)|0,v=Math.imul(Ge,Xe),g=g+Math.imul(je,it)|0,s=(s=s+Math.imul(je,rt)|0)+Math.imul(se,it)|0,v=v+Math.imul(se,rt)|0,g=g+Math.imul(Te,ht)|0,s=(s=s+Math.imul(Te,_t)|0)+Math.imul(Ie,ht)|0,v=v+Math.imul(Ie,_t)|0,g=g+Math.imul(ke,gt)|0,s=(s=s+Math.imul(ke,vt)|0)+Math.imul(Be,gt)|0,v=v+Math.imul(Be,vt)|0;var jn=(w+(g=g+Math.imul(L,st)|0)|0)+((8191&(s=(s=s+Math.imul(L,yt)|0)+Math.imul(ie,st)|0))<<13)|0;w=((v=v+Math.imul(ie,yt)|0)+(s>>>13)|0)+(jn>>>26)|0,jn&=67108863,g=Math.imul(qe,Ne),s=(s=Math.imul(qe,Xe))+Math.imul(Ye,Ne)|0,v=Math.imul(Ye,Xe),g=g+Math.imul(Re,it)|0,s=(s=s+Math.imul(Re,rt)|0)+Math.imul(Ge,it)|0,v=v+Math.imul(Ge,rt)|0,g=g+Math.imul(je,ht)|0,s=(s=s+Math.imul(je,_t)|0)+Math.imul(se,ht)|0,v=v+Math.imul(se,_t)|0,g=g+Math.imul(Te,gt)|0,s=(s=s+Math.imul(Te,vt)|0)+Math.imul(Ie,gt)|0,v=v+Math.imul(Ie,vt)|0,g=g+Math.imul(ke,st)|0,s=(s=s+Math.imul(ke,yt)|0)+Math.imul(Be,st)|0,v=v+Math.imul(Be,yt)|0;var tr=(w+(g=g+Math.imul(L,mt)|0)|0)+((8191&(s=(s=s+Math.imul(L,wt)|0)+Math.imul(ie,mt)|0))<<13)|0;w=((v=v+Math.imul(ie,wt)|0)+(s>>>13)|0)+(tr>>>26)|0,tr&=67108863,g=Math.imul(et,Ne),s=(s=Math.imul(et,Xe))+Math.imul(Ke,Ne)|0,v=Math.imul(Ke,Xe),g=g+Math.imul(qe,it)|0,s=(s=s+Math.imul(qe,rt)|0)+Math.imul(Ye,it)|0,v=v+Math.imul(Ye,rt)|0,g=g+Math.imul(Re,ht)|0,s=(s=s+Math.imul(Re,_t)|0)+Math.imul(Ge,ht)|0,v=v+Math.imul(Ge,_t)|0,g=g+Math.imul(je,gt)|0,s=(s=s+Math.imul(je,vt)|0)+Math.imul(se,gt)|0,v=v+Math.imul(se,vt)|0,g=g+Math.imul(Te,st)|0,s=(s=s+Math.imul(Te,yt)|0)+Math.imul(Ie,st)|0,v=v+Math.imul(Ie,yt)|0,g=g+Math.imul(ke,mt)|0,s=(s=s+Math.imul(ke,wt)|0)+Math.imul(Be,mt)|0,v=v+Math.imul(Be,wt)|0;var ir=(w+(g=g+Math.imul(L,ct)|0)|0)+((8191&(s=(s=s+Math.imul(L,ft)|0)+Math.imul(ie,ct)|0))<<13)|0;w=((v=v+Math.imul(ie,ft)|0)+(s>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ut,Ne),s=(s=Math.imul(ut,Xe))+Math.imul(Qe,Ne)|0,v=Math.imul(Qe,Xe),g=g+Math.imul(et,it)|0,s=(s=s+Math.imul(et,rt)|0)+Math.imul(Ke,it)|0,v=v+Math.imul(Ke,rt)|0,g=g+Math.imul(qe,ht)|0,s=(s=s+Math.imul(qe,_t)|0)+Math.imul(Ye,ht)|0,v=v+Math.imul(Ye,_t)|0,g=g+Math.imul(Re,gt)|0,s=(s=s+Math.imul(Re,vt)|0)+Math.imul(Ge,gt)|0,v=v+Math.imul(Ge,vt)|0,g=g+Math.imul(je,st)|0,s=(s=s+Math.imul(je,yt)|0)+Math.imul(se,st)|0,v=v+Math.imul(se,yt)|0,g=g+Math.imul(Te,mt)|0,s=(s=s+Math.imul(Te,wt)|0)+Math.imul(Ie,mt)|0,v=v+Math.imul(Ie,wt)|0,g=g+Math.imul(ke,ct)|0,s=(s=s+Math.imul(ke,ft)|0)+Math.imul(Be,ct)|0,v=v+Math.imul(Be,ft)|0;var nr=(w+(g=g+Math.imul(L,St)|0)|0)+((8191&(s=(s=s+Math.imul(L,at)|0)+Math.imul(ie,St)|0))<<13)|0;w=((v=v+Math.imul(ie,at)|0)+(s>>>13)|0)+(nr>>>26)|0,nr&=67108863,g=Math.imul(le,Ne),s=(s=Math.imul(le,Xe))+Math.imul(J,Ne)|0,v=Math.imul(J,Xe),g=g+Math.imul(ut,it)|0,s=(s=s+Math.imul(ut,rt)|0)+Math.imul(Qe,it)|0,v=v+Math.imul(Qe,rt)|0,g=g+Math.imul(et,ht)|0,s=(s=s+Math.imul(et,_t)|0)+Math.imul(Ke,ht)|0,v=v+Math.imul(Ke,_t)|0,g=g+Math.imul(qe,gt)|0,s=(s=s+Math.imul(qe,vt)|0)+Math.imul(Ye,gt)|0,v=v+Math.imul(Ye,vt)|0,g=g+Math.imul(Re,st)|0,s=(s=s+Math.imul(Re,yt)|0)+Math.imul(Ge,st)|0,v=v+Math.imul(Ge,yt)|0,g=g+Math.imul(je,mt)|0,s=(s=s+Math.imul(je,wt)|0)+Math.imul(se,mt)|0,v=v+Math.imul(se,wt)|0,g=g+Math.imul(Te,ct)|0,s=(s=s+Math.imul(Te,ft)|0)+Math.imul(Ie,ct)|0,v=v+Math.imul(Ie,ft)|0,g=g+Math.imul(ke,St)|0,s=(s=s+Math.imul(ke,at)|0)+Math.imul(Be,St)|0,v=v+Math.imul(Be,at)|0;var rr=(w+(g=g+Math.imul(L,dt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Mt)|0)+Math.imul(ie,dt)|0))<<13)|0;w=((v=v+Math.imul(ie,Mt)|0)+(s>>>13)|0)+(rr>>>26)|0,rr&=67108863,g=Math.imul(ve,Ne),s=(s=Math.imul(ve,Xe))+Math.imul(xe,Ne)|0,v=Math.imul(xe,Xe),g=g+Math.imul(le,it)|0,s=(s=s+Math.imul(le,rt)|0)+Math.imul(J,it)|0,v=v+Math.imul(J,rt)|0,g=g+Math.imul(ut,ht)|0,s=(s=s+Math.imul(ut,_t)|0)+Math.imul(Qe,ht)|0,v=v+Math.imul(Qe,_t)|0,g=g+Math.imul(et,gt)|0,s=(s=s+Math.imul(et,vt)|0)+Math.imul(Ke,gt)|0,v=v+Math.imul(Ke,vt)|0,g=g+Math.imul(qe,st)|0,s=(s=s+Math.imul(qe,yt)|0)+Math.imul(Ye,st)|0,v=v+Math.imul(Ye,yt)|0,g=g+Math.imul(Re,mt)|0,s=(s=s+Math.imul(Re,wt)|0)+Math.imul(Ge,mt)|0,v=v+Math.imul(Ge,wt)|0,g=g+Math.imul(je,ct)|0,s=(s=s+Math.imul(je,ft)|0)+Math.imul(se,ct)|0,v=v+Math.imul(se,ft)|0,g=g+Math.imul(Te,St)|0,s=(s=s+Math.imul(Te,at)|0)+Math.imul(Ie,St)|0,v=v+Math.imul(Ie,at)|0,g=g+Math.imul(ke,dt)|0,s=(s=s+Math.imul(ke,Mt)|0)+Math.imul(Be,dt)|0,v=v+Math.imul(Be,Mt)|0;var qn=(w+(g=g+Math.imul(L,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Ct)|0)+Math.imul(ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(ie,Ct)|0)+(s>>>13)|0)+(qn>>>26)|0,qn&=67108863,g=Math.imul(ve,it),s=(s=Math.imul(ve,rt))+Math.imul(xe,it)|0,v=Math.imul(xe,rt),g=g+Math.imul(le,ht)|0,s=(s=s+Math.imul(le,_t)|0)+Math.imul(J,ht)|0,v=v+Math.imul(J,_t)|0,g=g+Math.imul(ut,gt)|0,s=(s=s+Math.imul(ut,vt)|0)+Math.imul(Qe,gt)|0,v=v+Math.imul(Qe,vt)|0,g=g+Math.imul(et,st)|0,s=(s=s+Math.imul(et,yt)|0)+Math.imul(Ke,st)|0,v=v+Math.imul(Ke,yt)|0,g=g+Math.imul(qe,mt)|0,s=(s=s+Math.imul(qe,wt)|0)+Math.imul(Ye,mt)|0,v=v+Math.imul(Ye,wt)|0,g=g+Math.imul(Re,ct)|0,s=(s=s+Math.imul(Re,ft)|0)+Math.imul(Ge,ct)|0,v=v+Math.imul(Ge,ft)|0,g=g+Math.imul(je,St)|0,s=(s=s+Math.imul(je,at)|0)+Math.imul(se,St)|0,v=v+Math.imul(se,at)|0,g=g+Math.imul(Te,dt)|0,s=(s=s+Math.imul(Te,Mt)|0)+Math.imul(Ie,dt)|0,v=v+Math.imul(Ie,Mt)|0;var ar=(w+(g=g+Math.imul(ke,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ke,Ct)|0)+Math.imul(Be,Tt)|0))<<13)|0;w=((v=v+Math.imul(Be,Ct)|0)+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,g=Math.imul(ve,ht),s=(s=Math.imul(ve,_t))+Math.imul(xe,ht)|0,v=Math.imul(xe,_t),g=g+Math.imul(le,gt)|0,s=(s=s+Math.imul(le,vt)|0)+Math.imul(J,gt)|0,v=v+Math.imul(J,vt)|0,g=g+Math.imul(ut,st)|0,s=(s=s+Math.imul(ut,yt)|0)+Math.imul(Qe,st)|0,v=v+Math.imul(Qe,yt)|0,g=g+Math.imul(et,mt)|0,s=(s=s+Math.imul(et,wt)|0)+Math.imul(Ke,mt)|0,v=v+Math.imul(Ke,wt)|0,g=g+Math.imul(qe,ct)|0,s=(s=s+Math.imul(qe,ft)|0)+Math.imul(Ye,ct)|0,v=v+Math.imul(Ye,ft)|0,g=g+Math.imul(Re,St)|0,s=(s=s+Math.imul(Re,at)|0)+Math.imul(Ge,St)|0,v=v+Math.imul(Ge,at)|0,g=g+Math.imul(je,dt)|0,s=(s=s+Math.imul(je,Mt)|0)+Math.imul(se,dt)|0,v=v+Math.imul(se,Mt)|0;var or=(w+(g=g+Math.imul(Te,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Te,Ct)|0)+Math.imul(Ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ie,Ct)|0)+(s>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ve,gt),s=(s=Math.imul(ve,vt))+Math.imul(xe,gt)|0,v=Math.imul(xe,vt),g=g+Math.imul(le,st)|0,s=(s=s+Math.imul(le,yt)|0)+Math.imul(J,st)|0,v=v+Math.imul(J,yt)|0,g=g+Math.imul(ut,mt)|0,s=(s=s+Math.imul(ut,wt)|0)+Math.imul(Qe,mt)|0,v=v+Math.imul(Qe,wt)|0,g=g+Math.imul(et,ct)|0,s=(s=s+Math.imul(et,ft)|0)+Math.imul(Ke,ct)|0,v=v+Math.imul(Ke,ft)|0,g=g+Math.imul(qe,St)|0,s=(s=s+Math.imul(qe,at)|0)+Math.imul(Ye,St)|0,v=v+Math.imul(Ye,at)|0,g=g+Math.imul(Re,dt)|0,s=(s=s+Math.imul(Re,Mt)|0)+Math.imul(Ge,dt)|0,v=v+Math.imul(Ge,Mt)|0;var Vi=(w+(g=g+Math.imul(je,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(je,Ct)|0)+Math.imul(se,Tt)|0))<<13)|0;w=((v=v+Math.imul(se,Ct)|0)+(s>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,g=Math.imul(ve,st),s=(s=Math.imul(ve,yt))+Math.imul(xe,st)|0,v=Math.imul(xe,yt),g=g+Math.imul(le,mt)|0,s=(s=s+Math.imul(le,wt)|0)+Math.imul(J,mt)|0,v=v+Math.imul(J,wt)|0,g=g+Math.imul(ut,ct)|0,s=(s=s+Math.imul(ut,ft)|0)+Math.imul(Qe,ct)|0,v=v+Math.imul(Qe,ft)|0,g=g+Math.imul(et,St)|0,s=(s=s+Math.imul(et,at)|0)+Math.imul(Ke,St)|0,v=v+Math.imul(Ke,at)|0,g=g+Math.imul(qe,dt)|0,s=(s=s+Math.imul(qe,Mt)|0)+Math.imul(Ye,dt)|0,v=v+Math.imul(Ye,Mt)|0;var $n=(w+(g=g+Math.imul(Re,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Re,Ct)|0)+Math.imul(Ge,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ge,Ct)|0)+(s>>>13)|0)+($n>>>26)|0,$n&=67108863,g=Math.imul(ve,mt),s=(s=Math.imul(ve,wt))+Math.imul(xe,mt)|0,v=Math.imul(xe,wt),g=g+Math.imul(le,ct)|0,s=(s=s+Math.imul(le,ft)|0)+Math.imul(J,ct)|0,v=v+Math.imul(J,ft)|0,g=g+Math.imul(ut,St)|0,s=(s=s+Math.imul(ut,at)|0)+Math.imul(Qe,St)|0,v=v+Math.imul(Qe,at)|0,g=g+Math.imul(et,dt)|0,s=(s=s+Math.imul(et,Mt)|0)+Math.imul(Ke,dt)|0,v=v+Math.imul(Ke,Mt)|0;var Ni=(w+(g=g+Math.imul(qe,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(qe,Ct)|0)+Math.imul(Ye,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ye,Ct)|0)+(s>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,g=Math.imul(ve,ct),s=(s=Math.imul(ve,ft))+Math.imul(xe,ct)|0,v=Math.imul(xe,ft),g=g+Math.imul(le,St)|0,s=(s=s+Math.imul(le,at)|0)+Math.imul(J,St)|0,v=v+Math.imul(J,at)|0,g=g+Math.imul(ut,dt)|0,s=(s=s+Math.imul(ut,Mt)|0)+Math.imul(Qe,dt)|0,v=v+Math.imul(Qe,Mt)|0;var Wn=(w+(g=g+Math.imul(et,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(et,Ct)|0)+Math.imul(Ke,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ke,Ct)|0)+(s>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,g=Math.imul(ve,St),s=(s=Math.imul(ve,at))+Math.imul(xe,St)|0,v=Math.imul(xe,at),g=g+Math.imul(le,dt)|0,s=(s=s+Math.imul(le,Mt)|0)+Math.imul(J,dt)|0,v=v+Math.imul(J,Mt)|0;var Ln=(w+(g=g+Math.imul(ut,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ut,Ct)|0)+Math.imul(Qe,Tt)|0))<<13)|0;w=((v=v+Math.imul(Qe,Ct)|0)+(s>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,g=Math.imul(ve,dt),s=(s=Math.imul(ve,Mt))+Math.imul(xe,dt)|0,v=Math.imul(xe,Mt);var vi=(w+(g=g+Math.imul(le,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(le,Ct)|0)+Math.imul(J,Tt)|0))<<13)|0;w=((v=v+Math.imul(J,Ct)|0)+(s>>>13)|0)+(vi>>>26)|0,vi&=67108863;var Un=(w+(g=Math.imul(ve,Tt))|0)+((8191&(s=(s=Math.imul(ve,Ct))+Math.imul(xe,Tt)|0))<<13)|0;return w=((v=Math.imul(xe,Ct))+(s>>>13)|0)+(Un>>>26)|0,Un&=67108863,b[0]=Fn,b[1]=Ri,b[2]=Oi,b[3]=zn,b[4]=jn,b[5]=tr,b[6]=ir,b[7]=nr,b[8]=rr,b[9]=qn,b[10]=ar,b[11]=or,b[12]=Vi,b[13]=$n,b[14]=Ni,b[15]=Wn,b[16]=Ln,b[17]=vi,b[18]=Un,0!==w&&(b[19]=w,f.length++),f};function X(y,o,l){return(new U).mulp(y,o,l)}function U(y,o){this.x=y,this.y=o}Math.imul||(N=B),p.prototype.mulTo=function(o,l){var f,u=this.length+o.length;return f=10===this.length&&10===o.length?N(this,o,l):u<63?B(this,o,l):u<1024?function z(y,o,l){l.negative=o.negative^y.negative,l.length=y.length+o.length;for(var f=0,u=0,h=0;h<l.length-1;h++){var b=u;u=0;for(var w=67108863&f,g=Math.min(h,o.length-1),s=Math.max(0,h-y.length+1);s<=g;s++){var ie=(0|y.words[h-s])*(0|o.words[s]),Se=67108863&ie;w=67108863&(Se=Se+w|0),u+=(b=(b=b+(ie/67108864|0)|0)+(Se>>>26)|0)>>>26,b&=67108863}l.words[h]=w,f=b,b=u}return 0!==f?l.words[h]=f:l.length--,l.strip()}(this,o,l):X(this,o,l),f},U.prototype.makeRBT=function(o){for(var l=new Array(o),f=p.prototype._countBits(o)-1,u=0;u<o;u++)l[u]=this.revBin(u,f,o);return l},U.prototype.revBin=function(o,l,f){if(0===o||o===f-1)return o;for(var u=0,h=0;h<l;h++)u|=(1&o)<<l-h-1,o>>=1;return u},U.prototype.permute=function(o,l,f,u,h,b){for(var w=0;w<b;w++)u[w]=l[o[w]],h[w]=f[o[w]]},U.prototype.transform=function(o,l,f,u,h,b){this.permute(b,o,l,f,u,h);for(var w=1;w<h;w<<=1)for(var g=w<<1,s=Math.cos(2*Math.PI/g),v=Math.sin(2*Math.PI/g),$=0;$<h;$+=g)for(var L=s,ie=v,Se=0;Se<w;Se++){var ke=f[$+Se],Be=u[$+Se],Pe=f[$+Se+w],Te=u[$+Se+w],Ie=L*Pe-ie*Te;Te=L*Te+ie*Pe,f[$+Se]=ke+(Pe=Ie),u[$+Se]=Be+Te,f[$+Se+w]=ke-Pe,u[$+Se+w]=Be-Te,Se!==g&&(Ie=s*L-v*ie,ie=s*ie+v*L,L=Ie)}},U.prototype.guessLen13b=function(o,l){var f=1|Math.max(l,o),u=1&f,h=0;for(f=f/2|0;f;f>>>=1)h++;return 1<<h+1+u},U.prototype.conjugate=function(o,l,f){if(!(f<=1))for(var u=0;u<f/2;u++){var h=o[u];o[u]=o[f-u-1],o[f-u-1]=h,h=l[u],l[u]=-l[f-u-1],l[f-u-1]=-h}},U.prototype.normalize13b=function(o,l){for(var f=0,u=0;u<l/2;u++){var h=8192*Math.round(o[2*u+1]/l)+Math.round(o[2*u]/l)+f;o[u]=67108863&h,f=h<67108864?0:h/67108864|0}return o},U.prototype.convert13b=function(o,l,f,u){for(var h=0,b=0;b<l;b++)f[2*b]=8191&(h+=0|o[b]),f[2*b+1]=8191&(h>>>=13),h>>>=13;for(b=2*l;b<u;++b)f[b]=0;I(0===h),I(0==(-8192&h))},U.prototype.stub=function(o){for(var l=new Array(o),f=0;f<o;f++)l[f]=0;return l},U.prototype.mulp=function(o,l,f){var u=2*this.guessLen13b(o.length,l.length),h=this.makeRBT(u),b=this.stub(u),w=new Array(u),g=new Array(u),s=new Array(u),v=new Array(u),$=new Array(u),L=new Array(u),ie=f.words;ie.length=u,this.convert13b(o.words,o.length,w,u),this.convert13b(l.words,l.length,v,u),this.transform(w,b,g,s,u,h),this.transform(v,b,$,L,u,h);for(var Se=0;Se<u;Se++){var ke=g[Se]*$[Se]-s[Se]*L[Se];s[Se]=g[Se]*L[Se]+s[Se]*$[Se],g[Se]=ke}return this.conjugate(g,s,u),this.transform(g,s,ie,b,u,h),this.conjugate(ie,b,u),this.normalize13b(ie,u),f.negative=o.negative^l.negative,f.length=o.length+l.length,f.strip()},p.prototype.mul=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},p.prototype.mulf=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),X(this,o,l)},p.prototype.imul=function(o){return this.clone().mulTo(o,this)},p.prototype.imuln=function(o){I("number"==typeof o),I(o<67108864);for(var l=0,f=0;f<this.length;f++){var u=(0|this.words[f])*o,h=(67108863&u)+(67108863&l);l>>=26,l+=u/67108864|0,l+=h>>>26,this.words[f]=67108863&h}return 0!==l&&(this.words[f]=l,this.length++),this},p.prototype.muln=function(o){return this.clone().imuln(o)},p.prototype.sqr=function(){return this.mul(this)},p.prototype.isqr=function(){return this.imul(this.clone())},p.prototype.pow=function(o){var l=function C(y){for(var o=new Array(y.bitLength()),l=0;l<o.length;l++){var u=l%26;o[l]=(y.words[l/26|0]&1<<u)>>>u}return o}(o);if(0===l.length)return new p(1);for(var f=this,u=0;u<l.length&&0===l[u];u++,f=f.sqr());if(++u<l.length)for(var h=f.sqr();u<l.length;u++,h=h.sqr())0!==l[u]&&(f=f.mul(h));return f},p.prototype.iushln=function(o){I("number"==typeof o&&o>=0);var h,l=o%26,f=(o-l)/26,u=67108863>>>26-l<<26-l;if(0!==l){var b=0;for(h=0;h<this.length;h++){var w=this.words[h]&u;this.words[h]=(0|this.words[h])-w<<l|b,b=w>>>26-l}b&&(this.words[h]=b,this.length++)}if(0!==f){for(h=this.length-1;h>=0;h--)this.words[h+f]=this.words[h];for(h=0;h<f;h++)this.words[h]=0;this.length+=f}return this.strip()},p.prototype.ishln=function(o){return I(0===this.negative),this.iushln(o)},p.prototype.iushrn=function(o,l,f){var u;I("number"==typeof o&&o>=0),u=l?(l-l%26)/26:0;var h=o%26,b=Math.min((o-h)/26,this.length),w=67108863^67108863>>>h<<h,g=f;if(u-=b,u=Math.max(0,u),g){for(var s=0;s<b;s++)g.words[s]=this.words[s];g.length=b}if(0!==b)if(this.length>b)for(this.length-=b,s=0;s<this.length;s++)this.words[s]=this.words[s+b];else this.words[0]=0,this.length=1;var v=0;for(s=this.length-1;s>=0&&(0!==v||s>=u);s--){var $=0|this.words[s];this.words[s]=v<<26-h|$>>>h,v=$&w}return g&&0!==v&&(g.words[g.length++]=v),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},p.prototype.ishrn=function(o,l,f){return I(0===this.negative),this.iushrn(o,l,f)},p.prototype.shln=function(o){return this.clone().ishln(o)},p.prototype.ushln=function(o){return this.clone().iushln(o)},p.prototype.shrn=function(o){return this.clone().ishrn(o)},p.prototype.ushrn=function(o){return this.clone().iushrn(o)},p.prototype.testn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return!(this.length<=f||!(this.words[f]&1<<l))},p.prototype.imaskn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return I(0===this.negative,"imaskn works only with positive numbers"),this.length<=f?this:(0!==l&&f++,this.length=Math.min(f,this.length),0!==l&&(this.words[this.length-1]&=67108863^67108863>>>l<<l),this.strip())},p.prototype.maskn=function(o){return this.clone().imaskn(o)},p.prototype.iaddn=function(o){return I("number"==typeof o),I(o<67108864),o<0?this.isubn(-o):0!==this.negative?1===this.length&&(0|this.words[0])<o?(this.words[0]=o-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},p.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},p.prototype.isubn=function(o){if(I("number"==typeof o),I(o<67108864),o<0)return this.iaddn(-o);if(0!==this.negative)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},p.prototype.addn=function(o){return this.clone().iaddn(o)},p.prototype.subn=function(o){return this.clone().isubn(o)},p.prototype.iabs=function(){return this.negative=0,this},p.prototype.abs=function(){return this.clone().iabs()},p.prototype._ishlnsubmul=function(o,l,f){var h;this._expand(o.length+f);var b,w=0;for(h=0;h<o.length;h++){b=(0|this.words[h+f])+w;var g=(0|o.words[h])*l;w=((b-=67108863&g)>>26)-(g/67108864|0),this.words[h+f]=67108863&b}for(;h<this.length-f;h++)w=(b=(0|this.words[h+f])+w)>>26,this.words[h+f]=67108863&b;if(0===w)return this.strip();for(I(-1===w),w=0,h=0;h<this.length;h++)w=(b=-(0|this.words[h])+w)>>26,this.words[h]=67108863&b;return this.negative=1,this.strip()},p.prototype._wordDiv=function(o,l){var f,u=this.clone(),h=o,b=0|h.words[h.length-1];0!=(f=26-this._countBits(b))&&(h=h.ushln(f),u.iushln(f),b=0|h.words[h.length-1]);var s,g=u.length-h.length;if("mod"!==l){(s=new p(null)).length=g+1,s.words=new Array(s.length);for(var v=0;v<s.length;v++)s.words[v]=0}var $=u.clone()._ishlnsubmul(h,1,g);0===$.negative&&(u=$,s&&(s.words[g]=1));for(var L=g-1;L>=0;L--){var ie=67108864*(0|u.words[h.length+L])+(0|u.words[h.length+L-1]);for(ie=Math.min(ie/b|0,67108863),u._ishlnsubmul(h,ie,L);0!==u.negative;)ie--,u.negative=0,u._ishlnsubmul(h,1,L),u.isZero()||(u.negative^=1);s&&(s.words[L]=ie)}return s&&s.strip(),u.strip(),"div"!==l&&0!==f&&u.iushrn(f),{div:s||null,mod:u}},p.prototype.divmod=function(o,l,f){return I(!o.isZero()),this.isZero()?{div:new p(0),mod:new p(0)}:0!==this.negative&&0===o.negative?(b=this.neg().divmod(o,l),"mod"!==l&&(u=b.div.neg()),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.iadd(o)),{div:u,mod:h}):0===this.negative&&0!==o.negative?(b=this.divmod(o.neg(),l),"mod"!==l&&(u=b.div.neg()),{div:u,mod:b.mod}):0!=(this.negative&o.negative)?(b=this.neg().divmod(o.neg(),l),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.isub(o)),{div:b.div,mod:h}):o.length>this.length||this.cmp(o)<0?{div:new p(0),mod:this}:1===o.length?"div"===l?{div:this.divn(o.words[0]),mod:null}:"mod"===l?{div:null,mod:new p(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new p(this.modn(o.words[0]))}:this._wordDiv(o,l);var u,h,b},p.prototype.div=function(o){return this.divmod(o,"div",!1).div},p.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},p.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},p.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var f=0!==l.div.negative?l.mod.isub(o):l.mod,u=o.ushrn(1),h=o.andln(1),b=f.cmp(u);return b<0||1===h&&0===b?l.div:0!==l.div.negative?l.div.isubn(1):l.div.iaddn(1)},p.prototype.modn=function(o){I(o<=67108863);for(var l=(1<<26)%o,f=0,u=this.length-1;u>=0;u--)f=(l*f+(0|this.words[u]))%o;return f},p.prototype.idivn=function(o){I(o<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var u=(0|this.words[f])+67108864*l;this.words[f]=u/o|0,l=u%o}return this.strip()},p.prototype.divn=function(o){return this.clone().idivn(o)},p.prototype.egcd=function(o){I(0===o.negative),I(!o.isZero());var l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=new p(0),w=new p(1),g=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++g;for(var s=f.clone(),v=l.clone();!l.isZero();){for(var $=0,L=1;0==(l.words[0]&L)&&$<26;++$,L<<=1);if($>0)for(l.iushrn($);$-- >0;)(u.isOdd()||h.isOdd())&&(u.iadd(s),h.isub(v)),u.iushrn(1),h.iushrn(1);for(var ie=0,Se=1;0==(f.words[0]&Se)&&ie<26;++ie,Se<<=1);if(ie>0)for(f.iushrn(ie);ie-- >0;)(b.isOdd()||w.isOdd())&&(b.iadd(s),w.isub(v)),b.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(b),h.isub(w)):(f.isub(l),b.isub(u),w.isub(h))}return{a:b,b:w,gcd:f.iushln(g)}},p.prototype._invmp=function(o){I(0===o.negative),I(!o.isZero());var $,l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,g=1;0==(l.words[0]&g)&&w<26;++w,g<<=1);if(w>0)for(l.iushrn(w);w-- >0;)u.isOdd()&&u.iadd(b),u.iushrn(1);for(var s=0,v=1;0==(f.words[0]&v)&&s<26;++s,v<<=1);if(s>0)for(f.iushrn(s);s-- >0;)h.isOdd()&&h.iadd(b),h.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(h)):(f.isub(l),h.isub(u))}return($=0===l.cmpn(1)?u:h).cmpn(0)<0&&$.iadd(o),$},p.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),f=o.clone();l.negative=0,f.negative=0;for(var u=0;l.isEven()&&f.isEven();u++)l.iushrn(1),f.iushrn(1);for(;;){for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var h=l.cmp(f);if(h<0){var b=l;l=f,f=b}else if(0===h||0===f.cmpn(1))break;l.isub(f)}return f.iushln(u)},p.prototype.invm=function(o){return this.egcd(o).a.umod(o)},p.prototype.isEven=function(){return 0==(1&this.words[0])},p.prototype.isOdd=function(){return 1==(1&this.words[0])},p.prototype.andln=function(o){return this.words[0]&o},p.prototype.bincn=function(o){I("number"==typeof o);var l=o%26,f=(o-l)/26,u=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=u,this;for(var h=u,b=f;0!==h&&b<this.length;b++){var w=0|this.words[b];h=(w+=h)>>>26,this.words[b]=w&=67108863}return 0!==h&&(this.words[b]=h,this.length++),this},p.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},p.prototype.cmpn=function(o){var f,l=o<0;if(0!==this.negative&&!l)return-1;if(0===this.negative&&l)return 1;if(this.strip(),this.length>1)f=1;else{l&&(o=-o),I(o<=67108863,"Number is too big");var u=0|this.words[0];f=u===o?0:u<o?-1:1}return 0!==this.negative?0|-f:f},p.prototype.cmp=function(o){if(0!==this.negative&&0===o.negative)return-1;if(0===this.negative&&0!==o.negative)return 1;var l=this.ucmp(o);return 0!==this.negative?0|-l:l},p.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var u=0|this.words[f],h=0|o.words[f];if(u!==h){u<h?l=-1:u>h&&(l=1);break}}return l},p.prototype.gtn=function(o){return 1===this.cmpn(o)},p.prototype.gt=function(o){return 1===this.cmp(o)},p.prototype.gten=function(o){return this.cmpn(o)>=0},p.prototype.gte=function(o){return this.cmp(o)>=0},p.prototype.ltn=function(o){return-1===this.cmpn(o)},p.prototype.lt=function(o){return-1===this.cmp(o)},p.prototype.lten=function(o){return this.cmpn(o)<=0},p.prototype.lte=function(o){return this.cmp(o)<=0},p.prototype.eqn=function(o){return 0===this.cmpn(o)},p.prototype.eq=function(o){return 0===this.cmp(o)},p.red=function(o){return new we(o)},p.prototype.toRed=function(o){return I(!this.red,"Already a number in reduction context"),I(0===this.negative,"red works only with positives"),o.convertTo(this)._forceRed(o)},p.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},p.prototype._forceRed=function(o){return this.red=o,this},p.prototype.forceRed=function(o){return I(!this.red,"Already a number in reduction context"),this._forceRed(o)},p.prototype.redAdd=function(o){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},p.prototype.redIAdd=function(o){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},p.prototype.redSub=function(o){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},p.prototype.redISub=function(o){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},p.prototype.redShl=function(o){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},p.prototype.redMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},p.prototype.redIMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},p.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},p.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},p.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},p.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},p.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},p.prototype.redPow=function(o){return I(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Z={k256:null,p224:null,p192:null,p25519:null};function ee(y,o){this.name=y,this.p=new p(o,16),this.n=this.p.bitLength(),this.k=new p(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function ae(){ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function ge(){ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Ce(){ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function De(){ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function we(y){if("string"==typeof y){var o=p._prime(y);this.m=o.p,this.prime=o}else I(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}function Oe(y){we.call(this,y),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new p(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ee.prototype._tmp=function(){var o=new p(null);return o.words=new Array(Math.ceil(this.n/13)),o},ee.prototype.ireduce=function(o){var f,l=o;do{this.split(l,this.tmp),f=(l=(l=this.imulK(l)).iadd(this.tmp)).bitLength()}while(f>this.n);var u=f<this.n?-1:l.ucmp(this.p);return 0===u?(l.words[0]=0,l.length=1):u>0?l.isub(this.p):void 0!==l.strip?l.strip():l._strip(),l},ee.prototype.split=function(o,l){o.iushrn(this.n,0,l)},ee.prototype.imulK=function(o){return o.imul(this.k)},G(ae,ee),ae.prototype.split=function(o,l){for(var f=4194303,u=Math.min(o.length,9),h=0;h<u;h++)l.words[h]=o.words[h];if(l.length=u,o.length<=9)return o.words[0]=0,void(o.length=1);var b=o.words[9];for(l.words[l.length++]=b&f,h=10;h<o.length;h++){var w=0|o.words[h];o.words[h-10]=(w&f)<<4|b>>>22,b=w}o.words[h-10]=b>>>=22,o.length-=0===b&&o.length>10?10:9},ae.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,f=0;f<o.length;f++){var u=0|o.words[f];o.words[f]=67108863&(l+=977*u),l=64*u+(l/67108864|0)}return 0===o.words[o.length-1]&&(o.length--,0===o.words[o.length-1]&&o.length--),o},G(ge,ee),G(Ce,ee),G(De,ee),De.prototype.imulK=function(o){for(var l=0,f=0;f<o.length;f++){var u=19*(0|o.words[f])+l,h=67108863&u;u>>>=26,o.words[f]=h,l=u}return 0!==l&&(o.words[o.length++]=l),o},p._prime=function(o){if(Z[o])return Z[o];var l;if("k256"===o)l=new ae;else if("p224"===o)l=new ge;else if("p192"===o)l=new Ce;else{if("p25519"!==o)throw new Error("Unknown prime "+o);l=new De}return Z[o]=l,l},we.prototype._verify1=function(o){I(0===o.negative,"red works only with positives"),I(o.red,"red works only with red numbers")},we.prototype._verify2=function(o,l){I(0==(o.negative|l.negative),"red works only with positives"),I(o.red&&o.red===l.red,"red works only with red numbers")},we.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},we.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},we.prototype.add=function(o,l){this._verify2(o,l);var f=o.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},we.prototype.iadd=function(o,l){this._verify2(o,l);var f=o.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},we.prototype.sub=function(o,l){this._verify2(o,l);var f=o.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},we.prototype.isub=function(o,l){this._verify2(o,l);var f=o.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},we.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},we.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},we.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},we.prototype.isqr=function(o){return this.imul(o,o.clone())},we.prototype.sqr=function(o){return this.mul(o,o)},we.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(I(l%2==1),3===l){var f=this.m.add(new p(1)).iushrn(2);return this.pow(o,f)}for(var u=this.m.subn(1),h=0;!u.isZero()&&0===u.andln(1);)h++,u.iushrn(1);I(!u.isZero());var b=new p(1).toRed(this),w=b.redNeg(),g=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new p(2*s*s).toRed(this);0!==this.pow(s,g).cmp(w);)s.redIAdd(w);for(var v=this.pow(s,u),$=this.pow(o,u.addn(1).iushrn(1)),L=this.pow(o,u),ie=h;0!==L.cmp(b);){for(var Se=L,ke=0;0!==Se.cmp(b);ke++)Se=Se.redSqr();I(ke<ie);var Be=this.pow(v,new p(1).iushln(ie-ke-1));$=$.redMul(Be),v=Be.redSqr(),L=L.redMul(v),ie=ke}return $},we.prototype.invm=function(o){var l=o._invmp(this.m);return 0!==l.negative?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},we.prototype.pow=function(o,l){if(l.isZero())return new p(1).toRed(this);if(0===l.cmpn(1))return o.clone();var u=new Array(16);u[0]=new p(1).toRed(this),u[1]=o;for(var h=2;h<u.length;h++)u[h]=this.mul(u[h-1],o);var b=u[0],w=0,g=0,s=l.bitLength()%26;for(0===s&&(s=26),h=l.length-1;h>=0;h--){for(var v=l.words[h],$=s-1;$>=0;$--){var L=v>>$&1;b!==u[0]&&(b=this.sqr(b)),0!==L||0!==w?(w<<=1,w|=L,(4==++g||0===h&&0===$)&&(b=this.mul(b,u[w]),g=0,w=0)):g=0}s=26}return b},we.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},we.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},p.mont=function(o){return new Oe(o)},G(Oe,we),Oe.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Oe.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},Oe.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var f=o.imul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new p(0)._forceRed(this);var f=o.mul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.invm=function(o){return this.imod(o._invmp(this.m).mul(this.r2))._forceRed(this)}}(ye=H.nmd(ye),this)},7715:(ye,ue,H)=>{"use strict";var j=ue;j.version=H(8597).i8,j.utils=H(1970),j.rand=H(7950),j.curve=H(6270),j.curves=H(2916),j.ec=H(7626),j.eddsa=H(1885)},7902:(ye,ue,H)=>{"use strict";var j=H(7433),W=H(1970),I=W.getNAF,G=W.getJSF,p=W.assert;function k(E,R){this.type=E,this.p=new j(R.p,16),this.red=R.prime?j.red(R.prime):j.mont(this.p),this.zero=new j(0).toRed(this.red),this.one=new j(1).toRed(this.red),this.two=new j(2).toRed(this.red),this.n=R.n&&new j(R.n,16),this.g=R.g&&this.pointFromJSON(R.g,R.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var x=this.n&&this.p.div(this.n);!x||x.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function P(E,R){this.curve=E,this.type=R,this.precomputed=null}ye.exports=k,k.prototype.point=function(){throw new Error("Not implemented")},k.prototype.validate=function(){throw new Error("Not implemented")},k.prototype._fixedNafMul=function(R,x){p(R.precomputed);var S=R._getDoubles(),O=I(x,1,this._bitLength),C=(1<<S.step+1)-(S.step%2==0?2:1);C/=3;var N,z,B=[];for(N=0;N<O.length;N+=S.step){z=0;for(var X=N+S.step-1;X>=N;X--)z=(z<<1)+O[X];B.push(z)}for(var U=this.jpoint(null,null,null),Z=this.jpoint(null,null,null),ee=C;ee>0;ee--){for(N=0;N<B.length;N++)(z=B[N])===ee?Z=Z.mixedAdd(S.points[N]):z===-ee&&(Z=Z.mixedAdd(S.points[N].neg()));U=U.add(Z)}return U.toP()},k.prototype._wnafMul=function(R,x){for(var S=4,O=R._getNAFPoints(S),C=O.points,B=I(x,S=O.wnd,this._bitLength),N=this.jpoint(null,null,null),z=B.length-1;z>=0;z--){for(var X=0;z>=0&&0===B[z];z--)X++;if(z>=0&&X++,N=N.dblp(X),z<0)break;var U=B[z];p(0!==U),N="affine"===R.type?N.mixedAdd(U>0?C[U-1>>1]:C[-U-1>>1].neg()):N.add(U>0?C[U-1>>1]:C[-U-1>>1].neg())}return"affine"===R.type?N.toP():N},k.prototype._wnafMulAdd=function(R,x,S,O,C){var U,Z,ee,B=this._wnafT1,N=this._wnafT2,z=this._wnafT3,X=0;for(U=0;U<O;U++){var ae=(ee=x[U])._getNAFPoints(R);B[U]=ae.wnd,N[U]=ae.points}for(U=O-1;U>=1;U-=2){var ge=U-1,Ce=U;if(1===B[ge]&&1===B[Ce]){var De=[x[ge],null,null,x[Ce]];0===x[ge].y.cmp(x[Ce].y)?(De[1]=x[ge].add(x[Ce]),De[2]=x[ge].toJ().mixedAdd(x[Ce].neg())):0===x[ge].y.cmp(x[Ce].y.redNeg())?(De[1]=x[ge].toJ().mixedAdd(x[Ce]),De[2]=x[ge].add(x[Ce].neg())):(De[1]=x[ge].toJ().mixedAdd(x[Ce]),De[2]=x[ge].toJ().mixedAdd(x[Ce].neg()));var we=[-3,-1,-5,-7,0,7,5,1,3],Oe=G(S[ge],S[Ce]);for(X=Math.max(Oe[0].length,X),z[ge]=new Array(X),z[Ce]=new Array(X),Z=0;Z<X;Z++)z[ge][Z]=we[3*(1+(0|Oe[0][Z]))+(1+(0|Oe[1][Z]))],z[Ce][Z]=0,N[ge]=De}else z[ge]=I(S[ge],B[ge],this._bitLength),z[Ce]=I(S[Ce],B[Ce],this._bitLength),X=Math.max(z[ge].length,X),X=Math.max(z[Ce].length,X)}var l=this.jpoint(null,null,null),f=this._wnafT4;for(U=X;U>=0;U--){for(var u=0;U>=0;){var h=!0;for(Z=0;Z<O;Z++)f[Z]=0|z[Z][U],0!==f[Z]&&(h=!1);if(!h)break;u++,U--}if(U>=0&&u++,l=l.dblp(u),U<0)break;for(Z=0;Z<O;Z++){var b=f[Z];0!==b&&(b>0?ee=N[Z][b-1>>1]:b<0&&(ee=N[Z][-b-1>>1].neg()),l="affine"===ee.type?l.mixedAdd(ee):l.add(ee))}}for(U=0;U<O;U++)N[U]=null;return C?l:l.toP()},k.BasePoint=P,P.prototype.eq=function(){throw new Error("Not implemented")},P.prototype.validate=function(){return this.curve.validate(this)},k.prototype.decodePoint=function(R,x){R=W.toArray(R,x);var S=this.p.byteLength();if((4===R[0]||6===R[0]||7===R[0])&&R.length-1==2*S)return 6===R[0]?p(R[R.length-1]%2==0):7===R[0]&&p(R[R.length-1]%2==1),this.point(R.slice(1,1+S),R.slice(1+S,1+2*S));if((2===R[0]||3===R[0])&&R.length-1===S)return this.pointFromX(R.slice(1,1+S),3===R[0]);throw new Error("Unknown point format")},P.prototype.encodeCompressed=function(R){return this.encode(R,!0)},P.prototype._encode=function(R){var x=this.curve.p.byteLength(),S=this.getX().toArray("be",x);return R?[this.getY().isEven()?2:3].concat(S):[4].concat(S,this.getY().toArray("be",x))},P.prototype.encode=function(R,x){return W.encode(this._encode(x),R)},P.prototype.precompute=function(R){if(this.precomputed)return this;var x={doubles:null,naf:null,beta:null};return x.naf=this._getNAFPoints(8),x.doubles=this._getDoubles(4,R),x.beta=this._getBeta(),this.precomputed=x,this},P.prototype._hasDoubles=function(R){if(!this.precomputed)return!1;var x=this.precomputed.doubles;return!!x&&x.points.length>=Math.ceil((R.bitLength()+1)/x.step)},P.prototype._getDoubles=function(R,x){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var S=[this],O=this,C=0;C<x;C+=R){for(var B=0;B<R;B++)O=O.dbl();S.push(O)}return{step:R,points:S}},P.prototype._getNAFPoints=function(R){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var x=[this],S=(1<<R)-1,O=1===S?null:this.dbl(),C=1;C<S;C++)x[C]=x[C-1].add(O);return{wnd:R,points:x}},P.prototype._getBeta=function(){return null},P.prototype.dblp=function(R){for(var x=this,S=0;S<R;S++)x=x.dbl();return x}},3835:(ye,ue,H)=>{"use strict";var j=H(1970),W=H(7433),I=H(3894),G=H(7902),p=j.assert;function k(E){this.twisted=1!=(0|E.a),this.mOneA=this.twisted&&-1==(0|E.a),this.extended=this.mOneA,G.call(this,"edwards",E),this.a=new W(E.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new W(E.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new W(E.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),p(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|E.c)}function P(E,R,x,S,O){G.BasePoint.call(this,E,"projective"),null===R&&null===x&&null===S?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new W(R,16),this.y=new W(x,16),this.z=S?new W(S,16):this.curve.one,this.t=O&&new W(O,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}I(k,G),ye.exports=k,k.prototype._mulA=function(R){return this.mOneA?R.redNeg():this.a.redMul(R)},k.prototype._mulC=function(R){return this.oneC?R:this.c.redMul(R)},k.prototype.jpoint=function(R,x,S,O){return this.point(R,x,S,O)},k.prototype.pointFromX=function(R,x){(R=new W(R,16)).red||(R=R.toRed(this.red));var S=R.redSqr(),O=this.c2.redSub(this.a.redMul(S)),C=this.one.redSub(this.c2.redMul(this.d).redMul(S)),B=O.redMul(C.redInvm()),N=B.redSqrt();if(0!==N.redSqr().redSub(B).cmp(this.zero))throw new Error("invalid point");var z=N.fromRed().isOdd();return(x&&!z||!x&&z)&&(N=N.redNeg()),this.point(R,N)},k.prototype.pointFromY=function(R,x){(R=new W(R,16)).red||(R=R.toRed(this.red));var S=R.redSqr(),O=S.redSub(this.c2),C=S.redMul(this.d).redMul(this.c2).redSub(this.a),B=O.redMul(C.redInvm());if(0===B.cmp(this.zero)){if(x)throw new Error("invalid point");return this.point(this.zero,R)}var N=B.redSqrt();if(0!==N.redSqr().redSub(B).cmp(this.zero))throw new Error("invalid point");return N.fromRed().isOdd()!==x&&(N=N.redNeg()),this.point(N,R)},k.prototype.validate=function(R){if(R.isInfinity())return!0;R.normalize();var x=R.x.redSqr(),S=R.y.redSqr(),O=x.redMul(this.a).redAdd(S),C=this.c2.redMul(this.one.redAdd(this.d.redMul(x).redMul(S)));return 0===O.cmp(C)},I(P,G.BasePoint),k.prototype.pointFromJSON=function(R){return P.fromJSON(this,R)},k.prototype.point=function(R,x,S,O){return new P(this,R,x,S,O)},P.fromJSON=function(R,x){return new P(R,x[0],x[1],x[2])},P.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},P.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},P.prototype._extDbl=function(){var R=this.x.redSqr(),x=this.y.redSqr(),S=this.z.redSqr();S=S.redIAdd(S);var O=this.curve._mulA(R),C=this.x.redAdd(this.y).redSqr().redISub(R).redISub(x),B=O.redAdd(x),N=B.redSub(S),z=O.redSub(x),X=C.redMul(N),U=B.redMul(z),Z=C.redMul(z),ee=N.redMul(B);return this.curve.point(X,U,ee,Z)},P.prototype._projDbl=function(){var O,C,B,N,z,X,R=this.x.redAdd(this.y).redSqr(),x=this.x.redSqr(),S=this.y.redSqr();if(this.curve.twisted){var U=(N=this.curve._mulA(x)).redAdd(S);this.zOne?(O=R.redSub(x).redSub(S).redMul(U.redSub(this.curve.two)),C=U.redMul(N.redSub(S)),B=U.redSqr().redSub(U).redSub(U)):(z=this.z.redSqr(),X=U.redSub(z).redISub(z),O=R.redSub(x).redISub(S).redMul(X),C=U.redMul(N.redSub(S)),B=U.redMul(X))}else N=x.redAdd(S),z=this.curve._mulC(this.z).redSqr(),X=N.redSub(z).redSub(z),O=this.curve._mulC(R.redISub(N)).redMul(X),C=this.curve._mulC(N).redMul(x.redISub(S)),B=N.redMul(X);return this.curve.point(O,C,B)},P.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},P.prototype._extAdd=function(R){var x=this.y.redSub(this.x).redMul(R.y.redSub(R.x)),S=this.y.redAdd(this.x).redMul(R.y.redAdd(R.x)),O=this.t.redMul(this.curve.dd).redMul(R.t),C=this.z.redMul(R.z.redAdd(R.z)),B=S.redSub(x),N=C.redSub(O),z=C.redAdd(O),X=S.redAdd(x),U=B.redMul(N),Z=z.redMul(X),ee=B.redMul(X),ae=N.redMul(z);return this.curve.point(U,Z,ae,ee)},P.prototype._projAdd=function(R){var Z,ee,x=this.z.redMul(R.z),S=x.redSqr(),O=this.x.redMul(R.x),C=this.y.redMul(R.y),B=this.curve.d.redMul(O).redMul(C),N=S.redSub(B),z=S.redAdd(B),X=this.x.redAdd(this.y).redMul(R.x.redAdd(R.y)).redISub(O).redISub(C),U=x.redMul(N).redMul(X);return this.curve.twisted?(Z=x.redMul(z).redMul(C.redSub(this.curve._mulA(O))),ee=N.redMul(z)):(Z=x.redMul(z).redMul(C.redSub(O)),ee=this.curve._mulC(N).redMul(z)),this.curve.point(U,Z,ee)},P.prototype.add=function(R){return this.isInfinity()?R:R.isInfinity()?this:this.curve.extended?this._extAdd(R):this._projAdd(R)},P.prototype.mul=function(R){return this._hasDoubles(R)?this.curve._fixedNafMul(this,R):this.curve._wnafMul(this,R)},P.prototype.mulAdd=function(R,x,S){return this.curve._wnafMulAdd(1,[this,x],[R,S],2,!1)},P.prototype.jmulAdd=function(R,x,S){return this.curve._wnafMulAdd(1,[this,x],[R,S],2,!0)},P.prototype.normalize=function(){if(this.zOne)return this;var R=this.z.redInvm();return this.x=this.x.redMul(R),this.y=this.y.redMul(R),this.t&&(this.t=this.t.redMul(R)),this.z=this.curve.one,this.zOne=!0,this},P.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},P.prototype.getX=function(){return this.normalize(),this.x.fromRed()},P.prototype.getY=function(){return this.normalize(),this.y.fromRed()},P.prototype.eq=function(R){return this===R||0===this.getX().cmp(R.getX())&&0===this.getY().cmp(R.getY())},P.prototype.eqXToP=function(R){var x=R.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(x))return!0;for(var S=R.clone(),O=this.curve.redN.redMul(this.z);;){if(S.iadd(this.curve.n),S.cmp(this.curve.p)>=0)return!1;if(x.redIAdd(O),0===this.x.cmp(x))return!0}},P.prototype.toP=P.prototype.normalize,P.prototype.mixedAdd=P.prototype.add},6270:(ye,ue,H)=>{"use strict";var j=ue;j.base=H(7902),j.short=H(1781),j.mont=H(7064),j.edwards=H(3835)},7064:(ye,ue,H)=>{"use strict";var j=H(7433),W=H(3894),I=H(7902),G=H(1970);function p(P){I.call(this,"mont",P),this.a=new j(P.a,16).toRed(this.red),this.b=new j(P.b,16).toRed(this.red),this.i4=new j(4).toRed(this.red).redInvm(),this.two=new j(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function k(P,E,R){I.BasePoint.call(this,P,"projective"),null===E&&null===R?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new j(E,16),this.z=new j(R,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}W(p,I),ye.exports=p,p.prototype.validate=function(E){var R=E.normalize().x,x=R.redSqr(),S=x.redMul(R).redAdd(x.redMul(this.a)).redAdd(R);return 0===S.redSqrt().redSqr().cmp(S)},W(k,I.BasePoint),p.prototype.decodePoint=function(E,R){return this.point(G.toArray(E,R),1)},p.prototype.point=function(E,R){return new k(this,E,R)},p.prototype.pointFromJSON=function(E){return k.fromJSON(this,E)},k.prototype.precompute=function(){},k.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},k.fromJSON=function(E,R){return new k(E,R[0],R[1]||E.one)},k.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},k.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},k.prototype.dbl=function(){var R=this.x.redAdd(this.z).redSqr(),S=this.x.redSub(this.z).redSqr(),O=R.redSub(S),C=R.redMul(S),B=O.redMul(S.redAdd(this.curve.a24.redMul(O)));return this.curve.point(C,B)},k.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},k.prototype.diffAdd=function(E,R){var x=this.x.redAdd(this.z),S=this.x.redSub(this.z),O=E.x.redAdd(E.z),B=E.x.redSub(E.z).redMul(x),N=O.redMul(S),z=R.z.redMul(B.redAdd(N).redSqr()),X=R.x.redMul(B.redISub(N).redSqr());return this.curve.point(z,X)},k.prototype.mul=function(E){for(var R=E.clone(),x=this,S=this.curve.point(null,null),C=[];0!==R.cmpn(0);R.iushrn(1))C.push(R.andln(1));for(var B=C.length-1;B>=0;B--)0===C[B]?(x=x.diffAdd(S,this),S=S.dbl()):(S=x.diffAdd(S,this),x=x.dbl());return S},k.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},k.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},k.prototype.eq=function(E){return 0===this.getX().cmp(E.getX())},k.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},k.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},1781:(ye,ue,H)=>{"use strict";var j=H(1970),W=H(7433),I=H(3894),G=H(7902),p=j.assert;function k(R){G.call(this,"short",R),this.a=new W(R.a,16).toRed(this.red),this.b=new W(R.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(R),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function P(R,x,S,O){G.BasePoint.call(this,R,"affine"),null===x&&null===S?(this.x=null,this.y=null,this.inf=!0):(this.x=new W(x,16),this.y=new W(S,16),O&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function E(R,x,S,O){G.BasePoint.call(this,R,"jacobian"),null===x&&null===S&&null===O?(this.x=this.curve.one,this.y=this.curve.one,this.z=new W(0)):(this.x=new W(x,16),this.y=new W(S,16),this.z=new W(O,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}I(k,G),ye.exports=k,k.prototype._getEndomorphism=function(x){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var S,O;if(x.beta)S=new W(x.beta,16).toRed(this.red);else{var C=this._getEndoRoots(this.p);S=(S=C[0].cmp(C[1])<0?C[0]:C[1]).toRed(this.red)}if(x.lambda)O=new W(x.lambda,16);else{var B=this._getEndoRoots(this.n);0===this.g.mul(B[0]).x.cmp(this.g.x.redMul(S))?O=B[0]:p(0===this.g.mul(O=B[1]).x.cmp(this.g.x.redMul(S)))}return{beta:S,lambda:O,basis:x.basis?x.basis.map(function(z){return{a:new W(z.a,16),b:new W(z.b,16)}}):this._getEndoBasis(O)}}},k.prototype._getEndoRoots=function(x){var S=x===this.p?this.red:W.mont(x),O=new W(2).toRed(S).redInvm(),C=O.redNeg(),B=new W(3).toRed(S).redNeg().redSqrt().redMul(O);return[C.redAdd(B).fromRed(),C.redSub(B).fromRed()]},k.prototype._getEndoBasis=function(x){for(var U,Z,ee,ae,ge,Ce,De,Oe,y,S=this.n.ushrn(Math.floor(this.n.bitLength()/2)),O=x,C=this.n.clone(),B=new W(1),N=new W(0),z=new W(0),X=new W(1),we=0;0!==O.cmpn(0);){var o=C.div(O);Oe=C.sub(o.mul(O)),y=z.sub(o.mul(B));var l=X.sub(o.mul(N));if(!ee&&Oe.cmp(S)<0)U=De.neg(),Z=B,ee=Oe.neg(),ae=y;else if(ee&&2==++we)break;De=Oe,C=O,O=Oe,z=B,B=y,X=N,N=l}ge=Oe.neg(),Ce=y;var f=ee.sqr().add(ae.sqr());return ge.sqr().add(Ce.sqr()).cmp(f)>=0&&(ge=U,Ce=Z),ee.negative&&(ee=ee.neg(),ae=ae.neg()),ge.negative&&(ge=ge.neg(),Ce=Ce.neg()),[{a:ee,b:ae},{a:ge,b:Ce}]},k.prototype._endoSplit=function(x){var S=this.endo.basis,O=S[0],C=S[1],B=C.b.mul(x).divRound(this.n),N=O.b.neg().mul(x).divRound(this.n),z=B.mul(O.a),X=N.mul(C.a),U=B.mul(O.b),Z=N.mul(C.b);return{k1:x.sub(z).sub(X),k2:U.add(Z).neg()}},k.prototype.pointFromX=function(x,S){(x=new W(x,16)).red||(x=x.toRed(this.red));var O=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b),C=O.redSqrt();if(0!==C.redSqr().redSub(O).cmp(this.zero))throw new Error("invalid point");var B=C.fromRed().isOdd();return(S&&!B||!S&&B)&&(C=C.redNeg()),this.point(x,C)},k.prototype.validate=function(x){if(x.inf)return!0;var S=x.x,O=x.y,C=this.a.redMul(S),B=S.redSqr().redMul(S).redIAdd(C).redIAdd(this.b);return 0===O.redSqr().redISub(B).cmpn(0)},k.prototype._endoWnafMulAdd=function(x,S,O){for(var C=this._endoWnafT1,B=this._endoWnafT2,N=0;N<x.length;N++){var z=this._endoSplit(S[N]),X=x[N],U=X._getBeta();z.k1.negative&&(z.k1.ineg(),X=X.neg(!0)),z.k2.negative&&(z.k2.ineg(),U=U.neg(!0)),C[2*N]=X,C[2*N+1]=U,B[2*N]=z.k1,B[2*N+1]=z.k2}for(var Z=this._wnafMulAdd(1,C,B,2*N,O),ee=0;ee<2*N;ee++)C[ee]=null,B[ee]=null;return Z},I(P,G.BasePoint),k.prototype.point=function(x,S,O){return new P(this,x,S,O)},k.prototype.pointFromJSON=function(x,S){return P.fromJSON(this,x,S)},P.prototype._getBeta=function(){if(this.curve.endo){var x=this.precomputed;if(x&&x.beta)return x.beta;var S=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(x){var O=this.curve,C=function(B){return O.point(B.x.redMul(O.endo.beta),B.y)};x.beta=S,S.precomputed={beta:null,naf:x.naf&&{wnd:x.naf.wnd,points:x.naf.points.map(C)},doubles:x.doubles&&{step:x.doubles.step,points:x.doubles.points.map(C)}}}return S}},P.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},P.fromJSON=function(x,S,O){"string"==typeof S&&(S=JSON.parse(S));var C=x.point(S[0],S[1],O);if(!S[2])return C;function B(z){return x.point(z[0],z[1],O)}var N=S[2];return C.precomputed={beta:null,doubles:N.doubles&&{step:N.doubles.step,points:[C].concat(N.doubles.points.map(B))},naf:N.naf&&{wnd:N.naf.wnd,points:[C].concat(N.naf.points.map(B))}},C},P.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},P.prototype.isInfinity=function(){return this.inf},P.prototype.add=function(x){if(this.inf)return x;if(x.inf)return this;if(this.eq(x))return this.dbl();if(this.neg().eq(x))return this.curve.point(null,null);if(0===this.x.cmp(x.x))return this.curve.point(null,null);var S=this.y.redSub(x.y);0!==S.cmpn(0)&&(S=S.redMul(this.x.redSub(x.x).redInvm()));var O=S.redSqr().redISub(this.x).redISub(x.x),C=S.redMul(this.x.redSub(O)).redISub(this.y);return this.curve.point(O,C)},P.prototype.dbl=function(){if(this.inf)return this;var x=this.y.redAdd(this.y);if(0===x.cmpn(0))return this.curve.point(null,null);var S=this.curve.a,O=this.x.redSqr(),C=x.redInvm(),B=O.redAdd(O).redIAdd(O).redIAdd(S).redMul(C),N=B.redSqr().redISub(this.x.redAdd(this.x)),z=B.redMul(this.x.redSub(N)).redISub(this.y);return this.curve.point(N,z)},P.prototype.getX=function(){return this.x.fromRed()},P.prototype.getY=function(){return this.y.fromRed()},P.prototype.mul=function(x){return x=new W(x,16),this.isInfinity()?this:this._hasDoubles(x)?this.curve._fixedNafMul(this,x):this.curve.endo?this.curve._endoWnafMulAdd([this],[x]):this.curve._wnafMul(this,x)},P.prototype.mulAdd=function(x,S,O){var C=[this,S],B=[x,O];return this.curve.endo?this.curve._endoWnafMulAdd(C,B):this.curve._wnafMulAdd(1,C,B,2)},P.prototype.jmulAdd=function(x,S,O){var C=[this,S],B=[x,O];return this.curve.endo?this.curve._endoWnafMulAdd(C,B,!0):this.curve._wnafMulAdd(1,C,B,2,!0)},P.prototype.eq=function(x){return this===x||this.inf===x.inf&&(this.inf||0===this.x.cmp(x.x)&&0===this.y.cmp(x.y))},P.prototype.neg=function(x){if(this.inf)return this;var S=this.curve.point(this.x,this.y.redNeg());if(x&&this.precomputed){var O=this.precomputed,C=function(B){return B.neg()};S.precomputed={naf:O.naf&&{wnd:O.naf.wnd,points:O.naf.points.map(C)},doubles:O.doubles&&{step:O.doubles.step,points:O.doubles.points.map(C)}}}return S},P.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},I(E,G.BasePoint),k.prototype.jpoint=function(x,S,O){return new E(this,x,S,O)},E.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var x=this.z.redInvm(),S=x.redSqr(),O=this.x.redMul(S),C=this.y.redMul(S).redMul(x);return this.curve.point(O,C)},E.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},E.prototype.add=function(x){if(this.isInfinity())return x;if(x.isInfinity())return this;var S=x.z.redSqr(),O=this.z.redSqr(),C=this.x.redMul(S),B=x.x.redMul(O),N=this.y.redMul(S.redMul(x.z)),z=x.y.redMul(O.redMul(this.z)),X=C.redSub(B),U=N.redSub(z);if(0===X.cmpn(0))return 0!==U.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var Z=X.redSqr(),ee=Z.redMul(X),ae=C.redMul(Z),ge=U.redSqr().redIAdd(ee).redISub(ae).redISub(ae),Ce=U.redMul(ae.redISub(ge)).redISub(N.redMul(ee)),De=this.z.redMul(x.z).redMul(X);return this.curve.jpoint(ge,Ce,De)},E.prototype.mixedAdd=function(x){if(this.isInfinity())return x.toJ();if(x.isInfinity())return this;var S=this.z.redSqr(),O=this.x,C=x.x.redMul(S),B=this.y,N=x.y.redMul(S).redMul(this.z),z=O.redSub(C),X=B.redSub(N);if(0===z.cmpn(0))return 0!==X.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var U=z.redSqr(),Z=U.redMul(z),ee=O.redMul(U),ae=X.redSqr().redIAdd(Z).redISub(ee).redISub(ee),ge=X.redMul(ee.redISub(ae)).redISub(B.redMul(Z)),Ce=this.z.redMul(z);return this.curve.jpoint(ae,ge,Ce)},E.prototype.dblp=function(x){if(0===x)return this;if(this.isInfinity())return this;if(!x)return this.dbl();var S;if(this.curve.zeroA||this.curve.threeA){var O=this;for(S=0;S<x;S++)O=O.dbl();return O}var C=this.curve.a,B=this.curve.tinv,N=this.x,z=this.y,X=this.z,U=X.redSqr().redSqr(),Z=z.redAdd(z);for(S=0;S<x;S++){var ee=N.redSqr(),ae=Z.redSqr(),ge=ae.redSqr(),Ce=ee.redAdd(ee).redIAdd(ee).redIAdd(C.redMul(U)),De=N.redMul(ae),we=Ce.redSqr().redISub(De.redAdd(De)),Oe=De.redISub(we),y=Ce.redMul(Oe);y=y.redIAdd(y).redISub(ge);var o=Z.redMul(X);S+1<x&&(U=U.redMul(ge)),N=we,X=o,Z=y}return this.curve.jpoint(N,Z.redMul(B),X)},E.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},E.prototype._zeroDbl=function(){var x,S,O;if(this.zOne){var C=this.x.redSqr(),B=this.y.redSqr(),N=B.redSqr(),z=this.x.redAdd(B).redSqr().redISub(C).redISub(N);z=z.redIAdd(z);var X=C.redAdd(C).redIAdd(C),U=X.redSqr().redISub(z).redISub(z),Z=N.redIAdd(N);Z=(Z=Z.redIAdd(Z)).redIAdd(Z),x=U,S=X.redMul(z.redISub(U)).redISub(Z),O=this.y.redAdd(this.y)}else{var ee=this.x.redSqr(),ae=this.y.redSqr(),ge=ae.redSqr(),Ce=this.x.redAdd(ae).redSqr().redISub(ee).redISub(ge);Ce=Ce.redIAdd(Ce);var De=ee.redAdd(ee).redIAdd(ee),we=De.redSqr(),Oe=ge.redIAdd(ge);Oe=(Oe=Oe.redIAdd(Oe)).redIAdd(Oe),x=we.redISub(Ce).redISub(Ce),S=De.redMul(Ce.redISub(x)).redISub(Oe),O=(O=this.y.redMul(this.z)).redIAdd(O)}return this.curve.jpoint(x,S,O)},E.prototype._threeDbl=function(){var x,S,O;if(this.zOne){var C=this.x.redSqr(),B=this.y.redSqr(),N=B.redSqr(),z=this.x.redAdd(B).redSqr().redISub(C).redISub(N);z=z.redIAdd(z);var X=C.redAdd(C).redIAdd(C).redIAdd(this.curve.a),U=X.redSqr().redISub(z).redISub(z);x=U;var Z=N.redIAdd(N);Z=(Z=Z.redIAdd(Z)).redIAdd(Z),S=X.redMul(z.redISub(U)).redISub(Z),O=this.y.redAdd(this.y)}else{var ee=this.z.redSqr(),ae=this.y.redSqr(),ge=this.x.redMul(ae),Ce=this.x.redSub(ee).redMul(this.x.redAdd(ee));Ce=Ce.redAdd(Ce).redIAdd(Ce);var De=ge.redIAdd(ge),we=(De=De.redIAdd(De)).redAdd(De);x=Ce.redSqr().redISub(we),O=this.y.redAdd(this.z).redSqr().redISub(ae).redISub(ee);var Oe=ae.redSqr();Oe=(Oe=(Oe=Oe.redIAdd(Oe)).redIAdd(Oe)).redIAdd(Oe),S=Ce.redMul(De.redISub(x)).redISub(Oe)}return this.curve.jpoint(x,S,O)},E.prototype._dbl=function(){var x=this.curve.a,S=this.x,O=this.y,C=this.z,B=C.redSqr().redSqr(),N=S.redSqr(),z=O.redSqr(),X=N.redAdd(N).redIAdd(N).redIAdd(x.redMul(B)),U=S.redAdd(S),Z=(U=U.redIAdd(U)).redMul(z),ee=X.redSqr().redISub(Z.redAdd(Z)),ae=Z.redISub(ee),ge=z.redSqr();ge=(ge=(ge=ge.redIAdd(ge)).redIAdd(ge)).redIAdd(ge);var Ce=X.redMul(ae).redISub(ge),De=O.redAdd(O).redMul(C);return this.curve.jpoint(ee,Ce,De)},E.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var x=this.x.redSqr(),S=this.y.redSqr(),O=this.z.redSqr(),C=S.redSqr(),B=x.redAdd(x).redIAdd(x),N=B.redSqr(),z=this.x.redAdd(S).redSqr().redISub(x).redISub(C),X=(z=(z=(z=z.redIAdd(z)).redAdd(z).redIAdd(z)).redISub(N)).redSqr(),U=C.redIAdd(C);U=(U=(U=U.redIAdd(U)).redIAdd(U)).redIAdd(U);var Z=B.redIAdd(z).redSqr().redISub(N).redISub(X).redISub(U),ee=S.redMul(Z);ee=(ee=ee.redIAdd(ee)).redIAdd(ee);var ae=this.x.redMul(X).redISub(ee);ae=(ae=ae.redIAdd(ae)).redIAdd(ae);var ge=this.y.redMul(Z.redMul(U.redISub(Z)).redISub(z.redMul(X)));ge=(ge=(ge=ge.redIAdd(ge)).redIAdd(ge)).redIAdd(ge);var Ce=this.z.redAdd(z).redSqr().redISub(O).redISub(X);return this.curve.jpoint(ae,ge,Ce)},E.prototype.mul=function(x,S){return x=new W(x,S),this.curve._wnafMul(this,x)},E.prototype.eq=function(x){if("affine"===x.type)return this.eq(x.toJ());if(this===x)return!0;var S=this.z.redSqr(),O=x.z.redSqr();if(0!==this.x.redMul(O).redISub(x.x.redMul(S)).cmpn(0))return!1;var C=S.redMul(this.z),B=O.redMul(x.z);return 0===this.y.redMul(B).redISub(x.y.redMul(C)).cmpn(0)},E.prototype.eqXToP=function(x){var S=this.z.redSqr(),O=x.toRed(this.curve.red).redMul(S);if(0===this.x.cmp(O))return!0;for(var C=x.clone(),B=this.curve.redN.redMul(S);;){if(C.iadd(this.curve.n),C.cmp(this.curve.p)>=0)return!1;if(O.redIAdd(B),0===this.x.cmp(O))return!0}},E.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},E.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},2916:(ye,ue,H)=>{"use strict";var E,j=ue,W=H(7084),I=H(6270),p=H(1970).assert;function k(R){this.curve="short"===R.type?new I.short(R):"edwards"===R.type?new I.edwards(R):new I.mont(R),this.g=this.curve.g,this.n=this.curve.n,this.hash=R.hash,p(this.g.validate(),"Invalid curve"),p(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function P(R,x){Object.defineProperty(j,R,{configurable:!0,enumerable:!0,get:function(){var S=new k(x);return Object.defineProperty(j,R,{configurable:!0,enumerable:!0,value:S}),S}})}j.PresetCurve=k,P("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:W.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),P("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:W.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),P("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:W.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),P("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:W.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),P("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:W.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),P("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:W.sha256,gRed:!1,g:["9"]}),P("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:W.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{E=H(5150)}catch(R){E=void 0}P("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:W.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",E]})},7626:(ye,ue,H)=>{"use strict";var j=H(7433),W=H(2438),I=H(1970),G=H(2916),p=H(7950),k=I.assert,P=H(1259),E=H(5957);function R(x){if(!(this instanceof R))return new R(x);"string"==typeof x&&(k(Object.prototype.hasOwnProperty.call(G,x),"Unknown curve "+x),x=G[x]),x instanceof G.PresetCurve&&(x={curve:x}),this.curve=x.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=x.curve.g,this.g.precompute(x.curve.n.bitLength()+1),this.hash=x.hash||x.curve.hash}ye.exports=R,R.prototype.keyPair=function(S){return new P(this,S)},R.prototype.keyFromPrivate=function(S,O){return P.fromPrivate(this,S,O)},R.prototype.keyFromPublic=function(S,O){return P.fromPublic(this,S,O)},R.prototype.genKeyPair=function(S){S||(S={});for(var O=new W({hash:this.hash,pers:S.pers,persEnc:S.persEnc||"utf8",entropy:S.entropy||p(this.hash.hmacStrength),entropyEnc:S.entropy&&S.entropyEnc||"utf8",nonce:this.n.toArray()}),C=this.n.byteLength(),B=this.n.sub(new j(2));;){var N=new j(O.generate(C));if(!(N.cmp(B)>0))return N.iaddn(1),this.keyFromPrivate(N)}},R.prototype._truncateToN=function(S,O){var C=8*S.byteLength()-this.n.bitLength();return C>0&&(S=S.ushrn(C)),!O&&S.cmp(this.n)>=0?S.sub(this.n):S},R.prototype.sign=function(S,O,C,B){"object"==typeof C&&(B=C,C=null),B||(B={}),O=this.keyFromPrivate(O,C),S=this._truncateToN(new j(S,16));for(var N=this.n.byteLength(),z=O.getPrivate().toArray("be",N),X=S.toArray("be",N),U=new W({hash:this.hash,entropy:z,nonce:X,pers:B.pers,persEnc:B.persEnc||"utf8"}),Z=this.n.sub(new j(1)),ee=0;;ee++){var ae=B.k?B.k(ee):new j(U.generate(this.n.byteLength()));if(!((ae=this._truncateToN(ae,!0)).cmpn(1)<=0||ae.cmp(Z)>=0)){var ge=this.g.mul(ae);if(!ge.isInfinity()){var Ce=ge.getX(),De=Ce.umod(this.n);if(0!==De.cmpn(0)){var we=ae.invm(this.n).mul(De.mul(O.getPrivate()).iadd(S));if(0!==(we=we.umod(this.n)).cmpn(0)){var Oe=(ge.getY().isOdd()?1:0)|(0!==Ce.cmp(De)?2:0);return B.canonical&&we.cmp(this.nh)>0&&(we=this.n.sub(we),Oe^=1),new E({r:De,s:we,recoveryParam:Oe})}}}}}},R.prototype.verify=function(S,O,C,B){S=this._truncateToN(new j(S,16)),C=this.keyFromPublic(C,B);var N=(O=new E(O,"hex")).r,z=O.s;if(N.cmpn(1)<0||N.cmp(this.n)>=0||z.cmpn(1)<0||z.cmp(this.n)>=0)return!1;var ee,X=z.invm(this.n),U=X.mul(S).umod(this.n),Z=X.mul(N).umod(this.n);return this.curve._maxwellTrick?!(ee=this.g.jmulAdd(U,C.getPublic(),Z)).isInfinity()&&ee.eqXToP(N):!(ee=this.g.mulAdd(U,C.getPublic(),Z)).isInfinity()&&0===ee.getX().umod(this.n).cmp(N)},R.prototype.recoverPubKey=function(x,S,O,C){k((3&O)===O,"The recovery param is more than two bits"),S=new E(S,C);var B=this.n,N=new j(x),z=S.r,X=S.s,U=1&O,Z=O>>1;if(z.cmp(this.curve.p.umod(this.curve.n))>=0&&Z)throw new Error("Unable to find sencond key candinate");z=this.curve.pointFromX(Z?z.add(this.curve.n):z,U);var ee=S.r.invm(B),ae=B.sub(N).mul(ee).umod(B),ge=X.mul(ee).umod(B);return this.g.mulAdd(ae,z,ge)},R.prototype.getKeyRecoveryParam=function(x,S,O,C){if(null!==(S=new E(S,C)).recoveryParam)return S.recoveryParam;for(var B=0;B<4;B++){var N;try{N=this.recoverPubKey(x,S,B)}catch(z){continue}if(N.eq(O))return B}throw new Error("Unable to find valid recovery factor")}},1259:(ye,ue,H)=>{"use strict";var j=H(7433),I=H(1970).assert;function G(p,k){this.ec=p,this.priv=null,this.pub=null,k.priv&&this._importPrivate(k.priv,k.privEnc),k.pub&&this._importPublic(k.pub,k.pubEnc)}ye.exports=G,G.fromPublic=function(k,P,E){return P instanceof G?P:new G(k,{pub:P,pubEnc:E})},G.fromPrivate=function(k,P,E){return P instanceof G?P:new G(k,{priv:P,privEnc:E})},G.prototype.validate=function(){var k=this.getPublic();return k.isInfinity()?{result:!1,reason:"Invalid public key"}:k.validate()?k.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},G.prototype.getPublic=function(k,P){return"string"==typeof k&&(P=k,k=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),P?this.pub.encode(P,k):this.pub},G.prototype.getPrivate=function(k){return"hex"===k?this.priv.toString(16,2):this.priv},G.prototype._importPrivate=function(k,P){this.priv=new j(k,P||16),this.priv=this.priv.umod(this.ec.curve.n)},G.prototype._importPublic=function(k,P){if(k.x||k.y)return"mont"===this.ec.curve.type?I(k.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&I(k.x&&k.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(k.x,k.y));this.pub=this.ec.curve.decodePoint(k,P)},G.prototype.derive=function(k){return k.validate()||I(k.validate(),"public point not validated"),k.mul(this.priv).getX()},G.prototype.sign=function(k,P,E){return this.ec.sign(k,this,P,E)},G.prototype.verify=function(k,P){return this.ec.verify(k,P,this)},G.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},5957:(ye,ue,H)=>{"use strict";var j=H(7433),W=H(1970),I=W.assert;function G(R,x){if(R instanceof G)return R;this._importDER(R,x)||(I(R.r&&R.s,"Signature without r or s"),this.r=new j(R.r,16),this.s=new j(R.s,16),this.recoveryParam=void 0===R.recoveryParam?null:R.recoveryParam)}function p(){this.place=0}function k(R,x){var S=R[x.place++];if(!(128&S))return S;var O=15&S;if(0===O||O>4)return!1;for(var C=0,B=0,N=x.place;B<O;B++,N++)C<<=8,C|=R[N],C>>>=0;return!(C<=127)&&(x.place=N,C)}function P(R){for(var x=0,S=R.length-1;!R[x]&&!(128&R[x+1])&&x<S;)x++;return 0===x?R:R.slice(x)}function E(R,x){if(x<128)R.push(x);else{var S=1+(Math.log(x)/Math.LN2>>>3);for(R.push(128|S);--S;)R.push(x>>>(S<<3)&255);R.push(x)}}ye.exports=G,G.prototype._importDER=function(x,S){x=W.toArray(x,S);var O=new p;if(48!==x[O.place++])return!1;var C=k(x,O);if(!1===C||C+O.place!==x.length||2!==x[O.place++])return!1;var B=k(x,O);if(!1===B)return!1;var N=x.slice(O.place,B+O.place);if(O.place+=B,2!==x[O.place++])return!1;var z=k(x,O);if(!1===z||x.length!==z+O.place)return!1;var X=x.slice(O.place,z+O.place);if(0===N[0]){if(!(128&N[1]))return!1;N=N.slice(1)}if(0===X[0]){if(!(128&X[1]))return!1;X=X.slice(1)}return this.r=new j(N),this.s=new j(X),this.recoveryParam=null,!0},G.prototype.toDER=function(x){var S=this.r.toArray(),O=this.s.toArray();for(128&S[0]&&(S=[0].concat(S)),128&O[0]&&(O=[0].concat(O)),S=P(S),O=P(O);!(O[0]||128&O[1]);)O=O.slice(1);var C=[2];E(C,S.length),(C=C.concat(S)).push(2),E(C,O.length);var B=C.concat(O),N=[48];return E(N,B.length),N=N.concat(B),W.encode(N,x)}},1885:(ye,ue,H)=>{"use strict";var j=H(7084),W=H(2916),I=H(1970),G=I.assert,p=I.parseBytes,k=H(7535),P=H(8241);function E(R){if(G("ed25519"===R,"only tested with ed25519 so far"),!(this instanceof E))return new E(R);this.curve=R=W[R].curve,this.g=R.g,this.g.precompute(R.n.bitLength()+1),this.pointClass=R.point().constructor,this.encodingLength=Math.ceil(R.n.bitLength()/8),this.hash=j.sha512}ye.exports=E,E.prototype.sign=function(x,S){x=p(x);var O=this.keyFromSecret(S),C=this.hashInt(O.messagePrefix(),x),B=this.g.mul(C),N=this.encodePoint(B),z=this.hashInt(N,O.pubBytes(),x).mul(O.priv()),X=C.add(z).umod(this.curve.n);return this.makeSignature({R:B,S:X,Rencoded:N})},E.prototype.verify=function(x,S,O){x=p(x),S=this.makeSignature(S);var C=this.keyFromPublic(O),B=this.hashInt(S.Rencoded(),C.pubBytes(),x),N=this.g.mul(S.S());return S.R().add(C.pub().mul(B)).eq(N)},E.prototype.hashInt=function(){for(var x=this.hash(),S=0;S<arguments.length;S++)x.update(arguments[S]);return I.intFromLE(x.digest()).umod(this.curve.n)},E.prototype.keyFromPublic=function(x){return k.fromPublic(this,x)},E.prototype.keyFromSecret=function(x){return k.fromSecret(this,x)},E.prototype.makeSignature=function(x){return x instanceof P?x:new P(this,x)},E.prototype.encodePoint=function(x){var S=x.getY().toArray("le",this.encodingLength);return S[this.encodingLength-1]|=x.getX().isOdd()?128:0,S},E.prototype.decodePoint=function(x){var S=(x=I.parseBytes(x)).length-1,O=x.slice(0,S).concat(-129&x[S]),C=0!=(128&x[S]),B=I.intFromLE(O);return this.curve.pointFromY(B,C)},E.prototype.encodeInt=function(x){return x.toArray("le",this.encodingLength)},E.prototype.decodeInt=function(x){return I.intFromLE(x)},E.prototype.isPoint=function(x){return x instanceof this.pointClass}},7535:(ye,ue,H)=>{"use strict";var j=H(1970),W=j.assert,I=j.parseBytes,G=j.cachedProperty;function p(k,P){this.eddsa=k,this._secret=I(P.secret),k.isPoint(P.pub)?this._pub=P.pub:this._pubBytes=I(P.pub)}p.fromPublic=function(P,E){return E instanceof p?E:new p(P,{pub:E})},p.fromSecret=function(P,E){return E instanceof p?E:new p(P,{secret:E})},p.prototype.secret=function(){return this._secret},G(p,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),G(p,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),G(p,"privBytes",function(){var P=this.eddsa,E=this.hash(),R=P.encodingLength-1,x=E.slice(0,P.encodingLength);return x[0]&=248,x[R]&=127,x[R]|=64,x}),G(p,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),G(p,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),G(p,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),p.prototype.sign=function(P){return W(this._secret,"KeyPair can only verify"),this.eddsa.sign(P,this)},p.prototype.verify=function(P,E){return this.eddsa.verify(P,E,this)},p.prototype.getSecret=function(P){return W(this._secret,"KeyPair is public only"),j.encode(this.secret(),P)},p.prototype.getPublic=function(P){return j.encode(this.pubBytes(),P)},ye.exports=p},8241:(ye,ue,H)=>{"use strict";var j=H(7433),W=H(1970),I=W.assert,G=W.cachedProperty,p=W.parseBytes;function k(P,E){this.eddsa=P,"object"!=typeof E&&(E=p(E)),Array.isArray(E)&&(E={R:E.slice(0,P.encodingLength),S:E.slice(P.encodingLength)}),I(E.R&&E.S,"Signature without R or S"),P.isPoint(E.R)&&(this._R=E.R),E.S instanceof j&&(this._S=E.S),this._Rencoded=Array.isArray(E.R)?E.R:E.Rencoded,this._Sencoded=Array.isArray(E.S)?E.S:E.Sencoded}G(k,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),G(k,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),G(k,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),G(k,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),k.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},k.prototype.toHex=function(){return W.encode(this.toBytes(),"hex").toUpperCase()},ye.exports=k},5150:ye=>{ye.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},1970:(ye,ue,H)=>{"use strict";var j=ue,W=H(7433),I=H(2391),G=H(8195);j.assert=I,j.toArray=G.toArray,j.zero2=G.zero2,j.toHex=G.toHex,j.encode=G.encode,j.getNAF=function p(x,S,O){var C=new Array(Math.max(x.bitLength(),O)+1);C.fill(0);for(var B=1<<S+1,N=x.clone(),z=0;z<C.length;z++){var X,U=N.andln(B-1);N.isOdd()?N.isubn(X=U>(B>>1)-1?(B>>1)-U:U):X=0,C[z]=X,N.iushrn(1)}return C},j.getJSF=function k(x,S){var O=[[],[]];x=x.clone(),S=S.clone();for(var N,C=0,B=0;x.cmpn(-C)>0||S.cmpn(-B)>0;){var U,Z,z=x.andln(3)+C&3,X=S.andln(3)+B&3;3===z&&(z=-1),3===X&&(X=-1),U=0==(1&z)?0:3!=(N=x.andln(7)+C&7)&&5!==N||2!==X?z:-z,O[0].push(U),Z=0==(1&X)?0:3!=(N=S.andln(7)+B&7)&&5!==N||2!==z?X:-X,O[1].push(Z),2*C===U+1&&(C=1-C),2*B===Z+1&&(B=1-B),x.iushrn(1),S.iushrn(1)}return O},j.cachedProperty=function P(x,S,O){var C="_"+S;x.prototype[S]=function(){return void 0!==this[C]?this[C]:this[C]=O.call(this)}},j.parseBytes=function E(x){return"string"==typeof x?j.toArray(x,"hex"):x},j.intFromLE=function R(x){return new W(x,"hex","le")}},7433:function(ye,ue,H){!function(j,W){"use strict";function I(y,o){if(!y)throw new Error(o||"Assertion failed")}function G(y,o){y.super_=o;var l=function(){};l.prototype=o.prototype,y.prototype=new l,y.prototype.constructor=y}function p(y,o,l){if(p.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,null!==y&&(("le"===o||"be"===o)&&(l=o,o=10),this._init(y||0,o||10,l||"be"))}var k;"object"==typeof j?j.exports=p:W.BN=p,p.BN=p,p.wordSize=26;try{k="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:H(5568).Buffer}catch(y){}function P(y,o){var l=y.charCodeAt(o);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function E(y,o,l){var f=P(y,l);return l-1>=o&&(f|=P(y,l-1)<<4),f}function R(y,o,l,f){for(var u=0,h=Math.min(y.length,l),b=o;b<h;b++){var w=y.charCodeAt(b)-48;u*=f,u+=w>=49?w-49+10:w>=17?w-17+10:w}return u}p.isBN=function(o){return o instanceof p||null!==o&&"object"==typeof o&&o.constructor.wordSize===p.wordSize&&Array.isArray(o.words)},p.max=function(o,l){return o.cmp(l)>0?o:l},p.min=function(o,l){return o.cmp(l)<0?o:l},p.prototype._init=function(o,l,f){if("number"==typeof o)return this._initNumber(o,l,f);if("object"==typeof o)return this._initArray(o,l,f);"hex"===l&&(l=16),I(l===(0|l)&&l>=2&&l<=36);var u=0;"-"===(o=o.toString().replace(/\s+/g,""))[0]&&(u++,this.negative=1),u<o.length&&(16===l?this._parseHex(o,u,f):(this._parseBase(o,l,u),"le"===f&&this._initArray(this.toArray(),l,f)))},p.prototype._initNumber=function(o,l,f){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[67108863&o],this.length=1):o<4503599627370496?(this.words=[67108863&o,o/67108864&67108863],this.length=2):(I(o<9007199254740992),this.words=[67108863&o,o/67108864&67108863,1],this.length=3),"le"===f&&this._initArray(this.toArray(),l,f)},p.prototype._initArray=function(o,l,f){if(I("number"==typeof o.length),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var h,b,w=0;if("be"===f)for(u=o.length-1,h=0;u>=0;u-=3)this.words[h]|=(b=o[u]|o[u-1]<<8|o[u-2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);else if("le"===f)for(u=0,h=0;u<o.length;u+=3)this.words[h]|=(b=o[u]|o[u+1]<<8|o[u+2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);return this.strip()},p.prototype._parseHex=function(o,l,f){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var w,h=0,b=0;if("be"===f)for(u=o.length-1;u>=l;u-=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;else for(u=(o.length-l)%2==0?l+1:l;u<o.length;u+=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;this.strip()},p.prototype._parseBase=function(o,l,f){this.words=[0],this.length=1;for(var u=0,h=1;h<=67108863;h*=l)u++;u--,h=h/l|0;for(var b=o.length-f,w=b%u,g=Math.min(b,b-w)+f,s=0,v=f;v<g;v+=u)s=R(o,v,v+u,l),this.imuln(h),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==w){var $=1;for(s=R(o,v,o.length,l),v=0;v<w;v++)$*=l;this.imuln($),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},p.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red},p.prototype.clone=function(){var o=new p(null);return this.copy(o),o},p.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},p.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},p.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},p.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function B(y,o,l){l.negative=o.negative^y.negative;var f=y.length+o.length|0;l.length=f,f=f-1|0;var u=0|y.words[0],h=0|o.words[0],b=u*h,g=b/67108864|0;l.words[0]=67108863&b;for(var s=1;s<f;s++){for(var v=g>>>26,$=67108863&g,L=Math.min(s,o.length-1),ie=Math.max(0,s-y.length+1);ie<=L;ie++)v+=(b=(u=0|y.words[s-ie|0])*(h=0|o.words[ie])+$)/67108864|0,$=67108863&b;l.words[s]=0|$,g=0|v}return 0!==g?l.words[s]=0|g:l.length--,l.strip()}p.prototype.toString=function(o,l){var f;if(l=0|l||1,16===(o=o||10)||"hex"===o){f="";for(var u=0,h=0,b=0;b<this.length;b++){var w=this.words[b],g=(16777215&(w<<u|h)).toString(16);f=0!=(h=w>>>24-u&16777215)||b!==this.length-1?x[6-g.length]+g+f:g+f,(u+=2)>=26&&(u-=26,b--)}for(0!==h&&(f=h.toString(16)+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}if(o===(0|o)&&o>=2&&o<=36){var s=S[o],v=O[o];f="";var $=this.clone();for($.negative=0;!$.isZero();){var L=$.modn(v).toString(o);f=($=$.idivn(v)).isZero()?L+f:x[s-L.length]+L+f}for(this.isZero()&&(f="0"+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}I(!1,"Base should be between 2 and 36")},p.prototype.toNumber=function(){var o=this.words[0];return 2===this.length?o+=67108864*this.words[1]:3===this.length&&1===this.words[2]?o+=4503599627370496+67108864*this.words[1]:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-o:o},p.prototype.toJSON=function(){return this.toString(16)},p.prototype.toBuffer=function(o,l){return I(void 0!==k),this.toArrayLike(k,o,l)},p.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)},p.prototype.toArrayLike=function(o,l,f){var u=this.byteLength(),h=f||Math.max(1,u);I(u<=h,"byte array longer than desired length"),I(h>0,"Requested array length <= 0"),this.strip();var g,s,b="le"===l,w=new o(h),v=this.clone();if(b){for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[s]=g;for(;s<h;s++)w[s]=0}else{for(s=0;s<h-u;s++)w[s]=0;for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[h-s-1]=g}return w},p.prototype._countBits=Math.clz32?function(o){return 32-Math.clz32(o)}:function(o){var l=o,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},p.prototype._zeroBits=function(o){if(0===o)return 26;var l=o,f=0;return 0==(8191&l)&&(f+=13,l>>>=13),0==(127&l)&&(f+=7,l>>>=7),0==(15&l)&&(f+=4,l>>>=4),0==(3&l)&&(f+=2,l>>>=2),0==(1&l)&&f++,f},p.prototype.bitLength=function(){var l=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+l},p.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(o+=f,26!==f)break}return o},p.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},p.prototype.toTwos=function(o){return 0!==this.negative?this.abs().inotn(o).iaddn(1):this.clone()},p.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},p.prototype.isNeg=function(){return 0!==this.negative},p.prototype.neg=function(){return this.clone().ineg()},p.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},p.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this.strip()},p.prototype.ior=function(o){return I(0==(this.negative|o.negative)),this.iuor(o)},p.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},p.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},p.prototype.iuand=function(o){var l;l=this.length>o.length?o:this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&o.words[f];return this.length=l.length,this.strip()},p.prototype.iand=function(o){return I(0==(this.negative|o.negative)),this.iuand(o)},p.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},p.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},p.prototype.iuxor=function(o){var l,f;this.length>o.length?(l=this,f=o):(l=o,f=this);for(var u=0;u<f.length;u++)this.words[u]=l.words[u]^f.words[u];if(this!==l)for(;u<l.length;u++)this.words[u]=l.words[u];return this.length=l.length,this.strip()},p.prototype.ixor=function(o){return I(0==(this.negative|o.negative)),this.iuxor(o)},p.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},p.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},p.prototype.inotn=function(o){I("number"==typeof o&&o>=0);var l=0|Math.ceil(o/26),f=o%26;this._expand(l),f>0&&l--;for(var u=0;u<l;u++)this.words[u]=67108863&~this.words[u];return f>0&&(this.words[u]=~this.words[u]&67108863>>26-f),this.strip()},p.prototype.notn=function(o){return this.clone().inotn(o)},p.prototype.setn=function(o,l){I("number"==typeof o&&o>=0);var f=o/26|0,u=o%26;return this._expand(f+1),this.words[f]=l?this.words[f]|1<<u:this.words[f]&~(1<<u),this.strip()},p.prototype.iadd=function(o){var l,f,u;if(0!==this.negative&&0===o.negative)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(0===this.negative&&0!==o.negative)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();this.length>o.length?(f=this,u=o):(f=o,u=this);for(var h=0,b=0;b<u.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+(0|u.words[b])+h),h=l>>>26;for(;0!==h&&b<f.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+h),h=l>>>26;if(this.length=f.length,0!==h)this.words[this.length]=h,this.length++;else if(f!==this)for(;b<f.length;b++)this.words[b]=f.words[b];return this},p.prototype.add=function(o){var l;return 0!==o.negative&&0===this.negative?(o.negative=0,l=this.sub(o),o.negative^=1,l):0===o.negative&&0!==this.negative?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},p.prototype.isub=function(o){if(0!==o.negative){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var u,h,f=this.cmp(o);if(0===f)return this.negative=0,this.length=1,this.words[0]=0,this;f>0?(u=this,h=o):(u=o,h=this);for(var b=0,w=0;w<h.length;w++)b=(l=(0|u.words[w])-(0|h.words[w])+b)>>26,this.words[w]=67108863&l;for(;0!==b&&w<u.length;w++)b=(l=(0|u.words[w])+b)>>26,this.words[w]=67108863&l;if(0===b&&w<u.length&&u!==this)for(;w<u.length;w++)this.words[w]=u.words[w];return this.length=Math.max(this.length,w),u!==this&&(this.negative=1),this.strip()},p.prototype.sub=function(o){return this.clone().isub(o)};var N=function(o,l,f){var g,s,v,u=o.words,h=l.words,b=f.words,w=0,$=0|u[0],L=8191&$,ie=$>>>13,Se=0|u[1],ke=8191&Se,Be=Se>>>13,Pe=0|u[2],Te=8191&Pe,Ie=Pe>>>13,Vt=0|u[3],je=8191&Vt,se=Vt>>>13,Ee=0|u[4],Re=8191&Ee,Ge=Ee>>>13,ui=0|u[5],qe=8191&ui,Ye=ui>>>13,xi=0|u[6],et=8191&xi,Ke=xi>>>13,qi=0|u[7],ut=8191&qi,Qe=qi>>>13,rn=0|u[8],le=8191&rn,J=rn>>>13,re=0|u[9],ve=8191&re,xe=re>>>13,ot=0|h[0],Ne=8191&ot,Xe=ot>>>13,Pi=0|h[1],it=8191&Pi,rt=Pi>>>13,bi=0|h[2],ht=8191&bi,_t=bi>>>13,Sr=0|h[3],gt=8191&Sr,vt=Sr>>>13,Dr=0|h[4],st=8191&Dr,yt=Dr>>>13,Ir=0|h[5],mt=8191&Ir,wt=Ir>>>13,Cr=0|h[6],ct=8191&Cr,ft=Cr>>>13,An=0|h[7],St=8191&An,at=An>>>13,Tr=0|h[8],dt=8191&Tr,Mt=Tr>>>13,$r=0|h[9],Tt=8191&$r,Ct=$r>>>13;f.negative=o.negative^l.negative,f.length=19;var Fn=(w+(g=Math.imul(L,Ne))|0)+((8191&(s=(s=Math.imul(L,Xe))+Math.imul(ie,Ne)|0))<<13)|0;w=((v=Math.imul(ie,Xe))+(s>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,g=Math.imul(ke,Ne),s=(s=Math.imul(ke,Xe))+Math.imul(Be,Ne)|0,v=Math.imul(Be,Xe);var Ri=(w+(g=g+Math.imul(L,it)|0)|0)+((8191&(s=(s=s+Math.imul(L,rt)|0)+Math.imul(ie,it)|0))<<13)|0;w=((v=v+Math.imul(ie,rt)|0)+(s>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,g=Math.imul(Te,Ne),s=(s=Math.imul(Te,Xe))+Math.imul(Ie,Ne)|0,v=Math.imul(Ie,Xe),g=g+Math.imul(ke,it)|0,s=(s=s+Math.imul(ke,rt)|0)+Math.imul(Be,it)|0,v=v+Math.imul(Be,rt)|0;var Oi=(w+(g=g+Math.imul(L,ht)|0)|0)+((8191&(s=(s=s+Math.imul(L,_t)|0)+Math.imul(ie,ht)|0))<<13)|0;w=((v=v+Math.imul(ie,_t)|0)+(s>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,g=Math.imul(je,Ne),s=(s=Math.imul(je,Xe))+Math.imul(se,Ne)|0,v=Math.imul(se,Xe),g=g+Math.imul(Te,it)|0,s=(s=s+Math.imul(Te,rt)|0)+Math.imul(Ie,it)|0,v=v+Math.imul(Ie,rt)|0,g=g+Math.imul(ke,ht)|0,s=(s=s+Math.imul(ke,_t)|0)+Math.imul(Be,ht)|0,v=v+Math.imul(Be,_t)|0;var zn=(w+(g=g+Math.imul(L,gt)|0)|0)+((8191&(s=(s=s+Math.imul(L,vt)|0)+Math.imul(ie,gt)|0))<<13)|0;w=((v=v+Math.imul(ie,vt)|0)+(s>>>13)|0)+(zn>>>26)|0,zn&=67108863,g=Math.imul(Re,Ne),s=(s=Math.imul(Re,Xe))+Math.imul(Ge,Ne)|0,v=Math.imul(Ge,Xe),g=g+Math.imul(je,it)|0,s=(s=s+Math.imul(je,rt)|0)+Math.imul(se,it)|0,v=v+Math.imul(se,rt)|0,g=g+Math.imul(Te,ht)|0,s=(s=s+Math.imul(Te,_t)|0)+Math.imul(Ie,ht)|0,v=v+Math.imul(Ie,_t)|0,g=g+Math.imul(ke,gt)|0,s=(s=s+Math.imul(ke,vt)|0)+Math.imul(Be,gt)|0,v=v+Math.imul(Be,vt)|0;var jn=(w+(g=g+Math.imul(L,st)|0)|0)+((8191&(s=(s=s+Math.imul(L,yt)|0)+Math.imul(ie,st)|0))<<13)|0;w=((v=v+Math.imul(ie,yt)|0)+(s>>>13)|0)+(jn>>>26)|0,jn&=67108863,g=Math.imul(qe,Ne),s=(s=Math.imul(qe,Xe))+Math.imul(Ye,Ne)|0,v=Math.imul(Ye,Xe),g=g+Math.imul(Re,it)|0,s=(s=s+Math.imul(Re,rt)|0)+Math.imul(Ge,it)|0,v=v+Math.imul(Ge,rt)|0,g=g+Math.imul(je,ht)|0,s=(s=s+Math.imul(je,_t)|0)+Math.imul(se,ht)|0,v=v+Math.imul(se,_t)|0,g=g+Math.imul(Te,gt)|0,s=(s=s+Math.imul(Te,vt)|0)+Math.imul(Ie,gt)|0,v=v+Math.imul(Ie,vt)|0,g=g+Math.imul(ke,st)|0,s=(s=s+Math.imul(ke,yt)|0)+Math.imul(Be,st)|0,v=v+Math.imul(Be,yt)|0;var tr=(w+(g=g+Math.imul(L,mt)|0)|0)+((8191&(s=(s=s+Math.imul(L,wt)|0)+Math.imul(ie,mt)|0))<<13)|0;w=((v=v+Math.imul(ie,wt)|0)+(s>>>13)|0)+(tr>>>26)|0,tr&=67108863,g=Math.imul(et,Ne),s=(s=Math.imul(et,Xe))+Math.imul(Ke,Ne)|0,v=Math.imul(Ke,Xe),g=g+Math.imul(qe,it)|0,s=(s=s+Math.imul(qe,rt)|0)+Math.imul(Ye,it)|0,v=v+Math.imul(Ye,rt)|0,g=g+Math.imul(Re,ht)|0,s=(s=s+Math.imul(Re,_t)|0)+Math.imul(Ge,ht)|0,v=v+Math.imul(Ge,_t)|0,g=g+Math.imul(je,gt)|0,s=(s=s+Math.imul(je,vt)|0)+Math.imul(se,gt)|0,v=v+Math.imul(se,vt)|0,g=g+Math.imul(Te,st)|0,s=(s=s+Math.imul(Te,yt)|0)+Math.imul(Ie,st)|0,v=v+Math.imul(Ie,yt)|0,g=g+Math.imul(ke,mt)|0,s=(s=s+Math.imul(ke,wt)|0)+Math.imul(Be,mt)|0,v=v+Math.imul(Be,wt)|0;var ir=(w+(g=g+Math.imul(L,ct)|0)|0)+((8191&(s=(s=s+Math.imul(L,ft)|0)+Math.imul(ie,ct)|0))<<13)|0;w=((v=v+Math.imul(ie,ft)|0)+(s>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ut,Ne),s=(s=Math.imul(ut,Xe))+Math.imul(Qe,Ne)|0,v=Math.imul(Qe,Xe),g=g+Math.imul(et,it)|0,s=(s=s+Math.imul(et,rt)|0)+Math.imul(Ke,it)|0,v=v+Math.imul(Ke,rt)|0,g=g+Math.imul(qe,ht)|0,s=(s=s+Math.imul(qe,_t)|0)+Math.imul(Ye,ht)|0,v=v+Math.imul(Ye,_t)|0,g=g+Math.imul(Re,gt)|0,s=(s=s+Math.imul(Re,vt)|0)+Math.imul(Ge,gt)|0,v=v+Math.imul(Ge,vt)|0,g=g+Math.imul(je,st)|0,s=(s=s+Math.imul(je,yt)|0)+Math.imul(se,st)|0,v=v+Math.imul(se,yt)|0,g=g+Math.imul(Te,mt)|0,s=(s=s+Math.imul(Te,wt)|0)+Math.imul(Ie,mt)|0,v=v+Math.imul(Ie,wt)|0,g=g+Math.imul(ke,ct)|0,s=(s=s+Math.imul(ke,ft)|0)+Math.imul(Be,ct)|0,v=v+Math.imul(Be,ft)|0;var nr=(w+(g=g+Math.imul(L,St)|0)|0)+((8191&(s=(s=s+Math.imul(L,at)|0)+Math.imul(ie,St)|0))<<13)|0;w=((v=v+Math.imul(ie,at)|0)+(s>>>13)|0)+(nr>>>26)|0,nr&=67108863,g=Math.imul(le,Ne),s=(s=Math.imul(le,Xe))+Math.imul(J,Ne)|0,v=Math.imul(J,Xe),g=g+Math.imul(ut,it)|0,s=(s=s+Math.imul(ut,rt)|0)+Math.imul(Qe,it)|0,v=v+Math.imul(Qe,rt)|0,g=g+Math.imul(et,ht)|0,s=(s=s+Math.imul(et,_t)|0)+Math.imul(Ke,ht)|0,v=v+Math.imul(Ke,_t)|0,g=g+Math.imul(qe,gt)|0,s=(s=s+Math.imul(qe,vt)|0)+Math.imul(Ye,gt)|0,v=v+Math.imul(Ye,vt)|0,g=g+Math.imul(Re,st)|0,s=(s=s+Math.imul(Re,yt)|0)+Math.imul(Ge,st)|0,v=v+Math.imul(Ge,yt)|0,g=g+Math.imul(je,mt)|0,s=(s=s+Math.imul(je,wt)|0)+Math.imul(se,mt)|0,v=v+Math.imul(se,wt)|0,g=g+Math.imul(Te,ct)|0,s=(s=s+Math.imul(Te,ft)|0)+Math.imul(Ie,ct)|0,v=v+Math.imul(Ie,ft)|0,g=g+Math.imul(ke,St)|0,s=(s=s+Math.imul(ke,at)|0)+Math.imul(Be,St)|0,v=v+Math.imul(Be,at)|0;var rr=(w+(g=g+Math.imul(L,dt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Mt)|0)+Math.imul(ie,dt)|0))<<13)|0;w=((v=v+Math.imul(ie,Mt)|0)+(s>>>13)|0)+(rr>>>26)|0,rr&=67108863,g=Math.imul(ve,Ne),s=(s=Math.imul(ve,Xe))+Math.imul(xe,Ne)|0,v=Math.imul(xe,Xe),g=g+Math.imul(le,it)|0,s=(s=s+Math.imul(le,rt)|0)+Math.imul(J,it)|0,v=v+Math.imul(J,rt)|0,g=g+Math.imul(ut,ht)|0,s=(s=s+Math.imul(ut,_t)|0)+Math.imul(Qe,ht)|0,v=v+Math.imul(Qe,_t)|0,g=g+Math.imul(et,gt)|0,s=(s=s+Math.imul(et,vt)|0)+Math.imul(Ke,gt)|0,v=v+Math.imul(Ke,vt)|0,g=g+Math.imul(qe,st)|0,s=(s=s+Math.imul(qe,yt)|0)+Math.imul(Ye,st)|0,v=v+Math.imul(Ye,yt)|0,g=g+Math.imul(Re,mt)|0,s=(s=s+Math.imul(Re,wt)|0)+Math.imul(Ge,mt)|0,v=v+Math.imul(Ge,wt)|0,g=g+Math.imul(je,ct)|0,s=(s=s+Math.imul(je,ft)|0)+Math.imul(se,ct)|0,v=v+Math.imul(se,ft)|0,g=g+Math.imul(Te,St)|0,s=(s=s+Math.imul(Te,at)|0)+Math.imul(Ie,St)|0,v=v+Math.imul(Ie,at)|0,g=g+Math.imul(ke,dt)|0,s=(s=s+Math.imul(ke,Mt)|0)+Math.imul(Be,dt)|0,v=v+Math.imul(Be,Mt)|0;var qn=(w+(g=g+Math.imul(L,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Ct)|0)+Math.imul(ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(ie,Ct)|0)+(s>>>13)|0)+(qn>>>26)|0,qn&=67108863,g=Math.imul(ve,it),s=(s=Math.imul(ve,rt))+Math.imul(xe,it)|0,v=Math.imul(xe,rt),g=g+Math.imul(le,ht)|0,s=(s=s+Math.imul(le,_t)|0)+Math.imul(J,ht)|0,v=v+Math.imul(J,_t)|0,g=g+Math.imul(ut,gt)|0,s=(s=s+Math.imul(ut,vt)|0)+Math.imul(Qe,gt)|0,v=v+Math.imul(Qe,vt)|0,g=g+Math.imul(et,st)|0,s=(s=s+Math.imul(et,yt)|0)+Math.imul(Ke,st)|0,v=v+Math.imul(Ke,yt)|0,g=g+Math.imul(qe,mt)|0,s=(s=s+Math.imul(qe,wt)|0)+Math.imul(Ye,mt)|0,v=v+Math.imul(Ye,wt)|0,g=g+Math.imul(Re,ct)|0,s=(s=s+Math.imul(Re,ft)|0)+Math.imul(Ge,ct)|0,v=v+Math.imul(Ge,ft)|0,g=g+Math.imul(je,St)|0,s=(s=s+Math.imul(je,at)|0)+Math.imul(se,St)|0,v=v+Math.imul(se,at)|0,g=g+Math.imul(Te,dt)|0,s=(s=s+Math.imul(Te,Mt)|0)+Math.imul(Ie,dt)|0,v=v+Math.imul(Ie,Mt)|0;var ar=(w+(g=g+Math.imul(ke,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ke,Ct)|0)+Math.imul(Be,Tt)|0))<<13)|0;w=((v=v+Math.imul(Be,Ct)|0)+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,g=Math.imul(ve,ht),s=(s=Math.imul(ve,_t))+Math.imul(xe,ht)|0,v=Math.imul(xe,_t),g=g+Math.imul(le,gt)|0,s=(s=s+Math.imul(le,vt)|0)+Math.imul(J,gt)|0,v=v+Math.imul(J,vt)|0,g=g+Math.imul(ut,st)|0,s=(s=s+Math.imul(ut,yt)|0)+Math.imul(Qe,st)|0,v=v+Math.imul(Qe,yt)|0,g=g+Math.imul(et,mt)|0,s=(s=s+Math.imul(et,wt)|0)+Math.imul(Ke,mt)|0,v=v+Math.imul(Ke,wt)|0,g=g+Math.imul(qe,ct)|0,s=(s=s+Math.imul(qe,ft)|0)+Math.imul(Ye,ct)|0,v=v+Math.imul(Ye,ft)|0,g=g+Math.imul(Re,St)|0,s=(s=s+Math.imul(Re,at)|0)+Math.imul(Ge,St)|0,v=v+Math.imul(Ge,at)|0,g=g+Math.imul(je,dt)|0,s=(s=s+Math.imul(je,Mt)|0)+Math.imul(se,dt)|0,v=v+Math.imul(se,Mt)|0;var or=(w+(g=g+Math.imul(Te,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Te,Ct)|0)+Math.imul(Ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ie,Ct)|0)+(s>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ve,gt),s=(s=Math.imul(ve,vt))+Math.imul(xe,gt)|0,v=Math.imul(xe,vt),g=g+Math.imul(le,st)|0,s=(s=s+Math.imul(le,yt)|0)+Math.imul(J,st)|0,v=v+Math.imul(J,yt)|0,g=g+Math.imul(ut,mt)|0,s=(s=s+Math.imul(ut,wt)|0)+Math.imul(Qe,mt)|0,v=v+Math.imul(Qe,wt)|0,g=g+Math.imul(et,ct)|0,s=(s=s+Math.imul(et,ft)|0)+Math.imul(Ke,ct)|0,v=v+Math.imul(Ke,ft)|0,g=g+Math.imul(qe,St)|0,s=(s=s+Math.imul(qe,at)|0)+Math.imul(Ye,St)|0,v=v+Math.imul(Ye,at)|0,g=g+Math.imul(Re,dt)|0,s=(s=s+Math.imul(Re,Mt)|0)+Math.imul(Ge,dt)|0,v=v+Math.imul(Ge,Mt)|0;var Vi=(w+(g=g+Math.imul(je,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(je,Ct)|0)+Math.imul(se,Tt)|0))<<13)|0;w=((v=v+Math.imul(se,Ct)|0)+(s>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,g=Math.imul(ve,st),s=(s=Math.imul(ve,yt))+Math.imul(xe,st)|0,v=Math.imul(xe,yt),g=g+Math.imul(le,mt)|0,s=(s=s+Math.imul(le,wt)|0)+Math.imul(J,mt)|0,v=v+Math.imul(J,wt)|0,g=g+Math.imul(ut,ct)|0,s=(s=s+Math.imul(ut,ft)|0)+Math.imul(Qe,ct)|0,v=v+Math.imul(Qe,ft)|0,g=g+Math.imul(et,St)|0,s=(s=s+Math.imul(et,at)|0)+Math.imul(Ke,St)|0,v=v+Math.imul(Ke,at)|0,g=g+Math.imul(qe,dt)|0,s=(s=s+Math.imul(qe,Mt)|0)+Math.imul(Ye,dt)|0,v=v+Math.imul(Ye,Mt)|0;var $n=(w+(g=g+Math.imul(Re,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Re,Ct)|0)+Math.imul(Ge,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ge,Ct)|0)+(s>>>13)|0)+($n>>>26)|0,$n&=67108863,g=Math.imul(ve,mt),s=(s=Math.imul(ve,wt))+Math.imul(xe,mt)|0,v=Math.imul(xe,wt),g=g+Math.imul(le,ct)|0,s=(s=s+Math.imul(le,ft)|0)+Math.imul(J,ct)|0,v=v+Math.imul(J,ft)|0,g=g+Math.imul(ut,St)|0,s=(s=s+Math.imul(ut,at)|0)+Math.imul(Qe,St)|0,v=v+Math.imul(Qe,at)|0,g=g+Math.imul(et,dt)|0,s=(s=s+Math.imul(et,Mt)|0)+Math.imul(Ke,dt)|0,v=v+Math.imul(Ke,Mt)|0;var Ni=(w+(g=g+Math.imul(qe,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(qe,Ct)|0)+Math.imul(Ye,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ye,Ct)|0)+(s>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,g=Math.imul(ve,ct),s=(s=Math.imul(ve,ft))+Math.imul(xe,ct)|0,v=Math.imul(xe,ft),g=g+Math.imul(le,St)|0,s=(s=s+Math.imul(le,at)|0)+Math.imul(J,St)|0,v=v+Math.imul(J,at)|0,g=g+Math.imul(ut,dt)|0,s=(s=s+Math.imul(ut,Mt)|0)+Math.imul(Qe,dt)|0,v=v+Math.imul(Qe,Mt)|0;var Wn=(w+(g=g+Math.imul(et,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(et,Ct)|0)+Math.imul(Ke,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ke,Ct)|0)+(s>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,g=Math.imul(ve,St),s=(s=Math.imul(ve,at))+Math.imul(xe,St)|0,v=Math.imul(xe,at),g=g+Math.imul(le,dt)|0,s=(s=s+Math.imul(le,Mt)|0)+Math.imul(J,dt)|0,v=v+Math.imul(J,Mt)|0;var Ln=(w+(g=g+Math.imul(ut,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ut,Ct)|0)+Math.imul(Qe,Tt)|0))<<13)|0;w=((v=v+Math.imul(Qe,Ct)|0)+(s>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,g=Math.imul(ve,dt),s=(s=Math.imul(ve,Mt))+Math.imul(xe,dt)|0,v=Math.imul(xe,Mt);var vi=(w+(g=g+Math.imul(le,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(le,Ct)|0)+Math.imul(J,Tt)|0))<<13)|0;w=((v=v+Math.imul(J,Ct)|0)+(s>>>13)|0)+(vi>>>26)|0,vi&=67108863;var Un=(w+(g=Math.imul(ve,Tt))|0)+((8191&(s=(s=Math.imul(ve,Ct))+Math.imul(xe,Tt)|0))<<13)|0;return w=((v=Math.imul(xe,Ct))+(s>>>13)|0)+(Un>>>26)|0,Un&=67108863,b[0]=Fn,b[1]=Ri,b[2]=Oi,b[3]=zn,b[4]=jn,b[5]=tr,b[6]=ir,b[7]=nr,b[8]=rr,b[9]=qn,b[10]=ar,b[11]=or,b[12]=Vi,b[13]=$n,b[14]=Ni,b[15]=Wn,b[16]=Ln,b[17]=vi,b[18]=Un,0!==w&&(b[19]=w,f.length++),f};function X(y,o,l){return(new U).mulp(y,o,l)}function U(y,o){this.x=y,this.y=o}Math.imul||(N=B),p.prototype.mulTo=function(o,l){var f,u=this.length+o.length;return f=10===this.length&&10===o.length?N(this,o,l):u<63?B(this,o,l):u<1024?function z(y,o,l){l.negative=o.negative^y.negative,l.length=y.length+o.length;for(var f=0,u=0,h=0;h<l.length-1;h++){var b=u;u=0;for(var w=67108863&f,g=Math.min(h,o.length-1),s=Math.max(0,h-y.length+1);s<=g;s++){var ie=(0|y.words[h-s])*(0|o.words[s]),Se=67108863&ie;w=67108863&(Se=Se+w|0),u+=(b=(b=b+(ie/67108864|0)|0)+(Se>>>26)|0)>>>26,b&=67108863}l.words[h]=w,f=b,b=u}return 0!==f?l.words[h]=f:l.length--,l.strip()}(this,o,l):X(this,o,l),f},U.prototype.makeRBT=function(o){for(var l=new Array(o),f=p.prototype._countBits(o)-1,u=0;u<o;u++)l[u]=this.revBin(u,f,o);return l},U.prototype.revBin=function(o,l,f){if(0===o||o===f-1)return o;for(var u=0,h=0;h<l;h++)u|=(1&o)<<l-h-1,o>>=1;return u},U.prototype.permute=function(o,l,f,u,h,b){for(var w=0;w<b;w++)u[w]=l[o[w]],h[w]=f[o[w]]},U.prototype.transform=function(o,l,f,u,h,b){this.permute(b,o,l,f,u,h);for(var w=1;w<h;w<<=1)for(var g=w<<1,s=Math.cos(2*Math.PI/g),v=Math.sin(2*Math.PI/g),$=0;$<h;$+=g)for(var L=s,ie=v,Se=0;Se<w;Se++){var ke=f[$+Se],Be=u[$+Se],Pe=f[$+Se+w],Te=u[$+Se+w],Ie=L*Pe-ie*Te;Te=L*Te+ie*Pe,f[$+Se]=ke+(Pe=Ie),u[$+Se]=Be+Te,f[$+Se+w]=ke-Pe,u[$+Se+w]=Be-Te,Se!==g&&(Ie=s*L-v*ie,ie=s*ie+v*L,L=Ie)}},U.prototype.guessLen13b=function(o,l){var f=1|Math.max(l,o),u=1&f,h=0;for(f=f/2|0;f;f>>>=1)h++;return 1<<h+1+u},U.prototype.conjugate=function(o,l,f){if(!(f<=1))for(var u=0;u<f/2;u++){var h=o[u];o[u]=o[f-u-1],o[f-u-1]=h,h=l[u],l[u]=-l[f-u-1],l[f-u-1]=-h}},U.prototype.normalize13b=function(o,l){for(var f=0,u=0;u<l/2;u++){var h=8192*Math.round(o[2*u+1]/l)+Math.round(o[2*u]/l)+f;o[u]=67108863&h,f=h<67108864?0:h/67108864|0}return o},U.prototype.convert13b=function(o,l,f,u){for(var h=0,b=0;b<l;b++)f[2*b]=8191&(h+=0|o[b]),f[2*b+1]=8191&(h>>>=13),h>>>=13;for(b=2*l;b<u;++b)f[b]=0;I(0===h),I(0==(-8192&h))},U.prototype.stub=function(o){for(var l=new Array(o),f=0;f<o;f++)l[f]=0;return l},U.prototype.mulp=function(o,l,f){var u=2*this.guessLen13b(o.length,l.length),h=this.makeRBT(u),b=this.stub(u),w=new Array(u),g=new Array(u),s=new Array(u),v=new Array(u),$=new Array(u),L=new Array(u),ie=f.words;ie.length=u,this.convert13b(o.words,o.length,w,u),this.convert13b(l.words,l.length,v,u),this.transform(w,b,g,s,u,h),this.transform(v,b,$,L,u,h);for(var Se=0;Se<u;Se++){var ke=g[Se]*$[Se]-s[Se]*L[Se];s[Se]=g[Se]*L[Se]+s[Se]*$[Se],g[Se]=ke}return this.conjugate(g,s,u),this.transform(g,s,ie,b,u,h),this.conjugate(ie,b,u),this.normalize13b(ie,u),f.negative=o.negative^l.negative,f.length=o.length+l.length,f.strip()},p.prototype.mul=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},p.prototype.mulf=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),X(this,o,l)},p.prototype.imul=function(o){return this.clone().mulTo(o,this)},p.prototype.imuln=function(o){I("number"==typeof o),I(o<67108864);for(var l=0,f=0;f<this.length;f++){var u=(0|this.words[f])*o,h=(67108863&u)+(67108863&l);l>>=26,l+=u/67108864|0,l+=h>>>26,this.words[f]=67108863&h}return 0!==l&&(this.words[f]=l,this.length++),this},p.prototype.muln=function(o){return this.clone().imuln(o)},p.prototype.sqr=function(){return this.mul(this)},p.prototype.isqr=function(){return this.imul(this.clone())},p.prototype.pow=function(o){var l=function C(y){for(var o=new Array(y.bitLength()),l=0;l<o.length;l++){var u=l%26;o[l]=(y.words[l/26|0]&1<<u)>>>u}return o}(o);if(0===l.length)return new p(1);for(var f=this,u=0;u<l.length&&0===l[u];u++,f=f.sqr());if(++u<l.length)for(var h=f.sqr();u<l.length;u++,h=h.sqr())0!==l[u]&&(f=f.mul(h));return f},p.prototype.iushln=function(o){I("number"==typeof o&&o>=0);var h,l=o%26,f=(o-l)/26,u=67108863>>>26-l<<26-l;if(0!==l){var b=0;for(h=0;h<this.length;h++){var w=this.words[h]&u;this.words[h]=(0|this.words[h])-w<<l|b,b=w>>>26-l}b&&(this.words[h]=b,this.length++)}if(0!==f){for(h=this.length-1;h>=0;h--)this.words[h+f]=this.words[h];for(h=0;h<f;h++)this.words[h]=0;this.length+=f}return this.strip()},p.prototype.ishln=function(o){return I(0===this.negative),this.iushln(o)},p.prototype.iushrn=function(o,l,f){var u;I("number"==typeof o&&o>=0),u=l?(l-l%26)/26:0;var h=o%26,b=Math.min((o-h)/26,this.length),w=67108863^67108863>>>h<<h,g=f;if(u-=b,u=Math.max(0,u),g){for(var s=0;s<b;s++)g.words[s]=this.words[s];g.length=b}if(0!==b)if(this.length>b)for(this.length-=b,s=0;s<this.length;s++)this.words[s]=this.words[s+b];else this.words[0]=0,this.length=1;var v=0;for(s=this.length-1;s>=0&&(0!==v||s>=u);s--){var $=0|this.words[s];this.words[s]=v<<26-h|$>>>h,v=$&w}return g&&0!==v&&(g.words[g.length++]=v),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},p.prototype.ishrn=function(o,l,f){return I(0===this.negative),this.iushrn(o,l,f)},p.prototype.shln=function(o){return this.clone().ishln(o)},p.prototype.ushln=function(o){return this.clone().iushln(o)},p.prototype.shrn=function(o){return this.clone().ishrn(o)},p.prototype.ushrn=function(o){return this.clone().iushrn(o)},p.prototype.testn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return!(this.length<=f||!(this.words[f]&1<<l))},p.prototype.imaskn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return I(0===this.negative,"imaskn works only with positive numbers"),this.length<=f?this:(0!==l&&f++,this.length=Math.min(f,this.length),0!==l&&(this.words[this.length-1]&=67108863^67108863>>>l<<l),this.strip())},p.prototype.maskn=function(o){return this.clone().imaskn(o)},p.prototype.iaddn=function(o){return I("number"==typeof o),I(o<67108864),o<0?this.isubn(-o):0!==this.negative?1===this.length&&(0|this.words[0])<o?(this.words[0]=o-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},p.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},p.prototype.isubn=function(o){if(I("number"==typeof o),I(o<67108864),o<0)return this.iaddn(-o);if(0!==this.negative)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},p.prototype.addn=function(o){return this.clone().iaddn(o)},p.prototype.subn=function(o){return this.clone().isubn(o)},p.prototype.iabs=function(){return this.negative=0,this},p.prototype.abs=function(){return this.clone().iabs()},p.prototype._ishlnsubmul=function(o,l,f){var h;this._expand(o.length+f);var b,w=0;for(h=0;h<o.length;h++){b=(0|this.words[h+f])+w;var g=(0|o.words[h])*l;w=((b-=67108863&g)>>26)-(g/67108864|0),this.words[h+f]=67108863&b}for(;h<this.length-f;h++)w=(b=(0|this.words[h+f])+w)>>26,this.words[h+f]=67108863&b;if(0===w)return this.strip();for(I(-1===w),w=0,h=0;h<this.length;h++)w=(b=-(0|this.words[h])+w)>>26,this.words[h]=67108863&b;return this.negative=1,this.strip()},p.prototype._wordDiv=function(o,l){var f,u=this.clone(),h=o,b=0|h.words[h.length-1];0!=(f=26-this._countBits(b))&&(h=h.ushln(f),u.iushln(f),b=0|h.words[h.length-1]);var s,g=u.length-h.length;if("mod"!==l){(s=new p(null)).length=g+1,s.words=new Array(s.length);for(var v=0;v<s.length;v++)s.words[v]=0}var $=u.clone()._ishlnsubmul(h,1,g);0===$.negative&&(u=$,s&&(s.words[g]=1));for(var L=g-1;L>=0;L--){var ie=67108864*(0|u.words[h.length+L])+(0|u.words[h.length+L-1]);for(ie=Math.min(ie/b|0,67108863),u._ishlnsubmul(h,ie,L);0!==u.negative;)ie--,u.negative=0,u._ishlnsubmul(h,1,L),u.isZero()||(u.negative^=1);s&&(s.words[L]=ie)}return s&&s.strip(),u.strip(),"div"!==l&&0!==f&&u.iushrn(f),{div:s||null,mod:u}},p.prototype.divmod=function(o,l,f){return I(!o.isZero()),this.isZero()?{div:new p(0),mod:new p(0)}:0!==this.negative&&0===o.negative?(b=this.neg().divmod(o,l),"mod"!==l&&(u=b.div.neg()),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.iadd(o)),{div:u,mod:h}):0===this.negative&&0!==o.negative?(b=this.divmod(o.neg(),l),"mod"!==l&&(u=b.div.neg()),{div:u,mod:b.mod}):0!=(this.negative&o.negative)?(b=this.neg().divmod(o.neg(),l),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.isub(o)),{div:b.div,mod:h}):o.length>this.length||this.cmp(o)<0?{div:new p(0),mod:this}:1===o.length?"div"===l?{div:this.divn(o.words[0]),mod:null}:"mod"===l?{div:null,mod:new p(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new p(this.modn(o.words[0]))}:this._wordDiv(o,l);var u,h,b},p.prototype.div=function(o){return this.divmod(o,"div",!1).div},p.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},p.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},p.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var f=0!==l.div.negative?l.mod.isub(o):l.mod,u=o.ushrn(1),h=o.andln(1),b=f.cmp(u);return b<0||1===h&&0===b?l.div:0!==l.div.negative?l.div.isubn(1):l.div.iaddn(1)},p.prototype.modn=function(o){I(o<=67108863);for(var l=(1<<26)%o,f=0,u=this.length-1;u>=0;u--)f=(l*f+(0|this.words[u]))%o;return f},p.prototype.idivn=function(o){I(o<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var u=(0|this.words[f])+67108864*l;this.words[f]=u/o|0,l=u%o}return this.strip()},p.prototype.divn=function(o){return this.clone().idivn(o)},p.prototype.egcd=function(o){I(0===o.negative),I(!o.isZero());var l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=new p(0),w=new p(1),g=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++g;for(var s=f.clone(),v=l.clone();!l.isZero();){for(var $=0,L=1;0==(l.words[0]&L)&&$<26;++$,L<<=1);if($>0)for(l.iushrn($);$-- >0;)(u.isOdd()||h.isOdd())&&(u.iadd(s),h.isub(v)),u.iushrn(1),h.iushrn(1);for(var ie=0,Se=1;0==(f.words[0]&Se)&&ie<26;++ie,Se<<=1);if(ie>0)for(f.iushrn(ie);ie-- >0;)(b.isOdd()||w.isOdd())&&(b.iadd(s),w.isub(v)),b.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(b),h.isub(w)):(f.isub(l),b.isub(u),w.isub(h))}return{a:b,b:w,gcd:f.iushln(g)}},p.prototype._invmp=function(o){I(0===o.negative),I(!o.isZero());var $,l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,g=1;0==(l.words[0]&g)&&w<26;++w,g<<=1);if(w>0)for(l.iushrn(w);w-- >0;)u.isOdd()&&u.iadd(b),u.iushrn(1);for(var s=0,v=1;0==(f.words[0]&v)&&s<26;++s,v<<=1);if(s>0)for(f.iushrn(s);s-- >0;)h.isOdd()&&h.iadd(b),h.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(h)):(f.isub(l),h.isub(u))}return($=0===l.cmpn(1)?u:h).cmpn(0)<0&&$.iadd(o),$},p.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),f=o.clone();l.negative=0,f.negative=0;for(var u=0;l.isEven()&&f.isEven();u++)l.iushrn(1),f.iushrn(1);for(;;){for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var h=l.cmp(f);if(h<0){var b=l;l=f,f=b}else if(0===h||0===f.cmpn(1))break;l.isub(f)}return f.iushln(u)},p.prototype.invm=function(o){return this.egcd(o).a.umod(o)},p.prototype.isEven=function(){return 0==(1&this.words[0])},p.prototype.isOdd=function(){return 1==(1&this.words[0])},p.prototype.andln=function(o){return this.words[0]&o},p.prototype.bincn=function(o){I("number"==typeof o);var l=o%26,f=(o-l)/26,u=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=u,this;for(var h=u,b=f;0!==h&&b<this.length;b++){var w=0|this.words[b];h=(w+=h)>>>26,this.words[b]=w&=67108863}return 0!==h&&(this.words[b]=h,this.length++),this},p.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},p.prototype.cmpn=function(o){var f,l=o<0;if(0!==this.negative&&!l)return-1;if(0===this.negative&&l)return 1;if(this.strip(),this.length>1)f=1;else{l&&(o=-o),I(o<=67108863,"Number is too big");var u=0|this.words[0];f=u===o?0:u<o?-1:1}return 0!==this.negative?0|-f:f},p.prototype.cmp=function(o){if(0!==this.negative&&0===o.negative)return-1;if(0===this.negative&&0!==o.negative)return 1;var l=this.ucmp(o);return 0!==this.negative?0|-l:l},p.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var u=0|this.words[f],h=0|o.words[f];if(u!==h){u<h?l=-1:u>h&&(l=1);break}}return l},p.prototype.gtn=function(o){return 1===this.cmpn(o)},p.prototype.gt=function(o){return 1===this.cmp(o)},p.prototype.gten=function(o){return this.cmpn(o)>=0},p.prototype.gte=function(o){return this.cmp(o)>=0},p.prototype.ltn=function(o){return-1===this.cmpn(o)},p.prototype.lt=function(o){return-1===this.cmp(o)},p.prototype.lten=function(o){return this.cmpn(o)<=0},p.prototype.lte=function(o){return this.cmp(o)<=0},p.prototype.eqn=function(o){return 0===this.cmpn(o)},p.prototype.eq=function(o){return 0===this.cmp(o)},p.red=function(o){return new we(o)},p.prototype.toRed=function(o){return I(!this.red,"Already a number in reduction context"),I(0===this.negative,"red works only with positives"),o.convertTo(this)._forceRed(o)},p.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},p.prototype._forceRed=function(o){return this.red=o,this},p.prototype.forceRed=function(o){return I(!this.red,"Already a number in reduction context"),this._forceRed(o)},p.prototype.redAdd=function(o){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},p.prototype.redIAdd=function(o){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},p.prototype.redSub=function(o){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},p.prototype.redISub=function(o){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},p.prototype.redShl=function(o){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},p.prototype.redMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},p.prototype.redIMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},p.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},p.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},p.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},p.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},p.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},p.prototype.redPow=function(o){return I(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Z={k256:null,p224:null,p192:null,p25519:null};function ee(y,o){this.name=y,this.p=new p(o,16),this.n=this.p.bitLength(),this.k=new p(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function ae(){ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function ge(){ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Ce(){ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function De(){ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function we(y){if("string"==typeof y){var o=p._prime(y);this.m=o.p,this.prime=o}else I(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}function Oe(y){we.call(this,y),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new p(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ee.prototype._tmp=function(){var o=new p(null);return o.words=new Array(Math.ceil(this.n/13)),o},ee.prototype.ireduce=function(o){var f,l=o;do{this.split(l,this.tmp),f=(l=(l=this.imulK(l)).iadd(this.tmp)).bitLength()}while(f>this.n);var u=f<this.n?-1:l.ucmp(this.p);return 0===u?(l.words[0]=0,l.length=1):u>0?l.isub(this.p):void 0!==l.strip?l.strip():l._strip(),l},ee.prototype.split=function(o,l){o.iushrn(this.n,0,l)},ee.prototype.imulK=function(o){return o.imul(this.k)},G(ae,ee),ae.prototype.split=function(o,l){for(var f=4194303,u=Math.min(o.length,9),h=0;h<u;h++)l.words[h]=o.words[h];if(l.length=u,o.length<=9)return o.words[0]=0,void(o.length=1);var b=o.words[9];for(l.words[l.length++]=b&f,h=10;h<o.length;h++){var w=0|o.words[h];o.words[h-10]=(w&f)<<4|b>>>22,b=w}o.words[h-10]=b>>>=22,o.length-=0===b&&o.length>10?10:9},ae.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,f=0;f<o.length;f++){var u=0|o.words[f];o.words[f]=67108863&(l+=977*u),l=64*u+(l/67108864|0)}return 0===o.words[o.length-1]&&(o.length--,0===o.words[o.length-1]&&o.length--),o},G(ge,ee),G(Ce,ee),G(De,ee),De.prototype.imulK=function(o){for(var l=0,f=0;f<o.length;f++){var u=19*(0|o.words[f])+l,h=67108863&u;u>>>=26,o.words[f]=h,l=u}return 0!==l&&(o.words[o.length++]=l),o},p._prime=function(o){if(Z[o])return Z[o];var l;if("k256"===o)l=new ae;else if("p224"===o)l=new ge;else if("p192"===o)l=new Ce;else{if("p25519"!==o)throw new Error("Unknown prime "+o);l=new De}return Z[o]=l,l},we.prototype._verify1=function(o){I(0===o.negative,"red works only with positives"),I(o.red,"red works only with red numbers")},we.prototype._verify2=function(o,l){I(0==(o.negative|l.negative),"red works only with positives"),I(o.red&&o.red===l.red,"red works only with red numbers")},we.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},we.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},we.prototype.add=function(o,l){this._verify2(o,l);var f=o.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},we.prototype.iadd=function(o,l){this._verify2(o,l);var f=o.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},we.prototype.sub=function(o,l){this._verify2(o,l);var f=o.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},we.prototype.isub=function(o,l){this._verify2(o,l);var f=o.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},we.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},we.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},we.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},we.prototype.isqr=function(o){return this.imul(o,o.clone())},we.prototype.sqr=function(o){return this.mul(o,o)},we.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(I(l%2==1),3===l){var f=this.m.add(new p(1)).iushrn(2);return this.pow(o,f)}for(var u=this.m.subn(1),h=0;!u.isZero()&&0===u.andln(1);)h++,u.iushrn(1);I(!u.isZero());var b=new p(1).toRed(this),w=b.redNeg(),g=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new p(2*s*s).toRed(this);0!==this.pow(s,g).cmp(w);)s.redIAdd(w);for(var v=this.pow(s,u),$=this.pow(o,u.addn(1).iushrn(1)),L=this.pow(o,u),ie=h;0!==L.cmp(b);){for(var Se=L,ke=0;0!==Se.cmp(b);ke++)Se=Se.redSqr();I(ke<ie);var Be=this.pow(v,new p(1).iushln(ie-ke-1));$=$.redMul(Be),v=Be.redSqr(),L=L.redMul(v),ie=ke}return $},we.prototype.invm=function(o){var l=o._invmp(this.m);return 0!==l.negative?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},we.prototype.pow=function(o,l){if(l.isZero())return new p(1).toRed(this);if(0===l.cmpn(1))return o.clone();var u=new Array(16);u[0]=new p(1).toRed(this),u[1]=o;for(var h=2;h<u.length;h++)u[h]=this.mul(u[h-1],o);var b=u[0],w=0,g=0,s=l.bitLength()%26;for(0===s&&(s=26),h=l.length-1;h>=0;h--){for(var v=l.words[h],$=s-1;$>=0;$--){var L=v>>$&1;b!==u[0]&&(b=this.sqr(b)),0!==L||0!==w?(w<<=1,w|=L,(4==++g||0===h&&0===$)&&(b=this.mul(b,u[w]),g=0,w=0)):g=0}s=26}return b},we.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},we.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},p.mont=function(o){return new Oe(o)},G(Oe,we),Oe.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Oe.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},Oe.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var f=o.imul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new p(0)._forceRed(this);var f=o.mul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.invm=function(o){return this.imod(o._invmp(this.m).mul(this.r2))._forceRed(this)}}(ye=H.nmd(ye),this)},9069:ye=>{"use strict";var j,ue="object"==typeof Reflect?Reflect:null,H=ue&&"function"==typeof ue.apply?ue.apply:function(ee,ae,ge){return Function.prototype.apply.call(ee,ae,ge)};j=ue&&"function"==typeof ue.ownKeys?ue.ownKeys:Object.getOwnPropertySymbols?function(ee){return Object.getOwnPropertyNames(ee).concat(Object.getOwnPropertySymbols(ee))}:function(ee){return Object.getOwnPropertyNames(ee)};var I=Number.isNaN||function(ee){return ee!=ee};function G(){G.init.call(this)}ye.exports=G,ye.exports.once=function z(Z,ee){return new Promise(function(ae,ge){function Ce(we){Z.removeListener(ee,De),ge(we)}function De(){"function"==typeof Z.removeListener&&Z.removeListener("error",Ce),ae([].slice.call(arguments))}U(Z,ee,De,{once:!0}),"error"!==ee&&function X(Z,ee,ae){"function"==typeof Z.on&&U(Z,"error",ee,ae)}(Z,Ce,{once:!0})})},G.EventEmitter=G,G.prototype._events=void 0,G.prototype._eventsCount=0,G.prototype._maxListeners=void 0;var p=10;function k(Z){if("function"!=typeof Z)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Z)}function P(Z){return void 0===Z._maxListeners?G.defaultMaxListeners:Z._maxListeners}function E(Z,ee,ae,ge){var Ce,De,we;if(k(ae),void 0===(De=Z._events)?(De=Z._events=Object.create(null),Z._eventsCount=0):(void 0!==De.newListener&&(Z.emit("newListener",ee,ae.listener?ae.listener:ae),De=Z._events),we=De[ee]),void 0===we)we=De[ee]=ae,++Z._eventsCount;else if("function"==typeof we?we=De[ee]=ge?[ae,we]:[we,ae]:ge?we.unshift(ae):we.push(ae),(Ce=P(Z))>0&&we.length>Ce&&!we.warned){we.warned=!0;var Oe=new Error("Possible EventEmitter memory leak detected. "+we.length+" "+String(ee)+" listeners added. Use emitter.setMaxListeners() to increase limit");Oe.name="MaxListenersExceededWarning",Oe.emitter=Z,Oe.type=ee,Oe.count=we.length,function W(Z){console&&console.warn&&console.warn(Z)}(Oe)}return Z}function R(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(Z,ee,ae){var ge={fired:!1,wrapFn:void 0,target:Z,type:ee,listener:ae},Ce=R.bind(ge);return Ce.listener=ae,ge.wrapFn=Ce,Ce}function S(Z,ee,ae){var ge=Z._events;if(void 0===ge)return[];var Ce=ge[ee];return void 0===Ce?[]:"function"==typeof Ce?ae?[Ce.listener||Ce]:[Ce]:ae?function N(Z){for(var ee=new Array(Z.length),ae=0;ae<ee.length;++ae)ee[ae]=Z[ae].listener||Z[ae];return ee}(Ce):C(Ce,Ce.length)}function O(Z){var ee=this._events;if(void 0!==ee){var ae=ee[Z];if("function"==typeof ae)return 1;if(void 0!==ae)return ae.length}return 0}function C(Z,ee){for(var ae=new Array(ee),ge=0;ge<ee;++ge)ae[ge]=Z[ge];return ae}function U(Z,ee,ae,ge){if("function"==typeof Z.on)ge.once?Z.once(ee,ae):Z.on(ee,ae);else{if("function"!=typeof Z.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Z);Z.addEventListener(ee,function Ce(De){ge.once&&Z.removeEventListener(ee,Ce),ae(De)})}}Object.defineProperty(G,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(Z){if("number"!=typeof Z||Z<0||I(Z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Z+".");p=Z}}),G.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},G.prototype.setMaxListeners=function(ee){if("number"!=typeof ee||ee<0||I(ee))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ee+".");return this._maxListeners=ee,this},G.prototype.getMaxListeners=function(){return P(this)},G.prototype.emit=function(ee){for(var ae=[],ge=1;ge<arguments.length;ge++)ae.push(arguments[ge]);var Ce="error"===ee,De=this._events;if(void 0!==De)Ce=Ce&&void 0===De.error;else if(!Ce)return!1;if(Ce){var we;if(ae.length>0&&(we=ae[0]),we instanceof Error)throw we;var Oe=new Error("Unhandled error."+(we?" ("+we.message+")":""));throw Oe.context=we,Oe}var y=De[ee];if(void 0===y)return!1;if("function"==typeof y)H(y,this,ae);else{var o=y.length,l=C(y,o);for(ge=0;ge<o;++ge)H(l[ge],this,ae)}return!0},G.prototype.on=G.prototype.addListener=function(ee,ae){return E(this,ee,ae,!1)},G.prototype.prependListener=function(ee,ae){return E(this,ee,ae,!0)},G.prototype.once=function(ee,ae){return k(ae),this.on(ee,x(this,ee,ae)),this},G.prototype.prependOnceListener=function(ee,ae){return k(ae),this.prependListener(ee,x(this,ee,ae)),this},G.prototype.off=G.prototype.removeListener=function(ee,ae){var ge,Ce,De,we,Oe;if(k(ae),void 0===(Ce=this._events))return this;if(void 0===(ge=Ce[ee]))return this;if(ge===ae||ge.listener===ae)0==--this._eventsCount?this._events=Object.create(null):(delete Ce[ee],Ce.removeListener&&this.emit("removeListener",ee,ge.listener||ae));else if("function"!=typeof ge){for(De=-1,we=ge.length-1;we>=0;we--)if(ge[we]===ae||ge[we].listener===ae){Oe=ge[we].listener,De=we;break}if(De<0)return this;0===De?ge.shift():function B(Z,ee){for(;ee+1<Z.length;ee++)Z[ee]=Z[ee+1];Z.pop()}(ge,De),1===ge.length&&(Ce[ee]=ge[0]),void 0!==Ce.removeListener&&this.emit("removeListener",ee,Oe||ae)}return this},G.prototype.removeAllListeners=function(ee){var ae,ge,Ce;if(void 0===(ge=this._events))return this;if(void 0===ge.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ge[ee]&&(0==--this._eventsCount?this._events=Object.create(null):delete ge[ee]),this;if(0===arguments.length){var we,De=Object.keys(ge);for(Ce=0;Ce<De.length;++Ce)"removeListener"!==(we=De[Ce])&&this.removeAllListeners(we);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ae=ge[ee]))this.removeListener(ee,ae);else if(void 0!==ae)for(Ce=ae.length-1;Ce>=0;Ce--)this.removeListener(ee,ae[Ce]);return this},G.prototype.listeners=function(ee){return S(this,ee,!0)},G.prototype.rawListeners=function(ee){return S(this,ee,!1)},G.listenerCount=function(Z,ee){return"function"==typeof Z.listenerCount?Z.listenerCount(ee):O.call(Z,ee)},G.prototype.listenerCount=O,G.prototype.eventNames=function(){return this._eventsCount>0?j(this._events):[]}},347:(ye,ue,H)=>{var j=H(3502).Buffer,W=H(8095);ye.exports=function I(G,p,k,P){if(j.isBuffer(G)||(G=j.from(G,"binary")),p&&(j.isBuffer(p)||(p=j.from(p,"binary")),8!==p.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var E=k/8,R=j.alloc(E),x=j.alloc(P||0),S=j.alloc(0);E>0||P>0;){var O=new W;O.update(S),O.update(G),p&&O.update(p),S=O.digest();var C=0;if(E>0){var B=R.length-E;C=Math.min(E,S.length),S.copy(R,B,0,C),E-=C}if(C<S.length&&P>0){var N=x.length-P,z=Math.min(P,S.length-C);S.copy(x,N,C,C+z),P-=z}}return S.fill(0),{key:R,iv:x}}},9650:(ye,ue,H)=>{"use strict";var j=H(8444).Buffer,W=H(5685).Transform;function p(k){W.call(this),this._block=j.allocUnsafe(k),this._blockSize=k,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}H(3894)(p,W),p.prototype._transform=function(k,P,E){var R=null;try{this.update(k,P)}catch(x){R=x}E(R)},p.prototype._flush=function(k){var P=null;try{this.push(this.digest())}catch(E){P=E}k(P)},p.prototype.update=function(k,P){if(function G(k,P){if(!j.isBuffer(k)&&"string"!=typeof k)throw new TypeError(P+" must be a string or a buffer")}(k,"Data"),this._finalized)throw new Error("Digest already called");j.isBuffer(k)||(k=j.from(k,P));for(var E=this._block,R=0;this._blockOffset+k.length-R>=this._blockSize;){for(var x=this._blockOffset;x<this._blockSize;)E[x++]=k[R++];this._update(),this._blockOffset=0}for(;R<k.length;)E[this._blockOffset++]=k[R++];for(var S=0,O=8*k.length;O>0;++S)this._length[S]+=O,(O=this._length[S]/4294967296|0)>0&&(this._length[S]-=4294967296*O);return this},p.prototype._update=function(){throw new Error("_update is not implemented")},p.prototype.digest=function(k){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var P=this._digest();void 0!==k&&(P=P.toString(k)),this._block.fill(0),this._blockOffset=0;for(var E=0;E<4;++E)this._length[E]=0;return P},p.prototype._digest=function(){throw new Error("_digest is not implemented")},ye.exports=p},8444:(ye,ue,H)=>{var j=H(3172),W=j.Buffer;function I(p,k){for(var P in p)k[P]=p[P]}function G(p,k,P){return W(p,k,P)}W.from&&W.alloc&&W.allocUnsafe&&W.allocUnsafeSlow?ye.exports=j:(I(j,ue),ue.Buffer=G),G.prototype=Object.create(W.prototype),I(W,G),G.from=function(p,k,P){if("number"==typeof p)throw new TypeError("Argument must not be a number");return W(p,k,P)},G.alloc=function(p,k,P){if("number"!=typeof p)throw new TypeError("Argument must be a number");var E=W(p);return void 0!==k?"string"==typeof P?E.fill(k,P):E.fill(k):E.fill(0),E},G.allocUnsafe=function(p){if("number"!=typeof p)throw new TypeError("Argument must be a number");return W(p)},G.allocUnsafeSlow=function(p){if("number"!=typeof p)throw new TypeError("Argument must be a number");return j.SlowBuffer(p)}},7084:(ye,ue,H)=>{var j=ue;j.utils=H(9299),j.common=H(3800),j.sha=H(4962),j.ripemd=H(9458),j.hmac=H(2194),j.sha1=j.sha.sha1,j.sha256=j.sha.sha256,j.sha224=j.sha.sha224,j.sha384=j.sha.sha384,j.sha512=j.sha.sha512,j.ripemd160=j.ripemd.ripemd160},3800:(ye,ue,H)=>{"use strict";var j=H(9299),W=H(2391);function I(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ue.BlockHash=I,I.prototype.update=function(p,k){if(p=j.toArray(p,k),this.pending=this.pending?this.pending.concat(p):p,this.pendingTotal+=p.length,this.pending.length>=this._delta8){var P=(p=this.pending).length%this._delta8;this.pending=p.slice(p.length-P,p.length),0===this.pending.length&&(this.pending=null),p=j.join32(p,0,p.length-P,this.endian);for(var E=0;E<p.length;E+=this._delta32)this._update(p,E,E+this._delta32)}return this},I.prototype.digest=function(p){return this.update(this._pad()),W(null===this.pending),this._digest(p)},I.prototype._pad=function(){var p=this.pendingTotal,k=this._delta8,P=k-(p+this.padLength)%k,E=new Array(P+this.padLength);E[0]=128;for(var R=1;R<P;R++)E[R]=0;if(p<<=3,"big"===this.endian){for(var x=8;x<this.padLength;x++)E[R++]=0;E[R++]=0,E[R++]=0,E[R++]=0,E[R++]=0,E[R++]=p>>>24&255,E[R++]=p>>>16&255,E[R++]=p>>>8&255,E[R++]=255&p}else for(E[R++]=255&p,E[R++]=p>>>8&255,E[R++]=p>>>16&255,E[R++]=p>>>24&255,E[R++]=0,E[R++]=0,E[R++]=0,E[R++]=0,x=8;x<this.padLength;x++)E[R++]=0;return E}},2194:(ye,ue,H)=>{"use strict";var j=H(9299),W=H(2391);function I(G,p,k){if(!(this instanceof I))return new I(G,p,k);this.Hash=G,this.blockSize=G.blockSize/8,this.outSize=G.outSize/8,this.inner=null,this.outer=null,this._init(j.toArray(p,k))}ye.exports=I,I.prototype._init=function(p){p.length>this.blockSize&&(p=(new this.Hash).update(p).digest()),W(p.length<=this.blockSize);for(var k=p.length;k<this.blockSize;k++)p.push(0);for(k=0;k<p.length;k++)p[k]^=54;for(this.inner=(new this.Hash).update(p),k=0;k<p.length;k++)p[k]^=106;this.outer=(new this.Hash).update(p)},I.prototype.update=function(p,k){return this.inner.update(p,k),this},I.prototype.digest=function(p){return this.outer.update(this.inner.digest()),this.outer.digest(p)}},9458:(ye,ue,H)=>{"use strict";var j=H(9299),W=H(3800),I=j.rotl32,G=j.sum32,p=j.sum32_3,k=j.sum32_4,P=W.BlockHash;function E(){if(!(this instanceof E))return new E;P.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function R(z,X,U,Z){return z<=15?X^U^Z:z<=31?X&U|~X&Z:z<=47?(X|~U)^Z:z<=63?X&Z|U&~Z:X^(U|~Z)}function S(z){return z<=15?1352829926:z<=31?1548603684:z<=47?1836072691:z<=63?2053994217:0}j.inherits(E,P),ue.ripemd160=E,E.blockSize=512,E.outSize=160,E.hmacStrength=192,E.padLength=64,E.prototype._update=function(X,U){for(var Z=this.h[0],ee=this.h[1],ae=this.h[2],ge=this.h[3],Ce=this.h[4],De=Z,we=ee,Oe=ae,y=ge,o=Ce,l=0;l<80;l++){var f=G(I(k(Z,R(l,ee,ae,ge),X[O[l]+U],(z=l)<=15?0:z<=31?1518500249:z<=47?1859775393:z<=63?2400959708:2840853838),B[l]),Ce);Z=Ce,Ce=ge,ge=I(ae,10),ae=ee,ee=f,f=G(I(k(De,R(79-l,we,Oe,y),X[C[l]+U],S(l)),N[l]),o),De=o,o=y,y=I(Oe,10),Oe=we,we=f}var z;f=p(this.h[1],ae,y),this.h[1]=p(this.h[2],ge,o),this.h[2]=p(this.h[3],Ce,De),this.h[3]=p(this.h[4],Z,we),this.h[4]=p(this.h[0],ee,Oe),this.h[0]=f},E.prototype._digest=function(X){return"hex"===X?j.toHex32(this.h,"little"):j.split32(this.h,"little")};var O=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],C=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],B=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],N=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},4962:(ye,ue,H)=>{"use strict";ue.sha1=H(9007),ue.sha224=H(55),ue.sha256=H(9342),ue.sha384=H(8634),ue.sha512=H(39)},9007:(ye,ue,H)=>{"use strict";var j=H(9299),W=H(3800),I=H(3113),G=j.rotl32,p=j.sum32,k=j.sum32_5,P=I.ft_1,E=W.BlockHash,R=[1518500249,1859775393,2400959708,3395469782];function x(){if(!(this instanceof x))return new x;E.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}j.inherits(x,E),ye.exports=x,x.blockSize=512,x.outSize=160,x.hmacStrength=80,x.padLength=64,x.prototype._update=function(O,C){for(var B=this.W,N=0;N<16;N++)B[N]=O[C+N];for(;N<B.length;N++)B[N]=G(B[N-3]^B[N-8]^B[N-14]^B[N-16],1);var z=this.h[0],X=this.h[1],U=this.h[2],Z=this.h[3],ee=this.h[4];for(N=0;N<B.length;N++){var ae=~~(N/20),ge=k(G(z,5),P(ae,X,U,Z),ee,B[N],R[ae]);ee=Z,Z=U,U=G(X,30),X=z,z=ge}this.h[0]=p(this.h[0],z),this.h[1]=p(this.h[1],X),this.h[2]=p(this.h[2],U),this.h[3]=p(this.h[3],Z),this.h[4]=p(this.h[4],ee)},x.prototype._digest=function(O){return"hex"===O?j.toHex32(this.h,"big"):j.split32(this.h,"big")}},55:(ye,ue,H)=>{"use strict";var j=H(9299),W=H(9342);function I(){if(!(this instanceof I))return new I;W.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}j.inherits(I,W),ye.exports=I,I.blockSize=512,I.outSize=224,I.hmacStrength=192,I.padLength=64,I.prototype._digest=function(p){return"hex"===p?j.toHex32(this.h.slice(0,7),"big"):j.split32(this.h.slice(0,7),"big")}},9342:(ye,ue,H)=>{"use strict";var j=H(9299),W=H(3800),I=H(3113),G=H(2391),p=j.sum32,k=j.sum32_4,P=j.sum32_5,E=I.ch32,R=I.maj32,x=I.s0_256,S=I.s1_256,O=I.g0_256,C=I.g1_256,B=W.BlockHash,N=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function z(){if(!(this instanceof z))return new z;B.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=N,this.W=new Array(64)}j.inherits(z,B),ye.exports=z,z.blockSize=512,z.outSize=256,z.hmacStrength=192,z.padLength=64,z.prototype._update=function(U,Z){for(var ee=this.W,ae=0;ae<16;ae++)ee[ae]=U[Z+ae];for(;ae<ee.length;ae++)ee[ae]=k(C(ee[ae-2]),ee[ae-7],O(ee[ae-15]),ee[ae-16]);var ge=this.h[0],Ce=this.h[1],De=this.h[2],we=this.h[3],Oe=this.h[4],y=this.h[5],o=this.h[6],l=this.h[7];for(G(this.k.length===ee.length),ae=0;ae<ee.length;ae++){var f=P(l,S(Oe),E(Oe,y,o),this.k[ae],ee[ae]),u=p(x(ge),R(ge,Ce,De));l=o,o=y,y=Oe,Oe=p(we,f),we=De,De=Ce,Ce=ge,ge=p(f,u)}this.h[0]=p(this.h[0],ge),this.h[1]=p(this.h[1],Ce),this.h[2]=p(this.h[2],De),this.h[3]=p(this.h[3],we),this.h[4]=p(this.h[4],Oe),this.h[5]=p(this.h[5],y),this.h[6]=p(this.h[6],o),this.h[7]=p(this.h[7],l)},z.prototype._digest=function(U){return"hex"===U?j.toHex32(this.h,"big"):j.split32(this.h,"big")}},8634:(ye,ue,H)=>{"use strict";var j=H(9299),W=H(39);function I(){if(!(this instanceof I))return new I;W.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}j.inherits(I,W),ye.exports=I,I.blockSize=1024,I.outSize=384,I.hmacStrength=192,I.padLength=128,I.prototype._digest=function(p){return"hex"===p?j.toHex32(this.h.slice(0,12),"big"):j.split32(this.h.slice(0,12),"big")}},39:(ye,ue,H)=>{"use strict";var j=H(9299),W=H(3800),I=H(2391),G=j.rotr64_hi,p=j.rotr64_lo,k=j.shr64_hi,P=j.shr64_lo,E=j.sum64,R=j.sum64_hi,x=j.sum64_lo,S=j.sum64_4_hi,O=j.sum64_4_lo,C=j.sum64_5_hi,B=j.sum64_5_lo,N=W.BlockHash,z=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function X(){if(!(this instanceof X))return new X;N.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=z,this.W=new Array(160)}function U(f,u,h,b,w){var g=f&h^~f&w;return g<0&&(g+=4294967296),g}function Z(f,u,h,b,w,g){var s=u&b^~u&g;return s<0&&(s+=4294967296),s}function ee(f,u,h,b,w){var g=f&h^f&w^h&w;return g<0&&(g+=4294967296),g}function ae(f,u,h,b,w,g){var s=u&b^u&g^b&g;return s<0&&(s+=4294967296),s}function ge(f,u){var g=G(f,u,28)^G(u,f,2)^G(u,f,7);return g<0&&(g+=4294967296),g}function Ce(f,u){var g=p(f,u,28)^p(u,f,2)^p(u,f,7);return g<0&&(g+=4294967296),g}function De(f,u){var g=G(f,u,14)^G(f,u,18)^G(u,f,9);return g<0&&(g+=4294967296),g}function we(f,u){var g=p(f,u,14)^p(f,u,18)^p(u,f,9);return g<0&&(g+=4294967296),g}function Oe(f,u){var g=G(f,u,1)^G(f,u,8)^k(f,u,7);return g<0&&(g+=4294967296),g}function y(f,u){var g=p(f,u,1)^p(f,u,8)^P(f,u,7);return g<0&&(g+=4294967296),g}function o(f,u){var g=G(f,u,19)^G(u,f,29)^k(f,u,6);return g<0&&(g+=4294967296),g}function l(f,u){var g=p(f,u,19)^p(u,f,29)^P(f,u,6);return g<0&&(g+=4294967296),g}j.inherits(X,N),ye.exports=X,X.blockSize=1024,X.outSize=512,X.hmacStrength=192,X.padLength=128,X.prototype._prepareBlock=function(u,h){for(var b=this.W,w=0;w<32;w++)b[w]=u[h+w];for(;w<b.length;w+=2){var g=o(b[w-4],b[w-3]),s=l(b[w-4],b[w-3]),v=b[w-14],$=b[w-13],L=Oe(b[w-30],b[w-29]),ie=y(b[w-30],b[w-29]),Se=b[w-32],ke=b[w-31];b[w]=S(g,s,v,$,L,ie,Se,ke),b[w+1]=O(g,s,v,$,L,ie,Se,ke)}},X.prototype._update=function(u,h){this._prepareBlock(u,h);var b=this.W,w=this.h[0],g=this.h[1],s=this.h[2],v=this.h[3],$=this.h[4],L=this.h[5],ie=this.h[6],Se=this.h[7],ke=this.h[8],Be=this.h[9],Pe=this.h[10],Te=this.h[11],Ie=this.h[12],Vt=this.h[13],je=this.h[14],se=this.h[15];I(this.k.length===b.length);for(var Ee=0;Ee<b.length;Ee+=2){var Re=je,Ge=se,ui=De(ke,Be),qe=we(ke,Be),Ye=U(ke,0,Pe,0,Ie),xi=Z(0,Be,0,Te,0,Vt),et=this.k[Ee],Ke=this.k[Ee+1],qi=b[Ee],ut=b[Ee+1],Qe=C(Re,Ge,ui,qe,Ye,xi,et,Ke,qi,ut),rn=B(Re,Ge,ui,qe,Ye,xi,et,Ke,qi,ut);Re=ge(w,g),Ge=Ce(w,g),ui=ee(w,0,s,0,$),qe=ae(0,g,0,v,0,L);var le=R(Re,Ge,ui,qe),J=x(Re,Ge,ui,qe);je=Ie,se=Vt,Ie=Pe,Vt=Te,Pe=ke,Te=Be,ke=R(ie,Se,Qe,rn),Be=x(Se,Se,Qe,rn),ie=$,Se=L,$=s,L=v,s=w,v=g,w=R(Qe,rn,le,J),g=x(Qe,rn,le,J)}E(this.h,0,w,g),E(this.h,2,s,v),E(this.h,4,$,L),E(this.h,6,ie,Se),E(this.h,8,ke,Be),E(this.h,10,Pe,Te),E(this.h,12,Ie,Vt),E(this.h,14,je,se)},X.prototype._digest=function(u){return"hex"===u?j.toHex32(this.h,"big"):j.split32(this.h,"big")}},3113:(ye,ue,H)=>{"use strict";var W=H(9299).rotr32;function G(S,O,C){return S&O^~S&C}function p(S,O,C){return S&O^S&C^O&C}function k(S,O,C){return S^O^C}ue.ft_1=function I(S,O,C,B){return 0===S?G(O,C,B):1===S||3===S?k(O,C,B):2===S?p(O,C,B):void 0},ue.ch32=G,ue.maj32=p,ue.p32=k,ue.s0_256=function P(S){return W(S,2)^W(S,13)^W(S,22)},ue.s1_256=function E(S){return W(S,6)^W(S,11)^W(S,25)},ue.g0_256=function R(S){return W(S,7)^W(S,18)^S>>>3},ue.g1_256=function x(S){return W(S,17)^W(S,19)^S>>>10}},9299:(ye,ue,H)=>{"use strict";var j=H(2391),W=H(3894);function I(l,f){return!(55296!=(64512&l.charCodeAt(f))||f<0||f+1>=l.length)&&56320==(64512&l.charCodeAt(f+1))}function k(l){return(l>>>24|l>>>8&65280|l<<8&16711680|(255&l)<<24)>>>0}function E(l){return 1===l.length?"0"+l:l}function R(l){return 7===l.length?"0"+l:6===l.length?"00"+l:5===l.length?"000"+l:4===l.length?"0000"+l:3===l.length?"00000"+l:2===l.length?"000000"+l:1===l.length?"0000000"+l:l}ue.inherits=W,ue.toArray=function G(l,f){if(Array.isArray(l))return l.slice();if(!l)return[];var u=[];if("string"==typeof l)if(f){if("hex"===f)for((l=l.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(l="0"+l),b=0;b<l.length;b+=2)u.push(parseInt(l[b]+l[b+1],16))}else for(var h=0,b=0;b<l.length;b++){var w=l.charCodeAt(b);w<128?u[h++]=w:w<2048?(u[h++]=w>>6|192,u[h++]=63&w|128):I(l,b)?(w=65536+((1023&w)<<10)+(1023&l.charCodeAt(++b)),u[h++]=w>>18|240,u[h++]=w>>12&63|128,u[h++]=w>>6&63|128,u[h++]=63&w|128):(u[h++]=w>>12|224,u[h++]=w>>6&63|128,u[h++]=63&w|128)}else for(b=0;b<l.length;b++)u[b]=0|l[b];return u},ue.toHex=function p(l){for(var f="",u=0;u<l.length;u++)f+=E(l[u].toString(16));return f},ue.htonl=k,ue.toHex32=function P(l,f){for(var u="",h=0;h<l.length;h++){var b=l[h];"little"===f&&(b=k(b)),u+=R(b.toString(16))}return u},ue.zero2=E,ue.zero8=R,ue.join32=function x(l,f,u,h){var b=u-f;j(b%4==0);for(var w=new Array(b/4),g=0,s=f;g<w.length;g++,s+=4)w[g]=("big"===h?l[s]<<24|l[s+1]<<16|l[s+2]<<8|l[s+3]:l[s+3]<<24|l[s+2]<<16|l[s+1]<<8|l[s])>>>0;return w},ue.split32=function S(l,f){for(var u=new Array(4*l.length),h=0,b=0;h<l.length;h++,b+=4){var w=l[h];"big"===f?(u[b]=w>>>24,u[b+1]=w>>>16&255,u[b+2]=w>>>8&255,u[b+3]=255&w):(u[b+3]=w>>>24,u[b+2]=w>>>16&255,u[b+1]=w>>>8&255,u[b]=255&w)}return u},ue.rotr32=function O(l,f){return l>>>f|l<<32-f},ue.rotl32=function C(l,f){return l<<f|l>>>32-f},ue.sum32=function B(l,f){return l+f>>>0},ue.sum32_3=function N(l,f,u){return l+f+u>>>0},ue.sum32_4=function z(l,f,u,h){return l+f+u+h>>>0},ue.sum32_5=function X(l,f,u,h,b){return l+f+u+h+b>>>0},ue.sum64=function U(l,f,u,h){var g=h+l[f+1]>>>0;l[f]=(g<h?1:0)+u+l[f]>>>0,l[f+1]=g},ue.sum64_hi=function Z(l,f,u,h){return(f+h>>>0<f?1:0)+l+u>>>0},ue.sum64_lo=function ee(l,f,u,h){return f+h>>>0},ue.sum64_4_hi=function ae(l,f,u,h,b,w,g,s){var v=0,$=f;return v+=($=$+h>>>0)<f?1:0,v+=($=$+w>>>0)<w?1:0,l+u+b+g+(v+=($=$+s>>>0)<s?1:0)>>>0},ue.sum64_4_lo=function ge(l,f,u,h,b,w,g,s){return f+h+w+s>>>0},ue.sum64_5_hi=function Ce(l,f,u,h,b,w,g,s,v,$){var L=0,ie=f;return L+=(ie=ie+h>>>0)<f?1:0,L+=(ie=ie+w>>>0)<w?1:0,L+=(ie=ie+s>>>0)<s?1:0,l+u+b+g+v+(L+=(ie=ie+$>>>0)<$?1:0)>>>0},ue.sum64_5_lo=function De(l,f,u,h,b,w,g,s,v,$){return f+h+w+s+$>>>0},ue.rotr64_hi=function we(l,f,u){return(f<<32-u|l>>>u)>>>0},ue.rotr64_lo=function Oe(l,f,u){return(l<<32-u|f>>>u)>>>0},ue.shr64_hi=function y(l,f,u){return l>>>u},ue.shr64_lo=function o(l,f,u){return(l<<32-u|f>>>u)>>>0}},2438:(ye,ue,H)=>{"use strict";var j=H(7084),W=H(8195),I=H(2391);function G(p){if(!(this instanceof G))return new G(p);this.hash=p.hash,this.predResist=!!p.predResist,this.outLen=this.hash.outSize,this.minEntropy=p.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var k=W.toArray(p.entropy,p.entropyEnc||"hex"),P=W.toArray(p.nonce,p.nonceEnc||"hex"),E=W.toArray(p.pers,p.persEnc||"hex");I(k.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(k,P,E)}ye.exports=G,G.prototype._init=function(k,P,E){var R=k.concat(P).concat(E);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var x=0;x<this.V.length;x++)this.K[x]=0,this.V[x]=1;this._update(R),this._reseed=1,this.reseedInterval=281474976710656},G.prototype._hmac=function(){return new j.hmac(this.hash,this.K)},G.prototype._update=function(k){var P=this._hmac().update(this.V).update([0]);k&&(P=P.update(k)),this.K=P.digest(),this.V=this._hmac().update(this.V).digest(),k&&(this.K=this._hmac().update(this.V).update([1]).update(k).digest(),this.V=this._hmac().update(this.V).digest())},G.prototype.reseed=function(k,P,E,R){"string"!=typeof P&&(R=E,E=P,P=null),k=W.toArray(k,P),E=W.toArray(E,R),I(k.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(k.concat(E||[])),this._reseed=1},G.prototype.generate=function(k,P,E,R){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof P&&(R=E,E=P,P=null),E&&(E=W.toArray(E,R||"hex"),this._update(E));for(var x=[];x.length<k;)this.V=this._hmac().update(this.V).digest(),x=x.concat(this.V);var S=x.slice(0,k);return this._update(E),this._reseed++,W.encode(S,P)}},8461:(ye,ue)=>{ue.read=function(H,j,W,I,G){var p,k,P=8*G-I-1,E=(1<<P)-1,R=E>>1,x=-7,S=W?G-1:0,O=W?-1:1,C=H[j+S];for(S+=O,p=C&(1<<-x)-1,C>>=-x,x+=P;x>0;p=256*p+H[j+S],S+=O,x-=8);for(k=p&(1<<-x)-1,p>>=-x,x+=I;x>0;k=256*k+H[j+S],S+=O,x-=8);if(0===p)p=1-R;else{if(p===E)return k?NaN:1/0*(C?-1:1);k+=Math.pow(2,I),p-=R}return(C?-1:1)*k*Math.pow(2,p-I)},ue.write=function(H,j,W,I,G,p){var k,P,E,R=8*p-G-1,x=(1<<R)-1,S=x>>1,O=23===G?Math.pow(2,-24)-Math.pow(2,-77):0,C=I?0:p-1,B=I?1:-1,N=j<0||0===j&&1/j<0?1:0;for(j=Math.abs(j),isNaN(j)||j===1/0?(P=isNaN(j)?1:0,k=x):(k=Math.floor(Math.log(j)/Math.LN2),j*(E=Math.pow(2,-k))<1&&(k--,E*=2),(j+=k+S>=1?O/E:O*Math.pow(2,1-S))*E>=2&&(k++,E/=2),k+S>=x?(P=0,k=x):k+S>=1?(P=(j*E-1)*Math.pow(2,G),k+=S):(P=j*Math.pow(2,S-1)*Math.pow(2,G),k=0));G>=8;H[W+C]=255&P,C+=B,P/=256,G-=8);for(k=k<<G|P,R+=G;R>0;H[W+C]=255&k,C+=B,k/=256,R-=8);H[W+C-B]|=128*N}},3894:ye=>{ye.exports="function"==typeof Object.create?function(H,j){j&&(H.super_=j,H.prototype=Object.create(j.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}))}:function(H,j){if(j){H.super_=j;var W=function(){};W.prototype=j.prototype,H.prototype=new W,H.prototype.constructor=H}}},8095:(ye,ue,H)=>{"use strict";var j=H(3894),W=H(9650),I=H(3502).Buffer,G=new Array(16);function p(){W.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function k(S,O){return S<<O|S>>>32-O}function P(S,O,C,B,N,z,X){return k(S+(O&C|~O&B)+N+z|0,X)+O|0}function E(S,O,C,B,N,z,X){return k(S+(O&B|C&~B)+N+z|0,X)+O|0}function R(S,O,C,B,N,z,X){return k(S+(O^C^B)+N+z|0,X)+O|0}function x(S,O,C,B,N,z,X){return k(S+(C^(O|~B))+N+z|0,X)+O|0}j(p,W),p.prototype._update=function(){for(var S=G,O=0;O<16;++O)S[O]=this._block.readInt32LE(4*O);var C=this._a,B=this._b,N=this._c,z=this._d;C=P(C,B,N,z,S[0],3614090360,7),z=P(z,C,B,N,S[1],3905402710,12),N=P(N,z,C,B,S[2],606105819,17),B=P(B,N,z,C,S[3],3250441966,22),C=P(C,B,N,z,S[4],4118548399,7),z=P(z,C,B,N,S[5],1200080426,12),N=P(N,z,C,B,S[6],2821735955,17),B=P(B,N,z,C,S[7],4249261313,22),C=P(C,B,N,z,S[8],1770035416,7),z=P(z,C,B,N,S[9],2336552879,12),N=P(N,z,C,B,S[10],4294925233,17),B=P(B,N,z,C,S[11],2304563134,22),C=P(C,B,N,z,S[12],1804603682,7),z=P(z,C,B,N,S[13],4254626195,12),N=P(N,z,C,B,S[14],2792965006,17),C=E(C,B=P(B,N,z,C,S[15],1236535329,22),N,z,S[1],4129170786,5),z=E(z,C,B,N,S[6],3225465664,9),N=E(N,z,C,B,S[11],643717713,14),B=E(B,N,z,C,S[0],3921069994,20),C=E(C,B,N,z,S[5],3593408605,5),z=E(z,C,B,N,S[10],38016083,9),N=E(N,z,C,B,S[15],3634488961,14),B=E(B,N,z,C,S[4],3889429448,20),C=E(C,B,N,z,S[9],568446438,5),z=E(z,C,B,N,S[14],3275163606,9),N=E(N,z,C,B,S[3],4107603335,14),B=E(B,N,z,C,S[8],1163531501,20),C=E(C,B,N,z,S[13],2850285829,5),z=E(z,C,B,N,S[2],4243563512,9),N=E(N,z,C,B,S[7],1735328473,14),C=R(C,B=E(B,N,z,C,S[12],2368359562,20),N,z,S[5],4294588738,4),z=R(z,C,B,N,S[8],2272392833,11),N=R(N,z,C,B,S[11],1839030562,16),B=R(B,N,z,C,S[14],4259657740,23),C=R(C,B,N,z,S[1],2763975236,4),z=R(z,C,B,N,S[4],1272893353,11),N=R(N,z,C,B,S[7],4139469664,16),B=R(B,N,z,C,S[10],3200236656,23),C=R(C,B,N,z,S[13],681279174,4),z=R(z,C,B,N,S[0],3936430074,11),N=R(N,z,C,B,S[3],3572445317,16),B=R(B,N,z,C,S[6],76029189,23),C=R(C,B,N,z,S[9],3654602809,4),z=R(z,C,B,N,S[12],3873151461,11),N=R(N,z,C,B,S[15],530742520,16),C=x(C,B=R(B,N,z,C,S[2],3299628645,23),N,z,S[0],4096336452,6),z=x(z,C,B,N,S[7],1126891415,10),N=x(N,z,C,B,S[14],2878612391,15),B=x(B,N,z,C,S[5],4237533241,21),C=x(C,B,N,z,S[12],1700485571,6),z=x(z,C,B,N,S[3],2399980690,10),N=x(N,z,C,B,S[10],4293915773,15),B=x(B,N,z,C,S[1],2240044497,21),C=x(C,B,N,z,S[8],1873313359,6),z=x(z,C,B,N,S[15],4264355552,10),N=x(N,z,C,B,S[6],2734768916,15),B=x(B,N,z,C,S[13],1309151649,21),C=x(C,B,N,z,S[4],4149444226,6),z=x(z,C,B,N,S[11],3174756917,10),N=x(N,z,C,B,S[2],718787259,15),B=x(B,N,z,C,S[9],3951481745,21),this._a=this._a+C|0,this._b=this._b+B|0,this._c=this._c+N|0,this._d=this._d+z|0},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var S=I.allocUnsafe(16);return S.writeInt32LE(this._a,0),S.writeInt32LE(this._b,4),S.writeInt32LE(this._c,8),S.writeInt32LE(this._d,12),S},ye.exports=p},7079:(ye,ue,H)=>{var j=H(1378),W=H(7950);function I(G){this.rand=G||new W.Rand}ye.exports=I,I.create=function(p){return new I(p)},I.prototype._randbelow=function(p){var k=p.bitLength(),P=Math.ceil(k/8);do{var E=new j(this.rand.generate(P))}while(E.cmp(p)>=0);return E},I.prototype._randrange=function(p,k){var P=k.sub(p);return p.add(this._randbelow(P))},I.prototype.test=function(p,k,P){var E=p.bitLength(),R=j.mont(p),x=new j(1).toRed(R);k||(k=Math.max(1,E/48|0));for(var S=p.subn(1),O=0;!S.testn(O);O++);for(var C=p.shrn(O),B=S.toRed(R);k>0;k--){var z=this._randrange(new j(2),S);P&&P(z);var X=z.toRed(R).redPow(C);if(0!==X.cmp(x)&&0!==X.cmp(B)){for(var U=1;U<O;U++){if(0===(X=X.redSqr()).cmp(x))return!1;if(0===X.cmp(B))break}if(U===O)return!1}}return!0},I.prototype.getDivisor=function(p,k){var P=p.bitLength(),E=j.mont(p),R=new j(1).toRed(E);k||(k=Math.max(1,P/48|0));for(var x=p.subn(1),S=0;!x.testn(S);S++);for(var O=p.shrn(S),C=x.toRed(E);k>0;k--){var B=this._randrange(new j(2),x),N=p.gcd(B);if(0!==N.cmpn(1))return N;var z=B.toRed(E).redPow(O);if(0!==z.cmp(R)&&0!==z.cmp(C)){for(var X=1;X<S;X++){if(0===(z=z.redSqr()).cmp(R))return z.fromRed().subn(1).gcd(p);if(0===z.cmp(C))break}if(X===S)return(z=z.redSqr()).fromRed().subn(1).gcd(p)}}return!1}},1378:function(ye,ue,H){!function(j,W){"use strict";function I(y,o){if(!y)throw new Error(o||"Assertion failed")}function G(y,o){y.super_=o;var l=function(){};l.prototype=o.prototype,y.prototype=new l,y.prototype.constructor=y}function p(y,o,l){if(p.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,null!==y&&(("le"===o||"be"===o)&&(l=o,o=10),this._init(y||0,o||10,l||"be"))}var k;"object"==typeof j?j.exports=p:W.BN=p,p.BN=p,p.wordSize=26;try{k="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:H(6619).Buffer}catch(y){}function P(y,o){var l=y.charCodeAt(o);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function E(y,o,l){var f=P(y,l);return l-1>=o&&(f|=P(y,l-1)<<4),f}function R(y,o,l,f){for(var u=0,h=Math.min(y.length,l),b=o;b<h;b++){var w=y.charCodeAt(b)-48;u*=f,u+=w>=49?w-49+10:w>=17?w-17+10:w}return u}p.isBN=function(o){return o instanceof p||null!==o&&"object"==typeof o&&o.constructor.wordSize===p.wordSize&&Array.isArray(o.words)},p.max=function(o,l){return o.cmp(l)>0?o:l},p.min=function(o,l){return o.cmp(l)<0?o:l},p.prototype._init=function(o,l,f){if("number"==typeof o)return this._initNumber(o,l,f);if("object"==typeof o)return this._initArray(o,l,f);"hex"===l&&(l=16),I(l===(0|l)&&l>=2&&l<=36);var u=0;"-"===(o=o.toString().replace(/\s+/g,""))[0]&&(u++,this.negative=1),u<o.length&&(16===l?this._parseHex(o,u,f):(this._parseBase(o,l,u),"le"===f&&this._initArray(this.toArray(),l,f)))},p.prototype._initNumber=function(o,l,f){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[67108863&o],this.length=1):o<4503599627370496?(this.words=[67108863&o,o/67108864&67108863],this.length=2):(I(o<9007199254740992),this.words=[67108863&o,o/67108864&67108863,1],this.length=3),"le"===f&&this._initArray(this.toArray(),l,f)},p.prototype._initArray=function(o,l,f){if(I("number"==typeof o.length),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var h,b,w=0;if("be"===f)for(u=o.length-1,h=0;u>=0;u-=3)this.words[h]|=(b=o[u]|o[u-1]<<8|o[u-2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);else if("le"===f)for(u=0,h=0;u<o.length;u+=3)this.words[h]|=(b=o[u]|o[u+1]<<8|o[u+2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);return this.strip()},p.prototype._parseHex=function(o,l,f){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var w,h=0,b=0;if("be"===f)for(u=o.length-1;u>=l;u-=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;else for(u=(o.length-l)%2==0?l+1:l;u<o.length;u+=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;this.strip()},p.prototype._parseBase=function(o,l,f){this.words=[0],this.length=1;for(var u=0,h=1;h<=67108863;h*=l)u++;u--,h=h/l|0;for(var b=o.length-f,w=b%u,g=Math.min(b,b-w)+f,s=0,v=f;v<g;v+=u)s=R(o,v,v+u,l),this.imuln(h),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==w){var $=1;for(s=R(o,v,o.length,l),v=0;v<w;v++)$*=l;this.imuln($),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},p.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red},p.prototype.clone=function(){var o=new p(null);return this.copy(o),o},p.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},p.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},p.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},p.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function B(y,o,l){l.negative=o.negative^y.negative;var f=y.length+o.length|0;l.length=f,f=f-1|0;var u=0|y.words[0],h=0|o.words[0],b=u*h,g=b/67108864|0;l.words[0]=67108863&b;for(var s=1;s<f;s++){for(var v=g>>>26,$=67108863&g,L=Math.min(s,o.length-1),ie=Math.max(0,s-y.length+1);ie<=L;ie++)v+=(b=(u=0|y.words[s-ie|0])*(h=0|o.words[ie])+$)/67108864|0,$=67108863&b;l.words[s]=0|$,g=0|v}return 0!==g?l.words[s]=0|g:l.length--,l.strip()}p.prototype.toString=function(o,l){var f;if(l=0|l||1,16===(o=o||10)||"hex"===o){f="";for(var u=0,h=0,b=0;b<this.length;b++){var w=this.words[b],g=(16777215&(w<<u|h)).toString(16);f=0!=(h=w>>>24-u&16777215)||b!==this.length-1?x[6-g.length]+g+f:g+f,(u+=2)>=26&&(u-=26,b--)}for(0!==h&&(f=h.toString(16)+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}if(o===(0|o)&&o>=2&&o<=36){var s=S[o],v=O[o];f="";var $=this.clone();for($.negative=0;!$.isZero();){var L=$.modn(v).toString(o);f=($=$.idivn(v)).isZero()?L+f:x[s-L.length]+L+f}for(this.isZero()&&(f="0"+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}I(!1,"Base should be between 2 and 36")},p.prototype.toNumber=function(){var o=this.words[0];return 2===this.length?o+=67108864*this.words[1]:3===this.length&&1===this.words[2]?o+=4503599627370496+67108864*this.words[1]:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-o:o},p.prototype.toJSON=function(){return this.toString(16)},p.prototype.toBuffer=function(o,l){return I(void 0!==k),this.toArrayLike(k,o,l)},p.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)},p.prototype.toArrayLike=function(o,l,f){var u=this.byteLength(),h=f||Math.max(1,u);I(u<=h,"byte array longer than desired length"),I(h>0,"Requested array length <= 0"),this.strip();var g,s,b="le"===l,w=new o(h),v=this.clone();if(b){for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[s]=g;for(;s<h;s++)w[s]=0}else{for(s=0;s<h-u;s++)w[s]=0;for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[h-s-1]=g}return w},p.prototype._countBits=Math.clz32?function(o){return 32-Math.clz32(o)}:function(o){var l=o,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},p.prototype._zeroBits=function(o){if(0===o)return 26;var l=o,f=0;return 0==(8191&l)&&(f+=13,l>>>=13),0==(127&l)&&(f+=7,l>>>=7),0==(15&l)&&(f+=4,l>>>=4),0==(3&l)&&(f+=2,l>>>=2),0==(1&l)&&f++,f},p.prototype.bitLength=function(){var l=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+l},p.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(o+=f,26!==f)break}return o},p.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},p.prototype.toTwos=function(o){return 0!==this.negative?this.abs().inotn(o).iaddn(1):this.clone()},p.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},p.prototype.isNeg=function(){return 0!==this.negative},p.prototype.neg=function(){return this.clone().ineg()},p.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},p.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this.strip()},p.prototype.ior=function(o){return I(0==(this.negative|o.negative)),this.iuor(o)},p.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},p.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},p.prototype.iuand=function(o){var l;l=this.length>o.length?o:this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&o.words[f];return this.length=l.length,this.strip()},p.prototype.iand=function(o){return I(0==(this.negative|o.negative)),this.iuand(o)},p.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},p.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},p.prototype.iuxor=function(o){var l,f;this.length>o.length?(l=this,f=o):(l=o,f=this);for(var u=0;u<f.length;u++)this.words[u]=l.words[u]^f.words[u];if(this!==l)for(;u<l.length;u++)this.words[u]=l.words[u];return this.length=l.length,this.strip()},p.prototype.ixor=function(o){return I(0==(this.negative|o.negative)),this.iuxor(o)},p.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},p.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},p.prototype.inotn=function(o){I("number"==typeof o&&o>=0);var l=0|Math.ceil(o/26),f=o%26;this._expand(l),f>0&&l--;for(var u=0;u<l;u++)this.words[u]=67108863&~this.words[u];return f>0&&(this.words[u]=~this.words[u]&67108863>>26-f),this.strip()},p.prototype.notn=function(o){return this.clone().inotn(o)},p.prototype.setn=function(o,l){I("number"==typeof o&&o>=0);var f=o/26|0,u=o%26;return this._expand(f+1),this.words[f]=l?this.words[f]|1<<u:this.words[f]&~(1<<u),this.strip()},p.prototype.iadd=function(o){var l,f,u;if(0!==this.negative&&0===o.negative)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(0===this.negative&&0!==o.negative)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();this.length>o.length?(f=this,u=o):(f=o,u=this);for(var h=0,b=0;b<u.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+(0|u.words[b])+h),h=l>>>26;for(;0!==h&&b<f.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+h),h=l>>>26;if(this.length=f.length,0!==h)this.words[this.length]=h,this.length++;else if(f!==this)for(;b<f.length;b++)this.words[b]=f.words[b];return this},p.prototype.add=function(o){var l;return 0!==o.negative&&0===this.negative?(o.negative=0,l=this.sub(o),o.negative^=1,l):0===o.negative&&0!==this.negative?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},p.prototype.isub=function(o){if(0!==o.negative){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var u,h,f=this.cmp(o);if(0===f)return this.negative=0,this.length=1,this.words[0]=0,this;f>0?(u=this,h=o):(u=o,h=this);for(var b=0,w=0;w<h.length;w++)b=(l=(0|u.words[w])-(0|h.words[w])+b)>>26,this.words[w]=67108863&l;for(;0!==b&&w<u.length;w++)b=(l=(0|u.words[w])+b)>>26,this.words[w]=67108863&l;if(0===b&&w<u.length&&u!==this)for(;w<u.length;w++)this.words[w]=u.words[w];return this.length=Math.max(this.length,w),u!==this&&(this.negative=1),this.strip()},p.prototype.sub=function(o){return this.clone().isub(o)};var N=function(o,l,f){var g,s,v,u=o.words,h=l.words,b=f.words,w=0,$=0|u[0],L=8191&$,ie=$>>>13,Se=0|u[1],ke=8191&Se,Be=Se>>>13,Pe=0|u[2],Te=8191&Pe,Ie=Pe>>>13,Vt=0|u[3],je=8191&Vt,se=Vt>>>13,Ee=0|u[4],Re=8191&Ee,Ge=Ee>>>13,ui=0|u[5],qe=8191&ui,Ye=ui>>>13,xi=0|u[6],et=8191&xi,Ke=xi>>>13,qi=0|u[7],ut=8191&qi,Qe=qi>>>13,rn=0|u[8],le=8191&rn,J=rn>>>13,re=0|u[9],ve=8191&re,xe=re>>>13,ot=0|h[0],Ne=8191&ot,Xe=ot>>>13,Pi=0|h[1],it=8191&Pi,rt=Pi>>>13,bi=0|h[2],ht=8191&bi,_t=bi>>>13,Sr=0|h[3],gt=8191&Sr,vt=Sr>>>13,Dr=0|h[4],st=8191&Dr,yt=Dr>>>13,Ir=0|h[5],mt=8191&Ir,wt=Ir>>>13,Cr=0|h[6],ct=8191&Cr,ft=Cr>>>13,An=0|h[7],St=8191&An,at=An>>>13,Tr=0|h[8],dt=8191&Tr,Mt=Tr>>>13,$r=0|h[9],Tt=8191&$r,Ct=$r>>>13;f.negative=o.negative^l.negative,f.length=19;var Fn=(w+(g=Math.imul(L,Ne))|0)+((8191&(s=(s=Math.imul(L,Xe))+Math.imul(ie,Ne)|0))<<13)|0;w=((v=Math.imul(ie,Xe))+(s>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,g=Math.imul(ke,Ne),s=(s=Math.imul(ke,Xe))+Math.imul(Be,Ne)|0,v=Math.imul(Be,Xe);var Ri=(w+(g=g+Math.imul(L,it)|0)|0)+((8191&(s=(s=s+Math.imul(L,rt)|0)+Math.imul(ie,it)|0))<<13)|0;w=((v=v+Math.imul(ie,rt)|0)+(s>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,g=Math.imul(Te,Ne),s=(s=Math.imul(Te,Xe))+Math.imul(Ie,Ne)|0,v=Math.imul(Ie,Xe),g=g+Math.imul(ke,it)|0,s=(s=s+Math.imul(ke,rt)|0)+Math.imul(Be,it)|0,v=v+Math.imul(Be,rt)|0;var Oi=(w+(g=g+Math.imul(L,ht)|0)|0)+((8191&(s=(s=s+Math.imul(L,_t)|0)+Math.imul(ie,ht)|0))<<13)|0;w=((v=v+Math.imul(ie,_t)|0)+(s>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,g=Math.imul(je,Ne),s=(s=Math.imul(je,Xe))+Math.imul(se,Ne)|0,v=Math.imul(se,Xe),g=g+Math.imul(Te,it)|0,s=(s=s+Math.imul(Te,rt)|0)+Math.imul(Ie,it)|0,v=v+Math.imul(Ie,rt)|0,g=g+Math.imul(ke,ht)|0,s=(s=s+Math.imul(ke,_t)|0)+Math.imul(Be,ht)|0,v=v+Math.imul(Be,_t)|0;var zn=(w+(g=g+Math.imul(L,gt)|0)|0)+((8191&(s=(s=s+Math.imul(L,vt)|0)+Math.imul(ie,gt)|0))<<13)|0;w=((v=v+Math.imul(ie,vt)|0)+(s>>>13)|0)+(zn>>>26)|0,zn&=67108863,g=Math.imul(Re,Ne),s=(s=Math.imul(Re,Xe))+Math.imul(Ge,Ne)|0,v=Math.imul(Ge,Xe),g=g+Math.imul(je,it)|0,s=(s=s+Math.imul(je,rt)|0)+Math.imul(se,it)|0,v=v+Math.imul(se,rt)|0,g=g+Math.imul(Te,ht)|0,s=(s=s+Math.imul(Te,_t)|0)+Math.imul(Ie,ht)|0,v=v+Math.imul(Ie,_t)|0,g=g+Math.imul(ke,gt)|0,s=(s=s+Math.imul(ke,vt)|0)+Math.imul(Be,gt)|0,v=v+Math.imul(Be,vt)|0;var jn=(w+(g=g+Math.imul(L,st)|0)|0)+((8191&(s=(s=s+Math.imul(L,yt)|0)+Math.imul(ie,st)|0))<<13)|0;w=((v=v+Math.imul(ie,yt)|0)+(s>>>13)|0)+(jn>>>26)|0,jn&=67108863,g=Math.imul(qe,Ne),s=(s=Math.imul(qe,Xe))+Math.imul(Ye,Ne)|0,v=Math.imul(Ye,Xe),g=g+Math.imul(Re,it)|0,s=(s=s+Math.imul(Re,rt)|0)+Math.imul(Ge,it)|0,v=v+Math.imul(Ge,rt)|0,g=g+Math.imul(je,ht)|0,s=(s=s+Math.imul(je,_t)|0)+Math.imul(se,ht)|0,v=v+Math.imul(se,_t)|0,g=g+Math.imul(Te,gt)|0,s=(s=s+Math.imul(Te,vt)|0)+Math.imul(Ie,gt)|0,v=v+Math.imul(Ie,vt)|0,g=g+Math.imul(ke,st)|0,s=(s=s+Math.imul(ke,yt)|0)+Math.imul(Be,st)|0,v=v+Math.imul(Be,yt)|0;var tr=(w+(g=g+Math.imul(L,mt)|0)|0)+((8191&(s=(s=s+Math.imul(L,wt)|0)+Math.imul(ie,mt)|0))<<13)|0;w=((v=v+Math.imul(ie,wt)|0)+(s>>>13)|0)+(tr>>>26)|0,tr&=67108863,g=Math.imul(et,Ne),s=(s=Math.imul(et,Xe))+Math.imul(Ke,Ne)|0,v=Math.imul(Ke,Xe),g=g+Math.imul(qe,it)|0,s=(s=s+Math.imul(qe,rt)|0)+Math.imul(Ye,it)|0,v=v+Math.imul(Ye,rt)|0,g=g+Math.imul(Re,ht)|0,s=(s=s+Math.imul(Re,_t)|0)+Math.imul(Ge,ht)|0,v=v+Math.imul(Ge,_t)|0,g=g+Math.imul(je,gt)|0,s=(s=s+Math.imul(je,vt)|0)+Math.imul(se,gt)|0,v=v+Math.imul(se,vt)|0,g=g+Math.imul(Te,st)|0,s=(s=s+Math.imul(Te,yt)|0)+Math.imul(Ie,st)|0,v=v+Math.imul(Ie,yt)|0,g=g+Math.imul(ke,mt)|0,s=(s=s+Math.imul(ke,wt)|0)+Math.imul(Be,mt)|0,v=v+Math.imul(Be,wt)|0;var ir=(w+(g=g+Math.imul(L,ct)|0)|0)+((8191&(s=(s=s+Math.imul(L,ft)|0)+Math.imul(ie,ct)|0))<<13)|0;w=((v=v+Math.imul(ie,ft)|0)+(s>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ut,Ne),s=(s=Math.imul(ut,Xe))+Math.imul(Qe,Ne)|0,v=Math.imul(Qe,Xe),g=g+Math.imul(et,it)|0,s=(s=s+Math.imul(et,rt)|0)+Math.imul(Ke,it)|0,v=v+Math.imul(Ke,rt)|0,g=g+Math.imul(qe,ht)|0,s=(s=s+Math.imul(qe,_t)|0)+Math.imul(Ye,ht)|0,v=v+Math.imul(Ye,_t)|0,g=g+Math.imul(Re,gt)|0,s=(s=s+Math.imul(Re,vt)|0)+Math.imul(Ge,gt)|0,v=v+Math.imul(Ge,vt)|0,g=g+Math.imul(je,st)|0,s=(s=s+Math.imul(je,yt)|0)+Math.imul(se,st)|0,v=v+Math.imul(se,yt)|0,g=g+Math.imul(Te,mt)|0,s=(s=s+Math.imul(Te,wt)|0)+Math.imul(Ie,mt)|0,v=v+Math.imul(Ie,wt)|0,g=g+Math.imul(ke,ct)|0,s=(s=s+Math.imul(ke,ft)|0)+Math.imul(Be,ct)|0,v=v+Math.imul(Be,ft)|0;var nr=(w+(g=g+Math.imul(L,St)|0)|0)+((8191&(s=(s=s+Math.imul(L,at)|0)+Math.imul(ie,St)|0))<<13)|0;w=((v=v+Math.imul(ie,at)|0)+(s>>>13)|0)+(nr>>>26)|0,nr&=67108863,g=Math.imul(le,Ne),s=(s=Math.imul(le,Xe))+Math.imul(J,Ne)|0,v=Math.imul(J,Xe),g=g+Math.imul(ut,it)|0,s=(s=s+Math.imul(ut,rt)|0)+Math.imul(Qe,it)|0,v=v+Math.imul(Qe,rt)|0,g=g+Math.imul(et,ht)|0,s=(s=s+Math.imul(et,_t)|0)+Math.imul(Ke,ht)|0,v=v+Math.imul(Ke,_t)|0,g=g+Math.imul(qe,gt)|0,s=(s=s+Math.imul(qe,vt)|0)+Math.imul(Ye,gt)|0,v=v+Math.imul(Ye,vt)|0,g=g+Math.imul(Re,st)|0,s=(s=s+Math.imul(Re,yt)|0)+Math.imul(Ge,st)|0,v=v+Math.imul(Ge,yt)|0,g=g+Math.imul(je,mt)|0,s=(s=s+Math.imul(je,wt)|0)+Math.imul(se,mt)|0,v=v+Math.imul(se,wt)|0,g=g+Math.imul(Te,ct)|0,s=(s=s+Math.imul(Te,ft)|0)+Math.imul(Ie,ct)|0,v=v+Math.imul(Ie,ft)|0,g=g+Math.imul(ke,St)|0,s=(s=s+Math.imul(ke,at)|0)+Math.imul(Be,St)|0,v=v+Math.imul(Be,at)|0;var rr=(w+(g=g+Math.imul(L,dt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Mt)|0)+Math.imul(ie,dt)|0))<<13)|0;w=((v=v+Math.imul(ie,Mt)|0)+(s>>>13)|0)+(rr>>>26)|0,rr&=67108863,g=Math.imul(ve,Ne),s=(s=Math.imul(ve,Xe))+Math.imul(xe,Ne)|0,v=Math.imul(xe,Xe),g=g+Math.imul(le,it)|0,s=(s=s+Math.imul(le,rt)|0)+Math.imul(J,it)|0,v=v+Math.imul(J,rt)|0,g=g+Math.imul(ut,ht)|0,s=(s=s+Math.imul(ut,_t)|0)+Math.imul(Qe,ht)|0,v=v+Math.imul(Qe,_t)|0,g=g+Math.imul(et,gt)|0,s=(s=s+Math.imul(et,vt)|0)+Math.imul(Ke,gt)|0,v=v+Math.imul(Ke,vt)|0,g=g+Math.imul(qe,st)|0,s=(s=s+Math.imul(qe,yt)|0)+Math.imul(Ye,st)|0,v=v+Math.imul(Ye,yt)|0,g=g+Math.imul(Re,mt)|0,s=(s=s+Math.imul(Re,wt)|0)+Math.imul(Ge,mt)|0,v=v+Math.imul(Ge,wt)|0,g=g+Math.imul(je,ct)|0,s=(s=s+Math.imul(je,ft)|0)+Math.imul(se,ct)|0,v=v+Math.imul(se,ft)|0,g=g+Math.imul(Te,St)|0,s=(s=s+Math.imul(Te,at)|0)+Math.imul(Ie,St)|0,v=v+Math.imul(Ie,at)|0,g=g+Math.imul(ke,dt)|0,s=(s=s+Math.imul(ke,Mt)|0)+Math.imul(Be,dt)|0,v=v+Math.imul(Be,Mt)|0;var qn=(w+(g=g+Math.imul(L,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Ct)|0)+Math.imul(ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(ie,Ct)|0)+(s>>>13)|0)+(qn>>>26)|0,qn&=67108863,g=Math.imul(ve,it),s=(s=Math.imul(ve,rt))+Math.imul(xe,it)|0,v=Math.imul(xe,rt),g=g+Math.imul(le,ht)|0,s=(s=s+Math.imul(le,_t)|0)+Math.imul(J,ht)|0,v=v+Math.imul(J,_t)|0,g=g+Math.imul(ut,gt)|0,s=(s=s+Math.imul(ut,vt)|0)+Math.imul(Qe,gt)|0,v=v+Math.imul(Qe,vt)|0,g=g+Math.imul(et,st)|0,s=(s=s+Math.imul(et,yt)|0)+Math.imul(Ke,st)|0,v=v+Math.imul(Ke,yt)|0,g=g+Math.imul(qe,mt)|0,s=(s=s+Math.imul(qe,wt)|0)+Math.imul(Ye,mt)|0,v=v+Math.imul(Ye,wt)|0,g=g+Math.imul(Re,ct)|0,s=(s=s+Math.imul(Re,ft)|0)+Math.imul(Ge,ct)|0,v=v+Math.imul(Ge,ft)|0,g=g+Math.imul(je,St)|0,s=(s=s+Math.imul(je,at)|0)+Math.imul(se,St)|0,v=v+Math.imul(se,at)|0,g=g+Math.imul(Te,dt)|0,s=(s=s+Math.imul(Te,Mt)|0)+Math.imul(Ie,dt)|0,v=v+Math.imul(Ie,Mt)|0;var ar=(w+(g=g+Math.imul(ke,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ke,Ct)|0)+Math.imul(Be,Tt)|0))<<13)|0;w=((v=v+Math.imul(Be,Ct)|0)+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,g=Math.imul(ve,ht),s=(s=Math.imul(ve,_t))+Math.imul(xe,ht)|0,v=Math.imul(xe,_t),g=g+Math.imul(le,gt)|0,s=(s=s+Math.imul(le,vt)|0)+Math.imul(J,gt)|0,v=v+Math.imul(J,vt)|0,g=g+Math.imul(ut,st)|0,s=(s=s+Math.imul(ut,yt)|0)+Math.imul(Qe,st)|0,v=v+Math.imul(Qe,yt)|0,g=g+Math.imul(et,mt)|0,s=(s=s+Math.imul(et,wt)|0)+Math.imul(Ke,mt)|0,v=v+Math.imul(Ke,wt)|0,g=g+Math.imul(qe,ct)|0,s=(s=s+Math.imul(qe,ft)|0)+Math.imul(Ye,ct)|0,v=v+Math.imul(Ye,ft)|0,g=g+Math.imul(Re,St)|0,s=(s=s+Math.imul(Re,at)|0)+Math.imul(Ge,St)|0,v=v+Math.imul(Ge,at)|0,g=g+Math.imul(je,dt)|0,s=(s=s+Math.imul(je,Mt)|0)+Math.imul(se,dt)|0,v=v+Math.imul(se,Mt)|0;var or=(w+(g=g+Math.imul(Te,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Te,Ct)|0)+Math.imul(Ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ie,Ct)|0)+(s>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ve,gt),s=(s=Math.imul(ve,vt))+Math.imul(xe,gt)|0,v=Math.imul(xe,vt),g=g+Math.imul(le,st)|0,s=(s=s+Math.imul(le,yt)|0)+Math.imul(J,st)|0,v=v+Math.imul(J,yt)|0,g=g+Math.imul(ut,mt)|0,s=(s=s+Math.imul(ut,wt)|0)+Math.imul(Qe,mt)|0,v=v+Math.imul(Qe,wt)|0,g=g+Math.imul(et,ct)|0,s=(s=s+Math.imul(et,ft)|0)+Math.imul(Ke,ct)|0,v=v+Math.imul(Ke,ft)|0,g=g+Math.imul(qe,St)|0,s=(s=s+Math.imul(qe,at)|0)+Math.imul(Ye,St)|0,v=v+Math.imul(Ye,at)|0,g=g+Math.imul(Re,dt)|0,s=(s=s+Math.imul(Re,Mt)|0)+Math.imul(Ge,dt)|0,v=v+Math.imul(Ge,Mt)|0;var Vi=(w+(g=g+Math.imul(je,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(je,Ct)|0)+Math.imul(se,Tt)|0))<<13)|0;w=((v=v+Math.imul(se,Ct)|0)+(s>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,g=Math.imul(ve,st),s=(s=Math.imul(ve,yt))+Math.imul(xe,st)|0,v=Math.imul(xe,yt),g=g+Math.imul(le,mt)|0,s=(s=s+Math.imul(le,wt)|0)+Math.imul(J,mt)|0,v=v+Math.imul(J,wt)|0,g=g+Math.imul(ut,ct)|0,s=(s=s+Math.imul(ut,ft)|0)+Math.imul(Qe,ct)|0,v=v+Math.imul(Qe,ft)|0,g=g+Math.imul(et,St)|0,s=(s=s+Math.imul(et,at)|0)+Math.imul(Ke,St)|0,v=v+Math.imul(Ke,at)|0,g=g+Math.imul(qe,dt)|0,s=(s=s+Math.imul(qe,Mt)|0)+Math.imul(Ye,dt)|0,v=v+Math.imul(Ye,Mt)|0;var $n=(w+(g=g+Math.imul(Re,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Re,Ct)|0)+Math.imul(Ge,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ge,Ct)|0)+(s>>>13)|0)+($n>>>26)|0,$n&=67108863,g=Math.imul(ve,mt),s=(s=Math.imul(ve,wt))+Math.imul(xe,mt)|0,v=Math.imul(xe,wt),g=g+Math.imul(le,ct)|0,s=(s=s+Math.imul(le,ft)|0)+Math.imul(J,ct)|0,v=v+Math.imul(J,ft)|0,g=g+Math.imul(ut,St)|0,s=(s=s+Math.imul(ut,at)|0)+Math.imul(Qe,St)|0,v=v+Math.imul(Qe,at)|0,g=g+Math.imul(et,dt)|0,s=(s=s+Math.imul(et,Mt)|0)+Math.imul(Ke,dt)|0,v=v+Math.imul(Ke,Mt)|0;var Ni=(w+(g=g+Math.imul(qe,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(qe,Ct)|0)+Math.imul(Ye,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ye,Ct)|0)+(s>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,g=Math.imul(ve,ct),s=(s=Math.imul(ve,ft))+Math.imul(xe,ct)|0,v=Math.imul(xe,ft),g=g+Math.imul(le,St)|0,s=(s=s+Math.imul(le,at)|0)+Math.imul(J,St)|0,v=v+Math.imul(J,at)|0,g=g+Math.imul(ut,dt)|0,s=(s=s+Math.imul(ut,Mt)|0)+Math.imul(Qe,dt)|0,v=v+Math.imul(Qe,Mt)|0;var Wn=(w+(g=g+Math.imul(et,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(et,Ct)|0)+Math.imul(Ke,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ke,Ct)|0)+(s>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,g=Math.imul(ve,St),s=(s=Math.imul(ve,at))+Math.imul(xe,St)|0,v=Math.imul(xe,at),g=g+Math.imul(le,dt)|0,s=(s=s+Math.imul(le,Mt)|0)+Math.imul(J,dt)|0,v=v+Math.imul(J,Mt)|0;var Ln=(w+(g=g+Math.imul(ut,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ut,Ct)|0)+Math.imul(Qe,Tt)|0))<<13)|0;w=((v=v+Math.imul(Qe,Ct)|0)+(s>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,g=Math.imul(ve,dt),s=(s=Math.imul(ve,Mt))+Math.imul(xe,dt)|0,v=Math.imul(xe,Mt);var vi=(w+(g=g+Math.imul(le,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(le,Ct)|0)+Math.imul(J,Tt)|0))<<13)|0;w=((v=v+Math.imul(J,Ct)|0)+(s>>>13)|0)+(vi>>>26)|0,vi&=67108863;var Un=(w+(g=Math.imul(ve,Tt))|0)+((8191&(s=(s=Math.imul(ve,Ct))+Math.imul(xe,Tt)|0))<<13)|0;return w=((v=Math.imul(xe,Ct))+(s>>>13)|0)+(Un>>>26)|0,Un&=67108863,b[0]=Fn,b[1]=Ri,b[2]=Oi,b[3]=zn,b[4]=jn,b[5]=tr,b[6]=ir,b[7]=nr,b[8]=rr,b[9]=qn,b[10]=ar,b[11]=or,b[12]=Vi,b[13]=$n,b[14]=Ni,b[15]=Wn,b[16]=Ln,b[17]=vi,b[18]=Un,0!==w&&(b[19]=w,f.length++),f};function X(y,o,l){return(new U).mulp(y,o,l)}function U(y,o){this.x=y,this.y=o}Math.imul||(N=B),p.prototype.mulTo=function(o,l){var f,u=this.length+o.length;return f=10===this.length&&10===o.length?N(this,o,l):u<63?B(this,o,l):u<1024?function z(y,o,l){l.negative=o.negative^y.negative,l.length=y.length+o.length;for(var f=0,u=0,h=0;h<l.length-1;h++){var b=u;u=0;for(var w=67108863&f,g=Math.min(h,o.length-1),s=Math.max(0,h-y.length+1);s<=g;s++){var ie=(0|y.words[h-s])*(0|o.words[s]),Se=67108863&ie;w=67108863&(Se=Se+w|0),u+=(b=(b=b+(ie/67108864|0)|0)+(Se>>>26)|0)>>>26,b&=67108863}l.words[h]=w,f=b,b=u}return 0!==f?l.words[h]=f:l.length--,l.strip()}(this,o,l):X(this,o,l),f},U.prototype.makeRBT=function(o){for(var l=new Array(o),f=p.prototype._countBits(o)-1,u=0;u<o;u++)l[u]=this.revBin(u,f,o);return l},U.prototype.revBin=function(o,l,f){if(0===o||o===f-1)return o;for(var u=0,h=0;h<l;h++)u|=(1&o)<<l-h-1,o>>=1;return u},U.prototype.permute=function(o,l,f,u,h,b){for(var w=0;w<b;w++)u[w]=l[o[w]],h[w]=f[o[w]]},U.prototype.transform=function(o,l,f,u,h,b){this.permute(b,o,l,f,u,h);for(var w=1;w<h;w<<=1)for(var g=w<<1,s=Math.cos(2*Math.PI/g),v=Math.sin(2*Math.PI/g),$=0;$<h;$+=g)for(var L=s,ie=v,Se=0;Se<w;Se++){var ke=f[$+Se],Be=u[$+Se],Pe=f[$+Se+w],Te=u[$+Se+w],Ie=L*Pe-ie*Te;Te=L*Te+ie*Pe,f[$+Se]=ke+(Pe=Ie),u[$+Se]=Be+Te,f[$+Se+w]=ke-Pe,u[$+Se+w]=Be-Te,Se!==g&&(Ie=s*L-v*ie,ie=s*ie+v*L,L=Ie)}},U.prototype.guessLen13b=function(o,l){var f=1|Math.max(l,o),u=1&f,h=0;for(f=f/2|0;f;f>>>=1)h++;return 1<<h+1+u},U.prototype.conjugate=function(o,l,f){if(!(f<=1))for(var u=0;u<f/2;u++){var h=o[u];o[u]=o[f-u-1],o[f-u-1]=h,h=l[u],l[u]=-l[f-u-1],l[f-u-1]=-h}},U.prototype.normalize13b=function(o,l){for(var f=0,u=0;u<l/2;u++){var h=8192*Math.round(o[2*u+1]/l)+Math.round(o[2*u]/l)+f;o[u]=67108863&h,f=h<67108864?0:h/67108864|0}return o},U.prototype.convert13b=function(o,l,f,u){for(var h=0,b=0;b<l;b++)f[2*b]=8191&(h+=0|o[b]),f[2*b+1]=8191&(h>>>=13),h>>>=13;for(b=2*l;b<u;++b)f[b]=0;I(0===h),I(0==(-8192&h))},U.prototype.stub=function(o){for(var l=new Array(o),f=0;f<o;f++)l[f]=0;return l},U.prototype.mulp=function(o,l,f){var u=2*this.guessLen13b(o.length,l.length),h=this.makeRBT(u),b=this.stub(u),w=new Array(u),g=new Array(u),s=new Array(u),v=new Array(u),$=new Array(u),L=new Array(u),ie=f.words;ie.length=u,this.convert13b(o.words,o.length,w,u),this.convert13b(l.words,l.length,v,u),this.transform(w,b,g,s,u,h),this.transform(v,b,$,L,u,h);for(var Se=0;Se<u;Se++){var ke=g[Se]*$[Se]-s[Se]*L[Se];s[Se]=g[Se]*L[Se]+s[Se]*$[Se],g[Se]=ke}return this.conjugate(g,s,u),this.transform(g,s,ie,b,u,h),this.conjugate(ie,b,u),this.normalize13b(ie,u),f.negative=o.negative^l.negative,f.length=o.length+l.length,f.strip()},p.prototype.mul=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},p.prototype.mulf=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),X(this,o,l)},p.prototype.imul=function(o){return this.clone().mulTo(o,this)},p.prototype.imuln=function(o){I("number"==typeof o),I(o<67108864);for(var l=0,f=0;f<this.length;f++){var u=(0|this.words[f])*o,h=(67108863&u)+(67108863&l);l>>=26,l+=u/67108864|0,l+=h>>>26,this.words[f]=67108863&h}return 0!==l&&(this.words[f]=l,this.length++),this},p.prototype.muln=function(o){return this.clone().imuln(o)},p.prototype.sqr=function(){return this.mul(this)},p.prototype.isqr=function(){return this.imul(this.clone())},p.prototype.pow=function(o){var l=function C(y){for(var o=new Array(y.bitLength()),l=0;l<o.length;l++){var u=l%26;o[l]=(y.words[l/26|0]&1<<u)>>>u}return o}(o);if(0===l.length)return new p(1);for(var f=this,u=0;u<l.length&&0===l[u];u++,f=f.sqr());if(++u<l.length)for(var h=f.sqr();u<l.length;u++,h=h.sqr())0!==l[u]&&(f=f.mul(h));return f},p.prototype.iushln=function(o){I("number"==typeof o&&o>=0);var h,l=o%26,f=(o-l)/26,u=67108863>>>26-l<<26-l;if(0!==l){var b=0;for(h=0;h<this.length;h++){var w=this.words[h]&u;this.words[h]=(0|this.words[h])-w<<l|b,b=w>>>26-l}b&&(this.words[h]=b,this.length++)}if(0!==f){for(h=this.length-1;h>=0;h--)this.words[h+f]=this.words[h];for(h=0;h<f;h++)this.words[h]=0;this.length+=f}return this.strip()},p.prototype.ishln=function(o){return I(0===this.negative),this.iushln(o)},p.prototype.iushrn=function(o,l,f){var u;I("number"==typeof o&&o>=0),u=l?(l-l%26)/26:0;var h=o%26,b=Math.min((o-h)/26,this.length),w=67108863^67108863>>>h<<h,g=f;if(u-=b,u=Math.max(0,u),g){for(var s=0;s<b;s++)g.words[s]=this.words[s];g.length=b}if(0!==b)if(this.length>b)for(this.length-=b,s=0;s<this.length;s++)this.words[s]=this.words[s+b];else this.words[0]=0,this.length=1;var v=0;for(s=this.length-1;s>=0&&(0!==v||s>=u);s--){var $=0|this.words[s];this.words[s]=v<<26-h|$>>>h,v=$&w}return g&&0!==v&&(g.words[g.length++]=v),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},p.prototype.ishrn=function(o,l,f){return I(0===this.negative),this.iushrn(o,l,f)},p.prototype.shln=function(o){return this.clone().ishln(o)},p.prototype.ushln=function(o){return this.clone().iushln(o)},p.prototype.shrn=function(o){return this.clone().ishrn(o)},p.prototype.ushrn=function(o){return this.clone().iushrn(o)},p.prototype.testn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return!(this.length<=f||!(this.words[f]&1<<l))},p.prototype.imaskn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return I(0===this.negative,"imaskn works only with positive numbers"),this.length<=f?this:(0!==l&&f++,this.length=Math.min(f,this.length),0!==l&&(this.words[this.length-1]&=67108863^67108863>>>l<<l),this.strip())},p.prototype.maskn=function(o){return this.clone().imaskn(o)},p.prototype.iaddn=function(o){return I("number"==typeof o),I(o<67108864),o<0?this.isubn(-o):0!==this.negative?1===this.length&&(0|this.words[0])<o?(this.words[0]=o-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},p.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},p.prototype.isubn=function(o){if(I("number"==typeof o),I(o<67108864),o<0)return this.iaddn(-o);if(0!==this.negative)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},p.prototype.addn=function(o){return this.clone().iaddn(o)},p.prototype.subn=function(o){return this.clone().isubn(o)},p.prototype.iabs=function(){return this.negative=0,this},p.prototype.abs=function(){return this.clone().iabs()},p.prototype._ishlnsubmul=function(o,l,f){var h;this._expand(o.length+f);var b,w=0;for(h=0;h<o.length;h++){b=(0|this.words[h+f])+w;var g=(0|o.words[h])*l;w=((b-=67108863&g)>>26)-(g/67108864|0),this.words[h+f]=67108863&b}for(;h<this.length-f;h++)w=(b=(0|this.words[h+f])+w)>>26,this.words[h+f]=67108863&b;if(0===w)return this.strip();for(I(-1===w),w=0,h=0;h<this.length;h++)w=(b=-(0|this.words[h])+w)>>26,this.words[h]=67108863&b;return this.negative=1,this.strip()},p.prototype._wordDiv=function(o,l){var f,u=this.clone(),h=o,b=0|h.words[h.length-1];0!=(f=26-this._countBits(b))&&(h=h.ushln(f),u.iushln(f),b=0|h.words[h.length-1]);var s,g=u.length-h.length;if("mod"!==l){(s=new p(null)).length=g+1,s.words=new Array(s.length);for(var v=0;v<s.length;v++)s.words[v]=0}var $=u.clone()._ishlnsubmul(h,1,g);0===$.negative&&(u=$,s&&(s.words[g]=1));for(var L=g-1;L>=0;L--){var ie=67108864*(0|u.words[h.length+L])+(0|u.words[h.length+L-1]);for(ie=Math.min(ie/b|0,67108863),u._ishlnsubmul(h,ie,L);0!==u.negative;)ie--,u.negative=0,u._ishlnsubmul(h,1,L),u.isZero()||(u.negative^=1);s&&(s.words[L]=ie)}return s&&s.strip(),u.strip(),"div"!==l&&0!==f&&u.iushrn(f),{div:s||null,mod:u}},p.prototype.divmod=function(o,l,f){return I(!o.isZero()),this.isZero()?{div:new p(0),mod:new p(0)}:0!==this.negative&&0===o.negative?(b=this.neg().divmod(o,l),"mod"!==l&&(u=b.div.neg()),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.iadd(o)),{div:u,mod:h}):0===this.negative&&0!==o.negative?(b=this.divmod(o.neg(),l),"mod"!==l&&(u=b.div.neg()),{div:u,mod:b.mod}):0!=(this.negative&o.negative)?(b=this.neg().divmod(o.neg(),l),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.isub(o)),{div:b.div,mod:h}):o.length>this.length||this.cmp(o)<0?{div:new p(0),mod:this}:1===o.length?"div"===l?{div:this.divn(o.words[0]),mod:null}:"mod"===l?{div:null,mod:new p(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new p(this.modn(o.words[0]))}:this._wordDiv(o,l);var u,h,b},p.prototype.div=function(o){return this.divmod(o,"div",!1).div},p.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},p.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},p.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var f=0!==l.div.negative?l.mod.isub(o):l.mod,u=o.ushrn(1),h=o.andln(1),b=f.cmp(u);return b<0||1===h&&0===b?l.div:0!==l.div.negative?l.div.isubn(1):l.div.iaddn(1)},p.prototype.modn=function(o){I(o<=67108863);for(var l=(1<<26)%o,f=0,u=this.length-1;u>=0;u--)f=(l*f+(0|this.words[u]))%o;return f},p.prototype.idivn=function(o){I(o<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var u=(0|this.words[f])+67108864*l;this.words[f]=u/o|0,l=u%o}return this.strip()},p.prototype.divn=function(o){return this.clone().idivn(o)},p.prototype.egcd=function(o){I(0===o.negative),I(!o.isZero());var l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=new p(0),w=new p(1),g=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++g;for(var s=f.clone(),v=l.clone();!l.isZero();){for(var $=0,L=1;0==(l.words[0]&L)&&$<26;++$,L<<=1);if($>0)for(l.iushrn($);$-- >0;)(u.isOdd()||h.isOdd())&&(u.iadd(s),h.isub(v)),u.iushrn(1),h.iushrn(1);for(var ie=0,Se=1;0==(f.words[0]&Se)&&ie<26;++ie,Se<<=1);if(ie>0)for(f.iushrn(ie);ie-- >0;)(b.isOdd()||w.isOdd())&&(b.iadd(s),w.isub(v)),b.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(b),h.isub(w)):(f.isub(l),b.isub(u),w.isub(h))}return{a:b,b:w,gcd:f.iushln(g)}},p.prototype._invmp=function(o){I(0===o.negative),I(!o.isZero());var $,l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,g=1;0==(l.words[0]&g)&&w<26;++w,g<<=1);if(w>0)for(l.iushrn(w);w-- >0;)u.isOdd()&&u.iadd(b),u.iushrn(1);for(var s=0,v=1;0==(f.words[0]&v)&&s<26;++s,v<<=1);if(s>0)for(f.iushrn(s);s-- >0;)h.isOdd()&&h.iadd(b),h.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(h)):(f.isub(l),h.isub(u))}return($=0===l.cmpn(1)?u:h).cmpn(0)<0&&$.iadd(o),$},p.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),f=o.clone();l.negative=0,f.negative=0;for(var u=0;l.isEven()&&f.isEven();u++)l.iushrn(1),f.iushrn(1);for(;;){for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var h=l.cmp(f);if(h<0){var b=l;l=f,f=b}else if(0===h||0===f.cmpn(1))break;l.isub(f)}return f.iushln(u)},p.prototype.invm=function(o){return this.egcd(o).a.umod(o)},p.prototype.isEven=function(){return 0==(1&this.words[0])},p.prototype.isOdd=function(){return 1==(1&this.words[0])},p.prototype.andln=function(o){return this.words[0]&o},p.prototype.bincn=function(o){I("number"==typeof o);var l=o%26,f=(o-l)/26,u=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=u,this;for(var h=u,b=f;0!==h&&b<this.length;b++){var w=0|this.words[b];h=(w+=h)>>>26,this.words[b]=w&=67108863}return 0!==h&&(this.words[b]=h,this.length++),this},p.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},p.prototype.cmpn=function(o){var f,l=o<0;if(0!==this.negative&&!l)return-1;if(0===this.negative&&l)return 1;if(this.strip(),this.length>1)f=1;else{l&&(o=-o),I(o<=67108863,"Number is too big");var u=0|this.words[0];f=u===o?0:u<o?-1:1}return 0!==this.negative?0|-f:f},p.prototype.cmp=function(o){if(0!==this.negative&&0===o.negative)return-1;if(0===this.negative&&0!==o.negative)return 1;var l=this.ucmp(o);return 0!==this.negative?0|-l:l},p.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var u=0|this.words[f],h=0|o.words[f];if(u!==h){u<h?l=-1:u>h&&(l=1);break}}return l},p.prototype.gtn=function(o){return 1===this.cmpn(o)},p.prototype.gt=function(o){return 1===this.cmp(o)},p.prototype.gten=function(o){return this.cmpn(o)>=0},p.prototype.gte=function(o){return this.cmp(o)>=0},p.prototype.ltn=function(o){return-1===this.cmpn(o)},p.prototype.lt=function(o){return-1===this.cmp(o)},p.prototype.lten=function(o){return this.cmpn(o)<=0},p.prototype.lte=function(o){return this.cmp(o)<=0},p.prototype.eqn=function(o){return 0===this.cmpn(o)},p.prototype.eq=function(o){return 0===this.cmp(o)},p.red=function(o){return new we(o)},p.prototype.toRed=function(o){return I(!this.red,"Already a number in reduction context"),I(0===this.negative,"red works only with positives"),o.convertTo(this)._forceRed(o)},p.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},p.prototype._forceRed=function(o){return this.red=o,this},p.prototype.forceRed=function(o){return I(!this.red,"Already a number in reduction context"),this._forceRed(o)},p.prototype.redAdd=function(o){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},p.prototype.redIAdd=function(o){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},p.prototype.redSub=function(o){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},p.prototype.redISub=function(o){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},p.prototype.redShl=function(o){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},p.prototype.redMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},p.prototype.redIMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},p.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},p.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},p.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},p.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},p.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},p.prototype.redPow=function(o){return I(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Z={k256:null,p224:null,p192:null,p25519:null};function ee(y,o){this.name=y,this.p=new p(o,16),this.n=this.p.bitLength(),this.k=new p(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function ae(){ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function ge(){ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Ce(){ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function De(){ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function we(y){if("string"==typeof y){var o=p._prime(y);this.m=o.p,this.prime=o}else I(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}function Oe(y){we.call(this,y),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new p(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ee.prototype._tmp=function(){var o=new p(null);return o.words=new Array(Math.ceil(this.n/13)),o},ee.prototype.ireduce=function(o){var f,l=o;do{this.split(l,this.tmp),f=(l=(l=this.imulK(l)).iadd(this.tmp)).bitLength()}while(f>this.n);var u=f<this.n?-1:l.ucmp(this.p);return 0===u?(l.words[0]=0,l.length=1):u>0?l.isub(this.p):void 0!==l.strip?l.strip():l._strip(),l},ee.prototype.split=function(o,l){o.iushrn(this.n,0,l)},ee.prototype.imulK=function(o){return o.imul(this.k)},G(ae,ee),ae.prototype.split=function(o,l){for(var f=4194303,u=Math.min(o.length,9),h=0;h<u;h++)l.words[h]=o.words[h];if(l.length=u,o.length<=9)return o.words[0]=0,void(o.length=1);var b=o.words[9];for(l.words[l.length++]=b&f,h=10;h<o.length;h++){var w=0|o.words[h];o.words[h-10]=(w&f)<<4|b>>>22,b=w}o.words[h-10]=b>>>=22,o.length-=0===b&&o.length>10?10:9},ae.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,f=0;f<o.length;f++){var u=0|o.words[f];o.words[f]=67108863&(l+=977*u),l=64*u+(l/67108864|0)}return 0===o.words[o.length-1]&&(o.length--,0===o.words[o.length-1]&&o.length--),o},G(ge,ee),G(Ce,ee),G(De,ee),De.prototype.imulK=function(o){for(var l=0,f=0;f<o.length;f++){var u=19*(0|o.words[f])+l,h=67108863&u;u>>>=26,o.words[f]=h,l=u}return 0!==l&&(o.words[o.length++]=l),o},p._prime=function(o){if(Z[o])return Z[o];var l;if("k256"===o)l=new ae;else if("p224"===o)l=new ge;else if("p192"===o)l=new Ce;else{if("p25519"!==o)throw new Error("Unknown prime "+o);l=new De}return Z[o]=l,l},we.prototype._verify1=function(o){I(0===o.negative,"red works only with positives"),I(o.red,"red works only with red numbers")},we.prototype._verify2=function(o,l){I(0==(o.negative|l.negative),"red works only with positives"),I(o.red&&o.red===l.red,"red works only with red numbers")},we.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},we.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},we.prototype.add=function(o,l){this._verify2(o,l);var f=o.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},we.prototype.iadd=function(o,l){this._verify2(o,l);var f=o.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},we.prototype.sub=function(o,l){this._verify2(o,l);var f=o.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},we.prototype.isub=function(o,l){this._verify2(o,l);var f=o.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},we.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},we.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},we.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},we.prototype.isqr=function(o){return this.imul(o,o.clone())},we.prototype.sqr=function(o){return this.mul(o,o)},we.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(I(l%2==1),3===l){var f=this.m.add(new p(1)).iushrn(2);return this.pow(o,f)}for(var u=this.m.subn(1),h=0;!u.isZero()&&0===u.andln(1);)h++,u.iushrn(1);I(!u.isZero());var b=new p(1).toRed(this),w=b.redNeg(),g=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new p(2*s*s).toRed(this);0!==this.pow(s,g).cmp(w);)s.redIAdd(w);for(var v=this.pow(s,u),$=this.pow(o,u.addn(1).iushrn(1)),L=this.pow(o,u),ie=h;0!==L.cmp(b);){for(var Se=L,ke=0;0!==Se.cmp(b);ke++)Se=Se.redSqr();I(ke<ie);var Be=this.pow(v,new p(1).iushln(ie-ke-1));$=$.redMul(Be),v=Be.redSqr(),L=L.redMul(v),ie=ke}return $},we.prototype.invm=function(o){var l=o._invmp(this.m);return 0!==l.negative?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},we.prototype.pow=function(o,l){if(l.isZero())return new p(1).toRed(this);if(0===l.cmpn(1))return o.clone();var u=new Array(16);u[0]=new p(1).toRed(this),u[1]=o;for(var h=2;h<u.length;h++)u[h]=this.mul(u[h-1],o);var b=u[0],w=0,g=0,s=l.bitLength()%26;for(0===s&&(s=26),h=l.length-1;h>=0;h--){for(var v=l.words[h],$=s-1;$>=0;$--){var L=v>>$&1;b!==u[0]&&(b=this.sqr(b)),0!==L||0!==w?(w<<=1,w|=L,(4==++g||0===h&&0===$)&&(b=this.mul(b,u[w]),g=0,w=0)):g=0}s=26}return b},we.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},we.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},p.mont=function(o){return new Oe(o)},G(Oe,we),Oe.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Oe.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},Oe.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var f=o.imul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new p(0)._forceRed(this);var f=o.mul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.invm=function(o){return this.imod(o._invmp(this.m).mul(this.r2))._forceRed(this)}}(ye=H.nmd(ye),this)},2391:ye=>{function ue(H,j){if(!H)throw new Error(j||"Assertion failed")}ye.exports=ue,ue.equal=function(j,W,I){if(j!=W)throw new Error(I||"Assertion failed: "+j+" != "+W)}},8195:(ye,ue)=>{"use strict";var H=ue;function W(G){return 1===G.length?"0"+G:G}function I(G){for(var p="",k=0;k<G.length;k++)p+=W(G[k].toString(16));return p}H.toArray=function j(G,p){if(Array.isArray(G))return G.slice();if(!G)return[];var k=[];if("string"!=typeof G){for(var P=0;P<G.length;P++)k[P]=0|G[P];return k}if("hex"===p)for((G=G.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(G="0"+G),P=0;P<G.length;P+=2)k.push(parseInt(G[P]+G[P+1],16));else for(P=0;P<G.length;P++){var E=G.charCodeAt(P),R=E>>8,x=255&E;R?k.push(R,x):k.push(x)}return k},H.zero2=W,H.toHex=I,H.encode=function(p,k){return"hex"===k?I(p):p}},2999:(ye,ue,H)=>{"use strict";var j=H(7977);ue.certificate=H(2390);var W=j.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});ue.RSAPrivateKey=W;var I=j.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});ue.RSAPublicKey=I;var G=j.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(p),this.key("subjectPublicKey").bitstr())});ue.PublicKey=G;var p=j.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),k=j.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(p),this.key("subjectPrivateKey").octstr())});ue.PrivateKey=k;var P=j.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});ue.EncryptedPrivateKey=P;var E=j.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});ue.DSAPrivateKey=E,ue.DSAparam=j.define("DSAparam",function(){this.int()});var R=j.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(x),this.key("publicKey").optional().explicit(1).bitstr())});ue.ECPrivateKey=R;var x=j.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});ue.signature=j.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},2390:(ye,ue,H)=>{"use strict";var j=H(7977),W=j.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),I=j.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),G=j.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),p=j.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(G),this.key("subjectPublicKey").bitstr())}),k=j.define("RelativeDistinguishedName",function(){this.setof(I)}),P=j.define("RDNSequence",function(){this.seqof(k)}),E=j.define("Name",function(){this.choice({rdnSequence:this.use(P)})}),R=j.define("Validity",function(){this.seq().obj(this.key("notBefore").use(W),this.key("notAfter").use(W))}),x=j.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),S=j.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(G),this.key("issuer").use(E),this.key("validity").use(R),this.key("subject").use(E),this.key("subjectPublicKeyInfo").use(p),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(x).optional())}),O=j.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(S),this.key("signatureAlgorithm").use(G),this.key("signatureValue").bitstr())});ye.exports=O},5269:(ye,ue,H)=>{var j=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,W=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,I=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,G=H(347),p=H(4330),k=H(3502).Buffer;ye.exports=function(P,E){var S,R=P.toString(),x=R.match(j);if(x){var C="aes"+x[1],B=k.from(x[2],"hex"),N=k.from(x[3].replace(/[\r\n]/g,""),"base64"),z=G(E,B.slice(0,8),parseInt(x[1],10)).key,X=[],U=p.createDecipheriv(C,z,B);X.push(U.update(N)),X.push(U.final()),S=k.concat(X)}else{var O=R.match(I);S=k.from(O[2].replace(/[\r\n]/g,""),"base64")}return{tag:R.match(W)[1],data:S}}},2772:(ye,ue,H)=>{var j=H(2999),W=H(2562),I=H(5269),G=H(4330),p=H(9357),k=H(3502).Buffer;function P(R){var x;"object"==typeof R&&!k.isBuffer(R)&&(x=R.passphrase,R=R.key),"string"==typeof R&&(R=k.from(R));var B,N,S=I(R,x),O=S.tag,C=S.data;switch(O){case"CERTIFICATE":N=j.certificate.decode(C,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(N||(N=j.PublicKey.decode(C,"der")),B=N.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return j.RSAPublicKey.decode(N.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return N.subjectPrivateKey=N.subjectPublicKey,{type:"ec",data:N};case"1.2.840.10040.4.1":return N.algorithm.params.pub_key=j.DSAparam.decode(N.subjectPublicKey.data,"der"),{type:"dsa",data:N.algorithm.params};default:throw new Error("unknown key id "+B)}case"ENCRYPTED PRIVATE KEY":C=function E(R,x){var S=R.algorithm.decrypt.kde.kdeparams.salt,O=parseInt(R.algorithm.decrypt.kde.kdeparams.iters.toString(),10),C=W[R.algorithm.decrypt.cipher.algo.join(".")],B=R.algorithm.decrypt.cipher.iv,N=R.subjectPrivateKey,z=parseInt(C.split("-")[1],10)/8,X=p.pbkdf2Sync(x,S,O,z,"sha1"),U=G.createDecipheriv(C,X,B),Z=[];return Z.push(U.update(N)),Z.push(U.final()),k.concat(Z)}(C=j.EncryptedPrivateKey.decode(C,"der"),x);case"PRIVATE KEY":switch(B=(N=j.PrivateKey.decode(C,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return j.RSAPrivateKey.decode(N.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:N.algorithm.curve,privateKey:j.ECPrivateKey.decode(N.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return N.algorithm.params.priv_key=j.DSAparam.decode(N.subjectPrivateKey,"der"),{type:"dsa",params:N.algorithm.params};default:throw new Error("unknown key id "+B)}case"RSA PUBLIC KEY":return j.RSAPublicKey.decode(C,"der");case"RSA PRIVATE KEY":return j.RSAPrivateKey.decode(C,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:j.DSAPrivateKey.decode(C,"der")};case"EC PRIVATE KEY":return{curve:(C=j.ECPrivateKey.decode(C,"der")).parameters.value,privateKey:C.privateKey};default:throw new Error("unknown key type "+O)}}ye.exports=P,P.signature=j.signature},9357:(ye,ue,H)=>{ue.pbkdf2=H(415),ue.pbkdf2Sync=H(7472)},415:(ye,ue,H)=>{var k,S,j=H(3502).Buffer,W=H(2697),I=H(8867),G=H(7472),p=H(4566),P=global.crypto&&global.crypto.subtle,E={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},R=[];function O(){return S||(S=global.process&&global.process.nextTick?global.process.nextTick:global.queueMicrotask?global.queueMicrotask:global.setImmediate?global.setImmediate:global.setTimeout)}function C(N,z,X,U,Z){return P.importKey("raw",N,{name:"PBKDF2"},!1,["deriveBits"]).then(function(ee){return P.deriveBits({name:"PBKDF2",salt:z,iterations:X,hash:{name:Z}},ee,U<<3)}).then(function(ee){return j.from(ee)})}ye.exports=function(N,z,X,U,Z,ee){"function"==typeof Z&&(ee=Z,Z=void 0);var ae=E[(Z=Z||"sha1").toLowerCase()];if(ae&&"function"==typeof global.Promise){if(W(X,U),N=p(N,I,"Password"),z=p(z,I,"Salt"),"function"!=typeof ee)throw new Error("No callback provided to pbkdf2");!function B(N,z){N.then(function(X){O()(function(){z(null,X)})},function(X){O()(function(){z(X)})})}(function x(N){if(global.process&&!global.process.browser||!P||!P.importKey||!P.deriveBits)return Promise.resolve(!1);if(void 0!==R[N])return R[N];var z=C(k=k||j.alloc(8),k,10,128,N).then(function(){return!0}).catch(function(){return!1});return R[N]=z,z}(ae).then(function(ge){return ge?C(N,z,X,U,ae):G(N,z,X,U,Z)}),ee)}else O()(function(){var ge;try{ge=G(N,z,X,U,Z)}catch(Ce){return ee(Ce)}ee(null,ge)})}},8867:ye=>{var ue;ue=global.process&&global.process.browser?"utf-8":global.process&&global.process.version?parseInt(process.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",ye.exports=ue},2697:ye=>{var ue=Math.pow(2,30)-1;ye.exports=function(H,j){if("number"!=typeof H)throw new TypeError("Iterations not a number");if(H<0)throw new TypeError("Bad iterations");if("number"!=typeof j)throw new TypeError("Key length not a number");if(j<0||j>ue||j!=j)throw new TypeError("Bad key length")}},7472:(ye,ue,H)=>{var j=H(5640),W=H(5634),I=H(5244),G=H(3502).Buffer,p=H(2697),k=H(8867),P=H(4566),E=G.alloc(128),R={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function x(C,B,N){var z=function S(C){return"rmd160"===C||"ripemd160"===C?function N(z){return(new W).update(z).digest()}:"md5"===C?j:function B(z){return I(C).update(z).digest()}}(C),X="sha512"===C||"sha384"===C?128:64;B.length>X?B=z(B):B.length<X&&(B=G.concat([B,E],X));for(var U=G.allocUnsafe(X+R[C]),Z=G.allocUnsafe(X+R[C]),ee=0;ee<X;ee++)U[ee]=54^B[ee],Z[ee]=92^B[ee];var ae=G.allocUnsafe(X+N+4);U.copy(ae,0,0,X),this.ipad1=ae,this.ipad2=U,this.opad=Z,this.alg=C,this.blocksize=X,this.hash=z,this.size=R[C]}x.prototype.run=function(C,B){return C.copy(B,this.blocksize),this.hash(B).copy(this.opad,this.blocksize),this.hash(this.opad)},ye.exports=function O(C,B,N,z,X){p(N,z);var U=new x(X=X||"sha1",C=P(C,k,"Password"),(B=P(B,k,"Salt")).length),Z=G.allocUnsafe(z),ee=G.allocUnsafe(B.length+4);B.copy(ee,0,0,B.length);for(var ae=0,ge=R[X],Ce=Math.ceil(z/ge),De=1;De<=Ce;De++){ee.writeUInt32BE(De,B.length);for(var we=U.run(ee,U.ipad1),Oe=we,y=1;y<N;y++){Oe=U.run(Oe,U.ipad2);for(var o=0;o<ge;o++)we[o]^=Oe[o]}we.copy(Z,ae),ae+=ge}return Z}},4566:(ye,ue,H)=>{var j=H(3502).Buffer;ye.exports=function(W,I,G){if(j.isBuffer(W))return W;if("string"==typeof W)return j.from(W,I);if(ArrayBuffer.isView(W))return j.from(W.buffer);throw new TypeError(G+" must be a string, a Buffer, a typed array or a DataView")}},3701:(ye,ue,H)=>{ue.publicEncrypt=H(6562),ue.privateDecrypt=H(6705),ue.privateEncrypt=function(W,I){return ue.publicEncrypt(W,I,!0)},ue.publicDecrypt=function(W,I){return ue.privateDecrypt(W,I,!0)}},6945:(ye,ue,H)=>{var j=H(6386),W=H(3502).Buffer;function I(G){var p=W.allocUnsafe(4);return p.writeUInt32BE(G,0),p}ye.exports=function(G,p){for(var E,k=W.alloc(0),P=0;k.length<p;)E=I(P++),k=W.concat([k,j("sha1").update(G).update(E).digest()]);return k.slice(0,p)}},2057:function(ye,ue,H){!function(j,W){"use strict";function I(y,o){if(!y)throw new Error(o||"Assertion failed")}function G(y,o){y.super_=o;var l=function(){};l.prototype=o.prototype,y.prototype=new l,y.prototype.constructor=y}function p(y,o,l){if(p.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,null!==y&&(("le"===o||"be"===o)&&(l=o,o=10),this._init(y||0,o||10,l||"be"))}var k;"object"==typeof j?j.exports=p:W.BN=p,p.BN=p,p.wordSize=26;try{k="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:H(7108).Buffer}catch(y){}function P(y,o){var l=y.charCodeAt(o);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function E(y,o,l){var f=P(y,l);return l-1>=o&&(f|=P(y,l-1)<<4),f}function R(y,o,l,f){for(var u=0,h=Math.min(y.length,l),b=o;b<h;b++){var w=y.charCodeAt(b)-48;u*=f,u+=w>=49?w-49+10:w>=17?w-17+10:w}return u}p.isBN=function(o){return o instanceof p||null!==o&&"object"==typeof o&&o.constructor.wordSize===p.wordSize&&Array.isArray(o.words)},p.max=function(o,l){return o.cmp(l)>0?o:l},p.min=function(o,l){return o.cmp(l)<0?o:l},p.prototype._init=function(o,l,f){if("number"==typeof o)return this._initNumber(o,l,f);if("object"==typeof o)return this._initArray(o,l,f);"hex"===l&&(l=16),I(l===(0|l)&&l>=2&&l<=36);var u=0;"-"===(o=o.toString().replace(/\s+/g,""))[0]&&(u++,this.negative=1),u<o.length&&(16===l?this._parseHex(o,u,f):(this._parseBase(o,l,u),"le"===f&&this._initArray(this.toArray(),l,f)))},p.prototype._initNumber=function(o,l,f){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[67108863&o],this.length=1):o<4503599627370496?(this.words=[67108863&o,o/67108864&67108863],this.length=2):(I(o<9007199254740992),this.words=[67108863&o,o/67108864&67108863,1],this.length=3),"le"===f&&this._initArray(this.toArray(),l,f)},p.prototype._initArray=function(o,l,f){if(I("number"==typeof o.length),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var h,b,w=0;if("be"===f)for(u=o.length-1,h=0;u>=0;u-=3)this.words[h]|=(b=o[u]|o[u-1]<<8|o[u-2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);else if("le"===f)for(u=0,h=0;u<o.length;u+=3)this.words[h]|=(b=o[u]|o[u+1]<<8|o[u+2]<<16)<<w&67108863,this.words[h+1]=b>>>26-w&67108863,(w+=24)>=26&&(w-=26,h++);return this.strip()},p.prototype._parseHex=function(o,l,f){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var w,h=0,b=0;if("be"===f)for(u=o.length-1;u>=l;u-=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;else for(u=(o.length-l)%2==0?l+1:l;u<o.length;u+=2)w=E(o,l,u)<<h,this.words[b]|=67108863&w,h>=18?(h-=18,this.words[b+=1]|=w>>>26):h+=8;this.strip()},p.prototype._parseBase=function(o,l,f){this.words=[0],this.length=1;for(var u=0,h=1;h<=67108863;h*=l)u++;u--,h=h/l|0;for(var b=o.length-f,w=b%u,g=Math.min(b,b-w)+f,s=0,v=f;v<g;v+=u)s=R(o,v,v+u,l),this.imuln(h),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==w){var $=1;for(s=R(o,v,o.length,l),v=0;v<w;v++)$*=l;this.imuln($),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},p.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red},p.prototype.clone=function(){var o=new p(null);return this.copy(o),o},p.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},p.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},p.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},p.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function B(y,o,l){l.negative=o.negative^y.negative;var f=y.length+o.length|0;l.length=f,f=f-1|0;var u=0|y.words[0],h=0|o.words[0],b=u*h,g=b/67108864|0;l.words[0]=67108863&b;for(var s=1;s<f;s++){for(var v=g>>>26,$=67108863&g,L=Math.min(s,o.length-1),ie=Math.max(0,s-y.length+1);ie<=L;ie++)v+=(b=(u=0|y.words[s-ie|0])*(h=0|o.words[ie])+$)/67108864|0,$=67108863&b;l.words[s]=0|$,g=0|v}return 0!==g?l.words[s]=0|g:l.length--,l.strip()}p.prototype.toString=function(o,l){var f;if(l=0|l||1,16===(o=o||10)||"hex"===o){f="";for(var u=0,h=0,b=0;b<this.length;b++){var w=this.words[b],g=(16777215&(w<<u|h)).toString(16);f=0!=(h=w>>>24-u&16777215)||b!==this.length-1?x[6-g.length]+g+f:g+f,(u+=2)>=26&&(u-=26,b--)}for(0!==h&&(f=h.toString(16)+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}if(o===(0|o)&&o>=2&&o<=36){var s=S[o],v=O[o];f="";var $=this.clone();for($.negative=0;!$.isZero();){var L=$.modn(v).toString(o);f=($=$.idivn(v)).isZero()?L+f:x[s-L.length]+L+f}for(this.isZero()&&(f="0"+f);f.length%l!=0;)f="0"+f;return 0!==this.negative&&(f="-"+f),f}I(!1,"Base should be between 2 and 36")},p.prototype.toNumber=function(){var o=this.words[0];return 2===this.length?o+=67108864*this.words[1]:3===this.length&&1===this.words[2]?o+=4503599627370496+67108864*this.words[1]:this.length>2&&I(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-o:o},p.prototype.toJSON=function(){return this.toString(16)},p.prototype.toBuffer=function(o,l){return I(void 0!==k),this.toArrayLike(k,o,l)},p.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)},p.prototype.toArrayLike=function(o,l,f){var u=this.byteLength(),h=f||Math.max(1,u);I(u<=h,"byte array longer than desired length"),I(h>0,"Requested array length <= 0"),this.strip();var g,s,b="le"===l,w=new o(h),v=this.clone();if(b){for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[s]=g;for(;s<h;s++)w[s]=0}else{for(s=0;s<h-u;s++)w[s]=0;for(s=0;!v.isZero();s++)g=v.andln(255),v.iushrn(8),w[h-s-1]=g}return w},p.prototype._countBits=Math.clz32?function(o){return 32-Math.clz32(o)}:function(o){var l=o,f=0;return l>=4096&&(f+=13,l>>>=13),l>=64&&(f+=7,l>>>=7),l>=8&&(f+=4,l>>>=4),l>=2&&(f+=2,l>>>=2),f+l},p.prototype._zeroBits=function(o){if(0===o)return 26;var l=o,f=0;return 0==(8191&l)&&(f+=13,l>>>=13),0==(127&l)&&(f+=7,l>>>=7),0==(15&l)&&(f+=4,l>>>=4),0==(3&l)&&(f+=2,l>>>=2),0==(1&l)&&f++,f},p.prototype.bitLength=function(){var l=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+l},p.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var f=this._zeroBits(this.words[l]);if(o+=f,26!==f)break}return o},p.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},p.prototype.toTwos=function(o){return 0!==this.negative?this.abs().inotn(o).iaddn(1):this.clone()},p.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},p.prototype.isNeg=function(){return 0!==this.negative},p.prototype.neg=function(){return this.clone().ineg()},p.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},p.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this.strip()},p.prototype.ior=function(o){return I(0==(this.negative|o.negative)),this.iuor(o)},p.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},p.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},p.prototype.iuand=function(o){var l;l=this.length>o.length?o:this;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]&o.words[f];return this.length=l.length,this.strip()},p.prototype.iand=function(o){return I(0==(this.negative|o.negative)),this.iuand(o)},p.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},p.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},p.prototype.iuxor=function(o){var l,f;this.length>o.length?(l=this,f=o):(l=o,f=this);for(var u=0;u<f.length;u++)this.words[u]=l.words[u]^f.words[u];if(this!==l)for(;u<l.length;u++)this.words[u]=l.words[u];return this.length=l.length,this.strip()},p.prototype.ixor=function(o){return I(0==(this.negative|o.negative)),this.iuxor(o)},p.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},p.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},p.prototype.inotn=function(o){I("number"==typeof o&&o>=0);var l=0|Math.ceil(o/26),f=o%26;this._expand(l),f>0&&l--;for(var u=0;u<l;u++)this.words[u]=67108863&~this.words[u];return f>0&&(this.words[u]=~this.words[u]&67108863>>26-f),this.strip()},p.prototype.notn=function(o){return this.clone().inotn(o)},p.prototype.setn=function(o,l){I("number"==typeof o&&o>=0);var f=o/26|0,u=o%26;return this._expand(f+1),this.words[f]=l?this.words[f]|1<<u:this.words[f]&~(1<<u),this.strip()},p.prototype.iadd=function(o){var l,f,u;if(0!==this.negative&&0===o.negative)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(0===this.negative&&0!==o.negative)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();this.length>o.length?(f=this,u=o):(f=o,u=this);for(var h=0,b=0;b<u.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+(0|u.words[b])+h),h=l>>>26;for(;0!==h&&b<f.length;b++)this.words[b]=67108863&(l=(0|f.words[b])+h),h=l>>>26;if(this.length=f.length,0!==h)this.words[this.length]=h,this.length++;else if(f!==this)for(;b<f.length;b++)this.words[b]=f.words[b];return this},p.prototype.add=function(o){var l;return 0!==o.negative&&0===this.negative?(o.negative=0,l=this.sub(o),o.negative^=1,l):0===o.negative&&0!==this.negative?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},p.prototype.isub=function(o){if(0!==o.negative){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var u,h,f=this.cmp(o);if(0===f)return this.negative=0,this.length=1,this.words[0]=0,this;f>0?(u=this,h=o):(u=o,h=this);for(var b=0,w=0;w<h.length;w++)b=(l=(0|u.words[w])-(0|h.words[w])+b)>>26,this.words[w]=67108863&l;for(;0!==b&&w<u.length;w++)b=(l=(0|u.words[w])+b)>>26,this.words[w]=67108863&l;if(0===b&&w<u.length&&u!==this)for(;w<u.length;w++)this.words[w]=u.words[w];return this.length=Math.max(this.length,w),u!==this&&(this.negative=1),this.strip()},p.prototype.sub=function(o){return this.clone().isub(o)};var N=function(o,l,f){var g,s,v,u=o.words,h=l.words,b=f.words,w=0,$=0|u[0],L=8191&$,ie=$>>>13,Se=0|u[1],ke=8191&Se,Be=Se>>>13,Pe=0|u[2],Te=8191&Pe,Ie=Pe>>>13,Vt=0|u[3],je=8191&Vt,se=Vt>>>13,Ee=0|u[4],Re=8191&Ee,Ge=Ee>>>13,ui=0|u[5],qe=8191&ui,Ye=ui>>>13,xi=0|u[6],et=8191&xi,Ke=xi>>>13,qi=0|u[7],ut=8191&qi,Qe=qi>>>13,rn=0|u[8],le=8191&rn,J=rn>>>13,re=0|u[9],ve=8191&re,xe=re>>>13,ot=0|h[0],Ne=8191&ot,Xe=ot>>>13,Pi=0|h[1],it=8191&Pi,rt=Pi>>>13,bi=0|h[2],ht=8191&bi,_t=bi>>>13,Sr=0|h[3],gt=8191&Sr,vt=Sr>>>13,Dr=0|h[4],st=8191&Dr,yt=Dr>>>13,Ir=0|h[5],mt=8191&Ir,wt=Ir>>>13,Cr=0|h[6],ct=8191&Cr,ft=Cr>>>13,An=0|h[7],St=8191&An,at=An>>>13,Tr=0|h[8],dt=8191&Tr,Mt=Tr>>>13,$r=0|h[9],Tt=8191&$r,Ct=$r>>>13;f.negative=o.negative^l.negative,f.length=19;var Fn=(w+(g=Math.imul(L,Ne))|0)+((8191&(s=(s=Math.imul(L,Xe))+Math.imul(ie,Ne)|0))<<13)|0;w=((v=Math.imul(ie,Xe))+(s>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,g=Math.imul(ke,Ne),s=(s=Math.imul(ke,Xe))+Math.imul(Be,Ne)|0,v=Math.imul(Be,Xe);var Ri=(w+(g=g+Math.imul(L,it)|0)|0)+((8191&(s=(s=s+Math.imul(L,rt)|0)+Math.imul(ie,it)|0))<<13)|0;w=((v=v+Math.imul(ie,rt)|0)+(s>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,g=Math.imul(Te,Ne),s=(s=Math.imul(Te,Xe))+Math.imul(Ie,Ne)|0,v=Math.imul(Ie,Xe),g=g+Math.imul(ke,it)|0,s=(s=s+Math.imul(ke,rt)|0)+Math.imul(Be,it)|0,v=v+Math.imul(Be,rt)|0;var Oi=(w+(g=g+Math.imul(L,ht)|0)|0)+((8191&(s=(s=s+Math.imul(L,_t)|0)+Math.imul(ie,ht)|0))<<13)|0;w=((v=v+Math.imul(ie,_t)|0)+(s>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,g=Math.imul(je,Ne),s=(s=Math.imul(je,Xe))+Math.imul(se,Ne)|0,v=Math.imul(se,Xe),g=g+Math.imul(Te,it)|0,s=(s=s+Math.imul(Te,rt)|0)+Math.imul(Ie,it)|0,v=v+Math.imul(Ie,rt)|0,g=g+Math.imul(ke,ht)|0,s=(s=s+Math.imul(ke,_t)|0)+Math.imul(Be,ht)|0,v=v+Math.imul(Be,_t)|0;var zn=(w+(g=g+Math.imul(L,gt)|0)|0)+((8191&(s=(s=s+Math.imul(L,vt)|0)+Math.imul(ie,gt)|0))<<13)|0;w=((v=v+Math.imul(ie,vt)|0)+(s>>>13)|0)+(zn>>>26)|0,zn&=67108863,g=Math.imul(Re,Ne),s=(s=Math.imul(Re,Xe))+Math.imul(Ge,Ne)|0,v=Math.imul(Ge,Xe),g=g+Math.imul(je,it)|0,s=(s=s+Math.imul(je,rt)|0)+Math.imul(se,it)|0,v=v+Math.imul(se,rt)|0,g=g+Math.imul(Te,ht)|0,s=(s=s+Math.imul(Te,_t)|0)+Math.imul(Ie,ht)|0,v=v+Math.imul(Ie,_t)|0,g=g+Math.imul(ke,gt)|0,s=(s=s+Math.imul(ke,vt)|0)+Math.imul(Be,gt)|0,v=v+Math.imul(Be,vt)|0;var jn=(w+(g=g+Math.imul(L,st)|0)|0)+((8191&(s=(s=s+Math.imul(L,yt)|0)+Math.imul(ie,st)|0))<<13)|0;w=((v=v+Math.imul(ie,yt)|0)+(s>>>13)|0)+(jn>>>26)|0,jn&=67108863,g=Math.imul(qe,Ne),s=(s=Math.imul(qe,Xe))+Math.imul(Ye,Ne)|0,v=Math.imul(Ye,Xe),g=g+Math.imul(Re,it)|0,s=(s=s+Math.imul(Re,rt)|0)+Math.imul(Ge,it)|0,v=v+Math.imul(Ge,rt)|0,g=g+Math.imul(je,ht)|0,s=(s=s+Math.imul(je,_t)|0)+Math.imul(se,ht)|0,v=v+Math.imul(se,_t)|0,g=g+Math.imul(Te,gt)|0,s=(s=s+Math.imul(Te,vt)|0)+Math.imul(Ie,gt)|0,v=v+Math.imul(Ie,vt)|0,g=g+Math.imul(ke,st)|0,s=(s=s+Math.imul(ke,yt)|0)+Math.imul(Be,st)|0,v=v+Math.imul(Be,yt)|0;var tr=(w+(g=g+Math.imul(L,mt)|0)|0)+((8191&(s=(s=s+Math.imul(L,wt)|0)+Math.imul(ie,mt)|0))<<13)|0;w=((v=v+Math.imul(ie,wt)|0)+(s>>>13)|0)+(tr>>>26)|0,tr&=67108863,g=Math.imul(et,Ne),s=(s=Math.imul(et,Xe))+Math.imul(Ke,Ne)|0,v=Math.imul(Ke,Xe),g=g+Math.imul(qe,it)|0,s=(s=s+Math.imul(qe,rt)|0)+Math.imul(Ye,it)|0,v=v+Math.imul(Ye,rt)|0,g=g+Math.imul(Re,ht)|0,s=(s=s+Math.imul(Re,_t)|0)+Math.imul(Ge,ht)|0,v=v+Math.imul(Ge,_t)|0,g=g+Math.imul(je,gt)|0,s=(s=s+Math.imul(je,vt)|0)+Math.imul(se,gt)|0,v=v+Math.imul(se,vt)|0,g=g+Math.imul(Te,st)|0,s=(s=s+Math.imul(Te,yt)|0)+Math.imul(Ie,st)|0,v=v+Math.imul(Ie,yt)|0,g=g+Math.imul(ke,mt)|0,s=(s=s+Math.imul(ke,wt)|0)+Math.imul(Be,mt)|0,v=v+Math.imul(Be,wt)|0;var ir=(w+(g=g+Math.imul(L,ct)|0)|0)+((8191&(s=(s=s+Math.imul(L,ft)|0)+Math.imul(ie,ct)|0))<<13)|0;w=((v=v+Math.imul(ie,ft)|0)+(s>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(ut,Ne),s=(s=Math.imul(ut,Xe))+Math.imul(Qe,Ne)|0,v=Math.imul(Qe,Xe),g=g+Math.imul(et,it)|0,s=(s=s+Math.imul(et,rt)|0)+Math.imul(Ke,it)|0,v=v+Math.imul(Ke,rt)|0,g=g+Math.imul(qe,ht)|0,s=(s=s+Math.imul(qe,_t)|0)+Math.imul(Ye,ht)|0,v=v+Math.imul(Ye,_t)|0,g=g+Math.imul(Re,gt)|0,s=(s=s+Math.imul(Re,vt)|0)+Math.imul(Ge,gt)|0,v=v+Math.imul(Ge,vt)|0,g=g+Math.imul(je,st)|0,s=(s=s+Math.imul(je,yt)|0)+Math.imul(se,st)|0,v=v+Math.imul(se,yt)|0,g=g+Math.imul(Te,mt)|0,s=(s=s+Math.imul(Te,wt)|0)+Math.imul(Ie,mt)|0,v=v+Math.imul(Ie,wt)|0,g=g+Math.imul(ke,ct)|0,s=(s=s+Math.imul(ke,ft)|0)+Math.imul(Be,ct)|0,v=v+Math.imul(Be,ft)|0;var nr=(w+(g=g+Math.imul(L,St)|0)|0)+((8191&(s=(s=s+Math.imul(L,at)|0)+Math.imul(ie,St)|0))<<13)|0;w=((v=v+Math.imul(ie,at)|0)+(s>>>13)|0)+(nr>>>26)|0,nr&=67108863,g=Math.imul(le,Ne),s=(s=Math.imul(le,Xe))+Math.imul(J,Ne)|0,v=Math.imul(J,Xe),g=g+Math.imul(ut,it)|0,s=(s=s+Math.imul(ut,rt)|0)+Math.imul(Qe,it)|0,v=v+Math.imul(Qe,rt)|0,g=g+Math.imul(et,ht)|0,s=(s=s+Math.imul(et,_t)|0)+Math.imul(Ke,ht)|0,v=v+Math.imul(Ke,_t)|0,g=g+Math.imul(qe,gt)|0,s=(s=s+Math.imul(qe,vt)|0)+Math.imul(Ye,gt)|0,v=v+Math.imul(Ye,vt)|0,g=g+Math.imul(Re,st)|0,s=(s=s+Math.imul(Re,yt)|0)+Math.imul(Ge,st)|0,v=v+Math.imul(Ge,yt)|0,g=g+Math.imul(je,mt)|0,s=(s=s+Math.imul(je,wt)|0)+Math.imul(se,mt)|0,v=v+Math.imul(se,wt)|0,g=g+Math.imul(Te,ct)|0,s=(s=s+Math.imul(Te,ft)|0)+Math.imul(Ie,ct)|0,v=v+Math.imul(Ie,ft)|0,g=g+Math.imul(ke,St)|0,s=(s=s+Math.imul(ke,at)|0)+Math.imul(Be,St)|0,v=v+Math.imul(Be,at)|0;var rr=(w+(g=g+Math.imul(L,dt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Mt)|0)+Math.imul(ie,dt)|0))<<13)|0;w=((v=v+Math.imul(ie,Mt)|0)+(s>>>13)|0)+(rr>>>26)|0,rr&=67108863,g=Math.imul(ve,Ne),s=(s=Math.imul(ve,Xe))+Math.imul(xe,Ne)|0,v=Math.imul(xe,Xe),g=g+Math.imul(le,it)|0,s=(s=s+Math.imul(le,rt)|0)+Math.imul(J,it)|0,v=v+Math.imul(J,rt)|0,g=g+Math.imul(ut,ht)|0,s=(s=s+Math.imul(ut,_t)|0)+Math.imul(Qe,ht)|0,v=v+Math.imul(Qe,_t)|0,g=g+Math.imul(et,gt)|0,s=(s=s+Math.imul(et,vt)|0)+Math.imul(Ke,gt)|0,v=v+Math.imul(Ke,vt)|0,g=g+Math.imul(qe,st)|0,s=(s=s+Math.imul(qe,yt)|0)+Math.imul(Ye,st)|0,v=v+Math.imul(Ye,yt)|0,g=g+Math.imul(Re,mt)|0,s=(s=s+Math.imul(Re,wt)|0)+Math.imul(Ge,mt)|0,v=v+Math.imul(Ge,wt)|0,g=g+Math.imul(je,ct)|0,s=(s=s+Math.imul(je,ft)|0)+Math.imul(se,ct)|0,v=v+Math.imul(se,ft)|0,g=g+Math.imul(Te,St)|0,s=(s=s+Math.imul(Te,at)|0)+Math.imul(Ie,St)|0,v=v+Math.imul(Ie,at)|0,g=g+Math.imul(ke,dt)|0,s=(s=s+Math.imul(ke,Mt)|0)+Math.imul(Be,dt)|0,v=v+Math.imul(Be,Mt)|0;var qn=(w+(g=g+Math.imul(L,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(L,Ct)|0)+Math.imul(ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(ie,Ct)|0)+(s>>>13)|0)+(qn>>>26)|0,qn&=67108863,g=Math.imul(ve,it),s=(s=Math.imul(ve,rt))+Math.imul(xe,it)|0,v=Math.imul(xe,rt),g=g+Math.imul(le,ht)|0,s=(s=s+Math.imul(le,_t)|0)+Math.imul(J,ht)|0,v=v+Math.imul(J,_t)|0,g=g+Math.imul(ut,gt)|0,s=(s=s+Math.imul(ut,vt)|0)+Math.imul(Qe,gt)|0,v=v+Math.imul(Qe,vt)|0,g=g+Math.imul(et,st)|0,s=(s=s+Math.imul(et,yt)|0)+Math.imul(Ke,st)|0,v=v+Math.imul(Ke,yt)|0,g=g+Math.imul(qe,mt)|0,s=(s=s+Math.imul(qe,wt)|0)+Math.imul(Ye,mt)|0,v=v+Math.imul(Ye,wt)|0,g=g+Math.imul(Re,ct)|0,s=(s=s+Math.imul(Re,ft)|0)+Math.imul(Ge,ct)|0,v=v+Math.imul(Ge,ft)|0,g=g+Math.imul(je,St)|0,s=(s=s+Math.imul(je,at)|0)+Math.imul(se,St)|0,v=v+Math.imul(se,at)|0,g=g+Math.imul(Te,dt)|0,s=(s=s+Math.imul(Te,Mt)|0)+Math.imul(Ie,dt)|0,v=v+Math.imul(Ie,Mt)|0;var ar=(w+(g=g+Math.imul(ke,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ke,Ct)|0)+Math.imul(Be,Tt)|0))<<13)|0;w=((v=v+Math.imul(Be,Ct)|0)+(s>>>13)|0)+(ar>>>26)|0,ar&=67108863,g=Math.imul(ve,ht),s=(s=Math.imul(ve,_t))+Math.imul(xe,ht)|0,v=Math.imul(xe,_t),g=g+Math.imul(le,gt)|0,s=(s=s+Math.imul(le,vt)|0)+Math.imul(J,gt)|0,v=v+Math.imul(J,vt)|0,g=g+Math.imul(ut,st)|0,s=(s=s+Math.imul(ut,yt)|0)+Math.imul(Qe,st)|0,v=v+Math.imul(Qe,yt)|0,g=g+Math.imul(et,mt)|0,s=(s=s+Math.imul(et,wt)|0)+Math.imul(Ke,mt)|0,v=v+Math.imul(Ke,wt)|0,g=g+Math.imul(qe,ct)|0,s=(s=s+Math.imul(qe,ft)|0)+Math.imul(Ye,ct)|0,v=v+Math.imul(Ye,ft)|0,g=g+Math.imul(Re,St)|0,s=(s=s+Math.imul(Re,at)|0)+Math.imul(Ge,St)|0,v=v+Math.imul(Ge,at)|0,g=g+Math.imul(je,dt)|0,s=(s=s+Math.imul(je,Mt)|0)+Math.imul(se,dt)|0,v=v+Math.imul(se,Mt)|0;var or=(w+(g=g+Math.imul(Te,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Te,Ct)|0)+Math.imul(Ie,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ie,Ct)|0)+(s>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(ve,gt),s=(s=Math.imul(ve,vt))+Math.imul(xe,gt)|0,v=Math.imul(xe,vt),g=g+Math.imul(le,st)|0,s=(s=s+Math.imul(le,yt)|0)+Math.imul(J,st)|0,v=v+Math.imul(J,yt)|0,g=g+Math.imul(ut,mt)|0,s=(s=s+Math.imul(ut,wt)|0)+Math.imul(Qe,mt)|0,v=v+Math.imul(Qe,wt)|0,g=g+Math.imul(et,ct)|0,s=(s=s+Math.imul(et,ft)|0)+Math.imul(Ke,ct)|0,v=v+Math.imul(Ke,ft)|0,g=g+Math.imul(qe,St)|0,s=(s=s+Math.imul(qe,at)|0)+Math.imul(Ye,St)|0,v=v+Math.imul(Ye,at)|0,g=g+Math.imul(Re,dt)|0,s=(s=s+Math.imul(Re,Mt)|0)+Math.imul(Ge,dt)|0,v=v+Math.imul(Ge,Mt)|0;var Vi=(w+(g=g+Math.imul(je,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(je,Ct)|0)+Math.imul(se,Tt)|0))<<13)|0;w=((v=v+Math.imul(se,Ct)|0)+(s>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,g=Math.imul(ve,st),s=(s=Math.imul(ve,yt))+Math.imul(xe,st)|0,v=Math.imul(xe,yt),g=g+Math.imul(le,mt)|0,s=(s=s+Math.imul(le,wt)|0)+Math.imul(J,mt)|0,v=v+Math.imul(J,wt)|0,g=g+Math.imul(ut,ct)|0,s=(s=s+Math.imul(ut,ft)|0)+Math.imul(Qe,ct)|0,v=v+Math.imul(Qe,ft)|0,g=g+Math.imul(et,St)|0,s=(s=s+Math.imul(et,at)|0)+Math.imul(Ke,St)|0,v=v+Math.imul(Ke,at)|0,g=g+Math.imul(qe,dt)|0,s=(s=s+Math.imul(qe,Mt)|0)+Math.imul(Ye,dt)|0,v=v+Math.imul(Ye,Mt)|0;var $n=(w+(g=g+Math.imul(Re,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(Re,Ct)|0)+Math.imul(Ge,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ge,Ct)|0)+(s>>>13)|0)+($n>>>26)|0,$n&=67108863,g=Math.imul(ve,mt),s=(s=Math.imul(ve,wt))+Math.imul(xe,mt)|0,v=Math.imul(xe,wt),g=g+Math.imul(le,ct)|0,s=(s=s+Math.imul(le,ft)|0)+Math.imul(J,ct)|0,v=v+Math.imul(J,ft)|0,g=g+Math.imul(ut,St)|0,s=(s=s+Math.imul(ut,at)|0)+Math.imul(Qe,St)|0,v=v+Math.imul(Qe,at)|0,g=g+Math.imul(et,dt)|0,s=(s=s+Math.imul(et,Mt)|0)+Math.imul(Ke,dt)|0,v=v+Math.imul(Ke,Mt)|0;var Ni=(w+(g=g+Math.imul(qe,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(qe,Ct)|0)+Math.imul(Ye,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ye,Ct)|0)+(s>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,g=Math.imul(ve,ct),s=(s=Math.imul(ve,ft))+Math.imul(xe,ct)|0,v=Math.imul(xe,ft),g=g+Math.imul(le,St)|0,s=(s=s+Math.imul(le,at)|0)+Math.imul(J,St)|0,v=v+Math.imul(J,at)|0,g=g+Math.imul(ut,dt)|0,s=(s=s+Math.imul(ut,Mt)|0)+Math.imul(Qe,dt)|0,v=v+Math.imul(Qe,Mt)|0;var Wn=(w+(g=g+Math.imul(et,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(et,Ct)|0)+Math.imul(Ke,Tt)|0))<<13)|0;w=((v=v+Math.imul(Ke,Ct)|0)+(s>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,g=Math.imul(ve,St),s=(s=Math.imul(ve,at))+Math.imul(xe,St)|0,v=Math.imul(xe,at),g=g+Math.imul(le,dt)|0,s=(s=s+Math.imul(le,Mt)|0)+Math.imul(J,dt)|0,v=v+Math.imul(J,Mt)|0;var Ln=(w+(g=g+Math.imul(ut,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(ut,Ct)|0)+Math.imul(Qe,Tt)|0))<<13)|0;w=((v=v+Math.imul(Qe,Ct)|0)+(s>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,g=Math.imul(ve,dt),s=(s=Math.imul(ve,Mt))+Math.imul(xe,dt)|0,v=Math.imul(xe,Mt);var vi=(w+(g=g+Math.imul(le,Tt)|0)|0)+((8191&(s=(s=s+Math.imul(le,Ct)|0)+Math.imul(J,Tt)|0))<<13)|0;w=((v=v+Math.imul(J,Ct)|0)+(s>>>13)|0)+(vi>>>26)|0,vi&=67108863;var Un=(w+(g=Math.imul(ve,Tt))|0)+((8191&(s=(s=Math.imul(ve,Ct))+Math.imul(xe,Tt)|0))<<13)|0;return w=((v=Math.imul(xe,Ct))+(s>>>13)|0)+(Un>>>26)|0,Un&=67108863,b[0]=Fn,b[1]=Ri,b[2]=Oi,b[3]=zn,b[4]=jn,b[5]=tr,b[6]=ir,b[7]=nr,b[8]=rr,b[9]=qn,b[10]=ar,b[11]=or,b[12]=Vi,b[13]=$n,b[14]=Ni,b[15]=Wn,b[16]=Ln,b[17]=vi,b[18]=Un,0!==w&&(b[19]=w,f.length++),f};function X(y,o,l){return(new U).mulp(y,o,l)}function U(y,o){this.x=y,this.y=o}Math.imul||(N=B),p.prototype.mulTo=function(o,l){var f,u=this.length+o.length;return f=10===this.length&&10===o.length?N(this,o,l):u<63?B(this,o,l):u<1024?function z(y,o,l){l.negative=o.negative^y.negative,l.length=y.length+o.length;for(var f=0,u=0,h=0;h<l.length-1;h++){var b=u;u=0;for(var w=67108863&f,g=Math.min(h,o.length-1),s=Math.max(0,h-y.length+1);s<=g;s++){var ie=(0|y.words[h-s])*(0|o.words[s]),Se=67108863&ie;w=67108863&(Se=Se+w|0),u+=(b=(b=b+(ie/67108864|0)|0)+(Se>>>26)|0)>>>26,b&=67108863}l.words[h]=w,f=b,b=u}return 0!==f?l.words[h]=f:l.length--,l.strip()}(this,o,l):X(this,o,l),f},U.prototype.makeRBT=function(o){for(var l=new Array(o),f=p.prototype._countBits(o)-1,u=0;u<o;u++)l[u]=this.revBin(u,f,o);return l},U.prototype.revBin=function(o,l,f){if(0===o||o===f-1)return o;for(var u=0,h=0;h<l;h++)u|=(1&o)<<l-h-1,o>>=1;return u},U.prototype.permute=function(o,l,f,u,h,b){for(var w=0;w<b;w++)u[w]=l[o[w]],h[w]=f[o[w]]},U.prototype.transform=function(o,l,f,u,h,b){this.permute(b,o,l,f,u,h);for(var w=1;w<h;w<<=1)for(var g=w<<1,s=Math.cos(2*Math.PI/g),v=Math.sin(2*Math.PI/g),$=0;$<h;$+=g)for(var L=s,ie=v,Se=0;Se<w;Se++){var ke=f[$+Se],Be=u[$+Se],Pe=f[$+Se+w],Te=u[$+Se+w],Ie=L*Pe-ie*Te;Te=L*Te+ie*Pe,f[$+Se]=ke+(Pe=Ie),u[$+Se]=Be+Te,f[$+Se+w]=ke-Pe,u[$+Se+w]=Be-Te,Se!==g&&(Ie=s*L-v*ie,ie=s*ie+v*L,L=Ie)}},U.prototype.guessLen13b=function(o,l){var f=1|Math.max(l,o),u=1&f,h=0;for(f=f/2|0;f;f>>>=1)h++;return 1<<h+1+u},U.prototype.conjugate=function(o,l,f){if(!(f<=1))for(var u=0;u<f/2;u++){var h=o[u];o[u]=o[f-u-1],o[f-u-1]=h,h=l[u],l[u]=-l[f-u-1],l[f-u-1]=-h}},U.prototype.normalize13b=function(o,l){for(var f=0,u=0;u<l/2;u++){var h=8192*Math.round(o[2*u+1]/l)+Math.round(o[2*u]/l)+f;o[u]=67108863&h,f=h<67108864?0:h/67108864|0}return o},U.prototype.convert13b=function(o,l,f,u){for(var h=0,b=0;b<l;b++)f[2*b]=8191&(h+=0|o[b]),f[2*b+1]=8191&(h>>>=13),h>>>=13;for(b=2*l;b<u;++b)f[b]=0;I(0===h),I(0==(-8192&h))},U.prototype.stub=function(o){for(var l=new Array(o),f=0;f<o;f++)l[f]=0;return l},U.prototype.mulp=function(o,l,f){var u=2*this.guessLen13b(o.length,l.length),h=this.makeRBT(u),b=this.stub(u),w=new Array(u),g=new Array(u),s=new Array(u),v=new Array(u),$=new Array(u),L=new Array(u),ie=f.words;ie.length=u,this.convert13b(o.words,o.length,w,u),this.convert13b(l.words,l.length,v,u),this.transform(w,b,g,s,u,h),this.transform(v,b,$,L,u,h);for(var Se=0;Se<u;Se++){var ke=g[Se]*$[Se]-s[Se]*L[Se];s[Se]=g[Se]*L[Se]+s[Se]*$[Se],g[Se]=ke}return this.conjugate(g,s,u),this.transform(g,s,ie,b,u,h),this.conjugate(ie,b,u),this.normalize13b(ie,u),f.negative=o.negative^l.negative,f.length=o.length+l.length,f.strip()},p.prototype.mul=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},p.prototype.mulf=function(o){var l=new p(null);return l.words=new Array(this.length+o.length),X(this,o,l)},p.prototype.imul=function(o){return this.clone().mulTo(o,this)},p.prototype.imuln=function(o){I("number"==typeof o),I(o<67108864);for(var l=0,f=0;f<this.length;f++){var u=(0|this.words[f])*o,h=(67108863&u)+(67108863&l);l>>=26,l+=u/67108864|0,l+=h>>>26,this.words[f]=67108863&h}return 0!==l&&(this.words[f]=l,this.length++),this},p.prototype.muln=function(o){return this.clone().imuln(o)},p.prototype.sqr=function(){return this.mul(this)},p.prototype.isqr=function(){return this.imul(this.clone())},p.prototype.pow=function(o){var l=function C(y){for(var o=new Array(y.bitLength()),l=0;l<o.length;l++){var u=l%26;o[l]=(y.words[l/26|0]&1<<u)>>>u}return o}(o);if(0===l.length)return new p(1);for(var f=this,u=0;u<l.length&&0===l[u];u++,f=f.sqr());if(++u<l.length)for(var h=f.sqr();u<l.length;u++,h=h.sqr())0!==l[u]&&(f=f.mul(h));return f},p.prototype.iushln=function(o){I("number"==typeof o&&o>=0);var h,l=o%26,f=(o-l)/26,u=67108863>>>26-l<<26-l;if(0!==l){var b=0;for(h=0;h<this.length;h++){var w=this.words[h]&u;this.words[h]=(0|this.words[h])-w<<l|b,b=w>>>26-l}b&&(this.words[h]=b,this.length++)}if(0!==f){for(h=this.length-1;h>=0;h--)this.words[h+f]=this.words[h];for(h=0;h<f;h++)this.words[h]=0;this.length+=f}return this.strip()},p.prototype.ishln=function(o){return I(0===this.negative),this.iushln(o)},p.prototype.iushrn=function(o,l,f){var u;I("number"==typeof o&&o>=0),u=l?(l-l%26)/26:0;var h=o%26,b=Math.min((o-h)/26,this.length),w=67108863^67108863>>>h<<h,g=f;if(u-=b,u=Math.max(0,u),g){for(var s=0;s<b;s++)g.words[s]=this.words[s];g.length=b}if(0!==b)if(this.length>b)for(this.length-=b,s=0;s<this.length;s++)this.words[s]=this.words[s+b];else this.words[0]=0,this.length=1;var v=0;for(s=this.length-1;s>=0&&(0!==v||s>=u);s--){var $=0|this.words[s];this.words[s]=v<<26-h|$>>>h,v=$&w}return g&&0!==v&&(g.words[g.length++]=v),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},p.prototype.ishrn=function(o,l,f){return I(0===this.negative),this.iushrn(o,l,f)},p.prototype.shln=function(o){return this.clone().ishln(o)},p.prototype.ushln=function(o){return this.clone().iushln(o)},p.prototype.shrn=function(o){return this.clone().ishrn(o)},p.prototype.ushrn=function(o){return this.clone().iushrn(o)},p.prototype.testn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return!(this.length<=f||!(this.words[f]&1<<l))},p.prototype.imaskn=function(o){I("number"==typeof o&&o>=0);var l=o%26,f=(o-l)/26;return I(0===this.negative,"imaskn works only with positive numbers"),this.length<=f?this:(0!==l&&f++,this.length=Math.min(f,this.length),0!==l&&(this.words[this.length-1]&=67108863^67108863>>>l<<l),this.strip())},p.prototype.maskn=function(o){return this.clone().imaskn(o)},p.prototype.iaddn=function(o){return I("number"==typeof o),I(o<67108864),o<0?this.isubn(-o):0!==this.negative?1===this.length&&(0|this.words[0])<o?(this.words[0]=o-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},p.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},p.prototype.isubn=function(o){if(I("number"==typeof o),I(o<67108864),o<0)return this.iaddn(-o);if(0!==this.negative)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},p.prototype.addn=function(o){return this.clone().iaddn(o)},p.prototype.subn=function(o){return this.clone().isubn(o)},p.prototype.iabs=function(){return this.negative=0,this},p.prototype.abs=function(){return this.clone().iabs()},p.prototype._ishlnsubmul=function(o,l,f){var h;this._expand(o.length+f);var b,w=0;for(h=0;h<o.length;h++){b=(0|this.words[h+f])+w;var g=(0|o.words[h])*l;w=((b-=67108863&g)>>26)-(g/67108864|0),this.words[h+f]=67108863&b}for(;h<this.length-f;h++)w=(b=(0|this.words[h+f])+w)>>26,this.words[h+f]=67108863&b;if(0===w)return this.strip();for(I(-1===w),w=0,h=0;h<this.length;h++)w=(b=-(0|this.words[h])+w)>>26,this.words[h]=67108863&b;return this.negative=1,this.strip()},p.prototype._wordDiv=function(o,l){var f,u=this.clone(),h=o,b=0|h.words[h.length-1];0!=(f=26-this._countBits(b))&&(h=h.ushln(f),u.iushln(f),b=0|h.words[h.length-1]);var s,g=u.length-h.length;if("mod"!==l){(s=new p(null)).length=g+1,s.words=new Array(s.length);for(var v=0;v<s.length;v++)s.words[v]=0}var $=u.clone()._ishlnsubmul(h,1,g);0===$.negative&&(u=$,s&&(s.words[g]=1));for(var L=g-1;L>=0;L--){var ie=67108864*(0|u.words[h.length+L])+(0|u.words[h.length+L-1]);for(ie=Math.min(ie/b|0,67108863),u._ishlnsubmul(h,ie,L);0!==u.negative;)ie--,u.negative=0,u._ishlnsubmul(h,1,L),u.isZero()||(u.negative^=1);s&&(s.words[L]=ie)}return s&&s.strip(),u.strip(),"div"!==l&&0!==f&&u.iushrn(f),{div:s||null,mod:u}},p.prototype.divmod=function(o,l,f){return I(!o.isZero()),this.isZero()?{div:new p(0),mod:new p(0)}:0!==this.negative&&0===o.negative?(b=this.neg().divmod(o,l),"mod"!==l&&(u=b.div.neg()),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.iadd(o)),{div:u,mod:h}):0===this.negative&&0!==o.negative?(b=this.divmod(o.neg(),l),"mod"!==l&&(u=b.div.neg()),{div:u,mod:b.mod}):0!=(this.negative&o.negative)?(b=this.neg().divmod(o.neg(),l),"div"!==l&&(h=b.mod.neg(),f&&0!==h.negative&&h.isub(o)),{div:b.div,mod:h}):o.length>this.length||this.cmp(o)<0?{div:new p(0),mod:this}:1===o.length?"div"===l?{div:this.divn(o.words[0]),mod:null}:"mod"===l?{div:null,mod:new p(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new p(this.modn(o.words[0]))}:this._wordDiv(o,l);var u,h,b},p.prototype.div=function(o){return this.divmod(o,"div",!1).div},p.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},p.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},p.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var f=0!==l.div.negative?l.mod.isub(o):l.mod,u=o.ushrn(1),h=o.andln(1),b=f.cmp(u);return b<0||1===h&&0===b?l.div:0!==l.div.negative?l.div.isubn(1):l.div.iaddn(1)},p.prototype.modn=function(o){I(o<=67108863);for(var l=(1<<26)%o,f=0,u=this.length-1;u>=0;u--)f=(l*f+(0|this.words[u]))%o;return f},p.prototype.idivn=function(o){I(o<=67108863);for(var l=0,f=this.length-1;f>=0;f--){var u=(0|this.words[f])+67108864*l;this.words[f]=u/o|0,l=u%o}return this.strip()},p.prototype.divn=function(o){return this.clone().idivn(o)},p.prototype.egcd=function(o){I(0===o.negative),I(!o.isZero());var l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=new p(0),w=new p(1),g=0;l.isEven()&&f.isEven();)l.iushrn(1),f.iushrn(1),++g;for(var s=f.clone(),v=l.clone();!l.isZero();){for(var $=0,L=1;0==(l.words[0]&L)&&$<26;++$,L<<=1);if($>0)for(l.iushrn($);$-- >0;)(u.isOdd()||h.isOdd())&&(u.iadd(s),h.isub(v)),u.iushrn(1),h.iushrn(1);for(var ie=0,Se=1;0==(f.words[0]&Se)&&ie<26;++ie,Se<<=1);if(ie>0)for(f.iushrn(ie);ie-- >0;)(b.isOdd()||w.isOdd())&&(b.iadd(s),w.isub(v)),b.iushrn(1),w.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(b),h.isub(w)):(f.isub(l),b.isub(u),w.isub(h))}return{a:b,b:w,gcd:f.iushln(g)}},p.prototype._invmp=function(o){I(0===o.negative),I(!o.isZero());var $,l=this,f=o.clone();l=0!==l.negative?l.umod(o):l.clone();for(var u=new p(1),h=new p(0),b=f.clone();l.cmpn(1)>0&&f.cmpn(1)>0;){for(var w=0,g=1;0==(l.words[0]&g)&&w<26;++w,g<<=1);if(w>0)for(l.iushrn(w);w-- >0;)u.isOdd()&&u.iadd(b),u.iushrn(1);for(var s=0,v=1;0==(f.words[0]&v)&&s<26;++s,v<<=1);if(s>0)for(f.iushrn(s);s-- >0;)h.isOdd()&&h.iadd(b),h.iushrn(1);l.cmp(f)>=0?(l.isub(f),u.isub(h)):(f.isub(l),h.isub(u))}return($=0===l.cmpn(1)?u:h).cmpn(0)<0&&$.iadd(o),$},p.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),f=o.clone();l.negative=0,f.negative=0;for(var u=0;l.isEven()&&f.isEven();u++)l.iushrn(1),f.iushrn(1);for(;;){for(;l.isEven();)l.iushrn(1);for(;f.isEven();)f.iushrn(1);var h=l.cmp(f);if(h<0){var b=l;l=f,f=b}else if(0===h||0===f.cmpn(1))break;l.isub(f)}return f.iushln(u)},p.prototype.invm=function(o){return this.egcd(o).a.umod(o)},p.prototype.isEven=function(){return 0==(1&this.words[0])},p.prototype.isOdd=function(){return 1==(1&this.words[0])},p.prototype.andln=function(o){return this.words[0]&o},p.prototype.bincn=function(o){I("number"==typeof o);var l=o%26,f=(o-l)/26,u=1<<l;if(this.length<=f)return this._expand(f+1),this.words[f]|=u,this;for(var h=u,b=f;0!==h&&b<this.length;b++){var w=0|this.words[b];h=(w+=h)>>>26,this.words[b]=w&=67108863}return 0!==h&&(this.words[b]=h,this.length++),this},p.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},p.prototype.cmpn=function(o){var f,l=o<0;if(0!==this.negative&&!l)return-1;if(0===this.negative&&l)return 1;if(this.strip(),this.length>1)f=1;else{l&&(o=-o),I(o<=67108863,"Number is too big");var u=0|this.words[0];f=u===o?0:u<o?-1:1}return 0!==this.negative?0|-f:f},p.prototype.cmp=function(o){if(0!==this.negative&&0===o.negative)return-1;if(0===this.negative&&0!==o.negative)return 1;var l=this.ucmp(o);return 0!==this.negative?0|-l:l},p.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,f=this.length-1;f>=0;f--){var u=0|this.words[f],h=0|o.words[f];if(u!==h){u<h?l=-1:u>h&&(l=1);break}}return l},p.prototype.gtn=function(o){return 1===this.cmpn(o)},p.prototype.gt=function(o){return 1===this.cmp(o)},p.prototype.gten=function(o){return this.cmpn(o)>=0},p.prototype.gte=function(o){return this.cmp(o)>=0},p.prototype.ltn=function(o){return-1===this.cmpn(o)},p.prototype.lt=function(o){return-1===this.cmp(o)},p.prototype.lten=function(o){return this.cmpn(o)<=0},p.prototype.lte=function(o){return this.cmp(o)<=0},p.prototype.eqn=function(o){return 0===this.cmpn(o)},p.prototype.eq=function(o){return 0===this.cmp(o)},p.red=function(o){return new we(o)},p.prototype.toRed=function(o){return I(!this.red,"Already a number in reduction context"),I(0===this.negative,"red works only with positives"),o.convertTo(this)._forceRed(o)},p.prototype.fromRed=function(){return I(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},p.prototype._forceRed=function(o){return this.red=o,this},p.prototype.forceRed=function(o){return I(!this.red,"Already a number in reduction context"),this._forceRed(o)},p.prototype.redAdd=function(o){return I(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},p.prototype.redIAdd=function(o){return I(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},p.prototype.redSub=function(o){return I(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},p.prototype.redISub=function(o){return I(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},p.prototype.redShl=function(o){return I(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},p.prototype.redMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},p.prototype.redIMul=function(o){return I(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},p.prototype.redSqr=function(){return I(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},p.prototype.redISqr=function(){return I(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},p.prototype.redSqrt=function(){return I(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},p.prototype.redInvm=function(){return I(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},p.prototype.redNeg=function(){return I(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},p.prototype.redPow=function(o){return I(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Z={k256:null,p224:null,p192:null,p25519:null};function ee(y,o){this.name=y,this.p=new p(o,16),this.n=this.p.bitLength(),this.k=new p(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function ae(){ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function ge(){ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Ce(){ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function De(){ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function we(y){if("string"==typeof y){var o=p._prime(y);this.m=o.p,this.prime=o}else I(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}function Oe(y){we.call(this,y),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new p(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ee.prototype._tmp=function(){var o=new p(null);return o.words=new Array(Math.ceil(this.n/13)),o},ee.prototype.ireduce=function(o){var f,l=o;do{this.split(l,this.tmp),f=(l=(l=this.imulK(l)).iadd(this.tmp)).bitLength()}while(f>this.n);var u=f<this.n?-1:l.ucmp(this.p);return 0===u?(l.words[0]=0,l.length=1):u>0?l.isub(this.p):void 0!==l.strip?l.strip():l._strip(),l},ee.prototype.split=function(o,l){o.iushrn(this.n,0,l)},ee.prototype.imulK=function(o){return o.imul(this.k)},G(ae,ee),ae.prototype.split=function(o,l){for(var f=4194303,u=Math.min(o.length,9),h=0;h<u;h++)l.words[h]=o.words[h];if(l.length=u,o.length<=9)return o.words[0]=0,void(o.length=1);var b=o.words[9];for(l.words[l.length++]=b&f,h=10;h<o.length;h++){var w=0|o.words[h];o.words[h-10]=(w&f)<<4|b>>>22,b=w}o.words[h-10]=b>>>=22,o.length-=0===b&&o.length>10?10:9},ae.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,f=0;f<o.length;f++){var u=0|o.words[f];o.words[f]=67108863&(l+=977*u),l=64*u+(l/67108864|0)}return 0===o.words[o.length-1]&&(o.length--,0===o.words[o.length-1]&&o.length--),o},G(ge,ee),G(Ce,ee),G(De,ee),De.prototype.imulK=function(o){for(var l=0,f=0;f<o.length;f++){var u=19*(0|o.words[f])+l,h=67108863&u;u>>>=26,o.words[f]=h,l=u}return 0!==l&&(o.words[o.length++]=l),o},p._prime=function(o){if(Z[o])return Z[o];var l;if("k256"===o)l=new ae;else if("p224"===o)l=new ge;else if("p192"===o)l=new Ce;else{if("p25519"!==o)throw new Error("Unknown prime "+o);l=new De}return Z[o]=l,l},we.prototype._verify1=function(o){I(0===o.negative,"red works only with positives"),I(o.red,"red works only with red numbers")},we.prototype._verify2=function(o,l){I(0==(o.negative|l.negative),"red works only with positives"),I(o.red&&o.red===l.red,"red works only with red numbers")},we.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},we.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},we.prototype.add=function(o,l){this._verify2(o,l);var f=o.add(l);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},we.prototype.iadd=function(o,l){this._verify2(o,l);var f=o.iadd(l);return f.cmp(this.m)>=0&&f.isub(this.m),f},we.prototype.sub=function(o,l){this._verify2(o,l);var f=o.sub(l);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},we.prototype.isub=function(o,l){this._verify2(o,l);var f=o.isub(l);return f.cmpn(0)<0&&f.iadd(this.m),f},we.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},we.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},we.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},we.prototype.isqr=function(o){return this.imul(o,o.clone())},we.prototype.sqr=function(o){return this.mul(o,o)},we.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(I(l%2==1),3===l){var f=this.m.add(new p(1)).iushrn(2);return this.pow(o,f)}for(var u=this.m.subn(1),h=0;!u.isZero()&&0===u.andln(1);)h++,u.iushrn(1);I(!u.isZero());var b=new p(1).toRed(this),w=b.redNeg(),g=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new p(2*s*s).toRed(this);0!==this.pow(s,g).cmp(w);)s.redIAdd(w);for(var v=this.pow(s,u),$=this.pow(o,u.addn(1).iushrn(1)),L=this.pow(o,u),ie=h;0!==L.cmp(b);){for(var Se=L,ke=0;0!==Se.cmp(b);ke++)Se=Se.redSqr();I(ke<ie);var Be=this.pow(v,new p(1).iushln(ie-ke-1));$=$.redMul(Be),v=Be.redSqr(),L=L.redMul(v),ie=ke}return $},we.prototype.invm=function(o){var l=o._invmp(this.m);return 0!==l.negative?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},we.prototype.pow=function(o,l){if(l.isZero())return new p(1).toRed(this);if(0===l.cmpn(1))return o.clone();var u=new Array(16);u[0]=new p(1).toRed(this),u[1]=o;for(var h=2;h<u.length;h++)u[h]=this.mul(u[h-1],o);var b=u[0],w=0,g=0,s=l.bitLength()%26;for(0===s&&(s=26),h=l.length-1;h>=0;h--){for(var v=l.words[h],$=s-1;$>=0;$--){var L=v>>$&1;b!==u[0]&&(b=this.sqr(b)),0!==L||0!==w?(w<<=1,w|=L,(4==++g||0===h&&0===$)&&(b=this.mul(b,u[w]),g=0,w=0)):g=0}s=26}return b},we.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},we.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},p.mont=function(o){return new Oe(o)},G(Oe,we),Oe.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Oe.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},Oe.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var f=o.imul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new p(0)._forceRed(this);var f=o.mul(l),u=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=f.isub(u).iushrn(this.shift),b=h;return h.cmp(this.m)>=0?b=h.isub(this.m):h.cmpn(0)<0&&(b=h.iadd(this.m)),b._forceRed(this)},Oe.prototype.invm=function(o){return this.imod(o._invmp(this.m).mul(this.r2))._forceRed(this)}}(ye=H.nmd(ye),this)},6705:(ye,ue,H)=>{var j=H(2772),W=H(6945),I=H(9401),G=H(2057),p=H(8466),k=H(6386),P=H(8651),E=H(3502).Buffer;ye.exports=function(C,B,N){var z;z=C.padding?C.padding:N?1:4;var Z,X=j(C),U=X.modulus.byteLength();if(B.length>U||new G(B).cmp(X.modulus)>=0)throw new Error("decryption error");Z=N?P(new G(B),X):p(B,X);var ee=E.alloc(U-Z.length);if(Z=E.concat([ee,Z],U),4===z)return function R(O,C){var B=O.modulus.byteLength(),N=k("sha1").update(E.alloc(0)).digest(),z=N.length;if(0!==C[0])throw new Error("decryption error");var X=C.slice(1,z+1),U=C.slice(z+1),Z=I(X,W(U,z)),ee=I(U,W(Z,B-z-1));if(function S(O,C){O=E.from(O),C=E.from(C);var B=0,N=O.length;O.length!==C.length&&(B++,N=Math.min(O.length,C.length));for(var z=-1;++z<N;)B+=O[z]^C[z];return B}(N,ee.slice(0,z)))throw new Error("decryption error");for(var ae=z;0===ee[ae];)ae++;if(1!==ee[ae++])throw new Error("decryption error");return ee.slice(ae)}(X,Z);if(1===z)return function x(O,C,B){for(var N=C.slice(0,2),z=2,X=0;0!==C[z++];)if(z>=C.length){X++;break}var U=C.slice(2,z-1);if(("0002"!==N.toString("hex")&&!B||"0001"!==N.toString("hex")&&B)&&X++,U.length<8&&X++,X)throw new Error("decryption error");return C.slice(z)}(0,Z,N);if(3===z)return Z;throw new Error("unknown padding")}},6562:(ye,ue,H)=>{var j=H(2772),W=H(3753),I=H(6386),G=H(6945),p=H(9401),k=H(2057),P=H(8651),E=H(8466),R=H(3502).Buffer;ye.exports=function(B,N,z){var X;X=B.padding?B.padding:z?1:4;var Z,U=j(B);if(4===X)Z=function x(C,B){var N=C.modulus.byteLength(),z=B.length,X=I("sha1").update(R.alloc(0)).digest(),U=X.length,Z=2*U;if(z>N-Z-2)throw new Error("message too long");var ee=R.alloc(N-z-Z-2),ae=N-U-1,ge=W(U),Ce=p(R.concat([X,ee,R.alloc(1,1),B],ae),G(ge,ae)),De=p(ge,G(Ce,U));return new k(R.concat([R.alloc(1),De,Ce],N))}(U,N);else if(1===X)Z=function S(C,B,N){var U,z=B.length,X=C.modulus.byteLength();if(z>X-11)throw new Error("message too long");return U=N?R.alloc(X-z-3,255):function O(C){for(var U,B=R.allocUnsafe(C),N=0,z=W(2*C),X=0;N<C;)X===z.length&&(z=W(2*C),X=0),(U=z[X++])&&(B[N++]=U);return B}(X-z-3),new k(R.concat([R.from([0,N?1:2]),U,R.alloc(1),B],X))}(U,N,z);else{if(3!==X)throw new Error("unknown padding");if((Z=new k(N)).cmp(U.modulus)>=0)throw new Error("data too long for modulus")}return z?E(Z,U):P(Z,U)}},8651:(ye,ue,H)=>{var j=H(2057),W=H(3502).Buffer;ye.exports=function I(G,p){return W.from(G.toRed(j.mont(p.modulus)).redPow(new j(p.publicExponent)).fromRed().toArray())}},9401:ye=>{ye.exports=function(H,j){for(var W=H.length,I=-1;++I<W;)H[I]^=j[I];return H}},3753:(ye,ue,H)=>{"use strict";var j=65536,G=H(3502).Buffer,p=global.crypto||global.msCrypto;ye.exports=p&&p.getRandomValues?function k(P,E){if(P>4294967295)throw new RangeError("requested too many random bytes");var R=G.allocUnsafe(P);if(P>0)if(P>j)for(var x=0;x<P;x+=j)p.getRandomValues(R.slice(x,x+j));else p.getRandomValues(R);return"function"==typeof E?process.nextTick(function(){E(null,R)}):R}:function I(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},4275:(ye,ue,H)=>{"use strict";function j(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var W=H(3502),I=H(3753),G=W.Buffer,p=W.kMaxLength,k=global.crypto||global.msCrypto,P=Math.pow(2,32)-1;function E(C,B){if("number"!=typeof C||C!=C)throw new TypeError("offset must be a number");if(C>P||C<0)throw new TypeError("offset must be a uint32");if(C>p||C>B)throw new RangeError("offset out of range")}function R(C,B,N){if("number"!=typeof C||C!=C)throw new TypeError("size must be a number");if(C>P||C<0)throw new TypeError("size must be a uint32");if(C+B>N||C>p)throw new RangeError("buffer too small")}function S(C,B,N,z){if(process.browser){var U=new Uint8Array(C.buffer,B,N);return k.getRandomValues(U),z?void process.nextTick(function(){z(null,C)}):C}if(!z)return I(N).copy(C,B),C;I(N,function(ee,ae){if(ee)return z(ee);ae.copy(C,B),z(null,C)})}k&&k.getRandomValues||!process.browser?(ue.randomFill=function x(C,B,N,z){if(!(G.isBuffer(C)||C instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof B)z=B,B=0,N=C.length;else if("function"==typeof N)z=N,N=C.length-B;else if("function"!=typeof z)throw new TypeError('"cb" argument must be a function');return E(B,C.length),R(N,B,C.length),S(C,B,N,z)},ue.randomFillSync=function O(C,B,N){if(void 0===B&&(B=0),!(G.isBuffer(C)||C instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return E(B,C.length),void 0===N&&(N=C.length-B),R(N,B,C.length),S(C,B,N)}):(ue.randomFill=j,ue.randomFillSync=j)},891:ye=>{"use strict";var H={};function j(k,P,E){E||(E=Error);var x=function(S){function O(C,B,N){return S.call(this,function R(S,O,C){return"string"==typeof P?P:P(S,O,C)}(C,B,N))||this}return function ue(k,P){k.prototype=Object.create(P.prototype),k.prototype.constructor=k,k.__proto__=P}(O,S),O}(E);x.prototype.name=E.name,x.prototype.code=k,H[k]=x}function W(k,P){if(Array.isArray(k)){var E=k.length;return k=k.map(function(R){return String(R)}),E>2?"one of ".concat(P," ").concat(k.slice(0,E-1).join(", "),", or ")+k[E-1]:2===E?"one of ".concat(P," ").concat(k[0]," or ").concat(k[1]):"of ".concat(P," ").concat(k[0])}return"of ".concat(P," ").concat(String(k))}j("ERR_INVALID_OPT_VALUE",function(k,P){return'The value "'+P+'" is invalid for option "'+k+'"'},TypeError),j("ERR_INVALID_ARG_TYPE",function(k,P,E){var R,x;if("string"==typeof P&&function I(k,P,E){return k.substr(!E||E<0?0:+E,P.length)===P}(P,"not ")?(R="must not be",P=P.replace(/^not /,"")):R="must be",function G(k,P,E){return(void 0===E||E>k.length)&&(E=k.length),k.substring(E-P.length,E)===P}(k," argument"))x="The ".concat(k," ").concat(R," ").concat(W(P,"type"));else{var S=function p(k,P,E){return"number"!=typeof E&&(E=0),!(E+P.length>k.length)&&-1!==k.indexOf(P,E)}(k,".")?"property":"argument";x='The "'.concat(k,'" ').concat(S," ").concat(R," ").concat(W(P,"type"))}return x+". Received type ".concat(typeof E)},TypeError),j("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),j("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),j("ERR_STREAM_PREMATURE_CLOSE","Premature close"),j("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),j("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),j("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),j("ERR_STREAM_WRITE_AFTER_END","write after end"),j("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),j("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),j("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ye.exports.q=H},1339:(ye,ue,H)=>{"use strict";var j=Object.keys||function(x){var S=[];for(var O in x)S.push(O);return S};ye.exports=P;var W=H(3154),I=H(520);H(3894)(P,W);for(var G=j(I.prototype),p=0;p<G.length;p++){var k=G[p];P.prototype[k]||(P.prototype[k]=I.prototype[k])}function P(x){if(!(this instanceof P))return new P(x);W.call(this,x),I.call(this,x),this.allowHalfOpen=!0,x&&(!1===x.readable&&(this.readable=!1),!1===x.writable&&(this.writable=!1),!1===x.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",E)))}function E(){this._writableState.ended||process.nextTick(R,this)}function R(x){x.end()}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(S){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=S,this._writableState.destroyed=S)}})},6071:(ye,ue,H)=>{"use strict";ye.exports=W;var j=H(6025);function W(I){if(!(this instanceof W))return new W(I);j.call(this,I)}H(3894)(W,j),W.prototype._transform=function(I,G,p){p(null,I)}},3154:(ye,ue,H)=>{"use strict";var j;ye.exports=y,y.ReadableState=Oe,H(9069);var x,I=function(Ee,Re){return Ee.listeners(Re).length},G=H(4970),p=H(3172).Buffer,k=global.Uint8Array||function(){},R=H(4616);x=R&&R.debuglog?R.debuglog("stream"):function(){};var ee,ae,ge,S=H(5019),O=H(1920),B=H(7102).getHighWaterMark,N=H(891).q,z=N.ERR_INVALID_ARG_TYPE,X=N.ERR_STREAM_PUSH_AFTER_EOF,U=N.ERR_METHOD_NOT_IMPLEMENTED,Z=N.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;H(3894)(y,G);var Ce=O.errorOrDestroy,De=["error","close","destroy","pause","resume"];function Oe(se,Ee,Re){j=j||H(1339),"boolean"!=typeof Re&&(Re=Ee instanceof j),this.objectMode=!!(se=se||{}).objectMode,Re&&(this.objectMode=this.objectMode||!!se.readableObjectMode),this.highWaterMark=B(this,se,"readableHighWaterMark",Re),this.buffer=new S,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==se.emitClose,this.autoDestroy=!!se.autoDestroy,this.destroyed=!1,this.defaultEncoding=se.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,se.encoding&&(ee||(ee=H(3054).s),this.decoder=new ee(se.encoding),this.encoding=se.encoding)}function y(se){if(j=j||H(1339),!(this instanceof y))return new y(se);this._readableState=new Oe(se,this,this instanceof j),this.readable=!0,se&&("function"==typeof se.read&&(this._read=se.read),"function"==typeof se.destroy&&(this._destroy=se.destroy)),G.call(this)}function o(se,Ee,Re,Ge,ui){x("readableAddChunk",Ee);var Ye,qe=se._readableState;if(null===Ee)qe.reading=!1,function w(se,Ee){if(x("onEofChunk"),!Ee.ended){if(Ee.decoder){var Re=Ee.decoder.end();Re&&Re.length&&(Ee.buffer.push(Re),Ee.length+=Ee.objectMode?1:Re.length)}Ee.ended=!0,Ee.sync?g(se):(Ee.needReadable=!1,Ee.emittedReadable||(Ee.emittedReadable=!0,s(se)))}}(se,qe);else if(ui||(Ye=function f(se,Ee){var Re;return!function E(se){return p.isBuffer(se)||se instanceof k}(Ee)&&"string"!=typeof Ee&&void 0!==Ee&&!se.objectMode&&(Re=new z("chunk",["string","Buffer","Uint8Array"],Ee)),Re}(qe,Ee)),Ye)Ce(se,Ye);else if(qe.objectMode||Ee&&Ee.length>0)if("string"!=typeof Ee&&!qe.objectMode&&Object.getPrototypeOf(Ee)!==p.prototype&&(Ee=function P(se){return p.from(se)}(Ee)),Ge)qe.endEmitted?Ce(se,new Z):l(se,qe,Ee,!0);else if(qe.ended)Ce(se,new X);else{if(qe.destroyed)return!1;qe.reading=!1,qe.decoder&&!Re?(Ee=qe.decoder.write(Ee),qe.objectMode||0!==Ee.length?l(se,qe,Ee,!1):v(se,qe)):l(se,qe,Ee,!1)}else Ge||(qe.reading=!1,v(se,qe));return!qe.ended&&(qe.length<qe.highWaterMark||0===qe.length)}function l(se,Ee,Re,Ge){Ee.flowing&&0===Ee.length&&!Ee.sync?(Ee.awaitDrain=0,se.emit("data",Re)):(Ee.length+=Ee.objectMode?1:Re.length,Ge?Ee.buffer.unshift(Re):Ee.buffer.push(Re),Ee.needReadable&&g(se)),v(se,Ee)}Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Ee){!this._readableState||(this._readableState.destroyed=Ee)}}),y.prototype.destroy=O.destroy,y.prototype._undestroy=O.undestroy,y.prototype._destroy=function(se,Ee){Ee(se)},y.prototype.push=function(se,Ee){var Ge,Re=this._readableState;return Re.objectMode?Ge=!0:"string"==typeof se&&((Ee=Ee||Re.defaultEncoding)!==Re.encoding&&(se=p.from(se,Ee),Ee=""),Ge=!0),o(this,se,Ee,!1,Ge)},y.prototype.unshift=function(se){return o(this,se,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(se){ee||(ee=H(3054).s);var Ee=new ee(se);this._readableState.decoder=Ee,this._readableState.encoding=this._readableState.decoder.encoding;for(var Re=this._readableState.buffer.head,Ge="";null!==Re;)Ge+=Ee.write(Re.data),Re=Re.next;return this._readableState.buffer.clear(),""!==Ge&&this._readableState.buffer.push(Ge),this._readableState.length=Ge.length,this};var u=1073741824;function b(se,Ee){return se<=0||0===Ee.length&&Ee.ended?0:Ee.objectMode?1:se!=se?Ee.flowing&&Ee.length?Ee.buffer.head.data.length:Ee.length:(se>Ee.highWaterMark&&(Ee.highWaterMark=function h(se){return se>=u?se=u:(se--,se|=se>>>1,se|=se>>>2,se|=se>>>4,se|=se>>>8,se|=se>>>16,se++),se}(se)),se<=Ee.length?se:Ee.ended?Ee.length:(Ee.needReadable=!0,0))}function g(se){var Ee=se._readableState;x("emitReadable",Ee.needReadable,Ee.emittedReadable),Ee.needReadable=!1,Ee.emittedReadable||(x("emitReadable",Ee.flowing),Ee.emittedReadable=!0,process.nextTick(s,se))}function s(se){var Ee=se._readableState;x("emitReadable_",Ee.destroyed,Ee.length,Ee.ended),!Ee.destroyed&&(Ee.length||Ee.ended)&&(se.emit("readable"),Ee.emittedReadable=!1),Ee.needReadable=!Ee.flowing&&!Ee.ended&&Ee.length<=Ee.highWaterMark,Pe(se)}function v(se,Ee){Ee.readingMore||(Ee.readingMore=!0,process.nextTick($,se,Ee))}function $(se,Ee){for(;!Ee.reading&&!Ee.ended&&(Ee.length<Ee.highWaterMark||Ee.flowing&&0===Ee.length);){var Re=Ee.length;if(x("maybeReadMore read 0"),se.read(0),Re===Ee.length)break}Ee.readingMore=!1}function ie(se){var Ee=se._readableState;Ee.readableListening=se.listenerCount("readable")>0,Ee.resumeScheduled&&!Ee.paused?Ee.flowing=!0:se.listenerCount("data")>0&&se.resume()}function Se(se){x("readable nexttick read 0"),se.read(0)}function Be(se,Ee){x("resume",Ee.reading),Ee.reading||se.read(0),Ee.resumeScheduled=!1,se.emit("resume"),Pe(se),Ee.flowing&&!Ee.reading&&se.read(0)}function Pe(se){var Ee=se._readableState;for(x("flow",Ee.flowing);Ee.flowing&&null!==se.read(););}function Te(se,Ee){return 0===Ee.length?null:(Ee.objectMode?Re=Ee.buffer.shift():!se||se>=Ee.length?(Re=Ee.decoder?Ee.buffer.join(""):1===Ee.buffer.length?Ee.buffer.first():Ee.buffer.concat(Ee.length),Ee.buffer.clear()):Re=Ee.buffer.consume(se,Ee.decoder),Re);var Re}function Ie(se){var Ee=se._readableState;x("endReadable",Ee.endEmitted),Ee.endEmitted||(Ee.ended=!0,process.nextTick(Vt,Ee,se))}function Vt(se,Ee){if(x("endReadableNT",se.endEmitted,se.length),!se.endEmitted&&0===se.length&&(se.endEmitted=!0,Ee.readable=!1,Ee.emit("end"),se.autoDestroy)){var Re=Ee._writableState;(!Re||Re.autoDestroy&&Re.finished)&&Ee.destroy()}}function je(se,Ee){for(var Re=0,Ge=se.length;Re<Ge;Re++)if(se[Re]===Ee)return Re;return-1}y.prototype.read=function(se){x("read",se),se=parseInt(se,10);var Ee=this._readableState,Re=se;if(0!==se&&(Ee.emittedReadable=!1),0===se&&Ee.needReadable&&((0!==Ee.highWaterMark?Ee.length>=Ee.highWaterMark:Ee.length>0)||Ee.ended))return x("read: emitReadable",Ee.length,Ee.ended),0===Ee.length&&Ee.ended?Ie(this):g(this),null;if(0===(se=b(se,Ee))&&Ee.ended)return 0===Ee.length&&Ie(this),null;var ui,Ge=Ee.needReadable;return x("need readable",Ge),(0===Ee.length||Ee.length-se<Ee.highWaterMark)&&x("length less than watermark",Ge=!0),Ee.ended||Ee.reading?x("reading or ended",Ge=!1):Ge&&(x("do read"),Ee.reading=!0,Ee.sync=!0,0===Ee.length&&(Ee.needReadable=!0),this._read(Ee.highWaterMark),Ee.sync=!1,Ee.reading||(se=b(Re,Ee))),null===(ui=se>0?Te(se,Ee):null)?(Ee.needReadable=Ee.length<=Ee.highWaterMark,se=0):(Ee.length-=se,Ee.awaitDrain=0),0===Ee.length&&(Ee.ended||(Ee.needReadable=!0),Re!==se&&Ee.ended&&Ie(this)),null!==ui&&this.emit("data",ui),ui},y.prototype._read=function(se){Ce(this,new U("_read()"))},y.prototype.pipe=function(se,Ee){var Re=this,Ge=this._readableState;switch(Ge.pipesCount){case 0:Ge.pipes=se;break;case 1:Ge.pipes=[Ge.pipes,se];break;default:Ge.pipes.push(se)}Ge.pipesCount+=1,x("pipe count=%d opts=%j",Ge.pipesCount,Ee);var qe=Ee&&!1===Ee.end||se===process.stdout||se===process.stderr?J:xi;function xi(){x("onend"),se.end()}Ge.endEmitted?process.nextTick(qe):Re.once("end",qe),se.on("unpipe",function Ye(re,ve){x("onunpipe"),re===Re&&ve&&!1===ve.hasUnpiped&&(ve.hasUnpiped=!0,function qi(){x("cleanup"),se.removeListener("close",rn),se.removeListener("finish",le),se.removeListener("drain",et),se.removeListener("error",Qe),se.removeListener("unpipe",Ye),Re.removeListener("end",xi),Re.removeListener("end",J),Re.removeListener("data",ut),Ke=!0,Ge.awaitDrain&&(!se._writableState||se._writableState.needDrain)&&et()}())});var et=function L(se){return function(){var Re=se._readableState;x("pipeOnDrain",Re.awaitDrain),Re.awaitDrain&&Re.awaitDrain--,0===Re.awaitDrain&&I(se,"data")&&(Re.flowing=!0,Pe(se))}}(Re);se.on("drain",et);var Ke=!1;function ut(re){x("ondata");var ve=se.write(re);x("dest.write",ve),!1===ve&&((1===Ge.pipesCount&&Ge.pipes===se||Ge.pipesCount>1&&-1!==je(Ge.pipes,se))&&!Ke&&(x("false write response, pause",Ge.awaitDrain),Ge.awaitDrain++),Re.pause())}function Qe(re){x("onerror",re),J(),se.removeListener("error",Qe),0===I(se,"error")&&Ce(se,re)}function rn(){se.removeListener("finish",le),J()}function le(){x("onfinish"),se.removeListener("close",rn),J()}function J(){x("unpipe"),Re.unpipe(se)}return Re.on("data",ut),function we(se,Ee,Re){if("function"==typeof se.prependListener)return se.prependListener(Ee,Re);se._events&&se._events[Ee]?Array.isArray(se._events[Ee])?se._events[Ee].unshift(Re):se._events[Ee]=[Re,se._events[Ee]]:se.on(Ee,Re)}(se,"error",Qe),se.once("close",rn),se.once("finish",le),se.emit("pipe",Re),Ge.flowing||(x("pipe resume"),Re.resume()),se},y.prototype.unpipe=function(se){var Ee=this._readableState,Re={hasUnpiped:!1};if(0===Ee.pipesCount)return this;if(1===Ee.pipesCount)return se&&se!==Ee.pipes||(se||(se=Ee.pipes),Ee.pipes=null,Ee.pipesCount=0,Ee.flowing=!1,se&&se.emit("unpipe",this,Re)),this;if(!se){var Ge=Ee.pipes,ui=Ee.pipesCount;Ee.pipes=null,Ee.pipesCount=0,Ee.flowing=!1;for(var qe=0;qe<ui;qe++)Ge[qe].emit("unpipe",this,{hasUnpiped:!1});return this}var Ye=je(Ee.pipes,se);return-1===Ye||(Ee.pipes.splice(Ye,1),Ee.pipesCount-=1,1===Ee.pipesCount&&(Ee.pipes=Ee.pipes[0]),se.emit("unpipe",this,Re)),this},y.prototype.addListener=y.prototype.on=function(se,Ee){var Re=G.prototype.on.call(this,se,Ee),Ge=this._readableState;return"data"===se?(Ge.readableListening=this.listenerCount("readable")>0,!1!==Ge.flowing&&this.resume()):"readable"===se&&!Ge.endEmitted&&!Ge.readableListening&&(Ge.readableListening=Ge.needReadable=!0,Ge.flowing=!1,Ge.emittedReadable=!1,x("on readable",Ge.length,Ge.reading),Ge.length?g(this):Ge.reading||process.nextTick(Se,this)),Re},y.prototype.removeListener=function(se,Ee){var Re=G.prototype.removeListener.call(this,se,Ee);return"readable"===se&&process.nextTick(ie,this),Re},y.prototype.removeAllListeners=function(se){var Ee=G.prototype.removeAllListeners.apply(this,arguments);return("readable"===se||void 0===se)&&process.nextTick(ie,this),Ee},y.prototype.resume=function(){var se=this._readableState;return se.flowing||(x("resume"),se.flowing=!se.readableListening,function ke(se,Ee){Ee.resumeScheduled||(Ee.resumeScheduled=!0,process.nextTick(Be,se,Ee))}(this,se)),se.paused=!1,this},y.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},y.prototype.wrap=function(se){var Ee=this,Re=this._readableState,Ge=!1;for(var ui in se.on("end",function(){if(x("wrapped end"),Re.decoder&&!Re.ended){var Ye=Re.decoder.end();Ye&&Ye.length&&Ee.push(Ye)}Ee.push(null)}),se.on("data",function(Ye){x("wrapped data"),Re.decoder&&(Ye=Re.decoder.write(Ye)),Re.objectMode&&null==Ye||!(Re.objectMode||Ye&&Ye.length)||Ee.push(Ye)||(Ge=!0,se.pause())}),se)void 0===this[ui]&&"function"==typeof se[ui]&&(this[ui]=function(xi){return function(){return se[xi].apply(se,arguments)}}(ui));for(var qe=0;qe<De.length;qe++)se.on(De[qe],this.emit.bind(this,De[qe]));return this._read=function(Ye){x("wrapped _read",Ye),Ge&&(Ge=!1,se.resume())},this},"function"==typeof Symbol&&(y.prototype[Symbol.asyncIterator]=function(){return void 0===ae&&(ae=H(3872)),ae(this)}),Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(y.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(y.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ee){this._readableState&&(this._readableState.flowing=Ee)}}),y._fromList=Te,Object.defineProperty(y.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(y.from=function(se,Ee){return void 0===ge&&(ge=H(7412)),ge(y,se,Ee)})},6025:(ye,ue,H)=>{"use strict";ye.exports=E;var j=H(891).q,W=j.ERR_METHOD_NOT_IMPLEMENTED,I=j.ERR_MULTIPLE_CALLBACK,G=j.ERR_TRANSFORM_ALREADY_TRANSFORMING,p=j.ERR_TRANSFORM_WITH_LENGTH_0,k=H(1339);function P(S,O){var C=this._transformState;C.transforming=!1;var B=C.writecb;if(null===B)return this.emit("error",new I);C.writechunk=null,C.writecb=null,null!=O&&this.push(O),B(S);var N=this._readableState;N.reading=!1,(N.needReadable||N.length<N.highWaterMark)&&this._read(N.highWaterMark)}function E(S){if(!(this instanceof E))return new E(S);k.call(this,S),this._transformState={afterTransform:P.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,S&&("function"==typeof S.transform&&(this._transform=S.transform),"function"==typeof S.flush&&(this._flush=S.flush)),this.on("prefinish",R)}function R(){var S=this;"function"!=typeof this._flush||this._readableState.destroyed?x(this,null,null):this._flush(function(O,C){x(S,O,C)})}function x(S,O,C){if(O)return S.emit("error",O);if(null!=C&&S.push(C),S._writableState.length)throw new p;if(S._transformState.transforming)throw new G;return S.push(null)}H(3894)(E,k),E.prototype.push=function(S,O){return this._transformState.needTransform=!1,k.prototype.push.call(this,S,O)},E.prototype._transform=function(S,O,C){C(new W("_transform()"))},E.prototype._write=function(S,O,C){var B=this._transformState;if(B.writecb=C,B.writechunk=S,B.writeencoding=O,!B.transforming){var N=this._readableState;(B.needTransform||N.needReadable||N.length<N.highWaterMark)&&this._read(N.highWaterMark)}},E.prototype._read=function(S){var O=this._transformState;null===O.writechunk||O.transforming?O.needTransform=!0:(O.transforming=!0,this._transform(O.writechunk,O.writeencoding,O.afterTransform))},E.prototype._destroy=function(S,O){k.prototype._destroy.call(this,S,function(C){O(C)})}},520:(ye,ue,H)=>{"use strict";function W(Pe){var Te=this;this.next=null,this.entry=null,this.finish=function(){!function Be(Pe,Te,Ie){var Vt=Pe.entry;for(Pe.entry=null;Vt;){var je=Vt.callback;Te.pendingcb--,je(Ie),Vt=Vt.next}Te.corkedRequestsFree.next=Pe}(Te,Pe)}}var I;ye.exports=Oe,Oe.WritableState=De;var we,G={deprecate:H(3532)},p=H(4970),k=H(3172).Buffer,P=global.Uint8Array||function(){},x=H(1920),O=H(7102).getHighWaterMark,C=H(891).q,B=C.ERR_INVALID_ARG_TYPE,N=C.ERR_METHOD_NOT_IMPLEMENTED,z=C.ERR_MULTIPLE_CALLBACK,X=C.ERR_STREAM_CANNOT_PIPE,U=C.ERR_STREAM_DESTROYED,Z=C.ERR_STREAM_NULL_VALUES,ee=C.ERR_STREAM_WRITE_AFTER_END,ae=C.ERR_UNKNOWN_ENCODING,ge=x.errorOrDestroy;function Ce(){}function De(Pe,Te,Ie){I=I||H(1339),"boolean"!=typeof Ie&&(Ie=Te instanceof I),this.objectMode=!!(Pe=Pe||{}).objectMode,Ie&&(this.objectMode=this.objectMode||!!Pe.writableObjectMode),this.highWaterMark=O(this,Pe,"writableHighWaterMark",Ie),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===Pe.decodeStrings),this.defaultEncoding=Pe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(je){!function w(Pe,Te){var Ie=Pe._writableState,Vt=Ie.sync,je=Ie.writecb;if("function"!=typeof je)throw new z;if(function b(Pe){Pe.writing=!1,Pe.writecb=null,Pe.length-=Pe.writelen,Pe.writelen=0}(Ie),Te)!function h(Pe,Te,Ie,Vt,je){--Te.pendingcb,Ie?(process.nextTick(je,Vt),process.nextTick(Se,Pe,Te),Pe._writableState.errorEmitted=!0,ge(Pe,Vt)):(je(Vt),Pe._writableState.errorEmitted=!0,ge(Pe,Vt),Se(Pe,Te))}(Pe,Ie,Vt,Te,je);else{var se=$(Ie)||Pe.destroyed;!se&&!Ie.corked&&!Ie.bufferProcessing&&Ie.bufferedRequest&&v(Pe,Ie),Vt?process.nextTick(g,Pe,Ie,se,je):g(Pe,Ie,se,je)}}(Te,je)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==Pe.emitClose,this.autoDestroy=!!Pe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new W(this)}function Oe(Pe){var Te=this instanceof(I=I||H(1339));if(!Te&&!we.call(Oe,this))return new Oe(Pe);this._writableState=new De(Pe,this,Te),this.writable=!0,Pe&&("function"==typeof Pe.write&&(this._write=Pe.write),"function"==typeof Pe.writev&&(this._writev=Pe.writev),"function"==typeof Pe.destroy&&(this._destroy=Pe.destroy),"function"==typeof Pe.final&&(this._final=Pe.final)),p.call(this)}function u(Pe,Te,Ie,Vt,je,se,Ee){Te.writelen=Vt,Te.writecb=Ee,Te.writing=!0,Te.sync=!0,Te.destroyed?Te.onwrite(new U("write")):Ie?Pe._writev(je,Te.onwrite):Pe._write(je,se,Te.onwrite),Te.sync=!1}function g(Pe,Te,Ie,Vt){Ie||function s(Pe,Te){0===Te.length&&Te.needDrain&&(Te.needDrain=!1,Pe.emit("drain"))}(Pe,Te),Te.pendingcb--,Vt(),Se(Pe,Te)}function v(Pe,Te){Te.bufferProcessing=!0;var Ie=Te.bufferedRequest;if(Pe._writev&&Ie&&Ie.next){var je=new Array(Te.bufferedRequestCount),se=Te.corkedRequestsFree;se.entry=Ie;for(var Ee=0,Re=!0;Ie;)je[Ee]=Ie,Ie.isBuf||(Re=!1),Ie=Ie.next,Ee+=1;je.allBuffers=Re,u(Pe,Te,!0,Te.length,je,"",se.finish),Te.pendingcb++,Te.lastBufferedRequest=null,se.next?(Te.corkedRequestsFree=se.next,se.next=null):Te.corkedRequestsFree=new W(Te),Te.bufferedRequestCount=0}else{for(;Ie;){var Ge=Ie.chunk;if(u(Pe,Te,!1,Te.objectMode?1:Ge.length,Ge,Ie.encoding,Ie.callback),Ie=Ie.next,Te.bufferedRequestCount--,Te.writing)break}null===Ie&&(Te.lastBufferedRequest=null)}Te.bufferedRequest=Ie,Te.bufferProcessing=!1}function $(Pe){return Pe.ending&&0===Pe.length&&null===Pe.bufferedRequest&&!Pe.finished&&!Pe.writing}function L(Pe,Te){Pe._final(function(Ie){Te.pendingcb--,Ie&&ge(Pe,Ie),Te.prefinished=!0,Pe.emit("prefinish"),Se(Pe,Te)})}function Se(Pe,Te){var Ie=$(Te);if(Ie&&(function ie(Pe,Te){!Te.prefinished&&!Te.finalCalled&&("function"!=typeof Pe._final||Te.destroyed?(Te.prefinished=!0,Pe.emit("prefinish")):(Te.pendingcb++,Te.finalCalled=!0,process.nextTick(L,Pe,Te)))}(Pe,Te),0===Te.pendingcb&&(Te.finished=!0,Pe.emit("finish"),Te.autoDestroy))){var Vt=Pe._readableState;(!Vt||Vt.autoDestroy&&Vt.endEmitted)&&Pe.destroy()}return Ie}H(3894)(Oe,p),De.prototype.getBuffer=function(){for(var Te=this.bufferedRequest,Ie=[];Te;)Ie.push(Te),Te=Te.next;return Ie},function(){try{Object.defineProperty(De.prototype,"buffer",{get:G.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Pe){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(we=Function.prototype[Symbol.hasInstance],Object.defineProperty(Oe,Symbol.hasInstance,{value:function(Te){return!!we.call(this,Te)||this===Oe&&Te&&Te._writableState instanceof De}})):we=function(Te){return Te instanceof this},Oe.prototype.pipe=function(){ge(this,new X)},Oe.prototype.write=function(Pe,Te,Ie){var Vt=this._writableState,je=!1,se=!Vt.objectMode&&function R(Pe){return k.isBuffer(Pe)||Pe instanceof P}(Pe);return se&&!k.isBuffer(Pe)&&(Pe=function E(Pe){return k.from(Pe)}(Pe)),"function"==typeof Te&&(Ie=Te,Te=null),se?Te="buffer":Te||(Te=Vt.defaultEncoding),"function"!=typeof Ie&&(Ie=Ce),Vt.ending?function y(Pe,Te){var Ie=new ee;ge(Pe,Ie),process.nextTick(Te,Ie)}(this,Ie):(se||function o(Pe,Te,Ie,Vt){var je;return null===Ie?je=new Z:"string"!=typeof Ie&&!Te.objectMode&&(je=new B("chunk",["string","Buffer"],Ie)),!je||(ge(Pe,je),process.nextTick(Vt,je),!1)}(this,Vt,Pe,Ie))&&(Vt.pendingcb++,je=function f(Pe,Te,Ie,Vt,je,se){if(!Ie){var Ee=function l(Pe,Te,Ie){return!Pe.objectMode&&!1!==Pe.decodeStrings&&"string"==typeof Te&&(Te=k.from(Te,Ie)),Te}(Te,Vt,je);Vt!==Ee&&(Ie=!0,je="buffer",Vt=Ee)}var Re=Te.objectMode?1:Vt.length;Te.length+=Re;var Ge=Te.length<Te.highWaterMark;if(Ge||(Te.needDrain=!0),Te.writing||Te.corked){var ui=Te.lastBufferedRequest;Te.lastBufferedRequest={chunk:Vt,encoding:je,isBuf:Ie,callback:se,next:null},ui?ui.next=Te.lastBufferedRequest:Te.bufferedRequest=Te.lastBufferedRequest,Te.bufferedRequestCount+=1}else u(Pe,Te,!1,Re,Vt,je,se);return Ge}(this,Vt,se,Pe,Te,Ie)),je},Oe.prototype.cork=function(){this._writableState.corked++},Oe.prototype.uncork=function(){var Pe=this._writableState;Pe.corked&&(Pe.corked--,!Pe.writing&&!Pe.corked&&!Pe.bufferProcessing&&Pe.bufferedRequest&&v(this,Pe))},Oe.prototype.setDefaultEncoding=function(Te){if("string"==typeof Te&&(Te=Te.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Te+"").toLowerCase())>-1))throw new ae(Te);return this._writableState.defaultEncoding=Te,this},Object.defineProperty(Oe.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Oe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Oe.prototype._write=function(Pe,Te,Ie){Ie(new N("_write()"))},Oe.prototype._writev=null,Oe.prototype.end=function(Pe,Te,Ie){var Vt=this._writableState;return"function"==typeof Pe?(Ie=Pe,Pe=null,Te=null):"function"==typeof Te&&(Ie=Te,Te=null),null!=Pe&&this.write(Pe,Te),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||function ke(Pe,Te,Ie){Te.ending=!0,Se(Pe,Te),Ie&&(Te.finished?process.nextTick(Ie):Pe.once("finish",Ie)),Te.ended=!0,Pe.writable=!1}(this,Vt,Ie),this},Object.defineProperty(Oe.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Oe.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Te){!this._writableState||(this._writableState.destroyed=Te)}}),Oe.prototype.destroy=x.destroy,Oe.prototype._undestroy=x.undestroy,Oe.prototype._destroy=function(Pe,Te){Te(Pe)}},3872:(ye,ue,H)=>{"use strict";var j;function W(U,Z,ee){return Z in U?Object.defineProperty(U,Z,{value:ee,enumerable:!0,configurable:!0,writable:!0}):U[Z]=ee,U}var I=H(7542),G=Symbol("lastResolve"),p=Symbol("lastReject"),k=Symbol("error"),P=Symbol("ended"),E=Symbol("lastPromise"),R=Symbol("handlePromise"),x=Symbol("stream");function S(U,Z){return{value:U,done:Z}}function O(U){var Z=U[G];if(null!==Z){var ee=U[x].read();null!==ee&&(U[E]=null,U[G]=null,U[p]=null,Z(S(ee,!1)))}}function C(U){process.nextTick(O,U)}var N=Object.getPrototypeOf(function(){}),z=Object.setPrototypeOf((W(j={get stream(){return this[x]},next:function(){var Z=this,ee=this[k];if(null!==ee)return Promise.reject(ee);if(this[P])return Promise.resolve(S(void 0,!0));if(this[x].destroyed)return new Promise(function(De,we){process.nextTick(function(){Z[k]?we(Z[k]):De(S(void 0,!0))})});var ge,ae=this[E];if(ae)ge=new Promise(function B(U,Z){return function(ee,ae){U.then(function(){Z[P]?ee(S(void 0,!0)):Z[R](ee,ae)},ae)}}(ae,this));else{var Ce=this[x].read();if(null!==Ce)return Promise.resolve(S(Ce,!1));ge=new Promise(this[R])}return this[E]=ge,ge}},Symbol.asyncIterator,function(){return this}),W(j,"return",function(){var Z=this;return new Promise(function(ee,ae){Z[x].destroy(null,function(ge){ge?ae(ge):ee(S(void 0,!0))})})}),j),N);ye.exports=function(Z){var ee,ae=Object.create(z,(W(ee={},x,{value:Z,writable:!0}),W(ee,G,{value:null,writable:!0}),W(ee,p,{value:null,writable:!0}),W(ee,k,{value:null,writable:!0}),W(ee,P,{value:Z._readableState.endEmitted,writable:!0}),W(ee,R,{value:function(Ce,De){var we=ae[x].read();we?(ae[E]=null,ae[G]=null,ae[p]=null,Ce(S(we,!1))):(ae[G]=Ce,ae[p]=De)},writable:!0}),ee));return ae[E]=null,I(Z,function(ge){if(ge&&"ERR_STREAM_PREMATURE_CLOSE"!==ge.code){var Ce=ae[p];return null!==Ce&&(ae[E]=null,ae[G]=null,ae[p]=null,Ce(ge)),void(ae[k]=ge)}var De=ae[G];null!==De&&(ae[E]=null,ae[G]=null,ae[p]=null,De(S(void 0,!0))),ae[P]=!0}),Z.on("readable",C.bind(null,ae)),ae}},5019:(ye,ue,H)=>{"use strict";function j(C,B){var N=Object.keys(C);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(C);B&&(z=z.filter(function(X){return Object.getOwnPropertyDescriptor(C,X).enumerable})),N.push.apply(N,z)}return N}function I(C,B,N){return B in C?Object.defineProperty(C,B,{value:N,enumerable:!0,configurable:!0,writable:!0}):C[B]=N,C}function p(C,B){for(var N=0;N<B.length;N++){var z=B[N];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(C,z.key,z)}}var E=H(3172).Buffer,x=H(2361).inspect,S=x&&x.custom||"inspect";function O(C,B,N){E.prototype.copy.call(C,B,N)}ye.exports=function(){function C(){(function G(C,B){if(!(C instanceof B))throw new TypeError("Cannot call a class as a function")})(this,C),this.head=null,this.tail=null,this.length=0}return function k(C,B,N){B&&p(C.prototype,B),N&&p(C,N)}(C,[{key:"push",value:function(N){var z={data:N,next:null};this.length>0?this.tail.next=z:this.head=z,this.tail=z,++this.length}},{key:"unshift",value:function(N){var z={data:N,next:this.head};0===this.length&&(this.tail=z),this.head=z,++this.length}},{key:"shift",value:function(){if(0!==this.length){var N=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,N}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(N){if(0===this.length)return"";for(var z=this.head,X=""+z.data;z=z.next;)X+=N+z.data;return X}},{key:"concat",value:function(N){if(0===this.length)return E.alloc(0);for(var z=E.allocUnsafe(N>>>0),X=this.head,U=0;X;)O(X.data,z,U),U+=X.data.length,X=X.next;return z}},{key:"consume",value:function(N,z){var X;return N<this.head.data.length?(X=this.head.data.slice(0,N),this.head.data=this.head.data.slice(N)):X=N===this.head.data.length?this.shift():z?this._getString(N):this._getBuffer(N),X}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(N){var z=this.head,X=1,U=z.data;for(N-=U.length;z=z.next;){var Z=z.data,ee=N>Z.length?Z.length:N;if(U+=ee===Z.length?Z:Z.slice(0,N),0==(N-=ee)){ee===Z.length?(++X,this.head=z.next?z.next:this.tail=null):(this.head=z,z.data=Z.slice(ee));break}++X}return this.length-=X,U}},{key:"_getBuffer",value:function(N){var z=E.allocUnsafe(N),X=this.head,U=1;for(X.data.copy(z),N-=X.data.length;X=X.next;){var Z=X.data,ee=N>Z.length?Z.length:N;if(Z.copy(z,z.length-N,0,ee),0==(N-=ee)){ee===Z.length?(++U,this.head=X.next?X.next:this.tail=null):(this.head=X,X.data=Z.slice(ee));break}++U}return this.length-=U,z}},{key:S,value:function(N,z){return x(this,function W(C){for(var B=1;B<arguments.length;B++){var N=null!=arguments[B]?arguments[B]:{};B%2?j(Object(N),!0).forEach(function(z){I(C,z,N[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(N)):j(Object(N)).forEach(function(z){Object.defineProperty(C,z,Object.getOwnPropertyDescriptor(N,z))})}return C}({},z,{depth:0,customInspect:!1}))}}]),C}()},1920:ye=>{"use strict";function H(p,k){I(p,k),j(p)}function j(p){p._writableState&&!p._writableState.emitClose||p._readableState&&!p._readableState.emitClose||p.emit("close")}function I(p,k){p.emit("error",k)}ye.exports={destroy:function ue(p,k){var P=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(k?k(p):p&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(I,this,p)):process.nextTick(I,this,p)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(p||null,function(x){!k&&x?P._writableState?P._writableState.errorEmitted?process.nextTick(j,P):(P._writableState.errorEmitted=!0,process.nextTick(H,P,x)):process.nextTick(H,P,x):k?(process.nextTick(j,P),k(x)):process.nextTick(j,P)}),this)},undestroy:function W(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function G(p,k){var P=p._readableState,E=p._writableState;P&&P.autoDestroy||E&&E.autoDestroy?p.destroy(k):p.emit("error",k)}}},7542:(ye,ue,H)=>{"use strict";var j=H(891).q.ERR_STREAM_PREMATURE_CLOSE;function I(){}ye.exports=function p(k,P,E){if("function"==typeof P)return p(k,null,P);P||(P={}),E=function W(k){var P=!1;return function(){if(!P){P=!0;for(var E=arguments.length,R=new Array(E),x=0;x<E;x++)R[x]=arguments[x];k.apply(this,R)}}}(E||I);var R=P.readable||!1!==P.readable&&k.readable,x=P.writable||!1!==P.writable&&k.writable,S=function(){k.writable||C()},O=k._writableState&&k._writableState.finished,C=function(){x=!1,O=!0,R||E.call(k)},B=k._readableState&&k._readableState.endEmitted,N=function(){R=!1,B=!0,x||E.call(k)},z=function(ee){E.call(k,ee)},X=function(){var ee;return R&&!B?((!k._readableState||!k._readableState.ended)&&(ee=new j),E.call(k,ee)):x&&!O?((!k._writableState||!k._writableState.ended)&&(ee=new j),E.call(k,ee)):void 0},U=function(){k.req.on("finish",C)};return function G(k){return k.setHeader&&"function"==typeof k.abort}(k)?(k.on("complete",C),k.on("abort",X),k.req?U():k.on("request",U)):x&&!k._writableState&&(k.on("end",S),k.on("close",S)),k.on("end",N),k.on("finish",C),!1!==P.error&&k.on("error",z),k.on("close",X),function(){k.removeListener("complete",C),k.removeListener("abort",X),k.removeListener("request",U),k.req&&k.req.removeListener("finish",C),k.removeListener("end",S),k.removeListener("close",S),k.removeListener("finish",C),k.removeListener("end",N),k.removeListener("error",z),k.removeListener("close",X)}}},7412:ye=>{ye.exports=function(){throw new Error("Readable.from is not available in the browser")}},954:(ye,ue,H)=>{"use strict";var j,I=H(891).q,G=I.ERR_MISSING_ARGS,p=I.ERR_STREAM_DESTROYED;function k(C){if(C)throw C}function E(C,B,N,z){z=function W(C){var B=!1;return function(){B||(B=!0,C.apply(void 0,arguments))}}(z);var X=!1;C.on("close",function(){X=!0}),void 0===j&&(j=H(7542)),j(C,{readable:B,writable:N},function(Z){if(Z)return z(Z);X=!0,z()});var U=!1;return function(Z){if(!X&&!U){if(U=!0,function P(C){return C.setHeader&&"function"==typeof C.abort}(C))return C.abort();if("function"==typeof C.destroy)return C.destroy();z(Z||new p("pipe"))}}}function R(C){C()}function x(C,B){return C.pipe(B)}function S(C){return C.length&&"function"==typeof C[C.length-1]?C.pop():k}ye.exports=function O(){for(var C=arguments.length,B=new Array(C),N=0;N<C;N++)B[N]=arguments[N];var z=S(B);if(Array.isArray(B[0])&&(B=B[0]),B.length<2)throw new G("streams");var X,U=B.map(function(Z,ee){var ae=ee<B.length-1;return E(Z,ae,ee>0,function(Ce){X||(X=Ce),Ce&&U.forEach(R),!ae&&(U.forEach(R),z(X))})});return B.reduce(x)}},7102:(ye,ue,H)=>{"use strict";var j=H(891).q.ERR_INVALID_OPT_VALUE;ye.exports={getHighWaterMark:function I(G,p,k,P){var E=function W(G,p,k){return null!=G.highWaterMark?G.highWaterMark:p?G[k]:null}(p,P,k);if(null!=E){if(!isFinite(E)||Math.floor(E)!==E||E<0)throw new j(P?k:"highWaterMark",E);return Math.floor(E)}return G.objectMode?16:16384}}},4970:(ye,ue,H)=>{ye.exports=H(9069).EventEmitter},5685:(ye,ue,H)=>{(ue=ye.exports=H(3154)).Stream=ue,ue.Readable=ue,ue.Writable=H(520),ue.Duplex=H(1339),ue.Transform=H(6025),ue.PassThrough=H(6071),ue.finished=H(7542),ue.pipeline=H(954)},5634:(ye,ue,H)=>{"use strict";var j=H(3172).Buffer,W=H(3894),I=H(9650),G=new Array(16),p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],k=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],P=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],E=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],R=[0,1518500249,1859775393,2400959708,2840853838],x=[1352829926,1548603684,1836072691,2053994217,0];function S(){I.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function O(U,Z){return U<<Z|U>>>32-Z}function C(U,Z,ee,ae,ge,Ce,De,we){return O(U+(Z^ee^ae)+Ce+De|0,we)+ge|0}function B(U,Z,ee,ae,ge,Ce,De,we){return O(U+(Z&ee|~Z&ae)+Ce+De|0,we)+ge|0}function N(U,Z,ee,ae,ge,Ce,De,we){return O(U+((Z|~ee)^ae)+Ce+De|0,we)+ge|0}function z(U,Z,ee,ae,ge,Ce,De,we){return O(U+(Z&ae|ee&~ae)+Ce+De|0,we)+ge|0}function X(U,Z,ee,ae,ge,Ce,De,we){return O(U+(Z^(ee|~ae))+Ce+De|0,we)+ge|0}W(S,I),S.prototype._update=function(){for(var U=G,Z=0;Z<16;++Z)U[Z]=this._block.readInt32LE(4*Z);for(var ee=0|this._a,ae=0|this._b,ge=0|this._c,Ce=0|this._d,De=0|this._e,we=0|this._a,Oe=0|this._b,y=0|this._c,o=0|this._d,l=0|this._e,f=0;f<80;f+=1){var u,h;f<16?(u=C(ee,ae,ge,Ce,De,U[p[f]],R[0],P[f]),h=X(we,Oe,y,o,l,U[k[f]],x[0],E[f])):f<32?(u=B(ee,ae,ge,Ce,De,U[p[f]],R[1],P[f]),h=z(we,Oe,y,o,l,U[k[f]],x[1],E[f])):f<48?(u=N(ee,ae,ge,Ce,De,U[p[f]],R[2],P[f]),h=N(we,Oe,y,o,l,U[k[f]],x[2],E[f])):f<64?(u=z(ee,ae,ge,Ce,De,U[p[f]],R[3],P[f]),h=B(we,Oe,y,o,l,U[k[f]],x[3],E[f])):(u=X(ee,ae,ge,Ce,De,U[p[f]],R[4],P[f]),h=C(we,Oe,y,o,l,U[k[f]],x[4],E[f])),ee=De,De=Ce,Ce=O(ge,10),ge=ae,ae=u,we=l,l=o,o=O(y,10),y=Oe,Oe=h}var b=this._b+ge+o|0;this._b=this._c+Ce+l|0,this._c=this._d+De+we|0,this._d=this._e+ee+Oe|0,this._e=this._a+ae+y|0,this._a=b},S.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var U=j.alloc?j.alloc(20):new j(20);return U.writeInt32LE(this._a,0),U.writeInt32LE(this._b,4),U.writeInt32LE(this._c,8),U.writeInt32LE(this._d,12),U.writeInt32LE(this._e,16),U},ye.exports=S},3502:(ye,ue,H)=>{var j=H(3172),W=j.Buffer;function I(p,k){for(var P in p)k[P]=p[P]}function G(p,k,P){return W(p,k,P)}W.from&&W.alloc&&W.allocUnsafe&&W.allocUnsafeSlow?ye.exports=j:(I(j,ue),ue.Buffer=G),I(W,G),G.from=function(p,k,P){if("number"==typeof p)throw new TypeError("Argument must not be a number");return W(p,k,P)},G.alloc=function(p,k,P){if("number"!=typeof p)throw new TypeError("Argument must be a number");var E=W(p);return void 0!==k?"string"==typeof P?E.fill(k,P):E.fill(k):E.fill(0),E},G.allocUnsafe=function(p){if("number"!=typeof p)throw new TypeError("Argument must be a number");return W(p)},G.allocUnsafeSlow=function(p){if("number"!=typeof p)throw new TypeError("Argument must be a number");return j.SlowBuffer(p)}},2038:(ye,ue,H)=>{"use strict";var G,j=H(3172),W=j.Buffer,I={};for(G in j)!j.hasOwnProperty(G)||"SlowBuffer"===G||"Buffer"===G||(I[G]=j[G]);var p=I.Buffer={};for(G in W)!W.hasOwnProperty(G)||"allocUnsafe"===G||"allocUnsafeSlow"===G||(p[G]=W[G]);if(I.Buffer.prototype=W.prototype,(!p.from||p.from===Uint8Array.from)&&(p.from=function(k,P,E){if("number"==typeof k)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof k);if(k&&void 0===k.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);return W(k,P,E)}),p.alloc||(p.alloc=function(k,P,E){if("number"!=typeof k)throw new TypeError('The "size" argument must be of type number. Received type '+typeof k);if(k<0||k>=2*(1<<30))throw new RangeError('The value "'+k+'" is invalid for option "size"');var R=W(k);return P&&0!==P.length?"string"==typeof E?R.fill(P,E):R.fill(P):R.fill(0),R}),!I.kStringMaxLength)try{I.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(k){}I.constants||(I.constants={MAX_LENGTH:I.kMaxLength},I.kStringMaxLength&&(I.constants.MAX_STRING_LENGTH=I.kStringMaxLength)),ye.exports=I},340:(ye,ue,H)=>{var j=H(9471),W=H(2992),I=H(7657),G=H(5583),p=H(1929),k=H(8083),P=H(3818);P.alea=j,P.xor128=W,P.xorwow=I,P.xorshift7=G,P.xor4096=p,P.tychei=k,ye.exports=P},9471:function(ye,ue,H){var j;!function(W,I,G){function p(R){var x=this,S=function E(){var R=4022871197;return function(S){S=String(S);for(var O=0;O<S.length;O++){var C=.02519603282416938*(R+=S.charCodeAt(O));C-=R=C>>>0,R=(C*=R)>>>0,R+=4294967296*(C-=R)}return 2.3283064365386963e-10*(R>>>0)}}();x.next=function(){var O=2091639*x.s0+2.3283064365386963e-10*x.c;return x.s0=x.s1,x.s1=x.s2,x.s2=O-(x.c=0|O)},x.c=1,x.s0=S(" "),x.s1=S(" "),x.s2=S(" "),x.s0-=S(R),x.s0<0&&(x.s0+=1),x.s1-=S(R),x.s1<0&&(x.s1+=1),x.s2-=S(R),x.s2<0&&(x.s2+=1),S=null}function k(R,x){return x.c=R.c,x.s0=R.s0,x.s1=R.s1,x.s2=R.s2,x}function P(R,x){var S=new p(R),O=x&&x.state,C=S.next;return C.int32=function(){return 4294967296*S.next()|0},C.double=function(){return C()+11102230246251565e-32*(2097152*C()|0)},C.quick=C,O&&("object"==typeof O&&k(O,S),C.state=function(){return k(S,{})}),C}I&&I.exports?I.exports=P:H.amdD&&H.amdO?void 0!==(j=function(){return P}.call(ue,H,ue,I))&&(I.exports=j):this.alea=P}(0,ye=H.nmd(ye))},8083:function(ye,ue,H){var j;!function(W,I,G){function p(E){var R=this,x="";R.next=function(){var O=R.b,C=R.c,B=R.d,N=R.a;return O=O<<25^O>>>7^C,C=C-B|0,B=B<<24^B>>>8^N,N=N-O|0,R.b=O=O<<20^O>>>12^C,R.c=C=C-B|0,R.d=B<<16^C>>>16^N,R.a=N-O|0},R.a=0,R.b=0,R.c=-1640531527,R.d=1367130551,E===Math.floor(E)?(R.a=E/4294967296|0,R.b=0|E):x+=E;for(var S=0;S<x.length+20;S++)R.b^=0|x.charCodeAt(S),R.next()}function k(E,R){return R.a=E.a,R.b=E.b,R.c=E.c,R.d=E.d,R}function P(E,R){var x=new p(E),S=R&&R.state,O=function(){return(x.next()>>>0)/4294967296};return O.double=function(){do{var N=((x.next()>>>11)+(x.next()>>>0)/4294967296)/(1<<21)}while(0===N);return N},O.int32=x.next,O.quick=O,S&&("object"==typeof S&&k(S,x),O.state=function(){return k(x,{})}),O}I&&I.exports?I.exports=P:H.amdD&&H.amdO?void 0!==(j=function(){return P}.call(ue,H,ue,I))&&(I.exports=j):this.tychei=P}(0,ye=H.nmd(ye))},2992:function(ye,ue,H){var j;!function(W,I,G){function p(E){var R=this,x="";R.x=0,R.y=0,R.z=0,R.w=0,R.next=function(){var O=R.x^R.x<<11;return R.x=R.y,R.y=R.z,R.z=R.w,R.w^=R.w>>>19^O^O>>>8},E===(0|E)?R.x=E:x+=E;for(var S=0;S<x.length+64;S++)R.x^=0|x.charCodeAt(S),R.next()}function k(E,R){return R.x=E.x,R.y=E.y,R.z=E.z,R.w=E.w,R}function P(E,R){var x=new p(E),S=R&&R.state,O=function(){return(x.next()>>>0)/4294967296};return O.double=function(){do{var N=((x.next()>>>11)+(x.next()>>>0)/4294967296)/(1<<21)}while(0===N);return N},O.int32=x.next,O.quick=O,S&&("object"==typeof S&&k(S,x),O.state=function(){return k(x,{})}),O}I&&I.exports?I.exports=P:H.amdD&&H.amdO?void 0!==(j=function(){return P}.call(ue,H,ue,I))&&(I.exports=j):this.xor128=P}(0,ye=H.nmd(ye))},1929:function(ye,ue,H){var j;!function(W,I,G){function p(E){var R=this;R.next=function(){var B,N,S=R.w,O=R.X,C=R.i;return R.w=S=S+1640531527|0,N=O[C+34&127],B=O[C=C+1&127],N^=N<<13,B^=B<<17,N=O[C]=(N^=N>>>15)^(B^=B>>>12),R.i=C,N+(S^S>>>16)|0},function x(S,O){var C,B,N,z,X,U=[],Z=128;for(O===(0|O)?(B=O,O=null):(O+="\0",B=0,Z=Math.max(Z,O.length)),N=0,z=-32;z<Z;++z)O&&(B^=O.charCodeAt((z+32)%O.length)),0===z&&(X=B),B^=B<<10,B^=B>>>15,B^=B<<4,B^=B>>>13,z>=0&&(N=0==(C=U[127&z]^=B+(X=X+1640531527|0))?N+1:0);for(N>=128&&(U[127&(O&&O.length||0)]=-1),N=127,z=512;z>0;--z)B=U[N+34&127],C=U[N=N+1&127],B^=B<<13,C^=C<<17,U[N]=(B^=B>>>15)^(C^=C>>>12);S.w=X,S.X=U,S.i=N}(R,E)}function k(E,R){return R.i=E.i,R.w=E.w,R.X=E.X.slice(),R}function P(E,R){null==E&&(E=+new Date);var x=new p(E),S=R&&R.state,O=function(){return(x.next()>>>0)/4294967296};return O.double=function(){do{var N=((x.next()>>>11)+(x.next()>>>0)/4294967296)/(1<<21)}while(0===N);return N},O.int32=x.next,O.quick=O,S&&(S.X&&k(S,x),O.state=function(){return k(x,{})}),O}I&&I.exports?I.exports=P:H.amdD&&H.amdO?void 0!==(j=function(){return P}.call(ue,H,ue,I))&&(I.exports=j):this.xor4096=P}(0,ye=H.nmd(ye))},5583:function(ye,ue,H){var j;!function(W,I,G){function p(E){var R=this;R.next=function(){var C,B,S=R.x,O=R.i;return C=S[O],B=(C^=C>>>7)^C<<24,B^=(C=S[O+1&7])^C>>>10,B^=(C=S[O+3&7])^C>>>3,B^=(C=S[O+4&7])^C<<7,C=S[O+7&7],S[O]=B^=(C^=C<<13)^C<<9,R.i=O+1&7,B},function x(S,O){var C,N=[];if(O===(0|O))N[0]=O;else for(O=""+O,C=0;C<O.length;++C)N[7&C]=N[7&C]<<15^O.charCodeAt(C)+N[C+1&7]<<13;for(;N.length<8;)N.push(0);for(C=0;C<8&&0===N[C];++C);for(8==C&&(N[7]=-1),S.x=N,S.i=0,C=256;C>0;--C)S.next()}(R,E)}function k(E,R){return R.x=E.x.slice(),R.i=E.i,R}function P(E,R){null==E&&(E=+new Date);var x=new p(E),S=R&&R.state,O=function(){return(x.next()>>>0)/4294967296};return O.double=function(){do{var N=((x.next()>>>11)+(x.next()>>>0)/4294967296)/(1<<21)}while(0===N);return N},O.int32=x.next,O.quick=O,S&&(S.x&&k(S,x),O.state=function(){return k(x,{})}),O}I&&I.exports?I.exports=P:H.amdD&&H.amdO?void 0!==(j=function(){return P}.call(ue,H,ue,I))&&(I.exports=j):this.xorshift7=P}(0,ye=H.nmd(ye))},7657:function(ye,ue,H){var j;!function(W,I,G){function p(E){var R=this,x="";R.next=function(){var O=R.x^R.x>>>2;return R.x=R.y,R.y=R.z,R.z=R.w,R.w=R.v,(R.d=R.d+362437|0)+(R.v=R.v^R.v<<4^O^O<<1)|0},R.x=0,R.y=0,R.z=0,R.w=0,R.v=0,E===(0|E)?R.x=E:x+=E;for(var S=0;S<x.length+64;S++)R.x^=0|x.charCodeAt(S),S==x.length&&(R.d=R.x<<10^R.x>>>4),R.next()}function k(E,R){return R.x=E.x,R.y=E.y,R.z=E.z,R.w=E.w,R.v=E.v,R.d=E.d,R}function P(E,R){var x=new p(E),S=R&&R.state,O=function(){return(x.next()>>>0)/4294967296};return O.double=function(){do{var N=((x.next()>>>11)+(x.next()>>>0)/4294967296)/(1<<21)}while(0===N);return N},O.int32=x.next,O.quick=O,S&&("object"==typeof S&&k(S,x),O.state=function(){return k(x,{})}),O}I&&I.exports?I.exports=P:H.amdD&&H.amdO?void 0!==(j=function(){return P}.call(ue,H,ue,I))&&(I.exports=j):this.xorwow=P}(0,ye=H.nmd(ye))},3818:function(ye,ue,H){var j;!function(W,I,G){var C,p=256,R=G.pow(p,6),x=G.pow(2,52),S=2*x,O=255;function B(ae,ge,Ce){var De=[],we=U(X((ge=1==ge?{entropy:!0}:ge||{}).entropy?[ae,ee(I)]:null==ae?function Z(){try{var ae;return C&&(ae=C.randomBytes)?ae=ae(p):(ae=new Uint8Array(p),(W.crypto||W.msCrypto).getRandomValues(ae)),ee(ae)}catch(De){var ge=W.navigator,Ce=ge&&ge.plugins;return[+new Date,W,Ce,W.screen,ee(I)]}}():ae,3),De),Oe=new N(De),y=function(){for(var o=Oe.g(6),l=R,f=0;o<x;)o=(o+f)*p,l*=p,f=Oe.g(1);for(;o>=S;)o/=2,l/=2,f>>>=1;return(o+f)/l};return y.int32=function(){return 0|Oe.g(4)},y.quick=function(){return Oe.g(4)/4294967296},y.double=y,U(ee(Oe.S),I),(ge.pass||Ce||function(o,l,f,u){return u&&(u.S&&z(u,Oe),o.state=function(){return z(Oe,{})}),f?(G.random=o,l):o})(y,we,"global"in ge?ge.global:this==G,ge.state)}function N(ae){var ge,Ce=ae.length,De=this,we=0,Oe=De.i=De.j=0,y=De.S=[];for(Ce||(ae=[Ce++]);we<p;)y[we]=we++;for(we=0;we<p;we++)y[we]=y[Oe=O&Oe+ae[we%Ce]+(ge=y[we])],y[Oe]=ge;(De.g=function(o){for(var l,f=0,u=De.i,h=De.j,b=De.S;o--;)l=b[u=O&u+1],f=f*p+b[O&(b[u]=b[h=O&h+l])+(b[h]=l)];return De.i=u,De.j=h,f})(p)}function z(ae,ge){return ge.i=ae.i,ge.j=ae.j,ge.S=ae.S.slice(),ge}function X(ae,ge){var we,Ce=[],De=typeof ae;if(ge&&"object"==De)for(we in ae)try{Ce.push(X(ae[we],ge-1))}catch(Oe){}return Ce.length?Ce:"string"==De?ae:ae+"\0"}function U(ae,ge){for(var De,Ce=ae+"",we=0;we<Ce.length;)ge[O&we]=O&(De^=19*ge[O&we])+Ce.charCodeAt(we++);return ee(ge)}function ee(ae){return String.fromCharCode.apply(0,ae)}if(U(G.random(),I),ye.exports){ye.exports=B;try{C=H(1348)}catch(ae){}}else void 0!==(j=function(){return B}.call(ue,H,ue,ye))&&(ye.exports=j)}("undefined"!=typeof self?self:this,[],Math)},6692:(ye,ue,H)=>{var j=H(3502).Buffer;function W(I,G){this._block=j.alloc(I),this._finalSize=G,this._blockSize=I,this._len=0}W.prototype.update=function(I,G){"string"==typeof I&&(I=j.from(I,G=G||"utf8"));for(var p=this._block,k=this._blockSize,P=I.length,E=this._len,R=0;R<P;){for(var x=E%k,S=Math.min(P-R,k-x),O=0;O<S;O++)p[x+O]=I[R+O];R+=S,(E+=S)%k==0&&this._update(p)}return this._len+=P,this},W.prototype.digest=function(I){var G=this._len%this._blockSize;this._block[G]=128,this._block.fill(0,G+1),G>=this._finalSize&&(this._update(this._block),this._block.fill(0));var p=8*this._len;if(p<=4294967295)this._block.writeUInt32BE(p,this._blockSize-4);else{var k=(4294967295&p)>>>0;this._block.writeUInt32BE((p-k)/4294967296,this._blockSize-8),this._block.writeUInt32BE(k,this._blockSize-4)}this._update(this._block);var E=this._hash();return I?E.toString(I):E},W.prototype._update=function(){throw new Error("_update must be implemented by subclass")},ye.exports=W},5244:(ye,ue,H)=>{var j=ye.exports=function(I){I=I.toLowerCase();var G=j[I];if(!G)throw new Error(I+" is not supported (we accept pull requests)");return new G};j.sha=H(8932),j.sha1=H(7736),j.sha224=H(5044),j.sha256=H(5014),j.sha384=H(6540),j.sha512=H(117)},8932:(ye,ue,H)=>{var j=H(3894),W=H(6692),I=H(3502).Buffer,G=[1518500249,1859775393,-1894007588,-899497514],p=new Array(80);function k(){this.init(),this._w=p,W.call(this,64,56)}function P(x){return x<<5|x>>>27}function E(x){return x<<30|x>>>2}function R(x,S,O,C){return 0===x?S&O|~S&C:2===x?S&O|S&C|O&C:S^O^C}j(k,W),k.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},k.prototype._update=function(x){for(var S=this._w,O=0|this._a,C=0|this._b,B=0|this._c,N=0|this._d,z=0|this._e,X=0;X<16;++X)S[X]=x.readInt32BE(4*X);for(;X<80;++X)S[X]=S[X-3]^S[X-8]^S[X-14]^S[X-16];for(var U=0;U<80;++U){var Z=~~(U/20),ee=P(O)+R(Z,C,B,N)+z+S[U]+G[Z]|0;z=N,N=B,B=E(C),C=O,O=ee}this._a=O+this._a|0,this._b=C+this._b|0,this._c=B+this._c|0,this._d=N+this._d|0,this._e=z+this._e|0},k.prototype._hash=function(){var x=I.allocUnsafe(20);return x.writeInt32BE(0|this._a,0),x.writeInt32BE(0|this._b,4),x.writeInt32BE(0|this._c,8),x.writeInt32BE(0|this._d,12),x.writeInt32BE(0|this._e,16),x},ye.exports=k},7736:(ye,ue,H)=>{var j=H(3894),W=H(6692),I=H(3502).Buffer,G=[1518500249,1859775393,-1894007588,-899497514],p=new Array(80);function k(){this.init(),this._w=p,W.call(this,64,56)}function P(S){return S<<1|S>>>31}function E(S){return S<<5|S>>>27}function R(S){return S<<30|S>>>2}function x(S,O,C,B){return 0===S?O&C|~O&B:2===S?O&C|O&B|C&B:O^C^B}j(k,W),k.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},k.prototype._update=function(S){for(var O=this._w,C=0|this._a,B=0|this._b,N=0|this._c,z=0|this._d,X=0|this._e,U=0;U<16;++U)O[U]=S.readInt32BE(4*U);for(;U<80;++U)O[U]=P(O[U-3]^O[U-8]^O[U-14]^O[U-16]);for(var Z=0;Z<80;++Z){var ee=~~(Z/20),ae=E(C)+x(ee,B,N,z)+X+O[Z]+G[ee]|0;X=z,z=N,N=R(B),B=C,C=ae}this._a=C+this._a|0,this._b=B+this._b|0,this._c=N+this._c|0,this._d=z+this._d|0,this._e=X+this._e|0},k.prototype._hash=function(){var S=I.allocUnsafe(20);return S.writeInt32BE(0|this._a,0),S.writeInt32BE(0|this._b,4),S.writeInt32BE(0|this._c,8),S.writeInt32BE(0|this._d,12),S.writeInt32BE(0|this._e,16),S},ye.exports=k},5044:(ye,ue,H)=>{var j=H(3894),W=H(5014),I=H(6692),G=H(3502).Buffer,p=new Array(64);function k(){this.init(),this._w=p,I.call(this,64,56)}j(k,W),k.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},k.prototype._hash=function(){var P=G.allocUnsafe(28);return P.writeInt32BE(this._a,0),P.writeInt32BE(this._b,4),P.writeInt32BE(this._c,8),P.writeInt32BE(this._d,12),P.writeInt32BE(this._e,16),P.writeInt32BE(this._f,20),P.writeInt32BE(this._g,24),P},ye.exports=k},5014:(ye,ue,H)=>{var j=H(3894),W=H(6692),I=H(3502).Buffer,G=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);function k(){this.init(),this._w=p,W.call(this,64,56)}function P(C,B,N){return N^C&(B^N)}function E(C,B,N){return C&B|N&(C|B)}function R(C){return(C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10)}function x(C){return(C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7)}function S(C){return(C>>>7|C<<25)^(C>>>18|C<<14)^C>>>3}function O(C){return(C>>>17|C<<15)^(C>>>19|C<<13)^C>>>10}j(k,W),k.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},k.prototype._update=function(C){for(var B=this._w,N=0|this._a,z=0|this._b,X=0|this._c,U=0|this._d,Z=0|this._e,ee=0|this._f,ae=0|this._g,ge=0|this._h,Ce=0;Ce<16;++Ce)B[Ce]=C.readInt32BE(4*Ce);for(;Ce<64;++Ce)B[Ce]=O(B[Ce-2])+B[Ce-7]+S(B[Ce-15])+B[Ce-16]|0;for(var De=0;De<64;++De){var we=ge+x(Z)+P(Z,ee,ae)+G[De]+B[De]|0,Oe=R(N)+E(N,z,X)|0;ge=ae,ae=ee,ee=Z,Z=U+we|0,U=X,X=z,z=N,N=we+Oe|0}this._a=N+this._a|0,this._b=z+this._b|0,this._c=X+this._c|0,this._d=U+this._d|0,this._e=Z+this._e|0,this._f=ee+this._f|0,this._g=ae+this._g|0,this._h=ge+this._h|0},k.prototype._hash=function(){var C=I.allocUnsafe(32);return C.writeInt32BE(this._a,0),C.writeInt32BE(this._b,4),C.writeInt32BE(this._c,8),C.writeInt32BE(this._d,12),C.writeInt32BE(this._e,16),C.writeInt32BE(this._f,20),C.writeInt32BE(this._g,24),C.writeInt32BE(this._h,28),C},ye.exports=k},6540:(ye,ue,H)=>{var j=H(3894),W=H(117),I=H(6692),G=H(3502).Buffer,p=new Array(160);function k(){this.init(),this._w=p,I.call(this,128,112)}j(k,W),k.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},k.prototype._hash=function(){var P=G.allocUnsafe(48);function E(R,x,S){P.writeInt32BE(R,S),P.writeInt32BE(x,S+4)}return E(this._ah,this._al,0),E(this._bh,this._bl,8),E(this._ch,this._cl,16),E(this._dh,this._dl,24),E(this._eh,this._el,32),E(this._fh,this._fl,40),P},ye.exports=k},117:(ye,ue,H)=>{var j=H(3894),W=H(6692),I=H(3502).Buffer,G=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],p=new Array(160);function k(){this.init(),this._w=p,W.call(this,128,112)}function P(z,X,U){return U^z&(X^U)}function E(z,X,U){return z&X|U&(z|X)}function R(z,X){return(z>>>28|X<<4)^(X>>>2|z<<30)^(X>>>7|z<<25)}function x(z,X){return(z>>>14|X<<18)^(z>>>18|X<<14)^(X>>>9|z<<23)}function S(z,X){return(z>>>1|X<<31)^(z>>>8|X<<24)^z>>>7}function O(z,X){return(z>>>1|X<<31)^(z>>>8|X<<24)^(z>>>7|X<<25)}function C(z,X){return(z>>>19|X<<13)^(X>>>29|z<<3)^z>>>6}function B(z,X){return(z>>>19|X<<13)^(X>>>29|z<<3)^(z>>>6|X<<26)}function N(z,X){return z>>>0<X>>>0?1:0}j(k,W),k.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},k.prototype._update=function(z){for(var X=this._w,U=0|this._ah,Z=0|this._bh,ee=0|this._ch,ae=0|this._dh,ge=0|this._eh,Ce=0|this._fh,De=0|this._gh,we=0|this._hh,Oe=0|this._al,y=0|this._bl,o=0|this._cl,l=0|this._dl,f=0|this._el,u=0|this._fl,h=0|this._gl,b=0|this._hl,w=0;w<32;w+=2)X[w]=z.readInt32BE(4*w),X[w+1]=z.readInt32BE(4*w+4);for(;w<160;w+=2){var g=X[w-30],s=X[w-30+1],v=S(g,s),$=O(s,g),L=C(g=X[w-4],s=X[w-4+1]),ie=B(s,g),Be=X[w-32],Pe=X[w-32+1],Te=$+X[w-14+1]|0,Ie=v+X[w-14]+N(Te,$)|0;Ie=(Ie=Ie+L+N(Te=Te+ie|0,ie)|0)+Be+N(Te=Te+Pe|0,Pe)|0,X[w]=Ie,X[w+1]=Te}for(var Vt=0;Vt<160;Vt+=2){Ie=X[Vt],Te=X[Vt+1];var je=E(U,Z,ee),se=E(Oe,y,o),Ee=R(U,Oe),Re=R(Oe,U),Ge=x(ge,f),ui=x(f,ge),qe=G[Vt],Ye=G[Vt+1],xi=P(ge,Ce,De),et=P(f,u,h),Ke=b+ui|0,qi=we+Ge+N(Ke,b)|0;qi=(qi=(qi=qi+xi+N(Ke=Ke+et|0,et)|0)+qe+N(Ke=Ke+Ye|0,Ye)|0)+Ie+N(Ke=Ke+Te|0,Te)|0;var ut=Re+se|0,Qe=Ee+je+N(ut,Re)|0;we=De,b=h,De=Ce,h=u,Ce=ge,u=f,ge=ae+qi+N(f=l+Ke|0,l)|0,ae=ee,l=o,ee=Z,o=y,Z=U,y=Oe,U=qi+Qe+N(Oe=Ke+ut|0,Ke)|0}this._al=this._al+Oe|0,this._bl=this._bl+y|0,this._cl=this._cl+o|0,this._dl=this._dl+l|0,this._el=this._el+f|0,this._fl=this._fl+u|0,this._gl=this._gl+h|0,this._hl=this._hl+b|0,this._ah=this._ah+U+N(this._al,Oe)|0,this._bh=this._bh+Z+N(this._bl,y)|0,this._ch=this._ch+ee+N(this._cl,o)|0,this._dh=this._dh+ae+N(this._dl,l)|0,this._eh=this._eh+ge+N(this._el,f)|0,this._fh=this._fh+Ce+N(this._fl,u)|0,this._gh=this._gh+De+N(this._gl,h)|0,this._hh=this._hh+we+N(this._hl,b)|0},k.prototype._hash=function(){var z=I.allocUnsafe(64);function X(U,Z,ee){z.writeInt32BE(U,ee),z.writeInt32BE(Z,ee+4)}return X(this._ah,this._al,0),X(this._bh,this._bl,8),X(this._ch,this._cl,16),X(this._dh,this._dl,24),X(this._eh,this._el,32),X(this._fh,this._fl,40),X(this._gh,this._gl,48),X(this._hh,this._hl,56),z},ye.exports=k},295:(ye,ue,H)=>{ye.exports=I;var j=H(9069).EventEmitter;function I(){j.call(this)}H(3894)(I,j),I.Readable=H(3154),I.Writable=H(520),I.Duplex=H(1339),I.Transform=H(6025),I.PassThrough=H(6071),I.finished=H(7542),I.pipeline=H(954),I.Stream=I,I.prototype.pipe=function(G,p){var k=this;function P(B){G.writable&&!1===G.write(B)&&k.pause&&k.pause()}function E(){k.readable&&k.resume&&k.resume()}k.on("data",P),G.on("drain",E),!G._isStdio&&(!p||!1!==p.end)&&(k.on("end",x),k.on("close",S));var R=!1;function x(){R||(R=!0,G.end())}function S(){R||(R=!0,"function"==typeof G.destroy&&G.destroy())}function O(B){if(C(),0===j.listenerCount(this,"error"))throw B}function C(){k.removeListener("data",P),G.removeListener("drain",E),k.removeListener("end",x),k.removeListener("close",S),k.removeListener("error",O),G.removeListener("error",O),k.removeListener("end",C),k.removeListener("close",C),G.removeListener("close",C)}return k.on("error",O),G.on("error",O),k.on("end",C),k.on("close",C),G.on("close",C),G.emit("pipe",k),G}},3054:(ye,ue,H)=>{"use strict";var j=H(858).Buffer,W=j.isEncoding||function(U){switch((U=""+U)&&U.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function p(U){var Z;switch(this.encoding=function G(U){var Z=function I(U){if(!U)return"utf8";for(var Z;;)switch(U){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return U;default:if(Z)return;U=(""+U).toLowerCase(),Z=!0}}(U);if("string"!=typeof Z&&(j.isEncoding===W||!W(U)))throw new Error("Unknown encoding: "+U);return Z||U}(U),this.encoding){case"utf16le":this.text=O,this.end=C,Z=4;break;case"utf8":this.fillLast=R,Z=4;break;case"base64":this.text=B,this.end=N,Z=3;break;default:return this.write=z,void(this.end=X)}this.lastNeed=0,this.lastTotal=0,this.lastChar=j.allocUnsafe(Z)}function k(U){return U<=127?0:U>>5==6?2:U>>4==14?3:U>>3==30?4:U>>6==2?-1:-2}function R(U){var Z=this.lastTotal-this.lastNeed,ee=function E(U,Z,ee){if(128!=(192&Z[0]))return U.lastNeed=0,"\ufffd";if(U.lastNeed>1&&Z.length>1){if(128!=(192&Z[1]))return U.lastNeed=1,"\ufffd";if(U.lastNeed>2&&Z.length>2&&128!=(192&Z[2]))return U.lastNeed=2,"\ufffd"}}(this,U);return void 0!==ee?ee:this.lastNeed<=U.length?(U.copy(this.lastChar,Z,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(U.copy(this.lastChar,Z,0,U.length),void(this.lastNeed-=U.length))}function O(U,Z){if((U.length-Z)%2==0){var ee=U.toString("utf16le",Z);if(ee){var ae=ee.charCodeAt(ee.length-1);if(ae>=55296&&ae<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=U[U.length-2],this.lastChar[1]=U[U.length-1],ee.slice(0,-1)}return ee}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=U[U.length-1],U.toString("utf16le",Z,U.length-1)}function C(U){var Z=U&&U.length?this.write(U):"";return this.lastNeed?Z+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):Z}function B(U,Z){var ee=(U.length-Z)%3;return 0===ee?U.toString("base64",Z):(this.lastNeed=3-ee,this.lastTotal=3,1===ee?this.lastChar[0]=U[U.length-1]:(this.lastChar[0]=U[U.length-2],this.lastChar[1]=U[U.length-1]),U.toString("base64",Z,U.length-ee))}function N(U){var Z=U&&U.length?this.write(U):"";return this.lastNeed?Z+this.lastChar.toString("base64",0,3-this.lastNeed):Z}function z(U){return U.toString(this.encoding)}function X(U){return U&&U.length?this.write(U):""}ue.s=p,p.prototype.write=function(U){if(0===U.length)return"";var Z,ee;if(this.lastNeed){if(void 0===(Z=this.fillLast(U)))return"";ee=this.lastNeed,this.lastNeed=0}else ee=0;return ee<U.length?Z?Z+this.text(U,ee):this.text(U,ee):Z||""},p.prototype.end=function S(U){var Z=U&&U.length?this.write(U):"";return this.lastNeed?Z+"\ufffd":Z},p.prototype.text=function x(U,Z){var ee=function P(U,Z,ee){var ae=Z.length-1;if(ae<ee)return 0;var ge=k(Z[ae]);return ge>=0?(ge>0&&(U.lastNeed=ge-1),ge):--ae<ee||-2===ge?0:(ge=k(Z[ae]))>=0?(ge>0&&(U.lastNeed=ge-2),ge):--ae<ee||-2===ge?0:(ge=k(Z[ae]))>=0?(ge>0&&(2===ge?ge=0:U.lastNeed=ge-3),ge):0}(this,U,Z);if(!this.lastNeed)return U.toString("utf8",Z);this.lastTotal=ee;var ae=U.length-(ee-this.lastNeed);return U.copy(this.lastChar,0,ae),U.toString("utf8",Z,ae)},p.prototype.fillLast=function(U){if(this.lastNeed<=U.length)return U.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);U.copy(this.lastChar,this.lastTotal-this.lastNeed,0,U.length),this.lastNeed-=U.length}},858:(ye,ue,H)=>{var j=H(3172),W=j.Buffer;function I(p,k){for(var P in p)k[P]=p[P]}function G(p,k,P){return W(p,k,P)}W.from&&W.alloc&&W.allocUnsafe&&W.allocUnsafeSlow?ye.exports=j:(I(j,ue),ue.Buffer=G),G.prototype=Object.create(W.prototype),I(W,G),G.from=function(p,k,P){if("number"==typeof p)throw new TypeError("Argument must not be a number");return W(p,k,P)},G.alloc=function(p,k,P){if("number"!=typeof p)throw new TypeError("Argument must be a number");var E=W(p);return void 0!==k?"string"==typeof P?E.fill(k,P):E.fill(k):E.fill(0),E},G.allocUnsafe=function(p){if("number"!=typeof p)throw new TypeError("Argument must be a number");return W(p)},G.allocUnsafeSlow=function(p){if("number"!=typeof p)throw new TypeError("Argument must be a number");return j.SlowBuffer(p)}},3532:ye=>{function H(j){try{if(!global.localStorage)return!1}catch(I){return!1}var W=global.localStorage[j];return null!=W&&"true"===String(W).toLowerCase()}ye.exports=function ue(j,W){if(H("noDeprecation"))return j;var I=!1;return function G(){if(!I){if(H("throwDeprecation"))throw new Error(W);H("traceDeprecation")?console.trace(W):console.warn(W),I=!0}return j.apply(this,arguments)}}},950:()=>{},6601:()=>{},8623:()=>{},7748:()=>{},5568:()=>{},6619:()=>{},7108:()=>{},2361:()=>{},4616:()=>{},4946:ye=>{"use strict";ye.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},5207:ye=>{"use strict";ye.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},1308:ye=>{"use strict";ye.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},9799:ye=>{"use strict";ye.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},8597:ye=>{"use strict";ye.exports={i8:"6.5.4"}},2562:ye=>{"use strict";ye.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')}},ye=>{ye(ye.s=9711)}]);