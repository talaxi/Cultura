var n$=Object.defineProperty,y2=Object.getOwnPropertySymbols,i$=Object.prototype.hasOwnProperty,r$=Object.prototype.propertyIsEnumerable,C2=(ye,Te,q)=>Te in ye?n$(ye,Te,{enumerable:!0,configurable:!0,writable:!0,value:q}):ye[Te]=q,Nr=(ye,Te)=>{for(var q in Te||(Te={}))i$.call(Te,q)&&C2(ye,q,Te[q]);if(y2)for(var q of y2(Te))r$.call(Te,q)&&C2(ye,q,Te[q]);return ye};(self.webpackChunkCultura=self.webpackChunkCultura||[]).push([[179],{4519:(ye,Te,q)=>{"use strict";function W(t){return"function"==typeof t}function H(t){const e=t(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const J=H(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function ae(t,i){if(t){const e=t.indexOf(i);0<=e&&t.splice(e,1)}}class he{constructor(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let i;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(W(n))try{n()}catch(a){i=a instanceof J?a.errors:[a]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const a of r)try{I(a)}catch(o){i=null!=i?i:[],o instanceof J?i=[...i,...o.errors]:i.push(o)}}if(i)throw new J(i)}}add(i){var e;if(i&&i!==this)if(this.closed)I(i);else{if(i instanceof he){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(i)}}_hasParent(i){const{_parentage:e}=this;return e===i||Array.isArray(e)&&e.includes(i)}_addParent(i){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i}_removeParent(i){const{_parentage:e}=this;e===i?this._parentage=null:Array.isArray(e)&&ae(e,i)}remove(i){const{_teardowns:e}=this;e&&ae(e,i),i instanceof he&&i._removeParent(this)}}he.EMPTY=(()=>{const t=new he;return t.closed=!0,t})();const Z=he.EMPTY;function ne(t){return t instanceof he||t&&"closed"in t&&W(t.remove)&&W(t.add)&&W(t.unsubscribe)}function I(t){W(t)?t():t.unsubscribe()}const k={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},V={setTimeout(...t){const{delegate:i}=V;return((null==i?void 0:i.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:i}=V;return((null==i?void 0:i.clearTimeout)||clearTimeout)(t)},delegate:void 0};function E(t){V.setTimeout(()=>{const{onUnhandledError:i}=k;if(!i)throw t;i(t)})}function O(){}const A=se("C",void 0,void 0);function se(t,i,e){return{kind:t,value:i,error:e}}let ie=null;function U(t){if(k.useDeprecatedSynchronousErrorHandling){const i=!ie;if(i&&(ie={errorThrown:!1,error:null}),t(),i){const{errorThrown:e,error:n}=ie;if(ie=null,e)throw n}}else t()}class de extends he{constructor(i){super(),this.isStopped=!1,i?(this.destination=i,ne(i)&&i.add(this)):this.destination=ge}static create(i,e,n){return new Se(i,e,n)}next(i){this.isStopped?Be(function j(t){return se("N",t,void 0)}(i),this):this._next(i)}error(i){this.isStopped?Be(function F(t){return se("E",void 0,t)}(i),this):(this.isStopped=!0,this._error(i))}complete(){this.isStopped?Be(A,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(i){this.destination.next(i)}_error(i){try{this.destination.error(i)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const te=Function.prototype.bind;function le(t,i){return te.call(t,i)}class ue{constructor(i){this.partialObserver=i}next(i){const{partialObserver:e}=this;if(e.next)try{e.next(i)}catch(n){_e(n)}}error(i){const{partialObserver:e}=this;if(e.error)try{e.error(i)}catch(n){_e(n)}else _e(i)}complete(){const{partialObserver:i}=this;if(i.complete)try{i.complete()}catch(e){_e(e)}}}class Se extends de{constructor(i,e,n){let r;if(super(),W(i)||!i)r={next:null!=i?i:void 0,error:null!=e?e:void 0,complete:null!=n?n:void 0};else{let a;this&&k.useDeprecatedNextContext?(a=Object.create(i),a.unsubscribe=()=>this.unsubscribe(),r={next:i.next&&le(i.next,a),error:i.error&&le(i.error,a),complete:i.complete&&le(i.complete,a)}):r=i}this.destination=new ue(r)}}function _e(t){k.useDeprecatedSynchronousErrorHandling?function $(t){k.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=t)}(t):E(t)}function Be(t,i){const{onStoppedNotification:e}=k;e&&V.setTimeout(()=>e(t,i))}const ge={closed:!0,next:O,error:function Ae(t){throw t},complete:O},xe="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ie(t){return t}let Oe=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(e,n,r){const a=function Ce(t){return t&&t instanceof de||function Yt(t){return t&&W(t.next)&&W(t.error)&&W(t.complete)}(t)&&ne(t)}(e)?e:new Se(e,n,r);return U(()=>{const{operator:o,source:s}=this;a.add(o?o.call(a,s):s?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=Ot(n))((r,a)=>{const o=new Se({next:s=>{try{e(s)}catch(l){a(l),o.unsubscribe()}},error:a,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[xe](){return this}pipe(...e){return function at(t){return 0===t.length?Ie:1===t.length?t[0]:function(e){return t.reduce((n,r)=>r(n),e)}}(e)(this)}toPromise(e){return new(e=Ot(e))((n,r)=>{let a;this.subscribe(o=>a=o,o=>r(o),()=>n(a))})}}return t.create=i=>new t(i),t})();function Ot(t){var i;return null!==(i=null!=t?t:k.Promise)&&void 0!==i?i:Promise}const ke=H(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ve=(()=>{class t extends Oe{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new Re(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new ke}next(e){U(()=>{if(this._throwIfClosed(),!this.isStopped){const n=this.observers.slice();for(const r of n)r.next(e)}})}error(e){U(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){U(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:a}=this;return n||r?Z:(a.push(e),new he(()=>ae(a,e)))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:a}=this;n?e.error(r):a&&e.complete()}asObservable(){const e=new Oe;return e.source=this,e}}return t.create=(i,e)=>new Re(i,e),t})();class Re extends ve{constructor(i,e){super(),this.destination=i,this.source=e}next(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,i)}error(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,i)}complete(){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.complete)||void 0===e||e.call(i)}_subscribe(i){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(i))&&void 0!==n?n:Z}}function Sn(t){return W(null==t?void 0:t.lift)}function vt(t){return i=>{if(Sn(i))return i.lift(function(e){try{return t(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Lt(t,i,e,n,r){return new Ut(t,i,e,n,r)}class Ut extends de{constructor(i,e,n,r,a,o){super(i),this.onFinalize=a,this.shouldUnsubscribe=o,this._next=e?function(s){try{e(s)}catch(l){i.error(l)}}:super._next,this._error=r?function(s){try{r(s)}catch(l){i.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(s){i.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}}}function Mt(t,i){return vt((e,n)=>{let r=0;e.subscribe(Lt(n,a=>{n.next(t.call(i,a,r++))}))})}function Ge(t,i,e,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,i,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(i,e,a):o(i,e))||a);return r>3&&a&&Object.defineProperty(i,e,a),a}function Xe(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)}function hr(t){return this instanceof hr?(this.v=t,this):new hr(t)}function Ho(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(t,i||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(m){n[m]&&(r[m]=function(v){return new Promise(function(_,y){a.push([m,v,_,y])>1||s(m,v)})})}function s(m,v){try{!function l(m){m.value instanceof hr?Promise.resolve(m.value.v).then(c,u):d(a[0][2],m)}(n[m](v))}catch(_){d(a[0][3],_)}}function c(m){s("next",m)}function u(m){s("throw",m)}function d(m,v){m(v),a.shift(),a.length&&s(a[0][0],a[0][1])}}function Hu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=function ur(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(a){e[a]=t[a]&&function(o){return new Promise(function(s,l){!function r(a,o,s,l){Promise.resolve(l).then(function(c){a({value:c,done:s})},o)}(s,l,(o=t[a](o)).done,o.value)})}}}const ql=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Gu(t){return W(null==t?void 0:t.then)}function Wl(t){return W(t[xe])}function ju(t){return Symbol.asyncIterator&&W(null==t?void 0:t[Symbol.asyncIterator])}function Xl(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Yl=function Ef(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function zu(t){return W(null==t?void 0:t[Yl])}function $u(t){return Ho(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:n,done:r}=yield hr(e.read());if(r)return yield hr(void 0);yield yield hr(n)}}finally{e.releaseLock()}})}function qu(t){return W(null==t?void 0:t.getReader)}function bi(t){if(t instanceof Oe)return t;if(null!=t){if(Wl(t))return function If(t){return new Oe(i=>{const e=t[xe]();if(W(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ql(t))return function Of(t){return new Oe(i=>{for(let e=0;e<t.length&&!i.closed;e++)i.next(t[e]);i.complete()})}(t);if(Gu(t))return function Wu(t){return new Oe(i=>{t.then(e=>{i.closed||(i.next(e),i.complete())},e=>i.error(e)).then(null,E)})}(t);if(ju(t))return Ql(t);if(zu(t))return function Nf(t){return new Oe(i=>{for(const e of t)if(i.next(e),i.closed)return;i.complete()})}(t);if(qu(t))return function Ki(t){return Ql($u(t))}(t)}throw Xl(t)}function Ql(t){return new Oe(i=>{(function wa(t,i){var e,n,r,a;return function ws(t,i,e,n){return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):function r(a){return a instanceof e?a:new e(function(o){o(a)})}(u.value).then(s,l)}c((n=n.apply(t,i||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Hu(t);!(n=yield e.next()).done;)if(i.next(n.value),i.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}i.complete()})})(t,i).catch(e=>i.error(e))})}function Fr(t,i,e,n=0,r=!1){const a=i.schedule(function(){e(),r?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(a),!r)return a}function ii(t,i,e=1/0){return W(i)?ii((n,r)=>Mt((a,o)=>i(n,a,r,o))(bi(t(n,r))),e):("number"==typeof i&&(e=i),vt((n,r)=>function Vf(t,i,e,n,r,a,o,s){const l=[];let c=0,u=0,d=!1;const m=()=>{d&&!l.length&&!c&&i.complete()},v=y=>c<n?_(y):l.push(y),_=y=>{a&&i.next(y),c++;let S=!1;bi(e(y,u++)).subscribe(Lt(i,D=>{null==r||r(D),a?v(D):i.next(D)},()=>{S=!0},void 0,()=>{if(S)try{for(c--;l.length&&c<n;){const D=l.shift();o?Fr(i,o,()=>_(D)):_(D)}m()}catch(D){i.error(D)}}))};return t.subscribe(Lt(i,v,()=>{d=!0,m()})),()=>{null==s||s()}}(n,r,t,e)))}function Kl(t=1/0){return ii(Ie,t)}const Jr=new Oe(t=>t.complete());function $0(t){return t&&W(t.schedule)}function Ff(t){return t[t.length-1]}function Xu(t){return W(Ff(t))?t.pop():void 0}function Zl(t){return $0(Ff(t))?t.pop():void 0}function q0(t,i=0){return vt((e,n)=>{e.subscribe(Lt(n,r=>Fr(n,t,()=>n.next(r),i),()=>Fr(n,t,()=>n.complete(),i),r=>Fr(n,t,()=>n.error(r),i)))})}function W0(t,i=0){return vt((e,n)=>{n.add(t.schedule(()=>e.subscribe(n),i))})}function X0(t,i){if(!t)throw new Error("Iterable cannot be null");return new Oe(e=>{Fr(e,i,()=>{const n=t[Symbol.asyncIterator]();Fr(e,i,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Mi(t,i){return i?function k2(t,i){if(null!=t){if(Wl(t))return function T2(t,i){return bi(t).pipe(W0(i),q0(i))}(t,i);if(ql(t))return function R2(t,i){return new Oe(e=>{let n=0;return i.schedule(function(){n===t.length?e.complete():(e.next(t[n++]),e.closed||this.schedule())})})}(t,i);if(Gu(t))return function D2(t,i){return bi(t).pipe(W0(i),q0(i))}(t,i);if(ju(t))return X0(t,i);if(zu(t))return function x2(t,i){return new Oe(e=>{let n;return Fr(e,i,()=>{n=t[Yl](),Fr(e,i,()=>{let r,a;try{({value:r,done:a}=n.next())}catch(o){return void e.error(o)}a?e.complete():e.next(r)},0,!0)}),()=>W(null==n?void 0:n.return)&&n.return()})}(t,i);if(qu(t))return function M2(t,i){return X0($u(t),i)}(t,i)}throw Xl(t)}(t,i):bi(t)}function Y0(...t){const i=Zl(t),e=function S2(t,i){return"number"==typeof Ff(t)?t.pop():i}(t,1/0),n=t;return n.length?1===n.length?bi(n[0]):Kl(e)(Mi(n,i)):Jr}function ki(t){return t<=0?()=>Jr:vt((i,e)=>{let n=0;i.subscribe(Lt(e,r=>{++n<=t&&(e.next(r),t<=n&&e.complete())}))})}function Q0(t={}){const{connector:i=(()=>new ve),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=t;return a=>{let o=null,s=null,l=null,c=0,u=!1,d=!1;const m=()=>{null==s||s.unsubscribe(),s=null},v=()=>{m(),o=l=null,u=d=!1},_=()=>{const y=o;v(),null==y||y.unsubscribe()};return vt((y,S)=>{c++,!d&&!u&&m();const D=l=null!=l?l:i();S.add(()=>{c--,0===c&&!d&&!u&&(s=Bf(_,r))}),D.subscribe(S),o||(o=new Se({next:w=>D.next(w),error:w=>{d=!0,m(),s=Bf(v,e,w),D.error(w)},complete:()=>{u=!0,m(),s=Bf(v,n),D.complete()}}),Mi(y).subscribe(o))})(a)}}function Bf(t,i,...e){return!0===i?(t(),null):!1===i?null:i(...e).pipe(ki(1)).subscribe(()=>t())}function Tn(t){for(let i in t)if(t[i]===Tn)return i;throw Error("Could not find renamed property on target object.")}function Lf(t,i){for(const e in i)i.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=i[e])}function vn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(vn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const i=t.toString();if(null==i)return""+i;const e=i.indexOf("\n");return-1===e?i:i.substring(0,e)}function Uf(t,i){return null==t||""===t?null===i?"":i:null==i||""===i?t:t+" "+i}const A2=Tn({__forward_ref__:Tn});function rn(t){return t.__forward_ref__=rn,t.toString=function(){return vn(this())},t}function Nt(t){return K0(t)?t():t}function K0(t){return"function"==typeof t&&t.hasOwnProperty(A2)&&t.__forward_ref__===rn}class tn extends Error{constructor(i,e){super(function Hf(t,i){return`NG0${Math.abs(t)}${i?": "+i:""}`}(i,e)),this.code=i}}function Rt(t){return"string"==typeof t?t:null==t?"":String(t)}function Zi(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Rt(t)}function Yu(t,i){const e=i?` in ${i}`:"";throw new tn(-201,`No provider for ${Zi(t)} found${e}`)}function Nn(t,i,e,n){throw new Error(`ASSERTION ERROR: ${t}`+(null==n?"":` [Expected=> ${e} ${n} ${i} <=Actual]`))}function Je(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function fn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gf(t){return Z0(t,Qu)||Z0(t,eb)}function Z0(t,i){return t.hasOwnProperty(i)?t[i]:null}function J0(t){return t&&(t.hasOwnProperty(jf)||t.hasOwnProperty(F2))?t[jf]:null}const Qu=Tn({\u0275prov:Tn}),jf=Tn({\u0275inj:Tn}),eb=Tn({ngInjectableDef:Tn}),F2=Tn({ngInjectorDef:Tn});var kt=(()=>((kt=kt||{})[kt.Default=0]="Default",kt[kt.Host=1]="Host",kt[kt.Self=2]="Self",kt[kt.SkipSelf=4]="SkipSelf",kt[kt.Optional=8]="Optional",kt))();let zf;function mo(t){const i=zf;return zf=t,i}function tb(t,i,e){const n=Gf(t);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&kt.Optional?null:void 0!==i?i:void Yu(vn(t),"Injector")}function vo(t){return{toString:t}.toString()}var ea=(()=>((ea=ea||{})[ea.OnPush=0]="OnPush",ea[ea.Default=1]="Default",ea))(),Sa=(()=>{return(t=Sa||(Sa={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Sa;var t})();const L2="undefined"!=typeof globalThis&&globalThis,U2="undefined"!=typeof window&&window,H2="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Cn=L2||"undefined"!=typeof global&&global||U2||H2,xs={},Dn=[],Ku=Tn({\u0275cmp:Tn}),$f=Tn({\u0275dir:Tn}),qf=Tn({\u0275pipe:Tn}),nb=Tn({\u0275mod:Tn}),qa=Tn({\u0275fac:Tn}),Jl=Tn({__NG_ELEMENT_ID__:Tn});let G2=0;function lt(t){return vo(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ea.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Dn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Sa.Emulated,id:"c",styles:t.styles||Dn,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,a=t.features,o=t.pipes;return n.id+=G2++,n.inputs=ob(t.inputs,e),n.outputs=ob(t.outputs),a&&a.forEach(s=>s(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ib):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(rb):null,n})}function ib(t){return Gi(t)||function bo(t){return t[$f]||null}(t)}function rb(t){return function Go(t){return t[qf]||null}(t)}const ab={};function bn(t){return vo(()=>{const i={type:t.type,bootstrap:t.bootstrap||Dn,declarations:t.declarations||Dn,imports:t.imports||Dn,exports:t.exports||Dn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(ab[t.id]=t.type),i})}function ob(t,i){if(null==t)return xs;const e={};for(const n in t)if(t.hasOwnProperty(n)){let r=t[n],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=n,i&&(i[r]=a)}return e}const Ue=lt;function fr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Gi(t){return t[Ku]||null}function Br(t,i){const e=t[nb]||null;if(!e&&!0===i)throw new Error(`Type ${vn(t)} does not have '\u0275mod' property.`);return e}function Ta(t){return Array.isArray(t)&&"object"==typeof t[1]}function na(t){return Array.isArray(t)&&!0===t[1]}function Yf(t){return 0!=(8&t.flags)}function td(t){return 2==(2&t.flags)}function nd(t){return 1==(1&t.flags)}function ia(t){return null!==t.template}function X2(t){return 0!=(512&t[2])}function qo(t,i){return t.hasOwnProperty(qa)?t[qa]:null}class K2{constructor(i,e,n){this.previousValue=i,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Pi(){return lb}function lb(t){return t.type.prototype.ngOnChanges&&(t.setInput=J2),Z2}function Z2(){const t=ub(this),i=null==t?void 0:t.current;if(i){const e=t.previous;if(e===xs)t.previous=i;else for(let n in i)e[n]=i[n];t.current=null,this.ngOnChanges(i)}}function J2(t,i,e,n){const r=ub(t)||function ex(t,i){return t[cb]=i}(t,{previous:xs,current:null}),a=r.current||(r.current={}),o=r.previous,s=this.declaredInputs[e],l=o[s];a[s]=new K2(l&&l.currentValue,i,o===xs),t[n]=i}Pi.ngInherit=!0;const cb="__ngSimpleChanges__";function ub(t){return t[cb]||null}let ep;function tp(){return void 0!==ep?ep:"undefined"!=typeof document?document:void 0}function Yn(t){return!!t.listen}const db={createRenderer:(t,i)=>tp()};function di(t){for(;Array.isArray(t);)t=t[0];return t}function id(t,i){return di(i[t])}function Hr(t,i){return di(i[t.index])}function np(t,i){return t.data[i]}function Es(t,i){return t[i]}function Sr(t,i){const e=i[t];return Ta(e)?e:e[0]}function hb(t){return 4==(4&t[2])}function ip(t){return 128==(128&t[2])}function _o(t,i){return null==i?null:t[i]}function fb(t){t[18]=0}function rp(t,i){t[5]+=i;let e=t,n=t[3];for(;null!==n&&(1===i&&1===e[5]||-1===i&&0===e[5]);)n[5]+=i,e=n,n=n[3]}const Ct={lFrame:Cb(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function pb(){return Ct.bindingsEnabled}function De(){return Ct.lFrame.lView}function nn(){return Ct.lFrame.tView}function B(t){return Ct.lFrame.contextLView=t,t[8]}function _i(){let t=gb();for(;null!==t&&64===t.type;)t=t.parent;return t}function gb(){return Ct.lFrame.currentTNode}function ic(){const t=Ct.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}function Da(t,i){const e=Ct.lFrame;e.currentTNode=t,e.isParent=i}function ap(){return Ct.lFrame.isParent}function op(){Ct.lFrame.isParent=!1}function rd(){return Ct.isInCheckNoChangesMode}function ad(t){Ct.isInCheckNoChangesMode=t}function Ji(){const t=Ct.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}function Wa(){return Ct.lFrame.bindingIndex}function Is(){return Ct.lFrame.bindingIndex++}function Xa(t){const i=Ct.lFrame,e=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,e}function vb(t){Ct.lFrame.inI18n=t}function vx(t,i){const e=Ct.lFrame;e.bindingIndex=e.bindingRootIndex=t,sp(i)}function sp(t){Ct.lFrame.currentDirectiveIndex=t}function bb(){return Ct.lFrame.currentQueryIndex}function cp(t){Ct.lFrame.currentQueryIndex=t}function _x(t){const i=t[1];return 2===i.type?i.declTNode:1===i.type?t[6]:null}function _b(t,i,e){if(e&kt.SkipSelf){let r=i,a=t;for(;!(r=r.parent,null!==r||e&kt.Host||(r=_x(a),null===r||(a=a[15],10&r.type))););if(null===r)return!1;i=r,t=a}const n=Ct.lFrame=yb();return n.currentTNode=i,n.lView=t,!0}function od(t){const i=yb(),e=t[1];Ct.lFrame=i,i.currentTNode=e.firstChild,i.lView=t,i.tView=e,i.contextLView=t,i.bindingIndex=e.bindingStartIndex,i.inI18n=!1}function yb(){const t=Ct.lFrame,i=null===t?null:t.child;return null===i?Cb(t):i}function Cb(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function wb(){const t=Ct.lFrame;return Ct.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Sb=wb;function sd(){const t=wb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function er(){return Ct.lFrame.selectedIndex}function yo(t){Ct.lFrame.selectedIndex=t}function Qn(){const t=Ct.lFrame;return np(t.tView,t.selectedIndex)}function ld(t,i){for(let e=i.directiveStart,n=i.directiveEnd;e<n;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=a;o&&(t.contentHooks||(t.contentHooks=[])).push(-e,o),s&&((t.contentHooks||(t.contentHooks=[])).push(e,s),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,s)),l&&(t.viewHooks||(t.viewHooks=[])).push(-e,l),c&&((t.viewHooks||(t.viewHooks=[])).push(e,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,c)),null!=u&&(t.destroyHooks||(t.destroyHooks=[])).push(e,u)}}function cd(t,i,e){Tb(t,i,3,e)}function ud(t,i,e,n){(3&t[2])===e&&Tb(t,i,e,n)}function up(t,i){let e=t[2];(3&e)===i&&(e&=2047,e+=1,t[2]=e)}function Tb(t,i,e,n){const a=null!=n?n:-1,o=i.length-1;let s=0;for(let l=void 0!==n?65535&t[18]:0;l<o;l++)if("number"==typeof i[l+1]){if(s=i[l],null!=n&&s>=n)break}else i[l]<0&&(t[18]+=65536),(s<a||-1==a)&&(Mx(t,e,i,l),t[18]=(4294901760&t[18])+l+2),l++}function Mx(t,i,e,n){const r=e[n]<0,a=e[n+1],s=t[r?-e[n]:e[n]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===i){t[2]+=2048;try{a.call(s)}finally{}}}else try{a.call(s)}finally{}}class rc{constructor(i,e,n){this.factory=i,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function dd(t,i,e){const n=Yn(t);let r=0;for(;r<e.length;){const a=e[r];if("number"==typeof a){if(0!==a)break;r++;const o=e[r++],s=e[r++],l=e[r++];n?t.setAttribute(i,s,l,o):i.setAttributeNS(o,s,l)}else{const o=a,s=e[++r];hp(o)?n&&t.setProperty(i,o,s):n?t.setAttribute(i,o,s):i.setAttribute(o,s),r++}}return r}function Db(t){return 3===t||4===t||6===t}function hp(t){return 64===t.charCodeAt(0)}function hd(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let e=-1;for(let n=0;n<i.length;n++){const r=i[n];"number"==typeof r?e=r:0===e||Rb(t,e,r,null,-1===e||2===e?i[++n]:null)}}return t}function Rb(t,i,e,n,r){let a=0,o=t.length;if(-1===i)o=-1;else for(;a<t.length;){const s=t[a++];if("number"==typeof s){if(s===i){o=-1;break}if(s>i){o=a-1;break}}}for(;a<t.length;){const s=t[a];if("number"==typeof s)break;if(s===e){if(null===n)return void(null!==r&&(t[a+1]=r));if(n===t[a+1])return void(t[a+2]=r)}a++,null!==n&&a++,null!==r&&a++}-1!==o&&(t.splice(o,0,i),a=o+1),t.splice(a++,0,e),null!==n&&t.splice(a++,0,n),null!==r&&t.splice(a++,0,r)}function xb(t){return-1!==t}function Os(t){return 32767&t}function Ns(t,i){let e=function Ix(t){return t>>16}(t),n=i;for(;e>0;)n=n[15],e--;return n}let fp=!0;function fd(t){const i=fp;return fp=t,i}let Ox=0;function oc(t,i){const e=gp(t,i);if(-1!==e)return e;const n=i[1];n.firstCreatePass&&(t.injectorIndex=i.length,pp(n.data,t),pp(i,null),pp(n.blueprint,null));const r=pd(t,i),a=t.injectorIndex;if(xb(r)){const o=Os(r),s=Ns(r,i),l=s[1].data;for(let c=0;c<8;c++)i[a+c]=s[o+c]|l[o+c]}return i[a+8]=r,a}function pp(t,i){t.push(0,0,0,0,0,0,0,0,i)}function gp(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function pd(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,n=null,r=i;for(;null!==r;){const a=r[1],o=a.type;if(n=2===o?a.declTNode:1===o?r[6]:null,null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function gd(t,i,e){!function Nx(t,i,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(Jl)&&(n=e[Jl]),null==n&&(n=e[Jl]=Ox++);const r=255&n;i.data[t+(r>>5)]|=1<<r}(t,i,e)}function Ab(t,i,e){if(e&kt.Optional)return t;Yu(i,"NodeInjector")}function Pb(t,i,e,n){if(e&kt.Optional&&void 0===n&&(n=null),0==(e&(kt.Self|kt.Host))){const r=t[9],a=mo(void 0);try{return r?r.get(i,n,e&kt.Optional):tb(i,n,e&kt.Optional)}finally{mo(a)}}return Ab(n,i,e)}function Eb(t,i,e,n=kt.Default,r){if(null!==t){const a=function Lx(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(Jl)?t[Jl]:void 0;return"number"==typeof i?i>=0?255&i:Fx:i}(e);if("function"==typeof a){if(!_b(i,t,n))return n&kt.Host?Ab(r,e,n):Pb(i,e,n,r);try{const o=a(n);if(null!=o||n&kt.Optional)return o;Yu(e)}finally{Sb()}}else if("number"==typeof a){let o=null,s=gp(t,i),l=-1,c=n&kt.Host?i[16][6]:null;for((-1===s||n&kt.SkipSelf)&&(l=-1===s?pd(t,i):i[s+8],-1!==l&&Nb(n,!1)?(o=i[1],s=Os(l),i=Ns(l,i)):s=-1);-1!==s;){const u=i[1];if(Ob(a,s,u.data)){const d=Bx(s,i,e,o,n,c);if(d!==Ib)return d}l=i[s+8],-1!==l&&Nb(n,i[1].data[s+8]===c)&&Ob(a,s,i)?(o=u,s=Os(l),i=Ns(l,i)):s=-1}}}return Pb(i,e,n,r)}const Ib={};function Fx(){return new Vs(_i(),De())}function Bx(t,i,e,n,r,a){const o=i[1],s=o.data[t+8],u=md(s,o,e,null==n?td(s)&&fp:n!=o&&0!=(3&s.type),r&kt.Host&&a===s);return null!==u?sc(i,o,u,s):Ib}function md(t,i,e,n,r){const a=t.providerIndexes,o=i.data,s=1048575&a,l=t.directiveStart,u=a>>20,m=r?s+u:t.directiveEnd;for(let v=n?s:s+u;v<m;v++){const _=o[v];if(v<l&&e===_||v>=l&&_.type===e)return v}if(r){const v=o[l];if(v&&ia(v)&&v.type===e)return l}return null}function sc(t,i,e,n){let r=t[e];const a=i.data;if(function kx(t){return t instanceof rc}(r)){const o=r;o.resolving&&function P2(t,i){const e=i?`. Dependency path: ${i.join(" > ")} > ${t}`:"";throw new tn(-200,`Circular dependency in DI detected for ${t}${e}`)}(Zi(a[e]));const s=fd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?mo(o.injectImpl):null;_b(t,n,kt.Default);try{r=t[e]=o.factory(void 0,a,t,n),i.firstCreatePass&&e>=n.directiveStart&&function xx(t,i,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:a}=i.type.prototype;if(n){const o=lb(i);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),a&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,a),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,a))}(e,a[e],i)}finally{null!==l&&mo(l),fd(s),o.resolving=!1,Sb()}}return r}function Ob(t,i,e){return!!(e[i+(t>>5)]&1<<t)}function Nb(t,i){return!(t&kt.Self||t&kt.Host&&i)}class Vs{constructor(i,e){this._tNode=i,this._lView=e}get(i,e,n){return Eb(this._tNode,this._lView,i,n,e)}}function zi(t){return vo(()=>{const i=t.prototype.constructor,e=i[qa]||mp(i),n=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==n;){const a=r[qa]||mp(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function mp(t){return K0(t)?()=>{const i=mp(Nt(t));return i&&i()}:qo(t)}const Bs="__parameters__";function Us(t,i,e){return vo(()=>{const n=function vp(t){return function(...e){if(t){const n=t(...e);for(const r in n)this[r]=n[r]}}}(i);function r(...a){if(this instanceof r)return n.apply(this,a),this;const o=new r(...a);return s.annotation=o,s;function s(l,c,u){const d=l.hasOwnProperty(Bs)?l[Bs]:Object.defineProperty(l,Bs,{value:[]})[Bs];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class Gt{constructor(i,e){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Je({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Hx=new Gt("AnalyzeForEntryComponents");function Gr(t,i){void 0===i&&(i=t);for(let e=0;e<t.length;e++){let n=t[e];Array.isArray(n)?(i===t&&(i=t.slice(0,e)),Gr(n,i)):i!==t&&i.push(n)}return i}function Ra(t,i){t.forEach(e=>Array.isArray(e)?Ra(e,i):i(e))}function Fb(t,i,e){i>=t.length?t.push(e):t.splice(i,0,e)}function vd(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function uc(t,i){const e=[];for(let n=0;n<t;n++)e.push(i);return e}function Tr(t,i,e){let n=Hs(t,i);return n>=0?t[1|n]=e:(n=~n,function zx(t,i,e,n){let r=t.length;if(r==i)t.push(e,n);else if(1===r)t.push(n,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>i;)t[r]=t[r-2],r--;t[i]=e,t[i+1]=n}}(t,n,i,e)),n}function _p(t,i){const e=Hs(t,i);if(e>=0)return t[1|e]}function Hs(t,i){return function Ub(t,i,e){let n=0,r=t.length>>e;for(;r!==n;){const a=n+(r-n>>1),o=t[a<<e];if(i===o)return a<<e;o>i?r=a:n=a+1}return~(r<<e)}(t,i,1)}const dc={},Cp="__NG_DI_FLAG__",_d="ngTempTokenPath",Kx=/\n/gm,Gb="__source",Jx=Tn({provide:String,useValue:Tn});let hc;function jb(t){const i=hc;return hc=t,i}function eM(t,i=kt.Default){if(void 0===hc)throw new tn(203,"");return null===hc?tb(t,void 0,i):hc.get(t,i&kt.Optional?null:void 0,i)}function Ve(t,i=kt.Default){return(function B2(){return zf}()||eM)(Nt(t),i)}function wp(t){const i=[];for(let e=0;e<t.length;e++){const n=Nt(t[e]);if(Array.isArray(n)){if(0===n.length)throw new tn(900,"");let r,a=kt.Default;for(let o=0;o<n.length;o++){const s=n[o],l=tM(s);"number"==typeof l?-1===l?r=s.token:a|=l:r=s}i.push(Ve(r,a))}else i.push(Ve(n))}return i}function fc(t,i){return t[Cp]=i,t.prototype[Cp]=i,t}function tM(t){return t[Cp]}const pc=fc(Us("Inject",t=>({token:t})),-1),xa=fc(Us("Optional"),8),Gs=fc(Us("SkipSelf"),4);let Cd,wd;function zs(t){var i;return(null===(i=function Tp(){if(void 0===Cd&&(Cd=null,Cn.trustedTypes))try{Cd=Cn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Cd}())||void 0===i?void 0:i.createHTML(t))||t}function Yb(t){var i;return(null===(i=function Dp(){if(void 0===wd&&(wd=null,Cn.trustedTypes))try{wd=Cn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return wd}())||void 0===i?void 0:i.createHTML(t))||t}class Xo{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class pM extends Xo{getTypeName(){return"HTML"}}class gM extends Xo{getTypeName(){return"Style"}}class mM extends Xo{getTypeName(){return"Script"}}class vM extends Xo{getTypeName(){return"URL"}}class bM extends Xo{getTypeName(){return"ResourceURL"}}function Dr(t){return t instanceof Xo?t.changingThisBreaksApplicationSecurity:t}function Ma(t,i){const e=Zb(t);if(null!=e&&e!==i){if("ResourceURL"===e&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===i}function Zb(t){return t instanceof Xo&&t.getTypeName()||null}function Jb(t){const i=new DM(t);return function RM(){try{return!!(new window.DOMParser).parseFromString(zs(""),"text/html")}catch(t){return!1}}()?new TM(i):i}class TM{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const e=(new window.DOMParser).parseFromString(zs(i),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(i):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class DM{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(i){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=zs(i),e;const n=this.inertDocument.createElement("body");return n.innerHTML=zs(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(i){const e=i.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&i.removeAttribute(o)}let n=i.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const xM=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,MM=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function mc(t){return(t=String(t)).match(xM)||t.match(MM)?t:"unsafe:"+t}function e1(t){return(t=String(t)).split(",").map(i=>mc(i.trim())).join(", ")}function ka(t){const i={};for(const e of t.split(","))i[e]=!0;return i}function vc(...t){const i={};for(const e of t)for(const n in e)e.hasOwnProperty(n)&&(i[n]=!0);return i}const t1=ka("area,br,col,hr,img,wbr"),n1=ka("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),i1=ka("rp,rt"),Rp=vc(t1,vc(n1,ka("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vc(i1,ka("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vc(i1,n1)),xp=ka("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Mp=ka("srcset"),r1=vc(xp,Mp,ka("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ka("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),kM=ka("script,style,template");class AM{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let e=i.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(i){const e=i.nodeName.toLowerCase();if(!Rp.hasOwnProperty(e))return this.sanitizedSomething=!0,!kM.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=i.attributes;for(let r=0;r<n.length;r++){const a=n.item(r),o=a.name,s=o.toLowerCase();if(!r1.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let l=a.value;xp[s]&&(l=mc(l)),Mp[s]&&(l=e1(l)),this.buf.push(" ",o,'="',a1(l),'"')}return this.buf.push(">"),!0}endElement(i){const e=i.nodeName.toLowerCase();Rp.hasOwnProperty(e)&&!t1.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(i){this.buf.push(a1(i))}checkClobberedElement(i,e){if(e&&(i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return e}}const PM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,EM=/([^\#-~ |!])/g;function a1(t){return t.replace(/&/g,"&amp;").replace(PM,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(EM,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Sd;function o1(t,i){let e=null;try{Sd=Sd||Jb(t);let n=i?String(i):"";e=Sd.getInertBodyElement(n);let r=5,a=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=a,a=e.innerHTML,e=Sd.getInertBodyElement(n)}while(n!==a);return zs((new AM).sanitizeChildren(kp(e)||e))}finally{if(e){const n=kp(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function kp(t){return"content"in t&&function IM(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Kt=(()=>((Kt=Kt||{})[Kt.NONE=0]="NONE",Kt[Kt.HTML=1]="HTML",Kt[Kt.STYLE=2]="STYLE",Kt[Kt.SCRIPT=3]="SCRIPT",Kt[Kt.URL=4]="URL",Kt[Kt.RESOURCE_URL=5]="RESOURCE_URL",Kt))();function jt(t){const i=function bc(){const t=De();return t&&t[12]}();return i?Yb(i.sanitize(Kt.HTML,t)||""):Ma(t,"HTML")?Yb(Dr(t)):o1(tp(),Rt(t))}const c1="__ngContext__";function $i(t,i){t[c1]=i}function Ep(t){const i=function _c(t){return t[c1]||null}(t);return i?Array.isArray(i)?i:i.lView:null}function Op(t){return t.ngOriginalError}function YM(t,...i){t.error(...i)}class $s{constructor(){this._console=console}handleError(i){const e=this._findOriginalError(i),n=function XM(t){return t&&t.ngErrorLogger||YM}(i);n(this._console,"ERROR",i),e&&n(this._console,"ORIGINAL ERROR",e)}_findOriginalError(i){let e=i&&Op(i);for(;e&&Op(e);)e=Op(e);return e||null}}const ZM=/^>|^->|<!--|-->|--!>|<!-$/g,JM=/(<|>)/;const p1=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Cn))();function Ya(t){return t.ownerDocument.defaultView}function Aa(t){return t instanceof Function?t():t}var Rr=(()=>((Rr=Rr||{})[Rr.Important=1]="Important",Rr[Rr.DashCase=2]="DashCase",Rr))();let Np;function Vp(t,i){return Np(t,i)}function yc(t){const i=t[3];return na(i)?i[3]:i}function Fp(t){return _1(t[13])}function Bp(t){return _1(t[4])}function _1(t){for(;null!==t&&!na(t);)t=t[4];return t}function Ws(t,i,e,n,r){if(null!=n){let a,o=!1;na(n)?a=n:Ta(n)&&(o=!0,n=n[0]);const s=di(n);0===t&&null!==e?null==r?D1(i,e,s):Yo(i,e,s,r||null,!0):1===t&&null!==e?Yo(i,e,s,r||null,!0):2===t?E1(i,s,o):3===t&&i.destroyNode(s),null!=a&&function yk(t,i,e,n,r){const a=e[7];a!==di(e)&&Ws(i,t,n,a,r);for(let s=10;s<e.length;s++){const l=e[s];Cc(l[1],l,t,i,n,a)}}(i,t,a,e,r)}}function Lp(t,i){return Yn(t)?t.createText(i):t.createTextNode(i)}function y1(t,i,e){Yn(t)?t.setValue(i,e):i.textContent=e}function lk(t,i){return t.createComment(function f1(t){return t.replace(ZM,i=>i.replace(JM,"\u200b$1\u200b"))}(i))}function Up(t,i,e){if(Yn(t))return t.createElement(i,e);{const n=null!==e?function rx(t){const i=t.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(e):null;return null===n?t.createElement(i):t.createElementNS(n,i)}}function C1(t,i){const e=t[9],n=e.indexOf(i),r=i[3];1024&i[2]&&(i[2]&=-1025,rp(r,-1)),e.splice(n,1)}function Hp(t,i){if(t.length<=10)return;const e=10+i,n=t[e];if(n){const r=n[17];null!==r&&r!==t&&C1(r,n),i>0&&(t[e-1][4]=n[4]);const a=vd(t,10+i);!function ck(t,i){Cc(t,i,i[11],2,null,null),i[0]=null,i[6]=null}(n[1],n);const o=a[19];null!==o&&o.detachView(a[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function w1(t,i){if(!(256&i[2])){const e=i[11];Yn(e)&&e.destroyNode&&Cc(t,i,e,3,null,null),function hk(t){let i=t[13];if(!i)return Gp(t[1],t);for(;i;){let e=null;if(Ta(i))e=i[13];else{const n=i[10];n&&(e=n)}if(!e){for(;i&&!i[4]&&i!==t;)Ta(i)&&Gp(i[1],i),i=i[3];null===i&&(i=t),Ta(i)&&Gp(i[1],i),e=i&&i[4]}i=e}}(i)}}function Gp(t,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function mk(t,i){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let n=0;n<e.length;n+=2){const r=i[e[n]];if(!(r instanceof rc)){const a=e[n+1];if(Array.isArray(a))for(let o=0;o<a.length;o+=2){const s=r[a[o]],l=a[o+1];try{l.call(s)}finally{}}else try{a.call(r)}finally{}}}}(t,i),function gk(t,i){const e=t.cleanup,n=i[7];let r=-1;if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const o=e[a+1],s="function"==typeof o?o(i):di(i[o]),l=n[r=e[a+2]],c=e[a+3];"boolean"==typeof c?s.removeEventListener(e[a],l,c):c>=0?n[r=c]():n[r=-c].unsubscribe(),a+=2}else{const o=n[r=e[a+1]];e[a].call(o)}if(null!==n){for(let a=r+1;a<n.length;a++)n[a]();i[7]=null}}(t,i),1===i[1].type&&Yn(i[11])&&i[11].destroy();const e=i[17];if(null!==e&&na(i[3])){e!==i[3]&&C1(e,i);const n=i[19];null!==n&&n.detachView(t)}}}function S1(t,i,e){return T1(t,i.parent,e)}function T1(t,i,e){let n=i;for(;null!==n&&40&n.type;)n=(i=n).parent;if(null===n)return e[0];if(2&n.flags){const r=t.data[n.directiveStart].encapsulation;if(r===Sa.None||r===Sa.Emulated)return null}return Hr(n,e)}function Yo(t,i,e,n,r){Yn(t)?t.insertBefore(i,e,n,r):i.insertBefore(e,n,r)}function D1(t,i,e){Yn(t)?t.appendChild(i,e):i.appendChild(e)}function R1(t,i,e,n,r){null!==n?Yo(t,i,e,n,r):D1(t,i,e)}function Td(t,i){return Yn(t)?t.parentNode(i):i.parentNode}function x1(t,i,e){return k1(t,i,e)}function M1(t,i,e){return 40&t.type?Hr(t,e):null}let jp,k1=M1;function A1(t,i){k1=t,jp=i}function Dd(t,i,e,n){const r=S1(t,n,i),a=i[11],s=x1(n.parent||i[6],n,i);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)R1(a,r,e[l],s,!1);else R1(a,r,e,s,!1);void 0!==jp&&jp(a,n,i,e,r)}function Rd(t,i){if(null!==i){const e=i.type;if(3&e)return Hr(i,t);if(4&e)return zp(-1,t[i.index]);if(8&e){const n=i.child;if(null!==n)return Rd(t,n);{const r=t[i.index];return na(r)?zp(-1,r):di(r)}}if(32&e)return Vp(i,t)()||di(t[i.index]);{const n=P1(t,i);return null!==n?Array.isArray(n)?n[0]:Rd(yc(t[16]),n):Rd(t,i.next)}}return null}function P1(t,i){return null!==i?t[16][6].projection[i.projection]:null}function zp(t,i){const e=10+t+1;if(e<i.length){const n=i[e],r=n[1].firstChild;if(null!==r)return Rd(n,r)}return i[7]}function E1(t,i,e){const n=Td(t,i);n&&function vk(t,i,e,n){Yn(t)?t.removeChild(i,e,n):i.removeChild(e)}(t,n,i,e)}function $p(t,i,e,n,r,a,o){for(;null!=e;){const s=n[e.index],l=e.type;if(o&&0===i&&(s&&$i(di(s),n),e.flags|=4),64!=(64&e.flags))if(8&l)$p(t,i,e.child,n,r,a,!1),Ws(i,t,r,s,a);else if(32&l){const c=Vp(e,n);let u;for(;u=c();)Ws(i,t,r,u,a);Ws(i,t,r,s,a)}else 16&l?I1(t,i,n,e,r,a):Ws(i,t,r,s,a);e=o?e.projectionNext:e.next}}function Cc(t,i,e,n,r,a){$p(e,n,t.firstChild,i,r,a,!1)}function I1(t,i,e,n,r,a){const o=e[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Ws(i,t,r,l[c],a);else $p(t,i,l,o[3],r,a,!0)}function O1(t,i,e){Yn(t)?t.setAttribute(i,"style",e):i.style.cssText=e}function qp(t,i,e){Yn(t)?""===e?t.removeAttribute(i,"class"):t.setAttribute(i,"class",e):i.className=e}function N1(t,i,e){let n=t.length;for(;;){const r=t.indexOf(i,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=i.length;if(r+a===n||t.charCodeAt(r+a)<=32)return r}e=r+1}}const V1="ng-template";function wk(t,i,e){let n=0;for(;n<t.length;){let r=t[n++];if(e&&"class"===r){if(r=t[n],-1!==N1(r.toLowerCase(),i,0))return!0}else if(1===r){for(;n<t.length&&"string"==typeof(r=t[n++]);)if(r.toLowerCase()===i)return!0;return!1}}return!1}function F1(t){return 4===t.type&&t.value!==V1}function Sk(t,i,e){return i===(4!==t.type||e?t.value:V1)}function Tk(t,i,e){let n=4;const r=t.attrs||[],a=function xk(t){for(let i=0;i<t.length;i++)if(Db(t[i]))return i;return t.length}(r);let o=!1;for(let s=0;s<i.length;s++){const l=i[s];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!Sk(t,l,e)||""===l&&1===i.length){if(ra(n))return!1;o=!0}}else{const c=8&n?l:i[++s];if(8&n&&null!==t.attrs){if(!wk(t.attrs,c,e)){if(ra(n))return!1;o=!0}continue}const d=Dk(8&n?"class":l,r,F1(t),e);if(-1===d){if(ra(n))return!1;o=!0;continue}if(""!==c){let m;m=d>a?"":r[d+1].toLowerCase();const v=8&n?m:null;if(v&&-1!==N1(v,c,0)||2&n&&c!==m){if(ra(n))return!1;o=!0}}}}else{if(!o&&!ra(n)&&!ra(l))return!1;if(o&&ra(l))continue;o=!1,n=l|1&n}}return ra(n)||o}function ra(t){return 0==(1&t)}function Dk(t,i,e,n){if(null===i)return-1;let r=0;if(n||!e){let a=!1;for(;r<i.length;){const o=i[r];if(o===t)return r;if(3===o||6===o)a=!0;else{if(1===o||2===o){let s=i[++r];for(;"string"==typeof s;)s=i[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=a?1:2}return-1}return function Mk(t,i){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const n=t[e];if("number"==typeof n)return-1;if(n===i)return e;e++}return-1}(i,t)}function B1(t,i,e=!1){for(let n=0;n<i.length;n++)if(Tk(t,i[n],e))return!0;return!1}function kk(t,i){e:for(let e=0;e<i.length;e++){const n=i[e];if(t.length===n.length){for(let r=0;r<t.length;r++)if(t[r]!==n[r])continue e;return!0}}return!1}function L1(t,i){return t?":not("+i.trim()+")":i}function Ak(t){let i=t[0],e=1,n=2,r="",a=!1;for(;e<t.length;){let o=t[e];if("string"==typeof o)if(2&n){const s=t[++e];r+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!ra(o)&&(i+=L1(a,r),r=""),n=o,a=a||!ra(n);e++}return""!==r&&(i+=L1(a,r)),i}const xt={};function p(t){U1(nn(),De(),er()+t,rd())}function U1(t,i,e,n){if(!n)if(3==(3&i[2])){const a=t.preOrderCheckHooks;null!==a&&cd(i,a,e)}else{const a=t.preOrderHooks;null!==a&&ud(i,a,0,e)}yo(e)}function xd(t,i){return t<<17|i<<2}function aa(t){return t>>17&32767}function Wp(t){return 2|t}function Qa(t){return(131068&t)>>2}function Xp(t,i){return-131069&t|i<<2}function Yp(t){return 1|t}function K1(t,i){const e=t.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],a=e[n+1];if(-1!==a){const o=t.data[a];cp(r),o.contentQueries(2,i[a],a)}}}function wc(t,i,e,n,r,a,o,s,l,c){const u=i.blueprint.slice();return u[0]=r,u[2]=140|n,fb(u),u[3]=u[15]=t,u[8]=e,u[10]=o||t&&t[10],u[11]=s||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=a,u[16]=2==i.type?t[16]:u,u}function Xs(t,i,e,n,r){let a=t.data[i];if(null===a)a=rg(t,i,e,n,r),function mx(){return Ct.lFrame.inI18n}()&&(a.flags|=64);else if(64&a.type){a.type=e,a.value=n,a.attrs=r;const o=ic();a.injectorIndex=null===o?-1:o.injectorIndex}return Da(a,!0),a}function rg(t,i,e,n,r){const a=gb(),o=ap(),l=t.data[i]=function Xk(t,i,e,n,r,a){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,e,i,n,r);return null===t.firstChild&&(t.firstChild=l),null!==a&&(o?null==a.child&&null!==l.parent&&(a.child=l):null===a.next&&(a.next=l)),l}function Ys(t,i,e,n){if(0===e)return-1;const r=i.length;for(let a=0;a<e;a++)i.push(n),t.blueprint.push(n),t.data.push(null);return r}function Sc(t,i,e){od(i);try{const n=t.viewQuery;null!==n&&fg(1,n,e);const r=t.template;null!==r&&Z1(t,i,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&K1(t,i),t.staticViewQueries&&fg(2,t.viewQuery,e);const a=t.components;null!==a&&function $k(t,i){for(let e=0;e<i.length;e++)hA(t,i[e])}(i,a)}catch(n){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),n}finally{i[2]&=-5,sd()}}function Qs(t,i,e,n){const r=i[2];if(256==(256&r))return;od(i);const a=rd();try{fb(i),function mb(t){return Ct.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&Z1(t,i,e,2,n);const o=3==(3&r);if(!a)if(o){const c=t.preOrderCheckHooks;null!==c&&cd(i,c,null)}else{const c=t.preOrderHooks;null!==c&&ud(i,c,0,null),up(i,0)}if(function uA(t){for(let i=Fp(t);null!==i;i=Bp(i)){if(!i[2])continue;const e=i[9];for(let n=0;n<e.length;n++){const r=e[n],a=r[3];0==(1024&r[2])&&rp(a,1),r[2]|=1024}}}(i),function cA(t){for(let i=Fp(t);null!==i;i=Bp(i))for(let e=10;e<i.length;e++){const n=i[e],r=n[1];ip(n)&&Qs(r,n,r.template,n[8])}}(i),null!==t.contentQueries&&K1(t,i),!a)if(o){const c=t.contentCheckHooks;null!==c&&cd(i,c)}else{const c=t.contentHooks;null!==c&&ud(i,c,1),up(i,1)}!function jk(t,i){const e=t.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)yo(~r);else{const a=r,o=e[++n],s=e[++n];vx(o,a),s(2,i[a])}}}finally{yo(-1)}}(t,i);const s=t.components;null!==s&&function zk(t,i){for(let e=0;e<i.length;e++)dA(t,i[e])}(i,s);const l=t.viewQuery;if(null!==l&&fg(2,l,n),!a)if(o){const c=t.viewCheckHooks;null!==c&&cd(i,c)}else{const c=t.viewHooks;null!==c&&ud(i,c,2),up(i,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,rp(i[3],-1))}finally{sd()}}function qk(t,i,e,n){const r=i[10],a=!rd(),o=hb(i);try{a&&!o&&r.begin&&r.begin(),o&&Sc(t,i,n),Qs(t,i,e,n)}finally{a&&!o&&r.end&&r.end()}}function Z1(t,i,e,n,r){const a=er(),o=2&n;try{yo(-1),o&&i.length>20&&U1(t,i,20,rd()),e(n,r)}finally{yo(a)}}function ag(t,i,e){!pb()||(function tA(t,i,e,n){const r=e.directiveStart,a=e.directiveEnd;t.firstCreatePass||oc(e,i),$i(n,i);const o=e.initialInputs;for(let s=r;s<a;s++){const l=t.data[s],c=ia(l);c&&oA(i,e,l);const u=sc(i,t,s,e);$i(u,i),null!==o&&sA(0,s-r,u,l,0,o),c&&(Sr(e.index,i)[8]=u)}}(t,i,e,Hr(e,i)),128==(128&e.flags)&&function nA(t,i,e){const n=e.directiveStart,r=e.directiveEnd,o=e.index,s=function bx(){return Ct.lFrame.currentDirectiveIndex}();try{yo(o);for(let l=n;l<r;l++){const c=t.data[l],u=i[l];sp(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&s_(c,u)}}finally{yo(-1),sp(s)}}(t,i,e))}function og(t,i,e=Hr){const n=i.localNames;if(null!==n){let r=i.index+1;for(let a=0;a<n.length;a+=2){const o=n[a+1],s=-1===o?e(i,t):t[o];t[r++]=s}}}function e_(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=Ad(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):i}function Ad(t,i,e,n,r,a,o,s,l,c){const u=20+n,d=u+r,m=function Wk(t,i){const e=[];for(let n=0;n<i;n++)e.push(n<t?null:xt);return e}(u,d),v="function"==typeof c?c():c;return m[1]={type:t,blueprint:m,template:e,queries:null,viewQuery:s,declTNode:i,data:m.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1}}function i_(t,i,e,n){const r=f_(i);null===e?r.push(n):(r.push(e),t.firstCreatePass&&p_(t).push(n,r.length-1))}function r_(t,i,e){for(let n in t)if(t.hasOwnProperty(n)){const r=t[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(i,r):e[n]=[i,r]}return e}function xr(t,i,e,n,r,a,o,s){const l=Hr(i,e);let u,c=i.inputs;!s&&null!=c&&(u=c[n])?(v_(t,e,u,n,r),td(i)&&function Kk(t,i){const e=Sr(i,t);16&e[2]||(e[2]|=64)}(e,i.index)):3&i.type&&(n=function Qk(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n),r=null!=o?o(r,i.value||"",n):r,Yn(a)?a.setProperty(l,n,r):hp(n)||(l.setProperty?l.setProperty(n,r):l[n]=r))}function sg(t,i,e,n){let r=!1;if(pb()){const a=function iA(t,i,e){const n=t.directiveRegistry;let r=null;if(n)for(let a=0;a<n.length;a++){const o=n[a];B1(e,o.selectors,!1)&&(r||(r=[]),gd(oc(e,i),t,o.type),ia(o)?(l_(t,e),r.unshift(o)):r.push(o))}return r}(t,i,e),o=null===n?null:{"":-1};if(null!==a){r=!0,c_(e,t.data.length,a.length);for(let u=0;u<a.length;u++){const d=a[u];d.providersResolver&&d.providersResolver(d)}let s=!1,l=!1,c=Ys(t,i,a.length,null);for(let u=0;u<a.length;u++){const d=a[u];e.mergedAttrs=hd(e.mergedAttrs,d.hostAttrs),u_(t,e,i,c,d),aA(c,d,o),null!==d.contentQueries&&(e.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=128);const m=d.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),s=!0),!l&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function Yk(t,i){const n=i.directiveEnd,r=t.data,a=i.attrs,o=[];let s=null,l=null;for(let c=i.directiveStart;c<n;c++){const u=r[c],d=u.inputs,m=null===a||F1(i)?null:lA(d,a);o.push(m),s=r_(d,c,s),l=r_(u.outputs,c,l)}null!==s&&(s.hasOwnProperty("class")&&(i.flags|=16),s.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=o,i.inputs=s,i.outputs=l}(t,e)}o&&function rA(t,i,e){if(i){const n=t.localNames=[];for(let r=0;r<i.length;r+=2){const a=e[i[r+1]];if(null==a)throw new tn(-301,!1);n.push(i[r],a)}}}(e,n,o)}return e.mergedAttrs=hd(e.mergedAttrs,e.attrs),r}function o_(t,i,e,n,r,a){const o=a.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const l=~i.index;(function eA(t){let i=t.length;for(;i>0;){const e=t[--i];if("number"==typeof e&&e<0)return e}return 0})(s)!=l&&s.push(l),s.push(n,r,o)}}function s_(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function l_(t,i){i.flags|=2,(t.components||(t.components=[])).push(i.index)}function aA(t,i,e){if(e){if(i.exportAs)for(let n=0;n<i.exportAs.length;n++)e[i.exportAs[n]]=t;ia(i)&&(e[""]=t)}}function c_(t,i,e){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+e,t.providerIndexes=i}function u_(t,i,e,n,r){t.data[n]=r;const a=r.factory||(r.factory=qo(r.type)),o=new rc(a,ia(r),null);t.blueprint[n]=o,e[n]=o,o_(t,i,0,n,Ys(t,e,r.hostVars,xt),r)}function oA(t,i,e){const n=Hr(i,t),r=e_(e),a=t[10],o=Pd(t,wc(t,r,null,e.onPush?64:16,n,i,a,a.createRenderer(n,e),null,null));t[i.index]=o}function lg(t,i,e,n,r,a,o){if(null==a)Yn(t)?t.removeAttribute(i,r,e):i.removeAttribute(r);else{const s=null==o?Rt(a):o(a,n||"",r);Yn(t)?t.setAttribute(i,r,s,e):e?i.setAttributeNS(e,r,s):i.setAttribute(r,s)}}function sA(t,i,e,n,r,a){const o=a[i];if(null!==o){const s=n.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==s?n.setInput(e,d,c,u):e[u]=d}}}function lA(t,i){let e=null,n=0;for(;n<i.length;){const r=i[n];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],i[n+1])),n+=2}else n+=2;else n+=4}return e}function d_(t,i,e,n){return new Array(t,!0,!1,i,null,0,n,e,null,null)}function dA(t,i){const e=Sr(i,t);if(ip(e)){const n=e[1];80&e[2]?Qs(n,e,n.template,e[8]):e[5]>0&&cg(e)}}function cg(t){for(let n=Fp(t);null!==n;n=Bp(n))for(let r=10;r<n.length;r++){const a=n[r];if(1024&a[2]){const o=a[1];Qs(o,a,o.template,a[8])}else a[5]>0&&cg(a)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Sr(e[n],t);ip(r)&&r[5]>0&&cg(r)}}function hA(t,i){const e=Sr(i,t),n=e[1];(function fA(t,i){for(let e=i.length;e<t.blueprint.length;e++)i.push(t.blueprint[e])})(n,e),Sc(n,e,e[8])}function Pd(t,i){return t[13]?t[14][4]=i:t[13]=i,t[14]=i,i}function ug(t){for(;t;){t[2]|=64;const i=yc(t);if(X2(t)&&!i)return t;t=i}return null}function hg(t,i,e){const n=i[10];n.begin&&n.begin();try{Qs(t,i,t.template,e)}catch(r){throw m_(i,r),r}finally{n.end&&n.end()}}function h_(t){!function dg(t){for(let i=0;i<t.components.length;i++){const e=t.components[i],n=Ep(e),r=n[1];qk(r,n,r.template,e)}}(t[8])}function fg(t,i,e){cp(0),i(t,e)}const vA=(()=>Promise.resolve(null))();function f_(t){return t[7]||(t[7]=[])}function p_(t){return t.cleanup||(t.cleanup=[])}function m_(t,i){const e=t[9],n=e?e.get($s,null):null;n&&n.handleError(i)}function v_(t,i,e,n,r){for(let a=0;a<e.length;){const o=e[a++],s=e[a++],l=i[o],c=t.data[o];null!==c.setInput?c.setInput(l,r,n,s):l[s]=r}}function Ka(t,i,e){const n=id(i,t);y1(t[11],n,e)}function Ed(t,i,e){let n=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==i)for(let o=0;o<i.length;o++){const s=i[o];"number"==typeof s?a=s:1==a?r=Uf(r,s):2==a&&(n=Uf(n,s+": "+i[++o]+";"))}e?t.styles=n:t.stylesWithoutHost=n,e?t.classes=r:t.classesWithoutHost=r}const pg=new Gt("INJECTOR",-1);class b_{get(i,e=dc){if(e===dc){const n=new Error(`NullInjectorError: No provider for ${vn(i)}!`);throw n.name="NullInjectorError",n}return e}}const gg=new Gt("Set Injector scope."),Tc={},yA={};let mg;function __(){return void 0===mg&&(mg=new b_),mg}function y_(t,i=null,e=null,n){const r=C_(t,i,e,n);return r._resolveInjectorDefTypes(),r}function C_(t,i=null,e=null,n){return new CA(t,e,i||__(),n)}class CA{constructor(i,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];e&&Ra(e,s=>this.processProvider(s,i,e)),Ra([i],s=>this.processInjectorType(s,[],a)),this.records.set(pg,Ks(void 0,this));const o=this.records.get(gg);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof i?null:vn(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,e=dc,n=kt.Default){this.assertNotDestroyed();const r=jb(this),a=mo(void 0);try{if(!(n&kt.SkipSelf)){let s=this.records.get(i);if(void 0===s){const l=function kA(t){return"function"==typeof t||"object"==typeof t&&t instanceof Gt}(i)&&Gf(i);s=l&&this.injectableDefInScope(l)?Ks(vg(i),Tc):null,this.records.set(i,s)}if(null!=s)return this.hydrate(i,s)}return(n&kt.Self?__():this.parent).get(i,e=n&kt.Optional&&e===dc?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[_d]=o[_d]||[]).unshift(vn(i)),r)throw o;return function nM(t,i,e,n){const r=t[_d];throw i[Gb]&&r.unshift(i[Gb]),t.message=function iM(t,i,e,n=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=vn(i);if(Array.isArray(i))r=i.map(vn).join(" -> ");else if("object"==typeof i){let a=[];for(let o in i)if(i.hasOwnProperty(o)){let s=i[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):vn(s)))}r=`{${a.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${t.replace(Kx,"\n  ")}`}("\n"+t.message,r,e,n),t.ngTokenPath=r,t[_d]=null,t}(o,i,"R3InjectorError",this.source)}throw o}finally{mo(a),jb(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((n,r)=>i.push(vn(r))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new tn(205,!1)}processInjectorType(i,e,n){if(!(i=Nt(i)))return!1;let r=J0(i);const a=null==r&&i.ngModule||void 0,o=void 0===a?i:a,s=-1!==n.indexOf(o);if(void 0!==a&&(r=J0(a)),null==r)return!1;if(null!=r.imports&&!s){let u;n.push(o);try{Ra(r.imports,d=>{this.processInjectorType(d,e,n)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:m,providers:v}=u[d];Ra(v,_=>this.processProvider(_,m,v||Dn))}}this.injectorDefTypes.add(o);const l=qo(o)||(()=>new o);this.records.set(o,Ks(l,Tc));const c=r.providers;if(null!=c&&!s){const u=i;Ra(c,d=>this.processProvider(d,u,c))}return void 0!==a&&void 0!==i.providers}processProvider(i,e,n){let r=Zs(i=Nt(i))?i:Nt(i&&i.provide);const a=function SA(t,i,e){return S_(t)?Ks(void 0,t.useValue):Ks(w_(t),Tc)}(i);if(Zs(i)||!0!==i.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=Ks(void 0,Tc,!0),o.factory=()=>wp(o.multi),this.records.set(r,o)),r=i,o.multi.push(i)}this.records.set(r,a)}hydrate(i,e){return e.value===Tc&&(e.value=yA,e.value=e.factory()),"object"==typeof e.value&&e.value&&function MA(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(i){if(!i.providedIn)return!1;const e=Nt(i.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function vg(t){const i=Gf(t),e=null!==i?i.factory:qo(t);if(null!==e)return e;if(t instanceof Gt)throw new tn(204,!1);if(t instanceof Function)return function wA(t){const i=t.length;if(i>0)throw uc(i,"?"),new tn(204,!1);const e=function N2(t){const i=t&&(t[Qu]||t[eb]);if(i){const e=function V2(t){if(t.hasOwnProperty("name"))return t.name;const i=(""+t).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),i}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new tn(204,!1)}function w_(t,i,e){let n;if(Zs(t)){const r=Nt(t);return qo(r)||vg(r)}if(S_(t))n=()=>Nt(t.useValue);else if(function DA(t){return!(!t||!t.useFactory)}(t))n=()=>t.useFactory(...wp(t.deps||[]));else if(function TA(t){return!(!t||!t.useExisting)}(t))n=()=>Ve(Nt(t.useExisting));else{const r=Nt(t&&(t.useClass||t.provide));if(!function xA(t){return!!t.deps}(t))return qo(r)||vg(r);n=()=>new r(...wp(t.deps))}return n}function Ks(t,i,e=!1){return{factory:t,value:i,multi:e?[]:void 0}}function S_(t){return null!==t&&"object"==typeof t&&Jx in t}function Zs(t){return"function"==typeof t}let ai=(()=>{class t{static create(e,n){var r;if(Array.isArray(e))return y_({name:""},n,e,"");{const a=null!==(r=e.name)&&void 0!==r?r:"";return y_({name:a},e.parent,e.providers,a)}}}return t.THROW_IF_NOT_FOUND=dc,t.NULL=new b_,t.\u0275prov=Je({token:t,providedIn:"any",factory:()=>Ve(pg)}),t.__NG_ELEMENT_ID__=-1,t})();function FA(t,i){ld(Ep(t)[1],_i())}function pn(t){let i=function N_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const n=[t];for(;i;){let r;if(ia(t))r=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new tn(903,"");r=i.\u0275dir}if(r){if(e){n.push(r);const o=t;o.inputs=yg(t.inputs),o.declaredInputs=yg(t.declaredInputs),o.outputs=yg(t.outputs);const s=r.hostBindings;s&&HA(t,s);const l=r.viewQuery,c=r.contentQueries;if(l&&LA(t,l),c&&UA(t,c),Lf(t.inputs,r.inputs),Lf(t.declaredInputs,r.declaredInputs),Lf(t.outputs,r.outputs),ia(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let o=0;o<a.length;o++){const s=a[o];s&&s.ngInherit&&s(t),s===pn&&(e=!1)}}i=Object.getPrototypeOf(i)}!function BA(t){let i=0,e=null;for(let n=t.length-1;n>=0;n--){const r=t[n];r.hostVars=i+=r.hostVars,r.hostAttrs=hd(r.hostAttrs,e=hd(e,r.hostAttrs))}}(n)}function yg(t){return t===xs?{}:t===Dn?[]:t}function LA(t,i){const e=t.viewQuery;t.viewQuery=e?(n,r)=>{i(n,r),e(n,r)}:i}function UA(t,i){const e=t.contentQueries;t.contentQueries=e?(n,r,a)=>{i(n,r,a),e(n,r,a)}:i}function HA(t,i){const e=t.hostBindings;t.hostBindings=e?(n,r)=>{i(n,r),e(n,r)}:i}let Id=null;function Js(){if(!Id){const t=Cn.Symbol;if(t&&t.iterator)Id=t.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<i.length;++e){const n=i[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Id=n)}}}return Id}function Dc(t){return!!Cg(t)&&(Array.isArray(t)||!(t instanceof Map)&&Js()in t)}function Cg(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ea(t,i,e){return t[i]=e}function Rc(t,i){return t[i]}function qi(t,i,e){return!Object.is(t[i],e)&&(t[i]=e,!0)}function Qo(t,i,e,n){const r=qi(t,i,e);return qi(t,i+1,n)||r}function Od(t,i,e,n,r){const a=Qo(t,i,e,n);return qi(t,i+2,r)||a}function jr(t,i,e,n,r,a){const o=Qo(t,i,e,n);return Qo(t,i+2,r,a)||o}function _n(t,i,e,n){const r=De();return qi(r,Is(),i)&&(nn(),function Pa(t,i,e,n,r,a){const o=Hr(t,i);lg(i[11],o,a,t.value,e,n,r)}(Qn(),r,t,i,e,n)),_n}function tl(t,i,e,n){return qi(t,Is(),e)?i+Rt(e)+n:xt}function rl(t,i,e,n,r,a,o,s,l,c){const d=jr(t,Wa(),e,r,o,l);return Xa(4),d?i+Rt(e)+n+Rt(r)+a+Rt(o)+s+Rt(l)+c:xt}function M(t,i,e,n,r,a,o,s){const l=De(),c=nn(),u=t+20,d=c.firstCreatePass?function XA(t,i,e,n,r,a,o,s,l){const c=i.consts,u=Xs(i,t,4,o||null,_o(c,s));sg(i,e,u,_o(c,l)),ld(i,u);const d=u.tViews=Ad(2,u,n,r,a,i.directiveRegistry,i.pipeRegistry,null,i.schemas,c);return null!==i.queries&&(i.queries.template(i,u),d.queries=i.queries.embeddedTView(u)),u}(u,c,l,i,e,n,r,a,o):c.data[u];Da(d,!1);const m=l[11].createComment("");Dd(c,l,m,d),$i(m,l),Pd(l,l[u]=d_(m,l,m,d)),nd(d)&&ag(c,l,d),null!=o&&og(l,d,s)}function it(t){return Es(function gx(){return Ct.lFrame.contextLView}(),20+t)}function P(t,i=kt.Default){const e=De();return null===e?Ve(t,i):Eb(_i(),e,Nt(t),i)}function Rg(){throw new Error("invalid")}function b(t,i,e){const n=De();return qi(n,Is(),i)&&xr(nn(),Qn(),n,t,i,n[11],e,!1),b}function xg(t,i,e,n,r){const o=r?"class":"style";v_(t,e,i.inputs[o],o,n)}function f(t,i,e,n){const r=De(),a=nn(),o=20+t,s=r[11],l=r[o]=Up(s,i,function Rx(){return Ct.lFrame.currentNamespace}()),c=a.firstCreatePass?function gP(t,i,e,n,r,a,o){const s=i.consts,c=Xs(i,t,2,r,_o(s,a));return sg(i,e,c,_o(s,o)),null!==c.attrs&&Ed(c,c.attrs,!1),null!==c.mergedAttrs&&Ed(c,c.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,c),c}(o,a,r,0,i,e,n):a.data[o];Da(c,!0);const u=c.mergedAttrs;null!==u&&dd(s,l,u);const d=c.classes;null!==d&&qp(s,l,d);const m=c.styles;return null!==m&&O1(s,l,m),64!=(64&c.flags)&&Dd(a,r,l,c),0===function ux(){return Ct.lFrame.elementDepthCount}()&&$i(l,r),function dx(){Ct.lFrame.elementDepthCount++}(),nd(c)&&(ag(a,r,c),function J1(t,i,e){if(Yf(i)){const r=i.directiveEnd;for(let a=i.directiveStart;a<r;a++){const o=t.data[a];o.contentQueries&&o.contentQueries(1,e[a],a)}}}(a,c,r)),null!==n&&og(r,c),f}function h(){let t=_i();ap()?op():(t=t.parent,Da(t,!1));const i=t;!function hx(){Ct.lFrame.elementDepthCount--}();const e=nn();return e.firstCreatePass&&(ld(e,t),Yf(t)&&e.queries.elementEnd(t)),null!=i.classesWithoutHost&&function Px(t){return 0!=(16&t.flags)}(i)&&xg(e,i,De(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Ex(t){return 0!=(32&t.flags)}(i)&&xg(e,i,De(),i.stylesWithoutHost,!1),h}function x(t,i,e,n){return f(t,i,e,n),h(),x}function fe(){return De()}function xc(t){return!!t&&"function"==typeof t.then}const Ag=function ny(t){return!!t&&"function"==typeof t.subscribe};function N(t,i,e,n){const r=De(),a=nn(),o=_i();return function ry(t,i,e,n,r,a,o,s){const l=nd(n),u=t.firstCreatePass&&p_(t),d=i[8],m=f_(i);let v=!0;if(3&n.type||s){const S=Hr(n,i),D=s?s(S):S,w=m.length,T=s?L=>s(di(L[n.index])):n.index;if(Yn(e)){let L=null;if(!s&&l&&(L=function vP(t,i,e,n){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const o=r[a];if(o===e&&r[a+1]===n){const s=i[7],l=r[a+2];return s.length>l?s[l]:null}"string"==typeof o&&(a+=2)}return null}(t,i,r,n.index)),null!==L)(L.__ngLastListenerFn__||L).__ngNextListenerFn__=a,L.__ngLastListenerFn__=a,v=!1;else{a=Pg(n,i,d,a,!1);const G=e.listen(D,r,a);m.push(a,G),u&&u.push(r,T,w,w+1)}}else a=Pg(n,i,d,a,!0),D.addEventListener(r,a,o),m.push(a),u&&u.push(r,T,w,o)}else a=Pg(n,i,d,a,!1);const _=n.outputs;let y;if(v&&null!==_&&(y=_[r])){const S=y.length;if(S)for(let D=0;D<S;D+=2){const ee=i[y[D]][y[D+1]].subscribe(a),re=m.length;m.push(a,ee),u&&u.push(r,n.index,re,-(re+1))}}}(a,r,r[11],o,t,i,!!e,n),N}function ay(t,i,e,n){try{return!1!==e(n)}catch(r){return m_(t,r),!1}}function Pg(t,i,e,n,r){return function a(o){if(o===Function)return n;const s=2&t.flags?Sr(t.index,i):i;0==(32&i[2])&&ug(s);let l=ay(i,0,n,o),c=a.__ngNextListenerFn__;for(;c;)l=ay(i,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function C(t=1){return function yx(t){return(Ct.lFrame.contextLView=function Cx(t,i){for(;t>0;)i=i[15],t--;return i}(t,Ct.lFrame.contextLView))[8]}(t)}function bP(t,i){let e=null;const n=function Rk(t){const i=t.attrs;if(null!=i){const e=i.indexOf(5);if(0==(1&e))return i[e+1]}return null}(t);for(let r=0;r<i.length;r++){const a=i[r];if("*"!==a){if(null===n?B1(t,a,!0):kk(n,a))return r}else e=r}return e}function Vd(t){const i=De()[16][6];if(!i.projection){const n=i.projection=uc(t?t.length:1,null),r=n.slice();let a=i.child;for(;null!==a;){const o=t?bP(a,t):0;null!==o&&(r[o]?r[o].projectionNext=a:n[o]=a,r[o]=a),a=a.next}}}function Fd(t,i=0,e){const n=De(),r=nn(),a=Xs(r,20+t,16,null,e||null);null===a.projection&&(a.projection=i),op(),64!=(64&a.flags)&&function _k(t,i,e){I1(i[11],0,i,e,S1(t,e,i),x1(e.parent||i[6],e,i))}(r,n,a)}function Wi(t,i,e){return Bd(t,"",i,"",e),Wi}function Bd(t,i,e,n,r){const a=De(),o=tl(a,i,e,n);return o!==xt&&xr(nn(),Qn(),a,t,o,a[11],r,!1),Bd}function py(t,i,e,n,r){const a=t[e+1],o=null===i;let s=n?aa(a):Qa(a),l=!1;for(;0!==s&&(!1===l||o);){const u=t[s+1];CP(t[s],i)&&(l=!0,t[s+1]=n?Yp(u):Wp(u)),s=n?aa(u):Qa(u)}l&&(t[e+1]=n?Wp(a):Yp(a))}function CP(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&Hs(t,i)>=0}const Ci={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function gy(t){return t.substring(Ci.key,Ci.keyEnd)}function my(t,i){const e=Ci.textEnd;return e===i?-1:(i=Ci.keyEnd=function DP(t,i,e){for(;i<e&&t.charCodeAt(i)>32;)i++;return i}(t,Ci.key=i,e),ul(t,i,e))}function ul(t,i,e){for(;i<e&&t.charCodeAt(i)<=32;)i++;return i}function Mc(t,i,e){return sa(t,i,e,!1),Mc}function bt(t,i){return sa(t,i,null,!0),bt}function To(t){la(Tr,Oa,t,!0)}function Oa(t,i){for(let e=function SP(t){return function by(t){Ci.key=0,Ci.keyEnd=0,Ci.value=0,Ci.valueEnd=0,Ci.textEnd=t.length}(t),my(t,ul(t,0,Ci.textEnd))}(i);e>=0;e=my(i,e))Tr(t,gy(i),!0)}function sa(t,i,e,n){const r=De(),a=nn(),o=Xa(2);a.firstUpdatePass&&wy(a,t,o,n),i!==xt&&qi(r,o,i)&&Ty(a,a.data[er()],r,r[11],t,r[o+1]=function NP(t,i){return null==t||("string"==typeof i?t+=i:"object"==typeof t&&(t=vn(Dr(t)))),t}(i,e),n,o)}function la(t,i,e,n){const r=nn(),a=Xa(2);r.firstUpdatePass&&wy(r,null,a,n);const o=De();if(e!==xt&&qi(o,a,e)){const s=r.data[er()];if(Ry(s,n)&&!Cy(r,a)){let l=n?s.classesWithoutHost:s.stylesWithoutHost;null!==l&&(e=Uf(l,e||"")),xg(r,s,o,e,n)}else!function OP(t,i,e,n,r,a,o,s){r===xt&&(r=Dn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<a.length?a[0]:null;for(;null!==u||null!==d;){const m=l<r.length?r[l+1]:void 0,v=c<a.length?a[c+1]:void 0;let y,_=null;u===d?(l+=2,c+=2,m!==v&&(_=d,y=v)):null===d||null!==u&&u<d?(l+=2,_=u):(c+=2,_=d,y=v),null!==_&&Ty(t,i,e,n,_,y,o,s),u=l<r.length?r[l]:null,d=c<a.length?a[c]:null}}(r,s,o,o[11],o[a+1],o[a+1]=function IP(t,i,e){if(null==e||""===e)return Dn;const n=[],r=Dr(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(n,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(n,a,r[a]);else"string"==typeof r&&i(n,r);return n}(t,i,e),n,a)}}function Cy(t,i){return i>=t.expandoStartIndex}function wy(t,i,e,n){const r=t.data;if(null===r[e+1]){const a=r[er()],o=Cy(t,e);Ry(a,n)&&null===i&&!o&&(i=!1),i=function kP(t,i,e,n){const r=function lp(t){const i=Ct.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}(t);let a=n?i.residualClasses:i.residualStyles;if(null===r)0===(n?i.classBindings:i.styleBindings)&&(e=kc(e=Eg(null,t,i,e,n),i.attrs,n),a=null);else{const o=i.directiveStylingLast;if(-1===o||t[o]!==r)if(e=Eg(r,t,i,e,n),null===a){let l=function AP(t,i,e){const n=e?i.classBindings:i.styleBindings;if(0!==Qa(n))return t[aa(n)]}(t,i,n);void 0!==l&&Array.isArray(l)&&(l=Eg(null,t,i,l[1],n),l=kc(l,i.attrs,n),function PP(t,i,e,n){t[aa(e?i.classBindings:i.styleBindings)]=n}(t,i,n,l))}else a=function EP(t,i,e){let n;const r=i.directiveEnd;for(let a=1+i.directiveStylingLast;a<r;a++)n=kc(n,t[a].hostAttrs,e);return kc(n,i.attrs,e)}(t,i,n)}return void 0!==a&&(n?i.residualClasses=a:i.residualStyles=a),e}(r,a,i,n),function _P(t,i,e,n,r,a){let o=a?i.classBindings:i.styleBindings,s=aa(o),l=Qa(o);t[n]=e;let u,c=!1;if(Array.isArray(e)){const d=e;u=d[1],(null===u||Hs(d,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const m=aa(t[s+1]);t[n+1]=xd(m,s),0!==m&&(t[m+1]=Xp(t[m+1],n)),t[s+1]=function Ik(t,i){return 131071&t|i<<17}(t[s+1],n)}else t[n+1]=xd(s,0),0!==s&&(t[s+1]=Xp(t[s+1],n)),s=n;else t[n+1]=xd(l,0),0===s?s=n:t[l+1]=Xp(t[l+1],n),l=n;c&&(t[n+1]=Wp(t[n+1])),py(t,u,n,!0),py(t,u,n,!1),function yP(t,i,e,n,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof i&&Hs(a,i)>=0&&(e[n+1]=Yp(e[n+1]))}(i,u,t,n,a),o=xd(s,l),a?i.classBindings=o:i.styleBindings=o}(r,a,i,e,o,n)}}function Eg(t,i,e,n,r){let a=null;const o=e.directiveEnd;let s=e.directiveStylingLast;for(-1===s?s=e.directiveStart:s++;s<o&&(a=i[s],n=kc(n,a.hostAttrs,r),a!==t);)s++;return null!==t&&(e.directiveStylingLast=s),n}function kc(t,i,e){const n=e?1:2;let r=-1;if(null!==i)for(let a=0;a<i.length;a++){const o=i[a];"number"==typeof o?r=o:r===n&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Tr(t,o,!!e||i[++a]))}return void 0===t?null:t}function Ty(t,i,e,n,r,a,o,s){if(!(3&i.type))return;const l=t.data,c=l[s+1];Ld(function j1(t){return 1==(1&t)}(c)?Dy(l,i,e,r,Qa(c),o):void 0)||(Ld(a)||function G1(t){return 2==(2&t)}(c)&&(a=Dy(l,null,e,r,s,o)),function Ck(t,i,e,n,r){const a=Yn(t);if(i)r?a?t.addClass(e,n):e.classList.add(n):a?t.removeClass(e,n):e.classList.remove(n);else{let o=-1===n.indexOf("-")?void 0:Rr.DashCase;if(null==r)a?t.removeStyle(e,n,o):e.style.removeProperty(n);else{const s="string"==typeof r&&r.endsWith("!important");s&&(r=r.slice(0,-10),o|=Rr.Important),a?t.setStyle(e,n,r,o):e.style.setProperty(n,r,s?"important":"")}}}(n,o,id(er(),e),r,a))}function Dy(t,i,e,n,r,a){const o=null===i;let s;for(;r>0;){const l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let m=e[r+1];m===xt&&(m=d?Dn:void 0);let v=d?_p(m,n):u===n?m:void 0;if(c&&!Ld(v)&&(v=_p(l,n)),Ld(v)&&(s=v,o))return s;const _=t[r+1];r=o?aa(_):Qa(_)}if(null!==i){let l=a?i.residualClasses:i.residualStyles;null!=l&&(s=_p(l,n))}return s}function Ld(t){return void 0!==t}function Ry(t,i){return 0!=(t.flags&(i?16:32))}function g(t,i=""){const e=De(),n=nn(),r=t+20,a=n.firstCreatePass?Xs(n,r,1,i,null):n.data[r],o=e[r]=Lp(e[11],i);Dd(n,e,o,a),Da(a,!1)}function Ze(t){return Q("",t,""),Ze}function Q(t,i,e){const n=De(),r=tl(n,t,i,e);return r!==xt&&Ka(n,er(),r),Q}function Kn(t,i,e,n,r){const a=De(),o=function nl(t,i,e,n,r,a){const s=Qo(t,Wa(),e,r);return Xa(2),s?i+Rt(e)+n+Rt(r)+a:xt}(a,t,i,e,n,r);return o!==xt&&Ka(a,er(),o),Kn}function Ig(t,i,e,n,r,a,o){const s=De(),l=function il(t,i,e,n,r,a,o,s){const c=Od(t,Wa(),e,r,o);return Xa(3),c?i+Rt(e)+n+Rt(r)+a+Rt(o)+s:xt}(s,t,i,e,n,r,a,o);return l!==xt&&Ka(s,er(),l),Ig}function Og(t,i,e,n,r,a,o,s,l){const c=De(),u=rl(c,t,i,e,n,r,a,o,s,l);return u!==xt&&Ka(c,er(),u),Og}function Ng(t,i,e){la(Tr,Oa,tl(De(),t,i,e),!0)}function Do(t,i,e){const n=De();return qi(n,Is(),i)&&xr(nn(),Qn(),n,t,i,n[11],e,!0),Do}const Ko=void 0;var JP=["en",[["a","p"],["AM","PM"],Ko],[["AM","PM"],Ko,Ko],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ko,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ko,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ko,"{1} 'at' {0}",Ko],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ZP(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let dl={};function nr(t){const i=function eE(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=zy(i);if(e)return e;const n=i.split("-")[0];if(e=zy(n),e)return e;if("en"===n)return JP;throw new Error(`Missing locale data for the locale "${t}".`)}function jy(t){return nr(t)[$e.PluralCase]}function zy(t){return t in dl||(dl[t]=Cn.ng&&Cn.ng.common&&Cn.ng.common.locales&&Cn.ng.common.locales[t]),dl[t]}var $e=(()=>(($e=$e||{})[$e.LocaleId=0]="LocaleId",$e[$e.DayPeriodsFormat=1]="DayPeriodsFormat",$e[$e.DayPeriodsStandalone=2]="DayPeriodsStandalone",$e[$e.DaysFormat=3]="DaysFormat",$e[$e.DaysStandalone=4]="DaysStandalone",$e[$e.MonthsFormat=5]="MonthsFormat",$e[$e.MonthsStandalone=6]="MonthsStandalone",$e[$e.Eras=7]="Eras",$e[$e.FirstDayOfWeek=8]="FirstDayOfWeek",$e[$e.WeekendRange=9]="WeekendRange",$e[$e.DateFormat=10]="DateFormat",$e[$e.TimeFormat=11]="TimeFormat",$e[$e.DateTimeFormat=12]="DateTimeFormat",$e[$e.NumberSymbols=13]="NumberSymbols",$e[$e.NumberFormats=14]="NumberFormats",$e[$e.CurrencyCode=15]="CurrencyCode",$e[$e.CurrencySymbol=16]="CurrencySymbol",$e[$e.CurrencyName=17]="CurrencyName",$e[$e.Currencies=18]="Currencies",$e[$e.Directionality=19]="Directionality",$e[$e.PluralCase=20]="PluralCase",$e[$e.ExtraData=21]="ExtraData",$e))();const tE=["zero","one","two","few","many"],Ud="en-US",Hd={marker:"element"},Gd={marker:"ICU"};var Zn=(()=>((Zn=Zn||{})[Zn.SHIFT=2]="SHIFT",Zn[Zn.APPEND_EAGERLY=1]="APPEND_EAGERLY",Zn[Zn.COMMENT=2]="COMMENT",Zn))();let $y=Ud;function qy(t,i,e){const n=i.insertBeforeIndex,r=Array.isArray(n)?n[0]:n;return null===r?M1(t,0,e):di(e[r])}function Wy(t,i,e,n,r){const a=i.insertBeforeIndex;if(Array.isArray(a)){let o=n,s=null;if(3&i.type||(s=o,o=r),null!==o&&0==(2&i.flags))for(let l=1;l<a.length;l++)Yo(t,o,e[a[l]],s,!1)}}function Xy(t,i){if(t.push(i),t.length>1)for(let e=t.length-2;e>=0;e--){const n=t[e];Yy(n)||oE(n,i)&&null===sE(n)&&lE(n,i.index)}}function Yy(t){return!(64&t.type)}function oE(t,i){return Yy(i)||t.index>i.index}function sE(t){const i=t.insertBeforeIndex;return Array.isArray(i)?i[0]:i}function lE(t,i){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=i:(A1(qy,Wy),t.insertBeforeIndex=i)}function Ac(t,i){const e=t.data[i];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function dE(t,i,e){const n=rg(t,e,64,null,null);return Xy(i,n),n}function jd(t,i){const e=i[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function Qy(t){return t>>>17}function Ky(t){return(131070&t)>>>1}let Pc=0,Ec=0;function Jy(t,i,e,n){const r=e[11];let o,a=null;for(let s=0;s<i.length;s++){const l=i[s];if("string"==typeof l){const c=i[++s];null===e[c]&&(e[c]=Lp(r,l))}else if("number"==typeof l)switch(1&l){case 0:const c=Qy(l);let u,d;if(null===a&&(a=c,o=Td(r,n)),c===a?(u=n,d=o):(u=null,d=di(e[c])),null!==d){const y=Ky(l);Yo(r,d,e[y],u,!1);const D=Ac(t,y);if(null!==D&&"object"==typeof D){const w=jd(D,e);null!==w&&Jy(t,D.create[w],e,e[D.anchorIdx])}}break;case 1:const v=i[++s],_=i[++s];lg(r,id(l>>>1,e),null,null,v,_,null)}else switch(l){case Gd:const c=i[++s],u=i[++s];null===e[u]&&$i(e[u]=lk(r,c),e);break;case Hd:const d=i[++s],m=i[++s];null===e[m]&&$i(e[m]=Up(r,d,null),e)}}}function eC(t,i,e,n,r){for(let a=0;a<e.length;a++){const o=e[a],s=e[++a];if(o&r){let l="";for(let c=a+1;c<=a+s;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=Rt(i[n-u]);else{const d=u>>>2;switch(3&u){case 1:const m=e[++c],v=e[++c],_=t.data[d];"string"==typeof _?lg(i[11],i[d],null,_,m,l,v):xr(t,_,i,m,l,i[11],v,!1);break;case 0:const y=i[d];null!==y&&y1(i[11],y,l);break;case 2:mE(t,Ac(t,d),i,l);break;case 3:tC(t,Ac(t,d),n,i)}}}}else{const l=e[a+1];if(l>0&&3==(3&l)){const u=Ac(t,l>>>2);i[u.currentCaseLViewIndex]<0&&tC(t,u,n,i)}}a+=s}}function tC(t,i,e,n){let r=n[i.currentCaseLViewIndex];if(null!==r){let a=Pc;r<0&&(r=n[i.currentCaseLViewIndex]=~r,a=-1),eC(t,n,i.update[r],e,a)}}function mE(t,i,e,n){const r=function vE(t,i){let e=t.cases.indexOf(i);if(-1===e)switch(t.type){case 1:{const n=function nE(t,i){const e=jy(i)(parseInt(t,10)),n=tE[e];return void 0!==n?n:"other"}(i,function aE(){return $y}());e=t.cases.indexOf(n),-1===e&&"other"!==n&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(i,n);if(jd(i,e)!==r&&(nC(t,i,e),e[i.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const o=e[i.anchorIdx];o&&Jy(t,i.create[r],e,o)}}function nC(t,i,e){let n=jd(i,e);if(null!==n){const r=i.remove[n];for(let a=0;a<r.length;a++){const o=r[a];if(o>0){const s=id(o,e);null!==s&&E1(e[11],s)}else nC(t,Ac(t,~o),e)}}}function bE(){const t=[];let e,n,i=-1;function a(s,l){i=0;const c=jd(s,l);n=null!==c?s.remove[c]:Dn}function o(){if(i<n.length){const s=n[i++];return s>0?e[s]:(t.push(i,n),a(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),i=t.pop(),o())}return function r(s,l){for(e=l;t.length;)t.pop();return a(s.value,l),o}}const zd=/\ufffd(\d+):?\d*\ufffd/gi,yE=/\ufffd(\d+)\ufffd/,rC=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,CE=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,wE=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,SE=/\uE500/g;function aC(t,i,e,n,r,a,o){const s=Ys(t,n,1,null);let l=s<<Zn.SHIFT,c=ic();i===c&&(c=null),null===c&&(l|=Zn.APPEND_EAGERLY),o&&(l|=Zn.COMMENT,function sk(t){void 0===Np&&(Np=t())}(bE)),r.push(l,null===a?"":a);const u=rg(t,s,o?32:1,null===a?"":a,null);Xy(e,u);const d=u.index;return Da(u,!1),null!==c&&i!==c&&function uE(t,i){let e=t.insertBeforeIndex;null===e?(A1(qy,Wy),e=t.insertBeforeIndex=[null,i]):(function $a(t,i,e){t!=i&&Nn(e,t,i,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(i))}(c,d),u}function RE(t,i,e,n,r,a,o){const s=o.match(zd),l=aC(t,i,e,a,n,s?null:o,!1);s&&hl(r,o,l.index,null,0,null)}function hl(t,i,e,n,r,a){const o=t.length,s=o+1;t.push(null,null);const l=o+2,c=i.split(zd);let u=0;for(let d=0;d<c.length;d++){const m=c[d];if(1&d){const v=r+parseInt(m,10);t.push(-1-v),u|=oC(v)}else""!==m&&t.push(m)}return t.push(e<<2|(n?1:0)),n&&t.push(n,a),t[o]=u,t[s]=t.length-l,u}function oC(t){return 1<<Math.min(t,31)}function sC(t){let i,a,e="",n=0,r=!1;for(;null!==(i=CE.exec(t));)r?i[0]===`\ufffd/*${a}\ufffd`&&(n=i.index,r=!1):(e+=t.substring(n,i.index+i[0].length),a=i[1],r=!0);return e+=t.substr(n),e}function lC(t,i,e,n,r,a){let o=0;const s={type:r.type,currentCaseLViewIndex:Ys(t,i,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};(function OE(t,i,e){t.push(oC(i.mainBinding),2,-1-i.mainBinding,e<<2|2)})(e,r,a),function cE(t,i,e){const n=t.data[i];null===n?t.data[i]=e:n.value=e}(t,a,s);const l=r.values;for(let c=0;c<l.length;c++){const u=l[c],d=[];for(let m=0;m<u.length;m++){const v=u[m];if("string"!=typeof v){const _=d.push(v)-1;u[m]=`\x3c!--\ufffd${_}\ufffd--\x3e`}}o=EE(t,s,i,e,n,r.cases[c],u.join(""),d)|o}o&&function NE(t,i,e){t.push(i,1,e<<2|3)}(e,o,a)}function PE(t){const i=[],e=[];let n=1,r=0;const a=Vg(t=t.replace(rC,function(o,s,l){return n="select"===l?0:1,r=parseInt(s.substr(1),10),""}));for(let o=0;o<a.length;){let s=a[o++].trim();1===n&&(s=s.replace(/\s*(?:=)?(\w+)\s*/,"$1")),s.length&&i.push(s);const l=Vg(a[o++]);i.length>e.length&&e.push(l)}return{type:n,mainBinding:r,cases:i,values:e}}function Vg(t){if(!t)return[];let i=0;const e=[],n=[],r=/[{}]/g;let a;for(r.lastIndex=0;a=r.exec(t);){const s=a.index;if("}"==a[0]){if(e.pop(),0==e.length){const l=t.substring(i,s);rC.test(l)?n.push(PE(l)):n.push(l),i=s+1}}else{if(0==e.length){const l=t.substring(i,s);n.push(l),i=s+1}e.push("{")}}const o=t.substring(i);return n.push(o),n}function EE(t,i,e,n,r,a,o,s){const l=[],c=[],u=[];i.cases.push(a),i.create.push(l),i.remove.push(c),i.update.push(u);const m=Jb(tp()).getInertBodyElement(o),v=kp(m)||m;return v?cC(t,i,e,n,l,c,u,v,r,s,0):0}function cC(t,i,e,n,r,a,o,s,l,c,u){let d=0,m=s.firstChild;for(;m;){const v=Ys(t,e,1,null);switch(m.nodeType){case Node.ELEMENT_NODE:const _=m,y=_.tagName.toLowerCase();if(Rp.hasOwnProperty(y)){Fg(r,Hd,y,l,v),t.data[v]=y;const T=_.attributes;for(let L=0;L<T.length;L++){const G=T.item(L),ee=G.name.toLowerCase();G.value.match(zd)?r1.hasOwnProperty(ee)&&hl(o,G.value,v,G.name,0,xp[ee]?mc:Mp[ee]?e1:null):VE(r,v,G)}d=cC(t,i,e,n,r,a,o,m,v,c,u+1)|d,uC(a,v,u)}break;case Node.TEXT_NODE:const S=m.textContent||"",D=S.match(zd);Fg(r,null,D?"":S,l,v),uC(a,v,u),D&&(d=hl(o,S,v,null,0,null)|d);break;case Node.COMMENT_NODE:const w=yE.exec(m.textContent||"");if(w){const L=c[parseInt(w[1],10)];Fg(r,Gd,"",l,v),lC(t,e,n,l,L,v),IE(a,v,u)}}m=m.nextSibling}return d}function uC(t,i,e){0===e&&t.push(i)}function IE(t,i,e){0===e&&(t.push(~i),t.push(i))}function Fg(t,i,e,n,r){null!==i&&t.push(i),t.push(e,r,function hE(t,i,e){return t|i<<17|e<<1}(0,n,r))}function VE(t,i,e){t.push(i<<1|1,e.name,e.value)}function hC(t,i,e=-1){const n=nn(),r=De(),a=20+t,o=_o(n.consts,i),s=ic();n.firstCreatePass&&function DE(t,i,e,n,r,a){const o=ic(),s=[],l=[],c=[[]];r=function AE(t,i){if(function kE(t){return-1===t}(i))return sC(t);{const e=t.indexOf(`:${i}\ufffd`)+2+i.toString().length,n=t.search(new RegExp(`\ufffd\\/\\*\\d+:${i}\ufffd`));return sC(t.substring(e,n))}}(r,a);const u=function TE(t){return t.replace(SE," ")}(r).split(wE);for(let d=0;d<u.length;d++){let m=u[d];if(0==(1&d)){const v=Vg(m);for(let _=0;_<v.length;_++){let y=v[_];if(0==(1&_)){const S=y;""!==S&&RE(t,o,c[0],s,l,e,S)}else{const S=y;if("object"!=typeof S)throw new Error(`Unable to parse ICU expression in "${r}" message.`);lC(t,e,l,i,S,aC(t,o,c[0],e,s,"",!0).index)}}}else{const v=47===m.charCodeAt(0),y=(m.charCodeAt(v?1:0),20+Number.parseInt(m.substring(v?2:1)));if(v)c.shift(),Da(ic(),!1);else{const S=dE(t,c[0],y);c.unshift([]),Da(S,!0)}}}t.data[n]={create:s,update:l}}(n,null===s?0:s.index,r,a,o,e);const l=n.data[a],u=T1(n,s===r[6]?null:s,r);(function gE(t,i,e,n){const r=t[11];for(let a=0;a<i.length;a++){const o=i[a++],s=i[a],l=(o&Zn.COMMENT)===Zn.COMMENT,c=(o&Zn.APPEND_EAGERLY)===Zn.APPEND_EAGERLY,u=o>>>Zn.SHIFT;let d=t[u];null===d&&(d=t[u]=l?r.createComment(s):Lp(r,s)),c&&null!==e&&Yo(r,e,d,n,!1)}})(r,l.create,u,s&&8&s.type?r[s.index]:null),vb(!0)}function Za(t,i,e){hC(t,i,e),function fC(){vb(!1)}()}function $d(t){return function fE(t){t&&(Pc|=1<<Math.min(Ec,31)),Ec++}(qi(De(),Is(),t)),$d}function Lg(t,i,e,n,r){if(t=Nt(t),Array.isArray(t))for(let a=0;a<t.length;a++)Lg(t[a],i,e,n,r);else{const a=nn(),o=De();let s=Zs(t)?t:Nt(t.provide),l=w_(t);const c=_i(),u=1048575&c.providerIndexes,d=c.directiveStart,m=c.providerIndexes>>20;if(Zs(t)||!t.multi){const v=new rc(l,r,P),_=Hg(s,i,r?u:u+m,d);-1===_?(gd(oc(c,o),a,s),Ug(a,t,i.length),i.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(v),o.push(v)):(e[_]=v,o[_]=v)}else{const v=Hg(s,i,u+m,d),_=Hg(s,i,u,u+m),y=v>=0&&e[v],S=_>=0&&e[_];if(r&&!S||!r&&!y){gd(oc(c,o),a,s);const D=function QE(t,i,e,n,r){const a=new rc(t,e,P);return a.multi=[],a.index=i,a.componentProviders=0,pC(a,r,n&&!e),a}(r?YE:XE,e.length,r,n,l);!r&&S&&(e[_].providerFactory=D),Ug(a,t,i.length,0),i.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(D),o.push(D)}else Ug(a,t,v>-1?v:_,pC(e[r?_:v],l,!r&&n));!r&&n&&S&&e[_].componentProviders++}}}function Ug(t,i,e,n){const r=Zs(i),a=function RA(t){return!!t.useClass}(i);if(r||a){const l=(a?Nt(i.useClass):i).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&i.multi){const u=c.indexOf(e);-1===u?c.push(e,[n,l]):c[u+1].push(n,l)}else c.push(e,l)}}}function pC(t,i,e){return e&&t.componentProviders++,t.multi.push(i)-1}function Hg(t,i,e,n){for(let r=e;r<n;r++)if(i[r]===t)return r;return-1}function XE(t,i,e,n){return Gg(this.multi,[])}function YE(t,i,e,n){const r=this.multi;let a;if(this.providerFactory){const o=this.providerFactory.componentProviders,s=sc(e,e[1],this.providerFactory.index,n);a=s.slice(0,o),Gg(r,a);for(let l=o;l<s.length;l++)a.push(s[l])}else a=[],Gg(r,a);return a}function Gg(t,i){for(let e=0;e<t.length;e++)i.push((0,t[e])());return i}function Rn(t,i=[]){return e=>{e.providersResolver=(n,r)=>function WE(t,i,e){const n=nn();if(n.firstCreatePass){const r=ia(t);Lg(e,n.data,n.blueprint,r,!0),Lg(i,n.data,n.blueprint,r,!1)}}(n,r?r(t):t,i)}}class gC{}class JE{resolveComponentFactory(i){throw function ZE(t){const i=Error(`No component factory found for ${vn(t)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=t,i}(i)}}let Zo=(()=>{class t{}return t.NULL=new JE,t})();function eI(){return fl(_i(),De())}function fl(t,i){return new gn(Hr(t,i))}let gn=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=eI,t})();function tI(t){return t instanceof gn?t.nativeElement:t}class jg{}let zr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function iI(){const t=De(),e=Sr(_i().index,t);return function nI(t){return t[11]}(Ta(e)?e:t)}(),t})(),rI=(()=>{class t{}return t.\u0275prov=Je({token:t,providedIn:"root",factory:()=>null}),t})();class Oc{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const aI=new Oc("13.2.3"),zg={};function qd(t,i,e,n,r=!1){for(;null!==e;){const a=i[e.index];if(null!==a&&n.push(di(a)),na(a))for(let s=10;s<a.length;s++){const l=a[s],c=l[1].firstChild;null!==c&&qd(l[1],l,c,n)}const o=e.type;if(8&o)qd(t,i,e.child,n);else if(32&o){const s=Vp(e,i);let l;for(;l=s();)n.push(l)}else if(16&o){const s=P1(i,e);if(Array.isArray(s))n.push(...s);else{const l=yc(i[16]);qd(l[1],l,s,n,!0)}}e=r?e.projectionNext:e.next}return n}class Nc{constructor(i,e){this._lView=i,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,e=i[1];return qd(e,i,e.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(na(i)){const e=i[8],n=e?e.indexOf(this):-1;n>-1&&(Hp(i,n),vd(e,n))}this._attachedToViewContainer=!1}w1(this._lView[1],this._lView)}onDestroy(i){i_(this._lView[1],this._lView,null,i)}markForCheck(){ug(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){hg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function gA(t,i,e){ad(!0);try{hg(t,i,e)}finally{ad(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new tn(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dk(t,i){Cc(t,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new tn(902,"");this._appRef=i}}class oI extends Nc{constructor(i){super(i),this._view=i}detectChanges(){h_(this._view)}checkNoChanges(){!function mA(t){ad(!0);try{h_(t)}finally{ad(!1)}}(this._view)}get context(){return null}}class vC extends Zo{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const e=Gi(i);return new $g(e,this.ngModule)}}function bC(t){const i=[];for(let e in t)t.hasOwnProperty(e)&&i.push({propName:t[e],templateName:e});return i}const lI=new Gt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>p1});class $g extends gC{constructor(i,e){super(),this.componentDef=i,this.ngModule=e,this.componentType=i.type,this.selector=function Pk(t){return t.map(Ak).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return bC(this.componentDef.inputs)}get outputs(){return bC(this.componentDef.outputs)}create(i,e,n,r){const a=(r=r||this.ngModule)?function cI(t,i){return{get:(e,n,r)=>{const a=t.get(e,zg,r);return a!==zg||n===zg?a:i.get(e,n,r)}}}(i,r.injector):i,o=a.get(jg,db),s=a.get(rI,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function n_(t,i,e){if(Yn(t))return t.selectRootElement(i,e===Sa.ShadowDom);let n="string"==typeof i?t.querySelector(i):i;return n.textContent="",n}(l,n,this.componentDef.encapsulation):Up(o.createRenderer(null,this.componentDef),c,function sI(t){const i=t.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(c)),d=this.componentDef.onPush?576:528,m=function O_(t,i){return{components:[],scheduler:t||p1,clean:vA,playerHandler:i||null,flags:0}}(),v=Ad(0,null,null,1,0,null,null,null,null,null),_=wc(null,v,m,d,null,null,o,l,s,a);let y,S;od(_);try{const D=function E_(t,i,e,n,r,a){const o=e[1];e[20]=t;const l=Xs(o,20,2,"#host",null),c=l.mergedAttrs=i.hostAttrs;null!==c&&(Ed(l,c,!0),null!==t&&(dd(r,t,c),null!==l.classes&&qp(r,t,l.classes),null!==l.styles&&O1(r,t,l.styles)));const u=n.createRenderer(t,i),d=wc(e,e_(i),null,i.onPush?64:16,e[20],l,n,u,a||null,null);return o.firstCreatePass&&(gd(oc(l,e),o,i.type),l_(o,l),c_(l,e.length,1)),Pd(e,d),e[20]=d}(u,this.componentDef,_,o,l);if(u)if(n)dd(l,u,["ng-version",aI.full]);else{const{attrs:w,classes:T}=function Ek(t){const i=[],e=[];let n=1,r=2;for(;n<t.length;){let a=t[n];if("string"==typeof a)2===r?""!==a&&i.push(a,t[++n]):8===r&&e.push(a);else{if(!ra(r))break;r=a}n++}return{attrs:i,classes:e}}(this.componentDef.selectors[0]);w&&dd(l,u,w),T&&T.length>0&&qp(l,u,T.join(" "))}if(S=np(v,20),void 0!==e){const w=S.projection=[];for(let T=0;T<this.ngContentSelectors.length;T++){const L=e[T];w.push(null!=L?Array.from(L):null)}}y=function I_(t,i,e,n,r){const a=e[1],o=function Jk(t,i,e){const n=_i();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),u_(t,n,i,Ys(t,i,1,null),e));const r=sc(i,t,n.directiveStart,n);$i(r,i);const a=Hr(n,i);return a&&$i(a,i),r}(a,e,i);if(n.components.push(o),t[8]=o,r&&r.forEach(l=>l(o,i)),i.contentQueries){const l=_i();i.contentQueries(1,o,l.directiveStart)}const s=_i();return!a.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(yo(s.index),o_(e[1],s,0,s.directiveStart,s.directiveEnd,i),s_(i,o)),o}(D,this.componentDef,_,m,[FA]),Sc(v,_,null)}finally{sd()}return new dI(this.componentType,y,fl(S,_),_,S)}}class dI extends class KE{}{constructor(i,e,n,r,a){super(),this.location=n,this._rootLView=r,this._tNode=a,this.instance=e,this.hostView=this.changeDetectorRef=new oI(r),this.componentType=i}get injector(){return new Vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class Ja{}class _C{}const pl=new Map;class wC extends Ja{constructor(i,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vC(this);const n=Br(i);this._bootstrapComponents=Aa(n.bootstrap),this._r3Injector=C_(i,e,[{provide:Ja,useValue:this},{provide:Zo,useValue:this.componentFactoryResolver}],vn(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,e=ai.THROW_IF_NOT_FOUND,n=kt.Default){return i===ai||i===Ja||i===pg?this:this._r3Injector.get(i,e,n)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class qg extends _C{constructor(i){super(),this.moduleType=i,null!==Br(i)&&function fI(t){const i=new Set;!function e(n){const r=Br(n,!0),a=r.id;null!==a&&(function yC(t,i,e){if(i&&i!==e)throw new Error(`Duplicate module registered for ${t} - ${vn(i)} vs ${vn(i.name)}`)}(a,pl.get(a),n),pl.set(a,n));const o=Aa(r.imports);for(const s of o)i.has(s)||(i.add(s),e(s))}(t)}(i)}create(i){return new wC(this.moduleType,i)}}function Wg(t,i,e){const n=Ji()+t,r=De();return r[n]===xt?Ea(r,n,e?i.call(e):i()):Rc(r,n)}function Jn(t,i,e,n){return TC(De(),Ji(),t,i,e,n)}function Jo(t,i,e,n,r){return DC(De(),Ji(),t,i,e,n,r)}function Vc(t,i){const e=t[i];return e===xt?void 0:e}function TC(t,i,e,n,r,a){const o=i+e;return qi(t,o,r)?Ea(t,o+1,a?n.call(a,r):n(r)):Vc(t,o+1)}function DC(t,i,e,n,r,a,o){const s=i+e;return Qo(t,s,r,a)?Ea(t,s+2,o?n.call(o,r,a):n(r,a)):Vc(t,s+2)}function At(t,i){const e=nn();let n;const r=t+20;e.firstCreatePass?(n=function _I(t,i){if(i)for(let e=i.length-1;e>=0;e--){const n=i[e];if(t===n.name)return n}}(i,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const a=n.factory||(n.factory=qo(n.type)),o=mo(P);try{const s=fd(!1),l=a();return fd(s),function YA(t,i,e,n){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),i[e]=n}(e,De(),r,l),l}finally{mo(o)}}function Wd(t,i,e){const n=t+20,r=De(),a=Es(r,n);return Bc(r,n)?TC(r,Ji(),i,a.transform,e,a):a.transform(e)}function Jt(t,i,e,n){const r=t+20,a=De(),o=Es(a,r);return Bc(a,r)?DC(a,Ji(),i,o.transform,e,n,o):o.transform(e,n)}function Fc(t,i,e,n,r){const a=t+20,o=De(),s=Es(o,a);return Bc(o,a)?function RC(t,i,e,n,r,a,o,s){const l=i+e;return Od(t,l,r,a,o)?Ea(t,l+3,s?n.call(s,r,a,o):n(r,a,o)):Vc(t,l+3)}(o,Ji(),i,s.transform,e,n,r,s):s.transform(e,n,r)}function Bc(t,i){return t[1].data[i].pure}function Yg(t){return i=>{setTimeout(t,void 0,i)}}const nt=class wI extends ve{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,e,n){var r,a,o;let s=i,l=e||(()=>null),c=n;if(i&&"object"==typeof i){const d=i;s=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(a=d.error)||void 0===a?void 0:a.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=Yg(l),s&&(s=Yg(s)),c&&(c=Yg(c)));const u=super.subscribe({next:s,error:l,complete:c});return i instanceof he&&i.add(u),u}};function SI(){return this._results[Js()]()}class Qg{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Js(),n=Qg.prototype;n[e]||(n[e]=SI)}get changes(){return this._changes||(this._changes=new nt)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,e){return this._results.reduce(i,e)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,e){const n=this;n.dirty=!1;const r=Gr(i);(this._changesDetected=!function Gx(t,i,e){if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],a=i[n];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Fn=(()=>{class t{}return t.__NG_ELEMENT_ID__=RI,t})();const TI=Fn,DI=class extends TI{constructor(i,e,n){super(),this._declarationLView=i,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(i){const e=this._declarationTContainer.tViews,n=wc(this._declarationLView,e,i,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(n[19]=a.createEmbeddedView(e)),Sc(e,n,i),new Nc(n)}};function RI(){return Xd(_i(),De())}function Xd(t,i){return 4&t.type?new DI(i,t,fl(t,i)):null}let $r=(()=>{class t{}return t.__NG_ELEMENT_ID__=xI,t})();function xI(){return PC(_i(),De())}const MI=$r,kC=class extends MI{constructor(i,e,n){super(),this._lContainer=i,this._hostTNode=e,this._hostLView=n}get element(){return fl(this._hostTNode,this._hostLView)}get injector(){return new Vs(this._hostTNode,this._hostLView)}get parentInjector(){const i=pd(this._hostTNode,this._hostLView);if(xb(i)){const e=Ns(i,this._hostLView),n=Os(i);return new Vs(e[1].data[n+8],e)}return new Vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const e=AC(this._lContainer);return null!==e&&e[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,e,n){const r=i.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(i,e,n,r,a){const o=i&&!function cc(t){return"function"==typeof t}(i);let s;if(o)s=e;else{const d=e||{};s=d.index,n=d.injector,r=d.projectableNodes,a=d.ngModuleRef}const l=o?i:new $g(Gi(i)),c=n||this.parentInjector;if(!a&&null==l.ngModule){const m=(o?c:this.parentInjector).get(Ja,null);m&&(a=m)}const u=l.create(c,r,void 0,a);return this.insert(u.hostView,s),u}insert(i,e){const n=i._lView,r=n[1];if(function cx(t){return na(t[3])}(n)){const u=this.indexOf(i);if(-1!==u)this.detach(u);else{const d=n[3],m=new kC(d,d[6],d[3]);m.detach(m.indexOf(i))}}const a=this._adjustIndex(e),o=this._lContainer;!function fk(t,i,e,n){const r=10+n,a=e.length;n>0&&(e[r-1][4]=i),n<a-10?(i[4]=e[r],Fb(e,10+n,i)):(e.push(i),i[4]=null),i[3]=e;const o=i[17];null!==o&&e!==o&&function pk(t,i){const e=t[9];i[16]!==i[3][3][16]&&(t[2]=!0),null===e?t[9]=[i]:e.push(i)}(o,i);const s=i[19];null!==s&&s.insertView(t),i[2]|=128}(r,n,o,a);const s=zp(a,o),l=n[11],c=Td(l,o[7]);return null!==c&&function uk(t,i,e,n,r,a){n[0]=r,n[6]=i,Cc(t,n,e,1,r,a)}(r,o[6],l,n,c,s),i.attachToViewContainerRef(),Fb(Kg(o),a,i),i}move(i,e){return this.insert(i,e)}indexOf(i){const e=AC(this._lContainer);return null!==e?e.indexOf(i):-1}remove(i){const e=this._adjustIndex(i,-1),n=Hp(this._lContainer,e);n&&(vd(Kg(this._lContainer),e),w1(n[1],n))}detach(i){const e=this._adjustIndex(i,-1),n=Hp(this._lContainer,e);return n&&null!=vd(Kg(this._lContainer),e)?new Nc(n):null}_adjustIndex(i,e=0){return null==i?this.length+e:i}};function AC(t){return t[8]}function Kg(t){return t[8]||(t[8]=[])}function PC(t,i){let e;const n=i[t.index];if(na(n))e=n;else{let r;if(8&t.type)r=di(n);else{const a=i[11];r=a.createComment("");const o=Hr(t,i);Yo(a,Td(a,o),r,function bk(t,i){return Yn(t)?t.nextSibling(i):i.nextSibling}(a,o),!1)}i[t.index]=e=d_(n,i,r,t),Pd(i,e)}return new kC(e,t,i)}class Zg{constructor(i){this.queryList=i,this.matches=null}clone(){return new Zg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jg{constructor(i=[]){this.queries=i}createEmbeddedView(i){const e=i.queries;if(null!==e){const n=null!==i.contentQueries?i.contentQueries[0]:e.length,r=[];for(let a=0;a<n;a++){const o=e.getByIndex(a);r.push(this.queries[o.indexInDeclarationView].clone())}return new Jg(r)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let e=0;e<this.queries.length;e++)null!==VC(i,e).matches&&this.queries[e].setDirty()}}class EC{constructor(i,e,n=null){this.predicate=i,this.flags=e,this.read=n}}class em{constructor(i=[]){this.queries=i}elementStart(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(i,e)}elementEnd(i){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(i)}embeddedTView(i){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,a=this.getByIndex(n).embeddedTView(i,r);a&&(a.indexInDeclarationView=n,null!==e?e.push(a):e=[a])}return null!==e?new em(e):null}template(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(i,e)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class tm{constructor(i,e=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(i,e){this.isApplyingToNode(e)&&this.matchTNode(i,e)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,e){this.elementStart(i,e)}embeddedTView(i,e){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,e),new tm(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=i.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(i,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const a=n[r];this.matchTNodeWithReadOption(i,e,PI(e,a)),this.matchTNodeWithReadOption(i,e,md(e,i,a,!1,!1))}else n===Fn?4&e.type&&this.matchTNodeWithReadOption(i,e,-1):this.matchTNodeWithReadOption(i,e,md(e,i,n,!1,!1))}matchTNodeWithReadOption(i,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===gn||r===$r||r===Fn&&4&e.type)this.addMatch(e.index,-2);else{const a=md(e,i,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,n)}}addMatch(i,e){null===this.matches?this.matches=[i,e]:this.matches.push(i,e)}}function PI(t,i){const e=t.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===i)return e[n+1];return null}function II(t,i,e,n){return-1===e?function EI(t,i){return 11&t.type?fl(t,i):4&t.type?Xd(t,i):null}(i,t):-2===e?function OI(t,i,e){return e===gn?fl(i,t):e===Fn?Xd(i,t):e===$r?PC(i,t):void 0}(t,i,n):sc(t,t[1],e,i)}function IC(t,i,e,n){const r=i[19].queries[n];if(null===r.matches){const a=t.data,o=e.matches,s=[];for(let l=0;l<o.length;l+=2){const c=o[l];s.push(c<0?null:II(i,a[c],o[l+1],e.metadata.read))}r.matches=s}return r.matches}function nm(t,i,e,n){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const o=IC(t,i,r,e);for(let s=0;s<a.length;s+=2){const l=a[s];if(l>0)n.push(o[s/2]);else{const c=a[s+1],u=i[-l];for(let d=10;d<u.length;d++){const m=u[d];m[17]===m[3]&&nm(m[1],m,c,n)}if(null!==u[9]){const d=u[9];for(let m=0;m<d.length;m++){const v=d[m];nm(v[1],v,c,n)}}}}}return n}function un(t){const i=De(),e=nn(),n=bb();cp(n+1);const r=VC(e,n);if(t.dirty&&hb(i)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?nm(e,i,n,[]):IC(e,i,r,n);t.reset(a,tI),t.notifyOnChanges()}return!0}return!1}function ca(t,i,e){const n=nn();n.firstCreatePass&&(NC(n,new EC(t,i,e),-1),2==(2&i)&&(n.staticViewQueries=!0)),OC(n,De(),i)}function oi(t,i,e,n){const r=nn();if(r.firstCreatePass){const a=_i();NC(r,new EC(i,e,n),a.index),function VI(t,i){const e=t.contentQueries||(t.contentQueries=[]);i!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,i)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}OC(r,De(),e)}function dn(){return function NI(t,i){return t[19].queries[i].queryList}(De(),bb())}function OC(t,i,e){const n=new Qg(4==(4&e));i_(t,i,n,n.destroy),null===i[19]&&(i[19]=new Jg),i[19].queries.push(new Zg(n))}function NC(t,i,e){null===t.queries&&(t.queries=new em),t.queries.track(new tm(i,e))}function VC(t,i){return t.queries.getByIndex(i)}function rt(t,i){return Xd(t,i)}function Kd(...t){}const Zd=new Gt("Application Initializer");let ml=(()=>{class t{constructor(e){this.appInits=e,this.resolve=Kd,this.reject=Kd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const a=this.appInits[r]();if(xc(a))e.push(a);else if(Ag(a)){const o=new Promise((s,l)=>{a.subscribe({complete:s,error:l})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Ve(Zd,8))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();const Uc=new Gt("AppId"),eO={provide:Uc,useFactory:function JI(){return`${lm()}${lm()}${lm()}`},deps:[]};function lm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const JC=new Gt("Platform Initializer"),Jd=new Gt("Platform ID"),ew=new Gt("appBootstrapListener");let tw=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();const Ro=new Gt("LocaleId"),nw=new Gt("DefaultCurrencyCode");class tO{constructor(i,e){this.ngModuleFactory=i,this.componentFactories=e}}let eh=(()=>{class t{compileModuleSync(e){return new qg(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),a=Aa(Br(e).declarations).reduce((o,s)=>{const l=Gi(s);return l&&o.push(new $g(l)),o},[]);return new tO(n,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();const iO=(()=>Promise.resolve(0))();function cm(t){"undefined"==typeof Zone?iO.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class xn{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function rO(){let t=Cn.requestAnimationFrame,i=Cn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&i){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const n=i[Zone.__symbol__("OriginalDelegate")];n&&(i=n)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function sO(t){const i=()=>{!function oO(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Cn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,dm(t),t.isCheckStableRunning=!0,um(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),dm(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,a,o,s)=>{try{return iw(t),e.invokeTask(r,a,o,s)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&i(),rw(t)}},onInvoke:(e,n,r,a,o,s,l)=>{try{return iw(t),e.invoke(r,a,o,s,l)}finally{t.shouldCoalesceRunChangeDetection&&i(),rw(t)}},onHasTask:(e,n,r,a)=>{e.hasTask(r,a),n===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,dm(t),um(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,n,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,e,n){return this._inner.run(i,e,n)}runTask(i,e,n,r){const a=this._inner,o=a.scheduleEventTask("NgZoneEvent: "+r,i,aO,Kd,Kd);try{return a.runTask(o,e,n)}finally{a.cancelTask(o)}}runGuarded(i,e,n){return this._inner.runGuarded(i,e,n)}runOutsideAngular(i){return this._outer.run(i)}}const aO={};function um(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function dm(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function iw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rw(t){t._nesting--,um(t)}class lO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(i,e,n){return i.apply(e,n)}runGuarded(i,e,n){return i.apply(e,n)}runOutsideAngular(i){return i()}runTask(i,e,n,r){return i.apply(e,n)}}let hm=(()=>{class t{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xn.assertNotInAngularZone(),cm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cm(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let a=-1;n&&n>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==a),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Ve(xn))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})(),aw=(()=>{class t{constructor(){this._applications=new Map,fm.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return fm.findTestabilityInTree(this,e,n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();class cO{addToWindow(i){}findTestabilityInTree(i,e,n){return null}}let ua,fm=new cO;const ow=new Gt("AllowMultipleToken");class sw{constructor(i,e){this.name=i,this.token=e}}function lw(t,i,e=[]){const n=`Platform: ${i}`,r=new Gt(n);return(a=[])=>{let o=cw();if(!o||o.injector.get(ow,!1))if(t)t(e.concat(a).concat({provide:r,useValue:!0}));else{const s=e.concat(a).concat({provide:r,useValue:!0},{provide:gg,useValue:"platform"});!function fO(t){if(ua&&!ua.destroyed&&!ua.injector.get(ow,!1))throw new tn(400,"");ua=t.get(uw);const i=t.get(JC,null);i&&i.forEach(e=>e())}(ai.create({providers:s,name:n}))}return function pO(t){const i=cw();if(!i)throw new tn(401,"");return i}()}}function cw(){return ua&&!ua.destroyed?ua:null}let uw=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const s=function gO(t,i){let e;return e="noop"===t?new lO:("zone.js"===t?void 0:t)||new xn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),e}(n?n.ngZone:void 0,{ngZoneEventCoalescing:n&&n.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:n&&n.ngZoneRunCoalescing||!1}),l=[{provide:xn,useValue:s}];return s.run(()=>{const c=ai.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),d=u.injector.get($s,null);if(!d)throw new tn(402,"");return s.runOutsideAngular(()=>{const m=s.onError.subscribe({next:v=>{d.handleError(v)}});u.onDestroy(()=>{pm(this._modules,u),m.unsubscribe()})}),function mO(t,i,e){try{const n=e();return xc(n)?n.catch(r=>{throw i.runOutsideAngular(()=>t.handleError(r)),r}):n}catch(n){throw i.runOutsideAngular(()=>t.handleError(n)),n}}(d,s,()=>{const m=u.injector.get(ml);return m.runInitializers(),m.donePromise.then(()=>(function rE(t){(function Cr(t,i){null==t&&Nn(i,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&($y=t.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Ro,Ud)||Ud),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,n=[]){const r=dw({},n);return function dO(t,i,e){const n=new qg(e);return Promise.resolve(n)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const n=e.injector.get(es);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new tn(403,"");e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new tn(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Ve(ai))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();function dw(t,i){return Array.isArray(i)?i.reduce(dw,t):Object.assign(Object.assign({},t),i)}let es=(()=>{class t{constructor(e,n,r,a,o){this._zone=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Oe(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Oe(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{xn.assertNotInAngularZone(),cm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{xn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=Y0(s,l.pipe(Q0()))}bootstrap(e,n){if(!this._initStatus.done)throw new tn(405,"");let r;r=e instanceof gC?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const a=function hO(t){return t.isBoundToModule}(r)?void 0:this._injector.get(Ja),s=r.create(ai.NULL,[],n||r.selector,a),l=s.location.nativeElement,c=s.injector.get(hm,null),u=c&&s.injector.get(aw);return c&&u&&u.registerApplication(l,c),s.onDestroy(()=>{this.detachView(s.hostView),pm(this.components,s),u&&u.unregisterApplication(l)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new tn(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;pm(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ew,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Ve(xn),Ve(ai),Ve($s),Ve(Zo),Ve(ml))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();function pm(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}let fw=!0,Mr=(()=>{class t{}return t.__NG_ELEMENT_ID__=_O,t})();function _O(t){return function yO(t,i,e){if(td(t)&&!e){const n=Sr(t.index,i);return new Nc(n,n)}return 47&t.type?new Nc(i[16],i):null}(_i(),De(),16==(16&t))}class bw{constructor(){}supports(i){return Dc(i)}create(i){return new RO(i)}}const DO=(t,i)=>i;class RO{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||DO}forEachItem(i){let e;for(e=this._itHead;null!==e;e=e._next)i(e)}forEachOperation(i){let e=this._itHead,n=this._removalsHead,r=0,a=null;for(;e||n;){const o=!n||e&&e.currentIndex<yw(n,r,a)?e:n,s=yw(o,r,a),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{a||(a=[]);const c=s-r,u=l-r;if(c!=u){for(let m=0;m<c;m++){const v=m<a.length?a[m]:a[m]=0,_=v+m;u<=_&&_<c&&(a[m]=v+1)}a[o.previousIndex]=u-c}}s!==l&&i(o,s,l)}}forEachPreviousItem(i){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)i(e)}forEachMovedItem(i){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)i(e)}forEachIdentityChange(i){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)i(e)}diff(i){if(null==i&&(i=[]),!Dc(i))throw new tn(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let r,a,o,e=this._itHead,n=!1;if(Array.isArray(i)){this.length=i.length;for(let s=0;s<this.length;s++)a=i[s],o=this._trackByFn(s,a),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,s),n=!0),e=e._next}else r=0,function WA(t,i){if(Array.isArray(t))for(let e=0;e<t.length;e++)i(t[e]);else{const e=t[Js()]();let n;for(;!(n=e.next()).done;)i(n.value)}}(i,s=>{o=this._trackByFn(r,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,r)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,e,n,r){let a;return null===i?a=this._itTail:(a=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._reinsertAfter(i,a,r)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._moveAfter(i,a,r)):i=this._addAfter(new xO(e,n),a,r),i}_verifyReinsertion(i,e,n,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==a?i=this._reinsertAfter(a,i._prev,r):i.currentIndex!=r&&(i.currentIndex=r,this._addToMoves(i,r)),i}_truncate(i){for(;null!==i;){const e=i._next;this._addToRemovals(this._unlink(i)),i=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const r=i._prevRemoved,a=i._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(i,e,n),this._addToMoves(i,n),i}_moveAfter(i,e,n){return this._unlink(i),this._insertAfter(i,e,n),this._addToMoves(i,n),i}_addAfter(i,e,n){return this._insertAfter(i,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,e,n){const r=null===e?this._itHead:e._next;return i._next=r,i._prev=e,null===r?this._itTail=i:r._prev=i,null===e?this._itHead=i:e._next=i,null===this._linkedRecords&&(this._linkedRecords=new _w),this._linkedRecords.put(i),i.currentIndex=n,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const e=i._prev,n=i._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,i}_addToMoves(i,e){return i.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _w),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,e){return i.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class xO{constructor(i,e){this.item=i,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class MO{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,i))return n;return null}remove(i){const e=i._prevDup,n=i._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class _w{constructor(){this.map=new Map}put(i){const e=i.trackById;let n=this.map.get(e);n||(n=new MO,this.map.set(e,n)),n.add(i)}get(i,e){const r=this.map.get(i);return r?r.get(i,e):null}remove(i){const e=i.trackById;return this.map.get(e).remove(i)&&this.map.delete(e),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yw(t,i,e){const n=t.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+i+r}class Cw{constructor(){}supports(i){return i instanceof Map||Cg(i)}create(){return new kO}}class kO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let e;for(e=this._mapHead;null!==e;e=e._next)i(e)}forEachPreviousItem(i){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)i(e)}forEachChangedItem(i){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)i(e)}diff(i){if(i){if(!(i instanceof Map||Cg(i)))throw new tn(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(i,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const a=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,a)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,e){if(i){const n=i._prev;return e._next=i,e._prev=n,i._prev=e,n&&(n._next=e),i===this._mapHead&&(this._mapHead=e),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(i,e){if(this._records.has(i)){const r=this._records.get(i);this._maybeAddToChanges(r,e);const a=r._prev,o=r._next;return a&&(a._next=o),o&&(o._prev=a),r._next=null,r._prev=null,r}const n=new AO(i);return this._records.set(i,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,e){Object.is(e,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=e,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,e){i instanceof Map?i.forEach(e):Object.keys(i).forEach(n=>e(i[n],n))}}class AO{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ww(){return new Hc([new bw])}let Hc=(()=>{class t{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ww()),deps:[[t,new Gs,new xa]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new tn(901,"")}}return t.\u0275prov=Je({token:t,providedIn:"root",factory:ww}),t})();function Sw(){return new vl([new Cw])}let vl=(()=>{class t{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Sw()),deps:[[t,new Gs,new xa]]}}find(e){const n=this.factories.find(a=>a.supports(e));if(n)return n;throw new tn(901,"")}}return t.\u0275prov=Je({token:t,providedIn:"root",factory:Sw}),t})();const PO=[new Cw],IO=new Hc([new bw]),OO=new vl(PO),NO=lw(null,"core",[{provide:Jd,useValue:"unknown"},{provide:uw,deps:[ai]},{provide:aw,deps:[]},{provide:tw,deps:[]}]),UO=[{provide:es,useClass:es,deps:[xn,ai,$s,Zo,ml]},{provide:lI,deps:[xn],useFactory:function HO(t){let i=[];return t.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(e){i.push(e)}}},{provide:ml,useClass:ml,deps:[[new xa,Zd]]},{provide:eh,useClass:eh,deps:[]},eO,{provide:Hc,useFactory:function VO(){return IO},deps:[]},{provide:vl,useFactory:function FO(){return OO},deps:[]},{provide:Ro,useFactory:function BO(t){return t||function LO(){return"undefined"!=typeof $localize&&$localize.locale||Ud}()},deps:[[new pc(Ro),new xa,new Gs]]},{provide:nw,useValue:"USD"}];let GO=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Ve(es))},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({providers:UO}),t})(),ih=null;function Na(){return ih}const hi=new Gt("DocumentToken");let ns=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:function(){return function qO(){return Ve(Tw)}()},providedIn:"platform"}),t})();const WO=new Gt("Location Initialized");let Tw=(()=>{class t extends ns{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Na().getBaseHref(this._doc)}onPopState(e){const n=Na().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Na().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){Dw()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){Dw()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Ve(hi))},t.\u0275prov=Je({token:t,factory:function(){return function XO(){return new Tw(Ve(hi))}()},providedIn:"platform"}),t})();function Dw(){return!!window.history.pushState}function _m(t,i){if(0==t.length)return i;if(0==i.length)return t;let e=0;return t.endsWith("/")&&e++,i.startsWith("/")&&e++,2==e?t+i.substring(1):1==e?t+i:t+"/"+i}function Rw(t){const i=t.match(/#|\?|$/),e=i&&i.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function eo(t){return t&&"?"!==t[0]?"?"+t:t}let bl=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:function(){return function YO(t){const i=Ve(hi).location;return new xw(Ve(ns),i&&i.origin||"")}()},providedIn:"root"}),t})();const ym=new Gt("appBaseHref");let xw=(()=>{class t extends bl{constructor(e,n){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return _m(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+eo(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,a){const o=this.prepareExternalUrl(r+eo(a));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,a){const o=this.prepareExternalUrl(r+eo(a));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return t.\u0275fac=function(e){return new(e||t)(Ve(ns),Ve(ym,8))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})(),QO=(()=>{class t extends bl{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=_m(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,a){let o=this.prepareExternalUrl(r+eo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,a){let o=this.prepareExternalUrl(r+eo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return t.\u0275fac=function(e){return new(e||t)(Ve(ns),Ve(ym,8))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})(),Cm=(()=>{class t{constructor(e,n){this._subject=new nt,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=Rw(Mw(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+eo(n))}normalize(e){return t.stripTrailingSlash(function ZO(t,i){return t&&i.startsWith(t)?i.substring(t.length):i}(this._baseHref,Mw(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+eo(n)),r)}replaceState(e,n="",r=null){this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+eo(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformStrategy).historyGo)||void 0===r||r.call(n,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}))}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return t.normalizeQueryParams=eo,t.joinWithSlash=_m,t.stripTrailingSlash=Rw,t.\u0275fac=function(e){return new(e||t)(Ve(bl),Ve(ns))},t.\u0275prov=Je({token:t,factory:function(){return function KO(){return new Cm(Ve(bl),Ve(ns))}()},providedIn:"root"}),t})();function Mw(t){return t.replace(/\/index.html$/,"")}var gr=(()=>((gr=gr||{})[gr.Decimal=0]="Decimal",gr[gr.Percent=1]="Percent",gr[gr.Currency=2]="Currency",gr[gr.Scientific=3]="Scientific",gr))(),fi=(()=>((fi=fi||{})[fi.Zero=0]="Zero",fi[fi.One=1]="One",fi[fi.Two=2]="Two",fi[fi.Few=3]="Few",fi[fi.Many=4]="Many",fi[fi.Other=5]="Other",fi))(),ut=(()=>((ut=ut||{})[ut.Decimal=0]="Decimal",ut[ut.Group=1]="Group",ut[ut.List=2]="List",ut[ut.PercentSign=3]="PercentSign",ut[ut.PlusSign=4]="PlusSign",ut[ut.MinusSign=5]="MinusSign",ut[ut.Exponential=6]="Exponential",ut[ut.SuperscriptingExponent=7]="SuperscriptingExponent",ut[ut.PerMille=8]="PerMille",ut[ut.Infinity=9]="Infinity",ut[ut.NaN=10]="NaN",ut[ut.TimeSeparator=11]="TimeSeparator",ut[ut.CurrencyDecimal=12]="CurrencyDecimal",ut[ut.CurrencyGroup=13]="CurrencyGroup",ut))();function qr(t,i){const e=nr(t),n=e[$e.NumberSymbols][i];if(void 0===n){if(i===ut.CurrencyDecimal)return e[$e.NumberSymbols][ut.Decimal];if(i===ut.CurrencyGroup)return e[$e.NumberSymbols][ut.Group]}return n}function wm(t,i){return nr(t)[$e.NumberFormats][i]}const aN=jy,TN=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function xm(t,i,e,n,r,a,o=!1){let s="",l=!1;if(isFinite(t)){let c=function EN(t){let n,r,a,o,s,i=Math.abs(t)+"",e=0;for((r=i.indexOf("."))>-1&&(i=i.replace(".","")),(a=i.search(/e/i))>0?(r<0&&(r=a),r+=+i.slice(a+1),i=i.substring(0,a)):r<0&&(r=i.length),a=0;"0"===i.charAt(a);a++);if(a===(s=i.length))n=[0],r=1;else{for(s--;"0"===i.charAt(s);)s--;for(r-=a,n=[],o=0;a<=s;a++,o++)n[o]=Number(i.charAt(a))}return r>22&&(n=n.splice(0,21),e=r-1,r=1),{digits:n,exponent:e,integerLen:r}}(t);o&&(c=function PN(t){if(0===t.digits[0])return t;const i=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===i?t.digits.push(0,0):1===i&&t.digits.push(0),t.integerLen+=2),t}(c));let u=i.minInt,d=i.minFrac,m=i.maxFrac;if(a){const w=a.match(TN);if(null===w)throw new Error(`${a} is not a valid digit info`);const T=w[1],L=w[3],G=w[5];null!=T&&(u=km(T)),null!=L&&(d=km(L)),null!=G?m=km(G):null!=L&&d>m&&(m=d)}!function IN(t,i,e){if(i>e)throw new Error(`The minimum number of digits after fraction (${i}) is higher than the maximum (${e}).`);let n=t.digits,r=n.length-t.integerLen;const a=Math.min(Math.max(i,r),e);let o=a+t.integerLen,s=n[o];if(o>0){n.splice(Math.max(t.integerLen,o));for(let d=o;d<n.length;d++)n[d]=0}else{r=Math.max(0,r),t.integerLen=1,n.length=Math.max(1,o=a+1),n[0]=0;for(let d=1;d<o;d++)n[d]=0}if(s>=5)if(o-1<0){for(let d=0;d>o;d--)n.unshift(0),t.integerLen++;n.unshift(1),t.integerLen++}else n[o-1]++;for(;r<Math.max(0,a);r++)n.push(0);let l=0!==a;const c=i+t.integerLen,u=n.reduceRight(function(d,m,v,_){return _[v]=(m+=d)<10?m:m-10,l&&(0===_[v]&&v>=c?_.pop():l=!1),m>=10?1:0},0);u&&(n.unshift(u),t.integerLen++)}(c,d,m);let v=c.digits,_=c.integerLen;const y=c.exponent;let S=[];for(l=v.every(w=>!w);_<u;_++)v.unshift(0);for(;_<0;_++)v.unshift(0);_>0?S=v.splice(_,v.length):(S=v,v=[0]);const D=[];for(v.length>=i.lgSize&&D.unshift(v.splice(-i.lgSize,v.length).join(""));v.length>i.gSize;)D.unshift(v.splice(-i.gSize,v.length).join(""));v.length&&D.unshift(v.join("")),s=D.join(qr(e,n)),S.length&&(s+=qr(e,r)+S.join("")),y&&(s+=qr(e,ut.Exponential)+"+"+y)}else s=qr(e,ut.Infinity);return s=t<0&&!l?i.negPre+s+i.negSuf:i.posPre+s+i.posSuf,s}function Mm(t,i="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=t.split(";"),r=n[0],a=n[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],s=o[0],l=o[1]||"";e.posPre=s.substr(0,s.indexOf("#"));for(let u=0;u<l.length;u++){const d=l.charAt(u);"0"===d?e.minFrac=e.maxFrac=u+1:"#"===d?e.maxFrac=u+1:e.posSuf+=d}const c=s.split(",");if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,a){const u=r.length-e.posPre.length-e.posSuf.length,d=a.indexOf("#");e.negPre=a.substr(0,d).replace(/'/g,""),e.negSuf=a.substr(d+u).replace(/'/g,"")}else e.negPre=i+e.posPre,e.negSuf=e.posSuf;return e}function km(t){const i=parseInt(t);if(isNaN(i))throw new Error("Invalid integer literal when parsing "+t);return i}class fh{}let ON=(()=>{class t extends fh{constructor(e){super(),this.locale=e}getPluralCategory(e,n){switch(aN(n||this.locale)(e)){case fi.Zero:return"zero";case fi.One:return"one";case fi.Two:return"two";case fi.Few:return"few";case fi.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Ve(Ro))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})(),Bn=(()=>{class t{constructor(e,n,r,a){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Dc(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${vn(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(P(Hc),P(vl),P(gn),P(zr))},t.\u0275dir=Ue({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class FN{constructor(i,e,n,r){this.$implicit=i,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jn=(()=>{class t{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,a,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new FN(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===a?void 0:a);else if(null!==a){const s=n.get(a);n.move(s,o),Fw(s,r)}});for(let r=0,a=n.length;r<a;r++){const s=n.get(r).context;s.index=r,s.count=a,s.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Fw(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return t.\u0275fac=function(e){return new(e||t)(P($r),P(Fn),P(Hc))},t.\u0275dir=Ue({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function Fw(t,i){t.context.$implicit=i.item}let en=(()=>{class t{constructor(e,n){this._viewContainer=e,this._context=new BN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Bw("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Bw("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return t.\u0275fac=function(e){return new(e||t)(P($r),P(Fn))},t.\u0275dir=Ue({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class BN{constructor(){this.$implicit=null,this.ngIf=null}}function Bw(t,i){if(i&&!i.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${vn(i)}'.`)}let _l=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const n=this._viewContainerRef;this._viewRef&&n.remove(n.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?n.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(P($r))},t.\u0275dir=Ue({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Pi]}),t})();function ha(t,i){return new tn(2100,"")}let no=(()=>{class t{constructor(e){this._locale=e}transform(e,n,r){if(!Em(e))return null;r=r||this._locale;try{return function AN(t,i,e){return xm(t,Mm(wm(i,gr.Decimal),qr(i,ut.MinusSign)),i,ut.Group,ut.Decimal,e)}(Im(e),r,n)}catch(a){throw ha()}}}return t.\u0275fac=function(e){return new(e||t)(P(Ro,16))},t.\u0275pipe=fr({name:"number",type:t,pure:!0}),t})(),Hw=(()=>{class t{constructor(e){this._locale=e}transform(e,n,r){if(!Em(e))return null;r=r||this._locale;try{return function kN(t,i,e){return xm(t,Mm(wm(i,gr.Percent),qr(i,ut.MinusSign)),i,ut.Group,ut.Decimal,e,!0).replace(new RegExp("%","g"),qr(i,ut.PercentSign))}(Im(e),r,n)}catch(a){throw ha()}}}return t.\u0275fac=function(e){return new(e||t)(P(Ro,16))},t.\u0275pipe=fr({name:"percent",type:t,pure:!0}),t})();function Em(t){return!(null==t||""===t||t!=t)}function Im(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let mr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({providers:[{provide:fh,useClass:ON}]}),t})();let hV=(()=>{class t{}return t.\u0275prov=Je({token:t,providedIn:"root",factory:()=>new fV(Ve(hi),window)}),t})();class fV{constructor(i,e){this.document=i,this.window=e,this.offset=()=>[0,0]}setOffset(i){this.offset=Array.isArray(i)?()=>i:i}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(i){this.supportsScrolling()&&this.window.scrollTo(i[0],i[1])}scrollToAnchor(i){if(!this.supportsScrolling())return;const e=function pV(t,i){const e=t.getElementById(i)||t.getElementsByName(i)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const a=r.shadowRoot;if(a){const o=a.getElementById(i)||a.querySelector(`[name="${i}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,i);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(i){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=i)}}scrollToElement(i){const e=i.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(n-a[0],r-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const i=jw(this.window.history)||jw(Object.getPrototypeOf(this.window.history));return!(!i||!i.writable&&!i.set)}catch(i){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(i){return!1}}}function jw(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Om extends class mV extends class $O{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function zO(t){ih||(ih=t)}(new Om)}onAndCancel(i,e,n){return i.addEventListener(e,n,!1),()=>{i.removeEventListener(e,n,!1)}}dispatchEvent(i,e){i.dispatchEvent(e)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,e){return(e=e||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,e){return"window"===e?window:"document"===e?i:"body"===e?i.body:null}getBaseHref(i){const e=function vV(){return zc=zc||document.querySelector("base"),zc?zc.getAttribute("href"):null}();return null==e?null:function bV(t){ph=ph||document.createElement("a"),ph.setAttribute("href",t);const i=ph.pathname;return"/"===i.charAt(0)?i:`/${i}`}(e)}resetBaseElement(){zc=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return function NN(t,i){i=encodeURIComponent(i);for(const e of t.split(";")){const n=e.indexOf("="),[r,a]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===i)return decodeURIComponent(a)}return null}(document.cookie,i)}}let ph,zc=null;const zw=new Gt("TRANSITION_ID"),yV=[{provide:Zd,useFactory:function _V(t,i,e){return()=>{e.get(ml).donePromise.then(()=>{const n=Na(),r=i.querySelectorAll(`style[ng-transition="${t}"]`);for(let a=0;a<r.length;a++)n.remove(r[a])})}},deps:[zw,hi,ai],multi:!0}];class Nm{static init(){!function uO(t){fm=t}(new Nm)}addToWindow(i){Cn.getAngularTestability=(n,r=!0)=>{const a=i.findTestabilityInTree(n,r);if(null==a)throw new Error("Could not find testability for element.");return a},Cn.getAllAngularTestabilities=()=>i.getAllTestabilities(),Cn.getAllAngularRootElements=()=>i.getAllRootElements(),Cn.frameworkStabilizers||(Cn.frameworkStabilizers=[]),Cn.frameworkStabilizers.push(n=>{const r=Cn.getAllAngularTestabilities();let a=r.length,o=!1;const s=function(l){o=o||l,a--,0==a&&n(o)};r.forEach(function(l){l.whenStable(s)})})}findTestabilityInTree(i,e,n){if(null==e)return null;const r=i.getTestability(e);return null!=r?r:n?Na().isShadowRoot(e)?this.findTestabilityInTree(i,e.host,!0):this.findTestabilityInTree(i,e.parentElement,!0):null}}let CV=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();const gh=new Gt("EventManagerPlugins");let mh=(()=>{class t{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let a=0;a<r.length;a++){const o=r[a];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Ve(gh),Ve(xn))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();class $w{constructor(i){this._doc=i}addGlobalEventListener(i,e,n){const r=Na().getGlobalEventTarget(this._doc,i);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let qw=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})(),$c=(()=>{class t extends qw{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(a=>{const o=this._doc.createElement("style");o.textContent=a,r.push(n.appendChild(o))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(Ww),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Ww))}}return t.\u0275fac=function(e){return new(e||t)(Ve(hi))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();function Ww(t){Na().remove(t)}const Vm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fm=/%COMP%/g;function vh(t,i,e){for(let n=0;n<i.length;n++){let r=i[n];Array.isArray(r)?vh(t,r,e):(r=r.replace(Fm,t),e.push(r))}return e}function Qw(t){return i=>{if("__ngUnwrap__"===i)return t;!1===t(i)&&(i.preventDefault(),i.returnValue=!1)}}let Bm=(()=>{class t{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Lm(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case Sa.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new xV(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case Sa.ShadowDom:return new MV(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=vh(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Ve(mh),Ve($c),Ve(Uc))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();class Lm{constructor(i){this.eventManager=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(i,e){return e?document.createElementNS(Vm[e]||e,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,e){i.appendChild(e)}insertBefore(i,e,n){i&&i.insertBefore(e,n)}removeChild(i,e){i&&i.removeChild(e)}selectRootElement(i,e){let n="string"==typeof i?document.querySelector(i):i;if(!n)throw new Error(`The selector "${i}" did not match any elements`);return e||(n.textContent=""),n}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,e,n,r){if(r){e=r+":"+e;const a=Vm[r];a?i.setAttributeNS(a,e,n):i.setAttribute(e,n)}else i.setAttribute(e,n)}removeAttribute(i,e,n){if(n){const r=Vm[n];r?i.removeAttributeNS(r,e):i.removeAttribute(`${n}:${e}`)}else i.removeAttribute(e)}addClass(i,e){i.classList.add(e)}removeClass(i,e){i.classList.remove(e)}setStyle(i,e,n,r){r&(Rr.DashCase|Rr.Important)?i.style.setProperty(e,n,r&Rr.Important?"important":""):i.style[e]=n}removeStyle(i,e,n){n&Rr.DashCase?i.style.removeProperty(e):i.style[e]=""}setProperty(i,e,n){i[e]=n}setValue(i,e){i.nodeValue=e}listen(i,e,n){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,e,Qw(n)):this.eventManager.addEventListener(i,e,Qw(n))}}class xV extends Lm{constructor(i,e,n,r){super(i),this.component=n;const a=vh(r+"-"+n.id,n.styles,[]);e.addStyles(a),this.contentAttr=function TV(t){return"_ngcontent-%COMP%".replace(Fm,t)}(r+"-"+n.id),this.hostAttr=function DV(t){return"_nghost-%COMP%".replace(Fm,t)}(r+"-"+n.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,e){const n=super.createElement(i,e);return super.setAttribute(n,this.contentAttr,""),n}}class MV extends Lm{constructor(i,e,n,r){super(i),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=vh(r.id,r.styles,[]);for(let o=0;o<a.length;o++){const s=document.createElement("style");s.textContent=a[o],this.shadowRoot.appendChild(s)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,e){return super.appendChild(this.nodeOrShadowRoot(i),e)}insertBefore(i,e,n){return super.insertBefore(this.nodeOrShadowRoot(i),e,n)}removeChild(i,e){return super.removeChild(this.nodeOrShadowRoot(i),e)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let kV=(()=>{class t extends $w{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return t.\u0275fac=function(e){return new(e||t)(Ve(hi))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();const Zw=["alt","control","meta","shift"],PV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jw={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},EV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let IV=(()=>{class t extends $w{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const a=t.parseEventName(n),o=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Na().onAndCancel(e,a.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(n.pop());let o="";if(Zw.forEach(l=>{const c=n.indexOf(l);c>-1&&(n.splice(c,1),o+=l+".")}),o+=a,0!=n.length||0===a.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let n="",r=function OV(t){let i=t.key;if(null==i){if(i=t.keyIdentifier,null==i)return"Unidentified";i.startsWith("U+")&&(i=String.fromCharCode(parseInt(i.substring(2),16)),3===t.location&&Jw.hasOwnProperty(i)&&(i=Jw[i]))}return PV[i]||i}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Zw.forEach(a=>{a!=r&&EV[a](e)&&(n+=a+".")}),n+=r,n}static eventCallback(e,n,r){return a=>{t.getEventFullKey(a)===e&&r.runGuarded(()=>n(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Ve(hi))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();const BV=lw(NO,"browser",[{provide:Jd,useValue:"browser"},{provide:JC,useValue:function NV(){Om.makeCurrent(),Nm.init()},multi:!0},{provide:hi,useFactory:function FV(){return function ax(t){ep=t}(document),document},deps:[]}]),LV=[{provide:gg,useValue:"root"},{provide:$s,useFactory:function VV(){return new $s},deps:[]},{provide:gh,useClass:kV,multi:!0,deps:[hi,xn,Jd]},{provide:gh,useClass:IV,multi:!0,deps:[hi]},{provide:Bm,useClass:Bm,deps:[mh,$c,Uc]},{provide:jg,useExisting:Bm},{provide:qw,useExisting:$c},{provide:$c,useClass:$c,deps:[hi]},{provide:hm,useClass:hm,deps:[xn]},{provide:mh,useClass:mh,deps:[gh,xn]},{provide:class gV{},useClass:CV,deps:[]}];let UV=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Uc,useValue:e.appId},{provide:zw,useExisting:Uc},yV]}}}return t.\u0275fac=function(e){return new(e||t)(Ve(t,12))},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({providers:LV,imports:[mr,GO]}),t})();"undefined"!=typeof window&&window;let Mo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:function(e){let n=null;return n=e?new(e||t):Ve(nS),n},providedIn:"root"}),t})(),nS=(()=>{class t extends Mo{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case Kt.NONE:return n;case Kt.HTML:return Ma(n,"HTML")?Dr(n):o1(this._doc,String(n)).toString();case Kt.STYLE:return Ma(n,"Style")?Dr(n):n;case Kt.SCRIPT:if(Ma(n,"Script"))return Dr(n);throw new Error("unsafe value used in a script context");case Kt.URL:return Zb(n),Ma(n,"URL")?Dr(n):mc(String(n));case Kt.RESOURCE_URL:if(Ma(n,"ResourceURL"))return Dr(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function _M(t){return new pM(t)}(e)}bypassSecurityTrustStyle(e){return function yM(t){return new gM(t)}(e)}bypassSecurityTrustScript(e){return function CM(t){return new mM(t)}(e)}bypassSecurityTrustUrl(e){return function wM(t){return new vM(t)}(e)}bypassSecurityTrustResourceUrl(e){return function SM(t){return new bM(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(Ve(hi))},t.\u0275prov=Je({token:t,factory:function(e){let n=null;return n=e?new e:function QV(t){return new nS(t.get(hi))}(Ve(ai)),n},providedIn:"root"}),t})();const{isArray:KV}=Array,{getPrototypeOf:ZV,prototype:JV,keys:eF}=Object;function iS(t){if(1===t.length){const i=t[0];if(KV(i))return{args:i,keys:null};if(function tF(t){return t&&"object"==typeof t&&ZV(t)===JV}(i)){const e=eF(i);return{args:e.map(n=>i[n]),keys:e}}}return{args:t,keys:null}}const{isArray:nF}=Array;function Hm(t){return Mt(i=>function iF(t,i){return nF(i)?t(...i):t(i)}(t,i))}function rS(t,i){return t.reduce((e,n,r)=>(e[n]=i[r],e),{})}let aS=(()=>{class t{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(P(zr),P(gn))},t.\u0275dir=Ue({type:t}),t})(),is=(()=>{class t extends aS{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=Ue({type:t,features:[pn]}),t})();const Xr=new Gt("NgValueAccessor"),aF={provide:Xr,useExisting:rn(()=>bh),multi:!0};let bh=(()=>{class t extends is{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=Ue({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,n){1&e&&N("change",function(a){return n.onChange(a.target.checked)})("blur",function(){return n.onTouched()})},features:[Rn([aF]),pn]}),t})();const oF={provide:Xr,useExisting:rn(()=>rs),multi:!0},lF=new Gt("CompositionEventMode");let rs=(()=>{class t extends aS{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function sF(){const t=Na()?Na().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(P(zr),P(gn),P(lF,8))},t.\u0275dir=Ue({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&N("input",function(a){return n._handleInput(a.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(a){return n._compositionEnd(a.target.value)})},features:[Rn([oF]),pn]}),t})();function oS(t){return null!=t&&"number"==typeof t.length}const Xi=new Gt("NgValidators"),Ao=new Gt("NgAsyncValidators");function _h(t){return null}function gS(t){return null!=t}function mS(t){const i=xc(t)?Mi(t):t;return Ag(i),i}function vS(t){let i={};return t.forEach(e=>{i=null!=e?Object.assign(Object.assign({},i),e):i}),0===Object.keys(i).length?null:i}function bS(t,i){return i.map(e=>e(t))}function _S(t){return t.map(i=>function uF(t){return!t.validate}(i)?i:e=>i.validate(e))}function Gm(t){return null!=t?function yS(t){if(!t)return null;const i=t.filter(gS);return 0==i.length?null:function(e){return vS(bS(e,i))}}(_S(t)):null}function jm(t){return null!=t?function CS(t){if(!t)return null;const i=t.filter(gS);return 0==i.length?null:function(e){return function rF(...t){const i=Xu(t),{args:e,keys:n}=iS(t),r=new Oe(a=>{const{length:o}=e;if(!o)return void a.complete();const s=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;bi(e[u]).subscribe(Lt(a,m=>{d||(d=!0,c--),s[u]=m},()=>l--,void 0,()=>{(!l||!d)&&(c||a.next(n?rS(n,s):s),a.complete())}))}});return i?r.pipe(Hm(i)):r}(bS(e,i).map(mS)).pipe(Mt(vS))}}(_S(t)):null}function wS(t,i){return null===t?[i]:Array.isArray(t)?[...t,i]:[t,i]}function SS(t){return t._rawValidators}function TS(t){return t._rawAsyncValidators}function zm(t){return t?Array.isArray(t)?t:[t]:[]}function yh(t,i){return Array.isArray(t)?t.includes(i):t===i}function DS(t,i){const e=zm(i);return zm(t).forEach(r=>{yh(e,r)||e.push(r)}),e}function RS(t,i){return zm(i).filter(e=>!yh(t,e))}class xS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=Gm(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=jm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i){this.control&&this.control.reset(i)}hasError(i,e){return!!this.control&&this.control.hasError(i,e)}getError(i,e){return this.control?this.control.getError(i,e):null}}class Po extends xS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rr extends xS{get formDirective(){return null}get path(){return null}}class MS{constructor(i){this._cd=i}is(i){var e,n,r;return"submitted"===i?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[i])}}let yl=(()=>{class t extends MS{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(P(Po,2))},t.\u0275dir=Ue({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&bt("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[pn]}),t})(),Ch=(()=>{class t extends MS{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(P(rr,10))},t.\u0275dir=Ue({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&bt("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))("ng-submitted",n.is("submitted"))},features:[pn]}),t})();function Sh(t,i){return[...i.path,t]}function qc(t,i){Wm(t,i),i.valueAccessor.writeValue(t.value),function bF(t,i){i.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&AS(t,i)})}(t,i),function yF(t,i){const e=(n,r)=>{i.valueAccessor.writeValue(n),r&&i.viewToModelUpdate(n)};t.registerOnChange(e),i._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,i),function _F(t,i){i.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&AS(t,i),"submit"!==t.updateOn&&t.markAsTouched()})}(t,i),function vF(t,i){if(i.valueAccessor.setDisabledState){const e=n=>{i.valueAccessor.setDisabledState(n)};t.registerOnDisabledChange(e),i._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,i)}function Th(t,i,e=!0){const n=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(n),i.valueAccessor.registerOnTouched(n)),Rh(t,i),t&&(i._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Dh(t,i){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function Wm(t,i){const e=SS(t);null!==i.validator?t.setValidators(wS(e,i.validator)):"function"==typeof e&&t.setValidators([e]);const n=TS(t);null!==i.asyncValidator?t.setAsyncValidators(wS(n,i.asyncValidator)):"function"==typeof n&&t.setAsyncValidators([n]);const r=()=>t.updateValueAndValidity();Dh(i._rawValidators,r),Dh(i._rawAsyncValidators,r)}function Rh(t,i){let e=!1;if(null!==t){if(null!==i.validator){const r=SS(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==i.validator);a.length!==r.length&&(e=!0,t.setValidators(a))}}if(null!==i.asyncValidator){const r=TS(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==i.asyncValidator);a.length!==r.length&&(e=!0,t.setAsyncValidators(a))}}}const n=()=>{};return Dh(i._rawValidators,n),Dh(i._rawAsyncValidators,n),e}function AS(t,i){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function PS(t,i){Wm(t,i)}function Xm(t,i){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(i,e.currentValue)}function ES(t,i){t._syncPendingControls(),i.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function Ym(t,i){if(!i)return null;let e,n,r;return Array.isArray(i),i.forEach(a=>{a.constructor===rs?e=a:function SF(t){return Object.getPrototypeOf(t.constructor)===is}(a)?n=a:r=a}),r||n||e||null}function Qm(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}const Wc="VALID",xh="INVALID",Cl="PENDING",Xc="DISABLED";function Zm(t){return(Mh(t)?t.validators:t)||null}function IS(t){return Array.isArray(t)?Gm(t):t||null}function Jm(t,i){return(Mh(i)?i.asyncValidators:t)||null}function OS(t){return Array.isArray(t)?jm(t):t||null}function Mh(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const NS=t=>t instanceof nv,ev=t=>t instanceof kh;function VS(t){return NS(t)?t.value:t.getRawValue()}function FS(t,i){const e=ev(t),n=t.controls;if(!(e?Object.keys(n):n).length)throw new tn(1e3,"");if(!n[i])throw new tn(1001,"")}function BS(t,i){ev(t),t._forEachChild((n,r)=>{if(void 0===i[r])throw new tn(1002,"")})}class tv{constructor(i,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=i,this._rawAsyncValidators=e,this._composedValidatorFn=IS(this._rawValidators),this._composedAsyncValidatorFn=OS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get valid(){return this.status===Wc}get invalid(){return this.status===xh}get pending(){return this.status==Cl}get disabled(){return this.status===Xc}get enabled(){return this.status!==Xc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._rawValidators=i,this._composedValidatorFn=IS(i)}setAsyncValidators(i){this._rawAsyncValidators=i,this._composedAsyncValidatorFn=OS(i)}addValidators(i){this.setValidators(DS(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(DS(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(RS(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(RS(i,this._rawAsyncValidators))}hasValidator(i){return yh(this._rawValidators,i)}hasAsyncValidator(i){return yh(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){this.touched=!0,this._parent&&!i.onlySelf&&this._parent.markAsTouched(i)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(i=>i.markAllAsTouched())}markAsUntouched(i={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}markAsDirty(i={}){this.pristine=!1,this._parent&&!i.onlySelf&&this._parent.markAsDirty(i)}markAsPristine(i={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}markAsPending(i={}){this.status=Cl,!1!==i.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!i.onlySelf&&this._parent.markAsPending(i)}disable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=Xc,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this._updateValue(),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=Wc,this._forEachChild(n=>{n.enable(Object.assign(Object.assign({},i),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(i){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(i){this._parent=i}updateValueAndValidity(i={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wc||this.status===Cl)&&this._runAsyncValidator(i.emitEvent)),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(i)}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xc:Wc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i){if(this.asyncValidator){this.status=Cl,this._hasOwnPendingAsyncValidator=!0;const e=mS(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:i})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(!1!==e.emitEvent)}get(i){return function TF(t,i,e){if(null==i||(Array.isArray(i)||(i=i.split(e)),Array.isArray(i)&&0===i.length))return null;let n=t;return i.forEach(r=>{n=ev(n)?n.controls.hasOwnProperty(r)?n.controls[r]:null:(t=>t instanceof RF)(n)&&n.at(r)||null}),n}(this,i,".")}getError(i,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(i)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Xc:this.errors?xh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cl)?Cl:this._anyControlsHaveStatus(xh)?xh:Wc}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i={}){this.pristine=!this._anyControlsDirty(),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}_updateTouched(i={}){this.touched=this._anyControlsTouched(),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}_isBoxedValue(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){Mh(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class nv extends tv{constructor(i=null,e,n){super(Zm(e),Jm(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mh(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(i)?i.value:i)}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=this.defaultValue,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){Qm(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){Qm(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){this._isBoxedValue(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}}class kh extends tv{constructor(i,e,n){super(Zm(e),Jm(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,n={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){BS(this,i),Object.keys(i).forEach(n=>{FS(this,n),this.controls[n].setValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(Object.keys(i).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((n,r)=>{n.reset(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,n)=>(i[n]=VS(e),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&i(n,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&i(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(i,e,n)=>((e.enabled||this.disabled)&&(i[n]=e.value),i))}_reduceChildren(i,e){let n=i;return this._forEachChild((r,a)=>{n=e(n,r,a)}),n}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class RF extends tv{constructor(i,e,n){super(Zm(e),Jm(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[i]}push(i,e={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(i,e,n={}){this.controls.splice(i,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,e={}){BS(this,i),i.forEach((n,r)=>{FS(this,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(i.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i=[],e={}){this._forEachChild((n,r)=>{n.reset(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(i=>VS(i))}clear(i={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_syncPendingControls(){let i=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){this.controls.forEach((e,n)=>{i(e,n)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(e=>e.enabled&&i(e))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_allControlsDisabled(){for(const i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}}const xF={provide:rr,useExisting:rn(()=>Qc)},Yc=(()=>Promise.resolve(null))();let Qc=(()=>{class t extends rr{constructor(e,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new nt,this.form=new kh({},Gm(e),jm(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Yc.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),qc(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Yc.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Yc.then(()=>{const n=this._findContainer(e.path),r=new kh({});PS(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Yc.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Yc.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,ES(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(P(Xi,10),P(Ao,10))},t.\u0275dir=Ue({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&N("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Rn([xF]),pn]}),t})();const kF={provide:Po,useExisting:rn(()=>wl)},HS=(()=>Promise.resolve(null))();let wl=(()=>{class t extends Po{constructor(e,n,r,a,o){super(),this._changeDetectorRef=o,this.control=new nv,this._registered=!1,this.update=new nt,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=Ym(0,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Xm(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){HS.then(()=>{var n;this.control.setValue(e,{emitViewToModelChange:!1}),null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;HS.then(()=>{var a;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(e){return this._parent?Sh(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(P(rr,9),P(Xi,10),P(Ao,10),P(Xr,10),P(Mr,8))},t.\u0275dir=Ue({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Rn([kF]),pn,Pi]}),t})(),Ah=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Ue({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const AF={provide:Xr,useExisting:rn(()=>iv),multi:!0};let iv=(()=>{class t extends is{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=Ue({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,n){1&e&&N("input",function(a){return n.onChange(a.target.value)})("blur",function(){return n.onTouched()})},features:[Rn([AF]),pn]}),t})(),GS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({}),t})();const rv=new Gt("NgModelWithFormControlWarning"),NF={provide:rr,useExisting:rn(()=>Ph)};let Ph=(()=>{class t extends rr{constructor(e,n){super(),this.validators=e,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new nt,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return qc(n,e),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){Th(e.control||null,e,!1),Qm(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,ES(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(Th(n||null,e),NS(r)&&(qc(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);PS(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function CF(t,i){return Rh(t,i)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Wm(this.form,this),this._oldForm&&Rh(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(P(Xi,10),P(Ao,10))},t.\u0275dir=Ue({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,n){1&e&&N("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Rn([NF]),pn,Pi]}),t})();const BF={provide:Po,useExisting:rn(()=>sv)};let sv=(()=>{class t extends Po{constructor(e,n,r,a,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new nt,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=Ym(0,a)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),Xm(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Sh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(P(rr,13),P(Xi,10),P(Ao,10),P(Xr,10),P(rv,8))},t.\u0275dir=Ue({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Rn([BF]),pn,Pi]}),t})();const LF={provide:Xr,useExisting:rn(()=>Eh),multi:!0};function WS(t,i){return null==t?`${i}`:(i&&"object"==typeof i&&(i="Object"),`${t}: ${i}`.slice(0,50))}let Eh=(()=>{class t extends is{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=WS(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){const n=function UF(t){return t.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=Ue({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,n){1&e&&N("change",function(a){return n.onChange(a.target.value)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[Rn([LF]),pn]}),t})(),XS=(()=>{class t{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(WS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(P(gn),P(zr),P(Eh,9))},t.\u0275dir=Ue({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const HF={provide:Xr,useExisting:rn(()=>lv),multi:!0};function YS(t,i){return null==t?`${i}`:("string"==typeof i&&(i=`'${i}'`),i&&"object"==typeof i&&(i="Object"),`${t}: ${i}`.slice(0,50))}let lv=(()=>{class t extends is{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let n;if(this.value=e,Array.isArray(e)){const r=e.map(a=>this._getOptionId(a));n=(a,o)=>{a._setSelected(r.indexOf(o.toString())>-1)}}else n=(r,a)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{const r=[],a=n.selectedOptions;if(void 0!==a){const o=a;for(let s=0;s<o.length;s++){const c=this._getOptionValue(o[s].value);r.push(c)}}else{const o=n.options;for(let s=0;s<o.length;s++){const l=o[s];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){const n=function GF(t){return t.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=Ue({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,n){1&e&&N("change",function(a){return n.onChange(a.target)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[Rn([HF]),pn]}),t})(),QS=(()=>{class t{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(YS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(YS(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(P(gn),P(zr),P(lv,9))},t.\u0275dir=Ue({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function KS(t){return"number"==typeof t?t:parseInt(t,10)}let as=(()=>{class t{constructor(){this._validator=_h}ngOnChanges(e){if(this.inputName in e){const n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):_h,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Ue({type:t,features:[Pi]}),t})();const YF={provide:Xi,useExisting:rn(()=>uv),multi:!0};let uv=(()=>{class t extends as{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>KS(e),this.createValidator=e=>function hS(t){return i=>function ko(t){return null==t||0===t.length}(i.value)||!oS(i.value)?null:i.value.length<t?{minlength:{requiredLength:t,actualLength:i.value.length}}:null}(e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=Ue({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&_n("minlength",n._enabled?n.minlength:null)},inputs:{minlength:"minlength"},features:[Rn([YF]),pn]}),t})();const QF={provide:Xi,useExisting:rn(()=>Kc),multi:!0};let Kc=(()=>{class t extends as{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>KS(e),this.createValidator=e=>function fS(t){return i=>oS(i.value)&&i.value.length>t?{maxlength:{requiredLength:t,actualLength:i.value.length}}:null}(e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=zi(t)))(n||t)}}(),t.\u0275dir=Ue({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&_n("maxlength",n._enabled?n.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Rn([QF]),pn]}),t})(),rT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[GS]]}),t})(),aT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[rT]}),t})(),ZF=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:rv,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[rT]}),t})();function Tt(...t){return Mi(t,Zl(t))}class zn extends ve{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const e=super._subscribe(i);return!e.closed&&i.next(this._value),e}getValue(){const{hasError:i,thrownError:e,_value:n}=this;if(i)throw e;return this._throwIfClosed(),n}next(i){super.next(this._value=i)}}function oT(t,i,e){t?Fr(e,t,i):i()}const Ih=H(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Zc(...t){return function e3(){return Kl(1)}()(Mi(t,Zl(t)))}function sT(t){return new Oe(i=>{bi(t()).subscribe(i)})}function lT(){return vt((t,i)=>{let e=null;t._refCount++;const n=Lt(i,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),i.unsubscribe()});t.subscribe(n),n.closed||(e=t.connect())})}class t3 extends Oe{constructor(i,e){super(),this.source=i,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Sn(i)&&(this.lift=i.lift)}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){const i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:i}=this;this._subject=this._connection=null,null==i||i.unsubscribe()}connect(){let i=this._connection;if(!i){i=this._connection=new he;const e=this.getSubject();i.add(this.source.subscribe(Lt(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),i.closed&&(this._connection=null,i=he.EMPTY)}return i}refCount(){return lT()(this)}}function io(t,i){return vt((e,n)=>{let r=null,a=0,o=!1;const s=()=>o&&!r&&n.complete();e.subscribe(Lt(n,l=>{null==r||r.unsubscribe();let c=0;const u=a++;bi(t(l,u)).subscribe(r=Lt(n,d=>n.next(i?i(l,d,u,c++):d),()=>{r=null,s()}))},()=>{o=!0,s()}))})}function n3(t,i,e,n,r){return(a,o)=>{let s=e,l=i,c=0;a.subscribe(Lt(o,u=>{const d=c++;l=s?t(l,u,d):(s=!0,u),n&&o.next(l)},r&&(()=>{s&&o.next(l),o.complete()})))}}function cT(t,i){return vt(n3(t,i,arguments.length>=2,!0))}function Vi(t,i){return vt((e,n)=>{let r=0;e.subscribe(Lt(n,a=>t.call(i,a,r++)&&n.next(a)))})}function Eo(t){return vt((i,e)=>{let a,n=null,r=!1;n=i.subscribe(Lt(e,void 0,void 0,o=>{a=bi(t(o,Eo(t)(i))),n?(n.unsubscribe(),n=null,a.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,a.subscribe(e))})}function Jc(t,i){return W(i)?ii(t,i,1):ii(t,1)}function hv(t){return t<=0?()=>Jr:vt((i,e)=>{let n=[];i.subscribe(Lt(e,r=>{n.push(r),t<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function uT(t=r3){return vt((i,e)=>{let n=!1;i.subscribe(Lt(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(t())))})}function r3(){return new Ih}function dT(t){return vt((i,e)=>{let n=!1;i.subscribe(Lt(e,r=>{n=!0,e.next(r)},()=>{n||e.next(t),e.complete()}))})}function Sl(t,i){const e=arguments.length>=2;return n=>n.pipe(t?Vi((r,a)=>t(r,a,n)):Ie,ki(1),e?dT(i):uT(()=>new Ih))}function Yi(t,i,e){const n=W(t)||i||e?{next:t,error:i,complete:e}:t;return n?vt((r,a)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let s=!0;r.subscribe(Lt(a,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),a.next(l)},()=>{var l;s=!1,null===(l=n.complete)||void 0===l||l.call(n),a.complete()},l=>{var c;s=!1,null===(c=n.error)||void 0===c||c.call(n,l),a.error(l)},()=>{var l,c;s&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):Ie}class ro{constructor(i,e){this.id=i,this.url=e}}class fv extends ro{constructor(i,e,n="imperative",r=null){super(i,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class eu extends ro{constructor(i,e,n){super(i,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hT extends ro{constructor(i,e,n){super(i,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class s3 extends ro{constructor(i,e,n){super(i,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class l3 extends ro{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class c3 extends ro{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class u3 extends ro{constructor(i,e,n,r,a){super(i,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class d3 extends ro{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h3 extends ro{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fT{constructor(i){this.route=i}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class pT{constructor(i){this.route=i}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class f3{constructor(i){this.snapshot=i}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p3{constructor(i){this.snapshot=i}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class g3{constructor(i){this.snapshot=i}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m3{constructor(i){this.snapshot=i}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gT{constructor(i,e,n){this.routerEvent=i,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qt="primary";class v3{constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e[0]:e}return null}getAll(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Tl(t){return new v3(t)}const mT="ngNavigationCancelingError";function pv(t){const i=Error("NavigationCancelingError: "+t);return i[mT]=!0,i}function _3(t,i,e){const n=e.path.split("/");if(n.length>t.length||"full"===e.pathMatch&&(i.hasChildren()||n.length<t.length))return null;const r={};for(let a=0;a<n.length;a++){const o=n[a],s=t[a];if(o.startsWith(":"))r[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:t.slice(0,n.length),posParams:r}}function Va(t,i){const e=t?Object.keys(t):void 0,n=i?Object.keys(i):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!vT(t[r],i[r]))return!1;return!0}function vT(t,i){if(Array.isArray(t)&&Array.isArray(i)){if(t.length!==i.length)return!1;const e=[...t].sort(),n=[...i].sort();return e.every((r,a)=>n[a]===r)}return t===i}function bT(t){return Array.prototype.concat.apply([],t)}function _T(t){return t.length>0?t[t.length-1]:null}function Fi(t,i){for(const e in t)t.hasOwnProperty(e)&&i(t[e],e)}function Fa(t){return Ag(t)?t:xc(t)?Mi(Promise.resolve(t)):Tt(t)}const w3={exact:function wT(t,i,e){if(!ss(t.segments,i.segments)||!Nh(t.segments,i.segments,e)||t.numberOfChildren!==i.numberOfChildren)return!1;for(const n in i.children)if(!t.children[n]||!wT(t.children[n],i.children[n],e))return!1;return!0},subset:ST},yT={exact:function S3(t,i){return Va(t,i)},subset:function T3(t,i){return Object.keys(i).length<=Object.keys(t).length&&Object.keys(i).every(e=>vT(t[e],i[e]))},ignored:()=>!0};function CT(t,i,e){return w3[e.paths](t.root,i.root,e.matrixParams)&&yT[e.queryParams](t.queryParams,i.queryParams)&&!("exact"===e.fragment&&t.fragment!==i.fragment)}function ST(t,i,e){return TT(t,i,i.segments,e)}function TT(t,i,e,n){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!ss(r,e)||i.hasChildren()||!Nh(r,e,n))}if(t.segments.length===e.length){if(!ss(t.segments,e)||!Nh(t.segments,e,n))return!1;for(const r in i.children)if(!t.children[r]||!ST(t.children[r],i.children[r],n))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(ss(t.segments,r)&&Nh(t.segments,r,n)&&t.children[qt])&&TT(t.children[qt],i,a,n)}}function Nh(t,i,e){return i.every((n,r)=>yT[e](t[r].parameters,n.parameters))}class os{constructor(i,e,n){this.root=i,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tl(this.queryParams)),this._queryParamMap}toString(){return x3.serialize(this)}}class Zt{constructor(i,e){this.segments=i,this.children=e,this.parent=null,Fi(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vh(this)}}class tu{constructor(i,e){this.path=i,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Tl(this.parameters)),this._parameterMap}toString(){return kT(this)}}function ss(t,i){return t.length===i.length&&t.every((e,n)=>e.path===i[n].path)}class DT{}class RT{parse(i){const e=new V3(i);return new os(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(i){const e=`/${nu(i.root,!0)}`,n=function A3(t){const i=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(r=>`${Fh(e)}=${Fh(r)}`).join("&"):`${Fh(e)}=${Fh(n)}`}).filter(e=>!!e);return i.length?`?${i.join("&")}`:""}(i.queryParams);return`${e}${n}${"string"==typeof i.fragment?`#${function M3(t){return encodeURI(t)}(i.fragment)}`:""}`}}const x3=new RT;function Vh(t){return t.segments.map(i=>kT(i)).join("/")}function nu(t,i){if(!t.hasChildren())return Vh(t);if(i){const e=t.children[qt]?nu(t.children[qt],!1):"",n=[];return Fi(t.children,(r,a)=>{a!==qt&&n.push(`${a}:${nu(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function R3(t,i){let e=[];return Fi(t.children,(n,r)=>{r===qt&&(e=e.concat(i(n,r)))}),Fi(t.children,(n,r)=>{r!==qt&&(e=e.concat(i(n,r)))}),e}(t,(n,r)=>r===qt?[nu(t.children[qt],!1)]:[`${r}:${nu(n,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[qt]?`${Vh(t)}/${e[0]}`:`${Vh(t)}/(${e.join("//")})`}}function xT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fh(t){return xT(t).replace(/%3B/gi,";")}function gv(t){return xT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bh(t){return decodeURIComponent(t)}function MT(t){return Bh(t.replace(/\+/g,"%20"))}function kT(t){return`${gv(t.path)}${function k3(t){return Object.keys(t).map(i=>`;${gv(i)}=${gv(t[i])}`).join("")}(t.parameters)}`}const P3=/^[^\/()?;=#]+/;function Lh(t){const i=t.match(P3);return i?i[0]:""}const E3=/^[^=?&#]+/,O3=/^[^&#]+/;class V3{constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const i={};if(this.consumeOptional("?"))do{this.parseQueryParam(i)}while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(i.length>0||Object.keys(e).length>0)&&(n[qt]=new Zt(i,e)),n}parseSegment(){const i=Lh(this.remaining);if(""===i&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(i),new tu(Bh(i),this.parseMatrixParams())}parseMatrixParams(){const i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){const e=Lh(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=Lh(this.remaining);r&&(n=r,this.capture(n))}i[Bh(e)]=Bh(n)}parseQueryParam(i){const e=function I3(t){const i=t.match(E3);return i?i[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function N3(t){const i=t.match(O3);return i?i[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=MT(e),a=MT(n);if(i.hasOwnProperty(r)){let o=i[r];Array.isArray(o)||(o=[o],i[r]=o),o.push(a)}else i[r]=a}parseParens(i){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Lh(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a;n.indexOf(":")>-1?(a=n.substr(0,n.indexOf(":")),this.capture(a),this.capture(":")):i&&(a=qt);const o=this.parseChildren();e[a]=1===Object.keys(o).length?o[qt]:new Zt([],o),this.consumeOptional("//")}return e}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return!!this.peekStartsWith(i)&&(this.remaining=this.remaining.substring(i.length),!0)}capture(i){if(!this.consumeOptional(i))throw new Error(`Expected "${i}".`)}}class AT{constructor(i){this._root=i}get root(){return this._root.value}parent(i){const e=this.pathFromRoot(i);return e.length>1?e[e.length-2]:null}children(i){const e=mv(i,this._root);return e?e.children.map(n=>n.value):[]}firstChild(i){const e=mv(i,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(i){const e=vv(i,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==i)}pathFromRoot(i){return vv(i,this._root).map(e=>e.value)}}function mv(t,i){if(t===i.value)return i;for(const e of i.children){const n=mv(t,e);if(n)return n}return null}function vv(t,i){if(t===i.value)return[i];for(const e of i.children){const n=vv(t,e);if(n.length)return n.unshift(i),n}return[]}class ao{constructor(i,e){this.value=i,this.children=e}toString(){return`TreeNode(${this.value})`}}function Dl(t){const i={};return t&&t.children.forEach(e=>i[e.value.outlet]=e),i}class PT extends AT{constructor(i,e){super(i),this.snapshot=e,bv(this,i)}toString(){return this.snapshot.toString()}}function ET(t,i){const e=function F3(t,i){const o=new Uh([],{},{},"",{},qt,i,null,t.root,-1,{});return new OT("",new ao(o,[]))}(t,i),n=new zn([new tu("",{})]),r=new zn({}),a=new zn({}),o=new zn({}),s=new zn(""),l=new Rl(n,r,o,s,a,qt,i,e.root);return l.snapshot=e.root,new PT(new ao(l,[]),e)}class Rl{constructor(i,e,n,r,a,o,s,l){this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Mt(i=>Tl(i)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Mt(i=>Tl(i)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function IT(t,i="emptyOnly"){const e=t.pathFromRoot;let n=0;if("always"!==i)for(n=e.length-1;n>=1;){const r=e[n],a=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(a.component)break;n--}}return function B3(t){return t.reduce((i,e)=>({params:Object.assign(Object.assign({},i.params),e.params),data:Object.assign(Object.assign({},i.data),e.data),resolve:Object.assign(Object.assign({},i.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(n))}class Uh{constructor(i,e,n,r,a,o,s,l,c,u,d){this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Tl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class OT extends AT{constructor(i,e){super(e),this.url=i,bv(this,e)}toString(){return NT(this._root)}}function bv(t,i){i.value._routerState=t,i.children.forEach(e=>bv(t,e))}function NT(t){const i=t.children.length>0?` { ${t.children.map(NT).join(", ")} } `:"";return`${t.value}${i}`}function _v(t){if(t.snapshot){const i=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Va(i.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),i.fragment!==e.fragment&&t.fragment.next(e.fragment),Va(i.params,e.params)||t.params.next(e.params),function y3(t,i){if(t.length!==i.length)return!1;for(let e=0;e<t.length;++e)if(!Va(t[e],i[e]))return!1;return!0}(i.url,e.url)||t.url.next(e.url),Va(i.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function yv(t,i){const e=Va(t.params,i.params)&&function D3(t,i){return ss(t,i)&&t.every((e,n)=>Va(e.parameters,i[n].parameters))}(t.url,i.url);return e&&!(!t.parent!=!i.parent)&&(!t.parent||yv(t.parent,i.parent))}function iu(t,i,e){if(e&&t.shouldReuseRoute(i.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=i.value;const r=function U3(t,i,e){return i.children.map(n=>{for(const r of e.children)if(t.shouldReuseRoute(n.value,r.value.snapshot))return iu(t,n,r);return iu(t,n)})}(t,i,e);return new ao(n,r)}{if(t.shouldAttach(i.value)){const a=t.retrieve(i.value);if(null!==a){const o=a.route;return o.value._futureSnapshot=i.value,o.children=i.children.map(s=>iu(t,s)),o}}const n=function H3(t){return new Rl(new zn(t.url),new zn(t.params),new zn(t.queryParams),new zn(t.fragment),new zn(t.data),t.outlet,t.component,t)}(i.value),r=i.children.map(a=>iu(t,a));return new ao(n,r)}}function Hh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ru(t){return"object"==typeof t&&null!=t&&t.outlets}function Cv(t,i,e,n,r){let a={};return n&&Fi(n,(o,s)=>{a[s]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new os(e.root===t?i:VT(e.root,t,i),a,r)}function VT(t,i,e){const n={};return Fi(t.children,(r,a)=>{n[a]=r===i?e:VT(r,i,e)}),new Zt(t.segments,n)}class FT{constructor(i,e,n){if(this.isAbsolute=i,this.numberOfDoubleDots=e,this.commands=n,i&&n.length>0&&Hh(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(ru);if(r&&r!==_T(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wv{constructor(i,e,n){this.segmentGroup=i,this.processChildren=e,this.index=n}}function BT(t,i,e){if(t||(t=new Zt([],{})),0===t.segments.length&&t.hasChildren())return Gh(t,i,e);const n=function W3(t,i,e){let n=0,r=i;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(n>=e.length)return a;const o=t.segments[r],s=e[n];if(ru(s))break;const l=`${s}`,c=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!UT(l,c,o))return a;n+=2}else{if(!UT(l,{},o))return a;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(t,i,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){const a=new Zt(t.segments.slice(0,n.pathIndex),{});return a.children[qt]=new Zt(t.segments.slice(n.pathIndex),t.children),Gh(a,0,r)}return n.match&&0===r.length?new Zt(t.segments,{}):n.match&&!t.hasChildren()?Sv(t,i,e):n.match?Gh(t,0,r):Sv(t,i,e)}function Gh(t,i,e){if(0===e.length)return new Zt(t.segments,{});{const n=function q3(t){return ru(t[0])?t[0].outlets:{[qt]:t}}(e),r={};return Fi(n,(a,o)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[o]=BT(t.children[o],i,a))}),Fi(t.children,(a,o)=>{void 0===n[o]&&(r[o]=a)}),new Zt(t.segments,r)}}function Sv(t,i,e){const n=t.segments.slice(0,i);let r=0;for(;r<e.length;){const a=e[r];if(ru(a)){const l=X3(a.outlets);return new Zt(n,l)}if(0===r&&Hh(e[0])){n.push(new tu(t.segments[i].path,LT(e[0]))),r++;continue}const o=ru(a)?a.outlets[qt]:`${a}`,s=r<e.length-1?e[r+1]:null;o&&s&&Hh(s)?(n.push(new tu(o,LT(s))),r+=2):(n.push(new tu(o,{})),r++)}return new Zt(n,{})}function X3(t){const i={};return Fi(t,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(i[n]=Sv(new Zt([],{}),0,e))}),i}function LT(t){const i={};return Fi(t,(e,n)=>i[n]=`${e}`),i}function UT(t,i,e){return t==e.path&&Va(i,e.parameters)}class Q3{constructor(i,e,n,r){this.routeReuseStrategy=i,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(i){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,i),_v(this.futureState.root),this.activateChildRoutes(e,n,i)}deactivateChildRoutes(i,e,n){const r=Dl(e);i.children.forEach(a=>{const o=a.value.outlet;this.deactivateRoutes(a,r[o],n),delete r[o]}),Fi(r,(a,o)=>{this.deactivateRouteAndItsChildren(a,n)})}deactivateRoutes(i,e,n){const r=i.value,a=e?e.value:null;if(r===a)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(i,e,o.children)}else this.deactivateChildRoutes(i,e,n);else a&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(i,e){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,e):this.deactivateRouteAndOutlet(i,e)}detachAndStoreRouteSubtree(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,a=Dl(i);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);if(n&&n.outlet){const o=n.outlet.detach(),s=n.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:o,route:i,contexts:s})}}deactivateRouteAndOutlet(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,a=Dl(i);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(i,e,n){const r=Dl(e);i.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],n),this.forwardEvent(new m3(a.value.snapshot))}),i.children.length&&this.forwardEvent(new p3(i.value.snapshot))}activateRoutes(i,e,n){const r=i.value,a=e?e.value:null;if(_v(r),r===a)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(i,e,o.children)}else this.activateChildRoutes(i,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),_v(s.route.value),this.activateChildRoutes(i,null,o.children)}else{const s=function K3(t){for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(i,null,o.children)}}else this.activateChildRoutes(i,null,n)}}class Tv{constructor(i,e){this.routes=i,this.module=e}}function Io(t){return"function"==typeof t}function ls(t){return t instanceof os}const au=Symbol("INITIAL_VALUE");function ou(){return io(t=>function dv(...t){const i=Zl(t),e=Xu(t),{args:n,keys:r}=iS(t);if(0===n.length)return Mi([],i);const a=new Oe(function JF(t,i,e=Ie){return n=>{oT(i,()=>{const{length:r}=t,a=new Array(r);let o=r,s=r;for(let l=0;l<r;l++)oT(i,()=>{const c=Mi(t[l],i);let u=!1;c.subscribe(Lt(n,d=>{a[l]=d,u||(u=!0,s--),s||n.next(e(a.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,i,r?o=>rS(r,o):Ie));return e?a.pipe(Hm(e)):a}(t.map(i=>i.pipe(ki(1),function Oh(...t){const i=Zl(t);return vt((e,n)=>{(i?Zc(t,e,i):Zc(t,e)).subscribe(n)})}(au)))).pipe(cT((i,e)=>{let n=!1;return e.reduce((r,a,o)=>r!==au?r:(a===au&&(n=!0),n||!1!==a&&o!==e.length-1&&!ls(a)?r:a),i)},au),Vi(i=>i!==au),Mt(i=>ls(i)?i:!0===i),ki(1)))}class iB{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new su,this.attachRef=null}}class su{constructor(){this.contexts=new Map}onChildOutletCreated(i,e){const n=this.getOrCreateContext(i);n.outlet=e,this.contexts.set(i,n)}onChildOutletDestroyed(i){const e=this.getContext(i);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let e=this.getContext(i);return e||(e=new iB,this.contexts.set(i,e)),e}getContext(i){return this.contexts.get(i)||null}}let Dv=(()=>{class t{constructor(e,n,r,a,o){this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.name=a||qt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),s=this.parentContexts.getOrCreateContext(this.name).children,l=new rB(e,s,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(P(su),P($r),P(Zo),function Wo(t){return function Vx(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const e=t.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const a=e[r];if(Db(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(a===i)return e[r+1];r+=2}}}return null}(_i(),t)}("name"),P(Mr))},t.\u0275dir=Ue({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class rB{constructor(i,e,n){this.route=i,this.childContexts=e,this.parent=n}get(i,e){return i===Rl?this.route:i===su?this.childContexts:this.parent.get(i,e)}}let HT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=lt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&x(0,"router-outlet")},directives:[Dv],encapsulation:2}),t})();function GT(t,i=""){for(let e=0;e<t.length;e++){const n=t[e];aB(n,oB(i,n))}}function aB(t,i){t.children&&GT(t.children,i)}function oB(t,i){return i?t||i.path?t&&!i.path?`${t}/`:!t&&i.path?i.path:`${t}/${i.path}`:"":t}function Rv(t){const i=t.children&&t.children.map(Rv),e=i?Object.assign(Object.assign({},t),{children:i}):Object.assign({},t);return!e.component&&(i||e.loadChildren)&&e.outlet&&e.outlet!==qt&&(e.component=HT),e}function Yr(t){return t.outlet||qt}function jT(t,i){const e=t.filter(n=>Yr(n)===i);return e.push(...t.filter(n=>Yr(n)!==i)),e}const zT={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function jh(t,i,e){var n;if(""===i.path)return"full"===i.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},zT):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(i.matcher||_3)(e,t,i);if(!a)return Object.assign({},zT);const o={};Fi(a.posParams,(l,c)=>{o[c]=l.path});const s=a.consumed.length>0?Object.assign(Object.assign({},o),a.consumed[a.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:s,positionalParamSegments:null!==(n=a.posParams)&&void 0!==n?n:{}}}function zh(t,i,e,n,r="corrected"){if(e.length>0&&function cB(t,i,e){return e.some(n=>$h(t,i,n)&&Yr(n)!==qt)}(t,e,n)){const o=new Zt(i,function lB(t,i,e,n){const r={};r[qt]=n,n._sourceSegment=t,n._segmentIndexShift=i.length;for(const a of e)if(""===a.path&&Yr(a)!==qt){const o=new Zt([],{});o._sourceSegment=t,o._segmentIndexShift=i.length,r[Yr(a)]=o}return r}(t,i,n,new Zt(e,t.children)));return o._sourceSegment=t,o._segmentIndexShift=i.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function uB(t,i,e){return e.some(n=>$h(t,i,n))}(t,e,n)){const o=new Zt(t.segments,function sB(t,i,e,n,r,a){const o={};for(const s of n)if($h(t,e,s)&&!r[Yr(s)]){const l=new Zt([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===a?t.segments.length:i.length,o[Yr(s)]=l}return Object.assign(Object.assign({},r),o)}(t,i,e,n,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=i.length,{segmentGroup:o,slicedSegments:e}}const a=new Zt(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=i.length,{segmentGroup:a,slicedSegments:e}}function $h(t,i,e){return(!(t.hasChildren()||i.length>0)||"full"!==e.pathMatch)&&""===e.path}function $T(t,i,e,n){return!!(Yr(t)===n||n!==qt&&$h(i,e,t))&&("**"===t.path||jh(i,t,e).matched)}function qT(t,i,e){return 0===i.length&&!t.children[e]}class lu{constructor(i){this.segmentGroup=i||null}}class WT{constructor(i){this.urlTree=i}}function qh(t){return new Oe(i=>i.error(new lu(t)))}function XT(t){return new Oe(i=>i.error(new WT(t)))}function dB(t){return new Oe(i=>i.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class pB{constructor(i,e,n,r,a){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=i.get(Ja)}apply(){const i=zh(this.urlTree.root,[],[],this.config).segmentGroup,e=new Zt(i.segments,i.children);return this.expandSegmentGroup(this.ngModule,this.config,e,qt).pipe(Mt(a=>this.createUrlTree(xv(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Eo(a=>{if(a instanceof WT)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof lu?this.noMatchError(a):a}))}match(i){return this.expandSegmentGroup(this.ngModule,this.config,i.root,qt).pipe(Mt(r=>this.createUrlTree(xv(r),i.queryParams,i.fragment))).pipe(Eo(r=>{throw r instanceof lu?this.noMatchError(r):r}))}noMatchError(i){return new Error(`Cannot match any routes. URL Segment: '${i.segmentGroup}'`)}createUrlTree(i,e,n){const r=i.segments.length>0?new Zt([],{[qt]:i}):i;return new os(r,e,n)}expandSegmentGroup(i,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(i,e,n).pipe(Mt(a=>new Zt([],a))):this.expandSegment(i,n,e,n.segments,r,!0)}expandChildren(i,e,n){const r=[];for(const a of Object.keys(n.children))"primary"===a?r.unshift(a):r.push(a);return Mi(r).pipe(Jc(a=>{const o=n.children[a],s=jT(e,a);return this.expandSegmentGroup(i,s,o,a).pipe(Mt(l=>({segment:l,outlet:a})))}),cT((a,o)=>(a[o.outlet]=o.segment,a),{}),function a3(t,i){const e=arguments.length>=2;return n=>n.pipe(t?Vi((r,a)=>t(r,a,n)):Ie,hv(1),e?dT(i):uT(()=>new Ih))}())}expandSegment(i,e,n,r,a,o){return Mi(n).pipe(Jc(s=>this.expandSegmentAgainstRoute(i,e,n,s,r,a,o).pipe(Eo(c=>{if(c instanceof lu)return Tt(null);throw c}))),Sl(s=>!!s),Eo((s,l)=>{if(s instanceof Ih||"EmptyError"===s.name){if(qT(e,r,a))return Tt(new Zt([],{}));throw new lu(e)}throw s}))}expandSegmentAgainstRoute(i,e,n,r,a,o,s){return $T(r,e,a,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(i,e,r,a,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o):qh(e):qh(e)}expandSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(i,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(i,e,n,r){const a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?XT(a):this.lineralizeSegments(n,a).pipe(ii(o=>{const s=new Zt(o,{});return this.expandSegment(i,s,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(i,e,n,r,a,o){const{matched:s,consumedSegments:l,lastChild:c,positionalParamSegments:u}=jh(e,r,a);if(!s)return qh(e);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?XT(d):this.lineralizeSegments(r,d).pipe(ii(m=>this.expandSegment(i,e,n,m.concat(a.slice(c)),o,!1)))}matchSegmentAgainstRoute(i,e,n,r,a){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Tt(n._loadedConfig):this.configLoader.load(i.injector,n)).pipe(Mt(m=>(n._loadedConfig=m,new Zt(r,{})))):Tt(new Zt(r,{}));const{matched:o,consumedSegments:s,lastChild:l}=jh(e,n,r);if(!o)return qh(e);const c=r.slice(l);return this.getChildConfig(i,n,r).pipe(ii(d=>{const m=d.module,v=d.routes,{segmentGroup:_,slicedSegments:y}=zh(e,s,c,v),S=new Zt(_.segments,_.children);if(0===y.length&&S.hasChildren())return this.expandChildren(m,v,S).pipe(Mt(L=>new Zt(s,L)));if(0===v.length&&0===y.length)return Tt(new Zt(s,{}));const D=Yr(n)===a;return this.expandSegment(m,S,v,y,D?qt:a,!0).pipe(Mt(T=>new Zt(s.concat(T.segments),T.children)))}))}getChildConfig(i,e,n){return e.children?Tt(new Tv(e.children,i)):e.loadChildren?void 0!==e._loadedConfig?Tt(e._loadedConfig):this.runCanLoadGuards(i.injector,e,n).pipe(ii(r=>r?this.configLoader.load(i.injector,e).pipe(Mt(a=>(e._loadedConfig=a,a))):function hB(t){return new Oe(i=>i.error(pv(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Tt(new Tv([],i))}runCanLoadGuards(i,e,n){const r=e.canLoad;return r&&0!==r.length?Tt(r.map(o=>{const s=i.get(o);let l;if(function J3(t){return t&&Io(t.canLoad)}(s))l=s.canLoad(e,n);else{if(!Io(s))throw new Error("Invalid CanLoad guard");l=s(e,n)}return Fa(l)})).pipe(ou(),Yi(o=>{if(!ls(o))return;const s=pv(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw s.url=o,s}),Mt(o=>!0===o)):Tt(!0)}lineralizeSegments(i,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Tt(n);if(r.numberOfChildren>1||!r.children[qt])return dB(i.redirectTo);r=r.children[qt]}}applyRedirectCommands(i,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),i,n)}applyRedirectCreatreUrlTree(i,e,n,r){const a=this.createSegmentGroup(i,e.root,n,r);return new os(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(i,e){const n={};return Fi(i,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const s=r.substring(1);n[a]=e[s]}else n[a]=r}),n}createSegmentGroup(i,e,n,r){const a=this.createSegments(i,e.segments,n,r);let o={};return Fi(e.children,(s,l)=>{o[l]=this.createSegmentGroup(i,s,n,r)}),new Zt(a,o)}createSegments(i,e,n,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(i,a,r):this.findOrReturn(a,n))}findPosParam(i,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${i}'. Cannot find '${e.path}'.`);return r}findOrReturn(i,e){let n=0;for(const r of e){if(r.path===i.path)return e.splice(n),r;n++}return i}}function xv(t){const i={};for(const n of Object.keys(t.children)){const a=xv(t.children[n]);(a.segments.length>0||a.hasChildren())&&(i[n]=a)}return function gB(t){if(1===t.numberOfChildren&&t.children[qt]){const i=t.children[qt];return new Zt(t.segments.concat(i.segments),i.children)}return t}(new Zt(t.segments,i))}class YT{constructor(i){this.path=i,this.route=this.path[this.path.length-1]}}class Wh{constructor(i,e){this.component=i,this.route=e}}function vB(t,i,e){const n=t._root;return cu(n,i?i._root:null,e,[n.value])}function Xh(t,i,e){const n=function _B(t){if(!t)return null;for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(i);return(n?n.module.injector:e).get(t)}function cu(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=Dl(i);return t.children.forEach(o=>{(function yB(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,o=i?i.value:null,s=e?e.getContext(t.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){const l=function CB(t,i,e){if("function"==typeof e)return e(t,i);switch(e){case"pathParamsChange":return!ss(t.url,i.url);case"pathParamsOrQueryParamsChange":return!ss(t.url,i.url)||!Va(t.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yv(t,i)||!Va(t.queryParams,i.queryParams);default:return!yv(t,i)}}(o,a,a.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new YT(n)):(a.data=o.data,a._resolvedData=o._resolvedData),cu(t,i,a.component?s?s.children:null:e,n,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new Wh(s.outlet.component,o))}else o&&uu(i,s,r),r.canActivateChecks.push(new YT(n)),cu(t,null,a.component?s?s.children:null:e,n,r)})(o,a[o.value.outlet],e,n.concat([o.value]),r),delete a[o.value.outlet]}),Fi(a,(o,s)=>uu(o,e.getContext(s),r)),r}function uu(t,i,e){const n=Dl(t),r=t.value;Fi(n,(a,o)=>{uu(a,r.component?i?i.children.getContext(o):null:i,e)}),e.canDeactivateChecks.push(new Wh(r.component&&i&&i.outlet&&i.outlet.isActivated?i.outlet.component:null,r))}class AB{}function QT(t){return new Oe(i=>i.error(t))}class EB{constructor(i,e,n,r,a,o){this.rootComponentType=i,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}recognize(){const i=zh(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,i,qt);if(null===e)return null;const n=new Uh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ao(n,e),a=new OT(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(i){const e=i.value,n=IT(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),i.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(i,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(i,e):this.processSegment(i,e,e.segments,n)}processChildren(i,e){const n=[];for(const a of Object.keys(e.children)){const o=e.children[a],s=jT(i,a),l=this.processSegmentGroup(s,o,a);if(null===l)return null;n.push(...l)}const r=KT(n);return function IB(t){t.sort((i,e)=>i.value.outlet===qt?-1:e.value.outlet===qt?1:i.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(i,e,n,r){for(const a of i){const o=this.processSegmentAgainstRoute(a,e,n,r);if(null!==o)return o}return qT(e,n,r)?[]:null}processSegmentAgainstRoute(i,e,n,r){if(i.redirectTo||!$T(i,e,n,r))return null;let a,o=[],s=[];if("**"===i.path){const v=n.length>0?_T(n).parameters:{};a=new Uh(n,v,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eD(i),Yr(i),i.component,i,ZT(e),JT(e)+n.length,tD(i))}else{const v=jh(e,i,n);if(!v.matched)return null;o=v.consumedSegments,s=n.slice(v.lastChild),a=new Uh(o,v.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eD(i),Yr(i),i.component,i,ZT(e),JT(e)+o.length,tD(i))}const l=function OB(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(i),{segmentGroup:c,slicedSegments:u}=zh(e,o,s,l.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const v=this.processChildren(l,c);return null===v?null:[new ao(a,v)]}if(0===l.length&&0===u.length)return[new ao(a,[])];const d=Yr(i)===r,m=this.processSegment(l,c,u,d?qt:r);return null===m?null:[new ao(a,m)]}}function NB(t){const i=t.value.routeConfig;return i&&""===i.path&&void 0===i.redirectTo}function KT(t){const i=[],e=new Set;for(const n of t){if(!NB(n)){i.push(n);continue}const r=i.find(a=>n.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):i.push(n)}for(const n of e){const r=KT(n.children);i.push(new ao(n.value,r))}return i.filter(n=>!e.has(n))}function ZT(t){let i=t;for(;i._sourceSegment;)i=i._sourceSegment;return i}function JT(t){let i=t,e=i._segmentIndexShift?i._segmentIndexShift:0;for(;i._sourceSegment;)i=i._sourceSegment,e+=i._segmentIndexShift?i._segmentIndexShift:0;return e-1}function eD(t){return t.data||{}}function tD(t){return t.resolve||{}}function nD(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Mv(t){return io(i=>{const e=t(i);return e?Mi(e).pipe(Mt(()=>i)):Tt(i)})}class jB extends class GB{shouldDetach(i){return!1}store(i,e){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,e){return i.routeConfig===e.routeConfig}}{}const kv=new Gt("ROUTES");class iD{constructor(i,e,n,r){this.injector=i,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(i,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(Mt(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=a.create(i);return new Tv(bT(o.injector.get(kv,void 0,kt.Self|kt.Optional)).map(Rv),o)}),Eo(a=>{throw e._loader$=void 0,a}));return e._loader$=new t3(r,()=>new ve).pipe(lT()),e._loader$}loadModuleFactory(i){return Fa(i()).pipe(ii(e=>e instanceof _C?Tt(e):Mi(this.compiler.compileModuleAsync(e))))}}class $B{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,e){return i}}function qB(t){throw t}function WB(t,i,e){return i.parse("/")}function rD(t,i){return Tt(null)}const XB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let kr=(()=>{class t{constructor(e,n,r,a,o,s,l){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=a,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ve,this.errorHandler=qB,this.malformedUriErrorHandler=WB,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rD,afterPreactivation:rD},this.urlHandlingStrategy=new $B,this.routeReuseStrategy=new jB,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Ja),this.console=o.get(tw);const d=o.get(xn);this.isNgZoneEnabled=d instanceof xn&&xn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function C3(){return new os(new Zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new iD(o,s,m=>this.triggerEvent(new fT(m)),m=>this.triggerEvent(new pT(m))),this.routerState=ET(this.currentUrlTree,this.rootComponentType),this.transitions=new zn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(Vi(r=>0!==r.id),Mt(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),io(r=>{let a=!1,o=!1;return Tt(r).pipe(Yi(s=>{this.currentNavigation={id:s.id,initialUrl:s.currentRawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),io(s=>{const l=this.browserUrlTree.toString(),c=!this.navigated||s.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Yh(s.source)&&(this.browserUrlTree=s.extractedUrl),Tt(s).pipe(io(d=>{const m=this.transitions.getValue();return n.next(new fv(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),m!==this.transitions.getValue()?Jr:Promise.resolve(d)}),function mB(t,i,e,n){return io(r=>function fB(t,i,e,n,r){return new pB(t,i,e,n,r).apply()}(t,i,e,r.extractedUrl,n).pipe(Mt(a=>Object.assign(Object.assign({},r),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Yi(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function VB(t,i,e,n,r){return ii(a=>function PB(t,i,e,n,r="emptyOnly",a="legacy"){try{const o=new EB(t,i,e,n,r,a).recognize();return null===o?QT(new AB):Tt(o)}catch(o){return QT(o)}}(t,i,a.urlAfterRedirects,e(a.urlAfterRedirects),n,r).pipe(Mt(o=>Object.assign(Object.assign({},a),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Yi(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const v=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(v,d)}this.browserUrlTree=d.urlAfterRedirects}const m=new l3(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);n.next(m)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:m,extractedUrl:v,source:_,restoredState:y,extras:S}=s,D=new fv(m,this.serializeUrl(v),_,y);n.next(D);const w=ET(v,this.rootComponentType).snapshot;return Tt(Object.assign(Object.assign({},s),{targetSnapshot:w,urlAfterRedirects:v,extras:Object.assign(Object.assign({},S),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=s.rawUrl,s.resolve(null),Jr}),Mv(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:m,replaceUrl:v}}=s;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!m,replaceUrl:!!v})}),Yi(s=>{const l=new c3(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot);this.triggerEvent(l)}),Mt(s=>Object.assign(Object.assign({},s),{guards:vB(s.targetSnapshot,s.currentSnapshot,this.rootContexts)})),function wB(t,i){return ii(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:o}}=e;return 0===o.length&&0===a.length?Tt(Object.assign(Object.assign({},e),{guardsResult:!0})):function SB(t,i,e,n){return Mi(t).pipe(ii(r=>function kB(t,i,e,n,r){const a=i&&i.routeConfig?i.routeConfig.canDeactivate:null;return a&&0!==a.length?Tt(a.map(s=>{const l=Xh(s,i,r);let c;if(function nB(t){return t&&Io(t.canDeactivate)}(l))c=Fa(l.canDeactivate(t,i,e,n));else{if(!Io(l))throw new Error("Invalid CanDeactivate guard");c=Fa(l(t,i,e,n))}return c.pipe(Sl())})).pipe(ou()):Tt(!0)}(r.component,r.route,e,i,n)),Sl(r=>!0!==r,!0))}(o,n,r,t).pipe(ii(s=>s&&function Z3(t){return"boolean"==typeof t}(s)?function TB(t,i,e,n){return Mi(i).pipe(Jc(r=>Zc(function RB(t,i){return null!==t&&i&&i(new f3(t)),Tt(!0)}(r.route.parent,n),function DB(t,i){return null!==t&&i&&i(new g3(t)),Tt(!0)}(r.route,n),function MB(t,i,e){const n=i[i.length-1],a=i.slice(0,i.length-1).reverse().map(o=>function bB(t){const i=t.routeConfig?t.routeConfig.canActivateChild:null;return i&&0!==i.length?{node:t,guards:i}:null}(o)).filter(o=>null!==o).map(o=>sT(()=>Tt(o.guards.map(l=>{const c=Xh(l,o.node,e);let u;if(function tB(t){return t&&Io(t.canActivateChild)}(c))u=Fa(c.canActivateChild(n,t));else{if(!Io(c))throw new Error("Invalid CanActivateChild guard");u=Fa(c(n,t))}return u.pipe(Sl())})).pipe(ou())));return Tt(a).pipe(ou())}(t,r.path,e),function xB(t,i,e){const n=i.routeConfig?i.routeConfig.canActivate:null;if(!n||0===n.length)return Tt(!0);const r=n.map(a=>sT(()=>{const o=Xh(a,i,e);let s;if(function eB(t){return t&&Io(t.canActivate)}(o))s=Fa(o.canActivate(i,t));else{if(!Io(o))throw new Error("Invalid CanActivate guard");s=Fa(o(i,t))}return s.pipe(Sl())}));return Tt(r).pipe(ou())}(t,r.route,e))),Sl(r=>!0!==r,!0))}(n,a,t,i):Tt(s)),Mt(s=>Object.assign(Object.assign({},e),{guardsResult:s})))})}(this.ngModule.injector,s=>this.triggerEvent(s)),Yi(s=>{if(ls(s.guardsResult)){const c=pv(`Redirecting to "${this.serializeUrl(s.guardsResult)}"`);throw c.url=s.guardsResult,c}const l=new u3(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.triggerEvent(l)}),Vi(s=>!!s.guardsResult||(this.restoreHistory(s),this.cancelNavigationTransition(s,""),!1)),Mv(s=>{if(s.guards.canActivateChecks.length)return Tt(s).pipe(Yi(l=>{const c=new d3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),io(l=>{let c=!1;return Tt(l).pipe(function FB(t,i){return ii(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return Tt(e);let a=0;return Mi(r).pipe(Jc(o=>function BB(t,i,e,n){return function LB(t,i,e,n){const r=nD(t);if(0===r.length)return Tt({});const a={};return Mi(r).pipe(ii(o=>function UB(t,i,e,n){const r=Xh(t,i,n);return Fa(r.resolve?r.resolve(i,e):r(i,e))}(t[o],i,e,n).pipe(Yi(s=>{a[o]=s}))),hv(1),ii(()=>nD(a).length===r.length?Tt(a):Jr))}(t._resolve,t,i,n).pipe(Mt(a=>(t._resolvedData=a,t.data=Object.assign(Object.assign({},t.data),IT(t,e).resolve),null)))}(o.route,n,t,i)),Yi(()=>a++),hv(1),ii(o=>a===r.length?Tt(e):Jr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Yi({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Yi(l=>{const c=new h3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),Mv(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:m,replaceUrl:v}}=s;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!m,replaceUrl:!!v})}),Mt(s=>{const l=function L3(t,i,e){const n=iu(t,i._root,e?e._root:void 0);return new PT(n,i)}(this.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return Object.assign(Object.assign({},s),{targetRouterState:l})}),Yi(s=>{this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects)}),((t,i,e)=>Mt(n=>(new Q3(i,n.targetRouterState,n.currentRouterState,e).activate(t),n)))(this.rootContexts,this.routeReuseStrategy,s=>this.triggerEvent(s)),Yi({next(){a=!0},complete(){a=!0}}),function o3(t){return vt((i,e)=>{try{i.subscribe(e)}finally{e.add(t)}})}(()=>{var s;a||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(s=this.currentNavigation)||void 0===s?void 0:s.id)===r.id&&(this.currentNavigation=null)}),Eo(s=>{if(o=!0,function b3(t){return t&&t[mT]}(s)){const l=ls(s.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new hT(r.id,this.serializeUrl(r.extractedUrl),s.message);n.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(s.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Yh(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new s3(r.id,this.serializeUrl(r.extractedUrl),s);n.next(l);try{r.resolve(this.errorHandler(s))}catch(c){r.reject(c)}}return Jr}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{var r;const a={replaceUrl:!0},o=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}const s=this.parseUrl(e.url);this.scheduleNavigation(s,n,o,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){GT(e),this.config=e.map(Rv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:a,fragment:o,queryParamsHandling:s,preserveFragment:l}=n,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(s){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}return null!==d&&(d=this.removeEmptyProps(d)),function G3(t,i,e,n,r){if(0===e.length)return Cv(i.root,i.root,i,n,r);const a=function j3(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new FT(!0,0,t);let i=0,e=!1;const n=t.reduce((r,a,o)=>{if("object"==typeof a&&null!=a){if(a.outlets){const s={};return Fi(a.outlets,(l,c)=>{s[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:s}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===o?(a.split("/").forEach((s,l)=>{0==l&&"."===s||(0==l&&""===s?e=!0:".."===s?i++:""!=s&&r.push(s))}),r):[...r,a]},[]);return new FT(e,i,n)}(e);if(a.toRoot())return Cv(i.root,new Zt([],{}),i,n,r);const o=function z3(t,i,e){if(t.isAbsolute)return new wv(i.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new wv(a,a===i.root,0)}const n=Hh(t.commands[0])?0:1;return function $3(t,i,e){let n=t,r=i,a=e;for(;a>r;){if(a-=r,n=n.parent,!n)throw new Error("Invalid number of '../'");r=n.segments.length}return new wv(n,!1,r-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+n,t.numberOfDoubleDots)}(a,i,t),s=o.processChildren?Gh(o.segmentGroup,o.index,a.commands):BT(o.segmentGroup,o.index,a.commands);return Cv(o.segmentGroup,s,i,n,r)}(c,this.currentUrlTree,e,d,null!=u?u:null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=ls(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function QB(t){for(let i=0;i<t.length;i++){const e=t[i];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${i}`)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?Object.assign({},XB):!1===n?Object.assign({},YB):n,ls(e))return CT(this.currentUrlTree,e,r);const a=this.parseUrl(e);return CT(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const a=e[r];return null!=a&&(n[r]=a),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new eu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,a,o){var s,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=Yh(n)&&u&&!Yh(u.source),m=u.rawUrl.toString()===e.toString(),v=u.id===(null===(s=this.currentNavigation)||void 0===s?void 0:s.id);if(d&&m&&v)return Promise.resolve(!0);let y,S,D;o?(y=o.resolve,S=o.reject,D=o.promise):D=new Promise((L,G)=>{y=L,S=G});const w=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),T=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):T=0,this.setTransition({id:w,targetPageId:T,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:y,reject:S,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(L=>Promise.reject(L))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},n.extras.state),this.generateNgRouterState(n.id,n.targetPageId));this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(e,n=!1){var r,a;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n){const r=new hT(e.id,this.serializeUrl(e.extractedUrl),n);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return t.\u0275fac=function(e){Rg()},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();function Yh(t){return"imperative"!==t}class aD{}class oD{preload(i,e){return Tt(null)}}let sD=(()=>{class t{constructor(e,n,r,a){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=new iD(r,n,l=>e.triggerEvent(new fT(l)),l=>e.triggerEvent(new pT(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Vi(e=>e instanceof eu),Jc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Ja);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const a of n)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children));return Mi(r).pipe(Kl(),Mt(a=>{}))}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>(n._loadedConfig?Tt(n._loadedConfig):this.loader.load(e.injector,n)).pipe(ii(a=>(n._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Ve(kr),Ve(eh),Ve(ai),Ve(aD))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})(),Ev=(()=>{class t{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof fv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof eu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof gT&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new gT(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){Rg()},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();const cs=new Gt("ROUTER_CONFIGURATION"),lD=new Gt("ROUTER_FORROOT_GUARD"),e4=[Cm,{provide:DT,useClass:RT},{provide:kr,useFactory:function a4(t,i,e,n,r,a,o={},s,l){const c=new kr(null,t,i,e,n,r,bT(a));return s&&(c.urlHandlingStrategy=s),l&&(c.routeReuseStrategy=l),function o4(t,i){t.errorHandler&&(i.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(i.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(i.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(i.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(i.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(i.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(i.canceledNavigationResolution=t.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,m;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(m=console.groupEnd)||void 0===m||m.call(console)}),c},deps:[DT,su,Cm,ai,eh,kv,cs,[class zB{},new xa],[class HB{},new xa]]},su,{provide:Rl,useFactory:function s4(t){return t.routerState.root},deps:[kr]},sD,oD,class JB{preload(i,e){return e().pipe(Eo(()=>Tt(null)))}},{provide:cs,useValue:{enableTracing:!1}}];function t4(){return new sw("Router",kr)}let cD=(()=>{class t{constructor(e,n){}static forRoot(e,n){return{ngModule:t,providers:[e4,uD(e),{provide:lD,useFactory:r4,deps:[[kr,new xa,new Gs]]},{provide:cs,useValue:n||{}},{provide:bl,useFactory:i4,deps:[ns,[new pc(ym),new xa],cs]},{provide:Ev,useFactory:n4,deps:[kr,hV,cs]},{provide:aD,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:oD},{provide:sw,multi:!0,useFactory:t4},[Iv,{provide:Zd,multi:!0,useFactory:l4,deps:[Iv]},{provide:dD,useFactory:c4,deps:[Iv]},{provide:ew,multi:!0,useExisting:dD}]]}}static forChild(e){return{ngModule:t,providers:[uD(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Ve(lD,8),Ve(kr,8))},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({}),t})();function n4(t,i,e){return e.scrollOffset&&i.setOffset(e.scrollOffset),new Ev(t,i,e)}function i4(t,i,e={}){return e.useHash?new QO(t,i):new xw(t,i)}function r4(t){return"guarded"}function uD(t){return[{provide:Hx,multi:!0,useValue:t},{provide:kv,multi:!0,useValue:t}]}let Iv=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ve}appInitializer(){return this.injector.get(WO,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let n=null;const r=new Promise(s=>n=s),a=this.injector.get(kr),o=this.injector.get(cs);return"disabled"===o.initialNavigation?(a.setUpLocationChangeListener(),n(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Tt(null):(this.initNavigation=!0,n(!0),this.resultOfPreactivationDone),a.initialNavigation()):n(!0),r})}bootstrapListener(e){const n=this.injector.get(cs),r=this.injector.get(sD),a=this.injector.get(Ev),o=this.injector.get(kr),s=this.injector.get(es);e===s.components[0]&&(("enabledNonBlocking"===n.initialNavigation||void 0===n.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),a.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(Ve(ai))},t.\u0275prov=Je({token:t,factory:t.\u0275fac}),t})();function l4(t){return t.appInitializer.bind(t)}function c4(t){return t.bootstrapListener.bind(t)}const dD=new Gt("Router Initializer"),d4=[];let h4=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[cD.forRoot(d4)],cD]}),t})();function hD(t,i,e,n,r,a,o){try{var s=t[a](o),l=s.value}catch(c){return void e(c)}s.done?i(l):Promise.resolve(l).then(n,r)}function vr(t){return function(){var i=this,e=arguments;return new Promise(function(n,r){var a=t.apply(i,e);function o(l){hD(a,n,r,o,s,"next",l)}function s(l){hD(a,n,r,o,s,"throw",l)}o(void 0)})}}var zt=(()=>{return(t=zt||(zt={}))[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",zt;var t})();const ar=new class f4{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(i){this._typeMetadatas.has(i.target)||this._typeMetadatas.set(i.target,new Map),this._typeMetadatas.get(i.target).set(i.propertyName,i)}addTransformMetadata(i){this._transformMetadatas.has(i.target)||this._transformMetadatas.set(i.target,new Map),this._transformMetadatas.get(i.target).has(i.propertyName)||this._transformMetadatas.get(i.target).set(i.propertyName,[]),this._transformMetadatas.get(i.target).get(i.propertyName).push(i)}addExposeMetadata(i){this._exposeMetadatas.has(i.target)||this._exposeMetadatas.set(i.target,new Map),this._exposeMetadatas.get(i.target).set(i.propertyName,i)}addExcludeMetadata(i){this._excludeMetadatas.has(i.target)||this._excludeMetadatas.set(i.target,new Map),this._excludeMetadatas.get(i.target).set(i.propertyName,i)}findTransformMetadatas(i,e,n){return this.findMetadatas(this._transformMetadatas,i,e).filter(r=>!r.options||!0===r.options.toClassOnly&&!0===r.options.toPlainOnly||(!0===r.options.toClassOnly?n===zt.CLASS_TO_CLASS||n===zt.PLAIN_TO_CLASS:!0!==r.options.toPlainOnly||n===zt.CLASS_TO_PLAIN))}findExcludeMetadata(i,e){return this.findMetadata(this._excludeMetadatas,i,e)}findExposeMetadata(i,e){return this.findMetadata(this._exposeMetadatas,i,e)}findExposeMetadataByCustomName(i,e){return this.getExposedMetadatas(i).find(n=>n.options&&n.options.name===e)}findTypeMetadata(i,e){return this.findMetadata(this._typeMetadatas,i,e)}getStrategy(i){const e=this._excludeMetadatas.get(i),n=e&&e.get(void 0),r=this._exposeMetadatas.get(i),a=r&&r.get(void 0);return n&&a||!n&&!a?"none":n?"excludeAll":"exposeAll"}getExposedMetadatas(i){return this.getMetadata(this._exposeMetadatas,i)}getExcludedMetadatas(i){return this.getMetadata(this._excludeMetadatas,i)}getExposedProperties(i,e){return this.getExposedMetadatas(i).filter(n=>!n.options||!0===n.options.toClassOnly&&!0===n.options.toPlainOnly||(!0===n.options.toClassOnly?e===zt.CLASS_TO_CLASS||e===zt.PLAIN_TO_CLASS:!0!==n.options.toPlainOnly||e===zt.CLASS_TO_PLAIN)).map(n=>n.propertyName)}getExcludedProperties(i,e){return this.getExcludedMetadatas(i).filter(n=>!n.options||!0===n.options.toClassOnly&&!0===n.options.toPlainOnly||(!0===n.options.toClassOnly?e===zt.CLASS_TO_CLASS||e===zt.PLAIN_TO_CLASS:!0!==n.options.toPlainOnly||e===zt.CLASS_TO_PLAIN)).map(n=>n.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(i,e){const n=i.get(e);let r;n&&(r=Array.from(n.values()).filter(o=>void 0!==o.propertyName));const a=[];for(const o of this.getAncestors(e)){const s=i.get(o);if(s){const l=Array.from(s.values()).filter(c=>void 0!==c.propertyName);a.push(...l)}}return a.concat(r||[])}findMetadata(i,e,n){const r=i.get(e);if(r){const a=r.get(n);if(a)return a}for(const a of this.getAncestors(e)){const o=i.get(a);if(o){const s=o.get(n);if(s)return s}}}findMetadatas(i,e,n){const r=i.get(e);let a;r&&(a=r.get(n));const o=[];for(const s of this.getAncestors(e)){const l=i.get(s);l&&l.has(n)&&o.push(...l.get(n))}return o.slice().reverse().concat((a||[]).slice().reverse())}getAncestors(i){if(!i)return[];if(!this._ancestorsMap.has(i)){const e=[];for(let n=Object.getPrototypeOf(i.prototype.constructor);void 0!==n.prototype;n=Object.getPrototypeOf(n.prototype.constructor))e.push(n);this._ancestorsMap.set(i,e)}return this._ancestorsMap.get(i)}};function et(t,i={}){return function(e,n){const r=Reflect.getMetadata("design:type",e,n);ar.addTypeMetadata({target:e.constructor,propertyName:n,reflectedType:r,typeFunction:t,options:i})}}var X=(()=>{return(t=X||(X={}))[t.Horse=0]="Horse",t[t.Cheetah=1]="Cheetah",t[t.Hare=2]="Hare",t[t.Monkey=3]="Monkey",t[t.Goat=4]="Goat",t[t.Gecko=5]="Gecko",t[t.Dolphin=6]="Dolphin",t[t.Shark=7]="Shark",t[t.Octopus=8]="Octopus",t[t.Penguin=9]="Penguin",t[t.Caribou=10]="Caribou",t[t.Salamander=11]="Salamander",t[t.Fox=12]="Fox",X;var t})(),z=(()=>{return(t=z||(z={}))[t.Flatland=0]="Flatland",t[t.Mountain=1]="Mountain",t[t.Ocean=2]="Ocean",t[t.Tundra=3]="Tundra",t[t.Volcanic=4]="Volcanic",z;var t})();class pe{constructor(i,e,n){this.name=i,this.amount=e,void 0!==n&&(this.itemType=n)}makeCopy(i){var e=new pe("",0);return e.name=JSON.parse(JSON.stringify(i.name)),e.amount=JSON.parse(JSON.stringify(i.amount)),e.itemType=JSON.parse(JSON.stringify(i.itemType)),e}}var Y=(()=>{return(t=Y||(Y={}))[t.Animal=0]="Animal",t[t.Food=1]="Food",t[t.Training=2]="Training",t[t.Ability=3]="Ability",t[t.Specialty=4]="Specialty",t[t.Equipment=5]="Equipment",t[t.Resources=6]="Resources",t[t.Progression=7]="Progression",t[t.Other=8]="Other",t[t.Consumable=9]="Consumable",Y;var t})();class Ba{constructor(){this.totalRewards=0,this.rewardsObtained=0,this.rewards=[]}}Ge([et(()=>pe),Xe("design:type",Array)],Ba.prototype,"rewards",void 0);class Ml{constructor(){this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.noviceTrack=new Ba,this.noviceTrack.totalRewards=12;var i=50;this.noviceTrack.rewards.push(new pe("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new pe("Bonus Breed XP Gain From Training",1,Y.Other)),this.noviceTrack.rewards.push(new pe("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new pe("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.noviceTrack.rewards.push(new pe("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new pe("Bonus Breed XP Gain From Training",1,Y.Other)),this.noviceTrack.rewards.push(new pe("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new pe("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.noviceTrack.rewards.push(new pe("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new pe("Bonus Breed XP Gain From Training",1,Y.Other)),this.noviceTrack.rewards.push(new pe("Coins",i,Y.Resources)),this.noviceTrack.rewards.push(new pe("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.intermediateTrack=new Ba,this.intermediateTrack.totalRewards=12,this.intermediateTrack.rewards.push(new pe("Coins",200,Y.Resources)),this.intermediateTrack.rewards.push(new pe("Bonus Breed XP Gain From Training",2,Y.Other)),this.intermediateTrack.rewards.push(new pe("Medals",1,Y.Resources)),this.intermediateTrack.rewards.push(new pe("Diminishing Returns per Facility Level",2,Y.Other)),this.intermediateTrack.rewards.push(new pe("Training Time Reduction",1,Y.Other)),this.intermediateTrack.rewards.push(new pe("Bonus Breed XP Gain From Circuit Races",5,Y.Other)),this.intermediateTrack.rewards.push(new pe("Coins",200,Y.Resources)),this.intermediateTrack.rewards.push(new pe("Bonus Breed XP Gain From Free Races",1,Y.Other)),this.intermediateTrack.rewards.push(new pe("Medals",1,Y.Resources)),this.intermediateTrack.rewards.push(new pe("Bonus Breed XP Gain From Training",2,Y.Other)),this.intermediateTrack.rewards.push(new pe("Training Time Reduction",1,Y.Other)),this.intermediateTrack.rewards.push(new pe("Diminishing Returns per Facility Level",3,Y.Other)),this.masterTrack=new Ba,this.masterTrack.totalRewards=12,this.masterTrack.rewards.push(new pe("Bonus Breed XP Gain From Free Races",5,Y.Other)),this.masterTrack.rewards.push(new pe("Diminishing Returns per Facility Level",2,Y.Other)),this.masterTrack.rewards.push(new pe("Training Time Reduction",1,Y.Other)),this.masterTrack.rewards.push(new pe("Coins",1e3,Y.Resources)),this.masterTrack.rewards.push(new pe("Bonus Breed XP Gain From Training",3,Y.Other)),this.masterTrack.rewards.push(new pe("Bonus Talents",2,Y.Other)),this.masterTrack.rewards.push(new pe("Training Time Reduction",1,Y.Other)),this.masterTrack.rewards.push(new pe("Coins",1e3,Y.Resources)),this.masterTrack.rewards.push(new pe("Orb Pendant",1,Y.Other)),this.masterTrack.rewards.push(new pe("Diminishing Returns per Facility Level",3,Y.Other)),this.masterTrack.rewards.push(new pe("Training Time Reduction",1,Y.Other)),this.masterTrack.rewards.push(new pe("Bonus Talents",3,Y.Other))}getTotalRewardCount(){return this.noviceTrack.totalRewards+this.intermediateTrack.totalRewards+this.masterTrack.totalRewards}getTotalRewardsObtained(){return this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalRewardsRemaining(){return this.getTotalRewardCount()-this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalTrainingTrackBonusBreedXpFromFreeRaces(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=4&&(i+=this.noviceTrack.rewards[3].amount),this.noviceTrack.rewardsObtained>=8&&(i+=this.noviceTrack.rewards[7].amount),this.noviceTrack.rewardsObtained>=12&&(i+=this.noviceTrack.rewards[11].amount),this.intermediateTrack.rewardsObtained>=8&&(i+=this.intermediateTrack.rewards[7].amount),this.masterTrack.rewardsObtained>=1&&(i+=this.masterTrack.rewards[0].amount),i)}getTotalTrainingTrackBonusBreedXpFromCircuitRaces(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=6&&(i+=this.intermediateTrack.rewards[5].amount),i)}getTotalTrainingTrackBonusBreedXpFromTraining(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=2&&(i+=this.noviceTrack.rewards[1].amount),this.noviceTrack.rewardsObtained>=6&&(i+=this.noviceTrack.rewards[5].amount),this.noviceTrack.rewardsObtained>=10&&(i+=this.noviceTrack.rewards[9].amount),this.intermediateTrack.rewardsObtained>=2&&(i+=this.intermediateTrack.rewards[1].amount),this.intermediateTrack.rewardsObtained>=10&&(i+=this.intermediateTrack.rewards[9].amount),this.masterTrack.rewardsObtained>=5&&(i+=this.masterTrack.rewards[4].amount),i)}getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=4&&(i+=this.intermediateTrack.rewards[3].amount),this.intermediateTrack.rewardsObtained>=12&&(i+=this.intermediateTrack.rewards[11].amount),this.masterTrack.rewardsObtained>=2&&(i+=this.masterTrack.rewards[1].amount),this.masterTrack.rewardsObtained>=10&&(i+=this.masterTrack.rewards[9].amount),i)}getTotalTrainingTrackBonusTrainingTimeReduction(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=5&&(i+=this.intermediateTrack.rewards[4].amount),this.intermediateTrack.rewardsObtained>=11&&(i+=this.intermediateTrack.rewards[10].amount),this.masterTrack.rewardsObtained>=3&&(i+=this.masterTrack.rewards[2].amount),this.masterTrack.rewardsObtained>=7&&(i+=this.masterTrack.rewards[6].amount),this.masterTrack.rewardsObtained>=11&&(i+=this.masterTrack.rewards[10].amount),i)}getTotalTrainingTrackBonusTalents(){var i=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.masterTrack.rewardsObtained>=6&&(i+=this.masterTrack.rewards[5].amount),this.masterTrack.rewardsObtained>=12&&(i+=this.masterTrack.rewards[11].amount),i)}}Ge([et(()=>Ba),Xe("design:type",Ba)],Ml.prototype,"noviceTrack",void 0),Ge([et(()=>Ba),Xe("design:type",Ba)],Ml.prototype,"intermediateTrack",void 0),Ge([et(()=>Ba),Xe("design:type",Ba)],Ml.prototype,"masterTrack",void 0);class Ee{constructor(i,e,n,r,a,o){this.defaultStaminaModifier=5,this.defaultMaxSpeedModifier=.3,this.defaultAccelerationModifier=.1,this.defaultPowerModifier=1,this.defaultFocusModifier=5,this.defaultAdaptabilityModifier=5,this.defaultBurstDistanceModifier=1,this.diminishingReturnsDefaultStatThreshold=20,void 0!==i&&(this.topSpeed=i),void 0!==e&&(this.acceleration=e),void 0!==n&&(this.endurance=n),void 0!==r&&(this.power=r),void 0!==a&&(this.focus=a),void 0!==o&&(this.adaptability=o)}makeCopy(i){var e=new Ee;return e.topSpeed=i.topSpeed,e.acceleration=i.acceleration,e.endurance=i.endurance,e.power=i.power,e.focus=i.focus,e.adaptability=i.adaptability,e.stamina=i.stamina,e.maxSpeedMs=i.maxSpeedMs,e.accelerationMs=i.accelerationMs,e.powerMs=i.powerMs,e.focusMs=i.focusMs,e.adaptabilityMs=i.adaptabilityMs,e.burstChance=i.burstChance,e.burstDistance=i.burstDistance,e}calculateStamina(i,e,n){return null==i&&(i=this.defaultStaminaModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.endurance<=e?this.endurance*i*n:(e*i+(this.endurance-e)*(i*this.calculateDiminishingReturns(this.endurance-e)))*n}calculateMaxSpeed(i,e,n){return null==i&&(i=this.defaultMaxSpeedModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.topSpeed<=e?this.topSpeed*i*n:(e*i+(this.topSpeed-e)*(i*this.calculateDiminishingReturns(this.topSpeed-e)))*n}calculateTrueAcceleration(i,e,n){return null==i&&(i=this.defaultAccelerationModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.acceleration<=e?this.acceleration*i*n:(e*i+(this.acceleration-e)*(i*this.calculateDiminishingReturns(this.acceleration-e)))*n}calculateTruePower(i,e,n){return null==i&&(i=this.defaultPowerModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.power<=e?this.power*i*n:(e*i+(this.power-e)*(i*this.calculateDiminishingReturns(this.power-e)))*n}calculateTrueFocus(i,e,n){return null==i&&(i=this.defaultFocusModifier),null==n&&(n=1),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.focus<=e?this.focus*i*n:(e*i+(this.focus-e)*(i*this.calculateDiminishingReturns(this.focus-e)))*n}calculateTrueAdaptability(i,e,n){return null==i&&(i=this.defaultAdaptabilityModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==n&&(n=1),this.adaptability<=e?this.adaptability*i*n:(e*i+(this.adaptability-e)*(i*this.calculateDiminishingReturns(this.adaptability-e)))*n}calculateBurstChance(i,e,n){var r=this.focus,a=this.adaptability;return null!=e&&(r*=e/this.focusMs),null!=n&&(a*=n/this.adaptabilityMs),(a+r)*(1+i/4)/1e3*100}calculateBurstDistance(i,e,n){null==e&&(e=this.defaultBurstDistanceModifier);var r=this.power;return null!=n&&(r*=n/this.powerMs),r*(1+i/4)*e}topSpeedPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}accelerationPopover(i){return"Every stat point increases acceleration by "+i.toFixed(3)+"m/s up to diminishing returns."}endurancePopover(i){return"Every stat point increases stamina by "+i.toFixed(3)+" up to diminishing returns."}powerPopover(i){return"Every stat point increases ability efficiency by "+i.toFixed(3)+"% up to diminishing returns."}focusPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}adaptabilityPopover(i){return"Every stat point increases top speed by "+i.toFixed(3)+"m/s up to diminishing returns."}maxSpeedMsPopover(){return"This is the max speed this animal can go during a race."}accelerationMsPopover(){return"This is how quickly this animal will gain speed."}staminaPopover(){return"Your animal loses stamina while racing. If its stamina reaches 0, it will slow down for a period of time while its stamina recharges."}powerMsPopover(){return"This increases the efficiency of your animal's ability."}focusMsPopover(){return"This is the average distance your animal can go without losing focus, causing them to stop."}adaptabilityMsPopover(){return"This is the average distance your animal can go without stumbling, causing them to slow down."}burstChancePopover(){return"Every time you enter a path, you have the chance to enter burst mode. This is your chance per 1000 meters that you will burst. Increase by improving Focus and Adaptability."}burstDistancePopover(){return"This is how far you can go while bursting. Increase by improving Power."}calculateDiminishingReturns(i){return 1/i**.6}addCurrentRacingStats(i){this.maxSpeedMs+=i.topSpeed,this.accelerationMs+=i.acceleration,this.stamina+=i.endurance,this.powerMs+=i.power,this.focusMs+=i.focus,this.adaptabilityMs+=i.adaptability}subtractCurrentRacingStats(i){this.maxSpeedMs-=i.topSpeed,this.accelerationMs-=i.acceleration,this.stamina-=i.endurance,this.powerMs-=i.power,this.focusMs-=i.focus,this.adaptabilityMs-=i.adaptability}multiplyCurrentRacingStats(i){this.maxSpeedMs*=i.topSpeed,this.accelerationMs*=i.acceleration,this.stamina*=i.endurance,this.powerMs*=i.power,this.focusMs*=i.focus,this.adaptabilityMs*=i.adaptability}divideCurrentRacingStats(i){this.maxSpeedMs/=i.topSpeed,this.accelerationMs/=i.acceleration,this.stamina/=i.endurance,this.powerMs/=i.power,this.focusMs/=i.focus,this.adaptabilityMs/=i.adaptability}}var st=(()=>{return(t=st||(st={}))[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large",st;var t})();class Oo{constructor(){this.trainingTimeRemaining=7200,this.timeTrained=0,this.isAvailable=!1,this.purchasePrice=50}makeCopy(i){var e=new Oo;return e.affectedStatRatios=JSON.parse(JSON.stringify(i.affectedStatRatios)),e.facilitySize=JSON.parse(JSON.stringify(i.facilitySize)),e.isAvailable=JSON.parse(JSON.stringify(i.isAvailable)),e.purchasePrice=JSON.parse(JSON.stringify(i.purchasePrice)),e.statGain=JSON.parse(JSON.stringify(i.statGain)),e.timeToComplete=JSON.parse(JSON.stringify(i.timeToComplete)),e.timeTrained=JSON.parse(JSON.stringify(i.timeTrained)),e.trainingCourseType=JSON.parse(JSON.stringify(i.trainingCourseType)),e.trainingName=JSON.parse(JSON.stringify(i.trainingName)),e.trainingType=JSON.parse(JSON.stringify(i.trainingType)),e}getFacilitySize(){return st[this.facilitySize]}getStatGainDescription(){var i="";return this.affectedStatRatios.topSpeed>0&&(i+="+"+this.statGain*this.affectedStatRatios.topSpeed+" Speed\n"),this.affectedStatRatios.acceleration>0&&(i+="+"+this.statGain*this.affectedStatRatios.acceleration+" Acceleration\n"),this.affectedStatRatios.endurance>0&&(i+="+"+this.statGain*this.affectedStatRatios.endurance+" Endurance\n"),this.affectedStatRatios.focus>0&&(i+="+"+this.statGain*this.affectedStatRatios.focus+" Focus\n"),this.affectedStatRatios.power>0&&(i+="+"+this.statGain*this.affectedStatRatios.power+" Power\n"),this.affectedStatRatios.adaptability>0&&(i+="+"+this.statGain*this.affectedStatRatios.adaptability+" Adaptability\n"),i}}Ge([et(()=>Ee),Xe("design:type",Ee)],Oo.prototype,"affectedStatRatios",void 0);class Pt{constructor(){this.abilityLevel=1,this.abilityXp=0,this.abilityMaxXp=50}}var be=(()=>{return(t=be||(be={}))[t.topSpeed=0]="topSpeed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",be;var t})();class an{constructor(i,e,n,r,a){void 0!==i&&(this.traitName=i),void 0!==e&&(this.requiredLevel=e),void 0!==n&&(this.researchLevel=n),void 0!==r&&(this.positiveStatGain=r),void 0!==a&&(this.negativeStatGain=a)}getStatGainDescription(i){var e="",n="";return this.positiveStatGain===be.acceleration&&(e="Acceleration"),this.positiveStatGain===be.adaptability&&(e="Adaptability"),this.positiveStatGain===be.endurance&&(e="Endurance"),this.positiveStatGain===be.focus&&(e="Focus"),this.positiveStatGain===be.power&&(e="Power"),this.positiveStatGain===be.topSpeed&&(e="Speed"),this.negativeStatGain===be.acceleration&&(n="Acceleration"),this.negativeStatGain===be.adaptability&&(n="Adaptability"),this.negativeStatGain===be.endurance&&(n="Endurance"),this.negativeStatGain===be.focus&&(n="Focus"),this.negativeStatGain===be.power&&(n="Power"),this.negativeStatGain===be.topSpeed&&(n="Speed"),"+"+this.researchLevel+"% "+e+", -"+(this.researchLevel>i?i:this.researchLevel)+"% "+n}}class Ov{constructor(){this.maxSpeedModifier=1,this.accelerationModifier=1,this.staminaModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1}}class Nv{constructor(){this.bonusBreedXpGainFromLocalRaces=0,this.bonusBreedXpGainFromCircuitRaces=0,this.bonusBreedXpGainFromTraining=0,this.trainingTimeReduction=0,this.diminishingReturnsBonus=0,this.bonusTalents=0,this.bonusTrainingBreedXpCertificateCount=0,this.bonusCircuitBreedXpCertificateCount=0,this.bonusLocalBreedXpCertificateCount=0,this.bonusDiminishingReturnsCertificateCount=0,this.certificateUseCap=30}}class oo{constructor(){this.remainingBurstMeters=0,this.metersSinceLostFocus=0,this.recoveringStamina=!1,this.defaultRecoveringStaminaLength=150,this.currentRecoveringStaminaLength=this.defaultRecoveringStaminaLength,this.ranOutOfStamina=!1,this.lostFocus=!1,this.defaultLostFocusLength=60,this.currentLostFocusLength=this.defaultLostFocusLength,this.hasLostFocusDuringRace=!1,this.stumbled=!1,this.defaultStumbledLength=10,this.currentStumbledLength=this.defaultStumbledLength,this.relayEffects=[],this.burstCount=0,this.icyCurrentYAmount=0,this.icyCurrentDirectionUp=!0,this.headbandStumblePreventionCount=0,this.scaryMaskEffectOccurred=!1,this.firstAbilityUseEffectApplied=!1,this.velocityExceedsMaxSpeedDuringBurst=!1,this.velocityReachesMaxSpeedCount=0}makeCopy(){var i=new oo;return i.remainingBurstMeters=this.remainingBurstMeters,i.metersSinceLostFocus=this.metersSinceLostFocus,i.recoveringStamina=this.recoveringStamina,i.defaultRecoveringStaminaLength=this.defaultRecoveringStaminaLength,i.currentRecoveringStaminaLength=this.currentRecoveringStaminaLength,i.ranOutOfStamina=this.ranOutOfStamina,i.lostFocus=this.lostFocus,i.defaultLostFocusLength=this.defaultLostFocusLength,i.currentLostFocusLength=this.currentLostFocusLength,i.hasLostFocusDuringRace=this.hasLostFocusDuringRace,i.stumbled=this.stumbled,i.defaultStumbledLength=this.defaultStumbledLength,i.currentStumbledLength=this.currentStumbledLength,i.burstCount=this.burstCount,i.icyCurrentYAmount=this.icyCurrentYAmount,i.icyCurrentDirectionUp=this.icyCurrentDirectionUp,i.headbandStumblePreventionCount=this.headbandStumblePreventionCount,i.scaryMaskEffectOccurred=this.scaryMaskEffectOccurred,i.firstAbilityUseEffectApplied=this.firstAbilityUseEffectApplied,i.velocityExceedsMaxSpeedDuringBurst=this.velocityExceedsMaxSpeedDuringBurst,i.velocityReachesMaxSpeedCount=this.velocityReachesMaxSpeedCount,this.relayEffects=[],i}}var ct=(()=>{return(t=ct||(ct={}))[t.none=0]="none",t[t.sprint=1]="sprint",t[t.support=2]="support",t[t.longDistance=3]="longDistance",ct;var t})();class du{constructor(){this.talentTreeType=ct.none,this.row2RequiredPoints=5,this.row3RequiredPoints=10,this.row4RequiredPoints=15,this.column1Row1Points=0,this.column1Row2Points=0,this.column1Row3Points=0,this.column1Row4Points=0,this.column2Row1Points=0,this.column2Row2Points=0,this.column2Row3Points=0,this.column2Row4Points=0,this.column3Row1Points=0,this.column3Row2Points=0,this.column3Row3Points=0,this.column3Row4Points=0}makeCopy(i){var e=new du;return e.talentTreeType=i.talentTreeType,e.column1Row1Points=i.column1Row1Points,e.column1Row2Points=i.column1Row2Points,e.column1Row3Points=i.column1Row3Points,e.column1Row4Points=i.column1Row4Points,e.column2Row1Points=i.column2Row1Points,e.column2Row2Points=i.column2Row2Points,e.column2Row3Points=i.column2Row3Points,e.column2Row4Points=i.column2Row4Points,e.column3Row1Points=i.column3Row1Points,e.column3Row2Points=i.column3Row2Points,e.column3Row3Points=i.column3Row3Points,e.column3Row4Points=i.column3Row4Points,e}getTalentPointsByColumn(i){return 0===i?this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points:1===i?this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points:2===i?this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points:0}getTalentPointsByRowColumn(i,e){return 0===i&&0===e?this.column1Row1Points:1===i&&0===e?this.column1Row2Points:2===i&&0===e?this.column1Row3Points:3===i&&0===e?this.column1Row4Points:0===i&&1===e?this.column2Row1Points:1===i&&1===e?this.column2Row2Points:2===i&&1===e?this.column2Row3Points:3===i&&1===e?this.column2Row4Points:0===i&&2===e?this.column3Row1Points:1===i&&2===e?this.column3Row2Points:2===i&&2===e?this.column3Row3Points:3===i&&2===e?this.column3Row4Points:0}getTotalSpentPoints(){return this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points+this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points+this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points}spendTalentPoint(i,e){0===i&&0===e&&(this.column1Row1Points+=1),1===i&&0===e&&(this.column1Row2Points+=1),2===i&&0===e&&(this.column1Row3Points+=1),3===i&&0===e&&(this.column1Row4Points+=1),0===i&&1===e&&(this.column2Row1Points+=1),1===i&&1===e&&(this.column2Row2Points+=1),2===i&&1===e&&(this.column2Row3Points+=1),3===i&&1===e&&(this.column2Row4Points+=1),0===i&&2===e&&(this.column3Row1Points+=1),1===i&&2===e&&(this.column3Row2Points+=1),2===i&&2===e&&(this.column3Row3Points+=1),3===i&&2===e&&(this.column3Row4Points+=1)}}class Vv{constructor(){this.successfulCoachingAttempts=0}}class wt{constructor(){this.incubatorStatUpgrades=new Ov,this.allTrainingTracks=new Ml,this.miscStats=new Nv,this.trackedAnimalStats=new Vv,this.talentTree=new du,this.breedLevel=1,this.breedGaugeXp=0,this.breedGaugeMax=200,this.totalRacesRun=0,this.equippedOrb=null,this.canEquipOrb=!1,this.canTrain=!0,this.isAvailable=!1,this.availableAbilities=[]}makeCopy(i){var e=new wt;return e.name=i.name,e.type=i.type,e.raceCourseType=i.raceCourseType,e.currentStats=i.currentStats.makeCopy(i.currentStats),e.baseStats=i.baseStats.makeCopy(i.baseStats),e.talentTree=i.talentTree.makeCopy(i.talentTree),e.isAvailable=i.isAvailable,e.ability=i.ability,e.raceVariables=new oo,e.equippedItem=i.equippedItem,e.equippedOrb=i.equippedOrb,e.incubatorStatUpgrades=i.incubatorStatUpgrades,e.breedLevel=i.breedLevel,e.trackedAnimalStats=i.trackedAnimalStats,e.trait=i.trait,e}viewAbility(){return this.ability.name}getAbilityUseUpdateText(i,e=""){return i+" uses "+this.ability.name+e+"."}useAbility(){}getAnimalType(){return X[this.type]}getRaceCourseType(){return z[this.raceCourseType]}getTraitName(){return null==this.trait||""===this.trait.traitName?"None":this.trait.traitName}getEquippedItemName(){if(null!=this.equippedItem)return this.equippedItem.name}getCourseTypeClass(){return this.raceCourseType===z.Flatland?"flatlandColor":this.raceCourseType===z.Mountain?"mountainColor":this.raceCourseType===z.Ocean?"waterColor":this.raceCourseType===z.Tundra?"tundraColor":this.raceCourseType===z.Volcanic?"volcanicColor":""}increaseStatsFromCurrentTraining(){null==this.currentTraining||null==this.currentStats||(this.currentStats.topSpeed+=this.currentTraining.affectedStatRatios.topSpeed*this.currentTraining.statGain,this.currentStats.acceleration+=this.currentTraining.affectedStatRatios.acceleration*this.currentTraining.statGain,this.currentStats.endurance+=this.currentTraining.affectedStatRatios.endurance*this.currentTraining.statGain,this.currentStats.power+=this.currentTraining.affectedStatRatios.power*this.currentTraining.statGain,this.currentStats.focus+=this.currentTraining.affectedStatRatios.focus*this.currentTraining.statGain,this.currentStats.adaptability+=this.currentTraining.affectedStatRatios.adaptability*this.currentTraining.statGain)}increaseStats(i){null==i||null==this.currentStats||(this.currentStats.topSpeed+=Number(i.topSpeed),this.currentStats.acceleration+=Number(i.acceleration),this.currentStats.stamina+=Number(i.stamina),this.currentStats.endurance+=Number(i.endurance),this.currentStats.power+=Number(i.power),this.currentStats.focus+=Number(i.focus),this.currentStats.adaptability+=Number(i.adaptability))}}Ge([et(()=>Ee),Xe("design:type",Ee)],wt.prototype,"currentStats",void 0),Ge([et(()=>Ee),Xe("design:type",Ee)],wt.prototype,"baseStats",void 0),Ge([et(()=>Oo),Xe("design:type",Object)],wt.prototype,"currentTraining",void 0),Ge([et(()=>Oo),Xe("design:type",Object)],wt.prototype,"queuedTraining",void 0),Ge([et(()=>Pt),Xe("design:type",Pt)],wt.prototype,"ability",void 0),Ge([et(()=>oo),Xe("design:type",oo)],wt.prototype,"raceVariables",void 0),Ge([et(()=>pe),Xe("design:type",Object)],wt.prototype,"equippedItem",void 0),Ge([et(()=>pe),Xe("design:type",Object)],wt.prototype,"equippedOrb",void 0),Ge([et(()=>Ov),Xe("design:type",Ov)],wt.prototype,"incubatorStatUpgrades",void 0),Ge([et(()=>Ml),Xe("design:type",Ml)],wt.prototype,"allTrainingTracks",void 0),Ge([et(()=>Nv),Xe("design:type",Nv)],wt.prototype,"miscStats",void 0),Ge([et(()=>Vv),Xe("design:type",Vv)],wt.prototype,"trackedAnimalStats",void 0),Ge([et(()=>Pt),Xe("design:type",Array)],wt.prototype,"availableAbilities",void 0),Ge([et(()=>an),Xe("design:type",an)],wt.prototype,"trait",void 0),Ge([et(()=>du),Xe("design:type",du)],wt.prototype,"talentTree",void 0);class p4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Horse,this.raceCourseType=z.Flatland,this.ability=new Pt,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Second Wind",this.ability.description="Second Wind",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=60,i.oneTimeEffect=!0,i.name="Inspiration",i.description="Inspiration",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.cooldown=5,e.efficiency=27,e.oneTimeEffect=!1,e.name="Pacemaker",e.description="Pacemaker",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class g4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Cheetah,this.raceCourseType=z.Flatland,this.ability=new Pt,this.ability.cooldown=6,this.ability.efficiency=35,this.ability.oneTimeEffect=!1,this.ability.name="Sprint",this.ability.description="Sprint",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=.5,i.oneTimeEffect=!1,i.name="Giving Chase",i.description="Giving Chase",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="On The Hunt",e.description="On The Hunt",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class m4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Hare,this.raceCourseType=z.Flatland,this.ability=new Pt,this.ability.efficiency=45,this.ability.oneTimeEffect=!0,this.ability.name="Prey Instinct",this.ability.description="Prey Instinct",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.cooldown=5,i.efficiency=40,i.oneTimeEffect=!1,i.name="Awareness",i.description="Awareness",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=130,e.oneTimeEffect=!0,e.name="Nap",e.description="Nap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class v4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Monkey,this.raceCourseType=z.Mountain,this.ability=new Pt,this.ability.cooldown=11,this.ability.efficiency=6,this.ability.name="Landslide",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=60,i.oneTimeEffect=!0,i.name="Frenzy",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=70,e.cooldown=0,e.oneTimeEffect=!0,e.name="Leap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=30,this.availableAbilities.push(e)}}class b4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Goat,this.raceCourseType=z.Mountain,this.ability=new Pt,this.ability.efficiency=.5,this.ability.oneTimeEffect=!1,this.ability.name="Sure-footed",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=.25,i.oneTimeEffect=!1,i.name="Deep Breathing",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="In The Rhythm",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=15,this.availableAbilities.push(e)}}class _4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Gecko,this.raceCourseType=z.Mountain,this.ability=new Pt,this.ability.cooldown=5,this.ability.efficiency=55,this.ability.oneTimeEffect=!1,this.ability.name="Sticky",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=.2,i.oneTimeEffect=!1,i.name="Night Vision",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=38,e.oneTimeEffect=!0,e.name="Camouflage",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class y4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Dolphin,this.raceCourseType=z.Ocean,this.ability=new Pt,this.ability.cooldown=6,this.ability.efficiency=84,this.ability.oneTimeEffect=!1,this.ability.name="Echolocation",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=50,i.oneTimeEffect=!0,i.name="Navigator",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=70,e.oneTimeEffect=!0,e.name="Flowing Current",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class C4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Shark,this.raceCourseType=z.Ocean,this.ability=new Pt,this.ability.efficiency=60,this.ability.oneTimeEffect=!0,this.ability.name="Apex Predator",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=35,i.oneTimeEffect=!0,i.name="Feeding Frenzy",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=.1,e.oneTimeEffect=!0,e.name="Blood In The Water",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class w4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Octopus,this.raceCourseType=z.Ocean,this.ability=new Pt,this.ability.cooldown=5,this.ability.efficiency=17,this.ability.totalFrames=15,this.ability.oneTimeEffect=!1,this.ability.name="Propulsion",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=1,i.oneTimeEffect=!1,i.name="Buried Treasure",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=2,e.oneTimeEffect=!0,e.name="Big Brain",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class S4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Penguin,this.raceCourseType=z.Tundra,this.ability=new Pt,this.ability.efficiency=65,this.ability.cooldown=8,this.ability.oneTimeEffect=!1,this.ability.name="Careful Toboggan",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=4,i.oneTimeEffect=!1,i.name="Wild Toboggan",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="Quick Toboggan",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class T4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Caribou,this.raceCourseType=z.Tundra,this.ability=new Pt,this.ability.efficiency=.5,this.ability.oneTimeEffect=!0,this.ability.name="Herd Mentality",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=50,i.cooldown=7,i.oneTimeEffect=!1,i.name="Great Migration",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=.05,e.oneTimeEffect=!0,e.name="Special Delivery",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class D4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Salamander,this.raceCourseType=z.Volcanic,this.ability=new Pt,this.ability.cooldown=7,this.ability.efficiency=70,this.ability.oneTimeEffect=!1,this.ability.name="Cold Blooded",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.cooldown=6,i.efficiency=50,i.oneTimeEffect=!1,i.name="Burrow",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.cooldown=10,e.efficiency=25,e.oneTimeEffect=!1,e.name="Heat Up",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class R4 extends wt{constructor(){super(),this.baseStats=new Ee(5,5,5,5,5,5),this.currentStats=new Ee(5,5,5,5,5,5),this.type=X.Fox,this.raceCourseType=z.Volcanic,this.ability=new Pt,this.ability.cooldown=5,this.ability.efficiency=60,this.ability.oneTimeEffect=!1,this.ability.name="Trickster",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var i=new Pt;i.efficiency=1.5,i.oneTimeEffect=!1,i.name="Fleeting Speed",i.isAbilityPurchased=!1,i.purchasePrice=1e3,this.availableAbilities.push(i);var e=new Pt;e.efficiency=65,e.oneTimeEffect=!0,e.name="Nine Tails",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class Qh{constructor(){this.selectedAnimals=[],this.courseTypeOrder=[],this.isCourseOrderActive=!1,this.autoRunFreeRace=!1,this.isEventDeck=!1}}Ge([et(()=>wt),Xe("design:type",Array)],Qh.prototype,"selectedAnimals",void 0);class Fv{constructor(){this.maxSpeedIncrease=1.1,this.accelerationRateIncrease=1.1,this.staminaIncrease=1.1,this.powerEfficiencyIncrease=1.1,this.focusDistanceIncrease=1.1,this.adaptabilityDistanceIncrease=1.1}}class x4{constructor(){this.upgradePrice=[],this.upgradedStatGain=new Ee(1,1,1,1,1,1),this.barnLevel=0,this.specializationLevel=0,this.currentDeltaTime=0}}class Bv{constructor(){this.barnUpgrades=new x4}getSize(){return st[this.size]}}class hu{constructor(){this.timeTrained=0,this.timeToComplete=120}}Ge([et(()=>wt),Xe("design:type",Object)],hu.prototype,"assignedAnimal",void 0),Ge([et(()=>an),Xe("design:type",Object)],hu.prototype,"assignedTrait",void 0);class fD{constructor(i){this.exhaustionStatReduction=1,this.morale=1,this.associatedAnimalType=i,this.isCurrentlyRacing=!1,this.isSetToRelay=!1}}class Lv{constructor(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.deepBreathingUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.bigBrainUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.specialDeliveryUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0,this.onTheHuntUseCap=25,this.sureFootedUseCap=25,this.deepBreathingUseCap=25,this.nightVisionUseCap=25,this.bigBrainUseCap=5,this.quickTobogganUseCap=25,this.herdMentalityUseCap=1,this.specialDeliveryUseCap=25}resetUseCounts(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0}}class Kh{constructor(){this.nineTailsBuffs=[],this.relayEffects=[],this.mountainEndingY=0,this.deepBreathingStaminaGain=0,this.longDistanceTalentIncreaseAccelerationWithLowVelocity=!1,this.maxSpeedFloor=0,this.raceVariables=new oo}}Ge([et(()=>oo),Xe("design:type",oo)],Kh.prototype,"raceVariables",void 0);class K{constructor(i,e){void 0!==i&&(this.value=i),void 0!==e&&(this.text=e)}}class Zh{constructor(){this.raceUpdates=[],this.beatMoneyMark=!1,this.distanceCovered=0}addRaceUpdate(i,e){var n=new K;n.text=e,n.value=i,this.raceUpdates.push(n)}}var He=(()=>{return(t=He||(He={}))[t.Sunny=0]="Sunny",t[t.Rainy=1]="Rainy",t[t.Stormy=2]="Stormy",t[t.Snowfall=3]="Snowfall",t[t.Maelstrom=4]="Maelstrom",t[t.Hailstorm=5]="Hailstorm",t[t.Ashfall=6]="Ashfall",t[t.Torrid=7]="Torrid",He;var t})(),qe=(()=>{return(t=qe||(qe={}))[t.Regular=0]="Regular",t[t.S=1]="S",t[t.Bumps=2]="Bumps",t[t.Crevasse=3]="Crevasse",t[t.Gaps=4]="Gaps",t[t.Waves=5]="Waves",t[t.Dive=6]="Dive",t[t.Cavern=7]="Cavern",t[t.Hills=8]="Hills",t[t.FirstRegular=9]="FirstRegular",t[t.LastRegular=10]="LastRegular",t[t.SteppingStones=11]="SteppingStones",qe;var t})(),Ar=(()=>{return(t=Ar||(Ar={}))[t.None=0]="None",t[t.Low=.8]="Low",t[t.Medium=.6]="Medium",t[t.High=.4]="High",Ar;var t})();class Jh{constructor(i){this.didAnimalStumble=!1,this.didAnimalLoseFocus=!1,this.checkedForBurst=!1,this.checkedForMiniBurst=!1,this.checkedForNineTails=!1,null!=i&&this.setStumbleFields(),this.driftAmount=0,this.isSpecialPath=!1}setStumbleFields(){this.currentStumbleOpportunity=0,this.routeDesign===qe.Regular&&(this.stumbleSeverity=Ar.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===qe.S&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.Low,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===qe.Bumps&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.Medium,this.frequencyOfStumble=20,this.stumbleOpportunities=8),this.routeDesign===qe.Crevasse&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.High,this.frequencyOfStumble=80,this.stumbleOpportunities=6),this.routeDesign===qe.Gaps&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.Medium,this.frequencyOfStumble=175,this.stumbleOpportunities=4),this.routeDesign===qe.Waves&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.Medium,this.frequencyOfStumble=50,this.stumbleOpportunities=6),this.routeDesign===qe.Dive&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.High,this.frequencyOfStumble=200,this.stumbleOpportunities=2),this.routeDesign===qe.Cavern&&(this.isSpecialPath=!0,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===qe.Hills&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.High,this.frequencyOfStumble=120,this.stumbleOpportunities=3,this.frequencyOfDrift=250),(this.routeDesign===qe.FirstRegular||this.routeDesign===qe.LastRegular)&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.Medium,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===qe.SteppingStones&&(this.isSpecialPath=!0,this.stumbleSeverity=Ar.High,this.frequencyOfStumble=60,this.stumbleOpportunities=10)}}class ei{constructor(i){var e=.8,r=1.2;this.maxSpeedModifier=1,this.accelerationModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1,null!==i&&(this.terrainType=i,i===He.Sunny&&(this.staminaModifier=1.5,this.maxSpeedModifier=r),i===He.Rainy&&(this.adaptabilityModifier=e,this.focusModifier=r),i===He.Stormy&&(this.focusModifier=e,this.accelerationModifier=r),i===He.Maelstrom&&(this.accelerationModifier=e,this.maxSpeedModifier=e,this.adaptabilityModifier=r),i===He.Hailstorm&&(this.focusModifier=e,this.adaptabilityModifier=e,this.maxSpeedModifier=e),i===He.Ashfall&&(this.staminaModifier=r,this.accelerationModifier=e,this.powerModifier=e),i===He.Snowfall&&(this.staminaModifier=e,this.maxSpeedModifier=e,this.accelerationModifier=e),i===He.Torrid&&(this.powerModifier=e,this.maxSpeedModifier=e,this.focusModifier=r))}getTerrainType(){return He[this.terrainType]}}class In{constructor(i,e){this.legComplete=!1,null!=i&&(this.courseType=i),void 0!==e&&null!=e&&(this.distance=e),this.pathData=[]}getCourseTypeName(){return z[this.courseType]}getCourseTypeClass(){return this.courseType===z.Flatland?"flatlandColor":this.courseType===z.Mountain?"mountainColor":this.courseType===z.Ocean?"waterColor":this.courseType===z.Tundra?"tundraColor":this.courseType===z.Volcanic?"volcanicColor":""}getTerrainName(){return null==this.terrain?"":He[this.terrain.terrainType]}}Ge([et(()=>Jh),Xe("design:type",Array)],In.prototype,"pathData",void 0),Ge([et(()=>ei),Xe("design:type",ei)],In.prototype,"terrain",void 0);class ef{constructor(){this.distanceCoveredByFrame=[],this.velocityByFrame=[],this.timeToCompleteByFrame=[],this.maxSpeedByFrame=[],this.staminaPercentByFrame=[],this.racerEffectByFrame=[],this.yAdjustmentByFrame=[],this.lavaFallPercentByFrame=[],this.racePositionByFrame=[]}}class gi{constructor(i,e,n,r,a,o,s,l,c,u,d){this.raceLegs=i,this.requiredRank=e,this.isCircuitRace=n,this.raceId=r,this.length=a,this.timeToComplete=o,this.raceUI=new ef,this.circuitIncreaseReward=["",""],null!=s&&(this.rewards=s),null!=l&&(this.localRaceType=l),null!=c&&(this.trackRaceType=c),null!=u&&(this.raceType=u),null!=d&&(this.eventRaceType=d)}makeCopy(i){var e=new gi(i.raceLegs,i.requiredRank,i.isCircuitRace,i.raceId,i.length,i.timeToComplete,i.rewards,i.localRaceType,i.trackRaceType,i.raceType,i.eventRaceType);return i.raceUI.velocityByFrame.length>0&&i.raceUI.velocityByFrame.forEach(n=>{e.raceUI.velocityByFrame.push(n)}),i.raceUI.staminaPercentByFrame.length>0&&i.raceUI.staminaPercentByFrame.forEach(n=>{e.raceUI.staminaPercentByFrame.push(n)}),e}reduceExportSize(){this.raceUI=new ef}}Ge([et(()=>In),Xe("design:type",Array)],gi.prototype,"raceLegs",void 0),Ge([et(()=>pe),Xe("design:type",Array)],gi.prototype,"rewards",void 0),Ge([et(()=>ef),Xe("design:type",ef)],gi.prototype,"raceUI",void 0);class tf{constructor(){this.affectsAllRacers=!1}makeCopy(){var i=new tf;return i.isMultiplicative=this.isMultiplicative,i.remainingRelayMeters=this.remainingRelayMeters,i.relayAffectedStatRatios=new Ee(this.relayAffectedStatRatios.topSpeed,this.relayAffectedStatRatios.acceleration,this.relayAffectedStatRatios.endurance,this.relayAffectedStatRatios.power,this.relayAffectedStatRatios.focus,this.relayAffectedStatRatios.adaptability),i.effectType=this.effectType,i.additionalValue=this.additionalValue,i.affectsAllRacers=this.affectsAllRacers,i}}class Bi{constructor(){this.isRunning=!1,this.initialSetupComplete=!1,this.animalAlreadyPrepped=!1,this.mountainEndingY=0,this.mountainClimbPercent=0,this.exhaustionMoraleUpdateCounter=0,this.weatherClusterUpdateCounter=0,this.weekStartDay=2,this.weekStartHour=9,this.weekEndDay=4,this.weekEndHour=12,this.weekendStartDay=5,this.weekendStartHour=20,this.weekendEndDay=0,this.weekendEndHour=23,this.distanceCovered=0,this.grandPrixTimeLength=183600,this.segmentTime=180,this.segmentTimeCounter=0,this.overallTimeCounter=0,this.rank="Z",this.animalData=[],this.queuedRelayEffects=[],this.bonusTime=0,this.remainingRewards=0,this.totalRewards=0,this.coinRewardsObtained=0,this.renownRewardsObtained=0,this.tokenRewardsObtained=0,this.isGrandPrixCompleted=!1,this.remainingEventRaceTime=0,this.eventAbilityData=new Lv,this.isCatchingUp=!1,this.isLoading=!1}}Ge([et(()=>Lv),Xe("design:type",Lv)],Bi.prototype,"eventAbilityData",void 0),Ge([et(()=>ei),Xe("design:type",ei)],Bi.prototype,"raceTerrain",void 0),Ge([et(()=>gi),Xe("design:type",gi)],Bi.prototype,"currentRaceSegment",void 0),Ge([et(()=>Zh),Xe("design:type",Zh)],Bi.prototype,"currentRaceSegmentResult",void 0),Ge([et(()=>gi),Xe("design:type",gi)],Bi.prototype,"nextRaceSegment",void 0),Ge([et(()=>gi),Xe("design:type",gi)],Bi.prototype,"previousRaceSegment",void 0),Ge([et(()=>Kh),Xe("design:type",Kh)],Bi.prototype,"previousRaceSegmentData",void 0),Ge([et(()=>fD),Xe("design:type",Array)],Bi.prototype,"animalData",void 0),Ge([et(()=>tf),Xe("design:type",Array)],Bi.prototype,"queuedRelayEffects",void 0);class pD{}class nf{constructor(){this.rewards=[]}}Ge([et(()=>Date),Xe("design:type",Date)],nf.prototype,"expirationDate",void 0),Ge([et(()=>Oo),Xe("design:type",Array)],nf.prototype,"rewards",void 0);class tt{constructor(){this.isAvailable=!0,this.amountPurchased=0,this.totalShopQuantity=1,this.quantityMultiplier=1,this.numberPurchasing=1,this.purchasePrice=[],this.basePurchasePrice=[]}}class Qr{}Ge([et(()=>tt),Xe("design:type",Array)],Qr.prototype,"itemList",void 0);class Uv{constructor(){this.tutorialCompleted=!1,this.currentTutorialId=1,this.showTutorial=!1,this.showTrainingTrackTutorial=!0,this.showCoachingTutorial=!0}}class rf{constructor(){this.isNewSpecialRaceAvailable=!1,this.isEventRaceNowActive=!1}}class Hv{constructor(){this.settings=[]}get(i){var e=this.settings.find(n=>n[0]===i);return null!=e?e[1]:""}set(i,e){var n=this.settings.find(r=>r[0]===i);null==n?this.settings.push([i,e]):n[1]=e}}class Gv{constructor(){this.totalRaces=0,this.totalBreeds=0,this.totalMetersRaced=0,this.mostUsedAnimal="",this.mostRacedCourseType="",this.highestMaxSpeed="",this.highestAccelerationRate="",this.highestStamina="",this.highestPowerEfficiency="",this.highestFocusDistance="",this.highestAdaptabilityDistance=""}}class jv{constructor(){this.unlockables=[]}get(i){var e=this.unlockables.find(n=>n[0]===i);return null!=e&&e[1]}set(i,e){var n=this.unlockables.find(r=>r[0]===i);null==n?this.unlockables.push([i,e]):n[1]=e}}class Ln{constructor(i){this.userIsRacing=!1,null!=i&&(this.animals=i.animals,this.barns=i.barns,this.trainingOptions=i.trainingOptions,this.circuitRaces=i.circuitRaces,this.circuitRank=i.circuitRank,this.localRaces=i.localRaces,this.resources=i.resources,this.modifiers=i.modifiers,this.shop=i.shop,this.tokenShop=i.tokenShop,this.animalDecks=i.animalDecks,this.incubator=i.incubator,this.trackedStats=i.trackedStats,this.pinnacle=i.pinnacle,this.orbStats=i.orbStats,this.redeemedCodes=i.redeemedCodes,this.eventRaceData=i.eventRaceData,this.notifications=i.notifications,this.previousEventRewards=[],this.nationalRaceCountdown=0,this.autoFreeRaceCounter=0,this.freeRaceCounter=0,this.freeRaceTimePeriodCounter=0)}}Ge([et(()=>wt),Xe("design:type",Array)],Ln.prototype,"animals",void 0),Ge([et(()=>Bv),Xe("design:type",Array)],Ln.prototype,"barns",void 0),Ge([et(()=>Oo),Xe("design:type",Array)],Ln.prototype,"trainingOptions",void 0),Ge([et(()=>gi),Xe("design:type",Array)],Ln.prototype,"circuitRaces",void 0),Ge([et(()=>gi),Xe("design:type",Array)],Ln.prototype,"localRaces",void 0),Ge([et(()=>pD),Xe("design:type",pD)],Ln.prototype,"pinnacle",void 0),Ge([et(()=>pe),Xe("design:type",Array)],Ln.prototype,"resources",void 0),Ge([et(()=>K),Xe("design:type",Array)],Ln.prototype,"modifiers",void 0),Ge([et(()=>Qr),Xe("design:type",Array)],Ln.prototype,"shop",void 0),Ge([et(()=>Qr),Xe("design:type",Array)],Ln.prototype,"tokenShop",void 0),Ge([et(()=>Qh),Xe("design:type",Array)],Ln.prototype,"animalDecks",void 0),Ge([et(()=>Hv),Xe("design:type",Hv)],Ln.prototype,"settings",void 0),Ge([et(()=>jv),Xe("design:type",jv)],Ln.prototype,"unlockables",void 0),Ge([et(()=>hu),Xe("design:type",hu)],Ln.prototype,"incubator",void 0),Ge([et(()=>Gv),Xe("design:type",Gv)],Ln.prototype,"trackedStats",void 0),Ge([et(()=>Fv),Xe("design:type",Fv)],Ln.prototype,"orbStats",void 0),Ge([et(()=>Uv),Xe("design:type",Uv)],Ln.prototype,"tutorials",void 0),Ge([et(()=>nf),Xe("design:type",Array)],Ln.prototype,"redeemedCodes",void 0),Ge([et(()=>Bi),Xe("design:type",Bi)],Ln.prototype,"eventRaceData",void 0),Ge([et(()=>pe),Xe("design:type",Array)],Ln.prototype,"previousEventRewards",void 0),Ge([et(()=>rf),Xe("design:type",rf)],Ln.prototype,"notifications",void 0);var Ne=(()=>{return(t=Ne||(Ne={}))[t.ShortTrackRunning=0]="ShortTrackRunning",t[t.Sprints=1]="Sprints",t[t.TrailRunning=2]="TrailRunning",t[t.MoveLogs=3]="MoveLogs",t[t.Footwork=4]="Footwork",t[t.PracticeCommands=5]="PracticeCommands",t[t.ScentTraining=6]="ScentTraining",t[t.SmallWagonTow=7]="SmallWagonTow",t[t.Sidestep=8]="Sidestep",t[t.MediumTrackRunning=9]="MediumTrackRunning",t[t.UphillRun=10]="UphillRun",t[t.Puzzles=11]="Puzzles",t[t.MoveRocks=12]="MoveRocks",t[t.LateralVerticalDrill=13]="LateralVerticalDrill",t[t.DodgeBall=14]="DodgeBall",t[t.BurstPractice=15]="BurstPractice",t[t.Acrobatics=16]="Acrobatics",t[t.LongTrackRunning=17]="LongTrackRunning",t[t.VehicleTow=18]="VehicleTow",t[t.LogJump=19]="LogJump",t[t.Meditation=20]="Meditation",t[t.WindSprints=21]="WindSprints",t[t.GreenwayHike=22]="GreenwayHike",t[t.Marathon=23]="Marathon",t[t.AgilityCourse=24]="AgilityCourse",Ne;var t})(),gD=q(340);let Li=(()=>{class t{constructor(e){this.sanitizer=e}getRandomSeededInteger(e,n,r="seeded"){var a=gD(r);return Math.round(a()*(n-e)+e)}getRandomInteger(e,n){return Math.round(Math.random()*(n-e)+e)}getRandomSeededNumber(e,n,r="seeded"){return gD(r)()*(n-e)+e}getRandomNumber(e,n){return Math.random()*(n-e)+e}getRandomNumberPercent(){return 99*Math.random()+1}getNumericValueOfCircuitRank(e){var n=0;return e.length>1&&(n=26*(e.length-1)),n+(91-e.charCodeAt(e.length-1))}getCircuitRankFromNumericValue(e){for(var n="";e>26;)n+="A",e-=26;return n+String.fromCharCode(91-e)}getHoursRemainingFromSeconds(e){return Math.floor(e/3600)}getMinutesLeftInHourRemainingFromSeconds(e){var n=Math.floor(e/3600);return Math.floor(e/60-60*n)}getSecondsLeftInMinuteRemainingFromSeconds(e){var n=Math.floor(e/3600);return e-60*n*60-60*Math.floor(e/60-60*n)}convertSecondsToHHMMSS(e){var n=Math.floor(e/3600),r=Math.floor(e/60-60*n),a=e-60*n*60-60*r,o=n.toString(),s=r.toString(),l=Math.floor(a).toString();return n<10&&(o=n<1||n>59?"00":String(o).padStart(2,"0")),r<10&&(s=r<1||r>59?"00":String(s).padStart(2,"0")),a<10&&(l=a<1||a>59?"00":String(l).padStart(2,"0")),o+":"+s+":"+l}getClosestWholeNumber(e,n){return n/Math.floor(n/e)}getDayOfWeekFromNumber(e){return e<=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].length-1?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]:""}getAmPmTimeFromHours(e){return 0===e?"12:00 AM":e<12?e+":00 AM":12===e?"12:00 PM":e-12+":00 PM"}get24HourFormat(e){return e<=9?"0"+e+":00":e+":00"}convertDegreesToRadians(e){return e*(Math.PI/180)}getSanitizedHtml(e){return this.sanitizer.sanitize(Kt.HTML,this.sanitizer.bypassSecurityTrustHtml(e))}shadeColor(e,n){return"#"+e.replace(/^#/,"").replace(/../g,a=>("0"+Math.min(255,Math.max(0,parseInt(a,16)+n)).toString(16)).substr(-2))}getProperNoun(e){return e.charAt(0).toUpperCase()+e.slice(1)}condenseList(e){var n=[];return e.forEach(r=>{if(n.some(o=>o.name===r.name))n.find(o=>o.name===r.name).amount+=r.amount;else{var a=r.makeCopy(r);n.push(a)}}),n}ordinalSuffixOf(e){var n=e%10,r=e%100;return 1==n&&11!=r?e+"st":2==n&&12!=r?e+"nd":3==n&&13!=r?e+"rd":e+"th"}}return t.\u0275fac=function(e){return new(e||t)(Ve(Mo))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),zv=(()=>{class t{constructor(){}initializeShop(){}initializeResource(e,n,r){return new pe(e,n,r)}initializeTraining(e){var n=new Oo;return e===Ne.ShortTrackRunning&&(n.trainingName="Short Track Running",n.isAvailable=!0,n.facilitySize=st.Small,n.timeToComplete=30,n.trainingType=Ne.ShortTrackRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(1,0,0,0,0,0)),e===Ne.Sprints&&(n.trainingName="Sprints",n.isAvailable=!0,n.facilitySize=st.Small,n.timeToComplete=20,n.trainingType=Ne.Sprints,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,1,0,0,0,0)),e===Ne.TrailRunning&&(n.trainingName="Trail Running",n.isAvailable=!0,n.facilitySize=st.Small,n.timeToComplete=45,n.trainingType=Ne.TrailRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(.5,0,1,0,0,0)),e===Ne.MoveLogs&&(n.trainingName="Move Logs",n.isAvailable=!1,n.facilitySize=st.Small,n.timeToComplete=30,n.trainingType=Ne.MoveLogs,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,1,0,0)),e===Ne.Footwork&&(n.trainingName="Footwork",n.isAvailable=!1,n.facilitySize=st.Small,n.timeToComplete=45,n.trainingType=Ne.Footwork,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,.5,0,0,0,1)),e===Ne.PracticeCommands&&(n.trainingName="Practice Commands",n.isAvailable=!1,n.facilitySize=st.Small,n.timeToComplete=40,n.trainingType=Ne.PracticeCommands,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,0,1,.25)),e===Ne.ScentTraining&&(n.trainingName="Scent Training",n.isAvailable=!1,n.facilitySize=st.Small,n.timeToComplete=45,n.trainingType=Ne.ScentTraining,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,.5,0,1,0)),e===Ne.SmallWagonTow&&(n.trainingName="Small Wagon Tow",n.isAvailable=!1,n.facilitySize=st.Small,n.timeToComplete=45,n.trainingType=Ne.SmallWagonTow,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(.25,0,0,1.5,0,0)),e===Ne.Sidestep&&(n.trainingName="Sidestep",n.isAvailable=!1,n.facilitySize=st.Small,n.timeToComplete=35,n.trainingType=Ne.Sidestep,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,2,0,0,0,0)),e===Ne.MediumTrackRunning&&(n.trainingName="Medium Track Running",n.isAvailable=!1,n.facilitySize=st.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Ne.MediumTrackRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(2,0,1,0,0,0)),e===Ne.UphillRun&&(n.trainingName="Uphill Run",n.isAvailable=!1,n.facilitySize=st.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ne.UphillRun,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,1,2,0,0,0)),e===Ne.Puzzles&&(n.trainingName="Puzzles",n.isAvailable=!1,n.facilitySize=st.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Ne.Puzzles,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,0,2,1)),e===Ne.MoveRocks&&(n.trainingName="Move Rocks",n.isAvailable=!1,n.facilitySize=st.Medium,n.purchasePrice*=4,n.timeToComplete=60,n.trainingType=Ne.MoveRocks,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,1,0,2,0,0)),e===Ne.DodgeBall&&(n.trainingName="Dodge Ball",n.isAvailable=!1,n.facilitySize=st.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ne.DodgeBall,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,2.5,0,0,0,.5)),e===Ne.LateralVerticalDrill&&(n.trainingName="Lateral Vertical Drill",n.isAvailable=!1,n.facilitySize=st.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ne.LateralVerticalDrill,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(1.5,0,0,0,2,0)),e===Ne.BurstPractice&&(n.trainingName="Burst Practice",n.isAvailable=!1,n.facilitySize=st.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ne.BurstPractice,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,1.5,1.5,1.5)),e===Ne.Acrobatics&&(n.trainingName="Acrobatics",n.isAvailable=!1,n.facilitySize=st.Medium,n.purchasePrice*=4,n.timeToComplete=75,n.trainingType=Ne.Acrobatics,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(.5,0,.5,3,0,0)),e===Ne.LongTrackRunning&&(n.trainingName="Long Track Running",n.isAvailable=!1,n.facilitySize=st.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.LongTrackRunning,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(5,0,0,0,2,0)),e===Ne.VehicleTow&&(n.trainingName="Vehicle Tow",n.isAvailable=!1,n.facilitySize=st.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.VehicleTow,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,2,5,0,0)),e===Ne.LogJump&&(n.trainingName="Log Jump",n.isAvailable=!1,n.facilitySize=st.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.LogJump,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(1,1,0,0,0,5)),e===Ne.Meditation&&(n.trainingName="Meditation",n.isAvailable=!1,n.facilitySize=st.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.Meditation,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,0,2,5,0)),e===Ne.WindSprints&&(n.trainingName="Wind Sprints",n.isAvailable=!1,n.facilitySize=st.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.WindSprints,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(2,5,0,0,0,0)),e===Ne.GreenwayHike&&(n.trainingName="Greenway Hike",n.isAvailable=!1,n.facilitySize=st.Large,n.purchasePrice*=10,n.timeToComplete=90,n.trainingType=Ne.GreenwayHike,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,0,5,0,0,2)),e===Ne.Marathon&&(n.trainingName="Marathon",n.isAvailable=!1,n.facilitySize=st.Large,n.purchasePrice*=10,n.timeToComplete=120,n.trainingType=Ne.Marathon,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(0,2,3,0,3,0)),e===Ne.AgilityCourse&&(n.trainingName="Agility Course",n.isAvailable=!1,n.facilitySize=st.Large,n.purchasePrice*=10,n.timeToComplete=120,n.trainingType=Ne.AgilityCourse,n.trainingCourseType=z.Flatland,n.statGain=1,n.affectedStatRatios=new Ee(3,0,0,2,0,3)),n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Wt=(()=>{return(t=Wt||(Wt={}))[t.Track=0]="Track",t[t.Free=1]="Free",t[t.Mono=2]="Mono",t[t.Duo=3]="Duo",t[t.Rainbow=4]="Rainbow",Wt;var t})(),Ke=(()=>{return(t=Ke||(Ke={}))[t.none=0]="none",t[t.headband=1]="headband",t[t.redBaton=2]="redBaton",t[t.blueBaton=3]="blueBaton",t[t.violetBaton=4]="violetBaton",t[t.orangeBaton=5]="orangeBaton",t[t.greenBaton=6]="greenBaton",t[t.yellowBaton=7]="yellowBaton",t[t.quickSnack=8]="quickSnack",t[t.blinders=9]="blinders",t[t.pendant=10]="pendant",t[t.carrotOnAStick=11]="carrotOnAStick",t[t.scaryMask=12]="scaryMask",t[t.runningShoes=13]="runningShoes",t[t.incense=14]="incense",t[t.athleticTape=15]="athleticTape",Ke;var t})();const $v={name:"white",properties:{"--foreground-default":"#000000","--foreground-secondary":"#1B1B1B","--foreground-tertiary":"#a6a49d","--foreground-quaternary":"#2F2F2F","--foreground-light":"#000000","--background-default":"#FCFCFC","--background-secondary":"#FFFFFF","--background-tertiary":"#C4C4C4","--background-quarternary":"#ACAFB4","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#8105fc","--specialityKeywordColor":"#050efc","--equipmentKeywordColor":"#1B7F02","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},qv={name:"light",properties:{"--foreground-default":"#08090A","--foreground-secondary":"#41474D","--foreground-tertiary":"#797C80","--foreground-quaternary":"#F4FAFF","--foreground-light":"#41474D","--background-default":"#F4FAFF","--background-secondary":"#A3B9CC","--background-tertiary":"#5C7D99","--background-quarternary":"#65799E","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#BF6200","--mountainColor":"#228D0F","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#266A80","--volcanicColor":"#C70604","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#064064","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},Wv={name:"twilight",properties:{"--foreground-default":"#ED8B42","--foreground-secondary":"#C05100","--foreground-tertiary":"#6A2D00","--foreground-quaternary":"#FFAA20","--foreground-light":"#FF8F3D","--background-default":"#5D0274","--background-secondary":"#210129","--background-tertiary":"#14001A","--background-quarternary":"#4F223C","--background-light":"#72028D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#000000","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},fu={name:"night",properties:{"--foreground-default":"#A3B9CC","--foreground-secondary":"#5C7D99","--foreground-tertiary":"#49647A","--foreground-quaternary":"#E5E5E5","--foreground-light":"#FFFFFF","--background-default":"#797C80","--background-secondary":"#41474D","--background-tertiary":"#08090A","--background-quarternary":"##2A2C31","--background-light":"#41474D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#E18B07","--mountainColor":"#30b001","--waterColor":"#9289CF","--waterSubcolor":"#5044ab","--tundraColor":"#019DDE","--volcanicColor":"#E56C6E","--resourceKeywordColor":"#EAAD91","--progressionKeywordColor":"#ABB5DC","--specialityKeywordColor":"#5DBDF6","--equipmentKeywordColor":"#83C2A6","--background-tertiary-shadow":"0 1px 3px 0 rgba(8, 9, 10, 0.5)"}};let kl=(()=>{class t{constructor(){this.active=fu,this.availableThemes=[$v,qv,Wv,fu]}getAvailableThemes(){return this.availableThemes}getActiveTheme(){return this.active}getActiveThemeName(){var e="";return e=this.active.name,this.active===fu&&(e="night"),this.active===qv&&(e="light"),this.active===$v&&(e="white"),this.active===Wv&&(e="twilight"),e}setNightTheme(){return this.setActiveTheme(fu)}setLightTheme(){return this.setActiveTheme(qv)}setTwilightTheme(){return this.setActiveTheme(Wv)}setWhiteTheme(){return this.setActiveTheme($v)}setActiveTheme(e){return this.active=e,Object.keys(this.active.properties).forEach(n=>{document.documentElement.style.setProperty(n,this.active.properties[n])}),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Kr=(()=>{return(t=Kr||(Kr={}))[t.draw=0]="draw",t[t.text=1]="text",t[t.both=2]="both",Kr;var t})(),$n=(()=>{return(t=$n||($n={}))[t.practice=0]="practice",t[t.novice=1]="novice",t[t.intermediate=2]="intermediate",t[t.master=3]="master",$n;var t})(),Pe=(()=>{return(t=Pe||(Pe={}))[t.circuit=0]="circuit",t[t.special=1]="special",t[t.event=2]="event",t[t.trainingTrack=3]="trainingTrack",Pe;var t})(),Le=(()=>{return(t=Le||(Le={}))[t.grandPrix=0]="grandPrix",Le;var t})(),Ei=(()=>{return(t=Ei||(Ei={}))[t.clearSkies=0]="clearSkies",t[t.inclementWeather=1]="inclementWeather",t[t.coldSpell=2]="coldSpell",Ei;var t})();let St=(()=>{class t{constructor(e,n,r){this.utilityService=e,this.initializeService=n,this.themeService=r,this.globalVar=new Ln}initializeGlobalVariables(){this.globalVar.animals=[],this.globalVar.trainingOptions=[],this.globalVar.circuitRaces=[],this.globalVar.localRaces=[],this.globalVar.resources=[],this.globalVar.modifiers=[],this.globalVar.animalDecks=[],this.globalVar.barns=[],this.globalVar.redeemedCodes=[],this.globalVar.settings=new Hv,this.globalVar.unlockables=new jv,this.globalVar.incubator=new hu,this.globalVar.trackedStats=new Gv,this.globalVar.orbStats=new Fv,this.globalVar.tutorials=new Uv,this.globalVar.previousEventRewards=[],this.globalVar.eventRaceData=new Bi,this.globalVar.userIsRacing=!1,this.globalVar.nationalRaceCountdown=0,this.globalVar.autoFreeRaceCounter=0,this.globalVar.freeRaceCounter=0,this.globalVar.freeRaceTimePeriodCounter=0,this.globalVar.lastTimeStamp=Date.now(),this.globalVar.currentVersion=1.06,this.globalVar.startingVersion=1.06,this.globalVar.startDate=new Date,this.globalVar.notifications=new rf,this.InitializeModifiers(),this.InitializeAnimals(),this.InitializeRelayTeams(),this.InitializeGlobalTrainingOptions(),this.InitializeShop(),this.InitializeTokenShop(),this.InitializeBarns(),this.globalVar.circuitRank="Z",this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),this.checkCircuitRankRewards(),this.globalVar.monoRank="Z",this.globalVar.duoRank="Z",this.globalVar.rainbowRank="Z",this.GenerateLocalRaces(),this.InitializeResources(),this.InitializeSettings(),this.InitializeUnlockables()}InitializeModifiers(){this.globalVar.modifiers.push(new K(.2,"staminaModifier")),this.globalVar.modifiers.push(new K(.9,"exhaustionStatLossModifier")),this.globalVar.modifiers.push(new K(.1,"exhaustionStatLossMinimumModifier")),this.globalVar.modifiers.push(new K(5,"trainingBreedGaugeIncrease")),this.globalVar.modifiers.push(new K(10,"circuitBreedGaugeIncrease")),this.globalVar.modifiers.push(new K(1,"localBreedGaugeIncrease")),this.globalVar.modifiers.push(new K(.5,"trainingTrackPaceModifier")),this.globalVar.modifiers.push(new K(.05,"breedLevelStatModifier")),this.globalVar.modifiers.push(new K(10,"breedGaugeMaxIncreaseModifier")),this.globalVar.modifiers.push(new K(.001,"incubatorUpgradeIncreaseModifier")),this.globalVar.modifiers.push(new K(5,"facilityLevelModifier")),this.globalVar.modifiers.push(new K(.02,"animalHandlerModifier")),this.globalVar.modifiers.push(new K(.01,"stopwatchModifier")),this.globalVar.modifiers.push(new K(.1,"racerMapsModifier")),this.globalVar.modifiers.push(new K(25,"nationalRacesToMedalModifier")),this.globalVar.modifiers.push(new K(10,"internationalRacesToMedalModifier")),this.globalVar.modifiers.push(new K(.75,"moneyMarkPaceModifier")),this.globalVar.modifiers.push(new K(1.25,"moneyMarkRewardModifier")),this.globalVar.modifiers.push(new K(5,"whistleModifier")),this.globalVar.modifiers.push(new K(10,"goldenWhistleModifier")),this.globalVar.modifiers.push(new K(.1,"breedingGroundsSpecializationModifier")),this.globalVar.modifiers.push(new K(300,"attractionTimeToCollectModifier")),this.globalVar.modifiers.push(new K(10,"attractionAmountModifier")),this.globalVar.modifiers.push(new K(.05,"researchCenterIncrementsModifier")),this.globalVar.modifiers.push(new K(.45,"researchCenterTrainingAnimalModifier")),this.globalVar.modifiers.push(new K(.25,"researchCenterStudyingAnimalModifier")),this.globalVar.modifiers.push(new K(.75,"researchCenterMaxStatGainModifier")),this.globalVar.modifiers.push(new K(3,"headbandEquipmentModifier")),this.globalVar.modifiers.push(new K(1,"quickSnackEquipmentModifier")),this.globalVar.modifiers.push(new K(.5,"blindersEquipmentModifier")),this.globalVar.modifiers.push(new K(.9,"pendantEquipmentModifier")),this.globalVar.modifiers.push(new K(1.1,"redBatonEquipmentModifier")),this.globalVar.modifiers.push(new K(1.1,"blueBatonEquipmentModifier")),this.globalVar.modifiers.push(new K(1.1,"orangeBatonEquipmentModifier")),this.globalVar.modifiers.push(new K(1.1,"greenBatonEquipmentModifier")),this.globalVar.modifiers.push(new K(1.1,"yellowBatonEquipmentModifier")),this.globalVar.modifiers.push(new K(1.1,"violetBatonEquipmentModifier")),this.globalVar.modifiers.push(new K(2,"scaryMaskEquipmentModifier")),this.globalVar.modifiers.push(new K(1.2,"runningShoesEquipmentModifier")),this.globalVar.modifiers.push(new K(.9,"incenseEquipmentModifier")),this.globalVar.modifiers.push(new K(.5,"athleticTapeEquipmentModifier")),this.globalVar.modifiers.push(new K(7200,"smallBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new K(14400,"mediumBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new K(28800,"largeBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new K(5,"freeRacesPerTimePeriodModifier")),this.globalVar.modifiers.push(new K(300,"freeRacesTimePeriodModifier")),this.globalVar.modifiers.push(new K(7200,"autoFreeRacesMaxIdleTimePeriodModifier")),this.globalVar.modifiers.push(new K(5e6,"metersPerCoinsGrandPrixModifier")),this.globalVar.modifiers.push(new K(2e7,"metersPerRenownGrandPrixModifier")),this.globalVar.modifiers.push(new K(100,"grandPrixCoinRewardModifier")),this.globalVar.modifiers.push(new K(3,"grandPrixRenownRewardModifier")),this.globalVar.modifiers.push(new K(5e7,"grandPrixToken1MeterModifier")),this.globalVar.modifiers.push(new K(1e8,"grandPrixToken2MeterModifier")),this.globalVar.modifiers.push(new K(25e7,"grandPrixToken3MeterModifier")),this.globalVar.modifiers.push(new K(5e8,"grandPrixToken4MeterModifier")),this.globalVar.modifiers.push(new K(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new K(.02,"exhaustionGainGrandPrixModifier")),this.globalVar.modifiers.push(new K(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new K(25,"grandPrixBreedLevelRequiredModifier")),this.globalVar.modifiers.push(new K(.2,"weatherMoraleBoostModifier")),this.globalVar.modifiers.push(new K(.03,"focusMoraleLossModifier")),this.globalVar.modifiers.push(new K(.02,"burstMoraleBoostModifier")),this.globalVar.modifiers.push(new K(.01,"stumbleMoraleLossModifier")),this.globalVar.modifiers.push(new K(.05,"segmentCompleteMoraleBoostModifier")),this.globalVar.modifiers.push(new K(25,"abilityLevelCapModifier")),this.globalVar.modifiers.push(new K(1.5,"feedingFrenzyPositiveModifier")),this.globalVar.modifiers.push(new K(.9,"feedingFrenzyNegativeModifier")),this.globalVar.modifiers.push(new K(20,"maxDriftAmountModifier")),this.globalVar.modifiers.push(new K(4,"relayAbilityXpGainModifier")),this.globalVar.modifiers.push(new K(25,"maximumTraitNegativePercentModifier"));var e=.3,n=.1,l=1.025,c=1.05,d=.975,m=.95;this.globalVar.modifiers.push(new K(e*l,"horseDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n,"horseDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5.5,"horseDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1,"horseDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5*m,"horseDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5,"horseDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(e*c,"cheetahDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(1.1*n,"cheetahDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(4.5,"cheetahDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1,"cheetahDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5,"cheetahDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5*d,"cheetahDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5*m,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(e,"monkeyDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n*m,"monkeyDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5,"monkeyDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1.1,"monkeyDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5*c,"monkeyDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5,"monkeyDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(e,"goatDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n*l,"goatDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5*l,"goatDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1*d,"goatDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5*d,"goatDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5.5,"goatDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(e*m,"geckoDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n,"geckoDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5*c,"geckoDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1,"geckoDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5.5,"geckoDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5,"geckoDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(e*d,"dolphinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n*l,"dolphinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5,"dolphinDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1.1,"dolphinDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5,"dolphinDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5*d,"dolphinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(.33,"sharkDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n,"sharkDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5*d,"sharkDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1*l,"sharkDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5*m,"sharkDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5*m,"sharkDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(e*d,"octopusDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n*m,"octopusDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5,"octopusDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1.1,"octopusDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5*l,"octopusDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5,"octopusDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(e*m,"penguinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n,"penguinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5,"penguinDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1*l,"penguinDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5,"penguinDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5*c,"penguinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(e*d,"caribouDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n*m,"caribouDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5.5,"caribouDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1*l,"caribouDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5*c,"caribouDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5,"caribouDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(e,"salamanderDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n*l,"salamanderDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5*m,"salamanderDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1,"salamanderDefaultPowerModifier")),this.globalVar.modifiers.push(new K(5*c,"salamanderDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5,"salamanderDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new K(e*c,"foxDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new K(n,"foxDefaultAccelerationModifier")),this.globalVar.modifiers.push(new K(5*d,"foxDefaultStaminaModifier")),this.globalVar.modifiers.push(new K(1*l,"foxDefaultPowerModifier")),this.globalVar.modifiers.push(new K(4.5,"foxDefaultFocusModifier")),this.globalVar.modifiers.push(new K(5*c,"foxDefaultAdaptabilityModifier"))}InitializeAnimals(){var e=new p4;e.name="Horse",e.isAvailable=!0,this.calculateAnimalRacingStats(e);var n=new v4;n.name="Monkey",this.calculateAnimalRacingStats(n);var r=new m4;r.name="Hare",this.calculateAnimalRacingStats(r);var a=new g4;a.name="Cheetah",this.calculateAnimalRacingStats(a);var o=new b4;o.name="Goat",this.calculateAnimalRacingStats(o);var s=new _4;s.name="Gecko",this.calculateAnimalRacingStats(s);var l=new y4;l.name="Dolphin",this.calculateAnimalRacingStats(l);var c=new C4;c.name="Shark",this.calculateAnimalRacingStats(c);var u=new w4;u.name="Octopus",this.calculateAnimalRacingStats(u);var d=new S4;d.name="Penguin",this.calculateAnimalRacingStats(d);var m=new T4;m.name="Caribou",this.calculateAnimalRacingStats(m);var v=new D4;v.name="Salamander",this.calculateAnimalRacingStats(v);var _=new R4;_.name="Fox",this.calculateAnimalRacingStats(_),this.globalVar.animals.push(e),this.globalVar.animals.push(a),this.globalVar.animals.push(r),this.globalVar.animals.push(o),this.globalVar.animals.push(n),this.globalVar.animals.push(s),this.globalVar.animals.push(l),this.globalVar.animals.push(c),this.globalVar.animals.push(u),this.globalVar.animals.push(d),this.globalVar.animals.push(m),this.globalVar.animals.push(v),this.globalVar.animals.push(_)}InitializeRelayTeams(){var e=new Qh;e.isPrimaryDeck=!0,e.isAvailable=!0,e.name="Relay Team 1",e.deckNumber=1;var n=this.globalVar.animals.find(o=>"Horse"===o.getAnimalType());void 0!==n&&e.selectedAnimals.push(n),this.globalVar.animalDecks.push(e);for(var r=0;r<3;r++){var a=new Qh;a.isAvailable=!0,a.deckNumber=r+2,a.name="Relay Team "+a.deckNumber,this.globalVar.animalDecks.push(a)}}InitializeTokenShop(){this.globalVar.tokenShop=[];var e=new Qr,n=[],r=10,a=new tt;a.name="Apples",a.purchasePrice.push(this.getTokenResourceValue(1)),a.basePurchasePrice.push(this.getTokenResourceValue(1)),a.shortDescription="+1 Acceleration to a single animal",a.numberPurchasing=r,a.canHaveMultiples=!0,a.type=Y.Food,a.infiniteAmount=!0,n.push(a);var o=new tt;o.name="Bananas",o.shortDescription="+1 Speed to a single animal",o.purchasePrice.push(this.getTokenResourceValue(1)),o.basePurchasePrice.push(this.getTokenResourceValue(1)),o.canHaveMultiples=!0,o.numberPurchasing=r,o.type=Y.Food,o.infiniteAmount=!0,n.push(o);var s=new tt;s.name="Strawberries",s.shortDescription="+1 Endurance to a single animal",s.purchasePrice.push(this.getTokenResourceValue(1)),s.basePurchasePrice.push(this.getTokenResourceValue(1)),s.canHaveMultiples=!0,s.numberPurchasing=r,s.type=Y.Food,s.infiniteAmount=!0,n.push(s);var l=new tt;l.name="Carrots",l.shortDescription="+1 Power to a single animal",l.purchasePrice.push(this.getTokenResourceValue(1)),l.basePurchasePrice.push(this.getTokenResourceValue(1)),l.canHaveMultiples=!0,l.numberPurchasing=r,l.type=Y.Food,l.infiniteAmount=!0,n.push(l);var c=new tt;c.name="Turnips",c.shortDescription="+1 Focus to a single animal",c.purchasePrice.push(this.getTokenResourceValue(1)),c.basePurchasePrice.push(this.getTokenResourceValue(1)),c.canHaveMultiples=!0,c.numberPurchasing=r,c.type=Y.Food,c.infiniteAmount=!0,n.push(c);var u=new tt;u.name="Oranges",u.shortDescription="+1 Adaptability to a single animal",u.purchasePrice.push(this.getTokenResourceValue(1)),u.basePurchasePrice.push(this.getTokenResourceValue(1)),u.canHaveMultiples=!0,u.numberPurchasing=r,u.type=Y.Food,u.infiniteAmount=!0,n.push(u);var d=new tt;d.name="Circuit Race Breed XP Gain Certificate",d.shortDescription=this.getItemDescription(d.name),d.purchasePrice.push(this.getTokenResourceValue(1)),d.basePurchasePrice.push(this.getTokenResourceValue(1)),d.canHaveMultiples=!0,d.type=Y.Consumable,d.infiniteAmount=!0,n.push(d);var m=new tt;m.name="Free Race Breed XP Gain Certificate",m.shortDescription=this.getItemDescription(m.name),m.purchasePrice.push(this.getTokenResourceValue(1)),m.basePurchasePrice.push(this.getTokenResourceValue(1)),m.canHaveMultiples=!0,m.type=Y.Consumable,m.infiniteAmount=!0,n.push(m),e.name="Tier 1",e.itemList=n,this.globalVar.tokenShop.push(e);var v=new Qr,_=[],y=new tt;y.name="Mangoes",y.shortDescription="+1 Breed Level to a single animal",y.purchasePrice.push(this.getTokenResourceValue(1)),y.basePurchasePrice.push(this.getTokenResourceValue(1)),y.canHaveMultiples=!0,y.numberPurchasing=2,y.type=Y.Food,y.infiniteAmount=!0,_.push(y);var S=new tt;S.name="Coins",S.shortDescription="",S.purchasePrice.push(this.getTokenResourceValue(3)),S.basePurchasePrice.push(this.getTokenResourceValue(3)),S.canHaveMultiples=!0,S.numberPurchasing=5e3,S.type=Y.Resources,S.infiniteAmount=!0,_.push(S);var D=new tt;D.name="Diminishing Returns Increase Certificate",D.shortDescription=this.getItemDescription(D.name),D.purchasePrice.push(this.getTokenResourceValue(5)),D.basePurchasePrice.push(this.getTokenResourceValue(5)),D.canHaveMultiples=!0,D.type=Y.Consumable,D.infiniteAmount=!0,_.push(D);var w=new tt;w.name="Training Breed XP Gain Certificate",w.shortDescription=this.getItemDescription(w.name),w.purchasePrice.push(this.getTokenResourceValue(1)),w.basePurchasePrice.push(this.getTokenResourceValue(1)),w.canHaveMultiples=!0,w.type=Y.Consumable,w.infiniteAmount=!0,_.push(w),v.name="Tier 2",v.itemList=_,this.globalVar.tokenShop.push(v);var T=new Qr,L=[],G=new tt;G.name=this.getEquipmentName(Ke.scaryMask),G.shortDescription=this.getEquipmentDescription(G.name),G.purchasePrice.push(this.getTokenResourceValue(7)),G.canHaveMultiples=!0,G.infiniteAmount=!0,G.type=Y.Equipment,L.push(G);var ee=new tt;ee.name=this.getEquipmentName(Ke.runningShoes),ee.shortDescription=this.getEquipmentDescription(ee.name),ee.purchasePrice.push(this.getTokenResourceValue(7)),ee.canHaveMultiples=!0,ee.infiniteAmount=!0,ee.type=Y.Equipment,L.push(ee);var re=new tt;re.name=this.getEquipmentName(Ke.incense),re.shortDescription=this.getEquipmentDescription(re.name),re.purchasePrice.push(this.getTokenResourceValue(7)),re.canHaveMultiples=!0,re.infiniteAmount=!0,re.type=Y.Equipment,L.push(re);var ce=new tt;ce.name=this.getEquipmentName(Ke.athleticTape),ce.shortDescription=this.getEquipmentDescription(ce.name),ce.purchasePrice.push(this.getTokenResourceValue(7)),ce.canHaveMultiples=!0,ce.infiniteAmount=!0,ce.type=Y.Equipment,L.push(ce),T.name="Tier 3",T.itemList=L,this.globalVar.tokenShop.push(T)}InitializeShop(){this.globalVar.shop=[];var e=new Qr,n=[],u=new tt;u.name="Cheetah",u.purchasePrice.push(new pe("Coins",1e3)),u.canHaveMultiples=!1,u.type=Y.Animal,n.push(u);var d=new tt;d.name="Hare",d.purchasePrice.push(new pe("Coins",1e3)),d.canHaveMultiples=!1,d.type=Y.Animal,n.push(d);var m=new tt;m.name="Goat",m.purchasePrice.push(new pe("Coins",2500)),m.canHaveMultiples=!1,m.type=Y.Animal,m.isAvailable=!1,n.push(m);var v=new tt;v.name="Gecko",v.purchasePrice.push(new pe("Coins",2500)),v.canHaveMultiples=!1,v.type=Y.Animal,v.isAvailable=!1,n.push(v);var _=new tt;_.name="Shark",_.purchasePrice.push(new pe("Coins",5e3)),_.canHaveMultiples=!1,_.type=Y.Animal,_.isAvailable=!1,n.push(_);var y=new tt;y.name="Octopus",y.purchasePrice.push(new pe("Coins",5e3)),y.canHaveMultiples=!1,y.type=Y.Animal,y.isAvailable=!1,n.push(y);var S=new tt;S.name="Caribou",S.purchasePrice.push(new pe("Coins",1e4)),S.canHaveMultiples=!1,S.type=Y.Animal,S.isAvailable=!1,n.push(S);var D=new tt;D.name="Fox",D.purchasePrice.push(new pe("Coins",1e4)),D.canHaveMultiples=!1,D.type=Y.Animal,D.isAvailable=!1,n.push(D),e.name="Animals",e.itemList=n,this.globalVar.shop.push(e);var w=new Qr,T=[],L=50,G=new tt;G.name="Apples",G.shortDescription="+1 Acceleration to a single animal",G.purchasePrice.push(new pe("Coins",L)),G.canHaveMultiples=!0,G.type=Y.Food,G.infiniteAmount=!0,T.push(G);var ee=new tt;ee.name="Bananas",ee.shortDescription="+1 Speed to a single animal",ee.purchasePrice.push(new pe("Coins",L)),ee.canHaveMultiples=!0,ee.type=Y.Food,ee.infiniteAmount=!0,T.push(ee);var re=new tt;re.name="Strawberries",re.shortDescription="+1 Endurance to a single animal",re.purchasePrice.push(new pe("Coins",L)),re.canHaveMultiples=!0,re.type=Y.Food,re.infiniteAmount=!0,T.push(re);var ce=new tt;ce.name="Carrots",ce.shortDescription="+1 Power to a single animal",ce.purchasePrice.push(new pe("Coins",L)),ce.canHaveMultiples=!0,ce.type=Y.Food,ce.infiniteAmount=!0,T.push(ce);var me=new tt;me.name="Turnips",me.shortDescription="+1 Focus to a single animal",me.purchasePrice.push(new pe("Coins",L)),me.canHaveMultiples=!0,me.type=Y.Food,me.infiniteAmount=!0,T.push(me);var we=new tt;we.name="Oranges",we.shortDescription="+1 Adaptability to a single animal",we.purchasePrice.push(new pe("Coins",L)),we.canHaveMultiples=!0,we.type=Y.Food,we.infiniteAmount=!0,T.push(we);var Fe=new tt;Fe.name="Mangoes",Fe.shortDescription="+1 Breed Level to a single animal",Fe.purchasePrice.push(new pe("Coins",500)),Fe.canHaveMultiples=!0,Fe.type=Y.Food,Fe.infiniteAmount=!0,T.push(Fe),w.name="Food",w.itemList=T,this.globalVar.shop.push(w);var Ye=new Qr,dt=[];this.globalVar.trainingOptions.filter(On=>!On.isAvailable).forEach(On=>{var mn=new tt;mn.name=On.trainingName,mn.shortDescription=On.getStatGainDescription(),mn.purchasePrice.push(new pe("Coins",On.purchasePrice)),mn.canHaveMultiples=!1,mn.type=Y.Training,(On.facilitySize===st.Medium||On.facilitySize===st.Large)&&(mn.isAvailable=!1,mn.additionalIdentifier=On.facilitySize.toString()),dt.push(mn)}),Ye.name="Trainings",Ye.itemList=dt,this.globalVar.shop.push(Ye);var yt=new Qr,Xt=[];this.globalVar.animals.forEach(On=>{On.availableAbilities.forEach(mn=>{if(!mn.isAbilityPurchased){var ni=new tt;ni.name=On.getAnimalType()+" Ability: "+mn.name,ni.purchasePrice.push(new pe("Coins",mn.purchasePrice)),ni.canHaveMultiples=!1,ni.type=Y.Ability,ni.additionalIdentifier=mn.name,ni.isAvailable=On.isAvailable,Xt.push(ni)}})}),yt.name="Abilities",yt.itemList=Xt,this.globalVar.shop.push(yt);var Et=new Qr,_t=[],oe=new tt;oe.name="Stopwatch",oe.purchasePrice.push(this.getMedalResourceValue(10)),oe.basePurchasePrice.push(this.getMedalResourceValue(10)),oe.quantityMultiplier=2.5,oe.totalShopQuantity=2,oe.canHaveMultiples=!0,oe.type=Y.Specialty,_t.push(oe);var R=new tt;R.name="Animal Handler",R.purchasePrice.push(this.getCoinsResourceValue(2e3)),R.basePurchasePrice.push(this.getCoinsResourceValue(2e3)),R.quantityAdditive=2e3,R.totalShopQuantity=20,R.canHaveMultiples=!0,R.type=Y.Specialty,_t.push(R);var Qe=new tt;Qe.name="Course Maps",Qe.purchasePrice.push(this.getMedalResourceValue(2)),Qe.basePurchasePrice.push(this.getMedalResourceValue(2)),Qe.quantityMultiplier=2,Qe.totalShopQuantity=5,Qe.canHaveMultiples=!0,Qe.type=Y.Specialty,_t.push(Qe);var Ht=new tt;Ht.name="Stockbreeder",Ht.purchasePrice.push(this.getCoinsResourceValue(500)),Ht.basePurchasePrice.push(this.getCoinsResourceValue(500)),Ht.canHaveMultiples=!1,Ht.type=Y.Specialty,_t.push(Ht);var ln=new tt;ln.name="Team Manager",ln.purchasePrice.push(this.getMedalResourceValue(3)),ln.basePurchasePrice.push(this.getMedalResourceValue(3)),ln.canHaveMultiples=!0,ln.quantityMultiplier=2,ln.totalShopQuantity=20,ln.type=Y.Specialty,_t.push(ln);var yn=new tt;yn.name="Scouts",yn.purchasePrice.push(this.getCoinsResourceValue(1e4)),yn.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),yn.canHaveMultiples=!1,yn.type=Y.Specialty,_t.push(yn);var pt=new tt;pt.name="Money Mark",pt.purchasePrice.push(this.getCoinsResourceValue(500)),pt.basePurchasePrice.push(this.getCoinsResourceValue(500)),pt.canHaveMultiples=!1,pt.type=Y.Specialty,_t.push(pt);var on=new tt;on.name="National Races",on.purchasePrice.push(this.getCoinsResourceValue(1e4)),on.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),on.canHaveMultiples=!1,on.type=Y.Specialty,_t.push(on);var mt,cn=new tt;cn.name="International Races",cn.purchasePrice.push(this.getCoinsResourceValue(5e4)),cn.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),cn.canHaveMultiples=!1,cn.isAvailable=!1,cn.type=Y.Specialty,_t.push(cn),(mt=new tt).name="Incubator Upgrade Lv1",mt.purchasePrice.push(this.getCoinsResourceValue(5e3)),mt.basePurchasePrice.push(this.getCoinsResourceValue(5e3)),mt.canHaveMultiples=!1,mt.isAvailable=!1,mt.type=Y.Specialty,_t.push(mt),(mt=new tt).name="Incubator Upgrade Lv2",mt.purchasePrice.push(this.getCoinsResourceValue(1e4)),mt.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),mt.canHaveMultiples=!1,mt.isAvailable=!1,mt.type=Y.Specialty,_t.push(mt),(mt=new tt).name="Incubator Upgrade Lv3",mt.purchasePrice.push(this.getCoinsResourceValue(25e3)),mt.basePurchasePrice.push(this.getCoinsResourceValue(25e3)),mt.canHaveMultiples=!1,mt.isAvailable=!1,mt.type=Y.Specialty,_t.push(mt),(mt=new tt).name="Incubator Upgrade Lv4",mt.purchasePrice.push(this.getCoinsResourceValue(5e4)),mt.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),mt.canHaveMultiples=!1,mt.isAvailable=!1,mt.type=Y.Specialty,_t.push(mt);var wn=new tt;wn.name="Whistle",wn.purchasePrice.push(this.getCoinsResourceValue(2500)),wn.basePurchasePrice.push(this.getCoinsResourceValue(2500)),wn.totalShopQuantity=1,wn.canHaveMultiples=!1,wn.isAvailable=!1,wn.type=Y.Specialty,_t.push(wn);var ti=new tt;ti.name="Golden Whistle",ti.purchasePrice.push(this.getCoinsResourceValue(15e3)),ti.basePurchasePrice.push(this.getCoinsResourceValue(15e3)),ti.totalShopQuantity=1,ti.canHaveMultiples=!1,ti.isAvailable=!1,ti.type=Y.Specialty,_t.push(ti);var li=new tt;li.name="Talent Point Voucher",li.purchasePrice.push(this.getMedalResourceValue(25)),li.basePurchasePrice.push(this.getMedalResourceValue(25)),li.infiniteAmount=!0,li.canHaveMultiples=!0,li.quantityAdditive=25,li.isAvailable=!1,li.type=Y.Specialty,_t.push(li),Et.name="Specialty",Et.itemList=_t,this.globalVar.shop.push(Et);var ci=new Qr,Hn=[],ui=new tt;ui.name=this.getEquipmentName(Ke.headband),ui.shortDescription=this.getEquipmentDescription(ui.name),ui.purchasePrice.push(this.getCoinsResourceValue(1e3)),ui.canHaveMultiples=!0,ui.infiniteAmount=!0,ui.type=Y.Equipment,Hn.push(ui);var Ii=new tt;Ii.name=this.getEquipmentName(Ke.pendant),Ii.shortDescription=this.getEquipmentDescription(Ii.name),Ii.purchasePrice.push(this.getCoinsResourceValue(1e3)),Ii.canHaveMultiples=!0,Ii.infiniteAmount=!0,Ii.type=Y.Equipment,Hn.push(Ii);var Oi=new tt;Oi.name=this.getEquipmentName(Ke.blinders),Oi.shortDescription=this.getEquipmentDescription(Oi.name),Oi.purchasePrice.push(this.getCoinsResourceValue(1e3)),Oi.canHaveMultiples=!0,Oi.infiniteAmount=!0,Oi.type=Y.Equipment,Hn.push(Oi);var Di=new tt;Di.name=this.getEquipmentName(Ke.quickSnack),Di.shortDescription=this.getEquipmentDescription(Di.name),Di.purchasePrice.push(this.getCoinsResourceValue(1e3)),Di.canHaveMultiples=!0,Di.infiniteAmount=!0,Di.type=Y.Equipment,Hn.push(Di);var Mn=new tt;Mn.name=this.getEquipmentName(Ke.redBaton),Mn.shortDescription=this.getEquipmentDescription(Mn.name),Mn.purchasePrice.push(this.getCoinsResourceValue(2500)),Mn.canHaveMultiples=!0,Mn.infiniteAmount=!0,Mn.type=Y.Equipment,Hn.push(Mn);var ot=new tt;ot.name=this.getEquipmentName(Ke.blueBaton),ot.shortDescription=this.getEquipmentDescription(ot.name),ot.purchasePrice.push(this.getCoinsResourceValue(2500)),ot.canHaveMultiples=!0,ot.infiniteAmount=!0,ot.type=Y.Equipment,Hn.push(ot);var vi=new tt;vi.name=this.getEquipmentName(Ke.violetBaton),vi.shortDescription=this.getEquipmentDescription(vi.name),vi.purchasePrice.push(this.getCoinsResourceValue(2500)),vi.canHaveMultiples=!0,vi.infiniteAmount=!0,vi.type=Y.Equipment,Hn.push(vi);var sn=new tt;sn.name=this.getEquipmentName(Ke.orangeBaton),sn.shortDescription=this.getEquipmentDescription(sn.name),sn.purchasePrice.push(this.getCoinsResourceValue(2500)),sn.canHaveMultiples=!0,sn.infiniteAmount=!0,sn.type=Y.Equipment,Hn.push(sn);var Xn=new tt;Xn.name=this.getEquipmentName(Ke.greenBaton),Xn.shortDescription=this.getEquipmentDescription(Xn.name),Xn.purchasePrice.push(this.getCoinsResourceValue(2500)),Xn.canHaveMultiples=!0,Xn.infiniteAmount=!0,Xn.type=Y.Equipment,Hn.push(Xn);var Ui=new tt;Ui.name=this.getEquipmentName(Ke.yellowBaton),Ui.shortDescription=this.getEquipmentDescription(Ui.name),Ui.purchasePrice.push(this.getCoinsResourceValue(2500)),Ui.canHaveMultiples=!0,Ui.infiniteAmount=!0,Ui.type=Y.Equipment,Hn.push(Ui),ci.name="Equipment",ci.itemList=Hn,this.globalVar.shop.push(ci)}getEquipmentName(e){return e===Ke.headband?"Headband":e===Ke.pendant?"Pendant":e===Ke.blinders?"Blinders":e===Ke.quickSnack?"Quick Snack":e===Ke.carrotOnAStick?"Carrot on a Stick":e===Ke.redBaton?"Red Baton":e===Ke.blueBaton?"Blue Baton":e===Ke.violetBaton?"Violet Baton":e===Ke.yellowBaton?"Yellow Baton":e===Ke.greenBaton?"Green Baton":e===Ke.orangeBaton?"Orange Baton":e===Ke.scaryMask?"Scary Mask":e===Ke.runningShoes?"Running Shoes":e===Ke.incense?"Incense":e===Ke.athleticTape?"Athletic Tape":""}getEquipmentEnum(e){return"Headband"===e?Ke.headband:"Pendant"===e?Ke.pendant:"Blinders"===e?Ke.blinders:"Quick Snack"===e?Ke.quickSnack:"Carrot on a Stick"===e?Ke.carrotOnAStick:"Red Baton"===e?Ke.redBaton:"Blue Baton"===e?Ke.blueBaton:"Violet Baton"===e?Ke.violetBaton:"Yellow Baton"===e?Ke.yellowBaton:"Green Baton"===e?Ke.greenBaton:"Orange Baton"===e?Ke.orangeBaton:"Scary Mask"===e?Ke.scaryMask:"Running Shoes"===e?Ke.runningShoes:"Incense"===e?Ke.incense:"Athletic Tape"===e?Ke.athleticTape:Ke.none}InitializeBarns(){if(null==this.globalVar.barns||0===this.globalVar.barns.length){this.globalVar.barns=[];var n=new Bv;if(n.barnNumber=1,n.isLocked=!1,n.size=st.Small,n.purchasePrice=0,n.facilityUpgradePrice=500,n.upgradePrice=500,null!=this.globalVar.animals&&this.globalVar.animals.length>0){var r=this.globalVar.animals.find(s=>s.type===X.Horse);null!=r&&(r.associatedBarnNumber=n.barnNumber)}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.globalVar.barns.push(n);for(var a=2;a<=15;a++){var o=new Bv;o.barnNumber=a,o.isLocked=!0,o.purchasePrice=500*(a-1),o.facilityUpgradePrice=500,o.size=st.Small,this.globalVar.barns.push(o)}}}InitializeGlobalTrainingOptions(){this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.ShortTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Sprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.TrailRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.MoveLogs)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Footwork)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.PracticeCommands)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.ScentTraining)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.SmallWagonTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Sidestep)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.MediumTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.UphillRun)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Puzzles)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.MoveRocks)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.LateralVerticalDrill)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.DodgeBall)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.BurstPractice)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Acrobatics)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.LongTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.VehicleTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.LogJump)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Meditation)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.WindSprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.GreenwayHike)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.Marathon)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ne.AgilityCourse))}IncreaseCircuitRank(){var e=this.globalVar.circuitRank,n=e.replace(/([A-Z])[^A-Z]*$/,function(c){var u=c.charCodeAt(0);return 65===u?String.fromCharCode(u)+"Z":String.fromCharCode(--u)}),r=!1;this.utilityService.getNumericValueOfCircuitRank(this.globalVar.monoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.duoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.rainbowRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),r&&(this.globalVar.notifications.isNewSpecialRaceAvailable=!0),this.globalVar.circuitRank=n;var l=this.checkCircuitRankRewards();return this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),l}IncreaseLocalRaceRank(e){var n="";e===Wt.Mono&&(n=this.globalVar.monoRank),e===Wt.Duo&&(n=this.globalVar.duoRank),e===Wt.Rainbow&&(n=this.globalVar.rainbowRank);var r=n.replace(/([A-Z])[^A-Z]*$/,function(a){var o=a.charCodeAt(0);return 65===o?String.fromCharCode(o)+"Z":String.fromCharCode(--o)});e===Wt.Mono&&(this.globalVar.monoRank=r,this.GenerateMonoRaces(this.globalVar.monoRank)),e===Wt.Duo&&(this.globalVar.duoRank=r,this.GenerateDuoRaces(this.globalVar.duoRank)),e===Wt.Rainbow&&(this.globalVar.rainbowRank=r,this.GenerateRainbowRaces(this.globalVar.rainbowRank))}increaseGrandPrixRaceRank(){if(null!=this.globalVar.eventRaceData){var n=this.globalVar.eventRaceData.rank.replace(/([A-Z])[^A-Z]*$/,function(r){var a=r.charCodeAt(0);return 65===a?String.fromCharCode(a)+"Z":String.fromCharCode(--a)});this.globalVar.eventRaceData.rank=n,this.initialGrandPrixSetup(this.globalVar.eventRaceData.rank),this.globalVar.eventRaceData.initialSetupComplete=!0,this.globalVar.notifications.isEventRaceNowActive=!0}}getRewardReceiveText(e){return this.globalVar.settings.get("useNumbersForCircuitRank")?"Reach circuit rank "+e+" to receive: \n":"Reach circuit rank "+this.utilityService.getCircuitRankFromNumericValue(e)+" to receive: \n"}checkCircuitRankRewards(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),n=["",""];if(1===e&&(this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(2)+"Mono Races"),2===e&&(this.globalVar.unlockables.set("monoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,n=["Mono Race","A new race type has been unlocked! Take part in a Mono Race where you run an extended race as only one course type. Progressing through this race type generates new interest in your facility, which means it's time to make some upgrades. Gain Facility Level points from winning these races that increase your Diminishing Returns max value."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(3)+"Monkey"),3===e){var r=this.globalVar.animals.find(re=>re.type===X.Monkey);if(null!=r&&(r.isAvailable=!0,this.unlockAnimalAbilities(r),this.unlockOtherRaceCourseTypeAnimals(r.raceCourseType),null!=(a=this.globalVar.animalDecks.find(re=>re.isPrimaryDeck)))){var o=!1;a.selectedAnimals.forEach(re=>{re.raceCourseType===(null==r?void 0:r.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(r)}n=["Monkey","The Monkey is a Mountain climbing animal capable of slowing its competitors and leaping to victory."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(4)+"Coaching"}else if(4===e){if(this.globalVar.unlockables.set("coaching",!0),null!=(s=this.globalVar.shop.find(re=>"Specialty"===re.name))){var l=s.itemList.find(re=>"Whistle"===re.name);null!=l&&(l.isAvailable=!0)}n=["Coaching","Take charge of your animal's training by giving them some coaching yourself. Visit a barn with an animal assigned and select 'Coach' to get started."];var c=500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+c+" Coins"}else if(5===e)c=500,null==(u=this.globalVar.resources.find(ce=>"Coins"===ce.name))?this.globalVar.resources.push(new pe("Coins",c)):u.amount+=c,n=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(7)+"Barn Specializations";else if(7===e)this.globalVar.unlockables.set("barnSpecializations",!0),n=["Barn Specializations","As your training facility grows, so should your barns. At barn level 10, choose what direction you want your barn to progress in. Each option benefits your animals in different ways, so choose carefully."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(8)+"Headband";else if(8===e)c=1,null==(u=this.globalVar.resources.find(me=>"Headband"===me.name))?this.globalVar.resources.push(new pe("Headband",c,Y.Equipment)):u.amount+=c,n=[c+" Headband","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Dolphin";else if(10===e){var d=this.globalVar.animals.find(ce=>ce.type===X.Dolphin);null!=d&&(d.isAvailable=!0,this.unlockAnimalAbilities(d),this.unlockOtherRaceCourseTypeAnimals(d.raceCourseType),null!=(a=this.globalVar.animalDecks.find(me=>me.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(we=>{we.raceCourseType===(null==d?void 0:d.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(d))),n=["Dolphin","The Dolphin is an Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay."],c=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(12)+c+" Stat Increasing Food"}else if(12===e)this.increaseAllFood(c=10),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(13)+"Grand Prix";else if(13===e){this.globalVar.unlockables.set("grandPrix",!0);var m=this.globalVar.animalDecks.find(re=>re.isPrimaryDeck);null!=m&&(m.isEventDeck=!0),n=["Grand Prix","Now that you've climbed the ranks and your racing team has turned some heads, you've received an invite to the Grand Prix invitational. Twice per week, a marathon style race runs over multiple days. Check the 'Event Races' tab to see more info."];var v=1;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(15)+"Attraction Specialization"}else if(15===e)this.globalVar.unlockables.set("attractionSpecialization",!0),n=["Attraction Specialization",this.getSpecializationDescription("Attraction")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(16)+" 1 Pendant";else if(16===e)c=1,null==(u=this.globalVar.resources.find(me=>"Pendant"===me.name))?this.globalVar.resources.push(new pe("Pendant",c,Y.Equipment)):u.amount+=c,n=[c+" Pendant","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(18)+"Barn Row 2";else if(18===e)this.globalVar.unlockables.set("barnRow2",!0),n=["Barn Row 2",""],v=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+v+" Renown";else if(20===e)v=1,null==(_=this.globalVar.resources.find(me=>"Renown"===me.name))?this.globalVar.resources.push(new pe("Renown",v)):_.amount+=v,n=[v+" Renown",""],c=50,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(22)+c+" Stat Increasing Food";else if(22===e)this.increaseAllFood(c=50),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(25)+"Research Center Specialization";else if(25===e)this.globalVar.unlockables.set("researchCenterSpecialization",!0),n=["Research Center Specialization",this.getSpecializationDescription("Research Center")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(27)+"Duo Races";else if(27===e){if(this.globalVar.unlockables.set("duoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(s=this.globalVar.shop.find(ce=>"Specialty"===ce.name))){var y=s.itemList.find(ce=>"Incubator Upgrade Lv1"===ce.name);null!=y&&(y.isAvailable=!0)}n=["Duo Races","A new race type has been unlocked! Race in pairs to complete this long distance race. Success here will generate more interest for your facility, this time drawing in curious researchers. Gain Research Levels that improve incubator results."];var S=2500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(30)+S+" Coins"}else if(30===e){var D=2500;null==(u=this.globalVar.resources.find(me=>"Coins"===me.name))?this.globalVar.resources.push(new pe("Coins",D)):u.amount+=D,n=[D+" Coins",""],c=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(32)+c+" Mangoes"}else if(32===e)c=1,null==(u=this.globalVar.resources.find(me=>"Blue Baton"===me.name))?this.globalVar.resources.push(new pe("Blue Baton",c,Y.Equipment)):u.amount+=c,n=[c+" Blue Baton","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(33)+20+" Mangoes";else if(33===e)c=20,null==(u=this.globalVar.resources.find(me=>"Mangoes"===me.name))?this.globalVar.resources.push(new pe("Mangoes",c,Y.Food)):u.amount+=c,n=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(35)+"Penguin";else if(35===e){var T=this.globalVar.animals.find(ce=>ce.type===X.Penguin);null!=T&&(T.isAvailable=!0,this.unlockAnimalAbilities(T),this.unlockOtherRaceCourseTypeAnimals(T.raceCourseType),null!=(a=this.globalVar.animalDecks.find(me=>me.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(we=>{we.raceCourseType===(null==T?void 0:T.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(T))),n=["Penguin","The Penguin is a Tundra racing animal that can slide carefully or recklessly."],S=3500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(37)+S+" Coins"}else if(37===e)D=3500,null==(u=this.globalVar.resources.find(me=>"Coins"===me.name))?this.globalVar.resources.push(new pe("Coins",D)):u.amount+=D,n=[D+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(38)+"5 Medals";else if(38===e)null==(u=this.globalVar.resources.find(ce=>"Medals"===ce.name))?this.globalVar.resources.push(new pe("Medals",5)):u.amount+=5,n=["5 Medals",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(40)+"Barn Row 3";else if(40===e)this.globalVar.unlockables.set("barnRow3",!0),n=["Barn Row 3",""],c=250,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(43)+c+" Stat Increasing Food";else if(43===e)this.increaseAllFood(c=250),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(45)+"Salamander";else if(45===e){var a,G=this.globalVar.animals.find(ce=>ce.type===X.Salamander);null!=G&&(G.isAvailable=!0,this.unlockAnimalAbilities(G),this.unlockOtherRaceCourseTypeAnimals(G.raceCourseType),null!=(a=this.globalVar.animalDecks.find(me=>me.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(we=>{we.raceCourseType===(null==G?void 0:G.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(G))),n=["Salamander","The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration."],v=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(47)+v+" Renown"}else if(47===e)v=10,null==(_=this.globalVar.resources.find(we=>"Renown"===we.name))?this.globalVar.resources.push(new pe("Renown",v)):_.amount+=v,n=[v+" Renown",""],D=15e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(50)+D+" Coins";else if(50===e)S=15e3,null==(u=this.globalVar.resources.find(me=>"Coins"===me.name))?this.globalVar.resources.push(new pe("Coins",S)):u.amount+=S,n=[S+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(53)+"Rainbow Races";else if(53===e){var s;if(this.globalVar.unlockables.set("rainbowRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(s=this.globalVar.shop.find(ce=>"Specialty"===ce.name))){var ee=s.itemList.find(ce=>"Talent Point Voucher"===ce.name);null!=ee&&(ee.isAvailable=!0)}n=["Rainbow Race","A new race type has been unlocked! This race requires a full team effort spanning all five course types. Your team of researchers are on hand for these races, coming up with more efficient ways to win. Gain Talent Tree Points that can be spent to improve various course types."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(55)+"Amethyst Orb"}else if(55===e)this.globalVar.resources.push(new pe("Amethyst Orb",1,Y.Equipment)),this.globalVar.unlockables.set("orbs",!0),n=["Amethyst Orb","You receive a glowing violet orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(58)+"Barn Row 4";else if(58===e)this.globalVar.unlockables.set("barnRow4",!0),n=["Barn Row 4",""],v=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(60)+"Sapphire Orb";else if(60===e)this.globalVar.resources.push(new pe("Sapphire Orb",1,Y.Equipment)),n=["Sapphire Orb","You receive a glowing blue orb. What it does is a mystery."],c=100,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(62)+c+" Mangoes";else if(62===e){var u;c=100,null==(u=this.globalVar.resources.find(me=>"Mangoes"===me.name))?this.globalVar.resources.push(new pe("Mangoes",c,Y.Food)):u.amount+=c,n=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(65)+"Amber Orb"}else if(65===e)this.globalVar.resources.push(new pe("Amber Orb",1,Y.Equipment)),n=["Amber Orb","You receive a glowing orange orb. What it does is a mystery."],c=25,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(67)+c+" Renown";else if(67===e){var _;v=25,null==(_=this.globalVar.resources.find(me=>"Renown"===me.name))?this.globalVar.resources.push(new pe("Renown",v)):_.amount+=v,n=[v+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(70)+"Topaz Orb"}else 70===e?(this.globalVar.resources.push(new pe("Topaz Orb",1,Y.Equipment)),n=["Topaz Orb","You receive a glowing yellow orb. What it does is a mystery."],c=500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(73)+c+" Stat Increasing Food Items"):73===e?(this.increaseAllFood(c=500),n=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(75)+"Emerald Orb"):75===e?(this.globalVar.resources.push(new pe("Emerald Orb",1,Y.Equipment)),n=["Emerald Orb","You receive a glowing green orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(78)+"Ruby Orb"):78===e&&(this.globalVar.resources.push(new pe("Ruby Orb",1,Y.Equipment)),n=["Ruby Orb","You receive a glowing red orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription="More Coming Soon!");return n}increaseAllFood(e){var n=this.globalVar.resources.find(c=>"Apples"===c.name);null==n?this.globalVar.resources.push(new pe("Apples",e,Y.Food)):n.amount+=e;var r=this.globalVar.resources.find(c=>"Bananas"===c.name);null==r?this.globalVar.resources.push(new pe("Bananas",e,Y.Food)):r.amount+=e;var a=this.globalVar.resources.find(c=>"Oranges"===c.name);null==a?this.globalVar.resources.push(new pe("Oranges",e,Y.Food)):a.amount+=e;var o=this.globalVar.resources.find(c=>"Strawberries"===c.name);null==o?this.globalVar.resources.push(new pe("Strawberries",e,Y.Food)):o.amount+=e;var s=this.globalVar.resources.find(c=>"Carrots"===c.name);null==s?this.globalVar.resources.push(new pe("Carrots",e,Y.Food)):s.amount+=e;var l=this.globalVar.resources.find(c=>"Turnips"===c.name);null==l?this.globalVar.resources.push(new pe("Turnips",e,Y.Food)):l.amount+=e}GenerateCircuitRacesForRank(e){this.globalVar.circuitRaces=[];var n=this.utilityService.getNumericValueOfCircuitRank(e),r=1,a=60,o=15,s=100,l=1.125,c=80*n,u=1.1,d=.9,_=3;"Z"===e?_=1:"Y"==e&&(_=2);for(var y=0;y<_;y++){var S=[],D="C"+n+y;if(n<=2){c=-37;var w=new In;w.courseType=z.Flatland,2===n?0===y?w.terrain=new ei(He.Sunny):1===y&&(w.terrain=new ei(He.Rainy)):w.terrain=new ei(He.Sunny),w.distance=Math.round(s*l**n+c),S.push(w)}else if(n<=9){c=3===n?20*n:40*n,(T=[]).push(z.Flatland),T.push(z.Mountain);var L=this.getCourseTypeInRandomOrderSeeded(T,D+"cl1"),G=this.utilityService.getRandomSeededNumber(20,80,D+"l1d"),we=(ee=this.utilityService.getRandomSeededNumber(20,80,D+"l2d"))*(ce=a/(G+ee));(me=G*ce)<o?(me=0,we=a):we<o&&(we=0,me=a),me>0&&((Fe=new In).courseType=L[0],Fe.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,D+"l1r")*(me/a),Fe.terrain=this.getRandomTerrain(Fe.courseType,D+"lt1d"),S.push(Fe)),we>0&&((Ye=new In).courseType=L[1],Ye.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,D+"l2r")*(we/a),Ye.terrain=this.getRandomTerrain(Ye.courseType,D+"lt2d"),S.push(Ye))}else{o=10,10===n?c=50*n:11===n&&(c=60*n);var T=[];n<=43?(T.push(z.Flatland),T.push(z.Mountain),T.push(z.Ocean)):n<=51?(T.push(z.Flatland),T.push(z.Mountain),T.push(z.Ocean),T.push(z.Tundra)):(T.push(z.Flatland),T.push(z.Mountain),T.push(z.Ocean),T.push(z.Tundra),T.push(z.Volcanic)),L=this.getCourseTypeInRandomOrderSeeded(T,D+"courses1"),G=this.utilityService.getRandomSeededNumber(20,80,D+"l1d");var ce,me,Fe,Ye,ee=this.utilityService.getRandomSeededNumber(20,80,D+"l2d"),dt=this.utilityService.getRandomSeededNumber(20,80,D+"l3d"),yt=(we=ee*(ce=a/(G+ee+dt)),dt*ce);if((me=G*ce)<o?(we+=me/2,yt+=me/2,me=0):we<o?(me+=we/2,yt+=we/2,we=0):yt<o&&(me+=yt/2,we+=yt/2,yt=0),me>0&&((Fe=new In).courseType=L[0],Fe.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,D+"l1r")*(me/a),Fe.terrain=this.getRandomTerrain(Fe.courseType,D+"tl1d"),S.push(Fe)),we>0&&((Ye=new In).courseType=L[1],Ye.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,D+"l2r")*(we/a),Ye.terrain=this.getRandomTerrain(Ye.courseType,D+"tl2d"),S.push(Ye)),yt>0){var Xt=new In;Xt.courseType=L[2],Xt.distance=Math.round(s*l**n+c)*this.utilityService.getRandomSeededNumber(d,u,D+"l3r")*(yt/a),Xt.terrain=this.getRandomTerrain(Xt.courseType,D+"tl3d"),S.push(Xt)}}var Et=0;S.forEach(_t=>{Et+=_t.distance}),S.forEach(_t=>{_t.pathData=this.GenerateRaceLegPaths(_t,Et)}),this.globalVar.circuitRaces.push(new gi(S,e,!0,r,Et,a,this.GenerateCircuitRaceRewards(e),void 0,void 0,Pe.circuit)),r+=1}}reorganizeLegsByDeckOrder(e,n){return n.isCourseOrderActive?e.sort((r,a)=>n.courseTypeOrder.indexOf(r.courseType)-n.courseTypeOrder.indexOf(a.courseType)):e}reorganizeAnimalsByDeckOrder(e,n){return n.isCourseOrderActive?e.sort((r,a)=>n.courseTypeOrder.indexOf(r.raceCourseType)-n.courseTypeOrder.indexOf(a.raceCourseType)):e}getCourseTypeInRandomOrder(e){for(var n=[],r=e.length,a=0;a<r;a++){var o=this.utilityService.getRandomInteger(1,e.length);n.push(e[o-1]),e=e.filter(s=>s!==e[o-1])}return n}getCourseTypeInRandomOrderSeeded(e,n="seeded"){for(var r=[],a=e.length,o=0;o<a;o++){var s=this.utilityService.getRandomSeededInteger(1,e.length,n);r.push(e[s-1]),e=e.filter(l=>l!==e[s-1])}return r}getRandomTerrain(e,n){var r=[];e===z.Flatland||e===z.Mountain?(r.push(He.Sunny),r.push(He.Rainy),r.push(He.Stormy),r.push(He.Torrid),r.push(He.Snowfall)):e===z.Ocean?(r.push(He.Sunny),r.push(He.Maelstrom),r.push(He.Stormy),r.push(He.Snowfall)):e===z.Tundra?(r.push(He.Sunny),r.push(He.Hailstorm),r.push(He.Stormy),r.push(He.Snowfall)):e===z.Volcanic&&(r.push(He.Sunny),r.push(He.Ashfall),r.push(He.Stormy),r.push(He.Torrid));var a;return a=null!=n?this.utilityService.getRandomSeededInteger(1,r.length,n):this.utilityService.getRandomInteger(1,r.length),new ei(r[a-1])}getRandomGrandPrixWeatherCluster(e,n){var r=[];r.push(Ei.clearSkies),r.push(Ei.coldSpell),r.push(Ei.inclementWeather);var o=r[(null!=e?this.utilityService.getRandomSeededInteger(1,r.length,e):this.utilityService.getRandomInteger(1,r.length))-1];if(this.globalVar.eventRaceData.animalData.length>0){var s=.2,l=this.globalVar.modifiers.find(c=>"weatherMoraleBoostModifier"===c.text);void 0!==l&&(s=l.value),this.globalVar.eventRaceData.animalData.forEach(c=>{var u=this.globalVar.animals.find(d=>d.type===c.associatedAnimalType);void 0!==u&&(void 0!==n&&this.animalGainsMoraleBoostFromWeather(u.raceCourseType,n)&&(c.morale-=+s),this.animalGainsMoraleBoostFromWeather(u.raceCourseType,o)&&(c.morale+=+s))})}return o}animalGainsMoraleBoostFromWeather(e,n){var r=!1;return(n===Ei.clearSkies&&(e===z.Volcanic||e===z.Flatland)||n===Ei.inclementWeather&&e===z.Ocean||n===Ei.coldSpell&&(e===z.Tundra||e===z.Mountain))&&(r=!0),r}getRandomGrandPrixTerrainFromWeatherCluster(e,n,r){var a=[];e===Ei.clearSkies?(a.push(He.Sunny),a.push(He.Torrid),a.push(He.Ashfall)):e===Ei.coldSpell?(a.push(He.Snowfall),a.push(He.Hailstorm),a.push(He.Sunny)):e===Ei.inclementWeather&&(a.push(He.Rainy),a.push(He.Stormy),a.push(He.Maelstrom),a.push(He.Hailstorm)),n===z.Flatland&&(a=a.filter(s=>s!==He.Ashfall&&s!==He.Hailstorm&&s!==He.Maelstrom)),n===z.Mountain&&(a=a.filter(s=>s!==He.Ashfall&&s!==He.Hailstorm&&s!==He.Maelstrom)),n===z.Ocean&&(a=a.filter(s=>s!==He.Ashfall&&s!==He.Hailstorm&&s!==He.Rainy&&s!==He.Torrid)),n===z.Tundra&&(a=a.filter(s=>s!==He.Ashfall&&s!==He.Rainy&&s!==He.Maelstrom&&s!==He.Torrid)),n===z.Volcanic&&(a=a.filter(s=>s!==He.Snowfall&&s!==He.Hailstorm&&s!==He.Maelstrom));var o;return o=null!=r?this.utilityService.getRandomSeededInteger(1,a.length,r):this.utilityService.getRandomInteger(1,a.length),new ei(a[o-1])}stopGrandPrixRace(){this.globalVar.eventRaceData.animalData.forEach(e=>{e.isCurrentlyRacing=!1}),this.globalVar.eventRaceData.isLoading=!1,this.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalVar.eventRaceData.isRunning=!1,this.globalVar.eventRaceData.isCatchingUp=!1,this.globalVar.eventRaceData.overallTimeCounter-=this.globalVar.eventRaceData.segmentTimeCounter,this.globalVar.eventRaceData.segmentTimeCounter=0,this.globalVar.eventRaceData.currentRaceSegment.reduceExportSize()}GetCircuitRankValue(e){for(var n=1;e.length>1;){var r=e.length;n+=26,(e=e.substring(1)).length>=r&&(e="")}return n+(91-e.charCodeAt(0))}GenerateCircuitRaceRewards(e){var n=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new pe("Coins",Math.round(50*1.01**n))),l.push(new pe("Renown",parseFloat((1.03*1.03**n/100).toFixed(3)))),l}GenerateLocalRaceRewards(e){var n=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new pe("Coins",Math.round(10*1.0075**n))),l.push(new pe("Renown",parseFloat((1.01*1.015**n/100).toFixed(3)))),l}GenerateMonoRaceRewards(e){var n=[];n.push(new pe("Facility Level",1,Y.Progression));var r=this.GetCircuitRankValue(e);return n.push(new pe("Coins",Math.round(30*1.01**r))),n.push(new pe("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateDuoRaceRewards(e){var n=[];n.push(new pe("Research Level",1,Y.Progression));var r=this.GetCircuitRankValue(e);return n.push(new pe("Coins",Math.round(100*1.01**r))),n.push(new pe("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateRainbowRaceRewards(e){var n=[];n.push(new pe("Talent Points",1,Y.Progression));var r=this.GetCircuitRankValue(e);return n.push(new pe("Coins",Math.round(250*1.01**r))),n.push(new pe("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),n}GenerateLocalRaces(){this.GenerateMonoRaces(this.globalVar.monoRank),this.GenerateDuoRaces(this.globalVar.duoRank),this.GenerateRainbowRaces(this.globalVar.rainbowRank)}GenerateMonoRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(S=>S.localRaceType!==Wt.Mono),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,l=100*n,d=[],m=new In;if(1===n)m.courseType=z.Flatland;else{var v=[];n<9?(v.push(z.Flatland),v.push(z.Mountain)):n<40?(v.push(z.Flatland),v.push(z.Mountain),v.push(z.Ocean)):n<50?(v.push(z.Flatland),v.push(z.Mountain),v.push(z.Ocean),v.push(z.Tundra)):(v.push(z.Flatland),v.push(z.Mountain),v.push(z.Ocean),v.push(z.Tundra),v.push(z.Volcanic)),null!=this.globalVar.lastMonoRaceCourseType&&n>2&&(v=v.filter(S=>S!==this.globalVar.lastMonoRaceCourseType));var _=this.getCourseTypeInRandomOrderSeeded(v,"monoseed"+e+n);m.courseType=_[0]}m.terrain=this.getRandomTerrain(m.courseType,"monoseed"+e+n),m.distance=Math.round((155*1.155**n+l)*this.utilityService.getRandomSeededNumber(.9,1.1)),d.push(m);var y=m.distance;d.forEach(S=>{S.pathData=this.GenerateRaceLegPaths(S,y)}),this.globalVar.localRaces.push(new gi(d,e,!1,r,y,90,this.GenerateMonoRaceRewards(e),Wt.Mono,void 0,Pe.special)),r+=1}}GenerateDuoRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(D=>D.localRaceType!==Wt.Duo),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,u=[],d=[];n<=10?(d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean)):n<=20?(d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean),d.push(z.Tundra)):(d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean),d.push(z.Tundra),d.push(z.Volcanic));var m=this.getCourseTypeInRandomOrderSeeded(d,"duooseed"+e+n),v=this.utilityService.getRandomSeededNumber(.8,1.2),_=new In;_.courseType=m[0],_.distance=Math.round(6500*1.1**n*v*.5),_.terrain=this.getRandomTerrain(_.courseType,"duoseedl1"+e+n),u.push(_);var y=new In;y.courseType=m[1],y.distance=Math.round(6500*1.1**n*v*.5),y.terrain=this.getRandomTerrain(y.courseType,"duoseedl2"+e+n),u.push(y);var S=_.distance+y.distance;u.forEach(D=>{D.pathData=this.GenerateRaceLegPaths(D,S)}),this.globalVar.localRaces.push(new gi(u,e,!1,r,S,80,this.GenerateDuoRaceRewards(e),Wt.Duo,void 0,Pe.special)),r+=1}}GenerateRainbowRaces(e){var n=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(L=>L.localRaceType!==Wt.Rainbow),!(n>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,o=1e5,s=1.135,u=[],d=[];d.push(z.Flatland),d.push(z.Mountain),d.push(z.Ocean),d.push(z.Tundra),d.push(z.Volcanic);var m=this.getCourseTypeInRandomOrderSeeded(d,"rainbow"+e+n),v=this.utilityService.getRandomSeededNumber(.8,1.2),_=new In;_.courseType=m[0],_.distance=Math.round(o*s**n*v*.2),_.terrain=this.getRandomTerrain(_.courseType,"rainbowl1"+e+n),u.push(_);var y=new In;y.courseType=m[1],y.distance=Math.round(o*s**n*v*.2),y.terrain=this.getRandomTerrain(y.courseType,"rainbowl2"+e+n),u.push(y);var S=new In;S.courseType=m[2],S.distance=Math.round(o*s**n*v*.2),S.terrain=this.getRandomTerrain(S.courseType,"rainbowl3"+e+n),u.push(S);var D=new In;D.courseType=m[3],D.distance=Math.round(o*s**n*v*.2),D.terrain=this.getRandomTerrain(D.courseType,"rainbowl4"+e+n),u.push(D);var w=new In;w.courseType=m[4],w.distance=Math.round(o*s**n*v*.2),w.terrain=this.getRandomTerrain(w.courseType,"rainbowl5"+e+n),u.push(w);var T=_.distance+y.distance+S.distance+D.distance+w.distance;u.forEach(L=>{L.pathData=this.GenerateRaceLegPaths(L,T)}),this.globalVar.localRaces.push(new gi(u,e,!1,r,T,120,this.GenerateRainbowRaceRewards(e),Wt.Rainbow,void 0,Pe.special)),r+=1}}generateFreeRace(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),n=60,r=15,a=90,o=1.125,s=40*e;e>=11&&(s=70*e);var l=1.05,c=.8,m=[];if(e<=2){var v=new In;v.courseType=z.Flatland,v.terrain=this.getRandomTerrain(v.courseType),v.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l)),m.push(v)}else if(e<=10){(_=[]).push(z.Flatland),_.push(z.Mountain);var y=this.getCourseTypeInRandomOrder(_),S=this.utilityService.getRandomNumber(10,90),G=(D=this.utilityService.getRandomNumber(10,90))*(T=n/(S+D));(L=S*T)<r?(L=0,G=n):G<r&&(G=0,L=n),L>0&&((ee=new In).courseType=y[0],ee.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(L/n),ee.terrain=this.getRandomTerrain(ee.courseType),m.push(ee)),G>0&&((re=new In).courseType=y[1],re.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(G/n),re.terrain=this.getRandomTerrain(re.courseType),m.push(re))}else{r=10;var _=[];e<37?(_.push(z.Flatland),_.push(z.Mountain),_.push(z.Ocean)):e<47?(_.push(z.Flatland),_.push(z.Mountain),_.push(z.Ocean),_.push(z.Tundra)):(_.push(z.Flatland),_.push(z.Mountain),_.push(z.Ocean),_.push(z.Tundra),_.push(z.Volcanic)),y=this.getCourseTypeInRandomOrder(_),S=this.utilityService.getRandomNumber(10,90);var T,L,ee,re,D=this.utilityService.getRandomNumber(10,90),ce=this.utilityService.getRandomNumber(10,90),me=(G=D*(T=n/(S+D+ce)),ce*T);if((L=S*T)<r?(G+=L/2,me+=L/2,L=0):G<r?(L+=G/2,me+=G/2,G=0):me<r&&(L+=me/2,G+=me/2,me=0),L>0&&((ee=new In).courseType=y[0],ee.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(L/n),ee.terrain=this.getRandomTerrain(ee.courseType),m.push(ee)),G>0&&((re=new In).courseType=y[1],re.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(G/n),re.terrain=this.getRandomTerrain(re.courseType),m.push(re)),me>0){var we=new In;we.courseType=y[2],we.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(me/n),we.terrain=this.getRandomTerrain(we.courseType),m.push(we)}}var Fe=0,Ye=this.globalVar.animalDecks.find(dt=>dt.isPrimaryDeck);return void 0!==Ye&&(m=this.reorganizeLegsByDeckOrder(m,Ye)),m.forEach(dt=>{Fe+=dt.distance}),m.forEach(dt=>{dt.pathData=this.GenerateRaceLegPaths(dt,Fe)}),new gi(m,this.globalVar.circuitRank,!1,1,Fe,n,this.GenerateLocalRaceRewards(this.globalVar.circuitRank),Wt.Free,void 0,Pe.circuit)}getTotalSegments(e){return(null==this.globalVar.circuitRaces||0===this.globalVar.circuitRaces.length)&&this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),Math.ceil(this.globalVar.eventRaceData.grandPrixTimeLength/this.globalVar.eventRaceData.segmentTime),e/this.utilityService.getClosestWholeNumber(this.globalVar.circuitRaces[0].length*(this.globalVar.eventRaceData.segmentTime/this.globalVar.circuitRaces[0].timeToComplete),e)}initialGrandPrixSetup(e){this.globalVar.eventRaceData=new Bi,this.globalVar.eventRaceData.rank=e;var n=this.utilityService.getNumericValueOfCircuitRank(e);this.globalVar.eventRaceData.totalDistance=5e8*n,this.globalVar.eventRaceData.currentRaceSegmentCount=0,this.globalVar.eventRaceData.segmentTimeCounter=0,this.globalVar.eventRaceData.totalSegments=this.getTotalSegments(this.globalVar.eventRaceData.totalDistance),this.globalVar.eventRaceData.remainingRewards=this.globalVar.eventRaceData.totalRewards=this.getGrandPrixRewardCount(),this.globalVar.eventRaceData.animalData=[],this.globalVar.animals.forEach(r=>{this.globalVar.eventRaceData.animalData.push(new fD(r.type))}),this.globalVar.eventRaceData.weatherCluster=this.getRandomGrandPrixWeatherCluster(),this.globalVar.previousEventRewards=[]}animalCanRaceGrandPrix(e){var n=!0,r=this.getBreedLevelRequiredForGrandPrix();e.breedLevel<r&&(n=!1);var a=this.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);return null!=a&&a.exhaustionStatReduction<.5&&(n=!1),n}getGrandPrixRacingAnimal(){var e=new wt,n=this.globalVar.animalDecks.find(l=>l.isEventDeck);if(void 0!==n){var r=[];if(n.isCourseOrderActive){for(var a=0;a<n.selectedAnimals.length;a++)if(n.courseTypeOrder.length>a){var o=n.courseTypeOrder[a],s=n.selectedAnimals.find(l=>l.raceCourseType===o);void 0!==s&&r.push(s)}}else n.selectedAnimals.forEach(l=>{r.push(l)});r=r.filter(l=>this.animalCanRaceGrandPrix(l)),this.globalVar.eventRaceData.isCatchingUp&&(r=r.filter(l=>!this.shouldShowSlowSegmentWarning(l))),r.length>0&&(e=r[0])}return this.globalVar.eventRaceData.animalData.forEach(l=>{if(l.isCurrentlyRacing){var c=this.globalVar.animals.find(u=>u.type===l.associatedAnimalType);void 0!==c&&(e=c.makeCopy(c))}}),e}getCurrentlyActiveGrandPrixRacingAnimal(){var e=new wt;return this.globalVar.eventRaceData.isRunning&&this.globalVar.eventRaceData.animalData.forEach(n=>{if(n.isCurrentlyRacing){var r=this.globalVar.animals.find(a=>a.type===n.associatedAnimalType);void 0!==r&&(e=r.makeCopy(r))}}),e}getExhaustionOfAnimal(e){var n;return null===(n=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===n?void 0:n.exhaustionStatReduction}getMoraleOfAnimal(e){var n;return null===(n=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===n?void 0:n.morale}generateGrandPrixSegment(e){var n=this.globalVar.eventRaceData,r=this.getRemainingEventRaceTime(),a=n.totalDistance/n.totalSegments,o=[],s=new In;return s.courseType=e.raceCourseType,s.terrain=this.getRandomGrandPrixTerrainFromWeatherCluster(this.globalVar.eventRaceData.weatherCluster,s.courseType,this.getEventStartDateTime().toString()+this.getEventTimePer5Min().toString()),s.distance=a,o.push(s),o.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,a)}),new gi(o,this.globalVar.circuitRank,!1,1,a,r,void 0,void 0,void 0,Pe.event,Le.grandPrix)}getGrandPrixRewardCount(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.eventRaceData.rank),n=5,r=this.globalVar.modifiers.find(u=>"metersPerCoinsGrandPrixModifier"===u.text);void 0!==r&&(n=r.value);var a=5,o=this.globalVar.modifiers.find(u=>"metersPerRenownGrandPrixModifier"===u.text);return void 0!==o&&(a=o.value),this.globalVar.eventRaceData.totalDistance/(n*e)+this.globalVar.eventRaceData.totalDistance/(a*e)+4}getEventStartDateTime(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?l:o}getTimeToEventRace(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?(l.getTime()-e.getTime())/1e3:(o.getTime()-e.getTime())/1e3}getRemainingEventRaceTime(){var e=new Date,n=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-n+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-n+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-n+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-n+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?e>l?(c.getTime()-e.getTime())/1e3:(s.getTime()-e.getTime())/1e3:0}getEventTimePer5Min(){var e=this.getRemainingEventRaceTime();return Math.floor(e/60/5)}generateTrackRace(e,n){var r=60,a=[],o=new In;o.courseType=e.raceCourseType,n===$n.practice?(r=45,o.distance=100,o.terrain=new ei(He.Stormy)):n===$n.novice?(r=60,o.distance=1e3,o.terrain=new ei(He.Stormy)):n===$n.intermediate?(r=80,o.distance=1e4,o.terrain=new ei(He.Stormy)):n===$n.master&&(r=100,o.distance=1e5,o.terrain=new ei(He.Stormy)),a.push(o);var s=0;return a.forEach(l=>{s+=l.distance}),a.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,s,n)}),new gi(a,this.globalVar.circuitRank,!1,1,s,r,void 0,Wt.Track,n,Pe.trainingTrack)}GenerateRaceLegPaths(e,n,r){for(var o=[],s=e.distance,c=Math.round(s/(n/20)),u=!1,d=qe.Regular,m=s/c,v=0;v<c;v++){var _=new Jh;0!==v?v!==c-1?(_.length=s>m?m:s,(s-=_.length)<0&&(s=0),u?_.routeDesign=qe.Regular:(_.routeDesign=this.GetSpecialRoute(e.courseType,v+2<c,d),e.specialPathCount+=1,_.isSpecialPath=!0),u=_.routeDesign!==qe.Regular,_.setStumbleFields(),o.push(_),d=_.routeDesign):(_.length=s,_.routeDesign=e.courseType===z.Volcanic?qe.LastRegular:qe.Regular,_.setStumbleFields(),o.push(_),d=_.routeDesign):(_.length=m,_.routeDesign=e.courseType===z.Volcanic?qe.FirstRegular:qe.Regular,_.setStumbleFields(),o.push(_),s-=_.length,d=_.routeDesign)}return o}GetSpecialRoute(e,n,r){var a=qe.Regular,s=this.utilityService.getRandomInteger(1,3);return 1===s||(2===s?e===z.Flatland?a=qe.S:e===z.Mountain?a=qe.Crevasse:e===z.Ocean?a=qe.Waves:e===z.Tundra?a=qe.Cavern:e===z.Volcanic&&(a=qe.Regular):3===s&&(e===z.Flatland?a=qe.Bumps:e===z.Mountain?a=qe.Gaps:e===z.Ocean?a=qe.Dive:e===z.Tundra?a=qe.Hills:e===z.Volcanic&&(a=qe.SteppingStones))),a}calculateAnimalRacingStats(e){var n=e.currentStats.defaultMaxSpeedModifier,r=e.currentStats.defaultAccelerationModifier,a=e.currentStats.defaultStaminaModifier,o=e.currentStats.defaultPowerModifier,s=e.currentStats.defaultFocusModifier,l=e.currentStats.defaultAdaptabilityModifier,c=.02,u=e.getAnimalType().toLowerCase(),d=this.globalVar.modifiers.find(Ht=>Ht.text===u+"DefaultMaxSpeedModifier"),m=this.globalVar.modifiers.find(Ht=>Ht.text===u+"DefaultAccelerationModifier"),v=this.globalVar.modifiers.find(Ht=>Ht.text===u+"DefaultStaminaModifier"),_=this.globalVar.modifiers.find(Ht=>Ht.text===u+"DefaultPowerModifier"),y=this.globalVar.modifiers.find(Ht=>Ht.text===u+"DefaultFocusModifier"),S=this.globalVar.modifiers.find(Ht=>Ht.text===u+"DefaultAdaptabilityModifier");null!=d&&(n=d.value),null!=m&&(r=m.value),null!=v&&(a=v.value),null!=_&&(o=_.value),null!=y&&(s=y.value),null!=S&&(l=S.value);var D=this.getTraitModifier(e,be.topSpeed),w=this.getTraitModifier(e,be.acceleration),T=this.getTraitModifier(e,be.endurance),L=this.getTraitModifier(e,be.power),G=this.getTraitModifier(e,be.focus),ee=this.getTraitModifier(e,be.adaptability),re=null!==e.equippedOrb&&"Ruby Orb"===e.equippedOrb.name?this.globalVar.orbStats.maxSpeedIncrease:1,ce=null!==e.equippedOrb&&"Amber Orb"===e.equippedOrb.name?this.globalVar.orbStats.accelerationRateIncrease:1,me=null!==e.equippedOrb&&"Topaz Orb"===e.equippedOrb.name?this.globalVar.orbStats.staminaIncrease:1,we=null!==e.equippedOrb&&"Amethyst Orb"===e.equippedOrb.name?this.globalVar.orbStats.powerEfficiencyIncrease:1,Fe=null!==e.equippedOrb&&"Sapphire Orb"===e.equippedOrb.name?this.globalVar.orbStats.focusDistanceIncrease:1,Ye=null!==e.equippedOrb&&"Emerald Orb"===e.equippedOrb.name?this.globalVar.orbStats.adaptabilityDistanceIncrease:1,dt=this.globalVar.modifiers.find(Ht=>"breedLevelStatModifier"===Ht.text);null!=dt&&(c=dt.value),c=1+c*(e.breedLevel-1);var yt=1,Xt=1,Et=1,_t=1,oe=1,R=1;e.talentTree.talentTreeType===ct.sprint&&(R=1+e.talentTree.column1Row3Points/100,Xt=1+e.talentTree.column2Row3Points/100,_t=1+e.talentTree.column3Row3Points/100),e.talentTree.talentTreeType===ct.longDistance&&(oe=1+e.talentTree.column1Row3Points/100,yt=1+e.talentTree.column2Row3Points/100,Et=1+e.talentTree.column3Row3Points/100);var Qe=this.GetAnimalDiminishingReturns(e);e.currentStats.maxSpeedMs=e.currentStats.calculateMaxSpeed(n*c*D*e.incubatorStatUpgrades.maxSpeedModifier*yt,Qe,re),e.currentStats.accelerationMs=e.currentStats.calculateTrueAcceleration(r*c*w*e.incubatorStatUpgrades.accelerationModifier*Xt,Qe,ce),e.currentStats.stamina=e.currentStats.calculateStamina(a*c*T*e.incubatorStatUpgrades.staminaModifier*Et,Qe,me),e.currentStats.powerMs=e.currentStats.calculateTruePower(o*c*L*e.incubatorStatUpgrades.powerModifier*_t,Qe,we),e.currentStats.focusMs=e.currentStats.calculateTrueFocus(s*c*G*e.incubatorStatUpgrades.focusModifier*oe,Qe,Fe),e.currentStats.adaptabilityMs=e.currentStats.calculateTrueAdaptability(l*c*ee*e.incubatorStatUpgrades.adaptabilityModifier*R,Qe,Ye),e.currentStats.burstChance=e.currentStats.calculateBurstChance(c),e.currentStats.burstDistance=e.currentStats.calculateBurstDistance(c),this.updateTrackedMaxStats(e)}getTraitModifier(e,n){var r=1;if(null!=e.trait){var a=e.trait.researchLevel,o=e.trait.researchLevel,s=this.globalVar.modifiers.find(l=>"maximumTraitNegativePercentModifier"===l.text);void 0!==s&&o>s.value&&(o=s.value),e.trait.positiveStatGain===n&&(r+=a/100),e.trait.negativeStatGain===n&&(r-=o/100)}return r}GetAnimalDiminishingReturns(e){var n=e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalVar.resources.find(s=>"Facility Level"===s.name);if(null==r)return n;var a=5,o=this.globalVar.modifiers.find(s=>"facilityLevelModifier"===s.text);return void 0!==o&&(a=o.value),n+r.amount*(a+e.miscStats.diminishingReturnsBonus)}IncreaseAnimalBreedGauge(e,n){e.breedGaugeXp+=n,e.breedGaugeXp>=e.breedGaugeMax&&(e.breedGaugeXp=e.breedGaugeMax,e.autoBreedActive&&this.BreedAnimal(e))}getBreedLevelRequiredForGrandPrix(){var e=50,n=this.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}BreedAnimal(e){if(!(e.breedGaugeXp<e.breedGaugeMax)){var n=5,r=this.globalVar.modifiers.find(ee=>"breedGaugeMaxIncreaseModifier"===ee.text);if(null!=r&&(n=r.value),e.breedLevel+=1,e.breedGaugeXp=0,e.breedGaugeMax+=n,null!=this.globalVar.resources.find(ee=>ee.name.includes("Incubator Upgrade"))&&null!=e.trait){var o=.001,s=this.globalVar.modifiers.find(ee=>"incubatorUpgradeIncreaseModifier"===ee.text);null!=s&&(o=s.value);var l=e.trait.researchLevel*o,c=this.globalVar.resources.find(ee=>"Incubator Upgrade Lv1"===ee.name),u=this.globalVar.resources.find(ee=>"Incubator Upgrade Lv2"===ee.name),d=this.globalVar.resources.find(ee=>"Incubator Upgrade Lv3"===ee.name);null!=this.globalVar.resources.find(ee=>"Incubator Upgrade Lv4"===ee.name)?l>.1&&(l=.1):null!=d?l>.05&&(l=.05):null!=u?l>.025&&(l=.025):null!=c&&l>.01&&(l=.01),e.trait.positiveStatGain===be.topSpeed&&(e.incubatorStatUpgrades.maxSpeedModifier+=l),e.trait.positiveStatGain===be.acceleration&&(e.incubatorStatUpgrades.accelerationModifier+=l),e.trait.positiveStatGain===be.endurance&&(e.incubatorStatUpgrades.staminaModifier+=l),e.trait.positiveStatGain===be.power&&(e.incubatorStatUpgrades.powerModifier+=l),e.trait.positiveStatGain===be.focus&&(e.incubatorStatUpgrades.focusModifier+=l),e.trait.positiveStatGain===be.adaptability&&(e.incubatorStatUpgrades.adaptabilityModifier+=l)}var v=this.globalVar.resources.find(ee=>"Animal Handler"===ee.name),_=this.globalVar.modifiers.find(ee=>"animalHandlerModifier"===ee.text);if(null!=v&&void 0!==_&&null!=_&&v.amount>0){var y=v.amount*_.value,S=Math.round((e.currentStats.topSpeed-e.baseStats.topSpeed)*y),D=Math.round((e.currentStats.acceleration-e.baseStats.acceleration)*y),w=Math.round((e.currentStats.endurance-e.baseStats.endurance)*y),T=Math.round((e.currentStats.power-e.baseStats.power)*y),L=Math.round((e.currentStats.focus-e.baseStats.focus)*y),G=Math.round((e.currentStats.adaptability-e.baseStats.adaptability)*y);e.currentStats=new Ee(e.baseStats.topSpeed+S,e.baseStats.acceleration+D,e.baseStats.endurance+w,e.baseStats.power+T,e.baseStats.focus+L,e.baseStats.adaptability+G)}else e.currentStats=new Ee(e.baseStats.topSpeed,e.baseStats.acceleration,e.baseStats.endurance,e.baseStats.power,e.baseStats.focus,e.baseStats.adaptability);this.calculateAnimalRacingStats(e),this.globalVar.trackedStats.totalBreeds+=1}}increaseAbilityXp(e,n){var r=25,a=this.globalVar.modifiers.find(l=>"abilityLevelCapModifier"===l.text);if(null!=a&&(r=a.value),!(e.ability.abilityLevel>e.breedLevel+r)){var o=1;null!=n&&n>1&&(o=n),e.ability.abilityXp+=o,e.ability.abilityXp>=e.ability.abilityMaxXp&&(e.ability.abilityXp=0,e.ability.abilityLevel+=1,e.ability.abilityLevel%10==0&&(e.ability.abilityMaxXp+=5));var s=e.availableAbilities.find(l=>l.name===e.ability.name);null!=s&&(s.abilityXp=e.ability.abilityXp,s.abilityLevel=e.ability.abilityLevel,s.abilityMaxXp=e.ability.abilityMaxXp)}}InitializeResources(){this.globalVar.resources.push(this.initializeService.initializeResource("Coins",500,Y.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Renown",1,Y.Progression))}InitializeSettings(){this.themeService.setLightTheme(),this.globalVar.settings.set("theme",this.themeService.getActiveTheme()),this.globalVar.settings.set("skipDrawRace",!1),this.globalVar.settings.set("finishTrainingBeforeSwitching",!0),this.globalVar.settings.set("hideTips",!1),this.globalVar.settings.set("useNumbersForCircuitRank",!1),this.globalVar.settings.set("raceDisplayInfo",Kr.both),this.globalVar.settings.set("autoStartEventRace",!1)}InitializeUnlockables(){this.globalVar.unlockables.set("monoRace",!1),this.globalVar.unlockables.set("duoRace",!1),this.globalVar.unlockables.set("rainbowRace",!1),this.globalVar.unlockables.set("grandPrix",!1),this.globalVar.unlockables.set("orbs",!1),this.globalVar.unlockables.set("barnRow2",!1),this.globalVar.unlockables.set("barnRow3",!1),this.globalVar.unlockables.set("barnRow4",!1),this.globalVar.unlockables.set("barnRow5",!1),this.globalVar.unlockables.set("coaching",!1),this.globalVar.unlockables.set("barnSpecializations",!1),this.globalVar.unlockables.set("attractionSpecialization",!1),this.globalVar.unlockables.set("researchCenterSpecialization",!1)}getCoinsResourceValue(e){return new pe("Coins",e)}getMedalResourceValue(e){return new pe("Medals",e)}getTokenResourceValue(e){return new pe("Tokens",e)}unlockAnimalAbilities(e){var n=this.globalVar.shop.find(a=>"Abilities"===a.name);if(null!=n){var r=n.itemList.filter(a=>a.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}unlockOtherRaceCourseTypeAnimals(e){var n=this.globalVar.shop.find(a=>"Animals"===a.name);if(null!=n){var r=[];n.itemList.forEach(a=>{var o=this.globalVar.animals.find(s=>s.getAnimalType()===a.name);null!=o&&o.raceCourseType===e&&r.push(a)}),null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}getEquipmentDescription(e){var n="";return"Headband"===e&&(n="The first three stumbles you would have are ignored"),"Pendant"===e&&(n="Reduce your ability cooldown by 10%"),"Blinders"===e&&(n="Negative terrain effects are cut in half"),"Quick Snack"===e&&(n="Gain 100% of Stamina back after running out"),"Red Baton"===e&&(n="Increase next racer's Speed by 10% on Relay"),"Blue Baton"===e&&(n="Increase next racer's Focus by 10% on Relay"),"Violet Baton"===e&&(n="Increase next racer's Power by 10% on Relay"),"Green Baton"===e&&(n="Increase next racer's Adaptability by 10% on Relay"),"Orange Baton"===e&&(n="Increase next racer's Acceleration by 10% on Relay"),"Yellow Baton"===e&&(n="Increase next racer's Endurance by 10% on Relay"),"Amethyst Orb"===e&&(n="Increase your Power Efficiency by 10%."),"Sapphire Orb"===e&&(n="Increase your Focus Distance by 10%."),"Amber Orb"===e&&(n="Increase your Acceleration Rate by 10%."),"Topaz Orb"===e&&(n="Increase your Stamina by 10%."),"Emerald Orb"===e&&(n="Increase your Adaptability Distance by 10%."),"Ruby Orb"===e&&(n="Increase your Max Speed by 10%."),"Scary Mask"===e&&(n="Cause a distraction the first time you lose focus while ahead of competition, slowing competitors by 2 seconds."),"Running Shoes"===e&&(n="After each Burst during a race, increase subsequent Burst distance by 20%."),"Incense"===e&&(n="When your velocity is at least 90% of your Max Speed, immediately set velocity to 100% of your Max Speed."),"Athletic Tape"===e&&(n="While Bursting, decrease Acceleration Rate by 50% but increase Focus Distance and Adaptability Distance by 50%."),n}getItemDescription(e){var n="";return"Apples"===e&&(n="+1 Acceleration to a single animal"),"Bananas"===e&&(n="+1 Speed to a single animal"),"Strawberries"===e&&(n="+1 Endurance to a single animal"),"Carrots"===e&&(n="+1 Power to a single animal"),"Turnips"===e&&(n="+1 Focus to a single animal"),"Oranges"===e&&(n="+1 Adaptability to a single animal"),"Mangoes"===e&&(n="+1 Breed Level to a single animal"),"Circuit Race Breed XP Gain Certificate"===e&&(n="Give an animal +2 Bonus Breed XP Gain from Circuit Races. Can use up to 30 of these certificates on any individual animal."),"Free Race Breed XP Gain Certificate"===e&&(n="Give an animal +1 Bonus Breed XP Gain from Free Races. Can use up to 30 of these certificates on any individual animal."),"Training Breed XP Gain Certificate"===e&&(n="Give an animal +1 Bonus Breed XP Gain from Training. Can use up to 30 of these certificates on any individual animal."),"Diminishing Returns Increase Certificate"===e&&(n="Give an animal +1 Diminishing Returns per Facility Level. Can use up to 30 of these certificates on any individual animal."),n}getSpecializationDescription(e){var n="";return"Breeding Grounds"===e?n="Turn your barn into a habitat based around the optimal breeding environment for your animals. As you progress, your animals will gain more breeding XP from their training.":"Training Facility"===e?n="Pull out all the stops giving your animals the best environment to improve. As you progress, your animals will train faster and gain stats from training at a higher rate.":"Attraction"===e?n="Give the people what they want and turn your barn into a tourist attraction. As you progress, your barn will provide passive income at a steady rate while training.":"Research Center"===e&&(n="Bring in the top names in animal research to optimize your training process. As you progress, your animal will gain reduced stats from training but split its improvements with other animals."),n}updateTrackedMaxStats(e){if(e.isAvailable){if(""===this.globalVar.trackedStats.highestMaxSpeed)this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var n=parseFloat(this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").indexOf(" ")));e.currentStats.maxSpeedMs>n&&(this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAccelerationRate)this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var r=parseFloat(this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").indexOf(" ")));e.currentStats.accelerationMs>r&&(this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestStamina)this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")";else{var a=parseFloat(this.globalVar.trackedStats.highestStamina.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestStamina.replaceAll(",","").indexOf(" ")));e.currentStats.stamina>a&&(this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")")}if(""===this.globalVar.trackedStats.highestPowerEfficiency)this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")";else{var o=parseFloat(this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").indexOf(" ")));e.currentStats.powerMs>o&&(this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")")}if(""===this.globalVar.trackedStats.highestFocusDistance)this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")";else{var s=parseFloat(this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>s&&(this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAdaptabilityDistance)this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")";else{var l=parseFloat(this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>l&&(this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")")}}}shouldShowSlowSegmentWarning(e){var n=!1;if(void 0===e)return n;if((e.currentStats.acceleration<=10||e.currentStats.topSpeed<=10||e.currentStats.endurance<=10||e.currentStats.power<=10||e.currentStats.focus<=10||e.currentStats.adaptability<=10)&&(console.log("Stats too low: "+e.currentStats.acceleration+" "+e.currentStats.topSpeed+" "+e.currentStats.endurance+" "+e.currentStats.power+" "+e.currentStats.focus+" "+e.currentStats.adaptability),n=!0),null!=this.globalVar.eventRaceData){var a=this.globalVar.eventRaceData.totalDistance/this.globalVar.eventRaceData.totalSegments/this.globalVar.eventRaceData.segmentTime;a>3*e.currentStats.maxSpeedMs&&(console.log("Max Speed Too Low: "+a+" > "+3*e.currentStats.maxSpeedMs),n=!0),e.currentStats.focusMs<a/5&&(console.log("Not Focused Enough: "+e.currentStats.focusMs+" < "+a/30),n=!0)}return n}devModeInitialize(e){var n=this.globalVar.resources.find(G=>"Coins"===G.name);if(void 0!==n&&(n.amount=1e6),this.globalVar.resources.some(G=>"Medals"===G.name)){var r=this.globalVar.resources.find(G=>"Medals"===G.name);void 0!==r&&(r.amount+=e+1e7)}else this.globalVar.resources.push(this.initializeService.initializeResource("Medals",e+1e5,Y.Resources));if(this.globalVar.resources.push(this.initializeService.initializeResource("Talent Points",1e3,Y.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Tokens",1e3,Y.Resources)),this.globalVar.resources.some(G=>"Renown"===G.name)){var a=this.globalVar.resources.find(G=>"Renown"===G.name);void 0!==a&&(a.amount+=5)}else this.globalVar.resources.push(this.initializeService.initializeResource("Renown",5,Y.Resources));this.globalVar.resources.push(this.initializeService.initializeResource("Facility Level",2*e,Y.Progression)),this.globalVar.resources.push(this.initializeService.initializeResource("Research Level",e,Y.Progression));for(var o=1;o<=e;o++){var s=this.utilityService.getCircuitRankFromNumericValue(o);this.globalVar.circuitRank=s,this.checkCircuitRankRewards(),this.GenerateCircuitRacesForRank(this.globalVar.circuitRank)}var l=this.globalVar.animals.find(G=>G.type===X.Horse);void 0!==l&&(l.currentStats.topSpeed=2e3,l.currentStats.acceleration=2e3,l.currentStats.endurance=1e3,l.currentStats.power=2e3,l.currentStats.focus=1e3,l.currentStats.adaptability=1e3,l.breedLevel=250,l.canEquipOrb=!0,l.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(l));var c=this.globalVar.animals.find(G=>G.type===X.Cheetah);void 0!==c&&(c.currentStats.topSpeed=2e3,c.currentStats.acceleration=200,c.currentStats.endurance=200,c.currentStats.power=2e3,c.currentStats.focus=200,c.currentStats.adaptability=200,c.breedLevel=250,c.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(c));var u=this.globalVar.animals.find(G=>G.type===X.Hare);void 0!==u&&(u.currentStats.topSpeed=200,u.currentStats.acceleration=200,u.currentStats.endurance=200,u.currentStats.power=2e3,u.currentStats.focus=200,u.currentStats.adaptability=200,u.breedLevel=250,u.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(u));var d=this.globalVar.animals.find(G=>G.type===X.Monkey);void 0!==d&&(d.currentStats.topSpeed=250,d.currentStats.acceleration=250,d.currentStats.endurance=2550,d.currentStats.power=2e3,d.currentStats.focus=250,d.currentStats.adaptability=250,d.breedLevel=250,d.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(d));var m=this.globalVar.animals.find(G=>G.type===X.Goat);void 0!==m&&(m.currentStats.topSpeed=200,m.currentStats.acceleration=200,m.currentStats.endurance=200,m.currentStats.power=2e3,m.currentStats.focus=200,m.currentStats.adaptability=200,m.breedLevel=250,m.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(m));var v=this.globalVar.animals.find(G=>G.type===X.Gecko);void 0!==v&&(v.currentStats.topSpeed=200,v.currentStats.acceleration=200,v.currentStats.endurance=200,v.currentStats.power=2e3,v.currentStats.focus=200,v.currentStats.adaptability=200,v.breedLevel=250,v.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(v));var _=this.globalVar.animals.find(G=>G.type===X.Dolphin);void 0!==_&&(_.currentStats.topSpeed=250,_.currentStats.acceleration=250,_.currentStats.endurance=500,_.currentStats.power=2e3,_.currentStats.focus=250,_.currentStats.adaptability=250,_.breedLevel=250,_.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(_));var y=this.globalVar.animals.find(G=>G.type===X.Octopus);void 0!==y&&(y.currentStats.topSpeed=200,y.currentStats.acceleration=200,y.currentStats.endurance=200,y.currentStats.power=2e3,y.currentStats.focus=500,y.currentStats.adaptability=500,y.breedLevel=250,y.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(y));var S=this.globalVar.animals.find(G=>G.type===X.Shark);void 0!==S&&(S.currentStats.topSpeed=200,S.currentStats.acceleration=200,S.currentStats.endurance=200,S.currentStats.power=2e3,S.currentStats.focus=200,S.currentStats.adaptability=200,S.incubatorStatUpgrades.powerModifier=1,S.breedLevel=250,this.calculateAnimalRacingStats(S));var D=this.globalVar.animals.find(G=>G.type===X.Penguin);void 0!==D&&(D.currentStats.topSpeed=60,D.currentStats.acceleration=200,D.currentStats.endurance=50,D.currentStats.power=2e3,D.currentStats.focus=200,D.currentStats.adaptability=20,D.incubatorStatUpgrades.powerModifier=1,D.breedLevel=250,this.calculateAnimalRacingStats(D));var w=this.globalVar.animals.find(G=>G.type===X.Caribou);void 0!==w&&(w.currentStats.topSpeed=200,w.currentStats.acceleration=200,w.currentStats.endurance=200,w.currentStats.power=2e3,w.currentStats.focus=200,w.currentStats.adaptability=200,w.breedLevel=250,w.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(w));var T=this.globalVar.animals.find(G=>G.type===X.Salamander);void 0!==T&&(T.currentStats.topSpeed=250,T.currentStats.acceleration=150,T.currentStats.endurance=50,T.currentStats.power=2e3,T.currentStats.focus=100,T.currentStats.adaptability=100,T.breedLevel=250,T.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(T));var L=this.globalVar.animals.find(G=>G.type===X.Fox);void 0!==L&&(L.currentStats.topSpeed=400,L.currentStats.acceleration=200,L.currentStats.endurance=40,L.currentStats.power=2e3,L.currentStats.focus=200,L.currentStats.adaptability=200,L.breedLevel=250,L.incubatorStatUpgrades.powerModifier=1,this.calculateAnimalRacingStats(L))}}return t.\u0275fac=function(e){return new(e||t)(Ve(Li),Ve(zv),Ve(kl))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Bt=(()=>{return(t=Bt||(Bt={})).None="None",t.BreedingGrounds="Breeding Grounds",t.TrainingFacility="Training Facility",t.Attraction="Attraction",t.ResearchCenter="Research Center",Bt;var t})(),je=(()=>{return(t=je||(je={}))[t.inspiration=0]="inspiration",t[t.navigator=1]="navigator",t[t.flowingCurrent=2]="flowingCurrent",t[t.bigBrain=3]="bigBrain",t[t.camouflage=4]="camouflage",t[t.herdMentality=5]="herdMentality",t[t.specialDelivery=6]="specialDelivery",t[t.deepBreathing=7]="deepBreathing",t[t.redBaton=8]="redBaton",t[t.blueBaton=9]="blueBaton",t[t.violetBaton=10]="violetBaton",t[t.greenBaton=11]="greenBaton",t[t.orangeBaton=12]="orangeBaton",t[t.yellowBaton=13]="yellowBaton",t[t.supportMaxSpeedRelay=14]="supportMaxSpeedRelay",t[t.supportAccelerationRelay=15]="supportAccelerationRelay",t[t.supportStaminaRelay=16]="supportStaminaRelay",t[t.supportPowerRelay=17]="supportPowerRelay",t[t.supportFocusRelay=18]="supportFocusRelay",t[t.supportAdaptabilityRelay=19]="supportAdaptabilityRelay",t[t.supportBurstDistance=20]="supportBurstDistance",t[t.supportBurstChance=21]="supportBurstChance",t[t.supportAbilityCooldown=22]="supportAbilityCooldown",t[t.supportAbilityEfficiency=23]="supportAbilityEfficiency",je;var t})();let hn=(()=>{class t{constructor(e,n,r){this.globalService=e,this.utilityService=n,this.sanitizer=r}recalculateAllAnimalStats(){this.globalService.globalVar.animals.forEach(e=>{this.globalService.calculateAnimalRacingStats(e)})}getAnimalsFromAnimalDeck(e){var n=[];return null==e||void 0===e.selectedAnimals||0===e.selectedAnimals.length||e.selectedAnimals.forEach(r=>{var a=this.globalService.globalVar.animals.find(o=>o.type===r.type);void 0!==a&&n.push(a)}),n}getPrimaryDeck(){return this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck)}getResourceByName(e){var n=this.globalService.globalVar.resources.find(r=>r.name===e);return void 0!==n?n.amount:0}spendResourceByName(e,n){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount-=n)}gainResourceByName(e,n,r){var a=this.globalService.globalVar.resources.find(o=>o.name===e);void 0!==a?a.amount+=n:this.globalService.globalVar.resources.push(new pe(e,n,r))}getFacilityLevel(){var e=this.globalService.globalVar.resources.find(n=>"Facility Level"===n.name);return void 0!==e?e.amount:0}getResearchLevel(){var e=this.globalService.globalVar.resources.find(n=>"Research Level"===n.name);return void 0!==e?e.amount:0}getCoins(){var e=this.globalService.globalVar.resources.find(n=>"Coins"===n.name);return void 0!==e?e.amount:0}spendCoins(e){var n=this.globalService.globalVar.resources.find(r=>"Coins"===r.name);void 0!==n&&(n.amount-=e)}getMedals(){var e=this.globalService.globalVar.resources.find(n=>"Medals"===n.name);return void 0!==e?e.amount:0}spendMedals(e){var n=this.globalService.globalVar.resources.find(r=>"Medals"===r.name);void 0!==n&&(n.amount-=e)}getTokens(){var e=this.globalService.globalVar.resources.find(n=>"Tokens"===n.name);return void 0!==e?e.amount:0}spendTokens(e){var n=this.globalService.globalVar.resources.find(r=>"Tokens"===r.name);void 0!==n&&(n.amount-=e)}getRenown(){var e=this.globalService.globalVar.resources.find(n=>"Renown"===n.name);return void 0!==e?e.amount:0}addResourceToResourceList(e,n){if(void 0!==n)if(n.some(a=>a.name===e.name)){var r=n.find(a=>a.name===e.name);void 0!==r&&(r.amount+=e.amount)}else n.push(e)}getRenownCoinModifier(e,n){var r=1;return r=e<=50?e:500*Math.log10(.0035*(e-50)+1)+50,n||(r/=100),r}getStockbreeder(){var e=this.globalService.globalVar.resources.find(n=>"Stockbreeder"===n.name);return void 0!==e?e.amount:0}getAnimalDescription(e){var n="";return"Horse"===e?n="The Horse is a Flatland racing animal capable of running without losing stamina and increasing the max speed of relay racers.":"Cheetah"===e?n="The Cheetah is a Flatland racing animal that prioritizes quickness over stamina.":"Hare"===e?n="The Hare is a Flatland racing animal that can instantly enter Burst and increase adaptability and focus.":"Monkey"===e?n="The Monkey is a Mountain climbing animal capable of slowing its competitors and leaping to victory.":"Goat"===e?n="The Goat is a Mountain climbing animal that can nimbly travel terrain and increase stamina.":"Gecko"===e?n="The Gecko is a Mountain climbing animal that can increase speed based on focus and can increase other racers' starting velocity.":"Dolphin"===e?n="The Dolphin is an Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay.":"Shark"===e?n="The Shark is an Ocean swimming animal that can slow competitors and increase its own stats at the cost of your other racers.":"Octopus"===e?n="The Octopus is an Ocean swimming animal that can increase your coin rewards from races and increase power of other racers.":"Penguin"===e?n="The Penguin is a Tundra racing animal that can slide carefully or recklessly.":"Caribou"===e?n="The Caribou is a Tundra racing animal that boosts other racers based on stamina.":"Salamander"===e?n="The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration.":"Fox"===e&&(n="The Fox is a Volcanic racing animal that can increase stats at random."),n}getAnimalByType(e){var n=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==n?n:null}getMaxSpeedModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultMaxSpeedModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,be.topSpeed),u=1;o.talentTree.talentTreeType===ct.longDistance&&(u=1+o.talentTree.column2Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.maxSpeedModifier*u}return n}getAccelerationModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultAccelerationModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,be.acceleration),u=1;o.talentTree.talentTreeType===ct.sprint&&(u=1+o.talentTree.column2Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.accelerationModifier*u}return n}getStaminaModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultStaminaModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,be.endurance),u=1;o.talentTree.talentTreeType===ct.longDistance&&(u=1+o.talentTree.column3Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.staminaModifier*u}return n}getPowerModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultPowerModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,be.power),u=1;o.talentTree.talentTreeType===ct.sprint&&(u=1+o.talentTree.column3Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.powerModifier*u}return n}getFocusModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultFocusModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,be.focus),u=1;o.talentTree.talentTreeType===ct.longDistance&&(u=1+o.talentTree.column1Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.focusModifier*u}return n}getAdaptabilityModifierByAnimalType(e){var n=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===X[e].toLowerCase()+"DefaultAdaptabilityModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,be.adaptability),u=1;o.talentTree.talentTreeType===ct.sprint&&(u=1+o.talentTree.column1Row3Points/100),n=a*r*c*o.incubatorStatUpgrades.adaptabilityModifier*u}return n}getTrainingBreedGaugeIncrease(e,n){var r=0,a=this.globalService.globalVar.modifiers.find(s=>"trainingBreedGaugeIncrease"===s.text);if(null!=a&&(r=a.value),void 0!==n&&null!=n.miscStats.bonusBreedXpGainFromTraining&&n.miscStats.bonusBreedXpGainFromTraining>0&&(r+=n.miscStats.bonusBreedXpGainFromTraining),e>0){var o=this.globalService.globalVar.modifiers.find(s=>"breedingGroundsSpecializationModifier"===s.text);null!=o&&(r*=1+e*o.value)}return r}getCircuitBreedGaugeIncrease(e){var n=0,r=this.globalService.globalVar.modifiers.find(a=>"circuitBreedGaugeIncrease"===a.text);return null!=r&&(n=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromCircuitRaces&&e.miscStats.bonusBreedXpGainFromCircuitRaces>0&&(n+=e.miscStats.bonusBreedXpGainFromCircuitRaces),n}getLocalBreedGaugeIncrease(e){var n=0,r=this.globalService.globalVar.modifiers.find(a=>"localBreedGaugeIncrease"===a.text);return null!=r&&(n=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromLocalRaces&&e.miscStats.bonusBreedXpGainFromLocalRaces>0&&(n+=e.miscStats.bonusBreedXpGainFromLocalRaces),n}getTotalRacersByRace(e){var n=2;return e.localRaceType===Wt.Track?n=13:this.getResourceByName("Money Mark")>0&&(n+=1),n}getDiminishingReturnsThreshold(e){var n=null==e?20:e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalService.globalVar.modifiers.find(a=>"facilityLevelModifier"===a.text);return void 0!==r&&(n+=this.getFacilityLevel()*r.value),n}getBreedLevelPopover(e){var n=.2,r=this.globalService.globalVar.modifiers.find(a=>"breedLevelStatModifier"===a.text);return null!=r&&(n=r.value),"Increase racing stat gain from base stats by "+(n*(e-1)*100).toFixed(0)+"%"}getResourcePopover(e,n){if("Coins"===e)return"Good ol classic Coins. Gain from most races and buy items from the shop with this.";if("Medals"===e)return"Rare currency gained from improving your circuit rank.";if("Renown"===e){var r=this.getRenown();return"Increases Coins gained from races by "+this.getRenownCoinModifier(r,!0).toFixed(2)+"%. Increase total number of free races available per reset period by 1 for every 100 renown for a total of "+this.getTotalFreeRacesPerPeriod()+". Complete circuit or free races to get your name out there and raise your renown."}return"Facility Level"===e?"Increase Diminishing Returns value by 5 for each level for a total of "+this.getDiminishingReturnsThreshold()+". You can increase a base stat up to your Diminishing Returns value before that base stat starts to increase your racing stats less and less.":"Tokens"===e?"Currency used to purchase items from the Event Shop.":"Talent Points"===e?"Use to improve any of your racers' talents. Each of these applies to all racers.":"Research Level"===e?"Increase incubator trait values by "+this.getResourceByName(e)+"% and unlock new available traits.":"Apples"===e||"Bananas"===e||"Oranges"===e||"Strawberries"===e||"Turnips"===e||"Carrots"===e||"Mangoes"===e?this.globalService.getItemDescription(e):"Bonus Breed XP Gain From Training"===e?"Increase Breed XP gained from training by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Free Races"===e?"Increase Breed XP gained from completing free races by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Circuit Races"===e?"Increase Breed XP gained from completing circuit races by this amount. Only applies to this animal.":"Diminishing Returns per Facility Level"===e?"Increase Diminishing Returns value by this amount for every Facility Level you have. Only applies to this animal.":"Orb Pendant"===e?"This looks like the perfect size to fit an orb inside.":"Training Time Reduction"===e?"Reduce training times by this percent. Only applies to this animal.":"Bonus Talents"===e?"Increase talent point amount for this animal.":n===Y.Specialty?this.getSpecialtyItemDescription(e):n===Y.Equipment?this.globalService.getEquipmentDescription(e):""}getAllRaceCourseTypes(){var e=[];for(let n in z)isNaN(Number(n))&&e.push(n);return e}getCourseTypeFromAnimalType(e){var n=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==n?n.raceCourseType:-1}getTalentTreeNameByEnum(e){var n="";return e===ct.sprint&&(n="Sprint"),e===ct.support&&(n="Support"),e===ct.longDistance&&(n="Long Distance"),n}getAllBarnSpecializations(){var e=[];return e.push("Breeding Grounds"),e.push("Training Facility"),this.isItemUnlocked("attractionSpecialization")&&e.push("Attraction"),this.isItemUnlocked("researchCenterSpecialization")&&e.push("Research Center"),e}getTrackRaceRewards(e){var n=[];return e===$n.novice?(n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Training"),n.push("- 50 Coins"),n.push("- +1 Bonus Breed XP Gain From Free Races")):e===$n.intermediate?(n.push("- 200 Coins"),n.push("- +2 Bonus Breed XP Gain From Training"),n.push("- 1 Medal"),n.push("- +2 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- +5 Bonus Breed XP Gain From Circuit Races"),n.push("- 200 Coins"),n.push("- +2 Bonus Breed XP Gain From Training"),n.push("- 1 Medal"),n.push("- +2 Bonus Breed XP Gain From Free Races"),n.push("- +1% Training Time Reduction"),n.push("- +3 Diminishing Returns per Facility Level")):e===$n.master&&(n.push("- +5 Bonus Breed XP Gain From Free Races"),n.push("- +2 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- 1000 Coins"),n.push("- +3 Bonus Breed XP Gain From Training"),n.push("- +2 Talents"),n.push("- +1% Training Time Reduction"),n.push("- 1000 Coins"),n.push("- Orb Pendant"),n.push("- +3 Diminishing Returns per Facility Level"),n.push("- +1% Training Time Reduction"),n.push("- +3 Talents")),n}getGrandPrixTokenRewards(){var e=[],n=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),r=5e7,a=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken1MeterModifier"===S.text);null!=a&&(r=a.value);var o=5e7,s=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken2MeterModifier"===S.text);null!=s&&(o=s.value);var l=5e7,c=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken3MeterModifier"===S.text);null!=c&&(l=c.value);var u=5e7,d=this.globalService.globalVar.modifiers.find(S=>"grandPrixToken4MeterModifier"===S.text);null!=d&&(u=d.value);var m=1*n,v=2*n,_=3*n,y=4*n;return e.push((r*n).toLocaleString()+" meters - +"+m+" Token"+(m>1?"s":"")),e.push((o*n).toLocaleString()+" meters - +"+v+" Tokens"),e.push((l*n).toLocaleString()+" meters - +"+_+" Tokens"),e.push((u*n).toLocaleString()+" meters - +"+y+" Tokens"),e}getRenownRequiredForEventShopTier(e){return 1===e?0:2===e?200:e>2?500*(e-2):-1}getHighestEventShopTierUnlocked(){var e=1,n=this.getRenown();return n>200&&(e=2),n>500&&(e=Math.floor(n/500)+2),e}isItemUnlocked(e){var n=!1,r=this.globalService.globalVar.unlockables.get(e);return null!=r&&(n=r),n}getAnimalsByRaceCourseType(e){var n=[];return"Flatland"===e?(n.push(X[X.Horse]),n.push(X[X.Cheetah]),n.push(X[X.Hare])):"Mountain"===e?(n.push(X[X.Monkey]),n.push(X[X.Goat]),n.push(X[X.Gecko])):"Ocean"===e?(n.push(X[X.Dolphin]),n.push(X[X.Shark]),n.push(X[X.Octopus])):"Tundra"===e?(n.push(X[X.Penguin]),n.push(X[X.Caribou])):"Volcanic"===e&&(n.push(X[X.Salamander]),n.push(X[X.Fox])),n}GetAbilityEffectiveAmount(e,n,r,a){if(null==e.ability||null==e.ability.name)return-1;null==n&&(n=1),null==r&&(r=1);var o=1;e.type===X.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(o*=.75),e.type===X.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(o*=1.5),e.talentTree.talentTreeType===ct.sprint&&(o*=1+.05*e.talentTree.column3Row2Points);var s=e.ability;null!=a&&(s=a);var l=1;null!=e.talentTree&&null!=e.raceVariables&&e.talentTree.talentTreeType===ct.sprint&&!e.raceVariables.firstAbilityUseEffectApplied&&(l*=1+.05*e.talentTree.column3Row4Points,e.raceVariables.firstAbilityUseEffectApplied=!0);var c=1;if(null!=e.raceVariables&&null!=e.raceVariables.relayEffects){var u=this.getRelayEffectFromListByType(e.raceVariables.relayEffects,je.supportAbilityEfficiency);void 0!==u&&void 0!==u.additionalValue&&(c=u.additionalValue)}return(s.efficiency*c*l+s.efficiency*(.01*(s.abilityLevel-1)))*(1+e.currentStats.powerMs*o*n*r/100)}getAnimalAbilityDescription(e,n,r){if(e){if("Second Wind"===n)return"Stamina does not go down for a short period";if("Inspiration"===n)return"Increase next racer's max speed on relay";if("Pacemaker"===n)return"Increase acceleration for a short period";if("Sprint"===n)return"Increase max speed, acceleration, stamina cost for a short period";if("Giving Chase"===n)return"Increase acceleration when behind competitors";if("On The Hunt"===n)return"Gain max speed after each burst";if("Awareness"===n)return"Increase adaptability, focus for a short period";if("Prey Instinct"===n)return"Start in extended burst mode";if("Nap"===n)return"Delay leg start, increase max speed and focus";if("Landslide"===n)return"Delay competitors";if("Frenzy"===n)return"Increase burst distance, cannot stumble or lose focus during burst";if("Leap"===n)return"Jump to the end of the leg";if("Echolocation"===n)return"Increase adaptability, ignore negative terrain effects for a short period";if("Navigator"===n)return"Increase previous and next racer's adaptability";if("Flowing Current"===n)return"Increase next racer's acceleration on relay";if("Apex Predator"===n)return"Slow competitors if they pass you";if("Feeding Frenzy"===n)return"Slow next and previous racers, increase max speed and acceleration for a distance";if("Blood In The Water"===n)return"Increase max speed when ahead of competitors";if("Propulsion"===n)return"Dash a short distance";if("Buried Treasure"===n)return"Delay your start, increase coin gain for winning race";if("Big Brain"===n)return"Increase power of other racers after bursting a certain number of times";if("Sure-footed"===n)return"Increase adaptability after not stumbling through path";if("Deep Breathing"===n)return"Regain stamina after burst, increase other racers' stamina";if("In The Rhythm"===n)return"Increase burst speed bonus";if("Sticky"===n)return"Cannot stumble for a short period";if("Night Vision"===n)return"Increase max speed by keeping focused";if("Camouflage"===n)return"Transfer velocity to next racer on relay";if("Herd Mentality"===n)return"Grant next racer portion of your stamina, they start in burst mode";if("Great Migration"===n)return"Sacrifice stamina for acceleration for a short period";if("Special Delivery"===n)return"Increase other racers' burst max speed bonus based on stamina";if("Careful Toboggan"===n)return"Increase adaptability for a short period";if("Wild Toboggan"===n)return"Increase max drift penalty, acceleration based on drift";if("Quick Toboggan"===n)return"Increase max speed if you do not drift";if("Cold Blooded"===n)return"Increase stamina and focus for a short period based on distance in leg";if("Burrow"===n)return"Avoid lava fall, prevent stumbles for a short period";if("Heat Up"===n)return"Increase acceleration for a short period, gets stronger every use";if("Trickster"===n)return"Decrease one random stat, increase a different random stat for a short period";if("Fleeting Speed"===n)return"Increase max speed greatly, lose over time";if("Nine Tails"===n)return"Increase random stat for a short period, effect can stack"}else{var a="",o=void 0;if(null==r&&this.globalService.globalVar.animals.forEach(u=>{u.availableAbilities.forEach(d=>{d.name===n&&(r=u,o=d,null!=d.cooldown&&(a=d.cooldown.toString()))})}),null!=r){var s=this.GetAbilityEffectiveAmount(r,void 0,void 0,o).toLocaleString(void 0,{minimumFractionDigits:2});""===a&&null!=r.ability.cooldown&&(a=r.ability.cooldown.toString());var l="";return"Second Wind"===n?"Stamina does not decrease for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Inspiration"===n?"When the next racer starts, they gain 25% of your Max Speed for <span class='keyword'>"+s+"</span> meters. Passive.":"Pacemaker"===n?"Increase Acceleration Rate by 50% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Sprint"===n?" Gain 35% Max Speed and Acceleration Rate for <span class='keyword'>"+s+"</span> meters, but lose twice as much stamina as normal. "+a+" second cooldown.":"Giving Chase"===n?"While you are behind the average pace, increase Acceleration Rate by <span class='keyword'>"+s+"</span>%. Passive.":"On The Hunt"===n?"Every time you Burst, increase your Max Speed by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Awareness"===n?"Boosts Focus Distance and Adaptability Distance by 40% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Prey Instinct"===n?"Starts its leg in Burst mode that continues for an additional <span class='keyword'>"+s+"</span> meters. Passive.":"Nap"===n?"Sleep until the competition has traveled a distance equal to <span class='keyword'>"+s+"</span> meters from the end of your leg. Max Speed and Focus Distance are then doubled. Passive.":"Landslide"===n?"Drop rocks on competitors, delaying them <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Frenzy"===n?"Increase Burst distance by <span class='keyword'>"+s+"</span> meters. You do not stumble or lose focus while bursting. Passive.":"Leap"===n?"When you are <span class='keyword'>"+s+"</span> meters from the end of the leg, leap straight to the end over .5 seconds. Passive.":"Sure-footed"===n?"When you make it through a special path without stumbling, increase your Adaptability Distance by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Deep Breathing"===n?"Every time you Burst, regain <span class='keyword'>"+s+"</span>% of your stamina, up to 100%. If this amount exceeds 100% of your stamina, increase all other racers' stamina by the amount exceeded. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"In The Rhythm"===n?"Increase your max speed bonus while Bursting by <span class='keyword'>"+s+"</span>%. Passive.":"Sticky"===n?"Cannot stumble for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Night Vision"===n?"Increase Max Speed by <span class='keyword'>"+s+"</span>% for every path you complete without losing focus. If you lose focus, reset this bonus back to 0%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Camouflage"===n?"The velocity you finish your leg at is given to your following racer on Relay. Decrease this amount to 0 evenly over <span class='keyword'>"+s+"</span> meters. The following racer can break their max speed by up to 50% while this is active. Passive.":"Echolocation"===n?"Increase your Adaptability Distance by 75% for <span class='keyword'>"+s+"</span> meters and ignore any negative effects from the terrain. "+a+" second cooldown.":"Navigator"===n?"Assist the previous racer and next racer, boosting their Adaptability Distance by 25% of your max for the last and first <span class='keyword'>"+s+"</span> meters of their legs respectively. Passive.":"Flowing Current"===n?"When relaying, increase the Acceleration Rate of your next racer by 25% of your Acceleration Rate for <span class='keyword'>"+s+"</span> meters. Passive.":"Apex Predator"===n?"If the competitors moving at the average pace pass the shark during its leg, immediately bite them, slowing their pace by 50% for <span class='keyword'>"+s+"</span> meters. Can only occur once. Passive.":"Feeding Frenzy"===n?"Increase Max Speed and Acceleration Rate by 50% for the first and last <span class='keyword'>"+s+"</span> meters of your leg. Your next and previous racers have a 10% Max Speed reduction. Passive.":"Blood In The Water"===n?"While you are ahead of the average pace, increase Max Speed by <span class='keyword'>"+s+"</span>%. Passive.":"Propulsion"===n?"Dash <span class='keyword'>"+s+"</span> meters over .25 seconds. "+a+" second cooldown.":"Buried Treasure"===n?"Delay your start by 8 seconds. If you still win the race, increase your Coin reward by <span class='keyword'>"+s+"</span>%. Passive.":"Big Brain"===n?"After Bursting through one third of your race paths, increase Power Efficiency of all remaining racers by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 5 times. Effects remain for the duration of the race.":"Herd Mentality"===n?"After completing your leg, <span class='keyword'>"+s+"</span>% of your remaining Stamina is given to the next racer and they start their leg in Burst mode. This does not occur if you run out of Stamina during your leg. Passive.":"Great Migration"===n?"Reduce stamina by 10%. For <span class='keyword'>"+s+"</span> meters, Acceleration Rate is increased by 25% of the amount of stamina lost. "+a+" second cooldown.":"Special Delivery"===n?"Increase all remaining racers' Burst Max Speed Bonus by <span class='keyword'>"+s+"</span>% of your remaining Stamina percentage, up to 100%, after completing your leg. This does not occur if you run out of Stamina during your leg. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"Careful Toboggan"===n?"Increase Adaptability Distance by 60% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Wild Toboggan"===n?"Double the maximum amount of drift per path. Increase Acceleration Rate by up to <span class='keyword'>"+s+"</span>% based on how much you drift. Passive.":"Quick Toboggan"===n?"Every time you make it through a path without drifting, gain <span class='keyword'>"+s+"</span>% Max Speed. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Cold Blooded"===n?"Increase Stamina and Focus Distance by 0-30% depending on how close to the center of the volcano you are. Focus Distance boost lasts <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Burrow"===n?"Go underground for <span class='keyword'>"+s+"</span> meters, dodging lava fall and preventing stumbles. "+a+" second cooldown.":"Heat Up"===n?"Increase Acceleration Rate by 15% for <span class='keyword'>"+s+"</span> meters. This increase doubles every subsequent use this race. "+a+" second cooldown.":"Trickster"===n?"When active, sacrifice 25% of one random stat for 50% of another random stat. Lasts <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Fleeting Speed"===n?"Increase Max Speed by <span class='keyword'>"+s+"</span>%. Decrease this bonus by 2% for every percent of the leg you complete. Passive.":"Nine Tails"===n?"At the start of each path, increase either Acceleration Rate, Max Speed, Focus Distance, or Adaptability Distance by 15% for <span class='keyword'>"+s+"</span> meters. This effect can stack. Passive.":(null===(l=this.sanitizer.sanitize(Kt.HTML,this.sanitizer.bypassSecurityTrustHtml(l)))&&(l=""),l)}}return""}getBarnByBarnNumber(e){return this.globalService.globalVar.barns.find(n=>n.barnNumber===e)}getAvailableBarns(){var e=[];return e.push(this.getBarnByBarnNumber(1)),e.push(this.getBarnByBarnNumber(2)),e.push(this.getBarnByBarnNumber(3)),this.isItemUnlocked("barnRow2")&&(e.push(this.getBarnByBarnNumber(4)),e.push(this.getBarnByBarnNumber(5)),e.push(this.getBarnByBarnNumber(6))),this.isItemUnlocked("barnRow3")&&(e.push(this.getBarnByBarnNumber(7)),e.push(this.getBarnByBarnNumber(8)),e.push(this.getBarnByBarnNumber(9))),this.isItemUnlocked("barnRow4")&&(e.push(this.getBarnByBarnNumber(10)),e.push(this.getBarnByBarnNumber(11)),e.push(this.getBarnByBarnNumber(12))),this.isItemUnlocked("barnRow5")&&(e.push(this.getBarnByBarnNumber(13)),e.push(this.getBarnByBarnNumber(14)),e.push(this.getBarnByBarnNumber(15))),e}getResourcesForBarnUpgrade(e){var n=[],r=new pe("Coins",100);if(r.amount*=e+1,n.push(r),e%10==9){var a;a=Math.ceil(e/100);var o=new pe("Medals",1*a);n.push(o)}return n}getBarnName(e){var n="",r=e.getSize();return(e.barnUpgrades.specialization===Bt.None||null==e.barnUpgrades.specialization)&&(n=r+" Barn "+e.barnNumber),e.barnUpgrades.specialization===Bt.Attraction&&(n=r+" Attraction "+e.barnNumber),e.barnUpgrades.specialization===Bt.BreedingGrounds&&(n=r+" Breeding Grounds "+e.barnNumber),e.barnUpgrades.specialization===Bt.TrainingFacility&&(n=r+" Training Facility "+e.barnNumber),e.barnUpgrades.specialization===Bt.ResearchCenter&&(n=r+" Research Center "+e.barnNumber),n}getTerrainPopoverText(e,n){var r="";void 0!==n&&(r="The terrain for the "+n.getCourseTypeName()+" leg is "+e.getTerrainType()+": <br/>"),null!=e.staminaModifier&&1!==e.staminaModifier&&(r+=e.staminaModifier>1?"+"+(100*(e.staminaModifier-1)).toFixed(0)+"% stamina loss <br/>":"-"+(100*(1-e.staminaModifier)).toFixed(0)+"% stamina loss <br/>"),null!=e.maxSpeedModifier&&1!==e.maxSpeedModifier&&(r+=e.maxSpeedModifier>1?"+"+(100*(e.maxSpeedModifier-1)).toFixed(0)+"% max speed<br/>":"-"+(100*(1-e.maxSpeedModifier)).toFixed(0)+"% max speed<br/>"),null!=e.accelerationModifier&&1!==e.accelerationModifier&&(r+=e.accelerationModifier>1?"+"+(100*(e.accelerationModifier-1)).toFixed(0)+"% acceleration<br/>":"-"+(100*(1-e.accelerationModifier)).toFixed(0)+"% acceleration<br/>"),null!=e.powerModifier&&1!==e.powerModifier&&(r+=e.powerModifier>1?"+"+(100*(e.powerModifier-1)).toFixed(0)+"% power efficiency<br/>":"-"+(100*(1-e.powerModifier)).toFixed(0)+"% power efficiency<br/>"),null!=e.focusModifier&&1!==e.focusModifier&&(r+=e.focusModifier>1?"+"+(100*(e.focusModifier-1)).toFixed(0)+"% meters before losing focus<br/>":"-"+(100*(1-e.focusModifier)).toFixed(0)+"% meters before losing focus<br/>"),null!=e.adaptabilityModifier&&1!==e.adaptabilityModifier&&(r+=e.adaptabilityModifier>1?"+"+(100*(e.adaptabilityModifier-1)).toFixed(0)+"% meters before stumbling<br/>":"-"+(100*(1-e.adaptabilityModifier)).toFixed(0)+"% meters before stumbling<br/>");var a=this.utilityService.getSanitizedHtml(r);return null!=a&&(r=a),r}getInDepthSpecializationDescription(e){var n="";if("Breeding Grounds"===e){var r=0,a=this.globalService.globalVar.modifiers.find(w=>"breedingGroundsSpecializationModifier"===w.text);null!=a&&(r=a.value),n="For every 10 levels, gain "+100*r+"% additional breed XP when completing a training."}else if("Training Facility"===e)n="For every 10 levels up to level 200, gain 1% training time reduction. For every 10 levels after level 200, gain a .1 stat multiplier for every stat.";else if("Attraction"===e){var o=60,s=this.globalService.globalVar.modifiers.find(w=>"attractionTimeToCollectModifier"===w.text);null!=s&&(o=s.value);this.globalService.globalVar.modifiers.find(w=>"attractionAmountModifier"===w.text);n="Gain a certain amount of Coins every "+o+" seconds while an animal trains in this barn. At level 10, you gain 10 Coins and every subsequent 10 levels increases that amount by 10 Coins plus 5 Coins per Specialization Level - 1."}else if("Research Center"===e){var u=this.globalService.globalVar.modifiers.find(w=>"researchCenterIncrementsModifier"===w.text),d=this.globalService.globalVar.modifiers.find(w=>"researchCenterTrainingAnimalModifier"===w.text),m=this.globalService.globalVar.modifiers.find(w=>"researchCenterStudyingAnimalModifier"===w.text),v=this.globalService.globalVar.modifiers.find(w=>"researchCenterMaxStatGainModifier"===w.text),_=.05,y=.45,S=.25,D=.5;null!=u&&(_=u.value),null!=d&&(y=d.value),null!=m&&(S=m.value),null!=v&&(D=v.value),n="To start, the animal training at the Research Center only gains "+100*(y+_)+"% of the stat values from their training. Another animal at random will gain "+100*S+"% of the stat values from training, prioritizing animals of the same course type. For every 10 levels, "+100*_+"% additional stat gain will be distributed up to "+100*D+"% starting with the training animal and then the other animal. Additional animals will gain stats after maxing out the previous."}return n}convertSpecializationNameToEnum(e){return"Breeding Grounds"===e?Bt.BreedingGrounds:"Training Facility"===e?Bt.TrainingFacility:"Attraction"===e?Bt.Attraction:"Research Center"===e?Bt.ResearchCenter:Bt.None}convertTalentTreeNameToEnum(e){return"Sprint"===e?ct.sprint:"Support"===e?ct.support:"Long Distance"===e?ct.longDistance:ct.none}convertSpecializationEnumToName(e){return e===Bt.BreedingGrounds?"Breeding Grounds":e===Bt.TrainingFacility?"Training Facility":e===Bt.Attraction?"Attraction":e===Bt.ResearchCenter?"Research Center":"None"}getTrainingTimeReductionFromTrainingFacility(e){return e.specialization===Bt.TrainingFacility?.01*e.specializationLevel:0}getTrainingProgressionAnimationText(e){var n="";return e.affectedStatRatios.topSpeed>0&&(n+="+SPD\n"),e.affectedStatRatios.acceleration>0&&(n+="+ACC\n"),e.affectedStatRatios.endurance>0&&(n+="+END\n"),e.affectedStatRatios.power>0&&(n+="+PWR\n"),e.affectedStatRatios.focus>0&&(n+="+FCS\n"),e.affectedStatRatios.adaptability>0&&(n+="+ADP\n"),n}relayEffectTypeStacksEffectiveness(e){var n=!1;return(e===je.bigBrain||e===je.herdMentality||e===je.deepBreathing||e===je.specialDelivery)&&(n=!0),n}relayEffectPersistsEventSegments(e){var n=!1;return(e===je.bigBrain||e===je.redBaton||e===je.blueBaton||e===je.greenBaton||e===je.orangeBaton||e===je.violetBaton||e===je.yellowBaton)&&(n=!0),n}getBreedLevelRequiredForGrandPrix(){var e=50,n=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}canAnimalTrain(e){var n=!0;this.globalService.globalVar.incubator.assignedAnimal===e&&(n=!1);var r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(n=!1),n}canAnimalRace(e){var n=!0,r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(n=!1),n}getTraitStatGainDescription(e){var n="",r="";return e.positiveStatGain===be.acceleration&&(n="Acceleration"),e.positiveStatGain===be.adaptability&&(n="Adaptability"),e.positiveStatGain===be.endurance&&(n="Endurance"),e.positiveStatGain===be.focus&&(n="Focus"),e.positiveStatGain===be.power&&(n="Power"),e.positiveStatGain===be.topSpeed&&(n="Speed"),e.negativeStatGain===be.acceleration&&(r="Acceleration"),e.negativeStatGain===be.adaptability&&(r="Adaptability"),e.negativeStatGain===be.endurance&&(r="Endurance"),e.negativeStatGain===be.focus&&(r="Focus"),e.negativeStatGain===be.power&&(r="Power"),e.negativeStatGain===be.topSpeed&&(r="Speed"),"+"+e.researchLevel+"% "+n+", -"+(e.researchLevel>25?25:e.researchLevel)+"% "+r}getSpecialtyItemDescription(e){var n="",r=5,a=this.globalService.globalVar.modifiers.find(v=>"internationalRacesToMedalModifier"===v.text);null!=a&&(r=a.value);var o=10,s=this.globalService.globalVar.modifiers.find(v=>"nationalRacesToMedalModifier"===v.text);null!=s&&(o=s.value);var l=5,c=this.globalService.globalVar.modifiers.find(v=>"whistleModifier"===v.text);null!=c&&(l=c.value);var u=5,d=this.globalService.globalVar.modifiers.find(v=>"goldenWhistleModifier"===v.text);null!=d&&(u=d.value),"Stopwatch"===e?n="Reduce training time by 5%":"Animal Handler"===e?n="Retain 2% of trained stats after breeding":"Course Maps"===e?n="Increase your chance to burst during special routes by 10%":"Stockbreeder"===e?n="Add option to auto breed when Breed XP is full":"Scouts"===e?n="You can choose the order of race legs for each relay team":"Money Mark"===e?n="Add new indicator to race, beat its time to gain increased coins":"National Races"===e?n="Gain 1 medal for every "+o+" free races you complete":"International Races"===e?n="Gain 1 medal for every "+r+" free races you complete":"Team Manager"===e?n="Add option to automatically run 1 free race per reset period <em>(banks 2 hours worth of races when idle)</em>":"Incubator Upgrade Lv1"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .01 per Breed. <em>(10% trait value)</em>":"Incubator Upgrade Lv2"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .025 per Breed. <em>(25% trait value)</em>":"Incubator Upgrade Lv3"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .05 per Breed. <em>(50% trait value)</em>":"Incubator Upgrade Lv4"===e?n="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .1 per Breed. <em>(100% trait value)</em>":"Whistle"===e?n="Gain +"+l+" to a stat instead of +1 after a successful coaching attempt":"Golden Whistle"===e?n="Gain +"+u+" to a stat instead of +"+l+" after a successful coaching attempt":"Talent Point Voucher"===e&&(n="Increase Talent Points by 1");var m=this.sanitizer.sanitize(Kt.HTML,this.sanitizer.bypassSecurityTrustHtml(n));return null!==m&&(n=m),n}getWeatherClusterFromEnum(e){var n="";return e===Ei.clearSkies?n="Clear Skies":e===Ei.inclementWeather?n="Inclement Weather":e===Ei.coldSpell&&(n="Cold Spell"),n}getWeatherClusterDescription(e){var n="";return e===Ei.clearSkies?n="Race terrain shifts between Sunny, Torrid, and Ashfall. \n Flatland and Volcanic Morale increased by 20%.":e===Ei.inclementWeather?n="Race terrain shifts between Rainy, Stormy, Maelstrom, and Hailstorm. \n Ocean Morale increased by 20%.":e===Ei.coldSpell&&(n="Race terrain shifts between Sunny, Snowfall, and Hailstorm. \n Tundra and Mountain Morale increased by 20%."),n}topSpeedPopover(e){var n=e.currentStats.defaultMaxSpeedModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultMaxSpeedModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,be.topSpeed),c=1;e.talentTree.talentTreeType===ct.longDistance&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases max speed by "+this.getMaxSpeedModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.maxSpeedModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.maxSpeedModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}accelerationPopover(e){var n=e.currentStats.defaultAccelerationModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAccelerationModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,be.acceleration),c=1;e.talentTree.talentTreeType===ct.sprint&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases acceleration by "+this.getAccelerationModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.accelerationModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.accelerationModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}endurancePopover(e){var n=e.currentStats.defaultStaminaModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultStaminaModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,be.endurance),c=1;e.talentTree.talentTreeType===ct.longDistance&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases stamina by "+this.getStaminaModifierByAnimalType(e.type).toFixed(3)+" up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.staminaModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.staminaModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}powerPopover(e){var n=e.currentStats.defaultPowerModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultPowerModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,be.power),c=1;e.talentTree.talentTreeType===ct.sprint&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases ability efficiency by "+this.getPowerModifierByAnimalType(e.type).toFixed(3)+"% up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.powerModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.powerModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}focusPopover(e){var n=e.currentStats.defaultFocusModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultFocusModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,be.focus),c=1;e.talentTree.talentTreeType===ct.longDistance&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases focus distance by "+this.getFocusModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.focusModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.focusModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}adaptabilityPopover(e){var n=e.currentStats.defaultAdaptabilityModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAdaptabilityModifier");null!=a&&(n=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,be.adaptability),c=1;e.talentTree.talentTreeType===ct.sprint&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases adaptability distance by "+this.getAdaptabilityModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+n.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.adaptabilityModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.adaptabilityModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}abilityPopover(){var e=25,n=this.globalService.globalVar.modifiers.find(a=>"abilityLevelCapModifier"===a.text);return null!=n&&(e=n.value),"Select from up to three different abilities by clicking on their names here. Using your ability during a race will award your ability XP which increases its effectiveness. Ability level cannot exceed your animal's breed level + "+e+"."}abilityLevelPopover(e){var n="Base Efficiency: "+e.ability.efficiency+"\n";return e.ability.abilityLevel>1&&(n+="Level Efficiency Multiplier: "+(1+.01*(e.ability.abilityLevel-1))),n}bonusFreeRaceXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusLocalBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusLocalBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusLocalBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusCircuitRaceXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusCircuitBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+2*e.miscStats.bonusCircuitBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusCircuitBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusTrainingXpPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusTrainingBreedXpCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusTrainingBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusTrainingBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusDiminishingReturnsPerFacilityLevelPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel();return r>0&&(n+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusDiminishingReturnsCertificateCount>0&&(n+="Certificates Bonus: "+e.miscStats.bonusDiminishingReturnsCertificateCount+" (Certificates Used: "+e.miscStats.bonusDiminishingReturnsCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),n}bonusTrainingTimeReductionPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction();return r>0&&(n+="Track Race Rewards: "+r+"%\n"),n}bonusTalentsPopover(e){var n="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();return r>0&&(n+="Track Race Rewards: "+r+"\n"),n}isAmountMoreThanCertificateCap(e,n,r){var a=!1;return e=+e,"Free Race Breed XP Gain Certificate"===r&&n.miscStats.bonusLocalBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Circuit Race Breed XP Gain Certificate"===r&&n.miscStats.bonusCircuitBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Training Breed XP Gain Certificate"===r&&n.miscStats.bonusTrainingBreedXpCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),"Diminishing Returns Increase Certificate"===r&&n.miscStats.bonusDiminishingReturnsCertificateCount+e>n.miscStats.certificateUseCap&&(a=!0),a}getAnimalMorale(e){if(null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e);return null==n?0:n.morale}changeGrandPrixMorale(e,n){if(null!=this.globalService.globalVar.eventRaceData&&null!=this.globalService.globalVar.eventRaceData.animalData&&0!==this.globalService.globalVar.eventRaceData.animalData.length){var r=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e);null!=r&&(r.morale+=n,r.morale>=3&&(r.morale=3),r.morale<=.5&&(r.morale=.5))}}slowSegmentWarning(e){return!e||confirm("The animal you have selected has low racing stats for this race. You may experience some loading time as they race. Continue?")}getWeekDayGrandPrixTimeSpan(){var e=new Bi;return this.utilityService.getDayOfWeekFromNumber(e.weekStartDay)+" "+this.utilityService.get24HourFormat(e.weekStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekEndDay)+" "+this.utilityService.get24HourFormat(e.weekEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekEndHour)+")"}getWeekEndGrandPrixTimeSpan(){var e=new Bi;return this.utilityService.getDayOfWeekFromNumber(e.weekendStartDay)+" "+this.utilityService.get24HourFormat(e.weekendStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekendEndDay)+" "+this.utilityService.get24HourFormat(e.weekendEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendEndHour)+")"}getRandomTip(){var e="",n=[];return this.globalService.globalVar.settings.get("hideTips")||(n.push("After upgrading training options, reselect them to gain their benefits!"),n.push("Don't forget to export your save regularly!"),n.push("Have to recite the alphabet to figure out what your next circuit rank is? You're not alone, go to the settings to use numbers instead!"),n.push("Small barns allow training for 2 hours, medium for 4 hours, and large for 8 hours. Your animals will train even when the game is not active."),n.push("Each animal gains more or less racing stats from a base stat than other animals. Hover over each base stat in the Animals tab to see its modifier."),n.push("Can't quite finish a close race? Burst Chance and Distance are not affected by Diminishing Returns, so continue to increase those stats to get ahead!"),e=n[this.utilityService.getRandomInteger(0,n.length-1)]),e}getRandomFunFact(){var e,n,r,a,o,s,l="",c=[];return this.globalService.globalVar.settings.get("hideTips")||(c.push("Horses are prey animals. Their best method of defense? Run!"),(null===(e=this.globalService.globalVar.animals.find(d=>d.type===X.Monkey))||void 0===e?void 0:e.isAvailable)&&c.push("There are over 300 species of Monkey in the world. Roughly half are considered Old World Monkeys in Asia and Africa, and the others are New World Monkeys in Central and South America."),(null===(n=this.globalService.globalVar.animals.find(d=>d.type===X.Goat))||void 0===n?void 0:n.isAvailable)&&c.push("Mountain goats' wide toes, rough hooves, and sharp dewclaws give them incredible traction and the ability to climb steep slopes sometimes over 60 degrees."),(null===(r=this.globalService.globalVar.animals.find(d=>d.type===X.Octopus))||void 0===r?void 0:r.isAvailable)&&c.push("Octopi have the largest brain of any invertebrate and have been known to use tools, such as using coconut husks to defend themselves."),(null===(a=this.globalService.globalVar.animals.find(d=>d.type===X.Hare))||void 0===a?void 0:a.isAvailable)&&c.push("Hares' teeth never stop growing. They continually chew on grasses and twigs to keep their teeth from getting too large."),(null===(o=this.globalService.globalVar.animals.find(d=>d.type===X.Penguin))||void 0===o?void 0:o.isAvailable)&&c.push("Penguins' bodies are tapered on both ends meaning they can swim with very little resistance. They are considered one of the most streamlined animals in the world."),(null===(s=this.globalService.globalVar.animals.find(d=>d.type===X.Salamander))||void 0===s?void 0:s.isAvailable)&&c.push("Salamanders are capable of regenerating some organs and limbs. Their impressive regeneration is used as a model for scientific studies."),l=c[this.utilityService.getRandomInteger(0,c.length-1)]),l}getSettingDescriptions(e){var n="";return"Auto Skip Race Info"===e&&(n="Turn on to immediately skip to the end of any race."),"Finish Training Before Switching"===e&&(n="Turn on to wait until finishing your current training before switching to the next training you select."),"Hide Tips"===e&&(n="Turn on to stop displaying tips in the footer. (Tips never display in Mobile version presently)"),"Use Numbers For Circuit Rank"===e&&(n="Turn on to use numbers instead of letters when displaying ranks."),"Auto Start Event Race"===e&&(n="When event race begins, automatically start running with your current event relay team."),"Race Display Info"===e&&(n="Choose how to view races. Draw only shows the visual aspect, text only shows the textual updates, and both shows both. Both is default."),n}getTotalFreeRacesPerPeriod(){var e=10,n=this.globalService.globalVar.modifiers.find(o=>"freeRacesPerTimePeriodModifier"===o.text);void 0!==n&&(e=n.value);var r=this.getRenown();return e+Math.floor(r/100)}getRemainingFreeRacesPerPeriod(){return this.getTotalFreeRacesPerPeriod()-this.globalService.globalVar.freeRaceCounter}getRelayEffectFromListByType(e,n){if(null!=e&&0!==e.length)return e.find(r=>r.effectType===n)}isEquipmentItemAnOrb(e){return"Amethyst Orb"===e||"Sapphire Orb"===e||"Amber Orb"===e||"Topaz Orb"===e||"Emerald Orb"===e||"Ruby Orb"===e}getRelayEffectNameByType(e){var n="";return e===je.bigBrain?n="Big Brain":e===je.blueBaton?n="Blue Baton":e===je.camouflage?n="Camouflage":e===je.deepBreathing?n="Deep Breathing":e===je.flowingCurrent?n="Flowing Current":e===je.greenBaton?n="Green Baton":e===je.herdMentality?n="Herd Mentality":e===je.inspiration?n="Inspiration":e===je.navigator?n="Navigator":e===je.orangeBaton?n="Orange Baton":e===je.redBaton?n="Red Baton":e===je.specialDelivery?n="Special Delivery":e===je.supportAbilityCooldown?n="Cooldown Reduction Talent":e===je.supportAbilityEfficiency?n="Ability Efficiency Talent":e===je.supportAccelerationRelay?n="Acceleration Rate Talent":e===je.supportAdaptabilityRelay?n="Adaptability Distance Talent":e===je.supportBurstChance?n="Burst Chance Talent":e===je.supportBurstDistance?n="Burst Distance Talent":e===je.supportFocusRelay?n="Focus Distance Talent":e===je.supportMaxSpeedRelay?n="Max Speed Talent":e===je.supportPowerRelay?n="Power Efficiency Talent":e===je.supportStaminaRelay?n="Stamina Talent":e===je.violetBaton?n="Violet Baton":e===je.yellowBaton&&(n="Yellow Baton"),n}getStatGainDescription(e,n){var r="";return e.topSpeed>0&&(r+="+"+n*e.topSpeed+" Speed\n"),e.acceleration>0&&(r+="+"+n*e.acceleration+" Acceleration\n"),e.endurance>0&&(r+="+"+n*e.endurance+" Endurance\n"),e.focus>0&&(r+="+"+n*e.focus+" Focus\n"),e.power>0&&(r+="+"+n*e.power+" Power\n"),e.adaptability>0&&(r+="+"+n*e.adaptability+" Adaptability\n"),r}getTalentTreeNames(){var e=[];return e.push("Sprint"),e.push("Support"),e.push("Long Distance"),e}getInDepthTalentTreeDescription(e){var n="";return"Sprint"===e?n="Sprinters excel at going short distances quickly. Whether it's through chaining together quick Bursts or powerful abilities, these racers will leave others in the dust at the starting line. Recommended for when you want to get the most out of Burst effects and high acceleration.":"Support"===e?n="Supporters excel when working alongside other animals. They have a special way of encouraging the racers after and sometimes before them to reach new limits. Recommended for when you want to get the most out of Relay effects.":"Long Distance"===e&&(n="Long Distance Racers excel when given time to ramp up and go the distance. These racers manage their stamina well and can reach incredible speeds over time. Recommended for racers with high max speed and that have abilities that improve over time."),n}getTalentDescription(e,n,r,a){var o="";return(null==a||a<=0)&&(a=1),r===ct.sprint&&(0===e&&0===n&&(o="Increase Adaptability stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(o="Increase Adaptability Distance by <span class='keyword'>"+5*a+"</span>% until you lose focus for the first time."),2===e&&0===n&&(o="Increase Adaptability Distance gain from Adaptability stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(o="Every time you make it through a special path without stumbling, enter a Burst that lasts <span class='keyword'>"+5*a+"</span>% as long as normal."),0===e&&1===n&&(o="Increase Acceleration stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(o="The first time velocity exceeds Max Speed while bursting, increase remaining burst distance by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===n&&(o="Increase Acceleration Rate gain from Acceleration stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(o="Each time your velocity reaches Max Speed, increase Max Speed by <span class='keyword'>"+.5*a+"</span>% and reduce Focus Distance by <span class='keyword'>"+.5*a+"</span>%. This effect can occur 10 times, up to <span class='keyword'>"+5*a+"</span>%."),0===e&&2===n&&(o="Increase Power stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(o="Increase Power Efficiency by <span class='keyword'>"+5*a+"</span>%, but consume stamina <span class='keyword'>"+5*a+"</span>% faster."),2===e&&2===n&&(o="Increase Power Efficiency gain from Power stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(o="The first time you use an ability every race, the efficiency is increased by <span class='keyword'>"+5*a+"</span>%.")),r===ct.support&&(0===e&&0===n&&(o="Increase Relay Animal's Adaptability Distance by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(o="Increase the effectiveness of your Relay effects by <span class='keyword'>"+2*a+"</span>%."),2===e&&0===n&&(o="Increase Relay Animal's Max Speed by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(o="The racer prior to you gains any relay effects you provide for <span class='keyword'>"+3*a+"</span>% of the normal length if possible."),0===e&&1===n&&(o="Increase Relay Animal's Acceleration Rate by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(o="Increase Burst Distance of next racer by <span class='keyword'>"+5*a+"</span>% of your Burst Distance on Relay."),2===e&&1===n&&(o="Increase Relay Animal's Stamina by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(o="Increase Burst Chance of next racer by <span class='keyword'>"+3*a+"</span>% of your Burst Chance on Relay."),0===e&&2===n&&(o="Increase Relay Animal's Power Efficiency by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(o="If Relay Animal ability has a cooldown, reduce it by <span class='keyword'>"+2*a+"</span>%."),2===e&&2===n&&(o="Increase Relay Animal's Focus Distance by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(o="Increase Relay Animal's Ability Efficiency by <span class='keyword'>"+2*a+"</span>%.")),r===ct.longDistance&&(0===e&&0===n&&(o="Increase Focus stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===n&&(o="Every burst increases Burst Velocity Bonus by <span class='keyword'>"+.5*a+"</span>%."),2===e&&0===n&&(o="Increase Focus Distance gain from Focus stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===n&&(o="Instead of reducing velocity to 10% when losing focus, reduce to <span class='keyword'>"+(10+2*a)+"</span>%."),0===e&&1===n&&(o="Increase Max Speed stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===n&&(o="While your velocity is 25% of your Max Speed or below, increase your Acceleration Rate by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===n&&(o="Increase Max Speed gain from Speed stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===n&&(o="After surpassing <span class='keyword'>"+.5*a+"</span>% of your Max Speed, your velocity can no longer drop below it. All calculations consider this to be 0% of your velocity."),0===e&&2===n&&(o="Increase Endurance stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===n&&(o="While stamina is below 35%, reduce stamina consumption by <span class='keyword'>"+5*a+"</span>%."),2===e&&2===n&&(o="Increase Stamina gain from Endurance stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===n&&(o="When running out of stamina, increase the percent regained by <span class='keyword'>"+2*a+"</span>%.")),o}getTalentUpgradeDescription(e,n,r,a){}getTotalPossiblePointsByRowColumn(e,n,r){var a=0;return r===ct.sprint&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),r===ct.support&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),r===ct.longDistance&&(0===e&&0===n&&(a=999),1===e&&0===n&&(a=10),2===e&&0===n&&(a=999),3===e&&0===n&&(a=10),0===e&&1===n&&(a=999),1===e&&1===n&&(a=10),2===e&&1===n&&(a=999),3===e&&1===n&&(a=10),0===e&&2===n&&(a=999),1===e&&2===n&&(a=10),2===e&&2===n&&(a=999),3===e&&2===n&&(a=10)),a}getTalentPointsAvailableToAnimal(e){var n=0;return n=this.getResourceByName("Talent Points"),n+=e.miscStats.bonusTalents,(n-=e.talentTree.getTotalSpentPoints())<=0&&(n=0),n}gainMangoes(e){return new pe("Mangoes",e,Y.Food)}gainApples(e){return new pe("Apples",e,Y.Food)}gainBananas(e){return new pe("Bananas",e,Y.Food)}gainOranges(e){return new pe("Oranges",e,Y.Food)}gainStrawberries(e){return new pe("Strawberries",e,Y.Food)}gainTurnips(e){return new pe("Turnips",e,Y.Food)}gainCarrots(e){return new pe("Carrots",e,Y.Food)}gainCoins(e){return new pe("Coins",e,Y.Resources)}gainTokens(e){return new pe("Tokens",e,Y.Resources)}}return t.\u0275fac=function(e){return new(e||t)(Ve(St),Ve(Li),Ve(Mo))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mi=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n,this.totalTime=0,this.gameUpdateEvent=new nt}Update(){var e=Date.now();const n=(e-this.globalService.globalVar.lastTimeStamp)/1e3;this.deltaTime=n,this.totalTime+=n;var r=performance.now();this.globalService.globalVar.lastTimeStamp=e,this.gameUpdateEvent.emit(n),this.lastPerformanceNow=r,window.requestAnimationFrame(()=>this.Update())}}return t.\u0275fac=function(e){return new(e||t)(Ve(St),Ve(hn))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Al{constructor(i,e){this.transformationType=i,this.options=e,this.recursionStack=new Set}transform(i,e,n,r,a,o=0){if(Array.isArray(e)||e instanceof Set){const s=r&&this.transformationType===zt.PLAIN_TO_CLASS?function A4(t){const i=new t;return i instanceof Set||"push"in i?i:[]}(r):[];return e.forEach((l,c)=>{const u=i?i[c]:void 0;if(this.options.enableCircularCheck&&this.isCircular(l))this.transformationType===zt.CLASS_TO_CLASS&&(s instanceof Set?s.add(l):s.push(l));else{let d;if("function"!=typeof n&&n&&n.options&&n.options.discriminator&&n.options.discriminator.property&&n.options.discriminator.subTypes){if(this.transformationType===zt.PLAIN_TO_CLASS){d=n.options.discriminator.subTypes.find(y=>y.name===l[n.options.discriminator.property]);const _=n.typeFunction({newObject:s,object:l,property:void 0});d=void 0===d?_:d.value,n.options.keepDiscriminatorProperty||delete l[n.options.discriminator.property]}this.transformationType===zt.CLASS_TO_CLASS&&(d=l.constructor),this.transformationType===zt.CLASS_TO_PLAIN&&(l[n.options.discriminator.property]=n.options.discriminator.subTypes.find(v=>v.value===l.constructor).name)}else d=n;const m=this.transform(u,l,d,void 0,l instanceof Map,o+1);s instanceof Set?s.add(m):s.push(m)}}),s}if(n===String&&!a)return null==e?e:String(e);if(n===Number&&!a)return null==e?e:Number(e);if(n===Boolean&&!a)return null==e?e:Boolean(e);if((n===Date||e instanceof Date)&&!a)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(function M4(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}().Buffer&&(n===Buffer||e instanceof Buffer)&&!a)return null==e?e:Buffer.from(e);if(function k4(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}(e)&&!a)return new Promise((s,l)=>{e.then(c=>s(this.transform(void 0,c,n,void 0,void 0,o+1)),l)});if(!a&&null!==e&&"object"==typeof e&&"function"==typeof e.then)return e;if("object"==typeof e&&null!==e){!n&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(n=e.constructor)),!n&&i&&(n=i.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);const s=this.getKeys(n,e,a);let l=i||{};!i&&(this.transformationType===zt.PLAIN_TO_CLASS||this.transformationType===zt.CLASS_TO_CLASS)&&(l=a?new Map:n?new n:{});for(const c of s){if("__proto__"===c||"constructor"===c)continue;const u=c;let v,d=c,m=c;if(!this.options.ignoreDecorators&&n)if(this.transformationType===zt.PLAIN_TO_CLASS){const w=ar.findExposeMetadataByCustomName(n,c);w&&(m=w.propertyName,d=w.propertyName)}else if(this.transformationType===zt.CLASS_TO_PLAIN||this.transformationType===zt.CLASS_TO_CLASS){const w=ar.findExposeMetadata(n,c);w&&w.options&&w.options.name&&(d=w.options.name)}v=this.transformationType===zt.PLAIN_TO_CLASS?e[u]:e instanceof Map?e.get(u):e[u]instanceof Function?e[u]():e[u];let _,y=v instanceof Map;if(n&&a)_=n;else if(n){const w=ar.findTypeMetadata(n,m);if(w){const T={newObject:l,object:e,property:m},L=w.typeFunction?w.typeFunction(T):w.reflectedType;w.options&&w.options.discriminator&&w.options.discriminator.property&&w.options.discriminator.subTypes?e[u]instanceof Array?_=w:(this.transformationType===zt.PLAIN_TO_CLASS&&(_=w.options.discriminator.subTypes.find(G=>{if(v&&v instanceof Object&&w.options.discriminator.property in v)return G.name===v[w.options.discriminator.property]}),_=void 0===_?L:_.value,w.options.keepDiscriminatorProperty||v&&v instanceof Object&&w.options.discriminator.property in v&&delete v[w.options.discriminator.property]),this.transformationType===zt.CLASS_TO_CLASS&&(_=v.constructor),this.transformationType===zt.CLASS_TO_PLAIN&&v&&(v[w.options.discriminator.property]=w.options.discriminator.subTypes.find(G=>G.value===v.constructor).name)):_=L,y=y||w.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(T=>T.target===n&&!!T.properties[m]).forEach(T=>_=T.properties[m]);else if(this.options.enableImplicitConversion&&this.transformationType===zt.PLAIN_TO_CLASS){const T=Reflect.getMetadata("design:type",n.prototype,m);T&&(_=T)}}const S=Array.isArray(e[u])?this.getReflectedType(n,m):void 0,D=i?i[u]:void 0;if(l.constructor.prototype){const w=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if((this.transformationType===zt.PLAIN_TO_CLASS||this.transformationType===zt.CLASS_TO_CLASS)&&(w&&!w.set||l[d]instanceof Function))continue}if(this.options.enableCircularCheck&&this.isCircular(v)){if(this.transformationType===zt.CLASS_TO_CLASS){let w=v;w=this.applyCustomTransformations(w,n,c,e,this.transformationType),(void 0!==w||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,w):l[d]=w)}}else{const w=this.transformationType===zt.PLAIN_TO_CLASS?d:c;let T;this.transformationType===zt.CLASS_TO_PLAIN?(T=e[w],T=this.applyCustomTransformations(T,n,w,e,this.transformationType),T=e[w]===T?v:T,T=this.transform(D,T,_,S,y,o+1)):void 0===v&&this.options.exposeDefaultValues?T=l[d]:(T=this.transform(D,v,_,S,y,o+1),T=this.applyCustomTransformations(T,n,w,e,this.transformationType)),(void 0!==T||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,T):l[d]=T)}}return this.options.enableCircularCheck&&this.recursionStack.delete(e),l}return e}applyCustomTransformations(i,e,n,r,a){let o=ar.findTransformMetadatas(e,n,this.transformationType);return void 0!==this.options.version&&(o=o.filter(s=>!s.options||this.checkVersion(s.options.since,s.options.until))),o=o.filter(this.options.groups&&this.options.groups.length?s=>!s.options||this.checkGroups(s.options.groups):s=>!s.options||!s.options.groups||!s.options.groups.length),o.forEach(s=>{i=s.transformFn({value:i,key:n,obj:r,type:a,options:this.options})}),i}isCircular(i){return this.recursionStack.has(i)}getReflectedType(i,e){if(!i)return;const n=ar.findTypeMetadata(i,e);return n?n.reflectedType:void 0}getKeys(i,e,n){let r=ar.getStrategy(i);"none"===r&&(r=this.options.strategy||"exposeAll");let a=[];if(("exposeAll"===r||n)&&(a=e instanceof Map?Array.from(e.keys()):Object.keys(e)),n)return a;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&i&&(a=[...ar.getExposedProperties(i,this.transformationType),...ar.getExcludedProperties(i,this.transformationType)]),!this.options.ignoreDecorators&&i){let o=ar.getExposedProperties(i,this.transformationType);this.transformationType===zt.PLAIN_TO_CLASS&&(o=o.map(l=>{const c=ar.findExposeMetadata(i,l);return c&&c.options&&c.options.name?c.options.name:l})),a=this.options.excludeExtraneousValues?o:a.concat(o);const s=ar.getExcludedProperties(i,this.transformationType);s.length>0&&(a=a.filter(l=>!s.includes(l))),void 0!==this.options.version&&(a=a.filter(l=>{const c=ar.findExposeMetadata(i,l);return!c||!c.options||this.checkVersion(c.options.since,c.options.until)})),a=a.filter(this.options.groups&&this.options.groups.length?l=>{const c=ar.findExposeMetadata(i,l);return!c||!c.options||this.checkGroups(c.options.groups)}:l=>{const c=ar.findExposeMetadata(i,l);return!(c&&c.options&&c.options.groups&&c.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter(o=>this.options.excludePrefixes.every(s=>o.substr(0,s.length)!==s))),a=a.filter((o,s,l)=>l.indexOf(o)===s),a}checkVersion(i,e){let n=!0;return n&&i&&(n=this.options.version>=i),n&&e&&(n=this.options.version<e),n}checkGroups(i){return!i||this.options.groups.some(e=>i.includes(e))}}const Pl={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},fa=new class P4{instanceToPlain(i,e){return new Al(zt.CLASS_TO_PLAIN,Nr(Nr({},Pl),e)).transform(void 0,i,void 0,void 0,void 0,void 0)}classToPlainFromExist(i,e,n){return new Al(zt.CLASS_TO_PLAIN,Nr(Nr({},Pl),n)).transform(e,i,void 0,void 0,void 0,void 0)}plainToInstance(i,e,n){return new Al(zt.PLAIN_TO_CLASS,Nr(Nr({},Pl),n)).transform(void 0,e,i,void 0,void 0,void 0)}plainToClassFromExist(i,e,n){return new Al(zt.PLAIN_TO_CLASS,Nr(Nr({},Pl),n)).transform(i,e,void 0,void 0,void 0,void 0)}instanceToInstance(i,e){return new Al(zt.CLASS_TO_CLASS,Nr(Nr({},Pl),e)).transform(void 0,i,void 0,void 0,void 0,void 0)}classToClassFromExist(i,e,n){return new Al(zt.CLASS_TO_CLASS,Nr(Nr({},Pl),n)).transform(e,i,void 0,void 0,void 0,void 0)}serialize(i,e){return JSON.stringify(this.instanceToPlain(i,e))}deserialize(i,e,n){const r=JSON.parse(e);return this.plainToInstance(i,r,n)}deserializeArray(i,e,n){const r=JSON.parse(e);return this.plainToInstance(i,r,n)}};function mD(t,i,e){return fa.plainToInstance(t,i,e)}let Xv=(()=>{class t{constructor(e,n,r){this.globalService=e,this.utilityService=n,this.lookupService=r}getSpecializationPopoverText(e,n){var r="";if(e===Bt.TrainingFacility&&(r=n<=20?"Training Time Reduction: "+n+"%<br/>":"Training Time Reduction: 20%<br/> All Stat Multiplier: "+(n-20)/10+"<br/>"),e===Bt.BreedingGrounds){var a=this.globalService.globalVar.modifiers.find(G=>"breedingGroundsSpecializationModifier"===G.text);null!=a&&(r="Training Breed XP Multipler: "+n*(100*a.value)+"%<br/>")}if(e===Bt.Attraction){var o=60,s=this.globalService.globalVar.modifiers.find(G=>"attractionTimeToCollectModifier"===G.text);null!=s&&(o=s.value);var l=0,c=this.globalService.globalVar.modifiers.find(G=>"attractionAmountModifier"===G.text);if(null!=c)for(var u=1;u<=n;u++)l+=c.value+5*(u-1);r="Amount Earned: "+l+" Coins / "+o+" seconds<br/>"}else if(e===Bt.ResearchCenter){var d=this.globalService.globalVar.modifiers.find(G=>"researchCenterIncrementsModifier"===G.text),m=this.globalService.globalVar.modifiers.find(G=>"researchCenterTrainingAnimalModifier"===G.text),v=this.globalService.globalVar.modifiers.find(G=>"researchCenterStudyingAnimalModifier"===G.text),_=this.globalService.globalVar.modifiers.find(G=>"researchCenterMaxStatGainModifier"===G.text);if(null==d||null==m||null==v||null==_)return"";var y=n*d.value,D="Training Animal Stat Gain: "+(100*(m.value+y<_.value?m.value+y:_.value)).toFixed(0)+"%<br />",w=(y-(_.value-m.value))/(_.value-v.value);w>0?(Math.floor(w)>0&&(D+="Additional Studying Animal Stat Gain (x"+Math.floor(w)+"): "+(100*_.value).toFixed(0)+"%<br />"),w>Math.floor(w)&&(D+="Additional Studying Animal Stat Gain: "+(100*((w-Math.floor(w))*(_.value-v.value)+v.value)).toFixed(0)+"%<br />")):D+="Additional Studying Animal Stat Gain: "+(100*v.value).toFixed(0)+"%<br />",r=D}var L=this.utilityService.getSanitizedHtml(r);return null!=L&&(r=L),r}handleResearchCenterStatIncrease(e,n){var r=this.globalService.globalVar.modifiers.find(G=>"researchCenterIncrementsModifier"===G.text),a=this.globalService.globalVar.modifiers.find(G=>"researchCenterTrainingAnimalModifier"===G.text),o=this.globalService.globalVar.modifiers.find(G=>"researchCenterStudyingAnimalModifier"===G.text),s=this.globalService.globalVar.modifiers.find(G=>"researchCenterMaxStatGainModifier"===G.text);if(null!=r&&null!=a&&null!=o&&null!=s&&null!=e.currentTraining){var S,c=n.barnUpgrades.specializationLevel*r.value,u=e.currentTraining.affectedStatRatios.topSpeed,d=e.currentTraining.affectedStatRatios.acceleration,m=e.currentTraining.affectedStatRatios.endurance,v=e.currentTraining.affectedStatRatios.power,_=e.currentTraining.affectedStatRatios.focus,y=e.currentTraining.affectedStatRatios.adaptability;e.increaseStats(new Ee((S=a.value+c<s.value?a.value+c:s.value)*u,S*d,S*m,S*v,S*_,S*y)),this.globalService.calculateAnimalRacingStats(e);var D=(c-(s.value-a.value))/(s.value-o.value),w=this.getAnimalsInRandomOrder(e.raceCourseType,e);if(D>0){w.length<D&&(D=w.length);for(var T=0;T<Math.floor(D);T++)w[T].increaseStats(new Ee(s.value*u,s.value*d,s.value*m,s.value*v,s.value*_,s.value*y)),this.globalService.calculateAnimalRacingStats(w[T]);if(D>Math.floor(D)&&w.length>T){var L=o.value+(D-Math.floor(D))*(s.value-o.value);w[T].increaseStats(new Ee(L*u,L*d,L*m,L*v,L*_,L*y)),this.globalService.calculateAnimalRacingStats(w[T])}}else w.length>=1&&(w[0].increaseStats(new Ee((L=o.value)*u,L*d,L*m,L*v,L*_,L*y)),this.globalService.calculateAnimalRacingStats(w[0]))}}getAnimalsInRandomOrder(e,n){for(var r=[],a=this.globalService.globalVar.animals.filter(u=>u.raceCourseType===e&&u.isAvailable&&u.type!==n.type),o=this.globalService.globalVar.animals.filter(u=>u.raceCourseType!==e&&u.isAvailable),s=a.length,l=0;l<s;l++){var c=this.utilityService.getRandomInteger(1,a.length);r.push(a[c-1]),a=a.filter(u=>u!==a[c-1])}for(s=o.length,l=0;l<s;l++)c=this.utilityService.getRandomInteger(1,o.length),r.push(o[c-1]),o=o.filter(m=>m!==o[c-1]);return r}handleAttractionRevenue(e,n){var r=this.globalService.globalVar.barns.find(m=>m.barnNumber===n.associatedBarnNumber);if(null!=r&&r.barnUpgrades.specialization===Bt.Attraction){var a=60,o=this.globalService.globalVar.modifiers.find(m=>"attractionTimeToCollectModifier"===m.text);null!=o&&(a=o.value);var s=0,l=this.globalService.globalVar.modifiers.find(m=>"attractionAmountModifier"===m.text);if(null!=l)for(var c=1;c<=r.barnUpgrades.specializationLevel;c++)s+=l.value+5*(c-1);for(r.barnUpgrades.currentDeltaTime+=e,null!==n.currentTraining&&r.barnUpgrades.currentDeltaTime>=n.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.currentDeltaTime=n.currentTraining.trainingTimeRemaining);r.barnUpgrades.currentDeltaTime>=a;){r.barnUpgrades.currentDeltaTime-=a;var d=this.globalService.globalVar.resources.find(m=>"Coins"===m.name);void 0!==d&&(d.amount+=s)}}}}return t.\u0275fac=function(e){return new(e||t)(Ve(St),Ve(Li),Ve(hn))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Pr=(()=>{return(t=Pr||(Pr={}))[t.None=0]="None",t[t.Stumble=1]="Stumble",t[t.LostFocus=2]="LostFocus",t[t.LostStamina=3]="LostStamina",t[t.Burst=4]="Burst",Pr;var t})();let Yv=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.utilityService=r,this.initializeService=a,this.frameModifier=60,this.timeToComplete=60,this.currentLostFocusOpportunity=0,this.currentBurstOpportunity=0,this.tundraPreviousYAmount=0}runRace(e,n){this.currentBurstOpportunity=0,this.currentLostFocusOpportunity=0,this.tundraPreviousYAmount=0,this.selectedRace=e;var r=new Zh,a=0,o=0,s=0,l=0,c=0;e.raceLegs.forEach(oe=>a+=oe.distance);var u=0;(0===e.timeToComplete||null==e.timeToComplete)&&(e.timeToComplete=60);var d=a/e.timeToComplete,m=this.globalService.globalVar.animalDecks.find(oe=>oe.isPrimaryDeck),v=0;this.timeToComplete=e.timeToComplete;var _=[],y=[],S=Pr.None,D=0,w=0,T=0,L=0,G=0,ee=0,re=1,ce=new wt,me=new wt;if(void 0===m)return r.errorMessage="No relay team selected.",r;if(this.racingAnimals=this.lookupService.getAnimalsFromAnimalDeck(m),e.raceUI.distanceCoveredByFrame=[],e.raceUI.velocityByFrame=[],e.raceUI.timeToCompleteByFrame=[],e.raceUI.maxSpeedByFrame=[],e.raceUI.staminaPercentByFrame=[],e.raceUI.yAdjustmentByFrame=[],e.raceUI.racerEffectByFrame=[],e.raceUI.lavaFallPercentByFrame=[],e.raceUI.racePositionByFrame=[],e.timeToComplete<=180)r.addRaceUpdate(u,Math.round(e.timeToComplete)+" seconds are on the race clock.");else{var we=this.globalService.getRemainingEventRaceTime()+this.globalService.globalVar.eventRaceData.bonusTime,Fe=this.utilityService.getHoursRemainingFromSeconds(we),Ye=this.utilityService.getMinutesLeftInHourRemainingFromSeconds(we),dt=this.utilityService.getSecondsLeftInMinuteRemainingFromSeconds(we),yt=Math.floor(dt).toString(),Xt=Fe.toString(),Et=Ye.toString();Fe<10&&(Xt=Fe<1||Fe>59?"00":String(Xt).padStart(2,"0")),Ye<10&&(Et=Ye<1||Ye>59?"00":String(Et).padStart(2,"0")),dt<10&&(yt=dt<1||dt>59?"00":String(yt).padStart(2,"0")),r.addRaceUpdate(u,Xt+":"+Et+":"+yt+" is left on the race clock.")}return e.raceLegs.forEach(oe=>{var R=null;null!=(R=this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(Qe=>Qe.raceCourseType===oe.courseType))?this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||(R.raceVariables=new oo,R.totalRacesRun+=1):alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),this.globalService.globalVar.trackedStats.totalRaces+=1,e.raceLegs.forEach(oe=>{var R=void 0;if(null!=(R=this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(We=>We.raceCourseType===oe.courseType))){this.increasePersistentAbilityXp(R);var Qe=void 0;this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&(Qe=this.globalService.globalVar.eventRaceData.previousRaceSegmentData);var Ht=void 0,ln=new In,pt="<span class='coloredText "+oe.getCourseTypeClass()+"'>"+R.name+"</span>",cn="",wn="";if(w>0){var ti=this.racingAnimals.find(We=>We.raceCourseType===e.raceLegs[w-1].courseType);null!=ti&&(ce=ti)}else ce=null;if(w<e.raceLegs.length-1){ln=e.raceLegs[w+1];var li=this.racingAnimals.find(We=>We.raceCourseType===ln.courseType);null!=li&&(me=li,wn="<span class='coloredText "+ln.getCourseTypeClass()+"'>"+(null==me?void 0:me.name)+"</span>")}else me=null;this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&r.addRaceUpdate(u,pt+" clears "+Math.round(this.selectedRace.length).toLocaleString()+" meters of the Grand Prix and moves onto the next leg of the race.");var ci=oe.terrain.maxSpeedModifier,Hn=oe.terrain.accelerationModifier,ui=oe.terrain.staminaModifier,Ii=oe.terrain.powerModifier,Oi=oe.terrain.focusModifier,Di=oe.terrain.adaptabilityModifier;u<this.timeToComplete*this.frameModifier&&(y.length>0&&void 0!==(Ht=y[y.length-1])&&(cn="<span class='coloredText "+Ht.getCourseTypeClass()+"'>"+(null==ce?void 0:ce.name)+"</span>"),this.getPrelayEffects(R,me,null==ln?void 0:ln.terrain,1,r,u,cn,ln,oe),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.PrepareRacingAnimal(r,u,cn,R,_,oe,Ht,void 0,void 0,s,c,l),this.prepareRacingLeg(oe,R),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix||r.addRaceUpdate(u,pt+" starts their leg of the race."));var Mn=R.currentStats.stamina,ot=0,vi=oe.distance,sn=new Jh,Xn=new Jh,On=!1,mn=1,ni={permanentAdaptabilityIncreaseMultiplier:1},ba={permanentMaxSpeedIncreaseMultiplier:1},br=1,_a=1,co={coldBloodedIncreaseMultiplier:1},Fo=1,Ni=[],It=1,Qi=!1,ms=0,ht=[!1,!1,!1,!1,!1],Dt=!1,_r=0,wf=0,Sf=0;if(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix){var Mu=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime();wf+=d*Mu,Sf=this.globalService.globalVar.eventRaceData.distanceCovered}o+Sf>d*(u/this.frameModifier)+wf?(Qi||(Lu=!0),Qi=!0):(Qi&&(Lu=!0),Qi=!1),null!=Qe&&(ot=Qe.velocity,R.currentStats.stamina=Qe.stamina,L=Qe.deepBreathingStaminaGain,mn=Qe.permanentMaxSpeedIncreaseMultiplier,ni.permanentAdaptabilityIncreaseMultiplier=Qe.permanentAdaptabilityIncreaseMultiplier,ba.permanentMaxSpeedIncreaseMultiplier=Qe.permanentMaxSpeedIncreaseObjMultiplier,br=Qe.feedingFrenzyIncreaseMultiplier,_a=Qe.greatMigrationAccelerationIncreaseAdditive,co.coldBloodedIncreaseMultiplier=Qe.coldBloodedIncreaseMultiplier,Fo=Qe.fleetingSpeedIncreaseMultiplier,R.raceVariables=Qe.raceVariables.makeCopy(),Qe.nineTailsBuffs.length>0&&Qe.nineTailsBuffs.forEach(We=>{Ni.push(We)}),Qe.relayEffects.length>0&&Qe.relayEffects.forEach(We=>{null!=R&&(R.raceVariables.relayEffects.push(We),null!=R.raceVariables.relayEffects&&R.raceVariables.relayEffects.length>0&&R.raceVariables.relayEffects.forEach(G0=>{G0.isMultiplicative?R.currentStats.multiplyCurrentRacingStats(G0.relayAffectedStatRatios):R.currentStats.addCurrentRacingStats(G0.relayAffectedStatRatios)}))}),Dt=Qe.longDistanceTalentIncreaseAccelerationWithLowVelocity,_r=Qe.maxSpeedFloor,It=Qe.statLossFromExhaustion);var Au=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,je.camouflage);void 0!==Au&&void 0!==Au.additionalValue&&(G=Au.additionalValue);var uo=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,je.herdMentality);void 0!==uo&&void 0!==uo.additionalValue&&(T=uo.additionalValue);var ho=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,je.specialDelivery);if(void 0!==ho&&void 0!==ho.additionalValue&&(ee=ho.additionalValue),"Nap"===R.ability.name&&R.type===X.Hare){var fo=oe.distance-this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It);fo<0&&(fo=0),R.ability.remainingLength=fo}var Bo=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,je.deepBreathing);if(void 0!==Bo&&void 0!==Bo.additionalValue){var Pu=R.raceVariables.relayEffects.filter(We=>We.effectType===je.deepBreathing);void 0!==Pu&&Pu.forEach(We=>{void 0!==We.additionalValue&&(L=We.additionalValue),L>0&&R.type!==X.Goat&&(R.currentStats.stamina+=L)})}for(var Hl=u;Hl<=this.timeToComplete*this.frameModifier;Hl++){ms+=1,S=Pr.None;var vs=!1,Eu=0;if(v>0)for(var Gl=0;Gl<v;Gl++)Eu+=e.raceLegs[Gl].distance;d=this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime):a/this.timeToComplete;var kn=o-Eu,Ri=0,xi=!1,ya=0;if(oe.pathData.forEach(We=>{!xi&&kn>=ya&&kn<ya+We.length&&(xi=!0,sn=We,Ri=kn-ya),We.legStartingDistance=ya,ya+=We.length,xi||(Xn=We)}),"Night Vision"===R.ability.name&&R.type===X.Gecko&&!R.ability.abilityInUse&&!Xn.didAnimalLoseFocus&&Xn.length>0&&(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCap||(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount+=1),mn+=this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It)/100,this.globalService.increaseAbilityXp(R),R.ability.abilityInUse=!0)),"Feeding Frenzy"===R.ability.name&&R.type===X.Shark){var bs=this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It);if(kn<=bs||kn>=oe.distance-bs){br=1.5;var Iu=this.globalService.globalVar.modifiers.find(We=>"feedingFrenzyPositiveModifier"===We.text);void 0!==Iu&&(br=Iu.value)}else br=1}T>0&&(R.raceVariables.isBursting=!0,vs=!0,R.currentStats.stamina+=T,T=0,null!=ce&&(ce.ability.abilityUsed=!0)),"Navigator"===R.ability.name&&R.type===X.Dolphin&&(R.ability.abilityInUse=!1),R.type===X.Fox&&"Fleeting Speed"===R.ability.name&&!R.ability.abilityUsed&&(Fo+=this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It)/100,R.ability.abilityUsed=!0),R.type===X.Dolphin&&"Echolocation"===R.ability.name&&(R.ability.abilityInUse?(oe.terrain.maxSpeedModifier<1&&(oe.terrain.maxSpeedModifier=1),oe.terrain.accelerationModifier<1&&(oe.terrain.accelerationModifier=1),oe.terrain.staminaModifier<1&&(oe.terrain.staminaModifier=1),oe.terrain.powerModifier<1&&(oe.terrain.powerModifier=1),oe.terrain.focusModifier<1&&(oe.terrain.focusModifier=1),oe.terrain.adaptabilityModifier<1&&(oe.terrain.adaptabilityModifier=1)):(oe.terrain.maxSpeedModifier=ci,oe.terrain.accelerationModifier=Hn,oe.terrain.staminaModifier=ui,oe.terrain.powerModifier=Ii,oe.terrain.focusModifier=Oi,oe.terrain.adaptabilityModifier=Di,this.checkForBlinders(oe,R))),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix?(On=!1,sn===oe.pathData[oe.pathData.length-1]&&this.globalService.globalVar.eventRaceData.animalData.some(We=>We.isSetToRelay)&&(On=!0)):On=sn===oe.pathData[oe.pathData.length-1];var Lo=this.getModifiedAdaptability(R,ni,It,Ni,oe,kn,me,ln,r,u,pt,wn),_s=this.getModifiedFocus(R,It,Ni,co),Tf=this.didAnimalStumble(R,sn,Ri,oe.terrain,ni,Lo,It,u,pt,r),QR=this.didAnimalLoseFocus(R,this.timeToComplete,e.length,o,oe.terrain,It,Ni,co,sn,_s);if(QR){if(R.raceVariables.lostFocus=!0,R.raceVariables.hasLostFocusDuringRace=!0,R.raceVariables.currentLostFocusLength=R.raceVariables.defaultLostFocusLength,R.raceVariables.metersSinceLostFocus=0,D=ot,this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix){var KR=.02,R0=this.globalService.globalVar.modifiers.find(We=>"focusMoraleLossModifier"===We.text);null!=R0&&(KR=R0.value),this.lookupService.changeGrandPrixMorale(R.type,-KR)}if("Night Vision"===R.ability.name&&R.type===X.Gecko&&(mn=1),R.getEquippedItemName()===this.globalService.getEquipmentName(Ke.scaryMask)&&Qi&&!R.raceVariables.scaryMaskEffectOccurred){R.raceVariables.scaryMaskEffectOccurred=!0;var x0=2,ZR=this.globalService.globalVar.modifiers.find(We=>"scaryMaskEquipmentModifier"===We.text);void 0!==ZR&&(x0=ZR.value),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=x0:this.timeToComplete+=x0}r.addRaceUpdate(u,pt+" is distracted and lost focus!")}if(Tf){if(R.raceVariables.stumbled=!0,R.raceVariables.currentStumbledLength=R.raceVariables.defaultStumbledLength,D=ot,this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix){var JR=.02,M0=this.globalService.globalVar.modifiers.find(We=>"stumbleMoraleLossModifier"===We.text);null!=M0&&(JR=M0.value),this.lookupService.changeGrandPrixMorale(R.type,-JR)}r.addRaceUpdate(u,pt+" stumbles!")}if(0===R.currentStats.stamina){var Df=.9,e2=this.globalService.globalVar.modifiers.find(We=>"exhaustionStatLossModifier"===We.text);if(void 0!==e2&&(Df=e2.value),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix){var k0=1-Df;Df=1-(k0*=1/this.lookupService.getAnimalMorale(R.type))}It*=Df;var A0=.1,t2=this.globalService.globalVar.modifiers.find(We=>"exhaustionStatLossMinimumModifier"===We.text);void 0!==t2&&(A0=t2.value),It<A0&&(It=A0),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.setStaminaLossForEventAnimal(It,R.type);var Rf=.5;if(R.talentTree.talentTreeType===ct.longDistance&&(Rf+=.02*R.talentTree.column3Row4Points),R.getEquippedItemName()===this.globalService.getEquipmentName(Ke.quickSnack)){Rf=1;var n2=this.globalService.globalVar.modifiers.find(We=>"quickSnackEquipmentModifier"===We.text);void 0!==n2&&(Rf=n2.value)}R.currentStats.stamina=Mn*Rf,r.addRaceUpdate(u,pt+" runs out of stamina and must slow down.")}if(R.raceVariables.lostFocus||R.raceVariables.stumbled){if(R.raceVariables.lostFocus){S=Pr.LostFocus;var r2=.9;R.talentTree.talentTreeType===ct.longDistance&&(r2-=.02*R.talentTree.column1Row4Points);var P0=D*r2;ot>_r&&(ot-=P0/R.raceVariables.defaultLostFocusLength),R.raceVariables.currentLostFocusLength-=1,0===R.raceVariables.currentLostFocusLength&&(R.raceVariables.lostFocus=!1)}R.raceVariables.stumbled&&(S=Pr.Stumble,P0=D-D*sn.stumbleSeverity,ot>_r&&(ot-=P0/R.raceVariables.defaultStumbledLength),R.raceVariables.currentStumbledLength-=1,0===R.raceVariables.currentStumbledLength&&(R.raceVariables.stumbled=!1))}else{var Hi=R.currentStats.accelerationMs;if(Hi*=oe.terrain.accelerationModifier,Hi*=It,R.type===X.Horse&&"Pacemaker"===R.ability.name&&R.ability.abilityInUse&&(Hi*=1.5),R.type===X.Cheetah&&"Sprint"===R.ability.name&&R.ability.abilityInUse&&(Hi*=1.35),R.type===X.Cheetah&&"Giving Chase"===R.ability.name&&!Qi&&(Hi*=1+this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It)/100),"Feeding Frenzy"===R.ability.name&&R.type===X.Shark&&(Hi*=br),R.type===X.Caribou&&"Great Migration"===R.ability.name&&(Hi+=_a),"Wild Toboggan"===R.ability.name&&R.type===X.Penguin&&R.ability.abilityInUse){var Hz=this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It)/100,ys=20,a2=this.globalService.globalVar.modifiers.find(We=>"maxDriftAmountModifier"===We.text);void 0!==a2&&(ys=a2.value),(jl=sn.driftAmount)>(ys*=2)&&(jl=ys),Hi*=1+Hz*(Math.abs(jl)/ys),R.ability.abilityInUse=!0}"Nap"===R.ability.name&&R.type===X.Hare&&(R.ability.remainingLength-=d*(1/this.frameModifier),R.ability.remainingLength<=0&&(R.ability.remainingLength=0),R.ability.remainingLength>0&&(Hi=0)),"Buried Treasure"===R.ability.name&&R.type===X.Octopus&&ms<8*this.frameModifier&&(Hi=0),R.type===X.Salamander&&"Heat Up"===R.ability.name&&R.ability.abilityInUse&&(Hi*=1+.15*R.ability.totalUseCount),R.type===X.Fox&&"Trickster"===R.ability.name&&"Acceleration"===R.ability.tricksterStatLoss&&R.ability.abilityInUse&&(Hi*=.75),R.type===X.Fox&&"Trickster"===R.ability.name&&"Acceleration"===R.ability.tricksterStatGain&&R.ability.abilityInUse&&(Hi*=1.5),R.type===X.Fox&&"Nine Tails"===R.ability.name&&(Hi*=1+.15*this.getNineTailsBuffCount("Acceleration",Ni)),R.getEquippedItemName()===this.globalService.getEquipmentName(Ke.athleticTape)&&R.raceVariables.isBursting&&(Hi*=.5),Dt&&(Hi*=1+.05*R.talentTree.column2Row2Points),ot+=Hi/this.frameModifier}ot<0&&(ot=0);var An=R.currentStats.maxSpeedMs;if(An*=oe.terrain.maxSpeedModifier,An*=It,R.type===X.Cheetah&&"Sprint"===R.ability.name&&R.ability.abilityInUse&&(An*=1.35),R.type===X.Cheetah&&"On The Hunt"===R.ability.name&&(An*=mn),"Nap"===R.ability.name&&R.type===X.Hare&&(An*=2),Qi&&R.type===X.Shark&&"Blood In The Water"===R.ability.name&&(An*=1+this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It)/100),null!==me&&me.type===X.Shark&&"Feeding Frenzy"===me.ability.name||null!==ce&&ce.type===X.Shark&&"Feeding Frenzy"===ce.ability.name){var o2=.9,s2=this.globalService.globalVar.modifiers.find(We=>"feedingFrenzyNegativeModifier"===We.text);void 0!==s2&&(o2=s2.value),An*=o2}if("Feeding Frenzy"===R.ability.name&&R.type===X.Shark&&(An*=br),"Quick Toboggan"===R.ability.name&&R.type===X.Penguin&&(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCap||(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount+=1),An*=ba.permanentMaxSpeedIncreaseMultiplier)),R.type===X.Gecko&&"Night Vision"===R.ability.name&&(An*=mn),R.type===X.Fox&&"Trickster"===R.ability.name&&"Max Speed"===R.ability.tricksterStatLoss&&R.ability.abilityInUse&&(An*=.75),R.type===X.Fox&&"Trickster"===R.ability.name&&"Max Speed"===R.ability.tricksterStatGain&&R.ability.abilityInUse&&(An*=1.5),R.type===X.Fox&&"Fleeting Speed"===R.ability.name){var Ou=Fo;(Ou-=.02*Math.floor(kn/oe.distance*100)*(Ou-1))<1&&(Ou=1),An*=Ou}if(R.type===X.Fox&&"Nine Tails"===R.ability.name&&(An*=1+.15*this.getNineTailsBuffCount("Max Speed",Ni)),R.talentTree.talentTreeType===ct.sprint&&(An*=1+.005*R.talentTree.column2Row4Points*R.raceVariables.velocityReachesMaxSpeedCount),R.talentTree.talentTreeType===ct.longDistance&&ot>An*(.005*R.talentTree.column2Row4Points)&&(_r=An*(.005*R.talentTree.column2Row4Points)),R.getEquippedItemName()===this.globalService.getEquipmentName(Ke.incense)){var l2=.9,c2=this.globalService.globalVar.modifiers.find(We=>"incenseEquipmentModifier"===We.text);void 0!==c2&&(l2=c2.value),ot>=An*l2&&(ot=An)}Dt=R.talentTree.talentTreeType===ct.longDistance&&ot<=.25*An,ot>An&&(ot=An,R.talentTree.talentTreeType===ct.sprint&&R.raceVariables.velocityReachesMaxSpeedCount<10&&(R.raceVariables.velocityReachesMaxSpeedCount+=1));var E0=this.doesRacerMiniBurst(R,Xn),I0=this.doesRacerBurst(R,sn,this.timeToComplete,e.length,o,Lo,_s);if(I0||E0||vs){if(R.raceVariables.isBursting=!0,(I0||vs)&&(R.raceVariables.remainingBurstMeters+=this.getBurstDistance(R,oe.terrain.powerModifier,It)),E0&&(R.raceVariables.remainingBurstMeters+=this.getBurstDistance(R,oe.terrain.powerModifier,It)*(.05*R.talentTree.column1Row4Points)),R.raceVariables.burstCount+=1,this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix){var u2=.02,O0=this.globalService.globalVar.modifiers.find(We=>"burstMoraleBoostModifier"===We.text);null!=O0&&(u2=O0.value),this.lookupService.changeGrandPrixMorale(R.type,u2)}if(R.type===X.Monkey&&"Frenzy"===R.ability.name&&(R.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It),this.globalService.increaseAbilityXp(R)),R.type===X.Hare&&"Prey Instinct"===R.ability.name&&!R.ability.abilityUsed&&(R.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It),R.ability.abilityUsed=!0),R.type===X.Octopus&&"Big Brain"===R.ability.name&&!(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCap)){var zz=Math.round(oe.pathData.length/3);if(R.raceVariables.burstCount===zz){this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount+=1),r.addRaceUpdate(u,pt+" uses "+(null==R?void 0:R.ability.name)+".");var $z=1+this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It)/100,qz=this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;this.AddRelayEffect(new wt,R,qz,new Ee(1,1,1,$z,1,1),!0,je.bigBrain,!0);var d2=4,h2=this.globalService.globalVar.modifiers.find(We=>"relayAbilityXpGainModifier"===We.text);void 0!==h2&&(d2=h2.value),this.globalService.increaseAbilityXp(R,d2)}}if((I0||vs)&&r.addRaceUpdate(u,"<strong>BURST!</strong> "+pt+" is breaking their limit!"),E0&&r.addRaceUpdate(u,"<strong>MINI BURST!</strong> "+pt+" is breaking their limit!"),R.type!==X.Cheetah||"On The Hunt"!==R.ability.name||this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCap||(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount+=1),mn+=this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It)/100,this.globalService.increaseAbilityXp(R)),R.type===X.Goat&&"Deep Breathing"===R.ability.name){var xf=Mn*(this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It)/100);R.currentStats.stamina+=xf,r.addRaceUpdate(u,pt+" uses "+R.ability.name+"."),R.currentStats.stamina>Mn&&(xf=R.currentStats.stamina-Mn,bs=0,this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCap||(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(xf*=.2,this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount+=1),this.AddRelayEffect(new wt,R,bs,new Ee(0,0,0,0,0,0),!1,je.deepBreathing,!0,xf)),R.currentStats.stamina=Mn),this.globalService.increaseAbilityXp(R)}}var lr=ot;if(G>0){var N0=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,je.camouflage);if(void 0!==N0&&void 0!==N0.additionalValue){var V0=kn/N0.remainingRelayMeters;V0>1&&(V0=1),(lr+=(1-V0)*G)>1.5*An&&(lr=1.5*An)}}if(R.raceVariables.isBursting){S=Pr.Burst;var Nu=1.25;R.type===X.Goat&&"In The Rhythm"===R.ability.name&&(Nu+=this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It)/100),Nu+=ee,R.talentTree.talentTreeType===ct.longDistance&&(Nu+=R.raceVariables.burstCount*(.005*R.talentTree.column1Row2Points)),R.raceVariables.remainingBurstMeters>=lr/this.frameModifier?(R.raceVariables.remainingBurstMeters-=(lr*=Nu)/this.frameModifier,R.raceVariables.remainingBurstMeters<0&&(lr+=R.raceVariables.remainingBurstMeters,R.raceVariables.remainingBurstMeters=0)):(lr-=R.raceVariables.remainingBurstMeters,lr+=R.raceVariables.remainingBurstMeters*Nu,R.raceVariables.remainingBurstMeters=0,R.raceVariables.isBursting=!1,r.addRaceUpdate(u,pt+"'s burst ends.")),R.talentTree.talentTreeType===ct.sprint&&!R.raceVariables.velocityExceedsMaxSpeedDuringBurst&&lr>An&&R.raceVariables.isBursting&&(R.raceVariables.remainingBurstMeters+=R.raceVariables.remainingBurstMeters*(.05*R.talentTree.column2Row2Points),R.raceVariables.velocityExceedsMaxSpeedDuringBurst=!0)}var cr=lr/this.frameModifier;if(R.ability.abilityInUse&&(R.type===X.Monkey&&"Leap"===R.ability.name||R.type===X.Octopus&&"Propulsion"===R.ability.name)){var Xz=this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It);cr+=Xz/R.ability.totalFrames,R.ability.remainingFrames-=1,R.ability.remainingFrames<=0&&(R.ability.abilityInUse=!1)}if(oe.courseType===z.Tundra){var jl;if(this.handleTundraDrift(R,sn,Xn,On,Lo,oe.terrain,Ri,cr,It,ba,r,pt,u))cr=0,ot=0,r.addRaceUpdate(u,pt+" slides into a wall and loses all momentum!");else if((jl=Math.abs(sn.driftAmount))<=(ys=20)&&!On){var f2=1-jl/100;cr*=f2,An*=f2}this.tundraPreviousYAmount=R.raceVariables.icyCurrentYAmount}oe.courseType===z.Volcanic?this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix?this.selectedRace.raceUI.lavaFallPercentByFrame.push([0,0,0,0,0]):this.handleLavaFall(R,ms,e.length/this.timeToComplete,kn,oe.distance,r,u,ht)&&(this.timeToComplete=u/this.frameModifier):this.selectedRace.raceLegs.some(We=>We.courseType===z.Volcanic)&&this.selectedRace.raceUI.lavaFallPercentByFrame.push(this.selectedRace.raceUI.lavaFallPercentByFrame.length>0&&null!=this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]&&this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]>0?this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1]:[0,0,0,0,0]),o+=cr>vi?vi:cr,vi-=cr;var Cs=1e5;this.timeToComplete*this.frameModifier>2e4&&(Cs=1e4);var F0=1e5;if(this.timeToComplete*this.frameModifier>2e4&&(F0=1e3),e.raceUI.distanceCoveredByFrame.push(Math.round(o*F0)/F0),e.raceUI.velocityByFrame.push(Math.round(cr*Cs)/Cs),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix||e.raceUI.timeToCompleteByFrame.push(this.timeToComplete),e.raceUI.maxSpeedByFrame.push(Math.round(An*Cs)/Cs),e.raceUI.staminaPercentByFrame.push(Math.round(R.currentStats.stamina/Mn*Cs)/Cs),e.raceUI.racerEffectByFrame.push(S),this.handleRacePositionByFrame(e,d,u,this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+o:o),this.handleStamina(R,r,cr,u,oe.terrain,Mn),QR||(R.raceVariables.metersSinceLostFocus+=cr),R.type===X.Fox&&"Nine Tails"===R.ability.name&&(this.checkForNineTailsBuff(sn,Ni,R,oe,It,r,u,pt),Ni.length>0&&(Ni.forEach(We=>{We[1]-=cr}),Ni=Ni.filter(We=>We[1]>0))),R.ability.abilityInUse&&R.ability.remainingLength>0&&(R.ability.remainingLength-=cr,R.type===X.Gecko&&"Camouflage"===R.ability.name&&(R.ability.remainingLength-=cr),R.ability.remainingLength<=0)){if(R.ability.abilityInUse=!1,R.ability.currentCooldown=R.ability.cooldown,R.getEquippedItemName()===this.globalService.getEquipmentName(Ke.pendant)){var Fu=.9;void 0!==(Bu=this.globalService.globalVar.modifiers.find(We=>"pendantEquipmentModifier"===We.text))&&(Fu=Bu.value),R.ability.currentCooldown*=Fu}if(null!=R.raceVariables&&null!=R.raceVariables.relayEffects&&R.raceVariables.relayEffects.length>0){var B0=this.lookupService.getRelayEffectFromListByType(R.raceVariables.relayEffects,je.supportAbilityCooldown);void 0!==B0&&void 0!==B0.additionalValue&&(R.ability.currentCooldown*=B0.additionalValue)}}if(null!=R.ability.currentCooldown&&R.ability.currentCooldown<=0&&this.abilityRedundancyCheck(R,ot,sn,oe,vi,It)){var Bu;if(this.useAbility(R,e,oe,It,Mn,kn,co),(Uo=new K).value=u,Uo.text=R.type===X.Fox&&"Trickster"===R.ability.name?R.getAbilityUseUpdateText(pt,", gaining "+R.ability.tricksterStatGain+" but losing "+R.ability.tricksterStatLoss):R.getAbilityUseUpdateText(pt),r.raceUpdates.push(Uo),R.ability.currentCooldown=R.ability.cooldown,R.getEquippedItemName()===this.globalService.getEquipmentName(Ke.pendant))Fu=.9,void 0!==(Bu=this.globalService.globalVar.modifiers.find(t$=>"pendantEquipmentModifier"===t$.text))&&(Fu=Bu.value),R.ability.currentCooldown*=Fu;if(R.type===X.Caribou&&"Great Migration"===R.ability.name){var L0=.1*Mn;R.currentStats.stamina-=L0,_a=L0>1?.25*L0:1}}null!=R.raceVariables.relayEffects&&R.raceVariables.relayEffects.length>0&&(R.raceVariables.relayEffects.forEach(We=>{We.remainingRelayMeters<=cr?(We.remainingRelayMeters=0,We.isMultiplicative?null==R||R.currentStats.divideCurrentRacingStats(We.relayAffectedStatRatios):null==R||R.currentStats.subtractCurrentRacingStats(We.relayAffectedStatRatios),We.effectType!==je.deepBreathing&&We.effectType!==je.bigBrain&&We.effectType!==je.specialDelivery&&r.addRaceUpdate(u,pt+"'s relay effect "+this.lookupService.getRelayEffectNameByType(We.effectType)+" ends.")):We.remainingRelayMeters-=cr}),R.raceVariables.relayEffects=R.raceVariables.relayEffects.filter(We=>We.remainingRelayMeters>0));var Uo,g2=10;this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(g2=20),0!==u&&u!==this.timeToComplete&&u%(g2*this.frameModifier)==0&&((Uo=new K).value=u,Uo.text=this.getUpdateMessageByRelativeDistance(d,u,this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+o:o,pt),r.raceUpdates.push(Uo));var Lu=!1,m2=0,v2=0;if(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(Mu=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime(),m2+=d*Mu,v2=this.globalService.globalVar.eventRaceData.distanceCovered),o+v2>d*(u/this.frameModifier)+m2?(Qi||(Lu=!0),Qi=!0):(Qi&&(Lu=!0),Qi=!1),Lu&&R.type===X.Shark&&"Apex Predator"===R.ability.name&&!R.ability.abilityUsed&&Hl>1){r.addRaceUpdate(u,pt+" bites the other racers as they pass, slowing them down."),R.ability.abilityUsed=!0;var Jz=this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It),U0=this.timeToComplete*(Jz/this.selectedRace.length),b2=1.5*U0;this.timeToComplete+=b2-U0,this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.bonusTime+=b2-U0),this.globalService.increaseAbilityXp(R)}if(R.ability.currentCooldown-=1/this.frameModifier,u+=1,vi<=0){r.addRaceUpdate(u,pt+" finishes their leg of the race."),oe.legComplete=!0,w+=1,this.preRacerResetRelayEffectCheck(R,me,r,u,pt,oe,oe,It,lr,Mn),R.type===X.Octopus&&"Buried Treasure"===R.ability.name&&(re=1+this.lookupService.GetAbilityEffectiveAmount(R,oe.terrain.powerModifier,It)/100),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped?this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.endOfLegRelayEffectCheck(R,new wt,r,u,cn,oe,oe,It,lr,_s,Lo):this.PrepareRacingAnimal(r,u,cn,R,void 0,void 0,void 0,It,void 0,lr),oe.terrain.accelerationModifier=Hn,oe.terrain.maxSpeedModifier=ci,oe.terrain.staminaModifier=ui,oe.terrain.powerModifier=Ii,oe.terrain.focusModifier=Oi,oe.terrain.adaptabilityModifier=Di,_.push(R),y.push(oe);break}u===this.timeToComplete*this.frameModifier&&(oe.terrain.accelerationModifier=Hn,oe.terrain.maxSpeedModifier=ci,oe.terrain.staminaModifier=ui,oe.terrain.powerModifier=Ii,oe.terrain.focusModifier=Oi,oe.terrain.adaptabilityModifier=Di),s=lr,l=Lo,c=_s}if(v+=1,this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix){var _2=.05,H0=this.globalService.globalVar.modifiers.find(We=>"segmentCompleteMoraleBoostModifier"===We.text);null!=H0&&(_2=H0.value),this.lookupService.changeGrandPrixMorale(R.type,_2),this.globalService.globalVar.eventRaceData.previousRaceSegmentData=this.carryOverEventRaceSegmentData(R,ot,mn,ni.permanentAdaptabilityIncreaseMultiplier,ba.permanentMaxSpeedIncreaseMultiplier,br,_a,co.coldBloodedIncreaseMultiplier,Fo,Ni,L,Dt,_r)}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),e.raceLegs.some(oe=>!oe.legComplete)?(r.wasSuccessful=!1,r.totalFramesPassed=u,r.distanceCovered=e.raceUI.distanceCoveredByFrame[u-1],r.addRaceUpdate(u,"You lost the race...")):(e.isCompleted=!0,r.wasSuccessful=!0,r.totalFramesPassed=u,r.distanceCovered=e.raceUI.distanceCoveredByFrame[u-1],r.addRaceUpdate(u,"You won the race!")),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.racingAnimals.forEach(oe=>{this.PrepareRacingAnimal(r,u,"",oe,void 0,void 0,void 0,void 0,!0)}),this.globalService.globalVar.trackedStats.totalMetersRaced+=o,r.wasSuccessful&&this.raceWasSuccessfulUpdate(r,re),r}getStaminaModifier(e,n,r){var a,o=this.globalService.globalVar.modifiers.find(s=>"staminaModifier"===s.text);return a=void 0===o?.2:o.value,null!=e&&null!=e.staminaModifier&&(a*=e.staminaModifier),n.talentTree.talentTreeType===ct.sprint&&(a*=1+.05*n.talentTree.column3Row2Points),n.talentTree.talentTreeType===ct.longDistance&&n.currentStats.stamina/r<=.35&&(a*=1-.05*n.talentTree.column3Row2Points),a}handleStamina(e,n,r,a,o,s){var l=this.getStaminaModifier(o,e,s);e.type===X.Horse&&"Second Wind"===e.ability.name&&e.ability.abilityInUse||(e.currentStats.stamina-=e.type===X.Cheetah&&"Sprint"===e.ability.name&&e.ability.abilityInUse?r*l*2:r*l),e.currentStats.stamina<0&&(e.currentStats.stamina=0,e.raceVariables.ranOutOfStamina=!0)}getBurstDistance(e,n,r){var a=0,o=this.globalService.globalVar.modifiers.find(_=>"breedLevelStatModifier"===_.text);null!=o&&(a=o.value),a=1+a*(e.breedLevel-1);var s=1;e.type===X.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.75),e.type===X.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.5);var l=e.currentStats.powerMs*s*n*r,c=1;if(e.getEquippedItemName()===this.globalService.getEquipmentName(Ke.runningShoes)){var u=1.2,d=this.globalService.globalVar.modifiers.find(_=>"runningShoesEquipmentModifier"===_.text);void 0!==d&&(u=d.value),c=1+e.raceVariables.burstCount*(u-1)}var m=0,v=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,je.supportBurstDistance);return void 0!==v&&void 0!==v.additionalValue&&(m=v.additionalValue),e.currentStats.calculateBurstDistance(a,void 0,l)*c+m}doesRacerMiniBurst(e,n){var r=!1;return null!=n&&n.isSpecialPath&&(e.talentTree.talentTreeType===ct.sprint&&e.talentTree.column1Row4Points>0&&!n.didAnimalStumble&&!n.checkedForMiniBurst&&(r=!0),n.checkedForMiniBurst=!0),r}getBurstChance(e,n,r){var a=1e3/this.selectedRace.length,o=0,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value);var l=e.currentStats.calculateBurstChance(o=1+o*(e.breedLevel-1),n,r)*a,c=0,u=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,je.supportBurstChance);return void 0!==u&&void 0!==u.additionalValue&&(c=u.additionalValue),l+c}doesRacerBurst(e,n,r,a,o,s,l){var c=this.getBurstChance(e,l,s);if(n.checkedForBurst)return!1;if(n.checkedForBurst=!0,"Night Vision"===e.ability.name&&e.type===X.Gecko&&(e.ability.abilityInUse=!1),e.type===X.Hare&&"Prey Instinct"===e.ability.name&&!e.ability.abilityUsed)return!0;if(n.isSpecialPath){var u=this.lookupService.getResourceByName("Course Maps");if(null==u&&(u=0),u>0){var d=1,m=this.globalService.globalVar.modifiers.find(_=>"racerMapsModifier"===_.text);null!=m&&(d=1+u*m.value),c*=d}}return this.utilityService.getRandomNumber(1,100)<=c+1}raceWasSuccessfulUpdate(e,n){var s,r=this.globalService.globalVar.animals.find(D=>D.type===X.Octopus),a="<span class='coloredText waterColor'>"+(null==r?void 0:r.name)+"</span>",o=this.globalService.globalVar.circuitRank,l=0;if(this.selectedRace.isCircuitRace)s=this.globalService.globalVar.circuitRaces.find(D=>D.raceId===this.selectedRace.raceId),this.globalService.globalVar.circuitRaces.filter(D=>D.requiredRank===o).every(D=>D.isCompleted)&&(this.selectedRace.circuitIncreaseReward=this.globalService.IncreaseCircuitRank(),this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Y.Resources)));else if(s=this.globalService.globalVar.localRaces.find(D=>D.raceId===this.selectedRace.raceId&&D.localRaceType===this.selectedRace.localRaceType),this.selectedRace.localRaceType===Wt.Free){var u=this.globalService.globalVar.resources.find(D=>"International Races"===D.name),d=this.globalService.globalVar.resources.find(D=>"National Races"===D.name);if(null!=u&&u.amount>0){var m=5,v=this.globalService.globalVar.modifiers.find(D=>"internationalRacesToMedalModifier"===D.text);null!=v&&(m=v.value),this.globalService.globalVar.nationalRaceCountdown>=m&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Y.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else if(null!=d&&d.amount>0){var _=12,y=this.globalService.globalVar.modifiers.find(D=>"nationalRacesToMedalModifier"===D.text);null!=y&&(_=y.value),this.globalService.globalVar.nationalRaceCountdown>=_&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,Y.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}}if(this.selectedRace.localRaceType!==Wt.Free&&this.selectedRace.localRaceType!==Wt.Track){if(void 0===s)return;this.selectedRace.localRaceType===Wt.Mono&&(this.globalService.globalVar.lastMonoRaceCourseType=this.selectedRace.raceLegs[0].courseType),this.globalService.IncreaseLocalRaceRank(this.selectedRace.localRaceType),s.isCompleted=!0}else this.selectedRace.localRaceType===Wt.Free&&(this.globalService.globalVar.nationalRaceCountdown+=1);this.racingAnimals.forEach(D=>{l=this.selectedRace.isCircuitRace?this.lookupService.getCircuitBreedGaugeIncrease(D):this.lookupService.getLocalBreedGaugeIncrease(D),this.globalService.IncreaseAnimalBreedGauge(D,l)}),this.selectedRace.localRaceType!==Wt.Track?e.beatMoneyMark=this.checkMoneyMark(e):this.handleTrackRaceRewards(e),null!=this.selectedRace.rewards&&this.selectedRace.rewards.forEach(D=>{if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(ce=>ce.name===D.name)){var w=this.globalService.globalVar.resources.find(ce=>ce.name===D.name);if(null!=w)if(this.selectedRace.localRaceType!==Wt.Track)if("Coins"===w.name){if(e.beatMoneyMark){e.addRaceUpdate(e.totalFramesPassed,"You beat the money mark!");var T=1.25,L=this.globalService.globalVar.modifiers.find(ce=>"moneyMarkRewardModifier"===ce.text);null!=L&&(T=L.value),D.amount=Math.round(D.amount*T)}var G=this.lookupService.getRenown();D.amount+=Math.round(D.amount*this.lookupService.getRenownCoinModifier(G,!1)),n>1&&e.addRaceUpdate(e.totalFramesPassed,a+" finds buried treasure at the bottom of the ocean!"),D.amount=Math.round(D.amount*n),w.amount+=D.amount}else"Facility Level"===w.name?(w.amount+=D.amount,this.lookupService.recalculateAllAnimalStats()):"Renown"===w.name?w.amount=parseFloat((w.amount+D.amount).toFixed(3)):w.amount+=D.amount;else w.amount+=D.amount}else if("Bonus Breed XP Gain From Training"===D.name&&D.itemType===Y.Other){var ee=this.selectedRace.raceLegs[0].courseType;null!=(re=this.racingAnimals.find(ce=>ce.raceCourseType===ee))&&(re.miscStats.bonusBreedXpGainFromTraining+=D.amount)}else if("Bonus Breed XP Gain From Free Races"===D.name&&D.itemType===Y.Other)ee=this.selectedRace.raceLegs[0].courseType,null!=(re=this.racingAnimals.find(we=>we.raceCourseType===ee))&&(re.miscStats.bonusBreedXpGainFromLocalRaces+=D.amount);else if("Bonus Breed XP Gain From Circuit Races"===D.name&&D.itemType===Y.Other)ee=this.selectedRace.raceLegs[0].courseType,null!=(re=this.racingAnimals.find(we=>we.raceCourseType===ee))&&(re.miscStats.bonusBreedXpGainFromCircuitRaces+=D.amount);else if("Training Time Reduction"===D.name&&D.itemType===Y.Other)ee=this.selectedRace.raceLegs[0].courseType,null!=(re=this.racingAnimals.find(we=>we.raceCourseType===ee))&&(re.miscStats.trainingTimeReduction+=D.amount);else if("Diminishing Returns per Facility Level"===D.name&&D.itemType===Y.Other)ee=this.selectedRace.raceLegs[0].courseType,null!=(re=this.racingAnimals.find(we=>we.raceCourseType===ee))&&(re.miscStats.diminishingReturnsBonus+=D.amount);else if("Orb Pendant"===D.name&&D.itemType===Y.Other)ee=this.selectedRace.raceLegs[0].courseType,null!=(re=this.racingAnimals.find(we=>we.raceCourseType===ee))&&(re.canEquipOrb=!0);else if("Bonus Talents"===D.name&&D.itemType===Y.Other){var re;ee=this.selectedRace.raceLegs[0].courseType,null!=(re=this.racingAnimals.find(we=>we.raceCourseType===ee))&&(re.miscStats.bonusTalents+=D.amount)}else this.globalService.globalVar.resources.push(new pe(D.name,D.amount,D.itemType))})}checkMoneyMark(e){var n=!1;if(0===this.lookupService.getResourceByName("Money Mark"))return n;var a=this.globalService.globalVar.modifiers.find(s=>"moneyMarkPaceModifier"===s.text);return null==a||e.totalFramesPassed<=this.timeToComplete*this.frameModifier*a.value&&(n=!0),n}handleTrackRaceRewards(e){if(1===this.selectedRace.raceLegs.length){var n=this.selectedRace.raceLegs[0].courseType,r=this.racingAnimals.find(d=>d.raceCourseType===n);if(void 0!==r){var a=null;if(this.selectedRace.trackRaceType===$n.novice&&(a=r.allTrainingTracks.noviceTrack),this.selectedRace.trackRaceType===$n.intermediate&&(a=r.allTrainingTracks.intermediateTrack),this.selectedRace.trackRaceType===$n.master&&(a=r.allTrainingTracks.masterTrack),null!==a){var o=this.timeToComplete*this.frameModifier,s=.25,l=this.globalService.globalVar.modifiers.find(d=>"trainingTrackPaceModifier"===d.text);void 0!==l&&(s=l.value);for(var c=0;c<a.totalRewards;c++)c<a.rewardsObtained||e.totalFramesPassed<=o/(1+s*c)&&(a.rewardsObtained=c+1,a.rewardsObtained===a.totalRewards&&(this.selectedRace.trackRaceType===$n.novice&&(r.allTrainingTracks.intermediateTrackAvailable=!0),this.selectedRace.trackRaceType===$n.intermediate&&(r.allTrainingTracks.masterTrackAvailable=!0)),null==this.selectedRace.rewards&&(this.selectedRace.rewards=[]),this.selectedRace.rewards.push(a.rewards[c]));null!=this.selectedRace.rewards&&(this.selectedRace.rewards=this.utilityService.condenseList(this.selectedRace.rewards))}}}}getUpdateMessageByRelativeDistance(e,n,r,a){var o=a,s=e*(n/this.frameModifier);return this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(s+=e*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),r<.5*s?o="Is "+a+" <strong>even moving?!</strong>":r<.75*s?o=a+" is <strong>falling out of the race!</strong>":r<.9*s?o=a+" is <strong>just a step behind everyone else!</strong>":r>=.9*s&&r<=1.1*s?o=a+" is <strong>right on pace!</strong>":r>=1.5*s?o=a+" <strong>CANNOT be caught!!</strong>":r>=1.25*s?o=a+" is <strong>WAY ahead of the pack!</strong>":r>=1.1*s&&(o=a+" is <strong>barely leading the pack!</strong>"),o}PrepareRacingAnimal(e,n,r,a,o,s,l,c,u,d,m,v){if(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!0),a.ability.currentCooldown=a.ability.cooldown,a.ability.remainingLength=0,a.ability.totalUseCount=0,a.getEquippedItemName()===this.globalService.getEquipmentName(Ke.pendant)){var _=.9,y=this.globalService.globalVar.modifiers.find(T=>"pendantEquipmentModifier"===T.text);void 0!==y&&(_=y.value),a.ability.currentCooldown*=_}if(null!=a.raceVariables&&null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0){var D=this.lookupService.getRelayEffectFromListByType(a.raceVariables.relayEffects,je.supportAbilityCooldown);void 0!==D&&void 0!==D.additionalValue&&(a.ability.currentCooldown*=D.additionalValue)}a.ability.abilityUsed=!1,a.ability.abilityInUse=!1,null!=a.raceVariables&&(a.raceVariables.ranOutOfStamina=!1,a.raceVariables.burstCount=0,a.raceVariables.metersSinceLostFocus=0,a.raceVariables.hasLostFocusDuringRace=!1,a.raceVariables.firstAbilityUseEffectApplied=!1,a.raceVariables.velocityExceedsMaxSpeedDuringBurst=!1,a.raceVariables.velocityReachesMaxSpeedCount=0),this.globalService.calculateAnimalRacingStats(a),!0!==u&&(null!=o&&o.length>0&&this.endOfLegRelayEffectCheck(o[o.length-1],a,e,n,r,s,l,c,d,m,v),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects.forEach(T=>{a.raceVariables.relayEffects.push(T.makeCopy())}),this.globalService.globalVar.eventRaceData.queuedRelayEffects.length>0&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects=this.globalService.globalVar.eventRaceData.queuedRelayEffects.filter(T=>T.affectsAllRacers))),null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0&&a.raceVariables.relayEffects.forEach(T=>{T.isMultiplicative?a.currentStats.multiplyCurrentRacingStats(T.relayAffectedStatRatios):a.currentStats.addCurrentRacingStats(T.relayAffectedStatRatios)}))}preRacerResetRelayEffectCheck(e,n,r,a,o,s,l,c,u,d){var m=4,v=this.globalService.globalVar.modifiers.find(w=>"relayAbilityXpGainModifier"===w.text);if(void 0!==v&&(m=v.value),null===n&&(n=new wt),null!=l){if(e.type===X.Caribou&&"Herd Mentality"===e.ability.name&&!e.raceVariables.ranOutOfStamina){var _=e.currentStats.stamina*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100),y=0;this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCap||(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount+=1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.AddRelayEffect(n,e,y,new Ee(0,0,0,0,0,0),!1,je.herdMentality,!1,_),this.globalService.increaseAbilityXp(e,m))}if(!(e.type!==X.Caribou||"Special Delivery"!==e.ability.name||e.raceVariables.ranOutOfStamina||(void 0===d&&(d=1),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCap))){this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount+=1),y=this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;var S=e.currentStats.stamina/d;S>1&&(S=1);var D=S*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100);this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(D*=.2),this.AddRelayEffect(e,e,y,new Ee(0,0,0,0,0,0),!1,je.specialDelivery,!0,D),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,m)}}}endOfLegRelayEffectCheck(e,n,r,a,o,s,l,c,u,d,m,v=1){var _=4,y=this.globalService.globalVar.modifiers.find(G=>"relayAbilityXpGainModifier"===G.text);if(void 0!==y&&(_=y.value),"Inspiration"===e.ability.name&&e.type===X.Horse&&null!=l){var S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c);this.AddRelayEffect(n,e,S*v,new Ee(.25*e.currentStats.maxSpeedMs,0,0,0,0,0),!1,je.inspiration,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,_),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.inspirationUseCount+=1)}if("Flowing Current"===e.ability.name&&e.type===X.Dolphin&&null!=l&&(S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,S*v,new Ee(0,.25*e.currentStats.accelerationMs,0,0,0,0),!1,je.flowingCurrent,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,_),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.flowingCurrentUseCount+=1)),"Navigator"===e.ability.name&&e.type===X.Dolphin&&null!=l&&(S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,S*v,new Ee(0,0,0,0,0,.25*e.currentStats.adaptabilityMs),!1,je.navigator,!1),r.addRaceUpdate(a,o+" uses "+(null==e?void 0:e.ability.name)+"."),this.globalService.increaseAbilityXp(e,_),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.navigatorUseCount+=1)),e.type===X.Gecko&&"Camouflage"===e.ability.name&&null!=l){var w=u;S=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(n,e,S*v,new Ee(0,0,0,0,0,0),!1,je.camouflage,!1,w),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.camouflageUseCount+=1)}if(void 0!==s){var T=new ei;void 0!==l&&(T=l.terrain),void 0===c&&(c=1),void 0===m&&(m=e.currentStats.adaptabilityMs),void 0===d&&(d=e.currentStats.focusMs),this.talentRelayCheck(e,n,s.distance*v,T,c,d,m),this.batonEquipmentCheck(e,n,s.distance*v)}}talentRelayCheck(e,n,r,a,o,s,l,c=1){if(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.talentTree.talentTreeType===ct.support){if(e.talentTree.column1Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,1,1,u=1+.01*e.talentTree.column1Row1Points),!0,je.supportAdaptabilityRelay,!1),e.talentTree.column1Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(u=1+.01*e.talentTree.column1Row3Points,1,1,1,1,1),!0,je.supportMaxSpeedRelay,!1),e.talentTree.column2Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,u=1+.01*e.talentTree.column2Row1Points,1,1,1,1),!0,je.supportAccelerationRelay,!1),e.talentTree.column2Row2Points>0){var u=this.getBurstDistance(e,a.powerModifier,o)*(.05*e.talentTree.column2Row2Points);this.AddRelayEffect(n,e,r*c,new Ee(0,0,0,0,0,0),!1,je.supportBurstDistance,!1,u)}if(e.talentTree.column2Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,u=1+.01*e.talentTree.column2Row3Points,1,1,1),!0,je.supportStaminaRelay,!1),e.talentTree.column2Row4Points>0){u=this.getBurstChance(e,s,l)*(.03*e.talentTree.column2Row4Points);this.AddRelayEffect(n,e,r*c,new Ee(0,0,0,0,0,0),!1,je.supportBurstChance,!1,u)}e.talentTree.column3Row1Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,u=1+.01*e.talentTree.column3Row1Points,1,1),!0,je.supportPowerRelay,!1),e.talentTree.column3Row2Points>0&&(u=1-.02*e.talentTree.column3Row2Points,this.AddRelayEffect(n,e,r*c,new Ee(0,0,0,0,0,0),!1,je.supportAbilityCooldown,!1,u)),e.talentTree.column3Row3Points>0&&this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,1,u=1+.01*e.talentTree.column3Row3Points,1),!0,je.supportFocusRelay,!1),e.talentTree.column3Row4Points>0&&(u=1+.02*e.talentTree.column3Row4Points,this.AddRelayEffect(n,e,r*c,new Ee(1,1,1,1,1,1),!0,je.supportAbilityEfficiency,!1,u))}}batonEquipmentCheck(e,n,r,a=1){if(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.getEquippedItemName()===this.globalService.getEquipmentName(Ke.redBaton)){var o=1.1,s=this.globalService.globalVar.modifiers.find(w=>"redBatonEquipmentModifier"===w.text);void 0!==s&&(o=s.value),this.AddRelayEffect(n,e,r*a,new Ee(o,1,1,1,1,1),!0,je.redBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Ke.blueBaton)){var l=1.1,c=this.globalService.globalVar.modifiers.find(w=>"blueBatonEquipmentModifier"===w.text);void 0!==c&&(l=c.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,1,1,l,1),!0,je.blueBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Ke.violetBaton)){var u=1.1,d=this.globalService.globalVar.modifiers.find(w=>"violetBatonEquipmentModifier"===w.text);void 0!==d&&(u=d.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,1,u,1,1),!0,je.violetBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Ke.greenBaton)){var m=1.1,v=this.globalService.globalVar.modifiers.find(w=>"greenBatonEquipmentModifier"===w.text);void 0!==v&&(m=v.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,1,1,1,m),!0,je.greenBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Ke.orangeBaton)){var _=1.1,y=this.globalService.globalVar.modifiers.find(w=>"orangeBatonEquipmentModifier"===w.text);void 0!==y&&(_=y.value),this.AddRelayEffect(n,e,r*a,new Ee(1,_,1,1,1,1),!0,je.orangeBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(Ke.yellowBaton)){var S=1.1,D=this.globalService.globalVar.modifiers.find(w=>"yellowBatonEquipmentModifier"===w.text);void 0!==D&&(S=D.value),this.AddRelayEffect(n,e,r*a,new Ee(1,1,S,1,1,1),!0,je.yellowBaton,!1)}}prepareRacingLeg(e,n){e.pathData.forEach(r=>{r.currentStumbleOpportunity=0,r.checkedForBurst=!1,r.checkedForNineTails=!1,r.driftAmount=0,r.didAnimalStumble=!1,r.checkedForDrift=!1}),this.checkForBlinders(e,n)}checkForBlinders(e,n){if(n.getEquippedItemName()===this.globalService.getEquipmentName(Ke.blinders)){var r=.5;e.terrain.maxSpeedModifier<1&&(e.terrain.maxSpeedModifier=1-(1-e.terrain.maxSpeedModifier)*r),e.terrain.accelerationModifier<1&&(e.terrain.accelerationModifier=1-(1-e.terrain.accelerationModifier)*r),e.terrain.staminaModifier<1&&(e.terrain.staminaModifier=1-(1-e.terrain.staminaModifier)*r),e.terrain.powerModifier<1&&(e.terrain.powerModifier=1-(1-e.terrain.powerModifier)*r),e.terrain.focusModifier<1&&(e.terrain.focusModifier=1-(1-e.terrain.focusModifier)*r),e.terrain.adaptabilityModifier<1&&(e.terrain.adaptabilityModifier=1-(1-e.terrain.adaptabilityModifier)*r)}}getPrelayEffects(e,n,r,a,o,s,l,c,u){null!==n&&void 0!==c&&n.talentTree.talentTreeType===ct.support&&n.talentTree.column1Row4Points>0&&this.endOfLegRelayEffectCheck(n,e,o,s,l,c,u,a,void 0,void 0,void 0,.03*n.talentTree.column1Row4Points)}AddRelayEffect(e,n,r,a,o,s,l,c,u=!1){var d=new tf;if(d.remainingRelayMeters=r,d.relayAffectedStatRatios=a,d.isMultiplicative=o,d.effectType=s,d.additionalValue=c,d.affectsAllRacers=l,n.talentTree.talentTreeType===ct.support&&n.talentTree.column1Row2Points>0){var m=1+.02*n.talentTree.column1Row2Points;d.isMultiplicative?(d.relayAffectedStatRatios.topSpeed>1&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*m),d.relayAffectedStatRatios.acceleration>1&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*m),d.relayAffectedStatRatios.endurance>1&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*m),d.relayAffectedStatRatios.power>1&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*m),d.relayAffectedStatRatios.focus>1&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*m),d.relayAffectedStatRatios.adaptability>1&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*m),void 0!==d.additionalValue&&d.additionalValue>1&&(d.additionalValue*=m)):(d.relayAffectedStatRatios.topSpeed>0&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*m),d.relayAffectedStatRatios.acceleration>0&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*m),d.relayAffectedStatRatios.endurance>0&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*m),d.relayAffectedStatRatios.power>0&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*m),d.relayAffectedStatRatios.focus>0&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*m),d.relayAffectedStatRatios.adaptability>0&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*m),void 0!==d.additionalValue&&d.additionalValue>0&&(d.additionalValue*=m))}if(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix)if(this.globalService.globalVar.eventRaceData.queuedRelayEffects.some(y=>y.effectType===s))if(this.lookupService.relayEffectTypeStacksEffectiveness(s))null!=(v=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(y=>y.effectType===s))&&(v.relayAffectedStatRatios.addCurrentRacingStats(a),void 0!==v.additionalValue&&void 0!==d.additionalValue&&(v.additionalValue+=d.additionalValue));else{var v;null!=(v=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(S=>S.effectType===s))&&(v.remainingRelayMeters+=r)}else this.globalService.globalVar.eventRaceData.queuedRelayEffects.push(d);else if(l){var _=this.selectedRace.raceLegs.findIndex(y=>y.courseType===e.raceCourseType);this.selectedRace.raceLegs.length>_&&this.selectedRace.raceLegs.slice(_+1).forEach(y=>{var S=this.racingAnimals.find(D=>D.raceCourseType===y.courseType);null!=S&&null!=S.raceVariables&&null!=S.raceVariables.relayEffects&&S.raceVariables.relayEffects.push(d)})}else null!=e&&null!=e.raceVariables&&null!=e.raceVariables.relayEffects&&e.raceVariables.relayEffects.push(d)}didAnimalStumble(e,n,r,a,o,s,l,c,u,d){if(e.raceVariables.stumbled||0===n.frequencyOfStumble||e.type===X.Gecko&&"Sticky"===e.ability.name&&e.ability.abilityInUse||e.type===X.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||e.type===X.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;var m=n.length/n.stumbleOpportunities;if(n.currentStumbleOpportunity===n.stumbleOpportunities&&n.routeDesign!==qe.Regular&&e.type===X.Goat&&"Sure-footed"===e.ability.name&&(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCap||(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount+=1),o.permanentAdaptabilityIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,a.powerModifier,l)/100,this.globalService.increaseAbilityXp(e),n.currentStumbleOpportunity+=1)),n.currentStumbleOpportunity*m<r){n.currentStumbleOpportunity+=1;var _=250;if(this.utilityService.getRandomNumber(1,100)<=n.frequencyOfStumble/(_+=s*a.adaptabilityModifier)*n.length){if(e.getEquippedItemName()===this.globalService.getEquipmentName(Ke.headband)){var D=3,w=this.globalService.globalVar.modifiers.find(T=>"headbandEquipmentModifier"===T.text);if(void 0!==w&&(D=w.value),e.raceVariables.headbandStumblePreventionCount<D)return e.raceVariables.headbandStumblePreventionCount+=1,d.addRaceUpdate(c,u+"'s headband prevents them from stumbling."),!1}return n.didAnimalStumble=!0,!0}}return!1}didAnimalLoseFocus(e,n,r,a,o,s,l,c,u,d){if(e.raceVariables.lostFocus||e.type===X.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(this.currentLostFocusOpportunity*(r/n)<a){this.currentLostFocusOpportunity+=1;var _=this.globalService.globalVar.modifiers.find(T=>"focusModifier"===T.text),y=d*o.focusModifier*(void 0===_?.75:_.value);if(e.raceVariables.metersSinceLostFocus<y)return!1;var D=(e.raceVariables.metersSinceLostFocus-y)/e.currentStats.focusMs*100;return this.utilityService.getRandomNumber(1,100)<=D&&(u.didAnimalLoseFocus=!0),!0}return!1}increasePersistentAbilityXp(e){(e.type===X.Cheetah&&"Giving Chase"===e.ability.name||e.type===X.Hare&&"Prey Instinct"===e.ability.name||e.type===X.Hare&&"Nap"===e.ability.name||e.type===X.Goat&&"In The Rhythm"===e.ability.name||e.type===X.Shark&&"Feeding Frenzy"===e.ability.name||e.type===X.Shark&&"Blood In The Water"===e.ability.name||e.type===X.Octopus&&"Buried Treasure"===e.ability.name||e.type===X.Penguin&&"Wild Toboggan"===e.ability.name||e.type===X.Fox&&"Fleeting Speed"===e.ability.name)&&this.globalService.increaseAbilityXp(e,3)}abilityRedundancyCheck(e,n,r,a,o,s){return!(e.ability.oneTimeEffect&&e.ability.abilityUsed||"Second Wind"===e.ability.name&&e.type===X.Horse&&e.raceVariables.recoveringStamina||"Pacemaker"===e.ability.name&&e.type===X.Horse&&n===e.currentStats.maxSpeedMs)&&(!("Leap"===e.ability.name&&e.type===X.Monkey&&this.lookupService.GetAbilityEffectiveAmount(e,a.terrain.powerModifier,s)<o)&&!("Sticky"===e.ability.name&&e.type===X.Gecko&&0===r.frequencyOfStumble))}useAbility(e,n,r,a,o,s,l){if(e.ability.abilityUsed=!0,e.type===X.Horse&&("Second Wind"===e.ability.name||"Pacemaker"===e.ability.name)&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Cheetah&&"Sprint"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Hare&&"Awareness"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Monkey){if("Landslide"===e.ability.name){var c=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),u=n.length/this.timeToComplete;this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=c/(u=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=c/u,this.globalService.increaseAbilityXp(e)}"Leap"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e))}if(e.type===X.Gecko&&"Sticky"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Dolphin&&"Echolocation"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Octopus&&"Propulsion"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e)),e.type===X.Penguin&&"Careful Toboggan"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Caribou&&"Great Migration"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===X.Salamander){if("Cold Blooded"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a);var d=s/r.distance;d>.5&&(d=.5-(d-.5));var m=.6*d;e.currentStats.stamina+=o*m,e.currentStats.stamina>o&&(e.currentStats.stamina=o),l.coldBloodedIncreaseMultiplier=1+m}"Burrow"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),"Heat Up"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e))}if(e.type===X.Fox&&"Trickster"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e);var v=this.utilityService.getRandomInteger(1,6);1===v&&(e.ability.tricksterStatLoss="Acceleration"),2===v&&(e.ability.tricksterStatLoss="Max Speed"),3===v&&(e.ability.tricksterStatLoss="Adaptability"),4===v&&(e.ability.tricksterStatLoss="Focus"),5===v&&(e.ability.tricksterStatLoss="Stamina",e.currentStats.stamina-=.25*o,e.currentStats.stamina<0&&(e.currentStats.stamina=0)),6===v&&(e.ability.tricksterStatLoss="Power");var _=this.utilityService.getRandomInteger(1,6);_===v&&(_+=1)>6&&(_=1),1===_&&(e.ability.tricksterStatGain="Acceleration"),2===_&&(e.ability.tricksterStatGain="Max Speed"),3===_&&(e.ability.tricksterStatGain="Adaptability"),4===_&&(e.ability.tricksterStatGain="Focus"),5===_&&(e.ability.tricksterStatGain="Stamina",e.currentStats.stamina+=.5*o,e.currentStats.stamina>o&&(e.currentStats.stamina=o)),6===_&&(e.ability.tricksterStatGain="Power"),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a)}}checkForNineTailsBuff(e,n,r,a,o,s,l,c){if(!e.checkedForNineTails){e.checkedForNineTails=!0;var u=this.utilityService.getRandomInteger(1,4),d=new K;d.value=l,1===u?(n.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Acceleration)"),s.raceUpdates.push(d)):2===u?(n.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Max Speed)"),s.raceUpdates.push(d)):3===u?(n.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Adaptability)"),s.raceUpdates.push(d)):4===u&&(n.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Focus)"),s.raceUpdates.push(d)),this.globalService.increaseAbilityXp(r)}}getNineTailsBuffCount(e,n){return n.filter(r=>r[0]===e).length}getModifiedAdaptability(e,n,r,a,o,s,l,c,u,d,m,v){var _=e.currentStats.adaptabilityMs*r;return e.type===X.Dolphin&&"Echolocation"===e.ability.name&&e.ability.abilityInUse&&(_*=1.75),e.type===X.Goat&&"Sure-footed"===e.ability.name&&(_*=n.permanentAdaptabilityIncreaseMultiplier),e.type===X.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(_*=1.4),e.type===X.Penguin&&"Careful Toboggan"===e.ability.name&&e.ability.abilityInUse&&(_*=1.6),e.type===X.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(_*=.75),e.type===X.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(_*=1.5),e.type===X.Fox&&"Nine Tails"===e.ability.name&&(_*=1+.15*this.getNineTailsBuffCount("Adaptability",a)),null!==l&&void 0!==c&&"Navigator"===l.ability.name&&l.type===X.Dolphin&&o.distance-s<=this.lookupService.GetAbilityEffectiveAmount(l,c.terrain.powerModifier,r)&&(_+=.25*l.currentStats.adaptabilityMs,l.ability.abilityInUse||u.addRaceUpdate(d,m+" is shown the way by "+v+"'s "+(null==l?void 0:l.ability.name)+" ability."),l.ability.abilityInUse=!0),e.getEquippedItemName()===this.globalService.getEquipmentName(Ke.athleticTape)&&e.raceVariables.isBursting&&(_*=1.5),e.talentTree.talentTreeType===ct.sprint&&!e.raceVariables.hasLostFocusDuringRace&&(_*=1+5*e.talentTree.column1Row2Points/100),_}getModifiedFocus(e,n,r,a){var o=e.currentStats.focusMs*n;return e.type===X.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(o*=1.4),e.type===X.Hare&&"Nap"===e.ability.name&&(o*=2),e.type===X.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(o*=.75),e.type===X.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(o*=1.5),e.type===X.Fox&&"Nine Tails"===e.ability.name&&(o*=1+.15*this.getNineTailsBuffCount("Focus",r)),e.type===X.Salamander&&"Cold Blooded"===e.ability.name&&e.ability.abilityInUse&&(o*=a.coldBloodedIncreaseMultiplier),e.getEquippedItemName()===this.globalService.getEquipmentName(Ke.athleticTape)&&e.raceVariables.isBursting&&(o*=1.5),e.talentTree.talentTreeType===ct.sprint&&(o*=1-.005*e.talentTree.column2Row4Points*e.raceVariables.velocityReachesMaxSpeedCount),o}handleTundraDrift(e,n,r,a,o,s,l,c,u,d,m,v,_){var y=!1;if(!n.checkedForDrift){n.checkedForDrift=!0;var S=80,D=-80;if((n.routeDesign===qe.Cavern||r.routeDesign===qe.Cavern)&&(S=60,D=-60),e.raceVariables.icyCurrentYAmount>=S||e.raceVariables.icyCurrentYAmount<=D||a)return(e.raceVariables.icyCurrentYAmount>=S||e.raceVariables.icyCurrentYAmount<=D)&&(y=!0),n.driftAmount=-e.raceVariables.icyCurrentYAmount,e.raceVariables.icyCurrentYAmount=0,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,y;var w=this.utilityService.getRandomNumber(1,100),T=1e3,G=n.frequencyOfDrift/(T+=o*s.adaptabilityModifier)*n.length;if(w<G){n.didAnimalStumble=!0,(G-=w)<=0&&(G=0);var ee=this.utilityService.getRandomInteger(1,2);e.raceVariables.icyCurrentDirectionUp=1===ee;var re=100,ce=20,me=this.globalService.globalVar.modifiers.find(Fe=>"maxDriftAmountModifier"===Fe.text);void 0!==me&&(ce=me.value),"Wild Toboggan"===e.ability.name&&e.type===X.Penguin&&(ce*=2,re*=2,e.ability.abilityInUse=!0),"Quick Toboggan"===e.ability.name&&e.type===X.Penguin&&(e.ability.abilityInUse=!1);var we=0;(we=G>re?ce:G/re*ce)>ce&&(we=ce),e.raceVariables.icyCurrentDirectionUp?e.raceVariables.icyCurrentYAmount-=we:e.raceVariables.icyCurrentYAmount+=we,e.raceVariables.icyCurrentYAmount>=S&&(e.raceVariables.icyCurrentYAmount=S),e.raceVariables.icyCurrentYAmount<=D&&(e.raceVariables.icyCurrentYAmount=D),m.addRaceUpdate(_,v+" drifts to the side, losing "+we.toFixed(2)+"% max speed."),n.driftAmount=e.raceVariables.icyCurrentDirectionUp?-we:we,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount}else n.driftAmount=0,n.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,"Quick Toboggan"===e.ability.name&&e.type===X.Penguin&&(m.addRaceUpdate(_,v+" slides through without drifting, gaining speed."),this.globalService.increaseAbilityXp(e),d.permanentMaxSpeedIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,s.powerModifier,u)/100,e.ability.abilityInUse=!0);return y}}handleLavaFall(e,n,r,a,o,s,l,c){for(var u=!1,d=n/this.frameModifier,m=o/r,v=[.4,.45,.5,.55,.6],_=[],y=0;y<v.length;y++){var S=m*v[y],D=d/S;D>1&&(D=1),_.push(Math.round(1e5*D)/1e5);var w=a>v[y]*o,T=w!=c[y];c[y]=w,d>=S&&T&&(e.type===X.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||(s.addRaceUpdate(l,"Lava spills out onto the course, forcing you to evacuate."),u=!0))}return this.selectedRace.raceUI.lavaFallPercentByFrame.push(_),u}handleRacePositionByFrame(e,n,r,a){var o=this.lookupService.getTotalRacersByRace(e),s=o,l=.25,c=this.globalService.globalVar.modifiers.find(T=>"trainingTrackPaceModifier"===T.text);if(void 0!==c&&(l=c.value),e.localRaceType===Wt.Track)for(var u=0;u<o-1;u++)a>e.length/(this.timeToComplete/(1+l*u))*(r/this.frameModifier)&&(s=o-(u+1));else{var v=n*(r/this.frameModifier),_=0;if(this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(v+=_=n*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),2===o)a>v&&(s=1);else if(3===o){a>v&&(s=2);var S=.75,D=this.globalService.globalVar.modifiers.find(T=>"moneyMarkPaceModifier"===T.text);null!=D&&(S=D.value),a>e.length/(this.timeToComplete*S)*(r/this.frameModifier)+_&&(s=1)}}e.raceUI.racePositionByFrame.push(s)}carryOverEventRaceSegmentData(e,n,r,a,o,s,l,c,u,d,m,v,_){var y=new Kh;return y.velocity=n,y.stamina=e.currentStats.stamina,y.permanentMaxSpeedIncreaseMultiplier=r,y.permanentAdaptabilityIncreaseMultiplier=a,y.permanentMaxSpeedIncreaseObjMultiplier=o,y.feedingFrenzyIncreaseMultiplier=s,y.greatMigrationAccelerationIncreaseAdditive=l,y.coldBloodedIncreaseMultiplier=c,y.fleetingSpeedIncreaseMultiplier=u,y.racingAnimalType=e.type,y.deepBreathingStaminaGain=m,y.longDistanceTalentIncreaseAccelerationWithLowVelocity=v,y.maxSpeedFloor=_,d.length>0&&d.forEach(S=>{y.nineTailsBuffs.push(S)}),e.raceVariables.relayEffects.length>0&&e.raceVariables.relayEffects.forEach(S=>{y.relayEffects.push(S)}),this.globalService.globalVar.eventRaceData.animalData.forEach(S=>{S.associatedAnimalType===e.type&&(y.statLossFromExhaustion=S.exhaustionStatReduction)}),y.raceVariables=e.raceVariables.makeCopy(),y}setStaminaLossForEventAnimal(e,n){this.globalService.globalVar.eventRaceData.animalData.forEach(r=>{r.associatedAnimalType===n&&(r.exhaustionStatReduction=e)})}}return t.\u0275fac=function(e){return new(e||t)(Ve(St),Ve(hn),Ve(Li),Ve(zv))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let Qv=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n,this.gameVersions=[1.07,1.06,1.05,1.04,1.03,1.02,1.01,1]}getListAscended(){var e=[];return this.gameVersions.forEach(n=>{e.unshift(n)}),e}getLatestChanges(){return this.getVersionChanges(this.gameVersions[0])}getAllChanges(){var e=[];return this.gameVersions.forEach(n=>{e.push(this.getVersionChanges(n))}),e}getVersionChanges(e){var n="";return 1===e&&(n="Initial Launch!"),1.01===e&&(n="Improved UI by adding better notifications and refactoring some clickable text.\n\nBreeding Grounds specialization now grants a 10% bonus to Breeding XP from Training, up from 5%.\n\nRefactored Breed Progression:\n<ul><li>Breed Levels now grant a 5% bonus to racing stats as opposed to 2%. Breed Levels now require twice as much XP.</li><li>Animals have had their breed levels reduced by half to balance this change. Despite this, you should notice a small increase in stats.</li></ul>"),1.02===e&&(n="Event Races now active!\n<ul><li>Select an event deck (now relay team) and run the marathon-style Grand Prix.</li><li>Run a single race over the course of multiple days to unlock new rewards.</li><li>Mix and match powerful Relay abilities with strong long distance racers and see how far you can go!</li></ul>\nMore UI improvements. (better contrast in colors, differentiation of text through various means, etc)\n\nBug fixes."),1.03===e&&(n="Talents are now active!\n<ul><li>Complete Rainbow Races to start earning Talent Points for your animals.</li><li>Each animal can select a unique talent tree and start racing in its own unique way.</li></ul>\nMore UI improvements. (specifically around items/equipment)\n\nBug fixes."),1.04===e&&(n="Ability rebalancing (view Discord Change Log for full info).\n\nChanges to Event Races<ul><li>Leg length adjusts based on your game progress so that the race always feels smooth.</li><li>Certain abilities have different effects during events, viewable when changing abilities.</li><li>Abilities that can trigger multiple times or have a cap are now displayed on the Event Race Info page.</li></ul>\nBug fixes (view Discord Change Log for full info)."),1.05===e&&(n="Changed all references of 'Decks' to 'Relay Teams' for ease of understanding and better theming.\n\nBug fixes and UI improvements (view Discord Change Log for full info)."),1.06===e&&(n="Barns can now reset their specialization. By clicking or tapping your Barn Upgrade level, you'll see an overview of your barn\u2019s benefits and the option to reset your specialization at the cost of losing 20% of your Barn Upgrade level.\n\nCost for Mangoes now scale. 1 Mango from the shop costs an extra 50 per purchase and 2 Mangoes from the event shop costs an extra 1 token per purchase.\n\nThe impact that Renown has on coin gain from race is now logarithmic. After reaching 50 renown, the coin gain will start to slightly fall off. \n\nAttractions now give slightly more Coins per specialization level.\n\nAdded setting to automatically start the event race when the time period begins. This will also catch up on any time you were away between the start of the race and when you first return to the game.\n\nGrand Prix now requires breed level 25 instead of 50.\n\nIncubator now takes 2 minutes instead of 5 minutes.\n\nUI Improvements and Bug Fixes (view Discord Change Log for full info)."),1.07===e&&(n="Sectioned out FAQs, added calculators to make planning easier.\n\nVarious minor bug fixes and UI improvements."),n}getDateForVersion(e){var n=new Date;return 1===e&&(n=new Date("2022-07-08 12:00:00")),1.01===e&&(n=new Date("2022-07-10 12:00:00")),1.02===e&&(n=new Date("2022-07-18 12:00:00")),1.03===e&&(n=new Date("2022-07-24 12:00:00")),1.04===e&&(n=new Date("2022-07-27 12:00:00")),1.05===e&&(n=new Date("2022-07-29 12:00:00")),1.06===e&&(n=new Date("2022-08-04 12:00:00")),1.07===e&&(n=new Date("2022-08-06 12:00:00")),n.toDateString().replace(/^\S+\s/,"")}updatePlayerVersion(){this.getListAscended().forEach(e=>{if(this.globalService.globalVar.currentVersion<e){if(1.01===e){this.globalService.globalVar.notifications=new rf;var n=this.globalService.globalVar.modifiers.find(T=>"breedLevelStatModifier"===T.text);void 0!==n&&(n.value=.05);var r=this.globalService.globalVar.modifiers.find(T=>"breedGaugeMaxIncreaseModifier"===T.text);void 0!==r&&(r.value=10);var a=this.globalService.globalVar.modifiers.find(T=>"breedingGroundsSpecializationModifier"===T.text);void 0!==a&&(a.value=.1),this.globalService.globalVar.animals.forEach(T=>{T.breedLevel=Math.round(T.breedLevel/2),T.breedGaugeXp=2*T.breedGaugeXp});var o=this.globalService.globalVar.animalDecks.find(T=>T.isPrimaryDeck);null!=o&&(o.isEventDeck=!0)}else if(1.02===e){this.globalService.globalVar.eventRaceData=new Bi,this.globalService.globalVar.modifiers.push(new K(.1,"exhaustionStatLossMinimumModifier")),this.globalService.globalVar.modifiers.push(new K(5e6,"metersPerCoinsGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new K(2e7,"metersPerRenownGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new K(100,"grandPrixCoinRewardModifier")),this.globalService.globalVar.modifiers.push(new K(5,"grandPrixRenownRewardModifier")),this.globalService.globalVar.modifiers.push(new K(5e7,"grandPrixToken1MeterModifier")),this.globalService.globalVar.modifiers.push(new K(1e8,"grandPrixToken2MeterModifier")),this.globalService.globalVar.modifiers.push(new K(25e7,"grandPrixToken3MeterModifier")),this.globalService.globalVar.modifiers.push(new K(5e8,"grandPrixToken4MeterModifier")),this.globalService.globalVar.modifiers.push(new K(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new K(.02,"exhaustionGainGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new K(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new K(75,"grandPrixBreedLevelRequiredModifier")),this.globalService.globalVar.modifiers.push(new K(2,"scaryMaskEquipmentModifier")),this.globalService.globalVar.modifiers.push(new K(1.2,"runningShoesEquipmentModifier")),this.globalService.globalVar.modifiers.push(new K(.9,"incenseEquipmentModifier")),this.globalService.globalVar.modifiers.push(new K(.5,"athleticTapeEquipmentModifier")),this.globalService.globalVar.modifiers.push(new K(.2,"weatherMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new K(.03,"focusMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new K(.01,"stumbleMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new K(.05,"segmentCompleteMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new K(5,"whistleModifier")),this.globalService.globalVar.modifiers.push(new K(10,"goldenWhistleModifier")),this.globalService.InitializeTokenShop();var s=this.globalService.globalVar.shop.find(T=>"Specialty"===T.name);if(null!=s){var l=new tt;l.name="Whistle",l.purchasePrice.push(this.globalService.getCoinsResourceValue(2500)),l.basePurchasePrice.push(this.globalService.getCoinsResourceValue(2500)),l.totalShopQuantity=1,l.canHaveMultiples=!1,l.isAvailable=this.lookupService.isItemUnlocked("coaching"),l.type=Y.Specialty,s.itemList.push(l);var c=new tt;c.name="Golden Whistle",c.purchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),c.basePurchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),c.totalShopQuantity=1,c.canHaveMultiples=!1,c.isAvailable=!1,c.type=Y.Specialty,s.itemList.push(c)}this.globalService.globalVar.animals.forEach(T=>{T.allTrainingTracks.noviceTrack.rewards.filter(L=>"Bonus Breed XP Gain From Local Races"===L.name).forEach(L=>{L.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(T=>{T.allTrainingTracks.intermediateTrack.rewards.filter(L=>"Bonus Breed XP Gain From Local Races"===L.name).forEach(L=>{L.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(T=>{T.allTrainingTracks.masterTrack.rewards.filter(L=>"Bonus Breed XP Gain From Local Races"===L.name).forEach(L=>{L.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(T=>{T.breedGaugeMax=200+10*(T.breedLevel-1)})}else if(1.03===e)this.globalService.globalVar.animals.forEach(T=>{(isNaN(Number(T.breedLevel))||null==T.breedLevel)&&(T.breedLevel=1)});else if(1.04===e){this.fixTrackRewardsBug(),this.globalService.globalVar.notifications.isEventRaceNowActive=!1,this.globalService.globalVar.animals.forEach(T=>{if(T.type===X.Cheetah){var L=T.availableAbilities.find(oe=>"Giving Chase"===oe.name);void 0!==L&&(L.efficiency=.5),"Giving Chase"===T.ability.name&&(T.ability.efficiency=.5);var G=T.availableAbilities.find(oe=>"On The Hunt"===oe.name);void 0!==G&&(G.efficiency=.1),"On The Hunt"===T.ability.name&&(T.ability.efficiency=.1)}if(T.type===X.Goat){var ee=T.availableAbilities.find(oe=>"Deep Breathing"===oe.name);void 0!==ee&&(ee.efficiency=.25),"Deep Breathing"===T.ability.name&&(T.ability.efficiency=.25);var re=T.availableAbilities.find(oe=>"In The Rhythm"===oe.name);void 0!==re&&(re.efficiency=.1),"In The Rhythm"===T.ability.name&&(T.ability.efficiency=.1);var ce=T.availableAbilities.find(oe=>"Sure-footed"===oe.name);void 0!==ce&&(ce.efficiency=.5),"Sure-footed"===T.ability.name&&(T.ability.efficiency=.5)}if(T.type===X.Gecko){var me=T.availableAbilities.find(oe=>"Night Vision"===oe.name);void 0!==me&&(me.efficiency=.2),"Night Vision"===T.ability.name&&(T.ability.efficiency=.2)}if(T.type===X.Shark){var we=T.availableAbilities.find(oe=>"Blood In The Water"===oe.name);void 0!==we&&(we.efficiency=.1),"Blood In The Water"===T.ability.name&&(T.ability.efficiency=.1)}if(T.type===X.Octopus){var Fe=T.availableAbilities.find(oe=>"Buried Treasure"===oe.name);void 0!==Fe&&(Fe.efficiency=1),"Buried Treasure"===T.ability.name&&(T.ability.efficiency=1);var Ye=T.availableAbilities.find(oe=>"Big Brain"===oe.name);void 0!==Ye&&(Ye.efficiency=2),"Big Brain"===T.ability.name&&(T.ability.efficiency=2)}if(T.type===X.Penguin){var dt=T.availableAbilities.find(oe=>"Wild Toboggan"===oe.name);void 0!==dt&&(dt.efficiency=4),"Wild Toboggan"===T.ability.name&&(T.ability.efficiency=4);var yt=T.availableAbilities.find(oe=>"Quick Toboggan"===oe.name);void 0!==yt&&(yt.efficiency=.1),"Quick Toboggan"===T.ability.name&&(T.ability.efficiency=.1)}if(T.type===X.Caribou){var Xt=T.availableAbilities.find(oe=>"Herd Mentality"===oe.name);void 0!==Xt&&(Xt.efficiency=.5),"Herd Mentality"===T.ability.name&&(T.ability.efficiency=.5);var Et=T.availableAbilities.find(oe=>"Special Delivery"===oe.name);void 0!==Et&&(Et.efficiency=.05),"Special Delivery"===T.ability.name&&(T.ability.efficiency=.05)}if(T.type===X.Fox){var _t=T.availableAbilities.find(oe=>"Fleeting Speed"===oe.name);void 0!==_t&&(_t.efficiency=1.5),"Fleeting Speed"===T.ability.name&&(T.ability.efficiency=1.5)}});var u=this.globalService.globalVar.modifiers.find(T=>"autoFreeRacesMaxIdleTimePeriodModifier"===T.text);void 0!==u&&(u.value=7200)}else if(1.05===e)null!=this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.isCatchingUp&&(this.globalService.globalVar.eventRaceData.isCatchingUp=!1),void 0!==(d=this.globalService.globalVar.modifiers.find(T=>"grandPrixBreedLevelRequiredModifier"===T.text))&&(d.value=50);else if(1.06===e){this.globalService.globalVar.previousEventRewards=[],this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(L=>"Bonus Breed XP Gain From Training"!==L.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(L=>"Bonus Breed XP Gain From Free Races"!==L.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(L=>"Diminishing Returns per Facility Level"!==L.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(L=>"Training Time Reduction"!==L.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(L=>"Bonus Breed XP Gain From Circuit Races"!==L.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(L=>"Bonus Talents"!==L.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(L=>"Orb Pendant"!==L.name),this.fixTrackRewardsBug(),this.globalService.globalVar.modifiers.push(new K(.02,"burstMoraleBoostModifier"));var d,m=this.globalService.globalVar.modifiers.find(L=>"grandPrixRenownRewardModifier"===L.text);void 0!==m&&(m.value=3),void 0!==(d=this.globalService.globalVar.modifiers.find(L=>"grandPrixBreedLevelRequiredModifier"===L.text))&&(d.value=25),void 0!==this.globalService.globalVar.incubator&&(this.globalService.globalVar.incubator.timeToComplete=120),this.globalService.globalVar.settings.set("autoStartEventRace",!1)}else if(1.07===e){var v=0,_=0;if(this.globalService.globalVar.resources.forEach(T=>{"Headband"===T.name&&(v+=1,_+=T.amount)}),v>1){var y=this.globalService.globalVar.resources.findIndex(T=>"Headband"===T.name);this.globalService.globalVar.resources.splice(y,1),void 0!==(S=this.globalService.globalVar.resources.find(T=>"Headband"===T.name))&&(S.amount=_)}var S,D=0,w=0;if(this.globalService.globalVar.resources.forEach(T=>{"Blue Baton"===T.name&&(D+=1,w+=T.amount)}),D>1)y=this.globalService.globalVar.resources.findIndex(G=>"Blue Baton"===G.name),this.globalService.globalVar.resources.splice(y,1),void 0!==(S=this.globalService.globalVar.resources.find(G=>"Blue Baton"===G.name))&&(S.amount=w)}this.globalService.globalVar.currentVersion=e}})}fixTrackRewardsBug(){this.globalService.globalVar.animals.filter(e=>e.isAvailable).forEach(e=>{var n=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces(),r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces(),a=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining(),o=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(),s=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction(),l=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();e.miscStats.bonusBreedXpGainFromLocalRaces=0===e.miscStats.bonusLocalBreedXpCertificateCount?n:n+e.miscStats.bonusLocalBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromCircuitRaces=0===e.miscStats.bonusCircuitBreedXpCertificateCount?r:r+2*e.miscStats.bonusCircuitBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromTraining=0===e.miscStats.bonusTrainingBreedXpCertificateCount?a:a+e.miscStats.bonusTrainingBreedXpCertificateCount,e.miscStats.diminishingReturnsBonus=0===e.miscStats.bonusDiminishingReturnsCertificateCount?o:o+e.miscStats.bonusDiminishingReturnsCertificateCount,e.miscStats.trainingTimeReduction=s,e.miscStats.bonusTalents=l})}}return t.\u0275fac=function(e){return new(e||t)(Ve(St),Ve(hn))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),vD=(()=>{class t{constructor(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setProductionMode(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setDevMode(){this.devModeActive=!0,this.forceStartNewGame=!0,this.codeCreationMode=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ft=(()=>{return(t=ft||(ft={}))[t.barn=0]="barn",t[t.raceselection=1]="raceselection",t[t.animals=2]="animals",t[t.relayTeams=3]="relayTeams",t[t.shop=4]="shop",t[t.incubator=5]="incubator",t[t.trainingtrack=6]="trainingtrack",t[t.talents=7]="talents",t[t.resources=8]="resources",t[t.faqs=9]="faqs",t[t.stats=10]="stats",t[t.settings=11]="settings",ft;var t})(),La=(()=>{return(t=La||(La={}))[t.regular=0]="regular",t[t.token=1]="token",La;var t})();let qn=(()=>{class t{constructor(){this.switchView=new zn(ft.barn),this.selectAnimalView=new zn(new wt),this.selectBarnView=new zn(0),this.selectShopView=new zn(La.regular),this.selectRaceView=new zn(Pe.circuit)}setNewView(e){e!==this.switchView.value&&this.switchView.next(e)}getNewView(){return this.switchView.asObservable()}setAnimalView(e,n){n!==this.selectAnimalView.value&&this.selectAnimalView.next(n),e!==this.switchView.value&&this.switchView.next(e)}setAnimal(e){e!==this.selectAnimalView.value&&this.selectAnimalView.next(e)}getAnimalView(){return this.selectAnimalView.asObservable()}setBarnView(e,n){n!==this.selectBarnView.value&&this.selectBarnView.next(n),e!==this.switchView.value&&this.switchView.next(e)}setBarnNumber(e){e!==this.selectBarnView.value&&this.selectBarnView.next(e)}getBarnView(){return this.selectBarnView.asObservable()}setShopView(e,n){n!==this.selectShopView.value&&this.selectShopView.next(n),e!==this.switchView.value&&this.switchView.next(e)}getShopView(){return this.selectShopView.asObservable()}setRaceView(e,n){n!==this.selectRaceView.value&&this.selectRaceView.next(n),e!==this.switchView.value&&this.switchView.next(e)}getRaceView(){return this.selectRaceView.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class E4{}let bD=(()=>{class t{constructor(e){this.globalService=e}skipTutorial(){this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.globalVar.tutorials.currentTutorialId=9}getTutorialState(e){var n=new E4;return n.id=e,1===e&&(n.tutorialText="<b>Welcome to Cultura!</b> \n\n Cultura is the name of your soon to be state of the art animal racing facility. Train and nurture your animal companions and rise through the ranks by winning circuit competitions. Mix and match different racing teams and abilities to rise as far as you can!\n\nLet's take a tour. From this page, you can select a barn where you can assign and train animals. Currently, you have a fine racing horse already set up in your first barn. Select it and let's get to work. \n\n <b>Select 'Barn 1' outlined in red.</b>",n.associatedTab=ft.barn),2===e&&(n.tutorialText="You'll have to train your animals if you want them to win. There are only a few training options to choose from now, but as you grow you will find better and faster ways to improve. Each training will develop your animals in specific ways, improving the following stats:\n\nSpeed: Increase the max speed your animal can run in a race.\nAcceleration: Increase how quickly your animal gains speed.\nEndurance: Increase the distance your animal can run before tiring out and slowing down.\nPower: Increase the efficiency of your unique ability.\nFocus: Increase the distance your animal can run before losing focus and stopping abruptly.\nAdaptability: Increase the likelihood your animal won't stumble when racing through unique paths.\n\n<b>Select a training option out of the ones outlined in red.</b>",n.associatedTab=ft.barn),3===e&&(n.tutorialText="Here you can get a breakdown on the status of your animals. Here's your horse along with all of the stat information we just went over. If you need a refresher, hover over any of the stats to see what they do. Check back here often as you proceed to assign new abilities and items to your animals, as well as breeding them to gain even faster offspring.\n\nNow that your horse has had time to take a few practice laps, let's see if they have what it takes to win a race!\n\n<b>Select the 'Race' option on the right bordered in red.</b>",n.associatedTab=ft.animals),4===e&&(n.tutorialText="You've got a few options here. Circuit races are all about deciding where you stand against the competition. If you win all of the circuit races for your rank, you'll move up into the next rank which may net you some nifty rewards and open up new opportunities for your facility. You can also run some free races against local competition to make some quick coin.\n\nFor now, let's see if you can make it up to the next circuit rank. It's a nice sunny day today and that might impact how your racer runs. If you hover over a race, you'll see how the terrain or weather might impact the conditions of the race. When in doubt, hovering over an item usually gives you the information you need. Whenever you're ready, start the race. Your goal is to get to the finish line before your competition (represented as the little black dot). Good luck!\n\n<b>Select the race option outlined in red.</b>",n.associatedTab=ft.raceselection),5===e&&(n.tutorialText="Way to go! Exciting stuff there. Looks like you've got the gist of it for now. Keep racing, make some money, and build up your facility to be as great as it can be. I'll check in with you again a little later. I look forward to seeing how far you can go!\n\n<b>If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",n.associatedTab=ft.raceselection),6===e&&(n.tutorialText="Nice, you've unlocked another racer! If you jump straight into a race with your untrained monkey, things probably aren't going to go well. As you race, you'll start making enough money to build more barns and train your animals simultaneously. For now, let's go back to the barn you have.\n\n<b>Select 'Barn 1' outlined in red.</b>",n.associatedTab=ft.raceselection),7===e&&(n.tutorialText="From here you can unassign an animal from a barn and bring a new animal in. As you start to branch out and race in different course types, you'll want to try and keep your team well balanced. It's not going to help you if you have a prized thoroughbred torching the competition if your follow up racer can barely make it out the gate.\n\nLet's start training your monkey now.\n\n<b>Select 'Unassign' at the top of the screen and choose 'Monkey' to train.</b>",n.associatedTab=ft.barn),8===e&&(n.tutorialText="Nicely done. One last thing to talk about before I let you do whatever you want. Click your animal's name to take a shortcut to the animal page and let's talk about breeding. If you haven't named your animal, its type is its name (so for example, Monkey's name is Monkey).\n\n<b>Select your animal's type or name to jump to its page.</b>",n.associatedTab=ft.barn),9===e&&(n.tutorialText="Here you can see how close your animal is to being able to breed. Training and racing both contribute to this. Once you're ready, you can breed your animal and start racing the offspring. There's a strategic element to this. After breeding, your animal will have its stats set back to their starting points, but the amount that the base stats contribute to the racing stats will increase. To keep up with the competition, you'll need to keep breeding and getting faster animals. But don't breed right before a big race or you might find yourself in trouble!\n\nThat's all I have for you. Good luck and have fun!",n.associatedTab=ft.animals,this.globalService.globalVar.tutorials.tutorialCompleted=!0),n}openTutorialModal(){}}return t.\u0275fac=function(e){return new(e||t)(Ve(St))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const I4=["addListener","removeListener"],O4=["addEventListener","removeEventListener"],N4=["on","off"];function or(t,i,e,n){if(W(e)&&(n=e,e=void 0),n)return or(t,i,e).pipe(Hm(n));const[r,a]=function B4(t){return W(t.addEventListener)&&W(t.removeEventListener)}(t)?O4.map(o=>s=>t[o](i,s,e)):function V4(t){return W(t.addListener)&&W(t.removeListener)}(t)?I4.map(_D(t,i)):function F4(t){return W(t.on)&&W(t.off)}(t)?N4.map(_D(t,i)):[];if(!r&&ql(t))return ii(o=>or(o,i,e))(bi(t));if(!r)throw new TypeError("Invalid event target");return new Oe(o=>{const s=(...l)=>o.next(1<l.length?l:l[0]);return r(s),()=>a(s)})}function _D(t,i){return e=>n=>t[e](i,n)}class L4 extends he{constructor(i,e){super()}schedule(i,e=0){return this}}const sf={setInterval(...t){const{delegate:i}=sf;return((null==i?void 0:i.setInterval)||setInterval)(...t)},clearInterval(t){const{delegate:i}=sf;return((null==i?void 0:i.clearInterval)||clearInterval)(t)},delegate:void 0},yD={now:()=>(yD.delegate||Date).now(),delegate:void 0};class pu{constructor(i,e=pu.now){this.schedulerActionCtor=i,this.now=e}schedule(i,e=0,n){return new this.schedulerActionCtor(this,i).schedule(n,e)}}pu.now=yD.now;const CD=new class H4 extends pu{constructor(i,e=pu.now){super(i,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(i){const{actions:e}=this;if(this._active)return void e.push(i);let n;this._active=!0;do{if(n=i.execute(i.state,i.delay))break}while(i=e.shift());if(this._active=!1,n){for(;i=e.shift();)i.unsubscribe();throw n}}}(class U4 extends L4{constructor(i,e){super(i,e),this.scheduler=i,this.work=e,this.pending=!1}schedule(i,e=0){if(this.closed)return this;this.state=i;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(i,e,n=0){return sf.setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;sf.clearInterval(e)}execute(i,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(i,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,e){let r,n=!1;try{this.work(i)}catch(a){n=!0,r=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:i,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,ae(n,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,super.unsubscribe()}}}),G4=CD;function Kv(t=0,i,e=G4){let n=-1;return null!=i&&($0(i)?e=i:n=i),new Oe(r=>{let a=function j4(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},a)})}const{isArray:z4}=Array;function wD(t){return 1===t.length&&z4(t[0])?t[0]:t}function SD(...t){return 1===(t=wD(t)).length?bi(t[0]):new Oe(function $4(t){return i=>{let e=[];for(let n=0;e&&!i.closed&&n<t.length;n++)e.push(bi(t[n]).subscribe(Lt(i,r=>{if(e){for(let a=0;a<e.length;a++)a!==n&&e[a].unsubscribe();e=null}i.next(r)})))}}(t))}function lf(...t){const i=Xu(t),e=wD(t);return e.length?new Oe(n=>{let r=e.map(()=>[]),a=e.map(()=>!1);n.add(()=>{r=a=null});for(let o=0;!n.closed&&o<e.length;o++)bi(e[o]).subscribe(Lt(n,s=>{if(r[o].push(s),r.every(l=>l.length)){const l=r.map(c=>c.shift());n.next(i?i(...l):l),r.some((c,u)=>!c.length&&a[u])&&n.complete()}},()=>{a[o]=!0,!r[o].length&&n.complete()}));return()=>{r=a=null}}):Jr}function Si(t){return vt((i,e)=>{bi(t).subscribe(Lt(e,()=>e.complete(),O)),!e.closed&&i.subscribe(e)})}function Jv(...t){const i=Xu(t);return vt((e,n)=>{const r=t.length,a=new Array(r);let o=t.map(()=>!1),s=!1;for(let l=0;l<r;l++)bi(t[l]).subscribe(Lt(n,c=>{a[l]=c,!s&&!o[l]&&(o[l]=!0,(s=o.every(Ie))&&(o=null))},O));e.subscribe(Lt(n,l=>{if(s){const c=[l,...a];n.next(i?i(...c):c)}}))})}function DD(t,i){return i?e=>Zc(i.pipe(ki(1),function X4(){return vt((t,i)=>{t.subscribe(Lt(i,O))})}()),e.pipe(DD(t))):ii((e,n)=>t(e,n).pipe(ki(1),function Y4(t){return Mt(()=>t)}(e)))}function RD(t,i=CD){const e=Kv(t,i);return DD(()=>e)}new Oe(O);var K4={left:"right",right:"left",bottom:"top",top:"bottom"};function cf(t){return t.replace(/left|right|bottom|top/g,function(i){return K4[i]})}function Ua(t){return t.split("-")[0]}var Z4={start:"end",end:"start"};function xD(t){return t.replace(/start|end/g,function(i){return Z4[i]})}var Er="top",pa="bottom",ga="right",Ir="left",e0="auto",gu=[Er,pa,ga,Ir],El="start",mu="end",MD="viewport",vu="popper",kD=gu.reduce(function(t,i){return t.concat([i+"-"+El,i+"-"+mu])},[]),AD=[].concat(gu,[e0]).reduce(function(t,i){return t.concat([i,i+"-"+El,i+"-"+mu])},[]),u5=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ma(t){if(null==t)return window;if("[object Window]"!==t.toString()){var i=t.ownerDocument;return i&&i.defaultView||window}return t}function Il(t){return t instanceof ma(t).Element||t instanceof Element}function Zr(t){return t instanceof ma(t).HTMLElement||t instanceof HTMLElement}function PD(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ma(t).ShadowRoot||t instanceof ShadowRoot)}function No(t){return((Il(t)?t.ownerDocument:t.document)||window.document).documentElement}var us=Math.max,uf=Math.min,Ol=Math.round;function Nl(t,i){void 0===i&&(i=!1);var e=t.getBoundingClientRect(),n=1,r=1;if(Zr(t)&&i){var a=t.offsetHeight,o=t.offsetWidth;o>0&&(n=Ol(e.width)/o||1),a>0&&(r=Ol(e.height)/a||1)}return{width:e.width/n,height:e.height/r,top:e.top/r,right:e.right/n,bottom:e.bottom/r,left:e.left/n,x:e.left/n,y:e.top/r}}function t0(t){var i=ma(t);return{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function n0(t){return Nl(No(t)).left+t0(t).scrollLeft}function so(t){return ma(t).getComputedStyle(t)}function Ha(t){return t?(t.nodeName||"").toLowerCase():null}function df(t){return"html"===Ha(t)?t:t.assignedSlot||t.parentNode||(PD(t)?t.host:null)||No(t)}function r0(t){var i=so(t);return/auto|scroll|overlay|hidden/.test(i.overflow+i.overflowY+i.overflowX)}function ED(t){return["html","body","#document"].indexOf(Ha(t))>=0?t.ownerDocument.body:Zr(t)&&r0(t)?t:ED(df(t))}function bu(t,i){var e;void 0===i&&(i=[]);var n=ED(t),r=n===(null==(e=t.ownerDocument)?void 0:e.body),a=ma(n),o=r?[a].concat(a.visualViewport||[],r0(n)?n:[]):n,s=i.concat(o);return r?s:s.concat(bu(df(o)))}function f5(t){return["table","td","th"].indexOf(Ha(t))>=0}function ID(t){return Zr(t)&&"fixed"!==so(t).position?t.offsetParent:null}function _u(t){for(var i=ma(t),e=ID(t);e&&f5(e)&&"static"===so(e).position;)e=ID(e);return e&&("html"===Ha(e)||"body"===Ha(e)&&"static"===so(e).position)?i:e||function p5(t){var i=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Zr(t)&&"fixed"===so(t).position)return null;for(var r=df(t);Zr(r)&&["html","body"].indexOf(Ha(r))<0;){var a=so(r);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||i&&"filter"===a.willChange||i&&a.filter&&"none"!==a.filter)return r;r=r.parentNode}return null}(t)||i}function OD(t,i){var e=i.getRootNode&&i.getRootNode();if(t.contains(i))return!0;if(e&&PD(e)){var n=i;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function a0(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ND(t,i){return i===MD?a0(function d5(t){var i=ma(t),e=No(t),n=i.visualViewport,r=e.clientWidth,a=e.clientHeight,o=0,s=0;return n&&(r=n.width,a=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,s=n.offsetTop)),{width:r,height:a,x:o+n0(t),y:s}}(t)):Il(i)?function g5(t){var i=Nl(t);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(i):a0(function h5(t){var i,e=No(t),n=t0(t),r=null==(i=t.ownerDocument)?void 0:i.body,a=us(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=us(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-n.scrollLeft+n0(t),l=-n.scrollTop;return"rtl"===so(r||e).direction&&(s+=us(e.clientWidth,r?r.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(No(t)))}function Vl(t){return t.split("-")[1]}function o0(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function VD(t){var l,i=t.reference,e=t.element,n=t.placement,r=n?Ua(n):null,a=n?Vl(n):null,o=i.x+i.width/2-e.width/2,s=i.y+i.height/2-e.height/2;switch(r){case Er:l={x:o,y:i.y-e.height};break;case pa:l={x:o,y:i.y+i.height};break;case ga:l={x:i.x+i.width,y:s};break;case Ir:l={x:i.x-e.width,y:s};break;default:l={x:i.x,y:i.y}}var c=r?o0(r):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case El:l[c]=l[c]-(i[u]/2-e[u]/2);break;case mu:l[c]=l[c]+(i[u]/2-e[u]/2)}}return l}function BD(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function LD(t,i){return i.reduce(function(e,n){return e[n]=t,e},{})}function s0(t,i){void 0===i&&(i={});var n=i.placement,r=void 0===n?t.placement:n,a=i.boundary,o=void 0===a?"clippingParents":a,s=i.rootBoundary,l=void 0===s?MD:s,c=i.elementContext,u=void 0===c?vu:c,d=i.altBoundary,m=void 0!==d&&d,v=i.padding,_=void 0===v?0:v,y=BD("number"!=typeof _?_:LD(_,gu)),D=t.rects.popper,w=t.elements[m?u===vu?"reference":vu:u],T=function v5(t,i,e){var n="clippingParents"===i?function m5(t){var i=bu(df(t)),n=["absolute","fixed"].indexOf(so(t).position)>=0&&Zr(t)?_u(t):t;return Il(n)?i.filter(function(r){return Il(r)&&OD(r,n)&&"body"!==Ha(r)}):[]}(t):[].concat(i),r=[].concat(n,[e]),o=r.reduce(function(s,l){var c=ND(t,l);return s.top=us(c.top,s.top),s.right=uf(c.right,s.right),s.bottom=uf(c.bottom,s.bottom),s.left=us(c.left,s.left),s},ND(t,r[0]));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(Il(w)?w:w.contextElement||No(t.elements.popper),o,l),L=Nl(t.elements.reference),G=VD({reference:L,element:D,strategy:"absolute",placement:r}),ee=a0(Object.assign({},D,G)),re=u===vu?ee:L,ce={top:T.top-re.top+y.top,bottom:re.bottom-T.bottom+y.bottom,left:T.left-re.left+y.left,right:re.right-T.right+y.right},me=t.modifiersData.offset;if(u===vu&&me){var we=me[r];Object.keys(ce).forEach(function(Fe){var Ye=[ga,pa].indexOf(Fe)>=0?1:-1,dt=[Er,pa].indexOf(Fe)>=0?"y":"x";ce[Fe]+=we[dt]*Ye})}return ce}const C5={name:"flip",enabled:!0,phase:"main",fn:function y5(t){var i=t.state,e=t.options,n=t.name;if(!i.modifiersData[n]._skip){for(var r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0===o||o,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,m=e.altBoundary,v=e.flipVariations,_=void 0===v||v,y=e.allowedAutoPlacements,S=i.options.placement,D=Ua(S),T=l||(D!==S&&_?function _5(t){if(Ua(t)===e0)return[];var i=cf(t);return[xD(t),i,xD(i)]}(S):[cf(S)]),L=[S].concat(T).reduce(function(pt,on){return pt.concat(Ua(on)===e0?function b5(t,i){void 0===i&&(i={});var r=i.boundary,a=i.rootBoundary,o=i.padding,s=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?AD:l,u=Vl(i.placement),d=u?s?kD:kD.filter(function(_){return Vl(_)===u}):gu,m=d.filter(function(_){return c.indexOf(_)>=0});0===m.length&&(m=d);var v=m.reduce(function(_,y){return _[y]=s0(t,{placement:y,boundary:r,rootBoundary:a,padding:o})[Ua(y)],_},{});return Object.keys(v).sort(function(_,y){return v[_]-v[y]})}(i,{placement:on,boundary:u,rootBoundary:d,padding:c,flipVariations:_,allowedAutoPlacements:y}):on)},[]),G=i.rects.reference,ee=i.rects.popper,re=new Map,ce=!0,me=L[0],we=0;we<L.length;we++){var Fe=L[we],Ye=Ua(Fe),dt=Vl(Fe)===El,yt=[Er,pa].indexOf(Ye)>=0,Xt=yt?"width":"height",Et=s0(i,{placement:Fe,boundary:u,rootBoundary:d,altBoundary:m,padding:c}),_t=yt?dt?ga:Ir:dt?pa:Er;G[Xt]>ee[Xt]&&(_t=cf(_t));var oe=cf(_t),R=[];if(a&&R.push(Et[Ye]<=0),s&&R.push(Et[_t]<=0,Et[oe]<=0),R.every(function(pt){return pt})){me=Fe,ce=!1;break}re.set(Fe,R)}if(ce)for(var Ht=function(on){var cn=L.find(function(mt){var wn=re.get(mt);if(wn)return wn.slice(0,on).every(function(ti){return ti})});if(cn)return me=cn,"break"},ln=_?3:1;ln>0&&"break"!==Ht(ln);ln--);i.placement!==me&&(i.modifiersData[n]._skip=!0,i.placement=me,i.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function yu(t,i,e){return us(t,uf(i,e))}function l0(t){var i=Nl(t),e=t.offsetWidth,n=t.offsetHeight;return Math.abs(i.width-e)<=1&&(e=i.width),Math.abs(i.height-n)<=1&&(n=i.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:n}}const D5={name:"preventOverflow",enabled:!0,phase:"main",fn:function T5(t){var i=t.state,e=t.options,n=t.name,r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0!==o&&o,m=e.tether,v=void 0===m||m,_=e.tetherOffset,y=void 0===_?0:_,S=s0(i,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),D=Ua(i.placement),w=Vl(i.placement),T=!w,L=o0(D),G=function w5(t){return"x"===t?"y":"x"}(L),ee=i.modifiersData.popperOffsets,re=i.rects.reference,ce=i.rects.popper,me="function"==typeof y?y(Object.assign({},i.rects,{placement:i.placement})):y,we="number"==typeof me?{mainAxis:me,altAxis:me}:Object.assign({mainAxis:0,altAxis:0},me),Fe=i.modifiersData.offset?i.modifiersData.offset[i.placement]:null,Ye={x:0,y:0};if(ee){if(a){var dt,yt="y"===L?Er:Ir,Xt="y"===L?pa:ga,Et="y"===L?"height":"width",_t=ee[L],oe=_t+S[yt],R=_t-S[Xt],Qe=v?-ce[Et]/2:0,Ht=w===El?re[Et]:ce[Et],ln=w===El?-ce[Et]:-re[Et],yn=i.elements.arrow,pt=v&&yn?l0(yn):{width:0,height:0},on=i.modifiersData["arrow#persistent"]?i.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},cn=on[yt],mt=on[Xt],wn=yu(0,re[Et],pt[Et]),ti=T?re[Et]/2-Qe-wn-cn-we.mainAxis:Ht-wn-cn-we.mainAxis,li=T?-re[Et]/2+Qe+wn+mt+we.mainAxis:ln+wn+mt+we.mainAxis,ci=i.elements.arrow&&_u(i.elements.arrow),ui=null!=(dt=null==Fe?void 0:Fe[L])?dt:0,Oi=_t+li-ui,Di=yu(v?uf(oe,_t+ti-ui-(ci?"y"===L?ci.clientTop||0:ci.clientLeft||0:0)):oe,_t,v?us(R,Oi):R);ee[L]=Di,Ye[L]=Di-_t}if(s){var Mn,sn=ee[G],Xn="y"===G?"height":"width",Ui=sn+S["x"===L?Er:Ir],On=sn-S["x"===L?pa:ga],mn=-1!==[Er,Ir].indexOf(D),ni=null!=(Mn=null==Fe?void 0:Fe[G])?Mn:0,ba=mn?Ui:sn-re[Xn]-ce[Xn]-ni+we.altAxis,br=mn?sn+re[Xn]+ce[Xn]-ni-we.altAxis:On,_a=v&&mn?function S5(t,i,e){var n=yu(t,i,e);return n>e?e:n}(ba,sn,br):yu(v?ba:Ui,sn,v?br:On);ee[G]=_a,Ye[G]=_a-sn}i.modifiersData[n]=Ye}},requiresIfExists:["offset"]},k5={name:"arrow",enabled:!0,phase:"main",fn:function x5(t){var i,e=t.state,n=t.name,r=t.options,a=e.elements.arrow,o=e.modifiersData.popperOffsets,s=Ua(e.placement),l=o0(s),u=[Ir,ga].indexOf(s)>=0?"height":"width";if(a&&o){var d=function(i,e){return BD("number"!=typeof(i="function"==typeof i?i(Object.assign({},e.rects,{placement:e.placement})):i)?i:LD(i,gu))}(r.padding,e),m=l0(a),v="y"===l?Er:Ir,_="y"===l?pa:ga,y=e.rects.reference[u]+e.rects.reference[l]-o[l]-e.rects.popper[u],S=o[l]-e.rects.reference[l],D=_u(a),w=D?"y"===l?D.clientHeight||0:D.clientWidth||0:0,ee=w/2-m[u]/2+(y/2-S/2),re=yu(d[v],ee,w-m[u]-d[_]);e.modifiersData[n]=((i={})[l]=re,i.centerOffset=re-ee,i)}},effect:function M5(t){var i=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"==typeof r&&!(r=i.elements.popper.querySelector(r))||!OD(i.elements.popper,r)||(i.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function I5(t,i,e){void 0===e&&(e=!1);var n=Zr(i),r=Zr(i)&&function E5(t){var i=t.getBoundingClientRect(),e=Ol(i.width)/t.offsetWidth||1,n=Ol(i.height)/t.offsetHeight||1;return 1!==e||1!==n}(i),a=No(i),o=Nl(t,r),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!e)&&(("body"!==Ha(i)||r0(a))&&(s=function P5(t){return t!==ma(t)&&Zr(t)?function A5(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):t0(t)}(i)),Zr(i)?((l=Nl(i,!0)).x+=i.clientLeft,l.y+=i.clientTop):a&&(l.x=n0(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function O5(t){var i=new Map,e=new Set,n=[];function r(a){e.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(s){if(!e.has(s)){var l=i.get(s);l&&r(l)}}),n.push(a)}return t.forEach(function(a){i.set(a.name,a)}),t.forEach(function(a){e.has(a.name)||r(a)}),n}function V5(t){var i;return function(){return i||(i=new Promise(function(e){Promise.resolve().then(function(){i=void 0,e(t())})})),i}}var UD={placement:"bottom",modifiers:[],strategy:"absolute"};function HD(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return!i.some(function(n){return!(n&&"function"==typeof n.getBoundingClientRect)})}function B5(t){void 0===t&&(t={});var e=t.defaultModifiers,n=void 0===e?[]:e,r=t.defaultOptions,a=void 0===r?UD:r;return function(s,l,c){void 0===c&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},UD,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],m=!1,v={state:u,setOptions:function(D){var w="function"==typeof D?D(u.options):D;y(),u.options=Object.assign({},a,u.options,w),u.scrollParents={reference:Il(s)?bu(s):s.contextElement?bu(s.contextElement):[],popper:bu(l)};var T=function N5(t){var i=O5(t);return u5.reduce(function(e,n){return e.concat(i.filter(function(r){return r.phase===n}))},[])}(function F5(t){var i=t.reduce(function(e,n){var r=e[n.name];return e[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,e},{});return Object.keys(i).map(function(e){return i[e]})}([].concat(n,u.options.modifiers)));return u.orderedModifiers=T.filter(function(Fe){return Fe.enabled}),function _(){u.orderedModifiers.forEach(function(S){var w=S.options,L=S.effect;if("function"==typeof L){var G=L({state:u,name:S.name,instance:v,options:void 0===w?{}:w});d.push(G||function(){})}})}(),v.update()},forceUpdate:function(){if(!m){var D=u.elements,w=D.reference,T=D.popper;if(HD(w,T)){u.rects={reference:I5(w,_u(T),"fixed"===u.options.strategy),popper:l0(T)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(Fe){return u.modifiersData[Fe.name]=Object.assign({},Fe.data)});for(var G=0;G<u.orderedModifiers.length;G++)if(!0!==u.reset){var ee=u.orderedModifiers[G],re=ee.fn,ce=ee.options;"function"==typeof re&&(u=re({state:u,options:void 0===ce?{}:ce,name:ee.name,instance:v})||u)}else u.reset=!1,G=-1}}},update:V5(function(){return new Promise(function(S){v.forceUpdate(),S(u)})}),destroy:function(){y(),m=!0}};if(!HD(s,l))return v;function y(){d.forEach(function(S){return S()}),d=[]}return v.setOptions(c).then(function(S){!m&&c.onFirstUpdate&&c.onFirstUpdate(S)}),v}}var hf={passive:!0},j5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function GD(t){var i,e=t.popper,n=t.popperRect,r=t.placement,a=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,m=o.x,v=void 0===m?0:m,_=o.y,y=void 0===_?0:_,S="function"==typeof u?u({x:v,y}):{x:v,y};v=S.x,y=S.y;var D=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),T=Ir,L=Er,G=window;if(c){var ee=_u(e),re="clientHeight",ce="clientWidth";ee===ma(e)&&"static"!==so(ee=No(e)).position&&"absolute"===s&&(re="scrollHeight",ce="scrollWidth"),ee=ee,(r===Er||(r===Ir||r===ga)&&a===mu)&&(L=pa,y-=(d&&G.visualViewport?G.visualViewport.height:ee[re])-n.height,y*=l?1:-1),r!==Ir&&(r!==Er&&r!==pa||a!==mu)||(T=ga,v-=(d&&G.visualViewport?G.visualViewport.width:ee[ce])-n.width,v*=l?1:-1)}var dt,Fe=Object.assign({position:s},c&&j5),Ye=!0===u?function z5(t){var e=t.y,r=window.devicePixelRatio||1;return{x:Ol(t.x*r)/r||0,y:Ol(e*r)/r||0}}({x:v,y}):{x:v,y};return v=Ye.x,y=Ye.y,Object.assign({},Fe,l?((dt={})[L]=w?"0":"",dt[T]=D?"0":"",dt.transform=(G.devicePixelRatio||1)<=1?"translate("+v+"px, "+y+"px)":"translate3d("+v+"px, "+y+"px, 0)",dt):((i={})[L]=w?y+"px":"",i[T]=D?v+"px":"",i.transform="",i))}var Q5=B5({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function L5(t){var i=t.state,e=t.instance,n=t.options,r=n.scroll,a=void 0===r||r,o=n.resize,s=void 0===o||o,l=ma(i.elements.popper),c=[].concat(i.scrollParents.reference,i.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",e.update,hf)}),s&&l.addEventListener("resize",e.update,hf),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",e.update,hf)}),s&&l.removeEventListener("resize",e.update,hf)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function H5(t){var i=t.state;i.modifiersData[t.name]=VD({reference:i.rects.reference,element:i.rects.popper,strategy:"absolute",placement:i.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function $5(t){var i=t.state,e=t.options,n=e.gpuAcceleration,r=void 0===n||n,a=e.adaptive,o=void 0===a||a,s=e.roundOffsets,l=void 0===s||s,u={placement:Ua(i.placement),variation:Vl(i.placement),popper:i.elements.popper,popperRect:i.rects.popper,gpuAcceleration:r,isFixed:"fixed"===i.options.strategy};null!=i.modifiersData.popperOffsets&&(i.styles.popper=Object.assign({},i.styles.popper,GD(Object.assign({},u,{offsets:i.modifiersData.popperOffsets,position:i.options.strategy,adaptive:o,roundOffsets:l})))),null!=i.modifiersData.arrow&&(i.styles.arrow=Object.assign({},i.styles.arrow,GD(Object.assign({},u,{offsets:i.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),i.attributes.popper=Object.assign({},i.attributes.popper,{"data-popper-placement":i.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function W5(t){var i=t.state;Object.keys(i.elements).forEach(function(e){var n=i.styles[e]||{},r=i.attributes[e]||{},a=i.elements[e];!Zr(a)||!Ha(a)||(Object.assign(a.style,n),Object.keys(r).forEach(function(o){var s=r[o];!1===s?a.removeAttribute(o):a.setAttribute(o,!0===s?"":s)}))})},effect:function X5(t){var i=t.state,e={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(i.elements.popper.style,e.popper),i.styles=e,i.elements.arrow&&Object.assign(i.elements.arrow.style,e.arrow),function(){Object.keys(i.elements).forEach(function(n){var r=i.elements[n],a=i.attributes[n]||{},s=Object.keys(i.styles.hasOwnProperty(n)?i.styles[n]:e[n]).reduce(function(l,c){return l[c]="",l},{});!Zr(r)||!Ha(r)||(Object.assign(r.style,s),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]}]});const J5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Z5(t){var i=t.state,n=t.name,r=t.options.offset,a=void 0===r?[0,0]:r,o=AD.reduce(function(u,d){return u[d]=function K5(t,i,e){var n=Ua(t),r=[Ir,Er].indexOf(n)>=0?-1:1,a="function"==typeof e?e(Object.assign({},i,{placement:t})):e,o=a[0],s=a[1];return o=o||0,s=(s||0)*r,[Ir,ga].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}(d,i.rects,a),u},{}),s=o[i.placement],c=s.y;null!=i.modifiersData.popperOffsets&&(i.modifiersData.popperOffsets.x+=s.x,i.modifiersData.popperOffsets.y+=c),i.modifiersData[n]=o}},c0=["*"],TL=["dialog"];function n8(t,i){1&t&&g(0),2&t&&Ze(C(2).title)}function i8(t,i){}function r8(t,i){if(1&t&&(f(0,"h3",3),M(1,n8,1,1,"ng-template",null,4,rt),M(3,i8,0,0,"ng-template",5),h()),2&t){const e=it(2),n=C();p(3),b("ngTemplateOutlet",n.isTitleTemplate()?n.title:e)("ngTemplateOutletContext",n.context)}}function a8(t,i){if(1&t&&(f(0,"span"),Za(1,2),At(2,"percent"),h()),2&t){const e=C();p(2),$d(Wd(2,1,e.getValue()/e.max)),function Bg(t){!function pE(t,i,e){if(Ec>0){const n=t.data[e];eC(t,i,Array.isArray(n)?n:n.update,Wa()-Ec-1,Pc)}Pc=0,Ec=0}(nn(),De(),t+20)}(1)}}function Ga(t){return!isNaN(function ff(t){return parseInt(`${t}`,10)}(t))}function ds(t){return null!=t}function Fl(t){return(t||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let i=this;if(!document.documentElement.contains(i))return null;do{if(i.matches(t))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null});const $D={animation:!0,transitionTimerDelayMs:5},y8=()=>{},{transitionTimerDelayMs:C8}=$D,Cu=new Map,sr=(t,i,e,n)=>{let r=n.context||{};const a=Cu.get(i);if(a)switch(n.runningTransition){case"continue":return Jr;case"stop":t.run(()=>a.transition$.complete()),r=Object.assign(a.context,r),Cu.delete(i)}const o=e(i,n.animation,r)||y8;if(!n.animation||"none"===window.getComputedStyle(i).transitionProperty)return t.run(()=>o()),Tt(void 0).pipe(function b8(t){return i=>new Oe(e=>i.subscribe({next:o=>t.run(()=>e.next(o)),error:o=>t.run(()=>e.error(o)),complete:()=>t.run(()=>e.complete())}))}(t));const s=new ve,l=new ve,c=s.pipe(function q4(...t){return i=>Zc(i,Tt(...t))}(!0));Cu.set(i,{transition$:s,complete:()=>{l.next(),l.complete()},context:r});const u=function _8(t){const{transitionDelay:i,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(i)+parseFloat(e))}(i);return t.runOutsideAngular(()=>{const d=or(i,"transitionend").pipe(Si(c),Vi(({target:v})=>v===i));SD(Kv(u+C8).pipe(Si(c)),d,l).pipe(Si(c)).subscribe(()=>{Cu.delete(i),t.run(()=>{o(),s.next(),s.complete()})})}),s.asObservable()};let wu=(()=>{class t{constructor(){this.animation=$D.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),KD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr]]}),t})(),ZD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr]]}),t})(),eR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({}),t})(),iR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr]]}),t})(),rR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({}),t})();var Ti=(()=>{return(t=Ti||(Ti={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",Ti;var t})();const gf=(t,i)=>!!i&&i.some(e=>e.contains(t)),aR=(t,i)=>!i||null!=function v8(t,i){return i&&void 0!==t.closest?t.closest(i):null}(t,i),L8="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function oR(t,i,e,n,r,a,o,s){e&&t.runOutsideAngular((t=>L8?()=>setTimeout(()=>t(),100):t)(()=>{const c=or(i,"keydown").pipe(Si(r),Vi(m=>m.which===Ti.Escape),Yi(m=>m.preventDefault())),u=or(i,"mousedown").pipe(Mt(m=>{const v=m.target;return 2!==m.button&&!gf(v,o)&&("inside"===e?gf(v,a)&&aR(v,s):"outside"===e?!gf(v,a):aR(v,s)||!gf(v,a))}),Si(r)),d=or(i,"mouseup").pipe(Jv(u),Vi(([m,v])=>v),RD(0),Si(r));SD([c.pipe(Mt(m=>0)),d.pipe(Mt(m=>1))]).subscribe(m=>t.run(()=>n(m)))}))}const sR=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function lR(t){const i=Array.from(t.querySelectorAll(sR)).filter(e=>-1!==e.tabIndex);return[i[0],i[i.length-1]]}const G8=/\s+/,j8=/  +/gi,z8=/^start/,$8=/^end/,q8=/-(top|left)$/,W8=/-(bottom|right)$/,Y8=/^left/,Q8=/^right/,K8=/^start/,Z8=/^end/;function cR({placement:t,baseClass:i}){let e=Array.isArray(t)?t:t.split(G8),r=e.findIndex(l=>"auto"===l);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(l){null==e.find(c=>-1!==c.search("^"+l))&&e.splice(r++,1,l)});const a=e.map(l=>function X8(t){return t.replace(z8,"left").replace($8,"right").replace(q8,"-start").replace(W8,"-end")}(l));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!i,phase:"write",fn({state:l}){const c=new RegExp(i+"-[a-z]+","gi"),u=l.elements.popper,d=l.placement;let m=u.className;m=m.replace(c,""),m+=` ${function J8(t,i){let[e,n]=i.split("-");const r=e.replace(Y8,"start").replace(Q8,"end");let a=[r];if(n){let o=n;("left"===e||"right"===e)&&(o=o.replace(K8,"top").replace(Z8,"bottom")),a.push(`${r}-${o}`)}return t&&(a=a.map(o=>`${t}-${o}`)),a.join(" ")}(i,d)}`,m=m.trim().replace(j8," "),u.className=m}},C5,D5,k5,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function uR(t){return t}function dR(){let t=null;return{createPopper(i){if(!t){let n=(i.updatePopperOptions||uR)(cR(i));t=Q5(i.hostElement,i.targetElement,n)}},update(){t&&t.update()},setOptions(i){if(t){let n=(i.updatePopperOptions||uR)(cR(i));t.setOptions(n)}},destroy(){t&&(t.destroy(),t=null)}}}new Date(1882,10,12),new Date(2174,10,25);let vR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr,aT]]}),t})(),l6=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),bR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Ue({type:t,selectors:[["",8,"navbar"]]}),t})(),b0=(()=>{class t{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(P(gn))},t.\u0275dir=Ue({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,n){2&e&&bt("disabled",n.disabled)},inputs:{disabled:"disabled"}}),t})(),_f=(()=>{class t{constructor(e,n){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=n.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(P(rn(()=>Ll)),P(gn))},t.\u0275dir=Ue({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,n,r){if(1&e&&oi(r,b0,4),2&e){let a;un(a=dn())&&(n.menuItems=a)}},hostVars:5,hostBindings:function(e,n){1&e&&N("keydown.ArrowUp",function(a){return n.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return n.dropdown.onKeyDown(a)})("keydown.Home",function(a){return n.dropdown.onKeyDown(a)})("keydown.End",function(a){return n.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return n.dropdown.onKeyDown(a)})("keydown.Space",function(a){return n.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return n.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return n.dropdown.onKeyDown(a)}),2&e&&(_n("data-popper",n.placement),bt("dropdown-menu",!0)("show",n.dropdown.isOpen()))}}),t})(),yf=(()=>{class t{constructor(e,n){this.dropdown=e,this.nativeElement=n.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(P(rn(()=>Ll)),P(gn))},t.\u0275dir=Ue({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,n){2&e&&_n("aria-expanded",n.dropdown.isOpen())}}),t})(),_0=(()=>{class t extends yf{constructor(e,n){super(e,n)}}return t.\u0275fac=function(e){return new(e||t)(P(rn(()=>Ll)),P(gn))},t.\u0275dir=Ue({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,n){1&e&&N("click",function(){return n.dropdown.toggle()})("keydown.ArrowUp",function(a){return n.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return n.dropdown.onKeyDown(a)})("keydown.Home",function(a){return n.dropdown.onKeyDown(a)})("keydown.End",function(a){return n.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return n.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return n.dropdown.onKeyDown(a)}),2&e&&_n("aria-expanded",n.dropdown.isOpen())},features:[Rn([{provide:yf,useExisting:rn(()=>t)}]),pn]}),t})(),Ll=(()=>{class t{constructor(e,n,r,a,o,s,l){this._changeDetector=e,this._document=r,this._ngZone=a,this._elementRef=o,this._renderer=s,this._closed$=new ve,this._bodyContainer=null,this._positioning=dR(),this._open=!1,this.openChange=new nt,this.placement=n.placement,this.container=n.container,this.autoClose=n.autoClose,this.display=l?"static":"dynamic",this._zoneSubscription=a.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(ki(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:n,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(n,r)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.onStable.pipe(ki(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()})))}_setCloseHandlers(){oR(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._positioning.destroy(),this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const n=e.which,r=this._getMenuElements();let a=-1,o=null;const s=this._isEventFromToggle(e);if(!s&&r.length&&r.forEach((l,c)=>{l.contains(e.target)&&(o=l),l===this._document.activeElement&&(a=c)}),n!==Ti.Space&&n!==Ti.Enter){if(n!==Ti.Tab){if(s||o){if(this.open(),r.length){switch(n){case Ti.ArrowDown:a=Math.min(a+1,r.length-1);break;case Ti.ArrowUp:if(this._isDropup()&&-1===a){a=r.length-1;break}a=Math.max(a-1,0);break;case Ti.Home:a=0;break;case Ti.End:a=r.length-1}r[a].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const l=this._menu.nativeElement.querySelectorAll(sR);e.shiftKey&&e.target===l[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===l[l.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else or(e.target,"focusout").pipe(ki(1)).subscribe(({relatedTarget:l})=>{this._elementRef.nativeElement.contains(l)||this.close()})}}else o&&(!0===this.autoClose||"inside"===this.autoClose)&&or(o,"click").pipe(ki(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(n=>!n.disabled).map(n=>n.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const n=this._renderer,r=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||n.createElement("div");n.setStyle(a,"position","absolute"),n.setStyle(r,"position","static"),n.setStyle(a,"z-index","1050"),n.appendChild(a,r),n.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,n){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(n&&this._renderer.removeClass(r,n),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const n=this._menu;if(n){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,a=this._elementRef.nativeElement;r.removeClass(a,"dropup"),r.removeClass(a,"dropdown");const{nativeElement:o}=n;"static"===this.display?(n.placement=null,r.setAttribute(o,"data-bs-popper","static")):(n.placement=e,r.removeAttribute(o,"data-bs-popper"));const s=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(a,s);const l=this._bodyContainer;l&&(r.removeClass(l,"dropup"),r.removeClass(l,"dropdown"),r.addClass(l,s))}}}return t.\u0275fac=function(e){return new(e||t)(P(Mr),P(l6),P(hi),P(xn),P(gn),P(zr),P(bR,8))},t.\u0275dir=Ue({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(e,n,r){if(1&e&&(oi(r,_f,5),oi(r,yf,5)),2&e){let a;un(a=dn())&&(n._menu=a.first),un(a=dn())&&(n._anchor=a.first)}},hostVars:2,hostBindings:function(e,n){2&e&&bt("show",n.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[Pi]}),t})(),_R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({}),t})();class gs{constructor(i,e,n){this.nodes=i,this.viewRef=e,this.componentRef=n}}class c6{constructor(i,e,n,r,a,o){this._type=i,this._injector=e,this._viewContainerRef=n,this._renderer=r,this._ngZone=a,this._applicationRef=o,this._windowRef=null,this._contentRef=null}open(i,e,n=!1){this._windowRef||(this._contentRef=this._getContentRef(i,e),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,a=this._ngZone.onStable.pipe(ki(1),ii(()=>sr(this._ngZone,r,({classList:o})=>o.add("show"),{animation:n,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:a}}close(i=!1){return this._windowRef?sr(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:i,runningTransition:"stop"}).pipe(Yi(()=>{var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):Tt(void 0)}_getContentRef(i,e){if(i){if(i instanceof Fn){const n=i.createEmbeddedView(e);return this._applicationRef.attachView(n),new gs([n.rootNodes],n)}return new gs([[this._renderer.createText(`${i}`)]])}return new gs([])}}let u6=(()=>{class t{constructor(e,n){this._el=e,this._zone=n}ngOnInit(){this._zone.onStable.asObservable().pipe(ki(1)).subscribe(()=>{sr(this._zone,this._el.nativeElement,(e,n)=>{n&&Fl(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return sr(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(P(gn),P(xn))},t.\u0275cmp=lt({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,n){2&e&&(To("modal-backdrop"+(n.backdropClass?" "+n.backdropClass:"")),bt("show",!n.animation)("fade",n.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),t})();class yR{close(i){}dismiss(i){}}class d6{constructor(i,e,n,r){this._windowCmptRef=i,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new ve,this._dismissed=new ve,this._hidden=new ve,i.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,o)=>{this._resolve=a,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Si(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Si(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(i){this._windowCmptRef&&(this._closed.next(i),this._resolve(i),this._removeModalElements())}_dismiss(i){this._dismissed.next(i),this._reject(i),this._removeModalElements()}dismiss(i){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function m8(t){return t&&t.then}(e)?!1!==e&&this._dismiss(i):e.then(n=>{!1!==n&&this._dismiss(i)},()=>{})}else this._dismiss(i)}_removeModalElements(){const i=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Tt(void 0);i.subscribe(()=>{const{nativeElement:n}=this._windowCmptRef.location;n.parentNode.removeChild(n),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:n}=this._backdropCmptRef.location;n.parentNode.removeChild(n),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),lf(i,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Ru=(()=>{return(t=Ru||(Ru={}))[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",Ru;var t})();let h6=(()=>{class t{constructor(e,n,r){this._document=e,this._elRef=n,this._zone=r,this._closed$=new ve,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new nt,this.shown=new ve,this.hidden=new ve}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ki(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,n={animation:this.animation,runningTransition:"stop"},o=lf(sr(this._zone,e,()=>e.classList.remove("show"),n),sr(this._zone,this._dialogEl.nativeElement,()=>{},n));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const e={animation:this.animation,runningTransition:"continue"};lf(sr(this._zone,this._elRef.nativeElement,(a,o)=>{o&&Fl(a),a.classList.add("show")},e),sr(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{or(e,"keydown").pipe(Si(this._closed$),Vi(r=>r.which===Ti.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Ru.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let n=!1;or(this._dialogEl.nativeElement,"mousedown").pipe(Si(this._closed$),Yi(()=>n=!1),io(()=>or(e,"mouseup").pipe(Si(this._closed$),ki(1))),Vi(({target:r})=>e===r)).subscribe(()=>{n=!0}),or(e,"click").pipe(Si(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!n&&this._zone.run(()=>this.dismiss(Ru.BACKDROP_CLICK))),n=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const n=e.querySelector("[ngbAutofocus]"),r=lR(e)[0];(n||r||e).focus()}}_restoreFocus(){const e=this._document.body,n=this._elWithFocus;let r;r=n&&n.focus&&e.contains(n)?n:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&sr(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(P(hi),P(gn),P(xn))},t.\u0275cmp=lt({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,n){if(1&e&&ca(TL,7),2&e){let r;un(r=dn())&&(n._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,n){2&e&&(_n("aria-modal",!0)("aria-labelledby",n.ariaLabelledBy)("aria-describedby",n.ariaDescribedBy),To("modal d-block"+(n.windowClass?" "+n.windowClass:"")),bt("fade",n.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:c0,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,n){1&e&&(Vd(),f(0,"div",0,1)(2,"div",2),Fd(3),h()()),2&e&&To("modal-dialog"+(n.size?" modal-"+n.size:"")+(n.centered?" modal-dialog-centered":"")+(n.scrollable?" modal-dialog-scrollable":"")+(n.modalDialogClass?" "+n.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),f6=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),n=this._document.body,r=n.style,{overflow:a,paddingRight:o}=r;if(e>0){const s=parseFloat(window.getComputedStyle(n).paddingRight);r.paddingRight=`${s+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=o),r.overflow=a}}}return t.\u0275fac=function(e){return new(e||t)(Ve(hi))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),p6=(()=>{class t{constructor(e,n,r,a,o,s){this._applicationRef=e,this._injector=n,this._document=r,this._scrollBar=a,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new ve,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new nt,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((t,i,e,n=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=or(i,"focusin").pipe(Si(e),Mt(a=>a.target));or(i,"keydown").pipe(Si(e),Vi(a=>a.which===Ti.Tab),Jv(r)).subscribe(([a,o])=>{const[s,l]=lR(i);(o===s||o===i)&&a.shiftKey&&(l.focus(),a.preventDefault()),o===l&&!a.shiftKey&&(s.focus(),a.preventDefault())}),n&&or(i,"click").pipe(Si(e),Jv(r),Mt(a=>a[1])).subscribe(a=>a.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(e,n,r,a){const o=a.container instanceof HTMLElement?a.container:ds(a.container)?this._document.querySelector(a.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.hide(),c=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!o)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const u=new yR,d=this._getContentRef(e,a.injector||n,r,u,a);let m=!1!==a.backdrop?this._attachBackdrop(e,o):void 0,v=this._attachWindowComponent(e,o,d),_=new d6(v,d,m,a.beforeDismiss);return this._registerModalRef(_),this._registerWindowCmpt(v),_.result.then(l,l),_.result.then(c,c),u.close=y=>{_.close(y)},u.dismiss=y=>{_.dismiss(y)},this._applyWindowOptions(v.instance,a),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),m&&m.instance&&(this._applyBackdropOptions(m.instance,a),m.changeDetectorRef.detectChanges()),v.changeDetectorRef.detectChanges(),_}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(n=>n.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,n){let a=e.resolveComponentFactory(u6).create(this._injector);return this._applicationRef.attachView(a.hostView),n.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,n,r){let o=e.resolveComponentFactory(h6).create(this._injector,r.nodes);return this._applicationRef.attachView(o.hostView),n.appendChild(o.location.nativeElement),o}_applyWindowOptions(e,n){this._windowAttributes.forEach(r=>{ds(n[r])&&(e[r]=n[r])})}_applyBackdropOptions(e,n){this._backdropAttributes.forEach(r=>{ds(n[r])&&(e[r]=n[r])})}_getContentRef(e,n,r,a,o){return r?r instanceof Fn?this._createFromTemplateRef(r,a):function zD(t){return"string"==typeof t}(r)?this._createFromString(r):this._createFromComponent(e,n,r,a,o):new gs([])}_createFromTemplateRef(e,n){const a=e.createEmbeddedView({$implicit:n,close(o){n.close(o)},dismiss(o){n.dismiss(o)}});return this._applicationRef.attachView(a),new gs([a.rootNodes],a)}_createFromString(e){const n=this._document.createTextNode(`${e}`);return new gs([[n]])}_createFromComponent(e,n,r,a,o){const s=e.resolveComponentFactory(r),l=ai.create({providers:[{provide:yR,useValue:a}],parent:n}),c=s.create(l),u=c.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new gs([[u]],c.hostView,c)}_setAriaHidden(e){const n=e.parentElement;n&&e!==this._document.body&&(Array.from(n.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(n))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,n)=>{e?n.setAttribute("aria-hidden",e):n.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const n=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(n,n)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const n=this._windowCmpts.indexOf(e);n>-1&&(this._windowCmpts.splice(n,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(Ve(es),Ve(ai),Ve(hi),Ve(f6),Ve(jg),Ve(xn))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),g6=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Ve(wu))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),lo=(()=>{class t{constructor(e,n,r,a){this._moduleCFR=e,this._injector=n,this._modalStack=r,this._config=a}open(e,n={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),n);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(Ve(Zo),Ve(ai),Ve(p6),Ve(g6))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),CR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({providers:[lo]}),t})(),DR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr]]}),t})(),IR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr]]}),t})();class C6{constructor(i,e){this.open=i,this.close=e,e||(this.close=i)}isManual(){return"manual"===this.open||"manual"===this.close}}const w6={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},OR=t=>t>0?RD(t):i=>i;let x6=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Ve(wu))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),M6=0;function k6(t){return t.modifiers.push(J5,{name:"offset",options:{offset:()=>[0,12]}}),t}let A6=(()=>{class t{isTitleTemplate(){return this.title instanceof Fn}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=lt({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,n){2&e&&(Do("id",n.id),To("popover"+(n.popoverClass?" "+n.popoverClass:"")),bt("fade",n.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:c0,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Vd(),x(0,"div",0),M(1,r8,4,2,"h3",1),f(2,"div",2),Fd(3),h()),2&e&&(p(1),b("ngIf",n.title))},directives:[en,_l],encapsulation:2,changeDetection:0}),t})(),Or=(()=>{class t{constructor(e,n,r,a,o,s,l,c,u){this._elementRef=e,this._renderer=n,this._ngZone=s,this._document=l,this._changeDetector=c,this.shown=new nt,this.hidden=new nt,this._ngbPopoverWindowId="ngb-popover-"+M6++,this._windowRef=null,this._positioning=dR(),this.animation=o.animation,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disablePopover=o.disablePopover,this.popoverClass=o.popoverClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new c6(A6,r,a,n,this._ngZone,u),this._zoneSubscription=s.onStable.subscribe(()=>{this._positioning.update()})}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:n,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=n,this._windowRef.instance.animation=this.animation,this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(ki(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:k6})}),oR(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function R6(t,i,e,n,r,a,o=0,s=0){const l=function S6(t,i=w6){const e=(t||"").trim();if(0===e.length)return[];const n=e.split(/\s+/).map(a=>a.split(":")).map(a=>{let o=i[a[0]]||a;return new C6(o[0],o[1])}),r=n.filter(a=>a.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return n}(e);if(1===l.length&&l[0].isManual())return()=>{};const c=function T6(t,i,e,n){return new Oe(r=>{const a=[],o=()=>r.next(!0),s=()=>r.next(!1),l=()=>r.next(!n());return e.forEach(c=>{c.open===c.close?a.push(t.listen(i,c.open,l)):a.push(t.listen(i,c.open,o),t.listen(i,c.close,s))}),()=>{a.forEach(c=>c())}})}(t,i,l,n).pipe(function D6(t,i,e){return n=>{let r=null;const a=n.pipe(Mt(l=>({open:l})),Vi(l=>{const c=e();return c===l.open||r&&r.open!==c?(r&&r.open!==l.open&&(r=null),!1):(r=l,!0)}),Q0());return Y0(a.pipe(Vi(l=>l.open),OR(t)),a.pipe(Vi(l=>!l.open),OR(i))).pipe(Vi(l=>l===r&&(r=null,l.open!==e())),Mt(l=>l.open))}}(o,s,n)).subscribe(u=>u?r():a());return()=>c.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:n,disablePopover:r,popoverClass:a}){a&&this.isOpen()&&(this._windowRef.instance.popoverClass=a.currentValue),(e||n||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(gn),P(zr),P(ai),P($r),P(x6),P(xn),P(hi),P(Mr),P(es))},t.\u0275dir=Ue({type:t,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[Pi]}),t})(),NR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr]]}),t})(),P6=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),S0=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!Ga(e)||e<=0?100:e}get max(){return this._max}getValue(){return function jD(t,i,e=0){return Math.max(Math.min(t,i),e)}(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(P(P6))},t.\u0275cmp=lt({type:t,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(e,n){2&e&&Mc("height",n.height)},inputs:{max:"max",animated:"animated",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},ngContentSelectors:c0,decls:3,vars:11,consts:function(){let i;return i=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],i]},template:function(e,n){1&e&&(Vd(),f(0,"div",0),M(1,a8,3,3,"span",1),Fd(2),h()),2&e&&(function Ey(t,i,e,n,r,a,o,s,l){la(Tr,Oa,rl(De(),t,i,e,n,r,a,o,s,l),!0)}("progress-bar",n.type?" bg-"+n.type:"","",n.textType?" text-"+n.textType:"","\n    ",n.animated?" progress-bar-animated":"","",n.striped?" progress-bar-striped":"",""),Mc("width",n.getPercentValue(),"%"),_n("aria-valuenow",n.getValue())("aria-valuemax",n.max),p(1),b("ngIf",n.showValue))},directives:[en],pipes:[Hw],encapsulation:2,changeDetection:0}),t})(),VR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr]]}),t})(),FR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr]]}),t})(),BR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr]]}),t})(),LR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr]]}),t})(),UR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({}),t})();new Gt("live announcer delay",{providedIn:"root",factory:function O6(){return 100}});let HR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[[mr]]}),t})();const N6=[KD,ZD,eR,iR,rR,vR,_R,CR,DR,IR,NR,VR,FR,BR,LR,UR,HR];let V6=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t}),t.\u0275inj=fn({imports:[N6,KD,ZD,eR,iR,rR,vR,_R,CR,DR,IR,NR,VR,FR,BR,LR,UR,HR]}),t})();function F6(t,i){if(1&t){const e=fe();f(0,"div",1),N("click",function(){B(e);const r=C();return r.switchView(r.navigationEnum.incubator)}),f(1,"button",2),g(2,"Incubator"),h(),x(3,"hr"),h()}if(2&t){const e=C();p(1),b("ngClass",e.selectedNavigation===e.navigationEnum.incubator?"active":"")}}const GR=function(t,i){return{active:t,tutorialActive:i}};let jR=(()=>{class t{constructor(e,n,r,a){this.componentCommunicationService=e,this.lookupService=n,this.globalService=r,this.gameLoopService=a,this.viewChanged=new nt,this.navigationEnum=ft,this.selectedNavigation=0,this.tutorial3Active=!1,this.tutorial6Active=!1}ngOnInit(){this.componentCommunicationService.getNewView().subscribe(e=>{this.viewChanged.emit(e),this.selectedNavigation=e}),this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack"),this.tutorialSubscription=this.gameLoopService.gameUpdateEvent.subscribe(e=>{var n;this.tutorial3Active=!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId,this.tutorial6Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||6!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(n=this.globalService.globalVar.animals.find(r=>r.type===X.Monkey))||void 0===n?void 0:n.isAvailable)),this.globalService.globalVar.tutorials.tutorialCompleted&&this.tutorialSubscription.unsubscribe()})}switchView(e){this.selectedNavigation===ft.shop&&this.componentCommunicationService.setShopView(ft.shop,La.regular),this.selectedNavigation===ft.barn&&this.componentCommunicationService.setBarnView(ft.barn,0),this.selectedNavigation===ft.animals&&this.componentCommunicationService.setAnimalView(ft.animals,new wt),this.viewChanged.emit(e),this.selectedNavigation=e,this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack")}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0)}}return t.\u0275fac=function(e){return new(e||t)(P(qn),P(hn),P(St),P(mi))},t.\u0275cmp=lt({type:t,selectors:[["app-navigation"]],outputs:{viewChanged:"viewChanged"},decls:33,vars:15,consts:[[1,"navigation"],[1,"navSpace","clickableText",3,"click"],[1,"buttonAsText",3,"ngClass"],["class","navSpace clickableText",3,"click",4,"ngIf"],[1,"navSpace","clickableText"],[1,"buttonAsText",3,"ngClass","click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1),N("click",function(){return n.switchView(n.navigationEnum.barn)}),f(2,"button",2),g(3,"Barns"),h()(),x(4,"hr"),f(5,"div",1),N("click",function(){return n.switchView(n.navigationEnum.raceselection)}),f(6,"button",2),g(7,"Races"),h()(),x(8,"hr"),f(9,"div",1),N("click",function(){return n.switchView(n.navigationEnum.animals)}),f(10,"button",2),g(11,"Animals"),h()(),x(12,"hr"),f(13,"div",1),N("click",function(){return n.switchView(n.navigationEnum.relayTeams)}),f(14,"button",2),g(15,"Relay Teams"),h()(),x(16,"hr"),f(17,"div",1),N("click",function(){return n.switchView(n.navigationEnum.shop)}),f(18,"button",2),g(19,"Shop"),h()(),x(20,"hr"),M(21,F6,4,1,"div",3),f(22,"div",4)(23,"button",5),N("click",function(){return n.switchView(n.navigationEnum.resources)}),g(24,"Resources"),h()(),x(25,"hr"),f(26,"div",1),N("click",function(){return n.switchView(n.navigationEnum.settings)}),f(27,"button",2),g(28,"Settings"),h()(),x(29,"hr"),f(30,"div",1),N("click",function(){return n.switchView(n.navigationEnum.stats)}),f(31,"button",2),g(32,"Stats"),h()()()),2&e&&(p(2),b("ngClass",Jo(9,GR,n.selectedNavigation===n.navigationEnum.barn,n.tutorial6Active)),p(4),b("ngClass",Jo(12,GR,n.selectedNavigation===n.navigationEnum.raceselection,n.tutorial3Active)),p(4),b("ngClass",n.selectedNavigation===n.navigationEnum.animals?"active":""),p(4),b("ngClass",n.selectedNavigation===n.navigationEnum.relayTeams?"active":""),p(4),b("ngClass",n.selectedNavigation===n.navigationEnum.shop?"active":""),p(3),b("ngIf",n.incubatorAvailable),p(2),b("ngClass",n.selectedNavigation===n.navigationEnum.resources?"active":""),p(4),b("ngClass",n.selectedNavigation===n.navigationEnum.settings?"active":""),p(4),b("ngClass",n.selectedNavigation===n.navigationEnum.stats?"active":""))},directives:[Bn,en],styles:[".navigation[_ngcontent-%COMP%]{height:100%;border-left:1px solid rgba(0,0,0,.1);padding-left:1rem;padding-top:1rem;background-color:var(--background-secondary);color:var(--foreground-default)}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}"]}),t})();function B6(t,i){if(1&t&&x(0,"div",15),2&t){const e=C();b("innerHTML",e.getSanitizedHtml(e.latestVersionChanges),jt)}}function L6(t,i){if(1&t&&(f(0,"div")(1,"div",24)(2,"span",25),g(3),At(4,"number"),h(),f(5,"span"),g(6),h()(),x(7,"br")(8,"div",26),f(9,"span"),x(10,"hr"),h()()),2&t){const e=i.$implicit,n=i.index,r=C(3);p(3),Q("Version ",Jt(4,3,r.allVersions[n],"1.2-2"),""),p(3),Q(" ",r.versionControlService.getDateForVersion(r.allVersions[n]),""),p(2),b("innerHTML",r.getSanitizedHtml(e),jt)}}function U6(t,i){if(1&t&&(f(0,"div")(1,"div",21)(2,"div",22),M(3,L6,11,6,"div",23),h()()()),2&t){const e=C(2);p(3),b("ngForOf",e.changeLog)}}function H6(t,i){if(1&t){const e=fe();f(0,"div",16)(1,"div",17)(2,"h4",18),g(3,"Change Log"),h(),f(4,"button",19),N("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),M(6,U6,4,1,"div",20),h()}if(2&t){const e=C();p(6),b("ngIf",e.changeLog.length>0)}}let G6=(()=>{class t{constructor(e,n,r,a,o,s,l){this.lookupService=e,this.gameLoopService=n,this.globalService=r,this.componentCommunicationService=a,this.versionControlService=o,this.modalService=s,this.sanitizer=l}ngOnInit(){this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.latestVersionChanges=this.versionControlService.getLatestChanges(),this.changeLog=this.versionControlService.getAllChanges(),this.allVersions=this.versionControlService.gameVersions,this.gameLoopService.gameUpdateEvent.subscribe(e=>{this.globalService.globalVar.userIsRacing||(this.coinCount=this.lookupService.getCoins(),this.medalCount=this.lookupService.getMedals())})}getSanitizedHtml(e){return this.sanitizer.sanitize(Kt.HTML,this.sanitizer.bypassSecurityTrustHtml(e))}changeView(e){this.componentCommunicationService.setNewView(e)}openChangeLog(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}}return t.\u0275fac=function(e){return new(e||t)(P(hn),P(mi),P(St),P(qn),P(Qv),P(lo),P(Mo))},t.\u0275cmp=lt({type:t,selectors:[["app-header"]],decls:26,vars:8,consts:[[1,"headerView"],[1,"gridContainer"],[1,"nameArea","keyword"],[1,"name"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"version","versionMargin","clickableText",3,"ngbPopover","click"],[1,"coins","keyword"],[1,"medals","keyword"],[1,"menu","keyword"],["ngbDropdown","",1,"d-inline-block","customDropdown"],["menuDropdown","ngbDropdown"],["type","button","id","menuDropdown","ngbDropdownToggle","",1,"btn","dropdown"],["ngbDropdownMenu","","aria-labelledby","menuDropdown",1,"dropdownItems"],[3,"viewChanged","click"],["latestVersionChangesContent",""],["content",""],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[4,"ngIf"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],[1,"flexDiv"],[1,"s4Heading"],[3,"innerHTML"]],template:function(e,n){if(1&e){const r=fe();f(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),g(4," Cultura "),h(),f(5,"span",4),N("click",function(){B(r);const o=it(25);return n.openChangeLog(o)}),g(6),h()(),f(7,"div",5)(8,"span"),g(9),At(10,"number"),h()(),f(11,"div",6)(12,"span"),g(13),At(14,"number"),h()(),f(15,"div",7)(16,"div",8,9)(18,"button",10),g(19,"Menu"),h(),f(20,"div",11)(21,"app-navigation",12),N("viewChanged",function(o){return n.changeView(o)})("click",function(){return B(r),it(17).close()}),h()()()()(),M(22,B6,1,1,"ng-template",null,13,rt),M(24,H6,7,1,"ng-template",null,14,rt),h()}if(2&e){const r=it(23);p(5),b("ngbPopover",r),p(1),Q(" v",n.version," "),p(3),Q("Coins: ",Wd(10,4,n.coinCount),""),p(4),Q("Medals: ",Wd(14,6,n.medalCount),"")}},directives:[Or,Ll,_0,_f,jR,en,jn],pipes:[no],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name . coins ." ". name . medals ."}.nameArea[_ngcontent-%COMP%]{grid-area:name;justify-self:stretch}.name[_ngcontent-%COMP%]{font-size:2rem}.coins[_ngcontent-%COMP%]{grid-area:coins;justify-self:stretch}.medals[_ngcontent-%COMP%]{grid-area:medals;justify-self:stretch}.versionMargin[_ngcontent-%COMP%]{margin-left:.5rem}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}.dropdownItems[_ngcontent-%COMP%]{background-color:var(--background-secondary);color:var(--foreground-default)}.menu[_ngcontent-%COMP%]{display:none}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre-line}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.flexDiv[_ngcontent-%COMP%]{display:flex;justify-content:space-between}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 15% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name coins menu ." ". name medals menu ."}.menu[_ngcontent-%COMP%]{display:block;grid-area:menu;justify-self:stretch}.customDropdown[_ngcontent-%COMP%]{width:100%;text-align:center}}']}),t})();function j6(t,i){if(1&t&&(f(0,"h6",9)(1,"span"),g(2),h(),x(3,"br"),f(4,"span"),g(5),h()()),2&t){const e=C(2);b("ngClass",e.colorConditional),p(2),Ze(e.associatedAnimalName),p(3),Ze(e.associatedAnimalType)}}function z6(t,i){if(1&t&&(f(0,"h6",9)(1,"span"),g(2),h()()),2&t){const e=C(2);b("ngClass",e.colorConditional),p(2),Ze(e.associatedAnimalType)}}function $6(t,i){1&t&&(f(0,"div")(1,"em"),g(2,"Ready to Breed"),h()())}const q6=function(t){return{floatingProgressTextAnimation:t}};function W6(t,i){if(1&t&&(f(0,"div",4)(1,"span"),g(2),h(),M(3,j6,6,3,"h6",5),M(4,z6,3,2,"h6",5),x(5,"br"),f(6,"p"),x(7,"ngb-progressbar",6),h(),f(8,"div",7),g(9),h(),x(10,"br"),M(11,$6,3,0,"div",8),h()),2&t){const e=C();p(2),Ze(e.barnName),p(1),b("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),b("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(3),b("value",e.trainingProgressBarPercent),p(1),b("ngClass",Jn(7,q6,e.showTrainingAnimation)),p(1),Q(" ",e.trainingCompleteText," "),p(2),b("ngIf",e.readyToBreed)}}function X6(t,i){1&t&&(f(0,"h6",10)(1,"span"),g(2,"Unassigned"),h(),x(3,"br"),f(4,"em"),g(5,"Click to assign animal"),h()())}function Y6(t,i){1&t&&(f(0,"h6",11)(1,"span"),g(2,"Locked"),h(),x(3,"br"),f(4,"em"),g(5,"Click to view status"),h()())}let Q6=(()=>{class t{constructor(e,n,r){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.trainingCompleteText="",this.showTrainingAnimation=!1,this.selectedBarn=new nt}ngOnInit(){if(this.barnNumber>0&&this.barnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.barnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e);var n=this.globalService.globalVar.animals.find(r=>r.associatedBarnNumber==this.barnNumber);null!=n?(this.isOccupied=!0,this.associatedAnimalName=n.name,this.associatedAnimalType=X[n.type],this.associatedAnimal=n,this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()}):this.isOccupied=!1,this.isLocked=e.isLocked}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.isLocked||(this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.barnNumber);if(null!=a){if(null==a.currentTraining)return void(this.trainingProgressBarPercent=0);a.currentTraining.timeTrained<this.previousTrainedAmount&&(this.trainingCompleteText=this.lookupService.getTrainingProgressionAnimationText(a.currentTraining),this.showTrainingAnimation=!0,setTimeout(()=>{this.showTrainingAnimation=!1,this.trainingCompleteText=""},3e3)),this.readyToBreed=a.breedGaugeXp>=a.breedGaugeMax,this.previousTrainedAmount=a.currentTraining.timeTrained,this.trainingProgressBarPercent=a.currentTraining.timeTrained/a.currentTraining.timeToComplete*100}}))}ngOnDestroy(){this.previousTrainedAmount=0,null!=this.subscription&&this.subscription.unsubscribe()}onClick(){this.selectedBarn.emit(this.barnNumber)}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(mi),P(hn))},t.\u0275cmp=lt({type:t,selectors:[["app-barn"]],hostBindings:function(e,n){1&e&&N("click",function(){return n.onClick()})},inputs:{barnNumber:"barnNumber"},outputs:{selectedBarn:"selectedBarn"},decls:4,vars:3,consts:[[1,"barn","clickableText"],["class","unlocked",4,"ngIf"],["class","unassigned",4,"ngIf"],["class","locked",4,"ngIf"],[1,"unlocked"],["class","keyword",3,"ngClass",4,"ngIf"],["type","success",3,"value"],[1,"progressBar","floatingProgressText","progressBarColor","keyword",3,"ngClass"],[4,"ngIf"],[1,"keyword",3,"ngClass"],[1,"unassigned"],[1,"locked"]],template:function(e,n){1&e&&(f(0,"div",0),M(1,W6,12,9,"div",1),M(2,X6,6,0,"h6",2),M(3,Y6,6,0,"h6",3),h()),2&e&&(p(1),b("ngIf",n.isOccupied),p(1),b("ngIf",!n.isOccupied&&!n.isLocked),p(1),b("ngIf",n.isLocked))},directives:[en,Bn,S0],styles:[".barn[_ngcontent-%COMP%]{text-align:center;width:45%;margin:auto;display:flex;justify-content:center;align-content:center;flex-direction:column;height:100%}.floatingProgressText[_ngcontent-%COMP%]{float:right;position:relative;text-align:right;top:-2em}.floatingProgressTextAnimation[_ngcontent-%COMP%]{animation-name:floatingProgressTextAnimation;animation-duration:3s;animation-iteration-count:1;animation-timing-function:ease-in-out}@keyframes floatingProgressTextAnimation{0%{transform:translate(0)}to{transform:translateY(-30px);opacity:0}}@media (max-width: 800px){.barn[_ngcontent-%COMP%]{width:75%}}"]}),t})(),K6=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=lt({type:t,selectors:[["app-training-option"]],inputs:{trainingOption:"trainingOption"},decls:7,vars:4,consts:[[1,"training"],[1,"trainingName","keyword"],[1,"trainingStats"],[1,"trainingTimeToComplete"]],template:function(e,n){1&e&&(f(0,"h6",0)(1,"p",1),g(2),h(),f(3,"p",2),g(4),h(),f(5,"p",3),g(6),h()()),2&e&&(p(2),Ze(n.trainingOption.trainingName),p(2),Ze(n.trainingOption.getStatGainDescription()),p(2),Kn("",n.trainingOption.getFacilitySize()," - ",n.trainingOption.timeToComplete," sec "))},styles:[".training[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const Z6=function(t){return{activeTrainingOption:t}};function J6(t,i){if(1&t){const e=fe();f(0,"td",4)(1,"div",5),N("click",function(){const a=B(e).$implicit;return C(2).selectTrainingOption(a)}),x(2,"app-training-option",6),h()()}if(2&t){const e=i.$implicit;p(1),b("ngClass",Jn(2,Z6,e.isSelected)),p(1),b("trainingOption",e)}}function eU(t,i){if(1&t&&(f(0,"tr"),M(1,J6,3,4,"td",3),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}let tU=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrainingOption=new nt}ngOnInit(){this.setupDisplayTrainings()}setupDisplayTrainings(){this.trainingsCells=[],this.trainingsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableTrainingOptions.length;n++)this.trainingsCells.push(this.availableTrainingOptions[n-1]),n%e==0&&(this.trainingsRows.push(this.trainingsCells),this.trainingsCells=[]);0!==this.trainingsCells.length&&this.trainingsRows.push(this.trainingsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrainingOption(e){this.availableTrainingOptions.forEach(n=>{n.isSelected=!1}),e.isSelected=!0,this.selectedTrainingOption.emit(e)}ngOnChanges(e){this.availableTrainingOptions=e.availableTrainingOptions.currentValue,this.setupDisplayTrainings()}}return t.\u0275fac=function(e){return new(e||t)(P(St))},t.\u0275cmp=lt({type:t,selectors:[["app-training-list"]],hostBindings:function(e,n){1&e&&N("resize",function(a){return n.onResize(a)},!1,Ya)},inputs:{availableTrainingOptions:"availableTrainingOptions"},outputs:{selectedTrainingOption:"selectedTrainingOption"},features:[Pi],decls:4,vars:1,consts:[[1,"trainingsView"],[1,"trainings"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trainingOption"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),M(3,eU,2,1,"tr",2),h()()()),2&e&&(p(3),b("ngForOf",n.trainingsRows))},directives:[jn,Bn,K6],styles:[".trainingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.trainings[_ngcontent-%COMP%]{margin:.5rem}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function nU(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=C(2);p(1),Ze(e.selectedAnimal.name)}}function iU(t,i){if(1&t&&(f(0,"h6",3),M(1,nU,2,1,"span",2),x(2,"br"),f(3,"span"),g(4),h()()),2&t){const e=C();p(1),b("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),Ze(e.selectedAnimal.getAnimalType())}}function rU(t,i){if(1&t&&(f(0,"h6",3)(1,"span"),g(2),h()()),2&t){const e=C();p(2),Ze(e.selectedAnimal.getAnimalType())}}function aU(t,i){if(1&t&&(f(0,"div"),x(1,"br")(2,"br"),f(3,"h6",3)(4,"em"),g(5),h()()()),2&t){const e=C();p(5),Kn("",e.trainingTrackRewardsRemaining," / ",e.trainingTrackTotalRewards," rewards remaining")}}let oU=(()=>{class t{constructor(){this.isTrainingTrackView=!1,this.trainingTrackRewardsRemaining=0,this.trainingTrackTotalRewards=0}ngOnInit(){this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.isTrainingTrackView&&(this.trainingTrackRewardsRemaining=this.selectedAnimal.allTrainingTracks.getTotalRewardsRemaining(),this.trainingTrackTotalRewards=this.selectedAnimal.allTrainingTracks.getTotalRewardCount())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=lt({type:t,selectors:[["app-animal"]],inputs:{selectedAnimal:"selectedAnimal",isTrainingTrackView:"isTrainingTrackView"},decls:8,vars:5,consts:[[1,"keyword","animal",3,"ngClass"],["class","keyword",4,"ngIf"],[4,"ngIf"],[1,"keyword"]],template:function(e,n){1&e&&(f(0,"div",0),M(1,iU,5,2,"h6",1),M(2,rU,3,1,"h6",1),x(3,"br")(4,"br"),f(5,"span"),g(6),h(),M(7,aU,6,2,"div",2),h()),2&e&&(b("ngClass",n.colorConditional),p(1),b("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),p(1),b("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),p(4),Ze(n.selectedAnimal.getRaceCourseType()),p(1),b("ngIf",n.isTrainingTrackView))},directives:[Bn,en],styles:[".animal[_ngcontent-%COMP%]{margin:.5rem}"]}),t})();function sU(t,i){if(1&t){const e=fe();f(0,"td")(1,"div",3),N("click",function(){const a=B(e).$implicit;return C(2).selectAnimal(a)}),x(2,"app-animal",4),h()()}if(2&t){const e=i.$implicit,n=C(2);p(2),b("selectedAnimal",e)("isTrainingTrackView",n.isTrainingTrackView)}}function lU(t,i){if(1&t&&(f(0,"tr"),M(1,sU,3,2,"td",2),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}let Cf=(()=>{class t{constructor(e){this.globalService=e,this.isTrainingTrackView=!1,this.selectedAnimal=new nt}ngOnInit(){this.setupDisplayAnimals()}setupDisplayAnimals(){this.animalCells=[],this.animalRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableAnimals.length;n++)this.animalCells.push(this.availableAnimals[n-1]),n%e==0&&(this.animalRows.push(this.animalCells),this.animalCells=[]);0!==this.animalCells.length&&this.animalRows.push(this.animalCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectAnimal(e){this.selectedAnimal.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(P(St))},t.\u0275cmp=lt({type:t,selectors:[["app-animal-list"]],hostBindings:function(e,n){1&e&&N("resize",function(a){return n.onResize(a)},!1,Ya)},inputs:{availableAnimals:"availableAnimals",isTrainingTrackView:"isTrainingTrackView"},outputs:{selectedAnimal:"selectedAnimal"},decls:4,vars:1,consts:[[1,"animalsView"],[1,"animals"],[4,"ngFor","ngForOf"],[1,"clickableText",3,"click"],[3,"selectedAnimal","isTrainingTrackView"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),M(3,lU,2,1,"tr",2),h()()()),2&e&&(p(3),b("ngForOf",n.animalRows))},directives:[jn,oU],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();const cU=["specializationModal"];function uU(t,i){if(1&t){const e=fe();f(0,"div")(1,"span",38),N("click",function(){B(e);const r=C(2),a=it(16);return r.openBarnUpgradeModal(a)}),g(2),h(),x(3,"br")(4,"br"),f(5,"span",39)(6,"button",40),N("click",function(){return B(e),C(2).upgradeBarn()}),g(7),h()()()}if(2&t){const e=C(2),n=it(4),r=it(6);p(1),b("ngbPopover",n),p(1),Q("Barn Level ",e.barn.barnUpgrades.barnLevel,""),p(3),b("ngbPopover",r),p(1),b("disabled",!e.canUpgrade),p(1),Ze(e.upgradeText)}}function dU(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=C(3);p(1),Ze(e.associatedAnimal.name)}}function hU(t,i){if(1&t){const e=fe();f(0,"button",41),N("click",function(){return B(e),C(2).goToAnimal()}),M(1,dU,2,1,"span",13),x(2,"br"),f(3,"span"),g(4),h()()}if(2&t){const e=C(2);b("ngClass",e.colorConditional),p(1),b("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(3),Ze(e.associatedAnimal.getAnimalType())}}function fU(t,i){if(1&t){const e=fe();f(0,"button",42),N("click",function(){return B(e),C(2).goToAnimal()}),f(1,"span"),g(2),h()()}if(2&t){const e=C(2);b("ngClass",e.colorConditional),p(2),Ze(e.associatedAnimal.getAnimalType())}}function pU(t,i){if(1&t){const e=fe();f(0,"span",39)(1,"button",43),N("click",function(){return B(e),C(2).upgradeBarnSize()}),g(2,"Build"),h()()}if(2&t){const e=C(2);b("ngbPopover",it(8)),p(1),b("disabled",!e.canBuild)}}function gU(t,i){if(1&t&&(f(0,"div",39)(1,"span",44),g(2),h(),x(3,"br"),f(4,"span")(5,"em"),g(6),At(7,"number"),h()()()),2&t){const e=C(2);b("ngbPopover",it(10)),p(2),Q("",e.existingTraining.trainingName," "),p(4),Q("(",Jt(7,3,e.existingTraining.trainingTimeRemaining/60,"1.0-0")," min remaining)")}}function mU(t,i){1&t&&(f(0,"div",39)(1,"span"),g(2,"No Training Assigned"),h()()),2&t&&(C(2),b("ngbPopover",it(12)))}function vU(t,i){if(1&t){const e=fe();f(0,"div")(1,"span")(2,"button",12),N("click",function(){return B(e),C(2).goToCoaching()}),g(3,"Coach"),h()()()}}function bU(t,i){if(1&t&&(f(0,"div"),x(1,"br"),f(2,"p",45),x(3,"ngb-progressbar",46),f(4,"span",47),g(5),At(6,"number"),h()(),x(7,"br"),h()),2&t){const e=C(2);p(3),b("value",e.trainingProgressBarPercent),p(2),Q("",Jt(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}function _U(t,i){if(1&t){const e=fe();f(0,"app-training-list",48),N("selectedTrainingOption",function(r){return B(e),C(2).selectNewTraining(r)}),h()}2&t&&b("availableTrainingOptions",C(2).availableTrainings)}function yU(t,i){1&t&&(f(0,"div",49),g(1," This animal is currently busy and cannot train. "),h())}const CU=function(t){return{sizeSpacing:t}};function wU(t,i){if(1&t){const e=fe();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"button",12),N("click",function(){return B(e),C().unassignAnimal()}),g(5,"Unassign"),h(),x(6,"br")(7,"br"),M(8,uU,8,5,"div",13),h(),f(9,"div",14)(10,"span"),g(11),h(),x(12,"br"),M(13,hU,5,3,"button",15),M(14,fU,3,2,"button",16),f(15,"div")(16,"span",17),g(17),h(),M(18,pU,3,2,"span",18),h(),x(19,"hr"),M(20,gU,8,6,"div",18),M(21,mU,3,1,"div",18),h(),f(22,"div",19)(23,"button",12),N("click",function(){return B(e),C().returnToBarnView()}),g(24,"Back"),h(),x(25,"br")(26,"br")(27,"br")(28,"br"),M(29,vU,4,0,"div",13),h()(),x(30,"hr"),M(31,bU,8,5,"div",13),x(32,"br"),f(33,"div",20)(34,"span",21),N("click",function(){return B(e),C().resetFilters()}),g(35,"Change Training"),h(),x(36,"br"),f(37,"span",22)(38,"em"),g(39,"Click an option below to start training."),h()()(),x(40,"br"),f(41,"div",23)(42,"div",24)(43,"button",25),N("click",function(){return B(e),C().toggleFacilityFilter("Small")}),g(44,"Small "),h(),f(45,"button",26),N("click",function(){return B(e),C().toggleFacilityFilter("Medium")}),g(46,"Medium "),h(),f(47,"button",27),N("click",function(){return B(e),C().toggleFacilityFilter("Large")}),g(48,"Large "),h()(),f(49,"button",28)(50,"span",12),N("click",function(){return B(e),C().resetFilters()}),g(51,"Reset Filters"),h()(),f(52,"div",29)(53,"button",30),N("click",function(){return B(e),C().toggleStatFilter("Speed")}),g(54,"SPD "),h(),f(55,"button",31),N("click",function(){return B(e),C().toggleStatFilter("Acceleration")}),g(56,"ACC "),h(),f(57,"button",32),N("click",function(){return B(e),C().toggleStatFilter("Endurance")}),g(58,"END "),h(),f(59,"button",33),N("click",function(){return B(e),C().toggleStatFilter("Power")}),g(60,"PWR "),h(),f(61,"button",34),N("click",function(){return B(e),C().toggleStatFilter("Focus")}),g(62,"FCS "),h(),f(63,"button",35),N("click",function(){return B(e),C().toggleStatFilter("Adaptability")}),g(64,"ADP"),h()()(),x(65,"br"),f(66,"div",17),M(67,_U,1,1,"app-training-list",36),M(68,yU,2,0,"div",37),h()()()}if(2&t){const e=C();p(8),b("ngIf",e.barnSpecializationsUnlocked),p(3),Q(" ",e.barnName,""),p(2),b("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),b("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(2),b("ngClass",Jn(32,CU,"Large"!==e.sizeValue)),p(1),Q("",e.sizeValue," "),p(1),b("ngIf","Large"!==e.sizeValue),p(2),b("ngIf",null!=e.existingTraining),p(1),b("ngIf",null==e.existingTraining),p(8),b("ngIf",e.coachingUnlocked),p(2),b("ngIf",null!=e.existingTraining),p(12),bt("filterActive",e.filterSmall),p(2),bt("filterActive",e.filterMedium),p(2),bt("filterActive",e.filterLarge),p(6),bt("filterActive",e.filterSpeed),p(2),bt("filterActive",e.filterAcceleration),p(2),bt("filterActive",e.filterEndurance),p(2),bt("filterActive",e.filterPower),p(2),bt("filterActive",e.filterFocus),p(2),bt("filterActive",e.filterAdaptability),p(3),b("ngClass",e.tutorialActive?"tutorialActive":""),p(1),b("ngIf",e.associatedAnimal.canTrain),p(1),b("ngIf",!e.associatedAnimal.canTrain)}}function SU(t,i){if(1&t){const e=fe();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",14)(4,"span"),g(5),h(),x(6,"br"),f(7,"span"),g(8,"Unassigned"),h()(),f(9,"div",19)(10,"button",12),N("click",function(){return B(e),C().returnToBarnView()}),g(11,"Back"),h()()(),x(12,"hr")(13,"br"),f(14,"span"),g(15,"Assign Animal"),h(),x(16,"br")(17,"br"),f(18,"app-animal-list",50),N("selectedAnimal",function(r){return B(e),C().assignAnimal(r)}),h()()()}if(2&t){const e=C();p(5),Q("Barn ",e.selectedBarnNumber,""),p(13),b("availableAnimals",e.availableAnimals)}}function TU(t,i){if(1&t){const e=fe();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",14)(4,"span"),g(5),h(),x(6,"br"),f(7,"span"),g(8,"Locked"),h()(),f(9,"div",19)(10,"button",12),N("click",function(){return B(e),C().returnToBarnView()}),g(11,"Back"),h()()(),x(12,"hr")(13,"br"),f(14,"div",51)(15,"span"),g(16,"Purchase Barn"),h(),x(17,"br")(18,"br"),f(19,"span",52),g(20),h(),x(21,"br"),f(22,"button",53),N("click",function(){return B(e),C().purchaseBarn()}),g(23,"Buy"),h()()()()}if(2&t){const e=C();p(5),Q("Barn ",e.selectedBarnNumber,""),p(15),Q("",e.barn.purchasePrice," Coins"),p(2),b("disabled",!e.canPurchaseBarn())}}function DU(t,i){if(1&t&&(f(0,"div",55),x(1,"div",56),h()),2&t){const e=C(2);p(1),b("innerHTML",e.totalBarnStatsPopover,jt)}}function RU(t,i){1&t&&M(0,DU,2,1,"div",54),2&t&&b("ngIf",""!==C().totalBarnStatsPopover)}function xU(t,i){if(1&t&&(f(0,"div",55),g(1),h()),2&t){const e=C(2);p(1),Q(" ",e.upgradeBarnPopover," ")}}function MU(t,i){1&t&&M(0,xU,2,1,"div",54),2&t&&b("ngIf",""!==C().upgradeBarnPopover)}function kU(t,i){if(1&t&&(f(0,"div",55),g(1),h()),2&t){const e=C(2);p(1),Q(" ",e.buildBiggerBarnPopover," ")}}function AU(t,i){1&t&&M(0,kU,2,1,"div",54),2&t&&b("ngIf",""!==C().buildBiggerBarnPopover)}function PU(t,i){1&t&&x(0,"div",58),2&t&&b("innerHTML",C(2).currentTrainingPopover,jt)}function EU(t,i){1&t&&M(0,PU,1,1,"div",57),2&t&&b("ngIf",""!==C().currentTrainingPopover)}function IU(t,i){1&t&&x(0,"div",58),2&t&&b("innerHTML",C(2).currentTrainingPopover,jt)}function OU(t,i){1&t&&M(0,IU,1,1,"div",57),2&t&&b("ngIf",""!==C().currentTrainingPopover)}const zR=function(t){return{selectedSpecialization:t}};function NU(t,i){if(1&t){const e=fe();f(0,"span",69),N("click",function(){const a=B(e).$implicit;return C(3).filterSpecialization(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=C(3);b("ngClass",Jn(2,zR,n.selectedSpecialization===e)),p(1),Q(" ",e.trim()," ")}}function VU(t,i){if(1&t&&(f(0,"div",67),M(1,NU,2,4,"span",68),h()),2&t){const e=C(2);p(1),b("ngForOf",e.specializationOptions)}}function FU(t,i){if(1&t&&(f(0,"div"),g(1),x(2,"br")(3,"br"),f(4,"strong"),g(5),h()()),2&t){const e=C(2);p(1),Q(" ",e.specializationDescription," "),p(4),Q(" ",e.inDepthSpecializationDescription," ")}}function BU(t,i){if(1&t){const e=fe();f(0,"div",59)(1,"form")(2,"div",60)(3,"h4",61),g(4,"Choose Barn Specialization"),h(),f(5,"button",62),N("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div",63),M(8,VU,2,1,"div",64),x(9,"hr"),M(10,FU,6,2,"div",13),h(),f(11,"div",65)(12,"button",66),N("click",function(){return B(e),C().selectSpecialization()}),g(13,"Select"),h()()()()}if(2&t){const e=C();p(8),b("ngIf",e.specializationOptions.length>0),p(2),b("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription)}}function LU(t,i){if(1&t){const e=fe();f(0,"span",69),N("click",function(){const a=B(e).$implicit;return C(4).filterSpecialization(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=C(4);b("ngClass",Jn(2,zR,n.selectedSpecialization===e)),p(1),Q(" ",e.trim()," ")}}function UU(t,i){if(1&t&&(f(0,"div",67),M(1,LU,2,4,"span",68),h()),2&t){const e=C(3);p(1),b("ngForOf",e.specializationOptions)}}function HU(t,i){if(1&t&&(f(0,"div"),g(1),x(2,"br")(3,"br"),f(4,"strong"),g(5),h(),x(6,"br")(7,"br"),h()),2&t){const e=C(3);p(1),Q(" ",e.specializationDescription," "),p(4),Q(" ",e.inDepthSpecializationDescription," ")}}function GU(t,i){if(1&t){const e=fe();f(0,"div",72)(1,"div",73)(2,"span",74),g(3,"Reset Barn Specialization"),h(),x(4,"br"),f(5,"em"),g(6," Tear down your barn to build up something new. Each barn can be reset as many times as you want, but "),f(7,"strong"),g(8,"it only retains 80% of its current Barn Level after being reset."),h()()(),x(9,"br"),f(10,"div")(11,"div",75),M(12,UU,2,1,"div",64),x(13,"hr"),M(14,HU,8,2,"div",13),h(),f(15,"div",76)(16,"span"),g(17),h(),f(18,"button",66),N("click",function(){return B(e),C(2).resetSpecialization()}),g(19,"Reset Specialization"),h()()()()}if(2&t){const e=C(2);p(12),b("ngIf",e.specializationOptions.length>0),p(2),b("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription),p(3),Q("New Barn Level will be ",e.postResetBarnUpgradeLevel,"")}}function jU(t,i){if(1&t){const e=fe();f(0,"div",59)(1,"div",60)(2,"h4",61),g(3,"Barn Upgrade Info"),h(),f(4,"button",62),N("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",63)(7,"div",70),x(8,"div",56)(9,"br"),g(10),x(11,"br")(12,"hr"),M(13,GU,20,3,"div",71),h()()()}if(2&t){const e=C();p(8),b("innerHTML",e.totalBarnStatsPopover,jt),p(2),Q(" ",e.upgradeBarnPopover," "),p(3),b("ngIf",e.barn.barnUpgrades.specializationLevel>0)}}let zU=(()=>{class t{constructor(e,n,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=n,this.modalService=r,this.lookupService=a,this.componentCommunicationService=o,this.specializationService=s,this.tutorialService=l,this.utilityService=c,this.returnToBarnEmitter=new nt,this.isCoachingEmitter=new nt,this.canUpgrade=!1,this.canBuild=!1,this.barnSpecializationsUnlocked=!1,this.coachingUnlocked=!1,this.tutorialActive=!1,this.postResetBarnUpgradeLevel=0,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1}keyEvent(e){var n=this.lookupService.getAvailableBarns().filter(s=>void 0!==s),r=n.findIndex(s=>this.selectedBarnNumber===s.barnNumber);if(r>-1)if(null!=this.subscription&&this.subscription.unsubscribe(),"ArrowLeft"===e.key)(a=r-1)<0&&(a=n.length-1),this.componentCommunicationService.setBarnView(ft.barn,(o=n[a]).barnNumber),this.resetSelectedBarnInfo(o);else if("ArrowRight"===e.key){var a,o;(a=r+1)===n.length&&(a=0),this.componentCommunicationService.setBarnView(ft.barn,(o=n[a]).barnNumber),this.resetSelectedBarnInfo(o)}}ngOnInit(){if(this.handleTutorial(),this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(n=>n.barnNumber===this.selectedBarnNumber);null!=e&&this.resetSelectedBarnInfo(e)}}selectNewTraining(e){var n=this.globalService.globalVar.animals.find(s=>s.associatedBarnNumber===this.selectedBarnNumber);if(null!=n){var r=Object.assign({},e),a="smallBarnTrainingTimeModifier";this.barn.size===st.Medium?a="mediumBarnTrainingTimeModifier":this.barn.size===st.Large&&(a="largeBarnTrainingTimeModifier");var o=this.globalService.globalVar.modifiers.find(s=>s.text===a);if(null!=o&&(r.trainingTimeRemaining=o.value),null!=n.currentTraining){if(this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching"))return void(n.queuedTraining=r);n.currentTraining.timeTrained=0}n.currentTraining=r,this.existingTraining=r,!this.globalService.globalVar.tutorials.tutorialCompleted&&2===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.componentCommunicationService.setAnimalView(ft.animals,this.associatedAnimal))}}GetAvailableTrainingOptions(e){var n=[];if(null==this.globalService.globalVar||null==this.globalService.globalVar.trainingOptions||0===this.globalService.globalVar.trainingOptions.length)return n;n=this.globalService.globalVar.trainingOptions.filter(o=>o.isAvailable&&(o.facilitySize===st.Small||o.facilitySize===st.Medium&&(this.barn.size===st.Medium||this.barn.size===st.Large)||o.facilitySize===st.Large&&this.barn.size===st.Large));var r=[];n.forEach(o=>{var s=o.makeCopy(o),l=this.lookupService.getTrainingTimeReductionFromTrainingFacility(this.barn.barnUpgrades),c=this.lookupService.getResourceByName("Stopwatch");null==c&&(c=0),s.timeToComplete*=1-(.05*c+l+e.miscStats.trainingTimeReduction/100),s.timeToComplete=Math.round(100*(s.timeToComplete+Number.EPSILON))/100,e.raceCourseType===z.Mountain&&(s.trainingType===Ne.ShortTrackRunning&&(s.trainingName="Short Track Climbing"),s.trainingType===Ne.TrailRunning&&(s.trainingName="Trail Climbing"),s.trainingType===Ne.LongTrackRunning&&(s.trainingName="Long Track Climbing")),e.raceCourseType===z.Ocean&&(s.trainingType===Ne.ShortTrackRunning&&(s.trainingName="Short Track Swimming"),s.trainingType===Ne.TrailRunning&&(s.trainingName="Lane Swimming"),s.trainingType===Ne.SmallWagonTow&&(s.trainingName="Small Canoe Tow"),s.trainingType===Ne.UphillRun&&(s.trainingName="Upstream Swim"),s.trainingType===Ne.LongTrackRunning&&(s.trainingName="Long Track Swimming"),s.trainingType===Ne.VehicleTow&&(s.trainingName="Boat Tow"),s.trainingType===Ne.GreenwayHike&&(s.trainingName="Canal Adventure")),s.affectedStatRatios.topSpeed*=this.barn.barnUpgrades.upgradedStatGain.topSpeed,s.affectedStatRatios.acceleration*=this.barn.barnUpgrades.upgradedStatGain.acceleration,s.affectedStatRatios.endurance*=this.barn.barnUpgrades.upgradedStatGain.endurance,s.affectedStatRatios.power*=this.barn.barnUpgrades.upgradedStatGain.power,s.affectedStatRatios.focus*=this.barn.barnUpgrades.upgradedStatGain.focus,s.affectedStatRatios.adaptability*=this.barn.barnUpgrades.upgradedStatGain.adaptability;var u=1,d=1,m=1,v=1,_=1,y=1;e.talentTree.talentTreeType===ct.sprint&&(y=1+e.talentTree.column1Row1Points/100,d=1+e.talentTree.column2Row1Points/100,v=1+e.talentTree.column3Row1Points/100),e.talentTree.talentTreeType===ct.longDistance&&(_=1+e.talentTree.column1Row1Points/100,u=1+e.talentTree.column2Row1Points/100,m=1+e.talentTree.column3Row1Points/100),s.affectedStatRatios.topSpeed*=u,s.affectedStatRatios.acceleration*=d,s.affectedStatRatios.endurance*=m,s.affectedStatRatios.power*=v,s.affectedStatRatios.focus*=_,s.affectedStatRatios.adaptability*=y,s.affectedStatRatios.topSpeed=Math.round(100*(s.affectedStatRatios.topSpeed+Number.EPSILON))/100,s.affectedStatRatios.acceleration=Math.round(100*(s.affectedStatRatios.acceleration+Number.EPSILON))/100,s.affectedStatRatios.endurance=Math.round(100*(s.affectedStatRatios.endurance+Number.EPSILON))/100,s.affectedStatRatios.power=Math.round(100*(s.affectedStatRatios.power+Number.EPSILON))/100,s.affectedStatRatios.focus=Math.round(100*(s.affectedStatRatios.focus+Number.EPSILON))/100,s.affectedStatRatios.adaptability=Math.round(100*(s.affectedStatRatios.adaptability+Number.EPSILON))/100,r.push(s)}),(this.filterAcceleration||this.filterAdaptability||this.filterEndurance||this.filterFocus||this.filterPower||this.filterSpeed||this.filterSmall||this.filterMedium||this.filterLarge)&&(r=r.filter(o=>(!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterAcceleration&&o.affectedStatRatios.acceleration>0||this.filterAdaptability&&o.affectedStatRatios.adaptability>0||this.filterEndurance&&o.affectedStatRatios.endurance>0||this.filterFocus&&o.affectedStatRatios.focus>0||this.filterPower&&o.affectedStatRatios.power>0||this.filterSpeed&&o.affectedStatRatios.topSpeed>0)&&(!this.filterSmall&&!this.filterMedium&&!this.filterLarge||this.filterSmall&&o.facilitySize===st.Small||this.filterMedium&&o.facilitySize===st.Medium||this.filterLarge&&o.facilitySize===st.Large)));var a=r.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});return null!=a&&this.animalAssigned&&(a.isSelected=!0),r}GetAvailableAnimalOptions(){var e=[];return null==this.globalService.globalVar||null==this.globalService.globalVar.animals||0===this.globalService.globalVar.animals.length||(e=this.globalService.globalVar.animals.filter(n=>n.isAvailable&&(void 0===n.associatedBarnNumber||n.associatedBarnNumber<=0))),e}unassignAnimal(){var e=this.globalService.globalVar.animals.find(n=>n.associatedBarnNumber==this.selectedBarnNumber);null!=e&&(e.associatedBarnNumber=0,e.currentTraining=null),this.existingTraining=null,this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions()}assignAnimal(e){e.associatedBarnNumber=this.selectedBarnNumber,this.animalAssigned=!0,this.availableAnimals=this.GetAvailableAnimalOptions(),this.availableTrainings=this.GetAvailableTrainingOptions(e),this.associatedAnimalName=e.name,this.existingTraining=null;var n=this.lookupService.getAnimalByType(e.type);null!==n&&(n.associatedBarnNumber=this.selectedBarnNumber,this.associatedAnimal=n,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()}),!this.globalService.globalVar.tutorials.tutorialCompleted&&7===this.globalService.globalVar.tutorials.currentTutorialId&&this.associatedAnimal.type===X.Monkey&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}returnToBarnView(){this.returnToBarnEmitter.emit(0)}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}toggleFacilityFilter(e){"Small"===e&&(this.filterSmall=!this.filterSmall),"Medium"===e&&(this.filterMedium=!this.filterMedium),"Large"===e&&(this.filterLarge=!this.filterLarge),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1,this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}purchaseBarn(){this.lookupService.getCoins()>=this.barn.purchasePrice&&(this.barn.isLocked=!1,this.lookupService.spendCoins(this.barn.purchasePrice))}canPurchaseBarn(){return this.lookupService.getCoins()>=this.barn.purchasePrice}getSizeValue(){this.sizeValue=this.barn.getSize()}upgradeBarnSize(){if(this.lookupService.getCoins()>=this.barn.facilityUpgradePrice){if(this.lookupService.spendCoins(this.barn.facilityUpgradePrice),this.barn.size===st.Small)this.barn.size=st.Medium,this.barn.facilityUpgradePrice=4e3,null!=(n=this.globalService.globalVar.shop.find(r=>"Trainings"===r.name))&&n.itemList.filter(r=>r.additionalIdentifier===st.Medium.toString()).forEach(r=>{r.isAvailable=!0});else if(this.barn.size===st.Medium){var n;this.barn.size=st.Large,null!=(n=this.globalService.globalVar.shop.find(a=>"Trainings"===a.name))&&n.itemList.filter(a=>a.additionalIdentifier===st.Large.toString()).forEach(a=>{a.isAvailable=!0})}this.getSizeValue(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover()}}upgradeBarn(){var e=this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel);if(this.canUpgradeBarn(e)){if(9===this.barn.barnUpgrades.barnLevel)this.modalService.open(this.specializationModal,{ariaLabelledBy:"modal-basic-title",size:"lg"});else{e.forEach(o=>{this.lookupService.spendResourceByName(o.name,o.amount)}),this.barn.barnUpgrades.barnLevel+=1;var r=.1;if(this.barn.barnUpgrades.barnLevel%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var a=this.barn.barnUpgrades.barnLevel-this.barn.barnUpgrades.specializationLevel;a%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=r:a%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=r:a%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=r:a%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=r:a%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=r:a%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=r)}this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover()}this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}else alert("You don't have the required resources to upgrade your barn.")}canUpgradeBarn(e){var n=!0;return e.forEach(r=>{this.lookupService.getResourceByName(r.name)<r.amount&&(n=!1)}),n}canBuildLargerBarn(){var e=!1;return this.lookupService.getCoins()>=this.barn.facilityUpgradePrice&&(e=!0),e}getTotalBarnStatsPopover(){var e="Upgrade to gain barn bonuses";return this.barn.barnUpgrades.barnLevel>=1&&(e="Barn Upgrades: <br/>"),this.barn.barnUpgrades.specialization===Bt.TrainingFacility?e+=this.specializationService.getSpecializationPopoverText(Bt.TrainingFacility,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===Bt.BreedingGrounds?e+=this.specializationService.getSpecializationPopoverText(Bt.BreedingGrounds,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===Bt.Attraction?e+=this.specializationService.getSpecializationPopoverText(Bt.Attraction,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===Bt.ResearchCenter&&(e+=this.specializationService.getSpecializationPopoverText(Bt.ResearchCenter,this.barn.barnUpgrades.specializationLevel)),this.barn.barnUpgrades.upgradedStatGain.adaptability>1&&(e+="Adaptability Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.adaptability.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.focus>1&&(e+="Focus Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.focus.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.power>1&&(e+="Power Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.power.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.endurance>1&&(e+="Endurance Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.endurance.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.acceleration>1&&(e+="Acceleration Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.acceleration.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.topSpeed>1&&(e+="Speed Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.topSpeed.toFixed(1)+"<br/>"),null!==this.utilityService.getSanitizedHtml(e)&&(e=this.utilityService.getSanitizedHtml(e)),e}getUpgradeBarnPopover(){var e="Cost for next upgrade: \n";return this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(r=>{var a=r.name;"Medals"===a&&1===r.amount&&(a="Medal"),e+=r.amount+" "+a+"\n"}),e}getBuildLargerBarnPopover(){var e="Cost to build larger barn: \n";return e+=this.barn.facilityUpgradePrice+" Coins \n\n",this.barn.size===st.Small?e+="You will be able to do Medium trainings and increase idle training time to 4 hours.":this.barn.size===st.Medium&&(e+="You will be able to do Large trainings and increase idle training time to 8 hours."),e}filterSpecialization(e){this.selectedSpecialization=e,this.specializationDescription=this.globalService.getSpecializationDescription(e),this.inDepthSpecializationDescription=this.lookupService.getInDepthSpecializationDescription(e)}selectSpecialization(){""!==this.selectedSpecialization&&null!=this.selectedSpecialization?(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(n=>{this.lookupService.spendResourceByName(n.name,n.amount)}),this.barn.barnUpgrades.specialization=this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel+=1,this.barn.barnUpgrades.barnLevel+=1,this.barn.barnUpgrades.specialization===Bt.TrainingFacility&&(this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="",this.modalService.dismissAll()):alert("You must select a specialization.")}resetSpecialization(){if(""!==this.selectedSpecialization&&null!=this.selectedSpecialization){this.barn.barnUpgrades.barnLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel),this.barn.barnUpgrades.specialization=this.barn.barnUpgrades.barnLevel<10?Bt.None:this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel=0,this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="";var e=.1;this.barn.barnUpgrades.upgradedStatGain=new Ee(1,1,1,1,1,1);for(var n=1;n<=this.barn.barnUpgrades.barnLevel;n++)if(n%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var r=n-this.barn.barnUpgrades.specializationLevel;r%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=e:r%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=e:r%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=e:r%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=e:r%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=e:r%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=e)}this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.modalService.dismissAll()}else alert("You must select a specialization.")}goToAnimal(){this.componentCommunicationService.setAnimalView(ft.animals,this.associatedAnimal)}handleTutorial(){var e=this.globalService.globalVar.animals.find(n=>n.type===X.Monkey);this.globalService.globalVar.tutorials.tutorialCompleted||1!==this.globalService.globalVar.tutorials.currentTutorialId?!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)?(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0):this.globalService.globalVar.tutorials.tutorialCompleted||(this.tutorialActive=!1):(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}resetSelectedBarnInfo(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.upgradeText="Upgrade",this.barnSpecializationsUnlocked=this.lookupService.isItemUnlocked("barnSpecializations"),this.coachingUnlocked=this.lookupService.isItemUnlocked("coaching"),this.selectedBarnNumber=e.barnNumber,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var n=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedBarnNumber);if(void 0!==n){this.barn=n,this.barnName=this.lookupService.getBarnName(n),this.getSizeValue(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize");var r=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.selectedBarnNumber);if(null!=r){if(this.animalAssigned=!0,this.associatedAnimal=r,this.associatedAnimalName=r.name,this.existingTraining=r.currentTraining,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()},this.availableTrainings=this.GetAvailableTrainingOptions(r),this.currentTrainingPopover=this.getCurrentTrainingPopover(r),null!=this.existingTraining){var a=this.availableTrainings.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});null!=a&&(a.isSelected=!0)}}else this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions();this.componentCommunicationService.setBarnView(ft.barn,this.selectedBarnNumber),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(o=>{if(!this.barn.isLocked){var s=this.globalService.globalVar.animals.find(c=>c.associatedBarnNumber==this.selectedBarnNumber);if(null!=s){if(null==s.currentTraining){if(null!==this.existingTraining){var l=this.availableTrainings.find(c=>{var u;return(null===(u=this.existingTraining)||void 0===u?void 0:u.trainingName)===c.trainingName});null!=l&&(l.isSelected=!1),this.existingTraining=null}return}s.currentTraining!==this.existingTraining&&(this.existingTraining=s.currentTraining),this.trainingProgressBarPercent>=100&&(this.trainingProgressBarPercent=100),this.trainingProgressBarPercent=s.currentTraining.timeTrained/s.currentTraining.timeToComplete*100,this.currentTrainingPopover=this.getCurrentTrainingPopover(s)}}})}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}getCurrentTrainingPopover(e){var n="";null!=e.currentTraining&&(n+=e.currentTraining.trainingName+"\n"+this.lookupService.getStatGainDescription(e.currentTraining.affectedStatRatios,e.currentTraining.statGain)+"\n"),n+=e.name+" Current Stats:\n",n+="Speed: "+Math.round(e.currentStats.topSpeed).toLocaleString()+"\n",n+="Acceleration: "+Math.round(e.currentStats.acceleration).toLocaleString()+"\n",n+="Endurance: "+Math.round(e.currentStats.endurance).toLocaleString()+"\n",n+="Power: "+Math.round(e.currentStats.power).toLocaleString()+"\n",n+="Focus: "+Math.round(e.currentStats.focus).toLocaleString()+"\n",n+="Adaptability: "+Math.round(e.currentStats.adaptability).toLocaleString()+"\n",n+="Diminishing Returns: "+this.globalService.GetAnimalDiminishingReturns(e);var r=this.utilityService.getSanitizedHtml(n);return null!==r&&(n=r),n}goToCoaching(){this.isCoachingEmitter.emit(!0)}openBarnUpgradeModal(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.barn.barnUpgrades.specialization!==Bt.None){var n=this.lookupService.convertSpecializationEnumToName(this.barn.barnUpgrades.specialization);this.specializationOptions=this.specializationOptions.filter(r=>r!==n),this.postResetBarnUpgradeLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel)}this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(mi),P(lo),P(hn),P(qn),P(Xv),P(bD),P(Li))},t.\u0275cmp=lt({type:t,selectors:[["app-selected-barn"]],viewQuery:function(e,n){if(1&e&&ca(cU,7),2&e){let r;un(r=dn())&&(n.specializationModal=r.first)}},hostBindings:function(e,n){1&e&&N("keyup",function(a){return n.keyEvent(a)},!1,Ya)},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{returnToBarnEmitter:"returnToBarnEmitter",isCoachingEmitter:"isCoachingEmitter"},decls:17,vars:3,consts:[["class","selectedBarnModal",4,"ngIf"],["totalBarnStatsContent",""],["upgradeBarnContent",""],["costToBuildContent",""],["noTrainingContent",""],["currentTrainingContent",""],["specializationModal",""],["barnUpgradeContent",""],[1,"selectedBarnModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"unassign"],[3,"click"],[4,"ngIf"],[1,"info"],["class","keyword buttonAsTextKeepColor clickableText",3,"ngClass","click",4,"ngIf"],["class","clickableText keyword buttonAsTextKeepColor",3,"ngClass","click",4,"ngIf"],[3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"back"],[1,"changeTrainingHeader"],[1,"s4Heading",3,"click"],[1,"trainingDescription"],[1,"filterGridContainer"],[1,"facilitySizeFilter","clickableText","filterMargins"],["id","smallFilter",1,"buttonAsText",3,"click"],["id","mediumFilter",1,"buttonAsText",3,"click"],["id","largeFilter",1,"buttonAsText",3,"click"],[1,"resetFiltersHeader","buttonAsText","clickableText"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTrainingOptions","selectedTrainingOption",4,"ngIf"],["class","keyword",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[1,"keyword","buttonAsTextKeepColor","clickableText",3,"ngClass","click"],[1,"clickableText","keyword","buttonAsTextKeepColor",3,"ngClass","click"],[1,"sizeButtonSpacing",3,"disabled","click"],[1,"activeTrainingOption"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"],[3,"availableTrainingOptions","selectedTrainingOption"],[1,"keyword"],[3,"availableAnimals","selectedAnimal"],[1,"purchaseBarn"],[1,"price","resourceKeyword"],["id","purchaseButton",3,"disabled","click"],["class","popoverClass",4,"ngIf"],[1,"popoverClass"],[3,"innerHTML"],["class","popoverClass",3,"innerHTML",4,"ngIf"],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],["class","typeContainer",4,"ngIf"],[1,"modal-footer"],["type","button",3,"click"],[1,"typeContainer"],["class","specializationType subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"specializationType","subHeading",3,"ngClass","click"],[1,"upgradeBarnInfo"],["class","resetBarn",4,"ngIf"],[1,"resetBarn"],[1,"resetSpecializationInfo"],[1,"s4Heading"],[1,"resetSpecializationOptions"],[1,"modal-footer","spaceEvenly"]],template:function(e,n){1&e&&(M(0,wU,69,34,"div",0),M(1,SU,19,2,"div",0),M(2,TU,24,3,"div",0),M(3,RU,1,1,"ng-template",null,1,rt),M(5,MU,1,1,"ng-template",null,2,rt),M(7,AU,1,1,"ng-template",null,3,rt),M(9,EU,1,1,"ng-template",null,4,rt),M(11,OU,1,1,"ng-template",null,5,rt),M(13,BU,14,2,"ng-template",null,6,rt),M(15,jU,14,3,"ng-template",null,7,rt)),2&e&&(b("ngIf",n.animalAssigned&&!n.barn.isLocked),p(1),b("ngIf",!n.animalAssigned&&!n.barn.isLocked),p(1),b("ngIf",n.barn.isLocked))},directives:[en,Or,Bn,S0,tU,Cf,Ah,Ch,Qc,jn],pipes:[no],styles:['ngb-modal-backdrop{z-index:1050!important}.selectedBarnModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}.infoText[_ngcontent-%COMP%]{text-align:center}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"unassign info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.trainingDescription[_ngcontent-%COMP%]{text-align:center}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.facilitySizeFilter[_ngcontent-%COMP%]{grid-area:facilitySizeFilter}.resetFiltersHeader[_ngcontent-%COMP%]{grid-area:resetFiltersHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.changeTrainingHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.specializationType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedSpecialization[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.sizeButtonSpacing[_ngcontent-%COMP%]{width:4rem}.sizeSpacing[_ngcontent-%COMP%]{margin-left:4rem}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.spaceEvenly[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}.resetSpecializationInfo[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:2fr 1fr 2fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}}']}),t})();var Wn=(()=>{return(t=Wn||(Wn={}))[t.speed=0]="speed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",t[t.special=6]="special",Wn;var t})();const $U=["coachingCanvas"],qU=["drawCoaching"];let WU=(()=>{class t{constructor(e,n,r,a){this.gameLoopService=e,this.globalService=n,this.themeService=r,this.utilityService=a,this.isCoachingEmitter=new nt,this.isPointerDown=!1,this.activePoints=[],this.currentEndPoint=0,this.currentX=0,this.currentY=0,this.getNewPath=!1}ngOnInit(){if(this.successfulAttemptStreak=0,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var n=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=n){this.associatedAnimal=n;var r="coloredText "+this.associatedAnimal.getCourseTypeClass();this.animalDisplayName="<span class='"+r+"'>"+this.associatedAnimal.name+"</span>"}}this.incrementalCoachingUpdates="You bring "+this.animalDisplayName+" out into an open area for practice.\n"}ngAfterViewInit(){this.setupCanvas(),null!=this.drawCoaching&&(this.canvasOffsetX=this.drawCoaching.nativeElement.offsetLeft,this.canvasOffsetY=this.drawCoaching.nativeElement.offsetTop),this.context=this.coachingCanvas.nativeElement.getContext("2d"),this.context.lineWidth=6,this.currentPathType=this.getRandomPathType(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(n=>{this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=6,this.displayTrace(this.context,0)})}setupCanvas(){this.coachingCanvas.nativeElement.style.width="100%",this.coachingCanvas.nativeElement.style.height="100%",this.coachingCanvas.nativeElement.width=this.coachingCanvas.nativeElement.offsetWidth,this.coachingCanvas.nativeElement.height=this.coachingCanvas.nativeElement.offsetHeight,this.canvasHeight=this.coachingCanvas.nativeElement.height,this.canvasWidth=this.coachingCanvas.nativeElement.width}displayTrace(e,n){e.lineCap="round",e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.currentPathType===Wn.speed&&(this.activePoints=this.drawSpeedTrace(e)),this.currentPathType===Wn.acceleration&&(this.activePoints=this.drawAccelerationTrace(e)),this.currentPathType===Wn.endurance&&(this.activePoints=this.drawEnduranceTrace(e)),this.currentPathType===Wn.power&&(this.activePoints=this.drawPowerTrace(e)),this.currentPathType===Wn.focus&&(this.activePoints=this.drawFocusTrace(e)),this.currentPathType===Wn.adaptability&&(this.activePoints=this.drawAdaptabilityTrace(e)),this.currentPathType===Wn.special&&(this.activePoints=this.drawSpecialTrace(e)),e.strokeStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.globalCompositeOperation="source-atop";for(var r=0;r<this.currentEndPoint;r++)if(r<this.currentEndPoint-1)this.currentPathType===Wn.power&&0===r?(e.beginPath(),e.ellipse(this.activePoints[0][0],this.activePoints[0][1],this.activePoints[0][2],this.activePoints[0][3],this.activePoints[0][4],this.activePoints[0][5],this.activePoints[0][6],!0),e.stroke()):(e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.activePoints[r+1][0],this.activePoints[r+1][1]),e.stroke());else if(this.currentPathType!==Wn.power||0!==r&&2!==r)e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.currentX,this.currentY),e.stroke(),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,this.currentY-5,10,10);else{var a=0;2===r&&(a=3),e.fillStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.fillRect(this.activePoints[a][0]-this.activePoints[a][2]-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],this.currentX-(this.activePoints[a][0]-this.activePoints[a][2]),2*this.activePoints[a][3]+2),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],10,2*this.activePoints[a][3])}}pointerMove(e){if(this.isPointerDown&&null!=this.activePoints&&0!==this.activePoints.length){e.preventDefault(),e.stopPropagation();var n=e.clientX-this.canvasOffsetX,r=e.clientY-this.canvasOffsetY,a=.1*this.canvasWidth,o=.1*this.canvasHeight;0===this.currentEndPoint&&(this.currentX=this.activePoints[0][0],this.currentY=this.activePoints[0][1],this.currentPathType===Wn.power&&(this.currentX=this.activePoints[0][0]-this.activePoints[0][2],this.currentY=this.activePoints[0][1]),this.currentEndPoint=1),this.currentPathType===Wn.power&&(o=.25*this.canvasHeight);var s=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint-1][0]:this.activePoints[this.currentEndPoint][0],l=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint][0]:this.activePoints[this.currentEndPoint-1][0],c=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint-1][1]:this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint][1]:this.activePoints[this.currentEndPoint-1][1],d=s-a,m=l+a,v=c-o,_=u+o,y=!1,S=!1,D=!1,w=!1;if(this.activePoints[this.currentEndPoint-1][0]>this.activePoints[this.currentEndPoint][0]&&(y=!0),this.activePoints[this.currentEndPoint-1][1]>this.activePoints[this.currentEndPoint][1]&&(S=!0),this.activePoints[this.currentEndPoint-1][0]===this.activePoints[this.currentEndPoint][0]&&(D=!0),this.activePoints[this.currentEndPoint-1][1]===this.activePoints[this.currentEndPoint][1]&&(w=!0),this.currentPathType!==Wn.power||1!==this.currentEndPoint&&3!==this.currentEndPoint?this.currentPathType===Wn.power&&2===this.currentEndPoint&&(d=(s=this.activePoints[2][0])-a,m=(l=this.activePoints[1][0])+a,v=(c=this.activePoints[1][1])-o,_=(u=this.activePoints[2][1])+o,y=!0,S=!1,D=!1,w=!1):(1===this.currentEndPoint?(s=this.activePoints[this.currentEndPoint-1][0]-this.activePoints[this.currentEndPoint-1][2],l=this.activePoints[this.currentEndPoint-1][0]+this.activePoints[this.currentEndPoint-1][2],c=this.activePoints[this.currentEndPoint-1][1],u=this.activePoints[this.currentEndPoint-1][1]):(s=this.activePoints[this.currentEndPoint][0]-this.activePoints[this.currentEndPoint][2],l=this.activePoints[this.currentEndPoint][0]+this.activePoints[this.currentEndPoint][2],c=this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint][1]),d=s-a,m=l+a,v=c-o,_=u+o,y=!1,S=!1,D=!1,w=!0),n>=d&&n<=m&&r>=v&&r<=_){if(D||w)(!S&&r>this.currentY||S&&r<this.currentY)&&!w&&(this.currentY=r),(!y&&n>this.currentX||y&&n<this.currentX)&&!D&&(this.currentX=n);else if(!y&&n>this.currentX||y&&n<this.currentX){var T=(n-s)/(l-s);y&&(T=1-T),S&&(T=1-T);var L=(u-c)*T+c;this.currentX=n,this.currentY=L}var G=.005*this.canvasWidth,ee=.005*this.canvasHeight;(!y&&this.currentX>=l-G||y&&this.currentX<=s+G)&&(!S&&this.currentY>=u-ee||S&&this.currentY<=c+ee)&&(this.currentX=y?s:l,this.currentY=S?c:u,this.currentEndPoint+=1,this.currentEndPoint>this.activePoints.length-1&&this.completePath())}}}pointerUp(){this.isPointerDown=!1}pointerDown(){this.isPointerDown=!0}drawSpeedTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([n,r]),a.push([this.canvasWidth-n,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-n,this.canvasHeight-r]),a.push([n,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}drawAdaptabilityTrace(e){var n=.1*this.canvasWidth,o=(this.canvasWidth-2*n)/14,s=(this.canvasHeight-.1*this.canvasHeight*2)/7,l=[];l.push([n,this.canvasHeight/2]),l.push([n+o,this.canvasHeight/2-s]),l.push([n+2*o,this.canvasHeight/2+s]),l.push([n+3*o,this.canvasHeight/2-2*s]),l.push([n+4*o,this.canvasHeight/2+2*s]),l.push([n+5*o,this.canvasHeight/2-3*s]),l.push([n+6*o,this.canvasHeight/2+3*s]),l.push([n+7*o,this.canvasHeight/2-4*s]),l.push([n+8*o,this.canvasHeight/2+3*s]),l.push([n+9*o,this.canvasHeight/2-3*s]),l.push([n+10*o,this.canvasHeight/2+2*s]),l.push([n+11*o,this.canvasHeight/2-2*s]),l.push([n+12*o,this.canvasHeight/2+s]),l.push([n+13*o,this.canvasHeight/2-s]),l.push([n+14*o,this.canvasHeight/2]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawPowerTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([this.canvasWidth/2,this.canvasHeight/4,this.canvasWidth/2-n,this.canvasHeight/4-r,0,0,Math.PI]),a.push([this.canvasWidth/2+(this.canvasWidth/2-n),this.canvasHeight/4]),a.push([this.canvasWidth/2-(this.canvasWidth/2-n),3*this.canvasHeight/4]),a.push([this.canvasWidth/2,3*this.canvasHeight/4,this.canvasWidth/2-n,this.canvasHeight/4-r,0,0,Math.PI]),e.beginPath(),e.ellipse(a[0][0],a[0][1],a[0][2],a[0][3],a[0][4],a[0][5],a[0][6],!0),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.ellipse(a[3][0],a[3][1],a[3][2],a[3][3],a[3][4],a[3][5],a[3][6],!1),e.stroke(),a}drawEnduranceTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=.15*this.canvasWidth,o=.15*this.canvasHeight,s=[];s.push([n,r]),s.push([this.canvasWidth-n,r]),s.push([this.canvasWidth-n,this.canvasHeight-r]),s.push([n,this.canvasHeight-r]),s.push([n,r+o]),s.push([this.canvasWidth-(n+a),r+o]),s.push([this.canvasWidth-(n+a),this.canvasHeight-(r+o)]),s.push([n+a,this.canvasHeight-(r+o)]),s.push([n+a,r+2*o]),s.push([this.canvasWidth-(n+2*a),r+2*o]),s.push([this.canvasWidth-(n+2*a),this.canvasHeight-(r+2*o)]),s.push([n+2*a,this.canvasHeight-(r+2*o)]),s.push([n+2*a,this.canvasHeight/2]),s.push([this.canvasWidth/2,this.canvasHeight/2]);for(var l=1;l<s.length;l++)e.beginPath(),e.moveTo(s[l-1][0],s[l-1][1]),e.lineTo(s[l][0],s[l][1]),e.stroke();return s}drawFocusTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];a.push([this.canvasWidth/3,r]),a.push([this.canvasWidth/3,this.canvasHeight/6]),a.push([n,this.canvasHeight/6]),a.push([this.canvasWidth/2,this.canvasHeight-r]),a.push([this.canvasWidth-n,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,r]);for(var o=1;o<a.length;o++)e.beginPath(),e.moveTo(a[o-1][0],a[o-1][1]),e.lineTo(a[o][0],a[o][1]),e.stroke();return a}drawAccelerationTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=11,o=this.canvasWidth-2*n,s=this.canvasHeight-2*r,l=[];l.push([n,r]),l.push([o/a+n,r]),l.push([o/a+n,2*s/a+r]),l.push([2*o/a+n,2*s/a+r]),l.push([2*o/a+n,4*s/a+r]),l.push([3*o/a+n,4*s/a+r]),l.push([3*o/a+n,6*s/a+r]),l.push([4*o/a+n,6*s/a+r]),l.push([4*o/a+n,8*s/a+r]),l.push([5*o/a+n,8*s/a+r]),l.push([5*o/a+n,10*s/a+r]),l.push([6*o/a+n,10*s/a+r]),l.push([6*o/a+n,8*s/a+r]),l.push([7*o/a+n,8*s/a+r]),l.push([7*o/a+n,6*s/a+r]),l.push([8*o/a+n,6*s/a+r]),l.push([8*o/a+n,4*s/a+r]),l.push([9*o/a+n,4*s/a+r]),l.push([9*o/a+n,2*s/a+r]),l.push([10*o/a+n,2*s/a+r]),l.push([10*o/a+n,r]),l.push([11*o/a+n,r]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawSpecialTrace(e){var n=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([n,r]),a.push([this.canvasWidth-n,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-n,this.canvasHeight-r]),a.push([n,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}getAnimalDistanceColor(e){var n="";return e===z.Flatland&&(n="#7d3f00"),e===z.Mountain&&(n="#1b630d"),e===z.Ocean&&(n="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===z.Tundra&&(n="#28809c"),e===z.Volcanic&&(n="#8f1a1a"),n}getAnimalRacerColor(e){var n="";return e===z.Flatland&&("night"===this.themeService.getActiveThemeName()?n="#E18B07":(this.themeService.getActiveThemeName(),n="#c66900")),e===z.Mountain&&("night"===this.themeService.getActiveThemeName()?n="#30b001":(this.themeService.getActiveThemeName(),n="#279113")),e===z.Ocean&&("night"===this.themeService.getActiveThemeName()?n="#9289CF":(this.themeService.getActiveThemeName(),n="#0000FF")),e===z.Tundra&&("night"===this.themeService.getActiveThemeName()?n="#019DDE":(this.themeService.getActiveThemeName(),n="#1CA1C9")),e===z.Volcanic&&("night"===this.themeService.getActiveThemeName()?n="#E56C6E":(this.themeService.getActiveThemeName(),n="#D92525")),n}getRandomPathType(e){var n=Object.keys(Wn),r=[];n.forEach((o,s)=>{!isNaN(Number(o))&&6!==Number(o)&&r.push(Number(o))});var a=this.utilityService.getRandomInteger(0,r.length-1);return r[a]}completePath(){this.getNewPath=!0,this.currentEndPoint=0,this.activePoints=[],this.currentX=0,this.currentY=0,this.isPointerDown=!1,this.successfulAttemptStreak+=1,this.getReward(this.currentPathType),this.associatedAnimal.trackedAnimalStats.successfulCoachingAttempts+=1,this.currentPathType=this.getRandomPathType(this.currentPathType)}getReward(e){var n=1,r=this.globalService.globalVar.resources.find(l=>"Whistle"===l.name);if(null!=r&&r.amount>0){var a=this.globalService.globalVar.modifiers.find(l=>"whistleModifier"===l.text);null!=a&&(n=a.value)}var o=this.globalService.globalVar.resources.find(l=>"Golden Whistle"===l.name);if(null!=o&&o.amount>0){var s=this.globalService.globalVar.modifiers.find(l=>"goldenWhistleModifier"===l.text);null!=s&&(n=s.value)}e===Wn.speed&&(this.associatedAnimal.currentStats.topSpeed+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" speed. ("+this.associatedAnimal.currentStats.topSpeed.toFixed(2)+")\n"),e===Wn.acceleration&&(this.associatedAnimal.currentStats.acceleration+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" acceleration. ("+this.associatedAnimal.currentStats.acceleration.toFixed(2)+")\n"),e===Wn.endurance&&(this.associatedAnimal.currentStats.endurance+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" endurance. ("+this.associatedAnimal.currentStats.endurance.toFixed(2)+")\n"),e===Wn.power&&(this.associatedAnimal.currentStats.power+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" power. ("+this.associatedAnimal.currentStats.power.toFixed(2)+")\n"),e===Wn.focus&&(this.associatedAnimal.currentStats.focus+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" focus. ("+this.associatedAnimal.currentStats.focus.toFixed(2)+")\n"),e===Wn.adaptability&&(this.associatedAnimal.currentStats.adaptability+=n,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+n+" adaptability. ("+this.associatedAnimal.currentStats.adaptability.toFixed(2)+")\n"),this.successfulAttemptStreak%5==0&&(this.globalService.increaseAbilityXp(this.associatedAnimal,n),this.incrementalCoachingUpdates+=this.animalDisplayName+" also gains "+n+" XP towards their ability "+this.associatedAnimal.ability.name+"!\n"),this.globalService.calculateAnimalRacingStats(this.associatedAnimal)}returnToSelectedBarnView(){this.isCoachingEmitter.emit(!1)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(mi),P(St),P(kl),P(Li))},t.\u0275cmp=lt({type:t,selectors:[["app-coaching"]],viewQuery:function(e,n){if(1&e&&(ca($U,5,gn),ca(qU,5,gn)),2&e){let r;un(r=dn())&&(n.coachingCanvas=r.first),un(r=dn())&&(n.drawCoaching=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{isCoachingEmitter:"isCoachingEmitter"},decls:22,vars:2,consts:[[1,"coachingView"],[1,"marginDiv"],["id","coachingInfo"],[1,"infoGridContainer"],[1,"info"],[1,"description"],[1,"back"],[3,"click"],[1,"drawingDiv"],[1,"updates"],["id","drawCoaching",1,"drawCoaching"],["drawCoaching",""],[1,"drawCoachingDiv"],["id","coachingCanvas",1,"coachingCanvas",3,"pointermove","pointerdown","pointerup"],["coachingCanvas",""],[1,"coachingUpdates",3,"scrollTop","innerHTML"],["scrollMe",""]],template:function(e,n){if(1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),g(6,"Coaching"),h(),f(7,"div",5),g(8," Show your animals the way by tracing each path. Successfully making it through will reward your partner with a stat point. "),h()(),f(9,"div",6)(10,"button",7),N("click",function(){return n.returnToSelectedBarnView()}),g(11,"Back"),h()()(),x(12,"hr"),h(),f(13,"div",8)(14,"div",9)(15,"div",10,11)(17,"div",12)(18,"canvas",13,14),N("pointermove",function(a){return n.pointerMove(a)})("pointerdown",function(){return n.pointerDown()})("pointerup",function(){return n.pointerUp()}),h()()(),x(20,"div",15,16),h()()()()),2&e){const r=it(21);p(20),b("scrollTop",r.scrollHeight)("innerHTML",n.incrementalCoachingUpdates.trim(),jt)}},styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:76.5%}']}),t})();function XU(t,i){if(1&t){const e=fe();f(0,"div",12)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",4))}function YU(t,i){if(1&t){const e=fe();f(0,"div",13)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",5))}function QU(t,i){if(1&t){const e=fe();f(0,"div",14)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",6))}function KU(t,i){if(1&t&&(f(0,"div",3),M(1,XU,2,1,"div",9),M(2,YU,2,1,"div",10),M(3,QU,2,1,"div",11),h()),2&t){const e=C(2);p(1),b("ngIf",e.barnRow2IsUnlocked),p(1),b("ngIf",e.barnRow2IsUnlocked),p(1),b("ngIf",e.barnRow2IsUnlocked)}}function ZU(t,i){if(1&t){const e=fe();f(0,"div",18)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",7))}function JU(t,i){if(1&t){const e=fe();f(0,"div",19)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",8))}function eH(t,i){if(1&t){const e=fe();f(0,"div",20)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",9))}function tH(t,i){if(1&t&&(f(0,"div",3),M(1,ZU,2,1,"div",15),M(2,JU,2,1,"div",16),M(3,eH,2,1,"div",17),h()),2&t){const e=C(2);p(1),b("ngIf",e.barnRow3IsUnlocked),p(1),b("ngIf",e.barnRow3IsUnlocked),p(1),b("ngIf",e.barnRow3IsUnlocked)}}function nH(t,i){if(1&t){const e=fe();f(0,"div",24)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",10))}function iH(t,i){if(1&t){const e=fe();f(0,"div",25)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",11))}function rH(t,i){if(1&t){const e=fe();f(0,"div",26)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",12))}function aH(t,i){if(1&t&&(f(0,"div",3),M(1,nH,2,1,"div",21),M(2,iH,2,1,"div",22),M(3,rH,2,1,"div",23),h()),2&t){const e=C(2);p(1),b("ngIf",e.barnRow4IsUnlocked),p(1),b("ngIf",e.barnRow4IsUnlocked),p(1),b("ngIf",e.barnRow4IsUnlocked)}}function oH(t,i){if(1&t){const e=fe();f(0,"div",30)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",13))}function sH(t,i){if(1&t){const e=fe();f(0,"div",31)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",14))}function lH(t,i){if(1&t){const e=fe();f(0,"div",32)(1,"app-barn",5),N("selectedBarn",function(r){return B(e),C(3).goToBarn(r)}),h()()}2&t&&(p(1),b("barnNumber",15))}function cH(t,i){if(1&t&&(f(0,"div",3),M(1,oH,2,1,"div",27),M(2,sH,2,1,"div",28),M(3,lH,2,1,"div",29),h()),2&t){const e=C(2);p(1),b("ngIf",e.barnRow5IsUnlocked),p(1),b("ngIf",e.barnRow5IsUnlocked),p(1),b("ngIf",e.barnRow5IsUnlocked)}}function uH(t,i){if(1&t){const e=fe();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"app-barn",5),N("selectedBarn",function(r){return B(e),C().goToBarn(r)}),h()(),f(4,"div",6)(5,"app-barn",5),N("selectedBarn",function(r){return B(e),C().goToBarn(r)}),h()(),f(6,"div",7)(7,"app-barn",5),N("selectedBarn",function(r){return B(e),C().goToBarn(r)}),h()()(),M(8,KU,4,3,"div",8),M(9,tH,4,3,"div",8),M(10,aH,4,3,"div",8),M(11,cH,4,3,"div",8),h()}if(2&t){const e=C();p(2),b("ngClass",e.tutorialActive?"tutorialActive":""),p(1),b("barnNumber",1),p(2),b("barnNumber",2),p(2),b("barnNumber",3),p(1),b("ngIf",e.barnRow2IsUnlocked),p(1),b("ngIf",e.barnRow3IsUnlocked),p(1),b("ngIf",e.barnRow4IsUnlocked),p(1),b("ngIf",e.barnRow5IsUnlocked)}}function dH(t,i){if(1&t){const e=fe();f(0,"app-selected-barn",36),N("returnToBarnEmitter",function(){return B(e),C(2).goToBarn(0)})("isCoachingEmitter",function(r){return B(e),C(2).goToCoaching(r)}),h()}2&t&&b("selectedBarnNumber",C(2).selectedBarn)}function hH(t,i){if(1&t){const e=fe();f(0,"app-coaching",37),N("isCoachingEmitter",function(r){return B(e),C(2).goToCoaching(r)}),h()}2&t&&b("selectedBarnNumber",C(2).selectedBarn)}function fH(t,i){if(1&t&&(f(0,"div",33),M(1,dH,1,1,"app-selected-barn",34),M(2,hH,1,1,"app-coaching",35),h()),2&t){const e=C();p(1),b("ngIf",!e.isCoaching),p(1),b("ngIf",e.isCoaching)}}let pH=(()=>{class t{constructor(e,n,r){this.lookupService=e,this.componentCommunicationService=n,this.globalService=r,this.selectedBarn=0,this.isCoaching=!1,this.tutorialActive=!1,this.barnRow2IsUnlocked=!1,this.barnRow3IsUnlocked=!1,this.barnRow4IsUnlocked=!1,this.barnRow5IsUnlocked=!1}ngOnInit(){var e;this.componentCommunicationService.setNewView(ft.barn),this.barnRow2IsUnlocked=this.lookupService.isItemUnlocked("barnRow2"),this.barnRow3IsUnlocked=this.lookupService.isItemUnlocked("barnRow3"),this.barnRow4IsUnlocked=this.lookupService.isItemUnlocked("barnRow4"),this.barnRow5IsUnlocked=this.lookupService.isItemUnlocked("barnRow5"),!this.globalService.globalVar.tutorials.tutorialCompleted&&1===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(n=>n.type===X.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.tutorialActive=!0),this.subscription=this.componentCommunicationService.getBarnView().subscribe(n=>{this.selectedBarn=n})}goToBarn(e){this.selectedBarn=e,this.componentCommunicationService.setBarnView(ft.barn,e)}goToCoaching(e){this.isCoaching=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setBarnNumber(0)}}return t.\u0275fac=function(e){return new(e||t)(P(hn),P(qn),P(St))},t.\u0275cmp=lt({type:t,selectors:[["app-barn-view"]],decls:2,vars:2,consts:[["class","gridContainer","id","barnViewDiv",4,"ngIf"],["class","selectedBarnDiv",4,"ngIf"],["id","barnViewDiv",1,"gridContainer"],[1,"barnRow"],[1,"barn1","barnDefault",3,"ngClass"],[3,"barnNumber","selectedBarn"],[1,"barn2","barnDefault"],[1,"barn3","barnDefault"],["class","barnRow",4,"ngIf"],["class","barn4 barnDefault",4,"ngIf"],["class","barn5 barnDefault",4,"ngIf"],["class","barn6 barnDefault",4,"ngIf"],[1,"barn4","barnDefault"],[1,"barn5","barnDefault"],[1,"barn6","barnDefault"],["class","barn7 barnDefault",4,"ngIf"],["class","barn8 barnDefault",4,"ngIf"],["class","barn9 barnDefault",4,"ngIf"],[1,"barn7","barnDefault"],[1,"barn8","barnDefault"],[1,"barn9","barnDefault"],["class","barn10 barnDefault",4,"ngIf"],["class","barn11 barnDefault",4,"ngIf"],["class","barn12 barnDefault",4,"ngIf"],[1,"barn10","barnDefault"],[1,"barn11","barnDefault"],[1,"barn12","barnDefault"],["class","barn13 barnDefault",4,"ngIf"],["class","barn14 barnDefault",4,"ngIf"],["class","barn15 barnDefault",4,"ngIf"],[1,"barn13","barnDefault"],[1,"barn14","barnDefault"],[1,"barn15","barnDefault"],[1,"selectedBarnDiv"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter"],[3,"selectedBarnNumber","isCoachingEmitter"]],template:function(e,n){1&e&&(M(0,uH,12,8,"div",0),M(1,fH,3,2,"div",1)),2&e&&(b("ngIf",0===n.selectedBarn),p(1),b("ngIf",n.selectedBarn>0))},directives:[en,Bn,Q6,zU,WU],styles:["#barnViewDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.selectedBarnDiv[_ngcontent-%COMP%]{height:100%}.barnDefault[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none;border-top:none;width:33.3333%;display:inline-block;vertical-align:middle;height:100%}.barnRow[_ngcontent-%COMP%]{height:25%;width:100%;display:inline-block}.lockedBarnRow[_ngcontent-%COMP%]{border:none!important}.tutorialActive[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-color:red}"]}),t})();function gH(t,i){1&t&&(f(0,"span",5),g(1," Primary "),h())}function mH(t,i){1&t&&(f(0,"span",5),g(1," Auto Run Free Race "),h())}function vH(t,i){1&t&&(f(0,"span",5),g(1," Event "),h())}function bH(t,i){1&t&&x(0,"br")}function _H(t,i){1&t&&(f(0,"span",8),g(1," / "),h())}function yH(t,i){if(1&t&&(f(0,"span",6),g(1),M(2,_H,2,0,"span",7),h()),2&t){const e=i.$implicit,n=i.index,r=C();b("ngClass",r.getColorClass(e)),p(1),Q(" ",e.name,""),p(1),b("ngIf",n<r.deck.selectedAnimals.length-1)}}let T0=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n}ngOnInit(){if(0===this.deckNumber||null==this.deckNumber){var e=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=e&&(this.deck=e)}else{var n=this.globalService.globalVar.animalDecks.find(r=>r.deckNumber===this.deckNumber);null!=n&&(this.deck=n)}}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}goToDeckView(){this.componentCommunicationService.setNewView(ft.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(qn))},t.\u0275cmp=lt({type:t,selectors:[["app-animal-deck"]],inputs:{deckNumber:"deckNumber"},decls:11,vars:6,consts:[[1,"relayTeam"],["class","primaryText keyword rightSpaced",4,"ngIf"],[4,"ngIf"],[1,"clickableText",3,"click"],["class","coloredText",3,"ngClass",4,"ngFor","ngForOf"],[1,"primaryText","keyword","rightSpaced"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div"),M(2,gH,2,0,"span",1),M(3,mH,2,0,"span",1),M(4,vH,2,0,"span",1),M(5,bH,1,0,"br",2),h(),f(6,"div")(7,"strong",3),N("click",function(){return n.goToDeckView()}),g(8),h(),g(9," - "),M(10,yH,3,3,"span",4),h()()),2&e&&(p(2),b("ngIf",n.deck.isPrimaryDeck&&void 0!==n.deckNumber&&n.deckNumber>0),p(1),b("ngIf",n.deck.autoRunFreeRace&&void 0!==n.deckNumber&&n.deckNumber>0),p(1),b("ngIf",n.deck.isEventDeck&&void 0!==n.deckNumber&&n.deckNumber>0),p(1),b("ngIf",n.deckNumber>0),p(3),Ze(n.deck.name),p(2),b("ngForOf",n.deck.selectedAnimals))},directives:[en,jn,Bn],styles:[".primaryText[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary);padding-left:.5rem;padding-right:.5rem}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.relayTeam[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:100%}"]}),t})();function CH(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=C();p(1),Q("Race ",e.index+1," ")}}function wH(t,i){if(1&t&&(f(0,"p",6),g(1),At(2,"number"),f(3,"span",7),g(4),h()()),2&t){const e=i.$implicit,n=C();b("ngClass",n.getNoRacerClass(e)),p(1),Kn(" ",Jt(2,5,e.distance,"1.2-2")," Meters of ",e.getTerrainName()," "),p(2),b("ngClass",n.getColorClass(e)),p(1),Ze(e.getCourseTypeName())}}function SH(t,i){1&t&&(f(0,"h6")(1,"em"),g(2,"Completed!"),h()())}function TH(t,i){1&t&&(f(0,"h6")(1,"em"),g(2,"Cannot Run"),h()())}function DH(t,i){1&t&&(f(0,"h6",8),g(1,"Start"),h())}function RH(t,i){1&t&&x(0,"div",9),2&t&&b("innerHTML",C().popoverText,jt)}const xH=function(t){return{raceNotAllowed:t}};let D0=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n,this.missingRacers=[],this.busyRacers=[]}ngOnInit(){this.cannotRace=!1;var e=this.lookupService.getPrimaryDeck();this.race.raceLegs.forEach(n=>{if(null==e||0===e.selectedAnimals.length&&this.race.raceType!==Pe.trainingTrack)this.cannotRace=!0,this.missingRacers.push(n.courseType);else if((null==e?void 0:e.selectedAnimals.some(a=>a.raceCourseType===n.courseType))||this.race.raceType===Pe.trainingTrack){var r=null==e?void 0:e.selectedAnimals.find(a=>a.raceCourseType===n.courseType);void 0!==r&&!this.lookupService.canAnimalRace(r)&&(this.cannotRace=!0,this.busyRacers.push(r))}else this.cannotRace=!0,this.missingRacers.push(n.courseType)}),!this.cannotRace&&this.race.isCompleted&&(this.cannotRace=!0),this.race.localRaceType===Wt.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(this.cannotRace=!0),this.popoverText=this.cannotRace?this.getErrorPopoverText():this.getSuccessfulPopoverText()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getCourseTypeName(),mountainColor:"Mountain"===e.getCourseTypeName(),waterColor:"Ocean"===e.getCourseTypeName(),tundraColor:"Tundra"===e.getCourseTypeName(),volcanicColor:"Volcanic"===e.getCourseTypeName()}:{}}getNoRacerClass(e){return{noRacer:!this.hasRacerForLeg(e)}}hasRacerForLeg(e){var n=!1,r=this.lookupService.getPrimaryDeck();return null==r||0===r.selectedAnimals.length||(r.selectedAnimals.some(a=>a.raceCourseType===e.courseType)&&(n=!0),this.busyRacers.some(a=>a.raceCourseType===e.courseType)&&(n=!1)),n}getErrorPopoverText(){var e="You cannot do this race for the following reasons: \n\n";return this.missingRacers.forEach(n=>{e+="-Missing "+z[n]+" racer\n"}),this.busyRacers.forEach(n=>{e+="-"+n.name+" is active in another race\n"}),this.race.isCompleted&&(e+="-You've already completed this race."),this.race.localRaceType===Wt.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(e+="-You've met your limit of free races. More will be available soon."),e}getSuccessfulPopoverText(){var e="",n=1;return this.race.raceLegs.forEach(r=>{null!=r.terrain&&(e+=this.lookupService.getTerrainPopoverText(r.terrain,r)),n<this.race.raceLegs.length&&(e+="\n"),n+=1}),e}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(hn))},t.\u0275cmp=lt({type:t,selectors:[["app-race-description"]],inputs:{index:"index",race:"race",showStartText:"showStartText"},decls:10,vars:10,consts:[[1,"raceDescription"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngClass","ngbPopover","disablePopover"],[3,"ngClass",4,"ngFor","ngForOf"],["class","keyword",4,"ngIf"],["popContent",""],[3,"ngClass"],[1,"coloredText",3,"ngClass"],[1,"keyword"],[1,"popoverClass",3,"innerHTML"]],template:function(e,n){if(1&e&&(f(0,"div",0),M(1,CH,2,1,"span",1),x(2,"br"),f(3,"div",2),M(4,wH,5,8,"p",3),M(5,SH,3,0,"h6",1),M(6,TH,3,0,"h6",1),M(7,DH,2,0,"h6",4),h()(),M(8,RH,1,1,"ng-template",null,5,rt)),2&e){const r=it(9);p(1),b("ngIf",null!=n.index&&n.index>-1),p(2),b("ngClass",Jn(8,xH,n.cannotRace))("ngbPopover",r)("disablePopover",""===n.popoverText),p(1),b("ngForOf",n.race.raceLegs),p(1),b("ngIf",n.showStartText&&n.race.isCompleted),p(1),b("ngIf",n.showStartText&&!n.race.isCompleted&&n.cannotRace),p(1),b("ngIf",n.showStartText&&!n.race.isCompleted&&!n.cannotRace)}},directives:[en,Bn,Or,jn],pipes:[no],styles:[".raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}"]}),t})();function MH(t,i){if(1&t){const e=fe();f(0,"div",10),N("click",function(){const a=B(e).$implicit;return C().selectCircuitRace(a)}),x(1,"app-race-description",11),h()}if(2&t){const e=i.$implicit,n=i.index,r=C();Ng("circuitRace",n+1,""),b("ngClass",r.tutorialActive?"tutorialActive":""),p(1),b("index",n)("race",e)("showStartText",!0)}}function kH(t,i){if(1&t){const e=fe();f(0,"div",12),N("click",function(){const a=B(e).$implicit;return C().selectLocalRace(a)}),x(1,"app-race-description",11),h()}if(2&t){const e=i.$implicit,n=i.index;Ng("localRace",n+1,""),p(1),b("index",n)("race",e)("showStartText",!0)}}function AH(t,i){if(1&t&&(f(0,"div",13),g(1),h()),2&t){const e=C();p(1),Q(" ",e.circuitRankUpDescription," ")}}let PH=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.utilityService=n,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new nt,this.tutorialActive=!1,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){var e=this;this.handleTutorial(),this.availableLocalRaces=[],this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace());var n=this.globalService.globalVar.circuitRank;this.circuitRank=this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank).toString():this.globalService.globalVar.circuitRank,this.circuitRankUpDescription=this.globalService.globalVar.circuitRankUpRewardDescription,this.availableCircuitRaces=this.globalService.globalVar.circuitRaces.filter(s=>s.requiredRank===n);var r=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);this.availableCircuitRaces.forEach(s=>{void 0!==r&&(s.raceLegs=this.globalService.reorganizeLegsByDeckOrder(s.raceLegs,r))}),this.totalFreeRaces=this.lookupService.getTotalFreeRacesPerPeriod();var a=900,o=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==o&&(a=o.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=vr(function*(l){var c=a-e.globalService.globalVar.freeRaceTimePeriodCounter,u=Math.floor(c/60),d=c-60*u,m=Math.floor(d).toString();d<10&&(m=d<1||d>59?"00":String(m).padStart(2,"0")),e.freeRaceTimer=u+":"+m,e.freeRacesRemaining=e.lookupService.getRemainingFreeRacesPerPeriod()});return function(l){return s.apply(this,arguments)}}())}selectCircuitRace(e){var n=!0,r=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck);null!=r&&0!==r.selectedAnimals.length?(e.raceLegs.forEach(a=>{(null==r?void 0:r.selectedAnimals.some(s=>s.raceCourseType===a.courseType))||(n=!1);var o=null==r?void 0:r.selectedAnimals.find(s=>s.raceCourseType===a.courseType);void 0!==o&&!this.lookupService.canAnimalRace(o)&&(n=!1)}),e.isCompleted&&(n=!1),!this.globalService.globalVar.tutorials.tutorialCompleted&&4===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1),n&&this.raceSelected.emit(e)):n=!1}selectLocalRace(e){var n=!0,r=e.localRaceType===Wt.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(s=>s.raceCourseType===o.courseType))||(n=!1)}),r&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(n=!1),n&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):n=!1}handleTutorial(){var e;!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&5===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(n=>n.type===X.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(Li),P(hn),P(mi))},t.\u0275cmp=lt({type:t,selectors:[["app-circuit-view"]],outputs:{raceSelected:"raceSelected"},decls:25,vars:7,consts:[[1,"circuitViewDiv"],[1,"circuitRaceHeader","s4Heading"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"circuitRaceGrid"],[3,"ngClass","class","click",4,"ngFor","ngForOf"],["id","localRaceSection"],[1,"s4Heading"],[1,"localRaceGrid"],[3,"class","click",4,"ngFor","ngForOf"],["circuitRewardContent",""],[3,"ngClass","click"],[3,"index","race","showStartText"],[3,"click"],[1,"popoverClass"]],template:function(e,n){if(1&e&&(f(0,"div",0),x(1,"app-animal-deck")(2,"hr"),f(3,"div",1)(4,"span",2),g(5,"Circuit Rank "),f(6,"strong"),g(7),h()(),x(8,"br")(9,"br"),h(),f(10,"div",3),M(11,MH,2,7,"div",4),h(),x(12,"hr"),f(13,"div",5)(14,"span",6),g(15,"Free Races"),h(),x(16,"br"),f(17,"em"),g(18),h(),x(19,"br")(20,"br"),f(21,"div",7),M(22,kH,2,6,"div",8),h()()(),M(23,AH,2,1,"ng-template",null,9,rt)),2&e){const r=it(24);p(4),b("ngbPopover",r),p(3),Ze(n.circuitRank),p(4),b("ngForOf",n.availableCircuitRaces),p(7),Ig(" ",n.freeRacesRemaining," of ",n.totalFreeRaces," remaining -- resets in ",n.freeRaceTimer,""),p(4),b("ngForOf",n.availableLocalRaces)}},directives:[T0,Or,jn,Bn,D0],styles:['.circuitRaceHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.circuitRaceGrid[_ngcontent-%COMP%]{height:100%;display:grid;text-align:center;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"circuitRace1 circuitRace2 circuitRace3"}.circuitRace1[_ngcontent-%COMP%]{grid-area:circuitRace1}.circuitRace2[_ngcontent-%COMP%]{grid-area:circuitRace2}.circuitRace3[_ngcontent-%COMP%]{grid-area:circuitRace3}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.localRaceGrid[_ngcontent-%COMP%]{text-align:center;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"localRace1 localRace2 localRace3"}.localRace1[_ngcontent-%COMP%]{grid-area:localRace1}.localRace2[_ngcontent-%COMP%]{grid-area:localRace2}.localRace3[_ngcontent-%COMP%]{grid-area:localRace3}#localRaceSection[_ngcontent-%COMP%]{text-align:center}']}),t})();function EH(t,i){if(1&t){const e=fe();f(0,"div",9),N("click",function(){B(e);const r=C(2);return r.selectLocalRace(r.availableMonoRace)}),f(1,"span",10),g(2,"Mono Race "),f(3,"strong"),g(4),h()(),x(5,"br")(6,"app-race-description",11),h()}if(2&t){const e=C(2);p(4),Ze(e.monoRaceRank),p(2),b("race",e.availableMonoRace)("showStartText",!0)}}function IH(t,i){1&t&&(f(0,"div",12),g(1," Next Mono Race Available After Circuit Rank Up "),h())}function OH(t,i){if(1&t&&(f(0,"div",6),M(1,EH,7,3,"div",7),M(2,IH,2,0,"div",8),x(3,"hr"),h()),2&t){const e=C();p(1),b("ngIf",null!=e.availableMonoRace),p(1),b("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function NH(t,i){if(1&t){const e=fe();f(0,"div",16),N("click",function(){B(e);const r=C(2);return r.selectLocalRace(r.availableDuoRace)}),f(1,"span",10),g(2,"Duo Race "),f(3,"strong"),g(4),h()(),x(5,"br")(6,"app-race-description",11),h()}if(2&t){const e=C(2);p(4),Ze(e.duoRaceRank),p(2),b("race",e.availableDuoRace)("showStartText",!0)}}function VH(t,i){1&t&&(f(0,"div",17),g(1," Next Duo Race Available After Circuit Rank Up "),h())}function FH(t,i){if(1&t&&(f(0,"div",13),M(1,NH,7,3,"div",14),M(2,VH,2,0,"div",15),x(3,"hr"),h()),2&t){const e=C();p(1),b("ngIf",null!=e.availableDuoRace),p(1),b("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function BH(t,i){if(1&t){const e=fe();f(0,"div",21),N("click",function(){B(e);const r=C(2);return r.selectLocalRace(r.availableRainbowRace)}),f(1,"span",10),g(2,"Rainbow Race "),f(3,"strong"),g(4),h()(),x(5,"br")(6,"app-race-description",11),h()}if(2&t){const e=C(2);p(4),Ze(e.rainbowRaceRank),p(2),b("race",e.availableRainbowRace)("showStartText",!0)}}function LH(t,i){1&t&&(f(0,"div",22),g(1," Next Rainbow Race Available After Circuit Rank Up "),h())}function UH(t,i){if(1&t&&(f(0,"div",18),M(1,BH,7,3,"div",19),M(2,LH,2,0,"div",20),x(3,"hr"),h()),2&t){const e=C();p(1),b("ngIf",null!=e.availableRainbowRace),p(1),b("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}let HH=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.utilityService=n,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new nt,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){this.availableLocalRaces=[];var e=this.getNextAvailableSpecialRace(Wt.Mono);void 0!==e&&(this.availableMonoRace=e);var n=this.getNextAvailableSpecialRace(Wt.Duo);void 0!==n&&(this.availableDuoRace=n);var r=this.getNextAvailableSpecialRace(Wt.Rainbow);void 0!==r&&(this.availableRainbowRace=r);var a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&(null!=this.availableDuoRace&&(this.availableDuoRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableDuoRace.raceLegs,a)),null!=this.availableRainbowRace&&(this.availableRainbowRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableRainbowRace.raceLegs,a))),this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?(null!=this.availableMonoRace&&(this.monoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableMonoRace.requiredRank).toString()),null!=this.availableDuoRace&&(this.duoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableDuoRace.requiredRank).toString()),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableRainbowRace.requiredRank).toString())):(null!=this.availableMonoRace&&(this.monoRaceRank=this.availableMonoRace.requiredRank),null!=this.availableDuoRace&&(this.duoRaceRank=this.availableDuoRace.requiredRank),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.availableRainbowRace.requiredRank)),this.areMonoRacesAvailable=this.lookupService.isItemUnlocked("monoRace"),this.areDuoRacesAvailable=this.lookupService.isItemUnlocked("duoRace"),this.areRainbowRacesAvailable=this.lookupService.isItemUnlocked("rainbowRace")}getNextAvailableSpecialRace(e){return e===Wt.Mono&&this.globalService.GenerateMonoRaces(this.globalService.globalVar.monoRank),e===Wt.Duo&&this.globalService.GenerateDuoRaces(this.globalService.globalVar.duoRank),e===Wt.Rainbow&&this.globalService.GenerateRainbowRaces(this.globalService.globalVar.rainbowRank),this.globalService.globalVar.localRaces.find(n=>n.localRaceType===e)}sortByRankRequired(e,n){return e.requiredRank>n.requiredRank?1:n.requiredRank>e.requiredRank?-1:0}selectLocalRace(e){var n=!0,r=e.localRaceType===Wt.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(l=>l.raceCourseType===o.courseType))||(n=!1);var s=null==a?void 0:a.selectedAnimals.find(l=>l.raceCourseType===o.courseType);void 0!==s&&!this.lookupService.canAnimalRace(s)&&(n=!1)}),n&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):n=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(Li),P(hn),P(mi))},t.\u0275cmp=lt({type:t,selectors:[["app-local-view"]],outputs:{raceSelected:"raceSelected"},decls:8,vars:3,consts:[[1,"localViewDiv"],[1,"localRaceHeader"],[1,"allLocalRaces"],["id","monoRaceSection",4,"ngIf"],["id","duoRaceSection",4,"ngIf"],["id","rainbowRaceSection",4,"ngIf"],["id","monoRaceSection"],["class","monoRace",3,"click",4,"ngIf"],["class","monoRace",4,"ngIf"],[1,"monoRace",3,"click"],[1,"s4Heading"],[3,"race","showStartText"],[1,"monoRace"],["id","duoRaceSection"],["class","duoRace",3,"click",4,"ngIf"],["class","duoRace",4,"ngIf"],[1,"duoRace",3,"click"],[1,"duoRace"],["id","rainbowRaceSection"],["class","rainbowRace",3,"click",4,"ngIf"],["class","rainbowRace",4,"ngIf"],[1,"rainbowRace",3,"click"],[1,"rainbowRace"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,"div",1)(2,"app-animal-deck")(3,"hr"),f(4,"div",2),M(5,OH,4,2,"div",3),M(6,FH,4,2,"div",4),M(7,UH,4,2,"div",5),h()()),2&e&&(p(5),b("ngIf",n.areMonoRacesAvailable),p(1),b("ngIf",n.areDuoRacesAvailable),p(1),b("ngIf",n.areRainbowRacesAvailable))},directives:[T0,en,D0],styles:[".allLocalRaces[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}"]}),t})();function GH(t,i){1&t&&(f(0,"div"),x(1,"br"),h())}function jH(t,i){1&t&&(f(0,"span",8),g(1," Will Start Race "),h())}function zH(t,i){if(1&t){const e=fe();f(0,"button",12),N("click",function(){B(e);const r=C(5).$implicit;return C().chooseToStartRace(r)}),g(1,"Choose To Start Race"),h()}}function $H(t,i){if(1&t&&(f(0,"span")(1,"em",7),g(2,"Resting..."),h()()),2&t){const e=C(6);p(1),b("ngbPopover",e.getRestingPopover())}}function qH(t,i){if(1&t&&(f(0,"span"),M(1,zH,2,0,"button",11),M(2,$H,3,1,"span",6),h()),2&t){const e=C(4).$implicit,n=C();p(1),b("ngIf",!n.isSetToRelay(e)&&n.canRelay(e)),p(1),b("ngIf",!n.isSetToRelay(e)&&!n.canRelay(e))}}function WH(t,i){if(1&t&&(f(0,"div"),M(1,jH,2,0,"span",10),M(2,qH,3,2,"span",6),h()),2&t){const e=C(3).$implicit,n=C();p(1),b("ngIf",n.isCurrentlyRacing(e)),p(1),b("ngIf",!n.isCurrentlyRacing(e))}}function XH(t,i){1&t&&(f(0,"span",8),g(1," Currently Racing "),h())}function YH(t,i){if(1&t){const e=fe();f(0,"button",14),N("click",function(){B(e);const r=C(4).$implicit;return C().pullFromRace(r)}),g(1," Pull From Race "),h()}}function QH(t,i){if(1&t){const e=fe();f(0,"button",12),N("click",function(){B(e);const r=C(5).$implicit;return C().relayAnimal(r)}),g(1,"Relay"),h()}}function KH(t,i){if(1&t&&(f(0,"span")(1,"em",7),g(2,"Resting..."),h()()),2&t){const e=C(6);p(1),b("ngbPopover",e.getRestingPopover())}}function ZH(t,i){1&t&&(f(0,"span"),g(1,"Set To Relay"),h())}function JH(t,i){if(1&t&&(f(0,"span"),M(1,QH,2,0,"button",11),M(2,KH,3,1,"span",6),M(3,ZH,2,0,"span",6),h()),2&t){const e=C(4).$implicit,n=C();p(1),b("ngIf",!n.isSetToRelay(e)&&n.canRelay(e)),p(1),b("ngIf",!n.isSetToRelay(e)&&!n.canRelay(e)),p(1),b("ngIf",n.isSetToRelay(e))}}function e7(t,i){if(1&t&&(f(0,"div"),M(1,XH,2,0,"span",10),M(2,YH,2,0,"button",13),M(3,JH,4,3,"span",6),h()),2&t){const e=C(3).$implicit,n=C();p(1),b("ngIf",n.isCurrentlyRacing(e)),p(1),b("ngIf",n.isCurrentlyRacing(e)),p(1),b("ngIf",!n.isCurrentlyRacing(e))}}function t7(t,i){if(1&t&&(f(0,"div"),M(1,WH,3,2,"div",6),M(2,e7,4,3,"div",6),h()),2&t){const e=C(3);p(1),b("ngIf",!e.enteredEvent()),p(1),b("ngIf",e.enteredEvent())}}function n7(t,i){if(1&t&&(f(0,"div")(1,"em"),g(2),h()()),2&t){const e=C(3);p(2),Q("Breed Level ",e.breedLevelRequired," Required")}}function i7(t,i){if(1&t&&(f(0,"div"),x(1,"br"),f(2,"div")(3,"span",7)(4,"span",8),g(5,"Morale:"),h(),g(6),At(7,"number"),h(),x(8,"br"),f(9,"span",7)(10,"span",8),g(11,"Energy:"),h(),g(12),At(13,"number"),h(),x(14,"br"),M(15,GH,2,0,"div",6),x(16,"div",9),h(),x(17,"br")(18,"br"),M(19,t7,3,2,"div",6),M(20,n7,3,1,"div",6),h()),2&t){const e=C().$implicit,n=C();p(3),b("ngbPopover",n.getMoralePopover(e)),p(3),Q(" ",Jt(7,8,n.getMorale(e),"1.2-2"),"%"),p(3),b("ngbPopover",n.getEnergyPopover(e)),p(3),Q(" ",Jt(13,11,n.getExhaustion(e),"1.2-2"),"%"),p(3),b("ngIf",""===n.getUseCountInformation(e)),p(1),b("innerHTML",n.getUseCountInformation(e),jt),p(3),b("ngIf",n.canEnterGrandPrix(e)),p(1),b("ngIf",!n.canEnterGrandPrix(e))}}function r7(t,i){if(1&t&&(f(0,"div",4)(1,"span",5),g(2),h(),M(3,i7,21,14,"div",6),h()),2&t){const e=i.$implicit,n=C();p(1),b("ngClass",n.getColorClass(e)),p(1),Ze(e.name),p(1),b("ngIf",n.hasEventStarted()&&!n.eventCompleted())}}let a7=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.componentCommunicationService=n,this.lookupService=r,this.utilityService=a,this.organizedAnimals=[]}ngOnInit(){var e=this.globalService.globalVar.animalDecks.find(o=>o.isEventDeck);if(void 0!==e&&(this.deck=e),null!=this.deck)if(this.deck.isCourseOrderActive){for(var n=0;n<this.deck.selectedAnimals.length;n++)if(this.deck.courseTypeOrder.length>n){var r=this.deck.courseTypeOrder[n],a=this.deck.selectedAnimals.find(o=>o.raceCourseType===r);void 0!==a&&this.organizedAnimals.push(a)}}else this.deck.selectedAnimals.forEach(o=>{this.organizedAnimals.push(o)});this.breedLevelRequired=this.getBreedLevelRequired()}getMorale(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==n?0:100*n.morale}getExhaustion(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var n=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==n?0:100*n.exhaustionStatReduction}eventCompleted(){return this.globalService.globalVar.eventRaceData.isGrandPrixCompleted}hasEventStarted(){return!(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime)}enteredEvent(){return this.globalService.globalVar.eventRaceData.isRunning}canEnterGrandPrix(e){var n=!1,r=this.getBreedLevelRequired(),a=this.globalService.globalVar.animals.find(o=>o.type===e.type);return void 0!==a&&a.breedLevel>=r&&(n=!0),n}getBreedLevelRequired(){var e=50,n=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=n&&(e=n.value),e}chooseToStartRace(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==n){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==n?void 0:n.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isCurrentlyRacing=!1}),n.isCurrentlyRacing=!0)}}}isCurrentlyRacing(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.isCurrentlyRacing}isSetToRelay(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.isSetToRelay}canRelay(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=n&&n.exhaustionStatReduction>.5}relayAnimal(e){var n=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==n){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==n?void 0:n.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isSetToRelay=!1}),n.isSetToRelay=!0)}}}pullFromRace(e){this.globalService.stopGrandPrixRace()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}getRestingPopover(){return"Racer must be above 50% energy to race"}getMoralePopover(e){var n="",r=this.getMorale(e);if(void 0!==r){var a=.9,o=this.globalService.globalVar.modifiers.find(l=>"exhaustionStatLossModifier"===l.text);void 0!==o&&(a=o.value);var s=1-a;a=1-(s*=1/(r/100)),n="Your current Morale is "+r.toFixed(2)+"%. Your energy will reduce by "+(100*(1-a)).toFixed(2)+"% every time you run out of stamina."}return n}getEnergyPopover(e){return""+"Your current Energy is "+this.getExhaustion(e).toFixed(2)+"%. Your stats are reduced to this amount while racing in the grand prix."}getUseCountInformation(e){var n="",r=this.globalService.globalVar.eventRaceData.eventAbilityData,a=this.globalService.globalVar.animals.find(o=>o.type===e.type);if(null!=a)return a.type===X.Horse&&"Inspiration"===a.ability.name&&(n+="Inspiration Relay Count: "+r.inspirationUseCount),a.type===X.Cheetah&&"On The Hunt"===a.ability.name&&(n+="On The Hunt Use Count: "+r.onTheHuntUseCount+" / "+r.onTheHuntUseCap),a.type===X.Goat&&("Sure-footed"===a.ability.name&&(n+="Sure-footed Use Count: "+r.sureFootedUseCount+" / "+r.sureFootedUseCap),"Deep Breathing"===a.ability.name&&(n+="Deep Breathing Relay Count: "+r.deepBreathingUseCount+" / "+r.deepBreathingUseCap)),a.type===X.Gecko&&"Night Vision"===a.ability.name&&(n+="Night Vision Use Count: "+r.nightVisionUseCount+" / "+r.nightVisionUseCap),a.type===X.Dolphin&&("Flowing Current"===a.ability.name&&(n+="Flowing Current Relay Count: "+r.flowingCurrentUseCount),"Navigator"===a.ability.name&&(n+="Navigator Relay Count: "+r.navigatorUseCount)),a.type===X.Octopus&&"Big Brain"===a.ability.name&&(n+="Big Brain Relay Count: "+r.bigBrainUseCount+" / "+r.bigBrainUseCap),a.type===X.Penguin&&"Quick Toboggan"===a.ability.name&&(n+="Quick Toboggan Use Count: "+r.quickTobogganUseCount+" / "+r.quickTobogganUseCap),a.type===X.Caribou&&("Herd Mentality"===a.ability.name&&(n+="Herd Mentality Relay Count: "+r.herdMentalityUseCount+" / "+r.herdMentalityUseCap),"Special Delivery"===a.ability.name&&(n+="Special Delivery Relay Count: "+r.specialDeliveryUseCount+" / "+r.specialDeliveryUseCap)),this.utilityService.getSanitizedHtml(n)}goToDeckView(){this.componentCommunicationService.setNewView(ft.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(qn),P(hn),P(Li))},t.\u0275cmp=lt({type:t,selectors:[["app-event-animal-deck"]],decls:7,vars:2,consts:[[1,"deckName"],[1,"clickableText",3,"click"],[1,"flex"],["class","eventAnimal",4,"ngFor","ngForOf"],[1,"eventAnimal"],[1,"coloredText",3,"ngClass"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"keyword"],[3,"innerHTML"],["class","keyword",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","keyword",3,"click",4,"ngIf"],[1,"keyword",3,"click"]],template:function(e,n){1&e&&(f(0,"div")(1,"div",0)(2,"strong",1),N("click",function(){return n.goToDeckView()}),g(3),h()(),x(4,"br"),f(5,"div",2),M(6,r7,4,3,"div",3),h()()),2&e&&(p(3),Ze(n.deck.name),p(3),b("ngForOf",n.organizedAnimals))},directives:[jn,Bn,en,Or],pipes:[no],styles:[".flex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.deckName[_ngcontent-%COMP%]{text-align:center}.eventAnimal[_ngcontent-%COMP%]{flex:1}"]}),t})();const o7=["loadingModal"];function s7(t,i){1&t&&(f(0,"p",6),g(1,"Coming Soon!"),h())}function l7(t,i){if(1&t){const e=fe();f(0,"div",14),N("click",function(){B(e);const r=C(3),a=it(9);return r.selectEventRace(a)}),g(1),x(2,"br"),h()}if(2&t){const e=C(3);b("ngbPopover",it(7)),p(1),Q("Bonus Time: ",e.bonusTime," ")}}function c7(t,i){1&t&&(f(0,"h6",20),g(1,"View Race"),h())}function u7(t,i){1&t&&(f(0,"h6",24)(1,"em"),g(2,"Please Wait -- Offline Time Is Calculating"),h()())}function d7(t,i){1&t&&(f(0,"h6",24)(1,"em"),g(2,"Loading.."),h()())}function h7(t,i){1&t&&(f(0,"h6",20),g(1,"Start"),h())}function f7(t,i){1&t&&(f(0,"h6")(1,"em"),g(2,"Completed!"),h()())}function p7(t,i){if(1&t&&(f(0,"div",25),g(1),h()),2&t){const e=C(4);p(1),Q(" ",e.popoverText," ")}}const g7=function(t){return{raceNotAllowed:t}};function m7(t,i){if(1&t){const e=fe();f(0,"div",15)(1,"div")(2,"span",16),g(3,"Grand Prix "),f(4,"strong"),g(5),h()(),x(6,"br"),f(7,"span",17),N("click",function(){B(e);const r=C(3),a=it(3);return r.openRewardsModal(a)}),g(8),h(),x(9,"br")(10,"br"),f(11,"div",18)(12,"div",19),N("click",function(){B(e);const r=C(3),a=it(9);return r.selectEventRace(a)}),f(13,"span")(14,"span",20),g(15,"Forecast:"),h(),g(16),h(),x(17,"br"),g(18),At(19,"number"),x(20,"br"),M(21,c7,2,0,"h6",21),M(22,u7,3,0,"h6",22),M(23,d7,3,0,"h6",22),M(24,h7,2,0,"h6",21),M(25,f7,3,0,"h6",9),h()(),M(26,p7,2,1,"ng-template",null,23,rt),h()()}if(2&t){const e=it(27),n=C(3);p(5),Ze(n.grandPrixData.rank),p(3),Kn("",n.globalService.globalVar.eventRaceData.remainingRewards," / ",n.globalService.globalVar.eventRaceData.totalRewards," rewards remaining"),p(4),b("ngClass",Jn(16,g7,n.grandPrixData.isCatchingUp))("ngbPopover",e)("disablePopover",""===n.popoverText),p(4),Q(" ",void 0===n.grandPrixData.weatherCluster?"Unknown":n.lookupService.getWeatherClusterFromEnum(n.grandPrixData.weatherCluster),""),p(2),Q(" ",Jt(19,13,n.remainingMeters,"1.")," Meters Remaining "),p(3),b("ngIf",n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted&&!n.grandPrixData.isCatchingUp),p(1),b("ngIf",n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted&&n.grandPrixData.isCatchingUp),p(1),b("ngIf",n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted&&!n.grandPrixData.isCatchingUp&&n.grandPrixData.isLoading),p(1),b("ngIf",!n.grandPrixData.isRunning&&!n.grandPrixData.isGrandPrixCompleted),p(1),b("ngIf",!n.grandPrixData.isRunning&&n.grandPrixData.isGrandPrixCompleted)}}function v7(t,i){1&t&&(f(0,"div",28),g(1," None "),h())}function b7(t,i){if(1&t&&(f(0,"td")(1,"span",20),g(2),h(),g(3),h()),2&t){const e=i.$implicit;p(2),Ze(e.name),p(1),Q(": ",e.amount,"")}}function _7(t,i){if(1&t&&(f(0,"tr"),M(1,b7,4,2,"td",29),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function y7(t,i){if(1&t&&(f(0,"div",28)(1,"table"),M(2,_7,2,1,"tr",29),h()()),2&t){const e=C(4);p(2),b("ngForOf",e.rewardRows)}}function C7(t,i){if(1&t&&(f(0,"div"),x(1,"br")(2,"br"),f(3,"div",26)(4,"span",16),g(5,"Previous Grand Prix Rewards"),h(),M(6,v7,2,0,"div",27),M(7,y7,3,1,"div",27),h()()),2&t){const e=C(3);p(6),b("ngIf",0===e.previousRaceRewardList.length),p(1),b("ngIf",e.previousRaceRewardList.length>0)}}function w7(t,i){if(1&t){const e=fe();f(0,"div")(1,"div"),g(2),x(3,"br"),M(4,l7,3,2,"div",10),f(5,"button",11),N("click",function(){B(e);const r=C(2),a=it(5);return r.openInfoModal(a)}),g(6,"Grand Prix Info"),h(),f(7,"button",12),N("click",function(){return B(e),C(2).goToTokenShop()}),g(8,"Token Shop"),h(),x(9,"br")(10,"br"),h(),x(11,"br"),M(12,m7,28,18,"div",13),x(13,"br"),f(14,"div"),x(15,"app-event-animal-deck"),h(),M(16,C7,8,2,"div",9),h()}if(2&t){const e=C(2);p(2),Kn(" ",e.eventRaceNotice," ",e.eventRaceTimer," "),p(2),b("ngIf",""!==e.bonusTime),p(8),b("ngIf",e.isEventRaceAvailable),p(4),b("ngIf",null!=e.previousRaceRewardList&&!e.isEventRaceAvailable)}}function S7(t,i){1&t&&(f(0,"div"),g(1," Nothing here yet, but maybe as you climb the circuit ranks you might be invited to a new type of race. "),h())}function T7(t,i){if(1&t&&(f(0,"div",7),x(1,"div",8),M(2,w7,17,5,"div",9),M(3,S7,2,0,"div",9),h()),2&t){const e=C();p(2),b("ngIf",e.grandPrixUnlocked),p(1),b("ngIf",!e.grandPrixUnlocked)}}function D7(t,i){if(1&t){const e=fe();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Grand Prix Rewards"),h(),f(4,"button",33),N("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",34)(7,"div"),g(8),At(9,"number"),At(10,"number"),x(11,"br")(12,"br"),g(13),At(14,"number"),At(15,"number"),x(16,"br")(17,"br")(18,"div",35)(19,"div",35)(20,"div",35),h()(),f(21,"div",36)(22,"button",37),N("click",function(){return B(e).$implicit.dismiss()}),g(23,"Close"),h()()()}if(2&t){const e=C();p(8),Og(" The further you go in the Grand Prix invitational, the more rewards you'll receive. Every ",Jt(9,9,e.coinRewardInterval,"1.")," meters, you'll receive ",e.coinRewardAmount," Coins. Every ",Jt(10,12,e.renownRewardInterval,"1.")," meters, you'll receive ",e.renownRewardAmount," Renown. Also, you'll be able to obtain rare tokens that can be spent on rare upgrades. "),p(5),Kn(" Distance Covered: ",Jt(14,15,(e.grandPrixData.totalDistance-e.remainingMeters).toFixed(0),"1.")," / ",Jt(15,18,e.grandPrixData.totalDistance,"1.")," "),p(5),b("innerHTML",e.getGrandPrixCoinRewardsPopover(),jt),p(1),b("innerHTML",e.getGrandPrixRenownRewardsPopover(),jt),p(1),b("innerHTML",e.getGrandPrixTokenRewardsPopover(),jt)}}function R7(t,i){if(1&t){const e=fe();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Grand Prix Info"),h(),f(4,"button",33),N("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",34)(7,"div"),g(8," You've been invited to the "),f(9,"span",20),g(10,"Grand Prix"),h(),g(11," invitational, which is a marathon style race that runs for 51 hours twice a week. You can start the race at any time during the start and stop point of the Grand Prix. "),f(12,"b"),g(13,"It will run on its own in the background -- you don't have to watch your animals race for it to run."),h(),g(14," You have the option to view the race as desired by clicking the race. The weekly start and end times are: "),x(15,"br")(16,"br"),f(17,"span",20),g(18,"Weekday Marathon"),h(),g(19),x(20,"br"),f(21,"span",20),g(22,"Weekend Marathon"),h(),g(23),x(24,"br")(25,"br"),g(26),x(27,"br")(28,"br"),f(29,"span",20),g(30,"Morale"),h(),g(31," - This affects how much your stats reduce when running out of stamina. By default, your stats will reduce by 10% while Morale is at 100%. Morale can range from 50% to 300%. "),x(32,"br"),f(33,"span",20),g(34,"Energy"),h(),g(35," - The percent your stats are currently at from their maximum. This is increased slightly over time while a racer is not racing. "),x(36,"br"),f(37,"span",20),g(38,"*Note that these values have no impact on any race other than the Grand Prix."),h(),x(39,"br")(40,"br"),g(41," Maintain your morale and energy to get the most out of your racing animals. You can Relay to another animal in your event deck at any point, although the Relay will only occur after the completion of the current race leg. "),x(42,"br")(43,"br"),g(44," Race as far as you can to gain "),f(45,"span",38),g(46,"Coins"),h(),g(47,", "),f(48,"span",39),g(49,"Renown"),h(),g(50,", and the unique resource "),f(51,"span",38),g(52,"Tokens"),h(),g(53,". Click '"),f(54,"em"),g(55,"Rewards"),h(),g(56,"' to track your progress on gaining rewards. "),h()(),f(57,"div",36)(58,"button",37),N("click",function(){return B(e).$implicit.dismiss()}),g(59,"Close"),h()()()}if(2&t){const e=C();p(19),Q(" - ",e.weekDayGrandPrixTimeSpan," "),p(4),Q(" - ",e.weekEndGrandPrixTimeSpan," "),p(3),Q(" To run in the Grand Prix, animals must be at least Breed Level ",e.requiredBreedLevel,". The animals in your event deck will be shown below along with their current morale and energy. ")}}function x7(t,i){1&t&&(f(0,"div",25),g(1," Bonus Time is accrued from effects that delay competitors or extend the length of a race. Once the Grand Prix event time ends, any bonus time will continue to play out before your entry to the Grand Prix ends. "),h())}function M7(t,i){1&t&&(f(0,"div",25),g(1," Loading... "),h())}let k7=(()=>{class t{constructor(e,n,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.raceLogicService=a,this.sanitizer=o,this.modalService=s,this.componentCommunicationService=l,this.utilityService=c,this.raceSelected=new nt,this.popoverText="",this.cannotRace=!1,this.eventRaceReleased=!0,this.eventRaceNotice="",this.eventRaceTimer="",this.bonusTime="",this.grandPrixUnlocked=!1}ngOnInit(){var e=this;this.grandPrixData=this.globalService.globalVar.eventRaceData,this.previousRaceRewardList=this.globalService.globalVar.previousEventRewards,this.grandPrixUnlocked=this.lookupService.isItemUnlocked("grandPrix"),this.weekDayGrandPrixTimeSpan=this.lookupService.getWeekDayGrandPrixTimeSpan(),this.weekEndGrandPrixTimeSpan=this.lookupService.getWeekEndGrandPrixTimeSpan(),this.requiredBreedLevel=this.lookupService.getBreedLevelRequiredForGrandPrix(),this.popoverText=this.getForecastPopoverText();var n=this.globalService.getGrandPrixRacingAnimal();if(!this.globalService.globalVar.eventRaceData.animalData.some(c=>c.isCurrentlyRacing)){var r=this.globalService.globalVar.eventRaceData.animalData.find(c=>c.associatedAnimalType==n.type);void 0!==r&&(r.isCurrentlyRacing=!0)}var a=this.globalService.globalVar.modifiers.find(c=>"grandPrixCoinRewardModifier"===c.text);null!=a&&(this.coinRewardAmount=a.value);var o=this.globalService.globalVar.modifiers.find(c=>"grandPrixRenownRewardModifier"===c.text);null!=o&&(this.renownRewardAmount=o.value);var s=this.globalService.globalVar.modifiers.find(c=>"metersPerCoinsGrandPrixModifier"===c.text);null!=s&&(this.coinRewardInterval=s.value);var l=this.globalService.globalVar.modifiers.find(c=>"metersPerRenownGrandPrixModifier"===c.text);null!=l&&(this.renownRewardInterval=l.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var c=vr(function*(u){e.setupEventTime(),e.grandPrixData=e.globalService.globalVar.eventRaceData,e.previousRaceRewardList=e.globalService.globalVar.previousEventRewards,e.previousRaceRewardList.length>0&&e.setupDisplayRewards(),e.remainingMeters=e.globalService.globalVar.eventRaceData.totalDistance-e.globalService.globalVar.eventRaceData.distanceCovered,null!=e.globalService.globalVar.eventRaceData&&null!=e.globalService.globalVar.eventRaceData.currentRaceSegment&&(e.grandPrixData.isCatchingUp=e.globalService.globalVar.eventRaceData.segmentTimeCounter>=e.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60*2)});return function(u){return c.apply(this,arguments)}}())}selectEventRace(e){if(!1===this.globalService.globalVar.eventRaceData.isRunning){var n=this.globalService.getGrandPrixRacingAnimal();if(null==n.type)return void alert("None of the animals in your event deck are capable of entering the Grand Prix. Swap to new animals or make adjustments to your existing animals to meet the criteria.");var r=this.globalService.shouldShowSlowSegmentWarning(n);if(!this.lookupService.slowSegmentWarning(r))return;this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(n),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(n),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}!this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&!this.globalService.globalVar.eventRaceData.isCatchingUp&&this.raceSelected.emit(this.globalService.globalVar.eventRaceData.currentRaceSegment)}setupEventTime(){var e=this.globalService.getTimeToEventRace();if(e>0){this.isEventRaceAvailable=this.globalService.globalVar.eventRaceData.bonusTime>0,this.eventRaceNotice="Next Grand Prix available in";var a=e-60*(n=Math.floor(e/3600))*60-60*(r=Math.floor(e/60-60*n)),o=Math.floor(a).toString(),s=n.toString(),l=r.toString();n<10&&(s=n<1||n>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}else{var n,r,c=this.globalService.getRemainingEventRaceTime();if(c>0)this.eventRaceNotice="Grand Prix ends in",this.isEventRaceAvailable=!0,a=c-60*(n=Math.floor(c/3600))*60-60*(r=Math.floor(c/60-60*n)),s=n.toString(),l=r.toString(),o=Math.floor(a).toString(),n<10&&(s=n<1||n>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}this.bonusTime=this.globalService.globalVar.eventRaceData.bonusTime>0?this.utilityService.convertSecondsToHHMMSS(this.globalService.globalVar.eventRaceData.bonusTime):""}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openInfoModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openLoadingModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}getGrandPrixRenownRewardsPopover(){var r,a=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return r=this.globalService.globalVar.eventRaceData.totalDistance/(this.renownRewardInterval*a),Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/(this.renownRewardInterval*a))*this.renownRewardAmount+"/"+r*this.renownRewardAmount+" Renown obtained"}getGrandPrixCoinRewardsPopover(){var r,a=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return r=this.globalService.globalVar.eventRaceData.totalDistance/(this.coinRewardInterval*a),Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/(this.coinRewardInterval*a))*this.coinRewardAmount+"/"+r*this.coinRewardAmount+" Coins obtained"}getGrandPrixTokenRewardsPopover(){var e="",n=this.lookupService.getGrandPrixTokenRewards(),r=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),a=5e7,o=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken1MeterModifier"===w.text);null!=o&&(a=o.value);var s=n[0],l=5e7,c=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken2MeterModifier"===w.text);null!=c&&(l=c.value);var u=n[1],d=5e7,m=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken3MeterModifier"===w.text);null!=m&&(d=m.value);var v=n[2],_=5e7,y=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken4MeterModifier"===w.text);null!=y&&(_=y.value);var S=n[3],D=this.globalService.globalVar.eventRaceData.distanceCovered;return e+=D>=a*r?"<span class='crossed'>"+s+"</span>\n":"<span>"+s+"</span>\n",e+=D>=l*r?"<span class='crossed'>"+u+"</span>\n":"<span>"+u+"</span>\n",e+=D>=d*r?"<span class='crossed'>"+v+"</span>\n":"<span>"+v+"</span>\n",this.sanitizer.sanitize(Kt.HTML,this.sanitizer.bypassSecurityTrustHtml(e+=D>=_*r?"<span class='crossed'>"+S+"</span>\n":"<span>"+S+"</span>\n"))}getForecastPopoverText(){return this.lookupService.getWeatherClusterDescription(this.grandPrixData.weatherCluster)}goToTokenShop(){this.componentCommunicationService.setShopView(ft.shop,La.token)}setupDisplayRewards(){if(this.rewardCells=[],this.rewardRows=[],null!=this.previousRaceRewardList){for(var n=1;n<=this.previousRaceRewardList.length;n++)this.rewardCells.push({name:this.previousRaceRewardList[n-1].name,amount:this.previousRaceRewardList[n-1].amount}),n%4==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(mi),P(hn),P(Yv),P(Mo),P(lo),P(qn),P(Li))},t.\u0275cmp=lt({type:t,selectors:[["app-event-view"]],viewQuery:function(e,n){if(1&e&&ca(o7,7),2&e){let r;un(r=dn())&&(n.loadingContent=r.first)}},outputs:{raceSelected:"raceSelected"},decls:10,vars:2,consts:[["class","centered",4,"ngIf"],["class","eventViewDiv centered",4,"ngIf"],["grandPrixRewardModal",""],["grandPrixInfoModal",""],["bonusTimeContent",""],["loadingModal",""],[1,"centered"],[1,"eventViewDiv","centered"],[1,"eventRaceHeader"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass","class","clickableText",3,"ngbPopover","click",4,"ngIf"],["type","button",1,"rightSpaced",3,"click"],[3,"click"],["id","grandPrix",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngbPopover","click"],["id","grandPrix"],[1,"s4Heading"],[1,"helpText",3,"click"],[1,"raceDescription"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText","eventRaceDescription",3,"ngClass","ngbPopover","disablePopover","click"],[1,"keyword"],["class","keyword",4,"ngIf"],["class","raceCatchingUp",4,"ngIf"],["popContent",""],[1,"raceCatchingUp"],[1,"popoverClass"],[1,"results"],["class","rewards",4,"ngIf"],[1,"rewards"],[4,"ngFor","ngForOf"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"],[1,"resourceKeyword"],[1,"progressionKeyword"]],template:function(e,n){1&e&&(M(0,s7,2,0,"p",0),M(1,T7,4,2,"div",1),M(2,D7,24,21,"ng-template",null,2,rt),M(4,R7,60,3,"ng-template",null,3,rt),M(6,x7,2,0,"ng-template",null,4,rt),M(8,M7,2,0,"ng-template",null,5,rt)),2&e&&(b("ngIf",!n.eventRaceReleased),p(1),b("ngIf",n.eventRaceReleased))},directives:[en,Or,Bn,a7,jn],pipes:[no],styles:[".eventRace[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.centered[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.eventRaceDescription[_ngcontent-%COMP%]{width:40%;margin:auto}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.raceCatchingUp[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}table[_ngcontent-%COMP%]{table-layout:fixed;width:60%;height:100%;text-align:center;margin-left:auto;margin-right:auto}"]}),t})();function A7(t,i){if(1&t){const e=fe();f(0,"div",14)(1,"div",15)(2,"span",9),g(3,"Intermediate Track"),h(),x(4,"br"),f(5,"h6",10),N("click",function(){B(e);const r=C(2),a=it(9);return r.openRewardsModal(a)}),g(6),h(),x(7,"br"),f(8,"app-race-description",11),N("click",function(){B(e);const r=C(2);return r.selectTrackRace(r.intermediateTrackRace)}),h()(),x(9,"hr"),h()}if(2&t){const e=C(2);p(6),Kn("",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),p(2),b("race",e.intermediateTrackRace)("showStartText",!0)}}function P7(t,i){if(1&t){const e=fe();f(0,"div",16)(1,"div",17)(2,"span",9),g(3,"Master Track"),h(),x(4,"br"),f(5,"h6",10),N("click",function(){B(e);const r=C(2),a=it(11);return r.openRewardsModal(a)}),g(6),h(),x(7,"br"),f(8,"app-race-description",11),N("click",function(){B(e);const r=C(2);return r.selectTrackRace(r.masterTrackRace)}),h()(),x(9,"hr"),h()}if(2&t){const e=C(2);p(6),Kn("",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),p(2),b("race",e.masterTrackRace)("showStartText",!0)}}function E7(t,i){if(1&t){const e=fe();f(0,"div",6)(1,"div",7)(2,"div",8)(3,"span",9),g(4,"Novice Track"),h(),x(5,"br"),f(6,"h6",10),N("click",function(){B(e);const r=C(),a=it(7);return r.openRewardsModal(a)}),g(7),h(),x(8,"br"),f(9,"app-race-description",11),N("click",function(){B(e);const r=C();return r.selectTrackRace(r.noviceTrackRace)}),h()(),x(10,"hr"),h(),M(11,A7,10,4,"div",12),M(12,P7,10,4,"div",13),h()}if(2&t){const e=C();p(7),Kn("",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),p(2),b("race",e.noviceTrackRace)("showStartText",!0),p(2),b("ngIf",e.intermediateTrackAvailable),p(1),b("ngIf",e.masterTrackAvailable)}}function I7(t,i){if(1&t){const e=fe();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Novice Rewards"),h(),f(4,"button",21),N("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),x(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),N("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=C();p(11),b("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.novice),jt)}}function O7(t,i){if(1&t){const e=fe();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Intermediate Rewards"),h(),f(4,"button",21),N("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),x(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),N("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=C();p(11),b("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.intermediate),jt)}}function N7(t,i){if(1&t){const e=fe();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Master Rewards"),h(),f(4,"button",21),N("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),x(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),N("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=C();p(11),b("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.master),jt)}}let V7=(()=>{class t{constructor(e,n,r,a,o){this.globalService=e,this.lookupService=n,this.sanitizer=r,this.modalService=a,this.componentCommunicationService=o,this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.raceSelected=new nt,this.showRace=!1,this.trackRaceTypeEnum=$n}ngOnInit(){this.practiceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,$n.practice),this.noviceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,$n.novice),this.intermediateTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,$n.intermediate),this.masterTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,$n.master),this.intermediateTrackAvailable=this.selectedAnimal.allTrainingTracks.intermediateTrackAvailable,this.masterTrackAvailable=this.selectedAnimal.allTrainingTracks.masterTrackAvailable,this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()}}selectTrackRace(e){if(this.lookupService.canAnimalRace(this.selectedAnimal)){var n=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=n&&(n.selectedAnimals=n.selectedAnimals.filter(r=>r.raceCourseType!==this.selectedAnimal.raceCourseType),n.selectedAnimals.push(this.selectedAnimal)),this.raceSelected.emit(e)}}getTrackRewardsPopover(e){var n="",r=this.lookupService.getTrackRaceRewards(e),a=.25,o=this.globalService.globalVar.modifiers.find(u=>"trainingTrackPaceModifier"===u.text);void 0!==o&&(a=o.value);for(var s=0;s<r.length;s++){var l=r[s],c=0;e===$n.novice?c=this.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained:e===$n.intermediate?c=this.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained:e===$n.master&&(c=this.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained),n+=s<c?"<span class='crossed'>("+s*a*100+"% average pace) "+l+"</span>\n":"<span>("+s*a*100+"% average pace) "+l+"</span>\n"}return this.sanitizer.sanitize(Kt.HTML,this.sanitizer.bypassSecurityTrustHtml(n))}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}goToAnimal(){this.componentCommunicationService.setAnimalView(ft.animals,this.selectedAnimal)}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(hn),P(Mo),P(lo),P(qn))},t.\u0275cmp=lt({type:t,selectors:[["app-training-track-race-view"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{raceSelected:"raceSelected"},decls:12,vars:3,consts:[[1,"trainingTrackView"],[1,"keyword","clickableText",3,"ngClass","click"],["class","trainingTracks",4,"ngIf"],["noviceRewardModal",""],["intermediateRewardModal",""],["masterRewardModal",""],[1,"trainingTracks"],["id","trainingTrack1"],[1,"noviceTrackRace"],[1,"s4Heading"],[1,"clickableText","keyword",3,"click"],[3,"race","showStartText","click"],["id","trainingTrack2",4,"ngIf"],["id","trainingTrack3",4,"ngIf"],["id","trainingTrack2"],[1,"intermediateTrackRace"],["id","trainingTrack3"],[1,"masterTrackRace"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0),g(1," Selected Animal: "),f(2,"span",1),N("click",function(){return n.goToAnimal()}),g(3),h(),x(4,"hr"),M(5,E7,13,6,"div",2),h(),M(6,I7,15,1,"ng-template",null,3,rt),M(8,O7,15,1,"ng-template",null,4,rt),M(10,N7,15,1,"ng-template",null,5,rt)),2&e&&(p(2),b("ngClass",n.colorConditional),p(1),Ze(n.selectedAnimal.name),p(2),b("ngIf",!n.showRace))},directives:[Bn,en,D0],styles:[".trainingTrackView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}"]}),t})();const F7=["raceCanvas"];let B7=(()=>{class t{constructor(e,n,r,a,o){this.globalService=e,this.gameLoopService=n,this.utilityService=r,this.lookupService=a,this.themeService=o,this.skipRace=!1,this.pauseRace=!1,this.lengthCompleted=0,this.frameModifier=60,this.mountainEndingY=0,this.icyPatchBackgroundLines=[],this.volcanoYOffset=0,this.volcanoRadiusXModifier=6,this.backgroundVolcanoYStart=0,this.currentRaceFrame=0,this.lastPathEndingX=0,this.lastPathEndingY=0,this.lastPreviousSeconds=0,this.totalRaceModeXDistance=0,this.totalRaceModeYDistance=0,this.deltaY=0,this.yOffscreen=0,this.overviewYOffsetModifier=1,this.visibleDistanceXLeft=0,this.visibleDistanceYTop=0,this.visibleDistanceXRight=0,this.visibleDistanceYBottom=0,this.mountainClimbPercent=.5,this.eventViewStartFrame=0,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,this.newSegment=!1}ngOnInit(){this.globalService.globalVar.userIsRacing=!0,this.skipSubscription=this.skip.subscribe(()=>{this.skipRace=!0,this.isRaceFinished=!0}),this.pauseSubscription=this.pause.subscribe(()=>{this.pauseRace=!this.pauseRace}),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.skipRace=!0,this.isRaceFinished=!0)}ngAfterViewInit(){this.race.raceType===Pe.event&&this.race.eventRaceType===Le.grandPrix&&(this.eventViewStartFrame=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier)),this.totalLegs=this.race.raceLegs.length,this.setupCanvas(),this.canvasXDistanceScale=this.canvasWidth/this.race.length;var e=this.raceCanvas.nativeElement.getContext("2d");e.lineWidth=6;var n=0;this.mountainClimbPercent=this.utilityService.getRandomNumber(.3,.7),this.race.raceType===Pe.event&&this.race.eventRaceType===Le.grandPrix&&(0===this.globalService.globalVar.eventRaceData.mountainClimbPercent?this.globalService.globalVar.eventRaceData.mountainClimbPercent=this.mountainClimbPercent:this.mountainClimbPercent=this.globalService.globalVar.eventRaceData.mountainClimbPercent);var r=this.race.raceUI.timeToCompleteByFrame[this.race.raceUI.timeToCompleteByFrame.length-1];this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{performance.now(),e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.lineWidth=6,this.pauseRace||(n+=a,this.race.raceType===Pe.event&&this.race.eventRaceType===Le.grandPrix&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount>this.lastEventSegment?(this.eventViewStartFrame=0,this.currentRaceFrame=0,this.race=this.globalService.globalVar.eventRaceData.currentRaceSegment,this.newSegment=!0):this.newSegment=!1,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount),this.currentRaceFrame+=1);var s=!1;this.race.raceType===Pe.event&&this.race.eventRaceType===Le.grandPrix&&this.globalService.getRemainingEventRaceTime()>0&&(s=!0),(this.currentRaceFrame>=r*this.frameModifier||this.isRaceFinished||this.skipRace)&&!s?this.displayOverview(e,!0):this.displayRace(e,n),performance.now()})}setupCanvas(){this.raceCanvas.nativeElement.style.width="100%",this.raceCanvas.nativeElement.style.height="100%",this.raceCanvas.nativeElement.width=this.raceCanvas.nativeElement.offsetWidth,this.raceCanvas.nativeElement.height=this.raceCanvas.nativeElement.offsetHeight,this.canvasHeight=this.raceCanvas.nativeElement.height,this.canvasWidth=this.raceCanvas.nativeElement.width}displayOverview(e,n){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.lengthCompleted=0,this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=0,a=!0,l=0;if(this.race.raceLegs.forEach(w=>{void 0!==w.pathData&&0!==w.pathData.length&&(l=0,w.pathData.forEach(T=>{if(w.courseType===z.Flatland)e.lineCap="round",T.routeDesign===qe.Regular&&this.drawRegularFlatlandOverview(e,T,1,1),T.routeDesign===qe.S&&this.drawSFlatlandOverview(e,T,1,1),T.routeDesign===qe.Bumps&&this.drawBumpsFlatlandOverview(e,T,1,1);else if(w.courseType===z.Mountain){e.lineCap="round";var L=this.getCurrentAnimalRacingCourse(this.lengthCompleted)!==z.Mountain||r<w.distance*this.mountainClimbPercent;T.routeDesign===qe.Regular&&this.drawRegularMountainOverview(e,T,1,this.overviewYOffsetModifier,L),T.routeDesign===qe.Crevasse&&this.drawCrevasseMountainOverview(e,T,1,this.overviewYOffsetModifier,L),T.routeDesign===qe.Gaps&&this.drawGapsMountainOverview(e,T,1,this.overviewYOffsetModifier,L),r+=T.length}else w.courseType===z.Ocean&&(e.lineCap="round",T.routeDesign===qe.Regular&&this.drawRegularWaterOverview(e,T,1,1,a),T.routeDesign===qe.Waves&&this.drawWavesWaterOverview(e,T,1,1,a),T.routeDesign===qe.Dive&&this.drawDiveWaterOverview(e,T,1,1,a),a=!a);w.courseType===z.Tundra&&(e.lineCap="round",T.routeDesign===qe.Regular&&this.drawRegularTundraOverview(e,T,1,1),T.routeDesign===qe.Cavern&&this.drawCavernTundraOverview(e,T,1,1),T.routeDesign===qe.Hills&&this.drawHillsTundraOverview(e,T,1,1)),w.courseType===z.Volcanic&&(e.lineCap="round",this.backgroundVolcanoYStart=this.lastPathEndingY,(T.routeDesign===qe.Regular||T.routeDesign===qe.FirstRegular||T.routeDesign===qe.LastRegular)&&this.drawRegularVolcanoOverview(e,0,l,T,w.pathData.length,1,1),T.routeDesign===qe.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,l,T,w.pathData.length,1,1)),this.lengthCompleted+=T.length,l+=1,this.lastPathEndingY<0&&(this.yOffscreen=this.lastPathEndingY)}))}),this.yOffscreen<0&&(this.overviewYOffsetModifier=this.overviewYOffsetModifier/1.25,this.yOffscreen=0),n){this.globalService.globalVar.userIsRacing=!1,e.globalCompositeOperation="source-atop";var u=this.race.raceUI.distanceCoveredByFrame[this.race.raceUI.distanceCoveredByFrame.length-1]/this.race.length,d=0,m=0,v=!1;this.race.raceLegs.forEach(w=>{if(!v){var T=(d+=w.distance)/this.race.length;T>u&&(T=u,v=!0);var L=(T-m)*this.canvasWidth;e.fillStyle=this.getAnimalDistanceColorByType(w.courseType),e.fillRect(m*this.canvasWidth,0,L,this.canvasHeight),m=T}})}if(this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(w=>{"Hills"===w[0]?this.drawHillsBackgroundTundraOverview(e,w):this.drawIcyPatchBackgroundTundraOverview(e,w)}),this.race.raceLegs.some(w=>w.courseType===z.Volcanic)){var S,_=0,y=!1;this.race.raceLegs.forEach(w=>{this.race.raceLegs.some(T=>T.courseType===z.Volcanic)&&(w.courseType!==z.Volcanic&&!y&&(_+=w.distance),w.courseType===z.Volcanic&&(y=!0))}),S=this.race.raceLegs.find(w=>w.courseType===z.Volcanic).distance;var D=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,0,_,_+S,1,1),e.globalCompositeOperation=D}}}displayRace(e,n){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.lineCap="round",e.strokeStyle="gray",this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=10,a=10;this.totalRaceModeXDistance=this.race.length*r;var o=0,s=[];this.race.raceLegs.forEach(ht=>{s.push(ht)});var l=!1;this.race.raceType===Pe.event&&this.race.eventRaceType===Le.grandPrix?(l=!0,o=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier),s.push(this.globalService.globalVar.eventRaceData.nextRaceSegment.raceLegs[0])):o=this.currentRaceFrame;var c=this.race.raceUI.distanceCoveredByFrame[o],u=0;l&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment&&(s.unshift(this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0]),c+=s[0].distance),this.averageDistancePerSecond=this.race.raceType===Pe.event&&this.race.eventRaceType===Le.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/this.globalService.globalVar.eventRaceData.grandPrixTimeLength:this.race.length/this.race.raceUI.timeToCompleteByFrame[o];var d=0,m=0,v=!1,_=0;s.forEach(ht=>{v||(c>=d&&c<d+ht.distance&&(v=!0,this.currentLeg=ht),v||(m+=ht.distance,_+=1)),d+=ht.distance});var y=c-m,S=0;if(this.currentLeg.courseType===z.Mountain){var D=this.currentLeg.distance*this.mountainClimbPercent,w=0,T=!1,L=0;this.currentLeg.pathData.forEach(ht=>{T||(D>=L&&D<L+ht.length&&(T=!0,w=L+ht.length-D),L+=ht.length)}),T=!1;var G=0,ee=0;this.currentLeg.pathData.forEach(ht=>{if(!T){if(y>=G&&y<G+ht.length&&(T=!0,ee=y-G,ht.routeDesign===qe.Crevasse)){var Dt=ht.length/2*3,_r=3*ee;S-=ee<ht.length/2?_r:Dt-(_r-Dt)}G+=ht.length}});var re=D+w;this.mountainEndingY=u=y<re?y+S:re-(y-re)+S,this.race.raceType===Pe.event&&this.race.eventRaceType===Le.grandPrix&&o===this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed-2&&(this.globalService.globalVar.eventRaceData.mountainEndingY=u)}if(this.race.raceLegs.some(ht=>ht.courseType===z.Mountain)||(this.mountainEndingY=0),u=this.mountainEndingY,this.race.raceType===Pe.event&&this.race.eventRaceType===Le.grandPrix&&(u+=this.globalService.globalVar.eventRaceData.mountainEndingY,null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&this.currentLeg.courseType!==z.Mountain&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType!==z.Mountain&&(u=0)),this.currentLeg.courseType===z.Volcanic&&!this.pauseRace){var ce=this.currentLeg.pathData[0].length/r;if(y>ce){var me=this.currentLeg.distance/this.volcanoRadiusXModifier,we=ce/this.currentLeg.distance,Fe=y/this.currentLeg.distance,Ye=(this.currentLeg.distance-2*ce)/this.currentLeg.distance/2;if(Fe>we&&Fe<1-we){var dt=100/(100-2*we),_t=-me,oe=me*Math.pow(1.05,-100*(Fe>.5?2*(Ye-((Fe-we)*dt-Ye)):(Fe-we)*dt*2))+_t;this.volcanoYOffset=oe}}}var R=c*this.canvasXDistanceScale*r-this.canvasWidth/2,Qe=(u+=this.volcanoYOffset)*this.canvasXDistanceScale*a;if(this.visibleDistanceXLeft=R,this.visibleDistanceXRight=R+this.canvasWidth,e.globalCompositeOperation="source-over",(c>=this.race.length||o>this.race.raceUI.distanceCoveredByFrame.length)&&!l)return void(this.isRaceFinished=!0);var Ht=0,ln=!0,pt=0;s.forEach(ht=>{void 0!==ht.pathData&&0!==ht.pathData.length&&(pt=0,this.race.raceType===Pe.event&&this.race.eventRaceType===Le.grandPrix&&(Ht=0),ht.pathData.forEach(Dt=>{if(ht.courseType===z.Flatland)Dt.routeDesign===qe.Regular&&this.drawRegularFlatlandOverview(e,Dt,r,a,R,Qe),Dt.routeDesign===qe.S&&this.drawSFlatlandOverview(e,Dt,r,a,R,Qe),Dt.routeDesign===qe.Bumps&&this.drawBumpsFlatlandOverview(e,Dt,r,a,R,Qe);else if(ht.courseType===z.Mountain){var _r=Ht<ht.distance*this.mountainClimbPercent;Dt.routeDesign===qe.Regular&&this.drawRegularMountainOverview(e,Dt,r,a,_r,R,Qe),Dt.routeDesign===qe.Crevasse&&this.drawCrevasseMountainOverview(e,Dt,r,a,_r,R,Qe),Dt.routeDesign===qe.Gaps&&this.drawGapsMountainOverview(e,Dt,r,a,_r,R,Qe),Ht+=Dt.length,this.grandPrixMountainYReset(_)}else ht.courseType===z.Ocean&&(Dt.routeDesign===qe.Regular&&this.drawRegularWaterOverview(e,Dt,r,a,ln,R,Qe),Dt.routeDesign===qe.Waves&&this.drawWavesWaterOverview(e,Dt,r,a,ln,R,Qe),Dt.routeDesign===qe.Dive&&this.drawDiveWaterOverview(e,Dt,r,a,ln,R,Qe),ln=!ln);ht.courseType===z.Tundra&&(Dt.routeDesign===qe.Regular&&this.drawRegularTundraOverview(e,Dt,r,a,R,Qe),Dt.routeDesign===qe.Cavern&&this.drawCavernTundraOverview(e,Dt,r,a,R,Qe),Dt.routeDesign===qe.Hills&&this.drawHillsTundraOverview(e,Dt,r,a,R,Qe)),ht.courseType===z.Volcanic&&(this.backgroundVolcanoYStart=this.lastPathEndingY,(Dt.routeDesign===qe.Regular||Dt.routeDesign===qe.FirstRegular||Dt.routeDesign===qe.LastRegular)&&this.drawRegularVolcanoOverview(e,0,pt,Dt,ht.pathData.length,r,a,R,Qe),Dt.routeDesign===qe.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,pt,Dt,ht.pathData.length,r,a,R,Qe)),pt+=1,this.lengthCompleted+=Dt.length})),_+=1}),e.globalCompositeOperation="source-atop";var on=0,cn=m*this.canvasXDistanceScale*r,mt=s.indexOf(this.currentLeg),wn=null;mt>0&&(wn=s[mt-1]),null!=wn&&cn>=this.visibleDistanceXLeft&&cn<=this.visibleDistanceXRight?(on=(cn-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=this.getAnimalDistanceColorByType(wn.courseType),e.fillRect(0,0,this.canvasWidth*on,this.canvasHeight),e.fillStyle=this.getAnimalDistanceColorByType(this.currentLeg.courseType),e.fillRect(this.canvasWidth*on,0,this.canvasWidth/2-this.canvasWidth*on,this.canvasHeight)):(e.fillStyle=this.getAnimalDistanceColor(c,s),e.fillRect(0,0,this.canvasWidth/2,this.canvasHeight));var ci=this.getAnimalRacerColor(c,s);(this.race.raceUI.racerEffectByFrame[o]===Pr.LostFocus||this.race.raceUI.racerEffectByFrame[o]===Pr.LostStamina||this.race.raceUI.racerEffectByFrame[o]===Pr.Stumble)&&(ci=this.utilityService.shadeColor(ci,-90)),this.race.raceUI.racerEffectByFrame[o]===Pr.Burst&&(ci=this.utilityService.shadeColor(ci,90)),e.fillStyle=ci,e.fillRect(this.canvasWidth/2-5,0,5,this.canvasHeight),this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(ht=>{"Hills"===ht[0]?this.drawHillsBackgroundTundraOverview(e,ht):this.drawIcyPatchBackgroundTundraOverview(e,ht)}),e.globalCompositeOperation="source-atop";var Hn=this.averageDistancePerSecond/this.frameModifier*o;if(this.race.raceType===Pe.event&&this.race.eventRaceType===Le.grandPrix){var ui=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();Hn+=this.averageDistancePerSecond*ui}if(this.drawRacer(e,Hn*this.canvasXDistanceScale*r,"black"),this.race.localRaceType!==Wt.Track){if(this.lookupService.getResourceByName("Money Mark")>0){var Mn=.75,ot=this.globalService.globalVar.modifiers.find(ht=>"moneyMarkPaceModifier"===ht.text);null!=ot&&(Mn=ot.value),this.drawRacer(e,this.race.length/(this.race.raceUI.timeToCompleteByFrame[o]*Mn)/this.frameModifier*o*this.canvasXDistanceScale*r,"gold")}}else{var On=.25,mn=this.globalService.globalVar.modifiers.find(ht=>"trainingTrackPaceModifier"===ht.text);void 0!==mn&&(On=mn.value);for(var ni=0;ni<11;ni++){var co=this.race.length/(this.race.raceUI.timeToCompleteByFrame[o]/(1+On*(ni+1)))/this.frameModifier*o*this.canvasXDistanceScale*r,Fo=this.getTrackRacerColor(ni);this.drawRacer(e,co,Fo)}}if(this.drawBreakpoints(e,r,s),s.some(ht=>ht.courseType===z.Volcanic)){var Qi,Ni=0,It=!1;s.forEach(ht=>{s.some(Dt=>Dt.courseType===z.Volcanic)&&(ht.courseType!==z.Volcanic&&!It&&(Ni+=ht.distance),ht.courseType===z.Volcanic&&(It=!0))}),Qi=s.find(ht=>ht.courseType===z.Volcanic).distance;var ms=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,o,Ni,Ni+Qi,r,a,R,Qe),e.globalCompositeOperation=ms}}}getAnimalDistanceColor(e,n){var r="",a=0;return null==n&&(n=this.race.raceLegs),n.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===z.Flatland&&(r="#7d3f00"),o.courseType===z.Mountain&&(r="#1b630d"),o.courseType===z.Ocean&&(r="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),o.courseType===z.Tundra&&(r="#28809c"),o.courseType===z.Volcanic&&(r="#8f1a1a")),a+=o.distance}),r}getAnimalDistanceColorByType(e){var n="";return e===z.Flatland&&(n="#7d3f00"),e===z.Mountain&&(n="#1b630d"),e===z.Ocean&&(n="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===z.Tundra&&(n="#28809c"),e===z.Volcanic&&(n="#8f1a1a"),n}getAnimalRacerColor(e,n){var r="",a=0;return null==n&&(n=this.race.raceLegs),n.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===z.Flatland&&("night"===this.themeService.getActiveThemeName()?r="#E18B07":(this.themeService.getActiveThemeName(),r="#c66900")),o.courseType===z.Mountain&&("night"===this.themeService.getActiveThemeName()?r="#30b001":(this.themeService.getActiveThemeName(),r="#279113")),o.courseType===z.Ocean&&("night"===this.themeService.getActiveThemeName()?r="#9289CF":(this.themeService.getActiveThemeName(),r="#0000FF")),o.courseType===z.Tundra&&("night"===this.themeService.getActiveThemeName()?r="#019DDE":(this.themeService.getActiveThemeName(),r="#1CA1C9")),o.courseType===z.Volcanic&&("night"===this.themeService.getActiveThemeName()?r="#E56C6E":(this.themeService.getActiveThemeName(),r="#D92525"))),a+=o.distance}),r}getTrackRacerColor(e){var n="";return 0===e&&(n="#cfc800"),1===e&&(n="#00cf68"),2===e&&(n="#cf00c5"),3===e&&(n="#cfb8e6"),4===e&&(n="#4a1d1d"),5===e&&(n="#1b5054"),6===e&&(n="#541b3c"),7===e&&(n="#aeb85a"),8===e&&(n="#ffffff"),9===e&&(n="#01253b"),10===e&&(n="#790dde"),n}getCurrentAnimalRacingCourse(e){var n;n=z.Flatland;var r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(n=a.courseType),r+=a.distance}),n}getNextAnimalRacingCourse(e){var n;n=z.Flatland;var r=this.race.raceLegs.indexOf(e);return this.race.raceLegs.length>r&&(n=this.race.raceLegs[r+1].courseType),n}drawRacer(e,n,r){var a=0;n>=this.visibleDistanceXLeft&&n<=this.visibleDistanceXRight&&(a=(n-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=r,e.fillRect(this.canvasWidth*a-5,0,5,this.canvasHeight))}drawBreakpoints(e,n,r){var a=0;null==r&&(r=this.race.raceLegs);for(var o=0;o<r.length;o++){var s=r[o],l=null;o<r.length-1&&(l=r[o+1]);var c=0,u=(a+s.distance)*this.canvasXDistanceScale*n;u>=this.visibleDistanceXLeft&&u<=this.visibleDistanceXRight&&(c=(u-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=null!==l?this.getAnimalDistanceColorByType(l.courseType):"pink",e.fillRect(this.canvasWidth*c-5,0,5,this.canvasHeight)),a+=s.distance}}drawRegularFlatlandOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0),e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+s),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawSFlatlandOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,m=.23*l,v=1.2173*m,_=.04*l,y=v,S=_+m,D=v,w=S+m,T=v,L=w,ee=w,re=v,ce=ee+m,me=v,we=ce+m,Fe=v,Ye=we;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.bezierCurveTo(c+d,u,c+_,u+y,c+S,u+D),e.bezierCurveTo(c+S,u+D,c+w,u+T,c+L,u),e.stroke(),e.beginPath(),e.moveTo(c+L,u),e.bezierCurveTo(c+L,u,c+ee,u-re,c+ce,u-me),e.bezierCurveTo(c+ce,u-me,c+we,u-Fe,c+we,u),e.stroke(),e.beginPath(),e.moveTo(c+we,u),e.lineTo(c+Ye+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+Ye+d}drawBumpsFlatlandOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,m=.115*l,v=m/3;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.lineTo(c+d+m/2,u-v),e.lineTo(c+d+m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+m,u),e.lineTo(c+d+m+m/2,u-v),e.lineTo(c+d+2*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+2*m,u),e.lineTo(c+d+2*m+m/2,u-v),e.lineTo(c+d+3*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+3*m,u),e.lineTo(c+d+3*m+m/2,u-v),e.lineTo(c+d+4*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+4*m,u),e.lineTo(c+d+4*m+m/2,u-v),e.lineTo(c+d+5*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+5*m,u),e.lineTo(c+d+5*m+m/2,u-v),e.lineTo(c+d+6*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+6*m,u),e.lineTo(c+d+6*m+m/2,u-v),e.lineTo(c+d+7*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+7*m,u),e.lineTo(c+d+7*m+m/2,u-v),e.lineTo(c+d+8*m,u),e.stroke(),e.beginPath(),e.moveTo(c+d+8*m,u),e.lineTo(c+d+8*m+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawRegularMountainOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0),e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),e.lineTo(this.lastPathEndingX+c-s,o?this.lastPathEndingY-u+l:this.lastPathEndingY+u+l),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawCrevasseMountainOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,m=this.lastPathEndingY+l,_=c,y=u,S=2*y;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),o?(S=2*y-(y-0),e.lineTo(d+0,m-0),e.lineTo(d+0+_/2,m+S-0),e.lineTo(d+0+_,m-y-0),e.lineTo(d+0+_,m-y-0)):(e.lineTo(d+0,m+0),e.lineTo(d+0+_/2,m+S+0),e.lineTo(d+0+_,m+y+0),e.lineTo(d+0+_,m+y+0)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawGapsMountainOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r,u=n.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,m=this.lastPathEndingY+l,v=.04*c,_=.115*c,y=.115*u,S=.04*u;e.beginPath(),e.moveTo(d,m),o?(e.lineTo(d+v,m-S),e.moveTo(d+_+v,m-y-S),e.lineTo(d+2*_+v,m-2*y-S),e.moveTo(d+3*_+v,m-3*y-S),e.lineTo(d+4*_+v,m-4*y-S),e.moveTo(d+5*_+v,m-5*y-S),e.lineTo(d+6*_+v,m-6*y-S),e.moveTo(d+7*_+v,m-7*y-S),e.lineTo(d+8*_+v,m-8*y-S),e.lineTo(d+8*_+2*v,m-8*y-2*S)):(e.lineTo(d+v,m+S),e.moveTo(d+_+v,m+y+S),e.lineTo(d+2*_+v,m+2*y+S),e.moveTo(d+3*_+v,m+3*y+S),e.lineTo(d+4*_+v,m+4*y+S),e.moveTo(d+5*_+v,m+5*y+S),e.lineTo(d+6*_+v,m+6*y+S),e.moveTo(d+7*_+v,m+7*y+S),e.lineTo(d+8*_+v,m+8*y+S),e.lineTo(d+8*_+2*v,m+8*y+2*S)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawRegularWaterOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,m=c/3,v=c/6,_=u+m,y=o?d+v:d-v,S=u+2*m,D=o?d+v:d-v,w=u+3*m,T=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(_,y,S,D,w,T),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawWavesWaterOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,m=c/3,v=c/3,_=u+m/3,y=d,S=u+m/3,D=d-v,w=u+m,T=d-.6*v;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(_,y,S,D,w,T),e.stroke();var L=w-m/3,G=T-v/10,ee=w-m/3,re=T+.4*v,ce=w,me=d;e.beginPath(),e.moveTo(w,T),e.bezierCurveTo(L,G,ee,re,ce,me),e.stroke();var we=ce+m/3,Fe=me,Ye=ce+m/3,dt=me-v,yt=ce+m,Xt=me-.6*v;e.beginPath(),e.moveTo(ce,me),e.bezierCurveTo(we,Fe,Ye,dt,yt,Xt),e.stroke();var Et=yt-m/3,_t=Xt-v/10,oe=yt-m/3,R=Xt+.4*v,Qe=yt,Ht=d;e.beginPath(),e.moveTo(yt,Xt),e.bezierCurveTo(Et,_t,oe,R,Qe,Ht),e.stroke();var ln=Qe+m/3,yn=Ht,pt=Qe+m/3,on=Ht-v,cn=Qe+m,mt=Ht-.6*v;e.beginPath(),e.moveTo(Qe,Ht),e.bezierCurveTo(ln,yn,pt,on,cn,mt),e.stroke();var wn=cn-m/3,ti=mt-v/10,li=cn-m/3,ci=mt+.4*v,Hn=cn,ui=d;e.beginPath(),e.moveTo(cn,mt),e.bezierCurveTo(wn,ti,li,ci,Hn,ui),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawDiveWaterOverview(e,n,r,a,o,s,l){var c=n.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,m=c/3,v=c/2,_=u,y=o?d+2*v:d-2*v,S=u+2*m,D=o?d+v/4:d-v/4,w=u+3*m,T=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(_,y,S,D,w,T),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawRegularTundraOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=n.driftAmount/80*u,m=(n.totalTundraYAmount-n.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+m+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+m+d+s),e.stroke();var v=[];v.push("Regular"),v.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]),this.icyPatchBackgroundLines.push(v),this.lastPathEndingX=this.lastPathEndingX+l}drawCavernTundraOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var m=l/4*.97,v=n.driftAmount/80*m,_=(n.totalTundraYAmount-n.driftAmount)/80*m;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+_+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+_+v+s),e.stroke();var S=l/4*.75,D=[];D.push("Cavern"),D.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),D.push([this.lastPathEndingX-o,this.lastPathEndingY+S+s]),D.push([this.lastPathEndingX+l-o,this.lastPathEndingY+S+s]),D.push([this.lastPathEndingX+l-o,this.lastPathEndingY-S+s]),D.push([this.lastPathEndingX-o,this.lastPathEndingY-S+s]),this.icyPatchBackgroundLines.push(D),this.lastPathEndingX=this.lastPathEndingX+l}drawHillsTundraOverview(e,n,r,a,o,s){var l=n.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=n.driftAmount/80*u,m=(n.totalTundraYAmount-n.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+m+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+m+d+s),e.stroke();var v=[];v.push("Hills"),v.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),v.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),v.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]);var _=l/12,y=l/4,S=c/2,D=c*(3/4),w=c/4;v.push([this.lastPathEndingX+y-_/2-o,this.lastPathEndingY-S+w/2+s]),v.push([this.lastPathEndingX+y-_/2-o,this.lastPathEndingY-S-w+s,this.lastPathEndingX+y+_/2-o,this.lastPathEndingY-S-w+s,this.lastPathEndingX+y+_/2-o,this.lastPathEndingY-S+w/2+s]),v.push([this.lastPathEndingX+y-_/2-o,this.lastPathEndingY+S+w/2+s]),v.push([this.lastPathEndingX+y-_/2-o,this.lastPathEndingY+S-w+s,this.lastPathEndingX+y+_/2-o,this.lastPathEndingY+S-w+s,this.lastPathEndingX+y+_/2-o,this.lastPathEndingY+S+w/2+s]),v.push([this.lastPathEndingX+2*y-_/2-o,this.lastPathEndingY-D+w/2+s]),v.push([this.lastPathEndingX+2*y-_/2-o,this.lastPathEndingY-D-w+s,this.lastPathEndingX+2*y+_/2-o,this.lastPathEndingY-D-w+s,this.lastPathEndingX+2*y+_/2-o,this.lastPathEndingY-D+w/2+s]),v.push([this.lastPathEndingX+2*y-_/2-o,this.lastPathEndingY+D+w/2+s]),v.push([this.lastPathEndingX+2*y-_/2-o,this.lastPathEndingY+D-w+s,this.lastPathEndingX+2*y+_/2-o,this.lastPathEndingY+D-w+s,this.lastPathEndingX+2*y+_/2-o,this.lastPathEndingY+D+w/2+s]),v.push([this.lastPathEndingX+3*y-_/2-o,this.lastPathEndingY-S+w/2+s]),v.push([this.lastPathEndingX+3*y-_/2-o,this.lastPathEndingY-S-w+s,this.lastPathEndingX+3*y+_/2-o,this.lastPathEndingY-S-w+s,this.lastPathEndingX+3*y+_/2-o,this.lastPathEndingY-S+w/2+s]),v.push([this.lastPathEndingX+3*y-_/2-o,this.lastPathEndingY+S+w/2+s]),v.push([this.lastPathEndingX+3*y-_/2-o,this.lastPathEndingY+S-w+s,this.lastPathEndingX+3*y+_/2-o,this.lastPathEndingY+S-w+s,this.lastPathEndingX+3*y+_/2-o,this.lastPathEndingY+S+w/2+s]),this.icyPatchBackgroundLines.push(v),this.lastPathEndingX=this.lastPathEndingX+l}drawIcyPatchBackgroundTundraOverview(e,n){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.beginPath(),e.moveTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.lineTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r}drawHillsBackgroundTundraOverview(e,n){var r=e.globalCompositeOperation;e.strokeStyle="dimgray",e.globalCompositeOperation="source-atop",n.length>=17&&(e.beginPath(),e.moveTo(n[6][0],n[6][1]),e.bezierCurveTo(n[7][0],n[7][1],n[7][2],n[7][3],n[7][4],n[7][5]),e.stroke(),e.beginPath(),e.moveTo(n[8][0],n[8][1]),e.bezierCurveTo(n[9][0],n[9][1],n[9][2],n[9][3],n[9][4],n[9][5]),e.stroke(),e.beginPath(),e.moveTo(n[10][0],n[10][1]),e.bezierCurveTo(n[11][0],n[11][1],n[11][2],n[11][3],n[11][4],n[11][5]),e.stroke(),e.beginPath(),e.moveTo(n[12][0],n[12][1]),e.bezierCurveTo(n[13][0],n[13][1],n[13][2],n[13][3],n[13][4],n[13][5]),e.stroke(),e.beginPath(),e.moveTo(n[14][0],n[14][1]),e.bezierCurveTo(n[15][0],n[15][1],n[15][2],n[15][3],n[15][4],n[15][5]),e.stroke(),e.beginPath(),e.moveTo(n[16][0],n[16][1]),e.bezierCurveTo(n[17][0],n[17][1],n[17][2],n[17][3],n[17][4],n[17][5]),e.stroke()),e.globalCompositeOperation="destination-over",n.length>=17&&(e.beginPath(),e.moveTo(n[6][0],n[6][1]),e.bezierCurveTo(n[7][0],n[7][1],n[7][2],n[7][3],n[7][4],n[7][5]),e.stroke(),e.beginPath(),e.moveTo(n[8][0],n[8][1]),e.bezierCurveTo(n[9][0],n[9][1],n[9][2],n[9][3],n[9][4],n[9][5]),e.stroke(),e.beginPath(),e.moveTo(n[10][0],n[10][1]),e.bezierCurveTo(n[11][0],n[11][1],n[11][2],n[11][3],n[11][4],n[11][5]),e.stroke(),e.beginPath(),e.moveTo(n[12][0],n[12][1]),e.bezierCurveTo(n[13][0],n[13][1],n[13][2],n[13][3],n[13][4],n[13][5]),e.stroke(),e.beginPath(),e.moveTo(n[14][0],n[14][1]),e.bezierCurveTo(n[15][0],n[15][1],n[15][2],n[15][3],n[15][4],n[15][5]),e.stroke(),e.beginPath(),e.moveTo(n[16][0],n[16][1]),e.bezierCurveTo(n[17][0],n[17][1],n[17][2],n[17][3],n[17][4],n[17][5]),e.stroke()),e.beginPath(),e.moveTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.lineTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r,e.strokeStyle="gray"}drawRegularVolcanoOverview(e,n,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);var D=this.lastPathEndingX-c-d*r+d*o/2,w=this.lastPathEndingY+0+u,T=d*o/this.volcanoRadiusXModifier,L=d*o/2-d/s,G=Math.PI/2,ce=180/o,me=0;a.routeDesign===qe.FirstRegular?(this.volcanoStartingAngle=me=90,e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d/s-c,this.lastPathEndingY+0+u),e.stroke()):a.routeDesign===qe.LastRegular&&(e.beginPath(),e.moveTo(this.lastPathEndingX+(d-d/s)-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d-c,this.lastPathEndingY+0+u),e.stroke()),(me=this.volcanoStartingAngle-ce)<0&&(me=360-Math.abs(me)),e.beginPath(),e.ellipse(D,w,T,L,G,this.volcanoStartingAngle*(Math.PI/180),me*(Math.PI/180),!0),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=me}drawSteppingStonesVolcanoOverview(e,n,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);for(var D=this.lastPathEndingX-c-d*r+d*o/2,w=this.lastPathEndingY+0+u,T=d*o/this.volcanoRadiusXModifier,L=d*o/2-d/s,G=Math.PI/2,ce=180/o,Ye=0,me=ce/20,we=0;we<10;we++){var Fe=this.volcanoStartingAngle-me*(2*we);Fe<0&&(Fe=360-Math.abs(Fe)),(Ye=Fe-me)<0&&(Ye=360-Math.abs(Ye)),e.beginPath(),e.ellipse(D,w,T,L,G,Fe*(Math.PI/180),Ye*(Math.PI/180),!0),e.stroke()}(Ye=this.volcanoStartingAngle-ce)<0&&(Ye=360-Math.abs(Ye)),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=Ye}drawBackgroundVolcano(e,n,r,a,o,s,l,c){null==l&&(l=0),null==c&&(c=0);var u=.1*(a-r),d=(r+u)*this.canvasXDistanceScale*o-l,m=(a-u)*this.canvasXDistanceScale*o-l,v=m-d,_=(a-r)*this.canvasXDistanceScale*o/this.volcanoRadiusXModifier,y=this.canvasHeight*o,S=this.backgroundVolcanoYStart-.75*_+c,D=d+.15*v,w=y-10*s,T=d+.35*v,L=S+20*s,G=d+.4*v,ee=S,re=m-.15*v,ce=y-10*s,me=m-.35*v,we=S+20*s,Fe=m-.4*v,Ye=S,dt=e.fillStyle,yt=e.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);yt.addColorStop(0,"red"),yt.addColorStop(1,"orange"),e.fillStyle=yt;var Xt=G+(Fe-G)/3,Et=S+_/4,_t=G+2*(Fe-G)/3,oe=S+_/4,yn=G-.075*v,pt=ee+_/2,on=Fe+.075*v,cn=Ye+_/2,mt=yn+1.7*(on-yn)/5,wn=pt+.5*_,ti=yn+1.4*(on-yn)/5,li=pt+_/2,ci=yn+2.5*(on-yn)/5,Hn=pt,ui=yn+3.6*(on-yn)/5,Ii=pt+_,Oi=yn+3.3*(on-yn)/5,Di=pt-.25*_;e.beginPath(),e.moveTo(G,ee),e.bezierCurveTo(Xt,Et,_t,oe,Fe,Ye),e.lineTo(on,cn),e.moveTo(on,cn),e.bezierCurveTo(ui,Ii,Oi,Di,ci,Hn),e.bezierCurveTo(mt,wn,ti,li,yn,pt),e.lineTo(G,ee),e.fill(),e.beginPath(),e.moveTo(d,y),e.bezierCurveTo(D,w,T,L,G,ee),e.stroke(),e.beginPath(),e.moveTo(m,y),e.bezierCurveTo(re,ce,me,we,Fe,Ye),e.stroke();var Mn=e.lineWidth;e.lineWidth=2;var ot=.175,vi=d+v*(ot+.025),sn=y-_/4,Xn=d+v*(ot+.2),Ui=S+_/3,On=d+v*(ot+.25),mn=S+_/4;e.beginPath(),e.moveTo(d+v*ot,.95*y),e.bezierCurveTo(vi,sn,Xn,Ui,On,mn),e.stroke();var ni=d+v*(.025+(ot=.35)),ba=y-_/4,br=d+v*(ot+.075),_a=S+_/2,co=d+v*(ot+.1),Fo=S+_/3;e.beginPath(),e.moveTo(d+v*ot,.95*y),e.bezierCurveTo(ni,ba,br,_a,co,Fo),e.stroke();var Ni=m-v*(.025+(ot=.35)),It=y-_/4,Qi=m-v*(ot+.075),ms=S+_/2,ht=m-v*(ot+.1),Dt=S+_/3;e.beginPath(),e.moveTo(m-v*ot,.95*y),e.bezierCurveTo(Ni,It,Qi,ms,ht,Dt),e.stroke();var _r=m-v*(.025+(ot=.175)),wf=y-_/4,Sf=m-v*(ot+.2),Mu=S+_/3,ku=m-v*(ot+.25),Au=S+_/4;if(e.beginPath(),e.moveTo(m-v*ot,.95*y),e.bezierCurveTo(_r,wf,Sf,Mu,ku,Au),e.stroke(),e.lineWidth=Mn,void 0!==this.race.raceUI.lavaFallPercentByFrame[n]&&0!==this.race.raceUI.lavaFallPercentByFrame[n].length&&void 0!==this.race.raceUI.lavaFallPercentByFrame[n][0]){1===o&&(n=this.race.raceUI.lavaFallPercentByFrame.length-1);var ho=this.race.raceUI.lavaFallPercentByFrame[n],fo=(a-r)*this.canvasXDistanceScale*o,Bo=r*this.canvasXDistanceScale*o,Pu=Bo+.4*fo-l+0,Hl=Bo+.45*fo-l+0,vs=Bo+.5*fo-l+0,Eu=Bo+.55*fo-l+0,Gl=Bo+.6*fo-l+0,kn=.01*(a-r)*this.canvasXDistanceScale*o,Ri=kn/2,xi=S+_/4,ya=this.backgroundVolcanoYStart+_+c,bs=(ya-xi)*ho[0];e.beginPath(),e.ellipse(Pu,xi+bs-Ri,kn,Ri,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Pu-kn,xi,2*kn,bs-(Ri-1));var Iu=(ya-xi)*ho[1];e.beginPath(),e.ellipse(Hl,xi+Iu-Ri,kn,Ri,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Hl-kn,xi,2*kn,Iu-(Ri-1));var Lo=(ya-xi)*ho[2];e.beginPath(),e.ellipse(vs,xi+Lo-Ri,kn,Ri,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(vs-kn,xi,2*kn,Lo-(Ri-1));var _s=(ya-xi)*ho[3];e.beginPath(),e.ellipse(Eu,xi+_s-Ri,kn,Ri,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Eu-kn,xi,2*kn,_s-(Ri-1));var Tf=(ya-xi)*ho[4];e.beginPath(),e.ellipse(Gl,xi+Tf-Ri,kn,Ri,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Gl-kn,xi,2*kn,Tf-(Ri-1)),e.fillStyle=dt}else e.fillStyle=dt}grandPrixMountainYReset(e){this.race.raceType===Pe.event&&this.race.eventRaceType===Le.grandPrix&&0===this.globalService.globalVar.eventRaceData.mountainEndingY&&null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType===z.Mountain&&1===e&&(this.lastPathEndingY=this.canvasHeight/2)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.skipSubscription.unsubscribe(),this.pauseSubscription.unsubscribe(),this.globalService.globalVar.userIsRacing=!1,this.race.raceType!==Pe.event&&(this.race.raceUI.staminaPercentByFrame=[],this.race.raceUI.timeToCompleteByFrame=[],this.race.raceUI.yAdjustmentByFrame=[],this.race.raceUI.velocityByFrame=[],this.race.raceUI.distanceCoveredByFrame=[],this.race.raceUI.lavaFallPercentByFrame=[],this.race.raceUI.maxSpeedByFrame=[],this.race.raceUI.racerEffectByFrame=[])}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(mi),P(Li),P(hn),P(kl))},t.\u0275cmp=lt({type:t,selectors:[["app-draw-race"]],viewQuery:function(e,n){if(1&e&&ca(F7,5,gn),2&e){let r;un(r=dn())&&(n.raceCanvas=r.first)}},inputs:{race:"race",skip:"skip",pause:"pause"},decls:3,vars:0,consts:[[1,"drawRaceDiv"],["id","raceCanvas",1,"raceCanvas"],["raceCanvas",""]],template:function(e,n){1&e&&(f(0,"div",0),x(1,"canvas",1,2),h())},styles:[".drawRaceDiv[_ngcontent-%COMP%]{height:100%}.raceCanvas[_ngcontent-%COMP%]{border:1px solid black}"]}),t})();const L7=["circuitRewardModal"];function U7(t,i){if(1&t){const e=fe();f(0,"button",6),N("click",function(){return B(e),C(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function H7(t,i){1&t&&(f(0,"span"),g(1,"BURST!"),h())}function G7(t,i){if(1&t){const e=fe();f(0,"button",6),N("click",function(){return B(e),C(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function j7(t,i){if(1&t&&(f(0,"div",8)(1,"div",9)(2,"div"),M(3,U7,2,0,"button",10),h(),f(4,"div"),g(5),M(6,H7,2,0,"span",3),h(),f(7,"div"),g(8),h(),f(9,"div"),g(10),h(),f(11,"div"),M(12,G7,2,0,"button",10),h()(),f(13,"div",11)(14,"div",12),x(15,"app-draw-race",13),h(),x(16,"div",14,15),h()()),2&t){const e=it(17),n=C();p(3),b("ngIf",!n.grandPrixRace),p(2),Kn("Velocity: ",n.velocityAtCurrentFrame," / ",n.maxSpeedAtCurrentFrame,"m/s "),p(1),b("ngIf",n.racerEffectAtCurrentFrame===n.burstEffect),p(2),Q("Stamina: ",n.staminaAtCurrentFrame,"%"),p(2),Kn("Position: ",n.positionAtCurrentFrame," / ",n.totalRacers,""),p(2),b("ngIf",!n.grandPrixRace),p(3),b("race",n.selectedRace)("skip",n.skipRace.asObservable())("pause",n.pauseRace.asObservable()),p(1),b("scrollTop",e.scrollHeight)("innerHTML",n.incrementalRaceUpdates.trim(),jt)}}function z7(t,i){if(1&t){const e=fe();f(0,"button",6),N("click",function(){return B(e),C(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function $7(t,i){if(1&t){const e=fe();f(0,"button",6),N("click",function(){return B(e),C(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function q7(t,i){if(1&t&&(f(0,"div",16)(1,"div",17)(2,"div"),M(3,z7,2,0,"button",10),h(),f(4,"div"),M(5,$7,2,0,"button",10),h()(),x(6,"div",18,15),h()),2&t){const e=it(7),n=C();p(3),b("ngIf",!n.grandPrixRace),p(2),b("ngIf",!n.grandPrixRace),p(1),b("scrollTop",e.scrollHeight)("innerHTML",n.incrementalRaceUpdates.trim(),jt)}}function W7(t,i){if(1&t){const e=fe();f(0,"button",6),N("click",function(){return B(e),C(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function X7(t,i){if(1&t){const e=fe();f(0,"button",6),N("click",function(){return B(e),C(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function Y7(t,i){if(1&t&&(f(0,"div",16)(1,"div",17)(2,"div"),M(3,W7,2,0,"button",10),h(),f(4,"div"),g(5),h(),f(6,"div"),g(7),h(),f(8,"div"),M(9,X7,2,0,"button",10),h()(),f(10,"div",19),x(11,"app-draw-race",13)(12,"br"),h()()),2&t){const e=C();p(3),b("ngIf",!e.grandPrixRace),p(2),Kn("Velocity: ",e.velocityAtCurrentFrame," / ",e.maxSpeedAtCurrentFrame,"m/s "),p(2),Q("Stamina: ",e.staminaAtCurrentFrame,"%"),p(2),b("ngIf",!e.grandPrixRace),p(2),b("race",e.selectedRace)("skip",e.skipRace.asObservable())("pause",e.pauseRace.asObservable())}}function Q7(t,i){1&t&&x(0,"br")}function K7(t,i){if(1&t&&(f(0,"div",26),g(1),h()),2&t){const e=C().$implicit,n=C(3);p(1),Q(" ",n.lookupService.getResourcePopover(e.name,e.shopItemTypeEnum)," ")}}function Z7(t,i){if(1&t&&(f(0,"td")(1,"span",24),g(2),h(),g(3),M(4,K7,2,1,"ng-template",null,25,rt),h()),2&t){const e=i.$implicit,n=it(5);p(1),b("ngbPopover",n),p(1),Ze(e.name),p(1),Q(": ",e.amount," ")}}function J7(t,i){if(1&t&&(f(0,"tr"),M(1,Z7,6,3,"td",23),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function eG(t,i){if(1&t&&(f(0,"div",20)(1,"span",21),g(2,"Rewards"),h(),f(3,"div",22)(4,"table"),M(5,J7,2,1,"tr",23),h()()()),2&t){const e=C();p(5),b("ngForOf",e.rewardRows)}}function tG(t,i){if(1&t){const e=fe();f(0,"div",27)(1,"div",28)(2,"h4",29),g(3,"Circuit Rank Reward!"),h(),f(4,"button",30),N("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",31)(7,"div",32),g(8," After ranking up, you receive: "),x(9,"br"),f(10,"div",21),g(11),h()(),x(12,"br")(13,"br"),f(14,"div"),g(15),h()(),f(16,"div",33)(17,"button",34),N("click",function(){return B(e).$implicit.dismiss()}),g(18,"Continue"),h()()()}if(2&t){const e=C();p(11),Ze(e.selectedRace.circuitIncreaseReward[0]),p(4),Ze(e.selectedRace.circuitIncreaseReward[1])}}let $R=(()=>{class t{constructor(e,n,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=n,this.utilityService=r,this.lookupService=a,this.initializeService=o,this.modalService=s,this.sanitizer=l,this.raceLogicService=c,this.incrementalRaceUpdates="",this.raceFinished=new nt,this.skipRace=new ve,this.pauseRace=new ve,this.raceSkipped=!1,this.racePaused=!1,this.frameModifier=60,this.displayVisualRace=!0,this.displayTextUpdates=!0,this.burstEffect=Pr.Burst,this.grandPrixRace=!1}ngOnInit(){var e=this,n=this.globalService.globalVar.settings.get("raceDisplayInfo");n===Kr.draw?(this.displayVisualRace=!0,this.displayTextUpdates=!1):n===Kr.text?(this.displayVisualRace=!1,this.displayTextUpdates=!0):n===Kr.both&&(this.displayVisualRace=!0,this.displayTextUpdates=!0),this.selectedRace.raceType===Pe.event&&this.selectedRace.eventRaceType===Le.grandPrix&&(this.grandPrixRace=!0);var r=new Zh;r=this.grandPrixRace?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult:this.raceLogicService.runRace(this.selectedRace),this.setupDisplayRewards(this.selectedRace),this.displayRaceUpdates(r),this.getFrameByFrameStats(),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.raceSkipped=!0),this.grandPrixRace&&(this.eventRaceSubscription=this.gameLoopService.gameUpdateEvent.subscribe(vr(function*(){e.globalService.getTimeToEventRace()>0&&0===e.globalService.globalVar.eventRaceData.bonusTime&&e.raceFinished.emit(!0),e.globalService.globalVar.eventRaceData.isRunning||e.raceFinished.emit(!0)})))}ngOnDestroy(){null!=this.frameByFrameSubscription&&this.frameByFrameSubscription.unsubscribe(),null!=this.updateSubscription&&this.updateSubscription.unsubscribe(),null!=this.eventRaceSubscription&&this.eventRaceSubscription.unsubscribe(),this.raceFinished.emit(!0)}displayRaceUpdates(e){var n=this,r=e.raceUpdates;this.incrementalRaceUpdates="";var o=0,l=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,c=this.updateSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=vr(function*(d){if(n.racePaused||(n.selectedRace.raceType===Pe.event&&n.selectedRace.eventRaceType===Le.grandPrix&&(n.globalService.globalVar.eventRaceData.currentRaceSegmentCount>l&&(o=0,n.selectedRace=n.globalService.globalVar.eventRaceData.currentRaceSegment,r=n.globalService.globalVar.eventRaceData.currentRaceSegmentResult.raceUpdates),l=n.globalService.globalVar.eventRaceData.currentRaceSegmentCount),o+=1),(n.selectedRace.raceType!==Pe.event||n.selectedRace.eventRaceType!==Le.grandPrix)&&(0===r.length||n.raceSkipped))return n.raceSkipped&&r.forEach(m=>{n.incrementalRaceUpdates+=n.sanitizer.sanitize(Kt.HTML,n.sanitizer.bypassSecurityTrustHtml(m.text+"\n"))}),e.wasSuccessful&&(n.displayResults=!0,null!=n.selectedRace.circuitIncreaseReward&&""!==n.selectedRace.circuitIncreaseReward[0]&&n.modalService.open(n.circuitRewardModal,{ariaLabelledBy:"modal-basic-title",size:"lg"})),void c.unsubscribe();n.selectedRace.raceType===Pe.event&&n.selectedRace.eventRaceType===Le.grandPrix?n.globalService.globalVar.eventRaceData.segmentTimeCounter*n.frameModifier>=r[0].value&&(n.incrementalRaceUpdates+=n.sanitizer.sanitize(Kt.HTML,n.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift()):o>=r[0].value&&(n.incrementalRaceUpdates+=n.sanitizer.sanitize(Kt.HTML,n.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift())});return function(d){return u.apply(this,arguments)}}())}setupDisplayRewards(e){if(this.rewardCells=[],this.rewardRows=[],null!=e.rewards){for(var r=1;r<=e.rewards.length;r++)this.rewardCells.push({name:e.rewards[r-1].name,amount:e.rewards[r-1].amount}),r%4==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}goToRaceSelection(){this.raceFinished.emit(!0)}skipRaceAnimation(){this.raceSkipped=!0,this.skipRace.next(!0)}pauseRaceAnimation(){this.racePaused=!this.racePaused,this.pauseRace.next(!0)}getFrameByFrameStats(){var e=this;this.totalRacers=this.lookupService.getTotalRacersByRace(this.selectedRace);var r=0,o=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount;this.frameByFrameSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=vr(function*(l){e.racePaused||(e.selectedRace.raceType===Pe.event&&e.selectedRace.eventRaceType===Le.grandPrix&&(e.globalService.globalVar.eventRaceData.currentRaceSegmentCount>o&&(e.selectedRace=e.globalService.globalVar.eventRaceData.currentRaceSegment),o=e.globalService.globalVar.eventRaceData.currentRaceSegmentCount),r+=1);var c;c=e.selectedRace.raceType===Pe.event&&e.selectedRace.eventRaceType===Le.grandPrix?Math.round(e.globalService.globalVar.eventRaceData.segmentTimeCounter*e.frameModifier):r;try{if(e.selectedRace.raceUI.velocityByFrame.length<=c||e.raceSkipped){var u=e.selectedRace.raceUI.velocityByFrame.length-1;e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[u]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[u]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[u].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[u],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[u])}else e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[c]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[c]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[c].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[c],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[c])}catch(d){console.log("error")}});return function(l){return s.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(mi),P(Li),P(hn),P(zv),P(lo),P(Mo),P(Yv))},t.\u0275cmp=lt({type:t,selectors:[["app-race"]],viewQuery:function(e,n){if(1&e&&ca(L7,7),2&e){let r;un(r=dn())&&(n.circuitRewardModal=r.first)}},inputs:{selectedRace:"selectedRace"},outputs:{raceFinished:"raceFinished"},decls:11,vars:5,consts:[["id","raceInfo"],["class","bothDisplayValues",4,"ngIf"],["class","oneDisplayValue",4,"ngIf"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"back"],[3,"click"],["circuitRewardModal",""],[1,"bothDisplayValues"],[1,"headerInfo"],[3,"click",4,"ngIf"],[1,"updates"],[1,"drawRaces"],[3,"race","skip","pause"],[1,"raceUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],[1,"oneDisplayValue"],[1,"individualItemHeaderInfo"],[1,"raceUpdates","onlyText",3,"scrollTop","innerHTML"],[1,"drawRace","onlyDraw"],[1,"results"],[1,"s4Heading"],[1,"rewards"],[4,"ngFor","ngForOf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],["popContent",""],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0),M(1,j7,18,13,"div",1),M(2,q7,8,4,"div",2),M(3,Y7,13,8,"div",2),M(4,Q7,1,0,"br",3),M(5,eG,6,1,"div",4),f(6,"div",5)(7,"button",6),N("click",function(){return n.goToRaceSelection()}),g(8,"Back"),h()()(),M(9,tG,19,2,"ng-template",null,7,rt)),2&e&&(p(1),b("ngIf",n.displayVisualRace&&n.displayTextUpdates),p(1),b("ngIf",!n.displayVisualRace&&n.displayTextUpdates),p(1),b("ngIf",n.displayVisualRace&&!n.displayTextUpdates),p(1),b("ngIf",n.displayVisualRace&&!n.displayTextUpdates),p(1),b("ngIf",n.displayResults))},directives:[en,B7,jn,Or],styles:['#raceInfo[_ngcontent-%COMP%]{height:100%;margin-left:.5rem;margin-right:.5rem;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre;overflow-x:hidden}.headerInfo[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between}.individualItemHeaderInfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bothDisplayValues[_ngcontent-%COMP%], .oneDisplayValue[_ngcontent-%COMP%]{height:76.5%}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawRace raceUpdates"}.raceUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:raceUpdates}.drawRaces[_ngcontent-%COMP%]{grid-area:drawRace}.onlyText[_ngcontent-%COMP%], .onlyDraw[_ngcontent-%COMP%]{text-align:center;height:100%}.rightAlign[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:left}td[_ngcontent-%COMP%]{width:16.666%}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;padding:1rem}.results[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawRace" "raceUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.raceUpdates[_ngcontent-%COMP%]{text-align:center}}']}),t})();function nG(t,i){if(1&t){const e=fe();f(0,"div",9)(1,"button",10),N("click",function(){return B(e),C(2).returnToAnimalView()}),g(2,"Back"),h()()}}function iG(t,i){if(1&t){const e=fe();f(0,"div",11)(1,"div")(2,"app-animal-list",12),N("selectedAnimal",function(r){return B(e),C(2).selectedAnimal(r)}),h()()()}if(2&t){const e=C(2);p(2),b("availableAnimals",e.availableAnimals)("isTrainingTrackView",!0)}}function rG(t,i){if(1&t){const e=fe();f(0,"div",13)(1,"app-training-track-race-view",14),N("raceSelected",function(r){return B(e),C(2).raceSelected(r)})("returnEmitter",function(){return B(e),C(2).returnToAnimalView()}),h()()}if(2&t){const e=C(2);p(1),b("selectedAnimal",e.animal)}}function aG(t,i){if(1&t&&(f(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),g(4,"Training Track"),h(),f(5,"div",5),g(6," Each animal can run their own training track to gain rewards and unique bonuses. To get each reward, you will have to beat each track at a progressively faster pace. "),h()(),M(7,nG,3,0,"div",6),h(),x(8,"hr"),M(9,iG,3,2,"div",7),M(10,rG,2,1,"div",8),h()),2&t){const e=C();p(7),b("ngIf",e.animalSelected),p(2),b("ngIf",!e.animalSelected),p(1),b("ngIf",e.animalSelected)}}function oG(t,i){if(1&t){const e=fe();f(0,"div",15)(1,"app-race",16),N("raceFinished",function(){return B(e),C().raceFinished()}),h()()}if(2&t){const e=C();p(1),b("selectedRace",e.selectedRace)}}const sG=function(t){return{fullHeight:t}};let qR=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.animalSelected=!1,this.raceSelectedEmitter=new nt}ngOnInit(){this.availableAnimals=this.globalService.globalVar.animals.filter(n=>n.isAvailable);var e=this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck);null!=e&&(this.existingPrimaryDeckAnimals=[],e.selectedAnimals.forEach(n=>{this.existingPrimaryDeckAnimals.push(n)}))}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(){this.animalSelected=!1}raceSelected(e){this.selectedRace=e,this.showRace=!0,this.raceSelectedEmitter.emit(!0)}ngOnDestroy(){this.raceSelectedEmitter.emit(!1)}raceFinished(){this.showRace=!1,this.raceSelectedEmitter.emit(!1);var e=this.globalService.globalVar.animalDecks.find(n=>n.isPrimaryDeck);null!=e&&(e.selectedAnimals=this.existingPrimaryDeckAnimals)}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(qn))},t.\u0275cmp=lt({type:t,selectors:[["app-training-track-view"]],outputs:{raceSelectedEmitter:"raceSelectedEmitter"},decls:3,vars:5,consts:[[1,"trainingTrackView",3,"ngClass"],[4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"infoGridContainer"],[1,"info"],[1,"description"],["class","back",4,"ngIf"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"back"],[3,"click"],[1,"selectAnimalView"],[3,"availableAnimals","isTrainingTrackView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","raceSelected","returnEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,n){1&e&&(f(0,"div",0),M(1,aG,11,3,"div",1),M(2,oG,2,1,"div",2),h()),2&e&&(b("ngClass",Jn(3,sG,n.showRace)),p(1),b("ngIf",!n.showRace),p(1),b("ngIf",n.showRace))},directives:[Bn,en,Cf,V7,$R],styles:['.trainingTrackView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.fullHeight[_ngcontent-%COMP%]{height:100%}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}']}),t})();function lG(t,i){1&t&&(f(0,"span",13),g(1,"!"),h())}function cG(t,i){1&t&&(f(0,"span",13),g(1,"!"),h())}function uG(t,i){if(1&t){const e=fe();f(0,"div",6)(1,"div",7)(2,"button",8),N("click",function(){B(e);const r=C(2);return r.changeDisplayRaceView(r.raceTypeEnum.circuit)}),g(3,"Circuit Races"),h(),f(4,"button",9),N("click",function(){B(e);const r=C(2);return r.changeDisplayRaceView(r.raceTypeEnum.special)}),M(5,lG,2,0,"span",10),g(6,"Special Races"),h(),f(7,"button",11),N("click",function(){B(e);const r=C(2);return r.changeDisplayRaceView(r.raceTypeEnum.event)}),M(8,cG,2,0,"span",10),g(9,"Event Races"),h(),f(10,"button",12),N("click",function(){B(e);const r=C(2);return r.changeDisplayRaceView(r.raceTypeEnum.trainingTrack)}),g(11,"Training Track"),h()(),x(12,"hr"),h()}if(2&t){const e=C(2);p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.circuit?"filterActive":""),p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.special?"filterActive":""),p(1),b("ngIf",e.newSpecialRaceAvailable),p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.event?"filterActive":""),p(1),b("ngIf",e.eventRaceNowAvailable),p(2),b("ngClass",e.displayRaceView===e.raceTypeEnum.trainingTrack?"filterActive":"")}}function dG(t,i){if(1&t){const e=fe();f(0,"app-circuit-view",14),N("raceSelected",function(r){return B(e),C(2).raceSelected(r)}),h()}}function hG(t,i){if(1&t){const e=fe();f(0,"app-local-view",14),N("raceSelected",function(r){return B(e),C(2).raceSelected(r)}),h()}}function fG(t,i){if(1&t){const e=fe();f(0,"app-event-view",14),N("raceSelected",function(r){return B(e),C(2).raceSelected(r)}),h()}}function pG(t,i){if(1&t){const e=fe();f(0,"app-training-track-view",15),N("raceSelectedEmitter",function(r){return B(e),C(2).trainingTrackRaceSelected(r)}),h()}}function gG(t,i){if(1&t&&(f(0,"div",2),M(1,uG,13,6,"div",3),M(2,dG,1,0,"app-circuit-view",4),M(3,hG,1,0,"app-local-view",4),M(4,fG,1,0,"app-event-view",4),M(5,pG,1,0,"app-training-track-view",5),h()),2&t){const e=C();p(1),b("ngIf",!e.trainingTrackRace),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.circuit),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.special),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.event),p(1),b("ngIf",e.displayRaceView===e.raceTypeEnum.trainingTrack)}}function mG(t,i){if(1&t){const e=fe();f(0,"div",16)(1,"app-race",17),N("raceFinished",function(){return B(e),C().raceFinished()}),h()()}if(2&t){const e=C();p(1),b("selectedRace",e.selectedRace)}}let vG=(()=>{class t{constructor(e,n,r){this.globalService=e,this.componentCommunicationService=n,this.gameLoopService=r,this.displayRaceView=Pe.circuit,this.showRace=!1,this.trainingTrackRace=!1,this.raceTypeEnum=Pe,this.newSpecialRaceAvailable=!1,this.eventRaceNowAvailable=!1}ngOnInit(){var e=this;this.componentCommunicationService.setNewView(ft.raceselection),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var n=vr(function*(r){e.newSpecialRaceAvailable=e.globalService.globalVar.notifications.isNewSpecialRaceAvailable,e.eventRaceNowAvailable=e.globalService.globalVar.notifications.isEventRaceNowActive});return function(r){return n.apply(this,arguments)}}()),this.communicationSubscription=this.componentCommunicationService.getRaceView().subscribe(n=>{this.displayRaceView=n})}changeDisplayRaceView(e){this.displayRaceView=e,e===Pe.special&&(this.newSpecialRaceAvailable=this.globalService.globalVar.notifications.isNewSpecialRaceAvailable=!1),e===Pe.event&&(this.eventRaceNowAvailable=this.globalService.globalVar.notifications.isEventRaceNowActive=!1)}raceSelected(e){this.selectedRace=e,this.showRace=!0}raceFinished(){this.showRace=!1}trainingTrackRaceSelected(e){this.trainingTrackRace=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.communicationSubscription&&this.communicationSubscription.unsubscribe(),this.globalService.globalVar.localRaces=[]}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(qn),P(mi))},t.\u0275cmp=lt({type:t,selectors:[["app-race-selection-view"]],decls:2,vars:2,consts:[["class","raceSelectionDiv",4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"raceSelectionDiv"],["class","info",4,"ngIf"],[3,"raceSelected",4,"ngIf"],[3,"raceSelectedEmitter",4,"ngIf"],[1,"info"],[1,"raceGridContainer"],[1,"buttonAsText","circuit","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","local","s5Heading","clickableText",3,"ngClass","click"],["class","availableIcon",4,"ngIf"],[1,"buttonAsText","event","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","trainingTrack","s5Heading","clickableText",3,"ngClass","click"],[1,"availableIcon"],[3,"raceSelected"],[3,"raceSelectedEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,n){1&e&&(M(0,gG,6,5,"div",0),M(1,mG,2,1,"div",1)),2&e&&(b("ngIf",!n.showRace),p(1),b("ngIf",n.showRace))},directives:[en,Bn,PH,HH,k7,qR,$R],styles:['.raceGridContainer[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"circuit local event trainingTrack"}.raceSelectionDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.circuit[_ngcontent-%COMP%]{grid-area:circuit;text-align:center}.local[_ngcontent-%COMP%]{grid-area:local;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.trainingTrack[_ngcontent-%COMP%]{grid-area:trainingTrack;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary);-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.availableIcon[_ngcontent-%COMP%]{color:var(--foreground-quaternary);border-radius:25px;background:var(--background-five);padding:0 .5rem;margin-right:.25rem}@media (max-width: 800px){.raceGridContainer[_ngcontent-%COMP%]{grid-template-columns:.9fr 1.1fr 1fr 1fr}}']}),t})(),bG=(()=>{class t{constructor(e){this.utilityService=e}ngOnInit(){}toggle(){null!=this.callbackFunction&&this.callbackFunction()}getId(){return"cbxInput"+this.id}}return t.\u0275fac=function(e){return new(e||t)(P(Li))},t.\u0275cmp=lt({type:t,selectors:[["app-toggle"]],inputs:{model:"model",label:"label",id:"id",popoverText:"popoverText",callbackFunction:"callbackFunction"},decls:5,vars:5,consts:[[1,"custom-control","custom-switch"],["triggers","mouseenter:mouseleave",3,"ngbPopover"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange","input"],[1,"custom-control-label",3,"for"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"span",1)(2,"input",2),N("ngModelChange",function(a){return n.model=a})("input",function(){return n.toggle()}),h(),f(3,"label",3),g(4),h()()()),2&e&&(p(1),b("ngbPopover",n.popoverText),p(1),b("id",n.getId())("ngModel",n.model),p(1),b("for",n.getId()),p(1),Ze(n.label))},directives:[Or,bh,yl,wl],styles:[""]}),t})();function _G(t,i){if(1&t&&(f(0,"div",8)(1,"em"),g(2),h(),x(3,"br")(4,"br"),h()),2&t){const e=C();p(2),Q("",e.pointsNeededInColumn," points needed in this column to unlock")}}function yG(t,i){1&t&&(f(0,"div",8)(1,"em"),g(2," Click Upgrade to unlock this talent. "),x(3,"br")(4,"br"),h()())}function CG(t,i){1&t&&(f(0,"div"),x(1,"br")(2,"br"),h())}function wG(t,i){if(1&t&&(f(0,"div"),x(1,"br"),f(2,"em")(3,"div",8),g(4,"Next Upgrade: "),h()(),x(5,"div",9),h()),2&t){const e=C();p(5),b("innerHTML",e.upgradedTalentDescription,jt)}}const SG=function(t){return{talentInactive:t}};let TG=(()=>{class t{constructor(e,n,r){this.lookupService=e,this.gameLoopService=n,this.globalService=r,this.spentTalent=new nt}ngOnInit(){this.talentTreeType=this.selectedAnimal.talentTree.talentTreeType,this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.totalPossiblePoints=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.talentTreeType),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0;var e=0;1===this.row&&(e=this.selectedAnimal.talentTree.row2RequiredPoints),2===this.row&&(e=this.selectedAnimal.talentTree.row3RequiredPoints),3===this.row&&(e=this.selectedAnimal.talentTree.row4RequiredPoints),this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0,this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(n=>{this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0})}isTalentMaxed(){var e=!1;return this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column)>=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.selectedAnimal.talentTree.talentTreeType)&&(e=!0),e}spendTalentPoint(){this.isTalentMaxed()||(this.selectedAnimal.talentTree.spendTalentPoint(this.row,this.column),this.spentTalent.emit(!0),this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.globalService.calculateAnimalRacingStats(this.selectedAnimal))}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(hn),P(mi),P(St))},t.\u0275cmp=lt({type:t,selectors:[["app-talent"]],inputs:{selectedAnimal:"selectedAnimal",row:"row",column:"column"},outputs:{spentTalent:"spentTalent"},decls:15,vars:13,consts:[[1,"talent"],[1,"header","keyword"],[1,"content"],["class","centeredText",4,"ngIf"],[4,"ngIf"],[1,"description",3,"ngClass","innerHTML"],[1,"footer"],[3,"disabled","click"],[1,"centeredText"],[1,"talentInactive",3,"innerHTML"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"span"),g(3),h()(),f(4,"div",2),M(5,_G,5,1,"div",3),M(6,yG,5,0,"div",3),M(7,CG,3,0,"div",4),x(8,"div",5),M(9,wG,6,1,"div",4),x(10,"br"),f(11,"div",6),g(12),f(13,"button",7),N("click",function(){return n.spendTalentPoint()}),g(14,"Upgrade"),h()()()()),2&e&&(p(3),Kn("Sprint Column ",n.column+1," Row ",n.row+1,""),p(2),b("ngIf",n.pointsNeededInColumn>0),p(1),b("ngIf",n.pointsNeededInColumn<=0&&0===n.pointsInTalent),p(1),b("ngIf",n.pointsInTalent===n.totalPossiblePoints),p(1),b("ngClass",Jn(11,SG,0===n.pointsInTalent))("innerHTML",n.talentDescription,jt),p(1),b("ngIf",n.pointsInTalent>0&&n.pointsInTalent<n.totalPossiblePoints),p(3),Kn(" ",n.pointsInTalent," / ",n.totalPossiblePoints," Points "),p(1),b("disabled",!n.hasTalentPoint||!n.hasEnoughPointsInColumn||n.isTalentMaxed()))},directives:[en,Bn],styles:['.talent[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr;justify-content:stretch;grid-template-areas:"header" "content"}.header[_ngcontent-%COMP%]{grid-area:header;background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary)}.content[_ngcontent-%COMP%]{grid-area:content;margin:1rem;display:flex;flex-direction:column;justify-content:space-between}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.talentInactive[_ngcontent-%COMP%]{color:#00000080}']}),t})();function DG(t,i){if(1&t&&(f(0,"div",14),g(1,"Equipped: "),f(2,"span",52),g(3),h(),x(4,"br")(5,"br"),g(6),h()),2&t){const e=C();b("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)),p(3),Ze(e.selectedAnimal.equippedItem.name),p(3),Q(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)," ")}}function RG(t,i){1&t&&(f(0,"div"),g(1," Equipped: None "),h())}function xG(t,i){if(1&t){const e=fe();f(0,"button",8),N("click",function(){return B(e),C().unequipItem()}),g(1,"Unequip Item"),h()}}function MG(t,i){if(1&t&&(f(0,"span",12),g(1),h()),2&t){const e=C(2);p(1),Q(" ",e.getTalentTreeName(),"")}}function kG(t,i){if(1&t){const e=fe();f(0,"div",53)(1,"div"),M(2,MG,2,1,"span",54),h(),f(3,"button",8),N("click",function(){B(e);const r=C(),a=it(217);return r.openTalentsModal(a)}),g(4,"View Talents"),h()()}if(2&t){const e=C();p(2),b("ngIf",e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none)}}function AG(t,i){if(1&t){const e=fe();f(0,"div")(1,"span",56),g(2),h(),f(3,"span")(4,"button",57),N("click",function(){B(e);const r=C(2);return r.editingName=!r.editingName}),g(5,"Edit"),h()()()}if(2&t){const e=C(2);p(2),Q("",e.selectedAnimal.name," ")}}function PG(t,i){if(1&t){const e=fe();f(0,"div")(1,"span")(2,"input",58),N("ngModelChange",function(r){return B(e),C(2).newName=r}),h()(),f(3,"span")(4,"button",8),N("click",function(){return B(e),C(2).editName()}),g(5,"Save"),h()(),f(6,"span")(7,"button",8),N("click",function(){B(e);const r=C(2);return r.editingName=!r.editingName}),g(8,"Cancel"),h()()()}if(2&t){const e=C(2);p(2),b("ngModel",e.newName)}}function EG(t,i){if(1&t&&(f(0,"span",59),g(1),h()),2&t){const e=C(2);Wi("ngbPopover",e.traitStatGainDescription),p(1),Q(" ",e.selectedAnimal.trait.traitName," ")}}function IG(t,i){if(1&t&&(f(0,"div"),M(1,AG,6,1,"div",6),M(2,PG,9,1,"div",6),f(3,"span",12),M(4,EG,2,2,"span",55),g(5),h()()),2&t){const e=C();p(1),b("ngIf",!e.editingName),p(1),b("ngIf",e.editingName),p(2),b("ngIf",null!=e.selectedAnimal.trait),p(1),Q(" ",e.selectedAnimal.getAnimalType()," ")}}function OG(t,i){if(1&t){const e=fe();f(0,"div")(1,"span")(2,"button",8),N("click",function(){B(e);const r=C(2);return r.editingName=!r.editingName}),g(3,"Edit Name"),h()()()}}function NG(t,i){if(1&t){const e=fe();f(0,"div")(1,"span")(2,"input",60),N("ngModelChange",function(r){return B(e),C(2).newName=r}),h()(),f(3,"span")(4,"button",8),N("click",function(){return B(e),C(2).editName()}),g(5,"Save"),h()(),f(6,"span")(7,"button",8),N("click",function(){B(e);const r=C(2);return r.editingName=!r.editingName}),g(8,"Cancel"),h()()()}if(2&t){const e=C(2);p(2),b("ngModel",e.newName)}}function VG(t,i){if(1&t&&(f(0,"span",59),g(1),h()),2&t){const e=C(2);Wi("ngbPopover",e.traitStatGainDescription),p(1),Q(" ",e.selectedAnimal.trait.traitName," ")}}function FG(t,i){if(1&t&&(f(0,"div"),M(1,OG,4,0,"div",6),M(2,NG,9,1,"div",6),f(3,"span",12),M(4,VG,2,2,"span",55),g(5),h()()),2&t){const e=C();p(1),b("ngIf",!e.editingName),p(1),b("ngIf",e.editingName),p(2),b("ngIf",null!=e.selectedAnimal.trait),p(1),Q(" ",e.selectedAnimal.getAnimalType()," ")}}function BG(t,i){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=C();p(1),Q("(",e.selectedAnimal.currentTraining.trainingName,")")}}function LG(t,i){if(1&t&&x(0,"app-toggle",61),2&t){const e=C();b("callbackFunction",e.toggleAutoBreed)("label","Auto Breed")("model",e.autoBreedActive)}}function UG(t,i){if(1&t&&(f(0,"div",14),g(1),x(2,"br")(3,"br"),g(4),h()),2&t){const e=C(2);b("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)),p(1),Q("Orb: ",e.selectedAnimal.equippedOrb.name," "),p(3),Q(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)," ")}}function HG(t,i){1&t&&(f(0,"div"),g(1," Orb: None "),h())}function GG(t,i){if(1&t){const e=fe();f(0,"button",8),N("click",function(){return B(e),C(2).unequipOrb()}),g(1,"Unequip Orb"),h()}}function jG(t,i){if(1&t){const e=fe();f(0,"div",62),M(1,UG,5,3,"div",5),M(2,HG,2,0,"div",6),x(3,"br"),M(4,GG,2,0,"button",7),f(5,"button",8),N("click",function(){B(e);const r=C(),a=it(215);return r.openOrbModal(a)}),g(6,"Equip New Orb"),h()()}if(2&t){const e=C();p(1),b("ngIf",null!=e.selectedAnimal.equippedOrb),p(1),b("ngIf",null==e.selectedAnimal.equippedOrb),p(2),b("ngIf",null!=e.selectedAnimal.equippedOrb)}}function zG(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Training:"),h(),g(4),At(5,"number"),h(),x(6,"br"),h()),2&t){const e=C(),n=it(203);p(2),b("ngbPopover",n),p(2),Q(" ",Jt(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromTraining,"1.0-0")," ")}}function $G(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Free Races:"),h(),g(4),At(5,"number"),h()()),2&t){const e=C(),n=it(199);p(2),b("ngbPopover",n),p(2),Q(" ",Jt(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces,"1.0-0")," ")}}function qG(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Circuit Races:"),h(),g(4),At(5,"number"),h()()),2&t){const e=C(),n=it(201);p(2),b("ngbPopover",n),p(2),Q(" ",Jt(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces,"1.0-0")," ")}}function WG(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Training Time Reduction:"),h(),g(4),At(5,"number"),h()()),2&t){const e=C(),n=it(207);p(2),b("ngbPopover",n),p(2),Q(" ",Jt(5,2,e.selectedAnimal.miscStats.trainingTimeReduction,"1.0-0"),"% ")}}function XG(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Diminishing Returns per Facility Level:"),h(),g(4),At(5,"number"),h()()),2&t){const e=C(),n=it(205);p(2),b("ngbPopover",n),p(2),Q(" ",Jt(5,2,e.selectedAnimal.miscStats.diminishingReturnsBonus,"1.0-0")," ")}}function YG(t,i){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Talents:"),h(),g(4),At(5,"number"),h()()),2&t){const e=C(),n=it(209);p(2),b("ngbPopover",n),p(2),Q(" ",Jt(5,2,e.selectedAnimal.miscStats.bonusTalents,"1.0-0")," ")}}function QG(t,i){if(1&t){const e=fe();f(0,"button",64),N("click",function(){B(e);const r=C();return r.selectAbility(r.ability2)}),g(1),h()}if(2&t){const e=C();bt("filterActive",e.selectedAnimal.ability.name===e.ability2.name),p(1),Q("",e.ability2.name," ")}}function KG(t,i){if(1&t){const e=fe();f(0,"button",65),N("click",function(){B(e);const r=C();return r.selectAbility(r.ability3)}),g(1),h()}if(2&t){const e=C();bt("filterActive",e.selectedAnimal.ability.name===e.ability3.name),p(1),Q("",e.ability3.name," ")}}function ZG(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=C();p(1),Kn("",e.selectedAbility.abilityXp," / ",e.selectedAbility.abilityMaxXp," XP")}}function JG(t,i){1&t&&(f(0,"span"),g(1,"MAX"),h())}function e9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getTopSpeedPopover()," ")}}function t9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getAccelerationPopover()," ")}}function n9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getEndurancePopover()," ")}}function i9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getPowerPopover()," ")}}function r9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getFocusPopover()," ")}}function a9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getAdaptabilityPopover()," ")}}function o9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getAbilityLevelPopover()," ")}}function s9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getBonusFreeRaceXpPopover()," ")}}function l9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getBonusCircuitRaceXpPopover()," ")}}function c9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getBonusTrainingXpPopover()," ")}}function u9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," ")}}function d9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getBonusTrainingTimeReductionPopover()," ")}}function h9(t,i){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=C();p(1),Q(" ",e.getBonusTalentsPopover()," ")}}function f9(t,i){if(1&t&&(f(0,"div"),x(1,"span",31),h()),2&t){const e=C().$implicit,n=C(4);p(1),b("innerHTML",n.getItemAdditionalText(e),jt)}}const p9=function(t){return{activeSelectedItem:t}};function g9(t,i){if(1&t){const e=fe();f(0,"td",76)(1,"div",77),N("click",function(){const a=B(e).$implicit;return C(4).selectItem(a)}),f(2,"h6",78),g(3),h(),M(4,f9,2,1,"div",6),x(5,"br")(6,"br"),g(7),x(8,"br")(9,"br"),h()()}if(2&t){const e=i.$implicit,n=C(4);p(1),b("ngClass",Jn(5,p9,e.isSelected)),p(2),Kn("",e.name," (",e.amount,")"),p(1),b("ngIf",n.itemHasAdditionalText(e)),p(3),Q(" ",n.getItemShortDescription(e.name)," ")}}function m9(t,i){if(1&t&&(f(0,"tr"),M(1,g9,10,7,"td",75),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function v9(t,i){if(1&t){const e=fe();f(0,"div",79)(1,"span",80)(2,"span")(3,"span",78),g(4),h(),g(5),h(),f(6,"span",81)(7,"label",82),g(8,"Amount: "),h(),f(9,"input",83),N("ngModelChange",function(r){return B(e),C(3).selectedItemQuantity=r}),h(),f(10,"button",84),N("click",function(){return B(e),C(3).useItem()}),g(11,"Use"),h()()()()}if(2&t){const e=C(3);p(4),Ze(e.selectedItem.name),p(1),Q(" - ",e.getItemShortDescription(e.selectedItem.name)," "),p(4),b("ngModel",e.selectedItemQuantity)}}function b9(t,i){if(1&t&&(f(0,"div")(1,"div",71)(2,"div",72)(3,"table"),M(4,m9,2,1,"tr",73),h()()(),M(5,v9,12,3,"div",74),h()),2&t){const e=C(2);p(4),b("ngForOf",e.itemsRows),p(1),b("ngIf",null!=e.selectedItem)}}function _9(t,i){1&t&&(f(0,"div"),g(1," No items available. "),h())}function y9(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Use Item"),h(),f(5,"button",70),N("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),M(7,b9,6,2,"div",6),M(8,_9,2,0,"div",6),h()()}if(2&t){const e=C();p(7),b("ngIf",e.usableItemsList.length>0),p(1),b("ngIf",0==e.usableItemsList.length)}}const C9=function(t){return{activeSelectedEquipment:t}};function w9(t,i){if(1&t){const e=fe();f(0,"td",76)(1,"div",86),N("click",function(){const a=B(e).$implicit;return C(3).selectEquipment(a)}),f(2,"h6",52),g(3),h(),x(4,"br")(5,"br"),g(6),x(7,"br"),h()()}if(2&t){const e=i.$implicit,n=C(3);p(1),b("ngClass",Jn(4,C9,e.isSelected)),p(2),Kn("",e.name," (",e.amount,")"),p(3),Q(" ",n.getEquipmentShortDescription(e.name)," ")}}function S9(t,i){if(1&t&&(f(0,"tr"),M(1,w9,8,6,"td",75),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function T9(t,i){if(1&t){const e=fe();f(0,"div",79)(1,"span",87)(2,"span")(3,"span",52),g(4),h(),g(5),h(),f(6,"span",81)(7,"button",84),N("click",function(){return B(e),C(2).equipItem()}),g(8,"Equip"),h()()()()}if(2&t){const e=C(2);p(4),Ze(e.selectedEquipment.name),p(1),Q(" - ",e.getEquipmentShortDescription(e.selectedEquipment.name)," ")}}function D9(t,i){1&t&&(f(0,"div"),g(1," No equipment available. "),h())}function R9(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Change Equipment"),h(),f(5,"button",70),N("click",function(){const a=B(e).$implicit;return C().clearSelectedItems(),a.dismiss()}),g(6,"X"),h()(),f(7,"div")(8,"div",71)(9,"div",85)(10,"table"),M(11,S9,2,1,"tr",73),h()()(),M(12,T9,9,2,"div",74),h(),M(13,D9,2,0,"div",6),h()()}if(2&t){const e=C();p(11),b("ngForOf",e.equipmentRows),p(1),b("ngIf",null!=e.selectedEquipment),p(1),b("ngIf",0==e.equipmentList.length)}}const x9=function(t){return{activeSelectedOrb:t}};function M9(t,i){if(1&t){const e=fe();f(0,"td",76)(1,"div",89),N("click",function(){const a=B(e).$implicit;return C(3).selectOrb(a)}),f(2,"h6",90),g(3),h(),x(4,"br"),g(5),x(6,"br"),h()()}if(2&t){const e=i.$implicit,n=C(3);p(1),b("ngClass",Jn(3,x9,e.isSelected)),p(2),Ze(e.name),p(2),Q(" ",n.getEquipmentShortDescription(e.name)," ")}}function k9(t,i){if(1&t&&(f(0,"tr"),M(1,M9,7,5,"td",75),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function A9(t,i){if(1&t){const e=fe();f(0,"div",79)(1,"span",91)(2,"span")(3,"span",90),g(4),h(),g(5),h(),f(6,"span",81)(7,"button",84),N("click",function(){return B(e),C(2).equipOrb()}),g(8,"Equip"),h()()()()}if(2&t){const e=C(2);p(4),Ze(e.selectedOrb.name),p(1),Q(" - ",e.getEquipmentShortDescription(e.selectedOrb.name)," ")}}function P9(t,i){1&t&&(f(0,"div"),g(1," No equipment available. "),h())}function E9(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Change Orb"),h(),f(5,"button",70),N("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div")(8,"div",71)(9,"div",88)(10,"table"),M(11,k9,2,1,"tr",73),h()()(),M(12,A9,9,2,"div",74),h(),M(13,P9,2,0,"div",6),h()()}if(2&t){const e=C();p(11),b("ngForOf",e.orbRows),p(1),b("ngIf",null!=e.selectedOrb),p(1),b("ngIf",0==e.equipmentList.length)}}const I9=function(t){return{selectedTalentTree:t}};function O9(t,i){if(1&t){const e=fe();f(0,"span",96),N("click",function(){const a=B(e).$implicit;return C(4).filterTalentTree(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=C(4);b("ngClass",Jn(2,I9,n.selectedTalentTree===e)),p(1),Q(" ",e.trim()," ")}}function N9(t,i){if(1&t&&(f(0,"div")(1,"strong"),g(2),h()()),2&t){const e=C(4);p(2),Q(" ",e.inDepthTalentTreeDescription," ")}}function V9(t,i){if(1&t&&(f(0,"div")(1,"div",94),M(2,O9,2,4,"span",95),h(),x(3,"hr"),M(4,N9,3,1,"div",6),h()),2&t){const e=C(3);p(2),b("ngForOf",e.talentTreeOptions),p(2),b("ngIf",""!==e.inDepthTalentTreeDescription&&void 0!==e.inDepthTalentTreeDescription)}}function F9(t,i){if(1&t){const e=fe();f(0,"div")(1,"div",71),M(2,V9,5,2,"div",6),h(),f(3,"div",79)(4,"button",93),N("click",function(){return B(e),C(2).selectTalentTree()}),g(5,"Select"),h()()()}if(2&t){const e=C(2);p(2),b("ngIf",e.talentTreeOptions.length>0)}}function B9(t,i){1&t&&x(0,"div",107)}function L9(t,i){if(1&t&&x(0,"div",11),2&t){const e=C().index,n=C().index;b("ngClass",C(3).getBorderConditional(n,e))}}function U9(t,i){if(1&t){const e=fe();f(0,"div",102)(1,"div",11)(2,"app-talent",103),N("spentTalent",function(r){return B(e),C(4).spentTalent(r)}),h()(),f(3,"div",104),M(4,B9,1,0,"div",105),M(5,L9,1,1,"div",106),h()()}if(2&t){const e=i.index,n=C().index,r=C(3);p(1),b("ngClass",n<r.talentRows-1?"talentContent":"lastTalentContent"),p(1),b("row",n)("column",e)("selectedAnimal",r.selectedAnimal),p(2),b("ngIf",n!==r.talentRows-1),p(1),b("ngIf",n!==r.talentRows-1)}}const WR=function(){return[]};function H9(t,i){if(1&t&&(f(0,"div",99)(1,"div",100),M(2,U9,6,6,"div",101),h()()),2&t){const e=C(3);p(2),b("ngForOf",Wg(1,WR).constructor(e.talentColumns))}}function G9(t,i){if(1&t&&(f(0,"div",71)(1,"div",97),g(2),h(),x(3,"br"),f(4,"p")(5,"em"),g(6," Note that this functionality is new and subject to change. I have plans to add more talents and certain talents will likely still need rebalancing/redesigning. Bear with me as I work that out. Once I feel like talents are in a final state, everyone will have the option to reset their talent choices if they choose to. Feel free to experiment with the options as they are now and let me know if you have any feedback. Thanks! "),h()(),x(7,"br"),M(8,H9,3,2,"div",98),h()),2&t){const e=C(2);p(2),Q("Available Talent Points: ",e.availableTalentPoints,""),p(6),b("ngForOf",Wg(2,WR).constructor(e.talentRows))}}function j9(t,i){1&t&&(f(0,"div"),g(1," Coming Soon! "),h())}function z9(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Talents"),h(),f(5,"button",70),N("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),M(7,F9,6,1,"div",6),M(8,G9,9,3,"div",92),M(9,j9,2,0,"div",6),h()()}if(2&t){const e=C();p(7),b("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType===e.talentTreeTypeEnum.none),p(1),b("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none),p(1),b("ngIf",!e.talentsReleased)}}function $9(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Base Stats Info"),h(),f(4,"button",70),N("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",108)(8,"div",66)(9,"span",12),g(10,"Speed - "),h(),g(11),h(),x(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Acceleration - "),h(),g(16),h(),x(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Endurance - "),h(),g(21),h(),x(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Power - "),h(),g(26),h(),x(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Focus - "),h(),g(31),h(),x(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Adaptability - "),h(),g(36),h(),x(37,"hr"),f(38,"div",66)(39,"span",12),g(40,"Diminishing Returns - "),h(),g(41),h()()()()}if(2&t){const e=C();p(11),Q(" ",e.getTopSpeedPopover()," "),p(5),Q(" ",e.getAccelerationPopover()," "),p(5),Q(" ",e.getEndurancePopover()," "),p(5),Q(" ",e.getPowerPopover()," "),p(5),Q(" ",e.getFocusPopover()," "),p(5),Q(" ",e.getAdaptabilityPopover()," "),p(5),Q(" ",e.getDiminishingReturnsPopover()," ")}}function q9(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Racing Stats Info"),h(),f(4,"button",70),N("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",23)(8,"div",66)(9,"span",12),g(10,"Max Speed - "),h(),g(11),h(),x(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Acceleration Rate - "),h(),g(16),h(),x(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Stamina - "),h(),g(21),h(),x(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Power Efficiency - "),h(),g(26),h(),x(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Focus Distance - "),h(),g(31),h(),x(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Adaptability Distance - "),h(),g(36),h(),x(37,"hr"),f(38,"div",66)(39,"span",12),g(40,"Burst Chance - "),h(),g(41),h(),x(42,"hr"),f(43,"div",66)(44,"span",12),g(45,"Burst Distance - "),h(),g(46),h()()()()}if(2&t){const e=C();p(11),Q(" ",e.selectedAnimal.currentStats.maxSpeedMsPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.accelerationMsPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.staminaPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.powerMsPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.focusMsPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.adaptabilityMsPopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.burstChancePopover()," "),p(5),Q(" ",e.selectedAnimal.currentStats.burstDistancePopover()," ")}}function W9(t,i){if(1&t){const e=fe();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Miscellaneous Stats Info"),h(),f(4,"button",70),N("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",108)(8,"div",66)(9,"span",12),g(10,"Bonus Breed XP From Training - "),h(),g(11),h(),x(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Bonus Breed XP From Free Races - "),h(),g(16),h(),x(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Bonus Breed XP From Circuit Races - "),h(),g(21),h(),x(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Training Time Reduction - "),h(),g(26),h(),x(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Bonus Diminishing Returns per Facility Level - "),h(),g(31),h(),x(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Bonus Talents - "),h(),g(36),h()()()()}if(2&t){const e=C();p(11),Q(" ",e.getBonusTrainingXpPopover()," "),p(5),Q(" ",e.getBonusFreeRaceXpPopover()," "),p(5),Q(" ",e.getBonusCircuitRaceXpPopover()," "),p(5),Q(" ",e.getBonusTrainingTimeReductionPopover()," "),p(5),Q(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," "),p(5),Q(" ",e.getBonusTalentsPopover()," ")}}let X9=(()=>{class t{constructor(e,n,r,a,o,s){this.lookupService=e,this.modalService=n,this.globalService=r,this.componentCommunicationService=a,this.utilityService=o,this.gameLoopService=s,this.returnEmitter=new nt,this.canAutoBreed=!1,this.areTalentsAvailable=!1,this.orbIsUnlocked=!1,this.talentTreeTypeEnum=ct,this.canBreed=!0,this.orbFunctionalityReleased=!1,this.talentsReleased=!0,this.talentColumns=3,this.talentRows=4,this.toggleAutoBreed=()=>{this.autoBreedActive=!this.autoBreedActive,this.selectedAnimal.autoBreedActive=this.autoBreedActive}}keyEvent(e){if(!this.modalService.hasOpenModals()){var n=this.globalService.globalVar.animals.filter(s=>s.isAvailable),r=n.findIndex(s=>this.selectedAnimal===s);if(r>-1)if("ArrowLeft"===e.key)(a=r-1)<0&&(a=n.length-1),this.componentCommunicationService.setAnimalView(ft.animals,o=n[a]),this.resetSelectedAnimalInfo(o);else if("ArrowRight"===e.key){var a,o;(a=r+1)===n.length&&(a=0),this.componentCommunicationService.setAnimalView(ft.animals,o=n[a]),this.resetSelectedAnimalInfo(o)}}}ngOnInit(){this.handleIntroTutorial(),this.resetSelectedAnimalInfo(this.selectedAnimal),this.breedDescriptionPopover="When your Breed XP reaches the max, you can Breed your animal. This will reset your base stats, but it will also increase the amount that your base stats contribute to your racing stats."}returnToAnimalView(){this.returnEmitter.emit(!1)}isAbilityLevelMaxedOut(){var e=25,n=this.globalService.globalVar.modifiers.find(r=>"abilityLevelCapModifier"===r.text);return null!=n&&(e=n.value),null!=this.selectedAbility&&this.selectedAbility.abilityLevel>this.selectedAnimal.breedLevel+e}canAnimalBreed(){var e=!0;return this.selectedAnimal.breedGaugeXp<this.selectedAnimal.breedGaugeMax&&(e=!1),e}breed(){this.globalService.BreedAnimal(this.selectedAnimal),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel),this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut()}editName(){this.newName.length<=50&&this.newName.length>=1?(this.selectedAnimal.name=this.newName,this.editingName=!1):alert("Name must be between 1 and 50 characters long.")}selectAbility(e){this.selectedAnimal.ability=e,this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal)}updateItemsList(){this.usableItemsList=[],this.globalService.globalVar.resources.filter(e=>(e.itemType===Y.Food||e.itemType===Y.Consumable)&&e.amount>0).forEach(e=>{void 0!==e&&this.usableItemsList.push(e)}),this.setupDisplayItems()}updateEquipmentList(){this.equipmentList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===Y.Equipment&&!this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var n=e.makeCopy(e);this.equipmentList.push(n)}}),this.setupDisplayEquipment(),this.globalService.globalVar.animals.filter(e=>null!=e.equippedItem).forEach(e=>{var n=this.equipmentList.find(r=>{var a;return r.name===(null===(a=e.equippedItem)||void 0===a?void 0:a.name)});null!=n&&(n.amount>0&&(n.amount-=1),n.amount<=0&&(this.equipmentList=this.equipmentList.filter(r=>r.name!==(null==n?void 0:n.name))))})}updateOrbList(){this.orbList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===Y.Equipment&&this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var n=e.makeCopy(e);this.orbList.push(n)}}),this.setupDisplayEquipment()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];for(var n=1;n<=this.usableItemsList.length;n++)this.itemsCells.push(this.usableItemsList[n-1]),n%4==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}setupDisplayEquipment(){this.equipmentCells=[],this.equipmentRows=[];for(var n=1;n<=this.equipmentList.length;n++)this.equipmentCells.push(this.equipmentList[n-1]),n%4==0&&(this.equipmentRows.push(this.equipmentCells),this.equipmentCells=[]);0!==this.equipmentCells.length&&this.equipmentRows.push(this.equipmentCells)}setupDisplayOrbs(){this.orbCells=[],this.orbRows=[];for(var n=1;n<=this.orbList.length;n++)this.orbCells.push(this.orbList[n-1]),n%4==0&&(this.orbRows.push(this.orbCells),this.orbCells=[]);0!==this.orbCells.length&&this.orbRows.push(this.orbCells)}openTalentsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openBaseStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openRacingStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openMiscStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openItemModal(e){this.setupDisplayItems(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()},r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()})}openEquipmentModal(e){this.setupDisplayEquipment(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()},r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()})}openOrbModal(e){this.setupDisplayOrbs(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()},r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()})}useItem(){if(void 0!==this.selectedItem){var e=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name&&r.itemType===this.selectedItem.itemType);if(void 0===e)return void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");if(null==this.selectedItemQuantity||isNaN(Number(this.selectedItemQuantity)))return void alert("You must enter a numerical amount to use.");if(e.amount<this.selectedItemQuantity)return void alert("You don't have that many "+e.name+"!");if(this.selectedItem.itemType===Y.Consumable&&this.selectedItem.name.includes("Certificate")&&this.lookupService.isAmountMoreThanCertificateCap(this.selectedItemQuantity,this.selectedAnimal,this.selectedItem.name))return void alert("This amount will exceed the amount of these certificates you can give your animal.");if(e.amount-=this.selectedItemQuantity,this.selectedItem.itemType===Y.Food)if("Mangoes"===this.selectedItem.name)this.selectedAnimal.breedLevel+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal);else{var n=new Ee(0,0,0,0,0,0);"Apples"===this.selectedItem.name&&(n.acceleration=this.selectedItemQuantity),"Bananas"===this.selectedItem.name&&(n.topSpeed=this.selectedItemQuantity),"Strawberries"===this.selectedItem.name&&(n.endurance=this.selectedItemQuantity),"Carrots"===this.selectedItem.name&&(n.power=this.selectedItemQuantity),"Turnips"===this.selectedItem.name&&(n.focus=this.selectedItemQuantity),"Oranges"===this.selectedItem.name&&(n.adaptability=this.selectedItemQuantity),this.selectedAnimal.increaseStats(n),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}else this.selectedItem.itemType===Y.Consumable&&(this.selectedItemQuantity=+this.selectedItemQuantity,"Free Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+=+this.selectedItemQuantity),"Circuit Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces+=2*this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+=+this.selectedItemQuantity),"Training Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromTraining+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+=+this.selectedItemQuantity),"Diminishing Returns Increase Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.diminishingReturnsBonus+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal)));this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()}}selectItem(e){this.selectedItem=e,this.usableItemsList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}clearSelectedItems(){this.usableItemsList.forEach(e=>{e.isSelected=!1})}clearSelectedEquipment(){this.equipmentList.forEach(e=>{e.isSelected=!1})}clearSelectedOrb(){this.orbList.forEach(e=>{e.isSelected=!1})}equipItem(){void 0!==this.selectedEquipment&&(this.selectedAnimal.equippedItem=this.selectedEquipment,this.updateEquipmentList(),this.clearSelectedEquipment(),this.modalService.dismissAll(),this.selectedEquipment=void 0)}selectEquipment(e){this.selectedEquipment=e,this.equipmentList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}unequipItem(){this.selectedAnimal.equippedItem=null,this.clearSelectedEquipment(),this.updateEquipmentList()}equipOrb(){void 0!==this.selectedOrb&&(this.selectedAnimal.equippedOrb=this.selectedOrb,this.updateOrbList(),this.clearSelectedOrb(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal),this.modalService.dismissAll(),this.selectedOrb=void 0)}selectOrb(e){this.selectedOrb=e,this.orbList.forEach(n=>{n.isSelected=!1}),e.isSelected=!0}unequipOrb(){this.selectedAnimal.equippedOrb=null,this.clearSelectedOrb(),this.updateOrbList(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}getTopSpeedPopover(){return this.lookupService.topSpeedPopover(this.selectedAnimal)}getAccelerationPopover(){return this.lookupService.accelerationPopover(this.selectedAnimal)}getEndurancePopover(){return this.lookupService.endurancePopover(this.selectedAnimal)}getPowerPopover(){return this.lookupService.powerPopover(this.selectedAnimal)}getFocusPopover(){return this.lookupService.focusPopover(this.selectedAnimal)}getAdaptabilityPopover(){return this.lookupService.adaptabilityPopover(this.selectedAnimal)}getAbilityLevelPopover(){return this.lookupService.abilityLevelPopover(this.selectedAnimal)}getBonusFreeRaceXpPopover(){return this.lookupService.bonusFreeRaceXpPopover(this.selectedAnimal)}getBonusCircuitRaceXpPopover(){return this.lookupService.bonusCircuitRaceXpPopover(this.selectedAnimal)}getBonusTrainingXpPopover(){return this.lookupService.bonusTrainingXpPopover(this.selectedAnimal)}getBonusDiminishingReturnsPerFacilityLevelPopover(){return this.lookupService.bonusDiminishingReturnsPerFacilityLevelPopover(this.selectedAnimal)}getBonusTrainingTimeReductionPopover(){return this.lookupService.bonusTrainingTimeReductionPopover(this.selectedAnimal)}getBonusTalentsPopover(){return this.lookupService.bonusTalentsPopover(this.selectedAnimal)}getAbilityPopover(){return this.lookupService.abilityPopover()}getDiminishingReturnsPopover(){return"Once a trainable stat is over this number, additional gains in this stat will be reduced. Increase with Facility Level."}getEquipmentShortDescription(e){return this.globalService.getEquipmentDescription(e)}getItemShortDescription(e){return this.globalService.getItemDescription(e)}itemHasAdditionalText(e){return!(e.itemType!==Y.Consumable||!e.name.includes("Certificate"))}getItemAdditionalText(e){var n="";return e.itemType===Y.Consumable&&e.name.includes("Certificate")&&("Free Race Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Circuit Race Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Training Breed XP Gain Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Diminishing Returns Increase Certificate"===e.name&&(n="<em>"+this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>")),this.utilityService.getSanitizedHtml(n)}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&8===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}goToAssignedBarn(){var e=this.globalService.globalVar.barns.find(n=>n.barnNumber===this.selectedAnimal.associatedBarnNumber);null!=e&&this.componentCommunicationService.setBarnView(ft.barn,e.barnNumber)}filterTalentTree(e){this.selectedTalentTree=e,this.inDepthTalentTreeDescription=this.lookupService.getInDepthTalentTreeDescription(e)}selectTalentTree(){""!==this.selectedTalentTree&&null!=this.selectedTalentTree?this.selectedAnimal.talentTree.talentTreeType=this.lookupService.convertTalentTreeNameToEnum(this.selectedTalentTree):alert("You must select a talent tree.")}resetSelectedAnimalInfo(e){var n=this;this.selectedAnimal=e,this.areTalentsAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.orbIsUnlocked=this.lookupService.isItemUnlocked("orbs"),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel);var r=this.lookupService.getStockbreeder();null!=r&&r>0&&(this.canAutoBreed=!0),this.canAutoBreed&&(this.autoBreedActive=this.selectedAnimal.autoBreedActive),this.ability1=this.selectedAnimal.availableAbilities[0],this.selectedAnimal.availableAbilities.length>1&&(this.ability2=this.selectedAnimal.availableAbilities[1]),this.selectedAnimal.availableAbilities.length>2&&(this.ability3=this.selectedAnimal.availableAbilities[2]),this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal),null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.updateItemsList(),this.updateEquipmentList(),this.updateOrbList(),this.selectedTalentTree="",this.inDepthTalentTreeDescription="",this.componentCommunicationService.setAnimalView(ft.animals,e);var a=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedAnimal.associatedBarnNumber);this.assignedBarnName=null==a?"Unassigned":"Assigned to: "+this.lookupService.getBarnName(a),this.areTalentsAvailable&&(this.talentTreeOptions=this.lookupService.getTalentTreeNames(),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var o=vr(function*(s){n.canBreed=n.canAnimalBreed()});return function(s){return o.apply(this,arguments)}}())}getTalentTreeName(){var e=this.selectedAnimal.talentTree.getTotalSpentPoints();return this.lookupService.getTalentTreeNameByEnum(this.selectedAnimal.talentTree.talentTreeType)+" Level "+e}getBorderConditional(e,n){var r,a=e+1,o=0;1===a&&(o=this.selectedAnimal.talentTree.row2RequiredPoints),2===a&&(o=this.selectedAnimal.talentTree.row3RequiredPoints),3===a&&(o=this.selectedAnimal.talentTree.row4RequiredPoints);var s=o-this.selectedAnimal.talentTree.getTalentPointsByColumn(n);return"Flatland"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedFlatlandTalentSpacer height0":!0}:4===s?r={"completedFlatlandTalentSpacer height1":!0}:3===s?r={"completedFlatlandTalentSpacer height2":!0}:2===s?r={"completedFlatlandTalentSpacer height3":!0}:1===s?r={"completedFlatlandTalentSpacer height4":!0}:s<=0&&(r={"completedFlatlandTalentSpacer height5":!0})),"Mountain"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedMountainTalentSpacer height0":!0}:4===s?r={"completedMountainTalentSpacer height1":!0}:3===s?r={"completedMountainTalentSpacer height2":!0}:2===s?r={"completedMountainTalentSpacer height3":!0}:1===s?r={"completedMountainTalentSpacer height4":!0}:s<=0&&(r={"completedMountainTalentSpacer height5":!0})),"Ocean"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedOceanTalentSpacer height0":!0}:4===s?r={"completedOceanTalentSpacer height1":!0}:3===s?r={"completedOceanTalentSpacer height2":!0}:2===s?r={"completedOceanTalentSpacer height3":!0}:1===s?r={"completedOceanTalentSpacer height4":!0}:s<=0&&(r={"completedOceanTalentSpacer height5":!0})),"Tundra"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedTundraTalentSpacer height0":!0}:4===s?r={"completedTundraTalentSpacer height1":!0}:3===s?r={"completedTundraTalentSpacer height2":!0}:2===s?r={"completedTundraTalentSpacer height3":!0}:1===s?r={"completedTundraTalentSpacer height4":!0}:s<=0&&(r={"completedTundraTalentSpacer height5":!0})),"Volcanic"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedVolcanicTalentSpacer height0":!0}:4===s?r={"completedVolcanicTalentSpacer height1":!0}:3===s?r={"completedVolcanicTalentSpacer height2":!0}:2===s?r={"completedVolcanicTalentSpacer height3":!0}:1===s?r={"completedVolcanicTalentSpacer height4":!0}:s<=0&&(r={"completedVolcanicTalentSpacer height5":!0})),r}spentTalent(e){this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setAnimal(new wt)}}return t.\u0275fac=function(e){return new(e||t)(P(hn),P(lo),P(St),P(qn),P(Li),P(mi))},t.\u0275cmp=lt({type:t,selectors:[["app-selected-animal"]],hostBindings:function(e,n){1&e&&N("keyup",function(a){return n.keyEvent(a)},!1,Ya)},inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:224,vars:113,consts:[[1,"selectedAnimalView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"equippable"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","talents",4,"ngIf"],[1,"animalInfo"],[3,"ngClass"],[1,"keyword"],[1,"clickableText","buttonAsText",3,"click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[3,"callbackFunction","label","model",4,"ngIf"],[1,"back"],["class","orb",4,"ngIf"],[1,"gridContainer"],[1,"trainableStats"],[1,"s4Heading"],[1,"tooltipIcon",3,"click"],[1,"racingStats"],[1,"miscStats"],[1,"abilities"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"s4Heading",3,"ngbPopover"],[1,"ability1","s5Heading","clickableText","buttonAsText",3,"click"],["class","ability2 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],["class","ability3 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],[1,"abilityXp"],[3,"innerHTML"],["topSpeedPopoverContent",""],["accelerationPopoverContent",""],["endurancePopoverContent",""],["powerPopoverContent",""],["focusPopoverContent",""],["adaptabilityPopoverContent",""],["abilityLevelPopoverContent",""],["bonusFreeRaceXpPopoverContent",""],["bonusCircuitRaceXpPopoverContent",""],["bonusTrainingXpPopoverContent",""],["bonusDiminishingReturnsPerFacilityLevelPopoverContent",""],["bonusTrainingTimeReductionPopoverContent",""],["bonusTalentsPopoverContent",""],["content",""],["equipment",""],["orb",""],["talentsContent",""],["baseStatsContent",""],["racingStatsContent",""],["miscStatsContent",""],[1,"equipmentKeyword"],[1,"talents"],["class","keyword",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"name","keyword"],[1,"editName",3,"click"],["id","newName","name","newName","maxlength","50",3,"ngModel","ngModelChange"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],["id","newName","name","newName","minlength","1","maxlength","50",3,"ngModel","ngModelChange"],[3,"callbackFunction","label","model"],[1,"orb"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],[1,"ability2","s5Heading","clickableText","buttonAsText",3,"click"],[1,"ability3","s5Heading","clickableText","buttonAsText",3,"click"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"selectableItem",3,"ngClass","click"],[1,"resourceKeyword"],[1,"modal-footer"],[1,"selectedItemSpan"],[1,"rightAlign"],["for","deck-name"],["id","deck-name","type","text",1,"spaced",3,"ngModel","ngModelChange"],["type","button",1,"spaced",3,"click"],[1,"equipmentContainer"],[1,"selectableEquipment",3,"ngClass","click"],[1,"selectedEquipmentSpan"],[1,"orbContainer"],[1,"selectableOrb",3,"ngClass","click"],[1,"progressionKeyword"],[1,"selectedOrbSpan"],["class","modal-body",4,"ngIf"],["type","button",3,"click"],[1,"typeContainer"],["class","talents subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"talents","subHeading",3,"ngClass","click"],[1,"talentInfo"],["class","talentRow",4,"ngFor","ngForOf"],[1,"talentRow"],[1,"rowFlex"],["class","talentColumn",4,"ngFor","ngForOf"],[1,"talentColumn"],[3,"row","column","selectedAnimal","spentTalent"],[1,"talentSpacer"],["class","defaultTalentSpacer",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"defaultTalentSpacer"],[1,"baseStats"]],template:function(e,n){if(1&e){const r=fe();f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),M(6,DG,7,3,"div",5),M(7,RG,2,0,"div",6),x(8,"br"),M(9,xG,2,0,"button",7),f(10,"button",8),N("click",function(){B(r);const o=it(213);return n.openEquipmentModal(o)}),g(11,"Equip New Item"),h()(),x(12,"br"),M(13,kG,5,1,"div",9),h(),f(14,"div",10)(15,"div",11),M(16,IG,6,4,"div",6),M(17,FG,6,4,"div",6),f(18,"span",12),g(19),h(),x(20,"br"),h(),f(21,"button",13),N("click",function(){return n.goToAssignedBarn()}),g(22),M(23,BG,2,1,"em",6),h(),x(24,"br"),f(25,"span",14),g(26),h(),x(27,"br"),f(28,"span",14),g(29),At(30,"number"),f(31,"button",15),N("click",function(){return n.breed()}),g(32,"Breed"),h()(),x(33,"br"),f(34,"button",8),N("click",function(){B(r);const o=it(211);return n.openItemModal(o)}),g(35,"Use Item"),h(),x(36,"br"),M(37,LG,1,3,"app-toggle",16),h(),f(38,"div",17)(39,"div")(40,"button",8),N("click",function(){return n.returnToAnimalView()}),g(41,"Back"),h()(),x(42,"br"),M(43,jG,7,3,"div",18),h()(),x(44,"hr"),f(45,"div",19)(46,"div",20)(47,"span",21),g(48,"Base Stats "),f(49,"span",22),N("click",function(){B(r);const o=it(219);return n.openBaseStatsModal(o)}),g(50,"?"),h()(),x(51,"br")(52,"br"),f(53,"span",14)(54,"span",12),g(55,"Speed:"),h(),g(56),At(57,"number"),h(),x(58,"br"),f(59,"span",14)(60,"span",12),g(61,"Acceleration:"),h(),g(62),At(63,"number"),h(),x(64,"br"),f(65,"span",14)(66,"span",12),g(67,"Endurance:"),h(),g(68),At(69,"number"),h(),x(70,"br"),f(71,"span",14)(72,"span",12),g(73,"Power:"),h(),g(74),At(75,"number"),h(),x(76,"br"),f(77,"span",14)(78,"span",12),g(79,"Focus:"),h(),g(80),At(81,"number"),h(),x(82,"br"),f(83,"span",14)(84,"span",12),g(85,"Adaptability:"),h(),g(86),At(87,"number"),h(),x(88,"br"),f(89,"span",14)(90,"span",12),g(91,"Diminishing Returns:"),h(),g(92),At(93,"number"),h()(),f(94,"div",23)(95,"span",21),g(96,"Racing Stats "),f(97,"span",22),N("click",function(){B(r);const o=it(221);return n.openRacingStatsModal(o)}),g(98,"?"),h()(),x(99,"br")(100,"br"),f(101,"span",14)(102,"span",12),g(103,"Max Speed:"),h(),g(104),At(105,"number"),h(),x(106,"br"),f(107,"span",14)(108,"span",12),g(109,"Acceleration Rate:"),h(),g(110),At(111,"number"),h(),x(112,"br"),f(113,"span",14)(114,"span",12),g(115,"Stamina:"),h(),g(116),At(117,"number"),h(),x(118,"br"),f(119,"span",14)(120,"span",12),g(121,"Power Efficiency:"),h(),g(122),At(123,"number"),h(),x(124,"br"),f(125,"span",14)(126,"span",12),g(127,"Focus Distance:"),h(),g(128),At(129,"number"),h(),x(130,"br"),f(131,"span",14)(132,"span",12),g(133,"Adaptability Distance:"),h(),g(134),At(135,"number"),h(),x(136,"br"),f(137,"span",14)(138,"span",12),g(139,"Burst Chance:"),h(),g(140),At(141,"number"),h(),x(142,"br"),f(143,"span",14)(144,"span",12),g(145,"Burst Distance:"),h(),g(146),At(147,"number"),h()(),f(148,"div",24)(149,"span",21),g(150,"Miscellaneous Stats "),f(151,"span",22),N("click",function(){B(r);const o=it(223);return n.openMiscStatsModal(o)}),g(152,"?"),h()(),x(153,"br")(154,"br"),M(155,zG,7,5,"div",6),M(156,$G,6,5,"div",6),M(157,qG,6,5,"div",6),M(158,WG,6,5,"div",6),M(159,XG,6,5,"div",6),M(160,YG,6,5,"div",6),h()(),f(161,"div",25)(162,"p")(163,"span",26),g(164,"Abilities"),h(),x(165,"br"),f(166,"span")(167,"em"),g(168,"Your animal will use the ability you select below."),h()()(),f(169,"div")(170,"div")(171,"button",27),N("click",function(){return n.selectAbility(n.ability1)}),g(172),h(),M(173,QG,2,3,"button",28),M(174,KG,2,3,"button",29),h(),x(175,"br"),f(176,"p")(177,"span",14),g(178),f(179,"span",30),M(180,ZG,2,2,"span",6),M(181,JG,2,0,"span",6),h()(),x(182,"br")(183,"span",31),h()()()()()(),M(184,e9,2,1,"ng-template",null,32,rt),M(186,t9,2,1,"ng-template",null,33,rt),M(188,n9,2,1,"ng-template",null,34,rt),M(190,i9,2,1,"ng-template",null,35,rt),M(192,r9,2,1,"ng-template",null,36,rt),M(194,a9,2,1,"ng-template",null,37,rt),M(196,o9,2,1,"ng-template",null,38,rt),M(198,s9,2,1,"ng-template",null,39,rt),M(200,l9,2,1,"ng-template",null,40,rt),M(202,c9,2,1,"ng-template",null,41,rt),M(204,u9,2,1,"ng-template",null,42,rt),M(206,d9,2,1,"ng-template",null,43,rt),M(208,h9,2,1,"ng-template",null,44,rt),M(210,y9,9,2,"ng-template",null,45,rt),M(212,R9,14,3,"ng-template",null,46,rt),M(214,E9,14,3,"ng-template",null,47,rt),M(216,z9,10,3,"ng-template",null,48,rt),M(218,$9,42,7,"ng-template",null,49,rt),M(220,q9,47,8,"ng-template",null,50,rt),M(222,W9,37,6,"ng-template",null,51,rt)}if(2&e){const r=it(185),a=it(187),o=it(189),s=it(191),l=it(193),c=it(195),u=it(197);p(6),b("ngIf",null!=n.selectedAnimal.equippedItem),p(1),b("ngIf",null==n.selectedAnimal.equippedItem),p(2),b("ngIf",null!=n.selectedAnimal.equippedItem),p(4),b("ngIf",n.areTalentsAvailable),p(2),b("ngClass",n.colorConditional),p(1),b("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),p(1),b("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),p(2),Ze(n.selectedAnimal.getRaceCourseType()),p(3),Q("",n.assignedBarnName," "),p(1),b("ngIf",null!=n.selectedAnimal.currentTraining),p(2),Wi("ngbPopover",n.breedLevelPopover),p(1),Q("Breed Level ",n.selectedAnimal.breedLevel,""),p(2),b("ngbPopover",n.breedDescriptionPopover),p(1),Kn("Breed XP: ",Jt(30,65,n.selectedAnimal.breedGaugeXp,"1.2-2"),"/",n.selectedAnimal.breedGaugeMax," "),p(2),b("disabled",!n.canBreed),p(6),b("ngIf",n.canAutoBreed),p(6),b("ngIf",n.orbIsUnlocked&&n.orbFunctionalityReleased),p(10),b("ngbPopover",r),p(3),Q(" ",Jt(57,68,n.selectedAnimal.currentStats.topSpeed,"1.2-2")," "),p(3),b("ngbPopover",a),p(3),Q(" ",Jt(63,71,n.selectedAnimal.currentStats.acceleration,"1.2-2")," "),p(3),b("ngbPopover",o),p(3),Q(" ",Jt(69,74,n.selectedAnimal.currentStats.endurance,"1.2-2")," "),p(3),b("ngbPopover",s),p(3),Q(" ",Jt(75,77,n.selectedAnimal.currentStats.power,"1.2-2")," "),p(3),b("ngbPopover",l),p(3),Q(" ",Jt(81,80,n.selectedAnimal.currentStats.focus,"1.2-2")," "),p(3),b("ngbPopover",c),p(3),Q(" ",Jt(87,83,n.selectedAnimal.currentStats.adaptability,"1.2-2")," "),p(3),Wi("ngbPopover",n.getDiminishingReturnsPopover()),p(3),Q(" ",Jt(93,86,n.diminishingReturnsAmount,"1.0-0")," "),p(9),Wi("ngbPopover",n.selectedAnimal.currentStats.maxSpeedMsPopover()),p(3),Q(" ",Jt(105,89,n.selectedAnimal.currentStats.maxSpeedMs,"1.2-2")," m/s "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.accelerationMsPopover()),p(3),Q(" ",Jt(111,92,n.selectedAnimal.currentStats.accelerationMs,"1.2-2")," m/s "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.staminaPopover()),p(3),Q(" ",Jt(117,95,n.selectedAnimal.currentStats.stamina,"1.2-2")," "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.powerMsPopover()),p(3),Q(" ",Jt(123,98,n.selectedAnimal.currentStats.powerMs,"1.2-2"),"% "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.focusMsPopover()),p(3),Q(" ~",Jt(129,101,n.selectedAnimal.currentStats.focusMs,"1.2-2")," m "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.adaptabilityMsPopover()),p(3),Q(" ~",Jt(135,104,n.selectedAnimal.currentStats.adaptabilityMs,"1.2-2")," m "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.burstChancePopover()),p(3),Q(" ",Jt(141,107,n.selectedAnimal.currentStats.burstChance,"1.2-2"),"% "),p(3),Wi("ngbPopover",n.selectedAnimal.currentStats.burstDistancePopover()),p(3),Q(" ",Jt(147,110,n.selectedAnimal.currentStats.burstDistance,"1.2-2")," m "),p(9),b("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromTraining>0),p(1),b("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces>0),p(1),b("ngIf",n.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces>0),p(1),b("ngIf",n.selectedAnimal.miscStats.trainingTimeReduction>0),p(1),b("ngIf",n.selectedAnimal.miscStats.diminishingReturnsBonus>0),p(1),b("ngIf",n.selectedAnimal.miscStats.bonusTalents>0),p(3),b("ngbPopover",n.getAbilityPopover()),p(8),bt("filterActive",n.selectedAnimal.ability.name===n.ability1.name),p(1),Q("",n.ability1.name," "),p(1),b("ngIf",n.ability2.isAbilityPurchased),p(1),b("ngIf",n.ability3.isAbilityPurchased),p(3),b("ngbPopover",u),p(1),Q("Level ",n.selectedAbility.abilityLevel," "),p(2),b("ngIf",!n.abilityLevelMaxedOut),p(1),b("ngIf",n.abilityLevelMaxedOut),p(2),b("innerHTML",n.longDescription,jt)}},directives:[en,Or,Bn,rs,Kc,yl,wl,uv,bG,Ah,Ch,Qc,jn,TG],pipes:[no],styles:['.selectedAnimalView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.animalInfo[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:animalInfo}.back[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:back;justify-content:space-between;flex-direction:column;display:flex}.equippable[_ngcontent-%COMP%]{justify-content:space-between;flex-direction:column;display:flex;grid-area:equippable}.marginGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.filterActive[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor;color:var(--foreground-secondary)}.info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"equippable animalInfo back"}.gridContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-items:center;justify-content:stretch;grid-template-areas:"trainingStats racingStats miscStats"}.trainableStats[_ngcontent-%COMP%]{justify-self:left;grid-area:trainingStats}.racingStats[_ngcontent-%COMP%]{grid-area:racingStats}.miscStats[_ngcontent-%COMP%]{grid-area:miscStats}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.editName[_ngcontent-%COMP%]{width:4rem}.name[_ngcontent-%COMP%]{margin-left:4rem}.selectedEquipmentSpan[_ngcontent-%COMP%], .selectedOrbSpan[_ngcontent-%COMP%], .selectedItemSpan[_ngcontent-%COMP%]{width:100%}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.rightAlign[_ngcontent-%COMP%]{float:right}.ability1[_ngcontent-%COMP%], .ability2[_ngcontent-%COMP%], .ability3[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.typeContainer[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-evenly}.talentTreeType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedTalentTree[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid;text-decoration:underline solid}.rowFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.abilityXp[_ngcontent-%COMP%]{margin-left:2.5rem}.talentColumn[_ngcontent-%COMP%]{width:31.75%}.talentContent[_ngcontent-%COMP%]{height:calc(100% - 5rem);height:-o-calc(100% - 5rem);border:1px solid rgba(0,0,0,.1)}.lastTalentContent[_ngcontent-%COMP%]{height:100%;border:1px solid rgba(0,0,0,.1)}.talentInfo[_ngcontent-%COMP%]{text-align:center}.talentSpacer[_ngcontent-%COMP%]{display:grid;grid-template:1fr / 1fr;place-items:center}.defaultTalentSpacer[_ngcontent-%COMP%]{height:5rem;border-right:solid thick rgba(0,0,0,.1);grid-column:1 / 1;grid-row:1 / 1;z-index:1}.completedFlatlandTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--flatlandColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedMountainTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--mountainColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedOceanTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--waterColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedTundraTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--tundraColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedVolcanicTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--volcanicColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.height0[_ngcontent-%COMP%]{height:0}.height1[_ngcontent-%COMP%]{height:1rem}.height2[_ngcontent-%COMP%]{height:2rem}.height3[_ngcontent-%COMP%]{height:3rem}.height4[_ngcontent-%COMP%]{height:4rem}.height5[_ngcontent-%COMP%]{height:5rem}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}.activeSelectedItem[_ngcontent-%COMP%], .activeSelectedEquipment[_ngcontent-%COMP%], .activeSelectedOrb[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.selectableItem[_ngcontent-%COMP%], .selectableOrb[_ngcontent-%COMP%], .selectableEquipment[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem;margin-top:.25rem}.tooltipIcon[_ngcontent-%COMP%]{display:none}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}@media (max-width: 800px){.info[_ngcontent-%COMP%], .gridContainer[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr 1fr}.tooltipIcon[_ngcontent-%COMP%]{display:inline-block}}']}),t})();function Y9(t,i){1&t&&(f(0,"div",4)(1,"h2"),g(2,"Animals"),h(),f(3,"div",5),g(4," Select an animal to view its stats, change abilities, and more. "),h(),x(5,"hr"),h())}function Q9(t,i){if(1&t){const e=fe();f(0,"div",6)(1,"app-animal-list",7),N("selectedAnimal",function(r){return B(e),C().selectedAnimal(r)}),h()()}if(2&t){const e=C();p(1),b("availableAnimals",e.availableAnimals)}}function K9(t,i){if(1&t){const e=fe();f(0,"div",8)(1,"app-selected-animal",9),N("returnEmitter",function(r){return B(e),C().returnToAnimalView(r)}),h()()}if(2&t){const e=C();p(1),b("selectedAnimal",e.animal)}}let Z9=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(ft.animals),this.availableAnimals=this.globalService.globalVar.animals.filter(e=>e.isAvailable),this.subscription=this.componentCommunicationService.getAnimalView().subscribe(e=>{null!=e.type?(this.animalSelected=!0,this.animal=e):this.animalSelected=!1})}selectedAnimal(e){this.animalSelected=!0,this.animal=e,this.componentCommunicationService.setAnimalView(ft.animals,this.animal)}returnToAnimalView(e){this.animalSelected=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(qn))},t.\u0275cmp=lt({type:t,selectors:[["app-animals-view"]],decls:4,vars:3,consts:[[1,"animalsView"],["class","info",4,"ngIf"],["class","listView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"info"],[1,"description"],[1,"listView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,n){1&e&&(f(0,"div",0),M(1,Y9,6,0,"div",1),M(2,Q9,2,1,"div",2),M(3,K9,2,1,"div",3),h()),2&e&&(p(1),b("ngIf",!n.animalSelected),p(1),b("ngIf",!n.animalSelected),p(1),b("ngIf",n.animalSelected))},directives:[en,Cf,X9],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;overflow:hidden;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{width:100%;height:100%}.info[_ngcontent-%COMP%]{text-align:center}.selectedView[_ngcontent-%COMP%]{height:100%;overflow:auto}"]}),t})();function J9(t,i){if(1&t){const e=fe();f(0,"button",17),N("click",function(){B(e);const r=C().$implicit;return C().setAsAutoRunFreeRace(r)}),g(1,"Auto Run Free Race"),h()}}function ej(t,i){if(1&t){const e=fe();f(0,"button",18),N("click",function(){B(e);const r=C().$implicit;return C().setAsEventDeck(r)}),g(1,"Set as Event Team"),h()}}function tj(t,i){if(1&t){const e=fe();f(0,"div")(1,"div",7),x(2,"app-animal-deck",8),f(3,"div",9)(4,"button",10),N("click",function(){const a=B(e).$implicit,o=C(),s=it(11);return o.editDeck(s,a)}),g(5,"Edit"),h()(),f(6,"div",11)(7,"button",12),N("click",function(){const a=B(e).$implicit;return C().setAsPrimary(a)}),g(8,"Set as Primary Team"),h()(),f(9,"div",13),M(10,J9,2,0,"button",14),h(),f(11,"div",15),M(12,ej,2,0,"button",16),h()(),x(13,"hr"),h()}if(2&t){const e=i.index,n=C();p(2),b("deckNumber",e+1),p(8),b("ngIf",n.showAutoRaceButton),p(2),b("ngIf",n.showEventButton)}}function nj(t,i){if(1&t){const e=fe();f(0,"div",35)(1,"input",36),N("input",function(){return B(e),C(2).toggleRaceOrder()}),h(),f(2,"label",37),N("click",function(){return B(e),C(2).toggleRaceOrder()}),g(3,"Race Order: "),h(),f(4,"span")(5,"span",38),N("dragstart",function(r){return B(e),C(2).dragStart(r)})("dragover",function(r){return B(e),C(2).allowDrop(r)})("drop",function(r){return B(e),C(2).dropCourseType(r)}),g(6),h(),g(7," / "),f(8,"span",39),N("dragstart",function(r){return B(e),C(2).dragStart(r)})("dragover",function(r){return B(e),C(2).allowDrop(r)})("drop",function(r){return B(e),C(2).dropCourseType(r)}),g(9),h(),g(10," / "),f(11,"span",40),N("dragstart",function(r){return B(e),C(2).dragStart(r)})("dragover",function(r){return B(e),C(2).allowDrop(r)})("drop",function(r){return B(e),C(2).dropCourseType(r)}),g(12),h(),g(13," / "),f(14,"span",41),N("dragstart",function(r){return B(e),C(2).dragStart(r)})("dragover",function(r){return B(e),C(2).allowDrop(r)})("drop",function(r){return B(e),C(2).dropCourseType(r)}),g(15),h(),g(16," / "),f(17,"span",42),N("dragstart",function(r){return B(e),C(2).dragStart(r)})("dragover",function(r){return B(e),C(2).allowDrop(r)})("drop",function(r){return B(e),C(2).dropCourseType(r)}),g(18),h()()()}if(2&t){const e=C(2);p(1),b("checked",e.isRaceOrderOn),p(4),b("ngClass",e.getColorClass(e.selectedDeckOrder[0])),p(1),Ze(e.selectedDeckOrder[0]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[1])),p(1),Ze(e.selectedDeckOrder[1]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[2])),p(1),Ze(e.selectedDeckOrder[2]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[3])),p(1),Ze(e.selectedDeckOrder[3]),p(2),b("ngClass",e.getColorClass(e.selectedDeckOrder[4])),p(1),Ze(e.selectedDeckOrder[4])}}const ij=function(t,i,e,n,r,a){return{selectedCourseType:t,flatlandColor:i,mountainColor:e,waterColor:n,tundraColor:r,volcanicColor:a}};function rj(t,i){if(1&t){const e=fe();f(0,"button",43),N("click",function(){const a=B(e).$implicit;return C(2).filterType(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=C(2);b("ngClass",function SC(t,i,e,n,r,a,o,s,l){const c=Ji()+t,u=De(),d=jr(u,c,e,n,r,a);return Qo(u,c+4,o,s)||d?Ea(u,c+6,l?i.call(l,e,n,r,a,o,s):i(e,n,r,a,o,s)):Rc(u,c+6)}(2,ij,n.selectedCourseType===e,"Flatland"===e,"Mountain"===e,"Ocean"===e,"Tundra"===e,"Volcanic"===e)),p(1),Q(" ",e.trim()," ")}}const aj=function(t){return{selectedAnimal:t}};function oj(t,i){if(1&t){const e=fe();f(0,"button",44),N("click",function(){const a=B(e).$implicit;return C(2).selectAnimal(a)}),g(1),h()}if(2&t){const e=i.$implicit,n=C(2);b("ngClass",Jn(2,aj,n.selectedAnimalName===e)),p(1),Q(" ",e.trim()," ")}}function sj(t,i){if(1&t){const e=fe();f(0,"div",19)(1,"form",20)(2,"div",21)(3,"h4",22),g(4),h(),f(5,"button",23),N("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div",24)(8,"div",25)(9,"label",26),g(10,"Relay Team Name: "),h(),x(11,"input",27),h(),M(12,nj,19,11,"div",28),x(13,"br"),f(14,"div",29),M(15,rj,2,9,"button",30),h(),x(16,"br"),f(17,"div",31),M(18,oj,2,4,"button",32),h()(),f(19,"div",33)(20,"button",34),N("click",function(){return B(e),C().saveDeck()}),g(21,"Save"),h()()()()}if(2&t){const e=C();p(1),b("formGroup",e.editDeckForm),p(3),Q("Edit ",e.selectedDeck.name,""),p(8),b("ngIf",e.displayRaceOrder),p(3),b("ngForOf",e.raceCourseTypeList),p(3),b("ngForOf",e.possibleAnimalsList)}}let lj=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.modalService=n,this.lookupService=r,this.componentCommunicationService=a,this.raceCourseTypeList=[],this.displayRaceOrder=!1,this.editDeckForm=new kh({deckName:new nv("")}),this.toggleRaceOrder=()=>{this.isRaceOrderOn=!this.isRaceOrderOn,this.selectedDeck.isCourseOrderActive=this.isRaceOrderOn}}ngOnInit(){this.componentCommunicationService.setNewView(ft.relayTeams),this.isRaceOrderOn=!1,this.newAnimalList=[],this.animalDecks=this.globalService.globalVar.animalDecks,this.globalService.globalVar.animals.filter(r=>r.isAvailable).forEach(r=>{this.raceCourseTypeList.some(a=>a===r.getRaceCourseType())||this.raceCourseTypeList.push(r.getRaceCourseType())});var e=this.lookupService.getResourceByName("Scouts");null!=e&&e>0&&(this.displayRaceOrder=!0),this.selectedDeckOrder=[],this.selectedDeckOrder.push("Flatland"),this.selectedDeckOrder.push("Mountain"),this.selectedDeckOrder.push("Ocean"),this.selectedDeckOrder.push("Tundra"),this.selectedDeckOrder.push("Volcanic");var n=this.lookupService.getResourceByName("Team Manager");null==n&&(n=0),this.showAutoRaceButton=n>0,this.showEventButton=!!this.lookupService.isItemUnlocked("grandPrix")}editDeck(e,n){this.selectedDeck=n,this.newAnimalList=[],this.selectedAnimalName="",this.selectedCourseType="Flatland",this.isRaceOrderOn=n.isCourseOrderActive,null!=n.courseTypeOrder&&n.courseTypeOrder.length>0&&(this.selectedDeckOrder=[],n.courseTypeOrder.forEach(r=>{r===z.Flatland&&this.selectedDeckOrder.push("Flatland"),r===z.Mountain&&this.selectedDeckOrder.push("Mountain"),r===z.Ocean&&this.selectedDeckOrder.push("Ocean"),r===z.Tundra&&this.selectedDeckOrder.push("Tundra"),r===z.Volcanic&&this.selectedDeckOrder.push("Volcanic")})),this.filterType(this.selectedCourseType),n.selectedAnimals.length>0&&n.selectedAnimals.forEach(r=>{this.newAnimalList.push(r)}),this.editDeckForm.patchValue({deckName:n.name}),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}saveDeck(){var e,n,r,a,o,s,l,c,u=this.globalService.globalVar.animalDecks.find(D=>D.deckNumber===this.selectedDeck.deckNumber);if(null!=u&&((null===(e=this.editDeckForm.get("deckName"))||void 0===e?void 0:e.value.length)<=50&&(null===(n=this.editDeckForm.get("deckName"))||void 0===n?void 0:n.value.length)>=1&&(u.name=null===(r=this.editDeckForm.get("deckName"))||void 0===r?void 0:r.value),u.selectedAnimals=[],this.newAnimalList.forEach(D=>{null==u||u.selectedAnimals.push(D)}),null==u||u.selectedAnimals.sort(this.compare),this.displayRaceOrder&&this.isRaceOrderOn)){var d=[],m=null===(a=document.getElementById("raceOrder1"))||void 0===a?void 0:a.innerHTML,v=null===(o=document.getElementById("raceOrder2"))||void 0===o?void 0:o.innerHTML,_=null===(s=document.getElementById("raceOrder3"))||void 0===s?void 0:s.innerHTML,y=null===(l=document.getElementById("raceOrder4"))||void 0===l?void 0:l.innerHTML,S=null===(c=document.getElementById("raceOrder5"))||void 0===c?void 0:c.innerHTML;d.push(m),d.push(v),d.push(_),d.push(y),d.push(S),null!=u&&(u.courseTypeOrder=[]),d.forEach(D=>{"Flatland"===D&&(null==u||u.courseTypeOrder.push(z.Flatland)),"Mountain"===D&&(null==u||u.courseTypeOrder.push(z.Mountain)),"Ocean"===D&&(null==u||u.courseTypeOrder.push(z.Ocean)),"Tundra"===D&&(null==u||u.courseTypeOrder.push(z.Tundra)),"Volcanic"===D&&(null==u||u.courseTypeOrder.push(z.Volcanic))})}this.modalService.dismissAll()}compare(e,n){return e.raceCourseType>n.raceCourseType?1:n.raceCourseType>e.raceCourseType?-1:0}filterType(e){var n=this.lookupService.getAnimalsByRaceCourseType(e),r=[];n.length>0&&n.forEach(o=>{var s=this.globalService.globalVar.animals.find(l=>l.getAnimalType()===o);(null==s?void 0:s.isAvailable)&&r.push(s.getAnimalType())}),this.possibleAnimalsList=r,this.selectedCourseType=e;var a=this.selectedDeck.selectedAnimals.find(o=>o.getRaceCourseType()===e);null!=a&&(this.selectedAnimalName=a.getAnimalType())}selectAnimal(e){var n=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(null!=n){var r=-1,a=n.getRaceCourseType();this.newAnimalList.forEach(o=>{o.getRaceCourseType()===a&&(r=this.newAnimalList.indexOf(o))}),r>=0&&this.newAnimalList.splice(r,1),this.selectedAnimalName===n.getAnimalType()?this.selectedAnimalName="":(this.newAnimalList.push(n),this.selectedAnimalName=n.getAnimalType())}}setAsPrimary(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.isPrimaryDeck=!1),r.isPrimaryDeck=!0)}setAsAutoRunFreeRace(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.autoRunFreeRace),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.autoRunFreeRace=!1),r.autoRunFreeRace=!0)}setAsEventDeck(e){var n=this.globalService.globalVar.animalDecks.find(a=>a.isEventDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=n&&(n.isEventDeck=!1),r.isEventDeck=!0)}dragStart(e){this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id)}allowDrop(e){e.preventDefault()}dropCourseType(e){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.getData("text"),r=document.getElementById(n),a=e.target.innerHTML;if(null!==r&&null!==a){var l=this.selectedDeckOrder.indexOf(a),c=this.selectedDeckOrder.indexOf(null==r?void 0:r.innerHTML);this.selectedDeckOrder[l]=r.innerHTML,this.selectedDeckOrder[c]=a,e.target.innerHTML="",e.target.className="",e.target.append(r.innerHTML),r.innerHTML="",r.className="",r.append(a)}}getColorClass(e){return{flatlandColor:"Flatland"===e,mountainColor:"Mountain"===e,waterColor:"Ocean"===e,tundraColor:"Tundra"===e,volcanicColor:"Volcanic"===e}}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(lo),P(hn),P(qn))},t.\u0275cmp=lt({type:t,selectors:[["app-decks-view"]],decls:12,vars:1,consts:[[1,"decksView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"description"],[4,"ngFor","ngForOf"],["content",""],[1,"gridContainer"],[1,"deck",3,"deckNumber"],[1,"edit"],[1,"editButton",3,"click"],[1,"primary"],[1,"primaryButton",3,"click"],[1,"autoRunFreeRace"],["class","autoRunFreeRaceButton",3,"click",4,"ngIf"],[1,"event"],["class","eventButton",3,"click",4,"ngIf"],[1,"autoRunFreeRaceButton",3,"click"],[1,"eventButton",3,"click"],[1,"modalClass"],[3,"formGroup"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","deck-name"],["id","deck-name","type","text","maxlength","50","formControlName","deckName",1,"spaced"],["class","raceOrder",4,"ngIf"],[1,"typeContainer"],["class","raceType subHeading clickableText buttonAsTextKeepColor",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"animalContainer"],["class","animalOption clickableText buttonAsText",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",3,"click"],[1,"raceOrder"],["type","checkbox","id","finishTraining",1,"spaced",3,"checked","input"],[1,"spaced",3,"click"],["id","raceOrder1","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder2","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder3","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder4","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder5","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],[1,"raceType","subHeading","clickableText","buttonAsTextKeepColor",3,"ngClass","click"],[1,"animalOption","clickableText","buttonAsText",3,"ngClass","click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Relay Teams"),h(),f(6,"div",4),g(7," Relay Teams are groups of animals that run together in a race. As you rise through the ranks, races will have multiple legs of varying terrain that require you to use different animals to succeed. Each Relay Team consists of one animal from each course type. Your primary Relay Team is the one that will run the races you select. "),h(),x(8,"hr"),h(),M(9,tj,14,3,"div",5),h()()(),M(10,sj,22,5,"ng-template",null,6,rt)),2&e&&(p(9),b("ngForOf",n.animalDecks))},directives:[jn,T0,en,Ah,Ch,Ph,rs,Kc,yl,sv,Bn],styles:['.decksView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.animalContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.animalOption[_ngcontent-%COMP%]{display:inline-block}.selectedAnimal[_ngcontent-%COMP%]{font-weight:700}.selectedCourseType[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:60% 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"deck . freeRace ." "deck edit primary event"}.deck[_ngcontent-%COMP%]{grid-area:deck}.edit[_ngcontent-%COMP%]{grid-area:edit;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.eventButton[_ngcontent-%COMP%], .editButton[_ngcontent-%COMP%]{width:80%}.primary[_ngcontent-%COMP%]{grid-area:primary;text-align:center}.primaryButton[_ngcontent-%COMP%]{width:80%}.autoRunFreeRace[_ngcontent-%COMP%]{grid-area:freeRace;text-align:center}.autoRunFreeRaceButton[_ngcontent-%COMP%]{width:80%;margin-bottom:.5rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.draggable[_ngcontent-%COMP%]{cursor:move;margin:1em}.raceOrder[_ngcontent-%COMP%]{display:inline-block}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{grid-template-columns:50% 1fr 1fr 1fr}}']}),t})();function cj(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=C(2);p(1),Q("",e.selectedItem.numberPurchasing," ")}}function uj(t,i){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=C(2);p(1),Q(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function dj(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=C(2);p(1),Q(" x ",e.buyMultiplierAmount,"")}}function hj(t,i){if(1&t){const e=fe();f(0,"div",3)(1,"span",4),M(2,cj,2,1,"span",5),g(3),h(),M(4,uj,2,1,"em",5),x(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),f(10,"div",7),g(11),h(),x(12,"br"),f(13,"button",8),N("click",function(){return B(e),C().BuyItem()}),g(14,"Buy "),M(15,dj,2,1,"span",5),h()()}if(2&t){const e=C();b("ngbPopover",it(3)),p(1),b("ngClass",e.colorConditional),p(1),b("ngIf",e.displayNumberPurchasing),p(1),Q(" ",e.displayName,""),p(1),b("ngIf",e.selectedItem.totalShopQuantity>1),p(3),b("innerHTML",e.shortDescription,jt),p(4),Q(" ",e.purchaseResourcesRequired," "),p(2),b("disabled",!e.canAffordItem),p(2),b("ngIf",e.buyMultiplierAmount>1)}}function fj(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=C(2);p(1),Q("",e.selectedItem.numberPurchasing," ")}}function pj(t,i){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=C(2);p(1),Q(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function gj(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=C(2);p(1),Q(" x ",e.buyMultiplierAmount,"")}}function mj(t,i){if(1&t){const e=fe();f(0,"div",9)(1,"span",4),M(2,fj,2,1,"span",5),g(3),h(),M(4,pj,2,1,"em",5),x(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),f(10,"div",7),g(11),h(),x(12,"br"),f(13,"button",8),N("click",function(){return B(e),C().BuyItem()}),g(14,"Buy "),M(15,gj,2,1,"span",5),h()()}if(2&t){const e=C();p(1),b("ngClass",e.colorConditional),p(1),b("ngIf",e.displayNumberPurchasing),p(1),Ze(e.displayName),p(1),b("ngIf",e.selectedItem.totalShopQuantity>1),p(3),b("innerHTML",e.shortDescription,jt),p(4),Q(" ",e.purchaseResourcesRequired," "),p(2),b("disabled",!e.canAffordItem),p(2),b("ngIf",e.buyMultiplierAmount>1)}}function vj(t,i){if(1&t&&(f(0,"div",10),x(1,"span",6),h()),2&t){const e=C();p(1),b("innerHTML",e.longDescription,jt)}}let bj=(()=>{class t{constructor(e,n,r){this.globalService=e,this.lookupService=n,this.gameLoopService=r,this.itemPurchased=new nt,this.canAffordItem=!0,this.displayNumberPurchasing=!1,this.displayName="",this.buyMultiplierAmount=1}keyEventDown(e){(this.selectedItem.type===Y.Consumable||this.selectedItem.type===Y.Food||this.selectedItem.type===Y.Equipment||this.selectedItem.type===Y.Resources)&&"Mangoes"!==this.selectedItem.name&&("Shift"===e.key&&(e.preventDefault(),this.shiftPressed||(this.buyMultiplierAmount*=25,this.shiftPressed=!0)),"Control"===e.key&&(e.preventDefault(),this.ctrlPressed||(this.buyMultiplierAmount*=10,this.ctrlPressed=!0)),"Alt"===e.key&&(e.preventDefault(),this.altPressed||(this.buyMultiplierAmount*=100,this.altPressed=!0)))}keyEventUp(e){e.preventDefault(),(this.selectedItem.type===Y.Consumable||this.selectedItem.type===Y.Food||this.selectedItem.type===Y.Equipment||this.selectedItem.type===Y.Resources)&&"Mangoes"!==this.selectedItem.name&&("Shift"===e.key&&this.shiftPressed&&(this.buyMultiplierAmount/=25,this.shiftPressed=!1),"Control"===e.key&&this.ctrlPressed&&(this.buyMultiplierAmount/=10,this.ctrlPressed=!1),"Alt"===e.key&&this.altPressed&&(this.buyMultiplierAmount/=100,this.altPressed=!1))}ngOnInit(){var e=this;if(this.buyMultiplierAmount=1,this.selectedItem.type===Y.Ability?(this.shortDescription=this.lookupService.getAnimalAbilityDescription(!0,this.selectedItem.additionalIdentifier),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedItem.additionalIdentifier)):this.selectedItem.type===Y.Specialty?(this.shortDescription=this.lookupService.getSpecialtyItemDescription(this.selectedItem.name),""===this.shortDescription&&(this.shortDescription=this.selectedItem.shortDescription)):this.selectedItem.type===Y.Animal?this.shortDescription=this.lookupService.getAnimalDescription(this.selectedItem.name):(this.shortDescription=this.selectedItem.shortDescription,this.longDescription=this.selectedItem.longDescription),this.displayName=this.selectedItem.name,this.selectedItem.type===Y.Animal&&void 0!==(n=this.globalService.globalVar.animals.find(a=>a.name===this.selectedItem.name))&&(this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()}),this.selectedItem.type===Y.Ability){var n,r=this.selectedItem.name.split(" ")[0].trim();""!==r&&void 0!==(n=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===r))&&(this.colorConditional={flatlandColor:"Flatland"===n.getRaceCourseType(),mountainColor:"Mountain"===n.getRaceCourseType(),waterColor:"Ocean"===n.getRaceCourseType(),tundraColor:"Tundra"===n.getRaceCourseType(),volcanicColor:"Volcanic"===n.getRaceCourseType()})}this.selectedItem.type===Y.Food&&1===this.selectedItem.numberPurchasing&&("Apples"===this.displayName&&(this.displayName="Apple"),"Oranges"===this.displayName&&(this.displayName="Orange"),"Bananas"===this.displayName&&(this.displayName="Banana"),"Strawberries"===this.displayName&&(this.displayName="Strawberry"),"Carrots"===this.displayName&&(this.displayName="Carrot"),"Turnips"===this.displayName&&(this.displayName="Turnip"),"Mangoes"===this.displayName&&(this.displayName="Mango")),(this.selectedItem.type===Y.Food||this.selectedItem.type===Y.Resources)&&(this.displayNumberPurchasing=!0),this.amountSubscription=this.gameLoopService.gameUpdateEvent.subscribe(vr(function*(){e.selectedItem.purchasePrice.forEach(a=>{var o=a.name;1===a.amount&&("Tokens"===o&&(o="Token"),"Medals"===o&&(o="Medal")),e.purchaseResourcesRequired=a.amount.toLocaleString()+" "+o+", ";var s=e.lookupService.getResourceByName(a.name);e.canAffordItem=!(s<a.amount*e.buyMultiplierAmount)}),e.purchaseResourcesRequired.length>0&&(e.purchaseResourcesRequired=e.purchaseResourcesRequired.substring(0,e.purchaseResourcesRequired.length-2))}))}BuyItem(){this.canBuyItem()&&(this.spendResourcesOnItem(),this.selectedItem.type===Y.Animal&&this.buyAnimal(),this.selectedItem.type===Y.Food?this.buyFood():this.selectedItem.type===Y.Training&&this.buyTraining(),this.selectedItem.type===Y.Specialty?this.buySpecialty():this.selectedItem.type===Y.Ability&&this.buyAbility(),this.selectedItem.type===Y.Equipment&&this.buyEquipment(),this.selectedItem.type===Y.Consumable&&this.buyConsumable(),this.selectedItem.type===Y.Resources&&this.buyResources(),this.itemPurchased.emit(this.selectedItem))}canBuyItem(){var e=!0;return this.selectedItem.purchasePrice.forEach(n=>{this.lookupService.getResourceByName(n.name)<n.amount*this.buyMultiplierAmount&&(e=!1)}),e}spendResourcesOnItem(){this.selectedItem.purchasePrice.forEach(e=>{this.lookupService.spendResourceByName(e.name,e.amount*this.buyMultiplierAmount)})}buyAnimal(){var e=this.globalService.globalVar.animals.find(s=>s.name===this.selectedItem.name);if(null!=e){e.isAvailable=!0,this.selectedItem.amountPurchased=1;var n=this.globalService.globalVar.shop.find(s=>"Abilities"===s.name);if(null!=n){var r=n.itemList.filter(s=>s.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(s=>{s.isAvailable=!0})}var a=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);if(null!=a){var o=!1;a.selectedAnimals.forEach(s=>{s.raceCourseType===(null==e?void 0:e.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(e)}}}buyTraining(){this.selectedItem.amountPurchased=1;var e=this.globalService.globalVar.trainingOptions.find(n=>n.trainingName===this.selectedItem.name);void 0!==e&&(e.isAvailable=!0)}buyFood(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new pe(this.selectedItem.name,e,Y.Food));"Mangoes"===this.selectedItem.name&&this.selectedItem.purchasePrice.forEach(r=>{"Coins"===r.name&&(r.amount+=50),"Tokens"===r.name&&(r.amount+=1)})}buySpecialty(){var e,a;if(this.selectedItem.amountPurchased+=1,"Whistle"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(l=>"Specialty"===l.name))){var n=e.itemList.find(l=>"Golden Whistle"===l.name);null!=n&&(n.isAvailable=!0)}if("National Races"===this.selectedItem.name&&(this.globalService.globalVar.nationalRaceCountdown=0,null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name)))){var r=e.itemList.find(c=>"International Races"===c.name);null!=r&&(r.isAvailable=!0)}if("Incubator Upgrade Lv1"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))&&null!=(a=e.itemList.find(c=>"Incubator Upgrade Lv2"===c.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv2"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))&&null!=(a=e.itemList.find(u=>"Incubator Upgrade Lv3"===u.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv3"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))&&null!=(a=e.itemList.find(u=>"Incubator Upgrade Lv4"===u.name))&&(a.isAvailable=!0),"Team Manager"===this.selectedItem.name&&1===this.selectedItem.amountPurchased){var o=this.globalService.globalVar.animalDecks.find(l=>l.isPrimaryDeck);null!=o&&(o.autoRunFreeRace=!0)}if(null!=this.globalService.globalVar.resources&&(this.globalService.globalVar.resources.some(l=>l.name===this.selectedItem.name)?null!=(s=this.globalService.globalVar.resources.find(l=>l.name===this.selectedItem.name))&&(s.amount+=1):this.globalService.globalVar.resources.push(new pe(this.selectedItem.name,1,Y.Specialty))),"Talent Point Voucher"===this.selectedItem.name)if(this.globalService.globalVar.resources.some(l=>"Talent Points"===l.name)){var s;null!=(s=this.globalService.globalVar.resources.find(c=>"Talent Points"===c.name))&&(s.amount+=1)}else this.globalService.globalVar.resources.push(new pe("Talent Points",1,Y.Resources));null!=this.selectedItem.quantityMultiplier&&this.selectedItem.quantityMultiplier>0&&this.selectedItem.purchasePrice.forEach(l=>{null!=this.selectedItem.quantityAdditive&&this.selectedItem.quantityAdditive>0?l.amount+=this.selectedItem.quantityAdditive:l.amount*=this.selectedItem.quantityMultiplier,"Team Manager"===this.selectedItem.name&&l.amount>5e3&&(l.amount=5e3)})}buyAbility(){var e=this.selectedItem.name.split(" ")[0].trim(),n=this.selectedItem.name.split(":")[1].trim();if(""!==e&&""!==n){var r=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(void 0!==r){var a=r.availableAbilities.find(o=>o.name===n);void 0!==a&&(a.isAbilityPurchased=!0,this.selectedItem.amountPurchased=1)}}}buyEquipment(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new pe(this.selectedItem.name,e,Y.Equipment))}buyConsumable(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new pe(this.selectedItem.name,e,Y.Consumable))}buyResources(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var n=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=n&&(n.amount+=e)}else this.globalService.globalVar.resources.push(new pe(this.selectedItem.name,e,Y.Resources))}ngOnDestroy(){null!=this.amountSubscription&&this.amountSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(hn),P(mi))},t.\u0275cmp=lt({type:t,selectors:[["app-shopping-item"]],hostBindings:function(e,n){1&e&&N("keydown",function(a){return n.keyEventDown(a)},!1,Ya)("keyup",function(a){return n.keyEventUp(a)},!1,Ya)},inputs:{selectedItem:"selectedItem"},outputs:{itemPurchased:"itemPurchased"},decls:4,vars:2,consts:[["class","item","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","item",4,"ngIf"],["longDescriptionContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"item",3,"ngbPopover"],[1,"keyword",3,"ngClass"],[4,"ngIf"],[3,"innerHTML"],[1,"resourceKeyword"],[3,"disabled","click"],[1,"item"],[1,"popoverClass"]],template:function(e,n){1&e&&(M(0,hj,16,9,"div",0),M(1,mj,16,8,"div",1),M(2,vj,2,1,"ng-template",null,2,rt)),2&e&&(b("ngIf",""!==n.longDescription&&null!=n.longDescription),p(1),b("ngIf",""===n.longDescription||null==n.longDescription))},directives:[en,Or,Bn],styles:[".item[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();function _j(t,i){if(1&t){const e=fe();f(0,"td",8)(1,"div")(2,"app-shopping-item",9),N("itemPurchased",function(r){return B(e),C(3).itemPurchased(r)}),h()()()}if(2&t){const e=i.$implicit;p(2),b("selectedItem",e)}}function yj(t,i){if(1&t&&(f(0,"tr"),M(1,_j,3,1,"td",7),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}function Cj(t,i){if(1&t&&(f(0,"table"),M(1,yj,2,1,"tr",6),h()),2&t){const e=C();p(1),b("ngForOf",e.itemsRows)}}function wj(t,i){1&t&&(f(0,"div",10),x(1,"br"),f(2,"span"),g(3,"Fresh out! Check back again in the future to see if more items are added!"),h(),x(4,"br"),h())}const Sj=function(t){return{tokenShopColor:t}};let XR=(()=>{class t{constructor(e){this.globalService=e,this.shopsEnum=La}ngOnInit(){null==this.shopType&&(this.shopType=La.regular),this.setupDisplayItems()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];var e=4;this.screenHeight<=650&&(e=2);var n=[];this.section.itemList.forEach(a=>{a.isAvailable&&(a.canHaveMultiples&&(a.infiniteAmount||a.amountPurchased<a.totalShopQuantity)||0===a.amountPurchased)&&n.push(a)});for(var r=1;r<=n.length;r++)this.itemsCells.push(n[r-1]),r%e==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}itemPurchased(e){this.setupDisplayItems()}}return t.\u0275fac=function(e){return new(e||t)(P(St))},t.\u0275cmp=lt({type:t,selectors:[["app-shopping-list"]],hostBindings:function(e,n){1&e&&N("resize",function(a){return n.onResize(a)},!1,Ya)},inputs:{section:"section",shopType:"shopType"},decls:8,vars:6,consts:[[1,"shoppingListView"],[1,"sectionHeaderBackgroundColor",3,"ngClass"],[1,"s4Heading","keyword","sectionHeaderText"],[1,"items"],[4,"ngIf"],["class","centered","c","",4,"ngIf"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[3,"selectedItem","itemPurchased"],["c","",1,"centered"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"span",2),g(3),h()(),f(4,"div",3),M(5,Cj,2,1,"table",4),M(6,wj,5,0,"div",5),x(7,"br"),h()()),2&e&&(p(1),b("ngClass",Jn(4,Sj,n.shopType===n.shopsEnum.token)),p(2),Ze(n.section.name),p(2),b("ngIf",n.itemsRows.length>0),p(1),b("ngIf",0===n.itemsRows.length))},directives:[Bn,en,jn,bj],styles:[".shoppingListView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.sectionHeaderBackgroundColor[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center}.tokenShopColor[_ngcontent-%COMP%]{background-color:var(--tokenShopColor)!important}.sectionHeaderText[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.centered[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function Tj(t,i){if(1&t&&(f(0,"div",8),x(1,"app-shopping-list",9),h()),2&t){const e=i.$implicit,n=C();p(1),b("section",e)("shopType",n.shopType)}}function Dj(t,i){if(1&t&&(f(0,"div",10),x(1,"hr"),f(2,"em"),g(3),f(4,"span",11),g(5,"Renown"),h()()()),2&t){const e=C();p(3),Q("Next tier unlocked at ",e.lookupService.getRenownRequiredForEventShopTier(e.highestTierUnlocked+1)," ")}}let Rj=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.gameLoopService=r,this.componentCommunicationService=a,this.highestTierUnlocked=0,this.maxTiers=3,this.shopType=La.token,this.currentTokens=0}ngOnInit(){var e=this;this.highestTierUnlocked=this.lookupService.getHighestEventShopTierUnlocked(),this.getShopOptions(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(vr(function*(){e.currentTokens=e.lookupService.getTokens()}))}getShopOptions(){this.sections=[];var e=this.globalService.globalVar.tokenShop.find(a=>"Tier 1"===a.name);void 0!==e&&this.highestTierUnlocked>=1&&this.sections.push(e);var n=this.globalService.globalVar.tokenShop.find(a=>"Tier 2"===a.name);void 0!==n&&this.highestTierUnlocked>=2&&this.sections.push(n);var r=this.globalService.globalVar.tokenShop.find(a=>"Tier 3"===a.name);void 0!==r&&this.highestTierUnlocked>=3&&this.sections.push(r)}returnToEventRaceView(){this.componentCommunicationService.setRaceView(ft.raceselection,Pe.event)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(hn),P(mi),P(qn))},t.\u0275cmp=lt({type:t,selectors:[["app-token-shop-view"]],decls:15,vars:3,consts:[[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"back"],[3,"click"],["class","shopSection",4,"ngFor","ngForOf"],["class","centered",4,"ngIf"],[1,"shopSection"],[3,"section","shopType"],[1,"centered"],[1,"progressionKeyword"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Token Shop"),h(),f(6,"span"),g(7),h()(),f(8,"div",4)(9,"button",5),N("click",function(){return n.returnToEventRaceView()}),g(10,"Back To Event"),h()()()(),x(11,"br"),M(12,Tj,2,2,"div",6),x(13,"br"),M(14,Dj,6,1,"div",7),h()),2&e&&(p(7),Q("Tokens: ",n.currentTokens,""),p(5),b("ngForOf",n.sections),p(2),b("ngIf",n.highestTierUnlocked<n.maxTiers))},directives:[jn,XR,en],styles:['.shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}']}),t})();function xj(t,i){if(1&t&&(f(0,"div",16),x(1,"app-shopping-list",17),h()),2&t){const e=i.$implicit;p(1),b("section",e)}}function Mj(t,i){if(1&t){const e=fe();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2"),g(5,"Shop"),h()()(),f(6,"div",6)(7,"span",7),g(8,"Filters:"),h(),f(9,"button",8),N("click",function(){return B(e),C().toggleShopFilter("Animals")}),g(10,"Animals"),h(),f(11,"button",9),N("click",function(){return B(e),C().toggleShopFilter("Trainings")}),g(12," Trainings"),h(),f(13,"button",10),N("click",function(){return B(e),C().toggleShopFilter("Equipment")}),g(14,"Equipment "),h(),f(15,"button",11),N("click",function(){return B(e),C().toggleShopFilter("Food")}),g(16,"Food"),h(),f(17,"button",12),N("click",function(){return B(e),C().toggleShopFilter("Specialty")}),g(18," Specialty"),h(),f(19,"button",13),N("click",function(){return B(e),C().toggleShopFilter("Abilities")}),g(20," Abilities"),h()(),f(21,"button",14),N("click",function(){return B(e),C().ResetShopFilters()}),g(22," Reset Filters "),h()(),x(23,"br"),M(24,xj,2,1,"div",15),h()}if(2&t){const e=C();p(9),bt("filterActive",e.filterAnimals),p(2),bt("filterActive",e.filterTrainings),p(2),bt("filterActive",e.filterEquipment),p(2),bt("filterActive",e.filterFood),p(2),bt("filterActive",e.filterSpecialty),p(2),bt("filterActive",e.filterAbilities),p(5),b("ngForOf",e.sections)}}function kj(t,i){1&t&&(f(0,"div"),x(1,"app-token-shop-view"),h())}let Aj=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n,this.filterAnimals=!1,this.filterTrainings=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterAbilities=!1,this.ShopsEnum=La}ngOnInit(){this.componentCommunicationService.setNewView(ft.shop),this.getShopOptions(),this.subscription=this.componentCommunicationService.getShopView().subscribe(e=>{this.activeShopView=e})}getShopOptions(){this.sections=[];var e=this.filtersActive(),n=this.globalService.globalVar.shop.find(c=>"Animals"===c.name&&(!e||e&&this.filterAnimals));void 0!==n&&this.sections.push(n);var r=this.globalService.globalVar.shop.find(c=>"Trainings"===c.name&&(!e||e&&this.filterTrainings));void 0!==r&&this.sections.push(r);var a=this.globalService.globalVar.shop.find(c=>"Equipment"===c.name&&(!e||e&&this.filterEquipment));void 0!==a&&this.sections.push(a);var o=this.globalService.globalVar.shop.find(c=>"Food"===c.name&&(!e||e&&this.filterFood));void 0!==o&&this.sections.push(o);var s=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name&&(!e||e&&this.filterSpecialty));void 0!==s&&this.sections.push(s);var l=this.globalService.globalVar.shop.find(c=>"Abilities"===c.name&&(!e||e&&this.filterAbilities));void 0!==l&&this.sections.push(l)}toggleShopFilter(e){"Animals"===e&&(this.filterAnimals=!this.filterAnimals),"Trainings"===e&&(this.filterTrainings=!this.filterTrainings),"Equipment"===e&&(this.filterEquipment=!this.filterEquipment),"Food"===e&&(this.filterFood=!this.filterFood),"Specialty"===e&&(this.filterSpecialty=!this.filterSpecialty),"Abilities"===e&&(this.filterAbilities=!this.filterAbilities),this.getShopOptions()}filtersActive(){return!!(this.filterAnimals||this.filterAbilities||this.filterEquipment||this.filterFood||this.filterSpecialty||this.filterTrainings)}ResetShopFilters(){this.filterAnimals=!1,this.filterAbilities=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterTrainings=!1,this.getShopOptions()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(qn))},t.\u0275cmp=lt({type:t,selectors:[["app-shop-view"]],decls:2,vars:2,consts:[["class","shopView",4,"ngIf"],[4,"ngIf"],[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"filters"],["id","title"],["id","animalsFilter",1,"clickableText","buttonAsText",3,"click"],["id","trainingsFilter",1,"clickableText","buttonAsText",3,"click"],["id","equipmentFilter",1,"clickableText","buttonAsText",3,"click"],["id","foodFilter",1,"clickableText","buttonAsText",3,"click"],["id","specialtyFilter",1,"clickableText","buttonAsText",3,"click"],["id","abilitiesFilter",1,"clickableText","buttonAsText",3,"click"],[1,"centered","clickableText","buttonAsText",3,"click"],["class","shopSection",4,"ngFor","ngForOf"],[1,"shopSection"],[3,"section"]],template:function(e,n){1&e&&(M(0,Mj,25,13,"div",0),M(1,kj,2,0,"div",1)),2&e&&(b("ngIf",n.activeShopView===n.ShopsEnum.regular),p(1),b("ngIf",n.activeShopView===n.ShopsEnum.token))},directives:[en,jn,XR,Rj],styles:[".shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.filters[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4%}#title[_ngcontent-%COMP%]{grid-area:title}#animalsFilter[_ngcontent-%COMP%]{grid-area:animalsFilter}#trainingsFilter[_ngcontent-%COMP%]{grid-area:trainingsFilter}#facilityFilter[_ngcontent-%COMP%]{grid-area:facilityFilter}#foodFilter[_ngcontent-%COMP%]{grid-area:foodFilter}#specialtyFilter[_ngcontent-%COMP%]{grid-area:specialtyFilter}#enhancerFilter[_ngcontent-%COMP%]{grid-area:enhancerFilter}"]}),t})(),Pj=(()=>{class t{constructor(e,n){this.globalService=e,this.lookupService=n}ngOnInit(){this.traitLevel=this.lookupService.getResearchLevel(),this.maxNegativePercent=25;var e=this.globalService.globalVar.modifiers.find(n=>"maximumTraitNegativePercentModifier"===n.text);void 0!==e&&(this.maxNegativePercent=e.value)}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(hn))},t.\u0275cmp=lt({type:t,selectors:[["app-trait-option"]],inputs:{trait:"trait"},decls:5,vars:2,consts:[[1,"trait"],[1,"traitName","keyword"],[1,"traitStats"]],template:function(e,n){1&e&&(f(0,"h6",0)(1,"p",1),g(2),h(),f(3,"p",2),g(4),h()()),2&e&&(p(2),Ze(n.trait.traitName),p(2),Ze(n.trait.getStatGainDescription(n.maxNegativePercent)))},styles:[".trait[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const Ej=function(t){return{activeTrait:t}};function Ij(t,i){if(1&t){const e=fe();f(0,"td",4)(1,"div",5),N("click",function(){const a=B(e).$implicit;return C(2).selectTrait(a)}),x(2,"app-trait-option",6),h()()}if(2&t){const e=i.$implicit;p(1),b("ngClass",Jn(2,Ej,e.isSelected)),p(1),b("trait",e)}}function Oj(t,i){if(1&t&&(f(0,"tr"),M(1,Ij,3,4,"td",3),h()),2&t){const e=i.$implicit;p(1),b("ngForOf",e)}}let Nj=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrait=new nt}ngOnInit(){this.setupDisplayTraits()}setupDisplayTraits(){this.traitsCells=[],this.traitsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var n=1;n<=this.availableTraits.length;n++)this.traitsCells.push(this.availableTraits[n-1]),n%e==0&&(this.traitsRows.push(this.traitsCells),this.traitsCells=[]);0!==this.traitsCells.length&&this.traitsRows.push(this.traitsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrait(e){this.availableTraits.forEach(n=>{n.isSelected=!1}),e.isSelected=!0,this.selectedTrait.emit(e)}ngOnChanges(e){this.availableTraits=e.availableTraits.currentValue,this.setupDisplayTraits()}}return t.\u0275fac=function(e){return new(e||t)(P(St))},t.\u0275cmp=lt({type:t,selectors:[["app-trait-list"]],hostBindings:function(e,n){1&e&&N("resize",function(a){return n.onResize(a)},!1,Ya)},inputs:{availableTraits:"availableTraits"},outputs:{selectedTrait:"selectedTrait"},features:[Pi],decls:4,vars:1,consts:[[1,"traitsView"],[1,"traits"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trait"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),M(3,Oj,2,1,"tr",2),h()()()),2&e&&(p(3),b("ngForOf",n.traitsRows))},directives:[jn,Bn,Pj],styles:[".traitsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function Vj(t,i){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=C(2);p(1),Ze(e.selectedAnimal.name)}}function Fj(t,i){if(1&t){const e=fe();f(0,"div",21),N("click",function(){return B(e),C().goToAnimal()}),M(1,Vj,2,1,"span",7),x(2,"br"),f(3,"span"),g(4),h()()}if(2&t){const e=C();b("ngClass",e.colorConditional),p(1),b("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),Ze(e.selectedAnimal.getAnimalType())}}function Bj(t,i){if(1&t){const e=fe();f(0,"div",21),N("click",function(){return B(e),C().goToAnimal()}),f(1,"span"),g(2),h()()}if(2&t){const e=C();b("ngClass",e.colorConditional),p(2),Ze(e.selectedAnimal.getAnimalType())}}function Lj(t,i){if(1&t&&(f(0,"span",22),g(1,"Current Trait: "),f(2,"span",23),g(3),h()()),2&t){const e=C();Wi("ngbPopover",e.traitStatGainDescription),p(3),Ze(e.selectedAnimal.getTraitName())}}function Uj(t,i){if(1&t&&(f(0,"span",24),g(1),h()),2&t){const e=C();p(1),Q("",e.existingTrait.traitName," ")}}function Hj(t,i){1&t&&(f(0,"span"),g(1,"No Trait Assigned"),h())}function Gj(t,i){if(1&t&&(f(0,"div"),x(1,"br"),f(2,"p",25),x(3,"ngb-progressbar",26),f(4,"span",27),g(5),At(6,"number"),h()(),x(7,"br"),h()),2&t){const e=C();p(3),b("value",e.trainingProgressBarPercent),p(2),Q("",Jt(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}let jj=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.componentCommunicationService=a,this.returnEmitter=new nt,this.traitStatGainDescription="",this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1}ngOnInit(){this.availableTraits=this.GetAvailableTraits();var e=this.globalService.globalVar.incubator;if(null!=e.assignedAnimal&&null!=e.assignedTrait&&(this.existingTrait=e.assignedTrait),null!=this.existingTrait){var n=this.availableTraits.find(r=>{var a;return(null===(a=this.existingTrait)||void 0===a?void 0:a.traitName)===r.traitName});null!=n&&(n.isSelected=!0)}this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.incubator;if(null==a.assignedAnimal||null==a.assignedTrait)return this.existingTrait=null,void this.availableTraits.forEach(o=>{o.isSelected=!1});this.trainingProgressBarPercent=a.timeTrained/a.timeToComplete*100})}selectNewTrait(e){var n=Object.assign({},e),r=this.globalService.globalVar.incubator;r.timeTrained=0,r.assignedAnimal=this.selectedAnimal,r.assignedTrait=n,this.existingTrait=n,this.selectedAnimal.currentTraining=null,this.selectedAnimal.canTrain=!1}GetAvailableTraits(){var e=[],n=this.lookupService.getResearchLevel();return e.push(new an("Alert",1,n,be.focus,be.endurance)),e.push(new an("Sharp",1,n,be.adaptability,be.power)),e.push(new an("Bulky",1,n,be.power,be.topSpeed)),e.push(new an("Curious",3,n,be.acceleration,be.focus)),e.push(new an("Adamant",3,n,be.topSpeed,be.acceleration)),e.push(new an("Stoic",5,n,be.endurance,be.adaptability)),e.push(new an("Smart",5,n,be.focus,be.power)),e.push(new an("Careful",7,n,be.adaptability,be.acceleration)),e.push(new an("Attentive",7,n,be.power,be.endurance)),e.push(new an("Keen",9,n,be.acceleration,be.topSpeed)),e.push(new an("Quick",9,n,be.topSpeed,be.adaptability)),e.push(new an("Tough",11,n,be.endurance,be.focus)),e.push(new an("Solitary",11,n,be.focus,be.acceleration)),e.push(new an("Cautious",13,n,be.adaptability,be.topSpeed)),e.push(new an("Wild",13,n,be.power,be.focus)),e.push(new an("Clumsy",15,n,be.acceleration,be.adaptability)),e.push(new an("Natural",15,n,be.topSpeed,be.endurance)),e.push(new an("Resilient",17,n,be.endurance,be.power)),e.push(new an("Anxious",17,n,be.focus,be.topSpeed)),e.push(new an("Lucky",19,n,be.adaptability,be.focus)),e.push(new an("Rugged",19,n,be.power,be.adaptability)),e.push(new an("Naive",21,n,be.acceleration,be.endurance)),e.push(new an("Sprightly",21,n,be.topSpeed,be.power)),e.push(new an("Stout",23,n,be.endurance,be.acceleration)),e.push(new an("Pensive",23,n,be.focus,be.adaptability)),e.push(new an("Languid",25,n,be.adaptability,be.endurance)),e.push(new an("Mighty",25,n,be.power,be.acceleration)),e.push(new an("Nimble",27,n,be.acceleration,be.power)),e.push(new an("Small",27,n,be.topSpeed,be.focus)),e.push(new an("Resolute",29,n,be.endurance,be.topSpeed)),(e=e.filter(r=>n>=r.requiredLevel)).filter(r=>!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterSpeed&&r.positiveStatGain===be.topSpeed||this.filterAcceleration&&r.positiveStatGain===be.acceleration||this.filterEndurance&&r.positiveStatGain===be.endurance||this.filterPower&&r.positiveStatGain===be.power||this.filterFocus&&r.positiveStatGain===be.focus||this.filterAdaptability&&r.positiveStatGain===be.adaptability)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.availableTraits=this.GetAvailableTraits()}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTraits=this.GetAvailableTraits()}returnToAnimalView(){this.returnEmitter.emit(!1)}goToAnimal(){this.componentCommunicationService.setAnimalView(ft.animals,this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(mi),P(hn),P(qn))},t.\u0275cmp=lt({type:t,selectors:[["app-incubator-traits"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:39,vars:19,consts:[[1,"incubatorTraitsModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],["class","clickableText keyword",3,"ngClass","click",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","activeTrait",4,"ngIf"],[4,"ngIf"],[1,"back"],[3,"click"],[1,"filterGridContainer"],[1,"resetFiltersHeader","clickableText"],[1,"changeTrainingHeader"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTraits","selectedTrait"],[1,"clickableText","keyword",3,"ngClass","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],[1,"keyword"],[1,"activeTrait"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),M(4,Fj,5,3,"div",4),M(5,Bj,3,2,"div",4),M(6,Lj,4,2,"span",5),x(7,"hr"),M(8,Uj,2,1,"span",6),M(9,Hj,2,0,"span",7),h(),f(10,"div",8)(11,"button",9),N("click",function(){return n.returnToAnimalView()}),g(12,"Back"),h()()(),x(13,"hr"),M(14,Gj,8,5,"div",7),x(15,"br")(16,"br"),f(17,"div",10)(18,"div",11)(19,"span",9),N("click",function(){return n.resetFilters()}),g(20,"Reset Filters"),h()(),f(21,"div",12)(22,"span"),g(23,"Choose New Trait"),h()(),f(24,"div",13)(25,"button",14),N("click",function(){return n.toggleStatFilter("Speed")}),g(26,"SPD "),h(),f(27,"button",15),N("click",function(){return n.toggleStatFilter("Acceleration")}),g(28,"ACC "),h(),f(29,"button",16),N("click",function(){return n.toggleStatFilter("Endurance")}),g(30,"END "),h(),f(31,"button",17),N("click",function(){return n.toggleStatFilter("Power")}),g(32,"PWR "),h(),f(33,"button",18),N("click",function(){return n.toggleStatFilter("Focus")}),g(34,"FCS "),h(),f(35,"button",19),N("click",function(){return n.toggleStatFilter("Adaptability")}),g(36,"ADP"),h()()(),x(37,"br"),f(38,"app-trait-list",20),N("selectedTrait",function(a){return n.selectNewTrait(a)}),h()()()),2&e&&(p(4),b("ngIf",n.selectedAnimal.name!==n.selectedAnimal.getAnimalType()),p(1),b("ngIf",n.selectedAnimal.name===n.selectedAnimal.getAnimalType()),p(1),b("ngIf",null!=n.selectedAnimal.trait),p(2),b("ngIf",null!=n.existingTrait),p(1),b("ngIf",null==n.existingTrait),p(5),b("ngIf",null!=n.existingTrait),p(11),bt("filterActive",n.filterSpeed),p(2),bt("filterActive",n.filterAcceleration),p(2),bt("filterActive",n.filterEndurance),p(2),bt("filterActive",n.filterPower),p(2),bt("filterActive",n.filterFocus),p(2),bt("filterActive",n.filterAdaptability),p(3),b("availableTraits",n.availableTraits))},directives:[en,Bn,Or,S0,Nj],pipes:[no],styles:['.incubatorTraitsModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"ResetFiler changeTraitHeader statFilter"}.changeTraitHeader[_ngcontent-%COMP%]{grid-area:changeTraitHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.resetFilter[_ngcontent-%COMP%]{grid-area:resetFilter}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}']}),t})();function zj(t,i){1&t&&(f(0,"div",3)(1,"h2"),g(2,"Incubator"),h(),f(3,"div",4),g(4," Select an animal and the desired trait to begin the incubation process. While incubating, you will not be able to train the selected animal. The chosen trait will remain on the animal until a new trait is selected or the trait is removed. "),h(),x(5,"hr"),h())}function $j(t,i){if(1&t){const e=fe();f(0,"div",7)(1,"div")(2,"app-animal-list",8),N("selectedAnimal",function(r){return B(e),C(2).selectedAnimal(r)}),h()()()}if(2&t){const e=C(2);p(2),b("availableAnimals",e.availableAnimals)}}function qj(t,i){if(1&t){const e=fe();f(0,"div",9)(1,"app-incubator-traits",10),N("returnEmitter",function(r){return B(e),C(2).returnToAnimalView(r)}),h()()}if(2&t){const e=C(2);p(1),b("selectedAnimal",e.animal)}}function Wj(t,i){if(1&t&&(f(0,"div"),M(1,$j,3,1,"div",5),M(2,qj,2,1,"div",6),h()),2&t){const e=C();p(1),b("ngIf",!e.animalSelected),p(1),b("ngIf",e.animalSelected)}}function Xj(t,i){1&t&&(f(0,"div"),g(1," To access the incubator, you need to improve your research level. Try participating in Duo Races. "),h())}let Yj=(()=>{class t{constructor(e,n,r){this.globalService=e,this.lookupService=n,this.componentCommunicationService=r,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(ft.incubator),this.availableAnimals=this.globalService.globalVar.animals.filter(n=>n.isAvailable),this.researchLevel=this.lookupService.getResearchLevel();var e=this.globalService.globalVar.incubator;null!=e.assignedAnimal&&(this.animalSelected=!0,this.animal=e.assignedAnimal)}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(hn),P(qn))},t.\u0275cmp=lt({type:t,selectors:[["app-incubator-view"]],decls:4,vars:3,consts:[[1,"incubatorView"],["class","info",4,"ngIf"],[4,"ngIf"],[1,"info"],[1,"description"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"selectAnimalView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,n){1&e&&(f(0,"div",0),M(1,zj,6,0,"div",1),M(2,Wj,3,2,"div",2),M(3,Xj,2,0,"div",2),h()),2&e&&(p(1),b("ngIf",!n.animalSelected),p(1),b("ngIf",n.researchLevel>0),p(1),b("ngIf",0===n.researchLevel))},directives:[en,Cf,jj],styles:[".incubatorView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:1rem}"]}),t})();var xu=(()=>{return(t=xu||(xu={}))[t.basics=0]="basics",t[t.progression=1]="progression",t[t.calculators=2]="calculators",xu;var t})();function Qj(t,i){if(1&t){const e=fe();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswerBreedGuide")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"What does Breeding do? How do I gain Breed XP?"),h()()(),f(9,"div",10),x(10,"div",7),f(11,"p"),g(12," Breeding is one of the best way to increase your animals' racing capabilities. It is a reset mechanic, meaning all of the base stats your animal has gained will be reset back to their default levels, and in return gain a permanent multiplier to your racing stats. Note that the stats your animal has prior to breeding have no impact on Breeding. "),x(13,"br")(14,"br"),g(15," Every time you Breed, you gain a 5% increase to the amount your base stats contribute to your racing stats. If you hover over your base stats (or tap if you are on mobile) when selecting an animal on the Animal page, you will see a breakdown of all multipliers you have obtained. Increasing your Breed level is the first step in reaching new heights in Cultura. "),x(16,"br")(17,"br"),g(18," There are a few ways to increase Breed XP: "),x(19,"br"),f(20,"em"),g(21,"Completing any training:"),h(),g(22),x(23,"br"),f(24,"em"),g(25,"Successfully completing a free race:"),h(),g(26),x(27,"br"),f(28,"em"),g(29,"Successfully completeing a circuit race:"),h(),g(30),x(31,"br")(32,"br"),g(33," As you progress, you'll find ways to increase the amount of XP gained. "),h()()(),x(34,"hr"),f(35,"div")(36,"div")(37,"div",7)(38,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswerBreedBarnRows")}),g(39,"+"),h()(),f(40,"div",9)(41,"p"),g(42,"I've got too many animals -- how do I unlock more barns?"),h()()(),f(43,"div",11),x(44,"div",7),f(45,"p"),g(46," Raise your circuit rank! As you progress, you'll unlock more rows of 3 barns. "),h()()(),x(47,"hr"),f(48,"div")(49,"div")(50,"div",7)(51,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswerAllAnimals")}),g(52,"+"),h()(),f(53,"div",9)(54,"p"),g(55,"What are all of the animals and course types?"),h()()(),f(56,"div",12),x(57,"div",7),f(58,"div")(59,"span",13),g(60,"Flatland"),h(),x(61,"br"),f(62,"span",14),g(63,"Horse"),h(),g(64),x(65,"br"),f(66,"span",14),g(67,"Cheetah"),h(),g(68),x(69,"br"),f(70,"span",14),g(71,"Hare"),h(),g(72),x(73,"br")(74,"br"),f(75,"span",15),g(76,"Mountain"),h(),x(77,"br"),f(78,"span",14),g(79,"Monkey"),h(),g(80),x(81,"br"),f(82,"span",14),g(83,"Goat"),h(),g(84),x(85,"br"),f(86,"span",14),g(87,"Gecko"),h(),g(88),x(89,"br")(90,"br"),f(91,"div")(92,"span",16),N("click",function(){return B(e),C().viewSpoiler("Ocean Course Type")}),f(93,"span",17),g(94,"View Spoiler"),h(),f(95,"span",18),g(96,"Ocean"),h()(),x(97,"br"),f(98,"span",16),N("click",function(){return B(e),C().viewSpoiler("Ocean Course Type")}),f(99,"span",17),g(100,"View Spoiler"),h(),f(101,"span",14),g(102,"Dolphin"),h(),g(103),h(),x(104,"br"),f(105,"span",16),N("click",function(){return B(e),C().viewSpoiler("Ocean Course Type")}),f(106,"span",17),g(107,"View Spoiler"),h(),f(108,"span",14),g(109,"Shark"),h(),g(110),h(),x(111,"br"),f(112,"span",16),N("click",function(){return B(e),C().viewSpoiler("Ocean Course Type")}),f(113,"span",17),g(114,"View Spoiler"),h(),f(115,"span",14),g(116,"Octopus"),h(),g(117),h(),x(118,"br")(119,"br"),h(),f(120,"div")(121,"span",16),N("click",function(){return B(e),C().viewSpoiler("Tundra Course Type")}),f(122,"span",17),g(123,"View Spoiler"),h(),f(124,"span",18),g(125,"Tundra"),h()(),x(126,"br"),f(127,"span",16),N("click",function(){return B(e),C().viewSpoiler("Tundra Course Type")}),f(128,"span",17),g(129,"View Spoiler"),h(),f(130,"span",14),g(131,"Penguin"),h(),g(132),h(),x(133,"br"),f(134,"span",16),N("click",function(){return B(e),C().viewSpoiler("Tundra Course Type")}),f(135,"span",17),g(136,"View Spoiler"),h(),f(137,"span",14),g(138,"Caribou"),h(),g(139),h(),x(140,"br")(141,"br"),h(),f(142,"div")(143,"span",16),N("click",function(){return B(e),C().viewSpoiler("Volcanic Course Type")}),f(144,"span",17),g(145,"View Spoiler"),h(),f(146,"span",18),g(147,"Volcanic"),h()(),x(148,"br"),f(149,"span",16),N("click",function(){return B(e),C().viewSpoiler("Volcanic Course Type")}),f(150,"span",17),g(151,"View Spoiler"),h(),f(152,"span",14),g(153,"Salamander"),h(),g(154),h(),x(155,"br"),f(156,"span",16),N("click",function(){return B(e),C().viewSpoiler("Volcanic Course Type")}),f(157,"span",17),g(158,"View Spoiler"),h(),f(159,"span",14),g(160,"Fox"),h(),g(161),h()()()()(),x(162,"hr"),f(163,"div")(164,"div")(165,"div",7)(166,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswerTerrain")}),g(167,"+"),h()(),f(168,"div",9)(169,"p"),g(170,"What are the different terrain options when racing?"),h()()(),f(171,"div",19),x(172,"div",7),f(173,"p"),g(174," Every race leg will have a random terrain. Each terrain may have a positive or negative effect for your racer and should be considered when thinking about which animal is going to race a particular leg. The terrain options are below: "),x(175,"br")(176,"br"),f(177,"em"),g(178,"Sunny"),h(),x(179,"br")(180,"span",20)(181,"br"),f(182,"em"),g(183,"Rainy"),h(),x(184,"br")(185,"span",20)(186,"br"),f(187,"em"),g(188,"Stormy"),h(),x(189,"br")(190,"span",20)(191,"br"),f(192,"em"),g(193,"Torrid"),h(),x(194,"br")(195,"span",20)(196,"br"),f(197,"em"),g(198,"Maelstrom"),h(),x(199,"br")(200,"span",20)(201,"br"),f(202,"em"),g(203,"Snowfall"),h(),x(204,"br")(205,"span",20)(206,"br"),f(207,"em"),g(208,"Hailstorm"),h(),x(209,"br")(210,"span",20)(211,"br"),f(212,"em"),g(213,"Ashfall"),h(),x(214,"br")(215,"span",20),h()()(),x(216,"hr"),f(217,"div")(218,"div")(219,"div",7)(220,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswerSettings")}),g(221,"+"),h()(),f(222,"div",9)(223,"p"),g(224,"What does each setting do?"),h()()(),f(225,"div",21),x(226,"div",7),f(227,"p")(228,"strong"),g(229,"Auto Skip Race Info"),h(),g(230),x(231,"br")(232,"br"),f(233,"strong"),g(234,"Finish Training Before Switching"),h(),g(235),x(236,"br")(237,"br"),f(238,"strong"),g(239,"Hide Tips"),h(),g(240),x(241,"br")(242,"br"),f(243,"strong"),g(244,"Use Numbers For Circuit Rank"),h(),g(245),x(246,"br")(247,"br"),f(248,"strong"),g(249,"Auto Start Event Race"),h(),g(250),x(251,"br")(252,"br"),f(253,"strong"),g(254,"Race Display Info"),h(),g(255),h()()(),x(256,"hr"),f(257,"div")(258,"div")(259,"div",7)(260,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswerFeedback")}),g(261,"+"),h()(),f(262,"div",9)(263,"p"),g(264,"I'm having an issue with my game or have some feedback, how can I contact you?"),h()()(),f(265,"div",22),x(266,"div",7),f(267,"p"),g(268,"Feel free to use the links at the bottom right or email me at CulturaIdle@gmail.com to get in touch. "),h()()(),x(269,"hr"),h()}if(2&t){const e=C();p(22),Q(" ",e.lookupService.getTrainingBreedGaugeIncrease(0)," XP"),p(4),Q(" ",e.lookupService.getLocalBreedGaugeIncrease()," XP"),p(4),Q(" ",e.lookupService.getCircuitBreedGaugeIncrease()," XP"),p(34),Q(" - ",e.lookupService.getAnimalDescription("Horse")," "),p(4),Q(" - ",e.lookupService.getAnimalDescription("Cheetah")," "),p(4),Q(" - ",e.lookupService.getAnimalDescription("Hare")," "),p(8),Q(" - ",e.lookupService.getAnimalDescription("Monkey")," "),p(4),Q(" - ",e.lookupService.getAnimalDescription("Goat")," "),p(4),Q(" - ",e.lookupService.getAnimalDescription("Gecko")," "),p(4),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("ngClass",e.seeOceanCourseTypeSpoiler?"waterColor":""),p(3),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Dolphin"),""),p(2),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Shark"),""),p(2),b("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Octopus"),""),p(4),b("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("ngClass",e.seeTundraCourseTypeSpoiler?"tundraColor":""),p(3),b("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Penguin"),""),p(2),b("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Caribou"),""),p(4),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"volcanicColor":""),p(3),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Salamander"),""),p(2),b("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Q(" - ",e.lookupService.getAnimalDescription("Fox"),""),p(19),b("innerHTML",e.sunnyTerrainInfo,jt),p(5),b("innerHTML",e.rainyTerrainInfo,jt),p(5),b("innerHTML",e.stormyTerrainInfo,jt),p(5),b("innerHTML",e.torridTerrainInfo,jt),p(5),b("innerHTML",e.maelstromTerrainInfo,jt),p(5),b("innerHTML",e.snowfallTerrainInfo,jt),p(5),b("innerHTML",e.hailstormTerrainInfo,jt),p(5),b("innerHTML",e.ashfallTerrainInfo,jt),p(15),Q(" - ",e.lookupService.getSettingDescriptions("Auto Skip Race Info")," "),p(5),Q(" - ",e.lookupService.getSettingDescriptions("Finish Training Before Switching")," "),p(5),Q(" - ",e.lookupService.getSettingDescriptions("Hide Tips")," "),p(5),Q(" - ",e.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank")," "),p(5),Q(" - ",e.lookupService.getSettingDescriptions("Auto Start Event Race")," "),p(5),Q(" - ",e.lookupService.getSettingDescriptions("Race Display Info")," ")}}function Kj(t,i){if(1&t){const e=fe();f(0,"div")(1,"div")(2,"div",7)(3,"button",8),N("click",function(){return B(e),C(2).expandAnswer("faqAnswer4")}),g(4,"+"),h()(),f(5,"div",9)(6,"p"),g(7,"What is the Incubator? How does the Incubator Upgrade item work?"),h()()(),f(8,"div",26),x(9,"div",7),f(10,"p"),g(11,"Once you've successfully completed a Duo Race, you will have access to the Incubator. The Incubator lets you select a trait for an individual animal that lets your customize your stats further. A trait increases one stat and decreases another. As you increase your Research Level by completing Duo Races, you will unlock new traits and increase the amount the traits increase/decrease your stats. Note that traits will only decrease the chosen stat by a maximum of 25%. "),x(12,"br")(13,"br"),g(14," The Incubator Upgrade item gives you even further control over how you build your animals and allows newer animals to quickly catch up to ones of higher breed level. After purchasing this item, every time you breed you will gain a permanent increase to the stat your trait currently is providing you. The increase amount depends on your current Research Level. For example: "),x(15,"br")(16,"br"),g(17," If you have a Research Level of 15 and apply the "),f(18,"span",14),g(19,"Alert"),h(),g(20," trait to your Horse, it will gain 15% "),f(21,"span",14),g(22,"Focus"),h(),g(23," and lose 15% "),f(24,"span",14),g(25,"Endurance"),h(),g(26," through the trait itself. "),x(27,"br"),f(28,"em"),g(29,"If you have Incubator Upgrade Level 1:"),h(),g(30," each time you Breed your Horse, it will gain an additional modifier of .01 to its "),f(31,"span",14),g(32,"Focus"),h(),g(33," stat. 10% of the positive trait value of 15% would come out to .015. Incubator Upgrade Level 1 only allows for the first 10% of your trait value to contribute to the modifier, so you would gain .01. "),x(34,"br"),f(35,"em"),g(36,"If you have Incubator Upgrade Level 2:"),h(),g(37," each time you Breed your Horse, it will gain an additional modifier of .015 to its "),f(38,"span",14),g(39,"Focus"),h(),g(40," stat. 10% of the positive trait value of 15% would come to .015. Incubator Upgrade Level 2 allows for the first 25% of your trait value to contribute to the modifier. Because your trait value is only 15%, it will contribute in its entirety. "),h()(),x(41,"hr"),h()}}function Zj(t,i){if(1&t){const e=fe();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswer1")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"I'm stuck early on, how should I progress?"),h()()(),f(9,"div",23),x(10,"div",7),f(11,"p"),g(12,"In the early game, your biggest obstacles will be coins and breed level. Using the Stockbreeder to Auto Breed your animals can give them a big boost in stats. "),x(13,"br")(14,"br"),g(15," If you are having a hard time collecting coins, look into buying Team Managers from the Shop and upgrading your barns to Attractions to build passive income. "),h()()(),x(16,"hr"),f(17,"div")(18,"div")(19,"div",7)(20,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswer2")}),g(21,"+"),h()(),f(22,"div",9)(23,"p"),g(24,"What do team managers do and how do I set auto race?"),h()()(),f(25,"div",24),x(26,"div",7),f(27,"p"),g(28,'After buying a Team Manager from the shop, you\'ll have the ability to set a deck as your "Auto Run Free Race" deck. Once selected, this deck will immediately run free races as soon as the time period resets creating a steady stream of income (assuming you win, of course!). '),x(29,"br")(30,"br"),g(31,' To set a deck as your "Auto Run Free Race" deck, select \'Decks\' on the right and then select the button that says "Auto Run Free Race" by the deck you want to select. Note that this option will not be available until you buy a Team Manager. '),h()()(),x(32,"hr"),f(33,"div")(34,"div")(35,"div",7)(36,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswer3")}),g(37,"+"),h()(),f(38,"div",9)(39,"p"),g(40,"What does upgrading a barn do and how do I specialize my barn?"),h()()(),f(41,"div",25),x(42,"div",7),f(43,"p"),g(44,"After reaching a certain circuit rank, you will gain the ability to upgrade your barns. Every level you upgrade, you gain a multiplier for a particular stat when training. Hovering over your barn level when selecting a barn will show you your current multipliers. Increasing your barn level can be a great way to get you back in the race after breeding. "),x(45,"br")(46,"br"),g(47," At barn level 10, you will instead have the option to specialize. Subsequently, every 10 levels will improve your specialization instead of giving a stat multiplier. The current specialization options are below."),x(48,"br")(49,"br"),f(50,"strong"),g(51),h(),x(52,"br"),f(53,"strong"),g(54),h(),x(55,"br"),f(56,"strong",16),N("click",function(){return B(e),C().viewSpoiler("Attraction Specialization")}),f(57,"span",17),g(58,"View Spoiler"),h(),g(59),h(),x(60,"br"),f(61,"strong",16),N("click",function(){return B(e),C().viewSpoiler("Research Center Specialization")}),f(62,"span",17),g(63,"View Spoiler"),h(),g(64),h()()()(),x(65,"hr"),M(66,Kj,42,0,"div",6),h()}if(2&t){const e=C();p(51),Q("Training Facility - ",e.lookupService.getInDepthSpecializationDescription("Training Facility"),""),p(3),Q("Breeding Grounds - ",e.lookupService.getInDepthSpecializationDescription("Breeding Grounds"),""),p(2),b("ngClass",e.seeAttractionSpoiler?"viewSpoiler":"spoilerText"),p(3),Q(" Attraction - ",e.lookupService.getInDepthSpecializationDescription("Attraction"),""),p(2),b("ngClass",e.seeResearchCenterSpoiler?"viewSpoiler":"spoilerText"),p(3),Q("Research Center - ",e.lookupService.getInDepthSpecializationDescription("Research Center"),""),p(2),b("ngIf",e.lookupService.isItemUnlocked("duoRace"))}}function Jj(t,i){if(1&t&&(f(0,"span",14),g(1),h()),2&t){const e=C(2);p(1),Q("",e.renownCoinGain,"% Additional Coins")}}function ez(t,i){if(1&t&&(f(0,"span",14),g(1),h()),2&t){const e=C(2);p(1),Q("",e.renownCoinGain.toFixed(2),"% Additional Coins")}}function tz(t,i){if(1&t){const e=fe();f(0,"div")(1,"div")(2,"div",7)(3,"button",8),N("click",function(){return B(e),C(2).expandAnswer("faqAnswerIncubatorGrowthCalculator")}),g(4,"+"),h()(),f(5,"div",9)(6,"p"),g(7,"Modifier gain from Incubator Upgrade"),h()()(),f(8,"div",56),x(9,"div",7),f(10,"div",46)(11,"div")(12,"em"),g(13,"Enter a Facility Level and an Incubator Upgrade Level between 1 and 4 to see what the modifier would be on the stat corresponding to the positive trait. This pulls from your current resources by default."),h()(),x(14,"br")(15,"br"),f(16,"div",28)(17,"div",47)(18,"label",57),g(19,"Incubator Upgrade Level:"),h(),f(20,"input",58),N("ngModelChange",function(r){return B(e),C(2).incubatorUpgradeLevel=r}),h(),x(21,"br"),f(22,"label",59),g(23,"Facility Level:"),h(),f(24,"input",60),N("ngModelChange",function(r){return B(e),C(2).facilityLevel=r}),h()(),f(25,"div",32)(26,"span"),g(27,"Result:"),h(),f(28,"em")(29,"span",34),g(30),h(),g(31," * .001 with Incubator Upgrade Level "),f(32,"span",61),g(33),h()(),g(34," = "),f(35,"span",14),g(36),h()()()()(),x(37,"hr"),h()}if(2&t){const e=C(2);p(20),b("ngModel",e.incubatorUpgradeLevel),p(4),b("ngModel",e.facilityLevel),p(6),Ze(e.facilityLevel),p(3),Ze(e.incubatorUpgradeLevel),p(3),Q("*",e.incubatorModifierAmount," to Positive Trait Stat per Breed Level")}}function nz(t,i){if(1&t&&(f(0,"option",50),g(1),h()),2&t){const e=i.$implicit;b("value",e.type),p(1),Q(" ",e.name,"")}}function iz(t,i){1&t&&(f(0,"option",50),g(1,"Attraction"),h()),2&t&&b("value",3)}function rz(t,i){1&t&&(f(0,"option",50),g(1,"Research Center"),h()),2&t&&b("value",4)}const YR=function(t){return{inactiveCalculation:t}};function az(t,i){if(1&t){const e=fe();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswerRenownCalculator")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"Coin gain from Renown"),h()()(),f(9,"div",27),x(10,"div",7),f(11,"div")(12,"em"),g(13,"Enter a Renown amount to see what the modifier would be on Coins won from races."),h()(),x(14,"br")(15,"br"),f(16,"div",28)(17,"div",29)(18,"label",30),g(19,"Renown:"),h(),f(20,"input",31),N("ngModelChange",function(r){return B(e),C().coinGainRenownAmount=r}),h()(),f(21,"div",32)(22,"span"),g(23,"Result:"),h(),f(24,"div",33)(25,"em"),g(26,"If Renown <= 50: "),f(27,"span",34),g(28),h()(),g(29," = "),M(30,Jj,2,1,"span",35),h(),x(31,"br"),f(32,"div",33)(33,"em"),g(34,"If Renown > 50: 500 * log(.0035 * - ("),f(35,"span",34),g(36),h(),g(37," - 50) + 1) + 50 "),h(),g(38," = "),M(39,ez,2,1,"span",35),h()()()()(),x(40,"hr"),M(41,tz,38,5,"div",6),f(42,"div")(43,"div")(44,"div",7)(45,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswerTrainingBreedXpCalculator")}),g(46,"+"),h()(),f(47,"div",9)(48,"p"),g(49,"Breed XP gain from Training"),h()()(),f(50,"div",36),x(51,"div",7),f(52,"div")(53,"em"),g(54,"Select an animal or enter your own values to see how much Breed XP you would gain from completing a single training. Selecting an animal pulls from their current bonuses."),h()(),x(55,"br")(56,"br"),f(57,"div",28)(58,"div",29)(59,"div",37)(60,"label",38),g(61,"Animal:"),h(),f(62,"select",39),N("ngModelChange",function(r){return B(e),C().selectedAnimalType=r})("change",function(){return B(e),C().newAnimalSelected()}),M(63,nz,2,2,"option",40),h()(),f(64,"em"),g(65,"or"),h(),f(66,"div")(67,"label",41),g(68,"Bonus Training Breed XP:"),h(),f(69,"input",42),N("change",function(){return B(e),C().animalNotSelected()})("ngModelChange",function(r){return B(e),C().bonusBreedXp=r}),h(),x(70,"br"),f(71,"label",43),g(72,"Breeding Grounds Specialization Level:"),h(),f(73,"input",44),N("ngModelChange",function(r){return B(e),C().breedingGroundsSpecializationLevel=r}),h()()(),f(74,"div",32)(75,"span"),g(76,"Result:"),h(),x(77,"br"),f(78,"em"),g(79,"(5 + "),f(80,"span",14),g(81),h(),g(82,") * (1 + "),f(83,"span",14),g(84),h(),g(85," * .1) "),h(),g(86," = "),f(87,"span",14),g(88),h()()()()(),x(89,"hr"),f(90,"div")(91,"div")(92,"div",7)(93,"button",8),N("click",function(){return B(e),C().expandAnswer("faqAnswerBarnSpecializationGainCalculator")}),g(94,"+"),h()(),f(95,"div",9)(96,"p"),g(97,"Barn Specialization Calculator"),h()()(),f(98,"div",45),x(99,"div",7),f(100,"div",46)(101,"div")(102,"em"),g(103,"Select a Specialization Type and enter the Barn Upgrade Level or Specialization Level to see what impact that specialization would have. Specialization Level corresponds Barn Upgrade Level * 10 because your specialization improves every 10 barn upgrade levels."),h()(),x(104,"br")(105,"br"),f(106,"div",28)(107,"div",47)(108,"label",48),g(109,"Specialization:"),h(),f(110,"select",49),N("ngModelChange",function(r){return B(e),C().selectedSpecialization=r}),f(111,"option",50),g(112,"Breeding Grounds"),h(),f(113,"option",50),g(114,"Training Facility"),h(),M(115,iz,2,1,"option",51),M(116,rz,2,1,"option",51),h(),x(117,"br")(118,"br"),f(119,"div")(120,"label",52),g(121,"Barn Upgrade Level:"),h(),f(122,"input",53),N("change",function(){return B(e),C().changeBarnUpgradeLevel()})("ngModelChange",function(r){return B(e),C().barnUpgradeLevel=r}),h(),x(123,"br"),f(124,"em"),g(125,"or"),h(),x(126,"br"),f(127,"label",54),g(128,"Barn Specialization Level:"),h(),f(129,"input",55),N("change",function(){return B(e),C().changeBarnSpecializationLevel()})("ngModelChange",function(r){return B(e),C().barnSpecializationLevel=r}),h()()(),f(130,"div",32)(131,"span"),g(132,"Result:"),h(),x(133,"br")(134,"span",20),h()()()()(),x(135,"hr"),h()}if(2&t){const e=C();p(20),b("ngModel",e.coinGainRenownAmount),p(4),b("ngClass",Jn(23,YR,e.coinGainRenownAmount>50)),p(4),Ze(e.coinGainRenownAmount),p(2),b("ngIf",e.coinGainRenownAmount<=50),p(2),b("ngClass",Jn(25,YR,e.coinGainRenownAmount<=50)),p(4),Ze(e.coinGainRenownAmount),p(3),b("ngIf",e.coinGainRenownAmount>50),p(2),b("ngIf",e.lookupService.isItemUnlocked("duoRace")),p(21),b("ngModel",e.selectedAnimalType),p(1),b("ngForOf",e.availableAnimals),p(6),b("ngModel",e.bonusBreedXp),p(4),b("ngModel",e.breedingGroundsSpecializationLevel),p(8),Ze(e.bonusBreedXp),p(3),Ze(e.breedingGroundsSpecializationLevel),p(4),Q("",e.trainingBreedXpGain," XP gained after completing any Training"),p(22),b("ngModel",e.selectedSpecialization),p(1),b("value",1),p(2),b("value",2),p(2),b("ngIf",e.seeAttractionSpoiler),p(1),b("ngIf",e.seeResearchCenterSpoiler),p(6),b("ngModel",e.barnUpgradeLevel),p(7),b("ngModel",e.barnSpecializationLevel),p(5),b("innerHTML",e.barnSpecializationLevelAmount,jt)}}let oz=(()=>{class t{constructor(e,n,r,a,o){this.componentCommunicationService=e,this.lookupService=n,this.gameLoopService=r,this.globalService=a,this.specializationService=o,this.seeAttractionSpoiler=!1,this.seeResearchCenterSpoiler=!1,this.seeOceanCourseTypeSpoiler=!1,this.seeTundraCourseTypeSpoiler=!1,this.seeVolcanicCourseTypeSpoiler=!1,this.currentSection=xu.basics,this.faqSectionsEnum=xu,this.sunnyTerrainInfo="",this.stormyTerrainInfo="",this.rainyTerrainInfo="",this.snowfallTerrainInfo="",this.ashfallTerrainInfo="",this.maelstromTerrainInfo="",this.hailstormTerrainInfo="",this.torridTerrainInfo="",this.coinGainRenownAmount=0,this.facilityLevel=0,this.incubatorUpgradeLevel=0,this.selectedAnimalType=0,this.animalSelected=!0,this.availableAnimals=[],this.bonusBreedXp=0,this.breedingGroundsSpecializationLevel=0,this.selectedSpecialization=1,this.barnUpgradeLevel=0,this.barnSpecializationLevel=0,this.renownCoinGain=0,this.incubatorModifierAmount=0,this.trainingBreedXpGain=0,this.barnSpecializationLevelAmount=""}ngOnInit(){var n,r,a,e=this;this.componentCommunicationService.setNewView(ft.faqs),this.lookupService.isItemUnlocked("attractionSpecialization")&&(this.seeAttractionSpoiler=!0),this.lookupService.isItemUnlocked("researchCenterSpecialization")&&(this.seeResearchCenterSpoiler=!0),(null===(n=this.globalService.globalVar.animals.find(u=>u.type===X.Dolphin))||void 0===n?void 0:n.isAvailable)&&(this.seeOceanCourseTypeSpoiler=!0),(null===(r=this.globalService.globalVar.animals.find(u=>u.type===X.Penguin))||void 0===r?void 0:r.isAvailable)&&(this.seeTundraCourseTypeSpoiler=!0),(null===(a=this.globalService.globalVar.animals.find(u=>u.type===X.Salamander))||void 0===a?void 0:a.isAvailable)&&(this.seeVolcanicCourseTypeSpoiler=!0),this.sunnyTerrainInfo=this.lookupService.getTerrainPopoverText(new ei(He.Sunny)),this.stormyTerrainInfo=this.lookupService.getTerrainPopoverText(new ei(He.Stormy)),this.rainyTerrainInfo=this.lookupService.getTerrainPopoverText(new ei(He.Rainy)),this.torridTerrainInfo=this.lookupService.getTerrainPopoverText(new ei(He.Torrid)),this.maelstromTerrainInfo=this.lookupService.getTerrainPopoverText(new ei(He.Maelstrom)),this.hailstormTerrainInfo=this.lookupService.getTerrainPopoverText(new ei(He.Hailstorm)),this.ashfallTerrainInfo=this.lookupService.getTerrainPopoverText(new ei(He.Ashfall)),this.snowfallTerrainInfo=this.lookupService.getTerrainPopoverText(new ei(He.Snowfall)),this.availableAnimals=this.globalService.globalVar.animals.filter(u=>u.isAvailable),this.coinGainRenownAmount=this.lookupService.getRenown(),this.facilityLevel=this.lookupService.getFacilityLevel();var o=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv1"===u.name),s=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv2"===u.name),l=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv3"===u.name),c=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv4"===u.name);null!=o&&(this.incubatorUpgradeLevel=1),null!==s&&void 0!==o&&(this.incubatorUpgradeLevel=2),null!==l&&void 0!==o&&(this.incubatorUpgradeLevel=3),null!==c&&void 0!==o&&(this.incubatorUpgradeLevel=4),this.newAnimalSelected(),this.calculatorSubscription=this.gameLoopService.gameUpdateEvent.subscribe(vr(function*(){e.handleRenownModifierCalculation(),e.handleIncubatorModifierCalculation(),e.handleTrainingBreedXpGainCalculation(),e.handleBarnSpecializationLevelAmountCalculation()}))}handleRenownModifierCalculation(){null!=this.coinGainRenownAmount&&(this.renownCoinGain=this.lookupService.getRenownCoinModifier(this.coinGainRenownAmount,!0))}handleIncubatorModifierCalculation(){if(null!=this.incubatorUpgradeLevel&&null!=this.facilityLevel){var r=0,e=.001,n=this.globalService.globalVar.modifiers.find(a=>"incubatorUpgradeIncreaseModifier"===a.text);null!=n&&(e=n.value),r=this.facilityLevel*e,isNaN(this.incubatorUpgradeLevel)||(this.incubatorUpgradeLevel=+this.incubatorUpgradeLevel),this.incubatorUpgradeLevel>=4?(r>.1&&(r=.1),this.incubatorUpgradeLevel=4):3===this.incubatorUpgradeLevel?r>.05&&(r=.05):2===this.incubatorUpgradeLevel?r>.025&&(r=.025):1===this.incubatorUpgradeLevel?r>.01&&(r=.01):this.incubatorUpgradeLevel<=0&&(r=0),this.incubatorModifierAmount=Math.round(1e3*r)/1e3}}handleTrainingBreedXpGainCalculation(){var e=new wt;e.miscStats.bonusBreedXpGainFromTraining=this.bonusBreedXp,this.trainingBreedXpGain=this.lookupService.getTrainingBreedGaugeIncrease(this.breedingGroundsSpecializationLevel,e)}newAnimalSelected(){this.animalSelected=!0;var e=void 0;if(null!=this.selectedAnimalType&&void 0!==(e=this.globalService.globalVar.animals.find(r=>r.getAnimalType()===X[this.selectedAnimalType]))){if(this.bonusBreedXp=e.miscStats.bonusBreedXpGainFromTraining,e.associatedBarnNumber>=0)var n=this.globalService.globalVar.barns.find(r=>r.barnNumber===(null==e?void 0:e.associatedBarnNumber));void 0!==n&&n.barnUpgrades.specialization===Bt.BreedingGrounds&&(this.breedingGroundsSpecializationLevel=n.barnUpgrades.specializationLevel)}}animalNotSelected(){this.animalSelected=!1}handleBarnSpecializationLevelAmountCalculation(){1==+this.selectedSpecialization?(console.log("Breed"),this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Bt.BreedingGrounds,this.barnSpecializationLevel)):2==+this.selectedSpecialization?(console.log("Train"),this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Bt.TrainingFacility,this.barnSpecializationLevel)):3==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Bt.Attraction,this.barnSpecializationLevel):4==+this.selectedSpecialization&&(this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Bt.ResearchCenter,this.barnSpecializationLevel))}changeBarnUpgradeLevel(){this.barnSpecializationLevel=Math.floor(this.barnUpgradeLevel/10)}changeBarnSpecializationLevel(){this.barnUpgradeLevel=10*this.barnSpecializationLevel}viewSpoiler(e){"Attraction Specialization"===e&&(this.seeAttractionSpoiler=!0),"Research Center Specialization"===e&&(this.seeResearchCenterSpoiler=!0),"Ocean Course Type"===e&&(this.seeOceanCourseTypeSpoiler=!0),"Tundra Course Type"===e&&(this.seeTundraCourseTypeSpoiler=!0),"Volcanic Course Type"===e&&(this.seeVolcanicCourseTypeSpoiler=!0)}expandAnswer(e){var n=document.getElementById(e);null!=n&&n.classList.toggle("hide")}changeSection(e){this.currentSection=e}ngOnDestroy(){null!=this.calculatorSubscription&&this.calculatorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(qn),P(hn),P(mi),P(St),P(Xv))},t.\u0275cmp=lt({type:t,selectors:[["app-faq-view"]],decls:21,vars:6,consts:[[1,"faqView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"subsections","s4Heading"],[1,"subsectionOption","buttonAsText",3,"ngClass","click"],[4,"ngIf"],[1,"expanderMargin"],["type","button","aria-label","Expand",3,"click"],[1,"faqQuestion"],["id","faqAnswerBreedGuide",1,"faqAnswer","hide"],["id","faqAnswerBreedBarnRows",1,"faqAnswer","hide"],["id","faqAnswerAllAnimals",1,"faqAnswer","hide"],[1,"flatlandColor","keyword"],[1,"keyword"],[1,"mountainColor","keyword"],[3,"ngClass","click"],[1,"hidden"],[1,"keyword",3,"ngClass"],["id","faqAnswerTerrain",1,"faqAnswer","hide"],[3,"innerHTML"],["id","faqAnswerSettings",1,"faqAnswer","hide"],["id","faqAnswerFeedback",1,"faqAnswer","hide"],["id","faqAnswer1",1,"faqAnswer","hide"],["id","faqAnswer2",1,"faqAnswer","hide"],["id","faqAnswer3",1,"faqAnswer","hide"],["id","faqAnswer4",1,"faqAnswer","hide"],["id","faqAnswerRenownCalculator",1,"faqAnswer","hide"],[1,"inputsAndResult"],[1,"mb-3","inputs"],["for","renown-amount",1,"shortLabelMargin","progressionKeyword"],["id","renown-amount","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"result"],[3,"ngClass"],[1,"progressionKeyword"],["class","keyword",4,"ngIf"],["id","faqAnswerTrainingBreedXpCalculator",1,"faqAnswer","hide"],[1,"dropdownSelection"],["for","breed-xp-animal",1,"keyword"],["name","breed-xp-animal","id","breed-xp-animal",1,"spaced",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","bonus-breed-xp",1,"longLabelMargin","keyword"],["id","bonus-breed-xp","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","breeding-grounds-spec-level",1,"longLabelMargin","keyword"],["id","breeding-grounds-spec-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["id","faqAnswerBarnSpecializationGainCalculator",1,"faqAnswer","hide"],[1,"mb-3"],[1,"inputs"],["for","specialization-options",1,"keyword"],["name","specialization-options","id","specialization-options",1,"spaced",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngIf"],["for","barn-upgrade-level",1,"labelMargin","keyword"],["id","barn-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","barn-specialization-level",1,"labelMargin","keyword"],["id","barn-specialization-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["id","faqAnswerIncubatorGrowthCalculator",1,"faqAnswer","hide"],["for","incubator-upgrade-level",1,"labelMargin","specialtyKeyword"],["id","incubator-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["for","facility-level",1,"labelMargin","progressionKeyword"],["id","facility-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"specialtyKeyword"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Frequently Asked Questions"),h(),f(6,"em"),g(7,"This FAQ and game is still a work in progress! Bear with me if certain features aren't fully fleshed out and developed yet. If you have any feedback at all, please let me know using one of the links on the bottom right. Thank you so much for playing and hope you're enjoying it!"),h()(),x(8,"br"),f(9,"div",4)(10,"button",5),N("click",function(){return n.changeSection(n.faqSectionsEnum.basics)}),g(11,"Basics"),h(),f(12,"button",5),N("click",function(){return n.changeSection(n.faqSectionsEnum.progression)}),g(13,"Progression"),h(),f(14,"button",5),N("click",function(){return n.changeSection(n.faqSectionsEnum.calculators)}),g(15,"Calculators"),h()(),x(16,"hr")(17,"br"),M(18,Qj,270,43,"div",6),M(19,Zj,67,7,"div",6),M(20,az,136,27,"div",6),h()()()),2&e&&(p(10),b("ngClass",n.currentSection===n.faqSectionsEnum.basics?"active":""),p(2),b("ngClass",n.currentSection===n.faqSectionsEnum.progression?"active":""),p(2),b("ngClass",n.currentSection===n.faqSectionsEnum.calculators?"active":""),p(4),b("ngIf",n.currentSection===n.faqSectionsEnum.basics),p(1),b("ngIf",n.currentSection===n.faqSectionsEnum.progression),p(1),b("ngIf",n.currentSection===n.faqSectionsEnum.calculators))},directives:[Bn,en,iv,rs,Kc,yl,wl,Eh,jn,XS,QS],styles:['.faqView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}.faqQuestion[_ngcontent-%COMP%]{display:inline-block;width:95%;font-weight:700}.hide[_ngcontent-%COMP%]{display:none}.expanderMargin[_ngcontent-%COMP%]{display:inline-block;width:5%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.inputsAndResult[_ngcontent-%COMP%]{display:flex}.inactiveCalculation[_ngcontent-%COMP%]{opacity:.5}.inputs[_ngcontent-%COMP%], .results[_ngcontent-%COMP%]{width:50%}.spoilerText[_ngcontent-%COMP%]{background-color:gray;color:transparent;-webkit-user-select:none;user-select:none;position:relative;display:inline-block;min-width:8rem}.spoilerText[_ngcontent-%COMP%]:hover > .hidden[_ngcontent-%COMP%]{display:block;color:#fff}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.shortLabelMargin[_ngcontent-%COMP%]{min-width:15%}.labelMargin[_ngcontent-%COMP%]{min-width:25%}.longLabelMargin[_ngcontent-%COMP%]{min-width:40%}.hidden[_ngcontent-%COMP%]{display:none;position:absolute}.subsections[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.viewSpoiler[_ngcontent-%COMP%]{background-color:inherit;color:inherit}@media (max-width: 800px){.expanderMargin[_ngcontent-%COMP%]{width:auto;margin-right:1rem}.faqQuestion[_ngcontent-%COMP%]{width:auto}}']}),t})(),sz=(()=>{class t{constructor(e,n){this.globalService=e,this.componentCommunicationService=n}ngOnInit(){this.componentCommunicationService.setNewView(ft.stats),this.trackedStats=this.globalService.globalVar.trackedStats;var e=0;this.globalService.globalVar.animals.forEach(n=>{n.totalRacesRun>e&&(e=n.totalRacesRun,this.mostUsedAnimal=n.name,this.mostUsedAnimalCount=e)})}getColorClass(e){if(null!=e&&e.length>0){var n=this.globalService.globalVar.animals.filter(o=>o.isAvailable),r=new wt;return n.forEach(o=>{e.includes(o.name)&&(r=o)}),{flatlandColor:"Flatland"===r.getRaceCourseType(),mountainColor:"Mountain"===r.getRaceCourseType(),waterColor:"Ocean"===r.getRaceCourseType(),tundraColor:"Tundra"===r.getRaceCourseType(),volcanicColor:"Volcanic"===r.getRaceCourseType()}}return{}}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(qn))},t.\u0275cmp=lt({type:t,selectors:[["app-stats-view"]],decls:37,vars:34,consts:[[1,"statsView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"coloredText",3,"ngClass"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"Stats"),h(),x(5,"br")(6,"br"),g(7),At(8,"number"),x(9,"br"),g(10),At(11,"number"),x(12,"br"),g(13),At(14,"number"),x(15,"br"),f(16,"span",4),g(17),At(18,"number"),h(),x(19,"br"),f(20,"span",4),g(21),h(),x(22,"br"),f(23,"span",4),g(24),h(),x(25,"br"),f(26,"span",4),g(27),h(),x(28,"br"),f(29,"span",4),g(30),h(),x(31,"br"),f(32,"span",4),g(33),h(),x(34,"br"),f(35,"span",4),g(36),h()()()()),2&e&&(p(7),Q(" Total Races: ",Fc(8,18,n.trackedStats.totalRaces,"1.0","en-US")," "),p(3),Q(" Total Meters Covered: ",Fc(11,22,n.trackedStats.totalMetersRaced.toFixed(0),"1.0","en-US")," "),p(3),Q(" Total Breeds: ",Fc(14,26,n.trackedStats.totalBreeds,"1.0","en-US")," "),p(3),b("ngClass",n.getColorClass(n.mostUsedAnimal)),p(1),Kn("Most Used Animal: ",n.mostUsedAnimal," (",Fc(18,30,n.mostUsedAnimalCount,"1.0","en-US"),")"),p(3),b("ngClass",n.getColorClass(n.trackedStats.highestMaxSpeed)),p(1),Q("Highest Max Speed: ",n.trackedStats.highestMaxSpeed,""),p(2),b("ngClass",n.getColorClass(n.trackedStats.highestAccelerationRate)),p(1),Q("Highest Acceleration Rate: ",n.trackedStats.highestAccelerationRate,""),p(2),b("ngClass",n.getColorClass(n.trackedStats.highestStamina)),p(1),Q("Highest Stamina: ",n.trackedStats.highestStamina,""),p(2),b("ngClass",n.getColorClass(n.trackedStats.highestPowerEfficiency)),p(1),Q("Highest Power Efficiency: ",n.trackedStats.highestPowerEfficiency,""),p(2),b("ngClass",n.getColorClass(n.trackedStats.highestFocusDistance)),p(1),Q("Highest Focus Distance: ",n.trackedStats.highestFocusDistance,""),p(2),b("ngClass",n.getColorClass(n.trackedStats.highestAdaptabilityDistance)),p(1),Q("Highest Adaptability Distance: ",n.trackedStats.highestAdaptabilityDistance,""))},directives:[Bn],pipes:[no],styles:['.statsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}']}),t})();function lz(t,i){if(1&t&&(f(0,"div",12),x(1,"span",13),h()),2&t){const e=C().$implicit,n=C();p(1),b("innerHTML",n.getPopover(e.name,e.itemType),jt)}}function cz(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",8),g(3),h(),f(4,"span",9),g(5),h(),x(6,"hr",10),h(),M(7,lz,2,1,"ng-template",null,11,rt),h()),2&t){const e=i.$implicit,n=it(8);p(1),b("ngbPopover",n),p(2),Ze(e.name),p(2),Q(" x ",e.amount,"")}}function uz(t,i){if(1&t&&(f(0,"div",12),x(1,"span",13),h()),2&t){const e=C().$implicit,n=C();p(1),b("innerHTML",n.getPopover(e.name,e.itemType),jt)}}function dz(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",14),g(3),h(),f(4,"span",9),g(5),h(),x(6,"hr",10),h(),M(7,uz,2,1,"ng-template",null,15,rt),h()),2&t){const e=i.$implicit,n=it(8);p(1),b("ngbPopover",n),p(2),Ze(e.name),p(2),Q(" x ",e.amount,"")}}function hz(t,i){if(1&t&&(f(0,"div",12),x(1,"span",13),h()),2&t){const e=C().$implicit,n=C();p(1),b("innerHTML",n.getPopover(e.name,e.itemType),jt)}}function fz(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",16),g(3),h(),f(4,"span",9),g(5),h(),x(6,"hr",10),h(),M(7,hz,2,1,"ng-template",null,17,rt),h()),2&t){const e=i.$implicit,n=it(8);p(1),b("ngbPopover",n),p(2),Ze(e.name),p(2),Q(" x ",e.amount,"")}}function pz(t,i){if(1&t&&(f(0,"div",12),x(1,"span",13),h()),2&t){const e=C().$implicit,n=C();p(1),b("innerHTML",n.getPopover(e.name,e.itemType),jt)}}function gz(t,i){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",18),g(3),h(),f(4,"span",9),g(5),h(),x(6,"hr",10),h(),M(7,pz,2,1,"ng-template",null,19,rt),h()),2&t){const e=i.$implicit,n=it(8);p(1),b("ngbPopover",n),p(2),Ze(e.name),p(2),Q(" x ",e.amount,"")}}let mz=(()=>{class t{constructor(e,n,r,a){this.globalService=e,this.lookupService=n,this.componentCommunicationService=r,this.utilityService=a,this.resources=[],this.equipment=[],this.specialtyItems=[],this.progressionResources=[]}ngOnInit(){this.componentCommunicationService.setNewView(ft.resources),this.resources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Food||e.itemType===Y.Resources).sort(),this.equipment=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Equipment).sort(),this.specialtyItems=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Specialty).sort(),this.progressionResources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===Y.Progression).sort()}getPopover(e,n){return this.utilityService.getSanitizedHtml(this.lookupService.getResourcePopover(e,n))}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(hn),P(qn),P(Li))},t.\u0275cmp=lt({type:t,selectors:[["app-resources-view"]],decls:21,vars:4,consts:[[1,"resourcesView","gridContainer"],[1,"resources"],[1,"s4Heading","centered"],[4,"ngFor","ngForOf"],[1,"progression"],[1,"specialty"],[1,"equipment"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"screenMarginLeft",3,"ngbPopover"],[1,"resourceKeyword"],[1,"rightAligned"],[1,"miniHr"],["resourceContent",""],[1,"popoverClass"],[3,"innerHTML"],[1,"progressionKeyword"],["progressionContent",""],[1,"specialtyKeyword"],["specialityContent",""],[1,"equipmentKeyword"],["equipmentContent",""]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2),g(3,"Resources"),h(),x(4,"br"),M(5,cz,9,3,"p",3),h(),f(6,"div",4)(7,"div",2),g(8,"Progression"),h(),x(9,"br"),M(10,dz,9,3,"p",3),h(),f(11,"div",5)(12,"div",2),g(13,"Specialty"),h(),x(14,"br"),M(15,fz,9,3,"p",3),h(),f(16,"div",6)(17,"div",2),g(18,"Equipment"),h(),x(19,"br"),M(20,gz,9,3,"p",3),h()()),2&e&&(p(5),b("ngForOf",n.resources),p(5),b("ngForOf",n.progressionResources),p(5),b("ngForOf",n.specialtyItems),p(5),b("ngForOf",n.equipment))},directives:[jn,Or],styles:['.resources[_ngcontent-%COMP%]{white-space:pre}.resourcesView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:25%;grid-template-rows:100%;justify-content:stretch;grid-template-areas:"resources progression specialty equipment"}.resources[_ngcontent-%COMP%]{grid-area:resources;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.progression[_ngcontent-%COMP%]{grid-area:progression;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.specialty[_ngcontent-%COMP%]{grid-area:specialty;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.equipment[_ngcontent-%COMP%]{grid-area:equipment;background-color:var(--background-secondary)}.rightAligned[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto auto;justify-content:stretch;grid-template-areas:"resources" "progression" "specialty" "equipment"}}']}),t})();var Ul=q(7206);let vz=(()=>{class t{constructor(e){this.globalService=e}redeemCode(e){var r=Ul.AES.decrypt(e,"LaunchSecret!CLTRA71");0===r.toString(Ul.enc.Utf8).length&&alert("Invalid code entered.");try{var a=JSON.parse(r.toString(Ul.enc.Utf8));null!=a&&a.rewards.length>0&&((new Date).getTime()>new Date(a.expirationDate).getTime()?alert("This code has expired."):this.globalService.globalVar.redeemedCodes.some(o=>o.codeValue===r.toString(Ul.enc.Utf8))?alert("This code has already been redeemed."):(a.rewards.forEach(o=>{var s=this.globalService.globalVar.resources.find(l=>l.name===o.name);null!=s?s.amount+=o.amount:this.globalService.globalVar.resources.push(o)}),a.codeValue=r.toString(Ul.enc.Utf8),this.globalService.globalVar.redeemedCodes.push(a)))}catch(o){alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}}}return t.\u0275fac=function(e){return new(e||t)(Ve(St))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),bz=(()=>{class t{constructor(e){this.lookupService=e}setupRewards(){this.redeemableCode=new nf,this.redeemableCode.expirationDate=new Date("2022-09-01"),this.redeemableCode.rewards.push(this.lookupService.gainMangoes(10)),this.redeemableCode.rewards.push(this.lookupService.gainCoins(1e4)),this.redeemableCode.rewards.push(this.lookupService.gainTokens(5))}createCode(){this.setupRewards();var n=JSON.stringify(this.redeemableCode);return Ul.AES.encrypt(n,"LaunchSecret!CLTRA71").toString()}}return t.\u0275fac=function(e){return new(e||t)(Ve(hn))},t.\u0275prov=Je({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_z=(()=>{class t{constructor(e,n,r,a,o,s,l,c){this.globalService=e,this.themeService=n,this.lookupService=r,this.codeRedemptionService=a,this.codeCreationService=o,this.deploymentService=s,this.componentCommunicationService=l,this.versionControlService=c,this.raceDisplayInfoEnum=Kr,this.skipDrawRaceToggle=()=>{this.skipDrawRace=!this.skipDrawRace,this.globalService.globalVar.settings.set("skipDrawRace",this.skipDrawRace)},this.finishTrainingBeforeSwitchingToggle=()=>{this.finishTrainingBeforeSwitching=!this.finishTrainingBeforeSwitching,this.globalService.globalVar.settings.set("finishTrainingBeforeSwitching",this.finishTrainingBeforeSwitching)},this.hideTipsToggle=()=>{this.hideTips=!this.hideTips,this.globalService.globalVar.settings.set("hideTips",this.hideTips)},this.useNumbersForCircuitRankToggle=()=>{this.useNumbersForCircuitRank=!this.useNumbersForCircuitRank,this.globalService.globalVar.settings.set("useNumbersForCircuitRank",this.useNumbersForCircuitRank)},this.autoStartEventRaceToggle=()=>{this.autoStartEventRace=!this.autoStartEventRace,this.globalService.globalVar.settings.set("autoStartEventRace",this.autoStartEventRace)}}ngOnInit(){this.componentCommunicationService.setNewView(ft.settings),this.deploymentService.codeCreationMode&&console.log(this.codeCreationService.createCode()),this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1);var e=this.globalService.globalVar.settings.get("skipDrawRace");this.skipDrawRace=void 0!==e&&e,this.skipDrawRacePopoverText=this.lookupService.getSettingDescriptions("Auto Skip Race Info");var n=this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching");this.finishTrainingBeforeSwitching=void 0!==n&&n,this.finishTrainingBeforeSwitchingPopoverText=this.lookupService.getSettingDescriptions("Finish Training Before Switching");var r=this.globalService.globalVar.settings.get("raceDisplayInfo");this.raceDisplayInfo=this.getRaceDisplayInfoName(void 0===r?Kr.both:r),this.raceDisplayInfoPopoverText=this.lookupService.getSettingDescriptions("Race Display Info");var a=this.globalService.globalVar.settings.get("hideTips");this.hideTips=void 0!==a&&a,this.hideTipsPopoverText=this.lookupService.getSettingDescriptions("Hide Tips");var o=this.globalService.globalVar.settings.get("useNumbersForCircuitRank");this.useNumbersForCircuitRank=void 0!==o&&o,this.useNumbersForCircuitRankPopoverText=this.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank");var s=this.globalService.globalVar.settings.get("autoStartEventRace");this.autoStartEventRace=void 0!==s&&s,this.autoStartEventRacePopoverText=this.lookupService.getSettingDescriptions("Auto Start Event Race")}SaveGame(){var e=JSON.stringify(this.globalService.globalVar),n=LZString.compressToBase64(e);this.importExportValue=n}LoadGame(){if(confirm("This will overwrite your existing game data. Continue?")){var e=LZString.decompressFromBase64(this.importExportValue),n=JSON.parse(e);null!=n&&(this.globalService.globalVar=mD(Ln,n),this.versionControlService.updatePlayerVersion())}}saveRaceDisplayInfo(){this.globalService.globalVar.settings.set("raceDisplayInfo",this.raceDisplayInfo)}changeRaceDisplayInfo(e){this.globalService.globalVar.settings.set("raceDisplayInfo",e),this.raceDisplayInfo=this.getRaceDisplayInfoName(e)}changeTheme(e){var n=fu;"White"===e&&(n=this.themeService.setWhiteTheme()),"Light"===e&&(n=this.themeService.setLightTheme()),"Twilight"===e&&(n=this.themeService.setTwilightTheme()),"Night"===e&&(n=this.themeService.setNightTheme()),this.globalService.globalVar.settings.set("theme",n),this.getThemeName()}getThemeName(){this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1)}getRaceDisplayInfoName(e){return e===Kr.both?"Both":e===Kr.text?"Text":e===Kr.draw?"Draw":""}enterRedemptionCode(){this.codeRedemptionService.redeemCode(this.enteredRedemptionCode)}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(kl),P(hn),P(vz),P(bz),P(vD),P(qn),P(Qv))},t.\u0275cmp=lt({type:t,selectors:[["app-settings-view"]],decls:91,vars:15,consts:[[1,"settingsView"],[1,"info"],[1,"settingsGrid"],[1,"options"],[1,"s4Heading"],[1,"toggles"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","finishTraining",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","hideTips",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","useNumbersForCircuitRank",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","autoStartEventRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave","ngbDropdown","",1,"d-inline-block",3,"ngbPopover"],[1,"bottomAligned"],["type","button","id","raceDisplayInfoDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","raceDisplayInfoDropdown"],["ngbDropdownItem","",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","themeDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","themeDropdown"],[1,"saveLoad"],[1,"importExportDiv"],["id","importExport","name","importExport","rows","10",3,"ngModel","ngModelChange"],[1,"importExportButtons"],[3,"click"],[1,"codeRedemption"],["for","codeRedemptionText"],["id","codeRedemptionText","type","text",1,"spaced","codeRedemptionInput",3,"ngModel","ngModelChange"],[1,"screenMarginLeft",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"h2"),g(3,"Settings"),h()(),f(4,"div",2)(5,"div",3)(6,"span",4),g(7,"Options"),h(),x(8,"br"),f(9,"div",5)(10,"span",6)(11,"label")(12,"input",7),N("ngModelChange",function(a){return n.skipDrawRace=a})("input",function(){return n.skipDrawRaceToggle()}),h(),f(13,"span"),g(14,"Auto Skip Race Info"),h()()(),x(15,"br"),f(16,"span",6)(17,"label")(18,"input",8),N("ngModelChange",function(a){return n.finishTrainingBeforeSwitching=a})("input",function(){return n.finishTrainingBeforeSwitchingToggle()}),h(),f(19,"span"),g(20,"Finish Training Before Switching "),h()()(),x(21,"br"),f(22,"span",6)(23,"label")(24,"input",9),N("ngModelChange",function(a){return n.hideTips=a})("input",function(){return n.hideTipsToggle()}),h(),f(25,"span"),g(26,"Hide Tips"),h()()(),x(27,"br"),f(28,"span",6)(29,"label")(30,"input",10),N("ngModelChange",function(a){return n.useNumbersForCircuitRank=a})("input",function(){return n.useNumbersForCircuitRankToggle()}),h(),f(31,"span"),g(32,"Use Numbers For Circuit Rank"),h()()(),x(33,"br"),f(34,"span",6)(35,"label")(36,"input",11),N("ngModelChange",function(a){return n.autoStartEventRace=a})("input",function(){return n.autoStartEventRaceToggle()}),h(),f(37,"span"),g(38,"Auto Start Event Race"),h()()(),x(39,"br"),h(),f(40,"div",12)(41,"label",13),g(42,"Race Display Info:"),h(),f(43,"button",14),g(44),h(),f(45,"div",15)(46,"button",16),N("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.draw)}),g(47,"Draw"),h(),f(48,"button",16),N("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.text)}),g(49,"Text"),h(),f(50,"button",16),N("click",function(){return n.changeRaceDisplayInfo(n.raceDisplayInfoEnum.both)}),g(51,"Both"),h()()(),x(52,"br"),f(53,"div",17)(54,"label",13),g(55,"Theme:"),h(),f(56,"button",18),g(57),h(),f(58,"div",19)(59,"button",16),N("click",function(){return n.changeTheme("White")}),g(60,"White"),h(),f(61,"button",16),N("click",function(){return n.changeTheme("Light")}),g(62,"Light"),h(),f(63,"button",16),N("click",function(){return n.changeTheme("Twilight")}),g(64,"Twilight"),h(),f(65,"button",16),N("click",function(){return n.changeTheme("Night")}),g(66,"Night"),h()()()(),f(67,"div",20)(68,"span",4),g(69,"Save/Load"),h(),x(70,"br"),f(71,"div",21)(72,"textarea",22),N("ngModelChange",function(a){return n.importExportValue=a}),h(),f(73,"div",23)(74,"button",24),N("click",function(){return n.LoadGame()}),g(75," Import "),h(),f(76,"button",24),N("click",function(){return n.SaveGame()}),g(77," Export "),h()()(),x(78,"br")(79,"br"),f(80,"div")(81,"span",4),g(82,"Code Redemption"),h(),x(83,"br")(84,"br"),f(85,"div",25)(86,"label",26),g(87,"Code: "),h(),f(88,"input",27),N("ngModelChange",function(a){return n.enteredRedemptionCode=a}),h(),f(89,"button",28),N("click",function(){return n.enterRedemptionCode()}),g(90," Enter "),h()()()()()()),2&e&&(p(10),b("ngbPopover",n.skipDrawRacePopoverText),p(2),b("ngModel",n.skipDrawRace),p(4),b("ngbPopover",n.finishTrainingBeforeSwitchingPopoverText),p(2),b("ngModel",n.finishTrainingBeforeSwitching),p(4),b("ngbPopover",n.hideTipsPopoverText),p(2),b("ngModel",n.hideTips),p(4),b("ngbPopover",n.useNumbersForCircuitRankPopoverText),p(2),b("ngModel",n.useNumbersForCircuitRank),p(4),b("ngbPopover",n.autoStartEventRacePopoverText),p(2),b("ngModel",n.autoStartEventRace),p(4),b("ngbPopover",n.raceDisplayInfoPopoverText),p(4),Ze(n.raceDisplayInfo),p(13),Ze(n.currentTheme),p(15),b("ngModel",n.importExportValue),p(16),b("ngModel",n.enteredRedemptionCode))},directives:[Or,bh,yl,wl,Ll,_0,_f,b0,rs],styles:['.settingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}#raceDisplayInfoDropdown[_ngcontent-%COMP%], #themeDropdown[_ngcontent-%COMP%]{border:1px solid;border-color:var(--background-tertiary)}.bottomAligned[_ngcontent-%COMP%]{vertical-align:bottom}.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". options saveLoad ."}.options[_ngcontent-%COMP%]{grid-area:options}.saveLoad[_ngcontent-%COMP%]{grid-area:saveLoad}#importExport[_ngcontent-%COMP%]{width:100%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.importExportButtons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.codeRedemption[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.codeRedemptionInput[_ngcontent-%COMP%]{flex:1}@media (max-width: 800px){.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". options ." ". saveLoad ."}}']}),t})();function yz(t,i){if(1&t){const e=fe();f(0,"div",12),N("click",function(){return B(e),C().getNewTip()}),f(1,"span"),g(2),h()()}if(2&t){const e=C();p(2),Kn("",e.displayingFunFact?"Fun Fact: ":"Tip: ","",e.randomTip,"")}}let Cz=(()=>{class t{constructor(e,n,r,a,o){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.componentCommunicationService=a,this.utilityService=o,this.displayingFunFact=!1,this.lastDisplayedFunFact=!1}ngOnInit(){var e=this;this.displayTip=!this.globalService.globalVar.settings.get("hideTips"),this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.randomTip=this.lookupService.getRandomTip(),this.totalTime=0,this.maxTipTime=60,this.gameLoopService.gameUpdateEvent.subscribe(function(){var n=vr(function*(r){if(e.displayTip=!e.globalService.globalVar.settings.get("hideTips"),e.totalTime+=r,e.totalTime>=e.maxTipTime&&e.displayTip){e.totalTime=0;var a=e.utilityService.getRandomInteger(1,4);a<=3||e.lastDisplayedFunFact?(e.displayingFunFact=!1,e.lastDisplayedFunFact=!1,e.randomTip=e.lookupService.getRandomTip()):4===a&&(e.displayingFunFact=!0,e.lastDisplayedFunFact=!0,e.randomTip=e.lookupService.getRandomFunFact())}});return function(r){return n.apply(this,arguments)}}())}getNewTip(){this.totalTime=0;var e=this.utilityService.getRandomInteger(1,4);e<=3||this.lastDisplayedFunFact?(this.displayingFunFact=!1,this.lastDisplayedFunFact=!1,this.randomTip=this.lookupService.getRandomTip()):4===e&&(this.displayingFunFact=!0,this.lastDisplayedFunFact=!0,this.randomTip=this.lookupService.getRandomFunFact())}openFAQs(){this.componentCommunicationService.setNewView(ft.faqs)}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(mi),P(hn),P(qn),P(Li))},t.\u0275cmp=lt({type:t,selectors:[["app-footer"]],decls:25,vars:1,consts:[[1,"footerView"],[1,"gridContainer"],[1,"area1"],["class","area2 keyword tips",3,"click",4,"ngIf"],[1,"area3","keyword","rightAlign"],[1,"faqs",3,"click"],["href","https://discord.gg/TgbRXsXQF3","rel","noopener noreferrer","target","_blank"],["href","https://www.reddit.com/message/compose/?to=Jaghancement","rel","noopener noreferrer","target","_blank"],["href","mailto:CulturaIdle@gmail.com"],[1,"area4","keyword","rightAlign"],["href","https://www.buymeacoffee.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],["href","https://www.patreon.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],[1,"area2","keyword","tips",3,"click"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2),x(3,"span"),h(),M(4,yz,3,2,"div",3),f(5,"div",4)(6,"span")(7,"span",5),N("click",function(){return n.openFAQs()}),g(8,"FAQs"),h(),g(9," | "),f(10,"a",6),g(11,"Discord"),h(),g(12," | "),f(13,"a",7),g(14,"Reddit"),h(),g(15," | "),f(16,"a",8),g(17,"Email"),h()()(),f(18,"div",9)(19,"span")(20,"a",10),g(21,"Donate"),h(),g(22," | "),f(23,"a",11),g(24,"Patreon"),h()()()()()),2&e&&(p(4),b("ngIf",n.displayTip))},directives:[en],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 1fr 20% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". area1 area2 area3 ." ". area1 area2 area4 ."}a[_ngcontent-%COMP%], .faqs[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.faqs[_ngcontent-%COMP%]{cursor:pointer}.faqs[_ngcontent-%COMP%]:hover{text-decoration:underline}.area1[_ngcontent-%COMP%]{grid-area:area1;justify-self:stretch}.area2[_ngcontent-%COMP%]{grid-area:area2;justify-self:stretch}.area3[_ngcontent-%COMP%]{grid-area:area3;justify-self:stretch}.area4[_ngcontent-%COMP%]{grid-area:area4;justify-self:stretch}.rightAlign[_ngcontent-%COMP%]{text-align:right}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 0% 1fr 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". . . area3 ." ". . . area4 ."}.tips[_ngcontent-%COMP%]{display:none}}']}),t})();const wz=["tutorialContent"],Sz=["eventLoadingContent"];function Tz(t,i){1&t&&(f(0,"div",19),x(1,"app-barn-view"),h())}function Dz(t,i){1&t&&(f(0,"div",20),x(1,"app-race-selection-view"),h())}function Rz(t,i){1&t&&(f(0,"div",21),x(1,"app-animals-view"),h())}function xz(t,i){1&t&&(f(0,"div",22),x(1,"app-decks-view"),h())}function Mz(t,i){1&t&&(f(0,"div",23),x(1,"app-shop-view"),h())}function kz(t,i){1&t&&(f(0,"div",24),x(1,"app-incubator-view"),h())}function Az(t,i){1&t&&(f(0,"div",25),x(1,"app-training-track-view"),h())}function Pz(t,i){1&t&&(f(0,"div",26),x(1,"app-faq-view"),h())}function Ez(t,i){1&t&&(f(0,"div",27),x(1,"app-stats-view"),h())}function Iz(t,i){1&t&&(f(0,"div",28),x(1,"app-resources-view"),h())}function Oz(t,i){1&t&&(f(0,"div",29),x(1,"app-settings-view"),h())}function Nz(t,i){if(1&t){const e=fe();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Tutorial"),h(),f(4,"button",33),N("click",function(){return B(e),C().closeTutorialModal()}),g(5,"X"),h()(),x(6,"div",34),f(7,"div",35)(8,"span")(9,"button",36),N("click",function(){return B(e),C().skipTutorial()}),g(10,"Skip Tutorial"),h()(),f(11,"span")(12,"button",36),N("click",function(){return B(e),C().continueTutorial()}),g(13,"Continue"),h()()()()}if(2&t){const e=C();p(6),b("innerHTML",e.tutorialText,jt)}}function Vz(t,i){if(1&t){const e=fe();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Loading..."),h(),f(4,"button",33),N("click",function(){return B(e),C().closeModals()}),g(5,"X"),h()(),f(6,"div",37),g(7," Grand Prix is calculating offline time. Load times may be long while this finishes. "),h(),f(8,"div",35)(9,"span")(10,"button",36),N("click",function(){return B(e),C().closeModals()}),g(11,"Continue"),h()()()()}}let Fz=(()=>{class t{constructor(e,n,r,a,o,s,l){this.ref=e,this.globalService=n,this.modalService=r,this.tutorialService=a,this.componentCommunicationService=o,this.sanitizer=s,this.gameLoopService=l,this.navigationEnum=ft,this.activeView=ft.barn,this.loadingScreenDisplayed=!1}ngOnInit(){var e=this;this.openTutorialModal(),this.eventPrixSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=vr(function*(a){null!=e.globalService.globalVar.eventRaceData&&e.globalService.globalVar.eventRaceData.isCatchingUp&&!e.loadingScreenDisplayed?(e.loadingScreenDisplayed=!0,e.openLoadingModal()):null!=e.globalService.globalVar.eventRaceData&&!e.globalService.globalVar.eventRaceData.isCatchingUp&&e.loadingScreenDisplayed&&(e.loadingScreenDisplayed=!1,e.closeModals())});return function(a){return r.apply(this,arguments)}}());var n=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=vr(function*(a){e.globalService.globalVar.tutorials.showTutorial&&e.openTutorialModal(),e.globalService.globalVar.tutorials.tutorialCompleted&&n.unsubscribe()});return function(a){return r.apply(this,arguments)}}())}changeView(e){this.activeView=e}openTutorialModal(){if(!this.globalService.globalVar.tutorials.tutorialCompleted){var e=this.tutorialService.getTutorialState(this.globalService.globalVar.tutorials.currentTutorialId);this.activeView===e.associatedTab&&(this.tutorialText=this.sanitizer.sanitize(Kt.HTML,this.sanitizer.bypassSecurityTrustHtml(e.tutorialText+"\n")),this.globalService.globalVar.tutorials.showTutorial=!1,5===e.id&&(this.globalService.globalVar.tutorials.currentTutorialId+=1),this.modalService.open(this.tutorialContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(n=>{this.closeTutorialModal()},n=>{this.closeTutorialModal()}))}}openLoadingModal(){this.modalService.open(this.eventLoadingContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(e=>{this.closeModals()},e=>{this.closeModals()})}closeModals(){this.modalService.dismissAll()}closeTutorialModal(){this.modalService.dismissAll()}skipTutorial(){this.tutorialService.skipTutorial(),this.closeTutorialModal()}continueTutorial(){this.closeTutorialModal()}}return t.\u0275fac=function(e){return new(e||t)(P(Mr),P(St),P(lo),P(bD),P(qn),P(Mo),P(mi))},t.\u0275cmp=lt({type:t,selectors:[["app-main"]],viewQuery:function(e,n){if(1&e&&(ca(wz,7),ca(Sz,7)),2&e){let r;un(r=dn())&&(n.tutorialContent=r.first),un(r=dn())&&(n.eventLoadingContent=r.first)}},decls:23,vars:11,consts:[[1,"gridContainer"],[1,"headerArea"],[1,"mainArea"],["id","BarnView","class","mainView",4,"ngIf"],["id","RaceSelectionView","class","mainView",4,"ngIf"],["id","AnimalsView","class","mainView",4,"ngIf"],["id","DecksView","class","mainView",4,"ngIf"],["id","ShopView","class","mainView",4,"ngIf"],["id","IncubatorView","class","mainView",4,"ngIf"],["id","TrainingTrackView","class","mainView",4,"ngIf"],["id","FaqsView","class","mainView",4,"ngIf"],["id","StatsView","class","mainView",4,"ngIf"],["id","ResourcesView","class","mainView",4,"ngIf"],["id","SettingsView","class","mainView",4,"ngIf"],[1,"navArea"],[3,"viewChanged"],[1,"footerArea"],["tutorialContent",""],["eventLoadingContent",""],["id","BarnView",1,"mainView"],["id","RaceSelectionView",1,"mainView"],["id","AnimalsView",1,"mainView"],["id","DecksView",1,"mainView"],["id","ShopView",1,"mainView"],["id","IncubatorView",1,"mainView"],["id","TrainingTrackView",1,"mainView"],["id","FaqsView",1,"mainView"],["id","StatsView",1,"mainView"],["id","ResourcesView",1,"mainView"],["id","SettingsView",1,"mainView"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"],[1,"modal-body"]],template:function(e,n){1&e&&(f(0,"div",0)(1,"div",1),x(2,"app-header"),h(),f(3,"div",2),M(4,Tz,2,0,"div",3),M(5,Dz,2,0,"div",4),M(6,Rz,2,0,"div",5),M(7,xz,2,0,"div",6),M(8,Mz,2,0,"div",7),M(9,kz,2,0,"div",8),M(10,Az,2,0,"div",9),M(11,Pz,2,0,"div",10),M(12,Ez,2,0,"div",11),M(13,Iz,2,0,"div",12),M(14,Oz,2,0,"div",13),h(),f(15,"div",14)(16,"app-navigation",15),N("viewChanged",function(a){return n.changeView(a)}),h()(),f(17,"div",16),x(18,"app-footer"),h()(),M(19,Nz,14,1,"ng-template",null,17,rt),M(21,Vz,12,0,"ng-template",null,18,rt)),2&e&&(p(4),b("ngIf",n.activeView===n.navigationEnum.barn),p(1),b("ngIf",n.activeView===n.navigationEnum.raceselection),p(1),b("ngIf",n.activeView===n.navigationEnum.animals),p(1),b("ngIf",n.activeView===n.navigationEnum.relayTeams),p(1),b("ngIf",n.activeView===n.navigationEnum.shop),p(1),b("ngIf",n.activeView===n.navigationEnum.incubator),p(1),b("ngIf",n.activeView===n.navigationEnum.trainingtrack),p(1),b("ngIf",n.activeView===n.navigationEnum.faqs),p(1),b("ngIf",n.activeView===n.navigationEnum.stats),p(1),b("ngIf",n.activeView===n.navigationEnum.resources),p(1),b("ngIf",n.activeView===n.navigationEnum.settings))},directives:[G6,en,pH,vG,Z9,lj,Aj,Yj,qR,oz,sz,mz,_z,jR,Cz],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100vh;grid-template-columns:88% 12%;grid-template-rows:6% 88% 6%;justify-content:stretch;grid-template-areas:"header header" "main  nav" "footer footer"}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100%;position:fixed;top:0;left:0;bottom:0;right:0;grid-template-columns:88% 12%;grid-template-rows:auto 1fr auto;justify-content:stretch;grid-template-areas:"header header" "main  main" "footer footer"}.navArea[_ngcontent-%COMP%]{display:none}}.mainArea[_ngcontent-%COMP%]{grid-area:main;justify-self:stretch;background-color:var(--background-default);color:var(--foreground-default);overflow:auto}.navArea[_ngcontent-%COMP%]{grid-area:nav;justify-self:stretch;background-color:var(--background-secondary);color:var(--foreground-default)}.footerArea[_ngcontent-%COMP%]{grid-area:footer;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.headerArea[_ngcontent-%COMP%]{grid-area:header;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.mainView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.rightAlign[_ngcontent-%COMP%]{float:right}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.spaceBetween[_ngcontent-%COMP%]{justify-content:space-between!important}']}),t})(),Bz=(()=>{class t{constructor(e,n,r,a,o,s,l,c,u){this.globalService=e,this.gameLoopService=n,this.lookupService=r,this.specializationService=a,this.themeService=o,this.raceLogicService=s,this.deploymentService=l,this.versionControlService=c,this.utilityService=u,this.title="Cultura",this.newGame=!0,this.saveTime=0,this.saveFrequency=20,this.racingSaveFrequency=120}ngOnInit(){var e=this,n=localStorage.getItem("culturaIdleGameData");if((null==n||0===n.length)&&(n=localStorage.getItem("gameData")),null!=n){var r=LZString.decompressFromBase64(n),a=JSON.parse(r);null!=a&&(this.newGame=!1,this.globalService.globalVar=mD(Ln,a),this.loadStartup())}this.deploymentService.setDevMode();var s=this.deploymentService.devModeActive;(this.newGame||this.deploymentService.forceStartNewGame)&&this.globalService.initializeGlobalVariables(),s&&(this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.devModeInitialize(50)),this.versionControlService.updatePlayerVersion(),this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=vr(function*(d){e.gameCheckup(d),e.saveTime+=d;var m=e.saveFrequency;e.globalService.globalVar.userIsRacing&&(m=e.racingSaveFrequency),e.saveTime>=m&&(e.saveTime=0,e.saveGame());performance.now()});return function(d){return u.apply(this,arguments)}}()),this.gameLoopService.Update()}gameCheckup(e){if(null!=this.globalService.globalVar.animals){this.globalService.globalVar.animals.filter(a=>a.isAvailable).forEach(a=>{a.canTrain=this.lookupService.canAnimalTrain(a)});var n=this.globalService.globalVar.animals.filter(a=>a.isAvailable&&null!=a.currentTraining);n.length>0&&n.forEach(a=>{var o;if(null!=a.currentTraining&&a.canTrain)for(a.currentTraining.timeTrained+=e,this.specializationService.handleAttractionRevenue(e,a);null!==a.currentTraining&&a.currentTraining.timeTrained>=a.currentTraining.timeToComplete;){var s=this.globalService.globalVar.barns.find(u=>u.barnNumber===a.associatedBarnNumber),l=0;null!=s&&s.barnUpgrades.specialization===Bt.BreedingGrounds&&(l=s.barnUpgrades.specializationLevel),null!=s&&s.barnUpgrades.specialization===Bt.ResearchCenter?this.specializationService.handleResearchCenterStatIncrease(a,s):a.increaseStatsFromCurrentTraining(),this.globalService.calculateAnimalRacingStats(a);var c=this.lookupService.getTrainingBreedGaugeIncrease(l,a);this.globalService.IncreaseAnimalBreedGauge(a,c),a.currentTraining.timeTrained-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining<=0&&(a.currentTraining=null),null!=a.queuedTraining&&(null!==a.currentTraining&&a.currentTraining.trainingTimeRemaining>0&&(a.queuedTraining.timeTrained+=null===(o=a.currentTraining)||void 0===o?void 0:o.timeTrained),a.currentTraining=a.queuedTraining,a.queuedTraining=null)}});var r=this.globalService.globalVar.incubator;null!=r&&null!=r.assignedAnimal&&null!=r.assignedTrait&&(r.timeTrained+=e,r.timeTrained>=r.timeToComplete&&(r.assignedAnimal.trait=r.assignedTrait,this.globalService.calculateAnimalRacingStats(r.assignedAnimal),r.assignedAnimal.canTrain=!0,r.timeTrained=0,r.assignedAnimal=null,r.assignedTrait=null)),this.handleFreeRaceTimer(e),this.handleGrandPrix(e)}}handleGrandPrix(e){var n=!1;if(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime&&(n=!0,this.globalService.globalVar.eventRaceData.initialSetupComplete&&(this.globalService.globalVar.eventRaceData.remainingEventRaceTime>0?(this.globalService.globalVar.eventRaceData.segmentTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime,this.globalService.globalVar.eventRaceData.overallTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime):this.globalService.globalVar.eventRaceData.isCatchingUp||(this.globalService.globalVar.eventRaceData=new Bi)),!this.globalService.globalVar.eventRaceData.isCatchingUp&&0===this.globalService.globalVar.eventRaceData.remainingEventRaceTime))this.globalService.globalVar.eventRaceData.initialSetupComplete=!1;else{if(!this.globalService.globalVar.eventRaceData.initialSetupComplete&&(this.globalService.initialGrandPrixSetup("Z"),this.globalService.globalVar.eventRaceData.initialSetupComplete=!0,this.globalService.globalVar.notifications.isEventRaceNowActive=!0,this.globalService.globalVar.settings.get("autoStartEventRace")&&!1===this.globalService.globalVar.eventRaceData.isRunning)){var r=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();if(this.globalService.globalVar.eventRaceData.segmentTimeCounter=r,this.globalService.globalVar.eventRaceData.overallTimeCounter=r,null!=(a=this.globalService.getGrandPrixRacingAnimal()).type){if(!this.globalService.globalVar.eventRaceData.animalData.some(u=>u.isCurrentlyRacing)){var o=this.globalService.globalVar.eventRaceData.animalData.find(u=>u.associatedAnimalType==a.type);void 0!==o&&(o.isCurrentlyRacing=!0)}this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(a),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(a),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}}if(this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&this.globalService.increaseGrandPrixRaceRank(),this.globalService.globalVar.eventRaceData.isRunning){if(null==this.globalService.globalVar.animalDecks.find(u=>u.isEventDeck))return;n||(this.globalService.globalVar.eventRaceData.segmentTimeCounter+=e,this.globalService.globalVar.eventRaceData.overallTimeCounter+=e),this.globalService.globalVar.eventRaceData.remainingEventRaceTime=this.globalService.getRemainingEventRaceTime(),this.globalService.getTimeToEventRace()>0&&this.globalService.globalVar.eventRaceData.bonusTime>0&&(this.globalService.globalVar.eventRaceData.bonusTime-=e,this.globalService.globalVar.eventRaceData.bonusTime<=0&&(this.globalService.globalVar.eventRaceData.bonusTime=0));var l=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60;if(this.globalService.globalVar.eventRaceData.isCatchingUp=this.globalService.globalVar.eventRaceData.segmentTimeCounter>=2*l,this.globalService.globalVar.eventRaceData.segmentTimeCounter>=l)if(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1,this.globalService.globalVar.eventRaceData.segmentTimeCounter-=l,this.globalService.globalVar.eventRaceData.distanceCovered+=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.distanceCovered,this.globalService.globalVar.eventRaceData.previousRaceSegment=this.globalService.globalVar.eventRaceData.currentRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.previousRaceSegment.reduceExportSize(),this.globalService.globalVar.eventRaceData.distanceCovered>=this.globalService.globalVar.eventRaceData.totalDistance)this.globalService.globalVar.eventRaceData.distanceCovered=this.globalService.globalVar.eventRaceData.totalDistance,this.grandPrixRaceCompleted();else{var a;this.checkForEventRelayAnimal()&&this.resetEventAbilityUseCounts(),void 0!==(a=this.globalService.getGrandPrixRacingAnimal()).type&&void 0!==a.name&&(this.globalService.globalVar.eventRaceData.isLoading=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.globalVar.eventRaceData.nextRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.nextRaceSegment),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(a),this.globalService.globalVar.eventRaceData.isLoading=!1)}this.checkForGrandPrixRewards()}else this.globalService.globalVar.eventRaceData.isCatchingUp=!1;this.updateExhaustionAndMorale(e),this.updateWeatherCluster(e)}}grandPrixRaceCompleted(){this.globalService.globalVar.eventRaceData.isGrandPrixCompleted=!0,this.globalService.stopGrandPrixRace()}updateExhaustionAndMorale(e){this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter+=e;var n=300,r=this.globalService.globalVar.modifiers.find(s=>"exhaustionGainTimerCapGrandPrixModifier"===s.text);null!=r&&(n=r.value);var a=.02,o=this.globalService.globalVar.modifiers.find(s=>"exhaustionGainGrandPrixModifier"===s.text);null!=o&&(a=o.value),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter>n&&(this.globalService.globalVar.eventRaceData.animalData.forEach(s=>{s.exhaustionStatReduction+=a,s.exhaustionStatReduction>=1&&(s.exhaustionStatReduction=1),s.morale<1&&(s.morale+=a)}),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter-=n)}updateWeatherCluster(e){this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter+=e;var n=7200,r=this.globalService.globalVar.modifiers.find(a=>"weatherClusterTimerCapGrandPrixModifier"===a.text);null!=r&&(n=r.value),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter>n&&(this.globalService.globalVar.eventRaceData.weatherCluster=this.globalService.getRandomGrandPrixWeatherCluster(void 0,this.globalService.globalVar.eventRaceData.weatherCluster),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter-=n)}checkForEventRelayAnimal(){var e=!1;if(this.globalService.globalVar.eventRaceData.animalData.some(d=>d.isSetToRelay))this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1,d.isSetToRelay&&(d.isCurrentlyRacing=!0,d.isSetToRelay=!1,this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===z.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0))});else{var n=this.globalService.getGrandPrixRacingAnimal(),r=this.globalService.getExhaustionOfAnimal(n.type),a=this.lookupService.getBreedLevelRequiredForGrandPrix();if(void 0!==r&&r<.5){var o=this.globalService.globalVar.animalDecks.find(d=>d.isEventDeck);if(null!=o){var s=null==o?void 0:o.selectedAnimals.filter(d=>d.breedLevel>=a);if((s=s.filter(d=>{var m=this.globalService.globalVar.eventRaceData.animalData.find(_=>_.associatedAnimalType===d.type);if(null!=m){var v=this.globalService.globalVar.animals.find(_=>_.type===d.type);return m.exhaustionStatReduction>=.5&&!this.globalService.shouldShowSlowSegmentWarning(v)||m.associatedAnimalType===n.type}return!1})).forEach(d=>{console.log(d.name)}),s.length>1){var l=0,c=!1;if(s.forEach(d=>{d.type===n.type&&(c=!0),c||(l+=1)}),c||(l=-1),this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1}),l>-1){var u=l+1;u===s.length&&(u=0),this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.associatedAnimalType===s[u].type&&(d.isCurrentlyRacing=!0,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===z.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s[u]))})}else this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.associatedAnimalType===s[0].type&&(d.isCurrentlyRacing=!0,e=!0,this.lookupService.getCourseTypeFromAnimalType(d.associatedAnimalType)===z.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s[0]))});this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1}else this.globalService.globalVar.eventRaceData.animalData.forEach(d=>{d.isCurrentlyRacing=!1}),this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalService.globalVar.eventRaceData.isRunning=!1,this.globalService.globalVar.eventRaceData.overallTimeCounter-=this.globalService.globalVar.eventRaceData.segmentTimeCounter,this.globalService.globalVar.eventRaceData.segmentTimeCounter=0,this.globalService.globalVar.eventRaceData.currentRaceSegment.reduceExportSize()}}}return e}resetEventAbilityUseCounts(){null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.eventAbilityData||this.globalService.globalVar.eventRaceData.eventAbilityData.resetUseCounts()}checkForGrandPrixRewards(){var e=this.globalService.globalVar.eventRaceData.distanceCovered,n=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),r=100,a=this.globalService.globalVar.modifiers.find(re=>"grandPrixCoinRewardModifier"===re.text);null!=a&&(r=a.value);var o=5,s=this.globalService.globalVar.modifiers.find(re=>"grandPrixRenownRewardModifier"===re.text);null!=s&&(o=s.value);var l=5e6,c=this.globalService.globalVar.modifiers.find(re=>"metersPerCoinsGrandPrixModifier"===re.text);null!=c&&(l=c.value);var u=2e7,d=this.globalService.globalVar.modifiers.find(re=>"metersPerRenownGrandPrixModifier"===re.text);null!=d&&(u=d.value);var m=5e7,v=this.globalService.globalVar.modifiers.find(re=>"grandPrixToken1MeterModifier"===re.text);null!=v&&(m=v.value);var _=5e7,y=this.globalService.globalVar.modifiers.find(re=>"grandPrixToken2MeterModifier"===re.text);null!=y&&(_=y.value);var S=5e7,D=this.globalService.globalVar.modifiers.find(re=>"grandPrixToken3MeterModifier"===re.text);null!=D&&(S=D.value);var w=5e7,T=this.globalService.globalVar.modifiers.find(re=>"grandPrixToken4MeterModifier"===re.text);null!=T&&(w=T.value);var ee,G=this.globalService.globalVar.eventRaceData.totalDistance/(u*n);e>=l*n*(this.globalService.globalVar.eventRaceData.coinRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.coinRewardsObtained<this.globalService.globalVar.eventRaceData.totalDistance/(l*n)&&(this.globalService.globalVar.eventRaceData.coinRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(re=>"Coins"===re.name))&&(ee.amount+=r),this.lookupService.addResourceToResourceList(new pe("Coins",r,Y.Resources),this.globalService.globalVar.previousEventRewards)),e>=u*n*(this.globalService.globalVar.eventRaceData.renownRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.renownRewardsObtained<G&&(this.globalService.globalVar.eventRaceData.renownRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(ce=>"Renown"===ce.name))&&(ee.amount+=o),this.lookupService.addResourceToResourceList(new pe("Renown",o,Y.Progression),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=0&&e>=m*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(ce=>"Tokens"===ce.name))?ee.amount+=1*n:this.globalService.globalVar.resources.push(new pe("Tokens",1*n,Y.Resources)),this.lookupService.addResourceToResourceList(new pe("Tokens",1*n,Y.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=1&&e>=_*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(ce=>"Tokens"===ce.name))?ee.amount+=2*n:this.globalService.globalVar.resources.push(new pe("Tokens",2*n,Y.Resources)),this.lookupService.addResourceToResourceList(new pe("Tokens",2*n,Y.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=2&&e>=S*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(ce=>"Tokens"===ce.name))?ee.amount+=3*n:this.globalService.globalVar.resources.push(new pe("Tokens",3*n,Y.Resources)),this.lookupService.addResourceToResourceList(new pe("Tokens",3*n,Y.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=3&&e>=w*n&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(ee=this.globalService.globalVar.resources.find(ce=>"Tokens"===ce.name))?ee.amount+=4*n:this.globalService.globalVar.resources.push(new pe("Tokens",4*n,Y.Resources)),this.lookupService.addResourceToResourceList(new pe("Tokens",4*n,Y.Resources),this.globalService.globalVar.previousEventRewards))}handleFreeRaceTimer(e){if(this.globalService.globalVar.freeRaceTimePeriodCounter+=e,!this.globalService.globalVar.userIsRacing){var n=300,r=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==r&&(n=r.value);var a=3600,o=this.globalService.globalVar.modifiers.find(s=>"autoFreeRacesMaxIdleTimePeriodModifier"===s.text);for(void 0!==o&&(a=o.value);this.globalService.globalVar.freeRaceTimePeriodCounter>=n&&a>0;)this.globalService.globalVar.freeRaceTimePeriodCounter>a&&(this.globalService.globalVar.freeRaceTimePeriodCounter=a),this.globalService.globalVar.freeRaceTimePeriodCounter-=n,a-=n,this.globalService.globalVar.freeRaceCounter=0,this.globalService.globalVar.autoFreeRaceCounter=0,this.handleAutoFreeRace(e)}}handleAutoFreeRace(e){var n=this.lookupService.getResourceByName("Team Manager");if(null==n&&(n=0),0!==n&&this.globalService.globalVar.animalDecks.some(d=>d.autoRunFreeRace)){var r=this.globalService.globalVar.animalDecks.find(d=>d.autoRunFreeRace);if(null!=r)for(var a=n-this.globalService.globalVar.autoFreeRaceCounter,o=this.lookupService.getTotalFreeRacesPerPeriod(),s=0;s<a;s++){if(this.globalService.globalVar.freeRaceCounter>=o)return;this.globalService.globalVar.autoFreeRaceCounter+=1,this.globalService.globalVar.freeRaceCounter+=1;var l=this.globalService.generateFreeRace(),c=!0;l.raceLegs.forEach(d=>{(null==r?void 0:r.selectedAnimals.some(m=>m.raceCourseType===d.courseType))||(c=!1)}),c&&this.raceLogicService.runRace(l)}}}saveGame(){if("undefined"!=typeof Worker){const r=new Worker(q.tu(new URL(q.p+q.u(151),q.b)));r.onmessage=({data:a})=>{localStorage.setItem("culturaIdleGameData",a),r.terminate()},r.postMessage(this.globalService.globalVar)}else{var e=JSON.stringify(this.globalService.globalVar),n=LZString.compressToBase64(e);localStorage.setItem("culturaIdleGameData",n)}}loadStartup(){var e=this.globalService.globalVar.settings.get("theme");null!=e&&this.themeService.setActiveTheme(e)}}return t.\u0275fac=function(e){return new(e||t)(P(St),P(mi),P(hn),P(Xv),P(kl),P(Yv),P(vD),P(Qv),P(Li))},t.\u0275cmp=lt({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"grayTheme"]],template:function(e,n){1&e&&(f(0,"div",0),x(1,"app-main"),h(),x(2,"router-outlet"))},directives:[Fz,Dv],styles:[""]}),t})(),Lz=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=bn({type:t,bootstrap:[Bz]}),t.\u0275inj=fn({providers:[St,kl],imports:[[UV,h4,V6,mr,aT,ZF]]}),t})();(function bO(){fw=!1})(),BV().bootstrapModule(Lz).catch(t=>console.error(t))},7466:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var H=W,ae=H.lib.BlockCipher,he=H.algo,Z=[],ne=[],I=[],k=[],V=[],E=[],O=[],A=[],F=[],j=[];!function(){for(var U=[],$=0;$<256;$++)U[$]=$<128?$<<1:$<<1^283;var de=0,te=0;for($=0;$<256;$++){var le=te^te<<1^te<<2^te<<3^te<<4;Z[de]=le=le>>>8^255&le^99,ne[le]=de;var Ae,ue=U[de],Se=U[ue],_e=U[Se];I[de]=(Ae=257*U[le]^16843008*le)<<24|Ae>>>8,k[de]=Ae<<16|Ae>>>16,V[de]=Ae<<8|Ae>>>24,E[de]=Ae,O[le]=(Ae=16843009*_e^65537*Se^257*ue^16843008*de)<<24|Ae>>>8,A[le]=Ae<<16|Ae>>>16,F[le]=Ae<<8|Ae>>>24,j[le]=Ae,de?(de=ue^U[U[U[_e^ue]]],te^=U[U[te]]):de=te=1}}();var se=[0,1,2,4,8,16,32,64,128,27,54],ie=he.AES=ae.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var $=this._keyPriorReset=this._key,de=$.words,te=$.sigBytes/4,ue=4*((this._nRounds=te+6)+1),Se=this._keySchedule=[],_e=0;_e<ue;_e++)_e<te?Se[_e]=de[_e]:(U=Se[_e-1],_e%te?te>6&&_e%te==4&&(U=Z[U>>>24]<<24|Z[U>>>16&255]<<16|Z[U>>>8&255]<<8|Z[255&U]):(U=Z[(U=U<<8|U>>>24)>>>24]<<24|Z[U>>>16&255]<<16|Z[U>>>8&255]<<8|Z[255&U],U^=se[_e/te|0]<<24),Se[_e]=Se[_e-te]^U);for(var Ae=this._invKeySchedule=[],Be=0;Be<ue;Be++){if(_e=ue-Be,Be%4)var U=Se[_e];else U=Se[_e-4];Ae[Be]=Be<4||_e<=4?U:O[Z[U>>>24]]^A[Z[U>>>16&255]]^F[Z[U>>>8&255]]^j[Z[255&U]]}}},encryptBlock:function(U,$){this._doCryptBlock(U,$,this._keySchedule,I,k,V,E,Z)},decryptBlock:function(U,$){var de=U[$+1];U[$+1]=U[$+3],U[$+3]=de,this._doCryptBlock(U,$,this._invKeySchedule,O,A,F,j,ne),de=U[$+1],U[$+1]=U[$+3],U[$+3]=de},_doCryptBlock:function(U,$,de,te,le,ue,Se,_e){for(var Ae=this._nRounds,Be=U[$]^de[0],ge=U[$+1]^de[1],xe=U[$+2]^de[2],Ie=U[$+3]^de[3],Me=4,at=1;at<Ae;at++){var Oe=te[Be>>>24]^le[ge>>>16&255]^ue[xe>>>8&255]^Se[255&Ie]^de[Me++],Ot=te[ge>>>24]^le[xe>>>16&255]^ue[Ie>>>8&255]^Se[255&Be]^de[Me++],Yt=te[xe>>>24]^le[Ie>>>16&255]^ue[Be>>>8&255]^Se[255&ge]^de[Me++],Ce=te[Ie>>>24]^le[Be>>>16&255]^ue[ge>>>8&255]^Se[255&xe]^de[Me++];Be=Oe,ge=Ot,xe=Yt,Ie=Ce}Oe=(_e[Be>>>24]<<24|_e[ge>>>16&255]<<16|_e[xe>>>8&255]<<8|_e[255&Ie])^de[Me++],Ot=(_e[ge>>>24]<<24|_e[xe>>>16&255]<<16|_e[Ie>>>8&255]<<8|_e[255&Be])^de[Me++],Yt=(_e[xe>>>24]<<24|_e[Ie>>>16&255]<<16|_e[Be>>>8&255]<<8|_e[255&ge])^de[Me++],Ce=(_e[Ie>>>24]<<24|_e[Be>>>16&255]<<16|_e[ge>>>8&255]<<8|_e[255&xe])^de[Me++],U[$]=Oe,U[$+1]=Ot,U[$+2]=Yt,U[$+3]=Ce},keySize:8});H.AES=ae._createHelper(ie)}(),W.AES)},3057:function(ye,Te,q){var J,ae,he,Z,ne,I,V,O,A,j,se,ie,$,te,ue,Se,Ae,Be,W;ye.exports=(W=q(7585),q(7865),void(W.lib.Cipher||(J=W,ae=J.lib,he=ae.Base,Z=ae.WordArray,ne=ae.BufferedBlockAlgorithm,I=J.enc,V=I.Base64,O=J.algo.EvpKDF,A=ae.Cipher=ne.extend({cfg:he.extend(),createEncryptor:function(ge,xe){return this.create(this._ENC_XFORM_MODE,ge,xe)},createDecryptor:function(ge,xe){return this.create(this._DEC_XFORM_MODE,ge,xe)},init:function(ge,xe,Ie){this.cfg=this.cfg.extend(Ie),this._xformMode=ge,this._key=xe,this.reset()},reset:function(){ne.reset.call(this),this._doReset()},process:function(ge){return this._append(ge),this._process()},finalize:function(ge){return ge&&this._append(ge),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ge(xe){return"string"==typeof xe?Be:Se}return function(xe){return{encrypt:function(Ie,Me,at){return ge(Me).encrypt(xe,Ie,Me,at)},decrypt:function(Ie,Me,at){return ge(Me).decrypt(xe,Ie,Me,at)}}}}()}),ae.StreamCipher=A.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),j=J.mode={},se=ae.BlockCipherMode=he.extend({createEncryptor:function(ge,xe){return this.Encryptor.create(ge,xe)},createDecryptor:function(ge,xe){return this.Decryptor.create(ge,xe)},init:function(ge,xe){this._cipher=ge,this._iv=xe}}),ie=j.CBC=function(){var ge=se.extend();function xe(Ie,Me,at){var Oe,Ot=this._iv;Ot?(Oe=Ot,this._iv=undefined):Oe=this._prevBlock;for(var Yt=0;Yt<at;Yt++)Ie[Me+Yt]^=Oe[Yt]}return ge.Encryptor=ge.extend({processBlock:function(Ie,Me){var at=this._cipher,Oe=at.blockSize;xe.call(this,Ie,Me,Oe),at.encryptBlock(Ie,Me),this._prevBlock=Ie.slice(Me,Me+Oe)}}),ge.Decryptor=ge.extend({processBlock:function(Ie,Me){var at=this._cipher,Oe=at.blockSize,Ot=Ie.slice(Me,Me+Oe);at.decryptBlock(Ie,Me),xe.call(this,Ie,Me,Oe),this._prevBlock=Ot}}),ge}(),$=(J.pad={}).Pkcs7={pad:function(ge,xe){for(var Ie=4*xe,Me=Ie-ge.sigBytes%Ie,at=Me<<24|Me<<16|Me<<8|Me,Oe=[],Ot=0;Ot<Me;Ot+=4)Oe.push(at);var Yt=Z.create(Oe,Me);ge.concat(Yt)},unpad:function(ge){ge.sigBytes-=255&ge.words[ge.sigBytes-1>>>2]}},ae.BlockCipher=A.extend({cfg:A.cfg.extend({mode:ie,padding:$}),reset:function(){var ge;A.reset.call(this);var xe=this.cfg,Ie=xe.iv,Me=xe.mode;this._xformMode==this._ENC_XFORM_MODE?ge=Me.createEncryptor:(ge=Me.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==ge?this._mode.init(this,Ie&&Ie.words):(this._mode=ge.call(Me,this,Ie&&Ie.words),this._mode.__creator=ge)},_doProcessBlock:function(ge,xe){this._mode.processBlock(ge,xe)},_doFinalize:function(){var ge,xe=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(xe.pad(this._data,this.blockSize),ge=this._process(!0)):(ge=this._process(!0),xe.unpad(ge)),ge},blockSize:4}),te=ae.CipherParams=he.extend({init:function(ge){this.mixIn(ge)},toString:function(ge){return(ge||this.formatter).stringify(this)}}),ue=(J.format={}).OpenSSL={stringify:function(ge){var Ie=ge.ciphertext,Me=ge.salt;return(Me?Z.create([1398893684,1701076831]).concat(Me).concat(Ie):Ie).toString(V)},parse:function(ge){var xe,Ie=V.parse(ge),Me=Ie.words;return 1398893684==Me[0]&&1701076831==Me[1]&&(xe=Z.create(Me.slice(2,4)),Me.splice(0,4),Ie.sigBytes-=16),te.create({ciphertext:Ie,salt:xe})}},Se=ae.SerializableCipher=he.extend({cfg:he.extend({format:ue}),encrypt:function(ge,xe,Ie,Me){Me=this.cfg.extend(Me);var at=ge.createEncryptor(Ie,Me),Oe=at.finalize(xe),Ot=at.cfg;return te.create({ciphertext:Oe,key:Ie,iv:Ot.iv,algorithm:ge,mode:Ot.mode,padding:Ot.padding,blockSize:ge.blockSize,formatter:Me.format})},decrypt:function(ge,xe,Ie,Me){return Me=this.cfg.extend(Me),xe=this._parse(xe,Me.format),ge.createDecryptor(Ie,Me).finalize(xe.ciphertext)},_parse:function(ge,xe){return"string"==typeof ge?xe.parse(ge,this):ge}}),Ae=(J.kdf={}).OpenSSL={execute:function(ge,xe,Ie,Me){Me||(Me=Z.random(8));var at=O.create({keySize:xe+Ie}).compute(ge,Me),Oe=Z.create(at.words.slice(xe),4*Ie);return at.sigBytes=4*xe,te.create({key:at,iv:Oe,salt:Me})}},Be=ae.PasswordBasedCipher=Se.extend({cfg:Se.cfg.extend({kdf:Ae}),encrypt:function(ge,xe,Ie,Me){var at=(Me=this.cfg.extend(Me)).kdf.execute(Ie,ge.keySize,ge.ivSize);Me.iv=at.iv;var Oe=Se.encrypt.call(this,ge,xe,at.key,Me);return Oe.mixIn(at),Oe},decrypt:function(ge,xe,Ie,Me){Me=this.cfg.extend(Me),xe=this._parse(xe,Me.format);var at=Me.kdf.execute(Ie,ge.keySize,ge.ivSize,xe.salt);return Me.iv=at.iv,Se.decrypt.call(this,ge,xe,at.key,Me)}}))))},7585:function(ye,Te,q){var W;ye.exports=(W=W||function(H,J){var ae;if("undefined"!=typeof window&&window.crypto&&(ae=window.crypto),"undefined"!=typeof self&&self.crypto&&(ae=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(ae=globalThis.crypto),!ae&&"undefined"!=typeof window&&window.msCrypto&&(ae=window.msCrypto),!ae&&"undefined"!=typeof global&&global.crypto&&(ae=global.crypto),!ae)try{ae=q(2480)}catch(U){}var he=function(){if(ae){if("function"==typeof ae.getRandomValues)try{return ae.getRandomValues(new Uint32Array(1))[0]}catch(U){}if("function"==typeof ae.randomBytes)try{return ae.randomBytes(4).readInt32LE()}catch(U){}}throw new Error("Native crypto module could not be used to get secure random number.")},Z=Object.create||function(){function U(){}return function($){var de;return U.prototype=$,de=new U,U.prototype=null,de}}(),ne={},I=ne.lib={},k=I.Base={extend:function(U){var $=Z(this);return U&&$.mixIn(U),(!$.hasOwnProperty("init")||this.init===$.init)&&($.init=function(){$.$super.init.apply(this,arguments)}),$.init.prototype=$,$.$super=this,$},create:function(){var U=this.extend();return U.init.apply(U,arguments),U},init:function(){},mixIn:function(U){for(var $ in U)U.hasOwnProperty($)&&(this[$]=U[$]);U.hasOwnProperty("toString")&&(this.toString=U.toString)},clone:function(){return this.init.prototype.extend(this)}},V=I.WordArray=k.extend({init:function(U,$){U=this.words=U||[],this.sigBytes=null!=$?$:4*U.length},toString:function(U){return(U||O).stringify(this)},concat:function(U){var $=this.words,de=U.words,te=this.sigBytes,le=U.sigBytes;if(this.clamp(),te%4)for(var ue=0;ue<le;ue++)$[te+ue>>>2]|=(de[ue>>>2]>>>24-ue%4*8&255)<<24-(te+ue)%4*8;else for(var _e=0;_e<le;_e+=4)$[te+_e>>>2]=de[_e>>>2];return this.sigBytes+=le,this},clamp:function(){var U=this.words,$=this.sigBytes;U[$>>>2]&=4294967295<<32-$%4*8,U.length=H.ceil($/4)},clone:function(){var U=k.clone.call(this);return U.words=this.words.slice(0),U},random:function(U){for(var $=[],de=0;de<U;de+=4)$.push(he());return new V.init($,U)}}),E=ne.enc={},O=E.Hex={stringify:function(U){for(var $=U.words,de=U.sigBytes,te=[],le=0;le<de;le++){var ue=$[le>>>2]>>>24-le%4*8&255;te.push((ue>>>4).toString(16)),te.push((15&ue).toString(16))}return te.join("")},parse:function(U){for(var $=U.length,de=[],te=0;te<$;te+=2)de[te>>>3]|=parseInt(U.substr(te,2),16)<<24-te%8*4;return new V.init(de,$/2)}},A=E.Latin1={stringify:function(U){for(var $=U.words,de=U.sigBytes,te=[],le=0;le<de;le++)te.push(String.fromCharCode($[le>>>2]>>>24-le%4*8&255));return te.join("")},parse:function(U){for(var $=U.length,de=[],te=0;te<$;te++)de[te>>>2]|=(255&U.charCodeAt(te))<<24-te%4*8;return new V.init(de,$)}},F=E.Utf8={stringify:function(U){try{return decodeURIComponent(escape(A.stringify(U)))}catch($){throw new Error("Malformed UTF-8 data")}},parse:function(U){return A.parse(unescape(encodeURIComponent(U)))}},j=I.BufferedBlockAlgorithm=k.extend({reset:function(){this._data=new V.init,this._nDataBytes=0},_append:function(U){"string"==typeof U&&(U=F.parse(U)),this._data.concat(U),this._nDataBytes+=U.sigBytes},_process:function(U){var $,de=this._data,te=de.words,le=de.sigBytes,ue=this.blockSize,_e=le/(4*ue),Ae=(_e=U?H.ceil(_e):H.max((0|_e)-this._minBufferSize,0))*ue,Be=H.min(4*Ae,le);if(Ae){for(var ge=0;ge<Ae;ge+=ue)this._doProcessBlock(te,ge);$=te.splice(0,Ae),de.sigBytes-=Be}return new V.init($,Be)},clone:function(){var U=k.clone.call(this);return U._data=this._data.clone(),U},_minBufferSize:0}),ie=(I.Hasher=j.extend({cfg:k.extend(),init:function(U){this.cfg=this.cfg.extend(U),this.reset()},reset:function(){j.reset.call(this),this._doReset()},update:function(U){return this._append(U),this._process(),this},finalize:function(U){return U&&this._append(U),this._doFinalize()},blockSize:16,_createHelper:function(U){return function($,de){return new U.init(de).finalize($)}},_createHmacHelper:function(U){return function($,de){return new ie.HMAC.init(U,de).finalize($)}}}),ne.algo={});return ne}(Math),W)},8319:function(ye,Te,q){var W,ae;ye.exports=(W=q(7585),ae=W.lib.WordArray,W.enc.Base64={stringify:function(I){var k=I.words,V=I.sigBytes,E=this._map;I.clamp();for(var O=[],A=0;A<V;A+=3)for(var ie=(k[A>>>2]>>>24-A%4*8&255)<<16|(k[A+1>>>2]>>>24-(A+1)%4*8&255)<<8|k[A+2>>>2]>>>24-(A+2)%4*8&255,U=0;U<4&&A+.75*U<V;U++)O.push(E.charAt(ie>>>6*(3-U)&63));var $=E.charAt(64);if($)for(;O.length%4;)O.push($);return O.join("")},parse:function(I){var k=I.length,V=this._map,E=this._reverseMap;if(!E){E=this._reverseMap=[];for(var O=0;O<V.length;O++)E[V.charCodeAt(O)]=O}var A=V.charAt(64);if(A){var F=I.indexOf(A);-1!==F&&(k=F)}return function ne(I,k,V){for(var E=[],O=0,A=0;A<k;A++)if(A%4){var F=V[I.charCodeAt(A-1)]<<A%4*2,j=V[I.charCodeAt(A)]>>>6-A%4*2;E[O>>>2]|=(F|j)<<24-O%4*8,O++}return ae.create(E,O)}(I,k,E)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},W.enc.Base64)},4410:function(ye,Te,q){var W,ae;ye.exports=(W=q(7585),ae=W.lib.WordArray,W.enc.Base64url={stringify:function(I,k=!0){var V=I.words,E=I.sigBytes,O=k?this._safe_map:this._map;I.clamp();for(var A=[],F=0;F<E;F+=3)for(var U=(V[F>>>2]>>>24-F%4*8&255)<<16|(V[F+1>>>2]>>>24-(F+1)%4*8&255)<<8|V[F+2>>>2]>>>24-(F+2)%4*8&255,$=0;$<4&&F+.75*$<E;$++)A.push(O.charAt(U>>>6*(3-$)&63));var de=O.charAt(64);if(de)for(;A.length%4;)A.push(de);return A.join("")},parse:function(I,k=!0){var V=I.length,E=k?this._safe_map:this._map,O=this._reverseMap;if(!O){O=this._reverseMap=[];for(var A=0;A<E.length;A++)O[E.charCodeAt(A)]=A}var F=E.charAt(64);if(F){var j=I.indexOf(F);-1!==j&&(V=j)}return function ne(I,k,V){for(var E=[],O=0,A=0;A<k;A++)if(A%4){var F=V[I.charCodeAt(A-1)]<<A%4*2,j=V[I.charCodeAt(A)]>>>6-A%4*2;E[O>>>2]|=(F|j)<<24-O%4*8,O++}return ae.create(E,O)}(I,V,O)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},W.enc.Base64url)},9012:function(ye,Te,q){var W;ye.exports=(W=q(7585),function(){var ae=W.lib.WordArray,he=W.enc;function ne(I){return I<<8&4278255360|I>>>8&16711935}he.Utf16=he.Utf16BE={stringify:function(I){for(var k=I.words,V=I.sigBytes,E=[],O=0;O<V;O+=2)E.push(String.fromCharCode(k[O>>>2]>>>16-O%4*8&65535));return E.join("")},parse:function(I){for(var k=I.length,V=[],E=0;E<k;E++)V[E>>>1]|=I.charCodeAt(E)<<16-E%2*16;return ae.create(V,2*k)}},he.Utf16LE={stringify:function(I){for(var k=I.words,V=I.sigBytes,E=[],O=0;O<V;O+=2){var A=ne(k[O>>>2]>>>16-O%4*8&65535);E.push(String.fromCharCode(A))}return E.join("")},parse:function(I){for(var k=I.length,V=[],E=0;E<k;E++)V[E>>>1]|=ne(I.charCodeAt(E)<<16-E%2*16);return ae.create(V,2*k)}}}(),W.enc.Utf16)},7865:function(ye,Te,q){var H,J,ae,he,Z,I,W;ye.exports=(W=q(7585),q(5162),q(3764),he=(J=(H=W).lib).WordArray,I=(Z=H.algo).EvpKDF=(ae=J.Base).extend({cfg:ae.extend({keySize:4,hasher:Z.MD5,iterations:1}),init:function(k){this.cfg=this.cfg.extend(k)},compute:function(k,V){for(var E,O=this.cfg,A=O.hasher.create(),F=he.create(),j=F.words,se=O.keySize,ie=O.iterations;j.length<se;){E&&A.update(E),E=A.update(k).finalize(V),A.reset();for(var U=1;U<ie;U++)E=A.finalize(E),A.reset();F.concat(E)}return F.sigBytes=4*se,F}}),H.EvpKDF=function(k,V,E){return I.create(E).compute(k,V)},W.EvpKDF)},1847:function(ye,Te,q){var W,he,ne;ye.exports=(W=q(7585),q(3057),he=W.lib.CipherParams,ne=W.enc.Hex,W.format.Hex={stringify:function(V){return V.ciphertext.toString(ne)},parse:function(V){var E=ne.parse(V);return he.create({ciphertext:E})}},W.format.Hex)},3764:function(ye,Te,q){var W,Z;ye.exports=(W=q(7585),Z=W.enc.Utf8,void(W.algo.HMAC=W.lib.Base.extend({init:function(k,V){k=this._hasher=new k.init,"string"==typeof V&&(V=Z.parse(V));var E=k.blockSize,O=4*E;V.sigBytes>O&&(V=k.finalize(V)),V.clamp();for(var A=this._oKey=V.clone(),F=this._iKey=V.clone(),j=A.words,se=F.words,ie=0;ie<E;ie++)j[ie]^=1549556828,se[ie]^=909522486;A.sigBytes=F.sigBytes=O,this.reset()},reset:function(){var k=this._hasher;k.reset(),k.update(this._iKey)},update:function(k){return this._hasher.update(k),this},finalize:function(k){var V=this._hasher,E=V.finalize(k);return V.reset(),V.finalize(this._oKey.clone().concat(E))}})))},7206:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(401),q(7412),q(9012),q(8319),q(4410),q(9493),q(5162),q(1817),q(8769),q(3351),q(6787),q(1971),q(4973),q(3764),q(8812),q(7865),q(3057),q(4424),q(6635),q(3592),q(9354),q(7934),q(4413),q(4630),q(187),q(1691),q(3237),q(1847),q(7466),q(7243),q(486),q(8182),q(3544),W)},7412:function(ye,Te,q){var W;ye.exports=(W=q(7585),function(){if("function"==typeof ArrayBuffer){var ae=W.lib.WordArray,he=ae.init,Z=ae.init=function(ne){if(ne instanceof ArrayBuffer&&(ne=new Uint8Array(ne)),(ne instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&ne instanceof Uint8ClampedArray||ne instanceof Int16Array||ne instanceof Uint16Array||ne instanceof Int32Array||ne instanceof Uint32Array||ne instanceof Float32Array||ne instanceof Float64Array)&&(ne=new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength)),ne instanceof Uint8Array){for(var I=ne.byteLength,k=[],V=0;V<I;V++)k[V>>>2]|=ne[V]<<24-V%4*8;he.call(this,k,I)}else he.apply(this,arguments)};Z.prototype=ae}}(),W.lib.WordArray)},9493:function(ye,Te,q){var W;ye.exports=(W=q(7585),function(H){var J=W,ae=J.lib,he=ae.WordArray,Z=ae.Hasher,ne=J.algo,I=[];!function(){for(var F=0;F<64;F++)I[F]=4294967296*H.abs(H.sin(F+1))|0}();var k=ne.MD5=Z.extend({_doReset:function(){this._hash=new he.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(F,j){for(var se=0;se<16;se++){var ie=j+se,U=F[ie];F[ie]=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8)}var $=this._hash.words,de=F[j+0],te=F[j+1],le=F[j+2],ue=F[j+3],Se=F[j+4],_e=F[j+5],Ae=F[j+6],Be=F[j+7],ge=F[j+8],xe=F[j+9],Ie=F[j+10],Me=F[j+11],at=F[j+12],Oe=F[j+13],Ot=F[j+14],Yt=F[j+15],Ce=$[0],ke=$[1],ve=$[2],Re=$[3];Ce=V(Ce,ke,ve,Re,de,7,I[0]),Re=V(Re,Ce,ke,ve,te,12,I[1]),ve=V(ve,Re,Ce,ke,le,17,I[2]),ke=V(ke,ve,Re,Ce,ue,22,I[3]),Ce=V(Ce,ke,ve,Re,Se,7,I[4]),Re=V(Re,Ce,ke,ve,_e,12,I[5]),ve=V(ve,Re,Ce,ke,Ae,17,I[6]),ke=V(ke,ve,Re,Ce,Be,22,I[7]),Ce=V(Ce,ke,ve,Re,ge,7,I[8]),Re=V(Re,Ce,ke,ve,xe,12,I[9]),ve=V(ve,Re,Ce,ke,Ie,17,I[10]),ke=V(ke,ve,Re,Ce,Me,22,I[11]),Ce=V(Ce,ke,ve,Re,at,7,I[12]),Re=V(Re,Ce,ke,ve,Oe,12,I[13]),ve=V(ve,Re,Ce,ke,Ot,17,I[14]),Ce=E(Ce,ke=V(ke,ve,Re,Ce,Yt,22,I[15]),ve,Re,te,5,I[16]),Re=E(Re,Ce,ke,ve,Ae,9,I[17]),ve=E(ve,Re,Ce,ke,Me,14,I[18]),ke=E(ke,ve,Re,Ce,de,20,I[19]),Ce=E(Ce,ke,ve,Re,_e,5,I[20]),Re=E(Re,Ce,ke,ve,Ie,9,I[21]),ve=E(ve,Re,Ce,ke,Yt,14,I[22]),ke=E(ke,ve,Re,Ce,Se,20,I[23]),Ce=E(Ce,ke,ve,Re,xe,5,I[24]),Re=E(Re,Ce,ke,ve,Ot,9,I[25]),ve=E(ve,Re,Ce,ke,ue,14,I[26]),ke=E(ke,ve,Re,Ce,ge,20,I[27]),Ce=E(Ce,ke,ve,Re,Oe,5,I[28]),Re=E(Re,Ce,ke,ve,le,9,I[29]),ve=E(ve,Re,Ce,ke,Be,14,I[30]),Ce=O(Ce,ke=E(ke,ve,Re,Ce,at,20,I[31]),ve,Re,_e,4,I[32]),Re=O(Re,Ce,ke,ve,ge,11,I[33]),ve=O(ve,Re,Ce,ke,Me,16,I[34]),ke=O(ke,ve,Re,Ce,Ot,23,I[35]),Ce=O(Ce,ke,ve,Re,te,4,I[36]),Re=O(Re,Ce,ke,ve,Se,11,I[37]),ve=O(ve,Re,Ce,ke,Be,16,I[38]),ke=O(ke,ve,Re,Ce,Ie,23,I[39]),Ce=O(Ce,ke,ve,Re,Oe,4,I[40]),Re=O(Re,Ce,ke,ve,de,11,I[41]),ve=O(ve,Re,Ce,ke,ue,16,I[42]),ke=O(ke,ve,Re,Ce,Ae,23,I[43]),Ce=O(Ce,ke,ve,Re,xe,4,I[44]),Re=O(Re,Ce,ke,ve,at,11,I[45]),ve=O(ve,Re,Ce,ke,Yt,16,I[46]),Ce=A(Ce,ke=O(ke,ve,Re,Ce,le,23,I[47]),ve,Re,de,6,I[48]),Re=A(Re,Ce,ke,ve,Be,10,I[49]),ve=A(ve,Re,Ce,ke,Ot,15,I[50]),ke=A(ke,ve,Re,Ce,_e,21,I[51]),Ce=A(Ce,ke,ve,Re,at,6,I[52]),Re=A(Re,Ce,ke,ve,ue,10,I[53]),ve=A(ve,Re,Ce,ke,Ie,15,I[54]),ke=A(ke,ve,Re,Ce,te,21,I[55]),Ce=A(Ce,ke,ve,Re,ge,6,I[56]),Re=A(Re,Ce,ke,ve,Yt,10,I[57]),ve=A(ve,Re,Ce,ke,Ae,15,I[58]),ke=A(ke,ve,Re,Ce,Oe,21,I[59]),Ce=A(Ce,ke,ve,Re,Se,6,I[60]),Re=A(Re,Ce,ke,ve,Me,10,I[61]),ve=A(ve,Re,Ce,ke,le,15,I[62]),ke=A(ke,ve,Re,Ce,xe,21,I[63]),$[0]=$[0]+Ce|0,$[1]=$[1]+ke|0,$[2]=$[2]+ve|0,$[3]=$[3]+Re|0},_doFinalize:function(){var F=this._data,j=F.words,se=8*this._nDataBytes,ie=8*F.sigBytes;j[ie>>>5]|=128<<24-ie%32;var U=H.floor(se/4294967296),$=se;j[15+(ie+64>>>9<<4)]=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),j[14+(ie+64>>>9<<4)]=16711935&($<<8|$>>>24)|4278255360&($<<24|$>>>8),F.sigBytes=4*(j.length+1),this._process();for(var de=this._hash,te=de.words,le=0;le<4;le++){var ue=te[le];te[le]=16711935&(ue<<8|ue>>>24)|4278255360&(ue<<24|ue>>>8)}return de},clone:function(){var F=Z.clone.call(this);return F._hash=this._hash.clone(),F}});function V(F,j,se,ie,U,$,de){var te=F+(j&se|~j&ie)+U+de;return(te<<$|te>>>32-$)+j}function E(F,j,se,ie,U,$,de){var te=F+(j&ie|se&~ie)+U+de;return(te<<$|te>>>32-$)+j}function O(F,j,se,ie,U,$,de){var te=F+(j^se^ie)+U+de;return(te<<$|te>>>32-$)+j}function A(F,j,se,ie,U,$,de){var te=F+(se^(j|~ie))+U+de;return(te<<$|te>>>32-$)+j}J.MD5=Z._createHelper(k),J.HmacMD5=Z._createHmacHelper(k)}(Math),W.MD5)},4424:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(3057),W.mode.CFB=function(){var H=W.lib.BlockCipherMode.extend();function J(ae,he,Z,ne){var I,k=this._iv;k?(I=k.slice(0),this._iv=void 0):I=this._prevBlock,ne.encryptBlock(I,0);for(var V=0;V<Z;V++)ae[he+V]^=I[V]}return H.Encryptor=H.extend({processBlock:function(ae,he){var Z=this._cipher,ne=Z.blockSize;J.call(this,ae,he,ne,Z),this._prevBlock=ae.slice(he,he+ne)}}),H.Decryptor=H.extend({processBlock:function(ae,he){var Z=this._cipher,ne=Z.blockSize,I=ae.slice(he,he+ne);J.call(this,ae,he,ne,Z),this._prevBlock=I}}),H}(),W.mode.CFB)},3592:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(3057),W.mode.CTRGladman=function(){var H=W.lib.BlockCipherMode.extend();function J(Z){if(255==(Z>>24&255)){var ne=Z>>16&255,I=Z>>8&255,k=255&Z;255===ne?(ne=0,255===I?(I=0,255===k?k=0:++k):++I):++ne,Z=0,Z+=ne<<16,Z+=I<<8,Z+=k}else Z+=1<<24;return Z}var he=H.Encryptor=H.extend({processBlock:function(Z,ne){var I=this._cipher,k=I.blockSize,V=this._iv,E=this._counter;V&&(E=this._counter=V.slice(0),this._iv=void 0),function ae(Z){return 0===(Z[0]=J(Z[0]))&&(Z[1]=J(Z[1])),Z}(E);var O=E.slice(0);I.encryptBlock(O,0);for(var A=0;A<k;A++)Z[ne+A]^=O[A]}});return H.Decryptor=he,H}(),W.mode.CTRGladman)},6635:function(ye,Te,q){var H,J,W;ye.exports=(W=q(7585),q(3057),W.mode.CTR=(J=(H=W.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(ae,he){var Z=this._cipher,ne=Z.blockSize,I=this._iv,k=this._counter;I&&(k=this._counter=I.slice(0),this._iv=void 0);var V=k.slice(0);Z.encryptBlock(V,0),k[ne-1]=k[ne-1]+1|0;for(var E=0;E<ne;E++)ae[he+E]^=V[E]}}),H.Decryptor=J,H),W.mode.CTR)},7934:function(ye,Te,q){var H,W;ye.exports=(W=q(7585),q(3057),W.mode.ECB=((H=W.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(J,ae){this._cipher.encryptBlock(J,ae)}}),H.Decryptor=H.extend({processBlock:function(J,ae){this._cipher.decryptBlock(J,ae)}}),H),W.mode.ECB)},9354:function(ye,Te,q){var H,J,W;ye.exports=(W=q(7585),q(3057),W.mode.OFB=(J=(H=W.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(ae,he){var Z=this._cipher,ne=Z.blockSize,I=this._iv,k=this._keystream;I&&(k=this._keystream=I.slice(0),this._iv=void 0),Z.encryptBlock(k,0);for(var V=0;V<ne;V++)ae[he+V]^=k[V]}}),H.Decryptor=J,H),W.mode.OFB)},4413:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(3057),W.pad.AnsiX923={pad:function(H,J){var ae=H.sigBytes,he=4*J,Z=he-ae%he,ne=ae+Z-1;H.clamp(),H.words[ne>>>2]|=Z<<24-ne%4*8,H.sigBytes+=Z},unpad:function(H){H.sigBytes-=255&H.words[H.sigBytes-1>>>2]}},W.pad.Ansix923)},4630:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(3057),W.pad.Iso10126={pad:function(H,J){var ae=4*J,he=ae-H.sigBytes%ae;H.concat(W.lib.WordArray.random(he-1)).concat(W.lib.WordArray.create([he<<24],1))},unpad:function(H){H.sigBytes-=255&H.words[H.sigBytes-1>>>2]}},W.pad.Iso10126)},187:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(3057),W.pad.Iso97971={pad:function(H,J){H.concat(W.lib.WordArray.create([2147483648],1)),W.pad.ZeroPadding.pad(H,J)},unpad:function(H){W.pad.ZeroPadding.unpad(H),H.sigBytes--}},W.pad.Iso97971)},3237:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(3057),W.pad.NoPadding={pad:function(){},unpad:function(){}},W.pad.NoPadding)},1691:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(3057),W.pad.ZeroPadding={pad:function(H,J){var ae=4*J;H.clamp(),H.sigBytes+=ae-(H.sigBytes%ae||ae)},unpad:function(H){var J=H.words,ae=H.sigBytes-1;for(ae=H.sigBytes-1;ae>=0;ae--)if(J[ae>>>2]>>>24-ae%4*8&255){H.sigBytes=ae+1;break}}},W.pad.ZeroPadding)},8812:function(ye,Te,q){var H,J,ae,he,Z,I,k,W;ye.exports=(W=q(7585),q(5162),q(3764),he=(J=(H=W).lib).WordArray,I=(Z=H.algo).HMAC,k=Z.PBKDF2=(ae=J.Base).extend({cfg:ae.extend({keySize:4,hasher:Z.SHA1,iterations:1}),init:function(V){this.cfg=this.cfg.extend(V)},compute:function(V,E){for(var O=this.cfg,A=I.create(O.hasher,V),F=he.create(),j=he.create([1]),se=F.words,ie=j.words,U=O.keySize,$=O.iterations;se.length<U;){var de=A.update(E).finalize(j);A.reset();for(var te=de.words,le=te.length,ue=de,Se=1;Se<$;Se++){ue=A.finalize(ue),A.reset();for(var _e=ue.words,Ae=0;Ae<le;Ae++)te[Ae]^=_e[Ae]}F.concat(de),ie[0]++}return F.sigBytes=4*U,F}}),H.PBKDF2=function(V,E,O){return k.create(O).compute(V,E)},W.PBKDF2)},3544:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var H=W,ae=H.lib.StreamCipher,Z=[],ne=[],I=[],k=H.algo.RabbitLegacy=ae.extend({_doReset:function(){var E=this._key.words,O=this.cfg.iv,A=this._X=[E[0],E[3]<<16|E[2]>>>16,E[1],E[0]<<16|E[3]>>>16,E[2],E[1]<<16|E[0]>>>16,E[3],E[2]<<16|E[1]>>>16],F=this._C=[E[2]<<16|E[2]>>>16,4294901760&E[0]|65535&E[1],E[3]<<16|E[3]>>>16,4294901760&E[1]|65535&E[2],E[0]<<16|E[0]>>>16,4294901760&E[2]|65535&E[3],E[1]<<16|E[1]>>>16,4294901760&E[3]|65535&E[0]];this._b=0;for(var j=0;j<4;j++)V.call(this);for(j=0;j<8;j++)F[j]^=A[j+4&7];if(O){var se=O.words,ie=se[0],U=se[1],$=16711935&(ie<<8|ie>>>24)|4278255360&(ie<<24|ie>>>8),de=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),te=$>>>16|4294901760&de,le=de<<16|65535&$;for(F[0]^=$,F[1]^=te,F[2]^=de,F[3]^=le,F[4]^=$,F[5]^=te,F[6]^=de,F[7]^=le,j=0;j<4;j++)V.call(this)}},_doProcessBlock:function(E,O){var A=this._X;V.call(this),Z[0]=A[0]^A[5]>>>16^A[3]<<16,Z[1]=A[2]^A[7]>>>16^A[5]<<16,Z[2]=A[4]^A[1]>>>16^A[7]<<16,Z[3]=A[6]^A[3]>>>16^A[1]<<16;for(var F=0;F<4;F++)Z[F]=16711935&(Z[F]<<8|Z[F]>>>24)|4278255360&(Z[F]<<24|Z[F]>>>8),E[O+F]^=Z[F]},blockSize:4,ivSize:2});function V(){for(var E=this._X,O=this._C,A=0;A<8;A++)ne[A]=O[A];for(O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<ne[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<ne[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<ne[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<ne[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<ne[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<ne[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<ne[6]>>>0?1:0)|0,this._b=O[7]>>>0<ne[7]>>>0?1:0,A=0;A<8;A++){var F=E[A]+O[A],j=65535&F,se=F>>>16;I[A]=((j*j>>>17)+j*se>>>15)+se*se^((4294901760&F)*F|0)+((65535&F)*F|0)}E[0]=I[0]+(I[7]<<16|I[7]>>>16)+(I[6]<<16|I[6]>>>16)|0,E[1]=I[1]+(I[0]<<8|I[0]>>>24)+I[7]|0,E[2]=I[2]+(I[1]<<16|I[1]>>>16)+(I[0]<<16|I[0]>>>16)|0,E[3]=I[3]+(I[2]<<8|I[2]>>>24)+I[1]|0,E[4]=I[4]+(I[3]<<16|I[3]>>>16)+(I[2]<<16|I[2]>>>16)|0,E[5]=I[5]+(I[4]<<8|I[4]>>>24)+I[3]|0,E[6]=I[6]+(I[5]<<16|I[5]>>>16)+(I[4]<<16|I[4]>>>16)|0,E[7]=I[7]+(I[6]<<8|I[6]>>>24)+I[5]|0}H.RabbitLegacy=ae._createHelper(k)}(),W.RabbitLegacy)},8182:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var H=W,ae=H.lib.StreamCipher,Z=[],ne=[],I=[],k=H.algo.Rabbit=ae.extend({_doReset:function(){for(var E=this._key.words,O=this.cfg.iv,A=0;A<4;A++)E[A]=16711935&(E[A]<<8|E[A]>>>24)|4278255360&(E[A]<<24|E[A]>>>8);var F=this._X=[E[0],E[3]<<16|E[2]>>>16,E[1],E[0]<<16|E[3]>>>16,E[2],E[1]<<16|E[0]>>>16,E[3],E[2]<<16|E[1]>>>16],j=this._C=[E[2]<<16|E[2]>>>16,4294901760&E[0]|65535&E[1],E[3]<<16|E[3]>>>16,4294901760&E[1]|65535&E[2],E[0]<<16|E[0]>>>16,4294901760&E[2]|65535&E[3],E[1]<<16|E[1]>>>16,4294901760&E[3]|65535&E[0]];for(this._b=0,A=0;A<4;A++)V.call(this);for(A=0;A<8;A++)j[A]^=F[A+4&7];if(O){var se=O.words,ie=se[0],U=se[1],$=16711935&(ie<<8|ie>>>24)|4278255360&(ie<<24|ie>>>8),de=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),te=$>>>16|4294901760&de,le=de<<16|65535&$;for(j[0]^=$,j[1]^=te,j[2]^=de,j[3]^=le,j[4]^=$,j[5]^=te,j[6]^=de,j[7]^=le,A=0;A<4;A++)V.call(this)}},_doProcessBlock:function(E,O){var A=this._X;V.call(this),Z[0]=A[0]^A[5]>>>16^A[3]<<16,Z[1]=A[2]^A[7]>>>16^A[5]<<16,Z[2]=A[4]^A[1]>>>16^A[7]<<16,Z[3]=A[6]^A[3]>>>16^A[1]<<16;for(var F=0;F<4;F++)Z[F]=16711935&(Z[F]<<8|Z[F]>>>24)|4278255360&(Z[F]<<24|Z[F]>>>8),E[O+F]^=Z[F]},blockSize:4,ivSize:2});function V(){for(var E=this._X,O=this._C,A=0;A<8;A++)ne[A]=O[A];for(O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<ne[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<ne[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<ne[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<ne[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<ne[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<ne[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<ne[6]>>>0?1:0)|0,this._b=O[7]>>>0<ne[7]>>>0?1:0,A=0;A<8;A++){var F=E[A]+O[A],j=65535&F,se=F>>>16;I[A]=((j*j>>>17)+j*se>>>15)+se*se^((4294901760&F)*F|0)+((65535&F)*F|0)}E[0]=I[0]+(I[7]<<16|I[7]>>>16)+(I[6]<<16|I[6]>>>16)|0,E[1]=I[1]+(I[0]<<8|I[0]>>>24)+I[7]|0,E[2]=I[2]+(I[1]<<16|I[1]>>>16)+(I[0]<<16|I[0]>>>16)|0,E[3]=I[3]+(I[2]<<8|I[2]>>>24)+I[1]|0,E[4]=I[4]+(I[3]<<16|I[3]>>>16)+(I[2]<<16|I[2]>>>16)|0,E[5]=I[5]+(I[4]<<8|I[4]>>>24)+I[3]|0,E[6]=I[6]+(I[5]<<16|I[5]>>>16)+(I[4]<<16|I[4]>>>16)|0,E[7]=I[7]+(I[6]<<8|I[6]>>>24)+I[5]|0}H.Rabbit=ae._createHelper(k)}(),W.Rabbit)},486:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var H=W,ae=H.lib.StreamCipher,he=H.algo,Z=he.RC4=ae.extend({_doReset:function(){for(var k=this._key,V=k.words,E=k.sigBytes,O=this._S=[],A=0;A<256;A++)O[A]=A;A=0;for(var F=0;A<256;A++){var j=A%E,ie=O[A];O[A]=O[F=(F+O[A]+(V[j>>>2]>>>24-j%4*8&255))%256],O[F]=ie}this._i=this._j=0},_doProcessBlock:function(k,V){k[V]^=ne.call(this)},keySize:8,ivSize:0});function ne(){for(var k=this._S,V=this._i,E=this._j,O=0,A=0;A<4;A++){var F=k[V=(V+1)%256];k[V]=k[E=(E+k[V])%256],k[E]=F,O|=k[(k[V]+k[E])%256]<<24-8*A}return this._i=V,this._j=E,O}H.RC4=ae._createHelper(Z);var I=he.RC4Drop=Z.extend({cfg:Z.cfg.extend({drop:192}),_doReset:function(){Z._doReset.call(this);for(var k=this.cfg.drop;k>0;k--)ne.call(this)}});H.RC4Drop=ae._createHelper(I)}(),W.RC4)},4973:function(ye,Te,q){var W;ye.exports=(W=q(7585),function(H){var J=W,ae=J.lib,he=ae.WordArray,Z=ae.Hasher,ne=J.algo,I=he.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),k=he.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),V=he.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),E=he.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),O=he.create([0,1518500249,1859775393,2400959708,2840853838]),A=he.create([1352829926,1548603684,1836072691,2053994217,0]),F=ne.RIPEMD160=Z.extend({_doReset:function(){this._hash=he.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(te,le){for(var ue=0;ue<16;ue++){var Se=le+ue,_e=te[Se];te[Se]=16711935&(_e<<8|_e>>>24)|4278255360&(_e<<24|_e>>>8)}var Oe,Ot,Yt,Ce,ke,ve,Re,Sn,vt,Lt,Ut,Ae=this._hash.words,Be=O.words,ge=A.words,xe=I.words,Ie=k.words,Me=V.words,at=E.words;for(ve=Oe=Ae[0],Re=Ot=Ae[1],Sn=Yt=Ae[2],vt=Ce=Ae[3],Lt=ke=Ae[4],ue=0;ue<80;ue+=1)Ut=Oe+te[le+xe[ue]]|0,Ut+=ue<16?j(Ot,Yt,Ce)+Be[0]:ue<32?se(Ot,Yt,Ce)+Be[1]:ue<48?ie(Ot,Yt,Ce)+Be[2]:ue<64?U(Ot,Yt,Ce)+Be[3]:$(Ot,Yt,Ce)+Be[4],Ut=(Ut=de(Ut|=0,Me[ue]))+ke|0,Oe=ke,ke=Ce,Ce=de(Yt,10),Yt=Ot,Ot=Ut,Ut=ve+te[le+Ie[ue]]|0,Ut+=ue<16?$(Re,Sn,vt)+ge[0]:ue<32?U(Re,Sn,vt)+ge[1]:ue<48?ie(Re,Sn,vt)+ge[2]:ue<64?se(Re,Sn,vt)+ge[3]:j(Re,Sn,vt)+ge[4],Ut=(Ut=de(Ut|=0,at[ue]))+Lt|0,ve=Lt,Lt=vt,vt=de(Sn,10),Sn=Re,Re=Ut;Ut=Ae[1]+Yt+vt|0,Ae[1]=Ae[2]+Ce+Lt|0,Ae[2]=Ae[3]+ke+ve|0,Ae[3]=Ae[4]+Oe+Re|0,Ae[4]=Ae[0]+Ot+Sn|0,Ae[0]=Ut},_doFinalize:function(){var te=this._data,le=te.words,ue=8*this._nDataBytes,Se=8*te.sigBytes;le[Se>>>5]|=128<<24-Se%32,le[14+(Se+64>>>9<<4)]=16711935&(ue<<8|ue>>>24)|4278255360&(ue<<24|ue>>>8),te.sigBytes=4*(le.length+1),this._process();for(var _e=this._hash,Ae=_e.words,Be=0;Be<5;Be++){var ge=Ae[Be];Ae[Be]=16711935&(ge<<8|ge>>>24)|4278255360&(ge<<24|ge>>>8)}return _e},clone:function(){var te=Z.clone.call(this);return te._hash=this._hash.clone(),te}});function j(te,le,ue){return te^le^ue}function se(te,le,ue){return te&le|~te&ue}function ie(te,le,ue){return(te|~le)^ue}function U(te,le,ue){return te&ue|le&~ue}function $(te,le,ue){return te^(le|~ue)}function de(te,le){return te<<le|te>>>32-le}J.RIPEMD160=Z._createHelper(F),J.HmacRIPEMD160=Z._createHmacHelper(F)}(Math),W.RIPEMD160)},5162:function(ye,Te,q){var H,J,ae,he,ne,I,W;ye.exports=(W=q(7585),ae=(J=(H=W).lib).WordArray,ne=[],I=H.algo.SHA1=(he=J.Hasher).extend({_doReset:function(){this._hash=new ae.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,V){for(var E=this._hash.words,O=E[0],A=E[1],F=E[2],j=E[3],se=E[4],ie=0;ie<80;ie++){if(ie<16)ne[ie]=0|k[V+ie];else{var U=ne[ie-3]^ne[ie-8]^ne[ie-14]^ne[ie-16];ne[ie]=U<<1|U>>>31}var $=(O<<5|O>>>27)+se+ne[ie];$+=ie<20?1518500249+(A&F|~A&j):ie<40?1859775393+(A^F^j):ie<60?(A&F|A&j|F&j)-1894007588:(A^F^j)-899497514,se=j,j=F,F=A<<30|A>>>2,A=O,O=$}E[0]=E[0]+O|0,E[1]=E[1]+A|0,E[2]=E[2]+F|0,E[3]=E[3]+j|0,E[4]=E[4]+se|0},_doFinalize:function(){var k=this._data,V=k.words,E=8*this._nDataBytes,O=8*k.sigBytes;return V[O>>>5]|=128<<24-O%32,V[14+(O+64>>>9<<4)]=Math.floor(E/4294967296),V[15+(O+64>>>9<<4)]=E,k.sigBytes=4*V.length,this._process(),this._hash},clone:function(){var k=he.clone.call(this);return k._hash=this._hash.clone(),k}}),H.SHA1=he._createHelper(I),H.HmacSHA1=he._createHmacHelper(I),W.SHA1)},8769:function(ye,Te,q){var H,ae,he,Z,ne,W;ye.exports=(W=q(7585),q(1817),ae=(H=W).lib.WordArray,ne=(he=H.algo).SHA224=(Z=he.SHA256).extend({_doReset:function(){this._hash=new ae.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var I=Z._doFinalize.call(this);return I.sigBytes-=4,I}}),H.SHA224=Z._createHelper(ne),H.HmacSHA224=Z._createHmacHelper(ne),W.SHA224)},1817:function(ye,Te,q){var W;ye.exports=(W=q(7585),function(H){var J=W,ae=J.lib,he=ae.WordArray,Z=ae.Hasher,ne=J.algo,I=[],k=[];!function(){function O(se){for(var ie=H.sqrt(se),U=2;U<=ie;U++)if(!(se%U))return!1;return!0}function A(se){return 4294967296*(se-(0|se))|0}for(var F=2,j=0;j<64;)O(F)&&(j<8&&(I[j]=A(H.pow(F,.5))),k[j]=A(H.pow(F,1/3)),j++),F++}();var V=[],E=ne.SHA256=Z.extend({_doReset:function(){this._hash=new he.init(I.slice(0))},_doProcessBlock:function(O,A){for(var F=this._hash.words,j=F[0],se=F[1],ie=F[2],U=F[3],$=F[4],de=F[5],te=F[6],le=F[7],ue=0;ue<64;ue++){if(ue<16)V[ue]=0|O[A+ue];else{var Se=V[ue-15],Ae=V[ue-2];V[ue]=((Se<<25|Se>>>7)^(Se<<14|Se>>>18)^Se>>>3)+V[ue-7]+((Ae<<15|Ae>>>17)^(Ae<<13|Ae>>>19)^Ae>>>10)+V[ue-16]}var xe=j&se^j&ie^se&ie,at=le+(($<<26|$>>>6)^($<<21|$>>>11)^($<<7|$>>>25))+($&de^~$&te)+k[ue]+V[ue];le=te,te=de,de=$,$=U+at|0,U=ie,ie=se,se=j,j=at+(((j<<30|j>>>2)^(j<<19|j>>>13)^(j<<10|j>>>22))+xe)|0}F[0]=F[0]+j|0,F[1]=F[1]+se|0,F[2]=F[2]+ie|0,F[3]=F[3]+U|0,F[4]=F[4]+$|0,F[5]=F[5]+de|0,F[6]=F[6]+te|0,F[7]=F[7]+le|0},_doFinalize:function(){var O=this._data,A=O.words,F=8*this._nDataBytes,j=8*O.sigBytes;return A[j>>>5]|=128<<24-j%32,A[14+(j+64>>>9<<4)]=H.floor(F/4294967296),A[15+(j+64>>>9<<4)]=F,O.sigBytes=4*A.length,this._process(),this._hash},clone:function(){var O=Z.clone.call(this);return O._hash=this._hash.clone(),O}});J.SHA256=Z._createHelper(E),J.HmacSHA256=Z._createHmacHelper(E)}(Math),W.SHA256)},1971:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(401),function(H){var J=W,ae=J.lib,he=ae.WordArray,Z=ae.Hasher,I=J.x64.Word,k=J.algo,V=[],E=[],O=[];!function(){for(var j=1,se=0,ie=0;ie<24;ie++){V[j+5*se]=(ie+1)*(ie+2)/2%64;var $=(2*j+3*se)%5;j=se%5,se=$}for(j=0;j<5;j++)for(se=0;se<5;se++)E[j+5*se]=se+(2*j+3*se)%5*5;for(var de=1,te=0;te<24;te++){for(var le=0,ue=0,Se=0;Se<7;Se++){if(1&de){var _e=(1<<Se)-1;_e<32?ue^=1<<_e:le^=1<<_e-32}128&de?de=de<<1^113:de<<=1}O[te]=I.create(le,ue)}}();var A=[];!function(){for(var j=0;j<25;j++)A[j]=I.create()}();var F=k.SHA3=Z.extend({cfg:Z.cfg.extend({outputLength:512}),_doReset:function(){for(var j=this._state=[],se=0;se<25;se++)j[se]=new I.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(j,se){for(var ie=this._state,U=this.blockSize/2,$=0;$<U;$++){var de=j[se+2*$],te=j[se+2*$+1];de=16711935&(de<<8|de>>>24)|4278255360&(de<<24|de>>>8),(le=ie[$]).high^=te=16711935&(te<<8|te>>>24)|4278255360&(te<<24|te>>>8),le.low^=de}for(var ue=0;ue<24;ue++){for(var Se=0;Se<5;Se++){for(var _e=0,Ae=0,Be=0;Be<5;Be++)_e^=(le=ie[Se+5*Be]).high,Ae^=le.low;var ge=A[Se];ge.high=_e,ge.low=Ae}for(Se=0;Se<5;Se++){var xe=A[(Se+4)%5],Ie=A[(Se+1)%5],Me=Ie.high,at=Ie.low;for(_e=xe.high^(Me<<1|at>>>31),Ae=xe.low^(at<<1|Me>>>31),Be=0;Be<5;Be++)(le=ie[Se+5*Be]).high^=_e,le.low^=Ae}for(var Oe=1;Oe<25;Oe++){var Ot=(le=ie[Oe]).high,Yt=le.low,Ce=V[Oe];Ce<32?(_e=Ot<<Ce|Yt>>>32-Ce,Ae=Yt<<Ce|Ot>>>32-Ce):(_e=Yt<<Ce-32|Ot>>>64-Ce,Ae=Ot<<Ce-32|Yt>>>64-Ce);var ke=A[E[Oe]];ke.high=_e,ke.low=Ae}var ve=A[0],Re=ie[0];for(ve.high=Re.high,ve.low=Re.low,Se=0;Se<5;Se++)for(Be=0;Be<5;Be++){var Sn=A[Oe=Se+5*Be],vt=A[(Se+1)%5+5*Be],Lt=A[(Se+2)%5+5*Be];(le=ie[Oe]).high=Sn.high^~vt.high&Lt.high,le.low=Sn.low^~vt.low&Lt.low}var le,Ut=O[ue];(le=ie[0]).high^=Ut.high,le.low^=Ut.low}},_doFinalize:function(){var j=this._data,se=j.words,U=8*j.sigBytes,$=32*this.blockSize;se[U>>>5]|=1<<24-U%32,se[(H.ceil((U+1)/$)*$>>>5)-1]|=128,j.sigBytes=4*se.length,this._process();for(var de=this._state,te=this.cfg.outputLength/8,le=te/8,ue=[],Se=0;Se<le;Se++){var _e=de[Se],Ae=_e.high,Be=_e.low;Ae=16711935&(Ae<<8|Ae>>>24)|4278255360&(Ae<<24|Ae>>>8),ue.push(Be=16711935&(Be<<8|Be>>>24)|4278255360&(Be<<24|Be>>>8)),ue.push(Ae)}return new he.init(ue,te)},clone:function(){for(var j=Z.clone.call(this),se=j._state=this._state.slice(0),ie=0;ie<25;ie++)se[ie]=se[ie].clone();return j}});J.SHA3=Z._createHelper(F),J.HmacSHA3=Z._createHmacHelper(F)}(Math),W.SHA3)},6787:function(ye,Te,q){var H,J,ae,he,Z,ne,I,W;ye.exports=(W=q(7585),q(401),q(3351),ae=(J=(H=W).x64).Word,he=J.WordArray,I=(Z=H.algo).SHA384=(ne=Z.SHA512).extend({_doReset:function(){this._hash=new he.init([new ae.init(3418070365,3238371032),new ae.init(1654270250,914150663),new ae.init(2438529370,812702999),new ae.init(355462360,4144912697),new ae.init(1731405415,4290775857),new ae.init(2394180231,1750603025),new ae.init(3675008525,1694076839),new ae.init(1203062813,3204075428)])},_doFinalize:function(){var k=ne._doFinalize.call(this);return k.sigBytes-=16,k}}),H.SHA384=ne._createHelper(I),H.HmacSHA384=ne._createHmacHelper(I),W.SHA384)},3351:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(401),function(){var H=W,ae=H.lib.Hasher,he=H.x64,Z=he.Word,ne=he.WordArray,I=H.algo;function k(){return Z.create.apply(Z,arguments)}var V=[k(1116352408,3609767458),k(1899447441,602891725),k(3049323471,3964484399),k(3921009573,2173295548),k(961987163,4081628472),k(1508970993,3053834265),k(2453635748,2937671579),k(2870763221,3664609560),k(3624381080,2734883394),k(310598401,1164996542),k(607225278,1323610764),k(1426881987,3590304994),k(1925078388,4068182383),k(2162078206,991336113),k(2614888103,633803317),k(3248222580,3479774868),k(3835390401,2666613458),k(4022224774,944711139),k(264347078,2341262773),k(604807628,2007800933),k(770255983,1495990901),k(1249150122,1856431235),k(1555081692,3175218132),k(1996064986,2198950837),k(2554220882,3999719339),k(2821834349,766784016),k(2952996808,2566594879),k(3210313671,3203337956),k(3336571891,1034457026),k(3584528711,2466948901),k(113926993,3758326383),k(338241895,168717936),k(666307205,1188179964),k(773529912,1546045734),k(1294757372,1522805485),k(1396182291,2643833823),k(1695183700,2343527390),k(1986661051,1014477480),k(2177026350,1206759142),k(2456956037,344077627),k(2730485921,1290863460),k(2820302411,3158454273),k(3259730800,3505952657),k(3345764771,106217008),k(3516065817,3606008344),k(3600352804,1432725776),k(4094571909,1467031594),k(275423344,851169720),k(430227734,3100823752),k(506948616,1363258195),k(659060556,3750685593),k(883997877,3785050280),k(958139571,3318307427),k(1322822218,3812723403),k(1537002063,2003034995),k(1747873779,3602036899),k(1955562222,1575990012),k(2024104815,1125592928),k(2227730452,2716904306),k(2361852424,442776044),k(2428436474,593698344),k(2756734187,3733110249),k(3204031479,2999351573),k(3329325298,3815920427),k(3391569614,3928383900),k(3515267271,566280711),k(3940187606,3454069534),k(4118630271,4000239992),k(116418474,1914138554),k(174292421,2731055270),k(289380356,3203993006),k(460393269,320620315),k(685471733,587496836),k(852142971,1086792851),k(1017036298,365543100),k(1126000580,2618297676),k(1288033470,3409855158),k(1501505948,4234509866),k(1607167915,987167468),k(1816402316,1246189591)],E=[];!function(){for(var A=0;A<80;A++)E[A]=k()}();var O=I.SHA512=ae.extend({_doReset:function(){this._hash=new ne.init([new Z.init(1779033703,4089235720),new Z.init(3144134277,2227873595),new Z.init(1013904242,4271175723),new Z.init(2773480762,1595750129),new Z.init(1359893119,2917565137),new Z.init(2600822924,725511199),new Z.init(528734635,4215389547),new Z.init(1541459225,327033209)])},_doProcessBlock:function(A,F){for(var j=this._hash.words,se=j[0],ie=j[1],U=j[2],$=j[3],de=j[4],te=j[5],le=j[6],ue=j[7],Se=se.high,_e=se.low,Ae=ie.high,Be=ie.low,ge=U.high,xe=U.low,Ie=$.high,Me=$.low,at=de.high,Oe=de.low,Ot=te.high,Yt=te.low,Ce=le.high,ke=le.low,ve=ue.high,Re=ue.low,Sn=Se,vt=_e,Lt=Ae,Ut=Be,Mt=ge,Ca=xe,Uu=Ie,po=Me,Vr=at,Ge=Oe,zl=Ot,Xe=Yt,ws=Ce,Ss=ke,Ts=ve,Ds=Re,ur=0;ur<80;ur++){var dr,za,$l=E[ur];if(ur<16)za=$l.high=0|A[F+2*ur],dr=$l.low=0|A[F+2*ur+1];else{var Mf=E[ur-15],hr=Mf.high,Ho=Mf.low,Hu=(Ho>>>1|hr<<31)^(Ho>>>8|hr<<24)^(Ho>>>7|hr<<25),kf=E[ur-2],go=kf.high,Rs=kf.low,Af=(Rs>>>19|go<<13)^(Rs<<3|go>>>29)^(Rs>>>6|go<<26),Pf=E[ur-7],Wl=E[ur-16],Xl=Wl.low;$l.high=za=(za=(za=((hr>>>1|Ho<<31)^(hr>>>8|Ho<<24)^hr>>>7)+Pf.high+((dr=Hu+Pf.low)>>>0<Hu>>>0?1:0))+((go>>>19|Rs<<13)^(go<<3|Rs>>>29)^go>>>6)+((dr+=Af)>>>0<Af>>>0?1:0))+Wl.high+((dr+=Xl)>>>0<Xl>>>0?1:0),$l.low=dr}var Ki,Ef=Vr&zl^~Vr&ws,Yl=Ge&Xe^~Ge&Ss,zu=Sn&Lt^Sn&Mt^Lt&Mt,bi=(vt>>>28|Sn<<4)^(vt<<30|Sn>>>2)^(vt<<25|Sn>>>7),Wu=V[ur],Ql=Wu.low,wa=Ts+((Vr>>>14|Ge<<18)^(Vr>>>18|Ge<<14)^(Vr<<23|Ge>>>9))+((Ki=Ds+((Ge>>>14|Vr<<18)^(Ge>>>18|Vr<<14)^(Ge<<23|Vr>>>9)))>>>0<Ds>>>0?1:0),Fr=bi+(vt&Ut^vt&Ca^Ut&Ca);Ts=ws,Ds=Ss,ws=zl,Ss=Xe,zl=Vr,Xe=Ge,Vr=Uu+(wa=(wa=(wa=wa+Ef+((Ki+=Yl)>>>0<Yl>>>0?1:0))+Wu.high+((Ki+=Ql)>>>0<Ql>>>0?1:0))+za+((Ki+=dr)>>>0<dr>>>0?1:0))+((Ge=po+Ki|0)>>>0<po>>>0?1:0)|0,Uu=Mt,po=Ca,Mt=Lt,Ca=Ut,Lt=Sn,Ut=vt,Sn=wa+(((Sn>>>28|vt<<4)^(Sn<<30|vt>>>2)^(Sn<<25|vt>>>7))+zu+(Fr>>>0<bi>>>0?1:0))+((vt=Ki+Fr|0)>>>0<Ki>>>0?1:0)|0}_e=se.low=_e+vt,se.high=Se+Sn+(_e>>>0<vt>>>0?1:0),Be=ie.low=Be+Ut,ie.high=Ae+Lt+(Be>>>0<Ut>>>0?1:0),xe=U.low=xe+Ca,U.high=ge+Mt+(xe>>>0<Ca>>>0?1:0),Me=$.low=Me+po,$.high=Ie+Uu+(Me>>>0<po>>>0?1:0),Oe=de.low=Oe+Ge,de.high=at+Vr+(Oe>>>0<Ge>>>0?1:0),Yt=te.low=Yt+Xe,te.high=Ot+zl+(Yt>>>0<Xe>>>0?1:0),ke=le.low=ke+Ss,le.high=Ce+ws+(ke>>>0<Ss>>>0?1:0),Re=ue.low=Re+Ds,ue.high=ve+Ts+(Re>>>0<Ds>>>0?1:0)},_doFinalize:function(){var A=this._data,F=A.words,j=8*this._nDataBytes,se=8*A.sigBytes;return F[se>>>5]|=128<<24-se%32,F[30+(se+128>>>10<<5)]=Math.floor(j/4294967296),F[31+(se+128>>>10<<5)]=j,A.sigBytes=4*F.length,this._process(),this._hash.toX32()},clone:function(){var A=ae.clone.call(this);return A._hash=this._hash.clone(),A},blockSize:32});H.SHA512=ae._createHelper(O),H.HmacSHA512=ae._createHmacHelper(O)}(),W.SHA512)},7243:function(ye,Te,q){var W;ye.exports=(W=q(7585),q(8319),q(9493),q(7865),q(3057),function(){var H=W,J=H.lib,ae=J.WordArray,he=J.BlockCipher,Z=H.algo,ne=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],I=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],k=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],V=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],E=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],O=Z.DES=he.extend({_doReset:function(){for(var ie=this._key.words,U=[],$=0;$<56;$++){var de=ne[$]-1;U[$]=ie[de>>>5]>>>31-de%32&1}for(var te=this._subKeys=[],le=0;le<16;le++){var ue=te[le]=[],Se=k[le];for($=0;$<24;$++)ue[$/6|0]|=U[(I[$]-1+Se)%28]<<31-$%6,ue[4+($/6|0)]|=U[28+(I[$+24]-1+Se)%28]<<31-$%6;for(ue[0]=ue[0]<<1|ue[0]>>>31,$=1;$<7;$++)ue[$]=ue[$]>>>4*($-1)+3;ue[7]=ue[7]<<5|ue[7]>>>27}var _e=this._invSubKeys=[];for($=0;$<16;$++)_e[$]=te[15-$]},encryptBlock:function(se,ie){this._doCryptBlock(se,ie,this._subKeys)},decryptBlock:function(se,ie){this._doCryptBlock(se,ie,this._invSubKeys)},_doCryptBlock:function(se,ie,U){this._lBlock=se[ie],this._rBlock=se[ie+1],A.call(this,4,252645135),A.call(this,16,65535),F.call(this,2,858993459),F.call(this,8,16711935),A.call(this,1,1431655765);for(var $=0;$<16;$++){for(var de=U[$],te=this._lBlock,le=this._rBlock,ue=0,Se=0;Se<8;Se++)ue|=V[Se][((le^de[Se])&E[Se])>>>0];this._lBlock=le,this._rBlock=te^ue}var _e=this._lBlock;this._lBlock=this._rBlock,this._rBlock=_e,A.call(this,1,1431655765),F.call(this,8,16711935),F.call(this,2,858993459),A.call(this,16,65535),A.call(this,4,252645135),se[ie]=this._lBlock,se[ie+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function A(se,ie){var U=(this._lBlock>>>se^this._rBlock)&ie;this._rBlock^=U,this._lBlock^=U<<se}function F(se,ie){var U=(this._rBlock>>>se^this._lBlock)&ie;this._lBlock^=U,this._rBlock^=U<<se}H.DES=he._createHelper(O);var j=Z.TripleDES=he.extend({_doReset:function(){var ie=this._key.words;if(2!==ie.length&&4!==ie.length&&ie.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var U=ie.slice(0,2),$=ie.length<4?ie.slice(0,2):ie.slice(2,4),de=ie.length<6?ie.slice(0,2):ie.slice(4,6);this._des1=O.createEncryptor(ae.create(U)),this._des2=O.createEncryptor(ae.create($)),this._des3=O.createEncryptor(ae.create(de))},encryptBlock:function(se,ie){this._des1.encryptBlock(se,ie),this._des2.decryptBlock(se,ie),this._des3.encryptBlock(se,ie)},decryptBlock:function(se,ie){this._des3.decryptBlock(se,ie),this._des2.encryptBlock(se,ie),this._des1.decryptBlock(se,ie)},keySize:6,ivSize:2,blockSize:2});H.TripleDES=he._createHelper(j)}(),W.TripleDES)},401:function(ye,Te,q){var ae,he,Z,ne,W;ye.exports=(W=q(7585),he=(ae=W.lib).Base,Z=ae.WordArray,(ne=W.x64={}).Word=he.extend({init:function(V,E){this.high=V,this.low=E}}),ne.WordArray=he.extend({init:function(V,E){V=this.words=V||[],this.sigBytes=null!=E?E:8*V.length},toX32:function(){for(var V=this.words,E=V.length,O=[],A=0;A<E;A++){var F=V[A];O.push(F.high),O.push(F.low)}return Z.create(O,this.sigBytes)},clone:function(){for(var V=he.clone.call(this),E=V.words=this.words.slice(0),O=E.length,A=0;A<O;A++)E[A]=E[A].clone();return V}}),W)},340:(ye,Te,q)=>{var W=q(9471),H=q(2992),J=q(7657),ae=q(5583),he=q(1929),Z=q(8083),ne=q(3818);ne.alea=W,ne.xor128=H,ne.xorwow=J,ne.xorshift7=ae,ne.xor4096=he,ne.tychei=Z,ye.exports=ne},9471:function(ye,Te,q){var W;!function(H,J,ae){function he(k){var V=this,E=function I(){var k=4022871197;return function(E){E=String(E);for(var O=0;O<E.length;O++){var A=.02519603282416938*(k+=E.charCodeAt(O));A-=k=A>>>0,k=(A*=k)>>>0,k+=4294967296*(A-=k)}return 2.3283064365386963e-10*(k>>>0)}}();V.next=function(){var O=2091639*V.s0+2.3283064365386963e-10*V.c;return V.s0=V.s1,V.s1=V.s2,V.s2=O-(V.c=0|O)},V.c=1,V.s0=E(" "),V.s1=E(" "),V.s2=E(" "),V.s0-=E(k),V.s0<0&&(V.s0+=1),V.s1-=E(k),V.s1<0&&(V.s1+=1),V.s2-=E(k),V.s2<0&&(V.s2+=1),E=null}function Z(k,V){return V.c=k.c,V.s0=k.s0,V.s1=k.s1,V.s2=k.s2,V}function ne(k,V){var E=new he(k),O=V&&V.state,A=E.next;return A.int32=function(){return 4294967296*E.next()|0},A.double=function(){return A()+11102230246251565e-32*(2097152*A()|0)},A.quick=A,O&&("object"==typeof O&&Z(O,E),A.state=function(){return Z(E,{})}),A}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(Te,q,Te,J))&&(J.exports=W):this.alea=ne}(0,ye=q.nmd(ye))},8083:function(ye,Te,q){var W;!function(H,J,ae){function he(I){var k=this,V="";k.next=function(){var O=k.b,A=k.c,F=k.d,j=k.a;return O=O<<25^O>>>7^A,A=A-F|0,F=F<<24^F>>>8^j,j=j-O|0,k.b=O=O<<20^O>>>12^A,k.c=A=A-F|0,k.d=F<<16^A>>>16^j,k.a=j-O|0},k.a=0,k.b=0,k.c=-1640531527,k.d=1367130551,I===Math.floor(I)?(k.a=I/4294967296|0,k.b=0|I):V+=I;for(var E=0;E<V.length+20;E++)k.b^=0|V.charCodeAt(E),k.next()}function Z(I,k){return k.a=I.a,k.b=I.b,k.c=I.c,k.d=I.d,k}function ne(I,k){var V=new he(I),E=k&&k.state,O=function(){return(V.next()>>>0)/4294967296};return O.double=function(){do{var j=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===j);return j},O.int32=V.next,O.quick=O,E&&("object"==typeof E&&Z(E,V),O.state=function(){return Z(V,{})}),O}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(Te,q,Te,J))&&(J.exports=W):this.tychei=ne}(0,ye=q.nmd(ye))},2992:function(ye,Te,q){var W;!function(H,J,ae){function he(I){var k=this,V="";k.x=0,k.y=0,k.z=0,k.w=0,k.next=function(){var O=k.x^k.x<<11;return k.x=k.y,k.y=k.z,k.z=k.w,k.w^=k.w>>>19^O^O>>>8},I===(0|I)?k.x=I:V+=I;for(var E=0;E<V.length+64;E++)k.x^=0|V.charCodeAt(E),k.next()}function Z(I,k){return k.x=I.x,k.y=I.y,k.z=I.z,k.w=I.w,k}function ne(I,k){var V=new he(I),E=k&&k.state,O=function(){return(V.next()>>>0)/4294967296};return O.double=function(){do{var j=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===j);return j},O.int32=V.next,O.quick=O,E&&("object"==typeof E&&Z(E,V),O.state=function(){return Z(V,{})}),O}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(Te,q,Te,J))&&(J.exports=W):this.xor128=ne}(0,ye=q.nmd(ye))},1929:function(ye,Te,q){var W;!function(H,J,ae){function he(I){var k=this;k.next=function(){var F,j,E=k.w,O=k.X,A=k.i;return k.w=E=E+1640531527|0,j=O[A+34&127],F=O[A=A+1&127],j^=j<<13,F^=F<<17,j=O[A]=(j^=j>>>15)^(F^=F>>>12),k.i=A,j+(E^E>>>16)|0},function V(E,O){var A,F,j,se,ie,U=[],$=128;for(O===(0|O)?(F=O,O=null):(O+="\0",F=0,$=Math.max($,O.length)),j=0,se=-32;se<$;++se)O&&(F^=O.charCodeAt((se+32)%O.length)),0===se&&(ie=F),F^=F<<10,F^=F>>>15,F^=F<<4,F^=F>>>13,se>=0&&(j=0==(A=U[127&se]^=F+(ie=ie+1640531527|0))?j+1:0);for(j>=128&&(U[127&(O&&O.length||0)]=-1),j=127,se=512;se>0;--se)F=U[j+34&127],A=U[j=j+1&127],F^=F<<13,A^=A<<17,U[j]=(F^=F>>>15)^(A^=A>>>12);E.w=ie,E.X=U,E.i=j}(k,I)}function Z(I,k){return k.i=I.i,k.w=I.w,k.X=I.X.slice(),k}function ne(I,k){null==I&&(I=+new Date);var V=new he(I),E=k&&k.state,O=function(){return(V.next()>>>0)/4294967296};return O.double=function(){do{var j=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===j);return j},O.int32=V.next,O.quick=O,E&&(E.X&&Z(E,V),O.state=function(){return Z(V,{})}),O}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(Te,q,Te,J))&&(J.exports=W):this.xor4096=ne}(0,ye=q.nmd(ye))},5583:function(ye,Te,q){var W;!function(H,J,ae){function he(I){var k=this;k.next=function(){var A,F,E=k.x,O=k.i;return A=E[O],F=(A^=A>>>7)^A<<24,F^=(A=E[O+1&7])^A>>>10,F^=(A=E[O+3&7])^A>>>3,F^=(A=E[O+4&7])^A<<7,A=E[O+7&7],E[O]=F^=(A^=A<<13)^A<<9,k.i=O+1&7,F},function V(E,O){var A,j=[];if(O===(0|O))j[0]=O;else for(O=""+O,A=0;A<O.length;++A)j[7&A]=j[7&A]<<15^O.charCodeAt(A)+j[A+1&7]<<13;for(;j.length<8;)j.push(0);for(A=0;A<8&&0===j[A];++A);for(8==A&&(j[7]=-1),E.x=j,E.i=0,A=256;A>0;--A)E.next()}(k,I)}function Z(I,k){return k.x=I.x.slice(),k.i=I.i,k}function ne(I,k){null==I&&(I=+new Date);var V=new he(I),E=k&&k.state,O=function(){return(V.next()>>>0)/4294967296};return O.double=function(){do{var j=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===j);return j},O.int32=V.next,O.quick=O,E&&(E.x&&Z(E,V),O.state=function(){return Z(V,{})}),O}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(Te,q,Te,J))&&(J.exports=W):this.xorshift7=ne}(0,ye=q.nmd(ye))},7657:function(ye,Te,q){var W;!function(H,J,ae){function he(I){var k=this,V="";k.next=function(){var O=k.x^k.x>>>2;return k.x=k.y,k.y=k.z,k.z=k.w,k.w=k.v,(k.d=k.d+362437|0)+(k.v=k.v^k.v<<4^O^O<<1)|0},k.x=0,k.y=0,k.z=0,k.w=0,k.v=0,I===(0|I)?k.x=I:V+=I;for(var E=0;E<V.length+64;E++)k.x^=0|V.charCodeAt(E),E==V.length&&(k.d=k.x<<10^k.x>>>4),k.next()}function Z(I,k){return k.x=I.x,k.y=I.y,k.z=I.z,k.w=I.w,k.v=I.v,k.d=I.d,k}function ne(I,k){var V=new he(I),E=k&&k.state,O=function(){return(V.next()>>>0)/4294967296};return O.double=function(){do{var j=((V.next()>>>11)+(V.next()>>>0)/4294967296)/(1<<21)}while(0===j);return j},O.int32=V.next,O.quick=O,E&&("object"==typeof E&&Z(E,V),O.state=function(){return Z(V,{})}),O}J&&J.exports?J.exports=ne:q.amdD&&q.amdO?void 0!==(W=function(){return ne}.call(Te,q,Te,J))&&(J.exports=W):this.xorwow=ne}(0,ye=q.nmd(ye))},3818:function(ye,Te,q){var W;!function(H,J,ae){var A,he=256,k=ae.pow(he,6),V=ae.pow(2,52),E=2*V,O=255;function F(te,le,ue){var Se=[],_e=U(ie((le=1==le?{entropy:!0}:le||{}).entropy?[te,de(J)]:null==te?function $(){try{var te;return A&&(te=A.randomBytes)?te=te(he):(te=new Uint8Array(he),(H.crypto||H.msCrypto).getRandomValues(te)),de(te)}catch(Se){var le=H.navigator,ue=le&&le.plugins;return[+new Date,H,ue,H.screen,de(J)]}}():te,3),Se),Ae=new j(Se),Be=function(){for(var ge=Ae.g(6),xe=k,Ie=0;ge<V;)ge=(ge+Ie)*he,xe*=he,Ie=Ae.g(1);for(;ge>=E;)ge/=2,xe/=2,Ie>>>=1;return(ge+Ie)/xe};return Be.int32=function(){return 0|Ae.g(4)},Be.quick=function(){return Ae.g(4)/4294967296},Be.double=Be,U(de(Ae.S),J),(le.pass||ue||function(ge,xe,Ie,Me){return Me&&(Me.S&&se(Me,Ae),ge.state=function(){return se(Ae,{})}),Ie?(ae.random=ge,xe):ge})(Be,_e,"global"in le?le.global:this==ae,le.state)}function j(te){var le,ue=te.length,Se=this,_e=0,Ae=Se.i=Se.j=0,Be=Se.S=[];for(ue||(te=[ue++]);_e<he;)Be[_e]=_e++;for(_e=0;_e<he;_e++)Be[_e]=Be[Ae=O&Ae+te[_e%ue]+(le=Be[_e])],Be[Ae]=le;(Se.g=function(ge){for(var xe,Ie=0,Me=Se.i,at=Se.j,Oe=Se.S;ge--;)xe=Oe[Me=O&Me+1],Ie=Ie*he+Oe[O&(Oe[Me]=Oe[at=O&at+xe])+(Oe[at]=xe)];return Se.i=Me,Se.j=at,Ie})(he)}function se(te,le){return le.i=te.i,le.j=te.j,le.S=te.S.slice(),le}function ie(te,le){var _e,ue=[],Se=typeof te;if(le&&"object"==Se)for(_e in te)try{ue.push(ie(te[_e],le-1))}catch(Ae){}return ue.length?ue:"string"==Se?te:te+"\0"}function U(te,le){for(var Se,ue=te+"",_e=0;_e<ue.length;)le[O&_e]=O&(Se^=19*le[O&_e])+ue.charCodeAt(_e++);return de(le)}function de(te){return String.fromCharCode.apply(0,te)}if(U(ae.random(),J),ye.exports){ye.exports=F;try{A=q(5042)}catch(te){}}else void 0!==(W=function(){return F}.call(Te,q,Te,ye))&&(ye.exports=W)}("undefined"!=typeof self?self:this,[],Math)},2480:()=>{},5042:()=>{}},ye=>{ye(ye.s=4519)}]);