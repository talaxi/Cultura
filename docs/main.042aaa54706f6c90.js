var lj=Object.defineProperty,bM=Object.getOwnPropertySymbols,cj=Object.prototype.hasOwnProperty,uj=Object.prototype.propertyIsEnumerable,yM=(me,Ce,j)=>Ce in me?lj(me,Ce,{enumerable:!0,configurable:!0,writable:!0,value:j}):me[Ce]=j,vr=(me,Ce)=>{for(var j in Ce||(Ce={}))cj.call(Ce,j)&&yM(me,j,Ce[j]);if(bM)for(var j of bM(Ce))uj.call(Ce,j)&&yM(me,j,Ce[j]);return me};(self.webpackChunkCultura=self.webpackChunkCultura||[]).push([[179],{6359:(me,Ce,j)=>{"use strict";function z(t){return"function"==typeof t}function B(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const X=B(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function ne(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class le{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(z(i))try{i()}catch(a){n=a instanceof X?a.errors:[a]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const a of r)try{k(a)}catch(s){n=null!=n?n:[],s instanceof X?n=[...n,...s.errors]:n.push(s)}}if(n)throw new X(n)}}add(n){var e;if(n&&n!==this)if(this.closed)k(n);else{if(n instanceof le){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&ne(e,n)}remove(n){const{_teardowns:e}=this;e&&ne(e,n),n instanceof le&&n._removeParent(this)}}le.EMPTY=(()=>{const t=new le;return t.closed=!0,t})();const Y=le.EMPTY;function ee(t){return t instanceof le||t&&"closed"in t&&z(t.remove)&&z(t.add)&&z(t.unsubscribe)}function k(t){z(t)?t():t.unsubscribe()}const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},N={setTimeout(...t){const{delegate:n}=N;return((null==n?void 0:n.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:n}=N;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function R(t){N.setTimeout(()=>{const{onUnhandledError:n}=T;if(!n)throw t;n(t)})}function A(){}const M=ie("C",void 0,void 0);function ie(t,n,e){return{kind:t,value:n,error:e}}let te=null;function V(t){if(T.useDeprecatedSynchronousErrorHandling){const n=!te;if(n&&(te={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=te;if(te=null,e)throw i}}else t()}class oe extends le{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,ee(n)&&n.add(this)):this.destination=ce}static create(n,e,i){return new ye(n,e,i)}next(n){this.isStopped?Ie(function L(t){return ie("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Ie(function O(t){return ie("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Ie(M,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Z=Function.prototype.bind;function re(t,n){return Z.call(t,n)}class ae{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){pe(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){pe(i)}else pe(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){pe(e)}}}class ye extends oe{constructor(n,e,i){let r;if(super(),z(n)||!n)r={next:null!=n?n:void 0,error:null!=e?e:void 0,complete:null!=i?i:void 0};else{let a;this&&T.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&re(n.next,a),error:n.error&&re(n.error,a),complete:n.complete&&re(n.complete,a)}):r=n}this.destination=new ae(r)}}function pe(t){T.useDeprecatedSynchronousErrorHandling?function G(t){T.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=t)}(t):R(t)}function Ie(t,n){const{onStoppedNotification:e}=T;e&&N.setTimeout(()=>e(t,n))}const ce={closed:!0,next:A,error:function Re(t){throw t},complete:A},Te="function"==typeof Symbol&&Symbol.observable||"@@observable";function ke(t){return t}let Ae=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const a=function ve(t){return t&&t instanceof oe||function Nt(t){return t&&z(t.next)&&z(t.error)&&z(t.complete)}(t)&&ee(t)}(e)?e:new ye(e,i,r);return V(()=>{const{operator:s,source:o}=this;a.add(s?s.call(a,o):o?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=yt(i))((r,a)=>{const s=new ye({next:o=>{try{e(o)}catch(l){a(l),s.unsubscribe()}},error:a,complete:r});this.subscribe(s)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Te](){return this}pipe(...e){return function qe(t){return 0===t.length?ke:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}(e)(this)}toPromise(e){return new(e=yt(e))((i,r)=>{let a;this.subscribe(s=>a=s,s=>r(s),()=>i(a))})}}return t.create=n=>new t(n),t})();function yt(t){var n;return null!==(n=null!=t?t:T.Promise)&&void 0!==n?n:Promise}const xe=B(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let he=(()=>{class t extends Ae{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new Se(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new xe}next(e){V(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const r of i)r.next(e)}})}error(e){V(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){V(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:a}=this;return i||r?Y:(a.push(e),new le(()=>ne(a,e)))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:a}=this;i?e.error(r):a&&e.complete()}asObservable(){const e=new Ae;return e.source=this,e}}return t.create=(n,e)=>new Se(n,e),t})();class Se extends he{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:Y}}function fn(t){return z(null==t?void 0:t.lift)}function nt(t){return n=>{if(fn(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Dt(t,n,e,i,r){return new Mt(t,n,e,i,r)}class Mt extends oe{constructor(n,e,i,r,a,s){super(n),this.onFinalize=a,this.shouldUnsubscribe=s,this._next=e?function(o){try{e(o)}catch(l){n.error(l)}}:super._next,this._error=r?function(o){try{r(o)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(o){n.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function ft(t,n){return nt((e,i)=>{let r=0;e.subscribe(Dt(i,a=>{i.next(t.call(n,a,r++))}))})}function Ue(t,n,e,i){var s,r=arguments.length,a=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(r<3?s(a):r>3?s(n,e,a):s(n,e))||a);return r>3&&a&&Object.defineProperty(n,e,a),a}function Ye(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)}function Qi(t){return this instanceof Qi?(this.v=t,this):new Qi(t)}function Cs(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(t,n||[]),a=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(h){i[h]&&(r[h]=function(f){return new Promise(function(v,_){a.push([h,f,v,_])>1||o(h,f)})})}function o(h,f){try{!function l(h){h.value instanceof Qi?Promise.resolve(h.value.v).then(c,u):d(a[0][2],h)}(i[h](f))}catch(v){d(a[0][3],v)}}function c(h){o("next",h)}function u(h){o("throw",h)}function d(h,f){h(f),a.shift(),a.length&&o(a[0][0],a[0][1])}}function uu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function Yi(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=t[a]&&function(s){return new Promise(function(o,l){!function r(a,s,o,l){Promise.resolve(l).then(function(c){a({value:c,done:o})},s)}(o,l,(s=t[a](s)).done,s.value)})}}}const bl=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function du(t){return z(null==t?void 0:t.then)}function yl(t){return z(t[Te])}function hu(t){return Symbol.asyncIterator&&z(null==t?void 0:t[Symbol.asyncIterator])}function Cl(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const wl=function ef(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function fu(t){return z(null==t?void 0:t[wl])}function pu(t){return Cs(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield Qi(e.read());if(r)return yield Qi(void 0);yield yield Qi(i)}}finally{e.releaseLock()}})}function gu(t){return z(null==t?void 0:t.getReader)}function ai(t){if(t instanceof Ae)return t;if(null!=t){if(yl(t))return function tf(t){return new Ae(n=>{const e=t[Te]();if(z(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(bl(t))return function nf(t){return new Ae(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(du(t))return function mu(t){return new Ae(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,R)})}(t);if(hu(t))return Sl(t);if(fu(t))return function rf(t){return new Ae(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(gu(t))return function Ni(t){return Sl(pu(t))}(t)}throw Cl(t)}function Sl(t){return new Ae(n=>{(function sa(t,n){var e,i,r,a;return function Ks(t,n,e,i){return new(e||(e=Promise))(function(a,s){function o(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?a(u.value):function r(a){return a instanceof e?a:new e(function(s){s(a)})}(u.value).then(o,l)}c((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=uu(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function br(t,n,e,i=0,r=!1){const a=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!r)return a}function Wn(t,n,e=1/0){return z(n)?Wn((i,r)=>ft((a,s)=>n(i,a,r,s))(ai(t(i,r))),e):("number"==typeof n&&(e=n),nt((i,r)=>function af(t,n,e,i,r,a,s,o){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&n.complete()},f=_=>c<i?v(_):l.push(_),v=_=>{a&&n.next(_),c++;let D=!1;ai(e(_,u++)).subscribe(Dt(n,w=>{null==r||r(w),a?f(w):n.next(w)},()=>{D=!0},void 0,()=>{if(D)try{for(c--;l.length&&c<i;){const w=l.shift();s?br(n,s,()=>v(w)):v(w)}h()}catch(w){n.error(w)}}))};return t.subscribe(Dt(n,f,()=>{d=!0,h()})),()=>{null==o||o()}}(i,r,t,e)))}function Tl(t=1/0){return Wn(ke,t)}const Br=new Ae(t=>t.complete());function cv(t){return t&&z(t.schedule)}function sf(t){return t[t.length-1]}function vu(t){return z(sf(t))?t.pop():void 0}function Dl(t){return cv(sf(t))?t.pop():void 0}function uv(t,n=0){return nt((e,i)=>{e.subscribe(Dt(i,r=>br(i,t,()=>i.next(r),n),()=>br(i,t,()=>i.complete(),n),r=>br(i,t,()=>i.error(r),n)))})}function dv(t,n=0){return nt((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function hv(t,n){if(!t)throw new Error("Iterable cannot be null");return new Ae(e=>{br(e,n,()=>{const i=t[Symbol.asyncIterator]();br(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function vi(t,n){return n?function RM(t,n){if(null!=t){if(yl(t))return function SM(t,n){return ai(t).pipe(dv(n),uv(n))}(t,n);if(bl(t))return function DM(t,n){return new Ae(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(du(t))return function TM(t,n){return ai(t).pipe(dv(n),uv(n))}(t,n);if(hu(t))return hv(t,n);if(fu(t))return function MM(t,n){return new Ae(e=>{let i;return br(e,n,()=>{i=t[wl](),br(e,n,()=>{let r,a;try{({value:r,done:a}=i.next())}catch(s){return void e.error(s)}a?e.complete():e.next(r)},0,!0)}),()=>z(null==i?void 0:i.return)&&i.return()})}(t,n);if(gu(t))return function xM(t,n){return hv(pu(t),n)}(t,n)}throw Cl(t)}(t,n):ai(t)}function fv(...t){const n=Dl(t),e=function wM(t,n){return"number"==typeof sf(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?ai(i[0]):Tl(e)(vi(i,n)):Br}function _i(t){return t<=0?()=>Br:nt((n,e)=>{let i=0;n.subscribe(Dt(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function pv(t={}){const{connector:n=(()=>new he),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return a=>{let s=null,o=null,l=null,c=0,u=!1,d=!1;const h=()=>{null==o||o.unsubscribe(),o=null},f=()=>{h(),s=l=null,u=d=!1},v=()=>{const _=s;f(),null==_||_.unsubscribe()};return nt((_,D)=>{c++,!d&&!u&&h();const w=l=null!=l?l:n();D.add(()=>{c--,0===c&&!d&&!u&&(o=lf(v,r))}),w.subscribe(D),s||(s=new ye({next:y=>w.next(y),error:y=>{d=!0,h(),o=lf(f,e,y),w.error(y)},complete:()=>{u=!0,h(),o=lf(f,i),w.complete()}}),vi(_).subscribe(s))})(a)}}function lf(t,n,...e){return!0===n?(t(),null):!1===n?null:n(...e).pipe(_i(1)).subscribe(()=>t())}function pn(t){for(let n in t)if(t[n]===pn)return n;throw Error("Could not find renamed property on target object.")}function cf(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function sn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(sn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function uf(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const kM=pn({__forward_ref__:pn});function qt(t){return t.__forward_ref__=qt,t.toString=function(){return sn(this())},t}function Ct(t){return gv(t)?t():t}function gv(t){return"function"==typeof t&&t.hasOwnProperty(kM)&&t.__forward_ref__===qt}class jt extends Error{constructor(n,e){super(function df(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function ut(t){return"string"==typeof t?t:null==t?"":String(t)}function Oi(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ut(t)}function _u(t,n){const e=n?` in ${n}`:"";throw new jt(-201,`No provider for ${Oi(t)} found${e}`)}function xn(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}function He(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Jt(t){return{providers:t.providers||[],imports:t.imports||[]}}function hf(t){return mv(t,bu)||mv(t,_v)}function mv(t,n){return t.hasOwnProperty(n)?t[n]:null}function vv(t){return t&&(t.hasOwnProperty(ff)||t.hasOwnProperty(FM))?t[ff]:null}const bu=pn({\u0275prov:pn}),ff=pn({\u0275inj:pn}),_v=pn({ngInjectableDef:pn}),FM=pn({ngInjectorDef:pn});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let pf;function Xa(t){const n=pf;return pf=t,n}function bv(t,n,e){const i=hf(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&pt.Optional?null:void 0!==n?n:void _u(sn(t),"Injector")}function Qa(t){return{toString:t}.toString()}var Lr=(()=>((Lr=Lr||{})[Lr.OnPush=0]="OnPush",Lr[Lr.Default=1]="Default",Lr))(),oa=(()=>{return(t=oa||(oa={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",oa;var t})();const BM="undefined"!=typeof globalThis&&globalThis,LM="undefined"!=typeof window&&window,UM="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,hn=BM||"undefined"!=typeof global&&global||LM||UM,io={},gn=[],yu=pn({\u0275cmp:pn}),gf=pn({\u0275dir:pn}),mf=pn({\u0275pipe:pn}),yv=pn({\u0275mod:pn}),Ea=pn({\u0275fac:pn}),Ml=pn({__NG_ELEMENT_ID__:pn});let HM=0;function Je(t){return Qa(()=>{const e={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Lr.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||gn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||oa.Emulated,id:"c",styles:t.styles||gn,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,a=t.features,s=t.pipes;return i.id+=HM++,i.inputs=Tv(t.inputs,e),i.outputs=Tv(t.outputs),a&&a.forEach(o=>o(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(Cv):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(wv):null,i})}function Cv(t){return xi(t)||function Za(t){return t[gf]||null}(t)}function wv(t){return function ws(t){return t[mf]||null}(t)}const Sv={};function on(t){return Qa(()=>{const n={type:t.type,bootstrap:t.bootstrap||gn,declarations:t.declarations||gn,imports:t.imports||gn,exports:t.exports||gn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Sv[t.id]=t.type),n})}function Tv(t,n){if(null==t)return io;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=i,n&&(n[r]=a)}return e}const Oe=Je;function Zi(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function xi(t){return t[yu]||null}function yr(t,n){const e=t[yv]||null;if(!e&&!0===n)throw new Error(`Type ${sn(t)} does not have '\u0275mod' property.`);return e}function la(t){return Array.isArray(t)&&"object"==typeof t[1]}function Hr(t){return Array.isArray(t)&&!0===t[1]}function bf(t){return 0!=(8&t.flags)}function Tu(t){return 2==(2&t.flags)}function Du(t){return 1==(1&t.flags)}function Gr(t){return null!==t.template}function qM(t){return 0!=(512&t[2])}function Ms(t,n){return t.hasOwnProperty(Ea)?t[Ea]:null}class QM{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function yi(){return Mv}function Mv(t){return t.type.prototype.ngOnChanges&&(t.setInput=KM),ZM}function ZM(){const t=Rv(this),n=null==t?void 0:t.current;if(n){const e=t.previous;if(e===io)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function KM(t,n,e,i){const r=Rv(t)||function JM(t,n){return t[xv]=n}(t,{previous:io,current:null}),a=r.current||(r.current={}),s=r.previous,o=this.declaredInputs[e],l=s[o];a[o]=new QM(l&&l.currentValue,n,s===io),t[i]=n}yi.ngInherit=!0;const xv="__ngSimpleChanges__";function Rv(t){return t[xv]||null}let Tf;function Df(){return void 0!==Tf?Tf:"undefined"!=typeof document?document:void 0}function Ln(t){return!!t.listen}const kv={createRenderer:(t,n)=>Df()};function ei(t){for(;Array.isArray(t);)t=t[0];return t}function Mu(t,n){return ei(n[t])}function Sr(t,n){return ei(n[t.index])}function Mf(t,n){return t.data[n]}function lo(t,n){return t[n]}function rr(t,n){const e=n[t];return la(e)?e:e[0]}function Av(t){return 4==(4&t[2])}function xf(t){return 128==(128&t[2])}function Ka(t,n){return null==n?null:t[n]}function Ev(t){t[18]=0}function Rf(t,n){t[5]+=n;let e=t,i=t[3];for(;null!==i&&(1===n&&1===e[5]||-1===n&&0===e[5]);)i[5]+=n,e=i,i=i[3]}const at={lFrame:Lv(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Pv(){return at.bindingsEnabled}function we(){return at.lFrame.lView}function zt(){return at.lFrame.tView}function K(t){return at.lFrame.contextLView=t,t[8]}function si(){let t=Iv();for(;null!==t&&64===t.type;)t=t.parent;return t}function Iv(){return at.lFrame.currentTNode}function Al(){const t=at.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function ca(t,n){const e=at.lFrame;e.currentTNode=t,e.isParent=n}function kf(){return at.lFrame.isParent}function Af(){at.lFrame.isParent=!1}function xu(){return at.isInCheckNoChangesMode}function Ru(t){at.isInCheckNoChangesMode=t}function Fi(){const t=at.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Pa(){return at.lFrame.bindingIndex}function co(){return at.lFrame.bindingIndex++}function Ia(t){const n=at.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Ov(t){at.lFrame.inI18n=t}function mx(t,n){const e=at.lFrame;e.bindingIndex=e.bindingRootIndex=t,Ef(n)}function Ef(t){at.lFrame.currentDirectiveIndex=t}function Fv(){return at.lFrame.currentQueryIndex}function If(t){at.lFrame.currentQueryIndex=t}function _x(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Vv(t,n,e){if(e&pt.SkipSelf){let r=n,a=t;for(;!(r=r.parent,null!==r||e&pt.Host||(r=_x(a),null===r||(a=a[15],10&r.type))););if(null===r)return!1;n=r,t=a}const i=at.lFrame=Bv();return i.currentTNode=n,i.lView=t,!0}function ku(t){const n=Bv(),e=t[1];at.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Bv(){const t=at.lFrame,n=null===t?null:t.child;return null===n?Lv(t):n}function Lv(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Uv(){const t=at.lFrame;return at.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Hv=Uv;function Au(){const t=Uv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Vi(){return at.lFrame.selectedIndex}function Ja(t){at.lFrame.selectedIndex=t}function Un(){const t=at.lFrame;return Mf(t.tView,t.selectedIndex)}function Eu(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:o,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=a;s&&(t.contentHooks||(t.contentHooks=[])).push(-e,s),o&&((t.contentHooks||(t.contentHooks=[])).push(e,o),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,o)),l&&(t.viewHooks||(t.viewHooks=[])).push(-e,l),c&&((t.viewHooks||(t.viewHooks=[])).push(e,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,c)),null!=u&&(t.destroyHooks||(t.destroyHooks=[])).push(e,u)}}function Pu(t,n,e){Gv(t,n,3,e)}function Iu(t,n,e,i){(3&t[2])===e&&Gv(t,n,e,i)}function Nf(t,n){let e=t[2];(3&e)===n&&(e&=2047,e+=1,t[2]=e)}function Gv(t,n,e,i){const a=null!=i?i:-1,s=n.length-1;let o=0;for(let l=void 0!==i?65535&t[18]:0;l<s;l++)if("number"==typeof n[l+1]){if(o=n[l],null!=i&&o>=i)break}else n[l]<0&&(t[18]+=65536),(o<a||-1==a)&&(xx(t,e,n,l),t[18]=(4294901760&t[18])+l+2),l++}function xx(t,n,e,i){const r=e[i]<0,a=e[i+1],o=t[r?-e[i]:e[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{a.call(o)}finally{}}}else try{a.call(o)}finally{}}class El{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function Nu(t,n,e){const i=Ln(t);let r=0;for(;r<e.length;){const a=e[r];if("number"==typeof a){if(0!==a)break;r++;const s=e[r++],o=e[r++],l=e[r++];i?t.setAttribute(n,o,l,s):n.setAttributeNS(s,o,l)}else{const s=a,o=e[++r];Ff(s)?i&&t.setProperty(n,s,o):i?t.setAttribute(n,s,o):n.setAttribute(s,o),r++}}return r}function jv(t){return 3===t||4===t||6===t}function Ff(t){return 64===t.charCodeAt(0)}function Ou(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||zv(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function zv(t,n,e,i,r){let a=0,s=t.length;if(-1===n)s=-1;else for(;a<t.length;){const o=t[a++];if("number"==typeof o){if(o===n){s=-1;break}if(o>n){s=a-1;break}}}for(;a<t.length;){const o=t[a];if("number"==typeof o)break;if(o===e){if(null===i)return void(null!==r&&(t[a+1]=r));if(i===t[a+1])return void(t[a+2]=r)}a++,null!==i&&a++,null!==r&&a++}-1!==s&&(t.splice(s,0,n),a=s+1),t.splice(a++,0,e),null!==i&&t.splice(a++,0,i),null!==r&&t.splice(a++,0,r)}function $v(t){return-1!==t}function uo(t){return 32767&t}function ho(t,n){let e=function Px(t){return t>>16}(t),i=n;for(;e>0;)i=i[15],e--;return i}let Vf=!0;function Fu(t){const n=Vf;return Vf=t,n}let Ix=0;function Il(t,n){const e=Lf(t,n);if(-1!==e)return e;const i=n[1];i.firstCreatePass&&(t.injectorIndex=n.length,Bf(i.data,t),Bf(n,null),Bf(i.blueprint,null));const r=Vu(t,n),a=t.injectorIndex;if($v(r)){const s=uo(r),o=ho(r,n),l=o[1].data;for(let c=0;c<8;c++)n[a+c]=o[s+c]|l[s+c]}return n[a+8]=r,a}function Bf(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Lf(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Vu(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){const a=r[1],s=a.type;if(i=2===s?a.declTNode:1===s?r[6]:null,null===i)return-1;if(e++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return-1}function Bu(t,n,e){!function Nx(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(Ml)&&(i=e[Ml]),null==i&&(i=e[Ml]=Ix++);const r=255&i;n.data[t+(r>>5)]|=1<<r}(t,n,e)}function Yv(t,n,e){if(e&pt.Optional)return t;_u(n,"NodeInjector")}function Xv(t,n,e,i){if(e&pt.Optional&&void 0===i&&(i=null),0==(e&(pt.Self|pt.Host))){const r=t[9],a=Xa(void 0);try{return r?r.get(n,i,e&pt.Optional):bv(n,i,e&pt.Optional)}finally{Xa(a)}}return Yv(i,n,e)}function Qv(t,n,e,i=pt.Default,r){if(null!==t){const a=function Bx(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Ml)?t[Ml]:void 0;return"number"==typeof n?n>=0?255&n:Fx:n}(e);if("function"==typeof a){if(!Vv(n,t,i))return i&pt.Host?Yv(r,e,i):Xv(n,e,i,r);try{const s=a(i);if(null!=s||i&pt.Optional)return s;_u(e)}finally{Hv()}}else if("number"==typeof a){let s=null,o=Lf(t,n),l=-1,c=i&pt.Host?n[16][6]:null;for((-1===o||i&pt.SkipSelf)&&(l=-1===o?Vu(t,n):n[o+8],-1!==l&&Jv(i,!1)?(s=n[1],o=uo(l),n=ho(l,n)):o=-1);-1!==o;){const u=n[1];if(Kv(a,o,u.data)){const d=Vx(o,n,e,s,i,c);if(d!==Zv)return d}l=n[o+8],-1!==l&&Jv(i,n[1].data[o+8]===c)&&Kv(a,o,n)?(s=u,o=uo(l),n=ho(l,n)):o=-1}}}return Xv(n,e,i,r)}const Zv={};function Fx(){return new fo(si(),we())}function Vx(t,n,e,i,r,a){const s=n[1],o=s.data[t+8],u=Lu(o,s,e,null==i?Tu(o)&&Vf:i!=s&&0!=(3&o.type),r&pt.Host&&a===o);return null!==u?Nl(n,s,u,o):Zv}function Lu(t,n,e,i,r){const a=t.providerIndexes,s=n.data,o=1048575&a,l=t.directiveStart,u=a>>20,h=r?o+u:t.directiveEnd;for(let f=i?o:o+u;f<h;f++){const v=s[f];if(f<l&&e===v||f>=l&&v.type===e)return f}if(r){const f=s[l];if(f&&Gr(f)&&f.type===e)return l}return null}function Nl(t,n,e,i){let r=t[e];const a=n.data;if(function Rx(t){return t instanceof El}(r)){const s=r;s.resolving&&function AM(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new jt(-200,`Circular dependency in DI detected for ${t}${e}`)}(Oi(a[e]));const o=Fu(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Xa(s.injectImpl):null;Vv(t,i,pt.Default);try{r=t[e]=s.factory(void 0,a,t,i),n.firstCreatePass&&e>=i.directiveStart&&function Mx(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:a}=n.type.prototype;if(i){const s=Mv(n);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,s)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),a&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,a),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,a))}(e,a[e],n)}finally{null!==l&&Xa(l),Fu(o),s.resolving=!1,Hv()}}return r}function Kv(t,n,e){return!!(e[n+(t>>5)]&1<<t)}function Jv(t,n){return!(t&pt.Self||t&pt.Host&&n)}class fo{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return Qv(this._tNode,this._lView,n,i,e)}}function ki(t){return Qa(()=>{const n=t.prototype.constructor,e=n[Ea]||Uf(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const a=r[Ea]||Uf(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function Uf(t){return gv(t)?()=>{const n=Uf(Ct(t));return n&&n()}:Ms(t)}const go="__parameters__";function vo(t,n,e){return Qa(()=>{const i=function Hf(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...a){if(this instanceof r)return i.apply(this,a),this;const s=new r(...a);return o.annotation=s,o;function o(l,c,u){const d=l.hasOwnProperty(go)?l[go]:Object.defineProperty(l,go,{value:[]})[go];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class xt{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=He({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ux=new xt("AnalyzeForEntryComponents");function Tr(t,n){void 0===n&&(n=t);for(let e=0;e<t.length;e++){let i=t[e];Array.isArray(i)?(n===t&&(n=t.slice(0,e)),Tr(i,n)):n!==t&&n.push(i)}return n}function ua(t,n){t.forEach(e=>Array.isArray(e)?ua(e,n):n(e))}function t_(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Uu(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Vl(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function ar(t,n,e){let i=_o(t,n);return i>=0?t[1|i]=e:(i=~i,function jx(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function jf(t,n){const e=_o(t,n);if(e>=0)return t[1|e]}function _o(t,n){return function r_(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const a=i+(r-i>>1),s=t[a<<e];if(n===s)return a<<e;s>n?r=a:i=a+1}return~(r<<e)}(t,n,1)}const Bl={},$f="__NG_DI_FLAG__",Gu="ngTempTokenPath",Qx=/\n/gm,s_="__source",Kx=pn({provide:String,useValue:pn});let Ll;function o_(t){const n=Ll;return Ll=t,n}function Jx(t,n=pt.Default){if(void 0===Ll)throw new jt(203,"");return null===Ll?bv(t,void 0,n):Ll.get(t,n&pt.Optional?null:void 0,n)}function Pe(t,n=pt.Default){return(function VM(){return pf}()||Jx)(Ct(t),n)}function Wf(t){const n=[];for(let e=0;e<t.length;e++){const i=Ct(t[e]);if(Array.isArray(i)){if(0===i.length)throw new jt(900,"");let r,a=pt.Default;for(let s=0;s<i.length;s++){const o=i[s],l=eR(o);"number"==typeof l?-1===l?r=o.token:a|=l:r=o}n.push(Pe(r,a))}else n.push(Pe(i))}return n}function Ul(t,n){return t[$f]=n,t.prototype[$f]=n,t}function eR(t){return t[$f]}const Hl=Ul(vo("Inject",t=>({token:t})),-1),da=Ul(vo("Optional"),8),bo=Ul(vo("SkipSelf"),4);let zu,$u;function Co(t){var n;return(null===(n=function Yf(){if(void 0===zu&&(zu=null,hn.trustedTypes))try{zu=hn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return zu}())||void 0===n?void 0:n.createHTML(t))||t}function f_(t){var n;return(null===(n=function Xf(){if(void 0===$u&&($u=null,hn.trustedTypes))try{$u=hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return $u}())||void 0===n?void 0:n.createHTML(t))||t}class Rs{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class fR extends Rs{getTypeName(){return"HTML"}}class pR extends Rs{getTypeName(){return"Style"}}class gR extends Rs{getTypeName(){return"Script"}}class mR extends Rs{getTypeName(){return"URL"}}class vR extends Rs{getTypeName(){return"ResourceURL"}}function sr(t){return t instanceof Rs?t.changingThisBreaksApplicationSecurity:t}function ha(t,n){const e=m_(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===n}function m_(t){return t instanceof Rs&&t.getTypeName()||null}function v_(t){const n=new TR(t);return function DR(){try{return!!(new window.DOMParser).parseFromString(Co(""),"text/html")}catch(t){return!1}}()?new SR(n):n}class SR{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(Co(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class TR{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const i=this.inertDocument.createElement("body");e.appendChild(i)}}getInertBodyElement(n){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Co(n),e;const i=this.inertDocument.createElement("body");return i.innerHTML=Co(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(n){const e=n.attributes;for(let r=e.length-1;0<r;r--){const s=e.item(r).name;("xmlns:ns1"===s||0===s.indexOf("ns1:"))&&n.removeAttribute(s)}let i=n.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const MR=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,xR=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function jl(t){return(t=String(t)).match(MR)||t.match(xR)?t:"unsafe:"+t}function __(t){return(t=String(t)).split(",").map(n=>jl(n.trim())).join(", ")}function fa(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function zl(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const b_=fa("area,br,col,hr,img,wbr"),y_=fa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),C_=fa("rp,rt"),Qf=zl(b_,zl(y_,fa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zl(C_,fa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zl(C_,y_)),Zf=fa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Kf=fa("srcset"),w_=zl(Zf,Kf,fa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),RR=fa("script,style,template");class kR{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!Qf.hasOwnProperty(e))return this.sanitizedSomething=!0,!RR.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const a=i.item(r),s=a.name,o=s.toLowerCase();if(!w_.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let l=a.value;Zf[o]&&(l=jl(l)),Kf[o]&&(l=__(l)),this.buf.push(" ",s,'="',S_(l),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();Qf.hasOwnProperty(e)&&!b_.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(S_(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const AR=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ER=/([^\#-~ |!])/g;function S_(t){return t.replace(/&/g,"&amp;").replace(AR,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(ER,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Wu;function T_(t,n){let e=null;try{Wu=Wu||v_(t);let i=n?String(n):"";e=Wu.getInertBodyElement(i);let r=5,a=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=a,a=e.innerHTML,e=Wu.getInertBodyElement(i)}while(i!==a);return Co((new kR).sanitizeChildren(Jf(e)||e))}finally{if(e){const i=Jf(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Jf(t){return"content"in t&&function PR(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Qt=(()=>((Qt=Qt||{})[Qt.NONE=0]="NONE",Qt[Qt.HTML=1]="HTML",Qt[Qt.STYLE=2]="STYLE",Qt[Qt.SCRIPT=3]="SCRIPT",Qt[Qt.URL=4]="URL",Qt[Qt.RESOURCE_URL=5]="RESOURCE_URL",Qt))();function or(t){const n=function $l(){const t=we();return t&&t[12]}();return n?f_(n.sanitize(Qt.HTML,t)||""):ha(t,"HTML")?f_(sr(t)):T_(Df(),ut(t))}const x_="__ngContext__";function Ai(t,n){t[x_]=n}function np(t){const n=function Wl(t){return t[x_]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function rp(t){return t.ngOriginalError}function YR(t,...n){t.error(...n)}class wo{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n),i=function qR(t){return t&&t.ngErrorLogger||YR}(n);i(this._console,"ERROR",n),e&&i(this._console,"ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&rp(n);for(;e&&rp(e);)e=rp(e);return e||null}}const ZR=/^>|^->|<!--|-->|--!>|<!-$/g,KR=/(<|>)/;const P_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(hn))();function ks(t){return t.ownerDocument.defaultView}function pa(t){return t instanceof Function?t():t}var lr=(()=>((lr=lr||{})[lr.Important=1]="Important",lr[lr.DashCase=2]="DashCase",lr))();let ap;function sp(t,n){return ap(t,n)}function ql(t){const n=t[3];return Hr(n)?n[3]:n}function op(t){return V_(t[13])}function lp(t){return V_(t[4])}function V_(t){for(;null!==t&&!Hr(t);)t=t[4];return t}function To(t,n,e,i,r){if(null!=i){let a,s=!1;Hr(i)?a=i:la(i)&&(s=!0,i=i[0]);const o=ei(i);0===t&&null!==e?null==r?j_(n,e,o):As(n,e,o,r||null,!0):1===t&&null!==e?As(n,e,o,r||null,!0):2===t?Q_(n,o,s):3===t&&n.destroyNode(o),null!=a&&function y2(t,n,e,i,r){const a=e[7];a!==ei(e)&&To(n,t,i,a,r);for(let o=10;o<e.length;o++){const l=e[o];Yl(l[1],l,t,n,i,a)}}(n,t,a,e,r)}}function cp(t,n){return Ln(t)?t.createText(n):t.createTextNode(n)}function B_(t,n,e){Ln(t)?t.setValue(n,e):n.textContent=e}function l2(t,n){return t.createComment(function E_(t){return t.replace(ZR,n=>n.replace(KR,"\u200b$1\u200b"))}(n))}function up(t,n,e){if(Ln(t))return t.createElement(n,e);{const i=null!==e?function ix(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(e):null;return null===i?t.createElement(n):t.createElementNS(i,n)}}function L_(t,n){const e=t[9],i=e.indexOf(n),r=n[3];1024&n[2]&&(n[2]&=-1025,Rf(r,-1)),e.splice(i,1)}function dp(t,n){if(t.length<=10)return;const e=10+n,i=t[e];if(i){const r=i[17];null!==r&&r!==t&&L_(r,i),n>0&&(t[e-1][4]=i[4]);const a=Uu(t,10+n);!function c2(t,n){Yl(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(i[1],i);const s=a[19];null!==s&&s.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function U_(t,n){if(!(256&n[2])){const e=n[11];Ln(e)&&e.destroyNode&&Yl(t,n,e,3,null,null),function h2(t){let n=t[13];if(!n)return hp(t[1],t);for(;n;){let e=null;if(la(n))e=n[13];else{const i=n[10];i&&(e=i)}if(!e){for(;n&&!n[4]&&n!==t;)la(n)&&hp(n[1],n),n=n[3];null===n&&(n=t),la(n)&&hp(n[1],n),e=n&&n[4]}n=e}}(n)}}function hp(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function m2(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof El)){const a=e[i+1];if(Array.isArray(a))for(let s=0;s<a.length;s+=2){const o=r[a[s]],l=a[s+1];try{l.call(o)}finally{}}else try{a.call(r)}finally{}}}}(t,n),function g2(t,n){const e=t.cleanup,i=n[7];let r=-1;if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const s=e[a+1],o="function"==typeof s?s(n):ei(n[s]),l=i[r=e[a+2]],c=e[a+3];"boolean"==typeof c?o.removeEventListener(e[a],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),a+=2}else{const s=i[r=e[a+1]];e[a].call(s)}if(null!==i){for(let a=r+1;a<i.length;a++)i[a]();n[7]=null}}(t,n),1===n[1].type&&Ln(n[11])&&n[11].destroy();const e=n[17];if(null!==e&&Hr(n[3])){e!==n[3]&&L_(e,n);const i=n[19];null!==i&&i.detachView(t)}}}function H_(t,n,e){return G_(t,n.parent,e)}function G_(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[0];if(2&i.flags){const r=t.data[i.directiveStart].encapsulation;if(r===oa.None||r===oa.Emulated)return null}return Sr(i,e)}function As(t,n,e,i,r){Ln(t)?t.insertBefore(n,e,i,r):n.insertBefore(e,i,r)}function j_(t,n,e){Ln(t)?t.appendChild(n,e):n.appendChild(e)}function z_(t,n,e,i,r){null!==i?As(t,n,e,i,r):j_(t,n,e)}function qu(t,n){return Ln(t)?t.parentNode(n):n.parentNode}function $_(t,n,e){return q_(t,n,e)}function W_(t,n,e){return 40&t.type?Sr(t,e):null}let fp,q_=W_;function Y_(t,n){q_=t,fp=n}function Yu(t,n,e,i){const r=H_(t,i,n),a=n[11],o=$_(i.parent||n[6],i,n);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)z_(a,r,e[l],o,!1);else z_(a,r,e,o,!1);void 0!==fp&&fp(a,i,n,e,r)}function Xu(t,n){if(null!==n){const e=n.type;if(3&e)return Sr(n,t);if(4&e)return pp(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return Xu(t,i);{const r=t[n.index];return Hr(r)?pp(-1,r):ei(r)}}if(32&e)return sp(n,t)()||ei(t[n.index]);{const i=X_(t,n);return null!==i?Array.isArray(i)?i[0]:Xu(ql(t[16]),i):Xu(t,n.next)}}return null}function X_(t,n){return null!==n?t[16][6].projection[n.projection]:null}function pp(t,n){const e=10+t+1;if(e<n.length){const i=n[e],r=i[1].firstChild;if(null!==r)return Xu(i,r)}return n[7]}function Q_(t,n,e){const i=qu(t,n);i&&function v2(t,n,e,i){Ln(t)?t.removeChild(n,e,i):n.removeChild(e)}(t,i,n,e)}function gp(t,n,e,i,r,a,s){for(;null!=e;){const o=i[e.index],l=e.type;if(s&&0===n&&(o&&Ai(ei(o),i),e.flags|=4),64!=(64&e.flags))if(8&l)gp(t,n,e.child,i,r,a,!1),To(n,t,r,o,a);else if(32&l){const c=sp(e,i);let u;for(;u=c();)To(n,t,r,u,a);To(n,t,r,o,a)}else 16&l?Z_(t,n,i,e,r,a):To(n,t,r,o,a);e=s?e.projectionNext:e.next}}function Yl(t,n,e,i,r,a){gp(e,i,t.firstChild,n,r,a,!1)}function Z_(t,n,e,i,r,a){const s=e[16],l=s[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)To(n,t,r,l[c],a);else gp(t,n,l,s[3],r,a,!0)}function K_(t,n,e){Ln(t)?t.setAttribute(n,"style",e):n.style.cssText=e}function mp(t,n,e){Ln(t)?""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e):n.className=e}function J_(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=n.length;if(r+a===i||t.charCodeAt(r+a)<=32)return r}e=r+1}}const eb="ng-template";function w2(t,n,e){let i=0;for(;i<t.length;){let r=t[i++];if(e&&"class"===r){if(r=t[i],-1!==J_(r.toLowerCase(),n,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===n)return!0;return!1}}return!1}function tb(t){return 4===t.type&&t.value!==eb}function S2(t,n,e){return n===(4!==t.type||e?t.value:eb)}function T2(t,n,e){let i=4;const r=t.attrs||[],a=function x2(t){for(let n=0;n<t.length;n++)if(jv(t[n]))return n;return t.length}(r);let s=!1;for(let o=0;o<n.length;o++){const l=n[o];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!S2(t,l,e)||""===l&&1===n.length){if(jr(i))return!1;s=!0}}else{const c=8&i?l:n[++o];if(8&i&&null!==t.attrs){if(!w2(t.attrs,c,e)){if(jr(i))return!1;s=!0}continue}const d=D2(8&i?"class":l,r,tb(t),e);if(-1===d){if(jr(i))return!1;s=!0;continue}if(""!==c){let h;h=d>a?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==J_(f,c,0)||2&i&&c!==h){if(jr(i))return!1;s=!0}}}}else{if(!s&&!jr(i)&&!jr(l))return!1;if(s&&jr(l))continue;s=!1,i=l|1&i}}return jr(i)||s}function jr(t){return 0==(1&t)}function D2(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let a=!1;for(;r<n.length;){const s=n[r];if(s===t)return r;if(3===s||6===s)a=!0;else{if(1===s||2===s){let o=n[++r];for(;"string"==typeof o;)o=n[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=a?1:2}return-1}return function R2(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function nb(t,n,e=!1){for(let i=0;i<n.length;i++)if(T2(t,n[i],e))return!0;return!1}function k2(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function ib(t,n){return t?":not("+n.trim()+")":n}function A2(t){let n=t[0],e=1,i=2,r="",a=!1;for(;e<t.length;){let s=t[e];if("string"==typeof s)if(2&i){const o=t[++e];r+="["+s+(o.length>0?'="'+o+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!jr(s)&&(n+=ib(a,r),r=""),i=s,a=a||!jr(i);e++}return""!==r&&(n+=ib(a,r)),n}const dt={};function m(t){rb(zt(),we(),Vi()+t,xu())}function rb(t,n,e,i){if(!i)if(3==(3&n[2])){const a=t.preOrderCheckHooks;null!==a&&Pu(n,a,e)}else{const a=t.preOrderHooks;null!==a&&Iu(n,a,0,e)}Ja(e)}function Qu(t,n){return t<<17|n<<2}function zr(t){return t>>17&32767}function vp(t){return 2|t}function Na(t){return(131068&t)>>2}function _p(t,n){return-131069&t|n<<2}function bp(t){return 1|t}function gb(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const r=e[i],a=e[i+1];if(-1!==a){const s=t.data[a];If(r),s.contentQueries(2,n[a],a)}}}function Xl(t,n,e,i,r,a,s,o,l,c){const u=n.blueprint.slice();return u[0]=r,u[2]=140|i,Ev(u),u[3]=u[15]=t,u[8]=e,u[10]=s||t&&t[10],u[11]=o||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=a,u[16]=2==n.type?t[16]:u,u}function Do(t,n,e,i,r){let a=t.data[n];if(null===a)a=Rp(t,n,e,i,r),function gx(){return at.lFrame.inI18n}()&&(a.flags|=64);else if(64&a.type){a.type=e,a.value=i,a.attrs=r;const s=Al();a.injectorIndex=null===s?-1:s.injectorIndex}return ca(a,!0),a}function Rp(t,n,e,i,r){const a=Iv(),s=kf(),l=t.data[n]=function Y2(t,n,e,i,r,a){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?a:a&&a.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=l),null!==a&&(s?null==a.child&&null!==l.parent&&(a.child=l):null===a.next&&(a.next=l)),l}function Mo(t,n,e,i){if(0===e)return-1;const r=n.length;for(let a=0;a<e;a++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function Ql(t,n,e){ku(n);try{const i=t.viewQuery;null!==i&&Vp(1,i,e);const r=t.template;null!==r&&mb(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&gb(t,n),t.staticViewQueries&&Vp(2,t.viewQuery,e);const a=t.components;null!==a&&function $2(t,n){for(let e=0;e<n.length;e++)hk(t,n[e])}(n,a)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[2]&=-5,Au()}}function xo(t,n,e,i){const r=n[2];if(256==(256&r))return;ku(n);const a=xu();try{Ev(n),function Nv(t){return at.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&mb(t,n,e,2,i);const s=3==(3&r);if(!a)if(s){const c=t.preOrderCheckHooks;null!==c&&Pu(n,c,null)}else{const c=t.preOrderHooks;null!==c&&Iu(n,c,0,null),Nf(n,0)}if(function uk(t){for(let n=op(t);null!==n;n=lp(n)){if(!n[2])continue;const e=n[9];for(let i=0;i<e.length;i++){const r=e[i],a=r[3];0==(1024&r[2])&&Rf(a,1),r[2]|=1024}}}(n),function ck(t){for(let n=op(t);null!==n;n=lp(n))for(let e=10;e<n.length;e++){const i=n[e],r=i[1];xf(i)&&xo(r,i,r.template,i[8])}}(n),null!==t.contentQueries&&gb(t,n),!a)if(s){const c=t.contentCheckHooks;null!==c&&Pu(n,c)}else{const c=t.contentHooks;null!==c&&Iu(n,c,1),Nf(n,1)}!function j2(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)Ja(~r);else{const a=r,s=e[++i],o=e[++i];mx(s,a),o(2,n[a])}}}finally{Ja(-1)}}(t,n);const o=t.components;null!==o&&function z2(t,n){for(let e=0;e<n.length;e++)dk(t,n[e])}(n,o);const l=t.viewQuery;if(null!==l&&Vp(2,l,i),!a)if(s){const c=t.viewCheckHooks;null!==c&&Pu(n,c)}else{const c=t.viewHooks;null!==c&&Iu(n,c,2),Nf(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Rf(n[3],-1))}finally{Au()}}function W2(t,n,e,i){const r=n[10],a=!xu(),s=Av(n);try{a&&!s&&r.begin&&r.begin(),s&&Ql(t,n,i),xo(t,n,e,i)}finally{a&&!s&&r.end&&r.end()}}function mb(t,n,e,i,r){const a=Vi(),s=2&i;try{Ja(-1),s&&n.length>20&&rb(t,n,20,xu()),e(i,r)}finally{Ja(a)}}function kp(t,n,e){!Pv()||(function tk(t,n,e,i){const r=e.directiveStart,a=e.directiveEnd;t.firstCreatePass||Il(e,n),Ai(i,n);const s=e.initialInputs;for(let o=r;o<a;o++){const l=t.data[o],c=Gr(l);c&&sk(n,e,l);const u=Nl(n,t,o,e);Ai(u,n),null!==s&&ok(0,o-r,u,l,0,s),c&&(rr(e.index,n)[8]=u)}}(t,n,e,Sr(e,n)),128==(128&e.flags)&&function nk(t,n,e){const i=e.directiveStart,r=e.directiveEnd,s=e.index,o=function vx(){return at.lFrame.currentDirectiveIndex}();try{Ja(s);for(let l=i;l<r;l++){const c=t.data[l],u=n[l];Ef(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&Db(c,u)}}finally{Ja(-1),Ef(o)}}(t,n,e))}function Ap(t,n,e=Sr){const i=n.localNames;if(null!==i){let r=n.index+1;for(let a=0;a<i.length;a+=2){const s=i[a+1],o=-1===s?e(n,t):t[s];t[r++]=o}}}function _b(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Ju(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Ju(t,n,e,i,r,a,s,o,l,c){const u=20+i,d=u+r,h=function q2(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:dt);return e}(u,d),f="function"==typeof c?c():c;return h[1]={type:t,blueprint:h,template:e,queries:null,viewQuery:o,declTNode:n,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function Cb(t,n,e,i){const r=Eb(n);null===e?r.push(i):(r.push(e),t.firstCreatePass&&Pb(t).push(i,r.length-1))}function wb(t,n,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(e=null===e?{}:e).hasOwnProperty(i)?e[i].push(n,r):e[i]=[n,r]}return e}function cr(t,n,e,i,r,a,s,o){const l=Sr(n,e);let u,c=n.inputs;!o&&null!=c&&(u=c[i])?(Ob(t,e,u,i,r),Tu(n)&&function Z2(t,n){const e=rr(n,t);16&e[2]||(e[2]|=64)}(e,n.index)):3&n.type&&(i=function Q2(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=s?s(r,n.value||"",i):r,Ln(a)?a.setProperty(l,i,r):Ff(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function Ep(t,n,e,i){let r=!1;if(Pv()){const a=function ik(t,n,e){const i=t.directiveRegistry;let r=null;if(i)for(let a=0;a<i.length;a++){const s=i[a];nb(e,s.selectors,!1)&&(r||(r=[]),Bu(Il(e,n),t,s.type),Gr(s)?(Mb(t,e),r.unshift(s)):r.push(s))}return r}(t,n,e),s=null===i?null:{"":-1};if(null!==a){r=!0,xb(e,t.data.length,a.length);for(let u=0;u<a.length;u++){const d=a[u];d.providersResolver&&d.providersResolver(d)}let o=!1,l=!1,c=Mo(t,n,a.length,null);for(let u=0;u<a.length;u++){const d=a[u];e.mergedAttrs=Ou(e.mergedAttrs,d.hostAttrs),Rb(t,e,n,c,d),ak(c,d,s),null!==d.contentQueries&&(e.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=128);const h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),o=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function X2(t,n){const i=n.directiveEnd,r=t.data,a=n.attrs,s=[];let o=null,l=null;for(let c=n.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===a||tb(n)?null:lk(d,a);s.push(h),o=wb(d,c,o),l=wb(u.outputs,c,l)}null!==o&&(o.hasOwnProperty("class")&&(n.flags|=16),o.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=s,n.inputs=o,n.outputs=l}(t,e)}s&&function rk(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const a=e[n[r+1]];if(null==a)throw new jt(-301,!1);i.push(n[r],a)}}}(e,i,s)}return e.mergedAttrs=Ou(e.mergedAttrs,e.attrs),r}function Tb(t,n,e,i,r,a){const s=a.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const l=~n.index;(function ek(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(o)!=l&&o.push(l),o.push(i,r,s)}}function Db(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Mb(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function ak(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;Gr(n)&&(e[""]=t)}}function xb(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function Rb(t,n,e,i,r){t.data[i]=r;const a=r.factory||(r.factory=Ms(r.type)),s=new El(a,Gr(r),null);t.blueprint[i]=s,e[i]=s,Tb(t,n,0,i,Mo(t,e,r.hostVars,dt),r)}function sk(t,n,e){const i=Sr(n,t),r=_b(e),a=t[10],s=ed(t,Xl(t,r,null,e.onPush?64:16,i,n,a,a.createRenderer(i,e),null,null));t[n.index]=s}function Pp(t,n,e,i,r,a,s){if(null==a)Ln(t)?t.removeAttribute(n,r,e):n.removeAttribute(r);else{const o=null==s?ut(a):s(a,i||"",r);Ln(t)?t.setAttribute(n,r,o,e):e?n.setAttributeNS(e,r,o):n.setAttribute(r,o)}}function ok(t,n,e,i,r,a){const s=a[n];if(null!==s){const o=i.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==o?i.setInput(e,d,c,u):e[u]=d}}}function lk(t,n){let e=null,i=0;for(;i<n.length;){const r=n[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],n[i+1])),i+=2}else i+=2;else i+=4}return e}function kb(t,n,e,i){return new Array(t,!0,!1,n,null,0,i,e,null,null)}function dk(t,n){const e=rr(n,t);if(xf(e)){const i=e[1];80&e[2]?xo(i,e,i.template,e[8]):e[5]>0&&Ip(e)}}function Ip(t){for(let i=op(t);null!==i;i=lp(i))for(let r=10;r<i.length;r++){const a=i[r];if(1024&a[2]){const s=a[1];xo(s,a,s.template,a[8])}else a[5]>0&&Ip(a)}const e=t[1].components;if(null!==e)for(let i=0;i<e.length;i++){const r=rr(e[i],t);xf(r)&&r[5]>0&&Ip(r)}}function hk(t,n){const e=rr(n,t),i=e[1];(function fk(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(i,e),Ql(i,e,e[8])}function ed(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Np(t){for(;t;){t[2]|=64;const n=ql(t);if(qM(t)&&!n)return t;t=n}return null}function Fp(t,n,e){const i=n[10];i.begin&&i.begin();try{xo(t,n,t.template,e)}catch(r){throw Nb(n,r),r}finally{i.end&&i.end()}}function Ab(t){!function Op(t){for(let n=0;n<t.components.length;n++){const e=t.components[n],i=np(e),r=i[1];W2(r,i,r.template,e)}}(t[8])}function Vp(t,n,e){If(0),n(t,e)}const vk=(()=>Promise.resolve(null))();function Eb(t){return t[7]||(t[7]=[])}function Pb(t){return t.cleanup||(t.cleanup=[])}function Nb(t,n){const e=t[9],i=e?e.get(wo,null):null;i&&i.handleError(n)}function Ob(t,n,e,i,r){for(let a=0;a<e.length;){const s=e[a++],o=e[a++],l=n[s],c=t.data[s];null!==c.setInput?c.setInput(l,r,i,o):l[o]=r}}function Oa(t,n,e){const i=Mu(n,t);B_(t[11],i,e)}function td(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==n)for(let s=0;s<n.length;s++){const o=n[s];"number"==typeof o?a=o:1==a?r=uf(r,o):2==a&&(i=uf(i,o+": "+n[++s]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}const Bp=new xt("INJECTOR",-1);class Fb{get(n,e=Bl){if(e===Bl){const i=new Error(`NullInjectorError: No provider for ${sn(n)}!`);throw i.name="NullInjectorError",i}return e}}const Lp=new xt("Set Injector scope."),Zl={},yk={};let Up;function Vb(){return void 0===Up&&(Up=new Fb),Up}function Bb(t,n=null,e=null,i){const r=Lb(t,n,e,i);return r._resolveInjectorDefTypes(),r}function Lb(t,n=null,e=null,i){return new Ck(t,e,n||Vb(),i)}class Ck{constructor(n,e,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];e&&ua(e,o=>this.processProvider(o,n,e)),ua([n],o=>this.processInjectorType(o,[],a)),this.records.set(Bp,Ro(void 0,this));const s=this.records.get(Lp);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof n?null:sn(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,e=Bl,i=pt.Default){this.assertNotDestroyed();const r=o_(this),a=Xa(void 0);try{if(!(i&pt.SkipSelf)){let o=this.records.get(n);if(void 0===o){const l=function kk(t){return"function"==typeof t||"object"==typeof t&&t instanceof xt}(n)&&hf(n);o=l&&this.injectableDefInScope(l)?Ro(Hp(n),Zl):null,this.records.set(n,o)}if(null!=o)return this.hydrate(n,o)}return(i&pt.Self?Vb():this.parent).get(n,e=i&pt.Optional&&e===Bl?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[Gu]=s[Gu]||[]).unshift(sn(n)),r)throw s;return function tR(t,n,e,i){const r=t[Gu];throw n[s_]&&r.unshift(n[s_]),t.message=function nR(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=sn(n);if(Array.isArray(n))r=n.map(sn).join(" -> ");else if("object"==typeof n){let a=[];for(let s in n)if(n.hasOwnProperty(s)){let o=n[s];a.push(s+":"+("string"==typeof o?JSON.stringify(o):sn(o)))}r=`{${a.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(Qx,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[Gu]=null,t}(s,n,"R3InjectorError",this.source)}throw s}finally{Xa(a),o_(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((i,r)=>n.push(sn(r))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new jt(205,!1)}processInjectorType(n,e,i){if(!(n=Ct(n)))return!1;let r=vv(n);const a=null==r&&n.ngModule||void 0,s=void 0===a?n:a,o=-1!==i.indexOf(s);if(void 0!==a&&(r=vv(a)),null==r)return!1;if(null!=r.imports&&!o){let u;i.push(s);try{ua(r.imports,d=>{this.processInjectorType(d,e,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];ua(f,v=>this.processProvider(v,h,f||gn))}}this.injectorDefTypes.add(s);const l=Ms(s)||(()=>new s);this.records.set(s,Ro(l,Zl));const c=r.providers;if(null!=c&&!o){const u=n;ua(c,d=>this.processProvider(d,u,c))}return void 0!==a&&void 0!==n.providers}processProvider(n,e,i){let r=ko(n=Ct(n))?n:Ct(n&&n.provide);const a=function Sk(t,n,e){return Hb(t)?Ro(void 0,t.useValue):Ro(Ub(t),Zl)}(n);if(ko(n)||!0!==n.multi)this.records.get(r);else{let s=this.records.get(r);s||(s=Ro(void 0,Zl,!0),s.factory=()=>Wf(s.multi),this.records.set(r,s)),r=n,s.multi.push(n)}this.records.set(r,a)}hydrate(n,e){return e.value===Zl&&(e.value=yk,e.value=e.factory()),"object"==typeof e.value&&e.value&&function Rk(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Ct(n.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Hp(t){const n=hf(t),e=null!==n?n.factory:Ms(t);if(null!==e)return e;if(t instanceof xt)throw new jt(204,!1);if(t instanceof Function)return function wk(t){const n=t.length;if(n>0)throw Vl(n,"?"),new jt(204,!1);const e=function NM(t){const n=t&&(t[bu]||t[_v]);if(n){const e=function OM(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),n}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new jt(204,!1)}function Ub(t,n,e){let i;if(ko(t)){const r=Ct(t);return Ms(r)||Hp(r)}if(Hb(t))i=()=>Ct(t.useValue);else if(function Dk(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Wf(t.deps||[]));else if(function Tk(t){return!(!t||!t.useExisting)}(t))i=()=>Pe(Ct(t.useExisting));else{const r=Ct(t&&(t.useClass||t.provide));if(!function xk(t){return!!t.deps}(t))return Ms(r)||Hp(r);i=()=>new r(...Wf(t.deps))}return i}function Ro(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Hb(t){return null!==t&&"object"==typeof t&&Kx in t}function ko(t){return"function"==typeof t}let Yn=(()=>{class t{static create(e,i){var r;if(Array.isArray(e))return Bb({name:""},i,e,"");{const a=null!==(r=e.name)&&void 0!==r?r:"";return Bb({name:a},e.parent,e.providers,a)}}}return t.THROW_IF_NOT_FOUND=Bl,t.NULL=new Fb,t.\u0275prov=He({token:t,providedIn:"any",factory:()=>Pe(Bp)}),t.__NG_ELEMENT_ID__=-1,t})();function Vk(t,n){Eu(np(t)[1],si())}function en(t){let n=function Jb(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if(Gr(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new jt(903,"");r=n.\u0275dir}if(r){if(e){i.push(r);const s=t;s.inputs=zp(t.inputs),s.declaredInputs=zp(t.declaredInputs),s.outputs=zp(t.outputs);const o=r.hostBindings;o&&Hk(t,o);const l=r.viewQuery,c=r.contentQueries;if(l&&Lk(t,l),c&&Uk(t,c),cf(t.inputs,r.inputs),cf(t.declaredInputs,r.declaredInputs),cf(t.outputs,r.outputs),Gr(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let s=0;s<a.length;s++){const o=a[s];o&&o.ngInherit&&o(t),o===en&&(e=!1)}}n=Object.getPrototypeOf(n)}!function Bk(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=Ou(r.hostAttrs,e=Ou(e,r.hostAttrs))}}(i)}function zp(t){return t===io?{}:t===gn?[]:t}function Lk(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function Uk(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,a)=>{n(i,r,a),e(i,r,a)}:n}function Hk(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}let nd=null;function Ao(){if(!nd){const t=hn.Symbol;if(t&&t.iterator)nd=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<n.length;++e){const i=n[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(nd=i)}}}return nd}function Kl(t){return!!$p(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ao()in t)}function $p(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ma(t,n,e){return t[n]=e}function Jl(t,n){return t[n]}function Ei(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function Es(t,n,e,i){const r=Ei(t,n,e);return Ei(t,n+1,i)||r}function id(t,n,e,i,r){const a=Es(t,n,e,i);return Ei(t,n+2,r)||a}function Dr(t,n,e,i,r,a){const s=Es(t,n,e,i);return Es(t,n+2,r,a)||s}function ln(t,n,e,i){const r=we();return Ei(r,co(),n)&&(zt(),function ga(t,n,e,i,r,a){const s=Sr(t,n);Pp(n[11],s,a,t.value,e,i,r)}(Un(),r,t,n,e,i)),ln}function Po(t,n,e,i){return Ei(t,co(),e)?n+ut(e)+i:dt}function I(t,n,e,i,r,a,s,o){const l=we(),c=zt(),u=t+20,d=c.firstCreatePass?function Yk(t,n,e,i,r,a,s,o,l){const c=n.consts,u=Do(n,t,4,s||null,Ka(c,o));Ep(n,e,u,Ka(c,l)),Eu(n,u);const d=u.tViews=Ju(2,u,i,r,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c);return null!==n.queries&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}(u,c,l,n,e,i,r,a,s):c.data[u];ca(d,!1);const h=l[11].createComment("");Yu(c,l,h,d),Ai(h,l),ed(l,l[u]=kb(h,l,h,d)),Du(d)&&kp(c,l,d),null!=s&&Ap(l,d,o)}function Pt(t){return lo(function px(){return at.lFrame.contextLView}(),20+t)}function E(t,n=pt.Default){const e=we();return null===e?Pe(t,n):Qv(si(),e,Ct(t),n)}function Qp(){throw new Error("invalid")}function C(t,n,e){const i=we();return Ei(i,co(),n)&&cr(zt(),Un(),i,t,n,i[11],e,!1),C}function Zp(t,n,e,i,r){const s=r?"class":"style";Ob(t,e,n.inputs[s],s,i)}function g(t,n,e,i){const r=we(),a=zt(),s=20+t,o=r[11],l=r[s]=up(o,n,function Dx(){return at.lFrame.currentNamespace}()),c=a.firstCreatePass?function gA(t,n,e,i,r,a,s){const o=n.consts,c=Do(n,t,2,r,Ka(o,a));return Ep(n,e,c,Ka(o,s)),null!==c.attrs&&td(c,c.attrs,!1),null!==c.mergedAttrs&&td(c,c.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,c),c}(s,a,r,0,n,e,i):a.data[s];ca(c,!0);const u=c.mergedAttrs;null!==u&&Nu(o,l,u);const d=c.classes;null!==d&&mp(o,l,d);const h=c.styles;return null!==h&&K_(o,l,h),64!=(64&c.flags)&&Yu(a,r,l,c),0===function cx(){return at.lFrame.elementDepthCount}()&&Ai(l,r),function ux(){at.lFrame.elementDepthCount++}(),Du(c)&&(kp(a,r,c),function vb(t,n,e){if(bf(n)){const r=n.directiveEnd;for(let a=n.directiveStart;a<r;a++){const s=t.data[a];s.contentQueries&&s.contentQueries(1,e[a],a)}}}(a,c,r)),null!==i&&Ap(r,c),g}function p(){let t=si();kf()?Af():(t=t.parent,ca(t,!1));const n=t;!function dx(){at.lFrame.elementDepthCount--}();const e=zt();return e.firstCreatePass&&(Eu(e,t),bf(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function Ax(t){return 0!=(16&t.flags)}(n)&&Zp(e,n,we(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Ex(t){return 0!=(32&t.flags)}(n)&&Zp(e,n,we(),n.stylesWithoutHost,!1),p}function H(t,n,e,i){return g(t,n,e,i),p(),H}function be(){return we()}function ec(t){return!!t&&"function"==typeof t.then}const eg=function y1(t){return!!t&&"function"==typeof t.subscribe};function F(t,n,e,i){const r=we(),a=zt(),s=si();return function w1(t,n,e,i,r,a,s,o){const l=Du(i),u=t.firstCreatePass&&Pb(t),d=n[8],h=Eb(n);let f=!0;if(3&i.type||o){const D=Sr(i,n),w=o?o(D):D,y=h.length,P=o?U=>o(ei(U[i.index])):i.index;if(Ln(e)){let U=null;if(!o&&l&&(U=function vA(t,n,e,i){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const s=r[a];if(s===e&&r[a+1]===i){const o=n[7],l=r[a+2];return o.length>l?o[l]:null}"string"==typeof s&&(a+=2)}return null}(t,n,r,i.index)),null!==U)(U.__ngLastListenerFn__||U).__ngNextListenerFn__=a,U.__ngLastListenerFn__=a,f=!1;else{a=tg(i,n,d,a,!1);const Q=e.listen(w,r,a);h.push(a,Q),u&&u.push(r,P,y,y+1)}}else a=tg(i,n,d,a,!0),w.addEventListener(r,a,s),h.push(a),u&&u.push(r,P,y,s)}else a=tg(i,n,d,a,!1);const v=i.outputs;let _;if(f&&null!==v&&(_=v[r])){const D=_.length;if(D)for(let w=0;w<D;w+=2){const J=n[_[w]][_[w+1]].subscribe(a),ge=h.length;h.push(a,J),u&&u.push(r,i.index,ge,-(ge+1))}}}(a,r,r[11],s,t,n,!!e,i),F}function S1(t,n,e,i){try{return!1!==e(i)}catch(r){return Nb(t,r),!1}}function tg(t,n,e,i,r){return function a(s){if(s===Function)return i;const o=2&t.flags?rr(t.index,n):n;0==(32&n[2])&&Np(o);let l=S1(n,0,i,s),c=a.__ngNextListenerFn__;for(;c;)l=S1(n,0,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function x(t=1){return function bx(t){return(at.lFrame.contextLView=function yx(t,n){for(;t>0;)n=n[15],t--;return n}(t,at.lFrame.contextLView))[8]}(t)}function _A(t,n){let e=null;const i=function M2(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(0==(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const a=n[r];if("*"!==a){if(null===i?nb(t,a,!0):k2(i,a))return r}else e=r}return e}function ad(t){const n=we()[16][6];if(!n.projection){const i=n.projection=Vl(t?t.length:1,null),r=i.slice();let a=n.child;for(;null!==a;){const s=t?_A(a,t):0;null!==s&&(r[s]?r[s].projectionNext=a:i[s]=a,r[s]=a),a=a.next}}}function sd(t,n=0,e){const i=we(),r=zt(),a=Do(r,20+t,16,null,e||null);null===a.projection&&(a.projection=n),Af(),64!=(64&a.flags)&&function b2(t,n,e){Z_(n[11],0,n,e,H_(t,e,n),$_(e.parent||n[6],e,n))}(r,i,a)}function li(t,n,e){return od(t,"",n,"",e),li}function od(t,n,e,i,r){const a=we(),s=Po(a,n,e,i);return s!==dt&&cr(zt(),Un(),a,t,s,a[11],r,!1),od}function P1(t,n,e,i,r){const a=t[e+1],s=null===n;let o=i?zr(a):Na(a),l=!1;for(;0!==o&&(!1===l||s);){const u=t[o+1];CA(t[o],n)&&(l=!0,t[o+1]=i?bp(u):vp(u)),o=i?zr(u):Na(u)}l&&(t[e+1]=i?vp(a):bp(a))}function CA(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&_o(t,n)>=0}const ci={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function I1(t){return t.substring(ci.key,ci.keyEnd)}function N1(t,n){const e=ci.textEnd;return e===n?-1:(n=ci.keyEnd=function DA(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,ci.key=n,e),Ho(t,n,e))}function Ho(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function tc(t,n,e){return Wr(t,n,e,!1),tc}function it(t,n){return Wr(t,n,null,!0),it}function is(t){qr(ar,_a,t,!0)}function _a(t,n){for(let e=function SA(t){return function F1(t){ci.key=0,ci.keyEnd=0,ci.value=0,ci.valueEnd=0,ci.textEnd=t.length}(t),N1(t,Ho(t,0,ci.textEnd))}(n);e>=0;e=N1(n,e))ar(t,I1(n),!0)}function Wr(t,n,e,i){const r=we(),a=zt(),s=Ia(2);a.firstUpdatePass&&U1(a,t,s,i),n!==dt&&Ei(r,s,n)&&G1(a,a.data[Vi()],r,r[11],t,r[s+1]=function OA(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=sn(sr(t)))),t}(n,e),i,s)}function qr(t,n,e,i){const r=zt(),a=Ia(2);r.firstUpdatePass&&U1(r,null,a,i);const s=we();if(e!==dt&&Ei(s,a,e)){const o=r.data[Vi()];if(z1(o,i)&&!L1(r,a)){let l=i?o.classesWithoutHost:o.stylesWithoutHost;null!==l&&(e=uf(l,e||"")),Zp(r,o,s,e,i)}else!function NA(t,n,e,i,r,a,s,o){r===dt&&(r=gn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<a.length?a[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,f=c<a.length?a[c+1]:void 0;let _,v=null;u===d?(l+=2,c+=2,h!==f&&(v=d,_=f)):null===d||null!==u&&u<d?(l+=2,v=u):(c+=2,v=d,_=f),null!==v&&G1(t,n,e,i,v,_,s,o),u=l<r.length?r[l]:null,d=c<a.length?a[c]:null}}(r,o,s,s[11],s[a+1],s[a+1]=function IA(t,n,e){if(null==e||""===e)return gn;const i=[],r=sr(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(i,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(i,a,r[a]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,a)}}function L1(t,n){return n>=t.expandoStartIndex}function U1(t,n,e,i){const r=t.data;if(null===r[e+1]){const a=r[Vi()],s=L1(t,e);z1(a,i)&&null===n&&!s&&(n=!1),n=function kA(t,n,e,i){const r=function Pf(t){const n=at.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let a=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=nc(e=ng(null,t,n,e,i),n.attrs,i),a=null);else{const s=n.directiveStylingLast;if(-1===s||t[s]!==r)if(e=ng(r,t,n,e,i),null===a){let l=function AA(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==Na(i))return t[zr(i)]}(t,n,i);void 0!==l&&Array.isArray(l)&&(l=ng(null,t,n,l[1],i),l=nc(l,n.attrs,i),function EA(t,n,e,i){t[zr(e?n.classBindings:n.styleBindings)]=i}(t,n,i,l))}else a=function PA(t,n,e){let i;const r=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<r;a++)i=nc(i,t[a].hostAttrs,e);return nc(i,n.attrs,e)}(t,n,i)}return void 0!==a&&(i?n.residualClasses=a:n.residualStyles=a),e}(r,a,n,i),function bA(t,n,e,i,r,a){let s=a?n.classBindings:n.styleBindings,o=zr(s),l=Na(s);t[i]=e;let u,c=!1;if(Array.isArray(e)){const d=e;u=d[1],(null===u||_o(d,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const h=zr(t[o+1]);t[i+1]=Qu(h,o),0!==h&&(t[h+1]=_p(t[h+1],i)),t[o+1]=function I2(t,n){return 131071&t|n<<17}(t[o+1],i)}else t[i+1]=Qu(o,0),0!==o&&(t[o+1]=_p(t[o+1],i)),o=i;else t[i+1]=Qu(l,0),0===o?o=i:t[l+1]=_p(t[l+1],i),l=i;c&&(t[i+1]=vp(t[i+1])),P1(t,u,i,!0),P1(t,u,i,!1),function yA(t,n,e,i,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof n&&_o(a,n)>=0&&(e[i+1]=bp(e[i+1]))}(n,u,t,i,a),s=Qu(o,l),a?n.classBindings=s:n.styleBindings=s}(r,a,n,e,s,i)}}function ng(t,n,e,i,r){let a=null;const s=e.directiveEnd;let o=e.directiveStylingLast;for(-1===o?o=e.directiveStart:o++;o<s&&(a=n[o],i=nc(i,a.hostAttrs,r),a!==t);)o++;return null!==t&&(e.directiveStylingLast=o),i}function nc(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let a=0;a<n.length;a++){const s=n[a];"number"==typeof s?r=s:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ar(t,s,!!e||n[++a]))}return void 0===t?null:t}function G1(t,n,e,i,r,a,s,o){if(!(3&n.type))return;const l=t.data,c=l[o+1];ld(function ob(t){return 1==(1&t)}(c)?j1(l,n,e,r,Na(c),s):void 0)||(ld(a)||function sb(t){return 2==(2&t)}(c)&&(a=j1(l,null,e,r,o,s)),function C2(t,n,e,i,r){const a=Ln(t);if(n)r?a?t.addClass(e,i):e.classList.add(i):a?t.removeClass(e,i):e.classList.remove(i);else{let s=-1===i.indexOf("-")?void 0:lr.DashCase;if(null==r)a?t.removeStyle(e,i,s):e.style.removeProperty(i);else{const o="string"==typeof r&&r.endsWith("!important");o&&(r=r.slice(0,-10),s|=lr.Important),a?t.setStyle(e,i,r,s):e.style.setProperty(i,r,o?"important":"")}}}(i,s,Mu(Vi(),e),r,a))}function j1(t,n,e,i,r,a){const s=null===n;let o;for(;r>0;){const l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=e[r+1];h===dt&&(h=d?gn:void 0);let f=d?jf(h,i):u===i?h:void 0;if(c&&!ld(f)&&(f=jf(l,i)),ld(f)&&(o=f,s))return o;const v=t[r+1];r=s?zr(v):Na(v)}if(null!==n){let l=a?n.residualClasses:n.residualStyles;null!=l&&(o=jf(l,i))}return o}function ld(t){return void 0!==t}function z1(t,n){return 0!=(t.flags&(n?16:32))}function b(t,n=""){const e=we(),i=zt(),r=t+20,a=i.firstCreatePass?Do(i,r,1,n,null):i.data[r],s=e[r]=cp(e[11],n);Yu(i,e,s,a),ca(a,!1)}function ht(t){return de("",t,""),ht}function de(t,n,e){const i=we(),r=Po(i,t,n,e);return r!==dt&&Oa(i,Vi(),r),de}function Nn(t,n,e,i,r){const a=we(),s=function Io(t,n,e,i,r,a){const o=Es(t,Pa(),e,r);return Ia(2),o?n+ut(e)+i+ut(r)+a:dt}(a,t,n,e,i,r);return s!==dt&&Oa(a,Vi(),s),Nn}function ig(t,n,e,i,r,a,s){const o=we(),l=function No(t,n,e,i,r,a,s,o){const c=id(t,Pa(),e,r,s);return Ia(3),c?n+ut(e)+i+ut(r)+a+ut(s)+o:dt}(o,t,n,e,i,r,a,s);return l!==dt&&Oa(o,Vi(),l),ig}function rg(t,n,e){qr(ar,_a,Po(we(),t,n,e),!0)}function Z1(t,n,e,i,r,a,s,o,l){qr(ar,_a,function Oo(t,n,e,i,r,a,s,o,l,c){const d=Dr(t,Pa(),e,r,s,l);return Ia(4),d?n+ut(e)+i+ut(r)+a+ut(s)+o+ut(l)+c:dt}(we(),t,n,e,i,r,a,s,o,l),!0)}function rs(t,n,e){const i=we();return Ei(i,co(),n)&&cr(zt(),Un(),i,t,n,i[11],e,!0),rs}const Ps=void 0;var JA=["en",[["a","p"],["AM","PM"],Ps],[["AM","PM"],Ps,Ps],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ps,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ps,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ps,"{1} 'at' {0}",Ps],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function KA(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let Go={};function Li(t){const n=function eE(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=cy(n);if(e)return e;const i=n.split("-")[0];if(e=cy(i),e)return e;if("en"===i)return JA;throw new Error(`Missing locale data for the locale "${t}".`)}function ly(t){return Li(t)[Be.PluralCase]}function cy(t){return t in Go||(Go[t]=hn.ng&&hn.ng.common&&hn.ng.common.locales&&hn.ng.common.locales[t]),Go[t]}var Be=(()=>((Be=Be||{})[Be.LocaleId=0]="LocaleId",Be[Be.DayPeriodsFormat=1]="DayPeriodsFormat",Be[Be.DayPeriodsStandalone=2]="DayPeriodsStandalone",Be[Be.DaysFormat=3]="DaysFormat",Be[Be.DaysStandalone=4]="DaysStandalone",Be[Be.MonthsFormat=5]="MonthsFormat",Be[Be.MonthsStandalone=6]="MonthsStandalone",Be[Be.Eras=7]="Eras",Be[Be.FirstDayOfWeek=8]="FirstDayOfWeek",Be[Be.WeekendRange=9]="WeekendRange",Be[Be.DateFormat=10]="DateFormat",Be[Be.TimeFormat=11]="TimeFormat",Be[Be.DateTimeFormat=12]="DateTimeFormat",Be[Be.NumberSymbols=13]="NumberSymbols",Be[Be.NumberFormats=14]="NumberFormats",Be[Be.CurrencyCode=15]="CurrencyCode",Be[Be.CurrencySymbol=16]="CurrencySymbol",Be[Be.CurrencyName=17]="CurrencyName",Be[Be.Currencies=18]="Currencies",Be[Be.Directionality=19]="Directionality",Be[Be.PluralCase=20]="PluralCase",Be[Be.ExtraData=21]="ExtraData",Be))();const tE=["zero","one","two","few","many"],cd="en-US",ud={marker:"element"},dd={marker:"ICU"};var Hn=(()=>((Hn=Hn||{})[Hn.SHIFT=2]="SHIFT",Hn[Hn.APPEND_EAGERLY=1]="APPEND_EAGERLY",Hn[Hn.COMMENT=2]="COMMENT",Hn))();let uy=cd;function dy(t,n,e){const i=n.insertBeforeIndex,r=Array.isArray(i)?i[0]:i;return null===r?W_(t,0,e):ei(e[r])}function hy(t,n,e,i,r){const a=n.insertBeforeIndex;if(Array.isArray(a)){let s=i,o=null;if(3&n.type||(o=s,s=r),null!==s&&0==(2&n.flags))for(let l=1;l<a.length;l++)As(t,s,e[a[l]],o,!1)}}function fy(t,n){if(t.push(n),t.length>1)for(let e=t.length-2;e>=0;e--){const i=t[e];py(i)||sE(i,n)&&null===oE(i)&&lE(i,n.index)}}function py(t){return!(64&t.type)}function sE(t,n){return py(n)||t.index>n.index}function oE(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function lE(t,n){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=n:(Y_(dy,hy),t.insertBeforeIndex=n)}function ic(t,n){const e=t.data[n];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function dE(t,n,e){const i=Rp(t,e,64,null,null);return fy(n,i),i}function hd(t,n){const e=n[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function gy(t){return t>>>17}function my(t){return(131070&t)>>>1}let rc=0,ac=0;function _y(t,n,e,i){const r=e[11];let s,a=null;for(let o=0;o<n.length;o++){const l=n[o];if("string"==typeof l){const c=n[++o];null===e[c]&&(e[c]=cp(r,l))}else if("number"==typeof l)switch(1&l){case 0:const c=gy(l);let u,d;if(null===a&&(a=c,s=qu(r,i)),c===a?(u=i,d=s):(u=null,d=ei(e[c])),null!==d){const _=my(l);As(r,d,e[_],u,!1);const w=ic(t,_);if(null!==w&&"object"==typeof w){const y=hd(w,e);null!==y&&_y(t,w.create[y],e,e[w.anchorIdx])}}break;case 1:const f=n[++o],v=n[++o];Pp(r,Mu(l>>>1,e),null,null,f,v,null)}else switch(l){case dd:const c=n[++o],u=n[++o];null===e[u]&&Ai(e[u]=l2(r,c),e);break;case ud:const d=n[++o],h=n[++o];null===e[h]&&Ai(e[h]=up(r,d,null),e)}}}function by(t,n,e,i,r){for(let a=0;a<e.length;a++){const s=e[a],o=e[++a];if(s&r){let l="";for(let c=a+1;c<=a+o;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=ut(n[i-u]);else{const d=u>>>2;switch(3&u){case 1:const h=e[++c],f=e[++c],v=t.data[d];"string"==typeof v?Pp(n[11],n[d],null,v,h,l,f):cr(t,v,n,h,l,n[11],f,!1);break;case 0:const _=n[d];null!==_&&B_(n[11],_,l);break;case 2:mE(t,ic(t,d),n,l);break;case 3:yy(t,ic(t,d),i,n)}}}}else{const l=e[a+1];if(l>0&&3==(3&l)){const u=ic(t,l>>>2);n[u.currentCaseLViewIndex]<0&&yy(t,u,i,n)}}a+=o}}function yy(t,n,e,i){let r=i[n.currentCaseLViewIndex];if(null!==r){let a=rc;r<0&&(r=i[n.currentCaseLViewIndex]=~r,a=-1),by(t,i,n.update[r],e,a)}}function mE(t,n,e,i){const r=function vE(t,n){let e=t.cases.indexOf(n);if(-1===e)switch(t.type){case 1:{const i=function nE(t,n){const e=ly(n)(parseInt(t,10)),i=tE[e];return void 0!==i?i:"other"}(n,function aE(){return uy}());e=t.cases.indexOf(i),-1===e&&"other"!==i&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(n,i);if(hd(n,e)!==r&&(Cy(t,n,e),e[n.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const s=e[n.anchorIdx];s&&_y(t,n.create[r],e,s)}}function Cy(t,n,e){let i=hd(n,e);if(null!==i){const r=n.remove[i];for(let a=0;a<r.length;a++){const s=r[a];if(s>0){const o=Mu(s,e);null!==o&&Q_(e[11],o)}else Cy(t,ic(t,~s),e)}}}function _E(){const t=[];let e,i,n=-1;function a(o,l){n=0;const c=hd(o,l);i=null!==c?o.remove[c]:gn}function s(){if(n<i.length){const o=i[n++];return o>0?e[o]:(t.push(n,i),a(e[1].data[~o],e),s())}return 0===t.length?null:(i=t.pop(),n=t.pop(),s())}return function r(o,l){for(e=l;t.length;)t.pop();return a(o.value,l),s}}const fd=/\ufffd(\d+):?\d*\ufffd/gi,yE=/\ufffd(\d+)\ufffd/,Sy=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,CE=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,wE=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,SE=/\uE500/g;function Ty(t,n,e,i,r,a,s){const o=Mo(t,i,1,null);let l=o<<Hn.SHIFT,c=Al();n===c&&(c=null),null===c&&(l|=Hn.APPEND_EAGERLY),s&&(l|=Hn.COMMENT,function o2(t){void 0===ap&&(ap=t())}(_E)),r.push(l,null===a?"":a);const u=Rp(t,o,s?32:1,null===a?"":a,null);fy(e,u);const d=u.index;return ca(u,!1),null!==c&&n!==c&&function uE(t,n){let e=t.insertBeforeIndex;null===e?(Y_(dy,hy),e=t.insertBeforeIndex=[null,n]):(function Aa(t,n,e){t!=n&&xn(e,t,n,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(n))}(c,d),u}function ME(t,n,e,i,r,a,s){const o=s.match(fd),l=Ty(t,n,e,a,i,o?null:s,!1);o&&jo(r,s,l.index,null,0,null)}function jo(t,n,e,i,r,a){const s=t.length,o=s+1;t.push(null,null);const l=s+2,c=n.split(fd);let u=0;for(let d=0;d<c.length;d++){const h=c[d];if(1&d){const f=r+parseInt(h,10);t.push(-1-f),u|=Dy(f)}else""!==h&&t.push(h)}return t.push(e<<2|(i?1:0)),i&&t.push(i,a),t[s]=u,t[o]=t.length-l,u}function Dy(t){return 1<<Math.min(t,31)}function My(t){let n,a,e="",i=0,r=!1;for(;null!==(n=CE.exec(t));)r?n[0]===`\ufffd/*${a}\ufffd`&&(i=n.index,r=!1):(e+=t.substring(i,n.index+n[0].length),a=n[1],r=!0);return e+=t.substr(i),e}function xy(t,n,e,i,r,a){let s=0;const o={type:r.type,currentCaseLViewIndex:Mo(t,n,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};(function NE(t,n,e){t.push(Dy(n.mainBinding),2,-1-n.mainBinding,e<<2|2)})(e,r,a),function cE(t,n,e){const i=t.data[n];null===i?t.data[n]=e:i.value=e}(t,a,o);const l=r.values;for(let c=0;c<l.length;c++){const u=l[c],d=[];for(let h=0;h<u.length;h++){const f=u[h];if("string"!=typeof f){const v=d.push(f)-1;u[h]=`\x3c!--\ufffd${v}\ufffd--\x3e`}}s=PE(t,o,n,e,i,r.cases[c],u.join(""),d)|s}s&&function OE(t,n,e){t.push(n,1,e<<2|3)}(e,s,a)}function EE(t){const n=[],e=[];let i=1,r=0;const a=ag(t=t.replace(Sy,function(s,o,l){return i="select"===l?0:1,r=parseInt(o.substr(1),10),""}));for(let s=0;s<a.length;){let o=a[s++].trim();1===i&&(o=o.replace(/\s*(?:=)?(\w+)\s*/,"$1")),o.length&&n.push(o);const l=ag(a[s++]);n.length>e.length&&e.push(l)}return{type:i,mainBinding:r,cases:n,values:e}}function ag(t){if(!t)return[];let n=0;const e=[],i=[],r=/[{}]/g;let a;for(r.lastIndex=0;a=r.exec(t);){const o=a.index;if("}"==a[0]){if(e.pop(),0==e.length){const l=t.substring(n,o);Sy.test(l)?i.push(EE(l)):i.push(l),n=o+1}}else{if(0==e.length){const l=t.substring(n,o);i.push(l),n=o+1}e.push("{")}}const s=t.substring(n);return i.push(s),i}function PE(t,n,e,i,r,a,s,o){const l=[],c=[],u=[];n.cases.push(a),n.create.push(l),n.remove.push(c),n.update.push(u);const h=v_(Df()).getInertBodyElement(s),f=Jf(h)||h;return f?Ry(t,n,e,i,l,c,u,f,r,o,0):0}function Ry(t,n,e,i,r,a,s,o,l,c,u){let d=0,h=o.firstChild;for(;h;){const f=Mo(t,e,1,null);switch(h.nodeType){case Node.ELEMENT_NODE:const v=h,_=v.tagName.toLowerCase();if(Qf.hasOwnProperty(_)){sg(r,ud,_,l,f),t.data[f]=_;const P=v.attributes;for(let U=0;U<P.length;U++){const Q=P.item(U),J=Q.name.toLowerCase();Q.value.match(fd)?w_.hasOwnProperty(J)&&jo(s,Q.value,f,Q.name,0,Zf[J]?jl:Kf[J]?__:null):FE(r,f,Q)}d=Ry(t,n,e,i,r,a,s,h,f,c,u+1)|d,ky(a,f,u)}break;case Node.TEXT_NODE:const D=h.textContent||"",w=D.match(fd);sg(r,null,w?"":D,l,f),ky(a,f,u),w&&(d=jo(s,D,f,null,0,null)|d);break;case Node.COMMENT_NODE:const y=yE.exec(h.textContent||"");if(y){const U=c[parseInt(y[1],10)];sg(r,dd,"",l,f),xy(t,e,i,l,U,f),IE(a,f,u)}}h=h.nextSibling}return d}function ky(t,n,e){0===e&&t.push(n)}function IE(t,n,e){0===e&&(t.push(~n),t.push(n))}function sg(t,n,e,i,r){null!==n&&t.push(n),t.push(e,r,function hE(t,n,e){return t|n<<17|e<<1}(0,i,r))}function FE(t,n,e){t.push(n<<1|1,e.name,e.value)}function Ey(t,n,e=-1){const i=zt(),r=we(),a=20+t,s=Ka(i.consts,n),o=Al();i.firstCreatePass&&function DE(t,n,e,i,r,a){const s=Al(),o=[],l=[],c=[[]];r=function AE(t,n){if(function kE(t){return-1===t}(n))return My(t);{const e=t.indexOf(`:${n}\ufffd`)+2+n.toString().length,i=t.search(new RegExp(`\ufffd\\/\\*\\d+:${n}\ufffd`));return My(t.substring(e,i))}}(r,a);const u=function TE(t){return t.replace(SE," ")}(r).split(wE);for(let d=0;d<u.length;d++){let h=u[d];if(0==(1&d)){const f=ag(h);for(let v=0;v<f.length;v++){let _=f[v];if(0==(1&v)){const D=_;""!==D&&ME(t,s,c[0],o,l,e,D)}else{const D=_;if("object"!=typeof D)throw new Error(`Unable to parse ICU expression in "${r}" message.`);xy(t,e,l,n,D,Ty(t,s,c[0],e,o,"",!0).index)}}}else{const f=47===h.charCodeAt(0),_=(h.charCodeAt(f?1:0),20+Number.parseInt(h.substring(f?2:1)));if(f)c.shift(),ca(Al(),!1);else{const D=dE(t,c[0],_);c.unshift([]),ca(D,!0)}}}t.data[i]={create:o,update:l}}(i,null===o?0:o.index,r,a,s,e);const l=i.data[a],u=G_(i,o===r[6]?null:o,r);(function gE(t,n,e,i){const r=t[11];for(let a=0;a<n.length;a++){const s=n[a++],o=n[a],l=(s&Hn.COMMENT)===Hn.COMMENT,c=(s&Hn.APPEND_EAGERLY)===Hn.APPEND_EAGERLY,u=s>>>Hn.SHIFT;let d=t[u];null===d&&(d=t[u]=l?r.createComment(o):cp(r,o)),c&&null!==e&&As(r,e,d,i,!1)}})(r,l.create,u,o&&8&o.type?r[o.index]:null),Ov(!0)}function Fa(t,n,e){Ey(t,n,e),function Py(){Ov(!1)}()}function pd(t){return function fE(t){t&&(rc|=1<<Math.min(ac,31)),ac++}(Ei(we(),co(),t)),pd}function lg(t,n,e,i,r){if(t=Ct(t),Array.isArray(t))for(let a=0;a<t.length;a++)lg(t[a],n,e,i,r);else{const a=zt(),s=we();let o=ko(t)?t:Ct(t.provide),l=Ub(t);const c=si(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(ko(t)||!t.multi){const f=new El(l,r,E),v=ug(o,n,r?u:u+h,d);-1===v?(Bu(Il(c,s),a,o),cg(a,t,n.length),n.push(o),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(f),s.push(f)):(e[v]=f,s[v]=f)}else{const f=ug(o,n,u+h,d),v=ug(o,n,u,u+h),_=f>=0&&e[f],D=v>=0&&e[v];if(r&&!D||!r&&!_){Bu(Il(c,s),a,o);const w=function QE(t,n,e,i,r){const a=new El(t,e,E);return a.multi=[],a.index=n,a.componentProviders=0,Iy(a,r,i&&!e),a}(r?XE:YE,e.length,r,i,l);!r&&D&&(e[v].providerFactory=w),cg(a,t,n.length,0),n.push(o),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(w),s.push(w)}else cg(a,t,f>-1?f:v,Iy(e[r?v:f],l,!r&&i));!r&&i&&D&&e[v].componentProviders++}}}function cg(t,n,e,i){const r=ko(n),a=function Mk(t){return!!t.useClass}(n);if(r||a){const l=(a?Ct(n.useClass):n).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function Iy(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function ug(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function YE(t,n,e,i){return dg(this.multi,[])}function XE(t,n,e,i){const r=this.multi;let a;if(this.providerFactory){const s=this.providerFactory.componentProviders,o=Nl(e,e[1],this.providerFactory.index,i);a=o.slice(0,s),dg(r,a);for(let l=s;l<o.length;l++)a.push(o[l])}else a=[],dg(r,a);return a}function dg(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function mn(t,n=[]){return e=>{e.providersResolver=(i,r)=>function qE(t,n,e){const i=zt();if(i.firstCreatePass){const r=Gr(t);lg(e,i.data,i.blueprint,r,!0),lg(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class Ny{}class JE{resolveComponentFactory(n){throw function KE(t){const n=Error(`No component factory found for ${sn(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Is=(()=>{class t{}return t.NULL=new JE,t})();function eP(){return zo(si(),we())}function zo(t,n){return new tn(Sr(t,n))}let tn=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=eP,t})();function tP(t){return t instanceof tn?t.nativeElement:t}class hg{}let Mr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function iP(){const t=we(),e=rr(si().index,t);return function nP(t){return t[11]}(la(e)?e:t)}(),t})(),rP=(()=>{class t{}return t.\u0275prov=He({token:t,providedIn:"root",factory:()=>null}),t})();class oc{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const aP=new oc("13.2.3"),fg={};function gd(t,n,e,i,r=!1){for(;null!==e;){const a=n[e.index];if(null!==a&&i.push(ei(a)),Hr(a))for(let o=10;o<a.length;o++){const l=a[o],c=l[1].firstChild;null!==c&&gd(l[1],l,c,i)}const s=e.type;if(8&s)gd(t,n,e.child,i);else if(32&s){const o=sp(e,n);let l;for(;l=o();)i.push(l)}else if(16&s){const o=X_(n,e);if(Array.isArray(o))i.push(...o);else{const l=ql(n[16]);gd(l[1],l,o,i,!0)}}e=r?e.projectionNext:e.next}return i}class lc{constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,e=n[1];return gd(e,n,e.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Hr(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(dp(n,i),Uu(e,i))}this._attachedToViewContainer=!1}U_(this._lView[1],this._lView)}onDestroy(n){Cb(this._lView[1],this._lView,null,n)}markForCheck(){Np(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function gk(t,n,e){Ru(!0);try{Fp(t,n,e)}finally{Ru(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new jt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function d2(t,n){Yl(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new jt(902,"");this._appRef=n}}class sP extends lc{constructor(n){super(n),this._view=n}detectChanges(){Ab(this._view)}checkNoChanges(){!function mk(t){Ru(!0);try{Ab(t)}finally{Ru(!1)}}(this._view)}get context(){return null}}class Fy extends Is{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=xi(n);return new pg(e,this.ngModule)}}function Vy(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}const lP=new xt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>P_});class pg extends Ny{constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function E2(t){return t.map(A2).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Vy(this.componentDef.inputs)}get outputs(){return Vy(this.componentDef.outputs)}create(n,e,i,r){const a=(r=r||this.ngModule)?function cP(t,n){return{get:(e,i,r)=>{const a=t.get(e,fg,r);return a!==fg||i===fg?a:n.get(e,i,r)}}}(n,r.injector):n,s=a.get(hg,kv),o=a.get(rP,null),l=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function yb(t,n,e){if(Ln(t))return t.selectRootElement(n,e===oa.ShadowDom);let i="string"==typeof n?t.querySelector(n):n;return i.textContent="",i}(l,i,this.componentDef.encapsulation):up(s.createRenderer(null,this.componentDef),c,function oP(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(c)),d=this.componentDef.onPush?576:528,h=function Kb(t,n){return{components:[],scheduler:t||P_,clean:vk,playerHandler:n||null,flags:0}}(),f=Ju(0,null,null,1,0,null,null,null,null,null),v=Xl(null,f,h,d,null,null,s,l,o,a);let _,D;ku(v);try{const w=function Qb(t,n,e,i,r,a){const s=e[1];e[20]=t;const l=Do(s,20,2,"#host",null),c=l.mergedAttrs=n.hostAttrs;null!==c&&(td(l,c,!0),null!==t&&(Nu(r,t,c),null!==l.classes&&mp(r,t,l.classes),null!==l.styles&&K_(r,t,l.styles)));const u=i.createRenderer(t,n),d=Xl(e,_b(n),null,n.onPush?64:16,e[20],l,i,u,a||null,null);return s.firstCreatePass&&(Bu(Il(l,e),s,n.type),Mb(s,l),xb(l,e.length,1)),ed(e,d),e[20]=d}(u,this.componentDef,v,s,l);if(u)if(i)Nu(l,u,["ng-version",aP.full]);else{const{attrs:y,classes:P}=function P2(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let a=t[i];if("string"==typeof a)2===r?""!==a&&n.push(a,t[++i]):8===r&&e.push(a);else{if(!jr(r))break;r=a}i++}return{attrs:n,classes:e}}(this.componentDef.selectors[0]);y&&Nu(l,u,y),P&&P.length>0&&mp(l,u,P.join(" "))}if(D=Mf(f,20),void 0!==e){const y=D.projection=[];for(let P=0;P<this.ngContentSelectors.length;P++){const U=e[P];y.push(null!=U?Array.from(U):null)}}_=function Zb(t,n,e,i,r){const a=e[1],s=function J2(t,n,e){const i=si();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),Rb(t,i,n,Mo(t,n,1,null),e));const r=Nl(n,t,i.directiveStart,i);Ai(r,n);const a=Sr(i,n);return a&&Ai(a,n),r}(a,e,n);if(i.components.push(s),t[8]=s,r&&r.forEach(l=>l(s,n)),n.contentQueries){const l=si();n.contentQueries(1,s,l.directiveStart)}const o=si();return!a.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Ja(o.index),Tb(e[1],o,0,o.directiveStart,o.directiveEnd,n),Db(n,s)),s}(w,this.componentDef,v,h,[Vk]),Ql(f,v,null)}finally{Au()}return new dP(this.componentType,_,zo(D,v),v,D)}}class dP extends class ZE{}{constructor(n,e,i,r,a){super(),this.location=i,this._rootLView=r,this._tNode=a,this.instance=e,this.hostView=this.changeDetectorRef=new sP(r),this.componentType=n}get injector(){return new fo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class Va{}class By{}const $o=new Map;class Hy extends Va{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Fy(this);const i=yr(n);this._bootstrapComponents=pa(i.bootstrap),this._r3Injector=Lb(n,e,[{provide:Va,useValue:this},{provide:Is,useValue:this.componentFactoryResolver}],sn(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,e=Yn.THROW_IF_NOT_FOUND,i=pt.Default){return n===Yn||n===Va||n===Bp?this:this._r3Injector.get(n,e,i)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class gg extends By{constructor(n){super(),this.moduleType=n,null!==yr(n)&&function fP(t){const n=new Set;!function e(i){const r=yr(i,!0),a=r.id;null!==a&&(function Ly(t,n,e){if(n&&n!==e)throw new Error(`Duplicate module registered for ${t} - ${sn(n)} vs ${sn(n.name)}`)}(a,$o.get(a),i),$o.set(a,i));const s=pa(r.imports);for(const o of s)n.has(o)||(n.add(o),e(o))}(t)}(n)}create(n){return new Hy(this.moduleType,n)}}function mg(t,n,e){const i=Fi()+t,r=we();return r[i]===dt?ma(r,i,e?n.call(e):n()):Jl(r,i)}function ur(t,n,e,i){return jy(we(),Fi(),t,n,e,i)}function Ns(t,n,e,i,r){return zy(we(),Fi(),t,n,e,i,r)}function cc(t,n){const e=t[n];return e===dt?void 0:e}function jy(t,n,e,i,r,a){const s=n+e;return Ei(t,s,r)?ma(t,s+1,a?i.call(a,r):i(r)):cc(t,s+1)}function zy(t,n,e,i,r,a,s){const o=n+e;return Es(t,o,r,a)?ma(t,o+2,s?i.call(s,r,a):i(r,a)):cc(t,o+2)}function Ut(t,n){const e=zt();let i;const r=t+20;e.firstCreatePass?(i=function bP(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const a=i.factory||(i.factory=Ms(i.type)),s=Xa(E);try{const o=Fu(!1),l=a();return Fu(o),function Xk(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,we(),r,l),l}finally{Xa(s)}}function nn(t,n,e,i){const r=t+20,a=we(),s=lo(a,r);return dc(a,r)?zy(a,Fi(),n,s.transform,e,i,s):s.transform(e,i)}function uc(t,n,e,i,r){const a=t+20,s=we(),o=lo(s,a);return dc(s,a)?function $y(t,n,e,i,r,a,s,o){const l=n+e;return id(t,l,r,a,s)?ma(t,l+3,o?i.call(o,r,a,s):i(r,a,s)):cc(t,l+3)}(s,Fi(),n,o.transform,e,i,r,o):o.transform(e,i,r)}function dc(t,n){return t[1].data[n].pure}function _g(t){return n=>{setTimeout(t,void 0,n)}}const je=class wP extends he{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){var r,a,s;let o=n,l=e||(()=>null),c=i;if(n&&"object"==typeof n){const d=n;o=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(a=d.error)||void 0===a?void 0:a.bind(d),c=null===(s=d.complete)||void 0===s?void 0:s.bind(d)}this.__isAsync&&(l=_g(l),o&&(o=_g(o)),c&&(c=_g(c)));const u=super.subscribe({next:o,error:l,complete:c});return n instanceof le&&n.add(u),u}};function SP(){return this._results[Ao()]()}class bg{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ao(),i=bg.prototype;i[e]||(i[e]=SP)}get changes(){return this._changes||(this._changes=new je)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=Tr(n);(this._changesDetected=!function Hx(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],a=n[i];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let An=(()=>{class t{}return t.__NG_ELEMENT_ID__=MP,t})();const TP=An,DP=class extends TP{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(n){const e=this._declarationTContainer.tViews,i=Xl(this._declarationLView,e,n,16,null,e.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(e)),Ql(e,i,n),new lc(i)}};function MP(){return md(si(),we())}function md(t,n){return 4&t.type?new DP(n,t,zo(t,n)):null}let xr=(()=>{class t{}return t.__NG_ELEMENT_ID__=xP,t})();function xP(){return Zy(si(),we())}const RP=xr,Xy=class extends RP{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return zo(this._hostTNode,this._hostLView)}get injector(){return new fo(this._hostTNode,this._hostLView)}get parentInjector(){const n=Vu(this._hostTNode,this._hostLView);if($v(n)){const e=ho(n,this._hostLView),i=uo(n);return new fo(e[1].data[i+8],e)}return new fo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=Qy(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,e,i){const r=n.createEmbeddedView(e||{});return this.insert(r,i),r}createComponent(n,e,i,r,a){const s=n&&!function Fl(t){return"function"==typeof t}(n);let o;if(s)o=e;else{const d=e||{};o=d.index,i=d.injector,r=d.projectableNodes,a=d.ngModuleRef}const l=s?n:new pg(xi(n)),c=i||this.parentInjector;if(!a&&null==l.ngModule){const h=(s?c:this.parentInjector).get(Va,null);h&&(a=h)}const u=l.create(c,r,void 0,a);return this.insert(u.hostView,o),u}insert(n,e){const i=n._lView,r=i[1];if(function lx(t){return Hr(t[3])}(i)){const u=this.indexOf(n);if(-1!==u)this.detach(u);else{const d=i[3],h=new Xy(d,d[6],d[3]);h.detach(h.indexOf(n))}}const a=this._adjustIndex(e),s=this._lContainer;!function f2(t,n,e,i){const r=10+i,a=e.length;i>0&&(e[r-1][4]=n),i<a-10?(n[4]=e[r],t_(e,10+i,n)):(e.push(n),n[4]=null),n[3]=e;const s=n[17];null!==s&&e!==s&&function p2(t,n){const e=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===e?t[9]=[n]:e.push(n)}(s,n);const o=n[19];null!==o&&o.insertView(t),n[2]|=128}(r,i,s,a);const o=pp(a,s),l=i[11],c=qu(l,s[7]);return null!==c&&function u2(t,n,e,i,r,a){i[0]=r,i[6]=n,Yl(t,i,e,1,r,a)}(r,s[6],l,i,c,o),n.attachToViewContainerRef(),t_(yg(s),a,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=Qy(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=dp(this._lContainer,e);i&&(Uu(yg(this._lContainer),e),U_(i[1],i))}detach(n){const e=this._adjustIndex(n,-1),i=dp(this._lContainer,e);return i&&null!=Uu(yg(this._lContainer),e)?new lc(i):null}_adjustIndex(n,e=0){return null==n?this.length+e:n}};function Qy(t){return t[8]}function yg(t){return t[8]||(t[8]=[])}function Zy(t,n){let e;const i=n[t.index];if(Hr(i))e=i;else{let r;if(8&t.type)r=ei(i);else{const a=n[11];r=a.createComment("");const s=Sr(t,n);As(a,qu(a,s),r,function _2(t,n){return Ln(t)?t.nextSibling(n):n.nextSibling}(a,s),!1)}n[t.index]=e=kb(i,n,r,t),ed(n,e)}return new Xy(e,t,n)}class Cg{constructor(n){this.queryList=n,this.matches=null}clone(){return new Cg(this.queryList)}setDirty(){this.queryList.setDirty()}}class wg{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let a=0;a<i;a++){const s=e.getByIndex(a);r.push(this.queries[s.indexInDeclarationView].clone())}return new wg(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==nC(n,e).matches&&this.queries[e].setDirty()}}class Ky{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class Sg{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,a=this.getByIndex(i).embeddedTView(n,r);a&&(a.indexInDeclarationView=i,null!==e?e.push(a):e=[a])}return null!==e?new Sg(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Tg{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new Tg(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=i[r];this.matchTNodeWithReadOption(n,e,EP(e,a)),this.matchTNodeWithReadOption(n,e,Lu(e,n,a,!1,!1))}else i===An?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Lu(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===tn||r===xr||r===An&&4&e.type)this.addMatch(e.index,-2);else{const a=Lu(e,n,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function EP(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function IP(t,n,e,i){return-1===e?function PP(t,n){return 11&t.type?zo(t,n):4&t.type?md(t,n):null}(n,t):-2===e?function NP(t,n,e){return e===tn?zo(n,t):e===An?md(n,t):e===xr?Zy(n,t):void 0}(t,n,i):Nl(t,t[1],e,n)}function Jy(t,n,e,i){const r=n[19].queries[i];if(null===r.matches){const a=t.data,s=e.matches,o=[];for(let l=0;l<s.length;l+=2){const c=s[l];o.push(c<0?null:IP(n,a[c],s[l+1],e.metadata.read))}r.matches=o}return r.matches}function Dg(t,n,e,i){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const s=Jy(t,n,r,e);for(let o=0;o<a.length;o+=2){const l=a[o];if(l>0)i.push(s[o/2]);else{const c=a[o+1],u=n[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&Dg(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];Dg(f[1],f,c,i)}}}}}return i}function cn(t){const n=we(),e=zt(),i=Fv();If(i+1);const r=nC(e,i);if(t.dirty&&Av(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?Dg(e,n,i,[]):Jy(e,n,r,i);t.reset(a,tP),t.notifyOnChanges()}return!0}return!1}function Ba(t,n,e){const i=zt();i.firstCreatePass&&(tC(i,new Ky(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),eC(i,we(),n)}function Xn(t,n,e,i){const r=zt();if(r.firstCreatePass){const a=si();tC(r,new Ky(n,e,i),a.index),function FP(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}eC(r,we(),e)}function un(){return function OP(t,n){return t[19].queries[n].queryList}(we(),Fv())}function eC(t,n,e){const i=new bg(4==(4&e));Cb(t,n,i,i.destroy),null===n[19]&&(n[19]=new wg),n[19].queries.push(new Cg(i))}function tC(t,n,e){null===t.queries&&(t.queries=new Sg),t.queries.track(new Tg(n,e))}function nC(t,n){return t.queries.getByIndex(n)}function Ot(t,n){return md(t,n)}function bd(...t){}const yd=new xt("Application Initializer");let qo=(()=>{class t{constructor(e){this.appInits=e,this.resolve=bd,this.reject=bd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const a=this.appInits[r]();if(ec(a))e.push(a);else if(eg(a)){const s=new Promise((o,l)=>{a.subscribe({complete:o,error:l})});e.push(s)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Pe(yd,8))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();const fc=new xt("AppId"),eI={provide:fc,useFactory:function JP(){return`${Eg()}${Eg()}${Eg()}`},deps:[]};function Eg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bC=new xt("Platform Initializer"),Cd=new xt("Platform ID"),yC=new xt("appBootstrapListener");let CC=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();const as=new xt("LocaleId"),wC=new xt("DefaultCurrencyCode");class tI{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let wd=(()=>{class t{compileModuleSync(e){return new gg(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),a=pa(yr(e).declarations).reduce((s,o)=>{const l=xi(o);return l&&s.push(new pg(l)),s},[]);return new tI(i,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();const iI=(()=>Promise.resolve(0))();function Pg(t){"undefined"==typeof Zone?iI.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class vn{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new je(!1),this.onMicrotaskEmpty=new je(!1),this.onStable=new je(!1),this.onError=new je(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function rI(){let t=hn.requestAnimationFrame,n=hn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function oI(t){const n=()=>{!function sI(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(hn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ng(t),t.isCheckStableRunning=!0,Ig(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ng(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,a,s,o)=>{try{return SC(t),e.invokeTask(r,a,s,o)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&n(),TC(t)}},onInvoke:(e,i,r,a,s,o,l)=>{try{return SC(t),e.invoke(r,a,s,o,l)}finally{t.shouldCoalesceRunChangeDetection&&n(),TC(t)}},onHasTask:(e,i,r,a)=>{e.hasTask(r,a),i===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,Ng(t),Ig(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,i,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(vn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const a=this._inner,s=a.scheduleEventTask("NgZoneEvent: "+r,n,aI,bd,bd);try{return a.runTask(s,e,i)}finally{a.cancelTask(s)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const aI={};function Ig(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ng(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function SC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function TC(t){t._nesting--,Ig(t)}class lI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new je,this.onMicrotaskEmpty=new je,this.onStable=new je,this.onError=new je}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}let Og=(()=>{class t{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vn.assertNotInAngularZone(),Pg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Pg(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==a),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,i,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Pe(vn))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})(),DC=(()=>{class t{constructor(){this._applications=new Map,Fg.addToWindow(this)}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Fg.findTestabilityInTree(this,e,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();class cI{addToWindow(n){}findTestabilityInTree(n,e,i){return null}}let Yr,Fg=new cI;const MC=new xt("AllowMultipleToken");class xC{constructor(n,e){this.name=n,this.token=e}}function RC(t,n,e=[]){const i=`Platform: ${n}`,r=new xt(i);return(a=[])=>{let s=kC();if(!s||s.injector.get(MC,!1))if(t)t(e.concat(a).concat({provide:r,useValue:!0}));else{const o=e.concat(a).concat({provide:r,useValue:!0},{provide:Lp,useValue:"platform"});!function fI(t){if(Yr&&!Yr.destroyed&&!Yr.injector.get(MC,!1))throw new jt(400,"");Yr=t.get(AC);const n=t.get(bC,null);n&&n.forEach(e=>e())}(Yn.create({providers:o,name:i}))}return function pI(t){const n=kC();if(!n)throw new jt(401,"");return n}()}}function kC(){return Yr&&!Yr.destroyed?Yr:null}let AC=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const o=function gI(t,n){let e;return e="noop"===t?new lI:("zone.js"===t?void 0:t)||new vn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),e}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:vn,useValue:o}];return o.run(()=>{const c=Yn.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),d=u.injector.get(wo,null);if(!d)throw new jt(402,"");return o.runOutsideAngular(()=>{const h=o.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{Vg(this._modules,u),h.unsubscribe()})}),function mI(t,n,e){try{const i=e();return ec(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(d,o,()=>{const h=u.injector.get(qo);return h.runInitializers(),h.donePromise.then(()=>(function rE(t){(function nr(t,n){null==t&&xn(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(uy=t.toLowerCase().replace(/_/g,"-"))}(u.injector.get(as,cd)||cd),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,i=[]){const r=EC({},i);return function dI(t,n,e){const i=new gg(e);return Promise.resolve(i)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const i=e.injector.get(Os);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new jt(403,"");e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new jt(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Pe(Yn))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();function EC(t,n){return Array.isArray(n)?n.reduce(EC,t):Object.assign(Object.assign({},t),n)}let Os=(()=>{class t{constructor(e,i,r,a,s){this._zone=e,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Ae(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Ae(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{vn.assertNotInAngularZone(),Pg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{vn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=fv(o,l.pipe(pv()))}bootstrap(e,i){if(!this._initStatus.done)throw new jt(405,"");let r;r=e instanceof Ny?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const a=function hI(t){return t.isBoundToModule}(r)?void 0:this._injector.get(Va),o=r.create(Yn.NULL,[],i||r.selector,a),l=o.location.nativeElement,c=o.injector.get(Og,null),u=c&&o.injector.get(DC);return c&&u&&u.registerApplication(l,c),o.onDestroy(()=>{this.detachView(o.hostView),Vg(this.components,o),u&&u.unregisterApplication(l)}),this._loadComponent(o),o}tick(){if(this._runningTick)throw new jt(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Vg(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(yC,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Pe(vn),Pe(Yn),Pe(wo),Pe(Is),Pe(qo))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();function Vg(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let IC=!0,dr=(()=>{class t{}return t.__NG_ELEMENT_ID__=bI,t})();function bI(t){return function yI(t,n,e){if(Tu(t)&&!e){const i=rr(t.index,n);return new lc(i,i)}return 47&t.type?new lc(n[16],n):null}(si(),we(),16==(16&t))}class BC{constructor(){}supports(n){return Kl(n)}create(n){return new MI(n)}}const DI=(t,n)=>n;class MI{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||DI}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,a=null;for(;e||i;){const s=!i||e&&e.currentIndex<UC(i,r,a)?e:i,o=UC(s,r,a),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{a||(a=[]);const c=o-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<a.length?a[h]:a[h]=0,v=f+h;u<=v&&v<c&&(a[h]=f+1)}a[s.previousIndex]=u-c}}o!==l&&n(s,o,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!Kl(n))throw new jt(900,"");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,a,s,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let o=0;o<this.length;o++)a=n[o],s=this._trackByFn(o,a),null!==e&&Object.is(e.trackById,s)?(i&&(e=this._verifyReinsertion(e,a,s,o)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,o),i=!0),e=e._next}else r=0,function qk(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Ao()]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,o=>{s=this._trackByFn(r,o),null!==e&&Object.is(e.trackById,s)?(i&&(e=this._verifyReinsertion(e,o,s,r)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,a,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,a,r)):n=this._addAfter(new xI(e,i),a,r),n}_verifyReinsertion(n,e,i,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==a?n=this._reinsertAfter(a,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,a=n._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new LC),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LC),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class xI{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RI{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class LC{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new RI,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function UC(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}class HC{constructor(){}supports(n){return n instanceof Map||$p(n)}create(){return new kI}}class kI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||$p(n)))throw new jt(900,"")}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const a=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,a)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,e);const a=r._prev,s=r._next;return a&&(a._next=s),s&&(s._prev=a),r._next=null,r._prev=null,r}const i=new AI(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}}class AI{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function GC(){return new pc([new BC])}let pc=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||GC()),deps:[[t,new bo,new da]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new jt(901,"")}}return t.\u0275prov=He({token:t,providedIn:"root",factory:GC}),t})();function jC(){return new Yo([new HC])}let Yo=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||jC()),deps:[[t,new bo,new da]]}}find(e){const i=this.factories.find(a=>a.supports(e));if(i)return i;throw new jt(901,"")}}return t.\u0275prov=He({token:t,providedIn:"root",factory:jC}),t})();const EI=[new HC],II=new pc([new BC]),NI=new Yo(EI),OI=RC(null,"core",[{provide:Cd,useValue:"unknown"},{provide:AC,deps:[Yn]},{provide:DC,deps:[]},{provide:CC,deps:[]}]),UI=[{provide:Os,useClass:Os,deps:[vn,Yn,wo,Is,qo]},{provide:lP,deps:[vn],useFactory:function HI(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(e){n.push(e)}}},{provide:qo,useClass:qo,deps:[[new da,yd]]},{provide:wd,useClass:wd,deps:[]},eI,{provide:pc,useFactory:function FI(){return II},deps:[]},{provide:Yo,useFactory:function VI(){return NI},deps:[]},{provide:as,useFactory:function BI(t){return t||function LI(){return"undefined"!=typeof $localize&&$localize.locale||cd}()},deps:[[new Hl(as),new da,new bo]]},{provide:wC,useValue:"USD"}];let GI=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Pe(Os))},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({providers:UI}),t})(),Dd=null;function ba(){return Dd}const ti=new xt("DocumentToken");let Vs=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:function(){return function WI(){return Pe(zC)}()},providedIn:"platform"}),t})();const qI=new xt("Location Initialized");let zC=(()=>{class t extends Vs{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ba().getBaseHref(this._doc)}onPopState(e){const i=ba().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=ba().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){$C()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){$C()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Pe(ti))},t.\u0275prov=He({token:t,factory:function(){return function YI(){return new zC(Pe(ti))}()},providedIn:"platform"}),t})();function $C(){return!!window.history.pushState}function Gg(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function WC(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function La(t){return t&&"?"!==t[0]?"?"+t:t}let Xo=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:function(){return function XI(t){const n=Pe(ti).location;return new qC(Pe(Vs),n&&n.origin||"")}()},providedIn:"root"}),t})();const jg=new xt("appBaseHref");let qC=(()=>{class t extends Xo{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Gg(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+La(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,a){const s=this.prepareExternalUrl(r+La(a));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,a){const s=this.prepareExternalUrl(r+La(a));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(Pe(Vs),Pe(jg,8))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})(),QI=(()=>{class t extends Xo{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Gg(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,a){let s=this.prepareExternalUrl(r+La(a));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,a){let s=this.prepareExternalUrl(r+La(a));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(Pe(Vs),Pe(jg,8))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})(),zg=(()=>{class t{constructor(e,i){this._subject=new je,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=WC(YC(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+La(i))}normalize(e){return t.stripTrailingSlash(function KI(t,n){return t&&n.startsWith(t)?n.substring(t.length):n}(this._baseHref,YC(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+La(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+La(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return t.normalizeQueryParams=La,t.joinWithSlash=Gg,t.stripTrailingSlash=WC,t.\u0275fac=function(e){return new(e||t)(Pe(Xo),Pe(Vs))},t.\u0275prov=He({token:t,factory:function(){return function ZI(){return new zg(Pe(Xo),Pe(Vs))}()},providedIn:"root"}),t})();function YC(t){return t.replace(/\/index.html$/,"")}var Ji=(()=>((Ji=Ji||{})[Ji.Decimal=0]="Decimal",Ji[Ji.Percent=1]="Percent",Ji[Ji.Currency=2]="Currency",Ji[Ji.Scientific=3]="Scientific",Ji))(),ni=(()=>((ni=ni||{})[ni.Zero=0]="Zero",ni[ni.One=1]="One",ni[ni.Two=2]="Two",ni[ni.Few=3]="Few",ni[ni.Many=4]="Many",ni[ni.Other=5]="Other",ni))(),Ke=(()=>((Ke=Ke||{})[Ke.Decimal=0]="Decimal",Ke[Ke.Group=1]="Group",Ke[Ke.List=2]="List",Ke[Ke.PercentSign=3]="PercentSign",Ke[Ke.PlusSign=4]="PlusSign",Ke[Ke.MinusSign=5]="MinusSign",Ke[Ke.Exponential=6]="Exponential",Ke[Ke.SuperscriptingExponent=7]="SuperscriptingExponent",Ke[Ke.PerMille=8]="PerMille",Ke[Ke.Infinity=9]="Infinity",Ke[Ke.NaN=10]="NaN",Ke[Ke.TimeSeparator=11]="TimeSeparator",Ke[Ke.CurrencyDecimal=12]="CurrencyDecimal",Ke[Ke.CurrencyGroup=13]="CurrencyGroup",Ke))();function Rr(t,n){const e=Li(t),i=e[Be.NumberSymbols][n];if(void 0===i){if(n===Ke.CurrencyDecimal)return e[Be.NumberSymbols][Ke.Decimal];if(n===Ke.CurrencyGroup)return e[Be.NumberSymbols][Ke.Group]}return i}function $g(t,n){return Li(t)[Be.NumberFormats][n]}const aN=ly,TN=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Qg(t,n,e,i,r,a,s=!1){let o="",l=!1;if(isFinite(t)){let c=function PN(t){let i,r,a,s,o,n=Math.abs(t)+"",e=0;for((r=n.indexOf("."))>-1&&(n=n.replace(".","")),(a=n.search(/e/i))>0?(r<0&&(r=a),r+=+n.slice(a+1),n=n.substring(0,a)):r<0&&(r=n.length),a=0;"0"===n.charAt(a);a++);if(a===(o=n.length))i=[0],r=1;else{for(o--;"0"===n.charAt(o);)o--;for(r-=a,i=[],s=0;a<=o;a++,s++)i[s]=Number(n.charAt(a))}return r>22&&(i=i.splice(0,21),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}(t);s&&(c=function EN(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(c));let u=n.minInt,d=n.minFrac,h=n.maxFrac;if(a){const y=a.match(TN);if(null===y)throw new Error(`${a} is not a valid digit info`);const P=y[1],U=y[3],Q=y[5];null!=P&&(u=Kg(P)),null!=U&&(d=Kg(U)),null!=Q?h=Kg(Q):null!=U&&d>h&&(h=d)}!function IN(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,r=i.length-t.integerLen;const a=Math.min(Math.max(n,r),e);let s=a+t.integerLen,o=i[s];if(s>0){i.splice(Math.max(t.integerLen,s));for(let d=s;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,s=a+1),i[0]=0;for(let d=1;d<s;d++)i[d]=0}if(o>=5)if(s-1<0){for(let d=0;d>s;d--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[s-1]++;for(;r<Math.max(0,a);r++)i.push(0);let l=0!==a;const c=n+t.integerLen,u=i.reduceRight(function(d,h,f,v){return v[f]=(h+=d)<10?h:h-10,l&&(0===v[f]&&f>=c?v.pop():l=!1),h>=10?1:0},0);u&&(i.unshift(u),t.integerLen++)}(c,d,h);let f=c.digits,v=c.integerLen;const _=c.exponent;let D=[];for(l=f.every(y=>!y);v<u;v++)f.unshift(0);for(;v<0;v++)f.unshift(0);v>0?D=f.splice(v,f.length):(D=f,f=[0]);const w=[];for(f.length>=n.lgSize&&w.unshift(f.splice(-n.lgSize,f.length).join(""));f.length>n.gSize;)w.unshift(f.splice(-n.gSize,f.length).join(""));f.length&&w.unshift(f.join("")),o=w.join(Rr(e,i)),D.length&&(o+=Rr(e,r)+D.join("")),_&&(o+=Rr(e,Ke.Exponential)+"+"+_)}else o=Rr(e,Ke.Infinity);return o=t<0&&!l?n.negPre+o+n.negSuf:n.posPre+o+n.posSuf,o}function Zg(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(";"),r=i[0],a=i[1],s=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],o=s[0],l=s[1]||"";e.posPre=o.substr(0,o.indexOf("#"));for(let u=0;u<l.length;u++){const d=l.charAt(u);"0"===d?e.minFrac=e.maxFrac=u+1:"#"===d?e.maxFrac=u+1:e.posSuf+=d}const c=o.split(",");if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,a){const u=r.length-e.posPre.length-e.posSuf.length,d=a.indexOf("#");e.negPre=a.substr(0,d).replace(/'/g,""),e.negSuf=a.substr(d+u).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}function Kg(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}class Od{}let NN=(()=>{class t extends Od{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(aN(i||this.locale)(e)){case ni.Zero:return"zero";case ni.One:return"one";case ni.Two:return"two";case ni.Few:return"few";case ni.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Pe(as))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})(),Ci=(()=>{class t{constructor(e,i,r,a){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Kl(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${sn(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(E(pc),E(Yo),E(tn),E(Mr))},t.\u0275dir=Oe({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class VN{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let di=(()=>{class t{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,a,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new VN(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===a?void 0:a);else if(null!==a){const o=i.get(a);i.move(o,s),iw(o,r)}});for(let r=0,a=i.length;r<a;r++){const o=i.get(r).context;o.index=r,o.count=a,o.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{iw(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(E(xr),E(An),E(pc))},t.\u0275dir=Oe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function iw(t,n){t.context.$implicit=n.item}let Kt=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new BN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){rw("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){rw("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(E(xr),E(An))},t.\u0275dir=Oe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class BN{constructor(){this.$implicit=null,this.ngIf=null}}function rw(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${sn(n)}'.`)}let Qo=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(E(xr))},t.\u0275dir=Oe({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[yi]}),t})();function Qr(t,n){return new jt(2100,"")}let ss=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!t0(e))return null;r=r||this._locale;try{return function AN(t,n,e){return Qg(t,Zg($g(n,Ji.Decimal),Rr(n,Ke.MinusSign)),n,Ke.Group,Ke.Decimal,e)}(n0(e),r,i)}catch(a){throw Qr()}}}return t.\u0275fac=function(e){return new(e||t)(E(as,16))},t.\u0275pipe=Zi({name:"number",type:t,pure:!0}),t})(),ow=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!t0(e))return null;r=r||this._locale;try{return function kN(t,n,e){return Qg(t,Zg($g(n,Ji.Percent),Rr(n,Ke.MinusSign)),n,Ke.Group,Ke.Decimal,e,!0).replace(new RegExp("%","g"),Rr(n,Ke.PercentSign))}(n0(e),r,i)}catch(a){throw Qr()}}}return t.\u0275fac=function(e){return new(e||t)(E(as,16))},t.\u0275pipe=Zi({name:"percent",type:t,pure:!0}),t})();function t0(t){return!(null==t||""===t||t!=t)}function n0(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let er=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({providers:[{provide:Od,useClass:NN}]}),t})();let hO=(()=>{class t{}return t.\u0275prov=He({token:t,providedIn:"root",factory:()=>new fO(Pe(ti),window)}),t})();class fO{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function pO(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const a=r.shadowRoot;if(a){const s=a.getElementById(n)||a.querySelector(`[name="${n}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],r-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=cw(this.window.history)||cw(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function cw(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class r0 extends class mO extends class $I{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function zI(t){Dd||(Dd=t)}(new r0)}onAndCancel(n,e,i){return n.addEventListener(e,i,!1),()=>{n.removeEventListener(e,i,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function vO(){return vc=vc||document.querySelector("base"),vc?vc.getAttribute("href"):null}();return null==e?null:function _O(t){Fd=Fd||document.createElement("a"),Fd.setAttribute("href",t);const n=Fd.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){vc=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function ON(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,a]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(a)}return null}(document.cookie,n)}}let Fd,vc=null;const uw=new xt("TRANSITION_ID"),yO=[{provide:yd,useFactory:function bO(t,n,e){return()=>{e.get(qo).donePromise.then(()=>{const i=ba(),r=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let a=0;a<r.length;a++)i.remove(r[a])})}},deps:[uw,ti,Yn],multi:!0}];class a0{static init(){!function uI(t){Fg=t}(new a0)}addToWindow(n){hn.getAngularTestability=(i,r=!0)=>{const a=n.findTestabilityInTree(i,r);if(null==a)throw new Error("Could not find testability for element.");return a},hn.getAllAngularTestabilities=()=>n.getAllTestabilities(),hn.getAllAngularRootElements=()=>n.getAllRootElements(),hn.frameworkStabilizers||(hn.frameworkStabilizers=[]),hn.frameworkStabilizers.push(i=>{const r=hn.getAllAngularTestabilities();let a=r.length,s=!1;const o=function(l){s=s||l,a--,0==a&&i(s)};r.forEach(function(l){l.whenStable(o)})})}findTestabilityInTree(n,e,i){if(null==e)return null;const r=n.getTestability(e);return null!=r?r:i?ba().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null}}let CO=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();const Vd=new xt("EventManagerPlugins");let Bd=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let a=0;a<r.length;a++){const s=r[a];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Pe(Vd),Pe(vn))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();class dw{constructor(n){this._doc=n}addGlobalEventListener(n,e,i){const r=ba().getGlobalEventTarget(this._doc,n);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let hw=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})(),_c=(()=>{class t extends hw{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(a=>{const s=this._doc.createElement("style");s.textContent=a,r.push(i.appendChild(s))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(fw),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(fw))}}return t.\u0275fac=function(e){return new(e||t)(Pe(ti))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();function fw(t){ba().remove(t)}const s0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},o0=/%COMP%/g;function Ld(t,n,e){for(let i=0;i<n.length;i++){let r=n[i];Array.isArray(r)?Ld(t,r,e):(r=r.replace(o0,t),e.push(r))}return e}function mw(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let l0=(()=>{class t{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new c0(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case oa.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new xO(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case oa.ShadowDom:return new RO(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Ld(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Pe(Bd),Pe(_c),Pe(fc))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();class c0{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(s0[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){n.appendChild(e)}insertBefore(n,e,i){n&&n.insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const a=s0[r];a?n.setAttributeNS(a,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=s0[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(lr.DashCase|lr.Important)?n.style.setProperty(e,i,r&lr.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&lr.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,mw(i)):this.eventManager.addEventListener(n,e,mw(i))}}class xO extends c0{constructor(n,e,i,r){super(n),this.component=i;const a=Ld(r+"-"+i.id,i.styles,[]);e.addStyles(a),this.contentAttr=function TO(t){return"_ngcontent-%COMP%".replace(o0,t)}(r+"-"+i.id),this.hostAttr=function DO(t){return"_nghost-%COMP%".replace(o0,t)}(r+"-"+i.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}class RO extends c0{constructor(n,e,i,r){super(n),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ld(r.id,r.styles,[]);for(let s=0;s<a.length;s++){const o=document.createElement("style");o.textContent=a[s],this.shadowRoot.appendChild(o)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let kO=(()=>{class t extends dw{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return t.\u0275fac=function(e){return new(e||t)(Pe(ti))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();const _w=["alt","control","meta","shift"],EO={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bw={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},PO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let IO=(()=>{class t extends dw{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const a=t.parseEventName(i),s=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ba().onAndCancel(e,a.domEventName,s))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(i.pop());let s="";if(_w.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),s+=l+".")}),s+=a,0!=i.length||0===a.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let i="",r=function NO(t){let n=t.key;if(null==n){if(n=t.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===t.location&&bw.hasOwnProperty(n)&&(n=bw[n]))}return EO[n]||n}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),_w.forEach(a=>{a!=r&&PO[a](e)&&(i+=a+".")}),i+=r,i}static eventCallback(e,i,r){return a=>{t.getEventFullKey(a)===e&&r.runGuarded(()=>i(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Pe(ti))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();const BO=RC(OI,"browser",[{provide:Cd,useValue:"browser"},{provide:bC,useValue:function OO(){r0.makeCurrent(),a0.init()},multi:!0},{provide:ti,useFactory:function VO(){return function rx(t){Tf=t}(document),document},deps:[]}]),LO=[{provide:Lp,useValue:"root"},{provide:wo,useFactory:function FO(){return new wo},deps:[]},{provide:Vd,useClass:kO,multi:!0,deps:[ti,vn,Cd]},{provide:Vd,useClass:IO,multi:!0,deps:[ti]},{provide:l0,useClass:l0,deps:[Bd,_c,fc]},{provide:hg,useExisting:l0},{provide:hw,useExisting:_c},{provide:_c,useClass:_c,deps:[ti]},{provide:Og,useClass:Og,deps:[vn]},{provide:Bd,useClass:Bd,deps:[Vd,vn]},{provide:class gO{},useClass:CO,deps:[]}];let UO=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:fc,useValue:e.appId},{provide:uw,useExisting:fc},yO]}}}return t.\u0275fac=function(e){return new(e||t)(Pe(t,12))},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({providers:LO,imports:[er,GI]}),t})();"undefined"!=typeof window&&window;let bc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:function(e){let i=null;return i=e?new(e||t):Pe(ww),i},providedIn:"root"}),t})(),ww=(()=>{class t extends bc{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case Qt.NONE:return i;case Qt.HTML:return ha(i,"HTML")?sr(i):T_(this._doc,String(i)).toString();case Qt.STYLE:return ha(i,"Style")?sr(i):i;case Qt.SCRIPT:if(ha(i,"Script"))return sr(i);throw new Error("unsafe value used in a script context");case Qt.URL:return m_(i),ha(i,"URL")?sr(i):jl(String(i));case Qt.RESOURCE_URL:if(ha(i,"ResourceURL"))return sr(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function _R(t){return new fR(t)}(e)}bypassSecurityTrustStyle(e){return function bR(t){return new pR(t)}(e)}bypassSecurityTrustScript(e){return function yR(t){return new gR(t)}(e)}bypassSecurityTrustUrl(e){return function CR(t){return new mR(t)}(e)}bypassSecurityTrustResourceUrl(e){return function wR(t){return new vR(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(Pe(ti))},t.\u0275prov=He({token:t,factory:function(e){let i=null;return i=e?new e:function QO(t){return new ww(t.get(ti))}(Pe(Yn)),i},providedIn:"root"}),t})();const{isArray:ZO}=Array,{getPrototypeOf:KO,prototype:JO,keys:eF}=Object;function Sw(t){if(1===t.length){const n=t[0];if(ZO(n))return{args:n,keys:null};if(function tF(t){return t&&"object"==typeof t&&KO(t)===JO}(n)){const e=eF(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:nF}=Array;function d0(t){return ft(n=>function iF(t,n){return nF(n)?t(...n):t(n)}(t,n))}function Tw(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}let Dw=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(E(Mr),E(tn))},t.\u0275dir=Oe({type:t}),t})(),Bs=(()=>{class t extends Dw{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=ki(t)))(i||t)}}(),t.\u0275dir=Oe({type:t,features:[en]}),t})();const Ar=new xt("NgValueAccessor"),aF={provide:Ar,useExisting:qt(()=>Ud),multi:!0};let Ud=(()=>{class t extends Bs{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=ki(t)))(i||t)}}(),t.\u0275dir=Oe({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,i){1&e&&F("change",function(a){return i.onChange(a.target.checked)})("blur",function(){return i.onTouched()})},features:[mn([aF]),en]}),t})();const sF={provide:Ar,useExisting:qt(()=>Zo),multi:!0},lF=new xt("CompositionEventMode");let Zo=(()=>{class t extends Dw{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function oF(){const t=ba()?ba().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(E(Mr),E(tn),E(lF,8))},t.\u0275dir=Oe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&F("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[mn([sF]),en]}),t})();function Mw(t){return null!=t&&"number"==typeof t.length}const Pi=new xt("NgValidators"),cs=new xt("NgAsyncValidators");function Hd(t){return null}function Ow(t){return null!=t}function Fw(t){const n=ec(t)?vi(t):t;return eg(n),n}function Vw(t){let n={};return t.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function Bw(t,n){return n.map(e=>e(t))}function Lw(t){return t.map(n=>function uF(t){return!t.validate}(n)?n:e=>n.validate(e))}function h0(t){return null!=t?function Uw(t){if(!t)return null;const n=t.filter(Ow);return 0==n.length?null:function(e){return Vw(Bw(e,n))}}(Lw(t)):null}function f0(t){return null!=t?function Hw(t){if(!t)return null;const n=t.filter(Ow);return 0==n.length?null:function(e){return function rF(...t){const n=vu(t),{args:e,keys:i}=Sw(t),r=new Ae(a=>{const{length:s}=e;if(!s)return void a.complete();const o=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;ai(e[u]).subscribe(Dt(a,h=>{d||(d=!0,c--),o[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||a.next(i?Tw(i,o):o),a.complete())}))}});return n?r.pipe(d0(n)):r}(Bw(e,n).map(Fw)).pipe(ft(Vw))}}(Lw(t)):null}function Gw(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function jw(t){return t._rawValidators}function zw(t){return t._rawAsyncValidators}function p0(t){return t?Array.isArray(t)?t:[t]:[]}function Gd(t,n){return Array.isArray(t)?t.includes(n):t===n}function $w(t,n){const e=p0(n);return p0(t).forEach(r=>{Gd(e,r)||e.push(r)}),e}function Ww(t,n){return p0(n).filter(e=>!Gd(t,e))}class qw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=h0(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=f0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class us extends qw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Hi extends qw{get formDirective(){return null}get path(){return null}}class Yw{constructor(n){this._cd=n}is(n){var e,i,r;return"submitted"===n?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[n])}}let yc=(()=>{class t extends Yw{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(E(us,2))},t.\u0275dir=Oe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&it("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[en]}),t})(),jd=(()=>{class t extends Yw{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(E(Hi,10))},t.\u0275dir=Oe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&it("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[en]}),t})();function $d(t,n){return[...n.path,t]}function Cc(t,n){v0(t,n),n.valueAccessor.writeValue(t.value),function _F(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Qw(t,n)})}(t,n),function yF(t,n){const e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function bF(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Qw(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function vF(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function Wd(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),Yd(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function qd(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function v0(t,n){const e=jw(t);null!==n.validator?t.setValidators(Gw(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=zw(t);null!==n.asyncValidator?t.setAsyncValidators(Gw(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();qd(n._rawValidators,r),qd(n._rawAsyncValidators,r)}function Yd(t,n){let e=!1;if(null!==t){if(null!==n.validator){const r=jw(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(s=>s!==n.validator);a.length!==r.length&&(e=!0,t.setValidators(a))}}if(null!==n.asyncValidator){const r=zw(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(s=>s!==n.asyncValidator);a.length!==r.length&&(e=!0,t.setAsyncValidators(a))}}}const i=()=>{};return qd(n._rawValidators,i),qd(n._rawAsyncValidators,i),e}function Qw(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Zw(t,n){v0(t,n)}function _0(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function Kw(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function b0(t,n){if(!n)return null;let e,i,r;return Array.isArray(n),n.forEach(a=>{a.constructor===Zo?e=a:function SF(t){return Object.getPrototypeOf(t.constructor)===Bs}(a)?i=a:r=a}),r||i||e||null}function y0(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const wc="VALID",Xd="INVALID",Ko="PENDING",Sc="DISABLED";function w0(t){return(Qd(t)?t.validators:t)||null}function Jw(t){return Array.isArray(t)?h0(t):t||null}function S0(t,n){return(Qd(n)?n.asyncValidators:t)||null}function eS(t){return Array.isArray(t)?f0(t):t||null}function Qd(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const tS=t=>t instanceof M0,T0=t=>t instanceof Zd;function nS(t){return tS(t)?t.value:t.getRawValue()}function iS(t,n){const e=T0(t),i=t.controls;if(!(e?Object.keys(i):i).length)throw new jt(1e3,"");if(!i[n])throw new jt(1001,"")}function rS(t,n){T0(t),t._forEachChild((i,r)=>{if(void 0===n[r])throw new jt(1002,"")})}class D0{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=Jw(this._rawValidators),this._composedAsyncValidatorFn=eS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===wc}get invalid(){return this.status===Xd}get pending(){return this.status==Ko}get disabled(){return this.status===Sc}get enabled(){return this.status!==Sc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=Jw(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=eS(n)}addValidators(n){this.setValidators($w(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators($w(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Ww(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Ww(n,this._rawAsyncValidators))}hasValidator(n){return Gd(this._rawValidators,n)}hasAsyncValidator(n){return Gd(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Ko,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Sc,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=wc,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wc||this.status===Ko)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sc:wc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Ko,this._hasOwnPendingAsyncValidator=!0;const e=Fw(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){return function TF(t,n,e){if(null==n||(Array.isArray(n)||(n=n.split(e)),Array.isArray(n)&&0===n.length))return null;let i=t;return n.forEach(r=>{i=T0(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(t=>t instanceof MF)(i)&&i.at(r)||null}),i}(this,n,".")}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new je,this.statusChanges=new je}_calculateStatus(){return this._allControlsDisabled()?Sc:this.errors?Xd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ko)?Ko:this._anyControlsHaveStatus(Xd)?Xd:wc}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Qd(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class M0 extends D0{constructor(n=null,e,i){super(w0(e),S0(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qd(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){y0(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){y0(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class Zd extends D0{constructor(n,e,i){super(w0(e),S0(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){rS(this,n),Object.keys(n).forEach(i=>{iS(this,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=nS(e),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&n(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,e,i)=>((e.enabled||this.disabled)&&(n[i]=e.value),n))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,a)=>{i=e(i,r,a)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class MF extends D0{constructor(n,e,i){super(w0(e),S0(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){rS(this,n),n.forEach((i,r)=>{iS(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>nS(n))}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const xF={provide:Hi,useExisting:qt(()=>Dc)},Tc=(()=>Promise.resolve(null))();let Dc=(()=>{class t extends Hi{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new je,this.form=new Zd({},h0(e),f0(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Tc.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Cc(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Tc.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Tc.then(()=>{const i=this._findContainer(e.path),r=new Zd({});Zw(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Tc.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Tc.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Kw(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(E(Pi,10),E(cs,10))},t.\u0275dir=Oe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&F("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[mn([xF]),en]}),t})();const kF={provide:us,useExisting:qt(()=>Mc)},oS=(()=>Promise.resolve(null))();let Mc=(()=>{class t extends us{constructor(e,i,r,a,s){super(),this._changeDetectorRef=s,this.control=new M0,this._registered=!1,this.update=new je,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=b0(0,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),_0(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Cc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){oS.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;oS.then(()=>{var a;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(e){return this._parent?$d(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(E(Hi,9),E(Pi,10),E(cs,10),E(Ar,10),E(dr,8))},t.\u0275dir=Oe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[mn([kF]),en,yi]}),t})(),Kd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Oe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),cS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({}),t})();const x0=new xt("NgModelWithFormControlWarning"),OF={provide:Hi,useExisting:qt(()=>Jd)};let Jd=(()=>{class t extends Hi{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new je,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Cc(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Wd(e.control||null,e,!1),y0(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,Kw(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(Wd(i||null,e),tS(r)&&(Cc(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);Zw(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function CF(t,n){return Yd(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){v0(this.form,this),this._oldForm&&Yd(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(E(Pi,10),E(cs,10))},t.\u0275dir=Oe({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&F("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[mn([OF]),en,yi]}),t})();const BF={provide:us,useExisting:qt(()=>A0)};let A0=(()=>{class t extends us{constructor(e,i,r,a,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new je,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=b0(0,a)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),_0(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return $d(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(E(Hi,13),E(Pi,10),E(cs,10),E(Ar,10),E(x0,8))},t.\u0275dir=Oe({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[mn([BF]),en,yi]}),t})();function mS(t){return"number"==typeof t?t:parseInt(t,10)}let Ls=(()=>{class t{constructor(){this._validator=Hd}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Hd,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Oe({type:t,features:[yi]}),t})();const ZF={provide:Pi,useExisting:qt(()=>N0),multi:!0};let N0=(()=>{class t extends Ls{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>mS(e),this.createValidator=e=>function Pw(t){return n=>function ls(t){return null==t||0===t.length}(n.value)||!Mw(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=ki(t)))(i||t)}}(),t.\u0275dir=Oe({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&ln("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[mn([ZF]),en]}),t})();const KF={provide:Pi,useExisting:qt(()=>eh),multi:!0};let eh=(()=>{class t extends Ls{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>mS(e),this.createValidator=e=>function Iw(t){return n=>Mw(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=ki(t)))(i||t)}}(),t.\u0275dir=Oe({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&ln("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[mn([KF]),en]}),t})(),SS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[cS]]}),t})(),TS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[SS]}),t})(),eV=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:x0,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[SS]}),t})();function st(...t){return vi(t,Dl(t))}class Zn extends he{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function DS(t,n,e){t?br(e,t,n):n()}const th=B(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function xc(...t){return function nV(){return Tl(1)}()(vi(t,Dl(t)))}function MS(t){return new Ae(n=>{ai(t()).subscribe(n)})}function xS(){return nt((t,n)=>{let e=null;t._refCount++;const i=Dt(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class iV extends Ae{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,fn(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,null==n||n.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new le;const e=this.getSubject();n.add(this.source.subscribe(Dt(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=le.EMPTY)}return n}refCount(){return xS()(this)}}function Ha(t,n){return nt((e,i)=>{let r=null,a=0,s=!1;const o=()=>s&&!r&&i.complete();e.subscribe(Dt(i,l=>{null==r||r.unsubscribe();let c=0;const u=a++;ai(t(l,u)).subscribe(r=Dt(i,d=>i.next(n?n(l,d,u,c++):d),()=>{r=null,o()}))},()=>{s=!0,o()}))})}function rV(t,n,e,i,r){return(a,s)=>{let o=e,l=n,c=0;a.subscribe(Dt(s,u=>{const d=c++;l=o?t(l,u,d):(o=!0,u),i&&s.next(l)},r&&(()=>{o&&s.next(l),s.complete()})))}}function RS(t,n){return nt(rV(t,n,arguments.length>=2,!0))}function Si(t,n){return nt((e,i)=>{let r=0;e.subscribe(Dt(i,a=>t.call(n,a,r++)&&i.next(a)))})}function ds(t){return nt((n,e)=>{let a,i=null,r=!1;i=n.subscribe(Dt(e,void 0,void 0,s=>{a=ai(t(s,ds(t)(n))),i?(i.unsubscribe(),i=null,a.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,a.subscribe(e))})}function Rc(t,n){return z(n)?Wn(t,n,1):Wn(t,1)}function F0(t){return t<=0?()=>Br:nt((n,e)=>{let i=[];n.subscribe(Dt(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function kS(t=aV){return nt((n,e)=>{let i=!1;n.subscribe(Dt(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function aV(){return new th}function AS(t){return nt((n,e)=>{let i=!1;n.subscribe(Dt(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function Jo(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Si((r,a)=>t(r,a,i)):ke,_i(1),e?AS(n):kS(()=>new th))}function Ii(t,n,e){const i=z(t)||n||e?{next:t,error:n,complete:e}:t;return i?nt((r,a)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let o=!0;r.subscribe(Dt(a,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),a.next(l)},()=>{var l;o=!1,null===(l=i.complete)||void 0===l||l.call(i),a.complete()},l=>{var c;o=!1,null===(c=i.error)||void 0===c||c.call(i,l),a.error(l)},()=>{var l,c;o&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):ke}class Ga{constructor(n,e){this.id=n,this.url=e}}class V0 extends Ga{constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kc extends Ga{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ES extends Ga{constructor(n,e,i){super(n,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class lV extends Ga{constructor(n,e,i){super(n,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cV extends Ga{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uV extends Ga{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dV extends Ga{constructor(n,e,i,r,a){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hV extends Ga{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fV extends Ga{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PS{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class IS{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class pV{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gV{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mV{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vV{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class NS{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const It="primary";class _V{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function el(t){return new _V(t)}const OS="ngNavigationCancelingError";function B0(t){const n=Error("NavigationCancelingError: "+t);return n[OS]=!0,n}function yV(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let a=0;a<i.length;a++){const s=i[a],o=t[a];if(s.startsWith(":"))r[s.substring(1)]=o;else if(s!==o.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function ya(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!FS(t[r],n[r]))return!1;return!0}function FS(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,a)=>i[a]===r)}return t===n}function VS(t){return Array.prototype.concat.apply([],t)}function BS(t){return t.length>0?t[t.length-1]:null}function Ti(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function Ca(t){return eg(t)?t:ec(t)?vi(Promise.resolve(t)):st(t)}const SV={exact:function HS(t,n,e){if(!Hs(t.segments,n.segments)||!ih(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!HS(t.children[i],n.children[i],e))return!1;return!0},subset:GS},LS={exact:function TV(t,n){return ya(t,n)},subset:function DV(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>FS(t[e],n[e]))},ignored:()=>!0};function US(t,n,e){return SV[e.paths](t.root,n.root,e.matrixParams)&&LS[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function GS(t,n,e){return jS(t,n,n.segments,e)}function jS(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!Hs(r,e)||n.hasChildren()||!ih(r,e,i))}if(t.segments.length===e.length){if(!Hs(t.segments,e)||!ih(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!GS(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(Hs(t.segments,r)&&ih(t.segments,r,i)&&t.children[It])&&jS(t.children[It],n,a,i)}}function ih(t,n,e){return n.every((i,r)=>LS[e](t[r].parameters,i.parameters))}class Us{constructor(n,e,i){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=el(this.queryParams)),this._queryParamMap}toString(){return RV.serialize(this)}}class Bt{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Ti(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rh(this)}}class Ac{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=el(this.parameters)),this._parameterMap}toString(){return YS(this)}}function Hs(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}class zS{}class $S{parse(n){const e=new VV(n);return new Us(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Ec(n.root,!0)}`,i=function EV(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${ah(e)}=${ah(r)}`).join("&"):`${ah(e)}=${ah(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function kV(t){return encodeURI(t)}(n.fragment)}`:""}`}}const RV=new $S;function rh(t){return t.segments.map(n=>YS(n)).join("/")}function Ec(t,n){if(!t.hasChildren())return rh(t);if(n){const e=t.children[It]?Ec(t.children[It],!1):"",i=[];return Ti(t.children,(r,a)=>{a!==It&&i.push(`${a}:${Ec(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function xV(t,n){let e=[];return Ti(t.children,(i,r)=>{r===It&&(e=e.concat(n(i,r)))}),Ti(t.children,(i,r)=>{r!==It&&(e=e.concat(n(i,r)))}),e}(t,(i,r)=>r===It?[Ec(t.children[It],!1)]:[`${r}:${Ec(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[It]?`${rh(t)}/${e[0]}`:`${rh(t)}/(${e.join("//")})`}}function WS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ah(t){return WS(t).replace(/%3B/gi,";")}function L0(t){return WS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sh(t){return decodeURIComponent(t)}function qS(t){return sh(t.replace(/\+/g,"%20"))}function YS(t){return`${L0(t.path)}${function AV(t){return Object.keys(t).map(n=>`;${L0(n)}=${L0(t[n])}`).join("")}(t.parameters)}`}const PV=/^[^\/()?;=#]+/;function oh(t){const n=t.match(PV);return n?n[0]:""}const IV=/^[^=?&#]+/,OV=/^[^&#]+/;class VV{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[It]=new Bt(n,e)),i}parseSegment(){const n=oh(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new Ac(sh(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=oh(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=oh(this.remaining);r&&(i=r,this.capture(i))}n[sh(e)]=sh(i)}parseQueryParam(n){const e=function NV(t){const n=t.match(IV);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const s=function FV(t){const n=t.match(OV);return n?n[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=qS(e),a=qS(i);if(n.hasOwnProperty(r)){let s=n[r];Array.isArray(s)||(s=[s],n[r]=s),s.push(a)}else n[r]=a}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=oh(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a;i.indexOf(":")>-1?(a=i.substr(0,i.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=It);const s=this.parseChildren();e[a]=1===Object.keys(s).length?s[It]:new Bt([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class XS{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=U0(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=U0(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=H0(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return H0(n,this._root).map(e=>e.value)}}function U0(t,n){if(t===n.value)return n;for(const e of n.children){const i=U0(t,e);if(i)return i}return null}function H0(t,n){if(t===n.value)return[n];for(const e of n.children){const i=H0(t,e);if(i.length)return i.unshift(n),i}return[]}class ja{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function tl(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class QS extends XS{constructor(n,e){super(n),this.snapshot=e,G0(this,n)}toString(){return this.snapshot.toString()}}function ZS(t,n){const e=function BV(t,n){const s=new lh([],{},{},"",{},It,n,null,t.root,-1,{});return new JS("",new ja(s,[]))}(t,n),i=new Zn([new Ac("",{})]),r=new Zn({}),a=new Zn({}),s=new Zn({}),o=new Zn(""),l=new nl(i,r,s,o,a,It,n,e.root);return l.snapshot=e.root,new QS(new ja(l,[]),e)}class nl{constructor(n,e,i,r,a,s,o,l){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=s,this.component=o,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ft(n=>el(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ft(n=>el(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function KS(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],a=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function LV(t){return t.reduce((n,e)=>({params:Object.assign(Object.assign({},n.params),e.params),data:Object.assign(Object.assign({},n.data),e.data),resolve:Object.assign(Object.assign({},n.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class lh{constructor(n,e,i,r,a,s,o,l,c,u,d){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=s,this.component=o,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=el(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=el(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class JS extends XS{constructor(n,e){super(e),this.url=n,G0(this,e)}toString(){return eT(this._root)}}function G0(t,n){n.value._routerState=t,n.children.forEach(e=>G0(t,e))}function eT(t){const n=t.children.length>0?` { ${t.children.map(eT).join(", ")} } `:"";return`${t.value}${n}`}function j0(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,ya(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),ya(n.params,e.params)||t.params.next(e.params),function CV(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!ya(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),ya(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function z0(t,n){const e=ya(t.params,n.params)&&function MV(t,n){return Hs(t,n)&&t.every((e,i)=>ya(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||z0(t.parent,n.parent))}function Pc(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function HV(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Pc(t,i,r);return Pc(t,i)})}(t,n,e);return new ja(i,r)}{if(t.shouldAttach(n.value)){const a=t.retrieve(n.value);if(null!==a){const s=a.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(o=>Pc(t,o)),s}}const i=function GV(t){return new nl(new Zn(t.url),new Zn(t.params),new Zn(t.queryParams),new Zn(t.fragment),new Zn(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(a=>Pc(t,a));return new ja(i,r)}}function ch(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ic(t){return"object"==typeof t&&null!=t&&t.outlets}function $0(t,n,e,i,r){let a={};return i&&Ti(i,(s,o)=>{a[o]=Array.isArray(s)?s.map(l=>`${l}`):`${s}`}),new Us(e.root===t?n:tT(e.root,t,n),a,r)}function tT(t,n,e){const i={};return Ti(t.children,(r,a)=>{i[a]=r===n?e:tT(r,n,e)}),new Bt(t.segments,i)}class nT{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&ch(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Ic);if(r&&r!==BS(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class W0{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function iT(t,n,e){if(t||(t=new Bt([],{})),0===t.segments.length&&t.hasChildren())return uh(t,n,e);const i=function YV(t,n,e){let i=0,r=n;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return a;const s=t.segments[r],o=e[i];if(Ic(o))break;const l=`${o}`,c=i<e.length-1?e[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!aT(l,c,s))return a;i+=2}else{if(!aT(l,{},s))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const a=new Bt(t.segments.slice(0,i.pathIndex),{});return a.children[It]=new Bt(t.segments.slice(i.pathIndex),t.children),uh(a,0,r)}return i.match&&0===r.length?new Bt(t.segments,{}):i.match&&!t.hasChildren()?q0(t,n,e):i.match?uh(t,0,r):q0(t,n,e)}function uh(t,n,e){if(0===e.length)return new Bt(t.segments,{});{const i=function qV(t){return Ic(t[0])?t[0].outlets:{[It]:t}}(e),r={};return Ti(i,(a,s)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[s]=iT(t.children[s],n,a))}),Ti(t.children,(a,s)=>{void 0===i[s]&&(r[s]=a)}),new Bt(t.segments,r)}}function q0(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const a=e[r];if(Ic(a)){const l=XV(a.outlets);return new Bt(i,l)}if(0===r&&ch(e[0])){i.push(new Ac(t.segments[n].path,rT(e[0]))),r++;continue}const s=Ic(a)?a.outlets[It]:`${a}`,o=r<e.length-1?e[r+1]:null;s&&o&&ch(o)?(i.push(new Ac(s,rT(o))),r+=2):(i.push(new Ac(s,{})),r++)}return new Bt(i,{})}function XV(t){const n={};return Ti(t,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[i]=q0(new Bt([],{}),0,e))}),n}function rT(t){const n={};return Ti(t,(e,i)=>n[i]=`${e}`),n}function aT(t,n,e){return t==e.path&&ya(n,e.parameters)}class ZV{constructor(n,e,i,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),j0(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=tl(e);n.children.forEach(a=>{const s=a.value.outlet;this.deactivateRoutes(a,r[s],i),delete r[s]}),Ti(r,(a,s)=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(r===a)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,i);else a&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=tl(n);for(const s of Object.keys(a))this.deactivateRouteAndItsChildren(a[s],r);if(i&&i.outlet){const s=i.outlet.detach(),o=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:o})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=tl(n);for(const s of Object.keys(a))this.deactivateRouteAndItsChildren(a[s],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,e,i){const r=tl(e);n.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],i),this.forwardEvent(new vV(a.value.snapshot))}),n.children.length&&this.forwardEvent(new gV(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(j0(r),r===a)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const o=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(o.contexts),s.attachRef=o.componentRef,s.route=o.route.value,s.outlet&&s.outlet.attach(o.componentRef,o.route.value),j0(o.route.value),this.activateChildRoutes(n,null,s.children)}else{const o=function KV(t){for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=o?o.module.componentFactoryResolver:null;s.attachRef=null,s.route=r,s.resolver=l,s.outlet&&s.outlet.activateWith(r,l),this.activateChildRoutes(n,null,s.children)}}else this.activateChildRoutes(n,null,i)}}class Y0{constructor(n,e){this.routes=n,this.module=e}}function hs(t){return"function"==typeof t}function Gs(t){return t instanceof Us}const Nc=Symbol("INITIAL_VALUE");function Oc(){return Ha(t=>function O0(...t){const n=Dl(t),e=vu(t),{args:i,keys:r}=Sw(t);if(0===i.length)return vi([],n);const a=new Ae(function tV(t,n,e=ke){return i=>{DS(n,()=>{const{length:r}=t,a=new Array(r);let s=r,o=r;for(let l=0;l<r;l++)DS(n,()=>{const c=vi(t[l],n);let u=!1;c.subscribe(Dt(i,d=>{a[l]=d,u||(u=!0,o--),o||i.next(e(a.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,n,r?s=>Tw(r,s):ke));return e?a.pipe(d0(e)):a}(t.map(n=>n.pipe(_i(1),function nh(...t){const n=Dl(t);return nt((e,i)=>{(n?xc(t,e,n):xc(t,e)).subscribe(i)})}(Nc)))).pipe(RS((n,e)=>{let i=!1;return e.reduce((r,a,s)=>r!==Nc?r:(a===Nc&&(i=!0),i||!1!==a&&s!==e.length-1&&!Gs(a)?r:a),n)},Nc),Si(n=>n!==Nc),ft(n=>Gs(n)?n:!0===n),_i(1)))}class a3{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Fc,this.attachRef=null}}class Fc{constructor(){this.contexts=new Map}onChildOutletCreated(n,e){const i=this.getOrCreateContext(n);i.outlet=e,this.contexts.set(n,i)}onChildOutletDestroyed(n){const e=this.getContext(n);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let e=this.getContext(n);return e||(e=new a3,this.contexts.set(n,e)),e}getContext(n){return this.contexts.get(n)||null}}let X0=(()=>{class t{constructor(e,i,r,a,s){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new je,this.deactivateEvents=new je,this.attachEvents=new je,this.detachEvents=new je,this.name=a||It,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const s=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),o=this.parentContexts.getOrCreateContext(this.name).children,l=new s3(e,o,this.location.injector);this.activated=this.location.createComponent(s,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(E(Fc),E(xr),E(Is),function xs(t){return function Ox(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const a=e[r];if(jv(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(a===n)return e[r+1];r+=2}}}return null}(si(),t)}("name"),E(dr))},t.\u0275dir=Oe({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class s3{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===nl?this.route:n===Fc?this.childContexts:this.parent.get(n,e)}}let sT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Je({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&H(0,"router-outlet")},directives:[X0],encapsulation:2}),t})();function oT(t,n=""){for(let e=0;e<t.length;e++){const i=t[e];o3(i,l3(n,i))}}function o3(t,n){t.children&&oT(t.children,n)}function l3(t,n){return n?t||n.path?t&&!n.path?`${t}/`:!t&&n.path?n.path:`${t}/${n.path}`:"":t}function Q0(t){const n=t.children&&t.children.map(Q0),e=n?Object.assign(Object.assign({},t),{children:n}):Object.assign({},t);return!e.component&&(n||e.loadChildren)&&e.outlet&&e.outlet!==It&&(e.component=sT),e}function Er(t){return t.outlet||It}function lT(t,n){const e=t.filter(i=>Er(i)===n);return e.push(...t.filter(i=>Er(i)!==n)),e}const cT={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function dh(t,n,e){var i;if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},cT):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(n.matcher||yV)(e,t,n);if(!a)return Object.assign({},cT);const s={};Ti(a.posParams,(l,c)=>{s[c]=l.path});const o=a.consumed.length>0?Object.assign(Object.assign({},s),a.consumed[a.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:o,positionalParamSegments:null!==(i=a.posParams)&&void 0!==i?i:{}}}function hh(t,n,e,i,r="corrected"){if(e.length>0&&function d3(t,n,e){return e.some(i=>fh(t,n,i)&&Er(i)!==It)}(t,e,i)){const s=new Bt(n,function u3(t,n,e,i){const r={};r[It]=i,i._sourceSegment=t,i._segmentIndexShift=n.length;for(const a of e)if(""===a.path&&Er(a)!==It){const s=new Bt([],{});s._sourceSegment=t,s._segmentIndexShift=n.length,r[Er(a)]=s}return r}(t,n,i,new Bt(e,t.children)));return s._sourceSegment=t,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function h3(t,n,e){return e.some(i=>fh(t,n,i))}(t,e,i)){const s=new Bt(t.segments,function c3(t,n,e,i,r,a){const s={};for(const o of i)if(fh(t,e,o)&&!r[Er(o)]){const l=new Bt([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===a?t.segments.length:n.length,s[Er(o)]=l}return Object.assign(Object.assign({},r),s)}(t,n,e,i,t.children,r));return s._sourceSegment=t,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:e}}const a=new Bt(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:e}}function fh(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function uT(t,n,e,i){return!!(Er(t)===i||i!==It&&fh(n,e,t))&&("**"===t.path||dh(n,t,e).matched)}function dT(t,n,e){return 0===n.length&&!t.children[e]}class Vc{constructor(n){this.segmentGroup=n||null}}class hT{constructor(n){this.urlTree=n}}function ph(t){return new Ae(n=>n.error(new Vc(t)))}function fT(t){return new Ae(n=>n.error(new hT(t)))}function f3(t){return new Ae(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class m3{constructor(n,e,i,r,a){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=n.get(Va)}apply(){const n=hh(this.urlTree.root,[],[],this.config).segmentGroup,e=new Bt(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,e,It).pipe(ft(a=>this.createUrlTree(Z0(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ds(a=>{if(a instanceof hT)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Vc?this.noMatchError(a):a}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,It).pipe(ft(r=>this.createUrlTree(Z0(r),n.queryParams,n.fragment))).pipe(ds(r=>{throw r instanceof Vc?this.noMatchError(r):r}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,e,i){const r=n.segments.length>0?new Bt([],{[It]:n}):n;return new Us(r,e,i)}expandSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,e,i).pipe(ft(a=>new Bt([],a))):this.expandSegment(n,i,e,i.segments,r,!0)}expandChildren(n,e,i){const r=[];for(const a of Object.keys(i.children))"primary"===a?r.unshift(a):r.push(a);return vi(r).pipe(Rc(a=>{const s=i.children[a],o=lT(e,a);return this.expandSegmentGroup(n,o,s,a).pipe(ft(l=>({segment:l,outlet:a})))}),RS((a,s)=>(a[s.outlet]=s.segment,a),{}),function sV(t,n){const e=arguments.length>=2;return i=>i.pipe(t?Si((r,a)=>t(r,a,i)):ke,F0(1),e?AS(n):kS(()=>new th))}())}expandSegment(n,e,i,r,a,s){return vi(i).pipe(Rc(o=>this.expandSegmentAgainstRoute(n,e,i,o,r,a,s).pipe(ds(c=>{if(c instanceof Vc)return st(null);throw c}))),Jo(o=>!!o),ds((o,l)=>{if(o instanceof th||"EmptyError"===o.name){if(dT(e,r,a))return st(new Bt([],{}));throw new Vc(e)}throw o}))}expandSegmentAgainstRoute(n,e,i,r,a,s,o){return uT(r,e,a,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,e,r,a,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,s):ph(e):ph(e)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const a=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?fT(a):this.lineralizeSegments(i,a).pipe(Wn(s=>{const o=new Bt(s,{});return this.expandSegment(n,o,e,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,s){const{matched:o,consumedSegments:l,lastChild:c,positionalParamSegments:u}=dh(e,r,a);if(!o)return ph(e);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?fT(d):this.lineralizeSegments(r,d).pipe(Wn(h=>this.expandSegment(n,e,i,h.concat(a.slice(c)),s,!1)))}matchSegmentAgainstRoute(n,e,i,r,a){if("**"===i.path)return i.loadChildren?(i._loadedConfig?st(i._loadedConfig):this.configLoader.load(n.injector,i)).pipe(ft(h=>(i._loadedConfig=h,new Bt(r,{})))):st(new Bt(r,{}));const{matched:s,consumedSegments:o,lastChild:l}=dh(e,i,r);if(!s)return ph(e);const c=r.slice(l);return this.getChildConfig(n,i,r).pipe(Wn(d=>{const h=d.module,f=d.routes,{segmentGroup:v,slicedSegments:_}=hh(e,o,c,f),D=new Bt(v.segments,v.children);if(0===_.length&&D.hasChildren())return this.expandChildren(h,f,D).pipe(ft(U=>new Bt(o,U)));if(0===f.length&&0===_.length)return st(new Bt(o,{}));const w=Er(i)===a;return this.expandSegment(h,D,f,_,w?It:a,!0).pipe(ft(P=>new Bt(o.concat(P.segments),P.children)))}))}getChildConfig(n,e,i){return e.children?st(new Y0(e.children,n)):e.loadChildren?void 0!==e._loadedConfig?st(e._loadedConfig):this.runCanLoadGuards(n.injector,e,i).pipe(Wn(r=>r?this.configLoader.load(n.injector,e).pipe(ft(a=>(e._loadedConfig=a,a))):function p3(t){return new Ae(n=>n.error(B0(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):st(new Y0([],n))}runCanLoadGuards(n,e,i){const r=e.canLoad;return r&&0!==r.length?st(r.map(s=>{const o=n.get(s);let l;if(function e3(t){return t&&hs(t.canLoad)}(o))l=o.canLoad(e,i);else{if(!hs(o))throw new Error("Invalid CanLoad guard");l=o(e,i)}return Ca(l)})).pipe(Oc(),Ii(s=>{if(!Gs(s))return;const o=B0(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw o.url=s,o}),ft(s=>!0===s)):st(!0)}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return st(i);if(r.numberOfChildren>1||!r.children[It])return f3(n.redirectTo);r=r.children[It]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreatreUrlTree(n,e,i,r){const a=this.createSegmentGroup(n,e.root,i,r);return new Us(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Ti(n,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const o=r.substring(1);i[a]=e[o]}else i[a]=r}),i}createSegmentGroup(n,e,i,r){const a=this.createSegments(n,e.segments,i,r);let s={};return Ti(e.children,(o,l)=>{s[l]=this.createSegmentGroup(n,o,i,r)}),new Bt(a,s)}createSegments(n,e,i,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(n,a,r):this.findOrReturn(a,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${n}'. Cannot find '${e.path}'.`);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}function Z0(t){const n={};for(const i of Object.keys(t.children)){const a=Z0(t.children[i]);(a.segments.length>0||a.hasChildren())&&(n[i]=a)}return function v3(t){if(1===t.numberOfChildren&&t.children[It]){const n=t.children[It];return new Bt(t.segments.concat(n.segments),n.children)}return t}(new Bt(t.segments,n))}class pT{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class gh{constructor(n,e){this.component=n,this.route=e}}function b3(t,n,e){const i=t._root;return Bc(i,n?n._root:null,e,[i.value])}function mh(t,n,e){const i=function C3(t){if(!t)return null;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(n);return(i?i.module.injector:e).get(t)}function Bc(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=tl(n);return t.children.forEach(s=>{(function w3(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,s=n?n.value:null,o=e?e.getContext(t.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){const l=function S3(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Hs(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Hs(t.url,n.url)||!ya(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!z0(t,n)||!ya(t.queryParams,n.queryParams);default:return!z0(t,n)}}(s,a,a.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new pT(i)):(a.data=s.data,a._resolvedData=s._resolvedData),Bc(t,n,a.component?o?o.children:null:e,i,r),l&&o&&o.outlet&&o.outlet.isActivated&&r.canDeactivateChecks.push(new gh(o.outlet.component,s))}else s&&Lc(n,o,r),r.canActivateChecks.push(new pT(i)),Bc(t,null,a.component?o?o.children:null:e,i,r)})(s,a[s.value.outlet],e,i.concat([s.value]),r),delete a[s.value.outlet]}),Ti(a,(s,o)=>Lc(s,e.getContext(o),r)),r}function Lc(t,n,e){const i=tl(t),r=t.value;Ti(i,(a,s)=>{Lc(a,r.component?n?n.children.getContext(s):null:n,e)}),e.canDeactivateChecks.push(new gh(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}class P3{}function gT(t){return new Ae(n=>n.error(t))}class N3{constructor(n,e,i,r,a,s){this.rootComponentType=n,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=s}recognize(){const n=hh(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,n,It);if(null===e)return null;const i=new lh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},It,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ja(i,e),a=new JS(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(n){const e=n.value,i=KS(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(n,e):this.processSegment(n,e,e.segments,i)}processChildren(n,e){const i=[];for(const a of Object.keys(e.children)){const s=e.children[a],o=lT(n,a),l=this.processSegmentGroup(o,s,a);if(null===l)return null;i.push(...l)}const r=mT(i);return function O3(t){t.sort((n,e)=>n.value.outlet===It?-1:e.value.outlet===It?1:n.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(n,e,i,r){for(const a of n){const s=this.processSegmentAgainstRoute(a,e,i,r);if(null!==s)return s}return dT(e,i,r)?[]:null}processSegmentAgainstRoute(n,e,i,r){if(n.redirectTo||!uT(n,e,i,r))return null;let a,s=[],o=[];if("**"===n.path){const f=i.length>0?BS(i).parameters:{};a=new lh(i,f,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bT(n),Er(n),n.component,n,vT(e),_T(e)+i.length,yT(n))}else{const f=dh(e,n,i);if(!f.matched)return null;s=f.consumedSegments,o=i.slice(f.lastChild),a=new lh(s,f.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bT(n),Er(n),n.component,n,vT(e),_T(e)+s.length,yT(n))}const l=function F3(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(n),{segmentGroup:c,slicedSegments:u}=hh(e,s,o,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new ja(a,f)]}if(0===l.length&&0===u.length)return[new ja(a,[])];const d=Er(n)===r,h=this.processSegment(l,c,u,d?It:r);return null===h?null:[new ja(a,h)]}}function V3(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function mT(t){const n=[],e=new Set;for(const i of t){if(!V3(i)){n.push(i);continue}const r=n.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=mT(i.children);n.push(new ja(i.value,r))}return n.filter(i=>!e.has(i))}function vT(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function _T(t){let n=t,e=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift?n._segmentIndexShift:0;return e-1}function bT(t){return t.data||{}}function yT(t){return t.resolve||{}}function CT(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function K0(t){return Ha(n=>{const e=t(n);return e?vi(e).pipe(ft(()=>n)):st(n)})}class $3 extends class z3{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}{}const J0=new xt("ROUTES");class wT{constructor(n,e,i,r){this.injector=n,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(n,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(ft(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const s=a.create(n);return new Y0(VS(s.injector.get(J0,void 0,pt.Self|pt.Optional)).map(Q0),s)}),ds(a=>{throw e._loader$=void 0,a}));return e._loader$=new iV(r,()=>new he).pipe(xS()),e._loader$}loadModuleFactory(n){return Ca(n()).pipe(Wn(e=>e instanceof By?st(e):vi(this.compiler.compileModuleAsync(e))))}}class q3{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,e){return n}}function Y3(t){throw t}function X3(t,n,e){return n.parse("/")}function ST(t,n){return st(null)}const Q3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hr=(()=>{class t{constructor(e,i,r,a,s,o,l){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=a,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new he,this.errorHandler=Y3,this.malformedUriErrorHandler=X3,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ST,afterPreactivation:ST},this.urlHandlingStrategy=new q3,this.routeReuseStrategy=new $3,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(Va),this.console=s.get(CC);const d=s.get(vn);this.isNgZoneEnabled=d instanceof vn&&vn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function wV(){return new Us(new Bt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new wT(s,o,h=>this.triggerEvent(new PS(h)),h=>this.triggerEvent(new IS(h))),this.routerState=ZS(this.currentUrlTree,this.rootComponentType),this.transitions=new Zn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Si(r=>0!==r.id),ft(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Ha(r=>{let a=!1,s=!1;return st(r).pipe(Ii(o=>{this.currentNavigation={id:o.id,initialUrl:o.currentRawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ha(o=>{const l=this.browserUrlTree.toString(),c=!this.navigated||o.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return vh(o.source)&&(this.browserUrlTree=o.extractedUrl),st(o).pipe(Ha(d=>{const h=this.transitions.getValue();return i.next(new V0(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Br:Promise.resolve(d)}),function _3(t,n,e,i){return Ha(r=>function g3(t,n,e,i,r){return new m3(t,n,e,i,r).apply()}(t,n,e,r.extractedUrl,i).pipe(ft(a=>Object.assign(Object.assign({},r),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ii(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function B3(t,n,e,i,r){return Wn(a=>function I3(t,n,e,i,r="emptyOnly",a="legacy"){try{const s=new N3(t,n,e,i,r,a).recognize();return null===s?gT(new P3):st(s)}catch(s){return gT(s)}}(t,n,a.urlAfterRedirects,e(a.urlAfterRedirects),i,r).pipe(ft(s=>Object.assign(Object.assign({},a),{targetSnapshot:s}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ii(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new cV(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:v,restoredState:_,extras:D}=o,w=new V0(h,this.serializeUrl(f),v,_);i.next(w);const y=ZS(f,this.rootComponentType).snapshot;return st(Object.assign(Object.assign({},o),{targetSnapshot:y,urlAfterRedirects:f,extras:Object.assign(Object.assign({},D),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=o.rawUrl,o.resolve(null),Br}),K0(o=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=o;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Ii(o=>{const l=new uV(o.id,this.serializeUrl(o.extractedUrl),this.serializeUrl(o.urlAfterRedirects),o.targetSnapshot);this.triggerEvent(l)}),ft(o=>Object.assign(Object.assign({},o),{guards:b3(o.targetSnapshot,o.currentSnapshot,this.rootContexts)})),function T3(t,n){return Wn(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:s}}=e;return 0===s.length&&0===a.length?st(Object.assign(Object.assign({},e),{guardsResult:!0})):function D3(t,n,e,i){return vi(t).pipe(Wn(r=>function E3(t,n,e,i,r){const a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return a&&0!==a.length?st(a.map(o=>{const l=mh(o,n,r);let c;if(function r3(t){return t&&hs(t.canDeactivate)}(l))c=Ca(l.canDeactivate(t,n,e,i));else{if(!hs(l))throw new Error("Invalid CanDeactivate guard");c=Ca(l(t,n,e,i))}return c.pipe(Jo())})).pipe(Oc()):st(!0)}(r.component,r.route,e,n,i)),Jo(r=>!0!==r,!0))}(s,i,r,t).pipe(Wn(o=>o&&function JV(t){return"boolean"==typeof t}(o)?function M3(t,n,e,i){return vi(n).pipe(Rc(r=>xc(function R3(t,n){return null!==t&&n&&n(new pV(t)),st(!0)}(r.route.parent,i),function x3(t,n){return null!==t&&n&&n(new mV(t)),st(!0)}(r.route,i),function A3(t,n,e){const i=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(s=>function y3(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(s)).filter(s=>null!==s).map(s=>MS(()=>st(s.guards.map(l=>{const c=mh(l,s.node,e);let u;if(function n3(t){return t&&hs(t.canActivateChild)}(c))u=Ca(c.canActivateChild(i,t));else{if(!hs(c))throw new Error("Invalid CanActivateChild guard");u=Ca(c(i,t))}return u.pipe(Jo())})).pipe(Oc())));return st(a).pipe(Oc())}(t,r.path,e),function k3(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return st(!0);const r=i.map(a=>MS(()=>{const s=mh(a,n,e);let o;if(function t3(t){return t&&hs(t.canActivate)}(s))o=Ca(s.canActivate(n,t));else{if(!hs(s))throw new Error("Invalid CanActivate guard");o=Ca(s(n,t))}return o.pipe(Jo())}));return st(r).pipe(Oc())}(t,r.route,e))),Jo(r=>!0!==r,!0))}(i,a,t,n):st(o)),ft(o=>Object.assign(Object.assign({},e),{guardsResult:o})))})}(this.ngModule.injector,o=>this.triggerEvent(o)),Ii(o=>{if(Gs(o.guardsResult)){const c=B0(`Redirecting to "${this.serializeUrl(o.guardsResult)}"`);throw c.url=o.guardsResult,c}const l=new dV(o.id,this.serializeUrl(o.extractedUrl),this.serializeUrl(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.triggerEvent(l)}),Si(o=>!!o.guardsResult||(this.restoreHistory(o),this.cancelNavigationTransition(o,""),!1)),K0(o=>{if(o.guards.canActivateChecks.length)return st(o).pipe(Ii(l=>{const c=new hV(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Ha(l=>{let c=!1;return st(l).pipe(function L3(t,n){return Wn(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return st(e);let a=0;return vi(r).pipe(Rc(s=>function U3(t,n,e,i){return function H3(t,n,e,i){const r=CT(t);if(0===r.length)return st({});const a={};return vi(r).pipe(Wn(s=>function G3(t,n,e,i){const r=mh(t,n,i);return Ca(r.resolve?r.resolve(n,e):r(n,e))}(t[s],n,e,i).pipe(Ii(o=>{a[s]=o}))),F0(1),Wn(()=>CT(a).length===r.length?st(a):Br))}(t._resolve,t,n,i).pipe(ft(a=>(t._resolvedData=a,t.data=Object.assign(Object.assign({},t.data),KS(t,e).resolve),null)))}(s.route,i,t,n)),Ii(()=>a++),F0(1),Wn(s=>a===r.length?st(e):Br))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ii({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Ii(l=>{const c=new fV(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),K0(o=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=o;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),ft(o=>{const l=function UV(t,n,e){const i=Pc(t,n._root,e?e._root:void 0);return new QS(i,n)}(this.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return Object.assign(Object.assign({},o),{targetRouterState:l})}),Ii(o=>{this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects)}),((t,n,e)=>ft(i=>(new ZV(n,i.targetRouterState,i.currentRouterState,e).activate(t),i)))(this.rootContexts,this.routeReuseStrategy,o=>this.triggerEvent(o)),Ii({next(){a=!0},complete(){a=!0}}),function oV(t){return nt((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}(()=>{var o;a||s||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(o=this.currentNavigation)||void 0===o?void 0:o.id)===r.id&&(this.currentNavigation=null)}),ds(o=>{if(s=!0,function bV(t){return t&&t[OS]}(o)){const l=Gs(o.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new ES(r.id,this.serializeUrl(r.extractedUrl),o.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(o.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vh(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new lV(r.id,this.serializeUrl(r.extractedUrl),o);i.next(l);try{r.resolve(this.errorHandler(o))}catch(c){r.reject(c)}}return Br}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const a={replaceUrl:!0},s=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(s){const l=Object.assign({},s);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}const o=this.parseUrl(e.url);this.scheduleNavigation(o,i,s,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){oT(e),this.config=e.map(Q0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:a,fragment:s,queryParamsHandling:o,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:s;let d=null;switch(o){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}return null!==d&&(d=this.removeEmptyProps(d)),function jV(t,n,e,i,r){if(0===e.length)return $0(n.root,n.root,n,i,r);const a=function zV(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new nT(!0,0,t);let n=0,e=!1;const i=t.reduce((r,a,s)=>{if("object"==typeof a&&null!=a){if(a.outlets){const o={};return Ti(a.outlets,(l,c)=>{o[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:o}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===s?(a.split("/").forEach((o,l)=>{0==l&&"."===o||(0==l&&""===o?e=!0:".."===o?n++:""!=o&&r.push(o))}),r):[...r,a]},[]);return new nT(e,n,i)}(e);if(a.toRoot())return $0(n.root,new Bt([],{}),n,i,r);const s=function $V(t,n,e){if(t.isAbsolute)return new W0(n.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new W0(a,a===n.root,0)}const i=ch(t.commands[0])?0:1;return function WV(t,n,e){let i=t,r=n,a=e;for(;a>r;){if(a-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new W0(i,!1,r-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,n,t),o=s.processChildren?uh(s.segmentGroup,s.index,a.commands):iT(s.segmentGroup,s.index,a.commands);return $0(s.segmentGroup,o,n,i,r)}(c,this.currentUrlTree,e,d,null!=u?u:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Gs(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function K3(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${n}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},Q3):!1===i?Object.assign({},Z3):i,Gs(e))return US(this.currentUrlTree,e,r);const a=this.parseUrl(e);return US(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const a=e[r];return null!=a&&(i[r]=a),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new kc(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,a,s){var o,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=vh(i)&&u&&!vh(u.source),h=u.rawUrl.toString()===e.toString(),f=u.id===(null===(o=this.currentNavigation)||void 0===o?void 0:o.id);if(d&&h&&f)return Promise.resolve(!0);let _,D,w;s?(_=s.resolve,D=s.reject,w=s.promise):w=new Promise((U,Q)=>{_=U,D=Q});const y=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),P=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):P=0,this.setTransition({id:y,targetPageId:P,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:_,reject:D,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(U=>Promise.reject(U))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(e,i=!1){var r,a;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===s?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new ES(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return t.\u0275fac=function(e){Qp()},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();function vh(t){return"imperative"!==t}class TT{}class DT{preload(n,e){return st(null)}}let MT=(()=>{class t{constructor(e,i,r,a){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=new wT(r,i,l=>e.triggerEvent(new PS(l)),l=>e.triggerEvent(new IS(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(Si(e=>e instanceof kc),Rc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Va);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const a of i)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const s=a._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children));return vi(r).pipe(Tl(),ft(a=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?st(i._loadedConfig):this.loader.load(e.injector,i)).pipe(Wn(a=>(i._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Pe(hr),Pe(wd),Pe(Yn),Pe(TT))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})(),nm=(()=>{class t{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof V0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof kc&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof NS&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new NS(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){Qp()},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();const js=new xt("ROUTER_CONFIGURATION"),xT=new xt("ROUTER_FORROOT_GUARD"),nB=[zg,{provide:zS,useClass:$S},{provide:hr,useFactory:function oB(t,n,e,i,r,a,s={},o,l){const c=new hr(null,t,n,e,i,r,VS(a));return o&&(c.urlHandlingStrategy=o),l&&(c.routeReuseStrategy=l),function lB(t,n){t.errorHandler&&(n.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(n.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(n.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(n.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(n.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(n.canceledNavigationResolution=t.canceledNavigationResolution)}(s,c),s.enableTracing&&c.events.subscribe(u=>{var d,h;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(h=console.groupEnd)||void 0===h||h.call(console)}),c},deps:[zS,Fc,zg,Yn,wd,J0,js,[class W3{},new da],[class j3{},new da]]},Fc,{provide:nl,useFactory:function cB(t){return t.routerState.root},deps:[hr]},MT,DT,class tB{preload(n,e){return e().pipe(ds(()=>st(null)))}},{provide:js,useValue:{enableTracing:!1}}];function iB(){return new xC("Router",hr)}let RT=(()=>{class t{constructor(e,i){}static forRoot(e,i){return{ngModule:t,providers:[nB,kT(e),{provide:xT,useFactory:sB,deps:[[hr,new da,new bo]]},{provide:js,useValue:i||{}},{provide:Xo,useFactory:aB,deps:[Vs,[new Hl(jg),new da],js]},{provide:nm,useFactory:rB,deps:[hr,hO,js]},{provide:TT,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:DT},{provide:xC,multi:!0,useFactory:iB},[im,{provide:yd,multi:!0,useFactory:uB,deps:[im]},{provide:AT,useFactory:dB,deps:[im]},{provide:yC,multi:!0,useExisting:AT}]]}}static forChild(e){return{ngModule:t,providers:[kT(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Pe(xT,8),Pe(hr,8))},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({}),t})();function rB(t,n,e){return e.scrollOffset&&n.setOffset(e.scrollOffset),new nm(t,n,e)}function aB(t,n,e={}){return e.useHash?new QI(t,n):new qC(t,n)}function sB(t){return"guarded"}function kT(t){return[{provide:Ux,multi:!0,useValue:t},{provide:J0,multi:!0,useValue:t}]}let im=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new he}appInitializer(){return this.injector.get(qI,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(o=>i=o),a=this.injector.get(hr),s=this.injector.get(js);return"disabled"===s.initialNavigation?(a.setUpLocationChangeListener(),i(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?st(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),a.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(js),r=this.injector.get(MT),a=this.injector.get(nm),s=this.injector.get(hr),o=this.injector.get(Os);e===o.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&s.initialNavigation(),r.setUpPreloading(),a.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(Pe(Yn))},t.\u0275prov=He({token:t,factory:t.\u0275fac}),t})();function uB(t){return t.appInitializer.bind(t)}function dB(t){return t.bootstrapListener.bind(t)}const AT=new xt("Router Initializer"),fB=[];let pB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[RT.forRoot(fB)],RT]}),t})();function ET(t,n,e,i,r,a,s){try{var o=t[a](s),l=o.value}catch(c){return void e(c)}o.done?n(l):Promise.resolve(l).then(i,r)}function zs(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var a=t.apply(n,e);function s(l){ET(a,i,r,s,o,"next",l)}function o(l){ET(a,i,r,s,o,"throw",l)}s(void 0)})}}var Rt=(()=>{return(t=Rt||(Rt={}))[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",Rt;var t})();const Gi=new class gB{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(n){this._typeMetadatas.has(n.target)||this._typeMetadatas.set(n.target,new Map),this._typeMetadatas.get(n.target).set(n.propertyName,n)}addTransformMetadata(n){this._transformMetadatas.has(n.target)||this._transformMetadatas.set(n.target,new Map),this._transformMetadatas.get(n.target).has(n.propertyName)||this._transformMetadatas.get(n.target).set(n.propertyName,[]),this._transformMetadatas.get(n.target).get(n.propertyName).push(n)}addExposeMetadata(n){this._exposeMetadatas.has(n.target)||this._exposeMetadatas.set(n.target,new Map),this._exposeMetadatas.get(n.target).set(n.propertyName,n)}addExcludeMetadata(n){this._excludeMetadatas.has(n.target)||this._excludeMetadatas.set(n.target,new Map),this._excludeMetadatas.get(n.target).set(n.propertyName,n)}findTransformMetadatas(n,e,i){return this.findMetadatas(this._transformMetadatas,n,e).filter(r=>!r.options||!0===r.options.toClassOnly&&!0===r.options.toPlainOnly||(!0===r.options.toClassOnly?i===Rt.CLASS_TO_CLASS||i===Rt.PLAIN_TO_CLASS:!0!==r.options.toPlainOnly||i===Rt.CLASS_TO_PLAIN))}findExcludeMetadata(n,e){return this.findMetadata(this._excludeMetadatas,n,e)}findExposeMetadata(n,e){return this.findMetadata(this._exposeMetadatas,n,e)}findExposeMetadataByCustomName(n,e){return this.getExposedMetadatas(n).find(i=>i.options&&i.options.name===e)}findTypeMetadata(n,e){return this.findMetadata(this._typeMetadatas,n,e)}getStrategy(n){const e=this._excludeMetadatas.get(n),i=e&&e.get(void 0),r=this._exposeMetadatas.get(n),a=r&&r.get(void 0);return i&&a||!i&&!a?"none":i?"excludeAll":"exposeAll"}getExposedMetadatas(n){return this.getMetadata(this._exposeMetadatas,n)}getExcludedMetadatas(n){return this.getMetadata(this._excludeMetadatas,n)}getExposedProperties(n,e){return this.getExposedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===Rt.CLASS_TO_CLASS||e===Rt.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===Rt.CLASS_TO_PLAIN)).map(i=>i.propertyName)}getExcludedProperties(n,e){return this.getExcludedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===Rt.CLASS_TO_CLASS||e===Rt.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===Rt.CLASS_TO_PLAIN)).map(i=>i.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(n,e){const i=n.get(e);let r;i&&(r=Array.from(i.values()).filter(s=>void 0!==s.propertyName));const a=[];for(const s of this.getAncestors(e)){const o=n.get(s);if(o){const l=Array.from(o.values()).filter(c=>void 0!==c.propertyName);a.push(...l)}}return a.concat(r||[])}findMetadata(n,e,i){const r=n.get(e);if(r){const a=r.get(i);if(a)return a}for(const a of this.getAncestors(e)){const s=n.get(a);if(s){const o=s.get(i);if(o)return o}}}findMetadatas(n,e,i){const r=n.get(e);let a;r&&(a=r.get(i));const s=[];for(const o of this.getAncestors(e)){const l=n.get(o);l&&l.has(i)&&s.push(...l.get(i))}return s.slice().reverse().concat((a||[]).slice().reverse())}getAncestors(n){if(!n)return[];if(!this._ancestorsMap.has(n)){const e=[];for(let i=Object.getPrototypeOf(n.prototype.constructor);void 0!==i.prototype;i=Object.getPrototypeOf(i.prototype.constructor))e.push(i);this._ancestorsMap.set(n,e)}return this._ancestorsMap.get(n)}};function tt(t,n={}){return function(e,i){const r=Reflect.getMetadata("design:type",e,i);Gi.addTypeMetadata({target:e.constructor,propertyName:i,reflectedType:r,typeFunction:t,options:n})}}var q=(()=>{return(t=q||(q={}))[t.Horse=0]="Horse",t[t.Cheetah=1]="Cheetah",t[t.Hare=2]="Hare",t[t.Monkey=3]="Monkey",t[t.Goat=4]="Goat",t[t.Gecko=5]="Gecko",t[t.Dolphin=6]="Dolphin",t[t.Shark=7]="Shark",t[t.Octopus=8]="Octopus",t[t.Penguin=9]="Penguin",t[t.Caribou=10]="Caribou",t[t.Salamander=11]="Salamander",t[t.Fox=12]="Fox",q;var t})(),$=(()=>{return(t=$||($={}))[t.Flatland=0]="Flatland",t[t.Mountain=1]="Mountain",t[t.Ocean=2]="Ocean",t[t.Tundra=3]="Tundra",t[t.Volcanic=4]="Volcanic",$;var t})();class _e{constructor(n,e,i){this.name=n,this.amount=e,void 0!==i&&(this.itemType=i)}makeCopy(n){var e=new _e("",0);return e.name=JSON.parse(JSON.stringify(n.name)),e.amount=JSON.parse(JSON.stringify(n.amount)),e.itemType=JSON.parse(JSON.stringify(n.itemType)),e}}var se=(()=>{return(t=se||(se={}))[t.Animal=0]="Animal",t[t.Food=1]="Food",t[t.Training=2]="Training",t[t.Ability=3]="Ability",t[t.Specialty=4]="Specialty",t[t.Equipment=5]="Equipment",t[t.Resources=6]="Resources",t[t.Progression=7]="Progression",t[t.Other=8]="Other",se;var t})();class wa{constructor(){this.totalRewards=0,this.rewardsObtained=0,this.rewards=[]}}Ue([tt(()=>_e),Ye("design:type",Array)],wa.prototype,"rewards",void 0);class rl{constructor(){this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.noviceTrack=new wa,this.noviceTrack.totalRewards=12;var n=50;this.noviceTrack.rewards.push(new _e("Coins",n,se.Resources)),this.noviceTrack.rewards.push(new _e("Bonus Breed XP Gain From Training",1,se.Other)),this.noviceTrack.rewards.push(new _e("Coins",n,se.Resources)),this.noviceTrack.rewards.push(new _e("Bonus Breed XP Gain From Local Races",1,se.Other)),this.noviceTrack.rewards.push(new _e("Coins",n,se.Resources)),this.noviceTrack.rewards.push(new _e("Bonus Breed XP Gain From Training",1,se.Other)),this.noviceTrack.rewards.push(new _e("Coins",n,se.Resources)),this.noviceTrack.rewards.push(new _e("Bonus Breed XP Gain From Local Races",1,se.Other)),this.noviceTrack.rewards.push(new _e("Coins",n,se.Resources)),this.noviceTrack.rewards.push(new _e("Bonus Breed XP Gain From Training",1,se.Other)),this.noviceTrack.rewards.push(new _e("Coins",n,se.Resources)),this.noviceTrack.rewards.push(new _e("Bonus Breed XP Gain From Local Races",1,se.Other)),this.intermediateTrack=new wa,this.intermediateTrack.totalRewards=12,this.intermediateTrack.rewards.push(new _e("Coins",200,se.Resources)),this.intermediateTrack.rewards.push(new _e("Bonus Breed XP Gain From Training",2,se.Other)),this.intermediateTrack.rewards.push(new _e("Medals",1,se.Resources)),this.intermediateTrack.rewards.push(new _e("Diminishing Returns per Facility Level",2,se.Other)),this.intermediateTrack.rewards.push(new _e("Training Time Reduction",1,se.Other)),this.intermediateTrack.rewards.push(new _e("Bonus Breed XP Gain From Circuit Races",5,se.Other)),this.intermediateTrack.rewards.push(new _e("Coins",200,se.Resources)),this.intermediateTrack.rewards.push(new _e("Bonus Breed XP Gain From Local Races",1,se.Other)),this.intermediateTrack.rewards.push(new _e("Medals",1,se.Resources)),this.intermediateTrack.rewards.push(new _e("Bonus Breed XP Gain From Training",2,se.Other)),this.intermediateTrack.rewards.push(new _e("Training Time Reduction",1,se.Other)),this.intermediateTrack.rewards.push(new _e("Diminishing Returns per Facility Level",3,se.Other)),this.masterTrack=new wa,this.masterTrack.totalRewards=12,this.masterTrack.rewards.push(new _e("Bonus Breed XP Gain From Local Races",5,se.Other)),this.masterTrack.rewards.push(new _e("Diminishing Returns per Facility Level",2,se.Other)),this.masterTrack.rewards.push(new _e("Training Time Reduction",1,se.Other)),this.masterTrack.rewards.push(new _e("Coins",1e3,se.Resources)),this.masterTrack.rewards.push(new _e("Bonus Breed XP Gain From Training",3,se.Other)),this.masterTrack.rewards.push(new _e("Bonus Talents",2,se.Other)),this.masterTrack.rewards.push(new _e("Training Time Reduction",1,se.Other)),this.masterTrack.rewards.push(new _e("Coins",1e3,se.Resources)),this.masterTrack.rewards.push(new _e("Orb Necklace",1,se.Other)),this.masterTrack.rewards.push(new _e("Diminishing Returns per Facility Level",3,se.Other)),this.masterTrack.rewards.push(new _e("Training Time Reduction",1,se.Other)),this.masterTrack.rewards.push(new _e("Bonus Talents",3,se.Other))}}Ue([tt(()=>wa),Ye("design:type",wa)],rl.prototype,"noviceTrack",void 0),Ue([tt(()=>wa),Ye("design:type",wa)],rl.prototype,"intermediateTrack",void 0),Ue([tt(()=>wa),Ye("design:type",wa)],rl.prototype,"masterTrack",void 0);class Fe{constructor(n,e,i,r,a,s){this.defaultStaminaModifier=5,this.defaultMaxSpeedModifier=.3,this.defaultAccelerationModifier=.1,this.defaultPowerModifier=1,this.defaultFocusModifier=5,this.defaultAdaptabilityModifier=5,this.defaultBurstDistanceModifier=1,this.diminishingReturnsDefaultStatThreshold=20,void 0!==n&&(this.topSpeed=n),void 0!==e&&(this.acceleration=e),void 0!==i&&(this.endurance=i),void 0!==r&&(this.power=r),void 0!==a&&(this.focus=a),void 0!==s&&(this.adaptability=s)}calculateStamina(n,e,i){return null==n&&(n=this.defaultStaminaModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.endurance<=e?this.endurance*n*i:(e*n+(this.endurance-e)*(n*this.calculateDiminishingReturns(this.endurance-e)))*i}calculateMaxSpeed(n,e,i){return null==n&&(n=this.defaultMaxSpeedModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.topSpeed<=e?this.topSpeed*n*i:(e*n+(this.topSpeed-e)*(n*this.calculateDiminishingReturns(this.topSpeed-e)))*i}calculateTrueAcceleration(n,e,i){return null==n&&(n=this.defaultAccelerationModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.acceleration<=e?this.acceleration*n*i:(e*n+(this.acceleration-e)*(n*this.calculateDiminishingReturns(this.acceleration-e)))*i}calculateTruePower(n,e,i){return null==n&&(n=this.defaultPowerModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.power<=e?this.power*n*i:(e*n+(this.power-e)*(n*this.calculateDiminishingReturns(this.power-e)))*i}calculateTrueFocus(n,e,i){return null==n&&(n=this.defaultFocusModifier),null==i&&(i=1),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.focus<=e?this.focus*n*i:(e*n+(this.focus-e)*(n*this.calculateDiminishingReturns(this.focus-e)))*i}calculateTrueAdaptability(n,e,i){return null==n&&(n=this.defaultAdaptabilityModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.adaptability<=e?this.adaptability*n*i:(e*n+(this.adaptability-e)*(n*this.calculateDiminishingReturns(this.adaptability-e)))*i}calculateBurstChance(n,e,i){var r=this.focus,a=this.adaptability;return null!=e&&(r*=e/this.focusMs),null!=i&&(a*=i/this.adaptabilityMs),(a+r)*(1+n/4)/1e3*100}calculateBurstDistance(n,e,i){null==e&&(e=this.defaultBurstDistanceModifier);var r=this.power;return null!=i&&(r*=i/this.powerMs),r*(1+n/4)*e}topSpeedPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}accelerationPopover(n){return"Every stat point increases acceleration by "+n.toFixed(3)+"m/s up to diminishing returns."}endurancePopover(n){return"Every stat point increases stamina by "+n.toFixed(3)+" up to diminishing returns."}powerPopover(n){return"Every stat point increases ability efficiency by "+n.toFixed(3)+"% up to diminishing returns."}focusPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}adaptabilityPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}maxSpeedMsPopover(){return"This is the max speed this animal can go during a race."}accelerationMsPopover(){return"This is how quickly this animal will gain speed."}staminaPopover(){return"Your animal loses stamina while racing. If its stamina reaches 0, it will slow down for a period of time while its stamina recharges."}powerMsPopover(){return"This increases the efficiency of your animal's ability."}focusMsPopover(){return"This is the average distance your animal can go without losing focus, causing them to stop."}adaptabilityMsPopover(){return"This is the average distance your animal can go without stumbling, causing them to slow down."}burstChancePopover(){return"Every time you enter a path, you have the chance to enter burst mode. This is your chance per 1000 meters that you will burst. Increase by improving Focus and Adaptability."}burstDistancePopover(){return"This is how far you can go while bursting. Increase by improving Power."}calculateDiminishingReturns(n){return 1/n**.6}addCurrentRacingStats(n){this.maxSpeedMs+=n.topSpeed,this.accelerationMs+=n.acceleration,this.stamina+=n.endurance,this.powerMs+=n.power,this.focusMs+=n.focus,this.adaptabilityMs+=n.adaptability}subtractCurrentRacingStats(n){this.maxSpeedMs-=n.topSpeed,this.accelerationMs-=n.acceleration,this.stamina-=n.endurance,this.powerMs-=n.power,this.focusMs-=n.focus,this.adaptabilityMs-=n.adaptability}multiplyCurrentRacingStats(n){this.maxSpeedMs*=n.topSpeed,this.accelerationMs*=n.acceleration,this.stamina*=n.endurance,this.powerMs*=n.power,this.focusMs*=n.focus,this.adaptabilityMs*=n.adaptability}divideCurrentRacingStats(n){this.maxSpeedMs/=n.topSpeed,this.accelerationMs/=n.acceleration,this.stamina/=n.endurance,this.powerMs/=n.power,this.focusMs/=n.focus,this.adaptabilityMs/=n.adaptability}}var Qe=(()=>{return(t=Qe||(Qe={}))[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large",Qe;var t})();class fs{constructor(){this.trainingTimeRemaining=7200,this.timeTrained=0,this.isAvailable=!1,this.purchasePrice=50}makeCopy(n){var e=new fs;return e.affectedStatRatios=JSON.parse(JSON.stringify(n.affectedStatRatios)),e.facilitySize=JSON.parse(JSON.stringify(n.facilitySize)),e.isAvailable=JSON.parse(JSON.stringify(n.isAvailable)),e.purchasePrice=JSON.parse(JSON.stringify(n.purchasePrice)),e.statGain=JSON.parse(JSON.stringify(n.statGain)),e.timeToComplete=JSON.parse(JSON.stringify(n.timeToComplete)),e.timeTrained=JSON.parse(JSON.stringify(n.timeTrained)),e.trainingCourseType=JSON.parse(JSON.stringify(n.trainingCourseType)),e.trainingName=JSON.parse(JSON.stringify(n.trainingName)),e.trainingType=JSON.parse(JSON.stringify(n.trainingType)),e}getFacilitySize(){return Qe[this.facilitySize]}getStatGainDescription(){var n="";return this.affectedStatRatios.topSpeed>0&&(n+="+"+this.statGain*this.affectedStatRatios.topSpeed+" Speed\n"),this.affectedStatRatios.acceleration>0&&(n+="+"+this.statGain*this.affectedStatRatios.acceleration+" Acceleration\n"),this.affectedStatRatios.endurance>0&&(n+="+"+this.statGain*this.affectedStatRatios.endurance+" Endurance\n"),this.affectedStatRatios.focus>0&&(n+="+"+this.statGain*this.affectedStatRatios.focus+" Focus\n"),this.affectedStatRatios.power>0&&(n+="+"+this.statGain*this.affectedStatRatios.power+" Power\n"),this.affectedStatRatios.adaptability>0&&(n+="+"+this.statGain*this.affectedStatRatios.adaptability+" Adaptability\n"),n}}Ue([tt(()=>Fe),Ye("design:type",Fe)],fs.prototype,"affectedStatRatios",void 0);class _t{constructor(){this.abilityLevel=1,this.abilityXp=0,this.abilityMaxXp=50}}var fe=(()=>{return(t=fe||(fe={}))[t.topSpeed=0]="topSpeed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",fe;var t})();class Yt{constructor(n,e,i,r,a){void 0!==n&&(this.traitName=n),void 0!==e&&(this.requiredLevel=e),void 0!==i&&(this.researchLevel=i),void 0!==r&&(this.positiveStatGain=r),void 0!==a&&(this.negativeStatGain=a)}getStatGainDescription(n){var e="",i="";return this.positiveStatGain===fe.acceleration&&(e="Acceleration"),this.positiveStatGain===fe.adaptability&&(e="Adaptability"),this.positiveStatGain===fe.endurance&&(e="Endurance"),this.positiveStatGain===fe.focus&&(e="Focus"),this.positiveStatGain===fe.power&&(e="Power"),this.positiveStatGain===fe.topSpeed&&(e="Speed"),this.negativeStatGain===fe.acceleration&&(i="Acceleration"),this.negativeStatGain===fe.adaptability&&(i="Adaptability"),this.negativeStatGain===fe.endurance&&(i="Endurance"),this.negativeStatGain===fe.focus&&(i="Focus"),this.negativeStatGain===fe.power&&(i="Power"),this.negativeStatGain===fe.topSpeed&&(i="Speed"),"+"+this.researchLevel+"% "+e+", -"+(this.researchLevel>n?n:this.researchLevel)+"% "+i}}class rm{constructor(){this.maxSpeedModifier=1,this.accelerationModifier=1,this.staminaModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1}}class am{constructor(){this.bonusBreedXpGainFromLocalRaces=0,this.bonusBreedXpGainFromCircuitRaces=0,this.bonusBreedXpGainFromTraining=0,this.trainingTimeReduction=0,this.diminishingReturnsBonus=0,this.bonusTalents=0}}class sm{constructor(){this.metersSinceLostFocus=0,this.recoveringStamina=!1,this.defaultRecoveringStaminaLength=150,this.currentRecoveringStaminaLength=this.defaultRecoveringStaminaLength,this.ranOutOfStamina=!1,this.lostFocus=!1,this.defaultLostFocusLength=60,this.currentLostFocusLength=this.defaultLostFocusLength,this.stumbled=!1,this.defaultStumbledLength=10,this.currentStumbledLength=this.defaultStumbledLength,this.relayEffects=[],this.burstCount=0,this.icyCurrentYAmount=0,this.icyCurrentDirectionUp=!0,this.headbandStumblePreventionCount=0}}var ji=(()=>{return(t=ji||(ji={}))[t.none=0]="none",t[t.sprint=1]="sprint",t[t.support=2]="support",t[t.longDistance=3]="longDistance",ji;var t})();class om{constructor(){this.talentTreeType=ji.none,this.row2RequiredPoints=5,this.row3RequiredPoints=10,this.row4RequiredPoints=15,this.column1Row1Points=0,this.column1Row2Points=0,this.column1Row3Points=0,this.column1Row4Points=0,this.column2Row1Points=0,this.column2Row2Points=0,this.column2Row3Points=0,this.column2Row4Points=0,this.column3Row1Points=0,this.column3Row2Points=0,this.column3Row3Points=0,this.column3Row4Points=0}getTalentPointsByColumn(n){return 0===n?this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points:1===n?this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points:2===n?this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points:0}getTalentPointsByRowColumn(n,e){return 0===n&&0===e?this.column1Row1Points:1===n&&0===e?this.column1Row2Points:2===n&&0===e?this.column1Row3Points:3===n&&0===e?this.column1Row4Points:0===n&&1===e?this.column2Row1Points:1===n&&1===e?this.column2Row2Points:2===n&&1===e?this.column2Row3Points:3===n&&1===e?this.column2Row4Points:0===n&&2===e?this.column3Row1Points:1===n&&2===e?this.column3Row2Points:2===n&&2===e?this.column3Row3Points:3===n&&2===e?this.column3Row4Points:0}getTotalSpentPoints(){return this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points+this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points+this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points}spendTalentPoint(n,e){0===n&&0===e&&(this.column1Row1Points+=1),1===n&&0===e&&(this.column1Row2Points+=1),2===n&&0===e&&(this.column1Row3Points+=1),3===n&&0===e&&(this.column1Row4Points+=1),0===n&&1===e&&(this.column2Row1Points+=1),1===n&&1===e&&(this.column2Row2Points+=1),2===n&&1===e&&(this.column2Row3Points+=1),3===n&&1===e&&(this.column2Row4Points+=1),0===n&&2===e&&(this.column3Row1Points+=1),1===n&&2===e&&(this.column3Row2Points+=1),2===n&&2===e&&(this.column3Row3Points+=1),3===n&&2===e&&(this.column3Row4Points+=1)}}class lm{constructor(){this.successfulCoachingAttempts=0}}class Lt{constructor(){this.incubatorStatUpgrades=new rm,this.allTrainingTracks=new rl,this.miscStats=new am,this.trackedAnimalStats=new lm,this.talentTree=new om,this.breedLevel=1,this.breedGaugeXp=0,this.breedGaugeMax=100,this.totalRacesRun=0,this.equippedOrb=null,this.canEquipOrb=!1,this.canTrain=!0,this.isAvailable=!1,this.availableAbilities=[]}viewAbility(){return this.ability.name}getAbilityUseUpdateText(n,e=""){return n+" uses "+this.ability.name+e+"."}useAbility(){}getAnimalType(){return q[this.type]}getRaceCourseType(){return $[this.raceCourseType]}getTraitName(){return null==this.trait||""===this.trait.traitName?"None":this.trait.traitName}getEquippedItemName(){if(null!=this.equippedItem)return this.equippedItem.name}getCourseTypeClass(){return this.raceCourseType===$.Flatland?"flatlandColor":this.raceCourseType===$.Mountain?"mountainColor":this.raceCourseType===$.Ocean?"waterColor":this.raceCourseType===$.Tundra?"tundraColor":this.raceCourseType===$.Volcanic?"volcanicColor":""}increaseStatsFromCurrentTraining(){null==this.currentTraining||null==this.currentStats||(this.currentStats.topSpeed+=this.currentTraining.affectedStatRatios.topSpeed*this.currentTraining.statGain,this.currentStats.acceleration+=this.currentTraining.affectedStatRatios.acceleration*this.currentTraining.statGain,this.currentStats.endurance+=this.currentTraining.affectedStatRatios.endurance*this.currentTraining.statGain,this.currentStats.power+=this.currentTraining.affectedStatRatios.power*this.currentTraining.statGain,this.currentStats.focus+=this.currentTraining.affectedStatRatios.focus*this.currentTraining.statGain,this.currentStats.adaptability+=this.currentTraining.affectedStatRatios.adaptability*this.currentTraining.statGain)}increaseStats(n){null==n||null==this.currentStats||(this.currentStats.topSpeed+=Number(n.topSpeed),this.currentStats.acceleration+=Number(n.acceleration),this.currentStats.stamina+=Number(n.stamina),this.currentStats.endurance+=Number(n.endurance),this.currentStats.power+=Number(n.power),this.currentStats.focus+=Number(n.focus),this.currentStats.adaptability+=Number(n.adaptability))}}Ue([tt(()=>Fe),Ye("design:type",Fe)],Lt.prototype,"currentStats",void 0),Ue([tt(()=>Fe),Ye("design:type",Fe)],Lt.prototype,"baseStats",void 0),Ue([tt(()=>fs),Ye("design:type",Object)],Lt.prototype,"currentTraining",void 0),Ue([tt(()=>fs),Ye("design:type",Object)],Lt.prototype,"queuedTraining",void 0),Ue([tt(()=>_t),Ye("design:type",_t)],Lt.prototype,"ability",void 0),Ue([tt(()=>sm),Ye("design:type",sm)],Lt.prototype,"raceVariables",void 0),Ue([tt(()=>_e),Ye("design:type",Object)],Lt.prototype,"equippedItem",void 0),Ue([tt(()=>_e),Ye("design:type",Object)],Lt.prototype,"equippedOrb",void 0),Ue([tt(()=>rm),Ye("design:type",rm)],Lt.prototype,"incubatorStatUpgrades",void 0),Ue([tt(()=>rl),Ye("design:type",rl)],Lt.prototype,"allTrainingTracks",void 0),Ue([tt(()=>am),Ye("design:type",am)],Lt.prototype,"miscStats",void 0),Ue([tt(()=>lm),Ye("design:type",lm)],Lt.prototype,"trackedAnimalStats",void 0),Ue([tt(()=>_t),Ye("design:type",Array)],Lt.prototype,"availableAbilities",void 0),Ue([tt(()=>Yt),Ye("design:type",Yt)],Lt.prototype,"trait",void 0),Ue([tt(()=>om),Ye("design:type",om)],Lt.prototype,"talentTree",void 0);class mB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Horse,this.raceCourseType=$.Flatland,this.ability=new _t,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Second Wind",this.ability.description="Second Wind",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.efficiency=60,n.oneTimeEffect=!0,n.name="Inspiration",n.description="Inspiration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.cooldown=5,e.efficiency=27,e.oneTimeEffect=!1,e.name="Pacemaker",e.description="Pacemaker",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class vB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Cheetah,this.raceCourseType=$.Flatland,this.ability=new _t,this.ability.cooldown=6,this.ability.efficiency=35,this.ability.oneTimeEffect=!1,this.ability.name="Sprint",this.ability.description="Sprint",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.efficiency=4,n.oneTimeEffect=!1,n.name="Giving Chase",n.description="Giving Chase",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.efficiency=1,e.oneTimeEffect=!1,e.name="On The Hunt",e.description="On The Hunt",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class _B extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Hare,this.raceCourseType=$.Flatland,this.ability=new _t,this.ability.efficiency=45,this.ability.oneTimeEffect=!0,this.ability.name="Prey Instinct",this.ability.description="Prey Instinct",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.cooldown=5,n.efficiency=40,n.oneTimeEffect=!1,n.name="Awareness",n.description="Awareness",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.efficiency=130,e.oneTimeEffect=!0,e.name="Nap",e.description="Nap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class bB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Monkey,this.raceCourseType=$.Mountain,this.ability=new _t,this.ability.cooldown=11,this.ability.efficiency=6,this.ability.name="Landslide",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.efficiency=60,n.oneTimeEffect=!0,n.name="Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.efficiency=70,e.cooldown=0,e.oneTimeEffect=!0,e.name="Leap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=30,this.availableAbilities.push(e)}}class yB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Goat,this.raceCourseType=$.Mountain,this.ability=new _t,this.ability.efficiency=2,this.ability.oneTimeEffect=!1,this.ability.name="Sure-footed",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.efficiency=5,n.oneTimeEffect=!1,n.name="Deep Breathing",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.efficiency=1,e.oneTimeEffect=!1,e.name="In The Rhythm",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=15,this.availableAbilities.push(e)}}class CB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Gecko,this.raceCourseType=$.Mountain,this.ability=new _t,this.ability.cooldown=5,this.ability.efficiency=55,this.ability.oneTimeEffect=!1,this.ability.name="Sticky",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.efficiency=2,n.oneTimeEffect=!1,n.name="Night Vision",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.efficiency=38,e.oneTimeEffect=!0,e.name="Camouflage",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class wB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Dolphin,this.raceCourseType=$.Ocean,this.ability=new _t,this.ability.cooldown=6,this.ability.efficiency=84,this.ability.oneTimeEffect=!1,this.ability.name="Echolocation",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.efficiency=50,n.oneTimeEffect=!0,n.name="Navigator",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.efficiency=70,e.oneTimeEffect=!0,e.name="Flowing Current",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class SB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Shark,this.raceCourseType=$.Ocean,this.ability=new _t,this.ability.efficiency=60,this.ability.oneTimeEffect=!0,this.ability.name="Apex Predator",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.efficiency=35,n.oneTimeEffect=!0,n.name="Feeding Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.efficiency=1,e.oneTimeEffect=!0,e.name="Blood In The Water",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class TB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Octopus,this.raceCourseType=$.Ocean,this.ability=new _t,this.ability.cooldown=5,this.ability.efficiency=17,this.ability.totalFrames=15,this.ability.oneTimeEffect=!1,this.ability.name="Propulsion",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.efficiency=4,n.oneTimeEffect=!1,n.name="Buried Treasure",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.efficiency=3,e.oneTimeEffect=!0,e.name="Big Brain",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class DB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Penguin,this.raceCourseType=$.Tundra,this.ability=new _t,this.ability.efficiency=65,this.ability.cooldown=8,this.ability.oneTimeEffect=!1,this.ability.name="Careful Toboggan",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.efficiency=7,n.oneTimeEffect=!1,n.name="Wild Toboggan",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.efficiency=1,e.oneTimeEffect=!1,e.name="Quick Toboggan",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class MB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Caribou,this.raceCourseType=$.Tundra,this.ability=new _t,this.ability.efficiency=4,this.ability.oneTimeEffect=!0,this.ability.name="Herd Mentality",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.efficiency=50,n.cooldown=7,n.oneTimeEffect=!1,n.name="Great Migration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.efficiency=2,e.oneTimeEffect=!0,e.name="Special Delivery",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class xB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Salamander,this.raceCourseType=$.Volcanic,this.ability=new _t,this.ability.cooldown=7,this.ability.efficiency=70,this.ability.oneTimeEffect=!1,this.ability.name="Cold Blooded",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.cooldown=6,n.efficiency=50,n.oneTimeEffect=!1,n.name="Burrow",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.cooldown=10,e.efficiency=25,e.oneTimeEffect=!1,e.name="Heat Up",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class RB extends Lt{constructor(){super(),this.baseStats=new Fe(5,5,5,5,5,5),this.currentStats=new Fe(5,5,5,5,5,5),this.type=q.Fox,this.raceCourseType=$.Volcanic,this.ability=new _t,this.ability.cooldown=5,this.ability.efficiency=60,this.ability.oneTimeEffect=!1,this.ability.name="Trickster",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new _t;n.efficiency=6,n.oneTimeEffect=!1,n.name="Fleeting Speed",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new _t;e.efficiency=65,e.oneTimeEffect=!0,e.name="Nine Tails",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class _h{constructor(){this.selectedAnimals=[],this.courseTypeOrder=[],this.isCourseOrderActive=!1,this.autoRunFreeRace=!1}}Ue([tt(()=>Lt),Ye("design:type",Array)],_h.prototype,"selectedAnimals",void 0);class cm{constructor(){this.maxSpeedIncrease=1.1,this.accelerationRateIncrease=1.1,this.staminaIncrease=1.1,this.powerEfficiencyIncrease=1.1,this.focusDistanceIncrease=1.1,this.adaptabilityDistanceIncrease=1.1}}class kB{constructor(){this.upgradePrice=[],this.upgradedStatGain=new Fe(1,1,1,1,1,1),this.barnLevel=0,this.specializationLevel=0,this.currentDeltaTime=0}}class um{constructor(){this.barnUpgrades=new kB}getSize(){return Qe[this.size]}}class Uc{constructor(){this.timeTrained=0,this.timeToComplete=300}}Ue([tt(()=>Lt),Ye("design:type",Object)],Uc.prototype,"assignedAnimal",void 0),Ue([tt(()=>Yt),Ye("design:type",Object)],Uc.prototype,"assignedTrait",void 0);class dm{constructor(){this.weekStartDay=2,this.weekStartHour=9,this.weekEndDay=4,this.weekEndHour=12,this.weekendStartDay=5,this.weekendStartHour=20,this.weekendEndDay=0,this.weekendEndHour=23,this.distanceCovered=0,this.rank="Z"}}class PT{}var ot=(()=>{return(t=ot||(ot={}))[t.Sunny=0]="Sunny",t[t.Rainy=1]="Rainy",t[t.Stormy=2]="Stormy",t[t.Snowfall=3]="Snowfall",t[t.Maelstrom=4]="Maelstrom",t[t.Hailstorm=5]="Hailstorm",t[t.Ashfall=6]="Ashfall",t[t.Torrid=7]="Torrid",ot;var t})(),Le=(()=>{return(t=Le||(Le={}))[t.Regular=0]="Regular",t[t.S=1]="S",t[t.Bumps=2]="Bumps",t[t.Crevasse=3]="Crevasse",t[t.Gaps=4]="Gaps",t[t.Waves=5]="Waves",t[t.Dive=6]="Dive",t[t.Cavern=7]="Cavern",t[t.Hills=8]="Hills",t[t.FirstRegular=9]="FirstRegular",t[t.LastRegular=10]="LastRegular",t[t.SteppingStones=11]="SteppingStones",Le;var t})(),fr=(()=>{return(t=fr||(fr={}))[t.None=0]="None",t[t.Low=.8]="Low",t[t.Medium=.6]="Medium",t[t.High=.4]="High",fr;var t})();class bh{constructor(n){this.didAnimalStumble=!1,this.didAnimalLoseFocus=!1,this.checkedForBurst=!1,this.checkedForNineTails=!1,null!=n&&this.setStumbleFields(),this.driftAmount=0,this.isSpecialPath=!1}setStumbleFields(){this.currentStumbleOpportunity=0,this.routeDesign===Le.Regular&&(this.stumbleSeverity=fr.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Le.S&&(this.isSpecialPath=!0,this.stumbleSeverity=fr.Low,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Le.Bumps&&(this.isSpecialPath=!0,this.stumbleSeverity=fr.Medium,this.frequencyOfStumble=20,this.stumbleOpportunities=8),this.routeDesign===Le.Crevasse&&(this.isSpecialPath=!0,this.stumbleSeverity=fr.High,this.frequencyOfStumble=80,this.stumbleOpportunities=6),this.routeDesign===Le.Gaps&&(this.isSpecialPath=!0,this.stumbleSeverity=fr.Medium,this.frequencyOfStumble=175,this.stumbleOpportunities=4),this.routeDesign===Le.Waves&&(this.isSpecialPath=!0,this.stumbleSeverity=fr.Medium,this.frequencyOfStumble=50,this.stumbleOpportunities=6),this.routeDesign===Le.Dive&&(this.isSpecialPath=!0,this.stumbleSeverity=fr.High,this.frequencyOfStumble=200,this.stumbleOpportunities=2),this.routeDesign===Le.Cavern&&(this.isSpecialPath=!0,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Le.Hills&&(this.isSpecialPath=!0,this.stumbleSeverity=fr.High,this.frequencyOfStumble=120,this.stumbleOpportunities=3,this.frequencyOfDrift=250),(this.routeDesign===Le.FirstRegular||this.routeDesign===Le.LastRegular)&&(this.isSpecialPath=!0,this.stumbleSeverity=fr.Medium,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Le.SteppingStones&&(this.isSpecialPath=!0,this.stumbleSeverity=fr.High,this.frequencyOfStumble=60,this.stumbleOpportunities=10)}}class Zr{constructor(n){var e=.8,r=1.2;this.maxSpeedModifier=1,this.accelerationModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1,null!==n&&(this.terrainType=n,n===ot.Sunny&&(this.staminaModifier=1.5,this.maxSpeedModifier=r),n===ot.Rainy&&(this.adaptabilityModifier=e,this.focusModifier=r),n===ot.Stormy&&(this.focusModifier=e,this.accelerationModifier=r),n===ot.Maelstrom&&(this.accelerationModifier=e,this.maxSpeedModifier=e,this.adaptabilityModifier=r),n===ot.Hailstorm&&(this.focusModifier=e,this.adaptabilityModifier=e,this.maxSpeedModifier=e),n===ot.Ashfall&&(this.staminaModifier=r,this.accelerationModifier=e,this.powerModifier=e),n===ot.Snowfall&&(this.staminaModifier=e,this.maxSpeedModifier=e,this.accelerationModifier=e),n===ot.Torrid&&(this.powerModifier=e,this.maxSpeedModifier=e,this.focusModifier=r))}getTerrainType(){return ot[this.terrainType]}}class wn{constructor(n,e){this.legComplete=!1,null!=n&&(this.courseType=n),void 0!==e&&null!=e&&(this.distance=e),this.pathData=[]}getCourseTypeName(){return $[this.courseType]}getCourseTypeClass(){return this.courseType===$.Flatland?"flatlandColor":this.courseType===$.Mountain?"mountainColor":this.courseType===$.Ocean?"waterColor":this.courseType===$.Tundra?"tundraColor":this.courseType===$.Volcanic?"volcanicColor":""}getTerrainName(){return null==this.terrain?"":ot[this.terrain.terrainType]}}Ue([tt(()=>bh),Ye("design:type",Array)],wn.prototype,"pathData",void 0),Ue([tt(()=>Zr),Ye("design:type",Zr)],wn.prototype,"terrain",void 0);class hm{constructor(){this.distanceCoveredByFrame=[],this.velocityByFrame=[],this.timeToCompleteByFrame=[],this.maxSpeedByFrame=[],this.staminaPercentByFrame=[],this.racerEffectByFrame=[],this.yAdjustmentByFrame=[],this.lavaFallPercentByFrame=[],this.racePositionByFrame=[]}}class Pr{constructor(n,e,i,r,a,s,o,l,c){this.raceLegs=n,this.requiredRank=e,this.isCircuitRace=i,this.raceId=r,this.length=a,this.timeToComplete=s,this.raceUI=new hm,this.circuitIncreaseReward=["",""],null!=o&&(this.rewards=o),null!=l&&(this.localRaceType=l),null!=c&&(this.trackRaceType=c)}}Ue([tt(()=>wn),Ye("design:type",Array)],Pr.prototype,"raceLegs",void 0),Ue([tt(()=>_e),Ye("design:type",Array)],Pr.prototype,"rewards",void 0),Ue([tt(()=>hm),Ye("design:type",hm)],Pr.prototype,"raceUI",void 0);class yh{constructor(){this.rewards=[]}}Ue([tt(()=>Date),Ye("design:type",Date)],yh.prototype,"expirationDate",void 0),Ue([tt(()=>fs),Ye("design:type",Array)],yh.prototype,"rewards",void 0);class Tt{constructor(){this.isAvailable=!0,this.amountPurchased=0,this.totalShopQuantity=1,this.quantityMultiplier=1,this.purchasePrice=[],this.basePurchasePrice=[]}}class ps{}Ue([tt(()=>Tt),Ye("design:type",Array)],ps.prototype,"itemList",void 0);class fm{constructor(){this.tutorialCompleted=!1,this.currentTutorialId=1,this.showTutorial=!1,this.showTrainingTrackTutorial=!0,this.showCoachingTutorial=!0}}class pm{constructor(){this.settings=[]}get(n){var e=this.settings.find(i=>i[0]===n);return null!=e?e[1]:""}set(n,e){var i=this.settings.find(r=>r[0]===n);null==i?this.settings.push([n,e]):i[1]=e}}class ue{constructor(n,e){void 0!==n&&(this.value=n),void 0!==e&&(this.text=e)}}class gm{constructor(){this.totalRaces=0,this.totalBreeds=0,this.totalMetersRaced=0,this.mostUsedAnimal="",this.mostRacedCourseType="",this.highestMaxSpeed="",this.highestAccelerationRate="",this.highestStamina="",this.highestPowerEfficiency="",this.highestFocusDistance="",this.highestAdaptabilityDistance=""}}class mm{constructor(){this.unlockables=[]}get(n){var e=this.unlockables.find(i=>i[0]===n);return null!=e&&e[1]}set(n,e){var i=this.unlockables.find(r=>r[0]===n);null==i?this.unlockables.push([n,e]):i[1]=e}}class Kn{constructor(n){this.userIsRacing=!1,null!=n&&(this.animals=n.animals,this.barns=n.barns,this.trainingOptions=n.trainingOptions,this.circuitRaces=n.circuitRaces,this.circuitRank=n.circuitRank,this.localRaces=n.localRaces,this.resources=n.resources,this.modifiers=n.modifiers,this.shop=n.shop,this.animalDecks=n.animalDecks,this.incubator=n.incubator,this.trackedStats=n.trackedStats,this.pinnacle=n.pinnacle,this.orbStats=n.orbStats,this.redeemedCodes=n.redeemedCodes,this.eventRaceData=n.eventRaceData,this.nationalRaceCountdown=0,this.autoFreeRaceCounter=0,this.freeRaceCounter=0,this.freeRaceTimePeriodCounter=0)}}Ue([tt(()=>Lt),Ye("design:type",Array)],Kn.prototype,"animals",void 0),Ue([tt(()=>um),Ye("design:type",Array)],Kn.prototype,"barns",void 0),Ue([tt(()=>fs),Ye("design:type",Array)],Kn.prototype,"trainingOptions",void 0),Ue([tt(()=>Pr),Ye("design:type",Array)],Kn.prototype,"circuitRaces",void 0),Ue([tt(()=>Pr),Ye("design:type",Array)],Kn.prototype,"localRaces",void 0),Ue([tt(()=>PT),Ye("design:type",PT)],Kn.prototype,"pinnacle",void 0),Ue([tt(()=>_e),Ye("design:type",Array)],Kn.prototype,"resources",void 0),Ue([tt(()=>ue),Ye("design:type",Array)],Kn.prototype,"modifiers",void 0),Ue([tt(()=>ps),Ye("design:type",Array)],Kn.prototype,"shop",void 0),Ue([tt(()=>_h),Ye("design:type",Array)],Kn.prototype,"animalDecks",void 0),Ue([tt(()=>pm),Ye("design:type",pm)],Kn.prototype,"settings",void 0),Ue([tt(()=>mm),Ye("design:type",mm)],Kn.prototype,"unlockables",void 0),Ue([tt(()=>Uc),Ye("design:type",Uc)],Kn.prototype,"incubator",void 0),Ue([tt(()=>gm),Ye("design:type",gm)],Kn.prototype,"trackedStats",void 0),Ue([tt(()=>cm),Ye("design:type",cm)],Kn.prototype,"orbStats",void 0),Ue([tt(()=>fm),Ye("design:type",fm)],Kn.prototype,"tutorials",void 0),Ue([tt(()=>yh),Ye("design:type",Array)],Kn.prototype,"redeemedCodes",void 0),Ue([tt(()=>dm),Ye("design:type",dm)],Kn.prototype,"eventRaceData",void 0);var Ee=(()=>{return(t=Ee||(Ee={}))[t.ShortTrackRunning=0]="ShortTrackRunning",t[t.Sprints=1]="Sprints",t[t.TrailRunning=2]="TrailRunning",t[t.MoveLogs=3]="MoveLogs",t[t.Footwork=4]="Footwork",t[t.PracticeCommands=5]="PracticeCommands",t[t.ScentTraining=6]="ScentTraining",t[t.SmallWagonTow=7]="SmallWagonTow",t[t.Sidestep=8]="Sidestep",t[t.MediumTrackRunning=9]="MediumTrackRunning",t[t.UphillRun=10]="UphillRun",t[t.Puzzles=11]="Puzzles",t[t.MoveRocks=12]="MoveRocks",t[t.LateralVerticalDrill=13]="LateralVerticalDrill",t[t.DodgeBall=14]="DodgeBall",t[t.BurstPractice=15]="BurstPractice",t[t.Acrobatics=16]="Acrobatics",t[t.LongTrackRunning=17]="LongTrackRunning",t[t.VehicleTow=18]="VehicleTow",t[t.LogJump=19]="LogJump",t[t.Meditation=20]="Meditation",t[t.WindSprints=21]="WindSprints",t[t.GreenwayHike=22]="GreenwayHike",t[t.Marathon=23]="Marathon",t[t.AgilityCourse=24]="AgilityCourse",Ee;var t})(),IT=j(340);let Sa=(()=>{class t{constructor(){}getRandomSeededInteger(e,i,r="seeded"){var a=IT(r);return Math.round(a()*(i-e)+e)}getRandomInteger(e,i){return Math.round(Math.random()*(i-e)+e)}getRandomSeededNumber(e,i,r="seeded"){return IT(r)()*(i-e)+e}getRandomNumber(e,i){return Math.random()*(i-e)+e}getRandomNumberPercent(){return 99*Math.random()+1}getNumericValueOfCircuitRank(e){var i=0;return e.length>1&&(i=26*(e.length-1)),i+(91-e.charCodeAt(e.length-1))}getCircuitRankFromNumericValue(e){for(var i="";e>26;)i+="A",e-=26;return i+String.fromCharCode(91-e)}convertDegreesToRadians(e){return e*(Math.PI/180)}shadeColor(e,i){return"#"+e.replace(/^#/,"").replace(/../g,a=>("0"+Math.min(255,Math.max(0,parseInt(a,16)+i)).toString(16)).substr(-2))}getProperNoun(e){return e.charAt(0).toUpperCase()+e.slice(1)}condenseList(e){var i=[];return e.forEach(r=>{if(i.some(s=>s.name===r.name))i.find(s=>s.name===r.name).amount+=r.amount;else{var a=r.makeCopy(r);i.push(a)}}),i}ordinalSuffixOf(e){var i=e%10,r=e%100;return 1==i&&11!=r?e+"st":2==i&&12!=r?e+"nd":3==i&&13!=r?e+"rd":e+"th"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),vm=(()=>{class t{constructor(){}initializeShop(){}initializeResource(e,i,r){return new _e(e,i,r)}initializeTraining(e){var i=new fs;return e===Ee.ShortTrackRunning&&(i.trainingName="Short Track Running",i.isAvailable=!0,i.facilitySize=Qe.Small,i.timeToComplete=30,i.trainingType=Ee.ShortTrackRunning,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(1,0,0,0,0,0)),e===Ee.Sprints&&(i.trainingName="Sprints",i.isAvailable=!0,i.facilitySize=Qe.Small,i.timeToComplete=20,i.trainingType=Ee.Sprints,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,1,0,0,0,0)),e===Ee.TrailRunning&&(i.trainingName="Trail Running",i.isAvailable=!0,i.facilitySize=Qe.Small,i.timeToComplete=45,i.trainingType=Ee.TrailRunning,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(.5,0,1,0,0,0)),e===Ee.MoveLogs&&(i.trainingName="Move Logs",i.isAvailable=!1,i.facilitySize=Qe.Small,i.timeToComplete=30,i.trainingType=Ee.MoveLogs,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,0,0,1,0,0)),e===Ee.Footwork&&(i.trainingName="Footwork",i.isAvailable=!1,i.facilitySize=Qe.Small,i.timeToComplete=45,i.trainingType=Ee.Footwork,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,.5,0,0,0,1)),e===Ee.PracticeCommands&&(i.trainingName="Practice Commands",i.isAvailable=!1,i.facilitySize=Qe.Small,i.timeToComplete=40,i.trainingType=Ee.PracticeCommands,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,0,0,0,1,.25)),e===Ee.ScentTraining&&(i.trainingName="Scent Training",i.isAvailable=!1,i.facilitySize=Qe.Small,i.timeToComplete=45,i.trainingType=Ee.ScentTraining,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,0,.5,0,1,0)),e===Ee.SmallWagonTow&&(i.trainingName="Small Wagon Tow",i.isAvailable=!1,i.facilitySize=Qe.Small,i.timeToComplete=45,i.trainingType=Ee.SmallWagonTow,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(.25,0,0,1.5,0,0)),e===Ee.Sidestep&&(i.trainingName="Sidestep",i.isAvailable=!1,i.facilitySize=Qe.Small,i.timeToComplete=35,i.trainingType=Ee.Sidestep,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,2,0,0,0,0)),e===Ee.MediumTrackRunning&&(i.trainingName="Medium Track Running",i.isAvailable=!1,i.facilitySize=Qe.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Ee.MediumTrackRunning,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(2,0,1,0,0,0)),e===Ee.UphillRun&&(i.trainingName="Uphill Run",i.isAvailable=!1,i.facilitySize=Qe.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Ee.UphillRun,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,1,2,0,0,0)),e===Ee.Puzzles&&(i.trainingName="Puzzles",i.isAvailable=!1,i.facilitySize=Qe.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Ee.Puzzles,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,0,0,0,2,1)),e===Ee.MoveRocks&&(i.trainingName="Move Rocks",i.isAvailable=!1,i.facilitySize=Qe.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Ee.MoveRocks,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,1,0,2,0,0)),e===Ee.DodgeBall&&(i.trainingName="Dodge Ball",i.isAvailable=!1,i.facilitySize=Qe.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Ee.DodgeBall,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,2.5,0,0,0,.5)),e===Ee.LateralVerticalDrill&&(i.trainingName="Lateral Vertical Drill",i.isAvailable=!1,i.facilitySize=Qe.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Ee.LateralVerticalDrill,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(1.5,0,0,0,2,0)),e===Ee.BurstPractice&&(i.trainingName="Burst Practice",i.isAvailable=!1,i.facilitySize=Qe.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Ee.BurstPractice,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,0,0,1.5,1.5,1.5)),e===Ee.Acrobatics&&(i.trainingName="Acrobatics",i.isAvailable=!1,i.facilitySize=Qe.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Ee.Acrobatics,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(.5,0,.5,3,0,0)),e===Ee.LongTrackRunning&&(i.trainingName="Long Track Running",i.isAvailable=!1,i.facilitySize=Qe.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ee.LongTrackRunning,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(5,0,0,0,2,0)),e===Ee.VehicleTow&&(i.trainingName="Vehicle Tow",i.isAvailable=!1,i.facilitySize=Qe.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ee.VehicleTow,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,0,2,5,0,0)),e===Ee.LogJump&&(i.trainingName="Log Jump",i.isAvailable=!1,i.facilitySize=Qe.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ee.LogJump,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(1,1,0,0,0,5)),e===Ee.Meditation&&(i.trainingName="Meditation",i.isAvailable=!1,i.facilitySize=Qe.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ee.Meditation,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,0,0,2,5,0)),e===Ee.WindSprints&&(i.trainingName="Wind Sprints",i.isAvailable=!1,i.facilitySize=Qe.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ee.WindSprints,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(2,5,0,0,0,0)),e===Ee.GreenwayHike&&(i.trainingName="Greenway Hike",i.isAvailable=!1,i.facilitySize=Qe.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Ee.GreenwayHike,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,0,5,0,0,2)),e===Ee.Marathon&&(i.trainingName="Marathon",i.isAvailable=!1,i.facilitySize=Qe.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=Ee.Marathon,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(0,2,3,0,3,0)),e===Ee.AgilityCourse&&(i.trainingName="Agility Course",i.isAvailable=!1,i.facilitySize=Qe.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=Ee.AgilityCourse,i.trainingCourseType=$.Flatland,i.statGain=1,i.affectedStatRatios=new Fe(3,0,0,2,0,3)),i}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var kt=(()=>{return(t=kt||(kt={}))[t.Track=0]="Track",t[t.Free=1]="Free",t[t.Mono=2]="Mono",t[t.Duo=3]="Duo",t[t.Rainbow=4]="Rainbow",kt;var t})(),rt=(()=>{return(t=rt||(rt={}))[t.none=0]="none",t[t.headband=1]="headband",t[t.redBaton=2]="redBaton",t[t.blueBaton=3]="blueBaton",t[t.violetBaton=4]="violetBaton",t[t.orangeBaton=5]="orangeBaton",t[t.greenBaton=6]="greenBaton",t[t.yellowBaton=7]="yellowBaton",t[t.quickSnack=8]="quickSnack",t[t.blinders=9]="blinders",t[t.pendant=10]="pendant",t[t.carrotOnAStick=11]="carrotOnAStick",rt;var t})();const _m={name:"white",properties:{"--foreground-default":"#000000","--foreground-secondary":"#1B1B1B","--foreground-tertiary":"#262626","--foreground-quaternary":"#2F2F2F","--foreground-light":"#000000","--background-default":"#FCFCFC","--background-secondary":"#FFFFFF","--background-tertiary":"#C4C4C4","--background-quarternary":"#ACAFB4","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},bm={name:"light",properties:{"--foreground-default":"#08090A","--foreground-secondary":"#41474D","--foreground-tertiary":"#797C80","--foreground-quaternary":"#F4FAFF","--foreground-light":"#41474D","--background-default":"#F4FAFF","--background-secondary":"#A3B9CC","--background-tertiary":"#5C7D99","--background-quarternary":"#65799E","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1a83b0","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},ym={name:"twilight",properties:{"--foreground-default":"#ED8B42","--foreground-secondary":"#D65A00","--foreground-tertiary":"#FF8023","--foreground-quaternary":"#FFAA20","--foreground-light":"#FF8F3D","--background-default":"#5D0274","--background-secondary":"#210129","--background-tertiary":"#14001A","--background-quarternary":"#4F223C","--background-light":"#72028D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},Hc={name:"night",properties:{"--foreground-default":"#A3B9CC","--foreground-secondary":"#5C7D99","--foreground-tertiary":"#F4FAFF","--foreground-quaternary":"#E5E5E5","--foreground-light":"#FFFFFF","--background-default":"#797C80","--background-secondary":"#41474D","--background-tertiary":"#08090A","--background-quarternary":"##2A2C31","--background-light":"#41474D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--waterColor":"#7463f7","--waterSubcolor":"#5044ab","--tundraColor":"#1ca1c9","--background-tertiary-shadow":"0 1px 3px 0 rgba(8, 9, 10, 0.5)"}};let al=(()=>{class t{constructor(){this.active=Hc,this.availableThemes=[_m,bm,ym,Hc]}getAvailableThemes(){return this.availableThemes}getActiveTheme(){return this.active}getActiveThemeName(){return this.active===Hc?"night":this.active===bm?"light":this.active===_m?"white":this.active===ym?"twilight":""}setNightTheme(){return this.setActiveTheme(Hc)}setLightTheme(){return this.setActiveTheme(bm)}setTwilightTheme(){return this.setActiveTheme(ym)}setWhiteTheme(){return this.setActiveTheme(_m)}setActiveTheme(e){return this.active=e,Object.keys(this.active.properties).forEach(i=>{document.documentElement.style.setProperty(i,this.active.properties[i])}),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ir=(()=>{return(t=Ir||(Ir={}))[t.draw=0]="draw",t[t.text=1]="text",t[t.both=2]="both",Ir;var t})(),Fn=(()=>{return(t=Fn||(Fn={}))[t.practice=0]="practice",t[t.novice=1]="novice",t[t.intermediate=2]="intermediate",t[t.master=3]="master",Fn;var t})();let bt=(()=>{class t{constructor(e,i,r){this.utilityService=e,this.initializeService=i,this.themeService=r,this.globalVar=new Kn}initializeGlobalVariables(){this.globalVar.animals=[],this.globalVar.trainingOptions=[],this.globalVar.circuitRaces=[],this.globalVar.localRaces=[],this.globalVar.resources=[],this.globalVar.modifiers=[],this.globalVar.animalDecks=[],this.globalVar.barns=[],this.globalVar.redeemedCodes=[],this.globalVar.settings=new pm,this.globalVar.unlockables=new mm,this.globalVar.incubator=new Uc,this.globalVar.trackedStats=new gm,this.globalVar.orbStats=new cm,this.globalVar.tutorials=new fm,this.globalVar.eventRaceData=new dm,this.globalVar.userIsRacing=!1,this.globalVar.nationalRaceCountdown=0,this.globalVar.autoFreeRaceCounter=0,this.globalVar.freeRaceCounter=0,this.globalVar.freeRaceTimePeriodCounter=0,this.globalVar.lastTimeStamp=Date.now(),this.globalVar.currentVersion=1,this.globalVar.startingVersion=1,this.globalVar.startDate=new Date,this.InitializeModifiers(),this.InitializeAnimals(),this.InitializeAnimalDecks(),this.InitializeGlobalTrainingOptions(),this.InitializeShop(),this.InitializeBarns(),this.globalVar.circuitRank="Z",this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),this.checkCircuitRankRewards(),this.globalVar.monoRank="Z",this.globalVar.duoRank="Z",this.globalVar.rainbowRank="Z",this.GenerateLocalRaces(),this.InitializeResources(),this.InitializeSettings(),this.InitializeUnlockables()}InitializeModifiers(){this.globalVar.modifiers.push(new ue(.2,"staminaModifier")),this.globalVar.modifiers.push(new ue(.9,"exhaustionStatLossModifier")),this.globalVar.modifiers.push(new ue(5,"trainingBreedGaugeIncrease")),this.globalVar.modifiers.push(new ue(10,"circuitBreedGaugeIncrease")),this.globalVar.modifiers.push(new ue(1,"localBreedGaugeIncrease")),this.globalVar.modifiers.push(new ue(.5,"trainingTrackPaceModifier")),this.globalVar.modifiers.push(new ue(.02,"breedLevelStatModifier")),this.globalVar.modifiers.push(new ue(5,"breedGaugeMaxIncreaseModifier")),this.globalVar.modifiers.push(new ue(.001,"incubatorUpgradeIncreaseModifier")),this.globalVar.modifiers.push(new ue(5,"facilityLevelModifier")),this.globalVar.modifiers.push(new ue(.02,"animalHandlerModifier")),this.globalVar.modifiers.push(new ue(.01,"stopwatchModifier")),this.globalVar.modifiers.push(new ue(.1,"racerMapsModifier")),this.globalVar.modifiers.push(new ue(25,"nationalRacesToMedalModifier")),this.globalVar.modifiers.push(new ue(10,"internationalRacesToMedalModifier")),this.globalVar.modifiers.push(new ue(.75,"moneyMarkPaceModifier")),this.globalVar.modifiers.push(new ue(1.25,"moneyMarkRewardModifier")),this.globalVar.modifiers.push(new ue(.05,"breedingGroundsSpecializationModifier")),this.globalVar.modifiers.push(new ue(300,"attractionTimeToCollectModifier")),this.globalVar.modifiers.push(new ue(10,"attractionAmountModifier")),this.globalVar.modifiers.push(new ue(.05,"researchCenterIncrementsModifier")),this.globalVar.modifiers.push(new ue(.45,"researchCenterTrainingAnimalModifier")),this.globalVar.modifiers.push(new ue(.25,"researchCenterStudyingAnimalModifier")),this.globalVar.modifiers.push(new ue(.75,"researchCenterMaxStatGainModifier")),this.globalVar.modifiers.push(new ue(3,"headbandEquipmentModifier")),this.globalVar.modifiers.push(new ue(1,"quickSnackEquipmentModifier")),this.globalVar.modifiers.push(new ue(.5,"blindersEquipmentModifier")),this.globalVar.modifiers.push(new ue(.9,"pendantEquipmentModifier")),this.globalVar.modifiers.push(new ue(1.1,"redBatonEquipmentModifier")),this.globalVar.modifiers.push(new ue(1.1,"blueBatonEquipmentModifier")),this.globalVar.modifiers.push(new ue(1.1,"orangeBatonEquipmentModifier")),this.globalVar.modifiers.push(new ue(1.1,"greenBatonEquipmentModifier")),this.globalVar.modifiers.push(new ue(1.1,"yellowBatonEquipmentModifier")),this.globalVar.modifiers.push(new ue(1.1,"violetBatonEquipmentModifier")),this.globalVar.modifiers.push(new ue(7200,"smallBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new ue(14400,"mediumBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new ue(28800,"largeBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new ue(5,"freeRacesPerTimePeriodModifier")),this.globalVar.modifiers.push(new ue(300,"freeRacesTimePeriodModifier")),this.globalVar.modifiers.push(new ue(3600,"autoFreeRacesMaxIdleTimePeriodModifier")),this.globalVar.modifiers.push(new ue(25,"abilityLevelCapModifier")),this.globalVar.modifiers.push(new ue(1.5,"feedingFrenzyPositiveModifier")),this.globalVar.modifiers.push(new ue(.9,"feedingFrenzyNegativeModifier")),this.globalVar.modifiers.push(new ue(20,"maxDriftAmountModifier")),this.globalVar.modifiers.push(new ue(4,"relayAbilityXpGainModifier")),this.globalVar.modifiers.push(new ue(25,"maximumTraitNegativePercentModifier"));var e=.3,i=.1,l=1.025,c=1.05,d=.975,h=.95;this.globalVar.modifiers.push(new ue(e*l,"horseDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i,"horseDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5.5,"horseDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1,"horseDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5*h,"horseDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5,"horseDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(e*c,"cheetahDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(1.1*i,"cheetahDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(4.5,"cheetahDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1,"cheetahDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5,"cheetahDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5*d,"cheetahDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5*h,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(e,"monkeyDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i*h,"monkeyDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5,"monkeyDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1.1,"monkeyDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5*c,"monkeyDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5,"monkeyDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(e,"goatDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i*l,"goatDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5*l,"goatDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1*d,"goatDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5*d,"goatDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5.5,"goatDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(e*h,"geckoDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i,"geckoDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5*c,"geckoDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1,"geckoDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5.5,"geckoDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5,"geckoDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(e*d,"dolphinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i*l,"dolphinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5,"dolphinDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1.1,"dolphinDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5,"dolphinDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5*d,"dolphinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(.33,"sharkDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i,"sharkDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5*d,"sharkDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1*l,"sharkDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5*h,"sharkDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5*h,"sharkDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(e*d,"octopusDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i*h,"octopusDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5,"octopusDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1.1,"octopusDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5*l,"octopusDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5,"octopusDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(e*h,"penguinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i,"penguinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5,"penguinDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1*l,"penguinDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5,"penguinDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5*c,"penguinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(e*d,"caribouDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i*h,"caribouDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5.5,"caribouDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1*l,"caribouDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5*c,"caribouDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5,"caribouDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(e,"salamanderDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i*l,"salamanderDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5*h,"salamanderDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1,"salamanderDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(5*c,"salamanderDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5,"salamanderDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new ue(e*c,"foxDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new ue(i,"foxDefaultAccelerationModifier")),this.globalVar.modifiers.push(new ue(5*d,"foxDefaultStaminaModifier")),this.globalVar.modifiers.push(new ue(1*l,"foxDefaultPowerModifier")),this.globalVar.modifiers.push(new ue(4.5,"foxDefaultFocusModifier")),this.globalVar.modifiers.push(new ue(5*c,"foxDefaultAdaptabilityModifier"))}InitializeAnimals(){var e=new mB;e.name="Horse",e.isAvailable=!0,this.calculateAnimalRacingStats(e);var i=new bB;i.name="Monkey",this.calculateAnimalRacingStats(i);var r=new _B;r.name="Hare",this.calculateAnimalRacingStats(r);var a=new vB;a.name="Cheetah",this.calculateAnimalRacingStats(a);var s=new yB;s.name="Goat",this.calculateAnimalRacingStats(s);var o=new CB;o.name="Gecko",this.calculateAnimalRacingStats(o);var l=new wB;l.name="Dolphin",this.calculateAnimalRacingStats(l);var c=new SB;c.name="Shark",this.calculateAnimalRacingStats(c);var u=new TB;u.name="Octopus",this.calculateAnimalRacingStats(u);var d=new DB;d.name="Penguin",this.calculateAnimalRacingStats(d);var h=new MB;h.name="Caribou",this.calculateAnimalRacingStats(h);var f=new xB;f.name="Salamander",this.calculateAnimalRacingStats(f);var v=new RB;v.name="Fox",this.calculateAnimalRacingStats(v),this.globalVar.animals.push(e),this.globalVar.animals.push(a),this.globalVar.animals.push(r),this.globalVar.animals.push(s),this.globalVar.animals.push(i),this.globalVar.animals.push(o),this.globalVar.animals.push(l),this.globalVar.animals.push(c),this.globalVar.animals.push(u),this.globalVar.animals.push(d),this.globalVar.animals.push(h),this.globalVar.animals.push(f),this.globalVar.animals.push(v)}InitializeAnimalDecks(){var e=new _h;e.isPrimaryDeck=!0,e.isAvailable=!0,e.name="Animal Deck 1",e.deckNumber=1;var i=this.globalVar.animals.find(s=>"Horse"===s.getAnimalType());void 0!==i&&e.selectedAnimals.push(i),this.globalVar.animalDecks.push(e);for(var r=0;r<3;r++){var a=new _h;a.isAvailable=!0,a.deckNumber=r+2,a.name="Animal Deck "+a.deckNumber,this.globalVar.animalDecks.push(a)}}InitializeShop(){this.globalVar.shop=[];var e=new ps,i=[],u=new Tt;u.name="Cheetah",u.shortDescription="The Cheetah is a Flatland racing animal that prioritizes quickness over stamina.",u.purchasePrice.push(new _e("Coins",1e3)),u.canHaveMultiples=!1,u.type=se.Animal,i.push(u);var d=new Tt;d.name="Hare",d.shortDescription="The Hare is a Flatland racing animal with various ways to increase acceleration and focus.",d.purchasePrice.push(new _e("Coins",1e3)),d.canHaveMultiples=!1,d.type=se.Animal,i.push(d);var h=new Tt;h.name="Goat",h.shortDescription="The Goat is a Mountain climbing animal that can nimbly travel terrain and increase stamina.",h.purchasePrice.push(new _e("Coins",2500)),h.canHaveMultiples=!1,h.type=se.Animal,h.isAvailable=!1,i.push(h);var f=new Tt;f.name="Gecko",f.shortDescription="The Gecko is a Mountain climbing animal that can increase speed based on focus and can increase other racers' velocity.",f.purchasePrice.push(new _e("Coins",2500)),f.canHaveMultiples=!1,f.type=se.Animal,f.isAvailable=!1,i.push(f);var v=new Tt;v.name="Shark",v.shortDescription="The Shark is an Ocean swimming animal that can slow competitors and increase its own stats at the cost of your other racers.",v.purchasePrice.push(new _e("Coins",5e3)),v.canHaveMultiples=!1,v.type=se.Animal,v.isAvailable=!1,i.push(v);var _=new Tt;_.name="Octopus",_.shortDescription="The Octopus is an Ocean swimming animal that can increase your coin rewards from races and increase power of other racers.",_.purchasePrice.push(new _e("Coins",5e3)),_.canHaveMultiples=!1,_.type=se.Animal,_.isAvailable=!1,i.push(_);var D=new Tt;D.name="Caribou",D.shortDescription="The Caribou is a Tundra racing animal that boosts other racers based on stamina.",D.purchasePrice.push(new _e("Coins",1e4)),D.canHaveMultiples=!1,D.type=se.Animal,D.isAvailable=!1,i.push(D);var w=new Tt;w.name="Fox",w.shortDescription="The Fox is a Volcanic racing animal that can increase stats at random.",w.purchasePrice.push(new _e("Coins",1e4)),w.canHaveMultiples=!1,w.type=se.Animal,w.isAvailable=!1,i.push(w),e.name="Animals",e.itemList=i,this.globalVar.shop.push(e);var y=new ps,P=[],U=50,Q=new Tt;Q.name="Apples",Q.shortDescription="+1 Acceleration to a single animal",Q.purchasePrice.push(new _e("Coins",U)),Q.canHaveMultiples=!0,Q.type=se.Food,Q.infiniteAmount=!0,P.push(Q);var J=new Tt;J.name="Bananas",J.shortDescription="+1 Speed to a single animal",J.purchasePrice.push(new _e("Coins",U)),J.canHaveMultiples=!0,J.type=se.Food,J.infiniteAmount=!0,P.push(J);var ge=new Tt;ge.name="Strawberries",ge.shortDescription="+1 Endurance to a single animal",ge.purchasePrice.push(new _e("Coins",U)),ge.canHaveMultiples=!0,ge.type=se.Food,ge.infiniteAmount=!0,P.push(ge);var W=new Tt;W.name="Carrots",W.shortDescription="+1 Power to a single animal",W.purchasePrice.push(new _e("Coins",U)),W.canHaveMultiples=!0,W.type=se.Food,W.infiniteAmount=!0,P.push(W);var S=new Tt;S.name="Turnips",S.shortDescription="+1 Focus to a single animal",S.purchasePrice.push(new _e("Coins",U)),S.canHaveMultiples=!0,S.type=se.Food,S.infiniteAmount=!0,P.push(S);var Me=new Tt;Me.name="Oranges",Me.shortDescription="+1 Adaptability to a single animal",Me.purchasePrice.push(new _e("Coins",U)),Me.canHaveMultiples=!0,Me.type=se.Food,Me.infiniteAmount=!0,P.push(Me);var Ne=new Tt;Ne.name="Mangoes",Ne.shortDescription="+1 Breed Level to a single animal",Ne.purchasePrice.push(new _e("Coins",500)),Ne.canHaveMultiples=!0,Ne.type=se.Food,Ne.infiniteAmount=!0,P.push(Ne),y.name="Food",y.itemList=P,this.globalVar.shop.push(y);var Ge=new ps,ze=[];this.globalVar.trainingOptions.filter(Gt=>!Gt.isAvailable).forEach(Gt=>{var bn=new Tt;bn.name=Gt.trainingName,bn.shortDescription=Gt.getStatGainDescription(),bn.purchasePrice.push(new _e("Coins",Gt.purchasePrice)),bn.canHaveMultiples=!1,bn.type=se.Training,(Gt.facilitySize===Qe.Medium||Gt.facilitySize===Qe.Large)&&(bn.isAvailable=!1,bn.additionalIdentifier=Gt.facilitySize.toString()),ze.push(bn)}),Ge.name="Trainings",Ge.itemList=ze,this.globalVar.shop.push(Ge);var lt=new ps,ct=[];this.globalVar.animals.forEach(Gt=>{Gt.availableAbilities.forEach(bn=>{if(!bn.isAbilityPurchased){var mi=new Tt;mi.name=Gt.getAnimalType()+" Ability: "+bn.name,mi.purchasePrice.push(new _e("Coins",bn.purchasePrice)),mi.canHaveMultiples=!1,mi.type=se.Ability,mi.additionalIdentifier=bn.name,mi.isAvailable=Gt.isAvailable,ct.push(mi)}})}),lt.name="Abilities",lt.itemList=ct,this.globalVar.shop.push(lt);var $t=new ps,$e=[],Vt=new Tt;Vt.name="Stopwatch",Vt.purchasePrice.push(this.getMedalResourceValue(10)),Vt.basePurchasePrice.push(this.getMedalResourceValue(10)),Vt.quantityMultiplier=2.5,Vt.totalShopQuantity=2,Vt.canHaveMultiples=!0,Vt.type=se.Specialty,$e.push(Vt);var Tn=new Tt;Tn.name="Animal Handler",Tn.purchasePrice.push(this.getCoinsResourceValue(2e3)),Tn.basePurchasePrice.push(this.getCoinsResourceValue(2e3)),Tn.quantityAdditive=2e3,Tn.totalShopQuantity=20,Tn.canHaveMultiples=!0,Tn.type=se.Specialty,$e.push(Tn);var an=new Tt;an.name="Course Maps",an.purchasePrice.push(this.getMedalResourceValue(2)),an.basePurchasePrice.push(this.getMedalResourceValue(2)),an.quantityMultiplier=2,an.totalShopQuantity=5,an.canHaveMultiples=!0,an.type=se.Specialty,$e.push(an);var Bn=new Tt;Bn.name="Stockbreeder",Bn.purchasePrice.push(this.getCoinsResourceValue(500)),Bn.basePurchasePrice.push(this.getCoinsResourceValue(500)),Bn.canHaveMultiples=!1,Bn.type=se.Specialty,$e.push(Bn);var Dn=new Tt;Dn.name="Team Manager",Dn.purchasePrice.push(this.getMedalResourceValue(3)),Dn.basePurchasePrice.push(this.getMedalResourceValue(3)),Dn.canHaveMultiples=!0,Dn.quantityMultiplier=2,Dn.totalShopQuantity=20,Dn.type=se.Specialty,$e.push(Dn);var Wt=new Tt;Wt.name="Scouts",Wt.purchasePrice.push(this.getCoinsResourceValue(1e4)),Wt.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),Wt.canHaveMultiples=!1,Wt.type=se.Specialty,$e.push(Wt);var Ht=new Tt;Ht.name="Money Mark",Ht.purchasePrice.push(this.getCoinsResourceValue(500)),Ht.basePurchasePrice.push(this.getCoinsResourceValue(500)),Ht.canHaveMultiples=!1,Ht.type=se.Specialty,$e.push(Ht);var gt=new Tt;gt.name="National Races",gt.purchasePrice.push(this.getCoinsResourceValue(1e4)),gt.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),gt.canHaveMultiples=!1,gt.type=se.Specialty,$e.push(gt);var We,Xt=new Tt;Xt.name="International Races",Xt.purchasePrice.push(this.getCoinsResourceValue(5e4)),Xt.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),Xt.canHaveMultiples=!1,Xt.isAvailable=!1,Xt.type=se.Specialty,$e.push(Xt),(We=new Tt).name="Incubator Upgrade Lv1",We.purchasePrice.push(this.getCoinsResourceValue(5e3)),We.basePurchasePrice.push(this.getCoinsResourceValue(5e3)),We.canHaveMultiples=!1,We.isAvailable=!1,We.type=se.Specialty,$e.push(We),(We=new Tt).name="Incubator Upgrade Lv2",We.purchasePrice.push(this.getCoinsResourceValue(1e4)),We.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),We.canHaveMultiples=!1,We.isAvailable=!1,We.type=se.Specialty,$e.push(We),(We=new Tt).name="Incubator Upgrade Lv3",We.purchasePrice.push(this.getCoinsResourceValue(25e3)),We.basePurchasePrice.push(this.getCoinsResourceValue(25e3)),We.canHaveMultiples=!1,We.isAvailable=!1,We.type=se.Specialty,$e.push(We),(We=new Tt).name="Incubator Upgrade Lv4",We.purchasePrice.push(this.getCoinsResourceValue(5e4)),We.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),We.canHaveMultiples=!1,We.isAvailable=!1,We.type=se.Specialty,$e.push(We),$t.name="Specialty",$t.itemList=$e,this.globalVar.shop.push($t);var Gn=new ps,_n=[],ri=new Tt;ri.name=this.getEquipmentName(rt.headband),ri.shortDescription=this.getEquipmentDescription(ri.name),ri.purchasePrice.push(this.getCoinsResourceValue(1e3)),ri.canHaveMultiples=!0,ri.infiniteAmount=!0,ri.type=se.Equipment,_n.push(ri);var Pn=new Tt;Pn.name=this.getEquipmentName(rt.pendant),Pn.shortDescription=this.getEquipmentDescription(Pn.name),Pn.purchasePrice.push(this.getCoinsResourceValue(1e3)),Pn.canHaveMultiples=!0,Pn.infiniteAmount=!0,Pn.type=se.Equipment,_n.push(Pn);var pi=new Tt;pi.name=this.getEquipmentName(rt.blinders),pi.shortDescription=this.getEquipmentDescription(pi.name),pi.purchasePrice.push(this.getCoinsResourceValue(1e3)),pi.canHaveMultiples=!0,pi.infiniteAmount=!0,pi.type=se.Equipment,_n.push(pi);var Jn=new Tt;Jn.name=this.getEquipmentName(rt.quickSnack),Jn.shortDescription=this.getEquipmentDescription(Jn.name),Jn.purchasePrice.push(this.getCoinsResourceValue(1e3)),Jn.canHaveMultiples=!0,Jn.infiniteAmount=!0,Jn.type=se.Equipment,_n.push(Jn);var jn=new Tt;jn.name=this.getEquipmentName(rt.redBaton),jn.shortDescription=this.getEquipmentDescription(jn.name),jn.purchasePrice.push(this.getCoinsResourceValue(2500)),jn.canHaveMultiples=!0,jn.infiniteAmount=!0,jn.type=se.Equipment,_n.push(jn);var Di=new Tt;Di.name=this.getEquipmentName(rt.blueBaton),Di.shortDescription=this.getEquipmentDescription(Di.name),Di.purchasePrice.push(this.getCoinsResourceValue(2500)),Di.canHaveMultiples=!0,Di.infiniteAmount=!0,Di.type=se.Equipment,_n.push(Di);var gi=new Tt;gi.name=this.getEquipmentName(rt.violetBaton),gi.shortDescription=this.getEquipmentDescription(gi.name),gi.purchasePrice.push(this.getCoinsResourceValue(2500)),gi.canHaveMultiples=!0,gi.infiniteAmount=!0,gi.type=se.Equipment,_n.push(gi);var zn=new Tt;zn.name=this.getEquipmentName(rt.orangeBaton),zn.shortDescription=this.getEquipmentDescription(zn.name),zn.purchasePrice.push(this.getCoinsResourceValue(2500)),zn.canHaveMultiples=!0,zn.infiniteAmount=!0,zn.type=se.Equipment,_n.push(zn);var dn=new Tt;dn.name=this.getEquipmentName(rt.greenBaton),dn.shortDescription=this.getEquipmentDescription(dn.name),dn.purchasePrice.push(this.getCoinsResourceValue(2500)),dn.canHaveMultiples=!0,dn.infiniteAmount=!0,dn.type=se.Equipment,_n.push(dn);var Xe=new Tt;Xe.name=this.getEquipmentName(rt.yellowBaton),Xe.shortDescription=this.getEquipmentDescription(Xe.name),Xe.purchasePrice.push(this.getCoinsResourceValue(2500)),Xe.canHaveMultiples=!0,Xe.infiniteAmount=!0,Xe.type=se.Equipment,_n.push(Xe),Gn.name="Equipment",Gn.itemList=_n,this.globalVar.shop.push(Gn)}getEquipmentName(e){return e===rt.headband?"Headband":e===rt.pendant?"Pendant":e===rt.blinders?"Blinders":e===rt.quickSnack?"Quick Snack":e===rt.carrotOnAStick?"Carrot on a Stick":e===rt.redBaton?"Red Baton":e===rt.blueBaton?"Blue Baton":e===rt.violetBaton?"Violet Baton":e===rt.yellowBaton?"Yellow Baton":e===rt.greenBaton?"Green Baton":e===rt.orangeBaton?"Orange Baton":""}getEquipmentEnum(e){return"Headband"===e?rt.headband:"Pendant"===e?rt.pendant:"Blinders"===e?rt.blinders:"Quick Snack"===e?rt.quickSnack:"Carrot on a Stick"===e?rt.carrotOnAStick:"Red Baton"===e?rt.redBaton:"Blue Baton"===e?rt.blueBaton:"Violet Baton"===e?rt.violetBaton:"Yellow Baton"===e?rt.yellowBaton:"Green Baton"===e?rt.greenBaton:"Orange Baton"===e?rt.orangeBaton:rt.none}InitializeBarns(){if(null==this.globalVar.barns||0===this.globalVar.barns.length){this.globalVar.barns=[];var i=new um;if(i.barnNumber=1,i.isLocked=!1,i.size=Qe.Small,i.purchasePrice=0,i.facilityUpgradePrice=500,i.upgradePrice=500,null!=this.globalVar.animals&&this.globalVar.animals.length>0){var r=this.globalVar.animals.find(o=>o.type===q.Horse);null!=r&&(r.associatedBarnNumber=i.barnNumber)}else console.log("Can't find horse"),alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.globalVar.barns.push(i);for(var a=2;a<=15;a++){var s=new um;s.barnNumber=a,s.isLocked=!0,s.purchasePrice=500*(a-1),s.facilityUpgradePrice=500,s.size=Qe.Small,this.globalVar.barns.push(s)}}}InitializeGlobalTrainingOptions(){this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.ShortTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.Sprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.TrailRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.MoveLogs)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.Footwork)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.PracticeCommands)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.ScentTraining)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.SmallWagonTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.Sidestep)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.MediumTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.UphillRun)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.Puzzles)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.MoveRocks)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.LateralVerticalDrill)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.DodgeBall)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.BurstPractice)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.Acrobatics)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.LongTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.VehicleTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.LogJump)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.Meditation)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.WindSprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.GreenwayHike)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.Marathon)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Ee.AgilityCourse))}IncreaseCircuitRank(){var i=this.globalVar.circuitRank.replace(/([A-Z])[^A-Z]*$/,function(a){var s=a.charCodeAt(0);return 65===s?String.fromCharCode(s)+"Z":String.fromCharCode(--s)});this.globalVar.circuitRank=i;var r=this.checkCircuitRankRewards();return this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),r}IncreaseLocalRaceRank(e){var i="";e===kt.Mono&&(i=this.globalVar.monoRank),e===kt.Duo&&(i=this.globalVar.duoRank),e===kt.Rainbow&&(i=this.globalVar.rainbowRank);var r=i.replace(/([A-Z])[^A-Z]*$/,function(a){var s=a.charCodeAt(0);return 65===s?String.fromCharCode(s)+"Z":String.fromCharCode(--s)});e===kt.Mono&&(this.globalVar.monoRank=r,this.GenerateMonoRaces(this.globalVar.monoRank)),e===kt.Duo&&(this.globalVar.duoRank=r,this.GenerateDuoRaces(this.globalVar.duoRank)),e===kt.Rainbow&&(this.globalVar.rainbowRank=r,this.GenerateRainbowRaces(this.globalVar.rainbowRank))}getRewardReceiveText(e){return this.globalVar.settings.get("useNumbersForCircuitRank")?"Reach circuit rank "+e+" to receive: \n":"Reach circuit rank "+this.utilityService.getCircuitRankFromNumericValue(e)+" to receive: \n"}checkCircuitRankRewards(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=["",""];if(1===e&&(this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(2)+"Mono Races"),2===e&&(this.globalVar.unlockables.set("monoRace",!0),i=["Mono Race","A new race type has been unlocked! Take part in a Mono Race where you run an extended race as only one course type. Progressing through this race type generates new interest in your facility, giving you a good reason to make upgrades. Gain Facility Level points that increase your diminishing returns max value."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(3)+"Monkey"),3===e){var r=this.globalVar.animals.find(P=>P.type===q.Monkey);if(null!=r&&(r.isAvailable=!0,this.unlockAnimalAbilities(r),this.unlockOtherRaceCourseTypeAnimals(r.raceCourseType),null!=(a=this.globalVar.animalDecks.find(P=>P.isPrimaryDeck)))){var s=!1;a.selectedAnimals.forEach(P=>{P.raceCourseType===(null==r?void 0:r.raceCourseType)&&(s=!0)}),s||a.selectedAnimals.push(r)}i=["Monkey","The Monkey is a powerful Mountain climbing animal capable of slowing its competitors and leaping to victory."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+"Coaching"}else if(4===e){this.globalVar.unlockables.set("coaching",!0),i=["Coaching","Take charge of your animal's training by giving them some coaching yourself. Visit a barn with an animal assigned and select 'Coach' to get started."];var o=500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+o+" Coins"}else if(5===e)o=500,null==(l=this.globalVar.resources.find(U=>"Coins"===U.name))?this.globalVar.resources.push(new _e("Coins",o)):l.amount+=o,i=[o+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(7)+"Barn Specializations";else if(7===e)this.globalVar.unlockables.set("barnSpecializations",!0),i=["Barn Specializations","As your training facility grows, so should your barns. At barn level 10, choose what direction you want your barn to progress in. Each option benefits your animals in different ways, so choose carefully."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(8)+"Headband";else if(8===e)o=1,null==(l=this.globalVar.resources.find(Q=>"1 Headband"===Q.name))?this.globalVar.resources.push(new _e("Headband",o,se.Equipment)):l.amount+=o,i=[o+" Headband","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Dolphin";else if(10===e){var c=this.globalVar.animals.find(U=>U.type===q.Dolphin);null!=c&&(c.isAvailable=!0,this.unlockAnimalAbilities(c),this.unlockOtherRaceCourseTypeAnimals(c.raceCourseType),null!=(a=this.globalVar.animalDecks.find(Q=>Q.isPrimaryDeck))&&(s=!1,a.selectedAnimals.forEach(J=>{J.raceCourseType===(null==c?void 0:c.raceCourseType)&&(s=!0)}),s||a.selectedAnimals.push(c))),i=["Dolphin","The Dolphin is a graceful Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay."],o=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(12)+o+" Stat Increasing Food"}else if(12===e)this.increaseAllFood(o=10),i=[o+" Stat Increasing Food",o+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(13)+"Grand Prix";else if(13===e){this.globalVar.unlockables.set("grandPrix",!0),i=["Grand Prix","Now that you've climbed the ranks and your racing team has turned some heads, you've received an invite to the Grand Prix invitational. Twice per week, a marathon style race runs over multiple days. Check the 'Event Races' tab to see more info."];var u=1;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(15)+"Attraction Specialization"}else if(15===e)this.globalVar.unlockables.set("attractionSpecialization",!0),i=["Attraction Specialization",this.getSpecializationDescription("Attraction")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(16)+" 1 Pendant";else if(16===e)o=1,null==(l=this.globalVar.resources.find(Q=>"Pendant"===Q.name))?this.globalVar.resources.push(new _e("Pendant",o,se.Equipment)):l.amount+=o,i=[o+" Pendant","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(18)+"Barn Row 2";else if(18===e)this.globalVar.unlockables.set("barnRow2",!0),i=["Barn Row 2",""],u=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+u+" Renown";else if(20===e)u=1,null==(d=this.globalVar.resources.find(Q=>"Renown"===Q.name))?this.globalVar.resources.push(new _e("Renown",u)):d.amount+=u,i=[u+" Renown",""],o=50,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(22)+o+" Stat Increasing Food";else if(22===e)this.increaseAllFood(o=50),i=[o+" Stat Increasing Food",o+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(25)+"Research Center Specialization";else if(25===e)this.globalVar.unlockables.set("researchCenterSpecialization",!0),i=["Research Center Specialization",this.getSpecializationDescription("Research Center")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(27)+"Duo Races";else if(27===e){this.globalVar.unlockables.set("duoRace",!0);var h=this.globalVar.shop.find(P=>"Specialty"===P.name);if(null!=h){var f=h.itemList.find(P=>"Incubator Upgrade Lv1"===P.name);null!=f&&(f.isAvailable=!0)}i=["Duo Races","A new race type has been unlocked! Race in pairs to complete this long distance race. Success here will generate more interest for your facility, this time drawing in curious researchers. Gain Research Levels that improve incubator results."];var v=2500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(30)+v+" Coins"}else if(30===e){var _=2500;null==(l=this.globalVar.resources.find(Q=>"Coins"===Q.name))?this.globalVar.resources.push(new _e("Coins",_)):l.amount+=_,i=[_+" Coins",""],o=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(33)+o+" Mangoes"}else if(32===e)o=1,null==(l=this.globalVar.resources.find(Q=>"1 Blue Baton"===Q.name))?this.globalVar.resources.push(new _e("Blue Baton",o,se.Equipment)):l.amount+=o,i=[o+" Blue Baton","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Dolphin";else if(33===e)o=20,null==(l=this.globalVar.resources.find(Q=>"Mangoes"===Q.name))?this.globalVar.resources.push(new _e("Mangoes",o,se.Food)):l.amount+=o,i=[o+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(35)+"Penguin";else if(35===e){var D=this.globalVar.animals.find(U=>U.type===q.Penguin);null!=D&&(D.isAvailable=!0,this.unlockAnimalAbilities(D),this.unlockOtherRaceCourseTypeAnimals(D.raceCourseType),null!=(a=this.globalVar.animalDecks.find(Q=>Q.isPrimaryDeck))&&(s=!1,a.selectedAnimals.forEach(J=>{J.raceCourseType===(null==D?void 0:D.raceCourseType)&&(s=!0)}),s||a.selectedAnimals.push(D))),i=["Penguin","The Penguin is a Tundra racing animal that can slide carefully or recklessly."],v=3500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(37)+v+" Coins"}else if(37===e)_=3500,null==(l=this.globalVar.resources.find(Q=>"Coins"===Q.name))?this.globalVar.resources.push(new _e("Coins",_)):l.amount+=_,i=[_+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(38)+"5 Medals";else if(38===e)null==(l=this.globalVar.resources.find(U=>"Medals"===U.name))?this.globalVar.resources.push(new _e("Medals",5)):l.amount+=5,i=["5 Medals",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(40)+"Barn Row 3";else if(40===e)this.globalVar.unlockables.set("barnRow3",!0),i=["Barn Row 3",""],o=250,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(43)+o+" Stat Increasing Food";else if(43===e)this.increaseAllFood(o=250),i=[o+" Stat Increasing Food",o+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(45)+"Salamander";else if(45===e){var a,y=this.globalVar.animals.find(U=>U.type===q.Salamander);null!=y&&(y.isAvailable=!0,this.unlockAnimalAbilities(y),this.unlockOtherRaceCourseTypeAnimals(y.raceCourseType),null!=(a=this.globalVar.animalDecks.find(Q=>Q.isPrimaryDeck))&&(s=!1,a.selectedAnimals.forEach(J=>{J.raceCourseType===(null==y?void 0:y.raceCourseType)&&(s=!0)}),s||a.selectedAnimals.push(y))),i=["Salamander","The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration."],u=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(47)+u+" Renown"}else if(47===e)u=10,null==(d=this.globalVar.resources.find(J=>"Renown"===J.name))?this.globalVar.resources.push(new _e("Renown",u)):d.amount+=u,i=[u+" Renown",""],_=15e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(50)+_+" Coins";else if(50===e)v=15e3,null==(l=this.globalVar.resources.find(Q=>"Coins"===Q.name))?this.globalVar.resources.push(new _e("Coins",v)):l.amount+=v,i=[v+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(53)+"Rainbow Races";else if(53===e)this.globalVar.unlockables.set("rainbowRace",!0),i=["Rainbow Race","A new race type has been unlocked! This race requires a full team effort spanning all five course types. Your team of researchers are on hand for these races, coming up with more efficient ways to win. Gain Talent Tree Points that can be spent to improve various course types."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(55)+"Amethyst Orb";else if(55===e)this.globalVar.resources.push(new _e("Amethyst Orb",1,se.Equipment)),this.globalVar.unlockables.set("orbs",!0),i=["Amethyst Orb","You receive a glowing violet orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(58)+"Barn Row 4";else if(58===e)this.globalVar.unlockables.set("barnRow4",!0),i=["Barn Row 4",""],u=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+"Sapphire Orb";else if(60===e)this.globalVar.resources.push(new _e("Sapphire Orb",1,se.Equipment)),i=["Sapphire Orb","You receive a glowing blue orb. What it does is a mystery."],o=100,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(62)+o+" Mangoes";else if(62===e){var l;o=100,null==(l=this.globalVar.resources.find(Q=>"Mangoes"===Q.name))?this.globalVar.resources.push(new _e("Mangoes",o,se.Food)):l.amount+=o,i=[o+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(65)+"Amber Orb"}else if(65===e)this.globalVar.resources.push(new _e("Amber Orb",1,se.Equipment)),i=["Amber Orb","You receive a glowing orange orb. What it does is a mystery."],o=25,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(67)+o+" Renown";else if(67===e){var d;u=25,null==(d=this.globalVar.resources.find(Q=>"Renown"===Q.name))?this.globalVar.resources.push(new _e("Renown",u)):d.amount+=u,i=[u+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(70)+"Topaz Orb"}else 70===e?(this.globalVar.resources.push(new _e("Topaz Orb",1,se.Equipment)),i=["Topaz Orb","You receive a glowing yellow orb. What it does is a mystery."],o=500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(73)+o+" Stat Increasing Food Items"):73===e?(this.increaseAllFood(o=500),i=[o+" Stat Increasing Food",o+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(75)+"Emerald Orb"):75===e?(this.globalVar.resources.push(new _e("Emerald Orb",1,se.Equipment)),i=["Emerald Orb","You receive a glowing green orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(78)+"Ruby Orb"):78===e&&(this.globalVar.resources.push(new _e("Ruby Orb",1,se.Equipment)),i=["Ruby Orb","You receive a glowing red orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription="More Coming Soon!");return i}increaseAllFood(e){var i=this.globalVar.resources.find(c=>"Apples"===c.name);null==i?this.globalVar.resources.push(new _e("Apples",e,se.Food)):i.amount+=e;var r=this.globalVar.resources.find(c=>"Bananas"===c.name);null==r?this.globalVar.resources.push(new _e("Bananas",e,se.Food)):r.amount+=e;var a=this.globalVar.resources.find(c=>"Oranges"===c.name);null==a?this.globalVar.resources.push(new _e("Oranges",e,se.Food)):a.amount+=e;var s=this.globalVar.resources.find(c=>"Strawberries"===c.name);null==s?this.globalVar.resources.push(new _e("Strawberries",e,se.Food)):s.amount+=e;var o=this.globalVar.resources.find(c=>"Carrots"===c.name);null==o?this.globalVar.resources.push(new _e("Carrots",e,se.Food)):o.amount+=e;var l=this.globalVar.resources.find(c=>"Turnips"===c.name);null==l?this.globalVar.resources.push(new _e("Turnips",e,se.Food)):l.amount+=e}GenerateCircuitRacesForRank(e){this.globalVar.circuitRaces=[];var i=this.utilityService.getNumericValueOfCircuitRank(e),r=1,a=60,s=15,o=100,l=1.125,c=80*i,u=1.1,d=.9,v=3;"Z"===e?v=1:"Y"==e&&(v=2);for(var _=0;_<v;_++){var D=[],w="C"+i+_;if(i<=2){c=-17;var y=new wn;y.courseType=$.Flatland,2===i?0===_?y.terrain=new Zr(ot.Sunny):1===_&&(y.terrain=new Zr(ot.Rainy)):y.terrain=new Zr(ot.Sunny),y.distance=Math.round(o*l**i+c),D.push(y)}else if(i<=9){c=40*i,(P=[]).push($.Flatland),P.push($.Mountain);var U=this.getCourseTypeInRandomOrderSeeded(P,w+"cl1"),Q=this.utilityService.getRandomSeededNumber(20,80,w+"l1d"),Me=(J=this.utilityService.getRandomSeededNumber(20,80,w+"l2d"))*(W=a/(Q+J));(S=Q*W)<s?(S=0,Me=a):Me<s&&(Me=0,S=a),S>0&&((Ne=new wn).courseType=U[0],Ne.distance=Math.round(o*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,w+"l1r")*(S/a),Ne.terrain=this.getRandomTerrain(Ne.courseType,w+"lt1d"),D.push(Ne)),Me>0&&((Ge=new wn).courseType=U[1],Ge.distance=Math.round(o*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,w+"l2r")*(Me/a),Ge.terrain=this.getRandomTerrain(Ge.courseType,w+"lt2d"),D.push(Ge))}else{s=10,10===i?c=50*i:11===i&&(c=60*i);var P=[];i<=43?(P.push($.Flatland),P.push($.Mountain),P.push($.Ocean)):i<=51?(P.push($.Flatland),P.push($.Mountain),P.push($.Ocean),P.push($.Tundra)):(P.push($.Flatland),P.push($.Mountain),P.push($.Ocean),P.push($.Tundra),P.push($.Volcanic)),U=this.getCourseTypeInRandomOrderSeeded(P,w+"courses1"),Q=this.utilityService.getRandomSeededNumber(20,80,w+"l1d");var W,S,Ne,Ge,J=this.utilityService.getRandomSeededNumber(20,80,w+"l2d"),ze=this.utilityService.getRandomSeededNumber(20,80,w+"l3d"),lt=(Me=J*(W=a/(Q+J+ze)),ze*W);if((S=Q*W)<s?(Me+=S/2,lt+=S/2,S=0):Me<s?(S+=Me/2,lt+=Me/2,Me=0):lt<s&&(S+=lt/2,Me+=lt/2,lt=0),S>0&&((Ne=new wn).courseType=U[0],Ne.distance=Math.round(o*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,w+"l1r")*(S/a),Ne.terrain=this.getRandomTerrain(Ne.courseType,w+"tl1d"),D.push(Ne)),Me>0&&((Ge=new wn).courseType=U[1],Ge.distance=Math.round(o*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,w+"l2r")*(Me/a),Ge.terrain=this.getRandomTerrain(Ge.courseType,w+"tl2d"),D.push(Ge)),lt>0){var ct=new wn;ct.courseType=U[2],ct.distance=Math.round(o*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,w+"l3r")*(lt/a),ct.terrain=this.getRandomTerrain(ct.courseType,w+"tl3d"),D.push(ct)}}var $t=0;D.forEach($e=>{$t+=$e.distance}),D.forEach($e=>{$e.pathData=this.GenerateRaceLegPaths($e,$t)}),this.globalVar.circuitRaces.push(new Pr(D,e,!0,r,$t,a,this.GenerateCircuitRaceRewards(e))),r+=1}}reorganizeLegsByDeckOrder(e,i){return i.isCourseOrderActive?e.sort((r,a)=>i.courseTypeOrder.indexOf(r.courseType)-i.courseTypeOrder.indexOf(a.courseType)):e}getCourseTypeInRandomOrder(e){for(var i=[],r=e.length,a=0;a<r;a++){var s=this.utilityService.getRandomInteger(1,e.length);i.push(e[s-1]),e=e.filter(o=>o!==e[s-1])}return i}getCourseTypeInRandomOrderSeeded(e,i="seeded"){for(var r=[],a=e.length,s=0;s<a;s++){var o=this.utilityService.getRandomSeededInteger(1,e.length,i);r.push(e[o-1]),e=e.filter(l=>l!==e[o-1])}return r}getRandomTerrain(e,i){var r=[];e===$.Flatland||e===$.Mountain?(r.push(ot.Sunny),r.push(ot.Rainy),r.push(ot.Stormy),r.push(ot.Torrid),r.push(ot.Snowfall)):e===$.Ocean?(r.push(ot.Sunny),r.push(ot.Maelstrom),r.push(ot.Stormy),r.push(ot.Snowfall)):e===$.Tundra?(r.push(ot.Sunny),r.push(ot.Hailstorm),r.push(ot.Stormy),r.push(ot.Snowfall)):e===$.Volcanic&&(r.push(ot.Sunny),r.push(ot.Ashfall),r.push(ot.Stormy),r.push(ot.Torrid));var a;return a=null!=i?this.utilityService.getRandomSeededInteger(1,r.length,i):this.utilityService.getRandomInteger(1,r.length),new Zr(r[a-1])}getRandomGrandPrixTerrain(e){var i=[];i.push(ot.Sunny),i.push(ot.Stormy),i.push(ot.Snowfall);var r;return r=null!=e?this.utilityService.getRandomSeededInteger(1,i.length,e):this.utilityService.getRandomInteger(1,i.length),new Zr(i[r-1])}GetCircuitRankValue(e){for(var i=1;e.length>1;){var r=e.length;i+=26,(e=e.substring(1)).length>=r&&(e="")}return i+(91-e.charCodeAt(0))}GenerateCircuitRaceRewards(e){var i=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new _e("Coins",Math.round(50*1.01**i))),l.push(new _e("Renown",parseFloat((1.03*1.03**i/100).toFixed(3)))),l}GenerateLocalRaceRewards(e){var i=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new _e("Coins",Math.round(10*1.005**i))),l.push(new _e("Renown",parseFloat((1.01*1.015**i/100).toFixed(3)))),l}GenerateMonoRaceRewards(e){var i=[];i.push(new _e("Facility Level",1,se.Progression));var r=this.GetCircuitRankValue(e);return i.push(new _e("Coins",Math.round(30*1.01**r))),i.push(new _e("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateDuoRaceRewards(e){var i=[];i.push(new _e("Research Level",1,se.Progression));var r=this.GetCircuitRankValue(e);return i.push(new _e("Coins",Math.round(100*1.01**r))),i.push(new _e("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateRainbowRaceRewards(e){var i=[];i.push(new _e("Talent Points",1,se.Progression));var r=this.GetCircuitRankValue(e);return i.push(new _e("Coins",Math.round(250*1.01**r))),i.push(new _e("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateLocalRaces(){this.GenerateMonoRaces(this.globalVar.monoRank),this.GenerateDuoRaces(this.globalVar.duoRank),this.GenerateRainbowRaces(this.globalVar.rainbowRank)}GenerateMonoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(D=>D.localRaceType!==kt.Mono),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,l=100*i,d=[],h=new wn;if(1===i)h.courseType=$.Flatland;else{var f=[];i<9?(f.push($.Flatland),f.push($.Mountain)):i<40?(f.push($.Flatland),f.push($.Mountain),f.push($.Ocean)):i<50?(f.push($.Flatland),f.push($.Mountain),f.push($.Ocean),f.push($.Tundra)):(f.push($.Flatland),f.push($.Mountain),f.push($.Ocean),f.push($.Tundra),f.push($.Volcanic)),null!=this.globalVar.lastMonoRaceCourseType&&i>2&&(f=f.filter(D=>D!==this.globalVar.lastMonoRaceCourseType));var v=this.getCourseTypeInRandomOrderSeeded(f,"monoseed"+e+i);h.courseType=v[0]}h.terrain=this.getRandomTerrain(h.courseType,"monoseed"+e+i),h.distance=Math.round((155*1.155**i+l)*this.utilityService.getRandomSeededNumber(.9,1.1)),d.push(h);var _=h.distance;d.forEach(D=>{D.pathData=this.GenerateRaceLegPaths(D,_)}),this.globalVar.localRaces.push(new Pr(d,e,!1,r,_,90,this.GenerateMonoRaceRewards(e),kt.Mono)),r+=1}}GenerateDuoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(w=>w.localRaceType!==kt.Duo),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,u=[],d=[];i<=10?(d.push($.Flatland),d.push($.Mountain),d.push($.Ocean)):i<=20?(d.push($.Flatland),d.push($.Mountain),d.push($.Ocean),d.push($.Tundra)):(d.push($.Flatland),d.push($.Mountain),d.push($.Ocean),d.push($.Tundra),d.push($.Volcanic));var h=this.getCourseTypeInRandomOrderSeeded(d,"duooseed"+e+i),f=this.utilityService.getRandomSeededNumber(.8,1.2),v=new wn;v.courseType=h[0],v.distance=Math.round(6500*1.1**i*f*.5),v.terrain=this.getRandomTerrain(v.courseType,"duoseedl1"+e+i),u.push(v);var _=new wn;_.courseType=h[1],_.distance=Math.round(6500*1.1**i*f*.5),_.terrain=this.getRandomTerrain(_.courseType,"duoseedl2"+e+i),u.push(_);var D=v.distance+_.distance;u.forEach(w=>{w.pathData=this.GenerateRaceLegPaths(w,D)}),this.globalVar.localRaces.push(new Pr(u,e,!1,r,D,80,this.GenerateDuoRaceRewards(e),kt.Duo)),r+=1}}GenerateRainbowRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(U=>U.localRaceType!==kt.Rainbow),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,s=1e5,o=1.135,u=[],d=[];d.push($.Flatland),d.push($.Mountain),d.push($.Ocean),d.push($.Tundra),d.push($.Volcanic);var h=this.getCourseTypeInRandomOrderSeeded(d,"rainbowseed"+e+i),f=this.utilityService.getRandomSeededNumber(.8,1.2),v=new wn;v.courseType=h[0],v.distance=Math.round(s*o**i*f*.2),v.terrain=this.getRandomTerrain(v.courseType,"rainbowseedl1"+e+i),u.push(v);var _=new wn;_.courseType=h[1],_.distance=Math.round(s*o**i*f*.2),_.terrain=this.getRandomTerrain(_.courseType,"rainbowseedl2"+e+i),u.push(_);var D=new wn;D.courseType=h[2],D.distance=Math.round(s*o**i*f*.2),D.terrain=this.getRandomTerrain(D.courseType,"rainbowseedl3"+e+i),u.push(D);var w=new wn;w.courseType=h[3],w.distance=Math.round(s*o**i*f*.2),w.terrain=this.getRandomTerrain(w.courseType,"rainbowseedl4"+e+i),u.push(w);var y=new wn;y.courseType=h[4],y.distance=Math.round(s*o**i*f*.2),y.terrain=this.getRandomTerrain(y.courseType,"rainbowseedl5"+e+i),u.push(y);var P=v.distance+_.distance+D.distance+w.distance+y.distance;u.forEach(U=>{U.pathData=this.GenerateRaceLegPaths(U,P)}),this.globalVar.localRaces.push(new Pr(u,e,!1,r,P,120,this.GenerateRainbowRaceRewards(e),kt.Rainbow)),r+=1}}generateFreeRace(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=60,r=15,a=90,s=1.125,o=40*e;e>=11&&(o=70*e);var l=1.05,c=.8,h=[];if(e<=2){var f=new wn;f.courseType=$.Flatland,f.terrain=this.getRandomTerrain(f.courseType),f.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l)),h.push(f)}else if(e<=10){(v=[]).push($.Flatland),v.push($.Mountain);var _=this.getCourseTypeInRandomOrder(v),D=this.utilityService.getRandomNumber(10,90),Q=(w=this.utilityService.getRandomNumber(10,90))*(P=i/(D+w));(U=D*P)<r?(U=0,Q=i):Q<r&&(Q=0,U=i),U>0&&((J=new wn).courseType=_[0],J.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l))*(U/i),J.terrain=this.getRandomTerrain(J.courseType),h.push(J)),Q>0&&((ge=new wn).courseType=_[1],ge.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l))*(Q/i),ge.terrain=this.getRandomTerrain(ge.courseType),h.push(ge))}else{r=10;var v=[];e<35?(v.push($.Flatland),v.push($.Mountain),v.push($.Ocean)):e<45?(v.push($.Flatland),v.push($.Mountain),v.push($.Ocean),v.push($.Tundra)):(v.push($.Flatland),v.push($.Mountain),v.push($.Ocean),v.push($.Tundra),v.push($.Volcanic)),_=this.getCourseTypeInRandomOrder(v),D=this.utilityService.getRandomNumber(10,90);var P,U,J,ge,w=this.utilityService.getRandomNumber(10,90),W=this.utilityService.getRandomNumber(10,90),S=(Q=w*(P=i/(D+w+W)),W*P);if((U=D*P)<r?(Q+=U/2,S+=U/2,U=0):Q<r?(U+=Q/2,S+=Q/2,Q=0):S<r&&(U+=S/2,Q+=S/2,S=0),U>0&&((J=new wn).courseType=_[0],J.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l))*(U/i),J.terrain=this.getRandomTerrain(J.courseType),h.push(J)),Q>0&&((ge=new wn).courseType=_[1],ge.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l))*(Q/i),ge.terrain=this.getRandomTerrain(ge.courseType),h.push(ge)),S>0){var Me=new wn;Me.courseType=_[2],Me.distance=Math.round((a*s**e+o)*this.utilityService.getRandomNumber(c,l))*(S/i),Me.terrain=this.getRandomTerrain(Me.courseType),h.push(Me)}}var Ne=0,Ge=this.globalVar.animalDecks.find(ze=>ze.isPrimaryDeck);return void 0!==Ge&&(h=this.reorganizeLegsByDeckOrder(h,Ge)),h.forEach(ze=>{Ne+=ze.distance}),h.forEach(ze=>{ze.pathData=this.GenerateRaceLegPaths(ze,Ne)}),new Pr(h,this.globalVar.circuitRank,!1,1,Ne,i,this.GenerateLocalRaceRewards(this.globalVar.circuitRank),kt.Free)}generateGrandPrixSegment(e){var i=this.globalVar.eventRaceData,a=(this.utilityService.getNumericValueOfCircuitRank(i.rank),i.totalDistance/i.totalSegments),s=[],o=new wn;return o.courseType=e.raceCourseType,o.terrain=this.getRandomTerrain(o.courseType),o.distance=a,s.push(o),s.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,a)}),new Pr(s,this.globalVar.circuitRank,!1,1,a,i.eventRaceTimeLength,this.GenerateLocalRaceRewards(this.globalVar.circuitRank),kt.Free)}getEventStartDateTime(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,s=new Date,o=new Date,l=new Date,c=new Date;return(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(s.getHours()-r+a.weekStartHour),s.setMinutes(0,0,0),(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(o.getHours()-r+a.weekEndHour),o.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=s&&e<=o||e>=l&&e<=c?0:e>o?l:s}getTimeToEventRace(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,s=new Date,o=new Date,l=new Date,c=new Date;return(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(s.getHours()-r+a.weekStartHour),s.setMinutes(0,0,0),(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(o.getHours()-r+a.weekEndHour),o.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=s&&e<=o||e>=l&&e<=c?0:e>o?(l.getTime()-e.getTime())/1e3:(s.getTime()-e.getTime())/1e3}getRemainingEventRaceTime(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,s=new Date,o=new Date,l=new Date,c=new Date;return(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(s.getHours()-r+a.weekStartHour),s.setMinutes(0,0,0),(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(o.getHours()-r+a.weekEndHour),o.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=s&&e<=o||e>=l&&e<=c?e>l?(c.getTime()-e.getTime())/1e3:(o.getTime()-e.getTime())/1e3:0}initialGrandPrixSetup(e){var i=this.globalVar.eventRaceData;i.totalDistance=5e8,i.raceTerrain=this.getRandomGrandPrixTerrain(e)}generateTrackRace(e,i){var r=60,a=[],s=new wn;s.courseType=e.raceCourseType,i===Fn.practice?(r=45,s.distance=100,s.terrain=new Zr(ot.Stormy)):i===Fn.novice?(r=60,s.distance=1e3,s.terrain=new Zr(ot.Stormy)):i===Fn.intermediate?(r=80,s.distance=1e4,s.terrain=new Zr(ot.Stormy)):i===Fn.master&&(r=100,s.distance=1e5,s.terrain=new Zr(ot.Stormy)),a.push(s);var o=0;return a.forEach(l=>{o+=l.distance}),a.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,o,i)}),new Pr(a,this.globalVar.circuitRank,!1,1,o,r,void 0,kt.Track,i)}GenerateRaceLegPaths(e,i,r){for(var s=[],o=e.distance,c=Math.round(o/(i/20)),u=!1,d=Le.Regular,h=o/c,f=0;f<c;f++){var v=new bh;0!==f?f!==c-1?(v.length=o>h?h:o,(o-=v.length)<0&&(o=0),u?v.routeDesign=Le.Regular:(v.routeDesign=this.GetSpecialRoute(e.courseType,f+2<c,d),e.specialPathCount+=1,v.isSpecialPath=!0),u=v.routeDesign!==Le.Regular,v.setStumbleFields(),s.push(v),d=v.routeDesign):(v.length=o,v.routeDesign=e.courseType===$.Volcanic?Le.LastRegular:Le.Regular,v.setStumbleFields(),s.push(v),d=v.routeDesign):(v.length=h,v.routeDesign=e.courseType===$.Volcanic?Le.FirstRegular:Le.Regular,v.setStumbleFields(),s.push(v),o-=v.length,d=v.routeDesign)}return s}GetSpecialRoute(e,i,r){var a=Le.Regular,o=this.utilityService.getRandomInteger(1,3);return 1===o||(2===o?e===$.Flatland?a=Le.S:e===$.Mountain?a=Le.Crevasse:e===$.Ocean?a=Le.Waves:e===$.Tundra?a=Le.Cavern:e===$.Volcanic&&(a=Le.Regular):3===o&&(e===$.Flatland?a=Le.Bumps:e===$.Mountain?a=Le.Gaps:e===$.Ocean?a=Le.Dive:e===$.Tundra?a=Le.Hills:e===$.Volcanic&&(a=Le.SteppingStones))),a}calculateAnimalRacingStats(e){var i=e.currentStats.defaultMaxSpeedModifier,r=e.currentStats.defaultAccelerationModifier,a=e.currentStats.defaultStaminaModifier,s=e.currentStats.defaultPowerModifier,o=e.currentStats.defaultFocusModifier,l=e.currentStats.defaultAdaptabilityModifier,c=.02,u=e.getAnimalType().toLowerCase(),d=this.globalVar.modifiers.find(ct=>ct.text===u+"DefaultMaxSpeedModifier"),h=this.globalVar.modifiers.find(ct=>ct.text===u+"DefaultAccelerationModifier"),f=this.globalVar.modifiers.find(ct=>ct.text===u+"DefaultStaminaModifier"),v=this.globalVar.modifiers.find(ct=>ct.text===u+"DefaultPowerModifier"),_=this.globalVar.modifiers.find(ct=>ct.text===u+"DefaultFocusModifier"),D=this.globalVar.modifiers.find(ct=>ct.text===u+"DefaultAdaptabilityModifier");null!=d&&(i=d.value),null!=h&&(r=h.value),null!=f&&(a=f.value),null!=v&&(s=v.value),null!=_&&(o=_.value),null!=D&&(l=D.value);var w=this.getTraitModifier(e,fe.topSpeed),y=this.getTraitModifier(e,fe.acceleration),P=this.getTraitModifier(e,fe.endurance),U=this.getTraitModifier(e,fe.power),Q=this.getTraitModifier(e,fe.focus),J=this.getTraitModifier(e,fe.adaptability),ge=null!==e.equippedOrb&&"Ruby Orb"===e.equippedOrb.name?this.globalVar.orbStats.maxSpeedIncrease:1,W=null!==e.equippedOrb&&"Amber Orb"===e.equippedOrb.name?this.globalVar.orbStats.accelerationRateIncrease:1,S=null!==e.equippedOrb&&"Topaz Orb"===e.equippedOrb.name?this.globalVar.orbStats.staminaIncrease:1,Me=null!==e.equippedOrb&&"Amethyst Orb"===e.equippedOrb.name?this.globalVar.orbStats.powerEfficiencyIncrease:1,Ne=null!==e.equippedOrb&&"Sapphire Orb"===e.equippedOrb.name?this.globalVar.orbStats.focusDistanceIncrease:1,Ge=null!==e.equippedOrb&&"Emerald Orb"===e.equippedOrb.name?this.globalVar.orbStats.adaptabilityDistanceIncrease:1,ze=this.globalVar.modifiers.find(ct=>"breedLevelStatModifier"===ct.text);null!=ze&&(c=ze.value),c=1+c*(e.breedLevel-1);var lt=this.GetAnimalDiminishingReturns(e);e.currentStats.maxSpeedMs=e.currentStats.calculateMaxSpeed(i*c*w*e.incubatorStatUpgrades.maxSpeedModifier,lt,ge),e.currentStats.accelerationMs=e.currentStats.calculateTrueAcceleration(r*c*y*e.incubatorStatUpgrades.accelerationModifier,lt,W),e.currentStats.stamina=e.currentStats.calculateStamina(a*c*P*e.incubatorStatUpgrades.staminaModifier,lt,S),e.currentStats.powerMs=e.currentStats.calculateTruePower(s*c*U*e.incubatorStatUpgrades.powerModifier,lt,Me),e.currentStats.focusMs=e.currentStats.calculateTrueFocus(o*c*Q*e.incubatorStatUpgrades.focusModifier,lt,Ne),e.currentStats.adaptabilityMs=e.currentStats.calculateTrueAdaptability(l*c*J*e.incubatorStatUpgrades.adaptabilityModifier,lt,Ge),e.currentStats.burstChance=e.currentStats.calculateBurstChance(c),e.currentStats.burstDistance=e.currentStats.calculateBurstDistance(c),this.updateTrackedMaxStats(e)}getTraitModifier(e,i){var r=1;if(null!=e.trait){var a=e.trait.researchLevel,s=e.trait.researchLevel,o=this.globalVar.modifiers.find(l=>"maximumTraitNegativePercentModifier"===l.text);void 0!==o&&s>o.value&&(s=o.value),e.trait.positiveStatGain===i&&(r+=a/100),e.trait.negativeStatGain===i&&(r-=s/100)}return r}GetAnimalDiminishingReturns(e){var i=e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalVar.resources.find(o=>"Facility Level"===o.name);if(null==r)return i;var a=5,s=this.globalVar.modifiers.find(o=>"facilityLevelModifier"===o.text);return void 0!==s&&(a=s.value),i+r.amount*(a+e.miscStats.diminishingReturnsBonus)}IncreaseAnimalBreedGauge(e,i){e.breedGaugeXp+=i,e.breedGaugeXp>=e.breedGaugeMax&&(e.breedGaugeXp=e.breedGaugeMax,e.autoBreedActive&&this.BreedAnimal(e))}BreedAnimal(e){if(!(e.breedGaugeXp<e.breedGaugeMax)){var i=5,r=this.globalVar.modifiers.find(J=>"breedGaugeMaxIncreaseModifier"===J.text);if(null!=r&&(i=r.value),e.breedLevel+=1,e.breedGaugeXp=0,e.breedGaugeMax+=i,null!=this.globalVar.resources.find(J=>J.name.includes("Incubator Upgrade"))&&null!=e.trait){var s=.001,o=this.globalVar.modifiers.find(J=>"incubatorUpgradeIncreaseModifier"===J.text);null!=o&&(s=o.value);var l=e.trait.researchLevel*s,c=this.globalVar.resources.find(J=>"Incubator Upgrade Lv 1"===J.name),u=this.globalVar.resources.find(J=>"Incubator Upgrade Lv 2"===J.name),d=this.globalVar.resources.find(J=>"Incubator Upgrade Lv 3"===J.name);null!=this.globalVar.resources.find(J=>"Incubator Upgrade Lv 4"===J.name)?l>.1&&(l=.1):null!=d?l>.05&&(l=.05):null!=u?l>.025&&(l=.025):null!=c&&l>.01&&(l=.01),e.trait.positiveStatGain===fe.topSpeed&&(e.incubatorStatUpgrades.maxSpeedModifier+=l),e.trait.positiveStatGain===fe.acceleration&&(e.incubatorStatUpgrades.accelerationModifier+=l),e.trait.positiveStatGain===fe.endurance&&(e.incubatorStatUpgrades.staminaModifier+=l),e.trait.positiveStatGain===fe.power&&(e.incubatorStatUpgrades.powerModifier+=l),e.trait.positiveStatGain===fe.focus&&(e.incubatorStatUpgrades.focusModifier+=l),e.trait.positiveStatGain===fe.adaptability&&(e.incubatorStatUpgrades.adaptabilityModifier+=l)}var f=this.globalVar.resources.find(J=>"Animal Handler"===J.name),v=this.globalVar.modifiers.find(J=>"animalHandlerModifier"===J.text);if(null!=f&&void 0!==v&&null!=v&&f.amount>0){var _=f.amount*v.value,D=Math.round((e.currentStats.topSpeed-e.baseStats.topSpeed)*_),w=Math.round((e.currentStats.acceleration-e.baseStats.acceleration)*_),y=Math.round((e.currentStats.endurance-e.baseStats.endurance)*_),P=Math.round((e.currentStats.power-e.baseStats.power)*_),U=Math.round((e.currentStats.focus-e.baseStats.focus)*_),Q=Math.round((e.currentStats.adaptability-e.baseStats.adaptability)*_);e.currentStats=new Fe(e.baseStats.topSpeed+D,e.baseStats.acceleration+w,e.baseStats.endurance+y,e.baseStats.power+P,e.baseStats.focus+U,e.baseStats.adaptability+Q)}else e.currentStats=new Fe(e.baseStats.topSpeed,e.baseStats.acceleration,e.baseStats.endurance,e.baseStats.power,e.baseStats.focus,e.baseStats.adaptability);this.calculateAnimalRacingStats(e),this.globalVar.trackedStats.totalBreeds+=1}}increaseAbilityXp(e,i){var r=25,a=this.globalVar.modifiers.find(l=>"abilityLevelCapModifier"===l.text);if(null!=a&&(r=a.value),!(e.ability.abilityLevel>e.breedLevel+r)){var s=1;null!=i&&i>1&&(s=i),e.ability.abilityXp+=s,e.ability.abilityXp>=e.ability.abilityMaxXp&&(e.ability.abilityXp=0,e.ability.abilityLevel+=1,e.ability.abilityLevel%10==0&&(e.ability.abilityMaxXp+=5));var o=e.availableAbilities.find(l=>l.name===e.ability.name);null!=o&&(o.abilityXp=e.ability.abilityXp,o.abilityLevel=e.ability.abilityLevel,o.abilityMaxXp=e.ability.abilityMaxXp)}}InitializeResources(){this.globalVar.resources.push(this.initializeService.initializeResource("Coins",500,se.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Medals",500,se.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Renown",1,se.Progression))}InitializeSettings(){this.globalVar.settings.set("theme",this.themeService.getActiveTheme()),this.globalVar.settings.set("skipDrawRace",!1),this.globalVar.settings.set("finishTrainingBeforeSwitching",!0),this.globalVar.settings.set("hideTips",!1),this.globalVar.settings.set("useNumbersForCircuitRank",!1),this.globalVar.settings.set("raceDisplayInfo",Ir.both)}InitializeUnlockables(){this.globalVar.unlockables.set("monoRace",!1),this.globalVar.unlockables.set("duoRace",!1),this.globalVar.unlockables.set("rainbowRace",!1),this.globalVar.unlockables.set("grandPrix",!1),this.globalVar.unlockables.set("orbs",!1),this.globalVar.unlockables.set("barnRow2",!1),this.globalVar.unlockables.set("barnRow3",!1),this.globalVar.unlockables.set("barnRow4",!1),this.globalVar.unlockables.set("barnRow5",!1),this.globalVar.unlockables.set("coaching",!1),this.globalVar.unlockables.set("barnSpecializations",!1),this.globalVar.unlockables.set("attractionSpecialization",!1),this.globalVar.unlockables.set("researchCenterSpecialization",!1)}getCoinsResourceValue(e){return new _e("Coins",e)}getMedalResourceValue(e){return new _e("Medals",e)}unlockAnimalAbilities(e){var i=this.globalVar.shop.find(a=>"Abilities"===a.name);if(null!=i){var r=i.itemList.filter(a=>a.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}unlockOtherRaceCourseTypeAnimals(e){var i=this.globalVar.shop.find(a=>"Animals"===a.name);if(null!=i){var r=[];i.itemList.forEach(a=>{var s=this.globalVar.animals.find(o=>o.getAnimalType()===a.name);null!=s&&s.raceCourseType===e&&r.push(a)}),null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}getEquipmentDescription(e){var i="";return"Headband"===e&&(i="The first three stumbles you would have are ignored"),"Pendant"===e&&(i="Reduce your ability cooldown by 10%"),"Blinders"===e&&(i="Negative terrain effects are cut in half"),"Quick Snack"===e&&(i="Gain 100% of Stamina back after running out"),"Red Baton"===e&&(i="Increase next racer's Speed by 10% on Relay"),"Blue Baton"===e&&(i="Increase next racer's Focus by 10% on Relay"),"Violet Baton"===e&&(i="Increase next racer's Power by 10% on Relay"),"Green Baton"===e&&(i="Increase next racer's Adaptability by 10% on Relay"),"Orange Baton"===e&&(i="Increase next racer's Acceleration by 10% on Relay"),"Yellow Baton"===e&&(i="Increase next racer's Endurance by 10% on Relay"),"Amethyst Orb"===e&&(i="Increase your Power Efficiency by 10%."),"Sapphire Orb"===e&&(i="Increase your Focus Distance by 10%."),"Amber Orb"===e&&(i="Increase your Acceleration Rate by 10%."),"Topaz Orb"===e&&(i="Increase your Stamina by 10%."),"Emerald Orb"===e&&(i="Increase your Adaptability Distance by 10%."),"Ruby Orb"===e&&(i="Increase your Max Speed by 10%."),i}getItemDescription(e){return"Apples"===e?"+1 Acceleration to a single animal":"Bananas"===e?"+1 Speed to a single animal":"Strawberries"===e?"+1 Endurance to a single animal":"Carrots"===e?"+1 Power to a single animal":"Turnips"===e?"+1 Focus to a single animal":"Oranges"===e?"+1 Adaptability to a single animal":"Mangoes"===e?"+1 Breed Level to a single animal":""}getSpecializationDescription(e){var i="";return"Breeding Grounds"===e?i="Turn your barn into a habitat based around the optimal breeding environment for your animals. As you progress, your animals will gain more breeding XP from their training.":"Training Facility"===e?i="Pull out all the stops giving your animals the best environment to improve. As you progress, your animals will train faster and gain stats from training at a higher rate.":"Attraction"===e?i="Give the people what they want and turn your barn into a tourist attraction. As you progress, your barn will provide passive income at a steady rate while training.":"Research Center"===e&&(i="Bring in the top names in animal research to optimize your training process. As you progress, your animal will gain reduced stats from training but split its improvements with other animals."),i}updateTrackedMaxStats(e){if(e.isAvailable){if(""===this.globalVar.trackedStats.highestMaxSpeed)this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var i=parseFloat(this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").indexOf(" ")));e.currentStats.maxSpeedMs>i&&(this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAccelerationRate)this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var r=parseFloat(this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").indexOf(" ")));e.currentStats.accelerationMs>r&&(this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestStamina)this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")";else{var a=parseFloat(this.globalVar.trackedStats.highestStamina.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestStamina.replaceAll(",","").indexOf(" ")));e.currentStats.stamina>a&&(this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")")}if(""===this.globalVar.trackedStats.highestPowerEfficiency)this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")";else{var s=parseFloat(this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").indexOf(" ")));e.currentStats.powerMs>s&&(this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")")}if(""===this.globalVar.trackedStats.highestFocusDistance)this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")";else{var o=parseFloat(this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>o&&(this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAdaptabilityDistance)this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")";else{var l=parseFloat(this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>l&&(this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")")}}}devModeInitialize(e){var i=this.globalVar.resources.find(U=>"Coins"===U.name);if(void 0!==i&&(i.amount=1e4),this.globalVar.resources.some(U=>"Medals"===U.name)){var r=this.globalVar.resources.find(U=>"Medals"===U.name);void 0!==r&&(r.amount+=e)}else this.globalVar.resources.push(this.initializeService.initializeResource("Medals",e,se.Resources));if(this.globalVar.resources.push(this.initializeService.initializeResource("Talent Points",10,se.Resources)),this.globalVar.resources.some(U=>"Renown"===U.name)){var a=this.globalVar.resources.find(U=>"Renown"===U.name);void 0!==a&&(a.amount+=200)}else this.globalVar.resources.push(this.initializeService.initializeResource("Renown",200,se.Resources));this.globalVar.resources.push(this.initializeService.initializeResource("Facility Level",e,se.Progression));for(var s=1;s<=e;s++){var o=this.utilityService.getCircuitRankFromNumericValue(s);this.globalVar.circuitRank=o,this.checkCircuitRankRewards(),this.GenerateCircuitRacesForRank(this.globalVar.circuitRank)}var l=this.globalVar.animals.find(U=>U.type===q.Horse);void 0!==l&&(l.currentStats.topSpeed=20,l.currentStats.acceleration=20,l.currentStats.endurance=20,l.currentStats.power=20,l.currentStats.focus=10,l.currentStats.adaptability=10,l.breedLevel=1,l.canEquipOrb=!0,this.calculateAnimalRacingStats(l));var c=this.globalVar.animals.find(U=>U.type===q.Cheetah);void 0!==c&&(c.currentStats.topSpeed=200,c.currentStats.acceleration=200,c.currentStats.endurance=200,c.currentStats.power=200,c.currentStats.focus=200,c.currentStats.adaptability=200,c.breedLevel=450,this.calculateAnimalRacingStats(c));var u=this.globalVar.animals.find(U=>U.type===q.Hare);void 0!==u&&(u.currentStats.topSpeed=200,u.currentStats.acceleration=200,u.currentStats.endurance=200,u.currentStats.power=200,u.currentStats.focus=200,u.currentStats.adaptability=200,u.breedLevel=70,this.calculateAnimalRacingStats(u));var d=this.globalVar.animals.find(U=>U.type===q.Monkey);void 0!==d&&(d.currentStats.topSpeed=150,d.currentStats.acceleration=150,d.currentStats.endurance=150,d.currentStats.power=150,d.currentStats.focus=150,d.currentStats.adaptability=150,d.breedLevel=1e3,this.calculateAnimalRacingStats(d));var h=this.globalVar.animals.find(U=>U.type===q.Goat);void 0!==h&&(h.currentStats.topSpeed=200,h.currentStats.acceleration=200,h.currentStats.endurance=200,h.currentStats.power=200,h.currentStats.focus=200,h.currentStats.adaptability=200,h.breedLevel=70,this.calculateAnimalRacingStats(h));var f=this.globalVar.animals.find(U=>U.type===q.Gecko);void 0!==f&&(f.currentStats.topSpeed=200,f.currentStats.acceleration=200,f.currentStats.endurance=200,f.currentStats.power=200,f.currentStats.focus=200,f.currentStats.adaptability=200,f.breedLevel=70,this.calculateAnimalRacingStats(f));var v=this.globalVar.animals.find(U=>U.type===q.Dolphin);void 0!==v&&(v.currentStats.topSpeed=100,v.currentStats.acceleration=100,v.currentStats.endurance=100,v.currentStats.power=100,v.currentStats.focus=100,v.currentStats.adaptability=100,v.breedLevel=300,this.calculateAnimalRacingStats(v));var _=this.globalVar.animals.find(U=>U.type===q.Octopus);void 0!==_&&(_.currentStats.topSpeed=200,_.currentStats.acceleration=200,_.currentStats.endurance=200,_.currentStats.power=200,_.currentStats.focus=200,_.currentStats.adaptability=200,_.breedLevel=70,this.calculateAnimalRacingStats(_));var D=this.globalVar.animals.find(U=>U.type===q.Penguin);void 0!==D&&(D.currentStats.topSpeed=200,D.currentStats.acceleration=200,D.currentStats.endurance=200,D.currentStats.power=200,D.currentStats.focus=200,D.currentStats.adaptability=200,D.breedLevel=200,this.calculateAnimalRacingStats(D));var w=this.globalVar.animals.find(U=>U.type===q.Caribou);void 0!==w&&(w.currentStats.topSpeed=200,w.currentStats.acceleration=200,w.currentStats.endurance=200,w.currentStats.power=200,w.currentStats.focus=200,w.currentStats.adaptability=200,w.breedLevel=200,this.calculateAnimalRacingStats(w));var y=this.globalVar.animals.find(U=>U.type===q.Salamander);void 0!==y&&(y.currentStats.topSpeed=15,y.currentStats.acceleration=15,y.currentStats.endurance=25,y.currentStats.power=20,y.currentStats.focus=10,y.currentStats.adaptability=10,y.breedLevel=1,this.calculateAnimalRacingStats(y));var P=this.globalVar.animals.find(U=>U.type===q.Fox);void 0!==P&&(P.currentStats.topSpeed=200,P.currentStats.acceleration=200,P.currentStats.endurance=200,P.currentStats.power=200,P.currentStats.focus=200,P.currentStats.adaptability=200,P.breedLevel=200,this.calculateAnimalRacingStats(P))}}return t.\u0275fac=function(e){return new(e||t)(Pe(Sa),Pe(vm),Pe(al))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var rn=(()=>{return(t=rn||(rn={})).None="None",t.BreedingGrounds="Breeding Grounds",t.TrainingFacility="Training Facility",t.Attraction="Attraction",t.ResearchCenter="Research Center",rn;var t})();let Sn=(()=>{class t{constructor(e,i,r){this.globalService=e,this.utilityService=i,this.sanitizer=r}recalculateAllAnimalStats(){this.globalService.globalVar.animals.forEach(e=>{this.globalService.calculateAnimalRacingStats(e)})}getAnimalsFromAnimalDeck(e){var i=[];return null==e||void 0===e.selectedAnimals||0===e.selectedAnimals.length||e.selectedAnimals.forEach(r=>{var a=this.globalService.globalVar.animals.find(s=>s.type===r.type);void 0!==a&&i.push(a)}),i}getPrimaryDeck(){return this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck)}getResourceByName(e){var i=this.globalService.globalVar.resources.find(r=>r.name===e);return void 0!==i?i.amount:0}spendResourceByName(e,i){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount-=i)}gainResourceByName(e,i){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount+=i)}getFacilityLevel(){var e=this.globalService.globalVar.resources.find(i=>"Facility Level"===i.name);return void 0!==e?e.amount:0}getResearchLevel(){var e=this.globalService.globalVar.resources.find(i=>"Research Level"===i.name);return void 0!==e?e.amount:0}getCoins(){var e=this.globalService.globalVar.resources.find(i=>"Coins"===i.name);return void 0!==e?e.amount:0}spendCoins(e){var i=this.globalService.globalVar.resources.find(r=>"Coins"===r.name);void 0!==i&&(i.amount-=e)}getMedals(){var e=this.globalService.globalVar.resources.find(i=>"Medals"===i.name);return void 0!==e?e.amount:0}spendMedals(e){var i=this.globalService.globalVar.resources.find(r=>"Medals"===r.name);void 0!==i&&(i.amount-=e)}getRenown(){var e=this.globalService.globalVar.resources.find(i=>"Renown"===i.name);return void 0!==e?e.amount:0}getStockbreeder(){var e=this.globalService.globalVar.resources.find(i=>"Stockbreeder"===i.name);return void 0!==e?e.amount:0}getAnimalByType(e){var i=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==i?i:null}getMaxSpeedModifierByAnimalType(e){var i=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===q[e].toLowerCase()+"DefaultMaxSpeedModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(s,fe.topSpeed)*s.incubatorStatUpgrades.maxSpeedModifier}return i}getAccelerationModifierByAnimalType(e){var i=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===q[e].toLowerCase()+"DefaultAccelerationModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(s,fe.acceleration)*s.incubatorStatUpgrades.accelerationModifier}return i}getStaminaModifierByAnimalType(e){var i=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===q[e].toLowerCase()+"DefaultStaminaModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(s,fe.endurance)*s.incubatorStatUpgrades.staminaModifier}return i}getPowerModifierByAnimalType(e){var i=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===q[e].toLowerCase()+"DefaultPowerModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(s,fe.power)*s.incubatorStatUpgrades.powerModifier}return i}getFocusModifierByAnimalType(e){var i=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===q[e].toLowerCase()+"DefaultFocusModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(s,fe.focus)*s.incubatorStatUpgrades.focusModifier}return i}getAdaptabilityModifierByAnimalType(e){var i=0,r=.01,a=0,s=this.globalService.globalVar.animals.find(u=>u.type===e);if(null!=s){var o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(r=o.value),r=1+r*(s.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(u=>u.text===q[e].toLowerCase()+"DefaultAdaptabilityModifier");null!=l&&(a=l.value),i=a*r*this.globalService.getTraitModifier(s,fe.adaptability)*s.incubatorStatUpgrades.adaptabilityModifier}return i}getTrainingBreedGaugeIncrease(e,i){var r=0,a=this.globalService.globalVar.modifiers.find(o=>"trainingBreedGaugeIncrease"===o.text);if(null!=a&&(r=a.value),null!=i.miscStats.bonusBreedXpGainFromTraining&&i.miscStats.bonusBreedXpGainFromTraining>0&&(r+=i.miscStats.bonusBreedXpGainFromTraining),e>0){var s=this.globalService.globalVar.modifiers.find(o=>"breedingGroundsSpecializationModifier"===o.text);null!=s&&(r*=1+e*s.value)}return r}getCircuitBreedGaugeIncrease(e){var i=0,r=this.globalService.globalVar.modifiers.find(a=>"circuitBreedGaugeIncrease"===a.text);return null!=r&&(i=r.value),null!=e.miscStats.bonusBreedXpGainFromCircuitRaces&&e.miscStats.bonusBreedXpGainFromCircuitRaces>0&&(i+=e.miscStats.bonusBreedXpGainFromCircuitRaces),i}getLocalBreedGaugeIncrease(e){var i=0,r=this.globalService.globalVar.modifiers.find(a=>"localBreedGaugeIncrease"===a.text);return null!=r&&(i=r.value),null!=e.miscStats.bonusBreedXpGainFromLocalRaces&&e.miscStats.bonusBreedXpGainFromLocalRaces>0&&(i+=e.miscStats.bonusBreedXpGainFromLocalRaces),i}getTotalRacersByRace(e){var i=2;return e.localRaceType===kt.Track?i=13:this.getResourceByName("Money Mark")>0&&(i+=1),i}getDiminishingReturnsThreshold(e){var i=null==e?20:e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalService.globalVar.modifiers.find(a=>"facilityLevelModifier"===a.text);return void 0!==r&&(i+=this.getFacilityLevel()*r.value),i}getBreedLevelPopover(e){var i=.2,r=this.globalService.globalVar.modifiers.find(a=>"breedLevelStatModifier"===a.text);return null!=r&&(i=r.value),"Increase racing stat gain from base stats by "+(i*(e-1)*100).toFixed(0)+"%"}getResourcePopover(e,i){return"Coins"===e?"Good ol classic Coins. Gain from most actions and buy most things with this.":"Medals"===e?"Rare currency gained from improving your circuit rank and winning certain special races.":"Renown"===e?"Increases Coins gained from races by "+this.getRenown()+"%. Increase total number of local races available per reset period by 1 for every 100 renown for a total of "+this.getTotalFreeRacesPerPeriod()+". Complete circuit or local races to get your name out there and raise your renown.":"Facility Level"===e?"Increase Diminishing Returns value by 5 for each level for a total of "+this.getDiminishingReturnsThreshold()+". You can increase a base stat up to your Diminishing Returns value before that base stat starts to increase your racing stats less and less.":"Research Level"===e?"Increase incubator trait values by "+this.getResourceByName(e)+"% and unlock new available traits.":"Apples"===e||"Bananas"===e||"Oranges"===e||"Strawberries"===e||"Turnips"===e||"Carrots"===e||"Mangoes"===e?this.globalService.getItemDescription(e):i===se.Specialty?this.getSpecialtyItemDescription(e):i===se.Equipment?this.globalService.getEquipmentDescription(e):""}getAllRaceCourseTypes(){var e=[];for(let i in $)isNaN(Number(i))&&e.push(i);return e}getAllBarnSpecializations(){var e=[];return e.push("Breeding Grounds"),e.push("Training Facility"),this.isItemUnlocked("attractionSpecialization")&&e.push("Attraction"),this.isItemUnlocked("researchCenterSpecialization")&&e.push("Research Center"),e}getTrackRaceRewards(e){var i=[];return e===Fn.novice?(i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Local Races"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Local Races"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Local Races")):e===Fn.intermediate?(i.push("- 200 Coins"),i.push("- +2 Bonus Breed XP Gain From Training"),i.push("- 1 Medal"),i.push("- +2 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- +5 Bonus Breed XP Gain From Circuit Races"),i.push("- 200 Coins"),i.push("- +2 Bonus Breed XP Gain From Training"),i.push("- 1 Medal"),i.push("- +2 Bonus Breed XP Gain From Local Races"),i.push("- +1% Training Time Reduction"),i.push("- +3 Diminishing Returns per Facility Level")):e===Fn.master&&(i.push("- +5 Bonus Breed XP Gain From Local Races"),i.push("- +2 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- 1000 Coins"),i.push("- +3 Bonus Breed XP Gain From Training"),i.push("- +2 Talents"),i.push("- +1% Training Time Reduction"),i.push("- 1000 Coins"),i.push("- Nothing Yet -- Coming Soon!"),i.push("- +3 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- +3 Talents")),i}isItemUnlocked(e){var i=!1,r=this.globalService.globalVar.unlockables.get(e);return null!=r&&(i=r),i}getAnimalsByRaceCourseType(e){var i=[];return"Flatland"===e?(i.push(q[q.Horse]),i.push(q[q.Cheetah]),i.push(q[q.Hare])):"Mountain"===e?(i.push(q[q.Monkey]),i.push(q[q.Goat]),i.push(q[q.Gecko])):"Ocean"===e?(i.push(q[q.Dolphin]),i.push(q[q.Shark]),i.push(q[q.Octopus])):"Tundra"===e?(i.push(q[q.Penguin]),i.push(q[q.Caribou])):"Volcanic"===e&&(i.push(q[q.Salamander]),i.push(q[q.Fox])),i}GetAbilityEffectiveAmount(e,i,r,a){if(null==e.ability||null==e.ability.name)return-1;null==i&&(i=1),null==r&&(r=1);var s=1;e.type===q.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.8),e.type===q.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.4);var o=e.ability;return null!=a&&(o=a),(o.efficiency+o.efficiency*(.01*(o.abilityLevel-1)))*(1+e.currentStats.powerMs*s*i*r/100)}getAnimalAbilityDescription(e,i,r){if(e){if("Second Wind"===i)return"Stamina does not go down for a short period";if("Inspiration"===i)return"Increase next racer's max speed on relay";if("Pacemaker"===i)return"Increase acceleration for a short period";if("Sprint"===i)return"Increase max speed, acceleration, stamina cost for a short period";if("Giving Chase"===i)return"Increase acceleration the further behind you are";if("On The Hunt"===i)return"Gain max speed after each burst";if("Awareness"===i)return"Increase adaptability, focus for a short period";if("Prey Instinct"===i)return"Start in extended burst mode";if("Nap"===i)return"Delay leg start, increase max speed and focus";if("Landslide"===i)return"Delay competitors";if("Frenzy"===i)return"Increase burst distance, cannot stumble or lose focus during burst";if("Leap"===i)return"Jump to the finish line";if("Echolocation"===i)return"Increase adaptability, ignore negative terrain effects for a short period";if("Navigator"===i)return"Increase previous and next racer's adaptability";if("Flowing Current"===i)return"Increase next racer's acceleration on relay";if("Apex Predator"===i)return"Slow competitors if they pass you";if("Feeding Frenzy"===i)return"Slow next and previous racers, increase max speed and acceleration for a distance";if("Blood In The Water"===i)return"Increase max speed when ahead of competitors";if("Propulsion"===i)return"Dash a short distance";if("Buried Treasure"===i)return"Delay your start, increase coin gain for winning race";if("Big Brain"===i)return"Increase power of other racers after bursting a certain number of times";if("Sure-footed"===i)return"Increase adaptability after not stumbling through path";if("Deep Breathing"===i)return"Regain stamina after burst, increase other racers' stamina";if("In The Rhythm"===i)return"Increase burst speed bonus";if("Sticky"===i)return"Cannot stumble for a short period";if("Night Vision"===i)return"Increase max speed by keeping focused";if("Camouflage"===i)return"Transfer velocity to next racer on relay";if("Herd Mentality"===i)return"Grant next racer portion of your stamina, they start in burst mode";if("Great Migration"===i)return"Sacrifice stamina for acceleration for a short period";if("Special Delivery"===i)return"Increase other racers' burst max speed bonus based on stamina";if("Careful Toboggan"===i)return"Increase adaptability for a short period";if("Wild Toboggan"===i)return"Increase max drift penalty, acceleration based on drift";if("Quick Toboggan"===i)return"Increase max speed if you do not drift";if("Cold Blooded"===i)return"Increase stamina and focus for a short period based on distance in leg";if("Burrow"===i)return"Avoid lava fall, prevent stumbles for a short period";if("Heat Up"===i)return"Increase acceleration for a short period, gets stronger every use";if("Trickster"===i)return"Decrease one random stat, increase a different random stat for a short period";if("Fleeting Speed"===i)return"Increase max speed greatly, lose over time";if("Nine Tails"===i)return"Increase random stat for a short period, effect can stack"}else{var a="",s=void 0;if(null==r&&this.globalService.globalVar.animals.forEach(u=>{u.availableAbilities.forEach(d=>{d.name===i&&(r=u,s=d,null!=d.cooldown&&(a=d.cooldown.toString()))})}),null!=r){var o=this.GetAbilityEffectiveAmount(r,void 0,void 0,s).toFixed(2);""===a&&null!=r.ability.cooldown&&(a=r.ability.cooldown.toString());var l="";return"Second Wind"===i?"Stamina does not go down for <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Inspiration"===i?"When the next racer starts, they gain 25% of your Max Speed for <span class='keyword'>"+o+"</span> meters. Passive.":"Pacemaker"===i?"Increase acceleration by 25% for <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Sprint"===i?" Gain 25% Max Speed and 10% Acceleration for <span class='keyword'>"+o+"</span> meters, but lose twice as much stamina as normal. "+a+" second cooldown.":"Giving Chase"===i?"Acceleration increases by <span class='keyword'>"+o+"</span>% for every second behind the average pace per second. Passive.":"On The Hunt"===i?"Every time you Burst, increase your max speed by <span class='keyword'>"+o+"</span>%. Passive.":"Awareness"===i?"Boosts focus and adaptability by 25% for <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Prey Instinct"===i?"Starts its leg in burst mode that continues for an additional <span class='keyword'>"+o+"</span> meters. Passive.":"Nap"===i?"Sleep until the competition has traveled a distance equal to <span class='keyword'>"+o+"</span> meters from the end of your leg. Acceleration and focus are then doubled. Passive.":"Landslide"===i?"Drop rocks on competitors, delaying them <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Frenzy"===i?"Increase burst distance by <span class='keyword'>"+o+"</span> meters. You do not stumble or lose focus while bursting. Passive.":"Leap"===i?"When you are <span class='keyword'>"+o+"</span> meters from the finish line, leap straight to the end over .5 seconds. Passive.":"Sure-footed"===i?"When you make it through a special path without stumbling, increase your adaptability by <span class='keyword'>"+o+"</span>%. Passive.":"Deep Breathing"===i?"Every time you burst, regain <span class='keyword'>"+o+"</span>% of your stamina, up to 100%. If this amount exceeds 100% of your stamina, increase all other racers' stamina by the amount exceeded. Passive.":"In The Rhythm"===i?"Increase your max speed bonus while bursting by <span class='keyword'>"+o+"</span>%. Passive.":"Sticky"===i?"Cannot stumble for <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Night Vision"===i?"Increase Max Speed by <span class='keyword'>"+o+"</span>% for every path you complete without losing focus. If you lose focus, reset this bonus back to 0%. Passive.":"Camouflage"===i?"The speed you finish your leg at is given to your following racer on Relay. Decrease this amount to 0 evenly over <span class='keyword'>"+o+"</span> meters. The following racer can break their max speed by up to 50% while this is active. Passive.":"Echolocation"===i?"Increase your adaptability by 50% for <span class='keyword'>"+o+"</span> meters and ignore any negative effects from the terrain. "+a+" second cooldown.":"Navigator"===i?"Assist the previous racer and next racer, boosting their adaptability by 25% of your max for the last and first <span class='keyword'>"+o+"</span> meters of their legs respectively. Passive.":"Flowing Current"===i?"When relaying, increase the acceleration of your next racer by 25% of your acceleration for <span class='keyword'>"+o+"</span> meters. Passive.":"Apex Predator"===i?"If the competitors moving at the average pace pass the shark during its leg, immediately bite them, slowing their pace by 50% for <span class='keyword'>"+o+"</span> meters. Can only occur once. Passive.":"Feeding Frenzy"===i?"Increase Max Speed and Acceleration by 50% for the first and last <span class='keyword'>"+o+"</span> meters of your leg. Your next and previous racers have a 10% Max Speed reduction. Passive.":"Blood In The Water"===i?"While you are ahead of the average pace, increase max speed by <span class='keyword'>"+o+"</span>%. Passive.":"Propulsion"===i?"Dash <span class='keyword'>"+o+"</span> meters over .25 seconds. "+a+" second cooldown.":"Buried Treasure"===i?"Delay your start by 8 seconds. If you still win the race, increase your Coin reward by <span class='keyword'>"+o+"</span>%. Passive.":"Big Brain"===i?"After Bursting through one third of your race paths, increase Power of all remaining racers by <span class='keyword'>"+o+"</span>%. Passive.":"Herd Mentality"===i?"After completing your leg, <span class='keyword'>"+o+"</span>% of your remaining stamina is given to the next racer and they start their leg in burst mode. This does not occur if you run out of stamina during your leg. Passive.":"Great Migration"===i?"Reduce stamina by 10%. For <span class='keyword'>"+o+"</span> meters, acceleration is increased by 25% of the amount of stamina lost. "+a+" second cooldown.":"Special Delivery"===i?"Increase all remaining racers\u2019 burst max speed bonus by <span class='keyword'>"+o+"</span>% of your remaining stamina percentage after completing your leg. This does not occur if you run out of stamina during your leg. Passive.":"Careful Toboggan"===i?"Increase adaptability by 40% for <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Wild Toboggan"===i?"Double the maximum amount of drift per path. Increase acceleration by up to <span class='keyword'>"+o+"</span>% based on how much you drift. Passive.":"Quick Toboggan"===i?"Every time you make it through a path without drifting, gain <span class='keyword'>"+o+"</span>% max speed. Passive.":"Cold Blooded"===i?"Increase stamina and focus by 0-50% depending on how close to the center of the volcano you are. Focus boost lasts <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Burrow"===i?"Go underground for <span class='keyword'>"+o+"</span> meters, dodging lava fall and preventing stumbles. "+a+" second cooldown.":"Heat Up"===i?"Increase Acceleration by 15% for <span class='keyword'>"+o+"</span> meters. This increase doubles every subsequent use this race. "+a+" second cooldown.":"Trickster"===i?"When active, sacrifice 20% of one random stat for 40% of another random stat. Lasts <span class='keyword'>"+o+"</span> meters. "+a+" second cooldown.":"Fleeting Speed"===i?"Increase Max Speed by <span class='keyword'>"+o+"</span>%. Decrease this bonus by 2% for every percent of the leg you complete. Passive.":"Nine Tails"===i?"At the start of each path, increase either Acceleration, Max Speed, Focus, or Adaptability by 10% for <span class='keyword'>"+o+"</span> meters. This effect can stack. Passive.":(null===(l=this.sanitizer.sanitize(Qt.HTML,this.sanitizer.bypassSecurityTrustHtml(l)))&&(l=""),l)}}return""}getBarnByBarnNumber(e){return this.globalService.globalVar.barns.find(i=>i.barnNumber===e)}getAvailableBarns(){var e=[];return e.push(this.getBarnByBarnNumber(1)),e.push(this.getBarnByBarnNumber(2)),e.push(this.getBarnByBarnNumber(3)),this.isItemUnlocked("barnRow2")&&(e.push(this.getBarnByBarnNumber(4)),e.push(this.getBarnByBarnNumber(5)),e.push(this.getBarnByBarnNumber(6))),this.isItemUnlocked("barnRow3")&&(e.push(this.getBarnByBarnNumber(7)),e.push(this.getBarnByBarnNumber(8)),e.push(this.getBarnByBarnNumber(9))),this.isItemUnlocked("barnRow4")&&(e.push(this.getBarnByBarnNumber(10)),e.push(this.getBarnByBarnNumber(11)),e.push(this.getBarnByBarnNumber(12))),this.isItemUnlocked("barnRow5")&&(e.push(this.getBarnByBarnNumber(13)),e.push(this.getBarnByBarnNumber(14)),e.push(this.getBarnByBarnNumber(15))),e}getResourcesForBarnUpgrade(e){var i=[],r=new _e("Coins",100);if(r.amount*=e+1,i.push(r),e%10==9){var a=new _e("Medals",1);i.push(a)}return i}getBarnName(e){var i="",r=e.getSize();return(e.barnUpgrades.specialization===rn.None||null==e.barnUpgrades.specialization)&&(i=r+" Barn "+e.barnNumber),e.barnUpgrades.specialization===rn.Attraction&&(i=r+" Attraction "+e.barnNumber),e.barnUpgrades.specialization===rn.BreedingGrounds&&(i=r+" Breeding Grounds "+e.barnNumber),e.barnUpgrades.specialization===rn.TrainingFacility&&(i=r+" Training Facility "+e.barnNumber),e.barnUpgrades.specialization===rn.ResearchCenter&&(i=r+" Research Center "+e.barnNumber),i}getTerrainPopoverText(e,i){var r="The terrain for the "+i.getCourseTypeName()+" leg is "+e.getTerrainType()+":\n";return null!=e.staminaModifier&&1!==e.staminaModifier&&(r+=e.staminaModifier>1?"+"+(100*(e.staminaModifier-1)).toFixed(0)+"% stamina loss\n":"-"+(100*(1-e.staminaModifier)).toFixed(0)+"% stamina loss\n"),null!=e.maxSpeedModifier&&1!==e.maxSpeedModifier&&(r+=e.maxSpeedModifier>1?"+"+(100*(e.maxSpeedModifier-1)).toFixed(0)+"% max speed\n":"-"+(100*(1-e.maxSpeedModifier)).toFixed(0)+"% max speed\n"),null!=e.accelerationModifier&&1!==e.accelerationModifier&&(r+=e.accelerationModifier>1?"+"+(100*(e.accelerationModifier-1)).toFixed(0)+"% acceleration\n":"-"+(100*(1-e.accelerationModifier)).toFixed(0)+"% acceleration\n"),null!=e.powerModifier&&1!==e.powerModifier&&(r+=e.powerModifier>1?"+"+(100*(e.powerModifier-1)).toFixed(0)+"% power efficiency\n":"-"+(100*(1-e.powerModifier)).toFixed(0)+"% power efficiency\n"),null!=e.focusModifier&&1!==e.focusModifier&&(r+=e.focusModifier>1?"+"+(100*(e.focusModifier-1)).toFixed(0)+"% meters before losing focus\n":"-"+(100*(1-e.focusModifier)).toFixed(0)+"% meters before losing focus\n"),null!=e.adaptabilityModifier&&1!==e.adaptabilityModifier&&(r+=e.adaptabilityModifier>1?"+"+(100*(e.adaptabilityModifier-1)).toFixed(0)+"% meters before stumbling\n":"-"+(100*(1-e.adaptabilityModifier)).toFixed(0)+"% meters before stumbling\n"),r}getInDepthSpecializationDescription(e){var i="";if("Breeding Grounds"===e){var r=0,a=this.globalService.globalVar.modifiers.find(y=>"trainingBreedGaugeIncrease"===y.text);null!=a&&(r=a.value),i="For every 10 levels, gain "+r+"% additional breed XP when completing a training."}else if("Training Facility"===e)i="For every 10 levels up to level 200, gain 1% training time reduction. For every 10 levels after level 200, gain a .1 stat multiplier for every stat.";else if("Attraction"===e){var s=60,o=this.globalService.globalVar.modifiers.find(y=>"attractionTimeToCollectModifier"===y.text);null!=o&&(s=o.value);var l=0,c=this.globalService.globalVar.modifiers.find(y=>"attractionAmountModifier"===y.text);null!=c&&(l=c.value),i="For every 10 levels, gain "+l+" Coins every "+s+" seconds while an animal trains in this barn."}else if("Research Center"===e){var u=this.globalService.globalVar.modifiers.find(y=>"researchCenterIncrementsModifier"===y.text),d=this.globalService.globalVar.modifiers.find(y=>"researchCenterTrainingAnimalModifier"===y.text),h=this.globalService.globalVar.modifiers.find(y=>"researchCenterStudyingAnimalModifier"===y.text),f=this.globalService.globalVar.modifiers.find(y=>"researchCenterMaxStatGainModifier"===y.text),v=.05,_=.45,D=.25,w=.5;null!=u&&(v=u.value),null!=d&&(_=d.value),null!=h&&(D=h.value),null!=f&&(w=f.value),i="To start, the animal training only gains "+100*(_+v)+"% of the stats from their training. An animal at random will gain "+100*D+"% of the stats from training, prioritizing animals of the same course type. For every 10 levels, "+100*v+"% additional stat gain will be distributed up to "+100*w+"% starting with the training animal. Additional animals will gain stats after maxing out the previous."}return i}convertSpecializationNameToEnum(e){return"Breeding Grounds"===e?rn.BreedingGrounds:"Training Facility"===e?rn.TrainingFacility:"Attraction"===e?rn.Attraction:"Research Center"===e?rn.ResearchCenter:rn.None}convertTalentTreeNameToEnum(e){return"Sprint"===e?ji.sprint:"Support"===e?ji.support:"Long Distance"===e?ji.longDistance:ji.none}convertSpecializationEnumToName(e){return e===rn.BreedingGrounds?"Breeding Grounds":e===rn.TrainingFacility?"Training Facility":e===rn.Attraction?"Attraction":e===rn.ResearchCenter?"Research Center":"None"}getTrainingTimeReductionFromTrainingFacility(e){return e.specialization===rn.TrainingFacility?.01*e.specializationLevel:0}getTrainingProgressionAnimationText(e){var i="";return e.affectedStatRatios.topSpeed>0&&(i+="+SPD\n"),e.affectedStatRatios.acceleration>0&&(i+="+ACC\n"),e.affectedStatRatios.endurance>0&&(i+="+END\n"),e.affectedStatRatios.power>0&&(i+="+PWR\n"),e.affectedStatRatios.focus>0&&(i+="+FCS\n"),e.affectedStatRatios.adaptability>0&&(i+="+ADP\n"),i}canAnimalTrain(e){}getTraitStatGainDescription(e){var i="",r="";return e.positiveStatGain===fe.acceleration&&(i="Acceleration"),e.positiveStatGain===fe.adaptability&&(i="Adaptability"),e.positiveStatGain===fe.endurance&&(i="Endurance"),e.positiveStatGain===fe.focus&&(i="Focus"),e.positiveStatGain===fe.power&&(i="Power"),e.positiveStatGain===fe.topSpeed&&(i="Speed"),e.negativeStatGain===fe.acceleration&&(r="Acceleration"),e.negativeStatGain===fe.adaptability&&(r="Adaptability"),e.negativeStatGain===fe.endurance&&(r="Endurance"),e.negativeStatGain===fe.focus&&(r="Focus"),e.negativeStatGain===fe.power&&(r="Power"),e.negativeStatGain===fe.topSpeed&&(r="Speed"),"+"+e.researchLevel+"% "+i+", -"+e.researchLevel+"% "+r}getSpecialtyItemDescription(e){var i="",r=5,a=this.globalService.globalVar.modifiers.find(c=>"internationalRacesToMedalModifier"===c.text);null!=a&&(r=a.value);var s=10,o=this.globalService.globalVar.modifiers.find(c=>"nationalRacesToMedalModifier"===c.text);null!=o&&(s=o.value),"Stopwatch"===e?i="Reduce training time by 5%":"Animal Handler"===e?i="Retain 2% of trained stats after breeding":"Course Maps"===e?i="Increase your chance to burst during special routes by 10%":"Stockbreeder"===e?i="Add option to auto breed when Breed XP is full":"Scouts"===e?i="You can choose the order of race legs for each animal deck":"Money Mark"===e?i="Add new indicator to race, beat its time to gain increased coins":"National Races"===e?i="Gain 1 medal for every "+s+" free races you complete":"International Races"===e?i="Gain 1 medal for every "+r+" free races you complete":"Team Manager"===e?i="Add option to automatically run 1 free race per reset period <em>(runs for 1 hour of idle time)</em>":"Incubator Upgrade Lv1"===e?i="When breeding, permanently increase racing stat gain from base stat by .1% of positive trait value <em>(up to 1%)</em>":"Incubator Upgrade Lv2"===e?i="When breeding, permanently increase racing stat gain from base stat by .1% of positive trait value <em>(up to 2.5%)</em>":"Incubator Upgrade Lv3"===e?i="When breeding, permanently increase racing stat gain from base stat by .1% of positive trait value <em>(up to 5%)</em>":"Incubator Upgrade Lv4"===e&&(i="When breeding, permanently increase racing stat gain from base stat by .1% of positive trait value <em>(up to 10%)</em>");var l=this.sanitizer.sanitize(Qt.HTML,this.sanitizer.bypassSecurityTrustHtml(i));return null!==l&&(i=l),i}topSpeedPopover(e){var i=e.currentStats.defaultMaxSpeedModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultMaxSpeedModifier");null!=a&&(i=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,fe.topSpeed),c="Every stat point increases max speed by "+this.getMaxSpeedModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return s>1&&(c+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.maxSpeedModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.maxSpeedModifier.toFixed(3)+"\n"),c}accelerationPopover(e){var i=e.currentStats.defaultAccelerationModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultAccelerationModifier");null!=a&&(i=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,fe.acceleration),c="Every stat point increases acceleration by "+this.getAccelerationModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return s>1&&(c+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.accelerationModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.accelerationModifier.toFixed(3)+"\n"),c}endurancePopover(e){var i=e.currentStats.defaultStaminaModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultStaminaModifier");null!=a&&(i=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,fe.endurance),c="Every stat point increases stamina by "+this.getStaminaModifierByAnimalType(e.type).toFixed(3)+" up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return s>1&&(c+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.staminaModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.staminaModifier.toFixed(3)+"\n"),c}powerPopover(e){var i=e.currentStats.defaultPowerModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultPowerModifier");null!=a&&(i=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,fe.power),c="Every stat point increases ability efficiency by "+this.getPowerModifierByAnimalType(e.type).toFixed(3)+"% up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return s>1&&(c+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.powerModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.powerModifier.toFixed(3)+"\n"),c}focusPopover(e){var i=e.currentStats.defaultFocusModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultFocusModifier");null!=a&&(i=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,fe.focus),c="Every stat point increases focus distance by "+this.getFocusModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return s>1&&(c+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.focusModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.focusModifier.toFixed(3)+"\n"),c}adaptabilityPopover(e){var i=e.currentStats.defaultAdaptabilityModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(u=>u.text===r+"DefaultAdaptabilityModifier");null!=a&&(i=a.value);var s=.02,o=this.globalService.globalVar.modifiers.find(u=>"breedLevelStatModifier"===u.text);null!=o&&(s=o.value),s=1+s*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,fe.adaptability),c="Every stat point increases adaptability distance by "+this.getAdaptabilityModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return s>1&&(c+="Breed Modifier: *"+s.toFixed(2)+"\n"),1!==l&&(c+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.adaptabilityModifier>1&&(c+="Incubator Upgrade: *"+e.incubatorStatUpgrades.adaptabilityModifier.toFixed(3)+"\n"),c}abilityPopover(){var e=25,i=this.globalService.globalVar.modifiers.find(a=>"abilityLevelCapModifier"===a.text);return null!=i&&(e=i.value),"Select from up to three different abilities by clicking on their names here. Using your ability during a race will award your ability XP which increases its effectiveness. Ability level cannot exceed your animal's breed level + "+e+"."}abilityLevelPopover(e){var i="Base Efficiency: "+e.ability.efficiency+"\n";return e.ability.abilityLevel>1&&(i+="Level Efficiency Multiplier: "+(1+.01*(e.ability.abilityLevel-1))),i}getRandomTip(){var e="",i=[];return this.globalService.globalVar.settings.get("hideTips")||(i.push("After upgrading training options, reselect them to gain their benefits!"),i.push("Don't forget to export your save regularly!"),i.push("Have to recite the alphabet to figure out what your next circuit rank is? You're not alone, go to the settings to use numbers instead!"),i.push("Small barns allow training for 2 hours, medium for 4 hours, and large for 8 hours. Your animals will train even when the game is not active."),e=i[this.utilityService.getRandomInteger(0,i.length-1)]),e}getTotalFreeRacesPerPeriod(){var e=10,i=this.globalService.globalVar.modifiers.find(s=>"freeRacesPerTimePeriodModifier"===s.text);void 0!==i&&(e=i.value);var r=this.getRenown();return e+Math.floor(r/100)}getRemainingFreeRacesPerPeriod(){return this.getTotalFreeRacesPerPeriod()-this.globalService.globalVar.freeRaceCounter}isEquipmentItemAnOrb(e){return"Amethyst Orb"===e||"Sapphire Orb"===e||"Amber Orb"===e||"Topaz Orb"===e||"Emerald Orb"===e||"Ruby Orb"===e}getTalentTreeNames(){var e=[];return e.push("Sprint"),e.push("Support"),e.push("Long Distance"),e}getInDepthTalentTreeDescription(e){var i="";return"Sprint"===e?i="Sprinters excel at going short distances quickly. Whether it's through chaining together quick Bursts or powerful abilities, these racers will leave others in the dust at the starting line. Recommended for when you want to get the most out of Burst effects and high acceleration.":"Support"===e?i="Supporters excel when working alongside other animals. They have a special way of encouraging the racers after and sometimes before them to reach new limits. Recommended for when you want to get the most out of Relay effects.":"Long Distance"===e&&(i="Long Distance Racers excel when given time to ramp up and go the distance. These racers manage their stamina well and can reach incredible speeds over time. Recommended for racers with high max speed and that have abilities that improve over time."),i}getTalentDescription(e,i,r,a){var s="";return null==a&&(a=1),r===ji.sprint&&(0===e&&0===i&&(s="Increase Adaptability stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(s="Increase Adaptability Distance by <span class='keyword'>"+5*a+"</span>% until you lose focus for the first time."),2===e&&0===i&&(s="Increase Adaptability Distance gain from Adaptability stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(s="Every time you make it through a special path without stumbling, enter a Burst that lasts <span class='keyword'>"+5*a+"</span>% as long as normal."),0===e&&1===i&&(s="Increase Acceleration stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(s="If velocity exceeds Max Speed while bursting, increase remaining burst distance by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===i&&(s="Increase Acceleration Rate gain from Acceleration stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(s="**Every second you are at or beyond max speed, increase Adaptability Distance by <span class='keyword'>"+a+"</span>% for the rest of the race.**"),0===e&&2===i&&(s="Increase Power stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(s="Increase Power Efficiency by <span class='keyword'>"+5*a+"</span>%, but consume stamina <span class='keyword'>"+5*a+"</span>% faster."),2===e&&2===i&&(s="Increase Power Efficiency gain from Power stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(s="The first time you use an ability every race, the efficiency is increased by <span class='keyword'>"+5*a+"</span>%.")),r===ji.support&&(0===e&&0===i&&(s="Increase Relay Animal's Adaptability Distance by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(s="The racer prior to you gains <span class='keyword'>"+3*a+"</span>% of any relay effects you provide."),2===e&&0===i&&(s="Increase Relay Animal's Max Speed by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(s="Increase the effectiveness of your Relay effects by <span class='keyword'>"+2*a+"</span>%."),0===e&&1===i&&(s="Increase Relay Animal's Acceleration Rate by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(s="Increase Burst Distance of next racer by <span class='keyword'>"+5*a+"</span>% of your Burst Distance on Relay."),2===e&&1===i&&(s="Increase Relay Animal's Stamina by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(s="Increase Burst Chance of next racer by <span class='keyword'>"+3*a+"</span>% of your Burst Chance on Relay."),0===e&&2===i&&(s="Increase Relay Animal's Power Efficiency by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(s="For the first <span class='keyword'>"+a+"</span>% of your Relay Animal's leg, double their Relay effects."),2===e&&2===i&&(s="Increase Relay Animal's Focus Distance by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(s="Increase Relay Animal's Ability Efficiency by <span class='keyword'>"+2*a+"</span>%.")),r===ji.longDistance&&(0===e&&0===i&&(s="Increase Focus stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(s="Every burst increases Burst Velocity Bonus by <span class='keyword'>"+.5*a+"</span>%."),2===e&&0===i&&(s="Increase Focus Distance gain from Focus stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(s="Instead of reducing velocity to 10% when losing focus, reduce to <span class='keyword'>10"+2*a+"</span>%."),0===e&&1===i&&(s="Increase Max Speed stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(s="While your velocity is 25% of your Max Speed or below, increase your Acceleration Rate by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===i&&(s="Increase Max Speed gain from Speed stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(s="After surpassing <span class='keyword'>"+.5*a+"</span>% of your Max Speed, your velocity can no longer drop below it. All calculations consider this to be 0% of your velocity."),0===e&&2===i&&(s="Increase Endurance stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(s="While stamina is below 35%, reduce stamina consumption by <span class='keyword'>"+5*a+"</span>%."),2===e&&2===i&&(s="Increase Stamina gain from Endurance stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(s="When stamina drops below 50% for the first time, increase the race time by <span class='keyword'>"+a+"</span>% (maximum of 1 minute).")),s}getTotalPossiblePointsByRowColumn(e,i,r){var a=0;return r===ji.sprint&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),r===ji.support&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),r===ji.longDistance&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),a}getTalentPointsAvailableToAnimal(e){var i=0;return i=this.getResourceByName("Talent Points"),i+=e.miscStats.bonusTalents,(i-=e.talentTree.getTotalSpentPoints())<=0&&(i=0),i}}return t.\u0275fac=function(e){return new(e||t)(Pe(bt),Pe(Sa),Pe(bc))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),zi=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.totalTime=0,this.gameUpdateEvent=new je}Update(){var e=Date.now();const i=(e-this.globalService.globalVar.lastTimeStamp)/1e3;this.deltaTime=i,this.totalTime+=i;var r=performance.now();r-this.lastPerformanceNow>70&&console.log(`Call to Game Loop took ${r-this.lastPerformanceNow} milliseconds at ${this.totalTime}.`),this.globalService.globalVar.lastTimeStamp=e,this.gameUpdateEvent.emit(i),this.lastPerformanceNow=r,window.requestAnimationFrame(()=>this.Update())}}return t.\u0275fac=function(e){return new(e||t)(Pe(bt),Pe(Sn))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class sl{constructor(n,e){this.transformationType=n,this.options=e,this.recursionStack=new Set}transform(n,e,i,r,a,s=0){if(Array.isArray(e)||e instanceof Set){const o=r&&this.transformationType===Rt.PLAIN_TO_CLASS?function PB(t){const n=new t;return n instanceof Set||"push"in n?n:[]}(r):[];return e.forEach((l,c)=>{const u=n?n[c]:void 0;if(this.options.enableCircularCheck&&this.isCircular(l))this.transformationType===Rt.CLASS_TO_CLASS&&(o instanceof Set?o.add(l):o.push(l));else{let d;if("function"!=typeof i&&i&&i.options&&i.options.discriminator&&i.options.discriminator.property&&i.options.discriminator.subTypes){if(this.transformationType===Rt.PLAIN_TO_CLASS){d=i.options.discriminator.subTypes.find(_=>_.name===l[i.options.discriminator.property]);const v=i.typeFunction({newObject:o,object:l,property:void 0});d=void 0===d?v:d.value,i.options.keepDiscriminatorProperty||delete l[i.options.discriminator.property]}this.transformationType===Rt.CLASS_TO_CLASS&&(d=l.constructor),this.transformationType===Rt.CLASS_TO_PLAIN&&(l[i.options.discriminator.property]=i.options.discriminator.subTypes.find(f=>f.value===l.constructor).name)}else d=i;const h=this.transform(u,l,d,void 0,l instanceof Map,s+1);o instanceof Set?o.add(h):o.push(h)}}),o}if(i===String&&!a)return null==e?e:String(e);if(i===Number&&!a)return null==e?e:Number(e);if(i===Boolean&&!a)return null==e?e:Boolean(e);if((i===Date||e instanceof Date)&&!a)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(function AB(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}().Buffer&&(i===Buffer||e instanceof Buffer)&&!a)return null==e?e:Buffer.from(e);if(function EB(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}(e)&&!a)return new Promise((o,l)=>{e.then(c=>o(this.transform(void 0,c,i,void 0,void 0,s+1)),l)});if(!a&&null!==e&&"object"==typeof e&&"function"==typeof e.then)return e;if("object"==typeof e&&null!==e){!i&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(i=e.constructor)),!i&&n&&(i=n.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);const o=this.getKeys(i,e,a);let l=n||{};!n&&(this.transformationType===Rt.PLAIN_TO_CLASS||this.transformationType===Rt.CLASS_TO_CLASS)&&(l=a?new Map:i?new i:{});for(const c of o){if("__proto__"===c||"constructor"===c)continue;const u=c;let f,d=c,h=c;if(!this.options.ignoreDecorators&&i)if(this.transformationType===Rt.PLAIN_TO_CLASS){const y=Gi.findExposeMetadataByCustomName(i,c);y&&(h=y.propertyName,d=y.propertyName)}else if(this.transformationType===Rt.CLASS_TO_PLAIN||this.transformationType===Rt.CLASS_TO_CLASS){const y=Gi.findExposeMetadata(i,c);y&&y.options&&y.options.name&&(d=y.options.name)}f=this.transformationType===Rt.PLAIN_TO_CLASS?e[u]:e instanceof Map?e.get(u):e[u]instanceof Function?e[u]():e[u];let v,_=f instanceof Map;if(i&&a)v=i;else if(i){const y=Gi.findTypeMetadata(i,h);if(y){const P={newObject:l,object:e,property:h},U=y.typeFunction?y.typeFunction(P):y.reflectedType;y.options&&y.options.discriminator&&y.options.discriminator.property&&y.options.discriminator.subTypes?e[u]instanceof Array?v=y:(this.transformationType===Rt.PLAIN_TO_CLASS&&(v=y.options.discriminator.subTypes.find(Q=>{if(f&&f instanceof Object&&y.options.discriminator.property in f)return Q.name===f[y.options.discriminator.property]}),v=void 0===v?U:v.value,y.options.keepDiscriminatorProperty||f&&f instanceof Object&&y.options.discriminator.property in f&&delete f[y.options.discriminator.property]),this.transformationType===Rt.CLASS_TO_CLASS&&(v=f.constructor),this.transformationType===Rt.CLASS_TO_PLAIN&&f&&(f[y.options.discriminator.property]=y.options.discriminator.subTypes.find(Q=>Q.value===f.constructor).name)):v=U,_=_||y.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(P=>P.target===i&&!!P.properties[h]).forEach(P=>v=P.properties[h]);else if(this.options.enableImplicitConversion&&this.transformationType===Rt.PLAIN_TO_CLASS){const P=Reflect.getMetadata("design:type",i.prototype,h);P&&(v=P)}}const D=Array.isArray(e[u])?this.getReflectedType(i,h):void 0,w=n?n[u]:void 0;if(l.constructor.prototype){const y=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if((this.transformationType===Rt.PLAIN_TO_CLASS||this.transformationType===Rt.CLASS_TO_CLASS)&&(y&&!y.set||l[d]instanceof Function))continue}if(this.options.enableCircularCheck&&this.isCircular(f)){if(this.transformationType===Rt.CLASS_TO_CLASS){let y=f;y=this.applyCustomTransformations(y,i,c,e,this.transformationType),(void 0!==y||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,y):l[d]=y)}}else{const y=this.transformationType===Rt.PLAIN_TO_CLASS?d:c;let P;this.transformationType===Rt.CLASS_TO_PLAIN?(P=e[y],P=this.applyCustomTransformations(P,i,y,e,this.transformationType),P=e[y]===P?f:P,P=this.transform(w,P,v,D,_,s+1)):void 0===f&&this.options.exposeDefaultValues?P=l[d]:(P=this.transform(w,f,v,D,_,s+1),P=this.applyCustomTransformations(P,i,y,e,this.transformationType)),(void 0!==P||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,P):l[d]=P)}}return this.options.enableCircularCheck&&this.recursionStack.delete(e),l}return e}applyCustomTransformations(n,e,i,r,a){let s=Gi.findTransformMetadatas(e,i,this.transformationType);return void 0!==this.options.version&&(s=s.filter(o=>!o.options||this.checkVersion(o.options.since,o.options.until))),s=s.filter(this.options.groups&&this.options.groups.length?o=>!o.options||this.checkGroups(o.options.groups):o=>!o.options||!o.options.groups||!o.options.groups.length),s.forEach(o=>{n=o.transformFn({value:n,key:i,obj:r,type:a,options:this.options})}),n}isCircular(n){return this.recursionStack.has(n)}getReflectedType(n,e){if(!n)return;const i=Gi.findTypeMetadata(n,e);return i?i.reflectedType:void 0}getKeys(n,e,i){let r=Gi.getStrategy(n);"none"===r&&(r=this.options.strategy||"exposeAll");let a=[];if(("exposeAll"===r||i)&&(a=e instanceof Map?Array.from(e.keys()):Object.keys(e)),i)return a;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&n&&(a=[...Gi.getExposedProperties(n,this.transformationType),...Gi.getExcludedProperties(n,this.transformationType)]),!this.options.ignoreDecorators&&n){let s=Gi.getExposedProperties(n,this.transformationType);this.transformationType===Rt.PLAIN_TO_CLASS&&(s=s.map(l=>{const c=Gi.findExposeMetadata(n,l);return c&&c.options&&c.options.name?c.options.name:l})),a=this.options.excludeExtraneousValues?s:a.concat(s);const o=Gi.getExcludedProperties(n,this.transformationType);o.length>0&&(a=a.filter(l=>!o.includes(l))),void 0!==this.options.version&&(a=a.filter(l=>{const c=Gi.findExposeMetadata(n,l);return!c||!c.options||this.checkVersion(c.options.since,c.options.until)})),a=a.filter(this.options.groups&&this.options.groups.length?l=>{const c=Gi.findExposeMetadata(n,l);return!c||!c.options||this.checkGroups(c.options.groups)}:l=>{const c=Gi.findExposeMetadata(n,l);return!(c&&c.options&&c.options.groups&&c.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter(s=>this.options.excludePrefixes.every(o=>s.substr(0,o.length)!==o))),a=a.filter((s,o,l)=>l.indexOf(s)===o),a}checkVersion(n,e){let i=!0;return i&&n&&(i=this.options.version>=n),i&&e&&(i=this.options.version<e),i}checkGroups(n){return!n||this.options.groups.some(e=>n.includes(e))}}const ol={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},Kr=new class IB{instanceToPlain(n,e){return new sl(Rt.CLASS_TO_PLAIN,vr(vr({},ol),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToPlainFromExist(n,e,i){return new sl(Rt.CLASS_TO_PLAIN,vr(vr({},ol),i)).transform(e,n,void 0,void 0,void 0,void 0)}plainToInstance(n,e,i){return new sl(Rt.PLAIN_TO_CLASS,vr(vr({},ol),i)).transform(void 0,e,n,void 0,void 0,void 0)}plainToClassFromExist(n,e,i){return new sl(Rt.PLAIN_TO_CLASS,vr(vr({},ol),i)).transform(n,e,void 0,void 0,void 0,void 0)}instanceToInstance(n,e){return new sl(Rt.CLASS_TO_CLASS,vr(vr({},ol),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToClassFromExist(n,e,i){return new sl(Rt.CLASS_TO_CLASS,vr(vr({},ol),i)).transform(e,n,void 0,void 0,void 0,void 0)}serialize(n,e){return JSON.stringify(this.instanceToPlain(n,e))}deserialize(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}deserializeArray(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}};function NT(t,n,e){return Kr.plainToInstance(t,n,e)}let OT=(()=>{class t{constructor(e,i,r){this.globalService=e,this.utilityService=i,this.lookupService=r}getSpecializationPopoverText(e,i){if(e===rn.Attraction){var r=60,a=this.globalService.globalVar.modifiers.find(w=>"attractionTimeToCollectModifier"===w.text);null!=a&&(r=a.value);var s=0,o=this.globalService.globalVar.modifiers.find(w=>"attractionAmountModifier"===w.text);return null!=o&&(s=o.value*i),"Amount Earned: "+s+" Coins / "+r+" seconds\n"}if(e===rn.ResearchCenter){var l=this.globalService.globalVar.modifiers.find(w=>"researchCenterIncrementsModifier"===w.text),c=this.globalService.globalVar.modifiers.find(w=>"researchCenterTrainingAnimalModifier"===w.text),u=this.globalService.globalVar.modifiers.find(w=>"researchCenterStudyingAnimalModifier"===w.text),d=this.globalService.globalVar.modifiers.find(w=>"researchCenterMaxStatGainModifier"===w.text);if(null==l||null==c||null==u||null==d)return"";var h=i*l.value,v="Training Animal Stat Gain: "+(100*(c.value+h<d.value?c.value+h:d.value)).toFixed(0)+"%\n",_=(h-(d.value-c.value))/(d.value-u.value);return _>0?(Math.floor(_)>0&&(v+="Additional Studying Animal Stat Gain (x"+Math.floor(_)+"): "+(100*d.value).toFixed(0)+"%\n"),_>Math.floor(_)&&(v+="Additional Studying Animal Stat Gain: "+(100*((_-Math.floor(_))*(d.value-u.value)+u.value)).toFixed(0)+"%\n")):v+="Additional Studying Animal Stat Gain: "+(100*u.value).toFixed(0)+"%\n",v}return""}handleResearchCenterStatIncrease(e,i){var r=this.globalService.globalVar.modifiers.find(Q=>"researchCenterIncrementsModifier"===Q.text),a=this.globalService.globalVar.modifiers.find(Q=>"researchCenterTrainingAnimalModifier"===Q.text),s=this.globalService.globalVar.modifiers.find(Q=>"researchCenterStudyingAnimalModifier"===Q.text),o=this.globalService.globalVar.modifiers.find(Q=>"researchCenterMaxStatGainModifier"===Q.text);if(null!=r&&null!=a&&null!=s&&null!=o&&null!=e.currentTraining){var D,c=i.barnUpgrades.specializationLevel*r.value,u=e.currentTraining.affectedStatRatios.topSpeed,d=e.currentTraining.affectedStatRatios.acceleration,h=e.currentTraining.affectedStatRatios.endurance,f=e.currentTraining.affectedStatRatios.power,v=e.currentTraining.affectedStatRatios.focus,_=e.currentTraining.affectedStatRatios.adaptability;e.increaseStats(new Fe((D=a.value+c<o.value?a.value+c:o.value)*u,D*d,D*h,D*f,D*v,D*_)),this.globalService.calculateAnimalRacingStats(e);var w=(c-(o.value-a.value))/(o.value-s.value),y=this.getAnimalsInRandomOrder(e.raceCourseType,e);if(w>0){y.length<w&&(w=y.length);for(var P=0;P<Math.floor(w);P++)y[P].increaseStats(new Fe(o.value*u,o.value*d,o.value*h,o.value*f,o.value*v,o.value*_)),this.globalService.calculateAnimalRacingStats(y[P]);if(w>Math.floor(w)&&y.length>P){var U=s.value+(w-Math.floor(w))*(o.value-s.value);y[P].increaseStats(new Fe(U*u,U*d,U*h,U*f,U*v,U*_)),this.globalService.calculateAnimalRacingStats(y[P])}}else y.length>=1&&(y[0].increaseStats(new Fe((U=s.value)*u,U*d,U*h,U*f,U*v,U*_)),this.globalService.calculateAnimalRacingStats(y[0]))}}getAnimalsInRandomOrder(e,i){for(var r=[],a=this.globalService.globalVar.animals.filter(u=>u.raceCourseType===e&&u.isAvailable&&u.type!==i.type),s=this.globalService.globalVar.animals.filter(u=>u.raceCourseType!==e&&u.isAvailable),o=a.length,l=0;l<o;l++){var c=this.utilityService.getRandomInteger(1,a.length);r.push(a[c-1]),a=a.filter(u=>u!==a[c-1])}for(o=s.length,l=0;l<o;l++)c=this.utilityService.getRandomInteger(1,s.length),r.push(s[c-1]),s=s.filter(h=>h!==s[c-1]);return r}handleAttractionRevenue(e,i){var r=this.globalService.globalVar.barns.find(d=>d.barnNumber===i.associatedBarnNumber);if(null!=r&&r.barnUpgrades.specialization===rn.Attraction){var a=60,s=this.globalService.globalVar.modifiers.find(d=>"attractionTimeToCollectModifier"===d.text);null!=s&&(a=s.value);var o=0,l=this.globalService.globalVar.modifiers.find(d=>"attractionAmountModifier"===d.text);for(null!=l&&(o=l.value),o*=r.barnUpgrades.specializationLevel,r.barnUpgrades.currentDeltaTime+=e,null!==i.currentTraining&&r.barnUpgrades.currentDeltaTime>=i.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.currentDeltaTime=i.currentTraining.trainingTimeRemaining);r.barnUpgrades.currentDeltaTime>=a;){r.barnUpgrades.currentDeltaTime-=a;var u=this.globalService.globalVar.resources.find(d=>"Coins"===d.name);void 0!==u&&(u.amount+=o)}}}}return t.\u0275fac=function(e){return new(e||t)(Pe(bt),Pe(Sa),Pe(Sn))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var pr=(()=>{return(t=pr||(pr={}))[t.None=0]="None",t[t.Stumble=1]="Stumble",t[t.LostFocus=2]="LostFocus",t[t.LostStamina=3]="LostStamina",t[t.Burst=4]="Burst",pr;var t})();class NB{constructor(){this.raceUpdates=[],this.beatMoneyMark=!1}addRaceUpdate(n,e){var i=new ue;i.text=e,i.value=n,this.raceUpdates.push(i)}}class OB{}let FT=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.lookupService=i,this.utilityService=r,this.initializeService=a,this.frameModifier=60,this.timeToComplete=60,this.currentLostFocusOpportunity=0,this.currentBurstOpportunity=0,this.tundraPreviousYAmount=0}runRace(e,i){console.log("Race Info:"),console.log(e),this.currentBurstOpportunity=0,this.currentLostFocusOpportunity=0,this.tundraPreviousYAmount=0,this.selectedRace=e;var r=new NB,a=0,s=0;e.raceLegs.forEach(W=>a+=W.distance);var o=0;(0===e.timeToComplete||null==e.timeToComplete)&&(e.timeToComplete=60);var l=a/e.timeToComplete,c=this.globalService.globalVar.animalDecks.find(W=>W.isPrimaryDeck),u=0;this.timeToComplete=e.timeToComplete;var d=[],h=[],f=pr.None,v=0,_=0,w=0,y=0,P=0,U=0,Q=1,J=new Lt,ge=new Lt;return void 0===c?(r.errorMessage="No animal deck selected.",r):(this.racingAnimals=this.lookupService.getAnimalsFromAnimalDeck(c),e.raceUI.distanceCoveredByFrame=[],e.raceUI.velocityByFrame=[],e.raceUI.timeToCompleteByFrame=[],e.raceUI.maxSpeedByFrame=[],e.raceUI.staminaPercentByFrame=[],e.raceUI.yAdjustmentByFrame=[],e.raceUI.racerEffectByFrame=[],e.raceUI.lavaFallPercentByFrame=[],e.raceUI.racePositionByFrame=[],r.addRaceUpdate(o,e.timeToComplete+" seconds are on the race clock."),e.raceLegs.forEach(W=>{var S=this.racingAnimals.find(Me=>Me.raceCourseType===W.courseType);null!=S?(S.raceVariables=new sm,S.totalRacesRun+=1):alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),this.globalService.globalVar.trackedStats.totalRaces+=1,e.raceLegs.forEach(W=>{var S=this.racingAnimals.find(vt=>vt.raceCourseType===W.courseType);if(null!=S){this.increasePersistentAbilityXp(S);var Me=void 0,Ne=new wn,ze="<span class='coloredText "+W.getCourseTypeClass()+"'>"+S.name+"</span>";if(_>0){var lt=this.racingAnimals.find(vt=>vt.raceCourseType===e.raceLegs[_-1].courseType);null!=lt&&(J=lt)}else J=null;if(_<e.raceLegs.length-1){Ne=e.raceLegs[_+1];var ct=this.racingAnimals.find(vt=>vt.raceCourseType===Ne.courseType);null!=ct&&(ge=ct)}else ge=null;var $e="",Vt=W.terrain.maxSpeedModifier,Tn=W.terrain.accelerationModifier,an=W.terrain.staminaModifier,Bn=W.terrain.powerModifier,Dn=W.terrain.focusModifier,Wt=W.terrain.adaptabilityModifier;o<this.timeToComplete*this.frameModifier&&(h.length>0&&void 0!==(Me=h[h.length-1])&&($e="<span class='coloredText "+Me.getCourseTypeClass()+"'>"+(null==J?void 0:J.name)+"</span>"),this.PrepareRacingAnimal(r,o,$e,S,d,W,Me),this.prepareRacingLeg(W,S),r.addRaceUpdate(o,ze+" starts their leg of the race."));var Ht=S.currentStats.stamina,gt=0,Xt=W.distance,We=new bh,Gn=new bh,ri=!1,Pn=1,pi={permanentAdaptabilityIncreaseMultiplier:1},Jn={permanentMaxSpeedIncreaseMultiplier:1},jn=1,Di=1,gi={coldBloodedIncreaseMultiplier:1},zn=1,dn=[],Xe=1,Gt=!1,mi=0,$a=[!1,!1,!1,!1,!1];if("Nap"===S.ability.name&&S.type===q.Hare){var Or=W.distance-this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe);Or<0&&(Or=0),S.ability.remainingLength=Or}y>0&&(S.currentStats.stamina+=y);for(var ia=o;ia<=this.timeToComplete*this.frameModifier;ia++){mi+=1,f=pr.None;var In=0;if(u>0)for(var Mn=0;Mn<u;Mn++)In+=e.raceLegs[Mn].distance;l=a/this.timeToComplete;var Zt=s-In,Fr=0,_s=!1,Ze=0;if(W.pathData.forEach(vt=>{!_s&&Zt>=Ze&&Zt<Ze+vt.length&&(_s=!0,We=vt,Fr=Zt-Ze),vt.legStartingDistance=Ze,Ze+=vt.length,_s||(Gn=vt)}),"Night Vision"===S.ability.name&&S.type===q.Gecko&&!S.ability.abilityInUse&&!Gn.didAnimalLoseFocus&&Gn.length>0&&(Pn+=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe)/100,this.globalService.increaseAbilityXp(S),S.ability.abilityInUse=!0),"Feeding Frenzy"===S.ability.name&&S.type===q.Shark){var mt=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe);if(Zt<=mt||Zt>=W.distance-mt){jn=1.5;var Vr=this.globalService.globalVar.modifiers.find(vt=>"feedingFrenzyPositiveModifier"===vt.text);void 0!==Vr&&(jn=Vr.value)}else jn=1}if(null!==J&&void 0!==Me){if("Navigator"===J.ability.name&&J.type===q.Dolphin&&!J.ability.abilityInUse){var Bh=this.lookupService.GetAbilityEffectiveAmount(J,Me.terrain.powerModifier,Xe);this.AddRelayEffect(S,Bh,new Fe(0,0,0,0,0,.25*J.currentStats.adaptabilityMs),!1),r.addRaceUpdate(o,$e+" uses "+(null==J?void 0:J.ability.name)+"."),J.ability.abilityInUse=!0}if(J.type===q.Caribou&&"Herd Mentality"===J.ability.name&&!J.ability.abilityUsed){var Rn=4;void 0!==(Zs=this.globalService.globalVar.modifiers.find(vt=>"relayAbilityXpGainModifier"===vt.text))&&(Rn=Zs.value),w>0&&(S.raceVariables.isBursting=!0),S.currentStats.stamina+=w,w=0,J.ability.abilityUsed=!0,r.addRaceUpdate(o,$e+" uses "+J.ability.name+"."),this.globalService.increaseAbilityXp(J,Rn)}}"Navigator"===S.ability.name&&S.type===q.Dolphin&&(S.ability.abilityInUse=!1),S.type===q.Fox&&"Fleeting Speed"===S.ability.name&&!S.ability.abilityUsed&&(zn+=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe)/100,S.ability.abilityUsed=!0),S.type===q.Dolphin&&"Echolocation"===S.ability.name&&(S.ability.abilityInUse?(W.terrain.maxSpeedModifier<1&&(W.terrain.maxSpeedModifier=1),W.terrain.accelerationModifier<1&&(W.terrain.accelerationModifier=1),W.terrain.staminaModifier<1&&(W.terrain.staminaModifier=1),W.terrain.powerModifier<1&&(W.terrain.powerModifier=1),W.terrain.focusModifier<1&&(W.terrain.focusModifier=1),W.terrain.adaptabilityModifier<1&&(W.terrain.adaptabilityModifier=1)):(W.terrain.maxSpeedModifier=Vt,W.terrain.accelerationModifier=Tn,W.terrain.staminaModifier=an,W.terrain.powerModifier=Bn,W.terrain.focusModifier=Dn,W.terrain.adaptabilityModifier=Wt,this.checkForBlinders(W,S))),ri=We===W.pathData[W.pathData.length-1];var nu=this.getModifiedAdaptability(S,pi,Xe,dn,W,Zt,ge,Ne),Lh=this.getModifiedFocus(S,Xe,dn,gi),Xm=this.didAnimalStumble(S,We,Fr,W.terrain,pi,nu,Xe,o,ze,r),Uh=this.didAnimalLoseFocus(S,this.timeToComplete,e.length,s,W.terrain,Xe,dn,gi,We,Lh);if(Uh&&(S.raceVariables.lostFocus=!0,S.raceVariables.currentLostFocusLength=S.raceVariables.defaultLostFocusLength,S.raceVariables.metersSinceLostFocus=0,v=gt,"Night Vision"===S.ability.name&&S.type===q.Gecko&&(Pn=1),r.addRaceUpdate(o,ze+" is distracted and lost focus!")),Xm&&(S.raceVariables.stumbled=!0,S.raceVariables.currentStumbledLength=S.raceVariables.defaultStumbledLength,v=gt,r.addRaceUpdate(o,ze+" stumbles!")),0===S.currentStats.stamina){var Hh=.9,Gh=this.globalService.globalVar.modifiers.find(vt=>"exhaustionStatLossModifier"===vt.text);void 0!==Gh&&(Hh=Gh.value),Xe*=Hh;var iu=.5;if(S.getEquippedItemName()===this.globalService.getEquipmentName(rt.quickSnack)){iu=1;var jh=this.globalService.globalVar.modifiers.find(vt=>"quickSnackEquipmentModifier"===vt.text);void 0!==jh&&(iu=jh.value)}S.currentStats.stamina=Ht*iu,r.addRaceUpdate(o,ze+" runs out of stamina and must slow down.")}if(S.raceVariables.lostFocus||S.raceVariables.stumbled){if(S.raceVariables.lostFocus){f=pr.LostFocus;var ru=.9*v;gt>0&&(gt-=ru/S.raceVariables.defaultLostFocusLength),S.raceVariables.currentLostFocusLength-=1,0===S.raceVariables.currentLostFocusLength&&(S.raceVariables.lostFocus=!1)}S.raceVariables.stumbled&&(f=pr.Stumble,ru=v-v*We.stumbleSeverity,gt>0&&(gt-=ru/S.raceVariables.defaultStumbledLength),S.raceVariables.currentStumbledLength-=1,0===S.raceVariables.currentStumbledLength&&(S.raceVariables.stumbled=!1))}else{var Mi=S.currentStats.accelerationMs;if(Mi*=W.terrain.accelerationModifier,Mi*=Xe,S.type===q.Horse&&"Pacemaker"===S.ability.name&&S.ability.abilityInUse&&(Mi*=1.25),S.type===q.Cheetah&&"Sprint"===S.ability.name&&S.ability.abilityInUse&&(Mi*=1.1),S.type===q.Cheetah&&"Giving Chase"===S.ability.name){var zh=l*(o/this.frameModifier)-s;if(zh>0){var Km=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe),$h=zh/l*Km;$h>=1&&(Mi*=$h)}}if("Feeding Frenzy"===S.ability.name&&S.type===q.Shark&&(Mi*=jn),S.type===q.Caribou&&"Great Migration"===S.ability.name&&(Mi+=Di),"Wild Toboggan"===S.ability.name&&S.type===q.Penguin&&S.ability.abilityInUse){var Jm=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe)/100,Wa=20,Wh=this.globalService.globalVar.modifiers.find(vt=>"maxDriftAmountModifier"===vt.text);void 0!==Wh&&(Wa=Wh.value),(bs=We.driftAmount)>(Wa*=2)&&(bs=Wa),Mi*=1+Jm*(Math.abs(bs)/Wa),S.ability.abilityInUse=!0}"Nap"===S.ability.name&&S.type===q.Hare&&(S.ability.remainingLength-=l*(1/this.frameModifier),S.ability.remainingLength<=0&&(S.ability.remainingLength=0),S.ability.remainingLength>0&&(Mi=0)),"Buried Treasure"===S.ability.name&&S.type===q.Octopus&&mi<8*this.frameModifier&&(Mi=0),S.type===q.Salamander&&"Heat Up"===S.ability.name&&S.ability.abilityInUse&&(Mi*=1+.15*S.ability.totalUseCount),S.type===q.Fox&&"Trickster"===S.ability.name&&"Acceleration"===S.ability.tricksterStatLoss&&S.ability.abilityInUse&&(Mi*=.8),S.type===q.Fox&&"Trickster"===S.ability.name&&"Acceleration"===S.ability.tricksterStatGain&&S.ability.abilityInUse&&(Mi*=1.4),S.type===q.Fox&&"Nine Tails"===S.ability.name&&(Mi*=1+.1*this.getNineTailsBuffCount("Acceleration",dn)),gt+=Mi/this.frameModifier}gt<0&&(gt=0);var $n=S.currentStats.maxSpeedMs;if($n*=W.terrain.maxSpeedModifier,$n*=Xe,S.type===q.Cheetah&&"Sprint"===S.ability.name&&S.ability.abilityInUse&&($n*=1.25),S.type===q.Cheetah&&"On The Hunt"===S.ability.name&&($n*=Pn),"Nap"===S.ability.name&&S.type===q.Hare&&($n*=2),Gt&&S.type===q.Shark&&"Blood In The Water"===S.ability.name&&($n*=1+this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe)/100),null!==ge&&ge.type===q.Shark&&"Feeding Frenzy"===ge.ability.name||null!==J&&J.type===q.Shark&&"Feeding Frenzy"===J.ability.name){var qh=.9,Yh=this.globalService.globalVar.modifiers.find(vt=>"feedingFrenzyNegativeModifier"===vt.text);void 0!==Yh&&(qh=Yh.value),$n*=qh}if("Feeding Frenzy"===S.ability.name&&S.type===q.Shark&&($n*=jn),"Quick Toboggan"===S.ability.name&&S.type===q.Penguin&&($n*=Jn.permanentMaxSpeedIncreaseMultiplier),S.type===q.Gecko&&"Night Vision"===S.ability.name&&($n*=Pn),S.type===q.Fox&&"Trickster"===S.ability.name&&"Max Speed"===S.ability.tricksterStatLoss&&S.ability.abilityInUse&&($n*=.8),S.type===q.Fox&&"Trickster"===S.ability.name&&"Max Speed"===S.ability.tricksterStatGain&&S.ability.abilityInUse&&($n*=1.4),S.type===q.Fox&&"Fleeting Speed"===S.ability.name){var au=zn;(au-=.02*Math.floor(Zt/W.distance*100)*(au-1))<1&&(au=1),$n*=au}if(S.type===q.Fox&&"Nine Tails"===S.ability.name&&($n*=1+.1*this.getNineTailsBuffCount("Max Speed",dn)),gt>$n&&(gt=$n),this.doesRacerBurst(S,We,this.timeToComplete,e.length,s,nu,Lh)){if(S.raceVariables.isBursting=!0,S.raceVariables.remainingBurstMeters=this.getBurstDistance(S,W.terrain.powerModifier,Xe),S.raceVariables.burstCount+=1,S.type===q.Monkey&&"Frenzy"===S.ability.name&&(S.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe),this.globalService.increaseAbilityXp(S)),S.type===q.Hare&&"Prey Instinct"===S.ability.name&&!S.ability.abilityUsed&&(S.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe),S.ability.abilityUsed=!0),S.type===q.Octopus&&"Big Brain"===S.ability.name){var KG=Math.ceil(W.pathData.length/3);if(S.raceVariables.burstCount===KG){var pM=e.raceLegs.findIndex(vt=>vt.courseType===$.Ocean);e.raceLegs.length>pM&&e.raceLegs.slice(pM+1).forEach(vt=>{var av=this.racingAnimals.find(sv=>sv.raceCourseType===vt.courseType);if(null!=av){var lu=1+this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe)/100;this.AddRelayEffect(av,vt.distance,new Fe(1,1,1,lu,1,1),!0),r.addRaceUpdate(o,ze+" uses "+(null==S?void 0:S.ability.name)+".");var vM=4,_M=this.globalService.globalVar.modifiers.find(sv=>"relayAbilityXpGainModifier"===sv.text);void 0!==_M&&(vM=_M.value),this.globalService.increaseAbilityXp(S,vM)}})}}if(r.addRaceUpdate(o,"<strong>BURST!</strong> "+ze+" is breaking their limit!"),S.type===q.Cheetah&&"On The Hunt"===S.ability.name&&(Pn+=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe)/100,this.globalService.increaseAbilityXp(S)),S.type===q.Goat&&"Deep Breathing"===S.ability.name){var JG=Ht*(this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe)/100);S.currentStats.stamina+=JG,S.currentStats.stamina>Ht&&(y+=S.currentStats.stamina-Ht),this.globalService.increaseAbilityXp(S)}}var ra=gt;if(null!==J&&"Camouflage"===J.ability.name&&J.type===q.Gecko&&P>0){var tv=Zt/J.ability.remainingLength;tv>1&&(tv=1),(ra+=(1-tv)*P)>1.5*$n&&(ra=1.5*$n)}if(S.raceVariables.isBursting){f=pr.Burst;var Xh=1.25;S.type===q.Goat&&"In The Rhythm"===S.ability.name&&(Xh+=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe)/100),Xh+=U,S.raceVariables.remainingBurstMeters>=ra/this.frameModifier?(S.raceVariables.remainingBurstMeters-=(ra*=Xh)/this.frameModifier,S.raceVariables.remainingBurstMeters<0&&(ra+=S.raceVariables.remainingBurstMeters,S.raceVariables.remainingBurstMeters=0)):(ra-=S.raceVariables.remainingBurstMeters,ra+=S.raceVariables.remainingBurstMeters*Xh,S.raceVariables.remainingBurstMeters=0,S.raceVariables.isBursting=!1,r.addRaceUpdate(o,ze+"'s burst ends."))}var qi=ra/this.frameModifier;if(S.ability.abilityInUse&&(S.type===q.Monkey&&"Leap"===S.ability.name||S.type===q.Octopus&&"Propulsion"===S.ability.name)){var ej=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe);qi+=ej/S.ability.totalFrames,S.ability.remainingFrames-=1,S.ability.remainingFrames<=0&&(S.ability.abilityInUse=!1)}if(W.courseType===$.Tundra){var bs;if(this.handleTundraDrift(S,We,Gn,ri,nu,W.terrain,Fr,qi,Xe,Jn,r,ze,o))qi=0,gt=0,r.addRaceUpdate(o,ze+" slides into a wall and loses all momentum!");else if((bs=Math.abs(We.driftAmount))<=(Wa=20)&&!ri){var gM=1-bs/100;qi*=gM,$n*=gM}this.tundraPreviousYAmount=S.raceVariables.icyCurrentYAmount}if(W.courseType===$.Volcanic?this.handleLavaFall(S,mi,e.length/this.timeToComplete,Zt,W.distance,r,o,$a)&&(this.timeToComplete=o/this.frameModifier):this.selectedRace.raceUI.lavaFallPercentByFrame.push(this.selectedRace.raceUI.lavaFallPercentByFrame.length>0&&null!=this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]&&this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]>0?this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1]:[0,0,0,0,0]),s+=qi>Xt?Xt:qi,Xt-=qi,e.raceUI.distanceCoveredByFrame.push(s),e.raceUI.velocityByFrame.push(qi),e.raceUI.timeToCompleteByFrame.push(this.timeToComplete),e.raceUI.maxSpeedByFrame.push($n),e.raceUI.staminaPercentByFrame.push(S.currentStats.stamina/Ht),e.raceUI.racerEffectByFrame.push(f),this.handleRacePositionByFrame(e,l,o,s),this.handleStamina(S,r,qi,o,W.terrain),Uh||(S.raceVariables.metersSinceLostFocus+=qi),S.type===q.Fox&&"Nine Tails"===S.ability.name&&(this.checkForNineTailsBuff(We,dn,S,W,Xe,r,o,ze),dn.length>0&&(dn.forEach(vt=>{vt[1]-=qi}),dn=dn.filter(vt=>vt[1]>0))),S.ability.abilityInUse&&S.ability.remainingLength>0&&(S.ability.remainingLength-=qi,S.type===q.Gecko&&"Camouflage"===S.ability.name&&(S.ability.remainingLength-=qi),S.ability.remainingLength<=0&&(S.ability.abilityInUse=!1,S.ability.currentCooldown=S.ability.cooldown,S.getEquippedItemName()===this.globalService.getEquipmentName(rt.pendant)))){var su=.9;void 0!==(ou=this.globalService.globalVar.modifiers.find(vt=>"pendantEquipmentModifier"===vt.text))&&(su=ou.value),S.ability.currentCooldown*=su}if(null!=S.ability.currentCooldown&&S.ability.currentCooldown<=0&&this.abilityRedundancyCheck(S,gt,We,W,Xt,Xe)){var ys,ou;if(this.useAbility(S,e,W,Xe,Ht,Zt,gi),(ys=new ue).value=o,ys.text=S.type===q.Fox&&"Trickster"===S.ability.name?S.getAbilityUseUpdateText(ze,", gaining "+S.ability.tricksterStatGain+" but losing "+S.ability.tricksterStatLoss):S.getAbilityUseUpdateText(ze),r.raceUpdates.push(ys),S.ability.currentCooldown=S.ability.cooldown,S.getEquippedItemName()===this.globalService.getEquipmentName(rt.pendant))su=.9,void 0!==(ou=this.globalService.globalVar.modifiers.find(lu=>"pendantEquipmentModifier"===lu.text))&&(su=ou.value),S.ability.currentCooldown*=su;if(S.type===q.Caribou&&"Great Migration"===S.ability.name){var iv=.1*Ht;S.currentStats.stamina-=iv,Di=iv>1?.25*iv:1}}null!=S.raceVariables.relayEffects&&S.raceVariables.relayEffects.length>0&&(S.raceVariables.relayEffects.forEach(vt=>{vt.remainingRelayMeters<=qi?(vt.remainingRelayMeters=0,vt.isMultiplicative?null==S||S.currentStats.divideCurrentRacingStats(vt.relayAffectedStatRatios):null==S||S.currentStats.subtractCurrentRacingStats(vt.relayAffectedStatRatios),r.addRaceUpdate(o,ze+"'s relay effect ends.")):vt.remainingRelayMeters-=qi}),S.raceVariables.relayEffects=S.raceVariables.relayEffects.filter(vt=>vt.remainingRelayMeters>0)),0!==o&&o!==this.timeToComplete&&o%(10*this.frameModifier)==0&&((ys=new ue).value=o,ys.text=this.getUpdateMessageByRelativeDistance(l,o,s,ze),r.raceUpdates.push(ys));var rv=!1;if(s>l*(o/this.frameModifier)?(Gt||(rv=!0),Gt=!0):(Gt&&(rv=!0),Gt=!1),rv&&S.type===q.Shark&&"Apex Predator"===S.ability.name&&!S.ability.abilityUsed&&ia>1){r.addRaceUpdate(o,ze+" bites the other racers as they pass, slowing them down."),S.ability.abilityUsed=!0;var aj=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe),mM=this.timeToComplete*(aj/this.selectedRace.length);this.timeToComplete+=1.5*mM-mM,this.globalService.increaseAbilityXp(S)}if(S.ability.currentCooldown-=1/this.frameModifier,o+=1,Xt<=0){var Zs;if(r.addRaceUpdate(o,ze+" finishes their leg of the race."),W.legComplete=!0,_+=1,S.type===q.Caribou&&"Herd Mentality"===S.ability.name&&!S.raceVariables.ranOutOfStamina&&(w=S.currentStats.stamina*(this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe)/100)),S.type===q.Caribou&&"Special Delivery"===S.ability.name&&!S.raceVariables.ranOutOfStamina)U=S.currentStats.stamina/Ht*(this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe)/100),Rn=4,void 0!==(Zs=this.globalService.globalVar.modifiers.find(lu=>"relayAbilityXpGainModifier"===lu.text))&&(Rn=Zs.value),r.addRaceUpdate(o,ze+" uses "+S.ability.name+"."),this.globalService.increaseAbilityXp(S,Rn);S.type===q.Octopus&&"Buried Treasure"===S.ability.name&&(Q=1+this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe)/100),this.PrepareRacingAnimal(r,o,$e,S,void 0,void 0,void 0,Xe),S.type===q.Gecko&&"Camouflage"===S.ability.name&&(P=ra,S.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(S,W.terrain.powerModifier,Xe),r.addRaceUpdate(o,ze+" uses "+S.ability.name+".")),W.terrain.accelerationModifier=Tn,W.terrain.maxSpeedModifier=Vt,W.terrain.staminaModifier=an,W.terrain.powerModifier=Bn,W.terrain.focusModifier=Dn,W.terrain.adaptabilityModifier=Wt,d.push(S),h.push(W);break}o===this.timeToComplete*this.frameModifier&&(W.terrain.accelerationModifier=Tn,W.terrain.maxSpeedModifier=Vt,W.terrain.staminaModifier=an,W.terrain.powerModifier=Bn,W.terrain.focusModifier=Dn,W.terrain.adaptabilityModifier=Wt)}u+=1}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),e.raceLegs.some(W=>!W.legComplete)?(r.wasSuccessful=!1,r.addRaceUpdate(o,"You lost the race...")):(e.isCompleted=!0,r.wasSuccessful=!0,r.totalFramesPassed=o,r.addRaceUpdate(o,"You won the race!")),this.racingAnimals.forEach(W=>{this.PrepareRacingAnimal(r,o,"",W,void 0,void 0,void 0,void 0,!0)}),this.globalService.globalVar.trackedStats.totalMetersRaced+=s,r.wasSuccessful&&this.raceWasSuccessfulUpdate(r,Q),r)}getStaminaModifier(e){var i,r=this.globalService.globalVar.modifiers.find(a=>"staminaModifier"===a.text);return i=void 0===r?.2:r.value,null!=e&&null!=e.staminaModifier&&(i*=e.staminaModifier),i}handleStamina(e,i,r,a,s){var o=this.getStaminaModifier(s);e.type===q.Horse&&"Second Wind"===e.ability.name&&e.ability.abilityInUse||(e.currentStats.stamina-=e.type===q.Cheetah&&"Sprint"===e.ability.name&&e.ability.abilityInUse?r*o*2:r*o),e.currentStats.stamina<0&&(e.currentStats.stamina=0,e.raceVariables.ranOutOfStamina=!0)}getBurstDistance(e,i,r){var a=0,s=this.globalService.globalVar.modifiers.find(c=>"breedLevelStatModifier"===c.text);null!=s&&(a=s.value);var o=1;return e.type===q.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(o*=.8),e.type===q.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(o*=1.4),e.currentStats.calculateBurstDistance(a=1+a*(e.breedLevel-1),void 0,e.currentStats.powerMs*o*i*r)}doesRacerBurst(e,i,r,a,s,o,l){var c=1e3/this.selectedRace.length,u=0,d=this.globalService.globalVar.modifiers.find(w=>"breedLevelStatModifier"===w.text);null!=d&&(u=d.value);var h=e.currentStats.calculateBurstChance(u=1+u*(e.breedLevel-1),l,o)*c;if(i.checkedForBurst)return!1;if(i.checkedForBurst=!0,"Night Vision"===e.ability.name&&e.type===q.Gecko&&(e.ability.abilityInUse=!1),e.type===q.Hare&&"Prey Instinct"===e.ability.name&&!e.ability.abilityUsed)return!0;if(i.isSpecialPath){var f=this.lookupService.getResourceByName("Course Maps");if(null==f&&(f=0),f>0){var v=1,_=this.globalService.globalVar.modifiers.find(w=>"racerMapsModifier"===w.text);null!=_&&(v=1+f*_.value),h*=v}}return this.utilityService.getRandomNumber(1,100)<=h+1}raceWasSuccessfulUpdate(e,i){var o,r=this.globalService.globalVar.animals.find(w=>w.type===q.Octopus),a="<span class='coloredText waterColor'>"+(null==r?void 0:r.name)+"</span>",s=this.globalService.globalVar.circuitRank,l=0;if(this.selectedRace.isCircuitRace)o=this.globalService.globalVar.circuitRaces.find(w=>w.raceId===this.selectedRace.raceId),this.globalService.globalVar.circuitRaces.filter(w=>w.requiredRank===s).every(w=>w.isCompleted)&&(this.selectedRace.circuitIncreaseReward=this.globalService.IncreaseCircuitRank(),this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,se.Resources)));else if(o=this.globalService.globalVar.localRaces.find(w=>w.raceId===this.selectedRace.raceId&&w.localRaceType===this.selectedRace.localRaceType),this.selectedRace.localRaceType===kt.Free){var u=this.globalService.globalVar.resources.find(w=>"International Races"===w.name),d=this.globalService.globalVar.resources.find(w=>"National Races"===w.name);if(null!=u&&u.amount>0){var h=5,f=this.globalService.globalVar.modifiers.find(w=>"internationalRacesToMedalModifier"===w.text);null!=f&&(h=f.value),this.globalService.globalVar.nationalRaceCountdown>=h&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,se.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else if(null!=d&&d.amount>0){var v=12,_=this.globalService.globalVar.modifiers.find(w=>"nationalRacesToMedalModifier"===w.text);null!=_&&(v=_.value),this.globalService.globalVar.nationalRaceCountdown>=v&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,se.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}}if(this.selectedRace.localRaceType!==kt.Free&&this.selectedRace.localRaceType!==kt.Track){if(void 0===o)return;this.selectedRace.localRaceType===kt.Mono&&(this.globalService.globalVar.lastMonoRaceCourseType=this.selectedRace.raceLegs[0].courseType),this.globalService.IncreaseLocalRaceRank(this.selectedRace.localRaceType),o.isCompleted=!0}else this.selectedRace.localRaceType===kt.Free&&(this.globalService.globalVar.nationalRaceCountdown+=1);this.racingAnimals.forEach(w=>{l=this.selectedRace.isCircuitRace?this.lookupService.getCircuitBreedGaugeIncrease(w):this.lookupService.getLocalBreedGaugeIncrease(w),this.globalService.IncreaseAnimalBreedGauge(w,l)}),this.selectedRace.localRaceType!==kt.Track?e.beatMoneyMark=this.checkMoneyMark(e):this.handleTrackRaceRewards(e),null!=this.selectedRace.rewards&&this.selectedRace.rewards.forEach(w=>{if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(W=>W.name===w.name)){var y=this.globalService.globalVar.resources.find(W=>W.name===w.name);if(null!=y)if(this.selectedRace.localRaceType!==kt.Track)if("Coins"===y.name){if(e.beatMoneyMark){e.addRaceUpdate(e.totalFramesPassed,"You beat the money mark!");var P=1.25,U=this.globalService.globalVar.modifiers.find(W=>"moneyMarkRewardModifier"===W.text);null!=U&&(P=U.value),w.amount=Math.round(w.amount*P)}var Q=this.lookupService.getRenown();w.amount+=Math.round(w.amount*(Q/100)),i>1&&e.addRaceUpdate(e.totalFramesPassed,a+" finds buried treasure at the bottom of the ocean!"),w.amount=Math.round(w.amount*i),y.amount+=w.amount}else"Facility Level"===y.name?(y.amount+=w.amount,this.lookupService.recalculateAllAnimalStats()):"Renown"===y.name?y.amount=parseFloat((y.amount+w.amount).toFixed(3)):y.amount+=w.amount;else y.amount+=w.amount}else if("Bonus Breed XP Gain From Training"===w.name&&w.itemType===se.Other){var J=this.selectedRace.raceLegs[0].courseType;null!=(ge=this.racingAnimals.find(W=>W.raceCourseType===J))&&(ge.miscStats.bonusBreedXpGainFromTraining+=w.amount)}else if("Bonus Breed XP Gain From Local Races"===w.name&&w.itemType===se.Other)J=this.selectedRace.raceLegs[0].courseType,null!=(ge=this.racingAnimals.find(Me=>Me.raceCourseType===J))&&(ge.miscStats.bonusBreedXpGainFromLocalRaces+=w.amount);else if("Bonus Breed XP Gain From Circuit Races"===w.name&&w.itemType===se.Other)J=this.selectedRace.raceLegs[0].courseType,null!=(ge=this.racingAnimals.find(Me=>Me.raceCourseType===J))&&(ge.miscStats.bonusBreedXpGainFromCircuitRaces+=w.amount);else if("Training Time Reduction"===w.name&&w.itemType===se.Other)J=this.selectedRace.raceLegs[0].courseType,null!=(ge=this.racingAnimals.find(Me=>Me.raceCourseType===J))&&(ge.miscStats.trainingTimeReduction+=w.amount);else if("Diminishing Returns per Facility Level"===w.name&&w.itemType===se.Other)J=this.selectedRace.raceLegs[0].courseType,null!=(ge=this.racingAnimals.find(Me=>Me.raceCourseType===J))&&(ge.miscStats.diminishingReturnsBonus+=w.amount);else if("Orb Necklace"===w.name&&w.itemType===se.Other)J=this.selectedRace.raceLegs[0].courseType,null!=(ge=this.racingAnimals.find(Me=>Me.raceCourseType===J))&&(ge.canEquipOrb=!0);else if("Bonus Talents"===w.name&&w.itemType===se.Other){var ge;J=this.selectedRace.raceLegs[0].courseType,null!=(ge=this.racingAnimals.find(Me=>Me.raceCourseType===J))&&(ge.miscStats.bonusTalents+=w.amount)}else this.globalService.globalVar.resources.push(new _e(w.name,w.amount,w.itemType))})}checkMoneyMark(e){var i=!1;if(0===this.lookupService.getResourceByName("Money Mark"))return i;var a=this.globalService.globalVar.modifiers.find(o=>"moneyMarkPaceModifier"===o.text);return null==a||e.totalFramesPassed<=this.timeToComplete*this.frameModifier*a.value&&(i=!0),i}handleTrackRaceRewards(e){if(1===this.selectedRace.raceLegs.length){var i=this.selectedRace.raceLegs[0].courseType,r=this.racingAnimals.find(d=>d.raceCourseType===i);if(void 0!==r){var a=null;if(this.selectedRace.trackRaceType===Fn.novice&&(a=r.allTrainingTracks.noviceTrack),this.selectedRace.trackRaceType===Fn.intermediate&&(a=r.allTrainingTracks.intermediateTrack),this.selectedRace.trackRaceType===Fn.master&&(a=r.allTrainingTracks.masterTrack),null!==a){var s=this.timeToComplete*this.frameModifier,o=.25,l=this.globalService.globalVar.modifiers.find(d=>"trainingTrackPaceModifier"===d.text);void 0!==l&&(o=l.value);for(var c=0;c<a.totalRewards;c++)c<a.rewardsObtained||e.totalFramesPassed<=s/(1+o*c)&&(a.rewardsObtained=c+1,a.rewardsObtained===a.totalRewards&&(this.selectedRace.trackRaceType===Fn.novice&&(r.allTrainingTracks.intermediateTrackAvailable=!0),this.selectedRace.trackRaceType===Fn.intermediate&&(r.allTrainingTracks.masterTrackAvailable=!0)),null==this.selectedRace.rewards&&(this.selectedRace.rewards=[]),this.selectedRace.rewards.push(a.rewards[c]));null!=this.selectedRace.rewards&&(this.selectedRace.rewards=this.utilityService.condenseList(this.selectedRace.rewards))}}}}getUpdateMessageByRelativeDistance(e,i,r,a){var s=a,o=e*(i/this.frameModifier);return r<.5*o?s="Is "+a+" <strong>even moving?!</strong>":r<.75*o?s=a+" is <strong>falling out of the race!</strong>":r<.9*o?s=a+" is <strong>just a step behind everyone else!</strong>":r>=.9*o&&r<=1.1*o?s=a+" is <strong>right on pace!</strong>":r>=1.5*o?s=a+" <strong>CANNOT be caught!!</strong>":r>=1.25*o?s=a+" is <strong>WAY ahead of the pack!</strong>":r>=1.1*o&&(s=a+" is <strong>barely leading the pack!</strong>"),s}PrepareRacingAnimal(e,i,r,a,s,o,l,c,u){if(a.ability.currentCooldown=a.ability.cooldown,a.ability.remainingLength=0,a.ability.totalUseCount=0,a.getEquippedItemName()===this.globalService.getEquipmentName(rt.pendant)){var d=.9,h=this.globalService.globalVar.modifiers.find(y=>"pendantEquipmentModifier"===y.text);void 0!==h&&(d=h.value),a.ability.currentCooldown*=d}if(a.ability.abilityUsed=!1,a.ability.abilityInUse=!1,null!=a.raceVariables&&(a.raceVariables.ranOutOfStamina=!1,a.raceVariables.burstCount=0,a.raceVariables.metersSinceLostFocus=0),this.globalService.calculateAnimalRacingStats(a),!0!==u){if(null!=s&&s.length>0){var f=4,v=this.globalService.globalVar.modifiers.find(y=>"relayAbilityXpGainModifier"===y.text);void 0!==v&&(f=v.value);var _=s[s.length-1];if("Inspiration"===_.ability.name&&_.type===q.Horse&&null!=l){var D=this.lookupService.GetAbilityEffectiveAmount(_,l.terrain.powerModifier,c);this.AddRelayEffect(a,D,new Fe(.25*_.currentStats.maxSpeedMs,0,0,0,0,0),!1),e.addRaceUpdate(i,r+" uses "+_.ability.name+"."),this.globalService.increaseAbilityXp(_,f)}"Flowing Current"===_.ability.name&&_.type===q.Dolphin&&null!=l&&(D=this.lookupService.GetAbilityEffectiveAmount(_,l.terrain.powerModifier,c),this.AddRelayEffect(a,D,new Fe(0,.25*_.currentStats.accelerationMs,0,0,0,0),!1),e.addRaceUpdate(i,r+" uses "+_.ability.name+"."),this.globalService.increaseAbilityXp(_,f)),void 0!==o&&this.batonEquipmentCheck(_,a,o.distance)}null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0&&a.raceVariables.relayEffects.forEach(y=>{y.isMultiplicative?a.currentStats.multiplyCurrentRacingStats(y.relayAffectedStatRatios):a.currentStats.addCurrentRacingStats(y.relayAffectedStatRatios)})}}batonEquipmentCheck(e,i,r){if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.redBaton)){var a=1.1,s=this.globalService.globalVar.modifiers.find(w=>"redBatonEquipmentModifier"===w.text);void 0!==s&&(a=s.value),this.AddRelayEffect(i,r,new Fe(a,1,1,1,1,1),!0)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.blueBaton)){var o=1.1,l=this.globalService.globalVar.modifiers.find(w=>"blueBatonEquipmentModifier"===w.text);void 0!==l&&(o=l.value),this.AddRelayEffect(i,r,new Fe(1,1,1,1,o,1),!0)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.violetBaton)){var c=1.1,u=this.globalService.globalVar.modifiers.find(w=>"violetBatonEquipmentModifier"===w.text);void 0!==u&&(c=u.value),this.AddRelayEffect(i,r,new Fe(1,1,1,c,1,1),!0)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.greenBaton)){var d=1.1,h=this.globalService.globalVar.modifiers.find(w=>"greenBatonEquipmentModifier"===w.text);void 0!==h&&(d=h.value),this.AddRelayEffect(i,r,new Fe(1,1,1,1,1,d),!0)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.orangeBaton)){var f=1.1,v=this.globalService.globalVar.modifiers.find(w=>"orangeBatonEquipmentModifier"===w.text);void 0!==v&&(f=v.value),this.AddRelayEffect(i,r,new Fe(1,f,1,1,1,1),!0)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.yellowBaton)){var _=1.1,D=this.globalService.globalVar.modifiers.find(w=>"yellowBatonEquipmentModifier"===w.text);void 0!==D&&(_=D.value),this.AddRelayEffect(i,r,new Fe(1,1,_,1,1,1),!0)}}prepareRacingLeg(e,i){e.pathData.forEach(r=>{r.currentStumbleOpportunity=0,r.checkedForBurst=!1,r.checkedForNineTails=!1,r.driftAmount=0,r.didAnimalStumble=!1,r.checkedForDrift=!1}),this.checkForBlinders(e,i)}checkForBlinders(e,i){if(i.getEquippedItemName()===this.globalService.getEquipmentName(rt.blinders)){var r=.5;e.terrain.maxSpeedModifier<1&&(e.terrain.maxSpeedModifier=1-(1-e.terrain.maxSpeedModifier)*r),e.terrain.accelerationModifier<1&&(e.terrain.accelerationModifier=1-(1-e.terrain.accelerationModifier)*r),e.terrain.staminaModifier<1&&(e.terrain.staminaModifier=1-(1-e.terrain.staminaModifier)*r),e.terrain.powerModifier<1&&(e.terrain.powerModifier=1-(1-e.terrain.powerModifier)*r),e.terrain.focusModifier<1&&(e.terrain.focusModifier=1-(1-e.terrain.focusModifier)*r),e.terrain.adaptabilityModifier<1&&(e.terrain.adaptabilityModifier=1-(1-e.terrain.adaptabilityModifier)*r)}}AddRelayEffect(e,i,r,a){var s=new OB;s.remainingRelayMeters=i,s.relayAffectedStatRatios=r,s.isMultiplicative=a,e.raceVariables.relayEffects.push(s)}didAnimalStumble(e,i,r,a,s,o,l,c,u,d){if(e.raceVariables.stumbled||0===i.frequencyOfStumble||e.type===q.Gecko&&"Sticky"===e.ability.name&&e.ability.abilityInUse||e.type===q.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||e.type===q.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;var h=i.length/i.stumbleOpportunities;if(i.currentStumbleOpportunity===i.stumbleOpportunities&&i.routeDesign!==Le.Regular&&e.type===q.Goat&&"Sure-footed"===e.ability.name&&(s.permanentAdaptabilityIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,a.powerModifier,l)/100,this.globalService.increaseAbilityXp(e),i.currentStumbleOpportunity+=1),i.currentStumbleOpportunity*h<r){i.currentStumbleOpportunity+=1;var v=250;if(this.utilityService.getRandomNumber(1,100)<=i.frequencyOfStumble/(v+=o*a.adaptabilityModifier)*i.length){if(e.getEquippedItemName()===this.globalService.getEquipmentName(rt.headband)){var w=3,y=this.globalService.globalVar.modifiers.find(P=>"headbandEquipmentModifier"===P.text);if(void 0!==y&&(w=y.value),e.raceVariables.headbandStumblePreventionCount<w)return e.raceVariables.headbandStumblePreventionCount+=1,d.addRaceUpdate(c,u+"'s headband prevents them from stumbling."),!1}return i.didAnimalStumble=!0,!0}}return!1}didAnimalLoseFocus(e,i,r,a,s,o,l,c,u,d){if(e.raceVariables.lostFocus||e.type===q.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(this.currentLostFocusOpportunity*(r/i)<a){this.currentLostFocusOpportunity+=1;var v=this.globalService.globalVar.modifiers.find(P=>"focusModifier"===P.text),_=d*s.focusModifier*(void 0===v?.75:v.value);if(e.raceVariables.metersSinceLostFocus<_)return!1;var w=(e.raceVariables.metersSinceLostFocus-_)/e.currentStats.focusMs*100;return this.utilityService.getRandomNumber(1,100)<=w&&(u.didAnimalLoseFocus=!0),!0}return!1}increasePersistentAbilityXp(e){(e.type===q.Cheetah&&"Giving Chase"===e.ability.name||e.type===q.Hare&&"Prey Instinct"===e.ability.name||e.type===q.Hare&&"Nap"===e.ability.name||e.type===q.Goat&&"In The Rhythm"===e.ability.name||e.type===q.Gecko&&"Camouflage"===e.ability.name||e.type===q.Dolphin&&"Navigator"===e.ability.name||e.type===q.Shark&&"Feeding Frenzy"===e.ability.name||e.type===q.Shark&&"Blood In The Water"===e.ability.name||e.type===q.Octopus&&"Buried Treasure"===e.ability.name||e.type===q.Penguin&&"Wild Toboggan"===e.ability.name||e.type===q.Fox&&"Fleeting Speed"===e.ability.name)&&this.globalService.increaseAbilityXp(e,3)}abilityRedundancyCheck(e,i,r,a,s,o){return!(e.ability.oneTimeEffect&&e.ability.abilityUsed||"Second Wind"===e.ability.name&&e.type===q.Horse&&e.raceVariables.recoveringStamina||"Pacemaker"===e.ability.name&&e.type===q.Horse&&i===e.currentStats.maxSpeedMs)&&(!("Leap"===e.ability.name&&e.type===q.Monkey&&this.lookupService.GetAbilityEffectiveAmount(e,a.terrain.powerModifier,o)<s)&&!("Sticky"===e.ability.name&&e.type===q.Gecko&&0===r.frequencyOfStumble))}useAbility(e,i,r,a,s,o,l){if(e.ability.abilityUsed=!0,e.type===q.Horse&&("Second Wind"===e.ability.name||"Pacemaker"===e.ability.name)&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Cheetah&&"Sprint"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Hare&&"Awareness"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Monkey){if("Landslide"===e.ability.name){var c=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a);this.timeToComplete+=c/(i.length/this.timeToComplete),this.globalService.increaseAbilityXp(e)}"Leap"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e))}if(e.type===q.Gecko&&"Sticky"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Dolphin&&"Echolocation"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Octopus&&"Propulsion"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e)),e.type===q.Penguin&&"Careful Toboggan"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Caribou&&"Great Migration"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===q.Salamander){if("Cold Blooded"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a);var d=o/r.distance;d>.5&&(d=.5-(d-.5)),e.currentStats.stamina+=s*d,e.currentStats.stamina>s&&(e.currentStats.stamina=s),l.coldBloodedIncreaseMultiplier=1+d}"Burrow"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),"Heat Up"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e))}if(e.type===q.Fox&&"Trickster"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e);var h=this.utilityService.getRandomInteger(1,6);1===h&&(e.ability.tricksterStatLoss="Acceleration"),2===h&&(e.ability.tricksterStatLoss="Max Speed"),3===h&&(e.ability.tricksterStatLoss="Adaptability"),4===h&&(e.ability.tricksterStatLoss="Focus"),5===h&&(e.ability.tricksterStatLoss="Stamina",e.currentStats.stamina-=.2*s,e.currentStats.stamina<0&&(e.currentStats.stamina=0)),6===h&&(e.ability.tricksterStatLoss="Power");var f=this.utilityService.getRandomInteger(1,6);f===h&&(f+=1)>6&&(f=1),1===f&&(e.ability.tricksterStatGain="Acceleration"),2===f&&(e.ability.tricksterStatGain="Max Speed"),3===f&&(e.ability.tricksterStatGain="Adaptability"),4===f&&(e.ability.tricksterStatGain="Focus"),5===f&&(e.ability.tricksterStatGain="Stamina",e.currentStats.stamina+=.4*s,e.currentStats.stamina>s&&(e.currentStats.stamina=s)),6===f&&(e.ability.tricksterStatGain="Power"),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a)}}checkForNineTailsBuff(e,i,r,a,s,o,l,c){if(!e.checkedForNineTails){e.checkedForNineTails=!0;var u=this.utilityService.getRandomInteger(1,4),d=new ue;d.value=l,1===u?(i.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,s)]),d.text=r.getAbilityUseUpdateText(c," (Acceleration)"),o.raceUpdates.push(d)):2===u?(i.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,s)]),d.text=r.getAbilityUseUpdateText(c," (Max Speed)"),o.raceUpdates.push(d)):3===u?(i.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,s)]),d.text=r.getAbilityUseUpdateText(c," (Adaptability)"),o.raceUpdates.push(d)):4===u&&(i.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,s)]),d.text=r.getAbilityUseUpdateText(c," (Focus)"),o.raceUpdates.push(d)),this.globalService.increaseAbilityXp(r)}}getNineTailsBuffCount(e,i){return i.filter(r=>r[0]===e).length}getModifiedAdaptability(e,i,r,a,s,o,l,c){var u=e.currentStats.adaptabilityMs*r;return e.type===q.Dolphin&&"Echolocation"===e.ability.name&&e.ability.abilityInUse&&(u*=1.25),e.type===q.Goat&&"Sure-footed"===e.ability.name&&(u*=i.permanentAdaptabilityIncreaseMultiplier),e.type===q.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(u*=1.25),e.type===q.Penguin&&"Careful Toboggan"===e.ability.name&&e.ability.abilityInUse&&(u*=1.4),e.type===q.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(u*=.8),e.type===q.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(u*=1.4),e.type===q.Fox&&"Nine Tails"===e.ability.name&&(u*=1+.1*this.getNineTailsBuffCount("Adaptability",a)),null!==l&&void 0!==c&&"Navigator"===l.ability.name&&l.type===q.Dolphin&&s.distance-o<=this.lookupService.GetAbilityEffectiveAmount(l,c.terrain.powerModifier,r)&&(u+=.25*l.currentStats.adaptabilityMs,l.ability.abilityInUse=!0),u}getModifiedFocus(e,i,r,a){var s=e.currentStats.focusMs*i;return e.type===q.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(s*=1.25),e.type===q.Hare&&"Nap"===e.ability.name&&(s*=2),e.type===q.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.8),e.type===q.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.4),e.type===q.Fox&&"Nine Tails"===e.ability.name&&(s*=1+.1*this.getNineTailsBuffCount("Focus",r)),e.type===q.Salamander&&"Cold Blooded"===e.ability.name&&e.ability.abilityInUse&&(s*=a.coldBloodedIncreaseMultiplier),s}handleTundraDrift(e,i,r,a,s,o,l,c,u,d,h,f,v){var _=!1;if(!i.checkedForDrift){i.checkedForDrift=!0;var D=80,w=-80;if((i.routeDesign===Le.Cavern||r.routeDesign===Le.Cavern)&&(D=60,w=-60),e.raceVariables.icyCurrentYAmount>=D||e.raceVariables.icyCurrentYAmount<=w||a)return(e.raceVariables.icyCurrentYAmount>=D||e.raceVariables.icyCurrentYAmount<=w)&&(_=!0),i.driftAmount=-e.raceVariables.icyCurrentYAmount,e.raceVariables.icyCurrentYAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,_;var y=this.utilityService.getRandomNumber(1,100),P=1e3,Q=i.frequencyOfDrift/(P+=s*o.adaptabilityModifier)*i.length;if(y<Q){i.didAnimalStumble=!0,(Q-=y)<=0&&(Q=0);var J=this.utilityService.getRandomInteger(1,2);e.raceVariables.icyCurrentDirectionUp=1===J;var ge=100,W=20,S=this.globalService.globalVar.modifiers.find(Ne=>"maxDriftAmountModifier"===Ne.text);void 0!==S&&(W=S.value),"Wild Toboggan"===e.ability.name&&e.type===q.Penguin&&(W*=2,ge*=2,e.ability.abilityInUse=!0),"Quick Toboggan"===e.ability.name&&e.type===q.Penguin&&(e.ability.abilityInUse=!1);var Me=0;(Me=Q>ge?W:Q/ge*W)>W&&(Me=W),e.raceVariables.icyCurrentDirectionUp?e.raceVariables.icyCurrentYAmount-=Me:e.raceVariables.icyCurrentYAmount+=Me,e.raceVariables.icyCurrentYAmount>=D&&(e.raceVariables.icyCurrentYAmount=D),e.raceVariables.icyCurrentYAmount<=w&&(e.raceVariables.icyCurrentYAmount=w),h.addRaceUpdate(v,f+" drifts to the side, losing "+Me.toFixed(2)+"% max speed."),i.driftAmount=e.raceVariables.icyCurrentDirectionUp?-Me:Me,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount}else i.driftAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,"Quick Toboggan"===e.ability.name&&e.type===q.Penguin&&(h.addRaceUpdate(v,f+" slides through without drifting, gaining speed."),this.globalService.increaseAbilityXp(e),d.permanentMaxSpeedIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,o.powerModifier,u)/100,e.ability.abilityInUse=!0);return _}}handleLavaFall(e,i,r,a,s,o,l,c){for(var u=!1,d=i/this.frameModifier,h=s/r,f=[.4,.45,.5,.55,.6],v=[],_=0;_<f.length;_++){var D=h*f[_],w=d/D;w>1&&(w=1),v.push(w);var y=a>f[_]*s,P=y!=c[_];c[_]=y,d>=D&&P&&(e.type===q.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||(o.addRaceUpdate(l,"Lava spills out onto the course, forcing you to evacuate."),u=!0))}return this.selectedRace.raceUI.lavaFallPercentByFrame.push(v),u}handleRacePositionByFrame(e,i,r,a){var s=this.lookupService.getTotalRacersByRace(e),o=s,l=.25,c=this.globalService.globalVar.modifiers.find(D=>"trainingTrackPaceModifier"===D.text);if(void 0!==c&&(l=c.value),e.localRaceType===kt.Track)for(var u=0;u<s-1;u++)a>e.length/(this.timeToComplete/(1+l*u))*(r/this.frameModifier)&&(o=s-(u+1));else if(2===s)a>i*(r/this.frameModifier)&&(o=1);else if(3===s){a>i*(r/this.frameModifier)&&(o=2);var f=.75,v=this.globalService.globalVar.modifiers.find(D=>"moneyMarkPaceModifier"===D.text);null!=v&&(f=v.value),a>e.length/(this.timeToComplete*f)*(r/this.frameModifier)&&(o=1)}e.raceUI.racePositionByFrame.push(o)}}return t.\u0275fac=function(e){return new(e||t)(Pe(bt),Pe(Sn),Pe(Sa),Pe(vm))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let VT=(()=>{class t{constructor(e){this.globalService=e,this.gameVersions=[1]}getLatestChanges(){return this.getVersionChanges(this.gameVersions[0])}getAllChanges(){var e=[];return this.gameVersions.forEach(i=>{e.push(this.getVersionChanges(i))}),e}getVersionChanges(e){var i="";return 1===e&&(i="Initial Launch!"),i}updatePlayerVersion(){this.gameVersions.forEach(e=>{this.globalService.globalVar.currentVersion<e&&(this.globalService.globalVar.currentVersion=e)})}}return t.\u0275fac=function(e){return new(e||t)(Pe(bt))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),BT=(()=>{class t{constructor(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setProductionMode(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setDevMode(){this.devModeActive=!0,this.forceStartNewGame=!0,this.codeCreationMode=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var At=(()=>{return(t=At||(At={}))[t.barn=0]="barn",t[t.raceselection=1]="raceselection",t[t.animals=2]="animals",t[t.decks=3]="decks",t[t.shop=4]="shop",t[t.incubator=5]="incubator",t[t.trainingtrack=6]="trainingtrack",t[t.talents=7]="talents",t[t.resources=8]="resources",t[t.faqs=9]="faqs",t[t.stats=10]="stats",t[t.settings=11]="settings",At;var t})();class FB{}let LT=(()=>{class t{constructor(e){this.globalService=e}skipTutorial(){this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.globalVar.tutorials.currentTutorialId=9}getTutorialState(e){var i=new FB;return i.id=e,1===e&&(i.tutorialText="<b>Welcome to Cultura!</b> \n\n Cultura is the name of your soon to be state of the art animal racing facility. Train and nurture your animal companions and rise through the ranks by winning circuit competitions. Mix and match different racing teams and abilities to rise as far as you can!\n\nLet's take a tour. From this page, you can select a barn where you can assign and train animals. Currently, you have a fine racing horse already set up in your first barn. Select it and let's get to work. \n\n <b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=At.barn),2===e&&(i.tutorialText="You'll have to train your animals if you want them to win. There are only a few training options to choose from now, but as you grow you will find better and faster ways to improve. Each training will develop your animals in specific ways, improving the following stats:\n\nSpeed: Increase the max speed your animal can run in a race.\nAcceleration: Increase how quickly your animal gains speed.\nEndurance: Increase the distance your animal can run before tiring out and slowing down.\nPower: Increase the efficiency of your unique ability.\nFocus: Increase the distance your animal can run before losing focus and stopping abruptly.\nAdaptability: Increase the likelihood your animal won't stumble when racing through unique paths.\n\n<b>Select a training option out of the ones outlined in red.</b>",i.associatedTab=At.barn),3===e&&(i.tutorialText="Here you can get a breakdown on the status of your animals. Here's your horse along with all of the stat information we just went over. If you need a refresher, hover over any of the stats to see what they do. Check back here often as you proceed to assign new abilities and items to your animals, as well as breeding them to gain even faster offspring.\n\nNow that your horse has had time to take a few practice laps, let's see if they have what it takes to win a race!\n\n<b>Select the 'Race' option on the right bordered in red.</b>",i.associatedTab=At.animals),4===e&&(i.tutorialText="You've got a few options here. Circuit races are all about deciding where you stand against the competition. If you win all of the circuit races for your rank, you'll move up into the next rank which may net you some nifty rewards and open up new opportunities for your facility. You can also check out the local scene and see what other options you have. That might be a good way to get your name out there and improve your renown or maybe find some stuff you couldn't find anywhere else.\n\nFor now, let's see if you can make it up to the next circuit rank. It's a nice sunny day today and that might impact how your racer runs. If you hover over a race, you'll see how the terrain or weather might impact the conditions of the race. When in doubt, hovering over an item usually gives you the information you need. Whenever you're ready, start the race. Good luck!\n\n<b>Select the race option outlined in red.</b>",i.associatedTab=At.raceselection),5===e&&(i.tutorialText="Way to go! Exciting stuff there. Looks like you've got the gist of it for now. Keep racing, make some money, and build up your facility to be as great as it can be. I'll check in with you again a little later. I look forward to seeing how far you can go!",i.associatedTab=At.raceselection),6===e&&(i.tutorialText="Nice, you've unlocked another racer! If you jump straight into a race with your untrained monkey, things probably aren't going to go well. As you race, you'll start making enough money to build more barns and train your animals simultaneously. For now, let's go back to the barn you have.\n\n<b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=At.raceselection),7===e&&(i.tutorialText="From here you can unassign an animal from a barn and bring a new animal in. As you start to branch out and race in different course types, you'll want to try and keep your team well balanced. It's not going to help you if you have a prized thoroughbred torching the competition if your follow up racer can barely make it out the gate.\n\nLet's start training your monkey now.\n\n<b>Select 'Unassign' at the top of the screen and choose 'Monkey' to train.</b>",i.associatedTab=At.barn),8===e&&(i.tutorialText="Nicely done. One last thing to talk about before I let you do whatever you want. Click your animal's name to take a shortcut to the animal page and let's talk about breeding. If you haven't named your animal, its type is its name (so for example, Monkey's name is Monkey).\n\n<b>Select your animal's type or name to jump to its page.</b>",i.associatedTab=At.barn),9===e&&(i.tutorialText="Here you can see how close your animal is to being able to breed. Training and racing both contribute to this. Once you're ready, you can breed your animal and start racing the offspring. There's a strategic element to this. After breeding, your animal will have its stats set back to their starting points, but the amount that the base stats contribute to the racing stats will increase. To keep up with the competition, you'll need to keep breeding and getting faster animals. But don't breed right before a big race or you might find yourself in trouble!\n\nThat's all I have for you. Good luck and have fun!",i.associatedTab=At.animals,this.globalService.globalVar.tutorials.tutorialCompleted=!0),i}openTutorialModal(){}}return t.\u0275fac=function(e){return new(e||t)(Pe(bt))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const VB=["addListener","removeListener"],BB=["addEventListener","removeEventListener"],LB=["on","off"];function $i(t,n,e,i){if(z(e)&&(i=e,e=void 0),i)return $i(t,n,e).pipe(d0(i));const[r,a]=function GB(t){return z(t.addEventListener)&&z(t.removeEventListener)}(t)?BB.map(s=>o=>t[s](n,o,e)):function UB(t){return z(t.addListener)&&z(t.removeListener)}(t)?VB.map(UT(t,n)):function HB(t){return z(t.on)&&z(t.off)}(t)?LB.map(UT(t,n)):[];if(!r&&bl(t))return Wn(s=>$i(s,n,e))(ai(t));if(!r)throw new TypeError("Invalid event target");return new Ae(s=>{const o=(...l)=>s.next(1<l.length?l:l[0]);return r(o),()=>a(o)})}function UT(t,n){return e=>i=>t[e](n,i)}class jB extends le{constructor(n,e){super()}schedule(n,e=0){return this}}const wh={setInterval(...t){const{delegate:n}=wh;return((null==n?void 0:n.setInterval)||setInterval)(...t)},clearInterval(t){const{delegate:n}=wh;return((null==n?void 0:n.clearInterval)||clearInterval)(t)},delegate:void 0},HT={now:()=>(HT.delegate||Date).now(),delegate:void 0};class Gc{constructor(n,e=Gc.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}Gc.now=HT.now;const GT=new class $B extends Gc{constructor(n,e=Gc.now){super(n,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}(class zB extends jB{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(n,e,i=0){return wh.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;wh.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(a){i=!0,r=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,ne(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),WB=GT;function Cm(t=0,n,e=WB){let i=-1;return null!=n&&(cv(n)?e=n:i=n),new Ae(r=>{let a=function qB(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},a)})}const{isArray:YB}=Array;function jT(t){return 1===t.length&&YB(t[0])?t[0]:t}function zT(...t){return 1===(t=jT(t)).length?ai(t[0]):new Ae(function XB(t){return n=>{let e=[];for(let i=0;e&&!n.closed&&i<t.length;i++)e.push(ai(t[i]).subscribe(Dt(n,r=>{if(e){for(let a=0;a<e.length;a++)a!==i&&e[a].unsubscribe();e=null}n.next(r)})))}}(t))}function Sh(...t){const n=vu(t),e=jT(t);return e.length?new Ae(i=>{let r=e.map(()=>[]),a=e.map(()=>!1);i.add(()=>{r=a=null});for(let s=0;!i.closed&&s<e.length;s++)ai(e[s]).subscribe(Dt(i,o=>{if(r[s].push(o),r.every(l=>l.length)){const l=r.map(c=>c.shift());i.next(n?n(...l):l),r.some((c,u)=>!c.length&&a[u])&&i.complete()}},()=>{a[s]=!0,!r[s].length&&i.complete()}));return()=>{r=a=null}}):Br}function hi(t){return nt((n,e)=>{ai(t).subscribe(Dt(e,()=>e.complete(),A)),!e.closed&&n.subscribe(e)})}function Sm(...t){const n=vu(t);return nt((e,i)=>{const r=t.length,a=new Array(r);let s=t.map(()=>!1),o=!1;for(let l=0;l<r;l++)ai(t[l]).subscribe(Dt(i,c=>{a[l]=c,!o&&!s[l]&&(s[l]=!0,(o=s.every(ke))&&(s=null))},A));e.subscribe(Dt(i,l=>{if(o){const c=[l,...a];i.next(n?n(...c):c)}}))})}function WT(t,n){return n?e=>xc(n.pipe(_i(1),function KB(){return nt((t,n)=>{t.subscribe(Dt(n,A))})}()),e.pipe(WT(t))):Wn((e,i)=>t(e,i).pipe(_i(1),function JB(t){return ft(()=>t)}(e)))}function qT(t,n=GT){const e=Cm(t,n);return WT(()=>e)}new Ae(A);var t4={left:"right",right:"left",bottom:"top",top:"bottom"};function Th(t){return t.replace(/left|right|bottom|top/g,function(n){return t4[n]})}function Ta(t){return t.split("-")[0]}var n4={start:"end",end:"start"};function YT(t){return t.replace(/start|end/g,function(n){return n4[n]})}var gr="top",Jr="bottom",ea="right",mr="left",Tm="auto",jc=[gr,Jr,ea,mr],ll="start",zc="end",XT="viewport",$c="popper",QT=jc.reduce(function(t,n){return t.concat([n+"-"+ll,n+"-"+zc])},[]),ZT=[].concat(jc,[Tm]).reduce(function(t,n){return t.concat([n,n+"-"+ll,n+"-"+zc])},[]),p4=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ta(t){if(null==t)return window;if("[object Window]"!==t.toString()){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function cl(t){return t instanceof ta(t).Element||t instanceof Element}function Nr(t){return t instanceof ta(t).HTMLElement||t instanceof HTMLElement}function KT(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ta(t).ShadowRoot||t instanceof ShadowRoot)}function gs(t){return((cl(t)?t.ownerDocument:t.document)||window.document).documentElement}var $s=Math.max,Dh=Math.min,ul=Math.round;function dl(t,n){void 0===n&&(n=!1);var e=t.getBoundingClientRect(),i=1,r=1;if(Nr(t)&&n){var a=t.offsetHeight,s=t.offsetWidth;s>0&&(i=ul(e.width)/s||1),a>0&&(r=ul(e.height)/a||1)}return{width:e.width/i,height:e.height/r,top:e.top/r,right:e.right/i,bottom:e.bottom/r,left:e.left/i,x:e.left/i,y:e.top/r}}function Dm(t){var n=ta(t);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function Mm(t){return dl(gs(t)).left+Dm(t).scrollLeft}function za(t){return ta(t).getComputedStyle(t)}function Da(t){return t?(t.nodeName||"").toLowerCase():null}function Mh(t){return"html"===Da(t)?t:t.assignedSlot||t.parentNode||(KT(t)?t.host:null)||gs(t)}function xm(t){var n=za(t);return/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX)}function JT(t){return["html","body","#document"].indexOf(Da(t))>=0?t.ownerDocument.body:Nr(t)&&xm(t)?t:JT(Mh(t))}function Wc(t,n){var e;void 0===n&&(n=[]);var i=JT(t),r=i===(null==(e=t.ownerDocument)?void 0:e.body),a=ta(i),s=r?[a].concat(a.visualViewport||[],xm(i)?i:[]):i,o=n.concat(s);return r?o:o.concat(Wc(Mh(s)))}function v4(t){return["table","td","th"].indexOf(Da(t))>=0}function eD(t){return Nr(t)&&"fixed"!==za(t).position?t.offsetParent:null}function qc(t){for(var n=ta(t),e=eD(t);e&&v4(e)&&"static"===za(e).position;)e=eD(e);return e&&("html"===Da(e)||"body"===Da(e)&&"static"===za(e).position)?n:e||function _4(t){var n=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Nr(t)&&"fixed"===za(t).position)return null;for(var r=Mh(t);Nr(r)&&["html","body"].indexOf(Da(r))<0;){var a=za(r);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||n&&"filter"===a.willChange||n&&a.filter&&"none"!==a.filter)return r;r=r.parentNode}return null}(t)||n}function tD(t,n){var e=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(e&&KT(e)){var i=n;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Rm(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function nD(t,n){return n===XT?Rm(function g4(t){var n=ta(t),e=gs(t),i=n.visualViewport,r=e.clientWidth,a=e.clientHeight,s=0,o=0;return i&&(r=i.width,a=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=i.offsetLeft,o=i.offsetTop)),{width:r,height:a,x:s+Mm(t),y:o}}(t)):cl(n)?function b4(t){var n=dl(t);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(n):Rm(function m4(t){var n,e=gs(t),i=Dm(t),r=null==(n=t.ownerDocument)?void 0:n.body,a=$s(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=$s(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-i.scrollLeft+Mm(t),l=-i.scrollTop;return"rtl"===za(r||e).direction&&(o+=$s(e.clientWidth,r?r.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}(gs(t)))}function hl(t){return t.split("-")[1]}function km(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function iD(t){var l,n=t.reference,e=t.element,i=t.placement,r=i?Ta(i):null,a=i?hl(i):null,s=n.x+n.width/2-e.width/2,o=n.y+n.height/2-e.height/2;switch(r){case gr:l={x:s,y:n.y-e.height};break;case Jr:l={x:s,y:n.y+n.height};break;case ea:l={x:n.x+n.width,y:o};break;case mr:l={x:n.x-e.width,y:o};break;default:l={x:n.x,y:n.y}}var c=r?km(r):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case ll:l[c]=l[c]-(n[u]/2-e[u]/2);break;case zc:l[c]=l[c]+(n[u]/2-e[u]/2)}}return l}function aD(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function sD(t,n){return n.reduce(function(e,i){return e[i]=t,e},{})}function Am(t,n){void 0===n&&(n={});var i=n.placement,r=void 0===i?t.placement:i,a=n.boundary,s=void 0===a?"clippingParents":a,o=n.rootBoundary,l=void 0===o?XT:o,c=n.elementContext,u=void 0===c?$c:c,d=n.altBoundary,h=void 0!==d&&d,f=n.padding,v=void 0===f?0:f,_=aD("number"!=typeof v?v:sD(v,jc)),w=t.rects.popper,y=t.elements[h?u===$c?"reference":$c:u],P=function C4(t,n,e){var i="clippingParents"===n?function y4(t){var n=Wc(Mh(t)),i=["absolute","fixed"].indexOf(za(t).position)>=0&&Nr(t)?qc(t):t;return cl(i)?n.filter(function(r){return cl(r)&&tD(r,i)&&"body"!==Da(r)}):[]}(t):[].concat(n),r=[].concat(i,[e]),s=r.reduce(function(o,l){var c=nD(t,l);return o.top=$s(c.top,o.top),o.right=Dh(c.right,o.right),o.bottom=Dh(c.bottom,o.bottom),o.left=$s(c.left,o.left),o},nD(t,r[0]));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}(cl(y)?y:y.contextElement||gs(t.elements.popper),s,l),U=dl(t.elements.reference),Q=iD({reference:U,element:w,strategy:"absolute",placement:r}),J=Rm(Object.assign({},w,Q)),ge=u===$c?J:U,W={top:P.top-ge.top+_.top,bottom:ge.bottom-P.bottom+_.bottom,left:P.left-ge.left+_.left,right:ge.right-P.right+_.right},S=t.modifiersData.offset;if(u===$c&&S){var Me=S[r];Object.keys(W).forEach(function(Ne){var Ge=[ea,Jr].indexOf(Ne)>=0?1:-1,ze=[gr,Jr].indexOf(Ne)>=0?"y":"x";W[Ne]+=Me[ze]*Ge})}return W}const D4={name:"flip",enabled:!0,phase:"main",fn:function T4(t){var n=t.state,e=t.options,i=t.name;if(!n.modifiersData[i]._skip){for(var r=e.mainAxis,a=void 0===r||r,s=e.altAxis,o=void 0===s||s,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,h=e.altBoundary,f=e.flipVariations,v=void 0===f||f,_=e.allowedAutoPlacements,D=n.options.placement,w=Ta(D),P=l||(w!==D&&v?function S4(t){if(Ta(t)===Tm)return[];var n=Th(t);return[YT(t),n,YT(n)]}(D):[Th(D)]),U=[D].concat(P).reduce(function(Ht,gt){return Ht.concat(Ta(gt)===Tm?function w4(t,n){void 0===n&&(n={});var r=n.boundary,a=n.rootBoundary,s=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?ZT:l,u=hl(n.placement),d=u?o?QT:QT.filter(function(v){return hl(v)===u}):jc,h=d.filter(function(v){return c.indexOf(v)>=0});0===h.length&&(h=d);var f=h.reduce(function(v,_){return v[_]=Am(t,{placement:_,boundary:r,rootBoundary:a,padding:s})[Ta(_)],v},{});return Object.keys(f).sort(function(v,_){return f[v]-f[_]})}(n,{placement:gt,boundary:u,rootBoundary:d,padding:c,flipVariations:v,allowedAutoPlacements:_}):gt)},[]),Q=n.rects.reference,J=n.rects.popper,ge=new Map,W=!0,S=U[0],Me=0;Me<U.length;Me++){var Ne=U[Me],Ge=Ta(Ne),ze=hl(Ne)===ll,lt=[gr,Jr].indexOf(Ge)>=0,ct=lt?"width":"height",$t=Am(n,{placement:Ne,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),$e=lt?ze?ea:mr:ze?Jr:gr;Q[ct]>J[ct]&&($e=Th($e));var Vt=Th($e),Tn=[];if(a&&Tn.push($t[Ge]<=0),o&&Tn.push($t[$e]<=0,$t[Vt]<=0),Tn.every(function(Ht){return Ht})){S=Ne,W=!1;break}ge.set(Ne,Tn)}if(W)for(var Bn=function(gt){var Xt=U.find(function(We){var Gn=ge.get(We);if(Gn)return Gn.slice(0,gt).every(function(_n){return _n})});if(Xt)return S=Xt,"break"},Dn=v?3:1;Dn>0&&"break"!==Bn(Dn);Dn--);n.placement!==S&&(n.modifiersData[i]._skip=!0,n.placement=S,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Yc(t,n,e){return $s(t,Dh(n,e))}function Em(t){var n=dl(t),e=t.offsetWidth,i=t.offsetHeight;return Math.abs(n.width-e)<=1&&(e=n.width),Math.abs(n.height-i)<=1&&(i=n.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:i}}const k4={name:"preventOverflow",enabled:!0,phase:"main",fn:function R4(t){var n=t.state,e=t.options,i=t.name,r=e.mainAxis,a=void 0===r||r,s=e.altAxis,o=void 0!==s&&s,h=e.tether,f=void 0===h||h,v=e.tetherOffset,_=void 0===v?0:v,D=Am(n,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),w=Ta(n.placement),y=hl(n.placement),P=!y,U=km(w),Q=function M4(t){return"x"===t?"y":"x"}(U),J=n.modifiersData.popperOffsets,ge=n.rects.reference,W=n.rects.popper,S="function"==typeof _?_(Object.assign({},n.rects,{placement:n.placement})):_,Me="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),Ne=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,Ge={x:0,y:0};if(J){if(a){var ze,lt="y"===U?gr:mr,ct="y"===U?Jr:ea,$t="y"===U?"height":"width",$e=J[U],Vt=$e+D[lt],Tn=$e-D[ct],an=f?-W[$t]/2:0,Bn=y===ll?ge[$t]:W[$t],Dn=y===ll?-W[$t]:-ge[$t],Wt=n.elements.arrow,Ht=f&&Wt?Em(Wt):{width:0,height:0},gt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Xt=gt[lt],We=gt[ct],Gn=Yc(0,ge[$t],Ht[$t]),_n=P?ge[$t]/2-an-Gn-Xt-Me.mainAxis:Bn-Gn-Xt-Me.mainAxis,ri=P?-ge[$t]/2+an+Gn+We+Me.mainAxis:Dn+Gn+We+Me.mainAxis,Pn=n.elements.arrow&&qc(n.elements.arrow),Jn=null!=(ze=null==Ne?void 0:Ne[U])?ze:0,Di=$e+ri-Jn,gi=Yc(f?Dh(Vt,$e+_n-Jn-(Pn?"y"===U?Pn.clientTop||0:Pn.clientLeft||0:0)):Vt,$e,f?$s(Tn,Di):Tn);J[U]=gi,Ge[U]=gi-$e}if(o){var zn,Gt=J[Q],bn="y"===Q?"height":"width",mi=Gt+D["x"===U?gr:mr],$a=Gt-D["x"===U?Jr:ea],Or=-1!==[gr,mr].indexOf(w),ia=null!=(zn=null==Ne?void 0:Ne[Q])?zn:0,In=Or?mi:Gt-ge[bn]-W[bn]-ia+Me.altAxis,Mn=Or?Gt+ge[bn]+W[bn]-ia-Me.altAxis:$a,Zt=f&&Or?function x4(t,n,e){var i=Yc(t,n,e);return i>e?e:i}(In,Gt,Mn):Yc(f?In:mi,Gt,f?Mn:$a);J[Q]=Zt,Ge[Q]=Zt-Gt}n.modifiersData[i]=Ge}},requiresIfExists:["offset"]},I4={name:"arrow",enabled:!0,phase:"main",fn:function E4(t){var n,e=t.state,i=t.name,r=t.options,a=e.elements.arrow,s=e.modifiersData.popperOffsets,o=Ta(e.placement),l=km(o),u=[mr,ea].indexOf(o)>=0?"height":"width";if(a&&s){var d=function(n,e){return aD("number"!=typeof(n="function"==typeof n?n(Object.assign({},e.rects,{placement:e.placement})):n)?n:sD(n,jc))}(r.padding,e),h=Em(a),f="y"===l?gr:mr,v="y"===l?Jr:ea,_=e.rects.reference[u]+e.rects.reference[l]-s[l]-e.rects.popper[u],D=s[l]-e.rects.reference[l],w=qc(a),y=w?"y"===l?w.clientHeight||0:w.clientWidth||0:0,J=y/2-h[u]/2+(_/2-D/2),ge=Yc(d[f],J,y-h[u]-d[v]);e.modifiersData[i]=((n={})[l]=ge,n.centerOffset=ge-J,n)}},effect:function P4(t){var n=t.state,i=t.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=n.elements.popper.querySelector(r))||!tD(n.elements.popper,r)||(n.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function V4(t,n,e){void 0===e&&(e=!1);var i=Nr(n),r=Nr(n)&&function F4(t){var n=t.getBoundingClientRect(),e=ul(n.width)/t.offsetWidth||1,i=ul(n.height)/t.offsetHeight||1;return 1!==e||1!==i}(n),a=gs(n),s=dl(t,r),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&(("body"!==Da(n)||xm(a))&&(o=function O4(t){return t!==ta(t)&&Nr(t)?function N4(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):Dm(t)}(n)),Nr(n)?((l=dl(n,!0)).x+=n.clientLeft,l.y+=n.clientTop):a&&(l.x=Mm(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function B4(t){var n=new Map,e=new Set,i=[];function r(a){e.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(o){if(!e.has(o)){var l=n.get(o);l&&r(l)}}),i.push(a)}return t.forEach(function(a){n.set(a.name,a)}),t.forEach(function(a){e.has(a.name)||r(a)}),i}function U4(t){var n;return function(){return n||(n=new Promise(function(e){Promise.resolve().then(function(){n=void 0,e(t())})})),n}}var oD={placement:"bottom",modifiers:[],strategy:"absolute"};function lD(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return!n.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function G4(t){void 0===t&&(t={});var e=t.defaultModifiers,i=void 0===e?[]:e,r=t.defaultOptions,a=void 0===r?oD:r;return function(o,l,c){void 0===c&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},oD,a),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(w){var y="function"==typeof w?w(u.options):w;_(),u.options=Object.assign({},a,u.options,y),u.scrollParents={reference:cl(o)?Wc(o):o.contextElement?Wc(o.contextElement):[],popper:Wc(l)};var P=function L4(t){var n=B4(t);return p4.reduce(function(e,i){return e.concat(n.filter(function(r){return r.phase===i}))},[])}(function H4(t){var n=t.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(n).map(function(e){return n[e]})}([].concat(i,u.options.modifiers)));return u.orderedModifiers=P.filter(function(Ne){return Ne.enabled}),function v(){u.orderedModifiers.forEach(function(D){var y=D.options,U=D.effect;if("function"==typeof U){var Q=U({state:u,name:D.name,instance:f,options:void 0===y?{}:y});d.push(Q||function(){})}})}(),f.update()},forceUpdate:function(){if(!h){var w=u.elements,y=w.reference,P=w.popper;if(lD(y,P)){u.rects={reference:V4(y,qc(P),"fixed"===u.options.strategy),popper:Em(P)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(Ne){return u.modifiersData[Ne.name]=Object.assign({},Ne.data)});for(var Q=0;Q<u.orderedModifiers.length;Q++)if(!0!==u.reset){var J=u.orderedModifiers[Q],ge=J.fn,W=J.options;"function"==typeof ge&&(u=ge({state:u,options:void 0===W?{}:W,name:J.name,instance:f})||u)}else u.reset=!1,Q=-1}}},update:U4(function(){return new Promise(function(D){f.forceUpdate(),D(u)})}),destroy:function(){_(),h=!0}};if(!lD(o,l))return f;function _(){d.forEach(function(D){return D()}),d=[]}return f.setOptions(c).then(function(D){!h&&c.onFirstUpdate&&c.onFirstUpdate(D)}),f}}var xh={passive:!0},q4={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cD(t){var n,e=t.popper,i=t.popperRect,r=t.placement,a=t.variation,s=t.offsets,o=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=s.x,f=void 0===h?0:h,v=s.y,_=void 0===v?0:v,D="function"==typeof u?u({x:f,y:_}):{x:f,y:_};f=D.x,_=D.y;var w=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),P=mr,U=gr,Q=window;if(c){var J=qc(e),ge="clientHeight",W="clientWidth";J===ta(e)&&"static"!==za(J=gs(e)).position&&"absolute"===o&&(ge="scrollHeight",W="scrollWidth"),J=J,(r===gr||(r===mr||r===ea)&&a===zc)&&(U=Jr,_-=(d&&Q.visualViewport?Q.visualViewport.height:J[ge])-i.height,_*=l?1:-1),r!==mr&&(r!==gr&&r!==Jr||a!==zc)||(P=ea,f-=(d&&Q.visualViewport?Q.visualViewport.width:J[W])-i.width,f*=l?1:-1)}var ze,Ne=Object.assign({position:o},c&&q4),Ge=!0===u?function Y4(t){var e=t.y,r=window.devicePixelRatio||1;return{x:ul(t.x*r)/r||0,y:ul(e*r)/r||0}}({x:f,y:_}):{x:f,y:_};return f=Ge.x,_=Ge.y,Object.assign({},Ne,l?((ze={})[U]=y?"0":"",ze[P]=w?"0":"",ze.transform=(Q.devicePixelRatio||1)<=1?"translate("+f+"px, "+_+"px)":"translate3d("+f+"px, "+_+"px, 0)",ze):((n={})[U]=y?_+"px":"",n[P]=w?f+"px":"",n.transform="",n))}var e5=G4({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function j4(t){var n=t.state,e=t.instance,i=t.options,r=i.scroll,a=void 0===r||r,s=i.resize,o=void 0===s||s,l=ta(n.elements.popper),c=[].concat(n.scrollParents.reference,n.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",e.update,xh)}),o&&l.addEventListener("resize",e.update,xh),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",e.update,xh)}),o&&l.removeEventListener("resize",e.update,xh)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function $4(t){var n=t.state;n.modifiersData[t.name]=iD({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function X4(t){var n=t.state,e=t.options,i=e.gpuAcceleration,r=void 0===i||i,a=e.adaptive,s=void 0===a||a,o=e.roundOffsets,l=void 0===o||o,u={placement:Ta(n.placement),variation:hl(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:r,isFixed:"fixed"===n.options.strategy};null!=n.modifiersData.popperOffsets&&(n.styles.popper=Object.assign({},n.styles.popper,cD(Object.assign({},u,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:s,roundOffsets:l})))),null!=n.modifiersData.arrow&&(n.styles.arrow=Object.assign({},n.styles.arrow,cD(Object.assign({},u,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function Z4(t){var n=t.state;Object.keys(n.elements).forEach(function(e){var i=n.styles[e]||{},r=n.attributes[e]||{},a=n.elements[e];!Nr(a)||!Da(a)||(Object.assign(a.style,i),Object.keys(r).forEach(function(s){var o=r[s];!1===o?a.removeAttribute(s):a.setAttribute(s,!0===o?"":o)}))})},effect:function K4(t){var n=t.state,e={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,e.popper),n.styles=e,n.elements.arrow&&Object.assign(n.elements.arrow.style,e.arrow),function(){Object.keys(n.elements).forEach(function(i){var r=n.elements[i],a=n.attributes[i]||{},o=Object.keys(n.styles.hasOwnProperty(i)?n.styles[i]:e[i]).reduce(function(l,c){return l[c]="",l},{});!Nr(r)||!Da(r)||(Object.assign(r.style,o),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]}]});const i5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function n5(t){var n=t.state,i=t.name,r=t.options.offset,a=void 0===r?[0,0]:r,s=ZT.reduce(function(u,d){return u[d]=function t5(t,n,e){var i=Ta(t),r=[mr,gr].indexOf(i)>=0?-1:1,a="function"==typeof e?e(Object.assign({},n,{placement:t})):e,s=a[0],o=a[1];return s=s||0,o=(o||0)*r,[mr,ea].indexOf(i)>=0?{x:o,y:s}:{x:s,y:o}}(d,n.rects,a),u},{}),o=s[n.placement],c=o.y;null!=n.modifiersData.popperOffsets&&(n.modifiersData.popperOffsets.x+=o.x,n.modifiersData.popperOffsets.y+=c),n.modifiersData[i]=s}},Pm=["*"],R5=["dialog"];function sL(t,n){1&t&&b(0),2&t&&ht(x(2).title)}function oL(t,n){}function lL(t,n){if(1&t&&(g(0,"h3",3),I(1,sL,1,1,"ng-template",null,4,Ot),I(3,oL,0,0,"ng-template",5),p()),2&t){const e=Pt(2),i=x();m(3),C("ngTemplateOutlet",i.isTitleTemplate()?i.title:e)("ngTemplateOutletContext",i.context)}}function cL(t,n){if(1&t&&(g(0,"span"),Fa(1,2),Ut(2,"percent"),p()),2&t){const e=x();m(2),pd(function Yy(t,n,e){const i=t+20,r=we(),a=lo(r,i);return dc(r,i)?jy(r,Fi(),n,a.transform,e,a):a.transform(e)}(2,1,e.getValue()/e.max)),function og(t){!function pE(t,n,e){if(ac>0){const i=t.data[e];by(t,n,Array.isArray(i)?i:i.update,Pa()-ac-1,rc)}rc=0,ac=0}(zt(),we(),t+20)}(1)}}function Ma(t){return!isNaN(function Rh(t){return parseInt(`${t}`,10)}(t))}function Ws(t){return null!=t}function fl(t){return(t||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let n=this;if(!document.documentElement.contains(n))return null;do{if(n.matches(t))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null});const hD={animation:!0,transitionTimerDelayMs:5},TL=()=>{},{transitionTimerDelayMs:DL}=hD,Xc=new Map,Wi=(t,n,e,i)=>{let r=i.context||{};const a=Xc.get(n);if(a)switch(i.runningTransition){case"continue":return Br;case"stop":t.run(()=>a.transition$.complete()),r=Object.assign(a.context,r),Xc.delete(n)}const s=e(n,i.animation,r)||TL;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return t.run(()=>s()),st(void 0).pipe(function wL(t){return n=>new Ae(e=>n.subscribe({next:s=>t.run(()=>e.next(s)),error:s=>t.run(()=>e.error(s)),complete:()=>t.run(()=>e.complete())}))}(t));const o=new he,l=new he,c=o.pipe(function QB(...t){return n=>xc(n,st(...t))}(!0));Xc.set(n,{transition$:o,complete:()=>{l.next(),l.complete()},context:r});const u=function SL(t){const{transitionDelay:n,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(n)+parseFloat(e))}(n);return t.runOutsideAngular(()=>{const d=$i(n,"transitionend").pipe(hi(c),Si(({target:f})=>f===n));zT(Cm(u+DL).pipe(hi(c)),d,l).pipe(hi(c)).subscribe(()=>{Xc.delete(n),t.run(()=>{s(),o.next(),o.complete()})})}),o.asObservable()};let Qc=(()=>{class t{constructor(){this.animation=hD.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er]]}),t})(),bD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er]]}),t})(),CD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({}),t})(),TD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er]]}),t})(),DD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({}),t})();var fi=(()=>{return(t=fi||(fi={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",fi;var t})();const Ah=(t,n)=>!!n&&n.some(e=>e.contains(t)),MD=(t,n)=>!n||null!=function CL(t,n){return n&&void 0!==t.closest?t.closest(n):null}(t,n),jL="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function xD(t,n,e,i,r,a,s,o){e&&t.runOutsideAngular((t=>jL?()=>setTimeout(()=>t(),100):t)(()=>{const c=$i(n,"keydown").pipe(hi(r),Si(h=>h.which===fi.Escape),Ii(h=>h.preventDefault())),u=$i(n,"mousedown").pipe(ft(h=>{const f=h.target;return 2!==h.button&&!Ah(f,s)&&("inside"===e?Ah(f,a)&&MD(f,o):"outside"===e?!Ah(f,a):MD(f,o)||!Ah(f,a))}),hi(r)),d=$i(n,"mouseup").pipe(Sm(u),Si(([h,f])=>f),qT(0),hi(r));zT([c.pipe(ft(h=>0)),d.pipe(ft(h=>1))]).subscribe(h=>t.run(()=>i(h)))}))}const RD=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function kD(t){const n=Array.from(t.querySelectorAll(RD)).filter(e=>-1!==e.tabIndex);return[n[0],n[n.length-1]]}const WL=/\s+/,qL=/  +/gi,YL=/^start/,XL=/^end/,QL=/-(top|left)$/,ZL=/-(bottom|right)$/,JL=/^left/,e8=/^right/,t8=/^start/,n8=/^end/;function AD({placement:t,baseClass:n}){let e=Array.isArray(t)?t:t.split(WL),r=e.findIndex(l=>"auto"===l);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(l){null==e.find(c=>-1!==c.search("^"+l))&&e.splice(r++,1,l)});const a=e.map(l=>function KL(t){return t.replace(YL,"left").replace(XL,"right").replace(QL,"-start").replace(ZL,"-end")}(l));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!n,phase:"write",fn({state:l}){const c=new RegExp(n+"-[a-z]+","gi"),u=l.elements.popper,d=l.placement;let h=u.className;h=h.replace(c,""),h+=` ${function i8(t,n){let[e,i]=n.split("-");const r=e.replace(JL,"start").replace(e8,"end");let a=[r];if(i){let s=i;("left"===e||"right"===e)&&(s=s.replace(t8,"top").replace(n8,"bottom")),a.push(`${r}-${s}`)}return t&&(a=a.map(s=>`${t}-${s}`)),a.join(" ")}(n,d)}`,h=h.trim().replace(qL," "),u.className=h}},D4,k4,I4,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function ED(t){return t}function PD(){let t=null;return{createPopper(n){if(!t){let i=(n.updatePopperOptions||ED)(AD(n));t=e5(n.hostElement,n.targetElement,i)}},update(){t&&t.update()},setOptions(n){if(t){let i=(n.updatePopperOptions||ED)(AD(n));t.setOptions(i)}},destroy(){t&&(t.destroy(),t=null)}}}new Date(1882,10,12),new Date(2174,10,25);let BD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er,TS]]}),t})(),h8=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),LD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Oe({type:t,selectors:[["",8,"navbar"]]}),t})(),Hm=(()=>{class t{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(E(tn))},t.\u0275dir=Oe({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,i){2&e&&it("disabled",i.disabled)},inputs:{disabled:"disabled"}}),t})(),Nh=(()=>{class t{constructor(e,i){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(E(qt(()=>gl)),E(tn))},t.\u0275dir=Oe({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,i,r){if(1&e&&Xn(r,Hm,4),2&e){let a;cn(a=un())&&(i.menuItems=a)}},hostVars:5,hostBindings:function(e,i){1&e&&F("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return i.dropdown.onKeyDown(a)})("keydown.Space",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&(ln("data-popper",i.placement),it("dropdown-menu",!0)("show",i.dropdown.isOpen()))}}),t})(),Oh=(()=>{class t{constructor(e,i){this.dropdown=e,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(E(qt(()=>gl)),E(tn))},t.\u0275dir=Oe({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){2&e&&ln("aria-expanded",i.dropdown.isOpen())}}),t})(),Gm=(()=>{class t extends Oh{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(E(qt(()=>gl)),E(tn))},t.\u0275dir=Oe({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){1&e&&F("click",function(){return i.dropdown.toggle()})("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&ln("aria-expanded",i.dropdown.isOpen())},features:[mn([{provide:Oh,useExisting:qt(()=>t)}]),en]}),t})(),gl=(()=>{class t{constructor(e,i,r,a,s,o,l){this._changeDetector=e,this._document=r,this._ngZone=a,this._elementRef=s,this._renderer=o,this._closed$=new he,this._bodyContainer=null,this._positioning=PD(),this._open=!1,this.openChange=new je,this.placement=i.placement,this.container=i.container,this.autoClose=i.autoClose,this.display=l?"static":"dynamic",this._zoneSubscription=a.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(_i(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:i,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(i,r)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.onStable.pipe(_i(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()})))}_setCloseHandlers(){xD(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._positioning.destroy(),this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const i=e.which,r=this._getMenuElements();let a=-1,s=null;const o=this._isEventFromToggle(e);if(!o&&r.length&&r.forEach((l,c)=>{l.contains(e.target)&&(s=l),l===this._document.activeElement&&(a=c)}),i!==fi.Space&&i!==fi.Enter){if(i!==fi.Tab){if(o||s){if(this.open(),r.length){switch(i){case fi.ArrowDown:a=Math.min(a+1,r.length-1);break;case fi.ArrowUp:if(this._isDropup()&&-1===a){a=r.length-1;break}a=Math.max(a-1,0);break;case fi.Home:a=0;break;case fi.End:a=r.length-1}r[a].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const l=this._menu.nativeElement.querySelectorAll(RD);e.shiftKey&&e.target===l[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===l[l.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else $i(e.target,"focusout").pipe(_i(1)).subscribe(({relatedTarget:l})=>{this._elementRef.nativeElement.contains(l)||this.close()})}}else s&&(!0===this.autoClose||"inside"===this.autoClose)&&$i(s,"click").pipe(_i(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(i=>!i.disabled).map(i=>i.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const i=this._renderer,r=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||i.createElement("div");i.setStyle(a,"position","absolute"),i.setStyle(r,"position","static"),i.setStyle(a,"z-index","1050"),i.appendChild(a,r),i.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,i){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(i&&this._renderer.removeClass(r,i),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const i=this._menu;if(i){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,a=this._elementRef.nativeElement;r.removeClass(a,"dropup"),r.removeClass(a,"dropdown");const{nativeElement:s}=i;"static"===this.display?(i.placement=null,r.setAttribute(s,"data-bs-popper","static")):(i.placement=e,r.removeAttribute(s,"data-bs-popper"));const o=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(a,o);const l=this._bodyContainer;l&&(r.removeClass(l,"dropup"),r.removeClass(l,"dropdown"),r.addClass(l,o))}}}return t.\u0275fac=function(e){return new(e||t)(E(dr),E(h8),E(ti),E(vn),E(tn),E(Mr),E(LD,8))},t.\u0275dir=Oe({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(e,i,r){if(1&e&&(Xn(r,Nh,5),Xn(r,Oh,5)),2&e){let a;cn(a=un())&&(i._menu=a.first),cn(a=un())&&(i._anchor=a.first)}},hostVars:2,hostBindings:function(e,i){2&e&&it("show",i.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[yi]}),t})(),UD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({}),t})();class Qs{constructor(n,e,i){this.nodes=n,this.viewRef=e,this.componentRef=i}}class f8{constructor(n,e,i,r,a,s){this._type=n,this._injector=e,this._viewContainerRef=i,this._renderer=r,this._ngZone=a,this._applicationRef=s,this._windowRef=null,this._contentRef=null}open(n,e,i=!1){this._windowRef||(this._contentRef=this._getContentRef(n,e),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,a=this._ngZone.onStable.pipe(_i(1),Wn(()=>Wi(this._ngZone,r,({classList:s})=>s.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:a}}close(n=!1){return this._windowRef?Wi(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:n,runningTransition:"stop"}).pipe(Ii(()=>{var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):st(void 0)}_getContentRef(n,e){if(n){if(n instanceof An){const i=n.createEmbeddedView(e);return this._applicationRef.attachView(i),new Qs([i.rootNodes],i)}return new Qs([[this._renderer.createText(`${n}`)]])}return new Qs([])}}let p8=(()=>{class t{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(_i(1)).subscribe(()=>{Wi(this._zone,this._el.nativeElement,(e,i)=>{i&&fl(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Wi(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(E(tn),E(vn))},t.\u0275cmp=Je({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(is("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),it("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),t})();class HD{close(n){}dismiss(n){}}class g8{constructor(n,e,i,r){this._windowCmptRef=n,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new he,this._dismissed=new he,this._hidden=new he,n.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,s)=>{this._resolve=a,this._reject=s}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(hi(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(hi(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function yL(t){return t&&t.then}(e)?!1!==e&&this._dismiss(n):e.then(i=>{!1!==i&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():st(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Sh(n,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var eu=(()=>{return(t=eu||(eu={}))[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",eu;var t})();let m8=(()=>{class t{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new he,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new je,this.shown=new he,this.hidden=new he}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(_i(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},s=Sh(Wi(this._zone,e,()=>e.classList.remove("show"),i),Wi(this._zone,this._dialogEl.nativeElement,()=>{},i));return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){const e={animation:this.animation,runningTransition:"continue"};Sh(Wi(this._zone,this._elRef.nativeElement,(a,s)=>{s&&fl(a),a.classList.add("show")},e),Wi(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{$i(e,"keydown").pipe(hi(this._closed$),Si(r=>r.which===fi.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(eu.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;$i(this._dialogEl.nativeElement,"mousedown").pipe(hi(this._closed$),Ii(()=>i=!1),Ha(()=>$i(e,"mouseup").pipe(hi(this._closed$),_i(1))),Si(({target:r})=>e===r)).subscribe(()=>{i=!0}),$i(e,"click").pipe(hi(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(eu.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=kD(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Wi(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(E(ti),E(tn),E(vn))},t.\u0275cmp=Je({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&Ba(R5,7),2&e){let r;cn(r=un())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(ln("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),is("modal d-block"+(i.windowClass?" "+i.windowClass:"")),it("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Pm,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(ad(),g(0,"div",0,1)(2,"div",2),sd(3),p()()),2&e&&is("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),v8=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:a,paddingRight:s}=r;if(e>0){const o=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${o+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=s),r.overflow=a}}}return t.\u0275fac=function(e){return new(e||t)(Pe(ti))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_8=(()=>{class t{constructor(e,i,r,a,s,o){this._applicationRef=e,this._injector=i,this._document=r,this._scrollBar=a,this._rendererFactory=s,this._ngZone=o,this._activeWindowCmptHasChanged=new he,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new je,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((t,n,e,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=$i(n,"focusin").pipe(hi(e),ft(a=>a.target));$i(n,"keydown").pipe(hi(e),Si(a=>a.which===fi.Tab),Sm(r)).subscribe(([a,s])=>{const[o,l]=kD(n);(s===o||s===n)&&a.shiftKey&&(l.focus(),a.preventDefault()),s===l&&!a.shiftKey&&(o.focus(),a.preventDefault())}),i&&$i(n,"click").pipe(hi(e),Sm(r),ft(a=>a[1])).subscribe(a=>a.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(e,i,r,a){const s=a.container instanceof HTMLElement?a.container:Ws(a.container)?this._document.querySelector(a.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.hide(),c=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!s)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const u=new HD,d=this._getContentRef(e,a.injector||i,r,u,a);let h=!1!==a.backdrop?this._attachBackdrop(e,s):void 0,f=this._attachWindowComponent(e,s,d),v=new g8(f,d,h,a.beforeDismiss);return this._registerModalRef(v),this._registerWindowCmpt(f),v.result.then(l,l),v.result.then(c,c),u.close=_=>{v.close(_)},u.dismiss=_=>{v.dismiss(_)},this._applyWindowOptions(f.instance,a),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),h&&h.instance&&(this._applyBackdropOptions(h.instance,a),h.changeDetectorRef.detectChanges()),f.changeDetectorRef.detectChanges(),v}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,i){let a=e.resolveComponentFactory(p8).create(this._injector);return this._applicationRef.attachView(a.hostView),i.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,i,r){let s=e.resolveComponentFactory(m8).create(this._injector,r.nodes);return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{Ws(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{Ws(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,a,s){return r?r instanceof An?this._createFromTemplateRef(r,a):function dD(t){return"string"==typeof t}(r)?this._createFromString(r):this._createFromComponent(e,i,r,a,s):new Qs([])}_createFromTemplateRef(e,i){const a=e.createEmbeddedView({$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}});return this._applicationRef.attachView(a),new Qs([a.rootNodes],a)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new Qs([[i]])}_createFromComponent(e,i,r,a,s){const o=e.resolveComponentFactory(r),l=Yn.create({providers:[{provide:HD,useValue:a}],parent:i}),c=o.create(l),u=c.location.nativeElement;return s.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new Qs([[u]],c.hostView,c)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(Pe(Os),Pe(Yn),Pe(ti),Pe(v8),Pe(hg),Pe(vn))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),b8=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Pe(Qc))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),vs=(()=>{class t{constructor(e,i,r,a){this._moduleCFR=e,this._injector=i,this._modalStack=r,this._config=a}open(e,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(Pe(Is),Pe(Yn),Pe(_8),Pe(b8))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),GD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({providers:[vs]}),t})(),WD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er]]}),t})(),eM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er]]}),t})();class D8{constructor(n,e){this.open=n,this.close=e,e||(this.close=n)}isManual(){return"manual"===this.open||"manual"===this.close}}const M8={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},tM=t=>t>0?qT(t):n=>n;let E8=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Pe(Qc))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),P8=0;function I8(t){return t.modifiers.push(i5,{name:"offset",options:{offset:()=>[0,12]}}),t}let N8=(()=>{class t{isTitleTemplate(){return this.title instanceof An}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Je({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,i){2&e&&(rs("id",i.id),is("popover"+(i.popoverClass?" "+i.popoverClass:"")),it("fade",i.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:Pm,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(ad(),H(0,"div",0),I(1,lL,4,2,"h3",1),g(2,"div",2),sd(3),p()),2&e&&(m(1),C("ngIf",i.title))},directives:[Kt,Qo],encapsulation:2,changeDetection:0}),t})(),Ra=(()=>{class t{constructor(e,i,r,a,s,o,l,c,u){this._elementRef=e,this._renderer=i,this._ngZone=o,this._document=l,this._changeDetector=c,this.shown=new je,this.hidden=new je,this._ngbPopoverWindowId="ngb-popover-"+P8++,this._windowRef=null,this._positioning=PD(),this.animation=s.animation,this.autoClose=s.autoClose,this.placement=s.placement,this.triggers=s.triggers,this.container=s.container,this.disablePopover=s.disablePopover,this.popoverClass=s.popoverClass,this.openDelay=s.openDelay,this.closeDelay=s.closeDelay,this._popupService=new f8(N8,r,a,i,this._ngZone,u),this._zoneSubscription=o.onStable.subscribe(()=>{this._positioning.update()})}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:i,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=i,this._windowRef.instance.animation=this.animation,this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(_i(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:I8})}),xD(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function A8(t,n,e,i,r,a,s=0,o=0){const l=function x8(t,n=M8){const e=(t||"").trim();if(0===e.length)return[];const i=e.split(/\s+/).map(a=>a.split(":")).map(a=>{let s=n[a[0]]||a;return new D8(s[0],s[1])}),r=i.filter(a=>a.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(e);if(1===l.length&&l[0].isManual())return()=>{};const c=function R8(t,n,e,i){return new Ae(r=>{const a=[],s=()=>r.next(!0),o=()=>r.next(!1),l=()=>r.next(!i());return e.forEach(c=>{c.open===c.close?a.push(t.listen(n,c.open,l)):a.push(t.listen(n,c.open,s),t.listen(n,c.close,o))}),()=>{a.forEach(c=>c())}})}(t,n,l,i).pipe(function k8(t,n,e){return i=>{let r=null;const a=i.pipe(ft(l=>({open:l})),Si(l=>{const c=e();return c===l.open||r&&r.open!==c?(r&&r.open!==l.open&&(r=null),!1):(r=l,!0)}),pv());return fv(a.pipe(Si(l=>l.open),tM(t)),a.pipe(Si(l=>!l.open),tM(n))).pipe(Si(l=>l===r&&(r=null,l.open!==e())),ft(l=>l.open))}}(s,o,i)).subscribe(u=>u?r():a());return()=>c.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:i,disablePopover:r,popoverClass:a}){a&&this.isOpen()&&(this._windowRef.instance.popoverClass=a.currentValue),(e||i||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(tn),E(Mr),E(Yn),E(xr),E(E8),E(vn),E(ti),E(dr),E(Os))},t.\u0275dir=Oe({type:t,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[yi]}),t})(),nM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er]]}),t})(),O8=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Wm=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!Ma(e)||e<=0?100:e}get max(){return this._max}getValue(){return function uD(t,n,e=0){return Math.max(Math.min(t,n),e)}(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(E(O8))},t.\u0275cmp=Je({type:t,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(e,i){2&e&&tc("height",i.height)},inputs:{max:"max",animated:"animated",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},ngContentSelectors:Pm,decls:3,vars:11,consts:function(){let n;return n=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],n]},template:function(e,i){1&e&&(ad(),g(0,"div",0),I(1,cL,3,3,"span",1),sd(2),p()),2&e&&(Z1("progress-bar",i.type?" bg-"+i.type:"","",i.textType?" text-"+i.textType:"","\n    ",i.animated?" progress-bar-animated":"","",i.striped?" progress-bar-striped":"",""),tc("width",i.getPercentValue(),"%"),ln("aria-valuenow",i.getValue())("aria-valuemax",i.max),m(1),C("ngIf",i.showValue))},directives:[Kt],pipes:[ow],encapsulation:2,changeDetection:0}),t})(),iM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er]]}),t})(),rM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er]]}),t})(),aM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er]]}),t})(),sM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er]]}),t})(),oM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({}),t})();new xt("live announcer delay",{providedIn:"root",factory:function B8(){return 100}});let lM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[[er]]}),t})();const L8=[_D,bD,CD,TD,DD,BD,UD,GD,WD,eM,nM,iM,rM,aM,sM,oM,lM];let U8=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t}),t.\u0275inj=Jt({imports:[L8,_D,bD,CD,TD,DD,BD,UD,GD,WD,eM,nM,iM,rM,aM,sM,oM,lM]}),t})(),wi=(()=>{class t{constructor(){this.switchView=new Zn(At.barn),this.selectAnimalView=new Zn(new Lt),this.selectBarnView=new Zn(0)}setNewView(e){e!==this.switchView.value&&this.switchView.next(e)}getNewView(){return this.switchView.asObservable()}setAnimalView(e,i){i!==this.selectAnimalView.value&&this.selectAnimalView.next(i),e!==this.switchView.value&&this.switchView.next(e)}getAnimalView(){return this.selectAnimalView.asObservable()}setBarnView(e,i){i!==this.selectBarnView.value&&this.selectBarnView.next(i),e!==this.switchView.value&&this.switchView.next(e)}getBarnView(){return this.selectBarnView.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function H8(t,n){if(1&t){const e=be();g(0,"div")(1,"p",1),F("click",function(){K(e);const r=x();return r.switchView(r.navigationEnum.incubator)}),b(2,"Incubator"),p(),H(3,"hr"),p()}if(2&t){const e=x();m(1),C("ngClass",e.selectedNavigation===e.navigationEnum.incubator?"active":"")}}const cM=function(t,n){return{active:t,tutorialActive:n}};let uM=(()=>{class t{constructor(e,i,r,a){this.componentCommunicationService=e,this.lookupService=i,this.globalService=r,this.gameLoopService=a,this.viewChanged=new je,this.navigationEnum=At,this.selectedNavigation=0,this.tutorial3Active=!1,this.tutorial6Active=!1}ngOnInit(){this.componentCommunicationService.getNewView().subscribe(e=>{this.viewChanged.emit(e),this.selectedNavigation=e}),this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack"),this.tutorialSubscription=this.gameLoopService.gameUpdateEvent.subscribe(e=>{var i;this.tutorial3Active=!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId,this.tutorial6Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||6!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(i=this.globalService.globalVar.animals.find(r=>r.type===q.Monkey))||void 0===i?void 0:i.isAvailable)),this.globalService.globalVar.tutorials.tutorialCompleted&&this.tutorialSubscription.unsubscribe()})}switchView(e){this.viewChanged.emit(e),this.selectedNavigation=e,this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack")}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0)}}return t.\u0275fac=function(e){return new(e||t)(E(wi),E(Sn),E(bt),E(zi))},t.\u0275cmp=Je({type:t,selectors:[["app-navigation"]],outputs:{viewChanged:"viewChanged"},decls:25,vars:15,consts:[[1,"navigation"],[1,"clickableText",3,"ngClass","click"],[4,"ngIf"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"p",1),F("click",function(){return i.switchView(i.navigationEnum.barn)}),b(2,"Barns"),p(),H(3,"hr"),g(4,"p",1),F("click",function(){return i.switchView(i.navigationEnum.raceselection)}),b(5,"Races"),p(),H(6,"hr"),g(7,"p",1),F("click",function(){return i.switchView(i.navigationEnum.animals)}),b(8,"Animals"),p(),H(9,"hr"),g(10,"p",1),F("click",function(){return i.switchView(i.navigationEnum.decks)}),b(11,"Decks"),p(),H(12,"hr"),g(13,"p",1),F("click",function(){return i.switchView(i.navigationEnum.shop)}),b(14,"Shop"),p(),H(15,"hr"),I(16,H8,4,1,"div",2),g(17,"p",1),F("click",function(){return i.switchView(i.navigationEnum.resources)}),b(18,"Resources"),p(),H(19,"hr"),g(20,"p",1),F("click",function(){return i.switchView(i.navigationEnum.settings)}),b(21,"Settings"),p(),H(22,"hr"),g(23,"p",1),F("click",function(){return i.switchView(i.navigationEnum.stats)}),b(24,"Stats"),p()()),2&e&&(m(1),C("ngClass",Ns(9,cM,i.selectedNavigation===i.navigationEnum.barn,i.tutorial6Active)),m(3),C("ngClass",Ns(12,cM,i.selectedNavigation===i.navigationEnum.raceselection,i.tutorial3Active)),m(3),C("ngClass",i.selectedNavigation===i.navigationEnum.animals?"active":""),m(3),C("ngClass",i.selectedNavigation===i.navigationEnum.decks?"active":""),m(3),C("ngClass",i.selectedNavigation===i.navigationEnum.shop?"active":""),m(3),C("ngIf",i.incubatorAvailable),m(1),C("ngClass",i.selectedNavigation===i.navigationEnum.resources?"active":""),m(3),C("ngClass",i.selectedNavigation===i.navigationEnum.settings?"active":""),m(3),C("ngClass",i.selectedNavigation===i.navigationEnum.stats?"active":""))},directives:[Ci,Kt],styles:[".navigation[_ngcontent-%COMP%]{height:100%;border-left:1px solid rgba(0,0,0,.1);padding-left:1rem;padding-top:1rem;background-color:var(--background-secondary);color:var(--foreground-default)}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}"]}),t})();function G8(t,n){if(1&t&&(g(0,"div",15),b(1),p()),2&t){const e=x();m(1),de(" ",e.latestVersionChanges," ")}}function j8(t,n){if(1&t&&(g(0,"p")(1,"span",24),b(2),Ut(3,"number"),p(),H(4,"br")(5,"br"),b(6),g(7,"span"),H(8,"hr"),p()()),2&t){const e=n.$implicit,i=n.index,r=x(3);m(2),de("Version ",nn(3,2,r.allVersions[i],"1.2-2"),""),m(4),de(" ",e," ")}}function z8(t,n){if(1&t&&(g(0,"div")(1,"div",21)(2,"div",22),I(3,j8,9,5,"p",23),p()()()),2&t){const e=x(2);m(3),C("ngForOf",e.changeLog)}}function $8(t,n){if(1&t){const e=be();g(0,"div",16)(1,"div",17)(2,"h4",18),b(3,"Change Log"),p(),g(4,"button",19),F("click",function(){return K(e).$implicit.dismiss()}),b(5,"X"),p()(),I(6,z8,4,1,"div",20),p()}if(2&t){const e=x();m(6),C("ngIf",e.changeLog.length>0)}}let W8=(()=>{class t{constructor(e,i,r,a,s,o){this.lookupService=e,this.gameLoopService=i,this.globalService=r,this.componentCommunicationService=a,this.versionControlService=s,this.modalService=o}ngOnInit(){this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.latestVersionChanges=this.versionControlService.getLatestChanges(),this.changeLog=this.versionControlService.getAllChanges(),this.allVersions=this.versionControlService.gameVersions,this.gameLoopService.gameUpdateEvent.subscribe(e=>{this.globalService.globalVar.userIsRacing||(this.coinCount=this.lookupService.getCoins(),this.medalCount=this.lookupService.getMedals())})}changeView(e){this.componentCommunicationService.setNewView(e)}openChangeLog(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}}return t.\u0275fac=function(e){return new(e||t)(E(Sn),E(zi),E(bt),E(wi),E(VT),E(vs))},t.\u0275cmp=Je({type:t,selectors:[["app-header"]],decls:24,vars:4,consts:[[1,"headerView"],[1,"gridContainer"],[1,"nameArea","keyword"],[1,"name"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"version","versionMargin","clickableText",3,"ngbPopover","click"],[1,"coins","keyword"],[1,"medals","keyword"],[1,"menu","keyword"],["ngbDropdown","",1,"d-inline-block"],["menuDropdown","ngbDropdown"],["type","button","id","menuDropdown","ngbDropdownToggle","",1,"btn","dropdown"],["ngbDropdownMenu","","aria-labelledby","menuDropdown",1,"dropdownItems"],[3,"viewChanged","click"],["latestVersionChangesContent",""],["content",""],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[4,"ngIf"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],[1,"s4Heading"]],template:function(e,i){if(1&e){const r=be();g(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),b(4," Cultura "),p(),g(5,"span",4),F("click",function(){K(r);const s=Pt(23);return i.openChangeLog(s)}),b(6),p()(),g(7,"div",5)(8,"span"),b(9),p()(),g(10,"div",6)(11,"span"),b(12),p()(),g(13,"div",7)(14,"div",8,9)(16,"button",10),b(17,"Menu"),p(),g(18,"div",11)(19,"app-navigation",12),F("viewChanged",function(s){return i.changeView(s)})("click",function(){return K(r),Pt(15).close()}),p()()()()(),I(20,G8,2,1,"ng-template",null,13,Ot),I(22,$8,7,1,"ng-template",null,14,Ot),p()}if(2&e){const r=Pt(21);m(5),C("ngbPopover",r),m(1),de(" v",i.version," "),m(3),de("Coins: ",i.coinCount,""),m(3),de("Medals: ",i.medalCount,"")}},directives:[Ra,gl,Gm,Nh,uM,Kt,di],pipes:[ss],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name . coins ." ". name . medals ."}.nameArea[_ngcontent-%COMP%]{grid-area:name;justify-self:stretch}.name[_ngcontent-%COMP%]{font-size:2rem}.coins[_ngcontent-%COMP%]{grid-area:coins;justify-self:stretch}.medals[_ngcontent-%COMP%]{grid-area:medals;justify-self:stretch}.versionMargin[_ngcontent-%COMP%]{margin-left:.5rem}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}.dropdownItems[_ngcontent-%COMP%]{background-color:var(--background-secondary);color:var(--foreground-default)}.menu[_ngcontent-%COMP%]{display:none}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre-line}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name coins menu ." ". name medals menu ."}.menu[_ngcontent-%COMP%]{display:block;grid-area:menu;justify-self:stretch}}']}),t})();function q8(t,n){if(1&t&&(g(0,"div",9)(1,"span"),b(2),p(),H(3,"br"),g(4,"span"),b(5),p()()),2&t){const e=x(2);C("ngClass",e.colorConditional),m(2),ht(e.associatedAnimalName),m(3),ht(e.associatedAnimalType)}}function Y8(t,n){if(1&t&&(g(0,"div",9)(1,"span"),b(2),p()()),2&t){const e=x(2);C("ngClass",e.colorConditional),m(2),ht(e.associatedAnimalType)}}function X8(t,n){1&t&&(g(0,"div")(1,"em"),b(2,"Ready to Breed"),p()())}const Q8=function(t){return{floatingProgressTextAnimation:t}};function Z8(t,n){if(1&t&&(g(0,"div",4)(1,"span"),b(2),p(),I(3,q8,6,3,"div",5),I(4,Y8,3,2,"div",5),H(5,"br"),g(6,"p"),H(7,"ngb-progressbar",6),p(),g(8,"div",7),b(9),p(),H(10,"br"),I(11,X8,3,0,"div",8),p()),2&t){const e=x();m(2),ht(e.barnName),m(1),C("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),m(1),C("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),m(3),C("value",e.trainingProgressBarPercent),m(1),C("ngClass",ur(7,Q8,e.showTrainingAnimation)),m(1),de(" ",e.trainingCompleteText," "),m(2),C("ngIf",e.readyToBreed)}}function K8(t,n){1&t&&(g(0,"div",10)(1,"span"),b(2,"Unassigned"),p()())}function J8(t,n){1&t&&(g(0,"div",11)(1,"span"),b(2,"Locked"),p()())}let eU=(()=>{class t{constructor(e,i,r){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.trainingCompleteText="",this.showTrainingAnimation=!1,this.selectedBarn=new je}ngOnInit(){if(this.barnNumber>0&&this.barnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.barnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e);var i=this.globalService.globalVar.animals.find(r=>r.associatedBarnNumber==this.barnNumber);null!=i?(this.isOccupied=!0,this.associatedAnimalName=i.name,this.associatedAnimalType=q[i.type],this.associatedAnimal=i,this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()}):this.isOccupied=!1,this.isLocked=e.isLocked}}else console.log("Can't find barn"),alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.isLocked||(this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.animals.find(s=>s.associatedBarnNumber==this.barnNumber);if(null!=a){if(null==a.currentTraining)return void(this.trainingProgressBarPercent=0);a.currentTraining.timeTrained<this.previousTrainedAmount&&(this.trainingCompleteText=this.lookupService.getTrainingProgressionAnimationText(a.currentTraining),this.showTrainingAnimation=!0,setTimeout(()=>{this.showTrainingAnimation=!1,this.trainingCompleteText=""},3e3)),this.readyToBreed=a.breedGaugeXp>=a.breedGaugeMax,this.previousTrainedAmount=a.currentTraining.timeTrained,this.trainingProgressBarPercent=a.currentTraining.timeTrained/a.currentTraining.timeToComplete*100}}))}ngOnDestroy(){this.previousTrainedAmount=0,null!=this.subscription&&this.subscription.unsubscribe()}onClick(){this.selectedBarn.emit(this.barnNumber)}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(zi),E(Sn))},t.\u0275cmp=Je({type:t,selectors:[["app-barn"]],hostBindings:function(e,i){1&e&&F("click",function(){return i.onClick()})},inputs:{barnNumber:"barnNumber"},outputs:{selectedBarn:"selectedBarn"},decls:4,vars:3,consts:[[1,"barn","clickableText"],["class","unlocked",4,"ngIf"],["class","unassigned",4,"ngIf"],["class","locked",4,"ngIf"],[1,"unlocked"],["class","keyword",3,"ngClass",4,"ngIf"],["type","success",3,"value"],[1,"progressBar","floatingProgressText","progressBarColor","keyword",3,"ngClass"],[4,"ngIf"],[1,"keyword",3,"ngClass"],[1,"unassigned"],[1,"locked"]],template:function(e,i){1&e&&(g(0,"div",0),I(1,Z8,12,9,"div",1),I(2,K8,3,0,"div",2),I(3,J8,3,0,"div",3),p()),2&e&&(m(1),C("ngIf",i.isOccupied),m(1),C("ngIf",!i.isOccupied&&!i.isLocked),m(1),C("ngIf",i.isLocked))},directives:[Kt,Ci,Wm],styles:[".barn[_ngcontent-%COMP%]{text-align:center;width:45%;margin:auto;display:flex;justify-content:center;align-content:center;flex-direction:column;height:100%}.floatingProgressText[_ngcontent-%COMP%]{float:right;position:relative;text-align:right;top:-2em}.floatingProgressTextAnimation[_ngcontent-%COMP%]{animation-name:floatingProgressTextAnimation;animation-duration:3s;animation-iteration-count:1;animation-timing-function:ease-in-out}@keyframes floatingProgressTextAnimation{0%{transform:translate(0)}to{transform:translateY(-30px);opacity:0}}"]}),t})(),tU=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Je({type:t,selectors:[["app-training-option"]],inputs:{trainingOption:"trainingOption"},decls:7,vars:4,consts:[[1,"training"],[1,"trainingName"],[1,"trainingStats"],[1,"trainingTimeToComplete"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"p",1),b(2),p(),g(3,"p",2),b(4),p(),g(5,"p",3),b(6),p()()),2&e&&(m(2),ht(i.trainingOption.trainingName),m(2),ht(i.trainingOption.getStatGainDescription()),m(2),Nn("",i.trainingOption.getFacilitySize()," - ",i.trainingOption.timeToComplete," sec "))},styles:[".training[_ngcontent-%COMP%]{white-space:pre-line}"]}),t})();const nU=function(t){return{activeTrainingOption:t}};function iU(t,n){if(1&t){const e=be();g(0,"td",4)(1,"div",5),F("click",function(){const a=K(e).$implicit;return x(2).selectTrainingOption(a)}),H(2,"app-training-option",6),p()()}if(2&t){const e=n.$implicit;m(1),C("ngClass",ur(2,nU,e.isSelected)),m(1),C("trainingOption",e)}}function rU(t,n){if(1&t&&(g(0,"tr"),I(1,iU,3,4,"td",3),p()),2&t){const e=n.$implicit;m(1),C("ngForOf",e)}}let aU=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrainingOption=new je}ngOnInit(){this.setupDisplayTrainings()}setupDisplayTrainings(){this.trainingsCells=[],this.trainingsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTrainingOptions.length;i++)this.trainingsCells.push(this.availableTrainingOptions[i-1]),i%e==0&&(this.trainingsRows.push(this.trainingsCells),this.trainingsCells=[]);0!==this.trainingsCells.length&&this.trainingsRows.push(this.trainingsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrainingOption(e){this.availableTrainingOptions.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrainingOption.emit(e)}ngOnChanges(e){this.availableTrainingOptions=e.availableTrainingOptions.currentValue,this.setupDisplayTrainings()}}return t.\u0275fac=function(e){return new(e||t)(E(bt))},t.\u0275cmp=Je({type:t,selectors:[["app-training-list"]],hostBindings:function(e,i){1&e&&F("resize",function(a){return i.onResize(a)},!1,ks)},inputs:{availableTrainingOptions:"availableTrainingOptions"},outputs:{selectedTrainingOption:"selectedTrainingOption"},features:[yi],decls:4,vars:1,consts:[[1,"trainingsView"],[1,"trainings"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trainingOption"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"table"),I(3,rU,2,1,"tr",2),p()()()),2&e&&(m(3),C("ngForOf",i.trainingsRows))},directives:[di,Ci,tU],styles:[".trainingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.trainings[_ngcontent-%COMP%]{margin:.5rem}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function sU(t,n){if(1&t&&(g(0,"span"),b(1),p()),2&t){const e=x(2);m(1),ht(e.selectedAnimal.name)}}function oU(t,n){if(1&t&&(g(0,"div"),I(1,sU,2,1,"span",1),H(2,"br"),g(3,"span"),b(4),p()()),2&t){const e=x();m(1),C("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),m(3),ht(e.selectedAnimal.getAnimalType())}}function lU(t,n){if(1&t&&(g(0,"div")(1,"span"),b(2),p()()),2&t){const e=x();m(2),ht(e.selectedAnimal.getAnimalType())}}let cU=(()=>{class t{constructor(){}ngOnInit(){this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Je({type:t,selectors:[["app-animal"]],inputs:{selectedAnimal:"selectedAnimal"},decls:7,vars:4,consts:[[1,"keyword","animal",3,"ngClass"],[4,"ngIf"]],template:function(e,i){1&e&&(g(0,"div",0),I(1,oU,5,2,"div",1),I(2,lU,3,1,"div",1),H(3,"br")(4,"br"),g(5,"span"),b(6),p()()),2&e&&(C("ngClass",i.colorConditional),m(1),C("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),m(1),C("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),m(4),ht(i.selectedAnimal.getRaceCourseType()))},directives:[Ci,Kt],styles:[".animal[_ngcontent-%COMP%]{margin:.5rem}"]}),t})();function uU(t,n){if(1&t){const e=be();g(0,"td")(1,"div",3),F("click",function(){const a=K(e).$implicit;return x(2).selectAnimal(a)}),H(2,"app-animal",4),p()()}if(2&t){const e=n.$implicit;m(2),C("selectedAnimal",e)}}function dU(t,n){if(1&t&&(g(0,"tr"),I(1,uU,3,1,"td",2),p()),2&t){const e=n.$implicit;m(1),C("ngForOf",e)}}let Fh=(()=>{class t{constructor(e){this.globalService=e,this.selectedAnimal=new je}ngOnInit(){this.setupDisplayAnimals()}setupDisplayAnimals(){this.animalCells=[],this.animalRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableAnimals.length;i++)this.animalCells.push(this.availableAnimals[i-1]),i%e==0&&(this.animalRows.push(this.animalCells),this.animalCells=[]);0!==this.animalCells.length&&this.animalRows.push(this.animalCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectAnimal(e){this.selectedAnimal.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(E(bt))},t.\u0275cmp=Je({type:t,selectors:[["app-animal-list"]],hostBindings:function(e,i){1&e&&F("resize",function(a){return i.onResize(a)},!1,ks)},inputs:{availableAnimals:"availableAnimals"},outputs:{selectedAnimal:"selectedAnimal"},decls:4,vars:1,consts:[[1,"animalsView"],[1,"animals"],[4,"ngFor","ngForOf"],[1,"clickableText",3,"click"],[3,"selectedAnimal"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"table"),I(3,dU,2,1,"tr",2),p()()()),2&e&&(m(3),C("ngForOf",i.animalRows))},directives:[di,cU],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();const hU=["specializationModal"];function fU(t,n){if(1&t){const e=be();g(0,"div")(1,"span",34),b(2),p(),H(3,"br"),g(4,"span",34)(5,"button",35),F("click",function(){return K(e),x(2).upgradeBarn()}),b(6),p()()()}if(2&t){const e=x(2),i=Pt(4),r=Pt(6);m(1),C("ngbPopover",i),m(1),de("Barn Level ",e.barn.barnUpgrades.barnLevel,""),m(2),C("ngbPopover",r),m(1),C("disabled",!e.canUpgrade),m(1),ht(e.upgradeText)}}function pU(t,n){if(1&t&&(g(0,"span"),b(1),p()),2&t){const e=x(3);m(1),ht(e.associatedAnimal.name)}}function gU(t,n){if(1&t){const e=be();g(0,"div",36),F("click",function(){return K(e),x(2).goToAnimal()}),I(1,pU,2,1,"span",10),H(2,"br"),g(3,"span"),b(4),p()()}if(2&t){const e=x(2);C("ngClass",e.colorConditional),m(1),C("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),m(3),ht(e.associatedAnimal.getAnimalType())}}function mU(t,n){if(1&t){const e=be();g(0,"div",37),F("click",function(){return K(e),x(2).goToAnimal()}),g(1,"span"),b(2),p()()}if(2&t){const e=x(2);C("ngClass",e.colorConditional),m(2),ht(e.associatedAnimal.getAnimalType())}}function vU(t,n){if(1&t){const e=be();g(0,"span",34)(1,"button",38),F("click",function(){return K(e),x(2).upgradeBarnSize()}),b(2,"Build"),p()()}if(2&t){const e=x(2);C("ngbPopover",Pt(8)),m(1),C("disabled",!e.canBuild)}}function _U(t,n){if(1&t&&(g(0,"div")(1,"span",39),b(2),p(),H(3,"br"),g(4,"span")(5,"em"),b(6),Ut(7,"number"),p()()()),2&t){const e=x(2);m(2),de("",e.existingTraining.trainingName," "),m(4),de("(",nn(7,2,e.existingTraining.trainingTimeRemaining/60,"1.0-0")," min remaining)")}}function bU(t,n){1&t&&(g(0,"div")(1,"span"),b(2,"No Training Assigned"),p()())}function yU(t,n){if(1&t){const e=be();g(0,"div")(1,"span")(2,"button",25),F("click",function(){return K(e),x(2).goToCoaching()}),b(3,"Coach"),p()()()}}function CU(t,n){if(1&t&&(g(0,"div"),H(1,"br"),g(2,"p",40),H(3,"ngb-progressbar",41),g(4,"span",42),b(5),Ut(6,"number"),p()(),H(7,"br"),p()),2&t){const e=x(2);m(3),C("value",e.trainingProgressBarPercent),m(2),de("",nn(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}function wU(t,n){if(1&t){const e=be();g(0,"app-training-list",43),F("selectedTrainingOption",function(r){return K(e),x(2).selectNewTraining(r)}),p()}2&t&&C("availableTrainingOptions",x(2).availableTrainings)}function SU(t,n){1&t&&(g(0,"div"),b(1," This animal is currently in incubation and cannot train. Check back after incubation finishes. "),p())}const TU=function(t){return{sizeSpacing:t}};function DU(t,n){if(1&t){const e=be();g(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"span",9),F("click",function(){return K(e),x().unassignAnimal()}),b(5,"Unassign"),p(),H(6,"br")(7,"br"),I(8,fU,7,5,"div",10),p(),g(9,"div",11)(10,"span"),b(11),p(),H(12,"br"),I(13,gU,5,3,"div",12),I(14,mU,3,2,"div",13),g(15,"div")(16,"span",14),b(17),p(),I(18,vU,3,2,"span",15),p(),H(19,"hr"),I(20,_U,8,5,"div",10),I(21,bU,3,0,"div",10),p(),g(22,"div",16)(23,"span",9),F("click",function(){return K(e),x().returnToBarnView()}),b(24,"Back"),p(),H(25,"br")(26,"br")(27,"br"),I(28,yU,4,0,"div",10),p()(),H(29,"hr"),I(30,CU,8,5,"div",10),H(31,"br")(32,"br"),g(33,"div",17)(34,"span",18),F("click",function(){return K(e),x().resetFilters()}),b(35,"Change Training"),p()(),g(36,"div",19)(37,"div",20)(38,"span",21),F("click",function(){return K(e),x().toggleFacilityFilter("Small")}),b(39,"Small "),p(),g(40,"span",22),F("click",function(){return K(e),x().toggleFacilityFilter("Medium")}),b(41,"Medium "),p(),g(42,"span",23),F("click",function(){return K(e),x().toggleFacilityFilter("Large")}),b(43,"Large "),p()(),g(44,"div",24)(45,"span",25),F("click",function(){return K(e),x().resetFilters()}),b(46,"Reset Filters"),p()(),g(47,"div",26)(48,"span",27),F("click",function(){return K(e),x().toggleStatFilter("Speed")}),b(49,"SPD "),p(),g(50,"span",28),F("click",function(){return K(e),x().toggleStatFilter("Acceleration")}),b(51,"ACC "),p(),g(52,"span",29),F("click",function(){return K(e),x().toggleStatFilter("Endurance")}),b(53,"END "),p(),g(54,"span",30),F("click",function(){return K(e),x().toggleStatFilter("Power")}),b(55,"PWR "),p(),g(56,"span",31),F("click",function(){return K(e),x().toggleStatFilter("Focus")}),b(57,"FCS "),p(),g(58,"span",32),F("click",function(){return K(e),x().toggleStatFilter("Adaptability")}),b(59,"ADP"),p()()(),H(60,"br"),g(61,"div",14),I(62,wU,1,1,"app-training-list",33),I(63,SU,2,0,"div",10),p()()()}if(2&t){const e=x();m(8),C("ngIf",e.barnSpecializationsUnlocked),m(3),de(" ",e.barnName,""),m(2),C("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),m(1),C("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),m(2),C("ngClass",ur(32,TU,"Large"!==e.sizeValue)),m(1),de("",e.sizeValue," "),m(1),C("ngIf","Large"!==e.sizeValue),m(2),C("ngIf",null!=e.existingTraining),m(1),C("ngIf",null==e.existingTraining),m(7),C("ngIf",e.coachingUnlocked),m(2),C("ngIf",null!=e.existingTraining),m(8),it("filterActive",e.filterSmall),m(2),it("filterActive",e.filterMedium),m(2),it("filterActive",e.filterLarge),m(6),it("filterActive",e.filterSpeed),m(2),it("filterActive",e.filterAcceleration),m(2),it("filterActive",e.filterEndurance),m(2),it("filterActive",e.filterPower),m(2),it("filterActive",e.filterFocus),m(2),it("filterActive",e.filterAdaptability),m(3),C("ngClass",e.tutorialActive?"tutorialActive":""),m(1),C("ngIf",e.associatedAnimal.canTrain),m(1),C("ngIf",!e.associatedAnimal.canTrain)}}function MU(t,n){if(1&t){const e=be();g(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",11)(4,"span"),b(5),p(),H(6,"br"),g(7,"span"),b(8,"Unassigned"),p()(),g(9,"div",44),F("click",function(){return K(e),x().returnToBarnView()}),g(10,"span"),b(11,"Back"),p()()(),H(12,"hr")(13,"br")(14,"br"),g(15,"span"),b(16,"Assign Animal"),p(),g(17,"app-animal-list",45),F("selectedAnimal",function(r){return K(e),x().assignAnimal(r)}),p()()()}if(2&t){const e=x();m(5),de("Barn ",e.selectedBarnNumber,""),m(12),C("availableAnimals",e.availableAnimals)}}function xU(t,n){if(1&t){const e=be();g(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",11)(4,"span"),b(5),p(),H(6,"br"),g(7,"span"),b(8,"Locked"),p()(),g(9,"div",44),F("click",function(){return K(e),x().returnToBarnView()}),g(10,"span"),b(11,"Back"),p()()(),H(12,"hr")(13,"br")(14,"br"),g(15,"div",46)(16,"span"),b(17,"Purchase Barn"),p(),H(18,"br")(19,"br"),g(20,"span",47),b(21),p(),H(22,"br"),g(23,"button",48),F("click",function(){return K(e),x().purchaseBarn()}),b(24,"Buy"),p()()()()}if(2&t){const e=x();m(5),de("Barn ",e.selectedBarnNumber,""),m(16),de("",e.barn.purchasePrice," Coins"),m(2),C("disabled",!e.canPurchaseBarn())}}function RU(t,n){if(1&t&&(g(0,"div",50),b(1),p()),2&t){const e=x(2);m(1),de(" ",e.totalBarnStatsPopover," ")}}function kU(t,n){1&t&&I(0,RU,2,1,"div",49),2&t&&C("ngIf",""!==x().totalBarnStatsPopover)}function AU(t,n){if(1&t&&(g(0,"div",50),b(1),p()),2&t){const e=x(2);m(1),de(" ",e.upgradeBarnPopover," ")}}function EU(t,n){1&t&&I(0,AU,2,1,"div",49),2&t&&C("ngIf",""!==x().upgradeBarnPopover)}function PU(t,n){if(1&t&&(g(0,"div",50),b(1),p()),2&t){const e=x(2);m(1),de(" ",e.buildBiggerBarnPopover," ")}}function IU(t,n){1&t&&I(0,PU,2,1,"div",49),2&t&&C("ngIf",""!==x().buildBiggerBarnPopover)}const NU=function(t){return{selectedSpecialization:t}};function OU(t,n){if(1&t){const e=be();g(0,"span",61),F("click",function(){const a=K(e).$implicit;return x(3).filterSpecialization(a)}),b(1),p()}if(2&t){const e=n.$implicit,i=x(3);C("ngClass",ur(2,NU,i.selectedSpecialization===e)),m(1),de(" ",e.trim()," ")}}function FU(t,n){if(1&t&&(g(0,"div"),b(1),H(2,"br")(3,"br"),g(4,"strong"),b(5),p()()),2&t){const e=x(3);m(1),de(" ",e.specializationDescription," "),m(4),de(" ",e.inDepthSpecializationDescription," ")}}function VU(t,n){if(1&t&&(g(0,"div",59),I(1,OU,2,4,"span",60),H(2,"hr"),I(3,FU,6,2,"div",10),p()),2&t){const e=x(2);m(1),C("ngForOf",e.specializationOptions),m(2),C("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription)}}function BU(t,n){if(1&t){const e=be();g(0,"div",51)(1,"form")(2,"div",52)(3,"h4",53),b(4,"Choose Barn Specialization"),p(),g(5,"button",54),F("click",function(){return K(e).$implicit.dismiss()}),b(6,"X"),p()(),g(7,"div",55),I(8,VU,4,2,"div",56),p(),g(9,"div",57)(10,"button",58),F("click",function(){return K(e),x().selectSpecialization()}),b(11,"Select"),p()()()()}if(2&t){const e=x();m(8),C("ngIf",e.specializationOptions.length>0)}}let LU=(()=>{class t{constructor(e,i,r,a,s,o,l){this.globalService=e,this.gameLoopService=i,this.modalService=r,this.lookupService=a,this.componentCommunicationService=s,this.specializationService=o,this.tutorialService=l,this.returnToBarnEmitter=new je,this.isCoachingEmitter=new je,this.canUpgrade=!1,this.canBuild=!1,this.barnSpecializationsUnlocked=!1,this.coachingUnlocked=!1,this.tutorialActive=!1,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1}keyEvent(e){var i=this.lookupService.getAvailableBarns().filter(o=>void 0!==o),r=i.findIndex(o=>this.selectedBarnNumber===o.barnNumber);if(r>-1)if("ArrowLeft"===e.key)(a=r-1)<0&&(a=i.length-1),this.componentCommunicationService.setBarnView(At.barn,(s=i[a]).barnNumber),this.resetSelectedBarnInfo(s);else if("ArrowRight"===e.key){var a,s;(a=r+1)===i.length&&(a=0),this.componentCommunicationService.setBarnView(At.barn,(s=i[a]).barnNumber),this.resetSelectedBarnInfo(s)}}ngOnInit(){if(this.handleTutorial(),this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.upgradeText="Upgrade",this.barnSpecializationsUnlocked=this.lookupService.isItemUnlocked("barnSpecializations"),this.coachingUnlocked=this.lookupService.isItemUnlocked("coaching"),this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e),this.getSizeValue(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize");var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=i){if(this.animalAssigned=!0,this.associatedAnimal=i,this.associatedAnimalName=i.name,this.existingTraining=i.currentTraining,this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()},this.availableTrainings=this.GetAvailableTrainingOptions(i),null!=this.existingTraining){var r=this.availableTrainings.find(a=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===a.trainingName});null!=r&&(r.isSelected=!0)}}else this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions();this.componentCommunicationService.setBarnView(At.barn,0),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{if(!this.barn.isLocked){var s=this.globalService.globalVar.animals.find(l=>l.associatedBarnNumber==this.selectedBarnNumber);if(null!=s){if(null==s.currentTraining){if(null!==this.existingTraining){var o=this.availableTrainings.find(l=>{var c;return(null===(c=this.existingTraining)||void 0===c?void 0:c.trainingName)===l.trainingName});null!=o&&(o.isSelected=!1),this.existingTraining=null}return}s.currentTraining!==this.existingTraining&&(this.existingTraining=s.currentTraining),this.trainingProgressBarPercent>=100&&(this.trainingProgressBarPercent=100),this.trainingProgressBarPercent=s.currentTraining.timeTrained/s.currentTraining.timeToComplete*100}}})}}else console.log("Can't find barn"),alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}selectNewTraining(e){var i=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber===this.selectedBarnNumber);if(null!=i){var r=Object.assign({},e),a="smallBarnTrainingTimeModifier";this.barn.size===Qe.Medium?a="mediumBarnTrainingTimeModifier":this.barn.size===Qe.Large&&(a="largeBarnTrainingTimeModifier");var s=this.globalService.globalVar.modifiers.find(o=>o.text===a);if(null!=s&&(r.trainingTimeRemaining=s.value),null!=i.currentTraining){if(this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching"))return void(i.queuedTraining=r);i.currentTraining.timeTrained=0}i.currentTraining=r,this.existingTraining=r,!this.globalService.globalVar.tutorials.tutorialCompleted&&2===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.componentCommunicationService.setAnimalView(At.animals,this.associatedAnimal))}}GetAvailableTrainingOptions(e){var i=[];if(null==this.globalService.globalVar||null==this.globalService.globalVar.trainingOptions||0===this.globalService.globalVar.trainingOptions.length)return i;i=this.globalService.globalVar.trainingOptions.filter(s=>s.isAvailable&&(s.facilitySize===Qe.Small||s.facilitySize===Qe.Medium&&(this.barn.size===Qe.Medium||this.barn.size===Qe.Large)||s.facilitySize===Qe.Large&&this.barn.size===Qe.Large));var r=[];i.forEach(s=>{var o=s.makeCopy(s),l=this.lookupService.getTrainingTimeReductionFromTrainingFacility(this.barn.barnUpgrades),c=this.lookupService.getResourceByName("Stopwatch");null==c&&(c=0),o.timeToComplete*=1-(.05*c+l+e.miscStats.trainingTimeReduction/100),o.timeToComplete=Math.round(100*(o.timeToComplete+Number.EPSILON))/100,e.raceCourseType===$.Mountain&&(o.trainingType===Ee.ShortTrackRunning&&(o.trainingName="Short Track Climbing"),o.trainingType===Ee.TrailRunning&&(o.trainingName="Trail Climbing"),o.trainingType===Ee.LongTrackRunning&&(o.trainingName="Long Track Climbing")),e.raceCourseType===$.Ocean&&(o.trainingType===Ee.ShortTrackRunning&&(o.trainingName="Short Track Swimming"),o.trainingType===Ee.TrailRunning&&(o.trainingName="Lane Swimming"),o.trainingType===Ee.SmallWagonTow&&(o.trainingName="Small Canoe Tow"),o.trainingType===Ee.UphillRun&&(o.trainingName="Upstream Swim"),o.trainingType===Ee.LongTrackRunning&&(o.trainingName="Long Track Swimming"),o.trainingType===Ee.VehicleTow&&(o.trainingName="Boat Tow"),o.trainingType===Ee.GreenwayHike&&(o.trainingName="Canal Adventure")),o.affectedStatRatios.topSpeed*=this.barn.barnUpgrades.upgradedStatGain.topSpeed,o.affectedStatRatios.acceleration*=this.barn.barnUpgrades.upgradedStatGain.acceleration,o.affectedStatRatios.endurance*=this.barn.barnUpgrades.upgradedStatGain.endurance,o.affectedStatRatios.power*=this.barn.barnUpgrades.upgradedStatGain.power,o.affectedStatRatios.focus*=this.barn.barnUpgrades.upgradedStatGain.focus,o.affectedStatRatios.adaptability*=this.barn.barnUpgrades.upgradedStatGain.adaptability,o.affectedStatRatios.topSpeed=Math.round(100*(o.affectedStatRatios.topSpeed+Number.EPSILON))/100,o.affectedStatRatios.acceleration=Math.round(100*(o.affectedStatRatios.acceleration+Number.EPSILON))/100,o.affectedStatRatios.endurance=Math.round(100*(o.affectedStatRatios.endurance+Number.EPSILON))/100,o.affectedStatRatios.power=Math.round(100*(o.affectedStatRatios.power+Number.EPSILON))/100,o.affectedStatRatios.focus=Math.round(100*(o.affectedStatRatios.focus+Number.EPSILON))/100,o.affectedStatRatios.adaptability=Math.round(100*(o.affectedStatRatios.adaptability+Number.EPSILON))/100,r.push(o)}),(this.filterAcceleration||this.filterAdaptability||this.filterEndurance||this.filterFocus||this.filterPower||this.filterSpeed||this.filterSmall||this.filterMedium||this.filterLarge)&&(r=r.filter(s=>(!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterAcceleration&&s.affectedStatRatios.acceleration>0||this.filterAdaptability&&s.affectedStatRatios.adaptability>0||this.filterEndurance&&s.affectedStatRatios.endurance>0||this.filterFocus&&s.affectedStatRatios.focus>0||this.filterPower&&s.affectedStatRatios.power>0||this.filterSpeed&&s.affectedStatRatios.topSpeed>0)&&(!this.filterSmall&&!this.filterMedium&&!this.filterLarge||this.filterSmall&&s.facilitySize===Qe.Small||this.filterMedium&&s.facilitySize===Qe.Medium||this.filterLarge&&s.facilitySize===Qe.Large)));var a=r.find(s=>{var o;return(null===(o=this.existingTraining)||void 0===o?void 0:o.trainingName)===s.trainingName});return null!=a&&this.animalAssigned&&(a.isSelected=!0),r}GetAvailableAnimalOptions(){var e=[];return null==this.globalService.globalVar||null==this.globalService.globalVar.animals||0===this.globalService.globalVar.animals.length||(e=this.globalService.globalVar.animals.filter(i=>i.isAvailable&&(void 0===i.associatedBarnNumber||i.associatedBarnNumber<=0))),e}unassignAnimal(){var e=this.globalService.globalVar.animals.find(i=>i.associatedBarnNumber==this.selectedBarnNumber);null!=e&&(e.associatedBarnNumber=0,e.currentTraining=null),this.existingTraining=null,this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions()}assignAnimal(e){e.associatedBarnNumber=this.selectedBarnNumber,this.animalAssigned=!0,this.availableAnimals=this.GetAvailableAnimalOptions(),this.availableTrainings=this.GetAvailableTrainingOptions(e),this.associatedAnimalName=e.name,this.existingTraining=null;var i=this.lookupService.getAnimalByType(e.type);null!==i&&(i.associatedBarnNumber=this.selectedBarnNumber,this.associatedAnimal=i,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()}),!this.globalService.globalVar.tutorials.tutorialCompleted&&7===this.globalService.globalVar.tutorials.currentTutorialId&&this.associatedAnimal.type===q.Monkey&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}returnToBarnView(){this.returnToBarnEmitter.emit(0)}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}toggleFacilityFilter(e){"Small"===e&&(this.filterSmall=!this.filterSmall),"Medium"===e&&(this.filterMedium=!this.filterMedium),"Large"===e&&(this.filterLarge=!this.filterLarge),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1,this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}purchaseBarn(){this.lookupService.getCoins()>=this.barn.purchasePrice&&(this.barn.isLocked=!1,this.lookupService.spendCoins(this.barn.purchasePrice))}canPurchaseBarn(){return this.lookupService.getCoins()>=this.barn.purchasePrice}getSizeValue(){this.sizeValue=this.barn.getSize()}upgradeBarnSize(){if(this.lookupService.getCoins()>=this.barn.facilityUpgradePrice){if(this.lookupService.spendCoins(this.barn.facilityUpgradePrice),this.barn.size===Qe.Small)this.barn.size=Qe.Medium,this.barn.facilityUpgradePrice=4e3,null!=(i=this.globalService.globalVar.shop.find(r=>"Trainings"===r.name))&&i.itemList.filter(r=>r.additionalIdentifier===Qe.Medium.toString()).forEach(r=>{r.isAvailable=!0});else if(this.barn.size===Qe.Medium){var i;this.barn.size=Qe.Large,null!=(i=this.globalService.globalVar.shop.find(a=>"Trainings"===a.name))&&i.itemList.filter(a=>a.additionalIdentifier===Qe.Large.toString()).forEach(a=>{a.isAvailable=!0})}this.getSizeValue(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover()}}upgradeBarn(){var e=this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel);if(this.canUpgradeBarn(e)){if(9===this.barn.barnUpgrades.barnLevel)this.modalService.open(this.specializationModal,{ariaLabelledBy:"modal-basic-title",size:"lg"});else{e.forEach(s=>{this.lookupService.spendResourceByName(s.name,s.amount)}),this.barn.barnUpgrades.barnLevel+=1;var r=.1;if(this.barn.barnUpgrades.barnLevel%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var a=this.barn.barnUpgrades.barnLevel-this.barn.barnUpgrades.specializationLevel;a%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=r:a%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=r:a%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=r:a%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=r:a%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=r:a%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=r)}this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover()}this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}canUpgradeBarn(e){var i=!0;return e.forEach(r=>{this.lookupService.getResourceByName(r.name)<r.amount&&(i=!1)}),i}canBuildLargerBarn(){var e=!1;return this.lookupService.getCoins()>=this.barn.facilityUpgradePrice&&(e=!0),e}getTotalBarnStatsPopover(){var e="Upgrade to gain barn bonuses";if(this.barn.barnUpgrades.barnLevel>=1&&(e="Barn Upgrades: \n"),this.barn.barnUpgrades.specialization===rn.TrainingFacility)e+=this.barn.barnUpgrades.specializationLevel<=20?"Training Time Reduction: "+this.barn.barnUpgrades.specializationLevel+"%\n":"Training Time Reduction: 20%\n All Stat Multiplier: "+(this.barn.barnUpgrades.specializationLevel-20)/10;else if(this.barn.barnUpgrades.specialization===rn.BreedingGrounds){var i=this.globalService.globalVar.modifiers.find(a=>"breedingGroundsSpecializationModifier"===a.text);null!=i&&(e+="Training Breed XP Multipler: "+this.barn.barnUpgrades.specializationLevel*(100*i.value)+"%\n")}else this.barn.barnUpgrades.specialization===rn.Attraction?e+=this.specializationService.getSpecializationPopoverText(rn.Attraction,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===rn.ResearchCenter&&(e+=this.specializationService.getSpecializationPopoverText(rn.ResearchCenter,this.barn.barnUpgrades.specializationLevel));return this.barn.barnUpgrades.upgradedStatGain.adaptability>1&&(e+="Adaptability Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.adaptability.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.focus>1&&(e+="Focus Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.focus.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.power>1&&(e+="Power Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.power.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.endurance>1&&(e+="Endurance Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.endurance.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.acceleration>1&&(e+="Acceleration Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.acceleration.toFixed(1)+"\n"),this.barn.barnUpgrades.upgradedStatGain.topSpeed>1&&(e+="Speed Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.topSpeed.toFixed(1)+"\n"),e}getUpgradeBarnPopover(){var e="Cost to upgrade: \n";return this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(r=>{var a=r.name;"Medals"===a&&1===r.amount&&(a="Medal"),e+=r.amount+" "+a+"\n"}),e}getBuildLargerBarnPopover(){var e="Cost to build larger barn: \n";return e+=this.barn.facilityUpgradePrice+" Coins \n\n",this.barn.size===Qe.Small?e+="You will be able to do Medium trainings and increase idle training time to 4 hours.":this.barn.size===Qe.Medium&&(e+="You will be able to do Large trainings and increase idle training time to 8 hours."),e}filterSpecialization(e){this.selectedSpecialization=e,this.specializationDescription=this.globalService.getSpecializationDescription(e),this.inDepthSpecializationDescription=this.lookupService.getInDepthSpecializationDescription(e)}selectSpecialization(){""!==this.selectedSpecialization&&null!=this.selectedSpecialization?(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(i=>{this.lookupService.spendResourceByName(i.name,i.amount)}),this.barn.barnUpgrades.specialization=this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel+=1,this.barn.barnUpgrades.barnLevel+=1,this.barn.barnUpgrades.specialization===rn.TrainingFacility&&(this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.modalService.dismissAll()):alert("You must select a specialization.")}goToAnimal(){this.componentCommunicationService.setAnimalView(At.animals,this.associatedAnimal)}handleTutorial(){var e=this.globalService.globalVar.animals.find(i=>i.type===q.Monkey);this.globalService.globalVar.tutorials.tutorialCompleted||1!==this.globalService.globalVar.tutorials.currentTutorialId?!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)?(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0):this.globalService.globalVar.tutorials.tutorialCompleted||(this.tutorialActive=!1):(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}resetSelectedBarnInfo(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.upgradeText="Upgrade",this.barnSpecializationsUnlocked=this.lookupService.isItemUnlocked("barnSpecializations"),this.selectedBarnNumber=e.barnNumber,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var i=this.globalService.globalVar.barns.find(s=>s.barnNumber===this.selectedBarnNumber);if(void 0!==i){this.barn=i,this.barnName=this.lookupService.getBarnName(i),this.getSizeValue(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize");var r=this.globalService.globalVar.animals.find(s=>s.associatedBarnNumber==this.selectedBarnNumber);if(null!=r){if(this.animalAssigned=!0,this.associatedAnimal=r,this.associatedAnimalName=r.name,this.existingTraining=r.currentTraining,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()},this.availableTrainings=this.GetAvailableTrainingOptions(r),null!=this.existingTraining){var a=this.availableTrainings.find(s=>{var o;return(null===(o=this.existingTraining)||void 0===o?void 0:o.trainingName)===s.trainingName});null!=a&&(a.isSelected=!0)}}else this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions();this.componentCommunicationService.setBarnView(At.barn,0),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(s=>{if(!this.barn.isLocked){var o=this.globalService.globalVar.animals.find(c=>c.associatedBarnNumber==this.selectedBarnNumber);if(null!=o){if(null==o.currentTraining){if(null!==this.existingTraining){var l=this.availableTrainings.find(c=>{var u;return(null===(u=this.existingTraining)||void 0===u?void 0:u.trainingName)===c.trainingName});null!=l&&(l.isSelected=!1),this.existingTraining=null}return}o.currentTraining!==this.existingTraining&&(this.existingTraining=o.currentTraining),this.trainingProgressBarPercent>=100&&(this.trainingProgressBarPercent=100),this.trainingProgressBarPercent=o.currentTraining.timeTrained/o.currentTraining.timeToComplete*100}}})}}else console.log("Can't find barn"),alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}goToCoaching(){this.isCoachingEmitter.emit(!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(zi),E(vs),E(Sn),E(wi),E(OT),E(LT))},t.\u0275cmp=Je({type:t,selectors:[["app-selected-barn"]],viewQuery:function(e,i){if(1&e&&Ba(hU,7),2&e){let r;cn(r=un())&&(i.specializationModal=r.first)}},hostBindings:function(e,i){1&e&&F("keyup",function(a){return i.keyEvent(a)},!1,ks)},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{returnToBarnEmitter:"returnToBarnEmitter",isCoachingEmitter:"isCoachingEmitter"},decls:11,vars:3,consts:[["class","selectedBarnModal",4,"ngIf"],["totalBarnStatsContent",""],["upgradeBarnContent",""],["costToBuildContent",""],["specializationModal",""],[1,"selectedBarnModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"unassign"],[1,"clickableText",3,"click"],[4,"ngIf"],[1,"info"],["class","keyword clickableText",3,"ngClass","click",4,"ngIf"],["class","clickableText keyword",3,"ngClass","click",4,"ngIf"],[3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"back"],[1,"changeTrainingHeader"],[1,"s4Heading",3,"click"],[1,"filterGridContainer"],[1,"facilitySizeFilter","clickableText"],["id","smallFilter",3,"click"],["id","mediumFilter",3,"click"],["id","largeFilter",3,"click"],[1,"resetFiltersHeader","clickableText"],[3,"click"],[1,"statFilter","clickableText"],["id","speedFilter",3,"click"],["id","accelerationFilter",3,"click"],["id","enduranceFilter",3,"click"],["id","powerFilter",3,"click"],["id","focusFilter",3,"click"],["id","adaptabilityFilter",3,"click"],[3,"availableTrainingOptions","selectedTrainingOption",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[1,"keyword","clickableText",3,"ngClass","click"],[1,"clickableText","keyword",3,"ngClass","click"],[1,"sizeButtonSpacing",3,"disabled","click"],[1,"activeTrainingOption"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"],[3,"availableTrainingOptions","selectedTrainingOption"],[1,"back","clickableText",3,"click"],[3,"availableAnimals","selectedAnimal"],[1,"purchaseBarn"],[1,"price"],["id","purchaseButton",3,"disabled","click"],["class","popoverClass",4,"ngIf"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],["class","typeContainer",4,"ngIf"],[1,"modal-footer"],["type","button",3,"click"],[1,"typeContainer"],["class","specializationType subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"specializationType","subHeading",3,"ngClass","click"]],template:function(e,i){1&e&&(I(0,DU,64,34,"div",0),I(1,MU,18,2,"div",0),I(2,xU,25,3,"div",0),I(3,kU,1,1,"ng-template",null,1,Ot),I(5,EU,1,1,"ng-template",null,2,Ot),I(7,IU,1,1,"ng-template",null,3,Ot),I(9,BU,12,1,"ng-template",null,4,Ot)),2&e&&(C("ngIf",i.animalAssigned&&!i.barn.isLocked),m(1),C("ngIf",!i.animalAssigned&&!i.barn.isLocked),m(1),C("ngIf",i.barn.isLocked))},directives:[Kt,Ra,Ci,Wm,aU,Fh,Kd,jd,Dc,di],pipes:[ss],styles:['ngb-modal-backdrop{z-index:1050!important}.selectedBarnModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"unassign info back"}.unassign[_ngcontent-%COMP%]{grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.facilitySizeFilter[_ngcontent-%COMP%]{grid-area:facilitySizeFilter}.resetFiltersHeader[_ngcontent-%COMP%]{grid-area:resetFiltersHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.changeTrainingHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.specializationType[_ngcontent-%COMP%]{width:25%;-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedSpecialization[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.sizeButtonSpacing[_ngcontent-%COMP%]{width:4rem}.sizeSpacing[_ngcontent-%COMP%]{margin-left:4rem}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}']}),t})();var Vn=(()=>{return(t=Vn||(Vn={}))[t.speed=0]="speed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",t[t.special=6]="special",Vn;var t})();const UU=["coachingCanvas"],HU=["drawCoaching"];let GU=(()=>{class t{constructor(e,i,r,a){this.gameLoopService=e,this.globalService=i,this.themeService=r,this.utilityService=a,this.isCoachingEmitter=new je,this.isPointerDown=!1,this.activePoints=[],this.currentEndPoint=0,this.currentX=0,this.currentY=0,this.getNewPath=!1}ngOnInit(){if(this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=i){this.associatedAnimal=i;var r="coloredText "+this.associatedAnimal.getCourseTypeClass();this.animalDisplayName="<span class='"+r+"'>"+this.associatedAnimal.name+"</span>"}}this.incrementalCoachingUpdates="You bring "+this.animalDisplayName+" out into an open area for practice.\n"}ngAfterViewInit(){this.setupCanvas(),null!=this.drawCoaching&&(this.canvasOffsetX=this.drawCoaching.nativeElement.offsetLeft,this.canvasOffsetY=this.drawCoaching.nativeElement.offsetTop),this.context=this.coachingCanvas.nativeElement.getContext("2d"),this.context.lineWidth=6,this.currentPathType=this.getRandomPathType(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=6,this.displayTrace(this.context,0)})}setupCanvas(){this.coachingCanvas.nativeElement.style.width="100%",this.coachingCanvas.nativeElement.style.height="100%",this.coachingCanvas.nativeElement.width=this.coachingCanvas.nativeElement.offsetWidth,this.coachingCanvas.nativeElement.height=this.coachingCanvas.nativeElement.offsetHeight,this.canvasHeight=this.coachingCanvas.nativeElement.height,this.canvasWidth=this.coachingCanvas.nativeElement.width}displayTrace(e,i){e.lineCap="round",e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.currentPathType===Vn.speed&&(this.activePoints=this.drawSpeedTrace(e)),this.currentPathType===Vn.acceleration&&(this.activePoints=this.drawAccelerationTrace(e)),this.currentPathType===Vn.endurance&&(this.activePoints=this.drawEnduranceTrace(e)),this.currentPathType===Vn.power&&(this.activePoints=this.drawPowerTrace(e)),this.currentPathType===Vn.focus&&(this.activePoints=this.drawFocusTrace(e)),this.currentPathType===Vn.adaptability&&(this.activePoints=this.drawAdaptabilityTrace(e)),this.currentPathType===Vn.special&&(this.activePoints=this.drawSpecialTrace(e)),e.strokeStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.globalCompositeOperation="source-atop";for(var r=0;r<this.currentEndPoint;r++)if(r<this.currentEndPoint-1)this.currentPathType===Vn.power&&0===r?(e.beginPath(),e.ellipse(this.activePoints[0][0],this.activePoints[0][1],this.activePoints[0][2],this.activePoints[0][3],this.activePoints[0][4],this.activePoints[0][5],this.activePoints[0][6],!0),e.stroke()):(e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.activePoints[r+1][0],this.activePoints[r+1][1]),e.stroke());else if(this.currentPathType!==Vn.power||0!==r&&2!==r)e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.currentX,this.currentY),e.stroke(),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,this.currentY-5,10,10);else{var a=0;2===r&&(a=3),e.fillStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.fillRect(this.activePoints[a][0]-this.activePoints[a][2]-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],this.currentX-(this.activePoints[a][0]-this.activePoints[a][2]),2*this.activePoints[a][3]+2),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],10,2*this.activePoints[a][3])}}pointerMove(e){if(this.isPointerDown&&null!=this.activePoints&&0!==this.activePoints.length){e.preventDefault(),e.stopPropagation();var i=e.clientX-this.canvasOffsetX,r=e.clientY-this.canvasOffsetY,a=.1*this.canvasWidth,s=.1*this.canvasHeight;0===this.currentEndPoint&&(this.currentX=this.activePoints[0][0],this.currentY=this.activePoints[0][1],this.currentPathType===Vn.power&&(this.currentX=this.activePoints[0][0]-this.activePoints[0][2],this.currentY=this.activePoints[0][1]),this.currentEndPoint=1),this.currentPathType===Vn.power&&(s=.25*this.canvasHeight);var o=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint-1][0]:this.activePoints[this.currentEndPoint][0],l=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint][0]:this.activePoints[this.currentEndPoint-1][0],c=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint-1][1]:this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint][1]:this.activePoints[this.currentEndPoint-1][1],d=o-a,h=l+a,f=c-s,v=u+s,_=!1,D=!1,w=!1,y=!1;if(this.activePoints[this.currentEndPoint-1][0]>this.activePoints[this.currentEndPoint][0]&&(_=!0),this.activePoints[this.currentEndPoint-1][1]>this.activePoints[this.currentEndPoint][1]&&(D=!0),this.activePoints[this.currentEndPoint-1][0]===this.activePoints[this.currentEndPoint][0]&&(w=!0),this.activePoints[this.currentEndPoint-1][1]===this.activePoints[this.currentEndPoint][1]&&(y=!0),this.currentPathType!==Vn.power||1!==this.currentEndPoint&&3!==this.currentEndPoint?this.currentPathType===Vn.power&&2===this.currentEndPoint&&(d=(o=this.activePoints[2][0])-a,h=(l=this.activePoints[1][0])+a,f=(c=this.activePoints[1][1])-s,v=(u=this.activePoints[2][1])+s,_=!0,D=!1,w=!1,y=!1):(1===this.currentEndPoint?(o=this.activePoints[this.currentEndPoint-1][0]-this.activePoints[this.currentEndPoint-1][2],l=this.activePoints[this.currentEndPoint-1][0]+this.activePoints[this.currentEndPoint-1][2],c=this.activePoints[this.currentEndPoint-1][1],u=this.activePoints[this.currentEndPoint-1][1]):(o=this.activePoints[this.currentEndPoint][0]-this.activePoints[this.currentEndPoint][2],l=this.activePoints[this.currentEndPoint][0]+this.activePoints[this.currentEndPoint][2],c=this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint][1]),d=o-a,h=l+a,f=c-s,v=u+s,_=!1,D=!1,w=!1,y=!0),i>=d&&i<=h&&r>=f&&r<=v){if(w||y)(!D&&r>this.currentY||D&&r<this.currentY)&&!y&&(this.currentY=r),(!_&&i>this.currentX||_&&i<this.currentX)&&!w&&(this.currentX=i);else if(!_&&i>this.currentX||_&&i<this.currentX){var P=(i-o)/(l-o);_&&(P=1-P),D&&(P=1-P);var U=(u-c)*P+c;this.currentX=i,this.currentY=U}var Q=.005*this.canvasWidth,J=.005*this.canvasHeight;(!_&&this.currentX>=l-Q||_&&this.currentX<=o+Q)&&(!D&&this.currentY>=u-J||D&&this.currentY<=c+J)&&(this.currentX=_?o:l,this.currentY=D?c:u,this.currentEndPoint+=1,this.currentEndPoint>this.activePoints.length-1&&this.completePath())}}}pointerUp(){this.isPointerDown=!1}pointerDown(){this.isPointerDown=!0}drawSpeedTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([i,r]),a.push([this.canvasWidth-i,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-i,this.canvasHeight-r]),a.push([i,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}drawAdaptabilityTrace(e){var i=.1*this.canvasWidth,s=(this.canvasWidth-2*i)/14,o=(this.canvasHeight-.1*this.canvasHeight*2)/7,l=[];l.push([i,this.canvasHeight/2]),l.push([i+s,this.canvasHeight/2-o]),l.push([i+2*s,this.canvasHeight/2+o]),l.push([i+3*s,this.canvasHeight/2-2*o]),l.push([i+4*s,this.canvasHeight/2+2*o]),l.push([i+5*s,this.canvasHeight/2-3*o]),l.push([i+6*s,this.canvasHeight/2+3*o]),l.push([i+7*s,this.canvasHeight/2-4*o]),l.push([i+8*s,this.canvasHeight/2+3*o]),l.push([i+9*s,this.canvasHeight/2-3*o]),l.push([i+10*s,this.canvasHeight/2+2*o]),l.push([i+11*s,this.canvasHeight/2-2*o]),l.push([i+12*s,this.canvasHeight/2+o]),l.push([i+13*s,this.canvasHeight/2-o]),l.push([i+14*s,this.canvasHeight/2]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawPowerTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([this.canvasWidth/2,this.canvasHeight/4,this.canvasWidth/2-i,this.canvasHeight/4-r,0,0,Math.PI]),a.push([this.canvasWidth/2+(this.canvasWidth/2-i),this.canvasHeight/4]),a.push([this.canvasWidth/2-(this.canvasWidth/2-i),3*this.canvasHeight/4]),a.push([this.canvasWidth/2,3*this.canvasHeight/4,this.canvasWidth/2-i,this.canvasHeight/4-r,0,0,Math.PI]),e.beginPath(),e.ellipse(a[0][0],a[0][1],a[0][2],a[0][3],a[0][4],a[0][5],a[0][6],!0),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.ellipse(a[3][0],a[3][1],a[3][2],a[3][3],a[3][4],a[3][5],a[3][6],!1),e.stroke(),a}drawEnduranceTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=.15*this.canvasWidth,s=.15*this.canvasHeight,o=[];o.push([i,r]),o.push([this.canvasWidth-i,r]),o.push([this.canvasWidth-i,this.canvasHeight-r]),o.push([i,this.canvasHeight-r]),o.push([i,r+s]),o.push([this.canvasWidth-(i+a),r+s]),o.push([this.canvasWidth-(i+a),this.canvasHeight-(r+s)]),o.push([i+a,this.canvasHeight-(r+s)]),o.push([i+a,r+2*s]),o.push([this.canvasWidth-(i+2*a),r+2*s]),o.push([this.canvasWidth-(i+2*a),this.canvasHeight-(r+2*s)]),o.push([i+2*a,this.canvasHeight-(r+2*s)]),o.push([i+2*a,this.canvasHeight/2]),o.push([this.canvasWidth/2,this.canvasHeight/2]);for(var l=1;l<o.length;l++)e.beginPath(),e.moveTo(o[l-1][0],o[l-1][1]),e.lineTo(o[l][0],o[l][1]),e.stroke();return o}drawFocusTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];a.push([this.canvasWidth/3,r]),a.push([this.canvasWidth/3,this.canvasHeight/6]),a.push([i,this.canvasHeight/6]),a.push([this.canvasWidth/2,this.canvasHeight-r]),a.push([this.canvasWidth-i,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,r]);for(var s=1;s<a.length;s++)e.beginPath(),e.moveTo(a[s-1][0],a[s-1][1]),e.lineTo(a[s][0],a[s][1]),e.stroke();return a}drawAccelerationTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=11,s=this.canvasWidth-2*i,o=this.canvasHeight-2*r,l=[];l.push([i,r]),l.push([s/a+i,r]),l.push([s/a+i,2*o/a+r]),l.push([2*s/a+i,2*o/a+r]),l.push([2*s/a+i,4*o/a+r]),l.push([3*s/a+i,4*o/a+r]),l.push([3*s/a+i,6*o/a+r]),l.push([4*s/a+i,6*o/a+r]),l.push([4*s/a+i,8*o/a+r]),l.push([5*s/a+i,8*o/a+r]),l.push([5*s/a+i,10*o/a+r]),l.push([6*s/a+i,10*o/a+r]),l.push([6*s/a+i,8*o/a+r]),l.push([7*s/a+i,8*o/a+r]),l.push([7*s/a+i,6*o/a+r]),l.push([8*s/a+i,6*o/a+r]),l.push([8*s/a+i,4*o/a+r]),l.push([9*s/a+i,4*o/a+r]),l.push([9*s/a+i,2*o/a+r]),l.push([10*s/a+i,2*o/a+r]),l.push([10*s/a+i,r]),l.push([11*s/a+i,r]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawSpecialTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([i,r]),a.push([this.canvasWidth-i,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-i,this.canvasHeight-r]),a.push([i,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}getAnimalDistanceColor(e){var i="";return e===$.Flatland&&(i="#7d3f00"),e===$.Mountain&&(i="#1b630d"),e===$.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===$.Tundra&&(i="#28809c"),e===$.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e){var i="";return e===$.Flatland&&(i="#c66900"),e===$.Mountain&&(i="#279113"),e===$.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#7463f7":"#0000FF"),e===$.Tundra&&(i="#1CA1C9"),e===$.Volcanic&&(i="#D92525"),i}getRandomPathType(e){var i=Object.keys(Vn),r=[];i.forEach((s,o)=>{!isNaN(Number(s))&&6!==Number(s)&&r.push(Number(s))});var a=this.utilityService.getRandomInteger(0,r.length-1);return r[a]}completePath(){this.getNewPath=!0,this.currentEndPoint=0,this.activePoints=[],this.currentX=0,this.currentY=0,this.isPointerDown=!1,this.getReward(this.currentPathType),this.associatedAnimal.trackedAnimalStats.successfulCoachingAttempts+=1,this.currentPathType=this.getRandomPathType(this.currentPathType)}getReward(e){e===Vn.speed&&(this.associatedAnimal.currentStats.topSpeed+=1,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains 1 speed. ("+this.associatedAnimal.currentStats.topSpeed.toFixed(2)+")\n"),e===Vn.acceleration&&(this.associatedAnimal.currentStats.acceleration+=1,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains 1 acceleration. ("+this.associatedAnimal.currentStats.acceleration.toFixed(2)+")\n"),e===Vn.endurance&&(this.associatedAnimal.currentStats.endurance+=1,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains 1 endurance. ("+this.associatedAnimal.currentStats.endurance.toFixed(2)+")\n"),e===Vn.power&&(this.associatedAnimal.currentStats.power+=1,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains 1 power. ("+this.associatedAnimal.currentStats.power.toFixed(2)+")\n"),e===Vn.focus&&(this.associatedAnimal.currentStats.focus+=1,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains 1 focus. ("+this.associatedAnimal.currentStats.focus.toFixed(2)+")\n"),e===Vn.adaptability&&(this.associatedAnimal.currentStats.adaptability+=1,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains 1 adaptability. ("+this.associatedAnimal.currentStats.adaptability.toFixed(2)+")\n"),this.globalService.calculateAnimalRacingStats(this.associatedAnimal)}returnToSelectedBarnView(){this.isCoachingEmitter.emit(!1)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(zi),E(bt),E(al),E(Sa))},t.\u0275cmp=Je({type:t,selectors:[["app-coaching"]],viewQuery:function(e,i){if(1&e&&(Ba(UU,5,tn),Ba(HU,5,tn)),2&e){let r;cn(r=un())&&(i.coachingCanvas=r.first),cn(r=un())&&(i.drawCoaching=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{isCoachingEmitter:"isCoachingEmitter"},decls:22,vars:2,consts:[[1,"coachingView"],[1,"marginDiv"],["id","coachingInfo"],[1,"infoGridContainer"],[1,"info"],[1,"description"],[1,"back","clickableText",3,"click"],[1,"drawingDiv"],[1,"updates"],["id","drawCoaching",1,"drawCoaching"],["drawCoaching",""],[1,"drawCoachingDiv"],["id","coachingCanvas",1,"coachingCanvas",3,"pointermove","pointerdown","pointerup"],["coachingCanvas",""],[1,"coachingUpdates",3,"scrollTop","innerHTML"],["scrollMe",""]],template:function(e,i){if(1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),b(6,"Coaching"),p(),g(7,"div",5),b(8," Show your animals the way by tracing each path. Successfully making it through will reward your partner with a stat point. "),p()(),g(9,"div",6),F("click",function(){return i.returnToSelectedBarnView()}),g(10,"span"),b(11,"Back"),p()()(),H(12,"hr"),p(),g(13,"div",7)(14,"div",8)(15,"div",9,10)(17,"div",11)(18,"canvas",12,13),F("pointermove",function(a){return i.pointerMove(a)})("pointerdown",function(){return i.pointerDown()})("pointerup",function(){return i.pointerUp()}),p()()(),H(20,"div",14,15),p()()()()),2&e){const r=Pt(21);m(20),C("scrollTop",r.scrollHeight)("innerHTML",i.incrementalCoachingUpdates.trim(),or)}},styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:76.5%}']}),t})();function jU(t,n){if(1&t){const e=be();g(0,"div",12)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",4))}function zU(t,n){if(1&t){const e=be();g(0,"div",13)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",5))}function $U(t,n){if(1&t){const e=be();g(0,"div",14)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",6))}function WU(t,n){if(1&t&&(g(0,"div",3),I(1,jU,2,1,"div",9),I(2,zU,2,1,"div",10),I(3,$U,2,1,"div",11),p()),2&t){const e=x(2);m(1),C("ngIf",e.barnRow2IsUnlocked),m(1),C("ngIf",e.barnRow2IsUnlocked),m(1),C("ngIf",e.barnRow2IsUnlocked)}}function qU(t,n){if(1&t){const e=be();g(0,"div",18)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",7))}function YU(t,n){if(1&t){const e=be();g(0,"div",19)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",8))}function XU(t,n){if(1&t){const e=be();g(0,"div",20)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",9))}function QU(t,n){if(1&t&&(g(0,"div",3),I(1,qU,2,1,"div",15),I(2,YU,2,1,"div",16),I(3,XU,2,1,"div",17),p()),2&t){const e=x(2);m(1),C("ngIf",e.barnRow3IsUnlocked),m(1),C("ngIf",e.barnRow3IsUnlocked),m(1),C("ngIf",e.barnRow3IsUnlocked)}}function ZU(t,n){if(1&t){const e=be();g(0,"div",24)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",10))}function KU(t,n){if(1&t){const e=be();g(0,"div",25)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",11))}function JU(t,n){if(1&t){const e=be();g(0,"div",26)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",12))}function e6(t,n){if(1&t&&(g(0,"div",3),I(1,ZU,2,1,"div",21),I(2,KU,2,1,"div",22),I(3,JU,2,1,"div",23),p()),2&t){const e=x(2);m(1),C("ngIf",e.barnRow4IsUnlocked),m(1),C("ngIf",e.barnRow4IsUnlocked),m(1),C("ngIf",e.barnRow4IsUnlocked)}}function t6(t,n){if(1&t){const e=be();g(0,"div",30)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",13))}function n6(t,n){if(1&t){const e=be();g(0,"div",31)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",14))}function i6(t,n){if(1&t){const e=be();g(0,"div",32)(1,"app-barn",5),F("selectedBarn",function(r){return K(e),x(3).goToBarn(r)}),p()()}2&t&&(m(1),C("barnNumber",15))}function r6(t,n){if(1&t&&(g(0,"div",3),I(1,t6,2,1,"div",27),I(2,n6,2,1,"div",28),I(3,i6,2,1,"div",29),p()),2&t){const e=x(2);m(1),C("ngIf",e.barnRow5IsUnlocked),m(1),C("ngIf",e.barnRow5IsUnlocked),m(1),C("ngIf",e.barnRow5IsUnlocked)}}function a6(t,n){if(1&t){const e=be();g(0,"div",2)(1,"div",3)(2,"div",4)(3,"app-barn",5),F("selectedBarn",function(r){return K(e),x().goToBarn(r)}),p()(),g(4,"div",6)(5,"app-barn",5),F("selectedBarn",function(r){return K(e),x().goToBarn(r)}),p()(),g(6,"div",7)(7,"app-barn",5),F("selectedBarn",function(r){return K(e),x().goToBarn(r)}),p()()(),I(8,WU,4,3,"div",8),I(9,QU,4,3,"div",8),I(10,e6,4,3,"div",8),I(11,r6,4,3,"div",8),p()}if(2&t){const e=x();m(2),C("ngClass",e.tutorialActive?"tutorialActive":""),m(1),C("barnNumber",1),m(2),C("barnNumber",2),m(2),C("barnNumber",3),m(1),C("ngIf",e.barnRow2IsUnlocked),m(1),C("ngIf",e.barnRow3IsUnlocked),m(1),C("ngIf",e.barnRow4IsUnlocked),m(1),C("ngIf",e.barnRow5IsUnlocked)}}function s6(t,n){if(1&t){const e=be();g(0,"app-selected-barn",36),F("returnToBarnEmitter",function(){return K(e),x(2).goToBarn(0)})("isCoachingEmitter",function(r){return K(e),x(2).goToCoaching(r)}),p()}2&t&&C("selectedBarnNumber",x(2).selectedBarn)}function o6(t,n){if(1&t){const e=be();g(0,"app-coaching",37),F("isCoachingEmitter",function(r){return K(e),x(2).goToCoaching(r)}),p()}2&t&&C("selectedBarnNumber",x(2).selectedBarn)}function l6(t,n){if(1&t&&(g(0,"div",33),I(1,s6,1,1,"app-selected-barn",34),I(2,o6,1,1,"app-coaching",35),p()),2&t){const e=x();m(1),C("ngIf",!e.isCoaching),m(1),C("ngIf",e.isCoaching)}}let c6=(()=>{class t{constructor(e,i,r){this.lookupService=e,this.componentCommunicationService=i,this.globalService=r,this.selectedBarn=0,this.isCoaching=!1,this.tutorialActive=!1,this.barnRow2IsUnlocked=!1,this.barnRow3IsUnlocked=!1,this.barnRow4IsUnlocked=!1,this.barnRow5IsUnlocked=!1}ngOnInit(){var e;this.componentCommunicationService.setNewView(At.barn),this.barnRow2IsUnlocked=this.lookupService.isItemUnlocked("barnRow2"),this.barnRow3IsUnlocked=this.lookupService.isItemUnlocked("barnRow3"),this.barnRow4IsUnlocked=this.lookupService.isItemUnlocked("barnRow4"),this.barnRow5IsUnlocked=this.lookupService.isItemUnlocked("barnRow5"),!this.globalService.globalVar.tutorials.tutorialCompleted&&1===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(i=>i.type===q.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.tutorialActive=!0),this.subscription=this.componentCommunicationService.getBarnView().subscribe(i=>{i>0&&(this.selectedBarn=i)})}goToBarn(e){this.selectedBarn=e}goToCoaching(e){this.isCoaching=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(Sn),E(wi),E(bt))},t.\u0275cmp=Je({type:t,selectors:[["app-barn-view"]],decls:2,vars:2,consts:[["class","gridContainer","id","barnViewDiv",4,"ngIf"],["class","selectedBarnDiv",4,"ngIf"],["id","barnViewDiv",1,"gridContainer"],[1,"barnRow"],[1,"barn1","barnDefault",3,"ngClass"],[3,"barnNumber","selectedBarn"],[1,"barn2","barnDefault"],[1,"barn3","barnDefault"],["class","barnRow",4,"ngIf"],["class","barn4 barnDefault",4,"ngIf"],["class","barn5 barnDefault",4,"ngIf"],["class","barn6 barnDefault",4,"ngIf"],[1,"barn4","barnDefault"],[1,"barn5","barnDefault"],[1,"barn6","barnDefault"],["class","barn7 barnDefault",4,"ngIf"],["class","barn8 barnDefault",4,"ngIf"],["class","barn9 barnDefault",4,"ngIf"],[1,"barn7","barnDefault"],[1,"barn8","barnDefault"],[1,"barn9","barnDefault"],["class","barn10 barnDefault",4,"ngIf"],["class","barn11 barnDefault",4,"ngIf"],["class","barn12 barnDefault",4,"ngIf"],[1,"barn10","barnDefault"],[1,"barn11","barnDefault"],[1,"barn12","barnDefault"],["class","barn13 barnDefault",4,"ngIf"],["class","barn14 barnDefault",4,"ngIf"],["class","barn15 barnDefault",4,"ngIf"],[1,"barn13","barnDefault"],[1,"barn14","barnDefault"],[1,"barn15","barnDefault"],[1,"selectedBarnDiv"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter"],[3,"selectedBarnNumber","isCoachingEmitter"]],template:function(e,i){1&e&&(I(0,a6,12,8,"div",0),I(1,l6,3,2,"div",1)),2&e&&(C("ngIf",0===i.selectedBarn),m(1),C("ngIf",i.selectedBarn>0))},directives:[Kt,Ci,eU,LU,GU],styles:["#barnViewDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.selectedBarnDiv[_ngcontent-%COMP%]{height:100%}.barnDefault[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none;border-top:none;width:33.3333%;display:inline-block;vertical-align:middle;height:100%}.barnRow[_ngcontent-%COMP%]{height:25%;width:100%;display:inline-block}.lockedBarnRow[_ngcontent-%COMP%]{border:none!important}.tutorialActive[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-color:red}"]}),t})();var tu=(()=>{return(t=tu||(tu={}))[t.circuit=0]="circuit",t[t.special=1]="special",t[t.event=2]="event",t[t.trainingTrack=3]="trainingTrack",tu;var t})();function u6(t,n){1&t&&(g(0,"span",4),b(1," Primary "),p())}function d6(t,n){1&t&&(g(0,"span",5),b(1," Auto Run Free Race "),p())}function h6(t,n){1&t&&H(0,"br")}function f6(t,n){1&t&&(g(0,"span",8),b(1," / "),p())}function p6(t,n){if(1&t&&(g(0,"span",6),b(1),I(2,f6,2,0,"span",7),p()),2&t){const e=n.$implicit,i=n.index,r=x();C("ngClass",r.getColorClass(e)),m(1),de(" ",e.name,""),m(1),C("ngIf",i<r.deck.selectedAnimals.length-1)}}let Vh=(()=>{class t{constructor(e){this.globalService=e}ngOnInit(){if(0===this.deckNumber||null==this.deckNumber){var e=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=e&&(this.deck=e)}else{var i=this.globalService.globalVar.animalDecks.find(r=>r.deckNumber===this.deckNumber);null!=i&&(this.deck=i)}}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}}return t.\u0275fac=function(e){return new(e||t)(E(bt))},t.\u0275cmp=Je({type:t,selectors:[["app-animal-deck"]],inputs:{deckNumber:"deckNumber"},decls:8,vars:5,consts:[["class","primaryText keyword rightSpaced",4,"ngIf"],["class","primaryText keyword",4,"ngIf"],[4,"ngIf"],["class","coloredText",3,"ngClass",4,"ngFor","ngForOf"],[1,"primaryText","keyword","rightSpaced"],[1,"primaryText","keyword"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"]],template:function(e,i){1&e&&(g(0,"div"),I(1,u6,2,0,"span",0),I(2,d6,2,0,"span",1),I(3,h6,1,0,"br",2),g(4,"strong"),b(5),p(),b(6," - "),I(7,p6,3,3,"span",3),p()),2&e&&(m(1),C("ngIf",i.deck.isPrimaryDeck&&void 0!==i.deckNumber&&i.deckNumber>0),m(1),C("ngIf",i.deck.autoRunFreeRace&&void 0!==i.deckNumber&&i.deckNumber>0),m(1),C("ngIf",i.deckNumber>0),m(2),ht(i.deck.name),m(2),C("ngForOf",i.deck.selectedAnimals))},directives:[Kt,di,Ci],styles:[".primaryText[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary);padding-left:.5rem;padding-right:.5rem}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}"]}),t})();function g6(t,n){if(1&t&&(g(0,"span"),b(1),p()),2&t){const e=x();m(1),de("Race ",e.index+1," ")}}function m6(t,n){if(1&t&&(g(0,"p",5),b(1),Ut(2,"number"),g(3,"span",6),b(4),p()()),2&t){const e=n.$implicit,i=x();C("ngClass",i.getNoRacerClass(e)),m(1),Nn(" ",nn(2,5,e.distance,"1.2-2")," Meters of ",e.getTerrainName()," "),m(2),C("ngClass",i.getColorClass(e)),m(1),ht(e.getCourseTypeName())}}function v6(t,n){if(1&t&&(g(0,"p"),b(1),p()),2&t){const e=x();m(1),ht(e.race.isCompleted?"Completed":e.cannotRace?"Cannot Run":"Start")}}function _6(t,n){if(1&t&&(g(0,"div",7),b(1),p()),2&t){const e=x();m(1),de(" ",e.popoverText," ")}}const b6=function(t){return{raceNotAllowed:t}};let qm=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.missingRacers=[]}ngOnInit(){this.cannotRace=!1;var e=this.lookupService.getPrimaryDeck();this.race.raceLegs.forEach(i=>{null==e||0===e.selectedAnimals.length?(this.cannotRace=!0,this.missingRacers.push(i.courseType)):(null==e?void 0:e.selectedAnimals.some(r=>r.raceCourseType===i.courseType))||(this.cannotRace=!0,this.missingRacers.push(i.courseType))}),!this.cannotRace&&this.race.isCompleted&&(this.cannotRace=!0),this.race.localRaceType===kt.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(this.cannotRace=!0),this.popoverText=this.cannotRace?this.getErrorPopoverText():this.getSuccessfulPopoverText()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getCourseTypeName(),mountainColor:"Mountain"===e.getCourseTypeName(),waterColor:"Ocean"===e.getCourseTypeName(),tundraColor:"Tundra"===e.getCourseTypeName(),volcanicColor:"Volcanic"===e.getCourseTypeName()}:{}}getNoRacerClass(e){return{noRacer:!this.hasRacerForLeg(e)}}hasRacerForLeg(e){var i=!1,r=this.lookupService.getPrimaryDeck();return null==r||0===r.selectedAnimals.length||r.selectedAnimals.some(a=>a.raceCourseType===e.courseType)&&(i=!0),i}getErrorPopoverText(){var e="You cannot do this race for the following reasons: \n\n";return this.missingRacers.forEach(i=>{e+="-Missing "+$[i]+" racer\n"}),this.race.isCompleted&&(e+="-You've already completed this race."),this.race.localRaceType===kt.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(e+="-You've met your limit of free races. More will be available soon."),e}getSuccessfulPopoverText(){var e="",i=1;return this.race.raceLegs.forEach(r=>{null!=r.terrain&&(e+=this.lookupService.getTerrainPopoverText(r.terrain,r)),i<this.race.raceLegs.length&&(e+="\n"),i+=1}),e}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(Sn))},t.\u0275cmp=Je({type:t,selectors:[["app-race-description"]],inputs:{index:"index",race:"race",showStartText:"showStartText"},decls:8,vars:8,consts:[[1,"raceDescription"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngClass","ngbPopover","disablePopover"],[3,"ngClass",4,"ngFor","ngForOf"],["popContent",""],[3,"ngClass"],[1,"coloredText",3,"ngClass"],[1,"popoverClass"]],template:function(e,i){if(1&e&&(g(0,"div",0),I(1,g6,2,1,"span",1),H(2,"br"),g(3,"div",2),I(4,m6,5,8,"p",3),I(5,v6,2,1,"p",1),p()(),I(6,_6,2,1,"ng-template",null,4,Ot)),2&e){const r=Pt(7);m(1),C("ngIf",null!=i.index&&i.index>-1),m(2),C("ngClass",ur(6,b6,i.cannotRace))("ngbPopover",r)("disablePopover",""===i.popoverText),m(1),C("ngForOf",i.race.raceLegs),m(1),C("ngIf",i.showStartText)}},directives:[Kt,Ci,Ra,di],pipes:[ss],styles:[".raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}"]}),t})();function y6(t,n){if(1&t){const e=be();g(0,"div",10),F("click",function(){const a=K(e).$implicit;return x().selectCircuitRace(a)}),H(1,"app-race-description",11),p()}if(2&t){const e=n.$implicit,i=n.index,r=x();rg("circuitRace",i+1,""),C("ngClass",r.tutorialActive?"tutorialActive":""),m(1),C("index",i)("race",e)("showStartText",!0)}}function C6(t,n){if(1&t){const e=be();g(0,"div",12),F("click",function(){const a=K(e).$implicit;return x().selectLocalRace(a)}),H(1,"app-race-description",11),p()}if(2&t){const e=n.$implicit,i=n.index;rg("localRace",i+1,""),m(1),C("index",i)("race",e)("showStartText",!0)}}function w6(t,n){if(1&t&&(g(0,"div",13),b(1),p()),2&t){const e=x();m(1),de(" ",e.circuitRankUpDescription," ")}}let S6=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new je,this.tutorialActive=!1,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){var e=this;this.handleTutorial(),this.availableLocalRaces=[],this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace());var i=this.globalService.globalVar.circuitRank;this.circuitRank=this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank).toString():this.globalService.globalVar.circuitRank,this.circuitRankUpDescription=this.globalService.globalVar.circuitRankUpRewardDescription,this.availableCircuitRaces=this.globalService.globalVar.circuitRaces.filter(o=>o.requiredRank===i);var r=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);this.availableCircuitRaces.forEach(o=>{void 0!==r&&(o.raceLegs=this.globalService.reorganizeLegsByDeckOrder(o.raceLegs,r))}),this.totalFreeRaces=this.lookupService.getTotalFreeRacesPerPeriod();var a=900,s=this.globalService.globalVar.modifiers.find(o=>"freeRacesTimePeriodModifier"===o.text);void 0!==s&&(a=s.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var o=zs(function*(l){var c=a-e.globalService.globalVar.freeRaceTimePeriodCounter,u=Math.floor(c/60),d=c-60*u,h=Math.floor(d).toString();d<10&&(h=d<1||d>59?"00":String(h).padStart(2,"0")),e.freeRaceTimer=u+":"+h,e.freeRacesRemaining=e.lookupService.getRemainingFreeRacesPerPeriod()});return function(l){return o.apply(this,arguments)}}())}selectCircuitRace(e){var i=!0,r=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck);null!=r&&0!==r.selectedAnimals.length?(e.raceLegs.forEach(a=>{(null==r?void 0:r.selectedAnimals.some(s=>s.raceCourseType===a.courseType))||(i=!1)}),e.isCompleted&&(i=!1),!this.globalService.globalVar.tutorials.tutorialCompleted&&4===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1),i&&this.raceSelected.emit(e)):i=!1}selectLocalRace(e){var i=!0,r=e.localRaceType===kt.Free,a=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(s=>{(null==a?void 0:a.selectedAnimals.some(o=>o.raceCourseType===s.courseType))||(i=!1)}),r&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(i=!1),i&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):i=!1}handleTutorial(){var e;!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&5===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(i=>i.type===q.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(Sa),E(Sn),E(zi))},t.\u0275cmp=Je({type:t,selectors:[["app-circuit-view"]],outputs:{raceSelected:"raceSelected"},decls:25,vars:7,consts:[[1,"circuitViewDiv"],[1,"circuitRaceHeader","s4Heading"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"circuitRaceGrid"],[3,"ngClass","class","click",4,"ngFor","ngForOf"],["id","localRaceSection"],[1,"s4Heading"],[1,"localRaceGrid"],[3,"class","click",4,"ngFor","ngForOf"],["circuitRewardContent",""],[3,"ngClass","click"],[3,"index","race","showStartText"],[3,"click"],[1,"popoverClass"]],template:function(e,i){if(1&e&&(g(0,"div",0),H(1,"app-animal-deck")(2,"hr"),g(3,"div",1)(4,"span",2),b(5,"Circuit Rank "),g(6,"strong"),b(7),p()(),H(8,"br")(9,"br"),p(),g(10,"div",3),I(11,y6,2,7,"div",4),p(),H(12,"hr"),g(13,"div",5)(14,"span",6),b(15,"Free Races"),p(),H(16,"br"),g(17,"em"),b(18),p(),H(19,"br")(20,"br"),g(21,"div",7),I(22,C6,2,6,"div",8),p()()(),I(23,w6,2,1,"ng-template",null,9,Ot)),2&e){const r=Pt(24);m(4),C("ngbPopover",r),m(3),ht(i.circuitRank),m(4),C("ngForOf",i.availableCircuitRaces),m(7),ig(" ",i.freeRacesRemaining," of ",i.totalFreeRaces," remaining -- resets in ",i.freeRaceTimer,""),m(4),C("ngForOf",i.availableLocalRaces)}},directives:[Vh,Ra,di,Ci,qm],styles:['.circuitRaceHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.circuitRaceGrid[_ngcontent-%COMP%]{height:100%;display:grid;text-align:center;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"circuitRace1 circuitRace2 circuitRace3"}.circuitRace1[_ngcontent-%COMP%]{grid-area:circuitRace1}.circuitRace2[_ngcontent-%COMP%]{grid-area:circuitRace2}.circuitRace3[_ngcontent-%COMP%]{grid-area:circuitRace3}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.localRaceGrid[_ngcontent-%COMP%]{text-align:center;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"localRace1 localRace2 localRace3"}.localRace1[_ngcontent-%COMP%]{grid-area:localRace1}.localRace2[_ngcontent-%COMP%]{grid-area:localRace2}.localRace3[_ngcontent-%COMP%]{grid-area:localRace3}#localRaceSection[_ngcontent-%COMP%]{text-align:center}']}),t})();function T6(t,n){if(1&t){const e=be();g(0,"div",9),F("click",function(){K(e);const r=x(2);return r.selectLocalRace(r.availableMonoRace)}),g(1,"span",10),b(2,"Mono Race "),g(3,"strong"),b(4),p()(),H(5,"br")(6,"app-race-description",11),p()}if(2&t){const e=x(2);m(4),ht(e.monoRaceRank),m(2),C("race",e.availableMonoRace)("showStartText",!0)}}function D6(t,n){1&t&&(g(0,"div",12),b(1," Next Mono Race Available After Circuit Rank Up "),p())}function M6(t,n){if(1&t&&(g(0,"div",6),I(1,T6,7,3,"div",7),I(2,D6,2,0,"div",8),H(3,"hr"),p()),2&t){const e=x();m(1),C("ngIf",null!=e.availableMonoRace),m(1),C("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function x6(t,n){if(1&t){const e=be();g(0,"div",16),F("click",function(){K(e);const r=x(2);return r.selectLocalRace(r.availableDuoRace)}),g(1,"span",10),b(2,"Duo Race "),g(3,"strong"),b(4),p()(),H(5,"br")(6,"app-race-description",11),p()}if(2&t){const e=x(2);m(4),ht(e.duoRaceRank),m(2),C("race",e.availableDuoRace)("showStartText",!0)}}function R6(t,n){1&t&&(g(0,"div",17),b(1," Next Duo Race Available After Circuit Rank Up "),p())}function k6(t,n){if(1&t&&(g(0,"div",13),I(1,x6,7,3,"div",14),I(2,R6,2,0,"div",15),H(3,"hr"),p()),2&t){const e=x();m(1),C("ngIf",null!=e.availableDuoRace),m(1),C("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function A6(t,n){if(1&t){const e=be();g(0,"div",21),F("click",function(){K(e);const r=x(2);return r.selectLocalRace(r.availableRainbowRace)}),g(1,"span",10),b(2,"Rainbow Race "),g(3,"strong"),b(4),p()(),H(5,"br")(6,"app-race-description",11),p()}if(2&t){const e=x(2);m(4),ht(e.rainbowRaceRank),m(2),C("race",e.availableRainbowRace)("showStartText",!0)}}function E6(t,n){1&t&&(g(0,"div",22),b(1," Next Rainbow Race Available After Circuit Rank Up "),p())}function P6(t,n){if(1&t&&(g(0,"div",18),I(1,A6,7,3,"div",19),I(2,E6,2,0,"div",20),H(3,"hr"),p()),2&t){const e=x();m(1),C("ngIf",null!=e.availableRainbowRace),m(1),C("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}let I6=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new je,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){this.availableLocalRaces=[];var e=this.getNextAvailableSpecialRace(kt.Mono);void 0!==e&&(this.availableMonoRace=e);var i=this.getNextAvailableSpecialRace(kt.Duo);void 0!==i&&(this.availableDuoRace=i);var r=this.getNextAvailableSpecialRace(kt.Rainbow);void 0!==r&&(this.availableRainbowRace=r),this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?(null!=this.availableMonoRace&&(this.monoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableMonoRace.requiredRank).toString()),null!=this.availableDuoRace&&(this.duoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableDuoRace.requiredRank).toString()),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableRainbowRace.requiredRank).toString())):(null!=this.availableMonoRace&&(this.monoRaceRank=this.availableMonoRace.requiredRank),null!=this.availableDuoRace&&(this.duoRaceRank=this.availableDuoRace.requiredRank),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.availableRainbowRace.requiredRank)),this.areMonoRacesAvailable=this.lookupService.isItemUnlocked("monoRace"),this.areDuoRacesAvailable=this.lookupService.isItemUnlocked("duoRace"),this.areRainbowRacesAvailable=this.lookupService.isItemUnlocked("rainbowRace")}getNextAvailableSpecialRace(e){return e===kt.Mono&&this.globalService.GenerateMonoRaces(this.globalService.globalVar.monoRank),e===kt.Duo&&this.globalService.GenerateDuoRaces(this.globalService.globalVar.duoRank),e===kt.Rainbow&&this.globalService.GenerateRainbowRaces(this.globalService.globalVar.rainbowRank),this.globalService.globalVar.localRaces.find(i=>i.localRaceType===e)}sortByRankRequired(e,i){return e.requiredRank>i.requiredRank?1:i.requiredRank>e.requiredRank?-1:0}selectLocalRace(e){var i=!0,r=e.localRaceType===kt.Free,a=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(s=>{(null==a?void 0:a.selectedAnimals.some(o=>o.raceCourseType===s.courseType))||(i=!1)}),i&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):i=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(Sa),E(Sn),E(zi))},t.\u0275cmp=Je({type:t,selectors:[["app-local-view"]],outputs:{raceSelected:"raceSelected"},decls:8,vars:3,consts:[[1,"localViewDiv"],[1,"localRaceHeader"],[1,"allLocalRaces"],["id","monoRaceSection",4,"ngIf"],["id","duoRaceSection",4,"ngIf"],["id","rainbowRaceSection",4,"ngIf"],["id","monoRaceSection"],["class","monoRace",3,"click",4,"ngIf"],["class","monoRace",4,"ngIf"],[1,"monoRace",3,"click"],[1,"s4Heading"],[3,"race","showStartText"],[1,"monoRace"],["id","duoRaceSection"],["class","duoRace",3,"click",4,"ngIf"],["class","duoRace",4,"ngIf"],[1,"duoRace",3,"click"],[1,"duoRace"],["id","rainbowRaceSection"],["class","rainbowRace",3,"click",4,"ngIf"],["class","rainbowRace",4,"ngIf"],[1,"rainbowRace",3,"click"],[1,"rainbowRace"]],template:function(e,i){1&e&&(g(0,"div",0),H(1,"div",1)(2,"app-animal-deck")(3,"hr"),g(4,"div",2),I(5,M6,4,2,"div",3),I(6,k6,4,2,"div",4),I(7,P6,4,2,"div",5),p()()),2&e&&(m(5),C("ngIf",i.areMonoRacesAvailable),m(1),C("ngIf",i.areDuoRacesAvailable),m(1),C("ngIf",i.areRainbowRacesAvailable))},directives:[Vh,Kt,qm],styles:[".allLocalRaces[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}"]}),t})();function N6(t,n){1&t&&(g(0,"p",2),b(1,"Coming Soon!"),p())}function O6(t,n){if(1&t&&(g(0,"div"),b(1),p()),2&t){const e=x(3);m(1),Nn(" ",e.eventRaceNotice," ",e.eventRaceTimer," ")}}function F6(t,n){if(1&t&&(g(0,"div",14),b(1),p()),2&t){const e=x(4);m(1),de(" ",e.popoverText," ")}}function V6(t,n){if(1&t){const e=be();g(0,"div",7)(1,"div",8),F("click",function(){return K(e),x(3).selectEventRace()}),g(2,"span",9),b(3,"Grand Prix "),g(4,"strong"),b(5),p()(),H(6,"br"),g(7,"div",10)(8,"div",11)(9,"span",12),b(10),Ut(11,"number"),p(),H(12,"br"),b(13),Ut(14,"number"),H(15,"br"),g(16,"p"),b(17),p()()(),g(18,"div"),H(19,"app-animal-deck"),p(),I(20,F6,2,1,"ng-template",null,13,Ot),p()()}if(2&t){const e=Pt(21),i=x(3);m(5),ht(i.grandPrixData.rank),m(3),C("ngbPopover",e)("disablePopover",""===i.popoverText),m(2),Nn("",nn(11,7,i.grandPrixData.totalDistance,"1.2-2")," ",i.grandPrixData.raceTerrain.getTerrainType()," Meters"),m(3),de(" ",nn(14,10,i.remainingMeters,"1.2-2")," Meters Remaining "),m(4),de("",i.grandPrix.isCompleted?"Completed":i.cannotRace?"Cannot Run":"Start"," ")}}function B6(t,n){if(1&t&&(g(0,"div"),I(1,O6,2,2,"div",5),I(2,V6,22,13,"div",6),p()),2&t){const e=x(2);m(1),C("ngIf",!e.isEventRaceAvailable),m(1),C("ngIf",e.isEventRaceAvailable)}}function L6(t,n){1&t&&(g(0,"div"),b(1," Nothing here yet, but maybe as you climb the circuit ranks you might be invited to a new type of race. "),p())}function U6(t,n){if(1&t&&(g(0,"div",3),H(1,"div",4),I(2,B6,3,2,"div",5),I(3,L6,2,0,"div",5),p()),2&t){const e=x();m(2),C("ngIf",e.grandPrixUnlocked),m(1),C("ngIf",!e.grandPrixUnlocked)}}let H6=(()=>{class t{constructor(e,i,r){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.raceSelected=new je,this.popoverText="",this.cannotRace=!1,this.eventRaceReleased=!0,this.eventRaceNotice="",this.eventRaceTimer="",this.grandPrixUnlocked=!1}ngOnInit(){var e=this;this.grandPrixData=this.globalService.globalVar.eventRaceData,this.grandPrixUnlocked=this.lookupService.isItemUnlocked("grandPrix"),this.globalService.initialGrandPrixSetup(this.globalService.getEventStartDateTime().toString()),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=zs(function*(a){e.setupEventTime(),e.remainingMeters=e.grandPrixData.totalDistance-e.grandPrixData.distanceCovered});return function(a){return r.apply(this,arguments)}}());var i=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=i&&(this.grandPrix=this.globalService.generateGrandPrixSegment(i.selectedAnimals[0]))}selectEventRace(){this.raceSelected.emit(this.grandPrix)}setupEventTime(){var e=this.globalService.getTimeToEventRace();if(e>0){this.isEventRaceAvailable=!1,this.eventRaceNotice="Next Grand Prix available in";var a=e-60*(i=Math.floor(e/3600))*60-60*(r=Math.floor(e/60-60*i)),s=Math.floor(a).toString(),o=i.toString(),l=r.toString();i<10&&(o=i<1||i>59?"00":String(o).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(s=a<1||a>59?"00":String(s).padStart(2,"0")),this.eventRaceTimer=i+":"+r+":"+s}else{var i,r,c=this.globalService.getRemainingEventRaceTime();if(c>0)this.eventRaceNotice="Grand Prix ends in",this.isEventRaceAvailable=!0,a=c-60*(i=Math.floor(c/3600))*60-60*(r=Math.floor(c/60-60*i)),o=i.toString(),l=r.toString(),s=Math.floor(a).toString(),i<10&&(o=i<1||i>59?"00":String(o).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(s=a<1||a>59?"00":String(s).padStart(2,"0")),this.eventRaceTimer=i+":"+r+":"+s}}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(zi),E(Sn))},t.\u0275cmp=Je({type:t,selectors:[["app-event-view"]],outputs:{raceSelected:"raceSelected"},decls:2,vars:2,consts:[["class","centered",4,"ngIf"],["class","eventViewDiv centered",4,"ngIf"],[1,"centered"],[1,"eventViewDiv","centered"],[1,"eventRaceHeader"],[4,"ngIf"],["id","grandPrix",4,"ngIf"],["id","grandPrix"],[3,"click"],[1,"s4Heading"],[1,"raceDescription"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngbPopover","disablePopover"],[1,"keyword"],["popContent",""],[1,"popoverClass"]],template:function(e,i){1&e&&(I(0,N6,2,0,"p",0),I(1,U6,4,2,"div",1)),2&e&&(C("ngIf",!i.eventRaceReleased),m(1),C("ngIf",i.eventRaceReleased))},directives:[Kt,Ra,Vh],pipes:[ss],styles:[".eventRace[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.centered[_ngcontent-%COMP%]{text-align:center}"]}),t})();function G6(t,n){if(1&t){const e=be();g(0,"div",17)(1,"div",18)(2,"span",9),b(3,"Intermediate Track"),p(),H(4,"br"),g(5,"span",13),F("click",function(){K(e);const r=x(2),a=Pt(9);return r.openRewardsModal(a)}),b(6),p(),H(7,"br"),g(8,"app-race-description",14),F("click",function(){K(e);const r=x(2);return r.selectTrackRace(r.intermediateTrackRace)}),p()(),H(9,"hr"),p()}if(2&t){const e=x(2);m(6),Nn("",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),m(2),C("race",e.intermediateTrackRace)("showStartText",!0)}}function j6(t,n){if(1&t){const e=be();g(0,"div",19)(1,"div",20)(2,"span",9),b(3,"Master Track"),p(),H(4,"br"),g(5,"span",13),F("click",function(){K(e);const r=x(2),a=Pt(11);return r.openRewardsModal(a)}),b(6),p(),H(7,"br"),g(8,"app-race-description",14),F("click",function(){K(e);const r=x(2);return r.selectTrackRace(r.masterTrackRace)}),p()(),H(9,"hr"),p()}if(2&t){const e=x(2);m(6),Nn("",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),m(2),C("race",e.masterTrackRace)("showStartText",!0)}}function z6(t,n){if(1&t){const e=be();g(0,"div",6)(1,"div",7)(2,"div",8),F("click",function(){K(e);const r=x();return r.selectTrackRace(r.practiceTrackRace)}),g(3,"span",9),b(4,"Practice Track"),p(),H(5,"br")(6,"app-race-description",10),p(),H(7,"hr"),p(),g(8,"div",11)(9,"div",12)(10,"span",9),b(11,"Novice Track"),p(),H(12,"br"),g(13,"span",13),F("click",function(){K(e);const r=x(),a=Pt(7);return r.openRewardsModal(a)}),b(14),p(),H(15,"br"),g(16,"app-race-description",14),F("click",function(){K(e);const r=x();return r.selectTrackRace(r.noviceTrackRace)}),p()(),H(17,"hr"),p(),I(18,G6,10,4,"div",15),I(19,j6,10,4,"div",16),p()}if(2&t){const e=x();m(6),C("race",e.practiceTrackRace)("showStartText",!0),m(8),Nn("",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),m(2),C("race",e.noviceTrackRace)("showStartText",!0),m(2),C("ngIf",e.intermediateTrackAvailable),m(1),C("ngIf",e.masterTrackAvailable)}}function $6(t,n){if(1&t){const e=be();g(0,"div",21)(1,"div",22)(2,"h4",23),b(3,"Novice Rewards"),p(),g(4,"button",24),F("click",function(){return K(e).$implicit.dismiss()}),b(5,"X"),p()(),g(6,"div",25)(7,"div",26),b(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),H(9,"br")(10,"br")(11,"div",27),p()(),g(12,"div",28)(13,"button",29),F("click",function(){return K(e).$implicit.dismiss()}),b(14,"Close"),p()()()}if(2&t){const e=x();m(11),C("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.novice),or)}}function W6(t,n){if(1&t){const e=be();g(0,"div",21)(1,"div",22)(2,"h4",23),b(3,"Intermediate Rewards"),p(),g(4,"button",24),F("click",function(){return K(e).$implicit.dismiss()}),b(5,"X"),p()(),g(6,"div",25)(7,"div",26),b(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),H(9,"br")(10,"br")(11,"div",27),p()(),g(12,"div",28)(13,"button",29),F("click",function(){return K(e).$implicit.dismiss()}),b(14,"Close"),p()()()}if(2&t){const e=x();m(11),C("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.intermediate),or)}}function q6(t,n){if(1&t){const e=be();g(0,"div",21)(1,"div",22)(2,"h4",23),b(3,"Master Rewards"),p(),g(4,"button",24),F("click",function(){return K(e).$implicit.dismiss()}),b(5,"X"),p()(),g(6,"div",25)(7,"div",26),b(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),H(9,"br")(10,"br")(11,"div",27),p()(),g(12,"div",28)(13,"button",29),F("click",function(){return K(e).$implicit.dismiss()}),b(14,"Close"),p()()()}if(2&t){const e=x();m(11),C("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.master),or)}}let Y6=(()=>{class t{constructor(e,i,r,a,s){this.globalService=e,this.lookupService=i,this.sanitizer=r,this.modalService=a,this.componentCommunicationService=s,this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.raceSelected=new je,this.showRace=!1,this.trackRaceTypeEnum=Fn}ngOnInit(){this.practiceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Fn.practice),this.noviceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Fn.novice),this.intermediateTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Fn.intermediate),this.masterTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,Fn.master),this.intermediateTrackAvailable=this.selectedAnimal.allTrainingTracks.intermediateTrackAvailable,this.masterTrackAvailable=this.selectedAnimal.allTrainingTracks.masterTrackAvailable,this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()}}selectTrackRace(e){var i=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=i&&(i.selectedAnimals=i.selectedAnimals.filter(r=>r.raceCourseType!==this.selectedAnimal.raceCourseType),i.selectedAnimals.push(this.selectedAnimal)),this.raceSelected.emit(e)}getTrackRewardsPopover(e){var i="",r=this.lookupService.getTrackRaceRewards(e),a=.25,s=this.globalService.globalVar.modifiers.find(u=>"trainingTrackPaceModifier"===u.text);void 0!==s&&(a=s.value);for(var o=0;o<r.length;o++){var l=r[o],c=0;e===Fn.novice?c=this.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained:e===Fn.intermediate?c=this.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained:e===Fn.master&&(c=this.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained),i+=o<c?"<span class='crossed'>("+o*a*100+"% average pace) "+l+"</span>\n":"<span>("+o*a*100+"% average pace) "+l+"</span>\n"}return this.sanitizer.sanitize(Qt.HTML,this.sanitizer.bypassSecurityTrustHtml(i))}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}goToAnimal(){this.componentCommunicationService.setAnimalView(At.animals,this.selectedAnimal)}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(Sn),E(bc),E(vs),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-training-track-race-view"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{raceSelected:"raceSelected"},decls:12,vars:3,consts:[[1,"trainingTrackView"],[1,"keyword","clickableText",3,"ngClass","click"],["class","trainingTracks",4,"ngIf"],["noviceRewardModal",""],["intermediateRewardModal",""],["masterRewardModal",""],[1,"trainingTracks"],["id","practiceTrack"],[1,"practiceTrackRace",3,"click"],[1,"s4Heading"],[3,"race","showStartText"],["id","trainingTrack1"],[1,"noviceTrackRace"],[1,"clickableText",3,"click"],[3,"race","showStartText","click"],["id","trainingTrack2",4,"ngIf"],["id","trainingTrack3",4,"ngIf"],["id","trainingTrack2"],[1,"intermediateTrackRace"],["id","trainingTrack3"],[1,"masterTrackRace"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,i){1&e&&(g(0,"div",0),b(1," Selected Animal: "),g(2,"span",1),F("click",function(){return i.goToAnimal()}),b(3),p(),H(4,"hr"),I(5,z6,20,8,"div",2),p(),I(6,$6,15,1,"ng-template",null,3,Ot),I(8,W6,15,1,"ng-template",null,4,Ot),I(10,q6,15,1,"ng-template",null,5,Ot)),2&e&&(m(2),C("ngClass",i.colorConditional),m(1),ht(i.selectedAnimal.name),m(2),C("ngIf",!i.showRace))},directives:[Ci,Kt,qm],styles:[".trainingTrackView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}"]}),t})();const X6=["raceCanvas"];let Q6=(()=>{class t{constructor(e,i,r,a,s){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.themeService=s,this.skipRace=!1,this.pauseRace=!1,this.lengthCompleted=0,this.frameModifier=60,this.mountainEndingY=0,this.icyPatchBackgroundLines=[],this.volcanoYOffset=0,this.volcanoRadiusXModifier=6,this.backgroundVolcanoYStart=0,this.currentRaceFrame=0,this.lastPathEndingX=0,this.lastPathEndingY=0,this.lastPreviousSeconds=0,this.totalRaceModeXDistance=0,this.totalRaceModeYDistance=0,this.deltaY=0,this.yOffscreen=0,this.overviewYOffsetModifier=1,this.visibleDistanceXLeft=0,this.visibleDistanceYTop=0,this.visibleDistanceXRight=0,this.visibleDistanceYBottom=0,this.mountainClimbPercent=.5}ngOnInit(){this.globalService.globalVar.userIsRacing=!0,this.skipSubscription=this.skip.subscribe(()=>{this.skipRace=!0,this.isRaceFinished=!0}),this.pauseSubscription=this.pause.subscribe(()=>{this.pauseRace=!this.pauseRace}),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.skipRace=!0,this.isRaceFinished=!0)}ngAfterViewInit(){this.totalLegs=this.race.raceLegs.length,this.setupCanvas(),this.canvasXDistanceScale=this.canvasWidth/this.race.length;var e=this.raceCanvas.nativeElement.getContext("2d");e.lineWidth=6;var i=0;this.mountainClimbPercent=this.utilityService.getRandomNumber(.3,.7);var r=this.race.raceUI.timeToCompleteByFrame[this.race.raceUI.timeToCompleteByFrame.length-1];this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{var s=performance.now();e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.lineWidth=6,this.pauseRace||(i+=a,this.currentRaceFrame+=1),this.currentRaceFrame>=r*this.frameModifier||this.isRaceFinished||this.skipRace?this.displayOverview(e,!0):this.displayRace(e,i);var o=performance.now();o-s>16.7&&console.log(`Call to Draw took ${o-s} milliseconds`)})}setupCanvas(){this.raceCanvas.nativeElement.style.width="100%",this.raceCanvas.nativeElement.style.height="100%",this.raceCanvas.nativeElement.width=this.raceCanvas.nativeElement.offsetWidth,this.raceCanvas.nativeElement.height=this.raceCanvas.nativeElement.offsetHeight,this.canvasHeight=this.raceCanvas.nativeElement.height,this.canvasWidth=this.raceCanvas.nativeElement.width}displayOverview(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.lengthCompleted=0,this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=0,a=!0,l=0;if(this.race.raceLegs.forEach(y=>{void 0!==y.pathData&&0!==y.pathData.length&&(l=0,y.pathData.forEach(P=>{if(y.courseType===$.Flatland)e.lineCap="round",P.routeDesign===Le.Regular&&this.drawRegularFlatlandOverview(e,P,1,1),P.routeDesign===Le.S&&this.drawSFlatlandOverview(e,P,1,1),P.routeDesign===Le.Bumps&&this.drawBumpsFlatlandOverview(e,P,1,1);else if(y.courseType===$.Mountain){e.lineCap="round";var U=this.getCurrentAnimalRacingCourse(this.lengthCompleted)!==$.Mountain||r<y.distance*this.mountainClimbPercent;P.routeDesign===Le.Regular&&this.drawRegularMountainOverview(e,P,1,this.overviewYOffsetModifier,U),P.routeDesign===Le.Crevasse&&this.drawCrevasseMountainOverview(e,P,1,this.overviewYOffsetModifier,U),P.routeDesign===Le.Gaps&&this.drawGapsMountainOverview(e,P,1,this.overviewYOffsetModifier,U),r+=P.length}else y.courseType===$.Ocean&&(e.lineCap="round",P.routeDesign===Le.Regular&&this.drawRegularWaterOverview(e,P,1,1,a),P.routeDesign===Le.Waves&&this.drawWavesWaterOverview(e,P,1,1,a),P.routeDesign===Le.Dive&&this.drawDiveWaterOverview(e,P,1,1,a),a=!a);y.courseType===$.Tundra&&(e.lineCap="round",P.routeDesign===Le.Regular&&this.drawRegularTundraOverview(e,P,1,1),P.routeDesign===Le.Cavern&&this.drawCavernTundraOverview(e,P,1,1),P.routeDesign===Le.Hills&&this.drawHillsTundraOverview(e,P,1,1)),y.courseType===$.Volcanic&&(e.lineCap="round",this.backgroundVolcanoYStart=this.lastPathEndingY,(P.routeDesign===Le.Regular||P.routeDesign===Le.FirstRegular||P.routeDesign===Le.LastRegular)&&this.drawRegularVolcanoOverview(e,0,l,P,y.pathData.length,1,1),P.routeDesign===Le.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,l,P,y.pathData.length,1,1)),this.lengthCompleted+=P.length,l+=1,this.lastPathEndingY<0&&(this.yOffscreen=this.lastPathEndingY)}))}),this.yOffscreen<0&&(this.overviewYOffsetModifier=this.overviewYOffsetModifier/1.25,this.yOffscreen=0),i){this.globalService.globalVar.userIsRacing=!1,e.globalCompositeOperation="source-atop";var u=this.race.raceUI.distanceCoveredByFrame[this.race.raceUI.distanceCoveredByFrame.length-1]/this.race.length,d=0,h=0,f=!1;this.race.raceLegs.forEach(y=>{if(!f){var P=(d+=y.distance)/this.race.length;P>u&&(P=u,f=!0);var U=(P-h)*this.canvasWidth;e.fillStyle=this.getAnimalDistanceColorByType(y.courseType),e.fillRect(h*this.canvasWidth,0,U,this.canvasHeight),h=P}})}if(this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(y=>{"Hills"===y[0]?this.drawHillsBackgroundTundraOverview(e,y):this.drawIcyPatchBackgroundTundraOverview(e,y)}),this.race.raceLegs.some(y=>y.courseType===$.Volcanic)){var D,v=0,_=!1;this.race.raceLegs.forEach(y=>{this.race.raceLegs.some(P=>P.courseType===$.Volcanic)&&(y.courseType!==$.Volcanic&&!_&&(v+=y.distance),y.courseType===$.Volcanic&&(_=!0))}),D=this.race.raceLegs.find(y=>y.courseType===$.Volcanic).distance;var w=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,0,v,v+D,1,1),e.globalCompositeOperation=w}}}displayRace(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.lineCap="round",e.strokeStyle="gray",this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=10,a=10;this.totalRaceModeXDistance=this.race.length*r;var s=this.currentRaceFrame,o=this.race.raceUI.distanceCoveredByFrame[s],l=0;this.averageDistancePerSecond=this.race.length/this.race.raceUI.timeToCompleteByFrame[s];var c=0,u=0,d=!1;this.race.raceLegs.forEach(Ze=>{d||(o>=c&&o<c+Ze.distance&&(d=!0,this.currentLeg=Ze),d||(u+=Ze.distance)),c+=Ze.distance});var f=o-u,v=0;if(this.currentLeg.courseType===$.Mountain){var _=this.currentLeg.distance*this.mountainClimbPercent,D=0,w=!1,y=0;this.currentLeg.pathData.forEach(Ze=>{w||(_>=y&&_<y+Ze.length&&(w=!0,D=y+Ze.length-_),y+=Ze.length)}),w=!1;var P=0,U=0;this.currentLeg.pathData.forEach(Ze=>{if(!w){if(f>=P&&f<P+Ze.length&&(w=!0,U=f-P,Ze.routeDesign===Le.Crevasse)){var mt=Ze.length/2*3,Vr=3*U;v-=U<Ze.length/2?Vr:mt-(Vr-mt)}P+=Ze.length}});var Q=_+D;this.mountainEndingY=l=f<Q?f+v:Q-(f-Q)+v}if(l=this.mountainEndingY,this.currentLeg.courseType===$.Volcanic&&!this.pauseRace){var J=this.currentLeg.pathData[0].length/r;if(f>J){var ge=this.currentLeg.distance/this.volcanoRadiusXModifier,W=J/this.currentLeg.distance,S=f/this.currentLeg.distance,Me=(this.currentLeg.distance-2*J)/this.currentLeg.distance/2;if(S>W&&S<1-W){var Ne=100/(100-2*W),ct=-ge,$t=ge*Math.pow(1.05,-100*(S>.5?2*(Me-((S-W)*Ne-Me)):(S-W)*Ne*2))+ct;this.volcanoYOffset=$t}}}var $e=o*this.canvasXDistanceScale*r-this.canvasWidth/2,Vt=(l+=this.volcanoYOffset)*this.canvasXDistanceScale*a;if(this.visibleDistanceXLeft=$e,this.visibleDistanceXRight=$e+this.canvasWidth,e.globalCompositeOperation="source-over",o>=this.race.length||s>this.race.raceUI.distanceCoveredByFrame.length)return void(this.isRaceFinished=!0);var Tn=0,an=!0,Dn=0;this.race.raceLegs.forEach(Ze=>{void 0!==Ze.pathData&&0!==Ze.pathData.length&&(Dn=0,Ze.pathData.forEach(mt=>{if(Ze.courseType===$.Flatland)mt.routeDesign===Le.Regular&&this.drawRegularFlatlandOverview(e,mt,r,a,$e,Vt),mt.routeDesign===Le.S&&this.drawSFlatlandOverview(e,mt,r,a,$e,Vt),mt.routeDesign===Le.Bumps&&this.drawBumpsFlatlandOverview(e,mt,r,a,$e,Vt);else if(Ze.courseType===$.Mountain){var Vr=Tn<Ze.distance*this.mountainClimbPercent;mt.routeDesign===Le.Regular&&this.drawRegularMountainOverview(e,mt,r,a,Vr,$e,Vt),mt.routeDesign===Le.Crevasse&&this.drawCrevasseMountainOverview(e,mt,r,a,Vr,$e,Vt),mt.routeDesign===Le.Gaps&&this.drawGapsMountainOverview(e,mt,r,a,Vr,$e,Vt),Tn+=mt.length}else Ze.courseType===$.Ocean&&(mt.routeDesign===Le.Regular&&this.drawRegularWaterOverview(e,mt,r,a,an,$e,Vt),mt.routeDesign===Le.Waves&&this.drawWavesWaterOverview(e,mt,r,a,an,$e,Vt),mt.routeDesign===Le.Dive&&this.drawDiveWaterOverview(e,mt,r,a,an,$e,Vt),an=!an);Ze.courseType===$.Tundra&&(mt.routeDesign===Le.Regular&&this.drawRegularTundraOverview(e,mt,r,a,$e,Vt),mt.routeDesign===Le.Cavern&&this.drawCavernTundraOverview(e,mt,r,a,$e,Vt),mt.routeDesign===Le.Hills&&this.drawHillsTundraOverview(e,mt,r,a,$e,Vt)),Ze.courseType===$.Volcanic&&(this.backgroundVolcanoYStart=this.lastPathEndingY,(mt.routeDesign===Le.Regular||mt.routeDesign===Le.FirstRegular||mt.routeDesign===Le.LastRegular)&&this.drawRegularVolcanoOverview(e,0,Dn,mt,Ze.pathData.length,r,a,$e,Vt),mt.routeDesign===Le.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,Dn,mt,Ze.pathData.length,r,a,$e,Vt)),Dn+=1,this.lengthCompleted+=mt.length}))}),e.globalCompositeOperation="source-atop";var Wt=0,Ht=u*this.canvasXDistanceScale*r,gt=this.race.raceLegs.indexOf(this.currentLeg),Xt=null;gt>0&&(Xt=this.race.raceLegs[gt-1]),null!=Xt&&Ht>=this.visibleDistanceXLeft&&Ht<=this.visibleDistanceXRight?(Wt=(Ht-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=this.getAnimalDistanceColorByType(Xt.courseType),e.fillRect(0,0,this.canvasWidth*Wt,this.canvasHeight),e.fillStyle=this.getAnimalDistanceColorByType(this.currentLeg.courseType),e.fillRect(this.canvasWidth*Wt,0,this.canvasWidth/2-this.canvasWidth*Wt,this.canvasHeight)):(e.fillStyle=this.getAnimalDistanceColor(o),e.fillRect(0,0,this.canvasWidth/2,this.canvasHeight));var _n=this.getAnimalRacerColor(o);if((this.race.raceUI.racerEffectByFrame[s]===pr.LostFocus||this.race.raceUI.racerEffectByFrame[s]===pr.LostStamina||this.race.raceUI.racerEffectByFrame[s]===pr.Stumble)&&(_n=this.utilityService.shadeColor(_n,-90)),this.race.raceUI.racerEffectByFrame[s]===pr.Burst&&(_n=this.utilityService.shadeColor(_n,90)),e.fillStyle=_n,e.fillRect(this.canvasWidth/2-5,0,5,this.canvasHeight),this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(Ze=>{"Hills"===Ze[0]?this.drawHillsBackgroundTundraOverview(e,Ze):this.drawIcyPatchBackgroundTundraOverview(e,Ze)}),e.globalCompositeOperation="source-atop",this.drawRacer(e,this.averageDistancePerSecond/this.frameModifier*s*this.canvasXDistanceScale*r,"black"),this.race.localRaceType!==kt.Track){if(this.lookupService.getResourceByName("Money Mark")>0){var Jn=.75,jn=this.globalService.globalVar.modifiers.find(Ze=>"moneyMarkPaceModifier"===Ze.text);null!=jn&&(Jn=jn.value),this.drawRacer(e,this.race.length/(this.race.raceUI.timeToCompleteByFrame[s]*Jn)/this.frameModifier*s*this.canvasXDistanceScale*r,"gold")}}else{var Xe=.25,Gt=this.globalService.globalVar.modifiers.find(Ze=>"trainingTrackPaceModifier"===Ze.text);void 0!==Gt&&(Xe=Gt.value);for(var bn=0;bn<11;bn++){var ia=this.race.length/(this.race.raceUI.timeToCompleteByFrame[s]/(1+Xe*(bn+1)))/this.frameModifier*s*this.canvasXDistanceScale*r,In=this.getTrackRacerColor(bn);this.drawRacer(e,ia,In)}}if(this.drawBreakpoints(e,r),this.race.raceLegs.some(Ze=>Ze.courseType===$.Volcanic)){var Fr,Mn=0,Zt=!1;this.race.raceLegs.forEach(Ze=>{this.race.raceLegs.some(mt=>mt.courseType===$.Volcanic)&&(Ze.courseType!==$.Volcanic&&!Zt&&(Mn+=Ze.distance),Ze.courseType===$.Volcanic&&(Zt=!0))}),Fr=this.race.raceLegs.find(Ze=>Ze.courseType===$.Volcanic).distance;var _s=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,s,Mn,Mn+Fr,r,a,$e,Vt),e.globalCompositeOperation=_s}}}getAnimalDistanceColor(e){var i="",r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(a.courseType===$.Flatland&&(i="#7d3f00"),a.courseType===$.Mountain&&(i="#1b630d"),a.courseType===$.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),a.courseType===$.Tundra&&(i="#28809c"),a.courseType===$.Volcanic&&(i="#8f1a1a")),r+=a.distance}),i}getAnimalDistanceColorByType(e){var i="";return e===$.Flatland&&(i="#7d3f00"),e===$.Mountain&&(i="#1b630d"),e===$.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===$.Tundra&&(i="#28809c"),e===$.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e){var i="",r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(a.courseType===$.Flatland&&(i="#c66900"),a.courseType===$.Mountain&&(i="#279113"),a.courseType===$.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#7463f7":"#0000FF"),a.courseType===$.Tundra&&(i="#1CA1C9"),a.courseType===$.Volcanic&&(i="#D92525")),r+=a.distance}),i}getTrackRacerColor(e){var i="";return 0===e&&(i="#cfc800"),1===e&&(i="#00cf68"),2===e&&(i="#cf00c5"),3===e&&(i="#cfb8e6"),4===e&&(i="#4a1d1d"),5===e&&(i="#1b5054"),6===e&&(i="#541b3c"),7===e&&(i="#aeb85a"),8===e&&(i="#ffffff"),9===e&&(i="#01253b"),10===e&&(i="#790dde"),i}getCurrentAnimalRacingCourse(e){var i;i=$.Flatland;var r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(i=a.courseType),r+=a.distance}),i}getNextAnimalRacingCourse(e){var i;i=$.Flatland;var r=this.race.raceLegs.indexOf(e);return this.race.raceLegs.length>r&&(i=this.race.raceLegs[r+1].courseType),i}drawRacer(e,i,r){var a=0;i>=this.visibleDistanceXLeft&&i<=this.visibleDistanceXRight&&(a=(i-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=r,e.fillRect(this.canvasWidth*a-5,0,5,this.canvasHeight))}drawBreakpoints(e,i){for(var r=0,a=0;a<this.race.raceLegs.length;a++){var s=this.race.raceLegs[a],o=null;a<this.race.raceLegs.length-1&&(o=this.race.raceLegs[a+1]);var l=0,c=(r+s.distance)*this.canvasXDistanceScale*i;c>=this.visibleDistanceXLeft&&c<=this.visibleDistanceXRight&&(l=(c-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=null!==o?this.getAnimalDistanceColorByType(o.courseType):"pink",e.fillRect(this.canvasWidth*l-5,0,5,this.canvasHeight)),r+=s.distance}}drawRegularFlatlandOverview(e,i,r,a,s,o){var l=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0),e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+o),e.lineTo(this.lastPathEndingX+l-s,this.lastPathEndingY+o),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawSFlatlandOverview(e,i,r,a,s,o){var l=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0);var c=this.lastPathEndingX-s,u=this.lastPathEndingY+o,d=.04*l,h=.23*l,f=1.2173*h,v=.04*l,_=f,D=v+h,w=f,y=D+h,P=f,U=y,J=y,ge=f,W=J+h,S=f,Me=W+h,Ne=f,Ge=Me;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.bezierCurveTo(c+d,u,c+v,u+_,c+D,u+w),e.bezierCurveTo(c+D,u+w,c+y,u+P,c+U,u),e.stroke(),e.beginPath(),e.moveTo(c+U,u),e.bezierCurveTo(c+U,u,c+J,u-ge,c+W,u-S),e.bezierCurveTo(c+W,u-S,c+Me,u-Ne,c+Me,u),e.stroke(),e.beginPath(),e.moveTo(c+Me,u),e.lineTo(c+Ge+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+Ge+d}drawBumpsFlatlandOverview(e,i,r,a,s,o){var l=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0);var c=this.lastPathEndingX-s,u=this.lastPathEndingY+o,d=.04*l,h=.115*l,f=h/3;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.lineTo(c+d+h/2,u-f),e.lineTo(c+d+h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+h,u),e.lineTo(c+d+h+h/2,u-f),e.lineTo(c+d+2*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+2*h,u),e.lineTo(c+d+2*h+h/2,u-f),e.lineTo(c+d+3*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+3*h,u),e.lineTo(c+d+3*h+h/2,u-f),e.lineTo(c+d+4*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+4*h,u),e.lineTo(c+d+4*h+h/2,u-f),e.lineTo(c+d+5*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+5*h,u),e.lineTo(c+d+5*h+h/2,u-f),e.lineTo(c+d+6*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+6*h,u),e.lineTo(c+d+6*h+h/2,u-f),e.lineTo(c+d+7*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+7*h,u),e.lineTo(c+d+7*h+h/2,u-f),e.lineTo(c+d+8*h,u),e.stroke(),e.beginPath(),e.moveTo(c+d+8*h,u),e.lineTo(c+d+8*h+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawRegularMountainOverview(e,i,r,a,s,o,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==o&&(o=0),null==l&&(l=0),e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+l),e.lineTo(this.lastPathEndingX+c-o,s?this.lastPathEndingY-u+l:this.lastPathEndingY+u+l),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=s?this.lastPathEndingY-u:this.lastPathEndingY+u}drawCrevasseMountainOverview(e,i,r,a,s,o,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==o&&(o=0),null==l&&(l=0);var d=this.lastPathEndingX-o,h=this.lastPathEndingY+l,v=c,_=u,D=2*_;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+l),s?(D=2*_-(_-0),e.lineTo(d+0,h-0),e.lineTo(d+0+v/2,h+D-0),e.lineTo(d+0+v,h-_-0),e.lineTo(d+0+v,h-_-0)):(e.lineTo(d+0,h+0),e.lineTo(d+0+v/2,h+D+0),e.lineTo(d+0+v,h+_+0),e.lineTo(d+0+v,h+_+0)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=s?this.lastPathEndingY-u:this.lastPathEndingY+u}drawGapsMountainOverview(e,i,r,a,s,o,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==o&&(o=0),null==l&&(l=0);var d=this.lastPathEndingX-o,h=this.lastPathEndingY+l,f=.04*c,v=.115*c,_=.115*u,D=.04*u;e.beginPath(),e.moveTo(d,h),s?(e.lineTo(d+f,h-D),e.moveTo(d+v+f,h-_-D),e.lineTo(d+2*v+f,h-2*_-D),e.moveTo(d+3*v+f,h-3*_-D),e.lineTo(d+4*v+f,h-4*_-D),e.moveTo(d+5*v+f,h-5*_-D),e.lineTo(d+6*v+f,h-6*_-D),e.moveTo(d+7*v+f,h-7*_-D),e.lineTo(d+8*v+f,h-8*_-D),e.lineTo(d+8*v+2*f,h-8*_-2*D)):(e.lineTo(d+f,h+D),e.moveTo(d+v+f,h+_+D),e.lineTo(d+2*v+f,h+2*_+D),e.moveTo(d+3*v+f,h+3*_+D),e.lineTo(d+4*v+f,h+4*_+D),e.moveTo(d+5*v+f,h+5*_+D),e.lineTo(d+6*v+f,h+6*_+D),e.moveTo(d+7*v+f,h+7*_+D),e.lineTo(d+8*v+f,h+8*_+D),e.lineTo(d+8*v+2*f,h+8*_+2*D)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=s?this.lastPathEndingY-u:this.lastPathEndingY+u}drawRegularWaterOverview(e,i,r,a,s,o,l){var c=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==l&&(l=0);var u=this.lastPathEndingX-o,d=this.lastPathEndingY+l,h=c/3,f=c/6,v=u+h,_=s?d+f:d-f,D=u+2*h,w=s?d+f:d-f,y=u+3*h,P=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(v,_,D,w,y,P),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawWavesWaterOverview(e,i,r,a,s,o,l){var c=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==l&&(l=0);var u=this.lastPathEndingX-o,d=this.lastPathEndingY+l,h=c/3,f=c/3,v=u+h/3,_=d,D=u+h/3,w=d-f,y=u+h,P=d-.6*f;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(v,_,D,w,y,P),e.stroke();var U=y-h/3,Q=P-f/10,J=y-h/3,ge=P+.4*f,W=y,S=d;e.beginPath(),e.moveTo(y,P),e.bezierCurveTo(U,Q,J,ge,W,S),e.stroke();var Me=W+h/3,Ne=S,Ge=W+h/3,ze=S-f,lt=W+h,ct=S-.6*f;e.beginPath(),e.moveTo(W,S),e.bezierCurveTo(Me,Ne,Ge,ze,lt,ct),e.stroke();var $t=lt-h/3,$e=ct-f/10,Vt=lt-h/3,Tn=ct+.4*f,an=lt,Bn=d;e.beginPath(),e.moveTo(lt,ct),e.bezierCurveTo($t,$e,Vt,Tn,an,Bn),e.stroke();var Dn=an+h/3,Wt=Bn,Ht=an+h/3,gt=Bn-f,Xt=an+h,We=Bn-.6*f;e.beginPath(),e.moveTo(an,Bn),e.bezierCurveTo(Dn,Wt,Ht,gt,Xt,We),e.stroke();var Gn=Xt-h/3,_n=We-f/10,ri=Xt-h/3,Pn=We+.4*f,pi=Xt,Jn=d;e.beginPath(),e.moveTo(Xt,We),e.bezierCurveTo(Gn,_n,ri,Pn,pi,Jn),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawDiveWaterOverview(e,i,r,a,s,o,l){var c=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==l&&(l=0);var u=this.lastPathEndingX-o,d=this.lastPathEndingY+l,h=c/3,f=c/2,v=u,_=s?d+2*f:d-2*f,D=u+2*h,w=s?d+f/4:d-f/4,y=u+3*h,P=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(v,_,D,w,y,P),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawRegularTundraOverview(e,i,r,a,s,o){var l=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0);var c=l/4,u=.97*c,d=i.driftAmount/80*u,h=(i.totalTundraYAmount-i.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+h+o),e.lineTo(this.lastPathEndingX+l-s,this.lastPathEndingY+h+d+o),e.stroke();var f=[];f.push("Regular"),f.push([this.lastPathEndingX-s,this.lastPathEndingY+o]),f.push([this.lastPathEndingX-s,this.lastPathEndingY+c+o]),f.push([this.lastPathEndingX+l-s,this.lastPathEndingY+c+o]),f.push([this.lastPathEndingX+l-s,this.lastPathEndingY-c+o]),f.push([this.lastPathEndingX-s,this.lastPathEndingY-c+o]),this.icyPatchBackgroundLines.push(f),this.lastPathEndingX=this.lastPathEndingX+l}drawCavernTundraOverview(e,i,r,a,s,o){var l=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0);var h=l/4*.97,f=i.driftAmount/80*h,v=(i.totalTundraYAmount-i.driftAmount)/80*h;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+v+o),e.lineTo(this.lastPathEndingX+l-s,this.lastPathEndingY+v+f+o),e.stroke();var D=l/4*.75,w=[];w.push("Cavern"),w.push([this.lastPathEndingX-s,this.lastPathEndingY+o]),w.push([this.lastPathEndingX-s,this.lastPathEndingY+D+o]),w.push([this.lastPathEndingX+l-s,this.lastPathEndingY+D+o]),w.push([this.lastPathEndingX+l-s,this.lastPathEndingY-D+o]),w.push([this.lastPathEndingX-s,this.lastPathEndingY-D+o]),this.icyPatchBackgroundLines.push(w),this.lastPathEndingX=this.lastPathEndingX+l}drawHillsTundraOverview(e,i,r,a,s,o){var l=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==o&&(o=0);var c=l/4,u=.97*c,d=i.driftAmount/80*u,h=(i.totalTundraYAmount-i.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+h+o),e.lineTo(this.lastPathEndingX+l-s,this.lastPathEndingY+h+d+o),e.stroke();var f=[];f.push("Hills"),f.push([this.lastPathEndingX-s,this.lastPathEndingY+o]),f.push([this.lastPathEndingX-s,this.lastPathEndingY+c+o]),f.push([this.lastPathEndingX+l-s,this.lastPathEndingY+c+o]),f.push([this.lastPathEndingX+l-s,this.lastPathEndingY-c+o]),f.push([this.lastPathEndingX-s,this.lastPathEndingY-c+o]);var v=l/12,_=l/4,D=c/2,w=c*(3/4),y=c/4;f.push([this.lastPathEndingX+_-v/2-s,this.lastPathEndingY-D+y/2+o]),f.push([this.lastPathEndingX+_-v/2-s,this.lastPathEndingY-D-y+o,this.lastPathEndingX+_+v/2-s,this.lastPathEndingY-D-y+o,this.lastPathEndingX+_+v/2-s,this.lastPathEndingY-D+y/2+o]),f.push([this.lastPathEndingX+_-v/2-s,this.lastPathEndingY+D+y/2+o]),f.push([this.lastPathEndingX+_-v/2-s,this.lastPathEndingY+D-y+o,this.lastPathEndingX+_+v/2-s,this.lastPathEndingY+D-y+o,this.lastPathEndingX+_+v/2-s,this.lastPathEndingY+D+y/2+o]),f.push([this.lastPathEndingX+2*_-v/2-s,this.lastPathEndingY-w+y/2+o]),f.push([this.lastPathEndingX+2*_-v/2-s,this.lastPathEndingY-w-y+o,this.lastPathEndingX+2*_+v/2-s,this.lastPathEndingY-w-y+o,this.lastPathEndingX+2*_+v/2-s,this.lastPathEndingY-w+y/2+o]),f.push([this.lastPathEndingX+2*_-v/2-s,this.lastPathEndingY+w+y/2+o]),f.push([this.lastPathEndingX+2*_-v/2-s,this.lastPathEndingY+w-y+o,this.lastPathEndingX+2*_+v/2-s,this.lastPathEndingY+w-y+o,this.lastPathEndingX+2*_+v/2-s,this.lastPathEndingY+w+y/2+o]),f.push([this.lastPathEndingX+3*_-v/2-s,this.lastPathEndingY-D+y/2+o]),f.push([this.lastPathEndingX+3*_-v/2-s,this.lastPathEndingY-D-y+o,this.lastPathEndingX+3*_+v/2-s,this.lastPathEndingY-D-y+o,this.lastPathEndingX+3*_+v/2-s,this.lastPathEndingY-D+y/2+o]),f.push([this.lastPathEndingX+3*_-v/2-s,this.lastPathEndingY+D+y/2+o]),f.push([this.lastPathEndingX+3*_-v/2-s,this.lastPathEndingY+D-y+o,this.lastPathEndingX+3*_+v/2-s,this.lastPathEndingY+D-y+o,this.lastPathEndingX+3*_+v/2-s,this.lastPathEndingY+D+y/2+o]),this.icyPatchBackgroundLines.push(f),this.lastPathEndingX=this.lastPathEndingX+l}drawIcyPatchBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r}drawHillsBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",i.length>=17&&(e.beginPath(),e.moveTo(i[6][0],i[6][1]),e.bezierCurveTo(i[7][0],i[7][1],i[7][2],i[7][3],i[7][4],i[7][5]),e.stroke(),e.beginPath(),e.moveTo(i[8][0],i[8][1]),e.bezierCurveTo(i[9][0],i[9][1],i[9][2],i[9][3],i[9][4],i[9][5]),e.stroke(),e.beginPath(),e.moveTo(i[10][0],i[10][1]),e.bezierCurveTo(i[11][0],i[11][1],i[11][2],i[11][3],i[11][4],i[11][5]),e.stroke(),e.beginPath(),e.moveTo(i[12][0],i[12][1]),e.bezierCurveTo(i[13][0],i[13][1],i[13][2],i[13][3],i[13][4],i[13][5]),e.stroke(),e.beginPath(),e.moveTo(i[14][0],i[14][1]),e.bezierCurveTo(i[15][0],i[15][1],i[15][2],i[15][3],i[15][4],i[15][5]),e.stroke(),e.beginPath(),e.moveTo(i[16][0],i[16][1]),e.bezierCurveTo(i[17][0],i[17][1],i[17][2],i[17][3],i[17][4],i[17][5]),e.stroke()),e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r,e.strokeStyle="gray"}drawRegularVolcanoOverview(e,i,r,a,s,o,l,c,u){var d=a.length/this.race.length*this.canvasWidth*o;null==c&&(c=0),null==u&&(u=0);var w=this.lastPathEndingX-c-d*r+d*s/2,y=this.lastPathEndingY+0+u,P=d*s/this.volcanoRadiusXModifier,U=d*s/2-d/o,Q=Math.PI/2,W=180/s,S=0;a.routeDesign===Le.FirstRegular?(this.volcanoStartingAngle=S=90,e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d/o-c,this.lastPathEndingY+0+u),e.stroke()):a.routeDesign===Le.LastRegular&&(e.beginPath(),e.moveTo(this.lastPathEndingX+(d-d/o)-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d-c,this.lastPathEndingY+0+u),e.stroke()),(S=this.volcanoStartingAngle-W)<0&&(S=360-Math.abs(S)),e.beginPath(),e.ellipse(w,y,P,U,Q,this.volcanoStartingAngle*(Math.PI/180),S*(Math.PI/180),!0),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=S}drawSteppingStonesVolcanoOverview(e,i,r,a,s,o,l,c,u){var d=a.length/this.race.length*this.canvasWidth*o;null==c&&(c=0),null==u&&(u=0);for(var w=this.lastPathEndingX-c-d*r+d*s/2,y=this.lastPathEndingY+0+u,P=d*s/this.volcanoRadiusXModifier,U=d*s/2-d/o,Q=Math.PI/2,W=180/s,Ge=0,S=W/20,Me=0;Me<10;Me++){var Ne=this.volcanoStartingAngle-S*(2*Me);Ne<0&&(Ne=360-Math.abs(Ne)),(Ge=Ne-S)<0&&(Ge=360-Math.abs(Ge)),e.beginPath(),e.ellipse(w,y,P,U,Q,Ne*(Math.PI/180),Ge*(Math.PI/180),!0),e.stroke()}(Ge=this.volcanoStartingAngle-W)<0&&(Ge=360-Math.abs(Ge)),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=Ge}drawBackgroundVolcano(e,i,r,a,s,o,l,c){null==l&&(l=0),null==c&&(c=0);var u=.1*(a-r),d=(r+u)*this.canvasXDistanceScale*s-l,h=(a-u)*this.canvasXDistanceScale*s-l,f=h-d,v=(a-r)*this.canvasXDistanceScale*s/this.volcanoRadiusXModifier,_=this.canvasHeight*s,D=this.backgroundVolcanoYStart-.75*v+c,w=d+.15*f,y=_-10*o,P=d+.35*f,U=D+20*o,Q=d+.4*f,J=D,ge=h-.15*f,W=_-10*o,S=h-.35*f,Me=D+20*o,Ne=h-.4*f,Ge=D,ze=e.fillStyle,lt=e.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);lt.addColorStop(0,"red"),lt.addColorStop(1,"orange"),e.fillStyle=lt;var ct=Q+(Ne-Q)/3,$t=D+v/4,$e=Q+2*(Ne-Q)/3,Vt=D+v/4,Wt=Q-.075*f,Ht=J+v/2,gt=Ne+.075*f,Xt=Ge+v/2,We=Wt+1.7*(gt-Wt)/5,Gn=Ht+.5*v,_n=Wt+1.4*(gt-Wt)/5,ri=Ht+v/2,Pn=Wt+2.5*(gt-Wt)/5,pi=Ht,Jn=Wt+3.6*(gt-Wt)/5,jn=Ht+v,Di=Wt+3.3*(gt-Wt)/5,gi=Ht-.25*v;e.beginPath(),e.moveTo(Q,J),e.bezierCurveTo(ct,$t,$e,Vt,Ne,Ge),e.lineTo(gt,Xt),e.moveTo(gt,Xt),e.bezierCurveTo(Jn,jn,Di,gi,Pn,pi),e.bezierCurveTo(We,Gn,_n,ri,Wt,Ht),e.lineTo(Q,J),e.fill(),1===s&&(i=this.race.raceUI.lavaFallPercentByFrame.length-1);var dn=this.race.raceUI.lavaFallPercentByFrame[i],Xe=(a-r)*this.canvasXDistanceScale*s,Gt=r*this.canvasXDistanceScale*s,bn=Gt+.4*Xe-l+0,mi=Gt+.45*Xe-l+0,$a=Gt+.5*Xe-l+0,Or=Gt+.55*Xe-l+0,ia=Gt+.6*Xe-l+0,In=.01*(a-r)*this.canvasXDistanceScale*s,Mn=In/2,Zt=D+v/4,Fr=this.backgroundVolcanoYStart+v+c,_s=(Fr-Zt)*dn[0];e.beginPath(),e.ellipse(bn,Zt+_s-Mn,In,Mn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(bn-In,Zt,2*In,_s-(Mn-1));var Ze=(Fr-Zt)*dn[1];e.beginPath(),e.ellipse(mi,Zt+Ze-Mn,In,Mn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(mi-In,Zt,2*In,Ze-(Mn-1));var mt=(Fr-Zt)*dn[2];e.beginPath(),e.ellipse($a,Zt+mt-Mn,In,Mn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect($a-In,Zt,2*In,mt-(Mn-1));var Vr=(Fr-Zt)*dn[3];e.beginPath(),e.ellipse(Or,Zt+Vr-Mn,In,Mn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Or-In,Zt,2*In,Vr-(Mn-1));var Bh=(Fr-Zt)*dn[4];e.beginPath(),e.ellipse(ia,Zt+Bh-Mn,In,Mn,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(ia-In,Zt,2*In,Bh-(Mn-1)),e.fillStyle=ze,e.beginPath(),e.moveTo(d,_),e.bezierCurveTo(w,y,P,U,Q,J),e.stroke(),e.beginPath(),e.moveTo(h,_),e.bezierCurveTo(ge,W,S,Me,Ne,Ge),e.stroke();var Ym=e.lineWidth;e.lineWidth=2;var Rn=.175,Zs=d+f*(Rn+.025),nu=_-v/4,Lh=d+f*(Rn+.2),Xm=D+v/3,Uh=d+f*(Rn+.25),Hh=D+v/4;e.beginPath(),e.moveTo(d+f*Rn,.95*_),e.bezierCurveTo(Zs,nu,Lh,Xm,Uh,Hh),e.stroke();var Gh=d+f*(.025+(Rn=.35)),iu=_-v/4,jh=d+f*(Rn+.075),Qm=D+v/2,ru=d+f*(Rn+.1),Mi=D+v/3;e.beginPath(),e.moveTo(d+f*Rn,.95*_),e.bezierCurveTo(Gh,iu,jh,Qm,ru,Mi),e.stroke();var Zm=h-f*(.025+(Rn=.35)),zh=_-v/4,Km=h-f*(Rn+.075),$h=D+v/2,Jm=h-f*(Rn+.1),Wa=D+v/3;e.beginPath(),e.moveTo(h-f*Rn,.95*_),e.bezierCurveTo(Zm,zh,Km,$h,Jm,Wa),e.stroke();var Wh=h-f*(.025+(Rn=.175)),bs=_-v/4,ev=h-f*(Rn+.2),$n=D+v/3,qh=h-f*(Rn+.25),Yh=D+v/4;e.beginPath(),e.moveTo(h-f*Rn,.95*_),e.bezierCurveTo(Wh,bs,ev,$n,qh,Yh),e.stroke(),e.lineWidth=Ym}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.skipSubscription.unsubscribe(),this.pauseSubscription.unsubscribe(),this.globalService.globalVar.userIsRacing=!1,this.race.raceUI.distanceCoveredByFrame=[],this.race.raceUI.lavaFallPercentByFrame=[],this.race.raceUI.maxSpeedByFrame=[],this.race.raceUI.racerEffectByFrame=[],this.race.raceUI.staminaPercentByFrame=[],this.race.raceUI.timeToCompleteByFrame=[],this.race.raceUI.yAdjustmentByFrame=[],this.race.raceUI.velocityByFrame=[]}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(zi),E(Sa),E(Sn),E(al))},t.\u0275cmp=Je({type:t,selectors:[["app-draw-race"]],viewQuery:function(e,i){if(1&e&&Ba(X6,5,tn),2&e){let r;cn(r=un())&&(i.raceCanvas=r.first)}},inputs:{race:"race",skip:"skip",pause:"pause"},decls:3,vars:0,consts:[[1,"drawRaceDiv"],["id","raceCanvas",1,"raceCanvas"],["raceCanvas",""]],template:function(e,i){1&e&&(g(0,"div",0),H(1,"canvas",1,2),p())},styles:[".drawRaceDiv[_ngcontent-%COMP%]{height:100%}.raceCanvas[_ngcontent-%COMP%]{border:1px solid black}"]}),t})();const Z6=["circuitRewardModal"];function K6(t,n){1&t&&(g(0,"span"),b(1,"BURST!"),p())}function J6(t,n){if(1&t){const e=be();g(0,"div",8)(1,"div",9)(2,"div")(3,"button",6),F("click",function(){return K(e),x().skipRaceAnimation()}),b(4,"Skip"),p()(),g(5,"div"),b(6),I(7,K6,2,0,"span",2),p(),g(8,"div"),b(9),p(),g(10,"div"),b(11),p(),g(12,"div")(13,"button",6),F("click",function(){return K(e),x().pauseRaceAnimation()}),b(14,"Pause"),p()()(),g(15,"div",10)(16,"div",11),H(17,"app-draw-race",12),p(),H(18,"div",13,14),p()()}if(2&t){const e=Pt(19),i=x();m(6),Nn("Velocity: ",i.velocityAtCurrentFrame," / ",i.maxSpeedAtCurrentFrame,"m/s "),m(1),C("ngIf",i.racerEffectAtCurrentFrame===i.burstEffect),m(2),de("Stamina: ",i.staminaAtCurrentFrame,"%"),m(2),Nn("Position: ",i.positionAtCurrentFrame," / ",i.totalRacers,""),m(6),C("race",i.selectedRace)("skip",i.skipRace.asObservable())("pause",i.pauseRace.asObservable()),m(1),C("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),or)}}function eH(t,n){if(1&t){const e=be();g(0,"div")(1,"div",15)(2,"div")(3,"button",6),F("click",function(){return K(e),x().skipRaceAnimation()}),b(4,"Skip"),p()(),g(5,"div")(6,"button",6),F("click",function(){return K(e),x().pauseRaceAnimation()}),b(7,"Pause"),p()()(),H(8,"div",16,14),p()}if(2&t){const e=Pt(9),i=x();m(8),C("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),or)}}function tH(t,n){if(1&t){const e=be();g(0,"div",17)(1,"div",15)(2,"div")(3,"button",6),F("click",function(){return K(e),x().skipRaceAnimation()}),b(4,"Skip"),p()(),g(5,"div"),b(6),p(),g(7,"div"),b(8),p(),g(9,"div")(10,"button",6),F("click",function(){return K(e),x().pauseRaceAnimation()}),b(11,"Pause"),p()()(),g(12,"div",18),H(13,"app-draw-race",12),p()()}if(2&t){const e=x();m(6),Nn("Velocity: ",e.velocityAtCurrentFrame," / ",e.maxSpeedAtCurrentFrame,"m/s "),m(2),de("Stamina: ",e.staminaAtCurrentFrame,"%"),m(5),C("race",e.selectedRace)("skip",e.skipRace.asObservable())("pause",e.pauseRace.asObservable())}}function nH(t,n){if(1&t&&(g(0,"td")(1,"span",23),b(2),p(),b(3),p()),2&t){const e=n.$implicit;m(2),ht(e.name),m(1),de(": ",e.amount,"")}}function iH(t,n){if(1&t&&(g(0,"tr"),I(1,nH,4,2,"td",22),p()),2&t){const e=n.$implicit;m(1),C("ngForOf",e)}}function rH(t,n){if(1&t&&(g(0,"div",19)(1,"span",20),b(2,"Rewards"),p(),g(3,"div",21)(4,"table"),I(5,iH,2,1,"tr",22),p()()()),2&t){const e=x();m(5),C("ngForOf",e.rewardRows)}}function aH(t,n){if(1&t){const e=be();g(0,"div",24)(1,"div",25)(2,"h4",26),b(3,"Circuit Rank Reward!"),p(),g(4,"button",27),F("click",function(){return K(e).$implicit.dismiss()}),b(5,"X"),p()(),g(6,"div",28)(7,"div",29),b(8," After ranking up, you receive: "),H(9,"br"),g(10,"div",20),b(11),p()(),H(12,"br")(13,"br"),g(14,"div"),b(15),p()(),g(16,"div",30)(17,"button",31),F("click",function(){return K(e).$implicit.dismiss()}),b(18,"Continue"),p()()()}if(2&t){const e=x();m(11),ht(e.selectedRace.circuitIncreaseReward[0]),m(4),ht(e.selectedRace.circuitIncreaseReward[1])}}let dM=(()=>{class t{constructor(e,i,r,a,s,o,l,c){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.initializeService=s,this.modalService=o,this.sanitizer=l,this.raceLogicService=c,this.incrementalRaceUpdates="",this.raceFinished=new je,this.skipRace=new he,this.pauseRace=new he,this.raceSkipped=!1,this.racePaused=!1,this.frameModifier=60,this.displayVisualRace=!0,this.displayTextUpdates=!0,this.burstEffect=pr.Burst}ngOnInit(){var e=this.globalService.globalVar.settings.get("raceDisplayInfo");e===Ir.draw?(this.displayVisualRace=!0,this.displayTextUpdates=!1):e===Ir.text?(this.displayVisualRace=!1,this.displayTextUpdates=!0):e===Ir.both&&(this.displayVisualRace=!0,this.displayTextUpdates=!0);var i=this.raceLogicService.runRace(this.selectedRace);this.setupDisplayRewards(this.selectedRace),this.displayRaceUpdates(i),this.getFrameByFrameStats(),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.raceSkipped=!0)}ngOnDestroy(){null!=this.frameByFrameSubscription&&this.frameByFrameSubscription.unsubscribe(),this.raceFinished.emit(!0)}displayRaceUpdates(e){var i=this,r=e.raceUpdates;this.incrementalRaceUpdates="";var s=0,o=this.gameLoopService.gameUpdateEvent.subscribe(function(){var l=zs(function*(c){var u=performance.now();if(i.racePaused||(s+=1),0===r.length||i.raceSkipped)return i.raceSkipped&&r.forEach(h=>{i.incrementalRaceUpdates+=i.sanitizer.sanitize(Qt.HTML,i.sanitizer.bypassSecurityTrustHtml(h.text+"\n"))}),e.wasSuccessful&&(i.displayResults=!0,null!=i.selectedRace.circuitIncreaseReward&&""!==i.selectedRace.circuitIncreaseReward[0]&&i.modalService.open(i.circuitRewardModal,{ariaLabelledBy:"modal-basic-title",size:"lg"})),void o.unsubscribe();s>=r[0].value&&(i.incrementalRaceUpdates+=i.sanitizer.sanitize(Qt.HTML,i.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift());var d=performance.now();d-u>16.7&&console.log(`Call to Update took ${d-u} milliseconds`)});return function(c){return l.apply(this,arguments)}}())}setupDisplayRewards(e){if(this.rewardCells=[],this.rewardRows=[],null!=e.rewards){for(var r=1;r<=e.rewards.length;r++)this.rewardCells.push({name:e.rewards[r-1].name,amount:e.rewards[r-1].amount}),r%4==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}goToRaceSelection(){this.raceFinished.emit(!0)}skipRaceAnimation(){this.raceSkipped=!0,this.skipRace.next(!0)}pauseRaceAnimation(){this.racePaused=!this.racePaused,this.pauseRace.next(!0)}getFrameByFrameStats(){var e=this;this.totalRacers=this.lookupService.getTotalRacersByRace(this.selectedRace);var r=0;this.frameByFrameSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var a=zs(function*(s){var o=performance.now();e.racePaused||(r+=1);var l=r;if(e.selectedRace.raceUI.velocityByFrame.length<=l||e.raceSkipped){var c=e.selectedRace.raceUI.velocityByFrame.length-1;e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[c]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[c]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[c].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[c],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[c])}else e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[l]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[l]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[l].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[l],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[l]);var u=performance.now();u-o>16.7&&console.log(`Call to FrameByFrame took ${u-o} milliseconds`)});return function(s){return a.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(zi),E(Sa),E(Sn),E(vm),E(vs),E(bc),E(FT))},t.\u0275cmp=Je({type:t,selectors:[["app-race"]],viewQuery:function(e,i){if(1&e&&Ba(Z6,7),2&e){let r;cn(r=un())&&(i.circuitRewardModal=r.first)}},inputs:{selectedRace:"selectedRace"},outputs:{raceFinished:"raceFinished"},decls:10,vars:4,consts:[["id","raceInfo"],["class","bothDisplayValues",4,"ngIf"],[4,"ngIf"],["class","oneDisplayValue",4,"ngIf"],["class","results",4,"ngIf"],[1,"back"],[3,"click"],["circuitRewardModal",""],[1,"bothDisplayValues"],[1,"headerInfo"],[1,"updates"],[1,"drawRaces"],[3,"race","skip","pause"],[1,"raceUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],[1,"individualItemHeaderInfo"],[1,"raceUpdates","onlyText",3,"scrollTop","innerHTML"],[1,"oneDisplayValue"],[1,"drawRace","onlyDraw"],[1,"results"],[1,"s4Heading"],[1,"rewards"],[4,"ngFor","ngForOf"],[1,"keyword"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,i){1&e&&(g(0,"div",0),I(1,J6,20,11,"div",1),I(2,eH,10,2,"div",2),I(3,tH,14,6,"div",3),I(4,rH,6,1,"div",4),g(5,"div",5)(6,"button",6),F("click",function(){return i.goToRaceSelection()}),b(7,"Back"),p()()(),I(8,aH,19,2,"ng-template",null,7,Ot)),2&e&&(m(1),C("ngIf",i.displayVisualRace&&i.displayTextUpdates),m(1),C("ngIf",!i.displayVisualRace&&i.displayTextUpdates),m(1),C("ngIf",i.displayVisualRace&&!i.displayTextUpdates),m(1),C("ngIf",i.displayResults))},directives:[Kt,Q6,di],styles:['#raceInfo[_ngcontent-%COMP%]{height:100%;margin-left:.5rem;margin-right:.5rem;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre;overflow-x:hidden}.headerInfo[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between}.individualItemHeaderInfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bothDisplayValues[_ngcontent-%COMP%], .oneDisplayValue[_ngcontent-%COMP%]{height:76.5%}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawRace raceUpdates"}.raceUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:raceUpdates}.drawRaces[_ngcontent-%COMP%]{grid-area:drawRace}.onlyText[_ngcontent-%COMP%]{text-align:center}.onlyDraw[_ngcontent-%COMP%]{text-align:center;height:100%}.rightAlign[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:left}td[_ngcontent-%COMP%]{width:16.666%}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;padding:1rem}.results[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawRace" "raceUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.raceUpdates[_ngcontent-%COMP%]{text-align:center}}']}),t})();function sH(t,n){if(1&t){const e=be();g(0,"div",9),F("click",function(){return K(e),x(2).returnToAnimalView()}),g(1,"span"),b(2,"Back"),p()()}}function oH(t,n){if(1&t){const e=be();g(0,"div",10)(1,"div")(2,"app-animal-list",11),F("selectedAnimal",function(r){return K(e),x(2).selectedAnimal(r)}),p()()()}if(2&t){const e=x(2);m(2),C("availableAnimals",e.availableAnimals)}}function lH(t,n){if(1&t){const e=be();g(0,"div",12)(1,"app-training-track-race-view",13),F("raceSelected",function(r){return K(e),x(2).raceSelected(r)})("returnEmitter",function(){return K(e),x(2).returnToAnimalView()}),p()()}if(2&t){const e=x(2);m(1),C("selectedAnimal",e.animal)}}function cH(t,n){if(1&t&&(g(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),b(4,"Training Track"),p(),g(5,"div",5),b(6," Each animal can run their own training track to gain rewards and bonuses you can't get anywhere else. To get each reward, you will have to beat each track at a progressively faster pace. "),p()(),I(7,sH,3,0,"div",6),p(),H(8,"hr"),I(9,oH,3,1,"div",7),I(10,lH,2,1,"div",8),p()),2&t){const e=x();m(7),C("ngIf",e.animalSelected),m(2),C("ngIf",!e.animalSelected),m(1),C("ngIf",e.animalSelected)}}function uH(t,n){if(1&t){const e=be();g(0,"div",14)(1,"app-race",15),F("raceFinished",function(){return K(e),x().raceFinished()}),p()()}if(2&t){const e=x();m(1),C("selectedRace",e.selectedRace)}}const dH=function(t){return{fullHeight:t}};let hM=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.animalSelected=!1,this.raceSelectedEmitter=new je}ngOnInit(){this.availableAnimals=this.globalService.globalVar.animals.filter(i=>i.isAvailable);var e=this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck);null!=e&&(this.existingPrimaryDeckAnimals=[],e.selectedAnimals.forEach(i=>{this.existingPrimaryDeckAnimals.push(i)}))}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(){this.animalSelected=!1}raceSelected(e){this.selectedRace=e,this.showRace=!0,this.raceSelectedEmitter.emit(!0)}ngOnDestroy(){this.raceSelectedEmitter.emit(!1)}raceFinished(){this.showRace=!1,this.raceSelectedEmitter.emit(!1);var e=this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck);null!=e&&(e.selectedAnimals=this.existingPrimaryDeckAnimals)}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-training-track-view"]],outputs:{raceSelectedEmitter:"raceSelectedEmitter"},decls:3,vars:5,consts:[[1,"trainingTrackView",3,"ngClass"],[4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"infoGridContainer"],[1,"info"],[1,"description"],["class","back clickableText",3,"click",4,"ngIf"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"back","clickableText",3,"click"],[1,"selectAnimalView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","raceSelected","returnEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,i){1&e&&(g(0,"div",0),I(1,cH,11,3,"div",1),I(2,uH,2,1,"div",2),p()),2&e&&(C("ngClass",ur(3,dH,i.showRace)),m(1),C("ngIf",!i.showRace),m(1),C("ngIf",i.showRace))},directives:[Ci,Kt,Fh,Y6,dM],styles:['.trainingTrackView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.fullHeight[_ngcontent-%COMP%]{height:100%}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}']}),t})();function hH(t,n){if(1&t){const e=be();g(0,"div",6)(1,"div",7)(2,"span",8),F("click",function(){K(e);const r=x(2);return r.changeDisplayRaceView(r.raceTypeEnum.circuit)}),b(3,"Circuit Races"),p(),g(4,"span",9),F("click",function(){K(e);const r=x(2);return r.changeDisplayRaceView(r.raceTypeEnum.special)}),b(5,"Special Races"),p(),g(6,"span",10),F("click",function(){K(e);const r=x(2);return r.changeDisplayRaceView(r.raceTypeEnum.event)}),b(7,"Event Races"),p(),g(8,"span",11),F("click",function(){K(e);const r=x(2);return r.changeDisplayRaceView(r.raceTypeEnum.trainingTrack)}),b(9,"Training Track"),p()(),H(10,"hr"),p()}if(2&t){const e=x(2);m(2),C("ngClass",e.displayRaceView===e.raceTypeEnum.circuit?"filterActive":""),m(2),C("ngClass",e.displayRaceView===e.raceTypeEnum.special?"filterActive":""),m(2),C("ngClass",e.displayRaceView===e.raceTypeEnum.event?"filterActive":""),m(2),C("ngClass",e.displayRaceView===e.raceTypeEnum.trainingTrack?"filterActive":"")}}function fH(t,n){if(1&t){const e=be();g(0,"app-circuit-view",12),F("raceSelected",function(r){return K(e),x(2).raceSelected(r)}),p()}}function pH(t,n){if(1&t){const e=be();g(0,"app-local-view",12),F("raceSelected",function(r){return K(e),x(2).raceSelected(r)}),p()}}function gH(t,n){if(1&t){const e=be();g(0,"app-event-view",12),F("raceSelected",function(r){return K(e),x(2).raceSelected(r)}),p()}}function mH(t,n){if(1&t){const e=be();g(0,"app-training-track-view",13),F("raceSelectedEmitter",function(r){return K(e),x(2).trainingTrackRaceSelected(r)}),p()}}function vH(t,n){if(1&t&&(g(0,"div",2),I(1,hH,11,4,"div",3),I(2,fH,1,0,"app-circuit-view",4),I(3,pH,1,0,"app-local-view",4),I(4,gH,1,0,"app-event-view",4),I(5,mH,1,0,"app-training-track-view",5),p()),2&t){const e=x();m(1),C("ngIf",!e.trainingTrackRace),m(1),C("ngIf",e.displayRaceView===e.raceTypeEnum.circuit),m(1),C("ngIf",e.displayRaceView===e.raceTypeEnum.special),m(1),C("ngIf",e.displayRaceView===e.raceTypeEnum.event),m(1),C("ngIf",e.displayRaceView===e.raceTypeEnum.trainingTrack)}}function _H(t,n){if(1&t){const e=be();g(0,"div",14)(1,"app-race",15),F("raceFinished",function(){return K(e),x().showRace=!1}),p()()}if(2&t){const e=x();m(1),C("selectedRace",e.selectedRace)}}let bH=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.displayRaceView=tu.circuit,this.showRace=!1,this.trainingTrackRace=!1,this.raceTypeEnum=tu}ngOnInit(){this.componentCommunicationService.setNewView(At.raceselection)}changeDisplayRaceView(e){this.displayRaceView=e}raceSelected(e){this.selectedRace=e,this.showRace=!0}trainingTrackRaceSelected(e){this.trainingTrackRace=e}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-race-selection-view"]],decls:2,vars:2,consts:[["class","raceSelectionDiv",4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"raceSelectionDiv"],["class","info",4,"ngIf"],[3,"raceSelected",4,"ngIf"],[3,"raceSelectedEmitter",4,"ngIf"],[1,"info"],[1,"raceGridContainer"],[1,"circuit","s5Heading","clickableText",3,"ngClass","click"],[1,"local","s5Heading","clickableText",3,"ngClass","click"],[1,"event","s5Heading","clickableText",3,"ngClass","click"],[1,"trainingTrack","s5Heading","clickableText",3,"ngClass","click"],[3,"raceSelected"],[3,"raceSelectedEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,i){1&e&&(I(0,vH,6,5,"div",0),I(1,_H,2,1,"div",1)),2&e&&(C("ngIf",!i.showRace),m(1),C("ngIf",i.showRace))},directives:[Kt,Ci,S6,I6,H6,hM,dM],styles:['.raceGridContainer[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"circuit local event trainingTrack"}.raceSelectionDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.circuit[_ngcontent-%COMP%]{grid-area:circuit;text-align:center}.local[_ngcontent-%COMP%]{grid-area:local;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.trainingTrack[_ngcontent-%COMP%]{grid-area:trainingTrack;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}']}),t})(),yH=(()=>{class t{constructor(e){this.utilityService=e}ngOnInit(){}toggle(){null!=this.callbackFunction&&this.callbackFunction()}getId(){return"cbxInput"+this.id}}return t.\u0275fac=function(e){return new(e||t)(E(Sa))},t.\u0275cmp=Je({type:t,selectors:[["app-toggle"]],inputs:{model:"model",label:"label",id:"id",popoverText:"popoverText",callbackFunction:"callbackFunction"},decls:5,vars:5,consts:[[1,"custom-control","custom-switch"],["triggers","mouseenter:mouseleave",3,"ngbPopover"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange","input"],[1,"custom-control-label",3,"for"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"span",1)(2,"input",2),F("ngModelChange",function(a){return i.model=a})("input",function(){return i.toggle()}),p(),g(3,"label",3),b(4),p()()()),2&e&&(m(1),C("ngbPopover",i.popoverText),m(1),C("id",i.getId())("ngModel",i.model),m(1),C("for",i.getId()),m(1),ht(i.label))},directives:[Ra,Ud,yc,Mc],styles:[""]}),t})();function CH(t,n){if(1&t&&(g(0,"div")(1,"em"),b(2),p()()),2&t){const e=x();m(2),de("",e.pointsNeededInColumn," points needed in this column to unlock")}}let wH=(()=>{class t{constructor(e,i){this.lookupService=e,this.gameLoopService=i,this.spentTalent=new je}ngOnInit(){this.talentTreeType=this.selectedAnimal.talentTree.talentTreeType,this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType),this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.totalPossiblePoints=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.talentTreeType),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0;var e=0;1===this.row&&(e=this.selectedAnimal.talentTree.row2RequiredPoints),2===this.row&&(e=this.selectedAnimal.talentTree.row3RequiredPoints),3===this.row&&(e=this.selectedAnimal.talentTree.row4RequiredPoints),this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0,this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType),this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0})}spendTalentPoint(){this.selectedAnimal.talentTree.spendTalentPoint(this.row,this.column),this.spentTalent.emit(!0),this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(Sn),E(zi))},t.\u0275cmp=Je({type:t,selectors:[["app-talent"]],inputs:{selectedAnimal:"selectedAnimal",row:"row",column:"column"},outputs:{spentTalent:"spentTalent"},decls:13,vars:7,consts:[[1,"talent"],[1,"header","keyword"],[1,"content"],[4,"ngIf"],[1,"description",3,"innerHTML"],[1,"footer"],[3,"disabled","click"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"span"),b(3),p()(),g(4,"div",2),I(5,CH,3,1,"div",3),H(6,"br")(7,"div",4)(8,"br"),g(9,"div",5),b(10),g(11,"button",6),F("click",function(){return i.spendTalentPoint()}),b(12,"Upgrade"),p()()()()),2&e&&(m(3),Nn("Sprint Column ",i.column," Row ",i.row,""),m(2),C("ngIf",i.pointsNeededInColumn>0),m(2),C("innerHTML",i.talentDescription,or),m(3),Nn(" ",i.pointsInTalent," / ",i.totalPossiblePoints," "),m(1),C("disabled",!i.hasTalentPoint||!i.hasEnoughPointsInColumn))},directives:[Kt],styles:[".header[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary)}.content[_ngcontent-%COMP%]{margin:1rem}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),t})();function SH(t,n){if(1&t&&(g(0,"div",14),b(1),H(2,"br")(3,"br"),b(4),p()),2&t){const e=x();C("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)),m(1),de("Equipped: ",e.selectedAnimal.equippedItem.name," "),m(3),de(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)," ")}}function TH(t,n){1&t&&(g(0,"div"),b(1," Equipped: None "),p())}function DH(t,n){if(1&t){const e=be();g(0,"button",8),F("click",function(){return K(e),x().unequipItem()}),b(1,"Unequip Item"),p()}}function MH(t,n){if(1&t){const e=be();g(0,"div",39)(1,"button",8),F("click",function(){K(e);const r=x(),a=Pt(164);return r.openTalentsModal(a)}),b(2,"View Talents"),p()()}}function xH(t,n){if(1&t){const e=be();g(0,"div")(1,"span",41),b(2),p(),g(3,"span")(4,"button",42),F("click",function(){K(e);const r=x(2);return r.editingName=!r.editingName}),b(5,"Edit"),p()()()}if(2&t){const e=x(2);m(2),de("",e.selectedAnimal.name," ")}}function RH(t,n){if(1&t){const e=be();g(0,"div")(1,"span")(2,"input",43),F("ngModelChange",function(r){return K(e),x(2).newName=r}),p()(),g(3,"span")(4,"button",8),F("click",function(){return K(e),x(2).editName()}),b(5,"Save"),p()(),g(6,"span")(7,"button",8),F("click",function(){K(e);const r=x(2);return r.editingName=!r.editingName}),b(8,"Cancel"),p()()()}if(2&t){const e=x(2);m(2),C("ngModel",e.newName)}}function kH(t,n){if(1&t&&(g(0,"span",44),b(1),p()),2&t){const e=x(2);li("ngbPopover",e.traitStatGainDescription),m(1),de(" ",e.selectedAnimal.trait.traitName," ")}}function AH(t,n){if(1&t&&(g(0,"div"),I(1,xH,6,1,"div",6),I(2,RH,9,1,"div",6),g(3,"span",12),I(4,kH,2,2,"span",40),b(5),p()()),2&t){const e=x();m(1),C("ngIf",!e.editingName),m(1),C("ngIf",e.editingName),m(2),C("ngIf",null!=e.selectedAnimal.trait),m(1),de(" ",e.selectedAnimal.getAnimalType()," ")}}function EH(t,n){if(1&t){const e=be();g(0,"div")(1,"span")(2,"button",8),F("click",function(){K(e);const r=x(2);return r.editingName=!r.editingName}),b(3,"Edit Name"),p()()()}}function PH(t,n){if(1&t){const e=be();g(0,"div")(1,"span")(2,"input",45),F("ngModelChange",function(r){return K(e),x(2).newName=r}),p()(),g(3,"span")(4,"button",8),F("click",function(){return K(e),x(2).editName()}),b(5,"Save"),p()(),g(6,"span")(7,"button",8),F("click",function(){K(e);const r=x(2);return r.editingName=!r.editingName}),b(8,"Cancel"),p()()()}if(2&t){const e=x(2);m(2),C("ngModel",e.newName)}}function IH(t,n){if(1&t&&(g(0,"span",44),b(1),p()),2&t){const e=x(2);li("ngbPopover",e.traitStatGainDescription),m(1),de(" ",e.selectedAnimal.trait.traitName," ")}}function NH(t,n){if(1&t&&(g(0,"div"),I(1,EH,4,0,"div",6),I(2,PH,9,1,"div",6),g(3,"span",12),I(4,IH,2,2,"span",40),b(5),p()()),2&t){const e=x();m(1),C("ngIf",!e.editingName),m(1),C("ngIf",e.editingName),m(2),C("ngIf",null!=e.selectedAnimal.trait),m(1),de(" ",e.selectedAnimal.getAnimalType()," ")}}function OH(t,n){if(1&t&&(g(0,"em"),b(1),p()),2&t){const e=x();m(1),de("(",e.selectedAnimal.currentTraining.trainingName,")")}}function FH(t,n){if(1&t&&H(0,"app-toggle",46),2&t){const e=x();C("callbackFunction",e.toggleAutoBreed)("label","Auto Breed")("model",e.autoBreedActive)}}function VH(t,n){if(1&t&&(g(0,"div",14),b(1),H(2,"br")(3,"br"),b(4),p()),2&t){const e=x(2);C("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)),m(1),de("Orb: ",e.selectedAnimal.equippedOrb.name," "),m(3),de(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)," ")}}function BH(t,n){1&t&&(g(0,"div"),b(1," Orb: None "),p())}function LH(t,n){if(1&t){const e=be();g(0,"button",8),F("click",function(){return K(e),x(2).unequipOrb()}),b(1,"Unequip Orb"),p()}}function UH(t,n){if(1&t){const e=be();g(0,"div",47),I(1,VH,5,3,"div",5),I(2,BH,2,0,"div",6),H(3,"br"),I(4,LH,2,0,"button",7),g(5,"button",8),F("click",function(){K(e);const r=x(),a=Pt(162);return r.openOrbModal(a)}),b(6,"Equip New Orb"),p()()}if(2&t){const e=x();m(1),C("ngIf",null!=e.selectedAnimal.equippedOrb),m(1),C("ngIf",null==e.selectedAnimal.equippedOrb),m(2),C("ngIf",null!=e.selectedAnimal.equippedOrb)}}function HH(t,n){if(1&t&&(g(0,"div")(1,"span"),b(2),Ut(3,"number"),p(),H(4,"br"),p()),2&t){const e=x();m(2),de(" Bonus Breed XP From Training: ",nn(3,1,e.selectedAnimal.miscStats.bonusBreedXpGainFromTraining,"1.0-0")," ")}}function GH(t,n){if(1&t&&(g(0,"div")(1,"span"),b(2),Ut(3,"number"),p()()),2&t){const e=x();m(2),de(" Bonus Breed XP From Local Races: ",nn(3,1,e.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces,"1.0-0")," ")}}function jH(t,n){if(1&t&&(g(0,"div")(1,"span"),b(2),Ut(3,"number"),p()()),2&t){const e=x();m(2),de(" Bonus Breed XP From Circuit Races: ",nn(3,1,e.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces,"1.0-0")," ")}}function zH(t,n){if(1&t&&(g(0,"div")(1,"span"),b(2),Ut(3,"number"),p()()),2&t){const e=x();m(2),de(" Training Time Reduction: ",nn(3,1,e.selectedAnimal.miscStats.trainingTimeReduction,"1.0-0"),"% ")}}function $H(t,n){if(1&t&&(g(0,"div")(1,"span"),b(2),Ut(3,"number"),p()()),2&t){const e=x();m(2),de(" Bonus Diminishing Returns per Facility Level: ",nn(3,1,e.selectedAnimal.miscStats.diminishingReturnsBonus,"1.0-0")," ")}}function WH(t,n){if(1&t&&(g(0,"div")(1,"span"),b(2),Ut(3,"number"),p()()),2&t){const e=x();m(2),de(" Bonus Talents: ",nn(3,1,e.selectedAnimal.miscStats.bonusTalents,"1.0-0")," ")}}function qH(t,n){if(1&t){const e=be();g(0,"span",48),F("click",function(){K(e);const r=x();return r.selectAbility(r.ability2)}),b(1),p()}if(2&t){const e=x();it("filterActive",e.selectedAnimal.ability.name===e.ability2.name),m(1),de("",e.ability2.name," ")}}function YH(t,n){if(1&t){const e=be();g(0,"span",49),F("click",function(){K(e);const r=x();return r.selectAbility(r.ability3)}),b(1),p()}if(2&t){const e=x();it("filterActive",e.selectedAnimal.ability.name===e.ability3.name),m(1),de("",e.ability3.name," ")}}function XH(t,n){if(1&t&&(g(0,"span"),b(1),p()),2&t){const e=x();m(1),Nn("",e.selectedAbility.abilityXp," / ",e.selectedAbility.abilityMaxXp," XP")}}function QH(t,n){1&t&&(g(0,"span"),b(1,"MAX"),p())}function ZH(t,n){if(1&t&&(g(0,"div",50),b(1),p()),2&t){const e=x();m(1),de(" ",e.getTopSpeedPopover()," ")}}function KH(t,n){if(1&t&&(g(0,"div",50),b(1),p()),2&t){const e=x();m(1),de(" ",e.getAccelerationPopover()," ")}}function JH(t,n){if(1&t&&(g(0,"div",50),b(1),p()),2&t){const e=x();m(1),de(" ",e.getEndurancePopover()," ")}}function e7(t,n){if(1&t&&(g(0,"div",50),b(1),p()),2&t){const e=x();m(1),de(" ",e.getPowerPopover()," ")}}function t7(t,n){if(1&t&&(g(0,"div",50),b(1),p()),2&t){const e=x();m(1),de(" ",e.getFocusPopover()," ")}}function n7(t,n){if(1&t&&(g(0,"div",50),b(1),p()),2&t){const e=x();m(1),de(" ",e.getAdaptabilityPopover()," ")}}function i7(t,n){if(1&t&&(g(0,"div",50),b(1),p()),2&t){const e=x();m(1),de(" ",e.getAbilityLevelPopover()," ")}}function r7(t,n){if(1&t){const e=be();g(0,"td",60)(1,"div",8),F("click",function(){const a=K(e).$implicit;return x(4).selectItem(a)}),b(2),H(3,"br"),b(4),p()()}if(2&t){const e=n.$implicit,i=x(4);m(2),Nn(" ",e.name," (",e.amount,") "),m(2),de(" ",i.getItemShortDescription(e.name)," ")}}function a7(t,n){if(1&t&&(g(0,"tr"),I(1,r7,5,3,"td",59),p()),2&t){const e=n.$implicit;m(1),C("ngForOf",e)}}function s7(t,n){if(1&t){const e=be();g(0,"div",61)(1,"span",62)(2,"span"),b(3),p(),g(4,"span",63)(5,"label",64),b(6,"Amount: "),p(),g(7,"input",65),F("ngModelChange",function(r){return K(e),x(3).selectedItemQuantity=r}),p(),g(8,"button",66),F("click",function(){return K(e),x(3).useItem()}),b(9,"Use"),p()()()()}if(2&t){const e=x(3);m(3),Nn("",e.selectedItem.name," - ",e.getItemShortDescription(e.selectedItem.name)," "),m(4),C("ngModel",e.selectedItemQuantity)}}function o7(t,n){if(1&t&&(g(0,"div")(1,"div",55)(2,"div",56)(3,"table"),I(4,a7,2,1,"tr",57),p()()(),I(5,s7,10,3,"div",58),p()),2&t){const e=x(2);m(4),C("ngForOf",e.itemsRows),m(1),C("ngIf",null!=e.selectedItem)}}function l7(t,n){1&t&&(g(0,"div"),b(1," No items available. "),p())}function c7(t,n){if(1&t){const e=be();g(0,"div",51)(1,"form")(2,"div",52)(3,"h4",53),b(4,"Use Item"),p(),g(5,"button",54),F("click",function(){return K(e).$implicit.dismiss()}),b(6,"X"),p()(),I(7,o7,6,2,"div",6),I(8,l7,2,0,"div",6),p()()}if(2&t){const e=x();m(7),C("ngIf",e.usableItemsList.length>0),m(1),C("ngIf",0==e.usableItemsList.length)}}function u7(t,n){if(1&t){const e=be();g(0,"td",60)(1,"div",8),F("click",function(){const a=K(e).$implicit;return x(3).selectEquipment(a)}),b(2),H(3,"br"),b(4),p()()}if(2&t){const e=n.$implicit,i=x(3);m(2),Nn(" ",e.name," (",e.amount,") "),m(2),de(" ",i.getEquipmentShortDescription(e.name)," ")}}function d7(t,n){if(1&t&&(g(0,"tr"),I(1,u7,5,3,"td",59),p()),2&t){const e=n.$implicit;m(1),C("ngForOf",e)}}function h7(t,n){if(1&t){const e=be();g(0,"div",61)(1,"span",68)(2,"span"),b(3),p(),g(4,"span",63)(5,"button",66),F("click",function(){return K(e),x(2).equipItem()}),b(6,"Equip"),p()()()()}if(2&t){const e=x(2);m(3),Nn("",e.selectedEquipment.name," - ",e.getEquipmentShortDescription(e.selectedEquipment.name)," ")}}function f7(t,n){1&t&&(g(0,"div"),b(1," No equipment available. "),p())}function p7(t,n){if(1&t){const e=be();g(0,"div",51)(1,"form")(2,"div",52)(3,"h4",53),b(4,"Change Equipment"),p(),g(5,"button",54),F("click",function(){return K(e).$implicit.dismiss()}),b(6,"X"),p()(),g(7,"div")(8,"div",55)(9,"div",67)(10,"table"),I(11,d7,2,1,"tr",57),p()()(),I(12,h7,7,2,"div",58),p(),I(13,f7,2,0,"div",6),p()()}if(2&t){const e=x();m(11),C("ngForOf",e.equipmentRows),m(1),C("ngIf",null!=e.selectedEquipment),m(1),C("ngIf",0==e.equipmentList.length)}}function g7(t,n){if(1&t){const e=be();g(0,"td",60)(1,"div",8),F("click",function(){const a=K(e).$implicit;return x(3).selectOrb(a)}),b(2),H(3,"br"),b(4),p()()}if(2&t){const e=n.$implicit,i=x(3);m(2),Nn(" ",e.name," (",e.amount,") "),m(2),de(" ",i.getEquipmentShortDescription(e.name)," ")}}function m7(t,n){if(1&t&&(g(0,"tr"),I(1,g7,5,3,"td",59),p()),2&t){const e=n.$implicit;m(1),C("ngForOf",e)}}function v7(t,n){if(1&t){const e=be();g(0,"div",61)(1,"span",70)(2,"span"),b(3),p(),g(4,"span",63)(5,"button",66),F("click",function(){return K(e),x(2).equipOrb()}),b(6,"Equip"),p()()()()}if(2&t){const e=x(2);m(3),Nn("",e.selectedOrb.name," - ",e.getEquipmentShortDescription(e.selectedOrb.name)," ")}}function _7(t,n){1&t&&(g(0,"div"),b(1," No equipment available. "),p())}function b7(t,n){if(1&t){const e=be();g(0,"div",51)(1,"form")(2,"div",52)(3,"h4",53),b(4,"Change Orb"),p(),g(5,"button",54),F("click",function(){return K(e).$implicit.dismiss()}),b(6,"X"),p()(),g(7,"div")(8,"div",55)(9,"div",69)(10,"table"),I(11,m7,2,1,"tr",57),p()()(),I(12,v7,7,2,"div",58),p(),I(13,_7,2,0,"div",6),p()()}if(2&t){const e=x();m(11),C("ngForOf",e.orbRows),m(1),C("ngIf",null!=e.selectedOrb),m(1),C("ngIf",0==e.equipmentList.length)}}const y7=function(t){return{selectedTalentTree:t}};function C7(t,n){if(1&t){const e=be();g(0,"span",75),F("click",function(){const a=K(e).$implicit;return x(4).filterTalentTree(a)}),b(1),p()}if(2&t){const e=n.$implicit,i=x(4);C("ngClass",ur(2,y7,i.selectedTalentTree===e)),m(1),de(" ",e.trim()," ")}}function w7(t,n){if(1&t&&(g(0,"div")(1,"strong"),b(2),p()()),2&t){const e=x(4);m(2),de(" ",e.inDepthTalentTreeDescription," ")}}function S7(t,n){if(1&t&&(g(0,"div")(1,"div",73),I(2,C7,2,4,"span",74),p(),H(3,"hr"),I(4,w7,3,1,"div",6),p()),2&t){const e=x(3);m(2),C("ngForOf",e.talentTreeOptions),m(2),C("ngIf",""!==e.inDepthTalentTreeDescription&&void 0!==e.inDepthTalentTreeDescription)}}function T7(t,n){if(1&t){const e=be();g(0,"div")(1,"div",55),I(2,S7,5,2,"div",6),p(),g(3,"div",61)(4,"button",72),F("click",function(){return K(e),x(2).selectTalentTree()}),b(5,"Select"),p()()()}if(2&t){const e=x(2);m(2),C("ngIf",e.talentTreeOptions.length>0)}}function D7(t,n){1&t&&H(0,"div",85),2&t&&C("ngClass",x(5).borderColorConditional)}function M7(t,n){if(1&t){const e=be();g(0,"div",81)(1,"div",82)(2,"app-talent",83),F("spentTalent",function(r){return K(e),x(4).spentTalent(r)}),p()(),I(3,D7,1,1,"div",84),p()}if(2&t){const e=n.index,i=x().index,r=x(3);m(2),C("row",i)("column",e)("selectedAnimal",r.selectedAnimal),m(1),C("ngIf",i!==r.talentRows-1)}}const fM=function(){return[]};function x7(t,n){if(1&t&&(g(0,"div",78)(1,"div",79),I(2,M7,4,4,"div",80),p()()),2&t){const e=x(3);m(2),C("ngForOf",mg(1,fM).constructor(e.talentColumns))}}function R7(t,n){if(1&t&&(g(0,"div",55)(1,"div",76),b(2),p(),H(3,"br"),I(4,x7,3,2,"div",77),p()),2&t){const e=x(2);m(2),de("Available Talent Points: ",e.availableTalentPoints,""),m(2),C("ngForOf",mg(2,fM).constructor(e.talentRows))}}function k7(t,n){1&t&&(g(0,"div"),b(1," Coming Soon! "),p())}function A7(t,n){if(1&t){const e=be();g(0,"div",51)(1,"form")(2,"div",52)(3,"h4",53),b(4,"Talents"),p(),g(5,"button",54),F("click",function(){return K(e).$implicit.dismiss()}),b(6,"X"),p()(),I(7,T7,6,1,"div",6),I(8,R7,5,3,"div",71),I(9,k7,2,0,"div",6),p()()}if(2&t){const e=x();m(7),C("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType===e.talentTreeTypeEnum.none),m(1),C("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none),m(1),C("ngIf",!e.talentsReleased)}}let E7=(()=>{class t{constructor(e,i,r,a){this.lookupService=e,this.modalService=i,this.globalService=r,this.componentCommunicationService=a,this.returnEmitter=new je,this.canAutoBreed=!1,this.areTalentsAvailable=!1,this.orbIsUnlocked=!1,this.talentTreeTypeEnum=ji,this.talentsReleased=!0,this.talentColumns=3,this.talentRows=4,this.toggleAutoBreed=()=>{this.autoBreedActive=!this.autoBreedActive,this.selectedAnimal.autoBreedActive=this.autoBreedActive}}keyEvent(e){var i=this.globalService.globalVar.animals.filter(o=>o.isAvailable),r=i.findIndex(o=>this.selectedAnimal===o);if(r>-1)if("ArrowLeft"===e.key)(a=r-1)<0&&(a=i.length-1),this.componentCommunicationService.setAnimalView(At.animals,s=i[a]),this.resetSelectedAnimalInfo(s);else if("ArrowRight"===e.key){var a,s;(a=r+1)===i.length&&(a=0),this.componentCommunicationService.setAnimalView(At.animals,s=i[a]),this.resetSelectedAnimalInfo(s)}}ngOnInit(){this.handleIntroTutorial(),this.resetSelectedAnimalInfo(this.selectedAnimal),this.breedDescriptionPopover="When your Breed XP reaches the max, you can Breed your animal. This will reset your base stats, but it will also increase the amount that your base stats contribute to your racing stats."}returnToAnimalView(){this.returnEmitter.emit(!1)}isAbilityLevelMaxedOut(){var e=25,i=this.globalService.globalVar.modifiers.find(r=>"abilityLevelCapModifier"===r.text);return null!=i&&(e=i.value),null!=this.selectedAbility&&this.selectedAbility.abilityLevel>this.selectedAnimal.breedLevel+e}breed(){this.globalService.BreedAnimal(this.selectedAnimal),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel),this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut()}editName(){this.newName.length<=50&&this.newName.length>=1?(this.selectedAnimal.name=this.newName,this.editingName=!1):alert("Name must be between 1 and 50 characters long.")}selectAbility(e){this.selectedAnimal.ability=e,this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal)}updateItemsList(){this.usableItemsList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===se.Food&&e.amount>0).forEach(e=>{void 0!==e&&this.usableItemsList.push(e)}),this.setupDisplayItems()}updateEquipmentList(){this.equipmentList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===se.Equipment&&!this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var i=e.makeCopy(e);this.equipmentList.push(i)}}),this.setupDisplayEquipment()}updateOrbList(){this.orbList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===se.Equipment&&this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var i=e.makeCopy(e);this.orbList.push(i)}}),this.setupDisplayEquipment()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];for(var i=1;i<=this.usableItemsList.length;i++)this.itemsCells.push(this.usableItemsList[i-1]),i%4==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}setupDisplayEquipment(){this.equipmentCells=[],this.equipmentRows=[];for(var i=1;i<=this.equipmentList.length;i++)this.equipmentCells.push(this.equipmentList[i-1]),i%4==0&&(this.equipmentRows.push(this.equipmentCells),this.equipmentCells=[]);0!==this.equipmentCells.length&&this.equipmentRows.push(this.equipmentCells)}setupDisplayOrbs(){this.orbCells=[],this.orbRows=[];for(var i=1;i<=this.orbList.length;i++)this.orbCells.push(this.orbList[i-1]),i%4==0&&(this.orbRows.push(this.orbCells),this.orbCells=[]);0!==this.orbCells.length&&this.orbRows.push(this.orbCells)}openTalentsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openItemModal(e){this.setupDisplayItems(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}openEquipmentModal(e){this.setupDisplayEquipment(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}openOrbModal(e){this.setupDisplayOrbs(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}useItem(){var e=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name&&r.itemType===this.selectedItem.itemType);if(void 0!==e)if(e.amount<this.selectedItemQuantity)alert("You don't have that many "+e.name+"!");else{if(e.amount-=this.selectedItemQuantity,this.selectedItem.itemType===se.Food)if("Mangoes"===this.selectedItem.name)this.selectedAnimal.breedLevel+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal);else{var i=new Fe(0,0,0,0,0,0);"Apples"===this.selectedItem.name&&(i.acceleration=this.selectedItemQuantity),"Bananas"===this.selectedItem.name&&(i.topSpeed=this.selectedItemQuantity),"Strawberries"===this.selectedItem.name&&(i.endurance=this.selectedItemQuantity),"Carrots"===this.selectedItem.name&&(i.power=this.selectedItemQuantity),"Turnips"===this.selectedItem.name&&(i.focus=this.selectedItemQuantity),"Oranges"===this.selectedItem.name&&(i.adaptability=this.selectedItemQuantity),this.selectedAnimal.increaseStats(i),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}this.updateItemsList()}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}selectItem(e){this.selectedItem=e}equipItem(){this.selectedAnimal.equippedItem=this.selectedEquipment,this.updateEquipmentList(),this.modalService.dismissAll()}selectEquipment(e){this.selectedEquipment=e}unequipItem(){this.selectedAnimal.equippedItem=null}equipOrb(){this.selectedAnimal.equippedOrb=this.selectedOrb,this.updateOrbList(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal),this.modalService.dismissAll()}selectOrb(e){this.selectedOrb=e}unequipOrb(){this.selectedAnimal.equippedOrb=null,this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}getTopSpeedPopover(){return this.lookupService.topSpeedPopover(this.selectedAnimal)}getAccelerationPopover(){return this.lookupService.accelerationPopover(this.selectedAnimal)}getEndurancePopover(){return this.lookupService.endurancePopover(this.selectedAnimal)}getPowerPopover(){return this.lookupService.powerPopover(this.selectedAnimal)}getFocusPopover(){return this.lookupService.focusPopover(this.selectedAnimal)}getAdaptabilityPopover(){return this.lookupService.adaptabilityPopover(this.selectedAnimal)}getAbilityLevelPopover(){return this.lookupService.abilityLevelPopover(this.selectedAnimal)}getAbilityPopover(){return this.lookupService.abilityPopover()}getDiminishingReturnsPopover(){return"Once a trainable stat is over this number, additional gains in this stat will be reduced. Increase with Facility Level."}getEquipmentShortDescription(e){return this.globalService.getEquipmentDescription(e)}getItemShortDescription(e){return this.globalService.getItemDescription(e)}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&8===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}goToAssignedBarn(){var e=this.globalService.globalVar.barns.find(i=>i.barnNumber===this.selectedAnimal.associatedBarnNumber);null!=e&&this.componentCommunicationService.setBarnView(At.barn,e.barnNumber)}filterTalentTree(e){this.selectedTalentTree=e,this.inDepthTalentTreeDescription=this.lookupService.getInDepthTalentTreeDescription(e)}selectTalentTree(){""!==this.selectedTalentTree&&null!=this.selectedTalentTree?this.selectedAnimal.talentTree.talentTreeType=this.lookupService.convertTalentTreeNameToEnum(this.selectedTalentTree):alert("You must select a talent tree.")}resetSelectedAnimalInfo(e){this.selectedAnimal=e,this.areTalentsAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.orbIsUnlocked=this.lookupService.isItemUnlocked("orbs"),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel);var i=this.lookupService.getStockbreeder();null!=i&&i>0&&(this.canAutoBreed=!0),this.canAutoBreed&&(this.autoBreedActive=this.selectedAnimal.autoBreedActive),this.ability1=this.selectedAnimal.availableAbilities[0],this.selectedAnimal.availableAbilities.length>1&&(this.ability2=this.selectedAnimal.availableAbilities[1]),this.selectedAnimal.availableAbilities.length>2&&(this.ability3=this.selectedAnimal.availableAbilities[2]),this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal),null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.borderColorConditional={completedFlatlandTalentSpacer:"Flatland"===this.selectedAnimal.getRaceCourseType(),completedMountainTalentSpacer:"Mountain"===this.selectedAnimal.getRaceCourseType(),completedOceanTalentSpacer:"Ocean"===this.selectedAnimal.getRaceCourseType(),completedTundraTalentSpacer:"Tundra"===this.selectedAnimal.getRaceCourseType(),completedVolcanicTalentSpacer:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.updateItemsList(),this.updateEquipmentList(),this.globalService.globalVar.animals.filter(a=>null!=a.equippedItem).forEach(a=>{var s=this.equipmentList.find(o=>{var l;return o.name===(null===(l=a.equippedItem)||void 0===l?void 0:l.name)});null!=s&&(s.amount>0&&(s.amount-=1),s.amount<=0&&(this.equipmentList=this.equipmentList.filter(o=>o.name!==(null==s?void 0:s.name))))}),this.componentCommunicationService.setAnimalView(At.animals,new Lt);var r=this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedAnimal.associatedBarnNumber);this.assignedBarnName=null==r?"Unassigned":"Assigned to: "+this.lookupService.getBarnName(r),this.areTalentsAvailable&&(this.talentTreeOptions=this.lookupService.getTalentTreeNames(),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal))}spentTalent(e){this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)}}return t.\u0275fac=function(e){return new(e||t)(E(Sn),E(vs),E(bt),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-selected-animal"]],hostBindings:function(e,i){1&e&&F("keyup",function(a){return i.keyEvent(a)},!1,ks)},inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:165,vars:112,consts:[[1,"selectedAnimalView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"equippable"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","talents",4,"ngIf"],[1,"animalInfo"],[3,"ngClass"],[1,"keyword"],[1,"clickableText",3,"click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"callbackFunction","label","model",4,"ngIf"],[1,"back"],["class","orb",4,"ngIf"],[1,"gridContainer"],[1,"trainableStats"],[1,"s4Heading"],[1,"racingStats"],[1,"miscStats"],[1,"abilities"],[1,"ability1","clickableText",3,"click"],["class","ability2 clickableText",3,"filterActive","click",4,"ngIf"],["class","ability3 clickableText",3,"filterActive","click",4,"ngIf"],[3,"innerHTML"],["topSpeedPopoverContent",""],["accelerationPopoverContent",""],["endurancePopoverContent",""],["powerPopoverContent",""],["focusPopoverContent",""],["adaptabilityPopoverContent",""],["abilityLevelPopoverContent",""],["content",""],["equipment",""],["orb",""],["talentsContent",""],[1,"talents"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"name","keyword"],[1,"editName",3,"click"],["id","newName","name","newName","maxlength","50",3,"ngModel","ngModelChange"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],["id","newName","name","newName","minlength","1","maxlength","50",3,"ngModel","ngModelChange"],[3,"callbackFunction","label","model"],[1,"orb"],[1,"ability2","clickableText",3,"click"],[1,"ability3","clickableText",3,"click"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"modal-footer"],[1,"selectedItemSpan"],[1,"rightAlign"],["for","deck-name"],["id","deck-name","type","text",1,"spaced",3,"ngModel","ngModelChange"],["type","button",1,"spaced",3,"click"],[1,"equipmentContainer"],[1,"selectedEquipmentSpan"],[1,"orbContainer"],[1,"selectedOrbSpan"],["class","modal-body",4,"ngIf"],["type","button",3,"click"],[1,"typeContainer"],["class","talents subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"talents","subHeading",3,"ngClass","click"],[1,"talentInfo"],["class","talentRow",4,"ngFor","ngForOf"],[1,"talentRow"],[1,"rowFlex"],["class","talentColumn",4,"ngFor","ngForOf"],[1,"talentColumn"],[1,"talentContent"],[3,"row","column","selectedAnimal","spentTalent"],["class","talentSpacer",3,"ngClass",4,"ngIf"],[1,"talentSpacer",3,"ngClass"]],template:function(e,i){if(1&e){const r=be();g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),I(6,SH,5,3,"div",5),I(7,TH,2,0,"div",6),H(8,"br"),I(9,DH,2,0,"button",7),g(10,"button",8),F("click",function(){K(r);const s=Pt(160);return i.openEquipmentModal(s)}),b(11,"Equip New Item"),p()(),H(12,"br"),I(13,MH,3,0,"div",9),p(),g(14,"div",10)(15,"div",11),I(16,AH,6,4,"div",6),I(17,NH,6,4,"div",6),g(18,"span",12),b(19),p(),H(20,"br"),p(),g(21,"span",13),F("click",function(){return i.goToAssignedBarn()}),b(22),I(23,OH,2,1,"em",6),p(),H(24,"br"),g(25,"span",14),b(26),p(),H(27,"br"),g(28,"span",14),b(29),Ut(30,"number"),g(31,"button",8),F("click",function(){return i.breed()}),b(32,"Breed"),p()(),H(33,"br"),g(34,"button",8),F("click",function(){K(r);const s=Pt(158);return i.openItemModal(s)}),b(35,"Use Item"),p(),H(36,"br"),I(37,FH,1,3,"app-toggle",15),p(),g(38,"div",16)(39,"span",13),F("click",function(){return i.returnToAnimalView()}),b(40,"Back"),p(),H(41,"br"),I(42,UH,7,3,"div",17),p()(),H(43,"hr"),g(44,"div",18)(45,"div",19)(46,"span",20),b(47,"Base Stats"),p(),H(48,"br")(49,"br"),g(50,"span",14),b(51),Ut(52,"number"),p(),H(53,"br"),g(54,"span",14),b(55),Ut(56,"number"),p(),H(57,"br"),g(58,"span",14),b(59),Ut(60,"number"),p(),H(61,"br"),g(62,"span",14),b(63),Ut(64,"number"),p(),H(65,"br"),g(66,"span",14),b(67),Ut(68,"number"),p(),H(69,"br"),g(70,"span",14),b(71),Ut(72,"number"),p(),H(73,"br"),g(74,"span",14),b(75),Ut(76,"number"),p()(),g(77,"div",21)(78,"span",20),b(79,"Racing Stats"),p(),H(80,"br")(81,"br"),g(82,"span",14),b(83),Ut(84,"number"),p(),H(85,"br"),g(86,"span",14),b(87),Ut(88,"number"),p(),H(89,"br"),g(90,"span",14),b(91),Ut(92,"number"),p(),H(93,"br"),g(94,"span",14),b(95),Ut(96,"number"),p(),H(97,"br"),g(98,"span",14),b(99),Ut(100,"number"),p(),H(101,"br"),g(102,"span",14),b(103),Ut(104,"number"),p(),H(105,"br"),g(106,"span",14),b(107),Ut(108,"number"),p(),H(109,"br"),g(110,"span",14),b(111),Ut(112,"number"),p()(),g(113,"div",22)(114,"span",20),b(115,"Miscellaneous Stats"),p(),H(116,"br")(117,"br"),I(118,HH,5,4,"div",6),I(119,GH,4,4,"div",6),I(120,jH,4,4,"div",6),I(121,zH,4,4,"div",6),I(122,$H,4,4,"div",6),I(123,WH,4,4,"div",6),p()(),H(124,"br"),g(125,"div",23)(126,"p",20)(127,"span",14),b(128,"Abilities"),p()(),g(129,"div")(130,"span",24),F("click",function(){return i.selectAbility(i.ability1)}),b(131),p(),I(132,qH,2,3,"span",25),I(133,YH,2,3,"span",26),H(134,"br")(135,"br"),g(136,"p")(137,"span",14),b(138),I(139,XH,2,2,"span",6),I(140,QH,2,0,"span",6),p(),H(141,"br")(142,"span",27),p()()()()()(),I(143,ZH,2,1,"ng-template",null,28,Ot),I(145,KH,2,1,"ng-template",null,29,Ot),I(147,JH,2,1,"ng-template",null,30,Ot),I(149,e7,2,1,"ng-template",null,31,Ot),I(151,t7,2,1,"ng-template",null,32,Ot),I(153,n7,2,1,"ng-template",null,33,Ot),I(155,i7,2,1,"ng-template",null,34,Ot),I(157,c7,9,2,"ng-template",null,35,Ot),I(159,p7,14,3,"ng-template",null,36,Ot),I(161,b7,14,3,"ng-template",null,37,Ot),I(163,A7,10,3,"ng-template",null,38,Ot)}if(2&e){const r=Pt(144),a=Pt(146),s=Pt(148),o=Pt(150),l=Pt(152),c=Pt(154),u=Pt(156);m(6),C("ngIf",null!=i.selectedAnimal.equippedItem),m(1),C("ngIf",null==i.selectedAnimal.equippedItem),m(2),C("ngIf",null!=i.selectedAnimal.equippedItem),m(4),C("ngIf",i.areTalentsAvailable),m(2),C("ngClass",i.colorConditional),m(1),C("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),m(1),C("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),m(2),ht(i.selectedAnimal.getRaceCourseType()),m(3),de("",i.assignedBarnName," "),m(1),C("ngIf",null!=i.selectedAnimal.currentTraining),m(2),li("ngbPopover",i.breedLevelPopover),m(1),de("Breed Level ",i.selectedAnimal.breedLevel,""),m(2),C("ngbPopover",i.breedDescriptionPopover),m(1),Nn("Breed XP: ",nn(30,64,i.selectedAnimal.breedGaugeXp,"1.2-2"),"/",i.selectedAnimal.breedGaugeMax," "),m(8),C("ngIf",i.canAutoBreed),m(5),C("ngIf",i.orbIsUnlocked),m(8),C("ngbPopover",r),m(1),de(" Speed: ",nn(52,67,i.selectedAnimal.currentStats.topSpeed,"1.2-2")," "),m(3),C("ngbPopover",a),m(1),de(" Acceleration: ",nn(56,70,i.selectedAnimal.currentStats.acceleration,"1.2-2")," "),m(3),C("ngbPopover",s),m(1),de(" Endurance: ",nn(60,73,i.selectedAnimal.currentStats.endurance,"1.2-2")," "),m(3),C("ngbPopover",o),m(1),de(" Power: ",nn(64,76,i.selectedAnimal.currentStats.power,"1.2-2")," "),m(3),C("ngbPopover",l),m(1),de(" Focus: ",nn(68,79,i.selectedAnimal.currentStats.focus,"1.2-2")," "),m(3),C("ngbPopover",c),m(1),de(" Adaptability: ",nn(72,82,i.selectedAnimal.currentStats.adaptability,"1.2-2")," "),m(3),li("ngbPopover",i.getDiminishingReturnsPopover()),m(1),de(" Diminishing Returns: ",nn(76,85,i.diminishingReturnsAmount,"1.0-0")," "),m(7),li("ngbPopover",i.selectedAnimal.currentStats.maxSpeedMsPopover()),m(1),de(" Max Speed: ",nn(84,88,i.selectedAnimal.currentStats.maxSpeedMs,"1.2-2")," m/s "),m(3),li("ngbPopover",i.selectedAnimal.currentStats.accelerationMsPopover()),m(1),de(" Acceleration Rate: ",nn(88,91,i.selectedAnimal.currentStats.accelerationMs,"1.2-2")," m/s "),m(3),li("ngbPopover",i.selectedAnimal.currentStats.staminaPopover()),m(1),de(" Stamina: ",nn(92,94,i.selectedAnimal.currentStats.stamina,"1.2-2")," "),m(3),li("ngbPopover",i.selectedAnimal.currentStats.powerMsPopover()),m(1),de(" Power Efficiency: ",nn(96,97,i.selectedAnimal.currentStats.powerMs,"1.2-2"),"% "),m(3),li("ngbPopover",i.selectedAnimal.currentStats.focusMsPopover()),m(1),de(" Focus Distance: ~",nn(100,100,i.selectedAnimal.currentStats.focusMs,"1.2-2")," m "),m(3),li("ngbPopover",i.selectedAnimal.currentStats.adaptabilityMsPopover()),m(1),de(" Adaptability Distance: ~",nn(104,103,i.selectedAnimal.currentStats.adaptabilityMs,"1.2-2")," m "),m(3),li("ngbPopover",i.selectedAnimal.currentStats.burstChancePopover()),m(1),de(" Burst Chance: ",nn(108,106,i.selectedAnimal.currentStats.burstChance,"1.2-2"),"% "),m(3),li("ngbPopover",i.selectedAnimal.currentStats.burstDistancePopover()),m(1),de(" Burst Distance: ",nn(112,109,i.selectedAnimal.currentStats.burstDistance,"1.2-2")," m "),m(7),C("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromTraining>0),m(1),C("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces>0),m(1),C("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces>0),m(1),C("ngIf",i.selectedAnimal.miscStats.trainingTimeReduction>0),m(1),C("ngIf",i.selectedAnimal.miscStats.diminishingReturnsBonus>0),m(1),C("ngIf",i.selectedAnimal.miscStats.bonusTalents>0),m(4),C("ngbPopover",i.getAbilityPopover()),m(3),it("filterActive",i.selectedAnimal.ability.name===i.ability1.name),m(1),de("",i.ability1.name," "),m(1),C("ngIf",i.ability2.isAbilityPurchased),m(1),C("ngIf",i.ability3.isAbilityPurchased),m(4),C("ngbPopover",u),m(1),de("Level ",i.selectedAbility.abilityLevel," "),m(1),C("ngIf",!i.abilityLevelMaxedOut),m(1),C("ngIf",i.abilityLevelMaxedOut),m(2),C("innerHTML",i.longDescription,or)}},directives:[Kt,Ra,Ci,Zo,eh,yc,Mc,N0,yH,Kd,jd,Dc,di,wH],pipes:[ss],styles:['.selectedAnimalView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.animalInfo[_ngcontent-%COMP%]{text-align:center;grid-area:animalInfo}.back[_ngcontent-%COMP%]{text-align:center;grid-area:back;justify-content:space-between;flex-direction:column;display:flex}.talents[_ngcontent-%COMP%]{display:flex}.equippable[_ngcontent-%COMP%]{justify-content:space-between;flex-direction:column;display:flex;grid-area:equippable}.marginGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"equippable animalInfo back"}.gridContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-items:center;justify-content:stretch;grid-template-areas:"trainingStats racingStats miscStats"}.trainableStats[_ngcontent-%COMP%]{justify-self:left;grid-area:trainingStats}.racingStats[_ngcontent-%COMP%]{grid-area:racingStats}.miscStats[_ngcontent-%COMP%]{grid-area:miscStats}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.editName[_ngcontent-%COMP%]{width:4rem}.name[_ngcontent-%COMP%]{margin-left:4rem}.selectedEquipmentSpan[_ngcontent-%COMP%], .selectedOrbSpan[_ngcontent-%COMP%], .selectedItemSpan[_ngcontent-%COMP%]{width:100%}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.rightAlign[_ngcontent-%COMP%]{float:right}.ability1[_ngcontent-%COMP%], .ability2[_ngcontent-%COMP%], .ability3[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.typeContainer[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-evenly}.talentTreeType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedTalentTree[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid;text-decoration:underline solid}.rowFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.talentColumn[_ngcontent-%COMP%]{width:30%}.talentContent[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1)}.talentInfo[_ngcontent-%COMP%]{text-align:center}.talentSpacer[_ngcontent-%COMP%]{width:50%;height:5rem;border-right:solid thick rgba(0,0,0,.1)}.completedFlatlandTalentSpacer[_ngcontent-%COMP%]{border-right-color:var(--flatlandColor)!important}.completedMountainTalentSpacer[_ngcontent-%COMP%]{border-right-color:var(--mountainColor)!important}.completedOceanTalentSpacer[_ngcontent-%COMP%]{border-right-color:var(--waterColor)!important}.completedTundraTalentSpacer[_ngcontent-%COMP%]{border-right-color:var(--tundraColor)!important}.completedVolcanicTalentSpacer[_ngcontent-%COMP%]{border-right-color:var(--volcanicColor)!important}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}']}),t})();function P7(t,n){1&t&&(g(0,"div",4)(1,"h2"),b(2,"Animals"),p(),g(3,"div",5),b(4," Select an animal to view its stats, change abilities, and more. "),p(),H(5,"hr"),p())}function I7(t,n){if(1&t){const e=be();g(0,"div",6)(1,"app-animal-list",7),F("selectedAnimal",function(r){return K(e),x().selectedAnimal(r)}),p()()}if(2&t){const e=x();m(1),C("availableAnimals",e.availableAnimals)}}function N7(t,n){if(1&t){const e=be();g(0,"div",8)(1,"app-selected-animal",9),F("returnEmitter",function(r){return K(e),x().returnToAnimalView(r)}),p()()}if(2&t){const e=x();m(1),C("selectedAnimal",e.animal)}}let O7=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(At.animals),this.availableAnimals=this.globalService.globalVar.animals.filter(e=>e.isAvailable),this.subscription=this.componentCommunicationService.getAnimalView().subscribe(e=>{null!=e.type&&(this.animalSelected=!0,this.animal=e)})}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-animals-view"]],decls:4,vars:3,consts:[[1,"animalsView"],["class","info",4,"ngIf"],["class","listView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"info"],[1,"description"],[1,"listView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(g(0,"div",0),I(1,P7,6,0,"div",1),I(2,I7,2,1,"div",2),I(3,N7,2,1,"div",3),p()),2&e&&(m(1),C("ngIf",!i.animalSelected),m(1),C("ngIf",!i.animalSelected),m(1),C("ngIf",i.animalSelected))},directives:[Kt,Fh,E7],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{width:100%;height:100%}.info[_ngcontent-%COMP%]{text-align:center}"]}),t})();function F7(t,n){if(1&t){const e=be();g(0,"button",15),F("click",function(){K(e);const r=x().$implicit;return x().setAsAutoRunFreeRace(r)}),b(1,"Auto Run Free Race"),p()}}function V7(t,n){if(1&t){const e=be();g(0,"div")(1,"div",7),H(2,"app-animal-deck",8),g(3,"div",9)(4,"button",10),F("click",function(){const a=K(e).$implicit,s=x(),o=Pt(11);return s.editDeck(o,a)}),b(5,"Edit"),p()(),g(6,"div",11)(7,"button",12),F("click",function(){const a=K(e).$implicit;return x().setAsPrimary(a)}),b(8,"Set as Primary"),p()(),g(9,"div",13),I(10,F7,2,0,"button",14),p()(),H(11,"hr"),p()}if(2&t){const e=n.index,i=x();m(2),C("deckNumber",e+1),m(8),C("ngIf",i.showAutoRaceButton)}}function B7(t,n){if(1&t){const e=be();g(0,"div",31)(1,"input",32),F("input",function(){return K(e),x(2).toggleRaceOrder()}),p(),g(2,"label",33),F("click",function(){return K(e),x(2).toggleRaceOrder()}),b(3,"Race Order: "),p(),g(4,"span")(5,"span",34),F("dragstart",function(r){return K(e),x(2).dragStart(r)})("dragover",function(r){return K(e),x(2).allowDrop(r)})("drop",function(r){return K(e),x(2).dropCourseType(r)}),b(6),p(),b(7," / "),g(8,"span",35),F("dragstart",function(r){return K(e),x(2).dragStart(r)})("dragover",function(r){return K(e),x(2).allowDrop(r)})("drop",function(r){return K(e),x(2).dropCourseType(r)}),b(9),p(),b(10," / "),g(11,"span",36),F("dragstart",function(r){return K(e),x(2).dragStart(r)})("dragover",function(r){return K(e),x(2).allowDrop(r)})("drop",function(r){return K(e),x(2).dropCourseType(r)}),b(12),p(),b(13," / "),g(14,"span",37),F("dragstart",function(r){return K(e),x(2).dragStart(r)})("dragover",function(r){return K(e),x(2).allowDrop(r)})("drop",function(r){return K(e),x(2).dropCourseType(r)}),b(15),p(),b(16," / "),g(17,"span",38),F("dragstart",function(r){return K(e),x(2).dragStart(r)})("dragover",function(r){return K(e),x(2).allowDrop(r)})("drop",function(r){return K(e),x(2).dropCourseType(r)}),b(18),p()()()}if(2&t){const e=x(2);m(1),C("checked",e.isRaceOrderOn),m(4),C("ngClass",e.getColorClass(e.selectedDeckOrder[0])),m(1),ht(e.selectedDeckOrder[0]),m(2),C("ngClass",e.getColorClass(e.selectedDeckOrder[1])),m(1),ht(e.selectedDeckOrder[1]),m(2),C("ngClass",e.getColorClass(e.selectedDeckOrder[2])),m(1),ht(e.selectedDeckOrder[2]),m(2),C("ngClass",e.getColorClass(e.selectedDeckOrder[3])),m(1),ht(e.selectedDeckOrder[3]),m(2),C("ngClass",e.getColorClass(e.selectedDeckOrder[4])),m(1),ht(e.selectedDeckOrder[4])}}const L7=function(t,n,e,i,r,a){return{selectedCourseType:t,flatlandColor:n,mountainColor:e,waterColor:i,tundraColor:r,volcanicColor:a}};function U7(t,n){if(1&t){const e=be();g(0,"span",39),F("click",function(){const a=K(e).$implicit;return x(2).filterType(a)}),b(1),p()}if(2&t){const e=n.$implicit,i=x(2);C("ngClass",function Gy(t,n,e,i,r,a,s,o,l){const c=Fi()+t,u=we(),d=Dr(u,c,e,i,r,a);return Es(u,c+4,s,o)||d?ma(u,c+6,l?n.call(l,e,i,r,a,s,o):n(e,i,r,a,s,o)):Jl(u,c+6)}(2,L7,i.selectedCourseType===e,"Flatland"===e,"Mountain"===e,"Ocean"===e,"Tundra"===e,"Volcanic"===e)),m(1),de(" ",e.trim()," ")}}const H7=function(t){return{selectedAnimal:t}};function G7(t,n){if(1&t){const e=be();g(0,"span",40),F("click",function(){const a=K(e).$implicit;return x(2).selectAnimal(a)}),b(1),p()}if(2&t){const e=n.$implicit,i=x(2);C("ngClass",ur(2,H7,i.selectedAnimalName===e)),m(1),de(" ",e.trim()," ")}}function j7(t,n){if(1&t){const e=be();g(0,"div",16)(1,"form",17)(2,"div",18)(3,"h4",19),b(4),p(),g(5,"button",20),F("click",function(){return K(e).$implicit.dismiss()}),b(6,"X"),p()(),g(7,"div",21)(8,"div",22)(9,"label",23),b(10,"Deck Name: "),p(),H(11,"input",24),p(),I(12,B7,19,11,"div",25),H(13,"br"),g(14,"div",26),I(15,U7,2,9,"span",27),p(),H(16,"br"),g(17,"div"),I(18,G7,2,4,"span",28),p()(),g(19,"div",29)(20,"button",30),F("click",function(){return K(e),x().saveDeck()}),b(21,"Save"),p()()()()}if(2&t){const e=x();m(1),C("formGroup",e.editDeckForm),m(3),de("Edit ",e.selectedDeck.name,""),m(8),C("ngIf",e.displayRaceOrder),m(3),C("ngForOf",e.raceCourseTypeList),m(3),C("ngForOf",e.possibleAnimalsList)}}let z7=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.modalService=i,this.lookupService=r,this.componentCommunicationService=a,this.raceCourseTypeList=[],this.displayRaceOrder=!1,this.editDeckForm=new Zd({deckName:new M0("")}),this.toggleRaceOrder=()=>{this.isRaceOrderOn=!this.isRaceOrderOn,this.selectedDeck.isCourseOrderActive=this.isRaceOrderOn}}ngOnInit(){this.componentCommunicationService.setNewView(At.decks),this.isRaceOrderOn=!1,this.newAnimalList=[],this.animalDecks=this.globalService.globalVar.animalDecks,this.globalService.globalVar.animals.filter(r=>r.isAvailable).forEach(r=>{this.raceCourseTypeList.some(a=>a===r.getRaceCourseType())||this.raceCourseTypeList.push(r.getRaceCourseType())});var e=this.lookupService.getResourceByName("Scouts");null!=e&&e>0&&(this.displayRaceOrder=!0),this.selectedDeckOrder=[],this.selectedDeckOrder.push("Flatland"),this.selectedDeckOrder.push("Mountain"),this.selectedDeckOrder.push("Ocean"),this.selectedDeckOrder.push("Tundra"),this.selectedDeckOrder.push("Volcanic");var i=this.lookupService.getResourceByName("Team Manager");null==i&&(i=0),this.showAutoRaceButton=i>0}editDeck(e,i){this.selectedDeck=i,this.newAnimalList=[],this.selectedAnimalName="",this.selectedCourseType="Flatland",this.isRaceOrderOn=i.isCourseOrderActive,null!=i.courseTypeOrder&&i.courseTypeOrder.length>0&&(this.selectedDeckOrder=[],i.courseTypeOrder.forEach(r=>{r===$.Flatland&&this.selectedDeckOrder.push("Flatland"),r===$.Mountain&&this.selectedDeckOrder.push("Mountain"),r===$.Ocean&&this.selectedDeckOrder.push("Ocean"),r===$.Tundra&&this.selectedDeckOrder.push("Tundra"),r===$.Volcanic&&this.selectedDeckOrder.push("Volcanic")})),this.filterType(this.selectedCourseType),i.selectedAnimals.length>0&&i.selectedAnimals.forEach(r=>{this.newAnimalList.push(r)}),this.editDeckForm.patchValue({deckName:i.name}),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}saveDeck(){var e,i,r,a,s,o,l,c,u=this.globalService.globalVar.animalDecks.find(w=>w.deckNumber===this.selectedDeck.deckNumber);if(null!=u&&((null===(e=this.editDeckForm.get("deckName"))||void 0===e?void 0:e.value.length)<=50&&(null===(i=this.editDeckForm.get("deckName"))||void 0===i?void 0:i.value.length)>=1&&(u.name=null===(r=this.editDeckForm.get("deckName"))||void 0===r?void 0:r.value),u.selectedAnimals=[],this.newAnimalList.forEach(w=>{null==u||u.selectedAnimals.push(w)}),null==u||u.selectedAnimals.sort(this.compare),this.displayRaceOrder&&this.isRaceOrderOn)){var d=[],h=null===(a=document.getElementById("raceOrder1"))||void 0===a?void 0:a.innerHTML,f=null===(s=document.getElementById("raceOrder2"))||void 0===s?void 0:s.innerHTML,v=null===(o=document.getElementById("raceOrder3"))||void 0===o?void 0:o.innerHTML,_=null===(l=document.getElementById("raceOrder4"))||void 0===l?void 0:l.innerHTML,D=null===(c=document.getElementById("raceOrder5"))||void 0===c?void 0:c.innerHTML;d.push(h),d.push(f),d.push(v),d.push(_),d.push(D),null!=u&&(u.courseTypeOrder=[]),d.forEach(w=>{"Flatland"===w&&(null==u||u.courseTypeOrder.push($.Flatland)),"Mountain"===w&&(null==u||u.courseTypeOrder.push($.Mountain)),"Ocean"===w&&(null==u||u.courseTypeOrder.push($.Ocean)),"Tundra"===w&&(null==u||u.courseTypeOrder.push($.Tundra)),"Volcanic"===w&&(null==u||u.courseTypeOrder.push($.Volcanic))})}this.modalService.dismissAll()}compare(e,i){return e.raceCourseType>i.raceCourseType?1:i.raceCourseType>e.raceCourseType?-1:0}filterType(e){var i=this.lookupService.getAnimalsByRaceCourseType(e),r=[];i.length>0&&i.forEach(s=>{var o=this.globalService.globalVar.animals.find(l=>l.getAnimalType()===s);(null==o?void 0:o.isAvailable)&&r.push(o.getAnimalType())}),this.possibleAnimalsList=r,this.selectedCourseType=e;var a=this.selectedDeck.selectedAnimals.find(s=>s.getRaceCourseType()===e);null!=a&&(this.selectedAnimalName=a.getAnimalType())}selectAnimal(e){var i=this.globalService.globalVar.animals.find(s=>s.getAnimalType()===e);if(null!=i){var r=-1,a=i.getRaceCourseType();this.newAnimalList.forEach(s=>{s.getRaceCourseType()===a&&(r=this.newAnimalList.indexOf(s))}),r>=0&&this.newAnimalList.splice(r,1),this.selectedAnimalName===i.getAnimalType()?this.selectedAnimalName="":(this.newAnimalList.push(i),this.selectedAnimalName=i.getAnimalType())}}setAsPrimary(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.isPrimaryDeck=!1),r.isPrimaryDeck=!0)}setAsAutoRunFreeRace(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.autoRunFreeRace),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.autoRunFreeRace=!1),r.autoRunFreeRace=!0)}dragStart(e){this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id)}allowDrop(e){e.preventDefault()}dropCourseType(e){e.preventDefault(),e.stopPropagation();var i=e.dataTransfer.getData("text"),r=document.getElementById(i),a=e.target.innerHTML;if(null!==r&&null!==a){var l=this.selectedDeckOrder.indexOf(a),c=this.selectedDeckOrder.indexOf(null==r?void 0:r.innerHTML);this.selectedDeckOrder[l]=r.innerHTML,this.selectedDeckOrder[c]=a,e.target.innerHTML="",e.target.className="",e.target.append(r.innerHTML),r.innerHTML="",r.className="",r.append(a)}}getColorClass(e){return{flatlandColor:"Flatland"===e,mountainColor:"Mountain"===e,waterColor:"Ocean"===e,tundraColor:"Tundra"===e,volcanicColor:"Volcanic"===e}}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(vs),E(Sn),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-decks-view"]],decls:12,vars:1,consts:[[1,"decksView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"description"],[4,"ngFor","ngForOf"],["content",""],[1,"gridContainer"],[1,"deck",3,"deckNumber"],[1,"edit"],[1,"editButton",3,"click"],[1,"primary"],[1,"primaryButton",3,"click"],[1,"autoRunFreeRace"],["class","autoRunFreeRaceButton",3,"click",4,"ngIf"],[1,"autoRunFreeRaceButton",3,"click"],[1,"modalClass"],[3,"formGroup"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","deck-name"],["id","deck-name","type","text","maxlength","50","formControlName","deckName",1,"spaced"],["class","raceOrder",4,"ngIf"],[1,"typeContainer"],["class","raceType subHeading clickableText",3,"ngClass","click",4,"ngFor","ngForOf"],["class","animalOption clickableText",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",3,"click"],[1,"raceOrder"],["type","checkbox","id","finishTraining",1,"spaced",3,"checked","input"],[1,"spaced",3,"click"],["id","raceOrder1","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder2","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder3","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder4","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder5","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],[1,"raceType","subHeading","clickableText",3,"ngClass","click"],[1,"animalOption","clickableText",3,"ngClass","click"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),b(5,"Decks"),p(),g(6,"div",4),b(7," Decks are groups of animals that run together in a race. Each deck consists of one animal from each course type. Your primary deck is the one that will run the races you select. "),p(),H(8,"hr"),p(),I(9,V7,12,2,"div",5),p()()(),I(10,j7,22,5,"ng-template",null,6,Ot)),2&e&&(m(9),C("ngForOf",i.animalDecks))},directives:[di,Vh,Kt,Kd,jd,Jd,Zo,eh,yc,A0,Ci],styles:['.decksView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceType[_ngcontent-%COMP%]{width:20%;-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.animalOption[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.selectedAnimal[_ngcontent-%COMP%]{font-weight:700}.selectedCourseType[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.typeContainer[_ngcontent-%COMP%]{width:100%}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:70% 15% 15%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"deck . freeRace" "deck edit primary"}.deck[_ngcontent-%COMP%]{grid-area:deck}.edit[_ngcontent-%COMP%]{grid-area:edit;text-align:center}.editButton[_ngcontent-%COMP%]{width:80%}.primary[_ngcontent-%COMP%]{grid-area:primary;text-align:center}.primaryButton[_ngcontent-%COMP%]{width:80%}.autoRunFreeRace[_ngcontent-%COMP%]{grid-area:freeRace;text-align:center}.autoRunFreeRaceButton[_ngcontent-%COMP%]{width:80%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.draggable[_ngcontent-%COMP%]{cursor:move;margin:1em}.raceOrder[_ngcontent-%COMP%]{display:inline-block}']}),t})();function $7(t,n){if(1&t&&(g(0,"em"),b(1),p()),2&t){const e=x(2);m(1),de("(",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function W7(t,n){if(1&t){const e=be();g(0,"div",3),b(1),I(2,$7,2,1,"em",4),H(3,"br")(4,"br")(5,"span",5)(6,"br")(7,"br"),b(8),H(9,"br"),g(10,"button",6),F("click",function(){return K(e),x().BuyItem()}),b(11,"Buy"),p()()}if(2&t){const e=x();C("ngbPopover",Pt(3)),m(1),de(" ",e.selectedItem.name," "),m(1),C("ngIf",e.selectedItem.totalShopQuantity>1),m(3),C("innerHTML",e.shortDescription,or),m(3),de(" ",e.purchaseResourcesRequired," "),m(2),C("disabled",!e.canAffordItem)}}function q7(t,n){if(1&t&&(g(0,"em"),b(1),p()),2&t){const e=x(2);m(1),de("(",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function Y7(t,n){if(1&t){const e=be();g(0,"div",7),b(1),I(2,q7,2,1,"em",4),H(3,"br")(4,"br")(5,"span",5)(6,"br")(7,"br"),b(8),H(9,"br"),g(10,"button",6),F("click",function(){return K(e),x().BuyItem()}),b(11,"Buy"),p()()}if(2&t){const e=x();m(1),de(" ",e.selectedItem.name," "),m(1),C("ngIf",e.selectedItem.totalShopQuantity>1),m(3),C("innerHTML",e.shortDescription,or),m(3),de(" ",e.purchaseResourcesRequired," "),m(2),C("disabled",!e.canAffordItem)}}function X7(t,n){if(1&t&&(g(0,"div",8),H(1,"span",5),p()),2&t){const e=x();m(1),C("innerHTML",e.longDescription,or)}}let Q7=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.itemPurchased=new je,this.canAffordItem=!0}ngOnInit(){this.selectedItem.type===se.Ability?(this.shortDescription=this.lookupService.getAnimalAbilityDescription(!0,this.selectedItem.additionalIdentifier),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedItem.additionalIdentifier)):this.selectedItem.type===se.Specialty?(this.shortDescription=this.lookupService.getSpecialtyItemDescription(this.selectedItem.name),""===this.shortDescription&&(this.shortDescription=this.selectedItem.shortDescription)):(this.shortDescription=this.selectedItem.shortDescription,this.longDescription=this.selectedItem.longDescription),this.selectedItem.purchasePrice.forEach(e=>{this.purchaseResourcesRequired=e.amount+" "+e.name+", ",this.lookupService.getResourceByName(e.name)<e.amount&&(this.canAffordItem=!1)}),this.purchaseResourcesRequired.length>0&&(this.purchaseResourcesRequired=this.purchaseResourcesRequired.substring(0,this.purchaseResourcesRequired.length-2))}BuyItem(){this.canBuyItem()&&(this.spendResourcesOnItem(),this.selectedItem.type===se.Animal&&this.buyAnimal(),this.selectedItem.type===se.Food?this.buyFood():this.selectedItem.type===se.Training&&this.buyTraining(),this.selectedItem.type===se.Specialty?this.buySpecialty():this.selectedItem.type===se.Ability&&this.buyAbility(),this.selectedItem.type===se.Equipment&&this.buyEquipment(),this.itemPurchased.emit(this.selectedItem))}canBuyItem(){var e=!0;return this.selectedItem.purchasePrice.forEach(i=>{this.lookupService.getResourceByName(i.name)<i.amount&&(e=!1)}),e}spendResourcesOnItem(){this.selectedItem.purchasePrice.forEach(e=>{this.lookupService.spendResourceByName(e.name,e.amount)})}buyAnimal(){var e=this.globalService.globalVar.animals.find(o=>o.name===this.selectedItem.name);if(null!=e){e.isAvailable=!0,this.selectedItem.amountPurchased=1;var i=this.globalService.globalVar.shop.find(o=>"Abilities"===o.name);if(null!=i){var r=i.itemList.filter(o=>o.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(o=>{o.isAvailable=!0})}var a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);if(null!=a){var s=!1;a.selectedAnimals.forEach(o=>{o.raceCourseType===(null==e?void 0:e.raceCourseType)&&(s=!0)}),s||a.selectedAnimals.push(e)}}}buyTraining(){this.selectedItem.amountPurchased=1;var e=this.globalService.globalVar.trainingOptions.find(i=>i.trainingName===this.selectedItem.name);void 0!==e&&(e.isAvailable=!0)}buyFood(){if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(i=>i.name===this.selectedItem.name)){var e=this.globalService.globalVar.resources.find(i=>i.name===this.selectedItem.name);null!=e&&(e.amount+=1)}else this.globalService.globalVar.resources.push(new _e(this.selectedItem.name,1,se.Food))}buySpecialty(){var e,r;if(this.selectedItem.amountPurchased+=1,"National Races"===this.selectedItem.name&&(this.globalService.globalVar.nationalRaceCountdown=0,null!=(e=this.globalService.globalVar.shop.find(o=>"Specialty"===o.name)))){var i=e.itemList.find(o=>"International Races"===o.name);null!=i&&(i.isAvailable=!0)}if("Incubator Upgrade Lv1"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(l=>"Specialty"===l.name))&&null!=(r=e.itemList.find(l=>"Incubator Upgrade Lv2"===l.name))&&(r.isAvailable=!0),"Incubator Upgrade Lv2"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(l=>"Specialty"===l.name))&&null!=(r=e.itemList.find(c=>"Incubator Upgrade Lv3"===c.name))&&(r.isAvailable=!0),"Incubator Upgrade Lv3"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(l=>"Specialty"===l.name))&&null!=(r=e.itemList.find(c=>"Incubator Upgrade Lv4"===c.name))&&(r.isAvailable=!0),"Team Manager"===this.selectedItem.name&&1===this.selectedItem.amountPurchased){var a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&(a.autoRunFreeRace=!0)}if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(o=>o.name===this.selectedItem.name)){var s=this.globalService.globalVar.resources.find(o=>o.name===this.selectedItem.name);null!=s&&(s.amount+=1)}else this.globalService.globalVar.resources.push(new _e(this.selectedItem.name,1,se.Specialty));null!=this.selectedItem.quantityMultiplier&&this.selectedItem.quantityMultiplier>0&&this.selectedItem.purchasePrice.forEach(o=>{null!=this.selectedItem.quantityAdditive&&this.selectedItem.quantityAdditive>0?o.amount+=this.selectedItem.quantityAdditive:o.amount*=this.selectedItem.quantityMultiplier})}buyAbility(){var e=this.selectedItem.name.split(" ")[0].trim(),i=this.selectedItem.name.split(":")[1].trim();if(""!==e&&""!==i){var r=this.globalService.globalVar.animals.find(s=>s.getAnimalType()===e);if(void 0!==r){var a=r.availableAbilities.find(s=>s.name===i);void 0!==a&&(a.isAbilityPurchased=!0,this.selectedItem.amountPurchased=1)}}}buyEquipment(){if(this.selectedItem.amountPurchased+=1,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(i=>i.name===this.selectedItem.name)){var e=this.globalService.globalVar.resources.find(i=>i.name===this.selectedItem.name);null!=e&&(e.amount+=1)}else this.globalService.globalVar.resources.push(new _e(this.selectedItem.name,1,se.Equipment))}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(Sn))},t.\u0275cmp=Je({type:t,selectors:[["app-shopping-item"]],inputs:{selectedItem:"selectedItem"},outputs:{itemPurchased:"itemPurchased"},decls:4,vars:2,consts:[["class","item","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","item",4,"ngIf"],["longDescriptionContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"item",3,"ngbPopover"],[4,"ngIf"],[3,"innerHTML"],[3,"disabled","click"],[1,"item"],[1,"popoverClass"]],template:function(e,i){1&e&&(I(0,W7,12,6,"div",0),I(1,Y7,12,5,"div",1),I(2,X7,2,1,"ng-template",null,2,Ot)),2&e&&(C("ngIf",""!==i.longDescription&&null!=i.longDescription),m(1),C("ngIf",""===i.longDescription||null==i.longDescription))},directives:[Kt,Ra],styles:[".item[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();function Z7(t,n){if(1&t){const e=be();g(0,"td",8)(1,"div")(2,"app-shopping-item",9),F("itemPurchased",function(r){return K(e),x(3).itemPurchased(r)}),p()()()}if(2&t){const e=n.$implicit;m(2),C("selectedItem",e)}}function K7(t,n){if(1&t&&(g(0,"tr"),I(1,Z7,3,1,"td",7),p()),2&t){const e=n.$implicit;m(1),C("ngForOf",e)}}function J7(t,n){if(1&t&&(g(0,"table"),I(1,K7,2,1,"tr",6),p()),2&t){const e=x();m(1),C("ngForOf",e.itemsRows)}}function eG(t,n){1&t&&(g(0,"div",10),H(1,"br"),g(2,"span"),b(3,"Fresh out! Check back again in the future to see if more items are added!"),p(),H(4,"br"),p())}let tG=(()=>{class t{constructor(e){this.globalService=e}ngOnInit(){this.setupDisplayItems()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];var e=4;this.screenHeight<=650&&(e=2);var i=[];this.section.itemList.forEach(a=>{a.isAvailable&&(a.canHaveMultiples&&(a.infiniteAmount||a.amountPurchased<a.totalShopQuantity)||0===a.amountPurchased)&&i.push(a)});for(var r=1;r<=i.length;r++)this.itemsCells.push(i[r-1]),r%e==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}itemPurchased(e){this.setupDisplayItems()}}return t.\u0275fac=function(e){return new(e||t)(E(bt))},t.\u0275cmp=Je({type:t,selectors:[["app-shopping-list"]],hostBindings:function(e,i){1&e&&F("resize",function(a){return i.onResize(a)},!1,ks)},inputs:{section:"section"},decls:8,vars:3,consts:[[1,"shoppingListView"],[1,"sectionHeaderBackgroundColor"],[1,"s4Heading","keyword","sectionHeaderText"],[1,"items"],[4,"ngIf"],["class","centered","c","",4,"ngIf"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[3,"selectedItem","itemPurchased"],["c","",1,"centered"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"span",2),b(3),p()(),g(4,"div",3),I(5,J7,2,1,"table",4),I(6,eG,5,0,"div",5),H(7,"br"),p()()),2&e&&(m(3),ht(i.section.name),m(2),C("ngIf",i.itemsRows.length>0),m(1),C("ngIf",0===i.itemsRows.length))},directives:[Kt,di,Q7],styles:[".shoppingListView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.sectionHeaderBackgroundColor[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center}.sectionHeaderText[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.centered[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function nG(t,n){if(1&t&&(g(0,"div",14),H(1,"app-shopping-list",15),p()),2&t){const e=n.$implicit;m(1),C("section",e)}}let iG=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.filterAnimals=!1,this.filterTrainings=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterAbilities=!1}ngOnInit(){this.componentCommunicationService.setNewView(At.shop),this.getShopOptions()}getShopOptions(){this.sections=[];var e=this.filtersActive(),i=this.globalService.globalVar.shop.find(c=>"Animals"===c.name&&(!e||e&&this.filterAnimals));void 0!==i&&this.sections.push(i);var r=this.globalService.globalVar.shop.find(c=>"Trainings"===c.name&&(!e||e&&this.filterTrainings));void 0!==r&&this.sections.push(r);var a=this.globalService.globalVar.shop.find(c=>"Equipment"===c.name&&(!e||e&&this.filterEquipment));void 0!==a&&this.sections.push(a);var s=this.globalService.globalVar.shop.find(c=>"Food"===c.name&&(!e||e&&this.filterFood));void 0!==s&&this.sections.push(s);var o=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name&&(!e||e&&this.filterSpecialty));void 0!==o&&this.sections.push(o);var l=this.globalService.globalVar.shop.find(c=>"Abilities"===c.name&&(!e||e&&this.filterAbilities));void 0!==l&&this.sections.push(l)}toggleShopFilter(e){"Animals"===e&&(this.filterAnimals=!this.filterAnimals),"Trainings"===e&&(this.filterTrainings=!this.filterTrainings),"Equipment"===e&&(this.filterEquipment=!this.filterEquipment),"Food"===e&&(this.filterFood=!this.filterFood),"Specialty"===e&&(this.filterSpecialty=!this.filterSpecialty),"Abilities"===e&&(this.filterAbilities=!this.filterAbilities),this.getShopOptions()}filtersActive(){return!!(this.filterAnimals||this.filterAbilities||this.filterEquipment||this.filterFood||this.filterSpecialty||this.filterTrainings)}ResetShopFilters(){this.filterAnimals=!1,this.filterAbilities=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterTrainings=!1,this.getShopOptions()}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-shop-view"]],decls:25,vars:13,consts:[[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"filters"],["id","title"],["id","animalsFilter",1,"clickableText",3,"click"],["id","trainingsFilter",1,"clickableText",3,"click"],["id","equipmentFilter",1,"clickableText",3,"click"],["id","foodFilter",1,"clickableText",3,"click"],["id","specialtyFilter",1,"clickableText",3,"click"],["id","abilitiesFilter",1,"clickableText",3,"click"],[1,"centered","clickableText",3,"click"],["class","shopSection",4,"ngFor","ngForOf"],[1,"shopSection"],[3,"section"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),b(5,"Shop"),p()()(),g(6,"div",4)(7,"p",5),b(8,"Filters:"),p(),g(9,"p",6),F("click",function(){return i.toggleShopFilter("Animals")}),b(10,"Animals"),p(),g(11,"p",7),F("click",function(){return i.toggleShopFilter("Trainings")}),b(12," Trainings"),p(),g(13,"p",8),F("click",function(){return i.toggleShopFilter("Equipment")}),b(14,"Equipment "),p(),g(15,"p",9),F("click",function(){return i.toggleShopFilter("Food")}),b(16,"Food"),p(),g(17,"p",10),F("click",function(){return i.toggleShopFilter("Specialty")}),b(18," Specialty"),p(),g(19,"p",11),F("click",function(){return i.toggleShopFilter("Abilities")}),b(20," Abilities"),p()(),g(21,"div",12),F("click",function(){return i.ResetShopFilters()}),b(22," Reset Filters "),p()(),H(23,"br"),I(24,nG,2,1,"div",13),p()),2&e&&(m(9),it("filterActive",i.filterAnimals),m(2),it("filterActive",i.filterTrainings),m(2),it("filterActive",i.filterEquipment),m(2),it("filterActive",i.filterFood),m(2),it("filterActive",i.filterSpecialty),m(2),it("filterActive",i.filterAbilities),m(5),C("ngForOf",i.sections))},directives:[di,tG],styles:['.shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.filters[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"title animalsFilter trainingsFilter facilityFilter foodFilter specialtyFilter enhancerFilter"}#title[_ngcontent-%COMP%]{grid-area:title}#animalsFilter[_ngcontent-%COMP%]{grid-area:animalsFilter}#trainingsFilter[_ngcontent-%COMP%]{grid-area:trainingsFilter}#facilityFilter[_ngcontent-%COMP%]{grid-area:facilityFilter}#foodFilter[_ngcontent-%COMP%]{grid-area:foodFilter}#specialtyFilter[_ngcontent-%COMP%]{grid-area:specialtyFilter}#enhancerFilter[_ngcontent-%COMP%]{grid-area:enhancerFilter}']}),t})(),rG=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i}ngOnInit(){this.traitLevel=this.lookupService.getResearchLevel(),this.maxNegativePercent=25;var e=this.globalService.globalVar.modifiers.find(i=>"maximumTraitNegativePercentModifier"===i.text);void 0!==e&&(this.maxNegativePercent=e.value)}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(Sn))},t.\u0275cmp=Je({type:t,selectors:[["app-trait-option"]],inputs:{trait:"trait"},decls:5,vars:2,consts:[[1,"trait"],[1,"traitName"],[1,"traitStats"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"p",1),b(2),p(),g(3,"p",2),b(4),p()()),2&e&&(m(2),ht(i.trait.traitName),m(2),ht(i.trait.getStatGainDescription(i.maxNegativePercent)))},styles:[".trait[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const aG=function(t){return{activeTrait:t}};function sG(t,n){if(1&t){const e=be();g(0,"td",4)(1,"div",5),F("click",function(){const a=K(e).$implicit;return x(2).selectTrait(a)}),H(2,"app-trait-option",6),p()()}if(2&t){const e=n.$implicit;m(1),C("ngClass",ur(2,aG,e.isSelected)),m(1),C("trait",e)}}function oG(t,n){if(1&t&&(g(0,"tr"),I(1,sG,3,4,"td",3),p()),2&t){const e=n.$implicit;m(1),C("ngForOf",e)}}let lG=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrait=new je}ngOnInit(){this.setupDisplayTraits()}setupDisplayTraits(){this.traitsCells=[],this.traitsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTraits.length;i++)this.traitsCells.push(this.availableTraits[i-1]),i%e==0&&(this.traitsRows.push(this.traitsCells),this.traitsCells=[]);0!==this.traitsCells.length&&this.traitsRows.push(this.traitsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrait(e){this.availableTraits.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrait.emit(e)}ngOnChanges(e){this.availableTraits=e.availableTraits.currentValue,this.setupDisplayTraits()}}return t.\u0275fac=function(e){return new(e||t)(E(bt))},t.\u0275cmp=Je({type:t,selectors:[["app-trait-list"]],hostBindings:function(e,i){1&e&&F("resize",function(a){return i.onResize(a)},!1,ks)},inputs:{availableTraits:"availableTraits"},outputs:{selectedTrait:"selectedTrait"},features:[yi],decls:4,vars:1,consts:[[1,"traitsView"],[1,"traits"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trait"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"table"),I(3,oG,2,1,"tr",2),p()()()),2&e&&(m(3),C("ngForOf",i.traitsRows))},directives:[di,Ci,rG],styles:[".traitsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function cG(t,n){if(1&t&&(g(0,"span"),b(1),p()),2&t){const e=x(2);m(1),ht(e.selectedAnimal.name)}}function uG(t,n){if(1&t){const e=be();g(0,"div",20),F("click",function(){return K(e),x().goToAnimal()}),I(1,cG,2,1,"span",6),H(2,"br"),g(3,"span"),b(4),p()()}if(2&t){const e=x();C("ngClass",e.colorConditional),m(1),C("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),m(3),ht(e.selectedAnimal.getAnimalType())}}function dG(t,n){if(1&t){const e=be();g(0,"div",20),F("click",function(){return K(e),x().goToAnimal()}),g(1,"span"),b(2),p()()}if(2&t){const e=x();C("ngClass",e.colorConditional),m(2),ht(e.selectedAnimal.getAnimalType())}}function hG(t,n){if(1&t&&(g(0,"span",21),b(1),p()),2&t){const e=x();m(1),de("",e.existingTrait.traitName," ")}}function fG(t,n){1&t&&(g(0,"span"),b(1,"No Trait Assigned"),p())}function pG(t,n){if(1&t&&(g(0,"div"),H(1,"br"),g(2,"p",22),H(3,"ngb-progressbar",23),g(4,"span",24),b(5),Ut(6,"number"),p()(),H(7,"br"),p()),2&t){const e=x();m(3),C("value",e.trainingProgressBarPercent),m(2),de("",nn(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}let gG=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.componentCommunicationService=a,this.returnEmitter=new je,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1}ngOnInit(){this.availableTraits=this.GetAvailableTraits();var e=this.globalService.globalVar.incubator;if(null!=e.assignedAnimal&&null!=e.assignedTrait&&(this.existingTrait=e.assignedTrait),null!=this.existingTrait){var i=this.availableTraits.find(r=>{var a;return(null===(a=this.existingTrait)||void 0===a?void 0:a.traitName)===r.traitName});null!=i&&(i.isSelected=!0)}this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.incubator;if(null==a.assignedAnimal||null==a.assignedTrait)return this.existingTrait=null,void this.availableTraits.forEach(s=>{s.isSelected=!1});this.trainingProgressBarPercent=a.timeTrained/a.timeToComplete*100})}selectNewTrait(e){var i=Object.assign({},e),r=this.globalService.globalVar.incubator;r.timeTrained=0,r.assignedAnimal=this.selectedAnimal,r.assignedTrait=i,this.existingTrait=i,this.selectedAnimal.currentTraining=null,this.selectedAnimal.canTrain=!1}GetAvailableTraits(){var e=[],i=this.lookupService.getResearchLevel();return e.push(new Yt("Alert",1,i,fe.focus,fe.endurance)),e.push(new Yt("Sharp",1,i,fe.adaptability,fe.power)),e.push(new Yt("Bulky",1,i,fe.power,fe.topSpeed)),e.push(new Yt("Curious",3,i,fe.acceleration,fe.focus)),e.push(new Yt("Adamant",3,i,fe.topSpeed,fe.acceleration)),e.push(new Yt("Stoic",5,i,fe.endurance,fe.adaptability)),e.push(new Yt("Smart",5,i,fe.focus,fe.power)),e.push(new Yt("Careful",7,i,fe.adaptability,fe.acceleration)),e.push(new Yt("Attentive",7,i,fe.power,fe.endurance)),e.push(new Yt("Keen",9,i,fe.acceleration,fe.topSpeed)),e.push(new Yt("Quick",9,i,fe.topSpeed,fe.adaptability)),e.push(new Yt("Tough",11,i,fe.endurance,fe.focus)),e.push(new Yt("Solitary",11,i,fe.focus,fe.acceleration)),e.push(new Yt("Cautious",13,i,fe.adaptability,fe.topSpeed)),e.push(new Yt("Wild",13,i,fe.power,fe.focus)),e.push(new Yt("Clumsy",15,i,fe.acceleration,fe.adaptability)),e.push(new Yt("Natural",15,i,fe.topSpeed,fe.endurance)),e.push(new Yt("Resilient",17,i,fe.endurance,fe.power)),e.push(new Yt("Anxious",17,i,fe.focus,fe.topSpeed)),e.push(new Yt("Lucky",19,i,fe.adaptability,fe.focus)),e.push(new Yt("Rugged",19,i,fe.power,fe.adaptability)),e.push(new Yt("Naive",21,i,fe.acceleration,fe.endurance)),e.push(new Yt("Sprightly",21,i,fe.topSpeed,fe.power)),e.push(new Yt("Stout",23,i,fe.endurance,fe.acceleration)),e.push(new Yt("Pensive",23,i,fe.focus,fe.adaptability)),e.push(new Yt("Languid",25,i,fe.adaptability,fe.endurance)),e.push(new Yt("Mighty",25,i,fe.power,fe.acceleration)),e.push(new Yt("Nimble",27,i,fe.acceleration,fe.power)),e.push(new Yt("Small",27,i,fe.topSpeed,fe.focus)),e.push(new Yt("Resolute",29,i,fe.endurance,fe.topSpeed)),(e=e.filter(r=>i>=r.requiredLevel)).filter(r=>!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterSpeed&&r.positiveStatGain===fe.topSpeed||this.filterAcceleration&&r.positiveStatGain===fe.acceleration||this.filterEndurance&&r.positiveStatGain===fe.endurance||this.filterPower&&r.positiveStatGain===fe.power||this.filterFocus&&r.positiveStatGain===fe.focus||this.filterAdaptability&&r.positiveStatGain===fe.adaptability)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.availableTraits=this.GetAvailableTraits()}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTraits=this.GetAvailableTraits()}returnToAnimalView(){this.returnEmitter.emit(!1)}goToAnimal(){this.componentCommunicationService.setAnimalView(At.animals,this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(zi),E(Sn),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-incubator-traits"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:40,vars:19,consts:[[1,"incubatorTraitsModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],["class","clickableText keyword",3,"ngClass","click",4,"ngIf"],["class","activeTrait",4,"ngIf"],[4,"ngIf"],[1,"back","clickableText",3,"click"],[1,"filterGridContainer"],[1,"resetFiltersHeader","clickableText"],[3,"click"],[1,"changeTrainingHeader"],[1,"statFilter","clickableText"],["id","speedFilter",3,"click"],["id","accelerationFilter",3,"click"],["id","enduranceFilter",3,"click"],["id","powerFilter",3,"click"],["id","focusFilter",3,"click"],["id","adaptabilityFilter",3,"click"],[3,"availableTraits","selectedTrait"],[1,"clickableText","keyword",3,"ngClass","click"],[1,"activeTrait"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),I(4,uG,5,3,"div",4),I(5,dG,3,2,"div",4),g(6,"span"),b(7),p(),H(8,"hr"),I(9,hG,2,1,"span",5),I(10,fG,2,0,"span",6),p(),g(11,"div",7),F("click",function(){return i.returnToAnimalView()}),g(12,"span"),b(13,"Back"),p()()(),H(14,"hr"),I(15,pG,8,5,"div",6),H(16,"br")(17,"br"),g(18,"div",8)(19,"div",9)(20,"span",10),F("click",function(){return i.resetFilters()}),b(21,"Reset Filters"),p()(),g(22,"div",11)(23,"span"),b(24,"Choose New Trait"),p()(),g(25,"div",12)(26,"span",13),F("click",function(){return i.toggleStatFilter("Speed")}),b(27,"SPD "),p(),g(28,"span",14),F("click",function(){return i.toggleStatFilter("Acceleration")}),b(29,"ACC "),p(),g(30,"span",15),F("click",function(){return i.toggleStatFilter("Endurance")}),b(31,"END "),p(),g(32,"span",16),F("click",function(){return i.toggleStatFilter("Power")}),b(33,"PWR "),p(),g(34,"span",17),F("click",function(){return i.toggleStatFilter("Focus")}),b(35,"FCS "),p(),g(36,"span",18),F("click",function(){return i.toggleStatFilter("Adaptability")}),b(37,"ADP"),p()()(),H(38,"br"),g(39,"app-trait-list",19),F("selectedTrait",function(a){return i.selectNewTrait(a)}),p()()()),2&e&&(m(4),C("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),m(1),C("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),m(2),de("Current Trait: ",i.selectedAnimal.getTraitName(),""),m(2),C("ngIf",null!=i.existingTrait),m(1),C("ngIf",null==i.existingTrait),m(5),C("ngIf",null!=i.existingTrait),m(11),it("filterActive",i.filterSpeed),m(2),it("filterActive",i.filterAcceleration),m(2),it("filterActive",i.filterEndurance),m(2),it("filterActive",i.filterPower),m(2),it("filterActive",i.filterFocus),m(2),it("filterActive",i.filterAdaptability),m(3),C("availableTraits",i.availableTraits))},directives:[Kt,Ci,Wm,lG],pipes:[ss],styles:['.incubatorTraitsModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"ResetFiler changeTraitHeader statFilter"}.changeTraitHeader[_ngcontent-%COMP%]{grid-area:changeTraitHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.resetFilter[_ngcontent-%COMP%]{grid-area:resetFilter}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}']}),t})();function mG(t,n){1&t&&(g(0,"div",3)(1,"h2"),b(2,"Incubator"),p(),g(3,"div",4),b(4," Select an animal and the desired trait to begin the incubation process. While incubating, you will not be able to train the selected animal. The chosen trait will remain on the animal until a new trait is selected or the trait is removed. "),p(),H(5,"hr"),p())}function vG(t,n){if(1&t){const e=be();g(0,"div",7)(1,"div")(2,"app-animal-list",8),F("selectedAnimal",function(r){return K(e),x(2).selectedAnimal(r)}),p()()()}if(2&t){const e=x(2);m(2),C("availableAnimals",e.availableAnimals)}}function _G(t,n){if(1&t){const e=be();g(0,"div",9)(1,"app-incubator-traits",10),F("returnEmitter",function(r){return K(e),x(2).returnToAnimalView(r)}),p()()}if(2&t){const e=x(2);m(1),C("selectedAnimal",e.animal)}}function bG(t,n){if(1&t&&(g(0,"div"),I(1,vG,3,1,"div",5),I(2,_G,2,1,"div",6),p()),2&t){const e=x();m(1),C("ngIf",!e.animalSelected),m(1),C("ngIf",e.animalSelected)}}function yG(t,n){1&t&&(g(0,"div"),b(1," To access the incubator, you need to improve your research level. Try participating in Duo Races. "),p())}let CG=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.componentCommunicationService=r,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(At.incubator),this.availableAnimals=this.globalService.globalVar.animals.filter(i=>i.isAvailable),this.researchLevel=this.lookupService.getResearchLevel();var e=this.globalService.globalVar.incubator;null!=e.assignedAnimal&&(this.animalSelected=!0,this.animal=e.assignedAnimal)}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(Sn),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-incubator-view"]],decls:4,vars:3,consts:[[1,"incubatorView"],["class","info",4,"ngIf"],[4,"ngIf"],[1,"info"],[1,"description"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"selectAnimalView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(g(0,"div",0),I(1,mG,6,0,"div",1),I(2,bG,3,2,"div",2),I(3,yG,2,0,"div",2),p()),2&e&&(m(1),C("ngIf",!i.animalSelected),m(1),C("ngIf",i.researchLevel>0),m(1),C("ngIf",0===i.researchLevel))},directives:[Kt,Fh,gG],styles:[".incubatorView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:1rem}"]}),t})(),wG=(()=>{class t{constructor(e){this.componentCommunicationService=e}ngOnInit(){this.componentCommunicationService.setNewView(At.faqs)}expandAnswer(e){var i=document.getElementById(e);null!=i&&i.classList.toggle("hide")}}return t.\u0275fac=function(e){return new(e||t)(E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-faq-view"]],decls:68,vars:0,consts:[[1,"faqView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"expanderMargin"],["type","button","aria-label","Expand",3,"click"],[1,"faqQuestion"],["id","faqAnswer1",1,"faqAnswer","hide"],["id","faqAnswer2",1,"faqAnswer","hide"],["id","faqAnswer3",1,"faqAnswer","hide"],["id","faqAnswer4",1,"faqAnswer","hide"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),b(5,"Frequently Asked Questions"),p(),g(6,"em"),b(7,"This is still a work in progress!"),p()(),H(8,"br")(9,"br"),g(10,"div")(11,"div")(12,"div",4)(13,"button",5),F("click",function(){return i.expandAnswer("faqAnswer1")}),b(14,"+"),p()(),g(15,"div",6)(16,"p"),b(17,"I'm stuck early on, how should I progress?"),p()()(),g(18,"div",7),H(19,"div",4),g(20,"p"),b(21,"In the early game, your biggest obstacles will be coins and breed level. Using the Stockbreeder to Auto Breed your animals can give them a big boost in stats. "),H(22,"br")(23,"br"),b(24," If you are having a hard time collecting coins, look into buying Team Managers from the Shop and upgrading your barns to Attractions to build passive income. "),p()()(),H(25,"hr"),g(26,"div")(27,"div")(28,"div",4)(29,"button",5),F("click",function(){return i.expandAnswer("faqAnswer2")}),b(30,"+"),p()(),g(31,"div",6)(32,"p"),b(33,"What do team managers do and how do I set auto race?"),p()()(),g(34,"div",8),H(35,"div",4),g(36,"p"),b(37,'After buying a Team Manager from the shop, you\'ll have the ability to set a deck as your "Auto Run Free Race" deck. Once selected, this deck will immediately run free races as soon as the time period resets creating a steady stream of income (assuming you win, of course!). '),H(38,"br")(39,"br"),b(40,' To set a deck as your "Auto Run Free Race" deck, select \'Decks\' on the right and then select the button that says "Auto Run Free Race" by the deck you want to select. Note that this option will not be available until you buy a Team Manager. '),p()()(),H(41,"hr"),g(42,"div")(43,"div")(44,"div",4)(45,"button",5),F("click",function(){return i.expandAnswer("faqAnswer3")}),b(46,"+"),p()(),g(47,"div",6)(48,"p"),b(49,"I'm having an issue with my game or have some feedback, how can I contact you?"),p()()(),g(50,"div",9),H(51,"div",4),g(52,"p"),b(53,"Feel free to use the links at the bottom right or email me at CulturaIdle@gmail.com to get in touch. "),p()()(),H(54,"hr"),g(55,"div")(56,"div")(57,"div",4)(58,"button",5),F("click",function(){return i.expandAnswer("faqAnswer4")}),b(59,"+"),p()(),g(60,"div",6)(61,"p"),b(62,"What are all of the circuit race rewards?"),p()()(),g(63,"div",10),H(64,"div",4),g(65,"p"),b(66,"This will be included at a later date once everything is finalized!"),p()()(),H(67,"hr"),p()()())},styles:['.faqView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}.faqQuestion[_ngcontent-%COMP%]{display:inline-block;width:95%;font-weight:700}.hide[_ngcontent-%COMP%]{display:none}.expanderMargin[_ngcontent-%COMP%]{display:inline-block;width:5%}']}),t})(),SG=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i}ngOnInit(){this.componentCommunicationService.setNewView(At.stats),this.trackedStats=this.globalService.globalVar.trackedStats;var e=0;this.globalService.globalVar.animals.forEach(i=>{i.totalRacesRun>e&&(e=i.totalRacesRun,this.mostUsedAnimal=i.name,this.mostUsedAnimalCount=e)})}getColorClass(e){if(null!=e&&e.length>0){var i=this.globalService.globalVar.animals.filter(s=>s.isAvailable),r=new Lt;return i.forEach(s=>{e.includes(s.name)&&(r=s)}),{flatlandColor:"Flatland"===r.getRaceCourseType(),mountainColor:"Mountain"===r.getRaceCourseType(),waterColor:"Ocean"===r.getRaceCourseType(),tundraColor:"Tundra"===r.getRaceCourseType(),volcanicColor:"Volcanic"===r.getRaceCourseType()}}return{}}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-stats-view"]],decls:37,vars:34,consts:[[1,"statsView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"coloredText",3,"ngClass"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),b(4,"Stats"),p(),H(5,"br")(6,"br"),b(7),Ut(8,"number"),H(9,"br"),b(10),Ut(11,"number"),H(12,"br"),b(13),Ut(14,"number"),H(15,"br"),g(16,"span",4),b(17),Ut(18,"number"),p(),H(19,"br"),g(20,"span",4),b(21),p(),H(22,"br"),g(23,"span",4),b(24),p(),H(25,"br"),g(26,"span",4),b(27),p(),H(28,"br"),g(29,"span",4),b(30),p(),H(31,"br"),g(32,"span",4),b(33),p(),H(34,"br"),g(35,"span",4),b(36),p()()()()),2&e&&(m(7),de(" Total Races: ",uc(8,18,i.trackedStats.totalRaces,"1.0","en-US")," "),m(3),de(" Total Meters Covered: ",uc(11,22,i.trackedStats.totalMetersRaced.toFixed(0),"1.0","en-US")," "),m(3),de(" Total Breeds: ",uc(14,26,i.trackedStats.totalBreeds,"1.0","en-US")," "),m(3),C("ngClass",i.getColorClass(i.mostUsedAnimal)),m(1),Nn("Most Used Animal: ",i.mostUsedAnimal," (",uc(18,30,i.mostUsedAnimalCount,"1.0","en-US"),")"),m(3),C("ngClass",i.getColorClass(i.trackedStats.highestMaxSpeed)),m(1),de("Highest Max Speed: ",i.trackedStats.highestMaxSpeed,""),m(2),C("ngClass",i.getColorClass(i.trackedStats.highestAccelerationRate)),m(1),de("Highest Acceleration Rate: ",i.trackedStats.highestAccelerationRate,""),m(2),C("ngClass",i.getColorClass(i.trackedStats.highestStamina)),m(1),de("Highest Stamina: ",i.trackedStats.highestStamina,""),m(2),C("ngClass",i.getColorClass(i.trackedStats.highestPowerEfficiency)),m(1),de("Highest Power Efficiency: ",i.trackedStats.highestPowerEfficiency,""),m(2),C("ngClass",i.getColorClass(i.trackedStats.highestFocusDistance)),m(1),de("Highest Focus Distance: ",i.trackedStats.highestFocusDistance,""),m(2),C("ngClass",i.getColorClass(i.trackedStats.highestAdaptabilityDistance)),m(1),de("Highest Adaptability Distance: ",i.trackedStats.highestAdaptabilityDistance,""))},directives:[Ci],pipes:[ss],styles:['.statsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}']}),t})();function TG(t,n){if(1&t&&(g(0,"p")(1,"span",7),b(2),g(3,"span",8),b(4),p(),H(5,"hr",9),p()()),2&t){const e=n.$implicit,i=x();m(1),li("ngbPopover",i.getPopover(e.name,e.itemType)),m(1),de(" ",e.name," "),m(2),de("x ",e.amount,"")}}function DG(t,n){if(1&t&&(g(0,"p")(1,"span",7),b(2),g(3,"span",8),b(4),p(),H(5,"hr",9),p()()),2&t){const e=n.$implicit,i=x();m(1),li("ngbPopover",i.getPopover(e.name,e.itemType)),m(1),de(" ",e.name," "),m(2),de("x ",e.amount,"")}}function MG(t,n){if(1&t&&(g(0,"p")(1,"span",7),b(2),g(3,"span",8),b(4),p(),H(5,"hr",9),p()()),2&t){const e=n.$implicit,i=x();m(1),li("ngbPopover",i.getPopover(e.name,e.itemType)),m(1),de(" ",e.name," "),m(2),de("x ",e.amount,"")}}function xG(t,n){if(1&t&&(g(0,"p")(1,"span",7),b(2),g(3,"span",8),b(4),p(),H(5,"hr",9),p()()),2&t){const e=n.$implicit,i=x();m(1),li("ngbPopover",i.getPopover(e.name,e.itemType)),m(1),de(" ",e.name," "),m(2),de("x ",e.amount,"")}}let RG=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.componentCommunicationService=r,this.resources=[],this.equipment=[],this.specialtyItems=[],this.progressionResources=[]}ngOnInit(){this.componentCommunicationService.setNewView(At.resources),this.resources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===se.Food||e.itemType===se.Resources).sort(),this.equipment=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===se.Equipment).sort(),this.specialtyItems=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===se.Specialty).sort(),this.progressionResources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===se.Progression).sort()}getPopover(e,i){return this.lookupService.getResourcePopover(e,i)}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(Sn),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-resources-view"]],decls:21,vars:4,consts:[[1,"resourcesView","gridContainer"],[1,"resources"],[1,"s4Heading","centered"],[4,"ngFor","ngForOf"],[1,"progression"],[1,"specialty"],[1,"equipment"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"screenMarginLeft",3,"ngbPopover"],[1,"rightAligned"],[1,"miniHr"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2),b(3,"Resources"),p(),H(4,"br"),I(5,TG,6,3,"p",3),p(),g(6,"div",4)(7,"div",2),b(8,"Progression"),p(),H(9,"br"),I(10,DG,6,3,"p",3),p(),g(11,"div",5)(12,"div",2),b(13,"Specialty"),p(),H(14,"br"),I(15,MG,6,3,"p",3),p(),g(16,"div",6)(17,"div",2),b(18,"Equipment"),p(),H(19,"br"),I(20,xG,6,3,"p",3),p()()),2&e&&(m(5),C("ngForOf",i.resources),m(5),C("ngForOf",i.progressionResources),m(5),C("ngForOf",i.specialtyItems),m(5),C("ngForOf",i.equipment))},directives:[di,Ra],styles:['.resources[_ngcontent-%COMP%]{white-space:pre}.resourcesView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:25%;grid-template-rows:100%;justify-content:stretch;grid-template-areas:"resources progression specialty equipment"}.resources[_ngcontent-%COMP%]{grid-area:resources;border-right:1px solid rgba(0,0,0,.1)}.progression[_ngcontent-%COMP%]{grid-area:progression;border-right:1px solid rgba(0,0,0,.1)}.specialty[_ngcontent-%COMP%]{grid-area:specialty;border-right:1px solid rgba(0,0,0,.1)}.equipment[_ngcontent-%COMP%]{grid-area:equipment}.rightAligned[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{text-align:center}']}),t})();var ml=j(7206);let kG=(()=>{class t{constructor(e){this.globalService=e}redeemCode(e){var r=ml.AES.decrypt(e,"LaunchSecret!CLTRA71");0===r.toString(ml.enc.Utf8).length&&alert("Invalid code entered.");try{var a=JSON.parse(r.toString(ml.enc.Utf8));null!=a&&a.rewards.length>0&&((new Date).getTime()>new Date(a.expirationDate).getTime()?alert("This code has expired."):this.globalService.globalVar.redeemedCodes.some(s=>s.codeValue===r.toString(ml.enc.Utf8))?alert("This code has already been redeemed."):(a.rewards.forEach(s=>{var o=this.globalService.globalVar.resources.find(l=>l.name===s.name);null!=o?o.amount+=s.amount:this.globalService.globalVar.resources.push(s)}),a.codeValue=r.toString(ml.enc.Utf8),this.globalService.globalVar.redeemedCodes.push(a)))}catch(s){console.log(s),alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}}}return t.\u0275fac=function(e){return new(e||t)(Pe(bt))},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),AG=(()=>{class t{constructor(){}setupRewards(){this.redeemableCode=new yh,this.redeemableCode.expirationDate=new Date("2022-07-04"),this.redeemableCode.rewards.push(new _e("Coins",3e3,se.Resources))}createCode(){this.setupRewards();var i=JSON.stringify(this.redeemableCode);return ml.AES.encrypt(i,"LaunchSecret!CLTRA71").toString()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=He({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),EG=(()=>{class t{constructor(e,i,r,a,s,o,l){this.globalService=e,this.themeService=i,this.lookupService=r,this.codeRedemptionService=a,this.codeCreationService=s,this.deploymentService=o,this.componentCommunicationService=l,this.raceDisplayInfoEnum=Ir,this.skipDrawRaceToggle=()=>{this.skipDrawRace=!this.skipDrawRace,this.globalService.globalVar.settings.set("skipDrawRace",this.skipDrawRace)},this.finishTrainingBeforeSwitchingToggle=()=>{this.finishTrainingBeforeSwitching=!this.finishTrainingBeforeSwitching,this.globalService.globalVar.settings.set("finishTrainingBeforeSwitching",this.finishTrainingBeforeSwitching)},this.hideTipsToggle=()=>{this.hideTips=!this.hideTips,this.globalService.globalVar.settings.set("hideTips",this.hideTips)},this.useNumbersForCircuitRankToggle=()=>{this.useNumbersForCircuitRank=!this.useNumbersForCircuitRank,this.globalService.globalVar.settings.set("useNumbersForCircuitRank",this.useNumbersForCircuitRank)}}ngOnInit(){this.componentCommunicationService.setNewView(At.settings),this.deploymentService.codeCreationMode&&console.log(this.codeCreationService.createCode()),this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1);var e=this.globalService.globalVar.settings.get("skipDrawRace");this.skipDrawRace=void 0!==e&&e,this.skipDrawRacePopoverText="Turn on to immediately skip to the end of any race.";var i=this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching");this.finishTrainingBeforeSwitching=void 0!==i&&i,this.finishTrainingBeforeSwitchingPopoverText="Turn on to wait until finishing your current training before switching to the next training you select.";var r=this.globalService.globalVar.settings.get("raceDisplayInfo");this.raceDisplayInfo=this.getRaceDisplayInfoName(void 0===r?Ir.both:r),this.raceDisplayInfoPopoverText="Choose how to view races. Draw only shows the visual aspect, text only shows the textual updates, and both shows both. Both is default.";var a=this.globalService.globalVar.settings.get("hideTips");this.hideTips=void 0!==a&&a,this.hideTipsPopoverText="Stop displaying tips in the footer.";var s=this.globalService.globalVar.settings.get("useNumbersForCircuitRank");this.useNumbersForCircuitRank=void 0!==s&&s,this.useNumbersForCircuitRankPopoverText="Use numbers instead of letters when displaying ranks."}SaveGame(){var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);this.importExportValue=i}LoadGame(){if(confirm("This will overwrite your existing game data. Continue?")){var e=LZString.decompressFromBase64(this.importExportValue),i=JSON.parse(e);this.globalService.globalVar=NT(Kn,i)}}saveRaceDisplayInfo(){this.globalService.globalVar.settings.set("raceDisplayInfo",this.raceDisplayInfo)}changeRaceDisplayInfo(e){this.globalService.globalVar.settings.set("raceDisplayInfo",e),this.raceDisplayInfo=this.getRaceDisplayInfoName(e)}changeTheme(e){var i=Hc;"White"===e&&(i=this.themeService.setWhiteTheme()),"Light"===e&&(i=this.themeService.setLightTheme()),"Twilight"===e&&(i=this.themeService.setTwilightTheme()),"Night"===e&&(i=this.themeService.setNightTheme()),this.globalService.globalVar.settings.set("theme",i),this.getThemeName()}getThemeName(){this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1)}getRaceDisplayInfoName(e){return e===Ir.both?"Both":e===Ir.text?"Text":e===Ir.draw?"Draw":""}enterRedemptionCode(){this.codeRedemptionService.redeemCode(this.enteredRedemptionCode)}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(al),E(Sn),E(kG),E(AG),E(BT),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-settings-view"]],decls:85,vars:13,consts:[[1,"settingsView"],[1,"info"],[1,"settingsGrid"],[1,"options"],[1,"s4Heading"],[1,"toggles"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","finishTraining",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","hideTips",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","useNumbersForCircuitRank",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave","ngbDropdown","",1,"d-inline-block",3,"ngbPopover"],[1,"bottomAligned"],["type","button","id","raceDisplayInfoDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","raceDisplayInfoDropdown"],["ngbDropdownItem","",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","themeDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","themeDropdown"],[1,"saveLoad"],[1,"importExportDiv"],["id","importExport","name","importExport","rows","10",3,"ngModel","ngModelChange"],[1,"importExportButtons"],[3,"click"],[1,"codeRedemption"],["for","codeRedemptionText"],["id","codeRedemptionText","type","text",1,"spaced","codeRedemptionInput",3,"ngModel","ngModelChange"],[1,"screenMarginLeft",3,"click"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"h2"),b(3,"Settings"),p()(),g(4,"div",2)(5,"div",3)(6,"span",4),b(7,"Options"),p(),H(8,"br"),g(9,"div",5)(10,"span",6)(11,"label")(12,"input",7),F("ngModelChange",function(a){return i.skipDrawRace=a})("input",function(){return i.skipDrawRaceToggle()}),p(),g(13,"span"),b(14,"Auto Skip Race Info"),p()()(),H(15,"br"),g(16,"span",6)(17,"label")(18,"input",8),F("ngModelChange",function(a){return i.finishTrainingBeforeSwitching=a})("input",function(){return i.finishTrainingBeforeSwitchingToggle()}),p(),g(19,"span"),b(20,"Finish Training Before Switching "),p()()(),H(21,"br"),g(22,"span",6)(23,"label")(24,"input",9),F("ngModelChange",function(a){return i.hideTips=a})("input",function(){return i.hideTipsToggle()}),p(),g(25,"span"),b(26,"Hide Tips"),p()()(),H(27,"br"),g(28,"span",6)(29,"label")(30,"input",10),F("ngModelChange",function(a){return i.useNumbersForCircuitRank=a})("input",function(){return i.useNumbersForCircuitRankToggle()}),p(),g(31,"span"),b(32,"Use Numbers For Circuit Rank"),p()()(),H(33,"br"),p(),g(34,"div",11)(35,"label",12),b(36,"Race Display Info:"),p(),g(37,"button",13),b(38),p(),g(39,"div",14)(40,"button",15),F("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.draw)}),b(41,"Draw"),p(),g(42,"button",15),F("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.text)}),b(43,"Text"),p(),g(44,"button",15),F("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.both)}),b(45,"Both"),p()()(),H(46,"br"),g(47,"div",16)(48,"label",12),b(49,"Theme:"),p(),g(50,"button",17),b(51),p(),g(52,"div",18)(53,"button",15),F("click",function(){return i.changeTheme("White")}),b(54,"White"),p(),g(55,"button",15),F("click",function(){return i.changeTheme("Light")}),b(56,"Light"),p(),g(57,"button",15),F("click",function(){return i.changeTheme("Twilight")}),b(58,"Twilight"),p(),g(59,"button",15),F("click",function(){return i.changeTheme("Night")}),b(60,"Night"),p()()()(),g(61,"div",19)(62,"span",4),b(63,"Save/Load"),p(),H(64,"br"),g(65,"div",20)(66,"textarea",21),F("ngModelChange",function(a){return i.importExportValue=a}),p(),g(67,"div",22)(68,"button",23),F("click",function(){return i.LoadGame()}),b(69," Import "),p(),g(70,"button",23),F("click",function(){return i.SaveGame()}),b(71," Export "),p()()(),H(72,"br")(73,"br"),g(74,"div")(75,"span",4),b(76,"Code Redemption"),p(),H(77,"br")(78,"br"),g(79,"div",24)(80,"label",25),b(81,"Code: "),p(),g(82,"input",26),F("ngModelChange",function(a){return i.enteredRedemptionCode=a}),p(),g(83,"button",27),F("click",function(){return i.enterRedemptionCode()}),b(84," Enter "),p()()()()()()),2&e&&(m(10),C("ngbPopover",i.skipDrawRacePopoverText),m(2),C("ngModel",i.skipDrawRace),m(4),C("ngbPopover",i.finishTrainingBeforeSwitchingPopoverText),m(2),C("ngModel",i.finishTrainingBeforeSwitching),m(4),C("ngbPopover",i.finishTrainingBeforeSwitchingPopoverText),m(2),C("ngModel",i.hideTips),m(4),C("ngbPopover",i.finishTrainingBeforeSwitchingPopoverText),m(2),C("ngModel",i.useNumbersForCircuitRank),m(4),C("ngbPopover",i.raceDisplayInfoPopoverText),m(4),ht(i.raceDisplayInfo),m(13),ht(i.currentTheme),m(15),C("ngModel",i.importExportValue),m(16),C("ngModel",i.enteredRedemptionCode))},directives:[Ra,Ud,yc,Mc,gl,Gm,Nh,Hm,Zo],styles:['.settingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}#raceDisplayInfoDropdown[_ngcontent-%COMP%], #themeDropdown[_ngcontent-%COMP%]{border:1px solid;border-color:var(--background-tertiary)}.bottomAligned[_ngcontent-%COMP%]{vertical-align:bottom}.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". options saveLoad ."}.options[_ngcontent-%COMP%]{grid-area:options}.saveLoad[_ngcontent-%COMP%]{grid-area:saveLoad}#importExport[_ngcontent-%COMP%]{width:100%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.importExportButtons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.codeRedemption[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.codeRedemptionInput[_ngcontent-%COMP%]{flex:1}']}),t})();function PG(t,n){if(1&t&&(g(0,"div",10)(1,"span"),b(2),p()()),2&t){const e=x();m(2),de("Tip: ",e.randomTip,"")}}let IG=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.componentCommunicationService=a}ngOnInit(){var e=this;this.displayTip=!this.globalService.globalVar.settings.get("hideTips"),this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.randomTip=this.lookupService.getRandomTip(),this.totalTime=0,this.maxTipTime=60,this.gameLoopService.gameUpdateEvent.subscribe(function(){var i=zs(function*(r){e.displayTip=!e.globalService.globalVar.settings.get("hideTips"),e.totalTime+=r,e.totalTime>=e.maxTipTime&&(e.totalTime=0,e.randomTip=e.lookupService.getRandomTip())});return function(r){return i.apply(this,arguments)}}())}openFAQs(){this.componentCommunicationService.setNewView(At.faqs)}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(zi),E(Sn),E(wi))},t.\u0275cmp=Je({type:t,selectors:[["app-footer"]],decls:20,vars:1,consts:[[1,"footerView"],[1,"gridContainer"],[1,"area1"],["class","area2 keyword",4,"ngIf"],[1,"area3","keyword","rightAlign"],[1,"faqs",3,"click"],["href","https://www.reddit.com/message/compose/?to=Jaghancement","rel","noopener noreferrer","target","_blank"],["href","mailto:CulturaIdle@gmail.com"],[1,"area4","keyword","rightAlign"],["href","https://www.buymeacoffee.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],[1,"area2","keyword"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1)(2,"div",2),H(3,"span"),p(),I(4,PG,3,1,"div",3),g(5,"div",4)(6,"span")(7,"span",5),F("click",function(){return i.openFAQs()}),b(8,"FAQs"),p(),b(9," | "),g(10,"a",6),b(11,"Reddit"),p(),b(12," | "),g(13,"a",7),b(14,"Email"),p()()(),g(15,"div",8)(16,"span")(17,"a",9),b(18,"Donate"),p(),b(19," | Patreon"),p()()()()),2&e&&(m(4),C("ngIf",i.displayTip))},directives:[Kt],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 1fr 20% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". area1 area2 area3 ." ". area1 area2 area4 ."}a[_ngcontent-%COMP%], .faqs[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.faqs[_ngcontent-%COMP%]{cursor:pointer}.faqs[_ngcontent-%COMP%]:hover{text-decoration:underline}.area1[_ngcontent-%COMP%]{grid-area:area1;justify-self:stretch}.area2[_ngcontent-%COMP%]{grid-area:area2;justify-self:stretch}.area3[_ngcontent-%COMP%]{grid-area:area3;justify-self:stretch}.area4[_ngcontent-%COMP%]{grid-area:area4;justify-self:stretch}.rightAlign[_ngcontent-%COMP%]{text-align:right}']}),t})();const NG=["tutorialContent"];function OG(t,n){1&t&&(g(0,"div",18),H(1,"app-barn-view"),p())}function FG(t,n){1&t&&(g(0,"div",19),H(1,"app-race-selection-view"),p())}function VG(t,n){1&t&&(g(0,"div",20),H(1,"app-animals-view"),p())}function BG(t,n){1&t&&(g(0,"div",21),H(1,"app-decks-view"),p())}function LG(t,n){1&t&&(g(0,"div",22),H(1,"app-shop-view"),p())}function UG(t,n){1&t&&(g(0,"div",23),H(1,"app-incubator-view"),p())}function HG(t,n){1&t&&(g(0,"div",24),H(1,"app-training-track-view"),p())}function GG(t,n){1&t&&(g(0,"div",25),H(1,"app-faq-view"),p())}function jG(t,n){1&t&&(g(0,"div",26),H(1,"app-stats-view"),p())}function zG(t,n){1&t&&(g(0,"div",27),H(1,"app-resources-view"),p())}function $G(t,n){1&t&&(g(0,"div",28),H(1,"app-settings-view"),p())}function WG(t,n){if(1&t){const e=be();g(0,"div",29)(1,"div",30)(2,"h4",31),b(3,"Tutorial"),p(),g(4,"button",32),F("click",function(){return K(e),x().closeTutorialModal()}),b(5,"X"),p()(),H(6,"div",33),g(7,"div",34)(8,"span")(9,"button",35),F("click",function(){return K(e),x().skipTutorial()}),b(10,"Skip Tutorial"),p()(),g(11,"span")(12,"button",35),F("click",function(){return K(e),x().continueTutorial()}),b(13,"Continue"),p()()()()}if(2&t){const e=x();m(6),C("innerHTML",e.tutorialText,or)}}let qG=(()=>{class t{constructor(e,i,r,a,s,o){this.ref=e,this.globalService=i,this.modalService=r,this.tutorialService=a,this.sanitizer=s,this.gameLoopService=o,this.navigationEnum=At,this.activeView=At.barn}ngOnInit(){var e=this;this.openTutorialModal();var i=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=zs(function*(a){e.globalService.globalVar.tutorials.showTutorial&&e.openTutorialModal(),e.globalService.globalVar.tutorials.tutorialCompleted&&i.unsubscribe()});return function(a){return r.apply(this,arguments)}}())}changeView(e){this.activeView=e}openTutorialModal(){if(!this.globalService.globalVar.tutorials.tutorialCompleted){var e=this.tutorialService.getTutorialState(this.globalService.globalVar.tutorials.currentTutorialId);this.activeView===e.associatedTab&&(this.tutorialText=this.sanitizer.sanitize(Qt.HTML,this.sanitizer.bypassSecurityTrustHtml(e.tutorialText+"\n")),this.globalService.globalVar.tutorials.showTutorial=!1,5===e.id&&(this.globalService.globalVar.tutorials.currentTutorialId+=1),this.modalService.open(this.tutorialContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(i=>{this.closeTutorialModal()},i=>{this.closeTutorialModal()}))}}closeTutorialModal(){this.modalService.dismissAll()}skipTutorial(){this.tutorialService.skipTutorial(),this.closeTutorialModal()}continueTutorial(){this.closeTutorialModal()}}return t.\u0275fac=function(e){return new(e||t)(E(dr),E(bt),E(vs),E(LT),E(bc),E(zi))},t.\u0275cmp=Je({type:t,selectors:[["app-main"]],viewQuery:function(e,i){if(1&e&&Ba(NG,7),2&e){let r;cn(r=un())&&(i.tutorialContent=r.first)}},decls:21,vars:11,consts:[[1,"gridContainer"],[1,"headerArea"],[1,"mainArea"],["id","BarnView","class","mainView",4,"ngIf"],["id","RaceSelectionView","class","mainView",4,"ngIf"],["id","AnimalsView","class","mainView",4,"ngIf"],["id","DecksView","class","mainView",4,"ngIf"],["id","ShopView","class","mainView",4,"ngIf"],["id","IncubatorView","class","mainView",4,"ngIf"],["id","TrainingTrackView","class","mainView",4,"ngIf"],["id","FaqsView","class","mainView",4,"ngIf"],["id","StatsView","class","mainView",4,"ngIf"],["id","ResourcesView","class","mainView",4,"ngIf"],["id","SettingsView","class","mainView",4,"ngIf"],[1,"navArea"],[3,"viewChanged"],[1,"footerArea"],["tutorialContent",""],["id","BarnView",1,"mainView"],["id","RaceSelectionView",1,"mainView"],["id","AnimalsView",1,"mainView"],["id","DecksView",1,"mainView"],["id","ShopView",1,"mainView"],["id","IncubatorView",1,"mainView"],["id","TrainingTrackView",1,"mainView"],["id","FaqsView",1,"mainView"],["id","StatsView",1,"mainView"],["id","ResourcesView",1,"mainView"],["id","SettingsView",1,"mainView"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"]],template:function(e,i){1&e&&(g(0,"div",0)(1,"div",1),H(2,"app-header"),p(),g(3,"div",2),I(4,OG,2,0,"div",3),I(5,FG,2,0,"div",4),I(6,VG,2,0,"div",5),I(7,BG,2,0,"div",6),I(8,LG,2,0,"div",7),I(9,UG,2,0,"div",8),I(10,HG,2,0,"div",9),I(11,GG,2,0,"div",10),I(12,jG,2,0,"div",11),I(13,zG,2,0,"div",12),I(14,$G,2,0,"div",13),p(),g(15,"div",14)(16,"app-navigation",15),F("viewChanged",function(a){return i.changeView(a)}),p()(),g(17,"div",16),H(18,"app-footer"),p()(),I(19,WG,14,1,"ng-template",null,17,Ot)),2&e&&(m(4),C("ngIf",i.activeView===i.navigationEnum.barn),m(1),C("ngIf",i.activeView===i.navigationEnum.raceselection),m(1),C("ngIf",i.activeView===i.navigationEnum.animals),m(1),C("ngIf",i.activeView===i.navigationEnum.decks),m(1),C("ngIf",i.activeView===i.navigationEnum.shop),m(1),C("ngIf",i.activeView===i.navigationEnum.incubator),m(1),C("ngIf",i.activeView===i.navigationEnum.trainingtrack),m(1),C("ngIf",i.activeView===i.navigationEnum.faqs),m(1),C("ngIf",i.activeView===i.navigationEnum.stats),m(1),C("ngIf",i.activeView===i.navigationEnum.resources),m(1),C("ngIf",i.activeView===i.navigationEnum.settings))},directives:[W8,Kt,c6,bH,O7,z7,iG,CG,hM,wG,SG,RG,EG,uM,IG],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100vh;grid-template-columns:88% 12%;grid-template-rows:6% 88% 6%;justify-content:stretch;grid-template-areas:"header header" "main  nav" "footer footer"}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;position:fixed;top:0;left:0;bottom:0;right:0;grid-template-columns:88% 12%;grid-template-rows:auto 1fr auto;justify-content:stretch;grid-template-areas:"header header" "main  main" "footer footer"}.navArea[_ngcontent-%COMP%]{display:none}}.mainArea[_ngcontent-%COMP%]{grid-area:main;justify-self:stretch;background-color:var(--background-default);color:var(--foreground-default);overflow:auto}.navArea[_ngcontent-%COMP%]{grid-area:nav;justify-self:stretch;background-color:var(--background-secondary);color:var(--foreground-default)}.footerArea[_ngcontent-%COMP%]{grid-area:footer;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.headerArea[_ngcontent-%COMP%]{grid-area:header;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.mainView[_ngcontent-%COMP%]{height:100%}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.rightAlign[_ngcontent-%COMP%]{float:right}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.spaceBetween[_ngcontent-%COMP%]{justify-content:space-between!important}']}),t})(),YG=(()=>{class t{constructor(e,i,r,a,s,o,l,c){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.specializationService=a,this.themeService=s,this.raceLogicService=o,this.deploymentService=l,this.versionControlService=c,this.title="Cultura",this.newGame=!0,this.saveTime=0,this.saveFrequency=20,this.racingSaveFrequency=120}ngOnInit(){var e=this,i=localStorage.getItem("gameData");if(null!=i){this.newGame=!1;var r=LZString.decompressFromBase64(i),a=JSON.parse(r);this.globalService.globalVar=NT(Kn,a),this.loadStartup()}this.deploymentService.setDevMode();var o=this.deploymentService.devModeActive;(this.newGame||this.deploymentService.forceStartNewGame)&&this.globalService.initializeGlobalVariables(),o&&(this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.devModeInitialize(80)),this.versionControlService.updatePlayerVersion(),this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=zs(function*(d){e.gameCheckup(d),e.saveTime+=d;var h=e.saveFrequency;e.globalService.globalVar.userIsRacing&&(h=e.racingSaveFrequency),e.saveTime>=h&&(e.saveTime=0,e.saveGame());performance.now()});return function(d){return u.apply(this,arguments)}}()),this.gameLoopService.Update()}gameCheckup(e){if(null!=this.globalService.globalVar.animals){var i=this.globalService.globalVar.animals.filter(a=>a.isAvailable&&null!=a.currentTraining);i.length>0&&i.forEach(a=>{var s;if(null!=a.currentTraining)for(a.currentTraining.timeTrained+=e,this.specializationService.handleAttractionRevenue(e,a);null!==a.currentTraining&&a.currentTraining.timeTrained>=a.currentTraining.timeToComplete;){var o=this.globalService.globalVar.barns.find(u=>u.barnNumber===a.associatedBarnNumber),l=0;null!=o&&o.barnUpgrades.specialization===rn.BreedingGrounds&&(l=o.barnUpgrades.specializationLevel),null!=o&&o.barnUpgrades.specialization===rn.ResearchCenter?this.specializationService.handleResearchCenterStatIncrease(a,o):a.increaseStatsFromCurrentTraining(),this.globalService.calculateAnimalRacingStats(a);var c=this.lookupService.getTrainingBreedGaugeIncrease(l,a);this.globalService.IncreaseAnimalBreedGauge(a,c),a.currentTraining.timeTrained-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining<=0&&(a.currentTraining=null),null!=a.queuedTraining&&(null!==a.currentTraining&&a.currentTraining.trainingTimeRemaining>0&&(a.queuedTraining.timeTrained+=null===(s=a.currentTraining)||void 0===s?void 0:s.timeTrained),a.currentTraining=a.queuedTraining,a.queuedTraining=null)}});var r=this.globalService.globalVar.incubator;null!=r&&null!=r.assignedAnimal&&null!=r.assignedTrait&&(r.timeTrained+=e,r.timeTrained>=r.timeToComplete&&(r.assignedAnimal.trait=r.assignedTrait,this.globalService.calculateAnimalRacingStats(r.assignedAnimal),r.assignedAnimal.canTrain=!0,r.timeTrained=0,r.assignedAnimal=null,r.assignedTrait=null)),this.handleFreeRaceTimer(e)}}handleFreeRaceTimer(e){if(this.globalService.globalVar.freeRaceTimePeriodCounter+=e,!this.globalService.globalVar.userIsRacing){var i=300,r=this.globalService.globalVar.modifiers.find(o=>"freeRacesTimePeriodModifier"===o.text);void 0!==r&&(i=r.value);var a=3600,s=this.globalService.globalVar.modifiers.find(o=>"autoFreeRacesMaxIdleTimePeriodModifier"===o.text);for(void 0!==s&&(a=s.value);this.globalService.globalVar.freeRaceTimePeriodCounter>=i&&a>0;)this.globalService.globalVar.freeRaceTimePeriodCounter>a&&(this.globalService.globalVar.freeRaceTimePeriodCounter=a),this.globalService.globalVar.freeRaceTimePeriodCounter-=i,a-=i,this.globalService.globalVar.freeRaceCounter=0,this.globalService.globalVar.autoFreeRaceCounter=0}}handleAutoFreeRace(e){var i=this.lookupService.getResourceByName("Team Manager");if(null==i&&(i=0),0!==i&&this.globalService.globalVar.animalDecks.some(d=>d.autoRunFreeRace)){var r=this.globalService.globalVar.animalDecks.find(d=>d.autoRunFreeRace);if(null!=r)for(var a=i-this.globalService.globalVar.autoFreeRaceCounter,s=this.lookupService.getTotalFreeRacesPerPeriod(),o=0;o<a;o++){if(this.globalService.globalVar.freeRaceCounter>=s)return;this.globalService.globalVar.autoFreeRaceCounter+=1,this.globalService.globalVar.freeRaceCounter+=1;var l=this.globalService.generateFreeRace(),c=!0;l.raceLegs.forEach(d=>{(null==r?void 0:r.selectedAnimals.some(h=>h.raceCourseType===d.courseType))||(c=!1)}),c&&this.raceLogicService.runRace(l)}}}saveGame(){if("undefined"!=typeof Worker){const r=new Worker(j.tu(new URL(j.p+j.u(151),j.b)));r.onmessage=({data:a})=>{localStorage.setItem("gameData",a),r.terminate()},r.postMessage(this.globalService.globalVar)}else{var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);localStorage.setItem("gameData",i)}}loadStartup(){var e=this.globalService.globalVar.settings.get("theme");null!=e&&this.themeService.setActiveTheme(e)}}return t.\u0275fac=function(e){return new(e||t)(E(bt),E(zi),E(Sn),E(OT),E(al),E(FT),E(BT),E(VT))},t.\u0275cmp=Je({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"grayTheme"]],template:function(e,i){1&e&&(g(0,"div",0),H(1,"app-main"),p(),H(2,"router-outlet"))},directives:[qG,X0],styles:[""]}),t})(),XG=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=on({type:t,bootstrap:[YG]}),t.\u0275inj=Jt({providers:[bt,al],imports:[[UO,pB,U8,er,TS,eV]]}),t})();(function _I(){IC=!1})(),BO().bootstrapModule(XG).catch(t=>console.error(t))},7466:function(me,Ce,j){var z;me.exports=(z=j(7585),j(8319),j(9493),j(7865),j(3057),function(){var B=z,ne=B.lib.BlockCipher,le=B.algo,Y=[],ee=[],k=[],T=[],N=[],R=[],A=[],M=[],O=[],L=[];!function(){for(var V=[],G=0;G<256;G++)V[G]=G<128?G<<1:G<<1^283;var oe=0,Z=0;for(G=0;G<256;G++){var re=Z^Z<<1^Z<<2^Z<<3^Z<<4;Y[oe]=re=re>>>8^255&re^99,ee[re]=oe;var Re,ae=V[oe],ye=V[ae],pe=V[ye];k[oe]=(Re=257*V[re]^16843008*re)<<24|Re>>>8,T[oe]=Re<<16|Re>>>16,N[oe]=Re<<8|Re>>>24,R[oe]=Re,A[re]=(Re=16843009*pe^65537*ye^257*ae^16843008*oe)<<24|Re>>>8,M[re]=Re<<16|Re>>>16,O[re]=Re<<8|Re>>>24,L[re]=Re,oe?(oe=ae^V[V[V[pe^ae]]],Z^=V[V[Z]]):oe=Z=1}}();var ie=[0,1,2,4,8,16,32,64,128,27,54],te=le.AES=ne.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var G=this._keyPriorReset=this._key,oe=G.words,Z=G.sigBytes/4,ae=4*((this._nRounds=Z+6)+1),ye=this._keySchedule=[],pe=0;pe<ae;pe++)pe<Z?ye[pe]=oe[pe]:(V=ye[pe-1],pe%Z?Z>6&&pe%Z==4&&(V=Y[V>>>24]<<24|Y[V>>>16&255]<<16|Y[V>>>8&255]<<8|Y[255&V]):(V=Y[(V=V<<8|V>>>24)>>>24]<<24|Y[V>>>16&255]<<16|Y[V>>>8&255]<<8|Y[255&V],V^=ie[pe/Z|0]<<24),ye[pe]=ye[pe-Z]^V);for(var Re=this._invKeySchedule=[],Ie=0;Ie<ae;Ie++){if(pe=ae-Ie,Ie%4)var V=ye[pe];else V=ye[pe-4];Re[Ie]=Ie<4||pe<=4?V:A[Y[V>>>24]]^M[Y[V>>>16&255]]^O[Y[V>>>8&255]]^L[Y[255&V]]}}},encryptBlock:function(V,G){this._doCryptBlock(V,G,this._keySchedule,k,T,N,R,Y)},decryptBlock:function(V,G){var oe=V[G+1];V[G+1]=V[G+3],V[G+3]=oe,this._doCryptBlock(V,G,this._invKeySchedule,A,M,O,L,ee),oe=V[G+1],V[G+1]=V[G+3],V[G+3]=oe},_doCryptBlock:function(V,G,oe,Z,re,ae,ye,pe){for(var Re=this._nRounds,Ie=V[G]^oe[0],ce=V[G+1]^oe[1],Te=V[G+2]^oe[2],ke=V[G+3]^oe[3],De=4,qe=1;qe<Re;qe++){var Ae=Z[Ie>>>24]^re[ce>>>16&255]^ae[Te>>>8&255]^ye[255&ke]^oe[De++],yt=Z[ce>>>24]^re[Te>>>16&255]^ae[ke>>>8&255]^ye[255&Ie]^oe[De++],Nt=Z[Te>>>24]^re[ke>>>16&255]^ae[Ie>>>8&255]^ye[255&ce]^oe[De++],ve=Z[ke>>>24]^re[Ie>>>16&255]^ae[ce>>>8&255]^ye[255&Te]^oe[De++];Ie=Ae,ce=yt,Te=Nt,ke=ve}Ae=(pe[Ie>>>24]<<24|pe[ce>>>16&255]<<16|pe[Te>>>8&255]<<8|pe[255&ke])^oe[De++],yt=(pe[ce>>>24]<<24|pe[Te>>>16&255]<<16|pe[ke>>>8&255]<<8|pe[255&Ie])^oe[De++],Nt=(pe[Te>>>24]<<24|pe[ke>>>16&255]<<16|pe[Ie>>>8&255]<<8|pe[255&ce])^oe[De++],ve=(pe[ke>>>24]<<24|pe[Ie>>>16&255]<<16|pe[ce>>>8&255]<<8|pe[255&Te])^oe[De++],V[G]=Ae,V[G+1]=yt,V[G+2]=Nt,V[G+3]=ve},keySize:8});B.AES=ne._createHelper(te)}(),z.AES)},3057:function(me,Ce,j){var X,ne,le,Y,ee,k,N,A,M,L,ie,te,G,Z,ae,ye,Re,Ie,z;me.exports=(z=j(7585),j(7865),void(z.lib.Cipher||(X=z,ne=X.lib,le=ne.Base,Y=ne.WordArray,ee=ne.BufferedBlockAlgorithm,k=X.enc,N=k.Base64,A=X.algo.EvpKDF,M=ne.Cipher=ee.extend({cfg:le.extend(),createEncryptor:function(ce,Te){return this.create(this._ENC_XFORM_MODE,ce,Te)},createDecryptor:function(ce,Te){return this.create(this._DEC_XFORM_MODE,ce,Te)},init:function(ce,Te,ke){this.cfg=this.cfg.extend(ke),this._xformMode=ce,this._key=Te,this.reset()},reset:function(){ee.reset.call(this),this._doReset()},process:function(ce){return this._append(ce),this._process()},finalize:function(ce){return ce&&this._append(ce),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ce(Te){return"string"==typeof Te?Ie:ye}return function(Te){return{encrypt:function(ke,De,qe){return ce(De).encrypt(Te,ke,De,qe)},decrypt:function(ke,De,qe){return ce(De).decrypt(Te,ke,De,qe)}}}}()}),ne.StreamCipher=M.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),L=X.mode={},ie=ne.BlockCipherMode=le.extend({createEncryptor:function(ce,Te){return this.Encryptor.create(ce,Te)},createDecryptor:function(ce,Te){return this.Decryptor.create(ce,Te)},init:function(ce,Te){this._cipher=ce,this._iv=Te}}),te=L.CBC=function(){var ce=ie.extend();function Te(ke,De,qe){var Ae,yt=this._iv;yt?(Ae=yt,this._iv=undefined):Ae=this._prevBlock;for(var Nt=0;Nt<qe;Nt++)ke[De+Nt]^=Ae[Nt]}return ce.Encryptor=ce.extend({processBlock:function(ke,De){var qe=this._cipher,Ae=qe.blockSize;Te.call(this,ke,De,Ae),qe.encryptBlock(ke,De),this._prevBlock=ke.slice(De,De+Ae)}}),ce.Decryptor=ce.extend({processBlock:function(ke,De){var qe=this._cipher,Ae=qe.blockSize,yt=ke.slice(De,De+Ae);qe.decryptBlock(ke,De),Te.call(this,ke,De,Ae),this._prevBlock=yt}}),ce}(),G=(X.pad={}).Pkcs7={pad:function(ce,Te){for(var ke=4*Te,De=ke-ce.sigBytes%ke,qe=De<<24|De<<16|De<<8|De,Ae=[],yt=0;yt<De;yt+=4)Ae.push(qe);var Nt=Y.create(Ae,De);ce.concat(Nt)},unpad:function(ce){ce.sigBytes-=255&ce.words[ce.sigBytes-1>>>2]}},ne.BlockCipher=M.extend({cfg:M.cfg.extend({mode:te,padding:G}),reset:function(){var ce;M.reset.call(this);var Te=this.cfg,ke=Te.iv,De=Te.mode;this._xformMode==this._ENC_XFORM_MODE?ce=De.createEncryptor:(ce=De.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==ce?this._mode.init(this,ke&&ke.words):(this._mode=ce.call(De,this,ke&&ke.words),this._mode.__creator=ce)},_doProcessBlock:function(ce,Te){this._mode.processBlock(ce,Te)},_doFinalize:function(){var ce,Te=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Te.pad(this._data,this.blockSize),ce=this._process(!0)):(ce=this._process(!0),Te.unpad(ce)),ce},blockSize:4}),Z=ne.CipherParams=le.extend({init:function(ce){this.mixIn(ce)},toString:function(ce){return(ce||this.formatter).stringify(this)}}),ae=(X.format={}).OpenSSL={stringify:function(ce){var ke=ce.ciphertext,De=ce.salt;return(De?Y.create([1398893684,1701076831]).concat(De).concat(ke):ke).toString(N)},parse:function(ce){var Te,ke=N.parse(ce),De=ke.words;return 1398893684==De[0]&&1701076831==De[1]&&(Te=Y.create(De.slice(2,4)),De.splice(0,4),ke.sigBytes-=16),Z.create({ciphertext:ke,salt:Te})}},ye=ne.SerializableCipher=le.extend({cfg:le.extend({format:ae}),encrypt:function(ce,Te,ke,De){De=this.cfg.extend(De);var qe=ce.createEncryptor(ke,De),Ae=qe.finalize(Te),yt=qe.cfg;return Z.create({ciphertext:Ae,key:ke,iv:yt.iv,algorithm:ce,mode:yt.mode,padding:yt.padding,blockSize:ce.blockSize,formatter:De.format})},decrypt:function(ce,Te,ke,De){return De=this.cfg.extend(De),Te=this._parse(Te,De.format),ce.createDecryptor(ke,De).finalize(Te.ciphertext)},_parse:function(ce,Te){return"string"==typeof ce?Te.parse(ce,this):ce}}),Re=(X.kdf={}).OpenSSL={execute:function(ce,Te,ke,De){De||(De=Y.random(8));var qe=A.create({keySize:Te+ke}).compute(ce,De),Ae=Y.create(qe.words.slice(Te),4*ke);return qe.sigBytes=4*Te,Z.create({key:qe,iv:Ae,salt:De})}},Ie=ne.PasswordBasedCipher=ye.extend({cfg:ye.cfg.extend({kdf:Re}),encrypt:function(ce,Te,ke,De){var qe=(De=this.cfg.extend(De)).kdf.execute(ke,ce.keySize,ce.ivSize);De.iv=qe.iv;var Ae=ye.encrypt.call(this,ce,Te,qe.key,De);return Ae.mixIn(qe),Ae},decrypt:function(ce,Te,ke,De){De=this.cfg.extend(De),Te=this._parse(Te,De.format);var qe=De.kdf.execute(ke,ce.keySize,ce.ivSize,Te.salt);return De.iv=qe.iv,ye.decrypt.call(this,ce,Te,qe.key,De)}}))))},7585:function(me,Ce,j){var z;me.exports=(z=z||function(B,X){var ne;if("undefined"!=typeof window&&window.crypto&&(ne=window.crypto),"undefined"!=typeof self&&self.crypto&&(ne=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(ne=globalThis.crypto),!ne&&"undefined"!=typeof window&&window.msCrypto&&(ne=window.msCrypto),!ne&&"undefined"!=typeof global&&global.crypto&&(ne=global.crypto),!ne)try{ne=j(2480)}catch(V){}var le=function(){if(ne){if("function"==typeof ne.getRandomValues)try{return ne.getRandomValues(new Uint32Array(1))[0]}catch(V){}if("function"==typeof ne.randomBytes)try{return ne.randomBytes(4).readInt32LE()}catch(V){}}throw new Error("Native crypto module could not be used to get secure random number.")},Y=Object.create||function(){function V(){}return function(G){var oe;return V.prototype=G,oe=new V,V.prototype=null,oe}}(),ee={},k=ee.lib={},T=k.Base={extend:function(V){var G=Y(this);return V&&G.mixIn(V),(!G.hasOwnProperty("init")||this.init===G.init)&&(G.init=function(){G.$super.init.apply(this,arguments)}),G.init.prototype=G,G.$super=this,G},create:function(){var V=this.extend();return V.init.apply(V,arguments),V},init:function(){},mixIn:function(V){for(var G in V)V.hasOwnProperty(G)&&(this[G]=V[G]);V.hasOwnProperty("toString")&&(this.toString=V.toString)},clone:function(){return this.init.prototype.extend(this)}},N=k.WordArray=T.extend({init:function(V,G){V=this.words=V||[],this.sigBytes=null!=G?G:4*V.length},toString:function(V){return(V||A).stringify(this)},concat:function(V){var G=this.words,oe=V.words,Z=this.sigBytes,re=V.sigBytes;if(this.clamp(),Z%4)for(var ae=0;ae<re;ae++)G[Z+ae>>>2]|=(oe[ae>>>2]>>>24-ae%4*8&255)<<24-(Z+ae)%4*8;else for(var pe=0;pe<re;pe+=4)G[Z+pe>>>2]=oe[pe>>>2];return this.sigBytes+=re,this},clamp:function(){var V=this.words,G=this.sigBytes;V[G>>>2]&=4294967295<<32-G%4*8,V.length=B.ceil(G/4)},clone:function(){var V=T.clone.call(this);return V.words=this.words.slice(0),V},random:function(V){for(var G=[],oe=0;oe<V;oe+=4)G.push(le());return new N.init(G,V)}}),R=ee.enc={},A=R.Hex={stringify:function(V){for(var G=V.words,oe=V.sigBytes,Z=[],re=0;re<oe;re++){var ae=G[re>>>2]>>>24-re%4*8&255;Z.push((ae>>>4).toString(16)),Z.push((15&ae).toString(16))}return Z.join("")},parse:function(V){for(var G=V.length,oe=[],Z=0;Z<G;Z+=2)oe[Z>>>3]|=parseInt(V.substr(Z,2),16)<<24-Z%8*4;return new N.init(oe,G/2)}},M=R.Latin1={stringify:function(V){for(var G=V.words,oe=V.sigBytes,Z=[],re=0;re<oe;re++)Z.push(String.fromCharCode(G[re>>>2]>>>24-re%4*8&255));return Z.join("")},parse:function(V){for(var G=V.length,oe=[],Z=0;Z<G;Z++)oe[Z>>>2]|=(255&V.charCodeAt(Z))<<24-Z%4*8;return new N.init(oe,G)}},O=R.Utf8={stringify:function(V){try{return decodeURIComponent(escape(M.stringify(V)))}catch(G){throw new Error("Malformed UTF-8 data")}},parse:function(V){return M.parse(unescape(encodeURIComponent(V)))}},L=k.BufferedBlockAlgorithm=T.extend({reset:function(){this._data=new N.init,this._nDataBytes=0},_append:function(V){"string"==typeof V&&(V=O.parse(V)),this._data.concat(V),this._nDataBytes+=V.sigBytes},_process:function(V){var G,oe=this._data,Z=oe.words,re=oe.sigBytes,ae=this.blockSize,pe=re/(4*ae),Re=(pe=V?B.ceil(pe):B.max((0|pe)-this._minBufferSize,0))*ae,Ie=B.min(4*Re,re);if(Re){for(var ce=0;ce<Re;ce+=ae)this._doProcessBlock(Z,ce);G=Z.splice(0,Re),oe.sigBytes-=Ie}return new N.init(G,Ie)},clone:function(){var V=T.clone.call(this);return V._data=this._data.clone(),V},_minBufferSize:0}),te=(k.Hasher=L.extend({cfg:T.extend(),init:function(V){this.cfg=this.cfg.extend(V),this.reset()},reset:function(){L.reset.call(this),this._doReset()},update:function(V){return this._append(V),this._process(),this},finalize:function(V){return V&&this._append(V),this._doFinalize()},blockSize:16,_createHelper:function(V){return function(G,oe){return new V.init(oe).finalize(G)}},_createHmacHelper:function(V){return function(G,oe){return new te.HMAC.init(V,oe).finalize(G)}}}),ee.algo={});return ee}(Math),z)},8319:function(me,Ce,j){var z,ne;me.exports=(z=j(7585),ne=z.lib.WordArray,z.enc.Base64={stringify:function(k){var T=k.words,N=k.sigBytes,R=this._map;k.clamp();for(var A=[],M=0;M<N;M+=3)for(var te=(T[M>>>2]>>>24-M%4*8&255)<<16|(T[M+1>>>2]>>>24-(M+1)%4*8&255)<<8|T[M+2>>>2]>>>24-(M+2)%4*8&255,V=0;V<4&&M+.75*V<N;V++)A.push(R.charAt(te>>>6*(3-V)&63));var G=R.charAt(64);if(G)for(;A.length%4;)A.push(G);return A.join("")},parse:function(k){var T=k.length,N=this._map,R=this._reverseMap;if(!R){R=this._reverseMap=[];for(var A=0;A<N.length;A++)R[N.charCodeAt(A)]=A}var M=N.charAt(64);if(M){var O=k.indexOf(M);-1!==O&&(T=O)}return function ee(k,T,N){for(var R=[],A=0,M=0;M<T;M++)if(M%4){var O=N[k.charCodeAt(M-1)]<<M%4*2,L=N[k.charCodeAt(M)]>>>6-M%4*2;R[A>>>2]|=(O|L)<<24-A%4*8,A++}return ne.create(R,A)}(k,T,R)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},z.enc.Base64)},4410:function(me,Ce,j){var z,ne;me.exports=(z=j(7585),ne=z.lib.WordArray,z.enc.Base64url={stringify:function(k,T=!0){var N=k.words,R=k.sigBytes,A=T?this._safe_map:this._map;k.clamp();for(var M=[],O=0;O<R;O+=3)for(var V=(N[O>>>2]>>>24-O%4*8&255)<<16|(N[O+1>>>2]>>>24-(O+1)%4*8&255)<<8|N[O+2>>>2]>>>24-(O+2)%4*8&255,G=0;G<4&&O+.75*G<R;G++)M.push(A.charAt(V>>>6*(3-G)&63));var oe=A.charAt(64);if(oe)for(;M.length%4;)M.push(oe);return M.join("")},parse:function(k,T=!0){var N=k.length,R=T?this._safe_map:this._map,A=this._reverseMap;if(!A){A=this._reverseMap=[];for(var M=0;M<R.length;M++)A[R.charCodeAt(M)]=M}var O=R.charAt(64);if(O){var L=k.indexOf(O);-1!==L&&(N=L)}return function ee(k,T,N){for(var R=[],A=0,M=0;M<T;M++)if(M%4){var O=N[k.charCodeAt(M-1)]<<M%4*2,L=N[k.charCodeAt(M)]>>>6-M%4*2;R[A>>>2]|=(O|L)<<24-A%4*8,A++}return ne.create(R,A)}(k,N,A)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},z.enc.Base64url)},9012:function(me,Ce,j){var z;me.exports=(z=j(7585),function(){var ne=z.lib.WordArray,le=z.enc;function ee(k){return k<<8&4278255360|k>>>8&16711935}le.Utf16=le.Utf16BE={stringify:function(k){for(var T=k.words,N=k.sigBytes,R=[],A=0;A<N;A+=2)R.push(String.fromCharCode(T[A>>>2]>>>16-A%4*8&65535));return R.join("")},parse:function(k){for(var T=k.length,N=[],R=0;R<T;R++)N[R>>>1]|=k.charCodeAt(R)<<16-R%2*16;return ne.create(N,2*T)}},le.Utf16LE={stringify:function(k){for(var T=k.words,N=k.sigBytes,R=[],A=0;A<N;A+=2){var M=ee(T[A>>>2]>>>16-A%4*8&65535);R.push(String.fromCharCode(M))}return R.join("")},parse:function(k){for(var T=k.length,N=[],R=0;R<T;R++)N[R>>>1]|=ee(k.charCodeAt(R)<<16-R%2*16);return ne.create(N,2*T)}}}(),z.enc.Utf16)},7865:function(me,Ce,j){var B,X,ne,le,Y,k,z;me.exports=(z=j(7585),j(5162),j(3764),le=(X=(B=z).lib).WordArray,k=(Y=B.algo).EvpKDF=(ne=X.Base).extend({cfg:ne.extend({keySize:4,hasher:Y.MD5,iterations:1}),init:function(T){this.cfg=this.cfg.extend(T)},compute:function(T,N){for(var R,A=this.cfg,M=A.hasher.create(),O=le.create(),L=O.words,ie=A.keySize,te=A.iterations;L.length<ie;){R&&M.update(R),R=M.update(T).finalize(N),M.reset();for(var V=1;V<te;V++)R=M.finalize(R),M.reset();O.concat(R)}return O.sigBytes=4*ie,O}}),B.EvpKDF=function(T,N,R){return k.create(R).compute(T,N)},z.EvpKDF)},1847:function(me,Ce,j){var z,le,ee;me.exports=(z=j(7585),j(3057),le=z.lib.CipherParams,ee=z.enc.Hex,z.format.Hex={stringify:function(N){return N.ciphertext.toString(ee)},parse:function(N){var R=ee.parse(N);return le.create({ciphertext:R})}},z.format.Hex)},3764:function(me,Ce,j){var z,Y;me.exports=(z=j(7585),Y=z.enc.Utf8,void(z.algo.HMAC=z.lib.Base.extend({init:function(T,N){T=this._hasher=new T.init,"string"==typeof N&&(N=Y.parse(N));var R=T.blockSize,A=4*R;N.sigBytes>A&&(N=T.finalize(N)),N.clamp();for(var M=this._oKey=N.clone(),O=this._iKey=N.clone(),L=M.words,ie=O.words,te=0;te<R;te++)L[te]^=1549556828,ie[te]^=909522486;M.sigBytes=O.sigBytes=A,this.reset()},reset:function(){var T=this._hasher;T.reset(),T.update(this._iKey)},update:function(T){return this._hasher.update(T),this},finalize:function(T){var N=this._hasher,R=N.finalize(T);return N.reset(),N.finalize(this._oKey.clone().concat(R))}})))},7206:function(me,Ce,j){var z;me.exports=(z=j(7585),j(401),j(7412),j(9012),j(8319),j(4410),j(9493),j(5162),j(1817),j(8769),j(3351),j(6787),j(1971),j(4973),j(3764),j(8812),j(7865),j(3057),j(4424),j(6635),j(3592),j(9354),j(7934),j(4413),j(4630),j(187),j(1691),j(3237),j(1847),j(7466),j(7243),j(486),j(8182),j(3544),z)},7412:function(me,Ce,j){var z;me.exports=(z=j(7585),function(){if("function"==typeof ArrayBuffer){var ne=z.lib.WordArray,le=ne.init,Y=ne.init=function(ee){if(ee instanceof ArrayBuffer&&(ee=new Uint8Array(ee)),(ee instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&ee instanceof Uint8ClampedArray||ee instanceof Int16Array||ee instanceof Uint16Array||ee instanceof Int32Array||ee instanceof Uint32Array||ee instanceof Float32Array||ee instanceof Float64Array)&&(ee=new Uint8Array(ee.buffer,ee.byteOffset,ee.byteLength)),ee instanceof Uint8Array){for(var k=ee.byteLength,T=[],N=0;N<k;N++)T[N>>>2]|=ee[N]<<24-N%4*8;le.call(this,T,k)}else le.apply(this,arguments)};Y.prototype=ne}}(),z.lib.WordArray)},9493:function(me,Ce,j){var z;me.exports=(z=j(7585),function(B){var X=z,ne=X.lib,le=ne.WordArray,Y=ne.Hasher,ee=X.algo,k=[];!function(){for(var O=0;O<64;O++)k[O]=4294967296*B.abs(B.sin(O+1))|0}();var T=ee.MD5=Y.extend({_doReset:function(){this._hash=new le.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(O,L){for(var ie=0;ie<16;ie++){var te=L+ie,V=O[te];O[te]=16711935&(V<<8|V>>>24)|4278255360&(V<<24|V>>>8)}var G=this._hash.words,oe=O[L+0],Z=O[L+1],re=O[L+2],ae=O[L+3],ye=O[L+4],pe=O[L+5],Re=O[L+6],Ie=O[L+7],ce=O[L+8],Te=O[L+9],ke=O[L+10],De=O[L+11],qe=O[L+12],Ae=O[L+13],yt=O[L+14],Nt=O[L+15],ve=G[0],xe=G[1],he=G[2],Se=G[3];ve=N(ve,xe,he,Se,oe,7,k[0]),Se=N(Se,ve,xe,he,Z,12,k[1]),he=N(he,Se,ve,xe,re,17,k[2]),xe=N(xe,he,Se,ve,ae,22,k[3]),ve=N(ve,xe,he,Se,ye,7,k[4]),Se=N(Se,ve,xe,he,pe,12,k[5]),he=N(he,Se,ve,xe,Re,17,k[6]),xe=N(xe,he,Se,ve,Ie,22,k[7]),ve=N(ve,xe,he,Se,ce,7,k[8]),Se=N(Se,ve,xe,he,Te,12,k[9]),he=N(he,Se,ve,xe,ke,17,k[10]),xe=N(xe,he,Se,ve,De,22,k[11]),ve=N(ve,xe,he,Se,qe,7,k[12]),Se=N(Se,ve,xe,he,Ae,12,k[13]),he=N(he,Se,ve,xe,yt,17,k[14]),ve=R(ve,xe=N(xe,he,Se,ve,Nt,22,k[15]),he,Se,Z,5,k[16]),Se=R(Se,ve,xe,he,Re,9,k[17]),he=R(he,Se,ve,xe,De,14,k[18]),xe=R(xe,he,Se,ve,oe,20,k[19]),ve=R(ve,xe,he,Se,pe,5,k[20]),Se=R(Se,ve,xe,he,ke,9,k[21]),he=R(he,Se,ve,xe,Nt,14,k[22]),xe=R(xe,he,Se,ve,ye,20,k[23]),ve=R(ve,xe,he,Se,Te,5,k[24]),Se=R(Se,ve,xe,he,yt,9,k[25]),he=R(he,Se,ve,xe,ae,14,k[26]),xe=R(xe,he,Se,ve,ce,20,k[27]),ve=R(ve,xe,he,Se,Ae,5,k[28]),Se=R(Se,ve,xe,he,re,9,k[29]),he=R(he,Se,ve,xe,Ie,14,k[30]),ve=A(ve,xe=R(xe,he,Se,ve,qe,20,k[31]),he,Se,pe,4,k[32]),Se=A(Se,ve,xe,he,ce,11,k[33]),he=A(he,Se,ve,xe,De,16,k[34]),xe=A(xe,he,Se,ve,yt,23,k[35]),ve=A(ve,xe,he,Se,Z,4,k[36]),Se=A(Se,ve,xe,he,ye,11,k[37]),he=A(he,Se,ve,xe,Ie,16,k[38]),xe=A(xe,he,Se,ve,ke,23,k[39]),ve=A(ve,xe,he,Se,Ae,4,k[40]),Se=A(Se,ve,xe,he,oe,11,k[41]),he=A(he,Se,ve,xe,ae,16,k[42]),xe=A(xe,he,Se,ve,Re,23,k[43]),ve=A(ve,xe,he,Se,Te,4,k[44]),Se=A(Se,ve,xe,he,qe,11,k[45]),he=A(he,Se,ve,xe,Nt,16,k[46]),ve=M(ve,xe=A(xe,he,Se,ve,re,23,k[47]),he,Se,oe,6,k[48]),Se=M(Se,ve,xe,he,Ie,10,k[49]),he=M(he,Se,ve,xe,yt,15,k[50]),xe=M(xe,he,Se,ve,pe,21,k[51]),ve=M(ve,xe,he,Se,qe,6,k[52]),Se=M(Se,ve,xe,he,ae,10,k[53]),he=M(he,Se,ve,xe,ke,15,k[54]),xe=M(xe,he,Se,ve,Z,21,k[55]),ve=M(ve,xe,he,Se,ce,6,k[56]),Se=M(Se,ve,xe,he,Nt,10,k[57]),he=M(he,Se,ve,xe,Re,15,k[58]),xe=M(xe,he,Se,ve,Ae,21,k[59]),ve=M(ve,xe,he,Se,ye,6,k[60]),Se=M(Se,ve,xe,he,De,10,k[61]),he=M(he,Se,ve,xe,re,15,k[62]),xe=M(xe,he,Se,ve,Te,21,k[63]),G[0]=G[0]+ve|0,G[1]=G[1]+xe|0,G[2]=G[2]+he|0,G[3]=G[3]+Se|0},_doFinalize:function(){var O=this._data,L=O.words,ie=8*this._nDataBytes,te=8*O.sigBytes;L[te>>>5]|=128<<24-te%32;var V=B.floor(ie/4294967296),G=ie;L[15+(te+64>>>9<<4)]=16711935&(V<<8|V>>>24)|4278255360&(V<<24|V>>>8),L[14+(te+64>>>9<<4)]=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8),O.sigBytes=4*(L.length+1),this._process();for(var oe=this._hash,Z=oe.words,re=0;re<4;re++){var ae=Z[re];Z[re]=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8)}return oe},clone:function(){var O=Y.clone.call(this);return O._hash=this._hash.clone(),O}});function N(O,L,ie,te,V,G,oe){var Z=O+(L&ie|~L&te)+V+oe;return(Z<<G|Z>>>32-G)+L}function R(O,L,ie,te,V,G,oe){var Z=O+(L&te|ie&~te)+V+oe;return(Z<<G|Z>>>32-G)+L}function A(O,L,ie,te,V,G,oe){var Z=O+(L^ie^te)+V+oe;return(Z<<G|Z>>>32-G)+L}function M(O,L,ie,te,V,G,oe){var Z=O+(ie^(L|~te))+V+oe;return(Z<<G|Z>>>32-G)+L}X.MD5=Y._createHelper(T),X.HmacMD5=Y._createHmacHelper(T)}(Math),z.MD5)},4424:function(me,Ce,j){var z;me.exports=(z=j(7585),j(3057),z.mode.CFB=function(){var B=z.lib.BlockCipherMode.extend();function X(ne,le,Y,ee){var k,T=this._iv;T?(k=T.slice(0),this._iv=void 0):k=this._prevBlock,ee.encryptBlock(k,0);for(var N=0;N<Y;N++)ne[le+N]^=k[N]}return B.Encryptor=B.extend({processBlock:function(ne,le){var Y=this._cipher,ee=Y.blockSize;X.call(this,ne,le,ee,Y),this._prevBlock=ne.slice(le,le+ee)}}),B.Decryptor=B.extend({processBlock:function(ne,le){var Y=this._cipher,ee=Y.blockSize,k=ne.slice(le,le+ee);X.call(this,ne,le,ee,Y),this._prevBlock=k}}),B}(),z.mode.CFB)},3592:function(me,Ce,j){var z;me.exports=(z=j(7585),j(3057),z.mode.CTRGladman=function(){var B=z.lib.BlockCipherMode.extend();function X(Y){if(255==(Y>>24&255)){var ee=Y>>16&255,k=Y>>8&255,T=255&Y;255===ee?(ee=0,255===k?(k=0,255===T?T=0:++T):++k):++ee,Y=0,Y+=ee<<16,Y+=k<<8,Y+=T}else Y+=1<<24;return Y}var le=B.Encryptor=B.extend({processBlock:function(Y,ee){var k=this._cipher,T=k.blockSize,N=this._iv,R=this._counter;N&&(R=this._counter=N.slice(0),this._iv=void 0),function ne(Y){return 0===(Y[0]=X(Y[0]))&&(Y[1]=X(Y[1])),Y}(R);var A=R.slice(0);k.encryptBlock(A,0);for(var M=0;M<T;M++)Y[ee+M]^=A[M]}});return B.Decryptor=le,B}(),z.mode.CTRGladman)},6635:function(me,Ce,j){var B,X,z;me.exports=(z=j(7585),j(3057),z.mode.CTR=(X=(B=z.lib.BlockCipherMode.extend()).Encryptor=B.extend({processBlock:function(ne,le){var Y=this._cipher,ee=Y.blockSize,k=this._iv,T=this._counter;k&&(T=this._counter=k.slice(0),this._iv=void 0);var N=T.slice(0);Y.encryptBlock(N,0),T[ee-1]=T[ee-1]+1|0;for(var R=0;R<ee;R++)ne[le+R]^=N[R]}}),B.Decryptor=X,B),z.mode.CTR)},7934:function(me,Ce,j){var B,z;me.exports=(z=j(7585),j(3057),z.mode.ECB=((B=z.lib.BlockCipherMode.extend()).Encryptor=B.extend({processBlock:function(X,ne){this._cipher.encryptBlock(X,ne)}}),B.Decryptor=B.extend({processBlock:function(X,ne){this._cipher.decryptBlock(X,ne)}}),B),z.mode.ECB)},9354:function(me,Ce,j){var B,X,z;me.exports=(z=j(7585),j(3057),z.mode.OFB=(X=(B=z.lib.BlockCipherMode.extend()).Encryptor=B.extend({processBlock:function(ne,le){var Y=this._cipher,ee=Y.blockSize,k=this._iv,T=this._keystream;k&&(T=this._keystream=k.slice(0),this._iv=void 0),Y.encryptBlock(T,0);for(var N=0;N<ee;N++)ne[le+N]^=T[N]}}),B.Decryptor=X,B),z.mode.OFB)},4413:function(me,Ce,j){var z;me.exports=(z=j(7585),j(3057),z.pad.AnsiX923={pad:function(B,X){var ne=B.sigBytes,le=4*X,Y=le-ne%le,ee=ne+Y-1;B.clamp(),B.words[ee>>>2]|=Y<<24-ee%4*8,B.sigBytes+=Y},unpad:function(B){B.sigBytes-=255&B.words[B.sigBytes-1>>>2]}},z.pad.Ansix923)},4630:function(me,Ce,j){var z;me.exports=(z=j(7585),j(3057),z.pad.Iso10126={pad:function(B,X){var ne=4*X,le=ne-B.sigBytes%ne;B.concat(z.lib.WordArray.random(le-1)).concat(z.lib.WordArray.create([le<<24],1))},unpad:function(B){B.sigBytes-=255&B.words[B.sigBytes-1>>>2]}},z.pad.Iso10126)},187:function(me,Ce,j){var z;me.exports=(z=j(7585),j(3057),z.pad.Iso97971={pad:function(B,X){B.concat(z.lib.WordArray.create([2147483648],1)),z.pad.ZeroPadding.pad(B,X)},unpad:function(B){z.pad.ZeroPadding.unpad(B),B.sigBytes--}},z.pad.Iso97971)},3237:function(me,Ce,j){var z;me.exports=(z=j(7585),j(3057),z.pad.NoPadding={pad:function(){},unpad:function(){}},z.pad.NoPadding)},1691:function(me,Ce,j){var z;me.exports=(z=j(7585),j(3057),z.pad.ZeroPadding={pad:function(B,X){var ne=4*X;B.clamp(),B.sigBytes+=ne-(B.sigBytes%ne||ne)},unpad:function(B){var X=B.words,ne=B.sigBytes-1;for(ne=B.sigBytes-1;ne>=0;ne--)if(X[ne>>>2]>>>24-ne%4*8&255){B.sigBytes=ne+1;break}}},z.pad.ZeroPadding)},8812:function(me,Ce,j){var B,X,ne,le,Y,k,T,z;me.exports=(z=j(7585),j(5162),j(3764),le=(X=(B=z).lib).WordArray,k=(Y=B.algo).HMAC,T=Y.PBKDF2=(ne=X.Base).extend({cfg:ne.extend({keySize:4,hasher:Y.SHA1,iterations:1}),init:function(N){this.cfg=this.cfg.extend(N)},compute:function(N,R){for(var A=this.cfg,M=k.create(A.hasher,N),O=le.create(),L=le.create([1]),ie=O.words,te=L.words,V=A.keySize,G=A.iterations;ie.length<V;){var oe=M.update(R).finalize(L);M.reset();for(var Z=oe.words,re=Z.length,ae=oe,ye=1;ye<G;ye++){ae=M.finalize(ae),M.reset();for(var pe=ae.words,Re=0;Re<re;Re++)Z[Re]^=pe[Re]}O.concat(oe),te[0]++}return O.sigBytes=4*V,O}}),B.PBKDF2=function(N,R,A){return T.create(A).compute(N,R)},z.PBKDF2)},3544:function(me,Ce,j){var z;me.exports=(z=j(7585),j(8319),j(9493),j(7865),j(3057),function(){var B=z,ne=B.lib.StreamCipher,Y=[],ee=[],k=[],T=B.algo.RabbitLegacy=ne.extend({_doReset:function(){var R=this._key.words,A=this.cfg.iv,M=this._X=[R[0],R[3]<<16|R[2]>>>16,R[1],R[0]<<16|R[3]>>>16,R[2],R[1]<<16|R[0]>>>16,R[3],R[2]<<16|R[1]>>>16],O=this._C=[R[2]<<16|R[2]>>>16,4294901760&R[0]|65535&R[1],R[3]<<16|R[3]>>>16,4294901760&R[1]|65535&R[2],R[0]<<16|R[0]>>>16,4294901760&R[2]|65535&R[3],R[1]<<16|R[1]>>>16,4294901760&R[3]|65535&R[0]];this._b=0;for(var L=0;L<4;L++)N.call(this);for(L=0;L<8;L++)O[L]^=M[L+4&7];if(A){var ie=A.words,te=ie[0],V=ie[1],G=16711935&(te<<8|te>>>24)|4278255360&(te<<24|te>>>8),oe=16711935&(V<<8|V>>>24)|4278255360&(V<<24|V>>>8),Z=G>>>16|4294901760&oe,re=oe<<16|65535&G;for(O[0]^=G,O[1]^=Z,O[2]^=oe,O[3]^=re,O[4]^=G,O[5]^=Z,O[6]^=oe,O[7]^=re,L=0;L<4;L++)N.call(this)}},_doProcessBlock:function(R,A){var M=this._X;N.call(this),Y[0]=M[0]^M[5]>>>16^M[3]<<16,Y[1]=M[2]^M[7]>>>16^M[5]<<16,Y[2]=M[4]^M[1]>>>16^M[7]<<16,Y[3]=M[6]^M[3]>>>16^M[1]<<16;for(var O=0;O<4;O++)Y[O]=16711935&(Y[O]<<8|Y[O]>>>24)|4278255360&(Y[O]<<24|Y[O]>>>8),R[A+O]^=Y[O]},blockSize:4,ivSize:2});function N(){for(var R=this._X,A=this._C,M=0;M<8;M++)ee[M]=A[M];for(A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<ee[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<ee[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<ee[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<ee[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<ee[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<ee[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<ee[6]>>>0?1:0)|0,this._b=A[7]>>>0<ee[7]>>>0?1:0,M=0;M<8;M++){var O=R[M]+A[M],L=65535&O,ie=O>>>16;k[M]=((L*L>>>17)+L*ie>>>15)+ie*ie^((4294901760&O)*O|0)+((65535&O)*O|0)}R[0]=k[0]+(k[7]<<16|k[7]>>>16)+(k[6]<<16|k[6]>>>16)|0,R[1]=k[1]+(k[0]<<8|k[0]>>>24)+k[7]|0,R[2]=k[2]+(k[1]<<16|k[1]>>>16)+(k[0]<<16|k[0]>>>16)|0,R[3]=k[3]+(k[2]<<8|k[2]>>>24)+k[1]|0,R[4]=k[4]+(k[3]<<16|k[3]>>>16)+(k[2]<<16|k[2]>>>16)|0,R[5]=k[5]+(k[4]<<8|k[4]>>>24)+k[3]|0,R[6]=k[6]+(k[5]<<16|k[5]>>>16)+(k[4]<<16|k[4]>>>16)|0,R[7]=k[7]+(k[6]<<8|k[6]>>>24)+k[5]|0}B.RabbitLegacy=ne._createHelper(T)}(),z.RabbitLegacy)},8182:function(me,Ce,j){var z;me.exports=(z=j(7585),j(8319),j(9493),j(7865),j(3057),function(){var B=z,ne=B.lib.StreamCipher,Y=[],ee=[],k=[],T=B.algo.Rabbit=ne.extend({_doReset:function(){for(var R=this._key.words,A=this.cfg.iv,M=0;M<4;M++)R[M]=16711935&(R[M]<<8|R[M]>>>24)|4278255360&(R[M]<<24|R[M]>>>8);var O=this._X=[R[0],R[3]<<16|R[2]>>>16,R[1],R[0]<<16|R[3]>>>16,R[2],R[1]<<16|R[0]>>>16,R[3],R[2]<<16|R[1]>>>16],L=this._C=[R[2]<<16|R[2]>>>16,4294901760&R[0]|65535&R[1],R[3]<<16|R[3]>>>16,4294901760&R[1]|65535&R[2],R[0]<<16|R[0]>>>16,4294901760&R[2]|65535&R[3],R[1]<<16|R[1]>>>16,4294901760&R[3]|65535&R[0]];for(this._b=0,M=0;M<4;M++)N.call(this);for(M=0;M<8;M++)L[M]^=O[M+4&7];if(A){var ie=A.words,te=ie[0],V=ie[1],G=16711935&(te<<8|te>>>24)|4278255360&(te<<24|te>>>8),oe=16711935&(V<<8|V>>>24)|4278255360&(V<<24|V>>>8),Z=G>>>16|4294901760&oe,re=oe<<16|65535&G;for(L[0]^=G,L[1]^=Z,L[2]^=oe,L[3]^=re,L[4]^=G,L[5]^=Z,L[6]^=oe,L[7]^=re,M=0;M<4;M++)N.call(this)}},_doProcessBlock:function(R,A){var M=this._X;N.call(this),Y[0]=M[0]^M[5]>>>16^M[3]<<16,Y[1]=M[2]^M[7]>>>16^M[5]<<16,Y[2]=M[4]^M[1]>>>16^M[7]<<16,Y[3]=M[6]^M[3]>>>16^M[1]<<16;for(var O=0;O<4;O++)Y[O]=16711935&(Y[O]<<8|Y[O]>>>24)|4278255360&(Y[O]<<24|Y[O]>>>8),R[A+O]^=Y[O]},blockSize:4,ivSize:2});function N(){for(var R=this._X,A=this._C,M=0;M<8;M++)ee[M]=A[M];for(A[0]=A[0]+1295307597+this._b|0,A[1]=A[1]+3545052371+(A[0]>>>0<ee[0]>>>0?1:0)|0,A[2]=A[2]+886263092+(A[1]>>>0<ee[1]>>>0?1:0)|0,A[3]=A[3]+1295307597+(A[2]>>>0<ee[2]>>>0?1:0)|0,A[4]=A[4]+3545052371+(A[3]>>>0<ee[3]>>>0?1:0)|0,A[5]=A[5]+886263092+(A[4]>>>0<ee[4]>>>0?1:0)|0,A[6]=A[6]+1295307597+(A[5]>>>0<ee[5]>>>0?1:0)|0,A[7]=A[7]+3545052371+(A[6]>>>0<ee[6]>>>0?1:0)|0,this._b=A[7]>>>0<ee[7]>>>0?1:0,M=0;M<8;M++){var O=R[M]+A[M],L=65535&O,ie=O>>>16;k[M]=((L*L>>>17)+L*ie>>>15)+ie*ie^((4294901760&O)*O|0)+((65535&O)*O|0)}R[0]=k[0]+(k[7]<<16|k[7]>>>16)+(k[6]<<16|k[6]>>>16)|0,R[1]=k[1]+(k[0]<<8|k[0]>>>24)+k[7]|0,R[2]=k[2]+(k[1]<<16|k[1]>>>16)+(k[0]<<16|k[0]>>>16)|0,R[3]=k[3]+(k[2]<<8|k[2]>>>24)+k[1]|0,R[4]=k[4]+(k[3]<<16|k[3]>>>16)+(k[2]<<16|k[2]>>>16)|0,R[5]=k[5]+(k[4]<<8|k[4]>>>24)+k[3]|0,R[6]=k[6]+(k[5]<<16|k[5]>>>16)+(k[4]<<16|k[4]>>>16)|0,R[7]=k[7]+(k[6]<<8|k[6]>>>24)+k[5]|0}B.Rabbit=ne._createHelper(T)}(),z.Rabbit)},486:function(me,Ce,j){var z;me.exports=(z=j(7585),j(8319),j(9493),j(7865),j(3057),function(){var B=z,ne=B.lib.StreamCipher,le=B.algo,Y=le.RC4=ne.extend({_doReset:function(){for(var T=this._key,N=T.words,R=T.sigBytes,A=this._S=[],M=0;M<256;M++)A[M]=M;M=0;for(var O=0;M<256;M++){var L=M%R,te=A[M];A[M]=A[O=(O+A[M]+(N[L>>>2]>>>24-L%4*8&255))%256],A[O]=te}this._i=this._j=0},_doProcessBlock:function(T,N){T[N]^=ee.call(this)},keySize:8,ivSize:0});function ee(){for(var T=this._S,N=this._i,R=this._j,A=0,M=0;M<4;M++){var O=T[N=(N+1)%256];T[N]=T[R=(R+T[N])%256],T[R]=O,A|=T[(T[N]+T[R])%256]<<24-8*M}return this._i=N,this._j=R,A}B.RC4=ne._createHelper(Y);var k=le.RC4Drop=Y.extend({cfg:Y.cfg.extend({drop:192}),_doReset:function(){Y._doReset.call(this);for(var T=this.cfg.drop;T>0;T--)ee.call(this)}});B.RC4Drop=ne._createHelper(k)}(),z.RC4)},4973:function(me,Ce,j){var z;me.exports=(z=j(7585),function(B){var X=z,ne=X.lib,le=ne.WordArray,Y=ne.Hasher,ee=X.algo,k=le.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),T=le.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),N=le.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),R=le.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),A=le.create([0,1518500249,1859775393,2400959708,2840853838]),M=le.create([1352829926,1548603684,1836072691,2053994217,0]),O=ee.RIPEMD160=Y.extend({_doReset:function(){this._hash=le.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(Z,re){for(var ae=0;ae<16;ae++){var ye=re+ae,pe=Z[ye];Z[ye]=16711935&(pe<<8|pe>>>24)|4278255360&(pe<<24|pe>>>8)}var Ae,yt,Nt,ve,xe,he,Se,fn,nt,Dt,Mt,Re=this._hash.words,Ie=A.words,ce=M.words,Te=k.words,ke=T.words,De=N.words,qe=R.words;for(he=Ae=Re[0],Se=yt=Re[1],fn=Nt=Re[2],nt=ve=Re[3],Dt=xe=Re[4],ae=0;ae<80;ae+=1)Mt=Ae+Z[re+Te[ae]]|0,Mt+=ae<16?L(yt,Nt,ve)+Ie[0]:ae<32?ie(yt,Nt,ve)+Ie[1]:ae<48?te(yt,Nt,ve)+Ie[2]:ae<64?V(yt,Nt,ve)+Ie[3]:G(yt,Nt,ve)+Ie[4],Mt=(Mt=oe(Mt|=0,De[ae]))+xe|0,Ae=xe,xe=ve,ve=oe(Nt,10),Nt=yt,yt=Mt,Mt=he+Z[re+ke[ae]]|0,Mt+=ae<16?G(Se,fn,nt)+ce[0]:ae<32?V(Se,fn,nt)+ce[1]:ae<48?te(Se,fn,nt)+ce[2]:ae<64?ie(Se,fn,nt)+ce[3]:L(Se,fn,nt)+ce[4],Mt=(Mt=oe(Mt|=0,qe[ae]))+Dt|0,he=Dt,Dt=nt,nt=oe(fn,10),fn=Se,Se=Mt;Mt=Re[1]+Nt+nt|0,Re[1]=Re[2]+ve+Dt|0,Re[2]=Re[3]+xe+he|0,Re[3]=Re[4]+Ae+Se|0,Re[4]=Re[0]+yt+fn|0,Re[0]=Mt},_doFinalize:function(){var Z=this._data,re=Z.words,ae=8*this._nDataBytes,ye=8*Z.sigBytes;re[ye>>>5]|=128<<24-ye%32,re[14+(ye+64>>>9<<4)]=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8),Z.sigBytes=4*(re.length+1),this._process();for(var pe=this._hash,Re=pe.words,Ie=0;Ie<5;Ie++){var ce=Re[Ie];Re[Ie]=16711935&(ce<<8|ce>>>24)|4278255360&(ce<<24|ce>>>8)}return pe},clone:function(){var Z=Y.clone.call(this);return Z._hash=this._hash.clone(),Z}});function L(Z,re,ae){return Z^re^ae}function ie(Z,re,ae){return Z&re|~Z&ae}function te(Z,re,ae){return(Z|~re)^ae}function V(Z,re,ae){return Z&ae|re&~ae}function G(Z,re,ae){return Z^(re|~ae)}function oe(Z,re){return Z<<re|Z>>>32-re}X.RIPEMD160=Y._createHelper(O),X.HmacRIPEMD160=Y._createHmacHelper(O)}(Math),z.RIPEMD160)},5162:function(me,Ce,j){var B,X,ne,le,ee,k,z;me.exports=(z=j(7585),ne=(X=(B=z).lib).WordArray,ee=[],k=B.algo.SHA1=(le=X.Hasher).extend({_doReset:function(){this._hash=new ne.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(T,N){for(var R=this._hash.words,A=R[0],M=R[1],O=R[2],L=R[3],ie=R[4],te=0;te<80;te++){if(te<16)ee[te]=0|T[N+te];else{var V=ee[te-3]^ee[te-8]^ee[te-14]^ee[te-16];ee[te]=V<<1|V>>>31}var G=(A<<5|A>>>27)+ie+ee[te];G+=te<20?1518500249+(M&O|~M&L):te<40?1859775393+(M^O^L):te<60?(M&O|M&L|O&L)-1894007588:(M^O^L)-899497514,ie=L,L=O,O=M<<30|M>>>2,M=A,A=G}R[0]=R[0]+A|0,R[1]=R[1]+M|0,R[2]=R[2]+O|0,R[3]=R[3]+L|0,R[4]=R[4]+ie|0},_doFinalize:function(){var T=this._data,N=T.words,R=8*this._nDataBytes,A=8*T.sigBytes;return N[A>>>5]|=128<<24-A%32,N[14+(A+64>>>9<<4)]=Math.floor(R/4294967296),N[15+(A+64>>>9<<4)]=R,T.sigBytes=4*N.length,this._process(),this._hash},clone:function(){var T=le.clone.call(this);return T._hash=this._hash.clone(),T}}),B.SHA1=le._createHelper(k),B.HmacSHA1=le._createHmacHelper(k),z.SHA1)},8769:function(me,Ce,j){var B,ne,le,Y,ee,z;me.exports=(z=j(7585),j(1817),ne=(B=z).lib.WordArray,ee=(le=B.algo).SHA224=(Y=le.SHA256).extend({_doReset:function(){this._hash=new ne.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var k=Y._doFinalize.call(this);return k.sigBytes-=4,k}}),B.SHA224=Y._createHelper(ee),B.HmacSHA224=Y._createHmacHelper(ee),z.SHA224)},1817:function(me,Ce,j){var z;me.exports=(z=j(7585),function(B){var X=z,ne=X.lib,le=ne.WordArray,Y=ne.Hasher,ee=X.algo,k=[],T=[];!function(){function A(ie){for(var te=B.sqrt(ie),V=2;V<=te;V++)if(!(ie%V))return!1;return!0}function M(ie){return 4294967296*(ie-(0|ie))|0}for(var O=2,L=0;L<64;)A(O)&&(L<8&&(k[L]=M(B.pow(O,.5))),T[L]=M(B.pow(O,1/3)),L++),O++}();var N=[],R=ee.SHA256=Y.extend({_doReset:function(){this._hash=new le.init(k.slice(0))},_doProcessBlock:function(A,M){for(var O=this._hash.words,L=O[0],ie=O[1],te=O[2],V=O[3],G=O[4],oe=O[5],Z=O[6],re=O[7],ae=0;ae<64;ae++){if(ae<16)N[ae]=0|A[M+ae];else{var ye=N[ae-15],Re=N[ae-2];N[ae]=((ye<<25|ye>>>7)^(ye<<14|ye>>>18)^ye>>>3)+N[ae-7]+((Re<<15|Re>>>17)^(Re<<13|Re>>>19)^Re>>>10)+N[ae-16]}var Te=L&ie^L&te^ie&te,qe=re+((G<<26|G>>>6)^(G<<21|G>>>11)^(G<<7|G>>>25))+(G&oe^~G&Z)+T[ae]+N[ae];re=Z,Z=oe,oe=G,G=V+qe|0,V=te,te=ie,ie=L,L=qe+(((L<<30|L>>>2)^(L<<19|L>>>13)^(L<<10|L>>>22))+Te)|0}O[0]=O[0]+L|0,O[1]=O[1]+ie|0,O[2]=O[2]+te|0,O[3]=O[3]+V|0,O[4]=O[4]+G|0,O[5]=O[5]+oe|0,O[6]=O[6]+Z|0,O[7]=O[7]+re|0},_doFinalize:function(){var A=this._data,M=A.words,O=8*this._nDataBytes,L=8*A.sigBytes;return M[L>>>5]|=128<<24-L%32,M[14+(L+64>>>9<<4)]=B.floor(O/4294967296),M[15+(L+64>>>9<<4)]=O,A.sigBytes=4*M.length,this._process(),this._hash},clone:function(){var A=Y.clone.call(this);return A._hash=this._hash.clone(),A}});X.SHA256=Y._createHelper(R),X.HmacSHA256=Y._createHmacHelper(R)}(Math),z.SHA256)},1971:function(me,Ce,j){var z;me.exports=(z=j(7585),j(401),function(B){var X=z,ne=X.lib,le=ne.WordArray,Y=ne.Hasher,k=X.x64.Word,T=X.algo,N=[],R=[],A=[];!function(){for(var L=1,ie=0,te=0;te<24;te++){N[L+5*ie]=(te+1)*(te+2)/2%64;var G=(2*L+3*ie)%5;L=ie%5,ie=G}for(L=0;L<5;L++)for(ie=0;ie<5;ie++)R[L+5*ie]=ie+(2*L+3*ie)%5*5;for(var oe=1,Z=0;Z<24;Z++){for(var re=0,ae=0,ye=0;ye<7;ye++){if(1&oe){var pe=(1<<ye)-1;pe<32?ae^=1<<pe:re^=1<<pe-32}128&oe?oe=oe<<1^113:oe<<=1}A[Z]=k.create(re,ae)}}();var M=[];!function(){for(var L=0;L<25;L++)M[L]=k.create()}();var O=T.SHA3=Y.extend({cfg:Y.cfg.extend({outputLength:512}),_doReset:function(){for(var L=this._state=[],ie=0;ie<25;ie++)L[ie]=new k.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(L,ie){for(var te=this._state,V=this.blockSize/2,G=0;G<V;G++){var oe=L[ie+2*G],Z=L[ie+2*G+1];oe=16711935&(oe<<8|oe>>>24)|4278255360&(oe<<24|oe>>>8),(re=te[G]).high^=Z=16711935&(Z<<8|Z>>>24)|4278255360&(Z<<24|Z>>>8),re.low^=oe}for(var ae=0;ae<24;ae++){for(var ye=0;ye<5;ye++){for(var pe=0,Re=0,Ie=0;Ie<5;Ie++)pe^=(re=te[ye+5*Ie]).high,Re^=re.low;var ce=M[ye];ce.high=pe,ce.low=Re}for(ye=0;ye<5;ye++){var Te=M[(ye+4)%5],ke=M[(ye+1)%5],De=ke.high,qe=ke.low;for(pe=Te.high^(De<<1|qe>>>31),Re=Te.low^(qe<<1|De>>>31),Ie=0;Ie<5;Ie++)(re=te[ye+5*Ie]).high^=pe,re.low^=Re}for(var Ae=1;Ae<25;Ae++){var yt=(re=te[Ae]).high,Nt=re.low,ve=N[Ae];ve<32?(pe=yt<<ve|Nt>>>32-ve,Re=Nt<<ve|yt>>>32-ve):(pe=Nt<<ve-32|yt>>>64-ve,Re=yt<<ve-32|Nt>>>64-ve);var xe=M[R[Ae]];xe.high=pe,xe.low=Re}var he=M[0],Se=te[0];for(he.high=Se.high,he.low=Se.low,ye=0;ye<5;ye++)for(Ie=0;Ie<5;Ie++){var fn=M[Ae=ye+5*Ie],nt=M[(ye+1)%5+5*Ie],Dt=M[(ye+2)%5+5*Ie];(re=te[Ae]).high=fn.high^~nt.high&Dt.high,re.low=fn.low^~nt.low&Dt.low}var re,Mt=A[ae];(re=te[0]).high^=Mt.high,re.low^=Mt.low}},_doFinalize:function(){var L=this._data,ie=L.words,V=8*L.sigBytes,G=32*this.blockSize;ie[V>>>5]|=1<<24-V%32,ie[(B.ceil((V+1)/G)*G>>>5)-1]|=128,L.sigBytes=4*ie.length,this._process();for(var oe=this._state,Z=this.cfg.outputLength/8,re=Z/8,ae=[],ye=0;ye<re;ye++){var pe=oe[ye],Re=pe.high,Ie=pe.low;Re=16711935&(Re<<8|Re>>>24)|4278255360&(Re<<24|Re>>>8),ae.push(Ie=16711935&(Ie<<8|Ie>>>24)|4278255360&(Ie<<24|Ie>>>8)),ae.push(Re)}return new le.init(ae,Z)},clone:function(){for(var L=Y.clone.call(this),ie=L._state=this._state.slice(0),te=0;te<25;te++)ie[te]=ie[te].clone();return L}});X.SHA3=Y._createHelper(O),X.HmacSHA3=Y._createHmacHelper(O)}(Math),z.SHA3)},6787:function(me,Ce,j){var B,X,ne,le,Y,ee,k,z;me.exports=(z=j(7585),j(401),j(3351),ne=(X=(B=z).x64).Word,le=X.WordArray,k=(Y=B.algo).SHA384=(ee=Y.SHA512).extend({_doReset:function(){this._hash=new le.init([new ne.init(3418070365,3238371032),new ne.init(1654270250,914150663),new ne.init(2438529370,812702999),new ne.init(355462360,4144912697),new ne.init(1731405415,4290775857),new ne.init(2394180231,1750603025),new ne.init(3675008525,1694076839),new ne.init(1203062813,3204075428)])},_doFinalize:function(){var T=ee._doFinalize.call(this);return T.sigBytes-=16,T}}),B.SHA384=ee._createHelper(k),B.HmacSHA384=ee._createHmacHelper(k),z.SHA384)},3351:function(me,Ce,j){var z;me.exports=(z=j(7585),j(401),function(){var B=z,ne=B.lib.Hasher,le=B.x64,Y=le.Word,ee=le.WordArray,k=B.algo;function T(){return Y.create.apply(Y,arguments)}var N=[T(1116352408,3609767458),T(1899447441,602891725),T(3049323471,3964484399),T(3921009573,2173295548),T(961987163,4081628472),T(1508970993,3053834265),T(2453635748,2937671579),T(2870763221,3664609560),T(3624381080,2734883394),T(310598401,1164996542),T(607225278,1323610764),T(1426881987,3590304994),T(1925078388,4068182383),T(2162078206,991336113),T(2614888103,633803317),T(3248222580,3479774868),T(3835390401,2666613458),T(4022224774,944711139),T(264347078,2341262773),T(604807628,2007800933),T(770255983,1495990901),T(1249150122,1856431235),T(1555081692,3175218132),T(1996064986,2198950837),T(2554220882,3999719339),T(2821834349,766784016),T(2952996808,2566594879),T(3210313671,3203337956),T(3336571891,1034457026),T(3584528711,2466948901),T(113926993,3758326383),T(338241895,168717936),T(666307205,1188179964),T(773529912,1546045734),T(1294757372,1522805485),T(1396182291,2643833823),T(1695183700,2343527390),T(1986661051,1014477480),T(2177026350,1206759142),T(2456956037,344077627),T(2730485921,1290863460),T(2820302411,3158454273),T(3259730800,3505952657),T(3345764771,106217008),T(3516065817,3606008344),T(3600352804,1432725776),T(4094571909,1467031594),T(275423344,851169720),T(430227734,3100823752),T(506948616,1363258195),T(659060556,3750685593),T(883997877,3785050280),T(958139571,3318307427),T(1322822218,3812723403),T(1537002063,2003034995),T(1747873779,3602036899),T(1955562222,1575990012),T(2024104815,1125592928),T(2227730452,2716904306),T(2361852424,442776044),T(2428436474,593698344),T(2756734187,3733110249),T(3204031479,2999351573),T(3329325298,3815920427),T(3391569614,3928383900),T(3515267271,566280711),T(3940187606,3454069534),T(4118630271,4000239992),T(116418474,1914138554),T(174292421,2731055270),T(289380356,3203993006),T(460393269,320620315),T(685471733,587496836),T(852142971,1086792851),T(1017036298,365543100),T(1126000580,2618297676),T(1288033470,3409855158),T(1501505948,4234509866),T(1607167915,987167468),T(1816402316,1246189591)],R=[];!function(){for(var M=0;M<80;M++)R[M]=T()}();var A=k.SHA512=ne.extend({_doReset:function(){this._hash=new ee.init([new Y.init(1779033703,4089235720),new Y.init(3144134277,2227873595),new Y.init(1013904242,4271175723),new Y.init(2773480762,1595750129),new Y.init(1359893119,2917565137),new Y.init(2600822924,725511199),new Y.init(528734635,4215389547),new Y.init(1541459225,327033209)])},_doProcessBlock:function(M,O){for(var L=this._hash.words,ie=L[0],te=L[1],V=L[2],G=L[3],oe=L[4],Z=L[5],re=L[6],ae=L[7],ye=ie.high,pe=ie.low,Re=te.high,Ie=te.low,ce=V.high,Te=V.low,ke=G.high,De=G.low,qe=oe.high,Ae=oe.low,yt=Z.high,Nt=Z.low,ve=re.high,xe=re.low,he=ae.high,Se=ae.low,fn=ye,nt=pe,Dt=Re,Mt=Ie,ft=ce,aa=Te,cu=ke,qa=De,_r=qe,Ue=Ae,vl=yt,Ye=Nt,Ks=ve,Js=xe,eo=he,to=Se,Yi=0;Yi<80;Yi++){var Xi,ka,_l=R[Yi];if(Yi<16)ka=_l.high=0|M[O+2*Yi],Xi=_l.low=0|M[O+2*Yi+1];else{var Qh=R[Yi-15],Qi=Qh.high,Cs=Qh.low,uu=(Cs>>>1|Qi<<31)^(Cs>>>8|Qi<<24)^(Cs>>>7|Qi<<25),Zh=R[Yi-2],Ya=Zh.high,no=Zh.low,Kh=(no>>>19|Ya<<13)^(no<<3|Ya>>>29)^(no>>>6|Ya<<26),Jh=R[Yi-7],yl=R[Yi-16],Cl=yl.low;_l.high=ka=(ka=(ka=((Qi>>>1|Cs<<31)^(Qi>>>8|Cs<<24)^Qi>>>7)+Jh.high+((Xi=uu+Jh.low)>>>0<uu>>>0?1:0))+((Ya>>>19|no<<13)^(Ya<<3|no>>>29)^Ya>>>6)+((Xi+=Kh)>>>0<Kh>>>0?1:0))+yl.high+((Xi+=Cl)>>>0<Cl>>>0?1:0),_l.low=Xi}var Ni,ef=_r&vl^~_r&Ks,wl=Ue&Ye^~Ue&Js,fu=fn&Dt^fn&ft^Dt&ft,ai=(nt>>>28|fn<<4)^(nt<<30|fn>>>2)^(nt<<25|fn>>>7),mu=N[Yi],Sl=mu.low,sa=eo+((_r>>>14|Ue<<18)^(_r>>>18|Ue<<14)^(_r<<23|Ue>>>9))+((Ni=to+((Ue>>>14|_r<<18)^(Ue>>>18|_r<<14)^(Ue<<23|_r>>>9)))>>>0<to>>>0?1:0),br=ai+(nt&Mt^nt&aa^Mt&aa);eo=Ks,to=Js,Ks=vl,Js=Ye,vl=_r,Ye=Ue,_r=cu+(sa=(sa=(sa=sa+ef+((Ni+=wl)>>>0<wl>>>0?1:0))+mu.high+((Ni+=Sl)>>>0<Sl>>>0?1:0))+ka+((Ni+=Xi)>>>0<Xi>>>0?1:0))+((Ue=qa+Ni|0)>>>0<qa>>>0?1:0)|0,cu=ft,qa=aa,ft=Dt,aa=Mt,Dt=fn,Mt=nt,fn=sa+(((fn>>>28|nt<<4)^(fn<<30|nt>>>2)^(fn<<25|nt>>>7))+fu+(br>>>0<ai>>>0?1:0))+((nt=Ni+br|0)>>>0<Ni>>>0?1:0)|0}pe=ie.low=pe+nt,ie.high=ye+fn+(pe>>>0<nt>>>0?1:0),Ie=te.low=Ie+Mt,te.high=Re+Dt+(Ie>>>0<Mt>>>0?1:0),Te=V.low=Te+aa,V.high=ce+ft+(Te>>>0<aa>>>0?1:0),De=G.low=De+qa,G.high=ke+cu+(De>>>0<qa>>>0?1:0),Ae=oe.low=Ae+Ue,oe.high=qe+_r+(Ae>>>0<Ue>>>0?1:0),Nt=Z.low=Nt+Ye,Z.high=yt+vl+(Nt>>>0<Ye>>>0?1:0),xe=re.low=xe+Js,re.high=ve+Ks+(xe>>>0<Js>>>0?1:0),Se=ae.low=Se+to,ae.high=he+eo+(Se>>>0<to>>>0?1:0)},_doFinalize:function(){var M=this._data,O=M.words,L=8*this._nDataBytes,ie=8*M.sigBytes;return O[ie>>>5]|=128<<24-ie%32,O[30+(ie+128>>>10<<5)]=Math.floor(L/4294967296),O[31+(ie+128>>>10<<5)]=L,M.sigBytes=4*O.length,this._process(),this._hash.toX32()},clone:function(){var M=ne.clone.call(this);return M._hash=this._hash.clone(),M},blockSize:32});B.SHA512=ne._createHelper(A),B.HmacSHA512=ne._createHmacHelper(A)}(),z.SHA512)},7243:function(me,Ce,j){var z;me.exports=(z=j(7585),j(8319),j(9493),j(7865),j(3057),function(){var B=z,X=B.lib,ne=X.WordArray,le=X.BlockCipher,Y=B.algo,ee=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],k=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],T=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],N=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],R=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],A=Y.DES=le.extend({_doReset:function(){for(var te=this._key.words,V=[],G=0;G<56;G++){var oe=ee[G]-1;V[G]=te[oe>>>5]>>>31-oe%32&1}for(var Z=this._subKeys=[],re=0;re<16;re++){var ae=Z[re]=[],ye=T[re];for(G=0;G<24;G++)ae[G/6|0]|=V[(k[G]-1+ye)%28]<<31-G%6,ae[4+(G/6|0)]|=V[28+(k[G+24]-1+ye)%28]<<31-G%6;for(ae[0]=ae[0]<<1|ae[0]>>>31,G=1;G<7;G++)ae[G]=ae[G]>>>4*(G-1)+3;ae[7]=ae[7]<<5|ae[7]>>>27}var pe=this._invSubKeys=[];for(G=0;G<16;G++)pe[G]=Z[15-G]},encryptBlock:function(ie,te){this._doCryptBlock(ie,te,this._subKeys)},decryptBlock:function(ie,te){this._doCryptBlock(ie,te,this._invSubKeys)},_doCryptBlock:function(ie,te,V){this._lBlock=ie[te],this._rBlock=ie[te+1],M.call(this,4,252645135),M.call(this,16,65535),O.call(this,2,858993459),O.call(this,8,16711935),M.call(this,1,1431655765);for(var G=0;G<16;G++){for(var oe=V[G],Z=this._lBlock,re=this._rBlock,ae=0,ye=0;ye<8;ye++)ae|=N[ye][((re^oe[ye])&R[ye])>>>0];this._lBlock=re,this._rBlock=Z^ae}var pe=this._lBlock;this._lBlock=this._rBlock,this._rBlock=pe,M.call(this,1,1431655765),O.call(this,8,16711935),O.call(this,2,858993459),M.call(this,16,65535),M.call(this,4,252645135),ie[te]=this._lBlock,ie[te+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function M(ie,te){var V=(this._lBlock>>>ie^this._rBlock)&te;this._rBlock^=V,this._lBlock^=V<<ie}function O(ie,te){var V=(this._rBlock>>>ie^this._lBlock)&te;this._lBlock^=V,this._rBlock^=V<<ie}B.DES=le._createHelper(A);var L=Y.TripleDES=le.extend({_doReset:function(){var te=this._key.words;if(2!==te.length&&4!==te.length&&te.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var V=te.slice(0,2),G=te.length<4?te.slice(0,2):te.slice(2,4),oe=te.length<6?te.slice(0,2):te.slice(4,6);this._des1=A.createEncryptor(ne.create(V)),this._des2=A.createEncryptor(ne.create(G)),this._des3=A.createEncryptor(ne.create(oe))},encryptBlock:function(ie,te){this._des1.encryptBlock(ie,te),this._des2.decryptBlock(ie,te),this._des3.encryptBlock(ie,te)},decryptBlock:function(ie,te){this._des3.decryptBlock(ie,te),this._des2.encryptBlock(ie,te),this._des1.decryptBlock(ie,te)},keySize:6,ivSize:2,blockSize:2});B.TripleDES=le._createHelper(L)}(),z.TripleDES)},401:function(me,Ce,j){var ne,le,Y,ee,z;me.exports=(z=j(7585),le=(ne=z.lib).Base,Y=ne.WordArray,(ee=z.x64={}).Word=le.extend({init:function(N,R){this.high=N,this.low=R}}),ee.WordArray=le.extend({init:function(N,R){N=this.words=N||[],this.sigBytes=null!=R?R:8*N.length},toX32:function(){for(var N=this.words,R=N.length,A=[],M=0;M<R;M++){var O=N[M];A.push(O.high),A.push(O.low)}return Y.create(A,this.sigBytes)},clone:function(){for(var N=le.clone.call(this),R=N.words=this.words.slice(0),A=R.length,M=0;M<A;M++)R[M]=R[M].clone();return N}}),z)},340:(me,Ce,j)=>{var z=j(9471),B=j(2992),X=j(7657),ne=j(5583),le=j(1929),Y=j(8083),ee=j(3818);ee.alea=z,ee.xor128=B,ee.xorwow=X,ee.xorshift7=ne,ee.xor4096=le,ee.tychei=Y,me.exports=ee},9471:function(me,Ce,j){var z;!function(B,X,ne){function le(T){var N=this,R=function k(){var T=4022871197;return function(R){R=String(R);for(var A=0;A<R.length;A++){var M=.02519603282416938*(T+=R.charCodeAt(A));M-=T=M>>>0,T=(M*=T)>>>0,T+=4294967296*(M-=T)}return 2.3283064365386963e-10*(T>>>0)}}();N.next=function(){var A=2091639*N.s0+2.3283064365386963e-10*N.c;return N.s0=N.s1,N.s1=N.s2,N.s2=A-(N.c=0|A)},N.c=1,N.s0=R(" "),N.s1=R(" "),N.s2=R(" "),N.s0-=R(T),N.s0<0&&(N.s0+=1),N.s1-=R(T),N.s1<0&&(N.s1+=1),N.s2-=R(T),N.s2<0&&(N.s2+=1),R=null}function Y(T,N){return N.c=T.c,N.s0=T.s0,N.s1=T.s1,N.s2=T.s2,N}function ee(T,N){var R=new le(T),A=N&&N.state,M=R.next;return M.int32=function(){return 4294967296*R.next()|0},M.double=function(){return M()+11102230246251565e-32*(2097152*M()|0)},M.quick=M,A&&("object"==typeof A&&Y(A,R),M.state=function(){return Y(R,{})}),M}X&&X.exports?X.exports=ee:j.amdD&&j.amdO?void 0!==(z=function(){return ee}.call(Ce,j,Ce,X))&&(X.exports=z):this.alea=ee}(0,me=j.nmd(me))},8083:function(me,Ce,j){var z;!function(B,X,ne){function le(k){var T=this,N="";T.next=function(){var A=T.b,M=T.c,O=T.d,L=T.a;return A=A<<25^A>>>7^M,M=M-O|0,O=O<<24^O>>>8^L,L=L-A|0,T.b=A=A<<20^A>>>12^M,T.c=M=M-O|0,T.d=O<<16^M>>>16^L,T.a=L-A|0},T.a=0,T.b=0,T.c=-1640531527,T.d=1367130551,k===Math.floor(k)?(T.a=k/4294967296|0,T.b=0|k):N+=k;for(var R=0;R<N.length+20;R++)T.b^=0|N.charCodeAt(R),T.next()}function Y(k,T){return T.a=k.a,T.b=k.b,T.c=k.c,T.d=k.d,T}function ee(k,T){var N=new le(k),R=T&&T.state,A=function(){return(N.next()>>>0)/4294967296};return A.double=function(){do{var L=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===L);return L},A.int32=N.next,A.quick=A,R&&("object"==typeof R&&Y(R,N),A.state=function(){return Y(N,{})}),A}X&&X.exports?X.exports=ee:j.amdD&&j.amdO?void 0!==(z=function(){return ee}.call(Ce,j,Ce,X))&&(X.exports=z):this.tychei=ee}(0,me=j.nmd(me))},2992:function(me,Ce,j){var z;!function(B,X,ne){function le(k){var T=this,N="";T.x=0,T.y=0,T.z=0,T.w=0,T.next=function(){var A=T.x^T.x<<11;return T.x=T.y,T.y=T.z,T.z=T.w,T.w^=T.w>>>19^A^A>>>8},k===(0|k)?T.x=k:N+=k;for(var R=0;R<N.length+64;R++)T.x^=0|N.charCodeAt(R),T.next()}function Y(k,T){return T.x=k.x,T.y=k.y,T.z=k.z,T.w=k.w,T}function ee(k,T){var N=new le(k),R=T&&T.state,A=function(){return(N.next()>>>0)/4294967296};return A.double=function(){do{var L=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===L);return L},A.int32=N.next,A.quick=A,R&&("object"==typeof R&&Y(R,N),A.state=function(){return Y(N,{})}),A}X&&X.exports?X.exports=ee:j.amdD&&j.amdO?void 0!==(z=function(){return ee}.call(Ce,j,Ce,X))&&(X.exports=z):this.xor128=ee}(0,me=j.nmd(me))},1929:function(me,Ce,j){var z;!function(B,X,ne){function le(k){var T=this;T.next=function(){var O,L,R=T.w,A=T.X,M=T.i;return T.w=R=R+1640531527|0,L=A[M+34&127],O=A[M=M+1&127],L^=L<<13,O^=O<<17,L=A[M]=(L^=L>>>15)^(O^=O>>>12),T.i=M,L+(R^R>>>16)|0},function N(R,A){var M,O,L,ie,te,V=[],G=128;for(A===(0|A)?(O=A,A=null):(A+="\0",O=0,G=Math.max(G,A.length)),L=0,ie=-32;ie<G;++ie)A&&(O^=A.charCodeAt((ie+32)%A.length)),0===ie&&(te=O),O^=O<<10,O^=O>>>15,O^=O<<4,O^=O>>>13,ie>=0&&(L=0==(M=V[127&ie]^=O+(te=te+1640531527|0))?L+1:0);for(L>=128&&(V[127&(A&&A.length||0)]=-1),L=127,ie=512;ie>0;--ie)O=V[L+34&127],M=V[L=L+1&127],O^=O<<13,M^=M<<17,V[L]=(O^=O>>>15)^(M^=M>>>12);R.w=te,R.X=V,R.i=L}(T,k)}function Y(k,T){return T.i=k.i,T.w=k.w,T.X=k.X.slice(),T}function ee(k,T){null==k&&(k=+new Date);var N=new le(k),R=T&&T.state,A=function(){return(N.next()>>>0)/4294967296};return A.double=function(){do{var L=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===L);return L},A.int32=N.next,A.quick=A,R&&(R.X&&Y(R,N),A.state=function(){return Y(N,{})}),A}X&&X.exports?X.exports=ee:j.amdD&&j.amdO?void 0!==(z=function(){return ee}.call(Ce,j,Ce,X))&&(X.exports=z):this.xor4096=ee}(0,me=j.nmd(me))},5583:function(me,Ce,j){var z;!function(B,X,ne){function le(k){var T=this;T.next=function(){var M,O,R=T.x,A=T.i;return M=R[A],O=(M^=M>>>7)^M<<24,O^=(M=R[A+1&7])^M>>>10,O^=(M=R[A+3&7])^M>>>3,O^=(M=R[A+4&7])^M<<7,M=R[A+7&7],R[A]=O^=(M^=M<<13)^M<<9,T.i=A+1&7,O},function N(R,A){var M,L=[];if(A===(0|A))L[0]=A;else for(A=""+A,M=0;M<A.length;++M)L[7&M]=L[7&M]<<15^A.charCodeAt(M)+L[M+1&7]<<13;for(;L.length<8;)L.push(0);for(M=0;M<8&&0===L[M];++M);for(8==M&&(L[7]=-1),R.x=L,R.i=0,M=256;M>0;--M)R.next()}(T,k)}function Y(k,T){return T.x=k.x.slice(),T.i=k.i,T}function ee(k,T){null==k&&(k=+new Date);var N=new le(k),R=T&&T.state,A=function(){return(N.next()>>>0)/4294967296};return A.double=function(){do{var L=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===L);return L},A.int32=N.next,A.quick=A,R&&(R.x&&Y(R,N),A.state=function(){return Y(N,{})}),A}X&&X.exports?X.exports=ee:j.amdD&&j.amdO?void 0!==(z=function(){return ee}.call(Ce,j,Ce,X))&&(X.exports=z):this.xorshift7=ee}(0,me=j.nmd(me))},7657:function(me,Ce,j){var z;!function(B,X,ne){function le(k){var T=this,N="";T.next=function(){var A=T.x^T.x>>>2;return T.x=T.y,T.y=T.z,T.z=T.w,T.w=T.v,(T.d=T.d+362437|0)+(T.v=T.v^T.v<<4^A^A<<1)|0},T.x=0,T.y=0,T.z=0,T.w=0,T.v=0,k===(0|k)?T.x=k:N+=k;for(var R=0;R<N.length+64;R++)T.x^=0|N.charCodeAt(R),R==N.length&&(T.d=T.x<<10^T.x>>>4),T.next()}function Y(k,T){return T.x=k.x,T.y=k.y,T.z=k.z,T.w=k.w,T.v=k.v,T.d=k.d,T}function ee(k,T){var N=new le(k),R=T&&T.state,A=function(){return(N.next()>>>0)/4294967296};return A.double=function(){do{var L=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===L);return L},A.int32=N.next,A.quick=A,R&&("object"==typeof R&&Y(R,N),A.state=function(){return Y(N,{})}),A}X&&X.exports?X.exports=ee:j.amdD&&j.amdO?void 0!==(z=function(){return ee}.call(Ce,j,Ce,X))&&(X.exports=z):this.xorwow=ee}(0,me=j.nmd(me))},3818:function(me,Ce,j){var z;!function(B,X,ne){var M,le=256,T=ne.pow(le,6),N=ne.pow(2,52),R=2*N,A=255;function O(Z,re,ae){var ye=[],pe=V(te((re=1==re?{entropy:!0}:re||{}).entropy?[Z,oe(X)]:null==Z?function G(){try{var Z;return M&&(Z=M.randomBytes)?Z=Z(le):(Z=new Uint8Array(le),(B.crypto||B.msCrypto).getRandomValues(Z)),oe(Z)}catch(ye){var re=B.navigator,ae=re&&re.plugins;return[+new Date,B,ae,B.screen,oe(X)]}}():Z,3),ye),Re=new L(ye),Ie=function(){for(var ce=Re.g(6),Te=T,ke=0;ce<N;)ce=(ce+ke)*le,Te*=le,ke=Re.g(1);for(;ce>=R;)ce/=2,Te/=2,ke>>>=1;return(ce+ke)/Te};return Ie.int32=function(){return 0|Re.g(4)},Ie.quick=function(){return Re.g(4)/4294967296},Ie.double=Ie,V(oe(Re.S),X),(re.pass||ae||function(ce,Te,ke,De){return De&&(De.S&&ie(De,Re),ce.state=function(){return ie(Re,{})}),ke?(ne.random=ce,Te):ce})(Ie,pe,"global"in re?re.global:this==ne,re.state)}function L(Z){var re,ae=Z.length,ye=this,pe=0,Re=ye.i=ye.j=0,Ie=ye.S=[];for(ae||(Z=[ae++]);pe<le;)Ie[pe]=pe++;for(pe=0;pe<le;pe++)Ie[pe]=Ie[Re=A&Re+Z[pe%ae]+(re=Ie[pe])],Ie[Re]=re;(ye.g=function(ce){for(var Te,ke=0,De=ye.i,qe=ye.j,Ae=ye.S;ce--;)Te=Ae[De=A&De+1],ke=ke*le+Ae[A&(Ae[De]=Ae[qe=A&qe+Te])+(Ae[qe]=Te)];return ye.i=De,ye.j=qe,ke})(le)}function ie(Z,re){return re.i=Z.i,re.j=Z.j,re.S=Z.S.slice(),re}function te(Z,re){var pe,ae=[],ye=typeof Z;if(re&&"object"==ye)for(pe in Z)try{ae.push(te(Z[pe],re-1))}catch(Re){}return ae.length?ae:"string"==ye?Z:Z+"\0"}function V(Z,re){for(var ye,ae=Z+"",pe=0;pe<ae.length;)re[A&pe]=A&(ye^=19*re[A&pe])+ae.charCodeAt(pe++);return oe(re)}function oe(Z){return String.fromCharCode.apply(0,Z)}if(V(ne.random(),X),me.exports){me.exports=O;try{M=j(5042)}catch(Z){}}else void 0!==(z=function(){return O}.call(Ce,j,Ce,me))&&(me.exports=z)}("undefined"!=typeof self?self:this,[],Math)},2480:()=>{},5042:()=>{}},me=>{me(me.s=6359)}]);