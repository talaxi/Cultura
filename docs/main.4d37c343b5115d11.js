var D$=Object.defineProperty,N2=Object.getOwnPropertySymbols,R$=Object.prototype.hasOwnProperty,x$=Object.prototype.propertyIsEnumerable,F2=(Te,xe,Q)=>xe in Te?D$(Te,xe,{enumerable:!0,configurable:!0,writable:!0,value:Q}):Te[xe]=Q,qr=(Te,xe)=>{for(var Q in xe||(xe={}))R$.call(xe,Q)&&F2(Te,Q,xe[Q]);if(N2)for(var Q of N2(xe))x$.call(xe,Q)&&F2(Te,Q,xe[Q]);return Te};(self.webpackChunkCultura=self.webpackChunkCultura||[]).push([[179],{7151:(Te,xe,Q)=>{"use strict";function K(t){return"function"==typeof t}function H(t){const e=t(i=>{Error.call(i),i.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const te=H(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function oe(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class ge{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const a of e)a.remove(this);else e.remove(this);const{initialTeardown:i}=this;if(K(i))try{i()}catch(a){n=a instanceof te?a.errors:[a]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const a of r)try{V(a)}catch(o){n=null!=n?n:[],o instanceof te?n=[...n,...o.errors]:n.push(o)}}if(n)throw new te(n)}}add(n){var e;if(n&&n!==this)if(this.closed)V(n);else{if(n instanceof ge){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&oe(e,n)}remove(n){const{_teardowns:e}=this;e&&oe(e,n),n instanceof ge&&n._removeParent(this)}}ge.EMPTY=(()=>{const t=new ge;return t.closed=!0,t})();const ee=ge.EMPTY;function re(t){return t instanceof ge||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function V(t){K(t)?t():t.unsubscribe()}const M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},N={setTimeout(...t){const{delegate:n}=N;return((null==n?void 0:n.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:n}=N;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function E(t){N.setTimeout(()=>{const{onUnhandledError:n}=M;if(!n)throw t;n(t)})}function O(){}const A=se("C",void 0,void 0);function se(t,n,e){return{kind:t,value:n,error:e}}let ae=null;function U(t){if(M.useDeprecatedSynchronousErrorHandling){const n=!ae;if(n&&(ae={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:i}=ae;if(ae=null,e)throw i}}else t()}class fe extends ge{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,re(n)&&n.add(this)):this.destination=me}static create(n,e,i){return new Re(n,e,i)}next(n){this.isStopped?He(function $(t){return se("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?He(function F(t){return se("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?He(A,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ne=Function.prototype.bind;function le(t,n){return ne.call(t,n)}class he{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){Ce(i)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){Ce(i)}else Ce(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Ce(e)}}}class Re extends fe{constructor(n,e,i){let r;if(super(),K(n)||!n)r={next:null!=n?n:void 0,error:null!=e?e:void 0,complete:null!=i?i:void 0};else{let a;this&&M.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&le(n.next,a),error:n.error&&le(n.error,a),complete:n.complete&&le(n.complete,a)}):r=n}this.destination=new he(r)}}function Ce(t){M.useDeprecatedSynchronousErrorHandling?function X(t){M.useDeprecatedSynchronousErrorHandling&&ae&&(ae.errorThrown=!0,ae.error=t)}(t):E(t)}function He(t,n){const{onStoppedNotification:e}=M;e&&N.setTimeout(()=>e(t,n))}const me={closed:!0,next:O,error:function Ne(t){throw t},complete:O},Ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function Be(t){return t}let Le=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const a=function De(t){return t&&t instanceof fe||function ti(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}(t)&&re(t)}(e)?e:new Re(e,i,r);return U(()=>{const{operator:o,source:s}=this;a.add(o?o.call(a,s):s?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return new(i=Gt(i))((r,a)=>{const o=new Re({next:s=>{try{e(s)}catch(l){a(l),o.unsubscribe()}},error:a,complete:r});this.subscribe(o)})}_subscribe(e){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(e)}[Ae](){return this}pipe(...e){return function ft(t){return 0===t.length?Be:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}(e)(this)}toPromise(e){return new(e=Gt(e))((i,r)=>{let a;this.subscribe(o=>a=o,o=>r(o),()=>i(a))})}}return t.create=n=>new t(n),t})();function Gt(t){var n;return null!==(n=null!=t?t:M.Promise)&&void 0!==n?n:Promise}const Oe=H(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let we=(()=>{class t extends Le{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const i=new ke(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new Oe}next(e){U(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const r of i)r.next(e)}})}error(e){U(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){U(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:i,isStopped:r,observers:a}=this;return i||r?ee:(a.push(e),new ge(()=>oe(a,e)))}_checkFinalizedStatuses(e){const{hasError:i,thrownError:r,isStopped:a}=this;i?e.error(r):a&&e.complete()}asObservable(){const e=new Le;return e.source=this,e}}return t.create=(n,e)=>new ke(n,e),t})();class ke extends we{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,n)}error(n){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==i?i:ee}}function Oi(t){return K(null==t?void 0:t.lift)}function xt(t){return n=>{if(Oi(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function qt(t,n,e,i,r){return new Xt(t,n,e,i,r)}class Xt extends fe{constructor(n,e,i,r,a,o){super(n),this.onFinalize=a,this.shouldUnsubscribe=o,this._next=e?function(s){try{e(s)}catch(l){n.error(l)}}:super._next,this._error=r?function(s){try{r(s)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(s){n.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Nt(t,n){return xt((e,i)=>{let r=0;e.subscribe(qt(i,a=>{i.next(t.call(n,a,r++))}))})}function ze(t,n,e,i){var o,r=arguments.length,a=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(n,e,a):o(n,e))||a);return r>3&&a&&Object.defineProperty(n,e,a),a}function Je(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)}function Sr(t){return this instanceof Sr?(this.v=t,this):new Sr(t)}function is(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e.apply(t,n||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(v){i[v]&&(r[v]=function(m){return new Promise(function(b,y){a.push([v,m,b,y])>1||s(v,m)})})}function s(v,m){try{!function l(v){v.value instanceof Sr?Promise.resolve(v.value.v).then(c,u):d(a[0][2],v)}(i[v](m))}catch(b){d(a[0][3],b)}}function c(v){s("next",v)}function u(v){s("throw",v)}function d(v,m){v(m),a.shift(),a.length&&s(a[0][0],a[0][1])}}function Qu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function yr(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=t[a]&&function(o){return new Promise(function(s,l){!function r(a,o,s,l){Promise.resolve(l).then(function(c){a({value:c,done:s})},o)}(s,l,(o=t[a](o)).done,o.value)})}}}const nc=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ku(t){return K(null==t?void 0:t.then)}function rc(t){return K(t[Ae])}function Zu(t){return Symbol.asyncIterator&&K(null==t?void 0:t[Symbol.asyncIterator])}function ac(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const oc=function jf(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ju(t){return K(null==t?void 0:t[oc])}function ed(t){return is(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:i,done:r}=yield Sr(e.read());if(r)return yield Sr(void 0);yield yield Sr(i)}}finally{e.releaseLock()}})}function td(t){return K(null==t?void 0:t.getReader)}function Pn(t){if(t instanceof Le)return t;if(null!=t){if(rc(t))return function $f(t){return new Le(n=>{const e=t[Ae]();if(K(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(nc(t))return function Wf(t){return new Le(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(Ku(t))return function id(t){return new Le(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,E)})}(t);if(Zu(t))return sc(t);if(Ju(t))return function qf(t){return new Le(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(td(t))return function or(t){return sc(ed(t))}(t)}throw ac(t)}function sc(t){return new Le(n=>{(function Na(t,n){var e,i,r,a;return function Vs(t,n,e,i){return new(e||(e=Promise))(function(a,o){function s(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):function r(a){return a instanceof e?a:new e(function(o){o(a)})}(u.value).then(s,l)}c((i=i.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Qu(t);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(a=e.return)&&(yield a.call(e))}finally{if(r)throw r.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function Yr(t,n,e,i=0,r=!1){const a=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!r)return a}function yn(t,n,e=1/0){return K(n)?yn((i,r)=>Nt((a,o)=>n(i,a,r,o))(Pn(t(i,r))),e):("number"==typeof n&&(e=n),xt((i,r)=>function Xf(t,n,e,i,r,a,o,s){const l=[];let c=0,u=0,d=!1;const v=()=>{d&&!l.length&&!c&&n.complete()},m=y=>c<i?b(y):l.push(y),b=y=>{a&&n.next(y),c++;let C=!1;Pn(e(y,u++)).subscribe(qt(n,k=>{null==r||r(k),a?m(k):n.next(k)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<i;){const k=l.shift();o?Yr(n,o,()=>b(k)):b(k)}v()}catch(k){n.error(k)}}))};return t.subscribe(qt(n,m,()=>{d=!0,v()})),()=>{null==s||s()}}(i,r,t,e)))}function lc(t=1/0){return yn(Be,t)}const ha=new Le(t=>t.complete());function ob(t){return t&&K(t.schedule)}function Yf(t){return t[t.length-1]}function nd(t){return K(Yf(t))?t.pop():void 0}function cc(t){return ob(Yf(t))?t.pop():void 0}function sb(t,n=0){return xt((e,i)=>{e.subscribe(qt(i,r=>Yr(i,t,()=>i.next(r),n),()=>Yr(i,t,()=>i.complete(),n),r=>Yr(i,t,()=>i.error(r),n)))})}function lb(t,n=0){return xt((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function cb(t,n){if(!t)throw new Error("Iterable cannot be null");return new Le(e=>{Yr(e,n,()=>{const i=t[Symbol.asyncIterator]();Yr(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Un(t,n){return n?function $2(t,n){if(null!=t){if(rc(t))return function U2(t,n){return Pn(t).pipe(lb(n),sb(n))}(t,n);if(nc(t))return function G2(t,n){return new Le(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}(t,n);if(Ku(t))return function H2(t,n){return Pn(t).pipe(lb(n),sb(n))}(t,n);if(Zu(t))return cb(t,n);if(Ju(t))return function z2(t,n){return new Le(e=>{let i;return Yr(e,n,()=>{i=t[oc](),Yr(e,n,()=>{let r,a;try{({value:r,done:a}=i.next())}catch(o){return void e.error(o)}a?e.complete():e.next(r)},0,!0)}),()=>K(null==i?void 0:i.return)&&i.return()})}(t,n);if(td(t))return function j2(t,n){return cb(ed(t),n)}(t,n)}throw ac(t)}(t,n):Pn(t)}function ub(...t){const n=cc(t),e=function L2(t,n){return"number"==typeof Yf(t)?t.pop():n}(t,1/0),i=t;return i.length?1===i.length?Pn(i[0]):lc(e)(Un(i,n)):ha}function Hn(t){return t<=0?()=>ha:xt((n,e)=>{let i=0;n.subscribe(qt(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function db(t={}){const{connector:n=(()=>new we),resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return a=>{let o=null,s=null,l=null,c=0,u=!1,d=!1;const v=()=>{null==s||s.unsubscribe(),s=null},m=()=>{v(),o=l=null,u=d=!1},b=()=>{const y=o;m(),null==y||y.unsubscribe()};return xt((y,C)=>{c++,!d&&!u&&v();const k=l=null!=l?l:n();C.add(()=>{c--,0===c&&!d&&!u&&(s=Qf(b,r))}),k.subscribe(C),o||(o=new Re({next:w=>k.next(w),error:w=>{d=!0,v(),s=Qf(m,e,w),k.error(w)},complete:()=>{u=!0,v(),s=Qf(m,i),k.complete()}}),Un(y).subscribe(o))})(a)}}function Qf(t,n,...e){return!0===n?(t(),null):!1===n?null:n(...e).pipe(Hn(1)).subscribe(()=>t())}function Ni(t){for(let n in t)if(t[n]===Ni)return n;throw Error("Could not find renamed property on target object.")}function Kf(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Mi(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Mi).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function Zf(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const W2=Ni({__forward_ref__:Ni});function gi(t){return t.__forward_ref__=gi,t.toString=function(){return Mi(this())},t}function zt(t){return hb(t)?t():t}function hb(t){return"function"==typeof t&&t.hasOwnProperty(W2)&&t.__forward_ref__===gi}class li extends Error{constructor(n,e){super(function Jf(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function Vt(t){return"string"==typeof t?t:null==t?"":String(t)}function sr(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Vt(t)}function rd(t,n){const e=n?` in ${n}`:"";throw new li(-201,`No provider for ${sr(t)} found${e}`)}function Xi(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}function at(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ti(t){return{providers:t.providers||[],imports:t.imports||[]}}function ep(t){return fb(t,ad)||fb(t,gb)}function fb(t,n){return t.hasOwnProperty(n)?t[n]:null}function pb(t){return t&&(t.hasOwnProperty(tp)||t.hasOwnProperty(J2))?t[tp]:null}const ad=Ni({\u0275prov:Ni}),tp=Ni({\u0275inj:Ni}),gb=Ni({ngInjectableDef:Ni}),J2=Ni({ngInjectorDef:Ni});var Ft=(()=>((Ft=Ft||{})[Ft.Default=0]="Default",Ft[Ft.Host=1]="Host",Ft[Ft.Self=2]="Self",Ft[Ft.SkipSelf=4]="SkipSelf",Ft[Ft.Optional=8]="Optional",Ft))();let ip;function Io(t){const n=ip;return ip=t,n}function vb(t,n,e){const i=ep(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Ft.Optional?null:void 0!==n?n:void rd(Mi(t),"Injector")}function Vo(t){return{toString:t}.toString()}var fa=(()=>((fa=fa||{})[fa.OnPush=0]="OnPush",fa[fa.Default=1]="Default",fa))(),Fa=(()=>{return(t=Fa||(Fa={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Fa;var t})();const tx="undefined"!=typeof globalThis&&globalThis,ix="undefined"!=typeof window&&window,nx="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ii=tx||"undefined"!=typeof global&&global||ix||nx,Ls={},Fi=[],od=Ni({\u0275cmp:Ni}),np=Ni({\u0275dir:Ni}),rp=Ni({\u0275pipe:Ni}),mb=Ni({\u0275mod:Ni}),so=Ni({\u0275fac:Ni}),uc=Ni({__NG_ELEMENT_ID__:Ni});let rx=0;function _t(t){return Vo(()=>{const e={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===fa.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Fi,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Fa.Emulated,id:"c",styles:t.styles||Fi,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,a=t.features,o=t.pipes;return i.id+=rx++,i.inputs=wb(t.inputs,e),i.outputs=wb(t.outputs),a&&a.forEach(s=>s(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(bb):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(_b):null,i})}function bb(t){return Yn(t)||function Oo(t){return t[np]||null}(t)}function _b(t){return function ns(t){return t[rp]||null}(t)}const yb={};function ki(t){return Vo(()=>{const n={type:t.type,bootstrap:t.bootstrap||Fi,declarations:t.declarations||Fi,imports:t.imports||Fi,exports:t.exports||Fi,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(yb[t.id]=t.type),n})}function wb(t,n){if(null==t)return Ls;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),e[r]=i,n&&(n[r]=a)}return e}const je=_t;function Cr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Yn(t){return t[od]||null}function Qr(t,n){const e=t[mb]||null;if(!e&&!0===n)throw new Error(`Type ${Mi(t)} does not have '\u0275mod' property.`);return e}function Ba(t){return Array.isArray(t)&&"object"==typeof t[1]}function ga(t){return Array.isArray(t)&&!0===t[1]}function sp(t){return 0!=(8&t.flags)}function ud(t){return 2==(2&t.flags)}function dd(t){return 1==(1&t.flags)}function va(t){return null!==t.template}function ux(t){return 0!=(512&t[2])}function ss(t,n){return t.hasOwnProperty(so)?t[so]:null}class fx{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function zn(){return Cb}function Cb(t){return t.type.prototype.ngOnChanges&&(t.setInput=gx),px}function px(){const t=Db(this),n=null==t?void 0:t.current;if(n){const e=t.previous;if(e===Ls)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function gx(t,n,e,i){const r=Db(t)||function vx(t,n){return t[Tb]=n}(t,{previous:Ls,current:null}),a=r.current||(r.current={}),o=r.previous,s=this.declaredInputs[e],l=o[s];a[s]=new fx(l&&l.currentValue,n,o===Ls),t[i]=n}zn.ngInherit=!0;const Tb="__ngSimpleChanges__";function Db(t){return t[Tb]||null}let hp;function fp(){return void 0!==hp?hp:"undefined"!=typeof document?document:void 0}function dn(t){return!!t.listen}const Rb={createRenderer:(t,n)=>fp()};function Dn(t){for(;Array.isArray(t);)t=t[0];return t}function hd(t,n){return Dn(n[t])}function Jr(t,n){return Dn(n[t.index])}function pp(t,n){return t.data[n]}function js(t,n){return t[n]}function Or(t,n){const e=n[t];return Ba(e)?e:e[0]}function xb(t){return 4==(4&t[2])}function gp(t){return 128==(128&t[2])}function No(t,n){return null==n?null:t[n]}function Mb(t){t[18]=0}function vp(t,n){t[5]+=n;let e=t,i=t[3];for(;null!==i&&(1===n&&1===e[5]||-1===n&&0===e[5]);)i[5]+=n,e=i,i=i[3]}const Pt={lFrame:Nb(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function kb(){return Pt.bindingsEnabled}function Me(){return Pt.lFrame.lView}function ci(){return Pt.lFrame.tView}function B(t){return Pt.lFrame.contextLView=t,t[8]}function En(){let t=Ab();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ab(){return Pt.lFrame.currentTNode}function pc(){const t=Pt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function La(t,n){const e=Pt.lFrame;e.currentTNode=t,e.isParent=n}function mp(){return Pt.lFrame.isParent}function bp(){Pt.lFrame.isParent=!1}function fd(){return Pt.isInCheckNoChangesMode}function pd(t){Pt.isInCheckNoChangesMode=t}function lr(){const t=Pt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function lo(){return Pt.lFrame.bindingIndex}function $s(){return Pt.lFrame.bindingIndex++}function co(t){const n=Pt.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Eb(t){Pt.lFrame.inI18n=t}function Ix(t,n){const e=Pt.lFrame;e.bindingIndex=e.bindingRootIndex=t,_p(n)}function _p(t){Pt.lFrame.currentDirectiveIndex=t}function Ib(){return Pt.lFrame.currentQueryIndex}function wp(t){Pt.lFrame.currentQueryIndex=t}function Ox(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Vb(t,n,e){if(e&Ft.SkipSelf){let r=n,a=t;for(;!(r=r.parent,null!==r||e&Ft.Host||(r=Ox(a),null===r||(a=a[15],10&r.type))););if(null===r)return!1;n=r,t=a}const i=Pt.lFrame=Ob();return i.currentTNode=n,i.lView=t,!0}function gd(t){const n=Ob(),e=t[1];Pt.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Ob(){const t=Pt.lFrame,n=null===t?null:t.child;return null===n?Nb(t):n}function Nb(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Fb(){const t=Pt.lFrame;return Pt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Bb=Fb;function vd(){const t=Fb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function cr(){return Pt.lFrame.selectedIndex}function Fo(t){Pt.lFrame.selectedIndex=t}function hn(){const t=Pt.lFrame;return pp(t.tView,t.selectedIndex)}function md(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const a=t.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=a;o&&(t.contentHooks||(t.contentHooks=[])).push(-e,o),s&&((t.contentHooks||(t.contentHooks=[])).push(e,s),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,s)),l&&(t.viewHooks||(t.viewHooks=[])).push(-e,l),c&&((t.viewHooks||(t.viewHooks=[])).push(e,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,c)),null!=u&&(t.destroyHooks||(t.destroyHooks=[])).push(e,u)}}function bd(t,n,e){Lb(t,n,3,e)}function _d(t,n,e,i){(3&t[2])===e&&Lb(t,n,e,i)}function Sp(t,n){let e=t[2];(3&e)===n&&(e&=2047,e+=1,t[2]=e)}function Lb(t,n,e,i){const a=null!=i?i:-1,o=n.length-1;let s=0;for(let l=void 0!==i?65535&t[18]:0;l<o;l++)if("number"==typeof n[l+1]){if(s=n[l],null!=i&&s>=i)break}else n[l]<0&&(t[18]+=65536),(s<a||-1==a)&&(jx(t,e,n,l),t[18]=(4294901760&t[18])+l+2),l++}function jx(t,n,e,i){const r=e[i]<0,a=e[i+1],s=t[r?-e[i]:e[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{a.call(s)}finally{}}}else try{a.call(s)}finally{}}class gc{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function yd(t,n,e){const i=dn(t);let r=0;for(;r<e.length;){const a=e[r];if("number"==typeof a){if(0!==a)break;r++;const o=e[r++],s=e[r++],l=e[r++];i?t.setAttribute(n,s,l,o):n.setAttributeNS(o,s,l)}else{const o=a,s=e[++r];Tp(o)?i&&t.setProperty(n,o,s):i?t.setAttribute(n,o,s):n.setAttribute(o,s),r++}}return r}function Ub(t){return 3===t||4===t||6===t}function Tp(t){return 64===t.charCodeAt(0)}function wd(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||Hb(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function Hb(t,n,e,i,r){let a=0,o=t.length;if(-1===n)o=-1;else for(;a<t.length;){const s=t[a++];if("number"==typeof s){if(s===n){o=-1;break}if(s>n){o=a-1;break}}}for(;a<t.length;){const s=t[a];if("number"==typeof s)break;if(s===e){if(null===i)return void(null!==r&&(t[a+1]=r));if(i===t[a+1])return void(t[a+2]=r)}a++,null!==i&&a++,null!==r&&a++}-1!==o&&(t.splice(o,0,n),a=o+1),t.splice(a++,0,e),null!==i&&t.splice(a++,0,i),null!==r&&t.splice(a++,0,r)}function Gb(t){return-1!==t}function Ws(t){return 32767&t}function qs(t,n){let e=function Yx(t){return t>>16}(t),i=n;for(;e>0;)i=i[15],e--;return i}let Dp=!0;function Sd(t){const n=Dp;return Dp=t,n}let Qx=0;function mc(t,n){const e=xp(t,n);if(-1!==e)return e;const i=n[1];i.firstCreatePass&&(t.injectorIndex=n.length,Rp(i.data,t),Rp(n,null),Rp(i.blueprint,null));const r=Cd(t,n),a=t.injectorIndex;if(Gb(r)){const o=Ws(r),s=qs(r,n),l=s[1].data;for(let c=0;c<8;c++)n[a+c]=s[o+c]|l[o+c]}return n[a+8]=r,a}function Rp(t,n){t.push(0,0,0,0,0,0,0,0,n)}function xp(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Cd(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){const a=r[1],o=a.type;if(i=2===o?a.declTNode:1===o?r[6]:null,null===i)return-1;if(e++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return-1}function Td(t,n,e){!function Kx(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(uc)&&(i=e[uc]),null==i&&(i=e[uc]=Qx++);const r=255&i;n.data[t+(r>>5)]|=1<<r}(t,n,e)}function $b(t,n,e){if(e&Ft.Optional)return t;rd(n,"NodeInjector")}function Wb(t,n,e,i){if(e&Ft.Optional&&void 0===i&&(i=null),0==(e&(Ft.Self|Ft.Host))){const r=t[9],a=Io(void 0);try{return r?r.get(n,i,e&Ft.Optional):vb(n,i,e&Ft.Optional)}finally{Io(a)}}return $b(i,n,e)}function qb(t,n,e,i=Ft.Default,r){if(null!==t){const a=function tM(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(uc)?t[uc]:void 0;return"number"==typeof n?n>=0?255&n:Jx:n}(e);if("function"==typeof a){if(!Vb(n,t,i))return i&Ft.Host?$b(r,e,i):Wb(n,e,i,r);try{const o=a(i);if(null!=o||i&Ft.Optional)return o;rd(e)}finally{Bb()}}else if("number"==typeof a){let o=null,s=xp(t,n),l=-1,c=i&Ft.Host?n[16][6]:null;for((-1===s||i&Ft.SkipSelf)&&(l=-1===s?Cd(t,n):n[s+8],-1!==l&&Qb(i,!1)?(o=n[1],s=Ws(l),n=qs(l,n)):s=-1);-1!==s;){const u=n[1];if(Yb(a,s,u.data)){const d=eM(s,n,e,o,i,c);if(d!==Xb)return d}l=n[s+8],-1!==l&&Qb(i,n[1].data[s+8]===c)&&Yb(a,s,n)?(o=u,s=Ws(l),n=qs(l,n)):s=-1}}}return Wb(n,e,i,r)}const Xb={};function Jx(){return new Xs(En(),Me())}function eM(t,n,e,i,r,a){const o=n[1],s=o.data[t+8],u=Dd(s,o,e,null==i?ud(s)&&Dp:i!=o&&0!=(3&s.type),r&Ft.Host&&a===s);return null!==u?bc(n,o,u,s):Xb}function Dd(t,n,e,i,r){const a=t.providerIndexes,o=n.data,s=1048575&a,l=t.directiveStart,u=a>>20,v=r?s+u:t.directiveEnd;for(let m=i?s:s+u;m<v;m++){const b=o[m];if(m<l&&e===b||m>=l&&b.type===e)return m}if(r){const m=o[l];if(m&&va(m)&&m.type===e)return l}return null}function bc(t,n,e,i){let r=t[e];const a=n.data;if(function $x(t){return t instanceof gc}(r)){const o=r;o.resolving&&function q2(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new li(-200,`Circular dependency in DI detected for ${t}${e}`)}(sr(a[e]));const s=Sd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Io(o.injectImpl):null;Vb(t,i,Ft.Default);try{r=t[e]=o.factory(void 0,a,t,i),n.firstCreatePass&&e>=i.directiveStart&&function zx(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:a}=n.type.prototype;if(i){const o=Cb(n);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),a&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,a),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,a))}(e,a[e],n)}finally{null!==l&&Io(l),Sd(s),o.resolving=!1,Bb()}}return r}function Yb(t,n,e){return!!(e[n+(t>>5)]&1<<t)}function Qb(t,n){return!(t&Ft.Self||t&Ft.Host&&n)}class Xs{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return qb(this._tNode,this._lView,n,i,e)}}function Kn(t){return Vo(()=>{const n=t.prototype.constructor,e=n[so]||Mp(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const a=r[so]||Mp(r);if(a&&a!==e)return a;r=Object.getPrototypeOf(r)}return a=>new a})}function Mp(t){return hb(t)?()=>{const n=Mp(zt(t));return n&&n()}:ss(t)}const Qs="__parameters__";function Zs(t,n,e){return Vo(()=>{const i=function kp(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...a){if(this instanceof r)return i.apply(this,a),this;const o=new r(...a);return s.annotation=o,s;function s(l,c,u){const d=l.hasOwnProperty(Qs)?l[Qs]:Object.defineProperty(l,Qs,{value:[]})[Qs];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class Yt{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=at({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const nM=new Yt("AnalyzeForEntryComponents");function ea(t,n){void 0===n&&(n=t);for(let e=0;e<t.length;e++){let i=t[e];Array.isArray(i)?(n===t&&(n=t.slice(0,e)),ea(i,n)):n!==t&&n.push(i)}return n}function Ua(t,n){t.forEach(e=>Array.isArray(e)?Ua(e,n):n(e))}function Zb(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Rd(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function wc(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function Nr(t,n,e){let i=Js(t,n);return i>=0?t[1|i]=e:(i=~i,function oM(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function Pp(t,n){const e=Js(t,n);if(e>=0)return t[1|e]}function Js(t,n){return function t1(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const a=i+(r-i>>1),o=t[a<<e];if(n===o)return a<<e;o>n?r=a:i=a+1}return~(r<<e)}(t,n,1)}const Sc={},Ip="__NG_DI_FLAG__",Md="ngTempTokenPath",fM=/\n/gm,n1="__source",gM=Ni({provide:String,useValue:Ni});let Cc;function r1(t){const n=Cc;return Cc=t,n}function vM(t,n=Ft.Default){if(void 0===Cc)throw new li(203,"");return null===Cc?vb(t,void 0,n):Cc.get(t,n&Ft.Optional?null:void 0,n)}function Ue(t,n=Ft.Default){return(function ex(){return ip}()||vM)(zt(t),n)}function Vp(t){const n=[];for(let e=0;e<t.length;e++){const i=zt(t[e]);if(Array.isArray(i)){if(0===i.length)throw new li(900,"");let r,a=Ft.Default;for(let o=0;o<i.length;o++){const s=i[o],l=mM(s);"number"==typeof l?-1===l?r=s.token:a|=l:r=s}n.push(Ue(r,a))}else n.push(Ue(i))}return n}function Tc(t,n){return t[Ip]=n,t.prototype[Ip]=n,t}function mM(t){return t[Ip]}const Dc=Tc(Zs("Inject",t=>({token:t})),-1),Ha=Tc(Zs("Optional"),8),el=Tc(Zs("SkipSelf"),4);let Ad,Pd;function il(t){var n;return(null===(n=function Np(){if(void 0===Ad&&(Ad=null,Ii.trustedTypes))try{Ad=Ii.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Ad}())||void 0===n?void 0:n.createHTML(t))||t}function u1(t){var n;return(null===(n=function Fp(){if(void 0===Pd&&(Pd=null,Ii.trustedTypes))try{Pd=Ii.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Pd}())||void 0===n?void 0:n.createHTML(t))||t}class cs{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class AM extends cs{getTypeName(){return"HTML"}}class PM extends cs{getTypeName(){return"Style"}}class EM extends cs{getTypeName(){return"Script"}}class IM extends cs{getTypeName(){return"URL"}}class VM extends cs{getTypeName(){return"ResourceURL"}}function Fr(t){return t instanceof cs?t.changingThisBreaksApplicationSecurity:t}function Ga(t,n){const e=f1(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===n}function f1(t){return t instanceof cs&&t.getTypeName()||null}function p1(t){const n=new HM(t);return function GM(){try{return!!(new window.DOMParser).parseFromString(il(""),"text/html")}catch(t){return!1}}()?new UM(n):n}class UM{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(il(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class HM{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const i=this.inertDocument.createElement("body");e.appendChild(i)}}getInertBodyElement(n){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=il(n),e;const i=this.inertDocument.createElement("body");return i.innerHTML=il(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(n){const e=n.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&n.removeAttribute(o)}let i=n.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const zM=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,jM=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function xc(t){return(t=String(t)).match(zM)||t.match(jM)?t:"unsafe:"+t}function g1(t){return(t=String(t)).split(",").map(n=>xc(n.trim())).join(", ")}function za(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function Mc(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const v1=za("area,br,col,hr,img,wbr"),m1=za("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),b1=za("rp,rt"),Bp=Mc(v1,Mc(m1,za("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Mc(b1,za("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Mc(b1,m1)),Lp=za("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Up=za("srcset"),_1=Mc(Lp,Up,za("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),za("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$M=za("script,style,template");class WM{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!Bp.hasOwnProperty(e))return this.sanitizedSomething=!0,!$M.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const a=i.item(r),o=a.name,s=o.toLowerCase();if(!_1.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let l=a.value;Lp[s]&&(l=xc(l)),Up[s]&&(l=g1(l)),this.buf.push(" ",o,'="',y1(l),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();Bp.hasOwnProperty(e)&&!v1.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(y1(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const qM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,XM=/([^\#-~ |!])/g;function y1(t){return t.replace(/&/g,"&amp;").replace(qM,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(XM,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ed;function w1(t,n){let e=null;try{Ed=Ed||p1(t);let i=n?String(n):"";e=Ed.getInertBodyElement(i);let r=5,a=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=a,a=e.innerHTML,e=Ed.getInertBodyElement(i)}while(i!==a);return il((new WM).sanitizeChildren(Hp(e)||e))}finally{if(e){const i=Hp(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Hp(t){return"content"in t&&function YM(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ri=(()=>((ri=ri||{})[ri.NONE=0]="NONE",ri[ri.HTML=1]="HTML",ri[ri.STYLE=2]="STYLE",ri[ri.SCRIPT=3]="SCRIPT",ri[ri.URL=4]="URL",ri[ri.RESOURCE_URL=5]="RESOURCE_URL",ri))();function Bt(t){const n=function kc(){const t=Me();return t&&t[12]}();return n?u1(n.sanitize(ri.HTML,t)||""):Ga(t,"HTML")?u1(Fr(t)):w1(fp(),Vt(t))}const T1="__ngContext__";function Zn(t,n){t[T1]=n}function jp(t){const n=function Ac(t){return t[T1]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function Wp(t){return t.ngOriginalError}function dk(t,...n){t.error(...n)}class nl{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n),i=function uk(t){return t&&t.ngErrorLogger||dk}(n);i(this._console,"ERROR",n),e&&i(this._console,"ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&Wp(n);for(;e&&Wp(e);)e=Wp(e);return e||null}}const pk=/^>|^->|<!--|-->|--!>|<!-$/g,gk=/(<|>)/;const k1=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ii))();function uo(t){return t.ownerDocument.defaultView}function ja(t){return t instanceof Function?t():t}var Br=(()=>((Br=Br||{})[Br.Important=1]="Important",Br[Br.DashCase=2]="DashCase",Br))();let qp;function Xp(t,n){return qp(t,n)}function Pc(t){const n=t[3];return ga(n)?n[3]:n}function Yp(t){return V1(t[13])}function Qp(t){return V1(t[4])}function V1(t){for(;null!==t&&!ga(t);)t=t[4];return t}function al(t,n,e,i,r){if(null!=i){let a,o=!1;ga(i)?a=i:Ba(i)&&(o=!0,i=i[0]);const s=Dn(i);0===t&&null!==e?null==r?U1(n,e,s):us(n,e,s,r||null,!0):1===t&&null!==e?us(n,e,s,r||null,!0):2===t?q1(n,s,o):3===t&&n.destroyNode(s),null!=a&&function Nk(t,n,e,i,r){const a=e[7];a!==Dn(e)&&al(n,t,i,a,r);for(let s=10;s<e.length;s++){const l=e[s];Ec(l[1],l,t,n,i,a)}}(n,t,a,e,r)}}function Kp(t,n){return dn(t)?t.createText(n):t.createTextNode(n)}function O1(t,n,e){dn(t)?t.setValue(n,e):n.textContent=e}function Tk(t,n){return t.createComment(function M1(t){return t.replace(pk,n=>n.replace(gk,"\u200b$1\u200b"))}(n))}function Zp(t,n,e){if(dn(t))return t.createElement(n,e);{const i=null!==e?function yx(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(e):null;return null===i?t.createElement(n):t.createElementNS(i,n)}}function N1(t,n){const e=t[9],i=e.indexOf(n),r=n[3];1024&n[2]&&(n[2]&=-1025,vp(r,-1)),e.splice(i,1)}function Jp(t,n){if(t.length<=10)return;const e=10+n,i=t[e];if(i){const r=i[17];null!==r&&r!==t&&N1(r,i),n>0&&(t[e-1][4]=i[4]);const a=Rd(t,10+n);!function Dk(t,n){Ec(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(i[1],i);const o=a[19];null!==o&&o.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function F1(t,n){if(!(256&n[2])){const e=n[11];dn(e)&&e.destroyNode&&Ec(t,n,e,3,null,null),function Mk(t){let n=t[13];if(!n)return eg(t[1],t);for(;n;){let e=null;if(Ba(n))e=n[13];else{const i=n[10];i&&(e=i)}if(!e){for(;n&&!n[4]&&n!==t;)Ba(n)&&eg(n[1],n),n=n[3];null===n&&(n=t),Ba(n)&&eg(n[1],n),e=n&&n[4]}n=e}}(n)}}function eg(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function Ek(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof gc)){const a=e[i+1];if(Array.isArray(a))for(let o=0;o<a.length;o+=2){const s=r[a[o]],l=a[o+1];try{l.call(s)}finally{}}else try{a.call(r)}finally{}}}}(t,n),function Pk(t,n){const e=t.cleanup,i=n[7];let r=-1;if(null!==e)for(let a=0;a<e.length-1;a+=2)if("string"==typeof e[a]){const o=e[a+1],s="function"==typeof o?o(n):Dn(n[o]),l=i[r=e[a+2]],c=e[a+3];"boolean"==typeof c?s.removeEventListener(e[a],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),a+=2}else{const o=i[r=e[a+1]];e[a].call(o)}if(null!==i){for(let a=r+1;a<i.length;a++)i[a]();n[7]=null}}(t,n),1===n[1].type&&dn(n[11])&&n[11].destroy();const e=n[17];if(null!==e&&ga(n[3])){e!==n[3]&&N1(e,n);const i=n[19];null!==i&&i.detachView(t)}}}function B1(t,n,e){return L1(t,n.parent,e)}function L1(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[0];if(2&i.flags){const r=t.data[i.directiveStart].encapsulation;if(r===Fa.None||r===Fa.Emulated)return null}return Jr(i,e)}function us(t,n,e,i,r){dn(t)?t.insertBefore(n,e,i,r):n.insertBefore(e,i,r)}function U1(t,n,e){dn(t)?t.appendChild(n,e):n.appendChild(e)}function H1(t,n,e,i,r){null!==i?us(t,n,e,i,r):U1(t,n,e)}function Id(t,n){return dn(t)?t.parentNode(n):n.parentNode}function G1(t,n,e){return j1(t,n,e)}function z1(t,n,e){return 40&t.type?Jr(t,e):null}let tg,j1=z1;function $1(t,n){j1=t,tg=n}function Vd(t,n,e,i){const r=B1(t,i,n),a=n[11],s=G1(i.parent||n[6],i,n);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)H1(a,r,e[l],s,!1);else H1(a,r,e,s,!1);void 0!==tg&&tg(a,i,n,e,r)}function Od(t,n){if(null!==n){const e=n.type;if(3&e)return Jr(n,t);if(4&e)return ig(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return Od(t,i);{const r=t[n.index];return ga(r)?ig(-1,r):Dn(r)}}if(32&e)return Xp(n,t)()||Dn(t[n.index]);{const i=W1(t,n);return null!==i?Array.isArray(i)?i[0]:Od(Pc(t[16]),i):Od(t,n.next)}}return null}function W1(t,n){return null!==n?t[16][6].projection[n.projection]:null}function ig(t,n){const e=10+t+1;if(e<n.length){const i=n[e],r=i[1].firstChild;if(null!==r)return Od(i,r)}return n[7]}function q1(t,n,e){const i=Id(t,n);i&&function Ik(t,n,e,i){dn(t)?t.removeChild(n,e,i):n.removeChild(e)}(t,i,n,e)}function ng(t,n,e,i,r,a,o){for(;null!=e;){const s=i[e.index],l=e.type;if(o&&0===n&&(s&&Zn(Dn(s),i),e.flags|=4),64!=(64&e.flags))if(8&l)ng(t,n,e.child,i,r,a,!1),al(n,t,r,s,a);else if(32&l){const c=Xp(e,i);let u;for(;u=c();)al(n,t,r,u,a);al(n,t,r,s,a)}else 16&l?X1(t,n,i,e,r,a):al(n,t,r,s,a);e=o?e.projectionNext:e.next}}function Ec(t,n,e,i,r,a){ng(e,i,t.firstChild,n,r,a,!1)}function X1(t,n,e,i,r,a){const o=e[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)al(n,t,r,l[c],a);else ng(t,n,l,o[3],r,a,!0)}function Y1(t,n,e){dn(t)?t.setAttribute(n,"style",e):n.style.cssText=e}function rg(t,n,e){dn(t)?""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e):n.className=e}function Q1(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const a=n.length;if(r+a===i||t.charCodeAt(r+a)<=32)return r}e=r+1}}const K1="ng-template";function Bk(t,n,e){let i=0;for(;i<t.length;){let r=t[i++];if(e&&"class"===r){if(r=t[i],-1!==Q1(r.toLowerCase(),n,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===n)return!0;return!1}}return!1}function Z1(t){return 4===t.type&&t.value!==K1}function Lk(t,n,e){return n===(4!==t.type||e?t.value:K1)}function Uk(t,n,e){let i=4;const r=t.attrs||[],a=function zk(t){for(let n=0;n<t.length;n++)if(Ub(t[n]))return n;return t.length}(r);let o=!1;for(let s=0;s<n.length;s++){const l=n[s];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!Lk(t,l,e)||""===l&&1===n.length){if(ma(i))return!1;o=!0}}else{const c=8&i?l:n[++s];if(8&i&&null!==t.attrs){if(!Bk(t.attrs,c,e)){if(ma(i))return!1;o=!0}continue}const d=Hk(8&i?"class":l,r,Z1(t),e);if(-1===d){if(ma(i))return!1;o=!0;continue}if(""!==c){let v;v=d>a?"":r[d+1].toLowerCase();const m=8&i?v:null;if(m&&-1!==Q1(m,c,0)||2&i&&c!==v){if(ma(i))return!1;o=!0}}}}else{if(!o&&!ma(i)&&!ma(l))return!1;if(o&&ma(l))continue;o=!1,i=l|1&i}}return ma(i)||o}function ma(t){return 0==(1&t)}function Hk(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let a=!1;for(;r<n.length;){const o=n[r];if(o===t)return r;if(3===o||6===o)a=!0;else{if(1===o||2===o){let s=n[++r];for(;"string"==typeof s;)s=n[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=a?1:2}return-1}return function jk(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function J1(t,n,e=!1){for(let i=0;i<n.length;i++)if(Uk(t,n[i],e))return!0;return!1}function $k(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function e_(t,n){return t?":not("+n.trim()+")":n}function Wk(t){let n=t[0],e=1,i=2,r="",a=!1;for(;e<t.length;){let o=t[e];if("string"==typeof o)if(2&i){const s=t[++e];r+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ma(o)&&(n+=e_(a,r),r=""),i=o,a=a||!ma(i);e++}return""!==r&&(n+=e_(a,r)),n}const Ot={};function p(t){t_(ci(),Me(),cr()+t,fd())}function t_(t,n,e,i){if(!i)if(3==(3&n[2])){const a=t.preOrderCheckHooks;null!==a&&bd(n,a,e)}else{const a=t.preOrderHooks;null!==a&&_d(n,a,0,e)}Fo(e)}function Nd(t,n){return t<<17|n<<2}function ba(t){return t>>17&32767}function ag(t){return 2|t}function ho(t){return(131068&t)>>2}function og(t,n){return-131069&t|n<<2}function sg(t){return 1|t}function h_(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const r=e[i],a=e[i+1];if(-1!==a){const o=t.data[a];wp(r),o.contentQueries(2,n[a],a)}}}function Ic(t,n,e,i,r,a,o,s,l,c){const u=n.blueprint.slice();return u[0]=r,u[2]=140|i,Mb(u),u[3]=u[15]=t,u[8]=e,u[10]=o||t&&t[10],u[11]=s||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=a,u[16]=2==n.type?t[16]:u,u}function ol(t,n,e,i,r){let a=t.data[n];if(null===a)a=vg(t,n,e,i,r),function Ex(){return Pt.lFrame.inI18n}()&&(a.flags|=64);else if(64&a.type){a.type=e,a.value=i,a.attrs=r;const o=pc();a.injectorIndex=null===o?-1:o.injectorIndex}return La(a,!0),a}function vg(t,n,e,i,r){const a=Ab(),o=mp(),l=t.data[n]=function uA(t,n,e,i,r,a){return{type:e,index:i,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=l),null!==a&&(o?null==a.child&&null!==l.parent&&(a.child=l):null===a.next&&(a.next=l)),l}function sl(t,n,e,i){if(0===e)return-1;const r=n.length;for(let a=0;a<e;a++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function Vc(t,n,e){gd(n);try{const i=t.viewQuery;null!==i&&Dg(1,i,e);const r=t.template;null!==r&&f_(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&h_(t,n),t.staticViewQueries&&Dg(2,t.viewQuery,e);const a=t.components;null!==a&&function sA(t,n){for(let e=0;e<n.length;e++)MA(t,n[e])}(n,a)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[2]&=-5,vd()}}function ll(t,n,e,i){const r=n[2];if(256==(256&r))return;gd(n);const a=fd();try{Mb(n),function Pb(t){return Pt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&f_(t,n,e,2,i);const o=3==(3&r);if(!a)if(o){const c=t.preOrderCheckHooks;null!==c&&bd(n,c,null)}else{const c=t.preOrderHooks;null!==c&&_d(n,c,0,null),Sp(n,0)}if(function RA(t){for(let n=Yp(t);null!==n;n=Qp(n)){if(!n[2])continue;const e=n[9];for(let i=0;i<e.length;i++){const r=e[i],a=r[3];0==(1024&r[2])&&vp(a,1),r[2]|=1024}}}(n),function DA(t){for(let n=Yp(t);null!==n;n=Qp(n))for(let e=10;e<n.length;e++){const i=n[e],r=i[1];gp(i)&&ll(r,i,r.template,i[8])}}(n),null!==t.contentQueries&&h_(t,n),!a)if(o){const c=t.contentCheckHooks;null!==c&&bd(n,c)}else{const c=t.contentHooks;null!==c&&_d(n,c,1),Sp(n,1)}!function aA(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let i=0;i<e.length;i++){const r=e[i];if(r<0)Fo(~r);else{const a=r,o=e[++i],s=e[++i];Ix(o,a),s(2,n[a])}}}finally{Fo(-1)}}(t,n);const s=t.components;null!==s&&function oA(t,n){for(let e=0;e<n.length;e++)xA(t,n[e])}(n,s);const l=t.viewQuery;if(null!==l&&Dg(2,l,i),!a)if(o){const c=t.viewCheckHooks;null!==c&&bd(n,c)}else{const c=t.viewHooks;null!==c&&_d(n,c,2),Sp(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),a||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,vp(n[3],-1))}finally{vd()}}function lA(t,n,e,i){const r=n[10],a=!fd(),o=xb(n);try{a&&!o&&r.begin&&r.begin(),o&&Vc(t,n,i),ll(t,n,e,i)}finally{a&&!o&&r.end&&r.end()}}function f_(t,n,e,i,r){const a=cr(),o=2&i;try{Fo(-1),o&&n.length>20&&t_(t,n,20,fd()),e(i,r)}finally{Fo(a)}}function mg(t,n,e){!kb()||(function mA(t,n,e,i){const r=e.directiveStart,a=e.directiveEnd;t.firstCreatePass||mc(e,n),Zn(i,n);const o=e.initialInputs;for(let s=r;s<a;s++){const l=t.data[s],c=va(l);c&&SA(n,e,l);const u=bc(n,t,s,e);Zn(u,n),null!==o&&CA(0,s-r,u,l,0,o),c&&(Or(e.index,n)[8]=u)}}(t,n,e,Jr(e,n)),128==(128&e.flags)&&function bA(t,n,e){const i=e.directiveStart,r=e.directiveEnd,o=e.index,s=function Vx(){return Pt.lFrame.currentDirectiveIndex}();try{Fo(o);for(let l=i;l<r;l++){const c=t.data[l],u=n[l];_p(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&S_(c,u)}}finally{Fo(-1),_p(s)}}(t,n,e))}function bg(t,n,e=Jr){const i=n.localNames;if(null!==i){let r=n.index+1;for(let a=0;a<i.length;a+=2){const o=i[a+1],s=-1===o?e(n,t):t[o];t[r++]=s}}}function g_(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Ld(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Ld(t,n,e,i,r,a,o,s,l,c){const u=20+i,d=u+r,v=function cA(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:Ot);return e}(u,d),m="function"==typeof c?c():c;return v[1]={type:t,blueprint:v,template:e,queries:null,viewQuery:s,declTNode:n,data:v.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1}}function b_(t,n,e,i){const r=M_(n);null===e?r.push(i):(r.push(e),t.firstCreatePass&&k_(t).push(i,r.length-1))}function __(t,n,e){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(e=null===e?{}:e).hasOwnProperty(i)?e[i].push(n,r):e[i]=[n,r]}return e}function Lr(t,n,e,i,r,a,o,s){const l=Jr(n,e);let u,c=n.inputs;!s&&null!=c&&(u=c[i])?(E_(t,e,u,i,r),ud(n)&&function fA(t,n){const e=Or(n,t);16&e[2]||(e[2]|=64)}(e,n.index)):3&n.type&&(i=function hA(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,n.value||"",i):r,dn(a)?a.setProperty(l,i,r):Tp(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function _g(t,n,e,i){let r=!1;if(kb()){const a=function _A(t,n,e){const i=t.directiveRegistry;let r=null;if(i)for(let a=0;a<i.length;a++){const o=i[a];J1(e,o.selectors,!1)&&(r||(r=[]),Td(mc(e,n),t,o.type),va(o)?(C_(t,e),r.unshift(o)):r.push(o))}return r}(t,n,e),o=null===i?null:{"":-1};if(null!==a){r=!0,T_(e,t.data.length,a.length);for(let u=0;u<a.length;u++){const d=a[u];d.providersResolver&&d.providersResolver(d)}let s=!1,l=!1,c=sl(t,n,a.length,null);for(let u=0;u<a.length;u++){const d=a[u];e.mergedAttrs=wd(e.mergedAttrs,d.hostAttrs),D_(t,e,n,c,d),wA(c,d,o),null!==d.contentQueries&&(e.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=128);const v=d.type.prototype;!s&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),s=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),l=!0),c++}!function dA(t,n){const i=n.directiveEnd,r=t.data,a=n.attrs,o=[];let s=null,l=null;for(let c=n.directiveStart;c<i;c++){const u=r[c],d=u.inputs,v=null===a||Z1(n)?null:TA(d,a);o.push(v),s=__(d,c,s),l=__(u.outputs,c,l)}null!==s&&(s.hasOwnProperty("class")&&(n.flags|=16),s.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=o,n.inputs=s,n.outputs=l}(t,e)}o&&function yA(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const a=e[n[r+1]];if(null==a)throw new li(-301,!1);i.push(n[r],a)}}}(e,i,o)}return e.mergedAttrs=wd(e.mergedAttrs,e.attrs),r}function w_(t,n,e,i,r,a){const o=a.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const l=~n.index;(function vA(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(s)!=l&&s.push(l),s.push(i,r,o)}}function S_(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function C_(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function wA(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;va(n)&&(e[""]=t)}}function T_(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function D_(t,n,e,i,r){t.data[i]=r;const a=r.factory||(r.factory=ss(r.type)),o=new gc(a,va(r),null);t.blueprint[i]=o,e[i]=o,w_(t,n,0,i,sl(t,e,r.hostVars,Ot),r)}function SA(t,n,e){const i=Jr(n,t),r=g_(e),a=t[10],o=Ud(t,Ic(t,r,null,e.onPush?64:16,i,n,a,a.createRenderer(i,e),null,null));t[n.index]=o}function yg(t,n,e,i,r,a,o){if(null==a)dn(t)?t.removeAttribute(n,r,e):n.removeAttribute(r);else{const s=null==o?Vt(a):o(a,i||"",r);dn(t)?t.setAttribute(n,r,s,e):e?n.setAttributeNS(e,r,s):n.setAttribute(r,s)}}function CA(t,n,e,i,r,a){const o=a[n];if(null!==o){const s=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==s?i.setInput(e,d,c,u):e[u]=d}}}function TA(t,n){let e=null,i=0;for(;i<n.length;){const r=n[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],n[i+1])),i+=2}else i+=2;else i+=4}return e}function R_(t,n,e,i){return new Array(t,!0,!1,n,null,0,i,e,null,null)}function xA(t,n){const e=Or(n,t);if(gp(e)){const i=e[1];80&e[2]?ll(i,e,i.template,e[8]):e[5]>0&&wg(e)}}function wg(t){for(let i=Yp(t);null!==i;i=Qp(i))for(let r=10;r<i.length;r++){const a=i[r];if(1024&a[2]){const o=a[1];ll(o,a,o.template,a[8])}else a[5]>0&&wg(a)}const e=t[1].components;if(null!==e)for(let i=0;i<e.length;i++){const r=Or(e[i],t);gp(r)&&r[5]>0&&wg(r)}}function MA(t,n){const e=Or(n,t),i=e[1];(function kA(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(i,e),Vc(i,e,e[8])}function Ud(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Sg(t){for(;t;){t[2]|=64;const n=Pc(t);if(ux(t)&&!n)return t;t=n}return null}function Tg(t,n,e){const i=n[10];i.begin&&i.begin();try{ll(t,n,t.template,e)}catch(r){throw P_(n,r),r}finally{i.end&&i.end()}}function x_(t){!function Cg(t){for(let n=0;n<t.components.length;n++){const e=t.components[n],i=jp(e),r=i[1];lA(r,i,r.template,e)}}(t[8])}function Dg(t,n,e){wp(0),n(t,e)}const IA=(()=>Promise.resolve(null))();function M_(t){return t[7]||(t[7]=[])}function k_(t){return t.cleanup||(t.cleanup=[])}function P_(t,n){const e=t[9],i=e?e.get(nl,null):null;i&&i.handleError(n)}function E_(t,n,e,i,r){for(let a=0;a<e.length;){const o=e[a++],s=e[a++],l=n[o],c=t.data[o];null!==c.setInput?c.setInput(l,r,i,s):l[s]=r}}function fo(t,n,e){const i=hd(n,t);O1(t[11],i,e)}function Hd(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,a=0;if(null!==n)for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?a=s:1==a?r=Zf(r,s):2==a&&(i=Zf(i,s+": "+n[++o]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}const Rg=new Yt("INJECTOR",-1);class I_{get(n,e=Sc){if(e===Sc){const i=new Error(`NullInjectorError: No provider for ${Mi(n)}!`);throw i.name="NullInjectorError",i}return e}}const xg=new Yt("Set Injector scope."),Oc={},NA={};let Mg;function V_(){return void 0===Mg&&(Mg=new I_),Mg}function O_(t,n=null,e=null,i){const r=N_(t,n,e,i);return r._resolveInjectorDefTypes(),r}function N_(t,n=null,e=null,i){return new FA(t,e,n||V_(),i)}class FA{constructor(n,e,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];e&&Ua(e,s=>this.processProvider(s,n,e)),Ua([n],s=>this.processInjectorType(s,[],a)),this.records.set(Rg,cl(void 0,this));const o=this.records.get(xg);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof n?null:Mi(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,e=Sc,i=Ft.Default){this.assertNotDestroyed();const r=r1(this),a=Io(void 0);try{if(!(i&Ft.SkipSelf)){let s=this.records.get(n);if(void 0===s){const l=function $A(t){return"function"==typeof t||"object"==typeof t&&t instanceof Yt}(n)&&ep(n);s=l&&this.injectableDefInScope(l)?cl(kg(n),Oc):null,this.records.set(n,s)}if(null!=s)return this.hydrate(n,s)}return(i&Ft.Self?V_():this.parent).get(n,e=i&Ft.Optional&&e===Sc?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Md]=o[Md]||[]).unshift(Mi(n)),r)throw o;return function bM(t,n,e,i){const r=t[Md];throw n[n1]&&r.unshift(n[n1]),t.message=function _M(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=Mi(n);if(Array.isArray(n))r=n.map(Mi).join(" -> ");else if("object"==typeof n){let a=[];for(let o in n)if(n.hasOwnProperty(o)){let s=n[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):Mi(s)))}r=`{${a.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(fM,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[Md]=null,t}(o,n,"R3InjectorError",this.source)}throw o}finally{Io(a),r1(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((i,r)=>n.push(Mi(r))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new li(205,!1)}processInjectorType(n,e,i){if(!(n=zt(n)))return!1;let r=pb(n);const a=null==r&&n.ngModule||void 0,o=void 0===a?n:a,s=-1!==i.indexOf(o);if(void 0!==a&&(r=pb(a)),null==r)return!1;if(null!=r.imports&&!s){let u;i.push(o);try{Ua(r.imports,d=>{this.processInjectorType(d,e,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:v,providers:m}=u[d];Ua(m,b=>this.processProvider(b,v,m||Fi))}}this.injectorDefTypes.add(o);const l=ss(o)||(()=>new o);this.records.set(o,cl(l,Oc));const c=r.providers;if(null!=c&&!s){const u=n;Ua(c,d=>this.processProvider(d,u,c))}return void 0!==a&&void 0!==n.providers}processProvider(n,e,i){let r=ul(n=zt(n))?n:zt(n&&n.provide);const a=function LA(t,n,e){return B_(t)?cl(void 0,t.useValue):cl(F_(t),Oc)}(n);if(ul(n)||!0!==n.multi)this.records.get(r);else{let o=this.records.get(r);o||(o=cl(void 0,Oc,!0),o.factory=()=>Vp(o.multi),this.records.set(r,o)),r=n,o.multi.push(n)}this.records.set(r,a)}hydrate(n,e){return e.value===Oc&&(e.value=NA,e.value=e.factory()),"object"==typeof e.value&&e.value&&function jA(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=zt(n.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function kg(t){const n=ep(t),e=null!==n?n.factory:ss(t);if(null!==e)return e;if(t instanceof Yt)throw new li(204,!1);if(t instanceof Function)return function BA(t){const n=t.length;if(n>0)throw wc(n,"?"),new li(204,!1);const e=function K2(t){const n=t&&(t[ad]||t[gb]);if(n){const e=function Z2(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),n}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new li(204,!1)}function F_(t,n,e){let i;if(ul(t)){const r=zt(t);return ss(r)||kg(r)}if(B_(t))i=()=>zt(t.useValue);else if(function HA(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Vp(t.deps||[]));else if(function UA(t){return!(!t||!t.useExisting)}(t))i=()=>Ue(zt(t.useExisting));else{const r=zt(t&&(t.useClass||t.provide));if(!function zA(t){return!!t.deps}(t))return ss(r)||kg(r);i=()=>new r(...Vp(t.deps))}return i}function cl(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function B_(t){return null!==t&&"object"==typeof t&&gM in t}function ul(t){return"function"==typeof t}let Sn=(()=>{class t{static create(e,i){var r;if(Array.isArray(e))return O_({name:""},i,e,"");{const a=null!==(r=e.name)&&void 0!==r?r:"";return O_({name:a},e.parent,e.providers,a)}}}return t.THROW_IF_NOT_FOUND=Sc,t.NULL=new I_,t.\u0275prov=at({token:t,providedIn:"any",factory:()=>Ue(Rg)}),t.__NG_ELEMENT_ID__=-1,t})();function JA(t,n){md(jp(t)[1],En())}function Di(t){let n=function Q_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if(va(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new li(903,"");r=n.\u0275dir}if(r){if(e){i.push(r);const o=t;o.inputs=Eg(t.inputs),o.declaredInputs=Eg(t.declaredInputs),o.outputs=Eg(t.outputs);const s=r.hostBindings;s&&nP(t,s);const l=r.viewQuery,c=r.contentQueries;if(l&&tP(t,l),c&&iP(t,c),Kf(t.inputs,r.inputs),Kf(t.declaredInputs,r.declaredInputs),Kf(t.outputs,r.outputs),va(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const a=r.features;if(a)for(let o=0;o<a.length;o++){const s=a[o];s&&s.ngInherit&&s(t),s===Di&&(e=!1)}}n=Object.getPrototypeOf(n)}!function eP(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=wd(r.hostAttrs,e=wd(e,r.hostAttrs))}}(i)}function Eg(t){return t===Ls?{}:t===Fi?[]:t}function tP(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function iP(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,a)=>{n(i,r,a),e(i,r,a)}:n}function nP(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}let Gd=null;function dl(){if(!Gd){const t=Ii.Symbol;if(t&&t.iterator)Gd=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<n.length;++e){const i=n[e];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Gd=i)}}}return Gd}function Nc(t){return!!Ig(t)&&(Array.isArray(t)||!(t instanceof Map)&&dl()in t)}function Ig(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Wa(t,n,e){return t[n]=e}function Fc(t,n){return t[n]}function Jn(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function ds(t,n,e,i){const r=Jn(t,n,e);return Jn(t,n+1,i)||r}function zd(t,n,e,i,r){const a=ds(t,n,e,i);return Jn(t,n+2,r)||a}function ta(t,n,e,i,r,a){const o=ds(t,n,e,i);return ds(t,n+2,r,a)||o}function Ai(t,n,e,i){const r=Me();return Jn(r,$s(),n)&&(ci(),function $a(t,n,e,i,r,a){const o=Jr(t,n);yg(n[11],o,a,t.value,e,i,r)}(hn(),r,t,n,e,i)),Ai}function fl(t,n,e,i){return Jn(t,$s(),e)?n+Vt(e)+i:Ot}function vl(t,n,e,i,r,a,o,s,l,c){const d=ta(t,lo(),e,r,o,l);return co(4),d?n+Vt(e)+i+Vt(r)+a+Vt(o)+s+Vt(l)+c:Ot}function x(t,n,e,i,r,a,o,s){const l=Me(),c=ci(),u=t+20,d=c.firstCreatePass?function uP(t,n,e,i,r,a,o,s,l){const c=n.consts,u=ol(n,t,4,o||null,No(c,s));_g(n,e,u,No(c,l)),md(n,u);const d=u.tViews=Ld(2,u,i,r,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c);return null!==n.queries&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}(u,c,l,n,e,i,r,a,o):c.data[u];La(d,!1);const v=l[11].createComment("");Vd(c,l,v,d),Zn(v,l),Ud(l,l[u]=R_(v,l,v,d)),dd(d)&&mg(c,l,d),null!=o&&bg(l,d,s)}function lt(t){return js(function Px(){return Pt.lFrame.contextLView}(),20+t)}function P(t,n=Ft.Default){const e=Me();return null===e?Ue(t,n):qb(En(),e,zt(t),n)}function Bg(){throw new Error("invalid")}function _(t,n,e){const i=Me();return Jn(i,$s(),n)&&Lr(ci(),hn(),i,t,n,i[11],e,!1),_}function Lg(t,n,e,i,r){const o=r?"class":"style";E_(t,e,n.inputs[o],o,i)}function f(t,n,e,i){const r=Me(),a=ci(),o=20+t,s=r[11],l=r[o]=Zp(s,n,function Gx(){return Pt.lFrame.currentNamespace}()),c=a.firstCreatePass?function PP(t,n,e,i,r,a,o){const s=n.consts,c=ol(n,t,2,r,No(s,a));return _g(n,e,c,No(s,o)),null!==c.attrs&&Hd(c,c.attrs,!1),null!==c.mergedAttrs&&Hd(c,c.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,c),c}(o,a,r,0,n,e,i):a.data[o];La(c,!0);const u=c.mergedAttrs;null!==u&&yd(s,l,u);const d=c.classes;null!==d&&rg(s,l,d);const v=c.styles;return null!==v&&Y1(s,l,v),64!=(64&c.flags)&&Vd(a,r,l,c),0===function Rx(){return Pt.lFrame.elementDepthCount}()&&Zn(l,r),function xx(){Pt.lFrame.elementDepthCount++}(),dd(c)&&(mg(a,r,c),function p_(t,n,e){if(sp(n)){const r=n.directiveEnd;for(let a=n.directiveStart;a<r;a++){const o=t.data[a];o.contentQueries&&o.contentQueries(1,e[a],a)}}}(a,c,r)),null!==i&&bg(r,c),f}function h(){let t=En();mp()?bp():(t=t.parent,La(t,!1));const n=t;!function Mx(){Pt.lFrame.elementDepthCount--}();const e=ci();return e.firstCreatePass&&(md(e,t),sp(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function qx(t){return 0!=(16&t.flags)}(n)&&Lg(e,n,Me(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Xx(t){return 0!=(32&t.flags)}(n)&&Lg(e,n,Me(),n.stylesWithoutHost,!1),h}function D(t,n,e,i){return f(t,n,e,i),h(),D}function pe(){return Me()}function Bc(t){return!!t&&"function"==typeof t.then}const Gg=function my(t){return!!t&&"function"==typeof t.subscribe};function I(t,n,e,i){const r=Me(),a=ci(),o=En();return function _y(t,n,e,i,r,a,o,s){const l=dd(i),u=t.firstCreatePass&&k_(t),d=n[8],v=M_(n);let m=!0;if(3&i.type||s){const C=Jr(i,n),k=s?s(C):C,w=v.length,R=s?z=>s(Dn(z[i.index])):i.index;if(dn(e)){let z=null;if(!s&&l&&(z=function IP(t,n,e,i){const r=t.cleanup;if(null!=r)for(let a=0;a<r.length-1;a+=2){const o=r[a];if(o===e&&r[a+1]===i){const s=n[7],l=r[a+2];return s.length>l?s[l]:null}"string"==typeof o&&(a+=2)}return null}(t,n,r,i.index)),null!==z)(z.__ngLastListenerFn__||z).__ngNextListenerFn__=a,z.__ngLastListenerFn__=a,m=!1;else{a=zg(i,n,d,a,!1);const q=e.listen(k,r,a);v.push(a,q),u&&u.push(r,R,w,w+1)}}else a=zg(i,n,d,a,!0),k.addEventListener(r,a,o),v.push(a),u&&u.push(r,R,w,o)}else a=zg(i,n,d,a,!1);const b=i.outputs;let y;if(m&&null!==b&&(y=b[r])){const C=y.length;if(C)for(let k=0;k<C;k+=2){const j=n[y[k]][y[k+1]].subscribe(a),ye=v.length;v.push(a,j),u&&u.push(r,i.index,ye,-(ye+1))}}}(a,r,r[11],o,t,n,!!e,i),I}function yy(t,n,e,i){try{return!1!==e(i)}catch(r){return P_(t,r),!1}}function zg(t,n,e,i,r){return function a(o){if(o===Function)return i;const s=2&t.flags?Or(t.index,n):n;0==(32&n[2])&&Sg(s);let l=yy(n,0,i,o),c=a.__ngNextListenerFn__;for(;c;)l=yy(n,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function S(t=1){return function Nx(t){return(Pt.lFrame.contextLView=function Fx(t,n){for(;t>0;)n=n[15],t--;return n}(t,Pt.lFrame.contextLView))[8]}(t)}function VP(t,n){let e=null;const i=function Gk(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(0==(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const a=n[r];if("*"!==a){if(null===i?J1(t,a,!0):$k(i,a))return r}else e=r}return e}function $d(t){const n=Me()[16][6];if(!n.projection){const i=n.projection=wc(t?t.length:1,null),r=i.slice();let a=n.child;for(;null!==a;){const o=t?VP(a,t):0;null!==o&&(r[o]?r[o].projectionNext=a:i[o]=a,r[o]=a),a=a.next}}}function Wd(t,n=0,e){const i=Me(),r=ci(),a=ol(r,20+t,16,null,e||null);null===a.projection&&(a.projection=n),bp(),64!=(64&a.flags)&&function Ok(t,n,e){X1(n[11],0,n,e,B1(t,e,n),G1(e.parent||n[6],e,n))}(r,i,a)}function er(t,n,e){return qd(t,"",n,"",e),er}function qd(t,n,e,i,r){const a=Me(),o=fl(a,n,e,i);return o!==Ot&&Lr(ci(),hn(),a,t,o,a[11],r,!1),qd}function ky(t,n,e,i,r){const a=t[e+1],o=null===n;let s=i?ba(a):ho(a),l=!1;for(;0!==s&&(!1===l||o);){const u=t[s+1];FP(t[s],n)&&(l=!0,t[s+1]=i?sg(u):ag(u)),s=i?ba(u):ho(u)}l&&(t[e+1]=i?ag(a):sg(a))}function FP(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Js(t,n)>=0}const Vn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ay(t){return t.substring(Vn.key,Vn.keyEnd)}function Py(t,n){const e=Vn.textEnd;return e===n?-1:(n=Vn.keyEnd=function HP(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,Vn.key=n,e),Sl(t,n,e))}function Sl(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function Lc(t,n,e){return ya(t,n,e,!1),Lc}function Mt(t,n){return ya(t,n,null,!0),Mt}function Ho(t){wa(Nr,Xa,t,!0)}function Xa(t,n){for(let e=function LP(t){return function Iy(t){Vn.key=0,Vn.keyEnd=0,Vn.value=0,Vn.valueEnd=0,Vn.textEnd=t.length}(t),Py(t,Sl(t,0,Vn.textEnd))}(n);e>=0;e=Py(n,e))Nr(t,Ay(n),!0)}function ya(t,n,e,i){const r=Me(),a=ci(),o=co(2);a.firstUpdatePass&&Fy(a,t,o,i),n!==Ot&&Jn(r,o,n)&&Ly(a,a.data[cr()],r,r[11],t,r[o+1]=function KP(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Mi(Fr(t)))),t}(n,e),i,o)}function wa(t,n,e,i){const r=ci(),a=co(2);r.firstUpdatePass&&Fy(r,null,a,i);const o=Me();if(e!==Ot&&Jn(o,a,e)){const s=r.data[cr()];if(Hy(s,i)&&!Ny(r,a)){let l=i?s.classesWithoutHost:s.stylesWithoutHost;null!==l&&(e=Zf(l,e||"")),Lg(r,s,o,e,i)}else!function QP(t,n,e,i,r,a,o,s){r===Ot&&(r=Fi);let l=0,c=0,u=0<r.length?r[0]:null,d=0<a.length?a[0]:null;for(;null!==u||null!==d;){const v=l<r.length?r[l+1]:void 0,m=c<a.length?a[c+1]:void 0;let y,b=null;u===d?(l+=2,c+=2,v!==m&&(b=d,y=m)):null===d||null!==u&&u<d?(l+=2,b=u):(c+=2,b=d,y=m),null!==b&&Ly(t,n,e,i,b,y,o,s),u=l<r.length?r[l]:null,d=c<a.length?a[c]:null}}(r,s,o,o[11],o[a+1],o[a+1]=function YP(t,n,e){if(null==e||""===e)return Fi;const i=[],r=Fr(e);if(Array.isArray(r))for(let a=0;a<r.length;a++)t(i,r[a],!0);else if("object"==typeof r)for(const a in r)r.hasOwnProperty(a)&&t(i,a,r[a]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,a)}}function Ny(t,n){return n>=t.expandoStartIndex}function Fy(t,n,e,i){const r=t.data;if(null===r[e+1]){const a=r[cr()],o=Ny(t,e);Hy(a,i)&&null===n&&!o&&(n=!1),n=function $P(t,n,e,i){const r=function yp(t){const n=Pt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let a=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=Uc(e=jg(null,t,n,e,i),n.attrs,i),a=null);else{const o=n.directiveStylingLast;if(-1===o||t[o]!==r)if(e=jg(r,t,n,e,i),null===a){let l=function WP(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==ho(i))return t[ba(i)]}(t,n,i);void 0!==l&&Array.isArray(l)&&(l=jg(null,t,n,l[1],i),l=Uc(l,n.attrs,i),function qP(t,n,e,i){t[ba(e?n.classBindings:n.styleBindings)]=i}(t,n,i,l))}else a=function XP(t,n,e){let i;const r=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<r;a++)i=Uc(i,t[a].hostAttrs,e);return Uc(i,n.attrs,e)}(t,n,i)}return void 0!==a&&(i?n.residualClasses=a:n.residualStyles=a),e}(r,a,n,i),function OP(t,n,e,i,r,a){let o=a?n.classBindings:n.styleBindings,s=ba(o),l=ho(o);t[i]=e;let u,c=!1;if(Array.isArray(e)){const d=e;u=d[1],(null===u||Js(d,u)>0)&&(c=!0)}else u=e;if(r)if(0!==l){const v=ba(t[s+1]);t[i+1]=Nd(v,s),0!==v&&(t[v+1]=og(t[v+1],i)),t[s+1]=function Yk(t,n){return 131071&t|n<<17}(t[s+1],i)}else t[i+1]=Nd(s,0),0!==s&&(t[s+1]=og(t[s+1],i)),s=i;else t[i+1]=Nd(l,0),0===s?s=i:t[l+1]=og(t[l+1],i),l=i;c&&(t[i+1]=ag(t[i+1])),ky(t,u,i,!0),ky(t,u,i,!1),function NP(t,n,e,i,r){const a=r?t.residualClasses:t.residualStyles;null!=a&&"string"==typeof n&&Js(a,n)>=0&&(e[i+1]=sg(e[i+1]))}(n,u,t,i,a),o=Nd(s,l),a?n.classBindings=o:n.styleBindings=o}(r,a,n,e,o,i)}}function jg(t,n,e,i,r){let a=null;const o=e.directiveEnd;let s=e.directiveStylingLast;for(-1===s?s=e.directiveStart:s++;s<o&&(a=n[s],i=Uc(i,a.hostAttrs,r),a!==t);)s++;return null!==t&&(e.directiveStylingLast=s),i}function Uc(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let a=0;a<n.length;a++){const o=n[a];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Nr(t,o,!!e||n[++a]))}return void 0===t?null:t}function Ly(t,n,e,i,r,a,o,s){if(!(3&n.type))return;const l=t.data,c=l[s+1];Xd(function r_(t){return 1==(1&t)}(c)?Uy(l,n,e,r,ho(c),o):void 0)||(Xd(a)||function n_(t){return 2==(2&t)}(c)&&(a=Uy(l,null,e,r,s,o)),function Fk(t,n,e,i,r){const a=dn(t);if(n)r?a?t.addClass(e,i):e.classList.add(i):a?t.removeClass(e,i):e.classList.remove(i);else{let o=-1===i.indexOf("-")?void 0:Br.DashCase;if(null==r)a?t.removeStyle(e,i,o):e.style.removeProperty(i);else{const s="string"==typeof r&&r.endsWith("!important");s&&(r=r.slice(0,-10),o|=Br.Important),a?t.setStyle(e,i,r,o):e.style.setProperty(i,r,s?"important":"")}}}(i,o,hd(cr(),e),r,a))}function Uy(t,n,e,i,r,a){const o=null===n;let s;for(;r>0;){const l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let v=e[r+1];v===Ot&&(v=d?Fi:void 0);let m=d?Pp(v,i):u===i?v:void 0;if(c&&!Xd(m)&&(m=Pp(l,i)),Xd(m)&&(s=m,o))return s;const b=t[r+1];r=o?ba(b):ho(b)}if(null!==n){let l=a?n.residualClasses:n.residualStyles;null!=l&&(s=Pp(l,i))}return s}function Xd(t){return void 0!==t}function Hy(t,n){return 0!=(t.flags&(n?16:32))}function g(t,n=""){const e=Me(),i=ci(),r=t+20,a=i.firstCreatePass?ol(i,r,1,n,null):i.data[r],o=e[r]=Kp(e[11],n);Vd(i,e,o,a),La(a,!1)}function nt(t){return Z("",t,""),nt}function Z(t,n,e){const i=Me(),r=fl(i,t,n,e);return r!==Ot&&fo(i,cr(),r),Z}function rn(t,n,e,i,r){const a=Me(),o=function pl(t,n,e,i,r,a){const s=ds(t,lo(),e,r);return co(2),s?n+Vt(e)+i+Vt(r)+a:Ot}(a,t,n,e,i,r);return o!==Ot&&fo(a,cr(),o),rn}function $g(t,n,e,i,r,a,o){const s=Me(),l=function gl(t,n,e,i,r,a,o,s){const c=zd(t,lo(),e,r,o);return co(3),c?n+Vt(e)+i+Vt(r)+a+Vt(o)+s:Ot}(s,t,n,e,i,r,a,o);return l!==Ot&&fo(s,cr(),l),$g}function Wg(t,n,e,i,r,a,o,s,l){const c=Me(),u=vl(c,t,n,e,i,r,a,o,s,l);return u!==Ot&&fo(c,cr(),u),Wg}function qg(t,n,e){wa(Nr,Xa,fl(Me(),t,n,e),!0)}function Go(t,n,e){const i=Me();return Jn(i,$s(),n)&&Lr(ci(),hn(),i,t,n,i[11],e,!0),Go}const hs=void 0;var gE=["en",[["a","p"],["AM","PM"],hs],[["AM","PM"],hs,hs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hs,"{1} 'at' {0}",hs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function pE(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let Cl={};function dr(t){const n=function vE(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=aw(n);if(e)return e;const i=n.split("-")[0];if(e=aw(i),e)return e;if("en"===i)return gE;throw new Error(`Missing locale data for the locale "${t}".`)}function rw(t){return dr(t)[Qe.PluralCase]}function aw(t){return t in Cl||(Cl[t]=Ii.ng&&Ii.ng.common&&Ii.ng.common.locales&&Ii.ng.common.locales[t]),Cl[t]}var Qe=(()=>((Qe=Qe||{})[Qe.LocaleId=0]="LocaleId",Qe[Qe.DayPeriodsFormat=1]="DayPeriodsFormat",Qe[Qe.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qe[Qe.DaysFormat=3]="DaysFormat",Qe[Qe.DaysStandalone=4]="DaysStandalone",Qe[Qe.MonthsFormat=5]="MonthsFormat",Qe[Qe.MonthsStandalone=6]="MonthsStandalone",Qe[Qe.Eras=7]="Eras",Qe[Qe.FirstDayOfWeek=8]="FirstDayOfWeek",Qe[Qe.WeekendRange=9]="WeekendRange",Qe[Qe.DateFormat=10]="DateFormat",Qe[Qe.TimeFormat=11]="TimeFormat",Qe[Qe.DateTimeFormat=12]="DateTimeFormat",Qe[Qe.NumberSymbols=13]="NumberSymbols",Qe[Qe.NumberFormats=14]="NumberFormats",Qe[Qe.CurrencyCode=15]="CurrencyCode",Qe[Qe.CurrencySymbol=16]="CurrencySymbol",Qe[Qe.CurrencyName=17]="CurrencyName",Qe[Qe.Currencies=18]="Currencies",Qe[Qe.Directionality=19]="Directionality",Qe[Qe.PluralCase=20]="PluralCase",Qe[Qe.ExtraData=21]="ExtraData",Qe))();const mE=["zero","one","two","few","many"],Yd="en-US",Qd={marker:"element"},Kd={marker:"ICU"};var fn=(()=>((fn=fn||{})[fn.SHIFT=2]="SHIFT",fn[fn.APPEND_EAGERLY=1]="APPEND_EAGERLY",fn[fn.COMMENT=2]="COMMENT",fn))();let ow=Yd;function sw(t,n,e){const i=n.insertBeforeIndex,r=Array.isArray(i)?i[0]:i;return null===r?z1(t,0,e):Dn(e[r])}function lw(t,n,e,i,r){const a=n.insertBeforeIndex;if(Array.isArray(a)){let o=i,s=null;if(3&n.type||(s=o,o=r),null!==o&&0==(2&n.flags))for(let l=1;l<a.length;l++)us(t,o,e[a[l]],s,!1)}}function cw(t,n){if(t.push(n),t.length>1)for(let e=t.length-2;e>=0;e--){const i=t[e];uw(i)||SE(i,n)&&null===CE(i)&&TE(i,n.index)}}function uw(t){return!(64&t.type)}function SE(t,n){return uw(n)||t.index>n.index}function CE(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function TE(t,n){const e=t.insertBeforeIndex;Array.isArray(e)?e[0]=n:($1(sw,lw),t.insertBeforeIndex=n)}function Hc(t,n){const e=t.data[n];return null===e||"string"==typeof e?null:e.hasOwnProperty("currentCaseLViewIndex")?e:e.value}function xE(t,n,e){const i=vg(t,e,64,null,null);return cw(n,i),i}function Zd(t,n){const e=n[t.currentCaseLViewIndex];return null===e?e:e<0?~e:e}function dw(t){return t>>>17}function hw(t){return(131070&t)>>>1}let Gc=0,zc=0;function pw(t,n,e,i){const r=e[11];let o,a=null;for(let s=0;s<n.length;s++){const l=n[s];if("string"==typeof l){const c=n[++s];null===e[c]&&(e[c]=Kp(r,l))}else if("number"==typeof l)switch(1&l){case 0:const c=dw(l);let u,d;if(null===a&&(a=c,o=Id(r,i)),c===a?(u=i,d=o):(u=null,d=Dn(e[c])),null!==d){const y=hw(l);us(r,d,e[y],u,!1);const k=Hc(t,y);if(null!==k&&"object"==typeof k){const w=Zd(k,e);null!==w&&pw(t,k.create[w],e,e[k.anchorIdx])}}break;case 1:const m=n[++s],b=n[++s];yg(r,hd(l>>>1,e),null,null,m,b,null)}else switch(l){case Kd:const c=n[++s],u=n[++s];null===e[u]&&Zn(e[u]=Tk(r,c),e);break;case Qd:const d=n[++s],v=n[++s];null===e[v]&&Zn(e[v]=Zp(r,d,null),e)}}}function gw(t,n,e,i,r){for(let a=0;a<e.length;a++){const o=e[a],s=e[++a];if(o&r){let l="";for(let c=a+1;c<=a+s;c++){const u=e[c];if("string"==typeof u)l+=u;else if("number"==typeof u)if(u<0)l+=Vt(n[i-u]);else{const d=u>>>2;switch(3&u){case 1:const v=e[++c],m=e[++c],b=t.data[d];"string"==typeof b?yg(n[11],n[d],null,b,v,l,m):Lr(t,b,n,v,l,n[11],m,!1);break;case 0:const y=n[d];null!==y&&O1(n[11],y,l);break;case 2:EE(t,Hc(t,d),n,l);break;case 3:vw(t,Hc(t,d),i,n)}}}}else{const l=e[a+1];if(l>0&&3==(3&l)){const u=Hc(t,l>>>2);n[u.currentCaseLViewIndex]<0&&vw(t,u,i,n)}}a+=s}}function vw(t,n,e,i){let r=i[n.currentCaseLViewIndex];if(null!==r){let a=Gc;r<0&&(r=i[n.currentCaseLViewIndex]=~r,a=-1),gw(t,i,n.update[r],e,a)}}function EE(t,n,e,i){const r=function IE(t,n){let e=t.cases.indexOf(n);if(-1===e)switch(t.type){case 1:{const i=function bE(t,n){const e=rw(n)(parseInt(t,10)),i=mE[e];return void 0!==i?i:"other"}(n,function wE(){return ow}());e=t.cases.indexOf(i),-1===e&&"other"!==i&&(e=t.cases.indexOf("other"));break}case 0:e=t.cases.indexOf("other")}return-1===e?null:e}(n,i);if(Zd(n,e)!==r&&(mw(t,n,e),e[n.currentCaseLViewIndex]=null===r?null:~r,null!==r)){const o=e[n.anchorIdx];o&&pw(t,n.create[r],e,o)}}function mw(t,n,e){let i=Zd(n,e);if(null!==i){const r=n.remove[i];for(let a=0;a<r.length;a++){const o=r[a];if(o>0){const s=hd(o,e);null!==s&&q1(e[11],s)}else mw(t,Hc(t,~o),e)}}}function VE(){const t=[];let e,i,n=-1;function a(s,l){n=0;const c=Zd(s,l);i=null!==c?s.remove[c]:Fi}function o(){if(n<i.length){const s=i[n++];return s>0?e[s]:(t.push(n,i),a(e[1].data[~s],e),o())}return 0===t.length?null:(i=t.pop(),n=t.pop(),o())}return function r(s,l){for(e=l;t.length;)t.pop();return a(s.value,l),o}}const Jd=/\ufffd(\d+):?\d*\ufffd/gi,NE=/\ufffd(\d+)\ufffd/,_w=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,FE=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,BE=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,LE=/\uE500/g;function yw(t,n,e,i,r,a,o){const s=sl(t,i,1,null);let l=s<<fn.SHIFT,c=pc();n===c&&(c=null),null===c&&(l|=fn.APPEND_EAGERLY),o&&(l|=fn.COMMENT,function Ck(t){void 0===qp&&(qp=t())}(VE)),r.push(l,null===a?"":a);const u=vg(t,s,o?32:1,null===a?"":a,null);cw(e,u);const d=u.index;return La(u,!1),null!==c&&n!==c&&function RE(t,n){let e=t.insertBeforeIndex;null===e?($1(sw,lw),e=t.insertBeforeIndex=[null,n]):(function oo(t,n,e){t!=n&&Xi(e,t,n,"==")}(Array.isArray(e),!0,"Expecting array here"),e.push(n))}(c,d),u}function GE(t,n,e,i,r,a,o){const s=o.match(Jd),l=yw(t,n,e,a,i,s?null:o,!1);s&&Tl(r,o,l.index,null,0,null)}function Tl(t,n,e,i,r,a){const o=t.length,s=o+1;t.push(null,null);const l=o+2,c=n.split(Jd);let u=0;for(let d=0;d<c.length;d++){const v=c[d];if(1&d){const m=r+parseInt(v,10);t.push(-1-m),u|=ww(m)}else""!==v&&t.push(v)}return t.push(e<<2|(i?1:0)),i&&t.push(i,a),t[o]=u,t[s]=t.length-l,u}function ww(t){return 1<<Math.min(t,31)}function Sw(t){let n,a,e="",i=0,r=!1;for(;null!==(n=FE.exec(t));)r?n[0]===`\ufffd/*${a}\ufffd`&&(i=n.index,r=!1):(e+=t.substring(i,n.index+n[0].length),a=n[1],r=!0);return e+=t.substr(i),e}function Cw(t,n,e,i,r,a){let o=0;const s={type:r.type,currentCaseLViewIndex:sl(t,n,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};(function QE(t,n,e){t.push(ww(n.mainBinding),2,-1-n.mainBinding,e<<2|2)})(e,r,a),function DE(t,n,e){const i=t.data[n];null===i?t.data[n]=e:i.value=e}(t,a,s);const l=r.values;for(let c=0;c<l.length;c++){const u=l[c],d=[];for(let v=0;v<u.length;v++){const m=u[v];if("string"!=typeof m){const b=d.push(m)-1;u[v]=`\x3c!--\ufffd${b}\ufffd--\x3e`}}o=XE(t,s,n,e,i,r.cases[c],u.join(""),d)|o}o&&function KE(t,n,e){t.push(n,1,e<<2|3)}(e,o,a)}function qE(t){const n=[],e=[];let i=1,r=0;const a=Xg(t=t.replace(_w,function(o,s,l){return i="select"===l?0:1,r=parseInt(s.substr(1),10),""}));for(let o=0;o<a.length;){let s=a[o++].trim();1===i&&(s=s.replace(/\s*(?:=)?(\w+)\s*/,"$1")),s.length&&n.push(s);const l=Xg(a[o++]);n.length>e.length&&e.push(l)}return{type:i,mainBinding:r,cases:n,values:e}}function Xg(t){if(!t)return[];let n=0;const e=[],i=[],r=/[{}]/g;let a;for(r.lastIndex=0;a=r.exec(t);){const s=a.index;if("}"==a[0]){if(e.pop(),0==e.length){const l=t.substring(n,s);_w.test(l)?i.push(qE(l)):i.push(l),n=s+1}}else{if(0==e.length){const l=t.substring(n,s);i.push(l),n=s+1}e.push("{")}}const o=t.substring(n);return i.push(o),i}function XE(t,n,e,i,r,a,o,s){const l=[],c=[],u=[];n.cases.push(a),n.create.push(l),n.remove.push(c),n.update.push(u);const v=p1(fp()).getInertBodyElement(o),m=Hp(v)||v;return m?Tw(t,n,e,i,l,c,u,m,r,s,0):0}function Tw(t,n,e,i,r,a,o,s,l,c,u){let d=0,v=s.firstChild;for(;v;){const m=sl(t,e,1,null);switch(v.nodeType){case Node.ELEMENT_NODE:const b=v,y=b.tagName.toLowerCase();if(Bp.hasOwnProperty(y)){Yg(r,Qd,y,l,m),t.data[m]=y;const R=b.attributes;for(let z=0;z<R.length;z++){const q=R.item(z),j=q.name.toLowerCase();q.value.match(Jd)?_1.hasOwnProperty(j)&&Tl(o,q.value,m,q.name,0,Lp[j]?xc:Up[j]?g1:null):ZE(r,m,q)}d=Tw(t,n,e,i,r,a,o,v,m,c,u+1)|d,Dw(a,m,u)}break;case Node.TEXT_NODE:const C=v.textContent||"",k=C.match(Jd);Yg(r,null,k?"":C,l,m),Dw(a,m,u),k&&(d=Tl(o,C,m,null,0,null)|d);break;case Node.COMMENT_NODE:const w=NE.exec(v.textContent||"");if(w){const z=c[parseInt(w[1],10)];Yg(r,Kd,"",l,m),Cw(t,e,i,l,z,m),YE(a,m,u)}}v=v.nextSibling}return d}function Dw(t,n,e){0===e&&t.push(n)}function YE(t,n,e){0===e&&(t.push(~n),t.push(n))}function Yg(t,n,e,i,r){null!==n&&t.push(n),t.push(e,r,function ME(t,n,e){return t|n<<17|e<<1}(0,i,r))}function ZE(t,n,e){t.push(n<<1|1,e.name,e.value)}function xw(t,n,e=-1){const i=ci(),r=Me(),a=20+t,o=No(i.consts,n),s=pc();i.firstCreatePass&&function HE(t,n,e,i,r,a){const o=pc(),s=[],l=[],c=[[]];r=function WE(t,n){if(function $E(t){return-1===t}(n))return Sw(t);{const e=t.indexOf(`:${n}\ufffd`)+2+n.toString().length,i=t.search(new RegExp(`\ufffd\\/\\*\\d+:${n}\ufffd`));return Sw(t.substring(e,i))}}(r,a);const u=function UE(t){return t.replace(LE," ")}(r).split(BE);for(let d=0;d<u.length;d++){let v=u[d];if(0==(1&d)){const m=Xg(v);for(let b=0;b<m.length;b++){let y=m[b];if(0==(1&b)){const C=y;""!==C&&GE(t,o,c[0],s,l,e,C)}else{const C=y;if("object"!=typeof C)throw new Error(`Unable to parse ICU expression in "${r}" message.`);Cw(t,e,l,n,C,yw(t,o,c[0],e,s,"",!0).index)}}}else{const m=47===v.charCodeAt(0),y=(v.charCodeAt(m?1:0),20+Number.parseInt(v.substring(m?2:1)));if(m)c.shift(),La(pc(),!1);else{const C=xE(t,c[0],y);c.unshift([]),La(C,!0)}}}t.data[i]={create:s,update:l}}(i,null===s?0:s.index,r,a,o,e);const l=i.data[a],u=L1(i,s===r[6]?null:s,r);(function PE(t,n,e,i){const r=t[11];for(let a=0;a<n.length;a++){const o=n[a++],s=n[a],l=(o&fn.COMMENT)===fn.COMMENT,c=(o&fn.APPEND_EAGERLY)===fn.APPEND_EAGERLY,u=o>>>fn.SHIFT;let d=t[u];null===d&&(d=t[u]=l?r.createComment(s):Kp(r,s)),c&&null!==e&&us(r,e,d,i,!1)}})(r,l.create,u,s&&8&s.type?r[s.index]:null),Eb(!0)}function po(t,n,e){xw(t,n,e),function Mw(){Eb(!1)}()}function eh(t){return function kE(t){t&&(Gc|=1<<Math.min(zc,31)),zc++}(Jn(Me(),$s(),t)),eh}function Kg(t,n,e,i,r){if(t=zt(t),Array.isArray(t))for(let a=0;a<t.length;a++)Kg(t[a],n,e,i,r);else{const a=ci(),o=Me();let s=ul(t)?t:zt(t.provide),l=F_(t);const c=En(),u=1048575&c.providerIndexes,d=c.directiveStart,v=c.providerIndexes>>20;if(ul(t)||!t.multi){const m=new gc(l,r,P),b=Jg(s,n,r?u:u+v,d);-1===b?(Td(mc(c,o),a,s),Zg(a,t,n.length),n.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(m),o.push(m)):(e[b]=m,o[b]=m)}else{const m=Jg(s,n,u+v,d),b=Jg(s,n,u,u+v),y=m>=0&&e[m],C=b>=0&&e[b];if(r&&!C||!r&&!y){Td(mc(c,o),a,s);const k=function hI(t,n,e,i,r){const a=new gc(t,e,P);return a.multi=[],a.index=n,a.componentProviders=0,kw(a,r,i&&!e),a}(r?dI:uI,e.length,r,i,l);!r&&C&&(e[b].providerFactory=k),Zg(a,t,n.length,0),n.push(s),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(k),o.push(k)}else Zg(a,t,m>-1?m:b,kw(e[r?b:m],l,!r&&i));!r&&i&&C&&e[b].componentProviders++}}}function Zg(t,n,e,i){const r=ul(n),a=function GA(t){return!!t.useClass}(n);if(r||a){const l=(a?zt(n.useClass):n).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const u=c.indexOf(e);-1===u?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function kw(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function Jg(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function uI(t,n,e,i){return ev(this.multi,[])}function dI(t,n,e,i){const r=this.multi;let a;if(this.providerFactory){const o=this.providerFactory.componentProviders,s=bc(e,e[1],this.providerFactory.index,i);a=s.slice(0,o),ev(r,a);for(let l=o;l<s.length;l++)a.push(s[l])}else a=[],ev(r,a);return a}function ev(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function Bi(t,n=[]){return e=>{e.providersResolver=(i,r)=>function cI(t,n,e){const i=ci();if(i.firstCreatePass){const r=va(t);Kg(e,i.data,i.blueprint,r,!0),Kg(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class Aw{}class gI{resolveComponentFactory(n){throw function pI(t){const n=Error(`No component factory found for ${Mi(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let fs=(()=>{class t{}return t.NULL=new gI,t})();function vI(){return Dl(En(),Me())}function Dl(t,n){return new Ri(Jr(t,n))}let Ri=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=vI,t})();function mI(t){return t instanceof Ri?t.nativeElement:t}class tv{}let ia=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function _I(){const t=Me(),e=Or(En().index,t);return function bI(t){return t[11]}(Ba(e)?e:t)}(),t})(),yI=(()=>{class t{}return t.\u0275prov=at({token:t,providedIn:"root",factory:()=>null}),t})();class $c{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const wI=new $c("13.2.3"),iv={};function th(t,n,e,i,r=!1){for(;null!==e;){const a=n[e.index];if(null!==a&&i.push(Dn(a)),ga(a))for(let s=10;s<a.length;s++){const l=a[s],c=l[1].firstChild;null!==c&&th(l[1],l,c,i)}const o=e.type;if(8&o)th(t,n,e.child,i);else if(32&o){const s=Xp(e,n);let l;for(;l=s();)i.push(l)}else if(16&o){const s=W1(n,e);if(Array.isArray(s))i.push(...s);else{const l=Pc(n[16]);th(l[1],l,s,i,!0)}}e=r?e.projectionNext:e.next}return i}class Wc{constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,e=n[1];return th(e,n,e.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(ga(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(Jp(n,i),Rd(e,i))}this._attachedToViewContainer=!1}F1(this._lView[1],this._lView)}onDestroy(n){b_(this._lView[1],this._lView,null,n)}markForCheck(){Sg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Tg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function PA(t,n,e){pd(!0);try{Tg(t,n,e)}finally{pd(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new li(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xk(t,n){Ec(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new li(902,"");this._appRef=n}}class SI extends Wc{constructor(n){super(n),this._view=n}detectChanges(){x_(this._view)}checkNoChanges(){!function EA(t){pd(!0);try{x_(t)}finally{pd(!1)}}(this._view)}get context(){return null}}class Ew extends fs{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Yn(n);return new nv(e,this.ngModule)}}function Iw(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}const TI=new Yt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>k1});class nv extends Aw{constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function qk(t){return t.map(Wk).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Iw(this.componentDef.inputs)}get outputs(){return Iw(this.componentDef.outputs)}create(n,e,i,r){const a=(r=r||this.ngModule)?function DI(t,n){return{get:(e,i,r)=>{const a=t.get(e,iv,r);return a!==iv||i===iv?a:n.get(e,i,r)}}}(n,r.injector):n,o=a.get(tv,Rb),s=a.get(yI,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function m_(t,n,e){if(dn(t))return t.selectRootElement(n,e===Fa.ShadowDom);let i="string"==typeof n?t.querySelector(n):n;return i.textContent="",i}(l,i,this.componentDef.encapsulation):Zp(o.createRenderer(null,this.componentDef),c,function CI(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(c)),d=this.componentDef.onPush?576:528,v=function Y_(t,n){return{components:[],scheduler:t||k1,clean:IA,playerHandler:n||null,flags:0}}(),m=Ld(0,null,null,1,0,null,null,null,null,null),b=Ic(null,m,v,d,null,null,o,l,s,a);let y,C;gd(b);try{const k=function q_(t,n,e,i,r,a){const o=e[1];e[20]=t;const l=ol(o,20,2,"#host",null),c=l.mergedAttrs=n.hostAttrs;null!==c&&(Hd(l,c,!0),null!==t&&(yd(r,t,c),null!==l.classes&&rg(r,t,l.classes),null!==l.styles&&Y1(r,t,l.styles)));const u=i.createRenderer(t,n),d=Ic(e,g_(n),null,n.onPush?64:16,e[20],l,i,u,a||null,null);return o.firstCreatePass&&(Td(mc(l,e),o,n.type),C_(o,l),T_(l,e.length,1)),Ud(e,d),e[20]=d}(u,this.componentDef,b,o,l);if(u)if(i)yd(l,u,["ng-version",wI.full]);else{const{attrs:w,classes:R}=function Xk(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let a=t[i];if("string"==typeof a)2===r?""!==a&&n.push(a,t[++i]):8===r&&e.push(a);else{if(!ma(r))break;r=a}i++}return{attrs:n,classes:e}}(this.componentDef.selectors[0]);w&&yd(l,u,w),R&&R.length>0&&rg(l,u,R.join(" "))}if(C=pp(m,20),void 0!==e){const w=C.projection=[];for(let R=0;R<this.ngContentSelectors.length;R++){const z=e[R];w.push(null!=z?Array.from(z):null)}}y=function X_(t,n,e,i,r){const a=e[1],o=function gA(t,n,e){const i=En();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),D_(t,i,n,sl(t,n,1,null),e));const r=bc(n,t,i.directiveStart,i);Zn(r,n);const a=Jr(i,n);return a&&Zn(a,n),r}(a,e,n);if(i.components.push(o),t[8]=o,r&&r.forEach(l=>l(o,n)),n.contentQueries){const l=En();n.contentQueries(1,o,l.directiveStart)}const s=En();return!a.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Fo(s.index),w_(e[1],s,0,s.directiveStart,s.directiveEnd,n),S_(n,o)),o}(k,this.componentDef,b,v,[JA]),Vc(m,b,null)}finally{vd()}return new xI(this.componentType,y,Dl(C,b),b,C)}}class xI extends class fI{}{constructor(n,e,i,r,a){super(),this.location=i,this._rootLView=r,this._tNode=a,this.instance=e,this.hostView=this.changeDetectorRef=new SI(r),this.componentType=n}get injector(){return new Xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class go{}class Vw{}const Rl=new Map;class Fw extends go{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ew(this);const i=Qr(n);this._bootstrapComponents=ja(i.bootstrap),this._r3Injector=N_(n,e,[{provide:go,useValue:this},{provide:fs,useValue:this.componentFactoryResolver}],Mi(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,e=Sn.THROW_IF_NOT_FOUND,i=Ft.Default){return n===Sn||n===go||n===Rg?this:this._r3Injector.get(n,e,i)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class rv extends Vw{constructor(n){super(),this.moduleType=n,null!==Qr(n)&&function kI(t){const n=new Set;!function e(i){const r=Qr(i,!0),a=r.id;null!==a&&(function Ow(t,n,e){if(n&&n!==e)throw new Error(`Duplicate module registered for ${t} - ${Mi(n)} vs ${Mi(n.name)}`)}(a,Rl.get(a),i),Rl.set(a,i));const o=ja(r.imports);for(const s of o)n.has(s)||(n.add(s),e(s))}(t)}(n)}create(n){return new Fw(this.moduleType,n)}}function av(t,n,e){const i=lr()+t,r=Me();return r[i]===Ot?Wa(r,i,e?n.call(e):n()):Fc(r,i)}function pn(t,n,e,i){return Lw(Me(),lr(),t,n,e,i)}function zo(t,n,e,i,r){return Uw(Me(),lr(),t,n,e,i,r)}function qc(t,n){const e=t[n];return e===Ot?void 0:e}function Lw(t,n,e,i,r,a){const o=n+e;return Jn(t,o,r)?Wa(t,o+1,a?i.call(a,r):i(r)):qc(t,o+1)}function Uw(t,n,e,i,r,a,o){const s=n+e;return ds(t,s,r,a)?Wa(t,s+2,o?i.call(o,r,a):i(r,a)):qc(t,s+2)}function Lt(t,n){const e=ci();let i;const r=t+20;e.firstCreatePass?(i=function OI(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,i.onDestroy)):i=e.data[r];const a=i.factory||(i.factory=ss(i.type)),o=Io(P);try{const s=Sd(!1),l=a();return Sd(s),function dP(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,Me(),r,l),l}finally{Io(o)}}function ih(t,n,e){const i=t+20,r=Me(),a=js(r,i);return Yc(r,i)?Lw(r,lr(),n,a.transform,e,a):a.transform(e)}function oi(t,n,e,i){const r=t+20,a=Me(),o=js(a,r);return Yc(a,r)?Uw(a,lr(),n,o.transform,e,i,o):o.transform(e,i)}function Xc(t,n,e,i,r){const a=t+20,o=Me(),s=js(o,a);return Yc(o,a)?function Hw(t,n,e,i,r,a,o,s){const l=n+e;return zd(t,l,r,a,o)?Wa(t,l+3,s?i.call(s,r,a,o):i(r,a,o)):qc(t,l+3)}(o,lr(),n,s.transform,e,i,r,s):s.transform(e,i,r)}function Yc(t,n){return t[1].data[n].pure}function sv(t){return n=>{setTimeout(t,void 0,n)}}const ot=class BI extends we{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){var r,a,o;let s=n,l=e||(()=>null),c=i;if(n&&"object"==typeof n){const d=n;s=null===(r=d.next)||void 0===r?void 0:r.bind(d),l=null===(a=d.error)||void 0===a?void 0:a.bind(d),c=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=sv(l),s&&(s=sv(s)),c&&(c=sv(c)));const u=super.subscribe({next:s,error:l,complete:c});return n instanceof ge&&n.add(u),u}};function LI(){return this._results[dl()]()}class lv{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=dl(),i=lv.prototype;i[e]||(i[e]=LI)}get changes(){return this._changes||(this._changes=new ot)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=ea(n);(this._changesDetected=!function rM(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],a=n[i];if(e&&(r=e(r),a=e(a)),a!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Zi=(()=>{class t{}return t.__NG_ELEMENT_ID__=GI,t})();const UI=Zi,HI=class extends UI{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}createEmbeddedView(n){const e=this._declarationTContainer.tViews,i=Ic(this._declarationLView,e,n,16,null,e.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(e)),Vc(e,i,n),new Wc(i)}};function GI(){return nh(En(),Me())}function nh(t,n){return 4&t.type?new HI(n,t,Dl(t,n)):null}let na=(()=>{class t{}return t.__NG_ELEMENT_ID__=zI,t})();function zI(){return Ww(En(),Me())}const jI=na,jw=class extends jI{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return Dl(this._hostTNode,this._hostLView)}get injector(){return new Xs(this._hostTNode,this._hostLView)}get parentInjector(){const n=Cd(this._hostTNode,this._hostLView);if(Gb(n)){const e=qs(n,this._hostLView),i=Ws(n);return new Xs(e[1].data[i+8],e)}return new Xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=$w(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,e,i){const r=n.createEmbeddedView(e||{});return this.insert(r,i),r}createComponent(n,e,i,r,a){const o=n&&!function yc(t){return"function"==typeof t}(n);let s;if(o)s=e;else{const d=e||{};s=d.index,i=d.injector,r=d.projectableNodes,a=d.ngModuleRef}const l=o?n:new nv(Yn(n)),c=i||this.parentInjector;if(!a&&null==l.ngModule){const v=(o?c:this.parentInjector).get(go,null);v&&(a=v)}const u=l.create(c,r,void 0,a);return this.insert(u.hostView,s),u}insert(n,e){const i=n._lView,r=i[1];if(function Dx(t){return ga(t[3])}(i)){const u=this.indexOf(n);if(-1!==u)this.detach(u);else{const d=i[3],v=new jw(d,d[6],d[3]);v.detach(v.indexOf(n))}}const a=this._adjustIndex(e),o=this._lContainer;!function kk(t,n,e,i){const r=10+i,a=e.length;i>0&&(e[r-1][4]=n),i<a-10?(n[4]=e[r],Zb(e,10+i,n)):(e.push(n),n[4]=null),n[3]=e;const o=n[17];null!==o&&e!==o&&function Ak(t,n){const e=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===e?t[9]=[n]:e.push(n)}(o,n);const s=n[19];null!==s&&s.insertView(t),n[2]|=128}(r,i,o,a);const s=ig(a,o),l=i[11],c=Id(l,o[7]);return null!==c&&function Rk(t,n,e,i,r,a){i[0]=r,i[6]=n,Ec(t,i,e,1,r,a)}(r,o[6],l,i,c,s),n.attachToViewContainerRef(),Zb(cv(o),a,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=$w(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=Jp(this._lContainer,e);i&&(Rd(cv(this._lContainer),e),F1(i[1],i))}detach(n){const e=this._adjustIndex(n,-1),i=Jp(this._lContainer,e);return i&&null!=Rd(cv(this._lContainer),e)?new Wc(i):null}_adjustIndex(n,e=0){return null==n?this.length+e:n}};function $w(t){return t[8]}function cv(t){return t[8]||(t[8]=[])}function Ww(t,n){let e;const i=n[t.index];if(ga(i))e=i;else{let r;if(8&t.type)r=Dn(i);else{const a=n[11];r=a.createComment("");const o=Jr(t,n);us(a,Id(a,o),r,function Vk(t,n){return dn(t)?t.nextSibling(n):n.nextSibling}(a,o),!1)}n[t.index]=e=R_(i,n,r,t),Ud(n,e)}return new jw(e,t,n)}class uv{constructor(n){this.queryList=n,this.matches=null}clone(){return new uv(this.queryList)}setDirty(){this.queryList.setDirty()}}class dv{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let a=0;a<i;a++){const o=e.getByIndex(a);r.push(this.queries[o.indexInDeclarationView].clone())}return new dv(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==Kw(n,e).matches&&this.queries[e].setDirty()}}class qw{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class hv{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,a=this.getByIndex(i).embeddedTView(n,r);a&&(a.indexInDeclarationView=i,null!==e?e.push(a):e=[a])}return null!==e?new hv(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class fv{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new fv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=i[r];this.matchTNodeWithReadOption(n,e,qI(e,a)),this.matchTNodeWithReadOption(n,e,Dd(e,n,a,!1,!1))}else i===Zi?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Dd(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ri||r===na||r===Zi&&4&e.type)this.addMatch(e.index,-2);else{const a=Dd(e,n,r,!1,!1);null!==a&&this.addMatch(e.index,a)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function qI(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function YI(t,n,e,i){return-1===e?function XI(t,n){return 11&t.type?Dl(t,n):4&t.type?nh(t,n):null}(n,t):-2===e?function QI(t,n,e){return e===Ri?Dl(n,t):e===Zi?nh(n,t):e===na?Ww(n,t):void 0}(t,n,i):bc(t,t[1],e,n)}function Xw(t,n,e,i){const r=n[19].queries[i];if(null===r.matches){const a=t.data,o=e.matches,s=[];for(let l=0;l<o.length;l+=2){const c=o[l];s.push(c<0?null:YI(n,a[c],o[l+1],e.metadata.read))}r.matches=s}return r.matches}function pv(t,n,e,i){const r=t.queries.getByIndex(e),a=r.matches;if(null!==a){const o=Xw(t,n,r,e);for(let s=0;s<a.length;s+=2){const l=a[s];if(l>0)i.push(o[s/2]);else{const c=a[s+1],u=n[-l];for(let d=10;d<u.length;d++){const v=u[d];v[17]===v[3]&&pv(v[1],v,c,i)}if(null!==u[9]){const d=u[9];for(let v=0;v<d.length;v++){const m=d[v];pv(m[1],m,c,i)}}}}}return i}function Si(t){const n=Me(),e=ci(),i=Ib();wp(i+1);const r=Kw(e,i);if(t.dirty&&xb(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const a=r.crossesNgTemplate?pv(e,n,i,[]):Xw(e,n,r,i);t.reset(a,mI),t.notifyOnChanges()}return!0}return!1}function Sa(t,n,e){const i=ci();i.firstCreatePass&&(Qw(i,new qw(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),Yw(i,Me(),n)}function Cn(t,n,e,i){const r=ci();if(r.firstCreatePass){const a=En();Qw(r,new qw(n,e,i),a.index),function ZI(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}Yw(r,Me(),e)}function Ci(){return function KI(t,n){return t[19].queries[n].queryList}(Me(),Ib())}function Yw(t,n,e){const i=new lv(4==(4&e));b_(t,n,i,i.destroy),null===n[19]&&(n[19]=new dv),n[19].queries.push(new uv(i))}function Qw(t,n,e){null===t.queries&&(t.queries=new hv),t.queries.track(new fv(n,e))}function Kw(t,n){return t.queries.getByIndex(n)}function ut(t,n){return nh(t,n)}function oh(...t){}const sh=new Yt("Application Initializer");let Ml=(()=>{class t{constructor(e){this.appInits=e,this.resolve=oh,this.reject=oh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const a=this.appInits[r]();if(Bc(a))e.push(a);else if(Gg(a)){const o=new Promise((s,l)=>{a.subscribe({complete:s,error:l})});e.push(o)}}Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Ue(sh,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const Kc=new Yt("AppId"),vV={provide:Kc,useFactory:function gV(){return`${yv()}${yv()}${yv()}`},deps:[]};function yv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pS=new Yt("Platform Initializer"),lh=new Yt("Platform ID"),gS=new Yt("appBootstrapListener");let vS=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const jo=new Yt("LocaleId"),mS=new Yt("DefaultCurrencyCode");class mV{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let ch=(()=>{class t{compileModuleSync(e){return new rv(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),a=ja(Qr(e).declarations).reduce((o,s)=>{const l=Yn(s);return l&&o.push(new nv(l)),o},[]);return new mV(i,a)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const _V=(()=>Promise.resolve(0))();function wv(t){"undefined"==typeof Zone?_V.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Li{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function yV(){let t=Ii.requestAnimationFrame,n=Ii.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function CV(t){const n=()=>{!function SV(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ii,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Cv(t),t.isCheckStableRunning=!0,Sv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Cv(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,a,o,s)=>{try{return bS(t),e.invokeTask(r,a,o,s)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||t.shouldCoalesceRunChangeDetection)&&n(),_S(t)}},onInvoke:(e,i,r,a,o,s,l)=>{try{return bS(t),e.invoke(r,a,o,s,l)}finally{t.shouldCoalesceRunChangeDetection&&n(),_S(t)}},onHasTask:(e,i,r,a)=>{e.hasTask(r,a),i===r&&("microTask"==a.change?(t._hasPendingMicrotasks=a.microTask,Cv(t),Sv(t)):"macroTask"==a.change&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(e,i,r,a)=>(e.handleError(r,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Li.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Li.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const a=this._inner,o=a.scheduleEventTask("NgZoneEvent: "+r,n,wV,oh,oh);try{return a.runTask(o,e,i)}finally{a.cancelTask(o)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const wV={};function Sv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Cv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function bS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _S(t){t._nesting--,Sv(t)}class TV{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ot,this.onMicrotaskEmpty=new ot,this.onStable=new ot,this.onError=new ot}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}let Tv=(()=>{class t{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Li.assertNotInAngularZone(),wv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wv(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==a),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:a,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,i,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Ue(Li))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),yS=(()=>{class t{constructor(){this._applications=new Map,Dv.addToWindow(this)}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Dv.findTestabilityInTree(this,e,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class DV{addToWindow(n){}findTestabilityInTree(n,e,i){return null}}let Ca,Dv=new DV;const wS=new Yt("AllowMultipleToken");class SS{constructor(n,e){this.name=n,this.token=e}}function CS(t,n,e=[]){const i=`Platform: ${n}`,r=new Yt(i);return(a=[])=>{let o=TS();if(!o||o.injector.get(wS,!1))if(t)t(e.concat(a).concat({provide:r,useValue:!0}));else{const s=e.concat(a).concat({provide:r,useValue:!0},{provide:xg,useValue:"platform"});!function kV(t){if(Ca&&!Ca.destroyed&&!Ca.injector.get(wS,!1))throw new li(400,"");Ca=t.get(DS);const n=t.get(pS,null);n&&n.forEach(e=>e())}(Sn.create({providers:s,name:i}))}return function AV(t){const n=TS();if(!n)throw new li(401,"");return n}()}}function TS(){return Ca&&!Ca.destroyed?Ca:null}let DS=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const s=function PV(t,n){let e;return e="noop"===t?new TV:("zone.js"===t?void 0:t)||new Li({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),e}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:Li,useValue:s}];return s.run(()=>{const c=Sn.create({providers:l,parent:this.injector,name:e.moduleType.name}),u=e.create(c),d=u.injector.get(nl,null);if(!d)throw new li(402,"");return s.runOutsideAngular(()=>{const v=s.onError.subscribe({next:m=>{d.handleError(m)}});u.onDestroy(()=>{Rv(this._modules,u),v.unsubscribe()})}),function EV(t,n,e){try{const i=e();return Bc(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(d,s,()=>{const v=u.injector.get(Ml);return v.runInitializers(),v.donePromise.then(()=>(function yE(t){(function Ir(t,n){null==t&&Xi(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(ow=t.toLowerCase().replace(/_/g,"-"))}(u.injector.get(jo,Yd)||Yd),this._moduleDoBootstrap(u),u))})})}bootstrapModule(e,i=[]){const r=RS({},i);return function xV(t,n,e){const i=new rv(e);return Promise.resolve(i)}(0,0,e).then(a=>this.bootstrapModuleFactory(a,r))}_moduleDoBootstrap(e){const i=e.injector.get(ps);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new li(403,"");e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new li(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Ue(Sn))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function RS(t,n){return Array.isArray(n)?n.reduce(RS,t):Object.assign(Object.assign({},t),n)}let ps=(()=>{class t{constructor(e,i,r,a,o){this._zone=e,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Le(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Le(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Li.assertNotInAngularZone(),wv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Li.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=ub(s,l.pipe(db()))}bootstrap(e,i){if(!this._initStatus.done)throw new li(405,"");let r;r=e instanceof Aw?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const a=function MV(t){return t.isBoundToModule}(r)?void 0:this._injector.get(go),s=r.create(Sn.NULL,[],i||r.selector,a),l=s.location.nativeElement,c=s.injector.get(Tv,null),u=c&&s.injector.get(yS);return c&&u&&u.registerApplication(l,c),s.onDestroy(()=>{this.detachView(s.hostView),Rv(this.components,s),u&&u.unregisterApplication(l)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new li(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;Rv(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(gS,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Ue(Li),Ue(Sn),Ue(nl),Ue(fs),Ue(Ml))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function Rv(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let MS=!0,Ur=(()=>{class t{}return t.__NG_ELEMENT_ID__=OV,t})();function OV(t){return function NV(t,n,e){if(ud(t)&&!e){const i=Or(t.index,n);return new Wc(i,i)}return 47&t.type?new Wc(n[16],n):null}(En(),Me(),16==(16&t))}class IS{constructor(){}supports(n){return Nc(n)}create(n){return new GV(n)}}const HV=(t,n)=>n;class GV{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||HV}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,a=null;for(;e||i;){const o=!i||e&&e.currentIndex<OS(i,r,a)?e:i,s=OS(o,r,a),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{a||(a=[]);const c=s-r,u=l-r;if(c!=u){for(let v=0;v<c;v++){const m=v<a.length?a[v]:a[v]=0,b=m+v;u<=b&&b<c&&(a[v]=m+1)}a[o.previousIndex]=u-c}}s!==l&&n(o,s,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!Nc(n))throw new li(900,"");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,a,o,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let s=0;s<this.length;s++)a=n[s],o=this._trackByFn(s,a),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,s),i=!0),e=e._next}else r=0,function cP(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[dl()]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,s=>{o=this._trackByFn(r,s),null!==e&&Object.is(e.trackById,o)?(i&&(e=this._verifyReinsertion(e,s,o,r)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,a,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,a,r)):n=this._addAfter(new zV(e,i),a,r),n}_verifyReinsertion(n,e,i,r){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==a?n=this._reinsertAfter(a,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,a=n._nextRemoved;return null===r?this._removalsHead=a:r._nextRemoved=a,null===a?this._removalsTail=r:a._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new VS),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new VS),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class zV{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jV{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class VS{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new jV,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function OS(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}class NS{constructor(){}supports(n){return n instanceof Map||Ig(n)}create(){return new $V}}class $V{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||Ig(n)))throw new li(900,"")}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const a=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,a)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,e);const a=r._prev,o=r._next;return a&&(a._next=o),o&&(o._prev=a),r._next=null,r._prev=null,r}const i=new WV(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}}class WV{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function FS(){return new Zc([new IS])}let Zc=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||FS()),deps:[[t,new el,new Ha]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new li(901,"")}}return t.\u0275prov=at({token:t,providedIn:"root",factory:FS}),t})();function BS(){return new kl([new NS])}let kl=(()=>{class t{constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||BS()),deps:[[t,new el,new Ha]]}}find(e){const i=this.factories.find(a=>a.supports(e));if(i)return i;throw new li(901,"")}}return t.\u0275prov=at({token:t,providedIn:"root",factory:BS}),t})();const qV=[new NS],YV=new Zc([new IS]),QV=new kl(qV),KV=CS(null,"core",[{provide:lh,useValue:"unknown"},{provide:DS,deps:[Sn]},{provide:yS,deps:[]},{provide:vS,deps:[]}]),iO=[{provide:ps,useClass:ps,deps:[Li,Sn,nl,fs,Ml]},{provide:TI,deps:[Li],useFactory:function nO(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(e){n.push(e)}}},{provide:Ml,useClass:Ml,deps:[[new Ha,sh]]},{provide:ch,useClass:ch,deps:[]},vV,{provide:Zc,useFactory:function ZV(){return YV},deps:[]},{provide:kl,useFactory:function JV(){return QV},deps:[]},{provide:jo,useFactory:function eO(t){return t||function tO(){return"undefined"!=typeof $localize&&$localize.locale||Yd}()},deps:[[new Dc(jo),new Ha,new el]]},{provide:mS,useValue:"USD"}];let rO=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(Ue(ps))},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({providers:iO}),t})(),hh=null;function Ya(){return hh}const Rn=new Yt("DocumentToken");let vs=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:function(){return function lO(){return Ue(LS)}()},providedIn:"platform"}),t})();const cO=new Yt("Location Initialized");let LS=(()=>{class t extends vs{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ya().getBaseHref(this._doc)}onPopState(e){const i=Ya().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=Ya().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){US()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){US()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Ue(Rn))},t.\u0275prov=at({token:t,factory:function(){return function uO(){return new LS(Ue(Rn))}()},providedIn:"platform"}),t})();function US(){return!!window.history.pushState}function Pv(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function HS(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function vo(t){return t&&"?"!==t[0]?"?"+t:t}let Al=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:function(){return function dO(t){const n=Ue(Rn).location;return new GS(Ue(vs),n&&n.origin||"")}()},providedIn:"root"}),t})();const Ev=new Yt("appBaseHref");let GS=(()=>{class t extends Al{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Pv(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+vo(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,a){const o=this.prepareExternalUrl(r+vo(a));this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,a){const o=this.prepareExternalUrl(r+vo(a));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(Ue(vs),Ue(Ev,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),hO=(()=>{class t extends Al{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Pv(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,a){let o=this.prepareExternalUrl(r+vo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,r,a){let o=this.prepareExternalUrl(r+vo(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return t.\u0275fac=function(e){return new(e||t)(Ue(vs),Ue(Ev,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),Iv=(()=>{class t{constructor(e,i){this._subject=new ot,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=HS(zS(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+vo(i))}normalize(e){return t.stripTrailingSlash(function pO(t,n){return t&&n.startsWith(t)?n.substring(t.length):n}(this._baseHref,zS(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+vo(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+vo(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return t.normalizeQueryParams=vo,t.joinWithSlash=Pv,t.stripTrailingSlash=HS,t.\u0275fac=function(e){return new(e||t)(Ue(Al),Ue(vs))},t.\u0275prov=at({token:t,factory:function(){return function fO(){return new Iv(Ue(Al),Ue(vs))}()},providedIn:"root"}),t})();function zS(t){return t.replace(/\/index.html$/,"")}var Dr=(()=>((Dr=Dr||{})[Dr.Decimal=0]="Decimal",Dr[Dr.Percent=1]="Percent",Dr[Dr.Currency=2]="Currency",Dr[Dr.Scientific=3]="Scientific",Dr))(),xn=(()=>((xn=xn||{})[xn.Zero=0]="Zero",xn[xn.One=1]="One",xn[xn.Two=2]="Two",xn[xn.Few=3]="Few",xn[xn.Many=4]="Many",xn[xn.Other=5]="Other",xn))(),St=(()=>((St=St||{})[St.Decimal=0]="Decimal",St[St.Group=1]="Group",St[St.List=2]="List",St[St.PercentSign=3]="PercentSign",St[St.PlusSign=4]="PlusSign",St[St.MinusSign=5]="MinusSign",St[St.Exponential=6]="Exponential",St[St.SuperscriptingExponent=7]="SuperscriptingExponent",St[St.PerMille=8]="PerMille",St[St.Infinity=9]="Infinity",St[St.NaN=10]="NaN",St[St.TimeSeparator=11]="TimeSeparator",St[St.CurrencyDecimal=12]="CurrencyDecimal",St[St.CurrencyGroup=13]="CurrencyGroup",St))();function ra(t,n){const e=dr(t),i=e[Qe.NumberSymbols][n];if(void 0===i){if(n===St.CurrencyDecimal)return e[Qe.NumberSymbols][St.Decimal];if(n===St.CurrencyGroup)return e[Qe.NumberSymbols][St.Group]}return i}function Vv(t,n){return dr(t)[Qe.NumberFormats][n]}const wO=rw,UO=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Lv(t,n,e,i,r,a,o=!1){let s="",l=!1;if(isFinite(t)){let c=function XO(t){let i,r,a,o,s,n=Math.abs(t)+"",e=0;for((r=n.indexOf("."))>-1&&(n=n.replace(".","")),(a=n.search(/e/i))>0?(r<0&&(r=a),r+=+n.slice(a+1),n=n.substring(0,a)):r<0&&(r=n.length),a=0;"0"===n.charAt(a);a++);if(a===(s=n.length))i=[0],r=1;else{for(s--;"0"===n.charAt(s);)s--;for(r-=a,i=[],o=0;a<=s;a++,o++)i[o]=Number(n.charAt(a))}return r>22&&(i=i.splice(0,21),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}(t);o&&(c=function qO(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(c));let u=n.minInt,d=n.minFrac,v=n.maxFrac;if(a){const w=a.match(UO);if(null===w)throw new Error(`${a} is not a valid digit info`);const R=w[1],z=w[3],q=w[5];null!=R&&(u=Hv(R)),null!=z&&(d=Hv(z)),null!=q?v=Hv(q):null!=z&&d>v&&(v=d)}!function YO(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,r=i.length-t.integerLen;const a=Math.min(Math.max(n,r),e);let o=a+t.integerLen,s=i[o];if(o>0){i.splice(Math.max(t.integerLen,o));for(let d=o;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,o=a+1),i[0]=0;for(let d=1;d<o;d++)i[d]=0}if(s>=5)if(o-1<0){for(let d=0;d>o;d--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[o-1]++;for(;r<Math.max(0,a);r++)i.push(0);let l=0!==a;const c=n+t.integerLen,u=i.reduceRight(function(d,v,m,b){return b[m]=(v+=d)<10?v:v-10,l&&(0===b[m]&&m>=c?b.pop():l=!1),v>=10?1:0},0);u&&(i.unshift(u),t.integerLen++)}(c,d,v);let m=c.digits,b=c.integerLen;const y=c.exponent;let C=[];for(l=m.every(w=>!w);b<u;b++)m.unshift(0);for(;b<0;b++)m.unshift(0);b>0?C=m.splice(b,m.length):(C=m,m=[0]);const k=[];for(m.length>=n.lgSize&&k.unshift(m.splice(-n.lgSize,m.length).join(""));m.length>n.gSize;)k.unshift(m.splice(-n.gSize,m.length).join(""));m.length&&k.unshift(m.join("")),s=k.join(ra(e,i)),C.length&&(s+=ra(e,r)+C.join("")),y&&(s+=ra(e,St.Exponential)+"+"+y)}else s=ra(e,St.Infinity);return s=t<0&&!l?n.negPre+s+n.negSuf:n.posPre+s+n.posSuf,s}function Uv(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(";"),r=i[0],a=i[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],s=o[0],l=o[1]||"";e.posPre=s.substr(0,s.indexOf("#"));for(let u=0;u<l.length;u++){const d=l.charAt(u);"0"===d?e.minFrac=e.maxFrac=u+1:"#"===d?e.maxFrac=u+1:e.posSuf+=d}const c=s.split(",");if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,a){const u=r.length-e.posPre.length-e.posSuf.length,d=a.indexOf("#");e.negPre=a.substr(0,d).replace(/'/g,""),e.negSuf=a.substr(d+u).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}function Hv(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}class Sh{}let QO=(()=>{class t extends Sh{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(wO(i||this.locale)(e)){case xn.Zero:return"zero";case xn.One:return"one";case xn.Two:return"two";case xn.Few:return"few";case xn.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Ue(jo))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),Ji=(()=>{class t{constructor(e,i,r,a){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Nc(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Mi(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(P(Zc),P(kl),P(Ri),P(ia))},t.\u0275dir=je({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class JO{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let on=(()=>{class t{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,a,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new JO(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===a?void 0:a);else if(null!==a){const s=i.get(a);i.move(s,o),ZS(s,r)}});for(let r=0,a=i.length;r<a;r++){const s=i.get(r).context;s.index=r,s.count=a,s.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{ZS(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(P(na),P(Zi),P(Zc))},t.\u0275dir=je({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function ZS(t,n){t.context.$implicit=n.item}let si=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new eN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){JS("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){JS("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return t.\u0275fac=function(e){return new(e||t)(P(na),P(Zi))},t.\u0275dir=je({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class eN{constructor(){this.$implicit=null,this.ngIf=null}}function JS(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Mi(n)}'.`)}let Pl=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(P(na))},t.\u0275dir=je({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[zn]}),t})();function Da(t,n){return new li(2100,"")}let bo=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!jv(e))return null;r=r||this._locale;try{return function WO(t,n,e){return Lv(t,Uv(Vv(n,Dr.Decimal),ra(n,St.MinusSign)),n,St.Group,St.Decimal,e)}($v(e),r,i)}catch(a){throw Da()}}}return t.\u0275fac=function(e){return new(e||t)(P(jo,16))},t.\u0275pipe=Cr({name:"number",type:t,pure:!0}),t})(),iC=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!jv(e))return null;r=r||this._locale;try{return function $O(t,n,e){return Lv(t,Uv(Vv(n,Dr.Percent),ra(n,St.MinusSign)),n,St.Group,St.Decimal,e,!0).replace(new RegExp("%","g"),ra(n,St.PercentSign))}($v(e),r,i)}catch(a){throw Da()}}}return t.\u0275fac=function(e){return new(e||t)(P(jo,16))},t.\u0275pipe=Cr({name:"percent",type:t,pure:!0}),t})();function jv(t){return!(null==t||""===t||t!=t)}function $v(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let Rr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({providers:[{provide:Sh,useClass:QO}]}),t})();let MN=(()=>{class t{}return t.\u0275prov=at({token:t,providedIn:"root",factory:()=>new kN(Ue(Rn),window)}),t})();class kN{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function AN(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const a=r.shadowRoot;if(a){const o=a.getElementById(n)||a.querySelector(`[name="${n}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],r-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=rC(this.window.history)||rC(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function rC(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Wv extends class EN extends class sO{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oO(t){hh||(hh=t)}(new Wv)}onAndCancel(n,e,i){return n.addEventListener(e,i,!1),()=>{n.removeEventListener(e,i,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function IN(){return tu=tu||document.querySelector("base"),tu?tu.getAttribute("href"):null}();return null==e?null:function VN(t){Ch=Ch||document.createElement("a"),Ch.setAttribute("href",t);const n=Ch.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){tu=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function KO(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,a]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(a)}return null}(document.cookie,n)}}let Ch,tu=null;const aC=new Yt("TRANSITION_ID"),NN=[{provide:sh,useFactory:function ON(t,n,e){return()=>{e.get(Ml).donePromise.then(()=>{const i=Ya(),r=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let a=0;a<r.length;a++)i.remove(r[a])})}},deps:[aC,Rn,Sn],multi:!0}];class qv{static init(){!function RV(t){Dv=t}(new qv)}addToWindow(n){Ii.getAngularTestability=(i,r=!0)=>{const a=n.findTestabilityInTree(i,r);if(null==a)throw new Error("Could not find testability for element.");return a},Ii.getAllAngularTestabilities=()=>n.getAllTestabilities(),Ii.getAllAngularRootElements=()=>n.getAllRootElements(),Ii.frameworkStabilizers||(Ii.frameworkStabilizers=[]),Ii.frameworkStabilizers.push(i=>{const r=Ii.getAllAngularTestabilities();let a=r.length,o=!1;const s=function(l){o=o||l,a--,0==a&&i(o)};r.forEach(function(l){l.whenStable(s)})})}findTestabilityInTree(n,e,i){if(null==e)return null;const r=n.getTestability(e);return null!=r?r:i?Ya().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null}}let FN=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const Th=new Yt("EventManagerPlugins");let Dh=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let a=0;a<r.length;a++){const o=r[a];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(Ue(Th),Ue(Li))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class oC{constructor(n){this._doc=n}addGlobalEventListener(n,e,i){const r=Ya().getGlobalEventTarget(this._doc,n);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let sC=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),iu=(()=>{class t extends sC{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(a=>{const o=this._doc.createElement("style");o.textContent=a,r.push(i.appendChild(o))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(lC),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(lC))}}return t.\u0275fac=function(e){return new(e||t)(Ue(Rn))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function lC(t){Ya().remove(t)}const Xv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Yv=/%COMP%/g;function Rh(t,n,e){for(let i=0;i<n.length;i++){let r=n[i];Array.isArray(r)?Rh(t,r,e):(r=r.replace(Yv,t),e.push(r))}return e}function dC(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let Qv=(()=>{class t{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Kv(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case Fa.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new zN(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case Fa.ShadowDom:return new jN(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Rh(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Ue(Dh),Ue(iu),Ue(Kc))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class Kv{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(Xv[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){n.appendChild(e)}insertBefore(n,e,i){n&&n.insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?document.querySelector(n):n;if(!i)throw new Error(`The selector "${n}" did not match any elements`);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const a=Xv[r];a?n.setAttributeNS(a,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=Xv[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(Br.DashCase|Br.Important)?n.style.setProperty(e,i,r&Br.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&Br.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,dC(i)):this.eventManager.addEventListener(n,e,dC(i))}}class zN extends Kv{constructor(n,e,i,r){super(n),this.component=i;const a=Rh(r+"-"+i.id,i.styles,[]);e.addStyles(a),this.contentAttr=function UN(t){return"_ngcontent-%COMP%".replace(Yv,t)}(r+"-"+i.id),this.hostAttr=function HN(t){return"_nghost-%COMP%".replace(Yv,t)}(r+"-"+i.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}class jN extends Kv{constructor(n,e,i,r){super(n),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Rh(r.id,r.styles,[]);for(let o=0;o<a.length;o++){const s=document.createElement("style");s.textContent=a[o],this.shadowRoot.appendChild(s)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let $N=(()=>{class t extends oC{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return t.\u0275fac=function(e){return new(e||t)(Ue(Rn))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const fC=["alt","control","meta","shift"],qN={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pC={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},XN={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let YN=(()=>{class t extends oC{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const a=t.parseEventName(i),o=t.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ya().onAndCancel(e,a.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const a=t._normalizeKey(i.pop());let o="";if(fC.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),o+=l+".")}),o+=a,0!=i.length||0===a.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(e){let i="",r=function QN(t){let n=t.key;if(null==n){if(n=t.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===t.location&&pC.hasOwnProperty(n)&&(n=pC[n]))}return qN[n]||n}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),fC.forEach(a=>{a!=r&&XN[a](e)&&(i+=a+".")}),i+=r,i}static eventCallback(e,i,r){return a=>{t.getEventFullKey(a)===e&&r.runGuarded(()=>i(a))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(Ue(Rn))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const eF=CS(KV,"browser",[{provide:lh,useValue:"browser"},{provide:pS,useValue:function KN(){Wv.makeCurrent(),qv.init()},multi:!0},{provide:Rn,useFactory:function JN(){return function wx(t){hp=t}(document),document},deps:[]}]),tF=[{provide:xg,useValue:"root"},{provide:nl,useFactory:function ZN(){return new nl},deps:[]},{provide:Th,useClass:$N,multi:!0,deps:[Rn,Li,lh]},{provide:Th,useClass:YN,multi:!0,deps:[Rn]},{provide:Qv,useClass:Qv,deps:[Dh,iu,Kc]},{provide:tv,useExisting:Qv},{provide:sC,useExisting:iu},{provide:iu,useClass:iu,deps:[Rn]},{provide:Tv,useClass:Tv,deps:[Li]},{provide:Dh,useClass:Dh,deps:[Th,Li]},{provide:class PN{},useClass:FN,deps:[]}];let iF=(()=>{class t{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Kc,useValue:e.appId},{provide:aC,useExisting:Kc},NN]}}}return t.\u0275fac=function(e){return new(e||t)(Ue(t,12))},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({providers:tF,imports:[Rr,rO]}),t})();"undefined"!=typeof window&&window;let Wo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:function(e){let i=null;return i=e?new(e||t):Ue(mC),i},providedIn:"root"}),t})(),mC=(()=>{class t extends Wo{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case ri.NONE:return i;case ri.HTML:return Ga(i,"HTML")?Fr(i):w1(this._doc,String(i)).toString();case ri.STYLE:return Ga(i,"Style")?Fr(i):i;case ri.SCRIPT:if(Ga(i,"Script"))return Fr(i);throw new Error("unsafe value used in a script context");case ri.URL:return f1(i),Ga(i,"URL")?Fr(i):xc(String(i));case ri.RESOURCE_URL:if(Ga(i,"ResourceURL"))return Fr(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function OM(t){return new AM(t)}(e)}bypassSecurityTrustStyle(e){return function NM(t){return new PM(t)}(e)}bypassSecurityTrustScript(e){return function FM(t){return new EM(t)}(e)}bypassSecurityTrustUrl(e){return function BM(t){return new IM(t)}(e)}bypassSecurityTrustResourceUrl(e){return function LM(t){return new VM(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)(Ue(Rn))},t.\u0275prov=at({token:t,factory:function(e){let i=null;return i=e?new e:function hF(t){return new mC(t.get(Rn))}(Ue(Sn)),i},providedIn:"root"}),t})();const{isArray:fF}=Array,{getPrototypeOf:pF,prototype:gF,keys:vF}=Object;function bC(t){if(1===t.length){const n=t[0];if(fF(n))return{args:n,keys:null};if(function mF(t){return t&&"object"==typeof t&&pF(t)===gF}(n)){const e=vF(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}const{isArray:bF}=Array;function Jv(t){return Nt(n=>function _F(t,n){return bF(n)?t(...n):t(n)}(t,n))}function _C(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}let yC=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(P(ia),P(Ri))},t.\u0275dir=je({type:t}),t})(),ms=(()=>{class t extends yC{}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Kn(t)))(i||t)}}(),t.\u0275dir=je({type:t,features:[Di]}),t})();const oa=new Yt("NgValueAccessor"),wF={provide:oa,useExisting:gi(()=>nu),multi:!0};let nu=(()=>{class t extends ms{writeValue(e){this.setProperty("checked",e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Kn(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,i){1&e&&I("change",function(a){return i.onChange(a.target.checked)})("blur",function(){return i.onTouched()})},features:[Bi([wF]),Di]}),t})();const SF={provide:oa,useExisting:gi(()=>qo),multi:!0},TF=new Yt("CompositionEventMode");let qo=(()=>{class t extends yC{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CF(){const t=Ya()?Ya().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(P(ia),P(Ri),P(TF,8))},t.\u0275dir=je({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&I("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[Bi([SF]),Di]}),t})();function wC(t){return null!=t&&"number"==typeof t.length}const tr=new Yt("NgValidators"),Yo=new Yt("NgAsyncValidators");function xh(t){return null}function AC(t){return null!=t}function PC(t){const n=Bc(t)?Un(t):t;return Gg(n),n}function EC(t){let n={};return t.forEach(e=>{n=null!=e?Object.assign(Object.assign({},n),e):n}),0===Object.keys(n).length?null:n}function IC(t,n){return n.map(e=>e(t))}function VC(t){return t.map(n=>function RF(t){return!t.validate}(n)?n:e=>n.validate(e))}function em(t){return null!=t?function OC(t){if(!t)return null;const n=t.filter(AC);return 0==n.length?null:function(e){return EC(IC(e,n))}}(VC(t)):null}function tm(t){return null!=t?function NC(t){if(!t)return null;const n=t.filter(AC);return 0==n.length?null:function(e){return function yF(...t){const n=nd(t),{args:e,keys:i}=bC(t),r=new Le(a=>{const{length:o}=e;if(!o)return void a.complete();const s=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;Pn(e[u]).subscribe(qt(a,v=>{d||(d=!0,c--),s[u]=v},()=>l--,void 0,()=>{(!l||!d)&&(c||a.next(i?_C(i,s):s),a.complete())}))}});return n?r.pipe(Jv(n)):r}(IC(e,n).map(PC)).pipe(Nt(EC))}}(VC(t)):null}function FC(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function BC(t){return t._rawValidators}function LC(t){return t._rawAsyncValidators}function im(t){return t?Array.isArray(t)?t:[t]:[]}function Mh(t,n){return Array.isArray(t)?t.includes(n):t===n}function UC(t,n){const e=im(n);return im(t).forEach(r=>{Mh(e,r)||e.push(r)}),e}function HC(t,n){return im(n).filter(e=>!Mh(t,e))}class GC{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=em(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=tm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class Qo extends GC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fr extends GC{get formDirective(){return null}get path(){return null}}class zC{constructor(n){this._cd=n}is(n){var e,i,r;return"submitted"===n?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[n])}}let bs=(()=>{class t extends zC{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(P(Qo,2))},t.\u0275dir=je({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&Mt("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[Di]}),t})(),kh=(()=>{class t extends zC{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(P(fr,10))},t.\u0275dir=je({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&Mt("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[Di]}),t})();function Ph(t,n){return[...n.path,t]}function ru(t,n){am(t,n),n.valueAccessor.writeValue(t.value),function VF(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&$C(t,n)})}(t,n),function NF(t,n){const e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function OF(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&$C(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function IF(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function Eh(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),Vh(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ih(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function am(t,n){const e=BC(t);null!==n.validator?t.setValidators(FC(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=LC(t);null!==n.asyncValidator?t.setAsyncValidators(FC(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();Ih(n._rawValidators,r),Ih(n._rawAsyncValidators,r)}function Vh(t,n){let e=!1;if(null!==t){if(null!==n.validator){const r=BC(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==n.validator);a.length!==r.length&&(e=!0,t.setValidators(a))}}if(null!==n.asyncValidator){const r=LC(t);if(Array.isArray(r)&&r.length>0){const a=r.filter(o=>o!==n.asyncValidator);a.length!==r.length&&(e=!0,t.setAsyncValidators(a))}}}const i=()=>{};return Ih(n._rawValidators,i),Ih(n._rawAsyncValidators,i),e}function $C(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function WC(t,n){am(t,n)}function om(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function qC(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function sm(t,n){if(!n)return null;let e,i,r;return Array.isArray(n),n.forEach(a=>{a.constructor===qo?e=a:function LF(t){return Object.getPrototypeOf(t.constructor)===ms}(a)?i=a:r=a}),r||i||e||null}function lm(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const au="VALID",Oh="INVALID",El="PENDING",ou="DISABLED";function um(t){return(Nh(t)?t.validators:t)||null}function XC(t){return Array.isArray(t)?em(t):t||null}function dm(t,n){return(Nh(n)?n.asyncValidators:t)||null}function YC(t){return Array.isArray(t)?tm(t):t||null}function Nh(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const QC=t=>t instanceof pm,hm=t=>t instanceof Fh;function KC(t){return QC(t)?t.value:t.getRawValue()}function ZC(t,n){const e=hm(t),i=t.controls;if(!(e?Object.keys(i):i).length)throw new li(1e3,"");if(!i[n])throw new li(1001,"")}function JC(t,n){hm(t),t._forEachChild((i,r)=>{if(void 0===n[r])throw new li(1002,"")})}class fm{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=XC(this._rawValidators),this._composedAsyncValidatorFn=YC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===au}get invalid(){return this.status===Oh}get pending(){return this.status==El}get disabled(){return this.status===ou}get enabled(){return this.status!==ou}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=XC(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=YC(n)}addValidators(n){this.setValidators(UC(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(UC(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(HC(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(HC(n,this._rawAsyncValidators))}hasValidator(n){return Mh(this._rawValidators,n)}hasAsyncValidator(n){return Mh(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=El,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=ou,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=au,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===au||this.status===El)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ou:au}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=El,this._hasOwnPendingAsyncValidator=!0;const e=PC(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){return function UF(t,n,e){if(null==n||(Array.isArray(n)||(n=n.split(e)),Array.isArray(n)&&0===n.length))return null;let i=t;return n.forEach(r=>{i=hm(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(t=>t instanceof GF)(i)&&i.at(r)||null}),i}(this,n,".")}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?ou:this.errors?Oh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(El)?El:this._anyControlsHaveStatus(Oh)?Oh:au}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Nh(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class pm extends fm{constructor(n=null,e,i){super(um(e),dm(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nh(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){lm(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){lm(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class Fh extends fm{constructor(n,e,i){super(um(e),dm(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){JC(this,n),Object.keys(n).forEach(i=>{ZC(this,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=KC(e),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&n(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,e,i)=>((e.enabled||this.disabled)&&(n[i]=e.value),n))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,a)=>{i=e(i,r,a)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class GF extends fm{constructor(n,e,i){super(um(e),dm(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),e&&(this.controls.splice(n,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){JC(this,n),n.forEach((i,r)=>{ZC(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>KC(n))}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const zF={provide:fr,useExisting:gi(()=>lu)},su=(()=>Promise.resolve(null))();let lu=(()=>{class t extends fr{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new ot,this.form=new Fh({},em(e),tm(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){su.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),ru(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){su.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){su.then(()=>{const i=this._findContainer(e.path),r=new Fh({});WC(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){su.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){su.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,qC(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(P(tr,10),P(Yo,10))},t.\u0275dir=je({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&I("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Bi([zF]),Di]}),t})();const $F={provide:Qo,useExisting:gi(()=>_s)},iT=(()=>Promise.resolve(null))();let _s=(()=>{class t extends Qo{constructor(e,i,r,a,o){super(),this._changeDetectorRef=o,this.control=new pm,this._registered=!1,this.update=new ot,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=sm(0,a)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),om(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ru(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){iT.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;iT.then(()=>{var a;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(e){return this._parent?Ph(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(P(fr,9),P(tr,10),P(Yo,10),P(oa,10),P(Ur,8))},t.\u0275dir=je({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Bi([$F]),Di,zn]}),t})(),Bh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const WF={provide:oa,useExisting:gi(()=>gm),multi:!0};let gm=(()=>{class t extends ms{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Kn(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,i){1&e&&I("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},features:[Bi([WF]),Di]}),t})(),nT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({}),t})();const vm=new Yt("NgModelWithFormControlWarning"),KF={provide:fr,useExisting:gi(()=>Lh)};let Lh=(()=>{class t extends fr{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ot,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Vh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return ru(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Eh(e.control||null,e,!1),lm(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,qC(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(Eh(i||null,e),QC(r)&&(ru(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);WC(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function FF(t,n){return Vh(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){am(this.form,this),this._oldForm&&Vh(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(P(tr,10),P(Yo,10))},t.\u0275dir=je({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&I("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Bi([KF]),Di,zn]}),t})();const e3={provide:Qo,useExisting:gi(()=>_m)};let _m=(()=>{class t extends Qo{constructor(e,i,r,a,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new ot,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=sm(0,a)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),om(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Ph(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(P(fr,13),P(tr,10),P(Yo,10),P(oa,10),P(vm,8))},t.\u0275dir=je({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Bi([e3]),Di,zn]}),t})();const t3={provide:oa,useExisting:gi(()=>Uh),multi:!0};function lT(t,n){return null==t?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let Uh=(()=>{class t extends ms{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=lT(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function n3(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Kn(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&I("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bi([t3]),Di]}),t})(),cT=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(lT(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(P(Ri),P(ia),P(Uh,9))},t.\u0275dir=je({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const r3={provide:oa,useExisting:gi(()=>ym),multi:!0};function uT(t,n){return null==t?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${t}: ${n}`.slice(0,50))}let ym=(()=>{class t extends ms{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(a=>this._getOptionId(a));i=(a,o)=>{a._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,a)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],a=i.selectedOptions;if(void 0!==a){const o=a;for(let s=0;s<o.length;s++){const c=this._getOptionValue(o[s].value);r.push(c)}}else{const o=i.options;for(let s=0;s<o.length;s++){const l=o[s];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function a3(t){return t.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Kn(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&I("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bi([r3]),Di]}),t})(),dT=(()=>{class t{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(uT(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(uT(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(P(Ri),P(ia),P(ym,9))},t.\u0275dir=je({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function hT(t){return"number"==typeof t?t:parseInt(t,10)}let ys=(()=>{class t{constructor(){this._validator=xh}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):xh,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,features:[zn]}),t})();const h3={provide:tr,useExisting:gi(()=>Hh),multi:!0};let Hh=(()=>{class t extends ys{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>hT(e),this.createValidator=e=>function xC(t){return n=>function Xo(t){return null==t||0===t.length}(n.value)||!wC(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Kn(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&Ai("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[Bi([h3]),Di]}),t})();const f3={provide:tr,useExisting:gi(()=>Il),multi:!0};let Il=(()=>{class t extends ys{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>hT(e),this.createValidator=e=>function MC(t){return n=>wC(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(e)}}return t.\u0275fac=function(){let n;return function(i){return(n||(n=Kn(t)))(i||t)}}(),t.\u0275dir=je({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&Ai("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Bi([f3]),Di]}),t})(),_T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[nT]]}),t})(),yT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[_T]}),t})(),g3=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:vm,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[_T]}),t})();function It(...t){return Un(t,cc(t))}class sn extends we{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function wT(t,n,e){t?Yr(e,t,n):n()}const Gh=H(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function cu(...t){return function m3(){return lc(1)}()(Un(t,cc(t)))}function ST(t){return new Le(n=>{Pn(t()).subscribe(n)})}function CT(){return xt((t,n)=>{let e=null;t._refCount++;const i=qt(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,a=e;e=null,r&&(!a||r===a)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}class b3 extends Le{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Oi(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,null==n||n.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new ge;const e=this.getSubject();n.add(this.source.subscribe(qt(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=ge.EMPTY)}return n}refCount(){return CT()(this)}}function _o(t,n){return xt((e,i)=>{let r=null,a=0,o=!1;const s=()=>o&&!r&&i.complete();e.subscribe(qt(i,l=>{null==r||r.unsubscribe();let c=0;const u=a++;Pn(t(l,u)).subscribe(r=qt(i,d=>i.next(n?n(l,d,u,c++):d),()=>{r=null,s()}))},()=>{o=!0,s()}))})}function _3(t,n,e,i,r){return(a,o)=>{let s=e,l=n,c=0;a.subscribe(qt(o,u=>{const d=c++;l=s?t(l,u,d):(s=!0,u),i&&o.next(l)},r&&(()=>{s&&o.next(l),o.complete()})))}}function TT(t,n){return xt(_3(t,n,arguments.length>=2,!0))}function qn(t,n){return xt((e,i)=>{let r=0;e.subscribe(qt(i,a=>t.call(n,a,r++)&&i.next(a)))})}function Ko(t){return xt((n,e)=>{let a,i=null,r=!1;i=n.subscribe(qt(e,void 0,void 0,o=>{a=Pn(t(o,Ko(t)(n))),i?(i.unsubscribe(),i=null,a.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,a.subscribe(e))})}function uu(t,n){return K(n)?yn(t,n,1):yn(t,1)}function Cm(t){return t<=0?()=>ha:xt((n,e)=>{let i=[];n.subscribe(qt(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function DT(t=y3){return xt((n,e)=>{let i=!1;n.subscribe(qt(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function y3(){return new Gh}function RT(t){return xt((n,e)=>{let i=!1;n.subscribe(qt(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function Vl(t,n){const e=arguments.length>=2;return i=>i.pipe(t?qn((r,a)=>t(r,a,i)):Be,Hn(1),e?RT(n):DT(()=>new Gh))}function ir(t,n,e){const i=K(t)||n||e?{next:t,error:n,complete:e}:t;return i?xt((r,a)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let s=!0;r.subscribe(qt(a,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),a.next(l)},()=>{var l;s=!1,null===(l=i.complete)||void 0===l||l.call(i),a.complete()},l=>{var c;s=!1,null===(c=i.error)||void 0===c||c.call(i,l),a.error(l)},()=>{var l,c;s&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Be}class yo{constructor(n,e){this.id=n,this.url=e}}class Tm extends yo{constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class du extends yo{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xT extends yo{constructor(n,e,i){super(n,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class C3 extends yo{constructor(n,e,i){super(n,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class T3 extends yo{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D3 extends yo{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class R3 extends yo{constructor(n,e,i,r,a){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class x3 extends yo{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M3 extends yo{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MT{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kT{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class k3{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class A3{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P3{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E3{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AT{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Jt="primary";class I3{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ol(t){return new I3(t)}const PT="ngNavigationCancelingError";function Dm(t){const n=Error("NavigationCancelingError: "+t);return n[PT]=!0,n}function O3(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let a=0;a<i.length;a++){const o=i[a],s=t[a];if(o.startsWith(":"))r[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Qa(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let a=0;a<e.length;a++)if(r=e[a],!ET(t[r],n[r]))return!1;return!0}function ET(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,a)=>i[a]===r)}return t===n}function IT(t){return Array.prototype.concat.apply([],t)}function VT(t){return t.length>0?t[t.length-1]:null}function Xn(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function Ka(t){return Gg(t)?t:Bc(t)?Un(Promise.resolve(t)):It(t)}const B3={exact:function FT(t,n,e){if(!Ss(t.segments,n.segments)||!jh(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!FT(t.children[i],n.children[i],e))return!1;return!0},subset:BT},OT={exact:function L3(t,n){return Qa(t,n)},subset:function U3(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>ET(t[e],n[e]))},ignored:()=>!0};function NT(t,n,e){return B3[e.paths](t.root,n.root,e.matrixParams)&&OT[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function BT(t,n,e){return LT(t,n,n.segments,e)}function LT(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!Ss(r,e)||n.hasChildren()||!jh(r,e,i))}if(t.segments.length===e.length){if(!Ss(t.segments,e)||!jh(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!BT(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!!(Ss(t.segments,r)&&jh(t.segments,r,i)&&t.children[Jt])&&LT(t.children[Jt],n,a,i)}}function jh(t,n,e){return n.every((i,r)=>OT[e](t[r].parameters,i.parameters))}class ws{constructor(n,e,i){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ol(this.queryParams)),this._queryParamMap}toString(){return z3.serialize(this)}}class ai{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Xn(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $h(this)}}class hu{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ol(this.parameters)),this._parameterMap}toString(){return jT(this)}}function Ss(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}class UT{}class HT{parse(n){const e=new Z3(n);return new ws(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${fu(n.root,!0)}`,i=function W3(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${Wh(e)}=${Wh(r)}`).join("&"):`${Wh(e)}=${Wh(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function j3(t){return encodeURI(t)}(n.fragment)}`:""}`}}const z3=new HT;function $h(t){return t.segments.map(n=>jT(n)).join("/")}function fu(t,n){if(!t.hasChildren())return $h(t);if(n){const e=t.children[Jt]?fu(t.children[Jt],!1):"",i=[];return Xn(t.children,(r,a)=>{a!==Jt&&i.push(`${a}:${fu(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function G3(t,n){let e=[];return Xn(t.children,(i,r)=>{r===Jt&&(e=e.concat(n(i,r)))}),Xn(t.children,(i,r)=>{r!==Jt&&(e=e.concat(n(i,r)))}),e}(t,(i,r)=>r===Jt?[fu(t.children[Jt],!1)]:[`${r}:${fu(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Jt]?`${$h(t)}/${e[0]}`:`${$h(t)}/(${e.join("//")})`}}function GT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wh(t){return GT(t).replace(/%3B/gi,";")}function Rm(t){return GT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qh(t){return decodeURIComponent(t)}function zT(t){return qh(t.replace(/\+/g,"%20"))}function jT(t){return`${Rm(t.path)}${function $3(t){return Object.keys(t).map(n=>`;${Rm(n)}=${Rm(t[n])}`).join("")}(t.parameters)}`}const q3=/^[^\/()?;=#]+/;function Xh(t){const n=t.match(q3);return n?n[0]:""}const X3=/^[^=?&#]+/,Q3=/^[^&#]+/;class Z3{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ai([],{}):new ai([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[Jt]=new ai(n,e)),i}parseSegment(){const n=Xh(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new hu(qh(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=Xh(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Xh(this.remaining);r&&(i=r,this.capture(i))}n[qh(e)]=qh(i)}parseQueryParam(n){const e=function Y3(t){const n=t.match(X3);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function K3(t){const n=t.match(Q3);return n?n[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=zT(e),a=zT(i);if(n.hasOwnProperty(r)){let o=n[r];Array.isArray(o)||(o=[o],n[r]=o),o.push(a)}else n[r]=a}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Xh(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a;i.indexOf(":")>-1?(a=i.substr(0,i.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=Jt);const o=this.parseChildren();e[a]=1===Object.keys(o).length?o[Jt]:new ai([],o),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class $T{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=xm(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=xm(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Mm(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return Mm(n,this._root).map(e=>e.value)}}function xm(t,n){if(t===n.value)return n;for(const e of n.children){const i=xm(t,e);if(i)return i}return null}function Mm(t,n){if(t===n.value)return[n];for(const e of n.children){const i=Mm(t,e);if(i.length)return i.unshift(n),i}return[]}class wo{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function Nl(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class WT extends $T{constructor(n,e){super(n),this.snapshot=e,km(this,n)}toString(){return this.snapshot.toString()}}function qT(t,n){const e=function J3(t,n){const o=new Yh([],{},{},"",{},Jt,n,null,t.root,-1,{});return new YT("",new wo(o,[]))}(t,n),i=new sn([new hu("",{})]),r=new sn({}),a=new sn({}),o=new sn({}),s=new sn(""),l=new Fl(i,r,o,s,a,Jt,n,e.root);return l.snapshot=e.root,new WT(new wo(l,[]),e)}class Fl{constructor(n,e,i,r,a,o,s,l){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Nt(n=>Ol(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Nt(n=>Ol(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function XT(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],a=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function eB(t){return t.reduce((n,e)=>({params:Object.assign(Object.assign({},n.params),e.params),data:Object.assign(Object.assign({},n.data),e.data),resolve:Object.assign(Object.assign({},n.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Yh{constructor(n,e,i,r,a,o,s,l,c,u,d){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ol(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ol(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class YT extends $T{constructor(n,e){super(e),this.url=n,km(this,e)}toString(){return QT(this._root)}}function km(t,n){n.value._routerState=t,n.children.forEach(e=>km(t,e))}function QT(t){const n=t.children.length>0?` { ${t.children.map(QT).join(", ")} } `:"";return`${t.value}${n}`}function Am(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Qa(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),Qa(n.params,e.params)||t.params.next(e.params),function N3(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!Qa(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),Qa(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Pm(t,n){const e=Qa(t.params,n.params)&&function H3(t,n){return Ss(t,n)&&t.every((e,i)=>Qa(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||Pm(t.parent,n.parent))}function pu(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function iB(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return pu(t,i,r);return pu(t,i)})}(t,n,e);return new wo(i,r)}{if(t.shouldAttach(n.value)){const a=t.retrieve(n.value);if(null!==a){const o=a.route;return o.value._futureSnapshot=n.value,o.children=n.children.map(s=>pu(t,s)),o}}const i=function nB(t){return new Fl(new sn(t.url),new sn(t.params),new sn(t.queryParams),new sn(t.fragment),new sn(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(a=>pu(t,a));return new wo(i,r)}}function Qh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function gu(t){return"object"==typeof t&&null!=t&&t.outlets}function Em(t,n,e,i,r){let a={};return i&&Xn(i,(o,s)=>{a[s]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new ws(e.root===t?n:KT(e.root,t,n),a,r)}function KT(t,n,e){const i={};return Xn(t.children,(r,a)=>{i[a]=r===n?e:KT(r,n,e)}),new ai(t.segments,i)}class ZT{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&Qh(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(gu);if(r&&r!==VT(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Im{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function JT(t,n,e){if(t||(t=new ai([],{})),0===t.segments.length&&t.hasChildren())return Kh(t,n,e);const i=function cB(t,n,e){let i=0,r=n;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return a;const o=t.segments[r],s=e[i];if(gu(s))break;const l=`${s}`,c=i<e.length-1?e[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!tD(l,c,o))return a;i+=2}else{if(!tD(l,{},o))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const a=new ai(t.segments.slice(0,i.pathIndex),{});return a.children[Jt]=new ai(t.segments.slice(i.pathIndex),t.children),Kh(a,0,r)}return i.match&&0===r.length?new ai(t.segments,{}):i.match&&!t.hasChildren()?Vm(t,n,e):i.match?Kh(t,0,r):Vm(t,n,e)}function Kh(t,n,e){if(0===e.length)return new ai(t.segments,{});{const i=function lB(t){return gu(t[0])?t[0].outlets:{[Jt]:t}}(e),r={};return Xn(i,(a,o)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[o]=JT(t.children[o],n,a))}),Xn(t.children,(a,o)=>{void 0===i[o]&&(r[o]=a)}),new ai(t.segments,r)}}function Vm(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const a=e[r];if(gu(a)){const l=uB(a.outlets);return new ai(i,l)}if(0===r&&Qh(e[0])){i.push(new hu(t.segments[n].path,eD(e[0]))),r++;continue}const o=gu(a)?a.outlets[Jt]:`${a}`,s=r<e.length-1?e[r+1]:null;o&&s&&Qh(s)?(i.push(new hu(o,eD(s))),r+=2):(i.push(new hu(o,{})),r++)}return new ai(i,{})}function uB(t){const n={};return Xn(t,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[i]=Vm(new ai([],{}),0,e))}),n}function eD(t){const n={};return Xn(t,(e,i)=>n[i]=`${e}`),n}function tD(t,n,e){return t==e.path&&Qa(n,e.parameters)}class hB{constructor(n,e,i,r){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),Am(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=Nl(e);n.children.forEach(a=>{const o=a.value.outlet;this.deactivateRoutes(a,r[o],i),delete r[o]}),Xn(r,(a,o)=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(r===a)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(n,e,o.children)}else this.deactivateChildRoutes(n,e,i);else a&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=Nl(n);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);if(i&&i.outlet){const o=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:s})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,a=Nl(n);for(const o of Object.keys(a))this.deactivateRouteAndItsChildren(a[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(n,e,i){const r=Nl(e);n.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],i),this.forwardEvent(new E3(a.value.snapshot))}),n.children.length&&this.forwardEvent(new A3(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,a=e?e.value:null;if(Am(r),r===a)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,o.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),Am(s.route.value),this.activateChildRoutes(n,null,o.children)}else{const s=function fB(t){for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),l=s?s.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(n,null,o.children)}}else this.activateChildRoutes(n,null,i)}}class Om{constructor(n,e){this.routes=n,this.module=e}}function Zo(t){return"function"==typeof t}function Cs(t){return t instanceof ws}const vu=Symbol("INITIAL_VALUE");function mu(){return _o(t=>function Sm(...t){const n=cc(t),e=nd(t),{args:i,keys:r}=bC(t);if(0===i.length)return Un([],n);const a=new Le(function v3(t,n,e=Be){return i=>{wT(n,()=>{const{length:r}=t,a=new Array(r);let o=r,s=r;for(let l=0;l<r;l++)wT(n,()=>{const c=Un(t[l],n);let u=!1;c.subscribe(qt(i,d=>{a[l]=d,u||(u=!0,s--),s||i.next(e(a.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,n,r?o=>_C(r,o):Be));return e?a.pipe(Jv(e)):a}(t.map(n=>n.pipe(Hn(1),function zh(...t){const n=cc(t);return xt((e,i)=>{(n?cu(t,e,n):cu(t,e)).subscribe(i)})}(vu)))).pipe(TT((n,e)=>{let i=!1;return e.reduce((r,a,o)=>r!==vu?r:(a===vu&&(i=!0),i||!1!==a&&o!==e.length-1&&!Cs(a)?r:a),n)},vu),qn(n=>n!==vu),Nt(n=>Cs(n)?n:!0===n),Hn(1)))}class _B{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new bu,this.attachRef=null}}class bu{constructor(){this.contexts=new Map}onChildOutletCreated(n,e){const i=this.getOrCreateContext(n);i.outlet=e,this.contexts.set(n,i)}onChildOutletDestroyed(n){const e=this.getContext(n);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let e=this.getContext(n);return e||(e=new _B,this.contexts.set(n,e)),e}getContext(n){return this.contexts.get(n)||null}}let Nm=(()=>{class t{constructor(e,i,r,a,o){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.name=a||Jt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const o=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),s=this.parentContexts.getOrCreateContext(this.name).children,l=new yB(e,s,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(P(bu),P(na),P(fs),function ls(t){return function Zx(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const a=e[r];if(Ub(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(a===n)return e[r+1];r+=2}}}return null}(En(),t)}("name"),P(Ur))},t.\u0275dir=je({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class yB{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===Fl?this.route:n===bu?this.childContexts:this.parent.get(n,e)}}let iD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_t({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&D(0,"router-outlet")},directives:[Nm],encapsulation:2}),t})();function nD(t,n=""){for(let e=0;e<t.length;e++){const i=t[e];wB(i,SB(n,i))}}function wB(t,n){t.children&&nD(t.children,n)}function SB(t,n){return n?t||n.path?t&&!n.path?`${t}/`:!t&&n.path?n.path:`${t}/${n.path}`:"":t}function Fm(t){const n=t.children&&t.children.map(Fm),e=n?Object.assign(Object.assign({},t),{children:n}):Object.assign({},t);return!e.component&&(n||e.loadChildren)&&e.outlet&&e.outlet!==Jt&&(e.component=iD),e}function sa(t){return t.outlet||Jt}function rD(t,n){const e=t.filter(i=>sa(i)===n);return e.push(...t.filter(i=>sa(i)!==n)),e}const aD={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Zh(t,n,e){var i;if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},aD):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(n.matcher||O3)(e,t,n);if(!a)return Object.assign({},aD);const o={};Xn(a.posParams,(l,c)=>{o[c]=l.path});const s=a.consumed.length>0?Object.assign(Object.assign({},o),a.consumed[a.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:s,positionalParamSegments:null!==(i=a.posParams)&&void 0!==i?i:{}}}function Jh(t,n,e,i,r="corrected"){if(e.length>0&&function DB(t,n,e){return e.some(i=>ef(t,n,i)&&sa(i)!==Jt)}(t,e,i)){const o=new ai(n,function TB(t,n,e,i){const r={};r[Jt]=i,i._sourceSegment=t,i._segmentIndexShift=n.length;for(const a of e)if(""===a.path&&sa(a)!==Jt){const o=new ai([],{});o._sourceSegment=t,o._segmentIndexShift=n.length,r[sa(a)]=o}return r}(t,n,i,new ai(e,t.children)));return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function RB(t,n,e){return e.some(i=>ef(t,n,i))}(t,e,i)){const o=new ai(t.segments,function CB(t,n,e,i,r,a){const o={};for(const s of i)if(ef(t,e,s)&&!r[sa(s)]){const l=new ai([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===a?t.segments.length:n.length,o[sa(s)]=l}return Object.assign(Object.assign({},r),o)}(t,n,e,i,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:e}}const a=new ai(t.segments,t.children);return a._sourceSegment=t,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:e}}function ef(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function oD(t,n,e,i){return!!(sa(t)===i||i!==Jt&&ef(n,e,t))&&("**"===t.path||Zh(n,t,e).matched)}function sD(t,n,e){return 0===n.length&&!t.children[e]}class _u{constructor(n){this.segmentGroup=n||null}}class lD{constructor(n){this.urlTree=n}}function tf(t){return new Le(n=>n.error(new _u(t)))}function cD(t){return new Le(n=>n.error(new lD(t)))}function xB(t){return new Le(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class AB{constructor(n,e,i,r,a){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=n.get(go)}apply(){const n=Jh(this.urlTree.root,[],[],this.config).segmentGroup,e=new ai(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Jt).pipe(Nt(a=>this.createUrlTree(Bm(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ko(a=>{if(a instanceof lD)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof _u?this.noMatchError(a):a}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,Jt).pipe(Nt(r=>this.createUrlTree(Bm(r),n.queryParams,n.fragment))).pipe(Ko(r=>{throw r instanceof _u?this.noMatchError(r):r}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,e,i){const r=n.segments.length>0?new ai([],{[Jt]:n}):n;return new ws(r,e,i)}expandSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(n,e,i).pipe(Nt(a=>new ai([],a))):this.expandSegment(n,i,e,i.segments,r,!0)}expandChildren(n,e,i){const r=[];for(const a of Object.keys(i.children))"primary"===a?r.unshift(a):r.push(a);return Un(r).pipe(uu(a=>{const o=i.children[a],s=rD(e,a);return this.expandSegmentGroup(n,s,o,a).pipe(Nt(l=>({segment:l,outlet:a})))}),TT((a,o)=>(a[o.outlet]=o.segment,a),{}),function w3(t,n){const e=arguments.length>=2;return i=>i.pipe(t?qn((r,a)=>t(r,a,i)):Be,Cm(1),e?RT(n):DT(()=>new Gh))}())}expandSegment(n,e,i,r,a,o){return Un(i).pipe(uu(s=>this.expandSegmentAgainstRoute(n,e,i,s,r,a,o).pipe(Ko(c=>{if(c instanceof _u)return It(null);throw c}))),Vl(s=>!!s),Ko((s,l)=>{if(s instanceof Gh||"EmptyError"===s.name){if(sD(e,r,a))return It(new ai([],{}));throw new _u(e)}throw s}))}expandSegmentAgainstRoute(n,e,i,r,a,o,s){return oD(r,e,a,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,e,r,a,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o):tf(e):tf(e)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const a=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?cD(a):this.lineralizeSegments(i,a).pipe(yn(o=>{const s=new ai(o,{});return this.expandSegment(n,s,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,a,o){const{matched:s,consumedSegments:l,lastChild:c,positionalParamSegments:u}=Zh(e,r,a);if(!s)return tf(e);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?cD(d):this.lineralizeSegments(r,d).pipe(yn(v=>this.expandSegment(n,e,i,v.concat(a.slice(c)),o,!1)))}matchSegmentAgainstRoute(n,e,i,r,a){if("**"===i.path)return i.loadChildren?(i._loadedConfig?It(i._loadedConfig):this.configLoader.load(n.injector,i)).pipe(Nt(v=>(i._loadedConfig=v,new ai(r,{})))):It(new ai(r,{}));const{matched:o,consumedSegments:s,lastChild:l}=Zh(e,i,r);if(!o)return tf(e);const c=r.slice(l);return this.getChildConfig(n,i,r).pipe(yn(d=>{const v=d.module,m=d.routes,{segmentGroup:b,slicedSegments:y}=Jh(e,s,c,m),C=new ai(b.segments,b.children);if(0===y.length&&C.hasChildren())return this.expandChildren(v,m,C).pipe(Nt(z=>new ai(s,z)));if(0===m.length&&0===y.length)return It(new ai(s,{}));const k=sa(i)===a;return this.expandSegment(v,C,m,y,k?Jt:a,!0).pipe(Nt(R=>new ai(s.concat(R.segments),R.children)))}))}getChildConfig(n,e,i){return e.children?It(new Om(e.children,n)):e.loadChildren?void 0!==e._loadedConfig?It(e._loadedConfig):this.runCanLoadGuards(n.injector,e,i).pipe(yn(r=>r?this.configLoader.load(n.injector,e).pipe(Nt(a=>(e._loadedConfig=a,a))):function MB(t){return new Le(n=>n.error(Dm(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):It(new Om([],n))}runCanLoadGuards(n,e,i){const r=e.canLoad;return r&&0!==r.length?It(r.map(o=>{const s=n.get(o);let l;if(function gB(t){return t&&Zo(t.canLoad)}(s))l=s.canLoad(e,i);else{if(!Zo(s))throw new Error("Invalid CanLoad guard");l=s(e,i)}return Ka(l)})).pipe(mu(),ir(o=>{if(!Cs(o))return;const s=Dm(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw s.url=o,s}),Nt(o=>!0===o)):It(!0)}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return It(i);if(r.numberOfChildren>1||!r.children[Jt])return xB(n.redirectTo);r=r.children[Jt]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreatreUrlTree(n,e,i,r){const a=this.createSegmentGroup(n,e.root,i,r);return new ws(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Xn(n,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const s=r.substring(1);i[a]=e[s]}else i[a]=r}),i}createSegmentGroup(n,e,i,r){const a=this.createSegments(n,e.segments,i,r);let o={};return Xn(e.children,(s,l)=>{o[l]=this.createSegmentGroup(n,s,i,r)}),new ai(a,o)}createSegments(n,e,i,r){return e.map(a=>a.path.startsWith(":")?this.findPosParam(n,a,r):this.findOrReturn(a,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${n}'. Cannot find '${e.path}'.`);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}function Bm(t){const n={};for(const i of Object.keys(t.children)){const a=Bm(t.children[i]);(a.segments.length>0||a.hasChildren())&&(n[i]=a)}return function PB(t){if(1===t.numberOfChildren&&t.children[Jt]){const n=t.children[Jt];return new ai(t.segments.concat(n.segments),n.children)}return t}(new ai(t.segments,n))}class uD{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class nf{constructor(n,e){this.component=n,this.route=e}}function IB(t,n,e){const i=t._root;return yu(i,n?n._root:null,e,[i.value])}function rf(t,n,e){const i=function OB(t){if(!t)return null;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(n);return(i?i.module.injector:e).get(t)}function yu(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=Nl(n);return t.children.forEach(o=>{(function NB(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=t.value,o=n?n.value:null,s=e?e.getContext(t.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){const l=function FB(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Ss(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Ss(t.url,n.url)||!Qa(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pm(t,n)||!Qa(t.queryParams,n.queryParams);default:return!Pm(t,n)}}(o,a,a.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new uD(i)):(a.data=o.data,a._resolvedData=o._resolvedData),yu(t,n,a.component?s?s.children:null:e,i,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new nf(s.outlet.component,o))}else o&&wu(n,s,r),r.canActivateChecks.push(new uD(i)),yu(t,null,a.component?s?s.children:null:e,i,r)})(o,a[o.value.outlet],e,i.concat([o.value]),r),delete a[o.value.outlet]}),Xn(a,(o,s)=>wu(o,e.getContext(s),r)),r}function wu(t,n,e){const i=Nl(t),r=t.value;Xn(i,(a,o)=>{wu(a,r.component?n?n.children.getContext(o):null:n,e)}),e.canDeactivateChecks.push(new nf(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}class WB{}function dD(t){return new Le(n=>n.error(t))}class XB{constructor(n,e,i,r,a,o){this.rootComponentType=n,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}recognize(){const n=Jh(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,n,Jt);if(null===e)return null;const i=new Yh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new wo(i,e),a=new YT(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(n){const e=n.value,i=XT(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(n,e):this.processSegment(n,e,e.segments,i)}processChildren(n,e){const i=[];for(const a of Object.keys(e.children)){const o=e.children[a],s=rD(n,a),l=this.processSegmentGroup(s,o,a);if(null===l)return null;i.push(...l)}const r=hD(i);return function YB(t){t.sort((n,e)=>n.value.outlet===Jt?-1:e.value.outlet===Jt?1:n.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(n,e,i,r){for(const a of n){const o=this.processSegmentAgainstRoute(a,e,i,r);if(null!==o)return o}return sD(e,i,r)?[]:null}processSegmentAgainstRoute(n,e,i,r){if(n.redirectTo||!oD(n,e,i,r))return null;let a,o=[],s=[];if("**"===n.path){const m=i.length>0?VT(i).parameters:{};a=new Yh(i,m,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gD(n),sa(n),n.component,n,fD(e),pD(e)+i.length,vD(n))}else{const m=Zh(e,n,i);if(!m.matched)return null;o=m.consumedSegments,s=i.slice(m.lastChild),a=new Yh(o,m.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gD(n),sa(n),n.component,n,fD(e),pD(e)+o.length,vD(n))}const l=function QB(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(n),{segmentGroup:c,slicedSegments:u}=Jh(e,o,s,l.filter(m=>void 0===m.redirectTo),this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const m=this.processChildren(l,c);return null===m?null:[new wo(a,m)]}if(0===l.length&&0===u.length)return[new wo(a,[])];const d=sa(n)===r,v=this.processSegment(l,c,u,d?Jt:r);return null===v?null:[new wo(a,v)]}}function KB(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function hD(t){const n=[],e=new Set;for(const i of t){if(!KB(i)){n.push(i);continue}const r=n.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=hD(i.children);n.push(new wo(i.value,r))}return n.filter(i=>!e.has(i))}function fD(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function pD(t){let n=t,e=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift?n._segmentIndexShift:0;return e-1}function gD(t){return t.data||{}}function vD(t){return t.resolve||{}}function mD(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Lm(t){return _o(n=>{const e=t(n);return e?Un(e).pipe(Nt(()=>n)):It(n)})}class a5 extends class r5{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}{}const Um=new Yt("ROUTES");class bD{constructor(n,e,i,r){this.injector=n,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(n,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(Nt(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const o=a.create(n);return new Om(IT(o.injector.get(Um,void 0,Ft.Self|Ft.Optional)).map(Fm),o)}),Ko(a=>{throw e._loader$=void 0,a}));return e._loader$=new b3(r,()=>new we).pipe(CT()),e._loader$}loadModuleFactory(n){return Ka(n()).pipe(yn(e=>e instanceof Vw?It(e):Un(this.compiler.compileModuleAsync(e))))}}class s5{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,e){return n}}function l5(t){throw t}function c5(t,n,e){return n.parse("/")}function _D(t,n){return It(null)}const u5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},d5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hr=(()=>{class t{constructor(e,i,r,a,o,s,l){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=a,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new we,this.errorHandler=l5,this.malformedUriErrorHandler=c5,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:_D,afterPreactivation:_D},this.urlHandlingStrategy=new s5,this.routeReuseStrategy=new a5,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(go),this.console=o.get(vS);const d=o.get(Li);this.isNgZoneEnabled=d instanceof Li&&Li.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function F3(){return new ws(new ai([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bD(o,s,v=>this.triggerEvent(new MT(v)),v=>this.triggerEvent(new kT(v))),this.routerState=qT(this.currentUrlTree,this.rootComponentType),this.transitions=new sn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(qn(r=>0!==r.id),Nt(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),_o(r=>{let a=!1,o=!1;return It(r).pipe(ir(s=>{this.currentNavigation={id:s.id,initialUrl:s.currentRawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_o(s=>{const l=this.browserUrlTree.toString(),c=!this.navigated||s.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return af(s.source)&&(this.browserUrlTree=s.extractedUrl),It(s).pipe(_o(d=>{const v=this.transitions.getValue();return i.next(new Tm(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),v!==this.transitions.getValue()?ha:Promise.resolve(d)}),function EB(t,n,e,i){return _o(r=>function kB(t,n,e,i,r){return new AB(t,n,e,i,r).apply()}(t,n,e,r.extractedUrl,i).pipe(Nt(a=>Object.assign(Object.assign({},r),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ir(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function ZB(t,n,e,i,r){return yn(a=>function qB(t,n,e,i,r="emptyOnly",a="legacy"){try{const o=new XB(t,n,e,i,r,a).recognize();return null===o?dD(new WB):It(o)}catch(o){return dD(o)}}(t,n,a.urlAfterRedirects,e(a.urlAfterRedirects),i,r).pipe(Nt(o=>Object.assign(Object.assign({},a),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),ir(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const m=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(m,d)}this.browserUrlTree=d.urlAfterRedirects}const v=new T3(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(v)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:v,extractedUrl:m,source:b,restoredState:y,extras:C}=s,k=new Tm(v,this.serializeUrl(m),b,y);i.next(k);const w=qT(m,this.rootComponentType).snapshot;return It(Object.assign(Object.assign({},s),{targetSnapshot:w,urlAfterRedirects:m,extras:Object.assign(Object.assign({},C),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=s.rawUrl,s.resolve(null),ha}),Lm(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:v,replaceUrl:m}}=s;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!v,replaceUrl:!!m})}),ir(s=>{const l=new D3(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot);this.triggerEvent(l)}),Nt(s=>Object.assign(Object.assign({},s),{guards:IB(s.targetSnapshot,s.currentSnapshot,this.rootContexts)})),function BB(t,n){return yn(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:o}}=e;return 0===o.length&&0===a.length?It(Object.assign(Object.assign({},e),{guardsResult:!0})):function LB(t,n,e,i){return Un(t).pipe(yn(r=>function $B(t,n,e,i,r){const a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return a&&0!==a.length?It(a.map(s=>{const l=rf(s,n,r);let c;if(function bB(t){return t&&Zo(t.canDeactivate)}(l))c=Ka(l.canDeactivate(t,n,e,i));else{if(!Zo(l))throw new Error("Invalid CanDeactivate guard");c=Ka(l(t,n,e,i))}return c.pipe(Vl())})).pipe(mu()):It(!0)}(r.component,r.route,e,n,i)),Vl(r=>!0!==r,!0))}(o,i,r,t).pipe(yn(s=>s&&function pB(t){return"boolean"==typeof t}(s)?function UB(t,n,e,i){return Un(n).pipe(uu(r=>cu(function GB(t,n){return null!==t&&n&&n(new k3(t)),It(!0)}(r.route.parent,i),function HB(t,n){return null!==t&&n&&n(new P3(t)),It(!0)}(r.route,i),function jB(t,n,e){const i=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(o=>function VB(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(o)).filter(o=>null!==o).map(o=>ST(()=>It(o.guards.map(l=>{const c=rf(l,o.node,e);let u;if(function mB(t){return t&&Zo(t.canActivateChild)}(c))u=Ka(c.canActivateChild(i,t));else{if(!Zo(c))throw new Error("Invalid CanActivateChild guard");u=Ka(c(i,t))}return u.pipe(Vl())})).pipe(mu())));return It(a).pipe(mu())}(t,r.path,e),function zB(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return It(!0);const r=i.map(a=>ST(()=>{const o=rf(a,n,e);let s;if(function vB(t){return t&&Zo(t.canActivate)}(o))s=Ka(o.canActivate(n,t));else{if(!Zo(o))throw new Error("Invalid CanActivate guard");s=Ka(o(n,t))}return s.pipe(Vl())}));return It(r).pipe(mu())}(t,r.route,e))),Vl(r=>!0!==r,!0))}(i,a,t,n):It(s)),Nt(s=>Object.assign(Object.assign({},e),{guardsResult:s})))})}(this.ngModule.injector,s=>this.triggerEvent(s)),ir(s=>{if(Cs(s.guardsResult)){const c=Dm(`Redirecting to "${this.serializeUrl(s.guardsResult)}"`);throw c.url=s.guardsResult,c}const l=new R3(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.triggerEvent(l)}),qn(s=>!!s.guardsResult||(this.restoreHistory(s),this.cancelNavigationTransition(s,""),!1)),Lm(s=>{if(s.guards.canActivateChecks.length)return It(s).pipe(ir(l=>{const c=new x3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),_o(l=>{let c=!1;return It(l).pipe(function JB(t,n){return yn(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return It(e);let a=0;return Un(r).pipe(uu(o=>function e5(t,n,e,i){return function t5(t,n,e,i){const r=mD(t);if(0===r.length)return It({});const a={};return Un(r).pipe(yn(o=>function i5(t,n,e,i){const r=rf(t,n,i);return Ka(r.resolve?r.resolve(n,e):r(n,e))}(t[o],n,e,i).pipe(ir(s=>{a[o]=s}))),Cm(1),yn(()=>mD(a).length===r.length?It(a):ha))}(t._resolve,t,n,i).pipe(Nt(a=>(t._resolvedData=a,t.data=Object.assign(Object.assign({},t.data),XT(t,e).resolve),null)))}(o.route,i,t,n)),ir(()=>a++),Cm(1),yn(o=>a===r.length?It(e):ha))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ir({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),ir(l=>{const c=new M3(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),Lm(s=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:v,replaceUrl:m}}=s;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!v,replaceUrl:!!m})}),Nt(s=>{const l=function tB(t,n,e){const i=pu(t,n._root,e?e._root:void 0);return new WT(i,n)}(this.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return Object.assign(Object.assign({},s),{targetRouterState:l})}),ir(s=>{this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects)}),((t,n,e)=>Nt(i=>(new hB(n,i.targetRouterState,i.currentRouterState,e).activate(t),i)))(this.rootContexts,this.routeReuseStrategy,s=>this.triggerEvent(s)),ir({next(){a=!0},complete(){a=!0}}),function S3(t){return xt((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}(()=>{var s;a||o||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(s=this.currentNavigation)||void 0===s?void 0:s.id)===r.id&&(this.currentNavigation=null)}),Ko(s=>{if(o=!0,function V3(t){return t&&t[PT]}(s)){const l=Cs(s.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new xT(r.id,this.serializeUrl(r.extractedUrl),s.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(s.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||af(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new C3(r.id,this.serializeUrl(r.extractedUrl),s);i.next(l);try{r.resolve(this.errorHandler(s))}catch(c){r.reject(c)}}return ha}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const a={replaceUrl:!0},o=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(o){const l=Object.assign({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}const s=this.parseUrl(e.url);this.scheduleNavigation(s,i,o,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){nD(e),this.config=e.map(Fm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:a,fragment:o,queryParamsHandling:s,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(s){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=a||null}return null!==d&&(d=this.removeEmptyProps(d)),function rB(t,n,e,i,r){if(0===e.length)return Em(n.root,n.root,n,i,r);const a=function aB(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ZT(!0,0,t);let n=0,e=!1;const i=t.reduce((r,a,o)=>{if("object"==typeof a&&null!=a){if(a.outlets){const s={};return Xn(a.outlets,(l,c)=>{s[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:s}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===o?(a.split("/").forEach((s,l)=>{0==l&&"."===s||(0==l&&""===s?e=!0:".."===s?n++:""!=s&&r.push(s))}),r):[...r,a]},[]);return new ZT(e,n,i)}(e);if(a.toRoot())return Em(n.root,new ai([],{}),n,i,r);const o=function oB(t,n,e){if(t.isAbsolute)return new Im(n.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new Im(a,a===n.root,0)}const i=Qh(t.commands[0])?0:1;return function sB(t,n,e){let i=t,r=n,a=e;for(;a>r;){if(a-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new Im(i,!1,r-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,n,t),s=o.processChildren?Kh(o.segmentGroup,o.index,a.commands):JT(o.segmentGroup,o.index,a.commands);return Em(o.segmentGroup,s,n,i,r)}(c,this.currentUrlTree,e,d,null!=u?u:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Cs(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function h5(t){for(let n=0;n<t.length;n++){const e=t[n];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${n}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},u5):!1===i?Object.assign({},d5):i,Cs(e))return NT(this.currentUrlTree,e,r);const a=this.parseUrl(e);return NT(this.currentUrlTree,a,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const a=e[r];return null!=a&&(i[r]=a),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new du(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,a,o){var s,l,c;if(this.disposed)return Promise.resolve(!1);const u=this.transitions.value,d=af(i)&&u&&!af(u.source),v=u.rawUrl.toString()===e.toString(),m=u.id===(null===(s=this.currentNavigation)||void 0===s?void 0:s.id);if(d&&v&&m)return Promise.resolve(!0);let y,C,k;o?(y=o.resolve,C=o.reject,k=o.promise):k=new Promise((z,q)=>{y=z,C=q});const w=++this.navigationId;let R;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),R=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):R=0,this.setTransition({id:w,targetPageId:R,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:y,reject:C,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(z=>Promise.reject(z))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(e,i=!1){var r,a;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===o?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new xT(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return t.\u0275fac=function(e){Bg()},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function af(t){return"imperative"!==t}class yD{}class wD{preload(n,e){return It(null)}}let SD=(()=>{class t{constructor(e,i,r,a){this.router=e,this.injector=r,this.preloadingStrategy=a,this.loader=new bD(r,i,l=>e.triggerEvent(new MT(l)),l=>e.triggerEvent(new kT(l)))}setUpPreloading(){this.subscription=this.router.events.pipe(qn(e=>e instanceof du),uu(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(go);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const a of i)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children));return Un(r).pipe(lc(),Nt(a=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?It(i._loadedConfig):this.loader.load(e.injector,i)).pipe(yn(a=>(i._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Ue(Hr),Ue(ch),Ue(Sn),Ue(yD))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),zm=(()=>{class t{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Tm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof du&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof AT&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new AT(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){Bg()},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const Ts=new Yt("ROUTER_CONFIGURATION"),CD=new Yt("ROUTER_FORROOT_GUARD"),v5=[Iv,{provide:UT,useClass:HT},{provide:Hr,useFactory:function w5(t,n,e,i,r,a,o={},s,l){const c=new Hr(null,t,n,e,i,r,IT(a));return s&&(c.urlHandlingStrategy=s),l&&(c.routeReuseStrategy=l),function S5(t,n){t.errorHandler&&(n.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(n.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(n.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(n.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(n.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(n.canceledNavigationResolution=t.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,v;null===(d=console.group)||void 0===d||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null===(v=console.groupEnd)||void 0===v||v.call(console)}),c},deps:[UT,bu,Iv,Sn,ch,Um,Ts,[class o5{},new Ha],[class n5{},new Ha]]},bu,{provide:Fl,useFactory:function C5(t){return t.routerState.root},deps:[Hr]},SD,wD,class g5{preload(n,e){return e().pipe(Ko(()=>It(null)))}},{provide:Ts,useValue:{enableTracing:!1}}];function m5(){return new SS("Router",Hr)}let TD=(()=>{class t{constructor(e,i){}static forRoot(e,i){return{ngModule:t,providers:[v5,DD(e),{provide:CD,useFactory:y5,deps:[[Hr,new Ha,new el]]},{provide:Ts,useValue:i||{}},{provide:Al,useFactory:_5,deps:[vs,[new Dc(Ev),new Ha],Ts]},{provide:zm,useFactory:b5,deps:[Hr,MN,Ts]},{provide:yD,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:wD},{provide:SS,multi:!0,useFactory:m5},[jm,{provide:sh,multi:!0,useFactory:T5,deps:[jm]},{provide:RD,useFactory:D5,deps:[jm]},{provide:gS,multi:!0,useExisting:RD}]]}}static forChild(e){return{ngModule:t,providers:[DD(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Ue(CD,8),Ue(Hr,8))},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({}),t})();function b5(t,n,e){return e.scrollOffset&&n.setOffset(e.scrollOffset),new zm(t,n,e)}function _5(t,n,e={}){return e.useHash?new hO(t,n):new GS(t,n)}function y5(t){return"guarded"}function DD(t){return[{provide:nM,multi:!0,useValue:t},{provide:Um,multi:!0,useValue:t}]}let jm=(()=>{class t{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new we}appInitializer(){return this.injector.get(cO,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(s=>i=s),a=this.injector.get(Hr),o=this.injector.get(Ts);return"disabled"===o.initialNavigation?(a.setUpLocationChangeListener(),i(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?It(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),a.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(Ts),r=this.injector.get(SD),a=this.injector.get(zm),o=this.injector.get(Hr),s=this.injector.get(ps);e===s.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&o.initialNavigation(),r.setUpPreloading(),a.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(Ue(Sn))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function T5(t){return t.appInitializer.bind(t)}function D5(t){return t.bootstrapListener.bind(t)}const RD=new Yt("Router Initializer"),x5=[];let M5=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[TD.forRoot(x5)],TD]}),t})();function xD(t,n,e,i,r,a,o){try{var s=t[a](o),l=s.value}catch(c){return void e(c)}s.done?n(l):Promise.resolve(l).then(i,r)}function xr(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var a=t.apply(n,e);function o(l){xD(a,i,r,o,s,"next",l)}function s(l){xD(a,i,r,o,s,"throw",l)}o(void 0)})}}var Qt=(()=>{return(t=Qt||(Qt={}))[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",Qt;var t})();const pr=new class k5{constructor(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}addTypeMetadata(n){this._typeMetadatas.has(n.target)||this._typeMetadatas.set(n.target,new Map),this._typeMetadatas.get(n.target).set(n.propertyName,n)}addTransformMetadata(n){this._transformMetadatas.has(n.target)||this._transformMetadatas.set(n.target,new Map),this._transformMetadatas.get(n.target).has(n.propertyName)||this._transformMetadatas.get(n.target).set(n.propertyName,[]),this._transformMetadatas.get(n.target).get(n.propertyName).push(n)}addExposeMetadata(n){this._exposeMetadatas.has(n.target)||this._exposeMetadatas.set(n.target,new Map),this._exposeMetadatas.get(n.target).set(n.propertyName,n)}addExcludeMetadata(n){this._excludeMetadatas.has(n.target)||this._excludeMetadatas.set(n.target,new Map),this._excludeMetadatas.get(n.target).set(n.propertyName,n)}findTransformMetadatas(n,e,i){return this.findMetadatas(this._transformMetadatas,n,e).filter(r=>!r.options||!0===r.options.toClassOnly&&!0===r.options.toPlainOnly||(!0===r.options.toClassOnly?i===Qt.CLASS_TO_CLASS||i===Qt.PLAIN_TO_CLASS:!0!==r.options.toPlainOnly||i===Qt.CLASS_TO_PLAIN))}findExcludeMetadata(n,e){return this.findMetadata(this._excludeMetadatas,n,e)}findExposeMetadata(n,e){return this.findMetadata(this._exposeMetadatas,n,e)}findExposeMetadataByCustomName(n,e){return this.getExposedMetadatas(n).find(i=>i.options&&i.options.name===e)}findTypeMetadata(n,e){return this.findMetadata(this._typeMetadatas,n,e)}getStrategy(n){const e=this._excludeMetadatas.get(n),i=e&&e.get(void 0),r=this._exposeMetadatas.get(n),a=r&&r.get(void 0);return i&&a||!i&&!a?"none":i?"excludeAll":"exposeAll"}getExposedMetadatas(n){return this.getMetadata(this._exposeMetadatas,n)}getExcludedMetadatas(n){return this.getMetadata(this._excludeMetadatas,n)}getExposedProperties(n,e){return this.getExposedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===Qt.CLASS_TO_CLASS||e===Qt.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===Qt.CLASS_TO_PLAIN)).map(i=>i.propertyName)}getExcludedProperties(n,e){return this.getExcludedMetadatas(n).filter(i=>!i.options||!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?e===Qt.CLASS_TO_CLASS||e===Qt.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||e===Qt.CLASS_TO_PLAIN)).map(i=>i.propertyName)}clear(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}getMetadata(n,e){const i=n.get(e);let r;i&&(r=Array.from(i.values()).filter(o=>void 0!==o.propertyName));const a=[];for(const o of this.getAncestors(e)){const s=n.get(o);if(s){const l=Array.from(s.values()).filter(c=>void 0!==c.propertyName);a.push(...l)}}return a.concat(r||[])}findMetadata(n,e,i){const r=n.get(e);if(r){const a=r.get(i);if(a)return a}for(const a of this.getAncestors(e)){const o=n.get(a);if(o){const s=o.get(i);if(s)return s}}}findMetadatas(n,e,i){const r=n.get(e);let a;r&&(a=r.get(i));const o=[];for(const s of this.getAncestors(e)){const l=n.get(s);l&&l.has(i)&&o.push(...l.get(i))}return o.slice().reverse().concat((a||[]).slice().reverse())}getAncestors(n){if(!n)return[];if(!this._ancestorsMap.has(n)){const e=[];for(let i=Object.getPrototypeOf(n.prototype.constructor);void 0!==i.prototype;i=Object.getPrototypeOf(i.prototype.constructor))e.push(i);this._ancestorsMap.set(n,e)}return this._ancestorsMap.get(n)}};function rt(t,n={}){return function(e,i){const r=Reflect.getMetadata("design:type",e,i);pr.addTypeMetadata({target:e.constructor,propertyName:i,reflectedType:r,typeFunction:t,options:n})}}var L=(()=>{return(t=L||(L={}))[t.Horse=0]="Horse",t[t.Cheetah=1]="Cheetah",t[t.Hare=2]="Hare",t[t.Monkey=3]="Monkey",t[t.Goat=4]="Goat",t[t.Gecko=5]="Gecko",t[t.Dolphin=6]="Dolphin",t[t.Shark=7]="Shark",t[t.Octopus=8]="Octopus",t[t.Penguin=9]="Penguin",t[t.Caribou=10]="Caribou",t[t.Salamander=11]="Salamander",t[t.Fox=12]="Fox",t[t.Warthog=13]="Warthog",t[t.Whale=14]="Whale",L;var t})(),W=(()=>{return(t=W||(W={}))[t.Flatland=0]="Flatland",t[t.Mountain=1]="Mountain",t[t.Ocean=2]="Ocean",t[t.Tundra=3]="Tundra",t[t.Volcanic=4]="Volcanic",W;var t})();class ie{constructor(n,e,i){this.name=n,this.amount=e,void 0!==i&&(this.itemType=i)}makeCopy(n){var e=new ie("",0);return e.name=JSON.parse(JSON.stringify(n.name)),e.amount=JSON.parse(JSON.stringify(n.amount)),e.itemType=JSON.parse(JSON.stringify(n.itemType)),e}}var G=(()=>{return(t=G||(G={}))[t.Animal=0]="Animal",t[t.Food=1]="Food",t[t.Training=2]="Training",t[t.Ability=3]="Ability",t[t.Specialty=4]="Specialty",t[t.Equipment=5]="Equipment",t[t.Resources=6]="Resources",t[t.Progression=7]="Progression",t[t.Other=8]="Other",t[t.Consumable=9]="Consumable",G;var t})();class Za{constructor(){this.totalRewards=0,this.rewardsObtained=0,this.rewards=[]}}ze([rt(()=>ie),Je("design:type",Array)],Za.prototype,"rewards",void 0);class Ll{constructor(){this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.noviceTrack=new Za,this.noviceTrack.totalRewards=12;var n=50;this.noviceTrack.rewards.push(new ie("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",1,G.Other)),this.noviceTrack.rewards.push(new ie("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Free Races",1,G.Other)),this.noviceTrack.rewards.push(new ie("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",1,G.Other)),this.noviceTrack.rewards.push(new ie("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Free Races",1,G.Other)),this.noviceTrack.rewards.push(new ie("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",1,G.Other)),this.noviceTrack.rewards.push(new ie("Coins",n,G.Resources)),this.noviceTrack.rewards.push(new ie("Bonus Breed XP Gain From Free Races",1,G.Other)),this.intermediateTrack=new Za,this.intermediateTrack.totalRewards=12,this.intermediateTrack.rewards.push(new ie("Coins",200,G.Resources)),this.intermediateTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",2,G.Other)),this.intermediateTrack.rewards.push(new ie("Medals",1,G.Resources)),this.intermediateTrack.rewards.push(new ie("Diminishing Returns per Facility Level",2,G.Other)),this.intermediateTrack.rewards.push(new ie("Training Time Reduction",1,G.Other)),this.intermediateTrack.rewards.push(new ie("Bonus Breed XP Gain From Circuit Races",5,G.Other)),this.intermediateTrack.rewards.push(new ie("Coins",200,G.Resources)),this.intermediateTrack.rewards.push(new ie("Bonus Breed XP Gain From Free Races",1,G.Other)),this.intermediateTrack.rewards.push(new ie("Medals",1,G.Resources)),this.intermediateTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",2,G.Other)),this.intermediateTrack.rewards.push(new ie("Training Time Reduction",1,G.Other)),this.intermediateTrack.rewards.push(new ie("Diminishing Returns per Facility Level",3,G.Other)),this.masterTrack=new Za,this.masterTrack.totalRewards=12,this.masterTrack.rewards.push(new ie("Bonus Breed XP Gain From Free Races",5,G.Other)),this.masterTrack.rewards.push(new ie("Diminishing Returns per Facility Level",2,G.Other)),this.masterTrack.rewards.push(new ie("Training Time Reduction",1,G.Other)),this.masterTrack.rewards.push(new ie("Coins",1e3,G.Resources)),this.masterTrack.rewards.push(new ie("Bonus Breed XP Gain From Training",3,G.Other)),this.masterTrack.rewards.push(new ie("Bonus Talents",2,G.Other)),this.masterTrack.rewards.push(new ie("Training Time Reduction",1,G.Other)),this.masterTrack.rewards.push(new ie("Coins",1e3,G.Resources)),this.masterTrack.rewards.push(new ie("Orb Pendant",1,G.Other)),this.masterTrack.rewards.push(new ie("Diminishing Returns per Facility Level",3,G.Other)),this.masterTrack.rewards.push(new ie("Training Time Reduction",1,G.Other)),this.masterTrack.rewards.push(new ie("Bonus Talents",3,G.Other))}getTotalRewardCount(){return this.noviceTrack.totalRewards+this.intermediateTrack.totalRewards+this.masterTrack.totalRewards}getTotalRewardsObtained(){return this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalRewardsRemaining(){return this.getTotalRewardCount()-this.noviceTrack.rewardsObtained-this.intermediateTrack.rewardsObtained-this.masterTrack.rewardsObtained}getTotalTrainingTrackBonusBreedXpFromFreeRaces(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=4&&(n+=this.noviceTrack.rewards[3].amount),this.noviceTrack.rewardsObtained>=8&&(n+=this.noviceTrack.rewards[7].amount),this.noviceTrack.rewardsObtained>=12&&(n+=this.noviceTrack.rewards[11].amount),this.intermediateTrack.rewardsObtained>=8&&(n+=this.intermediateTrack.rewards[7].amount),this.masterTrack.rewardsObtained>=1&&(n+=this.masterTrack.rewards[0].amount),n)}getTotalTrainingTrackBonusBreedXpFromCircuitRaces(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=6&&(n+=this.intermediateTrack.rewards[5].amount),n)}getTotalTrainingTrackBonusBreedXpFromTraining(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.noviceTrack.rewardsObtained>=2&&(n+=this.noviceTrack.rewards[1].amount),this.noviceTrack.rewardsObtained>=6&&(n+=this.noviceTrack.rewards[5].amount),this.noviceTrack.rewardsObtained>=10&&(n+=this.noviceTrack.rewards[9].amount),this.intermediateTrack.rewardsObtained>=2&&(n+=this.intermediateTrack.rewards[1].amount),this.intermediateTrack.rewardsObtained>=10&&(n+=this.intermediateTrack.rewards[9].amount),this.masterTrack.rewardsObtained>=5&&(n+=this.masterTrack.rewards[4].amount),n)}getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=4&&(n+=this.intermediateTrack.rewards[3].amount),this.intermediateTrack.rewardsObtained>=12&&(n+=this.intermediateTrack.rewards[11].amount),this.masterTrack.rewardsObtained>=2&&(n+=this.masterTrack.rewards[1].amount),this.masterTrack.rewardsObtained>=10&&(n+=this.masterTrack.rewards[9].amount),n)}getTotalTrainingTrackBonusTrainingTimeReduction(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.intermediateTrack.rewardsObtained>=5&&(n+=this.intermediateTrack.rewards[4].amount),this.intermediateTrack.rewardsObtained>=11&&(n+=this.intermediateTrack.rewards[10].amount),this.masterTrack.rewardsObtained>=3&&(n+=this.masterTrack.rewards[2].amount),this.masterTrack.rewardsObtained>=7&&(n+=this.masterTrack.rewards[6].amount),this.masterTrack.rewardsObtained>=11&&(n+=this.masterTrack.rewards[10].amount),n)}getTotalTrainingTrackBonusTalents(){var n=0;return 0===this.noviceTrack.rewards.length||0===this.intermediateTrack.rewards.length||0===this.masterTrack.rewards.length?0:(this.masterTrack.rewardsObtained>=6&&(n+=this.masterTrack.rewards[5].amount),this.masterTrack.rewardsObtained>=12&&(n+=this.masterTrack.rewards[11].amount),n)}}ze([rt(()=>Za),Je("design:type",Za)],Ll.prototype,"noviceTrack",void 0),ze([rt(()=>Za),Je("design:type",Za)],Ll.prototype,"intermediateTrack",void 0),ze([rt(()=>Za),Je("design:type",Za)],Ll.prototype,"masterTrack",void 0);class Ve{constructor(n,e,i,r,a,o){this.defaultStaminaModifier=5,this.defaultMaxSpeedModifier=.3,this.defaultAccelerationModifier=.1,this.defaultPowerModifier=1,this.defaultFocusModifier=5,this.defaultAdaptabilityModifier=5,this.defaultBurstDistanceModifier=1,this.diminishingReturnsDefaultStatThreshold=20,void 0!==n&&(this.topSpeed=n),void 0!==e&&(this.acceleration=e),void 0!==i&&(this.endurance=i),void 0!==r&&(this.power=r),void 0!==a&&(this.focus=a),void 0!==o&&(this.adaptability=o)}makeCopy(n){var e=new Ve;return e.topSpeed=n.topSpeed,e.acceleration=n.acceleration,e.endurance=n.endurance,e.power=n.power,e.focus=n.focus,e.adaptability=n.adaptability,e.stamina=n.stamina,e.maxSpeedMs=n.maxSpeedMs,e.accelerationMs=n.accelerationMs,e.powerMs=n.powerMs,e.focusMs=n.focusMs,e.adaptabilityMs=n.adaptabilityMs,e.burstChance=n.burstChance,e.burstDistance=n.burstDistance,e}calculateStamina(n,e,i){return null==n&&(n=this.defaultStaminaModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.endurance<=e?this.endurance*n*i:(e*n+(this.endurance-e)*(n*this.calculateDiminishingReturns(this.endurance-e)))*i}calculateMaxSpeed(n,e,i){return null==n&&(n=this.defaultMaxSpeedModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.topSpeed<=e?this.topSpeed*n*i:(e*n+(this.topSpeed-e)*(n*this.calculateDiminishingReturns(this.topSpeed-e)))*i}calculateTrueAcceleration(n,e,i){return null==n&&(n=this.defaultAccelerationModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.acceleration<=e?this.acceleration*n*i:(e*n+(this.acceleration-e)*(n*this.calculateDiminishingReturns(this.acceleration-e)))*i}calculateTruePower(n,e,i){return null==n&&(n=this.defaultPowerModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.power<=e?this.power*n*i:(e*n+(this.power-e)*(n*this.calculateDiminishingReturns(this.power-e)))*i}calculateTrueFocus(n,e,i){return null==n&&(n=this.defaultFocusModifier),null==i&&(i=1),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),this.focus<=e?this.focus*n*i:(e*n+(this.focus-e)*(n*this.calculateDiminishingReturns(this.focus-e)))*i}calculateTrueAdaptability(n,e,i){return null==n&&(n=this.defaultAdaptabilityModifier),null==e&&(e=this.diminishingReturnsDefaultStatThreshold),null==i&&(i=1),this.adaptability<=e?this.adaptability*n*i:(e*n+(this.adaptability-e)*(n*this.calculateDiminishingReturns(this.adaptability-e)))*i}calculateBurstChance(n,e,i){var r=this.focus,a=this.adaptability;return null!=e&&(r*=e/this.focusMs),null!=i&&(a*=i/this.adaptabilityMs),(a+r)*(1+n/4)/1e3*100}calculateBurstDistance(n,e,i){null==e&&(e=this.defaultBurstDistanceModifier);var r=this.power;return null!=i&&(r*=i/this.powerMs),r*(1+n/4)*e}topSpeedPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}accelerationPopover(n){return"Every stat point increases acceleration by "+n.toFixed(3)+"m/s up to diminishing returns."}endurancePopover(n){return"Every stat point increases stamina by "+n.toFixed(3)+" up to diminishing returns."}powerPopover(n){return"Every stat point increases ability efficiency by "+n.toFixed(3)+"% up to diminishing returns."}focusPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}adaptabilityPopover(n){return"Every stat point increases top speed by "+n.toFixed(3)+"m/s up to diminishing returns."}maxSpeedMsPopover(){return"This is the max speed this animal can go during a race."}accelerationMsPopover(){return"This is how quickly this animal will gain speed."}staminaPopover(){return"Your animal loses stamina while racing. If its stamina reaches 0, it will slow down for a period of time while its stamina recharges."}powerMsPopover(){return"This increases the efficiency of your animal's ability."}focusMsPopover(){return"This is the average distance your animal can go without losing focus, causing them to stop."}adaptabilityMsPopover(){return"This is the average distance your animal can go without stumbling, causing them to slow down."}burstChancePopover(){return"Every time you enter a path, you have the chance to enter burst mode. This is your chance per 1000 meters that you will burst. Increase by improving Focus and Adaptability."}burstDistancePopover(){return"This is how far you can go while bursting. Increase by improving Power."}calculateDiminishingReturns(n){return 1/n**.6}addCurrentRacingStats(n){this.maxSpeedMs+=n.topSpeed,this.accelerationMs+=n.acceleration,this.stamina+=n.endurance,this.powerMs+=n.power,this.focusMs+=n.focus,this.adaptabilityMs+=n.adaptability}subtractCurrentRacingStats(n){this.maxSpeedMs-=n.topSpeed,this.accelerationMs-=n.acceleration,this.stamina-=n.endurance,this.powerMs-=n.power,this.focusMs-=n.focus,this.adaptabilityMs-=n.adaptability}multiplyCurrentRacingStats(n){this.maxSpeedMs*=n.topSpeed,this.accelerationMs*=n.acceleration,this.stamina*=n.endurance,this.powerMs*=n.power,this.focusMs*=n.focus,this.adaptabilityMs*=n.adaptability}divideCurrentRacingStats(n){this.maxSpeedMs/=n.topSpeed,this.accelerationMs/=n.acceleration,this.stamina/=n.endurance,this.powerMs/=n.power,this.focusMs/=n.focus,this.adaptabilityMs/=n.adaptability}}var vt=(()=>{return(t=vt||(vt={}))[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large",vt;var t})();class Jo{constructor(){this.trainingTimeRemaining=7200,this.timeTrained=0,this.isAvailable=!1,this.purchasePrice=50}makeCopy(n){var e=new Jo;return e.affectedStatRatios=JSON.parse(JSON.stringify(n.affectedStatRatios)),e.facilitySize=JSON.parse(JSON.stringify(n.facilitySize)),e.isAvailable=JSON.parse(JSON.stringify(n.isAvailable)),e.purchasePrice=JSON.parse(JSON.stringify(n.purchasePrice)),e.statGain=JSON.parse(JSON.stringify(n.statGain)),e.timeToComplete=JSON.parse(JSON.stringify(n.timeToComplete)),e.timeTrained=JSON.parse(JSON.stringify(n.timeTrained)),e.trainingCourseType=JSON.parse(JSON.stringify(n.trainingCourseType)),e.trainingName=JSON.parse(JSON.stringify(n.trainingName)),e.trainingType=JSON.parse(JSON.stringify(n.trainingType)),e}getFacilitySize(){return vt[this.facilitySize]}getStatGainDescription(){var n="";return this.affectedStatRatios.topSpeed>0&&(n+="+"+this.statGain*this.affectedStatRatios.topSpeed+" Speed\n"),this.affectedStatRatios.acceleration>0&&(n+="+"+this.statGain*this.affectedStatRatios.acceleration+" Acceleration\n"),this.affectedStatRatios.endurance>0&&(n+="+"+this.statGain*this.affectedStatRatios.endurance+" Endurance\n"),this.affectedStatRatios.focus>0&&(n+="+"+this.statGain*this.affectedStatRatios.focus+" Focus\n"),this.affectedStatRatios.power>0&&(n+="+"+this.statGain*this.affectedStatRatios.power+" Power\n"),this.affectedStatRatios.adaptability>0&&(n+="+"+this.statGain*this.affectedStatRatios.adaptability+" Adaptability\n"),n}}ze([rt(()=>Ve),Je("design:type",Ve)],Jo.prototype,"affectedStatRatios",void 0);class kt{constructor(){this.abilityLevel=1,this.abilityXp=0,this.abilityMaxXp=50}}var Se=(()=>{return(t=Se||(Se={}))[t.topSpeed=0]="topSpeed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",Se;var t})();class vi{constructor(n,e,i,r,a){void 0!==n&&(this.traitName=n),void 0!==e&&(this.requiredLevel=e),void 0!==i&&(this.researchLevel=i),void 0!==r&&(this.positiveStatGain=r),void 0!==a&&(this.negativeStatGain=a)}getStatGainDescription(n){var e="",i="";return this.positiveStatGain===Se.acceleration&&(e="Acceleration"),this.positiveStatGain===Se.adaptability&&(e="Adaptability"),this.positiveStatGain===Se.endurance&&(e="Endurance"),this.positiveStatGain===Se.focus&&(e="Focus"),this.positiveStatGain===Se.power&&(e="Power"),this.positiveStatGain===Se.topSpeed&&(e="Speed"),this.negativeStatGain===Se.acceleration&&(i="Acceleration"),this.negativeStatGain===Se.adaptability&&(i="Adaptability"),this.negativeStatGain===Se.endurance&&(i="Endurance"),this.negativeStatGain===Se.focus&&(i="Focus"),this.negativeStatGain===Se.power&&(i="Power"),this.negativeStatGain===Se.topSpeed&&(i="Speed"),"+"+this.researchLevel+"% "+e+", -"+(this.researchLevel>n?n:this.researchLevel)+"% "+i}}class sf{constructor(){this.maxSpeedModifier=1,this.accelerationModifier=1,this.staminaModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1}}class $m{constructor(){this.bonusBreedXpGainFromLocalRaces=0,this.bonusBreedXpGainFromCircuitRaces=0,this.bonusBreedXpGainFromTraining=0,this.trainingTimeReduction=0,this.diminishingReturnsBonus=0,this.bonusTalents=0,this.bonusTrainingBreedXpCertificateCount=0,this.bonusCircuitBreedXpCertificateCount=0,this.bonusLocalBreedXpCertificateCount=0,this.bonusDiminishingReturnsCertificateCount=0,this.certificateUseCap=30}}class So{constructor(){this.remainingBurstMeters=0,this.metersSinceLostFocus=0,this.recoveringStamina=!1,this.defaultRecoveringStaminaLength=150,this.currentRecoveringStaminaLength=this.defaultRecoveringStaminaLength,this.ranOutOfStamina=!1,this.lostFocus=!1,this.defaultLostFocusLength=60,this.currentLostFocusLength=this.defaultLostFocusLength,this.hasLostFocusDuringRace=!1,this.stumbled=!1,this.defaultStumbledLength=10,this.currentStumbledLength=this.defaultStumbledLength,this.relayEffects=[],this.burstCount=0,this.icyCurrentYAmount=0,this.icyCurrentDirectionUp=!0,this.headbandStumblePreventionCount=0,this.scaryMaskEffectOccurred=!1,this.firstAbilityUseEffectApplied=!1,this.velocityExceedsMaxSpeedDuringBurst=!1,this.velocityReachesMaxSpeedCount=0}makeCopy(){var n=new So;return n.remainingBurstMeters=this.remainingBurstMeters,n.metersSinceLostFocus=this.metersSinceLostFocus,n.recoveringStamina=this.recoveringStamina,n.defaultRecoveringStaminaLength=this.defaultRecoveringStaminaLength,n.currentRecoveringStaminaLength=this.currentRecoveringStaminaLength,n.ranOutOfStamina=this.ranOutOfStamina,n.lostFocus=this.lostFocus,n.defaultLostFocusLength=this.defaultLostFocusLength,n.currentLostFocusLength=this.currentLostFocusLength,n.hasLostFocusDuringRace=this.hasLostFocusDuringRace,n.stumbled=this.stumbled,n.defaultStumbledLength=this.defaultStumbledLength,n.currentStumbledLength=this.currentStumbledLength,n.burstCount=this.burstCount,n.icyCurrentYAmount=this.icyCurrentYAmount,n.icyCurrentDirectionUp=this.icyCurrentDirectionUp,n.headbandStumblePreventionCount=this.headbandStumblePreventionCount,n.scaryMaskEffectOccurred=this.scaryMaskEffectOccurred,n.firstAbilityUseEffectApplied=this.firstAbilityUseEffectApplied,n.velocityExceedsMaxSpeedDuringBurst=this.velocityExceedsMaxSpeedDuringBurst,n.velocityReachesMaxSpeedCount=this.velocityReachesMaxSpeedCount,this.relayEffects=[],n}}var yt=(()=>{return(t=yt||(yt={}))[t.none=0]="none",t[t.sprint=1]="sprint",t[t.support=2]="support",t[t.longDistance=3]="longDistance",yt;var t})();class Su{constructor(){this.talentTreeType=yt.none,this.row2RequiredPoints=5,this.row3RequiredPoints=10,this.row4RequiredPoints=15,this.column1Row1Points=0,this.column1Row2Points=0,this.column1Row3Points=0,this.column1Row4Points=0,this.column2Row1Points=0,this.column2Row2Points=0,this.column2Row3Points=0,this.column2Row4Points=0,this.column3Row1Points=0,this.column3Row2Points=0,this.column3Row3Points=0,this.column3Row4Points=0}makeCopy(n){var e=new Su;return e.talentTreeType=n.talentTreeType,e.column1Row1Points=n.column1Row1Points,e.column1Row2Points=n.column1Row2Points,e.column1Row3Points=n.column1Row3Points,e.column1Row4Points=n.column1Row4Points,e.column2Row1Points=n.column2Row1Points,e.column2Row2Points=n.column2Row2Points,e.column2Row3Points=n.column2Row3Points,e.column2Row4Points=n.column2Row4Points,e.column3Row1Points=n.column3Row1Points,e.column3Row2Points=n.column3Row2Points,e.column3Row3Points=n.column3Row3Points,e.column3Row4Points=n.column3Row4Points,e}getTalentPointsByColumn(n){return 0===n?this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points:1===n?this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points:2===n?this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points:0}getTalentPointsByRowColumn(n,e){return 0===n&&0===e?this.column1Row1Points:1===n&&0===e?this.column1Row2Points:2===n&&0===e?this.column1Row3Points:3===n&&0===e?this.column1Row4Points:0===n&&1===e?this.column2Row1Points:1===n&&1===e?this.column2Row2Points:2===n&&1===e?this.column2Row3Points:3===n&&1===e?this.column2Row4Points:0===n&&2===e?this.column3Row1Points:1===n&&2===e?this.column3Row2Points:2===n&&2===e?this.column3Row3Points:3===n&&2===e?this.column3Row4Points:0}getTotalSpentPoints(){return this.column1Row1Points+this.column1Row2Points+this.column1Row3Points+this.column1Row4Points+this.column2Row1Points+this.column2Row2Points+this.column2Row3Points+this.column2Row4Points+this.column3Row1Points+this.column3Row2Points+this.column3Row3Points+this.column3Row4Points}spendTalentPoint(n,e){0===n&&0===e&&(this.column1Row1Points+=1),1===n&&0===e&&(this.column1Row2Points+=1),2===n&&0===e&&(this.column1Row3Points+=1),3===n&&0===e&&(this.column1Row4Points+=1),0===n&&1===e&&(this.column2Row1Points+=1),1===n&&1===e&&(this.column2Row2Points+=1),2===n&&1===e&&(this.column2Row3Points+=1),3===n&&1===e&&(this.column2Row4Points+=1),0===n&&2===e&&(this.column3Row1Points+=1),1===n&&2===e&&(this.column3Row2Points+=1),2===n&&2===e&&(this.column3Row3Points+=1),3===n&&2===e&&(this.column3Row4Points+=1)}}class Wm{constructor(){this.successfulCoachingAttempts=0}}class At{constructor(){this.mangoesUsed=0,this.incubatorStatUpgrades=new sf,this.allTrainingTracks=new Ll,this.miscStats=new $m,this.trackedAnimalStats=new Wm,this.talentTree=new Su,this.breedLevel=1,this.breedGaugeXp=0,this.breedGaugeMax=200,this.previousBreedLevel=1,this.totalRacesRun=0,this.equippedOrb=null,this.canEquipOrb=!1,this.canTrain=!0,this.isAvailable=!1,this.availableAbilities=[]}makeCopy(n){var e=new At;return e.name=n.name,e.type=n.type,e.raceCourseType=n.raceCourseType,e.currentStats=n.currentStats.makeCopy(n.currentStats),e.baseStats=n.baseStats.makeCopy(n.baseStats),e.talentTree=n.talentTree.makeCopy(n.talentTree),e.isAvailable=n.isAvailable,e.ability=n.ability,e.raceVariables=new So,e.equippedItem=n.equippedItem,e.equippedOrb=n.equippedOrb,e.incubatorStatUpgrades=n.incubatorStatUpgrades,e.breedLevel=n.breedLevel,e.trackedAnimalStats=n.trackedAnimalStats,e.trait=n.trait,e}viewAbility(){return this.ability.name}getAbilityUseUpdateText(n,e=""){return n+" uses "+this.ability.name+e+"."}useAbility(){}getAnimalType(){return L[this.type]}getRaceCourseType(){return W[this.raceCourseType]}getTraitName(){return null==this.trait||""===this.trait.traitName?"None":this.trait.traitName}getEquippedItemName(){if(null!=this.equippedItem)return this.equippedItem.name}getCourseTypeClass(){return this.raceCourseType===W.Flatland?"flatlandColor":this.raceCourseType===W.Mountain?"mountainColor":this.raceCourseType===W.Ocean?"waterColor":this.raceCourseType===W.Tundra?"tundraColor":this.raceCourseType===W.Volcanic?"volcanicColor":""}increaseStatsFromCurrentTraining(){null==this.currentTraining||null==this.currentStats||(this.currentStats.topSpeed+=this.currentTraining.affectedStatRatios.topSpeed*this.currentTraining.statGain,this.currentStats.acceleration+=this.currentTraining.affectedStatRatios.acceleration*this.currentTraining.statGain,this.currentStats.endurance+=this.currentTraining.affectedStatRatios.endurance*this.currentTraining.statGain,this.currentStats.power+=this.currentTraining.affectedStatRatios.power*this.currentTraining.statGain,this.currentStats.focus+=this.currentTraining.affectedStatRatios.focus*this.currentTraining.statGain,this.currentStats.adaptability+=this.currentTraining.affectedStatRatios.adaptability*this.currentTraining.statGain)}increaseStats(n){null==n||null==this.currentStats||(this.currentStats.topSpeed+=Number(n.topSpeed),this.currentStats.acceleration+=Number(n.acceleration),this.currentStats.stamina+=Number(n.stamina),this.currentStats.endurance+=Number(n.endurance),this.currentStats.power+=Number(n.power),this.currentStats.focus+=Number(n.focus),this.currentStats.adaptability+=Number(n.adaptability))}}ze([rt(()=>Ve),Je("design:type",Ve)],At.prototype,"currentStats",void 0),ze([rt(()=>Ve),Je("design:type",Ve)],At.prototype,"baseStats",void 0),ze([rt(()=>Jo),Je("design:type",Object)],At.prototype,"currentTraining",void 0),ze([rt(()=>Jo),Je("design:type",Object)],At.prototype,"queuedTraining",void 0),ze([rt(()=>kt),Je("design:type",kt)],At.prototype,"ability",void 0),ze([rt(()=>So),Je("design:type",So)],At.prototype,"raceVariables",void 0),ze([rt(()=>ie),Je("design:type",Object)],At.prototype,"equippedItem",void 0),ze([rt(()=>ie),Je("design:type",Object)],At.prototype,"equippedOrb",void 0),ze([rt(()=>sf),Je("design:type",sf)],At.prototype,"incubatorStatUpgrades",void 0),ze([rt(()=>Ll),Je("design:type",Ll)],At.prototype,"allTrainingTracks",void 0),ze([rt(()=>$m),Je("design:type",$m)],At.prototype,"miscStats",void 0),ze([rt(()=>Wm),Je("design:type",Wm)],At.prototype,"trackedAnimalStats",void 0),ze([rt(()=>kt),Je("design:type",Array)],At.prototype,"availableAbilities",void 0),ze([rt(()=>vi),Je("design:type",vi)],At.prototype,"trait",void 0),ze([rt(()=>Su),Je("design:type",Su)],At.prototype,"talentTree",void 0);class A5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Horse,this.raceCourseType=W.Flatland,this.ability=new kt,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Second Wind",this.ability.description="Second Wind",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=60,n.oneTimeEffect=!0,n.name="Inspiration",n.description="Inspiration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.cooldown=5,e.efficiency=27,e.oneTimeEffect=!1,e.name="Pacemaker",e.description="Pacemaker",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class P5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Cheetah,this.raceCourseType=W.Flatland,this.ability=new kt,this.ability.cooldown=6,this.ability.efficiency=35,this.ability.oneTimeEffect=!1,this.ability.name="Sprint",this.ability.description="Sprint",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=.5,n.oneTimeEffect=!1,n.name="Giving Chase",n.description="Giving Chase",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="On The Hunt",e.description="On The Hunt",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class E5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Hare,this.raceCourseType=W.Flatland,this.ability=new kt,this.ability.efficiency=45,this.ability.oneTimeEffect=!0,this.ability.name="Prey Instinct",this.ability.description="Prey Instinct",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.cooldown=5,n.efficiency=40,n.oneTimeEffect=!1,n.name="Awareness",n.description="Awareness",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=130,e.oneTimeEffect=!0,e.name="Nap",e.description="Nap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class MD extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Warthog,this.raceCourseType=W.Flatland,this.ability=new kt,this.ability.cooldown=5,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Graze",this.ability.description="Graze",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=80,n.oneTimeEffect=!1,n.name="Mud Pit",n.description="Mud Pit",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=30,e.oneTimeEffect=!0,e.name="Time To Tussle",e.description="Time To Tussle",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class I5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Monkey,this.raceCourseType=W.Mountain,this.ability=new kt,this.ability.cooldown=11,this.ability.efficiency=6,this.ability.name="Landslide",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=60,n.oneTimeEffect=!0,n.name="Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=70,e.cooldown=0,e.oneTimeEffect=!0,e.name="Leap",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=30,this.availableAbilities.push(e)}}class V5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Goat,this.raceCourseType=W.Mountain,this.ability=new kt,this.ability.efficiency=.5,this.ability.oneTimeEffect=!1,this.ability.name="Sure-footed",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=.25,n.oneTimeEffect=!1,n.name="Deep Breathing",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="In The Rhythm",e.isAbilityPurchased=!1,e.purchasePrice=1e3,e.totalFrames=15,this.availableAbilities.push(e)}}class O5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Gecko,this.raceCourseType=W.Mountain,this.ability=new kt,this.ability.cooldown=5,this.ability.efficiency=55,this.ability.oneTimeEffect=!1,this.ability.name="Sticky",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=.2,n.oneTimeEffect=!1,n.name="Night Vision",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=38,e.oneTimeEffect=!0,e.name="Camouflage",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class N5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Dolphin,this.raceCourseType=W.Ocean,this.ability=new kt,this.ability.cooldown=6,this.ability.efficiency=84,this.ability.oneTimeEffect=!1,this.ability.name="Echolocation",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=50,n.oneTimeEffect=!0,n.name="Navigator",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=70,e.oneTimeEffect=!0,e.name="Flowing Current",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class F5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Shark,this.raceCourseType=W.Ocean,this.ability=new kt,this.ability.efficiency=60,this.ability.oneTimeEffect=!0,this.ability.name="Apex Predator",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=35,n.oneTimeEffect=!0,n.name="Feeding Frenzy",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=.1,e.oneTimeEffect=!0,e.name="Blood In The Water",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class B5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Octopus,this.raceCourseType=W.Ocean,this.ability=new kt,this.ability.cooldown=5,this.ability.efficiency=17,this.ability.totalFrames=15,this.ability.oneTimeEffect=!1,this.ability.name="Propulsion",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=100,n.oneTimeEffect=!1,n.name="Buried Treasure",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=2,e.oneTimeEffect=!0,e.name="Big Brain",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class kD extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Whale,this.raceCourseType=W.Ocean,this.ability=new kt,this.ability.cooldown=9,this.ability.efficiency=75,this.ability.oneTimeEffect=!1,this.ability.name="Storing Power",this.ability.description="Storing Power",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=80,n.oneTimeEffect=!1,n.name="Unparalleled Focus",n.description="Mud Pit",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=45,e.cooldown=8,e.oneTimeEffect=!1,e.name="Whalesong",e.description="Whalesong",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class L5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Penguin,this.raceCourseType=W.Tundra,this.ability=new kt,this.ability.efficiency=65,this.ability.cooldown=8,this.ability.oneTimeEffect=!1,this.ability.name="Careful Toboggan",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=4,n.oneTimeEffect=!1,n.name="Wild Toboggan",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=.1,e.oneTimeEffect=!1,e.name="Quick Toboggan",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class U5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Caribou,this.raceCourseType=W.Tundra,this.ability=new kt,this.ability.efficiency=.5,this.ability.oneTimeEffect=!0,this.ability.name="Herd Mentality",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=50,n.cooldown=7,n.oneTimeEffect=!1,n.name="Great Migration",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=.05,e.oneTimeEffect=!0,e.name="Special Delivery",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class H5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Salamander,this.raceCourseType=W.Volcanic,this.ability=new kt,this.ability.cooldown=7,this.ability.efficiency=45,this.ability.oneTimeEffect=!1,this.ability.name="Cold Blooded",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.cooldown=6,n.efficiency=50,n.oneTimeEffect=!1,n.name="Burrow",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.cooldown=10,e.efficiency=25,e.oneTimeEffect=!1,e.name="Heat Up",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class G5 extends At{constructor(){super(),this.baseStats=new Ve(5,5,5,5,5,5),this.currentStats=new Ve(5,5,5,5,5,5),this.type=L.Fox,this.raceCourseType=W.Volcanic,this.ability=new kt,this.ability.cooldown=5,this.ability.efficiency=60,this.ability.oneTimeEffect=!1,this.ability.name="Trickster",this.ability.isAbilityPurchased=!0,this.availableAbilities.push(this.ability);var n=new kt;n.efficiency=1.5,n.oneTimeEffect=!1,n.name="Fleeting Speed",n.isAbilityPurchased=!1,n.purchasePrice=1e3,this.availableAbilities.push(n);var e=new kt;e.efficiency=65,e.oneTimeEffect=!0,e.name="Nine Tails",e.isAbilityPurchased=!1,e.purchasePrice=1e3,this.availableAbilities.push(e)}}class lf{constructor(){this.selectedAnimals=[],this.courseTypeOrder=[],this.isCourseOrderActive=!1,this.autoRunFreeRace=!1,this.isEventDeck=!1}}ze([rt(()=>At),Je("design:type",Array)],lf.prototype,"selectedAnimals",void 0);class qm{constructor(){this.maxSpeedIncrease=1.1,this.accelerationRateIncrease=1.1,this.staminaIncrease=1.1,this.powerEfficiencyIncrease=1.1,this.focusDistanceIncrease=1.1,this.adaptabilityDistanceIncrease=1.1}}class z5{constructor(){this.upgradePrice=[],this.upgradedStatGain=new Ve(1,1,1,1,1,1),this.barnLevel=0,this.specializationLevel=0,this.currentDeltaTime=0}}class Xm{constructor(){this.barnUpgrades=new z5}getSize(){return vt[this.size]}}class Cu{constructor(){this.timeTrained=0,this.timeToComplete=120}}ze([rt(()=>At),Je("design:type",Object)],Cu.prototype,"assignedAnimal",void 0),ze([rt(()=>vi),Je("design:type",Object)],Cu.prototype,"assignedTrait",void 0);class AD{constructor(n){this.exhaustionStatReduction=1,this.morale=1,this.associatedAnimalType=n,this.isCurrentlyRacing=!1,this.isSetToRelay=!1}}class Ym{constructor(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.deepBreathingUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.bigBrainUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.specialDeliveryUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0,this.onTheHuntUseCap=25,this.sureFootedUseCap=25,this.deepBreathingUseCap=25,this.nightVisionUseCap=25,this.bigBrainUseCap=5,this.quickTobogganUseCap=25,this.herdMentalityUseCap=1,this.specialDeliveryUseCap=25}resetUseCounts(){this.onTheHuntUseCount=0,this.sureFootedUseCount=0,this.inTheRhythmUseCount=0,this.nightVisionUseCount=0,this.quickTobogganUseCount=0,this.herdMentalityUseCount=0,this.inspirationUseCount=0,this.flowingCurrentUseCount=0,this.navigatorUseCount=0,this.camouflageUseCount=0}}class cf{constructor(){this.nineTailsBuffs=[],this.grazeBuffs=[],this.relayEffects=[],this.mountainEndingY=0,this.deepBreathingStaminaGain=0,this.longDistanceTalentIncreaseAccelerationWithLowVelocity=!1,this.maxSpeedFloor=0,this.whalePowerStored=0,this.pathsClearedWithoutLosingFocus=0,this.raceVariables=new So}}ze([rt(()=>So),Je("design:type",So)],cf.prototype,"raceVariables",void 0);class Y{constructor(n,e){void 0!==n&&(this.value=n),void 0!==e&&(this.text=e)}}class uf{constructor(){this.raceUpdates=[],this.beatMoneyMark=!1,this.distanceCovered=0}addRaceUpdate(n,e){var i=new Y;i.text=e,i.value=n,this.raceUpdates.push(i)}}class PD{constructor(n,e){void 0!==n&&(this.objectType=n),void 0!==e&&(this.xDistance=e)}}var $e=(()=>{return(t=$e||($e={}))[t.Sunny=0]="Sunny",t[t.Rainy=1]="Rainy",t[t.Stormy=2]="Stormy",t[t.Snowfall=3]="Snowfall",t[t.Maelstrom=4]="Maelstrom",t[t.Hailstorm=5]="Hailstorm",t[t.Ashfall=6]="Ashfall",t[t.Torrid=7]="Torrid",$e;var t})(),Ke=(()=>{return(t=Ke||(Ke={}))[t.Regular=0]="Regular",t[t.S=1]="S",t[t.Bumps=2]="Bumps",t[t.Crevasse=3]="Crevasse",t[t.Gaps=4]="Gaps",t[t.Waves=5]="Waves",t[t.Dive=6]="Dive",t[t.Cavern=7]="Cavern",t[t.Hills=8]="Hills",t[t.FirstRegular=9]="FirstRegular",t[t.LastRegular=10]="LastRegular",t[t.SteppingStones=11]="SteppingStones",Ke;var t})(),Gr=(()=>{return(t=Gr||(Gr={}))[t.None=0]="None",t[t.Low=.8]="Low",t[t.Medium=.6]="Medium",t[t.High=.4]="High",Gr;var t})();class df{constructor(n){this.didAnimalStumble=!1,this.didAnimalLoseFocus=!1,this.checkedForBurst=!1,this.checkedForMiniBurst=!1,this.checkedForNineTails=!1,null!=n&&this.setStumbleFields(),this.driftAmount=0,this.isSpecialPath=!1}setStumbleFields(){this.currentStumbleOpportunity=0,this.routeDesign===Ke.Regular&&(this.stumbleSeverity=Gr.None,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Ke.S&&(this.isSpecialPath=!0,this.stumbleSeverity=Gr.Low,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Ke.Bumps&&(this.isSpecialPath=!0,this.stumbleSeverity=Gr.Medium,this.frequencyOfStumble=20,this.stumbleOpportunities=8),this.routeDesign===Ke.Crevasse&&(this.isSpecialPath=!0,this.stumbleSeverity=Gr.High,this.frequencyOfStumble=80,this.stumbleOpportunities=6),this.routeDesign===Ke.Gaps&&(this.isSpecialPath=!0,this.stumbleSeverity=Gr.Medium,this.frequencyOfStumble=175,this.stumbleOpportunities=4),this.routeDesign===Ke.Waves&&(this.isSpecialPath=!0,this.stumbleSeverity=Gr.Medium,this.frequencyOfStumble=50,this.stumbleOpportunities=6),this.routeDesign===Ke.Dive&&(this.isSpecialPath=!0,this.stumbleSeverity=Gr.High,this.frequencyOfStumble=200,this.stumbleOpportunities=2),this.routeDesign===Ke.Cavern&&(this.isSpecialPath=!0,this.frequencyOfStumble=0,this.stumbleOpportunities=0,this.frequencyOfDrift=400),this.routeDesign===Ke.Hills&&(this.isSpecialPath=!0,this.stumbleSeverity=Gr.High,this.frequencyOfStumble=120,this.stumbleOpportunities=3,this.frequencyOfDrift=250),(this.routeDesign===Ke.FirstRegular||this.routeDesign===Ke.LastRegular)&&(this.isSpecialPath=!0,this.stumbleSeverity=Gr.Medium,this.frequencyOfStumble=100,this.stumbleOpportunities=4),this.routeDesign===Ke.SteppingStones&&(this.isSpecialPath=!0,this.stumbleSeverity=Gr.High,this.frequencyOfStumble=60,this.stumbleOpportunities=10)}}class gn{constructor(n){var e=.8,r=1.2;this.maxSpeedModifier=1,this.accelerationModifier=1,this.powerModifier=1,this.focusModifier=1,this.adaptabilityModifier=1,null!==n&&(this.terrainType=n,n===$e.Sunny&&(this.staminaModifier=1.5,this.maxSpeedModifier=r),n===$e.Rainy&&(this.adaptabilityModifier=e,this.focusModifier=r),n===$e.Stormy&&(this.focusModifier=e,this.accelerationModifier=r),n===$e.Maelstrom&&(this.accelerationModifier=e,this.maxSpeedModifier=e,this.adaptabilityModifier=r),n===$e.Hailstorm&&(this.focusModifier=e,this.adaptabilityModifier=e,this.maxSpeedModifier=e),n===$e.Ashfall&&(this.staminaModifier=r,this.accelerationModifier=e,this.powerModifier=e),n===$e.Snowfall&&(this.staminaModifier=e,this.maxSpeedModifier=e,this.accelerationModifier=e),n===$e.Torrid&&(this.powerModifier=e,this.maxSpeedModifier=e,this.focusModifier=r))}getTerrainType(){return $e[this.terrainType]}}class Ui{constructor(n,e){this.legComplete=!1,null!=n&&(this.courseType=n),void 0!==e&&null!=e&&(this.distance=e),this.pathData=[]}getCourseTypeName(){return W[this.courseType]}getCourseTypeClass(){return this.courseType===W.Flatland?"flatlandColor":this.courseType===W.Mountain?"mountainColor":this.courseType===W.Ocean?"waterColor":this.courseType===W.Tundra?"tundraColor":this.courseType===W.Volcanic?"volcanicColor":""}getTerrainName(){return null==this.terrain?"":$e[this.terrain.terrainType]}}ze([rt(()=>df),Je("design:type",Array)],Ui.prototype,"pathData",void 0),ze([rt(()=>gn),Je("design:type",gn)],Ui.prototype,"terrain",void 0);class hf{constructor(){this.distanceCoveredByFrame=[],this.velocityByFrame=[],this.timeToCompleteByFrame=[],this.maxSpeedByFrame=[],this.staminaPercentByFrame=[],this.racerEffectByFrame=[],this.yAdjustmentByFrame=[],this.lavaFallPercentByFrame=[],this.racePositionByFrame=[]}}class vn{constructor(n,e,i,r,a,o,s,l,c,u,d,v){this.raceLegs=n,this.requiredRank=e,this.isCircuitRace=i,this.raceId=r,this.length=a,this.timeToComplete=o,this.raceUI=new hf,this.circuitIncreaseReward=["",""],null!=s&&(this.rewards=s),null!=l&&(this.localRaceType=l),null!=c&&(this.trackRaceType=c),null!=u&&(this.raceType=u),null!=d&&(this.eventRaceType=d),null!=v&&(this.drawnObjects=v)}makeCopy(n){var e=new vn(n.raceLegs,n.requiredRank,n.isCircuitRace,n.raceId,n.length,n.timeToComplete,n.rewards,n.localRaceType,n.trackRaceType,n.raceType,n.eventRaceType,n.drawnObjects);return n.raceUI.velocityByFrame.length>0&&n.raceUI.velocityByFrame.forEach(i=>{e.raceUI.velocityByFrame.push(i)}),n.raceUI.staminaPercentByFrame.length>0&&n.raceUI.staminaPercentByFrame.forEach(i=>{e.raceUI.staminaPercentByFrame.push(i)}),e}reduceExportSize(){this.raceUI=new hf}}ze([rt(()=>Ui),Je("design:type",Array)],vn.prototype,"raceLegs",void 0),ze([rt(()=>ie),Je("design:type",Array)],vn.prototype,"rewards",void 0),ze([rt(()=>hf),Je("design:type",hf)],vn.prototype,"raceUI",void 0),ze([rt(()=>PD),Je("design:type",Array)],vn.prototype,"drawnObjects",void 0);class ff{constructor(){this.affectsAllRacers=!1}makeCopy(){var n=new ff;return n.isMultiplicative=this.isMultiplicative,n.remainingRelayMeters=this.remainingRelayMeters,n.relayAffectedStatRatios=new Ve(this.relayAffectedStatRatios.topSpeed,this.relayAffectedStatRatios.acceleration,this.relayAffectedStatRatios.endurance,this.relayAffectedStatRatios.power,this.relayAffectedStatRatios.focus,this.relayAffectedStatRatios.adaptability),n.effectType=this.effectType,n.additionalValue=this.additionalValue,n.affectsAllRacers=this.affectsAllRacers,n}}class Nn{constructor(){this.isRunning=!1,this.initialSetupComplete=!1,this.animalAlreadyPrepped=!1,this.mountainEndingY=0,this.mountainClimbPercent=0,this.exhaustionMoraleUpdateCounter=0,this.weatherClusterUpdateCounter=0,this.triggerEnergyFloorRelay=!1,this.weekStartDay=1,this.weekStartHour=9,this.weekEndDay=4,this.weekEndHour=12,this.weekendStartDay=5,this.weekendStartHour=20,this.weekendEndDay=0,this.weekendEndHour=23,this.distanceCovered=0,this.grandPrixTimeLength=27e4,this.segmentTime=120,this.segmentTimeCounter=0,this.overallTimeCounter=0,this.rank="Z",this.animalData=[],this.queuedRelayEffects=[],this.bonusTime=0,this.remainingRewards=0,this.totalRewards=0,this.foodRewardsObtained=0,this.coinRewardsObtained=0,this.renownRewardsObtained=0,this.tokenRewardsObtained=0,this.isGrandPrixCompleted=!1,this.remainingEventRaceTime=0,this.eventAbilityData=new Ym,this.isCatchingUp=!1,this.isLoading=!1}}ze([rt(()=>Ym),Je("design:type",Ym)],Nn.prototype,"eventAbilityData",void 0),ze([rt(()=>gn),Je("design:type",gn)],Nn.prototype,"raceTerrain",void 0),ze([rt(()=>vn),Je("design:type",vn)],Nn.prototype,"currentRaceSegment",void 0),ze([rt(()=>uf),Je("design:type",uf)],Nn.prototype,"currentRaceSegmentResult",void 0),ze([rt(()=>vn),Je("design:type",vn)],Nn.prototype,"nextRaceSegment",void 0),ze([rt(()=>vn),Je("design:type",vn)],Nn.prototype,"previousRaceSegment",void 0),ze([rt(()=>cf),Je("design:type",cf)],Nn.prototype,"previousRaceSegmentData",void 0),ze([rt(()=>AD),Je("design:type",Array)],Nn.prototype,"animalData",void 0),ze([rt(()=>ff),Je("design:type",Array)],Nn.prototype,"queuedRelayEffects",void 0);class ED{}class pf{constructor(){this.rewards=[]}}ze([rt(()=>Date),Je("design:type",Date)],pf.prototype,"expirationDate",void 0),ze([rt(()=>Jo),Je("design:type",Array)],pf.prototype,"rewards",void 0);class tt{constructor(){this.isAvailable=!0,this.amountPurchased=0,this.totalShopQuantity=1,this.quantityMultiplier=1,this.numberPurchasing=1,this.purchasePrice=[],this.basePurchasePrice=[]}}class la{}ze([rt(()=>tt),Je("design:type",Array)],la.prototype,"itemList",void 0);class gf{constructor(){this.tutorialCompleted=!1,this.currentTutorialId=1,this.showTutorial=!1,this.showTrainingTrackTutorial=!0,this.showCoachingTutorial=!0}}class vf{constructor(){this.isNewSpecialRaceAvailable=!1,this.isEventRaceNowActive=!1}}class Qm{constructor(){this.settings=[]}get(n){var e=this.settings.find(i=>i[0]===n);return null!=e?e[1]:""}set(n,e){var i=this.settings.find(r=>r[0]===n);null==i?this.settings.push([n,e]):i[1]=e}}class Km{constructor(){this.totalRaces=0,this.totalBreeds=0,this.totalMetersRaced=0,this.mostUsedAnimal="",this.mostRacedCourseType="",this.highestMaxSpeed="",this.highestAccelerationRate="",this.highestStamina="",this.highestPowerEfficiency="",this.highestFocusDistance="",this.highestAdaptabilityDistance=""}}class Zm{constructor(){this.unlockables=[]}get(n){var e=this.unlockables.find(i=>i[0]===n);return null!=e&&e[1]}set(n,e){var i=this.unlockables.find(r=>r[0]===n);null==i?this.unlockables.push([n,e]):i[1]=e}}class Yi{constructor(n){this.userIsRacing=!1,this.showBreedWarning=!0,null!=n&&(this.animals=n.animals,this.barns=n.barns,this.trainingOptions=n.trainingOptions,this.circuitRaces=n.circuitRaces,this.circuitRank=n.circuitRank,this.localRaces=n.localRaces,this.resources=n.resources,this.modifiers=n.modifiers,this.shop=n.shop,this.tokenShop=n.tokenShop,this.animalDecks=n.animalDecks,this.incubator=n.incubator,this.trackedStats=n.trackedStats,this.pinnacle=n.pinnacle,this.orbStats=n.orbStats,this.redeemedCodes=n.redeemedCodes,this.eventRaceData=n.eventRaceData,this.notifications=n.notifications,this.previousEventRewards=[],this.nationalRaceCountdown=0,this.autoFreeRaceCounter=0,this.freeRaceCounter=0,this.freeRaceTimePeriodCounter=0)}}ze([rt(()=>At),Je("design:type",Array)],Yi.prototype,"animals",void 0),ze([rt(()=>Xm),Je("design:type",Array)],Yi.prototype,"barns",void 0),ze([rt(()=>Jo),Je("design:type",Array)],Yi.prototype,"trainingOptions",void 0),ze([rt(()=>vn),Je("design:type",Array)],Yi.prototype,"circuitRaces",void 0),ze([rt(()=>vn),Je("design:type",Array)],Yi.prototype,"localRaces",void 0),ze([rt(()=>ED),Je("design:type",ED)],Yi.prototype,"pinnacle",void 0),ze([rt(()=>ie),Je("design:type",Array)],Yi.prototype,"resources",void 0),ze([rt(()=>Y),Je("design:type",Array)],Yi.prototype,"modifiers",void 0),ze([rt(()=>la),Je("design:type",Array)],Yi.prototype,"shop",void 0),ze([rt(()=>la),Je("design:type",Array)],Yi.prototype,"tokenShop",void 0),ze([rt(()=>lf),Je("design:type",Array)],Yi.prototype,"animalDecks",void 0),ze([rt(()=>Qm),Je("design:type",Qm)],Yi.prototype,"settings",void 0),ze([rt(()=>Zm),Je("design:type",Zm)],Yi.prototype,"unlockables",void 0),ze([rt(()=>Cu),Je("design:type",Cu)],Yi.prototype,"incubator",void 0),ze([rt(()=>Km),Je("design:type",Km)],Yi.prototype,"trackedStats",void 0),ze([rt(()=>qm),Je("design:type",qm)],Yi.prototype,"orbStats",void 0),ze([rt(()=>gf),Je("design:type",gf)],Yi.prototype,"tutorials",void 0),ze([rt(()=>pf),Je("design:type",Array)],Yi.prototype,"redeemedCodes",void 0),ze([rt(()=>Nn),Je("design:type",Nn)],Yi.prototype,"eventRaceData",void 0),ze([rt(()=>ie),Je("design:type",Array)],Yi.prototype,"previousEventRewards",void 0),ze([rt(()=>vf),Je("design:type",vf)],Yi.prototype,"notifications",void 0);var Fe=(()=>{return(t=Fe||(Fe={}))[t.ShortTrackRunning=0]="ShortTrackRunning",t[t.Sprints=1]="Sprints",t[t.TrailRunning=2]="TrailRunning",t[t.MoveLogs=3]="MoveLogs",t[t.Footwork=4]="Footwork",t[t.PracticeCommands=5]="PracticeCommands",t[t.ScentTraining=6]="ScentTraining",t[t.SmallWagonTow=7]="SmallWagonTow",t[t.Sidestep=8]="Sidestep",t[t.MediumTrackRunning=9]="MediumTrackRunning",t[t.UphillRun=10]="UphillRun",t[t.Puzzles=11]="Puzzles",t[t.MoveRocks=12]="MoveRocks",t[t.LateralVerticalDrill=13]="LateralVerticalDrill",t[t.DodgeBall=14]="DodgeBall",t[t.BurstPractice=15]="BurstPractice",t[t.Acrobatics=16]="Acrobatics",t[t.LongTrackRunning=17]="LongTrackRunning",t[t.VehicleTow=18]="VehicleTow",t[t.LogJump=19]="LogJump",t[t.Meditation=20]="Meditation",t[t.WindSprints=21]="WindSprints",t[t.GreenwayHike=22]="GreenwayHike",t[t.Marathon=23]="Marathon",t[t.AgilityCourse=24]="AgilityCourse",Fe;var t})(),ID=Q(340);let kn=(()=>{class t{constructor(e){this.sanitizer=e}getRandomSeededInteger(e,i,r="seeded"){var a=ID(r);return Math.round(a()*(i-e)+e)}getRandomInteger(e,i){return e-=.500000001,i+=.499999999,Math.round(Math.random()*(i-e)+e)}getRandomSeededNumber(e,i,r="seeded"){return ID(r)()*(i-e)+e}getRandomNumber(e,i){return Math.random()*(i-e)+e}getRandomNumberPercent(){return 99*Math.random()+1}getNumericValueOfCircuitRank(e){var i=0;return e.length>1&&(i=26*(e.length-1)),i+(91-e.charCodeAt(e.length-1))}getCircuitRankFromNumericValue(e){for(var i="";e>26;)i+="A",e-=26;return i+String.fromCharCode(91-e)}getHoursRemainingFromSeconds(e){return Math.floor(e/3600)}getMinutesLeftInHourRemainingFromSeconds(e){var i=Math.floor(e/3600);return Math.floor(e/60-60*i)}getSecondsLeftInMinuteRemainingFromSeconds(e){var i=Math.floor(e/3600);return e-60*i*60-60*Math.floor(e/60-60*i)}convertSecondsToHHMMSS(e){var i=Math.floor(e/3600),r=Math.floor(e/60-60*i),a=e-60*i*60-60*r,o=i.toString(),s=r.toString(),l=Math.floor(a).toString();return i<10&&(o=i<1||i>59?"00":String(o).padStart(2,"0")),r<10&&(s=r<1||r>59?"00":String(s).padStart(2,"0")),a<10&&(l=a<1||a>59?"00":String(l).padStart(2,"0")),o+":"+s+":"+l}getClosestWholeNumber(e,i){return i/Math.floor(i/e)}getDayOfWeekFromNumber(e){return e<=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].length-1?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]:""}getAmPmTimeFromHours(e){return 0===e?"12:00 AM":e<12?e+":00 AM":12===e?"12:00 PM":e-12+":00 PM"}get24HourFormat(e){return e<=9?"0"+e+":00":e+":00"}convertDegreesToRadians(e){return e*(Math.PI/180)}getSanitizedHtml(e){var i=this.sanitizer.sanitize(ri.HTML,this.sanitizer.bypassSecurityTrustHtml(e));return null===i?"":i}addDaysToDate(e,i){var r=new Date(e);return r.setDate(r.getDate()+i),r}shadeColor(e,i){return"#"+e.replace(/^#/,"").replace(/../g,a=>("0"+Math.min(255,Math.max(0,parseInt(a,16)+i)).toString(16)).substr(-2))}getProperNoun(e){return e.charAt(0).toUpperCase()+e.slice(1)}condenseList(e){var i=[];return e.forEach(r=>{if(i.some(o=>o.name===r.name))i.find(o=>o.name===r.name).amount+=r.amount;else{var a=r.makeCopy(r);i.push(a)}}),i}ordinalSuffixOf(e){var i=e%10,r=e%100;return 1==i&&11!=r?e+"st":2==i&&12!=r?e+"nd":3==i&&13!=r?e+"rd":e+"th"}}return t.\u0275fac=function(e){return new(e||t)(Ue(Wo))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Jm=(()=>{class t{constructor(){}initializeShop(){}initializeResource(e,i,r){return new ie(e,i,r)}initializeTraining(e){var i=new Jo;return e===Fe.ShortTrackRunning&&(i.trainingName="Short Track Running",i.isAvailable=!0,i.facilitySize=vt.Small,i.timeToComplete=30,i.trainingType=Fe.ShortTrackRunning,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(1,0,0,0,0,0)),e===Fe.Sprints&&(i.trainingName="Sprints",i.isAvailable=!0,i.facilitySize=vt.Small,i.timeToComplete=20,i.trainingType=Fe.Sprints,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,1,0,0,0,0)),e===Fe.TrailRunning&&(i.trainingName="Trail Running",i.isAvailable=!0,i.facilitySize=vt.Small,i.timeToComplete=45,i.trainingType=Fe.TrailRunning,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(.5,0,1,0,0,0)),e===Fe.MoveLogs&&(i.trainingName="Move Logs",i.isAvailable=!1,i.facilitySize=vt.Small,i.timeToComplete=30,i.trainingType=Fe.MoveLogs,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,1,0,0)),e===Fe.Footwork&&(i.trainingName="Footwork",i.isAvailable=!1,i.facilitySize=vt.Small,i.timeToComplete=45,i.trainingType=Fe.Footwork,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,.25,0,0,0,1)),e===Fe.PracticeCommands&&(i.trainingName="Practice Commands",i.isAvailable=!1,i.facilitySize=vt.Small,i.timeToComplete=40,i.trainingType=Fe.PracticeCommands,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,0,1,.25)),e===Fe.ScentTraining&&(i.trainingName="Scent Training",i.isAvailable=!1,i.facilitySize=vt.Small,i.timeToComplete=45,i.trainingType=Fe.ScentTraining,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,.5,0,1,0)),e===Fe.SmallWagonTow&&(i.trainingName="Small Wagon Tow",i.isAvailable=!1,i.facilitySize=vt.Small,i.timeToComplete=45,i.trainingType=Fe.SmallWagonTow,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(.25,0,0,1.5,0,0)),e===Fe.Sidestep&&(i.trainingName="Sidestep",i.isAvailable=!1,i.facilitySize=vt.Small,i.timeToComplete=35,i.trainingType=Fe.Sidestep,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,2,0,0,0,0)),e===Fe.MediumTrackRunning&&(i.trainingName="Medium Track Running",i.isAvailable=!1,i.facilitySize=vt.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Fe.MediumTrackRunning,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(2,0,1,0,0,0)),e===Fe.UphillRun&&(i.trainingName="Uphill Run",i.isAvailable=!1,i.facilitySize=vt.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Fe.UphillRun,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,1,2,0,0,0)),e===Fe.Puzzles&&(i.trainingName="Puzzles",i.isAvailable=!1,i.facilitySize=vt.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Fe.Puzzles,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,0,2,1)),e===Fe.MoveRocks&&(i.trainingName="Move Rocks",i.isAvailable=!1,i.facilitySize=vt.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Fe.MoveRocks,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,1,0,2,0,0)),e===Fe.DodgeBall&&(i.trainingName="Dodge Ball",i.isAvailable=!1,i.facilitySize=vt.Medium,i.purchasePrice*=4,i.timeToComplete=60,i.trainingType=Fe.DodgeBall,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,2.5,0,0,0,1)),e===Fe.LateralVerticalDrill&&(i.trainingName="Lateral Vertical Drill",i.isAvailable=!1,i.facilitySize=vt.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Fe.LateralVerticalDrill,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(1.5,0,0,0,2,0)),e===Fe.BurstPractice&&(i.trainingName="Burst Practice",i.isAvailable=!1,i.facilitySize=vt.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Fe.BurstPractice,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,1.5,1.5,1.5)),e===Fe.Acrobatics&&(i.trainingName="Acrobatics",i.isAvailable=!1,i.facilitySize=vt.Medium,i.purchasePrice*=4,i.timeToComplete=75,i.trainingType=Fe.Acrobatics,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(.5,0,.5,3,0,0)),e===Fe.LongTrackRunning&&(i.trainingName="Long Track Running",i.isAvailable=!1,i.facilitySize=vt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.LongTrackRunning,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(5,0,0,0,2,0)),e===Fe.VehicleTow&&(i.trainingName="Vehicle Tow",i.isAvailable=!1,i.facilitySize=vt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.VehicleTow,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,2,5,0,0)),e===Fe.LogJump&&(i.trainingName="Log Jump",i.isAvailable=!1,i.facilitySize=vt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.LogJump,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(1,1,0,0,0,5)),e===Fe.Meditation&&(i.trainingName="Meditation",i.isAvailable=!1,i.facilitySize=vt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.Meditation,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,0,2,5,0)),e===Fe.WindSprints&&(i.trainingName="Wind Sprints",i.isAvailable=!1,i.facilitySize=vt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.WindSprints,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(2,5,0,0,0,0)),e===Fe.GreenwayHike&&(i.trainingName="Greenway Hike",i.isAvailable=!1,i.facilitySize=vt.Large,i.purchasePrice*=10,i.timeToComplete=90,i.trainingType=Fe.GreenwayHike,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,0,5,0,0,2)),e===Fe.Marathon&&(i.trainingName="Marathon",i.isAvailable=!1,i.facilitySize=vt.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=Fe.Marathon,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(0,2,3,0,3,0)),e===Fe.AgilityCourse&&(i.trainingName="Agility Course",i.isAvailable=!1,i.facilitySize=vt.Large,i.purchasePrice*=10,i.timeToComplete=120,i.trainingType=Fe.AgilityCourse,i.trainingCourseType=W.Flatland,i.statGain=1,i.affectedStatRatios=new Ve(3,0,0,2,0,3)),i}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ut=(()=>{return(t=Ut||(Ut={}))[t.Track=0]="Track",t[t.Free=1]="Free",t[t.Mono=2]="Mono",t[t.Duo=3]="Duo",t[t.Rainbow=4]="Rainbow",t[t.Pinnacle=5]="Pinnacle",Ut;var t})(),it=(()=>{return(t=it||(it={}))[t.none=0]="none",t[t.headband=1]="headband",t[t.redBaton=2]="redBaton",t[t.blueBaton=3]="blueBaton",t[t.violetBaton=4]="violetBaton",t[t.orangeBaton=5]="orangeBaton",t[t.greenBaton=6]="greenBaton",t[t.yellowBaton=7]="yellowBaton",t[t.quickSnack=8]="quickSnack",t[t.blinders=9]="blinders",t[t.pendant=10]="pendant",t[t.carrotOnAStick=11]="carrotOnAStick",t[t.scaryMask=12]="scaryMask",t[t.runningShoes=13]="runningShoes",t[t.incense=14]="incense",t[t.athleticTape=15]="athleticTape",it;var t})();const e0={name:"white",properties:{"--foreground-default":"#000000","--foreground-secondary":"#1B1B1B","--foreground-tertiary":"#a6a49d","--foreground-quaternary":"#2F2F2F","--foreground-light":"#000000","--background-default":"#FCFCFC","--background-secondary":"#FFFFFF","--background-tertiary":"#C4C4C4","--background-quarternary":"#ACAFB4","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#8105fc","--specialityKeywordColor":"#050efc","--equipmentKeywordColor":"#1B7F02","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},t0={name:"light",properties:{"--foreground-default":"#08090A","--foreground-secondary":"#41474D","--foreground-tertiary":"#797C80","--foreground-quaternary":"#F4FAFF","--foreground-light":"#41474D","--background-default":"#F4FAFF","--background-secondary":"#A3B9CC","--background-tertiary":"#5C7D99","--background-quarternary":"#65799E","--background-light":"#FFFFFF","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#BF6200","--mountainColor":"#228D0F","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#266A80","--volcanicColor":"#C70604","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#064064","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},n0={name:"twilight",properties:{"--foreground-default":"#ED8B42","--foreground-secondary":"#C05100","--foreground-tertiary":"#6A2D00","--foreground-quaternary":"#FFAA20","--foreground-light":"#FF8F3D","--background-default":"#5D0274","--background-secondary":"#210129","--background-tertiary":"#14001A","--background-quarternary":"#4F223C","--background-light":"#72028D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#c66900","--mountainColor":"#279113","--waterColor":"#0000ff","--waterSubcolor":"#16148f","--tundraColor":"#1ca1c9","--volcanicColor":"#d92525","--resourceKeywordColor":"#822B03","--progressionKeywordColor":"#501da8","--specialityKeywordColor":"#000000","--equipmentKeywordColor":"#2C6854","--background-tertiary-shadow":"0 1px 3px 0 rgba(92, 125, 153, 0.5)"}},Tu={name:"night",properties:{"--foreground-default":"#A3B9CC","--foreground-secondary":"#5C7D99","--foreground-tertiary":"#49647A","--foreground-quaternary":"#E5E5E5","--foreground-light":"#FFFFFF","--background-default":"#797C80","--background-secondary":"#41474D","--background-tertiary":"#08090A","--background-quarternary":"##2A2C31","--background-light":"#41474D","--primary-default":"#5DFDCB","--primary-dark":"#24B286","--primary-light":"#B2FFE7","--error-default":"#EF3E36","--error-dark":"#800600","--error-light":"#FFCECC","--flatlandColor":"#E18B07","--mountainColor":"#30b001","--waterColor":"#9289CF","--waterSubcolor":"#5044ab","--tundraColor":"#019DDE","--volcanicColor":"#E56C6E","--resourceKeywordColor":"#EAAD91","--progressionKeywordColor":"#ABB5DC","--specialityKeywordColor":"#5DBDF6","--equipmentKeywordColor":"#83C2A6","--background-tertiary-shadow":"0 1px 3px 0 rgba(8, 9, 10, 0.5)"}};let Ul=(()=>{class t{constructor(){this.active=Tu,this.availableThemes=[e0,t0,n0,Tu]}getAvailableThemes(){return this.availableThemes}getActiveTheme(){return this.active}getActiveThemeName(){var e="";return e=this.active.name,this.active===Tu&&(e="night"),this.active===t0&&(e="light"),this.active===e0&&(e="white"),this.active===n0&&(e="twilight"),e}setNightTheme(){return this.setActiveTheme(Tu)}setLightTheme(){return this.setActiveTheme(t0)}setTwilightTheme(){return this.setActiveTheme(n0)}setWhiteTheme(){return this.setActiveTheme(e0)}setActiveTheme(e){return this.active=e,Object.keys(this.active.properties).forEach(i=>{document.documentElement.style.setProperty(i,this.active.properties[i])}),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ca=(()=>{return(t=ca||(ca={}))[t.draw=0]="draw",t[t.text=1]="text",t[t.both=2]="both",ca;var t})(),ln=(()=>{return(t=ln||(ln={}))[t.practice=0]="practice",t[t.novice=1]="novice",t[t.intermediate=2]="intermediate",t[t.master=3]="master",ln;var t})(),Ee=(()=>{return(t=Ee||(Ee={}))[t.circuit=0]="circuit",t[t.special=1]="special",t[t.event=2]="event",t[t.trainingTrack=3]="trainingTrack",Ee;var t})(),Ge=(()=>{return(t=Ge||(Ge={}))[t.grandPrix=0]="grandPrix",Ge;var t})(),jn=(()=>{return(t=jn||(jn={}))[t.clearSkies=0]="clearSkies",t[t.inclementWeather=1]="inclementWeather",t[t.coldSpell=2]="coldSpell",jn;var t})(),Hi=(()=>{return(t=Hi||(Hi={}))[t.rubyBrazier=0]="rubyBrazier",t[t.amberBrazier=1]="amberBrazier",t[t.topazBrazier=2]="topazBrazier",t[t.amethystBrazier=3]="amethystBrazier",t[t.sapphireBrazier=4]="sapphireBrazier",t[t.emeraldBrazier=5]="emeraldBrazier",Hi;var t})(),gr=(()=>{return(t=gr||(gr={}))[t.ruby=0]="ruby",t[t.amber=1]="amber",t[t.topaz=2]="topaz",t[t.amethyst=3]="amethyst",t[t.sapphire=4]="sapphire",t[t.emerald=5]="emerald",gr;var t})();let Et=(()=>{class t{constructor(e,i,r){this.utilityService=e,this.initializeService=i,this.themeService=r,this.globalVar=new Yi}initializeGlobalVariables(){this.globalVar.animals=[],this.globalVar.trainingOptions=[],this.globalVar.circuitRaces=[],this.globalVar.localRaces=[],this.globalVar.resources=[],this.globalVar.modifiers=[],this.globalVar.animalDecks=[],this.globalVar.barns=[],this.globalVar.redeemedCodes=[],this.globalVar.settings=new Qm,this.globalVar.unlockables=new Zm,this.globalVar.incubator=new Cu,this.globalVar.trackedStats=new Km,this.globalVar.orbStats=new qm,this.globalVar.tutorials=new gf,this.globalVar.previousEventRewards=[],this.globalVar.eventRaceData=new Nn,this.globalVar.userIsRacing=!1,this.globalVar.nationalRaceCountdown=0,this.globalVar.autoFreeRaceCounter=0,this.globalVar.freeRaceCounter=0,this.globalVar.freeRaceTimePeriodCounter=0,this.globalVar.lastTimeStamp=Date.now(),this.globalVar.currentVersion=1.12,this.globalVar.startingVersion=1.12,this.globalVar.startDate=new Date,this.globalVar.notifications=new vf,this.globalVar.relayEnergyFloor=50,this.globalVar.doNotRelayBelowEnergyFloor=!1,this.InitializeModifiers(),this.InitializeAnimals(),this.InitializeRelayTeams(),this.InitializeGlobalTrainingOptions(),this.InitializeShop(),this.InitializeTokenShop(),this.InitializeBarns(),this.globalVar.circuitRank="Z",this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),this.checkCircuitRankRewards(),this.globalVar.monoRank="Z",this.globalVar.duoRank="Z",this.globalVar.rainbowRank="Z",this.globalVar.pinnacleFloor="Z",this.GenerateLocalRaces(),this.InitializeResources(),this.InitializeSettings(),this.InitializeUnlockables()}InitializeModifiers(){this.globalVar.modifiers.push(new Y(.2,"staminaModifier")),this.globalVar.modifiers.push(new Y(.9,"exhaustionStatLossModifier")),this.globalVar.modifiers.push(new Y(.1,"exhaustionStatLossMinimumModifier")),this.globalVar.modifiers.push(new Y(5,"trainingBreedGaugeIncrease")),this.globalVar.modifiers.push(new Y(10,"circuitBreedGaugeIncrease")),this.globalVar.modifiers.push(new Y(1,"localBreedGaugeIncrease")),this.globalVar.modifiers.push(new Y(.5,"trainingTrackPaceModifier")),this.globalVar.modifiers.push(new Y(.05,"breedLevelStatModifier")),this.globalVar.modifiers.push(new Y(10,"breedGaugeMaxIncreaseModifier")),this.globalVar.modifiers.push(new Y(.001,"incubatorUpgradeIncreaseModifier")),this.globalVar.modifiers.push(new Y(5,"facilityLevelModifier")),this.globalVar.modifiers.push(new Y(.02,"animalHandlerModifier")),this.globalVar.modifiers.push(new Y(.01,"stopwatchModifier")),this.globalVar.modifiers.push(new Y(.1,"racerMapsModifier")),this.globalVar.modifiers.push(new Y(50,"freeRacesToMedalModifier")),this.globalVar.modifiers.push(new Y(25,"nationalRacesToMedalModifier")),this.globalVar.modifiers.push(new Y(10,"internationalRacesToMedalModifier")),this.globalVar.modifiers.push(new Y(.75,"moneyMarkPaceModifier")),this.globalVar.modifiers.push(new Y(1.25,"moneyMarkRewardModifier")),this.globalVar.modifiers.push(new Y(5,"whistleModifier")),this.globalVar.modifiers.push(new Y(10,"goldenWhistleModifier")),this.globalVar.modifiers.push(new Y(.1,"breedingGroundsSpecializationModifier")),this.globalVar.modifiers.push(new Y(300,"attractionTimeToCollectModifier")),this.globalVar.modifiers.push(new Y(20,"attractionAmountModifier")),this.globalVar.modifiers.push(new Y(.05,"researchCenterIncrementsModifier")),this.globalVar.modifiers.push(new Y(.45,"researchCenterTrainingAnimalModifier")),this.globalVar.modifiers.push(new Y(.25,"researchCenterStudyingAnimalModifier")),this.globalVar.modifiers.push(new Y(.75,"researchCenterMaxStatGainModifier")),this.globalVar.modifiers.push(new Y(3,"headbandEquipmentModifier")),this.globalVar.modifiers.push(new Y(1,"quickSnackEquipmentModifier")),this.globalVar.modifiers.push(new Y(.5,"blindersEquipmentModifier")),this.globalVar.modifiers.push(new Y(.9,"pendantEquipmentModifier")),this.globalVar.modifiers.push(new Y(1.1,"redBatonEquipmentModifier")),this.globalVar.modifiers.push(new Y(1.1,"blueBatonEquipmentModifier")),this.globalVar.modifiers.push(new Y(1.1,"orangeBatonEquipmentModifier")),this.globalVar.modifiers.push(new Y(1.1,"greenBatonEquipmentModifier")),this.globalVar.modifiers.push(new Y(1.1,"yellowBatonEquipmentModifier")),this.globalVar.modifiers.push(new Y(1.1,"violetBatonEquipmentModifier")),this.globalVar.modifiers.push(new Y(2,"scaryMaskEquipmentModifier")),this.globalVar.modifiers.push(new Y(1.2,"runningShoesEquipmentModifier")),this.globalVar.modifiers.push(new Y(.9,"incenseEquipmentModifier")),this.globalVar.modifiers.push(new Y(.5,"athleticTapeEquipmentModifier")),this.globalVar.modifiers.push(new Y(14400,"smallBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new Y(28800,"mediumBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new Y(43200,"largeBarnTrainingTimeModifier")),this.globalVar.modifiers.push(new Y(5,"freeRacesPerTimePeriodModifier")),this.globalVar.modifiers.push(new Y(300,"freeRacesTimePeriodModifier")),this.globalVar.modifiers.push(new Y(28800,"autoFreeRacesMaxIdleTimePeriodModifier")),this.globalVar.modifiers.push(new Y(25e5,"metersPerCoinsGrandPrixModifier")),this.globalVar.modifiers.push(new Y(2e7,"metersPerRenownGrandPrixModifier")),this.globalVar.modifiers.push(new Y(100,"grandPrixCoinRewardModifier")),this.globalVar.modifiers.push(new Y(3,"grandPrixRenownRewardModifier")),this.globalVar.modifiers.push(new Y(5e7,"grandPrixToken1MeterModifier")),this.globalVar.modifiers.push(new Y(1e8,"grandPrixToken2MeterModifier")),this.globalVar.modifiers.push(new Y(25e7,"grandPrixToken3MeterModifier")),this.globalVar.modifiers.push(new Y(5e8,"grandPrixToken4MeterModifier")),this.globalVar.modifiers.push(new Y(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new Y(.02,"exhaustionGainGrandPrixModifier")),this.globalVar.modifiers.push(new Y(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalVar.modifiers.push(new Y(25,"grandPrixBreedLevelRequiredModifier")),this.globalVar.modifiers.push(new Y(.5,"weatherMoraleBoostModifier")),this.globalVar.modifiers.push(new Y(.03,"focusMoraleLossModifier")),this.globalVar.modifiers.push(new Y(.02,"burstMoraleBoostModifier")),this.globalVar.modifiers.push(new Y(.01,"stumbleMoraleLossModifier")),this.globalVar.modifiers.push(new Y(.1,"segmentCompleteMoraleBoostModifier")),this.globalVar.modifiers.push(new Y(25,"abilityLevelCapModifier")),this.globalVar.modifiers.push(new Y(1.5,"feedingFrenzyPositiveModifier")),this.globalVar.modifiers.push(new Y(.9,"feedingFrenzyNegativeModifier")),this.globalVar.modifiers.push(new Y(20,"maxDriftAmountModifier")),this.globalVar.modifiers.push(new Y(4,"relayAbilityXpGainModifier")),this.globalVar.modifiers.push(new Y(25,"maximumTraitNegativePercentModifier"));var e=.3,i=.1,l=1.025,c=1.05,d=.975,v=.95;this.globalVar.modifiers.push(new Y(e*l,"horseDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i,"horseDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5.5,"horseDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1,"horseDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5*v,"horseDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5,"horseDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e*c,"cheetahDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(1.1*i,"cheetahDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(4.5,"cheetahDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1,"cheetahDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5,"cheetahDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5*d,"cheetahDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5*v,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e,"hareDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i*c,"hareDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5,"hareDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1*l,"hareDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5*v,"hareDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5,"hareDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e*l,"warthogDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i,"warthogDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5*c,"warthogDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1*l,"warthogDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5*d,"warthogDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5*v,"warthogDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e,"monkeyDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i*v,"monkeyDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5,"monkeyDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1.1,"monkeyDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5*c,"monkeyDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5,"monkeyDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e,"goatDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i*l,"goatDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5*l,"goatDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1*d,"goatDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5*d,"goatDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5.5,"goatDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e*v,"geckoDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i,"geckoDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5*c,"geckoDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1,"geckoDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5.5,"geckoDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5,"geckoDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e*d,"dolphinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i*l,"dolphinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5,"dolphinDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1.1,"dolphinDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5,"dolphinDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5*d,"dolphinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(.33,"sharkDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i,"sharkDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5*d,"sharkDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1*l,"sharkDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5*v,"sharkDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5*v,"sharkDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e*d,"octopusDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i*v,"octopusDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5,"octopusDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1.1,"octopusDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5*l,"octopusDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5,"octopusDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(.27,"whaleDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i,"whaleDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5*c,"whaleDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1*c,"whaleDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5.5,"whaleDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5*v,"whaleDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e*v,"penguinDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i,"penguinDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5,"penguinDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1*l,"penguinDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5,"penguinDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5*c,"penguinDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e*d,"caribouDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i*v,"caribouDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5.5,"caribouDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1*l,"caribouDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5*c,"caribouDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5,"caribouDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e,"salamanderDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i*l,"salamanderDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5*v,"salamanderDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1,"salamanderDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(5*c,"salamanderDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5,"salamanderDefaultAdaptabilityModifier")),this.globalVar.modifiers.push(new Y(e*c,"foxDefaultMaxSpeedModifier")),this.globalVar.modifiers.push(new Y(i,"foxDefaultAccelerationModifier")),this.globalVar.modifiers.push(new Y(5*d,"foxDefaultStaminaModifier")),this.globalVar.modifiers.push(new Y(1*l,"foxDefaultPowerModifier")),this.globalVar.modifiers.push(new Y(4.5,"foxDefaultFocusModifier")),this.globalVar.modifiers.push(new Y(5*c,"foxDefaultAdaptabilityModifier"))}InitializeAnimals(){var e=new A5;e.name="Horse",e.isAvailable=!0,this.calculateAnimalRacingStats(e);var i=new I5;i.name="Monkey",this.calculateAnimalRacingStats(i);var r=new E5;r.name="Hare",this.calculateAnimalRacingStats(r);var a=new MD;a.name="Warthog",this.calculateAnimalRacingStats(a);var o=new P5;o.name="Cheetah",this.calculateAnimalRacingStats(o);var s=new V5;s.name="Goat",this.calculateAnimalRacingStats(s);var l=new O5;l.name="Gecko",this.calculateAnimalRacingStats(l);var c=new N5;c.name="Dolphin",this.calculateAnimalRacingStats(c);var u=new F5;u.name="Shark",this.calculateAnimalRacingStats(u);var d=new B5;d.name="Octopus",this.calculateAnimalRacingStats(d);var v=new kD;v.name="Whale",this.calculateAnimalRacingStats(v);var m=new L5;m.name="Penguin",this.calculateAnimalRacingStats(m);var b=new U5;b.name="Caribou",this.calculateAnimalRacingStats(b);var y=new H5;y.name="Salamander",this.calculateAnimalRacingStats(y);var C=new G5;C.name="Fox",this.calculateAnimalRacingStats(C),this.globalVar.animals.push(e),this.globalVar.animals.push(o),this.globalVar.animals.push(r),this.globalVar.animals.push(s),this.globalVar.animals.push(i),this.globalVar.animals.push(l),this.globalVar.animals.push(c),this.globalVar.animals.push(u),this.globalVar.animals.push(d),this.globalVar.animals.push(m),this.globalVar.animals.push(b),this.globalVar.animals.push(y),this.globalVar.animals.push(C),this.globalVar.animals.push(a),this.globalVar.animals.push(v)}InitializeRelayTeams(){var e=new lf;e.isPrimaryDeck=!0,e.isAvailable=!0,e.name="Relay Team 1",e.deckNumber=1;var i=this.globalVar.animals.find(o=>"Horse"===o.getAnimalType());void 0!==i&&e.selectedAnimals.push(i),this.globalVar.animalDecks.push(e);for(var r=0;r<3;r++){var a=new lf;a.isAvailable=!0,a.deckNumber=r+2,a.name="Relay Team "+a.deckNumber,this.globalVar.animalDecks.push(a)}}InitializeTokenShop(){this.globalVar.tokenShop=[];var e=new la,i=[],r=10,a=new tt;a.name="Apples",a.purchasePrice.push(this.getTokenResourceValue(1)),a.basePurchasePrice.push(this.getTokenResourceValue(1)),a.shortDescription="+1 Acceleration to a single animal",a.numberPurchasing=r,a.canHaveMultiples=!0,a.type=G.Food,a.infiniteAmount=!0,i.push(a);var o=new tt;o.name="Bananas",o.shortDescription="+1 Speed to a single animal",o.purchasePrice.push(this.getTokenResourceValue(1)),o.basePurchasePrice.push(this.getTokenResourceValue(1)),o.canHaveMultiples=!0,o.numberPurchasing=r,o.type=G.Food,o.infiniteAmount=!0,i.push(o);var s=new tt;s.name="Strawberries",s.shortDescription="+1 Endurance to a single animal",s.purchasePrice.push(this.getTokenResourceValue(1)),s.basePurchasePrice.push(this.getTokenResourceValue(1)),s.canHaveMultiples=!0,s.numberPurchasing=r,s.type=G.Food,s.infiniteAmount=!0,i.push(s);var l=new tt;l.name="Carrots",l.shortDescription="+1 Power to a single animal",l.purchasePrice.push(this.getTokenResourceValue(1)),l.basePurchasePrice.push(this.getTokenResourceValue(1)),l.canHaveMultiples=!0,l.numberPurchasing=r,l.type=G.Food,l.infiniteAmount=!0,i.push(l);var c=new tt;c.name="Turnips",c.shortDescription="+1 Focus to a single animal",c.purchasePrice.push(this.getTokenResourceValue(1)),c.basePurchasePrice.push(this.getTokenResourceValue(1)),c.canHaveMultiples=!0,c.numberPurchasing=r,c.type=G.Food,c.infiniteAmount=!0,i.push(c);var u=new tt;u.name="Oranges",u.shortDescription="+1 Adaptability to a single animal",u.purchasePrice.push(this.getTokenResourceValue(1)),u.basePurchasePrice.push(this.getTokenResourceValue(1)),u.canHaveMultiples=!0,u.numberPurchasing=r,u.type=G.Food,u.infiniteAmount=!0,i.push(u);var d=new tt;d.name="Circuit Race Breed XP Gain Certificate",d.shortDescription=this.getItemDescription(d.name),d.purchasePrice.push(this.getTokenResourceValue(1)),d.basePurchasePrice.push(this.getTokenResourceValue(1)),d.canHaveMultiples=!0,d.type=G.Consumable,d.infiniteAmount=!0,i.push(d);var v=new tt;v.name="Free Race Breed XP Gain Certificate",v.shortDescription=this.getItemDescription(v.name),v.purchasePrice.push(this.getTokenResourceValue(1)),v.basePurchasePrice.push(this.getTokenResourceValue(1)),v.canHaveMultiples=!0,v.type=G.Consumable,v.infiniteAmount=!0,i.push(v),e.name="Tier 1",e.itemList=i,this.globalVar.tokenShop.push(e);var m=new la,b=[],y=new tt;y.name="Mangoes",y.shortDescription="+1 Breed Level to a single animal",y.purchasePrice.push(this.getTokenResourceValue(1)),y.basePurchasePrice.push(this.getTokenResourceValue(1)),y.canHaveMultiples=!0,y.numberPurchasing=2,y.type=G.Food,y.infiniteAmount=!0,b.push(y);var C=new tt;C.name="Coins",C.shortDescription="",C.purchasePrice.push(this.getTokenResourceValue(1)),C.basePurchasePrice.push(this.getTokenResourceValue(1)),C.canHaveMultiples=!0,C.numberPurchasing=5e3,C.type=G.Resources,C.infiniteAmount=!0,b.push(C);var k=new tt;k.name="Diminishing Returns Increase Certificate",k.shortDescription=this.getItemDescription(k.name),k.purchasePrice.push(this.getTokenResourceValue(4)),k.basePurchasePrice.push(this.getTokenResourceValue(4)),k.canHaveMultiples=!0,k.type=G.Consumable,k.infiniteAmount=!0,b.push(k);var w=new tt;w.name="Training Breed XP Gain Certificate",w.shortDescription=this.getItemDescription(w.name),w.purchasePrice.push(this.getTokenResourceValue(2)),w.basePurchasePrice.push(this.getTokenResourceValue(2)),w.canHaveMultiples=!0,w.type=G.Consumable,w.infiniteAmount=!0,b.push(w),m.name="Tier 2",m.itemList=b,this.globalVar.tokenShop.push(m);var R=new la,z=[],q=new tt;q.name=this.getEquipmentName(it.scaryMask),q.shortDescription=this.getEquipmentDescription(q.name),q.purchasePrice.push(this.getTokenResourceValue(7)),q.canHaveMultiples=!0,q.infiniteAmount=!0,q.type=G.Equipment,z.push(q);var j=new tt;j.name=this.getEquipmentName(it.runningShoes),j.shortDescription=this.getEquipmentDescription(j.name),j.purchasePrice.push(this.getTokenResourceValue(7)),j.canHaveMultiples=!0,j.infiniteAmount=!0,j.type=G.Equipment,z.push(j);var ye=new tt;ye.name=this.getEquipmentName(it.incense),ye.shortDescription=this.getEquipmentDescription(ye.name),ye.purchasePrice.push(this.getTokenResourceValue(7)),ye.canHaveMultiples=!0,ye.infiniteAmount=!0,ye.type=G.Equipment,z.push(ye);var ue=new tt;ue.name=this.getEquipmentName(it.athleticTape),ue.shortDescription=this.getEquipmentDescription(ue.name),ue.purchasePrice.push(this.getTokenResourceValue(7)),ue.canHaveMultiples=!0,ue.infiniteAmount=!0,ue.type=G.Equipment,z.push(ue),R.name="Tier 3",R.itemList=z,this.globalVar.tokenShop.push(R)}InitializeShop(){this.globalVar.shop=[];var e=new la,i=[],u=new tt;u.name="Cheetah",u.purchasePrice.push(new ie("Coins",1e3)),u.canHaveMultiples=!1,u.type=G.Animal,i.push(u);var d=new tt;d.name="Warthog",d.purchasePrice.push(new ie("Coins",1e3)),d.canHaveMultiples=!1,d.type=G.Animal,i.push(d);var v=new tt;v.name="Goat",v.purchasePrice.push(new ie("Coins",2500)),v.canHaveMultiples=!1,v.type=G.Animal,v.isAvailable=!1,i.push(v);var m=new tt;m.name="Gecko",m.purchasePrice.push(new ie("Coins",2500)),m.canHaveMultiples=!1,m.type=G.Animal,m.isAvailable=!1,i.push(m);var b=new tt;b.name="Shark",b.purchasePrice.push(new ie("Coins",5e3)),b.canHaveMultiples=!1,b.type=G.Animal,b.isAvailable=!1,i.push(b);var y=new tt;y.name="Octopus",y.purchasePrice.push(new ie("Coins",5e3)),y.canHaveMultiples=!1,y.type=G.Animal,y.isAvailable=!1,i.push(y);var C=new tt;C.name="Caribou",C.purchasePrice.push(new ie("Coins",1e4)),C.canHaveMultiples=!1,C.type=G.Animal,C.isAvailable=!1,i.push(C);var k=new tt;k.name="Fox",k.purchasePrice.push(new ie("Coins",1e4)),k.canHaveMultiples=!1,k.type=G.Animal,k.isAvailable=!1,i.push(k),e.name="Animals",e.itemList=i,this.globalVar.shop.push(e);var w=new la,R=[],z=10,q=new tt;q.name="Apples",q.shortDescription="+1 Acceleration to a single animal",q.purchasePrice.push(new ie("Coins",z)),q.canHaveMultiples=!0,q.type=G.Food,q.infiniteAmount=!0,R.push(q);var j=new tt;j.name="Bananas",j.shortDescription="+1 Speed to a single animal",j.purchasePrice.push(new ie("Coins",z)),j.canHaveMultiples=!0,j.type=G.Food,j.infiniteAmount=!0,R.push(j);var ye=new tt;ye.name="Strawberries",ye.shortDescription="+1 Endurance to a single animal",ye.purchasePrice.push(new ie("Coins",z)),ye.canHaveMultiples=!0,ye.type=G.Food,ye.infiniteAmount=!0,R.push(ye);var ue=new tt;ue.name="Carrots",ue.shortDescription="+1 Power to a single animal",ue.purchasePrice.push(new ie("Coins",z)),ue.canHaveMultiples=!0,ue.type=G.Food,ue.infiniteAmount=!0,R.push(ue);var ce=new tt;ce.name="Turnips",ce.shortDescription="+1 Focus to a single animal",ce.purchasePrice.push(new ie("Coins",z)),ce.canHaveMultiples=!0,ce.type=G.Food,ce.infiniteAmount=!0,R.push(ce);var ve=new tt;ve.name="Oranges",ve.shortDescription="+1 Adaptability to a single animal",ve.purchasePrice.push(new ie("Coins",z)),ve.canHaveMultiples=!0,ve.type=G.Food,ve.infiniteAmount=!0,R.push(ve);var _e=new tt;_e.name="Mangoes",_e.shortDescription="+1 Breed Level to a single animal",_e.purchasePrice.push(new ie("Coins",100)),_e.canHaveMultiples=!0,_e.type=G.Food,_e.infiniteAmount=!0,R.push(_e);var Ie=new tt;Ie.name="Gingko Leaves",Ie.shortDescription="Reset Breed Level for a single animal back to 1 and remove all incubator upgrade gains. Increase Breed XP Gain by 1000% until Breed Level returns to what it was.",Ie.purchasePrice.push(new ie("Coins",3500)),Ie.canHaveMultiples=!0,Ie.type=G.Food,Ie.infiniteAmount=!0,Ie.isAvailable=!1,R.push(Ie),w.name="Food",w.itemList=R,this.globalVar.shop.push(w);var st=new la,mt=[];this.globalVar.trainingOptions.filter(hi=>!hi.isAvailable).forEach(hi=>{var fi=new tt;fi.name=hi.trainingName,fi.shortDescription=hi.getStatGainDescription(),fi.purchasePrice.push(new ie("Coins",hi.purchasePrice)),fi.canHaveMultiples=!1,fi.type=G.Training,(hi.facilitySize===vt.Medium||hi.facilitySize===vt.Large)&&(fi.isAvailable=!1,fi.additionalIdentifier=hi.facilitySize.toString()),mt.push(fi)}),st.name="Trainings",st.itemList=mt,this.globalVar.shop.push(st);var ct=new la,bt=[];this.globalVar.animals.forEach(hi=>{hi.availableAbilities.forEach(fi=>{if(!fi.isAbilityPurchased){var Ei=new tt;Ei.name=hi.getAnimalType()+" Ability: "+fi.name,Ei.purchasePrice.push(new ie("Coins",fi.purchasePrice)),Ei.canHaveMultiples=!1,Ei.type=G.Ability,Ei.additionalIdentifier=fi.name,Ei.isAvailable=hi.isAvailable,bt.push(Ei)}})}),ct.name="Abilities",ct.itemList=bt,this.globalVar.shop.push(ct);var wt=new la,pt=[],J=new tt;J.name="Stopwatch",J.purchasePrice.push(this.getMedalResourceValue(10)),J.basePurchasePrice.push(this.getMedalResourceValue(10)),J.quantityMultiplier=2.5,J.totalShopQuantity=2,J.canHaveMultiples=!0,J.type=G.Specialty,pt.push(J);var T=new tt;T.name="Animal Handler",T.purchasePrice.push(this.getCoinsResourceValue(2e3)),T.basePurchasePrice.push(this.getCoinsResourceValue(2e3)),T.quantityAdditive=2e3,T.totalShopQuantity=20,T.canHaveMultiples=!0,T.type=G.Specialty,pt.push(T);var Ze=new tt;Ze.name="Course Maps",Ze.purchasePrice.push(this.getMedalResourceValue(2)),Ze.basePurchasePrice.push(this.getMedalResourceValue(2)),Ze.quantityMultiplier=2,Ze.totalShopQuantity=5,Ze.isAvailable=!1,Ze.canHaveMultiples=!0,Ze.type=G.Specialty,pt.push(Ze);var _i=new tt;_i.name="Stockbreeder",_i.purchasePrice.push(this.getCoinsResourceValue(500)),_i.basePurchasePrice.push(this.getCoinsResourceValue(500)),_i.canHaveMultiples=!1,_i.type=G.Specialty,pt.push(_i);var Rt=new tt;Rt.name="Team Manager",Rt.purchasePrice.push(this.getMedalResourceValue(3)),Rt.basePurchasePrice.push(this.getMedalResourceValue(3)),Rt.canHaveMultiples=!0,Rt.quantityMultiplier=2,Rt.totalShopQuantity=19,Rt.type=G.Specialty,pt.push(Rt);var Kt=new tt;Kt.name="Scouts",Kt.purchasePrice.push(this.getCoinsResourceValue(1e4)),Kt.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),Kt.canHaveMultiples=!1,Kt.isAvailable=!1,Kt.type=G.Specialty,pt.push(Kt);var Xe=new tt;Xe.name="Money Mark",Xe.purchasePrice.push(this.getCoinsResourceValue(500)),Xe.basePurchasePrice.push(this.getCoinsResourceValue(500)),Xe.canHaveMultiples=!1,Xe.type=G.Specialty,pt.push(Xe);var Ht=new tt;Ht.name="National Races",Ht.purchasePrice.push(this.getCoinsResourceValue(1e4)),Ht.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),Ht.canHaveMultiples=!1,Ht.isAvailable=!1,Ht.type=G.Specialty,pt.push(Ht);var ht,ui=new tt;ui.name="International Races",ui.purchasePrice.push(this.getCoinsResourceValue(5e4)),ui.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),ui.canHaveMultiples=!1,ui.isAvailable=!1,ui.type=G.Specialty,pt.push(ui),(ht=new tt).name="Incubator Upgrade Lv1",ht.purchasePrice.push(this.getCoinsResourceValue(5e3)),ht.basePurchasePrice.push(this.getCoinsResourceValue(5e3)),ht.canHaveMultiples=!1,ht.isAvailable=!1,ht.type=G.Specialty,pt.push(ht),(ht=new tt).name="Incubator Upgrade Lv2",ht.purchasePrice.push(this.getCoinsResourceValue(1e4)),ht.basePurchasePrice.push(this.getCoinsResourceValue(1e4)),ht.canHaveMultiples=!1,ht.isAvailable=!1,ht.type=G.Specialty,pt.push(ht),(ht=new tt).name="Incubator Upgrade Lv3",ht.purchasePrice.push(this.getCoinsResourceValue(25e3)),ht.basePurchasePrice.push(this.getCoinsResourceValue(25e3)),ht.canHaveMultiples=!1,ht.isAvailable=!1,ht.type=G.Specialty,pt.push(ht),(ht=new tt).name="Incubator Upgrade Lv4",ht.purchasePrice.push(this.getCoinsResourceValue(5e4)),ht.basePurchasePrice.push(this.getCoinsResourceValue(5e4)),ht.canHaveMultiples=!1,ht.isAvailable=!1,ht.type=G.Specialty,pt.push(ht);var Gi=new tt;Gi.name="Whistle",Gi.purchasePrice.push(this.getCoinsResourceValue(2500)),Gi.basePurchasePrice.push(this.getCoinsResourceValue(2500)),Gi.totalShopQuantity=1,Gi.canHaveMultiples=!1,Gi.isAvailable=!1,Gi.type=G.Specialty,pt.push(Gi);var qi=new tt;qi.name="Golden Whistle",qi.purchasePrice.push(this.getCoinsResourceValue(15e3)),qi.basePurchasePrice.push(this.getCoinsResourceValue(15e3)),qi.totalShopQuantity=1,qi.canHaveMultiples=!1,qi.isAvailable=!1,qi.type=G.Specialty,pt.push(qi);var yi=new tt;yi.name="Talent Point Voucher",yi.purchasePrice.push(this.getMedalResourceValue(25)),yi.basePurchasePrice.push(this.getMedalResourceValue(25)),yi.infiniteAmount=!0,yi.canHaveMultiples=!0,yi.quantityAdditive=25,yi.isAvailable=!1,yi.type=G.Specialty,pt.push(yi),wt.name="Specialty",wt.itemList=pt,this.globalVar.shop.push(wt);var mn=new la,xi=[],zi=new tt;zi.name=this.getEquipmentName(it.headband),zi.shortDescription=this.getEquipmentDescription(zi.name),zi.purchasePrice.push(this.getCoinsResourceValue(1e3)),zi.canHaveMultiples=!0,zi.infiniteAmount=!0,zi.type=G.Equipment,xi.push(zi);var ji=new tt;ji.name=this.getEquipmentName(it.pendant),ji.shortDescription=this.getEquipmentDescription(ji.name),ji.purchasePrice.push(this.getCoinsResourceValue(1e3)),ji.canHaveMultiples=!0,ji.infiniteAmount=!0,ji.type=G.Equipment,xi.push(ji);var Vi=new tt;Vi.name=this.getEquipmentName(it.blinders),Vi.shortDescription=this.getEquipmentDescription(Vi.name),Vi.purchasePrice.push(this.getCoinsResourceValue(1e3)),Vi.canHaveMultiples=!0,Vi.infiniteAmount=!0,Vi.type=G.Equipment,xi.push(Vi);var di=new tt;di.name=this.getEquipmentName(it.quickSnack),di.shortDescription=this.getEquipmentDescription(di.name),di.purchasePrice.push(this.getCoinsResourceValue(1e3)),di.canHaveMultiples=!0,di.infiniteAmount=!0,di.type=G.Equipment,xi.push(di);var dt=new tt;dt.name=this.getEquipmentName(it.redBaton),dt.shortDescription=this.getEquipmentDescription(dt.name),dt.purchasePrice.push(this.getCoinsResourceValue(2500)),dt.canHaveMultiples=!0,dt.infiniteAmount=!0,dt.isAvailable=!1,dt.type=G.Equipment,xi.push(dt);var gt=new tt;gt.name=this.getEquipmentName(it.blueBaton),gt.shortDescription=this.getEquipmentDescription(gt.name),gt.purchasePrice.push(this.getCoinsResourceValue(2500)),gt.canHaveMultiples=!0,gt.infiniteAmount=!0,gt.isAvailable=!1,gt.type=G.Equipment,xi.push(gt);var ni=new tt;ni.name=this.getEquipmentName(it.violetBaton),ni.shortDescription=this.getEquipmentDescription(ni.name),ni.purchasePrice.push(this.getCoinsResourceValue(2500)),ni.canHaveMultiples=!0,ni.infiniteAmount=!0,ni.isAvailable=!1,ni.type=G.Equipment,xi.push(ni);var ei=new tt;ei.name=this.getEquipmentName(it.orangeBaton),ei.shortDescription=this.getEquipmentDescription(ei.name),ei.purchasePrice.push(this.getCoinsResourceValue(2500)),ei.canHaveMultiples=!0,ei.infiniteAmount=!0,ei.isAvailable=!1,ei.type=G.Equipment,xi.push(ei);var Pi=new tt;Pi.name=this.getEquipmentName(it.greenBaton),Pi.shortDescription=this.getEquipmentDescription(Pi.name),Pi.purchasePrice.push(this.getCoinsResourceValue(2500)),Pi.canHaveMultiples=!0,Pi.infiniteAmount=!0,Pi.isAvailable=!1,Pi.type=G.Equipment,xi.push(Pi);var tn=new tt;tn.name=this.getEquipmentName(it.yellowBaton),tn.shortDescription=this.getEquipmentDescription(tn.name),tn.purchasePrice.push(this.getCoinsResourceValue(2500)),tn.canHaveMultiples=!0,tn.infiniteAmount=!0,tn.isAvailable=!1,tn.type=G.Equipment,xi.push(tn),mn.name="Equipment",mn.itemList=xi,this.globalVar.shop.push(mn)}getEquipmentName(e){return e===it.headband?"Headband":e===it.pendant?"Pendant":e===it.blinders?"Blinders":e===it.quickSnack?"Quick Snack":e===it.carrotOnAStick?"Carrot on a Stick":e===it.redBaton?"Red Baton":e===it.blueBaton?"Blue Baton":e===it.violetBaton?"Violet Baton":e===it.yellowBaton?"Yellow Baton":e===it.greenBaton?"Green Baton":e===it.orangeBaton?"Orange Baton":e===it.scaryMask?"Scary Mask":e===it.runningShoes?"Running Shoes":e===it.incense?"Incense":e===it.athleticTape?"Athletic Tape":""}getEquipmentEnum(e){return"Headband"===e?it.headband:"Pendant"===e?it.pendant:"Blinders"===e?it.blinders:"Quick Snack"===e?it.quickSnack:"Carrot on a Stick"===e?it.carrotOnAStick:"Red Baton"===e?it.redBaton:"Blue Baton"===e?it.blueBaton:"Violet Baton"===e?it.violetBaton:"Yellow Baton"===e?it.yellowBaton:"Green Baton"===e?it.greenBaton:"Orange Baton"===e?it.orangeBaton:"Scary Mask"===e?it.scaryMask:"Running Shoes"===e?it.runningShoes:"Incense"===e?it.incense:"Athletic Tape"===e?it.athleticTape:it.none}InitializeBarns(){if(null==this.globalVar.barns||0===this.globalVar.barns.length){this.globalVar.barns=[];var i=new Xm;if(i.barnNumber=1,i.isLocked=!1,i.size=vt.Small,i.purchasePrice=0,i.facilityUpgradePrice=500,i.upgradePrice=500,null!=this.globalVar.animals&&this.globalVar.animals.length>0){var r=this.globalVar.animals.find(s=>s.type===L.Horse);null!=r&&(r.associatedBarnNumber=i.barnNumber)}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.globalVar.barns.push(i);for(var a=2;a<=15;a++){var o=new Xm;o.barnNumber=a,o.isLocked=!0,o.purchasePrice=500*(a-1),o.facilityUpgradePrice=500,o.size=vt.Small,this.globalVar.barns.push(o)}}}InitializeGlobalTrainingOptions(){this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.ShortTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Sprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.TrailRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.MoveLogs)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Footwork)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.PracticeCommands)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.ScentTraining)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.SmallWagonTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Sidestep)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.MediumTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.UphillRun)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Puzzles)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.MoveRocks)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.LateralVerticalDrill)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.DodgeBall)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.BurstPractice)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Acrobatics)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.LongTrackRunning)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.VehicleTow)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.LogJump)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Meditation)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.WindSprints)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.GreenwayHike)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.Marathon)),this.globalVar.trainingOptions.push(this.initializeService.initializeTraining(Fe.AgilityCourse))}IncreaseCircuitRank(){var e=this.globalVar.circuitRank,i=e.replace(/([A-Z])[^A-Z]*$/,function(c){var u=c.charCodeAt(0);return 65===u?String.fromCharCode(u)+"Z":String.fromCharCode(--u)}),r=!1;this.utilityService.getNumericValueOfCircuitRank(this.globalVar.monoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.duoRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),this.utilityService.getNumericValueOfCircuitRank(this.globalVar.rainbowRank)>=this.utilityService.getNumericValueOfCircuitRank(e)&&(r=!0),r&&(this.globalVar.notifications.isNewSpecialRaceAvailable=!0),this.globalVar.circuitRank=i;var l=this.checkCircuitRankRewards();return this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),l}IncreaseLocalRaceRank(e){var i="";e===Ut.Mono&&(i=this.globalVar.monoRank),e===Ut.Duo&&(i=this.globalVar.duoRank),e===Ut.Rainbow&&(i=this.globalVar.rainbowRank);var r=i.replace(/([A-Z])[^A-Z]*$/,function(a){var o=a.charCodeAt(0);return 65===o?String.fromCharCode(o)+"Z":String.fromCharCode(--o)});e===Ut.Mono&&(this.globalVar.monoRank=r,this.GenerateMonoRaces(this.globalVar.monoRank)),e===Ut.Duo&&(this.globalVar.duoRank=r,this.GenerateDuoRaces(this.globalVar.duoRank)),e===Ut.Rainbow&&(this.globalVar.rainbowRank=r,this.GenerateRainbowRaces(this.globalVar.rainbowRank))}increaseGrandPrixRaceRank(){if(null!=this.globalVar.eventRaceData){var i=this.globalVar.eventRaceData.rank.replace(/([A-Z])[^A-Z]*$/,function(r){var a=r.charCodeAt(0);return 65===a?String.fromCharCode(a)+"Z":String.fromCharCode(--a)});this.globalVar.eventRaceData.rank=i,this.initialGrandPrixSetup(this.globalVar.eventRaceData.rank),this.globalVar.eventRaceData.initialSetupComplete=!0,this.globalVar.notifications.isEventRaceNowActive=!0}}getRewardReceiveText(e){return this.globalVar.settings.get("useNumbersForCircuitRank")?"Reach circuit rank "+e+" to receive: \n":"Reach circuit rank "+this.utilityService.getCircuitRankFromNumericValue(e)+" to receive: \n"}checkCircuitRankRewards(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=["",""];if(1===e&&(this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(2)+"Mono Races"),2===e&&(this.globalVar.unlockables.set("monoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,i=["Mono Race",this.utilityService.getSanitizedHtml("A new race type has been unlocked! Take part in a Mono Race where you run an extended race as only one course type. Progressing through this race type generates new interest in your facility, which means it's time to make some upgrades. Gain Facility Level points from winning these races that increase your Diminishing Returns max value. <br/> <br/><em>Select this race and others like it by choosing the 'Special Race' option from the 'Races' menu.</em>")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(3)+"Monkey"),3===e){var r=this.globalVar.animals.find(ce=>ce.type===L.Monkey);if(null!=r&&(r.isAvailable=!0,this.unlockAnimalAbilities(r),this.unlockOtherRaceCourseTypeAnimals(r.raceCourseType),null!=(a=this.globalVar.animalDecks.find(ce=>ce.isPrimaryDeck)))){var o=!1;a.selectedAnimals.forEach(ce=>{ce.raceCourseType===(null==r?void 0:r.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(r)}i=["Monkey",this.getAnimalDescription("Monkey")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(4)+"Coaching"}else if(4===e){if(this.globalVar.unlockables.set("coaching",!0),null!=(s=this.globalVar.shop.find(ce=>"Specialty"===ce.name))){var l=s.itemList.find(ce=>"Whistle"===ce.name);null!=l&&(l.isAvailable=!0)}i=["Coaching","Take charge of your animal's training by giving them some coaching yourself. Visit a barn with an animal assigned and select 'Coach' to get started."];var c=500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(5)+c+" Coins"}else if(5===e)c=500,null==(u=this.globalVar.resources.find(ve=>"Coins"===ve.name))?this.globalVar.resources.push(new ie("Coins",c)):u.amount+=c,i=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(6)+"1 Team Manager";else if(6===e){c=1,null==(u=this.globalVar.resources.find(_e=>"Team Manager"===_e.name))?(this.globalVar.resources.push(new ie("Team Manager",c,G.Specialty)),null!=(d=this.globalVar.animalDecks.find(_e=>_e.isPrimaryDeck))&&(d.autoRunFreeRace=!0)):u.amount+=c,i=[c+" Team Manager","As your popularity has grown, you've attracted some new faces to your racing facility. Each Team Manager you receive will automatically run 1 free race per reset period. Buy more from the Shop."];var v=1e3;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(7)+"Barn Specializations"}else if(7===e)this.globalVar.unlockables.set("barnSpecializations",!0),i=["Barn Specializations","As your training facility grows, so should your barns. At barn upgrade level 10, choose what direction you want your barn to progress in. Each option benefits your animals in different ways, so choose carefully."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(8)+"Headband";else if(8===e)c=1,null==(u=this.globalVar.resources.find(Ie=>"Headband"===Ie.name))?this.globalVar.resources.push(new ie("Headband",c,G.Equipment)):u.amount+=c,i=[c+" Headband","Equipment can be handled when viewing an animal from the Animals tab."],v=1e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(9)+v+" Coins";else if(9===e)c=1e3,null==(u=this.globalVar.resources.find(_e=>"Coins"===_e.name))?this.globalVar.resources.push(new ie("Coins",c)):u.amount+=c,i=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(10)+"Hare";else if(10===e){var m=this.globalVar.animals.find(ve=>ve.type===L.Hare);null!=m&&(m.isAvailable=!0,this.unlockAnimalAbilities(m)),this.sortAnimalOrder(),i=["Hare",this.getAnimalDescription("Hare")],c=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(12)+c+" Stat Increasing Food"}else if(12===e)this.increaseAllFood(c=20),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(13)+"Barn Row 2";else if(13===e){this.globalVar.unlockables.set("barnRow2",!0),i=["Barn Row 2",""];var b=1;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(14)+"Attraction Specialization"}else if(14===e)this.globalVar.unlockables.set("attractionSpecialization",!0),i=["Attraction Specialization",this.getSpecializationDescription("Attraction")+"<br/><br/><em>Barn Specializations are available to select once you upgrade a barn to level 10.</em>"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(15)+"Dolphin";else if(15===e){var y=this.globalVar.animals.find(ce=>ce.type===L.Dolphin);null!=y&&(y.isAvailable=!0,this.unlockAnimalAbilities(y),this.unlockOtherRaceCourseTypeAnimals(y.raceCourseType),null!=(a=this.globalVar.animalDecks.find(ve=>ve.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(_e=>{_e.raceCourseType===(null==y?void 0:y.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(y))),this.sortAnimalOrder(),i=["Dolphin",this.getAnimalDescription("Dolphin")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(16)+"1 Pendant"}else if(16===e)c=1,null==(u=this.globalVar.resources.find(_e=>"Pendant"===_e.name))?this.globalVar.resources.push(new ie("Pendant",c,G.Equipment)):u.amount+=c,i=[c+" Pendant","Equipment can be handled when viewing an animal from the Animals tab."],c=5,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(18)+c+" Renown";else if(18===e)b=5,null==(C=this.globalVar.resources.find(ve=>"Renown"===ve.name))?this.globalVar.resources.push(new ie("Renown",b)):C.amount+=b,i=[b+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(20)+"Grand Prix";else if(20===e){var d;this.globalVar.unlockables.set("grandPrix",!0),null!=(d=this.globalVar.animalDecks.find(_e=>_e.isPrimaryDeck))&&(d.isEventDeck=!0),i=["Grand Prix","Now that you've climbed the ranks and your racing team has turned some heads, you've received an invite to the Grand Prix invitational. Twice per week, a marathon style race runs over multiple days. Check the 'Event Races' tab to see more info."],c=50,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(22)+c+" Stat Increasing Food"}else 22===e?(this.increaseAllFood(c=50),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],v=1500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(23)+v+" Coins"):23===e&&(c=1500,null==(u=this.globalVar.resources.find(_e=>"Coins"===_e.name))?this.globalVar.resources.push(new ie("Coins",c)):u.amount+=c,i=[c+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(25)+"Whale");if(25===e){var k=this.globalVar.animals.find(ce=>ce.type===L.Whale);null!=k&&(k.isAvailable=!0,this.unlockAnimalAbilities(k)),this.sortAnimalOrder(),i=["Whale",this.getAnimalDescription("Whale")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(27)+"Duo Races"}else if(27===e)this.globalVar.unlockables.set("duoRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,this.unlockTier2ShopItems(),i=["Duo Races","A new race type has been unlocked! Race in pairs to complete this long distance race. Success here will generate more interest for your facility, this time drawing in curious researchers. Gain Research Levels that improve incubator results."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(29)+"Barn Row 3";else if(29===e){this.globalVar.unlockables.set("barnRow3",!0),i=["Barn Row 3",""];var w=2500;this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(30)+w+" Coins"}else if(30===e){var R=2500;null==(u=this.globalVar.resources.find(_e=>"Coins"===_e.name))?this.globalVar.resources.push(new ie("Coins",R)):u.amount+=R,i=[R+" Coins",""],c=20,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(32)+c+" Mangoes"}else if(32===e)c=1,null==(u=this.globalVar.resources.find(_e=>"Blue Baton"===_e.name))?this.globalVar.resources.push(new ie("Blue Baton",c,G.Equipment)):u.amount+=c,i=[c+" Blue Baton","Equipment can be handled when viewing an animal from the Animals tab."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(33)+20+" Mangoes";else if(33===e)c=20,null==(u=this.globalVar.resources.find(_e=>"Mangoes"===_e.name))?this.globalVar.resources.push(new ie("Mangoes",c,G.Food)):u.amount+=c,i=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(35)+"Penguin";else if(35===e){var q=this.globalVar.animals.find(ve=>ve.type===L.Penguin);null!=q&&(q.isAvailable=!0,this.unlockAnimalAbilities(q),this.unlockOtherRaceCourseTypeAnimals(q.raceCourseType),null!=(a=this.globalVar.animalDecks.find(_e=>_e.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(Ie=>{Ie.raceCourseType===(null==q?void 0:q.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(q))),this.sortAnimalOrder(),i=["Penguin",this.getAnimalDescription("Penguin")+"<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getTundraDescription()+"</em>")],w=3500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(37)+w+" Coins"}else if(37===e)R=3500,null==(u=this.globalVar.resources.find(_e=>"Coins"===_e.name))?this.globalVar.resources.push(new ie("Coins",R)):u.amount+=R,i=[R+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(38)+"5 Medals";else if(38===e)null==(u=this.globalVar.resources.find(ve=>"Medals"===ve.name))?this.globalVar.resources.push(new ie("Medals",5)):u.amount+=5,i=["5 Medals",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(40)+"Barn Row 4";else if(40===e)this.globalVar.unlockables.set("barnRow4",!0),i=["Barn Row 4",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(41)+"Research Center Specialization";else if(41===e)this.globalVar.unlockables.set("researchCenterSpecialization",!0),i=["Research Center Specialization",this.getSpecializationDescription("Research Center")],c=250,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(43)+c+" Stat Increasing Food";else if(43===e)this.increaseAllFood(c=250),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(45)+"Salamander";else if(45===e){var a,ye=this.globalVar.animals.find(ve=>ve.type===L.Salamander);null!=ye&&(ye.isAvailable=!0,this.unlockAnimalAbilities(ye),this.unlockOtherRaceCourseTypeAnimals(ye.raceCourseType),null!=(a=this.globalVar.animalDecks.find(_e=>_e.isPrimaryDeck))&&(o=!1,a.selectedAnimals.forEach(Ie=>{Ie.raceCourseType===(null==ye?void 0:ye.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(ye))),this.sortAnimalOrder(),i=["Salamander",this.getAnimalDescription("Salamander")+"<br/><br/>"+this.utilityService.getSanitizedHtml("<em>"+this.getVolcanicDescription()+"</em>")],b=10,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(47)+b+" Renown"}else if(47===e)b=10,null==(C=this.globalVar.resources.find(Ie=>"Renown"===Ie.name))?this.globalVar.resources.push(new ie("Renown",b)):C.amount+=b,i=[b+" Renown",""],R=15e3,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(50)+R+" Coins";else if(50===e)w=15e3,null==(u=this.globalVar.resources.find(_e=>"Coins"===_e.name))?this.globalVar.resources.push(new ie("Coins",w)):u.amount+=w,i=[w+" Coins",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(53)+"Rainbow Races";else if(53===e){var s;if(this.globalVar.unlockables.set("rainbowRace",!0),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,null!=(s=this.globalVar.shop.find(ve=>"Specialty"===ve.name))){var ue=s.itemList.find(ve=>"Talent Point Voucher"===ve.name);null!=ue&&(ue.isAvailable=!0)}i=["Rainbow Race","A new race type has been unlocked! This race requires a full team effort spanning all five course types. Your team of researchers are on hand for these races, coming up with more efficient ways to win. Gain Talent Tree Points that can be spent to improve various course types."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(55)+"Amethyst Orb"}else if(55===e)this.globalVar.resources.push(new ie("Amethyst Orb",1,G.Equipment)),this.globalVar.unlockables.set("orbs",!0),i=["Amethyst Orb","You receive a glowing violet orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(58)+"Barn Row 5";else if(58===e)this.globalVar.unlockables.set("barnRow5",!0),i=["Barn Row 5",""],b=1,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(60)+"Sapphire Orb";else if(60===e)this.globalVar.resources.push(new ie("Sapphire Orb",1,G.Equipment)),i=["Sapphire Orb","You receive a glowing blue orb. What it does is a mystery."],c=100,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(62)+c+" Mangoes";else if(62===e){var u;c=100,null==(u=this.globalVar.resources.find(_e=>"Mangoes"===_e.name))?this.globalVar.resources.push(new ie("Mangoes",c,G.Food)):u.amount+=c,i=[c+" Mangoes",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(65)+"Amber Orb"}else if(65===e)this.globalVar.resources.push(new ie("Amber Orb",1,G.Equipment)),i=["Amber Orb","You receive a glowing orange orb. What it does is a mystery."],c=25,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(67)+c+" Renown";else if(67===e){var C;b=25,null==(C=this.globalVar.resources.find(_e=>"Renown"===_e.name))?this.globalVar.resources.push(new ie("Renown",b)):C.amount+=b,i=[b+" Renown",""],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(70)+"Topaz Orb"}else 70===e?(this.globalVar.resources.push(new ie("Topaz Orb",1,G.Equipment)),i=["Topaz Orb","You receive a glowing yellow orb. What it does is a mystery."],c=500,this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(73)+c+" Stat Increasing Food Items"):73===e?(this.increaseAllFood(c=500),i=[c+" Stat Increasing Food",c+" Apples, Bananas, Oranges, Turnips, Carrots, and Strawberries"],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(75)+"Emerald Orb"):75===e?(this.globalVar.resources.push(new ie("Emerald Orb",1,G.Equipment)),i=["Emerald Orb","You receive a glowing green orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(78)+"Ruby Orb"):78===e?(this.globalVar.resources.push(new ie("Ruby Orb",1,G.Equipment)),i=["Ruby Orb","You receive a glowing red orb. What it does is a mystery."],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(79)+"The Pinnacle"):79===e&&(this.globalVar.unlockables.set("thePinnacle",!1),this.globalVar.notifications.isNewSpecialRaceAvailable=!0,i=["The Pinnacle",this.utilityService.getSanitizedHtml("A new race type has been unlocked! The Pinnacle is an old and mysterious fortress. Researchers have struggled to map out its interior due to the ever changing terrain and constantly shifting weather. Your team has been contracted out to help map the area out. <br/> As you race through each floor, you notice that you can insert the Orbs you have received into braziers to activate them. This increases your Orb level, allowing you to further power them up. <br/> <br/><em>Select this race and others like it by choosing the 'Special Race' option from the 'Races' menu. <b>This race is not implemented yet but will be soon!</b></em>")],this.globalVar.circuitRankUpRewardDescription=this.getRewardReceiveText(80)+"More Coming Soon!");return i}increaseAllFood(e){var i=this.globalVar.resources.find(c=>"Apples"===c.name);null==i?this.globalVar.resources.push(new ie("Apples",e,G.Food)):i.amount+=e;var r=this.globalVar.resources.find(c=>"Bananas"===c.name);null==r?this.globalVar.resources.push(new ie("Bananas",e,G.Food)):r.amount+=e;var a=this.globalVar.resources.find(c=>"Oranges"===c.name);null==a?this.globalVar.resources.push(new ie("Oranges",e,G.Food)):a.amount+=e;var o=this.globalVar.resources.find(c=>"Strawberries"===c.name);null==o?this.globalVar.resources.push(new ie("Strawberries",e,G.Food)):o.amount+=e;var s=this.globalVar.resources.find(c=>"Carrots"===c.name);null==s?this.globalVar.resources.push(new ie("Carrots",e,G.Food)):s.amount+=e;var l=this.globalVar.resources.find(c=>"Turnips"===c.name);null==l?this.globalVar.resources.push(new ie("Turnips",e,G.Food)):l.amount+=e}GenerateCircuitRacesForRank(e){this.globalVar.circuitRaces=[];var i=this.utilityService.getNumericValueOfCircuitRank(e),r=1,a=60,o=15,s=100,l=1.125,c=80*i,u=1.1,d=.9,b=3;"Z"===e?b=1:"Y"==e&&(b=2);for(var y=0;y<b;y++){var C=[],k="C"+i+y;if(i<=2){c=-37;var w=new Ui;w.courseType=W.Flatland,2===i?0===y?w.terrain=new gn($e.Sunny):1===y&&(w.terrain=new gn($e.Rainy)):w.terrain=new gn($e.Sunny),w.distance=Math.round(s*l**i+c),C.push(w)}else if(i<=14){c=3===i?5*i:35*i,(R=[]).push(W.Flatland),R.push(W.Mountain);var z=this.getCourseTypeInRandomOrderSeeded(R,k+"cl1"),q=this.utilityService.getRandomSeededNumber(20,80,k+"l1d"),ve=(j=this.utilityService.getRandomSeededNumber(20,80,k+"l2d"))*(ue=a/(q+j));(ce=q*ue)<o?(ce=0,ve=a):ve<o&&(ve=0,ce=a),ce>0&&((_e=new Ui).courseType=z[0],_e.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l1r")*(ce/a),_e.terrain=this.getRandomTerrain(_e.courseType,k+"lt1d"),C.push(_e)),ve>0&&((Ie=new Ui).courseType=z[1],Ie.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l2r")*(ve/a),Ie.terrain=this.getRandomTerrain(Ie.courseType,k+"lt2d"),C.push(Ie))}else{o=10,15===i?c=50*i:16===i&&(c=60*i);var R=[];i<=43?(R.push(W.Flatland),R.push(W.Mountain),R.push(W.Ocean)):i<=51?(R.push(W.Flatland),R.push(W.Mountain),R.push(W.Ocean),R.push(W.Tundra)):(R.push(W.Flatland),R.push(W.Mountain),R.push(W.Ocean),R.push(W.Tundra),R.push(W.Volcanic)),z=this.getCourseTypeInRandomOrderSeeded(R,k+"courses1"),q=this.utilityService.getRandomSeededNumber(20,80,k+"l1d");var ue,ce,_e,Ie,j=this.utilityService.getRandomSeededNumber(20,80,k+"l2d"),st=this.utilityService.getRandomSeededNumber(20,80,k+"l3d"),mt=(ve=j*(ue=a/(q+j+st)),st*ue);if((ce=q*ue)<o?(ve+=ce/2,mt+=ce/2,ce=0):ve<o?(ce+=ve/2,mt+=ve/2,ve=0):mt<o&&(ce+=mt/2,ve+=mt/2,mt=0),ce>0&&((_e=new Ui).courseType=z[0],_e.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l1r")*(ce/a),_e.terrain=this.getRandomTerrain(_e.courseType,k+"tl1d"),C.push(_e)),ve>0&&((Ie=new Ui).courseType=z[1],Ie.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l2r")*(ve/a),Ie.terrain=this.getRandomTerrain(Ie.courseType,k+"tl2d"),C.push(Ie)),mt>0){var ct=new Ui;ct.courseType=z[2],ct.distance=Math.round(s*l**i+c)*this.utilityService.getRandomSeededNumber(d,u,k+"l3r")*(mt/a),ct.terrain=this.getRandomTerrain(ct.courseType,k+"tl3d"),C.push(ct)}}var bt=0;C.forEach(wt=>{bt+=wt.distance}),C.forEach(wt=>{wt.pathData=this.GenerateRaceLegPaths(wt,bt)}),this.globalVar.circuitRaces.push(new vn(C,e,!0,r,bt,a,this.GenerateCircuitRaceRewards(e),void 0,void 0,Ee.circuit)),r+=1}}reorganizeLegsByDeckOrder(e,i){return i.isCourseOrderActive?e.sort((r,a)=>i.courseTypeOrder.indexOf(r.courseType)-i.courseTypeOrder.indexOf(a.courseType)):e}reorganizeAnimalsByDeckOrder(e,i){return i.isCourseOrderActive?e.sort((r,a)=>i.courseTypeOrder.indexOf(r.raceCourseType)-i.courseTypeOrder.indexOf(a.raceCourseType)):e}getCourseTypeInRandomOrder(e){for(var i=[],r=e.length,a=0;a<r;a++){var o=this.utilityService.getRandomInteger(1,e.length);i.push(e[o-1]),e=e.filter(s=>s!==e[o-1])}return i}getCourseTypeInRandomOrderSeeded(e,i="seeded"){for(var r=[],a=e.length,o=0;o<a;o++){var s=this.utilityService.getRandomSeededInteger(1,e.length,i);r.push(e[s-1]),e=e.filter(l=>l!==e[s-1])}return r}getRandomTerrain(e,i){var r=[];e===W.Flatland||e===W.Mountain?(r.push($e.Sunny),r.push($e.Rainy),r.push($e.Stormy),r.push($e.Torrid),r.push($e.Snowfall)):e===W.Ocean?(r.push($e.Sunny),r.push($e.Maelstrom),r.push($e.Stormy),r.push($e.Snowfall)):e===W.Tundra?(r.push($e.Sunny),r.push($e.Hailstorm),r.push($e.Stormy),r.push($e.Snowfall)):e===W.Volcanic&&(r.push($e.Sunny),r.push($e.Ashfall),r.push($e.Stormy),r.push($e.Torrid));var a;return a=null!=i?this.utilityService.getRandomSeededInteger(1,r.length,i):this.utilityService.getRandomInteger(1,r.length),new gn(r[a-1])}getRandomOrbListOrder(e,i="seeded"){for(var r=[],a=e.length,o=0;o<a;o++){var s=this.utilityService.getRandomSeededInteger(1,e.length,i);r.push(e[s-1]),e=e.filter(l=>l!==e[s-1])}return r}getAnimalStatLossFromExhaustionEventRace(e){if(null==this.globalVar.eventRaceData.animalData||0===this.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:i.exhaustionStatReduction}getRandomGrandPrixWeatherCluster(e,i){var r=[];r.push(jn.clearSkies),r.push(jn.coldSpell),r.push(jn.inclementWeather);var o=r[(null!=e?this.utilityService.getRandomSeededInteger(1,r.length,e):this.utilityService.getRandomInteger(1,r.length))-1];if(this.globalVar.eventRaceData.animalData.length>0){var s=.2,l=this.globalVar.modifiers.find(c=>"weatherMoraleBoostModifier"===c.text);void 0!==l&&(s=l.value),this.globalVar.eventRaceData.animalData.forEach(c=>{var u=this.globalVar.animals.find(d=>d.type===c.associatedAnimalType);void 0!==u&&(void 0!==i&&this.animalGainsMoraleBoostFromWeather(u.raceCourseType,i)&&(c.morale-=+s),this.animalGainsMoraleBoostFromWeather(u.raceCourseType,o)&&(c.morale+=+s))})}return o}animalGainsMoraleBoostFromWeather(e,i){var r=!1;return(i===jn.clearSkies&&(e===W.Volcanic||e===W.Flatland)||i===jn.inclementWeather&&e===W.Ocean||i===jn.coldSpell&&(e===W.Tundra||e===W.Mountain))&&(r=!0),r}getRandomGrandPrixTerrainFromWeatherCluster(e,i,r){var a=[];e===jn.clearSkies?(a.push($e.Sunny),a.push($e.Torrid),a.push($e.Ashfall)):e===jn.coldSpell?(a.push($e.Snowfall),a.push($e.Hailstorm),a.push($e.Sunny)):e===jn.inclementWeather&&(a.push($e.Rainy),a.push($e.Stormy),a.push($e.Maelstrom),a.push($e.Hailstorm)),i===W.Flatland&&(a=a.filter(s=>s!==$e.Ashfall&&s!==$e.Hailstorm&&s!==$e.Maelstrom)),i===W.Mountain&&(a=a.filter(s=>s!==$e.Ashfall&&s!==$e.Hailstorm&&s!==$e.Maelstrom)),i===W.Ocean&&(a=a.filter(s=>s!==$e.Ashfall&&s!==$e.Hailstorm&&s!==$e.Rainy&&s!==$e.Torrid)),i===W.Tundra&&(a=a.filter(s=>s!==$e.Ashfall&&s!==$e.Rainy&&s!==$e.Maelstrom&&s!==$e.Torrid)),i===W.Volcanic&&(a=a.filter(s=>s!==$e.Snowfall&&s!==$e.Hailstorm&&s!==$e.Maelstrom));var o;return o=null!=r?this.utilityService.getRandomSeededInteger(1,a.length,r):this.utilityService.getRandomInteger(1,a.length),new gn(a[o-1])}stopGrandPrixRace(){null!=this.globalVar.eventRaceData&&(this.globalVar.eventRaceData.animalData.forEach(e=>{e.isCurrentlyRacing=!1}),this.globalVar.eventRaceData.isLoading=!1,this.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalVar.eventRaceData.isRunning=!1,this.globalVar.eventRaceData.isCatchingUp=!1,this.globalVar.eventRaceData.overallTimeCounter-=this.globalVar.eventRaceData.segmentTimeCounter,this.globalVar.eventRaceData.segmentTimeCounter=0,void 0!==this.globalVar.eventRaceData.currentRaceSegment&&this.globalVar.eventRaceData.currentRaceSegment.reduceExportSize())}unlockTier2ShopItems(){var e=this.globalVar.shop.find(C=>"Specialty"===C.name);if(null!=e){var i=e.itemList.find(C=>"Incubator Upgrade Lv1"===C.name);null!=i&&(i.isAvailable=!0);var r=e.itemList.find(C=>"National Races"===C.name);null!=r&&(r.isAvailable=!0);var a=e.itemList.find(C=>"Scouts"===C.name);null!=a&&(a.isAvailable=!0);var o=e.itemList.find(C=>"Course Maps"===C.name);null!=o&&(o.isAvailable=!0)}var s=this.globalVar.shop.find(C=>"Equipment"===C.name);if(null!=s){var l=s.itemList.find(C=>"Red Baton"===C.name);null!=l&&(l.isAvailable=!0);var c=s.itemList.find(C=>"Orange Baton"===C.name);null!=c&&(c.isAvailable=!0);var u=s.itemList.find(C=>"Green Baton"===C.name);null!=u&&(u.isAvailable=!0);var d=s.itemList.find(C=>"Yellow Baton"===C.name);null!=d&&(d.isAvailable=!0);var v=s.itemList.find(C=>"Blue Baton"===C.name);null!=v&&(v.isAvailable=!0);var m=s.itemList.find(C=>"Violet Baton"===C.name);null!=m&&(m.isAvailable=!0)}var b=this.globalVar.shop.find(C=>"Food"===C.name);if(null!=b){var y=b.itemList.find(C=>"Gingko Leaves"===C.name);null!=y&&(y.isAvailable=!0)}}lockTier2ShopItems(){var e=this.globalVar.shop.find(b=>"Specialty"===b.name);if(null!=e){var i=e.itemList.find(b=>"Incubator Upgrade Lv1"===b.name);null!=i&&(i.isAvailable=!1);var r=e.itemList.find(b=>"National Races"===b.name);null!=r&&(r.isAvailable=!1);var a=e.itemList.find(b=>"Scouts"===b.name);null!=a&&(a.isAvailable=!1);var o=e.itemList.find(b=>"Course Maps"===b.name);null!=o&&(o.isAvailable=!1)}var s=this.globalVar.shop.find(b=>"Equipment"===b.name);if(null!=s){var l=s.itemList.find(b=>"Red Baton"===b.name);null!=l&&(l.isAvailable=!1);var c=s.itemList.find(b=>"Orange Baton"===b.name);null!=c&&(c.isAvailable=!1);var u=s.itemList.find(b=>"Green Baton"===b.name);null!=u&&(u.isAvailable=!1);var d=s.itemList.find(b=>"Yellow Baton"===b.name);null!=d&&(d.isAvailable=!1);var v=s.itemList.find(b=>"Blue Baton"===b.name);null!=v&&(v.isAvailable=!1);var m=s.itemList.find(b=>"Violet Baton"===b.name);null!=m&&(m.isAvailable=!1)}}GetCircuitRankValue(e){for(var i=1;e.length>1;){var r=e.length;i+=26,(e=e.substring(1)).length>=r&&(e="")}return i+(91-e.charCodeAt(0))}GenerateCircuitRaceRewards(e){var i=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new ie("Coins",Math.round(50*1.0135**i))),l.push(new ie("Renown",parseFloat((1.03*1.03**i/100).toFixed(3)))),l}GenerateLocalRaceRewards(e){var i=this.GetCircuitRankValue(e),l=[];this.globalVar.resources.find(d=>"Renown"===d.name);return l.push(new ie("Coins",Math.round(10*1.013**i))),l.push(new ie("Renown",parseFloat((1.01*1.015**i/100).toFixed(3)))),l}GenerateMonoRaceRewards(e){var i=[];i.push(new ie("Facility Level",1,G.Progression));var r=this.GetCircuitRankValue(e);return i.push(new ie("Coins",Math.round(60*1.0135**r))),i.push(new ie("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateDuoRaceRewards(e){var i=[];i.push(new ie("Research Level",1,G.Progression));var r=this.GetCircuitRankValue(e);return i.push(new ie("Coins",Math.round(125*1.0135**r))),i.push(new ie("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateRainbowRaceRewards(e){var i=[];i.push(new ie("Talent Points",1,G.Progression));var r=this.GetCircuitRankValue(e);return i.push(new ie("Coins",Math.round(250*1.012**r))),i.push(new ie("Renown",parseFloat((1.1*1.03**r/100).toFixed(3)))),i}GenerateLocalRaces(){this.GenerateMonoRaces(this.globalVar.monoRank),this.GenerateDuoRaces(this.globalVar.duoRank),this.GenerateRainbowRaces(this.globalVar.rainbowRank),this.GeneratePinnacleRaces(this.globalVar.pinnacleFloor)}GenerateMonoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(C=>C.localRaceType!==Ut.Mono),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,l=100*i,d=[],v=new Ui;if(1===i)v.courseType=W.Flatland;else{var m=[];i<14?(m.push(W.Flatland),m.push(W.Mountain)):i<40?(m.push(W.Flatland),m.push(W.Mountain),m.push(W.Ocean)):i<50?(m.push(W.Flatland),m.push(W.Mountain),m.push(W.Ocean),m.push(W.Tundra)):(m.push(W.Flatland),m.push(W.Mountain),m.push(W.Ocean),m.push(W.Tundra),m.push(W.Volcanic)),null!=this.globalVar.lastMonoRaceCourseType&&i>2&&(m=m.filter(C=>C!==this.globalVar.lastMonoRaceCourseType));var b=this.getCourseTypeInRandomOrderSeeded(m,"monoseed"+e+i);v.courseType=b[0]}v.terrain=this.getRandomTerrain(v.courseType,"monoseed"+e+i),v.distance=Math.round((155*1.155**i+l)*this.utilityService.getRandomSeededNumber(.9,1.1)),d.push(v);var y=v.distance;d.forEach(C=>{C.pathData=this.GenerateRaceLegPaths(C,y)}),this.globalVar.localRaces.push(new vn(d,e,!1,r,y,90,this.GenerateMonoRaceRewards(e),Ut.Mono,void 0,Ee.special)),r+=1}}GenerateDuoRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(k=>k.localRaceType!==Ut.Duo),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,u=[],d=[];i<=10?(d.push(W.Flatland),d.push(W.Mountain),d.push(W.Ocean)):i<=20?(d.push(W.Flatland),d.push(W.Mountain),d.push(W.Ocean),d.push(W.Tundra)):(d.push(W.Flatland),d.push(W.Mountain),d.push(W.Ocean),d.push(W.Tundra),d.push(W.Volcanic));var v=this.getCourseTypeInRandomOrderSeeded(d,"duooseed"+e+i),m=this.utilityService.getRandomSeededNumber(.8,1.2),b=new Ui;b.courseType=v[0],b.distance=Math.round(6500*1.1**i*m*.5),b.terrain=this.getRandomTerrain(b.courseType,"duoseedl1"+e+i),u.push(b);var y=new Ui;y.courseType=v[1],y.distance=Math.round(6500*1.1**i*m*.5),y.terrain=this.getRandomTerrain(y.courseType,"duoseedl2"+e+i),u.push(y);var C=b.distance+y.distance;u.forEach(k=>{k.pathData=this.GenerateRaceLegPaths(k,C)}),this.globalVar.localRaces.push(new vn(u,e,!1,r,C,80,this.GenerateDuoRaceRewards(e),Ut.Duo,void 0,Ee.special)),r+=1}}GenerateRainbowRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(z=>z.localRaceType!==Ut.Rainbow),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,o=1e5,s=1.135,u=[],d=[];d.push(W.Flatland),d.push(W.Mountain),d.push(W.Ocean),d.push(W.Tundra),d.push(W.Volcanic);var v=this.getCourseTypeInRandomOrderSeeded(d,"rainbow"+e+i),m=this.utilityService.getRandomSeededNumber(.8,1.2),b=new Ui;b.courseType=v[0],b.distance=Math.round(o*s**i*m*.2),b.terrain=this.getRandomTerrain(b.courseType,"rainbowl1"+e+i),u.push(b);var y=new Ui;y.courseType=v[1],y.distance=Math.round(o*s**i*m*.2),y.terrain=this.getRandomTerrain(y.courseType,"rainbowl2"+e+i),u.push(y);var C=new Ui;C.courseType=v[2],C.distance=Math.round(o*s**i*m*.2),C.terrain=this.getRandomTerrain(C.courseType,"rainbowl3"+e+i),u.push(C);var k=new Ui;k.courseType=v[3],k.distance=Math.round(o*s**i*m*.2),k.terrain=this.getRandomTerrain(k.courseType,"rainbowl4"+e+i),u.push(k);var w=new Ui;w.courseType=v[4],w.distance=Math.round(o*s**i*m*.2),w.terrain=this.getRandomTerrain(w.courseType,"rainbowl5"+e+i),u.push(w);var R=b.distance+y.distance+C.distance+k.distance+w.distance;u.forEach(z=>{z.pathData=this.GenerateRaceLegPaths(z,R)}),this.globalVar.localRaces.push(new vn(u,e,!1,r,R,120,this.GenerateRainbowRaceRewards(e),Ut.Rainbow,void 0,Ee.special)),r+=1}}GeneratePinnacleRaces(e){var i=this.utilityService.getNumericValueOfCircuitRank(e);if(this.globalVar.localRaces=this.globalVar.localRaces.filter(j=>j.localRaceType!==Ut.Pinnacle),!(i>=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank))){var r=1,o=125e4,u=[],d=this.utilityService.getRandomSeededNumber(.8,1.2),v=this.globalVar.animalDecks.find(j=>j.isPrimaryDeck);if(void 0!==v){for(var m=v.selectedAnimals.slice(0,4),b=Math.round(o*1.115**i*d*.2),y=0;y<m.length;y++){var C=1/m.length,k=new Ui;k.courseType=m[y].raceCourseType,k.distance=C*o,k.terrain=this.getRandomTerrain(k.courseType,"pinnaclel"+e+i+y),u.push(k)}u.forEach(j=>{j.pathData=this.GenerateRaceLegPaths(j,b)});var w=[];w.push(gr.amber),w.push(gr.amethyst),w.push(gr.ruby),w.push(gr.emerald),w.push(gr.sapphire),w.push(gr.topaz);var R=this.getRandomOrbListOrder(w,"pinnaclel1"+e+i),z=0,q=[];R.forEach(j=>{z+=1;var ye=new PD(this.getBrazierFromOrbType(j),b*(z/R.length+1));q.push(ye)}),this.globalVar.localRaces.push(new vn(u,e,!1,r,b,180,void 0,Ut.Pinnacle,void 0,Ee.special,void 0,q)),r+=1}}}getBrazierFromOrbType(e){return e===gr.amber?Hi.amberBrazier:e===gr.amethyst?Hi.amethystBrazier:e===gr.ruby?Hi.rubyBrazier:e===gr.topaz?Hi.topazBrazier:e===gr.emerald?Hi.emeraldBrazier:e===gr.sapphire?Hi.sapphireBrazier:void 0}generateFreeRace(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.circuitRank),i=60,r=15,a=90,o=1.125,s=12*e;e>=15&&(s=50*e);var l=1.05,c=.8,v=[];if(e<=2){var m=new Ui;m.courseType=W.Flatland,m.terrain=this.getRandomTerrain(m.courseType),m.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l)),v.push(m)}else if(e<=15){(b=[]).push(W.Flatland),b.push(W.Mountain);var y=this.getCourseTypeInRandomOrder(b),C=this.utilityService.getRandomNumber(10,90),q=(k=this.utilityService.getRandomNumber(10,90))*(R=i/(C+k));(z=C*R)<r?(z=0,q=i):q<r&&(q=0,z=i),z>0&&((j=new Ui).courseType=y[0],j.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(z/i),j.terrain=this.getRandomTerrain(j.courseType),v.push(j)),q>0&&((ye=new Ui).courseType=y[1],ye.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(q/i),ye.terrain=this.getRandomTerrain(ye.courseType),v.push(ye))}else{r=10;var b=[];e<45?(b.push(W.Flatland),b.push(W.Mountain),b.push(W.Ocean)):e<53?(b.push(W.Flatland),b.push(W.Mountain),b.push(W.Ocean),b.push(W.Tundra)):(b.push(W.Flatland),b.push(W.Mountain),b.push(W.Ocean),b.push(W.Tundra),b.push(W.Volcanic)),y=this.getCourseTypeInRandomOrder(b),C=this.utilityService.getRandomNumber(10,90);var R,z,j,ye,k=this.utilityService.getRandomNumber(10,90),ue=this.utilityService.getRandomNumber(10,90),ce=(q=k*(R=i/(C+k+ue)),ue*R);if((z=C*R)<r?(q+=z/2,ce+=z/2,z=0):q<r?(z+=q/2,ce+=q/2,q=0):ce<r&&(z+=ce/2,q+=ce/2,ce=0),z>0&&((j=new Ui).courseType=y[0],j.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(z/i),j.terrain=this.getRandomTerrain(j.courseType),v.push(j)),q>0&&((ye=new Ui).courseType=y[1],ye.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(q/i),ye.terrain=this.getRandomTerrain(ye.courseType),v.push(ye)),ce>0){var ve=new Ui;ve.courseType=y[2],ve.distance=Math.round((a*o**e+s)*this.utilityService.getRandomNumber(c,l))*(ce/i),ve.terrain=this.getRandomTerrain(ve.courseType),v.push(ve)}}var _e=0,Ie=this.globalVar.animalDecks.find(st=>st.isPrimaryDeck);return void 0!==Ie&&(v=this.reorganizeLegsByDeckOrder(v,Ie)),v.forEach(st=>{_e+=st.distance}),v.forEach(st=>{st.pathData=this.GenerateRaceLegPaths(st,_e)}),new vn(v,this.globalVar.circuitRank,!1,1,_e,i,this.GenerateLocalRaceRewards(this.globalVar.circuitRank),Ut.Free,void 0,Ee.circuit,void 0)}getTotalSegments(e){return(null==this.globalVar.circuitRaces||0===this.globalVar.circuitRaces.length)&&this.GenerateCircuitRacesForRank(this.globalVar.circuitRank),Math.ceil(this.globalVar.eventRaceData.grandPrixTimeLength/this.globalVar.eventRaceData.segmentTime),e/this.utilityService.getClosestWholeNumber(this.globalVar.circuitRaces[0].length*(this.globalVar.eventRaceData.segmentTime/this.globalVar.circuitRaces[0].timeToComplete),e)}initialGrandPrixSetup(e){this.globalVar.eventRaceData=new Nn,this.globalVar.eventRaceData.rank=e;var i=this.utilityService.getNumericValueOfCircuitRank(e);this.globalVar.eventRaceData.totalDistance=5e8*i,this.globalVar.eventRaceData.currentRaceSegmentCount=0,this.globalVar.eventRaceData.segmentTimeCounter=0,this.globalVar.eventRaceData.totalSegments=this.getTotalSegments(this.globalVar.eventRaceData.totalDistance),this.globalVar.eventRaceData.remainingRewards=this.globalVar.eventRaceData.totalRewards=this.getGrandPrixRewardCount(),this.globalVar.eventRaceData.animalData=[],this.globalVar.animals.forEach(r=>{this.globalVar.eventRaceData.animalData.push(new AD(r.type))}),this.globalVar.eventRaceData.weatherCluster=this.getRandomGrandPrixWeatherCluster(),this.globalVar.previousEventRewards=[]}animalCanRaceGrandPrix(e){var i=!0,r=this.getBreedLevelRequiredForGrandPrix();e.breedLevel<r&&(i=!1);var a=this.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);return null!=a&&a.exhaustionStatReduction<.5&&(i=!1),i}getGrandPrixRacingAnimal(){var e=new At,i=this.globalVar.animalDecks.find(l=>l.isEventDeck);if(void 0!==i){var r=[];if(i.isCourseOrderActive){for(var a=0;a<i.selectedAnimals.length;a++)if(i.courseTypeOrder.length>a){var o=i.courseTypeOrder[a],s=i.selectedAnimals.find(l=>l.raceCourseType===o);void 0!==s&&r.push(s)}}else i.selectedAnimals.forEach(l=>{r.push(l)});r=r.filter(l=>this.animalCanRaceGrandPrix(l)),this.globalVar.eventRaceData.isCatchingUp&&(r=r.filter(l=>!this.shouldShowSlowSegmentWarning(l))),r.length>0&&(e=r[0])}return this.globalVar.eventRaceData.animalData.forEach(l=>{if(l.isCurrentlyRacing){var c=this.globalVar.animals.find(u=>u.type===l.associatedAnimalType);void 0!==c&&(e=c.makeCopy(c))}}),e}getCurrentlyActiveGrandPrixRacingAnimal(){var e=new At;return this.globalVar.eventRaceData.isRunning&&this.globalVar.eventRaceData.animalData.forEach(i=>{if(i.isCurrentlyRacing){var r=this.globalVar.animals.find(a=>a.type===i.associatedAnimalType);void 0!==r&&(e=r.makeCopy(r))}}),e}getExhaustionOfAnimal(e){var i;return null===(i=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===i?void 0:i.exhaustionStatReduction}getMoraleOfAnimal(e){var i;return null===(i=this.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e))||void 0===i?void 0:i.morale}generateGrandPrixSegment(e,i){var r=this.globalVar.eventRaceData,a=this.getRemainingEventRaceTime();void 0!==i&&(0===a||null==a)&&(a=i);var o=r.totalDistance/r.totalSegments,s=[],l=new Ui;return l.courseType=e.raceCourseType,l.terrain=this.getRandomGrandPrixTerrainFromWeatherCluster(this.globalVar.eventRaceData.weatherCluster,l.courseType,this.getEventStartDateTime().toString()+this.getEventTimePer5Min().toString()),l.distance=o,s.push(l),s.forEach(c=>{c.pathData=this.GenerateRaceLegPaths(c,o)}),new vn(s,this.globalVar.circuitRank,!1,1,o,a,void 0,void 0,void 0,Ee.event,Ge.grandPrix)}getGrandPrixRewardCount(){var e=this.utilityService.getNumericValueOfCircuitRank(this.globalVar.eventRaceData.rank),i=5,r=this.globalVar.modifiers.find(d=>"metersPerCoinsGrandPrixModifier"===d.text);void 0!==r&&(i=r.value);var a=5,o=this.globalVar.modifiers.find(d=>"metersPerRenownGrandPrixModifier"===d.text);return void 0!==o&&(a=o.value),this.globalVar.eventRaceData.totalDistance/(i*e)+this.globalVar.eventRaceData.totalDistance/(a*e)+4+8}getEventStartDateTime(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?l:o}getCurrentEventStartEndDateTime(e){var i=new Date,r=i.getDay(),a=i.getHours(),o=this.globalVar.eventRaceData,s=new Date,l=new Date,c=new Date,u=new Date;return(s=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+o.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-r+o.weekStartDay))).setHours(s.getHours()-a+o.weekStartHour),s.setMinutes(0,0,0),(l=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+o.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-r+o.weekEndDay))).setHours(l.getHours()-a+o.weekEndHour),l.setMinutes(0,0,0),(c=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-r+o.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-r+o.weekendStartDay))).setHours(c.getHours()-a+o.weekendStartHour),c.setMinutes(0,0,0),(u=0===i.getDay()&&a<o.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-r+o.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-r+o.weekendEndDay))).setHours(u.getHours()-a+o.weekendEndHour),u.setMinutes(0,0,0),i>=s&&i<=l?e?l:s:i>=c&&i<=u?e?u:c:0}getTimeToEventRace(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?0:e>s?(l.getTime()-e.getTime())/1e3:(o.getTime()-e.getTime())/1e3}getRemainingEventRaceTime(){var e=new Date,i=e.getDay(),r=e.getHours(),a=this.globalVar.eventRaceData,o=new Date,s=new Date,l=new Date,c=new Date;return(o=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekStartDay))).setHours(o.getHours()-r+a.weekStartHour),o.setMinutes(0,0,0),(s=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekEndDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekEndDay))).setHours(s.getHours()-r+a.weekEndHour),s.setMinutes(0,0,0),(l=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-7-i+a.weekendStartDay)):new Date((new Date).setDate((new Date).getDate()-i+a.weekendStartDay))).setHours(l.getHours()-r+a.weekendStartHour),l.setMinutes(0,0,0),(c=0===e.getDay()&&r<a.weekendEndHour?new Date((new Date).setDate((new Date).getDate()-i+a.weekendEndDay)):new Date((new Date).setDate((new Date).getDate()+7-i+a.weekendEndDay))).setHours(c.getHours()-r+a.weekendEndHour),c.setMinutes(0,0,0),e>=o&&e<=s||e>=l&&e<=c?e>l?(c.getTime()-e.getTime())/1e3:(s.getTime()-e.getTime())/1e3:0}getEventTimePer5Min(){var e=this.getRemainingEventRaceTime();return Math.floor(e/60/5)}generateTrackRace(e,i){var r=60,a=[],o=new Ui;o.courseType=e.raceCourseType,i===ln.practice?(r=45,o.distance=100,o.terrain=new gn($e.Stormy)):i===ln.novice?(r=60,o.distance=1e3,o.terrain=new gn($e.Stormy)):i===ln.intermediate?(r=80,o.distance=1e4,o.terrain=new gn($e.Stormy)):i===ln.master&&(r=100,o.distance=1e5,o.terrain=new gn($e.Stormy)),a.push(o);var s=0;return a.forEach(l=>{s+=l.distance}),a.forEach(l=>{l.pathData=this.GenerateRaceLegPaths(l,s,i)}),new vn(a,this.globalVar.circuitRank,!1,1,s,r,void 0,Ut.Track,i,Ee.trainingTrack)}GenerateRaceLegPaths(e,i,r){for(var o=[],s=e.distance,c=Math.round(s/(i/20)),u=!1,d=Ke.Regular,v=s/c,m=0;m<c;m++){var b=new df;0!==m?m!==c-1?(b.length=s>v?v:s,(s-=b.length)<0&&(s=0),u?b.routeDesign=Ke.Regular:(b.routeDesign=this.GetSpecialRoute(e.courseType,m+2<c,d),e.specialPathCount+=1,b.isSpecialPath=!0),u=b.routeDesign!==Ke.Regular,b.setStumbleFields(),o.push(b),d=b.routeDesign):(b.length=s,b.routeDesign=e.courseType===W.Volcanic?Ke.LastRegular:Ke.Regular,b.setStumbleFields(),o.push(b),d=b.routeDesign):(b.length=v,b.routeDesign=e.courseType===W.Volcanic?Ke.FirstRegular:Ke.Regular,b.setStumbleFields(),o.push(b),s-=b.length,d=b.routeDesign)}return o}GetSpecialRoute(e,i,r){var a=Ke.Regular,s=this.utilityService.getRandomInteger(1,3);return 1===s||(2===s?e===W.Flatland?a=Ke.S:e===W.Mountain?a=Ke.Crevasse:e===W.Ocean?a=Ke.Waves:e===W.Tundra?a=Ke.Cavern:e===W.Volcanic&&(a=Ke.Regular):3===s&&(e===W.Flatland?a=Ke.Bumps:e===W.Mountain?a=Ke.Gaps:e===W.Ocean?a=Ke.Dive:e===W.Tundra?a=Ke.Hills:e===W.Volcanic&&(a=Ke.SteppingStones))),a}calculateAnimalRacingStats(e){var i=e.currentStats.defaultMaxSpeedModifier,r=e.currentStats.defaultAccelerationModifier,a=e.currentStats.defaultStaminaModifier,o=e.currentStats.defaultPowerModifier,s=e.currentStats.defaultFocusModifier,l=e.currentStats.defaultAdaptabilityModifier,c=.02,u=e.getAnimalType().toLowerCase(),d=this.globalVar.modifiers.find(Ze=>Ze.text===u+"DefaultMaxSpeedModifier"),v=this.globalVar.modifiers.find(Ze=>Ze.text===u+"DefaultAccelerationModifier"),m=this.globalVar.modifiers.find(Ze=>Ze.text===u+"DefaultStaminaModifier"),b=this.globalVar.modifiers.find(Ze=>Ze.text===u+"DefaultPowerModifier"),y=this.globalVar.modifiers.find(Ze=>Ze.text===u+"DefaultFocusModifier"),C=this.globalVar.modifiers.find(Ze=>Ze.text===u+"DefaultAdaptabilityModifier");null!=d&&(i=d.value),null!=v&&(r=v.value),null!=m&&(a=m.value),null!=b&&(o=b.value),null!=y&&(s=y.value),null!=C&&(l=C.value);var k=this.getTraitModifier(e,Se.topSpeed),w=this.getTraitModifier(e,Se.acceleration),R=this.getTraitModifier(e,Se.endurance),z=this.getTraitModifier(e,Se.power),q=this.getTraitModifier(e,Se.focus),j=this.getTraitModifier(e,Se.adaptability),ye=null!==e.equippedOrb&&"Ruby Orb"===e.equippedOrb.name?this.globalVar.orbStats.maxSpeedIncrease:1,ue=null!==e.equippedOrb&&"Amber Orb"===e.equippedOrb.name?this.globalVar.orbStats.accelerationRateIncrease:1,ce=null!==e.equippedOrb&&"Topaz Orb"===e.equippedOrb.name?this.globalVar.orbStats.staminaIncrease:1,ve=null!==e.equippedOrb&&"Amethyst Orb"===e.equippedOrb.name?this.globalVar.orbStats.powerEfficiencyIncrease:1,_e=null!==e.equippedOrb&&"Sapphire Orb"===e.equippedOrb.name?this.globalVar.orbStats.focusDistanceIncrease:1,Ie=null!==e.equippedOrb&&"Emerald Orb"===e.equippedOrb.name?this.globalVar.orbStats.adaptabilityDistanceIncrease:1,st=this.globalVar.modifiers.find(Ze=>"breedLevelStatModifier"===Ze.text);null!=st&&(c=st.value),c=1+c*(e.breedLevel-1);var mt=1,ct=1,bt=1,wt=1,pt=1,J=1;e.talentTree.talentTreeType===yt.sprint&&(J=1+e.talentTree.column1Row3Points/100,ct=1+e.talentTree.column2Row3Points/100,wt=1+e.talentTree.column3Row3Points/100),e.talentTree.talentTreeType===yt.longDistance&&(pt=1+e.talentTree.column1Row3Points/100,mt=1+e.talentTree.column2Row3Points/100,bt=1+e.talentTree.column3Row3Points/100);var T=this.GetAnimalDiminishingReturns(e);e.currentStats.maxSpeedMs=e.currentStats.calculateMaxSpeed(i*c*k*e.incubatorStatUpgrades.maxSpeedModifier*mt,T,ye),e.currentStats.accelerationMs=e.currentStats.calculateTrueAcceleration(r*c*w*e.incubatorStatUpgrades.accelerationModifier*ct,T,ue),e.currentStats.stamina=e.currentStats.calculateStamina(a*c*R*e.incubatorStatUpgrades.staminaModifier*bt,T,ce),e.currentStats.powerMs=e.currentStats.calculateTruePower(o*c*z*e.incubatorStatUpgrades.powerModifier*wt,T,ve),e.currentStats.focusMs=e.currentStats.calculateTrueFocus(s*c*q*e.incubatorStatUpgrades.focusModifier*pt,T,_e),e.currentStats.adaptabilityMs=e.currentStats.calculateTrueAdaptability(l*c*j*e.incubatorStatUpgrades.adaptabilityModifier*J,T,Ie),e.currentStats.burstChance=e.currentStats.calculateBurstChance(c),e.currentStats.burstDistance=e.currentStats.calculateBurstDistance(c),this.updateTrackedMaxStats(e)}getTraitModifier(e,i){var r=1;if(null!=e.trait){var a=e.trait.researchLevel,o=e.trait.researchLevel,s=this.globalVar.modifiers.find(l=>"maximumTraitNegativePercentModifier"===l.text);void 0!==s&&o>s.value&&(o=s.value),e.trait.positiveStatGain===i&&(r+=a/100),e.trait.negativeStatGain===i&&(r-=o/100)}return r}GetAnimalDiminishingReturns(e){var i=e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalVar.resources.find(s=>"Facility Level"===s.name);if(null==r)return i;var a=5,o=this.globalVar.modifiers.find(s=>"facilityLevelModifier"===s.text);return void 0!==o&&(a=o.value),i+r.amount*(a+e.miscStats.diminishingReturnsBonus)}IncreaseAnimalBreedGauge(e,i){e.breedGaugeXp+=i,e.breedGaugeXp>=e.breedGaugeMax&&(e.breedGaugeXp=e.breedGaugeMax,e.autoBreedActive&&this.BreedAnimal(e))}getBreedLevelRequiredForGrandPrix(){var e=50,i=this.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}BreedAnimal(e){if(!(e.breedGaugeXp<e.breedGaugeMax)){var i=5,r=this.globalVar.modifiers.find(j=>"breedGaugeMaxIncreaseModifier"===j.text);if(null!=r&&(i=r.value),e.breedLevel+=1,e.breedGaugeXp=0,e.breedGaugeMax+=i,null!=this.globalVar.resources.find(j=>j.name.includes("Incubator Upgrade"))&&null!=e.trait){var o=.001,s=this.globalVar.modifiers.find(j=>"incubatorUpgradeIncreaseModifier"===j.text);null!=s&&(o=s.value);var l=e.trait.researchLevel*o,c=this.globalVar.resources.find(j=>"Incubator Upgrade Lv1"===j.name),u=this.globalVar.resources.find(j=>"Incubator Upgrade Lv2"===j.name),d=this.globalVar.resources.find(j=>"Incubator Upgrade Lv3"===j.name);null!=this.globalVar.resources.find(j=>"Incubator Upgrade Lv4"===j.name)?l>.1&&(l=.1):null!=d?l>.05&&(l=.05):null!=u?l>.025&&(l=.025):null!=c&&l>.01&&(l=.01),e.trait.positiveStatGain===Se.topSpeed&&(e.incubatorStatUpgrades.maxSpeedModifier+=l),e.trait.positiveStatGain===Se.acceleration&&(e.incubatorStatUpgrades.accelerationModifier+=l),e.trait.positiveStatGain===Se.endurance&&(e.incubatorStatUpgrades.staminaModifier+=l),e.trait.positiveStatGain===Se.power&&(e.incubatorStatUpgrades.powerModifier+=l),e.trait.positiveStatGain===Se.focus&&(e.incubatorStatUpgrades.focusModifier+=l),e.trait.positiveStatGain===Se.adaptability&&(e.incubatorStatUpgrades.adaptabilityModifier+=l)}var m=this.globalVar.resources.find(j=>"Animal Handler"===j.name),b=this.globalVar.modifiers.find(j=>"animalHandlerModifier"===j.text);if(null!=m&&void 0!==b&&null!=b&&m.amount>0){var y=m.amount*b.value,C=Math.round((e.currentStats.topSpeed-e.baseStats.topSpeed)*y),k=Math.round((e.currentStats.acceleration-e.baseStats.acceleration)*y),w=Math.round((e.currentStats.endurance-e.baseStats.endurance)*y),R=Math.round((e.currentStats.power-e.baseStats.power)*y),z=Math.round((e.currentStats.focus-e.baseStats.focus)*y),q=Math.round((e.currentStats.adaptability-e.baseStats.adaptability)*y);e.currentStats=new Ve(e.baseStats.topSpeed+C,e.baseStats.acceleration+k,e.baseStats.endurance+w,e.baseStats.power+R,e.baseStats.focus+z,e.baseStats.adaptability+q)}else e.currentStats=new Ve(e.baseStats.topSpeed,e.baseStats.acceleration,e.baseStats.endurance,e.baseStats.power,e.baseStats.focus,e.baseStats.adaptability);this.calculateAnimalRacingStats(e),this.globalVar.trackedStats.totalBreeds+=1}}increaseAbilityXp(e,i){var r=25,a=this.globalVar.modifiers.find(l=>"abilityLevelCapModifier"===l.text);if(null!=a&&(r=a.value),!(e.ability.abilityLevel>e.breedLevel+r)){var o=1;null!=i&&i>1&&(o=i),e.ability.abilityXp+=o,e.ability.abilityXp>=e.ability.abilityMaxXp&&(e.ability.abilityXp=0,e.ability.abilityLevel+=1,e.ability.abilityLevel%10==0&&(e.ability.abilityMaxXp+=5));var s=e.availableAbilities.find(l=>l.name===e.ability.name);null!=s&&(s.abilityXp=e.ability.abilityXp,s.abilityLevel=e.ability.abilityLevel,s.abilityMaxXp=e.ability.abilityMaxXp)}}InitializeResources(){this.globalVar.resources.push(this.initializeService.initializeResource("Coins",500,G.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Renown",1,G.Progression))}InitializeSettings(){this.themeService.setLightTheme(),this.globalVar.settings.set("theme",this.themeService.getActiveTheme()),this.globalVar.settings.set("skipDrawRace",!1),this.globalVar.settings.set("finishTrainingBeforeSwitching",!0),this.globalVar.settings.set("hideTips",!1),this.globalVar.settings.set("useNumbersForCircuitRank",!1),this.globalVar.settings.set("raceDisplayInfo",ca.both),this.globalVar.settings.set("autoStartEventRace",!1)}InitializeUnlockables(){this.globalVar.unlockables.set("monoRace",!1),this.globalVar.unlockables.set("duoRace",!1),this.globalVar.unlockables.set("rainbowRace",!1),this.globalVar.unlockables.set("thePinnacle",!1),this.globalVar.unlockables.set("grandPrix",!1),this.globalVar.unlockables.set("orbs",!1),this.globalVar.unlockables.set("barnRow2",!1),this.globalVar.unlockables.set("barnRow3",!1),this.globalVar.unlockables.set("barnRow4",!1),this.globalVar.unlockables.set("barnRow5",!1),this.globalVar.unlockables.set("coaching",!1),this.globalVar.unlockables.set("barnSpecializations",!1),this.globalVar.unlockables.set("attractionSpecialization",!1),this.globalVar.unlockables.set("researchCenterSpecialization",!1)}getCoinsResourceValue(e){return new ie("Coins",e)}getMedalResourceValue(e){return new ie("Medals",e)}getTokenResourceValue(e){return new ie("Tokens",e)}unlockAnimalAbilities(e){var i=this.globalVar.shop.find(a=>"Abilities"===a.name);if(null!=i){var r=i.itemList.filter(a=>a.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}unlockOtherRaceCourseTypeAnimals(e){var i=this.globalVar.shop.find(a=>"Animals"===a.name);if(null!=i){var r=[];i.itemList.forEach(a=>{var o=this.globalVar.animals.find(s=>s.getAnimalType()===a.name);null!=o&&o.raceCourseType===e&&r.push(a)}),null!=r&&r.length>0&&r.forEach(a=>{a.isAvailable=!0})}}getAnimalDescription(e){var i="";return"Horse"===e?i="The Horse is a Flatland racing animal capable of running without losing stamina and increasing the max speed of relay racers.":"Cheetah"===e?i="The Cheetah is a Flatland racing animal that prioritizes quickness over stamina.":"Hare"===e?i="The Hare is a Flatland racing animal that can instantly enter Burst and increase adaptability and focus.":"Warthog"===e?i="The Warthog is a Flatland racing animal that can increase stats at random and increase Burst Chance after losing focus.":"Monkey"===e?i="The Monkey is a Mountain climbing animal capable of slowing its competitors and leaping to victory.":"Goat"===e?i="The Goat is a Mountain climbing animal that can nimbly travel terrain and increase stamina.":"Gecko"===e?i="The Gecko is a Mountain climbing animal that can increase speed based on focus and can increase other racers' starting velocity.":"Dolphin"===e?i="The Dolphin is an Ocean swimming animal capable of ignoring detrimental terrain effects and supporting teammates on relay.":"Shark"===e?i="The Shark is an Ocean swimming animal that can slow competitors and increase its own stats at the cost of your other racers.":"Octopus"===e?i="The Octopus is an Ocean swimming animal that can increase your coin rewards from races and increase power of other racers.":"Whale"===e?i="The Whale is an Ocean swimming animal that can set a velocity floor and becomes increasingly faster as the race goes on.":"Penguin"===e?i="The Penguin is a Tundra racing animal that can slide carefully or recklessly.":"Caribou"===e?i="The Caribou is a Tundra racing animal that boosts other racers based on stamina.":"Salamander"===e?i="The Salamander is a Volcanic racing animal that can burrow underground to avoid lava and continously increase acceleration.":"Fox"===e&&(i="The Fox is a Volcanic racing animal that can increase stats at random."),i}sortAnimalOrder(){this.globalVar.animals.sort((e,i)=>e.raceCourseType-i.raceCourseType)}getEquipmentDescription(e){var i="";return"Headband"===e&&(i="The first three stumbles you would have are ignored"),"Pendant"===e&&(i="Reduce your ability cooldown by 10%"),"Blinders"===e&&(i="Negative terrain effects are cut in half"),"Quick Snack"===e&&(i="Gain 100% of Stamina back after running out"),"Red Baton"===e&&(i="Increase next racer's Speed by 10% on Relay"),"Blue Baton"===e&&(i="Increase next racer's Focus by 10% on Relay"),"Violet Baton"===e&&(i="Increase next racer's Power by 10% on Relay"),"Green Baton"===e&&(i="Increase next racer's Adaptability by 10% on Relay"),"Orange Baton"===e&&(i="Increase next racer's Acceleration by 10% on Relay"),"Yellow Baton"===e&&(i="Increase next racer's Endurance by 10% on Relay"),"Amethyst Orb"===e&&(i="Increase your Power Efficiency by 10%."),"Sapphire Orb"===e&&(i="Increase your Focus Distance by 10%."),"Amber Orb"===e&&(i="Increase your Acceleration Rate by 10%."),"Topaz Orb"===e&&(i="Increase your Stamina by 10%."),"Emerald Orb"===e&&(i="Increase your Adaptability Distance by 10%."),"Ruby Orb"===e&&(i="Increase your Max Speed by 10%."),"Scary Mask"===e&&(i="Cause a distraction the first time you lose focus while ahead of competition, slowing competitors by 2 seconds."),"Running Shoes"===e&&(i="After each Burst during a race, increase subsequent Burst distance by 20%."),"Incense"===e&&(i="When your velocity is at least 90% of your Max Speed, immediately set velocity to 100% of your Max Speed."),"Athletic Tape"===e&&(i="While Bursting, decrease Acceleration Rate by 50% but increase Focus Distance and Adaptability Distance by 50%."),i}getItemDescription(e){var i="";return"Apples"===e&&(i="+1 Acceleration to a single animal"),"Bananas"===e&&(i="+1 Speed to a single animal"),"Strawberries"===e&&(i="+1 Endurance to a single animal"),"Carrots"===e&&(i="+1 Power to a single animal"),"Turnips"===e&&(i="+1 Focus to a single animal"),"Oranges"===e&&(i="+1 Adaptability to a single animal"),"Mangoes"===e&&(i="+1 Breed Level to a single animal"),"Gingko Leaves"===e&&(i="Reset Breed Level for a single animal back to 1 and remove all incubator upgrade gains. Increase Breed XP Gain by 1000% until Breed Level returns to what it was."),"Circuit Race Breed XP Gain Certificate"===e&&(i="Give an animal +2 Bonus Breed XP Gain from Circuit Races. Can use up to 30 of these certificates on any individual animal."),"Free Race Breed XP Gain Certificate"===e&&(i="Give an animal +1 Bonus Breed XP Gain from Free Races. Can use up to 30 of these certificates on any individual animal."),"Training Breed XP Gain Certificate"===e&&(i="Give an animal +1 Bonus Breed XP Gain from Training. Can use up to 30 of these certificates on any individual animal."),"Diminishing Returns Increase Certificate"===e&&(i="Give an animal +1 Diminishing Returns per Facility Level. Can use up to 30 of these certificates on any individual animal."),i}getSpecializationDescription(e){var i="";return"Breeding Grounds"===e?i="Turn your barn into a habitat based around the optimal breeding environment for your animals. As you progress, your animals will gain more breeding XP from their training.":"Training Facility"===e?i="Pull out all the stops giving your animals the best environment to improve. As you progress, your animals will train faster and gain stats from training at a higher rate.":"Attraction"===e?i="Give the people what they want and turn your barn into a tourist attraction. As you progress, your barn will provide passive income at a steady rate while training.":"Research Center"===e&&(i="Bring in the top names in animal research to optimize your training process. As you progress, your animal will gain reduced stats from training but split its improvements with other animals."),i}getTundraDescription(){return"When racing in the Tundra, your racer will slide all over the race course as they move forward. The higher your Adaptability stat, the better control your racer will have and the less likely they will slide. You lose a percentage of max speed while sliding, and if you slide too much you may hit a wall and come to a complete stop!"}getVolcanicDescription(){return"Volcanic racers make their way while a Volcano ominously looms in the background. As you race, the Volcano will erupt making it impossible to proceed if you get stuck behind the lava flow. If you stay ahead of the average pace for the Volcanic leg of the race, you should have no problem speeding past the lava so make sure your Max Speed and Acceleration are up to the challenge."}updateTrackedMaxStats(e){if(e.isAvailable){if(""===this.globalVar.trackedStats.highestMaxSpeed)this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var i=parseFloat(this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestMaxSpeed.replaceAll(",","").indexOf(" ")));e.currentStats.maxSpeedMs>i&&(this.globalVar.trackedStats.highestMaxSpeed=e.currentStats.maxSpeedMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAccelerationRate)this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")";else{var r=parseFloat(this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAccelerationRate.replaceAll(",","").indexOf(" ")));e.currentStats.accelerationMs>r&&(this.globalVar.trackedStats.highestAccelerationRate=e.currentStats.accelerationMs.toLocaleString("en-US")+" m/s ("+e.name+")")}if(""===this.globalVar.trackedStats.highestStamina)this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")";else{var a=parseFloat(this.globalVar.trackedStats.highestStamina.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestStamina.replaceAll(",","").indexOf(" ")));e.currentStats.stamina>a&&(this.globalVar.trackedStats.highestStamina=e.currentStats.stamina.toLocaleString("en-US")+" ("+e.name+")")}if(""===this.globalVar.trackedStats.highestPowerEfficiency)this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")";else{var o=parseFloat(this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestPowerEfficiency.replaceAll(",","").indexOf(" ")));e.currentStats.powerMs>o&&(this.globalVar.trackedStats.highestPowerEfficiency=e.currentStats.powerMs.toLocaleString("en-US")+"% ("+e.name+")")}if(""===this.globalVar.trackedStats.highestFocusDistance)this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")";else{var s=parseFloat(this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestFocusDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>s&&(this.globalVar.trackedStats.highestFocusDistance=e.currentStats.focusMs.toLocaleString("en-US")+" m ("+e.name+")")}if(""===this.globalVar.trackedStats.highestAdaptabilityDistance)this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")";else{var l=parseFloat(this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").substring(0,this.globalVar.trackedStats.highestAdaptabilityDistance.replaceAll(",","").indexOf(" ")));e.currentStats.focusMs>l&&(this.globalVar.trackedStats.highestAdaptabilityDistance=e.currentStats.adaptabilityMs.toLocaleString("en-US")+" m ("+e.name+")")}}}shouldShowSlowSegmentWarning(e){var i=!1;if(void 0===e)return i;if((e.currentStats.acceleration<=10||e.currentStats.topSpeed<=10||e.currentStats.endurance<=10||e.currentStats.power<=10||e.currentStats.focus<=10||e.currentStats.adaptability<=10)&&(console.log("Stats too low: "+e.currentStats.acceleration+" "+e.currentStats.topSpeed+" "+e.currentStats.endurance+" "+e.currentStats.power+" "+e.currentStats.focus+" "+e.currentStats.adaptability),i=!0),null!=this.globalVar.eventRaceData){var a=this.globalVar.eventRaceData.totalDistance/this.globalVar.eventRaceData.totalSegments/this.globalVar.eventRaceData.segmentTime;a>3*e.currentStats.maxSpeedMs&&(console.log("Max Speed Too Low: "+a+" > "+3*e.currentStats.maxSpeedMs),i=!0),e.currentStats.focusMs<a/5&&(console.log("Not Focused Enough: "+e.currentStats.focusMs+" < "+a/30),i=!0)}return i}devModeInitialize(e,i){var r=this.globalVar.resources.find(m=>"Coins"===m.name);if(void 0!==r&&(r.amount=1e6),this.globalVar.resources.some(m=>"Medals"===m.name)){var a=this.globalVar.resources.find(m=>"Medals"===m.name);void 0!==a&&(a.amount+=e+1e7)}else this.globalVar.resources.push(this.initializeService.initializeResource("Medals",e+1e5,G.Resources));if(this.globalVar.resources.push(this.initializeService.initializeResource("Talent Points",1e3,G.Resources)),this.globalVar.resources.push(this.initializeService.initializeResource("Tokens",1e3,G.Resources)),this.globalVar.resources.some(m=>"Renown"===m.name)){var o=this.globalVar.resources.find(m=>"Renown"===m.name);void 0!==o&&(o.amount+=5e4)}else this.globalVar.resources.push(this.initializeService.initializeResource("Renown",5e4,G.Resources));this.globalVar.resources.push(this.initializeService.initializeResource("Facility Level",1e3,G.Progression)),this.globalVar.resources.push(this.initializeService.initializeResource("Research Level",e,G.Progression));for(var s=1;s<=e;s++){var l=this.utilityService.getCircuitRankFromNumericValue(s);this.globalVar.circuitRank=l,this.checkCircuitRankRewards(),this.GenerateCircuitRacesForRank(this.globalVar.circuitRank)}var c=5,u=1,d=1;1===i?(c=50,u=50):2===i?(c=100,u=250,d=3):3===i?(c=500,u=500,d=7):4===i&&(c=1e3,u=1e3,d=12),this.globalVar.animals.forEach(m=>{m.currentStats.topSpeed=c,m.currentStats.acceleration=c,m.currentStats.endurance=c,m.currentStats.power=c,m.currentStats.focus=c,m.currentStats.adaptability=c,m.breedLevel=u,m.incubatorStatUpgrades.maxSpeedModifier=d,m.incubatorStatUpgrades.accelerationModifier=d,m.incubatorStatUpgrades.staminaModifier=d,m.incubatorStatUpgrades.powerModifier=d,m.incubatorStatUpgrades.focusModifier=d,m.incubatorStatUpgrades.adaptabilityModifier=d,m.ability.abilityLevel=m.breedLevel+25,m.availableAbilities.forEach(b=>{b.abilityLevel=m.breedLevel+25}),this.calculateAnimalRacingStats(m)})}}return t.\u0275fac=function(e){return new(e||t)(Ue(kn),Ue(Jm),Ue(Ul))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Wt=(()=>{return(t=Wt||(Wt={})).None="None",t.BreedingGrounds="Breeding Grounds",t.TrainingFacility="Training Facility",t.Attraction="Attraction",t.ResearchCenter="Research Center",Wt;var t})(),qe=(()=>{return(t=qe||(qe={}))[t.inspiration=0]="inspiration",t[t.navigator=1]="navigator",t[t.flowingCurrent=2]="flowingCurrent",t[t.bigBrain=3]="bigBrain",t[t.camouflage=4]="camouflage",t[t.herdMentality=5]="herdMentality",t[t.specialDelivery=6]="specialDelivery",t[t.deepBreathing=7]="deepBreathing",t[t.redBaton=8]="redBaton",t[t.blueBaton=9]="blueBaton",t[t.violetBaton=10]="violetBaton",t[t.greenBaton=11]="greenBaton",t[t.orangeBaton=12]="orangeBaton",t[t.yellowBaton=13]="yellowBaton",t[t.supportMaxSpeedRelay=14]="supportMaxSpeedRelay",t[t.supportAccelerationRelay=15]="supportAccelerationRelay",t[t.supportStaminaRelay=16]="supportStaminaRelay",t[t.supportPowerRelay=17]="supportPowerRelay",t[t.supportFocusRelay=18]="supportFocusRelay",t[t.supportAdaptabilityRelay=19]="supportAdaptabilityRelay",t[t.supportBurstDistance=20]="supportBurstDistance",t[t.supportBurstChance=21]="supportBurstChance",t[t.supportAbilityCooldown=22]="supportAbilityCooldown",t[t.supportAbilityEfficiency=23]="supportAbilityEfficiency",qe;var t})();let bi=(()=>{class t{constructor(e,i,r){this.globalService=e,this.utilityService=i,this.sanitizer=r}recalculateAllAnimalStats(){this.globalService.globalVar.animals.forEach(e=>{this.globalService.calculateAnimalRacingStats(e)})}getAnimalsFromAnimalDeck(e){var i=[];return null==e||void 0===e.selectedAnimals||0===e.selectedAnimals.length||e.selectedAnimals.forEach(r=>{var a=this.globalService.globalVar.animals.find(o=>o.type===r.type);void 0!==a&&i.push(a)}),i}getPrimaryDeck(){return this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck)}getResourceByName(e){var i=this.globalService.globalVar.resources.find(r=>r.name===e);return void 0!==i?i.amount:0}spendResourceByName(e,i){var r=this.globalService.globalVar.resources.find(a=>a.name===e);void 0!==r&&(r.amount-=i)}gainResourceByName(e,i,r){var a=this.globalService.globalVar.resources.find(o=>o.name===e);void 0!==a?a.amount+=i:this.globalService.globalVar.resources.push(new ie(e,i,r))}getFacilityLevel(){var e=this.globalService.globalVar.resources.find(i=>"Facility Level"===i.name);return void 0!==e?e.amount:0}getResearchLevel(){var e=this.globalService.globalVar.resources.find(i=>"Research Level"===i.name);return void 0!==e?e.amount:0}getCoins(){var e=this.globalService.globalVar.resources.find(i=>"Coins"===i.name);return void 0!==e?e.amount:0}spendCoins(e){var i=this.globalService.globalVar.resources.find(r=>"Coins"===r.name);void 0!==i&&(i.amount-=e)}getMedals(){var e=this.globalService.globalVar.resources.find(i=>"Medals"===i.name);return void 0!==e?e.amount:0}spendMedals(e){var i=this.globalService.globalVar.resources.find(r=>"Medals"===r.name);void 0!==i&&(i.amount-=e)}getTokens(){var e=this.globalService.globalVar.resources.find(i=>"Tokens"===i.name);return void 0!==e?e.amount:0}spendTokens(e){var i=this.globalService.globalVar.resources.find(r=>"Tokens"===r.name);void 0!==i&&(i.amount-=e)}getRenown(){var e=this.globalService.globalVar.resources.find(i=>"Renown"===i.name);return void 0!==e?e.amount:0}addResourceToResourceList(e,i){if(void 0!==i)if(i.some(a=>a.name===e.name)){var r=i.find(a=>a.name===e.name);void 0!==r&&(r.amount+=e.amount)}else i.push(e)}getRenownCoinModifier(e,i){var r=1;return r=e<=50?e:500*Math.log10(.0035*(e-50)+1)+50,i||(r/=100,r+=1),r}getStockbreeder(){var e=this.globalService.globalVar.resources.find(i=>"Stockbreeder"===i.name);return void 0!==e?e.amount:0}getAnimalByType(e){var i=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==i?i:null}getMaxSpeedModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultMaxSpeedModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,Se.topSpeed),u=1;o.talentTree.talentTreeType===yt.longDistance&&(u=1+o.talentTree.column2Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.maxSpeedModifier*u}return i}getAccelerationModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultAccelerationModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,Se.acceleration),u=1;o.talentTree.talentTreeType===yt.sprint&&(u=1+o.talentTree.column2Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.accelerationModifier*u}return i}getStaminaModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultStaminaModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,Se.endurance),u=1;o.talentTree.talentTreeType===yt.longDistance&&(u=1+o.talentTree.column3Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.staminaModifier*u}return i}getPowerModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultPowerModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,Se.power),u=1;o.talentTree.talentTreeType===yt.sprint&&(u=1+o.talentTree.column3Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.powerModifier*u}return i}getFocusModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultFocusModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,Se.focus),u=1;o.talentTree.talentTreeType===yt.longDistance&&(u=1+o.talentTree.column1Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.focusModifier*u}return i}getAdaptabilityModifierByAnimalType(e){var i=0,r=.01,a=0,o=this.globalService.globalVar.animals.find(d=>d.type===e);if(null!=o){var s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(r=s.value),r=1+r*(o.breedLevel-1);var l=this.globalService.globalVar.modifiers.find(d=>d.text===L[e].toLowerCase()+"DefaultAdaptabilityModifier");null!=l&&(a=l.value);var c=this.globalService.getTraitModifier(o,Se.adaptability),u=1;o.talentTree.talentTreeType===yt.sprint&&(u=1+o.talentTree.column1Row3Points/100),i=a*r*c*o.incubatorStatUpgrades.adaptabilityModifier*u}return i}getTrainingBreedGaugeIncrease(e,i){var r=0,a=this.globalService.globalVar.modifiers.find(s=>"trainingBreedGaugeIncrease"===s.text);if(null!=a&&(r=a.value),void 0!==i&&null!=i.miscStats.bonusBreedXpGainFromTraining&&i.miscStats.bonusBreedXpGainFromTraining>0&&(r+=i.miscStats.bonusBreedXpGainFromTraining),e>0){var o=this.globalService.globalVar.modifiers.find(s=>"breedingGroundsSpecializationModifier"===s.text);null!=o&&(r*=1+e*o.value)}return void 0!==i&&i.previousBreedLevel>i.breedLevel&&(r*=10),r}getCircuitBreedGaugeIncrease(e){var i=0,r=this.globalService.globalVar.modifiers.find(a=>"circuitBreedGaugeIncrease"===a.text);return null!=r&&(i=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromCircuitRaces&&e.miscStats.bonusBreedXpGainFromCircuitRaces>0&&(i+=e.miscStats.bonusBreedXpGainFromCircuitRaces),void 0!==e&&e.previousBreedLevel>e.breedLevel&&(i*=10),i}getLocalBreedGaugeIncrease(e){var i=0,r=this.globalService.globalVar.modifiers.find(a=>"localBreedGaugeIncrease"===a.text);return null!=r&&(i=r.value),void 0!==e&&null!=e.miscStats.bonusBreedXpGainFromLocalRaces&&e.miscStats.bonusBreedXpGainFromLocalRaces>0&&(i+=e.miscStats.bonusBreedXpGainFromLocalRaces),void 0!==e&&e.previousBreedLevel>e.breedLevel&&(i*=10),i}getTotalRacersByRace(e){var i=2;return e.localRaceType===Ut.Track?i=13:this.getResourceByName("Money Mark")>0&&(i+=1),i}getDiminishingReturnsThreshold(e){var i=null==e?20:e.currentStats.diminishingReturnsDefaultStatThreshold,r=this.globalService.globalVar.modifiers.find(a=>"facilityLevelModifier"===a.text);return void 0!==r&&(i+=this.getFacilityLevel()*r.value),i}getBreedLevelPopover(e){var i=.2,r=this.globalService.globalVar.modifiers.find(a=>"breedLevelStatModifier"===a.text);return null!=r&&(i=r.value),"Increase racing stat gain from base stats by "+(i*(e-1)*100).toFixed(0)+"%"}getResourcePopover(e,i){if("Coins"===e)return"Good ol classic Coins. Gain from most races and buy items from the shop with this.";if("Medals"===e)return"Rare currency gained from improving your circuit rank.";if("Renown"===e){var r=this.getRenown();return"Increases Coins gained from races by "+this.getRenownCoinModifier(r,!0).toFixed(2)+"%. Increase total number of free races available per reset period by 1 for every 100 renown for a total of "+this.getTotalFreeRacesPerPeriod()+". Complete circuit or free races to get your name out there and raise your renown."}return"Facility Level"===e?"Increase Diminishing Returns value by 5 for each level for a total of "+this.getDiminishingReturnsThreshold()+". You can increase a base stat up to your Diminishing Returns value before that base stat starts to increase your racing stats less and less.":"Tokens"===e?"Currency used to purchase items from the Event Shop.":"Talent Points"===e?"Use to improve any of your racers' talents. Each of these applies to all racers.":"Research Level"===e?"Increase incubator trait values by "+this.getResourceByName(e)+"% and unlock new available traits.":"Apples"===e||"Bananas"===e||"Oranges"===e||"Strawberries"===e||"Turnips"===e||"Carrots"===e||"Mangoes"===e?this.globalService.getItemDescription(e):"Bonus Breed XP Gain From Training"===e?"Increase Breed XP gained from training by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Free Races"===e?"Increase Breed XP gained from completing free races by this amount. Only applies to this animal.":"Bonus Breed XP Gain From Circuit Races"===e?"Increase Breed XP gained from completing circuit races by this amount. Only applies to this animal.":"Diminishing Returns per Facility Level"===e?"Increase Diminishing Returns value by this amount for every Facility Level you have. Only applies to this animal.":"Orb Pendant"===e?"This looks like the perfect size to fit an orb inside.":"Training Time Reduction"===e?"Reduce training times by this percent. Only applies to this animal.":"Bonus Talents"===e?"Increase talent point amount for this animal.":i===G.Specialty?this.getSpecialtyItemDescription(e):i===G.Equipment?this.globalService.getEquipmentDescription(e):""}getAllRaceCourseTypes(){var e=[];for(let i in W)isNaN(Number(i))&&e.push(i);return e}getCourseTypeFromAnimalType(e){var i=this.globalService.globalVar.animals.find(r=>r.type===e);return void 0!==i?i.raceCourseType:-1}getTalentTreeNameByEnum(e){var i="";return e===yt.sprint&&(i="Sprint"),e===yt.support&&(i="Support"),e===yt.longDistance&&(i="Long Distance"),i}getAllBarnSpecializations(){var e=[];return e.push("Breeding Grounds"),e.push("Training Facility"),this.isItemUnlocked("attractionSpecialization")&&e.push("Attraction"),this.isItemUnlocked("researchCenterSpecialization")&&e.push("Research Center"),e}getTrackRaceRewards(e){var i=[];return e===ln.novice?(i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Training"),i.push("- 50 Coins"),i.push("- +1 Bonus Breed XP Gain From Free Races")):e===ln.intermediate?(i.push("- 200 Coins"),i.push("- +2 Bonus Breed XP Gain From Training"),i.push("- 1 Medal"),i.push("- +2 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- +5 Bonus Breed XP Gain From Circuit Races"),i.push("- 200 Coins"),i.push("- +2 Bonus Breed XP Gain From Training"),i.push("- 1 Medal"),i.push("- +2 Bonus Breed XP Gain From Free Races"),i.push("- +1% Training Time Reduction"),i.push("- +3 Diminishing Returns per Facility Level")):e===ln.master&&(i.push("- +5 Bonus Breed XP Gain From Free Races"),i.push("- +2 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- 1000 Coins"),i.push("- +3 Bonus Breed XP Gain From Training"),i.push("- +2 Talents"),i.push("- +1% Training Time Reduction"),i.push("- 1000 Coins"),i.push("- Orb Pendant"),i.push("- +3 Diminishing Returns per Facility Level"),i.push("- +1% Training Time Reduction"),i.push("- +3 Talents")),i}getGrandPrixTokenRewards(){var e=[],i=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),r=5e7,a=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken1MeterModifier"===C.text);null!=a&&(r=a.value);var o=5e7,s=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken2MeterModifier"===C.text);null!=s&&(o=s.value);var l=5e7,c=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken3MeterModifier"===C.text);null!=c&&(l=c.value);var u=5e7,d=this.globalService.globalVar.modifiers.find(C=>"grandPrixToken4MeterModifier"===C.text);null!=d&&(u=d.value);var v=1*i,m=2*i,b=3*i,y=4*i;return e.push((r*i).toLocaleString()+" meters - +"+v+" Token"+(v>1?"s":"")),e.push((o*i).toLocaleString()+" meters - +"+m+" Tokens"),e.push((l*i).toLocaleString()+" meters - +"+b+" Tokens"),e.push((u*i).toLocaleString()+" meters - +"+y+" Tokens"),e}getRenownRequiredForEventShopTier(e){return 1===e?0:2===e?200:e>2?500*(e-2):-1}getHighestEventShopTierUnlocked(){var e=1,i=this.getRenown();return i>200&&(e=2),i>500&&(e=Math.floor(i/500)+2),e}isItemUnlocked(e){var i=!1,r=this.globalService.globalVar.unlockables.get(e);return null!=r&&(i=r),i}getAnimalsByRaceCourseType(e){var i=[];return"Flatland"===e?(i.push(L[L.Horse]),i.push(L[L.Cheetah]),i.push(L[L.Hare]),i.push(L[L.Warthog])):"Mountain"===e?(i.push(L[L.Monkey]),i.push(L[L.Goat]),i.push(L[L.Gecko])):"Ocean"===e?(i.push(L[L.Dolphin]),i.push(L[L.Shark]),i.push(L[L.Octopus]),i.push(L[L.Whale])):"Tundra"===e?(i.push(L[L.Penguin]),i.push(L[L.Caribou])):"Volcanic"===e&&(i.push(L[L.Salamander]),i.push(L[L.Fox])),i}GetAbilityEffectiveAmount(e,i,r,a,o){if(null==e.ability||null==e.ability.name)return-1;null==i&&(i=1),null==r&&(r=1);var s=1;e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.5),e.type===L.Warthog&&"Graze"===e.ability.name&&void 0!==o&&(s*=1+.1*o.filter(b=>"Power"===b[0]).length),e.talentTree.talentTreeType===yt.sprint&&(s*=1+.05*e.talentTree.column3Row2Points);var l=e.ability;null!=a&&(l=a);var c=1;null!=e.talentTree&&null!=e.raceVariables&&e.talentTree.talentTreeType===yt.sprint&&!e.raceVariables.firstAbilityUseEffectApplied&&(c*=1+.05*e.talentTree.column3Row4Points,e.raceVariables.firstAbilityUseEffectApplied=!0);var u=1;if(null!=e.raceVariables&&null!=e.raceVariables.relayEffects){var d=this.getRelayEffectFromListByType(e.raceVariables.relayEffects,qe.supportAbilityEfficiency);void 0!==d&&void 0!==d.additionalValue&&(u=d.additionalValue)}return(l.efficiency*u*c+l.efficiency*(.01*(l.abilityLevel-1)))*(1+e.currentStats.powerMs*s*i*r/100)}getAnimalAbilityDescription(e,i,r){if(e){if("Second Wind"===i)return"Stamina does not go down for a short period";if("Inspiration"===i)return"Increase next racer's max speed on relay";if("Pacemaker"===i)return"Increase acceleration for a short period";if("Sprint"===i)return"Increase max speed, acceleration, stamina cost for a short period";if("Giving Chase"===i)return"Increase acceleration when behind competitors";if("On The Hunt"===i)return"Gain max speed after each burst";if("Awareness"===i)return"Increase adaptability, focus for a short period";if("Prey Instinct"===i)return"Start in extended burst mode";if("Nap"===i)return"Delay leg start, increase max speed and focus";if("Graze"===i)return"Increase stats at random";if("Mud Pit"===i)return"Focus loss is longer, gain acceleration and lose less stamina";if("Time To Tussle"===i)return"Delay competitors when you complete your leg faster than the average pace";if("Landslide"===i)return"Delay competitors";if("Frenzy"===i)return"Increase burst distance, cannot stumble or lose focus during burst";if("Leap"===i)return"Jump to the end of the leg";if("Echolocation"===i)return"Increase adaptability, ignore negative terrain effects for a short period";if("Navigator"===i)return"Increase previous and next racer's adaptability";if("Flowing Current"===i)return"Increase next racer's acceleration on relay";if("Apex Predator"===i)return"Slow competitors if they pass you";if("Feeding Frenzy"===i)return"Slow next and previous racers, increase max speed and acceleration for a distance";if("Blood In The Water"===i)return"Increase max speed when ahead of competitors";if("Propulsion"===i)return"Dash a short distance";if("Buried Treasure"===i)return"Delay your start, increase coin gain for winning race";if("Big Brain"===i)return"Increase power of other racers after bursting a certain number of times";if("Storing Power"===i)return"Reduce max speed, gain increased max speed on burst";if("Unparalleled Focus"===i)return"Gain velocity floor after keeping focus for long enough";if("Whalesong"===i)return"Gain different stat boosts on use";if("Sure-footed"===i)return"Increase adaptability after not stumbling through path";if("Deep Breathing"===i)return"Regain stamina after burst, increase other racers' stamina";if("In The Rhythm"===i)return"Increase burst speed bonus";if("Sticky"===i)return"Cannot stumble for a short period";if("Night Vision"===i)return"Increase max speed by keeping focused";if("Camouflage"===i)return"Transfer velocity to next racer on relay";if("Herd Mentality"===i)return"Grant next racer portion of your stamina, they start in burst mode";if("Great Migration"===i)return"Sacrifice stamina for acceleration for a short period";if("Special Delivery"===i)return"Increase other racers' burst max speed bonus based on stamina";if("Careful Toboggan"===i)return"Increase adaptability for a short period";if("Wild Toboggan"===i)return"Increase max drift penalty, acceleration based on drift";if("Quick Toboggan"===i)return"Increase max speed if you do not drift";if("Cold Blooded"===i)return"Reduce stamina loss and increase focus distance for a short period based on distance in leg";if("Burrow"===i)return"Avoid lava fall, prevent stumbles for a short period";if("Heat Up"===i)return"Increase acceleration for a short period, gets stronger every use";if("Trickster"===i)return"Decrease one random stat, increase a different random stat for a short period";if("Fleeting Speed"===i)return"Increase max speed greatly, lose over time";if("Nine Tails"===i)return"Increase random stat for a short period, effect can stack"}else{var a="",o=void 0;if(null==r&&this.globalService.globalVar.animals.forEach(u=>{u.availableAbilities.forEach(d=>{d.name===i&&(r=u,o=d,null!=d.cooldown&&(a=d.cooldown.toString()))})}),null!=r){var s=this.GetAbilityEffectiveAmount(r,void 0,void 0,o).toLocaleString(void 0,{minimumFractionDigits:2});""===a&&null!=r.ability.cooldown&&(a=r.ability.cooldown.toString());var l="";return"Second Wind"===i?"Stamina does not decrease for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Inspiration"===i?"When the next racer starts, they gain 25% of your Max Speed for <span class='keyword'>"+s+"</span> meters. Passive.":"Pacemaker"===i?"Increase Acceleration Rate by 50% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Sprint"===i?" Gain 35% Max Speed and Acceleration Rate for <span class='keyword'>"+s+"</span> meters, but lose twice as much stamina as normal. "+a+" second cooldown.":"Giving Chase"===i?"While you are behind the average pace, increase Acceleration Rate by <span class='keyword'>"+s+"</span>%. Passive.":"On The Hunt"===i?"Every time you Burst, increase your Max Speed by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Awareness"===i?"Boosts Focus Distance and Adaptability Distance by 40% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Prey Instinct"===i?"Starts its leg in Burst mode that continues for an additional <span class='keyword'>"+s+"</span> meters. Passive.":"Nap"===i?"Sleep until the competition has traveled a distance equal to <span class='keyword'>"+s+"</span> meters from the end of your leg. Max Speed and Focus Distance are then doubled. Passive.":"Graze"===i?"Forage for food, gaining a 10% increase to a random stat for <span class='keyword'>"+s+"</span> meters. This effect can stack. "+a+" second cooldown.":"Mud Pit"===i?"Right after losing focus, roll in a mud pit for 1 second. Afterwards, reduce Stamina loss by 25% and increase Burst Chance by 25% for <span class='keyword'>"+s+"</span> meters. Passive.":"Time To Tussle"===i?"If you finish your leg before the average competition, tangle with them as they pass the end of your leg. Slow them by <span class='keyword'>"+s+"</span> meters. Passive.":"Landslide"===i?"Drop rocks on competitors, delaying them <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Frenzy"===i?"Increase Burst distance by <span class='keyword'>"+s+"</span> meters. You do not stumble or lose focus while bursting. Passive.":"Leap"===i?"When you are <span class='keyword'>"+s+"</span> meters from the end of the leg, leap straight to the end over .5 seconds. Passive.":"Sure-footed"===i?"When you make it through a special path without stumbling, increase your Adaptability Distance by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Deep Breathing"===i?"Every time you Burst, regain <span class='keyword'>"+s+"</span>% of your stamina, up to 100%. If this amount exceeds 100% of your stamina, increase all other racers' stamina by the amount exceeded. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. Effects remain for the duration of the race.":"In The Rhythm"===i?"Increase your max speed bonus while Bursting by <span class='keyword'>"+s+"</span>%. Passive.":"Sticky"===i?"Cannot stumble for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Night Vision"===i?"Increase Max Speed by <span class='keyword'>"+s+"</span>% for every path you complete without losing focus. If you lose focus, reset this bonus back to 0%. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Camouflage"===i?"The velocity you finish your leg at is given to your following racer on Relay. Decrease this amount to 0 evenly over <span class='keyword'>"+s+"</span> meters. The following racer can break their max speed by up to 50% while this is active. Passive.":"Echolocation"===i?"Increase your Adaptability Distance by 75% for <span class='keyword'>"+s+"</span> meters and ignore any negative effects from the terrain. "+a+" second cooldown.":"Navigator"===i?"Assist the previous racer and next racer, boosting their Adaptability Distance by 25% of your max for the last and first <span class='keyword'>"+s+"</span> meters of their legs respectively. Passive.":"Flowing Current"===i?"When relaying, increase the Acceleration Rate of your next racer by 25% of your Acceleration Rate for <span class='keyword'>"+s+"</span> meters. Passive.":"Apex Predator"===i?"If the competitors moving at the average pace pass the shark during its leg, immediately bite them, slowing their pace by 50% for <span class='keyword'>"+s+"</span> meters. Can only occur once. Passive.":"Feeding Frenzy"===i?"Increase Max Speed and Acceleration Rate by 50% for the first and last <span class='keyword'>"+s+"</span> meters of your leg. Your next and previous racers have a 10% Max Speed reduction. Passive.":"Blood In The Water"===i?"While you are ahead of the average pace, increase Max Speed by <span class='keyword'>"+s+"</span>%. Passive.":"Propulsion"===i?"Dash <span class='keyword'>"+s+"</span> meters over .25 seconds. "+a+" second cooldown.":"Buried Treasure"===i?"Delay your start to search for treasure until the competition has traveled a distance equal to <span class='keyword'>"+s+"</span> meters from the end of your leg. If you still win the race, increase your Coin reward by 25%. Passive.":"Big Brain"===i?"After Bursting through one third of your race paths, increase Power Efficiency of all remaining racers by <span class='keyword'>"+s+"</span>%. Passive.<br/><em>During Event Races:</em> Can trigger up to 5 times. Effects remain for the duration of the race.":"Storing Power"===i?"On use, reduce Max Speed by 10% for <span class='keyword'>"+s+"</span> meters. If you burst while this is active, regain double the amount of Max Speed lost for the rest of the race. "+a+" second cooldown.":"Unparalleled Focus"===i?"Every time you complete 3 paths in a row without losing focus, gain a 20% velocity floor for <span class='keyword'>"+s+"</span> meters. While this is active, your velocity cannot drop below 20% of your Max Speed, and all calculations will consider that number to be 0% of your Max Speed. Passive.":"Whalesong"===i?"Gain 30% to a particular stat for <span class='keyword'>"+s+"</span> meters based on how many times you have used this ability, as follows:<br/>First Use - Gain 30% Adaptability Distance.<br/>Second Use - Gain 30% Burst Distance.<br/>Third Use - Gain 30% Acceleration Rate.<br/>Fourth Use - Gain 30% Focus Distance.<br/>Fifth Use - Gain 30% Max Speed.<br/>After 5 uses, every subsequent use will give 30% to all of these stats. "+ +a+" second cooldown.":"Herd Mentality"===i?"After completing your leg, <span class='keyword'>"+s+"</span>% of your remaining Stamina is given to the next racer and they start their leg in Burst mode. This does not occur if you run out of Stamina during your leg. Passive.":"Great Migration"===i?"Reduce stamina by 10%. For <span class='keyword'>"+s+"</span> meters, Acceleration Rate is increased by 25% of the amount of stamina lost. "+a+" second cooldown.":"Special Delivery"===i?"Increase all remaining racers' Burst Max Speed Bonus by <span class='keyword'>"+s+"</span>% of your remaining Stamina percentage, up to 100%, after completing your leg. This does not occur if you run out of Stamina during your leg. Passive.<br/><em>During Event Races:</em> Relay effectiveness reduced to 25%. Can trigger up to 25 times. This does not occur if your energy is below 100% at the end of the segment. Effects remain for the duration of the race.":"Careful Toboggan"===i?"Increase Adaptability Distance by 60% for <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Wild Toboggan"===i?"Double the maximum amount of drift per path. Increase Acceleration Rate by up to <span class='keyword'>"+s+"</span>% based on how much you drift. Passive.":"Quick Toboggan"===i?"Every time you make it through a path without drifting, gain <span class='keyword'>"+s+"</span>% Max Speed. Passive.<br/><em>During Event Races:</em> Can trigger up to 25 times. Bonus lost after relaying.":"Cold Blooded"===i?"Increase Focus Distance and reduce Stamina loss by up to 50% depending on how close to the center of the volcano you are. These bonuses last <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Burrow"===i?"Go underground for <span class='keyword'>"+s+"</span> meters, dodging lava fall and preventing stumbles. "+a+" second cooldown.":"Heat Up"===i?"Increase Acceleration Rate by 15% for <span class='keyword'>"+s+"</span> meters. This increase doubles every subsequent use this race. "+a+" second cooldown.":"Trickster"===i?"When active, sacrifice 25% of one random stat for 50% of another random stat. Lasts <span class='keyword'>"+s+"</span> meters. "+a+" second cooldown.":"Fleeting Speed"===i?"Increase Max Speed by <span class='keyword'>"+s+"</span>%. Decrease this bonus by 2% for every percent of the leg you complete. Passive.":"Nine Tails"===i?"At the start of each path, increase either Acceleration Rate, Max Speed, Focus Distance, or Adaptability Distance by 15% for <span class='keyword'>"+s+"</span> meters. This effect can stack. Passive.":(null===(l=this.sanitizer.sanitize(ri.HTML,this.sanitizer.bypassSecurityTrustHtml(l)))&&(l=""),l)}}return""}getBarnByBarnNumber(e){return this.globalService.globalVar.barns.find(i=>i.barnNumber===e)}getAvailableBarns(){var e=[];return e.push(this.getBarnByBarnNumber(1)),e.push(this.getBarnByBarnNumber(2)),e.push(this.getBarnByBarnNumber(3)),this.isItemUnlocked("barnRow2")&&(e.push(this.getBarnByBarnNumber(4)),e.push(this.getBarnByBarnNumber(5)),e.push(this.getBarnByBarnNumber(6))),this.isItemUnlocked("barnRow3")&&(e.push(this.getBarnByBarnNumber(7)),e.push(this.getBarnByBarnNumber(8)),e.push(this.getBarnByBarnNumber(9))),this.isItemUnlocked("barnRow4")&&(e.push(this.getBarnByBarnNumber(10)),e.push(this.getBarnByBarnNumber(11)),e.push(this.getBarnByBarnNumber(12))),this.isItemUnlocked("barnRow5")&&(e.push(this.getBarnByBarnNumber(13)),e.push(this.getBarnByBarnNumber(14)),e.push(this.getBarnByBarnNumber(15))),e}getResourcesForBarnUpgrade(e){var i=[],r=100;if(e<10)r=50;else if(r=100*(e-9),e>=100&&(r=9100+500*(e-99)),e>=200&&(r=59100+1e3*(e-199)),e>=300&&(r=159100+2500*(e-299)),e>=400){var l=Math.ceil((e-399)/100);r=409100;for(var u=1;u<=l;u++){var d=e-(400+100*(u-1)-1);d>100&&(d=100),r+=2500*(u+1)*d}}var v=new ie("Coins",r);if(i.push(v),e%10==9){var m;m=Math.ceil(e/100);var b=new ie("Medals",1*m);i.push(b)}return i}getBarnName(e){var i="",r=e.getSize();return(e.barnUpgrades.specialization===Wt.None||null==e.barnUpgrades.specialization)&&(i=r+" Barn "+e.barnNumber),e.barnUpgrades.specialization===Wt.Attraction&&(i=r+" Attraction "+e.barnNumber),e.barnUpgrades.specialization===Wt.BreedingGrounds&&(i=r+" Breeding Grounds "+e.barnNumber),e.barnUpgrades.specialization===Wt.TrainingFacility&&(i=r+" Training Facility "+e.barnNumber),e.barnUpgrades.specialization===Wt.ResearchCenter&&(i=r+" Research Center "+e.barnNumber),i}getTerrainPopoverText(e,i){var r="";void 0!==i&&(r="The terrain for the "+i.getCourseTypeName()+" leg is "+e.getTerrainType()+": <br/>"),null!=e.staminaModifier&&1!==e.staminaModifier&&(r+=e.staminaModifier>1?"+"+(100*(e.staminaModifier-1)).toFixed(0)+"% stamina loss <br/>":"-"+(100*(1-e.staminaModifier)).toFixed(0)+"% stamina loss <br/>"),null!=e.maxSpeedModifier&&1!==e.maxSpeedModifier&&(r+=e.maxSpeedModifier>1?"+"+(100*(e.maxSpeedModifier-1)).toFixed(0)+"% max speed<br/>":"-"+(100*(1-e.maxSpeedModifier)).toFixed(0)+"% max speed<br/>"),null!=e.accelerationModifier&&1!==e.accelerationModifier&&(r+=e.accelerationModifier>1?"+"+(100*(e.accelerationModifier-1)).toFixed(0)+"% acceleration<br/>":"-"+(100*(1-e.accelerationModifier)).toFixed(0)+"% acceleration<br/>"),null!=e.powerModifier&&1!==e.powerModifier&&(r+=e.powerModifier>1?"+"+(100*(e.powerModifier-1)).toFixed(0)+"% power efficiency<br/>":"-"+(100*(1-e.powerModifier)).toFixed(0)+"% power efficiency<br/>"),null!=e.focusModifier&&1!==e.focusModifier&&(r+=e.focusModifier>1?"+"+(100*(e.focusModifier-1)).toFixed(0)+"% meters before losing focus<br/>":"-"+(100*(1-e.focusModifier)).toFixed(0)+"% meters before losing focus<br/>"),null!=e.adaptabilityModifier&&1!==e.adaptabilityModifier&&(r+=e.adaptabilityModifier>1?"+"+(100*(e.adaptabilityModifier-1)).toFixed(0)+"% meters before stumbling<br/>":"-"+(100*(1-e.adaptabilityModifier)).toFixed(0)+"% meters before stumbling<br/>");var a=this.utilityService.getSanitizedHtml(r);return null!=a&&(r=a),r}getInDepthSpecializationDescription(e){var i="";if("Breeding Grounds"===e){var r=0,a=this.globalService.globalVar.modifiers.find(w=>"breedingGroundsSpecializationModifier"===w.text);null!=a&&(r=a.value),i="For every 10 levels, gain "+100*r+"% additional breed XP when completing a training."}else if("Training Facility"===e)i="For every 10 levels up to level 200, gain 1% training time reduction. For every 10 levels after level 200, gain a .1 stat multiplier for every stat.";else if("Attraction"===e){var o=60,s=this.globalService.globalVar.modifiers.find(w=>"attractionTimeToCollectModifier"===w.text);null!=s&&(o=s.value);this.globalService.globalVar.modifiers.find(w=>"attractionAmountModifier"===w.text);i="Gain a certain amount of Coins every "+o+" seconds while an animal trains in this barn. At level 10, you gain 20 Coins and every subsequent 10 levels adds an additional 20 Coins * Specialization Level."}else if("Research Center"===e){var u=this.globalService.globalVar.modifiers.find(w=>"researchCenterIncrementsModifier"===w.text),d=this.globalService.globalVar.modifiers.find(w=>"researchCenterTrainingAnimalModifier"===w.text),v=this.globalService.globalVar.modifiers.find(w=>"researchCenterStudyingAnimalModifier"===w.text),m=this.globalService.globalVar.modifiers.find(w=>"researchCenterMaxStatGainModifier"===w.text),b=.05,y=.45,C=.25,k=.5;null!=u&&(b=u.value),null!=d&&(y=d.value),null!=v&&(C=v.value),null!=m&&(k=m.value),i="To start, the animal training at the Research Center only gains "+100*(y+b)+"% of the stat values from their training. Another animal at random will gain "+100*C+"% of the stat values from training, prioritizing animals of the same course type. For every 10 levels, "+100*b+"% additional stat gain will be distributed up to "+100*k+"% starting with the training animal and then the other animal. Additional animals will gain stats after maxing out the previous."}return i}convertSpecializationNameToEnum(e){return"Breeding Grounds"===e?Wt.BreedingGrounds:"Training Facility"===e?Wt.TrainingFacility:"Attraction"===e?Wt.Attraction:"Research Center"===e?Wt.ResearchCenter:Wt.None}convertTalentTreeNameToEnum(e){return"Sprint"===e?yt.sprint:"Support"===e?yt.support:"Long Distance"===e?yt.longDistance:yt.none}convertSpecializationEnumToName(e){return e===Wt.BreedingGrounds?"Breeding Grounds":e===Wt.TrainingFacility?"Training Facility":e===Wt.Attraction?"Attraction":e===Wt.ResearchCenter?"Research Center":"None"}getTrainingTimeReductionFromTrainingFacility(e){return e.specialization===Wt.TrainingFacility?.01*e.specializationLevel:0}getTrainingProgressionAnimationText(e){var i="";return e.affectedStatRatios.topSpeed>0&&(i+="+SPD\n"),e.affectedStatRatios.acceleration>0&&(i+="+ACC\n"),e.affectedStatRatios.endurance>0&&(i+="+END\n"),e.affectedStatRatios.power>0&&(i+="+PWR\n"),e.affectedStatRatios.focus>0&&(i+="+FCS\n"),e.affectedStatRatios.adaptability>0&&(i+="+ADP\n"),i}relayEffectTypeStacksEffectiveness(e){var i=!1;return(e===qe.bigBrain||e===qe.herdMentality||e===qe.deepBreathing||e===qe.specialDelivery)&&(i=!0),i}relayEffectPersistsEventSegments(e){var i=!1;return(e===qe.bigBrain||e===qe.redBaton||e===qe.blueBaton||e===qe.greenBaton||e===qe.orangeBaton||e===qe.violetBaton||e===qe.yellowBaton)&&(i=!0),i}getBreedLevelRequiredForGrandPrix(){var e=50,i=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}canAnimalTrain(e){var i=!0;this.globalService.globalVar.incubator.assignedAnimal===e&&(i=!1);var r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(i=!1),i}canAnimalRace(e){var i=!0,r=this.globalService.getCurrentlyActiveGrandPrixRacingAnimal();return e.type===r.type&&(i=!1),i}getTraitStatGainDescription(e){var i="",r="";return e.positiveStatGain===Se.acceleration&&(i="Acceleration"),e.positiveStatGain===Se.adaptability&&(i="Adaptability"),e.positiveStatGain===Se.endurance&&(i="Endurance"),e.positiveStatGain===Se.focus&&(i="Focus"),e.positiveStatGain===Se.power&&(i="Power"),e.positiveStatGain===Se.topSpeed&&(i="Speed"),e.negativeStatGain===Se.acceleration&&(r="Acceleration"),e.negativeStatGain===Se.adaptability&&(r="Adaptability"),e.negativeStatGain===Se.endurance&&(r="Endurance"),e.negativeStatGain===Se.focus&&(r="Focus"),e.negativeStatGain===Se.power&&(r="Power"),e.negativeStatGain===Se.topSpeed&&(r="Speed"),"+"+e.researchLevel+"% "+i+", -"+(e.researchLevel>25?25:e.researchLevel)+"% "+r}getSpecialtyItemDescription(e){var i="",r=5,a=this.globalService.globalVar.modifiers.find(m=>"internationalRacesToMedalModifier"===m.text);null!=a&&(r=a.value);var o=10,s=this.globalService.globalVar.modifiers.find(m=>"nationalRacesToMedalModifier"===m.text);null!=s&&(o=s.value);var l=5,c=this.globalService.globalVar.modifiers.find(m=>"whistleModifier"===m.text);null!=c&&(l=c.value);var u=5,d=this.globalService.globalVar.modifiers.find(m=>"goldenWhistleModifier"===m.text);null!=d&&(u=d.value),"Stopwatch"===e?i="Reduce training time by 5%":"Animal Handler"===e?i="Retain 2% of trained stats after breeding":"Course Maps"===e?i="Increase your chance to burst during special routes by 10%":"Stockbreeder"===e?i="Add option to auto breed when Breed XP is full":"Scouts"===e?i="You can choose the order of race legs for each relay team":"Money Mark"===e?i="Add new indicator to race, beat its time to gain increased coins":"National Races"===e?i="Gain 1 medal for every "+o+" free races you complete":"International Races"===e?i="Gain 1 medal for every "+r+" free races you complete":"Team Manager"===e?i="Automatically run 1 additional free race per reset period <em>(banks 8 hours worth of races when away from the game)</em>":"Incubator Upgrade Lv1"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .01 per Breed. <em>(10% trait value)</em>":"Incubator Upgrade Lv2"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .025 per Breed. <em>(25% trait value)</em>":"Incubator Upgrade Lv3"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .05 per Breed. <em>(50% trait value)</em>":"Incubator Upgrade Lv4"===e?i="When breeding, gain a permanent stat modifier equal to 10% of positive trait bonus, up to a maximum additional modifier of .1 per Breed. <em>(100% trait value)</em>":"Whistle"===e?i="Gain +"+l+" to a stat instead of +1 after a successful coaching attempt":"Golden Whistle"===e?i="Gain +"+u+" to a stat instead of +"+l+" after a successful coaching attempt":"Talent Point Voucher"===e&&(i="Increase Talent Points by 1");var v=this.sanitizer.sanitize(ri.HTML,this.sanitizer.bypassSecurityTrustHtml(i));return null!==v&&(i=v),i}getWeatherClusterFromEnum(e){var i="";return e===jn.clearSkies?i="Clear Skies":e===jn.inclementWeather?i="Inclement Weather":e===jn.coldSpell&&(i="Cold Spell"),i}getWeatherClusterDescription(e){var i="";return e===jn.clearSkies?i="Race terrain shifts between Sunny, Torrid, and Ashfall. \n Flatland and Volcanic Morale increased by 50%.":e===jn.inclementWeather?i="Race terrain shifts between Rainy, Stormy, Maelstrom, and Hailstorm. \n Ocean Morale increased by 50%.":e===jn.coldSpell&&(i="Race terrain shifts between Sunny, Snowfall, and Hailstorm. \n Tundra and Mountain Morale increased by 50%."),i}topSpeedPopover(e){var i=e.currentStats.defaultMaxSpeedModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultMaxSpeedModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,Se.topSpeed),c=1;e.talentTree.talentTreeType===yt.longDistance&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases max speed by "+this.getMaxSpeedModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.maxSpeedModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.maxSpeedModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}accelerationPopover(e){var i=e.currentStats.defaultAccelerationModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAccelerationModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,Se.acceleration),c=1;e.talentTree.talentTreeType===yt.sprint&&(c=1+e.talentTree.column2Row3Points/100);var u="Every stat point increases acceleration by "+this.getAccelerationModifierByAnimalType(e.type).toFixed(3)+"m/s up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.accelerationModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.accelerationModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}endurancePopover(e){var i=e.currentStats.defaultStaminaModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultStaminaModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,Se.endurance),c=1;e.talentTree.talentTreeType===yt.longDistance&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases stamina by "+this.getStaminaModifierByAnimalType(e.type).toFixed(3)+" up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.staminaModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.staminaModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}powerPopover(e){var i=e.currentStats.defaultPowerModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultPowerModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,Se.power),c=1;e.talentTree.talentTreeType===yt.sprint&&(c=1+e.talentTree.column3Row3Points/100);var u="Every stat point increases ability efficiency by "+this.getPowerModifierByAnimalType(e.type).toFixed(3)+"% up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.powerModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.powerModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}focusPopover(e){var i=e.currentStats.defaultFocusModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultFocusModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,Se.focus),c=1;e.talentTree.talentTreeType===yt.longDistance&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases focus distance by "+this.getFocusModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.focusModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.focusModifier.toFixed(3)+"\n"),c>1&&(u+="Long Distance Talents: *"+c.toFixed(2)+"\n"),u}adaptabilityPopover(e){var i=e.currentStats.defaultAdaptabilityModifier,r=e.getAnimalType().toLowerCase(),a=this.globalService.globalVar.modifiers.find(d=>d.text===r+"DefaultAdaptabilityModifier");null!=a&&(i=a.value);var o=.02,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=this.globalService.getTraitModifier(e,Se.adaptability),c=1;e.talentTree.talentTreeType===yt.sprint&&(c=1+e.talentTree.column1Row3Points/100);var u="Every stat point increases adaptability distance by "+this.getAdaptabilityModifierByAnimalType(e.type).toFixed(3)+" meters up to diminishing returns. \n\nBase: "+i.toFixed(3)+"\n";return o>1&&(u+="Breed Modifier: *"+o.toFixed(2)+"\n"),1!==l&&(u+=e.trait.traitName+" (Trait): *"+l.toFixed(2)+"\n"),e.incubatorStatUpgrades.adaptabilityModifier>1&&(u+="Incubator Upgrade: *"+e.incubatorStatUpgrades.adaptabilityModifier.toFixed(3)+"\n"),c>1&&(u+="Sprint Talents: *"+c.toFixed(2)+"\n"),u}abilityPopover(){var e=25,i=this.globalService.globalVar.modifiers.find(a=>"abilityLevelCapModifier"===a.text);return null!=i&&(e=i.value),"Select from up to three different abilities by clicking on their names here. Using your ability during a race will award your ability XP which increases its effectiveness. Ability level cannot exceed your animal's breed level + "+e+"."}abilityLevelPopover(e){var i="Base Efficiency: "+e.ability.efficiency+"\n";return e.ability.abilityLevel>1&&(i+="Level Efficiency Multiplier: "+(1+.01*(e.ability.abilityLevel-1))),i}bonusFreeRaceXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusLocalBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusLocalBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusLocalBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusCircuitRaceXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusCircuitBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+2*e.miscStats.bonusCircuitBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusCircuitBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusTrainingXpPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusTrainingBreedXpCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusTrainingBreedXpCertificateCount+" (Certificates Used: "+e.miscStats.bonusTrainingBreedXpCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusDiminishingReturnsPerFacilityLevelPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel();return r>0&&(i+="Track Race Rewards: "+r+"\n"),e.miscStats.bonusDiminishingReturnsCertificateCount>0&&(i+="Certificates Bonus: "+e.miscStats.bonusDiminishingReturnsCertificateCount+" (Certificates Used: "+e.miscStats.bonusDiminishingReturnsCertificateCount+"/"+e.miscStats.certificateUseCap+")\n"),i}bonusTrainingTimeReductionPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction();return r>0&&(i+="Track Race Rewards: "+r+"%\n"),i}bonusTalentsPopover(e){var i="",r=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();return r>0&&(i+="Track Race Rewards: "+r+"\n"),i}isAmountMoreThanCertificateCap(e,i,r){var a=!1;return e=+e,"Free Race Breed XP Gain Certificate"===r&&i.miscStats.bonusLocalBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Circuit Race Breed XP Gain Certificate"===r&&i.miscStats.bonusCircuitBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Training Breed XP Gain Certificate"===r&&i.miscStats.bonusTrainingBreedXpCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),"Diminishing Returns Increase Certificate"===r&&i.miscStats.bonusDiminishingReturnsCertificateCount+e>i.miscStats.certificateUseCap&&(a=!0),a}getAnimalMorale(e){if(null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e);return null==i?0:i.morale}changeGrandPrixMorale(e,i){if(null!=this.globalService.globalVar.eventRaceData&&null!=this.globalService.globalVar.eventRaceData.animalData&&0!==this.globalService.globalVar.eventRaceData.animalData.length){var r=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e);null!=r&&(r.morale+=i,r.morale>=3&&(r.morale=3),r.morale<=.5&&(r.morale=.5))}}slowSegmentWarning(e){return!e||confirm("The animal you have selected has low racing stats for this race. You may experience some loading time as they race. Continue?")}getWeekDayGrandPrixTimeSpan(){var e=new Nn;return this.utilityService.getDayOfWeekFromNumber(e.weekStartDay)+" "+this.utilityService.get24HourFormat(e.weekStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekEndDay)+" "+this.utilityService.get24HourFormat(e.weekEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekEndHour)+")"}getWeekEndGrandPrixTimeSpan(){var e=new Nn;return this.utilityService.getDayOfWeekFromNumber(e.weekendStartDay)+" "+this.utilityService.get24HourFormat(e.weekendStartHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendStartHour)+") to "+this.utilityService.getDayOfWeekFromNumber(e.weekendEndDay)+" "+this.utilityService.get24HourFormat(e.weekendEndHour)+" ("+this.utilityService.getAmPmTimeFromHours(e.weekendEndHour)+")"}getRandomTip(){var e="",i=[];return this.globalService.globalVar.settings.get("hideTips")||(i.push("After upgrading training options, reselect them to gain their benefits!"),i.push("Don't forget to export your save regularly!"),i.push("Have to recite the alphabet to figure out what your next circuit rank is? You're not alone, go to the settings to use numbers instead!"),i.push("Small barns allow training for 4 hours, medium for 8 hours, and large for 12 hours. Your animals will train even when the game is not active."),i.push("Each animal gains more or less racing stats from a base stat than other animals. Hover over each base stat in the Animals tab to see its modifier."),i.push("Can't quite finish a close race? Burst Chance and Distance are not affected by Diminishing Returns, so continue to increase those stats to get ahead!"),i.push("Want to take a more hands on approach? Go to any barn that has an animal assigned and start coaching to raise stats manually!"),e=i[this.utilityService.getRandomInteger(0,i.length-1)]),e}getRandomFunFact(){var e,i,r,a,o,s,l="",c=[];return this.globalService.globalVar.settings.get("hideTips")||(c.push("Horses are prey animals. Their best method of defense? Run!"),(null===(e=this.globalService.globalVar.animals.find(d=>d.type===L.Monkey))||void 0===e?void 0:e.isAvailable)&&c.push("There are over 300 species of Monkey in the world. Roughly half are considered Old World Monkeys in Asia and Africa, and the others are New World Monkeys in Central and South America."),(null===(i=this.globalService.globalVar.animals.find(d=>d.type===L.Goat))||void 0===i?void 0:i.isAvailable)&&c.push("Mountain goats' wide toes, rough hooves, and sharp dewclaws give them incredible traction and the ability to climb steep slopes sometimes over 60 degrees."),(null===(r=this.globalService.globalVar.animals.find(d=>d.type===L.Octopus))||void 0===r?void 0:r.isAvailable)&&c.push("Octopi have the largest brain of any invertebrate and have been known to use tools, such as using coconut husks to defend themselves."),(null===(a=this.globalService.globalVar.animals.find(d=>d.type===L.Hare))||void 0===a?void 0:a.isAvailable)&&c.push("Hares' teeth never stop growing. They continually chew on grasses and twigs to keep their teeth from getting too large."),(null===(o=this.globalService.globalVar.animals.find(d=>d.type===L.Penguin))||void 0===o?void 0:o.isAvailable)&&c.push("Penguins' bodies are tapered on both ends meaning they can swim with very little resistance. They are considered one of the most streamlined animals in the world."),(null===(s=this.globalService.globalVar.animals.find(d=>d.type===L.Salamander))||void 0===s?void 0:s.isAvailable)&&c.push("Salamanders are capable of regenerating some organs and limbs. Their impressive regeneration is used as a model for scientific studies."),l=c[this.utilityService.getRandomInteger(0,c.length-1)]),l}getSettingDescriptions(e){var i="";return"Auto Skip Race Info"===e&&(i="Turn on to immediately skip to the end of any race."),"Finish Training Before Switching"===e&&(i="Turn on to wait until finishing your current training before switching to the next training you select."),"Hide Tips"===e&&(i="Turn on to stop displaying tips in the footer. (Tips never display in Mobile version presently)"),"Use Numbers For Circuit Rank"===e&&(i="Turn on to use numbers instead of letters when displaying ranks."),"Auto Start Event Race"===e&&(i="When event race begins, automatically start running with your current event relay team."),"Race Display Info"===e&&(i="Choose how to view races. Draw only shows the visual aspect, text only shows the textual updates, and both shows both. Both is default."),i}getTotalFreeRacesPerPeriod(){var e=10,i=this.globalService.globalVar.modifiers.find(o=>"freeRacesPerTimePeriodModifier"===o.text);void 0!==i&&(e=i.value);var r=this.getRenown(),a=Math.floor(r/100);return a>15&&(a=15),e+a}getRemainingFreeRacesPerPeriod(){return this.getTotalFreeRacesPerPeriod()-this.globalService.globalVar.freeRaceCounter}getRelayEffectFromListByType(e,i){if(null!=e&&0!==e.length)return e.find(r=>r.effectType===i)}isEquipmentItemAnOrb(e){return"Amethyst Orb"===e||"Sapphire Orb"===e||"Amber Orb"===e||"Topaz Orb"===e||"Emerald Orb"===e||"Ruby Orb"===e}getRelayEffectNameByType(e){var i="";return e===qe.bigBrain?i="Big Brain":e===qe.blueBaton?i="Blue Baton":e===qe.camouflage?i="Camouflage":e===qe.deepBreathing?i="Deep Breathing":e===qe.flowingCurrent?i="Flowing Current":e===qe.greenBaton?i="Green Baton":e===qe.herdMentality?i="Herd Mentality":e===qe.inspiration?i="Inspiration":e===qe.navigator?i="Navigator":e===qe.orangeBaton?i="Orange Baton":e===qe.redBaton?i="Red Baton":e===qe.specialDelivery?i="Special Delivery":e===qe.supportAbilityCooldown?i="Cooldown Reduction Talent":e===qe.supportAbilityEfficiency?i="Ability Efficiency Talent":e===qe.supportAccelerationRelay?i="Acceleration Rate Talent":e===qe.supportAdaptabilityRelay?i="Adaptability Distance Talent":e===qe.supportBurstChance?i="Burst Chance Talent":e===qe.supportBurstDistance?i="Burst Distance Talent":e===qe.supportFocusRelay?i="Focus Distance Talent":e===qe.supportMaxSpeedRelay?i="Max Speed Talent":e===qe.supportPowerRelay?i="Power Efficiency Talent":e===qe.supportStaminaRelay?i="Stamina Talent":e===qe.violetBaton?i="Violet Baton":e===qe.yellowBaton&&(i="Yellow Baton"),i}getStatGainDescription(e,i){var r="";return e.topSpeed>0&&(r+="+"+i*e.topSpeed+" Speed\n"),e.acceleration>0&&(r+="+"+i*e.acceleration+" Acceleration\n"),e.endurance>0&&(r+="+"+i*e.endurance+" Endurance\n"),e.focus>0&&(r+="+"+i*e.focus+" Focus\n"),e.power>0&&(r+="+"+i*e.power+" Power\n"),e.adaptability>0&&(r+="+"+i*e.adaptability+" Adaptability\n"),r}getTalentTreeNames(){var e=[];return e.push("Sprint"),e.push("Support"),e.push("Long Distance"),e}getInDepthTalentTreeDescription(e){var i="";return"Sprint"===e?i="Sprinters excel at going short distances quickly. Whether it's through chaining together quick Bursts or powerful abilities, these racers will leave others in the dust at the starting line. Recommended for when you want to get the most out of Burst effects and high acceleration.":"Support"===e?i="Supporters excel when working alongside other animals. They have a special way of encouraging the racers after and sometimes before them to reach new limits. Recommended for when you want to get the most out of Relay effects.":"Long Distance"===e&&(i="Long Distance Racers excel when given time to ramp up and go the distance. These racers manage their stamina well and can reach incredible speeds over time. Recommended for racers with high max speed and that have abilities that improve over time."),i}getTalentDescription(e,i,r,a){var o="";return(null==a||a<=0)&&(a=1),r===yt.sprint&&(0===e&&0===i&&(o="Increase Adaptability stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(o="Increase Adaptability Distance by <span class='keyword'>"+5*a+"</span>% until you lose focus for the first time."),2===e&&0===i&&(o="Increase Adaptability Distance gain from Adaptability stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(o="Every time you make it through a special path without stumbling, enter a Burst that lasts <span class='keyword'>"+5*a+"</span>% as long as normal."),0===e&&1===i&&(o="Increase Acceleration stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(o="The first time velocity exceeds Max Speed while bursting, increase remaining burst distance by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===i&&(o="Increase Acceleration Rate gain from Acceleration stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(o="Each time your velocity reaches Max Speed, increase Max Speed by <span class='keyword'>"+.5*a+"</span>% and reduce Focus Distance by <span class='keyword'>"+.5*a+"</span>%. This effect can occur 10 times, up to <span class='keyword'>"+5*a+"</span>%."),0===e&&2===i&&(o="Increase Power stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(o="Increase Power Efficiency by <span class='keyword'>"+5*a+"</span>%, but consume stamina <span class='keyword'>"+5*a+"</span>% faster."),2===e&&2===i&&(o="Increase Power Efficiency gain from Power stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(o="The first time you use an ability every race, the efficiency is increased by <span class='keyword'>"+5*a+"</span>%.")),r===yt.support&&(0===e&&0===i&&(o="Increase Relay Animal's Adaptability Distance by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(o="Increase the effectiveness of your Relay effects by <span class='keyword'>"+2*a+"</span>%."),2===e&&0===i&&(o="Increase Relay Animal's Max Speed by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(o="The racer prior to you gains any relay effects you provide for <span class='keyword'>"+3*a+"</span>% of the normal length if possible."),0===e&&1===i&&(o="Increase Relay Animal's Acceleration Rate by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(o="Increase Burst Distance of next racer by <span class='keyword'>"+5*a+"</span>% of your Burst Distance on Relay."),2===e&&1===i&&(o="Increase Relay Animal's Stamina by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(o="Increase Burst Chance of next racer by <span class='keyword'>"+3*a+"</span>% of your Burst Chance on Relay."),0===e&&2===i&&(o="Increase Relay Animal's Power Efficiency by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(o="If Relay Animal ability has a cooldown, reduce it by <span class='keyword'>"+2*a+"</span>%."),2===e&&2===i&&(o="Increase Relay Animal's Focus Distance by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(o="Increase Relay Animal's Ability Efficiency by <span class='keyword'>"+2*a+"</span>%.")),r===yt.longDistance&&(0===e&&0===i&&(o="Increase Focus stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&0===i&&(o="Every burst increases Burst Velocity Bonus by <span class='keyword'>"+.5*a+"</span>%."),2===e&&0===i&&(o="Increase Focus Distance gain from Focus stat by <span class='keyword'>"+a+"</span>%."),3===e&&0===i&&(o="Instead of reducing velocity to 10% when losing focus, reduce to <span class='keyword'>"+(10+2*a)+"</span>%."),0===e&&1===i&&(o="Increase Max Speed stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&1===i&&(o="While your velocity is 25% of your Max Speed or below, increase your Acceleration Rate by <span class='keyword'>"+5*a+"</span>%."),2===e&&1===i&&(o="Increase Max Speed gain from Speed stat by <span class='keyword'>"+a+"</span>%."),3===e&&1===i&&(o="After surpassing <span class='keyword'>"+.5*a+"</span>% of your Max Speed, your velocity can no longer drop below it. All calculations consider this to be 0% of your velocity."),0===e&&2===i&&(o="Increase Endurance stat gain from training by <span class='keyword'>"+a+"</span>%."),1===e&&2===i&&(o="While stamina is below 35%, reduce stamina consumption by <span class='keyword'>"+5*a+"</span>%."),2===e&&2===i&&(o="Increase Stamina gain from Endurance stat by <span class='keyword'>"+a+"</span>%."),3===e&&2===i&&(o="When running out of stamina, increase the percent regained by <span class='keyword'>"+2*a+"</span>%.")),o}getTalentUpgradeDescription(e,i,r,a){}getTotalPossiblePointsByRowColumn(e,i,r){var a=0;return r===yt.sprint&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),r===yt.support&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),r===yt.longDistance&&(0===e&&0===i&&(a=999),1===e&&0===i&&(a=10),2===e&&0===i&&(a=999),3===e&&0===i&&(a=10),0===e&&1===i&&(a=999),1===e&&1===i&&(a=10),2===e&&1===i&&(a=999),3===e&&1===i&&(a=10),0===e&&2===i&&(a=999),1===e&&2===i&&(a=10),2===e&&2===i&&(a=999),3===e&&2===i&&(a=10)),a}getTalentPointsAvailableToAnimal(e){var i=0;return i=this.getResourceByName("Talent Points"),i+=e.miscStats.bonusTalents,(i-=e.talentTree.getTotalSpentPoints())<=0&&(i=0),i}gainMangoes(e){return new ie("Mangoes",e,G.Food)}gainApples(e){return new ie("Apples",e,G.Food)}gainBananas(e){return new ie("Bananas",e,G.Food)}gainOranges(e){return new ie("Oranges",e,G.Food)}gainStrawberries(e){return new ie("Strawberries",e,G.Food)}gainTurnips(e){return new ie("Turnips",e,G.Food)}gainCarrots(e){return new ie("Carrots",e,G.Food)}gainCoins(e){return new ie("Coins",e,G.Resources)}gainMedals(e){return new ie("Medals",e,G.Resources)}gainTokens(e){return new ie("Tokens",e,G.Resources)}}return t.\u0275fac=function(e){return new(e||t)(Ue(Et),Ue(kn),Ue(Wo))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),An=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.totalTime=0,this.gameUpdateEvent=new ot}Update(){var e=Date.now();const i=(e-this.globalService.globalVar.lastTimeStamp)/1e3;this.deltaTime=i,this.totalTime+=i;var r=performance.now();this.globalService.globalVar.lastTimeStamp=e,this.gameUpdateEvent.emit(i),this.lastPerformanceNow=r,window.requestAnimationFrame(()=>this.Update())}}return t.\u0275fac=function(e){return new(e||t)(Ue(Et),Ue(bi))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Hl{constructor(n,e){this.transformationType=n,this.options=e,this.recursionStack=new Set}transform(n,e,i,r,a,o=0){if(Array.isArray(e)||e instanceof Set){const s=r&&this.transformationType===Qt.PLAIN_TO_CLASS?function W5(t){const n=new t;return n instanceof Set||"push"in n?n:[]}(r):[];return e.forEach((l,c)=>{const u=n?n[c]:void 0;if(this.options.enableCircularCheck&&this.isCircular(l))this.transformationType===Qt.CLASS_TO_CLASS&&(s instanceof Set?s.add(l):s.push(l));else{let d;if("function"!=typeof i&&i&&i.options&&i.options.discriminator&&i.options.discriminator.property&&i.options.discriminator.subTypes){if(this.transformationType===Qt.PLAIN_TO_CLASS){d=i.options.discriminator.subTypes.find(y=>y.name===l[i.options.discriminator.property]);const b=i.typeFunction({newObject:s,object:l,property:void 0});d=void 0===d?b:d.value,i.options.keepDiscriminatorProperty||delete l[i.options.discriminator.property]}this.transformationType===Qt.CLASS_TO_CLASS&&(d=l.constructor),this.transformationType===Qt.CLASS_TO_PLAIN&&(l[i.options.discriminator.property]=i.options.discriminator.subTypes.find(m=>m.value===l.constructor).name)}else d=i;const v=this.transform(u,l,d,void 0,l instanceof Map,o+1);s instanceof Set?s.add(v):s.push(v)}}),s}if(i===String&&!a)return null==e?e:String(e);if(i===Number&&!a)return null==e?e:Number(e);if(i===Boolean&&!a)return null==e?e:Boolean(e);if((i===Date||e instanceof Date)&&!a)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(function j5(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}().Buffer&&(i===Buffer||e instanceof Buffer)&&!a)return null==e?e:Buffer.from(e);if(function $5(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}(e)&&!a)return new Promise((s,l)=>{e.then(c=>s(this.transform(void 0,c,i,void 0,void 0,o+1)),l)});if(!a&&null!==e&&"object"==typeof e&&"function"==typeof e.then)return e;if("object"==typeof e&&null!==e){!i&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(i=e.constructor)),!i&&n&&(i=n.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);const s=this.getKeys(i,e,a);let l=n||{};!n&&(this.transformationType===Qt.PLAIN_TO_CLASS||this.transformationType===Qt.CLASS_TO_CLASS)&&(l=a?new Map:i?new i:{});for(const c of s){if("__proto__"===c||"constructor"===c)continue;const u=c;let m,d=c,v=c;if(!this.options.ignoreDecorators&&i)if(this.transformationType===Qt.PLAIN_TO_CLASS){const w=pr.findExposeMetadataByCustomName(i,c);w&&(v=w.propertyName,d=w.propertyName)}else if(this.transformationType===Qt.CLASS_TO_PLAIN||this.transformationType===Qt.CLASS_TO_CLASS){const w=pr.findExposeMetadata(i,c);w&&w.options&&w.options.name&&(d=w.options.name)}m=this.transformationType===Qt.PLAIN_TO_CLASS?e[u]:e instanceof Map?e.get(u):e[u]instanceof Function?e[u]():e[u];let b,y=m instanceof Map;if(i&&a)b=i;else if(i){const w=pr.findTypeMetadata(i,v);if(w){const R={newObject:l,object:e,property:v},z=w.typeFunction?w.typeFunction(R):w.reflectedType;w.options&&w.options.discriminator&&w.options.discriminator.property&&w.options.discriminator.subTypes?e[u]instanceof Array?b=w:(this.transformationType===Qt.PLAIN_TO_CLASS&&(b=w.options.discriminator.subTypes.find(q=>{if(m&&m instanceof Object&&w.options.discriminator.property in m)return q.name===m[w.options.discriminator.property]}),b=void 0===b?z:b.value,w.options.keepDiscriminatorProperty||m&&m instanceof Object&&w.options.discriminator.property in m&&delete m[w.options.discriminator.property]),this.transformationType===Qt.CLASS_TO_CLASS&&(b=m.constructor),this.transformationType===Qt.CLASS_TO_PLAIN&&m&&(m[w.options.discriminator.property]=w.options.discriminator.subTypes.find(q=>q.value===m.constructor).name)):b=z,y=y||w.reflectedType===Map}else if(this.options.targetMaps)this.options.targetMaps.filter(R=>R.target===i&&!!R.properties[v]).forEach(R=>b=R.properties[v]);else if(this.options.enableImplicitConversion&&this.transformationType===Qt.PLAIN_TO_CLASS){const R=Reflect.getMetadata("design:type",i.prototype,v);R&&(b=R)}}const C=Array.isArray(e[u])?this.getReflectedType(i,v):void 0,k=n?n[u]:void 0;if(l.constructor.prototype){const w=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if((this.transformationType===Qt.PLAIN_TO_CLASS||this.transformationType===Qt.CLASS_TO_CLASS)&&(w&&!w.set||l[d]instanceof Function))continue}if(this.options.enableCircularCheck&&this.isCircular(m)){if(this.transformationType===Qt.CLASS_TO_CLASS){let w=m;w=this.applyCustomTransformations(w,i,c,e,this.transformationType),(void 0!==w||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,w):l[d]=w)}}else{const w=this.transformationType===Qt.PLAIN_TO_CLASS?d:c;let R;this.transformationType===Qt.CLASS_TO_PLAIN?(R=e[w],R=this.applyCustomTransformations(R,i,w,e,this.transformationType),R=e[w]===R?m:R,R=this.transform(k,R,b,C,y,o+1)):void 0===m&&this.options.exposeDefaultValues?R=l[d]:(R=this.transform(k,m,b,C,y,o+1),R=this.applyCustomTransformations(R,i,w,e,this.transformationType)),(void 0!==R||this.options.exposeUnsetFields)&&(l instanceof Map?l.set(d,R):l[d]=R)}}return this.options.enableCircularCheck&&this.recursionStack.delete(e),l}return e}applyCustomTransformations(n,e,i,r,a){let o=pr.findTransformMetadatas(e,i,this.transformationType);return void 0!==this.options.version&&(o=o.filter(s=>!s.options||this.checkVersion(s.options.since,s.options.until))),o=o.filter(this.options.groups&&this.options.groups.length?s=>!s.options||this.checkGroups(s.options.groups):s=>!s.options||!s.options.groups||!s.options.groups.length),o.forEach(s=>{n=s.transformFn({value:n,key:i,obj:r,type:a,options:this.options})}),n}isCircular(n){return this.recursionStack.has(n)}getReflectedType(n,e){if(!n)return;const i=pr.findTypeMetadata(n,e);return i?i.reflectedType:void 0}getKeys(n,e,i){let r=pr.getStrategy(n);"none"===r&&(r=this.options.strategy||"exposeAll");let a=[];if(("exposeAll"===r||i)&&(a=e instanceof Map?Array.from(e.keys()):Object.keys(e)),i)return a;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&n&&(a=[...pr.getExposedProperties(n,this.transformationType),...pr.getExcludedProperties(n,this.transformationType)]),!this.options.ignoreDecorators&&n){let o=pr.getExposedProperties(n,this.transformationType);this.transformationType===Qt.PLAIN_TO_CLASS&&(o=o.map(l=>{const c=pr.findExposeMetadata(n,l);return c&&c.options&&c.options.name?c.options.name:l})),a=this.options.excludeExtraneousValues?o:a.concat(o);const s=pr.getExcludedProperties(n,this.transformationType);s.length>0&&(a=a.filter(l=>!s.includes(l))),void 0!==this.options.version&&(a=a.filter(l=>{const c=pr.findExposeMetadata(n,l);return!c||!c.options||this.checkVersion(c.options.since,c.options.until)})),a=a.filter(this.options.groups&&this.options.groups.length?l=>{const c=pr.findExposeMetadata(n,l);return!c||!c.options||this.checkGroups(c.options.groups)}:l=>{const c=pr.findExposeMetadata(n,l);return!(c&&c.options&&c.options.groups&&c.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter(o=>this.options.excludePrefixes.every(s=>o.substr(0,s.length)!==s))),a=a.filter((o,s,l)=>l.indexOf(o)===s),a}checkVersion(n,e){let i=!0;return i&&n&&(i=this.options.version>=n),i&&e&&(i=this.options.version<e),i}checkGroups(n){return!n||this.options.groups.some(e=>n.includes(e))}}const Gl={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},Ra=new class q5{instanceToPlain(n,e){return new Hl(Qt.CLASS_TO_PLAIN,qr(qr({},Gl),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToPlainFromExist(n,e,i){return new Hl(Qt.CLASS_TO_PLAIN,qr(qr({},Gl),i)).transform(e,n,void 0,void 0,void 0,void 0)}plainToInstance(n,e,i){return new Hl(Qt.PLAIN_TO_CLASS,qr(qr({},Gl),i)).transform(void 0,e,n,void 0,void 0,void 0)}plainToClassFromExist(n,e,i){return new Hl(Qt.PLAIN_TO_CLASS,qr(qr({},Gl),i)).transform(n,e,void 0,void 0,void 0,void 0)}instanceToInstance(n,e){return new Hl(Qt.CLASS_TO_CLASS,qr(qr({},Gl),e)).transform(void 0,n,void 0,void 0,void 0,void 0)}classToClassFromExist(n,e,i){return new Hl(Qt.CLASS_TO_CLASS,qr(qr({},Gl),i)).transform(e,n,void 0,void 0,void 0,void 0)}serialize(n,e){return JSON.stringify(this.instanceToPlain(n,e))}deserialize(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}deserializeArray(n,e,i){const r=JSON.parse(e);return this.plainToInstance(n,r,i)}};function r0(t,n,e){return Ra.plainToInstance(t,n,e)}let a0=(()=>{class t{constructor(e,i,r){this.globalService=e,this.utilityService=i,this.lookupService=r}getSpecializationPopoverText(e,i){var r="";if(e===Wt.TrainingFacility&&(r=i<=20?"Training Time Reduction: "+i+"%<br/>":"Training Time Reduction: 20%<br/> All Stat Multiplier: "+(i-20)/10+"<br/>"),e===Wt.BreedingGrounds){var a=this.globalService.globalVar.modifiers.find(q=>"breedingGroundsSpecializationModifier"===q.text);null!=a&&(r="Training Breed XP Multipler: "+i*(100*a.value)+"%<br/>")}if(e===Wt.Attraction){var o=60,s=this.globalService.globalVar.modifiers.find(q=>"attractionTimeToCollectModifier"===q.text);null!=s&&(o=s.value);var l=0;if(null!=this.globalService.globalVar.modifiers.find(q=>"attractionAmountModifier"===q.text))for(var u=1;u<=i;u++)l+=20*u;r="Amount Earned: "+l+" Coins / "+o+" seconds<br/>"}else if(e===Wt.ResearchCenter){var d=this.globalService.globalVar.modifiers.find(q=>"researchCenterIncrementsModifier"===q.text),v=this.globalService.globalVar.modifiers.find(q=>"researchCenterTrainingAnimalModifier"===q.text),m=this.globalService.globalVar.modifiers.find(q=>"researchCenterStudyingAnimalModifier"===q.text),b=this.globalService.globalVar.modifiers.find(q=>"researchCenterMaxStatGainModifier"===q.text);if(null==d||null==v||null==m||null==b)return"";var y=i*d.value,k="Training Animal Stat Gain: "+(100*(v.value+y<b.value?v.value+y:b.value)).toFixed(0)+"%<br />",w=(y-(b.value-v.value))/(b.value-m.value);w>0?(Math.floor(w)>0&&(k+="Additional Studying Animal Stat Gain (x"+Math.floor(w)+"): "+(100*b.value).toFixed(0)+"%<br />"),w>Math.floor(w)&&(k+="Additional Studying Animal Stat Gain: "+(100*((w-Math.floor(w))*(b.value-m.value)+m.value)).toFixed(0)+"%<br />")):k+="Additional Studying Animal Stat Gain: "+(100*m.value).toFixed(0)+"%<br />",r=k}var z=this.utilityService.getSanitizedHtml(r);return null!=z&&(r=z),r}handleResearchCenterStatIncrease(e,i){var r=this.globalService.globalVar.modifiers.find(q=>"researchCenterIncrementsModifier"===q.text),a=this.globalService.globalVar.modifiers.find(q=>"researchCenterTrainingAnimalModifier"===q.text),o=this.globalService.globalVar.modifiers.find(q=>"researchCenterStudyingAnimalModifier"===q.text),s=this.globalService.globalVar.modifiers.find(q=>"researchCenterMaxStatGainModifier"===q.text);if(null!=r&&null!=a&&null!=o&&null!=s&&null!=e.currentTraining){var C,c=i.barnUpgrades.specializationLevel*r.value,u=e.currentTraining.affectedStatRatios.topSpeed,d=e.currentTraining.affectedStatRatios.acceleration,v=e.currentTraining.affectedStatRatios.endurance,m=e.currentTraining.affectedStatRatios.power,b=e.currentTraining.affectedStatRatios.focus,y=e.currentTraining.affectedStatRatios.adaptability;e.increaseStats(new Ve((C=a.value+c<s.value?a.value+c:s.value)*u,C*d,C*v,C*m,C*b,C*y)),this.globalService.calculateAnimalRacingStats(e);var k=(c-(s.value-a.value))/(s.value-o.value),w=this.getAnimalsInRandomOrder(e.raceCourseType,e);if(k>0){w.length<k&&(k=w.length);for(var R=0;R<Math.floor(k);R++)w[R].increaseStats(new Ve(s.value*u,s.value*d,s.value*v,s.value*m,s.value*b,s.value*y)),this.globalService.calculateAnimalRacingStats(w[R]);if(k>Math.floor(k)&&w.length>R){var z=o.value+(k-Math.floor(k))*(s.value-o.value);w[R].increaseStats(new Ve(z*u,z*d,z*v,z*m,z*b,z*y)),this.globalService.calculateAnimalRacingStats(w[R])}}else w.length>=1&&(w[0].increaseStats(new Ve((z=o.value)*u,z*d,z*v,z*m,z*b,z*y)),this.globalService.calculateAnimalRacingStats(w[0]))}}getAnimalsInRandomOrder(e,i){for(var r=[],a=this.globalService.globalVar.animals.filter(u=>u.raceCourseType===e&&u.isAvailable&&u.type!==i.type),o=this.globalService.globalVar.animals.filter(u=>u.raceCourseType!==e&&u.isAvailable),s=a.length,l=0;l<s;l++){var c=this.utilityService.getRandomInteger(1,a.length);r.push(a[c-1]),a=a.filter(u=>u!==a[c-1])}for(s=o.length,l=0;l<s;l++)c=this.utilityService.getRandomInteger(1,o.length),r.push(o[c-1]),o=o.filter(v=>v!==o[c-1]);return r}handleAttractionRevenue(e,i){var r=this.globalService.globalVar.barns.find(v=>v.barnNumber===i.associatedBarnNumber);if(null!=r&&r.barnUpgrades.specialization===Wt.Attraction){var a=60,o=this.globalService.globalVar.modifiers.find(v=>"attractionTimeToCollectModifier"===v.text);null!=o&&(a=o.value);var s=0;if(null!=this.globalService.globalVar.modifiers.find(v=>"attractionAmountModifier"===v.text))for(var c=1;c<=r.barnUpgrades.specializationLevel;c++)s+=20*c;for(r.barnUpgrades.currentDeltaTime+=e,null!==i.currentTraining&&r.barnUpgrades.currentDeltaTime>=i.currentTraining.trainingTimeRemaining&&(r.barnUpgrades.currentDeltaTime=i.currentTraining.trainingTimeRemaining);r.barnUpgrades.currentDeltaTime>=a;){r.barnUpgrades.currentDeltaTime-=a;var d=this.globalService.globalVar.resources.find(v=>"Coins"===v.name);void 0!==d&&(d.amount+=s)}}}}return t.\u0275fac=function(e){return new(e||t)(Ue(Et),Ue(kn),Ue(bi))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var zr=(()=>{return(t=zr||(zr={}))[t.None=0]="None",t[t.Stumble=1]="Stumble",t[t.LostFocus=2]="LostFocus",t[t.LostStamina=3]="LostStamina",t[t.Burst=4]="Burst",zr;var t})();let o0=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.lookupService=i,this.utilityService=r,this.initializeService=a,this.frameModifier=60,this.timeToComplete=60,this.currentLostFocusOpportunity=0,this.currentBurstOpportunity=0,this.tundraPreviousYAmount=0}runRace(e,i){this.currentBurstOpportunity=0,this.currentLostFocusOpportunity=0,this.tundraPreviousYAmount=0,this.selectedRace=e;var r=new uf,a=0,o=0,s=0,l=0,c=0;e.raceLegs.forEach(J=>a+=J.distance);var u=0;(0===e.timeToComplete||null==e.timeToComplete)&&(e.timeToComplete=60);var d=a/e.timeToComplete,v=this.globalService.globalVar.animalDecks.find(J=>J.isPrimaryDeck),m=0;this.timeToComplete=e.timeToComplete;var b=[],y=[],C=zr.None,k=0,w=0,R=0,z=0,q=0,j=0,ye=1,ue=0,ce=new At,ve=new At;if(void 0===v)return r.errorMessage="No relay team selected.",r;if(this.racingAnimals=this.lookupService.getAnimalsFromAnimalDeck(v),e.raceUI.distanceCoveredByFrame=[],e.raceUI.velocityByFrame=[],e.raceUI.timeToCompleteByFrame=[],e.raceUI.maxSpeedByFrame=[],e.raceUI.staminaPercentByFrame=[],e.raceUI.yAdjustmentByFrame=[],e.raceUI.racerEffectByFrame=[],e.raceUI.lavaFallPercentByFrame=[],e.raceUI.racePositionByFrame=[],e.timeToComplete<=180)r.addRaceUpdate(u,Math.round(e.timeToComplete)+" seconds are on the race clock.");else{var _e=this.globalService.getRemainingEventRaceTime()+this.globalService.globalVar.eventRaceData.bonusTime,Ie=this.utilityService.getHoursRemainingFromSeconds(_e),st=this.utilityService.getMinutesLeftInHourRemainingFromSeconds(_e),mt=this.utilityService.getSecondsLeftInMinuteRemainingFromSeconds(_e),ct=Math.floor(mt).toString(),bt=Ie.toString(),wt=st.toString();Ie<10&&(bt=Ie<1||Ie>59?"00":String(bt).padStart(2,"0")),st<10&&(wt=st<1||st>59?"00":String(wt).padStart(2,"0")),mt<10&&(ct=mt<1||mt>59?"00":String(ct).padStart(2,"0")),r.addRaceUpdate(u,bt+":"+wt+":"+ct+" is left on the race clock.")}return e.raceLegs.forEach(J=>{var T=null;null!=(T=this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(Ze=>Ze.raceCourseType===J.courseType))?this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||(T.raceVariables=new So,T.totalRacesRun+=1):alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),this.globalService.globalVar.trackedStats.totalRaces+=1,e.raceLegs.forEach(J=>{var T=void 0;if(null!=(T=this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.getGrandPrixRacingAnimal():this.racingAnimals.find(We=>We.raceCourseType===J.courseType))){this.increasePersistentAbilityXp(T);var Ze=void 0;this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&this.globalService.globalVar.eventRaceData.previousRaceSegmentData.racingAnimalType===T.type&&(console.log("Previous animal: "+this.globalService.globalVar.eventRaceData.previousRaceSegmentData.racingAnimalType+" Current animal: "+T.type),Ze=this.globalService.globalVar.eventRaceData.previousRaceSegmentData);var _i=void 0,Rt=new Ui,Xe="<span class='coloredText "+J.getCourseTypeClass()+"'>"+T.name+"</span>",ui="",Gi="";if(w>0){var qi=this.racingAnimals.find(We=>We.raceCourseType===e.raceLegs[w-1].courseType);null!=qi&&(ce=qi)}else ce=null;if(w<e.raceLegs.length-1){Rt=e.raceLegs[w+1];var yi=this.racingAnimals.find(We=>We.raceCourseType===Rt.courseType);null!=yi&&(ve=yi,Gi="<span class='coloredText "+Rt.getCourseTypeClass()+"'>"+(null==ve?void 0:ve.name)+"</span>")}else ve=null;this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped&&r.addRaceUpdate(u,Xe+" clears "+Math.round(this.selectedRace.length).toLocaleString()+" meters of the Grand Prix and moves onto the next leg of the race.");var mn=J.terrain.maxSpeedModifier,xi=J.terrain.accelerationModifier,zi=J.terrain.staminaModifier,ji=J.terrain.powerModifier,Vi=J.terrain.focusModifier,di=J.terrain.adaptabilityModifier;u<this.timeToComplete*this.frameModifier&&(y.length>0&&void 0!==(_i=y[y.length-1])&&(ui="<span class='coloredText "+_i.getCourseTypeClass()+"'>"+(null==ce?void 0:ce.name)+"</span>"),this.getPrelayEffects(T,ve,null==Rt?void 0:Rt.terrain,1,r,u,ui,Rt,J),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.PrepareRacingAnimal(r,u,ui,T,b,J,_i,void 0,void 0,s,c,l),this.prepareRacingLeg(J,T),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix||r.addRaceUpdate(u,Xe+" starts their leg of the race."));var dt=T.currentStats.stamina,gt=0,ni=J.distance,ei=new df,Pi=new df,hi=!1,fi=1,Ei={permanentAdaptabilityIncreaseMultiplier:1},nr={permanentMaxSpeedIncreaseMultiplier:1},Qi=1,Mr=1,rr={coldBloodedIncreaseMultiplier:1},Pa=1,bn=[],_n=[],Tt=1,et=!1,de=0,be=[!1,!1,!1,!1,!1],wi=!1,kr=0,no=!1,ro=0,Do=0,Ea=0,br=0,Ia=0,Va=0;if(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var Ro=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime();Ia+=d*Ro,Va=this.globalService.globalVar.eventRaceData.distanceCovered}o+Va>d*(u/this.frameModifier)+Ia?(et||(qu=!0),et=!0):(et&&(qu=!0),et=!1),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(Tt=this.globalService.getAnimalStatLossFromExhaustionEventRace(T))<1&&(T.raceVariables.ranOutOfStamina=!0),null!=Ze&&(gt=Ze.velocity,T.currentStats.stamina=Ze.stamina,z=Ze.deepBreathingStaminaGain,fi=Ze.permanentMaxSpeedIncreaseMultiplier,Ei.permanentAdaptabilityIncreaseMultiplier=Ze.permanentAdaptabilityIncreaseMultiplier,nr.permanentMaxSpeedIncreaseMultiplier=Ze.permanentMaxSpeedIncreaseObjMultiplier,Qi=Ze.feedingFrenzyIncreaseMultiplier,Mr=Ze.greatMigrationAccelerationIncreaseAdditive,rr.coldBloodedIncreaseMultiplier=Ze.coldBloodedIncreaseMultiplier,Pa=Ze.fleetingSpeedIncreaseMultiplier,Do=Ze.whalePowerStored,br=Ze.pathsClearedWithoutLosingFocus,T.raceVariables=Ze.raceVariables.makeCopy(),Ze.nineTailsBuffs.length>0&&Ze.nineTailsBuffs.forEach(We=>{bn.push(We)}),Ze.grazeBuffs.length>0&&Ze.grazeBuffs.forEach(We=>{_n.push(We)}),Ze.relayEffects.length>0&&Ze.relayEffects.forEach(We=>{null!=T&&(T.raceVariables.relayEffects.push(We),null!=T.raceVariables.relayEffects&&T.raceVariables.relayEffects.length>0&&T.raceVariables.relayEffects.forEach(nb=>{nb.isMultiplicative?T.currentStats.multiplyCurrentRacingStats(nb.relayAffectedStatRatios):T.currentStats.addCurrentRacingStats(nb.relayAffectedStatRatios)}))}),wi=Ze.longDistanceTalentIncreaseAccelerationWithLowVelocity,kr=Ze.maxSpeedFloor,Tt=Ze.statLossFromExhaustion);var Mo=this.lookupService.getRelayEffectFromListByType(T.raceVariables.relayEffects,qe.camouflage);void 0!==Mo&&void 0!==Mo.additionalValue&&(q=Mo.additionalValue);var ko=this.lookupService.getRelayEffectFromListByType(T.raceVariables.relayEffects,qe.herdMentality);void 0!==ko&&void 0!==ko.additionalValue&&(R=ko.additionalValue);var nn,pi=this.lookupService.getRelayEffectFromListByType(T.raceVariables.relayEffects,qe.specialDelivery);void 0!==pi&&void 0!==pi.additionalValue&&(j=pi.additionalValue),"Nap"===T.ability.name&&T.type===L.Hare&&((nn=J.distance-this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt))<0&&(nn=0),T.ability.remainingLength=nn),"Buried Treasure"===T.ability.name&&T.type===L.Octopus&&((nn=J.distance-this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt))<0&&(nn=0),T.ability.remainingLength=nn);var $n=this.lookupService.getRelayEffectFromListByType(T.raceVariables.relayEffects,qe.deepBreathing);if(void 0!==$n&&void 0!==$n.additionalValue){var Wn=T.raceVariables.relayEffects.filter(We=>We.effectType===qe.deepBreathing);void 0!==Wn&&Wn.forEach(We=>{void 0!==We.additionalValue&&(z=We.additionalValue),z>0&&T.type!==L.Goat&&(T.currentStats.stamina+=z)})}for(var Ao=u;Ao<=this.timeToComplete*this.frameModifier;Ao++){de+=1,C=zr.None;var Ps=!1,Lu=0;if(m>0)for(var Zl=0;Zl<m;Zl++)Lu+=e.raceLegs[Zl].distance;d=this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime):a/this.timeToComplete;var Ar=o-Lu,Jl=0,F0=!1,Uu=0;if(J.pathData.forEach(We=>{!F0&&Ar>=Uu&&Ar<Uu+We.length&&(F0=!0,ei=We,Jl=Ar-Uu),We.legStartingDistance=Uu,Uu+=We.length,F0||(Pi=We)}),"Night Vision"===T.ability.name&&T.type===L.Gecko&&!T.ability.abilityInUse&&!Pi.didAnimalLoseFocus&&Pi.length>0&&(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCap||(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.nightVisionUseCount+=1),fi+=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt)/100,this.globalService.increaseAbilityXp(T),T.ability.abilityInUse=!0)),"Feeding Frenzy"===T.ability.name&&T.type===L.Shark){var If=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt);if(Ar<=If||Ar>=J.distance-If){Qi=1.5;var f2=this.globalService.globalVar.modifiers.find(We=>"feedingFrenzyPositiveModifier"===We.text);void 0!==f2&&(Qi=f2.value)}else Qi=1}R>0&&(T.raceVariables.isBursting=!0,Ps=!0,T.currentStats.stamina+=R,R=0,null!=ce&&(ce.ability.abilityUsed=!0)),"Navigator"===T.ability.name&&T.type===L.Dolphin&&(T.ability.abilityInUse=!1),T.type===L.Fox&&"Fleeting Speed"===T.ability.name&&!T.ability.abilityUsed&&(Pa+=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt)/100,T.ability.abilityUsed=!0),T.type===L.Dolphin&&"Echolocation"===T.ability.name&&(T.ability.abilityInUse?(J.terrain.maxSpeedModifier<1&&(J.terrain.maxSpeedModifier=1),J.terrain.accelerationModifier<1&&(J.terrain.accelerationModifier=1),J.terrain.staminaModifier<1&&(J.terrain.staminaModifier=1),J.terrain.powerModifier<1&&(J.terrain.powerModifier=1),J.terrain.focusModifier<1&&(J.terrain.focusModifier=1),J.terrain.adaptabilityModifier<1&&(J.terrain.adaptabilityModifier=1)):(J.terrain.maxSpeedModifier=mn,J.terrain.accelerationModifier=xi,J.terrain.staminaModifier=zi,J.terrain.powerModifier=ji,J.terrain.focusModifier=Vi,J.terrain.adaptabilityModifier=di,this.checkForBlinders(J,T))),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?(hi=!1,ei===J.pathData[J.pathData.length-1]&&this.globalService.globalVar.eventRaceData.animalData.some(We=>We.isSetToRelay)&&(hi=!0)):hi=ei===J.pathData[J.pathData.length-1];var Hu=this.getModifiedAdaptability(T,Ei,Tt,bn,_n,J,Ar,ve,Rt,r,u,Xe,Gi),Vf=this.getModifiedFocus(T,Tt,bn,_n,rr),c$=this.didAnimalStumble(T,ei,Jl,J.terrain,Ei,Hu,Tt,u,Xe,r),p2=this.didAnimalLoseFocus(T,this.timeToComplete,e.length,o,J.terrain,Tt,rr,ei,Vf);if(p2){if(T.raceVariables.lostFocus=!0,T.raceVariables.hasLostFocusDuringRace=!0,T.raceVariables.currentLostFocusLength=T.raceVariables.defaultLostFocusLength,T.raceVariables.metersSinceLostFocus=0,k=gt,this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var g2=.02,B0=this.globalService.globalVar.modifiers.find(We=>"focusMoraleLossModifier"===We.text);null!=B0&&(g2=B0.value),this.lookupService.changeGrandPrixMorale(T.type,-g2)}if("Night Vision"===T.ability.name&&T.type===L.Gecko&&(fi=1),T.getEquippedItemName()===this.globalService.getEquipmentName(it.scaryMask)&&et&&!T.raceVariables.scaryMaskEffectOccurred){T.raceVariables.scaryMaskEffectOccurred=!0;var L0=2,v2=this.globalService.globalVar.modifiers.find(We=>"scaryMaskEquipmentModifier"===We.text);void 0!==v2&&(L0=v2.value),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=L0:this.timeToComplete+=L0}r.addRaceUpdate(u,Xe+" is distracted and lost focus!")}if(c$){if(T.raceVariables.stumbled=!0,T.raceVariables.currentStumbledLength=T.raceVariables.defaultStumbledLength,k=gt,this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var m2=.02,U0=this.globalService.globalVar.modifiers.find(We=>"stumbleMoraleLossModifier"===We.text);null!=U0&&(m2=U0.value),this.lookupService.changeGrandPrixMorale(T.type,-m2)}r.addRaceUpdate(u,Xe+" stumbles!")}if(0===T.currentStats.stamina){var Of=.9,b2=this.globalService.globalVar.modifiers.find(We=>"exhaustionStatLossModifier"===We.text);if(void 0!==b2&&(Of=b2.value),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var H0=1-Of;Of=1-(H0*=1/this.lookupService.getAnimalMorale(T.type))}Tt*=Of;var G0=.1,_2=this.globalService.globalVar.modifiers.find(We=>"exhaustionStatLossMinimumModifier"===We.text);void 0!==_2&&(G0=_2.value),Tt<G0&&(Tt=G0),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.setStaminaLossForEventAnimal(Tt,T.type);var Nf=.5;if(T.talentTree.talentTreeType===yt.longDistance&&(Nf+=.02*T.talentTree.column3Row4Points),T.getEquippedItemName()===this.globalService.getEquipmentName(it.quickSnack)){Nf=1;var y2=this.globalService.globalVar.modifiers.find(We=>"quickSnackEquipmentModifier"===We.text);void 0!==y2&&(Nf=y2.value)}T.currentStats.stamina=dt*Nf,r.addRaceUpdate(u,Xe+" runs out of stamina and must slow down.")}if(T.raceVariables.lostFocus||T.raceVariables.stumbled||no){if(T.raceVariables.lostFocus){C=zr.LostFocus;var w2=.9;T.talentTree.talentTreeType===yt.longDistance&&(w2-=.02*T.talentTree.column1Row4Points);var z0=k*w2;gt>kr&&(gt-=z0/T.raceVariables.defaultLostFocusLength),T.raceVariables.currentLostFocusLength-=1,0===T.raceVariables.currentLostFocusLength&&(T.raceVariables.lostFocus=!1,T.type===L.Warthog&&"Mud Pit"===T.ability.name&&(r.addRaceUpdate(u,Xe+" finds a mud pit and can't help but roll in it."),T.ability.abilityInUse=!0,no=!0,k=gt,gt=0,T.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt),this.globalService.increaseAbilityXp(T)))}if(T.raceVariables.stumbled&&(C=zr.Stumble,z0=k-k*ei.stumbleSeverity,gt>kr&&(gt-=z0/T.raceVariables.defaultStumbledLength),T.raceVariables.currentStumbledLength-=1,0===T.raceVariables.currentStumbledLength&&(T.raceVariables.stumbled=!1)),no){var S2=e.length/this.timeToComplete;ro<this.frameModifier/4||ro>=3*this.frameModifier/4?gt+=S2/this.frameModifier:gt-=S2/this.frameModifier,(ro+=1)===this.frameModifier&&(no=!1,ro=0,gt=k)}}else{var Ln=T.currentStats.accelerationMs;if(Ln*=J.terrain.accelerationModifier,Ln*=Tt,T.type===L.Horse&&"Pacemaker"===T.ability.name&&T.ability.abilityInUse&&(Ln*=1.5),T.type===L.Cheetah&&"Sprint"===T.ability.name&&T.ability.abilityInUse&&(Ln*=1.35),T.type===L.Cheetah&&"Giving Chase"===T.ability.name&&!et&&(Ln*=1+this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt)/100),"Feeding Frenzy"===T.ability.name&&T.type===L.Shark&&(Ln*=Qi),T.type===L.Caribou&&"Great Migration"===T.ability.name&&(Ln+=Mr),"Wild Toboggan"===T.ability.name&&T.type===L.Penguin&&T.ability.abilityInUse){var d$=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt)/100,Es=20,C2=this.globalService.globalVar.modifiers.find(We=>"maxDriftAmountModifier"===We.text);void 0!==C2&&(Es=C2.value),(ec=ei.driftAmount)>(Es*=2)&&(ec=Es),Ln*=1+d$*(Math.abs(ec)/Es),T.ability.abilityInUse=!0}"Nap"===T.ability.name&&T.type===L.Hare&&(T.ability.remainingLength-=d*(1/this.frameModifier),T.ability.remainingLength<=0&&(T.ability.remainingLength=0),T.ability.remainingLength>0&&(Ln=0)),"Buried Treasure"===T.ability.name&&T.type===L.Octopus&&(T.ability.remainingLength-=d*(1/this.frameModifier),T.ability.remainingLength<=0&&(T.ability.remainingLength=0),T.ability.remainingLength>0&&(Ln=0)),T.type===L.Salamander&&"Heat Up"===T.ability.name&&T.ability.abilityInUse&&(Ln*=1+.15*T.ability.totalUseCount),T.type===L.Fox&&"Trickster"===T.ability.name&&"Acceleration"===T.ability.tricksterStatLoss&&T.ability.abilityInUse&&(Ln*=.75),T.type===L.Fox&&"Trickster"===T.ability.name&&"Acceleration"===T.ability.tricksterStatGain&&T.ability.abilityInUse&&(Ln*=1.5),T.type===L.Fox&&"Nine Tails"===T.ability.name&&(Ln*=1+.15*this.getNineTailsBuffCount("Acceleration",bn)),T.type===L.Warthog&&"Graze"===T.ability.name&&(Ln*=1+.1*this.getGrazeBuffCount("Acceleration",_n)),T.type===L.Whale&&"Whalesong"===T.ability.name&&(3===T.ability.totalUseCount||T.ability.totalUseCount>5)&&T.ability.abilityInUse&&(Ln*=1.3),T.getEquippedItemName()===this.globalService.getEquipmentName(it.athleticTape)&&T.raceVariables.isBursting&&(Ln*=.5),wi&&(Ln*=1+.05*T.talentTree.column2Row2Points),gt+=Ln/this.frameModifier}gt<0&&!no&&(gt=0);var mi=T.currentStats.maxSpeedMs;if(mi*=J.terrain.maxSpeedModifier,mi*=Tt,T.type===L.Cheetah&&"Sprint"===T.ability.name&&T.ability.abilityInUse&&(mi*=1.35),T.type===L.Cheetah&&"On The Hunt"===T.ability.name&&(mi*=fi),"Nap"===T.ability.name&&T.type===L.Hare&&(mi*=2),et&&T.type===L.Shark&&"Blood In The Water"===T.ability.name&&(mi*=1+this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt)/100),null!==ve&&ve.type===L.Shark&&"Feeding Frenzy"===ve.ability.name||null!==ce&&ce.type===L.Shark&&"Feeding Frenzy"===ce.ability.name){var T2=.9,D2=this.globalService.globalVar.modifiers.find(We=>"feedingFrenzyNegativeModifier"===We.text);void 0!==D2&&(T2=D2.value),mi*=T2}if("Feeding Frenzy"===T.ability.name&&T.type===L.Shark&&(mi*=Qi),"Quick Toboggan"===T.ability.name&&T.type===L.Penguin&&(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCap||(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.quickTobogganUseCount+=1),mi*=nr.permanentMaxSpeedIncreaseMultiplier)),T.type===L.Gecko&&"Night Vision"===T.ability.name&&(mi*=fi),T.type===L.Fox&&"Trickster"===T.ability.name&&"Max Speed"===T.ability.tricksterStatLoss&&T.ability.abilityInUse&&(mi*=.75),T.type===L.Fox&&"Trickster"===T.ability.name&&"Max Speed"===T.ability.tricksterStatGain&&T.ability.abilityInUse&&(mi*=1.5),T.type===L.Fox&&"Fleeting Speed"===T.ability.name){var Gu=Pa;(Gu-=.02*Math.floor(Ar/J.distance*100)*(Gu-1))<1&&(Gu=1),mi*=Gu}if(T.type===L.Fox&&"Nine Tails"===T.ability.name&&(mi*=1+.15*this.getNineTailsBuffCount("Max Speed",bn)),T.type===L.Warthog&&"Graze"===T.ability.name&&(mi*=1+.1*this.getGrazeBuffCount("Max Speed",_n)),T.type===L.Whale&&"Whalesong"===T.ability.name&&T.ability.totalUseCount>=5&&T.ability.abilityInUse&&(mi*=1.3),T.type===L.Whale&&"Storing Power"===T.ability.name&&(T.ability.abilityInUse&&(Ea=.1*mi,mi*=.9),mi+=Do),T.talentTree.talentTreeType===yt.sprint&&(mi*=1+.005*T.talentTree.column2Row4Points*T.raceVariables.velocityReachesMaxSpeedCount),kr=0,T.talentTree.talentTreeType===yt.longDistance&&gt>mi*(.005*T.talentTree.column2Row4Points)&&(kr+=mi*(.005*T.talentTree.column2Row4Points)),T.type===L.Whale&&"Unparalleled Focus"===T.ability.name&&T.ability.abilityInUse&&(kr+=.2*mi),T.getEquippedItemName()===this.globalService.getEquipmentName(it.incense)){var R2=.9,x2=this.globalService.globalVar.modifiers.find(We=>"incenseEquipmentModifier"===We.text);void 0!==x2&&(R2=x2.value),gt>=mi*R2&&(gt=mi)}wi=T.talentTree.talentTreeType===yt.longDistance&&gt<=.25*mi,gt>mi&&(gt=mi,T.talentTree.talentTreeType===yt.sprint&&T.raceVariables.velocityReachesMaxSpeedCount<10&&(T.raceVariables.velocityReachesMaxSpeedCount+=1)),ei.checkedForBurst||(Pi.didAnimalLoseFocus?br=0:br+=1,br>=3&&T.type===L.Whale&&"Unparalleled Focus"===T.ability.name&&(T.ability.abilityInUse=!0,T.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt),this.globalService.increaseAbilityXp(T),r.addRaceUpdate(u,Xe+"'s immense focus prevents their velocity from dropping too low."),br=0));var $0=this.doesRacerMiniBurst(T,Pi),W0=this.doesRacerBurst(T,ei,this.timeToComplete,e.length,o,Hu,Vf);if(W0||$0||Ps){if(T.raceVariables.isBursting=!0,(W0||Ps)&&(T.raceVariables.remainingBurstMeters+=this.getBurstDistance(T,J.terrain.powerModifier,Tt,_n)),$0&&(T.raceVariables.remainingBurstMeters+=this.getBurstDistance(T,J.terrain.powerModifier,Tt,_n)*(.05*T.talentTree.column1Row4Points)),T.raceVariables.burstCount+=1,this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var M2=.02,q0=this.globalService.globalVar.modifiers.find(We=>"burstMoraleBoostModifier"===We.text);null!=q0&&(M2=q0.value),this.lookupService.changeGrandPrixMorale(T.type,M2)}if(T.type===L.Monkey&&"Frenzy"===T.ability.name&&(T.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt),this.globalService.increaseAbilityXp(T)),T.type===L.Hare&&"Prey Instinct"===T.ability.name&&!T.ability.abilityUsed&&(T.raceVariables.remainingBurstMeters+=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt),T.ability.abilityUsed=!0),T.type===L.Whale&&"Storing Power"===T.ability.name&&(Do+=Ea),T.type===L.Octopus&&"Big Brain"===T.ability.name&&!(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCap)){var f$=Math.round(J.pathData.length/3);if(T.raceVariables.burstCount===f$){this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.bigBrainUseCount+=1),r.addRaceUpdate(u,Xe+" uses "+(null==T?void 0:T.ability.name)+".");var p$=1+this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt)/100,g$=this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;this.AddRelayEffect(new At,T,g$,new Ve(1,1,1,p$,1,1),!0,qe.bigBrain,!0);var k2=4,A2=this.globalService.globalVar.modifiers.find(We=>"relayAbilityXpGainModifier"===We.text);void 0!==A2&&(k2=A2.value),this.globalService.increaseAbilityXp(T,k2)}}if((W0||Ps)&&r.addRaceUpdate(u,"<strong>BURST!</strong> "+Xe+" is breaking their limit!"),$0&&r.addRaceUpdate(u,"<strong>MINI BURST!</strong> "+Xe+" is breaking their limit!"),T.type!==L.Cheetah||"On The Hunt"!==T.ability.name||this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCap||(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.onTheHuntUseCount+=1),fi+=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt)/100,this.globalService.increaseAbilityXp(T)),T.type===L.Goat&&"Deep Breathing"===T.ability.name){var Ff=dt*(this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt)/100);T.currentStats.stamina+=Ff,r.addRaceUpdate(u,Xe+" uses "+T.ability.name+"."),T.currentStats.stamina>dt&&(Ff=T.currentStats.stamina-dt,If=0,this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCap||(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(Ff*=.2,this.globalService.globalVar.eventRaceData.eventAbilityData.deepBreathingUseCount+=1),this.AddRelayEffect(new At,T,If,new Ve(0,0,0,0,0,0),!1,qe.deepBreathing,!0,Ff)),T.currentStats.stamina=dt),this.globalService.increaseAbilityXp(T)}}var _r=gt;if(q>0){var X0=this.lookupService.getRelayEffectFromListByType(T.raceVariables.relayEffects,qe.camouflage);if(void 0!==X0&&void 0!==X0.additionalValue){var Y0=Ar/X0.remainingRelayMeters;Y0>1&&(Y0=1),(_r+=(1-Y0)*q)>1.5*mi&&(_r=1.5*mi)}}if(T.raceVariables.isBursting){C=zr.Burst;var zu=1.25;T.type===L.Goat&&"In The Rhythm"===T.ability.name&&(zu+=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt)/100),zu+=j,T.talentTree.talentTreeType===yt.longDistance&&(zu+=T.raceVariables.burstCount*(.005*T.talentTree.column1Row2Points)),T.raceVariables.remainingBurstMeters>=_r/this.frameModifier?(T.raceVariables.remainingBurstMeters-=(_r*=zu)/this.frameModifier,T.raceVariables.remainingBurstMeters<0&&(_r+=T.raceVariables.remainingBurstMeters,T.raceVariables.remainingBurstMeters=0)):(_r-=T.raceVariables.remainingBurstMeters,_r+=T.raceVariables.remainingBurstMeters*zu,T.raceVariables.remainingBurstMeters=0,T.raceVariables.isBursting=!1,r.addRaceUpdate(u,Xe+"'s burst ends.")),T.talentTree.talentTreeType===yt.sprint&&!T.raceVariables.velocityExceedsMaxSpeedDuringBurst&&_r>mi&&T.raceVariables.isBursting&&(T.raceVariables.remainingBurstMeters+=T.raceVariables.remainingBurstMeters*(.05*T.talentTree.column2Row2Points),T.raceVariables.velocityExceedsMaxSpeedDuringBurst=!0)}var ar=_r/this.frameModifier;if(T.ability.abilityInUse&&(T.type===L.Monkey&&"Leap"===T.ability.name||T.type===L.Octopus&&"Propulsion"===T.ability.name)){var m$=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt);ar+=m$/T.ability.totalFrames,T.ability.remainingFrames-=1,T.ability.remainingFrames<=0&&(T.ability.abilityInUse=!1)}if(J.courseType===W.Tundra){var ec;if(this.handleTundraDrift(T,ei,Pi,hi,Hu,J.terrain,Jl,ar,Tt,nr,r,Xe,u))ar=0,gt=0,r.addRaceUpdate(u,Xe+" slides into a wall and loses all momentum!");else if((ec=Math.abs(ei.driftAmount))<=(Es=20)&&!hi){var P2=1-ec/100;ar*=P2,mi*=P2}this.tundraPreviousYAmount=T.raceVariables.icyCurrentYAmount}J.courseType===W.Volcanic?this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.selectedRace.raceUI.lavaFallPercentByFrame.push([0,0,0,0,0]):this.handleLavaFall(T,de,e.length/this.timeToComplete,Ar,J.distance,r,u,be)&&(this.timeToComplete=u/this.frameModifier):this.selectedRace.raceLegs.some(We=>We.courseType===W.Volcanic)&&this.selectedRace.raceUI.lavaFallPercentByFrame.push(this.selectedRace.raceUI.lavaFallPercentByFrame.length>0&&null!=this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]&&this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1][0]>0?this.selectedRace.raceUI.lavaFallPercentByFrame[this.selectedRace.raceUI.lavaFallPercentByFrame.length-1]:[0,0,0,0,0]),o+=ar>ni?ni:ar,ni-=ar;var Is=1e5;this.timeToComplete*this.frameModifier>2e4&&(Is=1e4);var Q0=1e5;if(this.timeToComplete*this.frameModifier>2e4&&(Q0=1e3),e.raceUI.distanceCoveredByFrame.push(Math.round(o*Q0)/Q0),e.raceUI.velocityByFrame.push(Math.round(ar*Is)/Is),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix||e.raceUI.timeToCompleteByFrame.push(this.timeToComplete),e.raceUI.maxSpeedByFrame.push(Math.round(mi*Is)/Is),e.raceUI.staminaPercentByFrame.push(Math.round(T.currentStats.stamina/dt*Is)/Is),e.raceUI.racerEffectByFrame.push(C),this.handleRacePositionByFrame(e,d,u,this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+o:o),this.handleStamina(T,r,ar,u,J.terrain,dt,Ar,J,rr),p2||(T.raceVariables.metersSinceLostFocus+=ar),T.type===L.Fox&&"Nine Tails"===T.ability.name&&(this.checkForNineTailsBuff(ei,bn,T,J,Tt,r,u,Xe),bn.length>0&&(bn.forEach(We=>{We[1]-=ar}),bn=bn.filter(We=>We[1]>0))),T.type===L.Warthog&&"Graze"===T.ability.name&&_n.length>0&&(_n.forEach(We=>{We[1]-=ar}),_n=_n.filter(We=>We[1]>0)),T.ability.abilityInUse&&T.ability.remainingLength>0&&(T.ability.remainingLength-=ar,T.type===L.Gecko&&"Camouflage"===T.ability.name&&(T.ability.remainingLength-=ar),T.ability.remainingLength<=0)){if(T.ability.abilityInUse=!1,T.ability.currentCooldown=T.ability.cooldown,T.getEquippedItemName()===this.globalService.getEquipmentName(it.pendant)){var $u=.9;void 0!==(Wu=this.globalService.globalVar.modifiers.find(We=>"pendantEquipmentModifier"===We.text))&&($u=Wu.value),T.ability.currentCooldown*=$u}if(null!=T.raceVariables&&null!=T.raceVariables.relayEffects&&T.raceVariables.relayEffects.length>0){var K0=this.lookupService.getRelayEffectFromListByType(T.raceVariables.relayEffects,qe.supportAbilityCooldown);void 0!==K0&&void 0!==K0.additionalValue&&(T.ability.currentCooldown*=K0.additionalValue)}}if(null!=T.ability.currentCooldown&&T.ability.currentCooldown<=0&&this.abilityRedundancyCheck(T,gt,ei,J,ni,Tt)){var Wu;if(this.useAbility(T,e,J,Tt,dt,Ar,rr,_n,r,u,Xe),(Pr=new Y).value=u,T.type===L.Fox&&"Trickster"===T.ability.name?Pr.text=T.getAbilityUseUpdateText(Xe,", gaining "+T.ability.tricksterStatGain+" but losing "+T.ability.tricksterStatLoss):T.type===L.Whale&&"Whalesong"===T.ability.name?1===T.ability.totalUseCount?Pr.text=T.getAbilityUseUpdateText(Xe," (Adaptability)"):2===T.ability.totalUseCount?Pr.text=T.getAbilityUseUpdateText(Xe," (Burst Distance)"):3===T.ability.totalUseCount?Pr.text=T.getAbilityUseUpdateText(Xe," (Acceleration)"):4===T.ability.totalUseCount?Pr.text=T.getAbilityUseUpdateText(Xe," (Focus)"):5===T.ability.totalUseCount?Pr.text=T.getAbilityUseUpdateText(Xe," (Max Speed)"):T.ability.totalUseCount>5&&(Pr.text=T.getAbilityUseUpdateText(Xe," (All)")):Pr.text=T.getAbilityUseUpdateText(Xe),T.type===L.Warthog&&"Graze"===T.ability.name||r.raceUpdates.push(Pr),T.ability.currentCooldown=T.ability.cooldown,T.getEquippedItemName()===this.globalService.getEquipmentName(it.pendant))$u=.9,void 0!==(Wu=this.globalService.globalVar.modifiers.find(T$=>"pendantEquipmentModifier"===T$.text))&&($u=Wu.value),T.ability.currentCooldown*=$u;if(T.type===L.Caribou&&"Great Migration"===T.ability.name){var Z0=.1*dt;T.currentStats.stamina-=Z0,Mr=Z0>1?.25*Z0:1}}null!=T.raceVariables.relayEffects&&T.raceVariables.relayEffects.length>0&&(T.raceVariables.relayEffects.forEach(We=>{We.remainingRelayMeters<=ar?(We.remainingRelayMeters=0,We.isMultiplicative?null==T||T.currentStats.divideCurrentRacingStats(We.relayAffectedStatRatios):null==T||T.currentStats.subtractCurrentRacingStats(We.relayAffectedStatRatios),We.effectType!==qe.deepBreathing&&We.effectType!==qe.bigBrain&&We.effectType!==qe.specialDelivery&&r.addRaceUpdate(u,Xe+"'s relay effect "+this.lookupService.getRelayEffectNameByType(We.effectType)+" ends.")):We.remainingRelayMeters-=ar}),T.raceVariables.relayEffects=T.raceVariables.relayEffects.filter(We=>We.remainingRelayMeters>0));var Pr,I2=10;this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(I2=20),0!==u&&u!==this.timeToComplete&&u%(I2*this.frameModifier)==0&&((Pr=new Y).value=u,Pr.text=this.getUpdateMessageByRelativeDistance(d,u,this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.distanceCovered+o:o,Xe),r.raceUpdates.push(Pr));var qu=!1,Bf=0,J0=0;if(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(Ro=this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime(),Bf+=d*Ro,J0=this.globalService.globalVar.eventRaceData.distanceCovered),o+J0>d*(u/this.frameModifier)+Bf?(et||(qu=!0),et=!0):(et&&(qu=!0),et=!1),qu&&T.type===L.Shark&&"Apex Predator"===T.ability.name&&!T.ability.abilityUsed&&Ao>1){r.addRaceUpdate(u,Xe+" bites the other racers as they pass, slowing them down."),T.ability.abilityUsed=!0;var Lf=this.lookupService.GetAbilityEffectiveAmount(T,J.terrain.powerModifier,Tt),eb=this.timeToComplete*(Lf/this.selectedRace.length),V2=1.5*eb;this.timeToComplete+=V2-eb,this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.bonusTime+=V2-eb),this.globalService.increaseAbilityXp(T)}if(ue>0&&d*(u/this.frameModifier)+Bf>=ue&&d*((u-1)/this.frameModifier)+Bf<ue){var Xu=this.racingAnimals.find(We=>We.type===L.Warthog);if(void 0!==Xu){Lf=this.lookupService.GetAbilityEffectiveAmount(Xu,J.terrain.powerModifier);var tb=e.length/this.timeToComplete;this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=Lf/(tb=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=Lf/tb,ue=0,r.addRaceUpdate(u,"<span class='coloredText flatlandColor'>"+(null==Xu?void 0:Xu.name)+"</span> tussles with the competition as they pass, slowing them down.")}}if(T.ability.currentCooldown-=1/this.frameModifier,u+=1,ni<=0){r.addRaceUpdate(u,Xe+" finishes their leg of the race."),J.legComplete=!0,w+=1,T.type===L.Warthog&&"Time To Tussle"===T.ability.name&&et&&(ue=o+J0,this.globalService.increaseAbilityXp(T)),this.preRacerResetRelayEffectCheck(T,ve,r,u,Xe,J,J,Tt,_r,dt),T.type===L.Octopus&&"Buried Treasure"===T.ability.name&&(ye=1.25),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped?this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.endOfLegRelayEffectCheck(T,new At,r,u,ui,J,J,Tt,_r,Vf,Hu):this.PrepareRacingAnimal(r,u,ui,T,void 0,void 0,void 0,Tt,void 0,_r),J.terrain.accelerationModifier=xi,J.terrain.maxSpeedModifier=mn,J.terrain.staminaModifier=zi,J.terrain.powerModifier=ji,J.terrain.focusModifier=Vi,J.terrain.adaptabilityModifier=di,b.push(T),y.push(J);break}u===this.timeToComplete*this.frameModifier&&(J.terrain.accelerationModifier=xi,J.terrain.maxSpeedModifier=mn,J.terrain.staminaModifier=zi,J.terrain.powerModifier=ji,J.terrain.focusModifier=Vi,J.terrain.adaptabilityModifier=di),s=_r,l=Hu,c=Vf}if(m+=1,this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix){var O2=.05,ib=this.globalService.globalVar.modifiers.find(We=>"segmentCompleteMoraleBoostModifier"===We.text);null!=ib&&(O2=ib.value),this.lookupService.changeGrandPrixMorale(T.type,O2),this.globalService.globalVar.eventRaceData.previousRaceSegmentData=this.carryOverEventRaceSegmentData(T,gt,fi,Ei.permanentAdaptabilityIncreaseMultiplier,nr.permanentMaxSpeedIncreaseMultiplier,Qi,Mr,rr.coldBloodedIncreaseMultiplier,Pa,bn,_n,z,wi,kr,Do,br)}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}),e.raceLegs.some(J=>!J.legComplete)?(r.wasSuccessful=!1,r.totalFramesPassed=u,r.distanceCovered=e.raceUI.distanceCoveredByFrame[u-1],r.addRaceUpdate(u,"You lost the race...")):(e.isCompleted=!0,r.wasSuccessful=!0,r.totalFramesPassed=u,r.distanceCovered=e.raceUI.distanceCoveredByFrame[u-1],r.addRaceUpdate(u,"You won the race!")),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.animalAlreadyPrepped||this.racingAnimals.forEach(J=>{this.PrepareRacingAnimal(r,u,"",J,void 0,void 0,void 0,void 0,!0)}),this.globalService.globalVar.trackedStats.totalMetersRaced+=o,r.wasSuccessful&&this.raceWasSuccessfulUpdate(r,ye),r}getStaminaModifier(e,i,r,a,o,s){var l,c=this.globalService.globalVar.modifiers.find(d=>"staminaModifier"===d.text);return l=void 0===c?.2:c.value,null!=e&&null!=e.staminaModifier&&(l*=e.staminaModifier),i.talentTree.talentTreeType===yt.sprint&&(l*=1+.05*i.talentTree.column3Row2Points),i.talentTree.talentTreeType===yt.longDistance&&i.currentStats.stamina/r<=.35&&(l*=1-.05*i.talentTree.column3Row2Points),i.type===L.Warthog&&"Mud Pit"===i.ability.name&&i.ability.abilityInUse&&(l*=.75),i.type===L.Salamander&&"Cold Blooded"===i.ability.name&&i.ability.abilityInUse&&(l*=1-s),l}handleStamina(e,i,r,a,o,s,l,c,u){var d=this.getStaminaModifier(o,e,s,l,c,u.coldBloodedIncreaseMultiplier);e.type===L.Horse&&"Second Wind"===e.ability.name&&e.ability.abilityInUse||(e.currentStats.stamina-=e.type===L.Cheetah&&"Sprint"===e.ability.name&&e.ability.abilityInUse?r*d*2:r*d),e.currentStats.stamina<0&&(e.currentStats.stamina=0,e.raceVariables.ranOutOfStamina=!0)}getBurstDistance(e,i,r,a){var o=0,s=this.globalService.globalVar.modifiers.find(C=>"breedLevelStatModifier"===C.text);null!=s&&(o=s.value),o=1+o*(e.breedLevel-1);var l=1;e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(l*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Power"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(l*=1.5),e.type===L.Warthog&&"Graze"===e.ability.name&&void 0!==a&&(l*=1+.1*this.getGrazeBuffCount("Power",a));var c=e.currentStats.powerMs*l*i*r,u=1;if(e.getEquippedItemName()===this.globalService.getEquipmentName(it.runningShoes)){var d=1.2,v=this.globalService.globalVar.modifiers.find(C=>"runningShoesEquipmentModifier"===C.text);void 0!==v&&(d=v.value),u=1+e.raceVariables.burstCount*(d-1)}var m=0,b=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,qe.supportBurstDistance);void 0!==b&&void 0!==b.additionalValue&&(m=b.additionalValue);var y=1;return e.type===L.Whale&&"Whalesong"===e.ability.name&&(2===e.ability.totalUseCount||e.ability.totalUseCount>5)&&e.ability.abilityInUse&&(y*=1.3),e.currentStats.calculateBurstDistance(o,void 0,c)*u*y+m}doesRacerMiniBurst(e,i){var r=!1;return null!=i&&i.isSpecialPath&&(e.talentTree.talentTreeType===yt.sprint&&e.talentTree.column1Row4Points>0&&!i.didAnimalStumble&&!i.checkedForMiniBurst&&(r=!0),i.checkedForMiniBurst=!0),r}getBurstChance(e,i,r){var a=1e3/this.selectedRace.length,o=0,s=this.globalService.globalVar.modifiers.find(d=>"breedLevelStatModifier"===d.text);null!=s&&(o=s.value);var l=e.currentStats.calculateBurstChance(o=1+o*(e.breedLevel-1),i,r)*a;e.type===L.Warthog&&"Mud Pit"===e.ability.name&&e.ability.abilityInUse&&(l*=1.25);var c=0,u=this.lookupService.getRelayEffectFromListByType(e.raceVariables.relayEffects,qe.supportBurstChance);return void 0!==u&&void 0!==u.additionalValue&&(c=u.additionalValue),l+c}doesRacerBurst(e,i,r,a,o,s,l){var c=this.getBurstChance(e,l,s);if(i.checkedForBurst)return!1;if(i.checkedForBurst=!0,"Night Vision"===e.ability.name&&e.type===L.Gecko&&(e.ability.abilityInUse=!1),e.type===L.Hare&&"Prey Instinct"===e.ability.name&&!e.ability.abilityUsed)return!0;if(i.isSpecialPath){var u=this.lookupService.getResourceByName("Course Maps");if(null==u&&(u=0),u>0){var d=1,v=this.globalService.globalVar.modifiers.find(b=>"racerMapsModifier"===b.text);null!=v&&(d=1+u*v.value),c*=d}}return this.utilityService.getRandomNumber(1,100)<=c+1}raceWasSuccessfulUpdate(e,i){var s,r=this.globalService.globalVar.animals.find(R=>R.type===L.Octopus),a="<span class='coloredText waterColor'>"+(null==r?void 0:r.name)+"</span>",o=this.globalService.globalVar.circuitRank,l=0;if(this.selectedRace.isCircuitRace)s=this.globalService.globalVar.circuitRaces.find(R=>R.raceId===this.selectedRace.raceId),this.globalService.globalVar.circuitRaces.filter(R=>R.requiredRank===o).every(R=>R.isCompleted)&&(this.selectedRace.circuitIncreaseReward=this.globalService.IncreaseCircuitRank(),this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,G.Resources)));else if(s=this.globalService.globalVar.localRaces.find(R=>R.raceId===this.selectedRace.raceId&&R.localRaceType===this.selectedRace.localRaceType),this.selectedRace.localRaceType===Ut.Free){var u=this.globalService.globalVar.resources.find(R=>"International Races"===R.name),d=this.globalService.globalVar.resources.find(R=>"National Races"===R.name);if(null!=u&&u.amount>0){var v=5,m=this.globalService.globalVar.modifiers.find(R=>"internationalRacesToMedalModifier"===R.text);null!=m&&(v=m.value),this.globalService.globalVar.nationalRaceCountdown>=v&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,G.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else if(null!=d&&d.amount>0){var b=12,y=this.globalService.globalVar.modifiers.find(R=>"nationalRacesToMedalModifier"===R.text);null!=y&&(b=y.value),this.globalService.globalVar.nationalRaceCountdown>=b&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,G.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}else{var C=50,k=this.globalService.globalVar.modifiers.find(R=>"freeRacesToMedalModifier"===R.text);null!=k&&(C=k.value),this.globalService.globalVar.nationalRaceCountdown>=C&&(this.selectedRace.rewards.push(this.initializeService.initializeResource("Medals",1,G.Resources)),this.globalService.globalVar.nationalRaceCountdown=0)}}if(this.selectedRace.localRaceType!==Ut.Free&&this.selectedRace.localRaceType!==Ut.Track){if(void 0===s)return;this.selectedRace.localRaceType===Ut.Mono&&(this.globalService.globalVar.lastMonoRaceCourseType=this.selectedRace.raceLegs[0].courseType),this.globalService.IncreaseLocalRaceRank(this.selectedRace.localRaceType),s.isCompleted=!0}else this.selectedRace.localRaceType===Ut.Free&&(this.globalService.globalVar.nationalRaceCountdown+=1);this.racingAnimals.forEach(R=>{this.selectedRace.isCircuitRace?l=this.lookupService.getCircuitBreedGaugeIncrease(R):this.selectedRace.raceType!==Ee.trainingTrack&&(l=this.lookupService.getLocalBreedGaugeIncrease(R)),this.globalService.IncreaseAnimalBreedGauge(R,l)}),this.selectedRace.localRaceType!==Ut.Track?e.beatMoneyMark=this.checkMoneyMark(e):this.handleTrackRaceRewards(e),null!=this.selectedRace.rewards&&this.selectedRace.rewards.forEach(R=>{if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(ve=>ve.name===R.name)){var z=this.globalService.globalVar.resources.find(ve=>ve.name===R.name);if(null!=z)if(this.selectedRace.localRaceType!==Ut.Track)if("Coins"===z.name){if(e.beatMoneyMark){e.addRaceUpdate(e.totalFramesPassed,"You beat the money mark!");var q=1.25,j=this.globalService.globalVar.modifiers.find(ve=>"moneyMarkRewardModifier"===ve.text);null!=j&&(q=j.value),R.amount=Math.round(R.amount*q)}var ye=this.lookupService.getRenown();R.amount=Math.round(R.amount*this.lookupService.getRenownCoinModifier(ye,!1)),i>1&&e.addRaceUpdate(e.totalFramesPassed,a+" finds buried treasure at the bottom of the ocean!"),R.amount=Math.round(R.amount*i),z.amount+=R.amount}else"Facility Level"===z.name?(z.amount+=R.amount,this.lookupService.recalculateAllAnimalStats()):"Renown"===z.name?z.amount=parseFloat((z.amount+R.amount).toFixed(3)):z.amount+=R.amount;else z.amount+=R.amount}else if("Bonus Breed XP Gain From Training"===R.name&&R.itemType===G.Other){var ue=this.selectedRace.raceLegs[0].courseType;null!=(ce=this.racingAnimals.find(ve=>ve.raceCourseType===ue))&&(ce.miscStats.bonusBreedXpGainFromTraining+=R.amount)}else if("Bonus Breed XP Gain From Free Races"===R.name&&R.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ie=>Ie.raceCourseType===ue))&&(ce.miscStats.bonusBreedXpGainFromLocalRaces+=R.amount);else if("Bonus Breed XP Gain From Circuit Races"===R.name&&R.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ie=>Ie.raceCourseType===ue))&&(ce.miscStats.bonusBreedXpGainFromCircuitRaces+=R.amount);else if("Training Time Reduction"===R.name&&R.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ie=>Ie.raceCourseType===ue))&&(ce.miscStats.trainingTimeReduction+=R.amount);else if("Diminishing Returns per Facility Level"===R.name&&R.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ie=>Ie.raceCourseType===ue))&&(ce.miscStats.diminishingReturnsBonus+=R.amount);else if("Orb Pendant"===R.name&&R.itemType===G.Other)ue=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ie=>Ie.raceCourseType===ue))&&(ce.canEquipOrb=!0);else if("Bonus Talents"===R.name&&R.itemType===G.Other){var ce;ue=this.selectedRace.raceLegs[0].courseType,null!=(ce=this.racingAnimals.find(Ie=>Ie.raceCourseType===ue))&&(ce.miscStats.bonusTalents+=R.amount)}else this.globalService.globalVar.resources.push(new ie(R.name,R.amount,R.itemType))})}checkMoneyMark(e){var i=!1;if(0===this.lookupService.getResourceByName("Money Mark"))return i;var a=this.globalService.globalVar.modifiers.find(s=>"moneyMarkPaceModifier"===s.text);return null==a||e.totalFramesPassed<=this.timeToComplete*this.frameModifier*a.value&&(i=!0),i}handleTrackRaceRewards(e){if(1===this.selectedRace.raceLegs.length){var i=this.selectedRace.raceLegs[0].courseType,r=this.racingAnimals.find(d=>d.raceCourseType===i);if(void 0!==r){var a=null;if(this.selectedRace.trackRaceType===ln.novice&&(a=r.allTrainingTracks.noviceTrack),this.selectedRace.trackRaceType===ln.intermediate&&(a=r.allTrainingTracks.intermediateTrack),this.selectedRace.trackRaceType===ln.master&&(a=r.allTrainingTracks.masterTrack),null!==a){var o=this.timeToComplete*this.frameModifier,s=.25,l=this.globalService.globalVar.modifiers.find(d=>"trainingTrackPaceModifier"===d.text);void 0!==l&&(s=l.value);for(var c=0;c<a.totalRewards;c++)c<a.rewardsObtained||e.totalFramesPassed<=o/(1+s*c)&&(a.rewardsObtained=c+1,a.rewardsObtained===a.totalRewards&&(this.selectedRace.trackRaceType===ln.novice&&(r.allTrainingTracks.intermediateTrackAvailable=!0),this.selectedRace.trackRaceType===ln.intermediate&&(r.allTrainingTracks.masterTrackAvailable=!0)),null==this.selectedRace.rewards&&(this.selectedRace.rewards=[]),this.selectedRace.rewards.push(a.rewards[c]));null!=this.selectedRace.rewards&&(this.selectedRace.rewards=this.utilityService.condenseList(this.selectedRace.rewards))}}}}getUpdateMessageByRelativeDistance(e,i,r,a){var o=a,s=e*(i/this.frameModifier);return this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(s+=e*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),r<.5*s?o="Is "+a+" <strong>even moving?!</strong>":r<.75*s?o=a+" is <strong>falling out of the race!</strong>":r<.9*s?o=a+" is <strong>just a step behind everyone else!</strong>":r>=.9*s&&r<=1.1*s?o=a+" is <strong>right on pace!</strong>":r>=1.5*s?o=a+" <strong>CANNOT be caught!!</strong>":r>=1.25*s?o=a+" is <strong>WAY ahead of the pack!</strong>":r>=1.1*s&&(o=a+" is <strong>barely leading the pack!</strong>"),o}PrepareRacingAnimal(e,i,r,a,o,s,l,c,u,d,v,m){if(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!0),a.ability.currentCooldown=a.ability.cooldown,a.ability.remainingLength=0,a.ability.totalUseCount=0,a.getEquippedItemName()===this.globalService.getEquipmentName(it.pendant)){var b=.9,y=this.globalService.globalVar.modifiers.find(R=>"pendantEquipmentModifier"===R.text);void 0!==y&&(b=y.value),a.ability.currentCooldown*=b}if(null!=a.raceVariables&&null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0){var k=this.lookupService.getRelayEffectFromListByType(a.raceVariables.relayEffects,qe.supportAbilityCooldown);void 0!==k&&void 0!==k.additionalValue&&(a.ability.currentCooldown*=k.additionalValue)}a.ability.abilityUsed=!1,a.ability.abilityInUse=!1,null!=a.raceVariables&&(a.raceVariables.ranOutOfStamina=!1,a.raceVariables.burstCount=0,a.raceVariables.metersSinceLostFocus=0,a.raceVariables.hasLostFocusDuringRace=!1,a.raceVariables.firstAbilityUseEffectApplied=!1,a.raceVariables.velocityExceedsMaxSpeedDuringBurst=!1,a.raceVariables.velocityReachesMaxSpeedCount=0),this.globalService.calculateAnimalRacingStats(a),!0!==u&&(null!=o&&o.length>0&&this.endOfLegRelayEffectCheck(o[o.length-1],a,e,i,r,s,l,c,d,v,m),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects.forEach(R=>{a.raceVariables.relayEffects.push(R.makeCopy())}),this.globalService.globalVar.eventRaceData.queuedRelayEffects.length>0&&(this.globalService.globalVar.eventRaceData.queuedRelayEffects=this.globalService.globalVar.eventRaceData.queuedRelayEffects.filter(R=>R.affectsAllRacers))),null!=a.raceVariables.relayEffects&&a.raceVariables.relayEffects.length>0&&a.raceVariables.relayEffects.forEach(R=>{R.isMultiplicative?a.currentStats.multiplyCurrentRacingStats(R.relayAffectedStatRatios):a.currentStats.addCurrentRacingStats(R.relayAffectedStatRatios)}))}preRacerResetRelayEffectCheck(e,i,r,a,o,s,l,c,u,d){var v=4,m=this.globalService.globalVar.modifiers.find(w=>"relayAbilityXpGainModifier"===w.text);if(void 0!==m&&(v=m.value),null===i&&(i=new At),null!=l){if(e.type===L.Caribou&&"Herd Mentality"===e.ability.name&&!e.raceVariables.ranOutOfStamina){var b=e.currentStats.stamina*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100),y=0;this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCap||(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.herdMentalityUseCount+=1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.AddRelayEffect(i,e,y,new Ve(0,0,0,0,0,0),!1,qe.herdMentality,!1,b),this.globalService.increaseAbilityXp(e,v))}if(!(e.type!==L.Caribou||"Special Delivery"!==e.ability.name||e.raceVariables.ranOutOfStamina||(void 0===d&&(d=1),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCap))){this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.specialDeliveryUseCount+=1),y=this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance:this.selectedRace.length;var C=e.currentStats.stamina/d;C>1&&(C=1);var k=C*(this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c)/100);this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(k*=.2),this.AddRelayEffect(e,e,y,new Ve(0,0,0,0,0,0),!1,qe.specialDelivery,!0,k),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,v)}}}endOfLegRelayEffectCheck(e,i,r,a,o,s,l,c,u,d,v,m=1){var b=4,y=this.globalService.globalVar.modifiers.find(q=>"relayAbilityXpGainModifier"===q.text);if(void 0!==y&&(b=y.value),"Inspiration"===e.ability.name&&e.type===L.Horse&&null!=l){var C=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c);this.AddRelayEffect(i,e,C*m,new Ve(.25*e.currentStats.maxSpeedMs,0,0,0,0,0),!1,qe.inspiration,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,b),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.inspirationUseCount+=1)}if("Flowing Current"===e.ability.name&&e.type===L.Dolphin&&null!=l&&(C=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(i,e,C*m,new Ve(0,.25*e.currentStats.accelerationMs,0,0,0,0),!1,qe.flowingCurrent,!1),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,b),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.flowingCurrentUseCount+=1)),"Navigator"===e.ability.name&&e.type===L.Dolphin&&null!=l&&(C=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(i,e,C*m,new Ve(0,0,0,0,0,.25*e.currentStats.adaptabilityMs),!1,qe.navigator,!1),r.addRaceUpdate(a,o+" uses "+(null==e?void 0:e.ability.name)+"."),this.globalService.increaseAbilityXp(e,b),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.navigatorUseCount+=1)),e.type===L.Gecko&&"Camouflage"===e.ability.name&&null!=l){var w=u;C=this.lookupService.GetAbilityEffectiveAmount(e,l.terrain.powerModifier,c),this.AddRelayEffect(i,e,C*m,new Ve(0,0,0,0,0,0),!1,qe.camouflage,!1,w),r.addRaceUpdate(a,o+" uses "+e.ability.name+"."),this.globalService.increaseAbilityXp(e,b),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.camouflageUseCount+=1)}if(void 0!==s){var R=new gn;void 0!==l&&(R=l.terrain),void 0===c&&(c=1),void 0===v&&(v=e.currentStats.adaptabilityMs),void 0===d&&(d=e.currentStats.focusMs),this.talentRelayCheck(e,i,s.distance*m,R,c,d,v),this.batonEquipmentCheck(e,i,s.distance*m)}}talentRelayCheck(e,i,r,a,o,s,l,c=1){if(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.talentTree.talentTreeType===yt.support){if(e.talentTree.column1Row1Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,1,1,u=1+.01*e.talentTree.column1Row1Points),!0,qe.supportAdaptabilityRelay,!1),e.talentTree.column1Row3Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(u=1+.01*e.talentTree.column1Row3Points,1,1,1,1,1),!0,qe.supportMaxSpeedRelay,!1),e.talentTree.column2Row1Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,u=1+.01*e.talentTree.column2Row1Points,1,1,1,1),!0,qe.supportAccelerationRelay,!1),e.talentTree.column2Row2Points>0){var u=this.getBurstDistance(e,a.powerModifier,o)*(.05*e.talentTree.column2Row2Points);this.AddRelayEffect(i,e,r*c,new Ve(0,0,0,0,0,0),!1,qe.supportBurstDistance,!1,u)}if(e.talentTree.column2Row3Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,u=1+.01*e.talentTree.column2Row3Points,1,1,1),!0,qe.supportStaminaRelay,!1),e.talentTree.column2Row4Points>0){u=this.getBurstChance(e,s,l)*(.03*e.talentTree.column2Row4Points);this.AddRelayEffect(i,e,r*c,new Ve(0,0,0,0,0,0),!1,qe.supportBurstChance,!1,u)}e.talentTree.column3Row1Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,u=1+.01*e.talentTree.column3Row1Points,1,1),!0,qe.supportPowerRelay,!1),e.talentTree.column3Row2Points>0&&(u=1-.02*e.talentTree.column3Row2Points,this.AddRelayEffect(i,e,r*c,new Ve(0,0,0,0,0,0),!1,qe.supportAbilityCooldown,!1,u)),e.talentTree.column3Row3Points>0&&this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,1,u=1+.01*e.talentTree.column3Row3Points,1),!0,qe.supportFocusRelay,!1),e.talentTree.column3Row4Points>0&&(u=1+.02*e.talentTree.column3Row4Points,this.AddRelayEffect(i,e,r*c,new Ve(1,1,1,1,1,1),!0,qe.supportAbilityEfficiency,!1,u))}}batonEquipmentCheck(e,i,r,a=1){if(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(r=this.globalService.globalVar.eventRaceData.totalDistance),e.getEquippedItemName()===this.globalService.getEquipmentName(it.redBaton)){var o=1.1,s=this.globalService.globalVar.modifiers.find(w=>"redBatonEquipmentModifier"===w.text);void 0!==s&&(o=s.value),this.AddRelayEffect(i,e,r*a,new Ve(o,1,1,1,1,1),!0,qe.redBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(it.blueBaton)){var l=1.1,c=this.globalService.globalVar.modifiers.find(w=>"blueBatonEquipmentModifier"===w.text);void 0!==c&&(l=c.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,1,1,l,1),!0,qe.blueBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(it.violetBaton)){var u=1.1,d=this.globalService.globalVar.modifiers.find(w=>"violetBatonEquipmentModifier"===w.text);void 0!==d&&(u=d.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,1,u,1,1),!0,qe.violetBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(it.greenBaton)){var v=1.1,m=this.globalService.globalVar.modifiers.find(w=>"greenBatonEquipmentModifier"===w.text);void 0!==m&&(v=m.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,1,1,1,v),!0,qe.greenBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(it.orangeBaton)){var b=1.1,y=this.globalService.globalVar.modifiers.find(w=>"orangeBatonEquipmentModifier"===w.text);void 0!==y&&(b=y.value),this.AddRelayEffect(i,e,r*a,new Ve(1,b,1,1,1,1),!0,qe.orangeBaton,!1)}if(e.getEquippedItemName()===this.globalService.getEquipmentName(it.yellowBaton)){var C=1.1,k=this.globalService.globalVar.modifiers.find(w=>"yellowBatonEquipmentModifier"===w.text);void 0!==k&&(C=k.value),this.AddRelayEffect(i,e,r*a,new Ve(1,1,C,1,1,1),!0,qe.yellowBaton,!1)}}prepareRacingLeg(e,i){e.pathData.forEach(r=>{r.currentStumbleOpportunity=0,r.checkedForBurst=!1,r.checkedForNineTails=!1,r.driftAmount=0,r.didAnimalStumble=!1,r.checkedForDrift=!1}),this.checkForBlinders(e,i)}checkForBlinders(e,i){if(i.getEquippedItemName()===this.globalService.getEquipmentName(it.blinders)){var r=.5;e.terrain.maxSpeedModifier<1&&(e.terrain.maxSpeedModifier=1-(1-e.terrain.maxSpeedModifier)*r),e.terrain.accelerationModifier<1&&(e.terrain.accelerationModifier=1-(1-e.terrain.accelerationModifier)*r),e.terrain.staminaModifier<1&&(e.terrain.staminaModifier=1-(1-e.terrain.staminaModifier)*r),e.terrain.powerModifier<1&&(e.terrain.powerModifier=1-(1-e.terrain.powerModifier)*r),e.terrain.focusModifier<1&&(e.terrain.focusModifier=1-(1-e.terrain.focusModifier)*r),e.terrain.adaptabilityModifier<1&&(e.terrain.adaptabilityModifier=1-(1-e.terrain.adaptabilityModifier)*r)}}getPrelayEffects(e,i,r,a,o,s,l,c,u){null!==i&&void 0!==c&&i.talentTree.talentTreeType===yt.support&&i.talentTree.column1Row4Points>0&&this.endOfLegRelayEffectCheck(i,e,o,s,l,c,u,a,void 0,void 0,void 0,.03*i.talentTree.column1Row4Points)}AddRelayEffect(e,i,r,a,o,s,l,c,u=!1){var d=new ff;if(d.remainingRelayMeters=r,d.relayAffectedStatRatios=a,d.isMultiplicative=o,d.effectType=s,d.additionalValue=c,d.affectsAllRacers=l,i.talentTree.talentTreeType===yt.support&&i.talentTree.column1Row2Points>0){var v=1+.02*i.talentTree.column1Row2Points;d.isMultiplicative?(d.relayAffectedStatRatios.topSpeed>1&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*v),d.relayAffectedStatRatios.acceleration>1&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*v),d.relayAffectedStatRatios.endurance>1&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*v),d.relayAffectedStatRatios.power>1&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*v),d.relayAffectedStatRatios.focus>1&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*v),d.relayAffectedStatRatios.adaptability>1&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*v),void 0!==d.additionalValue&&d.additionalValue>1&&(d.additionalValue*=v)):(d.relayAffectedStatRatios.topSpeed>0&&(d.relayAffectedStatRatios.topSpeed=1+(d.relayAffectedStatRatios.topSpeed-1)*v),d.relayAffectedStatRatios.acceleration>0&&(d.relayAffectedStatRatios.acceleration=1+(d.relayAffectedStatRatios.acceleration-1)*v),d.relayAffectedStatRatios.endurance>0&&(d.relayAffectedStatRatios.endurance=1+(d.relayAffectedStatRatios.endurance-1)*v),d.relayAffectedStatRatios.power>0&&(d.relayAffectedStatRatios.power=1+(d.relayAffectedStatRatios.power-1)*v),d.relayAffectedStatRatios.focus>0&&(d.relayAffectedStatRatios.focus=1+(d.relayAffectedStatRatios.focus-1)*v),d.relayAffectedStatRatios.adaptability>0&&(d.relayAffectedStatRatios.adaptability=1+(d.relayAffectedStatRatios.adaptability-1)*v),void 0!==d.additionalValue&&d.additionalValue>0&&(d.additionalValue*=v))}if(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix)if(this.globalService.globalVar.eventRaceData.queuedRelayEffects.some(y=>y.effectType===s))if(this.lookupService.relayEffectTypeStacksEffectiveness(s))null!=(m=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(y=>y.effectType===s))&&(m.relayAffectedStatRatios.addCurrentRacingStats(a),void 0!==m.additionalValue&&void 0!==d.additionalValue&&(m.additionalValue+=d.additionalValue));else{var m;null!=(m=this.globalService.globalVar.eventRaceData.queuedRelayEffects.find(C=>C.effectType===s))&&(m.remainingRelayMeters+=r)}else this.globalService.globalVar.eventRaceData.queuedRelayEffects.push(d);else if(l){var b=this.selectedRace.raceLegs.findIndex(y=>y.courseType===e.raceCourseType);this.selectedRace.raceLegs.length>b&&this.selectedRace.raceLegs.slice(b+1).forEach(y=>{var C=this.racingAnimals.find(k=>k.raceCourseType===y.courseType);null!=C&&null!=C.raceVariables&&null!=C.raceVariables.relayEffects&&C.raceVariables.relayEffects.push(d)})}else null!=e&&null!=e.raceVariables&&null!=e.raceVariables.relayEffects&&e.raceVariables.relayEffects.push(d)}didAnimalStumble(e,i,r,a,o,s,l,c,u,d){if(e.raceVariables.stumbled||0===i.frequencyOfStumble||e.type===L.Gecko&&"Sticky"===e.ability.name&&e.ability.abilityInUse||e.type===L.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||e.type===L.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;var v=i.length/i.stumbleOpportunities;if(i.currentStumbleOpportunity===i.stumbleOpportunities&&i.routeDesign!==Ke.Regular&&e.type===L.Goat&&"Sure-footed"===e.ability.name&&(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount>=this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCap||(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.eventAbilityData.sureFootedUseCount+=1),o.permanentAdaptabilityIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,a.powerModifier,l)/100,this.globalService.increaseAbilityXp(e),i.currentStumbleOpportunity+=1)),i.currentStumbleOpportunity*v<r){i.currentStumbleOpportunity+=1;var b=250;if(this.utilityService.getRandomNumber(1,100)<=i.frequencyOfStumble/(b+=s*a.adaptabilityModifier)*i.length){if(e.getEquippedItemName()===this.globalService.getEquipmentName(it.headband)){var k=3,w=this.globalService.globalVar.modifiers.find(R=>"headbandEquipmentModifier"===R.text);if(void 0!==w&&(k=w.value),e.raceVariables.headbandStumblePreventionCount<k)return e.raceVariables.headbandStumblePreventionCount+=1,d.addRaceUpdate(c,u+"'s headband prevents them from stumbling."),!1}return i.didAnimalStumble=!0,!0}}return!1}didAnimalLoseFocus(e,i,r,a,o,s,l,c,u){if(e.raceVariables.lostFocus||e.type===L.Monkey&&"Frenzy"===e.ability.name&&e.raceVariables.isBursting)return!1;if(this.currentLostFocusOpportunity*(r/i)<a){this.currentLostFocusOpportunity+=1;var m=this.globalService.globalVar.modifiers.find(w=>"focusModifier"===w.text),b=u*o.focusModifier*(void 0===m?.75:m.value);if(e.raceVariables.metersSinceLostFocus<b)return!1;var C=(e.raceVariables.metersSinceLostFocus-b)/e.currentStats.focusMs*100;if(this.utilityService.getRandomNumber(1,100)<=C)return c.didAnimalLoseFocus=!0,!0}return!1}increasePersistentAbilityXp(e){(e.type===L.Cheetah&&"Giving Chase"===e.ability.name||e.type===L.Hare&&"Prey Instinct"===e.ability.name||e.type===L.Hare&&"Nap"===e.ability.name||e.type===L.Goat&&"In The Rhythm"===e.ability.name||e.type===L.Shark&&"Feeding Frenzy"===e.ability.name||e.type===L.Shark&&"Blood In The Water"===e.ability.name||e.type===L.Octopus&&"Buried Treasure"===e.ability.name||e.type===L.Penguin&&"Wild Toboggan"===e.ability.name||e.type===L.Fox&&"Fleeting Speed"===e.ability.name)&&this.globalService.increaseAbilityXp(e,3)}abilityRedundancyCheck(e,i,r,a,o,s){return!(e.ability.oneTimeEffect&&e.ability.abilityUsed||"Second Wind"===e.ability.name&&e.type===L.Horse&&e.raceVariables.recoveringStamina||"Pacemaker"===e.ability.name&&e.type===L.Horse&&i===e.currentStats.maxSpeedMs)&&(!("Leap"===e.ability.name&&e.type===L.Monkey&&this.lookupService.GetAbilityEffectiveAmount(e,a.terrain.powerModifier,s)<o)&&!("Sticky"===e.ability.name&&e.type===L.Gecko&&0===r.frequencyOfStumble))}useAbility(e,i,r,a,o,s,l,c,u,d,v){if(e.ability.abilityUsed=!0,e.type===L.Horse&&("Second Wind"===e.ability.name||"Pacemaker"===e.ability.name)&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Cheetah&&"Sprint"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Hare&&"Awareness"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Warthog&&"Graze"===e.ability.name&&(e.ability.abilityInUse=!0,this.checkForGrazeBuff(c,e,r,a,u,d,v),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Monkey){if("Landslide"===e.ability.name){var m=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),b=i.length/this.timeToComplete;this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.bonusTime+=m/(b=this.globalService.globalVar.eventRaceData.totalDistance/(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime)):this.timeToComplete+=m/b,this.globalService.increaseAbilityXp(e)}"Leap"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e))}if(e.type===L.Gecko&&"Sticky"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Dolphin&&"Echolocation"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Octopus&&"Propulsion"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingFrames=e.ability.totalFrames,this.globalService.increaseAbilityXp(e)),e.type===L.Whale&&("Storing Power"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),"Whalesong"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e))),e.type===L.Penguin&&"Careful Toboggan"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Caribou&&"Great Migration"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),e.type===L.Salamander){if("Cold Blooded"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a);var y=s/r.distance;y>.5&&(y=.5-(y-.5)),l.coldBloodedIncreaseMultiplier=y}"Burrow"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e)),"Heat Up"===e.ability.name&&(e.ability.abilityInUse=!0,e.ability.totalUseCount+=1,e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a),this.globalService.increaseAbilityXp(e))}if(e.type===L.Fox&&"Trickster"===e.ability.name){e.ability.abilityInUse=!0,this.globalService.increaseAbilityXp(e);var C=this.utilityService.getRandomInteger(1,6);1===C&&(e.ability.tricksterStatLoss="Acceleration"),2===C&&(e.ability.tricksterStatLoss="Max Speed"),3===C&&(e.ability.tricksterStatLoss="Adaptability"),4===C&&(e.ability.tricksterStatLoss="Focus"),5===C&&(e.ability.tricksterStatLoss="Stamina",e.currentStats.stamina-=.25*o,e.currentStats.stamina<0&&(e.currentStats.stamina=0)),6===C&&(e.ability.tricksterStatLoss="Power");var k=this.utilityService.getRandomInteger(1,6);k===C&&(k+=1)>6&&(k=1),1===k&&(e.ability.tricksterStatGain="Acceleration"),2===k&&(e.ability.tricksterStatGain="Max Speed"),3===k&&(e.ability.tricksterStatGain="Adaptability"),4===k&&(e.ability.tricksterStatGain="Focus"),5===k&&(e.ability.tricksterStatGain="Stamina",e.currentStats.stamina+=.5*o,e.currentStats.stamina>o&&(e.currentStats.stamina=o)),6===k&&(e.ability.tricksterStatGain="Power"),e.ability.remainingLength=this.lookupService.GetAbilityEffectiveAmount(e,r.terrain.powerModifier,a)}}checkForNineTailsBuff(e,i,r,a,o,s,l,c){if(!e.checkedForNineTails){e.checkedForNineTails=!0;var u=this.utilityService.getRandomInteger(1,4),d=new Y;d.value=l,1===u?(i.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Acceleration)"),s.raceUpdates.push(d)):2===u?(i.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Max Speed)"),s.raceUpdates.push(d)):3===u?(i.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Adaptability)"),s.raceUpdates.push(d)):4===u&&(i.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(r,a.terrain.powerModifier,o)]),d.text=r.getAbilityUseUpdateText(c," (Focus)"),s.raceUpdates.push(d)),this.globalService.increaseAbilityXp(r)}}checkForGrazeBuff(e,i,r,a,o,s,l){var c=this.utilityService.getRandomInteger(1,5),u=new Y;u.value=s,1===c?(e.push(["Acceleration",this.lookupService.GetAbilityEffectiveAmount(i,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Acceleration)"),o.raceUpdates.push(u)):2===c?(e.push(["Max Speed",this.lookupService.GetAbilityEffectiveAmount(i,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Max Speed)"),o.raceUpdates.push(u)):3===c?(e.push(["Adaptability",this.lookupService.GetAbilityEffectiveAmount(i,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Adaptability)"),o.raceUpdates.push(u)):4===c?(e.push(["Focus",this.lookupService.GetAbilityEffectiveAmount(i,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Focus)"),o.raceUpdates.push(u)):4===c&&(e.push(["Power",this.lookupService.GetAbilityEffectiveAmount(i,r.terrain.powerModifier,a)]),u.text=i.getAbilityUseUpdateText(l," (Power)"),o.raceUpdates.push(u)),this.globalService.increaseAbilityXp(i)}getNineTailsBuffCount(e,i){return i.filter(r=>r[0]===e).length}getGrazeBuffCount(e,i){return i.filter(r=>r[0]===e).length}getModifiedAdaptability(e,i,r,a,o,s,l,c,u,d,v,m,b){var y=e.currentStats.adaptabilityMs*r;return e.type===L.Dolphin&&"Echolocation"===e.ability.name&&e.ability.abilityInUse&&(y*=1.75),e.type===L.Goat&&"Sure-footed"===e.ability.name&&(y*=i.permanentAdaptabilityIncreaseMultiplier),e.type===L.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(y*=1.4),e.type===L.Penguin&&"Careful Toboggan"===e.ability.name&&e.ability.abilityInUse&&(y*=1.6),e.type===L.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(y*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Adaptability"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(y*=1.5),e.type===L.Fox&&"Nine Tails"===e.ability.name&&(y*=1+.15*this.getNineTailsBuffCount("Adaptability",a)),e.type===L.Warthog&&"Graze"===e.ability.name&&(y*=1+.1*this.getGrazeBuffCount("Adaptability",o)),null!==c&&void 0!==u&&"Navigator"===c.ability.name&&c.type===L.Dolphin&&s.distance-l<=this.lookupService.GetAbilityEffectiveAmount(c,u.terrain.powerModifier,r)&&(y+=.25*c.currentStats.adaptabilityMs,c.ability.abilityInUse||d.addRaceUpdate(v,m+" is shown the way by "+b+"'s "+(null==c?void 0:c.ability.name)+" ability."),c.ability.abilityInUse=!0),e.getEquippedItemName()===this.globalService.getEquipmentName(it.athleticTape)&&e.raceVariables.isBursting&&(y*=1.5),e.talentTree.talentTreeType===yt.sprint&&!e.raceVariables.hasLostFocusDuringRace&&(y*=1+5*e.talentTree.column1Row2Points/100),y}getModifiedFocus(e,i,r,a,o){var s=e.currentStats.focusMs*i;return e.type===L.Hare&&"Awareness"===e.ability.name&&e.ability.abilityInUse&&(s*=1.4),e.type===L.Hare&&"Nap"===e.ability.name&&(s*=2),e.type===L.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatLoss&&e.ability.abilityInUse&&(s*=.75),e.type===L.Fox&&"Trickster"===e.ability.name&&"Focus"===e.ability.tricksterStatGain&&e.ability.abilityInUse&&(s*=1.5),e.type===L.Fox&&"Nine Tails"===e.ability.name&&(s*=1+.15*this.getNineTailsBuffCount("Focus",r)),e.type===L.Warthog&&"Graze"===e.ability.name&&(s*=1+.1*this.getGrazeBuffCount("Focus",a)),e.type===L.Salamander&&"Cold Blooded"===e.ability.name&&e.ability.abilityInUse&&(s*=1+o.coldBloodedIncreaseMultiplier),e.type===L.Whale&&"Whalesong"===e.ability.name&&(4===e.ability.totalUseCount||e.ability.totalUseCount>5)&&e.ability.abilityInUse&&(s*=1.3),e.getEquippedItemName()===this.globalService.getEquipmentName(it.athleticTape)&&e.raceVariables.isBursting&&(s*=1.5),e.talentTree.talentTreeType===yt.sprint&&(s*=1-.005*e.talentTree.column2Row4Points*e.raceVariables.velocityReachesMaxSpeedCount),s}handleTundraDrift(e,i,r,a,o,s,l,c,u,d,v,m,b){var y=!1;if(!i.checkedForDrift){i.checkedForDrift=!0;var C=80,k=-80;if((i.routeDesign===Ke.Cavern||r.routeDesign===Ke.Cavern)&&(C=60,k=-60),e.raceVariables.icyCurrentYAmount>=C||e.raceVariables.icyCurrentYAmount<=k||a)return(e.raceVariables.icyCurrentYAmount>=C||e.raceVariables.icyCurrentYAmount<=k)&&(y=!0),i.driftAmount=-e.raceVariables.icyCurrentYAmount,e.raceVariables.icyCurrentYAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,y;var w=this.utilityService.getRandomNumber(1,100),R=1e3,q=i.frequencyOfDrift/(R+=o*s.adaptabilityModifier)*i.length;if(w<q){i.didAnimalStumble=!0,(q-=w)<=0&&(q=0);var j=this.utilityService.getRandomInteger(1,2);e.raceVariables.icyCurrentDirectionUp=1===j;var ye=100,ue=20,ce=this.globalService.globalVar.modifiers.find(_e=>"maxDriftAmountModifier"===_e.text);void 0!==ce&&(ue=ce.value),"Wild Toboggan"===e.ability.name&&e.type===L.Penguin&&(ue*=2,ye*=2,e.ability.abilityInUse=!0),"Quick Toboggan"===e.ability.name&&e.type===L.Penguin&&(e.ability.abilityInUse=!1);var ve=0;(ve=q>ye?ue:q/ye*ue)>ue&&(ve=ue),e.raceVariables.icyCurrentDirectionUp?e.raceVariables.icyCurrentYAmount-=ve:e.raceVariables.icyCurrentYAmount+=ve,e.raceVariables.icyCurrentYAmount>=C&&(e.raceVariables.icyCurrentYAmount=C),e.raceVariables.icyCurrentYAmount<=k&&(e.raceVariables.icyCurrentYAmount=k),v.addRaceUpdate(b,m+" drifts to the side, losing "+ve.toFixed(2)+"% max speed."),i.driftAmount=e.raceVariables.icyCurrentDirectionUp?-ve:ve,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount}else i.driftAmount=0,i.totalTundraYAmount=e.raceVariables.icyCurrentYAmount,"Quick Toboggan"===e.ability.name&&e.type===L.Penguin&&(v.addRaceUpdate(b,m+" slides through without drifting, gaining speed."),this.globalService.increaseAbilityXp(e),d.permanentMaxSpeedIncreaseMultiplier+=this.lookupService.GetAbilityEffectiveAmount(e,s.powerModifier,u)/100,e.ability.abilityInUse=!0);return y}}handleLavaFall(e,i,r,a,o,s,l,c){for(var u=!1,d=i/this.frameModifier,v=o/r,m=[.4,.45,.5,.55,.6],b=[],y=0;y<m.length;y++){var C=v*m[y],k=d/C;k>1&&(k=1),b.push(Math.round(1e5*k)/1e5);var w=a>m[y]*o,R=w!=c[y];c[y]=w,d>=C&&R&&(e.type===L.Salamander&&"Burrow"===e.ability.name&&e.ability.abilityInUse||(s.addRaceUpdate(l,"Lava spills out onto the course, forcing you to evacuate."),u=!0))}return this.selectedRace.raceUI.lavaFallPercentByFrame.push(b),u}handleRacePositionByFrame(e,i,r,a){var o=this.lookupService.getTotalRacersByRace(e),s=o,l=.25,c=this.globalService.globalVar.modifiers.find(R=>"trainingTrackPaceModifier"===R.text);if(void 0!==c&&(l=c.value),e.localRaceType===Ut.Track)for(var u=0;u<o-1;u++)a>e.length/(this.timeToComplete/(1+l*u))*(r/this.frameModifier)&&(s=o-(u+1));else{var m=i*(r/this.frameModifier),b=0;if(this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(m+=b=i*(this.globalService.globalVar.eventRaceData.grandPrixTimeLength+this.globalService.globalVar.eventRaceData.bonusTime-this.globalService.getRemainingEventRaceTime())),2===o)a>m&&(s=1);else if(3===o){a>m&&(s=2);var C=.75,k=this.globalService.globalVar.modifiers.find(R=>"moneyMarkPaceModifier"===R.text);null!=k&&(C=k.value),a>e.length/(this.timeToComplete*C)*(r/this.frameModifier)+b&&(s=1)}}e.raceUI.racePositionByFrame.push(s)}carryOverEventRaceSegmentData(e,i,r,a,o,s,l,c,u,d,v,m,b,y,C,k){var w=new cf;return w.velocity=i,w.stamina=e.currentStats.stamina,w.permanentMaxSpeedIncreaseMultiplier=r,w.permanentAdaptabilityIncreaseMultiplier=a,w.permanentMaxSpeedIncreaseObjMultiplier=o,w.feedingFrenzyIncreaseMultiplier=s,w.greatMigrationAccelerationIncreaseAdditive=l,w.coldBloodedIncreaseMultiplier=c,w.fleetingSpeedIncreaseMultiplier=u,w.racingAnimalType=e.type,w.deepBreathingStaminaGain=m,w.longDistanceTalentIncreaseAccelerationWithLowVelocity=b,w.maxSpeedFloor=y,w.whalePowerStored=C,w.pathsClearedWithoutLosingFocus=k,d.length>0&&d.forEach(R=>{w.nineTailsBuffs.push(R)}),v.length>0&&v.forEach(R=>{w.grazeBuffs.push(R)}),e.raceVariables.relayEffects.length>0&&e.raceVariables.relayEffects.forEach(R=>{w.relayEffects.push(R)}),this.globalService.globalVar.eventRaceData.animalData.forEach(R=>{R.associatedAnimalType===e.type&&(w.statLossFromExhaustion=R.exhaustionStatReduction)}),w.raceVariables=e.raceVariables.makeCopy(),w}setStaminaLossForEventAnimal(e,i){this.globalService.globalVar.eventRaceData.animalData.forEach(r=>{r.associatedAnimalType===i&&(r.exhaustionStatReduction=e,e<this.globalService.globalVar.relayEnergyFloor/100&&(this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay=!0))})}}return t.\u0275fac=function(e){return new(e||t)(Ue(Et),Ue(bi),Ue(kn),Ue(Jm))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let s0=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.utilityService=r,this.gameVersions=[1.12,1.11,1.1,1.09,1.08,1.07,1.06,1.05,1.04,1.03,1.02,1.01,1]}getListAscended(){var e=[];return this.gameVersions.forEach(i=>{e.unshift(i)}),e}getLatestChanges(){return this.getVersionChanges(this.gameVersions[0])}getAllChanges(){var e=[];return this.gameVersions.forEach(i=>{e.push(this.getVersionChanges(i))}),e}getVersionChanges(e){var i="";return 1===e&&(i="Initial Launch!"),1.01===e&&(i="Improved UI by adding better notifications and refactoring some clickable text.\n\nBreeding Grounds specialization now grants a 10% bonus to Breeding XP from Training, up from 5%.\n\nRefactored Breed Progression:\n<ul><li>Breed Levels now grant a 5% bonus to racing stats as opposed to 2%. Breed Levels now require twice as much XP.</li><li>Animals have had their breed levels reduced by half to balance this change. Despite this, you should notice a small increase in stats.</li></ul>"),1.02===e&&(i="Event Races now active!\n<ul><li>Select an event deck (now relay team) and run the marathon-style Grand Prix.</li><li>Run a single race over the course of multiple days to unlock new rewards.</li><li>Mix and match powerful Relay abilities with strong long distance racers and see how far you can go!</li></ul>\nMore UI improvements. (better contrast in colors, differentiation of text through various means, etc)\n\nBug fixes."),1.03===e&&(i="Talents are now active!\n<ul><li>Complete Rainbow Races to start earning Talent Points for your animals.</li><li>Each animal can select a unique talent tree and start racing in its own unique way.</li></ul>\nMore UI improvements. (specifically around items/equipment)\n\nBug fixes."),1.04===e&&(i="Ability rebalancing (view Discord Change Log for full info).\n\nChanges to Event Races<ul><li>Leg length adjusts based on your game progress so that the race always feels smooth.</li><li>Certain abilities have different effects during events, viewable when changing abilities.</li><li>Abilities that can trigger multiple times or have a cap are now displayed on the Event Race Info page.</li></ul>\nBug fixes (view Discord Change Log for full info)."),1.05===e&&(i="Changed all references of 'Decks' to 'Relay Teams' for ease of understanding and better theming.\n\nBug fixes and UI improvements (view Discord Change Log for full info)."),1.06===e&&(i="Barns can now reset their specialization. By clicking or tapping your Barn Upgrade level, you'll see an overview of your barn's benefits and the option to reset your specialization at the cost of losing 20% of your Barn Upgrade level.\n\nCost for Mangoes now scale. 1 Mango from the shop costs an extra 50 per purchase and 2 Mangoes from the event shop costs an extra 1 token per purchase.\n\nThe impact that Renown has on coin gain from race is now logarithmic. After reaching 50 renown, the coin gain will start to slightly fall off. \n\nAttractions now give slightly more Coins per specialization level.\n\nAdded setting to automatically start the event race when the time period begins. This will also catch up on any time you were away between the start of the race and when you first return to the game.\n\nGrand Prix now requires breed level 25 instead of 50.\n\nIncubator now takes 2 minutes instead of 5 minutes.\n\nUI Improvements and Bug Fixes (view Discord Change Log for full info)."),1.07===e&&(i="Sectioned out FAQs, added calculators to make planning easier.\n\nVarious minor bug fixes and UI improvements."),1.08===e&&(i="Increased coin gain from Mono and Duo races. \n\nAdjusted free races so that new course types do not show up until you've completed a circuit rank with that type. \n\nAdded circuit rank up reward for 1000 coins at rank 9 and 1500 coins at rank 23.<ul><li>Those who have already passed these ranks will immediately receive these coins.</li></ul>\nMade Acceleration coaching slightly easier. \n\nAdded warning before first Breed to better explain what will happen.\n\nMinor UI improvements for mobile."),1.09===e&&(i="<em>Just to preface, this is the first set of changes of several intended to make the early game flow better, coin gain and progression feel less punishing, and doing a better job of putting players in the intended gameplay loops. Look forward to more changes soon.</em>\n\nMade changes to verbiage in Tutorial and FAQ section for clarity and better guiding on how to play. \n\nReadjusted certain trainings so that there was clear progression going up from small to medium barns.<ul><li><b>Footwork</b> now gives .25 Acceleration as opposed to .5 Acceleration.</li><li><b>Dodge Ball</b> now gives 1 Adaptability as opposed to .5 Adaptability and takes 60 seconds to complete as opposed to 75 seconds.</li></ul>Some adjustments were made to passive game time while the game is not active.<ul><li>Small barns now allow for 4 hours worth of training, up from 2 hours.</li><li>Medium barns now allow for 8 hours worth of training, up from 4 hours.</li><li>Large barns now allow for 12 hours worth of training, up from 8 hours.</li><li>Team Managers will now cover 8 hours of inactive time worth of free races, up from 2 hours.</li></ul>The base price for food has been reduced.<ul><li>All stat increasing food has been reduced to 10 Coins. The goal for these items is to give you a quick boost after breeding to cut down on wait time. This new price should make that a more viable option.</li><li>The base price for Mangoes has been reduced to 100 Coins. For those who have already purchased Mangoes and the price has begun to increase, your total cost will be reduced by 400 Coins to match up with this change.</li></ul>Attractions now provide significantly more income. The new formula is 20 Coins * Specialization Level added on top of the previous amount. Check the calculator in the FAQ section to see exactly how much it provides at any given level.\n\nFor the first 10 barn upgrade levels, the cost is now 50 coins instead of 100.\n\nCertain RNG elements were not evenly distributed (Coaching for example) and that issue has been resolved. \n\nThere have been bugs, balance issues, and some concerns about reward scaling with the Grand Prix. I have taken the Grand Prix down for now while I work on these issues. Look forward to it coming back up in a better state in the next couple of weeks.\n\nAdditional minor bug fixes."),1.1===e&&(i="Two new animals have been added to the game!<ul><li>The <span class='flatlandColor'>Warthog</span> is a new Flatland racer that you can purchase from the Shop.</li><li>The <span class='waterColor'>Whale</span> is a new Ocean racer that is rewarded for reaching Circuit Rank B (25).</li></ul>The <span class='flatlandColor'>Hare</span> is now rewarded for reaching Circuit Rank Q (10). It is no longer listed in the Shop and anyone who has already purchased it will receive 1000 Coins immediately.\n\nBuried Treasure (<span class='waterColor'>Octopus</span>) and Cold Blooded (<span class='volcanicColor'>Salamander</span>) have both been reworked.\n\nMany Circuit Rank rewards were moved around to make the early game flow better. Of note, the Dolphin is now a reward at Circuit Rank L (15) so that you have more time with only two race course types.\n\nCertain items in the shop have been locked behind reaching Circuit Rank AZ (27) before they appear to better guide new players to aim for items better suited for early game.\n\nBy default, free races now give 1 medal per 50 free race victories.\n\nEarly game circuit races and free races in general are now easier.\n\nAfter the Attraction change last patch, upgrading barns became a bit too easy at higher levels. Coin cost per upgrade level for barns has been adjusted higher starting at level 100 to keep the time between upgrades balanced.\n\nAdded option to 'Export to File'/'Import from File' to make saving and loading easier.\n\nRemoved 'Stats' navigation page. It was really bare bones and just added more to the length of the navigation bar. I will eventually re-implement this in a better fashion.\n\nVarious bug fixes and UI improvements."),1.11===e&&(i="The Grand Prix has returned!<ul><li>New items have been added as rewards up to the 1 million meter mark for the first rank of the Grand Prix.</li><li>There were some minor adjustments to Token cost of items from the Token shop.</li><li>You can now set the desired energy level of your animals before they relay.</li><li>Bug fixes related to Grand Prix.</li></ul>A new item has been added to the shop (Gingko Leaves) that allow you to reset your Breed level and incubator upgrades back to their default levels. In return, you gain 1000% Breed XP until you get back to the Breed Level you were originally at. This will allow those who felt like they want to redo their incubator upgrades to be able to do so quickly.\n\nPutting an animal in the incubator now pauses their current training instead of cancelling it.\n\nVarious bug fixes and UI improvements."),i}getDateForVersion(e){var i=new Date;return 1===e&&(i=new Date("2022-07-08 12:00:00")),1.01===e&&(i=new Date("2022-07-10 12:00:00")),1.02===e&&(i=new Date("2022-07-18 12:00:00")),1.03===e&&(i=new Date("2022-07-24 12:00:00")),1.04===e&&(i=new Date("2022-07-27 12:00:00")),1.05===e&&(i=new Date("2022-07-29 12:00:00")),1.06===e&&(i=new Date("2022-08-04 12:00:00")),1.07===e&&(i=new Date("2022-08-06 12:00:00")),1.08===e&&(i=new Date("2022-08-07 12:00:00")),1.09===e&&(i=new Date("2022-08-11 12:00:00")),1.1===e&&(i=new Date("2022-08-16 12:00:00")),1.11===e&&(i=new Date("2022-08-21 12:00:00")),i.toDateString().replace(/^\S+\s/,"")}updatePlayerVersion(){var c=1.05;this.getListAscended().forEach(b=>{var y;if(this.globalService.globalVar.currentVersion<b){if(1.01===b){this.globalService.globalVar.notifications=new vf;var C=this.globalService.globalVar.modifiers.find(de=>"breedLevelStatModifier"===de.text);void 0!==C&&(C.value=.05);var k=this.globalService.globalVar.modifiers.find(de=>"breedGaugeMaxIncreaseModifier"===de.text);void 0!==k&&(k.value=10);var w=this.globalService.globalVar.modifiers.find(de=>"breedingGroundsSpecializationModifier"===de.text);void 0!==w&&(w.value=.1),this.globalService.globalVar.animals.forEach(de=>{de.breedLevel=Math.round(de.breedLevel/2),de.breedGaugeXp=2*de.breedGaugeXp});var R=this.globalService.globalVar.animalDecks.find(de=>de.isPrimaryDeck);null!=R&&(R.isEventDeck=!0)}else if(1.02===b){if(this.globalService.globalVar.eventRaceData=new Nn,this.globalService.globalVar.modifiers.push(new Y(.1,"exhaustionStatLossMinimumModifier")),this.globalService.globalVar.modifiers.push(new Y(5e6,"metersPerCoinsGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Y(2e7,"metersPerRenownGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Y(100,"grandPrixCoinRewardModifier")),this.globalService.globalVar.modifiers.push(new Y(5,"grandPrixRenownRewardModifier")),this.globalService.globalVar.modifiers.push(new Y(5e7,"grandPrixToken1MeterModifier")),this.globalService.globalVar.modifiers.push(new Y(1e8,"grandPrixToken2MeterModifier")),this.globalService.globalVar.modifiers.push(new Y(25e7,"grandPrixToken3MeterModifier")),this.globalService.globalVar.modifiers.push(new Y(5e8,"grandPrixToken4MeterModifier")),this.globalService.globalVar.modifiers.push(new Y(300,"exhaustionGainTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Y(.02,"exhaustionGainGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Y(7200,"weatherClusterTimerCapGrandPrixModifier")),this.globalService.globalVar.modifiers.push(new Y(75,"grandPrixBreedLevelRequiredModifier")),this.globalService.globalVar.modifiers.push(new Y(2,"scaryMaskEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Y(1.2,"runningShoesEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Y(.9,"incenseEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Y(.5,"athleticTapeEquipmentModifier")),this.globalService.globalVar.modifiers.push(new Y(.2,"weatherMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new Y(.03,"focusMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new Y(.01,"stumbleMoraleLossModifier")),this.globalService.globalVar.modifiers.push(new Y(.05,"segmentCompleteMoraleBoostModifier")),this.globalService.globalVar.modifiers.push(new Y(5,"whistleModifier")),this.globalService.globalVar.modifiers.push(new Y(10,"goldenWhistleModifier")),this.globalService.InitializeTokenShop(),null!=(z=this.globalService.globalVar.shop.find(de=>"Specialty"===de.name))){var q=new tt;q.name="Whistle",q.purchasePrice.push(this.globalService.getCoinsResourceValue(2500)),q.basePurchasePrice.push(this.globalService.getCoinsResourceValue(2500)),q.totalShopQuantity=1,q.canHaveMultiples=!1,q.isAvailable=this.lookupService.isItemUnlocked("coaching"),q.type=G.Specialty,z.itemList.push(q);var j=new tt;j.name="Golden Whistle",j.purchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),j.basePurchasePrice.push(this.globalService.getCoinsResourceValue(15e3)),j.totalShopQuantity=1,j.canHaveMultiples=!1,j.isAvailable=!1,j.type=G.Specialty,z.itemList.push(j)}this.globalService.globalVar.animals.forEach(de=>{de.allTrainingTracks.noviceTrack.rewards.filter(be=>"Bonus Breed XP Gain From Local Races"===be.name).forEach(be=>{be.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(de=>{de.allTrainingTracks.intermediateTrack.rewards.filter(be=>"Bonus Breed XP Gain From Local Races"===be.name).forEach(be=>{be.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(de=>{de.allTrainingTracks.masterTrack.rewards.filter(be=>"Bonus Breed XP Gain From Local Races"===be.name).forEach(be=>{be.name="Bonus Breed XP Gain From Free Races"})}),this.globalService.globalVar.animals.forEach(de=>{de.breedGaugeMax=200+10*(de.breedLevel-1)})}else if(1.03===b)this.globalService.globalVar.animals.forEach(de=>{(isNaN(Number(de.breedLevel))||null==de.breedLevel)&&(de.breedLevel=1)});else if(1.04===b)this.fixTrackRewardsBug(),this.globalService.globalVar.notifications.isEventRaceNowActive=!1,this.globalService.globalVar.animals.forEach(de=>{if(de.type===L.Cheetah){var be=de.availableAbilities.find(pi=>"Giving Chase"===pi.name);void 0!==be&&(be.efficiency=.5),"Giving Chase"===de.ability.name&&(de.ability.efficiency=.5);var wi=de.availableAbilities.find(pi=>"On The Hunt"===pi.name);void 0!==wi&&(wi.efficiency=.1),"On The Hunt"===de.ability.name&&(de.ability.efficiency=.1)}if(de.type===L.Goat){var kr=de.availableAbilities.find(pi=>"Deep Breathing"===pi.name);void 0!==kr&&(kr.efficiency=.25),"Deep Breathing"===de.ability.name&&(de.ability.efficiency=.25);var no=de.availableAbilities.find(pi=>"In The Rhythm"===pi.name);void 0!==no&&(no.efficiency=.1),"In The Rhythm"===de.ability.name&&(de.ability.efficiency=.1);var ro=de.availableAbilities.find(pi=>"Sure-footed"===pi.name);void 0!==ro&&(ro.efficiency=.5),"Sure-footed"===de.ability.name&&(de.ability.efficiency=.5)}if(de.type===L.Gecko){var Do=de.availableAbilities.find(pi=>"Night Vision"===pi.name);void 0!==Do&&(Do.efficiency=.2),"Night Vision"===de.ability.name&&(de.ability.efficiency=.2)}if(de.type===L.Shark){var Ea=de.availableAbilities.find(pi=>"Blood In The Water"===pi.name);void 0!==Ea&&(Ea.efficiency=.1),"Blood In The Water"===de.ability.name&&(de.ability.efficiency=.1)}if(de.type===L.Octopus){var br=de.availableAbilities.find(pi=>"Buried Treasure"===pi.name);void 0!==br&&(br.efficiency=1),"Buried Treasure"===de.ability.name&&(de.ability.efficiency=1);var Ia=de.availableAbilities.find(pi=>"Big Brain"===pi.name);void 0!==Ia&&(Ia.efficiency=2),"Big Brain"===de.ability.name&&(de.ability.efficiency=2)}if(de.type===L.Penguin){var Va=de.availableAbilities.find(pi=>"Wild Toboggan"===pi.name);void 0!==Va&&(Va.efficiency=4),"Wild Toboggan"===de.ability.name&&(de.ability.efficiency=4);var Ro=de.availableAbilities.find(pi=>"Quick Toboggan"===pi.name);void 0!==Ro&&(Ro.efficiency=.1),"Quick Toboggan"===de.ability.name&&(de.ability.efficiency=.1)}if(de.type===L.Caribou){var xo=de.availableAbilities.find(pi=>"Herd Mentality"===pi.name);void 0!==xo&&(xo.efficiency=.5),"Herd Mentality"===de.ability.name&&(de.ability.efficiency=.5);var Mo=de.availableAbilities.find(pi=>"Special Delivery"===pi.name);void 0!==Mo&&(Mo.efficiency=.05),"Special Delivery"===de.ability.name&&(de.ability.efficiency=.05)}if(de.type===L.Fox){var ko=de.availableAbilities.find(pi=>"Fleeting Speed"===pi.name);void 0!==ko&&(ko.efficiency=1.5),"Fleeting Speed"===de.ability.name&&(de.ability.efficiency=1.5)}}),void 0!==(ye=this.globalService.globalVar.modifiers.find(de=>"autoFreeRacesMaxIdleTimePeriodModifier"===de.text))&&(ye.value=7200);else if(1.05===b)null!=this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.isCatchingUp&&(this.globalService.globalVar.eventRaceData.isCatchingUp=!1),void 0!==(ue=this.globalService.globalVar.modifiers.find(de=>"grandPrixBreedLevelRequiredModifier"===de.text))&&(ue.value=50);else if(1.06===b){this.globalService.globalVar.previousEventRewards=[],this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(be=>"Bonus Breed XP Gain From Training"!==be.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(be=>"Bonus Breed XP Gain From Free Races"!==be.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(be=>"Diminishing Returns per Facility Level"!==be.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(be=>"Training Time Reduction"!==be.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(be=>"Bonus Breed XP Gain From Circuit Races"!==be.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(be=>"Bonus Talents"!==be.name),this.globalService.globalVar.resources=this.globalService.globalVar.resources.filter(be=>"Orb Pendant"!==be.name),this.fixTrackRewardsBug(),this.globalService.globalVar.modifiers.push(new Y(.02,"burstMoraleBoostModifier"));var ue,ce=this.globalService.globalVar.modifiers.find(be=>"grandPrixRenownRewardModifier"===be.text);void 0!==ce&&(ce.value=3),void 0!==(ue=this.globalService.globalVar.modifiers.find(be=>"grandPrixBreedLevelRequiredModifier"===be.text))&&(ue.value=25),void 0!==this.globalService.globalVar.incubator&&(this.globalService.globalVar.incubator.timeToComplete=120),this.globalService.globalVar.settings.set("autoStartEventRace",!1)}else if(1.07===b){var ve=0,_e=0;if(this.globalService.globalVar.resources.forEach(de=>{"Headband"===de.name&&(ve+=1,_e+=de.amount)}),ve>1){var Ie=this.globalService.globalVar.resources.findIndex(de=>"Headband"===de.name);this.globalService.globalVar.resources.splice(Ie,1),void 0!==(st=this.globalService.globalVar.resources.find(de=>"Headband"===de.name))&&(st.amount=_e)}var st,mt=0,ct=0;if(this.globalService.globalVar.resources.forEach(de=>{"Blue Baton"===de.name&&(mt+=1,ct+=de.amount)}),mt>1)Ie=this.globalService.globalVar.resources.findIndex(wi=>"Blue Baton"===wi.name),this.globalService.globalVar.resources.splice(Ie,1),void 0!==(st=this.globalService.globalVar.resources.find(wi=>"Blue Baton"===wi.name))&&(st.amount=ct)}else if(1.08===b){if(this.globalService.globalVar.showBreedWarning=!1,void 0===this.globalService.globalVar.tutorials&&(this.globalService.globalVar.tutorials=new gf),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>9){var bt=1e3;null==(wt=this.globalService.globalVar.resources.find(de=>"Coins"===de.name))?this.globalService.globalVar.resources.push(new ie("Coins",bt)):wt.amount+=bt}this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>23&&(bt=1500,null==(wt=this.globalService.globalVar.resources.find(wi=>"Coins"===wi.name))?this.globalService.globalVar.resources.push(new ie("Coins",bt)):wt.amount+=bt)}else if(1.09===b){var ye;void 0!==(ye=this.globalService.globalVar.modifiers.find(be=>"autoFreeRacesMaxIdleTimePeriodModifier"===be.text))&&(ye.value=28800);var pt=this.globalService.globalVar.modifiers.find(be=>"smallBarnTrainingTimeModifier"===be.text);void 0!==pt&&(pt.value=14400);var J=this.globalService.globalVar.modifiers.find(be=>"mediumBarnTrainingTimeModifier"===be.text);void 0!==J&&(J.value=28800);var T=this.globalService.globalVar.modifiers.find(be=>"largeBarnTrainingTimeModifier"===be.text);void 0!==T&&(T.value=43200);var Ze=this.globalService.globalVar.trainingOptions.find(be=>be.trainingType===Fe.Footwork);void 0!==Ze&&(Ze.affectedStatRatios=new Ve(0,.25,0,0,0,1));var _i=this.globalService.globalVar.trainingOptions.find(be=>be.trainingType===Fe.DodgeBall);void 0!==_i&&(_i.affectedStatRatios=new Ve(0,2.5,0,0,0,1),_i.timeToComplete=60);var Rt=this.globalService.globalVar.shop.find(be=>"Food"===be.name);if(void 0!==Rt){var Xe=Rt.itemList.find(be=>"Apples"===be.name);void 0!==Xe&&(Xe.purchasePrice=[],Xe.purchasePrice.push(new ie("Coins",10)));var Ht=Rt.itemList.find(be=>"Bananas"===be.name);void 0!==Ht&&(Ht.purchasePrice=[],Ht.purchasePrice.push(new ie("Coins",10)));var ui=Rt.itemList.find(be=>"Strawberries"===be.name);void 0!==ui&&(ui.purchasePrice=[],ui.purchasePrice.push(new ie("Coins",10)));var ht=Rt.itemList.find(be=>"Carrots"===be.name);void 0!==ht&&(ht.purchasePrice=[],ht.purchasePrice.push(new ie("Coins",10)));var Gi=Rt.itemList.find(be=>"Turnips"===be.name);void 0!==Gi&&(Gi.purchasePrice=[],Gi.purchasePrice.push(new ie("Coins",10)));var qi=Rt.itemList.find(be=>"Oranges"===be.name);void 0!==qi&&(qi.purchasePrice=[],qi.purchasePrice.push(new ie("Coins",10)));var yi=Rt.itemList.find(be=>"Mangoes"===be.name);if(void 0!==yi){var mn=yi.purchasePrice.find(be=>"Coins"===be.name);void 0!==mn&&(mn.amount-=400)}var xi=this.globalService.globalVar.modifiers.find(be=>"attractionAmountModifier"===be.text);void 0!==xi&&(xi.value=20),this.globalService.stopGrandPrixRace()}}else if(1.1===b){this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)<26?this.globalService.lockTier2ShopItems():this.globalService.unlockTier2ShopItems(),this.globalService.globalVar.modifiers.push(new Y(.3*1.025,"warthogDefaultMaxSpeedModifier")),this.globalService.globalVar.modifiers.push(new Y(.1,"warthogDefaultAccelerationModifier")),this.globalService.globalVar.modifiers.push(new Y(5*c,"warthogDefaultStaminaModifier")),this.globalService.globalVar.modifiers.push(new Y(1.025,"warthogDefaultPowerModifier")),this.globalService.globalVar.modifiers.push(new Y(4.875,"warthogDefaultFocusModifier")),this.globalService.globalVar.modifiers.push(new Y(4.75,"warthogDefaultAdaptabilityModifier")),this.globalService.globalVar.modifiers.push(new Y(.27,"whaleDefaultMaxSpeedModifier")),this.globalService.globalVar.modifiers.push(new Y(.1,"whaleDefaultAccelerationModifier")),this.globalService.globalVar.modifiers.push(new Y(5*c,"whaleDefaultStaminaModifier")),this.globalService.globalVar.modifiers.push(new Y(1*c,"whaleDefaultPowerModifier")),this.globalService.globalVar.modifiers.push(new Y(5.5,"whaleDefaultFocusModifier")),this.globalService.globalVar.modifiers.push(new Y(4.75,"whaleDefaultAdaptabilityModifier"));var zi=new MD;zi.name="Warthog",this.globalService.calculateAnimalRacingStats(zi);var ji=new kD;ji.name="Whale",this.globalService.calculateAnimalRacingStats(ji),this.globalService.globalVar.animals.push(zi),this.globalService.globalVar.animals.push(ji),this.globalService.sortAnimalOrder();var ni,wt,Vi=this.globalService.globalVar.shop.find(be=>"Abilities"===be.name);if(zi.availableAbilities.forEach(be=>{if(!be.isAbilityPurchased){var wi=new tt;wi.name=zi.getAnimalType()+" Ability: "+be.name,wi.purchasePrice.push(new ie("Coins",be.purchasePrice)),wi.canHaveMultiples=!1,wi.type=G.Ability,wi.additionalIdentifier=be.name,wi.isAvailable=zi.isAvailable,null==Vi||Vi.itemList.push(wi)}}),ji.availableAbilities.forEach(be=>{if(!be.isAbilityPurchased){var wi=new tt;wi.name=ji.getAnimalType()+" Ability: "+be.name,wi.purchasePrice.push(new ie("Coins",be.purchasePrice)),wi.canHaveMultiples=!1,wi.type=G.Ability,wi.additionalIdentifier=be.name,wi.isAvailable=ji.isAvailable,null==Vi||Vi.itemList.push(wi)}}),null!=(ni=this.globalService.globalVar.shop.find(be=>"Animals"===be.name))){var di=new tt;di.name="Warthog",di.purchasePrice.push(new ie("Coins",1e3)),di.canHaveMultiples=!1,di.type=G.Animal,ni.itemList.push(di)}if(this.globalService.globalVar.modifiers.push(new Y(50,"freeRacesToMedalModifier")),null!=(z=this.globalService.globalVar.shop.find(be=>"Specialty"===be.name))){var dt=z.itemList.find(be=>"Team Manager"===be.name);null!=dt&&(dt.totalShopQuantity=19);var gt=new tt;gt.name="Talent Point Voucher",gt.purchasePrice.push(this.globalService.getMedalResourceValue(25)),gt.basePurchasePrice.push(this.globalService.getMedalResourceValue(25)),gt.infiniteAmount=!0,gt.canHaveMultiples=!0,gt.quantityAdditive=25,gt.isAvailable=!1,this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=53&&(gt.isAvailable=!0),gt.type=G.Specialty,z.itemList.push(gt)}if(null===(y=this.globalService.globalVar.animals.find(be=>be.type===L.Hare))||void 0===y?void 0:y.isAvailable)bt=1e3,null==(wt=this.globalService.globalVar.resources.find(kr=>"Coins"===kr.name))?this.globalService.globalVar.resources.push(new ie("Coins",bt)):wt.amount+=bt;if(null!=(ni=this.globalService.globalVar.shop.find(be=>"Animals"===be.name))){var ei=ni.itemList.find(be=>"Hare"===be.name);null!=ei&&(ei.isAvailable=!1)}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=10){var Pi=this.globalService.globalVar.animals.find(be=>be.type===L.Hare);void 0!==Pi&&(Pi.isAvailable=!0,this.globalService.unlockAnimalAbilities(Pi))}if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=13&&this.globalService.globalVar.unlockables.set("barnRow2",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=14&&this.globalService.globalVar.unlockables.set("attractionSpecialization",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=25){var tn=this.globalService.globalVar.animals.find(be=>be.type===L.Whale);void 0!==tn&&(tn.isAvailable=!0,this.globalService.unlockAnimalAbilities(tn))}this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=29&&this.globalService.globalVar.unlockables.set("barnRow3",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=40&&this.globalService.globalVar.unlockables.set("barnRow4",!0),this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=58&&this.globalService.globalVar.unlockables.set("barnRow5",!0);var hi=this.globalService.globalVar.animals.find(be=>be.type===L.Octopus);if(void 0!==hi){var fi=hi.availableAbilities.find(be=>"Buried Treasure"===be.name);void 0!==fi&&(fi.efficiency=100),"Buried Treasure"===hi.ability.name&&(hi.ability.efficiency=100)}var Ei=this.globalService.globalVar.animals.find(be=>be.type===L.Salamander);if(void 0!==Ei){var nr=Ei.availableAbilities.find(be=>"Cold Blooded"===be.name);void 0!==nr&&(nr.efficiency=45),"Cold Blooded"===Ei.ability.name&&(Ei.ability.efficiency=45)}}else if(1.11===b){var z;if(void 0!==this.globalService.globalVar.eventRaceData&&null==this.globalService.globalVar.eventRaceData.currentEventEndDate&&(this.globalService.globalVar.eventRaceData=new Nn,this.globalService.globalVar.eventRaceData.initialSetupComplete=!1),null!=(z=this.globalService.globalVar.shop.find(be=>"Food"===be.name))){var Qi=new tt;Qi.name="Gingko Leaves",Qi.shortDescription="Reset Breed Level for a single animal back to 1 and remove all incubator upgrade gains. Increase Breed XP Gain by 1000% until Breed Level returns to what it was.",Qi.purchasePrice.push(new ie("Coins",3500)),Qi.canHaveMultiples=!0,Qi.type=G.Food,Qi.infiniteAmount=!0,Qi.isAvailable=!0,z.itemList.push(Qi)}var Mr=this.globalService.globalVar.modifiers.find(be=>"metersPerCoinsGrandPrixModifier"===be.text);void 0!==Mr&&(Mr.value=25e5);var rr=this.globalService.globalVar.modifiers.find(be=>"segmentCompleteMoraleBoostModifier"===be.text);void 0!==rr&&(rr.value=.1);var Pa=this.globalService.globalVar.modifiers.find(be=>"weatherMoraleBoostModifier"===be.text);void 0!==Pa&&(Pa.value=.5),this.globalService.globalVar.relayEnergyFloor=50,this.globalService.globalVar.pinnacleFloor="Z",this.globalService.globalVar.unlockables.set("thePinnacle",!1);var bn=this.globalService.globalVar.tokenShop.find(be=>"Tier 2"===be.name);if(void 0!==bn){var _n=bn.itemList.find(be=>"Coins"===be.name),Tt=bn.itemList.find(be=>"Training Breed XP Gain Certificate"===be.name),et=bn.itemList.find(be=>"Diminishing Returns Increase Certificate"===be.name);void 0!==_n&&(_n.purchasePrice=[],_n.purchasePrice.push(new ie("Tokens",1))),void 0!==Tt&&(Tt.purchasePrice=[],Tt.purchasePrice.push(new ie("Tokens",2))),void 0!==et&&(et.purchasePrice=[],et.purchasePrice.push(new ie("Tokens",4)))}}else 1.12===b&&(this.globalService.globalVar.doNotRelayBelowEnergyFloor=!1);this.globalService.globalVar.currentVersion=b}})}fixTrackRewardsBug(){this.globalService.globalVar.animals.filter(e=>e.isAvailable).forEach(e=>{var i=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromFreeRaces(),r=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromCircuitRaces(),a=e.allTrainingTracks.getTotalTrainingTrackBonusBreedXpFromTraining(),o=e.allTrainingTracks.getTotalTrainingTrackBonusDiminishingReturnsPerFacilityLevel(),s=e.allTrainingTracks.getTotalTrainingTrackBonusTrainingTimeReduction(),l=e.allTrainingTracks.getTotalTrainingTrackBonusTalents();e.miscStats.bonusBreedXpGainFromLocalRaces=0===e.miscStats.bonusLocalBreedXpCertificateCount?i:i+e.miscStats.bonusLocalBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromCircuitRaces=0===e.miscStats.bonusCircuitBreedXpCertificateCount?r:r+2*e.miscStats.bonusCircuitBreedXpCertificateCount,e.miscStats.bonusBreedXpGainFromTraining=0===e.miscStats.bonusTrainingBreedXpCertificateCount?a:a+e.miscStats.bonusTrainingBreedXpCertificateCount,e.miscStats.diminishingReturnsBonus=0===e.miscStats.bonusDiminishingReturnsCertificateCount?o:o+e.miscStats.bonusDiminishingReturnsCertificateCount,e.miscStats.trainingTimeReduction=s,e.miscStats.bonusTalents=l})}}return t.\u0275fac=function(e){return new(e||t)(Ue(Et),Ue(bi),Ue(kn))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),VD=(()=>{class t{constructor(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setProductionMode(){this.devModeActive=!1,this.forceStartNewGame=!1,this.codeCreationMode=!1}setDevMode(){this.devModeActive=!0,this.forceStartNewGame=!0,this.codeCreationMode=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ct=(()=>{return(t=Ct||(Ct={}))[t.barn=0]="barn",t[t.raceselection=1]="raceselection",t[t.animals=2]="animals",t[t.relayTeams=3]="relayTeams",t[t.shop=4]="shop",t[t.incubator=5]="incubator",t[t.trainingtrack=6]="trainingtrack",t[t.talents=7]="talents",t[t.resources=8]="resources",t[t.faqs=9]="faqs",t[t.stats=10]="stats",t[t.settings=11]="settings",Ct;var t})(),ua=(()=>{return(t=ua||(ua={}))[t.regular=0]="regular",t[t.token=1]="token",ua;var t})();let cn=(()=>{class t{constructor(){this.switchView=new sn(Ct.barn),this.selectAnimalView=new sn(new At),this.selectBarnView=new sn(0),this.selectShopView=new sn(ua.regular),this.selectRaceView=new sn(Ee.circuit)}setNewView(e){e!==this.switchView.value&&this.switchView.next(e)}getNewView(){return this.switchView.asObservable()}setAnimalView(e,i){i!==this.selectAnimalView.value&&this.selectAnimalView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setAnimal(e){e!==this.selectAnimalView.value&&this.selectAnimalView.next(e)}getAnimalView(){return this.selectAnimalView.asObservable()}setBarnView(e,i){i!==this.selectBarnView.value&&this.selectBarnView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setBarnNumber(e){e!==this.selectBarnView.value&&this.selectBarnView.next(e)}getBarnView(){return this.selectBarnView.asObservable()}setShopView(e,i){i!==this.selectShopView.value&&this.selectShopView.next(i),e!==this.switchView.value&&this.switchView.next(e)}setShopType(e){e!==this.selectShopView.value&&this.selectShopView.next(e)}getShopView(){return this.selectShopView.asObservable()}setRaceView(e,i){i!==this.selectRaceView.value&&this.selectRaceView.next(i),e!==this.switchView.value&&this.switchView.next(e)}getRaceView(){return this.selectRaceView.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class X5{}let OD=(()=>{class t{constructor(e){this.globalService=e}skipTutorial(){this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.globalVar.tutorials.currentTutorialId=10}getTutorialState(e){var i=new X5;return i.id=e,1===e&&(i.tutorialText="<b>Welcome to Cultura!</b> \n\n Cultura is the name of your soon to be state of the art animal racing facility. Train and nurture your animal companions and rise through the ranks by winning circuit competitions. Mix and match different racing teams and abilities to rise as far as you can!\n\nLet's take a tour. From this page, you can select a barn where you can assign and train animals. Currently, you have a fine racing horse already set up in your first barn. Select it and let's get to work. \n\n <b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=Ct.barn),2===e&&(i.tutorialText="You'll have to train your animals if you want them to win. There are only a few training options to choose from now, but as you grow you will find better and faster ways to improve. Each training will develop your animals in specific ways, improving the following base stats:\n\n<b>Speed</b>: Increase the max speed your animal can run in a race.\n<b>Acceleration</b>: Increase how quickly your animal gains speed.\n<b>Endurance</b>: Increase the distance your animal can run before tiring out and slowing down.\n<b>Power</b>: Increase the efficiency of your unique ability.\n<b>Focus</b>: Increase the distance your animal can run before losing focus and stopping abruptly.\n<b>Adaptability</b>: Increase the likelihood your animal won't stumble when racing through unique paths.\n\n<b>Select a training option out of the ones outlined in red.</b>",i.associatedTab=Ct.barn),3===e&&(i.tutorialText="Here you can get a breakdown on the status of your animals. Here's your horse along with all of the stat information we just went over. If you need a refresher, hover over any of the stats to see what they do. There are a few other stats here to be mindful of:\n\n<b>Diminishing Returns</b>: After a base stat reaches the Diminishing Returns value, any additional training of that stat gets progressively weaker. Typically, you want to try and keep all of your base stats around your Diminishing Returns value for best results. You'll find multiple ways to increase your Diminishing Returns value as you progress.\n<b>Burst Chance</b>: As you race, your racer may enter Burst mode. This increases their overall velocity and allows them to exceed their Max Speed. This stat is based on a combination of Focus and Adaptability and is not affected by Diminishing Returns.\n<b>Burst Distance</b>: This controls how long you stay in Burst mode. This stat is based on your Power and is not affected by Diminishing Returns.\n\nCheck back here often as you proceed to assign new abilities and items to your animals, as well as breeding them to gain even faster offspring.\n\nNow that your horse has had time to take a few practice laps, let's see if they have what it takes to win a race!\n\n<b>Select the 'Race' option on the right (or in the menu if on mobile) bordered in red.</b>",i.associatedTab=Ct.animals),4===e&&(i.tutorialText="You've got a few options here. Circuit races are all about deciding where you stand against the competition. If you win all of the circuit races for your rank, you'll move up into the next rank which may net you some nifty rewards and open up new opportunities for your facility. Improving your Circuit Rank should be your number one goal in becoming a top tier racing facility!\n\nYou can also run some free races against local competition. Only a few races are available at a time, but it can be a great way to get some practice in and make some quick money.\n\nFor now, let's see if you can make it up to the next circuit rank. It's a nice sunny day today and that might impact how your racer runs. If you hover over a race, you'll see how the terrain or weather might impact the conditions of the race. When in doubt, hovering over text usually gives you the information you need. Whenever you're ready, start the race. Your goal is to get to the finish line before your competition (represented as the little black dot). Good luck!\n\n<b>Click (or tap if you are on mobile) the race option outlined in red.</b>",i.associatedTab=Ct.raceselection),5===e&&(i.tutorialText="Way to go! Exciting stuff there. Looks like you've got the gist of it for now. Keep racing, make some money, and build up your facility to be as great as it can be. I'll check in with you again a little later. I look forward to seeing how far you can go!\n\n<b>Continue training your animals and completing Circuit Races to raise your Circuit Rank. If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",i.associatedTab=Ct.raceselection),6===e&&(i.tutorialText="Nice, you've unlocked another racer! If you jump straight into a race with your untrained monkey, things probably aren't going to go well. As you race, you'll start making enough money to build more barns and train your animals simultaneously. For now, let's go back to the barn you have.\n\n<b>Select 'Barn 1' outlined in red.</b>",i.associatedTab=Ct.raceselection),7===e&&(i.tutorialText="Let's see if we can start training your new racing Monkey. From here you can unassign an animal from a barn and bring a new animal in. As you start to branch out and race in different course types, you'll want to try and keep your team well balanced. It's not going to help you if you have a prized thoroughbred torching the competition if your follow up racer can barely make it out the gate.\n\nLet's start training your Monkey now.\n\n<b>Select 'Unassign' at the top of the screen and choose 'Monkey' to train.</b>",i.associatedTab=Ct.barn),8===e&&(i.tutorialText="Nicely done. Now you can set a training for your Monkey so it can start to get acclimated to racing. Once your Monkey has caught up to your Horse in stats, you'll be back to winning races in no time. Don't forget to train both your Horse and your Monkey, and to try to keep their stats balanced! I'll check back in with you after awhile.\n\n<b>Continue training your animals and completing Circuit Races to raise your Circuit Rank. If you are stuck or are confused about anything as you progress, check the 'FAQs' link down below on the right side of the footer.</b>",i.associatedTab=Ct.barn),9===e&&(i.tutorialText="Looks like you've won a nice racing Hare. The Hare and Horse are both Flatland animals, meaning only one of them will be able to run the Flatland portion of a race at a time. Ideally, you'll want one getting faster while the other is winning races. Let's head over to your animals and talk about Breeding.\n\n<b>Click (or tap if you are on mobile) 'Animals' on the right bordered in red and select an animal.</b>",i.associatedTab=Ct.raceselection),10===e&&(i.tutorialText="Breeding is where your speed really starts to grow. Firstly, to Breed you need a sufficient amount of Breed XP. Training and racing both contribute to this. Once you're ready, you can breed your animal to increase its Breed Level. This gives it a 5% increase to how much the base stats affect the racing stats. There's a strategic element to this. <b>After breeding, your animal will have its stats reset back to their starting points, but the amount that the base stats contribute to the racing stats will increase.</b>\n\n Because you only need 1 Flatland animal to race at any given time, you can choose one to start Breeding and another to keep racing. For best results, you should keep Breeding the same animal multiple times so that you don't need to spend too much time training. 5% may not make a huge difference at first, but 50% will. Once your racing animal can no longer keep up with the competition, swap them! The animal you were breeding will surely torch the competition and the animal you were racing can start to catch up in speed.\n\nThere's an ebb and flow to it. Race as far as your animals can go, breed them many times in quick succession to get a large percentage upgrade to stats, and then get back in the race. <b>This game is intended to be a slow burn and skews towards idle play. If you play very actively, you may find yourself needing to wait at certain points early on. Breeding once, training to max, breeding one time again, and so on is not recommended. Cycle between breeding in batches and then racing with your much higher stat modifiers.\n\nThat's all I have for you. Good luck and have fun!",i.associatedTab=Ct.animals,this.globalService.globalVar.tutorials.tutorialCompleted=!0),i}openTutorialModal(){}}return t.\u0275fac=function(e){return new(e||t)(Ue(Et))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Y5=["addListener","removeListener"],Q5=["addEventListener","removeEventListener"],K5=["on","off"];function vr(t,n,e,i){if(K(e)&&(i=e,e=void 0),i)return vr(t,n,e).pipe(Jv(i));const[r,a]=function e4(t){return K(t.addEventListener)&&K(t.removeEventListener)}(t)?Q5.map(o=>s=>t[o](n,s,e)):function Z5(t){return K(t.addListener)&&K(t.removeListener)}(t)?Y5.map(ND(t,n)):function J5(t){return K(t.on)&&K(t.off)}(t)?K5.map(ND(t,n)):[];if(!r&&nc(t))return yn(o=>vr(o,n,e))(Pn(t));if(!r)throw new TypeError("Invalid event target");return new Le(o=>{const s=(...l)=>o.next(1<l.length?l:l[0]);return r(s),()=>a(s)})}function ND(t,n){return e=>i=>t[e](n,i)}class t4 extends ge{constructor(n,e){super()}schedule(n,e=0){return this}}const bf={setInterval(...t){const{delegate:n}=bf;return((null==n?void 0:n.setInterval)||setInterval)(...t)},clearInterval(t){const{delegate:n}=bf;return((null==n?void 0:n.clearInterval)||clearInterval)(t)},delegate:void 0},FD={now:()=>(FD.delegate||Date).now(),delegate:void 0};class Du{constructor(n,e=Du.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}}Du.now=FD.now;const BD=new class n4 extends Du{constructor(n,e=Du.now){super(n,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let i;this._active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}(class i4 extends t4{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(n,e,i=0){return bf.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;bf.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(a){i=!0,r=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,oe(i,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}}),r4=BD;function l0(t=0,n,e=r4){let i=-1;return null!=n&&(ob(n)?e=n:i=n),new Le(r=>{let a=function a4(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;a<0&&(a=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},a)})}const{isArray:o4}=Array;function LD(t){return 1===t.length&&o4(t[0])?t[0]:t}function UD(...t){return 1===(t=LD(t)).length?Pn(t[0]):new Le(function s4(t){return n=>{let e=[];for(let i=0;e&&!n.closed&&i<t.length;i++)e.push(Pn(t[i]).subscribe(qt(n,r=>{if(e){for(let a=0;a<e.length;a++)a!==i&&e[a].unsubscribe();e=null}n.next(r)})))}}(t))}function _f(...t){const n=nd(t),e=LD(t);return e.length?new Le(i=>{let r=e.map(()=>[]),a=e.map(()=>!1);i.add(()=>{r=a=null});for(let o=0;!i.closed&&o<e.length;o++)Pn(e[o]).subscribe(qt(i,s=>{if(r[o].push(s),r.every(l=>l.length)){const l=r.map(c=>c.shift());i.next(n?n(...l):l),r.some((c,u)=>!c.length&&a[u])&&i.complete()}},()=>{a[o]=!0,!r[o].length&&i.complete()}));return()=>{r=a=null}}):ha}function Fn(t){return xt((n,e)=>{Pn(t).subscribe(qt(e,()=>e.complete(),O)),!e.closed&&n.subscribe(e)})}function u0(...t){const n=nd(t);return xt((e,i)=>{const r=t.length,a=new Array(r);let o=t.map(()=>!1),s=!1;for(let l=0;l<r;l++)Pn(t[l]).subscribe(qt(i,c=>{a[l]=c,!s&&!o[l]&&(o[l]=!0,(s=o.every(Be))&&(o=null))},O));e.subscribe(qt(i,l=>{if(s){const c=[l,...a];i.next(n?n(...c):c)}}))})}function GD(t,n){return n?e=>cu(n.pipe(Hn(1),function u4(){return xt((t,n)=>{t.subscribe(qt(n,O))})}()),e.pipe(GD(t))):yn((e,i)=>t(e,i).pipe(Hn(1),function d4(t){return Nt(()=>t)}(e)))}function zD(t,n=BD){const e=l0(t,n);return GD(()=>e)}new Le(O);var f4={left:"right",right:"left",bottom:"top",top:"bottom"};function yf(t){return t.replace(/left|right|bottom|top/g,function(n){return f4[n]})}function Ja(t){return t.split("-")[0]}var p4={start:"end",end:"start"};function jD(t){return t.replace(/start|end/g,function(n){return p4[n]})}var jr="top",xa="bottom",Ma="right",$r="left",d0="auto",Ru=[jr,xa,Ma,$r],zl="start",xu="end",$D="viewport",Mu="popper",WD=Ru.reduce(function(t,n){return t.concat([n+"-"+zl,n+"-"+xu])},[]),qD=[].concat(Ru,[d0]).reduce(function(t,n){return t.concat([n,n+"-"+zl,n+"-"+xu])},[]),R4=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ka(t){if(null==t)return window;if("[object Window]"!==t.toString()){var n=t.ownerDocument;return n&&n.defaultView||window}return t}function jl(t){return t instanceof ka(t).Element||t instanceof Element}function da(t){return t instanceof ka(t).HTMLElement||t instanceof HTMLElement}function XD(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ka(t).ShadowRoot||t instanceof ShadowRoot)}function es(t){return((jl(t)?t.ownerDocument:t.document)||window.document).documentElement}var Ds=Math.max,wf=Math.min,$l=Math.round;function Wl(t,n){void 0===n&&(n=!1);var e=t.getBoundingClientRect(),i=1,r=1;if(da(t)&&n){var a=t.offsetHeight,o=t.offsetWidth;o>0&&(i=$l(e.width)/o||1),a>0&&(r=$l(e.height)/a||1)}return{width:e.width/i,height:e.height/r,top:e.top/r,right:e.right/i,bottom:e.bottom/r,left:e.left/i,x:e.left/i,y:e.top/r}}function h0(t){var n=ka(t);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function f0(t){return Wl(es(t)).left+h0(t).scrollLeft}function Co(t){return ka(t).getComputedStyle(t)}function eo(t){return t?(t.nodeName||"").toLowerCase():null}function Sf(t){return"html"===eo(t)?t:t.assignedSlot||t.parentNode||(XD(t)?t.host:null)||es(t)}function p0(t){var n=Co(t);return/auto|scroll|overlay|hidden/.test(n.overflow+n.overflowY+n.overflowX)}function YD(t){return["html","body","#document"].indexOf(eo(t))>=0?t.ownerDocument.body:da(t)&&p0(t)?t:YD(Sf(t))}function ku(t,n){var e;void 0===n&&(n=[]);var i=YD(t),r=i===(null==(e=t.ownerDocument)?void 0:e.body),a=ka(i),o=r?[a].concat(a.visualViewport||[],p0(i)?i:[]):i,s=n.concat(o);return r?s:s.concat(ku(Sf(o)))}function k4(t){return["table","td","th"].indexOf(eo(t))>=0}function QD(t){return da(t)&&"fixed"!==Co(t).position?t.offsetParent:null}function Au(t){for(var n=ka(t),e=QD(t);e&&k4(e)&&"static"===Co(e).position;)e=QD(e);return e&&("html"===eo(e)||"body"===eo(e)&&"static"===Co(e).position)?n:e||function A4(t){var n=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&da(t)&&"fixed"===Co(t).position)return null;for(var r=Sf(t);da(r)&&["html","body"].indexOf(eo(r))<0;){var a=Co(r);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||n&&"filter"===a.willChange||n&&a.filter&&"none"!==a.filter)return r;r=r.parentNode}return null}(t)||n}function KD(t,n){var e=n.getRootNode&&n.getRootNode();if(t.contains(n))return!0;if(e&&XD(e)){var i=n;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function g0(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ZD(t,n){return n===$D?g0(function x4(t){var n=ka(t),e=es(t),i=n.visualViewport,r=e.clientWidth,a=e.clientHeight,o=0,s=0;return i&&(r=i.width,a=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,s=i.offsetTop)),{width:r,height:a,x:o+f0(t),y:s}}(t)):jl(n)?function P4(t){var n=Wl(t);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(n):g0(function M4(t){var n,e=es(t),i=h0(t),r=null==(n=t.ownerDocument)?void 0:n.body,a=Ds(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Ds(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+f0(t),l=-i.scrollTop;return"rtl"===Co(r||e).direction&&(s+=Ds(e.clientWidth,r?r.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(es(t)))}function ql(t){return t.split("-")[1]}function v0(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function JD(t){var l,n=t.reference,e=t.element,i=t.placement,r=i?Ja(i):null,a=i?ql(i):null,o=n.x+n.width/2-e.width/2,s=n.y+n.height/2-e.height/2;switch(r){case jr:l={x:o,y:n.y-e.height};break;case xa:l={x:o,y:n.y+n.height};break;case Ma:l={x:n.x+n.width,y:s};break;case $r:l={x:n.x-e.width,y:s};break;default:l={x:n.x,y:n.y}}var c=r?v0(r):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case zl:l[c]=l[c]-(n[u]/2-e[u]/2);break;case xu:l[c]=l[c]+(n[u]/2-e[u]/2)}}return l}function tR(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function iR(t,n){return n.reduce(function(e,i){return e[i]=t,e},{})}function m0(t,n){void 0===n&&(n={});var i=n.placement,r=void 0===i?t.placement:i,a=n.boundary,o=void 0===a?"clippingParents":a,s=n.rootBoundary,l=void 0===s?$D:s,c=n.elementContext,u=void 0===c?Mu:c,d=n.altBoundary,v=void 0!==d&&d,m=n.padding,b=void 0===m?0:m,y=tR("number"!=typeof b?b:iR(b,Ru)),k=t.rects.popper,w=t.elements[v?u===Mu?"reference":Mu:u],R=function I4(t,n,e){var i="clippingParents"===n?function E4(t){var n=ku(Sf(t)),i=["absolute","fixed"].indexOf(Co(t).position)>=0&&da(t)?Au(t):t;return jl(i)?n.filter(function(r){return jl(r)&&KD(r,i)&&"body"!==eo(r)}):[]}(t):[].concat(n),r=[].concat(i,[e]),o=r.reduce(function(s,l){var c=ZD(t,l);return s.top=Ds(c.top,s.top),s.right=wf(c.right,s.right),s.bottom=wf(c.bottom,s.bottom),s.left=Ds(c.left,s.left),s},ZD(t,r[0]));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(jl(w)?w:w.contextElement||es(t.elements.popper),o,l),z=Wl(t.elements.reference),q=JD({reference:z,element:k,strategy:"absolute",placement:r}),j=g0(Object.assign({},k,q)),ye=u===Mu?j:z,ue={top:R.top-ye.top+y.top,bottom:ye.bottom-R.bottom+y.bottom,left:R.left-ye.left+y.left,right:ye.right-R.right+y.right},ce=t.modifiersData.offset;if(u===Mu&&ce){var ve=ce[r];Object.keys(ue).forEach(function(_e){var Ie=[Ma,xa].indexOf(_e)>=0?1:-1,st=[jr,xa].indexOf(_e)>=0?"y":"x";ue[_e]+=ve[st]*Ie})}return ue}const F4={name:"flip",enabled:!0,phase:"main",fn:function N4(t){var n=t.state,e=t.options,i=t.name;if(!n.modifiersData[i]._skip){for(var r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0===o||o,l=e.fallbackPlacements,c=e.padding,u=e.boundary,d=e.rootBoundary,v=e.altBoundary,m=e.flipVariations,b=void 0===m||m,y=e.allowedAutoPlacements,C=n.options.placement,k=Ja(C),R=l||(k!==C&&b?function O4(t){if(Ja(t)===d0)return[];var n=yf(t);return[jD(t),n,jD(n)]}(C):[yf(C)]),z=[C].concat(R).reduce(function(Kt,Xe){return Kt.concat(Ja(Xe)===d0?function V4(t,n){void 0===n&&(n={});var r=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?qD:l,u=ql(n.placement),d=u?s?WD:WD.filter(function(b){return ql(b)===u}):Ru,v=d.filter(function(b){return c.indexOf(b)>=0});0===v.length&&(v=d);var m=v.reduce(function(b,y){return b[y]=m0(t,{placement:y,boundary:r,rootBoundary:a,padding:o})[Ja(y)],b},{});return Object.keys(m).sort(function(b,y){return m[b]-m[y]})}(n,{placement:Xe,boundary:u,rootBoundary:d,padding:c,flipVariations:b,allowedAutoPlacements:y}):Xe)},[]),q=n.rects.reference,j=n.rects.popper,ye=new Map,ue=!0,ce=z[0],ve=0;ve<z.length;ve++){var _e=z[ve],Ie=Ja(_e),st=ql(_e)===zl,mt=[jr,xa].indexOf(Ie)>=0,ct=mt?"width":"height",bt=m0(n,{placement:_e,boundary:u,rootBoundary:d,altBoundary:v,padding:c}),wt=mt?st?Ma:$r:st?xa:jr;q[ct]>j[ct]&&(wt=yf(wt));var pt=yf(wt),J=[];if(a&&J.push(bt[Ie]<=0),s&&J.push(bt[wt]<=0,bt[pt]<=0),J.every(function(Kt){return Kt})){ce=_e,ue=!1;break}ye.set(_e,J)}if(ue)for(var Ze=function(Xe){var Ht=z.find(function(ui){var ht=ye.get(ui);if(ht)return ht.slice(0,Xe).every(function(Gi){return Gi})});if(Ht)return ce=Ht,"break"},_i=b?3:1;_i>0&&"break"!==Ze(_i);_i--);n.placement!==ce&&(n.modifiersData[i]._skip=!0,n.placement=ce,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Pu(t,n,e){return Ds(t,wf(n,e))}function b0(t){var n=Wl(t),e=t.offsetWidth,i=t.offsetHeight;return Math.abs(n.width-e)<=1&&(e=n.width),Math.abs(n.height-i)<=1&&(i=n.height),{x:t.offsetLeft,y:t.offsetTop,width:e,height:i}}const H4={name:"preventOverflow",enabled:!0,phase:"main",fn:function U4(t){var n=t.state,e=t.options,i=t.name,r=e.mainAxis,a=void 0===r||r,o=e.altAxis,s=void 0!==o&&o,v=e.tether,m=void 0===v||v,b=e.tetherOffset,y=void 0===b?0:b,C=m0(n,{boundary:e.boundary,rootBoundary:e.rootBoundary,padding:e.padding,altBoundary:e.altBoundary}),k=Ja(n.placement),w=ql(n.placement),R=!w,z=v0(k),q=function B4(t){return"x"===t?"y":"x"}(z),j=n.modifiersData.popperOffsets,ye=n.rects.reference,ue=n.rects.popper,ce="function"==typeof y?y(Object.assign({},n.rects,{placement:n.placement})):y,ve="number"==typeof ce?{mainAxis:ce,altAxis:ce}:Object.assign({mainAxis:0,altAxis:0},ce),_e=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,Ie={x:0,y:0};if(j){if(a){var st,mt="y"===z?jr:$r,ct="y"===z?xa:Ma,bt="y"===z?"height":"width",wt=j[z],pt=wt+C[mt],J=wt-C[ct],T=m?-ue[bt]/2:0,Ze=w===zl?ye[bt]:ue[bt],_i=w===zl?-ue[bt]:-ye[bt],Rt=n.elements.arrow,Kt=m&&Rt?b0(Rt):{width:0,height:0},Xe=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ht=Xe[mt],ui=Xe[ct],ht=Pu(0,ye[bt],Kt[bt]),Gi=R?ye[bt]/2-T-ht-Ht-ve.mainAxis:Ze-ht-Ht-ve.mainAxis,qi=R?-ye[bt]/2+T+ht+ui+ve.mainAxis:_i+ht+ui+ve.mainAxis,yi=n.elements.arrow&&Au(n.elements.arrow),xi=null!=(st=null==_e?void 0:_e[z])?st:0,ji=wt+qi-xi,Vi=Pu(m?wf(pt,wt+Gi-xi-(yi?"y"===z?yi.clientTop||0:yi.clientLeft||0:0)):pt,wt,m?Ds(J,ji):J);j[z]=Vi,Ie[z]=Vi-wt}if(s){var di,ni=j[q],ei="y"===q?"height":"width",Pi=ni+C["x"===z?jr:$r],tn=ni-C["x"===z?xa:Ma],hi=-1!==[jr,$r].indexOf(k),fi=null!=(di=null==_e?void 0:_e[q])?di:0,Ei=hi?Pi:ni-ye[ei]-ue[ei]-fi+ve.altAxis,nr=hi?ni+ye[ei]+ue[ei]-fi-ve.altAxis:tn,Qi=m&&hi?function L4(t,n,e){var i=Pu(t,n,e);return i>e?e:i}(Ei,ni,nr):Pu(m?Ei:Pi,ni,m?nr:tn);j[q]=Qi,Ie[q]=Qi-ni}n.modifiersData[i]=Ie}},requiresIfExists:["offset"]},$4={name:"arrow",enabled:!0,phase:"main",fn:function z4(t){var n,e=t.state,i=t.name,r=t.options,a=e.elements.arrow,o=e.modifiersData.popperOffsets,s=Ja(e.placement),l=v0(s),u=[$r,Ma].indexOf(s)>=0?"height":"width";if(a&&o){var d=function(n,e){return tR("number"!=typeof(n="function"==typeof n?n(Object.assign({},e.rects,{placement:e.placement})):n)?n:iR(n,Ru))}(r.padding,e),v=b0(a),m="y"===l?jr:$r,b="y"===l?xa:Ma,y=e.rects.reference[u]+e.rects.reference[l]-o[l]-e.rects.popper[u],C=o[l]-e.rects.reference[l],k=Au(a),w=k?"y"===l?k.clientHeight||0:k.clientWidth||0:0,j=w/2-v[u]/2+(y/2-C/2),ye=Pu(d[m],j,w-v[u]-d[b]);e.modifiersData[i]=((n={})[l]=ye,n.centerOffset=ye-j,n)}},effect:function j4(t){var n=t.state,i=t.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=n.elements.popper.querySelector(r))||!KD(n.elements.popper,r)||(n.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Y4(t,n,e){void 0===e&&(e=!1);var i=da(n),r=da(n)&&function X4(t){var n=t.getBoundingClientRect(),e=$l(n.width)/t.offsetWidth||1,i=$l(n.height)/t.offsetHeight||1;return 1!==e||1!==i}(n),a=es(n),o=Wl(t,r),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&(("body"!==eo(n)||p0(a))&&(s=function q4(t){return t!==ka(t)&&da(t)?function W4(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):h0(t)}(n)),da(n)?((l=Wl(n,!0)).x+=n.clientLeft,l.y+=n.clientTop):a&&(l.x=f0(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function Q4(t){var n=new Map,e=new Set,i=[];function r(a){e.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(s){if(!e.has(s)){var l=n.get(s);l&&r(l)}}),i.push(a)}return t.forEach(function(a){n.set(a.name,a)}),t.forEach(function(a){e.has(a.name)||r(a)}),i}function Z4(t){var n;return function(){return n||(n=new Promise(function(e){Promise.resolve().then(function(){n=void 0,e(t())})})),n}}var nR={placement:"bottom",modifiers:[],strategy:"absolute"};function rR(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return!n.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function eL(t){void 0===t&&(t={});var e=t.defaultModifiers,i=void 0===e?[]:e,r=t.defaultOptions,a=void 0===r?nR:r;return function(s,l,c){void 0===c&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},nR,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],v=!1,m={state:u,setOptions:function(k){var w="function"==typeof k?k(u.options):k;y(),u.options=Object.assign({},a,u.options,w),u.scrollParents={reference:jl(s)?ku(s):s.contextElement?ku(s.contextElement):[],popper:ku(l)};var R=function K4(t){var n=Q4(t);return R4.reduce(function(e,i){return e.concat(n.filter(function(r){return r.phase===i}))},[])}(function J4(t){var n=t.reduce(function(e,i){var r=e[i.name];return e[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,e},{});return Object.keys(n).map(function(e){return n[e]})}([].concat(i,u.options.modifiers)));return u.orderedModifiers=R.filter(function(_e){return _e.enabled}),function b(){u.orderedModifiers.forEach(function(C){var w=C.options,z=C.effect;if("function"==typeof z){var q=z({state:u,name:C.name,instance:m,options:void 0===w?{}:w});d.push(q||function(){})}})}(),m.update()},forceUpdate:function(){if(!v){var k=u.elements,w=k.reference,R=k.popper;if(rR(w,R)){u.rects={reference:Y4(w,Au(R),"fixed"===u.options.strategy),popper:b0(R)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(_e){return u.modifiersData[_e.name]=Object.assign({},_e.data)});for(var q=0;q<u.orderedModifiers.length;q++)if(!0!==u.reset){var j=u.orderedModifiers[q],ye=j.fn,ue=j.options;"function"==typeof ye&&(u=ye({state:u,options:void 0===ue?{}:ue,name:j.name,instance:m})||u)}else u.reset=!1,q=-1}}},update:Z4(function(){return new Promise(function(C){m.forceUpdate(),C(u)})}),destroy:function(){y(),v=!0}};if(!rR(s,l))return m;function y(){d.forEach(function(C){return C()}),d=[]}return m.setOptions(c).then(function(C){!v&&c.onFirstUpdate&&c.onFirstUpdate(C)}),m}}var Cf={passive:!0},aL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function aR(t){var n,e=t.popper,i=t.popperRect,r=t.placement,a=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,v=o.x,m=void 0===v?0:v,b=o.y,y=void 0===b?0:b,C="function"==typeof u?u({x:m,y}):{x:m,y};m=C.x,y=C.y;var k=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),R=$r,z=jr,q=window;if(c){var j=Au(e),ye="clientHeight",ue="clientWidth";j===ka(e)&&"static"!==Co(j=es(e)).position&&"absolute"===s&&(ye="scrollHeight",ue="scrollWidth"),j=j,(r===jr||(r===$r||r===Ma)&&a===xu)&&(z=xa,y-=(d&&q.visualViewport?q.visualViewport.height:j[ye])-i.height,y*=l?1:-1),r!==$r&&(r!==jr&&r!==xa||a!==xu)||(R=Ma,m-=(d&&q.visualViewport?q.visualViewport.width:j[ue])-i.width,m*=l?1:-1)}var st,_e=Object.assign({position:s},c&&aL),Ie=!0===u?function oL(t){var e=t.y,r=window.devicePixelRatio||1;return{x:$l(t.x*r)/r||0,y:$l(e*r)/r||0}}({x:m,y}):{x:m,y};return m=Ie.x,y=Ie.y,Object.assign({},_e,l?((st={})[z]=w?"0":"",st[R]=k?"0":"",st.transform=(q.devicePixelRatio||1)<=1?"translate("+m+"px, "+y+"px)":"translate3d("+m+"px, "+y+"px, 0)",st):((n={})[z]=w?y+"px":"",n[R]=k?m+"px":"",n.transform="",n))}var hL=eL({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function tL(t){var n=t.state,e=t.instance,i=t.options,r=i.scroll,a=void 0===r||r,o=i.resize,s=void 0===o||o,l=ka(n.elements.popper),c=[].concat(n.scrollParents.reference,n.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",e.update,Cf)}),s&&l.addEventListener("resize",e.update,Cf),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",e.update,Cf)}),s&&l.removeEventListener("resize",e.update,Cf)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function nL(t){var n=t.state;n.modifiersData[t.name]=JD({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function sL(t){var n=t.state,e=t.options,i=e.gpuAcceleration,r=void 0===i||i,a=e.adaptive,o=void 0===a||a,s=e.roundOffsets,l=void 0===s||s,u={placement:Ja(n.placement),variation:ql(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:r,isFixed:"fixed"===n.options.strategy};null!=n.modifiersData.popperOffsets&&(n.styles.popper=Object.assign({},n.styles.popper,aR(Object.assign({},u,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:o,roundOffsets:l})))),null!=n.modifiersData.arrow&&(n.styles.arrow=Object.assign({},n.styles.arrow,aR(Object.assign({},u,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function cL(t){var n=t.state;Object.keys(n.elements).forEach(function(e){var i=n.styles[e]||{},r=n.attributes[e]||{},a=n.elements[e];!da(a)||!eo(a)||(Object.assign(a.style,i),Object.keys(r).forEach(function(o){var s=r[o];!1===s?a.removeAttribute(o):a.setAttribute(o,!0===s?"":s)}))})},effect:function uL(t){var n=t.state,e={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,e.popper),n.styles=e,n.elements.arrow&&Object.assign(n.elements.arrow.style,e.arrow),function(){Object.keys(n.elements).forEach(function(i){var r=n.elements[i],a=n.attributes[i]||{},s=Object.keys(n.styles.hasOwnProperty(i)?n.styles[i]:e[i]).reduce(function(l,c){return l[c]="",l},{});!da(r)||!eo(r)||(Object.assign(r.style,s),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]}]});const gL={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function pL(t){var n=t.state,i=t.name,r=t.options.offset,a=void 0===r?[0,0]:r,o=qD.reduce(function(u,d){return u[d]=function fL(t,n,e){var i=Ja(t),r=[$r,jr].indexOf(i)>=0?-1:1,a="function"==typeof e?e(Object.assign({},n,{placement:t})):e,o=a[0],s=a[1];return o=o||0,s=(s||0)*r,[$r,Ma].indexOf(i)>=0?{x:s,y:o}:{x:o,y:s}}(d,n.rects,a),u},{}),s=o[n.placement],c=s.y;null!=n.modifiersData.popperOffsets&&(n.modifiersData.popperOffsets.x+=s.x,n.modifiersData.popperOffsets.y+=c),n.modifiersData[i]=o}},_0=["*"],UL=["dialog"];function b8(t,n){1&t&&g(0),2&t&&nt(S(2).title)}function _8(t,n){}function y8(t,n){if(1&t&&(f(0,"h3",3),x(1,b8,1,1,"ng-template",null,4,ut),x(3,_8,0,0,"ng-template",5),h()),2&t){const e=lt(2),i=S();p(3),_("ngTemplateOutlet",i.isTitleTemplate()?i.title:e)("ngTemplateOutletContext",i.context)}}function w8(t,n){if(1&t&&(f(0,"span"),po(1,2),Lt(2,"percent"),h()),2&t){const e=S();p(2),eh(ih(2,1,e.getValue()/e.max)),function Qg(t){!function AE(t,n,e){if(zc>0){const i=t.data[e];gw(t,n,Array.isArray(i)?i:i.update,lo()-zc-1,Gc)}Gc=0,zc=0}(ci(),Me(),t+20)}(1)}}function to(t){return!isNaN(function Tf(t){return parseInt(`${t}`,10)}(t))}function Rs(t){return null!=t}function Xl(t){return(t||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){let n=this;if(!document.documentElement.contains(n))return null;do{if(n.matches(t))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null});const lR={animation:!0,transitionTimerDelayMs:5},N8=()=>{},{transitionTimerDelayMs:F8}=lR,Eu=new Map,mr=(t,n,e,i)=>{let r=i.context||{};const a=Eu.get(n);if(a)switch(i.runningTransition){case"continue":return ha;case"stop":t.run(()=>a.transition$.complete()),r=Object.assign(a.context,r),Eu.delete(n)}const o=e(n,i.animation,r)||N8;if(!i.animation||"none"===window.getComputedStyle(n).transitionProperty)return t.run(()=>o()),It(void 0).pipe(function V8(t){return n=>new Le(e=>n.subscribe({next:o=>t.run(()=>e.next(o)),error:o=>t.run(()=>e.error(o)),complete:()=>t.run(()=>e.complete())}))}(t));const s=new we,l=new we,c=s.pipe(function l4(...t){return n=>cu(n,It(...t))}(!0));Eu.set(n,{transition$:s,complete:()=>{l.next(),l.complete()},context:r});const u=function O8(t){const{transitionDelay:n,transitionDuration:e}=window.getComputedStyle(t);return 1e3*(parseFloat(n)+parseFloat(e))}(n);return t.runOutsideAngular(()=>{const d=vr(n,"transitionend").pipe(Fn(c),qn(({target:m})=>m===n));UD(l0(u+F8).pipe(Fn(c)),d,l).pipe(Fn(c)).subscribe(()=>{Eu.delete(n),t.run(()=>{o(),s.next(),s.complete()})})}),s.asObservable()};let Iu=(()=>{class t{constructor(){this.animation=lR.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr]]}),t})(),gR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr]]}),t})(),mR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({}),t})(),yR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr]]}),t})(),wR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({}),t})();var Bn=(()=>{return(t=Bn||(Bn={}))[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",Bn;var t})();const Rf=(t,n)=>!!n&&n.some(e=>e.contains(t)),SR=(t,n)=>!n||null!=function I8(t,n){return n&&void 0!==t.closest?t.closest(n):null}(t,n),t6="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function CR(t,n,e,i,r,a,o,s){e&&t.runOutsideAngular((t=>t6?()=>setTimeout(()=>t(),100):t)(()=>{const c=vr(n,"keydown").pipe(Fn(r),qn(v=>v.which===Bn.Escape),ir(v=>v.preventDefault())),u=vr(n,"mousedown").pipe(Nt(v=>{const m=v.target;return 2!==v.button&&!Rf(m,o)&&("inside"===e?Rf(m,a)&&SR(m,s):"outside"===e?!Rf(m,a):SR(m,s)||!Rf(m,a))}),Fn(r)),d=vr(n,"mouseup").pipe(u0(u),qn(([v,m])=>m),zD(0),Fn(r));UD([c.pipe(Nt(v=>0)),d.pipe(Nt(v=>1))]).subscribe(v=>t.run(()=>i(v)))}))}const TR=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function DR(t){const n=Array.from(t.querySelectorAll(TR)).filter(e=>-1!==e.tabIndex);return[n[0],n[n.length-1]]}const r6=/\s+/,a6=/  +/gi,o6=/^start/,s6=/^end/,l6=/-(top|left)$/,c6=/-(bottom|right)$/,d6=/^left/,h6=/^right/,f6=/^start/,p6=/^end/;function RR({placement:t,baseClass:n}){let e=Array.isArray(t)?t:t.split(r6),r=e.findIndex(l=>"auto"===l);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(l){null==e.find(c=>-1!==c.search("^"+l))&&e.splice(r++,1,l)});const a=e.map(l=>function u6(t){return t.replace(o6,"left").replace(s6,"right").replace(l6,"-start").replace(c6,"-end")}(l));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!n,phase:"write",fn({state:l}){const c=new RegExp(n+"-[a-z]+","gi"),u=l.elements.popper,d=l.placement;let v=u.className;v=v.replace(c,""),v+=` ${function g6(t,n){let[e,i]=n.split("-");const r=e.replace(d6,"start").replace(h6,"end");let a=[r];if(i){let o=i;("left"===e||"right"===e)&&(o=o.replace(f6,"top").replace(p6,"bottom")),a.push(`${r}-${o}`)}return t&&(a=a.map(o=>`${t}-${o}`)),a.join(" ")}(n,d)}`,v=v.trim().replace(a6," "),u.className=v}},F4,H4,$4,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function xR(t){return t}function MR(){let t=null;return{createPopper(n){if(!t){let i=(n.updatePopperOptions||xR)(RR(n));t=hL(n.hostElement,n.targetElement,i)}},update(){t&&t.update()},setOptions(n){if(t){let i=(n.updatePopperOptions||xR)(RR(n));t.setOptions(i)}},destroy(){t&&(t.destroy(),t=null)}}}new Date(1882,10,12),new Date(2174,10,25);let VR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr,yT]]}),t})(),T6=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),OR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=je({type:t,selectors:[["",8,"navbar"]]}),t})(),M0=(()=>{class t{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(P(Ri))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,i){2&e&&Mt("disabled",i.disabled)},inputs:{disabled:"disabled"}}),t})(),Af=(()=>{class t{constructor(e,i){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(P(gi(()=>Ql)),P(Ri))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,i,r){if(1&e&&Cn(r,M0,4),2&e){let a;Si(a=Ci())&&(i.menuItems=a)}},hostVars:5,hostBindings:function(e,i){1&e&&I("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return i.dropdown.onKeyDown(a)})("keydown.Space",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&(Ai("data-popper",i.placement),Mt("dropdown-menu",!0)("show",i.dropdown.isOpen()))}}),t})(),Pf=(()=>{class t{constructor(e,i){this.dropdown=e,this.nativeElement=i.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(P(gi(()=>Ql)),P(Ri))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){2&e&&Ai("aria-expanded",i.dropdown.isOpen())}}),t})(),k0=(()=>{class t extends Pf{constructor(e,i){super(e,i)}}return t.\u0275fac=function(e){return new(e||t)(P(gi(()=>Ql)),P(Ri))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,i){1&e&&I("click",function(){return i.dropdown.toggle()})("keydown.ArrowUp",function(a){return i.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return i.dropdown.onKeyDown(a)})("keydown.Home",function(a){return i.dropdown.onKeyDown(a)})("keydown.End",function(a){return i.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return i.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return i.dropdown.onKeyDown(a)}),2&e&&Ai("aria-expanded",i.dropdown.isOpen())},features:[Bi([{provide:Pf,useExisting:gi(()=>t)}]),Di]}),t})(),Ql=(()=>{class t{constructor(e,i,r,a,o,s,l){this._changeDetector=e,this._document=r,this._ngZone=a,this._elementRef=o,this._renderer=s,this._closed$=new we,this._bodyContainer=null,this._positioning=MR(),this._open=!1,this.openChange=new ot,this.placement=i.placement,this.container=i.container,this.autoClose=i.autoClose,this.display=l?"static":"dynamic",this._zoneSubscription=a.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(Hn(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){if(e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),e.dropdownClass){const{currentValue:i,previousValue:r}=e.dropdownClass;this._applyCustomDropdownClass(i,r)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.onStable.pipe(Hn(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()})))}_setCloseHandlers(){CR(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._positioning.destroy(),this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const i=e.which,r=this._getMenuElements();let a=-1,o=null;const s=this._isEventFromToggle(e);if(!s&&r.length&&r.forEach((l,c)=>{l.contains(e.target)&&(o=l),l===this._document.activeElement&&(a=c)}),i!==Bn.Space&&i!==Bn.Enter){if(i!==Bn.Tab){if(s||o){if(this.open(),r.length){switch(i){case Bn.ArrowDown:a=Math.min(a+1,r.length-1);break;case Bn.ArrowUp:if(this._isDropup()&&-1===a){a=r.length-1;break}a=Math.max(a-1,0);break;case Bn.Home:a=0;break;case Bn.End:a=r.length-1}r[a].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const l=this._menu.nativeElement.querySelectorAll(TR);e.shiftKey&&e.target===l[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):!e.shiftKey&&e.target===l[l.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else vr(e.target,"focusout").pipe(Hn(1)).subscribe(({relatedTarget:l})=>{this._elementRef.nativeElement.contains(l)||this.close()})}}else o&&(!0===this.autoClose||"inside"===this.autoClose)&&vr(o,"click").pipe(Hn(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(i=>!i.disabled).map(i=>i.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;this._menu&&e.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const i=this._renderer,r=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||i.createElement("div");i.setStyle(a,"position","absolute"),i.setStyle(r,"position","static"),i.setStyle(a,"z-index","1050"),i.appendChild(a,r),i.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(e,i){const r="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;r&&(i&&this._renderer.removeClass(r,i),e&&this._renderer.addClass(r,e))}_applyPlacementClasses(e){const i=this._menu;if(i){e||(e=this._getFirstPlacement(this.placement));const r=this._renderer,a=this._elementRef.nativeElement;r.removeClass(a,"dropup"),r.removeClass(a,"dropdown");const{nativeElement:o}=i;"static"===this.display?(i.placement=null,r.setAttribute(o,"data-bs-popper","static")):(i.placement=e,r.removeAttribute(o,"data-bs-popper"));const s=-1!==e.search("^top")?"dropup":"dropdown";r.addClass(a,s);const l=this._bodyContainer;l&&(r.removeClass(l,"dropup"),r.removeClass(l,"dropdown"),r.addClass(l,s))}}}return t.\u0275fac=function(e){return new(e||t)(P(Ur),P(T6),P(Rn),P(Li),P(Ri),P(ia),P(OR,8))},t.\u0275dir=je({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(e,i,r){if(1&e&&(Cn(r,Af,5),Cn(r,Pf,5)),2&e){let a;Si(a=Ci())&&(i._menu=a.first),Si(a=Ci())&&(i._anchor=a.first)}},hostVars:2,hostBindings:function(e,i){2&e&&Mt("show",i.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[zn]}),t})(),NR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({}),t})();class As{constructor(n,e,i){this.nodes=n,this.viewRef=e,this.componentRef=i}}class D6{constructor(n,e,i,r,a,o){this._type=n,this._injector=e,this._viewContainerRef=i,this._renderer=r,this._ngZone=a,this._applicationRef=o,this._windowRef=null,this._contentRef=null}open(n,e,i=!1){this._windowRef||(this._contentRef=this._getContentRef(n,e),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,a=this._ngZone.onStable.pipe(Hn(1),yn(()=>mr(this._ngZone,r,({classList:o})=>o.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:a}}close(n=!1){return this._windowRef?mr(this._ngZone,this._windowRef.location.nativeElement,({classList:e})=>e.remove("show"),{animation:n,runningTransition:"stop"}).pipe(ir(()=>{var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):It(void 0)}_getContentRef(n,e){if(n){if(n instanceof Zi){const i=n.createEmbeddedView(e);return this._applicationRef.attachView(i),new As([i.rootNodes],i)}return new As([[this._renderer.createText(`${n}`)]])}return new As([])}}let R6=(()=>{class t{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Hn(1)).subscribe(()=>{mr(this._zone,this._el.nativeElement,(e,i)=>{i&&Xl(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return mr(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(P(Ri),P(Li))},t.\u0275cmp=_t({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(Ho("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),Mt("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),t})();class FR{close(n){}dismiss(n){}}class x6{constructor(n,e,i,r){this._windowCmptRef=n,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new we,this._dismissed=new we,this._hidden=new we,n.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,o)=>{this._resolve=a,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Fn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Fn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function E8(t){return t&&t.then}(e)?!1!==e&&this._dismiss(n):e.then(i=>{!1!==i&&this._dismiss(n)},()=>{})}else this._dismiss(n)}_removeModalElements(){const n=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():It(void 0);n.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),_f(n,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Fu=(()=>{return(t=Fu||(Fu={}))[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",Fu;var t})();let M6=(()=>{class t{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new we,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ot,this.shown=new we,this.hidden=new we}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Hn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=_f(mr(this._zone,e,()=>e.classList.remove("show"),i),mr(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const e={animation:this.animation,runningTransition:"continue"};_f(mr(this._zone,this._elRef.nativeElement,(a,o)=>{o&&Xl(a),a.classList.add("show")},e),mr(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{vr(e,"keydown").pipe(Fn(this._closed$),qn(r=>r.which===Bn.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Fu.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;vr(this._dialogEl.nativeElement,"mousedown").pipe(Fn(this._closed$),ir(()=>i=!1),_o(()=>vr(e,"mouseup").pipe(Fn(this._closed$),Hn(1))),qn(({target:r})=>e===r)).subscribe(()=>{i=!0}),vr(e,"click").pipe(Fn(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(Fu.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=DR(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&mr(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(P(Rn),P(Ri),P(Li))},t.\u0275cmp=_t({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&Sa(UL,7),2&e){let r;Si(r=Ci())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(Ai("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),Ho("modal d-block"+(i.windowClass?" "+i.windowClass:"")),Mt("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:_0,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&($d(),f(0,"div",0,1)(2,"div",2),Wd(3),h()()),2&e&&Ho("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),t})(),k6=(()=>{class t{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:a,paddingRight:o}=r;if(e>0){const s=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${s+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=o),r.overflow=a}}}return t.\u0275fac=function(e){return new(e||t)(Ue(Rn))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),A6=(()=>{class t{constructor(e,i,r,a,o,s){this._applicationRef=e,this._injector=i,this._document=r,this._scrollBar=a,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new we,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new ot,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((t,n,e,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=vr(n,"focusin").pipe(Fn(e),Nt(a=>a.target));vr(n,"keydown").pipe(Fn(e),qn(a=>a.which===Bn.Tab),u0(r)).subscribe(([a,o])=>{const[s,l]=DR(n);(o===s||o===n)&&a.shiftKey&&(l.focus(),a.preventDefault()),o===l&&!a.shiftKey&&(s.focus(),a.preventDefault())}),i&&vr(n,"click").pipe(Fn(e),u0(r),Nt(a=>a[1])).subscribe(a=>a.focus())})})(0,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}open(e,i,r,a){const o=a.container instanceof HTMLElement?a.container:Rs(a.container)?this._document.querySelector(a.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),l=this._scrollBar.hide(),c=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!o)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const u=new FR,d=this._getContentRef(e,a.injector||i,r,u,a);let v=!1!==a.backdrop?this._attachBackdrop(e,o):void 0,m=this._attachWindowComponent(e,o,d),b=new x6(m,d,v,a.beforeDismiss);return this._registerModalRef(b),this._registerWindowCmpt(m),b.result.then(l,l),b.result.then(c,c),u.close=y=>{b.close(y)},u.dismiss=y=>{b.dismiss(y)},this._applyWindowOptions(m.instance,a),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),v&&v.instance&&(this._applyBackdropOptions(v.instance,a),v.changeDetectorRef.detectChanges()),m.changeDetectorRef.detectChanges(),b}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,i){let a=e.resolveComponentFactory(R6).create(this._injector);return this._applicationRef.attachView(a.hostView),i.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,i,r){let o=e.resolveComponentFactory(M6).create(this._injector,r.nodes);return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{Rs(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{Rs(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,a,o){return r?r instanceof Zi?this._createFromTemplateRef(r,a):function sR(t){return"string"==typeof t}(r)?this._createFromString(r):this._createFromComponent(e,i,r,a,o):new As([])}_createFromTemplateRef(e,i){const a=e.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(a),new As([a.rootNodes],a)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new As([[i]])}_createFromComponent(e,i,r,a,o){const s=e.resolveComponentFactory(r),l=Sn.create({providers:[{provide:FR,useValue:a}],parent:i}),c=s.create(l),u=c.location.nativeElement;return o.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new As([[u]],c.hostView,c)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(Ue(ps),Ue(Sn),Ue(Rn),Ue(k6),Ue(tv),Ue(Li))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),P6=(()=>{class t{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Ue(Iu))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),To=(()=>{class t{constructor(e,i,r,a){this._moduleCFR=e,this._injector=i,this._modalStack=r,this._config=a}open(e,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(Ue(fs),Ue(Sn),Ue(A6),Ue(P6))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),BR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({providers:[To]}),t})(),GR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr]]}),t})(),QR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr]]}),t})();class F6{constructor(n,e){this.open=n,this.close=e,e||(this.close=n)}isManual(){return"manual"===this.open||"manual"===this.close}}const B6={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},KR=t=>t>0?zD(t):n=>n;let z6=(()=>{class t{constructor(e){this._ngbConfig=e,this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return t.\u0275fac=function(e){return new(e||t)(Ue(Iu))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),j6=0;function $6(t){return t.modifiers.push(gL,{name:"offset",options:{offset:()=>[0,12]}}),t}let W6=(()=>{class t{isTitleTemplate(){return this.title instanceof Zi}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_t({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(e,i){2&e&&(Go("id",i.id),Ho("popover"+(i.popoverClass?" "+i.popoverClass:"")),Mt("fade",i.animation))},inputs:{animation:"animation",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:_0,decls:4,vars:1,consts:[["data-popper-arrow","",1,"popover-arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&($d(),D(0,"div",0),x(1,y8,4,2,"h3",1),f(2,"div",2),Wd(3),h()),2&e&&(p(1),_("ngIf",i.title))},directives:[si,Pl],encapsulation:2,changeDetection:0}),t})(),Wr=(()=>{class t{constructor(e,i,r,a,o,s,l,c,u){this._elementRef=e,this._renderer=i,this._ngZone=s,this._document=l,this._changeDetector=c,this.shown=new ot,this.hidden=new ot,this._ngbPopoverWindowId="ngb-popover-"+j6++,this._windowRef=null,this._positioning=MR(),this.animation=o.animation,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disablePopover=o.disablePopover,this.popoverClass=o.popoverClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new D6(W6,r,a,i,this._ngZone,u),this._zoneSubscription=s.onStable.subscribe(()=>{this._positioning.update()})}_isDisabled(){return!(!this.disablePopover&&(this.ngbPopover||this.popoverTitle))}open(e){if(!this._windowRef&&!this._isDisabled()){const{windowRef:i,transition$:r}=this._popupService.open(this.ngbPopover,e,this.animation);this._windowRef=i,this._windowRef.instance.animation=this.animation,this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.onStable.pipe(Hn(1)).subscribe(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-popover",updatePopperOptions:$6})}),CR(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(this.animation).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function G6(t,n,e,i,r,a,o=0,s=0){const l=function L6(t,n=B6){const e=(t||"").trim();if(0===e.length)return[];const i=e.split(/\s+/).map(a=>a.split(":")).map(a=>{let o=n[a[0]]||a;return new F6(o[0],o[1])}),r=i.filter(a=>a.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(e);if(1===l.length&&l[0].isManual())return()=>{};const c=function U6(t,n,e,i){return new Le(r=>{const a=[],o=()=>r.next(!0),s=()=>r.next(!1),l=()=>r.next(!i());return e.forEach(c=>{c.open===c.close?a.push(t.listen(n,c.open,l)):a.push(t.listen(n,c.open,o),t.listen(n,c.close,s))}),()=>{a.forEach(c=>c())}})}(t,n,l,i).pipe(function H6(t,n,e){return i=>{let r=null;const a=i.pipe(Nt(l=>({open:l})),qn(l=>{const c=e();return c===l.open||r&&r.open!==c?(r&&r.open!==l.open&&(r=null),!1):(r=l,!0)}),db());return ub(a.pipe(qn(l=>l.open),KR(t)),a.pipe(qn(l=>!l.open),KR(n))).pipe(qn(l=>l===r&&(r=null,l.open!==e())),Nt(l=>l.open))}}(o,s,i)).subscribe(u=>u?r():a());return()=>c.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:i,disablePopover:r,popoverClass:a}){a&&this.isOpen()&&(this._windowRef.instance.popoverClass=a.currentValue),(e||i||r)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Ri),P(ia),P(Sn),P(na),P(z6),P(Li),P(Rn),P(Ur),P(ps))},t.\u0275dir=je({type:t,selectors:[["","ngbPopover",""]],inputs:{animation:"animation",autoClose:"autoClose",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[zn]}),t})(),ZR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr]]}),t})(),q6=(()=>{class t{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),I0=(()=>{class t{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!to(e)||e<=0?100:e}get max(){return this._max}getValue(){return function oR(t,n,e=0){return Math.max(Math.min(t,n),e)}(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return t.\u0275fac=function(e){return new(e||t)(P(q6))},t.\u0275cmp=_t({type:t,selectors:[["ngb-progressbar"]],hostAttrs:[1,"progress"],hostVars:2,hostBindings:function(e,i){2&e&&Lc("height",i.height)},inputs:{max:"max",animated:"animated",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},ngContentSelectors:_0,decls:3,vars:11,consts:function(){let n;return n=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[["role","progressbar","aria-valuemin","0"],[4,"ngIf"],n]},template:function(e,i){1&e&&($d(),f(0,"div",0),x(1,w8,3,3,"span",1),Wd(2),h()),2&e&&(function qy(t,n,e,i,r,a,o,s,l){wa(Nr,Xa,vl(Me(),t,n,e,i,r,a,o,s,l),!0)}("progress-bar",i.type?" bg-"+i.type:"","",i.textType?" text-"+i.textType:"","\n    ",i.animated?" progress-bar-animated":"","",i.striped?" progress-bar-striped":"",""),Lc("width",i.getPercentValue(),"%"),Ai("aria-valuenow",i.getValue())("aria-valuemax",i.max),p(1),_("ngIf",i.showValue))},directives:[si],pipes:[iC],encapsulation:2,changeDetection:0}),t})(),JR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr]]}),t})(),e2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr]]}),t})(),t2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr]]}),t})(),n2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr]]}),t})(),r2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({}),t})();new Yt("live announcer delay",{providedIn:"root",factory:function Q6(){return 100}});let a2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[[Rr]]}),t})();const K6=[pR,gR,mR,yR,wR,VR,NR,BR,GR,QR,ZR,JR,e2,t2,n2,r2,a2];let Z6=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t}),t.\u0275inj=Ti({imports:[K6,pR,gR,mR,yR,wR,VR,NR,BR,GR,QR,ZR,JR,e2,t2,n2,r2,a2]}),t})();function J6(t,n){if(1&t){const e=pe();f(0,"div",1),I("click",function(){B(e);const r=S();return r.switchView(r.navigationEnum.incubator)}),f(1,"button",2),g(2,"Incubator"),h(),D(3,"hr"),h()}if(2&t){const e=S();p(1),_("ngClass",e.selectedNavigation===e.navigationEnum.incubator?"active":"")}}const V0=function(t,n){return{active:t,tutorialActive:n}};let o2=(()=>{class t{constructor(e,i,r,a){this.componentCommunicationService=e,this.lookupService=i,this.globalService=r,this.gameLoopService=a,this.viewChanged=new ot,this.navigationEnum=Ct,this.selectedNavigation=0,this.tutorial3Active=!1,this.tutorial6Active=!1,this.tutorial9Active=!1}ngOnInit(){this.componentCommunicationService.getNewView().subscribe(e=>{this.viewChanged.emit(e),this.selectedNavigation=e}),this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack"),this.tutorialSubscription=this.gameLoopService.gameUpdateEvent.subscribe(e=>{var i,r;this.tutorial3Active=!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId,this.tutorial6Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||6!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(i=this.globalService.globalVar.animals.find(a=>a.type===L.Monkey))||void 0===i?void 0:i.isAvailable)),this.tutorial9Active=!(this.globalService.globalVar.tutorials.tutorialCompleted||9!==this.globalService.globalVar.tutorials.currentTutorialId||!(null===(r=this.globalService.globalVar.animals.find(a=>a.type===L.Hare))||void 0===r?void 0:r.isAvailable)),this.globalService.globalVar.tutorials.tutorialCompleted&&this.tutorialSubscription.unsubscribe()})}switchView(e){this.selectedNavigation===Ct.shop&&this.componentCommunicationService.setShopView(Ct.shop,ua.regular),this.selectedNavigation===Ct.barn&&this.componentCommunicationService.setBarnView(Ct.barn,0),this.selectedNavigation===Ct.animals&&this.componentCommunicationService.setAnimalView(Ct.animals,new At),this.viewChanged.emit(e),this.selectedNavigation=e,this.incubatorAvailable=this.lookupService.isItemUnlocked("duoRace"),this.trainingTrackAvailable=this.lookupService.isItemUnlocked("trainingTrack")}handleIntroTutorial(){!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0)}}return t.\u0275fac=function(e){return new(e||t)(P(cn),P(bi),P(Et),P(An))},t.\u0275cmp=_t({type:t,selectors:[["app-navigation"]],outputs:{viewChanged:"viewChanged"},decls:29,vars:17,consts:[[1,"navigation"],[1,"navSpace","clickableText",3,"click"],[1,"buttonAsText",3,"ngClass"],["class","navSpace clickableText",3,"click",4,"ngIf"],[1,"navSpace","clickableText"],[1,"buttonAsText",3,"ngClass","click"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1),I("click",function(){return i.switchView(i.navigationEnum.barn)}),f(2,"button",2),g(3,"Barns"),h()(),D(4,"hr"),f(5,"div",1),I("click",function(){return i.switchView(i.navigationEnum.raceselection)}),f(6,"button",2),g(7,"Races"),h()(),D(8,"hr"),f(9,"div",1),I("click",function(){return i.switchView(i.navigationEnum.animals)}),f(10,"button",2),g(11,"Animals"),h()(),D(12,"hr"),f(13,"div",1),I("click",function(){return i.switchView(i.navigationEnum.relayTeams)}),f(14,"button",2),g(15,"Relay Teams"),h()(),D(16,"hr"),f(17,"div",1),I("click",function(){return i.switchView(i.navigationEnum.shop)}),f(18,"button",2),g(19,"Shop"),h()(),D(20,"hr"),x(21,J6,4,1,"div",3),f(22,"div",4)(23,"button",5),I("click",function(){return i.switchView(i.navigationEnum.resources)}),g(24,"Resources"),h()(),D(25,"hr"),f(26,"div",1),I("click",function(){return i.switchView(i.navigationEnum.settings)}),f(27,"button",2),g(28,"Settings"),h()()()),2&e&&(p(2),_("ngClass",zo(8,V0,i.selectedNavigation===i.navigationEnum.barn,i.tutorial6Active)),p(4),_("ngClass",zo(11,V0,i.selectedNavigation===i.navigationEnum.raceselection,i.tutorial3Active)),p(4),_("ngClass",zo(14,V0,i.selectedNavigation===i.navigationEnum.animals,i.tutorial9Active)),p(4),_("ngClass",i.selectedNavigation===i.navigationEnum.relayTeams?"active":""),p(4),_("ngClass",i.selectedNavigation===i.navigationEnum.shop?"active":""),p(3),_("ngIf",i.incubatorAvailable),p(2),_("ngClass",i.selectedNavigation===i.navigationEnum.resources?"active":""),p(4),_("ngClass",i.selectedNavigation===i.navigationEnum.settings?"active":""))},directives:[Ji,si],styles:[".navigation[_ngcontent-%COMP%]{height:100%;border-left:1px solid rgba(0,0,0,.1);padding-left:1rem;padding-top:1rem;background-color:var(--background-secondary);color:var(--foreground-default)}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}"]}),t})();function eU(t,n){if(1&t&&D(0,"div",15),2&t){const e=S();_("innerHTML",e.getSanitizedHtml(e.latestVersionChanges),Bt)}}function tU(t,n){if(1&t&&(f(0,"div")(1,"div",24)(2,"span",25),g(3),Lt(4,"number"),h(),f(5,"span"),g(6),h()(),D(7,"br")(8,"div",26),f(9,"span"),D(10,"hr"),h()()),2&t){const e=n.$implicit,i=n.index,r=S(3);p(3),Z("Version ",oi(4,3,r.allVersions[i],"1.2-2"),""),p(3),Z(" ",r.versionControlService.getDateForVersion(r.allVersions[i]),""),p(2),_("innerHTML",r.getSanitizedHtml(e),Bt)}}function iU(t,n){if(1&t&&(f(0,"div")(1,"div",21)(2,"div",22),x(3,tU,11,6,"div",23),h()()()),2&t){const e=S(2);p(3),_("ngForOf",e.changeLog)}}function nU(t,n){if(1&t){const e=pe();f(0,"div",16)(1,"div",17)(2,"h4",18),g(3,"Change Log"),h(),f(4,"button",19),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),x(6,iU,4,1,"div",20),h()}if(2&t){const e=S();p(6),_("ngIf",e.changeLog.length>0)}}let rU=(()=>{class t{constructor(e,i,r,a,o,s,l){this.lookupService=e,this.gameLoopService=i,this.globalService=r,this.componentCommunicationService=a,this.versionControlService=o,this.modalService=s,this.sanitizer=l}ngOnInit(){this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.latestVersionChanges=this.versionControlService.getLatestChanges(),this.changeLog=this.versionControlService.getAllChanges(),this.allVersions=this.versionControlService.gameVersions,this.gameLoopService.gameUpdateEvent.subscribe(e=>{this.globalService.globalVar.userIsRacing||(this.coinCount=this.lookupService.getCoins(),this.medalCount=this.lookupService.getMedals())})}getSanitizedHtml(e){return this.sanitizer.sanitize(ri.HTML,this.sanitizer.bypassSecurityTrustHtml(e))}changeView(e){this.componentCommunicationService.setNewView(e)}openChangeLog(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}}return t.\u0275fac=function(e){return new(e||t)(P(bi),P(An),P(Et),P(cn),P(s0),P(To),P(Wo))},t.\u0275cmp=_t({type:t,selectors:[["app-header"]],decls:26,vars:8,consts:[[1,"headerView"],[1,"gridContainer"],[1,"nameArea","keyword"],[1,"name"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"version","versionMargin","clickableText",3,"ngbPopover","click"],[1,"coins","keyword"],[1,"medals","keyword"],[1,"menu","keyword"],["ngbDropdown","",1,"d-inline-block","customDropdown"],["menuDropdown","ngbDropdown"],["type","button","id","menuDropdown","ngbDropdownToggle","",1,"btn","dropdown"],["ngbDropdownMenu","","aria-labelledby","menuDropdown",1,"dropdownItems"],[3,"viewChanged","click"],["latestVersionChangesContent",""],["content",""],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[4,"ngIf"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],[1,"flexDiv"],[1,"s4Heading"],[3,"innerHTML"]],template:function(e,i){if(1&e){const r=pe();f(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),g(4," Cultura "),h(),f(5,"span",4),I("click",function(){B(r);const o=lt(25);return i.openChangeLog(o)}),g(6),h()(),f(7,"div",5)(8,"span"),g(9),Lt(10,"number"),h()(),f(11,"div",6)(12,"span"),g(13),Lt(14,"number"),h()(),f(15,"div",7)(16,"div",8,9)(18,"button",10),g(19,"Menu"),h(),f(20,"div",11)(21,"app-navigation",12),I("viewChanged",function(o){return i.changeView(o)})("click",function(){return B(r),lt(17).close()}),h()()()()(),x(22,eU,1,1,"ng-template",null,13,ut),x(24,nU,7,1,"ng-template",null,14,ut),h()}if(2&e){const r=lt(23);p(5),_("ngbPopover",r),p(1),Z(" v",i.version," "),p(3),Z("Coins: ",ih(10,4,i.coinCount),""),p(4),Z("Medals: ",ih(14,6,i.medalCount),"")}},directives:[Wr,Ql,k0,Af,o2,si,on],pipes:[bo],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 10% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name . coins ." ". name . medals ."}.nameArea[_ngcontent-%COMP%]{grid-area:name;justify-self:stretch}.name[_ngcontent-%COMP%]{font-size:2rem}.coins[_ngcontent-%COMP%]{grid-area:coins;justify-self:stretch}.medals[_ngcontent-%COMP%]{grid-area:medals;justify-self:stretch}.versionMargin[_ngcontent-%COMP%]{margin-left:.5rem}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}.dropdownItems[_ngcontent-%COMP%]{background-color:var(--background-secondary);color:var(--foreground-default)}.menu[_ngcontent-%COMP%]{display:none}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre-line}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.flexDiv[_ngcontent-%COMP%]{display:flex;justify-content:space-between}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 1fr 1fr 15% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". name coins menu ." ". name medals menu ."}.menu[_ngcontent-%COMP%]{display:block;grid-area:menu;justify-self:stretch}.customDropdown[_ngcontent-%COMP%]{width:100%;text-align:center}}']}),t})();function aU(t,n){if(1&t&&(f(0,"h6",9)(1,"span"),g(2),h(),D(3,"br"),f(4,"span"),g(5),h()()),2&t){const e=S(2);_("ngClass",e.colorConditional),p(2),nt(e.associatedAnimalName),p(3),nt(e.associatedAnimalType)}}function oU(t,n){if(1&t&&(f(0,"h6",9)(1,"span"),g(2),h()()),2&t){const e=S(2);_("ngClass",e.colorConditional),p(2),nt(e.associatedAnimalType)}}function sU(t,n){1&t&&(f(0,"div")(1,"em"),g(2,"Auto Breed "),f(3,"strong"),g(4,"ON"),h()()())}function lU(t,n){1&t&&(f(0,"div")(1,"em"),g(2,"Ready to Breed"),h()())}const cU=function(t){return{floatingProgressTextAnimation:t}};function uU(t,n){if(1&t&&(f(0,"div",4)(1,"span"),g(2),h(),x(3,aU,6,3,"h6",5),x(4,oU,3,2,"h6",5),D(5,"br"),f(6,"p"),D(7,"ngb-progressbar",6),h(),f(8,"div",7),g(9),h(),D(10,"br"),x(11,sU,5,0,"div",8),x(12,lU,3,0,"div",8),h()),2&t){const e=S();p(2),nt(e.barnName),p(1),_("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),_("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(3),_("value",e.trainingProgressBarPercent),p(1),_("ngClass",pn(8,cU,e.showTrainingAnimation)),p(1),Z(" ",e.trainingCompleteText," "),p(2),_("ngIf",e.autoBreedActive),p(1),_("ngIf",!e.autoBreedActive&&e.readyToBreed)}}function dU(t,n){1&t&&(f(0,"h6",10)(1,"span"),g(2,"Unassigned"),h(),D(3,"br"),f(4,"em"),g(5,"Click to assign animal"),h()())}function hU(t,n){1&t&&(f(0,"h6",11)(1,"span"),g(2,"Locked"),h(),D(3,"br"),f(4,"em"),g(5,"Click to view status"),h()())}let fU=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.utilityService=a,this.trainingCompleteText="",this.showTrainingAnimation=!1,this.selectedBarn=new ot}ngOnInit(){if(this.barnNumber>0&&this.barnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(r=>r.barnNumber===this.barnNumber);if(void 0!==e){this.barn=e,this.barnName=this.lookupService.getBarnName(e);var i=this.globalService.globalVar.animals.find(r=>r.associatedBarnNumber==this.barnNumber);null!=i?(this.isOccupied=!0,this.associatedAnimalName=i.name,this.associatedAnimalType=L[i.type],this.associatedAnimal=i,this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()}):this.isOccupied=!1,this.isLocked=e.isLocked}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");this.isLocked||(this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.barnNumber);if(null!=a){if(null==a.currentTraining)return void(this.trainingProgressBarPercent=0);a.currentTraining.timeTrained<this.previousTrainedAmount&&(this.trainingCompleteText=this.lookupService.getTrainingProgressionAnimationText(a.currentTraining),this.showTrainingAnimation=!0,setTimeout(()=>{this.showTrainingAnimation=!1,this.trainingCompleteText=""},3e3)),this.readyToBreed=a.breedGaugeXp>=a.breedGaugeMax&&this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank)>=10,this.autoBreedActive=a.autoBreedActive,this.previousTrainedAmount=a.currentTraining.timeTrained,this.trainingProgressBarPercent=a.currentTraining.timeTrained/a.currentTraining.timeToComplete*100}}))}ngOnDestroy(){this.previousTrainedAmount=0,null!=this.subscription&&this.subscription.unsubscribe()}onClick(){this.selectedBarn.emit(this.barnNumber)}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(An),P(bi),P(kn))},t.\u0275cmp=_t({type:t,selectors:[["app-barn"]],hostBindings:function(e,i){1&e&&I("click",function(){return i.onClick()})},inputs:{barnNumber:"barnNumber"},outputs:{selectedBarn:"selectedBarn"},decls:4,vars:3,consts:[[1,"barn","clickableText"],["class","unlocked",4,"ngIf"],["class","unassigned",4,"ngIf"],["class","locked",4,"ngIf"],[1,"unlocked"],["class","keyword",3,"ngClass",4,"ngIf"],["type","success",3,"value"],[1,"progressBar","floatingProgressText","progressBarColor","keyword",3,"ngClass"],[4,"ngIf"],[1,"keyword",3,"ngClass"],[1,"unassigned"],[1,"locked"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,uU,13,10,"div",1),x(2,dU,6,0,"h6",2),x(3,hU,6,0,"h6",3),h()),2&e&&(p(1),_("ngIf",i.isOccupied),p(1),_("ngIf",!i.isOccupied&&!i.isLocked),p(1),_("ngIf",i.isLocked))},directives:[si,Ji,I0],styles:[".barn[_ngcontent-%COMP%]{text-align:center;width:45%;margin:auto;display:flex;justify-content:center;align-content:center;flex-direction:column;height:100%}.floatingProgressText[_ngcontent-%COMP%]{float:right;position:relative;text-align:right;top:-2em}.floatingProgressTextAnimation[_ngcontent-%COMP%]{animation-name:floatingProgressTextAnimation;animation-duration:3s;animation-iteration-count:1;animation-timing-function:ease-in-out}@keyframes floatingProgressTextAnimation{0%{transform:translate(0)}to{transform:translateY(-30px);opacity:0}}@media (max-width: 800px){.barn[_ngcontent-%COMP%]{width:75%}}"]}),t})(),pU=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_t({type:t,selectors:[["app-training-option"]],inputs:{trainingOption:"trainingOption"},decls:7,vars:4,consts:[[1,"training"],[1,"trainingName","keyword"],[1,"trainingStats"],[1,"trainingTimeToComplete"]],template:function(e,i){1&e&&(f(0,"h6",0)(1,"p",1),g(2),h(),f(3,"p",2),g(4),h(),f(5,"p",3),g(6),h()()),2&e&&(p(2),nt(i.trainingOption.trainingName),p(2),nt(i.trainingOption.getStatGainDescription()),p(2),rn("",i.trainingOption.getFacilitySize()," - ",i.trainingOption.timeToComplete," sec "))},styles:[".training[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const gU=function(t){return{activeTrainingOption:t}};function vU(t,n){if(1&t){const e=pe();f(0,"td",4)(1,"div",5),I("click",function(){const a=B(e).$implicit;return S(2).selectTrainingOption(a)}),D(2,"app-training-option",6),h()()}if(2&t){const e=n.$implicit;p(1),_("ngClass",pn(2,gU,e.isSelected)),p(1),_("trainingOption",e)}}function mU(t,n){if(1&t&&(f(0,"tr"),x(1,vU,3,4,"td",3),h()),2&t){const e=n.$implicit;p(1),_("ngForOf",e)}}let bU=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrainingOption=new ot}ngOnInit(){this.setupDisplayTrainings()}setupDisplayTrainings(){this.trainingsCells=[],this.trainingsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTrainingOptions.length;i++)this.trainingsCells.push(this.availableTrainingOptions[i-1]),i%e==0&&(this.trainingsRows.push(this.trainingsCells),this.trainingsCells=[]);0!==this.trainingsCells.length&&this.trainingsRows.push(this.trainingsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrainingOption(e){this.availableTrainingOptions.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrainingOption.emit(e)}ngOnChanges(e){this.availableTrainingOptions=e.availableTrainingOptions.currentValue,this.setupDisplayTrainings()}}return t.\u0275fac=function(e){return new(e||t)(P(Et))},t.\u0275cmp=_t({type:t,selectors:[["app-training-list"]],hostBindings:function(e,i){1&e&&I("resize",function(a){return i.onResize(a)},!1,uo)},inputs:{availableTrainingOptions:"availableTrainingOptions"},outputs:{selectedTrainingOption:"selectedTrainingOption"},features:[zn],decls:4,vars:1,consts:[[1,"trainingsView"],[1,"trainings"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trainingOption"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,mU,2,1,"tr",2),h()()()),2&e&&(p(3),_("ngForOf",i.trainingsRows))},directives:[on,Ji,pU],styles:[".trainingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.trainings[_ngcontent-%COMP%]{margin:.5rem}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function _U(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=S(2);p(1),nt(e.selectedAnimal.name)}}function yU(t,n){if(1&t&&(f(0,"div"),g(1),h()),2&t){const e=S(2);p(1),Z(" Breed Level ",e.breedLevel," ")}}function wU(t,n){if(1&t&&(f(0,"h6",3),x(1,_U,2,1,"span",2),D(2,"br"),f(3,"span"),g(4),h(),x(5,yU,2,1,"div",2),h()),2&t){const e=S();p(1),_("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),nt(e.selectedAnimal.getAnimalType()),p(1),_("ngIf",e.isAnimalDetailView)}}function SU(t,n){if(1&t&&(f(0,"div"),g(1),h()),2&t){const e=S(2);p(1),Z(" Breed Level ",e.breedLevel," ")}}function CU(t,n){if(1&t&&(f(0,"h6",3)(1,"span"),g(2),h(),x(3,SU,2,1,"div",2),h()),2&t){const e=S();p(2),nt(e.selectedAnimal.getAnimalType()),p(1),_("ngIf",e.isAnimalDetailView)}}function TU(t,n){if(1&t&&(f(0,"div"),D(1,"br")(2,"br"),f(3,"h6",3)(4,"em"),g(5),h()()()),2&t){const e=S();p(5),rn("",e.trainingTrackRewardsRemaining," / ",e.trainingTrackTotalRewards," rewards remaining")}}let DU=(()=>{class t{constructor(){this.isTrainingTrackView=!1,this.isAnimalDetailView=!1,this.trainingTrackRewardsRemaining=0,this.trainingTrackTotalRewards=0,this.breedLevel=0}ngOnInit(){this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.isTrainingTrackView&&(this.trainingTrackRewardsRemaining=this.selectedAnimal.allTrainingTracks.getTotalRewardsRemaining(),this.trainingTrackTotalRewards=this.selectedAnimal.allTrainingTracks.getTotalRewardCount()),this.breedLevel=this.selectedAnimal.breedLevel}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_t({type:t,selectors:[["app-animal"]],inputs:{selectedAnimal:"selectedAnimal",isTrainingTrackView:"isTrainingTrackView",isAnimalDetailView:"isAnimalDetailView"},decls:8,vars:5,consts:[[1,"keyword","animal",3,"ngClass"],["class","keyword",4,"ngIf"],[4,"ngIf"],[1,"keyword"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,wU,6,3,"h6",1),x(2,CU,4,2,"h6",1),D(3,"br")(4,"br"),f(5,"span"),g(6),h(),x(7,TU,6,2,"div",2),h()),2&e&&(_("ngClass",i.colorConditional),p(1),_("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),_("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(4),nt(i.selectedAnimal.getRaceCourseType()),p(1),_("ngIf",i.isTrainingTrackView))},directives:[Ji,si],styles:[".animal[_ngcontent-%COMP%]{margin:.5rem}"]}),t})();function RU(t,n){if(1&t){const e=pe();f(0,"td")(1,"div",3),I("click",function(){const a=B(e).$implicit;return S(2).selectAnimal(a)}),D(2,"app-animal",4),h()()}if(2&t){const e=n.$implicit,i=S(2);p(2),_("selectedAnimal",e)("isTrainingTrackView",i.isTrainingTrackView)("isAnimalDetailView",i.isAnimalDetailView)}}function xU(t,n){if(1&t&&(f(0,"tr"),x(1,RU,3,3,"td",2),h()),2&t){const e=n.$implicit;p(1),_("ngForOf",e)}}let Ef=(()=>{class t{constructor(e){this.globalService=e,this.isTrainingTrackView=!1,this.isAnimalDetailView=!1,this.selectedAnimal=new ot}ngOnInit(){this.setupDisplayAnimals()}setupDisplayAnimals(){this.animalCells=[],this.animalRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableAnimals.length;i++)this.animalCells.push(this.availableAnimals[i-1]),i%e==0&&(this.animalRows.push(this.animalCells),this.animalCells=[]);0!==this.animalCells.length&&this.animalRows.push(this.animalCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectAnimal(e){this.selectedAnimal.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(P(Et))},t.\u0275cmp=_t({type:t,selectors:[["app-animal-list"]],hostBindings:function(e,i){1&e&&I("resize",function(a){return i.onResize(a)},!1,uo)},inputs:{availableAnimals:"availableAnimals",isTrainingTrackView:"isTrainingTrackView",isAnimalDetailView:"isAnimalDetailView"},outputs:{selectedAnimal:"selectedAnimal"},decls:4,vars:1,consts:[[1,"animalsView"],[1,"animals"],[4,"ngFor","ngForOf"],[1,"clickableText",3,"click"],[3,"selectedAnimal","isTrainingTrackView","isAnimalDetailView"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,xU,2,1,"tr",2),h()()()),2&e&&(p(3),_("ngForOf",i.animalRows))},directives:[on,DU],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();const MU=["specializationModal"];function kU(t,n){if(1&t){const e=pe();f(0,"div")(1,"span",38),I("click",function(){B(e);const r=S(2),a=lt(16);return r.openBarnUpgradeModal(a)}),g(2),h(),D(3,"br")(4,"br"),f(5,"span",39)(6,"button",40),I("click",function(){return B(e),S(2).upgradeBarn()}),g(7),h()()()}if(2&t){const e=S(2),i=lt(4),r=lt(6);p(1),_("ngbPopover",i),p(1),Z("Barn Level ",e.barn.barnUpgrades.barnLevel,""),p(3),_("ngbPopover",r),p(1),_("disabled",!e.canUpgrade),p(1),nt(e.upgradeText)}}function AU(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=S(3);p(1),nt(e.associatedAnimal.name)}}function PU(t,n){if(1&t){const e=pe();f(0,"button",41),I("click",function(){return B(e),S(2).goToAnimal()}),x(1,AU,2,1,"span",13),D(2,"br"),f(3,"span"),g(4),h()()}if(2&t){const e=S(2);_("ngClass",e.colorConditional),p(1),_("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(3),nt(e.associatedAnimal.getAnimalType())}}function EU(t,n){if(1&t){const e=pe();f(0,"button",42),I("click",function(){return B(e),S(2).goToAnimal()}),f(1,"span"),g(2),h()()}if(2&t){const e=S(2);_("ngClass",e.colorConditional),p(2),nt(e.associatedAnimal.getAnimalType())}}function IU(t,n){if(1&t){const e=pe();f(0,"span",39)(1,"button",43),I("click",function(){return B(e),S(2).upgradeBarnSize()}),g(2,"Build"),h()()}if(2&t){const e=S(2);_("ngbPopover",lt(8)),p(1),_("disabled",!e.canBuild)}}function VU(t,n){if(1&t&&(f(0,"div",39)(1,"span",44),g(2),h(),D(3,"br"),f(4,"span")(5,"em"),g(6),Lt(7,"number"),h()()()),2&t){const e=S(2);_("ngbPopover",lt(10)),p(2),Z("",e.existingTraining.trainingName," "),p(4),Z("(",oi(7,3,e.existingTraining.trainingTimeRemaining/60,"1.0-0")," min remaining)")}}function OU(t,n){1&t&&(f(0,"div",39)(1,"span"),g(2,"No Training Assigned"),h()()),2&t&&(S(2),_("ngbPopover",lt(12)))}function NU(t,n){if(1&t){const e=pe();f(0,"div")(1,"span")(2,"button",12),I("click",function(){return B(e),S(2).goToCoaching()}),g(3,"Coach"),h()()()}}function FU(t,n){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"p",45),D(3,"ngb-progressbar",46),f(4,"span",47),g(5),Lt(6,"number"),h()(),D(7,"br"),h()),2&t){const e=S(2);p(3),_("value",e.trainingProgressBarPercent),p(2),Z("",oi(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}function BU(t,n){if(1&t){const e=pe();f(0,"app-training-list",48),I("selectedTrainingOption",function(r){return B(e),S(2).selectNewTraining(r)}),h()}2&t&&_("availableTrainingOptions",S(2).availableTrainings)}function LU(t,n){1&t&&(f(0,"div",49),g(1," This animal is currently busy and cannot train. "),h())}const UU=function(t){return{sizeSpacing:t}};function HU(t,n){if(1&t){const e=pe();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"button",12),I("click",function(){return B(e),S().unassignAnimal()}),g(5,"Unassign"),h(),D(6,"br")(7,"br"),x(8,kU,8,5,"div",13),h(),f(9,"div",14)(10,"span"),g(11),h(),D(12,"br"),x(13,PU,5,3,"button",15),x(14,EU,3,2,"button",16),f(15,"div")(16,"span",17),g(17),h(),x(18,IU,3,2,"span",18),h(),D(19,"hr"),x(20,VU,8,6,"div",18),x(21,OU,3,1,"div",18),h(),f(22,"div",19)(23,"button",12),I("click",function(){return B(e),S().returnToBarnView()}),g(24,"Back"),h(),D(25,"br")(26,"br")(27,"br")(28,"br"),x(29,NU,4,0,"div",13),h()(),D(30,"hr"),x(31,FU,8,5,"div",13),D(32,"br"),f(33,"div",20)(34,"span",21),I("click",function(){return B(e),S().resetFilters()}),g(35,"Change Training"),h(),D(36,"br"),f(37,"span",22)(38,"em"),g(39,"Click an option below to start training."),h()()(),D(40,"br"),f(41,"div",23)(42,"div",24)(43,"button",25),I("click",function(){return B(e),S().toggleFacilityFilter("Small")}),g(44,"Small "),h(),f(45,"button",26),I("click",function(){return B(e),S().toggleFacilityFilter("Medium")}),g(46,"Medium "),h(),f(47,"button",27),I("click",function(){return B(e),S().toggleFacilityFilter("Large")}),g(48,"Large "),h()(),f(49,"button",28)(50,"span",12),I("click",function(){return B(e),S().resetFilters()}),g(51,"Reset Filters"),h()(),f(52,"div",29)(53,"button",30),I("click",function(){return B(e),S().toggleStatFilter("Speed")}),g(54,"SPD "),h(),f(55,"button",31),I("click",function(){return B(e),S().toggleStatFilter("Acceleration")}),g(56,"ACC "),h(),f(57,"button",32),I("click",function(){return B(e),S().toggleStatFilter("Endurance")}),g(58,"END "),h(),f(59,"button",33),I("click",function(){return B(e),S().toggleStatFilter("Power")}),g(60,"PWR "),h(),f(61,"button",34),I("click",function(){return B(e),S().toggleStatFilter("Focus")}),g(62,"FCS "),h(),f(63,"button",35),I("click",function(){return B(e),S().toggleStatFilter("Adaptability")}),g(64,"ADP"),h()()(),D(65,"br"),f(66,"div",17),x(67,BU,1,1,"app-training-list",36),x(68,LU,2,0,"div",37),h()()()}if(2&t){const e=S();p(8),_("ngIf",e.barnSpecializationsUnlocked),p(3),Z(" ",e.barnName,""),p(2),_("ngIf",e.associatedAnimal.name!==e.associatedAnimal.getAnimalType()),p(1),_("ngIf",e.associatedAnimal.name===e.associatedAnimal.getAnimalType()),p(2),_("ngClass",pn(32,UU,"Large"!==e.sizeValue)),p(1),Z("",e.sizeValue," "),p(1),_("ngIf","Large"!==e.sizeValue),p(2),_("ngIf",null!=e.existingTraining),p(1),_("ngIf",null==e.existingTraining),p(8),_("ngIf",e.coachingUnlocked),p(2),_("ngIf",null!=e.existingTraining),p(12),Mt("filterActive",e.filterSmall),p(2),Mt("filterActive",e.filterMedium),p(2),Mt("filterActive",e.filterLarge),p(6),Mt("filterActive",e.filterSpeed),p(2),Mt("filterActive",e.filterAcceleration),p(2),Mt("filterActive",e.filterEndurance),p(2),Mt("filterActive",e.filterPower),p(2),Mt("filterActive",e.filterFocus),p(2),Mt("filterActive",e.filterAdaptability),p(3),_("ngClass",e.tutorialActive?"tutorialActive":""),p(1),_("ngIf",e.associatedAnimal.canTrain),p(1),_("ngIf",!e.associatedAnimal.canTrain)}}function GU(t,n){if(1&t){const e=pe();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",14)(4,"span"),g(5),h(),D(6,"br"),f(7,"span"),g(8,"Unassigned"),h()(),f(9,"div",19)(10,"button",12),I("click",function(){return B(e),S().returnToBarnView()}),g(11,"Back"),h()()(),D(12,"hr")(13,"br"),f(14,"span"),g(15,"Assign Animal"),h(),D(16,"br")(17,"br"),f(18,"app-animal-list",50),I("selectedAnimal",function(r){return B(e),S().assignAnimal(r)}),h()()()}if(2&t){const e=S();p(5),Z("Barn ",e.selectedBarnNumber,""),p(13),_("availableAnimals",e.availableAnimals)}}function zU(t,n){if(1&t){const e=pe();f(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",14)(4,"span"),g(5),h(),D(6,"br"),f(7,"span"),g(8,"Locked"),h()(),f(9,"div",19)(10,"button",12),I("click",function(){return B(e),S().returnToBarnView()}),g(11,"Back"),h()()(),D(12,"hr")(13,"br"),f(14,"div",51)(15,"span"),g(16,"Purchase Barn"),h(),D(17,"br")(18,"br"),f(19,"span",52),g(20),h(),D(21,"br"),f(22,"button",53),I("click",function(){return B(e),S().purchaseBarn()}),g(23,"Buy"),h()()()()}if(2&t){const e=S();p(5),Z("Barn ",e.selectedBarnNumber,""),p(15),Z("",e.barn.purchasePrice," Coins"),p(2),_("disabled",!e.canPurchaseBarn())}}function jU(t,n){if(1&t&&(f(0,"div",55),D(1,"div",56),h()),2&t){const e=S(2);p(1),_("innerHTML",e.totalBarnStatsPopover,Bt)}}function $U(t,n){1&t&&x(0,jU,2,1,"div",54),2&t&&_("ngIf",""!==S().totalBarnStatsPopover)}function WU(t,n){if(1&t&&(f(0,"div",55),g(1),h()),2&t){const e=S(2);p(1),Z(" ",e.upgradeBarnPopover," ")}}function qU(t,n){1&t&&x(0,WU,2,1,"div",54),2&t&&_("ngIf",""!==S().upgradeBarnPopover)}function XU(t,n){if(1&t&&(f(0,"div",55),g(1),h()),2&t){const e=S(2);p(1),Z(" ",e.buildBiggerBarnPopover," ")}}function YU(t,n){1&t&&x(0,XU,2,1,"div",54),2&t&&_("ngIf",""!==S().buildBiggerBarnPopover)}function QU(t,n){1&t&&D(0,"div",58),2&t&&_("innerHTML",S(2).currentTrainingPopover,Bt)}function KU(t,n){1&t&&x(0,QU,1,1,"div",57),2&t&&_("ngIf",""!==S().currentTrainingPopover)}function ZU(t,n){1&t&&D(0,"div",58),2&t&&_("innerHTML",S(2).currentTrainingPopover,Bt)}function JU(t,n){1&t&&x(0,ZU,1,1,"div",57),2&t&&_("ngIf",""!==S().currentTrainingPopover)}const s2=function(t){return{selectedSpecialization:t}};function eH(t,n){if(1&t){const e=pe();f(0,"span",69),I("click",function(){const a=B(e).$implicit;return S(3).filterSpecialization(a)}),g(1),h()}if(2&t){const e=n.$implicit,i=S(3);_("ngClass",pn(2,s2,i.selectedSpecialization===e)),p(1),Z(" ",e.trim()," ")}}function tH(t,n){if(1&t&&(f(0,"div",67),x(1,eH,2,4,"span",68),h()),2&t){const e=S(2);p(1),_("ngForOf",e.specializationOptions)}}function iH(t,n){if(1&t&&(f(0,"div"),g(1),D(2,"br")(3,"br"),f(4,"strong"),g(5),h()()),2&t){const e=S(2);p(1),Z(" ",e.specializationDescription," "),p(4),Z(" ",e.inDepthSpecializationDescription," ")}}function nH(t,n){if(1&t){const e=pe();f(0,"div",59)(1,"form")(2,"div",60)(3,"h4",61),g(4,"Choose Barn Specialization"),h(),f(5,"button",62),I("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div",63),x(8,tH,2,1,"div",64),D(9,"hr"),x(10,iH,6,2,"div",13),h(),f(11,"div",65)(12,"button",66),I("click",function(){return B(e),S().selectSpecialization()}),g(13,"Select"),h()()()()}if(2&t){const e=S();p(8),_("ngIf",e.specializationOptions.length>0),p(2),_("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription)}}function rH(t,n){if(1&t){const e=pe();f(0,"span",69),I("click",function(){const a=B(e).$implicit;return S(4).filterSpecialization(a)}),g(1),h()}if(2&t){const e=n.$implicit,i=S(4);_("ngClass",pn(2,s2,i.selectedSpecialization===e)),p(1),Z(" ",e.trim()," ")}}function aH(t,n){if(1&t&&(f(0,"div",67),x(1,rH,2,4,"span",68),h()),2&t){const e=S(3);p(1),_("ngForOf",e.specializationOptions)}}function oH(t,n){if(1&t&&(f(0,"div"),g(1),D(2,"br")(3,"br"),f(4,"strong"),g(5),h(),D(6,"br")(7,"br"),h()),2&t){const e=S(3);p(1),Z(" ",e.specializationDescription," "),p(4),Z(" ",e.inDepthSpecializationDescription," ")}}function sH(t,n){if(1&t){const e=pe();f(0,"div",72)(1,"div",73)(2,"span",74),g(3,"Reset Barn Specialization"),h(),D(4,"br"),f(5,"em"),g(6," Tear down your barn to build up something new. Each barn can be reset as many times as you want, but "),f(7,"strong"),g(8,"it only retains 80% of its current Barn Level after being reset."),h()()(),D(9,"br"),f(10,"div")(11,"div",75),x(12,aH,2,1,"div",64),D(13,"hr"),x(14,oH,8,2,"div",13),h(),f(15,"div",76)(16,"span"),g(17),h(),f(18,"button",66),I("click",function(){return B(e),S(2).resetSpecialization()}),g(19,"Reset Specialization"),h()()()()}if(2&t){const e=S(2);p(12),_("ngIf",e.specializationOptions.length>0),p(2),_("ngIf",""!==e.specializationDescription&&void 0!==e.specializationDescription),p(3),Z("New Barn Level will be ",e.postResetBarnUpgradeLevel,"")}}function lH(t,n){if(1&t){const e=pe();f(0,"div",59)(1,"div",60)(2,"h4",61),g(3,"Barn Upgrade Info"),h(),f(4,"button",62),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",63)(7,"div",70),D(8,"div",56)(9,"br"),g(10),D(11,"br")(12,"hr"),x(13,sH,20,3,"div",71),h()()()}if(2&t){const e=S();p(8),_("innerHTML",e.totalBarnStatsPopover,Bt),p(2),Z(" ",e.upgradeBarnPopover," "),p(3),_("ngIf",e.barn.barnUpgrades.specializationLevel>0)}}let cH=(()=>{class t{constructor(e,i,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=i,this.modalService=r,this.lookupService=a,this.componentCommunicationService=o,this.specializationService=s,this.tutorialService=l,this.utilityService=c,this.returnToBarnEmitter=new ot,this.isCoachingEmitter=new ot,this.canUpgrade=!1,this.canBuild=!1,this.barnSpecializationsUnlocked=!1,this.coachingUnlocked=!1,this.tutorialActive=!1,this.postResetBarnUpgradeLevel=0,this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1}keyEvent(e){var i=this.lookupService.getAvailableBarns().filter(s=>void 0!==s),r=i.findIndex(s=>this.selectedBarnNumber===s.barnNumber);if("ArrowLeft"===e.key)r>-1&&(null!=this.subscription&&this.subscription.unsubscribe(),(a=r-1)<0&&(a=i.length-1),this.componentCommunicationService.setBarnView(Ct.barn,(o=i[a]).barnNumber),this.resetSelectedBarnInfo(o));else if("ArrowRight"===e.key&&r>-1){var a,o;null!=this.subscription&&this.subscription.unsubscribe(),(a=r+1)===i.length&&(a=0),this.componentCommunicationService.setBarnView(Ct.barn,(o=i[a]).barnNumber),this.resetSelectedBarnInfo(o)}}ngOnInit(){if(this.handleTutorial(),this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var e=this.globalService.globalVar.barns.find(i=>i.barnNumber===this.selectedBarnNumber);null!=e&&this.resetSelectedBarnInfo(e)}}selectNewTraining(e){var i=this.globalService.globalVar.animals.find(s=>s.associatedBarnNumber===this.selectedBarnNumber);if(null!=i){var r=Object.assign({},e),a="smallBarnTrainingTimeModifier";this.barn.size===vt.Medium?a="mediumBarnTrainingTimeModifier":this.barn.size===vt.Large&&(a="largeBarnTrainingTimeModifier");var o=this.globalService.globalVar.modifiers.find(s=>s.text===a);if(null!=o&&(r.trainingTimeRemaining=o.value),null!=i.currentTraining){if(this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching"))return void(i.queuedTraining=r);i.currentTraining.timeTrained=0}i.currentTraining=r,this.existingTraining=r,!this.globalService.globalVar.tutorials.tutorialCompleted&&2===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.componentCommunicationService.setAnimalView(Ct.animals,this.associatedAnimal)),!this.globalService.globalVar.tutorials.tutorialCompleted&&8===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1)}}GetAvailableTrainingOptions(e){var i=[];if(null==this.globalService.globalVar||null==this.globalService.globalVar.trainingOptions||0===this.globalService.globalVar.trainingOptions.length)return i;i=this.globalService.globalVar.trainingOptions.filter(o=>o.isAvailable&&(o.facilitySize===vt.Small||o.facilitySize===vt.Medium&&(this.barn.size===vt.Medium||this.barn.size===vt.Large)||o.facilitySize===vt.Large&&this.barn.size===vt.Large));var r=[];i.forEach(o=>{var s=o.makeCopy(o),l=this.lookupService.getTrainingTimeReductionFromTrainingFacility(this.barn.barnUpgrades),c=this.lookupService.getResourceByName("Stopwatch");null==c&&(c=0),s.timeToComplete*=1-(.05*c+l+e.miscStats.trainingTimeReduction/100),s.timeToComplete=Math.round(100*(s.timeToComplete+Number.EPSILON))/100,e.raceCourseType===W.Mountain&&(s.trainingType===Fe.ShortTrackRunning&&(s.trainingName="Short Track Climbing"),s.trainingType===Fe.TrailRunning&&(s.trainingName="Trail Climbing"),s.trainingType===Fe.LongTrackRunning&&(s.trainingName="Long Track Climbing")),e.raceCourseType===W.Ocean&&(s.trainingType===Fe.ShortTrackRunning&&(s.trainingName="Short Track Swimming"),s.trainingType===Fe.TrailRunning&&(s.trainingName="Lane Swimming"),s.trainingType===Fe.SmallWagonTow&&(s.trainingName="Small Canoe Tow"),s.trainingType===Fe.UphillRun&&(s.trainingName="Upstream Swim"),s.trainingType===Fe.LongTrackRunning&&(s.trainingName="Long Track Swimming"),s.trainingType===Fe.VehicleTow&&(s.trainingName="Boat Tow"),s.trainingType===Fe.GreenwayHike&&(s.trainingName="Canal Adventure")),s.affectedStatRatios.topSpeed*=this.barn.barnUpgrades.upgradedStatGain.topSpeed,s.affectedStatRatios.acceleration*=this.barn.barnUpgrades.upgradedStatGain.acceleration,s.affectedStatRatios.endurance*=this.barn.barnUpgrades.upgradedStatGain.endurance,s.affectedStatRatios.power*=this.barn.barnUpgrades.upgradedStatGain.power,s.affectedStatRatios.focus*=this.barn.barnUpgrades.upgradedStatGain.focus,s.affectedStatRatios.adaptability*=this.barn.barnUpgrades.upgradedStatGain.adaptability;var u=1,d=1,v=1,m=1,b=1,y=1;e.talentTree.talentTreeType===yt.sprint&&(y=1+e.talentTree.column1Row1Points/100,d=1+e.talentTree.column2Row1Points/100,m=1+e.talentTree.column3Row1Points/100),e.talentTree.talentTreeType===yt.longDistance&&(b=1+e.talentTree.column1Row1Points/100,u=1+e.talentTree.column2Row1Points/100,v=1+e.talentTree.column3Row1Points/100),s.affectedStatRatios.topSpeed*=u,s.affectedStatRatios.acceleration*=d,s.affectedStatRatios.endurance*=v,s.affectedStatRatios.power*=m,s.affectedStatRatios.focus*=b,s.affectedStatRatios.adaptability*=y,s.affectedStatRatios.topSpeed=Math.round(100*(s.affectedStatRatios.topSpeed+Number.EPSILON))/100,s.affectedStatRatios.acceleration=Math.round(100*(s.affectedStatRatios.acceleration+Number.EPSILON))/100,s.affectedStatRatios.endurance=Math.round(100*(s.affectedStatRatios.endurance+Number.EPSILON))/100,s.affectedStatRatios.power=Math.round(100*(s.affectedStatRatios.power+Number.EPSILON))/100,s.affectedStatRatios.focus=Math.round(100*(s.affectedStatRatios.focus+Number.EPSILON))/100,s.affectedStatRatios.adaptability=Math.round(100*(s.affectedStatRatios.adaptability+Number.EPSILON))/100,r.push(s)}),(this.filterAcceleration||this.filterAdaptability||this.filterEndurance||this.filterFocus||this.filterPower||this.filterSpeed||this.filterSmall||this.filterMedium||this.filterLarge)&&(r=r.filter(o=>(!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterAcceleration&&o.affectedStatRatios.acceleration>0||this.filterAdaptability&&o.affectedStatRatios.adaptability>0||this.filterEndurance&&o.affectedStatRatios.endurance>0||this.filterFocus&&o.affectedStatRatios.focus>0||this.filterPower&&o.affectedStatRatios.power>0||this.filterSpeed&&o.affectedStatRatios.topSpeed>0)&&(!this.filterSmall&&!this.filterMedium&&!this.filterLarge||this.filterSmall&&o.facilitySize===vt.Small||this.filterMedium&&o.facilitySize===vt.Medium||this.filterLarge&&o.facilitySize===vt.Large)));var a=r.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});return null!=a&&this.animalAssigned&&(a.isSelected=!0),r}GetAvailableAnimalOptions(){var e=[];return null==this.globalService.globalVar||null==this.globalService.globalVar.animals||0===this.globalService.globalVar.animals.length||(e=this.globalService.globalVar.animals.filter(i=>i.isAvailable&&(void 0===i.associatedBarnNumber||i.associatedBarnNumber<=0))),e}unassignAnimal(){var e=this.globalService.globalVar.animals.find(i=>i.associatedBarnNumber==this.selectedBarnNumber);null!=e&&(e.associatedBarnNumber=0,e.currentTraining=null),this.existingTraining=null,this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions()}assignAnimal(e){e.associatedBarnNumber=this.selectedBarnNumber,this.animalAssigned=!0,this.availableAnimals=this.GetAvailableAnimalOptions(),this.availableTrainings=this.GetAvailableTrainingOptions(e),this.associatedAnimalName=e.name,this.existingTraining=null;var i=this.lookupService.getAnimalByType(e.type);null!==i&&(i.associatedBarnNumber=this.selectedBarnNumber,this.associatedAnimal=i,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()}),!this.globalService.globalVar.tutorials.tutorialCompleted&&7===this.globalService.globalVar.tutorials.currentTutorialId&&this.associatedAnimal.type===L.Monkey&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0,this.tutorialActive=!0)}returnToBarnView(){this.returnToBarnEmitter.emit(0)}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}toggleFacilityFilter(e){"Small"===e&&(this.filterSmall=!this.filterSmall),"Medium"===e&&(this.filterMedium=!this.filterMedium),"Large"===e&&(this.filterLarge=!this.filterLarge),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.filterSmall=!1,this.filterMedium=!1,this.filterLarge=!1,this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}purchaseBarn(){this.lookupService.getCoins()>=this.barn.purchasePrice&&(this.barn.isLocked=!1,this.lookupService.spendCoins(this.barn.purchasePrice))}canPurchaseBarn(){return this.lookupService.getCoins()>=this.barn.purchasePrice}getSizeValue(){this.sizeValue=this.barn.getSize()}upgradeBarnSize(){if(this.lookupService.getCoins()>=this.barn.facilityUpgradePrice){if(this.lookupService.spendCoins(this.barn.facilityUpgradePrice),this.barn.size===vt.Small)this.barn.size=vt.Medium,this.barn.facilityUpgradePrice=4e3,null!=(i=this.globalService.globalVar.shop.find(r=>"Trainings"===r.name))&&i.itemList.filter(r=>r.additionalIdentifier===vt.Medium.toString()).forEach(r=>{r.isAvailable=!0});else if(this.barn.size===vt.Medium){var i;this.barn.size=vt.Large,null!=(i=this.globalService.globalVar.shop.find(a=>"Trainings"===a.name))&&i.itemList.filter(a=>a.additionalIdentifier===vt.Large.toString()).forEach(a=>{a.isAvailable=!0})}this.getSizeValue(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover()}}upgradeBarn(){var e=this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel);if(this.canUpgradeBarn(e)){if(9===this.barn.barnUpgrades.barnLevel)this.modalService.open(this.specializationModal,{ariaLabelledBy:"modal-basic-title",size:"lg"});else{e.forEach(o=>{this.lookupService.spendResourceByName(o.name,o.amount)}),this.barn.barnUpgrades.barnLevel+=1;var r=.1;if(this.barn.barnUpgrades.barnLevel%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var a=this.barn.barnUpgrades.barnLevel-this.barn.barnUpgrades.specializationLevel;a%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=r:a%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=r:a%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=r:a%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=r:a%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=r:a%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=r)}this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover()}this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)}else alert("You don't have the required resources to upgrade your barn.")}canUpgradeBarn(e){var i=!0;return e.forEach(r=>{this.lookupService.getResourceByName(r.name)<r.amount&&(i=!1)}),i}canBuildLargerBarn(){var e=!1;return this.lookupService.getCoins()>=this.barn.facilityUpgradePrice&&(e=!0),e}getTotalBarnStatsPopover(e){var i="Upgrade to gain barn bonuses. ";return this.barn.barnUpgrades.barnLevel>=1&&(i=e?"<em>Click to view full information and to change Barn specialization.</em><br/><br/>":""),i+="Barn Upgrades: <br/>",this.barn.barnUpgrades.specialization===Wt.TrainingFacility?i+=this.specializationService.getSpecializationPopoverText(Wt.TrainingFacility,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===Wt.BreedingGrounds?i+=this.specializationService.getSpecializationPopoverText(Wt.BreedingGrounds,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===Wt.Attraction?i+=this.specializationService.getSpecializationPopoverText(Wt.Attraction,this.barn.barnUpgrades.specializationLevel):this.barn.barnUpgrades.specialization===Wt.ResearchCenter&&(i+=this.specializationService.getSpecializationPopoverText(Wt.ResearchCenter,this.barn.barnUpgrades.specializationLevel)),this.barn.barnUpgrades.upgradedStatGain.adaptability>1&&(i+="Adaptability Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.adaptability.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.focus>1&&(i+="Focus Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.focus.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.power>1&&(i+="Power Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.power.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.endurance>1&&(i+="Endurance Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.endurance.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.acceleration>1&&(i+="Acceleration Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.acceleration.toFixed(1)+"<br/>"),this.barn.barnUpgrades.upgradedStatGain.topSpeed>1&&(i+="Speed Multiplier: "+this.barn.barnUpgrades.upgradedStatGain.topSpeed.toFixed(1)+"<br/>"),null!==this.utilityService.getSanitizedHtml(i)&&(i=this.utilityService.getSanitizedHtml(i)),i}getUpgradeBarnPopover(){var e="Cost for next upgrade: \n";return this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(r=>{var a=r.name;"Medals"===a&&1===r.amount&&(a="Medal"),e+=r.amount+" "+a+"\n"}),e}getBuildLargerBarnPopover(){var e="Cost to build larger barn: \n";return e+=this.barn.facilityUpgradePrice+" Coins \n\n",this.barn.size===vt.Small?e+="You will be able to do Medium trainings and increase idle training time to 8 hours.":this.barn.size===vt.Medium&&(e+="You will be able to do Large trainings and increase idle training time to 12 hours."),e}filterSpecialization(e){this.selectedSpecialization=e,this.specializationDescription=this.globalService.getSpecializationDescription(e),this.inDepthSpecializationDescription=this.lookupService.getInDepthSpecializationDescription(e)}selectSpecialization(){""!==this.selectedSpecialization&&null!=this.selectedSpecialization?(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel).forEach(i=>{this.lookupService.spendResourceByName(i.name,i.amount)}),this.barn.barnUpgrades.specialization=this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel+=1,this.barn.barnUpgrades.barnLevel+=1,this.barn.barnUpgrades.specialization===Wt.TrainingFacility&&(this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal)),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="",this.modalService.dismissAll()):alert("You must select a specialization.")}resetSpecialization(){if(""!==this.selectedSpecialization&&null!=this.selectedSpecialization){this.barn.barnUpgrades.barnLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel),this.barn.barnUpgrades.specialization=this.barn.barnUpgrades.barnLevel<10?Wt.None:this.lookupService.convertSpecializationNameToEnum(this.selectedSpecialization),this.barn.barnUpgrades.specializationLevel=0,this.upgradeText="Upgrade",9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize"),this.barnName=this.lookupService.getBarnName(this.barn),this.selectedSpecialization="",this.specializationDescription="",this.inDepthSpecializationDescription="";var e=.1;this.barn.barnUpgrades.upgradedStatGain=new Ve(1,1,1,1,1,1);for(var i=1;i<=this.barn.barnUpgrades.barnLevel;i++)if(i%10==0)this.barn.barnUpgrades.specializationLevel+=1;else{var r=i-this.barn.barnUpgrades.specializationLevel;r%6==0?this.barn.barnUpgrades.upgradedStatGain.topSpeed+=e:r%6==5?this.barn.barnUpgrades.upgradedStatGain.acceleration+=e:r%6==4?this.barn.barnUpgrades.upgradedStatGain.endurance+=e:r%6==3?this.barn.barnUpgrades.upgradedStatGain.power+=e:r%6==2?this.barn.barnUpgrades.upgradedStatGain.focus+=e:r%6==1&&(this.barn.barnUpgrades.upgradedStatGain.adaptability+=e)}this.availableTrainings=this.GetAvailableTrainingOptions(this.associatedAnimal),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),this.modalService.dismissAll()}else alert("You must select a specialization.")}goToAnimal(){this.componentCommunicationService.setAnimalView(Ct.animals,this.associatedAnimal)}handleTutorial(){var e=this.globalService.globalVar.animals.find(i=>i.type===L.Monkey);this.globalService.globalVar.tutorials.tutorialCompleted||1!==this.globalService.globalVar.tutorials.currentTutorialId?!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)?(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0):this.globalService.globalVar.tutorials.tutorialCompleted||(this.tutorialActive=!1):(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}resetSelectedBarnInfo(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.upgradeText="Upgrade",this.barnSpecializationsUnlocked=this.lookupService.isItemUnlocked("barnSpecializations"),this.coachingUnlocked=this.lookupService.isItemUnlocked("coaching"),this.selectedBarnNumber=e.barnNumber,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1){var i=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedBarnNumber);if(void 0!==i){this.barn=i,this.barnName=this.lookupService.getBarnName(i),this.getSizeValue(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!0),this.upgradeBarnPopover=this.getUpgradeBarnPopover(),this.buildBiggerBarnPopover=this.getBuildLargerBarnPopover(),this.canUpgrade=this.canUpgradeBarn(this.lookupService.getResourcesForBarnUpgrade(this.barn.barnUpgrades.barnLevel)),this.canBuild=this.canBuildLargerBarn(),9===this.barn.barnUpgrades.barnLevel&&(this.upgradeText="Specialize");var r=this.globalService.globalVar.animals.find(o=>o.associatedBarnNumber==this.selectedBarnNumber);if(null!=r){if(this.animalAssigned=!0,this.associatedAnimal=r,this.associatedAnimalName=r.name,this.existingTraining=r.currentTraining,this.colorConditional={flatlandColor:"Flatland"===this.associatedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.associatedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.associatedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.associatedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.associatedAnimal.getRaceCourseType()},this.availableTrainings=this.GetAvailableTrainingOptions(r),this.currentTrainingPopover=this.getCurrentTrainingPopover(r),null!=this.existingTraining){var a=this.availableTrainings.find(o=>{var s;return(null===(s=this.existingTraining)||void 0===s?void 0:s.trainingName)===o.trainingName});null!=a&&(a.isSelected=!0)}}else this.animalAssigned=!1,this.availableAnimals=this.GetAvailableAnimalOptions();this.componentCommunicationService.setBarnView(Ct.barn,this.selectedBarnNumber),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(o=>{if(!this.barn.isLocked){var s=this.globalService.globalVar.animals.find(c=>c.associatedBarnNumber==this.selectedBarnNumber);if(null!=s){if(null==s.currentTraining){if(null!==this.existingTraining){var l=this.availableTrainings.find(c=>{var u;return(null===(u=this.existingTraining)||void 0===u?void 0:u.trainingName)===c.trainingName});null!=l&&(l.isSelected=!1),this.existingTraining=null}return}s.currentTraining!==this.existingTraining&&(this.existingTraining=s.currentTraining),this.trainingProgressBarPercent>=100&&(this.trainingProgressBarPercent=100),this.trainingProgressBarPercent=s.currentTraining.timeTrained/s.currentTraining.timeToComplete*100,this.currentTrainingPopover=this.getCurrentTrainingPopover(s)}}})}}else alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}getCurrentTrainingPopover(e){var i="";null!=e.currentTraining&&(i+=e.currentTraining.trainingName+"\n"+this.lookupService.getStatGainDescription(e.currentTraining.affectedStatRatios,e.currentTraining.statGain)+"\n"),i+=e.name+" Current Stats:\n",i+="Speed: "+Math.round(e.currentStats.topSpeed).toLocaleString()+"\n",i+="Acceleration: "+Math.round(e.currentStats.acceleration).toLocaleString()+"\n",i+="Endurance: "+Math.round(e.currentStats.endurance).toLocaleString()+"\n",i+="Power: "+Math.round(e.currentStats.power).toLocaleString()+"\n",i+="Focus: "+Math.round(e.currentStats.focus).toLocaleString()+"\n",i+="Adaptability: "+Math.round(e.currentStats.adaptability).toLocaleString()+"\n",i+="Diminishing Returns: "+this.globalService.GetAnimalDiminishingReturns(e);var r=this.utilityService.getSanitizedHtml(i);return null!==r&&(i=r),i}goToCoaching(){this.isCoachingEmitter.emit(!0)}openBarnUpgradeModal(e){if(this.specializationOptions=this.lookupService.getAllBarnSpecializations(),this.totalBarnStatsPopover=this.getTotalBarnStatsPopover(!1),this.barn.barnUpgrades.specialization!==Wt.None){var i=this.lookupService.convertSpecializationEnumToName(this.barn.barnUpgrades.specialization);this.specializationOptions=this.specializationOptions.filter(r=>r!==i),this.postResetBarnUpgradeLevel=Math.round(.8*this.barn.barnUpgrades.barnLevel)}this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.tutorialSubscription&&this.tutorialSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(An),P(To),P(bi),P(cn),P(a0),P(OD),P(kn))},t.\u0275cmp=_t({type:t,selectors:[["app-selected-barn"]],viewQuery:function(e,i){if(1&e&&Sa(MU,7),2&e){let r;Si(r=Ci())&&(i.specializationModal=r.first)}},hostBindings:function(e,i){1&e&&I("keyup",function(a){return i.keyEvent(a)},!1,uo)},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{returnToBarnEmitter:"returnToBarnEmitter",isCoachingEmitter:"isCoachingEmitter"},decls:17,vars:3,consts:[["class","selectedBarnModal",4,"ngIf"],["totalBarnStatsContent",""],["upgradeBarnContent",""],["costToBuildContent",""],["noTrainingContent",""],["currentTrainingContent",""],["specializationModal",""],["barnUpgradeContent",""],[1,"selectedBarnModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"unassign"],[3,"click"],[4,"ngIf"],[1,"info"],["class","keyword buttonAsTextKeepColor clickableText",3,"ngClass","click",4,"ngIf"],["class","clickableText keyword buttonAsTextKeepColor",3,"ngClass","click",4,"ngIf"],[3,"ngClass"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"back"],[1,"changeTrainingHeader"],[1,"s4Heading",3,"click"],[1,"trainingDescription"],[1,"filterGridContainer"],[1,"facilitySizeFilter","clickableText","filterMargins"],["id","smallFilter",1,"buttonAsText",3,"click"],["id","mediumFilter",1,"buttonAsText",3,"click"],["id","largeFilter",1,"buttonAsText",3,"click"],[1,"resetFiltersHeader","buttonAsText","clickableText"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTrainingOptions","selectedTrainingOption",4,"ngIf"],["class","keyword",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[1,"keyword","buttonAsTextKeepColor","clickableText",3,"ngClass","click"],[1,"clickableText","keyword","buttonAsTextKeepColor",3,"ngClass","click"],[1,"sizeButtonSpacing",3,"disabled","click"],[1,"activeTrainingOption"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"],[3,"availableTrainingOptions","selectedTrainingOption"],[1,"keyword"],[3,"availableAnimals","selectedAnimal"],[1,"purchaseBarn"],[1,"price","resourceKeyword"],["id","purchaseButton",3,"disabled","click"],["class","popoverClass",4,"ngIf"],[1,"popoverClass"],[3,"innerHTML"],["class","popoverClass",3,"innerHTML",4,"ngIf"],[1,"popoverClass",3,"innerHTML"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],["class","typeContainer",4,"ngIf"],[1,"modal-footer"],["type","button",3,"click"],[1,"typeContainer"],["class","specializationType subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"specializationType","subHeading",3,"ngClass","click"],[1,"upgradeBarnInfo"],["class","resetBarn",4,"ngIf"],[1,"resetBarn"],[1,"resetSpecializationInfo"],[1,"s4Heading"],[1,"resetSpecializationOptions"],[1,"modal-footer","spaceEvenly"]],template:function(e,i){1&e&&(x(0,HU,69,34,"div",0),x(1,GU,19,2,"div",0),x(2,zU,24,3,"div",0),x(3,$U,1,1,"ng-template",null,1,ut),x(5,qU,1,1,"ng-template",null,2,ut),x(7,YU,1,1,"ng-template",null,3,ut),x(9,KU,1,1,"ng-template",null,4,ut),x(11,JU,1,1,"ng-template",null,5,ut),x(13,nH,14,2,"ng-template",null,6,ut),x(15,lH,14,3,"ng-template",null,7,ut)),2&e&&(_("ngIf",i.animalAssigned&&!i.barn.isLocked),p(1),_("ngIf",!i.animalAssigned&&!i.barn.isLocked),p(1),_("ngIf",i.barn.isLocked))},directives:[si,Wr,Ji,I0,bU,Ef,Bh,kh,lu,on],pipes:[bo],styles:['ngb-modal-backdrop{z-index:1050!important}.selectedBarnModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}.infoText[_ngcontent-%COMP%]{text-align:center}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"unassign info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.trainingDescription[_ngcontent-%COMP%]{text-align:center}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}.facilitySizeFilter[_ngcontent-%COMP%]{grid-area:facilitySizeFilter}.resetFiltersHeader[_ngcontent-%COMP%]{grid-area:resetFiltersHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.changeTrainingHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.specializationType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedSpecialization[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.sizeButtonSpacing[_ngcontent-%COMP%]{width:4rem}.sizeSpacing[_ngcontent-%COMP%]{margin-left:4rem}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.activeTrainingOption[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.spaceEvenly[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}.resetSpecializationInfo[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:2fr 1fr 2fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"facilitySizeFilter resetFiltersHeader statFilter"}}']}),t})();var un=(()=>{return(t=un||(un={}))[t.speed=0]="speed",t[t.acceleration=1]="acceleration",t[t.endurance=2]="endurance",t[t.power=3]="power",t[t.focus=4]="focus",t[t.adaptability=5]="adaptability",t[t.special=6]="special",un;var t})();const uH=["coachingCanvas"],dH=["drawCoaching"];let hH=(()=>{class t{constructor(e,i,r,a){this.gameLoopService=e,this.globalService=i,this.themeService=r,this.utilityService=a,this.isCoachingEmitter=new ot,this.isPointerDown=!1,this.activePoints=[],this.currentEndPoint=0,this.currentX=0,this.currentY=0,this.getNewPath=!1}ngOnInit(){if(this.successfulAttemptStreak=0,this.selectedBarnNumber>0&&this.selectedBarnNumber<=this.globalService.globalVar.barns.length+1&&void 0!==this.globalService.globalVar.barns.find(a=>a.barnNumber===this.selectedBarnNumber)){var i=this.globalService.globalVar.animals.find(a=>a.associatedBarnNumber==this.selectedBarnNumber);if(null!=i){this.associatedAnimal=i;var r="coloredText "+this.associatedAnimal.getCourseTypeClass();this.animalDisplayName="<span class='"+r+"'>"+this.associatedAnimal.name+"</span>"}}this.incrementalCoachingUpdates="You bring "+this.animalDisplayName+" out into an open area for practice.\n"}ngAfterViewInit(){this.setupCanvas(),null!=this.drawCoaching&&(this.canvasOffsetX=this.drawCoaching.nativeElement.offsetLeft,this.canvasOffsetY=this.drawCoaching.nativeElement.offsetTop),this.context=this.coachingCanvas.nativeElement.getContext("2d"),this.context.lineWidth=6,this.currentPathType=this.getRandomPathType(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.lineWidth=6,this.displayTrace(this.context,0)})}setupCanvas(){this.coachingCanvas.nativeElement.style.width="100%",this.coachingCanvas.nativeElement.style.height="100%",this.coachingCanvas.nativeElement.width=this.coachingCanvas.nativeElement.offsetWidth,this.coachingCanvas.nativeElement.height=this.coachingCanvas.nativeElement.offsetHeight,this.canvasHeight=this.coachingCanvas.nativeElement.height,this.canvasWidth=this.coachingCanvas.nativeElement.width}displayTrace(e,i){e.lineCap="round",e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.currentPathType===un.speed&&(this.activePoints=this.drawSpeedTrace(e)),this.currentPathType===un.acceleration&&(this.activePoints=this.drawAccelerationTrace(e)),this.currentPathType===un.endurance&&(this.activePoints=this.drawEnduranceTrace(e)),this.currentPathType===un.power&&(this.activePoints=this.drawPowerTrace(e)),this.currentPathType===un.focus&&(this.activePoints=this.drawFocusTrace(e)),this.currentPathType===un.adaptability&&(this.activePoints=this.drawAdaptabilityTrace(e)),this.currentPathType===un.special&&(this.activePoints=this.drawSpecialTrace(e)),e.strokeStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.globalCompositeOperation="source-atop";for(var r=0;r<this.currentEndPoint;r++)if(r<this.currentEndPoint-1)this.currentPathType===un.power&&0===r?(e.beginPath(),e.ellipse(this.activePoints[0][0],this.activePoints[0][1],this.activePoints[0][2],this.activePoints[0][3],this.activePoints[0][4],this.activePoints[0][5],this.activePoints[0][6],!0),e.stroke()):(e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.activePoints[r+1][0],this.activePoints[r+1][1]),e.stroke());else if(this.currentPathType!==un.power||0!==r&&2!==r)e.beginPath(),e.moveTo(this.activePoints[r][0],this.activePoints[r][1]),e.lineTo(this.currentX,this.currentY),e.stroke(),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,this.currentY-5,10,10);else{var a=0;2===r&&(a=3),e.fillStyle=this.getAnimalDistanceColor(this.associatedAnimal.raceCourseType),e.fillRect(this.activePoints[a][0]-this.activePoints[a][2]-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],this.currentX-(this.activePoints[a][0]-this.activePoints[a][2]),2*this.activePoints[a][3]+2),e.fillStyle=this.getAnimalRacerColor(this.associatedAnimal.raceCourseType),e.fillRect(this.currentX-5,0===a?this.activePoints[a][1]-2*this.activePoints[a][3]:this.activePoints[a][1],10,2*this.activePoints[a][3])}}pointerMove(e){if(this.isPointerDown&&null!=this.activePoints&&0!==this.activePoints.length){e.preventDefault(),e.stopPropagation();var i=e.clientX-this.canvasOffsetX,r=e.clientY-this.canvasOffsetY,a=.1*this.canvasWidth,o=.1*this.canvasHeight;0===this.currentEndPoint&&(this.currentX=this.activePoints[0][0],this.currentY=this.activePoints[0][1],this.currentPathType===un.power&&(this.currentX=this.activePoints[0][0]-this.activePoints[0][2],this.currentY=this.activePoints[0][1]),this.currentEndPoint=1),this.currentPathType===un.power&&(o=.25*this.canvasHeight);var s=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint-1][0]:this.activePoints[this.currentEndPoint][0],l=this.activePoints[this.currentEndPoint-1][0]<this.activePoints[this.currentEndPoint][0]?this.activePoints[this.currentEndPoint][0]:this.activePoints[this.currentEndPoint-1][0],c=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint-1][1]:this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint-1][1]<this.activePoints[this.currentEndPoint][1]?this.activePoints[this.currentEndPoint][1]:this.activePoints[this.currentEndPoint-1][1],d=s-a,v=l+a,m=c-o,b=u+o,y=!1,C=!1,k=!1,w=!1;if(this.activePoints[this.currentEndPoint-1][0]>this.activePoints[this.currentEndPoint][0]&&(y=!0),this.activePoints[this.currentEndPoint-1][1]>this.activePoints[this.currentEndPoint][1]&&(C=!0),this.activePoints[this.currentEndPoint-1][0]===this.activePoints[this.currentEndPoint][0]&&(k=!0),this.activePoints[this.currentEndPoint-1][1]===this.activePoints[this.currentEndPoint][1]&&(w=!0),this.currentPathType!==un.power||1!==this.currentEndPoint&&3!==this.currentEndPoint?this.currentPathType===un.power&&2===this.currentEndPoint&&(d=(s=this.activePoints[2][0])-a,v=(l=this.activePoints[1][0])+a,m=(c=this.activePoints[1][1])-o,b=(u=this.activePoints[2][1])+o,y=!0,C=!1,k=!1,w=!1):(1===this.currentEndPoint?(s=this.activePoints[this.currentEndPoint-1][0]-this.activePoints[this.currentEndPoint-1][2],l=this.activePoints[this.currentEndPoint-1][0]+this.activePoints[this.currentEndPoint-1][2],c=this.activePoints[this.currentEndPoint-1][1],u=this.activePoints[this.currentEndPoint-1][1]):(s=this.activePoints[this.currentEndPoint][0]-this.activePoints[this.currentEndPoint][2],l=this.activePoints[this.currentEndPoint][0]+this.activePoints[this.currentEndPoint][2],c=this.activePoints[this.currentEndPoint][1],u=this.activePoints[this.currentEndPoint][1]),d=s-a,v=l+a,m=c-o,b=u+o,y=!1,C=!1,k=!1,w=!0),i>=d&&i<=v&&r>=m&&r<=b){if(k||w)(!C&&r>this.currentY||C&&r<this.currentY)&&!w&&(this.currentY=r),(!y&&i>this.currentX||y&&i<this.currentX)&&!k&&(this.currentX=i);else if(!y&&i>this.currentX||y&&i<this.currentX){var R=(i-s)/(l-s);y&&(R=1-R),C&&(R=1-R);var z=(u-c)*R+c;this.currentX=i,this.currentY=z}var q=.005*this.canvasWidth,j=.005*this.canvasHeight;(!y&&this.currentX>=l-q||y&&this.currentX<=s+q)&&(!C&&this.currentY>=u-j||C&&this.currentY<=c+j)&&(this.currentX=y?s:l,this.currentY=C?c:u,this.currentEndPoint+=1,this.currentEndPoint>this.activePoints.length-1&&this.completePath())}}}pointerUp(){this.isPointerDown=!1}pointerDown(){this.isPointerDown=!0}drawSpeedTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([i,r]),a.push([this.canvasWidth-i,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-i,this.canvasHeight-r]),a.push([i,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}drawAdaptabilityTrace(e){var i=.1*this.canvasWidth,o=(this.canvasWidth-2*i)/14,s=(this.canvasHeight-.1*this.canvasHeight*2)/7,l=[];l.push([i,this.canvasHeight/2]),l.push([i+o,this.canvasHeight/2-s]),l.push([i+2*o,this.canvasHeight/2+s]),l.push([i+3*o,this.canvasHeight/2-2*s]),l.push([i+4*o,this.canvasHeight/2+2*s]),l.push([i+5*o,this.canvasHeight/2-3*s]),l.push([i+6*o,this.canvasHeight/2+3*s]),l.push([i+7*o,this.canvasHeight/2-4*s]),l.push([i+8*o,this.canvasHeight/2+3*s]),l.push([i+9*o,this.canvasHeight/2-3*s]),l.push([i+10*o,this.canvasHeight/2+2*s]),l.push([i+11*o,this.canvasHeight/2-2*s]),l.push([i+12*o,this.canvasHeight/2+s]),l.push([i+13*o,this.canvasHeight/2-s]),l.push([i+14*o,this.canvasHeight/2]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawPowerTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([this.canvasWidth/2,this.canvasHeight/4,this.canvasWidth/2-i,this.canvasHeight/4-r,0,0,Math.PI]),a.push([this.canvasWidth/2+(this.canvasWidth/2-i),this.canvasHeight/4]),a.push([this.canvasWidth/2-(this.canvasWidth/2-i),3*this.canvasHeight/4]),a.push([this.canvasWidth/2,3*this.canvasHeight/4,this.canvasWidth/2-i,this.canvasHeight/4-r,0,0,Math.PI]),e.beginPath(),e.ellipse(a[0][0],a[0][1],a[0][2],a[0][3],a[0][4],a[0][5],a[0][6],!0),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.ellipse(a[3][0],a[3][1],a[3][2],a[3][3],a[3][4],a[3][5],a[3][6],!1),e.stroke(),a}drawEnduranceTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=.15*this.canvasWidth,o=.15*this.canvasHeight,s=[];s.push([i,r]),s.push([this.canvasWidth-i,r]),s.push([this.canvasWidth-i,this.canvasHeight-r]),s.push([i,this.canvasHeight-r]),s.push([i,r+o]),s.push([this.canvasWidth-(i+a),r+o]),s.push([this.canvasWidth-(i+a),this.canvasHeight-(r+o)]),s.push([i+a,this.canvasHeight-(r+o)]),s.push([i+a,r+2*o]),s.push([this.canvasWidth-(i+2*a),r+2*o]),s.push([this.canvasWidth-(i+2*a),this.canvasHeight-(r+2*o)]),s.push([i+2*a,this.canvasHeight-(r+2*o)]),s.push([i+2*a,this.canvasHeight/2]),s.push([this.canvasWidth/2,this.canvasHeight/2]);for(var l=1;l<s.length;l++)e.beginPath(),e.moveTo(s[l-1][0],s[l-1][1]),e.lineTo(s[l][0],s[l][1]),e.stroke();return s}drawFocusTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];a.push([this.canvasWidth/3,r]),a.push([this.canvasWidth/3,this.canvasHeight/6]),a.push([i,this.canvasHeight/6]),a.push([this.canvasWidth/2,this.canvasHeight-r]),a.push([this.canvasWidth-i,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,this.canvasHeight/6]),a.push([2*this.canvasWidth/3,r]);for(var o=1;o<a.length;o++)e.beginPath(),e.moveTo(a[o-1][0],a[o-1][1]),e.lineTo(a[o][0],a[o][1]),e.stroke();return a}drawAccelerationTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,o=this.canvasWidth-2*i,s=this.canvasHeight-2*r,l=[];l.push([i,r]),l.push([o/9+i,r]),l.push([o/9+i,2*s/9+r]),l.push([2*o/9+i,2*s/9+r]),l.push([2*o/9+i,4*s/9+r]),l.push([3*o/9+i,4*s/9+r]),l.push([3*o/9+i,6*s/9+r]),l.push([4*o/9+i,6*s/9+r]),l.push([4*o/9+i,8*s/9+r]),l.push([5*o/9+i,8*s/9+r]),l.push([5*o/9+i,6*s/9+r]),l.push([6*o/9+i,6*s/9+r]),l.push([6*o/9+i,4*s/9+r]),l.push([7*o/9+i,4*s/9+r]),l.push([7*o/9+i,2*s/9+r]),l.push([8*o/9+i,2*s/9+r]),l.push([8*o/9+i,r]),l.push([9*o/9+i,r]);for(var c=1;c<l.length;c++)e.beginPath(),e.moveTo(l[c-1][0],l[c-1][1]),e.lineTo(l[c][0],l[c][1]),e.stroke();return l}drawSpecialTrace(e){var i=.1*this.canvasWidth,r=.1*this.canvasHeight,a=[];return a.push([i,r]),a.push([this.canvasWidth-i,r]),a.push([this.canvasWidth/2,this.canvasHeight/2]),a.push([this.canvasWidth-i,this.canvasHeight-r]),a.push([i,this.canvasHeight-r]),e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.lineTo(a[1][0],a[1][1]),e.stroke(),e.beginPath(),e.moveTo(a[1][0],a[1][1]),e.lineTo(a[2][0],a[2][1]),e.stroke(),e.beginPath(),e.moveTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.stroke(),e.beginPath(),e.moveTo(a[3][0],a[3][1]),e.lineTo(a[4][0],a[4][1]),e.stroke(),a}getAnimalDistanceColor(e){var i="";return e===W.Flatland&&(i="#7d3f00"),e===W.Mountain&&(i="#1b630d"),e===W.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===W.Tundra&&(i="#28809c"),e===W.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e){var i="";return e===W.Flatland&&("night"===this.themeService.getActiveThemeName()?i="#E18B07":(this.themeService.getActiveThemeName(),i="#c66900")),e===W.Mountain&&("night"===this.themeService.getActiveThemeName()?i="#30b001":(this.themeService.getActiveThemeName(),i="#279113")),e===W.Ocean&&("night"===this.themeService.getActiveThemeName()?i="#9289CF":(this.themeService.getActiveThemeName(),i="#0000FF")),e===W.Tundra&&("night"===this.themeService.getActiveThemeName()?i="#019DDE":(this.themeService.getActiveThemeName(),i="#1CA1C9")),e===W.Volcanic&&("night"===this.themeService.getActiveThemeName()?i="#E56C6E":(this.themeService.getActiveThemeName(),i="#D92525")),i}getRandomPathType(e){var i=Object.keys(un),r=[];i.forEach((o,s)=>{!isNaN(Number(o))&&6!==Number(o)&&r.push(Number(o))});var a=this.utilityService.getRandomInteger(0,r.length-1);return r[a]}completePath(){this.getNewPath=!0,this.currentEndPoint=0,this.activePoints=[],this.currentX=0,this.currentY=0,this.isPointerDown=!1,this.successfulAttemptStreak+=1,this.getReward(this.currentPathType),this.associatedAnimal.trackedAnimalStats.successfulCoachingAttempts+=1,this.currentPathType=this.getRandomPathType(this.currentPathType)}getReward(e){var i=1,r=this.globalService.globalVar.resources.find(l=>"Whistle"===l.name);if(null!=r&&r.amount>0){var a=this.globalService.globalVar.modifiers.find(l=>"whistleModifier"===l.text);null!=a&&(i=a.value)}var o=this.globalService.globalVar.resources.find(l=>"Golden Whistle"===l.name);if(null!=o&&o.amount>0){var s=this.globalService.globalVar.modifiers.find(l=>"goldenWhistleModifier"===l.text);null!=s&&(i=s.value)}e===un.speed&&(this.associatedAnimal.currentStats.topSpeed+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" speed. ("+this.associatedAnimal.currentStats.topSpeed.toFixed(2)+")\n"),e===un.acceleration&&(this.associatedAnimal.currentStats.acceleration+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" acceleration. ("+this.associatedAnimal.currentStats.acceleration.toFixed(2)+")\n"),e===un.endurance&&(this.associatedAnimal.currentStats.endurance+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" endurance. ("+this.associatedAnimal.currentStats.endurance.toFixed(2)+")\n"),e===un.power&&(this.associatedAnimal.currentStats.power+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" power. ("+this.associatedAnimal.currentStats.power.toFixed(2)+")\n"),e===un.focus&&(this.associatedAnimal.currentStats.focus+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" focus. ("+this.associatedAnimal.currentStats.focus.toFixed(2)+")\n"),e===un.adaptability&&(this.associatedAnimal.currentStats.adaptability+=i,this.incrementalCoachingUpdates+=this.animalDisplayName+" completes the course and gains "+i+" adaptability. ("+this.associatedAnimal.currentStats.adaptability.toFixed(2)+")\n"),this.successfulAttemptStreak%5==0&&(this.globalService.increaseAbilityXp(this.associatedAnimal,i),this.incrementalCoachingUpdates+=this.animalDisplayName+" also gains "+i+" XP towards their ability "+this.associatedAnimal.ability.name+"!\n"),this.globalService.calculateAnimalRacingStats(this.associatedAnimal)}returnToSelectedBarnView(){this.isCoachingEmitter.emit(!1)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(An),P(Et),P(Ul),P(kn))},t.\u0275cmp=_t({type:t,selectors:[["app-coaching"]],viewQuery:function(e,i){if(1&e&&(Sa(uH,5,Ri),Sa(dH,5,Ri)),2&e){let r;Si(r=Ci())&&(i.coachingCanvas=r.first),Si(r=Ci())&&(i.drawCoaching=r.first)}},inputs:{selectedBarnNumber:"selectedBarnNumber"},outputs:{isCoachingEmitter:"isCoachingEmitter"},decls:22,vars:2,consts:[[1,"coachingView"],[1,"marginDiv"],["id","coachingInfo"],[1,"infoGridContainer"],[1,"info"],[1,"description"],[1,"back"],[3,"click"],[1,"drawingDiv"],[1,"updates"],["id","drawCoaching",1,"drawCoaching"],["drawCoaching",""],[1,"drawCoachingDiv"],["id","coachingCanvas",1,"coachingCanvas",3,"pointermove","pointerdown","pointerup"],["coachingCanvas",""],[1,"coachingUpdates",3,"scrollTop","innerHTML"],["scrollMe",""]],template:function(e,i){if(1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),g(6,"Coaching"),h(),f(7,"div",5),g(8," Show your animals the way by tracing each path. Successfully making it through will reward your partner with a stat point. "),h()(),f(9,"div",6)(10,"button",7),I("click",function(){return i.returnToSelectedBarnView()}),g(11,"Back"),h()()(),D(12,"hr"),h(),f(13,"div",8)(14,"div",9)(15,"div",10,11)(17,"div",12)(18,"canvas",13,14),I("pointermove",function(a){return i.pointerMove(a)})("pointerdown",function(){return i.pointerDown()})("pointerup",function(){return i.pointerUp()}),h()()(),D(20,"div",15,16),h()()()()),2&e){const r=lt(21);p(20),_("scrollTop",r.scrollHeight)("innerHTML",i.incrementalCoachingUpdates.trim(),Bt)}},styles:['.coachingView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default);overscroll-behavior:contain}.marginDiv[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem;height:100%}.drawCoachingDiv[_ngcontent-%COMP%]{height:100%}.coachingCanvas[_ngcontent-%COMP%]{border:1px solid black;touch-action:none;-ms-touch-action:none}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawCoaching coachingUpdates"}.coachingUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:coachingUpdates;-webkit-user-select:none;user-select:none}.drawCoaching[_ngcontent-%COMP%]{grid-area:drawCoaching}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.drawingDiv[_ngcontent-%COMP%]{height:76.5%}']}),t})();function fH(t,n){if(1&t){const e=pe();f(0,"div",12)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",4))}function pH(t,n){if(1&t){const e=pe();f(0,"div",13)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",5))}function gH(t,n){if(1&t){const e=pe();f(0,"div",14)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",6))}function vH(t,n){if(1&t&&(f(0,"div",3),x(1,fH,2,1,"div",9),x(2,pH,2,1,"div",10),x(3,gH,2,1,"div",11),h()),2&t){const e=S(2);p(1),_("ngIf",e.barnRow2IsUnlocked),p(1),_("ngIf",e.barnRow2IsUnlocked),p(1),_("ngIf",e.barnRow2IsUnlocked)}}function mH(t,n){if(1&t){const e=pe();f(0,"div",18)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",7))}function bH(t,n){if(1&t){const e=pe();f(0,"div",19)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",8))}function _H(t,n){if(1&t){const e=pe();f(0,"div",20)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",9))}function yH(t,n){if(1&t&&(f(0,"div",3),x(1,mH,2,1,"div",15),x(2,bH,2,1,"div",16),x(3,_H,2,1,"div",17),h()),2&t){const e=S(2);p(1),_("ngIf",e.barnRow3IsUnlocked),p(1),_("ngIf",e.barnRow3IsUnlocked),p(1),_("ngIf",e.barnRow3IsUnlocked)}}function wH(t,n){if(1&t){const e=pe();f(0,"div",24)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",10))}function SH(t,n){if(1&t){const e=pe();f(0,"div",25)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",11))}function CH(t,n){if(1&t){const e=pe();f(0,"div",26)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",12))}function TH(t,n){if(1&t&&(f(0,"div",3),x(1,wH,2,1,"div",21),x(2,SH,2,1,"div",22),x(3,CH,2,1,"div",23),h()),2&t){const e=S(2);p(1),_("ngIf",e.barnRow4IsUnlocked),p(1),_("ngIf",e.barnRow4IsUnlocked),p(1),_("ngIf",e.barnRow4IsUnlocked)}}function DH(t,n){if(1&t){const e=pe();f(0,"div",30)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",13))}function RH(t,n){if(1&t){const e=pe();f(0,"div",31)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",14))}function xH(t,n){if(1&t){const e=pe();f(0,"div",32)(1,"app-barn",5),I("selectedBarn",function(r){return B(e),S(3).goToBarn(r)}),h()()}2&t&&(p(1),_("barnNumber",15))}function MH(t,n){if(1&t&&(f(0,"div",3),x(1,DH,2,1,"div",27),x(2,RH,2,1,"div",28),x(3,xH,2,1,"div",29),h()),2&t){const e=S(2);p(1),_("ngIf",e.barnRow5IsUnlocked),p(1),_("ngIf",e.barnRow5IsUnlocked),p(1),_("ngIf",e.barnRow5IsUnlocked)}}function kH(t,n){if(1&t){const e=pe();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"app-barn",5),I("selectedBarn",function(r){return B(e),S().goToBarn(r)}),h()(),f(4,"div",6)(5,"app-barn",5),I("selectedBarn",function(r){return B(e),S().goToBarn(r)}),h()(),f(6,"div",7)(7,"app-barn",5),I("selectedBarn",function(r){return B(e),S().goToBarn(r)}),h()()(),x(8,vH,4,3,"div",8),x(9,yH,4,3,"div",8),x(10,TH,4,3,"div",8),x(11,MH,4,3,"div",8),h()}if(2&t){const e=S();p(2),_("ngClass",e.tutorialActive?"tutorialActive":""),p(1),_("barnNumber",1),p(2),_("barnNumber",2),p(2),_("barnNumber",3),p(1),_("ngIf",e.barnRow2IsUnlocked),p(1),_("ngIf",e.barnRow3IsUnlocked),p(1),_("ngIf",e.barnRow4IsUnlocked),p(1),_("ngIf",e.barnRow5IsUnlocked)}}function AH(t,n){if(1&t){const e=pe();f(0,"app-selected-barn",36),I("returnToBarnEmitter",function(){return B(e),S(2).goToBarn(0)})("isCoachingEmitter",function(r){return B(e),S(2).goToCoaching(r)}),h()}2&t&&_("selectedBarnNumber",S(2).selectedBarn)}function PH(t,n){if(1&t){const e=pe();f(0,"app-coaching",37),I("isCoachingEmitter",function(r){return B(e),S(2).goToCoaching(r)}),h()}2&t&&_("selectedBarnNumber",S(2).selectedBarn)}function EH(t,n){if(1&t&&(f(0,"div",33),x(1,AH,1,1,"app-selected-barn",34),x(2,PH,1,1,"app-coaching",35),h()),2&t){const e=S();p(1),_("ngIf",!e.isCoaching),p(1),_("ngIf",e.isCoaching)}}let IH=(()=>{class t{constructor(e,i,r){this.lookupService=e,this.componentCommunicationService=i,this.globalService=r,this.selectedBarn=0,this.isCoaching=!1,this.tutorialActive=!1,this.barnRow2IsUnlocked=!1,this.barnRow3IsUnlocked=!1,this.barnRow4IsUnlocked=!1,this.barnRow5IsUnlocked=!1}ngOnInit(){var e;this.componentCommunicationService.setNewView(Ct.barn),this.barnRow2IsUnlocked=this.lookupService.isItemUnlocked("barnRow2"),this.barnRow3IsUnlocked=this.lookupService.isItemUnlocked("barnRow3"),this.barnRow4IsUnlocked=this.lookupService.isItemUnlocked("barnRow4"),this.barnRow5IsUnlocked=this.lookupService.isItemUnlocked("barnRow5"),!this.globalService.globalVar.tutorials.tutorialCompleted&&1===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(i=>i.type===L.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.tutorialActive=!0),this.subscription=this.componentCommunicationService.getBarnView().subscribe(i=>{this.selectedBarn=i})}goToBarn(e){this.selectedBarn=e,this.componentCommunicationService.setBarnView(Ct.barn,e)}goToCoaching(e){this.isCoaching=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setBarnNumber(0)}}return t.\u0275fac=function(e){return new(e||t)(P(bi),P(cn),P(Et))},t.\u0275cmp=_t({type:t,selectors:[["app-barn-view"]],decls:2,vars:2,consts:[["class","gridContainer","id","barnViewDiv",4,"ngIf"],["class","selectedBarnDiv",4,"ngIf"],["id","barnViewDiv",1,"gridContainer"],[1,"barnRow"],[1,"barn1","barnDefault",3,"ngClass"],[3,"barnNumber","selectedBarn"],[1,"barn2","barnDefault"],[1,"barn3","barnDefault"],["class","barnRow",4,"ngIf"],["class","barn4 barnDefault",4,"ngIf"],["class","barn5 barnDefault",4,"ngIf"],["class","barn6 barnDefault",4,"ngIf"],[1,"barn4","barnDefault"],[1,"barn5","barnDefault"],[1,"barn6","barnDefault"],["class","barn7 barnDefault",4,"ngIf"],["class","barn8 barnDefault",4,"ngIf"],["class","barn9 barnDefault",4,"ngIf"],[1,"barn7","barnDefault"],[1,"barn8","barnDefault"],[1,"barn9","barnDefault"],["class","barn10 barnDefault",4,"ngIf"],["class","barn11 barnDefault",4,"ngIf"],["class","barn12 barnDefault",4,"ngIf"],[1,"barn10","barnDefault"],[1,"barn11","barnDefault"],[1,"barn12","barnDefault"],["class","barn13 barnDefault",4,"ngIf"],["class","barn14 barnDefault",4,"ngIf"],["class","barn15 barnDefault",4,"ngIf"],[1,"barn13","barnDefault"],[1,"barn14","barnDefault"],[1,"barn15","barnDefault"],[1,"selectedBarnDiv"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","isCoachingEmitter",4,"ngIf"],[3,"selectedBarnNumber","returnToBarnEmitter","isCoachingEmitter"],[3,"selectedBarnNumber","isCoachingEmitter"]],template:function(e,i){1&e&&(x(0,kH,12,8,"div",0),x(1,EH,3,2,"div",1)),2&e&&(_("ngIf",0===i.selectedBarn),p(1),_("ngIf",i.selectedBarn>0))},directives:[si,Ji,fU,cH,hH],styles:["#barnViewDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.selectedBarnDiv[_ngcontent-%COMP%]{height:100%}.barnDefault[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);border:1px solid rgba(0,0,0,.1);border-right:none;border-top:none;width:33.3333%;display:inline-block;vertical-align:middle;height:100%}.barnRow[_ngcontent-%COMP%]{height:25%;width:100%;display:inline-block}.lockedBarnRow[_ngcontent-%COMP%]{border:none!important}.tutorialActive[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.1);border-color:red}"]}),t})();function VH(t,n){1&t&&(f(0,"span",5),g(1," Primary "),h())}function OH(t,n){1&t&&(f(0,"span",5),g(1," Auto Run Free Race "),h())}function NH(t,n){1&t&&(f(0,"span",5),g(1," Event "),h())}function FH(t,n){1&t&&D(0,"br")}function BH(t,n){1&t&&(f(0,"span",8),g(1," / "),h())}function LH(t,n){if(1&t&&(f(0,"span",6),g(1),x(2,BH,2,0,"span",7),h()),2&t){const e=n.$implicit,i=n.index,r=S();_("ngClass",r.getColorClass(e)),p(1),Z(" ",e.name,""),p(1),_("ngIf",i<r.deck.selectedAnimals.length-1)}}let O0=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i}ngOnInit(){if(0===this.deckNumber||null==this.deckNumber){var e=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=e&&(this.deck=e)}else{var i=this.globalService.globalVar.animalDecks.find(r=>r.deckNumber===this.deckNumber);null!=i&&(this.deck=i)}}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}goToDeckView(){this.componentCommunicationService.setNewView(Ct.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(cn))},t.\u0275cmp=_t({type:t,selectors:[["app-animal-deck"]],inputs:{deckNumber:"deckNumber"},decls:11,vars:6,consts:[[1,"relayTeam"],["class","primaryText keyword rightSpaced",4,"ngIf"],[4,"ngIf"],[1,"clickableText",3,"click"],["class","coloredText",3,"ngClass",4,"ngFor","ngForOf"],[1,"primaryText","keyword","rightSpaced"],[1,"coloredText",3,"ngClass"],["class","defaultColor",4,"ngIf"],[1,"defaultColor"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div"),x(2,VH,2,0,"span",1),x(3,OH,2,0,"span",1),x(4,NH,2,0,"span",1),x(5,FH,1,0,"br",2),h(),f(6,"div")(7,"strong",3),I("click",function(){return i.goToDeckView()}),g(8),h(),g(9," - "),x(10,LH,3,3,"span",4),h()()),2&e&&(p(2),_("ngIf",i.deck.isPrimaryDeck&&void 0!==i.deckNumber&&i.deckNumber>0),p(1),_("ngIf",i.deck.autoRunFreeRace&&void 0!==i.deckNumber&&i.deckNumber>0),p(1),_("ngIf",i.deck.isEventDeck&&void 0!==i.deckNumber&&i.deckNumber>0),p(1),_("ngIf",i.deckNumber>0),p(3),nt(i.deck.name),p(2),_("ngForOf",i.deck.selectedAnimals))},directives:[si,on,Ji],styles:[".primaryText[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary);padding-left:.5rem;padding-right:.5rem}.defaultColor[_ngcontent-%COMP%]{color:var(--foreground-default)}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.relayTeam[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:100%;margin-left:.5rem}"]}),t})();function UH(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=S();p(1),Z("Race ",e.index+1," ")}}function HH(t,n){if(1&t&&(f(0,"p",6),g(1),Lt(2,"number"),f(3,"span",7),g(4),h()()),2&t){const e=n.$implicit,i=S();_("ngClass",i.getNoRacerClass(e)),p(1),rn(" ",oi(2,5,e.distance,"1.2-2")," Meters of ",e.getTerrainName()," "),p(2),_("ngClass",i.getColorClass(e)),p(1),nt(e.getCourseTypeName())}}function GH(t,n){1&t&&(f(0,"h6")(1,"em"),g(2,"Completed!"),h()())}function zH(t,n){1&t&&(f(0,"h6")(1,"em"),g(2,"Cannot Run"),h()())}function jH(t,n){1&t&&(f(0,"h6",8),g(1,"Start"),h())}function $H(t,n){1&t&&D(0,"div",9),2&t&&_("innerHTML",S().popoverText,Bt)}const WH=function(t){return{raceNotAllowed:t}};let N0=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i,this.missingRacers=[],this.busyRacers=[]}ngOnInit(){this.cannotRace=!1;var e=this.lookupService.getPrimaryDeck();this.race.raceLegs.forEach(i=>{if(null==e||0===e.selectedAnimals.length&&this.race.raceType!==Ee.trainingTrack)this.cannotRace=!0,this.missingRacers.push(i.courseType);else if((null==e?void 0:e.selectedAnimals.some(a=>a.raceCourseType===i.courseType))||this.race.raceType===Ee.trainingTrack){var r=null==e?void 0:e.selectedAnimals.find(a=>a.raceCourseType===i.courseType);this.race.raceType===Ee.trainingTrack&&(r=this.selectedAnimal),void 0!==r&&!this.lookupService.canAnimalRace(r)&&(this.cannotRace=!0,this.busyRacers.push(r))}else this.cannotRace=!0,this.missingRacers.push(i.courseType)}),!this.cannotRace&&this.race.isCompleted&&(this.cannotRace=!0),this.race.localRaceType===Ut.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(this.cannotRace=!0),this.popoverText=this.cannotRace?this.getErrorPopoverText():this.getSuccessfulPopoverText()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getCourseTypeName(),mountainColor:"Mountain"===e.getCourseTypeName(),waterColor:"Ocean"===e.getCourseTypeName(),tundraColor:"Tundra"===e.getCourseTypeName(),volcanicColor:"Volcanic"===e.getCourseTypeName()}:{}}getNoRacerClass(e){return{noRacer:!this.hasRacerForLeg(e)}}hasRacerForLeg(e){var i=!1,r=this.lookupService.getPrimaryDeck();return null==r||0===r.selectedAnimals.length||(r.selectedAnimals.some(a=>a.raceCourseType===e.courseType)&&(i=!0),this.busyRacers.some(a=>a.raceCourseType===e.courseType)&&(i=!1)),i}getErrorPopoverText(){var e="You cannot do this race for the following reasons: \n\n";return this.missingRacers.forEach(i=>{e+="-Missing "+W[i]+" racer\n"}),this.busyRacers.forEach(i=>{e+="-"+i.name+" is active in another race\n"}),this.race.isCompleted&&(e+="-You've already completed this race."),this.race.localRaceType===Ut.Free&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(e+="-You've met your limit of free races. More will be available soon."),e}getSuccessfulPopoverText(){var e="",i=1;return this.race.raceLegs.forEach(r=>{null!=r.terrain&&(e+=this.lookupService.getTerrainPopoverText(r.terrain,r)),i<this.race.raceLegs.length&&(e+="\n"),i+=1}),e}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(bi))},t.\u0275cmp=_t({type:t,selectors:[["app-race-description"]],inputs:{index:"index",race:"race",showStartText:"showStartText",selectedAnimal:"selectedAnimal"},decls:10,vars:10,consts:[[1,"raceDescription"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngClass","ngbPopover","disablePopover"],[3,"ngClass",4,"ngFor","ngForOf"],["class","keyword",4,"ngIf"],["popContent",""],[3,"ngClass"],[1,"coloredText",3,"ngClass"],[1,"keyword"],[1,"popoverClass",3,"innerHTML"]],template:function(e,i){if(1&e&&(f(0,"div",0),x(1,UH,2,1,"span",1),D(2,"br"),f(3,"div",2),x(4,HH,5,8,"p",3),x(5,GH,3,0,"h6",1),x(6,zH,3,0,"h6",1),x(7,jH,2,0,"h6",4),h()(),x(8,$H,1,1,"ng-template",null,5,ut)),2&e){const r=lt(9);p(1),_("ngIf",null!=i.index&&i.index>-1),p(2),_("ngClass",pn(8,WH,i.cannotRace))("ngbPopover",r)("disablePopover",""===i.popoverText),p(1),_("ngForOf",i.race.raceLegs),p(1),_("ngIf",i.showStartText&&i.race.isCompleted),p(1),_("ngIf",i.showStartText&&!i.race.isCompleted&&i.cannotRace),p(1),_("ngIf",i.showStartText&&!i.race.isCompleted&&!i.cannotRace)}},directives:[si,Ji,Wr,on],pipes:[bo],styles:[".raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}"]}),t})();function qH(t,n){if(1&t){const e=pe();f(0,"div",10),I("click",function(){const a=B(e).$implicit;return S().selectCircuitRace(a)}),D(1,"app-race-description",11),h()}if(2&t){const e=n.$implicit,i=n.index,r=S();qg("circuitRace",i+1,""),_("ngClass",r.tutorialActive?"tutorialActive":""),p(1),_("index",i)("race",e)("showStartText",!0)}}function XH(t,n){if(1&t){const e=pe();f(0,"div",12),I("click",function(){const a=B(e).$implicit;return S().selectLocalRace(a)}),D(1,"app-race-description",11),h()}if(2&t){const e=n.$implicit,i=n.index;qg("localRace",i+1,""),p(1),_("index",i)("race",e)("showStartText",!0)}}function YH(t,n){if(1&t&&(f(0,"div",13),g(1),h()),2&t){const e=S();p(1),Z(" ",e.circuitRankUpDescription," ")}}let QH=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new ot,this.tutorialActive=!1,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){var e=this;this.handleTutorial(),this.availableLocalRaces=[],this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace()),this.availableLocalRaces.push(this.globalService.generateFreeRace());var i=this.globalService.globalVar.circuitRank;this.circuitRank=this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.circuitRank).toString():this.globalService.globalVar.circuitRank,this.circuitRankUpDescription=this.globalService.globalVar.circuitRankUpRewardDescription,this.availableCircuitRaces=this.globalService.globalVar.circuitRaces.filter(s=>s.requiredRank===i);var r=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);this.availableCircuitRaces.forEach(s=>{void 0!==r&&(s.raceLegs=this.globalService.reorganizeLegsByDeckOrder(s.raceLegs,r))}),this.totalFreeRaces=this.lookupService.getTotalFreeRacesPerPeriod();var a=900,o=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==o&&(a=o.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=xr(function*(l){var c=a-e.globalService.globalVar.freeRaceTimePeriodCounter,u=Math.floor(c/60),d=c-60*u,v=Math.floor(d).toString();d<10&&(v=d<1||d>59?"00":String(v).padStart(2,"0")),e.getRacesRequiredForMedal(),e.freeRaceTimer=u+":"+v,e.freeRacesRemaining=e.lookupService.getRemainingFreeRacesPerPeriod()});return function(l){return s.apply(this,arguments)}}())}selectCircuitRace(e){var i=!0,r=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck);null!=r&&0!==r.selectedAnimals.length?(e.raceLegs.forEach(a=>{(null==r?void 0:r.selectedAnimals.some(s=>s.raceCourseType===a.courseType))||(i=!1);var o=null==r?void 0:r.selectedAnimals.find(s=>s.raceCourseType===a.courseType);void 0!==o&&!this.lookupService.canAnimalRace(o)&&(i=!1)}),e.isCompleted&&(i=!1),!this.globalService.globalVar.tutorials.tutorialCompleted&&4===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!1,this.globalService.globalVar.tutorials.currentTutorialId+=1),i&&this.raceSelected.emit(e)):i=!1}selectLocalRace(e){var i=!0,r=e.localRaceType===Ut.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(s=>s.raceCourseType===o.courseType))||(i=!1)}),r&&this.lookupService.getRemainingFreeRacesPerPeriod()<=0&&(i=!1),i&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):i=!1}getRacesRequiredForMedal(){var e=this.globalService.globalVar.resources.find(u=>"International Races"===u.name),i=this.globalService.globalVar.resources.find(u=>"National Races"===u.name);if(null!=e&&e.amount>0){var r=5,a=this.globalService.globalVar.modifiers.find(u=>"internationalRacesToMedalModifier"===u.text);null!=a&&(r=a.value),this.winsNeededUntilNextMedal=r-this.globalService.globalVar.nationalRaceCountdown}else if(null!=i&&i.amount>0){var o=12,s=this.globalService.globalVar.modifiers.find(u=>"nationalRacesToMedalModifier"===u.text);null!=s&&(o=s.value),this.winsNeededUntilNextMedal=o-this.globalService.globalVar.nationalRaceCountdown}else{var l=50,c=this.globalService.globalVar.modifiers.find(u=>"freeRacesToMedalModifier"===u.text);null!=c&&(l=c.value),this.winsNeededUntilNextMedal=l-this.globalService.globalVar.nationalRaceCountdown}}handleTutorial(){var e,i;!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.tutorialActive=!0,this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&5===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&6===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(e=this.globalService.globalVar.animals.find(r=>r.type===L.Monkey))||void 0===e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&9===this.globalService.globalVar.tutorials.currentTutorialId&&(null===(i=this.globalService.globalVar.animals.find(r=>r.type===L.Hare))||void 0===i?void 0:i.isAvailable)&&(this.globalService.globalVar.tutorials.showTutorial=!0)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(kn),P(bi),P(An))},t.\u0275cmp=_t({type:t,selectors:[["app-circuit-view"]],outputs:{raceSelected:"raceSelected"},decls:28,vars:8,consts:[[1,"circuitViewDiv"],[1,"circuitRaceHeader","s4Heading"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"circuitRaceGrid"],[3,"ngClass","class","click",4,"ngFor","ngForOf"],["id","localRaceSection"],[1,"s4Heading"],[1,"localRaceGrid"],[3,"class","click",4,"ngFor","ngForOf"],["circuitRewardContent",""],[3,"ngClass","click"],[3,"index","race","showStartText"],[3,"click"],[1,"popoverClass"]],template:function(e,i){if(1&e&&(f(0,"div",0),D(1,"app-animal-deck")(2,"hr"),f(3,"div",1)(4,"span",2),g(5,"Circuit Rank "),f(6,"strong"),g(7),h()(),D(8,"br")(9,"br"),h(),f(10,"div",3),x(11,qH,2,7,"div",4),h(),D(12,"hr"),f(13,"div",5)(14,"span",6),g(15,"Free Races"),h(),D(16,"br"),f(17,"em"),g(18),h(),D(19,"br"),f(20,"em"),g(21),h(),D(22,"br")(23,"br"),f(24,"div",7),x(25,XH,2,6,"div",8),h()()(),x(26,YH,2,1,"ng-template",null,9,ut)),2&e){const r=lt(27);p(4),_("ngbPopover",r),p(3),nt(i.circuitRank),p(4),_("ngForOf",i.availableCircuitRaces),p(7),$g(" ",i.freeRacesRemaining," of ",i.totalFreeRaces," remaining -- resets in ",i.freeRaceTimer,""),p(3),Z("Wins needed until next medal: ",i.winsNeededUntilNextMedal,""),p(4),_("ngForOf",i.availableLocalRaces)}},directives:[O0,Wr,on,Ji,N0],styles:['.circuitRaceHeader[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.circuitRaceGrid[_ngcontent-%COMP%]{height:100%;display:grid;text-align:center;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"circuitRace1 circuitRace2 circuitRace3"}.circuitRace1[_ngcontent-%COMP%]{grid-area:circuitRace1}.circuitRace2[_ngcontent-%COMP%]{grid-area:circuitRace2}.circuitRace3[_ngcontent-%COMP%]{grid-area:circuitRace3}.tutorialActive[_ngcontent-%COMP%]{border:red 1px solid!important}.localRaceGrid[_ngcontent-%COMP%]{text-align:center;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"localRace1 localRace2 localRace3"}.localRace1[_ngcontent-%COMP%]{grid-area:localRace1}.localRace2[_ngcontent-%COMP%]{grid-area:localRace2}.localRace3[_ngcontent-%COMP%]{grid-area:localRace3}#localRaceSection[_ngcontent-%COMP%]{text-align:center}']}),t})();function KH(t,n){if(1&t){const e=pe();f(0,"div",10),I("click",function(){B(e);const r=S(2);return r.selectLocalRace(r.availableMonoRace)}),f(1,"span",11),g(2,"Mono Race "),f(3,"strong"),g(4),h()(),D(5,"br")(6,"app-race-description",12),h()}if(2&t){const e=S(2);p(4),nt(e.monoRaceRank),p(2),_("race",e.availableMonoRace)("showStartText",!0)}}function ZH(t,n){1&t&&(f(0,"div",13),g(1," Next Mono Race Available After Circuit Rank Up "),h())}function JH(t,n){if(1&t&&(f(0,"div",7),x(1,KH,7,3,"div",8),x(2,ZH,2,0,"div",9),D(3,"hr"),h()),2&t){const e=S();p(1),_("ngIf",null!=e.availableMonoRace),p(1),_("ngIf",void 0===e.availableMonoRace||null==e.availableMonoRace)}}function e7(t,n){if(1&t){const e=pe();f(0,"div",17),I("click",function(){B(e);const r=S(2);return r.selectLocalRace(r.availableDuoRace)}),f(1,"span",11),g(2,"Duo Race "),f(3,"strong"),g(4),h()(),D(5,"br")(6,"app-race-description",12),h()}if(2&t){const e=S(2);p(4),nt(e.duoRaceRank),p(2),_("race",e.availableDuoRace)("showStartText",!0)}}function t7(t,n){1&t&&(f(0,"div",18),g(1," Next Duo Race Available After Circuit Rank Up "),h())}function i7(t,n){if(1&t&&(f(0,"div",14),x(1,e7,7,3,"div",15),x(2,t7,2,0,"div",16),D(3,"hr"),h()),2&t){const e=S();p(1),_("ngIf",null!=e.availableDuoRace),p(1),_("ngIf",void 0===e.availableDuoRace||null==e.availableDuoRace)}}function n7(t,n){if(1&t){const e=pe();f(0,"div",22),I("click",function(){B(e);const r=S(2);return r.selectLocalRace(r.availableRainbowRace)}),f(1,"span",11),g(2,"Rainbow Race "),f(3,"strong"),g(4),h()(),D(5,"br")(6,"app-race-description",12),h()}if(2&t){const e=S(2);p(4),nt(e.rainbowRaceRank),p(2),_("race",e.availableRainbowRace)("showStartText",!0)}}function r7(t,n){1&t&&(f(0,"div",23),g(1," Next Rainbow Race Available After Circuit Rank Up "),h())}function a7(t,n){if(1&t&&(f(0,"div",19),x(1,n7,7,3,"div",20),x(2,r7,2,0,"div",21),D(3,"hr"),h()),2&t){const e=S();p(1),_("ngIf",null!=e.availableRainbowRace),p(1),_("ngIf",void 0===e.availableRainbowRace||null==e.availableRainbowRace)}}function o7(t,n){if(1&t){const e=pe();f(0,"div",27),I("click",function(){B(e);const r=S(2);return r.selectLocalRace(r.availablePinnacleRace)}),f(1,"span",11),g(2,"Pinnacle Floor "),f(3,"strong"),g(4),h()(),D(5,"br")(6,"app-race-description",12),h()}if(2&t){const e=S(2);p(4),nt(e.pinnacleRaceFloor),p(2),_("race",e.availablePinnacleRace)("showStartText",!0)}}function s7(t,n){1&t&&(f(0,"div",28),g(1," Next Pinnacle Floor Available After Circuit Rank Up "),h())}function l7(t,n){if(1&t&&(f(0,"div",24),x(1,o7,7,3,"div",25),x(2,s7,2,0,"div",26),D(3,"hr"),h()),2&t){const e=S();p(1),_("ngIf",null!=e.availablePinnacleRace),p(1),_("ngIf",void 0===e.availablePinnacleRace||null==e.availablePinnacleRace)}}let c7=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.utilityService=i,this.lookupService=r,this.gameLoopService=a,this.raceSelected=new ot,this.freeRaceTimer="",this.freeRacesRemaining=10,this.totalFreeRaces=10}ngOnInit(){this.availableLocalRaces=[];var e=this.getNextAvailableSpecialRace(Ut.Mono);void 0!==e&&(this.availableMonoRace=e);var i=this.getNextAvailableSpecialRace(Ut.Duo);void 0!==i&&(this.availableDuoRace=i);var r=this.getNextAvailableSpecialRace(Ut.Rainbow);void 0!==r&&(this.availableRainbowRace=r);var a=this.getNextAvailableSpecialRace(Ut.Pinnacle);void 0!==a&&(this.availablePinnacleRace=a);var o=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);null!=o&&(null!=this.availableDuoRace&&(this.availableDuoRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableDuoRace.raceLegs,o)),null!=this.availableRainbowRace&&(this.availableRainbowRace.raceLegs=this.globalService.reorganizeLegsByDeckOrder(this.availableRainbowRace.raceLegs,o))),this.globalService.globalVar.settings.get("useNumbersForCircuitRank")?(null!=this.availableMonoRace&&(this.monoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableMonoRace.requiredRank).toString()),null!=this.availableDuoRace&&(this.duoRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableDuoRace.requiredRank).toString()),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.utilityService.getNumericValueOfCircuitRank(this.availableRainbowRace.requiredRank).toString()),null!=this.availablePinnacleRace&&(this.pinnacleRaceFloor=this.utilityService.getNumericValueOfCircuitRank(this.availablePinnacleRace.requiredRank).toString())):(null!=this.availableMonoRace&&(this.monoRaceRank=this.availableMonoRace.requiredRank),null!=this.availableDuoRace&&(this.duoRaceRank=this.availableDuoRace.requiredRank),null!=this.availableRainbowRace&&(this.rainbowRaceRank=this.availableRainbowRace.requiredRank),null!=this.availablePinnacleRace&&(this.pinnacleRaceFloor=this.availablePinnacleRace.requiredRank)),this.areMonoRacesAvailable=this.lookupService.isItemUnlocked("monoRace"),this.areDuoRacesAvailable=this.lookupService.isItemUnlocked("duoRace"),this.areRainbowRacesAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.arePinnacleRacesAvailable=this.lookupService.isItemUnlocked("thePinnacle")}getNextAvailableSpecialRace(e){return e===Ut.Mono&&this.globalService.GenerateMonoRaces(this.globalService.globalVar.monoRank),e===Ut.Duo&&this.globalService.GenerateDuoRaces(this.globalService.globalVar.duoRank),e===Ut.Rainbow&&this.globalService.GenerateRainbowRaces(this.globalService.globalVar.rainbowRank),e===Ut.Pinnacle&&this.globalService.GeneratePinnacleRaces(this.globalService.globalVar.pinnacleFloor),this.globalService.globalVar.localRaces.find(i=>i.localRaceType===e)}sortByRankRequired(e,i){return e.requiredRank>i.requiredRank?1:i.requiredRank>e.requiredRank?-1:0}selectLocalRace(e){var i=!0,r=e.localRaceType===Ut.Free,a=this.globalService.globalVar.animalDecks.find(o=>o.isPrimaryDeck);null!=a&&0!==a.selectedAnimals.length?(e.raceLegs.forEach(o=>{(null==a?void 0:a.selectedAnimals.some(l=>l.raceCourseType===o.courseType))||(i=!1);var s=null==a?void 0:a.selectedAnimals.find(l=>l.raceCourseType===o.courseType);void 0!==s&&!this.lookupService.canAnimalRace(s)&&(i=!1)}),i&&(r&&(this.globalService.globalVar.freeRaceCounter+=1),this.raceSelected.emit(e))):i=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(kn),P(bi),P(An))},t.\u0275cmp=_t({type:t,selectors:[["app-local-view"]],outputs:{raceSelected:"raceSelected"},decls:9,vars:4,consts:[[1,"localViewDiv"],[1,"localRaceHeader"],[1,"allLocalRaces"],["id","monoRaceSection",4,"ngIf"],["id","duoRaceSection",4,"ngIf"],["id","rainbowRaceSection",4,"ngIf"],["id","pinnacleRaceSection",4,"ngIf"],["id","monoRaceSection"],["class","monoRace",3,"click",4,"ngIf"],["class","monoRace",4,"ngIf"],[1,"monoRace",3,"click"],[1,"s4Heading"],[3,"race","showStartText"],[1,"monoRace"],["id","duoRaceSection"],["class","duoRace",3,"click",4,"ngIf"],["class","duoRace",4,"ngIf"],[1,"duoRace",3,"click"],[1,"duoRace"],["id","rainbowRaceSection"],["class","rainbowRace",3,"click",4,"ngIf"],["class","rainbowRace",4,"ngIf"],[1,"rainbowRace",3,"click"],[1,"rainbowRace"],["id","pinnacleRaceSection"],["class","pinnacleRace",3,"click",4,"ngIf"],["class","pinnacleRace",4,"ngIf"],[1,"pinnacleRace",3,"click"],[1,"pinnacleRace"]],template:function(e,i){1&e&&(f(0,"div",0),D(1,"div",1)(2,"app-animal-deck")(3,"hr"),f(4,"div",2),x(5,JH,4,2,"div",3),x(6,i7,4,2,"div",4),x(7,a7,4,2,"div",5),x(8,l7,4,2,"div",6),h()()),2&e&&(p(5),_("ngIf",i.areMonoRacesAvailable),p(1),_("ngIf",i.areDuoRacesAvailable),p(1),_("ngIf",i.areRainbowRacesAvailable),p(1),_("ngIf",i.arePinnacleRacesAvailable))},directives:[O0,si,N0],styles:[".allLocalRaces[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}"]}),t})();function u7(t,n){1&t&&(f(0,"div"),D(1,"br"),h())}function d7(t,n){1&t&&(f(0,"span",8),g(1," Will Start Race "),h())}function h7(t,n){if(1&t){const e=pe();f(0,"button",12),I("click",function(){B(e);const r=S(5).$implicit;return S().chooseToStartRace(r)}),g(1,"Choose To Start Race"),h()}}function f7(t,n){if(1&t&&(f(0,"span")(1,"em",7),g(2,"Resting..."),h()()),2&t){const e=S(6);p(1),_("ngbPopover",e.getRestingPopover())}}function p7(t,n){if(1&t&&(f(0,"span"),x(1,h7,2,0,"button",11),x(2,f7,3,1,"span",6),h()),2&t){const e=S(4).$implicit,i=S();p(1),_("ngIf",!i.isSetToRelay(e)&&i.canRelay(e)),p(1),_("ngIf",!i.isSetToRelay(e)&&!i.canRelay(e))}}function g7(t,n){if(1&t&&(f(0,"div"),x(1,d7,2,0,"span",10),x(2,p7,3,2,"span",6),h()),2&t){const e=S(3).$implicit,i=S();p(1),_("ngIf",i.isCurrentlyRacing(e)),p(1),_("ngIf",!i.isCurrentlyRacing(e))}}function v7(t,n){1&t&&(f(0,"span",8),g(1," Currently Racing "),h())}function m7(t,n){if(1&t){const e=pe();f(0,"button",14),I("click",function(){B(e);const r=S(4).$implicit;return S().pullFromRace(r)}),g(1," Pull From Race "),h()}}function b7(t,n){if(1&t){const e=pe();f(0,"button",12),I("click",function(){B(e);const r=S(5).$implicit;return S().relayAnimal(r)}),g(1,"Relay"),h()}}function _7(t,n){if(1&t&&(f(0,"span")(1,"em",7),g(2,"Resting..."),h()()),2&t){const e=S(6);p(1),_("ngbPopover",e.getRestingPopover())}}function y7(t,n){1&t&&(f(0,"span"),g(1,"Set To Relay"),h())}function w7(t,n){if(1&t&&(f(0,"span"),x(1,b7,2,0,"button",11),x(2,_7,3,1,"span",6),x(3,y7,2,0,"span",6),h()),2&t){const e=S(4).$implicit,i=S();p(1),_("ngIf",!i.isSetToRelay(e)&&i.canRelay(e)),p(1),_("ngIf",!i.isSetToRelay(e)&&!i.canRelay(e)),p(1),_("ngIf",i.isSetToRelay(e))}}function S7(t,n){if(1&t&&(f(0,"div"),x(1,v7,2,0,"span",10),x(2,m7,2,0,"button",13),x(3,w7,4,3,"span",6),h()),2&t){const e=S(3).$implicit,i=S();p(1),_("ngIf",i.isCurrentlyRacing(e)),p(1),_("ngIf",i.isCurrentlyRacing(e)),p(1),_("ngIf",!i.isCurrentlyRacing(e))}}function C7(t,n){if(1&t&&(f(0,"div"),x(1,g7,3,2,"div",6),x(2,S7,4,3,"div",6),h()),2&t){const e=S(3);p(1),_("ngIf",!e.enteredEvent()),p(1),_("ngIf",e.enteredEvent())}}function T7(t,n){if(1&t&&(f(0,"div")(1,"em"),g(2),h()()),2&t){const e=S(3);p(2),Z("Breed Level ",e.breedLevelRequired," Required")}}function D7(t,n){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"div")(3,"span",7)(4,"span",8),g(5,"Morale:"),h(),g(6),Lt(7,"number"),h(),D(8,"br"),f(9,"span",7)(10,"span",8),g(11,"Energy:"),h(),g(12),Lt(13,"number"),h(),D(14,"br"),x(15,u7,2,0,"div",6),D(16,"div",9),h(),D(17,"br")(18,"br"),x(19,C7,3,2,"div",6),x(20,T7,3,1,"div",6),h()),2&t){const e=S().$implicit,i=S();p(3),_("ngbPopover",i.getMoralePopover(e)),p(3),Z(" ",oi(7,8,i.getMorale(e),"1.2-2"),"%"),p(3),_("ngbPopover",i.getEnergyPopover(e)),p(3),Z(" ",oi(13,11,i.getExhaustion(e),"1.2-2"),"%"),p(3),_("ngIf",""===i.getUseCountInformation(e)),p(1),_("innerHTML",i.getUseCountInformation(e),Bt),p(3),_("ngIf",i.canEnterGrandPrix(e)),p(1),_("ngIf",!i.canEnterGrandPrix(e))}}function R7(t,n){if(1&t&&(f(0,"div",4)(1,"span",5),g(2),h(),x(3,D7,21,14,"div",6),h()),2&t){const e=n.$implicit,i=S();p(1),_("ngClass",i.getColorClass(e)),p(1),nt(e.name),p(1),_("ngIf",i.hasEventStarted()&&!i.eventCompleted())}}let x7=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.componentCommunicationService=i,this.lookupService=r,this.utilityService=a,this.organizedAnimals=[]}ngOnInit(){var e=this.globalService.globalVar.animalDecks.find(o=>o.isEventDeck);if(void 0!==e&&(this.deck=e),null!=this.deck)if(this.deck.isCourseOrderActive){for(var i=0;i<this.deck.selectedAnimals.length;i++)if(this.deck.courseTypeOrder.length>i){var r=this.deck.courseTypeOrder[i],a=this.deck.selectedAnimals.find(o=>o.raceCourseType===r);void 0!==a&&this.organizedAnimals.push(a)}}else this.deck.selectedAnimals.forEach(o=>{this.organizedAnimals.push(o)});this.breedLevelRequired=this.getBreedLevelRequired()}getMorale(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:100*i.morale}getExhaustion(e){if(null==this.globalService.globalVar.eventRaceData.animalData||0===this.globalService.globalVar.eventRaceData.animalData.length)return 0;var i=this.globalService.globalVar.eventRaceData.animalData.find(a=>a.associatedAnimalType===e.type);return null==i?0:100*i.exhaustionStatReduction}eventCompleted(){return this.globalService.globalVar.eventRaceData.isGrandPrixCompleted}hasEventStarted(){return!(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime)}enteredEvent(){return this.globalService.globalVar.eventRaceData.isRunning}canEnterGrandPrix(e){var i=!1,r=this.getBreedLevelRequired(),a=this.globalService.globalVar.animals.find(o=>o.type===e.type);return void 0!==a&&a.breedLevel>=r&&(i=!0),i}getBreedLevelRequired(){var e=50,i=this.globalService.globalVar.modifiers.find(r=>"grandPrixBreedLevelRequiredModifier"===r.text);return null!=i&&(e=i.value),e}chooseToStartRace(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==i){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==i?void 0:i.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isCurrentlyRacing=!1}),i.isCurrentlyRacing=!0)}}}isCurrentlyRacing(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.isCurrentlyRacing}isSetToRelay(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.isSetToRelay}canRelay(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(r=>r.associatedAnimalType===e.type);return null!=i&&i.exhaustionStatReduction>.5}relayAnimal(e){var i=this.globalService.globalVar.eventRaceData.animalData.find(o=>o.associatedAnimalType===e.type);if(void 0!==i){var r=this.globalService.globalVar.animals.find(o=>o.type===(null==i?void 0:i.associatedAnimalType));if(null!=r){this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(r);var a=this.globalService.shouldShowSlowSegmentWarning(r);this.lookupService.slowSegmentWarning(a)&&(this.globalService.globalVar.eventRaceData.animalData.forEach(o=>{o.isSetToRelay=!1}),i.isSetToRelay=!0)}}}pullFromRace(e){this.globalService.stopGrandPrixRace()}getColorClass(e){return null!=e?{flatlandColor:"Flatland"===e.getRaceCourseType(),mountainColor:"Mountain"===e.getRaceCourseType(),waterColor:"Ocean"===e.getRaceCourseType(),tundraColor:"Tundra"===e.getRaceCourseType(),volcanicColor:"Volcanic"===e.getRaceCourseType()}:{}}getRestingPopover(){return"Racer must be above 50% energy to race"}getMoralePopover(e){var i="",r=this.getMorale(e);if(void 0!==r){var a=.9,o=this.globalService.globalVar.modifiers.find(l=>"exhaustionStatLossModifier"===l.text);void 0!==o&&(a=o.value);var s=1-a;a=1-(s*=1/(r/100)),i="Your current Morale is "+r.toFixed(2)+"%. Your energy will reduce by "+(100*(1-a)).toFixed(2)+"% every time you run out of stamina."}return i}getEnergyPopover(e){return""+"Your current Energy is "+this.getExhaustion(e).toFixed(2)+"%. Your stats are reduced to this amount while racing in the grand prix."}getUseCountInformation(e){var i="",r=this.globalService.globalVar.eventRaceData.eventAbilityData,a=this.globalService.globalVar.animals.find(o=>o.type===e.type);if(null!=a)return a.type===L.Horse&&"Inspiration"===a.ability.name&&(i+="Inspiration Relay Count: "+r.inspirationUseCount),a.type===L.Cheetah&&"On The Hunt"===a.ability.name&&(i+="On The Hunt Use Count: "+r.onTheHuntUseCount+" / "+r.onTheHuntUseCap),a.type===L.Goat&&("Sure-footed"===a.ability.name&&(i+="Sure-footed Use Count: "+r.sureFootedUseCount+" / "+r.sureFootedUseCap),"Deep Breathing"===a.ability.name&&(i+="Deep Breathing Relay Count: "+r.deepBreathingUseCount+" / "+r.deepBreathingUseCap)),a.type===L.Gecko&&"Night Vision"===a.ability.name&&(i+="Night Vision Use Count: "+r.nightVisionUseCount+" / "+r.nightVisionUseCap),a.type===L.Dolphin&&("Flowing Current"===a.ability.name&&(i+="Flowing Current Relay Count: "+r.flowingCurrentUseCount),"Navigator"===a.ability.name&&(i+="Navigator Relay Count: "+r.navigatorUseCount)),a.type===L.Octopus&&"Big Brain"===a.ability.name&&(i+="Big Brain Relay Count: "+r.bigBrainUseCount+" / "+r.bigBrainUseCap),a.type===L.Penguin&&"Quick Toboggan"===a.ability.name&&(i+="Quick Toboggan Use Count: "+r.quickTobogganUseCount+" / "+r.quickTobogganUseCap),a.type===L.Caribou&&("Herd Mentality"===a.ability.name&&(i+="Herd Mentality Relay Count: "+r.herdMentalityUseCount+" / "+r.herdMentalityUseCap),"Special Delivery"===a.ability.name&&(i+="Special Delivery Relay Count: "+r.specialDeliveryUseCount+" / "+r.specialDeliveryUseCap)),this.utilityService.getSanitizedHtml(i)}goToDeckView(){this.componentCommunicationService.setNewView(Ct.relayTeams)}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(cn),P(bi),P(kn))},t.\u0275cmp=_t({type:t,selectors:[["app-event-animal-deck"]],decls:7,vars:2,consts:[[1,"deckName"],[1,"clickableText",3,"click"],[1,"flex"],["class","eventAnimal",4,"ngFor","ngForOf"],[1,"eventAnimal"],[1,"coloredText",3,"ngClass"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[1,"keyword"],[3,"innerHTML"],["class","keyword",4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","keyword",3,"click",4,"ngIf"],[1,"keyword",3,"click"]],template:function(e,i){1&e&&(f(0,"div")(1,"div",0)(2,"strong",1),I("click",function(){return i.goToDeckView()}),g(3),h()(),D(4,"br"),f(5,"div",2),x(6,R7,4,3,"div",3),h()()),2&e&&(p(3),nt(i.deck.name),p(3),_("ngForOf",i.organizedAnimals))},directives:[on,Ji,si,Wr],pipes:[bo],styles:[".flex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.deckName[_ngcontent-%COMP%]{text-align:center}.eventAnimal[_ngcontent-%COMP%]{flex:1}"]}),t})();const M7=["loadingModal"];function k7(t,n){1&t&&(f(0,"p",6),g(1,"The Grand Prix is currently under construction. "),D(2,"br")(3,"br"),f(4,"em"),g(5,"I'm fixing a few bugs and making some improvements related to the Grand Prix but it will reopen soon!"),h()())}function A7(t,n){if(1&t){const e=pe();f(0,"div",14),I("click",function(){B(e);const r=S(3),a=lt(9);return r.selectEventRace(a)}),g(1),D(2,"br"),h()}if(2&t){const e=S(3);_("ngbPopover",lt(7)),p(1),Z("Bonus Time: ",e.bonusTime," ")}}function P7(t,n){1&t&&(f(0,"h6",20),g(1,"View Race"),h())}function E7(t,n){1&t&&(f(0,"h6",24)(1,"em"),g(2,"Please Wait -- Offline Time Is Calculating"),h()())}function I7(t,n){1&t&&(f(0,"h6",20),g(1,"Start"),h())}function V7(t,n){1&t&&(f(0,"h6")(1,"em"),g(2,"Completed!"),h()())}function O7(t,n){if(1&t&&(f(0,"div",25),g(1),h()),2&t){const e=S(4);p(1),Z(" ",e.popoverText," ")}}const N7=function(t){return{raceNotAllowed:t}};function F7(t,n){if(1&t){const e=pe();f(0,"div",15)(1,"div")(2,"span",16),g(3,"Grand Prix "),f(4,"strong"),g(5),h()(),D(6,"br"),f(7,"span",17),I("click",function(){B(e);const r=S(3),a=lt(3);return r.openRewardsModal(a)}),g(8),h(),D(9,"br")(10,"br"),f(11,"div",18)(12,"div",19),I("click",function(){B(e);const r=S(3),a=lt(9);return r.selectEventRace(a)}),f(13,"span")(14,"span",20),g(15,"Forecast:"),h(),g(16),h(),D(17,"br"),g(18),Lt(19,"number"),D(20,"br"),x(21,P7,2,0,"h6",21),x(22,E7,3,0,"h6",22),x(23,I7,2,0,"h6",21),x(24,V7,3,0,"h6",9),h()(),x(25,O7,2,1,"ng-template",null,23,ut),h()()}if(2&t){const e=lt(26),i=S(3);p(5),nt(i.grandPrixData.rank),p(3),rn("",i.globalService.globalVar.eventRaceData.remainingRewards," / ",i.globalService.globalVar.eventRaceData.totalRewards," rewards remaining"),p(4),_("ngClass",pn(15,N7,i.grandPrixData.isCatchingUp))("ngbPopover",e)("disablePopover",""===i.popoverText),p(4),Z(" ",void 0===i.grandPrixData.weatherCluster?"Unknown":i.lookupService.getWeatherClusterFromEnum(i.grandPrixData.weatherCluster),""),p(2),Z(" ",oi(19,12,i.remainingMeters,"1.")," Meters Remaining "),p(3),_("ngIf",i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted&&!i.grandPrixData.isCatchingUp),p(1),_("ngIf",i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted&&i.grandPrixData.isCatchingUp),p(1),_("ngIf",!i.grandPrixData.isRunning&&!i.grandPrixData.isGrandPrixCompleted),p(1),_("ngIf",!i.grandPrixData.isRunning&&i.grandPrixData.isGrandPrixCompleted)}}function B7(t,n){if(1&t){const e=pe();f(0,"div")(1,"label",26),g(2,"Your animals will automatically relay the segment after they lose energy and it is below "),h(),f(3,"input",27),I("ngModelChange",function(r){return B(e),S(3).relayEnergy=r})("change",function(){return B(e),S(3).updateRelayEnergy()}),h(),g(4," %. "),f(5,"em"),g(6,"Must be between 50% and 99%."),h(),D(7,"br"),f(8,"span",28)(9,"label")(10,"input",29),I("ngModelChange",function(r){return B(e),S(3).doNotAutoRelayBelowEnergyFloor=r})("input",function(){return B(e),S(3).doNotAutoRelayBelowEnergyFloorToggle()}),h(),f(11,"span"),g(12,"Do not relay to animals below "),f(13,"strong"),g(14),h(),g(15,"% energy."),h()()()()}if(2&t){const e=S(3);p(3),_("ngModel",e.relayEnergy),p(7),_("ngModel",e.doNotAutoRelayBelowEnergyFloor),p(4),nt(e.relayEnergy)}}function L7(t,n){1&t&&(f(0,"div",32),g(1," None "),h())}function U7(t,n){if(1&t&&(f(0,"td")(1,"span",20),g(2),h(),g(3),h()),2&t){const e=n.$implicit;p(2),nt(e.name),p(1),Z(": ",e.amount,"")}}function H7(t,n){if(1&t&&(f(0,"tr"),x(1,U7,4,2,"td",33),h()),2&t){const e=n.$implicit;p(1),_("ngForOf",e)}}function G7(t,n){if(1&t&&(f(0,"div",32)(1,"table"),x(2,H7,2,1,"tr",33),h()()),2&t){const e=S(4);p(2),_("ngForOf",e.rewardRows)}}function z7(t,n){if(1&t&&(f(0,"div"),D(1,"br")(2,"br"),f(3,"div",30)(4,"span",16),g(5,"Previous Grand Prix Rewards"),h(),x(6,L7,2,0,"div",31),x(7,G7,3,1,"div",31),h()()),2&t){const e=S(3);p(6),_("ngIf",0===e.previousRaceRewardList.length),p(1),_("ngIf",e.previousRaceRewardList.length>0)}}function j7(t,n){if(1&t){const e=pe();f(0,"div")(1,"div"),g(2),D(3,"br"),x(4,A7,3,2,"div",10),f(5,"button",11),I("click",function(){B(e);const r=S(2),a=lt(5);return r.openInfoModal(a)}),g(6,"Grand Prix Info"),h(),f(7,"button",12),I("click",function(){return B(e),S(2).goToTokenShop()}),g(8,"Token Shop"),h(),D(9,"br")(10,"br"),h(),D(11,"br"),x(12,F7,27,17,"div",13),D(13,"br"),f(14,"div"),D(15,"app-event-animal-deck"),h(),D(16,"br"),x(17,B7,16,3,"div",9),x(18,z7,8,2,"div",9),h()}if(2&t){const e=S(2);p(2),rn(" ",e.eventRaceNotice," ",e.eventRaceTimer," "),p(2),_("ngIf",""!==e.bonusTime),p(8),_("ngIf",e.isEventRaceAvailable),p(5),_("ngIf",e.isEventRaceAvailable),p(1),_("ngIf",null!=e.previousRaceRewardList&&!e.isEventRaceAvailable)}}function $7(t,n){1&t&&(f(0,"div"),g(1," Nothing here yet, but maybe as you climb the circuit ranks you might be invited to a new type of race. "),h())}function W7(t,n){if(1&t&&(f(0,"div",7),D(1,"div",8),x(2,j7,19,6,"div",9),x(3,$7,2,0,"div",9),h()),2&t){const e=S();p(2),_("ngIf",e.grandPrixUnlocked),p(1),_("ngIf",!e.grandPrixUnlocked)}}function q7(t,n){if(1&t){const e=pe();f(0,"div",34)(1,"div",35)(2,"h4",36),g(3,"Grand Prix Rewards"),h(),f(4,"button",37),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",38)(7,"div"),g(8),Lt(9,"number"),Lt(10,"number"),D(11,"br")(12,"br"),g(13),Lt(14,"number"),Lt(15,"number"),D(16,"br")(17,"br")(18,"div",39)(19,"div",39)(20,"br")(21,"div",39)(22,"div",39),h()(),f(23,"div",40)(24,"button",41),I("click",function(){return B(e).$implicit.dismiss()}),g(25,"Close"),h()()()}if(2&t){const e=S();p(8),Wg(" The further you go in the Grand Prix invitational, the more rewards you'll receive. Every ",oi(9,10,e.coinRewardInterval,"1.")," meters, you'll receive ",e.coinRewardAmount," Coins. Every ",oi(10,13,e.renownRewardInterval,"1.")," meters, you'll receive ",e.renownRewardAmount," Renown. Also, you'll be able to obtain rare tokens that can be spent on unique upgrades. "),p(5),rn(" Distance Covered: ",oi(14,16,(e.grandPrixData.totalDistance-e.remainingMeters).toFixed(0),"1.")," / ",oi(15,19,e.grandPrixData.totalDistance,"1.")," "),p(5),_("innerHTML",e.getGrandPrixCoinRewardsPopover(),Bt),p(1),_("innerHTML",e.getGrandPrixRenownRewardsPopover(),Bt),p(2),_("innerHTML",e.getGrandPrixFoodRewardsPopover(),Bt),p(1),_("innerHTML",e.getGrandPrixTokenRewardsPopover(),Bt)}}function X7(t,n){if(1&t){const e=pe();f(0,"div",34)(1,"div",35)(2,"h4",36),g(3,"Grand Prix Info"),h(),f(4,"button",37),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",38)(7,"div"),g(8," You've been invited to the "),f(9,"span",20),g(10,"Grand Prix"),h(),g(11," invitational, which is a marathon style race that runs for 51 hours twice a week. You can start the race at any time during the start and stop point of the Grand Prix. "),f(12,"b"),g(13,"It will run on its own in the background -- you don't have to watch your animals race for it to run."),h(),g(14," You have the option to view the race as desired by clicking the race. The weekly start and end times are: "),D(15,"br")(16,"br"),f(17,"span",20),g(18,"Weekday Marathon"),h(),g(19),D(20,"br"),f(21,"span",20),g(22,"Weekend Marathon"),h(),g(23),D(24,"br")(25,"br"),g(26),D(27,"br")(28,"br"),f(29,"span",20),g(30,"Morale"),h(),g(31," - This affects how much your stats reduce when running out of stamina. By default, your stats will reduce by 10% while Morale is at 100%. Morale can range from 50% to 300%. Gain Morale by completing segments and Bursting. Lose Morale when you stumble or lose focus. "),D(32,"br"),f(33,"span",20),g(34,"Energy"),h(),g(35," - The percent your stats are currently at from their maximum. This is increased slightly over time while a racer is not racing. "),D(36,"br"),f(37,"span",20),g(38,"*Note that these values have no impact on any race other than the Grand Prix."),h(),D(39,"br")(40,"br"),g(41," Maintain your morale and energy to get the most out of your racing animals. You can Relay to another animal in your event deck at any point, although the Relay will only occur after the completion of the current race leg. "),D(42,"br")(43,"br"),g(44," Race as far as you can to gain "),f(45,"span",42),g(46,"Coins"),h(),g(47,", "),f(48,"span",43),g(49,"Renown"),h(),g(50,", and the unique resource "),f(51,"span",42),g(52,"Tokens"),h(),g(53,". Click '"),f(54,"em"),g(55,"Rewards"),h(),g(56,"' to track your progress on gaining rewards. "),h()(),f(57,"div",40)(58,"button",41),I("click",function(){return B(e).$implicit.dismiss()}),g(59,"Close"),h()()()}if(2&t){const e=S();p(19),Z(" - ",e.weekDayGrandPrixTimeSpan," "),p(4),Z(" - ",e.weekEndGrandPrixTimeSpan," "),p(3),Z(" To run in the Grand Prix, animals must be at least Breed Level ",e.requiredBreedLevel,". The animals in your event deck will be shown below along with their current morale and energy. ")}}function Y7(t,n){1&t&&(f(0,"div",25),g(1," Bonus Time is accrued from effects that delay competitors or extend the length of a race. Once the Grand Prix event time ends, any bonus time will continue to play out before your entry to the Grand Prix ends. "),h())}function Q7(t,n){1&t&&(f(0,"div",25),g(1," Loading... "),h())}let K7=(()=>{class t{constructor(e,i,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.raceLogicService=a,this.sanitizer=o,this.modalService=s,this.componentCommunicationService=l,this.utilityService=c,this.raceSelected=new ot,this.popoverText="",this.cannotRace=!1,this.eventRaceReleased=!0,this.eventRaceNotice="",this.eventRaceTimer="",this.bonusTime="",this.grandPrixUnlocked=!1,this.relayEnergy=50,this.doNotAutoRelayBelowEnergyFloor=!1,this.doNotAutoRelayBelowEnergyFloorToggle=()=>{this.doNotAutoRelayBelowEnergyFloor=!this.doNotAutoRelayBelowEnergyFloor,this.globalService.globalVar.doNotRelayBelowEnergyFloor=this.doNotAutoRelayBelowEnergyFloor}}ngOnInit(){var e=this;this.grandPrixData=this.globalService.globalVar.eventRaceData,this.previousRaceRewardList=this.globalService.globalVar.previousEventRewards,this.relayEnergy=this.globalService.globalVar.relayEnergyFloor,this.doNotAutoRelayBelowEnergyFloor=this.globalService.globalVar.doNotRelayBelowEnergyFloor,this.grandPrixUnlocked=this.lookupService.isItemUnlocked("grandPrix"),this.weekDayGrandPrixTimeSpan=this.lookupService.getWeekDayGrandPrixTimeSpan(),this.weekEndGrandPrixTimeSpan=this.lookupService.getWeekEndGrandPrixTimeSpan(),this.requiredBreedLevel=this.lookupService.getBreedLevelRequiredForGrandPrix(),this.popoverText=this.getForecastPopoverText();var i=this.globalService.getGrandPrixRacingAnimal();if(!this.globalService.globalVar.eventRaceData.animalData.some(c=>c.isCurrentlyRacing)){var r=this.globalService.globalVar.eventRaceData.animalData.find(c=>c.associatedAnimalType==i.type);void 0!==r&&(r.isCurrentlyRacing=!0)}var a=this.globalService.globalVar.modifiers.find(c=>"grandPrixCoinRewardModifier"===c.text);null!=a&&(this.coinRewardAmount=a.value);var o=this.globalService.globalVar.modifiers.find(c=>"grandPrixRenownRewardModifier"===c.text);null!=o&&(this.renownRewardAmount=o.value);var s=this.globalService.globalVar.modifiers.find(c=>"metersPerCoinsGrandPrixModifier"===c.text);null!=s&&(this.coinRewardInterval=s.value);var l=this.globalService.globalVar.modifiers.find(c=>"metersPerRenownGrandPrixModifier"===c.text);null!=l&&(this.renownRewardInterval=l.value),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var c=xr(function*(u){e.setupEventTime(),e.grandPrixData=e.globalService.globalVar.eventRaceData,e.previousRaceRewardList=e.globalService.globalVar.previousEventRewards,e.previousRaceRewardList.length>0&&e.setupDisplayRewards(),e.remainingMeters=e.globalService.globalVar.eventRaceData.totalDistance-e.globalService.globalVar.eventRaceData.distanceCovered,null!=e.globalService.globalVar.eventRaceData&&null!=e.globalService.globalVar.eventRaceData.currentRaceSegment&&(e.grandPrixData.isCatchingUp=e.globalService.globalVar.eventRaceData.segmentTimeCounter>=e.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60*2)});return function(u){return c.apply(this,arguments)}}())}selectEventRace(e){if(!1===this.globalService.globalVar.eventRaceData.isRunning){var i=this.globalService.getGrandPrixRacingAnimal();if(null==i.type)return void alert("None of the animals in your event deck are capable of entering the Grand Prix. Swap to new animals or make adjustments to your existing animals to meet the criteria.");var r=this.globalService.shouldShowSlowSegmentWarning(i);if(!this.lookupService.slowSegmentWarning(r))return;this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(i),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(i),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}!this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&!this.globalService.globalVar.eventRaceData.isCatchingUp&&this.raceSelected.emit(this.globalService.globalVar.eventRaceData.currentRaceSegment)}setupEventTime(){var e=this.globalService.getTimeToEventRace();if(e>0){this.isEventRaceAvailable=this.globalService.globalVar.eventRaceData.bonusTime>0,this.eventRaceNotice="Next Grand Prix available in";var a=e-60*(i=Math.floor(e/3600))*60-60*(r=Math.floor(e/60-60*i)),o=Math.floor(a).toString(),s=i.toString(),l=r.toString();i<10&&(s=i<1||i>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}else{var i,r,c=this.globalService.getRemainingEventRaceTime();if(c>0)this.eventRaceNotice="Grand Prix ends in",this.isEventRaceAvailable=!0,a=c-60*(i=Math.floor(c/3600))*60-60*(r=Math.floor(c/60-60*i)),s=i.toString(),l=r.toString(),o=Math.floor(a).toString(),i<10&&(s=i<1||i>59?"00":String(s).padStart(2,"0")),r<10&&(l=r<1||r>59?"00":String(l).padStart(2,"0")),a<10&&(o=a<1||a>59?"00":String(o).padStart(2,"0")),this.eventRaceTimer=s+":"+l+":"+o}this.bonusTime=this.globalService.globalVar.eventRaceData.bonusTime>0?this.utilityService.convertSecondsToHHMMSS(this.globalService.globalVar.eventRaceData.bonusTime):""}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openInfoModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openLoadingModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}getGrandPrixFoodRewardsPopover(){var e="";if(this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank)>1)return e;var o=25e3,s=5e4,l=75e3,c=1e5,u=25e4,d=5e5,v=75e4,m=1e6,b=100;return e+=this.globalService.globalVar.eventRaceData.distanceCovered>=o?"<span class='crossed'>"+o.toLocaleString()+" meters - +"+b+" Strawberries</span><br/>":o.toLocaleString()+" meters - +"+b+" Strawberries<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=s?"<span class='crossed'>"+s.toLocaleString()+" meters - +"+b+" Apples</span><br/>":s.toLocaleString()+" meters - +"+b+" Apples<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=l?"<span class='crossed'>"+l.toLocaleString()+" meters - +"+b+" Oranges</span><br/>":l.toLocaleString()+" meters - +"+b+" Oranges<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=c?"<span class='crossed'>"+c.toLocaleString()+" meters - +5 Mangoes</span><br/>":c.toLocaleString()+" meters - +"+b+" Mangoes<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=u?"<span class='crossed'>"+u.toLocaleString()+" meters - +"+b+" Turnips</span><br/>":u.toLocaleString()+" meters - +"+b+" Turnips<br/>",e+=this.globalService.globalVar.eventRaceData.distanceCovered>=d?"<span class='crossed'>"+d.toLocaleString()+" meters - +"+b+" Bananas</span><br/>":d.toLocaleString()+" meters - +"+b+" Bananas<br/>",(e+=this.globalService.globalVar.eventRaceData.distanceCovered>=v?"<span class='crossed'>"+v.toLocaleString()+" meters - +"+b+" Carrots</span><br/>":v.toLocaleString()+" meters - +"+b+" Carrots<br/>")+(this.globalService.globalVar.eventRaceData.distanceCovered>=m?"<span class='crossed'>"+m.toLocaleString()+" meters - +10 Mangoes</span><br/>":m.toLocaleString()+" meters - +10 Mangoes<br/>")}getGrandPrixRenownRewardsPopover(){var r,a=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return r=this.globalService.globalVar.eventRaceData.totalDistance/(this.renownRewardInterval*a),Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/(this.renownRewardInterval*a))*this.renownRewardAmount+"/"+r*this.renownRewardAmount+" Renown obtained"}getGrandPrixCoinRewardsPopover(){var r,a=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank);return r=this.globalService.globalVar.eventRaceData.totalDistance/(this.coinRewardInterval*a),Math.floor(this.globalService.globalVar.eventRaceData.distanceCovered/(this.coinRewardInterval*a))*this.coinRewardAmount+"/"+r*this.coinRewardAmount+" Coins obtained"}getGrandPrixTokenRewardsPopover(){var e="",i=this.lookupService.getGrandPrixTokenRewards(),r=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),a=5e7,o=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken1MeterModifier"===w.text);null!=o&&(a=o.value);var s=i[0],l=5e7,c=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken2MeterModifier"===w.text);null!=c&&(l=c.value);var u=i[1],d=5e7,v=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken3MeterModifier"===w.text);null!=v&&(d=v.value);var m=i[2],b=5e7,y=this.globalService.globalVar.modifiers.find(w=>"grandPrixToken4MeterModifier"===w.text);null!=y&&(b=y.value);var C=i[3],k=this.globalService.globalVar.eventRaceData.distanceCovered;return e+=k>=a*r?"<span class='crossed'>"+s+"</span>\n":"<span>"+s+"</span>\n",e+=k>=l*r?"<span class='crossed'>"+u+"</span>\n":"<span>"+u+"</span>\n",e+=k>=d*r?"<span class='crossed'>"+m+"</span>\n":"<span>"+m+"</span>\n",this.sanitizer.sanitize(ri.HTML,this.sanitizer.bypassSecurityTrustHtml(e+=k>=b*r?"<span class='crossed'>"+C+"</span>\n":"<span>"+C+"</span>\n"))}getForecastPopoverText(){return this.lookupService.getWeatherClusterDescription(this.grandPrixData.weatherCluster)}goToTokenShop(){this.componentCommunicationService.setShopView(Ct.shop,ua.token)}setupDisplayRewards(){if(this.rewardCells=[],this.rewardRows=[],null!=this.previousRaceRewardList){for(var i=1;i<=this.previousRaceRewardList.length;i++)this.rewardCells.push({name:this.previousRaceRewardList[i-1].name,amount:this.previousRaceRewardList[i-1].amount}),i%4==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}updateRelayEnergy(){this.relayEnergy<50&&(this.relayEnergy=50),this.relayEnergy>99&&(this.relayEnergy=99),null!=this.globalService.globalVar.eventRaceData&&(this.globalService.globalVar.relayEnergyFloor=this.relayEnergy)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(An),P(bi),P(o0),P(Wo),P(To),P(cn),P(kn))},t.\u0275cmp=_t({type:t,selectors:[["app-event-view"]],viewQuery:function(e,i){if(1&e&&Sa(M7,7),2&e){let r;Si(r=Ci())&&(i.loadingContent=r.first)}},outputs:{raceSelected:"raceSelected"},decls:10,vars:2,consts:[["class","centered",4,"ngIf"],["class","eventViewDiv centered",4,"ngIf"],["grandPrixRewardModal",""],["grandPrixInfoModal",""],["bonusTimeContent",""],["loadingModal",""],[1,"centered"],[1,"eventViewDiv","centered"],[1,"eventRaceHeader"],[4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass","class","clickableText",3,"ngbPopover","click",4,"ngIf"],["type","button",1,"rightSpaced",3,"click"],[3,"click"],["id","grandPrix",4,"ngIf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText",3,"ngbPopover","click"],["id","grandPrix"],[1,"s4Heading"],[1,"helpText",3,"click"],[1,"raceDescription"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"clickableText","eventRaceDescription",3,"ngClass","ngbPopover","disablePopover","click"],[1,"keyword"],["class","keyword",4,"ngIf"],["class","raceCatchingUp",4,"ngIf"],["popContent",""],[1,"raceCatchingUp"],[1,"popoverClass"],["for","relay-energy"],["id","relay-energy","name","relay-energy","type","text","minlength","2","maxlength","2",1,"spaced","energyInput",3,"ngModel","ngModelChange","change"],["triggers","mouseenter:mouseleave",1,"checkboxOption"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],[1,"results"],["class","rewards",4,"ngIf"],[1,"rewards"],[4,"ngFor","ngForOf"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"],[1,"resourceKeyword"],[1,"progressionKeyword"]],template:function(e,i){1&e&&(x(0,k7,6,0,"p",0),x(1,W7,4,2,"div",1),x(2,q7,26,22,"ng-template",null,2,ut),x(4,X7,60,3,"ng-template",null,3,ut),x(6,Y7,2,0,"ng-template",null,4,ut),x(8,Q7,2,0,"ng-template",null,5,ut)),2&e&&(_("ngIf",!i.eventRaceReleased),p(1),_("ngIf",i.eventRaceReleased))},directives:[si,Wr,Ji,x7,qo,Hh,Il,bs,_s,nu,on],pipes:[bo],styles:[".eventRace[_ngcontent-%COMP%]{text-align:center;height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceDescription[_ngcontent-%COMP%], .popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.raceDescription[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.noRacer[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}.centered[_ngcontent-%COMP%]{text-align:center}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.energyInput[_ngcontent-%COMP%]{width:2rem}.rightSpaced[_ngcontent-%COMP%]{margin-right:1rem}.eventRaceDescription[_ngcontent-%COMP%]{width:40%;margin:auto}.raceNotAllowed[_ngcontent-%COMP%]{cursor:not-allowed!important}.raceCatchingUp[_ngcontent-%COMP%]{opacity:.5;color:var(--grayedOut-Text)!important}table[_ngcontent-%COMP%]{table-layout:fixed;width:60%;height:100%;text-align:center;margin-left:auto;margin-right:auto}"]}),t})();function Z7(t,n){if(1&t){const e=pe();f(0,"div",14)(1,"div",15)(2,"span",9),g(3,"Intermediate Track"),h(),D(4,"br"),f(5,"h6",10),I("click",function(){B(e);const r=S(2),a=lt(9);return r.openRewardsModal(a)}),g(6),h(),D(7,"br"),f(8,"app-race-description",11),I("click",function(){B(e);const r=S(2);return r.selectTrackRace(r.intermediateTrackRace)}),h()(),D(9,"hr"),h()}if(2&t){const e=S(2);p(6),rn("",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards-e.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.intermediateTrack.totalRewards," rewards remaining"),p(2),_("race",e.intermediateTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function J7(t,n){if(1&t){const e=pe();f(0,"div",16)(1,"div",17)(2,"span",9),g(3,"Master Track"),h(),D(4,"br"),f(5,"h6",10),I("click",function(){B(e);const r=S(2),a=lt(11);return r.openRewardsModal(a)}),g(6),h(),D(7,"br"),f(8,"app-race-description",11),I("click",function(){B(e);const r=S(2);return r.selectTrackRace(r.masterTrackRace)}),h()(),D(9,"hr"),h()}if(2&t){const e=S(2);p(6),rn("",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards-e.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.masterTrack.totalRewards," rewards remaining"),p(2),_("race",e.masterTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0)}}function eG(t,n){if(1&t){const e=pe();f(0,"div",6)(1,"div",7)(2,"div",8)(3,"span",9),g(4,"Novice Track"),h(),D(5,"br"),f(6,"h6",10),I("click",function(){B(e);const r=S(),a=lt(7);return r.openRewardsModal(a)}),g(7),h(),D(8,"br"),f(9,"app-race-description",11),I("click",function(){B(e);const r=S();return r.selectTrackRace(r.noviceTrackRace)}),h()(),D(10,"hr"),h(),x(11,Z7,10,5,"div",12),x(12,J7,10,5,"div",13),h()}if(2&t){const e=S();p(7),rn("",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards-e.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained," / ",e.selectedAnimal.allTrainingTracks.noviceTrack.totalRewards," rewards remaining"),p(2),_("race",e.noviceTrackRace)("selectedAnimal",e.selectedAnimal)("showStartText",!0),p(2),_("ngIf",e.intermediateTrackAvailable),p(1),_("ngIf",e.masterTrackAvailable)}}function tG(t,n){if(1&t){const e=pe();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Novice Rewards"),h(),f(4,"button",21),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),I("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=S();p(11),_("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.novice),Bt)}}function iG(t,n){if(1&t){const e=pe();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Intermediate Rewards"),h(),f(4,"button",21),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),I("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=S();p(11),_("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.intermediate),Bt)}}function nG(t,n){if(1&t){const e=pe();f(0,"div",18)(1,"div",19)(2,"h4",20),g(3,"Master Rewards"),h(),f(4,"button",21),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",22)(7,"div",23),g(8," Training tracks pit you against multiple competitors moving at increasingly faster speeds. Each time you beat a competitor for the first time, you gain a reward. "),D(9,"br")(10,"br")(11,"div",24),h()(),f(12,"div",25)(13,"button",26),I("click",function(){return B(e).$implicit.dismiss()}),g(14,"Close"),h()()()}if(2&t){const e=S();p(11),_("innerHTML",e.getTrackRewardsPopover(e.trackRaceTypeEnum.master),Bt)}}let rG=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.lookupService=i,this.sanitizer=r,this.modalService=a,this.componentCommunicationService=o,this.intermediateTrackAvailable=!1,this.masterTrackAvailable=!1,this.raceSelected=new ot,this.showRace=!1,this.trackRaceTypeEnum=ln}ngOnInit(){this.practiceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,ln.practice),this.noviceTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,ln.novice),this.intermediateTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,ln.intermediate),this.masterTrackRace=this.globalService.generateTrackRace(this.selectedAnimal,ln.master),this.intermediateTrackAvailable=this.selectedAnimal.allTrainingTracks.intermediateTrackAvailable,this.masterTrackAvailable=this.selectedAnimal.allTrainingTracks.masterTrackAvailable,this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()}}selectTrackRace(e){if(this.lookupService.canAnimalRace(this.selectedAnimal)){var i=this.globalService.globalVar.animalDecks.find(r=>r.isPrimaryDeck);null!=i&&(i.selectedAnimals=i.selectedAnimals.filter(r=>r.raceCourseType!==this.selectedAnimal.raceCourseType),i.selectedAnimals.push(this.selectedAnimal)),this.raceSelected.emit(e)}}getTrackRewardsPopover(e){var i="",r=this.lookupService.getTrackRaceRewards(e),a=.25,o=this.globalService.globalVar.modifiers.find(u=>"trainingTrackPaceModifier"===u.text);void 0!==o&&(a=o.value);for(var s=0;s<r.length;s++){var l=r[s],c=0;e===ln.novice?c=this.selectedAnimal.allTrainingTracks.noviceTrack.rewardsObtained:e===ln.intermediate?c=this.selectedAnimal.allTrainingTracks.intermediateTrack.rewardsObtained:e===ln.master&&(c=this.selectedAnimal.allTrainingTracks.masterTrack.rewardsObtained),i+=s<c?"<span class='crossed'>("+s*a*100+"% average pace) "+l+"</span>\n":"<span>("+s*a*100+"% average pace) "+l+"</span>\n"}return this.sanitizer.sanitize(ri.HTML,this.sanitizer.bypassSecurityTrustHtml(i))}openRewardsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}goToAnimal(){this.componentCommunicationService.setAnimalView(Ct.animals,this.selectedAnimal)}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(bi),P(Wo),P(To),P(cn))},t.\u0275cmp=_t({type:t,selectors:[["app-training-track-race-view"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{raceSelected:"raceSelected"},decls:12,vars:3,consts:[[1,"trainingTrackView"],[1,"keyword","clickableText",3,"ngClass","click"],["class","trainingTracks",4,"ngIf"],["noviceRewardModal",""],["intermediateRewardModal",""],["masterRewardModal",""],[1,"trainingTracks"],["id","trainingTrack1"],[1,"noviceTrackRace"],[1,"s4Heading"],[1,"clickableText","keyword",3,"click"],[3,"race","selectedAnimal","showStartText","click"],["id","trainingTrack2",4,"ngIf"],["id","trainingTrack3",4,"ngIf"],["id","trainingTrack2"],[1,"intermediateTrackRace"],["id","trainingTrack3"],[1,"masterTrackRace"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[1,"rewards",3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,i){1&e&&(f(0,"div",0),g(1," Selected Animal: "),f(2,"span",1),I("click",function(){return i.goToAnimal()}),g(3),h(),D(4,"hr"),x(5,eG,13,7,"div",2),h(),x(6,tG,15,1,"ng-template",null,3,ut),x(8,iG,15,1,"ng-template",null,4,ut),x(10,nG,15,1,"ng-template",null,5,ut)),2&e&&(p(2),_("ngClass",i.colorConditional),p(1),nt(i.selectedAnimal.name),p(2),_("ngIf",!i.showRace))},directives:[Ji,si,N0],styles:[".trainingTrackView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line;width:100%}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;margin:1rem}"]}),t})();const aG=["raceCanvas"];let oG=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.themeService=o,this.skipRace=!1,this.pauseRace=!1,this.lengthCompleted=0,this.frameModifier=60,this.mountainEndingY=0,this.icyPatchBackgroundLines=[],this.volcanoYOffset=0,this.volcanoRadiusXModifier=6,this.backgroundVolcanoYStart=0,this.currentRaceFrame=0,this.lastPathEndingX=0,this.lastPathEndingY=0,this.lastPreviousSeconds=0,this.totalRaceModeXDistance=0,this.totalRaceModeYDistance=0,this.deltaY=0,this.yOffscreen=0,this.overviewYOffsetModifier=1,this.visibleDistanceXLeft=0,this.visibleDistanceYTop=0,this.visibleDistanceXRight=0,this.visibleDistanceYBottom=0,this.mountainClimbPercent=.5,this.eventViewStartFrame=0,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,this.newSegment=!1}ngOnInit(){this.globalService.globalVar.userIsRacing=!0,this.skipSubscription=this.skip.subscribe(()=>{this.skipRace=!0,this.isRaceFinished=!0}),this.pauseSubscription=this.pause.subscribe(()=>{this.pauseRace=!this.pauseRace}),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.skipRace=!0,this.isRaceFinished=!0)}ngAfterViewInit(){this.race.raceType===Ee.event&&this.race.eventRaceType===Ge.grandPrix&&(this.eventViewStartFrame=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier)),this.totalLegs=this.race.raceLegs.length,this.setupCanvas(),this.canvasXDistanceScale=this.canvasWidth/this.race.length;var e=this.raceCanvas.nativeElement.getContext("2d");e.lineWidth=6;var i=0;this.mountainClimbPercent=this.utilityService.getRandomNumber(.3,.7),this.race.raceType===Ee.event&&this.race.eventRaceType===Ge.grandPrix&&(0===this.globalService.globalVar.eventRaceData.mountainClimbPercent?this.globalService.globalVar.eventRaceData.mountainClimbPercent=this.mountainClimbPercent:this.mountainClimbPercent=this.globalService.globalVar.eventRaceData.mountainClimbPercent);var r=this.race.raceUI.timeToCompleteByFrame[this.race.raceUI.timeToCompleteByFrame.length-1];this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(a=>{performance.now(),e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.lineWidth=6,this.pauseRace||(i+=a,this.race.raceType===Ee.event&&this.race.eventRaceType===Ge.grandPrix&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount>this.lastEventSegment?(this.eventViewStartFrame=0,this.currentRaceFrame=0,this.race=this.globalService.globalVar.eventRaceData.currentRaceSegment,this.newSegment=!0):this.newSegment=!1,this.lastEventSegment=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount),this.currentRaceFrame+=1);var s=!1;this.race.raceType===Ee.event&&this.race.eventRaceType===Ge.grandPrix&&this.globalService.getRemainingEventRaceTime()>0&&(s=!0),(this.currentRaceFrame>=r*this.frameModifier||this.isRaceFinished||this.skipRace)&&!s?this.displayOverview(e,!0):this.displayRace(e,i),performance.now()})}setupCanvas(){this.raceCanvas.nativeElement.style.width="100%",this.raceCanvas.nativeElement.style.height="100%",this.raceCanvas.nativeElement.width=this.raceCanvas.nativeElement.offsetWidth,this.raceCanvas.nativeElement.height=this.raceCanvas.nativeElement.offsetHeight,this.canvasHeight=this.raceCanvas.nativeElement.height,this.canvasWidth=this.raceCanvas.nativeElement.width}displayOverview(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.strokeStyle="gray",e.globalCompositeOperation="source-over",this.lengthCompleted=0,this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=0,a=!0,l=0;if(this.race.raceLegs.forEach(w=>{void 0!==w.pathData&&0!==w.pathData.length&&(l=0,w.pathData.forEach(R=>{if(w.courseType===W.Flatland)e.lineCap="round",R.routeDesign===Ke.Regular&&this.drawRegularFlatlandOverview(e,R,1,1),R.routeDesign===Ke.S&&this.drawSFlatlandOverview(e,R,1,1),R.routeDesign===Ke.Bumps&&this.drawBumpsFlatlandOverview(e,R,1,1);else if(w.courseType===W.Mountain){e.lineCap="round";var z=this.getCurrentAnimalRacingCourse(this.lengthCompleted)!==W.Mountain||r<w.distance*this.mountainClimbPercent;R.routeDesign===Ke.Regular&&this.drawRegularMountainOverview(e,R,1,this.overviewYOffsetModifier,z),R.routeDesign===Ke.Crevasse&&this.drawCrevasseMountainOverview(e,R,1,this.overviewYOffsetModifier,z),R.routeDesign===Ke.Gaps&&this.drawGapsMountainOverview(e,R,1,this.overviewYOffsetModifier,z),r+=R.length}else w.courseType===W.Ocean&&(e.lineCap="round",R.routeDesign===Ke.Regular&&this.drawRegularWaterOverview(e,R,1,1,a),R.routeDesign===Ke.Waves&&this.drawWavesWaterOverview(e,R,1,1,a),R.routeDesign===Ke.Dive&&this.drawDiveWaterOverview(e,R,1,1,a),a=!a);w.courseType===W.Tundra&&(e.lineCap="round",R.routeDesign===Ke.Regular&&this.drawRegularTundraOverview(e,R,1,1),R.routeDesign===Ke.Cavern&&this.drawCavernTundraOverview(e,R,1,1),R.routeDesign===Ke.Hills&&this.drawHillsTundraOverview(e,R,1,1)),w.courseType===W.Volcanic&&(e.lineCap="round",this.backgroundVolcanoYStart=this.lastPathEndingY,(R.routeDesign===Ke.Regular||R.routeDesign===Ke.FirstRegular||R.routeDesign===Ke.LastRegular)&&this.drawRegularVolcanoOverview(e,0,l,R,w.pathData.length,1,1),R.routeDesign===Ke.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,l,R,w.pathData.length,1,1)),this.lengthCompleted+=R.length,l+=1,this.lastPathEndingY<0&&(this.yOffscreen=this.lastPathEndingY)}))}),this.yOffscreen<0&&(this.overviewYOffsetModifier=this.overviewYOffsetModifier/1.25,this.yOffscreen=0),i){this.globalService.globalVar.userIsRacing=!1,e.globalCompositeOperation="source-atop";var u=this.race.raceUI.distanceCoveredByFrame[this.race.raceUI.distanceCoveredByFrame.length-1]/this.race.length,d=0,v=0,m=!1;this.race.raceLegs.forEach(w=>{if(!m){var R=(d+=w.distance)/this.race.length;R>u&&(R=u,m=!0);var z=(R-v)*this.canvasWidth;e.fillStyle=this.getAnimalDistanceColorByType(w.courseType),e.fillRect(v*this.canvasWidth,0,z,this.canvasHeight),v=R}})}if(null!=this.race.drawnObjects&&this.race.drawnObjects.length>0){var b=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",this.race.drawnObjects.forEach(w=>{(w.objectType===Hi.amberBrazier||w.objectType===Hi.rubyBrazier||w.objectType===Hi.topazBrazier||w.objectType===Hi.sapphireBrazier||w.objectType===Hi.amethystBrazier||w.objectType===Hi.emeraldBrazier)&&this.drawBrazier(w,W.Flatland,w.xDistance,e,0,5,5)}),e.globalCompositeOperation=b}if(this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(w=>{"Hills"===w[0]?this.drawHillsBackgroundTundraOverview(e,w):this.drawIcyPatchBackgroundTundraOverview(e,w)}),this.race.raceLegs.some(w=>w.courseType===W.Volcanic)){var k,y=0,C=!1;this.race.raceLegs.forEach(R=>{this.race.raceLegs.some(z=>z.courseType===W.Volcanic)&&(R.courseType!==W.Volcanic&&!C&&(y+=R.distance),R.courseType===W.Volcanic&&(C=!0))}),k=this.race.raceLegs.find(R=>R.courseType===W.Volcanic).distance,b=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,0,y,y+k,1,1),e.globalCompositeOperation=b}}}displayRace(e,i){if(void 0!==this.race&&null!=this.race.raceLegs){this.icyPatchBackgroundLines=[],e.lineCap="round",e.strokeStyle="gray",this.lastPathEndingX=0,this.lastPathEndingY=this.canvasHeight/2;var r=10,a=10;this.totalRaceModeXDistance=this.race.length*r;var o=0,s=[];this.race.raceLegs.forEach(et=>{s.push(et)});var l=!1;this.race.raceType===Ee.event&&this.race.eventRaceType===Ge.grandPrix?(l=!0,o=Math.round(this.globalService.globalVar.eventRaceData.segmentTimeCounter*this.frameModifier),s.push(this.globalService.globalVar.eventRaceData.nextRaceSegment.raceLegs[0])):o=this.currentRaceFrame;var c=this.race.raceUI.distanceCoveredByFrame[o],u=0;l&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment&&(s.unshift(this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0]),c+=s[0].distance),this.averageDistancePerSecond=this.race.raceType===Ee.event&&this.race.eventRaceType===Ge.grandPrix?this.globalService.globalVar.eventRaceData.totalDistance/this.globalService.globalVar.eventRaceData.grandPrixTimeLength:this.race.length/this.race.raceUI.timeToCompleteByFrame[o];var d=0,v=0,m=!1,b=0;s.forEach(et=>{m||(c>=d&&c<d+et.distance&&(m=!0,this.currentLeg=et),m||(v+=et.distance,b+=1)),d+=et.distance});var y=c-v,C=0;if(this.currentLeg.courseType===W.Mountain){var k=this.currentLeg.distance*this.mountainClimbPercent,w=0,R=!1,z=0;this.currentLeg.pathData.forEach(et=>{R||(k>=z&&k<z+et.length&&(R=!0,w=z+et.length-k),z+=et.length)}),R=!1;var q=0,j=0;this.currentLeg.pathData.forEach(et=>{if(!R){if(y>=q&&y<q+et.length&&(R=!0,j=y-q,et.routeDesign===Ke.Crevasse)){var de=et.length/2*3,be=3*j;C-=j<et.length/2?be:de-(be-de)}q+=et.length}});var ye=k+w;this.mountainEndingY=u=y<ye?y+C:ye-(y-ye)+C,this.race.raceType===Ee.event&&this.race.eventRaceType===Ge.grandPrix&&o===this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed-2&&(this.globalService.globalVar.eventRaceData.mountainEndingY=u)}if(this.race.raceLegs.some(et=>et.courseType===W.Mountain)||(this.mountainEndingY=0),u=this.mountainEndingY,this.race.raceType===Ee.event&&this.race.eventRaceType===Ge.grandPrix&&(u+=this.globalService.globalVar.eventRaceData.mountainEndingY,null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&this.currentLeg.courseType!==W.Mountain&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType!==W.Mountain&&(u=0)),this.currentLeg.courseType===W.Volcanic&&!this.pauseRace){var ue=this.currentLeg.pathData[0].length/r;if(y>ue){var ce=this.currentLeg.distance/this.volcanoRadiusXModifier,ve=ue/this.currentLeg.distance,_e=y/this.currentLeg.distance,Ie=(this.currentLeg.distance-2*ue)/this.currentLeg.distance/2;if(_e>ve&&_e<1-ve){var st=100/(100-2*ve),wt=-ce,pt=ce*Math.pow(1.05,-100*(_e>.5?2*(Ie-((_e-ve)*st-Ie)):(_e-ve)*st*2))+wt;this.volcanoYOffset=pt}}}var J=c*this.canvasXDistanceScale*r-this.canvasWidth/2,T=(u+=this.volcanoYOffset)*this.canvasXDistanceScale*a;if(this.visibleDistanceXLeft=J,this.visibleDistanceXRight=J+this.canvasWidth,e.globalCompositeOperation="source-over",(c>=this.race.length||o>this.race.raceUI.distanceCoveredByFrame.length)&&!l)return void(this.isRaceFinished=!0);var Ze=0,_i=!0,Kt=0;s.forEach(et=>{void 0!==et.pathData&&0!==et.pathData.length&&(Kt=0,this.race.raceType===Ee.event&&this.race.eventRaceType===Ge.grandPrix&&(Ze=0),et.pathData.forEach(de=>{if(et.courseType===W.Flatland)de.routeDesign===Ke.Regular&&this.drawRegularFlatlandOverview(e,de,r,a,J,T),de.routeDesign===Ke.S&&this.drawSFlatlandOverview(e,de,r,a,J,T),de.routeDesign===Ke.Bumps&&this.drawBumpsFlatlandOverview(e,de,r,a,J,T);else if(et.courseType===W.Mountain){var be=Ze<et.distance*this.mountainClimbPercent;de.routeDesign===Ke.Regular&&this.drawRegularMountainOverview(e,de,r,a,be,J,T),de.routeDesign===Ke.Crevasse&&this.drawCrevasseMountainOverview(e,de,r,a,be,J,T),de.routeDesign===Ke.Gaps&&this.drawGapsMountainOverview(e,de,r,a,be,J,T),Ze+=de.length,this.grandPrixMountainYReset(b)}else et.courseType===W.Ocean&&(de.routeDesign===Ke.Regular&&this.drawRegularWaterOverview(e,de,r,a,_i,J,T),de.routeDesign===Ke.Waves&&this.drawWavesWaterOverview(e,de,r,a,_i,J,T),de.routeDesign===Ke.Dive&&this.drawDiveWaterOverview(e,de,r,a,_i,J,T),_i=!_i);et.courseType===W.Tundra&&(de.routeDesign===Ke.Regular&&this.drawRegularTundraOverview(e,de,r,a,J,T),de.routeDesign===Ke.Cavern&&this.drawCavernTundraOverview(e,de,r,a,J,T),de.routeDesign===Ke.Hills&&this.drawHillsTundraOverview(e,de,r,a,J,T)),et.courseType===W.Volcanic&&(this.backgroundVolcanoYStart=this.lastPathEndingY,(de.routeDesign===Ke.Regular||de.routeDesign===Ke.FirstRegular||de.routeDesign===Ke.LastRegular)&&this.drawRegularVolcanoOverview(e,0,Kt,de,et.pathData.length,r,a,J,T),de.routeDesign===Ke.SteppingStones&&this.drawSteppingStonesVolcanoOverview(e,0,Kt,de,et.pathData.length,r,a,J,T)),Kt+=1,this.lengthCompleted+=de.length})),b+=1}),e.globalCompositeOperation="source-atop";var Xe=0,Ht=v*this.canvasXDistanceScale*r,ui=s.indexOf(this.currentLeg),ht=null;ui>0&&(ht=s[ui-1]),null!=ht&&Ht>=this.visibleDistanceXLeft&&Ht<=this.visibleDistanceXRight?(Xe=(Ht-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=this.getAnimalDistanceColorByType(ht.courseType),e.fillRect(0,0,this.canvasWidth*Xe,this.canvasHeight),e.fillStyle=this.getAnimalDistanceColorByType(this.currentLeg.courseType),e.fillRect(this.canvasWidth*Xe,0,this.canvasWidth/2-this.canvasWidth*Xe,this.canvasHeight)):(e.fillStyle=this.getAnimalDistanceColor(c,s),e.fillRect(0,0,this.canvasWidth/2,this.canvasHeight));var yi=this.getAnimalRacerColor(c,s);if((this.race.raceUI.racerEffectByFrame[o]===zr.LostFocus||this.race.raceUI.racerEffectByFrame[o]===zr.LostStamina||this.race.raceUI.racerEffectByFrame[o]===zr.Stumble)&&(yi=this.utilityService.shadeColor(yi,-90)),this.race.raceUI.racerEffectByFrame[o]===zr.Burst&&(yi=this.utilityService.shadeColor(yi,90)),e.fillStyle=yi,e.fillRect(this.canvasWidth/2-5,0,5,this.canvasHeight),null!=this.race.drawnObjects&&this.race.drawnObjects.length>0){var mn=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",this.race.drawnObjects.forEach(et=>{(et.objectType===Hi.amberBrazier||et.objectType===Hi.rubyBrazier||et.objectType===Hi.topazBrazier||et.objectType===Hi.sapphireBrazier||et.objectType===Hi.amethystBrazier||et.objectType===Hi.emeraldBrazier)&&this.drawBrazier(et,this.currentLeg.courseType,et.xDistance,e,o,r,a,J,T)}),e.globalCompositeOperation=mn}this.icyPatchBackgroundLines.length>0&&this.icyPatchBackgroundLines.forEach(et=>{"Hills"===et[0]?this.drawHillsBackgroundTundraOverview(e,et):this.drawIcyPatchBackgroundTundraOverview(e,et)}),e.globalCompositeOperation="source-atop";var xi=this.averageDistancePerSecond/this.frameModifier*o;if(this.race.raceType===Ee.event&&this.race.eventRaceType===Ge.grandPrix){var zi=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();xi+=this.averageDistancePerSecond*zi}if(this.drawRacer(e,xi*this.canvasXDistanceScale*r,"black"),this.race.localRaceType!==Ut.Track){if(this.lookupService.getResourceByName("Money Mark")>0){var dt=.75,gt=this.globalService.globalVar.modifiers.find(et=>"moneyMarkPaceModifier"===et.text);null!=gt&&(dt=gt.value),this.drawRacer(e,this.race.length/(this.race.raceUI.timeToCompleteByFrame[o]*dt)/this.frameModifier*o*this.canvasXDistanceScale*r,"gold")}}else{var hi=.25,fi=this.globalService.globalVar.modifiers.find(et=>"trainingTrackPaceModifier"===et.text);void 0!==fi&&(hi=fi.value);for(var Ei=0;Ei<11;Ei++){var rr=this.race.length/(this.race.raceUI.timeToCompleteByFrame[o]/(1+hi*(Ei+1)))/this.frameModifier*o*this.canvasXDistanceScale*r,Pa=this.getTrackRacerColor(Ei);this.drawRacer(e,rr,Pa)}}if(this.drawBreakpoints(e,r,s),s.some(et=>et.courseType===W.Volcanic)){var Tt,bn=0,_n=!1;s.forEach(de=>{s.some(be=>be.courseType===W.Volcanic)&&(de.courseType!==W.Volcanic&&!_n&&(bn+=de.distance),de.courseType===W.Volcanic&&(_n=!0))}),Tt=s.find(de=>de.courseType===W.Volcanic).distance,mn=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.strokeStyle="dimgray",this.drawBackgroundVolcano(e,o,bn,bn+Tt,r,a,J,T),e.globalCompositeOperation=mn}}}getAnimalDistanceColor(e,i){var r="",a=0;return null==i&&(i=this.race.raceLegs),i.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===W.Flatland&&(r="#7d3f00"),o.courseType===W.Mountain&&(r="#1b630d"),o.courseType===W.Ocean&&(r="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),o.courseType===W.Tundra&&(r="#28809c"),o.courseType===W.Volcanic&&(r="#8f1a1a")),a+=o.distance}),r}getAnimalDistanceColorByType(e){var i="";return e===W.Flatland&&(i="#7d3f00"),e===W.Mountain&&(i="#1b630d"),e===W.Ocean&&(i="night"===this.themeService.getActiveThemeName()?"#5044ab":"#16148f"),e===W.Tundra&&(i="#28809c"),e===W.Volcanic&&(i="#8f1a1a"),i}getAnimalRacerColor(e,i){var r="",a=0;return null==i&&(i=this.race.raceLegs),i.forEach(o=>{e>=a&&e<a+o.distance&&(o.courseType===W.Flatland&&("night"===this.themeService.getActiveThemeName()?r="#E18B07":(this.themeService.getActiveThemeName(),r="#c66900")),o.courseType===W.Mountain&&("night"===this.themeService.getActiveThemeName()?r="#30b001":(this.themeService.getActiveThemeName(),r="#279113")),o.courseType===W.Ocean&&("night"===this.themeService.getActiveThemeName()?r="#9289CF":(this.themeService.getActiveThemeName(),r="#0000FF")),o.courseType===W.Tundra&&("night"===this.themeService.getActiveThemeName()?r="#019DDE":(this.themeService.getActiveThemeName(),r="#1CA1C9")),o.courseType===W.Volcanic&&("night"===this.themeService.getActiveThemeName()?r="#E56C6E":(this.themeService.getActiveThemeName(),r="#D92525"))),a+=o.distance}),r}getTrackRacerColor(e){var i="";return 0===e&&(i="#cfc800"),1===e&&(i="#00cf68"),2===e&&(i="#cf00c5"),3===e&&(i="#cfb8e6"),4===e&&(i="#4a1d1d"),5===e&&(i="#1b5054"),6===e&&(i="#541b3c"),7===e&&(i="#aeb85a"),8===e&&(i="#ffffff"),9===e&&(i="#01253b"),10===e&&(i="#790dde"),i}getCurrentAnimalRacingCourse(e){var i;i=W.Flatland;var r=0;return this.race.raceLegs.forEach(a=>{e>=r&&e<r+a.distance&&(i=a.courseType),r+=a.distance}),i}getNextAnimalRacingCourse(e){var i;i=W.Flatland;var r=this.race.raceLegs.indexOf(e);return this.race.raceLegs.length>r&&(i=this.race.raceLegs[r+1].courseType),i}drawRacer(e,i,r){var a=0;i>=this.visibleDistanceXLeft&&i<=this.visibleDistanceXRight&&(a=(i-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=r,e.fillRect(this.canvasWidth*a-5,0,5,this.canvasHeight))}drawBreakpoints(e,i,r){var a=0;null==r&&(r=this.race.raceLegs);for(var o=0;o<r.length;o++){var s=r[o],l=null;o<r.length-1&&(l=r[o+1]);var c=0,u=(a+s.distance)*this.canvasXDistanceScale*i;u>=this.visibleDistanceXLeft&&u<=this.visibleDistanceXRight&&(c=(u-this.visibleDistanceXLeft)/(this.visibleDistanceXRight-this.visibleDistanceXLeft),e.fillStyle=null!==l?this.getAnimalDistanceColorByType(l.courseType):"pink",e.fillRect(this.canvasWidth*c-5,0,5,this.canvasHeight)),a+=s.distance}}drawRegularFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0),e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+s),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawSFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,v=.23*l,m=1.2173*v,b=.04*l,y=m,C=b+v,k=m,w=C+v,R=m,z=w,j=w,ye=m,ue=j+v,ce=m,ve=ue+v,_e=m,Ie=ve;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.bezierCurveTo(c+d,u,c+b,u+y,c+C,u+k),e.bezierCurveTo(c+C,u+k,c+w,u+R,c+z,u),e.stroke(),e.beginPath(),e.moveTo(c+z,u),e.bezierCurveTo(c+z,u,c+j,u-ye,c+ue,u-ce),e.bezierCurveTo(c+ue,u-ce,c+ve,u-_e,c+ve,u),e.stroke(),e.beginPath(),e.moveTo(c+ve,u),e.lineTo(c+Ie+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+Ie+d}drawBumpsFlatlandOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=this.lastPathEndingX-o,u=this.lastPathEndingY+s,d=.04*l,v=.115*l,m=v/3;e.beginPath(),e.moveTo(c,u),e.lineTo(c+d,u),e.stroke(),e.beginPath(),e.moveTo(c+d,u),e.lineTo(c+d+v/2,u-m),e.lineTo(c+d+v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+v,u),e.lineTo(c+d+v+v/2,u-m),e.lineTo(c+d+2*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+2*v,u),e.lineTo(c+d+2*v+v/2,u-m),e.lineTo(c+d+3*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+3*v,u),e.lineTo(c+d+3*v+v/2,u-m),e.lineTo(c+d+4*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+4*v,u),e.lineTo(c+d+4*v+v/2,u-m),e.lineTo(c+d+5*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+5*v,u),e.lineTo(c+d+5*v+v/2,u-m),e.lineTo(c+d+6*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+6*v,u),e.lineTo(c+d+6*v+v/2,u-m),e.lineTo(c+d+7*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+7*v,u),e.lineTo(c+d+7*v+v/2,u-m),e.lineTo(c+d+8*v,u),e.stroke(),e.beginPath(),e.moveTo(c+d+8*v,u),e.lineTo(c+d+8*v+d,u),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+l}drawRegularMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0),e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),e.lineTo(this.lastPathEndingX+c-s,o?this.lastPathEndingY-u+l:this.lastPathEndingY+u+l),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawCrevasseMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,v=this.lastPathEndingY+l,b=c,y=u,C=2*y;e.beginPath(),e.moveTo(this.lastPathEndingX-s,this.lastPathEndingY+l),o?(C=2*y-(y-0),e.lineTo(d+0,v-0),e.lineTo(d+0+b/2,v+C-0),e.lineTo(d+0+b,v-y-0),e.lineTo(d+0+b,v-y-0)):(e.lineTo(d+0,v+0),e.lineTo(d+0+b/2,v+C+0),e.lineTo(d+0+b,v+y+0),e.lineTo(d+0+b,v+y+0)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawGapsMountainOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r,u=i.length/this.race.length*this.canvasWidth*a;null==s&&(s=0),null==l&&(l=0);var d=this.lastPathEndingX-s,v=this.lastPathEndingY+l,m=.04*c,b=.115*c,y=.115*u,C=.04*u;e.beginPath(),e.moveTo(d,v),o?(e.lineTo(d+m,v-C),e.moveTo(d+b+m,v-y-C),e.lineTo(d+2*b+m,v-2*y-C),e.moveTo(d+3*b+m,v-3*y-C),e.lineTo(d+4*b+m,v-4*y-C),e.moveTo(d+5*b+m,v-5*y-C),e.lineTo(d+6*b+m,v-6*y-C),e.moveTo(d+7*b+m,v-7*y-C),e.lineTo(d+8*b+m,v-8*y-C),e.lineTo(d+8*b+2*m,v-8*y-2*C)):(e.lineTo(d+m,v+C),e.moveTo(d+b+m,v+y+C),e.lineTo(d+2*b+m,v+2*y+C),e.moveTo(d+3*b+m,v+3*y+C),e.lineTo(d+4*b+m,v+4*y+C),e.moveTo(d+5*b+m,v+5*y+C),e.lineTo(d+6*b+m,v+6*y+C),e.moveTo(d+7*b+m,v+7*y+C),e.lineTo(d+8*b+m,v+8*y+C),e.lineTo(d+8*b+2*m,v+8*y+2*C)),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c,this.lastPathEndingY=o?this.lastPathEndingY-u:this.lastPathEndingY+u}drawRegularWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,v=c/3,m=c/6,b=u+v,y=o?d+m:d-m,C=u+2*v,k=o?d+m:d-m,w=u+3*v,R=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(b,y,C,k,w,R),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawWavesWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,v=c/3,m=c/3,b=u+v/3,y=d,C=u+v/3,k=d-m,w=u+v,R=d-.6*m;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(b,y,C,k,w,R),e.stroke();var z=w-v/3,q=R-m/10,j=w-v/3,ye=R+.6*m,ue=w,ce=d;e.beginPath(),e.moveTo(w,R),e.bezierCurveTo(z,q,j,ye,ue,ce),e.stroke();var ve=ue+v/3,_e=ce,Ie=ue+v/3,st=ce-m,mt=ue+v,ct=ce-.6*m;e.beginPath(),e.moveTo(ue,ce),e.bezierCurveTo(ve,_e,Ie,st,mt,ct),e.stroke();var bt=mt-v/3,wt=ct-m/10,pt=mt-v/3,J=ct+.6*m,T=mt,Ze=d;e.beginPath(),e.moveTo(mt,ct),e.bezierCurveTo(bt,wt,pt,J,T,Ze),e.stroke();var _i=T+v/3,Rt=Ze,Kt=T+v/3,Xe=Ze-m,Ht=T+v,ui=Ze-.6*m;e.beginPath(),e.moveTo(T,Ze),e.bezierCurveTo(_i,Rt,Kt,Xe,Ht,ui),e.stroke();var ht=Ht-v/3,Gi=ui-m/10,qi=Ht-v/3,yi=ui+.6*m,mn=Ht,xi=d;e.beginPath(),e.moveTo(Ht,ui),e.bezierCurveTo(ht,Gi,qi,yi,mn,xi),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawDiveWaterOverview(e,i,r,a,o,s,l){var c=i.length/this.race.length*this.canvasWidth*r;null==s&&(s=0),null==l&&(l=0);var u=this.lastPathEndingX-s,d=this.lastPathEndingY+l,v=c/3,m=c/2,b=u,y=o?d+2*m:d-2*m,C=u+2*v,k=o?d+m/4:d-m/4,w=u+3*v,R=d;e.beginPath(),e.moveTo(u,d),e.bezierCurveTo(b,y,C,k,w,R),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+c}drawRegularTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=i.driftAmount/80*u,v=(i.totalTundraYAmount-i.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+v+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+v+d+s),e.stroke();var m=[];m.push("Regular"),m.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),m.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),m.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),m.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),m.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]),this.icyPatchBackgroundLines.push(m),this.lastPathEndingX=this.lastPathEndingX+l}drawCavernTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var v=l/4*.97,m=i.driftAmount/80*v,b=(i.totalTundraYAmount-i.driftAmount)/80*v;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+b+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+b+m+s),e.stroke();var C=l/4*.75,k=[];k.push("Cavern"),k.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),k.push([this.lastPathEndingX-o,this.lastPathEndingY+C+s]),k.push([this.lastPathEndingX+l-o,this.lastPathEndingY+C+s]),k.push([this.lastPathEndingX+l-o,this.lastPathEndingY-C+s]),k.push([this.lastPathEndingX-o,this.lastPathEndingY-C+s]),this.icyPatchBackgroundLines.push(k),this.lastPathEndingX=this.lastPathEndingX+l}drawHillsTundraOverview(e,i,r,a,o,s){var l=i.length/this.race.length*this.canvasWidth*r;null==o&&(o=0),null==s&&(s=0);var c=l/4,u=.97*c,d=i.driftAmount/80*u,v=(i.totalTundraYAmount-i.driftAmount)/80*u;e.beginPath(),e.moveTo(this.lastPathEndingX-o,this.lastPathEndingY+v+s),e.lineTo(this.lastPathEndingX+l-o,this.lastPathEndingY+v+d+s),e.stroke();var m=[];m.push("Hills"),m.push([this.lastPathEndingX-o,this.lastPathEndingY+s]),m.push([this.lastPathEndingX-o,this.lastPathEndingY+c+s]),m.push([this.lastPathEndingX+l-o,this.lastPathEndingY+c+s]),m.push([this.lastPathEndingX+l-o,this.lastPathEndingY-c+s]),m.push([this.lastPathEndingX-o,this.lastPathEndingY-c+s]);var b=l/12,y=l/4,C=c/2,k=c*(3/4),w=c/4;m.push([this.lastPathEndingX+y-b/2-o,this.lastPathEndingY-C+w/2+s]),m.push([this.lastPathEndingX+y-b/2-o,this.lastPathEndingY-C-w+s,this.lastPathEndingX+y+b/2-o,this.lastPathEndingY-C-w+s,this.lastPathEndingX+y+b/2-o,this.lastPathEndingY-C+w/2+s]),m.push([this.lastPathEndingX+y-b/2-o,this.lastPathEndingY+C+w/2+s]),m.push([this.lastPathEndingX+y-b/2-o,this.lastPathEndingY+C-w+s,this.lastPathEndingX+y+b/2-o,this.lastPathEndingY+C-w+s,this.lastPathEndingX+y+b/2-o,this.lastPathEndingY+C+w/2+s]),m.push([this.lastPathEndingX+2*y-b/2-o,this.lastPathEndingY-k+w/2+s]),m.push([this.lastPathEndingX+2*y-b/2-o,this.lastPathEndingY-k-w+s,this.lastPathEndingX+2*y+b/2-o,this.lastPathEndingY-k-w+s,this.lastPathEndingX+2*y+b/2-o,this.lastPathEndingY-k+w/2+s]),m.push([this.lastPathEndingX+2*y-b/2-o,this.lastPathEndingY+k+w/2+s]),m.push([this.lastPathEndingX+2*y-b/2-o,this.lastPathEndingY+k-w+s,this.lastPathEndingX+2*y+b/2-o,this.lastPathEndingY+k-w+s,this.lastPathEndingX+2*y+b/2-o,this.lastPathEndingY+k+w/2+s]),m.push([this.lastPathEndingX+3*y-b/2-o,this.lastPathEndingY-C+w/2+s]),m.push([this.lastPathEndingX+3*y-b/2-o,this.lastPathEndingY-C-w+s,this.lastPathEndingX+3*y+b/2-o,this.lastPathEndingY-C-w+s,this.lastPathEndingX+3*y+b/2-o,this.lastPathEndingY-C+w/2+s]),m.push([this.lastPathEndingX+3*y-b/2-o,this.lastPathEndingY+C+w/2+s]),m.push([this.lastPathEndingX+3*y-b/2-o,this.lastPathEndingY+C-w+s,this.lastPathEndingX+3*y+b/2-o,this.lastPathEndingY+C-w+s,this.lastPathEndingX+3*y+b/2-o,this.lastPathEndingY+C+w/2+s]),this.icyPatchBackgroundLines.push(m),this.lastPathEndingX=this.lastPathEndingX+l}drawIcyPatchBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r}drawHillsBackgroundTundraOverview(e,i){var r=e.globalCompositeOperation;e.strokeStyle="dimgray",e.globalCompositeOperation="source-atop",i.length>=17&&(e.beginPath(),e.moveTo(i[6][0],i[6][1]),e.bezierCurveTo(i[7][0],i[7][1],i[7][2],i[7][3],i[7][4],i[7][5]),e.stroke(),e.beginPath(),e.moveTo(i[8][0],i[8][1]),e.bezierCurveTo(i[9][0],i[9][1],i[9][2],i[9][3],i[9][4],i[9][5]),e.stroke(),e.beginPath(),e.moveTo(i[10][0],i[10][1]),e.bezierCurveTo(i[11][0],i[11][1],i[11][2],i[11][3],i[11][4],i[11][5]),e.stroke(),e.beginPath(),e.moveTo(i[12][0],i[12][1]),e.bezierCurveTo(i[13][0],i[13][1],i[13][2],i[13][3],i[13][4],i[13][5]),e.stroke(),e.beginPath(),e.moveTo(i[14][0],i[14][1]),e.bezierCurveTo(i[15][0],i[15][1],i[15][2],i[15][3],i[15][4],i[15][5]),e.stroke(),e.beginPath(),e.moveTo(i[16][0],i[16][1]),e.bezierCurveTo(i[17][0],i[17][1],i[17][2],i[17][3],i[17][4],i[17][5]),e.stroke()),e.globalCompositeOperation="destination-over",i.length>=17&&(e.beginPath(),e.moveTo(i[6][0],i[6][1]),e.bezierCurveTo(i[7][0],i[7][1],i[7][2],i[7][3],i[7][4],i[7][5]),e.stroke(),e.beginPath(),e.moveTo(i[8][0],i[8][1]),e.bezierCurveTo(i[9][0],i[9][1],i[9][2],i[9][3],i[9][4],i[9][5]),e.stroke(),e.beginPath(),e.moveTo(i[10][0],i[10][1]),e.bezierCurveTo(i[11][0],i[11][1],i[11][2],i[11][3],i[11][4],i[11][5]),e.stroke(),e.beginPath(),e.moveTo(i[12][0],i[12][1]),e.bezierCurveTo(i[13][0],i[13][1],i[13][2],i[13][3],i[13][4],i[13][5]),e.stroke(),e.beginPath(),e.moveTo(i[14][0],i[14][1]),e.bezierCurveTo(i[15][0],i[15][1],i[15][2],i[15][3],i[15][4],i[15][5]),e.stroke(),e.beginPath(),e.moveTo(i[16][0],i[16][1]),e.bezierCurveTo(i[17][0],i[17][1],i[17][2],i[17][3],i[17][4],i[17][5]),e.stroke()),e.beginPath(),e.moveTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.lineTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.fillStyle="gray",e.fill(),e.globalCompositeOperation=r,e.strokeStyle="gray"}drawRegularVolcanoOverview(e,i,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);var k=this.lastPathEndingX-c-d*r+d*o/2,w=this.lastPathEndingY+0+u,R=d*o/this.volcanoRadiusXModifier,z=d*o/2-d/s,q=Math.PI/2,ue=180/o,ce=0;a.routeDesign===Ke.FirstRegular?(this.volcanoStartingAngle=ce=90,e.beginPath(),e.moveTo(this.lastPathEndingX-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d/s-c,this.lastPathEndingY+0+u),e.stroke()):a.routeDesign===Ke.LastRegular&&(e.beginPath(),e.moveTo(this.lastPathEndingX+(d-d/s)-c,this.lastPathEndingY+0+u),e.lineTo(this.lastPathEndingX+d-c,this.lastPathEndingY+0+u),e.stroke()),(ce=this.volcanoStartingAngle-ue)<0&&(ce=360-Math.abs(ce)),e.beginPath(),e.ellipse(k,w,R,z,q,this.volcanoStartingAngle*(Math.PI/180),ce*(Math.PI/180),!0),e.stroke(),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=ce}drawSteppingStonesVolcanoOverview(e,i,r,a,o,s,l,c,u){var d=a.length/this.race.length*this.canvasWidth*s;null==c&&(c=0),null==u&&(u=0);for(var k=this.lastPathEndingX-c-d*r+d*o/2,w=this.lastPathEndingY+0+u,R=d*o/this.volcanoRadiusXModifier,z=d*o/2-d/s,q=Math.PI/2,ue=180/o,Ie=0,ce=ue/20,ve=0;ve<10;ve++){var _e=this.volcanoStartingAngle-ce*(2*ve);_e<0&&(_e=360-Math.abs(_e)),(Ie=_e-ce)<0&&(Ie=360-Math.abs(Ie)),e.beginPath(),e.ellipse(k,w,R,z,q,_e*(Math.PI/180),Ie*(Math.PI/180),!0),e.stroke()}(Ie=this.volcanoStartingAngle-ue)<0&&(Ie=360-Math.abs(Ie)),this.lastPathEndingX=this.lastPathEndingX+d,this.volcanoStartingAngle=Ie}drawBackgroundVolcano(e,i,r,a,o,s,l,c){null==l&&(l=0),null==c&&(c=0);var u=.1*(a-r),d=(r+u)*this.canvasXDistanceScale*o-l,v=(a-u)*this.canvasXDistanceScale*o-l,m=v-d,b=(a-r)*this.canvasXDistanceScale*o/this.volcanoRadiusXModifier,y=this.canvasHeight*o,C=this.backgroundVolcanoYStart-.75*b+c,k=d+.15*m,w=y-10*s,R=d+.35*m,z=C+20*s,q=d+.4*m,j=C,ye=v-.15*m,ue=y-10*s,ce=v-.35*m,ve=C+20*s,_e=v-.4*m,Ie=C,st=e.fillStyle,mt=e.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);mt.addColorStop(0,"red"),mt.addColorStop(1,"orange"),e.fillStyle=mt;var ct=q+(_e-q)/3,bt=C+b/4,wt=q+2*(_e-q)/3,pt=C+b/4,Rt=q-.075*m,Kt=j+b/2,Xe=_e+.075*m,Ht=Ie+b/2,ui=Rt+1.7*(Xe-Rt)/5,ht=Kt+.5*b,Gi=Rt+1.4*(Xe-Rt)/5,qi=Kt+b/2,yi=Rt+2.5*(Xe-Rt)/5,mn=Kt,xi=Rt+3.6*(Xe-Rt)/5,zi=Kt+b,ji=Rt+3.3*(Xe-Rt)/5,Vi=Kt-.25*b;e.beginPath(),e.moveTo(q,j),e.bezierCurveTo(ct,bt,wt,pt,_e,Ie),e.lineTo(Xe,Ht),e.moveTo(Xe,Ht),e.bezierCurveTo(xi,zi,ji,Vi,yi,mn),e.bezierCurveTo(ui,ht,Gi,qi,Rt,Kt),e.lineTo(q,j),e.fill(),e.beginPath(),e.moveTo(d,y),e.bezierCurveTo(k,w,R,z,q,j),e.stroke(),e.beginPath(),e.moveTo(v,y),e.bezierCurveTo(ye,ue,ce,ve,_e,Ie),e.stroke();var di=e.lineWidth;e.lineWidth=2;var dt=.175,gt=d+m*(dt+.025),ni=y-b/4,ei=d+m*(dt+.2),Pi=C+b/3,tn=d+m*(dt+.25),hi=C+b/4;e.beginPath(),e.moveTo(d+m*dt,.95*y),e.bezierCurveTo(gt,ni,ei,Pi,tn,hi),e.stroke();var fi=d+m*(.025+(dt=.35)),Ei=y-b/4,nr=d+m*(dt+.075),Qi=C+b/2,Mr=d+m*(dt+.1),rr=C+b/3;e.beginPath(),e.moveTo(d+m*dt,.95*y),e.bezierCurveTo(fi,Ei,nr,Qi,Mr,rr),e.stroke();var Pa=v-m*(.025+(dt=.35)),bn=y-b/4,_n=v-m*(dt+.075),Tt=C+b/2,et=v-m*(dt+.1),de=C+b/3;e.beginPath(),e.moveTo(v-m*dt,.95*y),e.bezierCurveTo(Pa,bn,_n,Tt,et,de),e.stroke();var be=v-m*(.025+(dt=.175)),wi=y-b/4,kr=v-m*(dt+.2),no=C+b/3,ro=v-m*(dt+.25),Do=C+b/4;if(e.beginPath(),e.moveTo(v-m*dt,.95*y),e.bezierCurveTo(be,wi,kr,no,ro,Do),e.stroke(),e.lineWidth=di,void 0!==this.race.raceUI.lavaFallPercentByFrame[i]&&0!==this.race.raceUI.lavaFallPercentByFrame[i].length&&void 0!==this.race.raceUI.lavaFallPercentByFrame[i][0]){1===o&&(i=this.race.raceUI.lavaFallPercentByFrame.length-1);var br=this.race.raceUI.lavaFallPercentByFrame[i],Ia=(a-r)*this.canvasXDistanceScale*o,Va=r*this.canvasXDistanceScale*o,Ro=Va+.4*Ia-l+0,xo=Va+.45*Ia-l+0,Mo=Va+.5*Ia-l+0,ko=Va+.55*Ia-l+0,pi=Va+.6*Ia-l+0,nn=.01*(a-r)*this.canvasXDistanceScale*o,$n=nn/2,Wn=C+b/4,Ao=this.backgroundVolcanoYStart+b+c,Ps=(Ao-Wn)*br[0];e.beginPath(),e.ellipse(Ro,Wn+Ps-$n,nn,$n,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Ro-nn,Wn,2*nn,Ps-($n-1));var Lu=(Ao-Wn)*br[1];e.beginPath(),e.ellipse(xo,Wn+Lu-$n,nn,$n,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(xo-nn,Wn,2*nn,Lu-($n-1));var Zl=(Ao-Wn)*br[2];e.beginPath(),e.ellipse(Mo,Wn+Zl-$n,nn,$n,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(Mo-nn,Wn,2*nn,Zl-($n-1));var Ar=(Ao-Wn)*br[3];e.beginPath(),e.ellipse(ko,Wn+Ar-$n,nn,$n,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(ko-nn,Wn,2*nn,Ar-($n-1));var Jl=(Ao-Wn)*br[4];e.beginPath(),e.ellipse(pi,Wn+Jl-$n,nn,$n,0,0,1*Math.PI),e.fill(),e.beginPath(),e.fillRect(pi-nn,Wn,2*nn,Jl-($n-1)),e.fillStyle=st}else e.fillStyle=st}drawBrazier(e,i,r,a,o,s,l,c,u){var d=.007*this.race.length*this.canvasXDistanceScale*s;null==c&&(c=0),null==u&&(u=0);var v=r*this.canvasXDistanceScale*s-c,m=this.canvasHeight/2,b=.166667*d,y=.333333*d,C=.8*d;i===W.Flatland||i===W.Ocean?m-=this.canvasHeight/6:i===W.Tundra?m-=this.canvasHeight/15:i===W.Mountain?(m=this.lastPathEndingY+u,v-=this.canvasWidth/10,console.log("StartingYPoint: "+m)):i===W.Volcanic&&(m-=u,console.log("StartingYPoint: "+m)),a.fillStyle="brown",a.strokeStyle="black",a.lineWidth="2";var k=v-1,q=d/6+1,w=m-(j=C/6);this.drawRoundedRectangle(a,k,w,R=d/6-a.lineWidth/2,j,3),this.drawRoundedRectangle(a,k+q,w,R,j,3),this.drawRoundedRectangle(a,k+2*q,w,R,j,3),this.drawRoundedRectangle(a,k+3*q,w,R,j,3),this.drawRoundedRectangle(a,k+4*q,w,R,j,3),this.drawRoundedRectangle(a,k+5*q,w,R,j,3);var R,j,z=v-1,ye=(q=d/6+1,m-C-(j=C/6));this.drawRoundedRectangle(a,z,ye,R=d/6-a.lineWidth/2,j,3),this.drawRoundedRectangle(a,z+q,ye,R,j,3),this.drawRoundedRectangle(a,z+2*q,ye,R,j,3),this.drawRoundedRectangle(a,z+3*q,ye,R,j,3),this.drawRoundedRectangle(a,z+4*q,ye,R,j,3),this.drawRoundedRectangle(a,z+5*q,ye,R,j,3),a.strokeStyle="black",a.fillStyle="gray",a.beginPath(),a.moveTo(v,m),a.lineTo(v+b,m),a.lineTo(v+b,m-C),a.lineTo(v,m-C),a.lineTo(v,m),a.stroke(),a.fill(),a.beginPath(),a.moveTo(v+b,m),a.lineTo(v+b+y,m),a.lineTo(v+b+y,m-C),a.lineTo(v+b,m-C),a.lineTo(v+b,m),a.stroke(),a.fill(),a.beginPath(),a.moveTo(v+b+y,m),a.lineTo(v+b+2*y,m),a.lineTo(v+b+2*y,m-C),a.lineTo(v+b+y,m-C),a.lineTo(v+b+y,m),a.stroke(),a.fill(),a.beginPath(),a.moveTo(v+b+2*y,m),a.lineTo(v+2*b+2*y,m),a.lineTo(v+2*b+2*y,m-C),a.lineTo(v+b+2*y,m-C),a.lineTo(v+b+2*y,m),a.stroke(),a.fill();var ue=d/3,ce=2*C,ve=m-C-2*j,_e=ue/3;e.objectType===Hi.amberBrazier&&(a.fillStyle="#FFBF00"),e.objectType===Hi.sapphireBrazier&&(a.fillStyle="#2554C7"),e.objectType===Hi.topazBrazier&&(a.fillStyle="#f5e342"),e.objectType===Hi.amethystBrazier&&(a.fillStyle="#9966cc"),e.objectType===Hi.emeraldBrazier&&(a.fillStyle="#50C878"),e.objectType===Hi.rubyBrazier&&(a.fillStyle="#9b111e");var Ie=.5*ce,st=ce,mt=.5*ce,ct=v+ue/2,bt=ve-Ie/8,wt=v+ue/2,pt=ve-Ie/2,J=v+ue/1.75,T=ve-Ie/2;a.beginPath(),a.moveTo(v,ve),a.bezierCurveTo(ct,bt,wt,pt,J,T);var Xe=v+ue,Ht=ve;a.bezierCurveTo(v+ue/1.75,ve-Ie/8,v+ue,ve,Xe+_e,Ht);var ui=Xe+ue/2,ht=Ht-st/8,Gi=Xe+ue/2,qi=Ht-st/2,yi=Xe+ue/1.75,mn=Ht-st/2;a.moveTo(Xe-_e,Ht),a.bezierCurveTo(ui,ht,Gi,qi,yi,mn);var di=Xe+ue,dt=Ht;a.bezierCurveTo(Xe+ue/1.75,Ht-st/8,Xe+ue,Ht,di+_e,dt);var gt=di+ue/2,ni=dt-mt/8,ei=di+ue/2,Pi=dt-mt/2,tn=di+ue/1.75,hi=dt-mt/2;a.moveTo(di-_e,dt),a.bezierCurveTo(gt,ni,ei,Pi,tn,hi);var Mr=di+ue,rr=dt;a.bezierCurveTo(di+ue/1.75,dt-mt/8,di+ue,dt,Mr,rr),a.moveTo(Mr,rr),a.lineTo(v,ve),a.fill()}grandPrixMountainYReset(e){this.race.raceType===Ee.event&&this.race.eventRaceType===Ge.grandPrix&&0===this.globalService.globalVar.eventRaceData.mountainEndingY&&null!=this.globalService.globalVar.eventRaceData.previousRaceSegment&&void 0!==this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs&&this.globalService.globalVar.eventRaceData.previousRaceSegment.raceLegs[0].courseType===W.Mountain&&1===e&&(this.lastPathEndingY=this.canvasHeight/2)}drawRoundedRectangle(e,i,r,a,o,s){var l=i+a,c=r+o;e.beginPath(),e.moveTo(i+s,r),e.lineTo(l-s,r),e.quadraticCurveTo(l,r,l,r+s),e.lineTo(l,r+o-s),e.quadraticCurveTo(l,c,l-s,c),e.lineTo(i+s,c),e.quadraticCurveTo(i,c,i,c-s),e.lineTo(i,r+s),e.quadraticCurveTo(i,r,i+s,r),e.stroke(),e.fill()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.skipSubscription.unsubscribe(),this.pauseSubscription.unsubscribe(),this.globalService.globalVar.userIsRacing=!1,this.race.raceType!==Ee.event&&(this.race.raceUI.staminaPercentByFrame=[],this.race.raceUI.timeToCompleteByFrame=[],this.race.raceUI.yAdjustmentByFrame=[],this.race.raceUI.velocityByFrame=[],this.race.raceUI.distanceCoveredByFrame=[],this.race.raceUI.lavaFallPercentByFrame=[],this.race.raceUI.maxSpeedByFrame=[],this.race.raceUI.racerEffectByFrame=[])}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(An),P(kn),P(bi),P(Ul))},t.\u0275cmp=_t({type:t,selectors:[["app-draw-race"]],viewQuery:function(e,i){if(1&e&&Sa(aG,5,Ri),2&e){let r;Si(r=Ci())&&(i.raceCanvas=r.first)}},inputs:{race:"race",skip:"skip",pause:"pause"},decls:3,vars:0,consts:[[1,"drawRaceDiv"],["id","raceCanvas",1,"raceCanvas"],["raceCanvas",""]],template:function(e,i){1&e&&(f(0,"div",0),D(1,"canvas",1,2),h())},styles:[".drawRaceDiv[_ngcontent-%COMP%]{height:100%}.raceCanvas[_ngcontent-%COMP%]{border:1px solid black}"]}),t})();const sG=["circuitRewardModal"];function lG(t,n){if(1&t){const e=pe();f(0,"button",6),I("click",function(){return B(e),S(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function cG(t,n){1&t&&(f(0,"span"),g(1,"BURST!"),h())}function uG(t,n){if(1&t){const e=pe();f(0,"button",6),I("click",function(){return B(e),S(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function dG(t,n){if(1&t&&(f(0,"div",8)(1,"div",9)(2,"div"),x(3,lG,2,0,"button",10),h(),f(4,"div")(5,"span",11),g(6,"Vel:"),h(),f(7,"span",12),g(8,"Velocity:"),h(),g(9),x(10,cG,2,0,"span",3),h(),f(11,"div")(12,"span",11),g(13,"Stam:"),h(),f(14,"span",12),g(15,"Stamina:"),h(),g(16),h(),f(17,"div")(18,"span",11),g(19,"Pos:"),h(),f(20,"span",12),g(21,"Position:"),h(),g(22),h(),f(23,"div"),x(24,uG,2,0,"button",10),h()(),f(25,"div",13)(26,"div",14),D(27,"app-draw-race",15),h(),D(28,"div",16,17),h()()),2&t){const e=lt(29),i=S();p(3),_("ngIf",!i.grandPrixRace),p(6),rn(" ",i.velocityAtCurrentFrame," / ",i.maxSpeedAtCurrentFrame,"m/s "),p(1),_("ngIf",i.racerEffectAtCurrentFrame===i.burstEffect),p(6),Z(" ",i.staminaAtCurrentFrame,"%"),p(6),rn(" ",i.positionAtCurrentFrame," / ",i.totalRacers,""),p(2),_("ngIf",!i.grandPrixRace),p(3),_("race",i.selectedRace)("skip",i.skipRace.asObservable())("pause",i.pauseRace.asObservable()),p(1),_("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),Bt)}}function hG(t,n){if(1&t){const e=pe();f(0,"button",6),I("click",function(){return B(e),S(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function fG(t,n){if(1&t){const e=pe();f(0,"button",6),I("click",function(){return B(e),S(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function pG(t,n){if(1&t&&(f(0,"div",18)(1,"div",19)(2,"div"),x(3,hG,2,0,"button",10),h(),f(4,"div"),x(5,fG,2,0,"button",10),h()(),D(6,"div",20,17),h()),2&t){const e=lt(7),i=S();p(3),_("ngIf",!i.grandPrixRace),p(2),_("ngIf",!i.grandPrixRace),p(1),_("scrollTop",e.scrollHeight)("innerHTML",i.incrementalRaceUpdates.trim(),Bt)}}function gG(t,n){if(1&t){const e=pe();f(0,"button",6),I("click",function(){return B(e),S(2).skipRaceAnimation()}),g(1,"Skip"),h()}}function vG(t,n){1&t&&(f(0,"span"),g(1,"BURST!"),h())}function mG(t,n){if(1&t){const e=pe();f(0,"button",6),I("click",function(){return B(e),S(2).pauseRaceAnimation()}),g(1,"Pause"),h()}}function bG(t,n){if(1&t&&(f(0,"div",18)(1,"div",19)(2,"div"),x(3,gG,2,0,"button",10),h(),f(4,"div")(5,"span",11),g(6,"Vel:"),h(),f(7,"span",12),g(8,"Velocity:"),h(),g(9),x(10,vG,2,0,"span",3),h(),f(11,"div")(12,"span",11),g(13,"Stam:"),h(),f(14,"span",12),g(15,"Stamina:"),h(),g(16),h(),f(17,"div")(18,"span",11),g(19,"Pos:"),h(),f(20,"span",12),g(21,"Position:"),h(),g(22),h(),f(23,"div"),x(24,mG,2,0,"button",10),h()(),f(25,"div",21),D(26,"app-draw-race",15)(27,"br"),h()()),2&t){const e=S();p(3),_("ngIf",!e.grandPrixRace),p(6),rn(" ",e.velocityAtCurrentFrame," / ",e.maxSpeedAtCurrentFrame,"m/s "),p(1),_("ngIf",e.racerEffectAtCurrentFrame===e.burstEffect),p(6),Z(" ",e.staminaAtCurrentFrame,"%"),p(6),rn(" ",e.positionAtCurrentFrame," / ",e.totalRacers,""),p(2),_("ngIf",!e.grandPrixRace),p(2),_("race",e.selectedRace)("skip",e.skipRace.asObservable())("pause",e.pauseRace.asObservable())}}function _G(t,n){1&t&&D(0,"br")}function yG(t,n){if(1&t&&(f(0,"div",28),g(1),h()),2&t){const e=S().$implicit,i=S(3);p(1),Z(" ",i.lookupService.getResourcePopover(e.name,e.shopItemTypeEnum)," ")}}function wG(t,n){if(1&t&&(f(0,"td")(1,"span",26),g(2),h(),g(3),x(4,yG,2,1,"ng-template",null,27,ut),h()),2&t){const e=n.$implicit,i=lt(5);p(1),_("ngbPopover",i),p(1),nt(e.name),p(1),Z(": ",e.amount," ")}}function SG(t,n){if(1&t&&(f(0,"tr"),x(1,wG,6,3,"td",25),h()),2&t){const e=n.$implicit;p(1),_("ngForOf",e)}}function CG(t,n){if(1&t&&(f(0,"div",22)(1,"span",23),g(2,"Rewards"),h(),f(3,"div",24)(4,"table"),x(5,SG,2,1,"tr",25),h()()()),2&t){const e=S();p(5),_("ngForOf",e.rewardRows)}}function TG(t,n){if(1&t){const e=pe();f(0,"div",29)(1,"div",30)(2,"h4",31),g(3,"Circuit Rank Reward!"),h(),f(4,"button",32),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",33)(7,"div",34),g(8," After ranking up, you receive: "),D(9,"br"),f(10,"div",23),g(11),h()(),D(12,"br")(13,"br")(14,"div",35),h(),f(15,"div",36)(16,"button",37),I("click",function(){return B(e).$implicit.dismiss()}),g(17,"Continue"),h()()()}if(2&t){const e=S();p(11),nt(e.selectedRace.circuitIncreaseReward[0]),p(3),_("innerHTML",e.selectedRace.circuitIncreaseReward[1],Bt)}}let l2=(()=>{class t{constructor(e,i,r,a,o,s,l,c){this.globalService=e,this.gameLoopService=i,this.utilityService=r,this.lookupService=a,this.initializeService=o,this.modalService=s,this.sanitizer=l,this.raceLogicService=c,this.incrementalRaceUpdates="",this.raceFinished=new ot,this.skipRace=new we,this.pauseRace=new we,this.raceSkipped=!1,this.racePaused=!1,this.frameModifier=60,this.displayVisualRace=!0,this.displayTextUpdates=!0,this.burstEffect=zr.Burst,this.grandPrixRace=!1}ngOnInit(){var e=this,i=this.globalService.globalVar.settings.get("raceDisplayInfo");i===ca.draw?(this.displayVisualRace=!0,this.displayTextUpdates=!1):i===ca.text?(this.displayVisualRace=!1,this.displayTextUpdates=!0):i===ca.both&&(this.displayVisualRace=!0,this.displayTextUpdates=!0),this.selectedRace.raceType===Ee.event&&this.selectedRace.eventRaceType===Ge.grandPrix&&(this.grandPrixRace=!0);var r=new uf;r=this.grandPrixRace?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult:this.raceLogicService.runRace(this.selectedRace),this.setupDisplayRewards(this.selectedRace),this.displayRaceUpdates(r),this.getFrameByFrameStats(),this.globalService.globalVar.settings.get("skipDrawRace")&&(this.raceSkipped=!0),this.grandPrixRace&&(this.eventRaceSubscription=this.gameLoopService.gameUpdateEvent.subscribe(xr(function*(){e.globalService.getTimeToEventRace()>0&&0===e.globalService.globalVar.eventRaceData.bonusTime&&e.raceFinished.emit(!0),e.globalService.globalVar.eventRaceData.isRunning||e.raceFinished.emit(!0)})))}ngOnDestroy(){null!=this.frameByFrameSubscription&&this.frameByFrameSubscription.unsubscribe(),null!=this.updateSubscription&&this.updateSubscription.unsubscribe(),null!=this.eventRaceSubscription&&this.eventRaceSubscription.unsubscribe(),this.raceFinished.emit(!0)}displayRaceUpdates(e){var i=this,r=e.raceUpdates;this.incrementalRaceUpdates="";var o=0,l=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount,c=this.updateSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=xr(function*(d){if(i.racePaused||(i.selectedRace.raceType===Ee.event&&i.selectedRace.eventRaceType===Ge.grandPrix&&(i.globalService.globalVar.eventRaceData.currentRaceSegmentCount>l&&(o=0,i.selectedRace=i.globalService.globalVar.eventRaceData.currentRaceSegment,r=i.globalService.globalVar.eventRaceData.currentRaceSegmentResult.raceUpdates),l=i.globalService.globalVar.eventRaceData.currentRaceSegmentCount),o+=1),(i.selectedRace.raceType!==Ee.event||i.selectedRace.eventRaceType!==Ge.grandPrix)&&(0===r.length||i.raceSkipped))return i.raceSkipped&&r.forEach(v=>{i.incrementalRaceUpdates+=i.sanitizer.sanitize(ri.HTML,i.sanitizer.bypassSecurityTrustHtml(v.text+"\n"))}),e.wasSuccessful&&(i.displayResults=!0,null!=i.selectedRace.circuitIncreaseReward&&""!==i.selectedRace.circuitIncreaseReward[0]&&i.modalService.open(i.circuitRewardModal,{ariaLabelledBy:"modal-basic-title",size:"lg"})),void c.unsubscribe();i.selectedRace.raceType===Ee.event&&i.selectedRace.eventRaceType===Ge.grandPrix?i.globalService.globalVar.eventRaceData.segmentTimeCounter*i.frameModifier>=r[0].value&&(i.incrementalRaceUpdates+=i.sanitizer.sanitize(ri.HTML,i.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift()):o>=r[0].value&&(i.incrementalRaceUpdates+=i.sanitizer.sanitize(ri.HTML,i.sanitizer.bypassSecurityTrustHtml(r[0].text+"\n")),r.shift())});return function(d){return u.apply(this,arguments)}}())}setupDisplayRewards(e){this.rewardCells=[],this.rewardRows=[];var i=4;if(window.matchMedia("only screen and (max-width: 760px)").matches&&(i=2),null!=e.rewards){for(var r=1;r<=e.rewards.length;r++)this.rewardCells.push({name:e.rewards[r-1].name,amount:e.rewards[r-1].amount}),r%i==0&&(this.rewardRows.push(this.rewardCells),this.rewardCells=[]);0!==this.rewardCells.length&&this.rewardRows.push(this.rewardCells)}}goToRaceSelection(){this.raceFinished.emit(!0)}skipRaceAnimation(){this.raceSkipped=!0,this.skipRace.next(!0)}pauseRaceAnimation(){this.racePaused=!this.racePaused,this.pauseRace.next(!0)}getFrameByFrameStats(){var e=this;this.totalRacers=this.lookupService.getTotalRacersByRace(this.selectedRace);var r=0,o=this.globalService.globalVar.eventRaceData.currentRaceSegmentCount;this.frameByFrameSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var s=xr(function*(l){e.racePaused||(e.selectedRace.raceType===Ee.event&&e.selectedRace.eventRaceType===Ge.grandPrix&&(e.globalService.globalVar.eventRaceData.currentRaceSegmentCount>o&&(e.selectedRace=e.globalService.globalVar.eventRaceData.currentRaceSegment),o=e.globalService.globalVar.eventRaceData.currentRaceSegmentCount),r+=1);var c;c=e.selectedRace.raceType===Ee.event&&e.selectedRace.eventRaceType===Ge.grandPrix?Math.round(e.globalService.globalVar.eventRaceData.segmentTimeCounter*e.frameModifier):r;try{if(e.selectedRace.raceUI.velocityByFrame.length<=c||(e.selectedRace.raceType!==Ee.event||e.selectedRace.eventRaceType!==Ge.grandPrix)&&e.raceSkipped){var u=e.selectedRace.raceUI.velocityByFrame.length-1;e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[u]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[u]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[u].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[u],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[u])}else e.velocityAtCurrentFrame=(e.selectedRace.raceUI.velocityByFrame[c]*e.frameModifier).toFixed(2),e.staminaAtCurrentFrame=(100*e.selectedRace.raceUI.staminaPercentByFrame[c]).toFixed(2),e.maxSpeedAtCurrentFrame=e.selectedRace.raceUI.maxSpeedByFrame[c].toFixed(2),e.racerEffectAtCurrentFrame=e.selectedRace.raceUI.racerEffectByFrame[c],e.positionAtCurrentFrame=e.utilityService.ordinalSuffixOf(e.selectedRace.raceUI.racePositionByFrame[c])}catch(d){console.log("error")}});return function(l){return s.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(An),P(kn),P(bi),P(Jm),P(To),P(Wo),P(o0))},t.\u0275cmp=_t({type:t,selectors:[["app-race"]],viewQuery:function(e,i){if(1&e&&Sa(sG,7),2&e){let r;Si(r=Ci())&&(i.circuitRewardModal=r.first)}},inputs:{selectedRace:"selectedRace"},outputs:{raceFinished:"raceFinished"},decls:11,vars:5,consts:[["id","raceInfo"],["class","bothDisplayValues",4,"ngIf"],["class","oneDisplayValue",4,"ngIf"],[4,"ngIf"],["class","results",4,"ngIf"],[1,"back"],[3,"click"],["circuitRewardModal",""],[1,"bothDisplayValues"],[1,"headerInfo"],[3,"click",4,"ngIf"],[1,"mobileVersion"],[1,"webVersion"],[1,"updates"],[1,"drawRaces"],[3,"race","skip","pause"],[1,"raceUpdates",3,"scrollTop","innerHTML"],["scrollMe",""],[1,"oneDisplayValue"],[1,"individualItemHeaderInfo"],[1,"raceUpdates","onlyText",3,"scrollTop","innerHTML"],[1,"drawRace","onlyDraw"],[1,"results"],[1,"s4Heading"],[1,"rewards"],[4,"ngFor","ngForOf"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],["popContent",""],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"centered"],[3,"innerHTML"],[1,"buttonSpacing"],["type","button",3,"click"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,dG,30,13,"div",1),x(2,pG,8,4,"div",2),x(3,bG,28,11,"div",2),x(4,_G,1,0,"br",3),x(5,CG,6,1,"div",4),f(6,"div",5)(7,"button",6),I("click",function(){return i.goToRaceSelection()}),g(8,"Back"),h()()(),x(9,TG,18,2,"ng-template",null,7,ut)),2&e&&(p(1),_("ngIf",i.displayVisualRace&&i.displayTextUpdates),p(1),_("ngIf",!i.displayVisualRace&&i.displayTextUpdates),p(1),_("ngIf",i.displayVisualRace&&!i.displayTextUpdates),p(1),_("ngIf",i.displayVisualRace&&!i.displayTextUpdates),p(1),_("ngIf",i.displayResults))},directives:[si,oG,on,Wr],styles:['#raceInfo[_ngcontent-%COMP%]{height:100%;margin-left:.5rem;margin-right:.5rem;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);white-space:pre;overflow-x:hidden}.headerInfo[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between}.individualItemHeaderInfo[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.bothDisplayValues[_ngcontent-%COMP%], .oneDisplayValue[_ngcontent-%COMP%]{height:76.5%}.updates[_ngcontent-%COMP%]{white-space:pre;height:95%;width:100%;display:grid;grid-template-columns:70% 29%;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"drawRace raceUpdates"}.raceUpdates[_ngcontent-%COMP%]{overflow-y:auto;white-space:break-spaces;grid-area:raceUpdates}.drawRaces[_ngcontent-%COMP%]{grid-area:drawRace}.onlyText[_ngcontent-%COMP%], .onlyDraw[_ngcontent-%COMP%]{text-align:center;height:100%}.rightAlign[_ngcontent-%COMP%]{text-align:right}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:left}td[_ngcontent-%COMP%]{width:16.666%}.mobileVersion[_ngcontent-%COMP%]{display:none}.webVersion[_ngcontent-%COMP%]{display:inline-block}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.centered[_ngcontent-%COMP%]{text-align:center}.buttonSpacing[_ngcontent-%COMP%]{text-align:right;padding:1rem}.results[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 800px){.updates[_ngcontent-%COMP%]{grid-template-columns:auto;grid-template-rows:50% 50%;grid-template-areas:"drawRace" "raceUpdates"}.headerInfo[_ngcontent-%COMP%]{width:100%}.raceUpdates[_ngcontent-%COMP%]{text-align:center}.mobileVersion[_ngcontent-%COMP%]{display:inline-block}.webVersion[_ngcontent-%COMP%]{display:none}}']}),t})();function DG(t,n){if(1&t){const e=pe();f(0,"div",9)(1,"button",10),I("click",function(){return B(e),S(2).returnToAnimalView()}),g(2,"Back"),h()()}}function RG(t,n){if(1&t){const e=pe();f(0,"div",11)(1,"div")(2,"app-animal-list",12),I("selectedAnimal",function(r){return B(e),S(2).selectedAnimal(r)}),h()()()}if(2&t){const e=S(2);p(2),_("availableAnimals",e.availableAnimals)("isTrainingTrackView",!0)}}function xG(t,n){if(1&t){const e=pe();f(0,"div",13)(1,"app-training-track-race-view",14),I("raceSelected",function(r){return B(e),S(2).raceSelected(r)})("returnEmitter",function(){return B(e),S(2).returnToAnimalView()}),h()()}if(2&t){const e=S(2);p(1),_("selectedAnimal",e.animal)}}function MG(t,n){if(1&t&&(f(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),g(4,"Training Track"),h(),f(5,"div",5),g(6," Each animal can run their own training track to gain rewards and unique bonuses. To get each reward, you will have to beat each track at a progressively faster pace. "),h()(),x(7,DG,3,0,"div",6),h(),D(8,"hr"),x(9,RG,3,2,"div",7),x(10,xG,2,1,"div",8),h()),2&t){const e=S();p(7),_("ngIf",e.animalSelected),p(2),_("ngIf",!e.animalSelected),p(1),_("ngIf",e.animalSelected)}}function kG(t,n){if(1&t){const e=pe();f(0,"div",15)(1,"app-race",16),I("raceFinished",function(){return B(e),S().raceFinished()}),h()()}if(2&t){const e=S();p(1),_("selectedRace",e.selectedRace)}}const AG=function(t){return{fullHeight:t}};let c2=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.animalSelected=!1,this.raceSelectedEmitter=new ot}ngOnInit(){this.availableAnimals=this.globalService.globalVar.animals.filter(i=>i.isAvailable);var e=this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck);null!=e&&(this.existingPrimaryDeckAnimals=[],e.selectedAnimals.forEach(i=>{this.existingPrimaryDeckAnimals.push(i)}))}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(){this.animalSelected=!1}raceSelected(e){this.selectedRace=e,this.showRace=!0,this.raceSelectedEmitter.emit(!0)}ngOnDestroy(){this.raceSelectedEmitter.emit(!1)}raceFinished(){this.showRace=!1,this.raceSelectedEmitter.emit(!1);var e=this.globalService.globalVar.animalDecks.find(i=>i.isPrimaryDeck);null!=e&&(e.selectedAnimals=this.existingPrimaryDeckAnimals)}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(cn))},t.\u0275cmp=_t({type:t,selectors:[["app-training-track-view"]],outputs:{raceSelectedEmitter:"raceSelectedEmitter"},decls:3,vars:5,consts:[[1,"trainingTrackView",3,"ngClass"],[4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"infoGridContainer"],[1,"info"],[1,"description"],["class","back",4,"ngIf"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"back"],[3,"click"],[1,"selectAnimalView"],[3,"availableAnimals","isTrainingTrackView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","raceSelected","returnEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,MG,11,3,"div",1),x(2,kG,2,1,"div",2),h()),2&e&&(_("ngClass",pn(3,AG,i.showRace)),p(1),_("ngIf",!i.showRace),p(1),_("ngIf",i.showRace))},directives:[Ji,si,Ef,rG,l2],styles:['.trainingTrackView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.fullHeight[_ngcontent-%COMP%]{height:100%}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:10% 1fr 10%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.back[_ngcontent-%COMP%]{grid-area:back}.info[_ngcontent-%COMP%]{grid-area:info;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}']}),t})();function PG(t,n){1&t&&(f(0,"span",13),g(1,"!"),h())}function EG(t,n){1&t&&(f(0,"span",13),g(1,"!"),h())}function IG(t,n){if(1&t){const e=pe();f(0,"div",6)(1,"div",7)(2,"button",8),I("click",function(){B(e);const r=S(2);return r.changeDisplayRaceView(r.raceTypeEnum.circuit)}),g(3,"Circuit Races"),h(),f(4,"button",9),I("click",function(){B(e);const r=S(2);return r.changeDisplayRaceView(r.raceTypeEnum.special)}),x(5,PG,2,0,"span",10),g(6,"Special Races"),h(),f(7,"button",11),I("click",function(){B(e);const r=S(2);return r.changeDisplayRaceView(r.raceTypeEnum.event)}),x(8,EG,2,0,"span",10),g(9,"Event Races"),h(),f(10,"button",12),I("click",function(){B(e);const r=S(2);return r.changeDisplayRaceView(r.raceTypeEnum.trainingTrack)}),g(11,"Training Track"),h()(),D(12,"hr"),h()}if(2&t){const e=S(2);p(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.circuit?"filterActive":""),p(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.special?"filterActive":""),p(1),_("ngIf",e.newSpecialRaceAvailable),p(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.event?"filterActive":""),p(1),_("ngIf",e.eventRaceNowAvailable),p(2),_("ngClass",e.displayRaceView===e.raceTypeEnum.trainingTrack?"filterActive":"")}}function VG(t,n){if(1&t){const e=pe();f(0,"app-circuit-view",14),I("raceSelected",function(r){return B(e),S(2).raceSelected(r)}),h()}}function OG(t,n){if(1&t){const e=pe();f(0,"app-local-view",14),I("raceSelected",function(r){return B(e),S(2).raceSelected(r)}),h()}}function NG(t,n){if(1&t){const e=pe();f(0,"app-event-view",14),I("raceSelected",function(r){return B(e),S(2).raceSelected(r)}),h()}}function FG(t,n){if(1&t){const e=pe();f(0,"app-training-track-view",15),I("raceSelectedEmitter",function(r){return B(e),S(2).trainingTrackRaceSelected(r)}),h()}}function BG(t,n){if(1&t&&(f(0,"div",2),x(1,IG,13,6,"div",3),x(2,VG,1,0,"app-circuit-view",4),x(3,OG,1,0,"app-local-view",4),x(4,NG,1,0,"app-event-view",4),x(5,FG,1,0,"app-training-track-view",5),h()),2&t){const e=S();p(1),_("ngIf",!e.trainingTrackRace),p(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.circuit),p(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.special),p(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.event),p(1),_("ngIf",e.displayRaceView===e.raceTypeEnum.trainingTrack)}}function LG(t,n){if(1&t){const e=pe();f(0,"div",16)(1,"app-race",17),I("raceFinished",function(){return B(e),S().raceFinished()}),h()()}if(2&t){const e=S();p(1),_("selectedRace",e.selectedRace)}}let UG=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.componentCommunicationService=i,this.gameLoopService=r,this.lookupService=a,this.displayRaceView=Ee.circuit,this.showRace=!1,this.trainingTrackRace=!1,this.raceTypeEnum=Ee,this.newSpecialRaceAvailable=!1,this.eventRaceNowAvailable=!1}ngOnInit(){var e=this;this.componentCommunicationService.setNewView(Ct.raceselection),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var i=xr(function*(r){e.newSpecialRaceAvailable=e.globalService.globalVar.notifications.isNewSpecialRaceAvailable&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>9),e.eventRaceNowAvailable=e.globalService.globalVar.notifications.isEventRaceNowActive&&e.lookupService.isItemUnlocked("grandPrix")&&(e.globalService.globalVar.tutorials.tutorialCompleted||e.globalService.globalVar.tutorials.currentTutorialId>9)});return function(r){return i.apply(this,arguments)}}()),this.communicationSubscription=this.componentCommunicationService.getRaceView().subscribe(i=>{this.displayRaceView=i})}changeDisplayRaceView(e){this.displayRaceView=e,e===Ee.special&&(this.newSpecialRaceAvailable=this.globalService.globalVar.notifications.isNewSpecialRaceAvailable=!1),e===Ee.event&&(this.eventRaceNowAvailable=this.globalService.globalVar.notifications.isEventRaceNowActive=!1)}raceSelected(e){this.selectedRace=e,this.showRace=!0}raceFinished(){this.showRace=!1}trainingTrackRaceSelected(e){this.trainingTrackRace=e}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.communicationSubscription&&this.communicationSubscription.unsubscribe(),this.globalService.globalVar.localRaces=[]}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(cn),P(An),P(bi))},t.\u0275cmp=_t({type:t,selectors:[["app-race-selection-view"]],decls:2,vars:2,consts:[["class","raceSelectionDiv",4,"ngIf"],["class","raceDiv",4,"ngIf"],[1,"raceSelectionDiv"],["class","info",4,"ngIf"],[3,"raceSelected",4,"ngIf"],[3,"raceSelectedEmitter",4,"ngIf"],[1,"info"],[1,"raceGridContainer"],[1,"buttonAsText","circuit","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","local","s5Heading","clickableText",3,"ngClass","click"],["class","availableIcon",4,"ngIf"],[1,"buttonAsText","event","s5Heading","clickableText",3,"ngClass","click"],[1,"buttonAsText","trainingTrack","s5Heading","clickableText",3,"ngClass","click"],[1,"availableIcon"],[3,"raceSelected"],[3,"raceSelectedEmitter"],[1,"raceDiv"],[3,"selectedRace","raceFinished"]],template:function(e,i){1&e&&(x(0,BG,6,5,"div",0),x(1,LG,2,1,"div",1)),2&e&&(_("ngIf",!i.showRace),p(1),_("ngIf",i.showRace))},directives:[si,Ji,QH,c7,K7,c2,l2],styles:['.raceGridContainer[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-gap:1rem;gap:1rem;grid-template-areas:"circuit local event trainingTrack"}.raceSelectionDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.circuit[_ngcontent-%COMP%]{grid-area:circuit;text-align:center}.local[_ngcontent-%COMP%]{grid-area:local;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.trainingTrack[_ngcontent-%COMP%]{grid-area:trainingTrack;text-align:center}.raceDiv[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary);-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.availableIcon[_ngcontent-%COMP%]{color:var(--foreground-quaternary);border-radius:25px;background:var(--background-five);padding:0 .5rem;margin-right:.25rem}@media (max-width: 800px){.raceGridContainer[_ngcontent-%COMP%]{grid-template-columns:.9fr 1.1fr 1fr 1fr}}']}),t})(),HG=(()=>{class t{constructor(e){this.utilityService=e}ngOnInit(){}toggle(){null!=this.callbackFunction&&this.callbackFunction()}getId(){return"cbxInput"+this.id}}return t.\u0275fac=function(e){return new(e||t)(P(kn))},t.\u0275cmp=_t({type:t,selectors:[["app-toggle"]],inputs:{model:"model",label:"label",id:"id",popoverText:"popoverText",callbackFunction:"callbackFunction"},decls:5,vars:5,consts:[[1,"custom-control","custom-switch"],["triggers","mouseenter:mouseleave",3,"ngbPopover"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange","input"],[1,"custom-control-label",3,"for"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"span",1)(2,"input",2),I("ngModelChange",function(a){return i.model=a})("input",function(){return i.toggle()}),h(),f(3,"label",3),g(4),h()()()),2&e&&(p(1),_("ngbPopover",i.popoverText),p(1),_("id",i.getId())("ngModel",i.model),p(1),_("for",i.getId()),p(1),nt(i.label))},directives:[Wr,nu,bs,_s],styles:[""]}),t})();function GG(t,n){if(1&t&&(f(0,"div",8)(1,"em"),g(2),h(),D(3,"br")(4,"br"),h()),2&t){const e=S();p(2),Z("",e.pointsNeededInColumn," points needed in this column to unlock")}}function zG(t,n){1&t&&(f(0,"div",8)(1,"em"),g(2," Click Upgrade to unlock this talent. "),D(3,"br")(4,"br"),h()())}function jG(t,n){1&t&&(f(0,"div"),D(1,"br")(2,"br"),h())}function $G(t,n){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"em")(3,"div",8),g(4,"Next Upgrade: "),h()(),D(5,"div",9),h()),2&t){const e=S();p(5),_("innerHTML",e.upgradedTalentDescription,Bt)}}const WG=function(t){return{talentInactive:t}};let qG=(()=>{class t{constructor(e,i,r){this.lookupService=e,this.gameLoopService=i,this.globalService=r,this.spentTalent=new ot}ngOnInit(){this.talentTreeType=this.selectedAnimal.talentTree.talentTreeType,this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.totalPossiblePoints=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.talentTreeType),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0;var e=0;1===this.row&&(e=this.selectedAnimal.talentTree.row2RequiredPoints),2===this.row&&(e=this.selectedAnimal.talentTree.row3RequiredPoints),3===this.row&&(e=this.selectedAnimal.talentTree.row4RequiredPoints),this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0,this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(i=>{this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.talentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent),this.upgradedTalentDescription=this.lookupService.getTalentDescription(this.row,this.column,this.talentTreeType,this.pointsInTalent+1),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.pointsNeededInColumn=e-this.selectedAnimal.talentTree.getTalentPointsByColumn(this.column),this.hasEnoughPointsInColumn=this.pointsNeededInColumn<=0})}isTalentMaxed(){var e=!1;return this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column)>=this.lookupService.getTotalPossiblePointsByRowColumn(this.row,this.column,this.selectedAnimal.talentTree.talentTreeType)&&(e=!0),e}spendTalentPoint(){this.isTalentMaxed()||(this.selectedAnimal.talentTree.spendTalentPoint(this.row,this.column),this.spentTalent.emit(!0),this.pointsInTalent=this.selectedAnimal.talentTree.getTalentPointsByRowColumn(this.row,this.column),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal),this.hasTalentPoint=this.availableTalentPoints>0,this.globalService.calculateAnimalRacingStats(this.selectedAnimal))}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(bi),P(An),P(Et))},t.\u0275cmp=_t({type:t,selectors:[["app-talent"]],inputs:{selectedAnimal:"selectedAnimal",row:"row",column:"column"},outputs:{spentTalent:"spentTalent"},decls:15,vars:13,consts:[[1,"talent"],[1,"header","keyword"],[1,"content"],["class","centeredText",4,"ngIf"],[4,"ngIf"],[1,"description",3,"ngClass","innerHTML"],[1,"footer"],[3,"disabled","click"],[1,"centeredText"],[1,"talentInactive",3,"innerHTML"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"span"),g(3),h()(),f(4,"div",2),x(5,GG,5,1,"div",3),x(6,zG,5,0,"div",3),x(7,jG,3,0,"div",4),D(8,"div",5),x(9,$G,6,1,"div",4),D(10,"br"),f(11,"div",6),g(12),f(13,"button",7),I("click",function(){return i.spendTalentPoint()}),g(14,"Upgrade"),h()()()()),2&e&&(p(3),rn("Sprint Column ",i.column+1," Row ",i.row+1,""),p(2),_("ngIf",i.pointsNeededInColumn>0),p(1),_("ngIf",i.pointsNeededInColumn<=0&&0===i.pointsInTalent),p(1),_("ngIf",i.pointsInTalent===i.totalPossiblePoints),p(1),_("ngClass",pn(11,WG,0===i.pointsInTalent))("innerHTML",i.talentDescription,Bt),p(1),_("ngIf",i.pointsInTalent>0&&i.pointsInTalent<i.totalPossiblePoints),p(3),rn(" ",i.pointsInTalent," / ",i.totalPossiblePoints," Points "),p(1),_("disabled",!i.hasTalentPoint||!i.hasEnoughPointsInColumn||i.isTalentMaxed()))},directives:[si,Ji],styles:['.talent[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto 1fr;justify-content:stretch;grid-template-areas:"header" "content"}.header[_ngcontent-%COMP%]{grid-area:header;background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center;color:var(--foreground-quaternary)}.content[_ngcontent-%COMP%]{grid-area:content;margin:1rem;display:flex;flex-direction:column;justify-content:space-between}.footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.talentInactive[_ngcontent-%COMP%]{color:#00000080}']}),t})();function XG(t,n){if(1&t&&(f(0,"div",14),g(1,"Equipped: "),f(2,"span",52),g(3),h(),D(4,"br")(5,"br"),g(6),h()),2&t){const e=S();_("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)),p(3),nt(e.selectedAnimal.equippedItem.name),p(3),Z(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedItem.name)," ")}}function YG(t,n){1&t&&(f(0,"div"),g(1," Equipped: None "),h())}function QG(t,n){if(1&t){const e=pe();f(0,"button",8),I("click",function(){return B(e),S().unequipItem()}),g(1,"Unequip Item"),h()}}function KG(t,n){if(1&t&&(f(0,"span",12),g(1),h()),2&t){const e=S(2);p(1),Z(" ",e.getTalentTreeName(),"")}}function ZG(t,n){if(1&t){const e=pe();f(0,"div",53)(1,"div"),x(2,KG,2,1,"span",54),h(),f(3,"button",8),I("click",function(){B(e);const r=S(),a=lt(217);return r.openTalentsModal(a)}),g(4,"View Talents"),h()()}if(2&t){const e=S();p(2),_("ngIf",e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none)}}function JG(t,n){if(1&t){const e=pe();f(0,"div")(1,"span",56),g(2),h(),f(3,"span")(4,"button",57),I("click",function(){B(e);const r=S(2);return r.editingName=!r.editingName}),g(5,"Edit"),h()()()}if(2&t){const e=S(2);p(2),Z("",e.selectedAnimal.name," ")}}function e9(t,n){if(1&t){const e=pe();f(0,"div")(1,"span")(2,"input",58),I("ngModelChange",function(r){return B(e),S(2).newName=r}),h()(),f(3,"span")(4,"button",8),I("click",function(){return B(e),S(2).editName()}),g(5,"Save"),h()(),f(6,"span")(7,"button",8),I("click",function(){B(e);const r=S(2);return r.editingName=!r.editingName}),g(8,"Cancel"),h()()()}if(2&t){const e=S(2);p(2),_("ngModel",e.newName)}}function t9(t,n){if(1&t&&(f(0,"span",59),g(1),h()),2&t){const e=S(2);er("ngbPopover",e.traitStatGainDescription),p(1),Z(" ",e.selectedAnimal.trait.traitName," ")}}function i9(t,n){if(1&t&&(f(0,"div"),x(1,JG,6,1,"div",6),x(2,e9,9,1,"div",6),f(3,"span",12),x(4,t9,2,2,"span",55),g(5),h()()),2&t){const e=S();p(1),_("ngIf",!e.editingName),p(1),_("ngIf",e.editingName),p(2),_("ngIf",null!=e.selectedAnimal.trait),p(1),Z(" ",e.selectedAnimal.getAnimalType()," ")}}function n9(t,n){if(1&t){const e=pe();f(0,"div")(1,"span")(2,"button",8),I("click",function(){B(e);const r=S(2);return r.editingName=!r.editingName}),g(3,"Edit Name"),h()()()}}function r9(t,n){if(1&t){const e=pe();f(0,"div")(1,"span")(2,"input",60),I("ngModelChange",function(r){return B(e),S(2).newName=r}),h()(),f(3,"span")(4,"button",8),I("click",function(){return B(e),S(2).editName()}),g(5,"Save"),h()(),f(6,"span")(7,"button",8),I("click",function(){B(e);const r=S(2);return r.editingName=!r.editingName}),g(8,"Cancel"),h()()()}if(2&t){const e=S(2);p(2),_("ngModel",e.newName)}}function a9(t,n){if(1&t&&(f(0,"span",59),g(1),h()),2&t){const e=S(2);er("ngbPopover",e.traitStatGainDescription),p(1),Z(" ",e.selectedAnimal.trait.traitName," ")}}function o9(t,n){if(1&t&&(f(0,"div"),x(1,n9,4,0,"div",6),x(2,r9,9,1,"div",6),f(3,"span",12),x(4,a9,2,2,"span",55),g(5),h()()),2&t){const e=S();p(1),_("ngIf",!e.editingName),p(1),_("ngIf",e.editingName),p(2),_("ngIf",null!=e.selectedAnimal.trait),p(1),Z(" ",e.selectedAnimal.getAnimalType()," ")}}function s9(t,n){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=S();p(1),Z("(",e.selectedAnimal.currentTraining.trainingName,")")}}function l9(t,n){if(1&t&&D(0,"app-toggle",61),2&t){const e=S();_("callbackFunction",e.toggleAutoBreed)("label","Auto Breed")("model",e.autoBreedActive)}}function c9(t,n){if(1&t&&(f(0,"div",14),g(1),D(2,"br")(3,"br"),g(4),h()),2&t){const e=S(2);_("ngbPopover",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)),p(1),Z("Orb: ",e.selectedAnimal.equippedOrb.name," "),p(3),Z(" ",e.getEquipmentShortDescription(e.selectedAnimal.equippedOrb.name)," ")}}function u9(t,n){1&t&&(f(0,"div"),g(1," Orb: None "),h())}function d9(t,n){if(1&t){const e=pe();f(0,"button",8),I("click",function(){return B(e),S(2).unequipOrb()}),g(1,"Unequip Orb"),h()}}function h9(t,n){if(1&t){const e=pe();f(0,"div",62),x(1,c9,5,3,"div",5),x(2,u9,2,0,"div",6),D(3,"br"),x(4,d9,2,0,"button",7),f(5,"button",8),I("click",function(){B(e);const r=S(),a=lt(215);return r.openOrbModal(a)}),g(6,"Equip New Orb"),h()()}if(2&t){const e=S();p(1),_("ngIf",null!=e.selectedAnimal.equippedOrb),p(1),_("ngIf",null==e.selectedAnimal.equippedOrb),p(2),_("ngIf",null!=e.selectedAnimal.equippedOrb)}}function f9(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Training:"),h(),g(4),Lt(5,"number"),h(),D(6,"br"),h()),2&t){const e=S(),i=lt(203);p(2),_("ngbPopover",i),p(2),Z(" ",oi(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromTraining,"1.0-0")," ")}}function p9(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Free Races:"),h(),g(4),Lt(5,"number"),h()()),2&t){const e=S(),i=lt(199);p(2),_("ngbPopover",i),p(2),Z(" ",oi(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces,"1.0-0")," ")}}function g9(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Breed XP From Circuit Races:"),h(),g(4),Lt(5,"number"),h()()),2&t){const e=S(),i=lt(201);p(2),_("ngbPopover",i),p(2),Z(" ",oi(5,2,e.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces,"1.0-0")," ")}}function v9(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Training Time Reduction:"),h(),g(4),Lt(5,"number"),h()()),2&t){const e=S(),i=lt(207);p(2),_("ngbPopover",i),p(2),Z(" ",oi(5,2,e.selectedAnimal.miscStats.trainingTimeReduction,"1.0-0"),"% ")}}function m9(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Diminishing Returns per Facility Level:"),h(),g(4),Lt(5,"number"),h()()),2&t){const e=S(),i=lt(205);p(2),_("ngbPopover",i),p(2),Z(" ",oi(5,2,e.selectedAnimal.miscStats.diminishingReturnsBonus,"1.0-0")," ")}}function b9(t,n){if(1&t&&(f(0,"div")(1,"span")(2,"span",63),g(3,"Bonus Talents:"),h(),g(4),Lt(5,"number"),h()()),2&t){const e=S(),i=lt(209);p(2),_("ngbPopover",i),p(2),Z(" ",oi(5,2,e.selectedAnimal.miscStats.bonusTalents,"1.0-0")," ")}}function _9(t,n){if(1&t){const e=pe();f(0,"button",64),I("click",function(){B(e);const r=S();return r.selectAbility(r.ability2)}),g(1),h()}if(2&t){const e=S();Mt("filterActive",e.selectedAnimal.ability.name===e.ability2.name),p(1),Z("",e.ability2.name," ")}}function y9(t,n){if(1&t){const e=pe();f(0,"button",65),I("click",function(){B(e);const r=S();return r.selectAbility(r.ability3)}),g(1),h()}if(2&t){const e=S();Mt("filterActive",e.selectedAnimal.ability.name===e.ability3.name),p(1),Z("",e.ability3.name," ")}}function w9(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=S();p(1),rn("",e.selectedAbility.abilityXp," / ",e.selectedAbility.abilityMaxXp," XP")}}function S9(t,n){1&t&&(f(0,"span"),g(1,"MAX"),h())}function C9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getTopSpeedPopover()," ")}}function T9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getAccelerationPopover()," ")}}function D9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getEndurancePopover()," ")}}function R9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getPowerPopover()," ")}}function x9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getFocusPopover()," ")}}function M9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getAdaptabilityPopover()," ")}}function k9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getAbilityLevelPopover()," ")}}function A9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getBonusFreeRaceXpPopover()," ")}}function P9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getBonusCircuitRaceXpPopover()," ")}}function E9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getBonusTrainingXpPopover()," ")}}function I9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," ")}}function V9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getBonusTrainingTimeReductionPopover()," ")}}function O9(t,n){if(1&t&&(f(0,"div",66),g(1),h()),2&t){const e=S();p(1),Z(" ",e.getBonusTalentsPopover()," ")}}function N9(t,n){if(1&t&&(f(0,"div"),D(1,"span",31),h()),2&t){const e=S().$implicit,i=S(4);p(1),_("innerHTML",i.getItemAdditionalText(e),Bt)}}const F9=function(t){return{activeSelectedItem:t}};function B9(t,n){if(1&t){const e=pe();f(0,"td",76)(1,"div",77),I("click",function(){const a=B(e).$implicit;return S(4).selectItem(a)}),f(2,"h6",78),g(3),h(),x(4,N9,2,1,"div",6),D(5,"br")(6,"br"),g(7),D(8,"br")(9,"br"),h()()}if(2&t){const e=n.$implicit,i=S(4);p(1),_("ngClass",pn(5,F9,e.isSelected)),p(2),rn("",e.name," (",e.amount,")"),p(1),_("ngIf",i.itemHasAdditionalText(e)),p(3),Z(" ",i.getItemShortDescription(e.name)," ")}}function L9(t,n){if(1&t&&(f(0,"tr"),x(1,B9,10,7,"td",75),h()),2&t){const e=n.$implicit;p(1),_("ngForOf",e)}}function U9(t,n){if(1&t){const e=pe();f(0,"div",79)(1,"span",80)(2,"span")(3,"span",78),g(4),h(),g(5),h(),f(6,"span",81)(7,"label",82),g(8,"Amount: "),h(),f(9,"input",83),I("ngModelChange",function(r){return B(e),S(3).selectedItemQuantity=r}),h(),f(10,"button",84),I("click",function(){return B(e),S(3).useItem()}),g(11,"Use"),h()()()()}if(2&t){const e=S(3);p(4),nt(e.selectedItem.name),p(1),Z(" - ",e.getItemShortDescription(e.selectedItem.name)," "),p(4),_("ngModel",e.selectedItemQuantity)}}function H9(t,n){if(1&t&&(f(0,"div")(1,"div",71)(2,"div",72)(3,"table"),x(4,L9,2,1,"tr",73),h()()(),x(5,U9,12,3,"div",74),h()),2&t){const e=S(2);p(4),_("ngForOf",e.itemsRows),p(1),_("ngIf",null!=e.selectedItem)}}function G9(t,n){1&t&&(f(0,"div"),g(1," No items available. "),h())}function z9(t,n){if(1&t){const e=pe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Use Item"),h(),f(5,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),x(7,H9,6,2,"div",6),x(8,G9,2,0,"div",6),h()()}if(2&t){const e=S();p(7),_("ngIf",e.usableItemsList.length>0),p(1),_("ngIf",0==e.usableItemsList.length)}}const j9=function(t){return{activeSelectedEquipment:t}};function $9(t,n){if(1&t){const e=pe();f(0,"td",76)(1,"div",86),I("click",function(){const a=B(e).$implicit;return S(3).selectEquipment(a)}),f(2,"h6",52),g(3),h(),D(4,"br")(5,"br"),g(6),D(7,"br"),h()()}if(2&t){const e=n.$implicit,i=S(3);p(1),_("ngClass",pn(4,j9,e.isSelected)),p(2),rn("",e.name," (",e.amount,")"),p(3),Z(" ",i.getEquipmentShortDescription(e.name)," ")}}function W9(t,n){if(1&t&&(f(0,"tr"),x(1,$9,8,6,"td",75),h()),2&t){const e=n.$implicit;p(1),_("ngForOf",e)}}function q9(t,n){if(1&t){const e=pe();f(0,"div",79)(1,"span",87)(2,"span")(3,"span",52),g(4),h(),g(5),h(),f(6,"span",81)(7,"button",84),I("click",function(){return B(e),S(2).equipItem()}),g(8,"Equip"),h()()()()}if(2&t){const e=S(2);p(4),nt(e.selectedEquipment.name),p(1),Z(" - ",e.getEquipmentShortDescription(e.selectedEquipment.name)," ")}}function X9(t,n){1&t&&(f(0,"div"),g(1," No equipment available. "),h())}function Y9(t,n){if(1&t){const e=pe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Change Equipment"),h(),f(5,"button",70),I("click",function(){const a=B(e).$implicit;return S().clearSelectedItems(),a.dismiss()}),g(6,"X"),h()(),f(7,"div")(8,"div",71)(9,"div",85)(10,"table"),x(11,W9,2,1,"tr",73),h()()(),x(12,q9,9,2,"div",74),h(),x(13,X9,2,0,"div",6),h()()}if(2&t){const e=S();p(11),_("ngForOf",e.equipmentRows),p(1),_("ngIf",null!=e.selectedEquipment),p(1),_("ngIf",0==e.equipmentList.length)}}const Q9=function(t){return{activeSelectedOrb:t}};function K9(t,n){if(1&t){const e=pe();f(0,"td",76)(1,"div",89),I("click",function(){const a=B(e).$implicit;return S(3).selectOrb(a)}),f(2,"h6",90),g(3),h(),D(4,"br"),g(5),D(6,"br"),h()()}if(2&t){const e=n.$implicit,i=S(3);p(1),_("ngClass",pn(3,Q9,e.isSelected)),p(2),nt(e.name),p(2),Z(" ",i.getEquipmentShortDescription(e.name)," ")}}function Z9(t,n){if(1&t&&(f(0,"tr"),x(1,K9,7,5,"td",75),h()),2&t){const e=n.$implicit;p(1),_("ngForOf",e)}}function J9(t,n){if(1&t){const e=pe();f(0,"div",79)(1,"span",91)(2,"span")(3,"span",90),g(4),h(),g(5),h(),f(6,"span",81)(7,"button",84),I("click",function(){return B(e),S(2).equipOrb()}),g(8,"Equip"),h()()()()}if(2&t){const e=S(2);p(4),nt(e.selectedOrb.name),p(1),Z(" - ",e.getEquipmentShortDescription(e.selectedOrb.name)," ")}}function ez(t,n){1&t&&(f(0,"div"),g(1," No equipment available. "),h())}function tz(t,n){if(1&t){const e=pe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Change Orb"),h(),f(5,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div")(8,"div",71)(9,"div",88)(10,"table"),x(11,Z9,2,1,"tr",73),h()()(),x(12,J9,9,2,"div",74),h(),x(13,ez,2,0,"div",6),h()()}if(2&t){const e=S();p(11),_("ngForOf",e.orbRows),p(1),_("ngIf",null!=e.selectedOrb),p(1),_("ngIf",0==e.equipmentList.length)}}const iz=function(t){return{selectedTalentTree:t}};function nz(t,n){if(1&t){const e=pe();f(0,"span",96),I("click",function(){const a=B(e).$implicit;return S(4).filterTalentTree(a)}),g(1),h()}if(2&t){const e=n.$implicit,i=S(4);_("ngClass",pn(2,iz,i.selectedTalentTree===e)),p(1),Z(" ",e.trim()," ")}}function rz(t,n){if(1&t&&(f(0,"div")(1,"strong"),g(2),h()()),2&t){const e=S(4);p(2),Z(" ",e.inDepthTalentTreeDescription," ")}}function az(t,n){if(1&t&&(f(0,"div")(1,"div",94),x(2,nz,2,4,"span",95),h(),D(3,"hr"),x(4,rz,3,1,"div",6),h()),2&t){const e=S(3);p(2),_("ngForOf",e.talentTreeOptions),p(2),_("ngIf",""!==e.inDepthTalentTreeDescription&&void 0!==e.inDepthTalentTreeDescription)}}function oz(t,n){if(1&t){const e=pe();f(0,"div")(1,"div",71),x(2,az,5,2,"div",6),h(),f(3,"div",79)(4,"button",93),I("click",function(){return B(e),S(2).selectTalentTree()}),g(5,"Select"),h()()()}if(2&t){const e=S(2);p(2),_("ngIf",e.talentTreeOptions.length>0)}}function sz(t,n){1&t&&D(0,"div",107)}function lz(t,n){if(1&t&&D(0,"div",11),2&t){const e=S().index,i=S().index;_("ngClass",S(3).getBorderConditional(i,e))}}function cz(t,n){if(1&t){const e=pe();f(0,"div",102)(1,"div",11)(2,"app-talent",103),I("spentTalent",function(r){return B(e),S(4).spentTalent(r)}),h()(),f(3,"div",104),x(4,sz,1,0,"div",105),x(5,lz,1,1,"div",106),h()()}if(2&t){const e=n.index,i=S().index,r=S(3);p(1),_("ngClass",i<r.talentRows-1?"talentContent":"lastTalentContent"),p(1),_("row",i)("column",e)("selectedAnimal",r.selectedAnimal),p(2),_("ngIf",i!==r.talentRows-1),p(1),_("ngIf",i!==r.talentRows-1)}}const u2=function(){return[]};function uz(t,n){if(1&t&&(f(0,"div",99)(1,"div",100),x(2,cz,6,6,"div",101),h()()),2&t){const e=S(3);p(2),_("ngForOf",av(1,u2).constructor(e.talentColumns))}}function dz(t,n){if(1&t&&(f(0,"div",71)(1,"div",97),g(2),h(),D(3,"br"),f(4,"p")(5,"em"),g(6," Note that this functionality is new and subject to change. I have plans to add more talents and certain talents will likely still need rebalancing/redesigning. Bear with me as I work that out. Once I feel like talents are in a final state, everyone will have the option to reset their talent choices if they choose to. Feel free to experiment with the options as they are now and let me know if you have any feedback. Thanks! "),h()(),D(7,"br"),x(8,uz,3,2,"div",98),h()),2&t){const e=S(2);p(2),Z("Available Talent Points: ",e.availableTalentPoints,""),p(6),_("ngForOf",av(2,u2).constructor(e.talentRows))}}function hz(t,n){1&t&&(f(0,"div"),g(1," Coming Soon! "),h())}function fz(t,n){if(1&t){const e=pe();f(0,"div",67)(1,"form")(2,"div",68)(3,"h4",69),g(4,"Talents"),h(),f(5,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),x(7,oz,6,1,"div",6),x(8,dz,9,3,"div",92),x(9,hz,2,0,"div",6),h()()}if(2&t){const e=S();p(7),_("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType===e.talentTreeTypeEnum.none),p(1),_("ngIf",e.talentsReleased&&e.selectedAnimal.talentTree.talentTreeType!==e.talentTreeTypeEnum.none),p(1),_("ngIf",!e.talentsReleased)}}function pz(t,n){if(1&t){const e=pe();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Base Stats Info"),h(),f(4,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",108)(8,"div",66)(9,"span",12),g(10,"Speed - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Acceleration - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Endurance - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Power - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Focus - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Adaptability - "),h(),g(36),h(),D(37,"hr"),f(38,"div",66)(39,"span",12),g(40,"Diminishing Returns - "),h(),g(41),h()()()()}if(2&t){const e=S();p(11),Z(" ",e.getTopSpeedPopover()," "),p(5),Z(" ",e.getAccelerationPopover()," "),p(5),Z(" ",e.getEndurancePopover()," "),p(5),Z(" ",e.getPowerPopover()," "),p(5),Z(" ",e.getFocusPopover()," "),p(5),Z(" ",e.getAdaptabilityPopover()," "),p(5),Z(" ",e.getDiminishingReturnsPopover()," ")}}function gz(t,n){if(1&t){const e=pe();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Racing Stats Info"),h(),f(4,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",23)(8,"div",66)(9,"span",12),g(10,"Max Speed - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Acceleration Rate - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Stamina - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Power Efficiency - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Focus Distance - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Adaptability Distance - "),h(),g(36),h(),D(37,"hr"),f(38,"div",66)(39,"span",12),g(40,"Burst Chance - "),h(),g(41),h(),D(42,"hr"),f(43,"div",66)(44,"span",12),g(45,"Burst Distance - "),h(),g(46),h()()()()}if(2&t){const e=S();p(11),Z(" ",e.selectedAnimal.currentStats.maxSpeedMsPopover()," "),p(5),Z(" ",e.selectedAnimal.currentStats.accelerationMsPopover()," "),p(5),Z(" ",e.selectedAnimal.currentStats.staminaPopover()," "),p(5),Z(" ",e.selectedAnimal.currentStats.powerMsPopover()," "),p(5),Z(" ",e.selectedAnimal.currentStats.focusMsPopover()," "),p(5),Z(" ",e.selectedAnimal.currentStats.adaptabilityMsPopover()," "),p(5),Z(" ",e.selectedAnimal.currentStats.burstChancePopover()," "),p(5),Z(" ",e.selectedAnimal.currentStats.burstDistancePopover()," ")}}function vz(t,n){if(1&t){const e=pe();f(0,"div",67)(1,"div",68)(2,"h4",69),g(3,"Miscellaneous Stats Info"),h(),f(4,"button",70),I("click",function(){return B(e).$implicit.dismiss()}),g(5,"X"),h()(),f(6,"div",71)(7,"div",108)(8,"div",66)(9,"span",12),g(10,"Bonus Breed XP From Training - "),h(),g(11),h(),D(12,"hr"),f(13,"div",66)(14,"span",12),g(15,"Bonus Breed XP From Free Races - "),h(),g(16),h(),D(17,"hr"),f(18,"div",66)(19,"span",12),g(20,"Bonus Breed XP From Circuit Races - "),h(),g(21),h(),D(22,"hr"),f(23,"div",66)(24,"span",12),g(25,"Training Time Reduction - "),h(),g(26),h(),D(27,"hr"),f(28,"div",66)(29,"span",12),g(30,"Bonus Diminishing Returns per Facility Level - "),h(),g(31),h(),D(32,"hr"),f(33,"div",66)(34,"span",12),g(35,"Bonus Talents - "),h(),g(36),h()()()()}if(2&t){const e=S();p(11),Z(" ",e.getBonusTrainingXpPopover()," "),p(5),Z(" ",e.getBonusFreeRaceXpPopover()," "),p(5),Z(" ",e.getBonusCircuitRaceXpPopover()," "),p(5),Z(" ",e.getBonusTrainingTimeReductionPopover()," "),p(5),Z(" ",e.getBonusDiminishingReturnsPerFacilityLevelPopover()," "),p(5),Z(" ",e.getBonusTalentsPopover()," ")}}let mz=(()=>{class t{constructor(e,i,r,a,o,s){this.lookupService=e,this.modalService=i,this.globalService=r,this.componentCommunicationService=a,this.utilityService=o,this.gameLoopService=s,this.returnEmitter=new ot,this.canAutoBreed=!1,this.areTalentsAvailable=!1,this.orbIsUnlocked=!1,this.talentTreeTypeEnum=yt,this.canBreed=!0,this.orbFunctionalityReleased=!1,this.talentsReleased=!0,this.talentColumns=3,this.talentRows=4,this.toggleAutoBreed=()=>{this.autoBreedActive=!this.autoBreedActive,this.selectedAnimal.autoBreedActive=this.autoBreedActive}}keyEvent(e){if(!this.modalService.hasOpenModals()){var i=this.globalService.globalVar.animals.filter(s=>s.isAvailable),r=i.findIndex(s=>this.selectedAnimal===s);if(r>-1)if("ArrowLeft"===e.key)(a=r-1)<0&&(a=i.length-1),this.componentCommunicationService.setAnimalView(Ct.animals,o=i[a]),this.resetSelectedAnimalInfo(o);else if("ArrowRight"===e.key){var a,o;(a=r+1)===i.length&&(a=0),this.componentCommunicationService.setAnimalView(Ct.animals,o=i[a]),this.resetSelectedAnimalInfo(o)}}}ngOnInit(){this.handleIntroTutorial(),this.resetSelectedAnimalInfo(this.selectedAnimal),this.breedDescriptionPopover="When your Breed XP reaches the max, you can Breed your animal. This will reset your base stats, but it will also increase the amount that your base stats contribute to your racing stats."}returnToAnimalView(){this.returnEmitter.emit(!1)}isAbilityLevelMaxedOut(){var e=25,i=this.globalService.globalVar.modifiers.find(r=>"abilityLevelCapModifier"===r.text);return null!=i&&(e=i.value),null!=this.selectedAbility&&this.selectedAbility.abilityLevel>this.selectedAnimal.breedLevel+e}canAnimalBreed(){var e=!0;return this.selectedAnimal.breedGaugeXp<this.selectedAnimal.breedGaugeMax&&(e=!1),e}breed(){(!this.globalService.globalVar.showBreedWarning||confirm("Breeding will increase your base stat modifiers at the cost of resetting your base stats to their default values. You should do this when you have raced as far as you can without breeding or you have the time to spend to train your stats back. Continue?"))&&(this.globalService.globalVar.showBreedWarning=!1,this.globalService.BreedAnimal(this.selectedAnimal),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel),this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut())}editName(){this.newName.length<=50&&this.newName.length>=1?(this.selectedAnimal.name=this.newName,this.editingName=!1):alert("Name must be between 1 and 50 characters long.")}selectAbility(e){this.selectedAnimal.ability=e,this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal)}updateItemsList(){this.usableItemsList=[],this.globalService.globalVar.resources.filter(e=>(e.itemType===G.Food||e.itemType===G.Consumable)&&e.amount>0).forEach(e=>{void 0!==e&&this.usableItemsList.push(e)}),this.setupDisplayItems()}updateEquipmentList(){this.equipmentList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===G.Equipment&&!this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var i=e.makeCopy(e);this.equipmentList.push(i)}}),this.setupDisplayEquipment(),this.globalService.globalVar.animals.filter(e=>null!=e.equippedItem).forEach(e=>{var i=this.equipmentList.find(r=>{var a;return r.name===(null===(a=e.equippedItem)||void 0===a?void 0:a.name)});null!=i&&(i.amount>0&&(i.amount-=1),i.amount<=0&&(this.equipmentList=this.equipmentList.filter(r=>r.name!==(null==i?void 0:i.name))))})}updateOrbList(){this.orbList=[],this.globalService.globalVar.resources.filter(e=>e.itemType===G.Equipment&&this.lookupService.isEquipmentItemAnOrb(e.name)).forEach(e=>{if(void 0!==e){var i=e.makeCopy(e);this.orbList.push(i)}}),this.setupDisplayEquipment()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];for(var i=1;i<=this.usableItemsList.length;i++)this.itemsCells.push(this.usableItemsList[i-1]),i%4==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}setupDisplayEquipment(){this.equipmentCells=[],this.equipmentRows=[];for(var i=1;i<=this.equipmentList.length;i++)this.equipmentCells.push(this.equipmentList[i-1]),i%4==0&&(this.equipmentRows.push(this.equipmentCells),this.equipmentCells=[]);0!==this.equipmentCells.length&&this.equipmentRows.push(this.equipmentCells)}setupDisplayOrbs(){this.orbCells=[],this.orbRows=[];for(var i=1;i<=this.orbList.length;i++)this.orbCells.push(this.orbList[i-1]),i%4==0&&(this.orbRows.push(this.orbCells),this.orbCells=[]);0!==this.orbCells.length&&this.orbRows.push(this.orbCells)}openTalentsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openBaseStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openRacingStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openMiscStatsModal(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openItemModal(e){this.setupDisplayItems(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()},r=>{this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()})}openEquipmentModal(e){this.setupDisplayEquipment(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()},r=>{this.selectedEquipment=void 0,this.clearSelectedEquipment(),this.updateEquipmentList()})}openOrbModal(e){this.setupDisplayOrbs(),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}).result.then(r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()},r=>{this.selectedOrb=void 0,this.clearSelectedOrb(),this.updateOrbList()})}useItem(){if(void 0!==this.selectedItem){var e=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name&&r.itemType===this.selectedItem.itemType);if(void 0===e)return void alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!");if(null==this.selectedItemQuantity||isNaN(Number(this.selectedItemQuantity)))return void alert("You must enter a numerical amount to use.");if(e.amount<this.selectedItemQuantity)return void alert("You don't have that many "+e.name+"!");if(this.selectedItem.itemType===G.Consumable&&this.selectedItem.name.includes("Certificate")&&this.lookupService.isAmountMoreThanCertificateCap(this.selectedItemQuantity,this.selectedAnimal,this.selectedItem.name))return void alert("This amount will exceed the amount of these certificates you can give your animal.");if(e.amount-=this.selectedItemQuantity,this.selectedItem.itemType===G.Food)if("Mangoes"===this.selectedItem.name)this.selectedAnimal.breedLevel+=+this.selectedItemQuantity,null==this.selectedAnimal.mangoesUsed&&(this.selectedAnimal.mangoesUsed=0),this.selectedAnimal.mangoesUsed+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal);else if("Gingko Leaves"===this.selectedItem.name)this.selectedAnimal.previousBreedLevel=this.selectedAnimal.breedLevel,this.selectedAnimal.breedLevel=1,this.selectedAnimal.breedGaugeMax=200,this.selectedAnimal.breedGaugeXp=0,this.selectedAnimal.incubatorStatUpgrades=new sf;else{var i=new Ve(0,0,0,0,0,0);"Apples"===this.selectedItem.name&&(i.acceleration=this.selectedItemQuantity),"Bananas"===this.selectedItem.name&&(i.topSpeed=this.selectedItemQuantity),"Strawberries"===this.selectedItem.name&&(i.endurance=this.selectedItemQuantity),"Carrots"===this.selectedItem.name&&(i.power=this.selectedItemQuantity),"Turnips"===this.selectedItem.name&&(i.focus=this.selectedItemQuantity),"Oranges"===this.selectedItem.name&&(i.adaptability=this.selectedItemQuantity),this.selectedAnimal.increaseStats(i),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}else this.selectedItem.itemType===G.Consumable&&(this.selectedItemQuantity=+this.selectedItemQuantity,"Free Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+=+this.selectedItemQuantity),"Circuit Race Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces+=2*this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+=+this.selectedItemQuantity),"Training Breed XP Gain Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.bonusBreedXpGainFromTraining+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+=+this.selectedItemQuantity),"Diminishing Returns Increase Certificate"===this.selectedItem.name&&(this.selectedAnimal.miscStats.diminishingReturnsBonus+=+this.selectedItemQuantity,this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+=+this.selectedItemQuantity,this.globalService.calculateAnimalRacingStats(this.selectedAnimal)));this.selectedItem=void 0,this.selectedItemQuantity=0,this.clearSelectedItems(),this.updateItemsList()}}selectItem(e){this.selectedItem=e,this.usableItemsList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}clearSelectedItems(){this.usableItemsList.forEach(e=>{e.isSelected=!1})}clearSelectedEquipment(){this.equipmentList.forEach(e=>{e.isSelected=!1})}clearSelectedOrb(){this.orbList.forEach(e=>{e.isSelected=!1})}equipItem(){void 0!==this.selectedEquipment&&(this.selectedAnimal.equippedItem=this.selectedEquipment,this.updateEquipmentList(),this.clearSelectedEquipment(),this.modalService.dismissAll(),this.selectedEquipment=void 0)}selectEquipment(e){this.selectedEquipment=e,this.equipmentList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}unequipItem(){this.selectedAnimal.equippedItem=null,this.clearSelectedEquipment(),this.updateEquipmentList()}equipOrb(){void 0!==this.selectedOrb&&(this.selectedAnimal.equippedOrb=this.selectedOrb,this.updateOrbList(),this.clearSelectedOrb(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal),this.modalService.dismissAll(),this.selectedOrb=void 0)}selectOrb(e){this.selectedOrb=e,this.orbList.forEach(i=>{i.isSelected=!1}),e.isSelected=!0}unequipOrb(){this.selectedAnimal.equippedOrb=null,this.clearSelectedOrb(),this.updateOrbList(),this.globalService.calculateAnimalRacingStats(this.selectedAnimal)}getTopSpeedPopover(){return this.lookupService.topSpeedPopover(this.selectedAnimal)}getAccelerationPopover(){return this.lookupService.accelerationPopover(this.selectedAnimal)}getEndurancePopover(){return this.lookupService.endurancePopover(this.selectedAnimal)}getPowerPopover(){return this.lookupService.powerPopover(this.selectedAnimal)}getFocusPopover(){return this.lookupService.focusPopover(this.selectedAnimal)}getAdaptabilityPopover(){return this.lookupService.adaptabilityPopover(this.selectedAnimal)}getAbilityLevelPopover(){return this.lookupService.abilityLevelPopover(this.selectedAnimal)}getBonusFreeRaceXpPopover(){return this.lookupService.bonusFreeRaceXpPopover(this.selectedAnimal)}getBonusCircuitRaceXpPopover(){return this.lookupService.bonusCircuitRaceXpPopover(this.selectedAnimal)}getBonusTrainingXpPopover(){return this.lookupService.bonusTrainingXpPopover(this.selectedAnimal)}getBonusDiminishingReturnsPerFacilityLevelPopover(){return this.lookupService.bonusDiminishingReturnsPerFacilityLevelPopover(this.selectedAnimal)}getBonusTrainingTimeReductionPopover(){return this.lookupService.bonusTrainingTimeReductionPopover(this.selectedAnimal)}getBonusTalentsPopover(){return this.lookupService.bonusTalentsPopover(this.selectedAnimal)}getAbilityPopover(){return this.lookupService.abilityPopover()}getDiminishingReturnsPopover(){return"Once a trainable stat is over this number, additional gains in this stat will be reduced. Increase with Facility Level."}getEquipmentShortDescription(e){return this.globalService.getEquipmentDescription(e)}getItemShortDescription(e){return this.globalService.getItemDescription(e)}itemHasAdditionalText(e){return!(e.itemType!==G.Consumable||!e.name.includes("Certificate"))}getItemAdditionalText(e){var i="";return e.itemType===G.Consumable&&e.name.includes("Certificate")&&("Free Race Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusLocalBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Circuit Race Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusCircuitBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Training Breed XP Gain Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusTrainingBreedXpCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>"),"Diminishing Returns Increase Certificate"===e.name&&(i="<em>"+this.selectedAnimal.miscStats.bonusDiminishingReturnsCertificateCount+" out of "+this.selectedAnimal.miscStats.certificateUseCap+" used</em>")),this.utilityService.getSanitizedHtml(i)}handleIntroTutorial(){var e=this.globalService.globalVar.animals.find(i=>i.type===L.Hare);!this.globalService.globalVar.tutorials.tutorialCompleted&&3===this.globalService.globalVar.tutorials.currentTutorialId&&(this.globalService.globalVar.tutorials.showTutorial=!0),!this.globalService.globalVar.tutorials.tutorialCompleted&&9===this.globalService.globalVar.tutorials.currentTutorialId&&(null==e?void 0:e.isAvailable)&&(this.globalService.globalVar.tutorials.currentTutorialId+=1,this.globalService.globalVar.tutorials.showTutorial=!0)}goToAssignedBarn(){var e=this.globalService.globalVar.barns.find(i=>i.barnNumber===this.selectedAnimal.associatedBarnNumber);null!=e&&this.componentCommunicationService.setBarnView(Ct.barn,e.barnNumber)}filterTalentTree(e){this.selectedTalentTree=e,this.inDepthTalentTreeDescription=this.lookupService.getInDepthTalentTreeDescription(e)}selectTalentTree(){""!==this.selectedTalentTree&&null!=this.selectedTalentTree?this.selectedAnimal.talentTree.talentTreeType=this.lookupService.convertTalentTreeNameToEnum(this.selectedTalentTree):alert("You must select a talent tree.")}resetSelectedAnimalInfo(e){var i=this;this.selectedAnimal=e,this.areTalentsAvailable=this.lookupService.isItemUnlocked("rainbowRace"),this.orbIsUnlocked=this.lookupService.isItemUnlocked("orbs"),this.maxSpeedModifierAmount=this.lookupService.getMaxSpeedModifierByAnimalType(this.selectedAnimal.type),this.accelerationModifierAmount=this.lookupService.getAccelerationModifierByAnimalType(this.selectedAnimal.type),this.staminaModifierAmount=this.lookupService.getStaminaModifierByAnimalType(this.selectedAnimal.type),this.powerModifierAmount=this.lookupService.getPowerModifierByAnimalType(this.selectedAnimal.type),this.focusModifierAmount=this.lookupService.getFocusModifierByAnimalType(this.selectedAnimal.type),this.adaptabilityModifierAmount=this.lookupService.getAdaptabilityModifierByAnimalType(this.selectedAnimal.type),this.diminishingReturnsAmount=this.globalService.GetAnimalDiminishingReturns(this.selectedAnimal),this.breedLevelPopover=this.lookupService.getBreedLevelPopover(this.selectedAnimal.breedLevel);var r=this.lookupService.getStockbreeder();null!=r&&r>0&&(this.canAutoBreed=!0),this.canAutoBreed&&(this.autoBreedActive=this.selectedAnimal.autoBreedActive),this.ability1=this.selectedAnimal.availableAbilities[0],this.selectedAnimal.availableAbilities.length>1&&(this.ability2=this.selectedAnimal.availableAbilities[1]),this.selectedAnimal.availableAbilities.length>2&&(this.ability3=this.selectedAnimal.availableAbilities[2]),this.selectedAbility=this.selectedAnimal.ability,this.abilityLevelMaxedOut=this.isAbilityLevelMaxedOut(),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedAnimal.ability.name,this.selectedAnimal),null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},this.updateItemsList(),this.updateEquipmentList(),this.updateOrbList(),this.selectedTalentTree="",this.inDepthTalentTreeDescription="",this.componentCommunicationService.setAnimalView(Ct.animals,e);var a=this.globalService.globalVar.barns.find(o=>o.barnNumber===this.selectedAnimal.associatedBarnNumber);this.assignedBarnName=null==a?"Unassigned":"Assigned to: "+this.lookupService.getBarnName(a),this.areTalentsAvailable&&(this.talentTreeOptions=this.lookupService.getTalentTreeNames(),this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var o=xr(function*(s){i.canBreed=i.canAnimalBreed()});return function(s){return o.apply(this,arguments)}}())}getTalentTreeName(){var e=this.selectedAnimal.talentTree.getTotalSpentPoints();return this.lookupService.getTalentTreeNameByEnum(this.selectedAnimal.talentTree.talentTreeType)+" Level "+e}getBorderConditional(e,i){var r,a=e+1,o=0;1===a&&(o=this.selectedAnimal.talentTree.row2RequiredPoints),2===a&&(o=this.selectedAnimal.talentTree.row3RequiredPoints),3===a&&(o=this.selectedAnimal.talentTree.row4RequiredPoints);var s=o-this.selectedAnimal.talentTree.getTalentPointsByColumn(i);return"Flatland"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedFlatlandTalentSpacer height0":!0}:4===s?r={"completedFlatlandTalentSpacer height1":!0}:3===s?r={"completedFlatlandTalentSpacer height2":!0}:2===s?r={"completedFlatlandTalentSpacer height3":!0}:1===s?r={"completedFlatlandTalentSpacer height4":!0}:s<=0&&(r={"completedFlatlandTalentSpacer height5":!0})),"Mountain"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedMountainTalentSpacer height0":!0}:4===s?r={"completedMountainTalentSpacer height1":!0}:3===s?r={"completedMountainTalentSpacer height2":!0}:2===s?r={"completedMountainTalentSpacer height3":!0}:1===s?r={"completedMountainTalentSpacer height4":!0}:s<=0&&(r={"completedMountainTalentSpacer height5":!0})),"Ocean"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedOceanTalentSpacer height0":!0}:4===s?r={"completedOceanTalentSpacer height1":!0}:3===s?r={"completedOceanTalentSpacer height2":!0}:2===s?r={"completedOceanTalentSpacer height3":!0}:1===s?r={"completedOceanTalentSpacer height4":!0}:s<=0&&(r={"completedOceanTalentSpacer height5":!0})),"Tundra"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedTundraTalentSpacer height0":!0}:4===s?r={"completedTundraTalentSpacer height1":!0}:3===s?r={"completedTundraTalentSpacer height2":!0}:2===s?r={"completedTundraTalentSpacer height3":!0}:1===s?r={"completedTundraTalentSpacer height4":!0}:s<=0&&(r={"completedTundraTalentSpacer height5":!0})),"Volcanic"===this.selectedAnimal.getRaceCourseType()&&(s>=5?r={"completedVolcanicTalentSpacer height0":!0}:4===s?r={"completedVolcanicTalentSpacer height1":!0}:3===s?r={"completedVolcanicTalentSpacer height2":!0}:2===s?r={"completedVolcanicTalentSpacer height3":!0}:1===s?r={"completedVolcanicTalentSpacer height4":!0}:s<=0&&(r={"completedVolcanicTalentSpacer height5":!0})),r}spentTalent(e){this.availableTalentPoints=this.lookupService.getTalentPointsAvailableToAnimal(this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),this.componentCommunicationService.setAnimal(new At)}}return t.\u0275fac=function(e){return new(e||t)(P(bi),P(To),P(Et),P(cn),P(kn),P(An))},t.\u0275cmp=_t({type:t,selectors:[["app-selected-animal"]],hostBindings:function(e,i){1&e&&I("keyup",function(a){return i.keyEvent(a)},!1,uo)},inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:224,vars:113,consts:[[1,"selectedAnimalView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"equippable"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","talents",4,"ngIf"],[1,"animalInfo"],[3,"ngClass"],[1,"keyword"],[1,"clickableText","buttonAsText",3,"click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover"],[3,"disabled","click"],[3,"callbackFunction","label","model",4,"ngIf"],[1,"back"],["class","orb",4,"ngIf"],[1,"gridContainer"],[1,"trainableStats"],[1,"s4Heading"],[1,"tooltipIcon",3,"click"],[1,"racingStats"],[1,"miscStats"],[1,"abilities"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"s4Heading",3,"ngbPopover"],[1,"ability1","s5Heading","clickableText","buttonAsText",3,"click"],["class","ability2 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],["class","ability3 s5Heading clickableText buttonAsText",3,"filterActive","click",4,"ngIf"],[1,"abilityXp"],[3,"innerHTML"],["topSpeedPopoverContent",""],["accelerationPopoverContent",""],["endurancePopoverContent",""],["powerPopoverContent",""],["focusPopoverContent",""],["adaptabilityPopoverContent",""],["abilityLevelPopoverContent",""],["bonusFreeRaceXpPopoverContent",""],["bonusCircuitRaceXpPopoverContent",""],["bonusTrainingXpPopoverContent",""],["bonusDiminishingReturnsPerFacilityLevelPopoverContent",""],["bonusTrainingTimeReductionPopoverContent",""],["bonusTalentsPopoverContent",""],["content",""],["equipment",""],["orb",""],["talentsContent",""],["baseStatsContent",""],["racingStatsContent",""],["miscStatsContent",""],[1,"equipmentKeyword"],[1,"talents"],["class","keyword",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],[1,"name","keyword"],[1,"editName",3,"click"],["id","newName","name","newName","maxlength","50",3,"ngModel","ngModelChange"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],["id","newName","name","newName","minlength","1","maxlength","50",3,"ngModel","ngModelChange"],[3,"callbackFunction","label","model"],[1,"orb"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"keyword",3,"ngbPopover"],[1,"ability2","s5Heading","clickableText","buttonAsText",3,"click"],[1,"ability3","s5Heading","clickableText","buttonAsText",3,"click"],[1,"popoverClass"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"itemContainer"],[4,"ngFor","ngForOf"],["class","modal-footer",4,"ngIf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"selectableItem",3,"ngClass","click"],[1,"resourceKeyword"],[1,"modal-footer"],[1,"selectedItemSpan"],[1,"rightAlign"],["for","deck-name"],["id","deck-name","type","text",1,"spaced",3,"ngModel","ngModelChange"],["type","button",1,"spaced",3,"click"],[1,"equipmentContainer"],[1,"selectableEquipment",3,"ngClass","click"],[1,"selectedEquipmentSpan"],[1,"orbContainer"],[1,"selectableOrb",3,"ngClass","click"],[1,"progressionKeyword"],[1,"selectedOrbSpan"],["class","modal-body",4,"ngIf"],["type","button",3,"click"],[1,"typeContainer"],["class","talents subHeading",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"talents","subHeading",3,"ngClass","click"],[1,"talentInfo"],["class","talentRow",4,"ngFor","ngForOf"],[1,"talentRow"],[1,"rowFlex"],["class","talentColumn",4,"ngFor","ngForOf"],[1,"talentColumn"],[3,"row","column","selectedAnimal","spentTalent"],[1,"talentSpacer"],["class","defaultTalentSpacer",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"defaultTalentSpacer"],[1,"baseStats"]],template:function(e,i){if(1&e){const r=pe();f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),x(6,XG,7,3,"div",5),x(7,YG,2,0,"div",6),D(8,"br"),x(9,QG,2,0,"button",7),f(10,"button",8),I("click",function(){B(r);const o=lt(213);return i.openEquipmentModal(o)}),g(11,"Equip New Item"),h()(),D(12,"br"),x(13,ZG,5,1,"div",9),h(),f(14,"div",10)(15,"div",11),x(16,i9,6,4,"div",6),x(17,o9,6,4,"div",6),f(18,"span",12),g(19),h(),D(20,"br"),h(),f(21,"button",13),I("click",function(){return i.goToAssignedBarn()}),g(22),x(23,s9,2,1,"em",6),h(),D(24,"br"),f(25,"span",14),g(26),h(),D(27,"br"),f(28,"span",14),g(29),Lt(30,"number"),f(31,"button",15),I("click",function(){return i.breed()}),g(32,"Breed"),h()(),D(33,"br"),f(34,"button",8),I("click",function(){B(r);const o=lt(211);return i.openItemModal(o)}),g(35,"Use Item"),h(),D(36,"br"),x(37,l9,1,3,"app-toggle",16),h(),f(38,"div",17)(39,"div")(40,"button",8),I("click",function(){return i.returnToAnimalView()}),g(41,"Back"),h()(),D(42,"br"),x(43,h9,7,3,"div",18),h()(),D(44,"hr"),f(45,"div",19)(46,"div",20)(47,"span",21),g(48,"Base Stats "),f(49,"span",22),I("click",function(){B(r);const o=lt(219);return i.openBaseStatsModal(o)}),g(50,"?"),h()(),D(51,"br")(52,"br"),f(53,"span",14)(54,"span",12),g(55,"Speed:"),h(),g(56),Lt(57,"number"),h(),D(58,"br"),f(59,"span",14)(60,"span",12),g(61,"Acceleration:"),h(),g(62),Lt(63,"number"),h(),D(64,"br"),f(65,"span",14)(66,"span",12),g(67,"Endurance:"),h(),g(68),Lt(69,"number"),h(),D(70,"br"),f(71,"span",14)(72,"span",12),g(73,"Power:"),h(),g(74),Lt(75,"number"),h(),D(76,"br"),f(77,"span",14)(78,"span",12),g(79,"Focus:"),h(),g(80),Lt(81,"number"),h(),D(82,"br"),f(83,"span",14)(84,"span",12),g(85,"Adaptability:"),h(),g(86),Lt(87,"number"),h(),D(88,"br"),f(89,"span",14)(90,"span",12),g(91,"Diminishing Returns:"),h(),g(92),Lt(93,"number"),h()(),f(94,"div",23)(95,"span",21),g(96,"Racing Stats "),f(97,"span",22),I("click",function(){B(r);const o=lt(221);return i.openRacingStatsModal(o)}),g(98,"?"),h()(),D(99,"br")(100,"br"),f(101,"span",14)(102,"span",12),g(103,"Max Speed:"),h(),g(104),Lt(105,"number"),h(),D(106,"br"),f(107,"span",14)(108,"span",12),g(109,"Acceleration Rate:"),h(),g(110),Lt(111,"number"),h(),D(112,"br"),f(113,"span",14)(114,"span",12),g(115,"Stamina:"),h(),g(116),Lt(117,"number"),h(),D(118,"br"),f(119,"span",14)(120,"span",12),g(121,"Power Efficiency:"),h(),g(122),Lt(123,"number"),h(),D(124,"br"),f(125,"span",14)(126,"span",12),g(127,"Focus Distance:"),h(),g(128),Lt(129,"number"),h(),D(130,"br"),f(131,"span",14)(132,"span",12),g(133,"Adaptability Distance:"),h(),g(134),Lt(135,"number"),h(),D(136,"br"),f(137,"span",14)(138,"span",12),g(139,"Burst Chance:"),h(),g(140),Lt(141,"number"),h(),D(142,"br"),f(143,"span",14)(144,"span",12),g(145,"Burst Distance:"),h(),g(146),Lt(147,"number"),h()(),f(148,"div",24)(149,"span",21),g(150,"Miscellaneous Stats "),f(151,"span",22),I("click",function(){B(r);const o=lt(223);return i.openMiscStatsModal(o)}),g(152,"?"),h()(),D(153,"br")(154,"br"),x(155,f9,7,5,"div",6),x(156,p9,6,5,"div",6),x(157,g9,6,5,"div",6),x(158,v9,6,5,"div",6),x(159,m9,6,5,"div",6),x(160,b9,6,5,"div",6),h()(),f(161,"div",25)(162,"p")(163,"span",26),g(164,"Abilities"),h(),D(165,"br"),f(166,"span")(167,"em"),g(168,"Your animal will use the ability you select below."),h()()(),f(169,"div")(170,"div")(171,"button",27),I("click",function(){return i.selectAbility(i.ability1)}),g(172),h(),x(173,_9,2,3,"button",28),x(174,y9,2,3,"button",29),h(),D(175,"br"),f(176,"p")(177,"span",14),g(178),f(179,"span",30),x(180,w9,2,2,"span",6),x(181,S9,2,0,"span",6),h()(),D(182,"br")(183,"span",31),h()()()()()(),x(184,C9,2,1,"ng-template",null,32,ut),x(186,T9,2,1,"ng-template",null,33,ut),x(188,D9,2,1,"ng-template",null,34,ut),x(190,R9,2,1,"ng-template",null,35,ut),x(192,x9,2,1,"ng-template",null,36,ut),x(194,M9,2,1,"ng-template",null,37,ut),x(196,k9,2,1,"ng-template",null,38,ut),x(198,A9,2,1,"ng-template",null,39,ut),x(200,P9,2,1,"ng-template",null,40,ut),x(202,E9,2,1,"ng-template",null,41,ut),x(204,I9,2,1,"ng-template",null,42,ut),x(206,V9,2,1,"ng-template",null,43,ut),x(208,O9,2,1,"ng-template",null,44,ut),x(210,z9,9,2,"ng-template",null,45,ut),x(212,Y9,14,3,"ng-template",null,46,ut),x(214,tz,14,3,"ng-template",null,47,ut),x(216,fz,10,3,"ng-template",null,48,ut),x(218,pz,42,7,"ng-template",null,49,ut),x(220,gz,47,8,"ng-template",null,50,ut),x(222,vz,37,6,"ng-template",null,51,ut)}if(2&e){const r=lt(185),a=lt(187),o=lt(189),s=lt(191),l=lt(193),c=lt(195),u=lt(197);p(6),_("ngIf",null!=i.selectedAnimal.equippedItem),p(1),_("ngIf",null==i.selectedAnimal.equippedItem),p(2),_("ngIf",null!=i.selectedAnimal.equippedItem),p(4),_("ngIf",i.areTalentsAvailable),p(2),_("ngClass",i.colorConditional),p(1),_("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),_("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(2),nt(i.selectedAnimal.getRaceCourseType()),p(3),Z("",i.assignedBarnName," "),p(1),_("ngIf",null!=i.selectedAnimal.currentTraining),p(2),er("ngbPopover",i.breedLevelPopover),p(1),Z("Breed Level ",i.selectedAnimal.breedLevel,""),p(2),_("ngbPopover",i.breedDescriptionPopover),p(1),rn("Breed XP: ",oi(30,65,i.selectedAnimal.breedGaugeXp,"1.2-2"),"/",i.selectedAnimal.breedGaugeMax," "),p(2),_("disabled",!i.canBreed),p(6),_("ngIf",i.canAutoBreed),p(6),_("ngIf",i.orbIsUnlocked&&i.orbFunctionalityReleased),p(10),_("ngbPopover",r),p(3),Z(" ",oi(57,68,i.selectedAnimal.currentStats.topSpeed,"1.2-2")," "),p(3),_("ngbPopover",a),p(3),Z(" ",oi(63,71,i.selectedAnimal.currentStats.acceleration,"1.2-2")," "),p(3),_("ngbPopover",o),p(3),Z(" ",oi(69,74,i.selectedAnimal.currentStats.endurance,"1.2-2")," "),p(3),_("ngbPopover",s),p(3),Z(" ",oi(75,77,i.selectedAnimal.currentStats.power,"1.2-2")," "),p(3),_("ngbPopover",l),p(3),Z(" ",oi(81,80,i.selectedAnimal.currentStats.focus,"1.2-2")," "),p(3),_("ngbPopover",c),p(3),Z(" ",oi(87,83,i.selectedAnimal.currentStats.adaptability,"1.2-2")," "),p(3),er("ngbPopover",i.getDiminishingReturnsPopover()),p(3),Z(" ",oi(93,86,i.diminishingReturnsAmount,"1.0-0")," "),p(9),er("ngbPopover",i.selectedAnimal.currentStats.maxSpeedMsPopover()),p(3),Z(" ",oi(105,89,i.selectedAnimal.currentStats.maxSpeedMs,"1.2-2")," m/s "),p(3),er("ngbPopover",i.selectedAnimal.currentStats.accelerationMsPopover()),p(3),Z(" ",oi(111,92,i.selectedAnimal.currentStats.accelerationMs,"1.2-2")," m/s "),p(3),er("ngbPopover",i.selectedAnimal.currentStats.staminaPopover()),p(3),Z(" ",oi(117,95,i.selectedAnimal.currentStats.stamina,"1.2-2")," "),p(3),er("ngbPopover",i.selectedAnimal.currentStats.powerMsPopover()),p(3),Z(" ",oi(123,98,i.selectedAnimal.currentStats.powerMs,"1.2-2"),"% "),p(3),er("ngbPopover",i.selectedAnimal.currentStats.focusMsPopover()),p(3),Z(" ~",oi(129,101,i.selectedAnimal.currentStats.focusMs,"1.2-2")," m "),p(3),er("ngbPopover",i.selectedAnimal.currentStats.adaptabilityMsPopover()),p(3),Z(" ~",oi(135,104,i.selectedAnimal.currentStats.adaptabilityMs,"1.2-2")," m "),p(3),er("ngbPopover",i.selectedAnimal.currentStats.burstChancePopover()),p(3),Z(" ",oi(141,107,i.selectedAnimal.currentStats.burstChance,"1.2-2"),"% "),p(3),er("ngbPopover",i.selectedAnimal.currentStats.burstDistancePopover()),p(3),Z(" ",oi(147,110,i.selectedAnimal.currentStats.burstDistance,"1.2-2")," m "),p(9),_("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromTraining>0),p(1),_("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromLocalRaces>0),p(1),_("ngIf",i.selectedAnimal.miscStats.bonusBreedXpGainFromCircuitRaces>0),p(1),_("ngIf",i.selectedAnimal.miscStats.trainingTimeReduction>0),p(1),_("ngIf",i.selectedAnimal.miscStats.diminishingReturnsBonus>0),p(1),_("ngIf",i.selectedAnimal.miscStats.bonusTalents>0),p(3),_("ngbPopover",i.getAbilityPopover()),p(8),Mt("filterActive",i.selectedAnimal.ability.name===i.ability1.name),p(1),Z("",i.ability1.name," "),p(1),_("ngIf",i.ability2.isAbilityPurchased),p(1),_("ngIf",i.ability3.isAbilityPurchased),p(3),_("ngbPopover",u),p(1),Z("Level ",i.selectedAbility.abilityLevel," "),p(2),_("ngIf",!i.abilityLevelMaxedOut),p(1),_("ngIf",i.abilityLevelMaxedOut),p(2),_("innerHTML",i.longDescription,Bt)}},directives:[si,Wr,Ji,qo,Il,bs,_s,Hh,HG,Bh,kh,lu,on,qG],pipes:[bo],styles:['.selectedAnimalView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.animalInfo[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:animalInfo}.back[_ngcontent-%COMP%]{padding-top:.25rem;text-align:center;grid-area:back;justify-content:space-between;flex-direction:column;display:flex}.equippable[_ngcontent-%COMP%]{justify-content:space-between;flex-direction:column;display:flex;grid-area:equippable}.marginGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.filterActive[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor;color:var(--foreground-secondary)}.info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"equippable animalInfo back"}.gridContainer[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-items:center;justify-content:stretch;grid-template-areas:"trainingStats racingStats miscStats"}.trainableStats[_ngcontent-%COMP%]{justify-self:left;grid-area:trainingStats}.racingStats[_ngcontent-%COMP%]{grid-area:racingStats}.miscStats[_ngcontent-%COMP%]{grid-area:miscStats}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.editName[_ngcontent-%COMP%]{width:4rem}.name[_ngcontent-%COMP%]{margin-left:4rem}.selectedEquipmentSpan[_ngcontent-%COMP%], .selectedOrbSpan[_ngcontent-%COMP%], .selectedItemSpan[_ngcontent-%COMP%]{width:100%}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.rightAlign[_ngcontent-%COMP%]{float:right}.ability1[_ngcontent-%COMP%], .ability2[_ngcontent-%COMP%], .ability3[_ngcontent-%COMP%]{width:33.33%;display:inline-block}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.typeContainer[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-evenly}.talentTreeType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.selectedTalentTree[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid;text-decoration:underline solid}.rowFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.abilityXp[_ngcontent-%COMP%]{margin-left:2.5rem}.talentColumn[_ngcontent-%COMP%]{width:31.75%}.talentContent[_ngcontent-%COMP%]{height:calc(100% - 5rem);height:-o-calc(100% - 5rem);border:1px solid rgba(0,0,0,.1)}.lastTalentContent[_ngcontent-%COMP%]{height:100%;border:1px solid rgba(0,0,0,.1)}.talentInfo[_ngcontent-%COMP%]{text-align:center}.talentSpacer[_ngcontent-%COMP%]{display:grid;grid-template:1fr / 1fr;place-items:center}.defaultTalentSpacer[_ngcontent-%COMP%]{height:5rem;border-right:solid thick rgba(0,0,0,.1);grid-column:1 / 1;grid-row:1 / 1;z-index:1}.completedFlatlandTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--flatlandColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedMountainTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--mountainColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedOceanTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--waterColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedTundraTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--tundraColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.completedVolcanicTalentSpacer[_ngcontent-%COMP%]{align-self:baseline;border-right:solid thick var(--volcanicColor);grid-column:1 / 1;grid-row:1 / 1;z-index:2}.height0[_ngcontent-%COMP%]{height:0}.height1[_ngcontent-%COMP%]{height:1rem}.height2[_ngcontent-%COMP%]{height:2rem}.height3[_ngcontent-%COMP%]{height:3rem}.height4[_ngcontent-%COMP%]{height:4rem}.height5[_ngcontent-%COMP%]{height:5rem}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}.activeSelectedItem[_ngcontent-%COMP%], .activeSelectedEquipment[_ngcontent-%COMP%], .activeSelectedOrb[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.selectableItem[_ngcontent-%COMP%], .selectableOrb[_ngcontent-%COMP%], .selectableEquipment[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem;margin-top:.25rem}.tooltipIcon[_ngcontent-%COMP%]{display:none}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}@media (max-width: 800px){.info[_ngcontent-%COMP%], .gridContainer[_ngcontent-%COMP%]{grid-template-columns:1fr 1.5fr 1fr}.tooltipIcon[_ngcontent-%COMP%]{display:inline-block}}']}),t})();function bz(t,n){1&t&&(f(0,"div",4)(1,"h2"),g(2,"Animals"),h(),f(3,"div",5),g(4," Select an animal to view its stats, change abilities, and more. "),h(),D(5,"hr"),h())}function _z(t,n){if(1&t){const e=pe();f(0,"div",6)(1,"app-animal-list",7),I("selectedAnimal",function(r){return B(e),S().selectedAnimal(r)}),h()()}if(2&t){const e=S();p(1),_("availableAnimals",e.availableAnimals)("isAnimalDetailView",!0)}}function yz(t,n){if(1&t){const e=pe();f(0,"div",8)(1,"app-selected-animal",9),I("returnEmitter",function(r){return B(e),S().returnToAnimalView(r)}),h()()}if(2&t){const e=S();p(1),_("selectedAnimal",e.animal)}}let wz=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(Ct.animals),this.availableAnimals=this.globalService.globalVar.animals.filter(e=>e.isAvailable),this.subscription=this.componentCommunicationService.getAnimalView().subscribe(e=>{null!=e.type?(this.animalSelected=!0,this.animal=e):this.animalSelected=!1})}selectedAnimal(e){this.animalSelected=!0,this.animal=e,this.componentCommunicationService.setAnimalView(Ct.animals,this.animal)}returnToAnimalView(e){this.animalSelected=!1}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(cn))},t.\u0275cmp=_t({type:t,selectors:[["app-animals-view"]],decls:4,vars:3,consts:[[1,"animalsView"],["class","info",4,"ngIf"],["class","listView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"info"],[1,"description"],[1,"listView"],[3,"availableAnimals","isAnimalDetailView","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,bz,6,0,"div",1),x(2,_z,2,2,"div",2),x(3,yz,2,1,"div",3),h()),2&e&&(p(1),_("ngIf",!i.animalSelected),p(1),_("ngIf",!i.animalSelected),p(1),_("ngIf",i.animalSelected))},directives:[si,Ef,mz],styles:[".animalsView[_ngcontent-%COMP%]{height:100%;overflow:hidden;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}table[_ngcontent-%COMP%]{width:100%;height:100%}.info[_ngcontent-%COMP%]{text-align:center}.selectedView[_ngcontent-%COMP%]{height:100%;overflow:auto}"]}),t})();function Sz(t,n){if(1&t){const e=pe();f(0,"button",17),I("click",function(){B(e);const r=S().$implicit;return S().setAsAutoRunFreeRace(r)}),g(1,"Auto Run Free Race"),h()}}function Cz(t,n){if(1&t){const e=pe();f(0,"button",18),I("click",function(){B(e);const r=S().$implicit;return S().setAsEventDeck(r)}),g(1,"Set as Event Team"),h()}}function Tz(t,n){if(1&t){const e=pe();f(0,"div")(1,"div",7),D(2,"app-animal-deck",8),f(3,"div",9)(4,"button",10),I("click",function(){const a=B(e).$implicit,o=S(),s=lt(11);return o.editDeck(s,a)}),g(5,"Edit"),h()(),f(6,"div",11)(7,"button",12),I("click",function(){const a=B(e).$implicit;return S().setAsPrimary(a)}),g(8,"Set as Primary Team"),h()(),f(9,"div",13),x(10,Sz,2,0,"button",14),h(),f(11,"div",15),x(12,Cz,2,0,"button",16),h()(),D(13,"hr"),h()}if(2&t){const e=n.index,i=S();p(2),_("deckNumber",e+1),p(8),_("ngIf",i.showAutoRaceButton),p(2),_("ngIf",i.showEventButton)}}function Dz(t,n){if(1&t){const e=pe();f(0,"div",35)(1,"input",36),I("input",function(){return B(e),S(2).toggleRaceOrder()}),h(),f(2,"label",37),I("click",function(){return B(e),S(2).toggleRaceOrder()}),g(3,"Race Order: "),h(),f(4,"span")(5,"span",38),I("dragstart",function(r){return B(e),S(2).dragStart(r)})("dragover",function(r){return B(e),S(2).allowDrop(r)})("drop",function(r){return B(e),S(2).dropCourseType(r)}),g(6),h(),g(7," / "),f(8,"span",39),I("dragstart",function(r){return B(e),S(2).dragStart(r)})("dragover",function(r){return B(e),S(2).allowDrop(r)})("drop",function(r){return B(e),S(2).dropCourseType(r)}),g(9),h(),g(10," / "),f(11,"span",40),I("dragstart",function(r){return B(e),S(2).dragStart(r)})("dragover",function(r){return B(e),S(2).allowDrop(r)})("drop",function(r){return B(e),S(2).dropCourseType(r)}),g(12),h(),g(13," / "),f(14,"span",41),I("dragstart",function(r){return B(e),S(2).dragStart(r)})("dragover",function(r){return B(e),S(2).allowDrop(r)})("drop",function(r){return B(e),S(2).dropCourseType(r)}),g(15),h(),g(16," / "),f(17,"span",42),I("dragstart",function(r){return B(e),S(2).dragStart(r)})("dragover",function(r){return B(e),S(2).allowDrop(r)})("drop",function(r){return B(e),S(2).dropCourseType(r)}),g(18),h()()()}if(2&t){const e=S(2);p(1),_("checked",e.isRaceOrderOn),p(4),_("ngClass",e.getColorClass(e.selectedDeckOrder[0])),p(1),nt(e.selectedDeckOrder[0]),p(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[1])),p(1),nt(e.selectedDeckOrder[1]),p(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[2])),p(1),nt(e.selectedDeckOrder[2]),p(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[3])),p(1),nt(e.selectedDeckOrder[3]),p(2),_("ngClass",e.getColorClass(e.selectedDeckOrder[4])),p(1),nt(e.selectedDeckOrder[4])}}const Rz=function(t,n,e,i,r,a){return{selectedCourseType:t,flatlandColor:n,mountainColor:e,waterColor:i,tundraColor:r,volcanicColor:a}};function xz(t,n){if(1&t){const e=pe();f(0,"button",43),I("click",function(){const a=B(e).$implicit;return S(2).filterType(a)}),g(1),h()}if(2&t){const e=n.$implicit,i=S(2);_("ngClass",function Bw(t,n,e,i,r,a,o,s,l){const c=lr()+t,u=Me(),d=ta(u,c,e,i,r,a);return ds(u,c+4,o,s)||d?Wa(u,c+6,l?n.call(l,e,i,r,a,o,s):n(e,i,r,a,o,s)):Fc(u,c+6)}(2,Rz,i.selectedCourseType===e,"Flatland"===e,"Mountain"===e,"Ocean"===e,"Tundra"===e,"Volcanic"===e)),p(1),Z(" ",e.trim()," ")}}const Mz=function(t){return{selectedAnimal:t}};function kz(t,n){if(1&t){const e=pe();f(0,"button",44),I("click",function(){const a=B(e).$implicit;return S(2).selectAnimal(a)}),g(1),h()}if(2&t){const e=n.$implicit,i=S(2);_("ngClass",pn(2,Mz,i.selectedAnimalName===e)),p(1),Z(" ",e.trim()," ")}}function Az(t,n){if(1&t){const e=pe();f(0,"div",19)(1,"form",20)(2,"div",21)(3,"h4",22),g(4),h(),f(5,"button",23),I("click",function(){return B(e).$implicit.dismiss()}),g(6,"X"),h()(),f(7,"div",24)(8,"div",25)(9,"label",26),g(10,"Relay Team Name: "),h(),D(11,"input",27),h(),x(12,Dz,19,11,"div",28),D(13,"br"),f(14,"div",29),x(15,xz,2,9,"button",30),h(),D(16,"br"),f(17,"div",31),x(18,kz,2,4,"button",32),h()(),f(19,"div",33)(20,"button",34),I("click",function(){return B(e),S().saveDeck()}),g(21,"Save"),h()()()()}if(2&t){const e=S();p(1),_("formGroup",e.editDeckForm),p(3),Z("Edit ",e.selectedDeck.name,""),p(8),_("ngIf",e.displayRaceOrder),p(3),_("ngForOf",e.raceCourseTypeList),p(3),_("ngForOf",e.possibleAnimalsList)}}let Pz=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.modalService=i,this.lookupService=r,this.componentCommunicationService=a,this.raceCourseTypeList=[],this.displayRaceOrder=!1,this.editDeckForm=new Fh({deckName:new pm("")}),this.toggleRaceOrder=()=>{this.isRaceOrderOn=!this.isRaceOrderOn,this.selectedDeck.isCourseOrderActive=this.isRaceOrderOn}}ngOnInit(){this.componentCommunicationService.setNewView(Ct.relayTeams),this.isRaceOrderOn=!1,this.newAnimalList=[],this.animalDecks=this.globalService.globalVar.animalDecks,this.globalService.globalVar.animals.filter(r=>r.isAvailable).forEach(r=>{this.raceCourseTypeList.some(a=>a===r.getRaceCourseType())||this.raceCourseTypeList.push(r.getRaceCourseType())});var e=this.lookupService.getResourceByName("Scouts");null!=e&&e>0&&(this.displayRaceOrder=!0),this.selectedDeckOrder=[],this.selectedDeckOrder.push("Flatland"),this.selectedDeckOrder.push("Mountain"),this.selectedDeckOrder.push("Ocean"),this.selectedDeckOrder.push("Tundra"),this.selectedDeckOrder.push("Volcanic");var i=this.lookupService.getResourceByName("Team Manager");null==i&&(i=0),this.showAutoRaceButton=i>0,this.showEventButton=!!this.lookupService.isItemUnlocked("grandPrix")}editDeck(e,i){this.selectedDeck=i,this.newAnimalList=[],this.selectedAnimalName="",this.selectedCourseType="Flatland",this.isRaceOrderOn=i.isCourseOrderActive,null!=i.courseTypeOrder&&i.courseTypeOrder.length>0&&(this.selectedDeckOrder=[],i.courseTypeOrder.forEach(r=>{r===W.Flatland&&this.selectedDeckOrder.push("Flatland"),r===W.Mountain&&this.selectedDeckOrder.push("Mountain"),r===W.Ocean&&this.selectedDeckOrder.push("Ocean"),r===W.Tundra&&this.selectedDeckOrder.push("Tundra"),r===W.Volcanic&&this.selectedDeckOrder.push("Volcanic")})),this.filterType(this.selectedCourseType),i.selectedAnimals.length>0&&i.selectedAnimals.forEach(r=>{this.newAnimalList.push(r)}),this.editDeckForm.patchValue({deckName:i.name}),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}saveDeck(){var e,i,r,a,o,s,l,c,u=this.globalService.globalVar.animalDecks.find(k=>k.deckNumber===this.selectedDeck.deckNumber);if(null!=u&&((null===(e=this.editDeckForm.get("deckName"))||void 0===e?void 0:e.value.length)<=50&&(null===(i=this.editDeckForm.get("deckName"))||void 0===i?void 0:i.value.length)>=1&&(u.name=null===(r=this.editDeckForm.get("deckName"))||void 0===r?void 0:r.value),u.selectedAnimals=[],this.newAnimalList.forEach(k=>{null==u||u.selectedAnimals.push(k)}),null==u||u.selectedAnimals.sort(this.compare),this.displayRaceOrder&&this.isRaceOrderOn)){var d=[],v=null===(a=document.getElementById("raceOrder1"))||void 0===a?void 0:a.innerHTML,m=null===(o=document.getElementById("raceOrder2"))||void 0===o?void 0:o.innerHTML,b=null===(s=document.getElementById("raceOrder3"))||void 0===s?void 0:s.innerHTML,y=null===(l=document.getElementById("raceOrder4"))||void 0===l?void 0:l.innerHTML,C=null===(c=document.getElementById("raceOrder5"))||void 0===c?void 0:c.innerHTML;d.push(v),d.push(m),d.push(b),d.push(y),d.push(C),null!=u&&(u.courseTypeOrder=[]),d.forEach(k=>{"Flatland"===k&&(null==u||u.courseTypeOrder.push(W.Flatland)),"Mountain"===k&&(null==u||u.courseTypeOrder.push(W.Mountain)),"Ocean"===k&&(null==u||u.courseTypeOrder.push(W.Ocean)),"Tundra"===k&&(null==u||u.courseTypeOrder.push(W.Tundra)),"Volcanic"===k&&(null==u||u.courseTypeOrder.push(W.Volcanic))})}this.modalService.dismissAll()}compare(e,i){return e.raceCourseType>i.raceCourseType?1:i.raceCourseType>e.raceCourseType?-1:0}filterType(e){var i=this.lookupService.getAnimalsByRaceCourseType(e),r=[];i.length>0&&i.forEach(o=>{var s=this.globalService.globalVar.animals.find(l=>l.getAnimalType()===o);(null==s?void 0:s.isAvailable)&&r.push(s.getAnimalType())}),this.possibleAnimalsList=r,this.selectedCourseType=e;var a=this.selectedDeck.selectedAnimals.find(o=>o.getRaceCourseType()===e);null!=a&&(this.selectedAnimalName=a.getAnimalType())}selectAnimal(e){var i=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(null!=i){var r=-1,a=i.getRaceCourseType();this.newAnimalList.forEach(o=>{o.getRaceCourseType()===a&&(r=this.newAnimalList.indexOf(o))}),r>=0&&this.newAnimalList.splice(r,1),this.selectedAnimalName===i.getAnimalType()?this.selectedAnimalName="":(this.newAnimalList.push(i),this.selectedAnimalName=i.getAnimalType())}}setAsPrimary(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.isPrimaryDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.isPrimaryDeck=!1),r.isPrimaryDeck=!0)}setAsAutoRunFreeRace(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.autoRunFreeRace),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.autoRunFreeRace=!1),r.autoRunFreeRace=!0)}setAsEventDeck(e){var i=this.globalService.globalVar.animalDecks.find(a=>a.isEventDeck),r=this.globalService.globalVar.animalDecks.find(a=>a.deckNumber===e.deckNumber);null!=r&&(null!=i&&(i.isEventDeck=!1),r.isEventDeck=!0)}dragStart(e){this.dragSourceElement=e,e.dataTransfer.setData("text",e.target.id)}allowDrop(e){e.preventDefault()}dropCourseType(e){e.preventDefault(),e.stopPropagation();var i=e.dataTransfer.getData("text"),r=document.getElementById(i),a=e.target.innerHTML;if(null!==r&&null!==a){var l=this.selectedDeckOrder.indexOf(a),c=this.selectedDeckOrder.indexOf(null==r?void 0:r.innerHTML);this.selectedDeckOrder[l]=r.innerHTML,this.selectedDeckOrder[c]=a,e.target.innerHTML="",e.target.className="",e.target.append(r.innerHTML),r.innerHTML="",r.className="",r.append(a)}}getColorClass(e){return{flatlandColor:"Flatland"===e,mountainColor:"Mountain"===e,waterColor:"Ocean"===e,tundraColor:"Tundra"===e,volcanicColor:"Volcanic"===e}}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(To),P(bi),P(cn))},t.\u0275cmp=_t({type:t,selectors:[["app-decks-view"]],decls:12,vars:1,consts:[[1,"decksView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"description"],[4,"ngFor","ngForOf"],["content",""],[1,"gridContainer"],[1,"deck",3,"deckNumber"],[1,"edit"],[1,"editButton",3,"click"],[1,"primary"],[1,"primaryButton",3,"click"],[1,"autoRunFreeRace"],["class","autoRunFreeRaceButton",3,"click",4,"ngIf"],[1,"event"],["class","eventButton",3,"click",4,"ngIf"],[1,"autoRunFreeRaceButton",3,"click"],[1,"eventButton",3,"click"],[1,"modalClass"],[3,"formGroup"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","deck-name"],["id","deck-name","type","text","maxlength","50","formControlName","deckName",1,"spaced"],["class","raceOrder",4,"ngIf"],[1,"typeContainer"],["class","raceType subHeading clickableText buttonAsTextKeepColor",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"animalContainer"],["class","animalOption clickableText buttonAsText",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",3,"click"],[1,"raceOrder"],["type","checkbox","id","finishTraining",1,"spaced",3,"checked","input"],[1,"spaced",3,"click"],["id","raceOrder1","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder2","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder3","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder4","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],["id","raceOrder5","draggable","true",1,"draggable","keyword",3,"ngClass","dragstart","dragover","drop"],[1,"raceType","subHeading","clickableText","buttonAsTextKeepColor",3,"ngClass","click"],[1,"animalOption","clickableText","buttonAsText",3,"ngClass","click"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Relay Teams"),h(),f(6,"div",4),g(7," Relay Teams are groups of animals that run together in a race. As you rise through the ranks, races will have multiple legs of varying terrain that require you to use different animals to succeed. Each Relay Team consists of one animal from each course type. Your primary Relay Team is the one that will run the races you select. "),h(),D(8,"hr"),h(),x(9,Tz,14,3,"div",5),h()()(),x(10,Az,22,5,"ng-template",null,6,ut)),2&e&&(p(9),_("ngForOf",i.animalDecks))},directives:[on,O0,si,Bh,kh,Lh,qo,Il,bs,_m,Ji],styles:['.decksView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view .";background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.view[_ngcontent-%COMP%]{grid-area:view;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.raceType[_ngcontent-%COMP%]{-webkit-text-decoration:underline solid transparent;text-decoration:underline solid transparent;transition:-webkit-text-decoration .3s ease;transition:text-decoration .3s ease;transition:text-decoration .3s ease,-webkit-text-decoration .3s ease;display:inline-block}.animalContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.animalOption[_ngcontent-%COMP%]{display:inline-block}.selectedAnimal[_ngcontent-%COMP%]{font-weight:700}.selectedCourseType[_ngcontent-%COMP%]{font-weight:700;-webkit-text-decoration:underline solid Currentcolor;text-decoration:underline solid Currentcolor}.typeContainer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:60% 1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"deck . freeRace ." "deck edit primary event"}.deck[_ngcontent-%COMP%]{grid-area:deck}.edit[_ngcontent-%COMP%]{grid-area:edit;text-align:center}.event[_ngcontent-%COMP%]{grid-area:event;text-align:center}.eventButton[_ngcontent-%COMP%], .editButton[_ngcontent-%COMP%]{width:80%}.primary[_ngcontent-%COMP%]{grid-area:primary;text-align:center}.primaryButton[_ngcontent-%COMP%]{width:80%}.autoRunFreeRace[_ngcontent-%COMP%]{grid-area:freeRace;text-align:center}.autoRunFreeRaceButton[_ngcontent-%COMP%]{width:80%;margin-bottom:.5rem}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.draggable[_ngcontent-%COMP%]{cursor:move;margin:1em}.raceOrder[_ngcontent-%COMP%]{display:inline-block}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{grid-template-columns:50% 1fr 1fr 1fr}}']}),t})();function Ez(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=S(2);p(1),Z("",e.selectedItem.numberPurchasing," ")}}function Iz(t,n){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=S(2);p(1),Z(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function Vz(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=S(2);p(1),Z(" x ",e.buyMultiplierAmount,"")}}function Oz(t,n){if(1&t){const e=pe();f(0,"div",3)(1,"span",4),x(2,Ez,2,1,"span",5),g(3),h(),x(4,Iz,2,1,"em",5),D(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),f(10,"div",7),g(11),h(),D(12,"br"),f(13,"button",8),I("click",function(){return B(e),S().BuyItem()}),g(14,"Buy "),x(15,Vz,2,1,"span",5),h()()}if(2&t){const e=S();_("ngbPopover",lt(3)),p(1),_("ngClass",e.colorConditional),p(1),_("ngIf",e.displayNumberPurchasing),p(1),Z(" ",e.displayName,""),p(1),_("ngIf",e.selectedItem.totalShopQuantity>1),p(3),_("innerHTML",e.shortDescription,Bt),p(4),Z(" ",e.purchaseResourcesRequired," "),p(2),_("disabled",!e.canAffordItem),p(2),_("ngIf",e.buyMultiplierAmount>1)}}function Nz(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=S(2);p(1),Z("",e.selectedItem.numberPurchasing," ")}}function Fz(t,n){if(1&t&&(f(0,"em"),g(1),h()),2&t){const e=S(2);p(1),Z(" (",e.selectedItem.totalShopQuantity-e.selectedItem.amountPurchased," left)")}}function Bz(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=S(2);p(1),Z(" x ",e.buyMultiplierAmount,"")}}function Lz(t,n){if(1&t){const e=pe();f(0,"div",9)(1,"span",4),x(2,Nz,2,1,"span",5),g(3),h(),x(4,Fz,2,1,"em",5),D(5,"br")(6,"br")(7,"span",6)(8,"br")(9,"br"),f(10,"div",7),g(11),h(),D(12,"br"),f(13,"button",8),I("click",function(){return B(e),S().BuyItem()}),g(14,"Buy "),x(15,Bz,2,1,"span",5),h()()}if(2&t){const e=S();p(1),_("ngClass",e.colorConditional),p(1),_("ngIf",e.displayNumberPurchasing),p(1),nt(e.displayName),p(1),_("ngIf",e.selectedItem.totalShopQuantity>1),p(3),_("innerHTML",e.shortDescription,Bt),p(4),Z(" ",e.purchaseResourcesRequired," "),p(2),_("disabled",!e.canAffordItem),p(2),_("ngIf",e.buyMultiplierAmount>1)}}function Uz(t,n){if(1&t&&(f(0,"div",10),D(1,"span",6),h()),2&t){const e=S();p(1),_("innerHTML",e.longDescription,Bt)}}let Hz=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.gameLoopService=r,this.itemPurchased=new ot,this.canAffordItem=!0,this.displayNumberPurchasing=!1,this.displayName="",this.buyMultiplierAmount=1}keyEventDown(e){(this.selectedItem.type===G.Consumable||this.selectedItem.type===G.Food||this.selectedItem.type===G.Equipment||this.selectedItem.type===G.Resources)&&"Mangoes"!==this.selectedItem.name&&("Shift"===e.key&&(e.preventDefault(),this.shiftPressed||(this.buyMultiplierAmount*=25,this.shiftPressed=!0)),"Control"===e.key&&(e.preventDefault(),this.ctrlPressed||(this.buyMultiplierAmount*=10,this.ctrlPressed=!0)),"Alt"===e.key&&(e.preventDefault(),this.altPressed||(this.buyMultiplierAmount*=100,this.altPressed=!0)))}keyEventUp(e){e.preventDefault(),(this.selectedItem.type===G.Consumable||this.selectedItem.type===G.Food||this.selectedItem.type===G.Equipment||this.selectedItem.type===G.Resources)&&"Mangoes"!==this.selectedItem.name&&("Shift"===e.key&&this.shiftPressed&&(this.buyMultiplierAmount/=25,this.shiftPressed=!1),"Control"===e.key&&this.ctrlPressed&&(this.buyMultiplierAmount/=10,this.ctrlPressed=!1),"Alt"===e.key&&this.altPressed&&(this.buyMultiplierAmount/=100,this.altPressed=!1))}ngOnInit(){var e=this;if(this.buyMultiplierAmount=1,this.selectedItem.type===G.Ability?(this.shortDescription=this.lookupService.getAnimalAbilityDescription(!0,this.selectedItem.additionalIdentifier),this.longDescription=this.lookupService.getAnimalAbilityDescription(!1,this.selectedItem.additionalIdentifier)):this.selectedItem.type===G.Specialty?(this.shortDescription=this.lookupService.getSpecialtyItemDescription(this.selectedItem.name),""===this.shortDescription&&(this.shortDescription=this.selectedItem.shortDescription)):this.selectedItem.type===G.Animal?this.shortDescription=this.globalService.getAnimalDescription(this.selectedItem.name):(this.shortDescription=this.selectedItem.shortDescription,this.longDescription=this.selectedItem.longDescription),this.displayName=this.selectedItem.name,this.selectedItem.type===G.Animal&&void 0!==(i=this.globalService.globalVar.animals.find(a=>a.name===this.selectedItem.name))&&(this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()}),this.selectedItem.type===G.Ability){var i,r=this.selectedItem.name.split(" ")[0].trim();""!==r&&void 0!==(i=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===r))&&(this.colorConditional={flatlandColor:"Flatland"===i.getRaceCourseType(),mountainColor:"Mountain"===i.getRaceCourseType(),waterColor:"Ocean"===i.getRaceCourseType(),tundraColor:"Tundra"===i.getRaceCourseType(),volcanicColor:"Volcanic"===i.getRaceCourseType()})}this.selectedItem.type===G.Food&&1===this.selectedItem.numberPurchasing&&("Apples"===this.displayName&&(this.displayName="Apple"),"Oranges"===this.displayName&&(this.displayName="Orange"),"Bananas"===this.displayName&&(this.displayName="Banana"),"Strawberries"===this.displayName&&(this.displayName="Strawberry"),"Carrots"===this.displayName&&(this.displayName="Carrot"),"Turnips"===this.displayName&&(this.displayName="Turnip"),"Mangoes"===this.displayName&&(this.displayName="Mango"),"Gingko Leaves"===this.displayName&&(this.displayName="Gingko Leaf")),(this.selectedItem.type===G.Food||this.selectedItem.type===G.Resources)&&(this.displayNumberPurchasing=!0),this.amountSubscription=this.gameLoopService.gameUpdateEvent.subscribe(xr(function*(){e.selectedItem.purchasePrice.forEach(a=>{var o=a.name;1===a.amount&&("Tokens"===o&&(o="Token"),"Medals"===o&&(o="Medal")),e.purchaseResourcesRequired=a.amount.toLocaleString()+" "+o+", ";var s=e.lookupService.getResourceByName(a.name);e.canAffordItem=!(s<a.amount*e.buyMultiplierAmount)}),e.purchaseResourcesRequired.length>0&&(e.purchaseResourcesRequired=e.purchaseResourcesRequired.substring(0,e.purchaseResourcesRequired.length-2))}))}BuyItem(){this.canBuyItem()&&(this.spendResourcesOnItem(),this.selectedItem.type===G.Animal&&this.buyAnimal(),this.selectedItem.type===G.Food?this.buyFood():this.selectedItem.type===G.Training&&this.buyTraining(),this.selectedItem.type===G.Specialty?this.buySpecialty():this.selectedItem.type===G.Ability&&this.buyAbility(),this.selectedItem.type===G.Equipment&&this.buyEquipment(),this.selectedItem.type===G.Consumable&&this.buyConsumable(),this.selectedItem.type===G.Resources&&this.buyResources(),this.itemPurchased.emit(this.selectedItem))}canBuyItem(){var e=!0;return this.selectedItem.purchasePrice.forEach(i=>{this.lookupService.getResourceByName(i.name)<i.amount*this.buyMultiplierAmount&&(e=!1)}),e}spendResourcesOnItem(){this.selectedItem.purchasePrice.forEach(e=>{this.lookupService.spendResourceByName(e.name,e.amount*this.buyMultiplierAmount)})}buyAnimal(){this.globalService.sortAnimalOrder();var e=this.globalService.globalVar.animals.find(s=>s.name===this.selectedItem.name);if(null!=e){e.isAvailable=!0,this.selectedItem.amountPurchased=1;var i=this.globalService.globalVar.shop.find(s=>"Abilities"===s.name);if(null!=i){var r=i.itemList.filter(s=>s.name.split(" ")[0]===(null==e?void 0:e.getAnimalType()));null!=r&&r.length>0&&r.forEach(s=>{s.isAvailable=!0})}var a=this.globalService.globalVar.animalDecks.find(s=>s.isPrimaryDeck);if(null!=a){var o=!1;a.selectedAnimals.forEach(s=>{s.raceCourseType===(null==e?void 0:e.raceCourseType)&&(o=!0)}),o||a.selectedAnimals.push(e)}}}buyTraining(){this.selectedItem.amountPurchased=1;var e=this.globalService.globalVar.trainingOptions.find(i=>i.trainingName===this.selectedItem.name);void 0!==e&&(e.isAvailable=!0)}buyFood(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new ie(this.selectedItem.name,e,G.Food));"Mangoes"===this.selectedItem.name&&this.selectedItem.purchasePrice.forEach(r=>{"Coins"===r.name&&(r.amount+=50),"Tokens"===r.name&&(r.amount+=1)})}buySpecialty(){var e,a;if(this.selectedItem.amountPurchased+=1,"Whistle"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name))){var i=e.itemList.find(c=>"Golden Whistle"===c.name);null!=i&&(i.isAvailable=!0)}if("National Races"===this.selectedItem.name&&(this.globalService.globalVar.nationalRaceCountdown=0,null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name)))){var r=e.itemList.find(u=>"International Races"===u.name);null!=r&&(r.isAvailable=!0)}"Incubator Upgrade Lv1"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(u=>"Incubator Upgrade Lv2"===u.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv2"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(d=>"Incubator Upgrade Lv3"===d.name))&&(a.isAvailable=!0),"Incubator Upgrade Lv3"===this.selectedItem.name&&null!=(e=this.globalService.globalVar.shop.find(u=>"Specialty"===u.name))&&null!=(a=e.itemList.find(d=>"Incubator Upgrade Lv4"===d.name))&&(a.isAvailable=!0);var o=this.lookupService.getResourceByName("Team Manager");if("Team Manager"===this.selectedItem.name&&1===this.selectedItem.amountPurchased&&(null==o||0===o)&&!this.globalService.globalVar.animalDecks.some(c=>c.autoRunFreeRace)){var s=this.globalService.globalVar.animalDecks.find(c=>c.isPrimaryDeck);null!=s&&(s.autoRunFreeRace=!0)}if(null!=this.globalService.globalVar.resources&&(this.globalService.globalVar.resources.some(c=>c.name===this.selectedItem.name)?null!=(l=this.globalService.globalVar.resources.find(c=>c.name===this.selectedItem.name))&&(l.amount+=1):this.globalService.globalVar.resources.push(new ie(this.selectedItem.name,1,G.Specialty))),"Talent Point Voucher"===this.selectedItem.name)if(this.globalService.globalVar.resources.some(c=>"Talent Points"===c.name)){var l;null!=(l=this.globalService.globalVar.resources.find(u=>"Talent Points"===u.name))&&(l.amount+=1)}else this.globalService.globalVar.resources.push(new ie("Talent Points",1,G.Resources));null!=this.selectedItem.quantityMultiplier&&this.selectedItem.quantityMultiplier>0&&this.selectedItem.purchasePrice.forEach(c=>{null!=this.selectedItem.quantityAdditive&&this.selectedItem.quantityAdditive>0?c.amount+=this.selectedItem.quantityAdditive:c.amount*=this.selectedItem.quantityMultiplier,"Team Manager"===this.selectedItem.name&&c.amount>5e3&&(c.amount=5e3)})}buyAbility(){var e=this.selectedItem.name.split(" ")[0].trim(),i=this.selectedItem.name.split(":")[1].trim();if(""!==e&&""!==i){var r=this.globalService.globalVar.animals.find(o=>o.getAnimalType()===e);if(void 0!==r){var a=r.availableAbilities.find(o=>o.name===i);void 0!==a&&(a.isAbilityPurchased=!0,this.selectedItem.amountPurchased=1)}}}buyEquipment(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(this.selectedItem.amountPurchased+=e,null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new ie(this.selectedItem.name,e,G.Equipment))}buyConsumable(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new ie(this.selectedItem.name,e,G.Consumable))}buyResources(){null==this.selectedItem.numberPurchasing&&(this.selectedItem.numberPurchasing=1);var e=this.selectedItem.numberPurchasing*this.buyMultiplierAmount;if(null!=this.globalService.globalVar.resources)if(this.globalService.globalVar.resources.some(r=>r.name===this.selectedItem.name)){var i=this.globalService.globalVar.resources.find(r=>r.name===this.selectedItem.name);null!=i&&(i.amount+=e)}else this.globalService.globalVar.resources.push(new ie(this.selectedItem.name,e,G.Resources))}ngOnDestroy(){null!=this.amountSubscription&&this.amountSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(bi),P(An))},t.\u0275cmp=_t({type:t,selectors:[["app-shopping-item"]],hostBindings:function(e,i){1&e&&I("keydown",function(a){return i.keyEventDown(a)},!1,uo)("keyup",function(a){return i.keyEventUp(a)},!1,uo)},inputs:{selectedItem:"selectedItem"},outputs:{itemPurchased:"itemPurchased"},decls:4,vars:2,consts:[["class","item","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","item",4,"ngIf"],["longDescriptionContent",""],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"item",3,"ngbPopover"],[1,"keyword",3,"ngClass"],[4,"ngIf"],[3,"innerHTML"],[1,"resourceKeyword"],[3,"disabled","click"],[1,"item"],[1,"popoverClass"]],template:function(e,i){1&e&&(x(0,Oz,16,9,"div",0),x(1,Lz,16,8,"div",1),x(2,Uz,2,1,"ng-template",null,2,ut)),2&e&&(_("ngIf",""!==i.longDescription&&null!=i.longDescription),p(1),_("ngIf",""===i.longDescription||null==i.longDescription))},directives:[si,Wr,Ji],styles:[".item[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();function Gz(t,n){if(1&t){const e=pe();f(0,"td",8)(1,"div")(2,"app-shopping-item",9),I("itemPurchased",function(r){return B(e),S(3).itemPurchased(r)}),h()()()}if(2&t){const e=n.$implicit;p(2),_("selectedItem",e)}}function zz(t,n){if(1&t&&(f(0,"tr"),x(1,Gz,3,1,"td",7),h()),2&t){const e=n.$implicit;p(1),_("ngForOf",e)}}function jz(t,n){if(1&t&&(f(0,"table"),x(1,zz,2,1,"tr",6),h()),2&t){const e=S();p(1),_("ngForOf",e.itemsRows)}}function $z(t,n){1&t&&(f(0,"div",10),D(1,"br"),f(2,"span"),g(3,"Fresh out! Check back again in the future to see if more items are added!"),h(),D(4,"br"),h())}const Wz=function(t){return{tokenShopColor:t}};let d2=(()=>{class t{constructor(e){this.globalService=e,this.shopsEnum=ua,this.itemPurchasedEmitter=new ot}ngOnInit(){null==this.shopType&&(this.shopType=ua.regular),this.shopType===ua.regular&&(this.resetShopSubscription=this.resetShop.subscribe(()=>this.setupDisplayItems())),this.setupDisplayItems()}setupDisplayItems(){this.itemsCells=[],this.itemsRows=[];var e=4;this.screenHeight<=650&&(e=2);var i=[];this.section.itemList.forEach(a=>{a.isAvailable&&(a.canHaveMultiples&&(a.infiniteAmount||a.amountPurchased<a.totalShopQuantity)||0===a.amountPurchased)&&i.push(a)});for(var r=1;r<=i.length;r++)this.itemsCells.push(i[r-1]),r%e==0&&(this.itemsRows.push(this.itemsCells),this.itemsCells=[]);0!==this.itemsCells.length&&this.itemsRows.push(this.itemsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}itemPurchased(e){this.setupDisplayItems(),this.itemPurchasedEmitter.emit(!0)}ngOnDestroy(){void 0!==this.resetShopSubscription&&this.resetShopSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Et))},t.\u0275cmp=_t({type:t,selectors:[["app-shopping-list"]],hostBindings:function(e,i){1&e&&I("resize",function(a){return i.onResize(a)},!1,uo)},inputs:{section:"section",shopType:"shopType",resetShop:"resetShop"},outputs:{itemPurchasedEmitter:"itemPurchasedEmitter"},decls:8,vars:6,consts:[[1,"shoppingListView"],[1,"sectionHeaderBackgroundColor",3,"ngClass"],[1,"s4Heading","keyword","sectionHeaderText"],[1,"items"],[4,"ngIf"],["class","centered","c","",4,"ngIf"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[3,"selectedItem","itemPurchased"],["c","",1,"centered"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"span",2),g(3),h()(),f(4,"div",3),x(5,jz,2,1,"table",4),x(6,$z,5,0,"div",5),D(7,"br"),h()()),2&e&&(p(1),_("ngClass",pn(4,Wz,i.shopType===i.shopsEnum.token)),p(2),nt(i.section.name),p(2),_("ngIf",i.itemsRows.length>0),p(1),_("ngIf",0===i.itemsRows.length))},directives:[Ji,si,on,Hz],styles:[".shoppingListView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.sectionHeaderBackgroundColor[_ngcontent-%COMP%]{background-color:var(--background-tertiary);border:2px solid;border-color:var(--foreground-default);text-align:center}.tokenShopColor[_ngcontent-%COMP%]{background-color:var(--tokenShopColor)!important}.sectionHeaderText[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.centered[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function qz(t,n){if(1&t&&(f(0,"div",8),D(1,"app-shopping-list",9),h()),2&t){const e=n.$implicit,i=S();p(1),_("section",e)("shopType",i.shopType)}}function Xz(t,n){if(1&t&&(f(0,"div",10),D(1,"hr"),f(2,"em"),g(3),f(4,"span",11),g(5,"Renown"),h()()()),2&t){const e=S();p(3),Z("Next tier unlocked at ",e.lookupService.getRenownRequiredForEventShopTier(e.highestTierUnlocked+1)," ")}}let Yz=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.lookupService=i,this.gameLoopService=r,this.componentCommunicationService=a,this.highestTierUnlocked=0,this.maxTiers=3,this.shopType=ua.token,this.currentTokens=0}ngOnInit(){var e=this;this.highestTierUnlocked=this.lookupService.getHighestEventShopTierUnlocked(),this.getShopOptions(),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(xr(function*(){e.currentTokens=e.lookupService.getTokens()}))}getShopOptions(){this.sections=[];var e=this.globalService.globalVar.tokenShop.find(a=>"Tier 1"===a.name);void 0!==e&&this.highestTierUnlocked>=1&&this.sections.push(e);var i=this.globalService.globalVar.tokenShop.find(a=>"Tier 2"===a.name);void 0!==i&&this.highestTierUnlocked>=2&&this.sections.push(i);var r=this.globalService.globalVar.tokenShop.find(a=>"Tier 3"===a.name);void 0!==r&&this.highestTierUnlocked>=3&&this.sections.push(r)}returnToEventRaceView(){this.componentCommunicationService.setShopType(ua.regular),this.componentCommunicationService.setRaceView(Ct.raceselection,Ee.event)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(bi),P(An),P(cn))},t.\u0275cmp=_t({type:t,selectors:[["app-token-shop-view"]],decls:15,vars:3,consts:[[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"back"],[3,"click"],["class","shopSection",4,"ngFor","ngForOf"],["class","centered",4,"ngIf"],[1,"shopSection"],[3,"section","shopType"],[1,"centered"],[1,"progressionKeyword"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Token Shop"),h(),f(6,"span"),g(7),h()(),f(8,"div",4)(9,"button",5),I("click",function(){return i.returnToEventRaceView()}),g(10,"Back To Event"),h()()()(),D(11,"br"),x(12,qz,2,2,"div",6),D(13,"br"),x(14,Xz,6,1,"div",7),h()),2&e&&(p(7),Z("Tokens: ",i.currentTokens,""),p(5),_("ngForOf",i.sections),p(2),_("ngIf",i.highestTierUnlocked<i.maxTiers))},directives:[on,d2,si],styles:['.shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.unassign[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:unassign}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{padding-top:.25rem;grid-area:back}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}']}),t})();function Qz(t,n){if(1&t){const e=pe();f(0,"div",16)(1,"app-shopping-list",17),I("itemPurchasedEmitter",function(r){return B(e),S(2).itemPurchased(r)}),h()()}if(2&t){const e=n.$implicit,i=S(2);p(1),_("section",e)("resetShop",i.resetShopSubject.asObservable())}}function Kz(t,n){if(1&t){const e=pe();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2"),g(5,"Shop"),h()()(),f(6,"div",6)(7,"span",7),g(8,"Filters:"),h(),f(9,"button",8),I("click",function(){return B(e),S().toggleShopFilter("Animals")}),g(10,"Animals"),h(),f(11,"button",9),I("click",function(){return B(e),S().toggleShopFilter("Trainings")}),g(12," Trainings"),h(),f(13,"button",10),I("click",function(){return B(e),S().toggleShopFilter("Equipment")}),g(14,"Equipment "),h(),f(15,"button",11),I("click",function(){return B(e),S().toggleShopFilter("Food")}),g(16,"Food"),h(),f(17,"button",12),I("click",function(){return B(e),S().toggleShopFilter("Specialty")}),g(18," Specialty"),h(),f(19,"button",13),I("click",function(){return B(e),S().toggleShopFilter("Abilities")}),g(20," Abilities"),h()(),f(21,"button",14),I("click",function(){return B(e),S().ResetShopFilters()}),g(22," Reset Filters "),h(),D(23,"br")(24,"br"),f(25,"em"),g(26,"Certain items can be bought in bulk. Use the Alt, Shift, and Ctrl keys to modify the amount you are buying."),h()(),D(27,"br"),x(28,Qz,2,2,"div",15),h()}if(2&t){const e=S();p(9),Mt("filterActive",e.filterAnimals),p(2),Mt("filterActive",e.filterTrainings),p(2),Mt("filterActive",e.filterEquipment),p(2),Mt("filterActive",e.filterFood),p(2),Mt("filterActive",e.filterSpecialty),p(2),Mt("filterActive",e.filterAbilities),p(9),_("ngForOf",e.sections)}}function Zz(t,n){1&t&&(f(0,"div"),D(1,"app-token-shop-view"),h())}let Jz=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i,this.filterAnimals=!1,this.filterTrainings=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterAbilities=!1,this.ShopsEnum=ua,this.resetShopSubject=new we}ngOnInit(){this.componentCommunicationService.setNewView(Ct.shop),this.getShopOptions(),this.subscription=this.componentCommunicationService.getShopView().subscribe(e=>{this.activeShopView=e})}getShopOptions(){this.sections=[];var e=this.filtersActive(),i=this.globalService.globalVar.shop.find(c=>"Animals"===c.name&&(!e||e&&this.filterAnimals));void 0!==i&&this.sections.push(i);var r=this.globalService.globalVar.shop.find(c=>"Trainings"===c.name&&(!e||e&&this.filterTrainings));void 0!==r&&this.sections.push(r);var a=this.globalService.globalVar.shop.find(c=>"Equipment"===c.name&&(!e||e&&this.filterEquipment));void 0!==a&&this.sections.push(a);var o=this.globalService.globalVar.shop.find(c=>"Food"===c.name&&(!e||e&&this.filterFood));void 0!==o&&this.sections.push(o);var s=this.globalService.globalVar.shop.find(c=>"Specialty"===c.name&&(!e||e&&this.filterSpecialty));void 0!==s&&this.sections.push(s);var l=this.globalService.globalVar.shop.find(c=>"Abilities"===c.name&&(!e||e&&this.filterAbilities));void 0!==l&&this.sections.push(l)}toggleShopFilter(e){"Animals"===e&&(this.filterAnimals=!this.filterAnimals),"Trainings"===e&&(this.filterTrainings=!this.filterTrainings),"Equipment"===e&&(this.filterEquipment=!this.filterEquipment),"Food"===e&&(this.filterFood=!this.filterFood),"Specialty"===e&&(this.filterSpecialty=!this.filterSpecialty),"Abilities"===e&&(this.filterAbilities=!this.filterAbilities),this.getShopOptions()}filtersActive(){return!!(this.filterAnimals||this.filterAbilities||this.filterEquipment||this.filterFood||this.filterSpecialty||this.filterTrainings)}ResetShopFilters(){this.filterAnimals=!1,this.filterAbilities=!1,this.filterEquipment=!1,this.filterFood=!1,this.filterSpecialty=!1,this.filterTrainings=!1,this.getShopOptions()}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}itemPurchased(e){this.getShopOptions(),this.resetShopSubject.next()}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(cn))},t.\u0275cmp=_t({type:t,selectors:[["app-shop-view"]],decls:2,vars:2,consts:[["class","shopView",4,"ngIf"],[4,"ngIf"],[1,"shopView"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],[1,"filters"],["id","title"],["id","animalsFilter",1,"clickableText","buttonAsText",3,"click"],["id","trainingsFilter",1,"clickableText","buttonAsText",3,"click"],["id","equipmentFilter",1,"clickableText","buttonAsText",3,"click"],["id","foodFilter",1,"clickableText","buttonAsText",3,"click"],["id","specialtyFilter",1,"clickableText","buttonAsText",3,"click"],["id","abilitiesFilter",1,"clickableText","buttonAsText",3,"click"],[1,"centered","clickableText","buttonAsText",3,"click"],["class","shopSection",4,"ngFor","ngForOf"],[1,"shopSection"],[3,"section","resetShop","itemPurchasedEmitter"]],template:function(e,i){1&e&&(x(0,Kz,29,13,"div",0),x(1,Zz,2,0,"div",1)),2&e&&(_("ngIf",i.activeShopView===i.ShopsEnum.regular),p(1),_("ngIf",i.activeShopView===i.ShopsEnum.token))},directives:[si,on,d2,Yz],styles:[".shopView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.filterActive[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.infoText[_ngcontent-%COMP%], .centered[_ngcontent-%COMP%]{text-align:center}.filters[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4%}#title[_ngcontent-%COMP%]{grid-area:title}#animalsFilter[_ngcontent-%COMP%]{grid-area:animalsFilter}#trainingsFilter[_ngcontent-%COMP%]{grid-area:trainingsFilter}#facilityFilter[_ngcontent-%COMP%]{grid-area:facilityFilter}#foodFilter[_ngcontent-%COMP%]{grid-area:foodFilter}#specialtyFilter[_ngcontent-%COMP%]{grid-area:specialtyFilter}#enhancerFilter[_ngcontent-%COMP%]{grid-area:enhancerFilter}"]}),t})(),ej=(()=>{class t{constructor(e,i){this.globalService=e,this.lookupService=i}ngOnInit(){this.traitLevel=this.lookupService.getResearchLevel(),this.maxNegativePercent=25;var e=this.globalService.globalVar.modifiers.find(i=>"maximumTraitNegativePercentModifier"===i.text);void 0!==e&&(this.maxNegativePercent=e.value)}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(bi))},t.\u0275cmp=_t({type:t,selectors:[["app-trait-option"]],inputs:{trait:"trait"},decls:5,vars:2,consts:[[1,"trait"],[1,"traitName","keyword"],[1,"traitStats"]],template:function(e,i){1&e&&(f(0,"h6",0)(1,"p",1),g(2),h(),f(3,"p",2),g(4),h()()),2&e&&(p(2),nt(i.trait.traitName),p(2),nt(i.trait.getStatGainDescription(i.maxNegativePercent)))},styles:[".trait[_ngcontent-%COMP%]{white-space:pre-line;margin:.5rem}"]}),t})();const tj=function(t){return{activeTrait:t}};function ij(t,n){if(1&t){const e=pe();f(0,"td",4)(1,"div",5),I("click",function(){const a=B(e).$implicit;return S(2).selectTrait(a)}),D(2,"app-trait-option",6),h()()}if(2&t){const e=n.$implicit;p(1),_("ngClass",pn(2,tj,e.isSelected)),p(1),_("trait",e)}}function nj(t,n){if(1&t&&(f(0,"tr"),x(1,ij,3,4,"td",3),h()),2&t){const e=n.$implicit;p(1),_("ngForOf",e)}}let rj=(()=>{class t{constructor(e){this.globalService=e,this.selectedTrait=new ot}ngOnInit(){this.setupDisplayTraits()}setupDisplayTraits(){this.traitsCells=[],this.traitsRows=[];var e=4;this.screenHeight<=650&&(e=2);for(var i=1;i<=this.availableTraits.length;i++)this.traitsCells.push(this.availableTraits[i-1]),i%e==0&&(this.traitsRows.push(this.traitsCells),this.traitsCells=[]);0!==this.traitsCells.length&&this.traitsRows.push(this.traitsCells)}onResize(){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth}selectTrait(e){this.availableTraits.forEach(i=>{i.isSelected=!1}),e.isSelected=!0,this.selectedTrait.emit(e)}ngOnChanges(e){this.availableTraits=e.availableTraits.currentValue,this.setupDisplayTraits()}}return t.\u0275fac=function(e){return new(e||t)(P(Et))},t.\u0275cmp=_t({type:t,selectors:[["app-trait-list"]],hostBindings:function(e,i){1&e&&I("resize",function(a){return i.onResize(a)},!1,uo)},inputs:{availableTraits:"availableTraits"},outputs:{selectedTrait:"selectedTrait"},features:[zn],decls:4,vars:1,consts:[[1,"traitsView"],[1,"traits"],[4,"ngFor","ngForOf"],["class","cell",4,"ngFor","ngForOf"],[1,"cell"],[1,"clickableText",3,"ngClass","click"],[3,"trait"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"table"),x(3,nj,2,1,"tr",2),h()()()),2&e&&(p(3),_("ngForOf",i.traitsRows))},directives:[on,Ji,ej],styles:[".traitsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default);overflow:auto}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%;height:100%;text-align:center}td[_ngcontent-%COMP%]{width:25%;border:1px solid rgba(0,0,0,.1)}@media (max-width: 650px){table[_ngcontent-%COMP%]:last-child{border-bottom:none}table[_ngcontent-%COMP%]:nth-child(-n+2){border-top:none}table[_ngcontent-%COMP%]:nth-child(2n){border-right:none}table[_ngcontent-%COMP%]:nth-child(2n-1){border-left:none}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){border-bottom:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(1)   td[_ngcontent-%COMP%]:nth-child(-n+4){border-top:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n){border-right:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4n-3){border-left:none}"]}),t})();function aj(t,n){if(1&t&&(f(0,"span"),g(1),h()),2&t){const e=S(2);p(1),nt(e.selectedAnimal.name)}}function oj(t,n){if(1&t){const e=pe();f(0,"div",21),I("click",function(){return B(e),S().goToAnimal()}),x(1,aj,2,1,"span",7),D(2,"br"),f(3,"span"),g(4),h()()}if(2&t){const e=S();_("ngClass",e.colorConditional),p(1),_("ngIf",e.selectedAnimal.name!==e.selectedAnimal.getAnimalType()),p(3),nt(e.selectedAnimal.getAnimalType())}}function sj(t,n){if(1&t){const e=pe();f(0,"div",21),I("click",function(){return B(e),S().goToAnimal()}),f(1,"span"),g(2),h()()}if(2&t){const e=S();_("ngClass",e.colorConditional),p(2),nt(e.selectedAnimal.getAnimalType())}}function lj(t,n){if(1&t&&(f(0,"span",22),g(1,"Current Trait: "),f(2,"span",23),g(3),h()()),2&t){const e=S();er("ngbPopover",e.traitStatGainDescription),p(3),nt(e.selectedAnimal.getTraitName())}}function cj(t,n){if(1&t&&(f(0,"span",24),g(1),h()),2&t){const e=S();p(1),Z("",e.existingTrait.traitName," ")}}function uj(t,n){1&t&&(f(0,"span"),g(1,"No Trait Assigned"),h())}function dj(t,n){if(1&t&&(f(0,"div"),D(1,"br"),f(2,"p",25),D(3,"ngb-progressbar",26),f(4,"span",27),g(5),Lt(6,"number"),h()(),D(7,"br"),h()),2&t){const e=S();p(3),_("value",e.trainingProgressBarPercent),p(2),Z("",oi(6,2,e.trainingProgressBarPercent,"1.2-2"),"%")}}let hj=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.componentCommunicationService=a,this.returnEmitter=new ot,this.traitStatGainDescription="",this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterPower=!1,this.filterFocus=!1,this.filterAdaptability=!1}ngOnInit(){this.availableTraits=this.GetAvailableTraits();var e=this.globalService.globalVar.incubator;if(null!=e.assignedAnimal&&null!=e.assignedTrait&&(this.existingTrait=e.assignedTrait),null!=this.existingTrait){var i=this.availableTraits.find(r=>{var a;return(null===(a=this.existingTrait)||void 0===a?void 0:a.traitName)===r.traitName});null!=i&&(i.isSelected=!0)}this.colorConditional={flatlandColor:"Flatland"===this.selectedAnimal.getRaceCourseType(),mountainColor:"Mountain"===this.selectedAnimal.getRaceCourseType(),waterColor:"Ocean"===this.selectedAnimal.getRaceCourseType(),tundraColor:"Tundra"===this.selectedAnimal.getRaceCourseType(),volcanicColor:"Volcanic"===this.selectedAnimal.getRaceCourseType()},null!=this.selectedAnimal.trait&&(this.traitStatGainDescription=this.lookupService.getTraitStatGainDescription(this.selectedAnimal.trait)),this.subscription=this.gameLoopService.gameUpdateEvent.subscribe(r=>{var a=this.globalService.globalVar.incubator;if(null==a.assignedAnimal||null==a.assignedTrait)return this.existingTrait=null,void this.availableTraits.forEach(o=>{o.isSelected=!1});this.trainingProgressBarPercent=a.timeTrained/a.timeToComplete*100})}selectNewTrait(e){var i=Object.assign({},e),r=this.globalService.globalVar.incubator;r.timeTrained=0,r.assignedAnimal=this.selectedAnimal,r.assignedTrait=i,this.existingTrait=i,this.selectedAnimal.canTrain=!1}GetAvailableTraits(){var e=[],i=this.lookupService.getResearchLevel();return e.push(new vi("Alert",1,i,Se.focus,Se.endurance)),e.push(new vi("Sharp",1,i,Se.adaptability,Se.power)),e.push(new vi("Bulky",1,i,Se.power,Se.topSpeed)),e.push(new vi("Curious",3,i,Se.acceleration,Se.focus)),e.push(new vi("Adamant",3,i,Se.topSpeed,Se.acceleration)),e.push(new vi("Stoic",5,i,Se.endurance,Se.adaptability)),e.push(new vi("Smart",5,i,Se.focus,Se.power)),e.push(new vi("Careful",7,i,Se.adaptability,Se.acceleration)),e.push(new vi("Attentive",7,i,Se.power,Se.endurance)),e.push(new vi("Keen",9,i,Se.acceleration,Se.topSpeed)),e.push(new vi("Quick",9,i,Se.topSpeed,Se.adaptability)),e.push(new vi("Tough",11,i,Se.endurance,Se.focus)),e.push(new vi("Solitary",11,i,Se.focus,Se.acceleration)),e.push(new vi("Cautious",13,i,Se.adaptability,Se.topSpeed)),e.push(new vi("Wild",13,i,Se.power,Se.focus)),e.push(new vi("Clumsy",15,i,Se.acceleration,Se.adaptability)),e.push(new vi("Natural",15,i,Se.topSpeed,Se.endurance)),e.push(new vi("Resilient",17,i,Se.endurance,Se.power)),e.push(new vi("Anxious",17,i,Se.focus,Se.topSpeed)),e.push(new vi("Lucky",19,i,Se.adaptability,Se.focus)),e.push(new vi("Rugged",19,i,Se.power,Se.adaptability)),e.push(new vi("Naive",21,i,Se.acceleration,Se.endurance)),e.push(new vi("Sprightly",21,i,Se.topSpeed,Se.power)),e.push(new vi("Stout",23,i,Se.endurance,Se.acceleration)),e.push(new vi("Pensive",23,i,Se.focus,Se.adaptability)),e.push(new vi("Languid",25,i,Se.adaptability,Se.endurance)),e.push(new vi("Mighty",25,i,Se.power,Se.acceleration)),e.push(new vi("Nimble",27,i,Se.acceleration,Se.power)),e.push(new vi("Small",27,i,Se.topSpeed,Se.focus)),e.push(new vi("Resolute",29,i,Se.endurance,Se.topSpeed)),(e=e.filter(r=>i>=r.requiredLevel)).filter(r=>!this.filterAcceleration&&!this.filterAdaptability&&!this.filterFocus&&!this.filterSpeed&&!this.filterPower&&!this.filterEndurance||this.filterSpeed&&r.positiveStatGain===Se.topSpeed||this.filterAcceleration&&r.positiveStatGain===Se.acceleration||this.filterEndurance&&r.positiveStatGain===Se.endurance||this.filterPower&&r.positiveStatGain===Se.power||this.filterFocus&&r.positiveStatGain===Se.focus||this.filterAdaptability&&r.positiveStatGain===Se.adaptability)}resetFilters(){this.filterSpeed=!1,this.filterAcceleration=!1,this.filterEndurance=!1,this.filterFocus=!1,this.filterPower=!1,this.filterAdaptability=!1,this.availableTraits=this.GetAvailableTraits()}toggleStatFilter(e){"Speed"===e&&(this.filterSpeed=!this.filterSpeed),"Acceleration"===e&&(this.filterAcceleration=!this.filterAcceleration),"Focus"===e&&(this.filterFocus=!this.filterFocus),"Power"===e&&(this.filterPower=!this.filterPower),"Endurance"===e&&(this.filterEndurance=!this.filterEndurance),"Adaptability"===e&&(this.filterAdaptability=!this.filterAdaptability),this.availableTraits=this.GetAvailableTraits()}returnToAnimalView(){this.returnEmitter.emit(!1)}goToAnimal(){this.componentCommunicationService.setAnimalView(Ct.animals,this.selectedAnimal)}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(An),P(bi),P(cn))},t.\u0275cmp=_t({type:t,selectors:[["app-incubator-traits"]],inputs:{selectedAnimal:"selectedAnimal"},outputs:{returnEmitter:"returnEmitter"},decls:39,vars:19,consts:[[1,"incubatorTraitsModal"],[1,"infoText"],[1,"infoGridContainer"],[1,"info"],["class","clickableText keyword",3,"ngClass","click",4,"ngIf"],["class","defaultTextColor","triggers","mouseenter:mouseleave","popoverClass","popoverClass",3,"ngbPopover",4,"ngIf"],["class","activeTrait",4,"ngIf"],[4,"ngIf"],[1,"back"],[3,"click"],[1,"filterGridContainer"],[1,"resetFiltersHeader","clickableText"],[1,"changeTrainingHeader"],[1,"statFilter","clickableText","filterMargins"],["id","speedFilter",1,"buttonAsText",3,"click"],["id","accelerationFilter",1,"buttonAsText",3,"click"],["id","enduranceFilter",1,"buttonAsText",3,"click"],["id","powerFilter",1,"buttonAsText",3,"click"],["id","focusFilter",1,"buttonAsText",3,"click"],["id","adaptabilityFilter",1,"buttonAsText",3,"click"],[3,"availableTraits","selectedTrait"],[1,"clickableText","keyword",3,"ngClass","click"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"defaultTextColor",3,"ngbPopover"],[1,"keyword"],[1,"activeTrait"],[1,"progressBarContainer"],["type","success",1,"progressBar",3,"value"],[1,"customLabel"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),x(4,oj,5,3,"div",4),x(5,sj,3,2,"div",4),x(6,lj,4,2,"span",5),D(7,"hr"),x(8,cj,2,1,"span",6),x(9,uj,2,0,"span",7),h(),f(10,"div",8)(11,"button",9),I("click",function(){return i.returnToAnimalView()}),g(12,"Back"),h()()(),D(13,"hr"),x(14,dj,8,5,"div",7),D(15,"br")(16,"br"),f(17,"div",10)(18,"div",11)(19,"span",9),I("click",function(){return i.resetFilters()}),g(20,"Reset Filters"),h()(),f(21,"div",12)(22,"span"),g(23,"Choose New Trait"),h()(),f(24,"div",13)(25,"button",14),I("click",function(){return i.toggleStatFilter("Speed")}),g(26,"SPD "),h(),f(27,"button",15),I("click",function(){return i.toggleStatFilter("Acceleration")}),g(28,"ACC "),h(),f(29,"button",16),I("click",function(){return i.toggleStatFilter("Endurance")}),g(30,"END "),h(),f(31,"button",17),I("click",function(){return i.toggleStatFilter("Power")}),g(32,"PWR "),h(),f(33,"button",18),I("click",function(){return i.toggleStatFilter("Focus")}),g(34,"FCS "),h(),f(35,"button",19),I("click",function(){return i.toggleStatFilter("Adaptability")}),g(36,"ADP"),h()()(),D(37,"br"),f(38,"app-trait-list",20),I("selectedTrait",function(a){return i.selectNewTrait(a)}),h()()()),2&e&&(p(4),_("ngIf",i.selectedAnimal.name!==i.selectedAnimal.getAnimalType()),p(1),_("ngIf",i.selectedAnimal.name===i.selectedAnimal.getAnimalType()),p(1),_("ngIf",null!=i.selectedAnimal.trait),p(2),_("ngIf",null!=i.existingTrait),p(1),_("ngIf",null==i.existingTrait),p(5),_("ngIf",null!=i.existingTrait),p(11),Mt("filterActive",i.filterSpeed),p(2),Mt("filterActive",i.filterAcceleration),p(2),Mt("filterActive",i.filterEndurance),p(2),Mt("filterActive",i.filterPower),p(2),Mt("filterActive",i.filterFocus),p(2),Mt("filterActive",i.filterAdaptability),p(3),_("availableTraits",i.availableTraits))},directives:[si,Ji,Wr,I0,rj],pipes:[bo],styles:['.incubatorTraitsModal[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.infoText[_ngcontent-%COMP%]{text-align:center}.customLabel[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%}.progressBarContainer[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]{height:2rem}.progressBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .progressBar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:initial!important}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:auto;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"trainingName trainingStats trainingTimeToComplete"}.trainingName[_ngcontent-%COMP%]{grid-area:trainingName}.trainingStats[_ngcontent-%COMP%]{grid-area:trainingStats}.trainingTimeToComplete[_ngcontent-%COMP%]{grid-area:trainingTimeToComplete}.infoGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". info back"}.info[_ngcontent-%COMP%]{grid-area:info}.back[_ngcontent-%COMP%]{grid-area:back}.filterActive[_ngcontent-%COMP%]{font-weight:700}.filterGridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto;justify-content:stretch;grid-template-areas:"ResetFiler changeTraitHeader statFilter"}.changeTraitHeader[_ngcontent-%COMP%]{grid-area:changeTraitHeader}.statFilter[_ngcontent-%COMP%]{grid-area:statFilter}.resetFilter[_ngcontent-%COMP%]{grid-area:resetFilter}.popoverClass[_ngcontent-%COMP%]{white-space:pre-line}.activeTrait[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.filterMargins[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:3%}']}),t})();function fj(t,n){1&t&&(f(0,"div",3)(1,"h2"),g(2,"Incubator"),h(),f(3,"div",4),g(4," Select an animal and the desired trait to begin the incubation process. While incubating, you will not be able to train the selected animal. The chosen trait will remain on the animal until a new trait is selected or the trait is removed. "),h(),D(5,"hr"),h())}function pj(t,n){if(1&t){const e=pe();f(0,"div",7)(1,"div")(2,"app-animal-list",8),I("selectedAnimal",function(r){return B(e),S(2).selectedAnimal(r)}),h()()()}if(2&t){const e=S(2);p(2),_("availableAnimals",e.availableAnimals)}}function gj(t,n){if(1&t){const e=pe();f(0,"div",9)(1,"app-incubator-traits",10),I("returnEmitter",function(r){return B(e),S(2).returnToAnimalView(r)}),h()()}if(2&t){const e=S(2);p(1),_("selectedAnimal",e.animal)}}function vj(t,n){if(1&t&&(f(0,"div"),x(1,pj,3,1,"div",5),x(2,gj,2,1,"div",6),h()),2&t){const e=S();p(1),_("ngIf",!e.animalSelected),p(1),_("ngIf",e.animalSelected)}}function mj(t,n){1&t&&(f(0,"div"),g(1," To access the incubator, you need to improve your research level. Try participating in Duo Races. "),h())}let bj=(()=>{class t{constructor(e,i,r){this.globalService=e,this.lookupService=i,this.componentCommunicationService=r,this.animalSelected=!1}ngOnInit(){this.componentCommunicationService.setNewView(Ct.incubator),this.availableAnimals=this.globalService.globalVar.animals.filter(i=>i.isAvailable),this.researchLevel=this.lookupService.getResearchLevel();var e=this.globalService.globalVar.incubator;null!=e.assignedAnimal&&(this.animalSelected=!0,this.animal=e.assignedAnimal)}selectedAnimal(e){this.animalSelected=!0,this.animal=e}returnToAnimalView(e){this.animalSelected=!1}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(bi),P(cn))},t.\u0275cmp=_t({type:t,selectors:[["app-incubator-view"]],decls:4,vars:3,consts:[[1,"incubatorView"],["class","info",4,"ngIf"],[4,"ngIf"],[1,"info"],[1,"description"],["class","selectAnimalView",4,"ngIf"],["class","selectedView",4,"ngIf"],[1,"selectAnimalView"],[3,"availableAnimals","selectedAnimal"],[1,"selectedView"],[3,"selectedAnimal","returnEmitter"]],template:function(e,i){1&e&&(f(0,"div",0),x(1,fj,6,0,"div",1),x(2,vj,3,2,"div",2),x(3,mj,2,0,"div",2),h()),2&e&&(p(1),_("ngIf",!i.animalSelected),p(1),_("ngIf",i.researchLevel>0),p(1),_("ngIf",0===i.researchLevel))},directives:[si,Ef,hj],styles:[".incubatorView[_ngcontent-%COMP%]{height:100%;text-align:center;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.description[_ngcontent-%COMP%]{margin:1rem}"]}),t})();var Bu=(()=>{return(t=Bu||(Bu={}))[t.basics=0]="basics",t[t.progression=1]="progression",t[t.calculators=2]="calculators",Bu;var t})();function _j(t,n){if(1&t){const e=pe();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswerBreedGuide")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"What does Breeding do? How do I gain Breed XP?"),h()()(),f(9,"div",10),D(10,"div",7),f(11,"p"),g(12," Breeding is one of the best way to increase your animals' racing capabilities. It is a reset mechanic, meaning all of the base stats your animal has gained will be reset back to their default levels, and in return gain a permanent multiplier to your racing stats. Note that the stats your animal has prior to breeding have no impact on Breeding. "),D(13,"br")(14,"br"),g(15," Every time you Breed, you gain a 5% increase to the amount your base stats contribute to your racing stats. If you hover over your base stats (or tap if you are on mobile) when selecting an animal on the Animal page, you will see a breakdown of all multipliers you have obtained. With the Stockbreeder, you can set your animal to breed automatically without input so you can quickly raise your Breed Level in quick succession without having to spend time training in between each level. "),D(16,"br")(17,"br"),g(18," There are a few ways to increase Breed XP: "),D(19,"br"),f(20,"em"),g(21,"Completing any training:"),h(),g(22),D(23,"br"),f(24,"em"),g(25,"Successfully completing a free race:"),h(),g(26),D(27,"br"),f(28,"em"),g(29,"Successfully completing a circuit race:"),h(),g(30),D(31,"br")(32,"br"),g(33," As you progress, you'll find ways to increase the amount of XP gained. "),h()()(),D(34,"hr"),f(35,"div")(36,"div")(37,"div",7)(38,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswerBreedBarnRows")}),g(39,"+"),h()(),f(40,"div",9)(41,"p"),g(42,"I've got too many animals -- how do I unlock more barns?"),h()()(),f(43,"div",11),D(44,"div",7),f(45,"p"),g(46," Raise your circuit rank! As you progress, you'll unlock more rows of 3 barns. "),h()()(),D(47,"hr"),f(48,"div")(49,"div")(50,"div",7)(51,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswerAllAnimals")}),g(52,"+"),h()(),f(53,"div",9)(54,"p"),g(55,"What are all of the animals and course types?"),h()()(),f(56,"div",12),D(57,"div",7),f(58,"div")(59,"span",13),g(60,"Flatland"),h(),D(61,"br"),f(62,"span",14),g(63,"Horse"),h(),g(64),D(65,"br"),f(66,"span",14),g(67,"Cheetah"),h(),g(68),D(69,"br"),f(70,"span",14),g(71,"Hare"),h(),g(72),D(73,"br"),f(74,"span",14),g(75,"Warthog"),h(),g(76),D(77,"br")(78,"br"),f(79,"span",15),g(80,"Mountain"),h(),D(81,"br"),f(82,"span",14),g(83,"Monkey"),h(),g(84),D(85,"br"),f(86,"span",14),g(87,"Goat"),h(),g(88),D(89,"br"),f(90,"span",14),g(91,"Gecko"),h(),g(92),D(93,"br")(94,"br"),f(95,"div")(96,"span",16),I("click",function(){return B(e),S().viewSpoiler("Ocean Course Type")}),f(97,"span",17),g(98,"View Spoiler"),h(),f(99,"span",18),g(100,"Ocean"),h()(),D(101,"br"),f(102,"span",16),I("click",function(){return B(e),S().viewSpoiler("Ocean Course Type")}),f(103,"span",17),g(104,"View Spoiler"),h(),f(105,"span",14),g(106,"Dolphin"),h(),g(107),h(),D(108,"br"),f(109,"span",16),I("click",function(){return B(e),S().viewSpoiler("Ocean Course Type")}),f(110,"span",17),g(111,"View Spoiler"),h(),f(112,"span",14),g(113,"Shark"),h(),g(114),h(),D(115,"br"),f(116,"span",16),I("click",function(){return B(e),S().viewSpoiler("Ocean Course Type")}),f(117,"span",17),g(118,"View Spoiler"),h(),f(119,"span",14),g(120,"Octopus"),h(),g(121),h(),D(122,"br"),f(123,"span",16),I("click",function(){return B(e),S().viewSpoiler("Ocean Course Type")}),f(124,"span",17),g(125,"View Spoiler"),h(),f(126,"span",14),g(127,"Whale"),h(),g(128),h(),D(129,"br")(130,"br"),h(),f(131,"div")(132,"span",16),I("click",function(){return B(e),S().viewSpoiler("Tundra Course Type")}),f(133,"span",17),g(134,"View Spoiler"),h(),f(135,"span",18),g(136,"Tundra"),h()(),D(137,"br"),f(138,"span",16),I("click",function(){return B(e),S().viewSpoiler("Tundra Course Type")}),f(139,"span",17),g(140,"View Spoiler"),h(),D(141,"em",19),h(),D(142,"br"),f(143,"span",16),I("click",function(){return B(e),S().viewSpoiler("Tundra Course Type")}),f(144,"span",17),g(145,"View Spoiler"),h(),f(146,"span",14),g(147,"Penguin"),h(),g(148),h(),D(149,"br"),f(150,"span",16),I("click",function(){return B(e),S().viewSpoiler("Tundra Course Type")}),f(151,"span",17),g(152,"View Spoiler"),h(),f(153,"span",14),g(154,"Caribou"),h(),g(155),h(),D(156,"br")(157,"br"),h(),f(158,"div")(159,"span",16),I("click",function(){return B(e),S().viewSpoiler("Volcanic Course Type")}),f(160,"span",17),g(161,"View Spoiler"),h(),f(162,"span",18),g(163,"Volcanic"),h()(),D(164,"br"),f(165,"span",16),I("click",function(){return B(e),S().viewSpoiler("Volcanic Course Type")}),f(166,"span",17),g(167,"View Spoiler"),h(),D(168,"em",19),h(),D(169,"br"),f(170,"span",16),I("click",function(){return B(e),S().viewSpoiler("Volcanic Course Type")}),f(171,"span",17),g(172,"View Spoiler"),h(),f(173,"span",14),g(174,"Salamander"),h(),g(175),h(),D(176,"br"),f(177,"span",16),I("click",function(){return B(e),S().viewSpoiler("Volcanic Course Type")}),f(178,"span",17),g(179,"View Spoiler"),h(),f(180,"span",14),g(181,"Fox"),h(),g(182),h()()()()(),D(183,"hr"),f(184,"div")(185,"div")(186,"div",7)(187,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswerTerrain")}),g(188,"+"),h()(),f(189,"div",9)(190,"p"),g(191,"What are the different terrain options when racing?"),h()()(),f(192,"div",20),D(193,"div",7),f(194,"p"),g(195," Every race leg will have a random terrain. Each terrain may have a positive or negative effect for your racer and should be considered when thinking about which animal is going to race a particular leg. The terrain options are below: "),D(196,"br")(197,"br"),f(198,"strong"),g(199,"Sunny"),h(),D(200,"br")(201,"span",19)(202,"br"),f(203,"strong"),g(204,"Rainy"),h(),D(205,"br")(206,"span",19)(207,"br"),f(208,"strong"),g(209,"Stormy"),h(),D(210,"br")(211,"span",19)(212,"br"),f(213,"strong"),g(214,"Torrid"),h(),D(215,"br")(216,"span",19)(217,"br"),f(218,"strong"),g(219,"Maelstrom"),h(),D(220,"br")(221,"span",19)(222,"br"),f(223,"strong"),g(224,"Snowfall"),h(),D(225,"br")(226,"span",19)(227,"br"),f(228,"strong"),g(229,"Hailstorm"),h(),D(230,"br")(231,"span",19)(232,"br"),f(233,"strong"),g(234,"Ashfall"),h(),D(235,"br")(236,"span",19),h()()(),D(237,"hr"),f(238,"div")(239,"div")(240,"div",7)(241,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswerBreedKeybinds")}),g(242,"+"),h()(),f(243,"div",9)(244,"p"),g(245,"What keybinds or similar shortcuts are there?"),h()()(),f(246,"div",21),D(247,"div",7),f(248,"p"),g(249," Use the left and right arrow keys to quickly jump between barns under the 'Barns' page and between animals under the 'Animals' page. "),D(250,"br"),g(251," Use the ctrl, shift, and alt keys to add multipliers to certain items in the shop to buy them in bulk. "),h()()(),D(252,"hr"),f(253,"div")(254,"div")(255,"div",7)(256,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswerSettings")}),g(257,"+"),h()(),f(258,"div",9)(259,"p"),g(260,"What does each setting do?"),h()()(),f(261,"div",22),D(262,"div",7),f(263,"p")(264,"strong"),g(265,"Auto Skip Race Info"),h(),g(266),D(267,"br")(268,"br"),f(269,"strong"),g(270,"Finish Training Before Switching"),h(),g(271),D(272,"br")(273,"br"),f(274,"strong"),g(275,"Hide Tips"),h(),g(276),D(277,"br")(278,"br"),f(279,"strong"),g(280,"Use Numbers For Circuit Rank"),h(),g(281),D(282,"br")(283,"br"),f(284,"strong"),g(285,"Auto Start Event Race"),h(),g(286),D(287,"br")(288,"br"),f(289,"strong"),g(290,"Race Display Info"),h(),g(291),h()()(),D(292,"hr"),f(293,"div")(294,"div")(295,"div",7)(296,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswerFeedback")}),g(297,"+"),h()(),f(298,"div",9)(299,"p"),g(300,"I'm having an issue with my game or have some feedback, how can I contact you?"),h()()(),f(301,"div",23),D(302,"div",7),f(303,"p"),g(304,"Feel free to use the links at the bottom right or email me at CulturaIdle@gmail.com to get in touch. "),h()()(),D(305,"hr"),h()}if(2&t){const e=S();p(22),Z(" ",e.lookupService.getTrainingBreedGaugeIncrease(0)," XP"),p(4),Z(" ",e.lookupService.getLocalBreedGaugeIncrease()," XP"),p(4),Z(" ",e.lookupService.getCircuitBreedGaugeIncrease()," XP"),p(34),Z(" - ",e.globalService.getAnimalDescription("Horse")," "),p(4),Z(" - ",e.globalService.getAnimalDescription("Cheetah")," "),p(4),Z(" - ",e.globalService.getAnimalDescription("Hare")," "),p(4),Z(" - ",e.globalService.getAnimalDescription("Warthog")," "),p(8),Z(" - ",e.globalService.getAnimalDescription("Monkey")," "),p(4),Z(" - ",e.globalService.getAnimalDescription("Goat")," "),p(4),Z(" - ",e.globalService.getAnimalDescription("Gecko")," "),p(4),_("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),_("ngClass",e.seeOceanCourseTypeSpoiler?"waterColor":""),p(3),_("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Z(" - ",e.globalService.getAnimalDescription("Dolphin"),""),p(2),_("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Z(" - ",e.globalService.getAnimalDescription("Shark"),""),p(2),_("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Z(" - ",e.globalService.getAnimalDescription("Octopus"),""),p(2),_("ngClass",e.seeOceanCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Z(" - ",e.globalService.getAnimalDescription("Whale"),""),p(4),_("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),_("ngClass",e.seeTundraCourseTypeSpoiler?"tundraColor":""),p(3),_("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),_("innerHTML",e.globalService.getTundraDescription(),Bt),p(2),_("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Z(" - ",e.globalService.getAnimalDescription("Penguin"),""),p(2),_("ngClass",e.seeTundraCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Z(" - ",e.globalService.getAnimalDescription("Caribou"),""),p(4),_("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),_("ngClass",e.seeVolcanicCourseTypeSpoiler?"volcanicColor":""),p(3),_("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(3),_("innerHTML",e.globalService.getVolcanicDescription(),Bt),p(2),_("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Z(" - ",e.globalService.getAnimalDescription("Salamander"),""),p(2),_("ngClass",e.seeVolcanicCourseTypeSpoiler?"viewSpoiler":"spoilerText"),p(5),Z(" - ",e.globalService.getAnimalDescription("Fox"),""),p(19),_("innerHTML",e.sunnyTerrainInfo,Bt),p(5),_("innerHTML",e.rainyTerrainInfo,Bt),p(5),_("innerHTML",e.stormyTerrainInfo,Bt),p(5),_("innerHTML",e.torridTerrainInfo,Bt),p(5),_("innerHTML",e.maelstromTerrainInfo,Bt),p(5),_("innerHTML",e.snowfallTerrainInfo,Bt),p(5),_("innerHTML",e.hailstormTerrainInfo,Bt),p(5),_("innerHTML",e.ashfallTerrainInfo,Bt),p(30),Z(" - ",e.lookupService.getSettingDescriptions("Auto Skip Race Info")," "),p(5),Z(" - ",e.lookupService.getSettingDescriptions("Finish Training Before Switching")," "),p(5),Z(" - ",e.lookupService.getSettingDescriptions("Hide Tips")," "),p(5),Z(" - ",e.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank")," "),p(5),Z(" - ",e.lookupService.getSettingDescriptions("Auto Start Event Race")," "),p(5),Z(" - ",e.lookupService.getSettingDescriptions("Race Display Info")," ")}}function yj(t,n){if(1&t){const e=pe();f(0,"div")(1,"div")(2,"div",7)(3,"button",8),I("click",function(){return B(e),S(2).expandAnswer("faqAnswer4")}),g(4,"+"),h()(),f(5,"div",9)(6,"p"),g(7,"What is the Incubator? How does the Incubator Upgrade item work?"),h()()(),f(8,"div",28),D(9,"div",7),f(10,"p"),g(11,"Once you've successfully completed a Duo Race, you will have access to the Incubator. The Incubator lets you select a trait for an individual animal that lets your customize your stats further. A trait increases one stat and decreases another. As you increase your Research Level by completing Duo Races, you will unlock new traits and increase the amount the traits increase/decrease your stats. Note that traits will only decrease the chosen stat by a maximum of 25%. "),D(12,"br")(13,"br"),g(14," The Incubator Upgrade item gives you even further control over how you build your animals and allows newer animals to quickly catch up to ones of higher breed level. After purchasing this item, every time you breed you will gain a permanent increase to the stat your trait currently is providing you. The increase amount depends on your current Research Level. For example: "),D(15,"br")(16,"br"),g(17," If you have a Research Level of 15 and apply the "),f(18,"span",14),g(19,"Alert"),h(),g(20," trait to your Horse, it will gain 15% "),f(21,"span",14),g(22,"Focus"),h(),g(23," and lose 15% "),f(24,"span",14),g(25,"Endurance"),h(),g(26," through the trait itself. "),D(27,"br"),f(28,"em"),g(29,"If you have Incubator Upgrade Level 1:"),h(),g(30," each time you Breed your Horse, it will gain an additional modifier of .01 to its "),f(31,"span",14),g(32,"Focus"),h(),g(33," stat. 10% of the positive trait value of 15% would come out to .015. Incubator Upgrade Level 1 only allows for the first 10% of your trait value to contribute to the modifier, so you would gain .01. "),D(34,"br"),f(35,"em"),g(36,"If you have Incubator Upgrade Level 2:"),h(),g(37," each time you Breed your Horse, it will gain an additional modifier of .015 to its "),f(38,"span",14),g(39,"Focus"),h(),g(40," stat. 10% of the positive trait value of 15% would come to .015. Incubator Upgrade Level 2 allows for the first 25% of your trait value to contribute to the modifier. Because your trait value is only 15%, it will contribute in its entirety. "),h()(),D(41,"hr"),h()}}function wj(t,n){if(1&t){const e=pe();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswerOverwhelmed")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"I'm overwhelmed -- what am I supposed to be doing? What are all of the different races? "),h()()(),f(9,"div",24),D(10,"div",7),f(11,"p"),g(12,"That's okay! There is a lot of information that comes at you at first. The first thing to understand is that this game has two basic loops at its core: Training/Racing cycles and Breeding cycles. At the beginning, you simply want to make sure your animals are training in a balanced way. Make sure to pay attention to what each animal's diminishing returns value is (20 by default), because after you train a base stat to that point then any further training of that stat becomes progressively weaker. You can keep up with your animal's stats and Diminishing Returns value by viewing any particular animal after clicking 'Animals' in the navigation menu. With that in mind, once you've got at least one animal of each available course type with stats close to their Diminishing Returns value, you're ready to race. When you click on the 'Races' section of the navigation menu, there are a few subsections at the top. Here is what they mean: "),D(13,"br")(14,"br"),f(15,"strong"),g(16,"Circuit Races:"),h(),g(17," Raising your circuit rank as high as possible is your ultimate aim, and completing Circuit Races is the only way to do so. You'll unlock new animals, races, items, and upgrades by doing this. On this page, you also have access to free races which are easier races that provide a smaller amount of coin. Free race difficulty scales with your circuit rank, so if you plan to play a more active playstyle then you may benefit from not speeding through circuit ranks too quickly as you may have trouble completing free races. If you are okay with a more idle play style though, then you can simply complete Circuit Races as you are able to. "),D(18,"br"),f(19,"strong"),g(20,"Special Races:"),h(),g(21," These races types are unlocked as you increase your circuit rank. They work just like Circuit Races in that you have to complete each rank's races before you increase your rank, but they each reward something unique. For example, the Mono Races you unlock at circuit rank 2 increase your animal's Diminishing Returns value. Your rank at any particular Special Race cannot exceed your circuit rank, so as you increase your circuit rank make sure to check back and complete your Special Races as you are able to. "),D(22,"br"),f(23,"strong"),g(24,"Event Races:"),h(),g(25," After reaching circuit rank 13, you have access to the Grand Prix. The Grand Prix is a multi day race that runs in the background where you can easily swap in and out different racers. This race may be difficult for those who are just starting and you are safe to ignore it until you have a handle on everything else. "),D(26,"br"),f(27,"strong"),g(28,"Training Track"),h(),g(29,": At the training track, each animal has the opportunity to race against a number of competitors to gain some Coins and some unique rewards. You'll likely need to raise your breed levels a bit before seeing success here, but do check in after you've played a little while and give it a shot. "),D(30,"br")(31,"br"),g(32," Once you've trained your animals up to their Diminishing Returns value, you've completed Special Races to increase your Diminishing Returns value, and you've pushed your Circuit Rank as high as you can go, that's when you will want to start breeding your animals. There are other FAQ sections dedicated to Breeding so check those out for more information. After Breeding for awhile, you'll go back to training and racing. Cycling between these two flows is key to success in Cultura. Once you start unlocking multiple animals per course type, you can have one set breeding while the others train and race to cut down on wait time. "),h()()(),D(33,"hr"),f(34,"div")(35,"div")(36,"div",7)(37,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswer1")}),g(38,"+"),h()(),f(39,"div",9)(40,"p"),g(41,"I'm stuck early on, how should I progress?"),h()()(),f(42,"div",25),D(43,"div",7),f(44,"p"),g(45,"In the early game, your biggest obstacles will be coins and breed level. Using the Stockbreeder to Auto Breed your animals can give them a big boost in stats. "),f(46,"em"),g(47,"Note that you should typically wait to Breed until you've gotten as far as you can in circuit races as Breeding will reset your base stats to their defaults and require you to train them back up again. "),h(),D(48,"br")(49,"br"),g(50," If you are having a hard time collecting coins, look into buying the Money Mark and Team Managers from the Shop and upgrading your barns to Attractions to build passive income. The Money Mark will add a new competitor to your races (gold colored as opposed to black) that will run 25% faster than the average speed. If you finish the race first, your coin gain will increase by 25%."),D(51,"br"),g(52," Team Managers will automatically run free races for you every reset period, making sure you're getting as much value as possible from free races. "),D(53,"br"),g(54," Attractions require reaching barn level 10 and will take a little longer than buying the Money Mark and Team Manager, but it will provide passive income as long as there is an animal training in the barn. "),D(55,"br")(56,"br"),g(57," Some early game goals to set for yourself are to complete the Novice level training track, buy enough barns to train at least 1 animal of each course type available to you, raise your circuit rank, and make sure you raise your mono rank to match your circuit rank. "),h()()(),D(58,"hr"),f(59,"div")(60,"div")(61,"div",7)(62,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswer2")}),g(63,"+"),h()(),f(64,"div",9)(65,"p"),g(66,"What do team managers do and how do I set auto race?"),h()()(),f(67,"div",26),D(68,"div",7),f(69,"p"),g(70,'After buying a Team Manager from the shop, you\'ll have the ability to set a deck as your "Auto Run Free Race" deck. Once selected, this deck will immediately run free races as soon as the time period resets creating a steady stream of income (assuming you win, of course!). '),D(71,"br")(72,"br"),g(73,' To set a deck as your "Auto Run Free Race" deck, select \'Decks\' on the right and then select the button that says "Auto Run Free Race" by the deck you want to select. Note that this option will not be available until you buy a Team Manager. '),h()()(),D(74,"hr"),f(75,"div")(76,"div")(77,"div",7)(78,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswer3")}),g(79,"+"),h()(),f(80,"div",9)(81,"p"),g(82,"What does upgrading a barn do and how do I specialize my barn?"),h()()(),f(83,"div",27),D(84,"div",7),f(85,"p"),g(86,"After reaching a certain circuit rank, you will gain the ability to upgrade your barns. Every level you upgrade, you gain a multiplier for a particular stat when training. Hovering over your barn level when selecting a barn will show you your current multipliers. Increasing your barn level can be a great way to get you back in the race after breeding. "),D(87,"br")(88,"br"),g(89," At barn level 10, you will instead have the option to specialize. Subsequently, every 10 levels will improve your specialization instead of giving a stat multiplier. The current specialization options are below."),D(90,"br")(91,"br"),f(92,"strong"),g(93),h(),D(94,"br"),f(95,"strong"),g(96),h(),D(97,"br"),f(98,"strong",16),I("click",function(){return B(e),S().viewSpoiler("Attraction Specialization")}),f(99,"span",17),g(100,"View Spoiler"),h(),g(101),h(),D(102,"br"),f(103,"strong",16),I("click",function(){return B(e),S().viewSpoiler("Research Center Specialization")}),f(104,"span",17),g(105,"View Spoiler"),h(),g(106),h()()()(),D(107,"hr"),x(108,yj,42,0,"div",6),h()}if(2&t){const e=S();p(93),Z("Training Facility - ",e.lookupService.getInDepthSpecializationDescription("Training Facility"),""),p(3),Z("Breeding Grounds - ",e.lookupService.getInDepthSpecializationDescription("Breeding Grounds"),""),p(2),_("ngClass",e.seeAttractionSpoiler?"viewSpoiler":"spoilerText"),p(3),Z(" Attraction - ",e.lookupService.getInDepthSpecializationDescription("Attraction"),""),p(2),_("ngClass",e.seeResearchCenterSpoiler?"viewSpoiler":"spoilerText"),p(3),Z("Research Center - ",e.lookupService.getInDepthSpecializationDescription("Research Center"),""),p(2),_("ngIf",e.lookupService.isItemUnlocked("duoRace"))}}function Sj(t,n){if(1&t&&(f(0,"span",14),g(1),h()),2&t){const e=S(2);p(1),Z("",e.renownCoinGain,"% Additional Coins")}}function Cj(t,n){if(1&t&&(f(0,"span",14),g(1),h()),2&t){const e=S(2);p(1),Z("",e.renownCoinGain.toFixed(2),"% Additional Coins")}}function Tj(t,n){if(1&t&&(f(0,"option",52),g(1),h()),2&t){const e=n.$implicit;_("value",e.type),p(1),Z(" ",e.name,"")}}function Dj(t,n){1&t&&(f(0,"option",52),g(1,"Attraction"),h()),2&t&&_("value",3)}function Rj(t,n){1&t&&(f(0,"option",52),g(1,"Research Center"),h()),2&t&&_("value",4)}function xj(t,n){if(1&t){const e=pe();f(0,"div")(1,"div")(2,"div",7)(3,"button",8),I("click",function(){return B(e),S(2).expandAnswer("faqAnswerIncubatorGrowthCalculator")}),g(4,"+"),h()(),f(5,"div",9)(6,"p"),g(7,"Modifier gain from Incubator Upgrade"),h()()(),f(8,"div",58),D(9,"div",7),f(10,"div",48)(11,"div")(12,"em"),g(13,"Enter a Facility Level and an Incubator Upgrade Level between 1 and 4 to see what the modifier would be on the stat corresponding to the positive trait. This pulls from your current resources by default."),h()(),D(14,"br")(15,"br"),f(16,"div",30)(17,"div",49)(18,"label",59),g(19,"Incubator Upgrade Level:"),h(),f(20,"input",60),I("ngModelChange",function(r){return B(e),S(2).incubatorUpgradeLevel=r}),h(),D(21,"br"),f(22,"label",61),g(23,"Facility Level:"),h(),f(24,"input",62),I("ngModelChange",function(r){return B(e),S(2).facilityLevel=r}),h()(),f(25,"div",34)(26,"span"),g(27,"Result:"),h(),D(28,"br"),f(29,"em")(30,"span",36),g(31),h(),g(32," * .001 with Incubator Upgrade Level "),f(33,"span",63),g(34),h()(),g(35," = "),f(36,"span",14),g(37),h()()()()(),D(38,"hr"),h()}if(2&t){const e=S(2);p(20),_("ngModel",e.incubatorUpgradeLevel),p(4),_("ngModel",e.facilityLevel),p(7),nt(e.facilityLevel),p(3),nt(e.incubatorUpgradeLevel),p(3),Z("*",e.incubatorModifierAmount," to Positive Trait Stat per Breed Level")}}const h2=function(t){return{inactiveCalculation:t}};function Mj(t,n){if(1&t){const e=pe();f(0,"div")(1,"div")(2,"div")(3,"div",7)(4,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswerRenownCalculator")}),g(5,"+"),h()(),f(6,"div",9)(7,"p"),g(8,"Coin gain from Renown"),h()()(),f(9,"div",29),D(10,"div",7),f(11,"div")(12,"em"),g(13,"Enter a Renown amount to see what the modifier would be on Coins won from races."),h()(),D(14,"br")(15,"br"),f(16,"div",30)(17,"div",31)(18,"label",32),g(19,"Renown:"),h(),f(20,"input",33),I("ngModelChange",function(r){return B(e),S().coinGainRenownAmount=r}),h()(),f(21,"div",34)(22,"span"),g(23,"Result:"),h(),f(24,"div",35)(25,"em"),g(26,"If Renown <= 50: "),f(27,"span",36),g(28),h()(),g(29," = "),x(30,Sj,2,1,"span",37),h(),D(31,"br"),f(32,"div",35)(33,"em"),g(34,"If Renown > 50: 500 * log(.0035 * - ("),f(35,"span",36),g(36),h(),g(37," - 50) + 1) + 50 "),h(),g(38," = "),x(39,Cj,2,1,"span",37),h()()()()(),D(40,"hr"),f(41,"div")(42,"div")(43,"div",7)(44,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswerTrainingBreedXpCalculator")}),g(45,"+"),h()(),f(46,"div",9)(47,"p"),g(48,"Breed XP gain from Training"),h()()(),f(49,"div",38),D(50,"div",7),f(51,"div")(52,"em"),g(53,"Select an animal or enter your own values to see how much Breed XP you would gain from completing a single training. Selecting an animal pulls from their current bonuses."),h()(),D(54,"br")(55,"br"),f(56,"div",30)(57,"div",31)(58,"div",39)(59,"label",40),g(60,"Animal:"),h(),f(61,"select",41),I("ngModelChange",function(r){return B(e),S().selectedAnimalType=r})("change",function(){return B(e),S().newAnimalSelected()}),x(62,Tj,2,2,"option",42),h()(),f(63,"em"),g(64,"or"),h(),f(65,"div")(66,"label",43),g(67,"Bonus Training Breed XP:"),h(),f(68,"input",44),I("change",function(){return B(e),S().animalNotSelected()})("ngModelChange",function(r){return B(e),S().bonusBreedXp=r}),h(),D(69,"br"),f(70,"label",45),g(71,"Breeding Grounds Specialization Level:"),h(),f(72,"input",46),I("ngModelChange",function(r){return B(e),S().breedingGroundsSpecializationLevel=r}),h()()(),f(73,"div",34)(74,"span"),g(75,"Result:"),h(),D(76,"br"),f(77,"em"),g(78,"(5 + "),f(79,"span",14),g(80),h(),g(81,") * (1 + "),f(82,"span",14),g(83),h(),g(84," * .1) "),h(),g(85," = "),f(86,"span",14),g(87),h()()()()(),D(88,"hr"),f(89,"div")(90,"div")(91,"div",7)(92,"button",8),I("click",function(){return B(e),S().expandAnswer("faqAnswerBarnSpecializationGainCalculator")}),g(93,"+"),h()(),f(94,"div",9)(95,"p"),g(96,"Barn Specialization Calculator"),h()()(),f(97,"div",47),D(98,"div",7),f(99,"div",48)(100,"div")(101,"em"),g(102,"Select a Specialization Type and enter the Barn Upgrade Level or Specialization Level to see what impact that specialization would have. Specialization Level corresponds Barn Upgrade Level * 10 because your specialization improves every 10 barn upgrade levels."),h()(),D(103,"br")(104,"br"),f(105,"div",30)(106,"div",49)(107,"label",50),g(108,"Specialization:"),h(),f(109,"select",51),I("ngModelChange",function(r){return B(e),S().selectedSpecialization=r}),f(110,"option",52),g(111,"Breeding Grounds"),h(),f(112,"option",52),g(113,"Training Facility"),h(),x(114,Dj,2,1,"option",53),x(115,Rj,2,1,"option",53),h(),D(116,"br")(117,"br"),f(118,"div")(119,"label",54),g(120,"Barn Upgrade Level:"),h(),f(121,"input",55),I("change",function(){return B(e),S().changeBarnUpgradeLevel()})("ngModelChange",function(r){return B(e),S().barnUpgradeLevel=r}),h(),D(122,"br"),f(123,"em"),g(124,"or"),h(),D(125,"br"),f(126,"label",56),g(127,"Barn Specialization Level:"),h(),f(128,"input",57),I("change",function(){return B(e),S().changeBarnSpecializationLevel()})("ngModelChange",function(r){return B(e),S().barnSpecializationLevel=r}),h()()(),f(129,"div",34)(130,"span"),g(131,"Result:"),h(),D(132,"br")(133,"span",19),h()()()()(),D(134,"hr"),x(135,xj,39,5,"div",6),h()}if(2&t){const e=S();p(20),_("ngModel",e.coinGainRenownAmount),p(4),_("ngClass",pn(23,h2,e.coinGainRenownAmount>50)),p(4),nt(e.coinGainRenownAmount),p(2),_("ngIf",e.coinGainRenownAmount<=50),p(2),_("ngClass",pn(25,h2,e.coinGainRenownAmount<=50)),p(4),nt(e.coinGainRenownAmount),p(3),_("ngIf",e.coinGainRenownAmount>50),p(22),_("ngModel",e.selectedAnimalType),p(1),_("ngForOf",e.availableAnimals),p(6),_("ngModel",e.bonusBreedXp),p(4),_("ngModel",e.breedingGroundsSpecializationLevel),p(8),nt(e.bonusBreedXp),p(3),nt(e.breedingGroundsSpecializationLevel),p(4),Z("",e.trainingBreedXpGain," XP gained after completing any Training"),p(22),_("ngModel",e.selectedSpecialization),p(1),_("value",1),p(2),_("value",2),p(2),_("ngIf",e.seeAttractionSpoiler),p(1),_("ngIf",e.seeResearchCenterSpoiler),p(6),_("ngModel",e.barnUpgradeLevel),p(7),_("ngModel",e.barnSpecializationLevel),p(5),_("innerHTML",e.barnSpecializationLevelAmount,Bt),p(2),_("ngIf",e.lookupService.isItemUnlocked("duoRace"))}}let kj=(()=>{class t{constructor(e,i,r,a,o){this.componentCommunicationService=e,this.lookupService=i,this.gameLoopService=r,this.globalService=a,this.specializationService=o,this.seeAttractionSpoiler=!1,this.seeResearchCenterSpoiler=!1,this.seeOceanCourseTypeSpoiler=!1,this.seeTundraCourseTypeSpoiler=!1,this.seeVolcanicCourseTypeSpoiler=!1,this.currentSection=Bu.basics,this.faqSectionsEnum=Bu,this.sunnyTerrainInfo="",this.stormyTerrainInfo="",this.rainyTerrainInfo="",this.snowfallTerrainInfo="",this.ashfallTerrainInfo="",this.maelstromTerrainInfo="",this.hailstormTerrainInfo="",this.torridTerrainInfo="",this.coinGainRenownAmount=0,this.facilityLevel=0,this.incubatorUpgradeLevel=0,this.selectedAnimalType=0,this.animalSelected=!0,this.availableAnimals=[],this.bonusBreedXp=0,this.breedingGroundsSpecializationLevel=0,this.selectedSpecialization=1,this.barnUpgradeLevel=0,this.barnSpecializationLevel=0,this.renownCoinGain=0,this.incubatorModifierAmount=0,this.trainingBreedXpGain=0,this.barnSpecializationLevelAmount=""}ngOnInit(){var i,r,a,e=this;this.componentCommunicationService.setNewView(Ct.faqs),this.lookupService.isItemUnlocked("attractionSpecialization")&&(this.seeAttractionSpoiler=!0),this.lookupService.isItemUnlocked("researchCenterSpecialization")&&(this.seeResearchCenterSpoiler=!0),(null===(i=this.globalService.globalVar.animals.find(u=>u.type===L.Dolphin))||void 0===i?void 0:i.isAvailable)&&(this.seeOceanCourseTypeSpoiler=!0),(null===(r=this.globalService.globalVar.animals.find(u=>u.type===L.Penguin))||void 0===r?void 0:r.isAvailable)&&(this.seeTundraCourseTypeSpoiler=!0),(null===(a=this.globalService.globalVar.animals.find(u=>u.type===L.Salamander))||void 0===a?void 0:a.isAvailable)&&(this.seeVolcanicCourseTypeSpoiler=!0),this.sunnyTerrainInfo=this.lookupService.getTerrainPopoverText(new gn($e.Sunny)),this.stormyTerrainInfo=this.lookupService.getTerrainPopoverText(new gn($e.Stormy)),this.rainyTerrainInfo=this.lookupService.getTerrainPopoverText(new gn($e.Rainy)),this.torridTerrainInfo=this.lookupService.getTerrainPopoverText(new gn($e.Torrid)),this.maelstromTerrainInfo=this.lookupService.getTerrainPopoverText(new gn($e.Maelstrom)),this.hailstormTerrainInfo=this.lookupService.getTerrainPopoverText(new gn($e.Hailstorm)),this.ashfallTerrainInfo=this.lookupService.getTerrainPopoverText(new gn($e.Ashfall)),this.snowfallTerrainInfo=this.lookupService.getTerrainPopoverText(new gn($e.Snowfall)),this.availableAnimals=this.globalService.globalVar.animals.filter(u=>u.isAvailable),this.coinGainRenownAmount=this.lookupService.getRenown(),this.facilityLevel=this.lookupService.getFacilityLevel();var o=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv1"===u.name),s=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv2"===u.name),l=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv3"===u.name),c=this.globalService.globalVar.resources.find(u=>"Incubator Upgrade Lv4"===u.name);null!=o&&(this.incubatorUpgradeLevel=1),null!=s&&(this.incubatorUpgradeLevel=2),null!=l&&(this.incubatorUpgradeLevel=3),null!=c&&(this.incubatorUpgradeLevel=4),this.newAnimalSelected(),this.calculatorSubscription=this.gameLoopService.gameUpdateEvent.subscribe(xr(function*(){e.handleRenownModifierCalculation(),e.handleIncubatorModifierCalculation(),e.handleTrainingBreedXpGainCalculation(),e.handleBarnSpecializationLevelAmountCalculation()}))}handleRenownModifierCalculation(){null!=this.coinGainRenownAmount&&(this.renownCoinGain=this.lookupService.getRenownCoinModifier(this.coinGainRenownAmount,!0))}handleIncubatorModifierCalculation(){if(null!=this.incubatorUpgradeLevel&&null!=this.facilityLevel){var r=0,e=.001,i=this.globalService.globalVar.modifiers.find(a=>"incubatorUpgradeIncreaseModifier"===a.text);null!=i&&(e=i.value),r=this.facilityLevel*e,isNaN(this.incubatorUpgradeLevel)||(this.incubatorUpgradeLevel=+this.incubatorUpgradeLevel),this.incubatorUpgradeLevel>=4?(r>.1&&(r=.1),this.incubatorUpgradeLevel=4):3===this.incubatorUpgradeLevel?r>.05&&(r=.05):2===this.incubatorUpgradeLevel?r>.025&&(r=.025):1===this.incubatorUpgradeLevel?r>.01&&(r=.01):this.incubatorUpgradeLevel<=0&&(r=0),this.incubatorModifierAmount=Math.round(1e3*r)/1e3}}handleTrainingBreedXpGainCalculation(){var e=new At;e.miscStats.bonusBreedXpGainFromTraining=this.bonusBreedXp,this.trainingBreedXpGain=this.lookupService.getTrainingBreedGaugeIncrease(this.breedingGroundsSpecializationLevel,e)}newAnimalSelected(){this.animalSelected=!0;var e=void 0;if(null!=this.selectedAnimalType&&void 0!==(e=this.globalService.globalVar.animals.find(r=>r.getAnimalType()===L[this.selectedAnimalType]))){if(this.bonusBreedXp=e.miscStats.bonusBreedXpGainFromTraining,e.associatedBarnNumber>=0)var i=this.globalService.globalVar.barns.find(r=>r.barnNumber===(null==e?void 0:e.associatedBarnNumber));void 0!==i&&i.barnUpgrades.specialization===Wt.BreedingGrounds&&(this.breedingGroundsSpecializationLevel=i.barnUpgrades.specializationLevel)}}animalNotSelected(){this.animalSelected=!1}handleBarnSpecializationLevelAmountCalculation(){1==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Wt.BreedingGrounds,this.barnSpecializationLevel):2==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Wt.TrainingFacility,this.barnSpecializationLevel):3==+this.selectedSpecialization?this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Wt.Attraction,this.barnSpecializationLevel):4==+this.selectedSpecialization&&(this.barnSpecializationLevelAmount=this.specializationService.getSpecializationPopoverText(Wt.ResearchCenter,this.barnSpecializationLevel))}changeBarnUpgradeLevel(){this.barnSpecializationLevel=Math.floor(this.barnUpgradeLevel/10)}changeBarnSpecializationLevel(){this.barnUpgradeLevel=10*this.barnSpecializationLevel}viewSpoiler(e){"Attraction Specialization"===e&&(this.seeAttractionSpoiler=!0),"Research Center Specialization"===e&&(this.seeResearchCenterSpoiler=!0),"Ocean Course Type"===e&&(this.seeOceanCourseTypeSpoiler=!0),"Tundra Course Type"===e&&(this.seeTundraCourseTypeSpoiler=!0),"Volcanic Course Type"===e&&(this.seeVolcanicCourseTypeSpoiler=!0)}expandAnswer(e){var i=document.getElementById(e);null!=i&&i.classList.toggle("hide")}changeSection(e){this.currentSection=e}ngOnDestroy(){null!=this.calculatorSubscription&&this.calculatorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(P(cn),P(bi),P(An),P(Et),P(a0))},t.\u0275cmp=_t({type:t,selectors:[["app-faq-view"]],decls:21,vars:6,consts:[[1,"faqView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"subsections","s4Heading"],[1,"subsectionOption","buttonAsText",3,"ngClass","click"],[4,"ngIf"],[1,"expanderMargin"],["type","button","aria-label","Expand",3,"click"],[1,"faqQuestion"],["id","faqAnswerBreedGuide",1,"faqAnswer","hide"],["id","faqAnswerBreedBarnRows",1,"faqAnswer","hide"],["id","faqAnswerAllAnimals",1,"faqAnswer","hide"],[1,"flatlandColor","keyword"],[1,"keyword"],[1,"mountainColor","keyword"],[3,"ngClass","click"],[1,"hidden"],[1,"keyword",3,"ngClass"],[3,"innerHTML"],["id","faqAnswerTerrain",1,"faqAnswer","hide"],["id","faqAnswerBreedKeybinds",1,"faqAnswer","hide"],["id","faqAnswerSettings",1,"faqAnswer","hide"],["id","faqAnswerFeedback",1,"faqAnswer","hide"],["id","faqAnswerOverwhelmed",1,"faqAnswer","hide"],["id","faqAnswer1",1,"faqAnswer","hide"],["id","faqAnswer2",1,"faqAnswer","hide"],["id","faqAnswer3",1,"faqAnswer","hide"],["id","faqAnswer4",1,"faqAnswer","hide"],["id","faqAnswerRenownCalculator",1,"faqAnswer","hide"],[1,"inputsAndResult"],[1,"mb-3","inputs"],["for","renown-amount",1,"shortLabelMargin","progressionKeyword"],["id","renown-amount","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"result"],[3,"ngClass"],[1,"progressionKeyword"],["class","keyword",4,"ngIf"],["id","faqAnswerTrainingBreedXpCalculator",1,"faqAnswer","hide"],[1,"dropdownSelection"],["for","breed-xp-animal",1,"keyword"],["name","breed-xp-animal","id","breed-xp-animal",1,"spaced",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["for","bonus-breed-xp",1,"longLabelMargin","keyword"],["id","bonus-breed-xp","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","breeding-grounds-spec-level",1,"longLabelMargin","keyword"],["id","breeding-grounds-spec-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["id","faqAnswerBarnSpecializationGainCalculator",1,"faqAnswer","hide"],[1,"mb-3"],[1,"inputs"],["for","specialization-options",1,"keyword"],["name","specialization-options","id","specialization-options",1,"spaced",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngIf"],["for","barn-upgrade-level",1,"labelMargin","keyword"],["id","barn-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["for","barn-specialization-level",1,"labelMargin","keyword"],["id","barn-specialization-level","type","number","maxlength","20",1,"spaced",3,"ngModel","change","ngModelChange"],["id","faqAnswerIncubatorGrowthCalculator",1,"faqAnswer","hide"],["for","incubator-upgrade-level",1,"labelMargin","specialtyKeyword"],["id","incubator-upgrade-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],["for","facility-level",1,"labelMargin","progressionKeyword"],["id","facility-level","type","number","maxlength","20",1,"spaced",3,"ngModel","ngModelChange"],[1,"specialtyKeyword"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),g(5,"Frequently Asked Questions"),h(),f(6,"em"),g(7,"This FAQ and game is still a work in progress! Bear with me if certain features aren't fully fleshed out and developed yet. If you have any feedback at all, please let me know using one of the links on the bottom right. Thank you so much for playing and hope you're enjoying it!"),h()(),D(8,"br"),f(9,"div",4)(10,"button",5),I("click",function(){return i.changeSection(i.faqSectionsEnum.basics)}),g(11,"Basics"),h(),f(12,"button",5),I("click",function(){return i.changeSection(i.faqSectionsEnum.progression)}),g(13,"Progression"),h(),f(14,"button",5),I("click",function(){return i.changeSection(i.faqSectionsEnum.calculators)}),g(15,"Calculators"),h()(),D(16,"hr")(17,"br"),x(18,_j,306,50,"div",6),x(19,wj,109,7,"div",6),x(20,Mj,136,27,"div",6),h()()()),2&e&&(p(10),_("ngClass",i.currentSection===i.faqSectionsEnum.basics?"active":""),p(2),_("ngClass",i.currentSection===i.faqSectionsEnum.progression?"active":""),p(2),_("ngClass",i.currentSection===i.faqSectionsEnum.calculators?"active":""),p(4),_("ngIf",i.currentSection===i.faqSectionsEnum.basics),p(1),_("ngIf",i.currentSection===i.faqSectionsEnum.progression),p(1),_("ngIf",i.currentSection===i.faqSectionsEnum.calculators))},directives:[Ji,si,gm,qo,Il,bs,_s,Uh,on,cT,dT],styles:['.faqView[_ngcontent-%COMP%]{background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}.info[_ngcontent-%COMP%]{text-align:center}.faqQuestion[_ngcontent-%COMP%]{display:inline-block;width:95%;font-weight:700}.hide[_ngcontent-%COMP%]{display:none}.expanderMargin[_ngcontent-%COMP%]{display:inline-block;width:5%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.inputsAndResult[_ngcontent-%COMP%]{display:flex}.inactiveCalculation[_ngcontent-%COMP%]{opacity:.5}.inputs[_ngcontent-%COMP%], .results[_ngcontent-%COMP%]{width:50%}.spoilerText[_ngcontent-%COMP%]{background-color:gray;color:transparent;-webkit-user-select:none;user-select:none;position:relative;display:inline-block;min-width:8rem}.spoilerText[_ngcontent-%COMP%]:hover > .hidden[_ngcontent-%COMP%]{display:block;color:#fff}.active[_ngcontent-%COMP%]{font-weight:700;color:var(--foreground-secondary)}.shortLabelMargin[_ngcontent-%COMP%]{min-width:15%}.labelMargin[_ngcontent-%COMP%]{min-width:25%}.longLabelMargin[_ngcontent-%COMP%]{min-width:40%}.hidden[_ngcontent-%COMP%]{display:none;position:absolute}.subsections[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.viewSpoiler[_ngcontent-%COMP%]{background-color:inherit;color:inherit}@media (max-width: 800px){.expanderMargin[_ngcontent-%COMP%]{width:auto;margin-right:1rem}.faqQuestion[_ngcontent-%COMP%]{width:auto}}']}),t})(),Aj=(()=>{class t{constructor(e,i){this.globalService=e,this.componentCommunicationService=i}ngOnInit(){this.componentCommunicationService.setNewView(Ct.stats),this.trackedStats=this.globalService.globalVar.trackedStats;var e=0;this.globalService.globalVar.animals.forEach(i=>{i.totalRacesRun>e&&(e=i.totalRacesRun,this.mostUsedAnimal=i.name,this.mostUsedAnimalCount=e)})}getColorClass(e){if(null!=e&&e.length>0){var i=this.globalService.globalVar.animals.filter(o=>o.isAvailable),r=new At;return i.forEach(o=>{e.includes(o.name)&&(r=o)}),{flatlandColor:"Flatland"===r.getRaceCourseType(),mountainColor:"Mountain"===r.getRaceCourseType(),waterColor:"Ocean"===r.getRaceCourseType(),tundraColor:"Tundra"===r.getRaceCourseType(),volcanicColor:"Volcanic"===r.getRaceCourseType()}}return{}}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(cn))},t.\u0275cmp=_t({type:t,selectors:[["app-stats-view"]],decls:37,vars:34,consts:[[1,"statsView"],[1,"marginGrid"],[1,"view"],[1,"info"],[1,"coloredText",3,"ngClass"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"Stats"),h(),D(5,"br")(6,"br"),g(7),Lt(8,"number"),D(9,"br"),g(10),Lt(11,"number"),D(12,"br"),g(13),Lt(14,"number"),D(15,"br"),f(16,"span",4),g(17),Lt(18,"number"),h(),D(19,"br"),f(20,"span",4),g(21),h(),D(22,"br"),f(23,"span",4),g(24),h(),D(25,"br"),f(26,"span",4),g(27),h(),D(28,"br"),f(29,"span",4),g(30),h(),D(31,"br"),f(32,"span",4),g(33),h(),D(34,"br"),f(35,"span",4),g(36),h()()()()),2&e&&(p(7),Z(" Total Races: ",Xc(8,18,i.trackedStats.totalRaces,"1.0","en-US")," "),p(3),Z(" Total Meters Covered: ",Xc(11,22,i.trackedStats.totalMetersRaced.toFixed(0),"1.0","en-US")," "),p(3),Z(" Total Breeds: ",Xc(14,26,i.trackedStats.totalBreeds,"1.0","en-US")," "),p(3),_("ngClass",i.getColorClass(i.mostUsedAnimal)),p(1),rn("Most Used Animal: ",i.mostUsedAnimal," (",Xc(18,30,i.mostUsedAnimalCount,"1.0","en-US"),")"),p(3),_("ngClass",i.getColorClass(i.trackedStats.highestMaxSpeed)),p(1),Z("Highest Max Speed: ",i.trackedStats.highestMaxSpeed,""),p(2),_("ngClass",i.getColorClass(i.trackedStats.highestAccelerationRate)),p(1),Z("Highest Acceleration Rate: ",i.trackedStats.highestAccelerationRate,""),p(2),_("ngClass",i.getColorClass(i.trackedStats.highestStamina)),p(1),Z("Highest Stamina: ",i.trackedStats.highestStamina,""),p(2),_("ngClass",i.getColorClass(i.trackedStats.highestPowerEfficiency)),p(1),Z("Highest Power Efficiency: ",i.trackedStats.highestPowerEfficiency,""),p(2),_("ngClass",i.getColorClass(i.trackedStats.highestFocusDistance)),p(1),Z("Highest Focus Distance: ",i.trackedStats.highestFocusDistance,""),p(2),_("ngClass",i.getColorClass(i.trackedStats.highestAdaptabilityDistance)),p(1),Z("Highest Adaptability Distance: ",i.trackedStats.highestAdaptabilityDistance,""))},directives:[Ji],pipes:[bo],styles:['.statsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.marginGrid[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:auto;justify-content:stretch;grid-template-areas:". view ."}.view[_ngcontent-%COMP%]{grid-area:view}']}),t})();function Pj(t,n){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=S().$implicit,i=S();p(1),_("innerHTML",i.getPopover(e.name,e.itemType),Bt)}}function Ej(t,n){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",8),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,Pj,2,1,"ng-template",null,11,ut),h()),2&t){const e=n.$implicit,i=lt(8);p(1),_("ngbPopover",i),p(2),nt(e.name),p(2),Z(" x ",e.amount,"")}}function Ij(t,n){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=S().$implicit,i=S();p(1),_("innerHTML",i.getPopover(e.name,e.itemType),Bt)}}function Vj(t,n){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",14),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,Ij,2,1,"ng-template",null,15,ut),h()),2&t){const e=n.$implicit,i=lt(8);p(1),_("ngbPopover",i),p(2),nt(e.name),p(2),Z(" x ",e.amount,"")}}function Oj(t,n){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=S().$implicit,i=S();p(1),_("innerHTML",i.getPopover(e.name,e.itemType),Bt)}}function Nj(t,n){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",16),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,Oj,2,1,"ng-template",null,17,ut),h()),2&t){const e=n.$implicit,i=lt(8);p(1),_("ngbPopover",i),p(2),nt(e.name),p(2),Z(" x ",e.amount,"")}}function Fj(t,n){if(1&t&&(f(0,"div",12),D(1,"span",13),h()),2&t){const e=S().$implicit,i=S();p(1),_("innerHTML",i.getPopover(e.name,e.itemType),Bt)}}function Bj(t,n){if(1&t&&(f(0,"p")(1,"span",7)(2,"span",18),g(3),h(),f(4,"span",9),g(5),h(),D(6,"hr",10),h(),x(7,Fj,2,1,"ng-template",null,19,ut),h()),2&t){const e=n.$implicit,i=lt(8);p(1),_("ngbPopover",i),p(2),nt(e.name),p(2),Z(" x ",e.amount,"")}}let Lj=(()=>{class t{constructor(e,i,r,a){this.globalService=e,this.lookupService=i,this.componentCommunicationService=r,this.utilityService=a,this.resources=[],this.equipment=[],this.specialtyItems=[],this.progressionResources=[]}ngOnInit(){this.componentCommunicationService.setNewView(Ct.resources),this.resources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===G.Food||e.itemType===G.Resources).sort(),this.equipment=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===G.Equipment).sort(),this.specialtyItems=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===G.Specialty).sort(),this.progressionResources=this.globalService.globalVar.resources.filter(e=>e.amount>0&&e.itemType===G.Progression).sort()}getPopover(e,i){return this.utilityService.getSanitizedHtml(this.lookupService.getResourcePopover(e,i))}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(bi),P(cn),P(kn))},t.\u0275cmp=_t({type:t,selectors:[["app-resources-view"]],decls:21,vars:4,consts:[[1,"resourcesView","gridContainer"],[1,"resources"],[1,"s4Heading","centered"],[4,"ngFor","ngForOf"],[1,"progression"],[1,"specialty"],[1,"equipment"],["triggers","mouseenter:mouseleave","popoverClass","popoverClass",1,"screenMarginLeft",3,"ngbPopover"],[1,"resourceKeyword"],[1,"rightAligned"],[1,"miniHr"],["resourceContent",""],[1,"popoverClass"],[3,"innerHTML"],[1,"progressionKeyword"],["progressionContent",""],[1,"specialtyKeyword"],["specialityContent",""],[1,"equipmentKeyword"],["equipmentContent",""]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2),g(3,"Resources"),h(),D(4,"br"),x(5,Ej,9,3,"p",3),h(),f(6,"div",4)(7,"div",2),g(8,"Progression"),h(),D(9,"br"),x(10,Vj,9,3,"p",3),h(),f(11,"div",5)(12,"div",2),g(13,"Specialty"),h(),D(14,"br"),x(15,Nj,9,3,"p",3),h(),f(16,"div",6)(17,"div",2),g(18,"Equipment"),h(),D(19,"br"),x(20,Bj,9,3,"p",3),h()()),2&e&&(p(5),_("ngForOf",i.resources),p(5),_("ngForOf",i.progressionResources),p(5),_("ngForOf",i.specialtyItems),p(5),_("ngForOf",i.equipment))},directives:[on,Wr],styles:['.resources[_ngcontent-%COMP%]{white-space:pre}.resourcesView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:25%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:"resources progression specialty equipment"}.resources[_ngcontent-%COMP%]{grid-area:resources;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.progression[_ngcontent-%COMP%]{grid-area:progression;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.specialty[_ngcontent-%COMP%]{grid-area:specialty;border-right:1px solid rgba(0,0,0,.1);background-color:var(--background-secondary)}.equipment[_ngcontent-%COMP%]{grid-area:equipment;background-color:var(--background-secondary)}.rightAligned[_ngcontent-%COMP%]{text-align:right}.centered[_ngcontent-%COMP%]{text-align:center}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:1fr;grid-template-rows:auto auto auto auto;justify-content:stretch;grid-template-areas:"resources" "progression" "specialty" "equipment"}}']}),t})();var Kl=Q(7206);let Uj=(()=>{class t{constructor(e){this.globalService=e}redeemCode(e){var r=Kl.AES.decrypt(e,"LaunchSecret!CLTRA71");0===r.toString(Kl.enc.Utf8).length&&alert("Invalid code entered.");try{var a=JSON.parse(r.toString(Kl.enc.Utf8));null!=a&&a.rewards.length>0&&((new Date).getTime()>new Date(a.expirationDate).getTime()?alert("This code has expired."):this.globalService.globalVar.redeemedCodes.some(o=>o.codeValue===r.toString(Kl.enc.Utf8))?alert("This code has already been redeemed."):(a.rewards.forEach(o=>{var s=this.globalService.globalVar.resources.find(l=>l.name===o.name);null!=s?s.amount+=o.amount:this.globalService.globalVar.resources.push(o)}),a.codeValue=r.toString(Kl.enc.Utf8),this.globalService.globalVar.redeemedCodes.push(a)))}catch(o){alert("You've run into an error! Please try again. If you have the time, please export your data under the Settings tab and send me the data and any relevant info at CulturaIdle@gmail.com. Thank you!")}}}return t.\u0275fac=function(e){return new(e||t)(Ue(Et))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Hj=(()=>{class t{constructor(e){this.lookupService=e}setupRewards(){this.redeemableCode=new pf,this.redeemableCode.expirationDate=new Date("2022-09-01"),this.redeemableCode.rewards.push(this.lookupService.gainCoins(1e8)),this.redeemableCode.rewards.push(this.lookupService.gainMedals(1e3))}createCode(){this.setupRewards();var i=JSON.stringify(this.redeemableCode);return Kl.AES.encrypt(i,"LaunchSecret!CLTRA71").toString()}}return t.\u0275fac=function(e){return new(e||t)(Ue(bi))},t.\u0275prov=at({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Gj=(()=>{class t{constructor(e,i,r,a,o,s,l,c,u){this.globalService=e,this.themeService=i,this.lookupService=r,this.codeRedemptionService=a,this.codeCreationService=o,this.deploymentService=s,this.componentCommunicationService=l,this.versionControlService=c,this.utilityService=u,this.raceDisplayInfoEnum=ca,this.skipDrawRaceToggle=()=>{this.skipDrawRace=!this.skipDrawRace,this.globalService.globalVar.settings.set("skipDrawRace",this.skipDrawRace)},this.finishTrainingBeforeSwitchingToggle=()=>{this.finishTrainingBeforeSwitching=!this.finishTrainingBeforeSwitching,this.globalService.globalVar.settings.set("finishTrainingBeforeSwitching",this.finishTrainingBeforeSwitching)},this.hideTipsToggle=()=>{this.hideTips=!this.hideTips,this.globalService.globalVar.settings.set("hideTips",this.hideTips)},this.useNumbersForCircuitRankToggle=()=>{this.useNumbersForCircuitRank=!this.useNumbersForCircuitRank,this.globalService.globalVar.settings.set("useNumbersForCircuitRank",this.useNumbersForCircuitRank)},this.autoStartEventRaceToggle=()=>{this.autoStartEventRace=!this.autoStartEventRace,this.globalService.globalVar.settings.set("autoStartEventRace",this.autoStartEventRace)}}ngOnInit(){this.componentCommunicationService.setNewView(Ct.settings),this.deploymentService.codeCreationMode&&console.log(this.codeCreationService.createCode()),this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1);var e=this.globalService.globalVar.settings.get("skipDrawRace");this.skipDrawRace=void 0!==e&&e,this.skipDrawRacePopoverText=this.lookupService.getSettingDescriptions("Auto Skip Race Info");var i=this.globalService.globalVar.settings.get("finishTrainingBeforeSwitching");this.finishTrainingBeforeSwitching=void 0!==i&&i,this.finishTrainingBeforeSwitchingPopoverText=this.lookupService.getSettingDescriptions("Finish Training Before Switching");var r=this.globalService.globalVar.settings.get("raceDisplayInfo");this.raceDisplayInfo=this.getRaceDisplayInfoName(void 0===r?ca.both:r),this.raceDisplayInfoPopoverText=this.lookupService.getSettingDescriptions("Race Display Info");var a=this.globalService.globalVar.settings.get("hideTips");this.hideTips=void 0!==a&&a,this.hideTipsPopoverText=this.lookupService.getSettingDescriptions("Hide Tips");var o=this.globalService.globalVar.settings.get("useNumbersForCircuitRank");this.useNumbersForCircuitRank=void 0!==o&&o,this.useNumbersForCircuitRankPopoverText=this.lookupService.getSettingDescriptions("Use Numbers For Circuit Rank");var s=this.globalService.globalVar.settings.get("autoStartEventRace");this.autoStartEventRace=void 0!==s&&s,this.autoStartEventRacePopoverText=this.lookupService.getSettingDescriptions("Auto Start Event Race")}SaveGame(){var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);this.importExportValue=i}fileChanged(e){this.file=e.target.files[0]}LoadGame(){if(confirm("This will overwrite your existing game data. Continue?")){var e=LZString.decompressFromBase64(this.importExportValue),i=JSON.parse(e);null!=i&&(this.globalService.globalVar=r0(Yi,i),this.versionControlService.updatePlayerVersion())}}SaveGameToFile(){var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);let r=new Blob([i],{type:".txt"}),a=document.createElement("a"),o=URL.createObjectURL(r);a.href=o,a.download="Cultura-v"+this.globalService.globalVar.currentVersion.toString().replace(".","_")+"-"+(new Date).toLocaleDateString(),document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(o)},0)}LoadGameFromFile(){if((null==this.file||0===this.file.length)&&alert("First select a file to import."),confirm("This will overwrite your existing game data. Continue?")){let e=new FileReader;e.onload=i=>{var r=LZString.decompressFromBase64(e.result),a=JSON.parse(r);null!=a&&(this.globalService.globalVar=r0(Yi,a),this.versionControlService.updatePlayerVersion())},e.readAsText(this.file)}}saveRaceDisplayInfo(){this.globalService.globalVar.settings.set("raceDisplayInfo",this.raceDisplayInfo)}changeRaceDisplayInfo(e){this.globalService.globalVar.settings.set("raceDisplayInfo",e),this.raceDisplayInfo=this.getRaceDisplayInfoName(e)}changeTheme(e){var i=Tu;"White"===e&&(i=this.themeService.setWhiteTheme()),"Light"===e&&(i=this.themeService.setLightTheme()),"Twilight"===e&&(i=this.themeService.setTwilightTheme()),"Night"===e&&(i=this.themeService.setNightTheme()),this.globalService.globalVar.settings.set("theme",i),this.getThemeName()}getThemeName(){this.currentTheme=this.themeService.getActiveTheme().name.charAt(0).toUpperCase()+this.themeService.getActiveTheme().name.slice(1)}getRaceDisplayInfoName(e){return e===ca.both?"Both":e===ca.text?"Text":e===ca.draw?"Draw":""}enterRedemptionCode(){this.codeRedemptionService.redeemCode(this.enteredRedemptionCode)}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(Ul),P(bi),P(Uj),P(Hj),P(VD),P(cn),P(s0),P(kn))},t.\u0275cmp=_t({type:t,selectors:[["app-settings-view"]],decls:100,vars:15,consts:[[1,"settingsView"],[1,"info"],[1,"settingsGrid"],[1,"options"],[1,"s4Heading"],[1,"toggles"],["triggers","mouseenter:mouseleave",1,"checkboxOption",3,"ngbPopover"],["type","checkbox","id","skipRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","finishTraining",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","hideTips",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","useNumbersForCircuitRank",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["type","checkbox","id","autoStartEventRace",1,"rightSpaced",3,"ngModel","ngModelChange","input"],["triggers","mouseenter:mouseleave","ngbDropdown","",1,"d-inline-block",3,"ngbPopover"],[1,"bottomAligned"],["type","button","id","raceDisplayInfoDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","raceDisplayInfoDropdown"],["ngbDropdownItem","",3,"click"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","themeDropdown","ngbDropdownToggle","",1,"btn","dropdown","spaced"],["ngbDropdownMenu","","aria-labelledby","themeDropdown"],[1,"saveLoad"],[1,"importExportDiv"],["id","importExport","name","importExport","rows","10",3,"ngModel","ngModelChange"],[1,"importExportButtons"],[3,"click"],["type","file","id","fileUpload",1,"spaced",3,"change"],[1,"codeRedemption"],["for","codeRedemptionText"],["id","codeRedemptionText","type","text",1,"spaced","codeRedemptionInput",3,"ngModel","ngModelChange"],[1,"screenMarginLeft",3,"click"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"h2"),g(3,"Settings"),h()(),f(4,"div",2)(5,"div",3)(6,"span",4),g(7,"Options"),h(),D(8,"br"),f(9,"div",5)(10,"span",6)(11,"label")(12,"input",7),I("ngModelChange",function(a){return i.skipDrawRace=a})("input",function(){return i.skipDrawRaceToggle()}),h(),f(13,"span"),g(14,"Auto Skip Race Info"),h()()(),D(15,"br"),f(16,"span",6)(17,"label")(18,"input",8),I("ngModelChange",function(a){return i.finishTrainingBeforeSwitching=a})("input",function(){return i.finishTrainingBeforeSwitchingToggle()}),h(),f(19,"span"),g(20,"Finish Training Before Switching "),h()()(),D(21,"br"),f(22,"span",6)(23,"label")(24,"input",9),I("ngModelChange",function(a){return i.hideTips=a})("input",function(){return i.hideTipsToggle()}),h(),f(25,"span"),g(26,"Hide Tips"),h()()(),D(27,"br"),f(28,"span",6)(29,"label")(30,"input",10),I("ngModelChange",function(a){return i.useNumbersForCircuitRank=a})("input",function(){return i.useNumbersForCircuitRankToggle()}),h(),f(31,"span"),g(32,"Use Numbers For Circuit Rank"),h()()(),D(33,"br"),f(34,"span",6)(35,"label")(36,"input",11),I("ngModelChange",function(a){return i.autoStartEventRace=a})("input",function(){return i.autoStartEventRaceToggle()}),h(),f(37,"span"),g(38,"Auto Start Event Race"),h()()(),D(39,"br"),h(),f(40,"div",12)(41,"label",13),g(42,"Race Display Info:"),h(),f(43,"button",14),g(44),h(),f(45,"div",15)(46,"button",16),I("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.draw)}),g(47,"Draw"),h(),f(48,"button",16),I("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.text)}),g(49,"Text"),h(),f(50,"button",16),I("click",function(){return i.changeRaceDisplayInfo(i.raceDisplayInfoEnum.both)}),g(51,"Both"),h()()(),D(52,"br"),f(53,"div",17)(54,"label",13),g(55,"Theme:"),h(),f(56,"button",18),g(57),h(),f(58,"div",19)(59,"button",16),I("click",function(){return i.changeTheme("White")}),g(60,"White"),h(),f(61,"button",16),I("click",function(){return i.changeTheme("Light")}),g(62,"Light"),h(),f(63,"button",16),I("click",function(){return i.changeTheme("Twilight")}),g(64,"Twilight"),h(),f(65,"button",16),I("click",function(){return i.changeTheme("Night")}),g(66,"Night"),h()()()(),f(67,"div",20)(68,"span",4),g(69,"Save/Load"),h(),D(70,"br"),f(71,"div",21)(72,"textarea",22),I("ngModelChange",function(a){return i.importExportValue=a}),h(),f(73,"div",23)(74,"button",24),I("click",function(){return i.LoadGame()}),g(75," Import "),h(),f(76,"button",24),I("click",function(){return i.SaveGame()}),g(77," Export "),h()(),D(78,"br"),f(79,"div",23)(80,"div")(81,"button",24),I("click",function(){return i.LoadGameFromFile()}),g(82," Import from File "),h(),f(83,"input",25),I("change",function(a){return i.fileChanged(a)}),h()(),f(84,"button",24),I("click",function(){return i.SaveGameToFile()}),g(85," Export to File "),h()()(),D(86,"br")(87,"br"),f(88,"div")(89,"span",4),g(90,"Code Redemption"),h(),D(91,"br")(92,"br"),f(93,"div",26)(94,"label",27),g(95,"Code: "),h(),f(96,"input",28),I("ngModelChange",function(a){return i.enteredRedemptionCode=a}),h(),f(97,"button",29),I("click",function(){return i.enterRedemptionCode()}),g(98," Enter "),h()(),D(99,"br"),h()()()()),2&e&&(p(10),_("ngbPopover",i.skipDrawRacePopoverText),p(2),_("ngModel",i.skipDrawRace),p(4),_("ngbPopover",i.finishTrainingBeforeSwitchingPopoverText),p(2),_("ngModel",i.finishTrainingBeforeSwitching),p(4),_("ngbPopover",i.hideTipsPopoverText),p(2),_("ngModel",i.hideTips),p(4),_("ngbPopover",i.useNumbersForCircuitRankPopoverText),p(2),_("ngModel",i.useNumbersForCircuitRank),p(4),_("ngbPopover",i.autoStartEventRacePopoverText),p(2),_("ngModel",i.autoStartEventRace),p(4),_("ngbPopover",i.raceDisplayInfoPopoverText),p(4),nt(i.raceDisplayInfo),p(13),nt(i.currentTheme),p(15),_("ngModel",i.importExportValue),p(24),_("ngModel",i.enteredRedemptionCode))},directives:[Wr,nu,bs,_s,Ql,k0,Af,M0,qo],styles:['.settingsView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.info[_ngcontent-%COMP%]{text-align:center}.dropdown[_ngcontent-%COMP%]{color:var(--foreground-default);background-color:var(--background-secondary)}#raceDisplayInfoDropdown[_ngcontent-%COMP%], #themeDropdown[_ngcontent-%COMP%]{border:1px solid;border-color:var(--background-tertiary)}.bottomAligned[_ngcontent-%COMP%]{vertical-align:bottom}.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1fr 1%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:". options saveLoad .";background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.options[_ngcontent-%COMP%]{grid-area:options}.saveLoad[_ngcontent-%COMP%]{grid-area:saveLoad}#importExport[_ngcontent-%COMP%]{width:100%}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.rightSpaced[_ngcontent-%COMP%]{margin-right:.5em}.checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap}.checkboxOption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .checkboxOption[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:middle}.importExportButtons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.codeRedemption[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.codeRedemptionInput[_ngcontent-%COMP%]{flex:1}@media (max-width: 800px){.settingsGrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1% 1fr 1%;grid-template-rows:1fr;justify-content:stretch;grid-template-areas:". options ." ". saveLoad ."}}']}),t})();function zj(t,n){if(1&t){const e=pe();f(0,"div",12),I("click",function(){return B(e),S().getNewTip()}),f(1,"span"),g(2),h()()}if(2&t){const e=S();p(2),rn("",e.displayingFunFact?"Fun Fact: ":"Tip: ","",e.randomTip,"")}}let jj=(()=>{class t{constructor(e,i,r,a,o){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.componentCommunicationService=a,this.utilityService=o,this.displayingFunFact=!1,this.lastDisplayedFunFact=!1}ngOnInit(){var e=this;this.displayTip=!this.globalService.globalVar.settings.get("hideTips"),this.version=this.globalService.globalVar.currentVersion.toFixed(2),this.randomTip=this.lookupService.getRandomTip(),this.totalTime=0,this.maxTipTime=60,this.gameLoopService.gameUpdateEvent.subscribe(function(){var i=xr(function*(r){if(e.displayTip=!e.globalService.globalVar.settings.get("hideTips"),e.totalTime+=r,e.totalTime>=e.maxTipTime&&e.displayTip){e.totalTime=0;var a=e.utilityService.getRandomInteger(1,4);a<=3||e.lastDisplayedFunFact?(e.displayingFunFact=!1,e.lastDisplayedFunFact=!1,e.randomTip=e.lookupService.getRandomTip()):4===a&&(e.displayingFunFact=!0,e.lastDisplayedFunFact=!0,e.randomTip=e.lookupService.getRandomFunFact())}});return function(r){return i.apply(this,arguments)}}())}getNewTip(){this.totalTime=0;var e=this.utilityService.getRandomInteger(1,4);e<=3||this.lastDisplayedFunFact?(this.displayingFunFact=!1,this.lastDisplayedFunFact=!1,this.randomTip=this.lookupService.getRandomTip()):4===e&&(this.displayingFunFact=!0,this.lastDisplayedFunFact=!0,this.randomTip=this.lookupService.getRandomFunFact())}openFAQs(){this.componentCommunicationService.setNewView(Ct.faqs)}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(An),P(bi),P(cn),P(kn))},t.\u0275cmp=_t({type:t,selectors:[["app-footer"]],decls:25,vars:1,consts:[[1,"footerView"],[1,"gridContainer"],[1,"area1"],["class","area2 keyword tips",3,"click",4,"ngIf"],[1,"area3","keyword","rightAlign"],[1,"faqs",3,"click"],["href","https://discord.gg/TgbRXsXQF3","rel","noopener noreferrer","target","_blank"],["href","https://www.reddit.com/message/compose/?to=Jaghancement","rel","noopener noreferrer","target","_blank"],["href","mailto:CulturaIdle@gmail.com"],[1,"area4","keyword","rightAlign"],["href","https://www.buymeacoffee.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],["href","https://www.patreon.com/CulturaIdle","rel","noopener noreferrer","target","_blank"],[1,"area2","keyword","tips",3,"click"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1)(2,"div",2),D(3,"span"),h(),x(4,zj,3,2,"div",3),f(5,"div",4)(6,"span")(7,"span",5),I("click",function(){return i.openFAQs()}),g(8,"FAQs"),h(),g(9," | "),f(10,"a",6),g(11,"Discord"),h(),g(12," | "),f(13,"a",7),g(14,"Reddit"),h(),g(15," | "),f(16,"a",8),g(17,"Email"),h()()(),f(18,"div",9)(19,"span")(20,"a",10),g(21,"Donate"),h(),g(22," | "),f(23,"a",11),g(24,"Patreon"),h()()()()()),2&e&&(p(4),_("ngIf",i.displayTip))},directives:[si],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 1fr 20% 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". area1 area2 area3 ." ". area1 area2 area4 ."}a[_ngcontent-%COMP%], .faqs[_ngcontent-%COMP%]{color:var(--foreground-quaternary)}.faqs[_ngcontent-%COMP%]{cursor:pointer}.faqs[_ngcontent-%COMP%]:hover{text-decoration:underline}.area1[_ngcontent-%COMP%]{grid-area:area1;justify-self:stretch}.area2[_ngcontent-%COMP%]{grid-area:area2;justify-self:stretch}.area3[_ngcontent-%COMP%]{grid-area:area3;justify-self:stretch}.area4[_ngcontent-%COMP%]{grid-area:area4;justify-self:stretch}.rightAlign[_ngcontent-%COMP%]{text-align:right}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100%;height:100%;grid-template-columns:1% 0% 0% 1fr 1%;grid-template-rows:50%;justify-content:stretch;grid-template-areas:". . . area3 ." ". . . area4 ."}.tips[_ngcontent-%COMP%]{display:none}}']}),t})();const $j=["tutorialContent"],Wj=["eventLoadingContent"];function qj(t,n){1&t&&(f(0,"div",19),D(1,"app-barn-view"),h())}function Xj(t,n){1&t&&(f(0,"div",20),D(1,"app-race-selection-view"),h())}function Yj(t,n){1&t&&(f(0,"div",21),D(1,"app-animals-view"),h())}function Qj(t,n){1&t&&(f(0,"div",22),D(1,"app-decks-view"),h())}function Kj(t,n){1&t&&(f(0,"div",23),D(1,"app-shop-view"),h())}function Zj(t,n){1&t&&(f(0,"div",24),D(1,"app-incubator-view"),h())}function Jj(t,n){1&t&&(f(0,"div",25),D(1,"app-training-track-view"),h())}function e$(t,n){1&t&&(f(0,"div",26),D(1,"app-faq-view"),h())}function t$(t,n){1&t&&(f(0,"div",27),D(1,"app-stats-view"),h())}function i$(t,n){1&t&&(f(0,"div",28),D(1,"app-resources-view"),h())}function n$(t,n){1&t&&(f(0,"div",29),D(1,"app-settings-view"),h())}function r$(t,n){if(1&t){const e=pe();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Tutorial"),h(),f(4,"button",33),I("click",function(){return B(e),S().closeTutorialModal()}),g(5,"X"),h()(),D(6,"div",34),f(7,"div",35)(8,"span")(9,"button",36),I("click",function(){return B(e),S().skipTutorial()}),g(10,"Skip Tutorial"),h()(),f(11,"span")(12,"button",36),I("click",function(){return B(e),S().continueTutorial()}),g(13,"Continue"),h()()()()}if(2&t){const e=S();p(6),_("innerHTML",e.tutorialText,Bt)}}function a$(t,n){if(1&t){const e=pe();f(0,"div",30)(1,"div",31)(2,"h4",32),g(3,"Loading..."),h(),f(4,"button",33),I("click",function(){return B(e),S().closeModals()}),g(5,"X"),h()(),f(6,"div",37),g(7," Grand Prix is calculating offline time. Load times may be long while this finishes. "),h(),f(8,"div",35)(9,"span")(10,"button",36),I("click",function(){return B(e),S().closeModals()}),g(11,"Continue"),h()()()()}}let o$=(()=>{class t{constructor(e,i,r,a,o,s,l){this.ref=e,this.globalService=i,this.modalService=r,this.tutorialService=a,this.componentCommunicationService=o,this.sanitizer=s,this.gameLoopService=l,this.navigationEnum=Ct,this.activeView=Ct.barn,this.loadingScreenDisplayed=!1}ngOnInit(){var e=this;this.openTutorialModal(),this.eventPrixSubscription=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=xr(function*(a){null!=e.globalService.globalVar.eventRaceData&&e.globalService.globalVar.eventRaceData.isCatchingUp&&!e.loadingScreenDisplayed?(e.loadingScreenDisplayed=!0,e.openLoadingModal()):null!=e.globalService.globalVar.eventRaceData&&!e.globalService.globalVar.eventRaceData.isCatchingUp&&e.loadingScreenDisplayed&&(e.loadingScreenDisplayed=!1,e.closeModals())});return function(a){return r.apply(this,arguments)}}());var i=this.gameLoopService.gameUpdateEvent.subscribe(function(){var r=xr(function*(a){e.globalService.globalVar.tutorials.showTutorial&&e.openTutorialModal(),e.globalService.globalVar.tutorials.tutorialCompleted&&i.unsubscribe()});return function(a){return r.apply(this,arguments)}}())}changeView(e){this.activeView=e}openTutorialModal(){if(!this.globalService.globalVar.tutorials.tutorialCompleted){var e=this.tutorialService.getTutorialState(this.globalService.globalVar.tutorials.currentTutorialId);this.activeView===e.associatedTab&&(this.tutorialText=this.sanitizer.sanitize(ri.HTML,this.sanitizer.bypassSecurityTrustHtml(e.tutorialText+"\n")),this.globalService.globalVar.tutorials.showTutorial=!1,5===e.id&&(this.globalService.globalVar.tutorials.currentTutorialId+=1),this.modalService.open(this.tutorialContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(i=>{this.closeTutorialModal()},i=>{this.closeTutorialModal()}))}}openLoadingModal(){this.modalService.open(this.eventLoadingContent,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(e=>{this.closeModals()},e=>{this.closeModals()})}closeModals(){this.modalService.dismissAll()}closeTutorialModal(){this.modalService.dismissAll()}skipTutorial(){this.tutorialService.skipTutorial(),this.closeTutorialModal()}continueTutorial(){this.closeTutorialModal()}}return t.\u0275fac=function(e){return new(e||t)(P(Ur),P(Et),P(To),P(OD),P(cn),P(Wo),P(An))},t.\u0275cmp=_t({type:t,selectors:[["app-main"]],viewQuery:function(e,i){if(1&e&&(Sa($j,7),Sa(Wj,7)),2&e){let r;Si(r=Ci())&&(i.tutorialContent=r.first),Si(r=Ci())&&(i.eventLoadingContent=r.first)}},decls:23,vars:11,consts:[[1,"gridContainer"],[1,"headerArea"],[1,"mainArea"],["id","BarnView","class","mainView",4,"ngIf"],["id","RaceSelectionView","class","mainView",4,"ngIf"],["id","AnimalsView","class","mainView",4,"ngIf"],["id","DecksView","class","mainView",4,"ngIf"],["id","ShopView","class","mainView",4,"ngIf"],["id","IncubatorView","class","mainView",4,"ngIf"],["id","TrainingTrackView","class","mainView",4,"ngIf"],["id","FaqsView","class","mainView",4,"ngIf"],["id","StatsView","class","mainView",4,"ngIf"],["id","ResourcesView","class","mainView",4,"ngIf"],["id","SettingsView","class","mainView",4,"ngIf"],[1,"navArea"],[3,"viewChanged"],[1,"footerArea"],["tutorialContent",""],["eventLoadingContent",""],["id","BarnView",1,"mainView"],["id","RaceSelectionView",1,"mainView"],["id","AnimalsView",1,"mainView"],["id","DecksView",1,"mainView"],["id","ShopView",1,"mainView"],["id","IncubatorView",1,"mainView"],["id","TrainingTrackView",1,"mainView"],["id","FaqsView",1,"mainView"],["id","StatsView",1,"mainView"],["id","ResourcesView",1,"mainView"],["id","SettingsView",1,"mainView"],[1,"modalClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",3,"click"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer","spaceBetween"],["type","button",1,"spaced",3,"click"],[1,"modal-body"]],template:function(e,i){1&e&&(f(0,"div",0)(1,"div",1),D(2,"app-header"),h(),f(3,"div",2),x(4,qj,2,0,"div",3),x(5,Xj,2,0,"div",4),x(6,Yj,2,0,"div",5),x(7,Qj,2,0,"div",6),x(8,Kj,2,0,"div",7),x(9,Zj,2,0,"div",8),x(10,Jj,2,0,"div",9),x(11,e$,2,0,"div",10),x(12,t$,2,0,"div",11),x(13,i$,2,0,"div",12),x(14,n$,2,0,"div",13),h(),f(15,"div",14)(16,"app-navigation",15),I("viewChanged",function(a){return i.changeView(a)}),h()(),f(17,"div",16),D(18,"app-footer"),h()(),x(19,r$,14,1,"ng-template",null,17,ut),x(21,a$,12,0,"ng-template",null,18,ut)),2&e&&(p(4),_("ngIf",i.activeView===i.navigationEnum.barn),p(1),_("ngIf",i.activeView===i.navigationEnum.raceselection),p(1),_("ngIf",i.activeView===i.navigationEnum.animals),p(1),_("ngIf",i.activeView===i.navigationEnum.relayTeams),p(1),_("ngIf",i.activeView===i.navigationEnum.shop),p(1),_("ngIf",i.activeView===i.navigationEnum.incubator),p(1),_("ngIf",i.activeView===i.navigationEnum.trainingtrack),p(1),_("ngIf",i.activeView===i.navigationEnum.faqs),p(1),_("ngIf",i.activeView===i.navigationEnum.stats),p(1),_("ngIf",i.activeView===i.navigationEnum.resources),p(1),_("ngIf",i.activeView===i.navigationEnum.settings))},directives:[rU,si,IH,UG,wz,Pz,Jz,bj,c2,kj,Aj,Lj,Gj,o2,jj],styles:['.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100vh;grid-template-columns:88% 12%;grid-template-rows:6% 88% 6%;justify-content:stretch;grid-template-areas:"header header" "main  nav" "footer footer"}@media (max-width: 800px){.gridContainer[_ngcontent-%COMP%]{display:grid;width:100vw;height:100%;position:fixed;top:0;left:0;bottom:0;right:0;grid-template-columns:88% 12%;grid-template-rows:auto 1fr auto;justify-content:stretch;grid-template-areas:"header header" "main  main" "footer footer"}.navArea[_ngcontent-%COMP%]{display:none}}.mainArea[_ngcontent-%COMP%]{grid-area:main;justify-self:stretch;background-color:var(--background-default);color:var(--foreground-default);overflow:auto}.navArea[_ngcontent-%COMP%]{grid-area:nav;justify-self:stretch;background-color:var(--background-secondary);color:var(--foreground-default)}.footerArea[_ngcontent-%COMP%]{grid-area:footer;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.headerArea[_ngcontent-%COMP%]{grid-area:header;justify-self:stretch;background-color:var(--background-tertiary);color:var(--foreground-quaternary)}.mainView[_ngcontent-%COMP%]{height:100%;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}  ngb-modal-backdrop{z-index:1050!important}.modalClass[_ngcontent-%COMP%]{white-space:pre-line;background-color:var(--background-secondary);border-color:var(--background-tertiary);color:var(--foreground-default)}.rightAlign[_ngcontent-%COMP%]{float:right}.spaced[_ngcontent-%COMP%]{margin-left:.5em}.spaceBetween[_ngcontent-%COMP%]{justify-content:space-between!important}']}),t})(),s$=(()=>{class t{constructor(e,i,r,a,o,s,l,c,u){this.globalService=e,this.gameLoopService=i,this.lookupService=r,this.specializationService=a,this.themeService=o,this.raceLogicService=s,this.deploymentService=l,this.versionControlService=c,this.utilityService=u,this.title="Cultura",this.newGame=!0,this.saveTime=0,this.saveFrequency=20,this.racingSaveFrequency=60}ngOnInit(){var e=this,i=localStorage.getItem("culturaIdleGameData");if((null==i||0===i.length)&&(i=localStorage.getItem("gameData")),null!=i){var r=LZString.decompressFromBase64(i),a=JSON.parse(r);null!=a&&(this.newGame=!1,this.globalService.globalVar=r0(Yi,a),this.loadStartup())}this.deploymentService.setDevMode();var s=this.deploymentService.devModeActive;(this.newGame||this.deploymentService.forceStartNewGame)&&this.globalService.initializeGlobalVariables(),s&&(this.globalService.globalVar.tutorials.tutorialCompleted=!0,this.globalService.devModeInitialize(45,2)),this.versionControlService.updatePlayerVersion(),this.gameLoopService.gameUpdateEvent.subscribe(function(){var u=xr(function*(d){e.gameCheckup(d),e.saveTime+=d;var v=e.saveFrequency;e.globalService.globalVar.userIsRacing&&(v=e.racingSaveFrequency),e.saveTime>=v&&(e.saveTime=0,e.saveGame());performance.now()});return function(d){return u.apply(this,arguments)}}()),this.gameLoopService.Update()}gameCheckup(e){if(null!=this.globalService.globalVar.animals){this.globalService.globalVar.animals.filter(a=>a.isAvailable).forEach(a=>{a.canTrain=this.lookupService.canAnimalTrain(a)});var i=this.globalService.globalVar.animals.filter(a=>a.isAvailable&&null!=a.currentTraining&&a.canTrain);i.length>0&&i.forEach(a=>{var o;if(null!=a.currentTraining&&a.canTrain)for(a.currentTraining.timeTrained+=e,this.specializationService.handleAttractionRevenue(e,a);null!==a.currentTraining&&a.currentTraining.timeTrained>=a.currentTraining.timeToComplete;){var s=this.globalService.globalVar.barns.find(u=>u.barnNumber===a.associatedBarnNumber),l=0;null!=s&&s.barnUpgrades.specialization===Wt.BreedingGrounds&&(l=s.barnUpgrades.specializationLevel),null!=s&&s.barnUpgrades.specialization===Wt.ResearchCenter?this.specializationService.handleResearchCenterStatIncrease(a,s):a.increaseStatsFromCurrentTraining(),this.globalService.calculateAnimalRacingStats(a);var c=this.lookupService.getTrainingBreedGaugeIncrease(l,a);this.globalService.IncreaseAnimalBreedGauge(a,c),a.currentTraining.timeTrained-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining-=a.currentTraining.timeToComplete,a.currentTraining.trainingTimeRemaining<=0&&(a.currentTraining=null),null!=a.queuedTraining&&(null!==a.currentTraining&&a.currentTraining.trainingTimeRemaining>0&&(a.queuedTraining.timeTrained+=null===(o=a.currentTraining)||void 0===o?void 0:o.timeTrained),a.currentTraining=a.queuedTraining,a.queuedTraining=null)}});var r=this.globalService.globalVar.incubator;null!=r&&null!=r.assignedAnimal&&null!=r.assignedTrait&&(r.timeTrained+=e,r.timeTrained>=r.timeToComplete&&(r.assignedAnimal.trait=r.assignedTrait,this.globalService.calculateAnimalRacingStats(r.assignedAnimal),r.assignedAnimal.canTrain=!0,r.timeTrained=0,r.assignedAnimal=null,r.assignedTrait=null)),this.handleFreeRaceTimer(e),this.handleGrandPrix(e)}}handleGrandPrix(e){var i=!1;if(null!=this.globalService.globalVar.eventRaceData.currentEventEndDate&&new Date>this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1))return i=!0,this.globalService.globalVar.eventRaceData=new Nn,void(this.globalService.globalVar.eventRaceData.initialSetupComplete=!1);if(this.globalService.getTimeToEventRace()>0&&0===this.globalService.globalVar.eventRaceData.bonusTime&&(i=!0,this.globalService.globalVar.eventRaceData.isCatchingUp&&(i=!1),this.globalService.globalVar.eventRaceData.initialSetupComplete&&(this.globalService.globalVar.eventRaceData.remainingEventRaceTime>0&&new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1)?(this.globalService.globalVar.eventRaceData.segmentTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime,this.globalService.globalVar.eventRaceData.overallTimeCounter=this.globalService.globalVar.eventRaceData.remainingEventRaceTime):this.globalService.globalVar.eventRaceData.isCatchingUp||(this.globalService.globalVar.eventRaceData=new Nn)),!this.globalService.globalVar.eventRaceData.isCatchingUp&&0===this.globalService.globalVar.eventRaceData.remainingEventRaceTime))this.globalService.globalVar.eventRaceData.initialSetupComplete=!1;else{if(!this.globalService.globalVar.eventRaceData.initialSetupComplete){this.globalService.initialGrandPrixSetup("Z"),this.globalService.globalVar.eventRaceData.initialSetupComplete=!0,this.globalService.globalVar.notifications.isEventRaceNowActive=!0;var r=this.globalService.getCurrentEventStartEndDateTime(!1);r instanceof Date&&(this.globalService.globalVar.eventRaceData.currentEventStartDate=r);var a=this.globalService.getCurrentEventStartEndDateTime(!0);if(a instanceof Date&&(this.globalService.globalVar.eventRaceData.currentEventEndDate=a),this.globalService.globalVar.settings.get("autoStartEventRace")&&!1===this.globalService.globalVar.eventRaceData.isRunning){var o=this.globalService.globalVar.eventRaceData.grandPrixTimeLength-this.globalService.getRemainingEventRaceTime();if(this.globalService.globalVar.eventRaceData.segmentTimeCounter=o,this.globalService.globalVar.eventRaceData.overallTimeCounter=o,null!=(s=this.globalService.getGrandPrixRacingAnimal()).type){if(!this.globalService.globalVar.eventRaceData.animalData.some(v=>v.isCurrentlyRacing)){var l=this.globalService.globalVar.eventRaceData.animalData.find(v=>v.associatedAnimalType==s.type);void 0!==l&&(l.isCurrentlyRacing=!0)}this.globalService.globalVar.eventRaceData.isRunning=!0,this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.generateGrandPrixSegment(s),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s),0===this.globalService.globalVar.eventRaceData.currentRaceSegmentCount&&(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1)}}}if(this.globalService.globalVar.eventRaceData.isGrandPrixCompleted&&this.globalService.increaseGrandPrixRaceRank(),this.globalService.getTimeToEventRace()>0&&this.globalService.globalVar.eventRaceData.bonusTime>0&&(this.globalService.globalVar.eventRaceData.bonusTime-=e,this.globalService.globalVar.eventRaceData.bonusTime<=0&&(this.globalService.globalVar.eventRaceData.bonusTime=0)),this.globalService.globalVar.eventRaceData.isRunning){if(null==this.globalService.globalVar.animalDecks.find(v=>v.isEventDeck))return;i||(this.globalService.globalVar.eventRaceData.segmentTimeCounter+=e,this.globalService.globalVar.eventRaceData.overallTimeCounter+=e),this.globalService.globalVar.eventRaceData.remainingEventRaceTime=new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1)?0:this.globalService.getRemainingEventRaceTime();var u=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60;if(this.globalService.globalVar.eventRaceData.isCatchingUp=this.globalService.globalVar.eventRaceData.segmentTimeCounter>=2*u&&new Date<this.utilityService.addDaysToDate(this.globalService.globalVar.eventRaceData.currentEventEndDate,1),this.globalService.globalVar.eventRaceData.segmentTimeCounter>=u)if(this.globalService.globalVar.eventRaceData.currentRaceSegmentCount+=1,this.globalService.globalVar.eventRaceData.segmentTimeCounter-=u,this.globalService.globalVar.eventRaceData.distanceCovered+=this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.distanceCovered,this.globalService.globalVar.eventRaceData.previousRaceSegment=this.globalService.globalVar.eventRaceData.currentRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.previousRaceSegment.reduceExportSize(),this.globalService.globalVar.eventRaceData.distanceCovered>=this.globalService.globalVar.eventRaceData.totalDistance)this.globalService.globalVar.eventRaceData.distanceCovered=this.globalService.globalVar.eventRaceData.totalDistance,this.grandPrixRaceCompleted();else{var s;this.checkForEventRelayAnimal(this.globalService.globalVar.eventRaceData.isCatchingUp,this.globalService.globalVar.eventRaceData.segmentTimeCounter)&&this.resetEventAbilityUseCounts(),void 0!==(s=this.globalService.getGrandPrixRacingAnimal()).type&&void 0!==s.name&&(this.globalService.globalVar.eventRaceData.currentRaceSegment=this.globalService.globalVar.eventRaceData.nextRaceSegment.makeCopy(this.globalService.globalVar.eventRaceData.nextRaceSegment),this.globalService.globalVar.eventRaceData.currentRaceSegmentResult=this.raceLogicService.runRace(this.globalService.globalVar.eventRaceData.currentRaceSegment),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(s,this.globalService.globalVar.eventRaceData.isCatchingUp?this.globalService.globalVar.eventRaceData.segmentTimeCounter:void 0))}this.checkForGrandPrixRewards()}else this.globalService.globalVar.eventRaceData.isCatchingUp=!1;this.updateExhaustionAndMorale(e),this.updateWeatherCluster(e)}}grandPrixRaceCompleted(){this.globalService.globalVar.eventRaceData.isGrandPrixCompleted=!0,this.globalService.stopGrandPrixRace()}updateExhaustionAndMorale(e){this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter+=this.globalService.globalVar.eventRaceData.isCatchingUp?this.globalService.globalVar.eventRaceData.currentRaceSegmentResult.totalFramesPassed/60:e;var i=300,r=this.globalService.globalVar.modifiers.find(s=>"exhaustionGainTimerCapGrandPrixModifier"===s.text);null!=r&&(i=r.value);var a=.02,o=this.globalService.globalVar.modifiers.find(s=>"exhaustionGainGrandPrixModifier"===s.text);null!=o&&(a=o.value),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter>i&&(this.globalService.globalVar.eventRaceData.animalData.forEach(s=>{s.exhaustionStatReduction+=a,s.exhaustionStatReduction>=1&&(s.exhaustionStatReduction=1),s.morale<1&&(s.morale+=a)}),this.globalService.globalVar.eventRaceData.exhaustionMoraleUpdateCounter-=i)}updateWeatherCluster(e){this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter+=e;var i=7200,r=this.globalService.globalVar.modifiers.find(a=>"weatherClusterTimerCapGrandPrixModifier"===a.text);null!=r&&(i=r.value),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter>i&&(this.globalService.globalVar.eventRaceData.weatherCluster=this.globalService.getRandomGrandPrixWeatherCluster(void 0,this.globalService.globalVar.eventRaceData.weatherCluster),this.globalService.globalVar.eventRaceData.weatherClusterUpdateCounter-=i)}checkForEventRelayAnimal(e,i){var r=!1;if(this.globalService.globalVar.eventRaceData.animalData.some(w=>w.isSetToRelay))this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.isCurrentlyRacing=!1,w.isSetToRelay&&(w.isCurrentlyRacing=!0,w.isSetToRelay=!1,this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,r=!0,this.lookupService.getCourseTypeFromAnimalType(w.associatedAnimalType)===W.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0))});else{var a=this.globalService.getGrandPrixRacingAnimal(),o=this.globalService.getExhaustionOfAnimal(a.type),s=this.lookupService.getBreedLevelRequiredForGrandPrix();if(void 0!==o&&(o<.5||this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay)){this.globalService.globalVar.eventRaceData.triggerEnergyFloorRelay=!1;var l=this.globalService.globalVar.animalDecks.find(w=>w.isEventDeck);if(null!=l){var c=l.selectedAnimals.filter(w=>w.breedLevel>=s),u=[];if(l.isCourseOrderActive){for(var d=0;d<c.length;d++)if(l.courseTypeOrder.length>d){var v=l.courseTypeOrder[d],m=c.find(w=>w.raceCourseType===v);void 0!==m&&u.push(m)}}else c.forEach(w=>{u.push(w)});var b=.5;if(this.globalService.globalVar.doNotRelayBelowEnergyFloor&&(b=this.globalService.globalVar.relayEnergyFloor/100),console.log("Relay exhaustion floor: "+b),(u=u.filter(w=>{var R=this.globalService.globalVar.eventRaceData.animalData.find(q=>q.associatedAnimalType===w.type);if(null!=R){var z=this.globalService.globalVar.animals.find(q=>q.type===w.type);return R.exhaustionStatReduction>=b&&!this.globalService.shouldShowSlowSegmentWarning(z)||R.associatedAnimalType===a.type}return!1})).length>1){var y=0,C=!1;if(u.forEach(w=>{w.type===a.type&&(C=!0),C||(y+=1)}),C||(y=-1),this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.isCurrentlyRacing=!1}),y>-1){var k=y+1;k===u.length&&(k=0),this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.associatedAnimalType===u[k].type&&(w.isCurrentlyRacing=!0,r=!0,this.lookupService.getCourseTypeFromAnimalType(w.associatedAnimalType)===W.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(u[k],e?i:void 0))})}else this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.associatedAnimalType===u[0].type&&(w.isCurrentlyRacing=!0,r=!0,this.lookupService.getCourseTypeFromAnimalType(w.associatedAnimalType)===W.Mountain&&(this.globalService.globalVar.eventRaceData.mountainEndingY=0),this.globalService.globalVar.eventRaceData.nextRaceSegment=this.globalService.generateGrandPrixSegment(u[0],e?i:void 0))});this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1}else this.globalService.globalVar.eventRaceData.animalData.forEach(w=>{w.isCurrentlyRacing=!1}),console.log("reset race"),this.globalService.globalVar.eventRaceData.animalAlreadyPrepped=!1,this.globalService.globalVar.eventRaceData.isRunning=!1,this.globalService.globalVar.eventRaceData.overallTimeCounter-=this.globalService.globalVar.eventRaceData.segmentTimeCounter,this.globalService.globalVar.eventRaceData.segmentTimeCounter=0,this.globalService.globalVar.eventRaceData.currentRaceSegment.reduceExportSize()}}}return r}resetEventAbilityUseCounts(){null==this.globalService.globalVar.eventRaceData||null==this.globalService.globalVar.eventRaceData.eventAbilityData||this.globalService.globalVar.eventRaceData.eventAbilityData.resetUseCounts()}checkForGrandPrixRewards(){var e=this.globalService.globalVar.eventRaceData.distanceCovered,i=this.utilityService.getNumericValueOfCircuitRank(this.globalService.globalVar.eventRaceData.rank),r=100,a=this.globalService.globalVar.modifiers.find(pt=>"grandPrixCoinRewardModifier"===pt.text);null!=a&&(r=a.value);var o=5,s=this.globalService.globalVar.modifiers.find(pt=>"grandPrixRenownRewardModifier"===pt.text);null!=s&&(o=s.value);var l=5e6,c=this.globalService.globalVar.modifiers.find(pt=>"metersPerCoinsGrandPrixModifier"===pt.text);null!=c&&(l=c.value);var u=2e7,d=this.globalService.globalVar.modifiers.find(pt=>"metersPerRenownGrandPrixModifier"===pt.text);null!=d&&(u=d.value);var v=5e7,m=this.globalService.globalVar.modifiers.find(pt=>"grandPrixToken1MeterModifier"===pt.text);null!=m&&(v=m.value);var b=5e7,y=this.globalService.globalVar.modifiers.find(pt=>"grandPrixToken2MeterModifier"===pt.text);null!=y&&(b=y.value);var C=5e7,k=this.globalService.globalVar.modifiers.find(pt=>"grandPrixToken3MeterModifier"===pt.text);null!=k&&(C=k.value);var w=5e7,R=this.globalService.globalVar.modifiers.find(pt=>"grandPrixToken4MeterModifier"===pt.text);null!=R&&(w=R.value);var q=this.globalService.globalVar.eventRaceData.totalDistance/(u*i);if(e>=l*i*(this.globalService.globalVar.eventRaceData.coinRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.coinRewardsObtained<this.globalService.globalVar.eventRaceData.totalDistance/(l*i)&&(this.globalService.globalVar.eventRaceData.coinRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(j=this.globalService.globalVar.resources.find(pt=>"Coins"===pt.name))&&(j.amount+=r),this.lookupService.addResourceToResourceList(new ie("Coins",r,G.Resources),this.globalService.globalVar.previousEventRewards)),e>=u*i*(this.globalService.globalVar.eventRaceData.renownRewardsObtained+1)&&this.globalService.globalVar.eventRaceData.renownRewardsObtained<q&&(this.globalService.globalVar.eventRaceData.renownRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Renown"===J.name))&&(j.amount+=o),this.lookupService.addResourceToResourceList(new ie("Renown",o,G.Progression),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=0&&e>=v*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Tokens"===J.name))?j.amount+=1*i:this.globalService.globalVar.resources.push(new ie("Tokens",1*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Tokens",1*i,G.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=1&&e>=b*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Tokens"===J.name))?j.amount+=2*i:this.globalService.globalVar.resources.push(new ie("Tokens",2*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Tokens",2*i,G.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=2&&e>=C*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Tokens"===J.name))?j.amount+=3*i:this.globalService.globalVar.resources.push(new ie("Tokens",3*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Tokens",3*i,G.Resources),this.globalService.globalVar.previousEventRewards)),this.globalService.globalVar.eventRaceData.tokenRewardsObtained<=3&&e>=w*i&&(this.globalService.globalVar.eventRaceData.tokenRewardsObtained+=1,this.globalService.globalVar.eventRaceData.remainingRewards-=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Tokens"===J.name))?j.amount+=4*i:this.globalService.globalVar.resources.push(new ie("Tokens",4*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Tokens",4*i,G.Resources),this.globalService.globalVar.previousEventRewards)),1===i){var j,ct=100;e>=25e3*i&&0===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Strawberries"===J.name))?j.amount+=ct*i:this.globalService.globalVar.resources.push(new ie("Strawberries",ct*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Strawberries",ct*i,G.Resources),this.globalService.globalVar.previousEventRewards)),e>=5e4*i&&1===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Apples"===J.name))?j.amount+=ct*i:this.globalService.globalVar.resources.push(new ie("Apples",ct*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Apples",ct*i,G.Resources),this.globalService.globalVar.previousEventRewards)),e>=75e3*i&&2===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Oranges"===J.name))?j.amount+=ct*i:this.globalService.globalVar.resources.push(new ie("Oranges",ct*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Oranges",ct*i,G.Resources),this.globalService.globalVar.previousEventRewards)),e>=1e5*i&&3===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Mangoes"===J.name))?j.amount+=5*i:this.globalService.globalVar.resources.push(new ie("Mangoes",5*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Mangoes",5*i,G.Resources),this.globalService.globalVar.previousEventRewards)),e>=25e4*i&&4===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Turnips"===J.name))?j.amount+=ct*i:this.globalService.globalVar.resources.push(new ie("Turnips",ct*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Turnips",ct*i,G.Resources),this.globalService.globalVar.previousEventRewards)),e>=5e5*i&&5===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Bananas"===J.name))?j.amount+=ct*i:this.globalService.globalVar.resources.push(new ie("Bananas",ct*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Bananas",ct*i,G.Resources),this.globalService.globalVar.previousEventRewards)),e>=75e4*i&&6===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Carrots"===J.name))?j.amount+=ct*i:this.globalService.globalVar.resources.push(new ie("Carrots",ct*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Carrots",ct*i,G.Resources),this.globalService.globalVar.previousEventRewards)),e>=1e6*i&&7===this.globalService.globalVar.eventRaceData.foodRewardsObtained&&(this.globalService.globalVar.eventRaceData.remainingRewards-=1,this.globalService.globalVar.eventRaceData.foodRewardsObtained+=1,null!=(j=this.globalService.globalVar.resources.find(J=>"Mangoes"===J.name))?j.amount+=10*i:this.globalService.globalVar.resources.push(new ie("Mangoes",10*i,G.Resources)),this.lookupService.addResourceToResourceList(new ie("Mangoes",10*i,G.Resources),this.globalService.globalVar.previousEventRewards))}}handleFreeRaceTimer(e){if(this.globalService.globalVar.freeRaceTimePeriodCounter+=e,!this.globalService.globalVar.userIsRacing){var i=300,r=this.globalService.globalVar.modifiers.find(s=>"freeRacesTimePeriodModifier"===s.text);void 0!==r&&(i=r.value);var a=3600,o=this.globalService.globalVar.modifiers.find(s=>"autoFreeRacesMaxIdleTimePeriodModifier"===s.text);for(void 0!==o&&(a=o.value);this.globalService.globalVar.freeRaceTimePeriodCounter>=i&&a>0;)this.globalService.globalVar.freeRaceTimePeriodCounter>a&&(this.globalService.globalVar.freeRaceTimePeriodCounter=a),this.globalService.globalVar.freeRaceTimePeriodCounter-=i,a-=i,this.globalService.globalVar.freeRaceCounter=0,this.globalService.globalVar.autoFreeRaceCounter=0,this.handleAutoFreeRace(e)}}handleAutoFreeRace(e){var i=this.lookupService.getResourceByName("Team Manager");if(null==i&&(i=0),0!==i&&this.globalService.globalVar.animalDecks.some(d=>d.autoRunFreeRace)){var r=this.globalService.globalVar.animalDecks.find(d=>d.autoRunFreeRace);if(null!=r)for(var a=i-this.globalService.globalVar.autoFreeRaceCounter,o=this.lookupService.getTotalFreeRacesPerPeriod(),s=0;s<a;s++){if(this.globalService.globalVar.freeRaceCounter>=o)return;this.globalService.globalVar.autoFreeRaceCounter+=1,this.globalService.globalVar.freeRaceCounter+=1;var l=this.globalService.generateFreeRace(),c=!0;l.raceLegs.forEach(d=>{(null==r?void 0:r.selectedAnimals.some(v=>v.raceCourseType===d.courseType))||(c=!1)}),c&&this.raceLogicService.runRace(l)}}}saveGame(){if("undefined"!=typeof Worker){const r=new Worker(Q.tu(new URL(Q.p+Q.u(151),Q.b)));r.onmessage=({data:a})=>{localStorage.setItem("culturaIdleGameData",a),r.terminate()},r.postMessage(this.globalService.globalVar)}else{var e=JSON.stringify(this.globalService.globalVar),i=LZString.compressToBase64(e);localStorage.setItem("culturaIdleGameData",i)}}loadStartup(){var e=this.globalService.globalVar.settings.get("theme");null!=e&&this.themeService.setActiveTheme(e)}}return t.\u0275fac=function(e){return new(e||t)(P(Et),P(An),P(bi),P(a0),P(Ul),P(o0),P(VD),P(s0),P(kn))},t.\u0275cmp=_t({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"grayTheme"]],template:function(e,i){1&e&&(f(0,"div",0),D(1,"app-main"),h(),D(2,"router-outlet"))},directives:[o$,Nm],styles:[""]}),t})(),l$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=ki({type:t,bootstrap:[s$]}),t.\u0275inj=Ti({providers:[Et,Ul],imports:[[iF,M5,Z6,Rr,yT,g3]]}),t})();(function VV(){MS=!1})(),eF().bootstrapModule(l$).catch(t=>console.error(t))},7466:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(8319),Q(9493),Q(7865),Q(3057),function(){var H=K,oe=H.lib.BlockCipher,ge=H.algo,ee=[],re=[],V=[],M=[],N=[],E=[],O=[],A=[],F=[],$=[];!function(){for(var U=[],X=0;X<256;X++)U[X]=X<128?X<<1:X<<1^283;var fe=0,ne=0;for(X=0;X<256;X++){var le=ne^ne<<1^ne<<2^ne<<3^ne<<4;ee[fe]=le=le>>>8^255&le^99,re[le]=fe;var Ne,he=U[fe],Re=U[he],Ce=U[Re];V[fe]=(Ne=257*U[le]^16843008*le)<<24|Ne>>>8,M[fe]=Ne<<16|Ne>>>16,N[fe]=Ne<<8|Ne>>>24,E[fe]=Ne,O[le]=(Ne=16843009*Ce^65537*Re^257*he^16843008*fe)<<24|Ne>>>8,A[le]=Ne<<16|Ne>>>16,F[le]=Ne<<8|Ne>>>24,$[le]=Ne,fe?(fe=he^U[U[U[Ce^he]]],ne^=U[U[ne]]):fe=ne=1}}();var se=[0,1,2,4,8,16,32,64,128,27,54],ae=ge.AES=oe.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var X=this._keyPriorReset=this._key,fe=X.words,ne=X.sigBytes/4,he=4*((this._nRounds=ne+6)+1),Re=this._keySchedule=[],Ce=0;Ce<he;Ce++)Ce<ne?Re[Ce]=fe[Ce]:(U=Re[Ce-1],Ce%ne?ne>6&&Ce%ne==4&&(U=ee[U>>>24]<<24|ee[U>>>16&255]<<16|ee[U>>>8&255]<<8|ee[255&U]):(U=ee[(U=U<<8|U>>>24)>>>24]<<24|ee[U>>>16&255]<<16|ee[U>>>8&255]<<8|ee[255&U],U^=se[Ce/ne|0]<<24),Re[Ce]=Re[Ce-ne]^U);for(var Ne=this._invKeySchedule=[],He=0;He<he;He++){if(Ce=he-He,He%4)var U=Re[Ce];else U=Re[Ce-4];Ne[He]=He<4||Ce<=4?U:O[ee[U>>>24]]^A[ee[U>>>16&255]]^F[ee[U>>>8&255]]^$[ee[255&U]]}}},encryptBlock:function(U,X){this._doCryptBlock(U,X,this._keySchedule,V,M,N,E,ee)},decryptBlock:function(U,X){var fe=U[X+1];U[X+1]=U[X+3],U[X+3]=fe,this._doCryptBlock(U,X,this._invKeySchedule,O,A,F,$,re),fe=U[X+1],U[X+1]=U[X+3],U[X+3]=fe},_doCryptBlock:function(U,X,fe,ne,le,he,Re,Ce){for(var Ne=this._nRounds,He=U[X]^fe[0],me=U[X+1]^fe[1],Ae=U[X+2]^fe[2],Be=U[X+3]^fe[3],Pe=4,ft=1;ft<Ne;ft++){var Le=ne[He>>>24]^le[me>>>16&255]^he[Ae>>>8&255]^Re[255&Be]^fe[Pe++],Gt=ne[me>>>24]^le[Ae>>>16&255]^he[Be>>>8&255]^Re[255&He]^fe[Pe++],ti=ne[Ae>>>24]^le[Be>>>16&255]^he[He>>>8&255]^Re[255&me]^fe[Pe++],De=ne[Be>>>24]^le[He>>>16&255]^he[me>>>8&255]^Re[255&Ae]^fe[Pe++];He=Le,me=Gt,Ae=ti,Be=De}Le=(Ce[He>>>24]<<24|Ce[me>>>16&255]<<16|Ce[Ae>>>8&255]<<8|Ce[255&Be])^fe[Pe++],Gt=(Ce[me>>>24]<<24|Ce[Ae>>>16&255]<<16|Ce[Be>>>8&255]<<8|Ce[255&He])^fe[Pe++],ti=(Ce[Ae>>>24]<<24|Ce[Be>>>16&255]<<16|Ce[He>>>8&255]<<8|Ce[255&me])^fe[Pe++],De=(Ce[Be>>>24]<<24|Ce[He>>>16&255]<<16|Ce[me>>>8&255]<<8|Ce[255&Ae])^fe[Pe++],U[X]=Le,U[X+1]=Gt,U[X+2]=ti,U[X+3]=De},keySize:8});H.AES=oe._createHelper(ae)}(),K.AES)},3057:function(Te,xe,Q){var te,oe,ge,ee,re,V,N,O,A,$,se,ae,X,ne,he,Re,Ne,He,K;Te.exports=(K=Q(7585),Q(7865),void(K.lib.Cipher||(te=K,oe=te.lib,ge=oe.Base,ee=oe.WordArray,re=oe.BufferedBlockAlgorithm,V=te.enc,N=V.Base64,O=te.algo.EvpKDF,A=oe.Cipher=re.extend({cfg:ge.extend(),createEncryptor:function(me,Ae){return this.create(this._ENC_XFORM_MODE,me,Ae)},createDecryptor:function(me,Ae){return this.create(this._DEC_XFORM_MODE,me,Ae)},init:function(me,Ae,Be){this.cfg=this.cfg.extend(Be),this._xformMode=me,this._key=Ae,this.reset()},reset:function(){re.reset.call(this),this._doReset()},process:function(me){return this._append(me),this._process()},finalize:function(me){return me&&this._append(me),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function me(Ae){return"string"==typeof Ae?He:Re}return function(Ae){return{encrypt:function(Be,Pe,ft){return me(Pe).encrypt(Ae,Be,Pe,ft)},decrypt:function(Be,Pe,ft){return me(Pe).decrypt(Ae,Be,Pe,ft)}}}}()}),oe.StreamCipher=A.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),$=te.mode={},se=oe.BlockCipherMode=ge.extend({createEncryptor:function(me,Ae){return this.Encryptor.create(me,Ae)},createDecryptor:function(me,Ae){return this.Decryptor.create(me,Ae)},init:function(me,Ae){this._cipher=me,this._iv=Ae}}),ae=$.CBC=function(){var me=se.extend();function Ae(Be,Pe,ft){var Le,Gt=this._iv;Gt?(Le=Gt,this._iv=undefined):Le=this._prevBlock;for(var ti=0;ti<ft;ti++)Be[Pe+ti]^=Le[ti]}return me.Encryptor=me.extend({processBlock:function(Be,Pe){var ft=this._cipher,Le=ft.blockSize;Ae.call(this,Be,Pe,Le),ft.encryptBlock(Be,Pe),this._prevBlock=Be.slice(Pe,Pe+Le)}}),me.Decryptor=me.extend({processBlock:function(Be,Pe){var ft=this._cipher,Le=ft.blockSize,Gt=Be.slice(Pe,Pe+Le);ft.decryptBlock(Be,Pe),Ae.call(this,Be,Pe,Le),this._prevBlock=Gt}}),me}(),X=(te.pad={}).Pkcs7={pad:function(me,Ae){for(var Be=4*Ae,Pe=Be-me.sigBytes%Be,ft=Pe<<24|Pe<<16|Pe<<8|Pe,Le=[],Gt=0;Gt<Pe;Gt+=4)Le.push(ft);var ti=ee.create(Le,Pe);me.concat(ti)},unpad:function(me){me.sigBytes-=255&me.words[me.sigBytes-1>>>2]}},oe.BlockCipher=A.extend({cfg:A.cfg.extend({mode:ae,padding:X}),reset:function(){var me;A.reset.call(this);var Ae=this.cfg,Be=Ae.iv,Pe=Ae.mode;this._xformMode==this._ENC_XFORM_MODE?me=Pe.createEncryptor:(me=Pe.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==me?this._mode.init(this,Be&&Be.words):(this._mode=me.call(Pe,this,Be&&Be.words),this._mode.__creator=me)},_doProcessBlock:function(me,Ae){this._mode.processBlock(me,Ae)},_doFinalize:function(){var me,Ae=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Ae.pad(this._data,this.blockSize),me=this._process(!0)):(me=this._process(!0),Ae.unpad(me)),me},blockSize:4}),ne=oe.CipherParams=ge.extend({init:function(me){this.mixIn(me)},toString:function(me){return(me||this.formatter).stringify(this)}}),he=(te.format={}).OpenSSL={stringify:function(me){var Be=me.ciphertext,Pe=me.salt;return(Pe?ee.create([1398893684,1701076831]).concat(Pe).concat(Be):Be).toString(N)},parse:function(me){var Ae,Be=N.parse(me),Pe=Be.words;return 1398893684==Pe[0]&&1701076831==Pe[1]&&(Ae=ee.create(Pe.slice(2,4)),Pe.splice(0,4),Be.sigBytes-=16),ne.create({ciphertext:Be,salt:Ae})}},Re=oe.SerializableCipher=ge.extend({cfg:ge.extend({format:he}),encrypt:function(me,Ae,Be,Pe){Pe=this.cfg.extend(Pe);var ft=me.createEncryptor(Be,Pe),Le=ft.finalize(Ae),Gt=ft.cfg;return ne.create({ciphertext:Le,key:Be,iv:Gt.iv,algorithm:me,mode:Gt.mode,padding:Gt.padding,blockSize:me.blockSize,formatter:Pe.format})},decrypt:function(me,Ae,Be,Pe){return Pe=this.cfg.extend(Pe),Ae=this._parse(Ae,Pe.format),me.createDecryptor(Be,Pe).finalize(Ae.ciphertext)},_parse:function(me,Ae){return"string"==typeof me?Ae.parse(me,this):me}}),Ne=(te.kdf={}).OpenSSL={execute:function(me,Ae,Be,Pe){Pe||(Pe=ee.random(8));var ft=O.create({keySize:Ae+Be}).compute(me,Pe),Le=ee.create(ft.words.slice(Ae),4*Be);return ft.sigBytes=4*Ae,ne.create({key:ft,iv:Le,salt:Pe})}},He=oe.PasswordBasedCipher=Re.extend({cfg:Re.cfg.extend({kdf:Ne}),encrypt:function(me,Ae,Be,Pe){var ft=(Pe=this.cfg.extend(Pe)).kdf.execute(Be,me.keySize,me.ivSize);Pe.iv=ft.iv;var Le=Re.encrypt.call(this,me,Ae,ft.key,Pe);return Le.mixIn(ft),Le},decrypt:function(me,Ae,Be,Pe){Pe=this.cfg.extend(Pe),Ae=this._parse(Ae,Pe.format);var ft=Pe.kdf.execute(Be,me.keySize,me.ivSize,Ae.salt);return Pe.iv=ft.iv,Re.decrypt.call(this,me,Ae,ft.key,Pe)}}))))},7585:function(Te,xe,Q){var K;Te.exports=(K=K||function(H,te){var oe;if("undefined"!=typeof window&&window.crypto&&(oe=window.crypto),"undefined"!=typeof self&&self.crypto&&(oe=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(oe=globalThis.crypto),!oe&&"undefined"!=typeof window&&window.msCrypto&&(oe=window.msCrypto),!oe&&"undefined"!=typeof global&&global.crypto&&(oe=global.crypto),!oe)try{oe=Q(2480)}catch(U){}var ge=function(){if(oe){if("function"==typeof oe.getRandomValues)try{return oe.getRandomValues(new Uint32Array(1))[0]}catch(U){}if("function"==typeof oe.randomBytes)try{return oe.randomBytes(4).readInt32LE()}catch(U){}}throw new Error("Native crypto module could not be used to get secure random number.")},ee=Object.create||function(){function U(){}return function(X){var fe;return U.prototype=X,fe=new U,U.prototype=null,fe}}(),re={},V=re.lib={},M=V.Base={extend:function(U){var X=ee(this);return U&&X.mixIn(U),(!X.hasOwnProperty("init")||this.init===X.init)&&(X.init=function(){X.$super.init.apply(this,arguments)}),X.init.prototype=X,X.$super=this,X},create:function(){var U=this.extend();return U.init.apply(U,arguments),U},init:function(){},mixIn:function(U){for(var X in U)U.hasOwnProperty(X)&&(this[X]=U[X]);U.hasOwnProperty("toString")&&(this.toString=U.toString)},clone:function(){return this.init.prototype.extend(this)}},N=V.WordArray=M.extend({init:function(U,X){U=this.words=U||[],this.sigBytes=null!=X?X:4*U.length},toString:function(U){return(U||O).stringify(this)},concat:function(U){var X=this.words,fe=U.words,ne=this.sigBytes,le=U.sigBytes;if(this.clamp(),ne%4)for(var he=0;he<le;he++)X[ne+he>>>2]|=(fe[he>>>2]>>>24-he%4*8&255)<<24-(ne+he)%4*8;else for(var Ce=0;Ce<le;Ce+=4)X[ne+Ce>>>2]=fe[Ce>>>2];return this.sigBytes+=le,this},clamp:function(){var U=this.words,X=this.sigBytes;U[X>>>2]&=4294967295<<32-X%4*8,U.length=H.ceil(X/4)},clone:function(){var U=M.clone.call(this);return U.words=this.words.slice(0),U},random:function(U){for(var X=[],fe=0;fe<U;fe+=4)X.push(ge());return new N.init(X,U)}}),E=re.enc={},O=E.Hex={stringify:function(U){for(var X=U.words,fe=U.sigBytes,ne=[],le=0;le<fe;le++){var he=X[le>>>2]>>>24-le%4*8&255;ne.push((he>>>4).toString(16)),ne.push((15&he).toString(16))}return ne.join("")},parse:function(U){for(var X=U.length,fe=[],ne=0;ne<X;ne+=2)fe[ne>>>3]|=parseInt(U.substr(ne,2),16)<<24-ne%8*4;return new N.init(fe,X/2)}},A=E.Latin1={stringify:function(U){for(var X=U.words,fe=U.sigBytes,ne=[],le=0;le<fe;le++)ne.push(String.fromCharCode(X[le>>>2]>>>24-le%4*8&255));return ne.join("")},parse:function(U){for(var X=U.length,fe=[],ne=0;ne<X;ne++)fe[ne>>>2]|=(255&U.charCodeAt(ne))<<24-ne%4*8;return new N.init(fe,X)}},F=E.Utf8={stringify:function(U){try{return decodeURIComponent(escape(A.stringify(U)))}catch(X){throw new Error("Malformed UTF-8 data")}},parse:function(U){return A.parse(unescape(encodeURIComponent(U)))}},$=V.BufferedBlockAlgorithm=M.extend({reset:function(){this._data=new N.init,this._nDataBytes=0},_append:function(U){"string"==typeof U&&(U=F.parse(U)),this._data.concat(U),this._nDataBytes+=U.sigBytes},_process:function(U){var X,fe=this._data,ne=fe.words,le=fe.sigBytes,he=this.blockSize,Ce=le/(4*he),Ne=(Ce=U?H.ceil(Ce):H.max((0|Ce)-this._minBufferSize,0))*he,He=H.min(4*Ne,le);if(Ne){for(var me=0;me<Ne;me+=he)this._doProcessBlock(ne,me);X=ne.splice(0,Ne),fe.sigBytes-=He}return new N.init(X,He)},clone:function(){var U=M.clone.call(this);return U._data=this._data.clone(),U},_minBufferSize:0}),ae=(V.Hasher=$.extend({cfg:M.extend(),init:function(U){this.cfg=this.cfg.extend(U),this.reset()},reset:function(){$.reset.call(this),this._doReset()},update:function(U){return this._append(U),this._process(),this},finalize:function(U){return U&&this._append(U),this._doFinalize()},blockSize:16,_createHelper:function(U){return function(X,fe){return new U.init(fe).finalize(X)}},_createHmacHelper:function(U){return function(X,fe){return new ae.HMAC.init(U,fe).finalize(X)}}}),re.algo={});return re}(Math),K)},8319:function(Te,xe,Q){var K,oe;Te.exports=(K=Q(7585),oe=K.lib.WordArray,K.enc.Base64={stringify:function(V){var M=V.words,N=V.sigBytes,E=this._map;V.clamp();for(var O=[],A=0;A<N;A+=3)for(var ae=(M[A>>>2]>>>24-A%4*8&255)<<16|(M[A+1>>>2]>>>24-(A+1)%4*8&255)<<8|M[A+2>>>2]>>>24-(A+2)%4*8&255,U=0;U<4&&A+.75*U<N;U++)O.push(E.charAt(ae>>>6*(3-U)&63));var X=E.charAt(64);if(X)for(;O.length%4;)O.push(X);return O.join("")},parse:function(V){var M=V.length,N=this._map,E=this._reverseMap;if(!E){E=this._reverseMap=[];for(var O=0;O<N.length;O++)E[N.charCodeAt(O)]=O}var A=N.charAt(64);if(A){var F=V.indexOf(A);-1!==F&&(M=F)}return function re(V,M,N){for(var E=[],O=0,A=0;A<M;A++)if(A%4){var F=N[V.charCodeAt(A-1)]<<A%4*2,$=N[V.charCodeAt(A)]>>>6-A%4*2;E[O>>>2]|=(F|$)<<24-O%4*8,O++}return oe.create(E,O)}(V,M,E)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},K.enc.Base64)},4410:function(Te,xe,Q){var K,oe;Te.exports=(K=Q(7585),oe=K.lib.WordArray,K.enc.Base64url={stringify:function(V,M=!0){var N=V.words,E=V.sigBytes,O=M?this._safe_map:this._map;V.clamp();for(var A=[],F=0;F<E;F+=3)for(var U=(N[F>>>2]>>>24-F%4*8&255)<<16|(N[F+1>>>2]>>>24-(F+1)%4*8&255)<<8|N[F+2>>>2]>>>24-(F+2)%4*8&255,X=0;X<4&&F+.75*X<E;X++)A.push(O.charAt(U>>>6*(3-X)&63));var fe=O.charAt(64);if(fe)for(;A.length%4;)A.push(fe);return A.join("")},parse:function(V,M=!0){var N=V.length,E=M?this._safe_map:this._map,O=this._reverseMap;if(!O){O=this._reverseMap=[];for(var A=0;A<E.length;A++)O[E.charCodeAt(A)]=A}var F=E.charAt(64);if(F){var $=V.indexOf(F);-1!==$&&(N=$)}return function re(V,M,N){for(var E=[],O=0,A=0;A<M;A++)if(A%4){var F=N[V.charCodeAt(A-1)]<<A%4*2,$=N[V.charCodeAt(A)]>>>6-A%4*2;E[O>>>2]|=(F|$)<<24-O%4*8,O++}return oe.create(E,O)}(V,N,O)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},K.enc.Base64url)},9012:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),function(){var oe=K.lib.WordArray,ge=K.enc;function re(V){return V<<8&4278255360|V>>>8&16711935}ge.Utf16=ge.Utf16BE={stringify:function(V){for(var M=V.words,N=V.sigBytes,E=[],O=0;O<N;O+=2)E.push(String.fromCharCode(M[O>>>2]>>>16-O%4*8&65535));return E.join("")},parse:function(V){for(var M=V.length,N=[],E=0;E<M;E++)N[E>>>1]|=V.charCodeAt(E)<<16-E%2*16;return oe.create(N,2*M)}},ge.Utf16LE={stringify:function(V){for(var M=V.words,N=V.sigBytes,E=[],O=0;O<N;O+=2){var A=re(M[O>>>2]>>>16-O%4*8&65535);E.push(String.fromCharCode(A))}return E.join("")},parse:function(V){for(var M=V.length,N=[],E=0;E<M;E++)N[E>>>1]|=re(V.charCodeAt(E)<<16-E%2*16);return oe.create(N,2*M)}}}(),K.enc.Utf16)},7865:function(Te,xe,Q){var H,te,oe,ge,ee,V,K;Te.exports=(K=Q(7585),Q(5162),Q(3764),ge=(te=(H=K).lib).WordArray,V=(ee=H.algo).EvpKDF=(oe=te.Base).extend({cfg:oe.extend({keySize:4,hasher:ee.MD5,iterations:1}),init:function(M){this.cfg=this.cfg.extend(M)},compute:function(M,N){for(var E,O=this.cfg,A=O.hasher.create(),F=ge.create(),$=F.words,se=O.keySize,ae=O.iterations;$.length<se;){E&&A.update(E),E=A.update(M).finalize(N),A.reset();for(var U=1;U<ae;U++)E=A.finalize(E),A.reset();F.concat(E)}return F.sigBytes=4*se,F}}),H.EvpKDF=function(M,N,E){return V.create(E).compute(M,N)},K.EvpKDF)},1847:function(Te,xe,Q){var K,ge,re;Te.exports=(K=Q(7585),Q(3057),ge=K.lib.CipherParams,re=K.enc.Hex,K.format.Hex={stringify:function(N){return N.ciphertext.toString(re)},parse:function(N){var E=re.parse(N);return ge.create({ciphertext:E})}},K.format.Hex)},3764:function(Te,xe,Q){var K,ee;Te.exports=(K=Q(7585),ee=K.enc.Utf8,void(K.algo.HMAC=K.lib.Base.extend({init:function(M,N){M=this._hasher=new M.init,"string"==typeof N&&(N=ee.parse(N));var E=M.blockSize,O=4*E;N.sigBytes>O&&(N=M.finalize(N)),N.clamp();for(var A=this._oKey=N.clone(),F=this._iKey=N.clone(),$=A.words,se=F.words,ae=0;ae<E;ae++)$[ae]^=1549556828,se[ae]^=909522486;A.sigBytes=F.sigBytes=O,this.reset()},reset:function(){var M=this._hasher;M.reset(),M.update(this._iKey)},update:function(M){return this._hasher.update(M),this},finalize:function(M){var N=this._hasher,E=N.finalize(M);return N.reset(),N.finalize(this._oKey.clone().concat(E))}})))},7206:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(401),Q(7412),Q(9012),Q(8319),Q(4410),Q(9493),Q(5162),Q(1817),Q(8769),Q(3351),Q(6787),Q(1971),Q(4973),Q(3764),Q(8812),Q(7865),Q(3057),Q(4424),Q(6635),Q(3592),Q(9354),Q(7934),Q(4413),Q(4630),Q(187),Q(1691),Q(3237),Q(1847),Q(7466),Q(7243),Q(486),Q(8182),Q(3544),K)},7412:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),function(){if("function"==typeof ArrayBuffer){var oe=K.lib.WordArray,ge=oe.init,ee=oe.init=function(re){if(re instanceof ArrayBuffer&&(re=new Uint8Array(re)),(re instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&re instanceof Uint8ClampedArray||re instanceof Int16Array||re instanceof Uint16Array||re instanceof Int32Array||re instanceof Uint32Array||re instanceof Float32Array||re instanceof Float64Array)&&(re=new Uint8Array(re.buffer,re.byteOffset,re.byteLength)),re instanceof Uint8Array){for(var V=re.byteLength,M=[],N=0;N<V;N++)M[N>>>2]|=re[N]<<24-N%4*8;ge.call(this,M,V)}else ge.apply(this,arguments)};ee.prototype=oe}}(),K.lib.WordArray)},9493:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),function(H){var te=K,oe=te.lib,ge=oe.WordArray,ee=oe.Hasher,re=te.algo,V=[];!function(){for(var F=0;F<64;F++)V[F]=4294967296*H.abs(H.sin(F+1))|0}();var M=re.MD5=ee.extend({_doReset:function(){this._hash=new ge.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(F,$){for(var se=0;se<16;se++){var ae=$+se,U=F[ae];F[ae]=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8)}var X=this._hash.words,fe=F[$+0],ne=F[$+1],le=F[$+2],he=F[$+3],Re=F[$+4],Ce=F[$+5],Ne=F[$+6],He=F[$+7],me=F[$+8],Ae=F[$+9],Be=F[$+10],Pe=F[$+11],ft=F[$+12],Le=F[$+13],Gt=F[$+14],ti=F[$+15],De=X[0],Oe=X[1],we=X[2],ke=X[3];De=N(De,Oe,we,ke,fe,7,V[0]),ke=N(ke,De,Oe,we,ne,12,V[1]),we=N(we,ke,De,Oe,le,17,V[2]),Oe=N(Oe,we,ke,De,he,22,V[3]),De=N(De,Oe,we,ke,Re,7,V[4]),ke=N(ke,De,Oe,we,Ce,12,V[5]),we=N(we,ke,De,Oe,Ne,17,V[6]),Oe=N(Oe,we,ke,De,He,22,V[7]),De=N(De,Oe,we,ke,me,7,V[8]),ke=N(ke,De,Oe,we,Ae,12,V[9]),we=N(we,ke,De,Oe,Be,17,V[10]),Oe=N(Oe,we,ke,De,Pe,22,V[11]),De=N(De,Oe,we,ke,ft,7,V[12]),ke=N(ke,De,Oe,we,Le,12,V[13]),we=N(we,ke,De,Oe,Gt,17,V[14]),De=E(De,Oe=N(Oe,we,ke,De,ti,22,V[15]),we,ke,ne,5,V[16]),ke=E(ke,De,Oe,we,Ne,9,V[17]),we=E(we,ke,De,Oe,Pe,14,V[18]),Oe=E(Oe,we,ke,De,fe,20,V[19]),De=E(De,Oe,we,ke,Ce,5,V[20]),ke=E(ke,De,Oe,we,Be,9,V[21]),we=E(we,ke,De,Oe,ti,14,V[22]),Oe=E(Oe,we,ke,De,Re,20,V[23]),De=E(De,Oe,we,ke,Ae,5,V[24]),ke=E(ke,De,Oe,we,Gt,9,V[25]),we=E(we,ke,De,Oe,he,14,V[26]),Oe=E(Oe,we,ke,De,me,20,V[27]),De=E(De,Oe,we,ke,Le,5,V[28]),ke=E(ke,De,Oe,we,le,9,V[29]),we=E(we,ke,De,Oe,He,14,V[30]),De=O(De,Oe=E(Oe,we,ke,De,ft,20,V[31]),we,ke,Ce,4,V[32]),ke=O(ke,De,Oe,we,me,11,V[33]),we=O(we,ke,De,Oe,Pe,16,V[34]),Oe=O(Oe,we,ke,De,Gt,23,V[35]),De=O(De,Oe,we,ke,ne,4,V[36]),ke=O(ke,De,Oe,we,Re,11,V[37]),we=O(we,ke,De,Oe,He,16,V[38]),Oe=O(Oe,we,ke,De,Be,23,V[39]),De=O(De,Oe,we,ke,Le,4,V[40]),ke=O(ke,De,Oe,we,fe,11,V[41]),we=O(we,ke,De,Oe,he,16,V[42]),Oe=O(Oe,we,ke,De,Ne,23,V[43]),De=O(De,Oe,we,ke,Ae,4,V[44]),ke=O(ke,De,Oe,we,ft,11,V[45]),we=O(we,ke,De,Oe,ti,16,V[46]),De=A(De,Oe=O(Oe,we,ke,De,le,23,V[47]),we,ke,fe,6,V[48]),ke=A(ke,De,Oe,we,He,10,V[49]),we=A(we,ke,De,Oe,Gt,15,V[50]),Oe=A(Oe,we,ke,De,Ce,21,V[51]),De=A(De,Oe,we,ke,ft,6,V[52]),ke=A(ke,De,Oe,we,he,10,V[53]),we=A(we,ke,De,Oe,Be,15,V[54]),Oe=A(Oe,we,ke,De,ne,21,V[55]),De=A(De,Oe,we,ke,me,6,V[56]),ke=A(ke,De,Oe,we,ti,10,V[57]),we=A(we,ke,De,Oe,Ne,15,V[58]),Oe=A(Oe,we,ke,De,Le,21,V[59]),De=A(De,Oe,we,ke,Re,6,V[60]),ke=A(ke,De,Oe,we,Pe,10,V[61]),we=A(we,ke,De,Oe,le,15,V[62]),Oe=A(Oe,we,ke,De,Ae,21,V[63]),X[0]=X[0]+De|0,X[1]=X[1]+Oe|0,X[2]=X[2]+we|0,X[3]=X[3]+ke|0},_doFinalize:function(){var F=this._data,$=F.words,se=8*this._nDataBytes,ae=8*F.sigBytes;$[ae>>>5]|=128<<24-ae%32;var U=H.floor(se/4294967296),X=se;$[15+(ae+64>>>9<<4)]=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),$[14+(ae+64>>>9<<4)]=16711935&(X<<8|X>>>24)|4278255360&(X<<24|X>>>8),F.sigBytes=4*($.length+1),this._process();for(var fe=this._hash,ne=fe.words,le=0;le<4;le++){var he=ne[le];ne[le]=16711935&(he<<8|he>>>24)|4278255360&(he<<24|he>>>8)}return fe},clone:function(){var F=ee.clone.call(this);return F._hash=this._hash.clone(),F}});function N(F,$,se,ae,U,X,fe){var ne=F+($&se|~$&ae)+U+fe;return(ne<<X|ne>>>32-X)+$}function E(F,$,se,ae,U,X,fe){var ne=F+($&ae|se&~ae)+U+fe;return(ne<<X|ne>>>32-X)+$}function O(F,$,se,ae,U,X,fe){var ne=F+($^se^ae)+U+fe;return(ne<<X|ne>>>32-X)+$}function A(F,$,se,ae,U,X,fe){var ne=F+(se^($|~ae))+U+fe;return(ne<<X|ne>>>32-X)+$}te.MD5=ee._createHelper(M),te.HmacMD5=ee._createHmacHelper(M)}(Math),K.MD5)},4424:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(3057),K.mode.CFB=function(){var H=K.lib.BlockCipherMode.extend();function te(oe,ge,ee,re){var V,M=this._iv;M?(V=M.slice(0),this._iv=void 0):V=this._prevBlock,re.encryptBlock(V,0);for(var N=0;N<ee;N++)oe[ge+N]^=V[N]}return H.Encryptor=H.extend({processBlock:function(oe,ge){var ee=this._cipher,re=ee.blockSize;te.call(this,oe,ge,re,ee),this._prevBlock=oe.slice(ge,ge+re)}}),H.Decryptor=H.extend({processBlock:function(oe,ge){var ee=this._cipher,re=ee.blockSize,V=oe.slice(ge,ge+re);te.call(this,oe,ge,re,ee),this._prevBlock=V}}),H}(),K.mode.CFB)},3592:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(3057),K.mode.CTRGladman=function(){var H=K.lib.BlockCipherMode.extend();function te(ee){if(255==(ee>>24&255)){var re=ee>>16&255,V=ee>>8&255,M=255&ee;255===re?(re=0,255===V?(V=0,255===M?M=0:++M):++V):++re,ee=0,ee+=re<<16,ee+=V<<8,ee+=M}else ee+=1<<24;return ee}var ge=H.Encryptor=H.extend({processBlock:function(ee,re){var V=this._cipher,M=V.blockSize,N=this._iv,E=this._counter;N&&(E=this._counter=N.slice(0),this._iv=void 0),function oe(ee){return 0===(ee[0]=te(ee[0]))&&(ee[1]=te(ee[1])),ee}(E);var O=E.slice(0);V.encryptBlock(O,0);for(var A=0;A<M;A++)ee[re+A]^=O[A]}});return H.Decryptor=ge,H}(),K.mode.CTRGladman)},6635:function(Te,xe,Q){var H,te,K;Te.exports=(K=Q(7585),Q(3057),K.mode.CTR=(te=(H=K.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(oe,ge){var ee=this._cipher,re=ee.blockSize,V=this._iv,M=this._counter;V&&(M=this._counter=V.slice(0),this._iv=void 0);var N=M.slice(0);ee.encryptBlock(N,0),M[re-1]=M[re-1]+1|0;for(var E=0;E<re;E++)oe[ge+E]^=N[E]}}),H.Decryptor=te,H),K.mode.CTR)},7934:function(Te,xe,Q){var H,K;Te.exports=(K=Q(7585),Q(3057),K.mode.ECB=((H=K.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(te,oe){this._cipher.encryptBlock(te,oe)}}),H.Decryptor=H.extend({processBlock:function(te,oe){this._cipher.decryptBlock(te,oe)}}),H),K.mode.ECB)},9354:function(Te,xe,Q){var H,te,K;Te.exports=(K=Q(7585),Q(3057),K.mode.OFB=(te=(H=K.lib.BlockCipherMode.extend()).Encryptor=H.extend({processBlock:function(oe,ge){var ee=this._cipher,re=ee.blockSize,V=this._iv,M=this._keystream;V&&(M=this._keystream=V.slice(0),this._iv=void 0),ee.encryptBlock(M,0);for(var N=0;N<re;N++)oe[ge+N]^=M[N]}}),H.Decryptor=te,H),K.mode.OFB)},4413:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(3057),K.pad.AnsiX923={pad:function(H,te){var oe=H.sigBytes,ge=4*te,ee=ge-oe%ge,re=oe+ee-1;H.clamp(),H.words[re>>>2]|=ee<<24-re%4*8,H.sigBytes+=ee},unpad:function(H){H.sigBytes-=255&H.words[H.sigBytes-1>>>2]}},K.pad.Ansix923)},4630:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(3057),K.pad.Iso10126={pad:function(H,te){var oe=4*te,ge=oe-H.sigBytes%oe;H.concat(K.lib.WordArray.random(ge-1)).concat(K.lib.WordArray.create([ge<<24],1))},unpad:function(H){H.sigBytes-=255&H.words[H.sigBytes-1>>>2]}},K.pad.Iso10126)},187:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(3057),K.pad.Iso97971={pad:function(H,te){H.concat(K.lib.WordArray.create([2147483648],1)),K.pad.ZeroPadding.pad(H,te)},unpad:function(H){K.pad.ZeroPadding.unpad(H),H.sigBytes--}},K.pad.Iso97971)},3237:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(3057),K.pad.NoPadding={pad:function(){},unpad:function(){}},K.pad.NoPadding)},1691:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(3057),K.pad.ZeroPadding={pad:function(H,te){var oe=4*te;H.clamp(),H.sigBytes+=oe-(H.sigBytes%oe||oe)},unpad:function(H){var te=H.words,oe=H.sigBytes-1;for(oe=H.sigBytes-1;oe>=0;oe--)if(te[oe>>>2]>>>24-oe%4*8&255){H.sigBytes=oe+1;break}}},K.pad.ZeroPadding)},8812:function(Te,xe,Q){var H,te,oe,ge,ee,V,M,K;Te.exports=(K=Q(7585),Q(5162),Q(3764),ge=(te=(H=K).lib).WordArray,V=(ee=H.algo).HMAC,M=ee.PBKDF2=(oe=te.Base).extend({cfg:oe.extend({keySize:4,hasher:ee.SHA1,iterations:1}),init:function(N){this.cfg=this.cfg.extend(N)},compute:function(N,E){for(var O=this.cfg,A=V.create(O.hasher,N),F=ge.create(),$=ge.create([1]),se=F.words,ae=$.words,U=O.keySize,X=O.iterations;se.length<U;){var fe=A.update(E).finalize($);A.reset();for(var ne=fe.words,le=ne.length,he=fe,Re=1;Re<X;Re++){he=A.finalize(he),A.reset();for(var Ce=he.words,Ne=0;Ne<le;Ne++)ne[Ne]^=Ce[Ne]}F.concat(fe),ae[0]++}return F.sigBytes=4*U,F}}),H.PBKDF2=function(N,E,O){return M.create(O).compute(N,E)},K.PBKDF2)},3544:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(8319),Q(9493),Q(7865),Q(3057),function(){var H=K,oe=H.lib.StreamCipher,ee=[],re=[],V=[],M=H.algo.RabbitLegacy=oe.extend({_doReset:function(){var E=this._key.words,O=this.cfg.iv,A=this._X=[E[0],E[3]<<16|E[2]>>>16,E[1],E[0]<<16|E[3]>>>16,E[2],E[1]<<16|E[0]>>>16,E[3],E[2]<<16|E[1]>>>16],F=this._C=[E[2]<<16|E[2]>>>16,4294901760&E[0]|65535&E[1],E[3]<<16|E[3]>>>16,4294901760&E[1]|65535&E[2],E[0]<<16|E[0]>>>16,4294901760&E[2]|65535&E[3],E[1]<<16|E[1]>>>16,4294901760&E[3]|65535&E[0]];this._b=0;for(var $=0;$<4;$++)N.call(this);for($=0;$<8;$++)F[$]^=A[$+4&7];if(O){var se=O.words,ae=se[0],U=se[1],X=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8),fe=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),ne=X>>>16|4294901760&fe,le=fe<<16|65535&X;for(F[0]^=X,F[1]^=ne,F[2]^=fe,F[3]^=le,F[4]^=X,F[5]^=ne,F[6]^=fe,F[7]^=le,$=0;$<4;$++)N.call(this)}},_doProcessBlock:function(E,O){var A=this._X;N.call(this),ee[0]=A[0]^A[5]>>>16^A[3]<<16,ee[1]=A[2]^A[7]>>>16^A[5]<<16,ee[2]=A[4]^A[1]>>>16^A[7]<<16,ee[3]=A[6]^A[3]>>>16^A[1]<<16;for(var F=0;F<4;F++)ee[F]=16711935&(ee[F]<<8|ee[F]>>>24)|4278255360&(ee[F]<<24|ee[F]>>>8),E[O+F]^=ee[F]},blockSize:4,ivSize:2});function N(){for(var E=this._X,O=this._C,A=0;A<8;A++)re[A]=O[A];for(O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<re[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<re[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<re[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<re[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<re[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<re[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<re[6]>>>0?1:0)|0,this._b=O[7]>>>0<re[7]>>>0?1:0,A=0;A<8;A++){var F=E[A]+O[A],$=65535&F,se=F>>>16;V[A]=(($*$>>>17)+$*se>>>15)+se*se^((4294901760&F)*F|0)+((65535&F)*F|0)}E[0]=V[0]+(V[7]<<16|V[7]>>>16)+(V[6]<<16|V[6]>>>16)|0,E[1]=V[1]+(V[0]<<8|V[0]>>>24)+V[7]|0,E[2]=V[2]+(V[1]<<16|V[1]>>>16)+(V[0]<<16|V[0]>>>16)|0,E[3]=V[3]+(V[2]<<8|V[2]>>>24)+V[1]|0,E[4]=V[4]+(V[3]<<16|V[3]>>>16)+(V[2]<<16|V[2]>>>16)|0,E[5]=V[5]+(V[4]<<8|V[4]>>>24)+V[3]|0,E[6]=V[6]+(V[5]<<16|V[5]>>>16)+(V[4]<<16|V[4]>>>16)|0,E[7]=V[7]+(V[6]<<8|V[6]>>>24)+V[5]|0}H.RabbitLegacy=oe._createHelper(M)}(),K.RabbitLegacy)},8182:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(8319),Q(9493),Q(7865),Q(3057),function(){var H=K,oe=H.lib.StreamCipher,ee=[],re=[],V=[],M=H.algo.Rabbit=oe.extend({_doReset:function(){for(var E=this._key.words,O=this.cfg.iv,A=0;A<4;A++)E[A]=16711935&(E[A]<<8|E[A]>>>24)|4278255360&(E[A]<<24|E[A]>>>8);var F=this._X=[E[0],E[3]<<16|E[2]>>>16,E[1],E[0]<<16|E[3]>>>16,E[2],E[1]<<16|E[0]>>>16,E[3],E[2]<<16|E[1]>>>16],$=this._C=[E[2]<<16|E[2]>>>16,4294901760&E[0]|65535&E[1],E[3]<<16|E[3]>>>16,4294901760&E[1]|65535&E[2],E[0]<<16|E[0]>>>16,4294901760&E[2]|65535&E[3],E[1]<<16|E[1]>>>16,4294901760&E[3]|65535&E[0]];for(this._b=0,A=0;A<4;A++)N.call(this);for(A=0;A<8;A++)$[A]^=F[A+4&7];if(O){var se=O.words,ae=se[0],U=se[1],X=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8),fe=16711935&(U<<8|U>>>24)|4278255360&(U<<24|U>>>8),ne=X>>>16|4294901760&fe,le=fe<<16|65535&X;for($[0]^=X,$[1]^=ne,$[2]^=fe,$[3]^=le,$[4]^=X,$[5]^=ne,$[6]^=fe,$[7]^=le,A=0;A<4;A++)N.call(this)}},_doProcessBlock:function(E,O){var A=this._X;N.call(this),ee[0]=A[0]^A[5]>>>16^A[3]<<16,ee[1]=A[2]^A[7]>>>16^A[5]<<16,ee[2]=A[4]^A[1]>>>16^A[7]<<16,ee[3]=A[6]^A[3]>>>16^A[1]<<16;for(var F=0;F<4;F++)ee[F]=16711935&(ee[F]<<8|ee[F]>>>24)|4278255360&(ee[F]<<24|ee[F]>>>8),E[O+F]^=ee[F]},blockSize:4,ivSize:2});function N(){for(var E=this._X,O=this._C,A=0;A<8;A++)re[A]=O[A];for(O[0]=O[0]+1295307597+this._b|0,O[1]=O[1]+3545052371+(O[0]>>>0<re[0]>>>0?1:0)|0,O[2]=O[2]+886263092+(O[1]>>>0<re[1]>>>0?1:0)|0,O[3]=O[3]+1295307597+(O[2]>>>0<re[2]>>>0?1:0)|0,O[4]=O[4]+3545052371+(O[3]>>>0<re[3]>>>0?1:0)|0,O[5]=O[5]+886263092+(O[4]>>>0<re[4]>>>0?1:0)|0,O[6]=O[6]+1295307597+(O[5]>>>0<re[5]>>>0?1:0)|0,O[7]=O[7]+3545052371+(O[6]>>>0<re[6]>>>0?1:0)|0,this._b=O[7]>>>0<re[7]>>>0?1:0,A=0;A<8;A++){var F=E[A]+O[A],$=65535&F,se=F>>>16;V[A]=(($*$>>>17)+$*se>>>15)+se*se^((4294901760&F)*F|0)+((65535&F)*F|0)}E[0]=V[0]+(V[7]<<16|V[7]>>>16)+(V[6]<<16|V[6]>>>16)|0,E[1]=V[1]+(V[0]<<8|V[0]>>>24)+V[7]|0,E[2]=V[2]+(V[1]<<16|V[1]>>>16)+(V[0]<<16|V[0]>>>16)|0,E[3]=V[3]+(V[2]<<8|V[2]>>>24)+V[1]|0,E[4]=V[4]+(V[3]<<16|V[3]>>>16)+(V[2]<<16|V[2]>>>16)|0,E[5]=V[5]+(V[4]<<8|V[4]>>>24)+V[3]|0,E[6]=V[6]+(V[5]<<16|V[5]>>>16)+(V[4]<<16|V[4]>>>16)|0,E[7]=V[7]+(V[6]<<8|V[6]>>>24)+V[5]|0}H.Rabbit=oe._createHelper(M)}(),K.Rabbit)},486:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(8319),Q(9493),Q(7865),Q(3057),function(){var H=K,oe=H.lib.StreamCipher,ge=H.algo,ee=ge.RC4=oe.extend({_doReset:function(){for(var M=this._key,N=M.words,E=M.sigBytes,O=this._S=[],A=0;A<256;A++)O[A]=A;A=0;for(var F=0;A<256;A++){var $=A%E,ae=O[A];O[A]=O[F=(F+O[A]+(N[$>>>2]>>>24-$%4*8&255))%256],O[F]=ae}this._i=this._j=0},_doProcessBlock:function(M,N){M[N]^=re.call(this)},keySize:8,ivSize:0});function re(){for(var M=this._S,N=this._i,E=this._j,O=0,A=0;A<4;A++){var F=M[N=(N+1)%256];M[N]=M[E=(E+M[N])%256],M[E]=F,O|=M[(M[N]+M[E])%256]<<24-8*A}return this._i=N,this._j=E,O}H.RC4=oe._createHelper(ee);var V=ge.RC4Drop=ee.extend({cfg:ee.cfg.extend({drop:192}),_doReset:function(){ee._doReset.call(this);for(var M=this.cfg.drop;M>0;M--)re.call(this)}});H.RC4Drop=oe._createHelper(V)}(),K.RC4)},4973:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),function(H){var te=K,oe=te.lib,ge=oe.WordArray,ee=oe.Hasher,re=te.algo,V=ge.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),M=ge.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),N=ge.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),E=ge.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),O=ge.create([0,1518500249,1859775393,2400959708,2840853838]),A=ge.create([1352829926,1548603684,1836072691,2053994217,0]),F=re.RIPEMD160=ee.extend({_doReset:function(){this._hash=ge.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ne,le){for(var he=0;he<16;he++){var Re=le+he,Ce=ne[Re];ne[Re]=16711935&(Ce<<8|Ce>>>24)|4278255360&(Ce<<24|Ce>>>8)}var Le,Gt,ti,De,Oe,we,ke,Oi,xt,qt,Xt,Ne=this._hash.words,He=O.words,me=A.words,Ae=V.words,Be=M.words,Pe=N.words,ft=E.words;for(we=Le=Ne[0],ke=Gt=Ne[1],Oi=ti=Ne[2],xt=De=Ne[3],qt=Oe=Ne[4],he=0;he<80;he+=1)Xt=Le+ne[le+Ae[he]]|0,Xt+=he<16?$(Gt,ti,De)+He[0]:he<32?se(Gt,ti,De)+He[1]:he<48?ae(Gt,ti,De)+He[2]:he<64?U(Gt,ti,De)+He[3]:X(Gt,ti,De)+He[4],Xt=(Xt=fe(Xt|=0,Pe[he]))+Oe|0,Le=Oe,Oe=De,De=fe(ti,10),ti=Gt,Gt=Xt,Xt=we+ne[le+Be[he]]|0,Xt+=he<16?X(ke,Oi,xt)+me[0]:he<32?U(ke,Oi,xt)+me[1]:he<48?ae(ke,Oi,xt)+me[2]:he<64?se(ke,Oi,xt)+me[3]:$(ke,Oi,xt)+me[4],Xt=(Xt=fe(Xt|=0,ft[he]))+qt|0,we=qt,qt=xt,xt=fe(Oi,10),Oi=ke,ke=Xt;Xt=Ne[1]+ti+xt|0,Ne[1]=Ne[2]+De+qt|0,Ne[2]=Ne[3]+Oe+we|0,Ne[3]=Ne[4]+Le+ke|0,Ne[4]=Ne[0]+Gt+Oi|0,Ne[0]=Xt},_doFinalize:function(){var ne=this._data,le=ne.words,he=8*this._nDataBytes,Re=8*ne.sigBytes;le[Re>>>5]|=128<<24-Re%32,le[14+(Re+64>>>9<<4)]=16711935&(he<<8|he>>>24)|4278255360&(he<<24|he>>>8),ne.sigBytes=4*(le.length+1),this._process();for(var Ce=this._hash,Ne=Ce.words,He=0;He<5;He++){var me=Ne[He];Ne[He]=16711935&(me<<8|me>>>24)|4278255360&(me<<24|me>>>8)}return Ce},clone:function(){var ne=ee.clone.call(this);return ne._hash=this._hash.clone(),ne}});function $(ne,le,he){return ne^le^he}function se(ne,le,he){return ne&le|~ne&he}function ae(ne,le,he){return(ne|~le)^he}function U(ne,le,he){return ne&he|le&~he}function X(ne,le,he){return ne^(le|~he)}function fe(ne,le){return ne<<le|ne>>>32-le}te.RIPEMD160=ee._createHelper(F),te.HmacRIPEMD160=ee._createHmacHelper(F)}(Math),K.RIPEMD160)},5162:function(Te,xe,Q){var H,te,oe,ge,re,V,K;Te.exports=(K=Q(7585),oe=(te=(H=K).lib).WordArray,re=[],V=H.algo.SHA1=(ge=te.Hasher).extend({_doReset:function(){this._hash=new oe.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(M,N){for(var E=this._hash.words,O=E[0],A=E[1],F=E[2],$=E[3],se=E[4],ae=0;ae<80;ae++){if(ae<16)re[ae]=0|M[N+ae];else{var U=re[ae-3]^re[ae-8]^re[ae-14]^re[ae-16];re[ae]=U<<1|U>>>31}var X=(O<<5|O>>>27)+se+re[ae];X+=ae<20?1518500249+(A&F|~A&$):ae<40?1859775393+(A^F^$):ae<60?(A&F|A&$|F&$)-1894007588:(A^F^$)-899497514,se=$,$=F,F=A<<30|A>>>2,A=O,O=X}E[0]=E[0]+O|0,E[1]=E[1]+A|0,E[2]=E[2]+F|0,E[3]=E[3]+$|0,E[4]=E[4]+se|0},_doFinalize:function(){var M=this._data,N=M.words,E=8*this._nDataBytes,O=8*M.sigBytes;return N[O>>>5]|=128<<24-O%32,N[14+(O+64>>>9<<4)]=Math.floor(E/4294967296),N[15+(O+64>>>9<<4)]=E,M.sigBytes=4*N.length,this._process(),this._hash},clone:function(){var M=ge.clone.call(this);return M._hash=this._hash.clone(),M}}),H.SHA1=ge._createHelper(V),H.HmacSHA1=ge._createHmacHelper(V),K.SHA1)},8769:function(Te,xe,Q){var H,oe,ge,ee,re,K;Te.exports=(K=Q(7585),Q(1817),oe=(H=K).lib.WordArray,re=(ge=H.algo).SHA224=(ee=ge.SHA256).extend({_doReset:function(){this._hash=new oe.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var V=ee._doFinalize.call(this);return V.sigBytes-=4,V}}),H.SHA224=ee._createHelper(re),H.HmacSHA224=ee._createHmacHelper(re),K.SHA224)},1817:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),function(H){var te=K,oe=te.lib,ge=oe.WordArray,ee=oe.Hasher,re=te.algo,V=[],M=[];!function(){function O(se){for(var ae=H.sqrt(se),U=2;U<=ae;U++)if(!(se%U))return!1;return!0}function A(se){return 4294967296*(se-(0|se))|0}for(var F=2,$=0;$<64;)O(F)&&($<8&&(V[$]=A(H.pow(F,.5))),M[$]=A(H.pow(F,1/3)),$++),F++}();var N=[],E=re.SHA256=ee.extend({_doReset:function(){this._hash=new ge.init(V.slice(0))},_doProcessBlock:function(O,A){for(var F=this._hash.words,$=F[0],se=F[1],ae=F[2],U=F[3],X=F[4],fe=F[5],ne=F[6],le=F[7],he=0;he<64;he++){if(he<16)N[he]=0|O[A+he];else{var Re=N[he-15],Ne=N[he-2];N[he]=((Re<<25|Re>>>7)^(Re<<14|Re>>>18)^Re>>>3)+N[he-7]+((Ne<<15|Ne>>>17)^(Ne<<13|Ne>>>19)^Ne>>>10)+N[he-16]}var Ae=$&se^$&ae^se&ae,ft=le+((X<<26|X>>>6)^(X<<21|X>>>11)^(X<<7|X>>>25))+(X&fe^~X&ne)+M[he]+N[he];le=ne,ne=fe,fe=X,X=U+ft|0,U=ae,ae=se,se=$,$=ft+((($<<30|$>>>2)^($<<19|$>>>13)^($<<10|$>>>22))+Ae)|0}F[0]=F[0]+$|0,F[1]=F[1]+se|0,F[2]=F[2]+ae|0,F[3]=F[3]+U|0,F[4]=F[4]+X|0,F[5]=F[5]+fe|0,F[6]=F[6]+ne|0,F[7]=F[7]+le|0},_doFinalize:function(){var O=this._data,A=O.words,F=8*this._nDataBytes,$=8*O.sigBytes;return A[$>>>5]|=128<<24-$%32,A[14+($+64>>>9<<4)]=H.floor(F/4294967296),A[15+($+64>>>9<<4)]=F,O.sigBytes=4*A.length,this._process(),this._hash},clone:function(){var O=ee.clone.call(this);return O._hash=this._hash.clone(),O}});te.SHA256=ee._createHelper(E),te.HmacSHA256=ee._createHmacHelper(E)}(Math),K.SHA256)},1971:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(401),function(H){var te=K,oe=te.lib,ge=oe.WordArray,ee=oe.Hasher,V=te.x64.Word,M=te.algo,N=[],E=[],O=[];!function(){for(var $=1,se=0,ae=0;ae<24;ae++){N[$+5*se]=(ae+1)*(ae+2)/2%64;var X=(2*$+3*se)%5;$=se%5,se=X}for($=0;$<5;$++)for(se=0;se<5;se++)E[$+5*se]=se+(2*$+3*se)%5*5;for(var fe=1,ne=0;ne<24;ne++){for(var le=0,he=0,Re=0;Re<7;Re++){if(1&fe){var Ce=(1<<Re)-1;Ce<32?he^=1<<Ce:le^=1<<Ce-32}128&fe?fe=fe<<1^113:fe<<=1}O[ne]=V.create(le,he)}}();var A=[];!function(){for(var $=0;$<25;$++)A[$]=V.create()}();var F=M.SHA3=ee.extend({cfg:ee.cfg.extend({outputLength:512}),_doReset:function(){for(var $=this._state=[],se=0;se<25;se++)$[se]=new V.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function($,se){for(var ae=this._state,U=this.blockSize/2,X=0;X<U;X++){var fe=$[se+2*X],ne=$[se+2*X+1];fe=16711935&(fe<<8|fe>>>24)|4278255360&(fe<<24|fe>>>8),(le=ae[X]).high^=ne=16711935&(ne<<8|ne>>>24)|4278255360&(ne<<24|ne>>>8),le.low^=fe}for(var he=0;he<24;he++){for(var Re=0;Re<5;Re++){for(var Ce=0,Ne=0,He=0;He<5;He++)Ce^=(le=ae[Re+5*He]).high,Ne^=le.low;var me=A[Re];me.high=Ce,me.low=Ne}for(Re=0;Re<5;Re++){var Ae=A[(Re+4)%5],Be=A[(Re+1)%5],Pe=Be.high,ft=Be.low;for(Ce=Ae.high^(Pe<<1|ft>>>31),Ne=Ae.low^(ft<<1|Pe>>>31),He=0;He<5;He++)(le=ae[Re+5*He]).high^=Ce,le.low^=Ne}for(var Le=1;Le<25;Le++){var Gt=(le=ae[Le]).high,ti=le.low,De=N[Le];De<32?(Ce=Gt<<De|ti>>>32-De,Ne=ti<<De|Gt>>>32-De):(Ce=ti<<De-32|Gt>>>64-De,Ne=Gt<<De-32|ti>>>64-De);var Oe=A[E[Le]];Oe.high=Ce,Oe.low=Ne}var we=A[0],ke=ae[0];for(we.high=ke.high,we.low=ke.low,Re=0;Re<5;Re++)for(He=0;He<5;He++){var Oi=A[Le=Re+5*He],xt=A[(Re+1)%5+5*He],qt=A[(Re+2)%5+5*He];(le=ae[Le]).high=Oi.high^~xt.high&qt.high,le.low=Oi.low^~xt.low&qt.low}var le,Xt=O[he];(le=ae[0]).high^=Xt.high,le.low^=Xt.low}},_doFinalize:function(){var $=this._data,se=$.words,U=8*$.sigBytes,X=32*this.blockSize;se[U>>>5]|=1<<24-U%32,se[(H.ceil((U+1)/X)*X>>>5)-1]|=128,$.sigBytes=4*se.length,this._process();for(var fe=this._state,ne=this.cfg.outputLength/8,le=ne/8,he=[],Re=0;Re<le;Re++){var Ce=fe[Re],Ne=Ce.high,He=Ce.low;Ne=16711935&(Ne<<8|Ne>>>24)|4278255360&(Ne<<24|Ne>>>8),he.push(He=16711935&(He<<8|He>>>24)|4278255360&(He<<24|He>>>8)),he.push(Ne)}return new ge.init(he,ne)},clone:function(){for(var $=ee.clone.call(this),se=$._state=this._state.slice(0),ae=0;ae<25;ae++)se[ae]=se[ae].clone();return $}});te.SHA3=ee._createHelper(F),te.HmacSHA3=ee._createHmacHelper(F)}(Math),K.SHA3)},6787:function(Te,xe,Q){var H,te,oe,ge,ee,re,V,K;Te.exports=(K=Q(7585),Q(401),Q(3351),oe=(te=(H=K).x64).Word,ge=te.WordArray,V=(ee=H.algo).SHA384=(re=ee.SHA512).extend({_doReset:function(){this._hash=new ge.init([new oe.init(3418070365,3238371032),new oe.init(1654270250,914150663),new oe.init(2438529370,812702999),new oe.init(355462360,4144912697),new oe.init(1731405415,4290775857),new oe.init(2394180231,1750603025),new oe.init(3675008525,1694076839),new oe.init(1203062813,3204075428)])},_doFinalize:function(){var M=re._doFinalize.call(this);return M.sigBytes-=16,M}}),H.SHA384=re._createHelper(V),H.HmacSHA384=re._createHmacHelper(V),K.SHA384)},3351:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(401),function(){var H=K,oe=H.lib.Hasher,ge=H.x64,ee=ge.Word,re=ge.WordArray,V=H.algo;function M(){return ee.create.apply(ee,arguments)}var N=[M(1116352408,3609767458),M(1899447441,602891725),M(3049323471,3964484399),M(3921009573,2173295548),M(961987163,4081628472),M(1508970993,3053834265),M(2453635748,2937671579),M(2870763221,3664609560),M(3624381080,2734883394),M(310598401,1164996542),M(607225278,1323610764),M(1426881987,3590304994),M(1925078388,4068182383),M(2162078206,991336113),M(2614888103,633803317),M(3248222580,3479774868),M(3835390401,2666613458),M(4022224774,944711139),M(264347078,2341262773),M(604807628,2007800933),M(770255983,1495990901),M(1249150122,1856431235),M(1555081692,3175218132),M(1996064986,2198950837),M(2554220882,3999719339),M(2821834349,766784016),M(2952996808,2566594879),M(3210313671,3203337956),M(3336571891,1034457026),M(3584528711,2466948901),M(113926993,3758326383),M(338241895,168717936),M(666307205,1188179964),M(773529912,1546045734),M(1294757372,1522805485),M(1396182291,2643833823),M(1695183700,2343527390),M(1986661051,1014477480),M(2177026350,1206759142),M(2456956037,344077627),M(2730485921,1290863460),M(2820302411,3158454273),M(3259730800,3505952657),M(3345764771,106217008),M(3516065817,3606008344),M(3600352804,1432725776),M(4094571909,1467031594),M(275423344,851169720),M(430227734,3100823752),M(506948616,1363258195),M(659060556,3750685593),M(883997877,3785050280),M(958139571,3318307427),M(1322822218,3812723403),M(1537002063,2003034995),M(1747873779,3602036899),M(1955562222,1575990012),M(2024104815,1125592928),M(2227730452,2716904306),M(2361852424,442776044),M(2428436474,593698344),M(2756734187,3733110249),M(3204031479,2999351573),M(3329325298,3815920427),M(3391569614,3928383900),M(3515267271,566280711),M(3940187606,3454069534),M(4118630271,4000239992),M(116418474,1914138554),M(174292421,2731055270),M(289380356,3203993006),M(460393269,320620315),M(685471733,587496836),M(852142971,1086792851),M(1017036298,365543100),M(1126000580,2618297676),M(1288033470,3409855158),M(1501505948,4234509866),M(1607167915,987167468),M(1816402316,1246189591)],E=[];!function(){for(var A=0;A<80;A++)E[A]=M()}();var O=V.SHA512=oe.extend({_doReset:function(){this._hash=new re.init([new ee.init(1779033703,4089235720),new ee.init(3144134277,2227873595),new ee.init(1013904242,4271175723),new ee.init(2773480762,1595750129),new ee.init(1359893119,2917565137),new ee.init(2600822924,725511199),new ee.init(528734635,4215389547),new ee.init(1541459225,327033209)])},_doProcessBlock:function(A,F){for(var $=this._hash.words,se=$[0],ae=$[1],U=$[2],X=$[3],fe=$[4],ne=$[5],le=$[6],he=$[7],Re=se.high,Ce=se.low,Ne=ae.high,He=ae.low,me=U.high,Ae=U.low,Be=X.high,Pe=X.low,ft=fe.high,Le=fe.low,Gt=ne.high,ti=ne.low,De=le.high,Oe=le.low,we=he.high,ke=he.low,Oi=Re,xt=Ce,qt=Ne,Xt=He,Nt=me,Oa=Ae,Yu=Be,Po=Pe,Xr=ft,ze=Le,tc=Gt,Je=ti,Vs=De,Os=Oe,Ns=we,Fs=ke,yr=0;yr<80;yr++){var wr,ao,ic=E[yr];if(yr<16)ao=ic.high=0|A[F+2*yr],wr=ic.low=0|A[F+2*yr+1];else{var Uf=E[yr-15],Sr=Uf.high,is=Uf.low,Qu=(is>>>1|Sr<<31)^(is>>>8|Sr<<24)^(is>>>7|Sr<<25),Hf=E[yr-2],Eo=Hf.high,Bs=Hf.low,Gf=(Bs>>>19|Eo<<13)^(Bs<<3|Eo>>>29)^(Bs>>>6|Eo<<26),zf=E[yr-7],rc=E[yr-16],ac=rc.low;ic.high=ao=(ao=(ao=((Sr>>>1|is<<31)^(Sr>>>8|is<<24)^Sr>>>7)+zf.high+((wr=Qu+zf.low)>>>0<Qu>>>0?1:0))+((Eo>>>19|Bs<<13)^(Eo<<3|Bs>>>29)^Eo>>>6)+((wr+=Gf)>>>0<Gf>>>0?1:0))+rc.high+((wr+=ac)>>>0<ac>>>0?1:0),ic.low=wr}var or,jf=Xr&tc^~Xr&Vs,oc=ze&Je^~ze&Os,Ju=Oi&qt^Oi&Nt^qt&Nt,Pn=(xt>>>28|Oi<<4)^(xt<<30|Oi>>>2)^(xt<<25|Oi>>>7),id=N[yr],sc=id.low,Na=Ns+((Xr>>>14|ze<<18)^(Xr>>>18|ze<<14)^(Xr<<23|ze>>>9))+((or=Fs+((ze>>>14|Xr<<18)^(ze>>>18|Xr<<14)^(ze<<23|Xr>>>9)))>>>0<Fs>>>0?1:0),Yr=Pn+(xt&Xt^xt&Oa^Xt&Oa);Ns=Vs,Fs=Os,Vs=tc,Os=Je,tc=Xr,Je=ze,Xr=Yu+(Na=(Na=(Na=Na+jf+((or+=oc)>>>0<oc>>>0?1:0))+id.high+((or+=sc)>>>0<sc>>>0?1:0))+ao+((or+=wr)>>>0<wr>>>0?1:0))+((ze=Po+or|0)>>>0<Po>>>0?1:0)|0,Yu=Nt,Po=Oa,Nt=qt,Oa=Xt,qt=Oi,Xt=xt,Oi=Na+(((Oi>>>28|xt<<4)^(Oi<<30|xt>>>2)^(Oi<<25|xt>>>7))+Ju+(Yr>>>0<Pn>>>0?1:0))+((xt=or+Yr|0)>>>0<or>>>0?1:0)|0}Ce=se.low=Ce+xt,se.high=Re+Oi+(Ce>>>0<xt>>>0?1:0),He=ae.low=He+Xt,ae.high=Ne+qt+(He>>>0<Xt>>>0?1:0),Ae=U.low=Ae+Oa,U.high=me+Nt+(Ae>>>0<Oa>>>0?1:0),Pe=X.low=Pe+Po,X.high=Be+Yu+(Pe>>>0<Po>>>0?1:0),Le=fe.low=Le+ze,fe.high=ft+Xr+(Le>>>0<ze>>>0?1:0),ti=ne.low=ti+Je,ne.high=Gt+tc+(ti>>>0<Je>>>0?1:0),Oe=le.low=Oe+Os,le.high=De+Vs+(Oe>>>0<Os>>>0?1:0),ke=he.low=ke+Fs,he.high=we+Ns+(ke>>>0<Fs>>>0?1:0)},_doFinalize:function(){var A=this._data,F=A.words,$=8*this._nDataBytes,se=8*A.sigBytes;return F[se>>>5]|=128<<24-se%32,F[30+(se+128>>>10<<5)]=Math.floor($/4294967296),F[31+(se+128>>>10<<5)]=$,A.sigBytes=4*F.length,this._process(),this._hash.toX32()},clone:function(){var A=oe.clone.call(this);return A._hash=this._hash.clone(),A},blockSize:32});H.SHA512=oe._createHelper(O),H.HmacSHA512=oe._createHmacHelper(O)}(),K.SHA512)},7243:function(Te,xe,Q){var K;Te.exports=(K=Q(7585),Q(8319),Q(9493),Q(7865),Q(3057),function(){var H=K,te=H.lib,oe=te.WordArray,ge=te.BlockCipher,ee=H.algo,re=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],V=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],M=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],N=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],E=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],O=ee.DES=ge.extend({_doReset:function(){for(var ae=this._key.words,U=[],X=0;X<56;X++){var fe=re[X]-1;U[X]=ae[fe>>>5]>>>31-fe%32&1}for(var ne=this._subKeys=[],le=0;le<16;le++){var he=ne[le]=[],Re=M[le];for(X=0;X<24;X++)he[X/6|0]|=U[(V[X]-1+Re)%28]<<31-X%6,he[4+(X/6|0)]|=U[28+(V[X+24]-1+Re)%28]<<31-X%6;for(he[0]=he[0]<<1|he[0]>>>31,X=1;X<7;X++)he[X]=he[X]>>>4*(X-1)+3;he[7]=he[7]<<5|he[7]>>>27}var Ce=this._invSubKeys=[];for(X=0;X<16;X++)Ce[X]=ne[15-X]},encryptBlock:function(se,ae){this._doCryptBlock(se,ae,this._subKeys)},decryptBlock:function(se,ae){this._doCryptBlock(se,ae,this._invSubKeys)},_doCryptBlock:function(se,ae,U){this._lBlock=se[ae],this._rBlock=se[ae+1],A.call(this,4,252645135),A.call(this,16,65535),F.call(this,2,858993459),F.call(this,8,16711935),A.call(this,1,1431655765);for(var X=0;X<16;X++){for(var fe=U[X],ne=this._lBlock,le=this._rBlock,he=0,Re=0;Re<8;Re++)he|=N[Re][((le^fe[Re])&E[Re])>>>0];this._lBlock=le,this._rBlock=ne^he}var Ce=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Ce,A.call(this,1,1431655765),F.call(this,8,16711935),F.call(this,2,858993459),A.call(this,16,65535),A.call(this,4,252645135),se[ae]=this._lBlock,se[ae+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function A(se,ae){var U=(this._lBlock>>>se^this._rBlock)&ae;this._rBlock^=U,this._lBlock^=U<<se}function F(se,ae){var U=(this._rBlock>>>se^this._lBlock)&ae;this._lBlock^=U,this._rBlock^=U<<se}H.DES=ge._createHelper(O);var $=ee.TripleDES=ge.extend({_doReset:function(){var ae=this._key.words;if(2!==ae.length&&4!==ae.length&&ae.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var U=ae.slice(0,2),X=ae.length<4?ae.slice(0,2):ae.slice(2,4),fe=ae.length<6?ae.slice(0,2):ae.slice(4,6);this._des1=O.createEncryptor(oe.create(U)),this._des2=O.createEncryptor(oe.create(X)),this._des3=O.createEncryptor(oe.create(fe))},encryptBlock:function(se,ae){this._des1.encryptBlock(se,ae),this._des2.decryptBlock(se,ae),this._des3.encryptBlock(se,ae)},decryptBlock:function(se,ae){this._des3.decryptBlock(se,ae),this._des2.encryptBlock(se,ae),this._des1.decryptBlock(se,ae)},keySize:6,ivSize:2,blockSize:2});H.TripleDES=ge._createHelper($)}(),K.TripleDES)},401:function(Te,xe,Q){var oe,ge,ee,re,K;Te.exports=(K=Q(7585),ge=(oe=K.lib).Base,ee=oe.WordArray,(re=K.x64={}).Word=ge.extend({init:function(N,E){this.high=N,this.low=E}}),re.WordArray=ge.extend({init:function(N,E){N=this.words=N||[],this.sigBytes=null!=E?E:8*N.length},toX32:function(){for(var N=this.words,E=N.length,O=[],A=0;A<E;A++){var F=N[A];O.push(F.high),O.push(F.low)}return ee.create(O,this.sigBytes)},clone:function(){for(var N=ge.clone.call(this),E=N.words=this.words.slice(0),O=E.length,A=0;A<O;A++)E[A]=E[A].clone();return N}}),K)},340:(Te,xe,Q)=>{var K=Q(9471),H=Q(2992),te=Q(7657),oe=Q(5583),ge=Q(1929),ee=Q(8083),re=Q(3818);re.alea=K,re.xor128=H,re.xorwow=te,re.xorshift7=oe,re.xor4096=ge,re.tychei=ee,Te.exports=re},9471:function(Te,xe,Q){var K;!function(H,te,oe){function ge(M){var N=this,E=function V(){var M=4022871197;return function(E){E=String(E);for(var O=0;O<E.length;O++){var A=.02519603282416938*(M+=E.charCodeAt(O));A-=M=A>>>0,M=(A*=M)>>>0,M+=4294967296*(A-=M)}return 2.3283064365386963e-10*(M>>>0)}}();N.next=function(){var O=2091639*N.s0+2.3283064365386963e-10*N.c;return N.s0=N.s1,N.s1=N.s2,N.s2=O-(N.c=0|O)},N.c=1,N.s0=E(" "),N.s1=E(" "),N.s2=E(" "),N.s0-=E(M),N.s0<0&&(N.s0+=1),N.s1-=E(M),N.s1<0&&(N.s1+=1),N.s2-=E(M),N.s2<0&&(N.s2+=1),E=null}function ee(M,N){return N.c=M.c,N.s0=M.s0,N.s1=M.s1,N.s2=M.s2,N}function re(M,N){var E=new ge(M),O=N&&N.state,A=E.next;return A.int32=function(){return 4294967296*E.next()|0},A.double=function(){return A()+11102230246251565e-32*(2097152*A()|0)},A.quick=A,O&&("object"==typeof O&&ee(O,E),A.state=function(){return ee(E,{})}),A}te&&te.exports?te.exports=re:Q.amdD&&Q.amdO?void 0!==(K=function(){return re}.call(xe,Q,xe,te))&&(te.exports=K):this.alea=re}(0,Te=Q.nmd(Te))},8083:function(Te,xe,Q){var K;!function(H,te,oe){function ge(V){var M=this,N="";M.next=function(){var O=M.b,A=M.c,F=M.d,$=M.a;return O=O<<25^O>>>7^A,A=A-F|0,F=F<<24^F>>>8^$,$=$-O|0,M.b=O=O<<20^O>>>12^A,M.c=A=A-F|0,M.d=F<<16^A>>>16^$,M.a=$-O|0},M.a=0,M.b=0,M.c=-1640531527,M.d=1367130551,V===Math.floor(V)?(M.a=V/4294967296|0,M.b=0|V):N+=V;for(var E=0;E<N.length+20;E++)M.b^=0|N.charCodeAt(E),M.next()}function ee(V,M){return M.a=V.a,M.b=V.b,M.c=V.c,M.d=V.d,M}function re(V,M){var N=new ge(V),E=M&&M.state,O=function(){return(N.next()>>>0)/4294967296};return O.double=function(){do{var $=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===$);return $},O.int32=N.next,O.quick=O,E&&("object"==typeof E&&ee(E,N),O.state=function(){return ee(N,{})}),O}te&&te.exports?te.exports=re:Q.amdD&&Q.amdO?void 0!==(K=function(){return re}.call(xe,Q,xe,te))&&(te.exports=K):this.tychei=re}(0,Te=Q.nmd(Te))},2992:function(Te,xe,Q){var K;!function(H,te,oe){function ge(V){var M=this,N="";M.x=0,M.y=0,M.z=0,M.w=0,M.next=function(){var O=M.x^M.x<<11;return M.x=M.y,M.y=M.z,M.z=M.w,M.w^=M.w>>>19^O^O>>>8},V===(0|V)?M.x=V:N+=V;for(var E=0;E<N.length+64;E++)M.x^=0|N.charCodeAt(E),M.next()}function ee(V,M){return M.x=V.x,M.y=V.y,M.z=V.z,M.w=V.w,M}function re(V,M){var N=new ge(V),E=M&&M.state,O=function(){return(N.next()>>>0)/4294967296};return O.double=function(){do{var $=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===$);return $},O.int32=N.next,O.quick=O,E&&("object"==typeof E&&ee(E,N),O.state=function(){return ee(N,{})}),O}te&&te.exports?te.exports=re:Q.amdD&&Q.amdO?void 0!==(K=function(){return re}.call(xe,Q,xe,te))&&(te.exports=K):this.xor128=re}(0,Te=Q.nmd(Te))},1929:function(Te,xe,Q){var K;!function(H,te,oe){function ge(V){var M=this;M.next=function(){var F,$,E=M.w,O=M.X,A=M.i;return M.w=E=E+1640531527|0,$=O[A+34&127],F=O[A=A+1&127],$^=$<<13,F^=F<<17,$=O[A]=($^=$>>>15)^(F^=F>>>12),M.i=A,$+(E^E>>>16)|0},function N(E,O){var A,F,$,se,ae,U=[],X=128;for(O===(0|O)?(F=O,O=null):(O+="\0",F=0,X=Math.max(X,O.length)),$=0,se=-32;se<X;++se)O&&(F^=O.charCodeAt((se+32)%O.length)),0===se&&(ae=F),F^=F<<10,F^=F>>>15,F^=F<<4,F^=F>>>13,se>=0&&($=0==(A=U[127&se]^=F+(ae=ae+1640531527|0))?$+1:0);for($>=128&&(U[127&(O&&O.length||0)]=-1),$=127,se=512;se>0;--se)F=U[$+34&127],A=U[$=$+1&127],F^=F<<13,A^=A<<17,U[$]=(F^=F>>>15)^(A^=A>>>12);E.w=ae,E.X=U,E.i=$}(M,V)}function ee(V,M){return M.i=V.i,M.w=V.w,M.X=V.X.slice(),M}function re(V,M){null==V&&(V=+new Date);var N=new ge(V),E=M&&M.state,O=function(){return(N.next()>>>0)/4294967296};return O.double=function(){do{var $=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===$);return $},O.int32=N.next,O.quick=O,E&&(E.X&&ee(E,N),O.state=function(){return ee(N,{})}),O}te&&te.exports?te.exports=re:Q.amdD&&Q.amdO?void 0!==(K=function(){return re}.call(xe,Q,xe,te))&&(te.exports=K):this.xor4096=re}(0,Te=Q.nmd(Te))},5583:function(Te,xe,Q){var K;!function(H,te,oe){function ge(V){var M=this;M.next=function(){var A,F,E=M.x,O=M.i;return A=E[O],F=(A^=A>>>7)^A<<24,F^=(A=E[O+1&7])^A>>>10,F^=(A=E[O+3&7])^A>>>3,F^=(A=E[O+4&7])^A<<7,A=E[O+7&7],E[O]=F^=(A^=A<<13)^A<<9,M.i=O+1&7,F},function N(E,O){var A,$=[];if(O===(0|O))$[0]=O;else for(O=""+O,A=0;A<O.length;++A)$[7&A]=$[7&A]<<15^O.charCodeAt(A)+$[A+1&7]<<13;for(;$.length<8;)$.push(0);for(A=0;A<8&&0===$[A];++A);for(8==A&&($[7]=-1),E.x=$,E.i=0,A=256;A>0;--A)E.next()}(M,V)}function ee(V,M){return M.x=V.x.slice(),M.i=V.i,M}function re(V,M){null==V&&(V=+new Date);var N=new ge(V),E=M&&M.state,O=function(){return(N.next()>>>0)/4294967296};return O.double=function(){do{var $=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===$);return $},O.int32=N.next,O.quick=O,E&&(E.x&&ee(E,N),O.state=function(){return ee(N,{})}),O}te&&te.exports?te.exports=re:Q.amdD&&Q.amdO?void 0!==(K=function(){return re}.call(xe,Q,xe,te))&&(te.exports=K):this.xorshift7=re}(0,Te=Q.nmd(Te))},7657:function(Te,xe,Q){var K;!function(H,te,oe){function ge(V){var M=this,N="";M.next=function(){var O=M.x^M.x>>>2;return M.x=M.y,M.y=M.z,M.z=M.w,M.w=M.v,(M.d=M.d+362437|0)+(M.v=M.v^M.v<<4^O^O<<1)|0},M.x=0,M.y=0,M.z=0,M.w=0,M.v=0,V===(0|V)?M.x=V:N+=V;for(var E=0;E<N.length+64;E++)M.x^=0|N.charCodeAt(E),E==N.length&&(M.d=M.x<<10^M.x>>>4),M.next()}function ee(V,M){return M.x=V.x,M.y=V.y,M.z=V.z,M.w=V.w,M.v=V.v,M.d=V.d,M}function re(V,M){var N=new ge(V),E=M&&M.state,O=function(){return(N.next()>>>0)/4294967296};return O.double=function(){do{var $=((N.next()>>>11)+(N.next()>>>0)/4294967296)/(1<<21)}while(0===$);return $},O.int32=N.next,O.quick=O,E&&("object"==typeof E&&ee(E,N),O.state=function(){return ee(N,{})}),O}te&&te.exports?te.exports=re:Q.amdD&&Q.amdO?void 0!==(K=function(){return re}.call(xe,Q,xe,te))&&(te.exports=K):this.xorwow=re}(0,Te=Q.nmd(Te))},3818:function(Te,xe,Q){var K;!function(H,te,oe){var A,ge=256,M=oe.pow(ge,6),N=oe.pow(2,52),E=2*N,O=255;function F(ne,le,he){var Re=[],Ce=U(ae((le=1==le?{entropy:!0}:le||{}).entropy?[ne,fe(te)]:null==ne?function X(){try{var ne;return A&&(ne=A.randomBytes)?ne=ne(ge):(ne=new Uint8Array(ge),(H.crypto||H.msCrypto).getRandomValues(ne)),fe(ne)}catch(Re){var le=H.navigator,he=le&&le.plugins;return[+new Date,H,he,H.screen,fe(te)]}}():ne,3),Re),Ne=new $(Re),He=function(){for(var me=Ne.g(6),Ae=M,Be=0;me<N;)me=(me+Be)*ge,Ae*=ge,Be=Ne.g(1);for(;me>=E;)me/=2,Ae/=2,Be>>>=1;return(me+Be)/Ae};return He.int32=function(){return 0|Ne.g(4)},He.quick=function(){return Ne.g(4)/4294967296},He.double=He,U(fe(Ne.S),te),(le.pass||he||function(me,Ae,Be,Pe){return Pe&&(Pe.S&&se(Pe,Ne),me.state=function(){return se(Ne,{})}),Be?(oe.random=me,Ae):me})(He,Ce,"global"in le?le.global:this==oe,le.state)}function $(ne){var le,he=ne.length,Re=this,Ce=0,Ne=Re.i=Re.j=0,He=Re.S=[];for(he||(ne=[he++]);Ce<ge;)He[Ce]=Ce++;for(Ce=0;Ce<ge;Ce++)He[Ce]=He[Ne=O&Ne+ne[Ce%he]+(le=He[Ce])],He[Ne]=le;(Re.g=function(me){for(var Ae,Be=0,Pe=Re.i,ft=Re.j,Le=Re.S;me--;)Ae=Le[Pe=O&Pe+1],Be=Be*ge+Le[O&(Le[Pe]=Le[ft=O&ft+Ae])+(Le[ft]=Ae)];return Re.i=Pe,Re.j=ft,Be})(ge)}function se(ne,le){return le.i=ne.i,le.j=ne.j,le.S=ne.S.slice(),le}function ae(ne,le){var Ce,he=[],Re=typeof ne;if(le&&"object"==Re)for(Ce in ne)try{he.push(ae(ne[Ce],le-1))}catch(Ne){}return he.length?he:"string"==Re?ne:ne+"\0"}function U(ne,le){for(var Re,he=ne+"",Ce=0;Ce<he.length;)le[O&Ce]=O&(Re^=19*le[O&Ce])+he.charCodeAt(Ce++);return fe(le)}function fe(ne){return String.fromCharCode.apply(0,ne)}if(U(oe.random(),te),Te.exports){Te.exports=F;try{A=Q(5042)}catch(ne){}}else void 0!==(K=function(){return F}.call(xe,Q,xe,Te))&&(Te.exports=K)}("undefined"!=typeof self?self:this,[],Math)},2480:()=>{},5042:()=>{}},Te=>{Te(Te.s=7151)}]);